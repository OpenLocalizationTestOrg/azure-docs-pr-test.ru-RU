---
title: "Прекращение использования уровней производительности в Azure Cosmos DB | Документация Майкрософт"
description: "Сведения об уровнях производительности S1, S2 и S3, ранее доступных в Azure Cosmos DB."
services: cosmos-db
author: mimig1
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: 7dc21c71-47e2-4e06-aa21-e84af52866f4
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/29/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 4cab6297e45dc7a14826d7bb10cf22a8a300355f
ms.sourcegitcommit: 9890483687a2b28860ec179f5fd0a292cdf11d22
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/24/2018
---
# <a name="retiring-the-s1-s2-and-s3-performance-levels"></a>Прекращение использования уровней производительности S1, S2 и S3

> [!IMPORTANT] 
> Использование уровней производительности S1, S2 и S3, которые рассматриваются в этой статье, прекращается. Они больше не будут доступны для новых учетных записей Azure Cosmos DB.
>

[!INCLUDE [cosmos-db-sql-api](../../includes/cosmos-db-sql-api.md)]

В этой статье представлен обзор уровней производительности S1, S2 и S3, а также рассматривается процедура переноса коллекций, использующих эти уровни производительности, в односекционные коллекции (это произойдет в конце 2017 года). Ознакомившись с данной статьей, вы сможете ответить на следующие вопросы.

- [Почему прекращается использование уровней производительности S1, S2 и S3?](#why-retired)
- [Как сравнить односекционные коллекции и секционированные коллекции с уровнями производительности S1, S2 и S3?](#compare)
- [Что мне необходимо сделать, чтобы обеспечить непрерывный доступ к данным?](#uninterrupted-access)
- [Как изменится моя коллекция после переноса?](#collection-change)
- [Как изменятся мои счета после переноса на односекционные коллекции?](#billing-change)
- [Что делать, если мне нужен объем хранилища больше 10 ГБ?](#more-storage-needed)
- [Могу ли я переключаться между уровнями производительности S1, S2 и S3 до запланированного переноса?](#change-before)
- [Как узнать, что моя коллекция перенесена?](#when-migrated)
- [Могу ли я сам выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции?](#migrate-diy)
- [Как на мне отразится перенос, если я являюсь пользователем подписки EA?](#ea-customer)

<a name="why-retired"></a>

## <a name="why-are-the-s1-s2-and-s3-performance-levels-being-retired"></a>Почему прекращается использование уровней производительности S1, S2 и S3?

Уровни производительности S1, S2 и S3 не предлагают той гибкости, которую обеспечивает обычная служба Azure Cosmos DB. Пропускная способность и емкость хранилища для уровней производительности S1, S2 и S3 предварительно заданы, не изменяются и не поддерживают эластичность. Теперь в Azure Cosmos DB доступна настройка пропускной способности и емкости хранилища, что обеспечивает гораздо большую гибкость и возможность масштабирования по мере изменения потребностей.

<a name="compare"></a>

## <a name="how-do-single-partition-collections-and-partitioned-collections-compare-to-the-s1-s2-s3-performance-levels"></a>Как сравнить односекционные коллекции и секционированные коллекции с уровнями производительности S1, S2 и S3?

В приведенной ниже таблице сравниваются пропускная способность и емкость хранилища, доступные для односекционных и секционированных коллекций, а также для уровней производительности S1, S2, S3. В этом примере данные приводятся для региона "Восточная часть США 2":

|   |Секционированная коллекция|Односекционная коллекция|S1|S2|S3|
|---|---|---|---|---|---|
|Максимальная пропускная способность|Без ограничений|10 000 ЕЗ/с|250 ЕЗ/с|1000 ЕЗ/с|2500 ЕЗ/с|
|Минимальная пропускная способность|2500 ЕЗ/с|400 ЕЗ/с|250 ЕЗ/с|1000 ЕЗ/с|2500 ЕЗ/с|
|Максимальный объем хранилища|Без ограничений|10 ГБ|10 ГБ|10 ГБ|10 ГБ|
|Цена (ежемесячно)|Пропускная способность: 6 долл. США за 100 ЕЗ/с<br><br>Хранилище: 0,25 долл. США за 1 ГБ|Пропускная способность: 6 долл. США за 100 ЕЗ/с<br><br>Хранилище: 0,25 долл. США за 1 ГБ|25 долл. США|50 долл. США|100 долл. США|

Вы являетесь пользователем подписки EA? Если это так, то ознакомьтесь с разделом [Как на мне отразится перенос, если я являюсь пользователем подписки EA?](#ea-customer)

<a name="uninterrupted-access"></a>

## <a name="what-do-i-need-to-do-to-ensure-uninterrupted-access-to-my-data"></a>Что мне необходимо сделать, чтобы обеспечить непрерывный доступ к данным?

Ничего не нужно делать, Cosmos DB выполнит перенос самостоятельно. Если у вас есть коллекция уровня S1, S2 или S3, то она будет перенесена в односекционную коллекцию. Это произойдет в конце 2017 года. 

<a name="collection-change"></a>

## <a name="how-will-my-collection-change-after-the-migration"></a>Как изменится моя коллекция после переноса?

Если у вас есть коллекция уровня S1, то она будет перенесена в односекционную коллекцию с пропускной способностью 400 ЕЗ/с. 400 ЕЗ/с — это самая низкая пропускная способность, доступная в односекционных коллекциях. При этом стоимость односекционной коллекции с пропускной способностью 400 ЕЗ/с примерно равна стоимости коллекции уровня S1 с пропускной способностью 250 ЕЗ/с. Таким образом, вы не переплачиваете за дополнительные 150 ЕЗ/с.

Если у вас есть коллекция уровня S2, то она будет перенесена в односекционную коллекцию с пропускной способностью 1000 ЕЗ/с. Вы не заметите никаких изменений в уровне пропускной способности.

Если у вас есть коллекция уровня S3, то она будет перенесена в односекционную коллекцию с пропускной способностью 2500 ЕЗ/с. Вы не заметите никаких изменений в уровне пропускной способности.

В каждом из этих случаев после переноса коллекции можно настроить уровень пропускной способности или выполнить масштабирование, чтобы обеспечить низкую задержку при доступе пользователей. Чтобы изменить уровень пропускной способности после переноса коллекции, просто откройте учетную запись Cosmos DB на портале Azure, щелкните "Масштаб", выберите коллекцию, а затем измените уровень пропускной способности, как показано на этом снимке экрана:

![Как масштабировать пропускную способность с помощью портала Azure](./media/performance-levels/portal-scale-throughput.png)

<a name="billing-change"></a>

## <a name="how-will-my-billing-change-after-im-migrated-to-the-single-partition-collections"></a>Как изменятся мои счета после переноса на односекционные коллекции?

Предположим, что у вас 10 коллекций уровня S1, каждая из которых имеет емкость хранилища 1 ГБ и находится в регионе "Восточная часть США". Вы переносите эти 10 коллекций S1 в 10 односекционных коллекций с пропускной способностью 400 ЕЗ/с (минимальный уровень). Если у вас будет 10 односекционных коллекций в течение полного месяца, то счет будет иметь следующий вид:

![Сравнение цены на 10 коллекций уровня S1 с ценой на 10 односекционных коллекций](./media/performance-levels/s1-vs-standard-pricing.png)

<a name="more-storage-needed"></a>

## <a name="what-if-i-need-more-than-10-gb-of-storage"></a>Что делать, если мне нужен объем хранилища больше 10 ГБ?

Независимо от того, используется ли коллекция с уровнем производительности S1, S2 или S3 или односекционная коллекция (каждая из которых имеет емкость хранилища 10 ГБ), вы можете воспользоваться средством переноса данных Cosmos DB, чтобы перенести свои данные в секционированную коллекцию с практически неограниченной емкостью хранилища. Сведения о преимуществах секционированной коллекции см. в статье [Секционирование, ключи секции и масштабирование в Azure Cosmos DB](sql-api-partition-data.md). 

<a name="change-before"></a>

## <a name="can-i-change-between-the-s1-s2-and-s3-performance-levels-before-the-planned-migration"></a>Могу ли я переключаться между уровнями производительности S1, S2 и S3 до запланированного переноса?

Изменение уровней производительности S1, S2 и S3 на портале или с помощью программных средств доступно только для существующих учетных записей, относящихся к этим уровням. В случае перехода с уровня производительности S1, S2 или S3 на односекционную коллекцию вы не сможете вернуться на уровень S1, S2 или S3.

<a name="when-migrated"></a>

## <a name="how-will-i-know-when-my-collection-has-migrated"></a>Как узнать, что моя коллекция перенесена?

Перенос будет выполнен в конце 2017 года. Если у вас есть коллекция, использующая уровень производительности S1, S2 или S3, то служба поддержки Cosmos DB свяжется с вами по электронной почте до выполнения переноса. После того, как перенос будет выполнен, на портале Azure отобразится уведомление о том, что коллекция использует ценовую категорию "Стандартный".

![Как убедиться, что коллекция была перенесена в ценовую категорию "Стандартный"](./media/performance-levels/portal-standard-pricing-applied.png)

<a name="migrate-diy"></a>

## <a name="how-do-i-migrate-from-the-s1-s2-s3-performance-levels-to-single-partition-collections-on-my-own"></a>Могу ли я сам выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции?

Вы можете самостоятельно выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции, используя портал Azure или программные средства. Сделайте это сами до запланированного переноса, чтобы воспользоваться функцией гибкой пропускной способности, доступной в односекционных коллекциях, или мы выполним этот перенос автоматически в конце 2017 года.

**Перенос в односекционные коллекции с помощью портала Azure**

1. На [**портале Azure**](https://portal.azure.com) щелкните **Azure Cosmos DB** и выберите учетную запись Cosmos DB для изменения. 
 
    Если на навигационной панели нет пункта **Azure Cosmos DB**, щелкните значок >, прокрутите до пункта **Базы данных**, выберите **Azure Cosmos DB**, а затем выберите учетную запись.  

2. В меню ресурсов в разделе **Контейнеры** щелкните **Масштаб**, в раскрывающемся списке выберите коллекцию для изменения и щелкните **Ценовая категория**. Учетные записи со стандартной пропускной способностью имеют ценовую категорию S1, S2 или S3.  На странице **Выбор ценовой категории** щелкните **Стандартный**, чтобы изменить определяемую пользователем пропускную способность, а затем нажмите кнопку **Выбрать**, чтобы сохранить изменения.

    ![Снимок экрана со страницей параметров, на котором показано, где можно изменить значение пропускной способности](./media/performance-levels/change-performance-set-thoughput.png)

3. На странице **Масштаб** значение **Ценовая категория** меняется на **Стандартный** и появляется поле **Пропускная способность (единицы запросов в секунду)**, в котором по умолчанию отображается значение 400. Задайте пропускную способность от 400 до 10 000 [единиц запросов](request-units.md)в секунду. **Estimated Monthly Bill** (Предварительный месячный счет) в нижней части страницы автоматически обновляется, показывая оценку ежемесячных расходов. 

    >[!IMPORTANT] 
    > После сохранения изменений и перехода на ценовую категорию "Стандартный" невозможно вернуться в использованию уровней производительности S1, S2 или S3.

4. Нажмите кнопку **Сохранить**, чтобы сохранить изменения.

    Если в ходе работы выяснится, что вам нужна более высокая пропускная способность (больше 10 000 ЕЗ/с) или больший объем хранилища (больше 10 ГБ), создайте секционированную коллекцию. Сведения о переносе односекционной коллекции в секционированную см. в разделе [Переход с односекционных на секционированные коллекции](sql-api-partition-data.md#migrating-from-single-partition).

    > [!NOTE]
    > Изменение уровня S1, S2 или S3 на "Стандартный" может занять до двух минут.
    > 
    > 

**Перенос в односекционные коллекции с помощью пакета SDK для .NET**

Другой вариант изменения уровней производительности ваших коллекций — воспользоваться пакетами SDK для Azure Cosmos DB. В этом разделе мы рассмотрим процесс изменения уровня производительности коллекции с помощью [API .NET для SQL](sql-api-sdk-dotnet.md). В случае с другими пакетами SDK процедура аналогична.

Ниже приведен фрагмент кода для изменения пропускной способности коллекции до 5000 единиц запроса в секунду.
    
```csharp
    //Fetch the resource to be updated
    Offer offer = client.CreateOfferQuery()
                      .Where(r => r.ResourceLink == collection.SelfLink)    
                      .AsEnumerable()
                      .SingleOrDefault();

    // Set the throughput to 5000 request units per second
    offer = new OfferV2(offer, 5000);

    //Now persist these changes to the database by replacing the original resource
    await client.ReplaceOfferAsync(offer);
```

Посетите [MSDN](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.aspx) , чтобы просмотреть дополнительные примеры и узнать больше о методах нашего предложения:

* [**ReadOfferAsync**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.readofferasync.aspx)
* [**ReadOffersFeedAsync**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.readoffersfeedasync.aspx)
* [**ReplaceOfferAsync**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.documentclient.replaceofferasync.aspx)
* [**CreateOfferQuery**](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.linq.documentqueryable.createofferquery.aspx)

<a name="ea-customer"></a>

## <a name="how-am-i-impacted-if-im-an-ea-customer"></a>Как на мне отразится перенос, если я являюсь пользователем подписки EA?

Для пользователей подписки EA цена не будет изменяться до истечения действующего контракта.

## <a name="next-steps"></a>Дополнительная информация
Дополнительные сведения о ценах и управлении данными с помощью Azure Cosmos DB см. в следующих статьях.

1.  [Секционирование, ключи секции и масштабирование в Cosmos DB](sql-api-partition-data.md). Узнайте, чем отличаются односекционные и секционированные контейнеры. В статье также содержатся советы по реализации стратегии секционирования для удобства масштабирования.
2.  [Страница цен Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/). Ознакомьтесь со сведениями о ценах на подготовку пропускной способности и использование хранилища.
3.  [Единицы запроса в DocumentDB](request-units.md). Узнайте, как потребляется пропускная способность в зависимости от типа операции, например чтение, запись или запрос.
