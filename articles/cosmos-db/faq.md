---
title: "Часто задаваемые вопросы об Azure Cosmos DB | Документация Майкрософт"
description: "Ответы на часто задаваемые вопросы о базе данных Azure Cosmos DB — глобально распределенной многомодельной службе базы данных. Сведения о емкости, уровнях производительности и масштабировании."
keywords: "Вопросы о базе данных DocumentDB — вопросы и ответы по DocumentDB | Microsoft Azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: b68d1831-35f9-443d-a0ac-dad0c89f245b
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2017
ms.author: mimig
ms.openlocfilehash: e8ac4bef5af7a98857278b82304bb58f1ac6e342
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-cosmos-db-faq"></a>Вопросы и ответы об Azure Cosmos DB
## <a name="azure-cosmos-db-fundamentals"></a>Основные сведения об Azure Cosmos DB
### <a name="what-is-azure-cosmos-db"></a>Что такое Azure Cosmos DB?
Azure Cosmos DB — это глобально реплицируемая многомодельная служба базы данных, которая предлагает расширенные возможности обращения к данным без определения схем. Она гарантирует надежный настраиваемый уровень производительности и повышает скорость разработки. Все это возможно благодаря управляемой платформе на базе многофункциональной и доступной облачной системы Microsoft Azure. 

Azure Cosmos DB представляет собой отличное решение для веб-, мобильных приложений, игр и приложений Интернета вещей, для которых необходимы прогнозируемая пропускная способность, высокий уровень доступности, низкая задержка и модель данных без схемы. Azure Cosmos DB обеспечивает гибкие возможности использования схем и расширенное индексирование, а также включает поддержку транзакций нескольких документов с интегрированным языком JavaScript. 

Дополнительные вопросы о базах данных, ответы на них и инструкции по развертыванию и использованию этой службы см. на [странице документации по Azure Cosmos DB](https://azure.microsoft.com/documentation/services/cosmos-db/).

### <a name="what-happened-to-documentdb"></a>Что произошло с DocumentDB?
API DocumentDB является одним из поддерживаемых API-интерфейсов и моделей данных для Azure Cosmos DB. Кроме того, Azure Cosmos DB предоставляет поддержку для предварительной версии API Graph, предварительной версии API таблиц, а также API MongoDB. См. дополнительные сведения в разделе с [вопросами клиентов DocumentDB](#moving-to-cosmos-db).

### <a name="how-do-i-get-to-my-documentdb-account-in-the-azure-portal"></a>Как получить доступ к учетной записи DocumentDB на портале Azure?
На портале Azure на панели слева щелкните значок Azure Cosmos DB. Если у вас прежде была учетная запись DocumentDB, теперь это учетная запись Azure Cosmos DB. Это никоим образом не скажется на выставлении счетов.

### <a name="what-are-the-typical-use-cases-for-azure-cosmos-db"></a>Для чего используется Azure Cosmos DB?
Azure Cosmos DB — это хороший выбор для новых веб-приложений, мобильных устройств, игр и приложений IoT, для которых важны автоматическое масштабирование, прогнозируемая производительность, малое (порядка нескольких миллисекунд) время отклика и возможность выполнения запросов к данным без определения схем. Azure Cosmos DB предоставляет возможности для быстрой разработки и поддерживает непрерывную итерацию моделей данных приложения. [Распространенным примером использования Azure Cosmos DB](use-cases.md) являются приложения, которые управляют содержимым и данными пользователей. 

### <a name="how-does-azure-cosmos-db-offer-predictable-performance"></a>Как Azure Cosmos DB обеспечивает прогнозируемую производительность?
[Единица запроса](request-units.md) — это мера пропускной способности в Azure Cosmos DB. Одна единица запроса соответствует пропускной способности операций GET, выполняемых для документа объемом 1 КБ. Все операции в Azure Cosmos DB, включая чтение, запись, а также выполнение SQL-запросов и хранимых процедур, характеризуются детерминированным значением единиц запроса. Это значение основывается на пропускной способности, необходимой для выполнения определенной операции. Вместо того, чтобы разбираться с показателями загрузки ЦП, числом операций ввода-вывода и объемом потребляемой памяти, а также думать о том, как эти ресурсы влияют на пропускную способность приложения, можно просто рассматривать единицу запроса как меру производительности.

Каждый контейнер Azure Cosmos DB можно зарезервировать с подготовленной пропускной способностью, выраженной в единицах запроса в секунду. Для приложений любого масштаба можно измерять производительность отдельных запросов, чтобы оценивать соответствующие значения единиц запросов и подготавливать контейнеры для обработки общего числа единиц запросов для всех запросов. Можно также масштабировать пропускную способность контейнера в зависимости от потребностей приложения. Дополнительные сведения о единицах запроса и определении потребностей контейнера см. в разделе [Оценка требований к пропускной способности](request-units.md#estimating-throughput-needs). Вы также можете ознакомиться с [калькулятором пропускной способности](https://www.documentdb.com/capacityplanner). Термин *контейнер* здесь обозначает коллекцию API DocumentDB, граф API Graph, коллекцию API MongoDB и таблицу API таблиц. 

### <a name="how-does-azure-cosmos-db-support-various-data-models-such-as-keyvalue-columnar-document-and-graph"></a>Как Azure Cosmos DB поддерживает различные модели данных, например пары "ключ — значение", столбцы, документы и графы?

Такие модели данных, как пары "ключ — значение", столбцы, документы и графы из-за структуры ARS (атомы, записи и последовательности), на базе которой создана база данных Azure Cosmos DB. Атомы, записи и последовательности можно легко сопоставить и спроецировать для различных моделей данных. API-интерфейсы для подмножества моделей доступны прямо сейчас (API для DocumentDB, MongoDB, таблиц и API Graph). Другие API для дополнительных моделей данных будут доступны в будущем.

В Azure Cosmos DB подсистема индексирования, независимая от схемы, которая может автоматически индексировать все принимаемые данные, не требуя схему или дополнительные индексы от разработчика. Подсистема использует набор структур логических индексов (зеркальное отображение, столбцы, дерево), отделяющий структуру хранилища и индексов и отправляет запросы к подсистемам обработки запросов. Cosmos DB также может поддерживать набор сетевых протоколов и API-интерфейсы расширяемым образом и эффективно преобразовывать их в основную модель данных (1) и структуры логических индексов (2). Благодаря этому только в этой базе данных реализована поддержка нескольких моделей данных.

### <a name="is-azure-cosmos-db-hipaa-compliant"></a>Соответствует ли Azure Cosmos DB HIPAA?
Да, соответствует. HIPAA устанавливает требования к использованию, раскрытию и защите идентифицирующей личной медицинской информации. Дополнительные сведения см. в [центре управления безопасностью Майкрософт](https://www.microsoft.com/en-us/TrustCenter/Compliance/HIPAA).

### <a name="what-are-the-storage-limits-of-azure-cosmos-db"></a>Каковы ограничения на использование хранилища в Azure Cosmos DB?
Общий объем данных, которые контейнер может хранить в Azure Cosmos DB, не ограничен.

### <a name="what-are-the-throughput-limits-of-azure-cosmos-db"></a>Каковы ограничения пропускной способности Azure Cosmos DB?
Общий объем пропускной способности, поддерживаемой контейнером в Azure Cosmos DB, не ограничен. Задача — более-менее равномерное распределение рабочей нагрузки между достаточно большим числом ключей секций.

### <a name="how-much-does-azure-cosmos-db-cost"></a>Сколько стоит Azure Cosmos DB?
Дополнительные сведения см. на странице [цен на Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/). Плата за использование Azure Cosmos DB определяется числом подготовленных контейнеров, временем, в течение которого они были в сети, а также подготовленной пропускной способностью для каждого контейнера. *Контейнеры* в этой статье относятся к коллекциям API DocumentDB, графам API Graph, коллекциям API MongoDB, а также таблицам API таблиц. 

### <a name="is-a-free-account-available"></a>Предусмотрена ли бесплатная учетная запись?
Да, можно зарегистрироваться для получения учетной записи с временным ограничением бесплатно и без каких-либо обязательств. Для этого ознакомьтесь со статьей [Бесплатная пробная версия Azure Cosmos DB](https://azure.microsoft.com/try/cosmosdb/) или [Вопросы и ответы об Azure Cosmos DB](#try-cosmos-db).

Если вы ранее не работали с Azure, то можете зарегистрироваться для получения [бесплатной учетной записи Azure](https://azure.microsoft.com/free/), действующей 30 дней и включающей кредит, который можно потратить на любые службы Azure. Если у вас есть подписка на Visual Studio, вам доступны [бесплатные кредиты Azure](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/), которые также можно потратить на любые службы Azure. 

Вы также можете использовать [эмулятор Azure Cosmos DB](local-emulator.md), чтобы локально разработать и протестировать приложение без создания подписки Azure и каких-либо затрат. Если приложение в эмуляторе Azure Cosmos DB работает правильно, вы можете использовать учетную запись Azure Cosmos DB в облаке.

### <a name="how-can-i-get-additional-help-with-azure-cosmos-db"></a>Как я могу получить помощь по работе с Azure Cosmos DB?
Если вам требуется поддержка, обратитесь к нам через форум [Stack Overflow](http://stackoverflow.com/questions/tagged/azure-cosmosdb) или [MSDN](https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=AzureDocumentDB). Также вы можете запросить индивидуальную консультацию в чате с представителями технической службы Azure Cosmos DB, отправив письмо по адресу [askcosmosdb@microsoft.com](mailto:askcosmosdb@microsoft.com). 

<a id="try-cosmos-db"></a>
## <a name="try-azure-cosmos-db-subscriptions"></a>Пробная версия подписок Azure Cosmos DB

Теперь вы можете пользоваться пробной версией Azure Cosmos DB в течение ограниченного времени. Никаких подписок. Совершенно бесплатно. Без каких-либо обязательств. Чтобы зарегистрироваться на получение пробной версии подписки Azure Cosmos DB, перейдите на страницу [Бесплатная пробная версия Azure Cosmos DB](https://azure.microsoft.com/try/cosmosdb/). Эта подписка не зависит от [бесплатной пробной версии Azure](https://azure.microsoft.com/free/) и может использоваться вместе с ней или с платной подпиской Azure. 

Пробная версия подписки Azure Cosmos DB отображается на портале Azure рядом с другими подписками, связанными с идентификатором пользователя. 

К подпискам пробной версии подписки Azure Cosmos DB применяются следующие условия:

* Один контейнер для каждой подписки SQL (API DocumentDB), Gremlin (API Graph) и учетных записей таблицы.
* 3 коллекции на каждую подписку для учетных записей MongoDB.
* Емкость хранилища 10 ГБ.
* Глобальная репликация доступна в следующих [регионах Azure](https://azure.microsoft.com/regions/): центральная часть США, Северная Европа и Юго-Восточная Азия.
* Максимальная пропускная способность — 5000 ЕЗ/с.
* Срок действия подписки истекает через 24 часа. Ее можно продлить максимум на 48 часов.
* В пробной версии подписки Azure Cosmos DB невозможно создавать запросы на поддержку. Однако поддержка предоставляется подписчикам с имеющимися планами поддержки. 

## <a name="set-up-azure-cosmos-db"></a>Настройка Azure Cosmos DB
### <a name="how-do-i-sign-up-for-azure-cosmos-db"></a>Как зарегистрироваться в Azure Cosmos DB?
Служба Azure Cosmos DB доступна на портале Azure. Во-первых, вам нужно зарегистрироваться для получения подписки Azure. После этого вы сможете добавить учетную запись API DocumentDB, предварительную версию API Graph, предварительную версию API таблиц, а также API MongoDB в свою подписку Azure.

### <a name="what-is-a-master-key"></a>Что такое главный ключ?
Главный ключ — это токен безопасности для доступа ко всем ресурсам учетной записи. Пользователи с этим ключом имеют доступ на чтение и запись для всех ресурсов в пределах учетной записи базы данных. Будьте осторожны при распространении главных ключей. Первичный и вторичный главные ключи можно найти в колонке **Ключи** на [портале Azure][azure-portal]. Дополнительные сведения о ключах см. в разделе [Просмотр, копирование и повторное создание ключей доступа](manage-account.md#keys).

### <a name="what-are-the-regions-that-preferredlocations-can-be-set-to"></a>Какие регионы можно указать в списке PreferredLocations? 
Значение PreferredLocations можно присвоить любому региону Azure, в котором доступна служба Cosmos DB. Список доступных регионов см. на странице с [регионами Azure](https://azure.microsoft.com/regions/).

### <a name="is-there-anything-i-should-be-aware-of-when-distributing-data-across-the-world-via-the-azure-datacenters"></a>Что необходимо учитывать при распределении данных по всему миру через центры обработки данных Azure? 
Служба Azure Cosmos DB доступна во всех регионах Azure, как указано на странице со списком [регионов Azure](https://azure.microsoft.com/regions/). Так как Azure Cosmos DB — это ключевая служба, она будет доступна в каждом новом центре обработки данных. 

Указывая регион, помните, что служба Azure Cosmos DB учитывает ограничения, связанные с использованием независимых облаков и облаков для государственных организаций. То есть, создав учетную запись в регионе с независимым облаком, вы не сможете выполнять репликацию из такого региона. Также вы не сможете включить репликацию в других таких регионах из внешней учетной записи. 

## <a name="develop-against-the-documentdb-api"></a>Разработка с использованием API DocumentDB

### <a name="how-do-i-start-developing-against-the-documentdb-api"></a>Как начать разработку с использованием API DocumentDB?
API-интерфейс Microsoft DocumentDB доступен на [портале Azure][azure-portal]. Во-первых, вам нужно зарегистрироваться для получения подписки Azure. После этого вы сможете добавить контейнер API DocumentDB в свою подписку Azure. Инструкции по добавлению учетной записи Azure Cosmos DB см. в статье [Azure Cosmos DB. Создание веб-приложения API DocumentDB с использованием языка .NET и портала Azure](create-documentdb-dotnet.md#create-account). Если у вас прежде была учетная запись DocumentDB, теперь у вас есть учетная запись Azure Cosmos DB. 

[Пакеты SDK](documentdb-sdk-dotnet.md) доступны для .NET, Python, Node.js, JavaScript и Java. Разработчики также могут использовать [API-интерфейсы RESTful HTTP](/rest/api/documentdb/) для взаимодействия с ресурсами Azure Cosmos DB на разных платформах и с использованием разных языков.

### <a name="can-i-access-some-ready-made-samples-to-get-a-head-start"></a>Доступны ли готовые примеры, которые можно использовать в качестве отправной точки?
Примеры для пакетов SDK [.NET](documentdb-dotnet-samples.md), [Java](https://github.com/Azure/azure-documentdb-java), [Node.js](documentdb-nodejs-samples.md) и [Python](documentdb-python-samples.md) для API DocumentDB доступны на GitHub.


### <a name="does-the-documentdb-api-database-support-schema-free-data"></a>Поддерживает ли база данных API DocumentDB данные без определения схем?
Да, API DocumentDB позволяет приложениям хранить произвольные документы JSON без указаний и определений схемы. Данные немедленно становятся доступными для запроса с помощью интерфейса запросов SQL Azure Cosmos DB.  

### <a name="does-the-documentdb-api-support-acid-transactions"></a>Поддерживает ли API DocumentDB транзакции ACID?
Да, API DocumentDB поддерживает транзакции между документами, выраженные в виде хранимых процедур и триггеров JavaScript. Транзакции объединяются в одну секцию в каждой коллекции. Они выполняются с помощью семантики ACID только полностью и изолированно от другого параллельно выполняемого кода и пользовательских запросов. Если в результате выполнения на стороне сервера кода JavaScript приложения возникает исключение, то выполняется откат всей транзакции. Дополнительные сведения о транзакциях см. в разделе [Транзакции программы базы данных](programming.md#database-program-transactions).

### <a name="what-is-a-collection"></a>Что такое коллекция?
Коллекция представляет собой группу документов и связанную с ними логику в виде приложения JavaScript. Коллекция — это тарифицируемая сущность. Ее [стоимость](performance-levels.md) определяется используемыми объемом хранилища и пропускной способностью. Коллекции могут охватывать одну или несколько секций либо серверов. Кроме того, они поддерживают масштабирование практически до неограниченных объемов хранилища или пропускной способности.

Коллекции также являются основанием для выставления счетов за использование Azure Cosmos DB. Счета за использование коллекции выставляются ежечасно на основе подготовленной пропускной способности и используемого объема хранилища. Ознакомьтесь с дополнительными сведениями о [ценах на Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/). 

### <a name="how-do-i-create-a-database"></a>Как создать базу данных?
Вы можете создавать базы данных с помощью [портала Azure](https://portal.azure.com) (см. сведения о [добавлении коллекции](create-documentdb-dotnet.md#create-collection)), интерфейсов [REST API](/rest/api/documentdb/) или одного из [пакетов SDK для Azure Cosmos DB](documentdb-sdk-dotnet.md). 

### <a name="how-do-i-set-up-users-and-permissions"></a>Как устанавливать настройки для пользователей и разрешений?
Создавать пользователей и разрешения можно с помощью [интерфейсов REST API](/rest/api/documentdb/) или одного из [пакетов SDK для API Cosmos DB](documentdb-sdk-dotnet.md).  

### <a name="does-the-documentdb-api-support-sql"></a>Поддерживает ли API DocumentDB SQL?
Язык SQL-запросов — это расширенная коллекция функций для обработки запросов, поддерживаемая SQL. Язык SQL-запросов Azure Cosmos DB включает разные иерархические и реляционные операторы, а также возможность расширяемости при использовании определяемых пользователем функций (UDF) на основе JavaScript. Грамматика JSON позволяет моделировать документы JSON в виде деревьев с помеченными узлами, которые используются как технологиями автоматического индексирования Azure Cosmos DB, так и запросами на диалекте языка SQL Azure Cosmos DB. См. дополнительные сведения об использовании грамматики SQL в [этой статье о QueryDocumentDB][query].

### <a name="does-the-documentdb-api-support-sql-aggregation-functions"></a>Поддерживает ли API DocumentDB статистические функции SQL?
API DocumentDB поддерживает агрегирование с низкой задержкой для любого масштаба, используя агрегатные функции `COUNT`, `MIN`, `MAX`, `AVG` и `SUM`, а также грамматику SQL. Дополнительные сведения см. в разделе [Статистические функции](documentdb-sql-query.md#Aggregates).

### <a name="how-does-the-documentdb-api-provide-concurrency"></a>Как API DocumentDB обеспечивает параллелизм?
API DocumentDB поддерживает управление оптимистической блокировкой (OCC) с использованием тегов сущностей HTTP или тегов ETag. У каждого ресурса API DocumentDB есть тег ETag, значение которого определяется на сервере при каждом обновлении документа. Заголовок и текущее значение ETag добавляются во все сообщения ответа. Чтобы сервер мог определить, нужно ли обновлять ресурс, можно использовать теги ETag с заголовком If-Match. Значением If-Match является значение ETag, используемое для проверки. Если это значение ETag совпадает со значением ETag сервера, ресурс будет обновлен. Если тег ETag больше не актуален, сервер отклоняет операцию с кодом ответа "HTTP 412: ошибка в предусловии". После этого клиенту нужно повторно извлечь ресурс, чтобы получить его текущее значение ETag. Кроме того, теги ETag можно использовать с заголовком If-None-Match, чтобы определять, требуется ли повторное получение ресурса.

Чтобы применить оптимистичный параллелизм в .NET, используйте класс [AccessCondition](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.accesscondition.aspx) . Пример для .NET см. в файле [Program.cs](https://github.com/Azure/azure-documentdb-dotnet/blob/master/samples/code-samples/DocumentManagement/Program.cs) примера DocumentManagement на сайте GitHub.

### <a name="how-do-i-perform-transactions-in-the-documentdb-api"></a>Как выполнять транзакции в API DocumentDB?
API DocumentDB поддерживает транзакции LINQ с использованием хранимых процедур и триггеров JavaScript. Все операции с базой данных в скрипте выполняются в режиме изоляции моментального снимка. Если это коллекция одной секции, выполнение ограничивается такой коллекцией. Если коллекция секционирована, выполнение ограничивается документами с одним тем же значением ключа секции в пределах коллекции. Моментальный снимок версий документов (ETag) выполняется в начале транзакции и фиксируется только в случае успешного выполнения скрипта. Если JavaScript выдает ошибку, выполняется откат транзакции. Дополнительные сведения см. в статье [Программирование Azure Cosmos DB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](programming.md).

### <a name="how-can-i-bulk-insert-documents-into-cosmos-db"></a>Как выполнять массовую вставку документов в Cosmos DB?
Массовую вставку документов в Azure Cosmos DB можно выполнять так:

* С помощью инструмента миграции данных, как описано в статье [Как импортировать данные в Azure Cosmos DB для API DocumentDB](import-data.md).
* С помощью хранимых процедур, как описано в статье [Программирование Azure Cosmos DB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](programming.md).

### <a name="does-the-documentdb-api-support-resource-link-caching"></a>Поддерживает ли API DocumentDB кэширование ссылок на ресурсы?
Да, так как Azure Cosmos DB — это служба RESTful, ссылки на ресурсы являются неизменяемыми и могут кэшироваться. Клиенты API DocumentDB могут указывать заголовок If-None-Match для операций чтения в любом ресурсе, включая документ или коллекцию, и обновлять их локальные копии только при изменении версии сервера.

### <a name="is-a-local-instance-of-documentdb-api-available"></a>Доступен ли локальный экземпляр API DocumentDB?
Да. [Эмулятор Azure Cosmos DB](local-emulator.md) обеспечивает высокоточную эмуляцию службы Cosmos DB. В эмуляторе реализованы те же функции, что и в службе Azure Cosmos DB, включая поддержку создания документов JSON и обращение к ним, подготовку и масштабирование коллекций, а также выполнение хранимых процедур и триггеров. С помощью эмулятора Azure Cosmos DB можно разрабатывать и тестировать приложения. Чтобы развертывать эти приложения в глобальной среде Azure, достаточно изменить один параметр конфигурации для конечной точки подключения к Azure Cosmos DB.

## <a name="develop-against-the-api-for-mongodb"></a>Разработка с использованием API для MongoDB
### <a name="what-is-the-azure-cosmos-db-api-for-mongodb"></a>Что такое API Azure Cosmos DB для MongoDB?
API Microsoft Azure Cosmos DB для MongoDB — это слой совместимости, который позволяет приложениям легко и прозрачно взаимодействовать с ядром собственной СУБД Azure Cosmos DB с помощью существующих API-интерфейсов Apache MongoDB и драйверов, которые поддерживаются сообществом разработчиков. Теперь разработчики могут использовать свои навыки и доступные наборы средств MongoDB для создания приложений с поддержкой Azure Cosmos DB. Azure Cosmos DB предлагает разработчикам такие специализированные функции, как автоматическая индексация, поддержка резервного копирования, финансово подкрепленные соглашения об уровне обслуживания и т. д.

### <a name="how-do-i-connect-to-my-api-for-mongodb-database"></a>Как подключиться к API для базы данных MongoDB?
Чтобы быстро подключиться к API Azure Cosmos DB для MongoDB, перейдите на [портал Azure](https://portal.azure.com). Войдите в свою учетную запись и выберите в меню навигации слева **Быстрый запуск**. Эта функция позволяет оперативно получить фрагменты кода для подключения к базе данных. 

В Azure Cosmos DB строгие требования к безопасности и стандарты. Для использования учетных записей Azure Cosmos DB требуется аутентификация и безопасный обмен данными через протокол SSL. Поэтому необходимо применять TLSv1.2.

См. дополнительные сведения о [подключении к API для MongoDB](connect-mongodb-account.md).

### <a name="are-there-additional-error-codes-for-an-api-for-mongodb-database"></a>Существуют ли дополнительные коды ошибок API для базы данных MongoDB?
Кроме распространенных кодов ошибок MongoDB, в API для MongoDB есть собственные коды ошибок.


| Ошибка               | Код  | Описание  | Решение  |
|---------------------|-------|--------------|-----------|
| TooManyRequests     | 16500 | Общее число единиц запроса превысило число, подготовленное для коллекции, и было отрегулировано. | Выполните масштабирование пропускной способности коллекции на портале Azure или повторите попытку. |
| ExceededMemoryLimit | 16501 | Так как в этой службе несколько клиентов, операция превысила выделенную память для клиента. | Уменьшите область операции, применив более строгие критерии запроса, или обратитесь в службу поддержки на [портале Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade). <br><br>Пример: *&nbsp;&nbsp;&nbsp;&nbsp;db.getCollection('users').aggregate([<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$match: {name: "Andy"}}, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$sort: {age: -1}}<br>&nbsp;&nbsp;&nbsp;&nbsp;])*) |

## <a name="develop-with-the-table-api-preview"></a>Разработка с использованием предварительной версии API таблиц

### <a name="terms"></a>Термины 
Предварительная версия API таблиц в Azure Cosmos DB — это расширенное предложение Azure Cosmos DB для поддержки таблиц. О нем было объявлено на конференции Microsoft Build 2017. 

Пакет SDK для таблиц уровня "Стандартный" — это существующий пакет SDK для таблиц службы хранилища Azure. 

### <a name="how-can-i-use-the-new-table-api-preview-offering"></a>Как использовать новую предварительную версию API таблиц? 
API таблиц Microsoft Azure Cosmos DB доступен на [портале Azure][azure-portal]. Во-первых, вам нужно зарегистрироваться для получения подписки Azure. После этого вы сможете добавить учетную запись API таблиц Azure Cosmos DB в подписку Azure, а затем добавить таблицы в свою учетную запись. 

См. краткое руководство по [API таблиц](../cosmos-db/create-table-dotnet.md), чтобы приступить к работе с предварительной версией, когда пакеты [SDK](../cosmos-db/table-sdk-dotnet.md) доступны для .NET.

### <a name="do-i-need-a-new-sdk-to-use-the-table-api-preview"></a>Нужен ли новый пакет SDK, чтобы использовать предварительную версию API таблиц? 
Да, [пакет SDK для предварительной версии таблиц хранилища Windows Azure уровня "Премиум"](https://www.nuget.org/packages/WindowsAzure.Storage-PremiumTable) доступен в NuGet. См. дополнительные сведения на странице [API таблицы .NET для базы данных Azure Cosmos DB. Скачивание и заметки о выпуске](https://github.com/Microsoft/azure-docs-pr/cosmos-db/table-sdk-dotnet.md). 

### <a name="how-do-i-provide-feedback-about-the-sdk-or-bugs"></a>Как отправить отзыв о пакете SDK или сообщить об ошибках?
Свой отзыв можно опубликовать на следующих ресурсах:

* [Uservoice](https://feedback.azure.com/forums/599062-azure-cosmos-db-table-api)
* [Форум MSDN](https://social.msdn.microsoft.com/forums/azure/en-US/home?forum=AzureDocumentDB)
* [Stackoverflow](http://stackoverflow.com/questions/tagged/azure-cosmosdb)

### <a name="what-is-the-connection-string-that-i-need-to-use-to-connect-to-the-table-api-preview"></a>Какую строку подключения необходимо использовать, чтобы подключиться к предварительной версии API таблиц?
Используйте следующую строку подключения:
```
DefaultEndpointsProtocol=https;AccountName=<AccountNamefromCosmos DB;AccountKey=<FromKeysPaneofCosmosDB>;TableEndpoint=https://<AccountNameFromDocumentDB>.documents.azure.com
```
Вы можете получить строку подключения на странице ключей на портале Azure. 

### <a name="how-do-i-override-the-config-settings-for-the-request-options-in-the-new-table-api-preview"></a>Как переопределить параметры конфигурации для параметров запроса в новой предварительной версии API таблиц?
Сведения о параметрах конфигурации см. в описании [возможностей Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities). Параметры можно изменить, добавив их в раздел appSettings в файле app.config клиентского приложения.

    <appSettings>
        <add key="TableConsistencyLevel" value="Eventual|Strong|Session|BoundedStaleness|ConsistentPrefix"/>
        <add key="TableThroughput" value="<PositiveIntegerValue"/>
        <add key="TableIndexingPolicy" value="<jsonindexdefn>"/>
        <add key="TableUseGatewayMode" value="True|False"/>
        <add key="TablePreferredLocations" value="Location1|Location2|Location3|Location4>"/>....
    </appSettings>


### <a name="are-there-any-changes-for-customers-who-are-using-the-existing-standard-table-sdk"></a>Изменилось ли что-либо для клиентов, использующих существующий пакет SDK для таблиц уровня "Стандартный"?
Нет. Для существующих или новых клиентов, использующих существующий пакет SDK для таблиц уровня "Стандартный", никаких изменений не предусмотрено. 

### <a name="how-do-i-view-table-data-that-is-stored-in-azure-cosmos-db-for-use-with-the-table-api-review"></a>Как просмотреть данные таблицы, хранящиеся в Azure Cosmos DB, для использования с предварительной версией API таблицы? 
Чтобы просмотреть данные, используйте портал Azure. Вы также можете использовать код предварительной версии API таблиц или описанные ниже средства. 

### <a name="which-tools-work-with-the-table-api-preview"></a>Какие средства можно использовать для работы с предварительной версией API таблиц? 
Вы можете использовать старую версию Azure Explorer (0.8.9).

Средства, которые принимают строку подключения в указанном ранее формате, могут поддерживать предварительную версию API таблиц. Вы можете ознакомиться со списком средств для таблицы в статье [Клиентские инструменты службы хранилища Azure](../storage/common/storage-explorers.md). 

### <a name="do-powershell-or-azure-cli-work-with-the-new-table-api-preview"></a>Можно ли использовать PowerShell или Azure CLI для работы с предварительной версией API таблиц?
Мы планируем добавить поддержку PowerShell и Azure CLI для предварительной версии API таблиц. 

### <a name="is-the-concurrency-on-operations-controlled"></a>Контролируется ли параллелизм операций?
Да, оптимистическая блокировка операций обеспечивается за счет использования механизма ETag. 

### <a name="is-the-odata-query-model-supported-for-entities"></a>Поддерживается ли для сущностей модель запросов OData? 
Да, предварительная версия API таблиц поддерживает запросы OData и LINQ. 

### <a name="can-i-connect-to-the-standard-azure-table-and-the-new-premium-table-api-preview-side-by-side-in-the-same-application"></a>Возможно ли параллельное подключение к хранилищу таблиц Azure уровня "Стандартный", а также к предварительной версии API таблиц уровня "Премиум" в одном и том же приложении? 
Да, подключение возможно, если вы создадите два отдельных экземпляра CloudTableClient, каждый из которых указывает на свой собственный URI в строке подключения.

### <a name="how-do-i-migrate-an-existing-azure-table-storage-application-to-this-new-offering"></a>Как переместить существующее приложение хранилища таблиц Azure в новое предложение?
Чтобы воспользоваться преимуществами нового предложения API таблиц в существующем источнике данных хранилища таблиц, отправьте электронное сообщение по адресу [askcosmosdb@microsoft.com](mailto:askcosmosdb@microsoft.com). 

### <a name="what-is-the-roadmap-for-this-service-and-when-will-you-offer-other-standard-table-api-functionality"></a>Какова стратегия развития этой службы и когда станут доступными другие возможности API таблиц уровня "Стандартный"?
Мы планируем добавить поддержку маркеров SAS, ServiceContext, статистики, шифрования на стороне клиента, аналитики и других функций в рамках подготовки общедоступной версии. Вы можете оставить свой отзыв на сайте [UserVoice](https://feedback.azure.com/forums/599062-azure-cosmos-db-table-api). 

### <a name="how-is-expansion-of-the-storage-size-done-for-this-service-if-for-example-i-start-with-n-gb-of-data-and-my-data-will-grow-to-1-tb-over-time"></a>Как выполняется расширение объема хранилища для этой службы, если исходный объем данных (например, *n* ГБ) со временем увеличится до 1 ТБ? 
Azure Cosmos DB предоставляет неограниченный объем хранилища за счет горизонтального масштабирования. Увеличение объема хранилища осуществляется службой по мере необходимости. 

### <a name="how-do-i-monitor-the-table-api-preview-offering"></a>Как выполняется мониторинг предварительной версии API таблиц?
Отслеживать запросы и использование хранилища можно с помощью панели **метрик** предварительной версии API таблиц. 

### <a name="how-do-i-calculate-the-throughput-i-require"></a>Как рассчитать необходимую пропускную способность?
Вы можете использовать калькулятор емкости, чтобы рассчитать пропускную способность таблиц, необходимую для выполнения операций. Дополнительные сведения см. на странице [оценки единиц запросов и хранилища данных](https://www.documentdb.com/capacityplanner). В общем случае сущность можно представить как JSON-файл, задав значения для операций. 

### <a name="can-i-use-the-new-table-api-preview-sdk-locally-with-the-emulator"></a>Можно ли использовать новый пакет SDK предварительной версии API таблиц локально с эмулятором?
Да, вы можете использовать предварительную версию API таблиц с новым пакетом SDK на локальном эмуляторе. Загрузить новый эмулятор можно на странице [Использование эмулятора Azure Cosmos DB для разработки и тестирования в локальной среде](local-emulator.md). Значение StorageConnectionString в файле app.config должно быть следующим:

```
DefaultEndpointsProtocol=https;AccountName=localhost;AccountKey=C2y6yDjf5/R+ob0N8A7Cgv30VRDJIWEHLM+4QDU5DE2nQ9nDuVTqobD4b8mGGyPMbIZnqyMsEcaGQy67XIw/Jw==;TableEndpoint=https://localhost:8081`. 
```

### <a name="can-my-existing-application-work-with-the-table-api-preview"></a>Совместимо ли мое существующее приложение с предварительной версией API таблиц? 
Контактная зона предварительной версии API таблиц совместима с существующим пакетом SDK для таблиц Azure уровня "Стандартный". Вы можете создавать, удалять, обновлять и выполнять запросы с помощью API для .NET. У вас должен быть ключ строки, так как для работы с предварительной версией API таблиц требуется как ключ секции, так и ключ строки. Мы также планируем добавить дополнительную поддержку пакетов SDK в рамках подготовки общедоступной версии этого предложения службы.

### <a name="do-i-need-to-migrate-my-existing-azure-table-based-applications-to-the-new-sdk-if-i-do-not-want-to-use-the-table-api-preview-features"></a>Необходимо ли перемещать существующее приложение на основе таблиц Azure в новый пакет SDK, если я не планирую использовать возможности предварительной версии API таблиц?
Нет, вы можете создавать и использовать существующие ресурсы таблиц уровня "Стандартный", не прерывая работу. Но если вы не работаете с новой предварительной версией API таблиц, вы не сможете воспользоваться преимуществами автоматической индексации, дополнительных способов обеспечения согласованности и глобального распределения. 

### <a name="how-do-i-add-replication-of-the-data-in-the-premium-table-api-preview-across-multiple-regions-of-azure"></a>Как добавить репликацию данных в предварительной версии API таблицы уровня "Премиум" для нескольких регионов Azure?
Вы можете использовать [параметры глобальной репликации](tutorial-global-distribution-documentdb.md#portal) портала Azure Cosmos DB для добавления регионов, поддерживаемых приложением. Чтобы разработать глобально распределенное приложение, вы также должны добавить приложение, присвоив ключу PreferredLocation значение локального региона. Так вы сможете обеспечить низкую задержку операций чтения. 

### <a name="how-do-i-change-the-primary-write-region-for-the-account-in-the-premium-table-api-preview"></a>Как изменить основной регион записи для учетной записи в предварительной версии API таблиц уровня "Премиум"?
Чтобы добавить регион, а затем выполнить отработку отказа в нужный регион, вы можете использовать панель портала глобальной репликации службы Azure Cosmos DB. См. дополнительные сведения о [разработке с использованием учетных записей Azure Cosmos DB с поддержкой нескольких регионов](regional-failover.md). 

### <a name="how-do-i-configure-my-preferred-read-regions-for-low-latency-when-i-distribute-my-data"></a>Как настроить предпочитаемые регионы для чтения, чтобы обеспечить низкую задержку при распределении данных? 
Чтобы облегчить чтение из локального расположения, используйте ключ PreferredLocation в файле app.config. Если присвоено значение LocationMode, предварительная версия API таблиц вызывает ошибку для существующих приложений. Удалите этот код, так как предварительная версия API-таблиц извлекает эти сведения из файла app.config. См. дополнительные сведения о [возможностях Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities).

### <a name="how-should-i-think-about-consistency-levels-in-the-table-api-preview"></a>Как принять решение о выборе уровня согласованности в предварительной версии API таблиц? 
В Azure Cosmos DB реализованы продуманные компромиссные сочетания показателей согласованности, доступности и задержки. Azure Cosmos DB предлагает разработчикам пять уровней согласованности для предварительной версии API таблиц. Следовательно, вы можете выбрать требуемую модель обеспечения согласованности на уровне таблицы, а также обеспечить поддержку отдельных запросов при обращении к данным. Подключаемый клиент может выбирать уровень согласованности. Вы можете переопределить этот уровень, изменив значение ключа TableConsistencyLevel в файле app.config. 

Предварительная версия API таблиц предусматривает операции чтения с низкой задержкой, возможностью чтения ваших собственных записей и согласованностью сеанса по умолчанию. Дополнительные сведения см. в статье [Настраиваемые уровни согласованности данных в DocumentDB](consistency-levels.md). 

По умолчанию хранилище таблиц Azure обеспечивает строгую согласованность в пределах региона и итоговую согласованность в дополнительных расположениях. 

### <a name="does-azure-cosmos-db-offer-more-consistency-levels-than-standard-tables"></a>Предусмотрено ли в Azure Cosmos DB больше уровней согласованности, чем в таблицах уровня "Стандартный"?
Да, см. дополнительные сведения о распределенном характере Azure Cosmos DB в описании [уровней согласованности](consistency-levels.md). Так как уровни согласованности подкреплены гарантийными обязательствами, вы можете больше не беспокоиться об этом. См. дополнительные сведения о [возможностях Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities).

### <a name="when-global-distribution-is-enabled-how-long-does-it-take-to-replicate-the-data"></a>Сколько времени занимает репликация данных, когда включено глобальное распределение?
Мы надежно фиксируем данные в локальном регионе, отправляя их в другие регионы за миллисекунды. Такая репликация зависит только от времени кругового пути центра обработки данных. См. дополнительные сведения о [возможностях глобально распределенной службы базы данных Azure Cosmos DB](distribute-data-globally.md).

### <a name="can-the-read-request-consistency-level-be-changed"></a>Можно ли изменить уровень согласованности запросов на чтение?
В Azure Cosmos DB можно указать уровень согласованности на уровне контейнера (в таблице). Пакет SDK также позволяет указать этот уровень, изменив значение ключа TableConsistencyLevel в файле app.config. Можно выбрать строгую согласованность, согласованность с ограниченным устареванием, согласованность на уровне сеанса, согласованность префиксов или итоговую согласованность. См. дополнительные сведения о [настраиваемых уровнях согласованности данных в Azure Cosmos DB](consistency-levels.md). Основная идея состоит в том, что уровень согласованности для запросов не может быть выше уровня согласованности для таблицы. Например, вы не можете выбрать для таблицы итоговую согласованность, а для запросов — строгую согласованность. 

### <a name="how-does-the-premium-table-api-preview-account-handle-failover-if-a-region-goes-down"></a>Как учетная запись для предварительной версии API таблиц уровня "Премиум" выполняет отработку отказа, если регион становится недоступен? 
Предварительная версия API таблиц уровня "Премиум" использует глобально распределенную платформу Azure Cosmos DB. Чтобы обеспечить нормальную работу приложения при простое центра обработки данных, вам нужно использовать несколько регионов для учетной записи на портале Azure Cosmos DB. См. дополнительные сведения о [разработке с использованием учетных записей Azure Cosmos DB с поддержкой нескольких регионов](regional-failover.md). Вы можете задать приоритет регионов. Дополнительные сведения см. в статье [Автоматическая отработка отказа между регионами для обеспечения непрерывности бизнес-процессов в DocumentDB](regional-failover.md). 

Вы можете не только добавить любое нужное число регионов для учетной записи, но и управлять тем, в какой регион будет выполняться отработка отказа, настроив приоритет для этой процедуры. Конечно, чтобы использовать базу данных, вам также нужно предоставить приложение. Но этот простой не отразится на работе клиентов. Клиентский пакет SDK автоматически распознает размещение. То есть он может определять регион, который стал недоступен, и автоматически выполнять отработку отказа в другой регион.

### <a name="is-the-premium-table-api-preview-enabled-for-backups"></a>Предусмотрена ли в предварительной версии API таблиц уровня "Премиум" поддержка резервных копий?
Да, предварительная версия API таблиц уровня "Премиум" использует платформу службы Azure Cosmos DB для резервного копирования. Резервные копии создаются автоматически. См. дополнительные сведения об [оперативном резервном копировании и восстановлении с помощью Azure Cosmos DB](online-backup-and-restore.md).

 
### <a name="does-the-table-api-preview-index-all-attributes-of-an-entity-by-default"></a>Индексирует ли предварительная версия API таблиц все атрибуты сущности по умолчанию?
Да, по умолчанию индексируются все атрибуты сущности. См. дополнительные сведения о [политиках индексации Azure Cosmos DB](indexing-policies.md). 

### <a name="does-this-mean-i-do-not-have-to-create-multiple-indexes-to-satisfy-the-queries"></a>Значит ли это, что мне не нужно создавать разные индексы для запросов? 
Да, Azure Cosmos DB обеспечивает автоматическое индексирование всех атрибутов без определения схемы. Таким образом, разработчик может сосредоточиться на приложении, не беспокоясь о создании индексов и управлении ими. См. дополнительные сведения о [политиках индексации Azure Cosmos DB](indexing-policies.md).

### <a name="can-i-change-the-indexing-policy"></a>Можно ли изменить политику индексирования?
Да, вы можете изменить политику индексирования, предоставив определение индекса. См. дополнительные сведения о [возможностях Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities). Вам нужно правильно закодировать эти параметры, а также экранировать их. 

В строке формата JSON в файле app.config сделайте следующее:
```
{
  "indexingMode": "consistent",
  "automatic": true,
  "includedPaths": [
    {
      "path": "/somepath",
      "indexes": [
        {
          "kind": "Range",
          "dataType": "Number",
          "precision": -1
        },
        {
          "kind": "Range",
          "dataType": "String",
          "precision": -1
        } 
      ]
    }
  ],
  "excludedPaths": 
[
 {
      "path": "/anotherpath"
 }
]
}
```

### <a name="azure-cosmos-db-as-a-platform-seems-to-have-lot-of-capabilities-such-as-sorting-aggregates-hierarchy-and-other-functionality-will-you-be-adding-these-capabilities-to-the-table-api"></a>Azure Cosmos DB как платформа предоставляет разные возможности, включая сортировку, выполнение статистических вычислений, иерархию и пр. Будут ли эти возможности добавлены в API таблиц? 
В предварительной версии API таблиц поддерживает те же функции обработки запросов, что и хранилище таблиц Azure. Кроме того, эта база данных поддерживает сортировку, выполнение статистических вычислений, геопространственные запросы, иерархию и множество встроенных функций. Дополнительные возможности API таблиц будут добавлены в будущем обновлении службы. Дополнительные сведения см. в статье [SQL-запросы для API DocumentDB в Azure Cosmos DB](../documentdb/documentdb-sql-query.md).
 
### <a name="when-should-i-change-tablethroughput-for-the-table-api-preview"></a>Когда необходимо изменять значение TableThroughput для предварительной версии API таблиц?
Значение TableThroughput следует изменять в следующих случаях:
* При извлечении, преобразовании и загрузке данных или при передаче большого объема данных за короткий промежуток времени. 
* Чтобы получить более высокую пропускную способность для контейнера в серверной части. Например, вы видите, что используемая пропускная способность превышает подготовленную и выполняется регулирование. Дополнительные сведения см. в статье [Настройка пропускной способности для коллекций Azure Cosmos DB](set-throughput.md).

### <a name="can-i-scale-up-or-scale-down-the-throughput-of-my-table-api-preview-table"></a>Возможно ли масштабирование пропускной способности таблицы предварительной версии API таблиц? 
Да, для этого вы можете использовать панель масштабирования портала Azure Cosmos DB. См. дополнительные сведения о [настройке пропускной способности](set-throughput.md).

### <a name="is-a-default-tablethroughput-set-for-newly-provisioned-tables"></a>Определяется ли пропускная способность таблицы по умолчанию для новых подготовленных таблиц?
Да, если не переопределить пропускную способность таблицы с помощью файла app.config и не использовать предварительно созданный контейнер в Azure Cosmos DB, служба создаст таблицу с предопределенной пропускной способностью — 400.
 
### <a name="is-there-any-change-of-pricing-for-existing-customers-of-the-standard-table-api"></a>Изменились ли цены для существующих клиентов API таблиц уровня "Стандартный"?
Нет. Цены для существующих клиентов API таблиц уровня "Стандартный" не изменились. 

### <a name="how-is-the-price-calculated-for-the-table-api-preview"></a>Как рассчитывается стоимость для предварительной версии API таблиц? 
Это зависит от заданного значения TableThroughput. 

### <a name="how-do-i-handle-any-throttling-on-the-tables-in-table-api-preview-offering"></a>Как обрабатывать регулирование таблиц в предложении предварительной версии API таблиц? 
Если скорость запроса превышает емкость подготовленной пропускной способности для базового контейнера, вы получите сообщение об ошибке, а пакет SDK повторит вызов на основе политики повтора.

### <a name="why-do-i-need-to-choose-a-throughput-apart-from-partitionkey-and-rowkey-to-take-advantage-of-the-premium-table-api-preview-offering-of-azure-cosmos-db"></a>Зачем при использовании предварительной версии API таблиц уровня "Премиум" предложения Azure Cosmos DB нужно кроме значений PartitionKey и RowKey выбирать еще и пропускную способность?
Azure Cosmos DB определяет для вашего контейнера пропускную способность по умолчанию, если вы не укажете другое значение в файле app.config. 

Azure Cosmos DB предоставляет гарантии производительности и задержки с верхними границами для операций. Это возможно, если обработчик может применить управление операциями клиента. Настраивая значение TableThroughput, вы гарантированно получаете требуемые показатели пропускной способности и задержки, так как платформа резервирует эту емкость и обеспечивает бесперебойное выполнение операций. 

Изменяя спецификации, вы можете гибко управлять пропускной способностью в соответствии со своими потребностями, обеспечивая поддержку сезонности приложений и позволяя минимизировать затраты.

### <a name="azure-storage-sdk-has-been-very-inexpensive-for-me-because-i-pay-only-to-store-the-data-and-i-rarely-query-the-new-azure-cosmos-db-offering-seems-to-be-charging-me-even-though-i-have-not-performed-a-single-transaction-or-stored-anything-can-you-please-explain"></a>Пакет SDK для службы хранилища Azure стоит недорого, особенно если платить только за хранение данных и редко выполнять запросы. Новое предложение Azure Cosmos DB предусматривает оплату, даже если я не выполняю транзакции и ничего не храню. Расскажите об этом подробнее.

Azure Cosmos DB — это глобально распределенная система на основе соглашений об уровне обслуживания, которая гарантирует высокую доступность, низкую задержку и высокую пропускную способность. В отличие от других систем в Azure Cosmos DB гарантируется зарезервированная пропускная способность. Azure Cosmos DB предоставляет такие запрашиваемые клиентами дополнительные возможности, как вторичные индексы и глобальное распространение. На период действия предварительной версии мы предоставляем модель оптимизированной пропускной способности. А в дальнейшем планируем также предоставить модель, оптимизированную для хранилища, чтобы удовлетворить потребности клиентов. 

### <a name="i-never-get-a-quota-full-notification-indicating-that-a-partition-is-full-when-i-ingest-data-into-table-storage-with-the-table-api-preview-i-do-get-this-message-is-this-offering-limiting-me-and-forcing-me-to-change-my-existing-application"></a>При приеме данных в хранилище таблиц мне не приходили уведомления о достижении квоты, информирующие о заполнении секции. А при работе с предварительной версией API таблиц мне пришло такое сообщение. Значит ли это, что предложение связано с определенными ограничениями, и поэтому мне необходимо изменить приложение?

Azure Cosmos DB — это система на основе соглашений об уровне обслуживания, которая предоставляет неограниченные возможности масштабирования, а также гарантирует согласованность, низкую задержку, высокую пропускную способность и доступность. Объем данных и индекс должны быть управляемыми и масштабируемыми, чтобы получить гарантированную производительность уровня "Премиум". Ограничение в 10 ГБ для числа сущностей и элементов на ключ секции требуется для повышения скорости поиска и производительности запросов. Кроме того, для обеспечения достаточной масштабируемости приложения для службы хранилища Azure мы рекомендуем *не* создавать секцию с высокой нагрузкой, чтобы хранить в ней все сведения и выполнять запрос этих данных. 

### <a name="so-partitionkey-and-rowkey-are-still-required-with-the-new-table-api-preview"></a>То есть свойства PartitionKey и RowKey все еще требуются при использовании новой предварительной версии API таблиц? 
Да. Так как контактные зоны предварительной версии API таблиц и пакета SDK для хранилища таблиц Azure аналогичны, ключ секции предоставляет отличный способ распределения данных. Ключ строки является уникальным в пределах такой секции. Его присутствие обязательно, а значение может быть нулевым, как в пакете SDK уровня "Стандартный". Начиная с предварительной версии сборки значение RowKey составляет 255 байт, а значение PartitionKey — 100 байт (скоро оно будет увеличено до 1 КБ). 

### <a name="what-are-the-error-messages-for-the-table-api-preview"></a>Какими будут сообщения об ошибках в предварительной версии API таблиц?
Так как эта предварительная версия совместима с таблицами уровня "Стандартный", большинство ошибок будут сопоставимыми. 

### <a name="why-do-i-get-throttled-when-i-try-to-create-lot-of-tables-one-after-another-in-the-table-api-preview"></a>Почему при попытке последовательного создания большого числа таблиц в предварительной версии API таблицы выполняется регулирование?
Azure Cosmos DB — это система на основе соглашений об уровне обслуживания, которая гарантирует согласованность, низкую задержку, высокую пропускную способность и доступность. Так как это подготовленная система, она способна резервировать ресурсы, чтобы гарантировать выполнение этих требований. Эта система определяет создание таблиц в быстром режиме и выполняет регулирование. Мы рекомендуем создавать не более пяти таблиц в минуту. Помните, что предварительная версия API таблиц — это подготовленная система. Оплата начисляется уже в момент подготовки. 

## <a name="develop-against-the-graph-api-preview"></a>Разработка с использованием предварительной версии API Graph
### <a name="how-can-i-apply-the-functionality-of-graph-api-preview-to-azure-cosmos-db"></a>Как можно использовать функции предварительной версии API Graph с Azure Cosmos DB?
Вы можете использовать библиотеку расширений предварительной версии API Graph. Эта библиотека называется Microsoft Azure Graphs. Она доступна в NuGet. 

### <a name="it-looks-like-you-support-the-gremlin-graph-traversal-language-do-you-plan-to-add-more-forms-of-query"></a>Похоже, предусмотрена поддержка Gremlin как обходного языка. Планируете ли вы добавить дополнительные варианты запросов?
Да, в будущем мы планируем добавить другие механизмы выполнения запросов. 

### <a name="how-can-i-use-the-new-graph-api-preview-offering"></a>Как можно использовать новое предложение предварительной версии API Graph? 
Чтобы приступить к работе, см. краткое руководство по [API Graph](../cosmos-db/create-graph-dotnet.md).

<a id="moving-to-cosmos-db"></a>
## <a name="questions-from-documentdb-customers"></a>Вопросы от клиентов DocumentDB
### <a name="why-are-you-moving-to-azure-cosmos-db"></a>Почему вы переходите на Azure Cosmos DB? 

Azure Cosmos DB — это следующий этап развития глобально распределенных масштабируемых облачных баз данных. Теперь клиенты DocumentDB получают доступ к новой передовой системе и возможностям, доступным в Azure Cosmos DB.

Служба Azure Cosmos DB запущена в конце 2010 г. как проект "Флоренция", задача которого — помощь разработчикам в устранении проблем, характерных для крупномасштабных приложений в корпорации Майкрософт. Так как со сложностями при создании глобально распределенных приложений сталкиваются не только специалисты корпорации Майкрософт, в 2015 г. было выпущено первое поколение этой технологии — в виде Azure DocumentDB для разработчиков Azure. 

С этого момента мы добавили новые функции и возможности. В результате мы получили Azure Cosmos DB. В рамках этого выпуска клиенты DocumentDB автоматически становятся клиентами Azure Cosmos DB. Их данные также переносятся в Azure Cosmos DB. Новые спецификации связаны с ядром СУБД, возможностями глобального распределения и эластичной масштабируемости, а также прогрессивными и исчерпывающими соглашениями об уровне обслуживания. В частности, мы расширили возможности ядра СУБД Azure Cosmos DB, чтобы обеспечить эффективное сопоставление всех популярных моделей данных, систем типов и API-интерфейсов с базовой моделью данных Azure Cosmos DB. 

Ориентированные на разработчиков возможности также включают поддержку [Gremlin](../cosmos-db/graph-introduction.md) и [API-интерфейсов хранилища таблиц](../cosmos-db/table-introduction.md). И это только начало. Со временем мы добавим другие популярные API-интерфейсы и обновленные модели данных с дополнительными возможностями для повышения производительности и хранения в глобальном масштабе. 

Стоит отметить, что помимо других API-интерфейсов в Azure Cosmos DB с самого начала реализована поддержка [диалекта SQL](../documentdb/documentdb-sql-query.md) DocumentDB. Многие разработчики используют такие полностью управляемые решения, как Azure Cosmos DB. В таком случае единственным интерфейсом для работы со службой являются предоставляемые этой службой API-интерфейсы. Для существующих клиентов DocumentDB действительно ничего не изменилось. Azure Cosmos DB включает те же предложения API SQL, что и DocumentDB. Отныне вы можете использовать ранее недоступные возможности 

Мы также продолжили работу над гибкой глобальной масштабируемостью пропускной способности и хранилища. Мы фундаментально улучшили подсистему глобального распределения. Одно из таких ориентированных на разработчиков решений — "Согласованность префиксов". По сути, это пять четко определенных моделей обеспечения согласованности. Мы будем внедрять и другие интересные возможности по мере их реализации. 

### <a name="what-do-i-need-to-do-to-ensure-that-my-documentdb-resources-continue-to-run-on-azure-cosmos-db"></a>Что нужно, чтобы мои ресурсы DocumentDB и дальше можно было использовать в Azure Cosmos DB?

Вам не нужно ничего менять. Теперь ресурсы DocumentDB преобразованы в ресурсы Azure Cosmos DB. Это преобразование выполнено без перебоев.

### <a name="what-changes-do-i-need-to-make-for-my-app-to-work-with-azure-cosmos-db"></a>Что нужно изменить в приложении для работы с Azure Cosmos DB?

Вам не нужно ничего менять. Классы, пространства имен и имена пакетов NuGet не изменились. Как всегда, мы рекомендуем поддерживать актуальность пакетов SDK, чтобы пользоваться новейшими функциями и улучшениями. 

### <a name="whats-changed-in-the-azure-portal"></a>Что изменилось на портале Azure?

DocumentDB больше не отображается на портале как служба Azure. Вместо этого теперь отображается новый значок Azure Cosmos DB, как показано на рисунке ниже. Все коллекции остаются доступными, и вы как и прежде можете масштабировать пропускную способность, изменять уровни согласованности и выполнять мониторинг соглашений об уровне обслуживания. Улучшены возможности предварительной версии обозревателя данных. Теперь вы можете просматривать и редактировать документы, создавать и выполнять запросы, а также работать с хранимыми процедурами, триггерами и UDF на одной странице, как показано на рисунке ниже. 

![Колонка "Коллекции Azure Cosmos DB"](./media/faq/cosmos-db-data-explorer.png)

### <a name="are-there-changes-to-pricing"></a>Изменились ли цены?

Нет, стоимость работы с приложением в Azure Cosmos DB не изменилась.

### <a name="are-there-changes-to-the-slas"></a>Есть ли какие-либо изменения, связанные с соглашениями об уровне обслуживания?

Нет, соглашения об уровне обслуживания, регулирующие доступность, согласованность, задержки и пропускную способность, не изменились и по-прежнему отображаются на портале. См дополнительные сведения о [соглашениях об уровне обслуживания для Azure Cosmos DB](https://azure.microsoft.com/support/legal/sla/cosmos-db/).
   
![Приложение со списком задач с примерами данных](./media/faq/azure-cosmosdb-portal-metrics-slas.png)


[azure-portal]: https://portal.azure.com
[query]: documentdb-sql-query.md
