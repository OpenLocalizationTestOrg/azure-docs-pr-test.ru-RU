---
title: "Часто задаваемые вопросы об Azure Cosmos DB | Документация Майкрософт"
description: "Ответы на часто задаваемые вопросы о базе данных Azure Cosmos DB — глобально распределенной многомодельной службе базы данных. Сведения о емкости, уровнях производительности и масштабировании."
keywords: "Вопросы о базе данных DocumentDB — вопросы и ответы по DocumentDB | Microsoft Azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: monicar
documentationcenter: 
ms.assetid: b68d1831-35f9-443d-a0ac-dad0c89f245b
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/12/2018
ms.author: mimig
ms.openlocfilehash: 0f7998ca4000a4ccfd77b173cb3dd9756b4777ae
ms.sourcegitcommit: 828cd4b47fbd7d7d620fbb93a592559256f9d234
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/18/2018
---
# <a name="azure-cosmos-db-faq"></a>Вопросы и ответы об Azure Cosmos DB
## <a name="azure-cosmos-db-fundamentals"></a>Основные сведения об Azure Cosmos DB
### <a name="what-is-azure-cosmos-db"></a>Что такое Azure Cosmos DB?
Azure Cosmos DB — это глобально реплицируемая многомодельная служба базы данных, которая предлагает расширенные возможности обращения к данным без определения схем. Она гарантирует надежный настраиваемый уровень производительности и повышает скорость разработки. Все это возможно благодаря управляемой платформе на базе многофункциональной и доступной облачной системы Microsoft Azure. 

Azure Cosmos DB представляет собой отличное решение для веб-, мобильных приложений, игр и приложений Интернета вещей, для которых необходимы прогнозируемая пропускная способность, высокий уровень доступности, низкая задержка и модель данных без схемы. Azure Cosmos DB обеспечивает гибкие возможности использования схем и расширенное индексирование, а также включает поддержку транзакций нескольких документов с интегрированным языком JavaScript. 

Дополнительные вопросы о базах данных, ответы на них и инструкции по развертыванию и использованию этой службы см. на [странице документации по Azure Cosmos DB](https://docs.microsoft.com/azure/cosmos-db/).

### <a name="what-happened-to-the-documentdb-api"></a>Что произошло с API DocumentDB?

API DocumentDB или API-интерфейс SQL (DocumentDB) для Azure Cosmos DB теперь называется API SQL для Azure Cosmos DB. Вам не нужно ничего менять, чтобы продолжать работу с приложениями, созданными с помощью API DocumentDB. Их функциональность сохраняется.

Если у вас прежде была учетная запись API DocumentDB, теперь она изменена на учетную запись API SQL. На выставление счетов это изменение не повлияет. 

### <a name="what-happened-to-azure-documentdb-as-a-service"></a>Что произошло со службой Azure DocumentDB?

Служба Azure DocumentDB теперь является частью службы Azure Cosmos DB и представлена в виде API-интерфейса SQL. Приложения, созданные для Azure DocumentDB, будут работать в прежнем режиме с API-интерфейсом SQL в Azure Cosmos DB. Кроме того, Azure Cosmos DB предоставляет поддержку API Graph, API таблиц, API MongoDB, а также API Cassandra (предварительная версия).

### <a name="what-are-the-typical-use-cases-for-azure-cosmos-db"></a>Для чего используется Azure Cosmos DB?
Azure Cosmos DB — это хороший выбор для новых веб-приложений, мобильных устройств, игр и приложений IoT, для которых важны автоматическое масштабирование, прогнозируемая производительность, малое (порядка нескольких миллисекунд) время отклика и возможность выполнения запросов к данным без определения схем. Azure Cosmos DB предоставляет возможности для быстрой разработки и поддерживает непрерывную итерацию моделей данных приложения. [Распространенным примером использования Azure Cosmos DB](use-cases.md) являются приложения, которые управляют содержимым и данными пользователей. 

### <a name="how-does-azure-cosmos-db-offer-predictable-performance"></a>Как Azure Cosmos DB обеспечивает прогнозируемую производительность?
[Единица запроса](request-units.md) — это мера пропускной способности в Azure Cosmos DB. Одна единица запроса соответствует пропускной способности операций GET, выполняемых для документа объемом 1 КБ. Все операции в Azure Cosmos DB, включая чтение, запись, а также выполнение SQL-запросов и хранимых процедур, характеризуются детерминированным значением единиц запроса. Это значение основывается на пропускной способности, необходимой для выполнения определенной операции. Вместо того, чтобы разбираться с показателями загрузки ЦП, числом операций ввода-вывода и объемом потребляемой памяти, а также думать о том, как эти ресурсы влияют на пропускную способность приложения, можно просто рассматривать единицу запроса как меру производительности.

Каждый контейнер Azure Cosmos DB можно зарезервировать с подготовленной пропускной способностью, выраженной в единицах запроса в секунду. Для приложений любого масштаба можно измерять производительность отдельных запросов, чтобы оценивать соответствующие значения единиц запросов и подготавливать контейнеры для обработки общего числа единиц запросов для всех запросов. Можно также масштабировать пропускную способность контейнера в зависимости от потребностей приложения. Дополнительные сведения о единицах запроса и определении потребностей контейнера см. в разделе [Оценка требований к пропускной способности](request-units.md#estimating-throughput-needs). Вы также можете ознакомиться с [калькулятором пропускной способности](https://www.documentdb.com/capacityplanner). Термин *контейнер* здесь обозначает коллекцию API SQL, граф API Graph, коллекцию API MongoDB и таблицу API таблиц. 

### <a name="how-does-azure-cosmos-db-support-various-data-models-such-as-keyvalue-columnar-document-and-graph"></a>Как Azure Cosmos DB поддерживает различные модели данных, например пары "ключ — значение", столбцы, документы и графы?

Такие модели данных, как пары "ключ — значение", столбцы, документы и графы из-за структуры ARS (атомы, записи и последовательности), на базе которой создана база данных Azure Cosmos DB. Атомы, записи и последовательности можно легко сопоставить и спроецировать для различных моделей данных. API-интерфейсы для подмножества моделей доступны прямо сейчас (API для SQL, MongoDB, таблиц и API Graph). Другие API для дополнительных моделей данных будут доступны в будущем.

В Azure Cosmos DB подсистема индексирования, независимая от схемы, которая может автоматически индексировать все принимаемые данные, не требуя схему или дополнительные индексы от разработчика. Подсистема использует набор структур логических индексов (зеркальное отображение, столбцы, дерево), отделяющий структуру хранилища и индексов и отправляет запросы к подсистемам обработки запросов. Cosmos DB также может поддерживать набор сетевых протоколов и API-интерфейсы расширяемым образом и эффективно преобразовывать их в основную модель данных (1) и структуры логических индексов (2). Благодаря этому только в этой базе данных реализована поддержка нескольких моделей данных.

### <a name="is-azure-cosmos-db-hipaa-compliant"></a>Соответствует ли Azure Cosmos DB HIPAA?
Да, соответствует. HIPAA устанавливает требования к использованию, раскрытию и защите идентифицирующей личной медицинской информации. Дополнительные сведения см. в [центре управления безопасностью Майкрософт](https://www.microsoft.com/en-us/TrustCenter/Compliance/HIPAA).

### <a name="what-are-the-storage-limits-of-azure-cosmos-db"></a>Каковы ограничения на использование хранилища в Azure Cosmos DB?
Общий объем данных, которые контейнер может хранить в Azure Cosmos DB, не ограничен.

### <a name="what-are-the-throughput-limits-of-azure-cosmos-db"></a>Каковы ограничения пропускной способности Azure Cosmos DB?
Общий объем пропускной способности, поддерживаемой контейнером в Azure Cosmos DB, не ограничен. Задача — более-менее равномерное распределение рабочей нагрузки между достаточно большим числом ключей секций.

### <a name="how-much-does-azure-cosmos-db-cost"></a>Сколько стоит Azure Cosmos DB?
Дополнительные сведения см. на странице [цен на Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/). Плата за использование Azure Cosmos DB определяется числом подготовленных контейнеров, временем, в течение которого они были в сети, а также подготовленной пропускной способностью для каждого контейнера. *Контейнеры* в этой статье относятся к коллекциям API SQL, графам API Graph, коллекциям API MongoDB, а также таблицам API таблиц. 

### <a name="is-a-free-account-available"></a>Предусмотрена ли бесплатная учетная запись?
Да, можно зарегистрироваться для получения учетной записи с временным ограничением бесплатно и без каких-либо обязательств. Для этого ознакомьтесь со статьей [Бесплатная пробная версия Azure Cosmos DB](https://azure.microsoft.com/try/cosmosdb/) или [Вопросы и ответы об Azure Cosmos DB](#try-cosmos-db).

Если вы ранее не работали с Azure, то можете зарегистрироваться для получения [бесплатной учетной записи Azure](https://azure.microsoft.com/free/), действующей 30 дней и включающей кредит, который можно потратить на любые службы Azure. Если у вас есть подписка на Visual Studio, вам доступны [бесплатные кредиты Azure](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/), которые также можно потратить на любые службы Azure. 

Вы также можете использовать [эмулятор Azure Cosmos DB](local-emulator.md), чтобы локально разработать и протестировать приложение без создания подписки Azure и каких-либо затрат. Если приложение в эмуляторе Azure Cosmos DB работает правильно, вы можете использовать учетную запись Azure Cosmos DB в облаке.

### <a name="how-can-i-get-additional-help-with-azure-cosmos-db"></a>Как я могу получить помощь по работе с Azure Cosmos DB?

Технические вопросы можно разместить на одном из форумов вопросов и ответов ниже:
* [Форум MSDN](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureDocumentDB)
* [Stack Overflow](http://stackoverflow.com/questions/tagged/azure-cosmosdb). Stack Overflow лучше всего подходит, чтобы задать вопросы о программировании. Ваш вопрос должен быть [по теме](https://stackoverflow.com/help/on-topic) и [максимально точным и подробным, чтобы на него можно было ответить по существу](https://stackoverflow.com/help/how-to-ask). 

Чтобы запросить новые функции, создайте запрос на [Uservoice](https://feedback.azure.com/forums/263030-azure-cosmos-db).

Чтобы устранить проблему, связанную с учетной записью, отправьте [запрос в службу поддержки](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest) на портале Azure.

Другие вопросы можно отправить команде по адресу электронной почты [askcosmosdb@microsoft.com](mailto:askcosmosdb@microsoft.com). Однако это не адрес службы технической поддержки. 

<a id="try-cosmos-db"></a>
## <a name="try-azure-cosmos-db-subscriptions"></a>Пробная версия подписок Azure Cosmos DB

Теперь вы можете пользоваться пробной версией Azure Cosmos DB в течение ограниченного времени. Никаких подписок. Совершенно бесплатно. Без каких-либо обязательств. Чтобы зарегистрироваться на получение пробной версии подписки Azure Cosmos DB, перейдите на страницу [Бесплатная пробная версия Azure Cosmos DB](https://azure.microsoft.com/try/cosmosdb/). Эта подписка не зависит от [бесплатной пробной версии Azure](https://azure.microsoft.com/free/) и может использоваться вместе с ней или с платной подпиской Azure. 

Пробная версия подписки Azure Cosmos DB отображается на портале Azure рядом с другими подписками, связанными с идентификатором пользователя. 

К подпискам пробной версии подписки Azure Cosmos DB применяются следующие условия:

* Один контейнер для каждой подписки для учетных записей SQL, Gremlin (API Graph) и службы таблиц.
* 3 коллекции на каждую подписку для учетных записей MongoDB.
* Емкость хранилища 10 ГБ.
* Глобальная репликация доступна в следующих [регионах Azure](https://azure.microsoft.com/regions/): центральная часть США, Северная Европа и Юго-Восточная Азия.
* Максимальная пропускная способность — 5000 ЕЗ/с.
* Срок действия подписки истекает через 24 часа. Ее можно продлить максимум на 48 часов.
* В пробной версии подписки Azure Cosmos DB невозможно создавать запросы на поддержку. Однако поддержка предоставляется подписчикам с имеющимися планами поддержки. 

## <a name="set-up-azure-cosmos-db"></a>Настройка Azure Cosmos DB
### <a name="how-do-i-sign-up-for-azure-cosmos-db"></a>Как зарегистрироваться в Azure Cosmos DB?
Служба Azure Cosmos DB доступна на портале Azure. Во-первых, вам нужно зарегистрироваться для получения подписки Azure. После этого вы сможете добавить учетную запись API SQL, API Graph, API таблиц, API MongoDB или API Cassandra в свою подписку Azure.

### <a name="what-is-a-master-key"></a>Что такое главный ключ?
Главный ключ — это токен безопасности для доступа ко всем ресурсам учетной записи. Пользователи с этим ключом имеют доступ на чтение и запись для всех ресурсов в пределах учетной записи базы данных. Будьте осторожны при распространении главных ключей. Первичный и вторичный главные ключи можно найти в колонке **Ключи** на [портале Azure][azure-portal]. Дополнительные сведения о ключах см. в разделе [Просмотр, копирование и повторное создание ключей доступа](manage-account.md#keys).

### <a name="what-are-the-regions-that-preferredlocations-can-be-set-to"></a>Какие регионы можно указать в списке PreferredLocations? 
Значение PreferredLocations можно присвоить любому региону Azure, в котором доступна служба Cosmos DB. Список доступных регионов см. на странице с [регионами Azure](https://azure.microsoft.com/regions/).

### <a name="is-there-anything-i-should-be-aware-of-when-distributing-data-across-the-world-via-the-azure-datacenters"></a>Что необходимо учитывать при распределении данных по всему миру через центры обработки данных Azure? 
Служба Azure Cosmos DB доступна во всех регионах Azure, как указано на странице со списком [регионов Azure](https://azure.microsoft.com/regions/). Так как Azure Cosmos DB — это ключевая служба, она будет доступна в каждом новом центре обработки данных. 

Указывая регион, помните, что служба Azure Cosmos DB учитывает ограничения, связанные с использованием независимых облаков и облаков для государственных организаций. То есть, создав учетную запись в регионе с независимым облаком, вы не сможете выполнять репликацию из такого региона. Также вы не сможете включить репликацию в других таких регионах из внешней учетной записи. 

## <a name="develop-against-the-sql-api"></a>Разработка с использованием API SQL

### <a name="how-do-i-start-developing-against-the-sql-api"></a>Как начать разработку с использованием API SQL?
Во-первых, вам нужно зарегистрироваться для получения подписки Azure. После этого вы сможете добавить контейнер API SQL в свою подписку Azure. Инструкции по добавлению учетной записи Azure Cosmos DB см. в статье [Azure Cosmos DB. Создание веб-приложения API DocumentDB с использованием языка .NET и портала Azure](create-sql-api-dotnet.md#create-account). 

[Пакеты SDK](sql-api-sdk-dotnet.md) доступны для .NET, Python, Node.js, JavaScript и Java. Разработчики также могут использовать [API-интерфейсы RESTful HTTP](/rest/api/documentdb/) для взаимодействия с ресурсами Azure Cosmos DB на разных платформах и с использованием разных языков.

### <a name="can-i-access-some-ready-made-samples-to-get-a-head-start"></a>Доступны ли готовые примеры, которые можно использовать в качестве отправной точки?
Примеры для пакетов SDK [.NET](sql-api-dotnet-samples.md), [Java](https://github.com/Azure/azure-documentdb-java), [Node.js](sql-api-nodejs-samples.md) и [Python](sql-api-python-samples.md) для API SQL доступны на GitHub.


### <a name="does-the-sql-api-database-support-schema-free-data"></a>Поддерживает ли база данных API SQL данные без схем?
Да, API SQL позволяет приложениям хранить произвольные документы JSON без указаний и определений схемы. Данные немедленно становятся доступными для запроса с помощью интерфейса запросов SQL Azure Cosmos DB.  

### <a name="does-the-sql-api-support-acid-transactions"></a>Поддерживает ли API SQL транзакции ACID?
Да, API SQL поддерживает транзакции между документами, выраженные в виде хранимых процедур и триггеров JavaScript. Транзакции объединяются в одну секцию в каждой коллекции. Они выполняются с помощью семантики ACID только полностью и изолированно от другого параллельно выполняемого кода и пользовательских запросов. Если в результате выполнения на стороне сервера кода JavaScript приложения возникает исключение, то выполняется откат всей транзакции. Дополнительные сведения о транзакциях см. в разделе [Транзакции программы базы данных](programming.md#database-program-transactions).

### <a name="what-is-a-collection"></a>Что такое коллекция?
Коллекция представляет собой группу документов и связанную с ними логику в виде приложения JavaScript. Коллекция — это тарифицируемая сущность. Ее [стоимость](performance-levels.md) определяется используемыми объемом хранилища и пропускной способностью. Коллекции могут охватывать одну или несколько секций либо серверов. Кроме того, они поддерживают масштабирование практически до неограниченных объемов хранилища или пропускной способности.

Коллекции также являются основанием для выставления счетов за использование Azure Cosmos DB. Счета за использование коллекции выставляются ежечасно на основе подготовленной пропускной способности и используемого объема хранилища. Ознакомьтесь с дополнительными сведениями о [ценах на Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/). 

### <a name="how-do-i-create-a-database"></a>Как создать базу данных?
Вы можете создавать базы данных с помощью [портала Azure](https://portal.azure.com) (см. сведения о [добавлении коллекции](create-sql-api-dotnet.md#create-collection)), интерфейсов [REST API](/rest/api/documentdb/) или одного из [пакетов SDK для Azure Cosmos DB](sql-api-sdk-dotnet.md). 

### <a name="how-do-i-set-up-users-and-permissions"></a>Как устанавливать настройки для пользователей и разрешений?
Создавать пользователей и разрешения можно с помощью [интерфейсов REST API](/rest/api/documentdb/) или одного из [пакетов SDK для API Cosmos DB](sql-api-sdk-dotnet.md).  

### <a name="does-the-sql-api-support-sql"></a>Поддерживает ли API SQL язык SQL-запросов?
Язык SQL-запросов, поддерживаемый учетными записями API SQL, представляет собой расширенное подмножество функций для запросов, поддерживаемых SQL Server. Язык SQL-запросов Azure Cosmos DB включает разные иерархические и реляционные операторы, а также возможность расширяемости при использовании определяемых пользователем функций (UDF) на основе JavaScript. Грамматика JSON позволяет моделировать документы JSON в виде деревьев с помеченными узлами, которые используются как технологиями автоматического индексирования Azure Cosmos DB, так и запросами на диалекте языка SQL Azure Cosmos DB. Дополнительные сведения об использовании грамматики SQL см. в статье [Запросы SQL для Azure Cosmos DB][query].

### <a name="does-the-sql-api-support-sql-aggregation-functions"></a>Поддерживает ли API SQL статистические функции SQL?
API SQL поддерживает агрегирование с низкой задержкой для любого масштаба с помощью статистических функций `COUNT`, `MIN`, `MAX`, `AVG` и `SUM` через грамматику SQL. Дополнительные сведения см. в разделе [Статистические функции](sql-api-sql-query.md#Aggregates).

### <a name="how-does-the-sql-api-provide-concurrency"></a>Каким образом API SQL обеспечивает параллелизм?
API SQL поддерживает оптимистическое параллельное управление (OCC) через теги сущностей HTTP или ETag. У каждого ресурса API SQL есть тег ETag, значение которого определяется на сервере при каждом обновлении документа. Заголовок и текущее значение ETag добавляются во все сообщения ответа. Чтобы сервер мог определить, нужно ли обновлять ресурс, можно использовать теги ETag с заголовком If-Match. Значением If-Match является значение ETag, используемое для проверки. Если это значение ETag совпадает со значением ETag сервера, ресурс будет обновлен. Если тег ETag больше не актуален, сервер отклоняет операцию с кодом ответа "HTTP 412: ошибка в предусловии". После этого клиенту нужно повторно извлечь ресурс, чтобы получить его текущее значение ETag. Кроме того, теги ETag можно использовать с заголовком If-None-Match, чтобы определять, требуется ли повторное получение ресурса.

Чтобы применить оптимистичный параллелизм в .NET, используйте класс [AccessCondition](https://msdn.microsoft.com/library/azure/microsoft.azure.documents.client.accesscondition.aspx) . Пример для .NET см. в файле [Program.cs](https://github.com/Azure/azure-documentdb-dotnet/blob/master/samples/code-samples/DocumentManagement/Program.cs) примера DocumentManagement на сайте GitHub.

### <a name="how-do-i-perform-transactions-in-the-sql-api"></a>Как выполнять транзакции в API SQL?
API SQL поддерживает транзакции LINQ через хранимые процедуры и триггеры JavaScript. Все операции с базой данных в скрипте выполняются в режиме изоляции моментального снимка. Если это коллекция одной секции, выполнение ограничивается такой коллекцией. Если коллекция секционирована, выполнение ограничивается документами с одним тем же значением ключа секции в пределах коллекции. Моментальный снимок версий документов (ETag) выполняется в начале транзакции и фиксируется только в случае успешного выполнения скрипта. Если JavaScript выдает ошибку, выполняется откат транзакции. Дополнительные сведения см. в статье [Программирование Azure Cosmos DB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](programming.md).

### <a name="how-can-i-bulk-insert-documents-into-cosmos-db"></a>Как выполнять массовую вставку документов в Cosmos DB?
Массовую вставку документов в Azure Cosmos DB можно выполнять так:

* С помощью инструмента миграции данных, как описано в статье [Как импортировать данные в Azure Cosmos DB для API DocumentDB](import-data.md).
* С помощью хранимых процедур, как описано в статье [Программирование Azure Cosmos DB на стороне сервера: хранимые процедуры, триггеры баз данных и определяемые пользователем функции](programming.md).

### <a name="does-the-sql-api-support-resource-link-caching"></a>Поддерживает ли API SQL кэширование ссылок на ресурсы?
Да, так как Azure Cosmos DB — это служба RESTful, ссылки на ресурсы являются неизменяемыми и могут кэшироваться. Клиенты API SQL могут указывать заголовок If-None-Match для операций чтения для любого документа или коллекции, являющихся ресурсами, и обновлять их локальные копии только при изменении версии сервера.

### <a name="is-a-local-instance-of-sql-api-available"></a>Доступен ли локальный экземпляр API SQL?
Да. [Эмулятор Azure Cosmos DB](local-emulator.md) обеспечивает высокоточную эмуляцию службы Cosmos DB. В эмуляторе реализованы те же функции, что и в службе Azure Cosmos DB, включая поддержку создания документов JSON и обращение к ним, подготовку и масштабирование коллекций, а также выполнение хранимых процедур и триггеров. С помощью эмулятора Azure Cosmos DB можно разрабатывать и тестировать приложения. Чтобы развертывать эти приложения в глобальной среде Azure, достаточно изменить один параметр конфигурации для конечной точки подключения к Azure Cosmos DB.

## <a name="develop-against-the-api-for-mongodb"></a>Разработка с использованием API для MongoDB
### <a name="what-is-the-azure-cosmos-db-api-for-mongodb"></a>Что такое API Azure Cosmos DB для MongoDB?
API Microsoft Azure Cosmos DB для MongoDB — это слой совместимости, который позволяет приложениям легко и прозрачно взаимодействовать с ядром собственной СУБД Azure Cosmos DB с помощью существующих API-интерфейсов Apache MongoDB и драйверов, которые поддерживаются сообществом разработчиков. Теперь разработчики могут использовать свои навыки и доступные наборы средств MongoDB для создания приложений с поддержкой Azure Cosmos DB. Azure Cosmos DB предлагает разработчикам такие специализированные функции, как автоматическая индексация, поддержка резервного копирования, финансово подкрепленные соглашения об уровне обслуживания и т. д.

### <a name="how-do-i-connect-to-my-api-for-mongodb-database"></a>Как подключиться к API для базы данных MongoDB?
Чтобы быстро подключиться к API Azure Cosmos DB для MongoDB, перейдите на [портал Azure](https://portal.azure.com). Войдите в свою учетную запись и выберите в меню навигации слева **Быстрый запуск**. Эта функция позволяет оперативно получить фрагменты кода для подключения к базе данных. 

В Azure Cosmos DB строгие требования к безопасности и стандарты. Для использования учетных записей Azure Cosmos DB требуется аутентификация и безопасный обмен данными через протокол SSL. Поэтому необходимо применять TLSv1.2.

См. дополнительные сведения о [подключении к API для MongoDB](connect-mongodb-account.md).

### <a name="are-there-additional-error-codes-for-an-api-for-mongodb-database"></a>Существуют ли дополнительные коды ошибок API для базы данных MongoDB?
Кроме распространенных кодов ошибок MongoDB, в API для MongoDB есть собственные коды ошибок.


| Ошибка               | Код  | ОПИСАНИЕ  | Решение  |
|---------------------|-------|--------------|-----------|
| TooManyRequests     | 16500 | Общее число единиц запроса превысило число, подготовленное для коллекции, и было отрегулировано. | Выполните масштабирование пропускной способности коллекции на портале Azure или повторите попытку. |
| ExceededMemoryLimit | 16501 | Так как в этой службе несколько клиентов, операция превысила выделенную память для клиента. | Уменьшите область операции, применив более строгие критерии запроса, или обратитесь в службу поддержки на [портале Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade). <br><br>Пример: *&nbsp;&nbsp;&nbsp;&nbsp;db.getCollection('users').aggregate([<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$match: {name: "Andy"}}, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{$sort: {age: -1}}<br>&nbsp;&nbsp;&nbsp;&nbsp;])*) |

## <a name="develop-with-the-table-api"></a>Разработка с помощью API таблиц

### <a name="how-can-i-use-the-table-api-offering"></a>Как использовать предложение API таблиц? 
API таблиц Microsoft Azure Cosmos DB доступен на [портале Azure][azure-portal]. Во-первых, вам нужно зарегистрироваться для получения подписки Azure. После этого вы сможете добавить учетную запись API таблиц Azure Cosmos DB в подписку Azure, а затем добавить таблицы в свою учетную запись. 

Поддерживаемые языки и связанные способы быстрого начала работы можно найти в статье [Знакомство со службой Azure Cosmos DB. API таблицы](table-introduction.md).

### <a name="do-i-need-a-new-sdk-to-use-the-table-api"></a>Нужен ли новый пакет SDK, чтобы использовать API таблиц? 
Нет, имеющиеся пакеты SDK службы хранилища должны по-прежнему работать. Однако мы рекомендуем всегда получать последние версии пакетов SDK для обеспечения оптимальной поддержки и, в большинстве случаев, высокой производительности. Список доступных языков см. на странице [введения в API таблиц базы данных Azure Cosmos DB](table-introduction.md).

### <a name="where-is-table-api-not-identical-with-azure-table-storage-behavior"></a>Чем API таблиц отличается от хранилища таблиц Azure?
Пользователям хранилища таблиц Azure, которые хотят создавать таблицы с помощью API таблиц базы данных Azure Cosmos DB, следует учесть следующие различия в поведении:

* API таблиц базы данных Azure Cosmos DB использует модель зарезервированной емкости, чтобы обеспечить гарантированную производительность. Это означает, что пользователь платит за емкость, как только создается таблица, даже если ресурс не используется. При использовании хранилища таблиц Azure вы платите только за используемую емкость. Благодаря этому вы сможете понять, почему API таблиц обеспечивает 10 мс задержки для операций чтения и менее 15 мс для операций записи на уровне 99-го процентиля, в то время как хранилище таблиц Azure предлагает соглашение об уровне обслуживания с задержкой на уровне 10 секунд. Следовательно, при работе с API таблиц оплачиваются даже пустые таблицы без каких-либо запросов, чтобы обеспечить возможность обработки любых запросов на уровне SLA, заявленного Azure Cosmos DB.
* Результаты запроса, возвращаемые API таблиц, не сортируются в порядке "ключ раздела/ключ строки", так как они находятся в хранилище таблиц Azure.
* Ключи строк могут содержать не более 255 байт.
* Пакеты могут содержать до 2 МБ.
* В настоящий момент CORS не поддерживается.
* В названиях таблиц в хранилище таблиц Azure не учитывается регистр, но они находятся в API таблиц Azure Cosmos DB.
* Некоторые внутренние форматы кодирования информации Azure Cosmos DB, например двоичные поля, в настоящее время не так эффективны, как хотелось бы. Поэтому на размер данных могут накладываться неожиданные ограничения. Например, в настоящее время невозможно использовать полную 1-мегабайтную сущность таблицы для хранения двоичных данных, так как кодировка увеличивает размер данных.

С точки зрения API REST существует ряд конечных точек и параметров запросов, которые не поддерживаются API таблиц базы данных Azure Cosmos DB:
| Методы REST | Конечная точка или параметр запроса REST | URL-адреса документов | Пояснение |
| ------------| ------------- | ---------- | ----------- |
| GET, PUT | /?restype=service@comp=properties| [Set Table Service Properties](https://docs.microsoft.com/rest/api/storageservices/set-table-service-properties) (Настройка свойств службы таблиц) и [Get Table Service Properties](https://docs.microsoft.com/rest/api/storageservices/get-table-service-properties) (Получение свойств службы таблиц) | Эта конечная точка используется для настройки правил CORS, конфигурации аналитики хранилища и настроек ведения журналов. В настоящее время CORS не поддерживается, а аналитика и ведение журналов обрабатываются в базе данных Azure Cosmos и в таблицах хранения Azure по-разному. |
| OPTIONS | /<table-resource-name> | [Preflight Table Request](https://docs.microsoft.com/rest/api/storageservices/preflight-table-request) (Предварительные запросы таблиц) | Этот метод является частью CORS и сейчас не поддерживается в Azure Cosmos DB. |
| ПОЛУЧЕНИЕ | /?restype=service@comp=stats | [Get Table Service Stats](https://docs.microsoft.com/rest/api/storageservices/get-table-service-stats) (Получение статистики службы таблиц) | Предоставляет сведения о том, как быстро данные копируются между первичными и вторичными базами данных. Этот метод не требуется в Cosmos DB, так как репликация является частью операций записи. |
| GET, PUT | /mytable?comp=acl | [Get Table ACL](https://docs.microsoft.com/rest/api/storageservices/get-table-acl) (Получение ACL таблиц) и [Set Table ACL](https://docs.microsoft.com/rest/api/storageservices/set-table-acl) (Настройка ACL таблиц) | Этот метод получает и устанавливает хранимые политики доступа, используемые для управления подписями коллективного доступа (SAS). Несмотря на то что SAS поддерживается, они настраиваются и управляются по-разному. |

Кроме того, API таблиц Azure Cosmos DB поддерживает только формат JSON, но не ATOM.

Хотя Azure Cosmos DB поддерживает подписанный URL-адрес (SAS), это решение не поддерживает определенные политики, в частности связанные с такими операциями управления, как право создавать таблицы.

Сейчас Azure Cosmos DB не поддерживает некоторые классы и методы, предусмотренные для пакета SDK для .NET.

| Класс | Неподдерживаемый метод |
|-------|-------- |
| CloudTableClient | \*ServiceProperties* |
|                  | \*ServiceStats* |
| CloudTable | SetPermissions* |
|            | GetPermissions* |
| TableServiceContext | * (this class is actually deprecated) |
| TableServiceEntity | " " |
| TableServiceExtensions | " " |
| TableServiceQuery | " " |

Если какое-либо из этих различий является проблемой для вашего проекта, пожалуйста, свяжитесь с нами по адресу [askcosmosdb@microsoft.com](mailto:askcosmosdb@microsoft.com) и сообщите об этом.

### <a name="how-do-i-provide-feedback-about-the-sdk-or-bugs"></a>Как отправить отзыв о пакете SDK или сообщить об ошибках?
Свой отзыв можно опубликовать на следующих ресурсах:

* [Uservoice](https://feedback.azure.com/forums/599062-azure-cosmos-db-table-api)
* [Форум MSDN](https://social.msdn.microsoft.com/forums/azure/home?forum=AzureDocumentDB)
* [Stack Overflow](http://stackoverflow.com/questions/tagged/azure-cosmosdb). Stack Overflow лучше всего подходит, чтобы задать вопросы о программировании. Ваш вопрос должен быть [по теме](https://stackoverflow.com/help/on-topic) и [максимально точным и подробным, чтобы на него можно было ответить по существу](https://stackoverflow.com/help/how-to-ask).

### <a name="what-is-the-connection-string-that-i-need-to-use-to-connect-to-the-table-api"></a>Какую строку подключения необходимо использовать, чтобы подключиться к API таблиц?
Используйте следующую строку подключения:
```
DefaultEndpointsProtocol=https;AccountName=<AccountNamefromCosmos DB;AccountKey=<FromKeysPaneofCosmosDB>;TableEndpoint=https://<AccountName>.table.cosmosdb.azure.com
```
Вы можете получить строку подключения на странице строки подключения на портале Azure. 

### <a name="how-do-i-override-the-config-settings-for-the-request-options-in-the-net-sdk-for-the-table-api"></a>Как переопределить параметры конфигурации для параметров запроса в пакете SDK для .NET для API таблиц?
Сведения о параметрах конфигурации см. в описании [возможностей Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities). Некоторые параметры обрабатываются методом CreateCloudTableClient, а другие — с помощью app.config в разделе appSettings в клиентском приложении.

### <a name="are-there-any-changes-for-customers-who-are-using-the-existing-azure-table-storage-sdks"></a>Изменилось ли что-либо для клиентов, использующих существующий пакет SDK для хранилища таблиц Azure?
Отсутствует. Для существующих или новых клиентов, использующих имеющиеся пакеты SDK для хранилища таблиц Azure, никаких изменений не предусмотрено. 

### <a name="how-do-i-view-table-data-that-is-stored-in-azure-cosmos-db-for-use-with-the-table-api"></a>Как просмотреть данные таблицы, хранящиеся в Azure Cosmos DB, для использования с API таблицы? 
Чтобы просмотреть данные, используйте портал Azure. Вы также можете использовать код API таблиц или описанные ниже средства. 

### <a name="which-tools-work-with-the-table-api"></a>Какие средства можно использовать для работы с API таблиц? 
Вы можете использовать [обозреватель хранилищ Azure](https://docs.microsoft.com/azure/vs-azure-tools-storage-manage-with-storage-explorer).

Средства, которые принимают строку подключения в указанном ранее формате, могут поддерживать API таблиц. Вы можете ознакомиться со списком средств для таблицы в статье [Клиентские инструменты службы хранилища Azure](../storage/common/storage-explorers.md). 

### <a name="do-powershell-or-azure-cli-work-with-the-table-api"></a>Можно ли использовать PowerShell или Azure CLI для работы с API таблиц?
[PowerShell](table-powershell.md) не поддерживается. Сейчас Azure CLI не поддерживается.

### <a name="is-the-concurrency-on-operations-controlled"></a>Контролируется ли параллелизм операций?
Да, оптимистическая блокировка операций обеспечивается за счет использования механизма ETag. 

### <a name="is-the-odata-query-model-supported-for-entities"></a>Поддерживается ли для сущностей модель запросов OData? 
Да, API таблиц поддерживает запросы OData и LINQ. 

### <a name="can-i-connect-to-azure-table-storage-and-azure-cosmos-db-table-api-side-by-side-in-the-same-application"></a>Возможно ли параллельное подключение к хранилищу таблиц Azure и API таблиц Azure Cosmos DB в одном и том же приложении? 
Да, подключение возможно, если вы создадите два отдельных экземпляра CloudTableClient, каждый из которых указывает на свой собственный URI в строке подключения.

### <a name="how-do-i-migrate-an-existing-azure-table-storage-application-to-this-offering"></a>Как переместить имеющееся приложение хранилища таблиц Azure в предложение?
[AzCopy](https://docs.microsoft.com/azure/storage/common/storage-use-azcopy) и [средство миграции данных DB Cosmos Azure](import-data.md) поддерживаются.

### <a name="how-is-expansion-of-the-storage-size-done-for-this-service-if-for-example-i-start-with-n-gb-of-data-and-my-data-will-grow-to-1-tb-over-time"></a>Как выполняется расширение объема хранилища для этой службы, если исходный объем данных (например, *n* ГБ) со временем увеличится до 1 ТБ? 
Azure Cosmos DB предоставляет неограниченный объем хранилища за счет горизонтального масштабирования. Увеличение объема хранилища осуществляется службой по мере необходимости. 

### <a name="how-do-i-monitor-the-table-api-offering"></a>Как выполняется мониторинг API таблиц?
Отслеживать запросы и использование хранилища можно с помощью панели **метрик** API таблиц. 

### <a name="how-do-i-calculate-the-throughput-i-require"></a>Как рассчитать необходимую пропускную способность?
Вы можете использовать калькулятор емкости, чтобы рассчитать пропускную способность таблиц, необходимую для выполнения операций. Дополнительные сведения см. на странице [оценки единиц запросов и хранилища данных](https://www.documentdb.com/capacityplanner). В общем случае сущность можно представить как JSON-файл, задав значения для операций. 

### <a name="can-i-use-the-table-api-sdk-locally-with-the-emulator"></a>Можно ли использовать пакет SDK API таблиц локально с эмулятором?
На данный момент нет.

### <a name="can-my-existing-application-work-with-the-table-api"></a>Совместимо ли мое имеющееся приложение с API таблиц? 
Да, поддерживается такой же API.

### <a name="do-i-need-to-migrate-my-existing-azure-table-storage-applications-to-the-sdk-if-i-do-not-want-to-use-the-table-api-features"></a>Необходимо ли переводить имеющиеся приложения для хранилища таблиц Azure на пакет SDK, если я не планирую использовать возможности API таблиц?
Нет, вы можете создавать и использовать существующие ресурсы хранилища таблиц Azure, не прерывая работу. Но если вы не работаете с API таблиц, вы не сможете воспользоваться преимуществами автоматической индексации, дополнительных способов обеспечения согласованности и глобального распределения. 

### <a name="how-do-i-add-replication-of-the-data-in-the-table-api-across-multiple-regions-of-azure"></a>Как добавить репликацию данных в API таблиц для нескольких регионов Azure?
Вы можете использовать [параметры глобальной репликации](tutorial-global-distribution-sql-api.md#portal) портала Azure Cosmos DB для добавления регионов, поддерживаемых приложением. Чтобы разработать глобально распределенное приложение, вы также должны добавить приложение, присвоив ключу PreferredLocation значение локального региона. Так вы сможете обеспечить низкую задержку операций чтения. 

### <a name="how-do-i-change-the-primary-write-region-for-the-account-in-the-table-api"></a>Как изменить основной регион записи для учетной записи в API таблиц?
Чтобы добавить регион, а затем выполнить отработку отказа в нужный регион, вы можете использовать панель портала глобальной репликации службы Azure Cosmos DB. См. дополнительные сведения о [разработке с использованием учетных записей Azure Cosmos DB с поддержкой нескольких регионов](regional-failover.md). 

### <a name="how-do-i-configure-my-preferred-read-regions-for-low-latency-when-i-distribute-my-data"></a>Как настроить предпочитаемые регионы для чтения, чтобы обеспечить низкую задержку при распределении данных? 
Чтобы облегчить чтение из локального расположения, используйте ключ PreferredLocation в файле app.config. Если присвоено значение LocationMode, API таблиц вызывает ошибку для существующих приложений. Удалите этот код, так как API таблиц извлекает эти сведения из файла app.config. См. дополнительные сведения о [возможностях Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities).

### <a name="how-should-i-think-about-consistency-levels-in-the-table-api"></a>Как принять решение о выборе уровня согласованности в API таблиц? 
В Azure Cosmos DB реализованы продуманные компромиссные сочетания показателей согласованности, доступности и задержки. Azure Cosmos DB предлагает разработчикам пять уровней согласованности для API таблиц. Следовательно, вы можете выбрать требуемую модель обеспечения согласованности на уровне таблицы, а также обеспечить поддержку отдельных запросов при обращении к данным. Подключаемый клиент может выбирать уровень согласованности. Вы можете изменить уровень с помощью аргумента consistencyLevel для CreateCloudTableClient. 

API таблиц предусматривает операции чтения с низкой задержкой, возможностью чтения ваших собственных записей и ограниченной согласованностью по умолчанию. Дополнительные сведения см. в статье [Настраиваемые уровни согласованности данных в DocumentDB](consistency-levels.md). 

По умолчанию хранилище таблиц Azure обеспечивает строгую согласованность в пределах региона и итоговую согласованность в дополнительных расположениях. 

### <a name="does-azure-cosmos-db-table-api-offer-more-consistency-levels-than-azure-table-storage"></a>Обеспечивает ли API таблиц DB Cosmos Azure дополнительные уровни согласованности по сравнению с хранилищем таблиц Azure?
Да, см. дополнительные сведения о распределенном характере Azure Cosmos DB в описании [уровней согласованности](consistency-levels.md). Так как уровни согласованности подкреплены гарантийными обязательствами, вы можете больше не беспокоиться об этом. См. дополнительные сведения о [возможностях Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities).

### <a name="when-global-distribution-is-enabled-how-long-does-it-take-to-replicate-the-data"></a>Сколько времени занимает репликация данных, когда включено глобальное распределение?
Azure Cosmos DB надежно фиксирует данные в локальном регионе, отправляя их в другие регионы за миллисекунды. Такая репликация зависит только от времени кругового пути центра обработки данных. См. дополнительные сведения о [возможностях глобально распределенной службы базы данных Azure Cosmos DB](distribute-data-globally.md).

### <a name="can-the-read-request-consistency-level-be-changed"></a>Можно ли изменить уровень согласованности запросов на чтение?
В Azure Cosmos DB можно указать уровень согласованности на уровне контейнера (в таблице). Пакет SDK для .NET также позволяет указать этот уровень, изменив значение ключа TableConsistencyLevel в файле app.config. Можно выбрать строгую согласованность, согласованность с ограниченным устареванием, согласованность на уровне сеанса, согласованность префиксов или итоговую согласованность. См. дополнительные сведения о [настраиваемых уровнях согласованности данных в Azure Cosmos DB](consistency-levels.md). Основная идея состоит в том, что уровень согласованности для запросов не может быть выше уровня согласованности для таблицы. Например, вы не можете выбрать для таблицы итоговую согласованность, а для запросов — строгую согласованность. 

### <a name="how-does-the-table-api-handle-failover-if-a-region-goes-down"></a>Как API таблиц выполняет отработку отказа, если регион становится недоступен? 
API таблиц использует глобально распределенную платформу службы Azure Cosmos DB. Чтобы обеспечить нормальную работу приложения при простое центра обработки данных, вам нужно использовать несколько регионов для учетной записи на портале Azure Cosmos DB. См. дополнительные сведения о [разработке с использованием учетных записей Azure Cosmos DB с поддержкой нескольких регионов](regional-failover.md). Вы можете задать приоритет регионов. Дополнительные сведения см. в статье [Автоматическая отработка отказа между регионами для обеспечения непрерывности бизнес-процессов в DocumentDB](regional-failover.md). 

Вы можете не только добавить любое нужное число регионов для учетной записи, но и управлять тем, в какой регион будет выполняться отработка отказа, настроив приоритет для этой процедуры. Конечно, чтобы использовать базу данных, вам также нужно предоставить приложение. Но этот простой не отразится на работе клиентов. [Последняя версия клиентского пакета SDK для .NET](table-sdk-dotnet.md) автоматически обнаруживает регион в отличие от других пакетов SDK. То есть он может определять регион, который стал недоступен, и автоматически выполнять отработку отказа в другой регион.

### <a name="is-the-table-api-enabled-for-backups"></a>Предусмотрена ли в API таблиц поддержка резервных копий?
Да, API таблиц использует платформу службы Azure Cosmos DB для резервного копирования. Резервные копии создаются автоматически. См. дополнительные сведения об [оперативном резервном копировании и восстановлении с помощью Azure Cosmos DB](online-backup-and-restore.md).

 
### <a name="does-the-table-api-index-all-attributes-of-an-entity-by-default"></a>Индексирует ли API таблиц все атрибуты сущности по умолчанию?
Да, по умолчанию индексируются все атрибуты сущности. См. дополнительные сведения о [политиках индексации Azure Cosmos DB](indexing-policies.md). 

### <a name="does-this-mean-i-do-not-have-to-create-multiple-indexes-to-satisfy-the-queries"></a>Значит ли это, что мне не нужно создавать разные индексы для запросов? 
Да, API таблиц Azure Cosmos DB обеспечивает автоматическое индексирование всех атрибутов без определения схемы. Таким образом, разработчик может сосредоточиться на приложении, не беспокоясь о создании индексов и управлении ими. См. дополнительные сведения о [политиках индексации Azure Cosmos DB](indexing-policies.md).

### <a name="can-i-change-the-indexing-policy"></a>Можно ли изменить политику индексирования?
Да, вы можете изменить политику индексирования, предоставив определение индекса. См. дополнительные сведения о [возможностях Azure Cosmos DB](../cosmos-db/tutorial-develop-table-dotnet.md#azure-cosmos-db-capabilities). Вам нужно правильно закодировать эти параметры, а также экранировать их. 

Для пакетов SDK, не предназначенных для .NET, политику индексирования можно установить ​​только на портале в **обозревателе данных**. Перейдите к таблице, которую нужно изменить, а затем выберите **Scale & Settings** (Параметры и масштабирование) -> "Политика индексации", внесите необходимые изменения, а затем щелкните **Сохранить**.

Из пакета SDK для .NET ее можно передать в файле app.config:
```
{
  "indexingMode": "consistent",
  "automatic": true,
  "includedPaths": [
    {
      "path": "/somepath",
      "indexes": [
        {
          "kind": "Range",
          "dataType": "Number",
          "precision": -1
        },
        {
          "kind": "Range",
          "dataType": "String",
          "precision": -1
        } 
      ]
    }
  ],
  "excludedPaths": 
[
 {
      "path": "/anotherpath"
 }
]
}
```

### <a name="azure-cosmos-db-as-a-platform-seems-to-have-lot-of-capabilities-such-as-sorting-aggregates-hierarchy-and-other-functionality-will-you-be-adding-these-capabilities-to-the-table-api"></a>Azure Cosmos DB как платформа предоставляет разные возможности, включая сортировку, выполнение статистических вычислений, иерархию и пр. Будут ли эти возможности добавлены в API таблиц? 
В API таблиц поддерживаются те же функции обработки запросов, что и в хранилище таблиц Azure. Кроме того, эта база данных поддерживает сортировку, выполнение статистических вычислений, геопространственные запросы, иерархию и множество встроенных функций. Дополнительные возможности API таблиц будут добавлены в будущем обновлении службы. Дополнительные сведения см. в статье [Запросы SQL для Azure Cosmos DB](sql-api-sql-query.md).
 
### <a name="when-should-i-change-tablethroughput-for-the-table-api"></a>Когда необходимо изменять значение TableThroughput для API таблиц?
Значение TableThroughput следует изменять в следующих случаях:
* При извлечении, преобразовании и загрузке данных или при передаче большого объема данных за короткий промежуток времени. 
* Чтобы получить более высокую пропускную способность для контейнера в серверной части. Например, вы видите, что используемая пропускная способность превышает подготовленную и выполняется регулирование. Дополнительные сведения см. в статье [Настройка пропускной способности для коллекций Azure Cosmos DB](set-throughput.md).

### <a name="can-i-scale-up-or-scale-down-the-throughput-of-my-table-api-table"></a>Возможно ли масштабирование пропускной способности таблицы API таблиц? 
Да, для этого вы можете использовать панель масштабирования портала Azure Cosmos DB. См. дополнительные сведения о [настройке пропускной способности](set-throughput.md).

### <a name="is-a-default-tablethroughput-set-for-newly-provisioned-tables"></a>Определяется ли пропускная способность таблицы по умолчанию для новых подготовленных таблиц?
Да, если не переопределить пропускную способность таблицы с помощью файла app.config и не использовать предварительно созданный контейнер в Azure Cosmos DB, служба создаст таблицу с предопределенной пропускной способностью — 400.
 
### <a name="is-there-any-change-of-pricing-for-existing-customers-of-the-azure-table-storage-service"></a>Изменились ли какие-либо цены для клиентов хранилища службы таблиц Azure?
Отсутствует. Цены для существующих клиентов хранилища таблиц Azure не изменились. 

### <a name="how-is-the-price-calculated-for-the-table-api"></a>Как рассчитывается стоимость для API таблиц? 
Это зависит от заданного значения TableThroughput. 

### <a name="how-do-i-handle-any-throttling-on-the-tables-in-table-api-offering"></a>Как обрабатывать регулирование таблиц в предложении API таблиц? 
Если скорость запроса превышает емкость подготовленной пропускной способности для базового контейнера, вы получите сообщение об ошибке, а пакет SDK повторит вызов на основе политики повтора.

### <a name="why-do-i-need-to-choose-a-throughput-apart-from-partitionkey-and-rowkey-to-take-advantage-of-the-table-api-offering-of-azure-cosmos-db"></a>Зачем при использовании предложения API таблиц Azure Cosmos DB кроме значений PartitionKey и RowKey нужно выбирать еще и пропускную способность?
Azure Cosmos DB определяет для вашего контейнера пропускную способность по умолчанию, если вы не укажете другое значение в файле app.config или на портале. 

Azure Cosmos DB предоставляет гарантии производительности и задержки с верхними границами для операций. Это возможно, если обработчик может применить управление операциями клиента. Настраивая значение TableThroughput, вы гарантированно получаете требуемые показатели пропускной способности и задержки, так как платформа резервирует эту емкость и обеспечивает бесперебойное выполнение операций. 

Изменяя спецификации, вы можете гибко управлять пропускной способностью в соответствии со своими потребностями, обеспечивая поддержку сезонности приложений и позволяя минимизировать затраты.

### <a name="azure-table-storage-has-been-very-inexpensive-for-me-because-i-pay-only-to-store-the-data-and-i-rarely-query-the-azure-cosmos-db-table-api-offering-seems-to-be-charging-me-even-though-i-have-not-performed-a-single-transaction-or-stored-anything-can-you-please-explain"></a>Служба хранилища таблиц Azure стоит недорого, особенно если платить только за хранение данных и редко выполнять запросы. Предложение API таблиц Azure Cosmos DB предусматривает оплату, даже если я не выполняю транзакции и ничего не храню. Расскажите об этом подробнее.

Azure Cosmos DB — это глобально распределенная система на основе соглашений об уровне обслуживания, которая гарантирует высокую доступность, низкую задержку и высокую пропускную способность. В отличие от других систем в Azure Cosmos DB гарантируется зарезервированная пропускная способность. Azure Cosmos DB предоставляет такие запрашиваемые клиентами дополнительные возможности, как вторичные индексы и глобальное распространение.  

### <a name="i-never-get-a-quota-full-notification-indicating-that-a-partition-is-full-when-i-ingest-data-into-azure-table-storage-with-the-table-api-i-do-get-this-message-is-this-offering-limiting-me-and-forcing-me-to-change-my-existing-application"></a>При приеме данных в хранилище таблиц Azure мне не приходили уведомления о достижении квоты, информирующие о заполнении секции. А при работе с API таблиц мне пришло такое сообщение. Значит ли это, что предложение связано с определенными ограничениями, и поэтому мне необходимо изменить приложение?

Azure Cosmos DB — это система на основе соглашений об уровне обслуживания, которая предоставляет неограниченные возможности масштабирования, а также гарантирует согласованность, низкую задержку, высокую пропускную способность и доступность. Объем данных и индекс должны быть управляемыми и масштабируемыми, чтобы получить гарантированную производительность уровня "Премиум". Ограничение в 10 ГБ для числа сущностей и элементов на ключ секции требуется для повышения скорости поиска и производительности запросов. Кроме того, для обеспечения достаточной масштабируемости приложения для службы хранилища Azure мы рекомендуем *не* создавать секцию с высокой нагрузкой, чтобы хранить в ней все сведения и выполнять запрос этих данных. 

### <a name="so-partitionkey-and-rowkey-are-still-required-with-the-table-api"></a>То есть свойства PartitionKey и RowKey все еще требуются при использовании API таблиц? 
Да. Так как контактные зоны API таблиц и пакета SDK для хранилища таблиц Azure аналогичны, ключ секции обеспечивает отличный способ распределения данных. Ключ строки является уникальным в пределах такой секции. Его присутствие обязательно, а значение может быть нулевым, как в пакете SDK уровня "Стандартный". Размер значения RowKey составляет 255 байт, а значения PartitionKey — 1 КБ. 

### <a name="what-are-the-error-messages-for-the-table-api"></a>Какими будут сообщения об ошибках в API таблиц?
Хранилище таблиц Azure и API таблиц Azure Cosmos DB Table используют одни и те же пакеты SDK, поэтому большинство ошибок будут одинаковыми.

### <a name="why-do-i-get-throttled-when-i-try-to-create-lot-of-tables-one-after-another-in-the-table-api"></a>Почему при попытке последовательного создания большого числа таблиц в API таблицы выполняется регулирование?
Azure Cosmos DB — это система на основе соглашений об уровне обслуживания, которая гарантирует согласованность, низкую задержку, высокую пропускную способность и доступность. Так как это подготовленная система, она способна резервировать ресурсы, чтобы гарантировать выполнение этих требований. Эта система определяет создание таблиц в быстром режиме и выполняет регулирование. Мы рекомендуем создавать не более пяти таблиц в минуту. Помните, что API таблиц — это подготовленная система. Оплата начисляется уже в момент подготовки. 

## <a name="develop-against-the-graph-api"></a>Разработка с использованием API Graph
### <a name="how-can-i-apply-the-functionality-of-graph-api-to-azure-cosmos-db"></a>Как можно использовать функции API Graph в Azure Cosmos DB?
Чтобы использовать эти функции, можно применить библиотеку расширений API Graph. Эта библиотека называется Microsoft Azure Graphs. Она доступна в NuGet. 

### <a name="it-looks-like-you-support-the-gremlin-graph-traversal-language-do-you-plan-to-add-more-forms-of-query"></a>Похоже, предусмотрена поддержка Gremlin как обходного языка. Планируете ли вы добавить дополнительные варианты запросов?
Да, в будущем мы планируем добавить другие механизмы выполнения запросов. 

### <a name="how-can-i-use-the-new-graph-api-offering"></a>Как можно использовать новое предложение API Graph? 
Чтобы приступить к работе, см. краткое руководство по [API Graph](../cosmos-db/create-graph-dotnet.md).

<a id="cassandra"></a> 
## <a name="develop-with-the-apache-cassandra-api-preview"></a>Разработка с помощью API Apache Cassandra (предварительная версия)

### <a name="what-is-the-protocol-version-supported-in-the-private-preview-is-there-a-plan-to-support-other-protocols"></a>Какая версия протокола поддерживается в закрытой предварительной версии? Планируется ли поддержка других протоколов?
API Cassandra Apache для Azure Cosmos DB сейчас поддерживает CQL версии 4. Если у вас есть отзыв о поддержке других протоколов, свяжитесь с нами на сайте [отзывов uservoice](https://feedback.azure.com/forums/263030-azure-cosmos-db) или отправьте сообщение по электронному адресу [askcosmosdbcassandra@microsoft.com](mailto:askcosmosdbcassandra@microsoft.com). 

### <a name="why-is-choosing-a-throughput-for-a-table-a-requirement"></a>Зачем необходимо выбирать пропускную способность для таблицы?
Azure Cosmos DB устанавливает пропускную способность по умолчанию для вашего контейнера на основе того, где вы создаете таблицу (на портале или CQL). Azure Cosmos DB предоставляет гарантии производительности и задержки с верхними границами для операций. Это возможно, если обработчик может применить управление операциями клиента. Настраивая значение пропускной способности, вы гарантированно получаете требуемые показатели пропускной способности и задержки, так как платформа резервирует эту емкость и обеспечивает бесперебойное выполнение операций. Вы можете изменять показатели пропускной способности по требованию, чтобы воспользоваться преимуществами сезонности вашего приложения и снизить расходы.

Концепция пропускной способности подробно описана в статье [Единицы запросов в базе данных Azure Cosmos DB](request-units.md). Пропускная способность для таблицы равномерно распределяется между базовыми физическими секциями.  

### <a name="what-is-the-default-rus-of-table-when-created-through-cql-what-if-i-need-to-change-it"></a>Что представляет собой показатель "единицы запросов в секунду" по умолчанию при создании таблицы с помощью CQL? Что делать, если требуется ее изменить?
Azure Cosmos DB использует единицы запросов в секунду (ЕЗ) в качестве валюты для обеспечения пропускной способности. Таблицы, созданные с помощью CQL, содержат 400 ЕЗ. Количество ЕЗ можно изменить на портале. 

CQL
```
CREATE TABLE keyspaceName.tablename (user_id int PRIMARY KEY, lastname text) WITH cosmosdb_provisioned_throughput=1200
```

.NET
```csharp
int provisionedThroughput = 400;
var simpleStatement = new SimpleStatement($"CREATE TABLE {keyspaceName}.{tableName} (user_id int PRIMARY KEY, lastname text)");
var outgoingPayload = new Dictionary<string, byte[]>();
outgoingPayload["cosmosdb_provisioned_throughput"] = Encoding.UTF8.GetBytes(provisionedThroughput.ToString());
simpleStatement.SetOutgoingPayload(outgoingPayload); 
``` 

### <a name="what-happens-when-throughput-is-exceeded"></a>Что происходит при превышении значения пропускной способности? 
Azure Cosmos DB предоставляет гарантии производительности и задержки с верхними границами для операций. Это возможно, если обработчик может применить управление операциями клиента. Это возможно благодаря настройке значения пропускной способности, что гарантирует получение требуемых показателей пропускной способности и задержки, так как платформа резервирует эту емкость и обеспечивает бесперебойное выполнение операций. В случае превышения значения емкости вы получаете сообщение об ошибке перегрузки, указывающее, что емкость превышена. 0x1001 перегрузка: не удается обработать запрос из-за "высокой частоты запросов". На этом этапе очень важно увидеть, какие операции и тома вызывают эту проблему. Вы можете получить представление о потребленной емкости, которая превышает подготовленную емкость, с помощью метрик на портале. Затем нужно обеспечить, чтобы емкость во всех базовых секциях потреблялась практически одинаково. Если очевидно, что большая часть пропускной способности используется в одной секции, необходимо снизить рабочую нагрузку. 

Доступны метрики, показывающие использование пропускной способности за несколько часов, дней и за неделю в секциях или в совокупности. Дополнительные сведения см. в статье [Мониторинг и отладка с помощью метрик в Azure Cosmos DB](use-metrics.md).

Сведения о журналах диагностики приведены в статье [Журнал ведения диагностики Azure Cosmos DB](logging.md).

### <a name="does-the-primary-key-map-to-the-partition-key-concept-of-azure-cosmos-db"></a>Вписывается ли первичный ключ в концепцию ключа секции в Azure Cosmos DB?
Да. Ключ секции используется для размещения сущности в надлежащем расположении. В Azure Cosmos DB он используется для поиска правильной логической секции, хранящейся в физической секции. Концепция секционирования подробно описана в статье [Секционирование и масштабирование в Azure Cosmos DB](partition-data.md). Из этого следует, что размер логической секции не должен превышать ограничение в 10 ГБ. 

### <a name="what-happens-when-i-get-a-quota-full-notification-indicating-that-a-partition-is-full"></a>Что происходит при получении уведомления о достижении квоты, информирующего о заполнении секции?
Azure Cosmos DB — это система на основе соглашений об уровне обслуживания, которая предоставляет неограниченные возможности масштабирования, а также гарантирует согласованность, низкую задержку, высокую пропускную способность и доступность. API Cassandra, входящий в ее состав, также предоставляет неограниченное хранилище данных. Это неограниченное хранилище основано на горизонтальном масштабировании данных, в котором секционирование используется как ключевая концепция. Концепция секционирования подробно описана в статье [Секционирование и масштабирование в Azure Cosmos DB](partition-data.md).

Необходимо придерживаться ограничения в 10 ГБ на число сущностей или количество элементов на логической секции. Кроме того, для обеспечения достаточной масштабируемости приложения мы рекомендуем *не* создавать секцию с высокой нагрузкой, чтобы хранить в ней все сведения и выполнять запрос этих данных. Эта ошибка может возникнуть, только если ваши данные срезаны (это значит, что в одном ключе секции находится большой объем данных, т. е. более чем 10 ГБ). Вы можете найти распределение данных, используя портал хранилища. Чтобы устранить эту ошибку, необходимо повторно создать таблицу и выбрать детальный первичный ключ (ключ секции), благодаря чему можно эффективнее распределить данные.

### <a name="is-it-possible-to-use-cassandra-api-as-key-value-store-with-millions-or-billions-of-individual-partition-keys"></a>Можно ли использовать API Cassandra в качестве хранилища пар "ключ — значение" с миллионами или миллиардами отдельных ключей секций?
За счет масштабирования хранилища в Azure Cosmos DB можно хранить неограниченный объем данных. Это не зависит от пропускной способности. Да. Вы всегда можете использовать API Cassandra для хранения и извлечения пар "ключ — значение", указав правильный первичный ключ или ключ секции. Эти отдельные ключи получают собственную логическую секцию и без проблем располагаются поверх физической секции. 

### <a name="is-it-possible-to-create-multiple-tables-with-apache-cassandra-api-of-azure-cosmos-db"></a>Возможно ли создать несколько таблиц с помощью API Apache Cassandra для Azure Cosmos DB?
Да. С помощью API Apache Cassandra можно создать несколько таблиц. Каждая из этих таблиц считается единицей измерения для пропускной способности и хранилища. 

### <a name="is-it-possible-to-create-multiple-tables-in-succession"></a>Можно ли последовательно создать несколько таблиц?
Azure Cosmos DB — это система, управляемая ресурсами, как для операций с данными, так и для действий уровня управления. Контейнеры, такие как коллекции и таблицы, представляют собой сущности среды выполнения, подготовленные для определенной пропускной способности. Быстрое создание этих контейнеров не предусмотрено и регулируется. При наличии тестов, которые немедленно удаляют или создают таблицы, попробуйте их исключить.

### <a name="what-is-maximum-number-of-tables-which-can-be-created"></a>Какое максимальное число таблиц можно создать?
Физическое ограничение на количество таблиц отсутствует. Отправьте электронное письмо по адресу [askcosmosdbcassandra@microsoft.com](mailto:askcosmosdbcassandra@microsoft.com), если вам нужно создать очень много таблиц (где постоянный общий размер превышает 10 ТБ данных) из обычных десятков или сотен. 

### <a name="what-is-the-maximum--of-keyspace-which-we-can-create"></a>Какое максимальное число ключевых пространств можно создать? 
Физическое ограничение на число ключевых пространств отсутствует, так как они представляют собой контейнеры метаданных. Отправьте электронное письмо по адресу [askcosmosdbcassandra@microsoft.com](mailto:askcosmosdbcassandra@microsoft.com), если по какой-либо причине у вас есть очень много ключевых пространств. 

### <a name="is-it-possible-to-bring-in-lot-of-data-after-starting-from-normal-table"></a>Можно ли добавить большое количество данных после начала работы с обычной таблицей? 
Объем памяти контролируется автоматически и увеличивается при увеличении объема данных. Таким образом можно уверенно импортировать требуемый объем данных без подготовки узлов и управления ими и т. д. 

### <a name="is-it-possible-to-supply-yaml-file-settings-to-configure-apache-casssandra-api-of-azure-cosmos-db-behavior"></a>Возможно ли предоставить параметры файла yaml для настройки API Apache Cassandra, чтобы изменить поведение Azure Cosmos DB?
API Apache Cassandra для Azure Cosmos DB — это служба платформы. Она предоставляет совместимость на уровне протокола для выполнения операций, а также упрощает управление, мониторинг и конфигурацию. Разработчику и пользователю не нужно беспокоиться о доступности, отметках полного удаления, кэше ключей, кэше строк, фильтрах Блума и множестве других настроек. API Apache Cassandra для Azure Cosmos DB ориентирован на обеспечение требуемой производительности операций чтения и записи без увеличения затрат на конфигурацию и управление.

### <a name="will-apache-cassandra-api-for-azure-cosmos-db-support-node-additioncluster-statusnode-status-commands"></a>Будет ли API Apache Cassandra для Azure Cosmos DB поддерживать команды добавления узла, состояния кластера и состояния узла?
Apache Cassandra API — это платформа, обеспечивающая простое планирование мощности и отвечающая требованиям к эластичности для высокой пропускной способности и хранения. С помощью Azure Cosmos DB можно обеспечить требуемую пропускную способность. Затем можно увеличивать и уменьшать масштаб множество раз в течение дня, не беспокоясь о добавлении узлов, их удалении и управлении ими. Это означает, что использовать узел и средство управления кластером не нужно. 

### <a name="what-happens-with-respect-to-various-config-settings-for-keyspace-creation-like-simplenetwork"></a>Что происходит с различными настройками конфигурации (например, простая сеть) для создания пространств ключей?
Azure Cosmos DB обеспечивает готовое глобальное распределение для обеспечения высокой доступности и низкой задержки. Настройка реплики и многого другого не требуется. Все операции записи всегда надежно фиксируются кворумом в любом регионе, в котором выполняется запись, при этом обеспечивается высокая производительность.  

### <a name="what-happens-with-respect-to-various-settings-for-table-metadata-like-bloom-filter-caching-read-repair-change-gcgrace-compression-memtableflushperiod-etc"></a>Что происходит с различными настройками метаданных таблицы, такими как фильтры Блума, кэширование, изменение разрешения конфликтов при чтении gc_grace и сжатие memtable_flush_period и т. д.?
Azure Cosmos DB обеспечивает высокую производительность операций чтения и записи и пропускную способность без необходимости настроек каких-либо параметров конфигурации и риска их случайного изменения.  

### <a name="is-time-to-live-ttl-supported-for-cassandra-tables"></a>Поддерживается ли срок жизни (TTL) для таблиц Cassandra? 
Да, TTL поддерживается. 

### <a name="is-it-possible-to-monitor-node-status-replica-status-gc-and-os-parameters-earlier-with-various-tools-what-needs-to-be-monitored-now"></a>Возможно ли контролировать состояние узла, состояние реплики, сборку мусора и параметры ОС ранее с помощью различных средств? Что нужно отслеживать сейчас?
Служба платформы Azure Cosmos DB помогает повысить производительность и не беспокоиться об управлении инфраструктурой и ее мониторинге. Следует позаботиться о пропускной способности, которая доступна в метриках портала, если выполняется регулировка и увеличивается или уменьшается пропускная способность. Отслеживайте [соглашения об уровне обслуживания](monitor-accounts.md).
Используйте [метрики](use-metrics.md) и [журналы диагностики](logging.md).

### <a name="which-client-sdks-can-work-with-apache-cassandra-api-of-azure-cosmos-db"></a>Какие клиентские пакеты SDK можно использовать для работы с Apache Cassandra API для Azure Cosmos DB?
Клиентские драйверы пакета SDK закрытой предварительной версии Apache Cassandra, которые используют CQLv3, использовались для клиентских программ. Если вы используете другие драйверы или если у вас возникли проблемы, отправьте сообщение электронной почты по адресу [askcosmosdbcassandra@microsoft.com](mailto:askcosmosdbcassandra@microsoft.com). 

### <a name="is-composite-partition-key-supported"></a>Поддерживается ли составной ключ секции?
Да, можно использовать обычный синтаксис для создания составного ключа секции. 

### <a name="can-i-use-sstable-loader-for-data-loading"></a>Можно ли использовать загрузчик sstable для загрузки данных?
Нет, на этапе предварительной версии загрузчик sstable не поддерживается. 

### <a name="can-an-on-premises-cassandra-cluster-be-paired-with-azure-cosmos-dbs-apache-cassandra-api"></a>Может ли локальный кластер Cassandra быть сопряжен с Apache Cassandra API для Azure Cosmos DB?
На данный момент Azure Cosmos DB оптимизирована для работы с облачной средой без дополнительных расходов на операции. Если требуется связывание, отправьте электронное письмо с описанием сценария по адресу [askcosmosdbcassandra@microsoft.com](mailto:askcosmosdbcassandra@microsoft.com).

### <a name="does-cassandra-api-provide-full-backups"></a>Предоставляет ли API Cassandra полные резервные копии? 
Azure Cosmos DB предоставляет две бесплатные полные резервные копии, которые создаются каждые четыре часа во всех API. Это гарантирует, что вам не понадобится настраивать расписание резервного копирования и т. д. Если необходимо изменить срок хранения и частоту, отправьте сообщение электронной почты по адресу [askcosmosdbcassandra@microsoft.com](mailto:askcosmosdbcassandra@microsoft.com) или обратитесь в службу поддержки. Сведения о возможности резервного копирования см. в статье [Автоматическая оперативная архивация и восстановление с помощью Azure Cosmos DB](online-backup-and-restore.md). 

### <a name="how-does-the-cassandra-api-account-handle-failover-if-a-region-goes-down"></a>Как в учетной записи Cassandra API выполняется отработка отказа, если регион становится недоступен? 
Cassandra API для Azure Cosmos DB использует глобально распределенную платформу Azure Cosmos DB. Чтобы обеспечить нормальную работу приложения при простое центра обработки данных, вам нужно использовать несколько регионов для учетной записи на портале Azure Cosmos DB. См. дополнительные сведения о [разработке с использованием учетных записей Azure Cosmos DB с поддержкой нескольких регионов](regional-failover.md). Вы можете задать приоритет регионов. Дополнительные сведения см. в статье [Автоматическая отработка отказа между регионами для обеспечения непрерывности бизнес-процессов в DocumentDB](regional-failover.md). 

Вы можете не только добавить любое нужное число регионов для учетной записи, но и управлять тем, в какой регион будет выполняться отработка отказа, настроив приоритет для этой процедуры. Чтобы использовать базу данных, вам также нужно предоставить приложение. Но этот простой не отразится на работе клиентов. 

### <a name="does-the-apache-cassandra-api-index-all-attributes-of-an-entity-by-default"></a>Индексирует ли Apache Cassandra API все атрибуты сущности по умолчанию?
Да, по умолчанию Azure Cosmos DB индексирует все атрибуты сущности. См. дополнительные сведения о [политиках индексации Azure Cosmos DB](indexing-policies.md). Вы получаете преимущества гарантированной производительности с согласованным индексированием и надежной фиксацией в кворуме. 

### <a name="does-this-mean-i-do-not-have-to-create-multiple-indexes-to-satisfy-the-queries"></a>Значит ли это, что мне не нужно создавать разные индексы для запросов? 
Да, Azure Cosmos DB обеспечивает автоматическое индексирование всех атрибутов без определения схемы. Таким образом, разработчик может сосредоточиться на приложении, не беспокоясь о создании индексов и управлении ими. См. дополнительные сведения о [политиках индексации Azure Cosmos DB](indexing-policies.md).

### <a name="can-i-use-the-new-cassandra-api-sdk-locally-with-the-emulator"></a>Можно ли использовать пакет SDK для Cassandra API локально с эмулятором?
Мы планируем реализовать поддержку этой возможности в будущем. 

### <a name="azure-cosmos-db-as-a-platform-seems-to-have-lot-of-capabilities-such-as-changefeed-and-other-functionality-will-these-capabilities-be-added-to-the-cassandra-api"></a>Azure Cosmos DB как платформа предоставляет разные возможности, включая веб-канал изменений и пр. Будут ли эти возможности добавлены в API Cassandra? 
API Apache Cassandra предоставляет те же функциональные возможности CQL, что и Apache Cassandra. Мы планируем рассмотреть вопрос реализации поддержки различных функциональных возможностей в будущем.

### <a name="feature-x-of-regular-cassandra-api-is-not-working-as-today-where-can-the-feedback-be-provided"></a>Функция x обычного API Cassandra не работает. Где можно оставить отзыв?
Оставьте отзыв на сайте [отзывов uservoice](https://feedback.azure.com/forums/263030-azure-cosmos-db).

[azure-portal]: https://portal.azure.com
[query]: sql-api-sql-query.md
