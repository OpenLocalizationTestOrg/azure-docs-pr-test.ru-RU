---
title: "Azure Cosmos DB: API .NET для SQL SDK и ресурсы | Документы Microsoft"
description: "Дополнительные сведения о SQL .NET API и SDK, включая даты выхода, даты выбытия и изменения, выполняемые на каждой версии пакета SDK .NET Azure DB Cosmos."
services: cosmos-db
documentationcenter: .net
author: rnagpal
manager: jhubbard
editor: cgronlun
ms.assetid: 8e239217-9085-49f5-b0a7-58d6e6b61949
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 11/17/2017
ms.author: rnagpal
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: fb6937cc0fc744d6e3a783d77b2a16b6fc09f3bf
ms.sourcegitcommit: 821b6306aab244d2feacbd722f60d99881e9d2a4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/18/2017
---
# <a name="azure-cosmos-db-net-sdk-for-sql-api-download-and-release-notes"></a>Azure SDK .NET DB Cosmos для API-Интерфейсы SQL: загрузка и заметки о выпуске
> [!div class="op_single_selector"]
> * [.NET](sql-api-sdk-dotnet.md)
> * [Веб-канал изменений в .NET](sql-api-sdk-dotnet-changefeed.md)
> * [.NET Core](sql-api-sdk-dotnet-core.md)
> * [Node.js](sql-api-sdk-node.md)
> * [Java](sql-api-sdk-java.md)
> * [Python](sql-api-sdk-python.md)
> * [REST](https://docs.microsoft.com/rest/api/documentdb/)
> * [Поставщик ресурсов REST](https://docs.microsoft.com/rest/api/documentdbresourceprovider/)
> * [SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx)
> 
> 

[!INCLUDE [cosmos-db-sql-api](../../includes/cosmos-db-sql-api.md)]

<table>

<tr><td>**Скачивание пакета SDK**</td><td>[NuGet](https://www.nuget.org/packages/Microsoft.Azure.DocumentDB/)</td></tr>

<tr><td>**Документация по API**</td><td>[Справочная документация по API .NET](/dotnet/api/overview/azure/cosmosdb?view=azure-dotnet)</td></tr>

<tr><td>**Примеры**</td><td>[Примеры кода для .NET](sql-api-dotnet-samples.md)</td></tr>

<tr><td>**Начало работы**</td><td>[Azure Cosmos DB. Приступая к работе с API DocumentDB](sql-api-get-started.md)</td></tr>

<tr><td>**Учебник по веб-приложениям**</td><td>[Руководство по ASP.NET MVC. Разработка веб-приложений в Azure Cosmos DB](sql-api-dotnet-application.md)</td></tr>

<tr><td>**Текущая поддерживаемая платформа**</td><td>[Microsoft .NET Framework 4.5](https://www.microsoft.com/download/details.aspx?id=30653)</td></tr>
</table></br>

## <a name="release-notes"></a>Заметки о выпуске
### <a name="a-name11911191"></a><a name="1.19.1"/>1.19.1

* Добавлена возможность указывать уникальные индексы для документов с помощью применения свойства UniqueKeyPolicy к коллекции DocumentCollection.
* Исправлена ошибка, когда пользовательские параметры JsonSerializer не учитывались при выполнении некоторых запросов и хранимых процедур.

### <a name="a-name11901190"></a><a name="1.19.0"/>1.19.0

* Изменена фирменная символика с Azure DocumentDB на Azure Cosmos DB в справочной документации по API, сведениях о метаданных в сборках и пакете NuGet. 
* Предоставлены данные диагностики и сведения о задержке ответов на запросы, отправленные в режиме прямого соединения. Имена свойств: RequestDiagnosticsString и RequestLatency в классе ResourceResponse.
* Для этой версии пакета SDK требуется последняя версия эмулятора Azure Cosmos DB. Ее можно скачать по адресу https://aka.ms/cosmosdb-emulator. 

### <a name="a-name11811181"></a><a name="1.18.1"/>1.18.1 

* Внутренние изменения в системных сборках друзей корпорации Microsoft.

### <a name="a-name11801180"></a><a name="1.18.0"/>1.18.0 

* Добавлено несколько исправлений и улучшений для повышения надежности.

### <a name="a-name11701170"></a><a name="1.17.0"/>1.17.0 

* Добавлена поддержка PartitionKeyRangeId как FeedOption для ограничения области результатов запроса определенным диапазоном ключа секции. 
* Добавлена поддержка StartTime как ChangeFeedOption для поиска изменений после указанного периода.

### <a name="a-name11611161"></a><a name="1.16.1"/>1.16.1
* Устранена проблема в классе JsonSerializable, которая могла порождать исключение переполнения стека.

### <a name="a-name11601160"></a><a name="1.16.0"/>1.16.0
*   Устранена проблема, при которой требовалась повторная компиляция приложения из-за добавления JsonSerializerSettings в качестве необязательного параметра в конструкторе DocumentClient.
* Помечено как устаревшее требование конструктора DocumentClient, из-за которого при передаче параметра JsonSerializerSettings этот параметр должен был указываться как последний параметр для разрешения значений по умолчанию параметров ConnectionPolicy и ConsistencyLevel.

### <a name="a-name11501150"></a><a name="1.15.0"/>1.15.0
*   Добавлена поддержка для указания пользовательских параметров JsonSerializerSettings при создании экземпляра [DocumentClient](/dotnet/api/microsoft.azure.documents.client.documentclient?view=azure-dotnet).

### <a name="a-name11411141"></a><a name="1.14.1"/>1.14.1
*   Устранена проблема, затронутых x64 машин, которые не поддерживают инструкции SSE4 и вызывать SEHException при выполнении запросов базы данных SQL Azure Cosmos.

### <a name="a-name11401140"></a><a name="1.14.0"/>1.14.0
*   Добавлена поддержка нового уровня согласованности с именем ConsistentPrefix.
*   Добавлена поддержка запроса метрик отдельных секций.
*   Добавлена поддержка ограничения размера маркера продолжения запросов.
*   Добавлена поддержка более подробной трассировки невыполненных запросов.
*   Внесены некоторые улучшения производительности в пакет SDK.

### <a name="a-name11341134"></a><a name="1.13.4"/>1.13.4
* Функционально эквивалентно 1.13.3. Внесен ряд внутренних изменений.

### <a name="a-name11331133"></a><a name="1.13.3"/>1.13.3
* Функционально эквивалентно 1.13.2. Внесен ряд внутренних изменений.

### <a name="a-name11321132"></a><a name="1.13.2"/>1.13.2
* Устранена проблема, когда не учитывалось значение PartitionKey в FeedOptions для статистических запросов.
* Устранена проблема, связанная с прозрачной обработкой управления при промежуточном выполнении запроса Order By между разделами.

### <a name="a-name11311131"></a><a name="1.13.1"/>1.13.1
* Исправлена проблема, вызывавшая взаимоблокировки в некоторых асинхронных интерфейсах API при использовании в контексте ASP.NET.

### <a name="a-name11301130"></a><a name="1.13.0"/>1.13.0
* Исправления для повышения устойчивости пакета SDK к автоматической отработке отказа при определенных условиях.

### <a name="a-name11221122"></a><a name="1.12.2"/>1.12.2
* Исправление ошибки, приводившей к исключению WebException: "Удаленное имя не удалось разрешить".
* Добавлена поддержка непосредственного считывания типизированного документа путем добавления новых перегрузок в API ReadDocumentAsync.

### <a name="a-name11211121"></a><a name="1.12.1"/>1.12.1
* Добавлена поддержка LINQ для статистических запросов (COUNT, MIN, MAX, SUM и AVG).
* Исправление ошибки утечки памяти для объекта ConnectionPolicy, вызываемой использованием обработчика событий.
* Исправление ошибки, из-за которой метод UpsertAttachmentAsync не работал, когда использовался тег ETag.
* Исправление ошибки, из-за которой продолжение запросов orderBy между секциями не работало при сортировке по полю строки.

### <a name="a-name11201120"></a><a name="1.12.0"/>1.12.0
* Добавлена поддержка статистических запросов (COUNT, MIN, MAX, SUM и AVG). Дополнительные сведения см. в разделе [Статистические функции](sql-api-sql-query.md#Aggregates).
* Минимальная пропускная способность секционированных коллекций снижена с 10 100 ЕЗ/с до 2500 ЕЗ/с.

### <a name="a-name11141114"></a><a name="1.11.4"/>1.11.4
* Исправление ошибки, из-за которой происходил сбой некоторых запросов между секциями в 32-разрядном хост-процессе.
* Исправление ошибки, из-за которой в контейнере сеанса не обновлялся маркер для неудачных запросов в режиме шлюза.
* Исправление ошибки, из-за которой в некоторых случаях запрос с вызовами UDF в проекции завершался сбоем.
* Исправление производительности на стороне клиента для увеличения пропускной способности операций чтения и записи запросов.

### <a name="a-name11131113"></a><a name="1.11.3"/>1.11.3
* Исправление ошибки, из-за которой в контейнере сеанса не обновлялся маркер для неудачных запросов.
* Добавлена поддержка для работы пакета SDK в 32-разрядных хост-процессах. Обратите внимание, что при использовании запросов между секциями для повышения производительности рекомендуется использовать 64-разрядные хост-процессы.
* Повышена производительность для сценариев, применяющих запросы с большим количеством значений ключа секции в выражении IN.
* Заполнена статистика по различным квотам ресурсов в ResourceResponse для запросов на чтение коллекции документов, если задан параметр запроса PopulateQuotaInfo.

### <a name="a-name11111111"></a><a name="1.11.1"/>1.11.1
* Незначительное исправление производительности API CreateDocumentCollectionIfNotExistsAsync, представленного в 1.11.0.
* Исправление производительности в пакете SDK для сценариев, предполагающих большое количество одновременных запросов.

### <a name="a-name11101110"></a><a name="1.11.0"/>1.11.0
* Поддержка новых классов и методов для обработки [веб-канала изменений](change-feed.md) документов в коллекции.
* Поддержка продолжения запросов между секциями и некоторые улучшения производительности запросов между секциями.
* Добавление методов CreateDatabaseIfNotExistsAsync и CreateDocumentCollectionIfNotExistsAsync.
* Поддержка LINQ для системных функций: IsDefined, IsNull и IsPrimitive.
* Исправление автоматического переноса сборок Microsoft.Azure.Documents.ServiceInterop.dll и DocumentDB.Spatial.Sql.dll в папку bin приложения посредством BinPlace, если используется пакет NuGet с проектами, которые содержат инструменты project.json.
* Поддержка выдачи трассировок ETW на стороне клиента, что может быть полезно в сценариях отладки.

### <a name="a-name11001100"></a><a name="1.10.0"/>1.10.0
* Добавлена поддержка прямое подключения для секционированных коллекций.
* Повышена производительность для уровня согласованности с ограниченным устареванием.
* Добавлены типы данных Polygon и LineString и задана политика индексирования коллекций для запросов пространственных геозон.
* Добавлена поддержка LINQ для StringEnumConverter, IsoDateTimeConverter и UnixDateTimeConverter при преобразовании предикатов.
* Исправлены различные ошибки в пакете SDK.

### <a name="a-name195195"></a><a name="1.9.5"/>1.9.5
* Устранена проблема, которая вызвала следующее исключение NotFoundException: "The read session is not available for the input session token" (Сеанс чтения для входного маркера сеанса недоступен). Это исключение иногда происходило при выполнении запроса к региону чтения геораспределенной учетной записи.
* В классе ResourceResponse предоставляется свойство ResponseStream, которое обеспечивает прямой доступ к базовому потоку из ответа.

### <a name="a-name194194"></a><a name="1.9.4"/>1.9.4
* Классы ResourceResponse, FeedResponse, StoredProcedureResponse и MediaResponse изменены для реализации соответствующего открытого интерфейса. Теперь их можно макетировать для развертывания через тестирование (TDD).
* Устранена проблема, из-за которой заголовок ключа секции имел неправильный формат при использовании пользовательского объекта JsonSerializerSettings для сериализации данных.

### <a name="a-name193193"></a><a name="1.9.3"/>1.9.3
* Устранена проблема, из-за которой длительные запросы завершались сбоем и отображалось сообщение об ошибке "Authorization token is not valid at the current time" (Маркер авторизации в настоящее время недействителен).
* Устранена проблема, из-за которой исходный параметр SqlParameterCollection удалялся из запросов top/order-by между секциями.

### <a name="a-name192192"></a><a name="1.9.2"/>1.9.2
* Добавлена поддержка параллельных запросов для секционированных коллекций.
* Добавлена поддержка запросов ORDER BY и TOP между секциями для секционированных коллекций.
* Исправлено отсутствие ссылок на файлы DocumentDB.Spatial.Sql.dll и Microsoft.Azure.Documents.ServiceInterop.dll, которые необходимы при указании ссылки на проектAzure Cosmos DB со ссылкой на пакет Nuget для Azure Cosmos DB.
* Добавлена возможность использования параметров различных типов, когда применяются определяемые пользователем функции в LINQ. 
* Исправлена ошибка в глобально реплицируемых учетных записях, где вызовы Upsert направлялись в расположения для чтения, а не расположения для записи.
* В интерфейс IDocumentClient добавлены методы, которые отсутствовали: 
  * UpsertAttachmentAsync, который принимает в качестве параметров mediaStream и варианты;
  * CreateAttachmentAsync, который принимает в качестве параметра варианты;
  * и CreateOfferQuery, который принимает в качестве параметра querySpec.
* Открыты общие классы, которые доступны в интерфейсе IDocumentClient.

### <a name="a-name180180"></a><a name="1.8.0"/>1.8.0
* Добавлена поддержка учетных записей базы данных в нескольких регионах.
* Добавлена поддержка повтора отрегулированных запросов.  Пользователь может задать число повторов и максимальное время ожидания, настроив свойство ConnectionPolicy.RetryOptions.
* Добавлен новый интерфейс IDocumentClient, который определяет сигнатуры всех свойств и методов DocumenClient.  В ходе этого изменения были также изменены методы расширения, которые создают IQueryable и IOrderedQueryable для методов в самом классе DocumentClient.
* Добавлен параметр конфигурации, позволяющий указать ServicePoint.ConnectionLimit для заданного универсального кода ресурса (URI) конечной точки Azure Cosmos DB.  Используйте ConnectionPolicy.MaxConnectionLimit, чтобы изменить значение по умолчанию, которое равно 50.
* Не рекомендуется использовать IPartitionResolver и его реализацию.  Теперь поддержка IPartitionResolver устарела. Рекомендуется использовать секционированные коллекции, чтобы увеличить возможности хранилища и пропускную способность.

### <a name="a-name171171"></a><a name="1.7.1"/>1.7.1
* Добавлена перегрузка метода ExecuteStoredProcedureAsync на основе универсального кода ресурса (URI), принимающего RequestOptions в качестве параметра.

### <a name="a-name170170"></a><a name="1.7.0"/>1.7.0
* Добавлена поддержка срока жизни для документов.

### <a name="a-name163163"></a><a name="1.6.3"/>1.6.3
* Исправлена ошибка в упаковке Nuget пакета SDK для .NET, связанная с его упаковкой в составе решения облачной службы Azure.

### <a name="a-name162162"></a><a name="1.6.2"/>1.6.2
* Реализованы [секционированные коллекции](partition-data.md) и [определяемые пользователем уровни производительности](performance-levels.md). 

### <a name="a-name153153"></a><a name="1.5.3"/>1.5.3
* **[Исправлено]**. Запрос к конечной точке Azure Cosmos DB приводит к появлению исключения "System.Net.Http.HttpRequestException: произошла ошибка при копировании содержимого в поток".

### <a name="a-name152152"></a><a name="1.5.2"/>1.5.2
* Расширенная поддержка LINQ, включая новые операторы разбиения по страницам, условные выражения и сравнение диапазонов.
  * Оператор Take, позволяющий выполнить операцию SELECT TOP в LINQ.
  * Оператор CompareTo, позволяющий сравнивать диапазоны строк.
  * Условный оператор (?) и оператор объединения (??).
* **[Исправлено]**. Порождение исключения ArgumentOutOfRangeException при комбинировании проекции Model с Where-In в запросе LINQ. [№ 81](https://github.com/Azure/azure-documentdb-dotnet/issues/81)

### <a name="a-name151151"></a><a name="1.5.1"/>1.5.1
* **[Исправлено]** Если операция Select не является последней, поставщик LINQ не использовал проекции и неверно определял операцию SELECT *.  [#58](https://github.com/Azure/azure-documentdb-dotnet/issues/58)

### <a name="a-name150150"></a><a name="1.5.0"/>1.5.0
* Реализован метод Upsert, добавлен метод UpsertXXXAsync.
* Повышение производительности для всех запросов.
* Поддержка поставщиком LINQ условных операций, функций объединения и методов CompareTo для строковых значений.
* **[Исправлено]**. Поставщик LINQ: реализация метода Contains для списков для создания таких же запросов SQL, как для IEnumerable и массивов.
* **[Исправлено]** BackoffRetryUtility повторно использует то же сообщение HttpRequestMessage вместо создания нового при повторной попытке.
* **[Устарело]**. UriFactory.CreateCollection: теперь следует использовать UriFactory.CreateDocumentCollection.

### <a name="a-name141141"></a><a name="1.4.1"/>1.4.1
* **[Исправлено]**. Проблемы локализации при использовании региональных параметров, отличных от en, например nl-NL и т. д. 

### <a name="a-name140140"></a><a name="1.4.0"/>1.4.0
* Добавлена маршрутизация на основе идентификаторов
  * Новый вспомогательный класс UriFactory для создания ссылок на ресурсы на основании идентификатора.
  * Новые перегрузки в классе DocumentClient, принимающие URI в качестве параметров.
* Для геопространственных данных в LINQ добавлены методы IsValid() и IsValidDetailed().
* Улучшена поддержка поставщика LINQ:
  * **Математические функции:** Abs, Acos, Asin, Atan, Ceiling, Cos, Exp, Floor, Log, Log10, Pow, Round, Sign, Sin, Sqrt, Tan, Truncate.
  * **Строковые функции:** Concat, Contains, EndsWith, IndexOf, Count, ToLower, TrimStart, Replace, Reverse, TrimEnd, StartsWith, SubString, ToUpper.
  * **Функции массивов:** Concat, Contains, Count.
  * **IN** .

### <a name="a-name130130"></a><a name="1.3.0"/>1.3.0
* Добавлена поддержка изменения политики индексации.
  * Новый метод ReplaceDocumentCollectionAsync в классе DocumentClient.
  * Новое свойство IndexTransformationProgress в ResourceResponse<T> для отслеживания процесса изменения политики индексирования (в процентах).
  * Свойство DocumentCollection.IndexingPolicy теперь является изменяемым.
* Добавлена поддержка индексирования и создания запросов к пространственным типам данных.
  * Новое пространство имен Microsoft.Azure.Documents.Spatial для сериализации и десериализации пространственных типов, таких как Point и Polygon.
  * Новый класс SpatialIndex для индексирования данных GeoJSON, хранящихся в Cosmos DB.
* **[Исправлено]** Неправильный SQL-запрос из выражения LINQ [#38](https://github.com/Azure/azure-documentdb-net/issues/38).

### <a name="a-name120120"></a><a name="1.2.0"/>1.2.0
* Добавлена зависимость от Newtonsoft.Json 5.0.7.
* Внесены изменения для поддержки Order By:
  
  * Поставщик LINQ поддерживает OrderBy() или OrderByDescending().
  * IndexingPolicy поддерживает Order By. 
    
    **Изменение может быть критическим**. 
    
    Если имеется существующий код, который предоставляет коллекции с пользовательской политикой индексирования, то он должен быть обновлен и должен поддерживать новый класс IndexingPolicy. Если такой политики нет, это изменение на вас не влияет.

### <a name="a-name110110"></a><a name="1.1.0"/>1.1.0
* Добавлены новые классы HashPartitionResolver и RangePartitionResolver и интерфейс IPartitionResolver для поддержки секционирования данных.
* Добавлена сериализация DataContract.
* Добавлена поддержка GUID в поставщике LINQ.
* Добавлена поддержка пользовательских функций в LINQ.

### <a name="a-name100100"></a><a name="1.0.0"/>1.0.0
* Пакет SDK общей доступности.

## <a name="release--retirement-dates"></a>Даты выпуска и выбытия
Корпорация Майкрософт отправляет уведомление минимум за **12 месяцев** до вывода пакета SDK из эксплуатации, чтобы обеспечить более плавный переход на новую или поддерживаемую версию.

Новые функции, возможности и оптимизации добавляются только в текущую версию пакета SDK, поэтому рекомендуется как можно раньше обновлять пакет SDK до последней версии. 

Любые запросы к базе данных Azure Cosmos DB с помощью выведенного из эксплуатации пакета SDK отклоняются службой.

<br/>

| Version (версия) | Дата выпуска | Дата вывода |
| --- | --- | --- |
| [1.19.1](#1.19.1) |16 ноября 2017 г. |--- |
| [1.19.0](#1.19.0) |10 ноября 2017 г. |--- |
| [1.18.1](#1.18.1) |7 ноября 2017 г. |--- |
| [1.18.0](#1.18.0) |17 октября 2017 г. |--- |
| [1.17.0](#1.17.0) |10 августа 2017 г. |--- |
| [1.16.1](#1.16.1) |7 августа 2017 г. |--- |
| [1.16.0](#1.16.0) |2 августа 2017 г. |--- |
| [1.15.0](#1.15.0) |30 июня 2017 г. |--- |
| [1.14.1](#1.14.1) |23 мая 2017 г. |--- |
| [1.14.0](#1.14.0) |10 мая 2017 г. |--- |
| [1.13.4](#1.13.4) |09 мая 2017 г. |--- |
| [1.13.3](#1.13.3) |06 мая 2017 г. |--- |
| [1.13.2](#1.13.2) |19 апреля 2017 г. |--- |
| [1.13.1](#1.13.1) |29 марта 2017 г. |--- |
| [1.13.0](#1.13.0) |24 марта 2017 г. |--- |
| [1.12.2](#1.12.2) |20 марта 2017 г. |--- |
| [1.12.1](#1.12.1) |14 марта 2017 г. |--- |
| [1.12.0](#1.12.0) |15 февраля 2017 г. |--- |
| [1.11.4](#1.11.4) |6 февраля 2017 г. |--- |
| [1.11.3](#1.11.3) |26 января 2017 г. |--- |
| [1.11.1](#1.11.1) |21 декабря 2016 г. |--- |
| [1.11.0](#1.11.0) |8 декабря 2016 г. |--- |
| [1.10.0](#1.10.0) |27 сентября 2016 г. |--- |
| [1.9.5](#1.9.5) |1 сентября 2016 г. |--- |
| [1.9.4](#1.9.4) |24 августа 2016 г. |--- |
| [1.9.3](#1.9.3) |15 августа 2016 г. |--- |
| [1.9.2](#1.9.2) |23 июля 2016 г. |--- |
| [1.8.0](#1.8.0) |14 июня 2016 г. |--- |
| [1.7.1](#1.7.1) |6 мая 2016 г. |--- |
| [1.7.0](#1.7.0) |26 апреля 2016 г. |--- |
| [1.6.3](#1.6.3) |8 апреля 2016 г. |--- |
| [1.6.2](#1.6.2) |29 марта 2016 г. |--- |
| [1.5.3](#1.5.3) |19 февраля 2016 г. |--- |
| [1.5.2](#1.5.2) |14 декабря 2015 г. |--- |
| [1.5.1](#1.5.1) |23 ноября 2015 г. |--- |
| [1.5.0](#1.5.0) |5 октября 2015 г. |--- |
| [1.4.1](#1.4.1) |25 августа 2015 г. |--- |
| [1.4.0](#1.4.0) |13 августа 2015 г. |--- |
| [1.3.0](#1.3.0) |5 августа 2015 г. |--- |
| [1.2.0](#1.2.0) |6 июля 2015 г. |--- |
| [1.1.0](#1.1.0) |30 апреля 2015 г. |--- |
| [1.0.0](#1.0.0) |8 апреля 2015 г. |--- |


## <a name="faq"></a>Часто задаваемые вопросы
[!INCLUDE [cosmos-db-sdk-faq](../../includes/cosmos-db-sdk-faq.md)]

## <a name="see-also"></a>См. также
Дополнительные сведения о Cosmos DB см. на странице службы [Microsoft Azure Cosmos DB](https://azure.microsoft.com/services/cosmos-db/). 

