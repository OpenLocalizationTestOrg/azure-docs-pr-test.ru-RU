---
title: "aaaAzure Cosmos DB модель ресурсов и понятия | Документы Microsoft"
description: "Дополнительные сведения о Azure Cosmos DB иерархическая модель базы данных, коллекций, определяемые пользователем функции (UDF), документы, разрешения toomanage ресурсы и многое другое."
keywords: "Иерархическая модель, cosmosdb, azure, Microsoft Azure"
services: cosmos-db
documentationcenter: 
author: AndrewHoh
manager: jhubbard
editor: monicar
ms.assetid: ef9d5c0c-0867-4317-bb1b-98e219799fd5
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/24/2017
ms.author: anhoh
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: fc3642232b86cc27901ebd97456c386829324632
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cosmos-db-hierarchical-resource-model-and-core-concepts"></a><span data-ttu-id="3a066-104">Ключевые понятия и иерархическая модель ресурсов в Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="3a066-104">Azure Cosmos DB hierarchical resource model and core concepts</span></span>
<span data-ttu-id="3a066-105">Hello сущностей базы данных, которыми управляет Azure Cosmos DB, который ссылается tooas **ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="3a066-105">hello database entities that Azure Cosmos DB manages are referred tooas **resources**.</span></span> <span data-ttu-id="3a066-106">Каждый ресурс однозначно идентифицируется своими логическим URI.</span><span class="sxs-lookup"><span data-stu-id="3a066-106">Each resource is uniquely identified by a logical URI.</span></span> <span data-ttu-id="3a066-107">Вы можете взаимодействовать с ресурсами hello, с помощью стандартных команд HTTP, заголовки запросов и ответов и коды состояния.</span><span class="sxs-lookup"><span data-stu-id="3a066-107">You can interact with hello resources using standard HTTP verbs, request/response headers and status codes.</span></span> 

<span data-ttu-id="3a066-108">Считывает в этой статье, вы будете иметь доступ tooanswer hello следующие вопросы:</span><span class="sxs-lookup"><span data-stu-id="3a066-108">By reading this article, you'll be able tooanswer hello following questions:</span></span>

* <span data-ttu-id="3a066-109">Что такое модель ресурсов Cosmos DB?</span><span class="sxs-lookup"><span data-stu-id="3a066-109">What is Cosmos DB's resource model?</span></span>
* <span data-ttu-id="3a066-110">Что такое системные ресурсам, определенным в противоположность toouser определенных ресурсов?</span><span class="sxs-lookup"><span data-stu-id="3a066-110">What are system defined resources as opposed toouser defined resources?</span></span>
* <span data-ttu-id="3a066-111">Как получить доступ к ресурсу?</span><span class="sxs-lookup"><span data-stu-id="3a066-111">How do I address a resource?</span></span>
* <span data-ttu-id="3a066-112">Как работать с коллекциями?</span><span class="sxs-lookup"><span data-stu-id="3a066-112">How do I work with collections?</span></span>
* <span data-ttu-id="3a066-113">Как работать с хранимыми процедурами, триггерами и пользовательскими функциями?</span><span class="sxs-lookup"><span data-stu-id="3a066-113">How do I work with stored procedures, triggers and User Defined Functions (UDFs)?</span></span>

## <a name="hierarchical-resource-model"></a><span data-ttu-id="3a066-114">Иерархическая модель ресурсов</span><span class="sxs-lookup"><span data-stu-id="3a066-114">Hierarchical resource model</span></span>
<span data-ttu-id="3a066-115">Как hello показано на рисунке, hello Cosmos DB иерархические **модель ресурсов** состоят из наборов ресурсами под учетной записью базы данных, каждый адресуемых через URI логических и стабильности.</span><span class="sxs-lookup"><span data-stu-id="3a066-115">As hello following diagram illustrates, hello Cosmos DB hierarchical **resource model** consists of sets of resources under a database account, each addressable via a logical and stable URI.</span></span> <span data-ttu-id="3a066-116">Набор ресурсов будет ссылка tooas **канала** в этой статье.</span><span class="sxs-lookup"><span data-stu-id="3a066-116">A set of resources will be referred tooas a **feed** in this article.</span></span> 

> [!NOTE]
> <span data-ttu-id="3a066-117">Azure Cosmos DB предлагает высокоэффективные протокол TCP, который также является категории RESTful в его модель взаимодействия, доступные через hello [API клиента DocumentDB .NET](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-117">Azure Cosmos DB offers a highly efficient TCP protocol which is also RESTful in its communication model, available through hello [DocumentDB .NET client API](documentdb-sdk-dotnet.md).</span></span>
> 
> 

<span data-ttu-id="3a066-118">![Иерархическая модель ресурсов в Azure Cosmos DB][1]</span><span class="sxs-lookup"><span data-stu-id="3a066-118">![Azure Cosmos DB hierarchical resource model][1]</span></span>  
<span data-ttu-id="3a066-119">**Иерархическая модель ресурсов.**</span><span class="sxs-lookup"><span data-stu-id="3a066-119">**Hierarchical resource model**</span></span>   

<span data-ttu-id="3a066-120">Работа с ресурсами, toostart необходимо [создать учетную запись базы данных](create-documentdb-dotnet.md) с помощью вашей подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="3a066-120">toostart working with resources, you must [create a database account](create-documentdb-dotnet.md) using your Azure subscription.</span></span> <span data-ttu-id="3a066-121">Учетная запись базы данных может состоять из набора **баз данных**, каждая из которых содержит несколько **коллекций**, каждая из которых, в свою очередь, содержит **хранимые процедуры, триггеры, определяемые пользователем функции, документы** и соответствующие **вложения**.</span><span class="sxs-lookup"><span data-stu-id="3a066-121">A database account can consist of a set of **databases**, each containing multiple **collections**, each of which in turn contain **stored procedures, triggers, UDFs, documents** and related **attachments**.</span></span> <span data-ttu-id="3a066-122">Базы данных также связанный **пользователей**, каждый из которых набор **разрешений** tooaccess коллекций, хранимые процедуры, триггеры, определяемые пользователем функции, документы или вложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-122">A database also has associated **users**, each with a set of **permissions** tooaccess collections, stored procedures, triggers, UDFs, documents or attachments.</span></span> <span data-ttu-id="3a066-123">В то время как базы данных, пользователи, разрешения и коллекции являются определяемыми системой ресурсами с известными схемами, документы и вложения содержат произвольный, определяемый пользователем контент в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="3a066-123">While databases, users, permissions and collections are system-defined resources with well-known schemas, documents and attachments contain arbitrary, user defined JSON content.</span></span>  

| <span data-ttu-id="3a066-124">Resource (Ресурс)</span><span class="sxs-lookup"><span data-stu-id="3a066-124">Resource</span></span> | <span data-ttu-id="3a066-125">Описание</span><span class="sxs-lookup"><span data-stu-id="3a066-125">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3a066-126">Учетная запись базы данных</span><span class="sxs-lookup"><span data-stu-id="3a066-126">Database account</span></span> |<span data-ttu-id="3a066-127">Учетная запись базы данных связана с набором баз и определенным местом в хранилище больших двоичных объектов для хранения вложений.</span><span class="sxs-lookup"><span data-stu-id="3a066-127">A database account is associated with a set of databases and a fixed amount of blob storage for attachments.</span></span> <span data-ttu-id="3a066-128">Вы можете создать одну или несколько учетных записей базы данных с помощью подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="3a066-128">You can create one or more database accounts using your Azure subscription.</span></span> <span data-ttu-id="3a066-129">Дополнительные сведения см. на нашей [странице цен](https://azure.microsoft.com/pricing/details/cosmos-db/).</span><span class="sxs-lookup"><span data-stu-id="3a066-129">For more information, visit our [pricing page](https://azure.microsoft.com/pricing/details/cosmos-db/).</span></span> |
| <span data-ttu-id="3a066-130">База данных</span><span class="sxs-lookup"><span data-stu-id="3a066-130">Database</span></span> |<span data-ttu-id="3a066-131">База данных представляет собой логический контейнер для хранения документов, разделенных между коллекциями.</span><span class="sxs-lookup"><span data-stu-id="3a066-131">A database is a logical container of document storage partitioned across collections.</span></span> <span data-ttu-id="3a066-132">Она также является контейнером для пользователей.</span><span class="sxs-lookup"><span data-stu-id="3a066-132">It is also a users container.</span></span> |
| <span data-ttu-id="3a066-133">Пользователь</span><span class="sxs-lookup"><span data-stu-id="3a066-133">User</span></span> |<span data-ttu-id="3a066-134">Hello логического пространства имен для определения разрешений.</span><span class="sxs-lookup"><span data-stu-id="3a066-134">hello logical namespace for scoping permissions.</span></span> |
| <span data-ttu-id="3a066-135">Разрешение</span><span class="sxs-lookup"><span data-stu-id="3a066-135">Permission</span></span> |<span data-ttu-id="3a066-136">Маркер авторизации, связанный с пользователем для доступа tooa конкретный ресурс.</span><span class="sxs-lookup"><span data-stu-id="3a066-136">An authorization token associated with a user for access tooa specific resource.</span></span> |
| <span data-ttu-id="3a066-137">Коллекция</span><span class="sxs-lookup"><span data-stu-id="3a066-137">Collection</span></span> |<span data-ttu-id="3a066-138">Коллекция — это контейнер документов JSON и hello связанные логика приложения JavaScript.</span><span class="sxs-lookup"><span data-stu-id="3a066-138">A collection is a container of JSON documents and hello associated JavaScript application logic.</span></span> <span data-ttu-id="3a066-139">Коллекция является оплачиваемые сущности, в котором hello [стоимость](performance-levels.md) определяется hello уровень производительности, связанных с коллекцией hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-139">A collection is a billable entity, where hello [cost](performance-levels.md) is determined by hello performance level associated with hello collection.</span></span> <span data-ttu-id="3a066-140">Коллекции могут охватывать один или несколько секций или серверов и можно масштабировать toohandle практически неограниченное тома хранилища или пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3a066-140">Collections can span one or more partitions/servers and can scale toohandle practically unlimited volumes of storage or throughput.</span></span> |
| <span data-ttu-id="3a066-141">Хранимая процедура</span><span class="sxs-lookup"><span data-stu-id="3a066-141">Stored Procedure</span></span> |<span data-ttu-id="3a066-142">Логика приложения, написанная на языке JavaScript, который зарегистрирован в коллекции и выполняться транзакционно в компонент database engine hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-142">Application logic written in JavaScript which is registered with a collection and transactionally executed within hello database engine.</span></span> |
| <span data-ttu-id="3a066-143">Триггер</span><span class="sxs-lookup"><span data-stu-id="3a066-143">Trigger</span></span> |<span data-ttu-id="3a066-144">Логика приложения в виде кода JavaScript, автоматически исполняемого до или после операций вставки, замены и удаления.</span><span class="sxs-lookup"><span data-stu-id="3a066-144">Application logic written in JavaScript executed before or after either an insert, replace or delete operation.</span></span> |
| <span data-ttu-id="3a066-145">Определяемая пользователем функция</span><span class="sxs-lookup"><span data-stu-id="3a066-145">UDF</span></span> |<span data-ttu-id="3a066-146">Логика приложения на языке JavaScript.</span><span class="sxs-lookup"><span data-stu-id="3a066-146">Application logic written in JavaScript.</span></span> <span data-ttu-id="3a066-147">Определяемые пользователем функции, включите toomodel оператор пользовательского запроса и тем самым расширения языка запросов DocumentDB API core hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-147">UDFs enable you toomodel a custom query operator and thereby extend hello core DocumentDB API query language.</span></span> |
| <span data-ttu-id="3a066-148">Документ</span><span class="sxs-lookup"><span data-stu-id="3a066-148">Document</span></span> |<span data-ttu-id="3a066-149">Пользовательский (произвольный) контент JSON.</span><span class="sxs-lookup"><span data-stu-id="3a066-149">User defined (arbitrary) JSON content.</span></span> <span data-ttu-id="3a066-150">По умолчанию схема не требуются определенные toobe ни вторичных индексов нужен toobe условии для hello все документы добавляются tooa коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-150">By default, no schema needs toobe defined nor do secondary indices need toobe provided for all hello documents added tooa collection.</span></span> |
| <span data-ttu-id="3a066-151">Вложение</span><span class="sxs-lookup"><span data-stu-id="3a066-151">Attachment</span></span> |<span data-ttu-id="3a066-152">Вложение — это специальный документ, содержащий ссылки и связанные с ним метаданные ко внешним большим двоичным объектам и носителям.</span><span class="sxs-lookup"><span data-stu-id="3a066-152">An attachment is a special document containing references and associated metadata for external blob/media.</span></span> <span data-ttu-id="3a066-153">Разработчик Hello можно выбрать hello toohave больших двоичных объектов, управляется Cosmos DB или сохранить его с поставщиком услуг внешний большой двоичный объект, таких как OneDrive, Dropbox и т. д.</span><span class="sxs-lookup"><span data-stu-id="3a066-153">hello developer can choose toohave hello blob managed by Cosmos DB or store it with an external blob service provider such as OneDrive, Dropbox, etc.</span></span> |

## <a name="system-vs-user-defined-resources"></a><span data-ttu-id="3a066-154">Системные и пользовательские ресурсы</span><span class="sxs-lookup"><span data-stu-id="3a066-154">System vs. user defined resources</span></span>
<span data-ttu-id="3a066-155">Ресурсы (такие как учетные записи баз данных, базы данных, коллекции, пользователи, разрешения, хранимые процедуры, триггеры и определяемые пользователем функции) имеют статическую схему и называются системными ресурсами.</span><span class="sxs-lookup"><span data-stu-id="3a066-155">Resources such as database accounts, databases, collections, users, permissions, stored procedures, triggers, and UDFs - all have a fixed schema and are called system resources.</span></span> <span data-ttu-id="3a066-156">Ресурсы, такие как документы и вложения, напротив, не имеют ограничений на схему hello и приведены примеры ресурсов, определяемых пользователем.</span><span class="sxs-lookup"><span data-stu-id="3a066-156">In contrast, resources such as documents and attachments have no restrictions on hello schema and are examples of user defined resources.</span></span> <span data-ttu-id="3a066-157">В службе Cosmos DB системные и определяемые пользователем ресурсы представляются и управляются как стандартные, совместимые с JSON объекты.</span><span class="sxs-lookup"><span data-stu-id="3a066-157">In Cosmos DB, both system and user defined resources are represented and managed as standard-compliant JSON.</span></span> <span data-ttu-id="3a066-158">Все ресурсы, системы или определяемые пользователем, имеют следующие общие свойства hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-158">All resources, system or user defined, have hello following common properties.</span></span>

> [!NOTE]
> <span data-ttu-id="3a066-159">Обратите внимание, что все сгенерированные системой свойства в ресурсах начинаются с символа подчеркивания (_) в представлении JSON.</span><span class="sxs-lookup"><span data-stu-id="3a066-159">Note that all system generated properties in a resource are prefixed with an underscore (_) in their JSON representation.</span></span>
> 
> 

<table>
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-160"><strong>Свойство</strong></span><span class="sxs-lookup"><span data-stu-id="3a066-160"><strong>Property</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-161"><strong>Устанавливаемое пользователем или генерируемое системой?</strong></span><span class="sxs-lookup"><span data-stu-id="3a066-161"><strong>User settable or system generated?</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-162"><strong>Назначение</strong></span><span class="sxs-lookup"><span data-stu-id="3a066-162"><strong>Purpose</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-163">_rid</span><span class="sxs-lookup"><span data-stu-id="3a066-163">_rid</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-164">Генерируемое системой</span><span class="sxs-lookup"><span data-stu-id="3a066-164">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-165">Созданный системой уникальный, так и иерархическим идентификатор ресурса hello</span><span class="sxs-lookup"><span data-stu-id="3a066-165">System generated, unique and hierarchical identifier of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-166">_etag</span><span class="sxs-lookup"><span data-stu-id="3a066-166">_etag</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-167">Генерируемое системой</span><span class="sxs-lookup"><span data-stu-id="3a066-167">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-168">eTag ресурса hello, необходимые для управления оптимистичным параллелизмом</span><span class="sxs-lookup"><span data-stu-id="3a066-168">etag of hello resource required for optimistic concurrency control</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-169">_ts</span><span class="sxs-lookup"><span data-stu-id="3a066-169">_ts</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-170">Генерируемое системой</span><span class="sxs-lookup"><span data-stu-id="3a066-170">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-171">Метку времени последнего обновления ресурса hello</span><span class="sxs-lookup"><span data-stu-id="3a066-171">Last updated timestamp of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-172">_self</span><span class="sxs-lookup"><span data-stu-id="3a066-172">_self</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-173">Генерируемое системой</span><span class="sxs-lookup"><span data-stu-id="3a066-173">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-174">Уникальный адресуемый URI ресурса hello</span><span class="sxs-lookup"><span data-stu-id="3a066-174">Unique addressable URI of hello resource</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-175">id</span><span class="sxs-lookup"><span data-stu-id="3a066-175">id</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-176">Генерируемое системой</span><span class="sxs-lookup"><span data-stu-id="3a066-176">System generated</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-177">Определяемые пользователем уникальное имя ресурса hello (с hello же секции для значения ключа использования).</span><span class="sxs-lookup"><span data-stu-id="3a066-177">User defined unique name of hello resource (with hello same partition key value).</span></span> <span data-ttu-id="3a066-178">Если пользователь hello не указан идентификатор, идентификатор будет созданный системой</span><span class="sxs-lookup"><span data-stu-id="3a066-178">If hello user does not specify an id, an id will be system generated</span></span></p></td>
        </tr>
    </tbody>
</table>

### <a name="wire-representation-of-resources"></a><span data-ttu-id="3a066-179">Сетевое представление ресурсов</span><span class="sxs-lookup"><span data-stu-id="3a066-179">Wire representation of resources</span></span>
<span data-ttu-id="3a066-180">Cosmos DB не требует собственных расширений toohello JSON стандартных или специальных кодировкам; она работает с стандартных совместимые документов JSON.</span><span class="sxs-lookup"><span data-stu-id="3a066-180">Cosmos DB does not mandate any proprietary extensions toohello JSON standard or special encodings; it works with standard compliant JSON documents.</span></span>  

### <a name="addressing-a-resource"></a><span data-ttu-id="3a066-181">Адресация ресурса</span><span class="sxs-lookup"><span data-stu-id="3a066-181">Addressing a resource</span></span>
<span data-ttu-id="3a066-182">Все ресурсы можно адресовать по URI.</span><span class="sxs-lookup"><span data-stu-id="3a066-182">All resources are URI addressable.</span></span> <span data-ttu-id="3a066-183">Здравствуйте, значение hello **_self** свойство ресурса представляет hello относительный URI ресурса hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-183">hello value of hello **_self** property of a resource represents hello relative URI of hello resource.</span></span> <span data-ttu-id="3a066-184">Hello формат hello URI представляет hello /\<канала\>/ {_rid} сегментов пути:</span><span class="sxs-lookup"><span data-stu-id="3a066-184">hello format of hello URI consists of hello /\<feed\>/{_rid} path segments:</span></span>  

| <span data-ttu-id="3a066-185">Значение hello _self</span><span class="sxs-lookup"><span data-stu-id="3a066-185">Value of hello _self</span></span> | <span data-ttu-id="3a066-186">Описание</span><span class="sxs-lookup"><span data-stu-id="3a066-186">Description</span></span> |
| --- | --- |
| <span data-ttu-id="3a066-187">/dbs</span><span class="sxs-lookup"><span data-stu-id="3a066-187">/dbs</span></span> |<span data-ttu-id="3a066-188">Канал баз данных под учетной записью базы данных</span><span class="sxs-lookup"><span data-stu-id="3a066-188">Feed of databases under a database account</span></span> |
| <span data-ttu-id="3a066-189">/dbs/{dbName}</span><span class="sxs-lookup"><span data-stu-id="3a066-189">/dbs/{dbName}</span></span> |<span data-ttu-id="3a066-190">Базы данных с идентификатором сопоставления hello значения {dbName}</span><span class="sxs-lookup"><span data-stu-id="3a066-190">Database with an id matching hello value {dbName}</span></span> |
| <span data-ttu-id="3a066-191">/dbs/{dbName}/colls/</span><span class="sxs-lookup"><span data-stu-id="3a066-191">/dbs/{dbName}/colls/</span></span> |<span data-ttu-id="3a066-192">Канал коллекций в базе данных</span><span class="sxs-lookup"><span data-stu-id="3a066-192">Feed of collections under a database</span></span> |
| <span data-ttu-id="3a066-193">/dbs/{dbName}/colls/{collName}</span><span class="sxs-lookup"><span data-stu-id="3a066-193">/dbs/{dbName}/colls/{collName}</span></span> |<span data-ttu-id="3a066-194">Коллекция с идентификатором сопоставления hello значения {collName}</span><span class="sxs-lookup"><span data-stu-id="3a066-194">Collection with an id matching hello value {collName}</span></span> |
| <span data-ttu-id="3a066-195">/dbs/{dbName}/colls/{collName}/docs</span><span class="sxs-lookup"><span data-stu-id="3a066-195">/dbs/{dbName}/colls/{collName}/docs</span></span> |<span data-ttu-id="3a066-196">Канал документов в коллекции</span><span class="sxs-lookup"><span data-stu-id="3a066-196">Feed of documents under a collection</span></span> |
| <span data-ttu-id="3a066-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span><span class="sxs-lookup"><span data-stu-id="3a066-197">/dbs/{dbName}/colls/{collName}/docs/{docId}</span></span> |<span data-ttu-id="3a066-198">Документ с идентификатором, соответствующих значению hello {doc}</span><span class="sxs-lookup"><span data-stu-id="3a066-198">Document with an id matching hello value {doc}</span></span> |
| <span data-ttu-id="3a066-199">/dbs/{dbName}/users/</span><span class="sxs-lookup"><span data-stu-id="3a066-199">/dbs/{dbName}/users/</span></span> |<span data-ttu-id="3a066-200">Канал пользователей в базе данных</span><span class="sxs-lookup"><span data-stu-id="3a066-200">Feed of users under a database</span></span> |
| <span data-ttu-id="3a066-201">/dbs/{dbName}/users/{userId}</span><span class="sxs-lookup"><span data-stu-id="3a066-201">/dbs/{dbName}/users/{userId}</span></span> |<span data-ttu-id="3a066-202">Пользователь с идентификатором, соответствующих значению hello {user}</span><span class="sxs-lookup"><span data-stu-id="3a066-202">User with an id matching hello value {user}</span></span> |
| <span data-ttu-id="3a066-203">/dbs/{dbName}/users/{userId}/permissions</span><span class="sxs-lookup"><span data-stu-id="3a066-203">/dbs/{dbName}/users/{userId}/permissions</span></span> |<span data-ttu-id="3a066-204">Канал разрешений для пользователя</span><span class="sxs-lookup"><span data-stu-id="3a066-204">Feed of permissions under a user</span></span> |
| <span data-ttu-id="3a066-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span><span class="sxs-lookup"><span data-stu-id="3a066-205">/dbs/{dbName}/users/{userId}/permissions/{permissionId}</span></span> |<span data-ttu-id="3a066-206">Разрешение с идентификатором сопоставления hello значения {permission}</span><span class="sxs-lookup"><span data-stu-id="3a066-206">Permission with an id matching hello value {permission}</span></span> |

<span data-ttu-id="3a066-207">Каждый ресурс имеет уникальное определено имя пользователя через свойство идентификатора hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-207">Each resource has a unique user defined name exposed via hello id property.</span></span> <span data-ttu-id="3a066-208">Примечание: для документов, если пользователь hello не указан идентификатор, то нашей поддерживаемых пакетов SDK автоматически создаст уникальный идентификатор для hello документа.</span><span class="sxs-lookup"><span data-stu-id="3a066-208">Note: for documents, if hello user does not specify an id, our supported SDKs will automatically generate a unique id for hello document.</span></span> <span data-ttu-id="3a066-209">Идентификатор Hello имеет определенные пользователем строку, копирование too256 символов, уникальное в пределах контекста hello определенного родительского ресурса.</span><span class="sxs-lookup"><span data-stu-id="3a066-209">hello id is a user defined string, of up too256 characters that is unique within hello context of a specific parent resource.</span></span> 

<span data-ttu-id="3a066-210">Каждый ресурс имеет генерируемый системой идентификатор ресурса иерархической (также назывались tooas RID), которая доступна через свойство _rid hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-210">Each resource also has a system generated hierarchical resource identifier (also referred tooas an RID), which is available via hello _rid property.</span></span> <span data-ttu-id="3a066-211">Hello RID кодирует hello всей иерархии ресурс, и он представляет собой удобный внутреннее представление используемых tooenforce ссылочной целостности в распределенной среде.</span><span class="sxs-lookup"><span data-stu-id="3a066-211">hello RID encodes hello entire hierarchy of a given resource and it is a convenient internal representation used tooenforce referential integrity in a distributed manner.</span></span> <span data-ttu-id="3a066-212">Hello RID является уникальным в пределах учетной записи базы данных и его внутренне используется Cosmos DB для эффективную маршрутизацию, не требуя уточняющие запросы перекрестного секции.</span><span class="sxs-lookup"><span data-stu-id="3a066-212">hello RID is unique within a database account and it is internally used by Cosmos DB for efficient routing without requiring cross partition lookups.</span></span> <span data-ttu-id="3a066-213">значения Hello hello _self и свойств _rid hello: альтернативное и каноническое представление ресурса.</span><span class="sxs-lookup"><span data-stu-id="3a066-213">hello values of hello _self and hello  _rid properties are both alternate and canonical representations of a resource.</span></span> 

<span data-ttu-id="3a066-214">Поддержка API-интерфейс REST Hello адресации ресурсов и маршрутизацию запросов с идентификатором hello и свойства _rid hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-214">hello REST APIs support addressing of resources and routing of requests by both hello id and hello _rid properties.</span></span>

## <a name="database-accounts"></a><span data-ttu-id="3a066-215">Учетные записи базы данных</span><span class="sxs-lookup"><span data-stu-id="3a066-215">Database accounts</span></span>
<span data-ttu-id="3a066-216">Вы можете подготовить одну или несколько учетных записей базы данных Cosmos DB с помощью подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="3a066-216">You can provision one or more Cosmos DB database accounts using your Azure subscription.</span></span>

<span data-ttu-id="3a066-217">Можно создавать и управлять учетными записями базы данных Cosmos DB через портал Azure hello в [http://portal.azure.com/](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="3a066-217">You can create and manage Cosmos DB database accounts via hello Azure Portal at [http://portal.azure.com/](https://portal.azure.com/).</span></span> <span data-ttu-id="3a066-218">Создание и управление учетной записью базы данных требует наличия административного доступа и может быть выполнено только в рамках вашей подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="3a066-218">Creating and managing a database account requires administrative access and can only be performed under your Azure subscription.</span></span> 

### <a name="database-account-properties"></a><span data-ttu-id="3a066-219">Свойства учетной записи базы данных</span><span class="sxs-lookup"><span data-stu-id="3a066-219">Database account properties</span></span>
<span data-ttu-id="3a066-220">В рамках подготовки и управления учетной записью базы данных можно настроить и чтение hello следующие свойства:</span><span class="sxs-lookup"><span data-stu-id="3a066-220">As part of provisioning and managing a database account you can configure and read hello following properties:</span></span>  

<table border="0" cellspacing="0" cellpadding="0">
    <tbody>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-221"><strong>Имя свойства</strong></span><span class="sxs-lookup"><span data-stu-id="3a066-221"><strong>Property Name</strong></span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-222"><strong>Описание</strong></span><span class="sxs-lookup"><span data-stu-id="3a066-222"><strong>Description</strong></span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-223">Политика согласованности</span><span class="sxs-lookup"><span data-stu-id="3a066-223">Consistency Policy</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-224">Установите этот уровень свойство tooconfigure hello по умолчанию согласованности для всех коллекций hello под учетной записью базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-224">Set this property tooconfigure hello default consistency level for all hello collections under your database account.</span></span> <span data-ttu-id="3a066-225">Можно переопределить уровень согласованности hello отдельно для каждого запроса с помощью заголовка запроса hello [x-ms-consistency-level].</span><span class="sxs-lookup"><span data-stu-id="3a066-225">You can override hello consistency level on a per request basis using hello [x-ms-consistency-level] request header.</span></span> <p><p><span data-ttu-id="3a066-226">Обратите внимание, что это свойство применяется только toohello <i>пользователем ресурсов</i>.</span><span class="sxs-lookup"><span data-stu-id="3a066-226">Note that this property only applies toohello <i>user defined resources</i>.</span></span> <span data-ttu-id="3a066-227">Все системные ресурсы, настроенные toosupport операций чтения и запросы строго согласованная.</span><span class="sxs-lookup"><span data-stu-id="3a066-227">All system defined resources are configured toosupport reads/queries with strong consistency.</span></span></p></td>
        </tr>
        <tr>
            <td valign="top"><p><span data-ttu-id="3a066-228">Ключи авторизации</span><span class="sxs-lookup"><span data-stu-id="3a066-228">Authorization Keys</span></span></p></td>
            <td valign="top"><p><span data-ttu-id="3a066-229">Это основной hello и вторичные ключи master и только для чтения, предоставляющие административные доступа tooall hello ресурсов под учетной записью hello базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-229">These are hello primary and secondary master and readonly keys that provide administrative access tooall of hello resources under hello database account.</span></span></p></td>
        </tr>
    </tbody>
</table>

<span data-ttu-id="3a066-230">Обратите внимание, что в tooprovisioning сложения, настройке и управлении вашей учетной записи базы данных из hello портала Azure можно также программно создать и управление учетными записями Cosmos DB базы данных с помощью hello [API-интерфейсы DB Cosmos REST Azure](/rest/api/documentdb/) как а также [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-230">Note that in addition tooprovisioning, configuring and managing your database account from hello Azure Portal, you can also programmatically create and manage Cosmos DB database accounts by using hello [Azure Cosmos DB REST APIs](/rest/api/documentdb/) as well as [client SDKs](documentdb-sdk-dotnet.md).</span></span>  

## <a name="databases"></a><span data-ttu-id="3a066-231">Базы данных</span><span class="sxs-lookup"><span data-stu-id="3a066-231">Databases</span></span>
<span data-ttu-id="3a066-232">Cosmos DB базы данных — это логический контейнер, один или несколько коллекций и пользователей, как показано в hello следующие схемы.</span><span class="sxs-lookup"><span data-stu-id="3a066-232">A Cosmos DB database is a logical container of one or more collections and users, as shown in hello following diagram.</span></span> <span data-ttu-id="3a066-233">Можно создать любое количество баз данных в группе toooffer субъекта Cosmos DB учетной записи базы данных ограничения.</span><span class="sxs-lookup"><span data-stu-id="3a066-233">You can create any number of databases under a Cosmos DB database account subject toooffer limits.</span></span>  

<span data-ttu-id="3a066-234">![Учетная запись базы данных и иерархическая модель коллекций][2]</span><span class="sxs-lookup"><span data-stu-id="3a066-234">![Database account and collections hierarchical model][2]</span></span>  
<span data-ttu-id="3a066-235">**База данных представляет собой логический контейнер пользователей и коллекций**</span><span class="sxs-lookup"><span data-stu-id="3a066-235">**A Database is a logical container of users and collections**</span></span>

<span data-ttu-id="3a066-236">База данных может содержать практически неограниченное хранилище документов, секционированное внутри коллекций.</span><span class="sxs-lookup"><span data-stu-id="3a066-236">A database can contain virtually unlimited document storage partitioned within collections.</span></span>

### <a name="elastic-scale-of-a-cosmos-db-database"></a><span data-ttu-id="3a066-237">Гибкое масштабирование базы данных Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="3a066-237">Elastic scale of a Cosmos DB database</span></span>
<span data-ttu-id="3a066-238">Cosmos DB базы данных, является гибким по умолчанию — в диапазоне от нескольких toopetabytes ГБ SSD резервного хранилища документов и пропускная способность.</span><span class="sxs-lookup"><span data-stu-id="3a066-238">A Cosmos DB database is elastic by default – ranging from a few GB toopetabytes of SSD backed document storage and provisioned throughput.</span></span> 

<span data-ttu-id="3a066-239">В отличие от базы данных в традиционных реляционной СУБД базы данных в базу данных, Cosmos не tooa области одного компьютера.</span><span class="sxs-lookup"><span data-stu-id="3a066-239">Unlike a database in traditional RDBMS, a database in Cosmos DB is not scoped tooa single machine.</span></span> <span data-ttu-id="3a066-240">С помощью Cosmos DB как масштаб приложения должен toogrow, можно создавать несколько коллекций и баз данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-240">With Cosmos DB, as your application’s scale needs toogrow, you can create more collections, databases, or both.</span></span> <span data-ttu-id="3a066-241">Действительно, различные собственные приложения корпорации Майкрософт уже используют Cosmos DB в потребительском масштабе, создавая чрезвычайно большие базы данных Cosmos DB, каждая из которых содержит тысячи коллекций с терабайтами хранилищ документов.</span><span class="sxs-lookup"><span data-stu-id="3a066-241">Indeed, various first party applications within Microsoft have been using Cosmos DB at a consumer scale by creating extremely large Cosmos DB databases each containing thousands of collections with terabytes of document storage.</span></span> <span data-ttu-id="3a066-242">Вы можете увеличить или уменьшить базы данных путем добавления или удаления коллекции toomeet шкалы требования вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-242">You can grow or shrink a database by adding or removing collections toomeet your application’s scale requirements.</span></span> 

<span data-ttu-id="3a066-243">Можно создать любое количество коллекций в предложение toohello субъекта базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-243">You can create any number of collections within a database subject toohello offer.</span></span> <span data-ttu-id="3a066-244">Каждая коллекция имеет SSD резервного хранилища и подготовленной автоматически в зависимости от уровня производительности выбранного hello пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3a066-244">Each collection has SSD backed storage and throughput provisioned for you depending on hello selected performance tier.</span></span>

<span data-ttu-id="3a066-245">Cosmos DB также является контейнером пользователей.</span><span class="sxs-lookup"><span data-stu-id="3a066-245">A Cosmos DB database is also a container of users.</span></span> <span data-ttu-id="3a066-246">Пользователь, в свою очередь, является логическим пространством имен для набора разрешений, предоставляющий детально toocollections авторизации и доступа, документы и вложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-246">A user, in-turn, is a logical namespace for a set of permissions that provides fine-grained authorization and access toocollections, documents and attachments.</span></span>  

<span data-ttu-id="3a066-247">Как базы данных создаются с другими ресурсами в модели ресурсов Cosmos DB hello, заменены, удален, чтение или перечисление легко с помощью либо hello [API-интерфейс REST](/rest/api/documentdb/) или любой hello [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-247">As with other resources in hello Cosmos DB resource model, databases can be created, replaced, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="3a066-248">Cosmos DB гарантирует строгая согласованность для запроса метаданных hello ресурса базы данных или чтения.</span><span class="sxs-lookup"><span data-stu-id="3a066-248">Cosmos DB guarantees strong consistency for reading or querying hello metadata of a database resource.</span></span> <span data-ttu-id="3a066-249">При удалении базы данных автоматически гарантирует, что получить доступ к коллекции hello или пользователей, содержащиеся в нем.</span><span class="sxs-lookup"><span data-stu-id="3a066-249">Deleting a database automatically ensures that you cannot access any of hello collections or users contained within it.</span></span>   

## <a name="collections"></a><span data-ttu-id="3a066-250">Коллекции</span><span class="sxs-lookup"><span data-stu-id="3a066-250">Collections</span></span>
<span data-ttu-id="3a066-251">Коллекция Cosmos DB — это контейнер для документов JSON.</span><span class="sxs-lookup"><span data-stu-id="3a066-251">A Cosmos DB collection is a container for your JSON documents.</span></span> 

### <a name="elastic-ssd-backed-document-storage"></a><span data-ttu-id="3a066-252">Гибкое хранилище документов на базе SSD</span><span class="sxs-lookup"><span data-stu-id="3a066-252">Elastic SSD backed document storage</span></span>
<span data-ttu-id="3a066-253">Коллекция является неразрывно гибкой, она автоматически увеличивается и уменьшается по мере добавления или удаления документов.</span><span class="sxs-lookup"><span data-stu-id="3a066-253">A collection is intrinsically elastic - it automatically grows and shrinks as you add or remove documents.</span></span> <span data-ttu-id="3a066-254">Коллекции — это логические ресурсы, они могут включать в себя одну или несколько физических секций или серверов.</span><span class="sxs-lookup"><span data-stu-id="3a066-254">Collections are logical resources and can span one or more physical partitions or servers.</span></span> <span data-ttu-id="3a066-255">Hello количество разделов в коллекции определяется на основе размера хранилища hello и пропускная способность hello коллекции DB Cosmos.</span><span class="sxs-lookup"><span data-stu-id="3a066-255">hello number of partitions within a collection is determined by Cosmos DB based on hello storage size and hello provisioned throughput of your collection.</span></span> <span data-ttu-id="3a066-256">С каждой секцией в базе данных Azure Cosmos DB связано фиксированное количество хранилищ на основе SSD, которое реплицируется для обеспечения высокого уровня доступности.</span><span class="sxs-lookup"><span data-stu-id="3a066-256">Every partition in Cosmos DB has a fixed amount of SSD-backed storage associated with it, and is replicated for high availability.</span></span> <span data-ttu-id="3a066-257">Управление секциями полностью управляются Azure Cosmos DB и управления секциями или не toowrite сложный код.</span><span class="sxs-lookup"><span data-stu-id="3a066-257">Partition management is fully managed by Azure Cosmos DB, and you do not have toowrite complex code or manage your partitions.</span></span> <span data-ttu-id="3a066-258">Коллекции Cosmos DB **практически не ограничены** в объеме хранилища и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3a066-258">Cosmos DB collections are **practically unlimited** in terms of storage and throughput.</span></span> 

### <a name="automatic-indexing-of-collections"></a><span data-ttu-id="3a066-259">Автоматическое индексирование коллекций</span><span class="sxs-lookup"><span data-stu-id="3a066-259">Automatic indexing of collections</span></span>
<span data-ttu-id="3a066-260">Cosmos DB — это система баз данных без схемы.</span><span class="sxs-lookup"><span data-stu-id="3a066-260">Cosmos DB is a true schema-free database system.</span></span> <span data-ttu-id="3a066-261">Он не предполагают и не требует любой схемы для документов JSON hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-261">It does not assume or require any schema for hello JSON documents.</span></span> <span data-ttu-id="3a066-262">При добавлении tooa набор документов Cosmos DB автоматически индексирует их, и они становятся доступны для вас tooquery.</span><span class="sxs-lookup"><span data-stu-id="3a066-262">As you add documents tooa collection, Cosmos DB automatically indexes them and they are available for you tooquery.</span></span> <span data-ttu-id="3a066-263">Автоматическая индексация документов, не требующая указания схемы или вторичных индексов, является ключевой возможностью Cosmos DB и доступна благодаря оптимизированным для записи технологиям обслуживания индексов без блокировки, которые структурированы для журнала.</span><span class="sxs-lookup"><span data-stu-id="3a066-263">Automatic indexing of documents without requiring schema or secondary indexes is a key capability of Cosmos DB and is enabled by write-optimized, lock-free and log-structured index maintenance techniques.</span></span> <span data-ttu-id="3a066-264">Cosmos DB поддерживает устойчивый объем чрезвычайно быстрых операций записи и в то же время обслуживает согласованные запросы.</span><span class="sxs-lookup"><span data-stu-id="3a066-264">Cosmos DB supports sustained volume of extremely fast writes while still serving consistent queries.</span></span> <span data-ttu-id="3a066-265">Хранилище документа и индекса, используемый toocalculate хранилища hello, каждая коллекция.</span><span class="sxs-lookup"><span data-stu-id="3a066-265">Both document and index storage are used toocalculate hello storage consumed by each collection.</span></span> <span data-ttu-id="3a066-266">Можно управлять hello хранения и производительности компромиссы связанные с индексированием, настроив hello политики индексирования для коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-266">You can control hello storage and performance trade-offs associated with indexing by configuring hello indexing policy for a collection.</span></span> 

### <a name="configuring-hello-indexing-policy-of-a-collection"></a><span data-ttu-id="3a066-267">Настройка политики индексирования hello коллекции</span><span class="sxs-lookup"><span data-stu-id="3a066-267">Configuring hello indexing policy of a collection</span></span>
<span data-ttu-id="3a066-268">Hello индексирования политики из каждой коллекции можно toomake производительность и хранилище компромиссы связанные с индексированием.</span><span class="sxs-lookup"><span data-stu-id="3a066-268">hello indexing policy of each collection allows you toomake performance and storage trade-offs associated with indexing.</span></span> <span data-ttu-id="3a066-269">Hello доступны следующие параметры доступны tooyou как часть конфигурации индексирования:</span><span class="sxs-lookup"><span data-stu-id="3a066-269">hello following options are available tooyou as part of indexing configuration:</span></span>  

* <span data-ttu-id="3a066-270">Выберите, является ли коллекция hello автоматически индексирует все документы hello или не.</span><span class="sxs-lookup"><span data-stu-id="3a066-270">Choose whether hello collection automatically indexes all of hello documents or not.</span></span> <span data-ttu-id="3a066-271">По умолчанию все документы индексируются автоматически.</span><span class="sxs-lookup"><span data-stu-id="3a066-271">By default, all documents are automatically indexed.</span></span> <span data-ttu-id="3a066-272">Можно выбрать tooturn отключение автоматического индексирования и избирательно добавлять только индексы toohello конкретных документов.</span><span class="sxs-lookup"><span data-stu-id="3a066-272">You can choose tooturn off automatic indexing and selectively add only specific documents toohello index.</span></span> <span data-ttu-id="3a066-273">И наоборот можно выборочно выбрать tooexclude только конкретных документов.</span><span class="sxs-lookup"><span data-stu-id="3a066-273">Conversely, you can selectively choose tooexclude only specific documents.</span></span> <span data-ttu-id="3a066-274">Для этого параметра toobe автоматическое свойство hello true или false в indexingPolicy hello коллекции и с помощью заголовка запроса hello [x-ms-indexingdirective] во время вставки, замены или удаления документов.</span><span class="sxs-lookup"><span data-stu-id="3a066-274">You can achieve this by setting hello automatic property toobe true or false on hello indexingPolicy of a collection and using hello [x-ms-indexingdirective] request header while inserting, replacing or deleting a document.</span></span>  
* <span data-ttu-id="3a066-275">Выберите hello ли tooinclude или исключить определенные пути или шаблоны в документах из индекса.</span><span class="sxs-lookup"><span data-stu-id="3a066-275">Choose whether tooinclude or exclude specific paths or patterns in your documents from hello index.</span></span> <span data-ttu-id="3a066-276">Этого можно добиться, параметр includedPaths и excludedPaths на indexingPolicy hello коллекции соответственно.</span><span class="sxs-lookup"><span data-stu-id="3a066-276">You can achieve this by setting includedPaths and excludedPaths on hello indexingPolicy of a collection respectively.</span></span> <span data-ttu-id="3a066-277">Можно также настроить hello хранения и производительности преимущества и недостатки для диапазона и хэш-запросы для определенного пути шаблонов.</span><span class="sxs-lookup"><span data-stu-id="3a066-277">You can also configure hello storage and performance trade-offs for range and hash queries for specific path patterns.</span></span> 
* <span data-ttu-id="3a066-278">Выбор между синхронными обновлениями (согласованные) и асинхронными обновлениями (отложенные) индекса.</span><span class="sxs-lookup"><span data-stu-id="3a066-278">Choose between synchronous (consistent) and asynchronous (lazy) index updates.</span></span> <span data-ttu-id="3a066-279">По умолчанию hello индекс обновляется синхронно для каждой вставки, замены или удаления коллекции toohello документа.</span><span class="sxs-lookup"><span data-stu-id="3a066-279">By default, hello index is updated synchronously on each insert, replace or delete of a document toohello collection.</span></span> <span data-ttu-id="3a066-280">Это позволяет выполнять запросы hello toohonor hello уровень согласованности, hello чтения документа.</span><span class="sxs-lookup"><span data-stu-id="3a066-280">This enables hello queries toohonor hello same consistency level as that of hello document reads.</span></span> <span data-ttu-id="3a066-281">Cosmos DB записи оптимизированной и поддерживает длительной тома записи документа вместе с обслуживание синхронной индекса и обслуживает запросы согласованной, можно настроить некоторые tooupdate коллекций их индекс неактивно.</span><span class="sxs-lookup"><span data-stu-id="3a066-281">While Cosmos DB is write optimized and supports sustained volumes of document writes along with synchronous index maintenance and serving consistent queries, you can configure certain collections tooupdate their index lazily.</span></span> <span data-ttu-id="3a066-282">Отложенного индексирования повышает производительность записи hello дальнейшей и идеально подходит для сценариев массового приема в основном интенсивных коллекций.</span><span class="sxs-lookup"><span data-stu-id="3a066-282">Lazy indexing boosts hello write performance further and is ideal for bulk ingestion scenarios for primarily read-heavy collections.</span></span>

<span data-ttu-id="3a066-283">Привет, политика индексирования можно изменить, выполнив операцию PUT в коллекцию hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-283">hello indexing policy can be changed by executing a PUT on hello collection.</span></span> <span data-ttu-id="3a066-284">Это может быть достигнута посредством hello [пакет SDK для клиента](documentdb-sdk-dotnet.md), hello [портала Azure](https://portal.azure.com) или hello [API-интерфейс REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="3a066-284">This can be achieved either through hello [client SDK](documentdb-sdk-dotnet.md), hello [Azure Portal](https://portal.azure.com) or hello [REST APIs](/rest/api/documentdb/).</span></span>

### <a name="querying-a-collection"></a><span data-ttu-id="3a066-285">Запросы к коллекции</span><span class="sxs-lookup"><span data-stu-id="3a066-285">Querying a collection</span></span>
<span data-ttu-id="3a066-286">Hello документы в коллекции может быть произвольной схемы и документов в коллекции можно запрашивать без указания любой схемы или заранее вторичных индексов.</span><span class="sxs-lookup"><span data-stu-id="3a066-286">hello documents within a collection can have arbitrary schemas and you can query documents within a collection without providing any schema or secondary indices upfront.</span></span> <span data-ttu-id="3a066-287">Вы можете запрашивать hello коллекции, используя hello [Azure Cosmos DB DocumentDB API: Справочник по синтаксису SQL](https://msdn.microsoft.com/library/azure/dn782250.aspx), который играет роль форматированного операторы иерархических реляционных и Пространственные через определяемые пользователем функции на основе JavaScript.</span><span class="sxs-lookup"><span data-stu-id="3a066-287">You can query hello collection using hello [Azure Cosmos DB DocumentDB API: SQL syntax reference](https://msdn.microsoft.com/library/azure/dn782250.aspx), which provides rich hierarchical, relational, and spatial operators and extensibility via JavaScript-based UDFs.</span></span> <span data-ttu-id="3a066-288">Грамматика JSON обеспечивает моделирование документов JSON в виде деревьев с метками hello узлами дерева.</span><span class="sxs-lookup"><span data-stu-id="3a066-288">JSON grammar allows for modeling JSON documents as trees with labels as hello tree nodes.</span></span> <span data-ttu-id="3a066-289">Этот подход используется для автоматического индексирования API DocumentDB, а также лежит в основе диалекта SQL API DocumentDB.</span><span class="sxs-lookup"><span data-stu-id="3a066-289">This is exploited both by DocumentDB API’s automatic indexing techniques as well as DocumentDB API's SQL dialect.</span></span> <span data-ttu-id="3a066-290">язык запросов DocumetDB API Hello состоит из трех основных этапов:</span><span class="sxs-lookup"><span data-stu-id="3a066-290">hello DocumetDB API query language consists of three main aspects:</span></span>   

1. <span data-ttu-id="3a066-291">Небольшой набор операций запросов, которые естественным образом сопоставляются toohello древовидная структура, включая иерархические запросы и проекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-291">A small set of query operations that map naturally toohello tree structure including hierarchical queries and projections.</span></span> 
2. <span data-ttu-id="3a066-292">Подмножество реляционных операций, включая композиции, фильтры, проекции, агрегатов и внутренние соединения.</span><span class="sxs-lookup"><span data-stu-id="3a066-292">A subset of relational operations including composition, filter, projections, aggregates and self joins.</span></span> 
3. <span data-ttu-id="3a066-293">Пользовательские функции на основе чистого JavaScript, которые работают с (1) и (2)</span><span class="sxs-lookup"><span data-stu-id="3a066-293">Pure JavaScript based UDFs that work with (1) and (2).</span></span>  

<span data-ttu-id="3a066-294">запрос модели Hello Cosmos DB попыток toostrike баланс между функциональные возможности, эффективность и простота.</span><span class="sxs-lookup"><span data-stu-id="3a066-294">hello Cosmos DB query model attempts toostrike a balance between functionality, efficiency and simplicity.</span></span> <span data-ttu-id="3a066-295">Cosmos Hello СУБД базы данных в собственном коде компилирует и выполняет инструкции SQL-запроса hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-295">hello Cosmos DB database engine natively compiles and executes hello SQL query statements.</span></span> <span data-ttu-id="3a066-296">Можно выполнить запрос из коллекции с помощью hello [API-интерфейс REST](/rest/api/documentdb/) или любой hello [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-296">You can query a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="3a066-297">Hello .NET SDK поставляется с поставщиком LINQ.</span><span class="sxs-lookup"><span data-stu-id="3a066-297">hello .NET SDK comes with a LINQ provider.</span></span>

> [!TIP]
> <span data-ttu-id="3a066-298">Можно испытать hello DocumentDB API и выполнения запросов SQL, используя наш набор данных в hello [площадку запросов](https://www.documentdb.com/sql/demo).</span><span class="sxs-lookup"><span data-stu-id="3a066-298">You can try out hello DocumentDB API and run SQL queries against our dataset in hello [Query Playground](https://www.documentdb.com/sql/demo).</span></span>
> 
> 

## <a name="multi-document-transactions"></a><span data-ttu-id="3a066-299">Операции над несколькими документами</span><span class="sxs-lookup"><span data-stu-id="3a066-299">Multi-document transactions</span></span>
<span data-ttu-id="3a066-300">Транзакции базы данных предоставляют безопасные и прогнозируемых модель программирования для работы с данными toohello параллельных изменений.</span><span class="sxs-lookup"><span data-stu-id="3a066-300">Database transactions provide a safe and predictable programming model for dealing with concurrent changes toohello data.</span></span> <span data-ttu-id="3a066-301">В реляционной СУБД, hello традиционным способом toowrite бизнес-логика является toowrite **хранимых процедур** и/или **триггеры** и отправки toohello сервера базы данных для выполнения транзакций.</span><span class="sxs-lookup"><span data-stu-id="3a066-301">In RDBMS, hello traditional way toowrite business logic is toowrite **stored-procedures** and/or **triggers** and ship it toohello database server for transactional execution.</span></span> <span data-ttu-id="3a066-302">В реляционной СУБД программист приложения hello является обязательным toodeal с двумя различными языками программирования:</span><span class="sxs-lookup"><span data-stu-id="3a066-302">In RDBMS, hello application programmer is required toodeal with two disparate programming languages:</span></span> 

* <span data-ttu-id="3a066-303">Hello (нетранзакционных) приложения языка программирования (например JavaScript, Python, C#, Java, и т. д.)</span><span class="sxs-lookup"><span data-stu-id="3a066-303">hello (non-transactional) application programming language (e.g. JavaScript, Python, C#, Java, etc.)</span></span>
* <span data-ttu-id="3a066-304">T-SQL, hello транзакций программирования языке, который изначально выполняется hello базы данных</span><span class="sxs-lookup"><span data-stu-id="3a066-304">T-SQL, hello transactional programming language which is natively executed by hello database</span></span>

<span data-ttu-id="3a066-305">Посредством tooJavaScript глубокой обязательств и JSON непосредственно в компонент database engine hello, Cosmos DB предоставляет модель программирования интуитивно понятный, для выполнения JavaScript логику приложения непосредственно на основе hello коллекций с точки зрения хранимые процедуры и триггеры.</span><span class="sxs-lookup"><span data-stu-id="3a066-305">By virtue of its deep commitment tooJavaScript and JSON directly within hello database engine, Cosmos DB provides an intuitive programming model for executing JavaScript based application logic directly on hello collections in terms of stored procedures and triggers.</span></span> <span data-ttu-id="3a066-306">Это позволяет для обоих hello следующее:</span><span class="sxs-lookup"><span data-stu-id="3a066-306">This allows for both of hello following:</span></span>

* <span data-ttu-id="3a066-307">Управлять эффективной реализации параллелизма, восстановления, автоматическое индексирование графов объектов JSON hello непосредственно в ядре СУБД hello</span><span class="sxs-lookup"><span data-stu-id="3a066-307">Efficient implementation of concurrency control, recovery, automatic indexing of hello JSON object graphs directly in hello database engine</span></span>
* <span data-ttu-id="3a066-308">Естественно выражения потока управления, определение областей переменных, назначения и интеграции примитивы с транзакциями баз данных непосредственно с точки зрения языка программирования JavaScript hello обработки исключений</span><span class="sxs-lookup"><span data-stu-id="3a066-308">Naturally expressing control flow, variable scoping, assignment and integration of exception handling primitives with database transactions directly in terms of hello JavaScript programming language</span></span>

<span data-ttu-id="3a066-309">Hello логику JavaScript, зарегистрированных на уровне коллекции, затем может выдавать операций базы данных в документах hello hello, Получает коллекцию.</span><span class="sxs-lookup"><span data-stu-id="3a066-309">hello JavaScript logic registered at a collection level can then issue database operations on hello documents of hello given collection.</span></span> <span data-ttu-id="3a066-310">Cosmos DB неявно приветствия формирует оболочку для JavaScript на основе хранимых процедур и триггеров в окружения ACID-транзакции с изоляцией моментального снимка в документах в коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-310">Cosmos DB implicitly wraps hello JavaScript based stored procedures and triggers within an ambient ACID transactions with snapshot isolation across documents within a collection.</span></span> <span data-ttu-id="3a066-311">Hello ходе его выполнения Если hello, JavaScript вызывает исключение, затем hello вся транзакция прерывается.</span><span class="sxs-lookup"><span data-stu-id="3a066-311">During hello course of its execution, if hello JavaScript throws an exception, then hello entire transaction is aborted.</span></span> <span data-ttu-id="3a066-312">Hello результирующей модели программирования является очень простым мощные.</span><span class="sxs-lookup"><span data-stu-id="3a066-312">hello resulting programming model is a very simple yet powerful.</span></span> <span data-ttu-id="3a066-313">Разработчики JavaScript получают "надежную" модель программирования, при этом используя привычные языковые конструкции и библиотечные примитивы.</span><span class="sxs-lookup"><span data-stu-id="3a066-313">JavaScript developers get a “durable” programming model while still using their familiar language constructs and library primitives.</span></span>   

<span data-ttu-id="3a066-314">Hello tooexecute возможности JavaScript непосредственно в базе данных hello модуль в hello же адресное пространство, поскольку hello буферного пула позволяет добиться высокой производительностью и транзакций выполнение операций базы данных с документами hello коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-314">hello ability tooexecute JavaScript directly within hello database engine in hello same address space as hello buffer pool enables performant and transactional execution of database operations against hello documents of a collection.</span></span> <span data-ttu-id="3a066-315">Кроме того Cosmos базы данных СУБД делает глубокие обязательств toohello JSON и JavaScript исключает любые несогласованности между системами типов hello приложения и базы данных hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-315">Furthermore, Cosmos DB database engine makes a deep commitment toohello JSON and JavaScript eliminates any impedance mismatch between hello type systems of application and hello database.</span></span>   

<span data-ttu-id="3a066-316">После создания коллекции, можно зарегистрировать хранимые процедуры, триггеры и определяемые пользователем функции из коллекции с помощью hello [API-интерфейс REST](/rest/api/documentdb/) или любой hello [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-316">After creating a collection, you can register stored procedures, triggers and UDFs with a collection using hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="3a066-317">После регистрации вы можете использовать и выполнять их.</span><span class="sxs-lookup"><span data-stu-id="3a066-317">After registration, you can reference and execute them.</span></span> <span data-ttu-id="3a066-318">Рассмотрим следующие hello хранимой процедуры, записанных полностью на языке JavaScript, приведенный ниже код hello принимает два аргумента (имя книги и имя автора) и создает новый документ запрашивает документ и затем обновляет — все в пределах неявная транзакция ACID.</span><span class="sxs-lookup"><span data-stu-id="3a066-318">Consider hello following stored procedure written entirely in JavaScript, hello code below takes two arguments (book name and author name) and creates a new document, queries for a document and then updates it – all within an implicit ACID transaction.</span></span> <span data-ttu-id="3a066-319">В любой момент во время выполнения hello Если исключение JavaScript, прерывает hello всей транзакции.</span><span class="sxs-lookup"><span data-stu-id="3a066-319">At any point during hello execution, if a JavaScript exception is thrown, hello entire transaction aborts.</span></span>

    function businessLogic(name, author) {
        var context = getContext();
        var collectionManager = context.getCollection();        
        var collectionLink = collectionManager.getSelfLink()

        // create a new document.
        collectionManager.createDocument(collectionLink,
            {id: name, author: author},
            function(err, documentCreated) {
                if(err) throw new Error(err.message);

                // filter documents by author
                var filterQuery = "SELECT * from root r WHERE r.author = 'George R.'";
                collectionManager.queryDocuments(collectionLink,
                    filterQuery,
                    function(err, matchingDocuments) {
                        if(err) throw new Error(err.message);

                        context.getResponse().setBody(matchingDocuments.length);

                        // Replace hello author name for all documents that satisfied hello query.
                        for (var i = 0; i < matchingDocuments.length; i++) {
                            matchingDocuments[i].author = "George R. R. Martin";
                            // we don’t need tooexecute a callback because they are in parallel
                            collectionManager.replaceDocument(matchingDocuments[i]._self,
                                matchingDocuments[i]);   
                        }
                    })
            })
    };

<span data-ttu-id="3a066-320">Hello клиента можно «ship» hello выше базы данных toohello логику JavaScript для выполнения транзакций через HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="3a066-320">hello client can “ship” hello above JavaScript logic toohello database for transactional execution via HTTP POST.</span></span> <span data-ttu-id="3a066-321">Дополнительные сведения об использовании методов HTTP см. в статье [Azure Cosmos DB: Azure Cosmos DB REST API](https://msdn.microsoft.com/library/azure/mt622086.aspx) (Azure Cosmos DB. REST API Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="3a066-321">For more information about using HTTP methods, see [RESTful interactions with Azure Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span> 

    client.createStoredProcedureAsync(collection._self, {id: "CRUDProc", body: businessLogic})
       .then(function(createdStoredProcedure) {
            return client.executeStoredProcedureAsync(createdStoredProcedure.resource._self,
                "NoSQL Distilled",
                "Martin Fowler");
        })
        .then(function(result) {
            console.log(result);
        },
        function(error) {
            console.log(error);
        });


<span data-ttu-id="3a066-322">Обратите внимание, что поскольку базы данных hello собственными средствами различает JSON и JavaScript, не несоответствие системы типов, не «Или отображение» или требуется magic формирования кода.</span><span class="sxs-lookup"><span data-stu-id="3a066-322">Notice that because hello database natively understands JSON and JavaScript, there is no type system mismatch, no “OR mapping” or code generation magic required.</span></span>   

<span data-ttu-id="3a066-323">Хранимые процедуры и триггеры взаимодействовать с документами коллекции и hello в коллекции через модель четко определенный объект, предоставляющий контекст текущего сбора hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-323">Stored procedures and triggers interact with a collection and hello documents in a collection through a well-defined object model, which exposes hello current collection context.</span></span>  

<span data-ttu-id="3a066-324">Коллекции в hello DocumentDB API можно создать, удалить, чтение или перечисление легко с помощью либо hello [API-интерфейс REST](/rest/api/documentdb/) или любой hello [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-324">Collections in hello DocumentDB API can be created, deleted, read or enumerated easily using either hello [REST APIs](/rest/api/documentdb/) or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="3a066-325">Hello DocumentDB API всегда предоставляет строгая согласованность для запроса метаданных hello коллекции или чтения.</span><span class="sxs-lookup"><span data-stu-id="3a066-325">hello DocumentDB API always provides strong consistency for reading or querying hello metadata of a collection.</span></span> <span data-ttu-id="3a066-326">Удаление коллекции автоматически гарантирует, что получить доступ к hello документы, вложения, хранимые процедуры, триггеры и определяемые пользователем функции, которые в нем содержатся.</span><span class="sxs-lookup"><span data-stu-id="3a066-326">Deleting a collection automatically ensures that you cannot access any of hello documents, attachments, stored procedures, triggers, and UDFs contained within it.</span></span>   

## <a name="stored-procedures-triggers-and-user-defined-functions-udf"></a><span data-ttu-id="3a066-327">Хранимые процедуры, триггеры и определяемые пользователями функции (UDF)</span><span class="sxs-lookup"><span data-stu-id="3a066-327">Stored procedures, triggers and User Defined Functions (UDF)</span></span>
<span data-ttu-id="3a066-328">Как описано в предыдущем разделе hello, можно написать toorun логику приложения непосредственно в рамках транзакции внутри компонента database engine hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-328">As described in hello previous section, you can write application logic toorun directly within a transaction inside of hello database engine.</span></span> <span data-ttu-id="3a066-329">логика приложения Hello может быть написан полностью в JavaScript и могут задаваться как хранимая процедура, триггер или определяемая пользователем Функция.</span><span class="sxs-lookup"><span data-stu-id="3a066-329">hello application logic can be written entirely in JavaScript and can be modeled as a stored procedure, trigger or a UDF.</span></span> <span data-ttu-id="3a066-330">Hello код JavaScript в хранимой процедуре или триггере можно вставить, замените, удаление, чтение или запроса документов в коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-330">hello JavaScript code within a stored procedure or a trigger can insert, replace, delete, read or query documents within a collection.</span></span> <span data-ttu-id="3a066-331">На Здравствуйте другой стороны, hello JavaScript внутри определяемой пользователем функции не может вставить, замена или удаление документов.</span><span class="sxs-lookup"><span data-stu-id="3a066-331">On hello other hand, hello JavaScript within a UDF cannot insert, replace, or delete documents.</span></span> <span data-ttu-id="3a066-332">Определяемые пользователем функции перечисления документы hello результирующего набора запроса и создания другой результирующий набор.</span><span class="sxs-lookup"><span data-stu-id="3a066-332">UDFs enumerate hello documents of a query's result set and produce another result set.</span></span> <span data-ttu-id="3a066-333">Для мультитенантности Cosmos DB реализует управление ресурсами на основе строгого резервирования.</span><span class="sxs-lookup"><span data-stu-id="3a066-333">For multi-tenancy, Cosmos DB enforces a strict reservation based resource governance.</span></span> <span data-ttu-id="3a066-334">Каждая хранимая процедура, триггер или определяемая пользователем Функция возвращает основных такта toodo ресурсы операционной системы свою работу.</span><span class="sxs-lookup"><span data-stu-id="3a066-334">Each stored procedure, trigger or a UDF gets a fixed quantum of operating system resources toodo its work.</span></span> <span data-ttu-id="3a066-335">Кроме того хранимые процедуры, триггеры или определяемые пользователем функции не удается создать связь от внешних библиотек JavaScript и являются черный, если они превышают бюджетов hello ресурсов, распределенных toothem.</span><span class="sxs-lookup"><span data-stu-id="3a066-335">Furthermore, stored procedures, triggers or UDFs cannot link against external JavaScript libraries and are blacklisted if they exceed hello resource budgets allocated toothem.</span></span> <span data-ttu-id="3a066-336">Можно зарегистрировать, отмените регистрацию хранимые процедуры, триггеры или определяемые пользователем функции с помощью коллекции с помощью hello API-интерфейсов REST.</span><span class="sxs-lookup"><span data-stu-id="3a066-336">You can register, unregister stored procedures, triggers or UDFs with a collection by using hello REST APIs.</span></span>  <span data-ttu-id="3a066-337">После регистрации хранимая процедура, триггер или пользовательская функция предварительно компилируются и хранятся в виде байт-кода, который позже запускается на выполнение.</span><span class="sxs-lookup"><span data-stu-id="3a066-337">Upon registration a stored procedure, trigger, or a UDF is pre-compiled and stored as byte code which gets executed later.</span></span> <span data-ttu-id="3a066-338">Hello в следующем разделе показано, как использовать Cosmos DB JavaScript SDK tooregister hello, выполнения и отмены регистрации хранимой процедуры, триггера, определяемой пользователем функции.</span><span class="sxs-lookup"><span data-stu-id="3a066-338">hello following section illustrate how you can use hello Cosmos DB JavaScript SDK tooregister, execute, and unregister a stored procedure, trigger, and a UDF.</span></span> <span data-ttu-id="3a066-339">пакет JavaScript SDK для Hello является простой оболочкой для hello [API-интерфейс REST](/rest/api/documentdb/).</span><span class="sxs-lookup"><span data-stu-id="3a066-339">hello JavaScript SDK is a simple wrapper over hello [REST APIs](/rest/api/documentdb/).</span></span> 

### <a name="registering-a-stored-procedure"></a><span data-ttu-id="3a066-340">Регистрация хранимой процедуры</span><span class="sxs-lookup"><span data-stu-id="3a066-340">Registering a stored procedure</span></span>
<span data-ttu-id="3a066-341">Регистрация хранимой процедуры — это создание нового ресурса хранимой процедуры ресурса в коллекции с помощью HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="3a066-341">Registration of a stored procedure creates a new stored procedure resource on a collection via HTTP POST.</span></span>  

    var storedProc = {
        id: "validateAndCreate",
        body: function (documentToCreate) {
            documentToCreate.id = documentToCreate.id.toUpperCase();

            var collectionManager = getContext().getCollection();
            collectionManager.createDocument(collectionManager.getSelfLink(),
                documentToCreate,
                function(err, documentCreated) {
                    if(err) throw new Error('Error while creating document: ' + err.message;
                    getContext().getResponse().setBody('success - created ' + 
                            documentCreated.name);
                });
        }
    };

    client.createStoredProcedureAsync(collection._self, storedProc)
        .then(function (createdStoredProcedure) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-stored-procedure"></a><span data-ttu-id="3a066-342">Выполнение хранимой процедуры</span><span class="sxs-lookup"><span data-stu-id="3a066-342">Executing a stored procedure</span></span>
<span data-ttu-id="3a066-343">Выполнение хранимой процедуры выполняется путем выдачи путем передачи параметров процедуры toohello в тексте hello запроса HTTP POST от существующего ресурса хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="3a066-343">Execution of a stored procedure is done by issuing an HTTP POST against an existing stored procedure resource by passing parameters toohello procedure in hello request body.</span></span>

    var inputDocument = {id : "document1", author: "G. G. Marquez"};
    client.executeStoredProcedureAsync(createdStoredProcedure.resource._self, inputDocument)
        .then(function(executionResult) {
            assert.equal(executionResult, "success - created DOCUMENT1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-stored-procedure"></a><span data-ttu-id="3a066-344">Отмена регистрации хранимой процедуры</span><span class="sxs-lookup"><span data-stu-id="3a066-344">Unregistering a stored procedure</span></span>
<span data-ttu-id="3a066-345">Отменить регистрацию хранимой процедуры можно с помощью команды HTTP DELETE, выполняемой для существующего ресурса хранимой процедуры.</span><span class="sxs-lookup"><span data-stu-id="3a066-345">Unregistering a stored procedure is simply done by issuing an HTTP DELETE against an existing stored procedure resource.</span></span>   

    client.deleteStoredProcedureAsync(createdStoredProcedure.resource._self)
        .then(function (response) {
            return;
        }, function(error) {
            console.log("Error");
        });


### <a name="registering-a-pre-trigger"></a><span data-ttu-id="3a066-346">Регистрация триггера со срабатыванием до наступления события</span><span class="sxs-lookup"><span data-stu-id="3a066-346">Registering a pre-trigger</span></span>
<span data-ttu-id="3a066-347">Регистрация триггера осуществляется путем создания ресурса триггера в коллекции с помощью команды HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="3a066-347">Registration of a trigger is done by creating a new trigger resource on a collection via HTTP POST.</span></span> <span data-ttu-id="3a066-348">Можно указать, если триггер hello является предварительной или post триггер и hello тип операции может быть сопоставлен (например создание, замена, Delete или все).</span><span class="sxs-lookup"><span data-stu-id="3a066-348">You can specify if hello trigger is a pre or a post trigger and hello type of operation it can be associated with (e.g. Create, Replace, Delete, or All).</span></span>   

    var preTrigger = {
        id: "upperCaseId",
        body: function() {
                var item = getContext().getRequest().getBody();
                item.id = item.id.toUpperCase();
                getContext().getRequest().setBody(item);
        },
        triggerType: TriggerType.Pre,
        triggerOperation: TriggerOperation.All
    }

    client.createTriggerAsync(collection._self, preTrigger)
        .then(function (createdPreTrigger) {
            console.log("Successfully created trigger");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-pre-trigger"></a><span data-ttu-id="3a066-349">Запуск триггера со срабатыванием до наступления события</span><span class="sxs-lookup"><span data-stu-id="3a066-349">Executing a pre-trigger</span></span>
<span data-ttu-id="3a066-350">Выполнение триггера выполняется путем указания имени существующего триггера hello во время выполнения запроса POST, PUT и DELETE hello ресурса документа через заголовок запроса hello hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-350">Execution of a trigger is done by specifying hello name of an existing trigger at hello time of issuing hello POST/PUT/DELETE request of a document resource via hello request header.</span></span>  

    client.createDocumentAsync(collection._self, { id: "doc1", key: "Love in hello Time of Cholera" }, { preTriggerInclude: "upperCaseId" })
        .then(function(createdDocument) {
            assert.equal(createdDocument.resource.id, "DOC1");
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-pre-trigger"></a><span data-ttu-id="3a066-351">Отмена регистрации триггера со срабатыванием до наступления события</span><span class="sxs-lookup"><span data-stu-id="3a066-351">Unregistering a pre-trigger</span></span>
<span data-ttu-id="3a066-352">Отменить регистрацию триггера можно с помощью команды HTTP DELETE, выполняемой для существующего ресурса триггера.</span><span class="sxs-lookup"><span data-stu-id="3a066-352">Unregistering a trigger is simply done via issuing an HTTP DELETE against an existing trigger resource.</span></span>  

    client.deleteTriggerAsync(createdPreTrigger._self);
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

### <a name="registering-a-udf"></a><span data-ttu-id="3a066-353">Регистрация определяемой пользователем функции</span><span class="sxs-lookup"><span data-stu-id="3a066-353">Registering a UDF</span></span>
<span data-ttu-id="3a066-354">Регистрация определяемой пользователем функции осуществляется путем создания нового ресурса UDF в коллекции или через команду HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="3a066-354">Registration of a UDF is done by creating a new UDF resource on a collection via HTTP POST.</span></span>  

    var udf = { 
        id: "mathSqrt",
        body: function(number) {
                return Math.sqrt(number);
        },
    };
    client.createUserDefinedFunctionAsync(collection._self, udf)
        .then(function (createdUdf) {
            console.log("Successfully created stored procedure");
        }, function(error) {
            console.log("Error");
        });

### <a name="executing-a-udf-as-part-of-hello-query"></a><span data-ttu-id="3a066-355">Выполнение определяемой пользователем функции как часть запроса hello</span><span class="sxs-lookup"><span data-stu-id="3a066-355">Executing a UDF as part of hello query</span></span>
<span data-ttu-id="3a066-356">Определяемая пользователем Функция может быть указан как часть запроса SQL hello и используется как базовая hello tooextend способом [язык запросов SQL для hello DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span><span class="sxs-lookup"><span data-stu-id="3a066-356">A UDF can be specified as part of hello SQL query and is used as a way tooextend hello core [SQL query language for hello DocumentDB API](https://msdn.microsoft.com/library/azure/dn782250.aspx).</span></span>

    var filterQuery = "SELECT udf.mathSqrt(r.Age) AS sqrtAge FROM root r WHERE r.FirstName='John'";
    client.queryDocuments(collection._self, filterQuery).toArrayAsync();
        .then(function(queryResponse) {
            var queryResponseDocuments = queryResponse.feed;
        }, function(error) {
            console.log("Error");
        });

### <a name="unregistering-a-udf"></a><span data-ttu-id="3a066-357">Отмена регистрации определяемой пользователем функции</span><span class="sxs-lookup"><span data-stu-id="3a066-357">Unregistering a UDF</span></span>
<span data-ttu-id="3a066-358">Отменить регистрацию определяемой пользователем функции можно с помощью команды HTTP DELETE, выполняемой для существующего ресурса UDF.</span><span class="sxs-lookup"><span data-stu-id="3a066-358">Unregistering a UDF is simply done by issuing an HTTP DELETE against an existing UDF resource.</span></span>  

    client.deleteUserDefinedFunctionAsync(createdUdf._self)
        .then(function(response) {
            return;
        }, function(error) {
            console.log("Error");
        });

<span data-ttu-id="3a066-359">Несмотря на то, что фрагменты hello выше показал регистрации hello (POST), отмены регистрации (PUT), чтения или списка (GET) и выполнения (POST) через hello [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), можно также использовать hello [API-интерфейс REST](/rest/api/documentdb/) или других [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-359">Although hello snippets above showed hello registration (POST), unregistration (PUT), read/list (GET) and execution (POST) via hello [JavaScript SDK](https://github.com/Azure/azure-documentdb-js), you can also use hello [REST APIs](/rest/api/documentdb/) or other [client SDKs](documentdb-sdk-dotnet.md).</span></span> 

## <a name="documents"></a><span data-ttu-id="3a066-360">Документы</span><span class="sxs-lookup"><span data-stu-id="3a066-360">Documents</span></span>
<span data-ttu-id="3a066-361">Вы можете вставлять, заменять, удалять, читать, перечислять и запрашивать произвольные документы JSON в коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-361">You can insert, replace, delete, read, enumerate and query arbitrary JSON documents in a collection.</span></span> <span data-ttu-id="3a066-362">Cosmos DB не требует какой-либо схемы и не требует вторичные индексы в порядке toosupport запросы к документам в коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-362">Cosmos DB does not mandate any schema and does not require secondary indexes in order toosupport querying over documents in a collection.</span></span> <span data-ttu-id="3a066-363">Максимальный размер документа Hello составляет 2 МБ.</span><span class="sxs-lookup"><span data-stu-id="3a066-363">hello maximum size for a document is 2 MB.</span></span>   

<span data-ttu-id="3a066-364">Являясь по-настоящему открытой службой базы данных, Cosmos DB не изобретает какие-то специализированные типы данных (например, date time) или конкретные кодировки для документов JSON.</span><span class="sxs-lookup"><span data-stu-id="3a066-364">Being a truly open database service, Cosmos DB does not invent any specialized data types (e.g. date time) or specific encodings for JSON documents.</span></span> <span data-ttu-id="3a066-365">Обратите внимание, что Cosmos DB не требуются все специальные JSON соглашения toocodify hello связи между различных документов; синтаксис SQL Hello Cosmos DB предоставляет очень мощный иерархических и реляционные операторы документов tooquery и проекта без специальных заметок и необходимость toocodify связи между документами с помощью свойства различающееся.</span><span class="sxs-lookup"><span data-stu-id="3a066-365">Note that Cosmos DB does not require any special JSON conventions toocodify hello relationships among various documents; hello SQL syntax of Cosmos DB provides very powerful hierarchical and relational query operators tooquery and project documents without any special annotations or need toocodify relationships among documents using distinguished properties.</span></span>  

<span data-ttu-id="3a066-366">Как можно создавать документы с другими ресурсами, заменены, удалены, чтение, перечисления и запрашивать легко с помощью API-интерфейс REST или любой из hello [клиентских SDK](documentdb-sdk-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="3a066-366">As with all other resources, documents can be created, replaced, deleted, read, enumerated and queried easily using either REST APIs or any of hello [client SDKs](documentdb-sdk-dotnet.md).</span></span> <span data-ttu-id="3a066-367">Удаление документа мгновенно освобождает hello квоты соответствующий tooall hello вложенные вложений.</span><span class="sxs-lookup"><span data-stu-id="3a066-367">Deleting a document instantly frees up hello quota corresponding tooall of hello nested attachments.</span></span> <span data-ttu-id="3a066-368">Hello чтения уровень согласованности документов следует hello согласованности политики в отношении hello учетной записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-368">hello read consistency level of documents follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="3a066-369">Эта политика может быть переопределена для каждого запроса в зависимости от требований к согласованности данных для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-369">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="3a066-370">Во время запроса документов, hello чтения hello следующим согласованности режим установки на семейство hello индексирования.</span><span class="sxs-lookup"><span data-stu-id="3a066-370">When querying documents, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="3a066-371">Для «согласованность» это следует политике согласованности hello учетной записи.</span><span class="sxs-lookup"><span data-stu-id="3a066-371">For “consistent”, this follows hello account’s consistency policy.</span></span> 

## <a name="attachments-and-media"></a><span data-ttu-id="3a066-372">Вложения и мультимедиа</span><span class="sxs-lookup"><span data-stu-id="3a066-372">Attachments and media</span></span>
<span data-ttu-id="3a066-373">Cosmos DB позволяет toostore двоичных больших двоичных объектов или носителя с помощью DB Cosmos (не более 2 ГБ на учетную запись) или tooyour собственный носитель внешнего хранилища.</span><span class="sxs-lookup"><span data-stu-id="3a066-373">Cosmos DB allows you toostore binary blobs/media either with Cosmos DB (maximum of 2 GB per account) or tooyour own remote media store.</span></span> <span data-ttu-id="3a066-374">Она также позволяет toorepresent hello метаданные носителя с точки зрения специальных документ вложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-374">It also allows you toorepresent hello metadata of a media in terms of a special document called attachment.</span></span> <span data-ttu-id="3a066-375">Вложение в Cosmos DB является документ специальные (JSON), который ссылки hello мультимедиа или большого двоичного объекта хранятся в других местах.</span><span class="sxs-lookup"><span data-stu-id="3a066-375">An attachment in Cosmos DB is a special (JSON) document that references hello media/blob stored elsewhere.</span></span> <span data-ttu-id="3a066-376">Вложение имеет специальные документа, который фиксирует hello метаданных (например, расположение, автора и т.д.) хранятся в хранилище носитель внешнего носителя.</span><span class="sxs-lookup"><span data-stu-id="3a066-376">An attachment is simply a special document that captures hello metadata (e.g. location, author etc.) of a media stored in a remote media storage.</span></span> 

<span data-ttu-id="3a066-377">Рассмотрим приложение социальных чтения, который использует Cosmos DB toostore рукописные примечания и выделяет метаданных, включая комментарии, закладки, оценки, отзывы и предложения, т. д., электронная книга определенного пользователя, связанный.</span><span class="sxs-lookup"><span data-stu-id="3a066-377">Consider a social reading application which uses Cosmos DB toostore ink annotations, and metadata including comments, highlights, bookmarks, ratings, likes/dislikes etc. associated for an e-book of a given user.</span></span>   

* <span data-ttu-id="3a066-378">Hello содержимое книги hello сам хранится в хранилище мультимедиа hello либо доступны как часть Cosmos DB учетной записи базы данных или хранилища внешнего носителя.</span><span class="sxs-lookup"><span data-stu-id="3a066-378">hello content of hello book itself is stored in hello media storage either available as part of Cosmos DB database account or a remote media store.</span></span> 
* <span data-ttu-id="3a066-379">Приложение может хранить метаданные каждого пользователя в виде отдельного документа. Например, метаданные пользователя Джо для книги Book1 можно хранить в документе, имеющем ссылку /colls/joe/docs/book1.</span><span class="sxs-lookup"><span data-stu-id="3a066-379">An application may store each user’s metadata as a distinct document -- e.g. Joe’s metadata for book1 is stored in a document referenced by /colls/joe/docs/book1.</span></span> 
* <span data-ttu-id="3a066-380">Вложения, указывающий toohello страницы содержимого книги данного пользователя хранятся в соответствующий документ hello например /colls/joe/docs/book1/chapter1 /colls/joe/docs/book1/chapter2 и т. д.</span><span class="sxs-lookup"><span data-stu-id="3a066-380">Attachments pointing toohello content pages of a given book of a user are stored under hello corresponding document e.g. /colls/joe/docs/book1/chapter1, /colls/joe/docs/book1/chapter2 etc.</span></span> 

<span data-ttu-id="3a066-381">Обратите внимание, что вышеперечисленные hello примеры использования понятное идентификаторы tooconvey hello ресурсов иерархии.</span><span class="sxs-lookup"><span data-stu-id="3a066-381">Note that hello examples listed above use friendly ids tooconvey hello resource hierarchy.</span></span> <span data-ttu-id="3a066-382">Доступа к ресурсам через hello API-интерфейс REST через идентификаторы ресурса.</span><span class="sxs-lookup"><span data-stu-id="3a066-382">Resources are accessed via hello REST APIs through unique resource ids.</span></span> 

<span data-ttu-id="3a066-383">Для носителя hello, управляется Cosmos DB свойство _media hello hello вложения будет ссылаться hello мультимедиа по URI.</span><span class="sxs-lookup"><span data-stu-id="3a066-383">For hello media that is managed by Cosmos DB, hello _media property of hello attachment will reference hello media by its URI.</span></span> <span data-ttu-id="3a066-384">Cosmos DB обеспечит toogarbage сбор hello мультимедиа при всех оставшихся ссылок hello удаляются.</span><span class="sxs-lookup"><span data-stu-id="3a066-384">Cosmos DB will ensure toogarbage collect hello media when all of hello outstanding references are dropped.</span></span> <span data-ttu-id="3a066-385">Cosmos DB автоматически создает hello вложения, при передаче нового носителя hello и заполняет hello _media toopoint toohello вновь добавленный носителя.</span><span class="sxs-lookup"><span data-stu-id="3a066-385">Cosmos DB automatically generates hello attachment when you upload hello new media and populates hello _media toopoint toohello newly added media.</span></span> <span data-ttu-id="3a066-386">При выборе toostore hello мультимедиа в хранилище BLOB-объектов, управляется вами (например OneDrive хранилища Azure, DropBox и т. д), по-прежнему можно использовать media hello tooreference вложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-386">If you choose toostore hello media in a remote blob store managed by you (e.g. OneDrive, Azure Storage, DropBox etc), you can still use attachments tooreference hello media.</span></span> <span data-ttu-id="3a066-387">В этом случае будет самостоятельно создать вложение hello и заполните его свойство _media.</span><span class="sxs-lookup"><span data-stu-id="3a066-387">In this case, you will create hello attachment yourself and populate its _media property.</span></span>   

<span data-ttu-id="3a066-388">Как и другие ресурсы, вложения могут быть созданы, заменены, удален, чтение или перечисление легко с помощью API-интерфейс REST или любой из клиентских hello SDK.</span><span class="sxs-lookup"><span data-stu-id="3a066-388">As with all other resources, attachments can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="3a066-389">Как с документами, hello чтения уровень согласованности вложений следует hello согласованности политики в отношении hello учетной записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-389">As with documents, hello read consistency level of attachments follows hello consistency policy on hello database account.</span></span> <span data-ttu-id="3a066-390">Эта политика может быть переопределена для каждого запроса в зависимости от требований к согласованности данных для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-390">This policy can be overridden on a per-request basis depending on data consistency requirements of your application.</span></span> <span data-ttu-id="3a066-391">При запросе для вложений hello чтения hello следующим согласованности режим установки на семейство hello индексирования.</span><span class="sxs-lookup"><span data-stu-id="3a066-391">When querying for attachments, hello read consistency follows hello indexing mode set on hello collection.</span></span> <span data-ttu-id="3a066-392">Для «согласованность» это следует политике согласованности hello учетной записи.</span><span class="sxs-lookup"><span data-stu-id="3a066-392">For “consistent”, this follows hello account’s consistency policy.</span></span> 
 

## <a name="users"></a><span data-ttu-id="3a066-393">Пользователи</span><span class="sxs-lookup"><span data-stu-id="3a066-393">Users</span></span>
<span data-ttu-id="3a066-394">Пользователь в Cosmos DB представляет собой логическое пространство имен для группировки разрешений.</span><span class="sxs-lookup"><span data-stu-id="3a066-394">A Cosmos DB user represents a logical namespace for grouping permissions.</span></span> <span data-ttu-id="3a066-395">Cosmos DB пользователь может соответствовать tooa пользователя в систему управления удостоверение или роль стандартное приложение.</span><span class="sxs-lookup"><span data-stu-id="3a066-395">A Cosmos DB user may correspond tooa user in an identity management system or a predefined application role.</span></span> <span data-ttu-id="3a066-396">Для Cosmos DB пользователь просто представляет абстракции toogroup набор разрешений в базе данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-396">For Cosmos DB, a user simply represents an abstraction toogroup a set of permissions under a database.</span></span>   

<span data-ttu-id="3a066-397">Для реализации Многопользовательские приложения в приложении, можно создать пользователей в DB Cosmos соответствующая tooyour фактических пользователей или клиентов hello приложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-397">For implementing multi-tenancy in your application, you can create users in Cosmos DB which corresponds tooyour actual users or hello tenants of your application.</span></span> <span data-ttu-id="3a066-398">Затем можно создать разрешения для данного пользователя, которые соответствуют toohello контроля доступа к различным коллекции, документы, вложения, и т. д.</span><span class="sxs-lookup"><span data-stu-id="3a066-398">You can then create permissions for a given user that correspond toohello access control over various collections, documents, attachments, etc.</span></span>   

<span data-ttu-id="3a066-399">Как приложения требуется tooscale с ростом вашего пользователя, можно применить различные способы tooshard данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-399">As your applications need tooscale with your user growth, you can adopt various ways tooshard your data.</span></span> <span data-ttu-id="3a066-400">Вы можете смоделировать каждого из пользователей следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3a066-400">You can model each of your users as follows:</span></span>   

* <span data-ttu-id="3a066-401">Каждый пользователь сопоставляет tooa базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-401">Each user maps tooa database.</span></span>
* <span data-ttu-id="3a066-402">Каждый пользователь сопоставляет tooa коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-402">Each user maps tooa collection.</span></span> 
* <span data-ttu-id="3a066-403">Документы соответствующих пользователей toomultiple перейдите tooa выделенной коллекции.</span><span class="sxs-lookup"><span data-stu-id="3a066-403">Documents corresponding toomultiple users go tooa dedicated collection.</span></span> 
* <span data-ttu-id="3a066-404">Документы соответствующих пользователей toomultiple go tooa набор коллекций.</span><span class="sxs-lookup"><span data-stu-id="3a066-404">Documents corresponding toomultiple users go tooa set of collections.</span></span>   

<span data-ttu-id="3a066-405">Независимо от hello конкретных сегментирования Выбор стратегии можно моделировать фактических пользователей как пользователи базы данных Cosmos DB и связать пользователя tooeach детально настроенные разрешения.</span><span class="sxs-lookup"><span data-stu-id="3a066-405">Regardless of hello specific sharding strategy you choose, you can model your actual users as users in Cosmos DB database and associate fine grained permissions tooeach user.</span></span>  

<span data-ttu-id="3a066-406">![Коллекции пользователей][3]</span><span class="sxs-lookup"><span data-stu-id="3a066-406">![User collections][3]</span></span>  
<span data-ttu-id="3a066-407">**Стратегии сегментирования и моделирования пользователей**</span><span class="sxs-lookup"><span data-stu-id="3a066-407">**Sharding strategies and modeling users**</span></span>

<span data-ttu-id="3a066-408">Как и другие ресурсы пользователи в Cosmos DB могут быть созданы, заменен, удалить, читать или перечисление легко с помощью API-интерфейс REST или любой из клиентских hello SDK.</span><span class="sxs-lookup"><span data-stu-id="3a066-408">Like all other resources, users in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="3a066-409">Cosmos DB всегда предоставляет строгая согласованность для чтения или запрос метаданных hello ресурса пользователя.</span><span class="sxs-lookup"><span data-stu-id="3a066-409">Cosmos DB always provides strong consistency for reading or querying hello metadata of a user resource.</span></span> <span data-ttu-id="3a066-410">Стоит обратить внимание, что при удалении пользователя автоматически обеспечивает, получить доступ к hello разрешений, содержащихся в нем.</span><span class="sxs-lookup"><span data-stu-id="3a066-410">It is worth pointing out that deleting a user automatically ensures that you cannot access any of hello permissions contained within it.</span></span> <span data-ttu-id="3a066-411">Несмотря на то, что hello Cosmos DB высвобождает квоты hello hello разрешений в рамках пользователь удален hello в фоновом режиме hello, hello удалены разрешения доступен сразу же еще раз для вас toouse.</span><span class="sxs-lookup"><span data-stu-id="3a066-411">Even though hello Cosmos DB reclaims hello quota of hello permissions as part of hello deleted user in hello background, hello deleted permissions is available instantly again for you toouse.</span></span>  

## <a name="permissions"></a><span data-ttu-id="3a066-412">Разрешения</span><span class="sxs-lookup"><span data-stu-id="3a066-412">Permissions</span></span>
<span data-ttu-id="3a066-413">В контексте контроля доступа такие ресурсы, как учетные записи баз данных, базы данных, пользователи и разрешения, считаются *административными* ресурсами, так как для обращения к ним требуются права администратора.</span><span class="sxs-lookup"><span data-stu-id="3a066-413">From an access control perspective, resources such as database accounts, databases, users and permission are considered *administrative* resources since these require administrative permissions.</span></span> <span data-ttu-id="3a066-414">На hello другой стороны, включая hello коллекции, документы, вложения, хранимые процедуры, триггеры, ресурсы и определяемые пользователем функции областью действия в данной базе данных и считается *ресурсы приложения*.</span><span class="sxs-lookup"><span data-stu-id="3a066-414">On hello other hand, resources including hello collections, documents, attachments, stored procedures, triggers, and UDFs are scoped under a given database and considered *application resources*.</span></span> <span data-ttu-id="3a066-415">Соответствующая toohello два типа ресурсов и hello ролей, которые обращаются к этим (а именно: hello администратора и пользователя), модель авторизации hello определяет два типа *ключи доступа*: *главный ключ* и *ключ ресурса*.</span><span class="sxs-lookup"><span data-stu-id="3a066-415">Corresponding toohello two types of resources and hello roles that access them (namely hello administrator and user), hello authorization model defines two types of *access keys*: *master key* and *resource key*.</span></span> <span data-ttu-id="3a066-416">Hello главного ключа в рамках учетной записи базы данных hello и предоставляются toohello разработчика (или администратор), подготавливает hello учетной записи базы данных.</span><span class="sxs-lookup"><span data-stu-id="3a066-416">hello master key is a part of hello database account and is provided toohello developer (or administrator) who is provisioning hello database account.</span></span> <span data-ttu-id="3a066-417">Этот главный ключ имеет семантику администратора, в том, что она может быть tooboth доступа используется tooauthorize администратора и ресурсы приложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-417">This master key has administrator semantics, in that it can be used tooauthorize access tooboth administrative and application resources.</span></span> <span data-ttu-id="3a066-418">Напротив, ключ ресурса — это ключ детального доступа, который позволяет доступ tooa *конкретных* ресурса приложения.</span><span class="sxs-lookup"><span data-stu-id="3a066-418">In contrast, a resource key is a granular access key that allows access tooa *specific* application resource.</span></span> <span data-ttu-id="3a066-419">Таким образом он получает hello связь между hello пользователя базы данных и hello разрешения hello пользователем для определенного ресурса (например коллекции, документ, вложения, хранимой процедурой, триггером или определяемой пользователем функции).</span><span class="sxs-lookup"><span data-stu-id="3a066-419">Thus, it captures hello relationship between hello user of a database and hello permissions hello user has for a specific resource (e.g. collection, document, attachment, stored procedure, trigger, or UDF).</span></span>   

<span data-ttu-id="3a066-420">Hello единственным способом tooobtain ключ ресурса является создание ресурс разрешение указанному пользователю.</span><span class="sxs-lookup"><span data-stu-id="3a066-420">hello only way tooobtain a resource key is by creating a permission resource under a given user.</span></span> <span data-ttu-id="3a066-421">Обратите внимание, что в порядке toocreate или получить разрешение, главного ключа должна быть представлена в заголовке авторизации hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-421">Note that In order toocreate or retrieve a permission, a master key must be presented in hello authorization header.</span></span> <span data-ttu-id="3a066-422">Ресурс разрешения связывает пользователя ресурсов, доступа и hello hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-422">A permission resource ties hello resource, its access and hello user.</span></span> <span data-ttu-id="3a066-423">После создания ресурса разрешения, hello пользователю достаточно toopresent hello связанного ресурса ключ в порядке toogain доступа toohello соответствующего ресурса.</span><span class="sxs-lookup"><span data-stu-id="3a066-423">After creating a permission resource, hello user only needs toopresent hello associated resource key in order toogain access toohello relevant resource.</span></span> <span data-ttu-id="3a066-424">Таким образом можно просмотреть ключ ресурса в виде логического и compact представление ресурса разрешения hello.</span><span class="sxs-lookup"><span data-stu-id="3a066-424">Hence, a resource key can be viewed as a logical and compact representation of hello permission resource.</span></span>  

<span data-ttu-id="3a066-425">Как и другие ресурсы, разрешения в Cosmos DB могут быть созданы, заменены, удален, чтение или перечисление легко с помощью API-интерфейс REST или любой из клиентских hello SDK.</span><span class="sxs-lookup"><span data-stu-id="3a066-425">As with all other resources, permissions in Cosmos DB can be created, replaced, deleted, read or enumerated easily using either REST APIs or any of hello client SDKs.</span></span> <span data-ttu-id="3a066-426">Cosmos DB всегда предоставляет строгая согласованность для запроса метаданных hello разрешения или чтения.</span><span class="sxs-lookup"><span data-stu-id="3a066-426">Cosmos DB always provides strong consistency for reading or querying hello metadata of a permission.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="3a066-427">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="3a066-427">Next steps</span></span>
<span data-ttu-id="3a066-428">Дополнительные сведения о работе с ресурсами с помощью команд HTTP см. в статье [Azure Cosmos DB: Azure Cosmos DB REST API](https://msdn.microsoft.com/library/azure/mt622086.aspx) (Azure Cosmos DB. REST API Azure Cosmos DB).</span><span class="sxs-lookup"><span data-stu-id="3a066-428">Learn more about working with resources by using HTTP commands in [RESTful interactions with Cosmos DB resources](https://msdn.microsoft.com/library/azure/mt622086.aspx).</span></span>

[1]: media/documentdb-resources/resources1.png
[2]: media/documentdb-resources/resources2.png
[3]: media/documentdb-resources/resources3.png

