---
title: "aaaConnect tooAzure Cosmos DB средствами бизнес-Аналитики analytics | Документы Microsoft"
description: "Узнайте, как toouse hello Azure Cosmos DB ODBC драйвера toocreate таблиц и представлений, чтобы нормализованные данные можно просмотреть в программе аналитика бизнес-Аналитики и данных."
keywords: "ODBC, драйвер ODBC"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: 
documentationcenter: 
ms.assetid: 9967f4e5-4b71-4cd7-8324-221a8c789e6b
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: rest-api
ms.topic: article
ms.date: 05/24/2017
ms.author: mimig
ms.openlocfilehash: e12a70f7805445f09fac01411e4bfbccc9a29c7a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="connect-tooazure-cosmos-db-using-bi-analytics-tools-with-hello-odbc-driver"></a>Подключение tooAzure Cosmos DB средствами анализа бизнес-Аналитики с драйвером ODBC hello

Hello Azure Cosmos DB ODBC драйвера включает tooconnect tooAzure DB Cosmos Бизнес-аналитики с помощью средств, таких как SQL Server Integration Services, Power BI Desktop и Tableau, можно анализировать и создавать визуализации данных Azure Cosmos DB в тех решения.

драйвер Azure Cosmos DB ODBC Hello совместимые ODBC 3.8 и поддерживает синтаксис ANSI SQL-92. Здравствуйте, драйвер предлагает богатые возможности toohelp renormalize данные в базе данных Azure Cosmos. С помощью драйвера hello, может представлять данные в базе данных Azure Cosmos в виде таблиц и представлений. драйвер Hello позволяет tooperform операции SQL для hello таблиц и представлений, включая группу запросов, вставки, обновления и удаления.

## <a name="why-do-i-need-toonormalize-my-data"></a>Зачем нужен toonormalize Мои данные?
Azure Cosmos DB является schemaless базы данных, поэтому он обеспечивает возможность быстрой разработки приложений, включение приложения tooiterate свои данные модели на лету hello и не ограничивать их tooa strict схемы. Отдельная база данных Azure Cosmos DB может содержать документы JSON разной структуры. Это отлично подходит для быстрой разработки приложений, но tooanalyze и создавать отчеты о данных с помощью анализа данных и средств бизнес-Аналитики, hello данных часто требуется toobe плоские и соответствовать определенной схеме tooa.

Это происходит, когда вступает в дело hello драйвер ODBC. С помощью драйвера ODBC hello, вы можете теперь повторно нормализованный данные в базе данных Azure Cosmos в таблицы и представления подгонки tooyour данных, анализа и создания отчетов должен. схемы повторно нормализованный Hello не оказывают влияния на исходные данные hello и не ограничивать toothem tooadhere разработчиков, они просто включите вы tooleverage ODBC-совместимую tooaccess hello данных средств. База данных Azure Cosmos DB придется по душе не только разработчикам, но и специалистам по анализу данных.

Теперь позволяет начать с драйвером ODBC hello.

## <a id="install"></a>Шаг 1: Установка драйвера Azure Cosmos DB ODBC hello

1. Загрузите драйверы hello для вашей среды:

    * [Microsoft Azure Cosmos DB ODBC 64-bit.msi](https://aka.ms/documentdb-odbc-64x64) для 64-разрядной версии Windows.
    * [Microsoft Azure Cosmos DB ODBC 32x64-bit.msi](https://aka.ms/documentdb-odbc-32x64) для 32-разрядной версии на 64-разрядной версии Windows.
    * [Microsoft Azure Cosmos DB ODBC 32-bit.msi](https://aka.ms/documentdb-odbc-32x32) для 32-разрядной версии Windows.

    Msi выполнения hello файл на компьютере, какие hello начинается **Microsoft Azure Cosmos DB ODBC драйвера установки**. 
2. Завершите приветствия мастера установки, с помощью драйвера ODBC hello ввода tooinstall по умолчанию hello.
3. Откройте hello **администратора источника данных ODBC** приложение на компьютере, это можно сделать введя **источники данных ODBC** поле поиска hello Windows. 
    Вы можете подтвердить hello драйвера, щелкнув hello **драйверы** вкладку и обеспечивая **Microsoft Azure Cosmos DB ODBC Driver** указан.

    ![Администратор источников данных ODBC для Azure Cosmos DB](./media/odbc-driver/odbc-driver.png)

## <a id="connect"></a>Шаг 2: Подключение базы данных Azure Cosmos DB tooyour

1. После [драйвер Azure Cosmos DB ODBC Установка hello](#install), в hello **администратор источников данных ODBC** окно, нажмите кнопку **добавить**. Вы можете создать пользовательское или системное имя источника данных. В этом примере мы создаем пользовательское имя источника данных.
2. В hello **Создание нового источника данных** выберите **Microsoft Azure Cosmos DB ODBC Driver**, а затем нажмите кнопку **Готово**.
3. В hello **SDN установки драйвера ODBC Azure Cosmos DB** окна, заполните hello следующее: 

    ![Окно настройки имени источника данных драйвера ODBC для Azure Cosmos DB](./media/odbc-driver/odbc-driver-dsn-setup.png)
    - **Имя источника данных**: понятное имя для hello ODBC DSN. Это имя учетной записи Azure Cosmos DB уникальный tooyour, так что имя правильно при наличии нескольких учетных записей.
    - **Описание**: краткое описание источника данных hello.
    - **Узел** — универсальный код ресурса (URI) для учетной записи Azure Cosmos DB. Можно получить из колонки hello Azure Cosmos DB ключи в hello портал Azure, как показано в следующий снимок экрана приветствия. 
    - **Доступ к ключу**: hello первичной или вторичной, чтения и записи или только для чтения ключа из колонки hello Azure Cosmos DB ключи в hello портал Azure, как показано на следующий снимок экрана приветствия. Мы рекомендуем использовать hello ключа, доступного только для чтения, если hello DSN используется для обработки данных только для чтения и создания отчетов.
    ![Колонка ключей Azure Cosmos DB](./media/odbc-driver/odbc-driver-keys.png)
    - **Зашифровать ключ доступа для**: выберите hello лучший выбор, основанный на количестве hello пользователей этой машины. 
4. Нажмите кнопку hello **тест** убедиться, что вы можете подключиться к учетной записи Azure Cosmos DB tooyour toomake кнопки. 
5. Нажмите кнопку **Дополнительные параметры** и набор hello следующие значения:
    - **Запрос согласованности**: выберите hello [уровень согласованности](consistency-levels.md) на операции. по умолчанию Hello-сеанс.
    - **Число повторных попыток**: Введите hello число попыток tooretry операции, если первоначальный запрос hello не была завершена из-за регулирования tooservice.
    - **Schema File** (Файл схемы). Здесь можно выбрать один из нескольких вариантов.
        - По умолчанию, если оставить эту запись как пустое () драйвер hello сканирует hello первой страницы данных для всех коллекций схем hello toodetermine каждой коллекции. Этот процесс известен как сопоставление коллекций. Файл схемы не определен драйвер hello имеет tooperform hello проверки для каждого сеанса драйвера и может привести к более запуске время приложения с помощью hello DSN. Мы рекомендуем связывать файл схемы для имени источника данных.
        - Если уже имеется файл схемы (возможно одно, созданного с помощью hello [редактор схем](#schema-editor)), можно щелкнуть **Обзор**, перейдите в файл tooyour, щелкните **Сохранить**и нажмите кнопку **ОК**.
        - Toocreate новую схему, нажмите кнопку **ОК**, а затем нажмите кнопку **редактор схем** в главном окне приветствия. Для продолжения toohello [редактор схем](#schema-editor) сведения. После создания нового файла схемы hello, помните назад toohello toogo **Дополнительно** файл схемы hello только что созданный tooinclude окна.

6. После завершения и закрытия hello **DSN установки драйвера ODBC Azure Cosmos DB** hello — новый пользовательский DSN добавляется вкладка toohello DSN пользователя.

    ![Новый ODBC DSN DB Azure Cosmos вкладки DSN пользователя hello](./media/odbc-driver/odbc-driver-user-dsn.png)

## <a id="#collection-mapping"></a>: Шаг 3 определение схемы с помощью метода сопоставления коллекции hello

Существует два типа методов выборки, которые можно использовать: **сопоставление коллекций** и **таблицы-разделители**. В сеансе выборки могут использоваться оба метода выборки, но в каждой коллекции можно использовать только один из них. Hello шаги создания схемы данных hello в одну или несколько коллекций, с помощью метода сопоставления коллекции hello. Этот метод выборки получает hello данные на странице приветствия структуры hello toodetermine коллекции данных hello. Он переставляет коллекции tooa таблицы на стороне ODBC hello. Этот метод выборки при эффективного и быстрого однородные данные hello в коллекции. Если коллекция содержит разнородной тип данных, рекомендуется использовать hello [разделители таблицы сопоставления метод](#table-mapping) как она обеспечивает более надежный метод выборки структур данных toodetermine hello в коллекции hello. 

1. После завершения шагов 1 – 4 в [базы данных Azure Cosmos DB tooyour Connect](#connect), нажмите кнопку **редактор схем** в hello **DSN установки драйвера ODBC Azure Cosmos DB** окна.

    ![В окне установки DSN драйвера ODBC DB Azure Cosmos hello кнопку редактора схемы](./media/odbc-driver/odbc-driver-schema-editor.png)
2. В hello **редактор схем** окно, нажмите кнопку **создать новый**.
    Hello **сформировать схему** окна отображаются все коллекции hello в учетной записи Azure Cosmos DB hello. 
3. Выберите один или несколько коллекций toosample и нажмите кнопку **пример**. 
4. В hello **конструкторе** представлены вкладки, hello базы данных, схемы и таблицы. В режиме таблицы hello сканирования hello отображает hello набор свойств, связанных с именами столбцов hello (имя SQL, имя источника, и т. д.).
    Для каждого столбца можно изменить имя SQL hello столбца, тип SQL hello, длина SQL (если применимо), масштабирование (если применимо), точность (если применимо) и допускает значение NULL.
    - Можно задать **скрыть столбец** слишком**true** Если tooexclude этот столбец из результатов запроса. Столбцы помечены как скрыть столбец = true не возвращаются для выбора и проекции, несмотря на то, что они по-прежнему являются частью схемы hello. Например можно скрыть все свойства система, требуемая для Azure Cosmos DB hello, начиная с «_».
    - Hello **идентификатор** столбца — hello только поле, которое не может быть скрытым, поскольку он используется как hello первичного ключа в схеме нормализованный hello. 
5. После завершения определения схемы hello щелкните **файл** | **Сохранить**, перейдите toosave hello toohello каталога схемы и нажмите кнопку **Сохранить**.

    Если в будущем hello toouse эту схему с DSN, откройте окно DSN установки драйвера ODBC Azure Cosmos DB hello (с помощью hello администратор источников данных ODBC), нажмите кнопку Дополнительно и перейдите toohello сохранить схему в имя файла схемы hello. Сохранение файла схемы tooan существующего источника данных изменяет hello DSN подключения tooscope toohello данных и структуры, определяемой схемы.

## <a id="table-mapping"></a>Шаг 4: Создайте определение схемы с помощью таблицы hello-разделителей сопоставления метод

Существует два типа методов выборки, которые можно использовать: **сопоставление коллекций** и **таблицы-разделители**. В сеансе выборки могут использоваться оба метода выборки, но в каждой коллекции можно использовать только один из них. 

Hello следующие шаги создания схемы для hello данных в одну или несколько коллекций с помощью hello **таблицы разделители** сопоставления метод. Мы рекомендуем использовать этот метод выборки, если коллекции содержат разнородные данные. Можно использовать этот метод tooscope hello, выборки tooa набор атрибутов и соответствующие значения. Например если документ содержит свойство «Type», вы можете задать область hello выборки toohello значения этого свойства. конечный результат выборки hello Hello представляет собой набор таблиц для каждого hello значений типа были выбраны. Например, если выбрать значение "Автомобиль", будет создана таблица со сведениями об автомобилях, а если выбрать значение "Самолет", будет создана таблица со сведениями о самолетах.

1. После завершения шагов 1 – 4 в [базы данных Azure Cosmos DB tooyour Connect](#connect), нажмите кнопку **редактор схем** в окне DSN установки драйвера ODBC Azure Cosmos DB hello.
2. В hello **редактор схем** окно, нажмите кнопку **создать новый**.
    Hello **сформировать схему** окна отображаются все коллекции hello в учетной записи Azure Cosmos DB hello. 
3. Выберите коллекцию для hello **представление образца** hello на вкладке **сопоставление определения** выберите столбец для коллекции hello **изменить**. Затем в hello **сопоставление определения** выберите **разделители таблицы** метод. Затем hello следующие:

    а. В hello **атрибуты** введите имя hello свойства разделитель. Это свойство в документе нужного tooscope hello выборки, например, города, и нажмите клавишу ВВОД. 

    b. Требуется только tooscope hello выборки toocertain значения для только что введен атрибута hello, выберите атрибут hello в поле выбора hello, а затем введите значение в hello **значение** , например, Сиэтл и нажмите клавишу введите в поле. Вы можете продолжить tooadd несколько значений атрибутов. Просто убедитесь, что hello, исправьте атрибут, выбранный при вводе значения.

    Например, при включении **атрибуты** значение Город и вы хотите toolimit tooonly вашей таблице относятся строки со значением города Нью-Йорке и Дубаи, Город, введите в поле атрибуты hello и Нью-Йорке и Дубаи в hello  **Значения** поле.
4. Нажмите кнопку **ОК**. 
5. После завершения определения сопоставлений hello для коллекций hello требуется toosample в hello **редактор схем** окно, нажмите кнопку **пример**.
     Для каждого столбца можно изменить имя SQL hello столбца, тип SQL hello, длина SQL (если применимо), масштабирование (если применимо), точность (если применимо) и допускает значение NULL.
    - Можно задать **скрыть столбец** слишком**true** Если tooexclude этот столбец из результатов запроса. Столбцы помечены как скрыть столбец = true не возвращаются для выбора и проекции, несмотря на то, что они по-прежнему являются частью схемы hello. Например можно скрыть все свойства система, требуемая для Azure Cosmos DB "hello", начиная с «_».
    - Hello **идентификатор** столбца — hello только поле, которое не может быть скрытым, поскольку он используется как hello первичного ключа в схеме нормализованный hello. 
6. После завершения определения схемы hello щелкните **файл** | **Сохранить**, перейдите toosave hello toohello каталога схемы и нажмите кнопку **Сохранить**.
7. Вернитесь в hello **DSN установки драйвера ODBC Azure Cosmos DB** окно, нажмите кнопку ** Дополнительные параметры **. Затем в hello **файл схемы** перейдите toohello сохранен файл схемы и нажмите кнопку **ОК**. Нажмите кнопку **ОК** снова toosave hello DSN. Эта схема hello сохраняет, вы создали toohello DSN. 

## <a name="optional-creating-views"></a>Создание представлений (необязательно)
Можно определить и создать представления в рамках процесса выборки hello. Эти представления являются tooSQL эквивалент. Они доступны только для чтения и являются области hello выбора и проекции hello, определенные базы данных SQL Azure Cosmos. 

toocreate представление данных в hello **редактор схем** окна "Свойства" hello **определения представления** столбец, нажмите кнопку **добавить** в строку hello toosample коллекции hello. Затем в hello **определения представления** окне hello следующие:
1. Нажмите кнопку **New**, введите имя для представления hello, например, EmployeesfromSeattleView и нажмите кнопку **ОК**.
2. В hello **изменить представление** окно, введите запрос Azure Cosmos DB. Это должен быть SQL-запрос Azure Cosmos DB, например `SELECT c.City, c.EmployeeName, c.Level, c.Age, c.Gender, c.Manager FROM c WHERE c.City = “Seattle”`. Затем нажмите кнопку **ОК**.

Количество создаваемых представлений не ограничено. После завершения работы определение hello представлений, можно затем произвести выборку данных hello. 

## <a name="step-5-view-your-data-in-bi-tools-such-as-power-bi-desktop"></a>Шаг 5. Просмотр данных в инструментах бизнес-аналитики (Power BI Desktop)

Можно использовать ваш новый DSN tooconnect DocumentADB с любой ODBC-совместимую средства — этот шаг просто показывает, как tooconnect tooPower BI Desktop и создать визуализации Power BI.

1. Откройте Power BI Desktop.
2. Щелкните **Получить данные**.
3. В hello **получить данные** окно, нажмите кнопку **других** | **ODBC** | **Connect**.
4. В hello **из ODBC** окно, выберите hello источник данных создан и нажмите кнопку **ОК**. Можно оставить hello **Дополнительно** пустой записи.
5. В hello **доступа к источнику данных с помощью драйвера ODBC** выберите **по умолчанию или пользовательскую** и нажмите кнопку **Connect**. Нет необходимости tooinclude hello **учетных данных свойства строки соединения**.
6. В hello **Навигатор** окно hello левой панели разверните hello базы данных, hello схемы и таблицы, а затем выберите hello. панель результатов Hello включает hello данных с помощью созданной схемой hello.
7. Установите флажок "hello" перед именем таблицы hello toovisualize hello данных в Power BI desktop и нажмите кнопку **нагрузки**.
8. В Power BI Desktop на левом краю hello вкладку hello данных ![вкладка "Данные" в Power BI Desktop,](./media/odbc-driver/odbc-driver-data-tab.png) tooconfirm данных был импортирован.
9. Теперь можно создавать визуальные элементы с помощью Power BI, щелкнув вкладку отчет hello ![вкладку отчет в Power BI Desktop](./media/odbc-driver/odbc-driver-report-tab.png), а затем выбрав **новый Visual**и затем Настройка плитки. Дополнительные сведения о создании визуализаций в Power BI Desktop см. в статье [Типы визуализаций в Power BI](https://powerbi.microsoft.com/documentation/powerbi-service-visualization-types-for-reports-and-q-and-a/).

## <a name="troubleshooting"></a>Устранение неполадок

Если появляется следующая ошибка hello убедитесь hello **узла** и **ключ доступа** значения, скопированные hello портал Azure в [шаг 2](#connect) указаны правильно и повторите попытку. Использовать toohello кнопки копирования hello справа от приветствия **узла** и **ключ доступа** значения в hello без ошибок значения hello Azure toocopy портала.

    [HY000]: [Microsoft][Azure Cosmos DB] (401) HTTP 401 Authentication Error: {"code":"Unauthorized","message":"hello input authorization token can't serve hello request. Please check that hello expected payload is built as per hello protocol, and check hello key being used. Server used hello following payload toosign: 'get\ndbs\n\nfri, 20 jan 2017 03:43:55 gmt\n\n'\r\nActivityId: 9acb3c0d-cb31-4b78-ac0a-413c8d33e373"}`

## <a name="next-steps"></a>Дальнейшие действия

toolearn Дополнительные сведения о базе данных Azure Cosmos, в разделе [возможности Azure Cosmos DB?](introduction.md).
