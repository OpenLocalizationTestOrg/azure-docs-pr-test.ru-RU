---
title: aaaTemplates
description: "В этом разделе описываются шаблоны для центров уведомлений Azure."
services: notification-hubs
documentationcenter: .net
author: ysxu
manager: erikre
editor: 
ms.assetid: a41897bb-5b4b-48b2-bfd5-2e3c65edc37e
ms.service: notification-hubs
ms.workload: mobile
ms.tgt_pltfrm: mobile-multiple
ms.devlang: multiple
ms.topic: article
ms.date: 06/29/2016
ms.author: yuaxu
ms.openlocfilehash: 0149f0c7473e5a4b952905bc8217582b58db2a0d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="templates"></a>Шаблоны
## <a name="overview"></a>Обзор
Шаблоны включают клиента toospecify hello точное формате приложения hello уведомлений, что ему нужны tooreceive. С помощью шаблонов, приложения могут использовать несколько разных преимуществ, включая hello следующее:

* Серверная часть, не зависящая от платформы
* Персонализированные уведомления
* Независимость от версии клиента
* Простая локализация

В этом разделе примеры двух подробные как toouse toosend шаблоны платформенно независимые уведомления, предназначенных для всех устройств на платформах и toopersonalize широковещательных tooeach устройства создания уведомлений.

## <a name="using-templates-cross-platform"></a>Использование шаблонов для разных платформ
стандартный способ toosend Hello push-уведомления — toosend для каждого из уведомлений, отправленных toobe полезной нагрузки tooplatform служб notification services (WNS, APNS). Для примера toosend предупреждения tooAPNS hello полезных данных является объект Json hello следующие формы:

    {"aps": {"alert" : "Hello!" }}

toosend похожее сообщение извещения на приложения для магазина Windows hello полезные данные XML выглядит следующим образом:

    <toast>
      <visual>
        <binding template=\"ToastText01\">
          <text id=\"1\">Hello!</text>
        </binding>
      </visual>
    </toast>

Аналогичные полезные данные можно создавать для платформ MPNS (Windows Phone) и GCM (Android).

Это требование заставляет hello приложения серверной tooproduce различных полезных данных для каждой платформы и фактически делает серверной hello ответственность за частью уровень представления hello приложение hello. К некоторым вопросам относятся локализация и графические макеты (особенно для приложений Магазина Windows, которые содержат уведомления для плиток различных типов).

функция шаблона Hello концентраторы уведомлений позволяет клиентского приложения toocreate специальные регистраций, вызывается регистрации шаблонов, которые включают, кроме toohello набор тегов, шаблон. Hello концентраторы уведомлений шаблона позволяет клиентских устройств tooassociate приложения с шаблонами ли вы работаете с установок (предпочтительно) или регистраций. Hello в предыдущих примерах полезных данных, hello только сведения, независимый от платформы является фактический предупреждающее сообщение hello (Привет!). Шаблон — это набор инструкций для hello концентратора уведомлений на как tooformat зависящим от платформы сообщений для регистрации этого конкретного клиентского приложения hello. В предыдущих пример hello, независимые сообщение hello платформы является одно свойство: **сообщения = Hello!**.

Hello следующий рисунок иллюстрирует hello выше процесс:

![](./media/notification-hubs-templates/notification-hubs-hello.png)

Hello шаблон для регистрации клиентского приложения hello iOS выглядит следующим образом:

    {"aps": {"alert": "$(message)"}}

— Hello соответствующего шаблона для клиентского приложения для магазина Windows hello:

    <toast>
        <visual>
            <binding template=\"ToastText01\">
                <text id=\"1\">$(message)</text>
            </binding>
        </visual>
    </toast>

Обратите внимание, что фактическое сообщение hello будет подставляться выражение hello $(сообщение). Это выражение указывает, что hello концентратора уведомлений при каждой отправке toothis сообщения определенного регистрации, toobuild сообщение, которое соответствует ее и коммутаторов в общее значение hello.

При работе с моделью установки hello установочный ключ «шаблоны» содержит JSON несколько шаблонов. При работе с моделью регистрации клиентского приложения hello можно создать несколько регистраций в порядке toouse несколько шаблонов; Например шаблон для предупреждающих сообщений и шаблон для обновления плитки. Клиентские приложения также могут использовать комбинацию собственных регистраций (регистраций без шаблона) и регистраций с шаблонами.

Hello концентратора уведомлений отправляет одно уведомление для каждого шаблона без учета того, принадлежат ли они toohello того же клиентского приложения. Это поведение может быть уведомлений используется tootranslate независимая от платформы в дополнительные уведомления. Например, hello же toohello независимыми сообщение платформы, которые концентратор уведомлений можно легко преобразовать в предупреждении всплывающих и обновление плитки, не требуя hello известна toobe серверной части. Обратите внимание, что некоторые платформы (например, iOS) могут свернуть несколько уведомлений toohello одного устройства, если они отправляются за короткий период времени.

## <a name="using-templates-for-personalization"></a>Использование шаблонов для персонализации
Другое преимущество toousing шаблонов — toouse hello возможности персонализации регистрации концентраторов уведомлений tooperform уведомлений. Например рассмотрим приложение погоды, которое отображает плитки с hello погодных условий в указанное местоположение. Пользователь может выбрать между отображением градусов Цельсия или Фаренгейта и прогноз на один или на пять дней. С помощью шаблонов, каждая установка приложения клиента можно зарегистрировать для hello формат, требуемый (1 день Цельсия, 1 день Фаренгейта, 5 дней Цельсия 5 дней фаренгейт), и отправить одно сообщение, содержащий сведения обо всех hello необходимые toofill те серверной hello шаблоны (например, пять дней прогноз с градусы Цельсия или Фаренгейта).

шаблон Hello для hello один день с Цельсию прогноза температуры выглядит следующим образом:

    <tile>
      <visual>
        <binding template="TileWideSmallImageAndText04">
          <image id="1" src="$(day1_image)" alt="alt text"/>
          <text id="1">Seattle, WA</text>
          <text id="2">$(day1_tempC)</text>
        </binding>  
      </visual>
    </tile>

сообщение, отправленное Hello toohello концентратора уведомлений содержит все hello следующие свойства:

<table border="1">

<tr><td>day1_image</td><td>day2_image</td><td>day3_image</td><td>day4_image</td><td>day5_image</td></tr>

<tr><td>day1_tempC</td><td>day2_tempC</td><td>day3_tempC</td><td>day4_tempC</td><td>day5_tempC</td></tr>

<tr><td>day1_tempF</td><td>day2_tempF</td><td>day3_tempF</td><td>day4_tempF</td><td>day5_tempF</td></tr>
</table><br/>

Используя этот шаблон, серверной hello только отправляет одно сообщение без необходимости toostore параметры конкретного персонализации для пользователей приложения hello. Hello следующий рисунок иллюстрирует этот сценарий:

![](./media/notification-hubs-templates/notification-hubs-registration-specific.png)

## <a name="how-tooregister-templates"></a>Как tooregister шаблонов
tooregister с шаблонами, с помощью модели установки hello (предпочтительно) или hello модель регистрации в разделе [управления регистрацией](notification-hubs-push-notification-registration-management.md).

## <a name="template-expression-language"></a>Язык выражений шаблонов
Шаблоны — это ограниченная tooXML или форматы документов JSON. Кроме того, выражения можно размещать только в определенных местах. Например, атрибуты узла или значения для XML и значения строковых свойств для JSON.

Hello Следующая таблица показывает язык hello в шаблонах.

| Expression | Описание |
| --- | --- |
| $(prop) |Справочник по tooan свойство события с заданным именем hello. В именах свойств регистр не учитывается. Данное выражение равно в свойство hello текстовое значение или пустая строка, если свойство hello отсутствует. |
| $(prop, n) |Как описано выше, но hello текст является явным образом обрезается до n символов, например $(название, 20) отсекает hello содержимое свойства title hello до 20 символов. |
| .(prop, n) |Как описано выше, но hello текст добавляется с тремя точками, как оно обрезается. общий размер Hello hello усеченные строки и суффикс hello не превышает n символов. . (название, 20) с входного свойства «Это строка заголовка hello» при запуске **это заголовок hello...** |
| %(prop) |Аналогичные too$(name), за исключением того, выходные данные hello закодированный URI. |
| #(prop) |Используется в шаблонах JSON (например, для шаблонов iOS и Android).<br><br>Эта функция работает точно hello же, как $(prop) ранее указано, за исключением случаев использования в шаблонах JSON (например, шаблоны Apple). В этом случае, если эта функция не будет окружена «{«,»}» (например, «myJsonProperty»: «#(name)»), и он оценивает tooa число в формате Javascript, например, regexp: (0 &#124; (&#91; 1-9 &#93; &#91; 0-9 & #93 ;*))(\. &#91; 0-9 &#93; +)? ((e &#124; E) (+ &#124;-)? &#91; 0-9 &#93; +)?, то hello выходных данных JSON является числом.<br><br>Например ‘badge : ‘#(name)’ становится ‘badge’ : 40 (а не ‘40‘). |
| ‘text’ или “text” |Литерал. Литералы содержат произвольный текст, заключенный в одинарные или двойные кавычки. |
| expr1 + expr2 |Оператор объединения Hello объединение двух выражений в одну строку. |

Hello выражения могут быть любые предшествующие forms hello.

При использовании объединения, hello всего выражения должны заключаться в {}. Например, {$(prop) + ‘ - ’ + $(prop2)}. |

Например следующие hello не допустимый XML-шаблон:

    <tile>
      <visual>
        <binding $(property)>
          <text id="1">Seattle, WA</text>
        </binding>  
      </visual>
    </tile>


Как было сказано выше, при использовании конкатенации выражения должны быть заключены в фигурные скобки. Например:

    <tile>
      <visual>
        <binding template="ToastText01">
          <text id="1">{'Hi, ' + $(name)}</text>
        </binding>  
      </visual>
    </tile>

