---
title: "aaaBest и рекомендации для функций Azure | Документы Microsoft"
description: "Ознакомьтесь с рекомендациями и шаблонами для Функций Azure."
services: functions
documentationcenter: na
author: wesmc7777
manager: erikre
editor: 
tags: 
keywords: "Функции Azure, шаблоны, рекомендация, функции, обработка событий, объекты webhook, динамические вычисления, бессерверная архитектура"
ms.assetid: 9058fb2f-8a93-4036-a921-97a0772f503c
ms.service: functions
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 06/13/2017
ms.author: glenga
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: bd3d826b75267a740e355b008943a48f71ebd339
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="optimize-hello-performance-and-reliability-of-azure-functions"></a>Оптимизировать производительность hello и надежность функций Azure

Эта статья содержит рекомендации tooimprove hello производительности и надежности приложений-функций. 


## <a name="avoid-long-running-functions"></a>Избегайте длительных функций

Крупные длительные функции могут вызывать непредвиденные проблемы времени ожидания. Функция может оказаться большим из-за зависимости toomany Node.js. Импорт зависимостей может также привести к замедлению загрузки, что, в свою очередь, приводит к непредвиденным проблемам времени ожидания. Зависимости можно загрузить явно и неявно. Один модуль, загруженный в коде, может загрузить собственные дополнительные модули.  

По возможности выполняйте рефакторинг крупных функций и перерабатывайте их на более мелкие совместимые наборы функций, которые работают сообща и быстро возвращают ответ. Например веб-перехватчик или функция триггера HTTP может потребовать подтверждения ответ в течение некоторого ограниченного промежутка времени; Чаще всего для веб-перехватчиков toorequire ответ немедленно. Полезные данные триггера hello HTTP можно передать в toobe очереди, обрабатываемых функция очереди триггера. Такой подход позволяет toodefer hello фактическую работу и возвращает ответ немедленно.


## <a name="cross-function-communication"></a>Взаимодействие функций

При установке нескольких функций, обычно является наилучшим практике toouse очереди хранилища для функции обмена данными между.  Hello основной причиной является то очереди хранилища дешевле и гораздо проще tooprovision. 

Отдельные сообщения в очередь хранилища, ограничены размером too64 КБ. При необходимости toopass больших сообщений между функциями очереди шины обслуживания Azure может быть размером сообщений используется toosupport копирование too256 КБ.

Если перед обработкой сообщений их нужно отфильтровать, ознакомьтесь со статьями о служебной шине.

Концентраторы событий являются полезным toosupport связи большого объема.


## <a name="write-functions-toobe-stateless"></a>Запись toobe функции без сохранения состояния 

По возможности функции должны быть без отслеживания состояния и идемпотентными. Свяжите любые необходимые сведения о состоянии со своими данными. Например, с обрабатываемым заказом скорее всего будет связан элемент `state`. Функция может обработать заказ, основываясь на это состояние, а сама функция hello остается без сохранения состояния. 

Идемпотентные функции рекомендуется использовать с триггерами таймера. Например если вас что-то совершенно необходимо запустить один раз в день, напишите он мог выполняться любое время в течение дня hello с hello одинаковые результаты. Если нет заданий для конкретного дня выхода из функции Hello. Также при предыдущем запуске сбой toocomplete, следующий запуск hello следует взять прерванную.


## <a name="write-defensive-functions"></a>Создавайте защищенные функции

Предположим, что в любое время в функции может возникнуть исключение. Разрабатывать собственные функции с помощью toocontinue возможность hello из предыдущей точки сбоя во время следующего выполнения hello. Рассмотрим сценарий, требующий hello, следующие действия:

1. Запросить 10 000 строк в базе данных.
2. Создание очереди сообщений для каждого из этих строк tooprocess дальнейшей строку hello вниз.
 
В зависимости от сложности системы, подчиненные службы могут работать неправильно, могут происходить сбои в работе сети или нарушения лимитов квоты и т. д. Все это может в любое время повлиять на функцию. Необходимо toodesign вашей toobe функции, готовым к ней.

Как отреагирует ваш код при сбое после вставки 5000 элементов в очередь для обработки? Отслеживайте элементы в наборе, работа с которым завершена. В противном случае их можно вставить позже. Это может серьезно повлиять на рабочий процесс. 

Если элемент очереди уже был обработан, позволит вашей toobe функция холостой.

Воспользуйтесь преимуществами защитные меры, уже предоставлены для компонентов, используемых в платформе Azure функции hello. Например, в разделе **обработка сообщений в очередь подозрительных сообщений** hello документации по [запускает очередь хранилища Azure](functions-bindings-storage-queue.md#trigger).
 

## <a name="dont-mix-test-and-production-code-in-hello-same-function-app"></a>Не рабочего и тестового набора программировать в hello так же функция приложения

Функции в приложении-функции совместно используют ресурсы. Например, память. Если вы используете приложение функции в рабочей среде, не добавлять функции, связанные с тестами и tooit ресурсов. Это может вызвать непредвиденные затраты во время выполнения кода в рабочей среде.

Следите за тем, что вы загружаете в рабочие приложения-функции. Память усредняется с учетом каждой функции в приложение hello.

При наличии общей сборки, указанной в нескольких функциях .Net, поместите ее в общую папку. Ссылка сборки hello аналогичные toohello оператор, следующий пример: 

    #r "..\Shared\MyAssembly.dll". 

В противном случае это просто tooaccidentally развертывания нескольких версий теста же двоичного файла, которые ведут себя по-разному между функции hello.

Не используйте подробное ведение журнала в рабочем коде. Это отрицательно сказывается на производительности.



## <a name="use-async-code-but-avoid-blocking-calls"></a>Использование асинхронного кода без блокирующих вызовов

Рекомендуется применять метод асинхронного программирования. Однако всегда избегать ссылок hello `Result` свойства или метода `Wait` метод `Task` экземпляра. Этот подход может привести нехватка toothread.


[!INCLUDE [HTTP client best practices](../../includes/functions-http-client-best-practices.md)]

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения см. в разделе hello следующие ресурсы:

Так как Функции Azure используют службу приложений Azure, необходимо также ознакомиться с рекомендациями для нее.
* [Шаблоны и методики оптимизации производительности HTTP](https://docs.microsoft.com/azure/architecture/antipatterns/improper-instantiation/)

