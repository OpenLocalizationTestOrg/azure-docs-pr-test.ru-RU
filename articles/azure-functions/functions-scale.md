---
title: "планы aaaAzure потребления функции и службы приложений | Документы Microsoft"
description: "Понимать, как функции Azure масштабирует потребностей hello toomeet рабочей нагрузки на основе событий."
services: functions
documentationcenter: na
author: lindydonna
manager: erikre
editor: 
tags: 
keywords: "функции azure, функции, обработка событий, веб-перехватчики, динамические вычисления, независимая архитектура"
ms.assetid: 5b63649c-ec7f-4564-b168-e0a74cb7e0f3
ms.service: functions
ms.devlang: multiple
ms.topic: reference
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 06/12/2017
ms.author: glenga
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3826915b93328635d9295efe90ecc421e6c56af2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-functions-consumption-and-app-service-plans"></a>Планы потребления и службы приложений Функций Azure 

## <a name="introduction"></a>Введение

Службу "Функции Azure" можно запускать в двух разных режимах: план потребления и план службы приложений Azure. план потребления Hello автоматически размещает вычислительной мощности, когда кода выполняется, при необходимости toohandle загрузки масштабируемостью и затем масштабируется, если код не выполняется. Таким образом у вас нет toopay для неактивных виртуальных машин и отсутствии ресурсов tooreserve заранее. Эта статья посвящена hello потребления плана. Дополнительные сведения о работе hello план служб приложений см. в разделе hello [исчерпывающий обзор планы службы приложений Azure](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md). 

Если вы не знакомы с функциями Azure, см. раздел hello [обзор функции Azure](functions-overview.md).

При создании приложения функции, необходимо настроить план размещения для функций содержит приложение hello. В каждом из режимов экземпляр hello *узла Azure функции* выполняет функции hello. Тип Hello плана элементов управления:

* Способ развертывания экземпляров узла.
* Hello ресурсы, доступные tooeach узла.

В настоящее время необходимо выбрать тип hello плана во время создания приложения hello функции hello. После этого вы не сможете его изменить. 

Можно масштабировать между уровнями на hello план служб приложений. В плане использования hello функции Azure автоматически обрабатывает все выделения ресурсов.

## <a name="consumption-plan"></a>План потребления

При использовании плана потребление экземпляров узла Azure функции hello динамически добавляются и удаляются в зависимости от количества hello входящих событий. Этот план автоматически масштабируется, и вы платите за вычислительные ресурсы только тогда, когда ваши функции запущены. В плане потребления функция может выполняться не более 10 минут. 

> [!NOTE]
> время ожидания по умолчанию Hello для функций согласно плану потребление равно 5 минутам. Hello значение может быть Повышенная too10 минут hello функции приложения, изменив свойство hello `functionTimeout` в [host.json](https://github.com/Azure/azure-webjobs-sdk-script/wiki/host.json).

Счет выставляется на основе времени выполнения и использованной памяти и вычисляется по всем функциям в приложении-функции. Дополнительные сведения см. в разделе hello [функции Azure странице цен].

план потребления Hello по умолчанию hello и предлагает hello следующие преимущества:
- Оплата насчитывается только при выполнении функций.
- Масштабирование выполняется автоматически, даже во время периодов высокой нагрузки.

## <a name="app-service-plan"></a>План службы приложений

В службы приложения hello планирование, вашего приложения функции работать на выделенных виртуальных машин на Basic, Standard и Premium SKU, аналогичные tooWeb приложений. Выделенные виртуальные машины — это выделенный tooyour приложения службы приложений, что означает, что узел функции hello всегда работает.

Рассмотрим план служб приложений в hello в следующих случаях:
- У вас есть неиспользуемые виртуальные машины, в которых уже запущены другие экземпляры служб приложений.
- Ожидается, что ваш toorun функции приложений постоянно или почти постоянно.
- Необходимые дополнительные параметры Процессора или памяти, чем описано в плане использования hello.
- Требуется больше времени, чем hello разрешена плана потребления hello максимальное время выполнения toorun.

При использовании виртуальной машины затраты не зависят от времени выполнения и размера памяти. В результате вы не уделять больше, чем стоимость hello hello экземпляра виртуальной Машины, можно выделить. Дополнительные сведения о работе hello план служб приложений см. в разделе hello [исчерпывающий обзор планы службы приложений Azure](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md). 

С помощью плана службы приложений вы можете выполнить развертывание вручную, добавив дополнительные экземпляры виртуальных машин, или же включить автоматическое масштабирование. Дополнительные сведения см. в статье [Масштабирование числа экземпляров вручную или автоматически](../monitoring-and-diagnostics/insights-how-to-scale.md?toc=%2fazure%2fapp-service-web%2ftoc.json). Вы можете также увеличивать масштаб, используя разные планы службы приложений. Дополнительные сведения см. в статье [Увеличение масштаба приложения в Azure](../app-service-web/web-sites-scale.md). Если вы планируете toorun функции JavaScript для план служб приложений, следует выбрать план с меньшим числом ядер. Дополнительные сведения см. в разделе hello [Справочник по JavaScript для функций](functions-reference-node.md#choose-single-core-app-service-plans).  

<!-- Note: hello portal links toothis section via fwlink https://go.microsoft.com/fwlink/?linkid=830855 --> 
<a name="always-on"></a>
###Всегда включено

При запуске на план служб приложений, следует включить hello **Always On** установку, чтобы функция приложения выполняется правильно. На план служб приложений среды выполнения функции hello перейдет в состояние бездействия через несколько минут бездействия, поэтому только триггеры HTTP «пробуждения» функций. Это аналогично toohow веб-задания должно иметь включенной функцией Always On. 

Параметр "Всегда включено" доступен только для плана службы приложений. Согласно плану потребления hello платформы автоматически активирует приложений-функций.

## <a name="storage-account-requirements"></a>Требования к учетной записи хранения

И для плана потребления, и для плана службы приложений для приложения-функции требуется учетная запись хранения Azure, которая поддерживает хранилища BLOB-объектов, очередей и таблиц Azure. Для внутренних операций, таких как управление триггерами и ведение журнала выполнения функций, Функции Azure используют службу хранилища Azure. Некоторые учетные записи хранения не поддерживают очереди и таблицы. Например, это относится к учетным записям хранения только для больших двоичных объектов (включая хранилище уровня "Премиум") и учетным записям хранения общего назначения с репликацией ZRS. Эти учетные записи будут отфильтрованы из hello **учетной записи хранилища** колонки, когда вы создаете приложение функции.

toolearn Дополнительные сведения о типы учетных записей хранения, в разделе [введение в службы хранилища Azure hello](../storage/common/storage-introduction.md#introducing-the-azure-storage-services).

## <a name="how-hello-consumption-plan-works"></a>Как работает hello потребления плана

план потребления Hello автоматически масштабируется ресурсы ЦП и памяти, добавив дополнительные экземпляры hello функций узла, на основе количества hello события, которые происходят на свои функции. Каждый экземпляр узла функции hello является ограниченной too1.5 ГБ памяти.

При использовании Здравствуйте потребления плана размещения, функция кода файлы хранятся в общих папках службы файлов Azure в учетной записи основного хранилища hello. При удалении учетной записи основного хранилища hello это содержимое удаляется и не может быть восстановлена.

> [!NOTE]
> При использовании большого двоичного объекта триггера в плане использования, может быть вверх tooa 10 минут задержки в обработке новых больших двоичных объектов, если приложение функция неактивными. После запуска приложение функции hello, большие двоичные объекты обрабатываются немедленно. tooavoid этом начальной задержки, рассмотрите одну из следующих вариантов hello:
> - Используйте план службы приложений с включенной функцией AlwaysOn.
> - Используйте другой механизм tootrigger hello большой двоичный объект обработка, например очереди сообщение, содержащее имя большого двоичного объекта hello. Пример см. в разделе [Пример входной привязки](functions-bindings-storage-blob.md#input-sample).

### <a name="runtime-scaling"></a>Масштабирование среды выполнения

Функции Azure использует компонент, называемый hello *шкалы контроллера* toomonitor hello частота возникновения событий и определите ли tooscale out или уменьшения масштаба. контроллер шкалы Hello использует эвристику для каждого типа триггера. Например при использовании триггер хранилища очередей Azure масштабирует зависимости от длины очереди hello и возраст hello hello старые сообщения в очереди.

Hello единицей масштабирования является приложение hello функции. Когда масштабировать приложение hello функции, дополнительные ресурсы, выделенные toorun несколько экземпляров узла Azure функции hello. И наоборот как вычислительные нагрузка уменьшится, контроллер шкалы hello удаляет экземпляров узла функции. Hello число экземпляров в конечном итоге усеченная toozero, когда функции не работают в приложении функции.

![Мониторинг событий и создание экземпляров с помощью контроллера масштабирования](./media/functions-scale/central-listener.png)

### <a name="billing-model"></a>Модель выставления счетов

Выставление счетов для плана потребления hello подробно описан в hello [функции Azure странице цен]. Использование агрегируется на уровне приложения функции hello и подсчитывает только время hello, на котором выполняется код функции. Hello ниже приведены единицы для выставления счетов. 
* **Потребление ресурсов в гигабайтах в секунду (ГБ/с)**. Вычисляется как сочетание объема памяти и времени выполнения для всех функций, выполняемых в приложении-функции. 
* **Выполнения**. Учитывается каждый раз, когда функция выполняется в ответ tooan событиями, с помощью привязки.

[функции Azure странице цен]: https://azure.microsoft.com/pricing/details/functions
