---
title: "Непрерывное развертывание для Функций Azure | Документация Майкрософт"
description: "Публикация Функций Azure с помощью средств непрерывного развертывания службы приложений Azure."
services: functions
documentationcenter: na
author: ggailey777
manager: cfowler
editor: 
tags: 
ms.assetid: 361daf37-598c-4703-8d78-c77dbef91643
ms.service: functions
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: multiple
ms.workload: na
ms.date: 09/25/2016
ms.author: glenga
ms.openlocfilehash: 35a0b0faa61cf4b42ba1d8696c85f5724ff73f23
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="continuous-deployment-for-azure-functions"></a>Непрерывное развертывание для Функций Azure
Функции Azure упрощают развертывание приложения-функции за счет непрерывной интеграции службы приложений. Компонент функции интегрируется с BitBucket, Dropbox, GitHub и Visual Studio Team Services (VSTS). Это позволяет организовать работу так, чтобы изменения кода функций, вносимые одной из интегрированных служб, активировали развертывание в Azure. Если вы еще не работали с Функциями Azure, начните с [обзора](functions-overview.md).

Непрерывное развертывание очень удобно для проектов, которые часто обновляются несколькими участниками. Этот процесс также обеспечивает поддержку системы управления версиями в коде функций. В настоящее время поддерживаются следующие источники развертывания:

* [Bitbucket;](https://bitbucket.org/)
* [Dropbox](https://www.dropbox.com/)
* Внешний репозиторий (Git или Mercurial)
* [Локальный репозиторий Git](../app-service/app-service-deploy-local-git.md)
* [GitHub](https://github.com)
* [OneDrive](https://onedrive.live.com/)
* [Visual Studio Team Services](https://www.visualstudio.com/team-services/)

Развертывания настраиваются на основе приложения-функции. После включения непрерывного развертывания доступ к коду функции на портале предоставляется *только для чтения*.

## <a name="continuous-deployment-requirements"></a>Требования к непрерывному развертыванию

Перед настройкой непрерывного развертывания нужно настроить источник развертывания и код функций в этом источнике. В заданном развертывании приложения-функции каждая функция расположена в именованном подкаталоге, где имя каталога соответствует имени функции.  

[!INCLUDE [functions-folder-structure](../../includes/functions-folder-structure.md)]

## <a name="set-up-continuous-deployment"></a>Непрерывное развертывание с использованием GIT в службе приложений Azure
Используйте эту процедуру, чтобы настроить непрерывное развертывание для имеющегося приложения-функции. Здесь показана интеграция с репозиторием GitHub, однако аналогичные действия применяются и для Visual Studio Team Services и других служб развертывания.

1. В приложении-функции на [портале Azure](https://portal.azure.com) щелкните **Функции платформы** и **Параметры развертывания**. 
   
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/setup-deployment.png)
 
2. В колонке **Развертывания** щелкните **Настроить**.
 
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/setup-deployment-1.png)
   
2. В колонке **Источник развертывания** щелкните **Выбор источника**, а затем введите сведения о выбранном источнике развертывания и нажмите кнопку **OК**.
   
    ![Выбор источника развертывания](./media/functions-continuous-deployment/choose-deployment-source.png)

После настройки непрерывного развертывания все изменения файлов в источнике развертывания копируются в приложение-функцию, и активируется полное развертывание сайта. После обновления файлов в источнике выполняется повторное развертывание сайта.

## <a name="deployment-options"></a>Варианты развертывания

Ниже приведены некоторые стандартные сценарии развертывания.

- [Создание промежуточного развертывания](#staging)
- [Перемещение имеющихся функций в среду непрерывного развертывания](#existing)

<a name="staging"></a>
### <a name="create-a-staging-deployment"></a>Создание промежуточного развертывания

В настоящее время приложения-функции не поддерживают слоты развертывания. Однако промежуточными и рабочими развертываниями можно отдельно управлять с помощью непрерывной интеграции.

Обычно процедура настройки и работа с промежуточным развертыванием выглядят следующим образом.

1. Создайте в своей подписке два приложения-функции: одно для рабочего кода, а второе для промежуточного. 

2. Создайте источник развертывания, если он еще не создан. В этом примере используется [GitHub].

3. Для рабочего приложения-функции выполните действия, описанные в разделе **Настройка непрерывного развертывания**, и выберите в качестве ветви развертывания главную ветвь репозитория GitHub.
   
    ![Выбор ветви развертывания](./media/functions-continuous-deployment/choose-deployment-branch.png)

4. Повторите это действие для промежуточного приложения-функции, но вместо главной ветви выберите промежуточную в своем репозитории GitHub. Если источник развертывания не поддерживает ветвление, используйте другую папку.
    
5. Обновите код в промежуточной ветви или папке и убедитесь, что эти изменения отражаются в промежуточном развертывании.

6. После проверки внесите изменения из промежуточной ветви в главную. Это позволит активировать развертывание в рабочем приложении-функции. Если источник развертывания не поддерживает ветвление, замените файлы в рабочей папке файлами из промежуточной папки.

<a name="existing"></a>
### <a name="move-existing-functions-to-continuous-deployment"></a>Перемещение имеющихся функций в среду непрерывного развертывания
Если вы создали функции и разместили их на портале, прежде чем настроить непрерывное развертывание, как описано выше, необходимо скачать имеющиеся файлы кода функции с помощью FTP или локального репозитория Git. Это можно сделать в параметрах службы приложений для приложения-функции. Скачанные файлы можно отправить в выбранный источник непрерывного развертывания.

> [!NOTE]
> После настройки непрерывной интеграции исходные файлы больше нельзя изменять на портале функций.

- [Практическое руководство. Настройка учетных данных развертывания](#credentials)
- [Практическое руководство. Скачивание файлов с помощью FTP](#downftp)
- [Практическое руководство. Скачивание файлов с помощью локального репозитория Git](#downgit)

<a name="credentials"></a>
#### <a name="how-to-configure-deployment-credentials"></a>Практическое руководство. Настройка учетных данных развертывания
Чтобы скачать файлы из приложения-функции с помощью FTP или локального репозитория Git, нужно настроить учетные данные для доступа к сайту. Учетные данные задаются на уровне приложения-функции. Чтобы задать учетные данные развертывания на портале Azure, выполните следующие действия:

1. В приложении-функции на [портале Azure](https://portal.azure.com) щелкните **Функции платформы** и **Учетные данные развертывания**.
   
    ![Настройка учетных данных локального развертывания](./media/functions-continuous-deployment/setup-deployment-credentials.png)

2. Введите имя пользователя и пароль, а затем щелкните **Сохранить**. Теперь эти учетные данные можно использовать для доступа к приложению-функции из FTP или встроенного репозитория Git.

<a name="downftp"></a>
#### <a name="how-to-download-files-using-ftp"></a>Практическое руководство. Скачивание файлов с помощью FTP

1. В приложении-функции на [портале функций Azure](https://portal.azure.com) щелкните **Функции платформы** и **Свойства**, а затем скопируйте значения параметров **Пользователь FTP или развертывания**, **Имя узла FTP** и **Имя узла FTPS**.  

    Параметр **Пользователь FTP или развертывания** нужно ввести так, как он отображается на портале, включая имя приложения, чтобы обеспечить правильный контекст для FTP-сервера.
   
    ![Получение сведений о развертывании](./media/functions-continuous-deployment/get-deployment-credentials.png)

2. Подключитесь к приложению из клиента FTP, используя полученные сведения, и скачайте исходные файлы функций.

<a name="downgit"></a>
#### <a name="how-to-download-files-using-a-local-git-repository"></a>Практическое руководство. Скачивание файлов с помощью локального репозитория Git

1. В приложении-функции на [портале Azure](https://portal.azure.com) щелкните **Функции платформы** и **Параметры развертывания**. 
   
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/setup-deployment.png)
 
2. В колонке **Развертывания** щелкните **Настроить**.
 
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/setup-deployment-1.png)
   
2. В колонке **Источник развертывания** щелкните **Локальный репозиторий Git** и нажмите кнопку **ОК**.

3. В разделе **Функции платформы**  щелкните **Свойства** и запишите значение URL-адреса репозитория Git. 
   
    ![Настройка непрерывного развертывания](./media/functions-continuous-deployment/get-local-git-deployment-url.png)

4. Клонируйте репозиторий на локальном компьютере с помощью программы командной строки, поддерживающей Git, или одного из средств Git. Команда git clone выглядит следующим образом:
   
        git clone https://username@my-function-app.scm.azurewebsites.net:443/my-function-app.git

5. Получите удаленный доступ к файлам из приложения-функции в клонированном репозитории файлов на локальном компьютере, как показано в следующем примере.
   
        git pull origin master
   
    При появлении запроса укажите свои [настроенные учетные данные развертывания](#credentials).  

[GitHub]: https://github.com/

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Best Practices for Azure Functions](functions-best-practices.md) (Рекомендации по Функциям Azure)
