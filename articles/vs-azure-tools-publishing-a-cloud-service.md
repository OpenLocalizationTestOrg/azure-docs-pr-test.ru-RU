---
title: "Публикация облачной службы с помощью инструментов Azure | Документация Майкрософт"
description: "Узнайте, как публиковать проекты облачных служб Azure с помощью Visual Studio."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 1a07b6e4-3678-4cbf-b37e-4520b402a3d9
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 8/14/2017
ms.author: kraigb
ms.openlocfilehash: e617d600dbc8287eea737fc4969833e873365288
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="publishing-a-cloud-service-using-the-azure-tools"></a><span data-ttu-id="b7f24-103">Публикация облачной службы с помощью инструментов Azure</span><span class="sxs-lookup"><span data-stu-id="b7f24-103">Publishing a Cloud Service using the Azure Tools</span></span>
<span data-ttu-id="b7f24-104">С помощью инструментов Azure для Microsoft Visual Studio можно опубликовать приложение Azure прямо из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="b7f24-104">By using the Azure Tools for Microsoft Visual Studio, you can publish your Azure application directly from Visual Studio.</span></span> <span data-ttu-id="b7f24-105">Visual Studio поддерживает интегрированную публикацию в промежуточную или рабочую среду облачной службы.</span><span class="sxs-lookup"><span data-stu-id="b7f24-105">Visual Studio supports integrated publishing to either the Staging or the Production environment of a cloud service.</span></span>

<span data-ttu-id="b7f24-106">Чтобы опубликовать приложение Azure, нужно иметь подписку Azure.</span><span class="sxs-lookup"><span data-stu-id="b7f24-106">Before you can publish an Azure application, you must have an Azure subscription.</span></span> <span data-ttu-id="b7f24-107">Необходимо также настроить облачную службу и учетную запись хранения для использования в приложении.</span><span class="sxs-lookup"><span data-stu-id="b7f24-107">You must also set up a cloud service and storage account to be used by your application.</span></span> <span data-ttu-id="b7f24-108">Их можно настроить на [классическом портале Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="b7f24-108">You can set these up at the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b7f24-109">Среду развертывания для облачной службы можно выбрать во время публикации.</span><span class="sxs-lookup"><span data-stu-id="b7f24-109">When you publish, you can select the deployment environment for your cloud service.</span></span> <span data-ttu-id="b7f24-110">Вы также должны выбрать учетную запись хранения, которая используется для хранения пакета приложения для развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7f24-110">You must also select a storage account that is used to store the application package for deployment.</span></span> <span data-ttu-id="b7f24-111">После развертывания пакет приложения удаляется из учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="b7f24-111">After deployment, the application package is removed from the storage account.</span></span>
> 
> 

<span data-ttu-id="b7f24-112">Во время разработки и тестирования приложения Azure можно постепенно публиковать изменения веб-ролей с помощью веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7f24-112">When you are developing and testing an Azure application, you can use Web Deploy to publish changes incrementally for your web roles.</span></span> <span data-ttu-id="b7f24-113">После публикации приложения в среду развертывания веб-развертывание позволяет развертывать изменения непосредственно в виртуальную машину, которая выполняет веб-роль.</span><span class="sxs-lookup"><span data-stu-id="b7f24-113">After you publish your application to a deployment environment, Web Deploy lets you deploy changes directly to the virtual machine that is running the web role.</span></span> <span data-ttu-id="b7f24-114">Не обязательно упаковывать и публиковать все приложение Azure каждый раз, когда вы хотите обновить вашу веб-роль, чтобы проверить изменения.</span><span class="sxs-lookup"><span data-stu-id="b7f24-114">You do not have to package and publish your entire Azure application each time you want to update your web role to test out the changes.</span></span> <span data-ttu-id="b7f24-115">При таком подходе изменения веб-роли будут доступны в облаке для тестирования без ожидания, пока приложение будет публиковаться в среде развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7f24-115">With this approach you can have your web role changes available in the cloud for testing without waiting to have your application published to a deployment environment.</span></span>

<span data-ttu-id="b7f24-116">Чтобы опубликовать приложение Azure и обновить веб-роль с помощью веб-развертывания, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b7f24-116">Use the following procedures to publish your Azure application and to update a web role by using Web Deploy:</span></span>

* <span data-ttu-id="b7f24-117">Опубликуйте и упакуйте приложение Azure из Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b7f24-117">Publish or Package an Azure application from Visual Studio</span></span>
* <span data-ttu-id="b7f24-118">Обновите веб-роль в рамках цикла разработки и тестирования</span><span class="sxs-lookup"><span data-stu-id="b7f24-118">Update a web role as part of the development and testing cycle</span></span>

## <a name="publish-or-package-an-azure-application-from-visual-studio"></a><span data-ttu-id="b7f24-119">Опубликуйте и упакуйте приложение Azure из Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b7f24-119">Publish or Package an Azure Application from Visual Studio</span></span>
<span data-ttu-id="b7f24-120">При публикации приложения Azure можно выполнить одну из следующих задач.</span><span class="sxs-lookup"><span data-stu-id="b7f24-120">When you publish your Azure application, you can do one of the following tasks:</span></span>

* <span data-ttu-id="b7f24-121">Создание пакета службы. Этот пакет и файл конфигурации службы можно использовать для публикации приложения в среде развертывания из [классического портала Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="b7f24-121">Create a service package: You can use this package and the service configuration file to publish your application to a deployment environment from the [Azure Classic Portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
* <span data-ttu-id="b7f24-122">Публикация проекта Azure из Visual Studio. Чтобы опубликовать приложение напрямую в Azure, воспользуйтесь мастером публикации.</span><span class="sxs-lookup"><span data-stu-id="b7f24-122">Publish your Azure project from Visual Studio: To publish your application directly to Azure, you use the Publish Wizard.</span></span> <span data-ttu-id="b7f24-123">Дополнительную информацию см. в статье [Мастер публикации приложений Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="b7f24-123">For information, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

### <a name="to-create-a-service-package-from-visual-studio"></a><span data-ttu-id="b7f24-124">Создание пакета службы из Visual Studio</span><span class="sxs-lookup"><span data-stu-id="b7f24-124">To create a service package from Visual Studio</span></span>
1. <span data-ttu-id="b7f24-125">Когда приложение готово к публикации, откройте обозреватель решений, затем контекстное меню проекта Azure, который содержит роли, и выберите пункт "Опубликовать".</span><span class="sxs-lookup"><span data-stu-id="b7f24-125">When you are ready to publish your application, open Solution Explorer, open the shortcut menu for the Azure project that contains your roles, and choose Publish.</span></span>
2. <span data-ttu-id="b7f24-126">Чтобы создать пакет службы, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b7f24-126">To create a service package only, follow these steps:</span></span>  
   
   1. <span data-ttu-id="b7f24-127">Откройте контекстное меню проекта Azure и выберите пункт **Пакет**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-127">On the shortcut menu for the Azure project, choose **Package**.</span></span>
   2. <span data-ttu-id="b7f24-128">В диалоговом окне **Пакет приложения Azure** выберите конфигурацию службы, для которой требуется создать пакет, а затем конфигурацию построения.</span><span class="sxs-lookup"><span data-stu-id="b7f24-128">In the **Package Azure Application** dialog box, choose the service configuration for which you want to create a package, and then choose the build configuration.</span></span>
   3. <span data-ttu-id="b7f24-129">(Необязательно.) Чтобы включить удаленный рабочий стол для облачной службы после ее публикации, установите флажок **Включить удаленный рабочий стол для всех ролей** и нажмите кнопку **Параметры**, чтобы настроить удаленный рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="b7f24-129">(optional) To turn on Remote Desktop for the cloud service after you publish it, select the **Enable Remote Desktop for all Roles** check box, and then select **Settings** to configure Remote Desktop.</span></span> <span data-ttu-id="b7f24-130">Если вы хотите отладить облачную службу после ее публикации, включите удаленную отладку, установив флажок **Включить удаленный отладчик для всех ролей**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-130">If you want to debug your cloud service after you publish it, turn on remote debugging by selecting **Enable Remote Debugger for all Roles**.</span></span>
      
      <span data-ttu-id="b7f24-131">Дополнительную информацию см. в статье [Использование удаленного рабочего стола с ролями Azure](vs-azure-tools-remote-desktop-roles.md).</span><span class="sxs-lookup"><span data-stu-id="b7f24-131">For more information, see [Using Remote Desktop with Azure Roles](vs-azure-tools-remote-desktop-roles.md).</span></span>
   4. <span data-ttu-id="b7f24-132">Для создания пакета щелкните **Пакет** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-132">To create the package, choose the **Package** link.</span></span>
      
      <span data-ttu-id="b7f24-133">Проводник показывает расположение файла только что созданного пакета.</span><span class="sxs-lookup"><span data-stu-id="b7f24-133">File Explorer shows the file location of the newly created package.</span></span> <span data-ttu-id="b7f24-134">Скопируйте расположение на [классическом портале Azure](http://go.microsoft.com/fwlink/?LinkID=213885), чтобы его можно было использовать.</span><span class="sxs-lookup"><span data-stu-id="b7f24-134">You can copy this location so that you can use it from the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
   5. <span data-ttu-id="b7f24-135">Чтобы опубликовать этот пакет в среде развертывания, необходимо использовать расположение в качестве расположения пакета при создании облачной службы, развертывая этот пакет в среде с помощью [классического портала Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="b7f24-135">To publish this package to a deployment environment, you must use this location as the Package location when you create a cloud service and deploy this package to an environment with the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
3. <span data-ttu-id="b7f24-136">(Необязательно) Чтобы отменить процесс развертывания, в контекстном меню строки в журнале действий выберите пункт **Отменить и удалить**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-136">(Optional) To cancel the deployment process, on the shortcut menu for the line item in the activity log, choose **Cancel and remove**.</span></span> <span data-ttu-id="b7f24-137">Это позволит остановить процесс развертывания и удалить среду развертывания из Azure.</span><span class="sxs-lookup"><span data-stu-id="b7f24-137">This stops the deployment process and deletes the deployment environment from Azure.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="b7f24-138">Чтобы удалить среду развертывания после развертывания, воспользуйтесь [классическим порталом Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="b7f24-138">To remove this deployment environment after it has been deployed, you must use the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span>
   > 
   > 
4. <span data-ttu-id="b7f24-139">(Необязательно.) После запуска экземпляров ролей Visual Studio автоматически отображает среду развертывания в узле **Облачные службы** в обозревателе сервера.</span><span class="sxs-lookup"><span data-stu-id="b7f24-139">(Optional) After your role instances have started, Visual Studio automatically shows the deployment environment in the **Cloud Services** node in Server Explorer.</span></span> <span data-ttu-id="b7f24-140">Здесь можно просматривать состояние отдельных экземпляров ролей.</span><span class="sxs-lookup"><span data-stu-id="b7f24-140">From here, you can see the status of the individual role instances.</span></span> <span data-ttu-id="b7f24-141">Ознакомьтесь со статьей [Управление ресурсами Azure с помощью обозревателя облака](vs-azure-tools-resources-managing-with-cloud-explorer.md). На следующем рисунке показаны экземпляры роли в состоянии "Инициализация".</span><span class="sxs-lookup"><span data-stu-id="b7f24-141">See [Managing Azure resources with Cloud Explorer](vs-azure-tools-resources-managing-with-cloud-explorer.md).The following illustration shows the role instances while they are still in the Initializing state:</span></span>
   
    ![VST_DeployComputeNode](./media/vs-azure-tools-publishing-a-cloud-service/IC744134.png)

## <a name="update-a-web-role-as-part-of-the-development-and-testing-cycle"></a><span data-ttu-id="b7f24-143">Обновите веб-роль в рамках цикла разработки и тестирования</span><span class="sxs-lookup"><span data-stu-id="b7f24-143">Update a Web Role as Part of the Development and Testing Cycle</span></span>
<span data-ttu-id="b7f24-144">Если серверная инфраструктура стабильна, но для веб-ролей требуется более частое обновление, можно использовать веб-развертывание, чтобы обновлять только веб-роль в проекте.</span><span class="sxs-lookup"><span data-stu-id="b7f24-144">If your app’s backend infrastructure is stable, but the web roles need more frequent updating, you can use Web Deploy to update only a web role in your project.</span></span> <span data-ttu-id="b7f24-145">Это удобно, если вы не хотите повторно создавать и развертывать серверные рабочие роли или если у вас несколько веб-ролей и вы хотите обновлять только одну из них.</span><span class="sxs-lookup"><span data-stu-id="b7f24-145">This is handy when you don’t want to rebuild and redeploy the backend worker roles, or if you have multiple web roles and you want to update only one of the web roles.</span></span>

### <a name="requirements"></a><span data-ttu-id="b7f24-146">Требования</span><span class="sxs-lookup"><span data-stu-id="b7f24-146">Requirements</span></span>
<span data-ttu-id="b7f24-147">Для обновления веб-роли с помощью функции веб-развертывания должны выполняться указанные ниже требования.</span><span class="sxs-lookup"><span data-stu-id="b7f24-147">Here are the requirements to use Web Deploy to update your web role:</span></span>

* <span data-ttu-id="b7f24-148">**Только для разработки и тестирования.** Изменения вносятся непосредственно в виртуальную машину, в которой выполняется веб-роль.</span><span class="sxs-lookup"><span data-stu-id="b7f24-148">**For development and testing purposes only:** The changes are made directly to the virtual machine where the web role is running.</span></span> <span data-ttu-id="b7f24-149">В случае рециркуляции виртуальной машины изменения будут потеряны, поскольку опубликованный исходный пакет используется для воссоздания виртуальной машины для роли.</span><span class="sxs-lookup"><span data-stu-id="b7f24-149">If this virtual machine has to be recycled, the changes are lost because the original package that you published is used to recreate the virtual machine for the role.</span></span> <span data-ttu-id="b7f24-150">Чтобы последние обновления отразились в веб-роли, необходимо опубликовать приложение повторно.</span><span class="sxs-lookup"><span data-stu-id="b7f24-150">You must republish your application to get the latest changes for the web role.</span></span>
* <span data-ttu-id="b7f24-151">**Можно обновлять только веб-роли.** Рабочие роли не обновляются.</span><span class="sxs-lookup"><span data-stu-id="b7f24-151">**Only web roles can be updated:** Worker roles can’t be updated.</span></span> <span data-ttu-id="b7f24-152">Кроме того, нельзя обновлять параметр RoleEntryPoint в файле webrole.cs.</span><span class="sxs-lookup"><span data-stu-id="b7f24-152">In addition, you can’t update the RoleEntryPoint in web role.cs.</span></span>
* <span data-ttu-id="b7f24-153">**Возможна поддержка только одного экземпляра веб-роли.** Ни одна роль не может существовать в среде развертывания в нескольких экземплярах.</span><span class="sxs-lookup"><span data-stu-id="b7f24-153">**Can only support a single instance of a web role:** You can’t have multiple instances of any web role in your deployment environment.</span></span> <span data-ttu-id="b7f24-154">При этом несколько веб-ролей с одним экземпляром поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="b7f24-154">However, multiple web roles each with only one instance are supported.</span></span>
* <span data-ttu-id="b7f24-155">**Необходимо разрешить подключения к удаленному рабочему столу.** Это нужно для того, чтобы функция веб-развертывания могла подключиться к виртуальной машине, используя имя пользователя и пароль, и развернуть изменения на сервере IIS.</span><span class="sxs-lookup"><span data-stu-id="b7f24-155">**You must enable remote desktop connections:** This is required so that Web Deploy can use the user and password to connect to the virtual machine to deploy the changes to the server that’s running Internet Information Services (IIS).</span></span> <span data-ttu-id="b7f24-156">Возможно также, что вам придется подключиться к виртуальной машине и добавить доверенный сертификат в IIS на этой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="b7f24-156">In addition, you might need to connect to the virtual machine to add a trusted certificate to IIS on this virtual machine.</span></span> <span data-ttu-id="b7f24-157">(Это обеспечивает защиту удаленного подключения к IIS, используемого веб-развертыванием.)</span><span class="sxs-lookup"><span data-stu-id="b7f24-157">(This ensures that the remote connection for IIS that is used by Web Deploy is secure.)</span></span>

<span data-ttu-id="b7f24-158">В описанной ниже процедуре предполагается, что вы используете **мастер публикации приложения Azure** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-158">The following procedure assumes that you are using the **Publish Azure Application** wizard.</span></span>

### <a name="to-enable-web-deploy-when-you-publish-your-application"></a><span data-ttu-id="b7f24-159">Включение веб-развертывания при публикации приложения</span><span class="sxs-lookup"><span data-stu-id="b7f24-159">To Enable Web Deploy When You Publish Your Application</span></span>
1. <span data-ttu-id="b7f24-160">Чтобы установить **Разрешить веб-развертывание для всех веб-ролей**, необходимо сначала настроить подключения удаленного рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="b7f24-160">To enable the **Enable Web Deploy** for all web roles check box, you must first configure remote desktop connections.</span></span> <span data-ttu-id="b7f24-161">Установите флажок **Включить удаленный рабочий стол для всех ролей** и предоставьте учетные данные, которые будут использоваться для удаленного подключения, в появившемся поле **Конфигурация удаленного рабочего стола**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-161">Select **Enable Remote Desktop** for all roles and then supply the credentials that will be used to connect remotely in the **Remote Desktop Configuration** box that appears.</span></span> <span data-ttu-id="b7f24-162">Дополнительную информацию см. в статье [Использование удаленного рабочего стола с ролями Azure](vs-azure-tools-remote-desktop-roles.md).</span><span class="sxs-lookup"><span data-stu-id="b7f24-162">See [Using Remote Desktop with Azure Roles](vs-azure-tools-remote-desktop-roles.md) for more information.</span></span>
2. <span data-ttu-id="b7f24-163">Чтобы включить веб-развертывание для всех веб-ролей приложения, установите флажок **Разрешить веб-развертывание для всех веб-ролей**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-163">To enable Web Deploy for all the web roles in your application, select **Enable Web Deploy for all web roles**.</span></span>
   
    <span data-ttu-id="b7f24-164">Появится желтый предупредительный треугольник.</span><span class="sxs-lookup"><span data-stu-id="b7f24-164">A yellow warning triangle appears.</span></span> <span data-ttu-id="b7f24-165">Веб-развертывание использует недоверенный, самозаверяющий сертификат по умолчанию, который не рекомендуется для передачи конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="b7f24-165">Web Deploy uses an untrusted, self-signed certificate by default, which is not recommended for uploading sensitive data.</span></span> <span data-ttu-id="b7f24-166">Если вам нужно обеспечить этот процесс для конфиденциальных данных, можно добавить сертификат SSL, который будет использоваться для подключений веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7f24-166">If you need to secure this process for sensitive data, you can add a SSL certificate to be used for Web Deploy connections.</span></span> <span data-ttu-id="b7f24-167">Этот сертификат должен быть доверенным.</span><span class="sxs-lookup"><span data-stu-id="b7f24-167">This certificate needs to be a trusted certificate.</span></span> <span data-ttu-id="b7f24-168">Соответствующие инструкции см. ниже в разделе **Безопасное веб-развертывание**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-168">For information about how to do this, see the section **To Make Web Deploy Secure** later in this topic.</span></span>
3. <span data-ttu-id="b7f24-169">Нажмите кнопку **Далее**, чтобы отобразить экран **Сводка**, а затем нажмите кнопку **Опубликовать**, чтобы развернуть облачную службу.</span><span class="sxs-lookup"><span data-stu-id="b7f24-169">Choose **Next** to show the **Summary** screen, and then choose **Publish** to deploy the cloud service.</span></span>
   
    <span data-ttu-id="b7f24-170">Облачная служба будет опубликована.</span><span class="sxs-lookup"><span data-stu-id="b7f24-170">The cloud service is published.</span></span> <span data-ttu-id="b7f24-171">Удаленные подключения создаваемой виртуальной машины включены для IIS таким образом, чтобы можно было использовать веб-развертывание для обновления веб-ролей без повторной публикации.</span><span class="sxs-lookup"><span data-stu-id="b7f24-171">The virtual machine that is created has remote connections enabled for IIS so that Web Deploy can be used to update your web roles without republishing them.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="b7f24-172">Если для веб-роли настроено больше одного экземпляра, выводится предупреждение о том, что каждая веб-роль будет ограничена одним экземпляром в пакете, созданном для публикации приложения.</span><span class="sxs-lookup"><span data-stu-id="b7f24-172">If you have more than one instance configured for a web role, a warning message appears, stating that each web role will be limited to one instance only in the package that’s created to publish your application.</span></span> <span data-ttu-id="b7f24-173">Чтобы продолжить, нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-173">Select **OK** to continue.</span></span> <span data-ttu-id="b7f24-174">Как указано в разделе "Требования", веб-ролей может быть несколько, но у каждой роли может быть только один экземпляр.</span><span class="sxs-lookup"><span data-stu-id="b7f24-174">As stated in the Requirements section, you can have more than one web role but only one instance of each role.</span></span>
   > 
   > 

### <a name="to-update-your-web-role-by-using-web-deploy"></a><span data-ttu-id="b7f24-175">Обновление веб-роли с помощью веб-развертывания</span><span class="sxs-lookup"><span data-stu-id="b7f24-175">To Update Your Web Role by Using Web Deploy</span></span>
1. <span data-ttu-id="b7f24-176">Чтобы использовать веб-развертывание, внесите изменения в код проекта для любой из веб-ролей в Visual Studio, которую требуется опубликовать, а затем щелкните узел этого проекта в решении правой кнопкой мыши и выберите пункт **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-176">To use Web Deploy, make code changes to the project for any of your web roles in Visual Studio that you want to publish, and then right-click this project node in your solution and point to **Publish**.</span></span> <span data-ttu-id="b7f24-177">Откроется диалоговое окно **Публикация веб-сайта** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-177">The **Publish Web** dialog box appears.</span></span>
2. <span data-ttu-id="b7f24-178">(Необязательно.) Если добавлен доверенный SSL-сертификат для удаленных подключений служб IIS, можно снять флажок **Разрешить ненадежный сертификат**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-178">(Optional) If you added a trusted SSL certificate to use for remote connections for IIS, you can clear the **Allow untrusted certificate** check box.</span></span> <span data-ttu-id="b7f24-179">Сведения о том, как добавить сертификат для обеспечения безопасности веб-развертывания, см. ниже в разделе **Безопасное веб-развертывание**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-179">For information about how to add a certificate to make Web Deploy secure, see the section **To Make Web Deploy Secure** later in this topic.</span></span>
3. <span data-ttu-id="b7f24-180">Чтобы использовать веб-развертывание, механизму публикации необходимо имя пользователя и пароль, которые создаются для подключения удаленного рабочего стола, когда вы впервые опубликовали пакет.</span><span class="sxs-lookup"><span data-stu-id="b7f24-180">To use Web Deploy, the publish mechanism needs the user name and password that you set up for your remote desktop connection when you first published the package.</span></span>
   
   1. <span data-ttu-id="b7f24-181">В поле **Имя пользователя**введите имя пользователя.</span><span class="sxs-lookup"><span data-stu-id="b7f24-181">In **User name**, enter the user name.</span></span>
   2. <span data-ttu-id="b7f24-182">В поле **Пароль**введите пароль.</span><span class="sxs-lookup"><span data-stu-id="b7f24-182">In **Password**, enter the password.</span></span>
   3. <span data-ttu-id="b7f24-183">(Необязательно) Если вы хотите сохранить пароль в этом профиле, выберите **Сохранить пароль**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-183">(Optional) If you want to save this password in this profile, choose **Save password**.</span></span>
4. <span data-ttu-id="b7f24-184">Чтобы опубликовать изменения в веб-роли, щелкните **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-184">To publish the changes to your web role, choose **Publish**.</span></span>
   
    <span data-ttu-id="b7f24-185">В строке состояния отображается **Публикация начата**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-185">The status line displays **Publish started**.</span></span> <span data-ttu-id="b7f24-186">После завершения публикации отображается **Публикация успешно завершена** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-186">When the publishing has completed, **Publish succeeded** appears.</span></span> <span data-ttu-id="b7f24-187">Эти изменения были развернуты для веб-роли на вашей виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="b7f24-187">The changes have now been deployed to the web role on your virtual machine.</span></span> <span data-ttu-id="b7f24-188">Теперь можно запустить приложение Azure, чтобы проверить изменения в среде Azure.</span><span class="sxs-lookup"><span data-stu-id="b7f24-188">Now you can start your Azure application in the Azure environment to test your changes.</span></span>

### <a name="to-make-web-deploy-secure"></a><span data-ttu-id="b7f24-189">Безопасность веб-развертывание</span><span class="sxs-lookup"><span data-stu-id="b7f24-189">To Make Web Deploy Secure</span></span>
1. <span data-ttu-id="b7f24-190">Веб-развертывание использует недоверенный, самозаверяющий сертификат по умолчанию, который не рекомендуется для передачи конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="b7f24-190">Web Deploy uses an untrusted, self-signed certificate by default, which is not recommended for uploading sensitive data.</span></span> <span data-ttu-id="b7f24-191">Если вам нужно обеспечить этот процесс для конфиденциальных данных, можно добавить сертификат SSL, который будет использоваться для подключений веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7f24-191">If you need to secure this process for sensitive data, you can add a SSL certificate to be used for Web Deploy connections.</span></span> <span data-ttu-id="b7f24-192">Это должен быть доверенный сертификат, который можно получить в центре сертификации.</span><span class="sxs-lookup"><span data-stu-id="b7f24-192">This certificate needs to be a trusted certificate, which you obtain from a certificate authority (CA).</span></span>
   
    <span data-ttu-id="b7f24-193">Чтобы выполнить безопасное веб-развертывание для каждой виртуальной машины и каждой веб-роли, необходимо загрузить доверенный сертификат, который будет использоваться для веб-развертывания, на [классический портал Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="b7f24-193">To make Web Deploy secure for each virtual machine for each of your web roles, you must upload the trusted certificate that you want to use for web deploy to the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span> <span data-ttu-id="b7f24-194">В результате сертификат будет добавлен на виртуальную машину, которая создается для веб-роли при публикации приложения.</span><span class="sxs-lookup"><span data-stu-id="b7f24-194">This makes sure that the certificate is added to the virtual machine that is created for the web role when you publish your application.</span></span>
2. <span data-ttu-id="b7f24-195">Чтобы добавить в IIS доверенный сертификат SSL, который будет использоваться для удаленных подключений, выполните указанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="b7f24-195">To add a trusted SSL certificate to IIS to use for remote connections, follow these steps:</span></span>
   
   1. <span data-ttu-id="b7f24-196">Чтобы подключиться к виртуальной машине, на которой запущена веб-роль, выберите экземпляр веб-роли в **Cloud Explorer** или **обозревателе сервера**, а затем выберите команду **Подключиться с помощью удаленного рабочего стола**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-196">To connect to the virtual machine that is running the web role, select the instance of the web role in **Cloud Explorer** or **Server Explorer**, and then choose the **Connect using Remote Desktop** command.</span></span> <span data-ttu-id="b7f24-197">Подробные инструкции о том, как подключиться к виртуальной машине, см. в разделе [Использование удаленного рабочего стола с ролями Azure](vs-azure-tools-remote-desktop-roles.md).</span><span class="sxs-lookup"><span data-stu-id="b7f24-197">For detailed steps about how to connect to the virtual machine, see [Using Remote Desktop with Azure Roles](vs-azure-tools-remote-desktop-roles.md).</span></span>
      
      <span data-ttu-id="b7f24-198">Ваш браузер предложит вам загрузить RDP-файл.</span><span class="sxs-lookup"><span data-stu-id="b7f24-198">Your browser will prompt you to download an .RDP file.</span></span>
   2. <span data-ttu-id="b7f24-199">Чтобы добавить сертификат SSL, откройте службу управления в диспетчере IIS.</span><span class="sxs-lookup"><span data-stu-id="b7f24-199">To add an SSL certificate, open the management service in IIS Manager.</span></span> <span data-ttu-id="b7f24-200">В диспетчере IIS включите использование SSL, щелкнув ссылку **Привязки** в области **Действие**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-200">In IIS Manager, enable SSL by opening the **Bindings** link in the **Action** pane.</span></span> <span data-ttu-id="b7f24-201">Откроется диалоговое окно **Добавление привязки сайта**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-201">The **Add Site Binding** dialog box appears.</span></span> <span data-ttu-id="b7f24-202">Выберите **Добавить**, а затем из раскрывающегося списка **Тип** выберите пункт "HTTPS".</span><span class="sxs-lookup"><span data-stu-id="b7f24-202">Choose **Add**, and then choose HTTPS in the **Type** dropdown list.</span></span> <span data-ttu-id="b7f24-203">Из списка **SSL-сертификатов** выберите SSL-сертификат, подписанный центром сертификации и переданный на [классический портал Azure](http://go.microsoft.com/fwlink/?LinkID=213885).</span><span class="sxs-lookup"><span data-stu-id="b7f24-203">In the **SSL certificate** list, choose the SSL certificate that you had signed by a CA and that you uploaded to the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885).</span></span> <span data-ttu-id="b7f24-204">Дополнительные сведения см. в разделе [Configure Connection Settings for the Management Service (IIS 7)](http://go.microsoft.com/fwlink/?LinkId=215824) (Настройка параметров подключения для службы управления (IIS 7)).</span><span class="sxs-lookup"><span data-stu-id="b7f24-204">For more information, see [Configure Connection Settings for the Management Service](http://go.microsoft.com/fwlink/?LinkId=215824).</span></span>
      
      > [!NOTE]
      > <span data-ttu-id="b7f24-205">После добавления доверенного SSL-сертификата желтый треугольник предупреждения больше не будет отображаться в **мастере публикации**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-205">If you add a trusted SSL certificate, the yellow warning triangle no longer appears in the **Publish Wizard**.</span></span>
      > 
      > 

## <a name="include-files-in-the-service-package"></a><span data-ttu-id="b7f24-206">Включение файлов в пакет службы</span><span class="sxs-lookup"><span data-stu-id="b7f24-206">Include Files in the Service Package</span></span>
<span data-ttu-id="b7f24-207">Вам может понадобиться включить в пакет службы определенные файлы, чтобы они были доступны на виртуальной машине, созданной для роли.</span><span class="sxs-lookup"><span data-stu-id="b7f24-207">You might need to include specific files in your service package so that they are available on the virtual machine that is created for a role.</span></span> <span data-ttu-id="b7f24-208">Например, возможно, что в пакет службы нужно будет добавить EXE- или MSI-файл, который используется скриптом запуска,</span><span class="sxs-lookup"><span data-stu-id="b7f24-208">For example, you might want to add an .exe or an .msi file that is used by a startup script to your service package.</span></span> <span data-ttu-id="b7f24-209">или сборку, необходимую проекту рабочей или веб-роли.</span><span class="sxs-lookup"><span data-stu-id="b7f24-209">Or you might need to add an assembly that a web role or worker role project requires.</span></span> <span data-ttu-id="b7f24-210">Включаемые файлы должны быть добавлены в решение для приложения Azure.</span><span class="sxs-lookup"><span data-stu-id="b7f24-210">To include files they must be added to the solution for your Azure application.</span></span>

### <a name="to-include-files-in-the-service-package"></a><span data-ttu-id="b7f24-211">Включение файлов в пакет службы</span><span class="sxs-lookup"><span data-stu-id="b7f24-211">To include files in the service package</span></span>
1. <span data-ttu-id="b7f24-212">Чтобы добавить сборку в пакет службы, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="b7f24-212">To add an assembly to a service package, use the following steps:</span></span>
   
   1. <span data-ttu-id="b7f24-213">В **обозревателе решений** откройте узел проекта, не содержащий сборку, на которую имеется ссылка.</span><span class="sxs-lookup"><span data-stu-id="b7f24-213">In **Solution Explorer** open the project node for the project that is missing the referenced assembly.</span></span>
   2. <span data-ttu-id="b7f24-214">Чтобы добавить сборку в проект, откройте контекстное меню папки **Ссылки** и выберите **Добавить ссылку**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-214">To add the assembly to the project, open the shortcut menu for the **References** folder and then choose **Add Reference**.</span></span> <span data-ttu-id="b7f24-215">Открывается диалоговое окно "Добавить ссылку".</span><span class="sxs-lookup"><span data-stu-id="b7f24-215">The Add Reference dialog appears.</span></span>
   3. <span data-ttu-id="b7f24-216">Выберите ссылку, которую вы хотите добавить, а затем нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-216">Choose the reference that you want to add and then choose the **OK** button.</span></span>
      
      <span data-ttu-id="b7f24-217">Ссылка будет добавлена в список в папке **Ссылки** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-217">The reference is added to the list under the **References** folder.</span></span>
   4. <span data-ttu-id="b7f24-218">Откройте контекстное меню добавленной сборки и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-218">Open the shortcut menu for the assembly that you added and choose **Properties**.</span></span> <span data-ttu-id="b7f24-219">Откроется окно **Свойства** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-219">The **Properties** window appears.</span></span>
      
      <span data-ttu-id="b7f24-220">Чтобы включить эту сборку в пакет службы, выберите из списка **Копировать локально** значение **True**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-220">To include this assembly in the service package, in the **Copy Local list** choose **True**.</span></span>
2. <span data-ttu-id="b7f24-221">В **обозревателе решений** откройте узел проекта, не содержащий сборку, на которую имеется ссылка.</span><span class="sxs-lookup"><span data-stu-id="b7f24-221">In **Solution Explorer** open the project node for the project that is missing the referenced assembly.</span></span>
3. <span data-ttu-id="b7f24-222">Чтобы добавить сборку в проект, откройте контекстное меню папки **Ссылки** и выберите **Добавить ссылку**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-222">To add the assembly to the project, open the shortcut menu for the **References** folder and then choose **Add Reference**.</span></span> <span data-ttu-id="b7f24-223">Откроется диалоговое окно **Добавить ссылку** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-223">The **Add Reference** dialog appears.</span></span>
4. <span data-ttu-id="b7f24-224">Выберите ссылку, которую вы хотите добавить, а затем нажмите кнопку **ОК** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-224">Choose the reference that you want to add and then choose the **OK** button.</span></span>
   
    <span data-ttu-id="b7f24-225">Ссылка будет добавлена в список в папке **Ссылки** .</span><span class="sxs-lookup"><span data-stu-id="b7f24-225">The reference is added to the list under the **References** folder.</span></span>
5. <span data-ttu-id="b7f24-226">Откройте контекстное меню добавленной сборки и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-226">Open the shortcut menu for the assembly that you added and choose **Properties**.</span></span> <span data-ttu-id="b7f24-227">Откроется окно "Свойства".</span><span class="sxs-lookup"><span data-stu-id="b7f24-227">The Properties window appears.</span></span>
6. <span data-ttu-id="b7f24-228">Чтобы включить эту сборку в пакет службы, выберите из списка **Копировать локально** значение **True**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-228">To include this assembly in the service package, in the **Copy Local** list, choose **True**.</span></span>
7. <span data-ttu-id="b7f24-229">Чтобы включить файлы, добавленные в проект веб-роли, в пакет службы, откройте контекстное меню файла и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-229">To include files in the service package that have been added to your web role project, open the shortcut menu for the file, and then choose **Properties**.</span></span> <span data-ttu-id="b7f24-230">В окне **Свойства** из списка **Действие при сборке** выберите **Содержимое**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-230">From the **Properties** window, choose **Content** from the **Build Action** list box.</span></span>
8. <span data-ttu-id="b7f24-231">Чтобы включить файлы, добавленные в проект рабочей роли, в пакет службы, откройте контекстное меню файла и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-231">To include files in the service package that have been added to your worker role project, open the shortcut menu for the file, and then choose **Properties**.</span></span> <span data-ttu-id="b7f24-232">В окне **Свойства** из списка **Копировать в выходной каталог** выберите **Копировать, если новее**.</span><span class="sxs-lookup"><span data-stu-id="b7f24-232">From the **Properties** window, choose **Copy if newer** from the **Copy to output directory** list box.</span></span>

## <a name="next-steps"></a><span data-ttu-id="b7f24-233">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="b7f24-233">Next steps</span></span>
<span data-ttu-id="b7f24-234">Дополнительные сведения о публикации в Azure из Visual Studio см. в статье [Мастер публикации приложения Azure](vs-azure-tools-publish-azure-application-wizard.md).</span><span class="sxs-lookup"><span data-stu-id="b7f24-234">To learn more about publishing to Azure from Visual Studio, see [Publish Azure Application Wizard](vs-azure-tools-publish-azure-application-wizard.md).</span></span>

