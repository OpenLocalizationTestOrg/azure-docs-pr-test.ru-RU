---
title: "Служба архивации Azure: согласованное с приложениями резервное копирование виртуальных машин Linux | Документы Майкрософт"
description: "Используйте скрипты для резервного копирования виртуальных машин в Azure с согласованием приложений. Эти скрипты применимы только к виртуальным машинам Linux в развертываниях Resource Manager. Они не применимы к виртуальным машинам Windows или развертываниям Service Manager. В этой статье описываются действия по настройке скриптов, включая устранение неполадок."
services: backup
documentationcenter: dev-center-name
author: anuragmehrotra
manager: shivamg
keywords: "согласованное с приложениями резервное копирование; согласованное с приложениями резервное копирование виртуальных машин Azure; резервное копирование виртуальных машин Linux; служба архивации Azure"
ms.assetid: bbb99cf2-d8c7-4b3d-8b29-eadc0fed3bef
ms.service: backup
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 4/12/2017
ms.author: anuragm;markgal
ms.openlocfilehash: 378c65bec8fd1f880ed459e76f5e4b5d85e49d2a
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="application-consistent-backup-of-azure-linux-vms-preview"></a><span data-ttu-id="93134-106">Согласованное с приложениями резервное копирование виртуальных машин Azure Linux (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="93134-106">Application-consistent backup of Azure Linux VMs (preview)</span></span>

<span data-ttu-id="93134-107">В этой статье описана платформа Linux с поддержкой скриптов предварительного и последующего выполнения. Также рассмотрены способы ее использования при согласованном с приложениями резервном копировании виртуальных машин Azure Linux.</span><span class="sxs-lookup"><span data-stu-id="93134-107">This article talks about the Linux pre-script and post-script framework, and how it can be used to take application-consistent backups of Azure Linux VMs.</span></span>

> [!Note]
> <span data-ttu-id="93134-108">Платформа предварительных и последующих скриптов поддерживается только для виртуальных машин Linux, развернутых с помощью Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="93134-108">The pre-script and post-script framework is supported only for Azure Resource Manager-deployed Linux virtual machines.</span></span> <span data-ttu-id="93134-109">Скрипты для обеспечения согласованности приложений не поддерживаются для виртуальных машин, развернутых с помощью Service Manager, и виртуальных машин Windows.</span><span class="sxs-lookup"><span data-stu-id="93134-109">Scripts for application consistency are not supported for Service Manager-deployed virtual machines or Windows virtual machines.</span></span>
>

## <a name="how-the-framework-works"></a><span data-ttu-id="93134-110">Принцип работы платформы</span><span class="sxs-lookup"><span data-stu-id="93134-110">How the framework works</span></span>

<span data-ttu-id="93134-111">Эта платформа позволяет запускать пользовательские скрипты предварительного и последующего выполнения во время создания моментальных снимков виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="93134-111">The framework provides an option to run custom pre-scripts and post-scripts while you're taking VM snapshots.</span></span> <span data-ttu-id="93134-112">Скрипты предварительного выполнения запускаются непосредственно перед созданием моментального снимка виртуальной машины, а скрипты последующего выполнения — сразу после создания такого снимка.</span><span class="sxs-lookup"><span data-stu-id="93134-112">Pre-scripts are run just before you take the VM snapshot, and post-scripts are run immediately after you take the VM snapshot.</span></span> <span data-ttu-id="93134-113">Благодаря этому вы можете гибко управлять приложением и средой во время создания моментального снимка виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="93134-113">This gives you the flexibility to control your application and environment while you're taking VM snapshots.</span></span>

<span data-ttu-id="93134-114">При использовании этого сценария важно обеспечить согласованное с приложениями резервное копирование виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="93134-114">In this scenario, it's important to ensure application-consistent VM backup.</span></span> <span data-ttu-id="93134-115">Скрипт предварительного выполнения может вызывать собственные API-интерфейсы приложения, которые замораживают операции ввода вывода и высвобождают содержимое памяти на диск.</span><span class="sxs-lookup"><span data-stu-id="93134-115">The pre-script can invoke application-native APIs to quiesce the IOs and flush in-memory content to the disk.</span></span> <span data-ttu-id="93134-116">Это обеспечивает согласованность моментального снимка с приложением (то есть приложение открывается после загрузки виртуальной машины после восстановления).</span><span class="sxs-lookup"><span data-stu-id="93134-116">This ensures that the snapshot is application-consistent (that is, that the application comes up when the VM is booted post-restore).</span></span> <span data-ttu-id="93134-117">Для разморозки операций ввода и вывода можно использовать скрипт последующего выполнения.</span><span class="sxs-lookup"><span data-stu-id="93134-117">Post-script can be used to thaw the IOs.</span></span> <span data-ttu-id="93134-118">Он выполняет эту задачу с помощью собственных API-интерфейсов, чтобы приложение могло возобновить нормальную работу после создания снимка виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="93134-118">It does this by using application-native APIs so that the application can resume normal operations post-VM snapshot.</span></span>

## <a name="steps-to-configure-pre-script-and-post-script"></a><span data-ttu-id="93134-119">Действия по настройке скриптов предварительного и последующего выполнения</span><span class="sxs-lookup"><span data-stu-id="93134-119">Steps to configure pre-script and post-script</span></span>

1. <span data-ttu-id="93134-120">Войдите как привилегированный пользователь на виртуальную машину Linux, резервную копию которой нужно создать.</span><span class="sxs-lookup"><span data-stu-id="93134-120">Sign in as the root user to the Linux VM that you want to back up.</span></span>

2. <span data-ttu-id="93134-121">Скачайте файл **VMSnapshotScriptPluginConfig.json** из репозитория [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig) и скопируйте его в каталог **/etc/azure** на всех виртуальных машинах, резервную копию которых нужно создать.</span><span class="sxs-lookup"><span data-stu-id="93134-121">Download **VMSnapshotScriptPluginConfig.json** from [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig), and then copy it to the **/etc/azure** folder on all the VMs that you're going to back up.</span></span> <span data-ttu-id="93134-122">Если каталога **/etc/azure** нет, создайте его.</span><span class="sxs-lookup"><span data-stu-id="93134-122">Create the **/etc/azure** directory if it doesn't exist already.</span></span>

3. <span data-ttu-id="93134-123">Скопируйте скрипты предварительного и последующего выполнения для приложения на все виртуальные машины, резервную копию которых нужно создать.</span><span class="sxs-lookup"><span data-stu-id="93134-123">Copy the pre-script and post-script for your application on all the VMs that you plan to back up.</span></span> <span data-ttu-id="93134-124">Скрипты можно скопировать в любое расположение на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="93134-124">You can copy the scripts to any location on the VM.</span></span> <span data-ttu-id="93134-125">Не забудьте обновить полный путь к файлам скрипта в файле **VMSnapshotScriptPluginConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="93134-125">Be sure to update the full path of the script files in the **VMSnapshotScriptPluginConfig.json** file.</span></span>

4. <span data-ttu-id="93134-126">Обеспечьте следующие разрешения для файлов.</span><span class="sxs-lookup"><span data-stu-id="93134-126">Ensure the following permissions for these files:</span></span>

   - <span data-ttu-id="93134-127">**VMSnapshotScriptPluginConfig.json**: разрешение "600".</span><span class="sxs-lookup"><span data-stu-id="93134-127">**VMSnapshotScriptPluginConfig.json**: Permission “600.”</span></span> <span data-ttu-id="93134-128">Например, только у привилегированных пользователей есть разрешения на чтение и запись этого файла. Разрешений на выполнение нет ни у кого.</span><span class="sxs-lookup"><span data-stu-id="93134-128">For example, only “root” user should have “read” and “write” permissions to this file, and no user should have “execute” permissions.</span></span>

   - <span data-ttu-id="93134-129">**Файл скрипта предварительного выполнения**: разрешение "700".</span><span class="sxs-lookup"><span data-stu-id="93134-129">**Pre-script file**: Permission “700.”</span></span>  <span data-ttu-id="93134-130">Только у привилегированных пользователей есть разрешения на чтение, запись и выполнение этого файла.</span><span class="sxs-lookup"><span data-stu-id="93134-130">For example, only “root” user should have “read”, “write”, and “execute” permissions to this file.</span></span>
  
   - <span data-ttu-id="93134-131">**Файл скрипта последующего выполнения**: разрешение "700".</span><span class="sxs-lookup"><span data-stu-id="93134-131">**Post-script** Permission “700.”</span></span> <span data-ttu-id="93134-132">Только у привилегированных пользователей есть разрешения на чтение, запись и выполнение этого файла.</span><span class="sxs-lookup"><span data-stu-id="93134-132">For example, only “root” user should have “read”, “write”, and “execute” permissions to this file.</span></span>

   > [!Important]
   > <span data-ttu-id="93134-133">Платформа предоставляет пользователям широкие возможности.</span><span class="sxs-lookup"><span data-stu-id="93134-133">The framework gives users a lot of power.</span></span> <span data-ttu-id="93134-134">Главное, что она полностью безопасна и только у привилегированных пользователей есть доступ к важным файлам JSON и файлам скриптов.</span><span class="sxs-lookup"><span data-stu-id="93134-134">It’s important that it's secure and that only “root” user has access to critical JSON and script files.</span></span>
   > <span data-ttu-id="93134-135">Если предыдущие требования не соблюдены, скрипт не запустится.</span><span class="sxs-lookup"><span data-stu-id="93134-135">If the previous requirements aren't met, the script doesn't run.</span></span> <span data-ttu-id="93134-136">В результате будет создана резервная копия, согласованная с состоянием файловой системы на момент сбоя.</span><span class="sxs-lookup"><span data-stu-id="93134-136">This results in file system/crash consistent backup.</span></span>
   >

5. <span data-ttu-id="93134-137">Настройте файл **VMSnapshotScriptPluginConfig.json**, как описано далее.</span><span class="sxs-lookup"><span data-stu-id="93134-137">Configure **VMSnapshotScriptPluginConfig.json** as described here:</span></span>
    - <span data-ttu-id="93134-138">**pluginName** — оставьте значение без изменения. Иначе скрипты могут выполняться неправильно.</span><span class="sxs-lookup"><span data-stu-id="93134-138">**pluginName**: Leave this field as is or your scripts might not work as expected.</span></span>

    - <span data-ttu-id="93134-139">**preScriptLocation** — укажите полный путь к скрипту предварительного выполнения на архивируемой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="93134-139">**preScriptLocation**: Provide the full path of the pre-script on the VM that's going to be backed up.</span></span>

    - <span data-ttu-id="93134-140">**postScriptLocation** — укажите полный путь к скрипту последующего выполнения на архивируемой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="93134-140">**postScriptLocation**: Provide the full path of the post-script on the VM that's going to be backed up.</span></span>

    - <span data-ttu-id="93134-141">**preScriptParams** — укажите необязательные параметры, которые должны передаваться в скрипт предварительного выполнения.</span><span class="sxs-lookup"><span data-stu-id="93134-141">**preScriptParams**: Provide the optional parameters that need to be passed to the pre-script.</span></span> <span data-ttu-id="93134-142">Все параметры должны быть заключены в кавычки и разделены запятыми, если их несколько.</span><span class="sxs-lookup"><span data-stu-id="93134-142">All parameters should be in quotes, and should be comma-separated if there are multiple parameters.</span></span>

    - <span data-ttu-id="93134-143">**postScriptParams** — укажите необязательные параметры, которые должны передаваться в скрипт последующего выполнения.</span><span class="sxs-lookup"><span data-stu-id="93134-143">**postScriptParams**: Provide the optional parameters that need to be passed to the post-script.</span></span> <span data-ttu-id="93134-144">Все параметры должны быть заключены в кавычки и разделены запятыми, если их несколько.</span><span class="sxs-lookup"><span data-stu-id="93134-144">All parameters should be in quotes, and should be comma-separated if there are multiple parameters.</span></span>

    - <span data-ttu-id="93134-145">**preScriptNoOfRetries** — укажите число попыток запуска, совершаемых скриптом предварительного выполнения в случае сбоя перед завершением работы.</span><span class="sxs-lookup"><span data-stu-id="93134-145">**preScriptNoOfRetries**: Set the number of times the pre-script should be retried if there is any error before terminating.</span></span> <span data-ttu-id="93134-146">"0" означает один запуск без повторных попыток в случае сбоя.</span><span class="sxs-lookup"><span data-stu-id="93134-146">Zero means only one try and no retry if there is a failure.</span></span>

    - <span data-ttu-id="93134-147">**postScriptNoOfRetries** — укажите число попыток запуска, совершаемых скриптом последующего выполнения в случае сбоя перед завершением работы.</span><span class="sxs-lookup"><span data-stu-id="93134-147">**postScriptNoOfRetries**:  Set the number of times the post-script should be retried if there is any error before terminating.</span></span> <span data-ttu-id="93134-148">"0" означает один запуск без повторных попыток в случае сбоя.</span><span class="sxs-lookup"><span data-stu-id="93134-148">Zero means only one try and no retry if there is a failure.</span></span>
    
    - <span data-ttu-id="93134-149">**timeoutInSeconds** — укажите разное время ожидания для скриптов предварительного и последующего выполнения.</span><span class="sxs-lookup"><span data-stu-id="93134-149">**timeoutInSeconds**: Specify individual timeouts for the pre-script and the post-script.</span></span>

    - <span data-ttu-id="93134-150">**continueBackupOnFailure** — присвойте значение **true**, чтобы при сбое скриптов предварительного и последующего выполнения служба архивации Azure выполнила резервное копирование, согласованное с файловой системой и сбоем.</span><span class="sxs-lookup"><span data-stu-id="93134-150">**continueBackupOnFailure**: Set this value to **true** if you want Azure Backup to fall back to a file system consistent/crash consistent backup if pre-script or post-script fails.</span></span> <span data-ttu-id="93134-151">Если присвоить значение **false**, при сбое скриптов резервное копирование также завершится сбоем (только если не используется виртуальная машина с одним диском, для которой резервное копирование состояния системы на момент сбоя будет выполнено независимо от этого параметра).</span><span class="sxs-lookup"><span data-stu-id="93134-151">Setting this to **false** fails the backup in case of script failure (except when you have single-disk VM that falls back to crash-consistent backup regardless of this setting).</span></span>

    - <span data-ttu-id="93134-152">**fsFreezeEnabled** — укажите, будет ли во время создания моментального снимка виртуальной машины Linux вызываться fsfreeze для обеспечения согласованности с файловой системой.</span><span class="sxs-lookup"><span data-stu-id="93134-152">**fsFreezeEnabled**: Specify whether Linux fsfreeze should be called while you're taking the VM snapshot to ensure file system consistency.</span></span> <span data-ttu-id="93134-153">Рекомендуется присвоить этому параметру значение **true**, если отключение fsfreeze может повлиять на состояние приложения.</span><span class="sxs-lookup"><span data-stu-id="93134-153">We recommend keeping this setting set to **true** unless your application has a dependency on disabling fsfreeze.</span></span>

6. <span data-ttu-id="93134-154">Платформа скриптов теперь настроена.</span><span class="sxs-lookup"><span data-stu-id="93134-154">The script framework is now configured.</span></span> <span data-ttu-id="93134-155">Если резервное копирование виртуальной машины уже настроено, следующая операция резервного копирования вызовет скрипты и активирует резервное копирование, согласованное с приложениями.</span><span class="sxs-lookup"><span data-stu-id="93134-155">If the VM backup is already configured, the next backup invokes the scripts and triggers application-consistent backup.</span></span> <span data-ttu-id="93134-156">В противном случае выполните настройку в соответствии с инструкциями для [резервного копирования виртуальных машин Azure в хранилища служб восстановления.](https://docs.microsoft.com/azure/backup/backup-azure-vms-first-look-arm)</span><span class="sxs-lookup"><span data-stu-id="93134-156">If the VM backup is not configured, configure it by using [Back up Azure virtual machines to Recovery Services vaults.](https://docs.microsoft.com/azure/backup/backup-azure-vms-first-look-arm)</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="93134-157">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="93134-157">Troubleshooting</span></span>

<span data-ttu-id="93134-158">Убедитесь, что при записи скриптов предварительного и последующего выполнения вы включили ведение соответствующих журналов. Так вы сможете просматривать и исправлять возможные ошибки, связанные с запуском скриптов.</span><span class="sxs-lookup"><span data-stu-id="93134-158">Make sure you add appropriate logging while writing your pre-script and post-script, and review your script logs to fix any script issues.</span></span> <span data-ttu-id="93134-159">Если скрипты по-прежнему не удается запустить, см. таблицу ниже.</span><span class="sxs-lookup"><span data-stu-id="93134-159">If you still have problems running scripts, refer to the following table for more information.</span></span>

| <span data-ttu-id="93134-160">Ошибка</span><span class="sxs-lookup"><span data-stu-id="93134-160">Error</span></span> | <span data-ttu-id="93134-161">Сообщение об ошибке</span><span class="sxs-lookup"><span data-stu-id="93134-161">Error message</span></span> | <span data-ttu-id="93134-162">Рекомендуемое действие</span><span class="sxs-lookup"><span data-stu-id="93134-162">Recommended action</span></span> |
| ------------------------ | -------------- | ------------------ |
| <span data-ttu-id="93134-163">Pre-ScriptExecutionFailed</span><span class="sxs-lookup"><span data-stu-id="93134-163">Pre-ScriptExecutionFailed</span></span> |<span data-ttu-id="93134-164">Скрипт предварительного выполнения вернул ошибку, и резервная копия может быть несогласованной с приложениями.</span><span class="sxs-lookup"><span data-stu-id="93134-164">The pre-script returned an error, so backup might not be application-consistent.</span></span>   | <span data-ttu-id="93134-165">Чтобы устранить проблему, проверьте соответствующие журналы ошибок.</span><span class="sxs-lookup"><span data-stu-id="93134-165">Look at the failure logs for your script to fix the issue.</span></span>|  
|   <span data-ttu-id="93134-166">Post-ScriptExecutionFailed</span><span class="sxs-lookup"><span data-stu-id="93134-166">Post-ScriptExecutionFailed</span></span> |    <span data-ttu-id="93134-167">Скрипт последующего выполнения вернул ошибку, которая может влиять на состояние приложения.</span><span class="sxs-lookup"><span data-stu-id="93134-167">The post-script returned an error that might impact application state.</span></span> |    <span data-ttu-id="93134-168">Чтобы устранить проблему, проверьте соответствующие журналы ошибок и состояние приложений.</span><span class="sxs-lookup"><span data-stu-id="93134-168">Look at the failure logs for your script to fix the issue and check the application state.</span></span> |
| <span data-ttu-id="93134-169">Pre-ScriptNotFound</span><span class="sxs-lookup"><span data-stu-id="93134-169">Pre-ScriptNotFound</span></span> |  <span data-ttu-id="93134-170">Сценарий предварительного выполнения не найден в расположении, указанном в файле конфигурации **VMSnapshotScriptPluginConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="93134-170">The pre-script was not found at the location that's specified in the **VMSnapshotScriptPluginConfig.json** config file.</span></span> |   <span data-ttu-id="93134-171">Чтобы обеспечить согласованное с приложениями резервное копирование приложений, убедитесь, что скрипт предварительного выполнения находится в расположении, указанном в файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="93134-171">Make sure that pre-script is present at the path that's specified in the config file to ensure application-consistent backup.</span></span>|
| <span data-ttu-id="93134-172">Post-ScriptNotFound</span><span class="sxs-lookup"><span data-stu-id="93134-172">Post-ScriptNotFound</span></span> | <span data-ttu-id="93134-173">Сценарий предварительного выполнения не найден в расположении, указанном в файле конфигурации **VMSnapshotScriptPluginConfig.json**.</span><span class="sxs-lookup"><span data-stu-id="93134-173">The post-script wasn't found at the location that's specified in the **VMSnapshotScriptPluginConfig.json** config file.</span></span> |   <span data-ttu-id="93134-174">Чтобы обеспечить согласованное с приложениями резервное копирование приложений, убедитесь, что скрипт последующего выполнения находится в расположении, указанном в файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="93134-174">Make sure that post-script is present at the path that's specified in the config file to ensure application-consistent backup.</span></span>|
| <span data-ttu-id="93134-175">IncorrectPluginhostFile</span><span class="sxs-lookup"><span data-stu-id="93134-175">IncorrectPluginhostFile</span></span> | <span data-ttu-id="93134-176">Файл **Pluginhost**, который поставляется вместе с расширением VmSnapshotLinux, поврежден, поэтому скрипты предварительного и последующего выполнения не могут быть выполнены, а резервная копия будет несогласованной с приложениями.</span><span class="sxs-lookup"><span data-stu-id="93134-176">The **Pluginhost** file, which comes with the VmSnapshotLinux extension, is corrupted, so pre-script and post-script cannot run and the backup won't be application-consistent.</span></span> | <span data-ttu-id="93134-177">Чтобы устранить проблему, удалите расширение **VmSnapshotLinux**. Оно будет автоматически переустановлено при следующем резервном копировании.</span><span class="sxs-lookup"><span data-stu-id="93134-177">Uninstall the **VmSnapshotLinux** extension, and it will automatically be reinstalled with the next backup to fix the problem.</span></span> |
| <span data-ttu-id="93134-178">IncorrectJSONConfigFile</span><span class="sxs-lookup"><span data-stu-id="93134-178">IncorrectJSONConfigFile</span></span> | <span data-ttu-id="93134-179">Файл **VMSnapshotScriptPluginConfig.json** является недопустимым, поэтому сценарии предварительного и последующего выполнения невозможно выполнить. Резервная копия будет несогласованной с приложениями.</span><span class="sxs-lookup"><span data-stu-id="93134-179">The **VMSnapshotScriptPluginConfig.json** file is incorrect, so pre-script and post-script cannot run and the backup won't be application-consistent.</span></span> | <span data-ttu-id="93134-180">Скачайте копию файла из репозитория [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig) и выполните повторную настройку.</span><span class="sxs-lookup"><span data-stu-id="93134-180">Download the copy from [GitHub](https://github.com/MicrosoftAzureBackup/VMSnapshotPluginConfig) and configure it again.</span></span> |
| <span data-ttu-id="93134-181">InsufficientPermissionforPre-Script</span><span class="sxs-lookup"><span data-stu-id="93134-181">InsufficientPermissionforPre-Script</span></span> | <span data-ttu-id="93134-182">Чтобы выполнить скрипты, привилегированный пользователь (root) должен быть владельцем файла, а сам файл должен иметь разрешения "700" (то есть только владелец имеет разрешения на его чтение, запись и выполнение).</span><span class="sxs-lookup"><span data-stu-id="93134-182">For running scripts, "root" user should be the owner of the file and the file should have “700” permissions (that is, only "owner" should have “read”, “write”, and “execute” permissions).</span></span> | <span data-ttu-id="93134-183">Убедитесь, что владельцем файла скрипта является привилегированный пользователь (root) и что только владелец имеет разрешения на его чтение, запись и выполнение.</span><span class="sxs-lookup"><span data-stu-id="93134-183">Make sure “root” user is the “owner” of the script file and that only "owner" has “read”, “write” and “execute” permissions.</span></span> |
| <span data-ttu-id="93134-184">InsufficientPermissionforPost-Script</span><span class="sxs-lookup"><span data-stu-id="93134-184">InsufficientPermissionforPost-Script</span></span> | <span data-ttu-id="93134-185">Чтобы выполнить скрипты, привилегированный пользователь (root) должен быть владельцем файла, а сам файл должен иметь разрешения "700" (то есть только владелец имеет разрешения на его чтение, запись и выполнение).</span><span class="sxs-lookup"><span data-stu-id="93134-185">For running scripts, root user should be the owner of the file and the file should have “700” permissions (that is, only "owner" should have “read”, “write”, and “execute” permissions).</span></span> | <span data-ttu-id="93134-186">Убедитесь, что владельцем файла скрипта является привилегированный пользователь (root) и что только владелец имеет разрешения на его чтение, запись и выполнение.</span><span class="sxs-lookup"><span data-stu-id="93134-186">Make sure “root” user is the “owner” of the script file and that only "owner" has “read”, “write” and “execute” permissions.</span></span> |
| <span data-ttu-id="93134-187">Pre-ScriptTimeout</span><span class="sxs-lookup"><span data-stu-id="93134-187">Pre-ScriptTimeout</span></span> | <span data-ttu-id="93134-188">Истекло время запуска скрипта предварительного выполнения для согласованного с приложениями резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="93134-188">The execution of the application-consistent backup pre-script timed-out.</span></span> | <span data-ttu-id="93134-189">Проверьте скрипт в файле **VMSnapshotScriptPluginConfig.json** (расположен в каталоге **/etc/azure**) и увеличьте время ожидания.</span><span class="sxs-lookup"><span data-stu-id="93134-189">Check the script and increase the timeout in the **VMSnapshotScriptPluginConfig.json** file that's located at **/etc/azure**.</span></span> |
| <span data-ttu-id="93134-190">Post-ScriptTimeout</span><span class="sxs-lookup"><span data-stu-id="93134-190">Post-ScriptTimeout</span></span> | <span data-ttu-id="93134-191">Истекло время запуска скрипта последующего выполнения для согласованного с приложениями резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="93134-191">The execution of the application-consistent backup post-script timed out.</span></span> | <span data-ttu-id="93134-192">Проверьте скрипт в файле **VMSnapshotScriptPluginConfig.json** (расположен в каталоге **/etc/azure**) и увеличьте время ожидания.</span><span class="sxs-lookup"><span data-stu-id="93134-192">Check the script and increase the timeout in the **VMSnapshotScriptPluginConfig.json** file that's located at **/etc/azure**.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="93134-193">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="93134-193">Next steps</span></span>
[<span data-ttu-id="93134-194">Резервное копирование виртуальных машин Azure в хранилище служб восстановления</span><span class="sxs-lookup"><span data-stu-id="93134-194">Configure VM backup to a Recovery Services vault</span></span>](https://docs.microsoft.com/azure/backup/backup-azure-arm-vms)
