---
title: "Служба архивации Azure: восстановление файлов и папок из резервной копии виртуальной машины Azure | Документация Майкрософт"
description: "Восстановление файлов из точки восстановления виртуальной машины Azure"
services: backup
documentationcenter: dev-center-name
author: pvrk
manager: shivamg
keywords: "восстановление на уровне элементов; восстановление файлов из резервной копии виртуальной машины Azure; восстановление файлов виртуальной машины Azure"
ms.assetid: f1c067a2-4826-4da4-b97a-c5fd6c189a77
ms.service: backup
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/20/2017
ms.author: pullabhk;markgal
ms.openlocfilehash: 1a62a0ed83d61272c032ac0377a54099ed118db4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="recover-files-from-azure-virtual-machine-backup"></a><span data-ttu-id="f0f07-104">Восстановление файлов из резервной копии виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="f0f07-104">Recover files from Azure virtual machine backup</span></span>

<span data-ttu-id="f0f07-105">Резервное копирование Azure служит hello возможность toorestore [виртуальные машины Azure и диски](./backup-azure-arm-restore-vms.md) из резервных копий виртуальной Машины Azure.</span><span class="sxs-lookup"><span data-stu-id="f0f07-105">Azure backup provides hello capability toorestore [Azure VMs and disks](./backup-azure-arm-restore-vms.md) from Azure VM backups.</span></span> <span data-ttu-id="f0f07-106">В этой статье объясняется, как восстановить из резервной копии виртуальной машины Azure отдельные элементы, такие как файлы и папки.</span><span class="sxs-lookup"><span data-stu-id="f0f07-106">Now this article explains how you can recover items such as files and folders from an Azure VM backup.</span></span>

> [!Note]
> <span data-ttu-id="f0f07-107">Эта функция доступна для виртуальных машин Azure, развернутых с помощью диспетчера ресурсов модели hello и защищенных tooa хранилище служб восстановления.</span><span class="sxs-lookup"><span data-stu-id="f0f07-107">This feature is available for Azure VMs deployed using hello Resource Manager model and protected tooa Recovery services vault.</span></span>
> <span data-ttu-id="f0f07-108">Восстановление файлов из зашифрованной резервной копии виртуальной машины не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="f0f07-108">File recovery from an encrypted VM backup is not supported.</span></span>
>

## <a name="mount-hello-volume-and-copy-files"></a><span data-ttu-id="f0f07-109">Подключить тома и скопируйте файлы hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-109">Mount hello volume and copy files</span></span>

1. <span data-ttu-id="f0f07-110">Вход в hello [портал Azure](http://portal.Azure.com).</span><span class="sxs-lookup"><span data-stu-id="f0f07-110">Sign into hello [Azure portal](http://portal.Azure.com).</span></span> <span data-ttu-id="f0f07-111">Найти hello соответствующего хранилища служб восстановления и резервного копирования элементов требуется hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-111">Find hello relevant Recovery services vault and hello required backup item.</span></span>

2. <span data-ttu-id="f0f07-112">В колонке hello элемента резервного копирования, нажмите кнопку **восстановление файлов**</span><span class="sxs-lookup"><span data-stu-id="f0f07-112">On hello Backup Item blade, click **File Recovery**</span></span>

    ![Открытие архивируемого элемента в хранилище служб восстановления](./media/backup-azure-restore-files-from-vm/open-vault-item.png)

    <span data-ttu-id="f0f07-114">Hello **восстановления файла** открывает колонку.</span><span class="sxs-lookup"><span data-stu-id="f0f07-114">hello **File Recovery** blade opens.</span></span>

    ![Колонка восстановления файлов](./media/backup-azure-restore-files-from-vm/file-recovery-blade.png)

3. <span data-ttu-id="f0f07-116">Из hello **выберите точку восстановления** раскрывающееся меню, выберите hello точки восстановления, содержащего файлы hello нужный.</span><span class="sxs-lookup"><span data-stu-id="f0f07-116">From hello **Select recovery point** drop-down menu, select hello recovery point that contains hello files you want.</span></span> <span data-ttu-id="f0f07-117">По умолчанию hello последняя точка восстановления уже выбрана.</span><span class="sxs-lookup"><span data-stu-id="f0f07-117">By default, hello latest recovery point is already selected.</span></span>

4. <span data-ttu-id="f0f07-118">Нажмите кнопку **загрузить исполняемый файл** (для ВМ Windows Azure) или **загрузить скрипт** (для ВМ Azure Linux) toodownload программного обеспечения hello, вы сможете использовать toocopy файлы из точки восстановления hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-118">Click **Download Executable** (for Windows Azure VM) or **Download Script** (for Linux Azure VM) toodownload hello software that you'll use toocopy files from hello recovery point.</span></span>

  <span data-ttu-id="f0f07-119">Hello исполняемый файл или сценарий создает соединение между локальным компьютером hello и указан hello точки восстановления.</span><span class="sxs-lookup"><span data-stu-id="f0f07-119">hello executable/script creates a connection between hello local computer and hello specified recovery point.</span></span>

5. <span data-ttu-id="f0f07-120">Требуется пароль toorun загружаются hello сценарий или исполняемый объект.</span><span class="sxs-lookup"><span data-stu-id="f0f07-120">You need a password toorun hello downloaded script/executable.</span></span> <span data-ttu-id="f0f07-121">Можно скопировать из hello портал, используя кнопку копирования hello рядом с полем hello созданный пароль пароль hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-121">You can copy hello password from hello portal using hello copy button beside hello generated password</span></span>

    ![Созданный пароль](./media/backup-azure-restore-files-from-vm/generated-pswd.png)

6. <span data-ttu-id="f0f07-123">На компьютере hello файлов toorecover hello выполните hello исполняемый файл или сценарий.</span><span class="sxs-lookup"><span data-stu-id="f0f07-123">On hello computer where you want toorecover hello files, run hello executable/script.</span></span> <span data-ttu-id="f0f07-124">Это нужно делать от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="f0f07-124">You must run it with Administrator credentials.</span></span> <span data-ttu-id="f0f07-125">При запуске сценария hello на компьютере с ограниченным доступом, убедитесь, доступ к:</span><span class="sxs-lookup"><span data-stu-id="f0f07-125">If you run hello script on a computer with restricted access, ensure there is access to:</span></span>

    - <span data-ttu-id="f0f07-126">download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="f0f07-126">download.microsoft.com</span></span>
    - <span data-ttu-id="f0f07-127">конечные точки Azure, которые использовались для резервного копирования этой виртуальной машины Azure;</span><span class="sxs-lookup"><span data-stu-id="f0f07-127">Azure endpoints used for Azure VM backups</span></span>
    - <span data-ttu-id="f0f07-128">исходящий порт 3260.</span><span class="sxs-lookup"><span data-stu-id="f0f07-128">outbound port 3260</span></span>

   <span data-ttu-id="f0f07-129">Для Linux, сценарий hello требуются компоненты «open-iscsi» и «lshw» точку восстановления toohello tooconnect.</span><span class="sxs-lookup"><span data-stu-id="f0f07-129">For Linux, hello script requires 'open-iscsi' and 'lshw' components tooconnect toohello recovery point.</span></span> <span data-ttu-id="f0f07-130">Если их не существует на компьютере hello, где она запущена, он запрашивает разрешение tooinstall hello соответствующие компоненты и устанавливает их после согласия.</span><span class="sxs-lookup"><span data-stu-id="f0f07-130">If those do not exist on hello machine where it is run, it asks for permission tooinstall hello relevant components and installs them upon consent.</span></span>
   
   <span data-ttu-id="f0f07-131">Введите пароль hello, скопированные из портала hello в ответ на запрос.</span><span class="sxs-lookup"><span data-stu-id="f0f07-131">Enter hello password copied from hello portal when prompted.</span></span> <span data-ttu-id="f0f07-132">После ввода пароля hello сценарии hello подключается toohello точки восстановления.</span><span class="sxs-lookup"><span data-stu-id="f0f07-132">Once hello valid password is entered hello scripts connects toohello recovery point.</span></span>
      
    ![Колонка восстановления файлов](./media/backup-azure-restore-files-from-vm/executable-output.png)
    
   
   <span data-ttu-id="f0f07-134">На любом компьютере с установленными hello одинаковые (или совместимые) операционной системы, как hello резервную копию виртуальной Машины, можно выполнить скрипт hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-134">You can run hello script on any machine that has hello same (or compatible) operating system as hello backed-up VM.</span></span> <span data-ttu-id="f0f07-135">В разделе hello [совместимость ОС таблицы](backup-azure-restore-files-from-vm.md#compatible-os) для совместимых операционных системах.</span><span class="sxs-lookup"><span data-stu-id="f0f07-135">See hello [Compatible OS table](backup-azure-restore-files-from-vm.md#compatible-os) for compatible operating systems.</span></span> <span data-ttu-id="f0f07-136">Если hello, защищенные Azure виртуальной машины использует дисковые пространства Windows (для ВМ Windows Azure) или Arrays(for Linux VMs) LVM/RAID, то не удается выполнить hello исполняемый файл или сценарий на hello одной виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="f0f07-136">If hello protected Azure virtual machine uses Windows Storage Spaces (for Windows Azure VMs) or LVM/RAID Arrays(for Linux VMs), then you can't run hello executable/script on hello same virtual machine.</span></span> <span data-ttu-id="f0f07-137">Вместо этого запустите его на другом компьютере с совместимой операционной системой.</span><span class="sxs-lookup"><span data-stu-id="f0f07-137">Instead, run it on any other machine with a compatible operating system.</span></span>

### <a name="compatible-os"></a><span data-ttu-id="f0f07-138">Совместимые операционные системы</span><span class="sxs-lookup"><span data-stu-id="f0f07-138">Compatible OS</span></span>

#### <a name="for-windows"></a><span data-ttu-id="f0f07-139">Для Windows</span><span class="sxs-lookup"><span data-stu-id="f0f07-139">For Windows</span></span>

<span data-ttu-id="f0f07-140">Здравствуйте, следующая таблица отображает hello совместимости между сервером и компьютер операционной системы.</span><span class="sxs-lookup"><span data-stu-id="f0f07-140">hello following table shows hello compatibility between server and computer operating systems.</span></span> <span data-ttu-id="f0f07-141">Файлы не удастся восстановить на компьютере с несовместимой операционной системой.</span><span class="sxs-lookup"><span data-stu-id="f0f07-141">When recovering files, you can't restore files between incompatible operating systems.</span></span>

|<span data-ttu-id="f0f07-142">ОС сервера</span><span class="sxs-lookup"><span data-stu-id="f0f07-142">Server OS</span></span> | <span data-ttu-id="f0f07-143">Совместимые ОС клиента</span><span class="sxs-lookup"><span data-stu-id="f0f07-143">Compatible client OS</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="f0f07-144">Windows Server 2012 R2</span><span class="sxs-lookup"><span data-stu-id="f0f07-144">Windows Server 2012 R2</span></span> | <span data-ttu-id="f0f07-145">Windows 8.1</span><span class="sxs-lookup"><span data-stu-id="f0f07-145">Windows 8.1</span></span> |
| <span data-ttu-id="f0f07-146">Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="f0f07-146">Windows Server 2012</span></span>    | <span data-ttu-id="f0f07-147">Windows 8</span><span class="sxs-lookup"><span data-stu-id="f0f07-147">Windows 8</span></span>  |
| <span data-ttu-id="f0f07-148">Windows Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="f0f07-148">Windows Server 2008 R2</span></span> | <span data-ttu-id="f0f07-149">Windows 7</span><span class="sxs-lookup"><span data-stu-id="f0f07-149">Windows 7</span></span>   |

#### <a name="for-linux"></a><span data-ttu-id="f0f07-150">Для Linux</span><span class="sxs-lookup"><span data-stu-id="f0f07-150">For Linux</span></span>

<span data-ttu-id="f0f07-151">Linux, hello фундаментальные требованием является машины hello, где выполняется сценарий hello, hello операционной системы должен поддерживать hello filesystem объекта hello файлах, присутствующих в hello резервную копию виртуальной Машины с Linux.</span><span class="sxs-lookup"><span data-stu-id="f0f07-151">In Linux, hello fundamental requirement is that hello OS of hello machine where hello script is run should support hello filesystem of hello files present in hello backed-up Linux VM.</span></span> <span data-ttu-id="f0f07-152">При выборе сценария hello toorun компьютера, убедитесь, что имеет hello совместимые ОС и hello версии, как описано в следующей таблице hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-152">While selecting a machine toorun hello script, please ensure it has hello compatible OS and hello versions as mentioned in hello table below.</span></span>

|<span data-ttu-id="f0f07-153">ОС Linux</span><span class="sxs-lookup"><span data-stu-id="f0f07-153">Linux OS</span></span> | <span data-ttu-id="f0f07-154">Версии</span><span class="sxs-lookup"><span data-stu-id="f0f07-154">Versions</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="f0f07-155">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="f0f07-155">Ubuntu</span></span> | <span data-ttu-id="f0f07-156">12.04 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-156">12.04 and above</span></span> |
| <span data-ttu-id="f0f07-157">CentOS</span><span class="sxs-lookup"><span data-stu-id="f0f07-157">CentOS</span></span> | <span data-ttu-id="f0f07-158">6.5 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-158">6.5 and above</span></span>  |
| <span data-ttu-id="f0f07-159">RHEL</span><span class="sxs-lookup"><span data-stu-id="f0f07-159">RHEL</span></span> | <span data-ttu-id="f0f07-160">6.7 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-160">6.7 and above</span></span> |
| <span data-ttu-id="f0f07-161">Debian</span><span class="sxs-lookup"><span data-stu-id="f0f07-161">Debian</span></span> | <span data-ttu-id="f0f07-162">7 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-162">7 and above</span></span> |
| <span data-ttu-id="f0f07-163">Oracle Linux</span><span class="sxs-lookup"><span data-stu-id="f0f07-163">Oracle Linux</span></span> | <span data-ttu-id="f0f07-164">6.4 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-164">6.4 and above</span></span> |

<span data-ttu-id="f0f07-165">Hello скрипта также требуется python и bash tooexecute компоненты и безопасное подключение toohello точки восстановления.</span><span class="sxs-lookup"><span data-stu-id="f0f07-165">hello script also requires python and bash components tooexecute and connect securely toohello recovery point.</span></span>

|<span data-ttu-id="f0f07-166">Компонент</span><span class="sxs-lookup"><span data-stu-id="f0f07-166">Component</span></span> | <span data-ttu-id="f0f07-167">Версия</span><span class="sxs-lookup"><span data-stu-id="f0f07-167">Version</span></span>  |
| --------------- | ---- |
| <span data-ttu-id="f0f07-168">bash</span><span class="sxs-lookup"><span data-stu-id="f0f07-168">bash</span></span> | <span data-ttu-id="f0f07-169">4 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-169">4 and above</span></span> |
| <span data-ttu-id="f0f07-170">python</span><span class="sxs-lookup"><span data-stu-id="f0f07-170">python</span></span> | <span data-ttu-id="f0f07-171">2.6.6 и выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-171">2.6.6 and above</span></span>  |


### <a name="identifying-volumes"></a><span data-ttu-id="f0f07-172">Определение томов</span><span class="sxs-lookup"><span data-stu-id="f0f07-172">Identifying Volumes</span></span>

#### <a name="for-windows"></a><span data-ttu-id="f0f07-173">Для Windows</span><span class="sxs-lookup"><span data-stu-id="f0f07-173">For Windows</span></span>

<span data-ttu-id="f0f07-174">При запуске исполняемый hello hello операционная система монтирует новые тома hello и назначает буквы дисков.</span><span class="sxs-lookup"><span data-stu-id="f0f07-174">When you run hello exectuable, hello operating system mounts hello new volumes and assigns drive letters.</span></span> <span data-ttu-id="f0f07-175">Можно использовать эти диски toobrowse проводника Windows или проводника.</span><span class="sxs-lookup"><span data-stu-id="f0f07-175">You can use Windows Explorer or File Explorer toobrowse those drives.</span></span> <span data-ttu-id="f0f07-176">Hello буквы дисков, назначенные toohello тома может быть приветствия и те же буквы как hello исходной виртуальной машины, однако hello имя тома сохраняется.</span><span class="sxs-lookup"><span data-stu-id="f0f07-176">hello drive letters assigned toohello volumes may not be hello same letters as hello original virtual machine, however, hello volume name is preserved.</span></span> <span data-ttu-id="f0f07-177">Например, если hello томе hello исходная виртуальная машина была «диск данных (E:\)», что том может подключен как «диск данных («Любую букву диска доступных»:\) на локальном компьютере hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-177">For example, if hello volume on hello original virtual machine was “Data Disk (E:\)”, that volume can be attached as “Data Disk ('Any drive letter available':\) on hello local computer.</span></span> <span data-ttu-id="f0f07-178">Просмотрите все тома, упомянутые в выходных данных скрипта hello, пока не найдете файлы или папку.</span><span class="sxs-lookup"><span data-stu-id="f0f07-178">Browse through all volumes mentioned in hello script output until you find your files/folder.</span></span>  
       
   ![Колонка восстановления файлов](./media/backup-azure-restore-files-from-vm/volumes-attached.png)
           
#### <a name="for-linux"></a><span data-ttu-id="f0f07-180">Для Linux</span><span class="sxs-lookup"><span data-stu-id="f0f07-180">For Linux</span></span>

<span data-ttu-id="f0f07-181">В Linux hello томов hello точки восстановления, подключенных toohello папку, где выполняется сценарий hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-181">In Linux, hello volumes of hello recovery point are mounted toohello folder where hello script is run.</span></span> <span data-ttu-id="f0f07-182">Hello присоединенные диски, тома и соответствующего подключения hello путей отображаются соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="f0f07-182">hello attached disks, volumes and hello corresponding mount paths are shown accordingly.</span></span> <span data-ttu-id="f0f07-183">Эти подключения пути являются видимыми toousers с доступом на корневом уровне.</span><span class="sxs-lookup"><span data-stu-id="f0f07-183">These mount paths are visible toousers having root level access.</span></span> <span data-ttu-id="f0f07-184">Просмотрите hello тома, упомянутые в выходных данных скрипта hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-184">Browse through hello volumes mentioned in hello script output.</span></span>

  ![Колонка восстановления файлов Linux](./media/backup-azure-restore-files-from-vm/linux-mount-paths.png)
  

## <a name="closing-hello-connection"></a><span data-ttu-id="f0f07-186">Закрывает соединение hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-186">Closing hello connection</span></span>

<span data-ttu-id="f0f07-187">После определения файлов hello и копирования их tooa локальное место хранения, удалить или отключить hello дополнительные диски.</span><span class="sxs-lookup"><span data-stu-id="f0f07-187">After identifying hello files and copying them tooa local storage location, remove (or unmount) hello additional drives.</span></span> <span data-ttu-id="f0f07-188">диски hello toounmount, hello **восстановления файлов** колонки в hello портала Azure щелкните **отключить диски**.</span><span class="sxs-lookup"><span data-stu-id="f0f07-188">toounmount hello drives, on hello **File Recovery** blade in hello Azure portal, click **Unmount Disks**.</span></span>

![Отключение дисков](./media/backup-azure-restore-files-from-vm/unmount-disks3.png)

<span data-ttu-id="f0f07-190">После hello диски отключены, появляется сообщение о том, что она выполнена успешно.</span><span class="sxs-lookup"><span data-stu-id="f0f07-190">Once hello disks have been unmounted, you receive a message letting you know it was successful.</span></span> <span data-ttu-id="f0f07-191">Займет toorefresh hello подключение в течение нескольких минут, чтобы вы можете удалить диски hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-191">It may take a few minutes for hello connection toorefresh so that you can remove hello disks.</span></span>

<span data-ttu-id="f0f07-192">В Linux после точки восстановления toohello hello соединение разрывается, hello ОС hello соответствующие пути подключения автоматического удаления.</span><span class="sxs-lookup"><span data-stu-id="f0f07-192">In Linux, after hello connection toohello recovery point is severed, hello OS doesn't remove hello corresponding mount paths automatically.</span></span> <span data-ttu-id="f0f07-193">Они существуют в виде «строк» и они становятся видимыми, но вызывают ошибку, когда вы доступа и запись файлов hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-193">These exist as "orphan" volumes and they are visible but throw an error when you access/write hello files.</span></span> <span data-ttu-id="f0f07-194">Их можно удалить вручную.</span><span class="sxs-lookup"><span data-stu-id="f0f07-194">They can be manually removed.</span></span> <span data-ttu-id="f0f07-195">сценарий Hello, при запуске идентифицирует эти тома, существующие из предыдущих точек восстановления и очищает их после согласия.</span><span class="sxs-lookup"><span data-stu-id="f0f07-195">hello script, when run, identifies any such volumes existing from any previous recovery points and cleans them up upon consent.</span></span>

## <a name="special-configurations"></a><span data-ttu-id="f0f07-196">Специальные конфигурации</span><span class="sxs-lookup"><span data-stu-id="f0f07-196">Special configurations</span></span>

### <a name="dynamic-disks"></a><span data-ttu-id="f0f07-197">Динамические диски</span><span class="sxs-lookup"><span data-stu-id="f0f07-197">Dynamic Disks</span></span>

<span data-ttu-id="f0f07-198">Здравствуйте, если hello виртуальной Машине Azure, которая была создана резервная копия имеет тома, которые охватывают несколько дисков (составные и чередующиеся тома) и/или отказоустойчивые тома (тома, зеркальные и RAID-5) на динамических дисках, то нельзя запустить исполняемый файл скрипта hello на одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f0f07-198">If hello Azure VM that was backed up has volumes that span multiple disks (spanned and striped volumes) and/or fault-tolerant volumes (mirrored and RAID-5 volumes) on dynamic disks, then you can't run hello executable script on hello same VM.</span></span> <span data-ttu-id="f0f07-199">Скрипт hello исполняемый файл на другой компьютер с совместимую операционную систему.</span><span class="sxs-lookup"><span data-stu-id="f0f07-199">Instead, run hello executable script on any other machine with a compatible operating system.</span></span>

### <a name="windows-storage-spaces"></a><span data-ttu-id="f0f07-200">Дисковое пространство Windows</span><span class="sxs-lookup"><span data-stu-id="f0f07-200">Windows Storage Spaces</span></span>

<span data-ttu-id="f0f07-201">Дисковые пространства Windows — это технология, в хранилище Windows, позволяющая toovirtualize хранилища.</span><span class="sxs-lookup"><span data-stu-id="f0f07-201">Windows Storage Spaces is a technology in Windows storage that enables you toovirtualize storage.</span></span> <span data-ttu-id="f0f07-202">С помощью дисковых пространств Windows можно сгруппировать отраслевым стандартам дисков в пулы носителей и затем создавать виртуальные диски, вызывается из hello доступное пространство в этих пулах дисковых пространств.</span><span class="sxs-lookup"><span data-stu-id="f0f07-202">With Windows Storage Spaces you can group industry-standard disks into storage pools, and then create virtual disks, called storage spaces, from hello available space in those storage pools.</span></span>

<span data-ttu-id="f0f07-203">Здравствуйте, если hello виртуальной Машине Azure, которая была создана резервная копия используется дисковые пространства Windows hello исполняемый скрипт нельзя запускать на одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f0f07-203">If hello Azure VM that was backed up uses Windows Storage Spaces, then you can't run hello executable script on hello same VM.</span></span> <span data-ttu-id="f0f07-204">Скрипт hello исполняемый файл на другой компьютер с совместимую операционную систему.</span><span class="sxs-lookup"><span data-stu-id="f0f07-204">Instead, run hello executable script on any other machine with a compatible operating system.</span></span>

### <a name="lvmraid-arrays"></a><span data-ttu-id="f0f07-205">LVM или RAID-массивы</span><span class="sxs-lookup"><span data-stu-id="f0f07-205">LVM/RAID Arrays</span></span>

<span data-ttu-id="f0f07-206">В Linux, диспетчер логических томов (LVM) и/или программного обеспечения RAID-массивов, используется toomanage логические тома на несколько дисков.</span><span class="sxs-lookup"><span data-stu-id="f0f07-206">In Linux, Logical volume manager (LVM) and/or software RAID Arrays are used toomanage logical volumes over multiple disks.</span></span> <span data-ttu-id="f0f07-207">Если резервное копирование виртуальных Машин Linux hello использует LVM и/или RAID-массивов, нельзя запустить скрипт hello на hello одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f0f07-207">If hello backed up Linux VM uses LVM and/or RAID Arrays, you can't run hello script on hello same VM.</span></span> <span data-ttu-id="f0f07-208">Вместо этого запустить сценарий hello на любом компьютере с ОС, совместимых и который поддерживает файловую систему hello, резервная копия виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f0f07-208">Instead run hello script on any other machine with compatible OS and which supports filesystem of hello backed up VM.</span></span>

<span data-ttu-id="f0f07-209">Отображает выходные данные сценария Hello hello LVM и/или RAID-массивов и hello дисков с типом раздела hello, как показано ниже</span><span class="sxs-lookup"><span data-stu-id="f0f07-209">hello script output displays hello LVM and/or RAID Arrays disks and hello volumes with hello partition type as shown below</span></span>

   ![Колонка выходных данных для LVM в Linux](./media/backup-azure-restore-files-from-vm/linux-LVMOutput.png)
   
<span data-ttu-id="f0f07-211">Hello следующие команды требуется toobe выполнялись hello пользователя toobring этих секций в оперативный режим.</span><span class="sxs-lookup"><span data-stu-id="f0f07-211">hello following commands need toobe run by hello user toobring these partitions online.</span></span> 

<span data-ttu-id="f0f07-212">**Для разделов LVM**</span><span class="sxs-lookup"><span data-stu-id="f0f07-212">**For LVM Partitions**</span></span>

```
$ pvs <volume name as shown above in hello script output> 
```
<span data-ttu-id="f0f07-213">Перечисляет имена групп томов hello в физическом диске.</span><span class="sxs-lookup"><span data-stu-id="f0f07-213">This lists hello volume group names under a physical volume.</span></span>

```
$ lvdisplay <volume-group-name from hello pvs command’s results> 
```
<span data-ttu-id="f0f07-214">Эта команда выводит все логические тома, имена и их пути в группе томов.</span><span class="sxs-lookup"><span data-stu-id="f0f07-214">This lists all logical volumes, names and their paths in a volume group.</span></span>

```
$ mount <LV path> </mountpath>
```
<span data-ttu-id="f0f07-215">toomount hello путь toohello логические тома по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="f0f07-215">toomount hello logical volumes toohello path of your choice.</span></span>


<span data-ttu-id="f0f07-216">**Для RAID-массивов**</span><span class="sxs-lookup"><span data-stu-id="f0f07-216">**For RAID Arrays**</span></span>

```
$ mdadm –detail –scan
```
<span data-ttu-id="f0f07-217">Эта команда отображает сведения о всех дисках RAID.</span><span class="sxs-lookup"><span data-stu-id="f0f07-217">This displays details about all raid disks.</span></span> <span data-ttu-id="f0f07-218">Hello соответствующие RAID-диск будет отображаться в виде`/dev/mdm/<RAID array name in hello backed up VM>`</span><span class="sxs-lookup"><span data-stu-id="f0f07-218">hello relevant RAID disk will be displayed as `/dev/mdm/<RAID array name in hello backed up VM>`</span></span>

<span data-ttu-id="f0f07-219">Используйте команды mount hello, если диск RAID hello содержит физических томов.</span><span class="sxs-lookup"><span data-stu-id="f0f07-219">Use hello mount command if hello RAID disk has physical volumes.</span></span>
```
$ mount [RAID Disk Path] [/mounthpath]
```

<span data-ttu-id="f0f07-220">Если этот диск RAID имеет другой LVM, настроенные в нем затем следовать hello же процедуры, как описано выше для секций LVM с именем тома hello, имя диска RAID hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-220">If this RAID disk has another LVM configured in it then follow hello same procedure as outlined above for LVM partitions with hello volume name being hello RAID Disk name</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="f0f07-221">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="f0f07-221">Troubleshooting</span></span>

<span data-ttu-id="f0f07-222">Если возникают проблемы при восстановлении файлов из виртуальных машин hello, проверьте hello в следующей таблице для получения дополнительных сведений.</span><span class="sxs-lookup"><span data-stu-id="f0f07-222">If you have problems while recovering files from hello virtual machines, check hello following table for additional information.</span></span>

| <span data-ttu-id="f0f07-223">Сообщение об ошибке или ситуация</span><span class="sxs-lookup"><span data-stu-id="f0f07-223">Error Message / Scenario</span></span> | <span data-ttu-id="f0f07-224">Возможные причины</span><span class="sxs-lookup"><span data-stu-id="f0f07-224">Probable Cause</span></span> | <span data-ttu-id="f0f07-225">Рекомендуемое действие</span><span class="sxs-lookup"><span data-stu-id="f0f07-225">Recommended action</span></span> |
| ------------------------ | -------------- | ------------------ |
| <span data-ttu-id="f0f07-226">Выходной EXE-файла: *подключение целевого toohello исключение*</span><span class="sxs-lookup"><span data-stu-id="f0f07-226">Exe output: *Exception connecting toohello target*</span></span> |<span data-ttu-id="f0f07-227">Скрипт не является точкой восстановления может tooaccess hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-227">Script is not able tooaccess hello recovery point</span></span> | <span data-ttu-id="f0f07-228">Проверьте ли hello компьютер соответствует требованиям доступа hello, упомянутых выше</span><span class="sxs-lookup"><span data-stu-id="f0f07-228">Check whether hello machine fulfills hello access requirements mentioned above</span></span>|  
|   <span data-ttu-id="f0f07-229">Выходной EXE-файла: *целевой hello уже были записаны в через сеанс ISCSI.*</span><span class="sxs-lookup"><span data-stu-id="f0f07-229">Exe output: *hello target has already been logged in via an ISCSI session.*</span></span> |   <span data-ttu-id="f0f07-230">Hello скрипт уже был выполнен на приветствия присоединения того же компьютера и hello дисков</span><span class="sxs-lookup"><span data-stu-id="f0f07-230">hello script was already executed on hello same machine and hello drives have been attached</span></span> |   <span data-ttu-id="f0f07-231">Hello тома точки восстановления hello уже подключен.</span><span class="sxs-lookup"><span data-stu-id="f0f07-231">hello volumes of hello recovery point have already been attached.</span></span> <span data-ttu-id="f0f07-232">Они не может выполнить операцию с hello же буквы для диска hello исходной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f0f07-232">They may NOT be mounted with hello same drive letters of hello original VM.</span></span> <span data-ttu-id="f0f07-233">Просмотр всех доступных томов hello в проводнике hello файла</span><span class="sxs-lookup"><span data-stu-id="f0f07-233">Browse through all hello available volumes in hello file explorer for your file</span></span> |
| <span data-ttu-id="f0f07-234">Выходной EXE-файла: *этот скрипт является недопустимым, поскольку отсоединить диски hello через hello портала или превышено ограничение 12-hr. Загрузите новый сценарий с портала hello.*</span><span class="sxs-lookup"><span data-stu-id="f0f07-234">Exe output: *This script is invalid because hello disks have been dismounted via portal/exceeded hello 12-hr limit. Please download a new script from hello portal.*</span></span> |    <span data-ttu-id="f0f07-235">отсоединить Hello диски с портала hello или превышено предельное число 12 ч hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-235">hello disks have been dismounted from hello portal or hello 12-hr limit exceeded</span></span> |  <span data-ttu-id="f0f07-236">Эта копия исполняемого файла больше недействительна, и использовать ее нельзя.</span><span class="sxs-lookup"><span data-stu-id="f0f07-236">This particular exe is now invalid and can’t be run.</span></span> <span data-ttu-id="f0f07-237">Если вы хотите tooaccess hello файлы, восстановление в момент, посетите портал hello для нового exe-файла</span><span class="sxs-lookup"><span data-stu-id="f0f07-237">If you want tooaccess hello files of that recovery point-in-time, visit hello portal for a new exe</span></span>|
| <span data-ttu-id="f0f07-238">На компьютере hello, где запускается hello exe: hello новые тома не отключаются после hello Отключение кнопки</span><span class="sxs-lookup"><span data-stu-id="f0f07-238">On hello machine where hello exe is run: hello new volumes are not dismounted after hello dismount button is clicked</span></span> |    <span data-ttu-id="f0f07-239">Hello инициатора ISCSI на компьютере hello не отвечать на запросы и обновление его цель toohello подключения и обслуживание кэша hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-239">hello ISCSI initiator on hello machine is not responding/refreshing its connection toohello target and maintaining hello cache</span></span> |    <span data-ttu-id="f0f07-240">Подождите несколько минут, после нажатия кнопки dismount hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-240">Wait for some mins after hello dismount button is pressed.</span></span> <span data-ttu-id="f0f07-241">Если по-прежнему hello новые тома не отключены, просмотрите через все тома hello.</span><span class="sxs-lookup"><span data-stu-id="f0f07-241">If hello new volumes are still not dismounted, please browse through all hello volumes.</span></span> <span data-ttu-id="f0f07-242">Принудительно, hello инициатора toorefresh hello соединения и hello размонтируется с сообщением об ошибке, hello диск недоступен</span><span class="sxs-lookup"><span data-stu-id="f0f07-242">This forces hello initiator toorefresh hello connection and hello volume is dismounted with an error message that hello disk is not available</span></span>|
| <span data-ttu-id="f0f07-243">Выходной EXE-файла: сценарий выполняется успешно, но «Подключенных нового тома» не отображается в выходных данных скрипта hello</span><span class="sxs-lookup"><span data-stu-id="f0f07-243">Exe output: Script is run successfully but “New volumes attached” is not displayed on hello script output</span></span> |   <span data-ttu-id="f0f07-244">Это временная проблема</span><span class="sxs-lookup"><span data-stu-id="f0f07-244">This is a transient error</span></span>   | <span data-ttu-id="f0f07-245">Hello томов будет уже присоединены.</span><span class="sxs-lookup"><span data-stu-id="f0f07-245">hello volumes would have been already attached.</span></span> <span data-ttu-id="f0f07-246">Откройте обозреватель toobrowse.</span><span class="sxs-lookup"><span data-stu-id="f0f07-246">Open Explorer toobrowse.</span></span> <span data-ttu-id="f0f07-247">При использовании hello же компьютер для выполнения скриптов, каждый раз, рекомендуется перезагрузить компьютер hello и следует отображать список hello hello exe последующих запусках.</span><span class="sxs-lookup"><span data-stu-id="f0f07-247">If you are using hello same machine for running scripts every time, consider restarting hello machine and hello list should be displayed in hello subsequent exe runs.</span></span> |
| <span data-ttu-id="f0f07-248">Linux определенного: не удается tooview hello требуемого тома</span><span class="sxs-lookup"><span data-stu-id="f0f07-248">Linux specific: Not able tooview hello desired volumes</span></span> | <span data-ttu-id="f0f07-249">Hello ОС машины hello, где выполняется сценарий hello может не распознать hello базовой файловую систему hello, резервная копия виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="f0f07-249">hello OS of hello machine where hello script is run may not recognize hello underlying filesystem of hello backed up VM</span></span> | <span data-ttu-id="f0f07-250">Проверьте, является ли точка восстановления hello аварийных согласованием или совместимые в файлами.</span><span class="sxs-lookup"><span data-stu-id="f0f07-250">Check whether hello recovery point is crash consistent or file-consistent.</span></span> <span data-ttu-id="f0f07-251">Если скрипт hello согласованной, запустите файл на другой компьютер, операционная система распознает hello резервная копия файловой системы для Виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="f0f07-251">If file consistent, run hello script on another machine whose OS recognizes hello backed up VM's filesystem</span></span> |
| <span data-ttu-id="f0f07-252">Windows для конкретной: не удается tooview hello требуемого тома</span><span class="sxs-lookup"><span data-stu-id="f0f07-252">Windows specific: Not able tooview hello desired volumes</span></span> | <span data-ttu-id="f0f07-253">диски Hello был присоединен, но hello томов не были настроены</span><span class="sxs-lookup"><span data-stu-id="f0f07-253">hello disks may have been attached but hello volumes were not configured</span></span> | <span data-ttu-id="f0f07-254">В панели управления диска hello идентификации точки восстановления связанных toohello hello дополнительные диски.</span><span class="sxs-lookup"><span data-stu-id="f0f07-254">From hello disk management screen, identify hello additional disks related toohello recovery point.</span></span> <span data-ttu-id="f0f07-255">Если любой из этих дисков находится в автономном режиме состояния попробуйте сделать их через Интернет, щелкнув правой кнопкой мыши на диске hello и нажмите кнопку «Работает»</span><span class="sxs-lookup"><span data-stu-id="f0f07-255">If any of these disks are in offline state try making them online by right-clicking on hello disk and click 'Online'</span></span>|
