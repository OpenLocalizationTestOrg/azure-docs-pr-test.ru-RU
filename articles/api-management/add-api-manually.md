---
title: "Добавление API вручную с помощью портала Azure | Документация Майкрософт"
description: "В этом руководстве описано, как вручную добавить API с помощью службы управления API."
services: api-management
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: tutorial
ms.date: 11/22/2017
ms.author: apimpm
ms.openlocfilehash: 9426839f88daece1bb688a2079b7854ccaebdc57
ms.sourcegitcommit: b854df4fc66c73ba1dd141740a2b348de3e1e028
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2017
---
# <a name="add-an-api-manually"></a>Добавление API вручную 

Шаги в этой статье показывают, как использовать портал Azure, чтобы вручную добавить API в экземпляр службы управления API. Обычно это нужно для имитации API, когда вы вручную создаете пустой API и определяете его. Сведения об имитации API см. в статье [Mock API responses](mock-api-responses.md) (Имитация ответов API).

Если вы хотите импортировать существующий API, изучите список [связанных разделов](#related-topics).

В этой статье мы создадим пустой API и укажем [httpbin.org](http://httpbin.org) (общедоступную службу тестирования) в качестве API внутреннего сервера.

## <a name="prerequisites"></a>Предварительные требования

Выполните задачи в кратком руководстве по [созданию экземпляра службы управления API Azure](get-started-create-service-instance.md).

[!INCLUDE [api-management-navigate-to-instance.md](../../includes/api-management-navigate-to-instance.md)]

## <a name="create-an-api"></a>Создание API

1. Выберите **Интерфейсы API** в разделе **управление API** .
2. Выберите **+ Add API** (+ Добавить API) в меню слева.
3. Выберите **Пустой API** в списке.

    ![Пустой API](media/add-api-manually/blank-api.png)
4. Введите параметры этого API

    ![данных](media/add-api-manually/settings.png)

    |**Имя**|**Значение**|**Описание**|
    |---|---|---|
    |**Отображаемое имя**|*Пустой API* |Это имя отображается на портале разработчика.|
    |**URL-адрес веб-службы** (необязательно).| *http://httpbin.org*| Если вы просто имитируете API, здесь можно ничего не указывать. <br/>В нашем примере указано значение [http://httpbin.org](http://httpbin.org). Это общедоступная служба тестирования. <br/>Если вы хотите импортировать API, который автоматически сопоставляется с серверной частью, изучите список [связанных разделов](#related-topics).|
    |**Схема URL-адресов**|"*HTTPS*"|В этом примере мы настраиваем доступ службы управления API к серверной части по защищенному протоколу HTTPS, хотя сама серверная часть использует незащищенный доступ по HTTP. <br/>Метод доступа через HTTPS к HTTP называется завершением HTTPS. Его можно применять, если API существует в виртуальной сети (где доступ защищен даже без применения HTTPS). <br/>Вы можете использовать "Завершение HTTPS", чтобы немного снизить нагрузку на ЦП.|
    |**Суффикс URL-адреса**|*hbin*| Суффикс — это имя, которое идентифицирует конкретный API в экземпляре службы управления API. Он должен быть уникальным в пределах экземпляра службы управления API.|
    |**Продукты**|*Без ограничений* |Чтобы опубликовать API, его нужно связать с определенным продуктом. Если вы намерены опубликовать API и предоставить разработчикам доступ к нему, добавьте его к продукту. Это можно сделать во время создания API или позже.<br/><br/>Продуктами называют ассоциации из одного или нескольких API. Вы можете объединить определенное число API-интерфейсов и предлагать их разработчикам через портал разработчика. <br/>Чтобы получить доступ к API, разработчику нужно подписаться на соответствующий продукт. При этом он получит ключ подписки, который подходит к любому API этого продукта. Создавая экземпляр службы управления API, вы автоматически становитесь его администратором. Поэтому вы по умолчанию будете подписаны на все продукты.<br/><br/> По умолчанию каждый экземпляр службы управления API создается с двумя демонстрационными продуктами: **Начальный** и **Без ограничений**.| 
5. Нажмите кнопку **Создать**.

Сейчас в службе управления API нет операций, сопоставленных с операциями в API серверной части. Вызвав операцию, которая предоставляется в серверной части, но еще не сопоставлена со службой управления API, вы получите ответ **404**. 

>[!NOTE] 
> По умолчанию при добавлении API-интерфейса, даже если он подключен к какой-либо внутренней службе, служба управления API не будет предоставлять доступ к операциям, пока вы не внесете их в список разрешений. Чтобы разрешить выполнение операций в службе серверной части, создайте операцию службы управления API, сопоставленную с этой серверной операцией.
>

## <a name="add-and-test-an-operation"></a>Добавление и проверка операции

В этом разделе показано, как добавить операцию /get и сопоставить ее с операцией серверной части http://httpbin.org/get.

### <a name="add-the-operation"></a>Добавление операции

1. Выберите API, созданный на предыдущем шаге.
2. Щелкните **+Добавить операцию**.
3. В поле **URL-адрес** выберите значение **GET** и введите */get* в качестве значения ресурса.
4. Введите *FetchData* в поле **Отображаемое имя**.
5. Щелкните **Сохранить**.

### <a name="test-the-operation"></a>Проверка операции

Проверка функции выполняется на портале Azure. Также вы можете проверить ее на **портале разработчиков**.

1. Откройте вкладку **Тест**.
2. Выберите **FetchData**.
3. Нажмите кнопку **Отправить**.

Появится сообщение с ответом, который создает операция http://httpbin.org/get. Если вы хотите преобразовать операцию, используйте инструкции из статьи [Transform and protect your API](transform-api.md) (Преобразование и защита API).

## <a name="add-and-test-a-parameterized-operation"></a>Добавление и проверка параметризованной операции

В этом разделе показано, как добавить операцию, которая принимает параметр. Здесь мы сопоставим операцию с адресом http://httpbin.org/status/200.

### <a name="add-the-operation"></a>Добавление операции

1. Выберите API, созданный на предыдущем шаге.
2. Щелкните **+Добавить операцию**.
3. В поле **URL-адрес** выберите значение **GET** и введите */status/{code}* в качестве значения ресурса. Здесь же можно указать полезные сведения об этом параметре. Например, укажите значение *номер* в поле **тип** и число *200* (по умолчанию) в поле **значения**.
4. Введите **отображаемое имя** GetStatus.
5. Щелкните **Сохранить**.

### <a name="test-the-operation"></a>Проверка операции 

Проверка функции выполняется на портале Azure.  Также вы можете проверить ее на **портале разработчиков**.

1. Откройте вкладку **Тест**.
2. Выберите **GetStatus**. По умолчанию устанавливается значение кода *200*. Его можно изменить, чтобы проверить работу других значений. Например, введите значение *418*.
3. Нажмите кнопку **Отправить**.

    Появится сообщение с ответом, который создает операция http://httpbin.org/status/200. Если вы хотите преобразовать операцию, используйте инструкции из статьи [Transform and protect your API](transform-api.md) (Преобразование и защита API).

[!INCLUDE [api-management-navigate-to-instance.md](../../includes/api-management-append-apis.md)]

[!INCLUDE [api-management-define-api-topics.md](../../includes/api-management-define-api-topics.md)]

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Преобразование и защита опубликованного API](transform-api.md)
