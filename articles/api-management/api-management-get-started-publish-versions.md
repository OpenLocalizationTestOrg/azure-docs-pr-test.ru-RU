---
title: "Публикация версий своего API с помощью службы управления API Azure | Документация Майкрософт"
description: "Следуйте инструкциям этого руководства, чтобы узнать, как опубликовать нескольких версий API в службе управления API."
services: api-management
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: na
ms.custom: mvc
ms.topic: tutorial
ms.date: 11/19/2017
ms.author: apimpm
ms.openlocfilehash: d63bdd3110f5c5db3e7bfec424644fdbc8d8d90c
ms.sourcegitcommit: b854df4fc66c73ba1dd141740a2b348de3e1e028
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2017
---
# <a name="publish-multiple-versions-of-your-api"></a>Публикация нескольких версий API 

Иногда нецелесообразно предоставлять всем вызывающим сторонам одну версию API. В некоторых случаях требуется опубликовать новые или другие функции API для определенных пользователей, тогда как другим пользователям требуется именно тот API, который подходит им в настоящее время. Если вызывающим сторонам требуется выполнить обновление до более поздней версии, они хотят, чтобы сделать это было просто.  Для этого можно использовать **версии** в службе управления API Azure. Дополнительные сведения см. в статье о [версиях и редакциях](https://blogs.msdn.microsoft.com/apimanagement/2017/09/14/versions-revisions/).

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * добавление новой версии в существующий интерфейс API;
> * выбор схемы версии;
> * Добавление версии в продукт
> * Обзор портала разработчика для просмотра версии

![Версия, отображаемая на портале разработчика](media/api-management-getstarted-publish-versions/azure_portal.PNG)

## <a name="prerequisites"></a>Предварительные требования

+ Выполните задачи в кратком руководстве по [созданию экземпляра службы управления API Azure](get-started-create-service-instance.md).
+ Также выполните задачи в руководстве по [импорту и публикации первого API](import-and-publish.md).

[!INCLUDE [api-management-navigate-to-instance.md](../../includes/api-management-navigate-to-instance.md)]

## <a name="add-a-new-version"></a>Добавление новой версии

![Контекстное меню API: добавление версии](media/api-management-getstarted-publish-versions/AddVersionMenu.png)

1. В списке API выберите **Conference API** (API для конференций).
2. Выберите контекстное меню (**...** ) рядом с пунктом.
3. Выберите **+ Add Version** (+ Добавить версию).

    > [!TIP]
    > Управление версиями можно также включить при создании API. Для этого следует выбрать **Управлять версией этого API?** на экране **Добавление API**.

## <a name="choose-a-versioning-scheme"></a>Выбор схемы управления версиями

Служба управления API Azure позволяет выбрать, каким образом разрешить вызывающим сторонам указывать, какая версия API им требуется. Для этого следует выбрать **схему управления версиями**. Эта схема может быть **путем, заголовком или строкой запроса**. В нашем примере это путь.

![Экран добавления версии](media/api-management-getstarted-publish-versions/AddVersion.PNG)

1. Оставьте выбранным значение **Путь** для параметра **Схема управления версиями**.
2. Добавьте значение **v1** для параметра **Идентификатор версии**.

    > [!TIP]
    > Если в качестве схемы управления версиями выбрать **заголовок** или **строку запроса**, необходимо предоставить дополнительное значение — имя заголовка или параметр строки запроса.

3. При желании добавьте описание.
4. Щелкните **Создать**, чтобы создать версию.
5. Теперь под пунктом **Big Conference API** в списке API указаны два разных API, **Original** и **v1**.

    ![Версии, перечисленные в списке API на портале Azure](media/api-management-getstarted-publish-versions/VersionList.PNG)

    > [!Note]
    > Если добавить версию для API без управления версиями, всегда будет автоматически создаваться версия**Original**, в соответствии с URL-адресом по умолчанию. Это гарантирует, что работа вызывающих сторон не будет нарушена в процессе добавления версии. Если вы сразу создадите API с управлением версиями, то версия Original не будет создаваться.

6. Теперь можно изменить и настроить **v1** в качестве API, не связанного с версией **Original**. Изменение одной версии не влияет на другую.

## <a name="add-the-version-to-a-product"></a>Добавление версии в продукт

Чтобы вызывающие стороны могли видеть новую версию, ее необходимо добавить в **продукт** (продукты не наследуются от родительских версий).

1. Выберите **Продукты** на странице службы управления.
2. Выберите **Без ограничений**.
3. Выберите **Интерфейсы API**.
4. Выберите **Добавить**.
5. Выберите **Conference API, Version v1** (Conference API, версия v1).
6. Вернитесь на страницу управления службами и выберите **Интерфейсы API**.

## <a name="browse-the-developer-portal-to-see-the-version"></a>Обзор портала разработчика для просмотра версии

1. Выберите **Портал разработчика** в верхнем меню.
2. Выберите **Интерфейсы API**. Обратите внимание, что для **Conference API** отображаются версии **Original** и **v1**.
3. Выберите **v1**.
4. Обратите внимание на **URL-адрес запроса** первой операции в списке. В нем видно, что путь URL-адреса API содержит **v1**.

    ![Контекстное меню API: добавление версии](media/api-management-getstarted-publish-versions/developer_portal.png)

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * добавление новой версии в существующий интерфейс API;
> * выбор схемы версии; 
> * Добавление версии в продукт
> * Обзор портала разработчика для просмотра версии

Перейдите к следующему руководству:

> [!div class="nextstepaction"]
> [Обновление и масштабирование](upgrade-and-scale.md)