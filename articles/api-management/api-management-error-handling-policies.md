---
title: "Обработка ошибок в политиках управления API Azure | Документация Майкрософт"
description: "Информация о том, как следует реагировать на ошибки, возникающие во время обработки запросов в службе управления API Azure."
services: api-management
documentationcenter: 
author: miaojiang
manager: erikre
editor: 
ms.assetid: 3c777964-02b2-4f55-8731-8c3bd3c0ae27
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/09/2017
ms.author: apimpm
ms.openlocfilehash: 2fb403cc7454227083dc34d41a6f5f3a5876b1e7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="error-handling-in-api-management-policies"></a><span data-ttu-id="e8df2-103">Обработка ошибок в политиках управления API</span><span class="sxs-lookup"><span data-stu-id="e8df2-103">Error handling in API Management policies</span></span>
<span data-ttu-id="e8df2-104">Управление API Azure позволяет издателям реагировать на ошибки, которые могут возникать во время обработки запросов к прокси-серверу, предоставляя объект `ProxyError`.</span><span class="sxs-lookup"><span data-stu-id="e8df2-104">Azure API Management allows publishers to respond to error conditions that may occur during the processing of requests to the proxy by providing a `ProxyError` object.</span></span> <span data-ttu-id="e8df2-105">Доступ к объекту `ProxyError` осуществляется через свойство [context.LastError](api-management-policy-expressions.md#ContextVariables), и его могут использовать политики в разделе `on-error`.</span><span class="sxs-lookup"><span data-stu-id="e8df2-105">The `ProxyError` object is accessed through the [context.LastError](api-management-policy-expressions.md#ContextVariables) property and can be used by policies in the `on-error` policy section.</span></span> <span data-ttu-id="e8df2-106">Эта статья содержит справочную информацию о возможностях обработки ошибок, которые предоставляет служба управления API Azure.</span><span class="sxs-lookup"><span data-stu-id="e8df2-106">This topic provides a reference for the error handling capabilities in Azure API Management.</span></span>  
  
## <a name="error-handling-in-api-management"></a><span data-ttu-id="e8df2-107">Обработка ошибок в службе управления API</span><span class="sxs-lookup"><span data-stu-id="e8df2-107">Error handling in API Management</span></span>  
 <span data-ttu-id="e8df2-108">Политики в службе управления API Azure включают разделы `inbound`, `backend`, `outbound` и `on-error`, как показано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="e8df2-108">Policies in Azure API Management are divided into `inbound`, `backend`, `outbound`, and `on-error` sections as shown in the following example.</span></span>  
  
```xml  
<policies>  
  <inbound>  
    <!-- statements to be applied to the request go here -->  
  </inbound>  
  <backend>  
    <!-- statements to be applied before the request is   
         forwarded to the backend service go here -->  
    </backend>  
    <outbound>  
      <!-- statements to be applied to the response go here -->  
    </outbound>  
    <on-error>  
        <!-- statements to be applied if there is an error   
             condition go here -->  
  </on-error>  
</policies>  
```  
  
 <span data-ttu-id="e8df2-109">Во время обработки запроса встроенные действия выполняются с соблюдением всех политик в области запроса.</span><span class="sxs-lookup"><span data-stu-id="e8df2-109">During the processing of a request, built-in steps are executed along with any policies that are in scope for the request.</span></span> <span data-ttu-id="e8df2-110">Если возникает ошибка, обработка немедленно переходит к разделу `on-error` соответствующей политики.</span><span class="sxs-lookup"><span data-stu-id="e8df2-110">If an error occurs, processing immediately jumps to the `on-error` policy section.</span></span> <span data-ttu-id="e8df2-111">Раздел политики `on-error` можно использовать в любой области, и издатели API могут настроить требуемые действия, например запись информации об ошибках в концентраторы событий или создание нового ответа для передачи вызывающему объекту.</span><span class="sxs-lookup"><span data-stu-id="e8df2-111">The `on-error` policy section can be used at any scope, and API publishers can configure custom behavior such as logging the error to event hubs or creating a new response to return to the caller.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="e8df2-112">Раздел `on-error` в политиках отсутствует по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e8df2-112">The `on-error` section is not present in policies by default.</span></span> <span data-ttu-id="e8df2-113">Чтобы добавить в политику раздел `on-error`, перейдите к требуемой политике в редакторе политик и добавьте раздел.</span><span class="sxs-lookup"><span data-stu-id="e8df2-113">To add the `on-error` section to a policy, browse to the desired policy in the policy editor and add it.</span></span> <span data-ttu-id="e8df2-114">Дополнительные сведения о настройке политик см. в статье [Политики в Azure API Management](https://azure.microsoft.com/documentation/articles/api-management-howto-policies/).</span><span class="sxs-lookup"><span data-stu-id="e8df2-114">For more information about configuring policies, see [Policies in API Management](https://azure.microsoft.com/documentation/articles/api-management-howto-policies/).</span></span>  
>   
>  <span data-ttu-id="e8df2-115">Если в политике нет раздела `on-error`, вызывающий объект при возникновении ошибки получит сообщение с HTTP-кодом 400 или 500.</span><span class="sxs-lookup"><span data-stu-id="e8df2-115">If there is no `on-error` section, callers will receive 400 or 500 HTTP response messages if an error condition occurs.</span></span>  
  
### <a name="policies-allowed-in-on-error"></a><span data-ttu-id="e8df2-116">Политики, которые можно использовать в разделе on-error</span><span class="sxs-lookup"><span data-stu-id="e8df2-116">Policies allowed in on-error</span></span>  
 <span data-ttu-id="e8df2-117">В разделе `on-error` можно использовать следующие политики.</span><span class="sxs-lookup"><span data-stu-id="e8df2-117">The following policies can be used in the `on-error` policy section.</span></span>  
  
-   [<span data-ttu-id="e8df2-118">choose</span><span class="sxs-lookup"><span data-stu-id="e8df2-118">choose</span></span>](api-management-advanced-policies.md#choose)  
  
-   [<span data-ttu-id="e8df2-119">set-variable</span><span class="sxs-lookup"><span data-stu-id="e8df2-119">set-variable</span></span>](api-management-advanced-policies.md#set-variable)  
  
-   [<span data-ttu-id="e8df2-120">find-and-replace</span><span class="sxs-lookup"><span data-stu-id="e8df2-120">find-and-replace</span></span>](api-management-transformation-policies.md#Findandreplacestringinbody)  
  
-   [<span data-ttu-id="e8df2-121">return-response</span><span class="sxs-lookup"><span data-stu-id="e8df2-121">return-response</span></span>](api-management-advanced-policies.md#ReturnResponse)  
  
-   [<span data-ttu-id="e8df2-122">set-header</span><span class="sxs-lookup"><span data-stu-id="e8df2-122">set-header</span></span>](api-management-transformation-policies.md#SetHTTPheader)  
  
-   [<span data-ttu-id="e8df2-123">set-method</span><span class="sxs-lookup"><span data-stu-id="e8df2-123">set-method</span></span>](api-management-advanced-policies.md#SetRequestMethod)  
  
-   [<span data-ttu-id="e8df2-124">set-status</span><span class="sxs-lookup"><span data-stu-id="e8df2-124">set-status</span></span>](api-management-advanced-policies.md#SetStatus)  
  
-   [<span data-ttu-id="e8df2-125">send-request</span><span class="sxs-lookup"><span data-stu-id="e8df2-125">send-request</span></span>](api-management-advanced-policies.md#SendRequest)  
  
-   [<span data-ttu-id="e8df2-126">send-one-way-request</span><span class="sxs-lookup"><span data-stu-id="e8df2-126">send-one-way-request</span></span>](api-management-advanced-policies.md#SendOneWayRequest)  
  
-   [<span data-ttu-id="e8df2-127">log-to-eventhub</span><span class="sxs-lookup"><span data-stu-id="e8df2-127">log-to-eventhub</span></span>](api-management-advanced-policies.md#log-to-eventhub)  
  
-   [<span data-ttu-id="e8df2-128">json-to-xml</span><span class="sxs-lookup"><span data-stu-id="e8df2-128">json-to-xml</span></span>](api-management-transformation-policies.md#ConvertJSONtoXML)  
  
-   [<span data-ttu-id="e8df2-129">xml-to-json</span><span class="sxs-lookup"><span data-stu-id="e8df2-129">xml-to-json</span></span>](api-management-transformation-policies.md#ConvertXMLtoJSON)  
  
## <a name="lasterror"></a><span data-ttu-id="e8df2-130">LastError</span><span class="sxs-lookup"><span data-stu-id="e8df2-130">LastError</span></span>  
 <span data-ttu-id="e8df2-131">Когда возникает ошибка и управление переходит к разделу политики `on-error`, информация об ошибке сохраняется в свойстве [context.LastError](api-management-policy-expressions.md#ContextVariables), к которому могут обратиться политики, определенные в разделе `on-error`. Оно имеет следующие свойства.</span><span class="sxs-lookup"><span data-stu-id="e8df2-131">When an error occurs and control jumps to the `on-error` policy section, the error is stored in  [context.LastError](api-management-policy-expressions.md#ContextVariables) property which can be accessed by policies in the `on-error` section and has the following properties.</span></span>  
  
|<span data-ttu-id="e8df2-132">Имя</span><span class="sxs-lookup"><span data-stu-id="e8df2-132">Name</span></span>|<span data-ttu-id="e8df2-133">Тип</span><span class="sxs-lookup"><span data-stu-id="e8df2-133">Type</span></span>|<span data-ttu-id="e8df2-134">Описание</span><span class="sxs-lookup"><span data-stu-id="e8df2-134">Description</span></span>|<span data-ttu-id="e8df2-135">Обязательно</span><span class="sxs-lookup"><span data-stu-id="e8df2-135">Required</span></span>|  
|----------|----------|-----------------|--------------|  
|<span data-ttu-id="e8df2-136">Источник</span><span class="sxs-lookup"><span data-stu-id="e8df2-136">Source</span></span>|<span data-ttu-id="e8df2-137">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-137">string</span></span>|<span data-ttu-id="e8df2-138">Указывает имя элемента, в котором произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="e8df2-138">Names the element where the error occurred.</span></span> <span data-ttu-id="e8df2-139">Это может быть имя политики или встроенного шага конвейера.</span><span class="sxs-lookup"><span data-stu-id="e8df2-139">Could be either policy or a  built-in pipeline step name.</span></span>|<span data-ttu-id="e8df2-140">Да</span><span class="sxs-lookup"><span data-stu-id="e8df2-140">Yes</span></span>|  
|<span data-ttu-id="e8df2-141">Причина</span><span class="sxs-lookup"><span data-stu-id="e8df2-141">Reason</span></span>|<span data-ttu-id="e8df2-142">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-142">string</span></span>|<span data-ttu-id="e8df2-143">Код ошибки в машинном формате, который удобно использовать для обработки ошибок.</span><span class="sxs-lookup"><span data-stu-id="e8df2-143">Machine-friendly error code, which could be used in error handling.</span></span>|<span data-ttu-id="e8df2-144">Нет</span><span class="sxs-lookup"><span data-stu-id="e8df2-144">No</span></span>|  
|<span data-ttu-id="e8df2-145">Сообщение</span><span class="sxs-lookup"><span data-stu-id="e8df2-145">Message</span></span>|<span data-ttu-id="e8df2-146">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-146">string</span></span>|<span data-ttu-id="e8df2-147">Описание ошибки в понятном для человека формате.</span><span class="sxs-lookup"><span data-stu-id="e8df2-147">Human-readable error description.</span></span>|<span data-ttu-id="e8df2-148">Да</span><span class="sxs-lookup"><span data-stu-id="e8df2-148">Yes</span></span>|  
|<span data-ttu-id="e8df2-149">Область</span><span class="sxs-lookup"><span data-stu-id="e8df2-149">Scope</span></span>|<span data-ttu-id="e8df2-150">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-150">string</span></span>|<span data-ttu-id="e8df2-151">Имя области, в которой возникла ошибка. Здесь возможны следующие значения: global, product, api или operation.</span><span class="sxs-lookup"><span data-stu-id="e8df2-151">Name of the scope where the error occurred and could be one of "global", "product", "api", or "operation"</span></span>|<span data-ttu-id="e8df2-152">Нет</span><span class="sxs-lookup"><span data-stu-id="e8df2-152">No</span></span>|  
|<span data-ttu-id="e8df2-153">Раздел</span><span class="sxs-lookup"><span data-stu-id="e8df2-153">Section</span></span>|<span data-ttu-id="e8df2-154">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-154">string</span></span>|<span data-ttu-id="e8df2-155">Имя раздела, в котором произошла ошибка. Здесь возможны следующие значения: inbound, backend, outbound или on-error.</span><span class="sxs-lookup"><span data-stu-id="e8df2-155">Section name where error occurred and could one of "inbound", "backend", "outbound", or "on-error".</span></span>|<span data-ttu-id="e8df2-156">Нет</span><span class="sxs-lookup"><span data-stu-id="e8df2-156">No</span></span>|  
|<span data-ttu-id="e8df2-157">Путь</span><span class="sxs-lookup"><span data-stu-id="e8df2-157">Path</span></span>|<span data-ttu-id="e8df2-158">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-158">string</span></span>|<span data-ttu-id="e8df2-159">Задает вложенные политики, например: choose[3]/when[2].</span><span class="sxs-lookup"><span data-stu-id="e8df2-159">Specifies nested policy, e.g. "choose[3]/when[2]".</span></span>|<span data-ttu-id="e8df2-160">Нет</span><span class="sxs-lookup"><span data-stu-id="e8df2-160">No</span></span>|  
|<span data-ttu-id="e8df2-161">PolicyId</span><span class="sxs-lookup"><span data-stu-id="e8df2-161">PolicyId</span></span>|<span data-ttu-id="e8df2-162">строка</span><span class="sxs-lookup"><span data-stu-id="e8df2-162">string</span></span>|<span data-ttu-id="e8df2-163">Значение атрибута `id` для политики, в которой произошла ошибка (если указано клиентом).</span><span class="sxs-lookup"><span data-stu-id="e8df2-163">Value of the `id` attribute, if specified by the customer, on the policy where error occurred</span></span>|<span data-ttu-id="e8df2-164">Нет</span><span class="sxs-lookup"><span data-stu-id="e8df2-164">No</span></span>|  
  
> [!NOTE]
>  <span data-ttu-id="e8df2-165">Все политики имеют дополнительный атрибут `id`, который может быть добавлен к корневому элементу политики.</span><span class="sxs-lookup"><span data-stu-id="e8df2-165">All policies have an optional `id` attribute that can be added to the root element of the policy.</span></span> <span data-ttu-id="e8df2-166">Если этот атрибут присутствует в политике, в которой возникает ошибка, его значение можно извлечь с помощью свойства `context.LastError.PolicyId`.</span><span class="sxs-lookup"><span data-stu-id="e8df2-166">If this attribute is present in a policy when an error condition occurs, the value of the attribute can be retrieved using the `context.LastError.PolicyId` property.</span></span>  
  
## <a name="predefined-errors-for-built-in-steps"></a><span data-ttu-id="e8df2-167">Стандартные ошибки для встроенных шагов</span><span class="sxs-lookup"><span data-stu-id="e8df2-167">Predefined errors for built-in steps</span></span>  
 <span data-ttu-id="e8df2-168">Далее перечислены стандартные ошибки, которые могут возникать во время оценки встроенных шагов обработки.</span><span class="sxs-lookup"><span data-stu-id="e8df2-168">The following errors are predefined for error conditions that can occur during the evaluation of built-in processing steps.</span></span>  
  
|<span data-ttu-id="e8df2-169">Источник</span><span class="sxs-lookup"><span data-stu-id="e8df2-169">Source</span></span>|<span data-ttu-id="e8df2-170">Условие</span><span class="sxs-lookup"><span data-stu-id="e8df2-170">Condition</span></span>|<span data-ttu-id="e8df2-171">Причина</span><span class="sxs-lookup"><span data-stu-id="e8df2-171">Reason</span></span>|<span data-ttu-id="e8df2-172">Сообщение</span><span class="sxs-lookup"><span data-stu-id="e8df2-172">Message</span></span>|  
|------------|---------------|------------|-------------|  
|<span data-ttu-id="e8df2-173">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="e8df2-173">configuration</span></span>|<span data-ttu-id="e8df2-174">URI не соответствует ни одному API или операции</span><span class="sxs-lookup"><span data-stu-id="e8df2-174">Uri doesn't match to any Api or Operation</span></span>|<span data-ttu-id="e8df2-175">OperationNotFound</span><span class="sxs-lookup"><span data-stu-id="e8df2-175">OperationNotFound</span></span>|<span data-ttu-id="e8df2-176">Unable to match incoming request to an operation. (Не удалось сопоставить входящий запрос с операцией.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-176">Unable to match incoming request to an operation.</span></span>|  
|<span data-ttu-id="e8df2-177">authorization</span><span class="sxs-lookup"><span data-stu-id="e8df2-177">authorization</span></span>|<span data-ttu-id="e8df2-178">Не предоставлен ключ подписки</span><span class="sxs-lookup"><span data-stu-id="e8df2-178">Subscription key not supplied</span></span>|<span data-ttu-id="e8df2-179">SubscriptionKeyNotFound</span><span class="sxs-lookup"><span data-stu-id="e8df2-179">SubscriptionKeyNotFound</span></span>|<span data-ttu-id="e8df2-180">Access denied due to missing subscription key.</span><span class="sxs-lookup"><span data-stu-id="e8df2-180">Access denied due to missing subscription key.</span></span> <span data-ttu-id="e8df2-181">Make sure to include subscription key when making requests to this API. (Доступ запрещен из-за отсутствия ключа подписки. Обязательно включайте ключ подписки в запросы к этому API.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-181">Make sure to include subscription key when making requests to this API.</span></span>|  
|<span data-ttu-id="e8df2-182">authorization</span><span class="sxs-lookup"><span data-stu-id="e8df2-182">authorization</span></span>|<span data-ttu-id="e8df2-183">Недопустимое значение ключа подписки</span><span class="sxs-lookup"><span data-stu-id="e8df2-183">Subscription key value is invalid</span></span>|<span data-ttu-id="e8df2-184">SubscriptionKeyInvalid</span><span class="sxs-lookup"><span data-stu-id="e8df2-184">SubscriptionKeyInvalid</span></span>|<span data-ttu-id="e8df2-185">Access denied due to invalid subscription key.</span><span class="sxs-lookup"><span data-stu-id="e8df2-185">Access denied due to invalid subscription key.</span></span> <span data-ttu-id="e8df2-186">Make sure to provide a valid key for an active subscription. (Доступ запрещен из-за недопустимого ключа подписки. Укажите допустимый ключ активной подписки.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-186">Make sure to provide a valid key for an active subscription.</span></span>|  
  
## <a name="predefined-errors-for-policies"></a><span data-ttu-id="e8df2-187">Стандартные ошибки для политик</span><span class="sxs-lookup"><span data-stu-id="e8df2-187">Predefined errors for policies</span></span>  
 <span data-ttu-id="e8df2-188">Далее перечислены стандартные ошибки, которые могут возникнуть во время оценки политик.</span><span class="sxs-lookup"><span data-stu-id="e8df2-188">The following errors are predefined for error conditions that can occur during policy evaluation.</span></span>  
  
|<span data-ttu-id="e8df2-189">Источник</span><span class="sxs-lookup"><span data-stu-id="e8df2-189">Source</span></span>|<span data-ttu-id="e8df2-190">Условие</span><span class="sxs-lookup"><span data-stu-id="e8df2-190">Condition</span></span>|<span data-ttu-id="e8df2-191">Причина</span><span class="sxs-lookup"><span data-stu-id="e8df2-191">Reason</span></span>|<span data-ttu-id="e8df2-192">Сообщение</span><span class="sxs-lookup"><span data-stu-id="e8df2-192">Message</span></span>|  
|------------|---------------|------------|-------------|  
|<span data-ttu-id="e8df2-193">rate-limit</span><span class="sxs-lookup"><span data-stu-id="e8df2-193">rate-limit</span></span>|<span data-ttu-id="e8df2-194">Превышено ограничение скорости</span><span class="sxs-lookup"><span data-stu-id="e8df2-194">Rate limit exceeded</span></span>|<span data-ttu-id="e8df2-195">RateLimitExceeded</span><span class="sxs-lookup"><span data-stu-id="e8df2-195">RateLimitExceeded</span></span>|<span data-ttu-id="e8df2-196">Rate limit is exceeded (Превышено ограничение скорости)</span><span class="sxs-lookup"><span data-stu-id="e8df2-196">Rate limit is exceeded</span></span>|  
|<span data-ttu-id="e8df2-197">quota</span><span class="sxs-lookup"><span data-stu-id="e8df2-197">quota</span></span>|<span data-ttu-id="e8df2-198">Превышена квота</span><span class="sxs-lookup"><span data-stu-id="e8df2-198">Quota exceeded</span></span>|<span data-ttu-id="e8df2-199">QuotaExceeded</span><span class="sxs-lookup"><span data-stu-id="e8df2-199">QuotaExceeded</span></span>|<span data-ttu-id="e8df2-200">превышена квота на количество вызовов.</span><span class="sxs-lookup"><span data-stu-id="e8df2-200">Out of call volume quota.</span></span> <span data-ttu-id="e8df2-201">Quota will be replenished in xx:xx:xx. (Квота будет пополнена в xx:xx:xx.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-201">Quota will be replenished in xx:xx:xx.</span></span> <span data-ttu-id="e8df2-202">-или- Out of bandwidth quota. (Превышена квота пропускной способности.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-202">-or- Out of bandwidth quota.</span></span> <span data-ttu-id="e8df2-203">Quota will be replenished in xx:xx:xx. (Квота будет пополнена в xx:xx:xx.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-203">Quota will be replenished in xx:xx:xx.</span></span>|  
|<span data-ttu-id="e8df2-204">jsonp</span><span class="sxs-lookup"><span data-stu-id="e8df2-204">jsonp</span></span>|<span data-ttu-id="e8df2-205">Недопустимое значение параметра обратного вызова (содержит неправильные символы)</span><span class="sxs-lookup"><span data-stu-id="e8df2-205">Callback parameter value is invalid (contains wrong characters)</span></span>|<span data-ttu-id="e8df2-206">CallbackParameterInvalid</span><span class="sxs-lookup"><span data-stu-id="e8df2-206">CallbackParameterInvalid</span></span>|<span data-ttu-id="e8df2-207">Value of callback parameter {callback-parameter-name} is not a valid JavaScript identifier. (Значение параметра обратного вызова {имя параметра обратного вызова} не является допустимым идентификатором JavaScript.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-207">Value of callback parameter {callback-parameter-name} is not a valid JavaScript identifier.</span></span>|  
|<span data-ttu-id="e8df2-208">ip-filter</span><span class="sxs-lookup"><span data-stu-id="e8df2-208">ip-filter</span></span>|<span data-ttu-id="e8df2-209">Не удалось проанализировать IP-адрес вызывающего объекта из запроса</span><span class="sxs-lookup"><span data-stu-id="e8df2-209">Failed to parse caller IP from request</span></span>|<span data-ttu-id="e8df2-210">FailedToParseCallerIP</span><span class="sxs-lookup"><span data-stu-id="e8df2-210">FailedToParseCallerIP</span></span>|<span data-ttu-id="e8df2-211">Failed to establish IP address for the caller.</span><span class="sxs-lookup"><span data-stu-id="e8df2-211">Failed to establish IP address for the caller.</span></span> <span data-ttu-id="e8df2-212">Access denied. (Не удалось установить IP-адрес вызывающего объекта. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-212">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-213">ip-filter</span><span class="sxs-lookup"><span data-stu-id="e8df2-213">ip-filter</span></span>|<span data-ttu-id="e8df2-214">IP-адрес вызывающего объекта не входит в список разрешенных</span><span class="sxs-lookup"><span data-stu-id="e8df2-214">Caller IP is not in allowed list</span></span>|<span data-ttu-id="e8df2-215">CallerIpNotAllowed</span><span class="sxs-lookup"><span data-stu-id="e8df2-215">CallerIpNotAllowed</span></span>|<span data-ttu-id="e8df2-216">Caller IP address {ip-address} is not allowed.</span><span class="sxs-lookup"><span data-stu-id="e8df2-216">Caller IP address {ip-address} is not allowed.</span></span> <span data-ttu-id="e8df2-217">Access denied. (Недопустимый IP-адрес вызывающего объекта: {IP-адрес}. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-217">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-218">ip-filter</span><span class="sxs-lookup"><span data-stu-id="e8df2-218">ip-filter</span></span>|<span data-ttu-id="e8df2-219">IP-адрес вызывающего объекта включен в список заблокированных</span><span class="sxs-lookup"><span data-stu-id="e8df2-219">Caller IP is in blocked list</span></span>|<span data-ttu-id="e8df2-220">CallerIpBlocked</span><span class="sxs-lookup"><span data-stu-id="e8df2-220">CallerIpBlocked</span></span>|<span data-ttu-id="e8df2-221">Caller IP address is blocked.</span><span class="sxs-lookup"><span data-stu-id="e8df2-221">Caller IP address is blocked.</span></span> <span data-ttu-id="e8df2-222">Access denied. (IP-адрес вызывающего объекта заблокирован. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-222">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-223">check-header</span><span class="sxs-lookup"><span data-stu-id="e8df2-223">check-header</span></span>|<span data-ttu-id="e8df2-224">Отсутствует обязательный заголовок или его значение</span><span class="sxs-lookup"><span data-stu-id="e8df2-224">Required header not presented or value is missing</span></span>|<span data-ttu-id="e8df2-225">HeaderNotFound</span><span class="sxs-lookup"><span data-stu-id="e8df2-225">HeaderNotFound</span></span>|<span data-ttu-id="e8df2-226">Header {header-name} was not found in the request.</span><span class="sxs-lookup"><span data-stu-id="e8df2-226">Header {header-name} was not found in the request.</span></span> <span data-ttu-id="e8df2-227">Access denied. (Заголовок {имя_заголовка} не найден в запросе. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-227">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-228">check-header</span><span class="sxs-lookup"><span data-stu-id="e8df2-228">check-header</span></span>|<span data-ttu-id="e8df2-229">Отсутствует обязательный заголовок или его значение</span><span class="sxs-lookup"><span data-stu-id="e8df2-229">Required header not presented or value is missing</span></span>|<span data-ttu-id="e8df2-230">HeaderValueNotAllowed</span><span class="sxs-lookup"><span data-stu-id="e8df2-230">HeaderValueNotAllowed</span></span>|<span data-ttu-id="e8df2-231">Header {header-name} value of {header-value} is not allowed.</span><span class="sxs-lookup"><span data-stu-id="e8df2-231">Header {header-name} value of {header-value} is not allowed.</span></span> <span data-ttu-id="e8df2-232">Access denied. (Недопустимое значение {значение_заголовка} для заголовка {имя_заголовка}. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-232">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-233">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-233">validate-jwt</span></span>|<span data-ttu-id="e8df2-234">В запросе отсутствует маркер JWT</span><span class="sxs-lookup"><span data-stu-id="e8df2-234">Jwt token is missing in request</span></span>|<span data-ttu-id="e8df2-235">TokenNotFound</span><span class="sxs-lookup"><span data-stu-id="e8df2-235">TokenNotFound</span></span>|<span data-ttu-id="e8df2-236">JWT not found in the request.</span><span class="sxs-lookup"><span data-stu-id="e8df2-236">JWT not found in the request.</span></span> <span data-ttu-id="e8df2-237">Access denied. (В запросе не найден маркер JWT. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-237">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-238">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-238">validate-jwt</span></span>|<span data-ttu-id="e8df2-239">Ошибка при проверке подписи</span><span class="sxs-lookup"><span data-stu-id="e8df2-239">Signature validation failed</span></span>|<span data-ttu-id="e8df2-240">TokenSignatureInvalid</span><span class="sxs-lookup"><span data-stu-id="e8df2-240">TokenSignatureInvalid</span></span>|<span data-ttu-id="e8df2-241"><сообщение из библиотеки jwt\>.</span><span class="sxs-lookup"><span data-stu-id="e8df2-241"><message from jwt library\>.</span></span> <span data-ttu-id="e8df2-242">Access denied. (Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-242">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-243">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-243">validate-jwt</span></span>|<span data-ttu-id="e8df2-244">Недопустимая аудитория</span><span class="sxs-lookup"><span data-stu-id="e8df2-244">Invalid audience</span></span>|<span data-ttu-id="e8df2-245">TokenAudienceNotAllowed</span><span class="sxs-lookup"><span data-stu-id="e8df2-245">TokenAudienceNotAllowed</span></span>|<span data-ttu-id="e8df2-246"><сообщение из библиотеки jwt\>.</span><span class="sxs-lookup"><span data-stu-id="e8df2-246"><message from jwt library\>.</span></span> <span data-ttu-id="e8df2-247">Access denied. (Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-247">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-248">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-248">validate-jwt</span></span>|<span data-ttu-id="e8df2-249">Недопустимый издатель</span><span class="sxs-lookup"><span data-stu-id="e8df2-249">Invalid issuer</span></span>|<span data-ttu-id="e8df2-250">TokenIssuerNotAllowed</span><span class="sxs-lookup"><span data-stu-id="e8df2-250">TokenIssuerNotAllowed</span></span>|<span data-ttu-id="e8df2-251"><сообщение из библиотеки jwt\>.</span><span class="sxs-lookup"><span data-stu-id="e8df2-251"><message from jwt library\>.</span></span> <span data-ttu-id="e8df2-252">Access denied. (Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-252">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-253">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-253">validate-jwt</span></span>|<span data-ttu-id="e8df2-254">Истек срок действия маркера</span><span class="sxs-lookup"><span data-stu-id="e8df2-254">Token expired</span></span>|<span data-ttu-id="e8df2-255">TokenExpired</span><span class="sxs-lookup"><span data-stu-id="e8df2-255">TokenExpired</span></span>|<span data-ttu-id="e8df2-256"><сообщение из библиотеки jwt\>.</span><span class="sxs-lookup"><span data-stu-id="e8df2-256"><message from jwt library\>.</span></span> <span data-ttu-id="e8df2-257">Access denied. (Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-257">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-258">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-258">validate-jwt</span></span>|<span data-ttu-id="e8df2-259">Ключ подписи не удалось разрешить по идентификатору</span><span class="sxs-lookup"><span data-stu-id="e8df2-259">Signature key was not resolved by id</span></span>|<span data-ttu-id="e8df2-260">TokenSignatureKeyNotFound</span><span class="sxs-lookup"><span data-stu-id="e8df2-260">TokenSignatureKeyNotFound</span></span>|<span data-ttu-id="e8df2-261"><сообщение из библиотеки jwt\>.</span><span class="sxs-lookup"><span data-stu-id="e8df2-261"><message from jwt library\>.</span></span> <span data-ttu-id="e8df2-262">Access denied. (Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-262">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-263">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-263">validate-jwt</span></span>|<span data-ttu-id="e8df2-264">В маркере отсутствуют необходимые утверждения</span><span class="sxs-lookup"><span data-stu-id="e8df2-264">Required claims are missing from token</span></span>|<span data-ttu-id="e8df2-265">TokenClaimNotFound</span><span class="sxs-lookup"><span data-stu-id="e8df2-265">TokenClaimNotFound</span></span>|<span data-ttu-id="e8df2-266">JWT token is missing the following claims: <c1\>, <c2\>, …</span><span class="sxs-lookup"><span data-stu-id="e8df2-266">JWT token is missing the following claims: <c1\>, <c2\>, …</span></span> <span data-ttu-id="e8df2-267">Access denied. (В маркере JWT отсутствуют следующие утверждения: <c1>, <c2>, … Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-267">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-268">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-268">validate-jwt</span></span>|<span data-ttu-id="e8df2-269">Несоответствие значений утверждения</span><span class="sxs-lookup"><span data-stu-id="e8df2-269">Claim values mismatch</span></span>|<span data-ttu-id="e8df2-270">TokenClaimValueNotAllowed</span><span class="sxs-lookup"><span data-stu-id="e8df2-270">TokenClaimValueNotAllowed</span></span>|<span data-ttu-id="e8df2-271">Claim {claim-name} value of {claim-value} is not allowed.</span><span class="sxs-lookup"><span data-stu-id="e8df2-271">Claim {claim-name} value of {claim-value} is not allowed.</span></span> <span data-ttu-id="e8df2-272">Access denied. (Недопустимое значение {значение_утверждения} для утверждения {имя_утверждения}. Доступ запрещен.)</span><span class="sxs-lookup"><span data-stu-id="e8df2-272">Access denied.</span></span>|  
|<span data-ttu-id="e8df2-273">validate-jwt</span><span class="sxs-lookup"><span data-stu-id="e8df2-273">validate-jwt</span></span>|<span data-ttu-id="e8df2-274">Прочие сбои при проверке данных</span><span class="sxs-lookup"><span data-stu-id="e8df2-274">Other validation failures</span></span>|<span data-ttu-id="e8df2-275">JwtInvalid</span><span class="sxs-lookup"><span data-stu-id="e8df2-275">JwtInvalid</span></span>|<span data-ttu-id="e8df2-276"><сообщение из библиотеки jwt\></span><span class="sxs-lookup"><span data-stu-id="e8df2-276"><message from jwt library\></span></span>|

## <a name="next-steps"></a><span data-ttu-id="e8df2-277">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="e8df2-277">Next steps</span></span>
<span data-ttu-id="e8df2-278">Дополнительные сведения о работе с политиками см. в статье со справочными материалами по [политикам в службе управления API](api-management-howto-policies.md).</span><span class="sxs-lookup"><span data-stu-id="e8df2-278">For more information working with policies, see [Policies in API Management](api-management-howto-policies.md).</span></span>  