---
title: "Макетирование ответов API с помощью портала Azure | Документация Майкрософт"
description: "В этом руководстве показано, как использовать службу управления API для установки политик в API, чтобы получать от них макетированный ответ. Этот метод позволяет разработчикам продолжить реализацию и тестирование экземпляра управления API, если серверная часть не может отправлять реальные ответы."
services: api-management
documentationcenter: 
author: juliako
manager: cfowler
editor: 
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: na
ms.custom: mvc
ms.topic: tutorial
ms.date: 11/27/2017
ms.author: apimpm
ms.openlocfilehash: e485071b026c52eb23532639546ad475fc92cde3
ms.sourcegitcommit: b854df4fc66c73ba1dd141740a2b348de3e1e028
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2017
---
# <a name="mock-api-responses"></a>Макетирование ответов API

Серверные API можно импортировать в API службы управления API или создать их и управлять ими вручную. В этом руководстве показано, как использовать службу управления API для создания пустого API и управления им вручную. В этом руководстве показано как настроить политику API для возвращения макетированных ответов. Этот метод позволяет разработчикам продолжить реализацию и тестирование экземпляра службы управления API, даже если серверная часть не может отправлять реальные ответы. Возможность макетирования ответов может быть полезна в ряде сценариев:

+ Когда сначала создается интерфейсная часть API, а затем — серверная реализация. Или когда серверная часть разрабатывается параллельно.
+ Когда серверная часть временно не работает или ее невозможно масштабировать.

Из этого руководства вы узнаете, как выполнять такие задачи:

> [!div class="checklist"]
> * создание тестового API; 
> * добавление операции в тестовый API;
> * включение макетирования ответа;
> * тестирование макетирования API.

![Ответ макетированной операции](./media/mock-api-responses/mock-api-responses01.png)

## <a name="prerequisites"></a>Предварительные требования

Выполните задачи из краткого руководства по [созданию экземпляра службы управления API Azure](get-started-create-service-instance.md).

[!INCLUDE [api-management-navigate-to-instance.md](../../includes/api-management-navigate-to-instance.md)]

## <a name="create-a-test-api"></a>Создание тестового API 

В этом разделе показано, как создать пустой API без серверной части. Кроме того, здесь показано, как добавить операции в API. Вызов операции после завершения действий в этом разделе вызовет ошибку. Если завершить все действия из раздела "Включение макетирования ответа" ошибки не возникнут.

1. Выберите **Интерфейсы API** в разделе **Управление API**.
2. Выберите **+ Add API** (+ Добавить API) в меню слева.
3. Выберите **Пустой API** в списке.
4. Введите "*Тестовый API*" в качестве **отображаемого имени**.
5. Введите "*Без ограничений*" в поле **Продукты**.
6. Нажмите кнопку **Создать**.

## <a name="add-an-operation-to-the-test-api"></a>Добавление операции в тестовый API

1. Выберите API, созданный на предыдущем шаге.
2. Щелкните **+ Add Operation** (+ Добавить операцию).

    ![Ответ макетированной операции](./media/mock-api-responses/mock-api-responses02.png)

    |Настройка|Значение|Описание|
    |---|---|---|
    |**URL-адрес** (HTTP-команда)|ПОЛУЧЕНИЕ|Можно выбрать одну из предопределенных HTTP-команд.|
    |**URL-адрес** |*/test*|URL-путь для API. |
    |**Отображаемое имя**|*Test call* (Пробный вызов)|Имя, отображаемое на **портале разработчика**.|
    |**Описание**||Введите описание операции, с помощью которой документация предоставляется разработчикам, которые используют текущее API на **портале разработчика**.|
    |Вкладка **Запрос**||Здесь вы можете добавить параметры запроса. Помимо имени и описания можно указать значения, привязанные к данному параметру. Одно из значений может быть отмечено как значение по умолчанию (необязательно).|
    |Вкладка **Запрос**||Вы можете задать типы содержимого, примеры и схемы запросов. |
    |Вкладка **Ответ**|Ознакомтесь с шагами, приведенными после этой таблицы.|Задайте коды состояния, типы содержимого, примеры и схемы ответов.|

3. Выберите вкладку **Ответ**, которая находится под полями "URL-адрес", "Отображаемое имя" и "Описание".
4. Щелкните **+ Add response** (+ Добавить ответ).
5. Из списка выберите **200 OK**.
6. Справа от раздела **Представления** выберите **+ Add representation** (+ Добавить представление).
7. В поле поиска введите "*application/json*" и выберите тип контента **application/json**.
8. В текстовом поле **Образец** введите "*{ 'sampleField' : 'test' }*".
9. Щелкните **Сохранить**.

## <a name="enable-response-mocking"></a>Включение макетирования ответа

1. Выберите API, созданный на этапе "Создание тестового API".
2. Выберите добавленную тестовую операцию.
2. Щелкните вкладку **Design** (Проектирование) в окне справа.
3. Щелкните значок карандаша в окне **Обработка входящих запросов**.
4. На вкладке **Макетирование** выберите **Статические ответы** в качестве значения параметра **Поведение макетирования**.
5. В текстовом поле **API Management returns the following response:** (Служба управления API возвращает следующий ответ:) введите **200 OK, application/json**. Этот параметр указывает, что API должен возвращать пример ответа, определенный в предыдущем разделе.
6. Щелкните **Сохранить**.

## <a name="test-the-mocked-api"></a>Тестирование макетирования API

1. Выберите API, созданный на этапе "Создание тестового API".
2. Откройте вкладку **Тест**.
3. Убедитесь, что выбран API **пробного вызова**.

    > [!TIP]
    > Желтая панель с текстом **Макетирование включено** указывает, что ответы, возвращаемые из управления API, отправляют политику макетирования, а не фактические серверные ответы.

3. Чтобы сделать пробный вызов, выберите **Отправка**.
4. В качестве образца в первом разделе руководства отображается **HTTP-ответ** JSON.

## <a name="video"></a>Видео

> [!VIDEO https://www.youtube.com/embed/i9PjUAvw7DQ]
> 
> 

## <a name="next-steps"></a>Дальнейшие действия
Из этого руководства вы узнали, как выполнять такие задачи:

> [!div class="checklist"]
> * создание тестового API;
> * добавление операции в тестовый API;
> * включение макетирования ответа;
> * тестирование макетирования API.

Перейдите к следующему руководству:

> [!div class="nextstepaction"]
> [Преобразование и защита опубликованного API](transform-api.md)
