---
title: "aaaConfiguring проекта Azure с использованием нескольких конфигураций службы | Документы Microsoft"
description: "Дополнительные сведения об tooconfigure Azure облачных проект службы, изменив hello файлы ServiceDefinition.csdef и ServiceConfiguration.cscfg."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: a4fb79ed-384f-4183-9f74-5cac257206b9
ms.service: multiple
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: 14222266093eb876db0ac9ce8d3d17a04c65d1a8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-your-azure-project-using-multiple-service-configurations"></a>Настройка проекта Azure с помощью нескольких конфигураций службы
Проект облачной службы Azure включает два файла конфигурации: ServiceDefinition.csdef и ServiceConfiguration.cscfg. Эти файлы упаковываются вместе с приложением Azure облачной службы и развертывания tooAzure.

* Hello **ServiceDefinition.csdef** файл содержит метаданные hello, которые требуются для hello Azure среде hello требования приложения облачной службы, включая какие роли, которые он содержит. Этот файл также содержит параметры конфигурации, которые применяются tooall экземпляров. Эти параметры конфигурации могут считываться во время выполнения с помощью hello API среды выполнения размещения службы Azure. Этот файл нельзя обновить, пока служба работает в Azure.
* Hello **ServiceConfiguration.cscfg** файл задает значения для параметров конфигурации hello, определенные в файле определения службы hello и указывает количество hello toorun экземпляров для каждой роли. Этот файл нельзя обновить, пока облачная служба работает в Azure.

Hello Azure Tools для Microsoft Visual Studio предоставляют страницы свойств, которые можно использовать параметры конфигурации tooset, хранимые в этих файлах. tooaccess hello страницы свойств, или дважды щелкните hello роли ссылку, расположенную под hello проекта облачной службы Azure в обозревателе решений щелкните правой кнопкой мыши ссылку hello роли и выберите **свойства**, как показано в hello следующий рисунок.

![VS_Solution_Explorer_Roles_Properties](./media/vs-azure-tools-multiple-services-project-configurations/IC784076.png)

Сведения о hello базовой схемы для hello определение службы и файлы конфигурации службы см. в разделе hello [Справочник по схеме](https://msdn.microsoft.com/library/azure/dd179398.aspx). Дополнительные сведения о конфигурации службы см. в разделе [как tooConfigure облачных служб](cloud-services/cloud-services-how-to-configure.md).

## <a name="configuring-role-properties"></a>Настройка свойств роли
страницы свойств Hello веб-роли и рабочей роли аналогичны, несмотря на то, что существует несколько отличий, описанных в следующих разделах hello.

Из hello **кэширование** страницы, можно настроить службы кэширования Azure hello.

### <a name="configuration-page"></a>Страница «Конфигурация»
На hello **конфигурации** страницы, можно задать следующие свойства:

**Экземпляры**

Набор hello **экземпляр** свойство toohello сколько экземпляров hello службы должны запускаться для этой роли.

Набор hello **размер виртуальной Машины** свойство слишком**чрезвычайно малая**, **небольшой**, **Средний**, **большой**, или **Долгосрочного**.  Дополнительные сведения см. в статье [Размеры для облачных служб](cloud-services/cloud-services-sizes-specs.md).

**Действие при запуске** (только веб-роли)

Задайте этот toospecify свойство, при запуске отладки, Visual Studio необходимо запустить веб-браузер для конечных точек hello HTTP или конечные точки HTTPS hello или оба.

параметр конечной точки HTTPS Hello доступен только в том случае, если конечная точка HTTPS уже определены для роли. Можно определить конечную точку HTTPS hello **конечные точки** страницу свойств.

Если конечная точка HTTPS уже добавлена, hello параметр конечной точки HTTPS включена по умолчанию, и Visual Studio запустит браузер для этой конечной точки, при запуске отладки, кроме tooa браузер для конечной точки HTTP. При этом предполагается, что включены оба параметра запуска.

**Диагностика**

По умолчанию Диагностика включается для hello веб-роли. Hello проекта облачной службы Azure и учетной записи хранилища задаются toouse hello локального эмулятора хранилища. Когда вы будете готовы toodeploy tooAzure, можно выбрать кнопку построителя hello (**...** ) tooupdate hello хранилища учетной записи toouse хранилища Azure в облаке hello. Учетная запись хранения toohello hello диагностики данных можно перенести по требованию или по расписанию автоматически. Дополнительные сведения о системе диагностики Azure см. в статье [Включение диагностики в облачных службах и виртуальных машинах Azure](cloud-services/cloud-services-dotnet-diagnostics.md).

## <a name="settings-page"></a>Страница «Параметры»
На hello **параметры** страницы, можно добавить параметры конфигурации для службы. Параметры конфигурации — это пары «имя —значение». Код, выполняемый в hello роли можно считать hello значения параметров конфигурации во время выполнения с помощью классов, предоставляемых hello [управляемая библиотека Azure](http://go.microsoft.com/fwlink?LinkID=171026). В частности, hello [GetConfigurationSettingValue](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.getconfigurationsettingvalue.aspx) метод возвращает значение именованного параметра конфигурации во время выполнения hello.

### <a name="configuring-a-connection-string-tooa-storage-account"></a>Настройка строки подключения tooa учетной записи хранилища
Строка подключения — параметр конфигурации, который предоставляет сведения о соединении и проверки подлинности для эмулятора хранилища hello или учетной записью хранения Azure. Каждый раз, когда ваш код должен обращаться к данным служб хранилища Azure — т. е BLOB-объект, очередь или таблица данных — из кода, выполняемого в роли, вы получите toodefine строку подключения для этой учетной записи хранения.

Строку соединения, которая указывает tooan учетной записи хранилища Azure необходимо использовать определенный формат. Сведения о том, как toocreate строки подключения, в разделе [Настройка строки подключения хранилища Azure](storage/common/storage-configure-connection-string.md).

Если вы готовы tootest службы со службами хранилища Azure hello, или находясь готов toodeploy вашей облачной службы tooAzure, можно изменить значение hello любой tooyour toopoint строки подключения учетной записи хранилища Azure. Нажмите кнопку (**…**), затем выберите **Ввод учетных данных хранилища**. Введите данные учетной записи, в том числе имя и ключ учетной записи. В hello **строка подключения учетной записи хранилища** диалоговое окно, можно также указать, следует ли toouse конечные точки HTTPS по умолчанию hello (параметр по умолчанию hello), конечные точки HTTP по умолчанию hello или пользовательские конечные точки. Вы можете toouse пользовательские конечные точки, если вы зарегистрировали доменное имя для службы, как описано в [настроить пользовательское доменное имя для данных blob в учетной записи хранилища Azure](storage/blobs/storage-custom-domain-name.md).

> [!IMPORTANT]
> Перед развертыванием службы необходимо изменить ваш tooan toopoint строки подключения учетной записи хранилища Azure. Сбой toodo это может привести к вашей роли не toostart или toocycle через hello состояния инициализации, занятости и остановки.
> 
> 

## <a name="endpoints-page"></a>Страница «Конечные точки»
Рабочая роль может иметь любое количество конечных точек HTTP, HTTPS или TCP. Конечные точки могут быть входных конечных точек, которые являются доступными tooexternal клиентов, или внутренних конечных точек, которые представляют собой доступные tooother роли, которые выполняются в службе hello.

* Клиенты доступных tooexternal toomake HTTP конечной точки веб-браузерами, измените тип tooinput hello конечной точки и укажите имя и номер общего порта.
* toomake HTTPS конечную точку доступной tooexternal клиентов и веб-браузерами, измените тип конечной точки hello слишком**ввода**и укажите имя, номер общего порта и имя сертификата управления.
  
    Обратите внимание, что прежде чем указывать сертификат управления, необходимо определить сертификат hello на hello **сертификаты** страницу свойств.
* toomake конечную точку доступной для внутреннего доступа других ролей в облачной службе hello, измените тип toointernal hello конечной точки и укажите имя и возможные частные порты для этой конечной точки.

## <a name="local-storage-page"></a>Страница «Локальное хранилище»
Можно использовать hello **локального хранилища** tooreserve страницы свойств, один или несколько ресурсов локального хранилища для роли. Ресурс локального хранилища представляет собой зарезервированный каталог в файловой системе hello hello виртуальной машины Azure, в котором выполняется экземпляр роли.

## <a name="certificates-page"></a>Страница «Сертификаты»
На hello **сертификаты** страницы, можно связать сертификаты с вашей роли. Hello сертификаты можно использовать tooconfigure конечных точек HTTPS на hello **конечные точки** страницу свойств.

Hello **сертификаты** страницу свойств добавляет сведения о конфигурации службы tooyour сертификаты. Обратите внимание, сертификаты не упакованы с вашей службой; необходимо отдельно загрузить сертификаты tooAzure через hello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkID=213885).

tooassociate сертификат с ролью, введите имя для сертификата hello. При настройке конечной точки HTTPS на hello, использовать этот сертификат имя toorefer toohello **конечные точки** страницу свойств. Затем укажите, является ли хранилище сертификатов hello **локального компьютера** или **текущего пользователя** и hello имя хранилища hello. Наконец следует ввести отпечаток сертификата hello. Если сертификат hello hello текущей User\Personal хранилища (My), можно ввести отпечаток сертификата hello, выбрав hello сертификат из заполненного списка. Если она расположена в другом месте, введите значение отпечатка hello вручную.

При добавлении сертификата из хранилища сертификатов hello любые промежуточные сертификаты, автоматически добавляются параметры конфигурации toohello. Эти промежуточные сертификаты также должны быть переданы tooAzure в порядке toocorrectly настроить службу для использования SSL.

Все сертификаты управления, которые связаны с вашей службой применяются tooyour службы только в том случае, если он выполняется в облаке hello. Если служба запущена в hello локальной среде разработки, используется стандартный сертификат, который находится под управлением hello эмулятор вычислений.

## <a name="configuring-hello-azure-cloud-service-project"></a>Настройка hello проекта облачной службы Azure
tooconfigure параметры, которые применяются tooan весь проект облачной службы Azure, сначала откройте контекстное меню узла проекта hello, и нажмите кнопку Свойства tooopen страницы его свойств. Привет, в следующей таблице показаны эти страницы свойств.

| Страница свойств | Описание |
| --- | --- |
| Приложение |На этой странице можно отобразить сведения о версии инструментов Azure, которая использует этот проект облачной службы hello и обновлении toohello текущей версии средств hello. |
| События построения |На этой странице можно задать события перед сборкой и после сборки. |
| Разработка |На этой странице можно указать инструкции конфигурации построения и hello условия, при которых будут выполняться любые события после построения. |
| Web |На этой странице можно настроить параметры, связанные с toohello веб-сервера. |

