---
title: "Решение \"Емкость и производительность\" в Azure Log Analytics | Документация Майкрософт"
description: "Используйте решение \"Емкость и производительность\" в службе Log Analytics, чтобы оценивать ресурсы серверов Hyper-V Server."
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: 51617a6f-ffdd-4ed2-8b74-1257149ce3d4
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: banders
ms.openlocfilehash: 5ca005127721092b8efcf0ac83cc967ab15fe72d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="plan-hyper-v-virtual-machine-capacity-with-the-capacity-and-performance-solution-preview"></a><span data-ttu-id="07931-103">Планирование ресурсов виртуальной машины Hyper-V с помощью решения "Емкость и производительность" (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="07931-103">Plan Hyper-V virtual machine capacity with the Capacity and Performance solution (Preview)</span></span>

![Символ "Емкость и производительность"](./media/log-analytics-capacity/capacity-solution.png)

<span data-ttu-id="07931-105">Решение "Емкость и производительность" в службе Log Analytics позволяет оценивать ресурсы серверов Hyper-V Server.</span><span class="sxs-lookup"><span data-stu-id="07931-105">You can use the Capacity and Performance solution in Log Analytics to help you understand the capacity of your Hyper-V servers.</span></span> <span data-ttu-id="07931-106">Это решение предоставляет подробные сведения о среде Hyper-V, отображая данные о совокупном использовании (ресурсов ЦП, памяти и дисков) узлов и виртуальных машин, запущенных на этих узлах Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="07931-106">The solution provides insights into your Hyper-V environment by showing you the overall utilization (CPU, memory, and disk) of the hosts and the VMs running on those Hyper-V hosts.</span></span> <span data-ttu-id="07931-107">Кроме того, оно собирает метрики ЦП, памяти и дисков на всех узлах и их виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="07931-107">Metrics are collected for CPU, memory, and disks across all your hosts and the VMs running on them.</span></span>

<span data-ttu-id="07931-108">Это решение:</span><span class="sxs-lookup"><span data-stu-id="07931-108">The solution:</span></span>

-   <span data-ttu-id="07931-109">показывает узлы с максимальным и минимальным использованием памяти и ресурсов ЦП;</span><span class="sxs-lookup"><span data-stu-id="07931-109">Shows hosts with highest and lowest CPU and memory utilization</span></span>
-   <span data-ttu-id="07931-110">показывает виртуальные машины с максимальным и минимальным использованием памяти и ресурсов ЦП;</span><span class="sxs-lookup"><span data-stu-id="07931-110">Shows VMs with highest and lowest CPU and memory utilization</span></span>
-   <span data-ttu-id="07931-111">показывает виртуальные машины с максимальным и минимальным использованием пропускной способности и числом операций ввода-вывода в секунду;</span><span class="sxs-lookup"><span data-stu-id="07931-111">Shows VMs with highest and lowest IOPS and throughput utilization</span></span>
-   <span data-ttu-id="07931-112">показывает, какие виртуальные машины запущены на конкретных узлах;</span><span class="sxs-lookup"><span data-stu-id="07931-112">Shows which VMs are running on which hosts</span></span>
-   <span data-ttu-id="07931-113">показывает диски с самой высокой пропускной способностью, числом операций ввода-вывода в секунду и задержкой в общих томах кластера;</span><span class="sxs-lookup"><span data-stu-id="07931-113">Shows the top disks with high throughput, IOPS, and latency in cluster shared volumes</span></span>
- <span data-ttu-id="07931-114">позволяет выполнять настройку и фильтрацию на основе групп.</span><span class="sxs-lookup"><span data-stu-id="07931-114">Allows you to customize and filter based on groups</span></span>

> [!NOTE]
> <span data-ttu-id="07931-115">Предыдущая версия решения "Емкость и производительность" называлась "Управление ресурсами". Для работы этого решения требовались System Center Operations Manager и System Center Virtual Machine Manager.</span><span class="sxs-lookup"><span data-stu-id="07931-115">The previous version of the Capacity and Performance solution called Capacity Management required both System Center Operations Manager and System Center Virtual Machine Manager.</span></span> <span data-ttu-id="07931-116">В обновленном решении эти зависимости не применяются.</span><span class="sxs-lookup"><span data-stu-id="07931-116">This updated solution doesn't have those dependencies.</span></span>


## <a name="connected-sources"></a><span data-ttu-id="07931-117">Подключенные источники</span><span class="sxs-lookup"><span data-stu-id="07931-117">Connected sources</span></span>

<span data-ttu-id="07931-118">В следующей таблице описаны подключенные источники, которые поддерживаются этим решением.</span><span class="sxs-lookup"><span data-stu-id="07931-118">The following table describes the connected sources that are supported by this solution.</span></span>

| <span data-ttu-id="07931-119">Подключенный источник</span><span class="sxs-lookup"><span data-stu-id="07931-119">Connected Source</span></span> | <span data-ttu-id="07931-120">Поддержка</span><span class="sxs-lookup"><span data-stu-id="07931-120">Support</span></span> | <span data-ttu-id="07931-121">Описание</span><span class="sxs-lookup"><span data-stu-id="07931-121">Description</span></span> |
|---|---|---|
| [<span data-ttu-id="07931-122">Агенты Windows</span><span class="sxs-lookup"><span data-stu-id="07931-122">Windows agents</span></span>](log-analytics-windows-agents.md) | <span data-ttu-id="07931-123">Да</span><span class="sxs-lookup"><span data-stu-id="07931-123">Yes</span></span> | <span data-ttu-id="07931-124">Решение собирает сведения о емкости и производительности из агентов Windows.</span><span class="sxs-lookup"><span data-stu-id="07931-124">The solution collects capacity and performance data information from Windows agents.</span></span> |
| [<span data-ttu-id="07931-125">Агенты Linux</span><span class="sxs-lookup"><span data-stu-id="07931-125">Linux agents</span></span>](log-analytics-linux-agents.md) | <span data-ttu-id="07931-126">Нет</span><span class="sxs-lookup"><span data-stu-id="07931-126">No</span></span>    | <span data-ttu-id="07931-127">Решение не собирает сведения о емкости и производительности из прямых агентов Linux.</span><span class="sxs-lookup"><span data-stu-id="07931-127">The solution does not collect capacity and performance data information from direct Linux agents.</span></span>|
| [<span data-ttu-id="07931-128">Группы управления SCOM</span><span class="sxs-lookup"><span data-stu-id="07931-128">SCOM management group</span></span>](log-analytics-om-agents.md) | <span data-ttu-id="07931-129">Да</span><span class="sxs-lookup"><span data-stu-id="07931-129">Yes</span></span> |<span data-ttu-id="07931-130">Решение собирает сведения о емкости и производительности из агентов в подключенной группе управления SCOM.</span><span class="sxs-lookup"><span data-stu-id="07931-130">The solution collects capacity and performance data from agents in a connected SCOM management group.</span></span> <span data-ttu-id="07931-131">Прямое подключение агента SCOM к OMS не требуется.</span><span class="sxs-lookup"><span data-stu-id="07931-131">A direct connection from the SCOM agent to OMS is not required.</span></span> <span data-ttu-id="07931-132">Данные пересылаются из группы управления в репозиторий OMS.</span><span class="sxs-lookup"><span data-stu-id="07931-132">Data is forwarded from the management group to the OMS repository.</span></span>|
| [<span data-ttu-id="07931-133">Учетная запись хранения Azure</span><span class="sxs-lookup"><span data-stu-id="07931-133">Azure storage account</span></span>](log-analytics-azure-storage.md) | <span data-ttu-id="07931-134">Нет</span><span class="sxs-lookup"><span data-stu-id="07931-134">No</span></span> | <span data-ttu-id="07931-135">Служба хранилища Azure не содержит сведения о емкости и производительности.</span><span class="sxs-lookup"><span data-stu-id="07931-135">Azure storage does not include capacity and performance data.</span></span>|

## <a name="prerequisites"></a><span data-ttu-id="07931-136">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="07931-136">Prerequisites</span></span>

- <span data-ttu-id="07931-137">Агенты Windows или Operations Manager должны быть установлены на узлах Hyper-V под управлением Windows Server 2012 (или более поздней версии), а не на виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="07931-137">Windows or Operations Manager agents must be installed on Windows Server 2012 or higher Hyper-V hosts, not virtual machines.</span></span>


## <a name="configuration"></a><span data-ttu-id="07931-138">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="07931-138">Configuration</span></span>

<span data-ttu-id="07931-139">Чтобы добавить решение "Емкость и производительность" в рабочую область, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="07931-139">Perform the following step to add the Capacity and Performance solution to your workspace.</span></span>

- <span data-ttu-id="07931-140">Добавьте решение "Емкость и производительность" в рабочую область OMS, используя указания в статье [Добавление решений для управления Azure Log Analytics в рабочую область](log-analytics-add-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="07931-140">Add the Capacity and Performance solution to your OMS workspace using the process described in [Add Log Analytics solutions from the Solutions Gallery](log-analytics-add-solutions.md).</span></span>

## <a name="management-packs"></a><span data-ttu-id="07931-141">Пакеты управления</span><span class="sxs-lookup"><span data-stu-id="07931-141">Management packs</span></span>

<span data-ttu-id="07931-142">Если группа управления SCOM подключена к рабочей области OMS, при добавлении этого решения в SCOM будут установлены следующие пакеты.</span><span class="sxs-lookup"><span data-stu-id="07931-142">If your SCOM management group is connected to your OMS workspace, then the following management packs will be installed in SCOM when you add this solution.</span></span> <span data-ttu-id="07931-143">Никакая настройка или обслуживание для этих пакетов управления не требуются.</span><span class="sxs-lookup"><span data-stu-id="07931-143">There is no configuration or maintenance of these management packs required.</span></span>

- <span data-ttu-id="07931-144">Microsoft.IntelligencePacks.CapacityPerformance</span><span class="sxs-lookup"><span data-stu-id="07931-144">Microsoft.IntelligencePacks.CapacityPerformance</span></span>

<span data-ttu-id="07931-145">Событие 1201 выглядит так:</span><span class="sxs-lookup"><span data-stu-id="07931-145">The 1201 event resembles:</span></span>


```
New Management Pack with id:"Microsoft.IntelligencePacks.CapacityPerformance", version:"1.10.3190.0" received.
```

<span data-ttu-id="07931-146">При обновлении решения "Емкость и производительность" номер версии изменится.</span><span class="sxs-lookup"><span data-stu-id="07931-146">When the Capacity and Performance solution is updated, the version number will change.</span></span>

<span data-ttu-id="07931-147">Дополнительные сведения об обновлении пакетов управления для решений см. в статье [Подключение Operations Manager к Log Analytics](log-analytics-om-agents.md).</span><span class="sxs-lookup"><span data-stu-id="07931-147">For more information on how solution management packs are updated, see [Connect Operations Manager to Log Analytics](log-analytics-om-agents.md).</span></span>

## <a name="using-the-solution"></a><span data-ttu-id="07931-148">Использование решения</span><span class="sxs-lookup"><span data-stu-id="07931-148">Using the solution</span></span>

<span data-ttu-id="07931-149">После добавления решения "Емкость и производительность" в рабочую область оно отображается на панели мониторинга "Обзор".</span><span class="sxs-lookup"><span data-stu-id="07931-149">When you add the Capacity and Performance solution to your workspace, the Capacity and Performance is added to the Overview dashboard.</span></span> <span data-ttu-id="07931-150">На этой плитке отображается количество активных узлов Hyper-V и виртуальных машин, которые отслеживались в течение указанного периода времени.</span><span class="sxs-lookup"><span data-stu-id="07931-150">This tile displays a count of the number of currently active Hyper-V hosts  and the number of active virtual machines that were monitored for the time period selected.</span></span>

![Плитка "Емкость и производительность"](./media/log-analytics-capacity/capacity-tile.png)


### <a name="review-utilization"></a><span data-ttu-id="07931-152">Просмотр сведений об использовании</span><span class="sxs-lookup"><span data-stu-id="07931-152">Review utilization</span></span>

<span data-ttu-id="07931-153">Щелкните плитку "Емкость и производительность", чтобы открыть соответствующую панель мониторинга.</span><span class="sxs-lookup"><span data-stu-id="07931-153">Click on the Capacity and Performance tile to open the Capacity and Performance dashboard.</span></span> <span data-ttu-id="07931-154">Панель мониторинга содержит столбцы, перечисленные в приведенной ниже таблице.</span><span class="sxs-lookup"><span data-stu-id="07931-154">The dashboard includes the columns in the following table.</span></span> <span data-ttu-id="07931-155">В каждом столбце содержится максимум десять элементов, соответствующих таким указанным критериям, как область действия и диапазон времени.</span><span class="sxs-lookup"><span data-stu-id="07931-155">Each column lists up to ten items matching that column's criteria for the specified scope and time range.</span></span> <span data-ttu-id="07931-156">Можно выполнить поиск по журналам, в результате которого возвращаются все записи, если щелкнуть заголовок этого столбца или **Показать все** внизу столбца.</span><span class="sxs-lookup"><span data-stu-id="07931-156">You can run a log search that returns all records by clicking **See all** at the bottom of the column or by clicking the column header.</span></span>

- <span data-ttu-id="07931-157">**Узлы**</span><span class="sxs-lookup"><span data-stu-id="07931-157">**Hosts**</span></span>
    - <span data-ttu-id="07931-158">**Загрузка ЦП узла**. Показывает в виде графика сведения об использовании ресурсов ЦП главных компьютеров в течение указанного периода времени, а также содержит список узлов.</span><span class="sxs-lookup"><span data-stu-id="07931-158">**Host CPU Utilization** Shows a graphical trend of the CPU utilization of host computers and a list of hosts, based on the selected time period.</span></span> <span data-ttu-id="07931-159">Чтобы просмотреть сведения на определенный момент времени, наведите указатель мыши на график.</span><span class="sxs-lookup"><span data-stu-id="07931-159">Hover over the line chart to view details for a specific point in time.</span></span> <span data-ttu-id="07931-160">Щелкните график, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-160">Click the chart to view more details in log search.</span></span> <span data-ttu-id="07931-161">Чтобы открыть поиск по журналам и просмотреть показатели счетчика ЦП для размещенных виртуальных машин, щелкните любое имя узла.</span><span class="sxs-lookup"><span data-stu-id="07931-161">Click any host name to open log search and view CPU counter details for hosted VMs.</span></span>
    - <span data-ttu-id="07931-162">**Использование памяти узла**. Показывает в виде графика сведения об использовании памяти главных компьютеров в течение указанного периода времени, а также содержит список узлов.</span><span class="sxs-lookup"><span data-stu-id="07931-162">**Host Memory Utilization** Shows a graphical trend of the memory utilization of host computers and a list of hosts, based on the selected time period.</span></span> <span data-ttu-id="07931-163">Чтобы просмотреть сведения на определенный момент времени, наведите указатель мыши на график.</span><span class="sxs-lookup"><span data-stu-id="07931-163">Hover over the line chart to view details for a specific point in time.</span></span> <span data-ttu-id="07931-164">Щелкните график, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-164">Click the chart to view more details in log search.</span></span> <span data-ttu-id="07931-165">Чтобы открыть поиск по журналам и просмотреть показатели счетчика памяти для размещенных виртуальных машин, щелкните любое имя узла.</span><span class="sxs-lookup"><span data-stu-id="07931-165">Click any host name to open log search and view memory counter details for hosted VMs.</span></span>
- <span data-ttu-id="07931-166">**Виртуальные машины**</span><span class="sxs-lookup"><span data-stu-id="07931-166">**Virtual Machines**</span></span>
    - <span data-ttu-id="07931-167">**Загрузка ЦП ВМ**. Показывает в виде графика сведения об использовании ресурсов ЦП виртуальных машин в течение указанного периода времени, а также содержит список виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="07931-167">**VM CPU Utilization** Shows a graphical trend of the CPU utilization of virtual machines and a list of virtual machines, based on the selected time period.</span></span> <span data-ttu-id="07931-168">Чтобы просмотреть сведения для 3 первых виртуальных машин на определенный момент времени, наведите указатель мыши на график.</span><span class="sxs-lookup"><span data-stu-id="07931-168">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="07931-169">Щелкните график, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-169">Click the chart to view more details in log search.</span></span> <span data-ttu-id="07931-170">Чтобы открыть поиск по журналам и просмотреть объединенные показатели счетчика ЦП для виртуальной машины, щелкните любое имя виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="07931-170">Click any VM name to open log search and view aggregated CPU counter details for the VM.</span></span>
    - <span data-ttu-id="07931-171">**Использование памяти виртуальной машиной.** Показывает в виде графика сведения об использовании ресурсов памяти виртуальных машин в течение указанного периода времени, а также содержит список виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="07931-171">**VM Memory Utilization** Shows a graphical trend of the memory utilization of virtual machines and a list of virtual machines, based on the selected time period.</span></span> <span data-ttu-id="07931-172">Чтобы просмотреть сведения для 3 первых виртуальных машин на определенный момент времени, наведите указатель мыши на график.</span><span class="sxs-lookup"><span data-stu-id="07931-172">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="07931-173">Щелкните график, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-173">Click the chart to view more details in log search.</span></span> <span data-ttu-id="07931-174">Чтобы открыть поиск по журналам и просмотреть объединенные показатели счетчика памяти для виртуальной машины, щелкните любое имя виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="07931-174">Click any VM name to open log search and view aggregated memory counter details for the VM.</span></span>
    - <span data-ttu-id="07931-175">**Общее число дисковых операций ввода-вывода в секунду на ВМ**. Показывает в виде графика сведения об общем числе дисковых операций ввода-вывода в секунду виртуальных машин в течение указанного периода времени, а также содержит список виртуальных машин с операциями ввода-вывода в секунду каждой из них.</span><span class="sxs-lookup"><span data-stu-id="07931-175">**VM Total Disk IOPS** Shows a graphical trend of the total disk IOPS for virtual machines and a list of virtual machines with the IOPS for each, based on the selected time period.</span></span> <span data-ttu-id="07931-176">Чтобы просмотреть сведения для 3 первых виртуальных машин на определенный момент времени, наведите указатель мыши на график.</span><span class="sxs-lookup"><span data-stu-id="07931-176">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="07931-177">Щелкните график, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-177">Click the chart to view more details in log search.</span></span> <span data-ttu-id="07931-178">Чтобы открыть поиск по журналам и просмотреть объединенные показатели счетчика дисковых операций ввода-вывода в секунду для виртуальной машины, щелкните любое имя виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="07931-178">Click any VM name to open log search and view aggregated disk IOPS counter details for the VM.</span></span>
    - <span data-ttu-id="07931-179">**Общая пропускная способность дисков виртуальной машины**. Показывает в виде графика сведения об общей пропускной способности дисков виртуальных машин в течение указанного периода времени, а также содержит список виртуальных машин с общей пропускной способностью дисков каждой из них.</span><span class="sxs-lookup"><span data-stu-id="07931-179">**VM Total Disk Throughput** Shows a graphical trend of the total disk throughput for virtual machines and a list of virtual machines with the total disk throughput for each, based on the selected time period.</span></span> <span data-ttu-id="07931-180">Чтобы просмотреть сведения для 3 первых виртуальных машин на определенный момент времени, наведите указатель мыши на график.</span><span class="sxs-lookup"><span data-stu-id="07931-180">Hover over the line chart to view details for a specific point in time for the top 3 VMs.</span></span> <span data-ttu-id="07931-181">Щелкните график, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-181">Click the chart to view more details in log search.</span></span> <span data-ttu-id="07931-182">Чтобы открыть поиск по журналам и просмотреть объединенные показатели счетчика общей пропускной способности дисков для виртуальной машины, щелкните любое имя виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="07931-182">Click any VM name to open log search and view aggregated total disk throughput counter details for the VM.</span></span>
- <span data-ttu-id="07931-183">**Общие тома кластера**</span><span class="sxs-lookup"><span data-stu-id="07931-183">**Clustered Shared Volumes**</span></span>
    - <span data-ttu-id="07931-184">**Общая пропускная способность**. Показывает сумму операций чтения и записи на общих томах кластера.</span><span class="sxs-lookup"><span data-stu-id="07931-184">**Total Throughput** Shows the sum of both reads and writes on clustered shared volumes.</span></span>
    - <span data-ttu-id="07931-185">**Общее число операций ввода-вывода**. Показывает сумму операций ввода-вывода в секунду на общих томах кластера.</span><span class="sxs-lookup"><span data-stu-id="07931-185">**Total IOPS** Shows the sum of input/output operations per second on clustered shared volumes.</span></span>
    - <span data-ttu-id="07931-186">**Общая задержка**. Показывает общую задержку на общих томах кластера.</span><span class="sxs-lookup"><span data-stu-id="07931-186">**Total Latency** Shows the total latency on clustered shared volumes.</span></span>
- <span data-ttu-id="07931-187">**Плотность узла**. Первая плитка содержит сведения об общем числе узлов и виртуальных машин, доступных в решении.</span><span class="sxs-lookup"><span data-stu-id="07931-187">**Host Density** The top tile shows the total number of hosts and virtual machines available to the solution.</span></span> <span data-ttu-id="07931-188">Щелкните эту плитку, чтобы просмотреть дополнительные сведения в поиске по журналам.</span><span class="sxs-lookup"><span data-stu-id="07931-188">Click the top tile to view additional details in log search.</span></span> <span data-ttu-id="07931-189">Кроме того, здесь содержится список всех узлов, а также сведения о числе виртуальных машин, размещенных на этих узлах.</span><span class="sxs-lookup"><span data-stu-id="07931-189">Also lists all hosts and the number of virtual machines that are hosted.</span></span> <span data-ttu-id="07931-190">Чтобы просмотреть подробные результаты для виртуальной машины в поиске по журналам, щелкните имя узла.</span><span class="sxs-lookup"><span data-stu-id="07931-190">Click a host to drill into the VM results in a log search.</span></span>


![Колонка "Узлы" на панели мониторинга](./media/log-analytics-capacity/dashboard-hosts.png)

![Колонка "Виртуальные машины" на панели мониторинга](./media/log-analytics-capacity/dashboard-vms.png)


### <a name="evaluate-performance"></a><span data-ttu-id="07931-193">Оценка производительности</span><span class="sxs-lookup"><span data-stu-id="07931-193">Evaluate performance</span></span>

<span data-ttu-id="07931-194">Рабочие вычислительные среды значительно отличаются в разных организациях.</span><span class="sxs-lookup"><span data-stu-id="07931-194">Production computing environments differ greatly from one organization to another.</span></span> <span data-ttu-id="07931-195">Кроме того, емкость и производительность может зависеть от того, как запущены виртуальные машины, и от того, что вы считаете нормальным.</span><span class="sxs-lookup"><span data-stu-id="07931-195">Also, capacity and performance workloads might depend on how your VMs are running, and what you consider normal.</span></span> <span data-ttu-id="07931-196">Определенные процессы, которые помогают оценить производительность, вероятно, не применяются к вашей среде.</span><span class="sxs-lookup"><span data-stu-id="07931-196">Specific procedures to help you measure performance would probably not apply to your environment.</span></span> <span data-ttu-id="07931-197">Поэтому в этом случае лучше использовать более обобщенные конкретные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="07931-197">So, more generalized prescriptive guidance is better suited to help.</span></span> <span data-ttu-id="07931-198">Корпорация Майкрософт публикует ряд статей с конкретными рекомендациями по измерению производительности.</span><span class="sxs-lookup"><span data-stu-id="07931-198">Microsoft publishes a variety of prescriptive guidance articles to help you measure performance.</span></span>

<span data-ttu-id="07931-199">Подводя итог, можно отметить, что это решение собирает сведения о емкости и производительности из различных источников, в том числе счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="07931-199">To summarize, the solution collects capacity and performance data from a variety of sources including performance counters.</span></span> <span data-ttu-id="07931-200">Используйте эти сведения, представленные в различных областях решения, и сравните свои результаты с результатами, приведенными в статье [Measuring Performance on Hyper-V](https://msdn.microsoft.com/library/cc768535.aspx) (Измерение производительности на виртуальных машинах Hyper-V).</span><span class="sxs-lookup"><span data-stu-id="07931-200">Use that capacity and performance data that presented in various surfaces in the solution and compare your results to those at the [Measuring Performance on Hyper-V](https://msdn.microsoft.com/library/cc768535.aspx) article.</span></span> <span data-ttu-id="07931-201">Хотя эта статья опубликована ранее, приведенные в ней метрики, рекомендации и указания по-прежнему актуальны.</span><span class="sxs-lookup"><span data-stu-id="07931-201">Although the article was published some time ago, the metrics, considerations, and guidelines are still valid.</span></span> <span data-ttu-id="07931-202">В ней также содержатся ссылки на другие полезные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="07931-202">The article contains links to other useful resources.</span></span>


## <a name="sample-log-searches"></a><span data-ttu-id="07931-203">Пример поисков журналов</span><span class="sxs-lookup"><span data-stu-id="07931-203">Sample log searches</span></span>

<span data-ttu-id="07931-204">В приведенной ниже таблице содержатся примеры поисков по журналу для получения сведений о емкости и производительности, собранных и рассчитанных этим решением.</span><span class="sxs-lookup"><span data-stu-id="07931-204">The following table provides sample log searches for capacity and performance data collected and calculated by this solution.</span></span>

| <span data-ttu-id="07931-205">Запрос</span><span class="sxs-lookup"><span data-stu-id="07931-205">Query</span></span> | <span data-ttu-id="07931-206">Описание</span><span class="sxs-lookup"><span data-stu-id="07931-206">Description</span></span> |
|---|---|
| <span data-ttu-id="07931-207">Конфигурация памяти всех узлов</span><span class="sxs-lookup"><span data-stu-id="07931-207">All host memory configurations</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" CounterName="Host Assigned Memory MB" &#124; measure avg(CounterValue) as MB by InstanceName</code> |
| <span data-ttu-id="07931-208">Конфигурация памяти всех виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="07931-208">All VM memory configurations</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" CounterName="VM Assigned Memory MB" &#124; measure avg(CounterValue) as MB by InstanceName</code> |
| <span data-ttu-id="07931-209">Показатель общего числа дисковых операций ввода-вывода в секунду на всех виртуальных машинах</span><span class="sxs-lookup"><span data-stu-id="07931-209">Breakdown of Total Disk IOPS across all VMs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="VHD Reads/s" OR CounterName="VHD Writes/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="07931-210">Показатель общей пропускной способности дисков на всех виртуальных машинах</span><span class="sxs-lookup"><span data-stu-id="07931-210">Breakdown of Total Disk Throughput across all VMs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="VHD Read MB/s" OR CounterName="VHD Write MB/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="07931-211">Показатель общего числа операций ввода-вывода в секунду на всех общих томах кластера</span><span class="sxs-lookup"><span data-stu-id="07931-211">Breakdown of Total IOPS across all CSVs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="CSV Reads/s" OR CounterName="CSV Writes/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="07931-212">Показатель общей пропускной способности на всех общих томах кластера</span><span class="sxs-lookup"><span data-stu-id="07931-212">Breakdown of Total Throughput across all CSVs</span></span> | <code>Type=Perf ObjectName="Capacity and Performance" (CounterName="CSV Read MB/s" OR CounterName="CSV Write MB/s") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |
| <span data-ttu-id="07931-213">Показатель общей задержки на всех общих томах кластера</span><span class="sxs-lookup"><span data-stu-id="07931-213">Breakdown of Total Latency across all CSVs</span></span> | <code> Type=Perf ObjectName="Capacity and Performance" (CounterName="CSV Read Latency" OR CounterName="CSV Write Latency") &#124; top 2500 &#124; measure avg(CounterValue) by CounterName, InstanceName interval 1HOUR</code> |

>[!NOTE]
> <span data-ttu-id="07931-214">Если ваша рабочая область переведена на [язык запросов Log Analytics](log-analytics-log-search-upgrade.md), указанные выше запросы будут изменены следующим образом.</span><span class="sxs-lookup"><span data-stu-id="07931-214">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="07931-215">Запрос</span><span class="sxs-lookup"><span data-stu-id="07931-215">Query</span></span> | <span data-ttu-id="07931-216">Описание</span><span class="sxs-lookup"><span data-stu-id="07931-216">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="07931-217">Конфигурация памяти всех узлов</span><span class="sxs-lookup"><span data-stu-id="07931-217">All host memory configurations</span></span> | <span data-ttu-id="07931-218">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "Host Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-218">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "Host Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span></span> |
| <span data-ttu-id="07931-219">Конфигурация памяти всех виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="07931-219">All VM memory configurations</span></span> | <span data-ttu-id="07931-220">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "VM Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-220">Perf &#124; where ObjectName == "Capacity and Performance" and CounterName == "VM Assigned Memory MB" &#124; summarize MB = avg(CounterValue) by InstanceName</span></span> |
| <span data-ttu-id="07931-221">Показатель общего числа дисковых операций ввода-вывода в секунду на всех виртуальных машинах</span><span class="sxs-lookup"><span data-stu-id="07931-221">Breakdown of Total Disk IOPS across all VMs</span></span> | <span data-ttu-id="07931-222">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Reads/s" or CounterName == "VHD Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-222">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Reads/s" or CounterName == "VHD Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="07931-223">Показатель общей пропускной способности дисков на всех виртуальных машинах</span><span class="sxs-lookup"><span data-stu-id="07931-223">Breakdown of Total Disk Throughput across all VMs</span></span> | <span data-ttu-id="07931-224">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Read MB/s" or CounterName == "VHD Write MB/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-224">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "VHD Read MB/s" or CounterName == "VHD Write MB/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="07931-225">Показатель общего числа операций ввода-вывода в секунду на всех общих томах кластера</span><span class="sxs-lookup"><span data-stu-id="07931-225">Breakdown of Total IOPS across all CSVs</span></span> | <span data-ttu-id="07931-226">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-226">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="07931-227">Показатель общей пропускной способности на всех общих томах кластера</span><span class="sxs-lookup"><span data-stu-id="07931-227">Breakdown of Total Throughput across all CSVs</span></span> | <span data-ttu-id="07931-228">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-228">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Reads/s" or CounterName == "CSV Writes/s") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |
| <span data-ttu-id="07931-229">Показатель общей задержки на всех общих томах кластера</span><span class="sxs-lookup"><span data-stu-id="07931-229">Breakdown of Total Latency across all CSVs</span></span> | <span data-ttu-id="07931-230">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Read Latency" or CounterName == "CSV Write Latency") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span><span class="sxs-lookup"><span data-stu-id="07931-230">Perf &#124; where ObjectName == "Capacity and Performance" and (CounterName == "CSV Read Latency" or CounterName == "CSV Write Latency") &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), CounterName, InstanceName</span></span> |


## <a name="next-steps"></a><span data-ttu-id="07931-231">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="07931-231">Next steps</span></span>
* <span data-ttu-id="07931-232">Используйте [поиск по журналам в Log Analytics](log-analytics-log-searches.md), чтобы просмотреть подробные сведения о емкости и производительности.</span><span class="sxs-lookup"><span data-stu-id="07931-232">Use [Log searches in Log Analytics](log-analytics-log-searches.md) to view detailed Capacity and Performance data.</span></span>
