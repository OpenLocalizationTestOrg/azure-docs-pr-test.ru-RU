---
title: "Решение \"Данные передачи\" в Log Analytics | Документация Майкрософт"
description: "Данные передачи — это объединенные сетевые данные и данные производительности, передаваемые с компьютеров с установленными агентами OMS, включая агенты Operations Manager и агенты, подключенные к Windows. Сетевые данные вместе с данными журнала помогают коррелировать данные."
services: log-analytics
documentationcenter: 
author: bandersmsft
manager: carmonm
editor: 
ms.assetid: fc3d7127-0baa-4772-858a-5ba995d1519b
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: banders
ms.openlocfilehash: eb8ae80f91b9ecad666ab7a2257d99e5669f5b88
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="wire-data-20-preview-solution-in-log-analytics"></a>Решение Wire Data 2.0 (предварительная версия) в Log Analytics

![Символ Wire Data](./media/log-analytics-wire-data/wire-data2-symbol.png)

Данные передачи — это объединенные сетевые данные и данные производительности, передаваемые с компьютеров с установленными агентами OMS, включая агенты Operations Manager и агенты, подключенные к Windows, а также агенты Linux. Сетевые данные вместе с другими данными журнала помогают коррелировать данные.

Помимо агентов OMS, решение "Данные передачи" использует агенты зависимостей Майкрософт, установленные на компьютерах в вашей ИТ-инфраструктуре. Агенты зависимостей отслеживают сетевые данные, отправляемые на эти компьютеры и с них, для сетевых уровней 2–3 в [модели OSI](https://en.wikipedia.org/wiki/OSI_model), включая различные используемые протоколы и порты. Затем данные отправляются в Log Analytics с помощью агентов.

> [!NOTE]
> Нельзя добавить предыдущую версию решения "Данные передачи" в новые рабочие области. Если у вас включено исходное решение "Данные передачи", вы можете продолжать его использовать. Однако для использования Wire Data 2.0 необходимо сначала удалить исходную версию.

По умолчанию Log Analytics собирает зарегистрированные в журналах данные производительности ЦП, памяти, дисков и сети на основе показателей счетчиков, встроенных в Windows. Процесс сбора сетевых и других данных выполняется в режиме реального времени для каждого агента, включая протоколы подсетей и протоколы уровня приложений, используемые компьютером. Дополнительные счетчики производительности можно добавить на странице "Параметры" на вкладке "Журналы".

Если вы использовали [sFlow](http://www.sflow.org/) или другое программное обеспечение с [протоколом etFlow от Cisco](http://www.cisco.com/c/en/us/products/collateral/ios-nx-os-software/ios-netflow/prod_white_paper0900aecd80406232.html), передаваемые статистические данные будут вам знакомы.

Ниже перечислены некоторые типы встроенных запросов поиска в журналах.

- агенты,предоставляющие данные передачи;
- IP-адреса агентов, предоставляющих данные передачи;
- исходящие подключения по IP-адресам;
- количество байт, отправленных протоколами приложений;
- количество байт, отправленных службой приложений;
- количество байт, полученных различными протоколами;
- общее количество отправленных и полученных байт по версии IP;
- среднее время задержки для подключений, которые оценивались как надежные;
- компьютерные процессы, которые инициировали или получали сетевой трафик;
- объем сетевого трафика для процесса.

Выполняя поиск с помощью данных передачи, можно отфильтровать и сгруппировать данные, чтобы просмотреть сведения об основных агентах и основных протоколах. Кроме того, можно узнать, когда определенные компьютеры (IP-адреса или MAC-адреса) взаимодействовали друг с другом, как долго длился процесс и сколько данных было отправлено. По сути вы просматриваете метаданные о сетевом трафике на основе поиска.

Однако просмотр метаданных не всегда полезен для проведения глубокой диагностики. Данные передачи в Log Analytics не являются полным отражением сетевых данных. Поэтому они не предназначены для расширенного устранения неполадок на уровне пакетов. Преимуществом использования агента (по сравнению с другими методами сбора) является отсутствие необходимости установки устройств, перенастройки сетевых коммутаторов или выполнения сложных настроек. Данные передачи основаны на использовании агента — установите агент на компьютере, и он будет отслеживать свой собственный сетевой трафик. Еще одно преимущество проявляется в случае, если нужно отслеживать рабочие нагрузки, выполняющиеся у поставщиков облачных служб, поставщиков услуг размещения или в Microsoft Azure, где пользователь не является владельцем уровня структуры.

## <a name="connected-sources"></a>Подключенные источники

Решение "Данные передачи" получает данные от агента зависимостей Майкрософт. Агент зависимостей является зависимым от агента OMS ввиду подключений к Log Analytics. Это означает, что сначала на сервере нужно установить и настроить агент OMS, после чего можно будет установить агент зависимостей. В приведенной ниже таблице описаны подключенные источники, которые поддерживаются решением "Данные передачи".

| **Подключенный источник** | **Поддерживаются** | **Описание** |
| --- | --- | --- |
| Агенты Windows | Да | Решение "Данные передачи" анализирует и собирает данные из компьютеров агентов Windows. <br><br> Помимо [агента OMS](log-analytics-windows-agents.md) для агентов Windows необходим агент зависимостей Майкрософт. Полный список версий операционных систем см. в разделе [Поддерживаемые операционные системы](../operations-management-suite/operations-management-suite-service-map-configure.md#supported-operating-systems). |
| Агенты Linux | Да | Решение "Данные передачи" анализирует и собирает данные из компьютеров агентов Linux.<br><br> Помимо [агента OMS](log-analytics-linux-agents.md) для агентов Linux необходим агент зависимостей Майкрософт. Полный список версий операционных систем см. в разделе [Поддерживаемые операционные системы](../operations-management-suite/operations-management-suite-service-map-configure.md#supported-operating-systems). |
| Группа управления System Center Operations Manager | Да | Решение "Данные передачи" анализирует и собирает данные из агентов Windows и Linux в подключенной [группе управления System Center Operations Manager](log-analytics-om-agents.md). <br><br> Требуется прямое подключение из агента System Center Operations Manager к Log Analytics. Данные пересылаются из группы управления в Log Analytics. |
| Учетная запись хранения Azure. | Нет | Решение "Данные передачи" собирает данные из компьютеров агента, поэтому данные из службы хранилища Azure не собираются. |

В ОС Windows System Center Operations Manager и Log Analytics используют Microsoft Monitoring Agent для сбора и отправки данных. В зависимости от контекста этот агент называется агентом System Center Operations Manager, агентом OMS, агентом Log Analytics, MMA или прямым агентом. System Center Operations Manager и Log Analytics предоставляют немного разные версии MMA. В каждой из этих версий предусмотрена возможность отправлять отчеты в System Center Operations Manager, Log Analytics или в оба решения.

В ОС Linux агент OMS для Linux собирает и отправляет данные в Log Analytics. "Данные передачи" можно использовать на серверах с прямыми агентами OMS или на серверах, подключенных к Log Analytics через группы управления System Center Operations Manager.

В этой статье мы будем называть все эти агенты — как в Linux, так и в Windows, подключенные к группе управления System Center Operations Manager или непосредственно к Log Analytics — _агентами OMS_. Имя конкретного развернутого агента будет использоваться, только если оно требуется в контексте.

Агент зависимостей самостоятельно не передает данные и не требует внесения изменений в брандмауэры или порты. Данные в решении"Данные передачи" всегда передаются агентом OMS в Log Analytics, напрямую или через шлюз OMS.

![Схема передачи данных агентами](./media/log-analytics-wire-data/agents.png)

Если вы являетесь пользователем System Center Operations Manager с группой управления, подключенной к Log Analytics:

- Если у ваших агентов System Center Operations Manager есть доступ к Log Analytics через Интернет, никаких дополнительных настроек не требуется.
- Если у агентов System Center Operations Manager нет доступа к Log Analytics через Интернет, необходимо настроить шлюз OMS для работы с System Center Operations Manager.

При использовании Direct Agent необходимо настроить агент OMS для подключения к Log Analytics или шлюзу OMS. Шлюз OMS можно скачать в [Центре загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=52666).

## <a name="prerequisites"></a>Предварительные требования

- Требуется предложение решения [Insight and Analytics](https://www.microsoft.com/cloud-platform/operations-management-suite-pricing).
- Если вы используете предыдущую версию решения "Данные передачи", сначала необходимо ее удалить. Тем не менее все данные, зафиксированные с помощью исходного решения "Данные передачи", по-прежнему будут доступны в Wire Data 2.0 и для поиска по журналам.
- Для установки или удаления агента зависимостей требуются права администратора.
- Агент зависимостей нужно установить на компьютер с 64-разрядной операционной системой.

### <a name="operating-systems"></a>Операционные системы

В следующих разделах представлены поддерживаемые операционные системы для агента зависимостей. Решение "Данные передачи" не поддерживает 32-разрядные архитектуры операционных систем.

#### <a name="windows-server"></a>Windows Server

- Windows Server 2016
- Windows Server 2012 R2
- Windows Server 2012
- Windows Server 2008 R2 с пакетом обновления 1

#### <a name="windows-desktop"></a>Классические приложения Windows

- Windows 10
- Windows 8.1
- Windows 8
- Windows 7

#### <a name="red-hat-enterprise-linux-centos-linux-and-oracle-linux-with-rhel-kernel"></a>Red Hat Enterprise Linux, CentOS Linux и Oracle Linux (с ядром RHEL)

- Поддерживаются только версии ядра по умолчанию и SMP для Linux.
- Нестандартные версии ядра, такие как PAE и Xen, не поддерживаются ни в одном дистрибутиве Linux. Например, система со строкой версии _2.6.16.21-0.8-xen_ не поддерживается.
- Пользовательские ядра, включая повторные компиляции стандартных ядер, не поддерживаются.
- Ядро CentOSPlus не поддерживается.
- Oracle Unbreakable Enterprise Kernel (UEK) рассматривается в разделе ниже.

#### <a name="red-hat-linux-7"></a>Red Hat Linux 7

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 7.0 | 3.10.0-123 |
| 7.1. | 3.10.0-229 |
| 7,2 | 3.10.0-327 |
| 7.3 | 3.10.0–514 |

#### <a name="red-hat-linux-6"></a>Red Hat Linux 6

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 6,0 | 2.6.32-71 |
| 6.1 | 2.6.32-131 |
| 6.2 | 2.6.32-220 |
| 6.3 | 2.6.32-279 |
| 6.4 | 2.6.32-358 |
| 6,5 | 2.6.32-431 |
| 6.6 | 2.6.32-504 |
| 6.7 | 2.6.32-573 |
| 6,8 | 2.6.32-642 |

#### <a name="red-hat-linux-5"></a>Red Hat Linux 5

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 5.8 | 2.6.18-308 |
| 5.9 | 2.6.18-348 |
| 5.10 | 2.6.18-371 |
| 5.11 | 2.6.18-398 <br> 2.6.18-400 <br>2.6.18-402 <br>2.6.18-404 <br>2.6.18-406 <br> 2.6.18-407 <br> 2.6.18-408 <br> 2.6.18-409 <br> 2.6.18-410 <br> 2.6.18-411 <br> 2.6.18-412 <br> 2.6.18-416 <br> 2.6.18–417 <br> 2.6.18-419 |

#### <a name="oracle-enterprise-linux-with-unbreakable-enterprise-kernel"></a>Oracle Enterprise Linux с Unbreakable Enterprise Kernel

#### <a name="oracle-linux-6"></a>Oracle Linux 6

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 6.2 | Oracle 2.6.32-300 (UEK R1) |
| 6.3 | Oracle 2.6.39-200 (UEK R2) |
| 6.4 | Oracle 2.6.39-400 (UEK R2) |
| 6,5 | Oracle 2.6.39-400 (UEK R2 i386) |
| 6.6 | Oracle 2.6.39-400 (UEK R2 i386) |

#### <a name="oracle-linux-5"></a>Oracle Linux 5

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 5.8 | Oracle 2.6.32-300 (UEK R1) |
| 5.9 | Oracle 2.6.39-300 (UEK R2) |
| 5.10 | Oracle 2.6.39-400 (UEK R2) |
| 5.11 | Oracle 2.6.39-400 (UEK R2) |

#### <a name="suse-linux-enterprise-server"></a>SUSE Linux Enterprise Server

#### <a name="suse-linux-11"></a>SUSE Linux 11

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 11 | 2.6.27 |
| 11 SP1 | 2.6.32 |
| 11 SP2 | 3.0.13 |
| 11 SP3 | 3.0.76 |
| 11 SP4 | 3.0.101 |

#### <a name="suse-linux-10"></a>SUSE Linux 10

| **Версия ОС** | **Версия ядра** |
| --- | --- |
| 10 SP4 | 2.6.16.60 |

#### <a name="dependency-agent-downloads"></a>Скачиваемые файлы агента зависимостей

| **File** | **ОС** | **Версия** | **SHA-256** |
| --- | --- | --- | --- |
| [InstallDependencyAgent-Windows.exe](https://aka.ms/dependencyagentwindows) | Windows | 9.0.5 | 73B3F6A2A76A08D58F72A550947FF839B588591C48E6EDDD6DDF73AA3FD82B43 |
| [InstallDependencyAgent-Linux64.bin](https://aka.ms/dependencyagentlinux) | Linux | 9.0.5 | A1BAD0B36EBF79F2B69113A07FCF48C68D90BD169C722689F9C83C69FC032371 |



## <a name="configuration"></a>Конфигурация

Выполните следующие действия, чтобы настроить решение "Данные передачи" в своих рабочих областях.

1. Включите решение для анализа журналов действий из [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.WireData2OMS?tab=Overview) или выполните инструкции из статьи [Добавление решений для управления Azure Log Analytics в рабочую область](log-analytics-add-solutions.md).
2. Установите агент зависимостей на каждом компьютере, где вы хотите получать данные. Агент зависимостей может отслеживать ближайшие соседние подключения, поэтому необязательно выполнять установку агента на каждом компьютере.

### <a name="install-the-dependency-agent-on-windows"></a>Установка агента зависимостей в Windows

Для установки или удаления агента требуются права администратора.

Агент зависимостей устанавливается на компьютерах Windows с помощью файла InstallDependencyAgent-Windows.exe. Если запустить этот исполняемый файл без параметров, запустится мастер для установки в интерактивном режиме.

Выполните приведенные шаги, чтобы установить агент зависимостей на каждом компьютере Windows.

1. Установите агент OMS, выполнив инструкции в статье [Подключение компьютеров Windows к службе Log Analytics в Azure](log-analytics-windows-agents.md).
2. Скачайте агент Windows, используя ссылку в предыдущем разделе, а затем запустите его с помощью команды InstallDependencyAgent Windows.exe.
3. Следуйте инструкциям мастера для установки агента.
4. Если агент зависимостей не запускается, просмотрите подробные сведения об ошибке в записях журналов. В агентах Windows каталогом журналов является %Programfiles%\Microsoft Dependency Agent\logs.

#### <a name="windows-command-line"></a>Командная строка Windows

Используйте параметры из следующей таблицы для установки из командной строки. Чтобы просмотреть список параметров установки, запустите установщик с параметром /? /? следующим образом.

InstallDependencyAgent-Windows.exe /?

| **Параметр** | **Описание** |
| --- | --- |
| <code>/?</code> | Получает список параметров командной строки. |
| <code>/S</code> | Выполняет автоматическую установку без вывода сообщений для пользователя. |

Файлы для агента зависимостей Windows по умолчанию размещаются в папке C:\Program Files\Microsoft Dependency Agent.

### <a name="install-the-dependency-agent-on-linux"></a>Установка агента зависимостей в Linux

Для установки или настройки агента требуется доступ с правами привилегированного пользователя.

Агент зависимостей устанавливается на компьютерах Linux с помощью файла InstallDependencyAgent-Linux64.bin. Это скрипт оболочки с самоизвлекающимся двоичным файлом. Вы можете запустить этот файл с помощью _sh_ или добавить разрешения на выполнение в сам файл.

Выполните приведение шаги, чтобы установить агент зависимостей на каждом компьютере Linux.

1. Установите агент OMS, выполнив инструкции, приведенные в статье [Подключение компьютеров Linux к Operations Management Suite (OMS)](log-analytics-agent-linux.md).
2. Скачайте агент зависимостей Linux, используя ссылку в предыдущем разделе, установите его с правами привилегированного пользователя, а затем запустите с помощью команды InstallDependencyAgent-Linux64.bin.
3. Если агент зависимостей не запускается, просмотрите подробные сведения об ошибке в записях журналов. В агентах Linux каталог журналов находится в расположении /var/opt/microsoft/dependency-agent/log.

Чтобы просмотреть список параметров установки, запустите программу установки с параметров `-help` указанным ниже образом.

```
InstallDependencyAgent-Linux64.bin -help
```

| **Параметр** | **Описание** |
| --- | --- |
| <code>-help</code> | Получает список параметров командной строки. |
| <code>-s</code> | Выполняет автоматическую установку без вывода сообщений для пользователя. |
| <code>--check</code> | Проверяет разрешения и операционную систему, но не устанавливает агент. |

Файлы для агента зависимостей размещаются в следующих каталогах.

| **Файлы** | **Расположение** |
| --- | --- |
| Основные файлы | /opt/microsoft/dependency-agent |
| Файлы журналов | /var/opt/microsoft/dependency-agent/log |
| Файлы конфигурации | /etc/opt/microsoft/dependency-agent/config |
| Исполняемые файлы службы | /opt/microsoft/dependency-agent/bin/microsoft-dependency-agent<br><br>/opt/microsoft/dependency-agent/bin/microsoft-dependency-agent-manager |
| Двоичные файлы хранилища | /var/opt/microsoft/dependency-agent/storage |

### <a name="installation-script-examples"></a>Примеры скриптов установки

Чтобы легко развернуть агент зависимостей сразу на нескольких серверах, можно использовать скрипт. Для скачивания и установки агента зависимостей в Windows или Linux можно использовать приведенные ниже примеры скриптов.

#### <a name="powershell-script-for-windows"></a>Скрипт PowerShell для Windows

```PowerShell

Invoke-WebRequest &quot;https://aka.ms/dependencyagentwindows&quot; -OutFile InstallDependencyAgent-Windows.exe

.\InstallDependencyAgent-Windows.exe /S

```

#### <a name="shell-script-for-linux"></a>Скрипт оболочки для Linux

```
wget --content-disposition https://aka.ms/dependencyagentlinux -O InstallDependencyAgent-Linux64.bin
```

```
sh InstallDependencyAgent-Linux64.bin -s
```

### <a name="desired-state-configuration"></a>Настройка требуемого состояния

Чтобы развернуть агент зависимостей посредством Desired State Configuration, можно использовать модуль xPSDesiredStateConfiguration и небольшой фрагмент кода, как показано ниже.

```
Import-DscResource -ModuleName xPSDesiredStateConfiguration

$DAPackageLocalPath = &quot;C:\InstallDependencyAgent-Windows.exe&quot;



Node $NodeName

{

    # Download and install the Dependency Agent

    xRemoteFile DAPackage

    {

        Uri = &quot;https://aka.ms/dependencyagentwindows&quot;

        DestinationPath = $DAPackageLocalPath

        DependsOn = &quot;[Package]OI&quot;

    }

    xPackage DA

    {

        Ensure=&quot;Present&quot;

        Name = &quot;Dependency Agent&quot;

        Path = $DAPackageLocalPath

        Arguments = '/S'

        ProductId = &quot;&quot;

        InstalledCheckRegKey = &quot;HKEY\_LOCAL\_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Windows\CurrentVersion\Uninstall\DependencyAgent&quot;

        InstalledCheckRegValueName = &quot;DisplayName&quot;

        InstalledCheckRegValueData = &quot;Dependency Agent&quot;

    }

}

```
### <a name="uninstall-the-dependency-agent"></a>Удаление агента зависимостей

Используйте следующие разделы для удаления агента зависимостей.

#### <a name="uninstall-the-dependency-agent-on-windows"></a>Удаление агента зависимостей в Windows

Администратор может удалить агент зависимостей для Windows через панель управления.

Для удаления агента зависимостей администратор может также запустить файл %Programfiles%\Microsoft Dependency Agent\Uninstall.exe.

#### <a name="uninstall-the-dependency-agent-on-linux"></a>Удаление агента зависимостей в Linux

Чтобы полностью удалить агент зависимостей в Linux, необходимо удалить сам агент и соединитель, который автоматически устанавливается с агентом. Удалить и то, и другое одновременно можно с помощью одной команды.

```
rpm -e dependency-agent dependency-agent-connector
```

## <a name="management-packs"></a>Пакеты управления

Если решение "Данные передачи" активировано в рабочей области Log Analytics, то на все серверы в этой рабочей области отправляется пакет управления размером 300 КБ. Если агенты System Center Operations Manager используются в [подключенной группе управления](log-analytics-om-agents.md), то пакет управления монитора зависимости развертывается из System Center Operations Manager. Если агенты подключены напрямую, пакет управления доставляется с помощью Log Analytics.

Пакет управления называется Microsoft.IntelligencePacks.ApplicationDependencyMonitor. Он записывается в папку %Programfiles%\Microsoft Monitoring Agent\Agent\Health Service State\Management Packs. Источник данных, используемый пакетом управления, — %Program files%\Microsoft Monitoring Agent\Agent\Health Service State\Resources&lt;Автоматически_созданный_идентификатор&gt;\Microsoft.EnterpriseManagement.Advisor.ApplicationDependencyMonitorDataSource.dll.

## <a name="using-the-solution"></a>Использование решения

**Установка и настройка решения**

Для установки и настройки решений используйте указанные ниже данные.

- Решение "Данные передачи" получает данные с компьютеров под управлением Windows Server 2012 R2, Windows 8.1 и более поздних операционных систем.
- На компьютерах, с которых предполагается выполнять сбор данных передачи, необходимо установить Microsoft .NET Framework 4.0 или более поздней версии.
- Решение "Данные передачи" необходимо добавить в рабочую область Log Analytics, как описано в статье [Добавление решений для управления Azure Log Analytics в рабочую область](log-analytics-add-solutions.md). Дополнительная настройка не требуется.
- Для просмотра данных передачи для конкретного решения это решение должно быть уже добавлено в рабочую область.

После установки агентов и решения в вашей рабочей области отобразится плитка Wire Data 2.0.

> [!NOTE]
> В настоящее время для просмотра данных передачи необходимо использовать портал OMS. Эти данные нельзя просмотреть на портале Azure.

![Плитка "Данные передачи"](./media/log-analytics-wire-data/wire-data-tile.png)

## <a name="using-the-wire-data-20-solution"></a>Использование решения Wire Data 2.0

Чтобы открыть панель мониторинга решения "Данные передачи", на портале OMS щелкните плитку **Wire Data 2.0**. Панель мониторинга содержит колонки, перечисленные в приведенной ниже таблице. В каждой колонке содержится максимум 10 элементов, соответствующих таким указанным критериям, как область действия и диапазон времени. Вы можете выполнить поиск по журналам, в результате которого возвращаются все записи, если щелкнуть заголовок колонки или **Показать все** в ее нижней части.

| **Колонка** | **Описание** |
| --- | --- |
| Агенты, записывающие сетевой трафик | Отображает число агентов, которые записывают сетевой трафик, и показывает первые 10 компьютеров, записывающих сетевой трафик. Щелкните количество, чтобы выполнить поиск по журналам: <code>Type:WireData &#124; measure Sum(TotalBytes) by Computer &#124; top 500000</code>. Щелкните в списке компьютер, чтобы выполнить поиск по журналам и получить общее число записанных байт. |
| Локальные подсети | Показывает число локальных подсетей, которые обнаружили агенты.  Щелкните число, чтобы выполнить поиск по журналам: <code>Type:WireData &#124; Measure Sum(TotalBytes) by LocalSubnet</code>. В результате вы получите список всех подсетей и количество байт, отправленных в каждой из них. Выберите подсеть в списке, чтобы выполнить поиск по журналам и получить общее число байт, отправленных в подсети. |
| Протоколы уровня приложений | Показывает количество используемых протоколов уровня приложений, обнаруженных агентами. Щелкните количество, чтобы выполнить поиск по журналам: <code>Type:WireData &#124; Measure Sum(TotalBytes) by ApplicationProtocol</code>. Щелкните в списке протокол, чтобы выполнить поиск по журналам и получить общее число байт, отправленных с помощью протокола. |

[!include[log-analytics-log-search-nextgeneration](../../includes/log-analytics-log-search-nextgeneration.md)]

![Панель мониторинга "Данные передачи"](./media/log-analytics-wire-data/wire-data-dash.png)

Используйте колонку **Агенты, записывающие сетевой трафик**, чтобы определить, какой процент пропускной способности сети используется компьютерами. Эта колонка поможет найти самый _активный_ компьютер в среде. Такие компьютеры могут быть перегружены, работать со сбоями либо использовать больше сетевых ресурсов, чем обычно.

![Пример поиска по журналам](./media/log-analytics-wire-data/log-search-example01.png)

Вы также можете использовать колонку **Локальные подсети**, чтобы определить объем сетевого трафика, проходящего через подсети. Пользователи часто создают подсети для важных областей своих приложений. Эта колонка позволяет просматривать такие области.

![Пример поиска по журналам](./media/log-analytics-wire-data/log-search-example02.png)

Колонка **Протоколы уровня приложений** помогает узнать, какие протоколы используются. Например, вы ожидаете, что SSH не используется в вашей сетевой среде. С помощью этой колонки можно быстро проверить, так ли это.

![Пример поиска по журналам](./media/log-analytics-wire-data/log-search-example03.png)

В этом примере можно просмотреть подробные сведения о SSH, чтобы узнать, какие компьютеры используют этот протокол и множество других сведений об обмене данными.

![результаты поиска SSH](./media/log-analytics-wire-data/ssh-details.png)

Также полезно знать об увеличении или уменьшении трафика по протоколу по прошествии времени. Например, если объем данных, передаваемых приложением, увеличился, вам следует об этом знать.

## <a name="input-data"></a>Входные данные

Данные передачи собирают метаданные о сетевом трафике с помощью включенных агентов. Каждый агент передает данные примерно каждые 15 секунд.

## <a name="output-data"></a>Выходные данные

Для каждого типа входных данных создается запись с данными о типе _WireData_. У этих записей есть свойства, приведенные в таблице ниже.

| Свойство | Описание |
|---|---|
| Компьютер | Имя компьютера, на котором были собраны данные |
| TimeGenerated | Время создания записи |
| LocalIP | IP-адрес локального компьютера |
| SessionState | Подключен или отключен |
| ReceivedBytes | Число полученных байт |
| ProtocolName | Имя сетевого протокола, который используется |
| IPVersion | Версия IP |
| Направление | Входящий или исходящий |
| MaliciousIP | IP-адрес известного вредоносного источника |
| Severity | Опасность потенциально вредоносной программы |
| RemoteIPCountry | Страна удаленного IP-адреса |
| ManagementGroupName | Имя группы управления Operations Manager |
| SourceSystem | Источник, на котором были собраны данные |
| SessionStartTime | Время начала сеанса |
| SessionEndTime | Время окончания сеанса |
| LocalSubnet | Подсеть, в которой были собраны данные |
| LocalPortNumber | Номер локального порта |
| RemoteIP | Удаленный IP-адрес, используемый удаленным компьютером |
| RemotePortNumber | Номер порта, используемый удаленным IP-адресом |
| SessionID | Уникальное значение, которое идентифицирует сеанс связи между двумя IP-адресами |
| SentBytes | Число отправленных байт |
| TotalBytes | Общее число байтов, отправленных в течение сеанса |
| ApplicationProtocol | Тип используемого сетевого протокола   |
| ProcessID | Идентификатор процесса Windows |
| ProcessName | Путь и имя файла процесса |
| RemoteIPLongitude | Значение долготы IP |
| RemoteIPLatitude | Значение широты IP |


## <a name="next-steps"></a>Дальнейшие действия

- [поиск в журналах](log-analytics-log-searches.md) , чтобы просмотреть подробные записи поиска данных передачи.
