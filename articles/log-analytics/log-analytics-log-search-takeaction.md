---
title: "aaaUser Azure Automation Runbook действие, инициируемое в службе анализа журналов | Документы Microsoft"
description: "В этой статье описывается, как toorun runbook автоматизации из службы анализа журналов поиск результат по требованию."
services: log-analytics
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/04/2017
ms.author: magoedte
ms.openlocfilehash: 53c25431572babd5fd54bf964e4683077e2a4c2d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="take-action-with-an-automation-runbook-from-a-log-analytics-log-search-result"></a><span data-ttu-id="bc8e7-103">Выполнение действия с Runbook службы автоматизации на основе результатов поиска Log Analytics</span><span class="sxs-lookup"><span data-stu-id="bc8e7-103">Take Action with an Automation Runbook from a Log Analytics log search result</span></span>

<span data-ttu-id="bc8e7-104">В результате поиска журнала в службе анализа журналов Azure теперь можно выбрать **действие** toorun runbook автоматизации.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-104">From a log search result in Azure Log Analytics, you can now select **Take action** toorun an Automation runbook.</span></span>  <span data-ttu-id="bc8e7-105">Hello его можно использовать tooremediate hello проблема выполнение некоторых действий, таких как собирать сведения об устранении неполадок, отправьте сообщение электронной почты или создание запроса на обслуживание.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-105">hello runbook can be used tooremediate hello issue or take some other action such as collect troubleshooting information, send an email, or create a service request.</span></span> 

## <a name="components-and-features-used"></a><span data-ttu-id="bc8e7-106">Используемые компоненты и функции</span><span class="sxs-lookup"><span data-stu-id="bc8e7-106">Components and features used</span></span>
* [<span data-ttu-id="bc8e7-107">Учетная запись службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="bc8e7-107">Azure Automation account</span></span>](../automation/automation-offering-get-started.md)
* [<span data-ttu-id="bc8e7-108">Рабочая область Log Analytics</span><span class="sxs-lookup"><span data-stu-id="bc8e7-108">Log Analytics workspace</span></span>](../log-analytics/log-analytics-overview.md)

## <a name="tooinitiate-runbook-from-log-search"></a><span data-ttu-id="bc8e7-109">tooinitiate runbook из поиска журналов</span><span class="sxs-lookup"><span data-stu-id="bc8e7-109">tooinitiate runbook from log search</span></span>

<span data-ttu-id="bc8e7-110">Действие tootake на события и инициирование runbook из результатов поиска журналов, сначала нужно создать поиска журналов и результатов hello можно вызвать runbook по запросу.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-110">tootake action on an event and initiate a runbook from your log search results, you start by creating a log search and from hello results you can invoke a runbook on-demand.</span></span>  <span data-ttu-id="bc8e7-111">Это можно сделать из hello функция поиска журналов в hello Azure или [портал OMS](../log-analytics/log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="bc8e7-111">This can be achieved from hello log search feature in hello Azure or [OMS portal](../log-analytics/log-analytics-log-searches.md).</span></span>  <span data-ttu-id="bc8e7-112">В этом примере мы выполняется поиск журнала из hello портал Azure с basic демонстрацию этой функции.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-112">In this example, we perform a log search from hello Azure portal with a basic demonstration of this feature.</span></span>

1. <span data-ttu-id="bc8e7-113">В hello портал Azure, hello концентратора пункт меню **дополнительные службы** и выберите **анализа журналов**.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-113">In hello Azure portal, on hello Hub menu click **More services** and select **Log Analytics**.</span></span>  
2. <span data-ttu-id="bc8e7-114">В колонке анализа журналов hello, выберите рабочую область службы анализа журналов и колонке hello рабочей области выберите **поиска журналов**.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-114">On hello Log Analytics blade, select your Log Analytics workspace and on hello workspace blade select **Log Search**.</span></span>  
3. <span data-ttu-id="bc8e7-115">В колонке hello поиска журналов выполните поиск журнала.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-115">On hello Log Search blade, perform a log search.</span></span>  
4. <span data-ttu-id="bc8e7-116">Из результатов поиска журналов hello, нажмите кнопку слева toohello эллипса hello одного полей hello и из контекстного меню hello, выберите **реагировать на**.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-116">From hello log search results, click hello ellipse toohello left of one of hello fields and from hello popup, select **Take action on**.</span></span><br><br> <span data-ttu-id="bc8e7-117">![Выбор "Выполнить действие" в результатах поиска](./media/log-analytics-log-search-takeaction/log-search-takeaction-menuoption.png)</span><span class="sxs-lookup"><span data-stu-id="bc8e7-117">![Select Take Action from search result](./media/log-analytics-log-search-takeaction/log-search-takeaction-menuoption.png)</span></span> 
5. <span data-ttu-id="bc8e7-118">Hello Take действие колонке выберите **запуск runbook**и на hello **запуск runbook** колонки, можно выбрать runbook toorun.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-118">From hello Take action blade, select **Run a runbook**, and on hello **Run a runbook** blade you can select a runbook toorun.</span></span>  <span data-ttu-id="bc8e7-119">Можно выбрать любого модуля runbook в учетной записи автоматизации, является рабочей областью аналитики журналов связанного toohello hello.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-119">You can select any runbook in hello Automation account that is linked toohello Log Analytics workspace.</span></span>  <span data-ttu-id="bc8e7-120">Обратите внимание hello следующие:</span><span class="sxs-lookup"><span data-stu-id="bc8e7-120">Note hello following:</span></span>

    * <span data-ttu-id="bc8e7-121">Модули runbook группируются по тегам.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-121">Runbooks are organized by tags</span></span>
    * <span data-ttu-id="bc8e7-122">Значения входных параметров Runbook можно выбрать непосредственно из поля hello hello результат поиска.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-122">Runbook input parameter values can be selected directly from hello fields of hello search result.</span></span>  <span data-ttu-id="bc8e7-123">Раскрывающегося списка будет отображаться все доступные поля hello из tooselect результат hello из.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-123">A drop-down list will appear displaying all hello available fields from hello result tooselect from.</span></span>  
    * <span data-ttu-id="bc8e7-124">Вы можете toorun hello runbook [гибридной рабочей ролью runbook](../automation/automation-hybrid-runbook-worker.md) , установки на компьютере hello с проблемой hello, при наличии соответствующих групп гибридную рабочую роль Runbook, содержит только эту машину как член.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-124">You can choose toorun hello runbook on a [hybrid runbook worker](../automation/automation-hybrid-runbook-worker.md) that you have installed on hello machine that has hello issue if you have a corresponding Hybrid Runbook Worker group that only contains this machine as a member.</span></span>  <span data-ttu-id="bc8e7-125">Если имя hello группу гибридных рабочих ролей hello совпадает имя hello hello компьютера, находящегося в результат поиска журнала hello, hello группы выбирается автоматически.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-125">If hello name of hello Hybrid Worker group matches hello name of hello computer that is in hello log search result, then hello group is selected automatically.</span></span>    

6. <span data-ttu-id="bc8e7-126">После нажатия кнопки **запуска**, колонки задания runbook Привет открыть tooallow вы tooreview hello состояние hello задания.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-126">After you click **Run**, hello runbook job blade will open tooallow you tooreview hello status of hello job.</span></span>   

<span data-ttu-id="bc8e7-127">При выборе модуля runbook, который был настроенных toobe [вызывается из предупреждения анализа журналов](../automation/automation-invoke-runbook-from-omsla-alert.md), она имеет входной параметр **WebhookData** , **объект** типа.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-127">If you select a runbook that was configured toobe [called from a Log Analytics alert](../automation/automation-invoke-runbook-from-omsla-alert.md), it has an input parameter called **WebhookData** that is **Object** type.</span></span>  <span data-ttu-id="bc8e7-128">Если входной параметр hello является обязательной, необходимо toopass hello поиска результаты toohello runbook, чтобы его можно преобразовать строку в формате JSON hello в тип объекта, позволяя toofilter для конкретных элементов, которые будет ссылаться в действия runbook.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-128">If hello input parameter is mandatory, you need toopass hello search results toohello runbook so it can convert hello JSON-formatted string into an object type allowing you toofilter on specific items that you will reference in runbook activities.</span></span>  <span data-ttu-id="bc8e7-129">Это можно сделать, выбрав **(Object) результат поиска** из раскрывающегося списка hello.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-129">You do this by selecting **Search result (Object)** from hello drop-down list.</span></span><br><br> <span data-ttu-id="bc8e7-130">![Выбор объекта данных Webhook для параметра runbook](media/log-analytics-log-search-takeaction/select-runbook-and-properties.png)</span><span class="sxs-lookup"><span data-stu-id="bc8e7-130">![Select Webhook data object for runbook parameter](media/log-analytics-log-search-takeaction/select-runbook-and-properties.png)</span></span>   
    
## <a name="next-steps"></a><span data-ttu-id="bc8e7-131">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="bc8e7-131">Next steps</span></span>

* <span data-ttu-id="bc8e7-132">Просмотрите hello [Справочник поиска журнала анализа журналов](log-analytics-search-reference.md) tooview все hello поиск поля и аспекты, доступных в службе анализа журналов.</span><span class="sxs-lookup"><span data-stu-id="bc8e7-132">Review hello [Log Analytics log search reference](log-analytics-search-reference.md) tooview all of hello search fields and facets available in Log Analytics.</span></span>
* <span data-ttu-id="bc8e7-133">как автоматически, проверьте tooinvoke runbook автоматизации toolearn [вызов runbook службы автоматизации Azure из службы анализа журналов OMS предупреждение](../automation/automation-invoke-runbook-from-omsla-alert.md).</span><span class="sxs-lookup"><span data-stu-id="bc8e7-133">toolearn how tooinvoke an Automation runbook automatically, review [calling an Azure Automation runbook from an OMS Log Analytics alert](../automation/automation-invoke-runbook-from-omsla-alert.md).</span></span>  
