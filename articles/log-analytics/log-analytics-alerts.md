---
title: "Общие сведения об оповещениях в Azure Log Analytics | Документация Майкрософт"
description: "Оповещения в Log Analytics идентифицируют важную информацию в репозитории OMS и могут заранее уведомлять вас о возникших проблемах или выполнять действия в попытке устранить их.  В этой статье описываются различные типы правил генерации оповещений и их определение."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: 6cfd2a46-b6a2-4f79-a67b-08ce488f9a91
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/26/2017
ms.author: bwren
ms.openlocfilehash: 951e76d3fb18d9e433b148e82d4d6cee9417ce6d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="understanding-alerts-in-log-analytics"></a><span data-ttu-id="d0ee3-104">Общие сведения об оповещениях в Log Analytics</span><span class="sxs-lookup"><span data-stu-id="d0ee3-104">Understanding alerts in Log Analytics</span></span>

<span data-ttu-id="d0ee3-105">Оповещения в Log Analytics содержат важную информацию о вашем репозитории Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-105">Alerts in Log Analytics identify important information in your Log Analytics repository.</span></span>  <span data-ttu-id="d0ee3-106">В этой статье содержатся сведения о работе правил генерации оповещений в Log Analytics, а также описываются различия между разными типами этих правил.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-106">This article provides details of how alert rules in Log Analytics work and describes the differences between different types of alert rules.</span></span>

<span data-ttu-id="d0ee3-107">Сведения о создании правил генерации оповещений см. по следующим ссылкам:</span><span class="sxs-lookup"><span data-stu-id="d0ee3-107">For the process of creating alert rules, see the following articles:</span></span>

- <span data-ttu-id="d0ee3-108">создание правил генерации оповещений на [портале Azure](log-analytics-alerts-creating.md);</span><span class="sxs-lookup"><span data-stu-id="d0ee3-108">Create alert rules using [Azure portal](log-analytics-alerts-creating.md)</span></span>
- <span data-ttu-id="d0ee3-109">создание правил генерации оповещений с помощью [шаблона Resource Manager](../operations-management-suite/operations-management-suite-solutions-resources-searches-alerts.md);</span><span class="sxs-lookup"><span data-stu-id="d0ee3-109">Create alert rules using [Resource Manager template](../operations-management-suite/operations-management-suite-solutions-resources-searches-alerts.md)</span></span>
- <span data-ttu-id="d0ee3-110">создание правил генерации оповещений с помощью [REST API](log-analytics-api-alerts.md).</span><span class="sxs-lookup"><span data-stu-id="d0ee3-110">Create alert rules using [REST API](log-analytics-api-alerts.md)</span></span>


## <a name="alert-rules"></a><span data-ttu-id="d0ee3-111">Правила оповещения</span><span class="sxs-lookup"><span data-stu-id="d0ee3-111">Alert rules</span></span>

<span data-ttu-id="d0ee3-112">Оповещения создаются с помощью правил оповещения, которые автоматически выполняют поиск по журналам через регулярные интервалы.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-112">Alerts are created by alert rules that automatically run log searches at regular intervals.</span></span>  <span data-ttu-id="d0ee3-113">Если результаты поиска по журналам соответствуют определенным условиям, создается запись оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-113">If the results of the log search match particular criteria then an alert record is created.</span></span>  <span data-ttu-id="d0ee3-114">После этого правило может автоматически запустить одно или несколько действий, чтобы заблаговременно уведомить вас об оповещении либо вызвать другой процесс.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-114">The rule can then automatically run one or more actions to proactively notify you of the alert or invoke another process.</span></span>  <span data-ttu-id="d0ee3-115">В каждом типе правил генерации оповещений используется определенная логика выполнения этого анализа.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-115">Different types of alert rules use different logic to perform this analysis.</span></span>

![Оповещения Log Analytics](media/log-analytics-alerts/overview.png)

<span data-ttu-id="d0ee3-117">Правила генерации оповещений определяются следующими сведениями:</span><span class="sxs-lookup"><span data-stu-id="d0ee3-117">Alert Rules are defined by the following details:</span></span>

- <span data-ttu-id="d0ee3-118">**Поиск по журналам**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-118">**Log search**.</span></span>  <span data-ttu-id="d0ee3-119">Это запрос, который будет запускаться каждый раз при срабатывании правила генерации оповещений.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-119">The query that runs every time the alert rule fires.</span></span>  <span data-ttu-id="d0ee3-120">С помощью записей, возвращаемых этим запросом, можно определить, нужно ли создавать оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-120">The records returned by this query is used to determine whether an alert is created.</span></span>
- <span data-ttu-id="d0ee3-121">**Временное окно**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-121">**Time window**.</span></span>  <span data-ttu-id="d0ee3-122">Указывает диапазон времени для запроса.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-122">Specifies the time range for the query.</span></span>  <span data-ttu-id="d0ee3-123">Запрос возвращает только те записи, которые были созданы в течение этого периода, предшествующего настоящему времени.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-123">The query returns only records that were created within this range of the current time.</span></span>  <span data-ttu-id="d0ee3-124">Это значение может составлять от 5 минут до 24 часов.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-124">This can be any value between 5 minutes and 24 hours.</span></span> <span data-ttu-id="d0ee3-125">Например, если временное окно равно 60 минутам, а запрос выполняется в 13:15, то возвращаются только записи, созданные между 12:15 и 13:15.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-125">For example, If the time window is set to 60 minutes, and the query is run at 1:15 PM, only records created between 12:15 PM and 1:15 PM is returned.</span></span>
- <span data-ttu-id="d0ee3-126">**Частота**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-126">**Frequency**.</span></span>  <span data-ttu-id="d0ee3-127">Указывает, как часто должен выполняться запрос.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-127">Specifies how often the query should be run.</span></span> <span data-ttu-id="d0ee3-128">Это значение может составлять от 5 минут до 24 часов.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-128">Can be any value between 5 minutes and 24 hours.</span></span> <span data-ttu-id="d0ee3-129">Оно должно быть меньше или равно временному окну.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-129">Should be equal to or less than the time window.</span></span>  <span data-ttu-id="d0ee3-130">Если значение больше, чем временное окно, появляется риск пропуска записей.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-130">If the value is greater than the time window, then you risk records being missed.</span></span><br><span data-ttu-id="d0ee3-131">Например, рассмотрим временное окно в 30 минут и частоту в 60 минут.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-131">For example, consider a time window of 30 minutes and a frequency of 60 minutes.</span></span>  <span data-ttu-id="d0ee3-132">Если запрос выполняется в 13:00, он возвращает записи между 12:30 и 13:00.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-132">If the query is run at 1:00, it returns records between 12:30 and 1:00 PM.</span></span>  <span data-ttu-id="d0ee3-133">В следующий раз этот запрос будет выполнен в 14:00, а записи возвратятся между 13:30 и 14:00.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-133">The next time the query would run is 2:00 when it would return records between 1:30 and 2:00.</span></span>  <span data-ttu-id="d0ee3-134">Записи, созданные между 13:00 и 13:30, не будут учитываться.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-134">Any records created between 1:00 and 1:30 would never be evaluated.</span></span>
- <span data-ttu-id="d0ee3-135">**Пороговое значение**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-135">**Threshold**.</span></span>  <span data-ttu-id="d0ee3-136">Чтобы определить, следует ли создавать оповещение, оцениваются результаты поиска по журналам.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-136">The results of the log search are evaluated to determine whether an alert should be created.</span></span>  <span data-ttu-id="d0ee3-137">Для каждого типа правил генерации оповещений определяется собственное пороговое значение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-137">The threshold is different for the different types of alert rules.</span></span>

<span data-ttu-id="d0ee3-138">Каждое правило генерации оповещений в Log Analytics относится к одному из двух типов.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-138">Each alert rule in Log Analytics is one of two types.</span></span>  <span data-ttu-id="d0ee3-139">Каждый из этих типов подробно описан в последующих разделах.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-139">Each of these types is described in detail in the sections that follow.</span></span>

- <span data-ttu-id="d0ee3-140">**[Число результатов](#number-of-results-alert-rules)**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-140">**[Number of results](#number-of-results-alert-rules)**.</span></span> <span data-ttu-id="d0ee3-141">Если число записей, возвращенных в результатах поиска по журналам, превышает указанное количество, создается оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-141">Single alert created when the number records returned by the log search exceed a specified number.</span></span>
- <span data-ttu-id="d0ee3-142">**[Измерение метрик](#metric-measurement-alert-rules)**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-142">**[Metric measurement](#metric-measurement-alert-rules)**.</span></span>  <span data-ttu-id="d0ee3-143">Оповещение, созданное для каждого объекта в результатах поиска по журналам со значением, превышающим указанное пороговое значение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-143">Alert created for each object in the results of the log search with values that exceed specified threshold.</span></span>

<span data-ttu-id="d0ee3-144">Ниже приведены различия между типами правил генерации оповещений.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-144">The differences between alert rule types are as follows.</span></span>

- <span data-ttu-id="d0ee3-145">Правило генерации оповещений **Число результатов** всегда создает одно оповещение, а **Измерение метрик** — по одному для каждого объекта, для которого превышено пороговое значение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-145">**Number of results** alert rule will always create a single alert while **Metric measurement** alert rule creates an alert for each object that exceeds the threshold.</span></span>
- <span data-ttu-id="d0ee3-146">Правило генерации оповещений **Число результатов** создает оповещение при одноразовом превышении порогового значения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-146">**Number of results** alert rules create an alert when the threshold is exceeded a single time.</span></span> <span data-ttu-id="d0ee3-147">Правило генерации оповещений **Измерение метрик** может создавать оповещение при превышении порогового значения определенное количество раз за указанный интервал времени.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-147">**Metric measurement** alert rules can create an alert when the threshold is exceeded a certain number of times over a particular time interval.</span></span>

## <a name="number-of-results-alert-rules"></a><span data-ttu-id="d0ee3-148">Правило генерации оповещений "Число результатов"</span><span class="sxs-lookup"><span data-stu-id="d0ee3-148">Number of results alert rules</span></span>
<span data-ttu-id="d0ee3-149">Правила генерации оповещений **Число результатов** создают одно оповещение, если количество записей, возвращенных в результатах поискового запроса, превышает указанное пороговое значение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-149">**Number of results** alert rules create a single alert when the number of records returned by the search query exceed the specified threshold.</span></span>

### <a name="threshold"></a><span data-ttu-id="d0ee3-150">Threshold (Пороговое значение)</span><span class="sxs-lookup"><span data-stu-id="d0ee3-150">Threshold</span></span>
<span data-ttu-id="d0ee3-151">Под пороговым значением правила генерации оповещений **Число результатов** подразумевается значение, большее или меньшее чем определенное значение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-151">The threshold for a **Number of results** alert rule is simply greater than or less than a particular value.</span></span>  <span data-ttu-id="d0ee3-152">Если число записей, возвращенных в результатах поиска по журналам, соответствует этому критерию, создается оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-152">If the number of records returned by the log search match this criteria, then an alert is created.</span></span>

### <a name="scenarios"></a><span data-ttu-id="d0ee3-153">Сценарии</span><span class="sxs-lookup"><span data-stu-id="d0ee3-153">Scenarios</span></span>

#### <a name="events"></a><span data-ttu-id="d0ee3-154">События</span><span class="sxs-lookup"><span data-stu-id="d0ee3-154">Events</span></span>
<span data-ttu-id="d0ee3-155">Этот тип правила генерации оповещений идеально подходит для работы с такими событиями, как журналы событий Windows, системный журнал и настраиваемые журналы.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-155">This type of alert rule is ideal for working with events such as Windows event logs, Syslog, and Custom logs.</span></span>  <span data-ttu-id="d0ee3-156">Вам может потребоваться создать оповещение, когда создается конкретное событие ошибки или при создании нескольких событий ошибки в определенном временном окне.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-156">You may want to create an alert when a particular error event gets created, or when multiple error events are created within a particular time window.</span></span>

<span data-ttu-id="d0ee3-157">Для оповещения об одном событии задайте количество результатов больше 0, а частоту и временное окно установите равными 5 минутам.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-157">To alert on a single event, set the number of results to greater than 0 and both the frequency and time window to 5 minutes.</span></span>  <span data-ttu-id="d0ee3-158">При этом запрос выполняется каждые 5 минут и проверяет наличие одного события, созданного с момента последнего выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-158">That runs the query every 5 minutes and check for the occurrence of a single event that was created since the last time the query was run.</span></span>  <span data-ttu-id="d0ee3-159">Уменьшение частоты может привести к увеличению интервала между сбором данных о событии и созданием оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-159">A longer frequency may delay the time between the event being collected and the alert being created.</span></span>

<span data-ttu-id="d0ee3-160">Некоторые приложения могут вносить в журнал нерегулярную ошибку, которая не обязательно должна вызывать оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-160">Some applications may log an occasional error that shouldn't necessarily raise an alert.</span></span>  <span data-ttu-id="d0ee3-161">Например, приложение может повторно запустить процесс, который создал событие ошибки и затем успешно завершил работу при следующем выполнении.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-161">For example, the application may retry the process that created the error event and then succeed the next time.</span></span>  <span data-ttu-id="d0ee3-162">В этом случае вам может потребоваться создавать оповещение только в случае возникновения нескольких событий за определенное временное окно.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-162">In this case, you may not want to create the alert unless multiple events are created within a particular time window.</span></span>  

<span data-ttu-id="d0ee3-163">В некоторых случаях может потребоваться создать оповещение в случае отсутствия события.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-163">In some cases, you may want to create an alert in the absence of an event.</span></span>  <span data-ttu-id="d0ee3-164">Например, процесс может регистрировать регулярные события, чтобы указать, что он работает правильно.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-164">For example, a process may log regular events to indicate that it's working properly.</span></span>  <span data-ttu-id="d0ee3-165">Если он не регистрирует одно из таких событий в пределах определенного временного окна, следует создать оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-165">If it doesn't log one of these events within a particular time window, then an alert should be created.</span></span>  <span data-ttu-id="d0ee3-166">В этом случае задайте пороговое значение **Меньше 1**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-166">In this case you would set the threshold to **less than 1**.</span></span>

#### <a name="performance-alerts"></a><span data-ttu-id="d0ee3-167">Оповещения производительности</span><span class="sxs-lookup"><span data-stu-id="d0ee3-167">Performance alerts</span></span>
<span data-ttu-id="d0ee3-168">[Данные о производительности](log-analytics-data-sources-performance-counters.md) хранятся в виде записей в репозитории OMS по аналогии с событиями.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-168">[Performance data](log-analytics-data-sources-performance-counters.md) is stored as records in the OMS repository similar to events.</span></span>  <span data-ttu-id="d0ee3-169">Если вы хотите создать оповещение, когда значение счетчика производительности превышает определенный порог, это пороговое значение следует включить в запрос.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-169">If you want to alert when a performance counter exceeds a particular threshold, then that threshold should be included in the query.</span></span>

<span data-ttu-id="d0ee3-170">Например, если бы вам было нужно получать оповещения, когда процессор нагружен более чем на 90 %, то вы могли бы использовать запрос с пороговым значением для правила генерации оповещений **Больше 0**. Пример такого запроса приведен ниже.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-170">For example, if you wanted to alert when the processor runs over 90%, you would use a query like the following with the threshold for the alert rule **greater than 0**.</span></span>

    Type=Perf ObjectName=Processor CounterName="% Processor Time" CounterValue>90

<span data-ttu-id="d0ee3-171">Если бы вам было нужно получать оповещения, когда средняя нагрузка процессора превышает 90 % в определенном временном окне, то вы могли бы использовать запрос с [командой measure](log-analytics-search-reference.md#commands) и пороговым значением для правила генерации оповещений **Больше 0**. Ниже приведен пример такого запроса.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-171">If you wanted to alert when the processor averaged over 90% for a particular time window, you would use a query using the [measure command](log-analytics-search-reference.md#commands) like the following with the threshold for the alert rule **greater than 0**.</span></span>

    Type=Perf ObjectName=Processor CounterName="% Processor Time" | measure avg(CounterValue) by Computer | where AggregatedValue>90

>[!NOTE]
> <span data-ttu-id="d0ee3-172">Если для рабочей области обновлен [язык запросов Log Analytics](log-analytics-log-search-upgrade.md), указанные выше запросы будут изменены следующим образом: `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" and CounterValue>90`
> `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" | summarize avg(CounterValue) by Computer | where CounterValue>90`.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-172">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following: `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" and CounterValue>90`
> `Perf | where ObjectName=="Processor" and CounterName=="% Processor Time" | summarize avg(CounterValue) by Computer | where CounterValue>90`</span></span>


## <a name="metric-measurement-alert-rules"></a><span data-ttu-id="d0ee3-173">Metric measurement alert rules (Измерение метрики для правила генерации оповещений)</span><span class="sxs-lookup"><span data-stu-id="d0ee3-173">Metric measurement alert rules</span></span>

>[!NOTE]
> <span data-ttu-id="d0ee3-174">Сейчас правила генерации оповещений "Измерение метрик" находятся на этапе общедоступной предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-174">Metric measurement alert rules are currently in public preview.</span></span>

<span data-ttu-id="d0ee3-175">Правила генерации оповещений **Измерение метрик** создают оповещение для каждого объекта в запросе со значением, превышающим указанное пороговое значение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-175">**Metric measurement** alert rules create an alert for each object in a query with a value that exceeds a specified threshold.</span></span>  <span data-ttu-id="d0ee3-176">Ниже приведены их четко выраженные отличия от правил генерации оповещений **Число результатов**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-176">They have the following distinct differences from **Number of results** alert rules.</span></span>

#### <a name="log-search"></a><span data-ttu-id="d0ee3-177">Поиск по журналам</span><span class="sxs-lookup"><span data-stu-id="d0ee3-177">Log search</span></span>
<span data-ttu-id="d0ee3-178">Правило генерации оповещений **Число результатов** поддерживает все типы запросов, но в отношении запросов для правила "Измерение метрик" применяются определенные требования.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-178">While you can use any query for a **Number of results** alert rule, there are specific requirements the query for a metric measurement alert rule.</span></span>  <span data-ttu-id="d0ee3-179">Например, этот запрос должен содержать [команду measure](log-analytics-search-reference.md#commands), которая позволяет сгруппировать результаты по определенному полю.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-179">It must include a [Measure command](log-analytics-search-reference.md#commands) to group the results on a particular field.</span></span> <span data-ttu-id="d0ee3-180">Эта команда должна содержать следующие элементы.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-180">This command must include the following elements.</span></span>

- <span data-ttu-id="d0ee3-181">**Агрегатная функция**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-181">**Aggregate function**.</span></span>  <span data-ttu-id="d0ee3-182">Указывает выполняемые вычисления и (необязательно) числовое поле для статистических вычислений.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-182">Determines the calculation that is performed and potentially a numeric field to aggregate.</span></span>  <span data-ttu-id="d0ee3-183">Например, **count()** возвращает число записей в запросе, а **avg(CounterValue)** — среднее значение поля CounterValue в течение указанного интервала.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-183">For example, **count()** will return the number of records in the query, **avg(CounterValue)** will return the average of the CounterValue field over the interval.</span></span>
- <span data-ttu-id="d0ee3-184">**Группировка по полю**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-184">**Group Field**.</span></span>  <span data-ttu-id="d0ee3-185">Для каждого экземпляра этого поля будет создана запись с агрегированным значением, и для каждого из них можно создать оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-185">A record with an aggregated value is created for each instance of this field, and an alert can be generated for each.</span></span>  <span data-ttu-id="d0ee3-186">Например, если вы хотите создать оповещение для каждого компьютера, используйте группировку **по компьютерам**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-186">For example, if you wanted to generate an alert for each computer, you would use **by Computer**.</span></span>   
- <span data-ttu-id="d0ee3-187">**Интервал**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-187">**Interval**.</span></span>  <span data-ttu-id="d0ee3-188">Определяет интервал времени, в течение которого выполняется статистическое вычисление данных.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-188">Defines the time interval over which the data is aggregated.</span></span>  <span data-ttu-id="d0ee3-189">Например, если вы указали значение **5minutes**, запись будет создана для каждого экземпляра поля группировки, вычисленного с интервалом в 5 минут, за период времени, указанный для оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-189">For example, if you specified **5minutes**, a record would be created for each instance of the group field aggregated at 5 minute intervals over the time window specified for the alert.</span></span>

#### <a name="threshold"></a><span data-ttu-id="d0ee3-190">Threshold (Пороговое значение)</span><span class="sxs-lookup"><span data-stu-id="d0ee3-190">Threshold</span></span>
<span data-ttu-id="d0ee3-191">Пороговое значение для правил генерации оповещений "Измерение метрик" определяется на основе статического значения и числа нарушений.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-191">The threshold for Metric measurement alert rules is defined by an aggregate value and a number of breaches.</span></span>  <span data-ttu-id="d0ee3-192">Если любая точка данных в результатах поиска по журналам превышает это значение, она рассматривается как нарушение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-192">If any data point in the log search exceeds this value, it's considered a breach.</span></span>  <span data-ttu-id="d0ee3-193">Когда число нарушений в результатах для любого объекта превышает указанное значение, для этого объекта создается оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-193">If the number of breaches in for any object in the results exceeds the specified value, then an alert is created for that object.</span></span>

#### <a name="example"></a><span data-ttu-id="d0ee3-194">Пример</span><span class="sxs-lookup"><span data-stu-id="d0ee3-194">Example</span></span>
<span data-ttu-id="d0ee3-195">Рассмотрим ситуацию, где оповещение должно создаваться, когда использование процессора на компьютере превышает 90 % три раза в течение 30 минут.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-195">Consider a scenario where you wanted an alert if any computer exceeded processor utilization of 90% three times over 30 minutes.</span></span>  <span data-ttu-id="d0ee3-196">Вы должны создать правило генерации оповещений с приведенными ниже сведениями.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-196">You would create an alert rule with the following details.</span></span>  

<span data-ttu-id="d0ee3-197">**Запрос:** Type=Perf ObjectName=Processor CounterName="% Processor Time" | measure avg(CounterValue) by Computer Interval 5minute.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-197">**Query:** Type=Perf ObjectName=Processor CounterName="% Processor Time" | measure avg(CounterValue) by Computer Interval 5minute</span></span><br><span data-ttu-id="d0ee3-198">
**Временное окно:** 30 минут.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-198">
**Time window:** 30 minutes</span></span><br><span data-ttu-id="d0ee3-199">
**Периодичность предупреждений:** 5 минут.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-199">
**Alert frequency:** 5 minutes</span></span><br><span data-ttu-id="d0ee3-200">
**Объединенное значение:** больше 90.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-200">
**Aggregate value:** Great than 90</span></span><br><span data-ttu-id="d0ee3-201">
**Активировать оповещение на основе:** общее число нарушений превышает 5.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-201">
**Trigger alert based on:** Total breaches Greater than 5</span></span><br>

<span data-ttu-id="d0ee3-202">Запрос вернет среднее значение для каждого компьютера с интервалом в 5 минут.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-202">The query would create an average value for each computer at 5 minute intervals.</span></span>  <span data-ttu-id="d0ee3-203">Этот запрос выполняется каждые 5 минут для данных, собранных в течение предыдущих 30 минут.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-203">This query would be run every 5 minutes for data collected over the previous 30 minutes.</span></span>  <span data-ttu-id="d0ee3-204">Ниже приведен пример данных для трех компьютеров.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-204">Sample data is shown below for three computers.</span></span>

![Результаты выполнения примера запроса](media/log-analytics-alerts/metrics-measurement-sample-graph.png)

<span data-ttu-id="d0ee3-206">В этом примере отдельные оповещения создаются для компьютеров srv02 и srv03, так как за указанное временное окно они 3 раза превысили пороговое значение в 90 %.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-206">In this example, separate alerts would be created for srv02 and srv03 since they breached the 90% threshold 3 times over the time window.</span></span>  <span data-ttu-id="d0ee3-207">Если значение параметра **Активировать оповещение на основе:** изменить на **Consecutive** (Последовательные нарушения), тогда оповещение будет создано только для компьютера srv03, так как он превысил пороговое значение 3 раза подряд.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-207">If the **Trigger alert based on:** were changed to **Consecutive** then an alert would be created only for srv03 since it breached the threshold for 3 consecutive samples.</span></span>

## <a name="alert-records"></a><span data-ttu-id="d0ee3-208">Записи оповещений</span><span class="sxs-lookup"><span data-stu-id="d0ee3-208">Alert records</span></span>
<span data-ttu-id="d0ee3-209">Записи оповещений, созданные правилами генерации оповещений в Log Analytics, имеют значение **Alert** для **Type** и значение **OMS** для **SourceSystem**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-209">Alert records created by alert rules in Log Analytics have a **Type** of **Alert** and a **SourceSystem** of **OMS**.</span></span>  <span data-ttu-id="d0ee3-210">У них есть свойства, приведенные в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-210">They have the properties in the following table.</span></span>

| <span data-ttu-id="d0ee3-211">Свойство</span><span class="sxs-lookup"><span data-stu-id="d0ee3-211">Property</span></span> | <span data-ttu-id="d0ee3-212">Описание</span><span class="sxs-lookup"><span data-stu-id="d0ee3-212">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d0ee3-213">Тип</span><span class="sxs-lookup"><span data-stu-id="d0ee3-213">Type</span></span> |<span data-ttu-id="d0ee3-214">*Предупреждение*</span><span class="sxs-lookup"><span data-stu-id="d0ee3-214">*Alert*</span></span> |
| <span data-ttu-id="d0ee3-215">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="d0ee3-215">SourceSystem</span></span> |<span data-ttu-id="d0ee3-216">*OMS*</span><span class="sxs-lookup"><span data-stu-id="d0ee3-216">*OMS*</span></span> |
| <span data-ttu-id="d0ee3-217">*Объект*</span><span class="sxs-lookup"><span data-stu-id="d0ee3-217">*Object*</span></span>  | <span data-ttu-id="d0ee3-218">Оповещения [Измерение метрик](#metric-measurement-alert-rules) будут содержать свойство поля группировки.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-218">[Metric measurement alerts](#metric-measurement-alert-rules) will have a property for the group field.</span></span>  <span data-ttu-id="d0ee3-219">Например, если результаты поиска по журналам группируются по компьютерам, запись оповещения будет содержать поле Computer с именем компьютера в качестве значения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-219">For example, if the log search groups on Computer, the alert record with have a Computer field with the name of the computer as the value.</span></span>
| <span data-ttu-id="d0ee3-220">AlertName</span><span class="sxs-lookup"><span data-stu-id="d0ee3-220">AlertName</span></span> |<span data-ttu-id="d0ee3-221">Имя оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-221">Name of the alert.</span></span> |
| <span data-ttu-id="d0ee3-222">AlertSeverity</span><span class="sxs-lookup"><span data-stu-id="d0ee3-222">AlertSeverity</span></span> |<span data-ttu-id="d0ee3-223">Серьезность оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-223">Severity level of the alert.</span></span> |
| <span data-ttu-id="d0ee3-224">LinkToSearchResults</span><span class="sxs-lookup"><span data-stu-id="d0ee3-224">LinkToSearchResults</span></span> |<span data-ttu-id="d0ee3-225">Ссылки на поиск журналов Log Analytics, возвращающая записи из запроса, создавшего оповещение.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-225">Link to Log Analytics log search that returns the records from the query that created the alert.</span></span> |
| <span data-ttu-id="d0ee3-226">Запрос</span><span class="sxs-lookup"><span data-stu-id="d0ee3-226">Query</span></span> |<span data-ttu-id="d0ee3-227">Текст запроса, который был запущен.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-227">Text of the query that was run.</span></span> |
| <span data-ttu-id="d0ee3-228">QueryExecutionEndTime</span><span class="sxs-lookup"><span data-stu-id="d0ee3-228">QueryExecutionEndTime</span></span> |<span data-ttu-id="d0ee3-229">Конец диапазона времени для запроса.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-229">End of the time range for the query.</span></span> |
| <span data-ttu-id="d0ee3-230">QueryExecutionStartTime</span><span class="sxs-lookup"><span data-stu-id="d0ee3-230">QueryExecutionStartTime</span></span> |<span data-ttu-id="d0ee3-231">Начало диапазона времени для запроса.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-231">Start of the time range for the query.</span></span> |
| <span data-ttu-id="d0ee3-232">ThresholdOperator</span><span class="sxs-lookup"><span data-stu-id="d0ee3-232">ThresholdOperator</span></span> | <span data-ttu-id="d0ee3-233">Оператор, используемый правилом оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-233">Operator that was used by the alert rule.</span></span> |
| <span data-ttu-id="d0ee3-234">ThresholdValue</span><span class="sxs-lookup"><span data-stu-id="d0ee3-234">ThresholdValue</span></span> | <span data-ttu-id="d0ee3-235">Значение, используемое правилом оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-235">Value that was used by the alert rule.</span></span> |
| <span data-ttu-id="d0ee3-236">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="d0ee3-236">TimeGenerated</span></span> |<span data-ttu-id="d0ee3-237">Дата и время создания оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-237">Date and time the alert was created.</span></span> |

<span data-ttu-id="d0ee3-238">Существуют и другие виды записей оповещений, создаваемые [решением для управления оповещениями](log-analytics-solution-alert-management.md) и [экспортами Power BI](log-analytics-powerbi.md).</span><span class="sxs-lookup"><span data-stu-id="d0ee3-238">There are other kinds of alert records created by the [Alert Management solution](log-analytics-solution-alert-management.md) and by [Power BI exports](log-analytics-powerbi.md).</span></span>  <span data-ttu-id="d0ee3-239">Все они имеют значение **Alert** для **Type**, но различаются по **SourceSystem**.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-239">These all have a **Type** of **Alert** but are distinguished by their **SourceSystem**.</span></span>


## <a name="next-steps"></a><span data-ttu-id="d0ee3-240">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d0ee3-240">Next steps</span></span>
* <span data-ttu-id="d0ee3-241">Установите [решение для управления оповещениями](log-analytics-solution-alert-management.md), чтобы анализировать предупреждения, создаваемые в Log Analytics, вместе с оповещениями, полученными от System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-241">Install the [Alert Management solution](log-analytics-solution-alert-management.md) to analyze alerts created in Log Analytics along with alerts collected from System Center Operations Manager.</span></span>
* <span data-ttu-id="d0ee3-242">Вы можете ознакомиться с дополнительными сведениями о [поисках журналов](log-analytics-log-searches.md) , которые могут создавать оповещения.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-242">Read more about [log searches](log-analytics-log-searches.md) that can generate alerts.</span></span>
* <span data-ttu-id="d0ee3-243">Вы можете выполнить пошаговое руководство по [настройке webook](log-analytics-alerts-webhooks.md) с использованием правила генерации оповещений.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-243">Complete a walkthrough for [configuring a webook](log-analytics-alerts-webhooks.md) with an alert rule.</span></span>  
* <span data-ttu-id="d0ee3-244">Вы можете научиться писать [модули Runbook в службе автоматизации Azure](https://azure.microsoft.com/documentation/services/automation) для устранения проблем, обозначенных в оповещениях.</span><span class="sxs-lookup"><span data-stu-id="d0ee3-244">Learn how to write [runbooks in Azure Automation](https://azure.microsoft.com/documentation/services/automation) to remediate problems identified by alerts.</span></span>
