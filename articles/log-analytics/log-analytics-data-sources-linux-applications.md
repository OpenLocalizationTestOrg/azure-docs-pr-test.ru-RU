---
title: "Сбор данных производительности приложений Linux в OMS Log Analytics | Документы Майкрософт"
description: "В этой статье предоставлены подробные сведения о настройке сбора счетчиков производительности для MySQL и HTTP-сервера Apache."
services: log-analytics
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: f1d5bde4-6b86-4b8e-b5c1-3ecbaba76198
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/04/2017
ms.author: magoedte
ms.openlocfilehash: 04ea6f728e59ec8b47e54fe45e1adc6cbbfb85ff
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="collect-performance-counters-for-linux-applications-in-log-analytics"></a><span data-ttu-id="8cd17-103">Сбор данных производительности приложений Linux в Log Analytics</span><span class="sxs-lookup"><span data-stu-id="8cd17-103">Collect performance counters for Linux applications in Log Analytics</span></span> 
<span data-ttu-id="8cd17-104">В этой статье предоставлены подробные сведения о настройке сбора счетчиков производительности для конкретных приложений для [агента OMS для Linux](https://github.com/Microsoft/OMS-Agent-for-Linux).</span><span class="sxs-lookup"><span data-stu-id="8cd17-104">This article provides details for configuring the [OMS Agent for Linux](https://github.com/Microsoft/OMS-Agent-for-Linux) to collect performance counters for specific applications.</span></span>  <span data-ttu-id="8cd17-105">В статье используются следующие приложения:</span><span class="sxs-lookup"><span data-stu-id="8cd17-105">The applications included in this article are:</span></span>  

- [<span data-ttu-id="8cd17-106">MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-106">MySQL</span></span>](#MySQL)
- [<span data-ttu-id="8cd17-107">HTTP-сервер Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-107">Apache HTTP Server</span></span>](#apache-http-server)

## <a name="mysql"></a><span data-ttu-id="8cd17-108">MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-108">MySQL</span></span>
<span data-ttu-id="8cd17-109">Если при установке агента OMS на компьютере обнаружен сервер MySQL или MariaDB, будет автоматически установлен поставщик мониторинга производительности для сервера MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-109">If MySQL Server or MariaDB Server is detected on the computer when the OMS agent is installed, a performance monitoring provider for MySQL Server will be automatically installed.</span></span> <span data-ttu-id="8cd17-110">Этот поставщик подключается к локальному серверу MySQL или MariaDB, чтобы предоставить статистику производительности.</span><span class="sxs-lookup"><span data-stu-id="8cd17-110">This provider connects to the local MySQL/MariaDB server to expose performance statistics.</span></span> <span data-ttu-id="8cd17-111">Чтобы поставщик смог получить доступ к серверу MySQL, необходимо настроить учетные данные пользователя MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-111">MySQL user credentials must be configured so that the provider can access the MySQL Server.</span></span>

### <a name="configure-mysql-credentials"></a><span data-ttu-id="8cd17-112">Настройка учетных данных MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-112">Configure MySQL credentials</span></span>
<span data-ttu-id="8cd17-113">Для получения сведений о производительности и состоянии от экземпляра MySQL необходимо предварительно настроить пользователя MySQL для поставщика OMI MySQL и установить клиентские библиотеки MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-113">The MySQL OMI provider requires a preconfigured MySQL user and installed MySQL client libraries in order to query the performance and health information from the MySQL instance.</span></span>  <span data-ttu-id="8cd17-114">Эти учетные данные хранятся в файле проверки подлинности, размещенном на агенте Linux.</span><span class="sxs-lookup"><span data-stu-id="8cd17-114">These credentials are stored in an authentication file that's stored on the Linux agent.</span></span>  <span data-ttu-id="8cd17-115">В файле проверки подлинности задаются адрес привязки и порт, которые прослушивает экземпляр MySQL, а также учетные данные, которые используются для сбора метрик.</span><span class="sxs-lookup"><span data-stu-id="8cd17-115">The authentication file specifies what bind-address and port the MySQL instance is listening on and what credentials to use to gather metrics.</span></span>  

<span data-ttu-id="8cd17-116">Во время установки агента OMS для Linux поставщик OMI MySQL проверит файлы конфигурации MySQL my.cnf (в расположении по умолчанию), чтобы определить адрес привязки и порт, и запишет некоторые параметры в файл проверки подлинности OMI MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-116">During installation of the OMS Agent for Linux the MySQL OMI provider will scan MySQL my.cnf configuration files (default locations) for bind-address and port and partially set the MySQL OMI authentication file.</span></span>

<span data-ttu-id="8cd17-117">Файл проверки подлинности MySQL находится в папке `/var/opt/microsoft/mysql-cimprov/auth/omsagent/mysql-auth`.</span><span class="sxs-lookup"><span data-stu-id="8cd17-117">The MySQL authentication file is stored at `/var/opt/microsoft/mysql-cimprov/auth/omsagent/mysql-auth`.</span></span>


### <a name="authentication-file-format"></a><span data-ttu-id="8cd17-118">Формат файла аутентификации</span><span class="sxs-lookup"><span data-stu-id="8cd17-118">Authentication file format</span></span>
<span data-ttu-id="8cd17-119">Ниже описан формат файла проверки подлинности OMI MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-119">Following is the format for the MySQL OMI authentication file</span></span>

    [Port]=[Bind-Address], [username], [Base64 encoded Password]
    (Port)=(Bind-Address), (username), (Base64 encoded Password)
    (Port)=(Bind-Address), (username), (Base64 encoded Password)
    AutoUpdate=[true|false]

<span data-ttu-id="8cd17-120">Параметры файла проверки подлинности описаны в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="8cd17-120">The entries in the authentication file are described in the following table.</span></span>

| <span data-ttu-id="8cd17-121">Свойство</span><span class="sxs-lookup"><span data-stu-id="8cd17-121">Property</span></span> | <span data-ttu-id="8cd17-122">Описание</span><span class="sxs-lookup"><span data-stu-id="8cd17-122">Description</span></span> |
|:--|:--|
| <span data-ttu-id="8cd17-123">Порт</span><span class="sxs-lookup"><span data-stu-id="8cd17-123">Port</span></span> | <span data-ttu-id="8cd17-124">Представляет текущий порт, который прослушивает экземпляр MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-124">Represents the current port the MySQL instance is listening on.</span></span> <span data-ttu-id="8cd17-125">Порт 0 означает, что для экземпляра по умолчанию используются следующие свойства.</span><span class="sxs-lookup"><span data-stu-id="8cd17-125">Port 0 specifies that the properties following are used for default instance.</span></span> |
| <span data-ttu-id="8cd17-126">адрес привязки;</span><span class="sxs-lookup"><span data-stu-id="8cd17-126">Bind-Address</span></span>| <span data-ttu-id="8cd17-127">Текущий адрес привязки MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-127">Current MySQL bind-address.</span></span> |
| <span data-ttu-id="8cd17-128">Имя пользователя</span><span class="sxs-lookup"><span data-stu-id="8cd17-128">username</span></span>| <span data-ttu-id="8cd17-129">Пользователь MySQL, который используется мониторинга экземпляра сервера MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-129">MySQL user used to use to monitor the MySQL server instance.</span></span> |
| <span data-ttu-id="8cd17-130">пароль в кодировке Base64.</span><span class="sxs-lookup"><span data-stu-id="8cd17-130">Base64 encoded Password</span></span>| <span data-ttu-id="8cd17-131">Пароль пользователя, который используется для мониторинга MySQL, в кодировке Base64.</span><span class="sxs-lookup"><span data-stu-id="8cd17-131">Password of the MySQL monitoring user encoded in Base64.</span></span> |
| <span data-ttu-id="8cd17-132">Автоматическое обновление</span><span class="sxs-lookup"><span data-stu-id="8cd17-132">AutoUpdate</span></span>| <span data-ttu-id="8cd17-133">Указывает, нужно ли повторно выполнять поиск изменений в файле my.cnf и перезаписывать файл проверки подлинности OMI MySQL при обновлении поставщика OMI MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-133">Specifies whether to rescan for changes in the my.cnf file and overwrite the MySQL OMI Authentication file when the MySQL OMI Provider is upgraded.</span></span> |

### <a name="default-instance"></a><span data-ttu-id="8cd17-134">Экземпляр по умолчанию</span><span class="sxs-lookup"><span data-stu-id="8cd17-134">Default instance</span></span>
<span data-ttu-id="8cd17-135">В файле проверки подлинности OMI MySQL можно определить экземпляр и номер порта по умолчанию. Это позволит удобнее управлять несколькими экземплярами MySQL на одном узле Linux.</span><span class="sxs-lookup"><span data-stu-id="8cd17-135">The MySQL OMI authentication file can define a default instance and port number to make managing multiple MySQL instances on one Linux host easier.</span></span>  <span data-ttu-id="8cd17-136">В качестве экземпляра по умолчанию используется экземпляр с портом 0.</span><span class="sxs-lookup"><span data-stu-id="8cd17-136">The default instance is denoted by an instance with port 0.</span></span> <span data-ttu-id="8cd17-137">Все дополнительные экземпляры наследуют свойства экземпляра по умолчанию, если для них не заданы другие значения этих свойств.</span><span class="sxs-lookup"><span data-stu-id="8cd17-137">All additional instances will inherit properties set from the default instance unless they specify different values.</span></span> <span data-ttu-id="8cd17-138">Например, при добавлении экземпляра MySQL, который прослушивает порт 3308, для мониторинга этого экземпляра будет использоваться адрес привязки, имя пользователя и пароль в кодировке Base64 для экземпляра по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8cd17-138">For example, if MySQL instance listening on port ‘3308’ is added, the default instance’s bind-address, username, and Base64 encoded password will be used to try and monitor the instance listening on 3308.</span></span> <span data-ttu-id="8cd17-139">Если экземпляр, который прослушивает порт 3308, привязан к другому адресу и использует те же имя пользователя и пароль MySQL, необходимо указать только адрес привязки. Остальные свойства будут унаследованы.</span><span class="sxs-lookup"><span data-stu-id="8cd17-139">If the instance on 3308 is bound to another address and uses the same MySQL username and password pair only the bind-address is needed, and the other properties will be inherited.</span></span>

<span data-ttu-id="8cd17-140">В следующей таблице приведены примеры параметров экземпляра</span><span class="sxs-lookup"><span data-stu-id="8cd17-140">The following table has example instance settings</span></span> 

| <span data-ttu-id="8cd17-141">Описание</span><span class="sxs-lookup"><span data-stu-id="8cd17-141">Description</span></span> | <span data-ttu-id="8cd17-142">Файл</span><span class="sxs-lookup"><span data-stu-id="8cd17-142">File</span></span> |
|:--|:--|
| <span data-ttu-id="8cd17-143">Экземпляр по умолчанию и экземпляр с портом 3308.</span><span class="sxs-lookup"><span data-stu-id="8cd17-143">Default instance and instance with port 3308.</span></span> | `0=127.0.0.1, myuser, cnBwdA==`<br>`3308=, ,`<br>`AutoUpdate=true` |
| <span data-ttu-id="8cd17-144">Экземпляр по умолчанию и экземпляр с портом 3308 и другими именем пользователя и паролем.</span><span class="sxs-lookup"><span data-stu-id="8cd17-144">Default instance and instance with port 3308 and different user name and password.</span></span> | `0=127.0.0.1, myuser, cnBwdA==`<br>`3308=127.0.1.1, myuser2,cGluaGVhZA==`<br>`AutoUpdate=true` |


### <a name="mysql-omi-authentication-file-program"></a><span data-ttu-id="8cd17-145">Программа для изменения файла проверки подлинности OMI MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-145">MySQL OMI Authentication File Program</span></span>
<span data-ttu-id="8cd17-146">В состав поставщика OMI MySQL входит программа для изменения файла проверки подлинности OMI MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-146">Included with the installation of the MySQL OMI provider is a MySQL OMI authentication file program which can be used to edit the MySQL OMI Authentication file.</span></span> <span data-ttu-id="8cd17-147">Программа для изменения файла проверки подлинности находится в следующем каталоге.</span><span class="sxs-lookup"><span data-stu-id="8cd17-147">The authentication file program can be found at the following location.</span></span>

    /opt/microsoft/mysql-cimprov/bin/mycimprovauth

> [!NOTE]
> <span data-ttu-id="8cd17-148">Файл учетных данных должен быть доступен для чтения для учетной записи omsagent.</span><span class="sxs-lookup"><span data-stu-id="8cd17-148">The credentials file must be readable by the omsagent account.</span></span> <span data-ttu-id="8cd17-149">Рекомендуется выполнить команду mycimprovauth, используя учетную запись omsgent.</span><span class="sxs-lookup"><span data-stu-id="8cd17-149">Running the mycimprovauth command as omsgent is recommended.</span></span>

<span data-ttu-id="8cd17-150">В следующей таблице приведены сведения о синтаксисе mycimprovauth.</span><span class="sxs-lookup"><span data-stu-id="8cd17-150">The following table provides details on the syntax for using mycimprovauth.</span></span>

| <span data-ttu-id="8cd17-151">Операция</span><span class="sxs-lookup"><span data-stu-id="8cd17-151">Operation</span></span> | <span data-ttu-id="8cd17-152">Пример</span><span class="sxs-lookup"><span data-stu-id="8cd17-152">Example</span></span> | <span data-ttu-id="8cd17-153">Описание</span><span class="sxs-lookup"><span data-stu-id="8cd17-153">Description</span></span>
|:--|:--|:--|
| <span data-ttu-id="8cd17-154">autoupdate *false\\</span><span class="sxs-lookup"><span data-stu-id="8cd17-154">autoupdate *false\\</span></span>|<span data-ttu-id="8cd17-155">true*</span><span class="sxs-lookup"><span data-stu-id="8cd17-155">true*</span></span> | <span data-ttu-id="8cd17-156">mycimprovauth autoupdate false</span><span class="sxs-lookup"><span data-stu-id="8cd17-156">mycimprovauth autoupdate false</span></span> | <span data-ttu-id="8cd17-157">Устанавливает, следует ли автоматически обновлять файл проверки подлинности при перезапуске или обновлении.</span><span class="sxs-lookup"><span data-stu-id="8cd17-157">Sets whether or not the authentication file will be automatically updated on restart or update.</span></span> |
| <span data-ttu-id="8cd17-158">default *bind-address username password*</span><span class="sxs-lookup"><span data-stu-id="8cd17-158">default *bind-address username password*</span></span> | <span data-ttu-id="8cd17-159">mycimprovauth default 127.0.0.1 root pwd</span><span class="sxs-lookup"><span data-stu-id="8cd17-159">mycimprovauth default 127.0.0.1 root pwd</span></span> | <span data-ttu-id="8cd17-160">Задает экземпляр по умолчанию в файле проверки подлинности OMI MySQL.</span><span class="sxs-lookup"><span data-stu-id="8cd17-160">Sets the default instance in the MySQL OMI authentication file.</span></span><br><span data-ttu-id="8cd17-161">Пароль в поле пароля следует вводить в формате обычного текста, так как в файле проверки подлинности OMI MySQL он будет зашифрован в кодировке Base 64.</span><span class="sxs-lookup"><span data-stu-id="8cd17-161">The password field should be entered in plain text - the password in the MySQL OMI authentication file will be Base 64 encoded.</span></span> |
| <span data-ttu-id="8cd17-162">delete *default\\</span><span class="sxs-lookup"><span data-stu-id="8cd17-162">delete *default\\</span></span>|<span data-ttu-id="8cd17-163">port_num*</span><span class="sxs-lookup"><span data-stu-id="8cd17-163">port_num*</span></span> | <span data-ttu-id="8cd17-164">mycimprovauth 3308</span><span class="sxs-lookup"><span data-stu-id="8cd17-164">mycimprovauth 3308</span></span> | <span data-ttu-id="8cd17-165">Удаляет указанный экземпляр по умолчанию или удаляет экземпляр по номеру порта.</span><span class="sxs-lookup"><span data-stu-id="8cd17-165">Deletes the specified instance by either default or by port number.</span></span> |
| <span data-ttu-id="8cd17-166">help</span><span class="sxs-lookup"><span data-stu-id="8cd17-166">help</span></span> | <span data-ttu-id="8cd17-167">mycimprov help</span><span class="sxs-lookup"><span data-stu-id="8cd17-167">mycimprov help</span></span> | <span data-ttu-id="8cd17-168">Выводит список используемых команд.</span><span class="sxs-lookup"><span data-stu-id="8cd17-168">Prints out a list of commands to use.</span></span> |
| <span data-ttu-id="8cd17-169">print</span><span class="sxs-lookup"><span data-stu-id="8cd17-169">print</span></span> | <span data-ttu-id="8cd17-170">mycimprov print</span><span class="sxs-lookup"><span data-stu-id="8cd17-170">mycimprov print</span></span> | <span data-ttu-id="8cd17-171">Выводит содержимое файла проверки подлинности OMI MySQL в удобном формате.</span><span class="sxs-lookup"><span data-stu-id="8cd17-171">Prints out an easy to read MySQL OMI authentication file.</span></span> |
| <span data-ttu-id="8cd17-172">update port_num *bind-address username password*</span><span class="sxs-lookup"><span data-stu-id="8cd17-172">update port_num *bind-address username password*</span></span> | <span data-ttu-id="8cd17-173">mycimprov update 3307 127.0.0.1 root pwd</span><span class="sxs-lookup"><span data-stu-id="8cd17-173">mycimprov update 3307 127.0.0.1 root pwd</span></span> | <span data-ttu-id="8cd17-174">Обновляет указанный экземпляр или добавляет экземпляр, если его не существует.</span><span class="sxs-lookup"><span data-stu-id="8cd17-174">Updates the specified instance or adds the instance if it does not exist.</span></span> |

<span data-ttu-id="8cd17-175">С помощью команд в следующем примере определяется учетная запись пользователя по умолчанию для сервера MySQL на узле localhost.</span><span class="sxs-lookup"><span data-stu-id="8cd17-175">The following example commands define a default user account for the MySQL server on localhost.</span></span>  <span data-ttu-id="8cd17-176">Пароль в поле пароля следует вводить в формате обычного текста, так как в файле проверки подлинности OMI MySQL он будет зашифрован в кодировке Base 64.</span><span class="sxs-lookup"><span data-stu-id="8cd17-176">The password field should be entered in plain text - the password in the MySQL OMI authentication file will be Base 64 encoded</span></span>

    sudo su omsagent -c '/opt/microsoft/mysql-cimprov/bin/mycimprovauth default 127.0.0.1 <username> <password>'
    sudo /opt/omi/bin/service_control restart

### <a name="database-permissions-required-for-mysql-performance-counters"></a><span data-ttu-id="8cd17-177">Разрешения базы данных, необходимые для счетчиков производительности MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-177">Database Permissions Required for MySQL Performance Counters</span></span>
<span data-ttu-id="8cd17-178">Для сбора данных о производительности сервера MySQL у пользователя MySQL должен быть доступ к следующим запросам.</span><span class="sxs-lookup"><span data-stu-id="8cd17-178">The MySQL User requires access to the following queries to collect MySQL Server performance data.</span></span> 

    SHOW GLOBAL STATUS;
    SHOW GLOBAL VARIABLES:


<span data-ttu-id="8cd17-179">Пользователю MySQL также необходим доступ с разрешением SELECT для следующих таблиц по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8cd17-179">The MySQL user also requires SELECT access to the following default tables.</span></span>

- <span data-ttu-id="8cd17-180">information_schema;</span><span class="sxs-lookup"><span data-stu-id="8cd17-180">information_schema</span></span>
- <span data-ttu-id="8cd17-181">mysql.</span><span class="sxs-lookup"><span data-stu-id="8cd17-181">mysql.</span></span> 

<span data-ttu-id="8cd17-182">Эти привилегии можно предоставить, выполнив следующие команды:</span><span class="sxs-lookup"><span data-stu-id="8cd17-182">These privileges can be granted by running the following grant commands.</span></span>

    GRANT SELECT ON information_schema.* TO ‘monuser’@’localhost’;
    GRANT SELECT ON mysql.* TO ‘monuser’@’localhost’;


> [!NOTE]
> <span data-ttu-id="8cd17-183">Чтобы предоставить разрешения пользователю мониторинга MySQL, у пользователя, предоставляющего разрешения, должна быть привилегия с параметром GRANT, а также предоставляемая привилегия.</span><span class="sxs-lookup"><span data-stu-id="8cd17-183">To grant permissions to a MySQL monitoring user the granting user must have the ‘GRANT option’ privilege as well as the privilege being granted.</span></span>

### <a name="define-performance-counters"></a><span data-ttu-id="8cd17-184">Определение счетчиков производительности</span><span class="sxs-lookup"><span data-stu-id="8cd17-184">Define performance counters</span></span>

<span data-ttu-id="8cd17-185">После настройки отправки данных в Log Analytics для агента OMS для Linux необходимо настроить счетчики производительности для сбора данных.</span><span class="sxs-lookup"><span data-stu-id="8cd17-185">Once you configure the OMS Agent for Linux to send data to Log Analytics, you must configure the performance counters to collect.</span></span>  <span data-ttu-id="8cd17-186">Для счетчиков, описанных в следующей таблице, используйте процедуру, описанную в разделе [Источники данных о производительности Windows и Linux в Log Analytics](log-analytics-data-sources-windows-events.md).</span><span class="sxs-lookup"><span data-stu-id="8cd17-186">Use the procedure in [Windows and Linux performance data sources in Log Analytics](log-analytics-data-sources-windows-events.md) with the counters in the following table.</span></span>

| <span data-ttu-id="8cd17-187">Имя объекта</span><span class="sxs-lookup"><span data-stu-id="8cd17-187">Object Name</span></span> | <span data-ttu-id="8cd17-188">Имя счетчика</span><span class="sxs-lookup"><span data-stu-id="8cd17-188">Counter Name</span></span> |
|:--|:--|
| <span data-ttu-id="8cd17-189">База данных MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-189">MySQL Database</span></span> | <span data-ttu-id="8cd17-190">Дисковое пространство в байтах</span><span class="sxs-lookup"><span data-stu-id="8cd17-190">Disk Space in Bytes</span></span> |
| <span data-ttu-id="8cd17-191">База данных MySQL</span><span class="sxs-lookup"><span data-stu-id="8cd17-191">MySQL Database</span></span> | <span data-ttu-id="8cd17-192">Таблицы</span><span class="sxs-lookup"><span data-stu-id="8cd17-192">Tables</span></span> |
| <span data-ttu-id="8cd17-193">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-193">MySQL Server</span></span> | <span data-ttu-id="8cd17-194">Счетчик производительности "Прерванные подключения"</span><span class="sxs-lookup"><span data-stu-id="8cd17-194">Aborted Connection Pct</span></span> |
| <span data-ttu-id="8cd17-195">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-195">MySQL Server</span></span> | <span data-ttu-id="8cd17-196">Счетчик производительности "Использование подключения"</span><span class="sxs-lookup"><span data-stu-id="8cd17-196">Connection Use Pct</span></span> |
| <span data-ttu-id="8cd17-197">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-197">MySQL Server</span></span> | <span data-ttu-id="8cd17-198">Используемое дисковое пространство в байтах</span><span class="sxs-lookup"><span data-stu-id="8cd17-198">Disk Space Use in Bytes</span></span> |
| <span data-ttu-id="8cd17-199">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-199">MySQL Server</span></span> | <span data-ttu-id="8cd17-200">Счетчик производительности "Сканирование всей таблицы"</span><span class="sxs-lookup"><span data-stu-id="8cd17-200">Full Table Scan Pct</span></span> |
| <span data-ttu-id="8cd17-201">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-201">MySQL Server</span></span> | <span data-ttu-id="8cd17-202">Счетчик производительности "Попадания в буферный пул InnoDB"</span><span class="sxs-lookup"><span data-stu-id="8cd17-202">InnoDB Buffer Pool Hit Pct</span></span> |
| <span data-ttu-id="8cd17-203">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-203">MySQL Server</span></span> | <span data-ttu-id="8cd17-204">Счетчик производительности "Использование буферного пула InnoDB"</span><span class="sxs-lookup"><span data-stu-id="8cd17-204">InnoDB Buffer Pool Use Pct</span></span> |
| <span data-ttu-id="8cd17-205">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-205">MySQL Server</span></span> | <span data-ttu-id="8cd17-206">Счетчик производительности "Использование буферного пула InnoDB"</span><span class="sxs-lookup"><span data-stu-id="8cd17-206">InnoDB Buffer Pool Use Pct</span></span> |
| <span data-ttu-id="8cd17-207">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-207">MySQL Server</span></span> | <span data-ttu-id="8cd17-208">Счетчик производительности "Попадания в кэш ключей"</span><span class="sxs-lookup"><span data-stu-id="8cd17-208">Key Cache Hit Pct</span></span> |
| <span data-ttu-id="8cd17-209">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-209">MySQL Server</span></span> | <span data-ttu-id="8cd17-210">Счетчик производительности "Использование кэша ключей"</span><span class="sxs-lookup"><span data-stu-id="8cd17-210">Key Cache Use Pct</span></span> |
| <span data-ttu-id="8cd17-211">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-211">MySQL Server</span></span> | <span data-ttu-id="8cd17-212">Счетчик производительности "Запись в кэш ключей"</span><span class="sxs-lookup"><span data-stu-id="8cd17-212">Key Cache Write Pct</span></span> |
| <span data-ttu-id="8cd17-213">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-213">MySQL Server</span></span> | <span data-ttu-id="8cd17-214">Счетчик производительности "Попадания в кэш запросов"</span><span class="sxs-lookup"><span data-stu-id="8cd17-214">Query Cache Hit Pct</span></span> |
| <span data-ttu-id="8cd17-215">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-215">MySQL Server</span></span> | <span data-ttu-id="8cd17-216">Счетчик производительности "Очистка кэша запросов"</span><span class="sxs-lookup"><span data-stu-id="8cd17-216">Query Cache Prunes Pct</span></span> |
| <span data-ttu-id="8cd17-217">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-217">MySQL Server</span></span> | <span data-ttu-id="8cd17-218">Счетчик производительности "Использование кэша запросов"</span><span class="sxs-lookup"><span data-stu-id="8cd17-218">Query Cache Use Pct</span></span> |
| <span data-ttu-id="8cd17-219">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-219">MySQL Server</span></span> | <span data-ttu-id="8cd17-220">Счетчик производительности "Попадания в кэш таблиц"</span><span class="sxs-lookup"><span data-stu-id="8cd17-220">Table Cache Hit Pct</span></span> |
| <span data-ttu-id="8cd17-221">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-221">MySQL Server</span></span> | <span data-ttu-id="8cd17-222">Счетчик производительности "Использование кэша таблиц"</span><span class="sxs-lookup"><span data-stu-id="8cd17-222">Table Cache Use Pct</span></span> |
| <span data-ttu-id="8cd17-223">MySQL Server</span><span class="sxs-lookup"><span data-stu-id="8cd17-223">MySQL Server</span></span> | <span data-ttu-id="8cd17-224">Счетчик производительности "Блокировка подключения к таблице"</span><span class="sxs-lookup"><span data-stu-id="8cd17-224">Table Lock Contention Pct</span></span> |

## <a name="apache-http-server"></a><span data-ttu-id="8cd17-225">HTTP-сервер Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-225">Apache HTTP Server</span></span> 
<span data-ttu-id="8cd17-226">Если при установке пакета omsagent на компьютере обнаружен HTTP-сервер Apache, будет автоматически установлен поставщик мониторинга производительности для HTTP-сервера Apache.</span><span class="sxs-lookup"><span data-stu-id="8cd17-226">If Apache HTTP Server is detected on the computer when the omsagent bundle is installed, a performance monitoring provider for Apache HTTP Server will be automatically installed.</span></span> <span data-ttu-id="8cd17-227">Для доступа к данным производительности этот поставщик использует модуль Apache, который необходимо загрузить на HTTP-сервер Apache.</span><span class="sxs-lookup"><span data-stu-id="8cd17-227">This provider relies on an Apache module that must be loaded into the Apache HTTP Server in order to access performance data.</span></span> <span data-ttu-id="8cd17-228">Этот модуль можно загрузить с помощью следующей команды:</span><span class="sxs-lookup"><span data-stu-id="8cd17-228">The module can be loaded with the following command:</span></span>
```
sudo /opt/microsoft/apache-cimprov/bin/apache_config.sh -c
```

<span data-ttu-id="8cd17-229">Чтобы выгрузить модуль мониторинга Apache, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="8cd17-229">To unload the Apache monitoring module, run the following command:</span></span>
```
sudo /opt/microsoft/apache-cimprov/bin/apache_config.sh -u
```

### <a name="define-performance-counters"></a><span data-ttu-id="8cd17-230">Определение счетчиков производительности</span><span class="sxs-lookup"><span data-stu-id="8cd17-230">Define performance counters</span></span>

<span data-ttu-id="8cd17-231">После настройки отправки данных в Log Analytics для агента OMS для Linux необходимо настроить счетчики производительности для сбора данных.</span><span class="sxs-lookup"><span data-stu-id="8cd17-231">Once you configure the OMS Agent for Linux to send data to Log Analytics, you must configure the performance counters to collect.</span></span>  <span data-ttu-id="8cd17-232">Для счетчиков, описанных в следующей таблице, используйте процедуру, описанную в разделе [Источники данных о производительности Windows и Linux в Log Analytics](log-analytics-data-sources-windows-events.md).</span><span class="sxs-lookup"><span data-stu-id="8cd17-232">Use the procedure in [Windows and Linux performance data sources in Log Analytics](log-analytics-data-sources-windows-events.md) with the counters in the following table.</span></span>

| <span data-ttu-id="8cd17-233">Имя объекта</span><span class="sxs-lookup"><span data-stu-id="8cd17-233">Object Name</span></span> | <span data-ttu-id="8cd17-234">Имя счетчика</span><span class="sxs-lookup"><span data-stu-id="8cd17-234">Counter Name</span></span> |
|:--|:--|
| <span data-ttu-id="8cd17-235">HTTP-сервер Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-235">Apache HTTP Server</span></span> | <span data-ttu-id="8cd17-236">Занятые рабочие роли</span><span class="sxs-lookup"><span data-stu-id="8cd17-236">Busy Workers</span></span> |
| <span data-ttu-id="8cd17-237">HTTP-сервер Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-237">Apache HTTP Server</span></span> | <span data-ttu-id="8cd17-238">Бездействующие рабочие роли</span><span class="sxs-lookup"><span data-stu-id="8cd17-238">Idle Workers</span></span> |
| <span data-ttu-id="8cd17-239">HTTP-сервер Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-239">Apache HTTP Server</span></span> | <span data-ttu-id="8cd17-240">Счетчик производительности "Занятые рабочие роли"</span><span class="sxs-lookup"><span data-stu-id="8cd17-240">Pct Busy Workers</span></span> |
| <span data-ttu-id="8cd17-241">HTTP-сервер Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-241">Apache HTTP Server</span></span> | <span data-ttu-id="8cd17-242">Счетчик производительности "Общее использование ЦП"</span><span class="sxs-lookup"><span data-stu-id="8cd17-242">Total Pct CPU</span></span> |
| <span data-ttu-id="8cd17-243">Виртуальный узел Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-243">Apache Virtual Host</span></span> | <span data-ttu-id="8cd17-244">Ошибок в минуту (клиент)</span><span class="sxs-lookup"><span data-stu-id="8cd17-244">Errors per Minute - Client</span></span> |
| <span data-ttu-id="8cd17-245">Виртуальный узел Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-245">Apache Virtual Host</span></span> | <span data-ttu-id="8cd17-246">Ошибок в минуту (сервер)</span><span class="sxs-lookup"><span data-stu-id="8cd17-246">Errors per Minute - Server</span></span> |
| <span data-ttu-id="8cd17-247">Виртуальный узел Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-247">Apache Virtual Host</span></span> | <span data-ttu-id="8cd17-248">КБ на запрос</span><span class="sxs-lookup"><span data-stu-id="8cd17-248">KB per Request</span></span> |
| <span data-ttu-id="8cd17-249">Виртуальный узел Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-249">Apache Virtual Host</span></span> | <span data-ttu-id="8cd17-250">КБ в запросах в секунду</span><span class="sxs-lookup"><span data-stu-id="8cd17-250">Requests KB per Second</span></span> |
| <span data-ttu-id="8cd17-251">Виртуальный узел Apache</span><span class="sxs-lookup"><span data-stu-id="8cd17-251">Apache Virtual Host</span></span> | <span data-ttu-id="8cd17-252">Запросов в секунду</span><span class="sxs-lookup"><span data-stu-id="8cd17-252">Requests per Second</span></span> |



## <a name="next-steps"></a><span data-ttu-id="8cd17-253">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="8cd17-253">Next steps</span></span>
* <span data-ttu-id="8cd17-254">[Сбор счетчиков производительности](log-analytics-data-sources-performance-counters.md) с агентов Linux.</span><span class="sxs-lookup"><span data-stu-id="8cd17-254">[Collect performance counters](log-analytics-data-sources-performance-counters.md) from Linux agents.</span></span>
* <span data-ttu-id="8cd17-255">Узнайте больше об [операциях поиска по журналу](log-analytics-log-searches.md) , которые можно применять для анализа данных, собираемых из источников данных и решений.</span><span class="sxs-lookup"><span data-stu-id="8cd17-255">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span> 