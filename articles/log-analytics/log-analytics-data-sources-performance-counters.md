---
title: "Сбор и анализ данных счетчиков производительности в Azure Log Analytics | Документация Майкрософт"
description: "Счетчики производительности собираются службой Log Analytics для анализа производительности в агентах Windows и Linux.  В этой статье описывается настройка коллекции счетчиков производительности для агентов Windows и Linux, сведения об этих счетчиках, которые хранятся в репозитории OMS, и их анализ на портале OMS."
services: log-analytics
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 20e145e4-2ace-4cd9-b252-71fb4f94099e
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/12/2017
ms.author: magoedte
ms.openlocfilehash: 953bb453b0a9635627fbbb6c3913d0cd757101c7
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="windows-and-linux-performance-data-sources-in-log-analytics"></a><span data-ttu-id="952a9-104">Источники данных о производительности Windows и Linux в Log Analytics</span><span class="sxs-lookup"><span data-stu-id="952a9-104">Windows and Linux performance data sources in Log Analytics</span></span>
<span data-ttu-id="952a9-105">Счетчики производительности в Windows и Linux позволяют получить представление о производительности компонентов оборудования, операционных систем и приложений.</span><span class="sxs-lookup"><span data-stu-id="952a9-105">Performance counters in Windows and Linux provide insight into the performance of hardware components, operating systems, and applications.</span></span>  <span data-ttu-id="952a9-106">Log Analytics может собирать счетчики производительности с высокой частотой для анализа данных практически в режиме реального времени, а также данные о производительности для более долгосрочного анализа и формирования отчетов.</span><span class="sxs-lookup"><span data-stu-id="952a9-106">Log Analytics can collect performance counters at frequent intervals for Near Real Time (NRT) analysis in addition to aggregating performance data for longer term analysis and reporting.</span></span>

![Счетчики производительности](media/log-analytics-data-sources-performance-counters/overview.png)

## <a name="configuring-performance-counters"></a><span data-ttu-id="952a9-108">Настройка счетчиков производительности</span><span class="sxs-lookup"><span data-stu-id="952a9-108">Configuring Performance counters</span></span>
<span data-ttu-id="952a9-109">Счетчики производительности настраиваются на портале OMS в [меню "Данные" раздела "Параметры" Log Analytics](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="952a9-109">Configure  Performance counters in the OMS portal from the [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>

<span data-ttu-id="952a9-110">При первой настройке счетчиков производительности Windows или Linux для новой рабочей области OMS вы можете быстро создать несколько распространенных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="952a9-110">When you first configure Windows or Linux Performance counters for a new OMS workspace, you are given the option to quickly create several common counters.</span></span>  <span data-ttu-id="952a9-111">Рядом с каждым счетчиком в списке есть флажок.</span><span class="sxs-lookup"><span data-stu-id="952a9-111">They are listed with a checkbox next to each.</span></span>  <span data-ttu-id="952a9-112">Отметьте все счетчики, которые нужно создать изначально, и щелкните ссылку **Добавить выбранные счетчики производительности**.</span><span class="sxs-lookup"><span data-stu-id="952a9-112">Ensure that any counters you want to initially create are checked and then click **Add the selected performance counters**.</span></span>

<span data-ttu-id="952a9-113">Для каждого счетчика производительности Windows можно выбрать конкретный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="952a9-113">For Windows performance counters, you can choose a specific instance for each performance counter.</span></span> <span data-ttu-id="952a9-114">В случае счетчиков производительности Linux экземпляр выбранного счетчика применяется ко всем дочерним счетчикам родительского счетчика.</span><span class="sxs-lookup"><span data-stu-id="952a9-114">For Linux performance counters, the instance of each counter that you choose applies to all child counters of the parent counter.</span></span> <span data-ttu-id="952a9-115">В следующей таблице представлены распространенные экземпляры для счетчиков производительности Linux и Windows.</span><span class="sxs-lookup"><span data-stu-id="952a9-115">The following table shows the common instances available to both Linux and Windows performance counters.</span></span>

| <span data-ttu-id="952a9-116">Имя экземпляра</span><span class="sxs-lookup"><span data-stu-id="952a9-116">Instance name</span></span> | <span data-ttu-id="952a9-117">Описание</span><span class="sxs-lookup"><span data-stu-id="952a9-117">Description</span></span> |
| --- | --- |
| <span data-ttu-id="952a9-118">\_Total</span><span class="sxs-lookup"><span data-stu-id="952a9-118">\_Total</span></span> |<span data-ttu-id="952a9-119">Общее количество всех экземпляров</span><span class="sxs-lookup"><span data-stu-id="952a9-119">Total of all the instances</span></span> |
| \* |<span data-ttu-id="952a9-120">Все экземпляры</span><span class="sxs-lookup"><span data-stu-id="952a9-120">All instances</span></span> |
| <span data-ttu-id="952a9-121">(/&#124;/var)</span><span class="sxs-lookup"><span data-stu-id="952a9-121">(/&#124;/var)</span></span> |<span data-ttu-id="952a9-122">Сопоставление экземпляров с именем / или/var</span><span class="sxs-lookup"><span data-stu-id="952a9-122">Matches instances named: / or /var</span></span> |

### <a name="windows-performance-counters"></a><span data-ttu-id="952a9-123">Счетчики производительности Windows</span><span class="sxs-lookup"><span data-stu-id="952a9-123">Windows performance counters</span></span>

![Настройка счетчиков производительности Windows](media/log-analytics-data-sources-performance-counters/configure-windows.png)

<span data-ttu-id="952a9-125">Чтобы добавить новый счетчик производительности Windows для сбора данных, выполните описанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="952a9-125">Follow this procedure to add a new Windows performance counter to collect.</span></span>

1. <span data-ttu-id="952a9-126">Введите в текстовое поле имя счетчика в формате *объект(экземпляр)\счетчик*.</span><span class="sxs-lookup"><span data-stu-id="952a9-126">Type the name of the counter in the text box in the format *object(instance)\counter*.</span></span>  <span data-ttu-id="952a9-127">По мере ввода вы увидите соответствующий список распространенных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="952a9-127">When you start typing, you are presented with a matching list of common counters.</span></span>  <span data-ttu-id="952a9-128">Выберите счетчик из списка или введите собственный.</span><span class="sxs-lookup"><span data-stu-id="952a9-128">You can either select a counter from the list or type in one of your own.</span></span>  <span data-ttu-id="952a9-129">Кроме того, вы можете получить все экземпляры определенного счетчика, указав *объект\счетчик*.</span><span class="sxs-lookup"><span data-stu-id="952a9-129">You can also return all instances for a particular counter by specifying *object\counter*.</span></span>  

    <span data-ttu-id="952a9-130">При сборе данных счетчиков производительности SQL Server из именованных экземпляров имена всех этих счетчиков начинаются с *MSSQL$*, после чего следует имя экземпляра.</span><span class="sxs-lookup"><span data-stu-id="952a9-130">When collecting SQL Server performance counters from named instances, all named instance counters start with *MSSQL$* and followed by the name of the instance.</span></span>  <span data-ttu-id="952a9-131">Например, чтобы собрать показатели счетчика "Коэффициент попаданий в кэш журнала" для всех баз данных из объекта производительности базы данных для экземпляра SQL (INST2), укажите `MSSQL$INST2:Databases(*)\Log Cache Hit Ratio`.</span><span class="sxs-lookup"><span data-stu-id="952a9-131">For example, to collect the Log Cache Hit Ratio counter for all databases from the Database performance object for named SQL instance INST2, specify `MSSQL$INST2:Databases(*)\Log Cache Hit Ratio`.</span></span>

2. <span data-ttu-id="952a9-132">Щелкните **+** или нажмите клавишу **ВВОД**, чтобы добавить счетчик в список.</span><span class="sxs-lookup"><span data-stu-id="952a9-132">Click **+** or press **Enter** to add the counter to the list.</span></span>
3. <span data-ttu-id="952a9-133">При добавлении счетчика по умолчанию устанавливается **интервал выборки** 10 секунд.</span><span class="sxs-lookup"><span data-stu-id="952a9-133">When you add a counter, it uses the default of 10 seconds for its **Sample Interval**.</span></span>  <span data-ttu-id="952a9-134">Вы можете увеличить это значение до 1800 секунд (30 минут), уменьшив таким образом объем собираемых данных по производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-134">You can change this to a higher value of up to 1800 seconds (30 minutes) if you want to reduce the storage requirements of the collected performance data.</span></span>
4. <span data-ttu-id="952a9-135">Закончив добавление счетчиков, нажмите кнопку **Сохранить** в верхней части экрана, чтобы сохранить конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="952a9-135">When you're done adding counters, click the **Save** button at the top of the screen to save the configuration.</span></span>

### <a name="linux-performance-counters"></a><span data-ttu-id="952a9-136">Счетчики производительности Linux</span><span class="sxs-lookup"><span data-stu-id="952a9-136">Linux performance counters</span></span>

![Настройка счетчиков производительности Linux](media/log-analytics-data-sources-performance-counters/configure-linux.png)

<span data-ttu-id="952a9-138">Чтобы добавить новый счетчик производительности Linux для сбора данных, выполните описанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="952a9-138">Follow this procedure to add a new Linux performance counter to collect.</span></span>

1. <span data-ttu-id="952a9-139">По умолчанию все изменения конфигурации автоматически отправляются во все агенты.</span><span class="sxs-lookup"><span data-stu-id="952a9-139">By default, all configuration changes are automatically pushed to all agents.</span></span>  <span data-ttu-id="952a9-140">Файл конфигурации агентов Linux отправляется в сборщик данных Fluentd.</span><span class="sxs-lookup"><span data-stu-id="952a9-140">For Linux agents, a configuration file is sent to the Fluentd data collector.</span></span>  <span data-ttu-id="952a9-141">Если вы хотите изменить этот файл вручную в каждом агенте Linux, снимите флажок *Применить указанную ниже конфигурацию к моим компьютерам Linux* и следуйте приведенным ниже указаниям.</span><span class="sxs-lookup"><span data-stu-id="952a9-141">If you wish to modify this file manually on each Linux agent, then uncheck the box *Apply below configuration to my Linux machines* and follow the guidance below.</span></span>
2. <span data-ttu-id="952a9-142">Введите в текстовое поле имя счетчика в формате *объект(экземпляр)\счетчик*.</span><span class="sxs-lookup"><span data-stu-id="952a9-142">Type the name of the counter in the text box in the format *object(instance)\counter*.</span></span>  <span data-ttu-id="952a9-143">По мере ввода вы увидите соответствующий список распространенных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="952a9-143">When you start typing, you are presented with a matching list of common counters.</span></span>  <span data-ttu-id="952a9-144">Выберите счетчик из списка или введите собственный.</span><span class="sxs-lookup"><span data-stu-id="952a9-144">You can either select a counter from the list or type in one of your own.</span></span>  
3. <span data-ttu-id="952a9-145">Щелкните **+** или нажмите клавишу **ВВОД**, чтобы добавить счетчик к списку других счетчиков для объекта.</span><span class="sxs-lookup"><span data-stu-id="952a9-145">Click **+** or press **Enter** to add the counter to the list of other counters for the object.</span></span>
4. <span data-ttu-id="952a9-146">Для всех счетчиков объекта используется один и тот же **интервал выборки**.</span><span class="sxs-lookup"><span data-stu-id="952a9-146">All counters for an object use the same **Sample Interval**.</span></span>  <span data-ttu-id="952a9-147">По умолчанию это 10 секунд.</span><span class="sxs-lookup"><span data-stu-id="952a9-147">The default is 10 seconds.</span></span>  <span data-ttu-id="952a9-148">Вы можете увеличить значение интервала вплоть до 1800 секунд (30 минут), что позволит снизить для хранилища требования к собираемым данным о производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-148">You change this to a higher value of up to 1800 seconds (30 minutes) if you want to reduce the storage requirements of the collected performance data.</span></span>
5. <span data-ttu-id="952a9-149">Закончив добавление счетчиков, нажмите кнопку **Сохранить** в верхней части экрана, чтобы сохранить конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="952a9-149">When you're done adding counters, click the **Save** button at the top of the screen to save the configuration.</span></span>

#### <a name="configure-linux-performance-counters-in-configuration-file"></a><span data-ttu-id="952a9-150">Настройка счетчиков производительности Linux в файле конфигурации</span><span class="sxs-lookup"><span data-stu-id="952a9-150">Configure Linux performance counters in configuration file</span></span>
<span data-ttu-id="952a9-151">Вместо настройки счетчиков производительности Linux с помощью портала OMS можно отредактировать файлы конфигурации на агенте Linux.</span><span class="sxs-lookup"><span data-stu-id="952a9-151">Instead of configuring Linux performance counters using the OMS portal, you have the option of editing configuration files on the Linux agent.</span></span>  <span data-ttu-id="952a9-152">Собираемые метрики производительности определяются конфигурацией в файле **/etc/opt/microsoft/omsagent/\<ИД_рабочей_области\>/conf/omsagent.conf**.</span><span class="sxs-lookup"><span data-stu-id="952a9-152">Performance metrics to collect are controlled by the configuration in **/etc/opt/microsoft/omsagent/\<workspace id\>/conf/omsagent.conf**.</span></span>

<span data-ttu-id="952a9-153">Каждый объект или категорию метрики производительности для сбора следует определить в файле конфигурации в качестве одного элемента `<source>` .</span><span class="sxs-lookup"><span data-stu-id="952a9-153">Each object, or category, of performance metrics to collect should be defined in the configuration file as a single `<source>` element.</span></span> <span data-ttu-id="952a9-154">Синтаксис соответствует шаблону ниже.</span><span class="sxs-lookup"><span data-stu-id="952a9-154">The syntax follows the pattern below.</span></span>

    <source>
      type oms_omi  
      object_name "Processor"
      instance_regex ".*"
      counter_name_regex ".*"
      interval 30s
    </source>


<span data-ttu-id="952a9-155">В следующей таблице описаны параметры, используемые в этом элементе.</span><span class="sxs-lookup"><span data-stu-id="952a9-155">The parameters in this element are described in the following table.</span></span>

| <span data-ttu-id="952a9-156">Параметры</span><span class="sxs-lookup"><span data-stu-id="952a9-156">Parameters</span></span> | <span data-ttu-id="952a9-157">Описание</span><span class="sxs-lookup"><span data-stu-id="952a9-157">Description</span></span> |
|:--|:--|
| <span data-ttu-id="952a9-158">object\_name</span><span class="sxs-lookup"><span data-stu-id="952a9-158">object\_name</span></span> | <span data-ttu-id="952a9-159">Имя объекта в коллекции.</span><span class="sxs-lookup"><span data-stu-id="952a9-159">Object name for the collection.</span></span> |
| <span data-ttu-id="952a9-160">instance\_regex</span><span class="sxs-lookup"><span data-stu-id="952a9-160">instance\_regex</span></span> |  <span data-ttu-id="952a9-161">*Регулярное выражение*, определяющее экземпляры, которые следует собирать.</span><span class="sxs-lookup"><span data-stu-id="952a9-161">A *regular expression* defining which instances to collect.</span></span> <span data-ttu-id="952a9-162">Значение `.*` указывает все экземпляры.</span><span class="sxs-lookup"><span data-stu-id="952a9-162">The value: `.*` specifies all instances.</span></span> <span data-ttu-id="952a9-163">Для сбора метрик процессора только для экземпляра \_Total можно указать `_Total`.</span><span class="sxs-lookup"><span data-stu-id="952a9-163">To collect processor metrics for only the \_Total instance, you could specify `_Total`.</span></span> <span data-ttu-id="952a9-164">Для сбора метрик обработки только для экземпляра crond или sshd можно указать (crond\\</span><span class="sxs-lookup"><span data-stu-id="952a9-164">To collect process metrics for only the crond or sshd instances, you could specify: `(crond\\</span></span>|<span data-ttu-id="952a9-165">sshd).</span><span class="sxs-lookup"><span data-stu-id="952a9-165">sshd)\`.</span></span> |
| <span data-ttu-id="952a9-166">counter\_name\_regex</span><span class="sxs-lookup"><span data-stu-id="952a9-166">counter\_name\_regex</span></span> | <span data-ttu-id="952a9-167">*Регулярное выражение*, определяющее счетчики (для объекта), которые следует собирать.</span><span class="sxs-lookup"><span data-stu-id="952a9-167">A *regular expression* defining which counters (for the object) to collect.</span></span> <span data-ttu-id="952a9-168">Для сбора всех счетчиков для объекта укажите `.*`.</span><span class="sxs-lookup"><span data-stu-id="952a9-168">To collect all counters for the object, specify: `.*`.</span></span> <span data-ttu-id="952a9-169">Для сбора только счетчиков области подкачки для объекта памяти, например, можно указать: `.+Swap.+`</span><span class="sxs-lookup"><span data-stu-id="952a9-169">To collect only swap space counters for the memory object, for example, you could specify: `.+Swap.+`</span></span> |
| <span data-ttu-id="952a9-170">interval</span><span class="sxs-lookup"><span data-stu-id="952a9-170">interval</span></span> | <span data-ttu-id="952a9-171">Частота сбора счетчиков объекта.</span><span class="sxs-lookup"><span data-stu-id="952a9-171">Frequency at which the object's counters are collected.</span></span> |


<span data-ttu-id="952a9-172">В следующей таблице перечислены объекты и счетчики, которые можно указать в файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="952a9-172">The following table lists the objects and counters that you can specify in the configuration file.</span></span>  <span data-ttu-id="952a9-173">Для определенных приложений доступны дополнительные счетчики, как описано в статье [Collect performance counters for Linux applications in Log Analytics](log-analytics-data-sources-linux-applications.md) (Сбор данных счетчиков производительности для приложений Linux в Log Analytics).</span><span class="sxs-lookup"><span data-stu-id="952a9-173">There are additional counters available for certain applications as described in [Collect performance counters for Linux applications in Log Analytics](log-analytics-data-sources-linux-applications.md).</span></span>

| <span data-ttu-id="952a9-174">Имя объекта</span><span class="sxs-lookup"><span data-stu-id="952a9-174">Object Name</span></span> | <span data-ttu-id="952a9-175">Имя счетчика</span><span class="sxs-lookup"><span data-stu-id="952a9-175">Counter Name</span></span> |
|:--|:--|
| <span data-ttu-id="952a9-176">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-176">Logical Disk</span></span> | <span data-ttu-id="952a9-177">Процент свободных индексных дескрипторов</span><span class="sxs-lookup"><span data-stu-id="952a9-177">% Free Inodes</span></span> |
| <span data-ttu-id="952a9-178">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-178">Logical Disk</span></span> | <span data-ttu-id="952a9-179">Процент свободного места</span><span class="sxs-lookup"><span data-stu-id="952a9-179">% Free Space</span></span> |
| <span data-ttu-id="952a9-180">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-180">Logical Disk</span></span> | <span data-ttu-id="952a9-181">Процент используемых индексных дескрипторов</span><span class="sxs-lookup"><span data-stu-id="952a9-181">% Used Inodes</span></span> |
| <span data-ttu-id="952a9-182">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-182">Logical Disk</span></span> | <span data-ttu-id="952a9-183">Процент используемого места</span><span class="sxs-lookup"><span data-stu-id="952a9-183">% Used Space</span></span> |
| <span data-ttu-id="952a9-184">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-184">Logical Disk</span></span> | <span data-ttu-id="952a9-185">Скорость чтения с диска (байт/с) </span><span class="sxs-lookup"><span data-stu-id="952a9-185">Disk Read Bytes/sec</span></span> |
| <span data-ttu-id="952a9-186">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-186">Logical Disk</span></span> | <span data-ttu-id="952a9-187">Операций чтения с диска в секунду </span><span class="sxs-lookup"><span data-stu-id="952a9-187">Disk Reads/sec</span></span> |
| <span data-ttu-id="952a9-188">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-188">Logical Disk</span></span> | <span data-ttu-id="952a9-189">Обращений к диску в секунду</span><span class="sxs-lookup"><span data-stu-id="952a9-189">Disk Transfers/sec</span></span> |
| <span data-ttu-id="952a9-190">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-190">Logical Disk</span></span> | <span data-ttu-id="952a9-191">Скорость записи на диск (байт/с)</span><span class="sxs-lookup"><span data-stu-id="952a9-191">Disk Write Bytes/sec</span></span> |
| <span data-ttu-id="952a9-192">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-192">Logical Disk</span></span> | <span data-ttu-id="952a9-193">Операций записи на диск в секунду</span><span class="sxs-lookup"><span data-stu-id="952a9-193">Disk Writes/sec</span></span> |
| <span data-ttu-id="952a9-194">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-194">Logical Disk</span></span> | <span data-ttu-id="952a9-195">Свободно мегабайт</span><span class="sxs-lookup"><span data-stu-id="952a9-195">Free Megabytes</span></span> |
| <span data-ttu-id="952a9-196">Логический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-196">Logical Disk</span></span> | <span data-ttu-id="952a9-197">Скорость обмена с логическим диском (байт/с)</span><span class="sxs-lookup"><span data-stu-id="952a9-197">Logical Disk Bytes/sec</span></span> |
| <span data-ttu-id="952a9-198">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-198">Memory</span></span> | <span data-ttu-id="952a9-199">Процент доступной памяти</span><span class="sxs-lookup"><span data-stu-id="952a9-199">% Available Memory</span></span> |
| <span data-ttu-id="952a9-200">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-200">Memory</span></span> | <span data-ttu-id="952a9-201">Процент доступной области подкачки</span><span class="sxs-lookup"><span data-stu-id="952a9-201">% Available Swap Space</span></span> |
| <span data-ttu-id="952a9-202">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-202">Memory</span></span> | <span data-ttu-id="952a9-203">Процент используемой памяти</span><span class="sxs-lookup"><span data-stu-id="952a9-203">% Used Memory</span></span> |
| <span data-ttu-id="952a9-204">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-204">Memory</span></span> | <span data-ttu-id="952a9-205">Процент используемой области подкачки</span><span class="sxs-lookup"><span data-stu-id="952a9-205">% Used Swap Space</span></span> |
| <span data-ttu-id="952a9-206">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-206">Memory</span></span> | <span data-ttu-id="952a9-207">Доступный объем памяти в МБ</span><span class="sxs-lookup"><span data-stu-id="952a9-207">Available MBytes Memory</span></span> |
| <span data-ttu-id="952a9-208">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-208">Memory</span></span> | <span data-ttu-id="952a9-209">Доступный объем подкачки в МБ</span><span class="sxs-lookup"><span data-stu-id="952a9-209">Available MBytes Swap</span></span> |
| <span data-ttu-id="952a9-210">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-210">Memory</span></span> | <span data-ttu-id="952a9-211">Операций чтения со страницы в секунду</span><span class="sxs-lookup"><span data-stu-id="952a9-211">Page Reads/sec</span></span> |
| <span data-ttu-id="952a9-212">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-212">Memory</span></span> | <span data-ttu-id="952a9-213">Операций записи на страницу в секунду</span><span class="sxs-lookup"><span data-stu-id="952a9-213">Page Writes/sec</span></span> |
| <span data-ttu-id="952a9-214">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-214">Memory</span></span> | <span data-ttu-id="952a9-215">Страниц в секунду</span><span class="sxs-lookup"><span data-stu-id="952a9-215">Pages/sec</span></span> |
| <span data-ttu-id="952a9-216">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-216">Memory</span></span> | <span data-ttu-id="952a9-217">Используемая области подкачки в МБ</span><span class="sxs-lookup"><span data-stu-id="952a9-217">Used MBytes Swap Space</span></span> |
| <span data-ttu-id="952a9-218">Память</span><span class="sxs-lookup"><span data-stu-id="952a9-218">Memory</span></span> | <span data-ttu-id="952a9-219">Используемый объем памяти в МБ</span><span class="sxs-lookup"><span data-stu-id="952a9-219">Used Memory MBytes</span></span> |
| <span data-ttu-id="952a9-220">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-220">Network</span></span> | <span data-ttu-id="952a9-221">Всего передано байт</span><span class="sxs-lookup"><span data-stu-id="952a9-221">Total Bytes Transmitted</span></span> |
| <span data-ttu-id="952a9-222">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-222">Network</span></span> | <span data-ttu-id="952a9-223">Всего получено байт</span><span class="sxs-lookup"><span data-stu-id="952a9-223">Total Bytes Received</span></span> |
| <span data-ttu-id="952a9-224">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-224">Network</span></span> | <span data-ttu-id="952a9-225">Всего байт</span><span class="sxs-lookup"><span data-stu-id="952a9-225">Total Bytes</span></span> |
| <span data-ttu-id="952a9-226">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-226">Network</span></span> | <span data-ttu-id="952a9-227">Всего передано пакетов</span><span class="sxs-lookup"><span data-stu-id="952a9-227">Total Packets Transmitted</span></span> |
| <span data-ttu-id="952a9-228">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-228">Network</span></span> | <span data-ttu-id="952a9-229">Всего получено пакетов</span><span class="sxs-lookup"><span data-stu-id="952a9-229">Total Packets Received</span></span> |
| <span data-ttu-id="952a9-230">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-230">Network</span></span> | <span data-ttu-id="952a9-231">Всего ошибок Rx</span><span class="sxs-lookup"><span data-stu-id="952a9-231">Total Rx Errors</span></span> |
| <span data-ttu-id="952a9-232">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-232">Network</span></span> | <span data-ttu-id="952a9-233">Всего ошибок Tx</span><span class="sxs-lookup"><span data-stu-id="952a9-233">Total Tx Errors</span></span> |
| <span data-ttu-id="952a9-234">Сеть</span><span class="sxs-lookup"><span data-stu-id="952a9-234">Network</span></span> | <span data-ttu-id="952a9-235">Всего конфликтов</span><span class="sxs-lookup"><span data-stu-id="952a9-235">Total Collisions</span></span> |
| <span data-ttu-id="952a9-236">Физический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-236">Physical Disk</span></span> | <span data-ttu-id="952a9-237">Среднее</span><span class="sxs-lookup"><span data-stu-id="952a9-237">Avg.</span></span> <span data-ttu-id="952a9-238">время чтения с диска (с)</span><span class="sxs-lookup"><span data-stu-id="952a9-238">Disk sec/Read</span></span> |
| <span data-ttu-id="952a9-239">Физический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-239">Physical Disk</span></span> | <span data-ttu-id="952a9-240">Среднее</span><span class="sxs-lookup"><span data-stu-id="952a9-240">Avg.</span></span> <span data-ttu-id="952a9-241">время обращения к диску (с)</span><span class="sxs-lookup"><span data-stu-id="952a9-241">Disk sec/Transfer</span></span> |
| <span data-ttu-id="952a9-242">Физический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-242">Physical Disk</span></span> | <span data-ttu-id="952a9-243">Среднее</span><span class="sxs-lookup"><span data-stu-id="952a9-243">Avg.</span></span> <span data-ttu-id="952a9-244">время записи на диск (с)</span><span class="sxs-lookup"><span data-stu-id="952a9-244">Disk sec/Write</span></span> |
| <span data-ttu-id="952a9-245">Физический диск</span><span class="sxs-lookup"><span data-stu-id="952a9-245">Physical Disk</span></span> | <span data-ttu-id="952a9-246">Скорость обмена с физическим диском (байт/с)</span><span class="sxs-lookup"><span data-stu-id="952a9-246">Physical Disk Bytes/sec</span></span> |
| <span data-ttu-id="952a9-247">Process</span><span class="sxs-lookup"><span data-stu-id="952a9-247">Process</span></span> | <span data-ttu-id="952a9-248">Процент времени работы в привилегированном режиме</span><span class="sxs-lookup"><span data-stu-id="952a9-248">Pct Privileged Time</span></span> |
| <span data-ttu-id="952a9-249">Process</span><span class="sxs-lookup"><span data-stu-id="952a9-249">Process</span></span> | <span data-ttu-id="952a9-250">Процент времени пользователя</span><span class="sxs-lookup"><span data-stu-id="952a9-250">Pct User Time</span></span> |
| <span data-ttu-id="952a9-251">Process</span><span class="sxs-lookup"><span data-stu-id="952a9-251">Process</span></span> | <span data-ttu-id="952a9-252">Используемая память в КБ</span><span class="sxs-lookup"><span data-stu-id="952a9-252">Used Memory kBytes</span></span> |
| <span data-ttu-id="952a9-253">Process</span><span class="sxs-lookup"><span data-stu-id="952a9-253">Process</span></span> | <span data-ttu-id="952a9-254">Виртуальная общая память</span><span class="sxs-lookup"><span data-stu-id="952a9-254">Virtual Shared Memory</span></span> |
| <span data-ttu-id="952a9-255">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-255">Processor</span></span> | <span data-ttu-id="952a9-256">Процент времени DPC</span><span class="sxs-lookup"><span data-stu-id="952a9-256">% DPC Time</span></span> |
| <span data-ttu-id="952a9-257">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-257">Processor</span></span> | <span data-ttu-id="952a9-258">Процент времени простоя</span><span class="sxs-lookup"><span data-stu-id="952a9-258">% Idle Time</span></span> |
| <span data-ttu-id="952a9-259">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-259">Processor</span></span> | <span data-ttu-id="952a9-260">Процент времени прерывания</span><span class="sxs-lookup"><span data-stu-id="952a9-260">% Interrupt Time</span></span> |
| <span data-ttu-id="952a9-261">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-261">Processor</span></span> | <span data-ttu-id="952a9-262">Процент времени ожидания ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="952a9-262">% IO Wait Time</span></span> |
| <span data-ttu-id="952a9-263">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-263">Processor</span></span> | <span data-ttu-id="952a9-264">Процент времени работы с низким приоритетом</span><span class="sxs-lookup"><span data-stu-id="952a9-264">% Nice Time</span></span> |
| <span data-ttu-id="952a9-265">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-265">Processor</span></span> | <span data-ttu-id="952a9-266">Процент времени работы в привилегированном режиме</span><span class="sxs-lookup"><span data-stu-id="952a9-266">% Privileged Time</span></span> |
| <span data-ttu-id="952a9-267">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-267">Processor</span></span> | <span data-ttu-id="952a9-268">% загруженности процессора</span><span class="sxs-lookup"><span data-stu-id="952a9-268">% Processor Time</span></span> |
| <span data-ttu-id="952a9-269">Процессор</span><span class="sxs-lookup"><span data-stu-id="952a9-269">Processor</span></span> | <span data-ttu-id="952a9-270">Процент времени пользователя</span><span class="sxs-lookup"><span data-stu-id="952a9-270">% User Time</span></span> |
| <span data-ttu-id="952a9-271">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-271">System</span></span> | <span data-ttu-id="952a9-272">Объем свободной физической памяти</span><span class="sxs-lookup"><span data-stu-id="952a9-272">Free Physical Memory</span></span> |
| <span data-ttu-id="952a9-273">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-273">System</span></span> | <span data-ttu-id="952a9-274">Объем свободного места в файлах подкачки</span><span class="sxs-lookup"><span data-stu-id="952a9-274">Free Space in Paging Files</span></span> |
| <span data-ttu-id="952a9-275">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-275">System</span></span> | <span data-ttu-id="952a9-276">Объем свободной виртуальной памяти</span><span class="sxs-lookup"><span data-stu-id="952a9-276">Free Virtual Memory</span></span> |
| <span data-ttu-id="952a9-277">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-277">System</span></span> | <span data-ttu-id="952a9-278">Процессы</span><span class="sxs-lookup"><span data-stu-id="952a9-278">Processes</span></span> |
| <span data-ttu-id="952a9-279">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-279">System</span></span> | <span data-ttu-id="952a9-280">Объем, сохраненный в файлах подкачки</span><span class="sxs-lookup"><span data-stu-id="952a9-280">Size Stored In Paging Files</span></span> |
| <span data-ttu-id="952a9-281">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-281">System</span></span> | <span data-ttu-id="952a9-282">Время доступности</span><span class="sxs-lookup"><span data-stu-id="952a9-282">Uptime</span></span> |
| <span data-ttu-id="952a9-283">системный;</span><span class="sxs-lookup"><span data-stu-id="952a9-283">System</span></span> | <span data-ttu-id="952a9-284">Пользователи</span><span class="sxs-lookup"><span data-stu-id="952a9-284">Users</span></span> |


<span data-ttu-id="952a9-285">Ниже показана конфигурация по умолчанию для метрик производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-285">Following is the default configuration for performance metrics.</span></span>

    <source>
      type oms_omi
      object_name "Physical Disk"
      instance_regex ".*"
      counter_name_regex ".*"
      interval 5m
    </source>

    <source>
      type oms_omi
      object_name "Logical Disk"
      instance_regex ".*
      counter_name_regex ".*"
      interval 5m
    </source>

    <source>
      type oms_omi
      object_name "Processor"
      instance_regex ".*
      counter_name_regex ".*"
      interval 30s
    </source>

    <source>
      type oms_omi
      object_name "Memory"
      instance_regex ".*"
      counter_name_regex ".*"
      interval 30s
    </source>

## <a name="data-collection"></a><span data-ttu-id="952a9-286">Сбор данных</span><span class="sxs-lookup"><span data-stu-id="952a9-286">Data collection</span></span>
<span data-ttu-id="952a9-287">Служба Log Analytics будет собирать данные со всех указанных счетчиков производительности с заданным для них интервалом выборки во всех агентах, в которых установлен счетчик.</span><span class="sxs-lookup"><span data-stu-id="952a9-287">Log Analytics collects all specified performance counters at their specified sample interval on all agents that have that counter installed.</span></span>  <span data-ttu-id="952a9-288">Данные не агрегируются. Необработанные данные доступны во всех представлениях поиска по журналам в течение времени, определенного подпиской OMS.</span><span class="sxs-lookup"><span data-stu-id="952a9-288">The data is not aggregated, and the raw data is available in all log search views for the duration specified by your OMS subscription.</span></span>

## <a name="performance-record-properties"></a><span data-ttu-id="952a9-289">Свойства записи о производительности</span><span class="sxs-lookup"><span data-stu-id="952a9-289">Performance record properties</span></span>
<span data-ttu-id="952a9-290">Записи о производительности имеют тип **Perf** и свойства, описанные в приведенной ниже таблице.</span><span class="sxs-lookup"><span data-stu-id="952a9-290">Performance records have a type of **Perf** and have the properties in the following table.</span></span>

| <span data-ttu-id="952a9-291">Свойство</span><span class="sxs-lookup"><span data-stu-id="952a9-291">Property</span></span> | <span data-ttu-id="952a9-292">Описание</span><span class="sxs-lookup"><span data-stu-id="952a9-292">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="952a9-293">Компьютер</span><span class="sxs-lookup"><span data-stu-id="952a9-293">Computer</span></span> |<span data-ttu-id="952a9-294">Компьютер, с которого было получено событие.</span><span class="sxs-lookup"><span data-stu-id="952a9-294">Computer that the event was collected from.</span></span> |
| <span data-ttu-id="952a9-295">CounterName</span><span class="sxs-lookup"><span data-stu-id="952a9-295">CounterName</span></span> |<span data-ttu-id="952a9-296">Имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-296">Name of the performance counter</span></span> |
| <span data-ttu-id="952a9-297">CounterPath</span><span class="sxs-lookup"><span data-stu-id="952a9-297">CounterPath</span></span> |<span data-ttu-id="952a9-298">Полный путь к счетчику в формате \\\\\<компьютер>\\объект(экземпляр)\\счетчик.</span><span class="sxs-lookup"><span data-stu-id="952a9-298">Full path of the counter in the form \\\\\<Computer>\\object(instance)\\counter.</span></span> |
| <span data-ttu-id="952a9-299">CounterValue</span><span class="sxs-lookup"><span data-stu-id="952a9-299">CounterValue</span></span> |<span data-ttu-id="952a9-300">Числовое значение счетчика.</span><span class="sxs-lookup"><span data-stu-id="952a9-300">Numeric value of the counter.</span></span> |
| <span data-ttu-id="952a9-301">InstanceName</span><span class="sxs-lookup"><span data-stu-id="952a9-301">InstanceName</span></span> |<span data-ttu-id="952a9-302">Имя экземпляра события.</span><span class="sxs-lookup"><span data-stu-id="952a9-302">Name of the event instance.</span></span>  <span data-ttu-id="952a9-303">Если экземпляра нет, используется пустое значение.</span><span class="sxs-lookup"><span data-stu-id="952a9-303">Empty if no instance.</span></span> |
| <span data-ttu-id="952a9-304">ObjectName</span><span class="sxs-lookup"><span data-stu-id="952a9-304">ObjectName</span></span> |<span data-ttu-id="952a9-305">Имя объекта производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-305">Name of the performance object</span></span> |
| <span data-ttu-id="952a9-306">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="952a9-306">SourceSystem</span></span> |<span data-ttu-id="952a9-307">Тип агента, из которого были получены данные.</span><span class="sxs-lookup"><span data-stu-id="952a9-307">Type of agent the data was collected from.</span></span> <br><br><span data-ttu-id="952a9-308">OpsManager — агент Windows, подключенный напрямую или через SCOM</span><span class="sxs-lookup"><span data-stu-id="952a9-308">OpsManager – Windows agent, either direct connect or SCOM</span></span> <br> <span data-ttu-id="952a9-309">Linux — все агенты Linux</span><span class="sxs-lookup"><span data-stu-id="952a9-309">Linux – All Linux agents</span></span>  <br> <span data-ttu-id="952a9-310">AzureStorage – диагностика Azure</span><span class="sxs-lookup"><span data-stu-id="952a9-310">AzureStorage – Azure Diagnostics</span></span> |
| <span data-ttu-id="952a9-311">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="952a9-311">TimeGenerated</span></span> |<span data-ttu-id="952a9-312">Дата и время выборки данных.</span><span class="sxs-lookup"><span data-stu-id="952a9-312">Date and time the data was sampled.</span></span> |

## <a name="sizing-estimates"></a><span data-ttu-id="952a9-313">Оценки размера</span><span class="sxs-lookup"><span data-stu-id="952a9-313">Sizing estimates</span></span>
 <span data-ttu-id="952a9-314">Сбор данных для одного счетчика с 10-секундным интервалом генерирует около 1 МБ данных в день на каждый экземпляр.</span><span class="sxs-lookup"><span data-stu-id="952a9-314">A rough estimate for collection of a particular counter at 10-second intervals is about 1 MB per day per instance.</span></span>  <span data-ttu-id="952a9-315">Оценить требования конкретного счетчика к объему памяти можно по указанной ниже формуле.</span><span class="sxs-lookup"><span data-stu-id="952a9-315">You can estimate the storage requirements of a particular counter with the following formula.</span></span>

    1 MB x (number of counters) x (number of agents) x (number of instances)

## <a name="log-searches-with-performance-records"></a><span data-ttu-id="952a9-316">Поиск по журналам с записями о производительности</span><span class="sxs-lookup"><span data-stu-id="952a9-316">Log searches with Performance records</span></span>
<span data-ttu-id="952a9-317">Ниже приведены различные примеры запросов поиска по журналу, которые извлекают записи о производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-317">The following table provides different examples of log searches that retrieve Performance records.</span></span>

| <span data-ttu-id="952a9-318">Запрос</span><span class="sxs-lookup"><span data-stu-id="952a9-318">Query</span></span> | <span data-ttu-id="952a9-319">Описание</span><span class="sxs-lookup"><span data-stu-id="952a9-319">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="952a9-320">Type=Perf</span><span class="sxs-lookup"><span data-stu-id="952a9-320">Type=Perf</span></span> |<span data-ttu-id="952a9-321">Все данные о производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-321">All Performance data</span></span> |
| <span data-ttu-id="952a9-322">Type=Perf Computer="MyComputer"</span><span class="sxs-lookup"><span data-stu-id="952a9-322">Type=Perf Computer="MyComputer"</span></span> |<span data-ttu-id="952a9-323">Все данные о производительности с определенного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-323">All Performance data from a particular computer</span></span> |
| <span data-ttu-id="952a9-324">Type=Perf CounterName="Current Disk Queue Length"</span><span class="sxs-lookup"><span data-stu-id="952a9-324">Type=Perf CounterName="Current Disk Queue Length"</span></span> |<span data-ttu-id="952a9-325">Все данные о производительности с определенного счетчика</span><span class="sxs-lookup"><span data-stu-id="952a9-325">All Performance data for a particular counter</span></span> |
| <span data-ttu-id="952a9-326">Type=Perf (ObjectName=Processor) CounterName="% Processor Time" InstanceName=_Total &#124; measure Avg(Average) as AVGCPU by Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-326">Type=Perf (ObjectName=Processor) CounterName="% Processor Time" InstanceName=_Total &#124; measure Avg(Average) as AVGCPU  by Computer</span></span> |<span data-ttu-id="952a9-327">Средний объем использования ЦП на всех компьютерах</span><span class="sxs-lookup"><span data-stu-id="952a9-327">Average CPU Utilization across all computers</span></span> |
| <span data-ttu-id="952a9-328">Type=Perf (CounterName="% Processor Time") &#124; measure max(Max) by Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-328">Type=Perf (CounterName="% Processor Time") &#124;  measure max(Max) by Computer</span></span> |<span data-ttu-id="952a9-329">Максимальный объем использования ЦП на всех компьютерах</span><span class="sxs-lookup"><span data-stu-id="952a9-329">Maximum CPU Utilization across all computers</span></span> |
| <span data-ttu-id="952a9-330">Type=Perf ObjectName=LogicalDisk CounterName="Current Disk Queue Length" Computer="MyComputerName" &#124; measure Avg(Average) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="952a9-330">Type=Perf ObjectName=LogicalDisk CounterName="Current Disk Queue Length" Computer="MyComputerName" &#124; measure Avg(Average) by InstanceName</span></span> |<span data-ttu-id="952a9-331">Средняя длина текущей дисковой очереди по всем экземплярам заданного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-331">Average Current Disk Queue length across all  the instances of a given computer</span></span> |
| <span data-ttu-id="952a9-332">Type=Perf CounterName="DiskTransfers/sec" &#124; measure percentile95(Average) by Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-332">Type=Perf CounterName="DiskTransfers/sec" &#124; measure percentile95(Average) by Computer</span></span> |<span data-ttu-id="952a9-333">95-й процентиль для обращений к диску/с на всех компьютерах</span><span class="sxs-lookup"><span data-stu-id="952a9-333">95th Percentile of Disk Transfers/Sec across all computers</span></span> |
| <span data-ttu-id="952a9-334">Type=Perf CounterName="% Processor Time" InstanceName="_Total" &#124; measure avg(CounterValue) by Computer Interval 1HOUR</span><span class="sxs-lookup"><span data-stu-id="952a9-334">Type=Perf CounterName="% Processor Time" InstanceName="_Total"  &#124; measure avg(CounterValue) by Computer Interval 1HOUR</span></span> |<span data-ttu-id="952a9-335">Средняя почасовая нагрузка на ЦП по всем компьютерам</span><span class="sxs-lookup"><span data-stu-id="952a9-335">Hourly average of CPU usage across all computers</span></span> |
| <span data-ttu-id="952a9-336">Type=Perf Computer="MyComputer" CounterName=%* InstanceName=_Total &#124; measure percentile70(CounterValue) by CounterName Interval 1HOUR</span><span class="sxs-lookup"><span data-stu-id="952a9-336">Type=Perf Computer="MyComputer" CounterName=%* InstanceName=_Total &#124; measure percentile70(CounterValue) by CounterName Interval 1HOUR</span></span> |<span data-ttu-id="952a9-337">Почасовые 70-е процентили по каждому процентному счетчику для конкретного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-337">Hourly 70 percentile of every % percent counter for a particular computer</span></span> |
| <span data-ttu-id="952a9-338">Type=Perf CounterName="% Processor Time" InstanceName="_Total" (Computer="MyComputer") &#124; measure min(CounterValue), avg(CounterValue), percentile75(CounterValue), max(CounterValue) by Computer Interval 1HOUR</span><span class="sxs-lookup"><span data-stu-id="952a9-338">Type=Perf CounterName="% Processor Time" InstanceName="_Total"  (Computer="MyComputer") &#124; measure min(CounterValue), avg(CounterValue), percentile75(CounterValue), max(CounterValue) by Computer Interval 1HOUR</span></span> |<span data-ttu-id="952a9-339">Почасовые средние, минимальные, максимальные значения и 75-е процентили по загрузке ЦП для конкретного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-339">Hourly average, minimum, maximum, and 75-percentile CPU usage for a specific computer</span></span> |
| <span data-ttu-id="952a9-340">Type=Perf ObjectName="MSSQL$INST2:Databases" InstanceName=master</span><span class="sxs-lookup"><span data-stu-id="952a9-340">Type=Perf ObjectName="MSSQL$INST2:Databases" InstanceName=master</span></span> | <span data-ttu-id="952a9-341">Все данные производительности из объекта производительности базы данных master именованного экземпляра SQL Server (INST2).</span><span class="sxs-lookup"><span data-stu-id="952a9-341">All Performance data from the Database performance object for the master database from the named SQL Server instance INST2.</span></span>  

>[!NOTE]
> <span data-ttu-id="952a9-342">Если для рабочей области обновлен [язык запросов Log Analytics](log-analytics-log-search-upgrade.md), указанные выше запросы будут изменены следующим образом.</span><span class="sxs-lookup"><span data-stu-id="952a9-342">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>

> | <span data-ttu-id="952a9-343">Запрос</span><span class="sxs-lookup"><span data-stu-id="952a9-343">Query</span></span> | <span data-ttu-id="952a9-344">Описание</span><span class="sxs-lookup"><span data-stu-id="952a9-344">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="952a9-345">Perf</span><span class="sxs-lookup"><span data-stu-id="952a9-345">Perf</span></span> |<span data-ttu-id="952a9-346">Все данные о производительности.</span><span class="sxs-lookup"><span data-stu-id="952a9-346">All Performance data</span></span> |
| <span data-ttu-id="952a9-347">Perf &#124; where Computer == "MyComputer"</span><span class="sxs-lookup"><span data-stu-id="952a9-347">Perf &#124; where Computer == "MyComputer"</span></span> |<span data-ttu-id="952a9-348">Все данные о производительности с определенного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-348">All Performance data from a particular computer</span></span> |
| <span data-ttu-id="952a9-349">Perf &#124; where CounterName == "Current Disk Queue Length"</span><span class="sxs-lookup"><span data-stu-id="952a9-349">Perf &#124; where CounterName == "Current Disk Queue Length"</span></span> |<span data-ttu-id="952a9-350">Все данные о производительности с определенного счетчика</span><span class="sxs-lookup"><span data-stu-id="952a9-350">All Performance data for a particular counter</span></span> |
| <span data-ttu-id="952a9-351">Perf &#124; where ObjectName == "Processor" and CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AVGCPU = avg(Average) by Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-351">Perf &#124; where ObjectName == "Processor" and CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AVGCPU = avg(Average) by Computer</span></span> |<span data-ttu-id="952a9-352">Средний объем использования ЦП на всех компьютерах</span><span class="sxs-lookup"><span data-stu-id="952a9-352">Average CPU Utilization across all computers</span></span> |
| <span data-ttu-id="952a9-353">Perf &#124; where CounterName == "% Processor Time" &#124; summarize AggregatedValue = max(Max) by Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-353">Perf &#124; where CounterName == "% Processor Time" &#124; summarize AggregatedValue = max(Max) by Computer</span></span> |<span data-ttu-id="952a9-354">Максимальный объем использования ЦП на всех компьютерах</span><span class="sxs-lookup"><span data-stu-id="952a9-354">Maximum CPU Utilization across all computers</span></span> |
| <span data-ttu-id="952a9-355">Perf &#124; where ObjectName == "LogicalDisk" and CounterName == "Current Disk Queue Length" and Computer == "MyComputerName" &#124; summarize AggregatedValue = avg(Average) by InstanceName</span><span class="sxs-lookup"><span data-stu-id="952a9-355">Perf &#124; where ObjectName == "LogicalDisk" and CounterName == "Current Disk Queue Length" and Computer == "MyComputerName" &#124; summarize AggregatedValue = avg(Average) by InstanceName</span></span> |<span data-ttu-id="952a9-356">Средняя длина текущей дисковой очереди по всем экземплярам заданного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-356">Average Current Disk Queue length across all  the instances of a given computer</span></span> |
| <span data-ttu-id="952a9-357">Perf &#124; where CounterName == "DiskTransfers/sec" &#124; summarize AggregatedValue = percentile(Average, 95) by Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-357">Perf &#124; where CounterName == "DiskTransfers/sec" &#124; summarize AggregatedValue = percentile(Average, 95) by Computer</span></span> |<span data-ttu-id="952a9-358">95-й процентиль для обращений к диску/с на всех компьютерах</span><span class="sxs-lookup"><span data-stu-id="952a9-358">95th Percentile of Disk Transfers/Sec across all computers</span></span> |
| <span data-ttu-id="952a9-359">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-359">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" &#124; summarize AggregatedValue = avg(CounterValue) by bin(TimeGenerated, 1h), Computer</span></span> |<span data-ttu-id="952a9-360">Средняя почасовая нагрузка на ЦП по всем компьютерам</span><span class="sxs-lookup"><span data-stu-id="952a9-360">Hourly average of CPU usage across all computers</span></span> |
| <span data-ttu-id="952a9-361">Perf &#124; where Computer == "MyComputer" and CounterName startswith_cs "%" and InstanceName == "_Total" &#124; summarize AggregatedValue = percentile(CounterValue, 70) by bin(TimeGenerated, 1h), CounterName</span><span class="sxs-lookup"><span data-stu-id="952a9-361">Perf &#124; where Computer == "MyComputer" and CounterName startswith_cs "%" and InstanceName == "_Total" &#124; summarize AggregatedValue = percentile(CounterValue, 70) by bin(TimeGenerated, 1h), CounterName</span></span> | <span data-ttu-id="952a9-362">Почасовые 70-е процентили по каждому процентному счетчику для конкретного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-362">Hourly 70 percentile of every % percent counter for a particular computer</span></span> |
| <span data-ttu-id="952a9-363">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" and Computer == "MyComputer" &#124; summarize ["min(CounterValue)"] = min(CounterValue), ["avg(CounterValue)"] = avg(CounterValue), ["percentile75(CounterValue)"] = percentile(CounterValue, 75), ["max(CounterValue)"] = max(CounterValue) by bin(TimeGenerated, 1h), Computer</span><span class="sxs-lookup"><span data-stu-id="952a9-363">Perf &#124; where CounterName == "% Processor Time" and InstanceName == "_Total" and Computer == "MyComputer" &#124; summarize ["min(CounterValue)"] = min(CounterValue), ["avg(CounterValue)"] = avg(CounterValue), ["percentile75(CounterValue)"] = percentile(CounterValue, 75), ["max(CounterValue)"] = max(CounterValue) by bin(TimeGenerated, 1h), Computer</span></span> |<span data-ttu-id="952a9-364">Почасовые средние, минимальные, максимальные значения и 75-е процентили по загрузке ЦП для конкретного компьютера</span><span class="sxs-lookup"><span data-stu-id="952a9-364">Hourly average, minimum, maximum, and 75-percentile CPU usage for a specific computer</span></span> |
| <span data-ttu-id="952a9-365">Perf &#124; where ObjectName == "MSSQL$INST2:Databases" and InstanceName == "master"</span><span class="sxs-lookup"><span data-stu-id="952a9-365">Perf &#124; where ObjectName == "MSSQL$INST2:Databases" and InstanceName == "master"</span></span> | <span data-ttu-id="952a9-366">Все данные производительности из объекта производительности базы данных master именованного экземпляра SQL Server (INST2).</span><span class="sxs-lookup"><span data-stu-id="952a9-366">All Performance data from the Database performance object for the master database from the named SQL Server instance INST2.</span></span>  

## <a name="viewing-performance-data"></a><span data-ttu-id="952a9-367">Просмотр данных о производительности</span><span class="sxs-lookup"><span data-stu-id="952a9-367">Viewing performance data</span></span>
<span data-ttu-id="952a9-368">При выполнении поиска данных о производительности по журналам по умолчанию отображается представление **Список**.</span><span class="sxs-lookup"><span data-stu-id="952a9-368">When you run a log search for performance data, the **List** view is displayed by default.</span></span>  <span data-ttu-id="952a9-369">Чтобы представить данные в графической форме, щелкните **Метрики**.</span><span class="sxs-lookup"><span data-stu-id="952a9-369">To view the data in graphical form, click **Metrics**.</span></span>  <span data-ttu-id="952a9-370">Чтобы получить подробное графическое представление, щелкните **+** рядом со счетчиком.</span><span class="sxs-lookup"><span data-stu-id="952a9-370">For a detailed graphical view, click the **+** next to a counter.</span></span>  

![Свернутое представление метрик](media/log-analytics-data-sources-performance-counters/metricscollapsed.png)

<span data-ttu-id="952a9-372">Статистическая обработка данных производительности при поиске по журналам описана в записи блога [On-demand metric aggregation and visualization in OMS](http://blogs.technet.microsoft.com/msoms/2016/02/26/on-demand-metric-aggregation-and-visualization-in-oms/) (Статистическая обработка и визуализация по запросу для метрик в OMS).</span><span class="sxs-lookup"><span data-stu-id="952a9-372">To aggregate performance data in a log search, see [On-demand metric aggregation and visualization in OMS](http://blogs.technet.microsoft.com/msoms/2016/02/26/on-demand-metric-aggregation-and-visualization-in-oms/).</span></span>


## <a name="next-steps"></a><span data-ttu-id="952a9-373">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="952a9-373">Next steps</span></span>
* <span data-ttu-id="952a9-374">[Сбор данных счетчиков производительности из приложений Linux](log-analytics-data-sources-linux-applications.md), включая MySQL и сервер HTTP Apache.</span><span class="sxs-lookup"><span data-stu-id="952a9-374">[Collect performance counters from Linux applications](log-analytics-data-sources-linux-applications.md) including MySQL and Apache HTTP Server.</span></span>
* <span data-ttu-id="952a9-375">Узнайте больше об [операциях поиска по журналу](log-analytics-log-searches.md) , которые можно применять для анализа данных, собираемых из источников данных и решений.</span><span class="sxs-lookup"><span data-stu-id="952a9-375">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>  
* <span data-ttu-id="952a9-376">Экспортируйте собранные данные в [Power BI](log-analytics-powerbi.md) для дополнительной визуализации и анализа.</span><span class="sxs-lookup"><span data-stu-id="952a9-376">Export collected data to [Power BI](log-analytics-powerbi.md) for additional visualizations and analysis.</span></span>
