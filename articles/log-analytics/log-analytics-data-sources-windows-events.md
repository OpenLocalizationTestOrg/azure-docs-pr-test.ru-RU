---
title: "Сбор и анализ журналов событий Windows в OMS Log Analytics | Документация Майкрософт"
description: "Журналы событий Windows — один из самых распространенных источников данных, используемых службой Log Analytics.  В этой статье описано, как настроить коллекцию журналов событий Windows и сведения о записях, созданных ими в репозитории OMS."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: tysonn
ms.assetid: ee52f564-995b-450f-a6ba-0d7b1dac3f32
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: 1be8500ec2cb78ef0edf57f4d8561336cf00ebcb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="windows-event-log-data-sources-in-log-analytics"></a><span data-ttu-id="c146f-104">Источники данных для журнала событий Windows в Log Analytics</span><span class="sxs-lookup"><span data-stu-id="c146f-104">Windows event log data sources in Log Analytics</span></span>
<span data-ttu-id="c146f-105">Журналы событий Windows — это один из самых распространенных [источников данных](log-analytics-data-sources.md), используемый для сбора данных агентами Windows, так как он применяется большинством приложений для записи сведений.</span><span class="sxs-lookup"><span data-stu-id="c146f-105">Windows Event logs are one of the most common [data sources](log-analytics-data-sources.md) for collecting data using Windows agents since many applications write to the Windows event log.</span></span>  <span data-ttu-id="c146f-106">События можно собирать из стандартных журналов, таких как журналы системы и приложений, а также указывать пользовательские журналы приложений, которые необходимо отслеживать.</span><span class="sxs-lookup"><span data-stu-id="c146f-106">You can collect events from standard logs such as System and Application in addition to specifying any custom logs created by applications you need to monitor.</span></span>

![События Windows](media/log-analytics-data-sources-windows-events/overview.png)     

## <a name="configuring-windows-event-logs"></a><span data-ttu-id="c146f-108">Настройка журналов событий Windows</span><span class="sxs-lookup"><span data-stu-id="c146f-108">Configuring Windows Event logs</span></span>
<span data-ttu-id="c146f-109">Журналы событий Windows настраиваются в меню ["Данные" в параметрах Log Analytics](log-analytics-data-sources.md#configuring-data-sources).</span><span class="sxs-lookup"><span data-stu-id="c146f-109">Configure Windows Event logs from the [Data menu in Log Analytics Settings](log-analytics-data-sources.md#configuring-data-sources).</span></span>

<span data-ttu-id="c146f-110">Log Analytics собирает события только из журналов событий Windows, указанных в параметрах.</span><span class="sxs-lookup"><span data-stu-id="c146f-110">Log Analytics only collects events from the Windows event logs that are specified in the settings.</span></span>  <span data-ttu-id="c146f-111">Чтобы добавить журнал событий, введите его имя и щелкните **+**.</span><span class="sxs-lookup"><span data-stu-id="c146f-111">You can add an event log by typing in the name of the log and clicking **+**.</span></span>  <span data-ttu-id="c146f-112">Из каждого журнала собираются только события с заданной степенью серьезности.</span><span class="sxs-lookup"><span data-stu-id="c146f-112">For each log, only the events with the selected severities are collected.</span></span>  <span data-ttu-id="c146f-113">Укажите степени серьезности событий, которые хотите получать из соответствующего журнала.</span><span class="sxs-lookup"><span data-stu-id="c146f-113">Check the severities for the particular log that you want to collect.</span></span>  <span data-ttu-id="c146f-114">Дополнительные критерии для фильтрации событий задавать нельзя.</span><span class="sxs-lookup"><span data-stu-id="c146f-114">You cannot provide any additional criteria to filter events.</span></span>

<span data-ttu-id="c146f-115">При вводе имени служба Log Analytics предоставляет варианты распространенных имен журналов событий.</span><span class="sxs-lookup"><span data-stu-id="c146f-115">As you type the name of an event log, Log Analytics provides suggestions of common event log names.</span></span> <span data-ttu-id="c146f-116">Если журнал, который нужно добавить, не отображается в списке, вы по-прежнему можете его добавить, введя его полное имя.</span><span class="sxs-lookup"><span data-stu-id="c146f-116">If the log you want to add does not appear in the list, you can still add it by typing in the full name of the log.</span></span> <span data-ttu-id="c146f-117">Полное имя журнала можно просмотреть с помощью средства просмотра событий.</span><span class="sxs-lookup"><span data-stu-id="c146f-117">You can find the full name of the log by using event viewer.</span></span> <span data-ttu-id="c146f-118">Для этого в средстве просмотра событий откройте страницу *Свойства* журнала и скопируйте строку в поле *Полное имя*.</span><span class="sxs-lookup"><span data-stu-id="c146f-118">In event viewer, open the *Properties* page for the log and copy the string from the *Full Name* field.</span></span>

![Настройка событий Windows](media/log-analytics-data-sources-windows-events/configure.png)

## <a name="data-collection"></a><span data-ttu-id="c146f-120">Сбор данных</span><span class="sxs-lookup"><span data-stu-id="c146f-120">Data collection</span></span>
<span data-ttu-id="c146f-121">По мере создания событий служба Log Analytics собирает из отслеживаемого журнала событий все события, соответствующие заданной степени серьезности.</span><span class="sxs-lookup"><span data-stu-id="c146f-121">Log Analytics collects each event that matches a selected severity from a monitored event log as the event is created.</span></span>  <span data-ttu-id="c146f-122">Агент фиксирует место сбора в каждом журнале событий, который используется для сбора данных.</span><span class="sxs-lookup"><span data-stu-id="c146f-122">The agent records its place in each event log that it collects from.</span></span>  <span data-ttu-id="c146f-123">Если агент на некоторое время переходит в автономный режим, Log Analytics собирает события, начиная с места остановки, даже если эти события были созданы, пока агент был отключен.</span><span class="sxs-lookup"><span data-stu-id="c146f-123">If the agent goes offline for a period of time, then Log Analytics collects events from where it last left off, even if those events were created while the agent was offline.</span></span>  <span data-ttu-id="c146f-124">Существует вероятность, что эти события не будут собраны, если оболочки журнала событий с несобранными событиями будут перезаписаны, пока агент находится вне сети.</span><span class="sxs-lookup"><span data-stu-id="c146f-124">There is a potential for these events to not be collected if the event log wraps with uncollected events being overwritten while the agent is offline.</span></span>

>[!NOTE]
><span data-ttu-id="c146f-125">Log Analytics не собирает события аудита, созданные SQL Server, из источника *MSSQLSERVER* с идентификатором события 18453, которые содержат ключевые слова *Classic* или *Audit Success* и ключевое слово *0xa0000000000000*.</span><span class="sxs-lookup"><span data-stu-id="c146f-125">Log Analytics does not collect audit events created by SQL Server from source *MSSQLSERVER* with event ID 18453 that contains keywords - *Classic* or *Audit Success* and keyword *0xa0000000000000*.</span></span>
>

## <a name="windows-event-records-properties"></a><span data-ttu-id="c146f-126">Свойства записей о событиях Windows</span><span class="sxs-lookup"><span data-stu-id="c146f-126">Windows event records properties</span></span>
<span data-ttu-id="c146f-127">Записи о событиях Windows имеют тип **Событие** и свойства, описанные в приведенной ниже таблице.</span><span class="sxs-lookup"><span data-stu-id="c146f-127">Windows event records have a type of **Event** and have the properties in the following table:</span></span>

| <span data-ttu-id="c146f-128">Свойство</span><span class="sxs-lookup"><span data-stu-id="c146f-128">Property</span></span> | <span data-ttu-id="c146f-129">Описание</span><span class="sxs-lookup"><span data-stu-id="c146f-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="c146f-130">Компьютер</span><span class="sxs-lookup"><span data-stu-id="c146f-130">Computer</span></span> |<span data-ttu-id="c146f-131">Имя компьютера, с которого было получено событие.</span><span class="sxs-lookup"><span data-stu-id="c146f-131">Name of the computer that the event was collected from.</span></span> |
| <span data-ttu-id="c146f-132">EventCategory</span><span class="sxs-lookup"><span data-stu-id="c146f-132">EventCategory</span></span> |<span data-ttu-id="c146f-133">Категория события.</span><span class="sxs-lookup"><span data-stu-id="c146f-133">Category of the event.</span></span> |
| <span data-ttu-id="c146f-134">EventData</span><span class="sxs-lookup"><span data-stu-id="c146f-134">EventData</span></span> |<span data-ttu-id="c146f-135">Все данные событий в формате RAW.</span><span class="sxs-lookup"><span data-stu-id="c146f-135">All event data in raw format.</span></span> |
| <span data-ttu-id="c146f-136">EventID</span><span class="sxs-lookup"><span data-stu-id="c146f-136">EventID</span></span> |<span data-ttu-id="c146f-137">Номер события.</span><span class="sxs-lookup"><span data-stu-id="c146f-137">Number of the event.</span></span> |
| <span data-ttu-id="c146f-138">EventLevel</span><span class="sxs-lookup"><span data-stu-id="c146f-138">EventLevel</span></span> |<span data-ttu-id="c146f-139">Степень серьезности события в числовом формате.</span><span class="sxs-lookup"><span data-stu-id="c146f-139">Severity of the event in numeric form.</span></span> |
| <span data-ttu-id="c146f-140">EventLevelName</span><span class="sxs-lookup"><span data-stu-id="c146f-140">EventLevelName</span></span> |<span data-ttu-id="c146f-141">Степень серьезности события в текстовом формате.</span><span class="sxs-lookup"><span data-stu-id="c146f-141">Severity of the event in text form.</span></span> |
| <span data-ttu-id="c146f-142">EventLog</span><span class="sxs-lookup"><span data-stu-id="c146f-142">EventLog</span></span> |<span data-ttu-id="c146f-143">Имя журнала событий, из которого было получено событие.</span><span class="sxs-lookup"><span data-stu-id="c146f-143">Name of the event log that the event was collected from.</span></span> |
| <span data-ttu-id="c146f-144">ParameterXml</span><span class="sxs-lookup"><span data-stu-id="c146f-144">ParameterXml</span></span> |<span data-ttu-id="c146f-145">Значения параметров события в формате XML.</span><span class="sxs-lookup"><span data-stu-id="c146f-145">Event parameter values in XML format.</span></span> |
| <span data-ttu-id="c146f-146">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="c146f-146">ManagementGroupName</span></span> |<span data-ttu-id="c146f-147">Имя группы управления для агентов System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="c146f-147">Name of the management group for System Center Operations Manager agents.</span></span>  <span data-ttu-id="c146f-148">Для других агентов это AOI-<workspace ID>.</span><span class="sxs-lookup"><span data-stu-id="c146f-148">For other agents, this value is AOI-<workspace ID></span></span> |
| <span data-ttu-id="c146f-149">RenderedDescription</span><span class="sxs-lookup"><span data-stu-id="c146f-149">RenderedDescription</span></span> |<span data-ttu-id="c146f-150">Описание события со значениями параметров.</span><span class="sxs-lookup"><span data-stu-id="c146f-150">Event description with parameter values</span></span> |
| <span data-ttu-id="c146f-151">Источник</span><span class="sxs-lookup"><span data-stu-id="c146f-151">Source</span></span> |<span data-ttu-id="c146f-152">Источник события.</span><span class="sxs-lookup"><span data-stu-id="c146f-152">Source of the event.</span></span> |
| <span data-ttu-id="c146f-153">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="c146f-153">SourceSystem</span></span> |<span data-ttu-id="c146f-154">Тип агента, из которого было получено событие.</span><span class="sxs-lookup"><span data-stu-id="c146f-154">Type of agent the event was collected from.</span></span> <br> <span data-ttu-id="c146f-155">OpsManager — агент Windows, подключенный напрямую или управляемый с помощью Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="c146f-155">OpsManager – Windows agent, either direct connect or Operations Manager managed</span></span> <br> <span data-ttu-id="c146f-156">Linux — все агенты Linux</span><span class="sxs-lookup"><span data-stu-id="c146f-156">Linux – All Linux agents</span></span>  <br> <span data-ttu-id="c146f-157">AzureStorage – диагностика Azure</span><span class="sxs-lookup"><span data-stu-id="c146f-157">AzureStorage – Azure Diagnostics</span></span> |
| <span data-ttu-id="c146f-158">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="c146f-158">TimeGenerated</span></span> |<span data-ttu-id="c146f-159">Дата и время создания события в Windows.</span><span class="sxs-lookup"><span data-stu-id="c146f-159">Date and time the event was created in Windows.</span></span> |
| <span data-ttu-id="c146f-160">UserName</span><span class="sxs-lookup"><span data-stu-id="c146f-160">UserName</span></span> |<span data-ttu-id="c146f-161">Имя пользователя учетной записи, который зафиксировал событие.</span><span class="sxs-lookup"><span data-stu-id="c146f-161">User name of the account that logged the event.</span></span> |

## <a name="log-searches-with-windows-events"></a><span data-ttu-id="c146f-162">Поиск журналов с помощью событий Windows</span><span class="sxs-lookup"><span data-stu-id="c146f-162">Log searches with Windows Events</span></span>
<span data-ttu-id="c146f-163">Ниже приведены различные примеры запросов поиска по журналу, которые извлекают записи событий Windows.</span><span class="sxs-lookup"><span data-stu-id="c146f-163">The following table provides different examples of log searches that retrieve Windows Event records.</span></span>

| <span data-ttu-id="c146f-164">Запрос</span><span class="sxs-lookup"><span data-stu-id="c146f-164">Query</span></span> | <span data-ttu-id="c146f-165">Описание</span><span class="sxs-lookup"><span data-stu-id="c146f-165">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="c146f-166">Type=Event</span><span class="sxs-lookup"><span data-stu-id="c146f-166">Type=Event</span></span> |<span data-ttu-id="c146f-167">Все события Windows.</span><span class="sxs-lookup"><span data-stu-id="c146f-167">All Windows events.</span></span> |
| <span data-ttu-id="c146f-168">Type=Event EventLevelName=error</span><span class="sxs-lookup"><span data-stu-id="c146f-168">Type=Event EventLevelName=error</span></span> |<span data-ttu-id="c146f-169">Все события Windows с указанием серьезности ошибки.</span><span class="sxs-lookup"><span data-stu-id="c146f-169">All Windows events with severity of error.</span></span> |
| <span data-ttu-id="c146f-170">Type=Event &#124; Measure count() by Source</span><span class="sxs-lookup"><span data-stu-id="c146f-170">Type=Event &#124; Measure count() by Source</span></span> |<span data-ttu-id="c146f-171">Число событий Windows по источникам.</span><span class="sxs-lookup"><span data-stu-id="c146f-171">Count of Windows events by source.</span></span> |
| <span data-ttu-id="c146f-172">Type=Event EventLevelName=error &#124; Measure count() by Source</span><span class="sxs-lookup"><span data-stu-id="c146f-172">Type=Event EventLevelName=error &#124; Measure count() by Source</span></span> |<span data-ttu-id="c146f-173">Число событий ошибок Windows по источникам.</span><span class="sxs-lookup"><span data-stu-id="c146f-173">Count of Windows error events by source.</span></span> |


>[!NOTE]
> <span data-ttu-id="c146f-174">Если ваша рабочая область переведена на [язык запросов Log Analytics](log-analytics-log-search-upgrade.md), указанные выше запросы будут изменены следующим образом.</span><span class="sxs-lookup"><span data-stu-id="c146f-174">If your workspace has been upgraded to the [new Log Analytics query language](log-analytics-log-search-upgrade.md), then the above queries would change to the following.</span></span>
>
>| <span data-ttu-id="c146f-175">Запрос</span><span class="sxs-lookup"><span data-stu-id="c146f-175">Query</span></span> | <span data-ttu-id="c146f-176">Описание</span><span class="sxs-lookup"><span data-stu-id="c146f-176">Description</span></span> |
|:---|:---|
| <span data-ttu-id="c146f-177">Событие</span><span class="sxs-lookup"><span data-stu-id="c146f-177">Event</span></span> |<span data-ttu-id="c146f-178">Все события Windows.</span><span class="sxs-lookup"><span data-stu-id="c146f-178">All Windows events.</span></span> |
| <span data-ttu-id="c146f-179">Event &#124; where EventLevelName == "error"</span><span class="sxs-lookup"><span data-stu-id="c146f-179">Event &#124; where EventLevelName == "error"</span></span> |<span data-ttu-id="c146f-180">Все события Windows с указанием серьезности ошибки.</span><span class="sxs-lookup"><span data-stu-id="c146f-180">All Windows events with severity of error.</span></span> |
| <span data-ttu-id="c146f-181">Event &#124; summarize count() by Source</span><span class="sxs-lookup"><span data-stu-id="c146f-181">Event &#124; summarize count() by Source</span></span> |<span data-ttu-id="c146f-182">Число событий Windows по источникам.</span><span class="sxs-lookup"><span data-stu-id="c146f-182">Count of Windows events by source.</span></span> |
| <span data-ttu-id="c146f-183">Event &#124; where EventLevelName == "error" &#124; summarize count() by Source</span><span class="sxs-lookup"><span data-stu-id="c146f-183">Event &#124; where EventLevelName == "error" &#124; summarize count() by Source</span></span> |<span data-ttu-id="c146f-184">Число событий ошибок Windows по источникам.</span><span class="sxs-lookup"><span data-stu-id="c146f-184">Count of Windows error events by source.</span></span> |


## <a name="next-steps"></a><span data-ttu-id="c146f-185">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="c146f-185">Next steps</span></span>
* <span data-ttu-id="c146f-186">Настройте службу Log Analytics для сбора других [источников данных](log-analytics-data-sources.md) для анализа.</span><span class="sxs-lookup"><span data-stu-id="c146f-186">Configure Log Analytics to collect other [data sources](log-analytics-data-sources.md) for analysis.</span></span>
* <span data-ttu-id="c146f-187">Узнайте больше об [операциях поиска по журналу](log-analytics-log-searches.md) , которые можно применять для анализа данных, собираемых из источников данных и решений.</span><span class="sxs-lookup"><span data-stu-id="c146f-187">Learn about [log searches](log-analytics-log-searches.md) to analyze the data collected from data sources and solutions.</span></span>  
* <span data-ttu-id="c146f-188">Используйте [настраиваемые поля](log-analytics-custom-fields.md) для анализа записей событий в отдельных полях.</span><span class="sxs-lookup"><span data-stu-id="c146f-188">Use [Custom Fields](log-analytics-custom-fields.md) to parse the event records into individual fields.</span></span>
* <span data-ttu-id="c146f-189">Настройте [коллекцию счетчиков производительности](log-analytics-data-sources-performance-counters.md) из агентов Windows.</span><span class="sxs-lookup"><span data-stu-id="c146f-189">Configure [collection of performance counters](log-analytics-data-sources-performance-counters.md) from your Windows agents.</span></span>
