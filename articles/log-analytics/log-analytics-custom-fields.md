---
title: "Настраиваемые поля в службе Log Analytics | Документация Майкрософт"
description: "Функция \"Настраиваемые поля\" в службе Log Analytics позволяет создавать поля с поддержкой поиска на основе данных OMS, которые добавляются к свойствам собранной записи.  В этой статье описывается процедура создания настраиваемого поля и представлено пошаговое руководство с примером события."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: 31572b51-6b57-4945-8208-ecfc3b5304fc
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/18/2016
ms.author: bwren
ms.openlocfilehash: 9e02094f155eaade9bc5fb49c4fbb798e546e989
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="custom-fields-in-log-analytics"></a><span data-ttu-id="a587a-104">Настраиваемые поля в службе Log Analytics</span><span class="sxs-lookup"><span data-stu-id="a587a-104">Custom fields in Log Analytics</span></span>
<span data-ttu-id="a587a-105">Функция **Настраиваемые поля** , предоставляемая службой Log Analytics, позволяет расширить существующие записи в репозитории OMS путем добавления собственных полей с поддержкой поиска.</span><span class="sxs-lookup"><span data-stu-id="a587a-105">The **Custom Fields** feature of Log Analytics allows you to extend existing records in the OMS repository by adding your own searchable fields.</span></span>  <span data-ttu-id="a587a-106">Настраиваемые поля автоматически заполняются на основе данных, извлеченных из других свойств в той же записи.</span><span class="sxs-lookup"><span data-stu-id="a587a-106">Custom fields are automatically populated from data extracted from other properties in the same record.</span></span>

![Обзор настраиваемых полей](media/log-analytics-custom-fields/overview.png)

<span data-ttu-id="a587a-108">Так, в примере записи ниже полезные данные содержатся в описании события.</span><span class="sxs-lookup"><span data-stu-id="a587a-108">For example, the sample record below has useful data buried in the event description.</span></span>  <span data-ttu-id="a587a-109">Если извлечь эти данные в отдельные свойства, они станут доступными для сортировки и фильтрации.</span><span class="sxs-lookup"><span data-stu-id="a587a-109">Extracting this data into separate properties makes it available for such actions as sorting and filtering.</span></span>

![Кнопка поиска по журналу](media/log-analytics-custom-fields/sample-extract.png)

> [!NOTE]
> <span data-ttu-id="a587a-111">В предварительной версии этой функции поддерживаются только 100 настраиваемых полей на рабочую область.</span><span class="sxs-lookup"><span data-stu-id="a587a-111">In the Preview, you are limited to 100 custom fields in your workspace.</span></span>  <span data-ttu-id="a587a-112">С выходом общедоступной версии это число увеличится.</span><span class="sxs-lookup"><span data-stu-id="a587a-112">This limit will be expanded when this feature reaches general availability.</span></span>
> 
> 

## <a name="creating-a-custom-field"></a><span data-ttu-id="a587a-113">Создание настраиваемого поля</span><span class="sxs-lookup"><span data-stu-id="a587a-113">Creating a custom field</span></span>
<span data-ttu-id="a587a-114">При создании настраиваемого поля в Log Analytics нужно обозначить данные, которые будут использоваться для его заполнения.</span><span class="sxs-lookup"><span data-stu-id="a587a-114">When you create a custom field, Log Analytics must understand which data to use to populate its value.</span></span>  <span data-ttu-id="a587a-115">Для быстрого выявления этих данных в службе используется метод под названием FlashExtract, разработанный в Microsoft Research.</span><span class="sxs-lookup"><span data-stu-id="a587a-115">It uses a technology from Microsoft Research called FlashExtract to quickly identify this data.</span></span>  <span data-ttu-id="a587a-116">Вместо запрашивания явных инструкций Log Analytics определяет данные, которые нужно извлечь, на основе предоставленных примеров.</span><span class="sxs-lookup"><span data-stu-id="a587a-116">Rather than requiring you to provide explicit instructions, Log Analytics learns about the data you want to extract from examples that you provide.</span></span>

<span data-ttu-id="a587a-117">В следующих разделах описаны шаги по созданию настраиваемого поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-117">The following sections provide the procedure for creating a custom field.</span></span>  <span data-ttu-id="a587a-118">В конце этой статьи приведено пошаговое руководство по извлечению данных.</span><span class="sxs-lookup"><span data-stu-id="a587a-118">At the bottom of this article is a walkthrough of a sample extraction.</span></span>

> [!NOTE]
> <span data-ttu-id="a587a-119">Настраиваемое поле заполняется, когда в хранилище данных OMS добавляются записи, соответствующие заданному условию, поэтому это поле отображается только в тех записях, которые были собраны после его создания.</span><span class="sxs-lookup"><span data-stu-id="a587a-119">The custom field is populated as records matching the specified criteria are added to the OMS data store, so it will only appear on records collected after the custom field is created.</span></span>  <span data-ttu-id="a587a-120">Настраиваемое поле не будет добавлено в записи, которые при его создании уже находились в хранилище данных.</span><span class="sxs-lookup"><span data-stu-id="a587a-120">The custom field will not be added to records that are already in the data store when it’s created.</span></span>
> 
> 

### <a name="step-1--identify-records-that-will-have-the-custom-field"></a><span data-ttu-id="a587a-121">Шаг 1. Определение записей, которые будут содержать настраиваемое поле</span><span class="sxs-lookup"><span data-stu-id="a587a-121">Step 1 – Identify records that will have the custom field</span></span>
<span data-ttu-id="a587a-122">Прежде всего нужно определить записи, которые будут содержать настраиваемое поле.</span><span class="sxs-lookup"><span data-stu-id="a587a-122">The first step is to identify the records that will get the custom field.</span></span>  <span data-ttu-id="a587a-123">Используйте [стандартный поиск по журналу](log-analytics-log-searches.md) , чтобы выбрать запись, которая будет выступать в качестве модели для обучения Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="a587a-123">You start with a [standard log search](log-analytics-log-searches.md) and then select a record to act as the model that Log Analytics will learn from.</span></span>  <span data-ttu-id="a587a-124">После выбора параметра извлечения данных в настраиваемое поле откроется **мастер извлечения полей** , где нужно проверить и уточнить условия.</span><span class="sxs-lookup"><span data-stu-id="a587a-124">When you specify that you are going to extract data into a custom field, the **Field Extraction Wizard** is opened where you validate and refine the criteria.</span></span>

1. <span data-ttu-id="a587a-125">Выберите функцию **поиска по журналу** и введите [запрос на получение записей](log-analytics-log-searches.md) , которые будет содержать настраиваемое поле.</span><span class="sxs-lookup"><span data-stu-id="a587a-125">Go to **Log Search** and use a [query to retrieve the records](log-analytics-log-searches.md) that will have the custom field.</span></span>
2. <span data-ttu-id="a587a-126">Выберите запись, которую Log Analytics будет использовать в качестве модели для извлечения данных, нужных для заполнения поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-126">Select a record that Log Analytics will use to act as a model for extracting data to populate the custom field.</span></span>  <span data-ttu-id="a587a-127">Обозначьте данные, которые нужно извлечь из этой записи. Log Analytics будет использовать эту информацию, чтобы определить логику заполнения настраиваемого поля для всех подобных записей.</span><span class="sxs-lookup"><span data-stu-id="a587a-127">You will identify the data that you want to extract from this record, and Log Analytics will use this information to determine the logic to populate the custom field for all similar records.</span></span>
3. <span data-ttu-id="a587a-128">Нажмите кнопку слева возле любого текстового свойства записи и выберите команду **Extract fields from**(Извлечь поля из).</span><span class="sxs-lookup"><span data-stu-id="a587a-128">Click the button to the left of any text property of the record and select **Extract fields from**.</span></span>
4. <span data-ttu-id="a587a-129">После этого **откроется мастер извлечения полей**, и выбранная запись будет отображаться в столбце **Основной пример**.</span><span class="sxs-lookup"><span data-stu-id="a587a-129">The **Field Extraction Wizard is opened**, and the record you selected is displayed in the **Main Example** column.</span></span>  <span data-ttu-id="a587a-130">Настраиваемое поле будет определено для записей, значения в свойствах которых соответствуют выбранным.</span><span class="sxs-lookup"><span data-stu-id="a587a-130">The custom field will be defined for those records with the same values in the properties that are selected.</span></span>  
5. <span data-ttu-id="a587a-131">Если полученный результат вам не подходит, уточните условия, выбрав дополнительные поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-131">If the selection is not exactly what you want, select additional fields to narrow the criteria.</span></span>  <span data-ttu-id="a587a-132">Чтобы изменить значения полей для условий, отмените выбор записи и выберите другую запись, соответствующую необходимым условиям.</span><span class="sxs-lookup"><span data-stu-id="a587a-132">In order to change the field values for the criteria, you must cancel and select a different record matching the criteria you want.</span></span>

### <a name="step-2---perform-initial-extract"></a><span data-ttu-id="a587a-133">Шаг 2. Выполнение начального извлечения</span><span class="sxs-lookup"><span data-stu-id="a587a-133">Step 2 - Perform initial extract.</span></span>
<span data-ttu-id="a587a-134">После определения записей, которые будут иметь настраиваемое поле, необходимо указать данные, которые требуется извлечь.</span><span class="sxs-lookup"><span data-stu-id="a587a-134">Once you’ve identified the records that will have the custom field, you identify the data that you want to extract.</span></span>  <span data-ttu-id="a587a-135">На основе этих данных Log Analytics определит аналогичные шаблоны в схожих записях.</span><span class="sxs-lookup"><span data-stu-id="a587a-135">Log Analytics will use this information to identify similar patterns in similar records.</span></span>  <span data-ttu-id="a587a-136">После этого вы сможете проверить результаты и указать дополнительные сведения, которые Log Analytics будет использовать при анализе.</span><span class="sxs-lookup"><span data-stu-id="a587a-136">In the step after this you will be able to validate the results and provide further details for Log Analytics to use in its analysis.</span></span>

1. <span data-ttu-id="a587a-137">Выделите текст в примере записи, для которой требуется заполнить настраиваемое поле.</span><span class="sxs-lookup"><span data-stu-id="a587a-137">Highlight the text in the sample record that you want to populate the custom field.</span></span>  <span data-ttu-id="a587a-138">Затем появится диалоговое окно, в котором нужно указать имя для поля и запустить выполнение начального извлечения.</span><span class="sxs-lookup"><span data-stu-id="a587a-138">You will then be presented with a dialog box to provide a name for the field and to perform the initial extract.</span></span>  <span data-ttu-id="a587a-139">К имени поля будет автоматически добавлено **\__CF**.</span><span class="sxs-lookup"><span data-stu-id="a587a-139">The characters **\_CF** will automatically be appended.</span></span>
2. <span data-ttu-id="a587a-140">Нажмите кнопку **Извлечь** , чтобы запустить анализ собранных записей.</span><span class="sxs-lookup"><span data-stu-id="a587a-140">Click **Extract** to perform an analysis of collected records.</span></span>  
3. <span data-ttu-id="a587a-141">В разделах **Сводка** и **Результаты поиска** отобразятся результаты извлечения. Таким образом вы сможете проверить правильность извлечения.</span><span class="sxs-lookup"><span data-stu-id="a587a-141">The **Summary** and **Search Results** sections display the results of the extract so you can inspect its accuracy.</span></span>  <span data-ttu-id="a587a-142">В разделе **Сводка** содержатся условия, используемые для поиска записей, и количество всех определенных значений данных.</span><span class="sxs-lookup"><span data-stu-id="a587a-142">**Summary** displays the criteria used to identify records and a count for each of the data values identified.</span></span>  <span data-ttu-id="a587a-143">В разделе **Результаты поиска** приведен подробный список записей, соответствующих условиям.</span><span class="sxs-lookup"><span data-stu-id="a587a-143">**Search Results** provides a detailed list of records matching the criteria.</span></span>

### <a name="step-3--verify-accuracy-of-the-extract-and-create-custom-field"></a><span data-ttu-id="a587a-144">Шаг 3. Проверка правильности извлечения и создание настраиваемого поля</span><span class="sxs-lookup"><span data-stu-id="a587a-144">Step 3 – Verify accuracy of the extract and create custom field</span></span>
<span data-ttu-id="a587a-145">После выполнения начального извлечения в Log Analytics отобразятся результаты на основе предварительно собранных данных.</span><span class="sxs-lookup"><span data-stu-id="a587a-145">Once you have performed the initial extract, Log Analytics will display its results based on data that has already been collected.</span></span>  <span data-ttu-id="a587a-146">Если эти результаты правильные, можно сразу перейти к созданию настраиваемого поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-146">If the results look accurate then you can create the custom field with no further work.</span></span>  <span data-ttu-id="a587a-147">В противном случае нужно уточнить результаты, чтобы улучшить логику Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="a587a-147">If not, then you can refine the results so that Log Analytics can improve its logic.</span></span>

1. <span data-ttu-id="a587a-148">Если какие-либо значения, определенные в ходе начального извлечения, неверны, щелкните значок **Изменить** рядом с неправильной записью и выберите команду **Изменить этот выделенный элемент**.</span><span class="sxs-lookup"><span data-stu-id="a587a-148">If any values in the initial extract aren’t correct, then click the **Edit** icon next to an inaccurate record and select **Modify this highlight** in order to modify the selection.</span></span>
2. <span data-ttu-id="a587a-149">Эта запись скопируется в раздел **Дополнительные примеры** под столбцом **Основной пример**.</span><span class="sxs-lookup"><span data-stu-id="a587a-149">The entry is copied to the **Additional examples** section underneath the **Main Example**.</span></span>  <span data-ttu-id="a587a-150">Здесь можно выделить необходимую часть данных, чтобы указать Log Analytics на правильный выбор.</span><span class="sxs-lookup"><span data-stu-id="a587a-150">You can adjust the highlight here to help Log Analytics understand the selection it should have made.</span></span>
3. <span data-ttu-id="a587a-151">Нажмите кнопку **Извлечь** , чтобы использовать эту информацию для оценки всех существующих записей.</span><span class="sxs-lookup"><span data-stu-id="a587a-151">Click **Extract** to use this new information to evaluate all the existing records.</span></span>  <span data-ttu-id="a587a-152">Для других записей могут быть изменены результаты на основе этих новых сведений.</span><span class="sxs-lookup"><span data-stu-id="a587a-152">The results may be modified for records other than the one you just modified based on this new intelligence.</span></span>
4. <span data-ttu-id="a587a-153">Вносите исправления до тех пор, пока во всех записях в извлечении не будут правильно определены данные для заполнения нового настраиваемого поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-153">Continue to add corrections until all records in the extract correctly identify the data to populate the new custom field.</span></span>
5. <span data-ttu-id="a587a-154">Добившись удовлетворительных результатов, нажмите кнопку **Save Extract** (Сохранить извлечение).</span><span class="sxs-lookup"><span data-stu-id="a587a-154">Click **Save Extract** when you are satisfied with the results.</span></span>  <span data-ttu-id="a587a-155">Теперь настраиваемое поле определено, но оно еще не добавлено к записям.</span><span class="sxs-lookup"><span data-stu-id="a587a-155">The custom field is now defined, but it won’t be added to any records yet.</span></span>
6. <span data-ttu-id="a587a-156">Подождите, пока не будут собраны новые записи, соответствующие указанным условиям, и выполните поиск по журналу снова.</span><span class="sxs-lookup"><span data-stu-id="a587a-156">Wait for new records matching the specified criteria to be collected and then run the log search again.</span></span> <span data-ttu-id="a587a-157">После этого новые записи будут содержать настраиваемое поле.</span><span class="sxs-lookup"><span data-stu-id="a587a-157">New records should have the custom field.</span></span>
7. <span data-ttu-id="a587a-158">Используйте настраиваемое поле, как и другие свойства записи.</span><span class="sxs-lookup"><span data-stu-id="a587a-158">Use the custom field like any other record property.</span></span>  <span data-ttu-id="a587a-159">Его можно применять для объединения и группирования данных, а также для создания новых сведений для анализа.</span><span class="sxs-lookup"><span data-stu-id="a587a-159">You can use it to aggregate and group data and even use it to produce new insights.</span></span>

## <a name="viewing-custom-fields"></a><span data-ttu-id="a587a-160">Просмотр настраиваемых полей</span><span class="sxs-lookup"><span data-stu-id="a587a-160">Viewing custom fields</span></span>
<span data-ttu-id="a587a-161">Вы можете просмотреть список всех настраиваемых полей в группе управления с помощью элемента **Параметры** на панели мониторинга OMS.</span><span class="sxs-lookup"><span data-stu-id="a587a-161">You can view a list of all custom fields in your management group from the **Settings** tile of the OMS dashboard.</span></span>  <span data-ttu-id="a587a-162">Выберите вкладку **Данные**, а затем — раздел **Настраиваемые поля**, чтобы просмотреть список всех настраиваемых полей в рабочей области.</span><span class="sxs-lookup"><span data-stu-id="a587a-162">Select **Data** and then **Custom fields** for a list of all custom fields in your workspace.</span></span>  

![Настраиваемые поля](media/log-analytics-custom-fields/list.png)

## <a name="removing-a-custom-field"></a><span data-ttu-id="a587a-164">Удаление настраиваемого поля</span><span class="sxs-lookup"><span data-stu-id="a587a-164">Removing a custom field</span></span>
<span data-ttu-id="a587a-165">Настраиваемое поле можно удалить двумя способами.</span><span class="sxs-lookup"><span data-stu-id="a587a-165">There are two ways to remove a custom field.</span></span>  <span data-ttu-id="a587a-166">Первый способ — использовать параметр **Удалить** для каждого поля при просмотре полного списка (процедура его открытия описана выше).</span><span class="sxs-lookup"><span data-stu-id="a587a-166">The first is the **Remove** option for each field when viewing the complete list as described above.</span></span>  <span data-ttu-id="a587a-167">Второй способ — извлечь запись , нажать кнопку слева от поля</span><span class="sxs-lookup"><span data-stu-id="a587a-167">The other method is to retrieve a record and click the button to the left of the field.</span></span>  <span data-ttu-id="a587a-168">и в открывшемся меню выбрать пункт удаления настраиваемого поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-168">The menu will have an option to remove the custom field.</span></span>

## <a name="sample-walkthrough"></a><span data-ttu-id="a587a-169">Пошаговое руководство</span><span class="sxs-lookup"><span data-stu-id="a587a-169">Sample walkthrough</span></span>
<span data-ttu-id="a587a-170">В этом разделе описывается полная процедура создания настраиваемого поля.</span><span class="sxs-lookup"><span data-stu-id="a587a-170">The following section walks through a complete example of creating a custom field.</span></span>  <span data-ttu-id="a587a-171">В этом примере извлекается имя службы в событиях Windows, которые указывают на изменение состояния службы.</span><span class="sxs-lookup"><span data-stu-id="a587a-171">This example extracts the service name in Windows events that indicate a service changing state.</span></span>  <span data-ttu-id="a587a-172">При этом используются события, созданные диспетчером служб в системном журнале на компьютерах Windows.</span><span class="sxs-lookup"><span data-stu-id="a587a-172">This relies on events created by Service Control Manager in the System log on Windows computers.</span></span>  <span data-ttu-id="a587a-173">Если вы хотите выполнить этот пример, необходимо, чтобы на компьютере был включен [сбор информационных событий в системном журнале](log-analytics-data-sources-windows-events.md).</span><span class="sxs-lookup"><span data-stu-id="a587a-173">If you want to follow this example, you must be [collecting Information events for the System log](log-analytics-data-sources-windows-events.md).</span></span>

<span data-ttu-id="a587a-174">Мы введем запрос, как на снимке экрана ниже, для возврата всех событий, созданных диспетчером служб, с идентификатором 7036, т. е. событий запуска или остановки службы.</span><span class="sxs-lookup"><span data-stu-id="a587a-174">We enter the following query to return all events from Service Control Manager that have an Event ID of 7036 which is the event that indicates a service starting or stopping.</span></span>

![Запрос](media/log-analytics-custom-fields/query.png)

<span data-ttu-id="a587a-176">Затем мы выберем любую запись с идентификатором события 7036.</span><span class="sxs-lookup"><span data-stu-id="a587a-176">We then select any record with event ID 7036.</span></span>

![Исходная запись](media/log-analytics-custom-fields/source-record.png)

<span data-ttu-id="a587a-178">Нам необходимо нажать кнопку рядом со свойством **RenderedDescription** , в котором отображается имя службы.</span><span class="sxs-lookup"><span data-stu-id="a587a-178">We want the service name that appears in the **RenderedDescription** property and select the button next to this property.</span></span>

![Извлечение полей](media/log-analytics-custom-fields/extract-fields.png)

<span data-ttu-id="a587a-180">После этого откроется **мастер извлечения полей**, и в столбце **Основной пример** будут выбраны поля **EventLog** и **EventID**.</span><span class="sxs-lookup"><span data-stu-id="a587a-180">The **Field Extraction Wizard** is opened, and the **EventLog** and **EventID** fields are selected in the **Main Example** column.</span></span>  <span data-ttu-id="a587a-181">Это означает, что настраиваемое поле будет определено для событий системного журнала с идентификатором 7036.</span><span class="sxs-lookup"><span data-stu-id="a587a-181">This indicates that the custom field will be defined for events from the System log with an event ID of 7036.</span></span>  <span data-ttu-id="a587a-182">Этих полей достаточно. Нам больше не нужно ничего выбирать.</span><span class="sxs-lookup"><span data-stu-id="a587a-182">This is sufficient so we don’t need to select any other fields.</span></span>

![Main Example](media/log-analytics-custom-fields/main-example.png)

<span data-ttu-id="a587a-184">Мы выделим имя службы в свойстве **RenderedDescription** и назначим службе имя **Service**.</span><span class="sxs-lookup"><span data-stu-id="a587a-184">We highlight the name of the service in the **RenderedDescription** property and use **Service** to identify the service name.</span></span>  <span data-ttu-id="a587a-185">Настраиваемое поле будет называться **Service_CF**.</span><span class="sxs-lookup"><span data-stu-id="a587a-185">The custom field will be called **Service_CF**.</span></span>

![Заголовок поля](media/log-analytics-custom-fields/field-title.png)

<span data-ttu-id="a587a-187">После извлечения мы увидим, что имя службы определено правильно только для некоторых записей.</span><span class="sxs-lookup"><span data-stu-id="a587a-187">We see that the service name is identified properly for some records but not for others.</span></span>   <span data-ttu-id="a587a-188">В разделе **Результаты поиска** видно, что **адаптер производительности WMI** выделен не полностью.</span><span class="sxs-lookup"><span data-stu-id="a587a-188">The **Search Results** show that part of the name for the **WMI Performance Adapter** wasn’t selected.</span></span>  <span data-ttu-id="a587a-189">В свою очередь, в разделе **Сводка** четыре записи со службой **DPRMA** включают лишнее слово и определены две записи, в которых упоминается **установщик модулей**, а не **установщик модулей Windows**.</span><span class="sxs-lookup"><span data-stu-id="a587a-189">The **Summary** shows that four records with **DPRMA** service incorrectly included an extra word, and two records identified **Modules Installer** instead of **Windows Modules Installer**.</span></span>  

![Результаты поиска](media/log-analytics-custom-fields/search-results-01.png)

<span data-ttu-id="a587a-191">Начнем с записи об **адаптере производительности WMI** .</span><span class="sxs-lookup"><span data-stu-id="a587a-191">We start with the **WMI Performance Adapter** record.</span></span>  <span data-ttu-id="a587a-192">Щелкнем рядом с ней значок изменения, а затем — **Modify this highlight**(Изменить это выделение).</span><span class="sxs-lookup"><span data-stu-id="a587a-192">We click its edit icon and then **Modify this highlight**.</span></span>  

![Изменение выделения](media/log-analytics-custom-fields/modify-highlight.png)

<span data-ttu-id="a587a-194">Выделим полное название адаптера, включая **WMI**, и выполним извлечение повторно.</span><span class="sxs-lookup"><span data-stu-id="a587a-194">We increase    the highlight to include the word **WMI** and then rerun the extract.</span></span>  

![Дополнительный пример](media/log-analytics-custom-fields/additional-example-01.png)

<span data-ttu-id="a587a-196">Как видно, записи с **адаптером производительности WMI** исправлены. Кроме того, служба Log Analytics использовала эту информацию для определения записей с **установщиком модулей Windows**.</span><span class="sxs-lookup"><span data-stu-id="a587a-196">We can see that the entries for **WMI Performance Adapter** have been corrected, and Log Analytics also used that information to correct the records for **Windows Module Installer**.</span></span>  <span data-ttu-id="a587a-197">Все эти исправления видны в разделе **Сводка**. Однако служба **DPMRA** по-прежнему указана неправильно.</span><span class="sxs-lookup"><span data-stu-id="a587a-197">We can see in the **Summary** section though that **DPMRA** is still not being identified correctly.</span></span>

![Результаты поиска](media/log-analytics-custom-fields/search-results-02.png)

<span data-ttu-id="a587a-199">Перейдем к записи со службой DPMRA и выполним ту же процедуру, чтобы исправить ее.</span><span class="sxs-lookup"><span data-stu-id="a587a-199">We scroll to a record with the DPMRA service and use the same process to correct that record.</span></span>

![Дополнительный пример](media/log-analytics-custom-fields/additional-example-02.png)

 <span data-ttu-id="a587a-201">После извлечения видно, что теперь все результаты правильные.</span><span class="sxs-lookup"><span data-stu-id="a587a-201">When we run the extraction, we can see that all of our results are now accurate.</span></span>

![Результаты поиска](media/log-analytics-custom-fields/search-results-03.png)

<span data-ttu-id="a587a-203">Поле **Service_CF** создано, но еще не добавлено ни к одной записи.</span><span class="sxs-lookup"><span data-stu-id="a587a-203">We can see that **Service_CF** is created but is not yet added to any records.</span></span>

![Начальное количество](media/log-analytics-custom-fields/initial-count.png)

<span data-ttu-id="a587a-205">По истечении некоторого времени будут собраны новые события, и поле **Service_CF** начнет добавляться к записям, соответствующим нашим условиям.</span><span class="sxs-lookup"><span data-stu-id="a587a-205">After some time has passed so new events are collected, we can see that that the **Service_CF** field is now being added to records that match our criteria.</span></span>

![Окончательные результаты](media/log-analytics-custom-fields/final-results.png)

<span data-ttu-id="a587a-207">Теперь мы можем использовать настраиваемое поле, как и другие свойства записи.</span><span class="sxs-lookup"><span data-stu-id="a587a-207">We can now use the custom field like any other record property.</span></span>  <span data-ttu-id="a587a-208">Для иллюстрации этого мы создадим запрос, который группирует записи по новому полю **Service_CF**. Таким образом мы сможем проверить, какие службы наиболее активные.</span><span class="sxs-lookup"><span data-stu-id="a587a-208">To illustrate this, we create a query that groups by the new **Service_CF** field to inspect which services are the most active.</span></span>

![Группировка по запросу](media/log-analytics-custom-fields/query-group.png)

## <a name="next-steps"></a><span data-ttu-id="a587a-210">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a587a-210">Next steps</span></span>
* <span data-ttu-id="a587a-211">Узнайте больше о [запросах поиска по журналу](log-analytics-log-searches.md) для создания запросов с использованием настраиваемых полей в качестве условия.</span><span class="sxs-lookup"><span data-stu-id="a587a-211">Learn about [log searches](log-analytics-log-searches.md) to build queries using custom fields for criteria.</span></span>
* <span data-ttu-id="a587a-212">Отслеживайте [пользовательские файлы журналов](log-analytics-data-sources-custom-logs.md), которые можно анализировать с помощью настраиваемых полей.</span><span class="sxs-lookup"><span data-stu-id="a587a-212">Monitor [custom log files](log-analytics-data-sources-custom-logs.md) that you parse using custom fields.</span></span>

