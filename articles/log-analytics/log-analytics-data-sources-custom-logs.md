---
title: "aaaCollect пользовательские журналы в аналитику журнала OMS | Документы Microsoft"
description: "Служба Log Analytics может собирать события из текстовых файлов на компьютерах Windows и Linux.  В этой статье описывается toodefine новый пользовательский журнал и сведения о записи hello их создания в репозитории OMS hello."
services: log-analytics
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: aca7f6bb-6f53-4fd4-a45c-93f12ead4ae1
ms.service: log-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/15/2017
ms.author: bwren
ms.openlocfilehash: a75d058c371fecf7c43690a797d4e650c1570317
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="custom-logs-in-log-analytics"></a><span data-ttu-id="d1020-104">Настраиваемые журналы в службе Log Analytics</span><span class="sxs-lookup"><span data-stu-id="d1020-104">Custom logs in Log Analytics</span></span>
<span data-ttu-id="d1020-105">источник данных настраиваемые журналы Hello в службе анализа журналов позволяет toocollect события из текстовых файлов на компьютерах Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="d1020-105">hello Custom Logs data source in Log Analytics allows you toocollect events from text files on both Windows and Linux computers.</span></span> <span data-ttu-id="d1020-106">Во многих приложениях файлам сведения tootext вместо стандартной службы ведения журнала, такие как системный журнал и журнал событий Windows.</span><span class="sxs-lookup"><span data-stu-id="d1020-106">Many applications log information tootext files instead of standard logging services such as Windows Event log or Syslog.</span></span>  <span data-ttu-id="d1020-107">После сбора, можно выполнить синтаксический анализ каждой записи в журнале hello в полях tooindividual, с помощью hello [настраиваемые поля](log-analytics-custom-fields.md) функции аналитики журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-107">Once collected, you can parse each record in hello log in tooindividual fields using hello [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

![Сбор данных из настраиваемых журналов](media/log-analytics-data-sources-custom-logs/overview.png)

<span data-ttu-id="d1020-109">Hello журнала файлов toobe собранные должно соответствовать hello следующие условия.</span><span class="sxs-lookup"><span data-stu-id="d1020-109">hello log files toobe collected must match hello following criteria.</span></span>

- <span data-ttu-id="d1020-110">Hello журнала необходимо иметь одну запись в строке или использовать соответствующий timestamp, одно из следующих hello форматы в начале каждой операции hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-110">hello log must either have a single entry per line or use a timestamp matching one of hello following formats at hello start of each entry.</span></span>

    <span data-ttu-id="d1020-111">ГГГГ-ММ-ДД ЧЧ:ММ:СС; </span><span class="sxs-lookup"><span data-stu-id="d1020-111">YYYY-MM-DD HH:MM:SS</span></span><br><span data-ttu-id="d1020-112">М/Д/ГГГГ ЧЧ:ММ:СС AM/PM (12-часовой формат);</span><span class="sxs-lookup"><span data-stu-id="d1020-112">M/D/YYYY HH:MM:SS AM/PM</span></span> <br><span data-ttu-id="d1020-113">М ДД, ГГГГ ЧЧ:ММ:СС.</span><span class="sxs-lookup"><span data-stu-id="d1020-113">Mon DD,YYYY HH:MM:SS</span></span>

- <span data-ttu-id="d1020-114">файл журнала Hello не должно допускать циклические обновлений где hello файл перезаписывается новых записей.</span><span class="sxs-lookup"><span data-stu-id="d1020-114">hello log file must not allow circular updates where hello file is overwritten with new entries.</span></span>
- <span data-ttu-id="d1020-115">файл журнала Hello должен использовать кодировку ASCII или UTF-8.</span><span class="sxs-lookup"><span data-stu-id="d1020-115">hello log file must use ASCII or UTF-8 encoding.</span></span>  <span data-ttu-id="d1020-116">Другие форматы, например UTF-16, не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="d1020-116">Other formats such as UTF-16 are not supported.</span></span>

>[!NOTE]
><span data-ttu-id="d1020-117">Если имеются повторяющиеся записи в файл журнала hello, служба аналитики журналов будет собирать их.</span><span class="sxs-lookup"><span data-stu-id="d1020-117">If there are duplicate entries in hello log file, Log Analytics will collect them.</span></span>  <span data-ttu-id="d1020-118">Тем не менее результаты поиска hello будет согласовано где результаты фильтрации hello Показать больше событий, чем число результатов hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-118">However, hello search results will be inconsistent where hello filter results show more events than hello result count.</span></span>  <span data-ttu-id="d1020-119">Будет ли это важно проверить toodetermine hello журнала, если приложение hello, который его создал вызывает это поведение и по возможности его адрес перед созданием определения collection hello пользовательского журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-119">It will be important that you validate hello log toodetermine if hello application that creates it is causing this behavior and address it if possible before creating hello custom log collection definition.</span></span>  
>
  
## <a name="defining-a-custom-log"></a><span data-ttu-id="d1020-120">Определение настраиваемого журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-120">Defining a custom log</span></span>
<span data-ttu-id="d1020-121">Используйте следующие процедуры toodefine файл пользовательского журнала hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-121">Use hello following procedure toodefine a custom log file.</span></span>  <span data-ttu-id="d1020-122">Прокрутите toohello конце статьи Пошаговое руководство образца добавления пользовательского журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-122">Scroll toohello end of this article for a walkthrough of a sample of adding a custom log.</span></span>

### <a name="step-1-open-hello-custom-log-wizard"></a><span data-ttu-id="d1020-123">Шаг 1.</span><span class="sxs-lookup"><span data-stu-id="d1020-123">Step 1.</span></span> <span data-ttu-id="d1020-124">Откройте hello журнала специальный мастер</span><span class="sxs-lookup"><span data-stu-id="d1020-124">Open hello Custom Log Wizard</span></span>
<span data-ttu-id="d1020-125">Hello специальный мастер журнала выполняется на портале OMS hello и позволяет вам toodefine новый toocollect пользовательского журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-125">hello Custom Log Wizard runs in hello OMS portal and allows you toodefine a new custom log toocollect.</span></span>

1. <span data-ttu-id="d1020-126">На портале OMS hello, go слишком**параметры**.</span><span class="sxs-lookup"><span data-stu-id="d1020-126">In hello OMS portal, go too**Settings**.</span></span>
2. <span data-ttu-id="d1020-127">Выберите вкладку **Данные**, а затем — раздел **Настраиваемые журналы**.</span><span class="sxs-lookup"><span data-stu-id="d1020-127">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="d1020-128">По умолчанию все изменения конфигурации автоматически размещаемых tooall агентов.</span><span class="sxs-lookup"><span data-stu-id="d1020-128">By default, all configuration changes are automatically pushed tooall agents.</span></span>  <span data-ttu-id="d1020-129">Агенты Linux файл конфигурации отправляется сборщик данных Fluentd toohello.</span><span class="sxs-lookup"><span data-stu-id="d1020-129">For Linux agents, a configuration file is sent toohello Fluentd data collector.</span></span>  <span data-ttu-id="d1020-130">Если вы хотите toomodify этот файл вручную на каждом агенте Linux, затем снимите флажок hello *применить указанную ниже компьютеры Linux toomy конфигурации*.</span><span class="sxs-lookup"><span data-stu-id="d1020-130">If you wish toomodify this file manually on each Linux agent, then uncheck hello box *Apply below configuration toomy Linux machines*.</span></span>
4. <span data-ttu-id="d1020-131">Нажмите кнопку **добавить +** tooopen hello пользовательского журнала мастера.</span><span class="sxs-lookup"><span data-stu-id="d1020-131">Click **Add+** tooopen hello Custom Log Wizard.</span></span>

### <a name="step-2-upload-and-parse-a-sample-log"></a><span data-ttu-id="d1020-132">Шаг 2.</span><span class="sxs-lookup"><span data-stu-id="d1020-132">Step 2.</span></span> <span data-ttu-id="d1020-133">Загрузка и преобразование примера журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-133">Upload and parse a sample log</span></span>
<span data-ttu-id="d1020-134">Запустить, загрузив образец hello пользовательского журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-134">You start by uploading a sample of hello custom log.</span></span>  <span data-ttu-id="d1020-135">Мастер Hello синтаксический анализ и отобразить hello записи в этом файле можно toovalidate.</span><span class="sxs-lookup"><span data-stu-id="d1020-135">hello wizard will parse and display hello entries in this file for you toovalidate.</span></span>  <span data-ttu-id="d1020-136">Служба аналитики журналов будет использовать разделитель hello, укажите tooidentify каждой записи.</span><span class="sxs-lookup"><span data-stu-id="d1020-136">Log Analytics will use hello delimiter that you specify tooidentify each record.</span></span>

<span data-ttu-id="d1020-137">**Новая строка** является разделителем по умолчанию hello и используется для файлов журнала, имеющие одну запись в каждой строке.</span><span class="sxs-lookup"><span data-stu-id="d1020-137">**New Line** is hello default delimiter and is used for log files that have a single entry per line.</span></span>  <span data-ttu-id="d1020-138">Если строка hello начинается с даты и времени в один из доступных форматов hello, то можно указать **Timestamp** разделитель, который поддерживает операции, охватывающие более одной строки.</span><span class="sxs-lookup"><span data-stu-id="d1020-138">If hello line starts with a date and time in one of hello available formats, then you can specify a **Timestamp** delimiter which supports entries that span more than one line.</span></span>

<span data-ttu-id="d1020-139">Если используется разделитель отметки времени, то hello свойстве TimeGenerated каждую запись в OMS будет заполняться hello даты и времени для этой записи в файл журнала hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-139">If a timestamp delimiter is used, then hello TimeGenerated property of each record stored in OMS will be populated with hello date/time specified for that entry in hello log file.</span></span>  <span data-ttu-id="d1020-140">Если используется новый разделитель строк, TimeGenerated заполняется с датой и временем, что анализа журналов собраны запись hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-140">If a new line delimiter is used, then TimeGenerated is populated with date and time that Log Analytics collected hello entry.</span></span>

> [!NOTE]
> <span data-ttu-id="d1020-141">Служба аналитики журналов в настоящее время обрабатывает hello даты и времени собираются из журналов с помощью разделителя отметки времени в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="d1020-141">Log Analytics currently treats hello date/time collected from a log using a timestamp delimiter as UTC.</span></span>  <span data-ttu-id="d1020-142">Это будет скоро измененные toouse hello часового пояса на агенте hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-142">This will soon be changed toouse hello time zone on hello agent.</span></span>
>
>

1. <span data-ttu-id="d1020-143">Нажмите кнопку **Обзор** и обзор tooa образец файла.</span><span class="sxs-lookup"><span data-stu-id="d1020-143">Click **Browse** and browse tooa sample file.</span></span>  <span data-ttu-id="d1020-144">Обратите внимание, что в некоторых браузерах эта кнопка может называться **Выбрать файл** .</span><span class="sxs-lookup"><span data-stu-id="d1020-144">Note that this may button may be labeled **Choose File** in some browsers.</span></span>
2. <span data-ttu-id="d1020-145">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="d1020-145">Click **Next**.</span></span>
3. <span data-ttu-id="d1020-146">Hello пользовательского журнала мастера будет отправлен hello файла и список hello записи, в которые он указывает.</span><span class="sxs-lookup"><span data-stu-id="d1020-146">hello Custom Log Wizard will upload hello file and list hello records that it identifies.</span></span>
4. <span data-ttu-id="d1020-147">Изменить hello разделитель, который будет использоваться tooidentify новую запись и выберите hello разделитель, определяющие hello записей в файле журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-147">Change hello delimiter that is used tooidentify a new record and select hello delimiter that best identifies hello records in your log file.</span></span>
5. <span data-ttu-id="d1020-148">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="d1020-148">Click **Next**.</span></span>

### <a name="step-3-add-log-collection-paths"></a><span data-ttu-id="d1020-149">Шаг 3.</span><span class="sxs-lookup"><span data-stu-id="d1020-149">Step 3.</span></span> <span data-ttu-id="d1020-150">Добавление пути к файлам журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-150">Add log collection paths</span></span>
<span data-ttu-id="d1020-151">Необходимо определить один или несколько путей в агенте hello, где можно найти hello пользовательского журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-151">You must define one or more paths on hello agent where it can locate hello custom log.</span></span>  <span data-ttu-id="d1020-152">Можно предоставить конкретный путь и имя файла журнала hello, или можно указать путь с подстановочным знаком для имени hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-152">You can either provide a specific path and name for hello log file, or you can specify a path with a wildcard for hello name.</span></span>  <span data-ttu-id="d1020-153">Это подходит для приложений, в которых каждый день создается новый файл, или когда один файл достигает определенного размера.</span><span class="sxs-lookup"><span data-stu-id="d1020-153">This supports applications that create a new file each day or when one file reaches a certain size.</span></span>  <span data-ttu-id="d1020-154">Вы также можете указать несколько путей для одного файла журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-154">You can also provide multiple paths for a single log file.</span></span>

<span data-ttu-id="d1020-155">Например приложение может создать файл журнала каждый день с датой hello включен в имя hello как log20100316.txt.</span><span class="sxs-lookup"><span data-stu-id="d1020-155">For example, an application might create a log file each day with hello date included in hello name as in log20100316.txt.</span></span> <span data-ttu-id="d1020-156">Шаблон для таких журнала может быть *журнала\*.txt* которого должно было применяться следующие приложения hello файл журнала tooany именования элемента схемы.</span><span class="sxs-lookup"><span data-stu-id="d1020-156">A pattern for such a log might be *log\*.txt* which would apply tooany log file following hello application’s naming scheme.</span></span>

<span data-ttu-id="d1020-157">Hello следующей таблице приведены примеры допустимых шаблонов toospecify различных файлах журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-157">hello following table provides examples of valid patterns toospecify different log files.</span></span>

| <span data-ttu-id="d1020-158">Описание</span><span class="sxs-lookup"><span data-stu-id="d1020-158">Description</span></span> | <span data-ttu-id="d1020-159">Путь</span><span class="sxs-lookup"><span data-stu-id="d1020-159">Path</span></span> |
|:--- |:--- |
| <span data-ttu-id="d1020-160">Все файлы агента Windows в папке *C:\Logs* с расширением .txt</span><span class="sxs-lookup"><span data-stu-id="d1020-160">All files in *C:\Logs* with .txt extension on Windows agent</span></span> |<span data-ttu-id="d1020-161">C:\Logs\\\*.txt</span><span class="sxs-lookup"><span data-stu-id="d1020-161">C:\Logs\\\*.txt</span></span> |
| <span data-ttu-id="d1020-162">Все файлы агента Windows в папке *C:\Logs* с расширением .txt и именем, начинающимся со слова log</span><span class="sxs-lookup"><span data-stu-id="d1020-162">All files in *C:\Logs* with a name starting with log and a .txt extension on Windows agent</span></span> |<span data-ttu-id="d1020-163">C:\Logs\log\*.txt</span><span class="sxs-lookup"><span data-stu-id="d1020-163">C:\Logs\log\*.txt</span></span> |
| <span data-ttu-id="d1020-164">Все файлы агента Linux в папке */var/log/audits* с расширением .txt</span><span class="sxs-lookup"><span data-stu-id="d1020-164">All files in */var/log/audit* with .txt extension on Linux agent</span></span> |<span data-ttu-id="d1020-165">/var/log/audit/*.txt</span><span class="sxs-lookup"><span data-stu-id="d1020-165">/var/log/audit/*.txt</span></span> |
| <span data-ttu-id="d1020-166">Все файлы агента Linux в папке */var/log/audit* с расширением .txt и именем, начинающимся со слова log</span><span class="sxs-lookup"><span data-stu-id="d1020-166">All files in */var/log/audit* with a name starting with log and a .txt extension on Linux agent</span></span> |<span data-ttu-id="d1020-167">/var/log/Audit/log\*.txt</span><span class="sxs-lookup"><span data-stu-id="d1020-167">/var/log/audit/log\*.txt</span></span> |

1. <span data-ttu-id="d1020-168">Выберите toospecify Windows или Linux, добавление какой формат пути.</span><span class="sxs-lookup"><span data-stu-id="d1020-168">Select Windows or Linux toospecify which path format you are adding.</span></span>
2. <span data-ttu-id="d1020-169">Введите путь hello и щелкните hello  **+**  кнопки.</span><span class="sxs-lookup"><span data-stu-id="d1020-169">Type in hello path and click hello **+** button.</span></span>
3. <span data-ttu-id="d1020-170">Повторите процесс hello для любых дополнительных путей.</span><span class="sxs-lookup"><span data-stu-id="d1020-170">Repeat hello process for any additional paths.</span></span>

### <a name="step-4-provide-a-name-and-description-for-hello-log"></a><span data-ttu-id="d1020-171">Шаг 4.</span><span class="sxs-lookup"><span data-stu-id="d1020-171">Step 4.</span></span> <span data-ttu-id="d1020-172">Укажите имя и описание для журнала hello</span><span class="sxs-lookup"><span data-stu-id="d1020-172">Provide a name and description for hello log</span></span>
<span data-ttu-id="d1020-173">Hello имя будет использоваться для типа hello как описано выше.</span><span class="sxs-lookup"><span data-stu-id="d1020-173">hello name that you specify will be used for hello log type as described above.</span></span>  <span data-ttu-id="d1020-174">Всегда заканчивается _CL toodistinguish его как пользовательский журнал.</span><span class="sxs-lookup"><span data-stu-id="d1020-174">It will always end with _CL toodistinguish it as a custom log.</span></span>

1. <span data-ttu-id="d1020-175">Введите имя для журнала hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-175">Type in a name for hello log.</span></span>  <span data-ttu-id="d1020-176">Hello  **\_CL** суффикс предоставляется автоматически.</span><span class="sxs-lookup"><span data-stu-id="d1020-176">hello **\_CL** suffix is automatically provided.</span></span>
2. <span data-ttu-id="d1020-177">При необходимости введите **описание**.</span><span class="sxs-lookup"><span data-stu-id="d1020-177">Add an optional **Description**.</span></span>
3. <span data-ttu-id="d1020-178">Нажмите кнопку **Далее** определение пользовательского журнала toosave hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-178">Click **Next** toosave hello custom log definition.</span></span>

### <a name="step-5-validate-that-hello-custom-logs-are-being-collected"></a><span data-ttu-id="d1020-179">Шаг 5.</span><span class="sxs-lookup"><span data-stu-id="d1020-179">Step 5.</span></span> <span data-ttu-id="d1020-180">Проверка во время сбора пользовательских журналов hello</span><span class="sxs-lookup"><span data-stu-id="d1020-180">Validate that hello custom logs are being collected</span></span>
<span data-ttu-id="d1020-181">Это может потребоваться до часа tooan hello исходные данные из новых tooappear пользовательского журнала в службе анализа журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-181">It may take up tooan hour for hello initial data from a new custom log tooappear in Log Analytics.</span></span>  <span data-ttu-id="d1020-182">Он будет запущен сбор записей hello журналы найти пути hello указан из точки hello hello определенные пользовательские войти в.</span><span class="sxs-lookup"><span data-stu-id="d1020-182">It will start collecting entries from hello logs found in hello path you specified from hello point that you defined hello custom log.</span></span>  <span data-ttu-id="d1020-183">Она не хранит записи hello, загруженные во время создания пользовательского журнала hello, но он будет собирать уже существующие записи в файлы журналов hello, она выполняет поиск.</span><span class="sxs-lookup"><span data-stu-id="d1020-183">It will not retain hello entries that you uploaded during hello custom log creation, but it will collect already existing entries in hello log files that it locates.</span></span>

<span data-ttu-id="d1020-184">После анализа журналов начинается сбор hello пользовательский журнал, записи будут доступны с поиска журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-184">Once Log Analytics starts collecting from hello custom log, its records will be available with a Log Search.</span></span>  <span data-ttu-id="d1020-185">Используйте hello имя, присвоенное hello пользовательского журнала как hello **типа** в запросе.</span><span class="sxs-lookup"><span data-stu-id="d1020-185">Use hello name that you gave hello custom log as hello **Type** in your query.</span></span>

> [!NOTE]
> <span data-ttu-id="d1020-186">При поиска hello hello RawData свойство отсутствует, может потребоваться tooclose и повторно откройте браузер.</span><span class="sxs-lookup"><span data-stu-id="d1020-186">If hello RawData property is missing from hello search, you may need tooclose and reopen your browser.</span></span>
>
>

### <a name="step-6-parse-hello-custom-log-entries"></a><span data-ttu-id="d1020-187">Шаг 6.</span><span class="sxs-lookup"><span data-stu-id="d1020-187">Step 6.</span></span> <span data-ttu-id="d1020-188">Синтаксический анализ hello пользовательские записи журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-188">Parse hello custom log entries</span></span>
<span data-ttu-id="d1020-189">запись Hello весь журнал будет храниться в одиночное свойство **RawData**.</span><span class="sxs-lookup"><span data-stu-id="d1020-189">hello entire log entry will be stored in a single property called **RawData**.</span></span>  <span data-ttu-id="d1020-190">Скорее всего, вы будете tooseparate hello разные части сведений в каждой записи в отдельные свойства, которые хранятся в записи hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-190">You will most likely want tooseparate hello different pieces of information in each entry into individual properties stored in hello record.</span></span>  <span data-ttu-id="d1020-191">Это делается с помощью hello [настраиваемые поля](log-analytics-custom-fields.md) функции аналитики журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-191">You do this using hello [Custom Fields](log-analytics-custom-fields.md) feature of Log Analytics.</span></span>

<span data-ttu-id="d1020-192">Подробное описание процедуры синтаксического анализа hello пользовательские записи журнала не указаны здесь.</span><span class="sxs-lookup"><span data-stu-id="d1020-192">Detailed steps for parsing hello custom log entry are not provided here.</span></span>  <span data-ttu-id="d1020-193">См. toohello [настраиваемые поля](log-analytics-custom-fields.md) документации для получения этих сведений.</span><span class="sxs-lookup"><span data-stu-id="d1020-193">Please refer toohello [Custom Fields](log-analytics-custom-fields.md) documentation for this information.</span></span>

## <a name="disabling-a-custom-log"></a><span data-ttu-id="d1020-194">Отключение настраиваемого журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-194">Disabling a custom log</span></span>
<span data-ttu-id="d1020-195">Определение настраиваемого журнала нельзя удалить после создания, но его можно отключить, удалив все пути к коллекции.</span><span class="sxs-lookup"><span data-stu-id="d1020-195">You cannot remove a custom log definition once it's been created, but you can disable it by removing all of its collection paths.</span></span>

1. <span data-ttu-id="d1020-196">На портале OMS hello, go слишком**параметры**.</span><span class="sxs-lookup"><span data-stu-id="d1020-196">In hello OMS portal, go too**Settings**.</span></span>
2. <span data-ttu-id="d1020-197">Выберите вкладку **Данные**, а затем — раздел **Настраиваемые журналы**.</span><span class="sxs-lookup"><span data-stu-id="d1020-197">Click on **Data** and then **Custom logs**.</span></span>
3. <span data-ttu-id="d1020-198">Нажмите кнопку **сведения** Далее toodisable определение пользовательского журнала toohello.</span><span class="sxs-lookup"><span data-stu-id="d1020-198">Click **Details** next toohello custom log definition toodisable.</span></span>
4. <span data-ttu-id="d1020-199">Удалите каждого из путей hello коллекции для определения пользовательского журнала hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-199">Remove each of hello collection paths for hello custom log definition.</span></span>

## <a name="data-collection"></a><span data-ttu-id="d1020-200">Сбор данных</span><span class="sxs-lookup"><span data-stu-id="d1020-200">Data collection</span></span>
<span data-ttu-id="d1020-201">Log Analytics собирает новые записи из каждого настраиваемого журнала примерно каждые 5 минут.</span><span class="sxs-lookup"><span data-stu-id="d1020-201">Log Analytics will collect new entries from each custom log approximately every 5 minutes.</span></span>  <span data-ttu-id="d1020-202">в каждый файл журнала, выполняющее сбор данных из Hello агент будет записано его место.</span><span class="sxs-lookup"><span data-stu-id="d1020-202">hello agent will record its place in each log file that it collects from.</span></span>  <span data-ttu-id="d1020-203">Если агент hello переходит в автономный режим на период времени, затем аналитики журналов будет собирать записи от последнего места остановки, даже если эти записи создаются, когда агент hello находился в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="d1020-203">If hello agent goes offline for a period of time, then Log Analytics will collect entries from where it last left off, even if those entries were created while hello agent was offline.</span></span>

<span data-ttu-id="d1020-204">Hello все содержимое для записи в журнале hello записываются tooa одиночное свойство **RawData**.</span><span class="sxs-lookup"><span data-stu-id="d1020-204">hello entire contents of hello log entry are written tooa single property called **RawData**.</span></span>  <span data-ttu-id="d1020-205">Вы можете проанализировать в несколько свойств, которые могут быть проанализированы и поиск выполняется путем определения [настраиваемые поля](log-analytics-custom-fields.md) после создания пользовательского журнала hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-205">You can parse this into multiple properties that can be analyzed and searched separately by defining [Custom Fields](log-analytics-custom-fields.md) after you have created hello custom log.</span></span>

## <a name="custom-log-record-properties"></a><span data-ttu-id="d1020-206">Свойства записей настраиваемого журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-206">Custom log record properties</span></span>
<span data-ttu-id="d1020-207">Пользовательский журнал записей имеют тип с именем журнала hello, предоставляющих и hello свойства в hello в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="d1020-207">Custom log records have a type with hello log name that you provide and hello properties in hello following table.</span></span>

| <span data-ttu-id="d1020-208">Свойство</span><span class="sxs-lookup"><span data-stu-id="d1020-208">Property</span></span> | <span data-ttu-id="d1020-209">Описание</span><span class="sxs-lookup"><span data-stu-id="d1020-209">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d1020-210">TimeGenerated</span><span class="sxs-lookup"><span data-stu-id="d1020-210">TimeGenerated</span></span> |<span data-ttu-id="d1020-211">Дата и время записи hello собранные службой аналитики журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-211">Date and time that hello record was collected by Log Analytics.</span></span>  <span data-ttu-id="d1020-212">Если журнала hello использует разделитель основано время, это можно сделать hello времени, собранные из записи hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-212">If hello log uses a time-based delimiter then this is hello time collected from hello entry.</span></span> |
| <span data-ttu-id="d1020-213">SourceSystem</span><span class="sxs-lookup"><span data-stu-id="d1020-213">SourceSystem</span></span> |<span data-ttu-id="d1020-214">Тип агента hello записи были собраны.</span><span class="sxs-lookup"><span data-stu-id="d1020-214">Type of agent hello record was collected from.</span></span> <br> <span data-ttu-id="d1020-215">OpsManager — агент Windows, подключенный напрямую или управляемый с помощью System Center Operations Manager.</span><span class="sxs-lookup"><span data-stu-id="d1020-215">OpsManager – Windows agent, either direct connect or System Center Operations Manager</span></span> <br> <span data-ttu-id="d1020-216">Linux — все агенты Linux</span><span class="sxs-lookup"><span data-stu-id="d1020-216">Linux – All Linux agents</span></span> |
| <span data-ttu-id="d1020-217">RawData</span><span class="sxs-lookup"><span data-stu-id="d1020-217">RawData</span></span> |<span data-ttu-id="d1020-218">Полный текст hello собранные записи.</span><span class="sxs-lookup"><span data-stu-id="d1020-218">Full text of hello collected entry.</span></span> |
| <span data-ttu-id="d1020-219">ManagementGroupName</span><span class="sxs-lookup"><span data-stu-id="d1020-219">ManagementGroupName</span></span> |<span data-ttu-id="d1020-220">Имя группы управления hello для System Center Operations Управление агентами.</span><span class="sxs-lookup"><span data-stu-id="d1020-220">Name of hello management group for System Center Operations Manage agents.</span></span>  <span data-ttu-id="d1020-221">Для других агентов это AOI-\<идентификатор_рабочей_области\>.</span><span class="sxs-lookup"><span data-stu-id="d1020-221">For other agents, this is AOI-\<workspace ID\></span></span> |

## <a name="log-searches-with-custom-log-records"></a><span data-ttu-id="d1020-222">Поиск по журналу с использованием записей настраиваемого журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-222">Log searches with custom log records</span></span>
<span data-ttu-id="d1020-223">Записи из пользовательских журналов хранятся в репозитории OMS hello так же, как записи из любого другого источника данных.</span><span class="sxs-lookup"><span data-stu-id="d1020-223">Records from custom logs are stored in hello OMS repository just like records from any other data source.</span></span>  <span data-ttu-id="d1020-224">Они будут иметь тип, соответствующий имени hello, указываемые при определении hello журнала, чтобы можно было использовать в своих записей tooretrieve поиска, собранных из определенного журнала свойство типа hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-224">They will have a type matching hello name that you provide when you define hello log, so you can use hello Type property in your search tooretrieve records collected from a specific log.</span></span>

<span data-ttu-id="d1020-225">Hello следующей таблице приведены примеры различных запросов поиска журналов, которые извлекаются из пользовательских журналов.</span><span class="sxs-lookup"><span data-stu-id="d1020-225">hello following table provides different examples of log searches that retrieve records from custom logs.</span></span>

| <span data-ttu-id="d1020-226">Запрос</span><span class="sxs-lookup"><span data-stu-id="d1020-226">Query</span></span> | <span data-ttu-id="d1020-227">Описание</span><span class="sxs-lookup"><span data-stu-id="d1020-227">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d1020-228">Type=MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="d1020-228">Type=MyApp_CL</span></span> |<span data-ttu-id="d1020-229">Все события из настраиваемого журнала с именем MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="d1020-229">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="d1020-230">Type=MyApp_CL Severity_CF=error</span><span class="sxs-lookup"><span data-stu-id="d1020-230">Type=MyApp_CL Severity_CF=error</span></span> |<span data-ttu-id="d1020-231">Все события из настраиваемого журнала с именем MyApp_CL и значением *error* в настраиваемом поле с именем *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="d1020-231">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |

>[!NOTE]
> <span data-ttu-id="d1020-232">Если рабочую область был обновленного toohello [языка запросов новый журнал аналитики](log-analytics-log-search-upgrade.md), то hello выше запросы будут изменены следующие toohello.</span><span class="sxs-lookup"><span data-stu-id="d1020-232">If your workspace has been upgraded toohello [new Log Analytics query language](log-analytics-log-search-upgrade.md), then hello above queries would change toohello following.</span></span>

> | <span data-ttu-id="d1020-233">Запрос</span><span class="sxs-lookup"><span data-stu-id="d1020-233">Query</span></span> | <span data-ttu-id="d1020-234">Описание</span><span class="sxs-lookup"><span data-stu-id="d1020-234">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d1020-235">MyApp_CL</span><span class="sxs-lookup"><span data-stu-id="d1020-235">MyApp_CL</span></span> |<span data-ttu-id="d1020-236">Все события из настраиваемого журнала с именем MyApp_CL.</span><span class="sxs-lookup"><span data-stu-id="d1020-236">All events from a custom log named MyApp_CL.</span></span> |
| <span data-ttu-id="d1020-237">MyApp_CL &#124; где Severity_CF=="error"</span><span class="sxs-lookup"><span data-stu-id="d1020-237">MyApp_CL &#124; where Severity_CF=="error"</span></span> |<span data-ttu-id="d1020-238">Все события из настраиваемого журнала с именем MyApp_CL и значением *error* в настраиваемом поле с именем *Severity_CF*.</span><span class="sxs-lookup"><span data-stu-id="d1020-238">All events from a custom log named MyApp_CL with a value of *error* in a custom field named *Severity_CF*.</span></span> |


## <a name="sample-walkthrough-of-adding-a-custom-log"></a><span data-ttu-id="d1020-239">Пошаговое руководство по добавлению настраиваемого журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-239">Sample walkthrough of adding a custom log</span></span>
<span data-ttu-id="d1020-240">Hello следующем разделе описывается пример создания пользовательского журнала.</span><span class="sxs-lookup"><span data-stu-id="d1020-240">hello following section walks through an example of creating a custom log.</span></span>  <span data-ttu-id="d1020-241">во время сбора журналов Образец Hello содержит одну запись в каждой строке, начиная с даты и времени, а затем с разделителями запятыми поля для кода, состояние и сообщения.</span><span class="sxs-lookup"><span data-stu-id="d1020-241">hello sample log being collected has a single entry on each line starting with a date and time and then comma-delimited fields for code, status, and message.</span></span>  <span data-ttu-id="d1020-242">Ниже приведены некоторые примеры записей.</span><span class="sxs-lookup"><span data-stu-id="d1020-242">Several sample entries are shown below.</span></span>

    2016-03-10 01:34:36 207,Success,Client 05a26a97-272a-4bc9-8f64-269d154b0e39 connected
    2016-03-10 01:33:33 208,Warning,Client ec53d95c-1c88-41ae-8174-92104212de5d disconnected
    2016-03-10 01:35:44 209,Success,Transaction 10d65890-b003-48f8-9cfc-9c74b51189c8 succeeded
    2016-03-10 01:38:22 302,Error,Application could not connect toodatabase
    2016-03-10 01:31:34 303,Error,Application lost connection toodatabase

### <a name="upload-and-parse-a-sample-log"></a><span data-ttu-id="d1020-243">Загрузка и преобразование примера журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-243">Upload and parse a sample log</span></span>
<span data-ttu-id="d1020-244">Мы предоставить один из файлов журнала hello и можно увидеть события hello, будет осуществляться сбор.</span><span class="sxs-lookup"><span data-stu-id="d1020-244">We provide one of hello log files and can see hello events that it will be collecting.</span></span>  <span data-ttu-id="d1020-245">В этом случае достаточно использовать в качестве разделителя новую строку.</span><span class="sxs-lookup"><span data-stu-id="d1020-245">In this case New Line is a sufficient delimiter.</span></span>  <span data-ttu-id="d1020-246">Если запись в журнал hello хотя может занимать несколько строк, разделитель отметки времени, должны использовать toobe.</span><span class="sxs-lookup"><span data-stu-id="d1020-246">If a single entry in hello log could span multiple lines though, then a timestamp delimiter would need toobe used.</span></span>

![Загрузка и преобразование примера журнала](media/log-analytics-data-sources-custom-logs/delimiter.png)

### <a name="add-log-collection-paths"></a><span data-ttu-id="d1020-248">Добавление пути к файлам журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-248">Add log collection paths</span></span>
<span data-ttu-id="d1020-249">файлы журнала Hello будут находиться в *C:\MyApp\Logs*.</span><span class="sxs-lookup"><span data-stu-id="d1020-249">hello log files will be located in *C:\MyApp\Logs*.</span></span>  <span data-ttu-id="d1020-250">Новый файл создается каждый день с именем, которое включает в себя дату hello в шаблоне hello *appYYYYMMDD.log*.</span><span class="sxs-lookup"><span data-stu-id="d1020-250">A new file will be created each day with a name that includes hello date in hello pattern *appYYYYMMDD.log*.</span></span>  <span data-ttu-id="d1020-251">Для этого журнала будет использоваться путь *C:\MyApp\Logs\\\*.log*.</span><span class="sxs-lookup"><span data-stu-id="d1020-251">A sufficient pattern for this log would be *C:\MyApp\Logs\\\*.log*.</span></span>

![Путь к файлам журнала](media/log-analytics-data-sources-custom-logs/collection-path.png)

### <a name="provide-a-name-and-description-for-hello-log"></a><span data-ttu-id="d1020-253">Укажите имя и описание для журнала hello</span><span class="sxs-lookup"><span data-stu-id="d1020-253">Provide a name and description for hello log</span></span>
<span data-ttu-id="d1020-254">Мы введем имя *MyApp_CL* и текст **описания**.</span><span class="sxs-lookup"><span data-stu-id="d1020-254">We use a name of *MyApp_CL* and type in a **Description**.</span></span>

![Имя журнала](media/log-analytics-data-sources-custom-logs/log-name.png)

### <a name="validate-that-hello-custom-logs-are-being-collected"></a><span data-ttu-id="d1020-256">Проверка во время сбора пользовательских журналов hello</span><span class="sxs-lookup"><span data-stu-id="d1020-256">Validate that hello custom logs are being collected</span></span>
<span data-ttu-id="d1020-257">Мы используем запрос *тип = MyApp_CL* tooreturn все записи из журнала hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-257">We use a query of *Type=MyApp_CL* tooreturn all records from hello collected log.</span></span>

![Запрос к журналу без настраиваемых полей](media/log-analytics-data-sources-custom-logs/query-01.png)

### <a name="parse-hello-custom-log-entries"></a><span data-ttu-id="d1020-259">Синтаксический анализ hello пользовательские записи журнала</span><span class="sxs-lookup"><span data-stu-id="d1020-259">Parse hello custom log entries</span></span>
<span data-ttu-id="d1020-260">Мы используем hello настраиваемые поля toodefine *EventTime*, *кода*, *состояние*, и *сообщение* поля и мы можно заметить разницу hello в hello записи, которые возвращаются запросом hello.</span><span class="sxs-lookup"><span data-stu-id="d1020-260">We use Custom Fields toodefine hello *EventTime*, *Code*, *Status*, and *Message* fields and we can see hello difference in hello records that are returned by hello query.</span></span>

![Запрос к журналу с использованием настраиваемых полей](media/log-analytics-data-sources-custom-logs/query-02.png)

## <a name="next-steps"></a><span data-ttu-id="d1020-262">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d1020-262">Next steps</span></span>
* <span data-ttu-id="d1020-263">Используйте [настраиваемые поля](log-analytics-custom-fields.md) tooparse hello записей в пользовательском журнале hello в полях tooindividual.</span><span class="sxs-lookup"><span data-stu-id="d1020-263">Use [Custom Fields](log-analytics-custom-fields.md) tooparse hello entries in hello custom log in tooindividual fields.</span></span>
* <span data-ttu-id="d1020-264">Дополнительные сведения о [входа выполняет](log-analytics-log-searches.md) tooanalyze hello данные, собранные из источников данных и решений.</span><span class="sxs-lookup"><span data-stu-id="d1020-264">Learn about [log searches](log-analytics-log-searches.md) tooanalyze hello data collected from data sources and solutions.</span></span>
