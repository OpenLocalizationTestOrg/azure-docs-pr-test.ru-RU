---
title: "Поиск aaaLog в аналитику журнала OMS | Документы Microsoft"
description: "Требуется tooretrieve поиска журнала любые данные из службы анализа журналов.  В этой статье описывается добавление новых журналов, поиск выполняется в службе анализа журналов и предоставляет основные понятия, необходимые toounderstand перед созданием."
services: log-analytics
documentationcenter: 
author: bwren
manager: carmonm
editor: 
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: bwren
ms.openlocfilehash: 08fda1d9eb9e6ab824ffb9e12af09832c3e3fad2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-log-searches-in-log-analytics"></a><span data-ttu-id="f1f73-104">Основные сведения о поисках по журналам в Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f1f73-104">Understanding log searches in Log Analytics</span></span>

> [!NOTE]
> <span data-ttu-id="f1f73-105">В этой статье описывается поиска журналов в Azure Log Analytics с помощью hello новый язык запросов.</span><span class="sxs-lookup"><span data-stu-id="f1f73-105">This article describes log searches in Azure Log Analytics using hello new query language.</span></span>  <span data-ttu-id="f1f73-106">Можно узнать больше о новом языке hello и получить tooupgrade процедуры hello в рабочей области [обновление поиск журнала toonew рабочей области Azure Log Analytics](log-analytics-log-search-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="f1f73-106">You can learn more about hello new language and get hello procedure tooupgrade your workspace at [Upgrade your Azure Log Analytics workspace toonew log search](log-analytics-log-search-upgrade.md).</span></span>  
>
> <span data-ttu-id="f1f73-107">Если в рабочей области не был обновленного toohello новый язык запросов, вы должны обращаться слишком[найти данные с помощью запросов поиска журналов в службе анализа журналов](log-analytics-log-searches.md).</span><span class="sxs-lookup"><span data-stu-id="f1f73-107">If your workspace hasn't been upgraded toohello new query language, you should refer too[Find data using log searches in Log Analytics](log-analytics-log-searches.md).</span></span>

<span data-ttu-id="f1f73-108">Требуется tooretrieve поиска журнала любые данные из службы анализа журналов.</span><span class="sxs-lookup"><span data-stu-id="f1f73-108">You require a log search tooretrieve any data from Log Analytics.</span></span>  <span data-ttu-id="f1f73-109">Ли анализируете данные на портале hello, Настройка toobe правило генерации оповещений уведомление определенному условию, или извлечения данных с помощью hello API аналитики журналов, будет использовать данные поиска по журналу toospecify hello нужные.</span><span class="sxs-lookup"><span data-stu-id="f1f73-109">Whether you're analyzing data in hello portal, configuring an alert rule toobe notified of a particular condition, or retrieving data using hello Log Analytics API, you will use a log search toospecify hello data you want.</span></span>  <span data-ttu-id="f1f73-110">В этой статье описывается использование поисков по журналам в Log Analytics и предоставляются основные сведения, которые необходимо знать перед их созданием.</span><span class="sxs-lookup"><span data-stu-id="f1f73-110">This article describes how log searches are used in Log Analytics and provides concepts that should understand before creating one.</span></span> <span data-ttu-id="f1f73-111">В разделе hello [дальнейшие действия](#next-steps) разделе Дополнительные сведения о создании и редактировании запросов поиска журналов, а также для ссылки на языке запросов hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-111">See hello [Next steps](#next-steps) section for details on creating and editing log searches and for references on hello query language.</span></span>

## <a name="where-log-searches-are-used"></a><span data-ttu-id="f1f73-112">Где используются поиски по журналам</span><span class="sxs-lookup"><span data-stu-id="f1f73-112">Where log searches are used</span></span>

<span data-ttu-id="f1f73-113">Hello различными способами, который будет использоваться запросов поиска журналов в службе анализа журналов включить hello следующие:</span><span class="sxs-lookup"><span data-stu-id="f1f73-113">hello different ways that you will use log searches in Log Analytics include hello following:</span></span>

- <span data-ttu-id="f1f73-114">**Порталы.**</span><span class="sxs-lookup"><span data-stu-id="f1f73-114">**Portals.**</span></span> <span data-ttu-id="f1f73-115">Интерактивный анализ данных можно выполнять в репозиторий hello с hello [портала поиска журналов](log-analytics-log-search-log-search-portal.md) или hello [Advanced Analytics портала](https://go.microsoft.com/fwlink/?linkid=856587).</span><span class="sxs-lookup"><span data-stu-id="f1f73-115">You can perform interactive analysis of data in hello repository with hello [Log Search portal](log-analytics-log-search-log-search-portal.md) or hello [Advanced Analytics portal](https://go.microsoft.com/fwlink/?linkid=856587).</span></span>  <span data-ttu-id="f1f73-116">Это позволяет tooedit вашей запрашивать и анализировать результаты hello в разнообразных форматах и визуализации.</span><span class="sxs-lookup"><span data-stu-id="f1f73-116">This allows you tooedit your query and analyze hello results in a variety of formats and visualizations.</span></span>  <span data-ttu-id="f1f73-117">Большинство запросов, создаваемых начнется одного из порталов hello, а затем копируется убедившись, что он работает правильно.</span><span class="sxs-lookup"><span data-stu-id="f1f73-117">Most queries that you create will start in one of hello portals and then copied once you verify that it works as expected.</span></span>
- <span data-ttu-id="f1f73-118">**Правила генерации оповещений.**</span><span class="sxs-lookup"><span data-stu-id="f1f73-118">**Alert rules.**</span></span> <span data-ttu-id="f1f73-119">[Правила генерации оповещений](log-analytics-alerts.md) заранее выявляют проблемы с данными в рабочей области.</span><span class="sxs-lookup"><span data-stu-id="f1f73-119">[Alert rules](log-analytics-alerts.md) proactively identify issues from data in your workspace.</span></span>  <span data-ttu-id="f1f73-120">Каждое правило генерации оповещений основано на поиске по журналам, который автоматически выполняется через определенные интервалы.</span><span class="sxs-lookup"><span data-stu-id="f1f73-120">Each alert rule is based on a log search that is automatically run at regular intervals.</span></span>  <span data-ttu-id="f1f73-121">результаты Hello не проверяемого toodetermine, если необходимо создать предупреждение.</span><span class="sxs-lookup"><span data-stu-id="f1f73-121">hello results are inspected toodetermine if an alert should be created.</span></span>
- <span data-ttu-id="f1f73-122">**Представления.**</span><span class="sxs-lookup"><span data-stu-id="f1f73-122">**Views.**</span></span>  <span data-ttu-id="f1f73-123">Можно создавать визуализации данных toobe, включенных в панели мониторинга пользователя с [конструктор представлений](log-analytics-view-designer.md).</span><span class="sxs-lookup"><span data-stu-id="f1f73-123">You can create visualizations of data toobe included in user dashboards with [View Designer](log-analytics-view-designer.md).</span></span>  <span data-ttu-id="f1f73-124">Поиск журнала предоставляют hello данные, используемые [плитки](log-analytics-view-designer-tiles.md) и [визуализации частей](log-analytics-view-designer-parts.md) в каждом представлении.</span><span class="sxs-lookup"><span data-stu-id="f1f73-124">Log searches provide hello data used by [tiles](log-analytics-view-designer-tiles.md) and [visualization parts](log-analytics-view-designer-parts.md) in each view.</span></span>  <span data-ttu-id="f1f73-125">Можно выполнить детализацию из частей визуализации в hello поиска журналов портала tooperform провести анализ данных hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-125">You can drill down from visualization parts into hello Log Search portal tooperform further analysis on hello data.</span></span>
- <span data-ttu-id="f1f73-126">**Экспорт.**</span><span class="sxs-lookup"><span data-stu-id="f1f73-126">**Export.**</span></span>  <span data-ttu-id="f1f73-127">При экспорте данных из tooExcel рабочей области аналитики журналов hello или [Power BI](log-analytics-powerbi.md), создайте tooexport данных журнала поиска toodefine hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-127">When you export data from hello Log Analytics workspace tooExcel or [Power BI](log-analytics-powerbi.md), you create a log search toodefine hello data tooexport.</span></span>
- <span data-ttu-id="f1f73-128">**PowerShell.**</span><span class="sxs-lookup"><span data-stu-id="f1f73-128">**PowerShell.**</span></span> <span data-ttu-id="f1f73-129">Сценарий PowerShell можно запустить из командной строки или runbook службы автоматизации Azure, использующий [Get AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve данные из службы анализа журналов.</span><span class="sxs-lookup"><span data-stu-id="f1f73-129">You can run a PowerShell script from a command line or an Azure Automation runbook that uses [Get-AzureRmOperationalInsightsSearchResults](https://docs.microsoft.com/powershell/module/azurerm.operationalinsights/get-azurermoperationalinsightssearchresults?view=azurermps-4.0.0) tooretrieve data from Log Analytics.</span></span>  <span data-ttu-id="f1f73-130">Этот командлет требует tooretrieve данных hello toodetermine запроса.</span><span class="sxs-lookup"><span data-stu-id="f1f73-130">This cmdlet requires a query toodetermine hello data tooretrieve.</span></span>
- <span data-ttu-id="f1f73-131">**API Log Analytics.**</span><span class="sxs-lookup"><span data-stu-id="f1f73-131">**Log Analytics API.**</span></span>  <span data-ttu-id="f1f73-132">Hello [API поиска журналов Служба аналитики журналов](log-analytics-log-search-api.md) позволяет любому клиенту REST API tooretrieve данные из рабочей области hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-132">hello [Log Analytics log search API](log-analytics-log-search-api.md) allows any REST API client tooretrieve data from hello workspace.</span></span>  <span data-ttu-id="f1f73-133">запрос API Hello включает запрос, который выполняется для анализа журналов toodetermine hello данных tooretrieve.</span><span class="sxs-lookup"><span data-stu-id="f1f73-133">hello API request includes a query that is run against Log Analytics toodetermine hello data tooretrieve.</span></span>

![Поиск по журналам](media/log-analytics-log-search-new/log-search-overview.png)

## <a name="how-log-analytics-data-is-organized"></a><span data-ttu-id="f1f73-135">Упорядочивание данных в Log Analytics</span><span class="sxs-lookup"><span data-stu-id="f1f73-135">How Log Analytics data is organized</span></span>
<span data-ttu-id="f1f73-136">При создании запроса, сначала нужно определить, какие таблицы содержат данные hello, которые вы ищете.</span><span class="sxs-lookup"><span data-stu-id="f1f73-136">When you build a query, you start by determining which tables have hello data that you're looking for.</span></span> <span data-ttu-id="f1f73-137">Каждый [источника данных](log-analytics-data-sources.md) и [решения](../operations-management-suite/operations-management-suite-solutions.md) хранит данные в таблицах, выделенные в рабочей области аналитики журналов hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-137">Each [data source](log-analytics-data-sources.md) and [solution](../operations-management-suite/operations-management-suite-solutions.md) stores its data in dedicated tables in hello Log Analytics workspace.</span></span>  <span data-ttu-id="f1f73-138">Документация для каждого источника данных и решение включает имя hello hello типа данных, который создает и описание каждого из его свойств.</span><span class="sxs-lookup"><span data-stu-id="f1f73-138">Documentation for each data source and solution includes hello name of hello data type that it creates and a description of each of its properties.</span></span>     <span data-ttu-id="f1f73-139">Многие запросы потребуется только данные из одной таблицы, но другие могут использовать различные параметры tooinclude данные из нескольких таблиц.</span><span class="sxs-lookup"><span data-stu-id="f1f73-139">Many queries will only require data from a single tables, but others may use a variety of options tooinclude data from multiple tables.</span></span>

![Таблицы](media/log-analytics-log-search-new/queries-tables.png)


## <a name="writing-a-query"></a><span data-ttu-id="f1f73-141">Написание запроса</span><span class="sxs-lookup"><span data-stu-id="f1f73-141">Writing a query</span></span>
<span data-ttu-id="f1f73-142">В основе hello журнала операций поиска в службе анализа журналов — [язык запросов широко](https://docs.loganalytics.io/) , позволяющий получать и анализировать данные из репозитория hello, различными способами.</span><span class="sxs-lookup"><span data-stu-id="f1f73-142">At hello core of log searches in Log Analytics is [an extensive query language](https://docs.loganalytics.io/) that lets you retrieve and analyze data from hello repository in a variety of ways.</span></span>  <span data-ttu-id="f1f73-143">Этот же язык запросов используется для [Application Insights](../application-insights/app-insights-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="f1f73-143">This same query language is used for [Application Insights](../application-insights/app-insights-analytics.md).</span></span>  <span data-ttu-id="f1f73-144">Изучение как toowrite запроса — критический toocreating поиска журналов в службе анализа журналов.</span><span class="sxs-lookup"><span data-stu-id="f1f73-144">Learning how toowrite a query is critical toocreating log searches in Log Analytics.</span></span>  <span data-ttu-id="f1f73-145">Начнем с простых запросов обычно и затем toouse ход выполнения более сложных функций как становятся более сложными требованиями.</span><span class="sxs-lookup"><span data-stu-id="f1f73-145">You'll typically start with basic queries and then progress toouse more advanced functions as your requirements become more complex.</span></span>

<span data-ttu-id="f1f73-146">Базовая структура Hello запроса является исходной таблицы, за которым следует ряд операторов, разделенных символом вертикальной черты `|`.</span><span class="sxs-lookup"><span data-stu-id="f1f73-146">hello basic structure of a query is a source table followed by a series of operators separated by a pipe character `|`.</span></span>  <span data-ttu-id="f1f73-147">Можно связывать друг с другом несколько операторов toorefine hello данных и выполнения дополнительных функций.</span><span class="sxs-lookup"><span data-stu-id="f1f73-147">You can chain together multiple operators toorefine hello data and perform advanced functions.</span></span>

<span data-ttu-id="f1f73-148">Например предположим, что требуется, чтобы toofind hello top 10 компьютеров с hello большинство событий ошибок через hello прошлый день.</span><span class="sxs-lookup"><span data-stu-id="f1f73-148">For example, suppose you wanted toofind hello top ten computers with hello most error events over hello past day.</span></span>

    Event
    | where (EventLevelName == "Error")
    | where (TimeGenerated > ago(1days))
    | summarize ErrorCount = count() by Computer
    | top 10 by ErrorCount desc

<span data-ttu-id="f1f73-149">Или может быть необходимо toofind компьютерах, которые еще не имели периодический сигнал в последний день hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-149">Or maybe you want toofind computers that haven't had a heartbeat in hello last day.</span></span>

    Heartbeat
    | where TimeGenerated > ago(7d)
    | summarize max(TimeGenerated) by Computer
    | where max_TimeGenerated < ago(1d)  

<span data-ttu-id="f1f73-150">Как насчет графика с hello процессора для каждого компьютера из прошлой неделе?</span><span class="sxs-lookup"><span data-stu-id="f1f73-150">How about a line chart with hello processor utilization for each computer from last week?</span></span>

    Perf
    | where ObjectName == "Processor" and CounterName == "% Processor Time"
    | where TimeGenerated  between (startofweek(ago(7d)) .. endofweek(ago(7d)) )
    | summarize avg(CounterValue) by Computer, bin(TimeGenerated, 5min)
    | render timechart    

<span data-ttu-id="f1f73-151">Вы можно увидеть по образцам быстрый, независимо от типа данных, которым вы работаете, hello hello аналогичен структура запроса hello.</span><span class="sxs-lookup"><span data-stu-id="f1f73-151">You can see from these quick samples that regardless of hello kind of data that you're working with, hello structure of hello query is similar.</span></span>  <span data-ttu-id="f1f73-152">Его можно разбить на отдельных шагов, где hello результирующие данные из одной команды отправляется через hello конвейера toohello следующей команды.</span><span class="sxs-lookup"><span data-stu-id="f1f73-152">You can break it down into distinct steps where hello resulting data from one command is sent through hello pipeline toohello next command.</span></span>

<span data-ttu-id="f1f73-153">Полную документацию по языка запросов Azure Log Analytics hello, включая учебные материалы и справочник по языку см hello [документацию по языку запросов анализа журналов Azure](https://docs.loganalytics.io/).</span><span class="sxs-lookup"><span data-stu-id="f1f73-153">For complete documentation on hello Azure Log Analytics query language including tutorials and language reference, see hello [Azure Log Analytics query language documentation](https://docs.loganalytics.io/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f1f73-154">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="f1f73-154">Next steps</span></span>

- <span data-ttu-id="f1f73-155">Дополнительные сведения о hello [порталы использовать toocreate и изменение запросов поиска журналов](log-analytics-log-search-portals.md).</span><span class="sxs-lookup"><span data-stu-id="f1f73-155">Learn about hello [portals that you use toocreate and edit log searches](log-analytics-log-search-portals.md).</span></span>
- <span data-ttu-id="f1f73-156">Извлечение [учебник по написанию запросов](https://go.microsoft.com/fwlink/?linkid=856078) с помощью hello новый язык запросов.</span><span class="sxs-lookup"><span data-stu-id="f1f73-156">Check out a [tutorial on writing queries](https://go.microsoft.com/fwlink/?linkid=856078) using hello new query language.</span></span>
