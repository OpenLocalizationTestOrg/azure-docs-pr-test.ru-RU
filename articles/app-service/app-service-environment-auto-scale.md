---
title: "aaaAutoscaling и v1 среды службы приложений"
description: "Автоматическое масштабирование и среда службы приложений"
services: app-service
documentationcenter: 
author: btardif
manager: erikre
editor: 
ms.assetid: c23af2d8-d370-4b1f-9b3e-8782321ddccb
ms.service: app-service
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/11/2017
ms.author: ccompy
ms.openlocfilehash: 1a03cf494309e80596b64471d1a067b2f64a9fee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="autoscaling-and-app-service-environment-v1"></a>Автомасштабирование и среда службы приложений версии 1

> [!NOTE]
> Эта статья является о hello v1 среды службы приложений.  Имеется более новая версия hello среды службы приложений, удобнее toouse и выполняется на более мощный инфраструктуры. Дополнительные сведения о новой версии hello начинаться с hello toolearn [toohello введение среды службы приложений](../app-service/app-service-environment/intro.md).
> 

Среды службы приложений Azure поддерживают *автоматическое масштабирование*. Вы можете настроить автоматическое масштабирование отдельных рабочих пулов на основе метрик или расписаний.

![Параметры автоматического масштабирования для рабочего пула.][intro]

Автоматическое масштабирование оптимизирует использование ресурсов, автоматическое увеличение и уменьшение toofit среды службы приложений профиль бюджете и нагрузки.

## <a name="configure-worker-pool-autoscale"></a>Настройка автоматического масштабирования рабочего пула
Функциональные возможности автоматического масштабирования hello доступны из hello **параметры** вкладке hello рабочего пула.

![Вкладка "Параметры" hello рабочего пула.][settings-scale]

После этого hello интерфейса должен быть достаточно ознакомиться с момента его планирование такие же возможности, которые вы видите, если масштабирование службы приложения hello. 

![Параметры масштабирования вручную.][scale-manual]

Можно также настроить профиль автомасштабирования.

![Параметры автомасштабирования.][scale-profile]

Профилей автомасштабирования являются полезным tooset ограничения на шкале. Вы обеспечите согласованную производительность, установив значение нижней границы масштаба (1), а также прогнозируемый лимит затрат, установив значение верхней границы (2).

![Параметры масштабирования в профиле.][scale-profile2]

После определения профиля, можно добавить tooscale правила автоматического масштабирования вверх или вниз hello число экземпляров в пуле рабочих процессов hello в пределах границ hello, определяемые hello профилем. Правила автоматического масштабирования основаны на метриках.

![Правило масштабирования.][scale-rule]

 Любой рабочего пула или метрики интерфейса может быть используется toodefine правил автомасштабирования. Эти метрики являются одинаковых метрик можно отслеживать в колонке графики hello ресурсов или задать предупреждения для приветствия.

## <a name="autoscale-example"></a>Пример автоматического масштабирования
Автомасштабирование среды службы приложений лучше всего проиллюстрировать пошаговым сценарием.

В этой статье описываются все необходимые рекомендации hello при настройке автоматического масштабирования. Hello статье рассматриваются hello воспроизведения взаимодействия, которые следует учитывать при вклад в автоматическом масштабировании среды службы приложений, размещенных в среде службы приложений.

### <a name="scenario-introduction"></a>Общие сведения о сценарии
Пользователь является членом роли sysadmin для предприятия, после завершения миграции часть hello рабочих нагрузок, которым он управляет tooan среды службы приложений.

Hello среды службы приложений масштаба toomanual следующую конфигурацию.

* **внешние интерфейсы** : 3;
* **рабочий пул 1**: 10;
* **рабочий пул 2**: 5;
* **рабочий пул 3**: 5.

Рабочий пул 1 используется для производственных рабочих нагрузок, а рабочий пул 2 и рабочий пул 3 — для задач контроля качества и разработки.

Hello приложения планы обслуживания для контроля Качества и разработки можно настроить toomanual шкалы. Hello производственного плана служб приложений задается toodeal tooautoscale с вариациями нагрузку и трафик.

Федор хорошо знакомы приложения hello. Он знает, что hello часы максимальной нагрузки для нагрузочных являются между 9:00:00 и 18:00:00, так как это бизнес приложения (LOB), сотрудники используют, когда они находятся в офисе hello. В конце рабочего дня показатели использования падают. За пределами часы максимальной нагрузки по-прежнему повышению нагрузки, так как пользователям приложение hello удаленно с помощью своих мобильных устройств или домашние компьютеры. Hello производственного плана служб приложений уже настроены tooautoscale, в зависимости от использования ЦП с hello правилам:

![Параметры бизнес-приложения.][asp-scale]

| **Профиль автоматического масштабирования — рабочие дни — план службы приложений** | **Профиль автоматического масштабирования — выходные дни — план службы приложений** |
| --- | --- |
| **Имя:** профиль рабочего дня |**Имя:** профиль выходного дня |
| **Масштабирование:** расписание и правила производительности |**Масштабирование:** расписание и правила производительности |
| **Профиль:** рабочие дни |**Профиль:** выходные дни |
| **Тип:** повторение |**Тип:** повторение |
| **Целевой диапазон:** 5 экземпляров too20 |**Целевой диапазон:** 3 too10 экземпляров |
| **Дни:** понедельник, вторник, среда, четверг, пятница |**Дни:** суббота, воскресенье |
| **Время начала:** 9:00 |**Время начала:** 9:00 |
| **Часовой пояс:** UTC-08 |**Часовой пояс:** UTC-08 |
|  | |
| **Правило автоматического масштабирования (увеличение масштаба)** |**Правило автоматического масштабирования (увеличение масштаба)** |
| **Ресурс:** производство (среда службы приложений) |**Ресурс:** производство (среда службы приложений) |
| **Метрика:** % ЦП |**Метрика:** % ЦП |
| **Операции:** более 60 % |**Операции:** более 80 % |
| **Длительность:** 5 минут |**Длительность:** 10 минут |
| **Агрегация по времени:** среднее |**Агрегация по времени:** среднее |
| **Действие:** увеличить количество на 2 |**Действие:** увеличить количество на 1 |
| **Охлаждение (в минутах):** 15 |**Охлаждение (в минутах):** 20 |
|  | |
| **Правило автоматического масштабирования (уменьшение масштаба)** |**Правило автоматического масштабирования (уменьшение масштаба)** |
| **Ресурс:** производство (среда службы приложений) |**Ресурс:** производство (среда службы приложений) |
| **Метрика:** % ЦП |**Метрика:** % ЦП |
| **Операции:** менее 30 % |**Операции:** менее 20 % |
| **Длительность:** 10 минут |**Длительность:** 15 минут |
| **Агрегация по времени:** среднее |**Агрегация по времени:** среднее |
| **Действие:** уменьшить количество на 1 |**Действие:** уменьшить количество на 1 |
| **Охлаждение (в минутах):** 20 |**Охлаждение (в минутах):** 10 |

### <a name="app-service-plan-inflation-rate"></a>Скорость роста плана службы приложений
Планы служб приложений, настроенных tooautoscale сделать это с максимальной скоростью в час. Эту частоту можно вычислить на основе hello значения, указанные в правиле автоматического масштабирования hello.

Основные сведения о и вычисления hello *скорость расширению плана служб приложений* важно для автоматического масштабирования среды службы приложений, так как пул рабочих tooa изменения масштаба не мгновенно.

Hello скорость расширению плана служб приложений вычисляется следующим образом:

![Расчет скорости роста плана службы приложений.][ASP-Inflation]

В основе hello автомасштабирования — правило масштабирования вверх для профиля Weekday hello hello производства план служб приложений:

![Скорость роста плана службы приложений для рабочих дней на основе правила "Автомасштабирование — увеличение масштаба".][Equation1]

В случае, когда hello hello автомасштабирования — правило масштабирования вверх для профиля hello выходные дни производства hello план служб приложений формула hello разрешится:

![Скорость роста плана службы приложений для выходных дней на основе правила "Автомасштабирование — увеличение масштаба".][Equation2]

Это значение можно вычислить и для операций уменьшения масштаба.

Зависимости hello автомасштабирования — правило масштабирования вниз для профиля Weekday hello hello производства план служб приложений, это будет выглядеть следующим образом:

![Скорость роста плана службы приложений для рабочих дней на основе правила "Автомасштабирование — уменьшение масштаба".][Equation3]

В случае, когда hello hello автомасштабирования — правило масштабирования вниз для профиля hello выходные дни производства hello план служб приложений формула hello разрешится:  

![Скорость роста плана службы приложений для выходных дней на основе правила "Автомасштабирование — уменьшение масштаба".][Equation4]

Hello производственного плана служб приложений могут увеличиваться на максимальной скорости в восьми экземпляров в час за неделю hello и четырех экземпляров в час hello выходные дни. Его можно освободить экземпляры с максимальной скоростью четырех экземпляров в час за неделю hello и шести экземпляров в час в выходные дни.

Если несколько планов служб приложений размещаются в пуле рабочего процесса, у вас есть toocalculate hello *общая скорость расширению* как сумма hello hello расширению скорость для всех hello планы службы приложений, которые размещения в этом пуле рабочего процесса.

![Расчет общей скорости роста по нескольким планам службы приложений, размещенным в рабочем пуле.][ASP-Total-Inflation]

### <a name="use-hello-app-service-plan-inflation-rate-toodefine-worker-pool-autoscale-rules"></a>Правил автомасштабирования пула рабочих toodefine скорость расширению планирование hello использования службы приложений
Рабочих пулов, на которых размещены планы служб приложений, настроенных tooautoscale нужно выделить буфер емкости. буфер Hello обеспечивает toogrow операций автомасштабирования hello и сжатие план служб приложений, при необходимости. Минимальное буфера Hello бы, что hello вычисляется общее приложение службы планирования расширению скорость.

Операции масштабирования среды службы приложений занять некоторое время tooapply, любое изменение следует учитывать для дальнейших изменений запросу, может произойти во время операции масштабирования. tooaccommodate такой задержкой, рекомендуется использовать hello вычисляется общее приложение службы планирования расширению скорость как hello минимальное число экземпляров, которые добавляются для каждой операции автоматического масштабирования.

С этой информацией Михаил можно определить hello профиль автомасштабирования и правила:

![Правила профиля автомасштабирования на примере бизнес-приложения.][Worker-Pool-Scale]

| **Профиль автоматического масштабирования — рабочие дни** | **Профиль автоматического масштабирования — выходные дни** |
| --- | --- |
| **Имя:** профиль рабочего дня |**Имя:** профиль выходного дня |
| **Масштабирование:** расписание и правила производительности |**Масштабирование:** расписание и правила производительности |
| **Профиль:** рабочие дни |**Профиль:** выходные дни |
| **Тип:** повторение |**Тип:** повторение |
| **Целевой диапазон:** 13 too25 экземпляров |**Целевой диапазон:** 6 экземпляров too15 |
| **Дни:** понедельник, вторник, среда, четверг, пятница |**Дни:** суббота, воскресенье |
| **Время начала:** 7:00 |**Время начала:** 9:00 |
| **Часовой пояс:** UTC-08 |**Часовой пояс:** UTC-08 |
|  | |
| **Правило автоматического масштабирования (увеличение масштаба)** |**Правило автоматического масштабирования (увеличение масштаба)** |
| **Ресурс:** рабочий пул 1 |**Ресурс:** рабочий пул 1 |
| **Метрика:** WorkersAvailable |**Метрика:** WorkersAvailable |
| **Операции:** менее 8 |**Операции:** менее 3 |
| **Длительность:** 20 минут |**Длительность:** 30 минут |
| **Агрегация по времени:** среднее |**Агрегация по времени:** среднее |
| **Действие:** увеличить количество на 8 |**Действие:** увеличить количество на 3 |
| **Охлаждение (в минутах):** 180 |**Охлаждение (в минутах):** 180 |
|  | |
| **Правило автоматического масштабирования (уменьшение масштаба)** |**Правило автоматического масштабирования (уменьшение масштаба)** |
| **Ресурс:** рабочий пул 1 |**Ресурс:** рабочий пул 1 |
| **Метрика:** WorkersAvailable |**Метрика:** WorkersAvailable |
| **Операции:** более 8 |**Операции:** более 3 |
| **Длительность:** 20 минут |**Длительность:** 15 минут |
| **Агрегация по времени:** среднее |**Агрегация по времени:** среднее |
| **Действие:** уменьшить количество на 2 |**Действие:** уменьшить количество на 3 |
| **Охлаждение (в минутах):** 120 |**Охлаждение (в минутах):** 120 |

Целевой диапазон, определенные в профиле hello Hello вычисляется путем hello минимальное экземпляров, определенные в профиль для hello план служб приложений + буфера.

Максимальный диапазон Hello бы hello сумма всех hello максимального диапазонов все планы служб приложений, размещенных в пуле рабочих процессов hello.

Hello увеличение числа для масштабирования hello правила следует tooat набор хотя бы один X ставка расширению план службы приложений для масштабирования вверх.

Уменьшите число может быть скорректированное toosomething между 1/2 X или 1 X hello скорость расширению план службы приложений для масштабирования вниз.

### <a name="autoscale-for-front-end-pool"></a>Автоматическое масштабирование для интерфейсного пула
Правила автомасштабирования для интерфейсных пулов проще, чем правила для рабочих пулов. Важно,  
Убедитесь в том, продолжительность измерения hello и таймеры cooldown hello учитывать операций масштабирования в план служб приложений не отображаются мгновенно.

В этом сценарии Федор знает частота возникновения ошибок hello увеличивается, обслуживающих клиентские запросы по достижении 80% ресурсов ЦП и задает экземпляров tooincrease правила автомасштабирования hello следующим образом:

![Параметры автомасштабирования для интерфейсного пула.][Front-End-Scale]

| **Профиль автоматического масштабирования — внешние интерфейсы** |
| --- |
| **Имя:** автоматическое масштабирование — внешние интерфейсы |
| **Масштабирование:** расписание и правила производительности |
| **Профиль:** ежедневно |
| **Тип:** повторение |
| **Целевой диапазон:** 3 too10 экземпляров |
| **Дни:** ежедневно |
| **Время начала:** 9:00 |
| **Часовой пояс:** UTC-08 |
|  |
| **Правило автоматического масштабирования (увеличение масштаба)** |
| **Ресурс:** пул внешних интерфейсов |
| **Метрика:** % ЦП |
| **Операции:** более 60 % |
| **Длительность:** 20 минут |
| **Агрегация по времени:** среднее |
| **Действие:** увеличить количество на 3 |
| **Охлаждение (в минутах):** 120 |
|  |
| **Правило автоматического масштабирования (уменьшение масштаба)** |
| **Ресурс:** рабочий пул 1 |
| **Метрика:** % ЦП |
| **Операции:** менее 30 % |
| **Длительность:** 20 минут |
| **Агрегация по времени:** среднее |
| **Действие:** уменьшить количество на 3 |
| **Охлаждение (в минутах):** 120 |

<!-- IMAGES -->
[intro]: ./media/app-service-environment-auto-scale/introduction.png
[settings-scale]: ./media/app-service-environment-auto-scale/settings-scale.png
[scale-manual]: ./media/app-service-environment-auto-scale/scale-manual.png
[scale-profile]: ./media/app-service-environment-auto-scale/scale-profile.png
[scale-profile2]: ./media/app-service-environment-auto-scale/scale-profile-2.png
[scale-rule]: ./media/app-service-environment-auto-scale/scale-rule.png
[asp-scale]: ./media/app-service-environment-auto-scale/asp-scale.png
[ASP-Inflation]: ./media/app-service-environment-auto-scale/asp-inflation-rate.png
[Equation1]: ./media/app-service-environment-auto-scale/equation1.png
[Equation2]: ./media/app-service-environment-auto-scale/equation2.png
[Equation3]: ./media/app-service-environment-auto-scale/equation3.png
[Equation4]: ./media/app-service-environment-auto-scale/equation4.png
[ASP-Total-Inflation]: ./media/app-service-environment-auto-scale/asp-total-inflation-rate.png
[Worker-Pool-Scale]: ./media/app-service-environment-auto-scale/wp-scale.png
[Front-End-Scale]: ./media/app-service-environment-auto-scale/fe-scale.png
