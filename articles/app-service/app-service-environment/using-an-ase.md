---
title: "Использование среды службы приложений Azure"
description: "Узнайте, как создавать, публиковать и масштабировать приложения в среде службы приложений Azure"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: a22450c4-9b8b-41d4-9568-c4646f4cf66b
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: ccompy
ms.openlocfilehash: 279951d40b7780120d0b94e183f06e00ccece016
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="use-an-app-service-environment"></a><span data-ttu-id="db6a6-103">Использование среды службы приложений</span><span class="sxs-lookup"><span data-stu-id="db6a6-103">Use an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="db6a6-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="db6a6-104">Overview</span></span> ##

<span data-ttu-id="db6a6-105">Среда службы приложений — это развернутая служба приложений Azure в подсети виртуальной сети Azure клиента.</span><span class="sxs-lookup"><span data-stu-id="db6a6-105">Azure App Service Environment is a deployment of Azure App Service into a subnet in a customer’s Azure virtual network.</span></span> <span data-ttu-id="db6a6-106">В ее состав входит:</span><span class="sxs-lookup"><span data-stu-id="db6a6-106">It consists of:</span></span>

- <span data-ttu-id="db6a6-107">**Внешние интерфейсы** —это то место, где завершается сеанс HTTP/HTTPS в среде службы приложений (ASE).</span><span class="sxs-lookup"><span data-stu-id="db6a6-107">**Front ends**: The front ends are where HTTP/HTTPS terminates in an App Service environment (ASE).</span></span>
- <span data-ttu-id="db6a6-108">**Рабочие роли** — это ресурсы, в которых размещаются приложения.</span><span class="sxs-lookup"><span data-stu-id="db6a6-108">**Workers**: The workers are the resources that host your apps.</span></span>
- <span data-ttu-id="db6a6-109">**База данных** содержит сведения, определяющие среду.</span><span class="sxs-lookup"><span data-stu-id="db6a6-109">**Database**: The database holds information that defines the environment.</span></span>
- <span data-ttu-id="db6a6-110">**Хранилище** используется для размещения опубликованных приложений клиента.</span><span class="sxs-lookup"><span data-stu-id="db6a6-110">**Storage**: The storage is used to host the customer-published apps.</span></span>

> [!NOTE]
> <span data-ttu-id="db6a6-111">Существует две версии среды службы приложений: ASEv1 и ASEv2.</span><span class="sxs-lookup"><span data-stu-id="db6a6-111">There are two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="db6a6-112">В ASEv1 необходимо выполнить управление ресурсами, прежде чем их можно будет использовать.</span><span class="sxs-lookup"><span data-stu-id="db6a6-112">In ASEv1, you must manage the resources before you can use them.</span></span> <span data-ttu-id="db6a6-113">Чтобы научиться настраивать среду ASEv1 и управлять ей, см. статью [Настройка среды службы приложений][ConfigureASEv1].</span><span class="sxs-lookup"><span data-stu-id="db6a6-113">To learn how to configure and manage ASEv1, see [Configure an App Service environment v1][ConfigureASEv1].</span></span> <span data-ttu-id="db6a6-114">Оставшаяся часть этой статьи посвящена ASEv2.</span><span class="sxs-lookup"><span data-stu-id="db6a6-114">The rest of this article focuses on ASEv2.</span></span>
>
>

<span data-ttu-id="db6a6-115">Вы можете развернуть ASE (ASEv1 и ASEv2) с использованием внешнего или внутреннего виртуального IP-адреса для доступа к приложению.</span><span class="sxs-lookup"><span data-stu-id="db6a6-115">You can deploy an ASE (ASEv1 and ASEv2) with an external or internal VIP for app access.</span></span> <span data-ttu-id="db6a6-116">Такой способ развертывания обычно называется внешней средой ASE.</span><span class="sxs-lookup"><span data-stu-id="db6a6-116">The deployment with an external VIP is commonly called an External ASE.</span></span> <span data-ttu-id="db6a6-117">Внутренняя версия называется ASE с ILB, так как она использует внутренний балансировщик нагрузки (ILB).</span><span class="sxs-lookup"><span data-stu-id="db6a6-117">The internal version is called the ILB ASE because it uses an internal load balancer (ILB).</span></span> <span data-ttu-id="db6a6-118">Дополнительные сведения об ASE с ILB см. в статье [Создание и использование внутренней подсистемы балансировки нагрузки со средой службы приложений][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="db6a6-118">To learn more about the ILB ASE, see [Create and use an ILB ASE][MakeILBASE].</span></span>

## <a name="create-a-web-app-in-an-ase"></a><span data-ttu-id="db6a6-119">Создание веб-приложения в среде ASE</span><span class="sxs-lookup"><span data-stu-id="db6a6-119">Create a web app in an ASE</span></span> ##

<span data-ttu-id="db6a6-120">Веб-приложение в ASE можно создать стандартно, но с некоторыми небольшими отличиями.</span><span class="sxs-lookup"><span data-stu-id="db6a6-120">To create a web app in an ASE, you use the same process as when you create it normally, but with a few small differences.</span></span> <span data-ttu-id="db6a6-121">При создании плана службы приложений:</span><span class="sxs-lookup"><span data-stu-id="db6a6-121">When you create a new App Service plan:</span></span>

- <span data-ttu-id="db6a6-122">Вместо выбора географического расположения, в котором будет развернуто приложение, выберите ASE в качестве расположения.</span><span class="sxs-lookup"><span data-stu-id="db6a6-122">Instead of choosing a geographic location in which to deploy your app, you choose an ASE as your location.</span></span>
- <span data-ttu-id="db6a6-123">все планы службы приложений, создаваемые в ASE, должны находиться в ценовой категории Isolated.</span><span class="sxs-lookup"><span data-stu-id="db6a6-123">All App Service plans created in an ASE must be in an Isolated pricing tier.</span></span>

<span data-ttu-id="db6a6-124">Если у вас нет среды ASE, то ее можно создать, следуя инструкциям в статье [Создание внешней среды службы приложений][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="db6a6-124">If you don't have an ASE, you can create one by following the instructions in [Create an App Service environment][MakeExternalASE].</span></span>

<span data-ttu-id="db6a6-125">Для создание веб-приложения в среде ASE выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="db6a6-125">To create a web app in an ASE:</span></span>

1. <span data-ttu-id="db6a6-126">Выберите **Создать** > **Интернет+мобильные устройства** > **Веб-приложение**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-126">Select **New** > **Web + Mobile** > **Web App**.</span></span>

2. <span data-ttu-id="db6a6-127">Введите имя веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="db6a6-127">Enter a name for the web app.</span></span> <span data-ttu-id="db6a6-128">Если вы уже выбрали план службы приложений в среде ASE, то доменное имя приложения будет отражать доменное имя среды ASE.</span><span class="sxs-lookup"><span data-stu-id="db6a6-128">If you already selected an App Service plan in an ASE, the domain name for the app reflects the domain name of the ASE.</span></span>

    ![Выбор имени веб-приложения][1]

3. <span data-ttu-id="db6a6-130">Выберите подписку.</span><span class="sxs-lookup"><span data-stu-id="db6a6-130">Select a subscription.</span></span>

4. <span data-ttu-id="db6a6-131">Введите имя для новой группы ресурсов или щелкните **Использовать существующий** и выберите вариант имени из раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="db6a6-131">Enter a name for a new resource group, or select **Use existing** and select one from the drop-down list.</span></span>

5. <span data-ttu-id="db6a6-132">Выберите имеющийся план службы приложений в своей среде ASE или создайте его, сделав следующее:</span><span class="sxs-lookup"><span data-stu-id="db6a6-132">Select an existing App Service plan in your ASE, or create a new one by following these steps:</span></span>

    <span data-ttu-id="db6a6-133">а.</span><span class="sxs-lookup"><span data-stu-id="db6a6-133">a.</span></span> <span data-ttu-id="db6a6-134">Выберите **Создать**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-134">Select **Create New**.</span></span>

    <span data-ttu-id="db6a6-135">b.</span><span class="sxs-lookup"><span data-stu-id="db6a6-135">b.</span></span> <span data-ttu-id="db6a6-136">Укажите имя для своего плана службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-136">Enter the name for your App Service plan.</span></span>

    <span data-ttu-id="db6a6-137">c.</span><span class="sxs-lookup"><span data-stu-id="db6a6-137">c.</span></span> <span data-ttu-id="db6a6-138">В раскрывающемся списке **Расположение** выберите свою среду ASE.</span><span class="sxs-lookup"><span data-stu-id="db6a6-138">Select your ASE in the **Location** drop-down list.</span></span>

    <span data-ttu-id="db6a6-139">d.</span><span class="sxs-lookup"><span data-stu-id="db6a6-139">d.</span></span> <span data-ttu-id="db6a6-140">Выберите ценовую категорию **Isolated**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-140">Select an **Isolated** pricing tier.</span></span> <span data-ttu-id="db6a6-141">Щелкните **Выбрать**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-141">Select **Select**.</span></span>

    <span data-ttu-id="db6a6-142">д.</span><span class="sxs-lookup"><span data-stu-id="db6a6-142">e.</span></span> <span data-ttu-id="db6a6-143">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-143">Select **OK**.</span></span>
    
    ![Ценовая категория Isolated][2]

6. <span data-ttu-id="db6a6-145">Нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-145">Select **Create**.</span></span>

## <a name="how-scale-works"></a><span data-ttu-id="db6a6-146">Как работает масштабирование</span><span class="sxs-lookup"><span data-stu-id="db6a6-146">How scale works</span></span> ##

<span data-ttu-id="db6a6-147">Каждая служба приложений выполняется в плане службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-147">Every App Service app runs in an App Service plan.</span></span> <span data-ttu-id="db6a6-148">Модель контейнера имеет такой вид: среды содержат планы служб приложений, а планы служб приложений содержат приложения.</span><span class="sxs-lookup"><span data-stu-id="db6a6-148">The container model is environments hold App Service plans, and App Service plans hold apps.</span></span> <span data-ttu-id="db6a6-149">При масштабировании приложения выполняется масштабирование плана службы приложений, поэтому масштабируются все приложения в этом плане.</span><span class="sxs-lookup"><span data-stu-id="db6a6-149">When you scale an app, you scale the App Service plan and thus scale all the apps in the same plan.</span></span>

<span data-ttu-id="db6a6-150">В версии ASEv2 при масштабировании плана службы приложений необходимая инфраструктура добавляется автоматически.</span><span class="sxs-lookup"><span data-stu-id="db6a6-150">In ASEv2, when you scale an App Service plan, the needed infrastructure is automatically added.</span></span> <span data-ttu-id="db6a6-151">При добавлении инфраструктуры операции масштабирования выполняются с задержкой.</span><span class="sxs-lookup"><span data-stu-id="db6a6-151">There is a time delay to scale operations while the infrastructure is added.</span></span> <span data-ttu-id="db6a6-152">В ASEv1 требуемую инфраструктуру нужно добавить прежде чем можно будет создать или развернуть план службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-152">In ASEv1, the needed infrastructure must be added before you can create or scale out your App Service plan.</span></span> 

<span data-ttu-id="db6a6-153">В мультитенантной службе приложений масштабирование обычно выполняется немедленно, так как пул ресурсов доступен для его поддержки.</span><span class="sxs-lookup"><span data-stu-id="db6a6-153">In the multitenant App Service, scaling is usually immediate because a pool of resources is readily available to support it.</span></span> <span data-ttu-id="db6a6-154">В среде ASE такого буфера нет, поэтому ресурсы выделяются по мере необходимости.</span><span class="sxs-lookup"><span data-stu-id="db6a6-154">In an ASE, there is no such buffer, and resources are allocated upon need.</span></span>

<span data-ttu-id="db6a6-155">ASE позволяет масштабировать до 100 экземпляров.</span><span class="sxs-lookup"><span data-stu-id="db6a6-155">In an ASE, you can scale up to 100 instances.</span></span> <span data-ttu-id="db6a6-156">Эти 100 экземпляров могут находиться в одном плане службы приложений или распределяться по разным планам.</span><span class="sxs-lookup"><span data-stu-id="db6a6-156">Those 100 instances can be all in one single App Service plan or distributed across multiple App Service plans.</span></span>

## <a name="ip-addresses"></a><span data-ttu-id="db6a6-157">IP-адреса;</span><span class="sxs-lookup"><span data-stu-id="db6a6-157">IP addresses</span></span> ##

<span data-ttu-id="db6a6-158">Служба приложений имеет возможность предоставлять приложениям выделенные IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="db6a6-158">App Service has the ability to allocate a dedicated IP address to an app.</span></span> <span data-ttu-id="db6a6-159">Эта возможность реализуется после настройки SSL на основе IP-адреса, как описано в статье [Приобретение и настройка сертификата SSL для службы приложений Azure][ConfigureSSL].</span><span class="sxs-lookup"><span data-stu-id="db6a6-159">This capability is available after you configure an IP-based SSL, as described in [Bind an existing custom SSL certificate to Azure web apps][ConfigureSSL].</span></span> <span data-ttu-id="db6a6-160">В ASE явные исключения отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="db6a6-160">However, in an ASE, there is a notable exception.</span></span> <span data-ttu-id="db6a6-161">В ASE с ILB невозможно добавить дополнительные IP-адреса для SSL на основе IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="db6a6-161">You can't add additional IP addresses to be used for an IP-based SSL in an ILB ASE.</span></span>

<span data-ttu-id="db6a6-162">В версии ASEv1 IP-адреса необходимо выделить в качестве ресурсов, чтобы их можно было использовать.</span><span class="sxs-lookup"><span data-stu-id="db6a6-162">In ASEv1, you need to allocate the IP addresses as resources before you can use them.</span></span> <span data-ttu-id="db6a6-163">В ASEv2 они используется из приложения так же, как и в мультитенантной службе приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-163">In ASEv2, you use them from your app just as you do in the multitenant App Service.</span></span> <span data-ttu-id="db6a6-164">В ASEv2 всегда имеется один запасной адрес (до 30 IP-адресов).</span><span class="sxs-lookup"><span data-stu-id="db6a6-164">There is always one spare address in ASEv2 up to 30 IP addresses.</span></span> <span data-ttu-id="db6a6-165">Каждый раз при использовании одного адреса добавляется еще один, чтобы всегда был доступный адрес.</span><span class="sxs-lookup"><span data-stu-id="db6a6-165">Each time you use one, another is added so that an address is always readily available for use.</span></span> <span data-ttu-id="db6a6-166">При выделении следующего IP-адреса возникает временная задержка, которая влияет на процесс быстрого добавления IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="db6a6-166">A time delay is required to allocate another IP address, which prevents adding IP addresses in quick succession.</span></span>

## <a name="front-end-scaling"></a><span data-ttu-id="db6a6-167">Масштабирование внешнего интерфейса</span><span class="sxs-lookup"><span data-stu-id="db6a6-167">Front-end scaling</span></span> ##

<span data-ttu-id="db6a6-168">В среде ASEv2 при масштабировании планов службы приложений для их поддержки автоматически добавляются рабочие роли.</span><span class="sxs-lookup"><span data-stu-id="db6a6-168">In ASEv2, when you scale out your App Service plans, workers are automatically added to support them.</span></span> <span data-ttu-id="db6a6-169">Каждый ASE создается с двумя внешними интерфейсами.</span><span class="sxs-lookup"><span data-stu-id="db6a6-169">Every ASE is created with two front ends.</span></span> <span data-ttu-id="db6a6-170">Кроме того, в планах службы приложений внешние интерфейсы автоматически масштабируются (по одному внешнему интерфейса на каждые 15 экземпляров).</span><span class="sxs-lookup"><span data-stu-id="db6a6-170">In addition, the front ends automatically scale out at a rate of one front end for every 15 instances in your App Service plans.</span></span> <span data-ttu-id="db6a6-171">Например, если у вас есть 15 экземпляров, то вы имеете три внешних интерфейса.</span><span class="sxs-lookup"><span data-stu-id="db6a6-171">For example, if you have 15 instances, then you have three front ends.</span></span> <span data-ttu-id="db6a6-172">При масштабировании до 30 экземпляров у вас будет четыре внешних интерфейса, и так далее.</span><span class="sxs-lookup"><span data-stu-id="db6a6-172">If you scale to 30 instances, then you have four front ends, and so on.</span></span>

<span data-ttu-id="db6a6-173">Для большинства сценариев такого количества внешних интерфейсов более чем достаточно.</span><span class="sxs-lookup"><span data-stu-id="db6a6-173">This number of front ends should be more than enough for most scenarios.</span></span> <span data-ttu-id="db6a6-174">Тем не менее можно выполнять масштабирование быстрее.</span><span class="sxs-lookup"><span data-stu-id="db6a6-174">However, you can scale out at a faster rate.</span></span> <span data-ttu-id="db6a6-175">Вы можете установить маленький коэффициент (по одному внешнему интерфейсу на каждые пять экземпляров).</span><span class="sxs-lookup"><span data-stu-id="db6a6-175">You can change the ratio to as low as one front end for every five instances.</span></span> <span data-ttu-id="db6a6-176">За изменение коэффициента взимается плата.</span><span class="sxs-lookup"><span data-stu-id="db6a6-176">There is a charge for changing the ratio.</span></span> <span data-ttu-id="db6a6-177">Дополнительные сведения см. на странице [цен на службу приложений Azure][Pricing].</span><span class="sxs-lookup"><span data-stu-id="db6a6-177">For more information, see [Azure App Service pricing][Pricing].</span></span>

<span data-ttu-id="db6a6-178">Ресурсы внешних интерфейсов являются конечной точкой HTTP/HTTPS для среды ASE.</span><span class="sxs-lookup"><span data-stu-id="db6a6-178">Front-end resources are the HTTP/HTTPS endpoint for the ASE.</span></span> <span data-ttu-id="db6a6-179">При сохранении конфигурации внешних интерфейсов по умолчанию показатель использования памяти на каждый внешний интерфейс обычно составляет примерно 60 %.</span><span class="sxs-lookup"><span data-stu-id="db6a6-179">With the default front-end configuration, memory usage per front end is consistently around 60 percent.</span></span> <span data-ttu-id="db6a6-180">Рабочие нагрузки клиентов не выполняются во внешнем интерфейсе.</span><span class="sxs-lookup"><span data-stu-id="db6a6-180">Customer workloads don't run on a front end.</span></span> <span data-ttu-id="db6a6-181">Ключевым фактором, влияющим на внешний интерфейс в части масштабирования, является использование ЦП, которое определяется, в первую очередь, HTTPS-трафиком.</span><span class="sxs-lookup"><span data-stu-id="db6a6-181">The key factor for a front end with respect to scale is the CPU, which is driven primarily by HTTPS traffic.</span></span>

## <a name="app-access"></a><span data-ttu-id="db6a6-182">Доступ к приложениям</span><span class="sxs-lookup"><span data-stu-id="db6a6-182">App access</span></span> ##

<span data-ttu-id="db6a6-183">Во внешней среде ASE домен, использующийся при создании приложений, отличается от мультитенантной службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-183">In an External ASE, the domain that's used when you create apps is different from the multitenant App Service.</span></span> <span data-ttu-id="db6a6-184">Он включает имя среды ASE.</span><span class="sxs-lookup"><span data-stu-id="db6a6-184">It includes the name of the ASE.</span></span> <span data-ttu-id="db6a6-185">Дополнительные сведения о создании внешней среды ASE см. в [этой статье][MakeExternalASE].</span><span class="sxs-lookup"><span data-stu-id="db6a6-185">For more information on how to create an External ASE, see [Create an App Service environment][MakeExternalASE].</span></span> <span data-ttu-id="db6a6-186">Доменное имя во внешней среде ASE имеет формат *.&lt;asename&gt;.p.azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="db6a6-186">The domain name in an External ASE looks like *.&lt;asename&gt;.p.azurewebsites.net*.</span></span> <span data-ttu-id="db6a6-187">Например, если имя вашей среды ASE — _external-ase_, а имя размещаемого в этой среде приложения — _contoso_, то получить к нему доступ можно по следующим URL-адресам:</span><span class="sxs-lookup"><span data-stu-id="db6a6-187">For example, if your ASE is named _external-ase_ and you host an app called _contoso_ in that ASE, you reach it at the following URLs:</span></span>

- <span data-ttu-id="db6a6-188">contoso.external-ase.p.azurewebsites.net</span><span class="sxs-lookup"><span data-stu-id="db6a6-188">contoso.external-ase.p.azurewebsites.net</span></span>
- <span data-ttu-id="db6a6-189">contoso.scm.external-ase.p.azurewebsites.net</span><span class="sxs-lookup"><span data-stu-id="db6a6-189">contoso.scm.external-ase.p.azurewebsites.net</span></span>

<span data-ttu-id="db6a6-190">URL-адрес contoso.scm.external-ase.p.azurewebsites.net используется для доступа к консоли Kudu или для публикации приложения с помощью веб-развертывания.</span><span class="sxs-lookup"><span data-stu-id="db6a6-190">The URL contoso.scm.external-ase.p.azurewebsites.net is used to access the Kudu console or for publishing your app by using web deploy.</span></span> <span data-ttu-id="db6a6-191">Сведения о консоли Kudu см. на странице [Kudu console for Azure App Service][Kudu] (Консоль Kudu для службы приложений Azure).</span><span class="sxs-lookup"><span data-stu-id="db6a6-191">For information on the Kudu console, see [Kudu console for Azure App Service][Kudu].</span></span> <span data-ttu-id="db6a6-192">Консоль Kudu предоставляет веб-интерфейс для отладки, передачи и редактирования файлов, а также многих других возможностей.</span><span class="sxs-lookup"><span data-stu-id="db6a6-192">The Kudu console gives you a web UI for debugging, uploading files, editing files, and much more.</span></span>

<span data-ttu-id="db6a6-193">В среде ASE ILB домен определяется во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="db6a6-193">In an ILB ASE, you determine the domain at deployment time.</span></span> <span data-ttu-id="db6a6-194">Дополнительные сведения о создании среды ASE с внутренним балансировщиком нагрузки см. в статье [Создание и использование внутренней подсистемы балансировки нагрузки со средой службы приложений][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="db6a6-194">For more information on how to create an ILB ASE, see [Create and use an ILB ASE][MakeILBASE].</span></span> <span data-ttu-id="db6a6-195">Если указать доменное имя _ilb-ase.info_, то приложения в данной среде ASE будут использовать этот домен при создании приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-195">If you specify the domain name _ilb-ase.info_, the apps in that ASE use that domain during app creation.</span></span> <span data-ttu-id="db6a6-196">Если имя приложения — _contoso_, то URL-адреса будут следующими:</span><span class="sxs-lookup"><span data-stu-id="db6a6-196">For the app named _contoso_, the URLs are:</span></span>

- <span data-ttu-id="db6a6-197">contoso.ilb-ase.info</span><span class="sxs-lookup"><span data-stu-id="db6a6-197">contoso.ilb-ase.info</span></span>
- <span data-ttu-id="db6a6-198">contoso.scm.ilb-ase.info</span><span class="sxs-lookup"><span data-stu-id="db6a6-198">contoso.scm.ilb-ase.info</span></span>

## <a name="publishing"></a><span data-ttu-id="db6a6-199">Публикация</span><span class="sxs-lookup"><span data-stu-id="db6a6-199">Publishing</span></span> ##

<span data-ttu-id="db6a6-200">По аналогии с мультитенантной службой приложений в среде ASE для публикации можно использовать следующие средства:</span><span class="sxs-lookup"><span data-stu-id="db6a6-200">As with the multitenant App Service, in an ASE you can publish with:</span></span>

- <span data-ttu-id="db6a6-201">веб-развертывания;</span><span class="sxs-lookup"><span data-stu-id="db6a6-201">Web deployment.</span></span>
- <span data-ttu-id="db6a6-202">FTP;</span><span class="sxs-lookup"><span data-stu-id="db6a6-202">FTP.</span></span>
- <span data-ttu-id="db6a6-203">непрерывная интеграция;</span><span class="sxs-lookup"><span data-stu-id="db6a6-203">Continuous integration.</span></span>
- <span data-ttu-id="db6a6-204">функция перетаскивания в консоли Kudu;</span><span class="sxs-lookup"><span data-stu-id="db6a6-204">Drag and drop in the Kudu console.</span></span>
- <span data-ttu-id="db6a6-205">интегрированная среда разработки (IDE), например Visual Studio, Eclipse или IntelliJ IDEA.</span><span class="sxs-lookup"><span data-stu-id="db6a6-205">An IDE, such as Visual Studio, Eclipse, or IntelliJ IDEA.</span></span>

<span data-ttu-id="db6a6-206">Во внешней среде ASE все эти параметры публикации ведут себя одинаково.</span><span class="sxs-lookup"><span data-stu-id="db6a6-206">With an External ASE, these publishing options all behave the same.</span></span> <span data-ttu-id="db6a6-207">Дополнительные сведения см. в статье [Развертывание приложения в службе приложений Azure][AppDeploy].</span><span class="sxs-lookup"><span data-stu-id="db6a6-207">For more information, see [Deployment in Azure App Service][AppDeploy].</span></span> 

<span data-ttu-id="db6a6-208">Публикация с помощью среды ASE с ILB существенно отличается.</span><span class="sxs-lookup"><span data-stu-id="db6a6-208">The major difference with publishing is with respect to an ILB ASE.</span></span> <span data-ttu-id="db6a6-209">При использовании этой среды все конечные точки публикации доступны только через внутреннюю подсистему балансировки нагрузки (ILB).</span><span class="sxs-lookup"><span data-stu-id="db6a6-209">With an ILB ASE, the publishing endpoints are all available only through the ILB.</span></span> <span data-ttu-id="db6a6-210">Внутренняя подсистема балансировки нагрузки расположена на частном IP-адресе в подсети ASE в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="db6a6-210">The ILB is on a private IP in the ASE subnet in the virtual network.</span></span> <span data-ttu-id="db6a6-211">Без сетевого доступа к внутренней подсистеме балансировки нагрузки в среде ASE не удастся опубликовать ни одного приложения.</span><span class="sxs-lookup"><span data-stu-id="db6a6-211">If you don’t have network access to the ILB, you can't publish any apps on that ASE.</span></span> <span data-ttu-id="db6a6-212">Как показано в статье [Создание и использование внутренней подсистемы балансировки нагрузки со средой службы приложений][MakeILBASE], для приложений в системе необходимо настроить DNS.</span><span class="sxs-lookup"><span data-stu-id="db6a6-212">As noted in [Create and use an ILB ASE][MakeILBASE], you need to configure DNS for the apps in the system.</span></span> <span data-ttu-id="db6a6-213">В эти настройки входит конечная точка SCM.</span><span class="sxs-lookup"><span data-stu-id="db6a6-213">That includes the SCM endpoint.</span></span> <span data-ttu-id="db6a6-214">Если они не определены должным образом, вы не сможете их опубликовать.</span><span class="sxs-lookup"><span data-stu-id="db6a6-214">If they're not defined properly, you can't publish.</span></span> <span data-ttu-id="db6a6-215">В интегрированных средах разработки также требуется сетевой доступ к внутренней подсистеме балансировки нагрузки для публикации напрямую.</span><span class="sxs-lookup"><span data-stu-id="db6a6-215">Your IDEs also need to have network access to the ILB in order to publish directly to it.</span></span>

<span data-ttu-id="db6a6-216">Веб-системы непрерывной интеграции, такие как GitHub и Visual Studio Team Services, не работают со средой ASE с ILB, так как конечная точка публикации недоступна через Интернет.</span><span class="sxs-lookup"><span data-stu-id="db6a6-216">Internet-based CI systems, such as GitHub and Visual Studio Team Services, don't work with an ILB ASE because the publishing endpoint is not Internet accessible.</span></span> <span data-ttu-id="db6a6-217">Вместо этого необходимо использовать систему непрерывной интеграции, в которой применяется модель полного извлечения, например Dropbox.</span><span class="sxs-lookup"><span data-stu-id="db6a6-217">Instead, you need to use a CI system that uses a pull model, such as Dropbox.</span></span>

<span data-ttu-id="db6a6-218">Для конечных точек публикации приложений в среде ASE с ILB используется домен, созданный вместе со средой.</span><span class="sxs-lookup"><span data-stu-id="db6a6-218">The publishing endpoints for apps in an ILB ASE use the domain that the ILB ASE was created with.</span></span> <span data-ttu-id="db6a6-219">Это можно увидеть в профиле публикации приложения и в колонке приложения на портале (в разделе **Обзор** > **Основное** и в разделе **Свойства**).</span><span class="sxs-lookup"><span data-stu-id="db6a6-219">You can see it in the app's publishing profile and in the app's portal blade (in **Overview** > **Essentials** and also in **Properties**).</span></span> 

## <a name="pricing"></a><span data-ttu-id="db6a6-220">Цены</span><span class="sxs-lookup"><span data-stu-id="db6a6-220">Pricing</span></span> ##

<span data-ttu-id="db6a6-221">Ценовая категория (номер SKU) **Isolated** была создана для использования только с ASEv2.</span><span class="sxs-lookup"><span data-stu-id="db6a6-221">The pricing SKU called **Isolated** was created for use only with ASEv2.</span></span> <span data-ttu-id="db6a6-222">Все планы службы приложений, размещенные в ASEv2, относятся к ценовой категории (SKU) Isolated.</span><span class="sxs-lookup"><span data-stu-id="db6a6-222">All App Service plans that are hosted in ASEv2 are in the Isolated pricing SKU.</span></span> <span data-ttu-id="db6a6-223">Тарифы в плане службы приложений категории Isolated могут отличаться в зависимости от региона.</span><span class="sxs-lookup"><span data-stu-id="db6a6-223">Isolated App Service plan rates can vary per region.</span></span> 

<span data-ttu-id="db6a6-224">Помимо цены плана службы приложений существует фиксированная плата за саму среду ASE.</span><span class="sxs-lookup"><span data-stu-id="db6a6-224">In addition to the price for your App Service plans, there is a flat rate for ASE itself.</span></span> <span data-ttu-id="db6a6-225">Эта плата не изменяется в зависимости от размера вашей среды ASE и взимается за инфраструктуру ASE. При этом применяется принцип масштабирования по умолчанию: 1 дополнительный внешний интерфейс на каждые 15 экземпляров плана службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-225">The flat rate doesn't change with the size of your ASE and pays for the ASE infrastructure at a default scaling rate of 1 additional front-end for every 15 App Service plan instances.</span></span>  

<span data-ttu-id="db6a6-226">Если принцип масштабирования по умолчанию (1 внешний интерфейс на каждые 15 экземпляров плана службы приложений) не соответствует имеющимся потребностям, то можно изменить число добавляемых внешних интерфейсов или их размер.</span><span class="sxs-lookup"><span data-stu-id="db6a6-226">If the default scale rate of 1 front end for every 15 App Service plan instances is not fast enough, you can adjust the ratio at which front-ends are added or the size of the front-ends.</span></span>  <span data-ttu-id="db6a6-227">При изменении этого соотношения или размера оплачивается число ядер внешних интерфейсов, которые не были бы добавлены при использовании параметров по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="db6a6-227">When you adjust the ratio or size, you pay for the front-end cores that would not be added by default.</span></span>  

<span data-ttu-id="db6a6-228">Например, если установить значение коэффициента масштабирования 10, то внешний интерфейс будет добавляться для каждых 10 экземпляров в планах службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-228">For example, if you adjust the scale ratio to 10, a front end is added for every 10 instances in your App Service plans.</span></span> <span data-ttu-id="db6a6-229">Фиксированная плата охватывает масштаб "1 внешний интерфейс на каждые 15 экземпляров".</span><span class="sxs-lookup"><span data-stu-id="db6a6-229">The flat fee covers a scale rate of one front end for every 15 instances.</span></span> <span data-ttu-id="db6a6-230">При значении коэффициента масштабирования 10 вам придется заплатить за третий внешний интерфейс, который добавляется при 10 экземплярах плана службы приложений.</span><span class="sxs-lookup"><span data-stu-id="db6a6-230">With a scale ratio of 10, you pay a fee for the third front end that's added for the 10 App Service plan instances.</span></span> <span data-ttu-id="db6a6-231">Но когда число дойдет до 15 экземпляров, вам не нужно будет ничего доплачивать, так как интерфейс был бы добавлен автоматически.</span><span class="sxs-lookup"><span data-stu-id="db6a6-231">You don't need to pay for it when you reach 15 instances because it was added automatically.</span></span>

<span data-ttu-id="db6a6-232">Если изменить размер внешних интерфейсов до 2 ядер, но не изменить соотношение, то за дополнительные ядра будет взиматься плата.</span><span class="sxs-lookup"><span data-stu-id="db6a6-232">If you adjusted the size of the front-ends to 2 cores but do not adjust the ratio then you pay for the extra cores.</span></span>  <span data-ttu-id="db6a6-233">Среда ASE создается с 2 внешними интерфейсами, поэтому даже ниже порогового значения автоматического масштабирования взимается плата за 2 дополнительных ядра, если размер внешних интерфейсов увеличен до 2 ядер.</span><span class="sxs-lookup"><span data-stu-id="db6a6-233">An ASE is created with 2 front-ends, so even below the automatic scaling threshold you would pay for 2 extra cores if you increased the size to 2 core front-ends.</span></span>

<span data-ttu-id="db6a6-234">Дополнительные сведения см. на странице [цен на службу приложений Azure][Pricing].</span><span class="sxs-lookup"><span data-stu-id="db6a6-234">For more information, see [Azure App Service pricing][Pricing].</span></span>

## <a name="delete-an-ase"></a><span data-ttu-id="db6a6-235">Удаление ASE</span><span class="sxs-lookup"><span data-stu-id="db6a6-235">Delete an ASE</span></span> ##

<span data-ttu-id="db6a6-236">Чтобы удалить ASE, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="db6a6-236">To delete an ASE:</span></span> 

1. <span data-ttu-id="db6a6-237">Воспользуйтесь функцией **удаления** в верхней части колонки **Среда службы приложений**.</span><span class="sxs-lookup"><span data-stu-id="db6a6-237">Use **Delete** at the top of the **App Service Environment** blade.</span></span> 

2. <span data-ttu-id="db6a6-238">Введите имя среды ASE, чтобы подтвердить ее удаление.</span><span class="sxs-lookup"><span data-stu-id="db6a6-238">Enter the name of your ASE to confirm that you want to delete it.</span></span> <span data-ttu-id="db6a6-239">При удалении среды ASE также удаляются все ее содержимое.</span><span class="sxs-lookup"><span data-stu-id="db6a6-239">When you delete an ASE, you delete all of the content within it as well.</span></span> 

    ![Удаление ASE][3]

<!--Image references-->
[1]: ./media/using_an_app_service_environment/usingase-appcreate.png
[2]: ./media/using_an_app_service_environment/usingase-pricingtiers.png
[3]: ./media/using_an_app_service_environment/usingase-delete.png


<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
