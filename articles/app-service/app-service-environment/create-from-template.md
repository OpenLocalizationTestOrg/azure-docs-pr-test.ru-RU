---
title: "aaaCreate среду службы приложений Azure с помощью шаблона диспетчера ресурсов"
description: "Объясняет, как toocreate внешние или службе приложений Azure ILB среды с помощью шаблона диспетчера ресурсов"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 6eb7d43d-e820-4a47-818c-80ff7d3b6f8e
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: ccompy
ms.openlocfilehash: c8aeedee675a6e931169b725ee916cc7fa8f762f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-an-ase-by-using-an-azure-resource-manager-template"></a><span data-ttu-id="61683-103">Создание среды ASE с помощью шаблона Azure Resource Manager</span><span class="sxs-lookup"><span data-stu-id="61683-103">Create an ASE by using an Azure Resource Manager template</span></span>

## <a name="overview"></a><span data-ttu-id="61683-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="61683-104">Overview</span></span>
<span data-ttu-id="61683-105">Среды службы приложений Azure (ASE) создаются с помощью конечной точки с доступом к Интернету или конечной точки с внутренним адресом в виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="61683-105">Azure App Service environments (ASEs) can be created with an internet-accessible endpoint or an endpoint on an internal address in an Azure virtual network (VNet).</span></span> <span data-ttu-id="61683-106">Если при создании внутренней конечной точки эта конечная точка предоставляется компонентом Azure, она называется внутренним балансировщиком нагрузки.</span><span class="sxs-lookup"><span data-stu-id="61683-106">When created with an internal endpoint, that endpoint is provided by an Azure component called an internal load balancer (ILB).</span></span> <span data-ttu-id="61683-107">Hello ASE на внутренний IP-адрес, называется ILB ASE.</span><span class="sxs-lookup"><span data-stu-id="61683-107">hello ASE on an internal IP address is called an ILB ASE.</span></span> <span data-ttu-id="61683-108">Hello ASE с общедоступной конечной точки, называется внешних ASE.</span><span class="sxs-lookup"><span data-stu-id="61683-108">hello ASE with a public endpoint is called an External ASE.</span></span> 

<span data-ttu-id="61683-109">ASE могут создаваться с помощью портала Azure hello или шаблона диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="61683-109">An ASE can be created by using hello Azure portal or an Azure Resource Manager template.</span></span> <span data-ttu-id="61683-110">В этой статье рассматриваются шаги hello и синтаксиса, toocreate внешних ASE или ILB ASE с помощью шаблонов диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="61683-110">This article walks through hello steps and syntax you need toocreate an External ASE or ILB ASE with Resource Manager templates.</span></span> <span data-ttu-id="61683-111">toocreate ASE в hello портал Azure. в статье toolearn [сделать внешних ASE] [ MakeExternalASE] или [сделать ILB ASE][MakeILBASE].</span><span class="sxs-lookup"><span data-stu-id="61683-111">toolearn how toocreate an ASE in hello Azure portal, see [Make an External ASE][MakeExternalASE] or [Make an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="61683-112">При создании ASE в hello портал Azure можно создать в hello же время или выберите уже существующий toodeploy виртуальной сети в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="61683-112">When you create an ASE in hello Azure portal, you can create your VNet at hello same time or choose a preexisting VNet toodeploy into.</span></span> <span data-ttu-id="61683-113">При создании ASE из шаблона необходимо:</span><span class="sxs-lookup"><span data-stu-id="61683-113">When you create an ASE from a template, you must start with:</span></span> 

* <span data-ttu-id="61683-114">Создать виртуальную сеть Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="61683-114">A Resource Manager VNet.</span></span>
* <span data-ttu-id="61683-115">Создать подсеть в этой виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="61683-115">A subnet in that VNet.</span></span> <span data-ttu-id="61683-116">Мы рекомендуем размер подсети ASE `/25` с 128 адресов tooaccomodate будущего роста.</span><span class="sxs-lookup"><span data-stu-id="61683-116">We recommend an ASE subnet size of `/25` with 128 addresses tooaccomodate future growth.</span></span> <span data-ttu-id="61683-117">После создания hello ASE hello размер нельзя изменить.</span><span class="sxs-lookup"><span data-stu-id="61683-117">After hello ASE is created, you can't change hello size.</span></span>
* <span data-ttu-id="61683-118">Идентификатор ресурса Hello из виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="61683-118">hello resource ID from your VNet.</span></span> <span data-ttu-id="61683-119">Эти сведения можно получить из hello портал Azure в группе свойств виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="61683-119">You can get this information from hello Azure portal under your virtual network properties.</span></span>
* <span data-ttu-id="61683-120">Hello подписку, которую вы хотите toodeploy в.</span><span class="sxs-lookup"><span data-stu-id="61683-120">hello subscription you want toodeploy into.</span></span>
* <span data-ttu-id="61683-121">Hello место toodeploy в.</span><span class="sxs-lookup"><span data-stu-id="61683-121">hello location you want toodeploy into.</span></span>

<span data-ttu-id="61683-122">tooautomate вашей ASE создания:</span><span class="sxs-lookup"><span data-stu-id="61683-122">tooautomate your ASE creation:</span></span>

1. <span data-ttu-id="61683-123">Создание hello ASE на основе шаблона.</span><span class="sxs-lookup"><span data-stu-id="61683-123">Create hello ASE from a template.</span></span> <span data-ttu-id="61683-124">При создании внешнего ASE это последний шаг.</span><span class="sxs-lookup"><span data-stu-id="61683-124">If you create an External ASE, you're finished after this step.</span></span> <span data-ttu-id="61683-125">При создании ILB ASE, существует несколько toodo несколько вещей.</span><span class="sxs-lookup"><span data-stu-id="61683-125">If you create an ILB ASE, there are a few more things toodo.</span></span>

2. <span data-ttu-id="61683-126">После создания ASE с внутренним балансировщиком нагрузки отправляется SSL-сертификат, соответствующий домену ASE с внутренним балансировщиком нагрузки.</span><span class="sxs-lookup"><span data-stu-id="61683-126">After your ILB ASE is created, an SSL certificate that matches your ILB ASE domain is uploaded.</span></span>

3. <span data-ttu-id="61683-127">Hello отправленный сертификат SSL назначен toohello ILB ASE свой SSL-сертификат «default».</span><span class="sxs-lookup"><span data-stu-id="61683-127">hello uploaded SSL certificate is assigned toohello ILB ASE as its "default" SSL certificate.</span></span>  <span data-ttu-id="61683-128">Этот сертификат используется для tooapps трафик SSL на hello ILB ASE при использовании hello общий корневой домен, назначенный toohello ASE (например, https://someapp.mycustomrootcomain.com).</span><span class="sxs-lookup"><span data-stu-id="61683-128">This certificate is used for SSL traffic tooapps on hello ILB ASE when they use hello common root domain that's assigned toohello ASE (for example, https://someapp.mycustomrootcomain.com).</span></span>


## <a name="create-hello-ase"></a><span data-ttu-id="61683-129">Создание hello ASE</span><span class="sxs-lookup"><span data-stu-id="61683-129">Create hello ASE</span></span>
<span data-ttu-id="61683-130">Шаблон Resource Manager, с помощью которого создается ASE, и соответствующий файл параметров доступны [в примере][quickstartasev2create], размещенном на сайте GitHub.</span><span class="sxs-lookup"><span data-stu-id="61683-130">A Resource Manager template that creates an ASE and its associated parameters file is available [in an example][quickstartasev2create] on GitHub.</span></span>

<span data-ttu-id="61683-131">Toomake ILB ASE, используйте эти шаблона диспетчера ресурсов [примеры][quickstartilbasecreate].</span><span class="sxs-lookup"><span data-stu-id="61683-131">If you want toomake an ILB ASE, use these Resource Manager template [examples][quickstartilbasecreate].</span></span> <span data-ttu-id="61683-132">Они обслуживающие toothat варианта использования.</span><span class="sxs-lookup"><span data-stu-id="61683-132">They cater toothat use case.</span></span> <span data-ttu-id="61683-133">Большинство параметров hello в hello *azuredeploy.parameters.json* файла являются общие toohello Создание ILB ASEs и внешних ASEs.</span><span class="sxs-lookup"><span data-stu-id="61683-133">Most of hello parameters in hello *azuredeploy.parameters.json* file are common toohello creation of ILB ASEs and External ASEs.</span></span> <span data-ttu-id="61683-134">Hello ниже указаны параметры особое примечание, или, являются уникальными, при создании ILB ASE:</span><span class="sxs-lookup"><span data-stu-id="61683-134">hello following list calls out parameters of special note, or that are unique, when you create an ILB ASE:</span></span>

* <span data-ttu-id="61683-135">*interalLoadBalancingMode*: В большинстве случаев значение этого too3, что означает, что трафик HTTP/HTTPS на портах 80 и 443 и портов канала управления и данных hello прослушивал tooby службу hello FTP на hello ASE, будет привязанного tooan ILB выделенной виртуальной сети Внутренний адрес.</span><span class="sxs-lookup"><span data-stu-id="61683-135">*interalLoadBalancingMode*: In most cases, set this too3, which means both HTTP/HTTPS traffic on ports 80/443, and hello control/data channel ports listened tooby hello FTP service on hello ASE, will be bound tooan ILB-allocated virtual network internal address.</span></span> <span data-ttu-id="61683-136">Если это свойство имеет значение too2, только hello FTP относящихся к службам порты (каналы данных и управления), связанный tooan адрес ILB.</span><span class="sxs-lookup"><span data-stu-id="61683-136">If this property is set too2, only hello FTP service-related ports (both control and data channels) are bound tooan ILB address.</span></span> <span data-ttu-id="61683-137">на общедоступный VIP hello остается Hello трафик HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="61683-137">hello HTTP/HTTPS traffic remains on hello public VIP.</span></span>
* <span data-ttu-id="61683-138">*DNS-суффикс*: этот параметр определяет корневой домен по умолчанию hello, назначенный toohello ASE.</span><span class="sxs-lookup"><span data-stu-id="61683-138">*dnsSuffix*: This parameter defines hello default root domain that's assigned toohello ASE.</span></span> <span data-ttu-id="61683-139">В варианте открытый hello службе приложений Azure, hello по умолчанию для всех веб-приложений является корневым *azurewebsites.net*.</span><span class="sxs-lookup"><span data-stu-id="61683-139">In hello public variation of Azure App Service, hello default root domain for all web apps is *azurewebsites.net*.</span></span> <span data-ttu-id="61683-140">Так как ILB ASE внутренней tooa клиента виртуальной сети, он не становится корневой домен по умолчанию hello общедоступной смысле toouse службы.</span><span class="sxs-lookup"><span data-stu-id="61683-140">Because an ILB ASE is internal tooa customer's virtual network, it doesn't make sense toouse hello public service's default root domain.</span></span> <span data-ttu-id="61683-141">Вместо этого ASE с внутренним балансировщиком нагрузки необходимо назначить корневой домен по умолчанию, который целесообразно использовать в пределах внутренней виртуальной сети компании.</span><span class="sxs-lookup"><span data-stu-id="61683-141">Instead, an ILB ASE should have a default root domain that makes sense for use within a company's internal virtual network.</span></span> <span data-ttu-id="61683-142">Предположим, например, Корпорация Contoso использует корневым доменом по умолчанию из *внутренней contoso.com* для приложений, которые предполагаемого toobe разрешаемым и доступен только в пределах виртуальной сети Contoso.</span><span class="sxs-lookup"><span data-stu-id="61683-142">For example, Contoso Corporation might use a default root domain of *internal-contoso.com* for apps that are intended toobe resolvable and accessible only within Contoso's virtual network.</span></span> 
* <span data-ttu-id="61683-143">*ipSslAddressCount*: этот параметр по умолчанию значение 0 hello tooa *azuredeploy.json* файла, потому что ILB ASEs иметь только один адрес ILB.</span><span class="sxs-lookup"><span data-stu-id="61683-143">*ipSslAddressCount*: This parameter automatically defaults tooa value of 0 in hello *azuredeploy.json* file because ILB ASEs only have a single ILB address.</span></span> <span data-ttu-id="61683-144">Для ASE с внутренним балансировщиком нагрузки нет явно заданных адресов SSL на основе IP,</span><span class="sxs-lookup"><span data-stu-id="61683-144">There are no explicit IP-SSL addresses for an ILB ASE.</span></span> <span data-ttu-id="61683-145">Таким образом пул адресов SSL на ОСНОВЕ IP для ILB ASE hello должно быть задано toozero.</span><span class="sxs-lookup"><span data-stu-id="61683-145">Hence, hello IP-SSL address pool for an ILB ASE must be set toozero.</span></span> <span data-ttu-id="61683-146">В противном случае произойдет ошибка подготовки.</span><span class="sxs-lookup"><span data-stu-id="61683-146">Otherwise, a provisioning error occurs.</span></span> 

<span data-ttu-id="61683-147">После hello *azuredeploy.parameters.json* заполняется файл, создать с помощью фрагмента кода PowerShell hello hello ASE.</span><span class="sxs-lookup"><span data-stu-id="61683-147">After hello *azuredeploy.parameters.json* file is filled in, create hello ASE by using hello PowerShell code snippet.</span></span> <span data-ttu-id="61683-148">Изменять hello пути toomatch hello диспетчера ресурсов файл шаблона расположения файлов на компьютере.</span><span class="sxs-lookup"><span data-stu-id="61683-148">Change hello file paths toomatch hello Resource Manager template-file locations on your machine.</span></span> <span data-ttu-id="61683-149">Запомните toosupply собственные значения для имени развертывания диспетчера ресурсов hello и имя группы ресурсов hello:</span><span class="sxs-lookup"><span data-stu-id="61683-149">Remember toosupply your own values for hello Resource Manager deployment name and hello resource group name:</span></span>

    $templatePath="PATH\azuredeploy.json"
    $parameterPath="PATH\azuredeploy.parameters.json"

    New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="61683-150">Это занимает около часа для создания toobe ASE hello.</span><span class="sxs-lookup"><span data-stu-id="61683-150">It takes about an hour for hello ASE toobe created.</span></span> <span data-ttu-id="61683-151">Затем hello ASE отображается портал hello в список hello ASEs для подписки hello, запустившего hello развертывания.</span><span class="sxs-lookup"><span data-stu-id="61683-151">Then hello ASE shows up in hello portal in hello list of ASEs for hello subscription that triggered hello deployment.</span></span>

## <a name="upload-and-configure-hello-default-ssl-certificate"></a><span data-ttu-id="61683-152">Загрузка и Настройка SSL-сертификат hello «default»</span><span class="sxs-lookup"><span data-stu-id="61683-152">Upload and configure hello "default" SSL certificate</span></span>
<span data-ttu-id="61683-153">SSL-сертификата необходимо связать с hello ASE как SSL-сертификат «default» hello, tooapps подключений SSL используется tooestablish.</span><span class="sxs-lookup"><span data-stu-id="61683-153">An SSL certificate must be associated with hello ASE as hello "default" SSL certificate that's used tooestablish SSL connections tooapps.</span></span> <span data-ttu-id="61683-154">Если DNS-суффикс по умолчанию hello в ASE *внутренней contoso.com*, toohttps://some-random-app.internal-contoso.com подключения требуется SSL-сертификат, который допустим **.internal contoso.com* .</span><span class="sxs-lookup"><span data-stu-id="61683-154">If hello ASE's default DNS suffix is *internal-contoso.com*, a connection toohttps://some-random-app.internal-contoso.com requires an SSL certificate that's valid for **.internal-contoso.com*.</span></span> 

<span data-ttu-id="61683-155">Можно получить действительный SSL-сертификат от внутреннего центра сертификации, приобрести у внешнего поставщика или использовать самозаверяющий сертификат.</span><span class="sxs-lookup"><span data-stu-id="61683-155">Obtain a valid SSL certificate by using internal certificate authorities, purchasing a certificate from an external issuer, or using a self-signed certificate.</span></span> <span data-ttu-id="61683-156">Вне зависимости от источника hello hello SSL-сертификат hello следующие атрибуты сертификата должен быть настроен правильно:</span><span class="sxs-lookup"><span data-stu-id="61683-156">Regardless of hello source of hello SSL certificate, hello following certificate attributes must be configured properly:</span></span>

* <span data-ttu-id="61683-157">**Тема**: этот атрибут должен быть задан слишком **.your корневого домена here.com*.</span><span class="sxs-lookup"><span data-stu-id="61683-157">**Subject**: This attribute must be set too**.your-root-domain-here.com*.</span></span>
* <span data-ttu-id="61683-158">**Subject Alternative Name** — этот атрибут должен содержать два значения: *.имя_корневого_домена.com* и *.scm.имя_корневого_домена.com*. SCM/Kudu сайта, связанные с каждой приложением toohello подключений SSL использует адрес формы hello *your-app-name.scm.your-root-domain-here.com*.</span><span class="sxs-lookup"><span data-stu-id="61683-158">**Subject Alternative Name**: This attribute must include both **.your-root-domain-here.com* and **.scm.your-root-domain-here.com*. SSL connections toohello SCM/Kudu site associated with each app use an address of hello form *your-app-name.scm.your-root-domain-here.com*.</span></span>

<span data-ttu-id="61683-159">После получения действительного SSL-сертификата требуется выполнить еще два дополнительных подготовительных действия.</span><span class="sxs-lookup"><span data-stu-id="61683-159">With a valid SSL certificate in hand, two additional preparatory steps are needed.</span></span> <span data-ttu-id="61683-160">Преобразования и сохранения hello SSL-сертификата в PFX-файл.</span><span class="sxs-lookup"><span data-stu-id="61683-160">Convert/save hello SSL certificate as a .pfx file.</span></span> <span data-ttu-id="61683-161">Помните, что hello PFX-файл включает всем промежуточным и корневые сертификаты.</span><span class="sxs-lookup"><span data-stu-id="61683-161">Remember that hello .pfx file must include all intermediate and root certificates.</span></span> <span data-ttu-id="61683-162">Защитите его паролем.</span><span class="sxs-lookup"><span data-stu-id="61683-162">Secure it with a password.</span></span>

<span data-ttu-id="61683-163">Hello PFX-файл должен toobe преобразуется в строку base64, так как сертификат SSL hello отправки с помощью шаблона диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="61683-163">hello .pfx file needs toobe converted into a base64 string because hello SSL certificate is uploaded by using a Resource Manager template.</span></span> <span data-ttu-id="61683-164">Поскольку шаблоны диспетчера ресурсов — это текстовые файлы, hello PFX-файл может быть преобразована в строку в кодировке base64.</span><span class="sxs-lookup"><span data-stu-id="61683-164">Because Resource Manager templates are text files, hello .pfx file must be converted into a base64 string.</span></span> <span data-ttu-id="61683-165">Таким образом, ее можно добавить в качестве параметра шаблона hello.</span><span class="sxs-lookup"><span data-stu-id="61683-165">This way it can be included as a parameter of hello template.</span></span>

<span data-ttu-id="61683-166">Используйте следующий фрагмент кода PowerShell hello.</span><span class="sxs-lookup"><span data-stu-id="61683-166">Use hello following PowerShell code snippet to:</span></span>

* <span data-ttu-id="61683-167">создать самозаверяющий сертификат;</span><span class="sxs-lookup"><span data-stu-id="61683-167">Generate a self-signed certificate.</span></span>
* <span data-ttu-id="61683-168">Экспорт сертификата hello в PFX-файл.</span><span class="sxs-lookup"><span data-stu-id="61683-168">Export hello certificate as a .pfx file.</span></span>
* <span data-ttu-id="61683-169">Преобразуйте hello PFX-файла в строку в кодировке base64.</span><span class="sxs-lookup"><span data-stu-id="61683-169">Convert hello .pfx file into a base64-encoded string.</span></span>
* <span data-ttu-id="61683-170">Сохраните hello строки в кодировке base64 tooa отдельный файл.</span><span class="sxs-lookup"><span data-stu-id="61683-170">Save hello base64-encoded string tooa separate file.</span></span> 

<span data-ttu-id="61683-171">Этот код PowerShell для кодировки base64 адаптирован на основании hello [PowerShell скрипты блог][examplebase64encoding]:</span><span class="sxs-lookup"><span data-stu-id="61683-171">This PowerShell code for base64 encoding was adapted from hello [PowerShell scripts blog][examplebase64encoding]:</span></span>

        $certificate = New-SelfSignedCertificate -certstorelocation cert:\localmachine\my -dnsname "*.internal-contoso.com","*.scm.internal-contoso.com"

        $certThumbprint = "cert:\localMachine\my\" + $certificate.Thumbprint
        $password = ConvertTo-SecureString -String "CHANGETHISPASSWORD" -Force -AsPlainText

        $fileName = "exportedcert.pfx"
        Export-PfxCertificate -cert $certThumbprint -FilePath $fileName -Password $password     

        $fileContentBytes = get-content -encoding byte $fileName
        $fileContentEncoded = [System.Convert]::ToBase64String($fileContentBytes)
        $fileContentEncoded | set-content ($fileName + ".b64")

<span data-ttu-id="61683-172">Преобразовать строки в кодировке base64 tooa hello SSL-сертификат успешно создан, используйте шаблон диспетчера ресурсов пример hello [настроить сертификат SSL по умолчанию hello] [ quickstartconfiguressl] на GitHub.</span><span class="sxs-lookup"><span data-stu-id="61683-172">After hello SSL certificate is successfully generated and converted tooa base64-encoded string, use hello example Resource Manager template [Configure hello default SSL certificate][quickstartconfiguressl] on GitHub.</span></span> 

<span data-ttu-id="61683-173">Здравствуйте, параметры в hello *azuredeploy.parameters.json* файл перечисленные здесь:</span><span class="sxs-lookup"><span data-stu-id="61683-173">hello parameters in hello *azuredeploy.parameters.json* file are listed here:</span></span>

* <span data-ttu-id="61683-174">*appServiceEnvironmentName*: hello имя hello настраивается ASE ILB.</span><span class="sxs-lookup"><span data-stu-id="61683-174">*appServiceEnvironmentName*: hello name of hello ILB ASE being configured.</span></span>
* <span data-ttu-id="61683-175">*existingAseLocation*: строка, содержащая текст hello регион Azure, где hello ILB ASE был развернут.</span><span class="sxs-lookup"><span data-stu-id="61683-175">*existingAseLocation*: Text string containing hello Azure region where hello ILB ASE was deployed.</span></span>  <span data-ttu-id="61683-176">Например, South Central US.</span><span class="sxs-lookup"><span data-stu-id="61683-176">For example: "South Central US".</span></span>
* <span data-ttu-id="61683-177">*pfxBlobString*: hello представление based64 зашифрованную строку hello PFX-файл.</span><span class="sxs-lookup"><span data-stu-id="61683-177">*pfxBlobString*: hello based64-encoded string representation of hello .pfx file.</span></span> <span data-ttu-id="61683-178">Используйте приведенный выше фрагмент кода hello и скопируйте строку hello, содержащихся в «exportedcert.pfx.b64».</span><span class="sxs-lookup"><span data-stu-id="61683-178">Use hello code snippet shown earlier and copy hello string contained in "exportedcert.pfx.b64".</span></span> <span data-ttu-id="61683-179">Вставьте его в виде значения hello hello *pfxBlobString* атрибута.</span><span class="sxs-lookup"><span data-stu-id="61683-179">Paste it in as hello value of hello *pfxBlobString* attribute.</span></span>
* <span data-ttu-id="61683-180">*пароль*: hello пароль, используемый toosecure hello PFX-файл.</span><span class="sxs-lookup"><span data-stu-id="61683-180">*password*: hello password used toosecure hello .pfx file.</span></span>
* <span data-ttu-id="61683-181">*certificateThumbprint*: hello отпечатка сертификата.</span><span class="sxs-lookup"><span data-stu-id="61683-181">*certificateThumbprint*: hello certificate's thumbprint.</span></span> <span data-ttu-id="61683-182">Если это значение получалось из PowerShell (например, *$certificate. Отпечаток* из hello расположенного выше фрагмента кода), можно использовать значение hello как есть.</span><span class="sxs-lookup"><span data-stu-id="61683-182">If you retrieve this value from PowerShell (for example, *$certificate.Thumbprint* from hello earlier code snippet), you can use hello value as is.</span></span> <span data-ttu-id="61683-183">При копировании hello значение из диалоговое окно сертификата Windows hello помните toostrip out hello лишних пробелов.</span><span class="sxs-lookup"><span data-stu-id="61683-183">If you copy hello value from hello Windows certificate dialog box, remember toostrip out hello extraneous spaces.</span></span> <span data-ttu-id="61683-184">Hello *certificateThumbprint* должна выглядеть примерно так AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span><span class="sxs-lookup"><span data-stu-id="61683-184">hello *certificateThumbprint* should look something like  AF3143EB61D43F6727842115BB7F17BBCECAECAE.</span></span>
* <span data-ttu-id="61683-185">*certificateName*: идентификатор понятное строки по собственному выбору используется сертификат tooidentity hello.</span><span class="sxs-lookup"><span data-stu-id="61683-185">*certificateName*: A friendly string identifier of your own choosing used tooidentity hello certificate.</span></span> <span data-ttu-id="61683-186">Имя Hello используется как часть hello уникальный идентификатор диспетчера ресурсов для hello *Microsoft.Web/certificates* сущность, представляющая hello SSL-сертификат.</span><span class="sxs-lookup"><span data-stu-id="61683-186">hello name is used as part of hello unique Resource Manager identifier for hello *Microsoft.Web/certificates* entity that represents hello SSL certificate.</span></span> <span data-ttu-id="61683-187">Имя Hello *должен* заканчиваться hello следующий суффикс: \_yourASENameHere_InternalLoadBalancingASE.</span><span class="sxs-lookup"><span data-stu-id="61683-187">hello name *must* end with hello following suffix: \_yourASENameHere_InternalLoadBalancingASE.</span></span> <span data-ttu-id="61683-188">Hello портал Azure использует этот суффикс является признаком того, что сертификат hello используется toosecure ASE поддержкой ILB.</span><span class="sxs-lookup"><span data-stu-id="61683-188">hello Azure portal uses this suffix as an indicator that hello certificate is used toosecure an ILB-enabled ASE.</span></span>

<span data-ttu-id="61683-189">Ниже приведен сокращенный пример файла *azuredeploy.parameters.json*.</span><span class="sxs-lookup"><span data-stu-id="61683-189">An abbreviated example of *azuredeploy.parameters.json* is shown here:</span></span>

    {
         "$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentParameters.json",
         "contentVersion": "1.0.0.0",
         "parameters": {
              "appServiceEnvironmentName": {
                   "value": "yourASENameHere"
              },
              "existingAseLocation": {
                   "value": "East US 2"
              },
              "pfxBlobString": {
                   "value": "MIIKcAIBAz...snip...snip...pkCAgfQ"
              },
              "password": {
                   "value": "PASSWORDGOESHERE"
              },
              "certificateThumbprint": {
                   "value": "AF3143EB61D43F6727842115BB7F17BBCECAECAE"
              },
              "certificateName": {
                   "value": "DefaultCertificateFor_yourASENameHere_InternalLoadBalancingASE"
              }
         }
    }

<span data-ttu-id="61683-190">После hello *azuredeploy.parameters.json* файл заполнено, Настройка SSL-сертификат по умолчанию hello с помощью фрагмента кода PowerShell hello.</span><span class="sxs-lookup"><span data-stu-id="61683-190">After hello *azuredeploy.parameters.json* file is filled in, configure hello default SSL certificate by using hello PowerShell code snippet.</span></span> <span data-ttu-id="61683-191">Изменить toomatch пути файла hello, где находятся файлы шаблонов диспетчера ресурсов hello на компьютере.</span><span class="sxs-lookup"><span data-stu-id="61683-191">Change hello file paths toomatch where hello Resource Manager template files are located on your machine.</span></span> <span data-ttu-id="61683-192">Запомните toosupply собственные значения для имени развертывания диспетчера ресурсов hello и имя группы ресурсов hello:</span><span class="sxs-lookup"><span data-stu-id="61683-192">Remember toosupply your own values for hello Resource Manager deployment name and hello resource group name:</span></span>

     $templatePath="PATH\azuredeploy.json"
     $parameterPath="PATH\azuredeploy.parameters.json"

     New-AzureRmResourceGroupDeployment -Name "CHANGEME" -ResourceGroupName "YOUR-RG-NAME-HERE" -TemplateFile $templatePath -TemplateParameterFile $parameterPath

<span data-ttu-id="61683-193">Занимает примерно 40 минут отдельно для каждого ASE внешнего интерфейса tooapply hello.</span><span class="sxs-lookup"><span data-stu-id="61683-193">It takes roughly 40 minutes per ASE front end tooapply hello change.</span></span> <span data-ttu-id="61683-194">Например ASE с размерами по умолчанию, использующий два интерфейсных, hello шаблона занимает примерно 1 час и toocomplete 20 минут.</span><span class="sxs-lookup"><span data-stu-id="61683-194">For example, for a default-sized ASE that uses two front ends, hello template takes around one hour and 20 minutes toocomplete.</span></span> <span data-ttu-id="61683-195">Во время шаблона hello hello ASE нельзя масштабировать.</span><span class="sxs-lookup"><span data-stu-id="61683-195">While hello template is running, hello ASE can't scale.</span></span>  

<span data-ttu-id="61683-196">По завершении шаблона hello приложений на hello ILB ASE может осуществляться по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="61683-196">After hello template finishes, apps on hello ILB ASE can be accessed over HTTPS.</span></span> <span data-ttu-id="61683-197">Hello подключения защищены с помощью SSL-сертификат по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="61683-197">hello connections are secured by using hello default SSL certificate.</span></span> <span data-ttu-id="61683-198">SSL-сертификат по умолчанию Hello используется, когда приложения на hello ILB ASE адресуются с помощью комбинации имени приложения hello, а также имя узла по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="61683-198">hello default SSL certificate is used when apps on hello ILB ASE are addressed by using a combination of hello application name plus hello default host name.</span></span> <span data-ttu-id="61683-199">Например, https://mycustomapp.internal-contoso.com используется сертификат SSL по умолчанию hello для **.internal contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="61683-199">For example, https://mycustomapp.internal-contoso.com uses hello default SSL certificate for **.internal-contoso.com*.</span></span>

<span data-ttu-id="61683-200">Тем не менее так же, как приложения, которые работают на общей многопользовательской службы hello, разработчики можно настроить пользовательские имена узлов для отдельных приложений.</span><span class="sxs-lookup"><span data-stu-id="61683-200">However, just like apps that run on hello public multitenant service, developers can configure custom host names for individual apps.</span></span> <span data-ttu-id="61683-201">и уникальные привязки сертификатов SNI SSL.</span><span class="sxs-lookup"><span data-stu-id="61683-201">They also can configure unique SNI SSL certificate bindings for individual apps.</span></span>

## <a name="app-service-environment-v1"></a><span data-ttu-id="61683-202">Среда службы приложений версии 1</span><span class="sxs-lookup"><span data-stu-id="61683-202">App Service Environment v1</span></span> ##
<span data-ttu-id="61683-203">Среда службы приложений имеет две версии: ASEv1 и ASEv2.</span><span class="sxs-lookup"><span data-stu-id="61683-203">App Service Environment has two versions: ASEv1 and ASEv2.</span></span> <span data-ttu-id="61683-204">предшествующий сведения Hello был основан на ASEv2.</span><span class="sxs-lookup"><span data-stu-id="61683-204">hello preceding information was based on ASEv2.</span></span> <span data-ttu-id="61683-205">В этом разделе представлены hello различия между ASEv1 и ASEv2.</span><span class="sxs-lookup"><span data-stu-id="61683-205">This section shows you hello differences between ASEv1 and ASEv2.</span></span>

<span data-ttu-id="61683-206">В ASEv1 можно управлять всеми ресурсами hello вручную.</span><span class="sxs-lookup"><span data-stu-id="61683-206">In ASEv1, you manage all of hello resources manually.</span></span> <span data-ttu-id="61683-207">Включающий интерфейсных hello, сотрудников и IP-адреса для SSL на основе IP.</span><span class="sxs-lookup"><span data-stu-id="61683-207">That includes hello front ends, workers, and IP addresses used for IP-based SSL.</span></span> <span data-ttu-id="61683-208">Прежде чем можно масштабировать плана служб приложений, требуется расширение hello рабочего пула, которые должны toohost его.</span><span class="sxs-lookup"><span data-stu-id="61683-208">Before you can scale out your App Service plan, you must scale out hello worker pool that you want toohost it.</span></span>

<span data-ttu-id="61683-209">ASEv1 использует модель ценообразования отличную от ASEv2.</span><span class="sxs-lookup"><span data-stu-id="61683-209">ASEv1 uses a different pricing model from ASEv2.</span></span> <span data-ttu-id="61683-210">В ASEv1 вы платите за каждое выделенное ядро,</span><span class="sxs-lookup"><span data-stu-id="61683-210">In ASEv1, you pay for each core allocated.</span></span> <span data-ttu-id="61683-211">включая ядра, используемые для внешних интерфейсов и рабочих процессов, которые не содержат рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="61683-211">That includes cores that are used for front ends or workers that aren't hosting any workloads.</span></span> <span data-ttu-id="61683-212">В ASEv1 размер максимальный масштаб по умолчанию hello ASE составляет 55 общее количество узлов.</span><span class="sxs-lookup"><span data-stu-id="61683-212">In ASEv1, hello default maximum-scale size of an ASE is 55 total hosts.</span></span> <span data-ttu-id="61683-213">включая рабочие роли и внешние интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="61683-213">That includes workers and front ends.</span></span> <span data-ttu-id="61683-214">Одно из преимуществ tooASEv1 — могут быть развернуты в классической виртуальной сети и диспетчер ресурсов виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="61683-214">One advantage tooASEv1 is that it can be deployed in a classic virtual network and a Resource Manager virtual network.</span></span> <span data-ttu-id="61683-215">toolearn Дополнительные сведения о ASEv1, в разделе [введение v1 среды службы приложений][ASEv1Intro].</span><span class="sxs-lookup"><span data-stu-id="61683-215">toolearn more about ASEv1, see [App Service Environment v1 introduction][ASEv1Intro].</span></span>

<span data-ttu-id="61683-216">toocreate ASEv1 с помощью шаблона диспетчера ресурсов, в разделе [создания v1 ILB ASE с помощью шаблона диспетчера ресурсов][ILBASEv1Template].</span><span class="sxs-lookup"><span data-stu-id="61683-216">toocreate an ASEv1 by using a Resource Manager template, see [Create an ILB ASE v1 with a Resource Manager template][ILBASEv1Template].</span></span>


<!--Links-->
[quickstartilbasecreate]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-ilb-create
[quickstartasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asev2-create
[quickstartconfiguressl]: http://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl
[quickstartwebapponasev2create]: http://azure.microsoft.com/documentation/templates/201-web-app-asp-app-on-asev2-create
[examplebase64encoding]: http://powershellscripts.blogspot.com/2007/02/base64-encode-file.html 
[configuringDefaultSSLCertificate]: https://azure.microsoft.com/documentation/templates/201-web-app-ase-ilb-configure-default-ssl/
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ILBASEv1Template]: ../../app-service-web/app-service-app-service-environment-create-ilb-ase-resourcemanager.md
