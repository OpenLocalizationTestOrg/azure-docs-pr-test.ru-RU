---
title: "Экспорт размещенного в Azure API в PowerApps и Microsoft Flow | Документация Майкрософт"
description: "Общие сведения о предоставлении API, размещенного в службе приложений, для PowerApps и Microsoft Flow"
services: app-service
documentationcenter: 
author: mattchenderson
manager: erikre
editor: 
ms.assetid: 
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 06/20/2017
ms.author: mahender
ms.openlocfilehash: 0d166a2e5b60c3b9f911f9fc3ad49ad7f252abb4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="exporting-an-azure-hosted-api-to-powerapps-and-microsoft-flow"></a><span data-ttu-id="96e01-103">Экспорт размещенного в Azure API в PowerApps и Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="96e01-103">Exporting an Azure-hosted API to PowerApps and Microsoft Flow</span></span>

## <a name="creating-custom-connectors-for-powerapps-and-microsoft-flow"></a><span data-ttu-id="96e01-104">Создание настраиваемых соединителей для PowerApps и Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="96e01-104">Creating custom connectors for PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="96e01-105">[PowerApps](https://powerapps.com) — это служба для создания и использования пользовательских бизнес-приложений, которые подключаются к данным и работают на различных платформах.</span><span class="sxs-lookup"><span data-stu-id="96e01-105">[PowerApps](https://powerapps.com) is a service for building and using custom business apps that connect to your data and work across platforms.</span></span> <span data-ttu-id="96e01-106">[Microsoft Flow](https://flow.microsoft.com) позволяет легко автоматизировать рабочие и бизнес-процессы между избранными приложениями и службами.</span><span class="sxs-lookup"><span data-stu-id="96e01-106">[Microsoft Flow](https://flow.microsoft.com) makes it easy to automate workflows and business processes between your favorite apps and services.</span></span> <span data-ttu-id="96e01-107">PowerApps и Microsoft Flow содержат ряд встроенных соединителей для источников данных, таких как Office 365, Dynamics 365, Salesforce и т д.</span><span class="sxs-lookup"><span data-stu-id="96e01-107">Both PowerApps and Microsoft Flow come with a variety of built-in connectors to data sources such as Office 365, Dynamics 365, Salesforce, and more.</span></span> <span data-ttu-id="96e01-108">Тем не менее пользователи также должны иметь возможность использовать источники данных и API, созданные в их организации.</span><span class="sxs-lookup"><span data-stu-id="96e01-108">However, users also need to be able to leverage data sources and APIs being built by their organization.</span></span>

<span data-ttu-id="96e01-109">Аналогичным образом разработчикам, которым необходимо расширить возможности совместного использования API внутри организации, может потребоваться предоставить доступ к своим API пользователям PowerApps и Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="96e01-109">Similarly, developers that want to expose their APIs more broadly within the organization may want to make their APIs available to PowerApps and Microsoft Flow users.</span></span> <span data-ttu-id="96e01-110">В этой статье показано, как предоставить API, созданный с помощью службы приложений Azure или Функций Azure, для PowerApps и Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="96e01-110">This topic will show you how to expose an API built with Azure App Service or Azure Functions to PowerApps and Microsoft Flow.</span></span> <span data-ttu-id="96e01-111">[Служба приложений Azure](https://azure.microsoft.com/services/app-service/) — это предложение "платформа как услуга", которое позволяет разработчикам быстро и легко создавать корпоративные мобильные, веб-приложения и приложения API.</span><span class="sxs-lookup"><span data-stu-id="96e01-111">[Azure App Service](https://azure.microsoft.com/services/app-service/) is a platform-as-a-service offering that allows developers to quickly and easily build enterprise-grade web, mobile, and API applications.</span></span> <span data-ttu-id="96e01-112">[Функции Azure](https://azure.microsoft.com/services/functions/) — это независимое от сервера решение для вычислений на основе событий, позволяющее быстро создавать код, который может реагировать на другие части системы и масштабироваться по запросу.</span><span class="sxs-lookup"><span data-stu-id="96e01-112">[Azure Functions](https://azure.microsoft.com/services/functions/) is an event-based serverless compute solution that allows you to quickly author code that can react to other parts of your system and scale based on demand.</span></span>

<span data-ttu-id="96e01-113">Дополнительные сведения об этих службах см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="96e01-113">To learn more about these services, see:</span></span>
- <span data-ttu-id="96e01-114">[Guided Learning for PowerApps](https://powerapps.microsoft.com/guided-learning/learning-introducing-powerapps/) (Пошаговое изучение PowerApps)</span><span class="sxs-lookup"><span data-stu-id="96e01-114">[PowerApps Guided Learning](https://powerapps.microsoft.com/guided-learning/learning-introducing-powerapps/)</span></span> 
- [<span data-ttu-id="96e01-115">Интерактивное обучение Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="96e01-115">Microsoft Flow Guided Learning</span></span>](https://flow.microsoft.com/guided-learning/learning-introducing-flow/)
- [<span data-ttu-id="96e01-116">Что такое служба приложений?</span><span class="sxs-lookup"><span data-stu-id="96e01-116">What is App Service?</span></span>](https://docs.microsoft.com/azure/app-service/app-service-value-prop-what-is)
- [<span data-ttu-id="96e01-117">Обзор функций Azure</span><span class="sxs-lookup"><span data-stu-id="96e01-117">What is Azure Functions</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-overview)

## <a name="sharing-an-api-definition"></a><span data-ttu-id="96e01-118">Предоставление общего доступа к определению API</span><span class="sxs-lookup"><span data-stu-id="96e01-118">Sharing an API definition</span></span>

<span data-ttu-id="96e01-119">Интерфейсы API часто описываются с помощью [документа OpenAPI](https://www.openapis.org/) (иногда называемого документом Swagger).</span><span class="sxs-lookup"><span data-stu-id="96e01-119">APIs are often described using an [OpenAPI document](https://www.openapis.org/) (sometimes referred to as a "Swagger" document).</span></span> <span data-ttu-id="96e01-120">Он содержит все сведения о доступных операциях и о том, как необходимо структурировать данные.</span><span class="sxs-lookup"><span data-stu-id="96e01-120">This contains all of the information about what operations are available and how the data should be structured.</span></span> <span data-ttu-id="96e01-121">С помощью PowerApps и Microsoft Flow можно создавать настраиваемые соединители для любого документа OpenAPI 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-121">PowerApps and Microsoft Flow can create custom connectors for any OpenAPI 2.0 document.</span></span> <span data-ttu-id="96e01-122">После создания настраиваемого соединителя его можно использовать точно так же, как один из встроенных соединителей, и быстро интегрировать в приложение.</span><span class="sxs-lookup"><span data-stu-id="96e01-122">Once a custom connector is created, it can be used in exactly the same way as one of the built-in connectors and can quickly be integrated into an application.</span></span>

<span data-ttu-id="96e01-123">Служба приложений Azure и Функции Azure имеют [встроенную поддержку](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) создания и размещения документа OpenAPI, а также управления им.</span><span class="sxs-lookup"><span data-stu-id="96e01-123">Azure App Service and Azure Functions have [built-in support](https://docs.microsoft.com/azure/app-service-api/app-service-api-metadata) for creating, hosting, and managing an OpenAPI document.</span></span> <span data-ttu-id="96e01-124">Чтобы создать настраиваемый соединитель для приложения-функции, приложения API, веб- или мобильных приложений PowerApps и Flow необходимо предоставить копию определения.</span><span class="sxs-lookup"><span data-stu-id="96e01-124">In order to create a custom connector for a web, mobile, API, or function app, PowerApps and Flow need to be given a copy of the definition.</span></span>

> [!NOTE]
> <span data-ttu-id="96e01-125">Так как используется копия определения API, PowerApps и Microsoft Flow не будут немедленно уведомлены об обновлениях или критических изменениях приложения.</span><span class="sxs-lookup"><span data-stu-id="96e01-125">Because a copy of the API definition is being used, PowerApps and Microsoft Flow will not immediately know about updates or breaking changes to the application.</span></span> <span data-ttu-id="96e01-126">При появлении новой версии API эти шаги необходимо выполнить для новой версии.</span><span class="sxs-lookup"><span data-stu-id="96e01-126">If a new version of the API is made available, these steps should be repeated for the new version.</span></span> 

<span data-ttu-id="96e01-127">Чтобы предоставить PowerApps и Microsoft Flow определение размещенного API для вашего приложения, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="96e01-127">To provide PowerApps and Microsoft Flow with the hosted API definition for your app, follow these steps:</span></span>

1. <span data-ttu-id="96e01-128">Откройте [портал Azure](https://portal.azure.com) и перейдите к службе приложений или приложению Функций Azure.</span><span class="sxs-lookup"><span data-stu-id="96e01-128">Open the [Azure Portal](https://portal.azure.com) and navigate to your App Service or Azure Functions application.</span></span>

    <span data-ttu-id="96e01-129">При использовании службы приложений Azure в списке параметров выберите **Определение API**.</span><span class="sxs-lookup"><span data-stu-id="96e01-129">If using Azure App Service, select **API definition** from the settings list.</span></span> 
    
    <span data-ttu-id="96e01-130">При использовании Функции Azure, щелкните приложение-функцию и выберите **Platform features** (Функции платформы), а затем — **Определение API**.</span><span class="sxs-lookup"><span data-stu-id="96e01-130">If using Azure Functions, select your function app, and then choose **Platform features**, and then **API definition**.</span></span> <span data-ttu-id="96e01-131">Вместо этого также можно открыть вкладку **API definition (preview)** (Определение API (предварительная версия)).</span><span class="sxs-lookup"><span data-stu-id="96e01-131">You could also choose to open the **API definition (preview)** tab instead.</span></span>

2. <span data-ttu-id="96e01-132">Если определение API было предоставлено, вы увидите кнопку **Export to PowerApps + Microsoft Flow** (Экспорт в PowerApps + Microsoft Flow).</span><span class="sxs-lookup"><span data-stu-id="96e01-132">If an API definition has been provided, you will see an **Export to PowerApps + Microsoft Flow** button.</span></span> <span data-ttu-id="96e01-133">Нажмите эту кнопку, чтобы начать процесс экспорта.</span><span class="sxs-lookup"><span data-stu-id="96e01-133">Click this button to begin the export process.</span></span>

3. <span data-ttu-id="96e01-134">Выберите **Режим экспорта**.</span><span class="sxs-lookup"><span data-stu-id="96e01-134">Select the **Export mode**.</span></span> <span data-ttu-id="96e01-135">Это определяет, какие действия необходимо выполнить для создания соединителя.</span><span class="sxs-lookup"><span data-stu-id="96e01-135">This determines the steps you will need to follow to create a connector.</span></span> <span data-ttu-id="96e01-136">Службы приложений предлагают два варианта предоставления PowerApps и Microsoft Flow с определением API:</span><span class="sxs-lookup"><span data-stu-id="96e01-136">App Service offers two options for providing PowerApps and Microsoft Flow with your API definition:</span></span>

    <span data-ttu-id="96e01-137">**Экспресс**: позволяет создавать пользовательский соединитель в портале Azure.</span><span class="sxs-lookup"><span data-stu-id="96e01-137">**Express** lets you create the custom connector from within the Azure portal.</span></span> <span data-ttu-id="96e01-138">Для этого требуется, чтобы текущий вошедший в систему пользователь имел разрешение на создание соединителей в целевой среде.</span><span class="sxs-lookup"><span data-stu-id="96e01-138">It requires that the curent logged-in user has permission to create connectors in the target environment.</span></span> <span data-ttu-id="96e01-139">Это рекомендуемый вариант, если это требование может быть выполнено.</span><span class="sxs-lookup"><span data-stu-id="96e01-139">This is the recommended approach if that requirement can be met.</span></span> <span data-ttu-id="96e01-140">При использовании этого режима следуйте инструкциям, приведенным в разделе [Экспресс экспорт](#express) ниже.</span><span class="sxs-lookup"><span data-stu-id="96e01-140">If using this mode, follow the [Express export](#express) instructions below.</span></span>

    <span data-ttu-id="96e01-141">**Вручную**: позволяет экспортировать копию определения API, которую можно импортировать с помощью порталов PowerApps или Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="96e01-141">**Manual** lets you export a copy of the API definiton which can be imported using the PowerApps or Microsoft Flow portals.</span></span> <span data-ttu-id="96e01-142">Это рекомендуемый вариант, если пользователь Azure и пользователь с разрешением на создание соединителей — это разные пользователи или соединитель необходимо создать в другом клиенте.</span><span class="sxs-lookup"><span data-stu-id="96e01-142">This is the recommended approach if the Azure user and the user with permission to create connectors are different people or if the connector needs to be created in another tenant.</span></span> <span data-ttu-id="96e01-143">При использовании этого режима, следуйте инструкциям, приведенным в разделе [Экспорт и импорт вручную](#manual) ниже.</span><span class="sxs-lookup"><span data-stu-id="96e01-143">If using this mode, follow the [Manual export and import](#manual) instructions below.</span></span>

<a name="express"></a>
## <a name="express-export"></a><span data-ttu-id="96e01-144">Экспресс экспорт</span><span class="sxs-lookup"><span data-stu-id="96e01-144">Express export</span></span>

<span data-ttu-id="96e01-145">В этом разделе вы создадите настраиваемый соединитель в портале Azure.</span><span class="sxs-lookup"><span data-stu-id="96e01-145">In this section, you will create a new custom connector from within the Azure portal.</span></span> <span data-ttu-id="96e01-146">Необходимо войти в клиент, куда вы хотите произвести экспорт и обладать разрешением на создание настраиваемого соединителя в целевой среде.</span><span class="sxs-lookup"><span data-stu-id="96e01-146">You must be logged into the tenant to which you wish to export, and you must have permission to create a custom connector in the target environment.</span></span>

1. <span data-ttu-id="96e01-147">Выберите среду, в которой вы хотите создать соединитель.</span><span class="sxs-lookup"><span data-stu-id="96e01-147">Select the environment in which you would like to create the connector.</span></span> <span data-ttu-id="96e01-148">Затем введите имя для вашего настраиваемого соединителя.</span><span class="sxs-lookup"><span data-stu-id="96e01-148">Then provide a name for your custom connector.</span></span>

2. <span data-ttu-id="96e01-149">Если определение API содержит какие-либо параметры безопасности, они будут вызваны на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="96e01-149">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="96e01-150">При необходимости предоставьте сведения о конфигурации системы безопасности, необходимые для предоставления пользователям доступа к вашему API.</span><span class="sxs-lookup"><span data-stu-id="96e01-150">If required, provide the security configuration details needed to grant users access to your API.</span></span> <span data-ttu-id="96e01-151">Дополнительные сведения см. в разделе [Проверка подлинности](#auth) ниже.</span><span class="sxs-lookup"><span data-stu-id="96e01-151">For more information, see [Authentication](#auth) below.</span></span> 

3. <span data-ttu-id="96e01-152">Щелкните **ОК** для создания настраиваемого соединителя.</span><span class="sxs-lookup"><span data-stu-id="96e01-152">Click **OK** to create your custom connector.</span></span>


<a name="manual"></a>
## <a name="manual-export-and-import"></a><span data-ttu-id="96e01-153">Экспорт и импорт вручную</span><span class="sxs-lookup"><span data-stu-id="96e01-153">Manual export and import</span></span>

<span data-ttu-id="96e01-154">Чтобы создать настраиваемый соединитель для приложения-функции, приложения API, веб- или мобильных приложений, требуются два этапа:</span><span class="sxs-lookup"><span data-stu-id="96e01-154">In order to create a custom connector for a web, mobile, API, or function app, two steps will be needed:</span></span>

1. [<span data-ttu-id="96e01-155">Получение определения API из службы приложений или Функций Azure.</span><span class="sxs-lookup"><span data-stu-id="96e01-155">Retrieving the API definition from App Service or Azure Functions</span></span>](#export)
2. [<span data-ttu-id="96e01-156">Импорт определения API в PowerApps и Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="96e01-156">Importing the API definition into PowerApps and Microsoft Flow</span></span>](#import)

<span data-ttu-id="96e01-157">Возможно эти два шага придется выполнить разным сотрудникам организации, так как у определенного пользователя может отсутствовать разрешение на выполнение обоих действий.</span><span class="sxs-lookup"><span data-stu-id="96e01-157">It is possible that these two steps will need to be carried out by separate individuals within an organization, as a given user may not have permission to perform both actions.</span></span> <span data-ttu-id="96e01-158">В таком случае разработчик, имеющий доступ с правами участника к службе приложений или к приложению Функций Azure, должен получить определение API (JSON-файл) или ссылку на него.</span><span class="sxs-lookup"><span data-stu-id="96e01-158">In this case, a developer who has contributor access to the App Service or Azure Functions application will need to obtain the API definition (a single JSON file) or a link to it.</span></span> <span data-ttu-id="96e01-159">Они понадобятся, чтобы предоставить это определение владельцу PowerApps или Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="96e01-159">They will then need to provide that definition to a PowerApps or Microsoft Flow owner.</span></span> <span data-ttu-id="96e01-160">Владелец может использовать эти метаданные для создания настраиваемого соединителя.</span><span class="sxs-lookup"><span data-stu-id="96e01-160">That owner can use the metadata to create the custom connector.</span></span>

<a name="export"></a>
### <a name="retrieving-the-api-definition-from-app-service-or-azure-functions"></a><span data-ttu-id="96e01-161">Получение определения API из службы приложений или Функций Azure</span><span class="sxs-lookup"><span data-stu-id="96e01-161">Retrieving the API definition from App Service or Azure Functions</span></span>

<span data-ttu-id="96e01-162">В этом разделе вы экспортируете определение API для API службы приложений для последующего использования в PowerApps или Microsoft Flow.</span><span class="sxs-lookup"><span data-stu-id="96e01-162">In this section, you will export the API definition for your App Service API, to be used later in the PowerApps or Microsoft Flow portal.</span></span>

1. <span data-ttu-id="96e01-163">Вы можете выбрать **Download the API definition** (Скачать определение API) или **Получить ссылку**.</span><span class="sxs-lookup"><span data-stu-id="96e01-163">You can choose to either **Download the API definition** or **Get a link**.</span></span> <span data-ttu-id="96e01-164">Независимо от выбранного варианта результат будет предоставлен в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="96e01-164">Whichever you choose, the result will be provided in the next section.</span></span> <span data-ttu-id="96e01-165">Выберите один из этих вариантов и следуйте инструкциям.</span><span class="sxs-lookup"><span data-stu-id="96e01-165">Select one of these options and follow the instructions.</span></span>
 
2. <span data-ttu-id="96e01-166">Если определение API содержит какие-либо параметры безопасности, они будут вызваны на шаге 2.</span><span class="sxs-lookup"><span data-stu-id="96e01-166">If your API definition includes any security definitions, these will be called out in step #2.</span></span> <span data-ttu-id="96e01-167">Во время импорта PowerApps и Microsoft Flow обнаружат их и предложат ввести сведения о безопасности.</span><span class="sxs-lookup"><span data-stu-id="96e01-167">During import, PowerApps and Microsoft Flow will detect these and will prompt for security information.</span></span> <span data-ttu-id="96e01-168">Получите учетные данные, связанные с определениями. Они понадобятся в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="96e01-168">Gather the credentials related to each definition for use in the next section.</span></span> <span data-ttu-id="96e01-169">Дополнительные сведения см. в разделе [Проверка подлинности](#auth) ниже.</span><span class="sxs-lookup"><span data-stu-id="96e01-169">For more information, see [Authentication](#auth) below.</span></span> 

<a name="import"></a>
### <a name="importing-the-api-definition-into-powerapps-and-microsoft-flow"></a><span data-ttu-id="96e01-170">Импорт определения API в PowerApps и Microsoft Flow</span><span class="sxs-lookup"><span data-stu-id="96e01-170">Importing the API definition into PowerApps and Microsoft Flow</span></span>

<span data-ttu-id="96e01-171">В этом разделе вы создадите настраиваемый соединитель в PowerApps и Microsoft Flow с помощью определения API, полученного ранее.</span><span class="sxs-lookup"><span data-stu-id="96e01-171">In this section, you will create a custom connector in PowerApps and Microsoft Flow using the API definition obtained earlier.</span></span> <span data-ttu-id="96e01-172">Настраиваемые соединители совместно используются двумя службами, поэтому импортировать определение необходимо один раз.</span><span class="sxs-lookup"><span data-stu-id="96e01-172">Custom connectors are shared between the two services, so you only need to import the definition once.</span></span> <span data-ttu-id="96e01-173">Дополнительные сведения о настраиваемых соединителях см. в статьях [Регистрация и использование настраиваемых соединителей в PowerApps] и [Регистрация и использование настраиваемых соединителей в Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="96e01-173">For more information on custom connectors, see [Register and use custom connectors in PowerApps] and [Register and use custom connectors in Microsoft Flow].</span></span>

1. <span data-ttu-id="96e01-174">Откройте [веб-портал PowerApps](https://web.powerapps.com) или [веб-портал Microsoft Flowl](https://flow.microsoft.com/) и выполните вход.</span><span class="sxs-lookup"><span data-stu-id="96e01-174">Open the [Powerapps web portal](https://web.powerapps.com) or the [Microsoft Flow web portal](https://flow.microsoft.com/), and sign in.</span></span> 

2. <span data-ttu-id="96e01-175">Нажмите кнопку **Параметры** (значок шестеренки), расположенную в правом верхнем углу страницы, и выберите **Настраиваемые соединители**.</span><span class="sxs-lookup"><span data-stu-id="96e01-175">Click the **Settings** button (the gear icon) at the upper right of the page and select **Custom connectors**.</span></span> 

3. <span data-ttu-id="96e01-176">Щелкните **Создать настраиваемый соединитель**.</span><span class="sxs-lookup"><span data-stu-id="96e01-176">Click **Create custom connector**.</span></span>

4. <span data-ttu-id="96e01-177">На вкладке **Общие** укажите имя API, а затем передайте определение OpenAPI или вставьте URL-адрес метаданных.</span><span class="sxs-lookup"><span data-stu-id="96e01-177">On the **General** tab, provide a name for your API, and then upload the OpenAPI definition or paste in the metadata URL.</span></span> <span data-ttu-id="96e01-178">Нажмите кнопку **Продолжить**.</span><span class="sxs-lookup"><span data-stu-id="96e01-178">Click **Continue**.</span></span>

4. <span data-ttu-id="96e01-179">Если появится запрос на предоставление сведений о проверке подлинности, на вкладке **Общие** введите значения, полученные в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="96e01-179">On the **Security** tab, if you are prompted to provide authentication details, enter the values obtained in the previous section.</span></span> <span data-ttu-id="96e01-180">В противном случае перейдите к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="96e01-180">If not, proceed to the next step.</span></span>

5. <span data-ttu-id="96e01-181">На вкладке **Определения** все операции, определенные в файле OpenAPI, заполняются автоматически.</span><span class="sxs-lookup"><span data-stu-id="96e01-181">On the **Definitions** tab, all the operations defined in your OpenAPI file are auto-populated.</span></span> <span data-ttu-id="96e01-182">Если определены все необходимые операции, можно перейти к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="96e01-182">If all your required operations are defined, you can go to the next step.</span></span> <span data-ttu-id="96e01-183">Если нет, вы можете добавить и изменить операции здесь.</span><span class="sxs-lookup"><span data-stu-id="96e01-183">If not, you can add and modify operations here.</span></span>

6. <span data-ttu-id="96e01-184">Нажмите кнопку **Создать соединитель**.</span><span class="sxs-lookup"><span data-stu-id="96e01-184">Click **Create connector**.</span></span> <span data-ttu-id="96e01-185">Если вы хотите протестировать вызовы API, перейдите к следующему шагу.</span><span class="sxs-lookup"><span data-stu-id="96e01-185">If you want to test API calls, go to the next step.</span></span>

7. <span data-ttu-id="96e01-186">На вкладке **Тестирование** создайте подключение, выберите операцию для тестирования и введите данные, которые требуются для операции.</span><span class="sxs-lookup"><span data-stu-id="96e01-186">On the **Test** tab, create a connection, select an operation to test, and enter any data required by the operation.</span></span>

8. <span data-ttu-id="96e01-187">Нажмите кнопку **Тестировать операцию**.</span><span class="sxs-lookup"><span data-stu-id="96e01-187">Click **Test operation**.</span></span>


<a name="auth"></a>
## <a name="authentication"></a><span data-ttu-id="96e01-188">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="96e01-188">Authentication</span></span>

<span data-ttu-id="96e01-189">PowerApps и Microsoft Flow имеют встроенную поддержку коллекции поставщиков удостоверений, которые можно использовать для входа пользователей настраиваемого соединителя.</span><span class="sxs-lookup"><span data-stu-id="96e01-189">PowerApps and Microsoft Flow natively support a collection of identity providers which can be used to log in users of your custom connector.</span></span> <span data-ttu-id="96e01-190">Если для API требуется проверка подлинности, это определение должно быть записано в виде _определения безопасности_ в документе OpenAPI.</span><span class="sxs-lookup"><span data-stu-id="96e01-190">If your API requires authentication, ensure that it is captured as a _security definition_ in your OpenAPI document.</span></span> <span data-ttu-id="96e01-191">Во время экспорта необходимо предоставить значения конфигурации, позволяющие PowerApps и Microsoft Flow выполнять действия входа.</span><span class="sxs-lookup"><span data-stu-id="96e01-191">During export, you will need to provide configuration values that allow PowerApps an Microsoft Flow to perform login actions.</span></span>

<span data-ttu-id="96e01-192">В этом разделе описаны типы проверки подлинности, поддерживаемые потоком экспресс: ключ API, Azure Active Directory и универсальная OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-192">This section covers the authentication types which are supported by the express flow: API key, Azure Active Directory, and Generic OAuth 2.0.</span></span> <span data-ttu-id="96e01-193">Дополнительные сведения о полном списке поставщиков и учетных данных, которые им необходимы см. в статьях [Регистрация и использование настраиваемых соединителей в PowerApps] и [Регистрация и использование настраиваемых соединителей в Microsoft Flow].</span><span class="sxs-lookup"><span data-stu-id="96e01-193">For a complete list of providers and the credentials each requires, see [Register and use custom connectors in PowerApps] and [Register and use custom connectors in Microsoft Flow].</span></span>

### <a name="api-key"></a><span data-ttu-id="96e01-194">Ключ API</span><span class="sxs-lookup"><span data-stu-id="96e01-194">API key</span></span>
<span data-ttu-id="96e01-195">При использовании этой схемы безопасности, пользователям соединителя будет предложено указать ключ при создании подключения.</span><span class="sxs-lookup"><span data-stu-id="96e01-195">When this security scheme is used, the users of your connector will be prompted to provide the key when they create a connection.</span></span> <span data-ttu-id="96e01-196">Вы можете предоставить имя ключа API, чтобы помочь им понять, какой ключ нужен.</span><span class="sxs-lookup"><span data-stu-id="96e01-196">You can provide an API key name to help them know which key is needed.</span></span> <span data-ttu-id="96e01-197">Для Функций Azure это, как правило, один из ключей узла, охватывающий несколько функций внутри приложения-функции.</span><span class="sxs-lookup"><span data-stu-id="96e01-197">For Azure Functions, this will typically be one of the host keys, covering several functions within the function app.</span></span>

### <a name="azure-active-directory"></a><span data-ttu-id="96e01-198">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="96e01-198">Azure Active Directory</span></span>
<span data-ttu-id="96e01-199">При настройке настраиваемого соединителя, требующего входа в AAD, требуется две регистрации в приложении AAD: одна для моделирования API серверной части, а вторая — для соединителя в PowerApps и Flow.</span><span class="sxs-lookup"><span data-stu-id="96e01-199">When configuring a custom connector that requires AAD login, two AAD application registrations are required: one to model the backend API, and one to model the connector in PowerApps and Flow.</span></span>

<span data-ttu-id="96e01-200">API должен быть настроен для работы с первой регистрацией. При использовании функции [проверки подлинности и авторизации в службе приложений](https://docs.microsoft.com/azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication) это уже будет сделано.</span><span class="sxs-lookup"><span data-stu-id="96e01-200">Your API should be configured to work with the first registration, and this will already be taken care of if you used the [App Service Authentication/Authorization](https://docs.microsoft.com/azure/app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication) feature.</span></span>

<span data-ttu-id="96e01-201">Вам потребуется вручную создать вторую регистрацию для соединителя, используя шаги, приведенные в разделе [Добавление приложения](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application).</span><span class="sxs-lookup"><span data-stu-id="96e01-201">You will have to manually create the second registration for the connector, using the steps covered in [Adding an AAD application](https://docs.microsoft.com/azure/active-directory/develop/active-directory-integrating-applications#adding-an-application).</span></span> <span data-ttu-id="96e01-202">Регистрации требуется делегированный доступ к вашему API и URL-адресу ответа из `https://msmanaged-na.consent.azure-apim.net/redirect`.</span><span class="sxs-lookup"><span data-stu-id="96e01-202">The registration needs to have delegated access to your API and a reply URL of `https://msmanaged-na.consent.azure-apim.net/redirect`.</span></span> <span data-ttu-id="96e01-203">Дополнительные сведения см. в [этой статье](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/). Вместо Azure Resource Manager здесь нужно использовать API.</span><span class="sxs-lookup"><span data-stu-id="96e01-203">Please see [this example](
https://powerapps.microsoft.com/tutorials/customapi-azure-resource-manager-tutorial/) for more detail, substituting your API for the Azure Resource Manager.</span></span>

<span data-ttu-id="96e01-204">Требуются следующие значения конфигурации:</span><span class="sxs-lookup"><span data-stu-id="96e01-204">The following configuration values are required:</span></span>
- <span data-ttu-id="96e01-205">**Идентификатор клиента**: идентификатор клиента регистрации соединителя AAD.</span><span class="sxs-lookup"><span data-stu-id="96e01-205">**Client ID** - the client ID of your connector AAD registration</span></span>
- <span data-ttu-id="96e01-206">**Секрет клиента**: секрет клиента регистрации соединителя AAD.</span><span class="sxs-lookup"><span data-stu-id="96e01-206">**Client secret** - the client secret of your connector AAD registration</span></span>
- <span data-ttu-id="96e01-207">**Login URL** (URL-адрес входа): базовый URL-адрес для AAD.</span><span class="sxs-lookup"><span data-stu-id="96e01-207">**Login URL** - the base URL for AAD.</span></span> <span data-ttu-id="96e01-208">В общедоступной версии Azure это, как правило, будет `https://login.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="96e01-208">In public Azure, this will typically be `https://login.windows.net`.</span></span>
- <span data-ttu-id="96e01-209">**Идентификатор клиента**: идентификатор клиента, используемый для входа.</span><span class="sxs-lookup"><span data-stu-id="96e01-209">**Tenant ID** - the ID of the tenant to be used for the login.</span></span> <span data-ttu-id="96e01-210">Он должен быть "общим" или идентификатором клиента, в котором создается соединитель.</span><span class="sxs-lookup"><span data-stu-id="96e01-210">This should be "common" or the ID of the tenant in which the connector is being created.</span></span>
- <span data-ttu-id="96e01-211">**URL-адрес ресурса**: URL-адрес ресурса регистрации AAD серверной части API.</span><span class="sxs-lookup"><span data-stu-id="96e01-211">**Resource URL** - the resource URL of your API backend AAD registration</span></span>

> [!IMPORTANT]
> <span data-ttu-id="96e01-212">Если импортировать определение API в PowerApps и Microsoft Flow в качестве ручного потока будет другой пользователь, помимо файла определения API предоставьте ему идентификатор и секрет клиента **регистрации соединителя**.</span><span class="sxs-lookup"><span data-stu-id="96e01-212">If another individual will be importing the API definition into PowerApps and Microsoft Flow as part of the manual flow, you will need to provide them with the client ID and client secret **of the connector registration**, as well as the resource URL of your API.</span></span> <span data-ttu-id="96e01-213">Обеспечьте безопасное управление этими секретами.</span><span class="sxs-lookup"><span data-stu-id="96e01-213">Make sure that these secrets are managed securely.</span></span> <span data-ttu-id="96e01-214">**Не предоставляйте учетные данные безопасности самого API.**</span><span class="sxs-lookup"><span data-stu-id="96e01-214">**Do not share the security credentials of the API itself.**</span></span>

### <a name="generic-oauth-20"></a><span data-ttu-id="96e01-215">Универсальная OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="96e01-215">Generic OAuth 2.0</span></span>
<span data-ttu-id="96e01-216">Универсальная OAuth 2.0 позволяет интегрироваться с любыми поставщиками OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-216">The generic OAuth 2.0 support allows you to integrate with any OAuth 2.0 provider.</span></span> <span data-ttu-id="96e01-217">Это позволяет использовать любой настраиваемый поставщик, который изначально не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="96e01-217">This allows you to bring in any custom provider which is not natively supported.</span></span>

<span data-ttu-id="96e01-218">Требуются следующие значения конфигурации:</span><span class="sxs-lookup"><span data-stu-id="96e01-218">The following configuration values are required:</span></span>
- <span data-ttu-id="96e01-219">**Идентификатор клиента**: идентификатор клиента OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="96e01-219">**Client ID** - the OAuth 2.0 client ID</span></span>
- <span data-ttu-id="96e01-220">**Секрет клиента**: секрет клиента OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-220">**Client secret** - the OAuth 2.0 client secret</span></span>
- <span data-ttu-id="96e01-221">**Authorization URL** (URL-адрес для авторизации) URL-адрес для авторизации OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-221">**Authorization URL** - the OAuth 2.0 authorization URL</span></span>
- <span data-ttu-id="96e01-222">**Token URL** (URL-адрес токена): URL-адрес токена OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-222">**Token URL** - the OAuth 2.0 token URL</span></span>
- <span data-ttu-id="96e01-223">**Refresh URL** (URL-адрес обновления): URL-адрес обновления OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="96e01-223">**Refresh URL** - the OAuth 2.0 refresh URL</span></span>



<span data-ttu-id="96e01-224">[Регистрация и использование настраиваемых соединителей в PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/</span><span class="sxs-lookup"><span data-stu-id="96e01-224">[Register and use custom connectors in PowerApps]: https://powerapps.microsoft.com/tutorials/register-custom-api/</span></span>
<span data-ttu-id="96e01-225">[Регистрация и использование настраиваемых соединителей в Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/</span><span class="sxs-lookup"><span data-stu-id="96e01-225">[Register and use custom connectors in Microsoft Flow]: https://flow.microsoft.com/documentation/register-custom-api/</span></span>
