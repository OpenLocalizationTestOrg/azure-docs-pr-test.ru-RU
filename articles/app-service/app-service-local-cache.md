---
title: "Обзор локального кэша службы приложения aaaAzure | Документы Microsoft"
description: "В этой статье описывается, как tooenable, изменения размера и запрос hello состояние функции hello локального кэша службы приложений Azure"
services: app-service
documentationcenter: app-service
author: SyntaxC4
manager: yochayk
editor: 
tags: optional
keywords: 
ms.assetid: e34d405e-c5d4-46ad-9b26-2a1eda86ce80
ms.service: app-service
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/04/2016
ms.author: cfowler
ms.openlocfilehash: 220331ac7e15352a434d63266701071024d868c9
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-app-service-local-cache-overview"></a>Общие сведения о локальном кэше службы приложений Azure
Содержимое веб-приложения Azure хранится в службе хранилища Azure; оно доступно в долгосрочном режиме в общей папке содержимого. Такой подход является предполагаемым toowork с различными приложениями и имеет hello следующие атрибуты:  

* содержимое Hello совместно используется несколько экземпляров веб-приложения hello виртуальной машины (VM).
* содержимое Hello устойчивых и может быть изменен путем запуска веб-приложений.
* Файлы журналов и диагностических данных можно найти в разделе hello же общей папке содержимого.
* Публикация новое содержимое напрямую обновлений hello содержимого папки. Вы можете немедленно hello представления содержимого через веб-сайт SCM hello и hello выполнение веб-приложения (обычно некоторых технологий, таких как ASP.NET запускать перезагрузку приложения web некоторые изменения tooget hello последнюю содержимого файла).

Многие веб-приложения используют все перечисленные возможности или одну из них, но некоторым веб-приложениям требуется лишь высокопроизводительное хранилище с содержимым только для чтения, из которого они могут запускаться с высоким уровнем доступности. Эти приложения могут использовать экземпляр виртуальной машины определенного локального кэша.

возможность локального кэша службы Azure приложение Hello обеспечивает веб-роли представление содержимого. Это содержимое представляет собой кэш содержимого хранилища с записью и отменой, который асинхронно создается во время запуска сайта. При готовности кэша hello hello сайт является коммутируемой toorun hello кэширования содержимого для. Веб-приложений, которые выполняются на локальном кэше имеют hello следующие преимущества:

* Они могут подвергнуться toolatencies, которые возникают, если они доступ к содержимому в хранилище Azure.
* Они могут подвергнуться toohello запланированного обновления или незапланированного времени простоя и другим неполадкам со службой хранилища Azure, возникающие на серверах, обслуживающих общего ресурса контента hello.
* Они имеют меньшее число перезапусков приложения из-за изменения общего ресурса toostorage.

## <a name="how-local-cache-changes-hello-behavior-of-app-service"></a>Изменение локального кэша hello поведение службы приложений
* локальный кэш Hello представляет собой копию папки /site и /siteextensions hello hello веб-приложения. Он создается на hello локальный экземпляр виртуальной Машины на запуск веб-приложений. Hello размер hello локальный кэш для каждого веб-приложение ограничено too300 МБ по умолчанию, но можно увеличить too2 Гбайт.
* локальный кэш Hello чтения и записи. Тем не менее все изменения будут потеряны при веб-приложения hello перемещение виртуальных машин или получает перезапуска. Не следует использовать локальный кэш для приложений, в которых хранятся в хранилище содержимого hello критически важных данных.
* Веб-приложений можно продолжить toowrite файлов журналов и диагностических данных, как в данный момент. Файлы журналов и данных, однако хранятся локально на hello виртуальной Машины. Затем они копируются периодически toohello хранилища общего содержимого. Hello хранилища общего содержимого toohello копирования является лучшем трудозатраты — резервное копирование записи могут быть потеряны из-за tooa неожиданному сбою экземпляр виртуальной Машины.
* Нет изменений в структуру папок hello hello LogFiles папок и данных для веб-приложений, использующих локальный кэш. Hello хранилища данных и файлов журнала папки, которые соответствуют шаблону именования hello «уникальный идентификатор» + отметка времени стали вложенные папки. Каждый из вложенных папок hello соответствует tooa экземпляра виртуальной Машины, где выполняется hello веб-приложения, или был запущен.  
* Публикации изменений toohello веб-приложения через любой из механизмов публикации hello опубликует toohello хранилища общего содержимого. Это сделано намеренно, так как нам нужно hello опубликованные содержимого toobe устойчивой. локальный кэш toorefresh hello hello веб-приложения, ему toobe перезапуска. Это показаться чрезмерного шаг жизненный цикл hello toomake эффективным, см. сведения hello далее в этой статье.
* D:\Home будет указывать toohello локального кэша. D:\local по-прежнему указывающие временное хранилище определенного toohello виртуальной Машины.
* представление содержимого по умолчанию Hello hello SCM сайта по-прежнему toobe, hello хранилище общего содержимого.

## <a name="enable-local-cache-in-app-service"></a>Включение локального кэша в службе приложений
Локальный кэш настраивается с помощью нескольких зарезервированных параметров приложения. Можно настроить эти параметры приложений с помощью hello следующие методы:

* [Портал Azure](#Configure-Local-Cache-Portal)
* [Диспетчер ресурсов Azure](#Configure-Local-Cache-ARM)

### <a name="configure-local-cache-by-using-hello-azure-portal"></a>Настройка локального кэша с помощью портала Azure hello
<a name="Configure-Local-Cache-Portal"></a>

Включите локальный кэш для каждого веб-приложения с помощью этого параметра приложения: `WEBSITE_LOCAL_CACHE_OPTION` = `Always`  

![Параметры приложения на портале Azure: локальный кэш](media/app-service-local-cache/app-service-local-cache-configure-portal.png)

### <a name="configure-local-cache-by-using-azure-resource-manager"></a>Настройка локального кэша с помощью Azure Resource Manager
<a name="Configure-Local-Cache-ARM"></a>

```

...

{
    "apiVersion": "2015-08-01",
    "type": "config",
    "name": "appsettings",
    "dependsOn": [
        "[resourceId('Microsoft.Web/sites/', variables('siteName'))]"
    ],

"properties": {
        "WEBSITE_LOCAL_CACHE_OPTION": "Always",
        "WEBSITE_LOCAL_CACHE_SIZEINMB": "300"
    }
}

...
```

## <a name="change-hello-size-setting-in-local-cache"></a>Изменить размер приветствия в локальном кэше
По умолчанию является размер локального кэша hello **300 МБ**. Сюда входят hello /site и /siteextensions папки, которые были скопированы с hello содержимого хранилища, а также любые локально созданные папок журналов и данных. tooincrease это ограничение, используйте параметр приложения hello `WEBSITE_LOCAL_CACHE_SIZEINMB`. Вы можете увеличить hello вверх слишком**2 ГБ** (2000 МБ) на веб-приложения.

## <a name="best-practices-for-using-app-service-local-cache"></a>Рекомендации по использованию локального кэша службы приложений
Мы рекомендуем использовать локальный кэш в сочетании с hello [промежуточные среды](../app-service-web/web-sites-staged-publishing.md) компонентов.

* Добавить hello *стикере* параметр приложения `WEBSITE_LOCAL_CACHE_OPTION` со значением hello `Always` tooyour **рабочей** слота. Если вы используете `WEBSITE_LOCAL_CACHE_SIZEINMB`, также добавить его в качестве прикрепленные параметр tooyour производственный слот.
* Создание **промежуточной** слот и публикация tooyour промежуточном слоте. Как правило, оно не устанавливается hello промежуточного слота toouse локального кэша tooenable прозрачную жизненный цикл построения, развертывания и тестирования для размещения, если вы получаете преимущества hello локальный кэш для hello производственный слот.
* Протестируйте свой веб-сайт относительно промежуточной области.  
* По завершении выполните [операцию переключения](../app-service-web/web-sites-staged-publishing.md#Swap) между промежуточным и рабочим слотами.  
* Закрепленные параметры включают имя и закрепленные tooa слота. Поэтому при промежуточном слоте hello возвращает местами в производственной среде, будет наследовать параметры приложения hello локального кэша. Hello вновь местами производственный слот будет работать с локальным кэшем hello через несколько минут и будет иметь активированию как часть прогрева слоте после переключения. Поэтому после переключения слотов hello в производственный слот будет работает с hello локального кэша.

## <a name="frequently-asked-questions-faq"></a>Часто задаваемые вопросы
### <a name="how-can-i-tell-if-local-cache-applies-toomy-web-app"></a>Как узнать, если локальный кэш применяется toomy веб-приложение?
Если веб-приложения требуется хранилище высокой производительности и надежная содержимого, не использует hello хранилище содержимого toowrite критически важных данных во время выполнения и находится в общий размер меньше, чем 2 ГБ, то ответ hello является «yes»! tooget hello общий размер папки /site и /siteextensions, можно использовать расширение сайта hello «Использование диска приложения Azure Web».  

### <a name="how-can-i-tell-if-my-site-has-switched-toousing-local-cache"></a>Как узнать, если узел был переключен toousing локального кэша?
При использовании функции hello локальный кэш с промежуточной среды hello операция замены не будет завершено, пока активированию локального кэша. toocheck, если сайт работает в локальном кэше, можно проверить переменную среды hello рабочий процесс `WEBSITE_LOCALCACHE_READY`. Действуйте hello hello [переменной среды рабочего процесса](https://github.com/projectkudu/kudu/wiki/Process-Threads-list-and-minidump-gcdump-diagsession#process-environment-variable) tooaccess страница hello переменной среды рабочих процессов на нескольких экземплярах.  

### <a name="i-just-published-new-changes-but-my-web-app-does-not-seem-toohave-them-why"></a>Новые изменения опубликованном, но мое веб-приложение не toohave их. Почему?
Если веб-приложение использует локальный кэш, необходимо toorestart сайта tooget hello последние изменения. Не хотите toopublish изменения tooa рабочего сайта? В разделе параметров слота hello hello предыдущего лучшие методики раздела.

### <a name="where-are-my-logs"></a>Где находятся мои журналы?
Если вы используете локальный кэш, журналы и папки данных выглядят немного иначе. Однако hello структура остается на вложенные папки hello таким же, за исключением того, что вложенные папки hello помещено в подпапке с hello форматирования «уникальный идентификатор виртуальной Машины» + отметки времени.

### <a name="i-have-local-cache-enabled-but-my-web-app-still-gets-restarted-why-is-that-i-thought-local-cache-helped-with-frequent-app-restarts"></a>Локальный кэш включен, но мое веб-приложение все равно перезапускается. Почему? Я подумал, что локальный кэш поможет снизить частоту перезапуска приложения.
Локальный кэш помогает предотвратить перезапуск веб-приложений, которые используют хранилище. Тем не менее веб-приложения по-прежнему будет подвергнута перезагрузки при обновлении спланированную инфраструктуру hello виртуальной Машины. Hello общую перезапусков приложения, возникающие на локальный кэш включен должно быть меньше.

### <a name="does-local-cache-exclude-any-directories-from-being-copied-toohello-faster-local-drive"></a>Локальный кэш исключить какие-либо каталоги, из которой копируются toohello быстрее локального диска?
В рамках шага hello, который копирует содержимое хранилища hello любую папку с именем репозитория будут исключены. Это помогает со сценариями, где содержимого сайта может содержать хранилище системы управления версиями, которые не могут потребоваться в день tooday операции hello веб-приложения. 
