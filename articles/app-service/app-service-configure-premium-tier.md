---
title: "Настройка ценовой категории Премиум V2 для службы приложений Azure | Документы Майкрософт"
description: "Вы можете узнать, как улучшить производительность для веб-приложений, мобильных приложений и приложений API в службе приложений Azure с помощью новой ценовой категории Премиум V2."
keywords: "служба приложений, служба приложений azure, масштабировать, масштабируемый, план службы приложений, стоимость службы приложений"
services: app-service
documentationcenter: 
author: cephalin
manager: cfowler
editor: 
ms.assetid: ff00902b-9858-4bee-ab95-d3406018c688
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/19/2017
ms.author: cephalin
ms.openlocfilehash: 92cc8d8b0f67dde95ea2e3fc2f0f083bd8ac8aab
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="configure-premiumv2-tier-for-azure-app-service"></a>Настройка ценовой категории Премиум V2 для службы приложений Azure

В новой ценовой категории **Премиум V2** реализованы [виртуальные машины серии Dv2](../virtual-machines/windows/sizes-general.md#dv2-series) с более быстрыми процессорами, хранилищами на базе SSD и двойным соотношением ресурсов памяти и ядра по сравнению с категорией **Стандартный**. В этой статье показано, как создать приложение с категорией **Премиум V2** либо масштабировать приложение до категории **Премиум V2**.

## <a name="prerequisites"></a>Предварительные требования

Чтобы масштабировать веб-приложение до категории **Премиум V2**, вам требуется веб-приложение в службе приложений Azure, работающее с категорией ниже **Премиум V2**.

<a name="availability"></a>

## <a name="premiumv2-availability"></a>Доступность категории Премиум V2

Сейчас ценовая категория Премиум V2 доступна только для службы приложений в операционной системе _Windows_. Контейнеры Linux пока не поддерживаются.

Категория Премиум V2 уже доступна в большинстве регионов Azure и продолжает распространяться. Чтобы узнать, доступна ли она в вашем регионе, выполните следующую команду Azure CLI в [Azure Cloud Shell](../cloud-shell/overview.md):

```azurecli-interactive
az appservice list-locations --sku P1V2
```

Если при создании приложения или плана службы приложений появляется сообщение об ошибке, вероятнее всего, категория **Премиум V2** недоступна в выбранном вами регионе.

<a name="create"></a>

## <a name="create-an-app-in-premiumv2-tier"></a>Создание приложения с категорией Премиум V2

Ценовая категория приложения службы приложений определяется в [плане службы приложений](azure-web-sites-web-hosting-plans-in-depth-overview.md), с использованием которого оно выполняется. Вы можете создать план службы приложений отдельно или в процессе создания веб-приложения.

При настройке плана службы приложений на <a href="https://portal.azure.com" target="_blank">портале Azure</a> выберите **Ценовая категория**. 

Выберите один из параметров **Премиум V2** и нажмите кнопку **Выбрать**.

![](media/app-service-configure-premium-tier/pick-premium-tier.png)

> [!IMPORTANT] 
> Если вы не видите параметры **P1V2**, **P2V2** и **P3V2**, значит, категория **Премиум V2** недоступна в выбранном вами регионе либо вы настраиваете план службы приложений Linux, не поддерживающий категорию **Премиум V2**.

## <a name="scale-up-an-existing-app-to-premiumv2-tier"></a>Увеличение масштаба существующего приложения до категории Премиум V2

Перед масштабированием существующего приложения до категории **Премиум V2** убедитесь, что категория **Премиум V2** доступна в вашем регионе. Дополнительные сведения см. в разделе [Доступность категории Премиум V2](#availability). Если в вашем регионе она недоступна, см. раздел [Увеличение масштаба из неподдерживаемого региона](#unsupported).

В зависимости от выбранной среды размещения масштабирование может потребовать дополнительных шагов. 

Откройте страницу службы приложений на <a href="https://portal.azure.com" target="_blank">портале Azure</a>.

В левой области навигации этой страницы выберите **Увеличить масштаб (план службы приложений)**.

![](media/app-service-configure-premium-tier/scale-up-tier-portal.png)

Выберите один из размеров **Премиум V2** и нажмите кнопку **Выбрать**.

![](media/app-service-configure-premium-tier/scale-up-tier-select.png)

Если операция завершается успешно, отображается страница обзора приложения, показывающая, что теперь используется категория **Премиум V2**.

![](media/app-service-configure-premium-tier/finished.png)

### <a name="if-you-get-an-error"></a>Действия при ошибке

Некоторые планы службы приложений не поддерживают увеличение масштаба до категории Премиум V2. Если операция масштабирования выдает ошибку, вам нужно использовать для своего приложения новый план службы приложений.

Создайте план службы приложений _Windows_ в том же регионе и той же группе ресурсов, что и существующее приложение службы приложений. Следуйте указаниям из раздела [Создание приложения с категорией Премиум V2](#create), чтобы установить категорию **Премиум V2**. При необходимости используйте ту же конфигурацию масштабирования с развертыванием, что и для существующего плана службы приложений (количество экземпляров, автомасштабирование и т. д.).

Снова откройте страницу службы приложений. В левой области навигации этой страницы выберите **Изменить план служб приложений**.

![](media/app-service-configure-premium-tier/change-plan.png)

Выберите только что созданный план службы приложений.

![](media/app-service-configure-premium-tier/select-plan.png)

После завершения операции изменения приложение будет выполняться в категории **Премиум V2**.

<a name="unsupported"></a>

## <a name="scale-up-from-an-unsupported-region"></a>Увеличение масштаба из неподдерживаемого региона

Если ваше приложение выполняется в регионе, где категория **Премиум V2** пока недоступна, вы можете переместить приложения в другой регион, чтобы воспользоваться преимуществами категории **Премиум V2**. Существует два варианта.

- Создайте приложение в новом плане **Премиум V2**, а затем повторно разверните код своего приложения. Следуйте указаниям из раздела [Создание приложения с категорией Премиум V2](#create), чтобы установить категорию **Премиум V2**. При необходимости используйте ту же конфигурацию масштабирования с развертыванием, что и для существующего плана службы приложений (количество экземпляров, автомасштабирование и т. д.).
- Если приложение уже выполняется в существующей категории **Премиум**, то его можно клонировать вместе со всеми параметрами, строками подключения и конфигурацией развертывания.

    ![](media/app-service-configure-premium-tier/clone-app.png)

    На странице **клонирование приложений** вы можете создать план службы приложений в требуемом регионе и указать клонируемые параметры.

## <a name="automate-with-scripts"></a>Автоматизация с помощью сценариев

Создание приложения с категорией **Премиум V2** можно автоматизировать с помощью сценариев, воспользовавшись [Azure CLI](/cli/azure/install-azure-cli) или [Azure PowerShell](/powershell/azure/overview).

### <a name="azure-cli"></a>Инфраструктура CLI Azure

Следующая команда создает план службы приложений с ценовой категорией _P1V2_. Ее можно запустить в Cloud Shell. Параметрами для `--sku` являются P1V2, _P2V2_ и _P3V2_.

```azurecli-interactive
az appservice plan create \
    --resource-group <resource_group_name> \
    --name <app_service_plan_name> \
    --sku P1V2
```

### <a name="azure-powershell"></a>Azure PowerShell

Следующая команда создает план службы приложений с ценовой категорией _P1V2_. Параметрами для `-WorkerSize` являются _Мелкий_, _Средний_ и _Крупный_.

```PowerShell
New-AzureRmAppServicePlan -ResourceGroupName <resource_group_name> `
    -Name <app_service_plan_name> `
    -Location <region_name> `
    -Tier "PremiumV2" `
    -WorkerSize "Small"
```
## <a name="more-resources"></a>Дополнительные ресурсы

[Увеличение масштаба приложения в Azure](web-sites-scale.md)  
[Масштабирование числа экземпляров вручную или автоматически](../monitoring-and-diagnostics/insights-how-to-scale.md)