---
title: "aaaAuthentication и авторизации в службе приложений Azure | Документы Microsoft"
description: "Ссылки на концептуальные и обзор hello проверки подлинности / авторизации компонентов для службы приложений Azure"
services: app-service
documentationcenter: 
author: mattchenderson
manager: erikre
editor: 
ms.assetid: b7151b57-09e5-4c77-a10c-375a262f17e5
ms.service: app-service
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 08/29/2016
ms.author: mahender
ms.openlocfilehash: dc2074b16cce47b72b78ea7afeda89dbc4832166
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-and-authorization-in-azure-app-service"></a><span data-ttu-id="11472-103">Проверка подлинности и авторизация в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="11472-103">Authentication and authorization in Azure App Service</span></span>
## <a name="what-is-app-service-authentication--authorization"></a><span data-ttu-id="11472-104">Что такое проверка подлинности и авторизация службы приложений?</span><span class="sxs-lookup"><span data-stu-id="11472-104">What is App Service Authentication / Authorization?</span></span>
<span data-ttu-id="11472-105">Проверка подлинности службы для приложения / авторизация — это компонент, который предоставляет способ для вашего приложения toosign пользователей, чтобы не нужно toochange код на внутреннем сервере приложения hello.</span><span class="sxs-lookup"><span data-stu-id="11472-105">App Service Authentication / Authorization is a feature that provides a way for your application toosign in users so that you don't have toochange code on hello app backend.</span></span> <span data-ttu-id="11472-106">Он предоставляет простой способ tooprotect приложения и рабочие данные для каждого пользователя.</span><span class="sxs-lookup"><span data-stu-id="11472-106">It provides an easy way tooprotect your application and work with per-user data.</span></span>

<span data-ttu-id="11472-107">Служба приложений использует федеративную идентификацию, при которой сторонний поставщик удостоверений сохраняет учетные записи и проводит аутентификацию пользователей.</span><span class="sxs-lookup"><span data-stu-id="11472-107">App Service uses federated identity, in which a third-party identity provider stores accounts and authenticates users.</span></span> <span data-ttu-id="11472-108">приложения Hello использует сведения об удостоверении hello поставщика, чтобы hello приложение не имеет toostore, сами сведения.</span><span class="sxs-lookup"><span data-stu-id="11472-108">hello application relies on hello provider's identity information so that hello app doesn't have toostore that information itself.</span></span> <span data-ttu-id="11472-109">Службы приложений поддерживает пять Поставщики удостоверений стандартной hello: Azure Active Directory, Facebook, Google, учетной записи Майкрософт и Twitter.</span><span class="sxs-lookup"><span data-stu-id="11472-109">App Service supports five identity providers out of hello box: Azure Active Directory, Facebook, Google, Microsoft Account, and Twitter.</span></span> <span data-ttu-id="11472-110">Приложение может использовать любое количество этих tooprovide Поставщики удостоверений пользователей с параметрами для как в систему.</span><span class="sxs-lookup"><span data-stu-id="11472-110">Your app can use any number of these identity providers tooprovide your users with options for how they sign in.</span></span> <span data-ttu-id="11472-111">Встроенная поддержка tooexpand hello, вы можете интегрировать другой поставщик удостоверений или [решении пользовательское удостоверение][custom-auth].</span><span class="sxs-lookup"><span data-stu-id="11472-111">tooexpand hello built-in support, you can integrate another identity provider or [your own custom identity solution][custom-auth].</span></span>

<span data-ttu-id="11472-112">Если вы хотите tooget работу прямо сейчас, см. в одном hello следующие учебники:</span><span class="sxs-lookup"><span data-stu-id="11472-112">If you want tooget started right away, see one of hello following tutorials:</span></span>

* <span data-ttu-id="11472-113">[Добавление приложения iOS для проверки подлинности tooyour] [ iOS] (или [Android], [Windows], [Xamarin.iOS], [ Xamarin.Android], [Xamarin.Forms], или [Cordova])</span><span class="sxs-lookup"><span data-stu-id="11472-113">[Add authentication tooyour iOS app][iOS] (or [Android], [Windows], [Xamarin.iOS], [Xamarin.Android], [Xamarin.Forms], or [Cordova])</span></span>
* <span data-ttu-id="11472-114">[Проверка подлинности пользователя для приложений API в службе приложений Azure][apia-user]</span><span class="sxs-lookup"><span data-stu-id="11472-114">[User authentication for API Apps in Azure App Service][apia-user]</span></span>
* <span data-ttu-id="11472-115">[Начало работы со службой приложений Azure (часть 2)][web-getstarted]</span><span class="sxs-lookup"><span data-stu-id="11472-115">[Get started with Azure App Service - Part 2][web-getstarted]</span></span>

## <a name="how-authentication-works-in-app-service"></a><span data-ttu-id="11472-116">Как устроена проверка подлинности в службе приложений</span><span class="sxs-lookup"><span data-stu-id="11472-116">How authentication works in App Service</span></span>
<span data-ttu-id="11472-117">В порядке tooauthenticate с помощью одного из поставщиков удостоверений hello необходимо сначала tooknow поставщика удостоверений hello tooconfigure о своем приложении.</span><span class="sxs-lookup"><span data-stu-id="11472-117">In order tooauthenticate by using one of hello identity providers, you first need tooconfigure hello identity provider tooknow about your application.</span></span> <span data-ttu-id="11472-118">Поставщик удостоверений Hello будет предоставить идентификаторы и секретные данные, необходимо указать tooApp службы.</span><span class="sxs-lookup"><span data-stu-id="11472-118">hello identity provider will then provide IDs and secrets that you provide tooApp Service.</span></span> <span data-ttu-id="11472-119">На этом завершается hello отношения доверия, чтобы приложение службы можно проверить пользователя утверждения, таких как маркеры проверки подлинности, от поставщика удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="11472-119">This completes hello trust relationship so that App Service can validate user assertions, such as authentication tokens, from hello identity provider.</span></span>

<span data-ttu-id="11472-120">toosign в пользователя с помощью одного из этих поставщиков hello пользователь должен быть перенаправленный tooan конечную точку, которая выполняет вход пользователей для этого поставщика.</span><span class="sxs-lookup"><span data-stu-id="11472-120">toosign in a user by using one of these providers, hello user must be redirected tooan endpoint that signs in users for that provider.</span></span> <span data-ttu-id="11472-121">Если веб-браузера, используемые клиентами, можно использовать службу приложения автоматически перенаправляются все toohello непроверенных пользователей конечной точки, которая выполняет вход пользователей.</span><span class="sxs-lookup"><span data-stu-id="11472-121">If customers are using a web browser, you can have App Service automatically direct all unauthenticated users toohello endpoint that signs in users.</span></span> <span data-ttu-id="11472-122">В противном случае вам потребуется toodirect клиентов слишком`{your App Service base URL}/.auth/login/<provider>`, где `<provider>` является одним из hello следующие значения: aad, facebook, google, microsoft или twitter.</span><span class="sxs-lookup"><span data-stu-id="11472-122">Otherwise, you will need toodirect your customers too`{your App Service base URL}/.auth/login/<provider>`, where `<provider>` is one of hello following values: aad, facebook, google, microsoft, or twitter.</span></span> <span data-ttu-id="11472-123">Сценарии для мобильных устройств и API рассматриваются в следующих разделах этой статьи.</span><span class="sxs-lookup"><span data-stu-id="11472-123">Mobile and API scenarios are explained in sections later in this article.</span></span>

<span data-ttu-id="11472-124">У пользователей, которые взаимодействуют с приложением через веб-браузер, файл cookie будет настроен таким образом, чтобы при просмотре приложения они оставались аутентифицированными.</span><span class="sxs-lookup"><span data-stu-id="11472-124">Users who interact with your application through a web browser will have a cookie set so that they can remain authenticated as they browse your application.</span></span> <span data-ttu-id="11472-125">Для других типов клиентов, например мобильные веб-токен JSON (JWT), который должны быть представлены в hello `X-ZUMO-AUTH` заголовок, будет выдано toohello клиента.</span><span class="sxs-lookup"><span data-stu-id="11472-125">For other client types, such as mobile, a JSON web token (JWT), which should be presented in hello `X-ZUMO-AUTH` header, will be issued toohello client.</span></span> <span data-ttu-id="11472-126">Мобильные приложения Hello клиентских SDK будет обрабатывать это для вас.</span><span class="sxs-lookup"><span data-stu-id="11472-126">hello Mobile Apps client SDKs will handle this for you.</span></span> <span data-ttu-id="11472-127">Кроме того, токен идентификации Azure Active Directory или токен доступа непосредственно в могут включаться hello `Authorization` заголовок как [токена носителя](https://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="11472-127">Alternatively, an Azure Active Directory identity token or access token may be directly included in hello `Authorization` header as a [bearer token](https://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="11472-128">Службы приложений будет проверять все файлы cookie или токен, что приложение выдает tooauthenticate пользователей.</span><span class="sxs-lookup"><span data-stu-id="11472-128">App Service will validate any cookie or token that your application issues tooauthenticate users.</span></span> <span data-ttu-id="11472-129">toorestrict, кто может получить доступ к приложению, в разделе hello [авторизации](#authorization) далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="11472-129">toorestrict who can access your application, see hello [Authorization](#authorization) section later in this article.</span></span>

### <a name="mobile-authentication-with-a-provider-sdk"></a><span data-ttu-id="11472-130">Мобильная проверка подлинности с пакетом SDK поставщика</span><span class="sxs-lookup"><span data-stu-id="11472-130">Mobile authentication with a provider SDK</span></span>
<span data-ttu-id="11472-131">После все настроено hello серверную часть, можно изменить toosign мобильных клиентов с использованием службы приложений.</span><span class="sxs-lookup"><span data-stu-id="11472-131">After everything is configured on hello backend, you can modify mobile clients toosign in with App Service.</span></span> <span data-ttu-id="11472-132">Существует два подхода:</span><span class="sxs-lookup"><span data-stu-id="11472-132">There are two approaches here:</span></span>

* <span data-ttu-id="11472-133">Используйте пакет SDK, что поставщик указанному идентификатору публикует tooestablish удостоверение и получить доступ tooApp службы.</span><span class="sxs-lookup"><span data-stu-id="11472-133">Use an SDK that a given identity provider publishes tooestablish identity and then gain access tooApp Service.</span></span>
* <span data-ttu-id="11472-134">Использованием одной строки кода, поэтому этот пакет SDK для клиента мобильные приложения hello можно регистрация пользователей.</span><span class="sxs-lookup"><span data-stu-id="11472-134">Use a single line of code so that hello Mobile Apps client SDK can sign in users.</span></span>

> [!TIP]
> <span data-ttu-id="11472-135">Большинство приложений следует использовать поставщик SDK tooget более согласованной работы пользователей в систему, toouse обновления поддержки и tooget указывает другие преимущества, поставщик hello.</span><span class="sxs-lookup"><span data-stu-id="11472-135">Most applications should use a provider SDK tooget a more consistent experience when users sign in, toouse refresh support, and tooget other benefits that hello provider specifies.</span></span>
> 
> 

<span data-ttu-id="11472-136">При использовании поставщика пакета SDK, пользователи могут войти в tooan взаимодействие, более тесно интегрируется с операционной системой hello, приложение hello ОС.</span><span class="sxs-lookup"><span data-stu-id="11472-136">When you use a provider SDK, users can sign in tooan experience that integrates more tightly with hello operating system that hello app is running on.</span></span> <span data-ttu-id="11472-137">Это также позволяет токен поставщика и некоторые сведения о пользователе на приветствия клиента, который позволяет гораздо проще tooconsume graph API-интерфейсов и настроить взаимодействие с пользователем hello.</span><span class="sxs-lookup"><span data-stu-id="11472-137">This also gives you a provider token and some user information on hello client, which makes it much easier tooconsume graph APIs and customize hello user experience.</span></span> <span data-ttu-id="11472-138">Время от времени на блоги и форумы вы увидите это ссылка tooas hello «потока клиента» или «клиент перенаправлен потока» тем код на клиенте hello выполняет вход пользователей, а код клиента hello Поставщик маркера доступа tooa.</span><span class="sxs-lookup"><span data-stu-id="11472-138">Occasionally on blogs and forums, you will see this referred tooas hello "client flow" or "client-directed flow" because code on hello client signs in users, and hello client code has access tooa provider token.</span></span>

<span data-ttu-id="11472-139">После получения маркера поставщика ему toobe отправлено tooApp службы для проверки.</span><span class="sxs-lookup"><span data-stu-id="11472-139">After a provider token is obtained, it needs toobe sent tooApp Service for validation.</span></span> <span data-ttu-id="11472-140">Службы приложений проверяет токен hello, службы приложений создает новый маркер службы приложений, возвращаемый toohello клиента.</span><span class="sxs-lookup"><span data-stu-id="11472-140">After App Service validates hello token, App Service creates a new App Service token that is returned toohello client.</span></span> <span data-ttu-id="11472-141">пакет SDK для клиента мобильные приложения Hello имеет toomanage вспомогательные методы этого обмена и автоматически связать внутренняя служба приложения hello маркера tooall запросов toohello.</span><span class="sxs-lookup"><span data-stu-id="11472-141">hello Mobile Apps client SDK has helper methods toomanage this exchange and automatically attach hello token tooall requests toohello application backend.</span></span> <span data-ttu-id="11472-142">Разработчики могут также содержать токен ссылки на поставщик toohello по усмотрению.</span><span class="sxs-lookup"><span data-stu-id="11472-142">Developers can also keep a reference toohello provider token if they so choose.</span></span>

### <a name="mobile-authentication-without-a-provider-sdk"></a><span data-ttu-id="11472-143">Мобильная проверка подлинности без пакета SDK поставщика</span><span class="sxs-lookup"><span data-stu-id="11472-143">Mobile authentication without a provider SDK</span></span>
<span data-ttu-id="11472-144">Если tooset поставщика SDK не требуется, можно разрешить функция мобильные приложения hello toosign службе приложений Azure в для вас.</span><span class="sxs-lookup"><span data-stu-id="11472-144">If you do not want tooset up a provider SDK, you can allow hello Mobile Apps feature of Azure App Service toosign in for you.</span></span> <span data-ttu-id="11472-145">Мобильные приложения Hello клиенту SDK откройте представление toohello поставщике по своему выбору и вход пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="11472-145">hello Mobile Apps client SDK will open a web view toohello provider of your choosing and sign in hello user.</span></span> <span data-ttu-id="11472-146">Иногда на блоги и форумы, вы увидите этот hello tooas ссылка «потока сервера» или «потока, направленных на сервере» так, как hello процесс, выполняющий вход пользователей, которыми управляет сервер hello и пакет SDK для клиента hello не получает токен поставщика hello.</span><span class="sxs-lookup"><span data-stu-id="11472-146">Occasionally on blogs and forums, you will see this referred tooas hello "server flow" or "server-directed flow" because hello server manages hello process that signs in users, and hello client SDK never receives hello provider token.</span></span>

<span data-ttu-id="11472-147">Код toostart этого потока, включенный в учебнике hello проверки подлинности для каждой платформы.</span><span class="sxs-lookup"><span data-stu-id="11472-147">Code toostart this flow is included in hello authentication tutorial for each platform.</span></span> <span data-ttu-id="11472-148">В конце потока hello hello hello клиентский пакет SDK содержит токен службы приложений и hello маркер является внутренняя служба приложения toohello tooall автоматически вложенные запросы.</span><span class="sxs-lookup"><span data-stu-id="11472-148">At hello end of hello flow, hello client SDK has an App Service token, and hello token is automatically attached tooall requests toohello application backend.</span></span>

### <a name="service-to-service-authentication"></a><span data-ttu-id="11472-149">Взаимодействие между службами</span><span class="sxs-lookup"><span data-stu-id="11472-149">Service-to-service authentication</span></span>
<span data-ttu-id="11472-150">Несмотря на то, что может предоставить приложения tooyour доступа пользователей, можно также доверять другой toocall приложения собственных API.</span><span class="sxs-lookup"><span data-stu-id="11472-150">Although you can give users access tooyour application, you can also trust another application toocall your own API.</span></span> <span data-ttu-id="11472-151">Например, одно веб-приложение может вызывать API в другом веб-приложении.</span><span class="sxs-lookup"><span data-stu-id="11472-151">For example, you could have one web app call an API in another web app.</span></span> <span data-ttu-id="11472-152">В этом случае использовать учетные данные для учетной записи службы вместо tooget учетные данные пользователя маркер.</span><span class="sxs-lookup"><span data-stu-id="11472-152">In this scenario, you use credentials for a service account instead of user credentials tooget a token.</span></span> <span data-ttu-id="11472-153">Учетная запись службы в терминологии Azure Active Directory также называется *субъектом-службой* , а проверка подлинности с использованием такой учетной записи называется сценарием взаимодействия между службами.</span><span class="sxs-lookup"><span data-stu-id="11472-153">A service account is also known as a *service principal* in Azure Active Directory parlance, and authentication that uses such an account is also known as a service-to-service scenario.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="11472-154">Так как мобильные приложения работают на клиентских устройствах, эти приложения *не* считаются доверенными и не должны использовать поток субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="11472-154">Because mobile apps run on customer devices, mobile applications do *not* count as trusted applications and should not use a service principal flow.</span></span> <span data-ttu-id="11472-155">Вместо этого они должны использовать пользовательский поток, описанный выше.</span><span class="sxs-lookup"><span data-stu-id="11472-155">Instead, they should use a user flow that was detailed earlier.</span></span>
> 
> 

<span data-ttu-id="11472-156">В сценариях взаимодействия между службами служба приложений может защитить приложение с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="11472-156">For service-to-service scenarios, App Service can protect your application by using Azure Active Directory.</span></span> <span data-ttu-id="11472-157">вызывающее приложение Hello достаточно tooprovide маркер авторизации основной службы Azure Active Directory, полученный путем предоставления hello идентификатор клиента и секрет Azure Active Directory в клиент.</span><span class="sxs-lookup"><span data-stu-id="11472-157">hello calling application just needs tooprovide an Azure Active Directory service principal authorization token that is obtained by providing hello client ID and client secret from Azure Active Directory.</span></span> <span data-ttu-id="11472-158">Пример такого сценария, использующего ASP.NET API приложения описан в учебнике hello [основной проверки подлинности службы для приложений API][apia-service].</span><span class="sxs-lookup"><span data-stu-id="11472-158">An example of this scenario that uses ASP.NET API apps is explained by hello tutorial, [Service principal authentication for API Apps][apia-service].</span></span>

<span data-ttu-id="11472-159">Следует toouse toohandle проверки подлинности службы приложений сценарий service to service можно использовать клиентские сертификаты или обычной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="11472-159">If you want toouse App Service authentication toohandle a service-to-service scenario, you can use client certificates or basic authentication.</span></span> <span data-ttu-id="11472-160">Сведения о клиентских сертификатов в Azure см. в разделе [как tooConfigure TLS взаимной проверки подлинности для веб-приложений](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span><span class="sxs-lookup"><span data-stu-id="11472-160">For information about client certificates in Azure, see [How tooConfigure TLS Mutual Authentication for Web Apps](../app-service-web/app-service-web-configure-tls-mutual-auth.md).</span></span> <span data-ttu-id="11472-161">Сведения об обычной проверке подлинности в ASP.NET см. в статье [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters) (Фильтры проверки подлинности в веб-API ASP.NET 2).</span><span class="sxs-lookup"><span data-stu-id="11472-161">For information about basic authentication in ASP.NET, see [Authentication Filters in ASP.NET Web API 2](http://www.asp.net/web-api/overview/security/authentication-filters).</span></span>

<span data-ttu-id="11472-162">Проверка подлинности учетной записи службы из приложения tooan API службы приложений логики приложения является особым случаем, который подробно описан в [с помощью настраиваемого API, размещенных в службе приложений с приложениями логики](../logic-apps/logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="11472-162">Service account authentication from an App Service logic app tooan API app is a special case that is detailed in [Using your custom API hosted on App Service with Logic apps](../logic-apps/logic-apps-custom-hosted-api.md).</span></span>

## <span data-ttu-id="11472-163"><a name="authorization"></a>Принцип действия авторизации в службе приложений</span><span class="sxs-lookup"><span data-stu-id="11472-163"><a name="authorization"></a>How authorization works in App Service</span></span>
<span data-ttu-id="11472-164">У вас есть полный контроль над hello запросов, которые можно получить доступ к приложению.</span><span class="sxs-lookup"><span data-stu-id="11472-164">You have full control over hello requests that can access your application.</span></span> <span data-ttu-id="11472-165">Проверка подлинности службы для приложения / авторизации можно настроить с помощью любого из следующих поведений hello:</span><span class="sxs-lookup"><span data-stu-id="11472-165">App Service Authentication / Authorization can be configured with any of hello following behaviors:</span></span>

* <span data-ttu-id="11472-166">Разрешить только tooreach запросов проверки подлинности приложения.</span><span class="sxs-lookup"><span data-stu-id="11472-166">Allow only authenticated requests tooreach your application.</span></span>
  
    <span data-ttu-id="11472-167">Если обозреватель получает анонимный запрос, служба приложение будет осуществлять перенаправление tooa страницы для поставщика удостоверений hello, выберите, чтобы пользователи могли войти.</span><span class="sxs-lookup"><span data-stu-id="11472-167">If a browser receives an anonymous request, App Service will redirect tooa page for hello identity provider that you choose so that users can sign in.</span></span> <span data-ttu-id="11472-168">При поступлении запроса hello с мобильного устройства, hello возвращается ответ HTTP *проверки подлинности 401* ответа.</span><span class="sxs-lookup"><span data-stu-id="11472-168">If hello request comes from a mobile device, hello returned response is an HTTP *401 Unauthorized* response.</span></span>
  
    <span data-ttu-id="11472-169">Этот параметр не требуется toowrite любой код проверки подлинности во всех в вашем приложении.</span><span class="sxs-lookup"><span data-stu-id="11472-169">With this option, you don't need toowrite any authentication code at all in your app.</span></span> <span data-ttu-id="11472-170">Если требуется более точное авторизации, сведения о пользователе hello — доступные tooyour код.</span><span class="sxs-lookup"><span data-stu-id="11472-170">If you need finer authorization, information about hello user is available tooyour code.</span></span>
* <span data-ttu-id="11472-171">Разрешить все запросы tooreach приложения, но проверки запросов на проверку подлинности и передают сведения о проверке подлинности в заголовках hello HTTP.</span><span class="sxs-lookup"><span data-stu-id="11472-171">Allow all requests tooreach your application, but validate authenticated requests, and pass along authentication information in hello HTTP headers.</span></span>
  
    <span data-ttu-id="11472-172">Этот параметр откладывает код приложения tooyour решения об авторизации.</span><span class="sxs-lookup"><span data-stu-id="11472-172">This option defers authorization decisions tooyour application code.</span></span> <span data-ttu-id="11472-173">Обеспечивает большую гибкость при обработке анонимных запросов, но у вас есть код toowrite.</span><span class="sxs-lookup"><span data-stu-id="11472-173">It provides more flexibility in handling anonymous requests, but you have toowrite code.</span></span>
* <span data-ttu-id="11472-174">Разрешить все запросы tooreach приложения и не выполнять никаких действий на сведения о проверке подлинности в запросах hello.</span><span class="sxs-lookup"><span data-stu-id="11472-174">Allow all requests tooreach your application, and take no action on authentication information in hello requests.</span></span>
  
    <span data-ttu-id="11472-175">В этом случае hello проверки подлинности и авторизации функция выключена.</span><span class="sxs-lookup"><span data-stu-id="11472-175">In this case, hello Authentication / Authorization feature is off.</span></span> <span data-ttu-id="11472-176">Hello задачи проверки подлинности и авторизации полностью функционируют tooyour кода приложения.</span><span class="sxs-lookup"><span data-stu-id="11472-176">hello tasks of authentication and authorization are entirely up tooyour application code.</span></span>

<span data-ttu-id="11472-177">Hello предыдущего поведения управляются hello **tootake действия, если запрос не прошел проверку подлинности** параметр в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="11472-177">hello previous behaviors are controlled by hello **Action tootake when request is not authenticated** option in hello Azure portal.</span></span> <span data-ttu-id="11472-178">При выборе ** входа в систему *имя поставщика* **, все запросы имеют toobe с проверкой подлинности.</span><span class="sxs-lookup"><span data-stu-id="11472-178">If you choose **Log in with *provider name* **, all requests have toobe authenticated.</span></span> <span data-ttu-id="11472-179">**Разрешить запрос (никаких действий)** откладывает hello кода tooyour авторизации для принятия решений, но по-прежнему содержит сведения о проверке подлинности.</span><span class="sxs-lookup"><span data-stu-id="11472-179">**Allow request (no action)** defers hello authorization decision tooyour code, but it still provides authentication information.</span></span> <span data-ttu-id="11472-180">Если toohave код обрабатывать все данные, можно отключить hello проверки подлинности и авторизации компонентов.</span><span class="sxs-lookup"><span data-stu-id="11472-180">If you want toohave your code handle everything, you can disable hello Authentication / Authorization feature.</span></span>

## <a name="working-with-user-identities-in-your-application"></a><span data-ttu-id="11472-181">Работа с удостоверениями пользователей в приложении</span><span class="sxs-lookup"><span data-stu-id="11472-181">Working with user identities in your application</span></span>
<span data-ttu-id="11472-182">Службы приложений передает каким-либо приложением tooyour сведения пользователя с использованием особых заголовков.</span><span class="sxs-lookup"><span data-stu-id="11472-182">App Service passes some user information tooyour application by using special headers.</span></span> <span data-ttu-id="11472-183">Эти заголовки не могут использоваться во внешних запросах. Они могут присутствовать, только если были установлены службой приложений при проверке подлинности или авторизации.</span><span class="sxs-lookup"><span data-stu-id="11472-183">External requests prohibit these headers and will only be present if set by App Service Authentication / Authorization.</span></span> <span data-ttu-id="11472-184">Некоторые примеры заголовков включают:</span><span class="sxs-lookup"><span data-stu-id="11472-184">Some example headers include:</span></span>

* <span data-ttu-id="11472-185">X-MS-CLIENT-PRINCIPAL-NAME</span><span class="sxs-lookup"><span data-stu-id="11472-185">X-MS-CLIENT-PRINCIPAL-NAME</span></span>
* <span data-ttu-id="11472-186">X-MS-CLIENT-PRINCIPAL-ID</span><span class="sxs-lookup"><span data-stu-id="11472-186">X-MS-CLIENT-PRINCIPAL-ID</span></span>
* <span data-ttu-id="11472-187">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span><span class="sxs-lookup"><span data-stu-id="11472-187">X-MS-TOKEN-FACEBOOK-ACCESS-TOKEN</span></span>
* <span data-ttu-id="11472-188">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span><span class="sxs-lookup"><span data-stu-id="11472-188">X-MS-TOKEN-FACEBOOK-EXPIRES-ON</span></span>

<span data-ttu-id="11472-189">Код, написанный на любом языке, framework можно получить hello информацию, необходимую эти заголовки.</span><span class="sxs-lookup"><span data-stu-id="11472-189">Code that is written in any language or framework can get hello information that it needs from these headers.</span></span> <span data-ttu-id="11472-190">Приложения ASP.NET 4.6 hello **ClaimsPrincipal** автоматически устанавливается с соответствующими значениями hello.</span><span class="sxs-lookup"><span data-stu-id="11472-190">For ASP.NET 4.6 apps, hello **ClaimsPrincipal** is automatically set with hello appropriate values.</span></span>

<span data-ttu-id="11472-191">Приложения можно также получить дополнительные сведения по HTTP GET на hello `/.auth/me` конечную точку приложения.</span><span class="sxs-lookup"><span data-stu-id="11472-191">Your application can also obtain additional user details through an HTTP GET on hello `/.auth/me` endpoint of your application.</span></span> <span data-ttu-id="11472-192">Допустимый токен, который включен в запросе hello будет возвращать полезных данных JSON с подробными сведениями о hello поставщика, который используется, hello базового поставщика маркера и сведения о пользователе.</span><span class="sxs-lookup"><span data-stu-id="11472-192">A valid token that's included with hello request will return a JSON payload with details about hello provider that's being used, hello underlying provider token, and some other user information.</span></span> <span data-ttu-id="11472-193">Hello мобильные приложения сервер SDK предоставляет вспомогательные методы toowork с этими данными.</span><span class="sxs-lookup"><span data-stu-id="11472-193">hello Mobile Apps server SDKs provide helper methods toowork with this data.</span></span> <span data-ttu-id="11472-194">Дополнительные сведения см. в разделе [как toouse hello SDK Azure Mobile приложений Node.js](../app-service-mobile/app-service-mobile-node-backend-how-to-use-server-sdk.md#howto-tables-getidentity), и [работать с сервера базы данных hello .NET SDK для мобильных приложений Azure](../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#user-info).</span><span class="sxs-lookup"><span data-stu-id="11472-194">For more information, see [How toouse hello Azure Mobile Apps Node.js SDK](../app-service-mobile/app-service-mobile-node-backend-how-to-use-server-sdk.md#howto-tables-getidentity), and [Work with hello .NET backend server SDK for Azure Mobile Apps](../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#user-info).</span></span>

## <a name="documentation-and-additional-resources"></a><span data-ttu-id="11472-195">Документация и дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="11472-195">Documentation and additional resources</span></span>
### <a name="identity-providers"></a><span data-ttu-id="11472-196">Поставщики удостоверений</span><span class="sxs-lookup"><span data-stu-id="11472-196">Identity providers</span></span>
<span data-ttu-id="11472-197">Здравствуйте, как следующие учебники Показать tooconfigure службы приложений toouse разные поставщики проверки подлинности:</span><span class="sxs-lookup"><span data-stu-id="11472-197">hello following tutorials show how tooconfigure App Service toouse different authentication providers:</span></span>

* <span data-ttu-id="11472-198">[Как tooconfigure входа приложения toouse Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="11472-198">[How tooconfigure your app toouse Azure Active Directory login][AAD]</span></span>
* <span data-ttu-id="11472-199">[Как tooconfigure входа Facebook toouse приложения][Facebook]</span><span class="sxs-lookup"><span data-stu-id="11472-199">[How tooconfigure your app toouse Facebook login][Facebook]</span></span>
* <span data-ttu-id="11472-200">[Как tooconfigure входа Google toouse приложения][Google]</span><span class="sxs-lookup"><span data-stu-id="11472-200">[How tooconfigure your app toouse Google login][Google]</span></span>
* <span data-ttu-id="11472-201">[Как tooconfigure входа приложения toouse учетной записи Майкрософт][MSA]</span><span class="sxs-lookup"><span data-stu-id="11472-201">[How tooconfigure your app toouse Microsoft Account login][MSA]</span></span>
* <span data-ttu-id="11472-202">[Как tooconfigure входа Twitter toouse приложения][Twitter]</span><span class="sxs-lookup"><span data-stu-id="11472-202">[How tooconfigure your app toouse Twitter login][Twitter]</span></span>

<span data-ttu-id="11472-203">Если требуется toouse системы удостоверений, отличный от hello историй, предоставляемых здесь, можно также использовать hello [поддержка нестандартной проверки подлинности в SDK сервера мобильных приложений .NET hello предварительного просмотра][custom-auth], который может использоваться в веб-приложениях мобильные приложения или приложения API.</span><span class="sxs-lookup"><span data-stu-id="11472-203">If you want toouse an identity system other than hello ones provided here, you can also use hello [preview custom authentication support in hello Mobile Apps .NET server SDK][custom-auth], which can be used in web apps, mobile apps, or API apps.</span></span>

### <a name="web-applications"></a><span data-ttu-id="11472-204">Веб-приложения</span><span class="sxs-lookup"><span data-stu-id="11472-204">Web applications</span></span>
<span data-ttu-id="11472-205">следующие учебники Hello показывают, как tooa tooadd проверки подлинности веб-приложения:</span><span class="sxs-lookup"><span data-stu-id="11472-205">hello following tutorials show how tooadd authentication tooa web application:</span></span>

* <span data-ttu-id="11472-206">[Начало работы со службой приложений Azure (часть 2)][web-getstarted]</span><span class="sxs-lookup"><span data-stu-id="11472-206">[Get started with Azure App Service - Part 2][web-getstarted]</span></span>

### <a name="mobile-applications"></a><span data-ttu-id="11472-207">Мобильные приложения</span><span class="sxs-lookup"><span data-stu-id="11472-207">Mobile applications</span></span>
<span data-ttu-id="11472-208">следующие учебники Hello показывают, как tooadd проверки подлинности tooyour мобильных клиентов с помощью hello потока, направленных на сервере:</span><span class="sxs-lookup"><span data-stu-id="11472-208">hello following tutorials show how tooadd authentication tooyour mobile clients by using hello server-directed flow:</span></span>

* <span data-ttu-id="11472-209">[Добавление приложения iOS tooyour проверки подлинности][iOS]</span><span class="sxs-lookup"><span data-stu-id="11472-209">[Add authentication tooyour iOS app][iOS]</span></span>
* <span data-ttu-id="11472-210">[Добавить приложение Android проверки подлинности tooyour][Android]</span><span class="sxs-lookup"><span data-stu-id="11472-210">[Add Authentication tooyour Android app][Android]</span></span>
* <span data-ttu-id="11472-211">[Добавление приложения Windows Authentication tooyour][Windows]</span><span class="sxs-lookup"><span data-stu-id="11472-211">[Add Authentication tooyour Windows app][Windows]</span></span>
* <span data-ttu-id="11472-212">[Добавление проверки подлинности приложения Xamarin.iOS tooyour][Xamarin.iOS]</span><span class="sxs-lookup"><span data-stu-id="11472-212">[Add authentication tooyour Xamarin.iOS app][Xamarin.iOS]</span></span>
* <span data-ttu-id="11472-213">[Добавить приложение Xamarin.Android проверки подлинности tooyour][ Xamarin.Android]</span><span class="sxs-lookup"><span data-stu-id="11472-213">[Add authentication tooyour Xamarin.Android app][Xamarin.Android]</span></span>
* <span data-ttu-id="11472-214">[Добавить приложение Xamarin.Forms проверки подлинности tooyour][Xamarin.Forms]</span><span class="sxs-lookup"><span data-stu-id="11472-214">[Add authentication tooyour Xamarin.Forms app][Xamarin.Forms]</span></span>
* <span data-ttu-id="11472-215">[Добавление проверки подлинности приложения Cordova tooyour][Cordova]</span><span class="sxs-lookup"><span data-stu-id="11472-215">[Add Authentication tooyour Cordova app][Cordova]</span></span>

<span data-ttu-id="11472-216">Используйте следующие ресурсы, если требуется, чтобы поток toouse hello управляемая клиентом для Azure Active Directory hello.</span><span class="sxs-lookup"><span data-stu-id="11472-216">Use hello following resources if you want toouse hello client-directed flow for Azure Active Directory:</span></span>

* <span data-ttu-id="11472-217">[Использовать hello библиотеку аутентификации Active Directory для iOS][ADAL-iOS]</span><span class="sxs-lookup"><span data-stu-id="11472-217">[Use hello Active Directory Authentication Library for iOS][ADAL-iOS]</span></span>
* <span data-ttu-id="11472-218">[Использовать hello библиотеку аутентификации Active Directory для Android][ADAL-Android]</span><span class="sxs-lookup"><span data-stu-id="11472-218">[Use hello Active Directory Authentication Library for Android][ADAL-Android]</span></span>
* <span data-ttu-id="11472-219">[Используйте hello Active Directory Authentication библиотеки для Windows и Xamarin][ADAL-dotnet]</span><span class="sxs-lookup"><span data-stu-id="11472-219">[Use hello Active Directory Authentication Library for Windows and Xamarin][ADAL-dotnet]</span></span>

<span data-ttu-id="11472-220">Используйте следующие ресурсы, если требуется, чтобы поток toouse hello управляемая клиентом для Facebook hello.</span><span class="sxs-lookup"><span data-stu-id="11472-220">Use hello following resources if you want toouse hello client-directed flow for Facebook:</span></span>

* [<span data-ttu-id="11472-221">Использовать hello Facebook SDK для iOS</span><span class="sxs-lookup"><span data-stu-id="11472-221">Use hello Facebook SDK for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#facebook-sdk)

<span data-ttu-id="11472-222">Используйте следующие ресурсы, если требуется, чтобы toouse hello клиент перенаправлен поток Twitter hello.</span><span class="sxs-lookup"><span data-stu-id="11472-222">Use hello following resources if you want toouse hello client-directed flow for Twitter:</span></span>

* [<span data-ttu-id="11472-223">Практическое руководство: проверка подлинности пользователей с помощью структуры Twitter для iOS</span><span class="sxs-lookup"><span data-stu-id="11472-223">Use Twitter Fabric for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#twitter-fabric)

<span data-ttu-id="11472-224">Используйте следующие ресурсы, если требуется, чтобы поток toouse hello управляемая клиентом для Google hello.</span><span class="sxs-lookup"><span data-stu-id="11472-224">Use hello following resources if you want toouse hello client-directed flow for Google:</span></span>

* [<span data-ttu-id="11472-225">Использовать hello Google входа в пакет SDK для iOS</span><span class="sxs-lookup"><span data-stu-id="11472-225">Use hello Google Sign-In SDK for iOS</span></span>](../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#google-sdk)

### <a name="api-applications"></a><span data-ttu-id="11472-226">Приложения API</span><span class="sxs-lookup"><span data-stu-id="11472-226">API applications</span></span>
<span data-ttu-id="11472-227">Здравствуйте, следующие учебники Показать как tooprotect приложения API:</span><span class="sxs-lookup"><span data-stu-id="11472-227">hello following tutorials show how tooprotect your API apps:</span></span>

* <span data-ttu-id="11472-228">[Проверка подлинности пользователя для приложений API в службе приложений Azure][apia-user]</span><span class="sxs-lookup"><span data-stu-id="11472-228">[User authentication for API Apps in Azure App Service][apia-user]</span></span>
* <span data-ttu-id="11472-229">[Проверка подлинности с использованием субъекта-службы для приложений API в службе приложений Azure][apia-service]</span><span class="sxs-lookup"><span data-stu-id="11472-229">[Service principal authentication for API Apps in Azure App Service][apia-service]</span></span>

[apia-user]: ../app-service-api/app-service-api-dotnet-user-principal-auth.md
[apia-service]: ../app-service-api/app-service-api-dotnet-service-principal-auth.md

[web-getstarted]: ../app-service-web/app-service-web-get-started-2.md#authenticate-your-users

[iOS]: ../app-service-mobile/app-service-mobile-ios-get-started-users.md
[Android]: ../app-service-mobile/app-service-mobile-android-get-started-users.md
[Xamarin.iOS]: ../app-service-mobile/app-service-mobile-xamarin-ios-get-started-users.md
[ Xamarin.Android]: ../app-service-mobile/app-service-mobile-xamarin-android-get-started-users.md
[Xamarin.Forms]: ../app-service-mobile/app-service-mobile-xamarin-forms-get-started-users.md
[Windows]: ../app-service-mobile/app-service-mobile-windows-store-dotnet-get-started-users.md
[Cordova]: ../app-service-mobile/app-service-mobile-cordova-get-started-users.md

[AAD]: ../app-service-mobile/app-service-mobile-how-to-configure-active-directory-authentication.md
[Facebook]: ../app-service-mobile/app-service-mobile-how-to-configure-facebook-authentication.md
[Google]: ../app-service-mobile/app-service-mobile-how-to-configure-google-authentication.md
[MSA]: ../app-service-mobile/app-service-mobile-how-to-configure-microsoft-authentication.md
[Twitter]: ../app-service-mobile/app-service-mobile-how-to-configure-twitter-authentication.md

[custom-auth]: ../app-service-mobile/app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#custom-auth

[ADAL-Android]: ../app-service-mobile/app-service-mobile-android-how-to-use-client-library.md#adal
[ADAL-iOS]: ../app-service-mobile/app-service-mobile-ios-how-to-use-client-library.md#adal
[ADAL-dotnet]: ../app-service-mobile/app-service-mobile-dotnet-how-to-use-client-library.md#adal
