---
title: "AAA» гибридных подключений службы приложений Azure | Документы Microsoft»"
description: "Как toocreate и использование ресурсов tooaccess гибридные подключения в различных сетях"
services: app-service
documentationcenter: 
author: ccompy
manager: stefsch
editor: 
ms.assetid: 66774bde-13f5-45d0-9a70-4e9536a4f619
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/22/2017
ms.author: ccompy
ms.openlocfilehash: 61d58068ab0a7c803019e3f0e92bde4273d1a053
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-app-service-hybrid-connections"></a>Гибридные подключения к службе приложений Azure #

## <a name="overview"></a>Обзор ##

Гибридные подключения является службы в Azure как, так и функции в службе приложений Azure hello.  Как служба имеет использования и возможностей, чем те, которые использовались в службе приложений Azure hello.  Дополнительные сведения о гибридных подключений и их использования за пределами hello службе приложений Azure, можно запустить, toolearn [гибридных подключений ретрансляции Azure][HCService]

В рамках hello службе приложений Azure гибридные подключения может быть используется tooaccess ресурсы приложения в других сетях. Он предоставляет доступ из конечной точки приложения tooan вашего приложения.  Это не позволяет tooaccess альтернативных возможностей приложения.  Как hello службы приложений каждого гибридного подключения сопоставляет tooa один узел и порт комбинацией TCP.  Это означает, что этой конечной точке hello гибридного подключения может быть в любой операционной системе и любые приложения, если предназначаются прослушивающий TCP-порт. Гибридные подключения знать или не обращают внимания на какие протокол приложения hello, или вы обращаетесь.  Они просто обеспечивают доступ к сети.  


## <a name="how-it-works"></a>Принцип работы ##
Hello гибридного подключения состоит из двух исходящих вызовов tooService ретрансляции шины.  Отсутствует подключение из библиотеки на узле hello, где приложение будет выполняться в службе приложений hello и выполняется подключение от ретрансляции шины tooService hello Manager(HCM) гибридного подключения.  Hello HCM — это служба ретрансляции, которая развертывается в hello сетевого размещения 

Через hello двух соединяемых соединений приложения tooa туннель TCP фиксированной узла: порт сочетание hello hello HCM другой стороне.  Hello соединение использует TLS 1.2 для безопасности и ключи SAS для проверки подлинности и авторизации.    

![][1]

Когда приложение выполняет запрос DNS, соответствующий конечной точке Настройка гибридного подключения, а затем вниз hello гибридного подключения будут перенаправляться hello исходящего трафика TCP.  

> [!NOTE]
> Это означает, что следует попробовать использование tooalways DNS-имя для вашего гибридного подключения.  Некоторые клиентское программное обеспечение не делайте Уточняющий запрос DNS, если вместо него используется IP-адрес конечной точки hello.
>
>

Существует два типа гибридных подключений, hello новых гибридных подключений, которые предоставляются как служба в Azure ретрансляции и hello старые BizTalk гибридных подключений.  Hello гибридное подключение BizTalk, ссылка tooas классический гибридных подключений на портале hello.  Дополнительная информация о них приведена далее в этом документе.

### <a name="app-service-hybrid-connection-benefits"></a>Преимущества гибридного подключения службы приложений ###

Существует несколько преимуществ toohello гибридных подключений возможностей, в том числе

- Приложения могут безопасно обращаться к локальным службам и системам.
- компонент Hello не требует Интернет конечная точка доступа
- это быстрый и простой tooset вверх  
- Каждый гибридного подключения сочетания tooa одного узла: порт которого является аспектом высокая степень защиты
- он обычно не нуждаются в отверстия брандмауэра как все исходящие подключения hello через порты стандартные веб-сайтов
- так как функция hello уровне сети, также означает, что зависит от toohello язык, используемый используется hello конечной точкой приложения и hello технологии
- его можно использовать tooprovide доступа в нескольких сетей из одного приложения 

### <a name="things-you-cannot-do-with-hybrid-connections"></a>Что невозможно сделать с помощью гибридных подключений ###

Существует несколько вещей, которые невозможно выполнить с помощью гибридных подключений, в том числе:

- подключение диска;
- использование протокола UDP;
- доступ к службам на основе протокола TCP, использующим динамические порты (таким как пассивным режим FTP или расширенный пассивный режим FTP);
- поддержка LDAP, так как иногда для нее требуется UDP;
- поддержка Active Directory.

## <a name="adding-and-creating-a-hybrid-connection-in-your-app"></a>Добавление и создание гибридного подключения в приложении ##

Гибридные подключения могут создаваться через портал приложения hello, или с портала службы hello гибридного подключения.  Настоятельно рекомендуется использовать hello портала toocreate приложения hello гибридные подключения нужно toouse вместе с приложением.  Гибридное подключение toocreate go toohello [портал Azure] [ portal] , а в hello пользовательского интерфейса для приложения.  Выберите **Сети > Настройте конечные точки гибридного подключения**.  Здесь вы увидите hello гибридных подключений, настроенных с приложением  

![][2]

tooadd гибридное подключение, нажмите кнопку Добавить гибридное подключение.  Hello пользовательский Интерфейс, который открывает список hello гибридных подключений, который уже создан.  tooadd один или несколько из них tooyour приложения, щелкните hello из них требуется и попадания **добавить выбранные гибридного подключения**.  

![][3]

Если toocreate гибридное подключение, щелкните **создать новое гибридное подключение**.  Теперь следует указать: 

- имя конечной точки;
- имя узла конечной точки;
- порт конечной точки;
- пространство имен servicebus нужно toouse

![][4]

Каждый гибридного подключения равноценных tooa пространство имен служебной шины и каждого пространства имен шины обслуживания в регионе Azure.  Очень важно, что tootry и используйте пространство имен в шины обслуживания hello же регионе, что приложение так, чтобы tooavoid за сетью.

Если требуется tooremove гибридное подключение из приложения, щелкните ее правой кнопкой и выберите **Disconnect**.  

После добавления веб-приложения tooyour гибридного подключения вы увидите подробные сведения на нем, просто щелкнув его.  

![][5]

## <a name="hybrid-connections-and-app-service-plans"></a>Гибридные подключения и планы службы приложений ##

только гибридные подключения Hello, теперь можно выполнить, hello новые гибридные подключения.  Они доступны только для SKU "Базовый", "Стандартный", "Премиум" и Isolated.  Существуют ограничения привязан toohello ценовой план.  

| Тарифный план | Число гибридных подключений, которые можно использовать в плане hello |
|----|----|
| Basic | 5 |
| Стандартная | 25 |
| Premium | 200 |
| Isolated | 200 |

Так как существуют ограничения на план служб приложений также есть пользовательский Интерфейс в hello план служб приложений, которое показывает, сколько гибридные подключения используются и какие приложения.  

![][6]

Так же как и в представлении приложения hello, вы увидите сведения гибридного подключения, щелкнув его.  В свойствах hello, показанный здесь можно просмотреть все сведения о hello, имеющийся на представление приложения hello, но также можно видеть, сколько другие приложения hello же план службы приложений используют, гибридного подключения.

![][7]

Несмотря на отсутствие ограничений на число hello конечные точки гибридного подключения, которые могут использоваться в план служб приложений, можно использовать каждый гибридное подключение, используемое между любым числом приложений в составе этого плана.  Это toosay, что если у меня 1 гибридного подключения, используемый в 5 отдельных приложения в моей план служб приложений, то есть по-прежнему только 1 гибридного подключения.

Нет соединений toohybrid дополнительных затрат выполняется только в Basic, Standard, Premium или изолированной SKU.  Дополнительные сведения о ценах на гибридные подключения см. здесь: [Служебная шина — цены][sbpricing].

## <a name="hybrid-connection-manager"></a>Hybrid Connection Manager ##

В порядке для гибридных подключений toowork необходимо агента ретрансляции в сети hello, на котором размещена конечной точки гибридного подключения.  Этот агент ретрансляции называется hello диспетчер гибридного подключения (HCM).  Это средство можно загрузить из hello **сетевые подключения > настроить конечные точки гибридного подключения** пользовательского интерфейса, доступных из приложения в hello [портал Azure][portal].  

Данный инструмент работает в Windows Server 2008 R2 и более поздних версиях Windows.  После установки hello HCM запускается как служба.  Эта служба подключается ретрансляции служебной шины tooAzure основании hello настроить конечные точки.  Hello соединения из hello HCM, исходящие tooports 80 и 443.    

Hello HCM имеет tooconfigure пользовательского интерфейса его.  После hello установлен HCM можно загружать hello пользовательского интерфейса, выполнив hello HybridConnectionManagerUi.exe, находящийся в каталоге установки hello диспетчер гибридного подключения.  Кроме того, его легко вызвать в Windows 10, введя в поле поиска *Hybrid Connection Manager UI*.  

После запуска пользовательского интерфейса HCM hello hello первое, что вы см.: таблицы, где перечислены все hello гибридных подключений, настроенных с помощью этого экземпляра hello HCM.  Если вы хотите toomake любые изменения, необходимо будет tooauthenticate с Azure. 

tooadd одного или нескольких гибридных подключений tooyour HCM:

1. Запуск hello HCM пользовательского интерфейса
1. Щелкните "Configure another hybrid connection" (Настроить новое гибридное подключение). ![][8]

1. Войдите в систему, используя учетную запись Azure.
1. Выберите подписку.
1. Щелкните по hello гибридные подключения нужно это toorelay HCM![][9]

1. Щелкните Сохранить

На этом этапе вы увидите hello гибридных подключений, которые добавлены.  Можно также щелкнуть hello настроен гибридного подключения и см. подробные сведения о соединении hello.

![][10]

HCM toobe может toosupport hello гибридных подключений может быть сконфигурирован с он должен:

- TCP tooAzure доступ через порты 80 и 443
- Конечная точка подключения гибридного toohello доступа TCP
- возможность toodo DNS просмотров на узле конечной точки hello и пространство имен служебной шины azure hello

Hello HCM поддерживает новые гибридные подключения как, так и старые hello гибридные подключения BizTalk.

### <a name="redundancy"></a>Избыточность ###

Каждый экземпляр HCM может поддерживать несколько гибридных подключений.  Кроме того, любое заданное гибридное подключение может поддерживаться несколькими HCM.  поведение по умолчанию Hello — tooround перебором трафик распределяется между hello настройки HCMs для любой заданной конечной точкой.  Если требуется обеспечить высокий уровень доступности гибридных подключений из сети, просто создайте несколько экземпляров HCM на разных компьютерах. 

### <a name="manually-adding-a-hybrid-connection"></a>Добавление гибридного подключения вручную ###

При желании кого-либо за пределами вашей подписки toohost HCM экземпляр данного гибридного подключения, можно использовать совместно с их hello строка подключения шлюза hello гибридного подключения.  Это можно увидеть в свойствах hello гибридного подключения в hello [портал Azure][portal]. toouse строковых, щелкните hello **вручную настроить** кнопку в hello HCM и вставьте в строке подключения шлюза hello.


## <a name="troubleshooting"></a>Устранение неполадок ##

При Настройка гибридное подключение с запущенным приложением и имеется по крайней мере один HCM с этой гибридного подключения настроены, а затем будет иметь состояние hello **подключен** hello портала.  Если нет слова **подключен** это означает, что приложение не работает или не удается подключиться к HCM out tooAzure на порты 80 и 443.  

Hello первичной, клиенты не могут подключиться tootheir конечной точки, поскольку конечная точка hello указан с помощью IP-адрес вместо имени DNS.  Если приложение не может связаться с требуемой hello и используется IP-адрес, переключение toousing DNS-имени, который действителен на узле hello hello HCM запущенным.  Другие вещи toocheck являются надлежащее разрешение, hello DNS-имя узла hello, где hello HCM работает и что отсутствует связь с узла hello hello HCM запущенным конечной точки toohello гибридного подключения.  

Доступно средство в hello службы приложений, который может быть вызван из консоли hello, называется tcpping.  Это средство может сообщить, если конечной точки TCP tooa доступа, но не показывает, при наличии конечной точки подключения для гибридного tooa доступа.  При использовании в консоли hello к конечной точке гибридного подключения успешно выполненная команда ping только сообщает о наличии гибридного подключения, настроенного для приложения, использующего комбинации узла: порт.  

## <a name="biztalk-hybrid-connections"></a>Гибридные подключения BizTalk ##

Отключение созданий toofurther гибридное подключение BizTalk был закрыт Hello старые возможности гибридного подключения BizTalk.  Можно продолжить использование ранее существовавших гибридного подключения BizTalk вместе со своими приложениями, но необходимо перенести toohello новой службы.  Среди hello в новую службу hello поверх версии BizTalk hello имеет следующие преимущества.

- не требуется дополнительная учетная запись BizTalk;
- используется протокол TLS 1.2 вместо TLS 1.0, как в гибридных подключениях BizTalk;
- Обмен данными через порты 80 и 443, используя tooreach имя DNS Azure, а не IP-адреса и широкий набор дополнительных является другие порты.  

tooadd приложении tooyour подключения BizTalk гибридного приложения перейдите tooyour в hello [портал Azure] [ portal] и нажмите кнопку **сетевые подключения > настроить конечные точки гибридного подключения**.  В гибридных подключений hello классический таблицы выберите **добавить классический гибридное подключение**.  Вы увидите список гибридных подключений BizTalk.  


<!--Image references-->
[1]: ./media/app-service-hybrid-connections/hybridconn-connectiondiagram.png
[2]: ./media/app-service-hybrid-connections/hybridconn-portal.png
[3]: ./media/app-service-hybrid-connections/hybridconn-addhc.png
[4]: ./media/app-service-hybrid-connections/hybridconn-createhc.png
[5]: ./media/app-service-hybrid-connections/hybridconn-properties.png
[6]: ./media/app-service-hybrid-connections/hybridconn-aspproperties.png
[7]: ./media/app-service-hybrid-connections/hybridconn-hcm.png
[8]: ./media/app-service-hybrid-connections/hybridconn-hcmadd.png
[9]: ./media/app-service-hybrid-connections/hybridconn-hcmadded.png
[10]: ./media/app-service-hybrid-connections/hybridconn-hcmdetails.png

<!--Links-->
[HCService]: http://docs.microsoft.com/azure/service-bus-relay/relay-hybrid-connections-protocol/
[portal]: http://portal.azure.com/
[oldhc]: http://docs.microsoft.com/azure/biztalk-services/integration-hybrid-connection-overview/
[sbpricing]: http://azure.microsoft.com/pricing/details/service-bus/

