---
title: "Использование пользовательского интерфейса Tez в HDInsight на платформе Windows — Azure | Документы Майкрософт"
description: "Узнайте, как отладить задания Tez в HDInsight на платформе Windows с помощью пользовательского интерфейса Tez."
services: hdinsight
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: a55bccb9-7c32-4ff2-b654-213a2354bd5c
ms.service: hdinsight
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 01/17/2017
ms.author: larryfr
ROBOTS: NOINDEX
ms.openlocfilehash: 32f6a12544c05dbf4ac65dd386cd9dea18ca79b3
ms.sourcegitcommit: f8437edf5de144b40aed00af5c52a20e35d10ba1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/03/2017
---
# <a name="use-the-tez-ui-to-debug-tez-jobs-on-windows-based-hdinsight"></a>Отладка заданий Tez в HDInsight на платформе Windows с помощью пользовательского интерфейса Tez
Пользовательский веб-интерфейс Tez является веб-страницей, которую можно использовать для получения общих сведений о заданиях и отладки заданий, использующих Tez в качестве подсистемы выполнения на кластерах HDInsight под управлением Windows. Пользовательский интерфейс Tez позволяет визуализировать задание в виде схемы связанных элементов, выполнять детализацию каждого элемента и получать статистические данные и данные журнала.

> [!IMPORTANT]
> Для выполнения действий, описанных в этом документе, необходим кластер HDInsight под управлением Windows. Linux — это единственная операционная система, используемая для работы с HDInsight 3.4 или более поздних версий. Дополнительные сведения см. в разделе [Приближается дата прекращения сопровождения HDI версии 3.3](hdinsight-component-versioning.md#hdinsight-windows-retirement).

## <a name="prerequisites"></a>Предварительные требования
* Кластер HDInsight на платформе Windows Инструкции по созданию кластера см. в статье [Приступая к работе с HDInsight на платформе Windows](hdinsight-hadoop-tutorial-get-started-windows.md).

  > [!IMPORTANT]
  > Пользовательский интерфейс Tez доступен только на кластерах HDInsight под управлением Windows, созданных после 8 февраля 2016.
  >
  >
* Клиент удаленного рабочего стола под управлением Windows.

## <a name="understanding-tez"></a>Общие сведения о Tez
Tez — это расширяемая платформа для обработки данных в Hadoop, которая характеризуется более высокими скоростями по сравнению с традиционной обработкой MapReduce. Для кластеров HDInsight под управлением Windows это необязательная подсистема, которую можно включить для Hive с помощью следующей команды рамках запроса Hive:

    set hive.execution.engine=tez;

При отправке работы в Tez подсистема создает направленный ациклический граф (DAG), описывающий порядок выполнения действий, необходимых для задания. Отдельные действия называются вершинами и выполняют часть всего задания. Фактическое выполнение работы, описываемое вершиной, называется задачей и может быть распределено среди нескольких узлов кластера.

### <a name="understanding-the-tez-ui"></a>Общие сведения о пользовательском интерфейсе Tez 
Пользовательский интерфейс Tez — это веб-страница, содержащая сведения о процессах, которые выполняются или выполнялись ранее с использованием Tez. Здесь можно просмотреть созданный Tez граф DAG, его распределение по кластерам, а также увидеть счетчики, например с данными о памяти, используемой задачами и вершинами, и сведения об ошибках. Отображаемые сведения могут быть полезными в следующих сценариях.

* Мониторинг длительных процессов, просмотр хода выполнения задач map и reduce.
* Анализ исторических данных успешных или неудачных процессов для получения сведений о причинах сбоев и возможностях улучшения обработки.

## <a name="generate-a-dag"></a>Создание DAG
Пользовательский интерфейс Tez будет содержать данные только в том случае, если задание, которое использует подсистему Tez, выполняется в данный момент или было выполнено ранее. Простые запросы Hive обычно можно разрешить без использования Tez, однако эта подсистема потребуется для работы с более сложными запросами, которые выполняют фильтрацию, группировку, упорядочение, соединения и т. д.

Приведенные ниже действия предназначены для запуска запроса Hive, выполняемого с помощью Tez.

1. В веб-браузере перейдите на страницу с адресом https://CLUSTERNAME.azurehdinsight.net, где **CLUSTERNAME** — имя кластера HDInsight.
2. В меню в верхней части страницы выберите **Hive Editor** (Редактор Hive). Появится страница со следующим примером запроса:

        Select * from hivesampletable

    Сотрите пример запроса и замените его следующим:

        set hive.execution.engine=tez;
        select market, state, country from hivesampletable where deviceplatform='Android' group by market, country, state;
3. Нажмите кнопку **Отправить**. В разделе **Job Session** (Сеанс задания) в нижней части страницы будет отображаться состояние запроса. После изменения состояния на **Завершено** щелкните ссылку **Просмотреть сведения**, чтобы просмотреть результаты. **Выходные данные задания** должны иметь вид, аналогичный приведенному ниже:

        en-GB   Hessen      Germany
        en-GB   Kingston    Jamaica
        en-GB   Nairobi Area    Kenya

## <a name="use-the-tez-ui"></a>Использование пользовательского интерфейса Tez
> [!NOTE]
> Пользовательский интерфейс Tez доступен только с рабочего стола головных узлов кластера, поэтому для подключения к этим узлам необходимо использовать удаленный рабочий стол.
>
>

1. На [портале Azure](https://portal.azure.com)выберите свой кластер HDInsight. В верхней части колонки HDInsight щелкните значок **Удаленный рабочий стол**. Появится колонка удаленного рабочего стола.

    ![Значок удаленного рабочего стола](./media/hdinsight-debug-tez-ui/remotedesktopicon.png)
2. В колонке "Удаленный рабочий стол" щелкните **Подключить**, чтобы подключиться к головному узлу кластера. При появлении запроса используйте имя пользователя удаленного рабочего стола и пароль для кластера, чтобы проверить подлинность подключения.

    ![Значок подключения к удаленному рабочему столу](./media/hdinsight-debug-tez-ui/remotedesktopconnect.png)

   > [!NOTE]
   > Если подключение к удаленному рабочему столу не включено, укажите имя пользователя, пароль и дату окончания срока действия, а затем выберите **Включить**, чтобы включить подключение. После его включения выполните предыдущие шаги для подключения к удаленному рабочему столу.
   >
   >
3. Затем на удаленном рабочем столе откройте Internet Explorer, щелкните значок шестеренки в правом верхнем углу браузера и выберите **Параметры режима представления совместимости**.
4. В нижней части **Параметры просмотра в режиме представления совместимости** снимите флажок **Отображать сайты интрасети в режиме совместимости** и **Использовать списки совместимости Майкрософт**, а затем нажмите кнопку **Закрыть**.
5. В Internet Explorer перейдите по адресу http://headnodehost:8188/tezui/#/. Отобразится веб-интерфейс Tez.

    ![Пользовательский интерфейс Tez](./media/hdinsight-debug-tez-ui/tezui.png)

    После загрузки пользовательского интерфейса Tez вы увидите список DAG, которые работают в данный момент или работали в кластере. В представлении по умолчанию находятся такие столбцы, как "Имя Dag", "ИД", "Отправитель", "Состояние", "Время начала", "Время окончания", "Продолжительность", "ИД приложения" и "Очередь". Чтобы добавить дополнительные столбцы, воспользуйтесь значком шестеренки в правом углу страницы.

    Если у вас имеется только одна запись, она будет использоваться для запроса, выполненного в предыдущем разделе. При наличии нескольких записей можно выполнить поиск, введя условие поиска в полях над DAG и нажав клавишу **ВВОД**.
6. Выберите **Dag Name** (Имя Dag) для самой последней записи DAG. Появятся сведения о DAG, а также возможность скачивания ZIP-архива JSON-файлов, содержащих информацию о DAG.

    ![Сведения о DAG](./media/hdinsight-debug-tez-ui/dagdetails.png)
7. Над разделом **DAG Details** (Сведения о DAG) находится несколько ссылок для отображения сведений о DAG.

   * **Счетчики DAG** — отображение сведений о счетчиках для этого DAG.
   * **Графическое представление** — отображение графического представления этого DAG.
   * **Все вершины** — отображение списка вершин в этом DAG.
   * **Все задачи** — отображение списка задач для всех вершин в этом DAG.
   * **Все попытки выполнения задач** — отображение сведений о попытках выполнения задач для этого DAG.

     > [!NOTE]
     > При просмотре столбцов "Вершины", "Задачи" и TaskAttempts (Попытки выполнения задач) обратите внимание на ссылки для просмотра **счетчиков** и **просмотра или загрузки журналов** для каждой строки.
     >
     >

     Если при выполнении задания произошел сбой, в столбце "Сведения о DAG" будет отображаться состояние FAILED (Ошибка), а также ссылки на сведения о неудачной задаче. Под сведениями о DAG будут отображаться диагностические данные.
8. Выберите **Графическое представление** в соответствующем поле. Появится графическое представление DAG. Помещайте указатель мыши над каждой вершиной в представлении, чтобы получить о ней сведения.

    ![Графическое представление](./media/hdinsight-debug-tez-ui/dagdiagram.png)
9. Если щелкнуть вершину, загрузятся **сведения о вершине** для этого элемента. Щелкните вершину **Map 1**, чтобы вывести подробные сведения для этого элемента. Щелкните **Подтвердить** для подтверждения навигации.

    ![сведения о вершине](./media/hdinsight-debug-tez-ui/vertexdetails.png)
10. Обратите внимание, что в верхней части страницы находятся ссылки, связанные с вершинами и задачами.

    > [!NOTE]
    > Эту страницу также можно открыть другим способом: вернитесь к столбцу **DAG Details** (Сведения о DAG), выберите **Vertex Details** (Сведения о вершине), а затем вершину **Map 1**.
    >
    >

    * **Счетчики вершины** — отображение сведений о счетчиках для этой вершины.
    * **Задачи** — отображение задач для этой вершины.
    * **Попытки выполнения задач** — отображение сведений о попытках выполнения задач для этой вершины.
    * **Источники и приемники** — отображение источников и приемников данных для этой вершины.

      > [!NOTE]
      > Как и в предыдущем меню, можно прокрутить отображение столбцов "Задачи", "Попытки выполнения задач" и "Источники и приемники" для отображения ссылок на дополнительные сведения для каждого элемента.
      >
      >
11. Выберите **Задачи**, а затем элемент с именем **00_000000**. Откроется окно **Сведения о задаче** для этой задачи. В этом окне можно просмотреть значения полей **Task Counters** (Счетчики задачи) и **Task Attempts** (Попытки выполнения задачи).

    ![Сведения о задаче](./media/hdinsight-debug-tez-ui/taskdetails.png)

## <a name="next-steps"></a>Дальнейшие действия
Теперь, когда вы поняли, как работать с представлением Tez, узнайте больше об [использовании Hive в HDInsight](hadoop/hdinsight-use-hive.md).

Более подробные технические сведения о Tez см. на [странице Tez на сайте Hortonworks](http://hortonworks.com/hadoop/tez/).
