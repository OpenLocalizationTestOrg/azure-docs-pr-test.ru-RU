---
title: "aaaSpark бизнес-Аналитики с помощью средств визуализации данных в Azure HDInsight | Документы Microsoft"
description: "Используйте средства визуализации данных для аналитики с помощью Apache Spark BI в кластерах HDInsight"
keywords: "apache spark bi, spark bi, визуализация данных spark, бизнес-аналитика spark"
services: hdinsight
documentationcenter: 
author: nitinme
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 1448b536-9bc8-46bc-bbc6-d7001623642a
ms.service: hdinsight
ms.custom: hdinsightactive,hdiseo17may2017
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: nitinme
ms.openlocfilehash: ba4bfff737ce80ffca5c24f1c2c82a1447f467fb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="apache-spark-bi-using-data-visualization-tools-with-azure-hdinsight"></a><span data-ttu-id="f8656-104">Использование средств визуализации данных с помощью Apache Spark BI в Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="f8656-104">Apache Spark BI using data visualization tools with Azure HDInsight</span></span>

<span data-ttu-id="f8656-105">Узнайте, как визуализации данных toouse средств, таких как Power BI и Tableau tooanalyze необработанные образец набора данных с помощью Apache Spark бизнес-Аналитики в кластерах HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f8656-105">Learn how toouse data visualization tools such as Power BI and Tableau tooanalyze a raw sample data set using Apache Spark BI on HDInsight clusters.</span></span>

> [!NOTE]
> <span data-ttu-id="f8656-106">Возможности подключения к инструментам бизнес-аналитики, описываемые в этой статье, не поддерживаются в Spark 2.1 в Azure HDInsight 3.6 (предварительная версия).</span><span class="sxs-lookup"><span data-stu-id="f8656-106">Connectivity with BI tools described in this article is not supported on Spark 2.1 on Azure HDInsight 3.6 Preview.</span></span> <span data-ttu-id="f8656-107">Поддерживается только Spark версий 1.6 и 2.0 (HDInsight 3.4 и HDInsight 3.5 соответственно).</span><span class="sxs-lookup"><span data-stu-id="f8656-107">Only Spark versions 1.6 and 2.0 (HDInsight 3.4, 3.5 respectively) are supported.</span></span>
>

<span data-ttu-id="f8656-108">Это руководство также доступно в виде записной книжки Jupyter в кластере HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="f8656-108">This tutorial is also available as a Jupyter notebook on an HDInsight Spark cluster.</span></span> <span data-ttu-id="f8656-109">взаимодействие с ноутбука Hello позволяет выполнять фрагменты кода Python hello из записной книжки hello сам.</span><span class="sxs-lookup"><span data-stu-id="f8656-109">hello notebook experience lets you run hello Python snippets from hello notebook itself.</span></span> <span data-ttu-id="f8656-110">Учебник hello tooperform в записной книжке создать кластер Spark, запустить записной книжке Jupyter (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), и запустите записной книжки hello **средства используйте бизнес-Аналитики с Apache Spark в HDInsight.ipynb** под hello **Python**  папки.</span><span class="sxs-lookup"><span data-stu-id="f8656-110">tooperform hello tutorial from within a notebook, create a Spark cluster, launch a Jupyter notebook (`https://CLUSTERNAME.azurehdinsight.net/jupyter`), and then run hello notebook **Use BI tools with Apache Spark on HDInsight.ipynb** under hello **Python** folder.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="f8656-111">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="f8656-111">Prerequisites</span></span>

* <span data-ttu-id="f8656-112">Кластер Apache Spark в HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f8656-112">An Apache Spark cluster on HDInsight.</span></span> <span data-ttu-id="f8656-113">Инструкции см. в статье [Начало работы. Создание кластера Apache Spark в HDInsight на платформе Linux и выполнение интерактивных запросов с помощью SQL Spark](hdinsight-apache-spark-jupyter-spark-sql.md).</span><span class="sxs-lookup"><span data-stu-id="f8656-113">For instructions, see [Create Apache Spark clusters in Azure HDInsight](hdinsight-apache-spark-jupyter-spark-sql.md).</span></span>


## <span data-ttu-id="f8656-114"><a name="hivetable"></a>Подготовка данных для визуализации данных Spark</span><span class="sxs-lookup"><span data-stu-id="f8656-114"><a name="hivetable"></a>Prepare data for Spark data visualization</span></span>

<span data-ttu-id="f8656-115">В этом разделе мы используем hello [Jupyter](https://jupyter.org) записной книжки из заданий toorun кластера HDInsight Spark, которые обрабатывают необработанные образцы данных и сохраните его в виде таблицы.</span><span class="sxs-lookup"><span data-stu-id="f8656-115">In this section, we use hello [Jupyter](https://jupyter.org) notebook from an HDInsight Spark cluster toorun jobs that process your raw sample data and save it as a table.</span></span> <span data-ttu-id="f8656-116">Образец Hello данных является CSV-файла (hvac.csv) доступен во всех кластерах по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="f8656-116">hello sample data is a .csv file (hvac.csv) available on all clusters by default.</span></span> <span data-ttu-id="f8656-117">После сохранения данных как таблицу в следующем разделе hello мы используйте таблицу toohello tooconnect средств бизнес-Аналитики и выполнять визуализации данных.</span><span class="sxs-lookup"><span data-stu-id="f8656-117">Once your data is saved as a table, in hello next section we use BI tools tooconnect toohello table and perform data visualizations.</span></span>

> [!NOTE]
> <span data-ttu-id="f8656-118">При выполнении hello шаги в этой статье после выполнения инструкций hello в [выполнения интерактивных запросов на кластере Spark в HDInsight](hdinsight-apache-spark-load-data-run-query.md), можно пропустить tooStep 8 ниже.</span><span class="sxs-lookup"><span data-stu-id="f8656-118">If you are performing hello steps in this article after completing hello instructions in [Run interactive queries on an HDInsight Spark cluster](hdinsight-apache-spark-load-data-run-query.md), you can skip tooStep 8 below.</span></span>
>

1. <span data-ttu-id="f8656-119">Из hello [портал Azure](https://portal.azure.com/), hello начальной панели, щелкните плитку hello свой кластер Spark (Если вы закрепили toohello начальной панели).</span><span class="sxs-lookup"><span data-stu-id="f8656-119">From hello [Azure portal](https://portal.azure.com/), from hello startboard, click hello tile for your Spark cluster (if you pinned it toohello startboard).</span></span> <span data-ttu-id="f8656-120">Вы также можете переходить tooyour кластера в списке **просмотреть все** > **кластеров HDInsight**.</span><span class="sxs-lookup"><span data-stu-id="f8656-120">You can also navigate tooyour cluster under **Browse All** > **HDInsight Clusters**.</span></span>   

2. <span data-ttu-id="f8656-121">Из колонки кластера Spark hello, нажмите кнопку **мониторинга кластера**, а затем нажмите кнопку **книжке Jupyter**.</span><span class="sxs-lookup"><span data-stu-id="f8656-121">From hello Spark cluster blade, click **Cluster Dashboard**, and then click **Jupyter Notebook**.</span></span> <span data-ttu-id="f8656-122">При появлении запроса введите учетные данные администратора hello hello кластера.</span><span class="sxs-lookup"><span data-stu-id="f8656-122">If prompted, enter hello admin credentials for hello cluster.</span></span>

   > [!NOTE]
   > <span data-ttu-id="f8656-123">Также может достигать hello книжке Jupyter для кластера, открыв hello следующий URL-адрес в браузере.</span><span class="sxs-lookup"><span data-stu-id="f8656-123">You may also reach hello Jupyter Notebook for your cluster by opening hello following URL in your browser.</span></span> <span data-ttu-id="f8656-124">Замените **CLUSTERNAME** с hello имя кластера:</span><span class="sxs-lookup"><span data-stu-id="f8656-124">Replace **CLUSTERNAME** with hello name of your cluster:</span></span>
   >
   > `https://CLUSTERNAME.azurehdinsight.net/jupyter`
   >
   >

3. <span data-ttu-id="f8656-125">Создайте записную книжку.</span><span class="sxs-lookup"><span data-stu-id="f8656-125">Create a notebook.</span></span> <span data-ttu-id="f8656-126">Щелкните **Создать**, а затем выберите **PySpark**.</span><span class="sxs-lookup"><span data-stu-id="f8656-126">Click **New**, and then click **PySpark**.</span></span>

    <span data-ttu-id="f8656-127">![Создание записной книжки Jupyter для Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Создание записной книжки Jupyter для Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-127">![Create a Jupyter notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/create-jupyter-notebook-for-spark-bi.png "Create a Jupyter notebook for Apache Spark BI")</span></span>

4. <span data-ttu-id="f8656-128">Создается и открывается с именем hello Untitled.pynb новый блокнот.</span><span class="sxs-lookup"><span data-stu-id="f8656-128">A new notebook is created and opened with hello name Untitled.pynb.</span></span> <span data-ttu-id="f8656-129">Щелкните имя записной книжки hello вверху hello и введите понятное имя.</span><span class="sxs-lookup"><span data-stu-id="f8656-129">Click hello notebook name at hello top, and enter a friendly name.</span></span>

    <span data-ttu-id="f8656-130">![Введите имя для ноутбука hello для бизнес-Аналитики Apache Spark](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "укажите имя для ноутбука hello для бизнес-Аналитики Apache Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-130">![Provide a name for hello notebook for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/jupyter-notebook-name-for-spark-bi.png "Provide a name for hello notebook for Apache Spark BI")</span></span>

5. <span data-ttu-id="f8656-131">Поскольку вы создали записной книжке с использованием ядра PySpark hello, вы не обязательно toocreate контекстов явным образом.</span><span class="sxs-lookup"><span data-stu-id="f8656-131">Because you created a notebook using hello PySpark kernel, you do not need toocreate any contexts explicitly.</span></span> <span data-ttu-id="f8656-132">контексты Spark и Hive Hello автоматически создаются при выполнении первой ячейке кода hello.</span><span class="sxs-lookup"><span data-stu-id="f8656-132">hello Spark and Hive contexts are automatically created for you when you run hello first code cell.</span></span> <span data-ttu-id="f8656-133">Можно запустить, импортировав hello типы, необходимые для этого сценария.</span><span class="sxs-lookup"><span data-stu-id="f8656-133">You can start by importing hello types required for this scenario.</span></span> <span data-ttu-id="f8656-134">toodo таким образом, поместите курсор hello в ячейке hello и нажмите клавишу **SHIFT + ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="f8656-134">toodo so, place hello cursor in hello cell and press **SHIFT + ENTER**.</span></span>

        from pyspark.sql import *

6. <span data-ttu-id="f8656-135">Загрузите демонстрационные данные во временную таблицу.</span><span class="sxs-lookup"><span data-stu-id="f8656-135">Load sample data into a temporary table.</span></span> <span data-ttu-id="f8656-136">При создании кластера Spark в HDInsight hello образец файла данных **hvac.csv**, является скопированный toohello связанные учетной записи хранилища в группе **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span><span class="sxs-lookup"><span data-stu-id="f8656-136">When you create a Spark cluster in HDInsight, hello sample data file, **hvac.csv**, is copied toohello associated storage account under **\HdiSamples\HdiSamples\SensorSampleData\hvac**.</span></span>

    <span data-ttu-id="f8656-137">В пустой ячейке, вставьте hello следующий фрагмент кода и нажмите клавишу **SHIFT + ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="f8656-137">In an empty cell, paste hello following snippet and press **SHIFT + ENTER**.</span></span> <span data-ttu-id="f8656-138">В этом фрагменте регистрирует hello данных в таблицу с именем **кондиционирования**.</span><span class="sxs-lookup"><span data-stu-id="f8656-138">This snippet registers hello data into a table called **hvac**.</span></span>

        # Create an RDD from sample data
        hvacText = sc.textFile("wasb:///HdiSamples/HdiSamples/SensorSampleData/hvac/HVAC.csv")

        # Create a schema for our data
        Entry = Row('Date', 'Time', 'TargetTemp', 'ActualTemp', 'BuildingID')

        # Parse hello data and create a schema
        hvacParts = hvacText.map(lambda s: s.split(',')).filter(lambda s: s[0] != 'Date')
        hvac = hvacParts.map(lambda p: Entry(str(p[0]), str(p[1]), int(p[2]), int(p[3]), int(p[6])))

        # Infer hello schema and create a table       
        hvacTable = sqlContext.createDataFrame(hvac)
        hvacTable.registerTempTable('hvactemptable')
        dfw = DataFrameWriter(hvacTable)
        dfw.saveAsTable('hvac')

7. <span data-ttu-id="f8656-139">Убедитесь, что таблица hello была успешно создана.</span><span class="sxs-lookup"><span data-stu-id="f8656-139">Verify that hello table was successfully created.</span></span> <span data-ttu-id="f8656-140">Можно использовать hello `%%sql` магическая запросов Hive toorun напрямую.</span><span class="sxs-lookup"><span data-stu-id="f8656-140">You can use hello `%%sql` magic toorun Hive queries directly.</span></span> <span data-ttu-id="f8656-141">Дополнительные сведения о hello `%%sql` magic и другие доступные ядра PySpark hello, magics. в разделе [ядер, доступных на записные книжки Jupyter с кластерами Spark HDInsight](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span><span class="sxs-lookup"><span data-stu-id="f8656-141">For more information about hello `%%sql` magic, and other magics available with hello PySpark kernel, see [Kernels available on Jupyter notebooks with Spark HDInsight clusters](hdinsight-apache-spark-jupyter-notebook-kernels.md#parameters-supported-with-the-sql-magic).</span></span>

        %%sql
        SHOW TABLES

    <span data-ttu-id="f8656-142">Вы увидите примерно следующие выходные данные:</span><span class="sxs-lookup"><span data-stu-id="f8656-142">You see an output like shown below:</span></span>

        +---------------+-------------+
        |tableName      |isTemporary  |
        +---------------+-------------+
        |hvactemptable  |true        |
        |hivesampletable|false        |
        |hvac           |false        |
        +---------------+-------------+

    <span data-ttu-id="f8656-143">Здравствуйте, только таблицы, которые имеют значение false в группе hello **isTemporary** столбца — таблицы hive, которые хранятся в метахранилище hello и может осуществляться из средств бизнес-Аналитики hello.</span><span class="sxs-lookup"><span data-stu-id="f8656-143">Only hello tables that have false under hello **isTemporary** column are hive tables that are stored in hello metastore and can be accessed from hello BI tools.</span></span> <span data-ttu-id="f8656-144">В этом учебнике мы соединение toohello **кондиционирования** созданную таблицу.</span><span class="sxs-lookup"><span data-stu-id="f8656-144">In this tutorial, we connect toohello **hvac** table we created.</span></span>

8. <span data-ttu-id="f8656-145">Убедитесь, что эта таблица hello содержит hello предназначен данных.</span><span class="sxs-lookup"><span data-stu-id="f8656-145">Verify that hello table contains hello intended data.</span></span> <span data-ttu-id="f8656-146">В пустой ячейке в записной книжке hello, скопируйте следующие hello фрагмент и нажмите клавишу **SHIFT + ВВОД**.</span><span class="sxs-lookup"><span data-stu-id="f8656-146">In an empty cell in hello notebook, copy hello following snippet and press **SHIFT + ENTER**.</span></span>

        %%sql
        SELECT * FROM hvac LIMIT 10

9. <span data-ttu-id="f8656-147">Завершение работы toorelease hello hello записной книжки ресурсы.</span><span class="sxs-lookup"><span data-stu-id="f8656-147">Shut down hello notebook toorelease hello resources.</span></span> <span data-ttu-id="f8656-148">toodo так, hello **файл** меню на ноутбуке hello щелкните **закрыть и остановить**.</span><span class="sxs-lookup"><span data-stu-id="f8656-148">toodo so, from hello **File** menu on hello notebook, click **Close and Halt**.</span></span>

## <span data-ttu-id="f8656-149"><a name="powerbi"></a>Использование Power BI для визуализации данных Spark</span><span class="sxs-lookup"><span data-stu-id="f8656-149"><a name="powerbi"></a>Use Power BI for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="f8656-150">Этот раздел применим только к Spark 1.6 в HDInsight 3.4 и к Spark 2.0 в HDInsight 3.5.</span><span class="sxs-lookup"><span data-stu-id="f8656-150">This section is applicable only for Spark 1.6 on HDInsight 3.4 and Spark 2.0 on HDInsight 3.5.</span></span>
>
>

<span data-ttu-id="f8656-151">После сохранения данных hello как таблицу, можно использовать Power BI tooconnect toohello данных и их визуализации toocreate отчеты, панели мониторинга и т. д.</span><span class="sxs-lookup"><span data-stu-id="f8656-151">Once you have saved hello data as a table, you can use Power BI tooconnect toohello data and visualize it toocreate reports, dashboards, etc.</span></span>

1. <span data-ttu-id="f8656-152">Убедитесь, что у вас есть доступ tooPower бизнес-Аналитики.</span><span class="sxs-lookup"><span data-stu-id="f8656-152">Make sure you have access tooPower BI.</span></span> <span data-ttu-id="f8656-153">Вы можете оформить подписку на бесплатную предварительную версию Power BI на сайте [http://www.powerbi.com/](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="f8656-153">You can get a free preview subscription of Power BI from [http://www.powerbi.com/](http://www.powerbi.com/).</span></span>

2. <span data-ttu-id="f8656-154">Войдите в слишком[Power BI](http://www.powerbi.com/).</span><span class="sxs-lookup"><span data-stu-id="f8656-154">Sign in too[Power BI](http://www.powerbi.com/).</span></span>

3. <span data-ttu-id="f8656-155">Hello нижней части левой панели hello, щелкните **получение данных**.</span><span class="sxs-lookup"><span data-stu-id="f8656-155">From hello bottom of hello left pane, click **Get Data**.</span></span>

4. <span data-ttu-id="f8656-156">На hello **получить данные** в разделе **Импорт или подключение tooData**, для **баз данных**, нажмите кнопку **получить**.</span><span class="sxs-lookup"><span data-stu-id="f8656-156">On hello **Get Data** page, under **Import or Connect tooData**, for **Databases**, click **Get**.</span></span>

    <span data-ttu-id="f8656-157">![Получение данных в Power BI для Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Получение данных в Power BI для Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-157">![Get data into Power BI for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-import-data-power-bi.png "Get data into Power BI for Apache Spark BI")</span></span>

5. <span data-ttu-id="f8656-158">На следующем экране приветствия щелкните **Spark на Azure HDInsight** и нажмите кнопку **Connect**.</span><span class="sxs-lookup"><span data-stu-id="f8656-158">On hello next screen, click **Spark on Azure HDInsight** and then click **Connect**.</span></span> <span data-ttu-id="f8656-159">При появлении запроса введите URL-адрес кластера hello (`mysparkcluster.azurehdinsight.net`) и tooconnect toohello hello учетные данные кластера.</span><span class="sxs-lookup"><span data-stu-id="f8656-159">When prompted, enter hello cluster URL (`mysparkcluster.azurehdinsight.net`) and hello credentials tooconnect toohello cluster.</span></span>

    <span data-ttu-id="f8656-160">![Подключение tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "подключения tooApache Spark бизнес-Аналитики")</span><span class="sxs-lookup"><span data-stu-id="f8656-160">![Connect tooApache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-apache-spark-bi.png "Connect tooApache Spark BI")</span></span>

    <span data-ttu-id="f8656-161">После установления соединения hello Power BI начинается Импорт данных из hello кластера Spark в HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f8656-161">After hello connection is established, Power BI starts importing data from hello Spark cluster on HDInsight.</span></span>

6. <span data-ttu-id="f8656-162">Power BI импортирует данные hello и добавляет **Spark** набора данных в группе hello **наборы данных** заголовок.</span><span class="sxs-lookup"><span data-stu-id="f8656-162">Power BI imports hello data and adds a **Spark** dataset under hello **Datasets** heading.</span></span> <span data-ttu-id="f8656-163">Выберите набор данных hello tooopen новые данные hello toovisualize листа.</span><span class="sxs-lookup"><span data-stu-id="f8656-163">Click hello data set tooopen a new worksheet toovisualize hello data.</span></span> <span data-ttu-id="f8656-164">Можно также сохранить hello листа в виде отчета.</span><span class="sxs-lookup"><span data-stu-id="f8656-164">You can also save hello worksheet as a report.</span></span> <span data-ttu-id="f8656-165">лист, из hello toosave **файл** меню, нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="f8656-165">toosave a worksheet, from hello **File** menu, click **Save**.</span></span>

    <span data-ttu-id="f8656-166">![Плитка Apache Spark BI на информационной панели Power BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Плитка Apache Spark BI на информационной панели Power BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-166">![Apache Spark BI tile on Power BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-tile-dashboard.png "Apache Spark BI tile on Power BI dashboard")</span></span>
7. <span data-ttu-id="f8656-167">Обратите внимание, что hello **поля** списке справа hello перечислены hello **кондиционирования** таблицы, созданной ранее.</span><span class="sxs-lookup"><span data-stu-id="f8656-167">Notice that hello **Fields** list on hello right lists hello **hvac** table you created earlier.</span></span> <span data-ttu-id="f8656-168">Разверните hello toosee hello поля в таблице hello, как определено ранее в записной книжке.</span><span class="sxs-lookup"><span data-stu-id="f8656-168">Expand hello table toosee hello fields in hello table, as you defined in notebook earlier.</span></span>

      <span data-ttu-id="f8656-169">![Список таблиц на панели мониторинга Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "Список таблиц на панели мониторинга Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-169">![List tables on Apache Spark BI dashboard](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-display-tables.png "List tables on Apache Spark BI dashboard")</span></span>

8. <span data-ttu-id="f8656-170">Построение визуализации tooshow hello расхождение целевой температуры и фактический температуры для каждой сборки.</span><span class="sxs-lookup"><span data-stu-id="f8656-170">Build a visualization tooshow hello variance between target temperature and actual temperature for each building.</span></span> <span data-ttu-id="f8656-171">Выберите данные yoru toovisualize, **диаграмма с областями** (показано красным прямоугольником).</span><span class="sxs-lookup"><span data-stu-id="f8656-171">toovisualize yoru data, select **Area Chart** (shown in red box).</span></span> <span data-ttu-id="f8656-172">toodefine hello оси, и перетащите hello **BuildingID** под **оси**, и **ActualTemp**/**TargetTemp** поля в группе **значение**.</span><span class="sxs-lookup"><span data-stu-id="f8656-172">toodefine hello axis, drag-and-drop hello **BuildingID** field under **Axis**, and **ActualTemp**/**TargetTemp** fields under **Value**.</span></span>

    <span data-ttu-id="f8656-173">![Создание визуализаций данных Spark с помощью Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Создание визуализаций данных Spark с помощью Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-173">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-add-value-columns.png "Create Spark data visualizations using Apache Spark BI")</span></span>

9. <span data-ttu-id="f8656-174">По умолчанию hello визуализации показывает сумму hello **ActualTemp** и **TargetTemp**.</span><span class="sxs-lookup"><span data-stu-id="f8656-174">By default hello visualization shows hello sum for **ActualTemp** and **TargetTemp**.</span></span> <span data-ttu-id="f8656-175">Здравствуйте, оба поля, из раскрывающегося списка hello рекомендуется выбрать **среднее** tooget температуру целевой для обоих зданий и фактическое среднее.</span><span class="sxs-lookup"><span data-stu-id="f8656-175">For both hello fields, from hello drop-down, select **Average** tooget an average of actual and target temperatures for both buildings.</span></span>

    <span data-ttu-id="f8656-176">![Создание визуализаций данных Spark с помощью Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Создание визуализаций данных Spark с помощью Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-176">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-average-of-values.png "Create Spark data visualizations using Apache Spark BI")</span></span>

10. <span data-ttu-id="f8656-177">Визуализация данных должно быть примерно toohello один на снимке экрана приветствия.</span><span class="sxs-lookup"><span data-stu-id="f8656-177">Your data visualization should be similar toohello one in hello screenshot.</span></span> <span data-ttu-id="f8656-178">Переместите указатель мыши hello визуализации tooget всплывающие подсказки с соответствующими данными.</span><span class="sxs-lookup"><span data-stu-id="f8656-178">Move your cursor over hello visualization tooget tool tips with relevant data.</span></span>

    <span data-ttu-id="f8656-179">![Создание визуализаций данных Spark с помощью Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Создание визуализаций данных Spark с помощью Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-179">![Create Spark data visualizations using Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/apache-spark-bi-area-graph.png "Create Spark data visualizations using Apache Spark BI")</span></span>

11. <span data-ttu-id="f8656-180">Нажмите кнопку **Сохранить** из hello верхнего меню и введите имя отчета.</span><span class="sxs-lookup"><span data-stu-id="f8656-180">Click **Save** from hello top menu and provide a report name.</span></span> <span data-ttu-id="f8656-181">Можно также закрепить hello visual.</span><span class="sxs-lookup"><span data-stu-id="f8656-181">You can also pin hello visual.</span></span> <span data-ttu-id="f8656-182">При закреплении визуализации хранится на панели мониторинга для отслеживания hello последние значения с одного взгляда.</span><span class="sxs-lookup"><span data-stu-id="f8656-182">When you pin a visualization, it is stored on your dashboard so you can track hello latest value at a glance.</span></span>

   <span data-ttu-id="f8656-183">Можно добавить столько визуализации для hello того же набора данных и закреплять их toohello панель мониторинга для моментального снимка данных.</span><span class="sxs-lookup"><span data-stu-id="f8656-183">You can add as many visualizations as you want for hello same dataset and pin them toohello dashboard for a snapshot of your data.</span></span> <span data-ttu-id="f8656-184">Кроме того кластеры Spark на HDInsight будут подключенных tooPower бизнес-Аналитики с помощью прямого подключения.</span><span class="sxs-lookup"><span data-stu-id="f8656-184">Also, Spark clusters on HDInsight are connected tooPower BI with direct connect.</span></span> <span data-ttu-id="f8656-185">Это гарантирует, что Power BI всегда иметь hello большинство актуальные данные из кластера, поэтому нет необходимости tooschedule обновления для набора данных hello.</span><span class="sxs-lookup"><span data-stu-id="f8656-185">This ensures that Power BI always has hello most up-to-date data from your cluster so you do not need tooschedule refreshes for hello dataset.</span></span>

## <span data-ttu-id="f8656-186"><a name="tableau"></a>Использование Tableau Desktop для визуализации данных Spark</span><span class="sxs-lookup"><span data-stu-id="f8656-186"><a name="tableau"></a>Use Tableau Desktop for Spark data visualization</span></span>

> [!NOTE]
> <span data-ttu-id="f8656-187">Этот раздел применим только для кластеров Spark 1.5.2, созданных в Azure HDInsight.</span><span class="sxs-lookup"><span data-stu-id="f8656-187">This section is applicable only for Spark 1.5.2 clusters created in Azure HDInsight.</span></span>
>
>

1. <span data-ttu-id="f8656-188">Установка [Tableau Desktop](http://www.tableau.com/products/desktop) на компьютере hello, где запускается этот учебник Apache Spark бизнес-Аналитики.</span><span class="sxs-lookup"><span data-stu-id="f8656-188">Install [Tableau Desktop](http://www.tableau.com/products/desktop) on hello computer where you are running this Apache Spark BI tutorial.</span></span>

2. <span data-ttu-id="f8656-189">Убедитесь, что на этом компьютере также установлен драйвер ODBC Microsoft Spark.</span><span class="sxs-lookup"><span data-stu-id="f8656-189">Make sure that computer also has Microsoft Spark ODBC driver installed.</span></span> <span data-ttu-id="f8656-190">Можно установить драйвер hello из [здесь](http://go.microsoft.com/fwlink/?LinkId=616229).</span><span class="sxs-lookup"><span data-stu-id="f8656-190">You can install hello driver from [here](http://go.microsoft.com/fwlink/?LinkId=616229).</span></span>

1. <span data-ttu-id="f8656-191">Запустите Tableau Desktop.</span><span class="sxs-lookup"><span data-stu-id="f8656-191">Launch Tableau Desktop.</span></span> <span data-ttu-id="f8656-192">Hello левой панели, из списка hello tooconnect сервера, щелкните **Spark SQL**.</span><span class="sxs-lookup"><span data-stu-id="f8656-192">In hello left pane, from hello list of server tooconnect to, click **Spark SQL**.</span></span> <span data-ttu-id="f8656-193">Если Spark SQL по умолчанию в левой области hello не указывается, его можно найти по щелчку **более серверов**.</span><span class="sxs-lookup"><span data-stu-id="f8656-193">If Spark SQL is not listed by default in hello left pane, you can find it by click **More Servers**.</span></span>
2. <span data-ttu-id="f8656-194">В диалоговое окно «соединение» для hello Spark SQL, вводить значения hello, как показано на снимке экрана приветствия и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="f8656-194">In hello Spark SQL connection dialog box, provide hello values as shown in hello screenshot, and then click **OK**.</span></span>

    <span data-ttu-id="f8656-195">![Кластер tooa Connect для бизнес-Аналитики Apache Spark](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "кластера tooa Connect для бизнес-Аналитики Apache Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-195">![Connect tooa cluster for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/connect-to-tableau-apache-spark-bi.png "Connect tooa cluster for Apache Spark BI")</span></span>

    <span data-ttu-id="f8656-196">Здравствуйте, раскрывающиеся списки проверки подлинности **службы Microsoft Azure HDInsight** в качестве альтернативы только в том случае, если вы установили hello [драйвер Microsoft Spark ODBC](http://go.microsoft.com/fwlink/?LinkId=616229) на компьютере hello.</span><span class="sxs-lookup"><span data-stu-id="f8656-196">hello authentication drop-down lists **Microsoft Azure HDInsight Service** as an option, only if you installed hello [Microsoft Spark ODBC Driver](http://go.microsoft.com/fwlink/?LinkId=616229) on hello computer.</span></span>
3. <span data-ttu-id="f8656-197">На следующем экране hello из hello **схемы** раскрывающийся список, нажмите кнопку hello **найти** значок, а затем щелкните **по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="f8656-197">On hello next screen, from hello **Schema** drop-down, click hello **Find** icon, and then click **default**.</span></span>

    <span data-ttu-id="f8656-198">![Поиск схемы для Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Поиск схемы для Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-198">![Find schema for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-schema-apache-spark-bi.png "Find schema for Apache Spark BI")</span></span>
4. <span data-ttu-id="f8656-199">Для hello **таблицы** щелкните hello **найти** значок снова toolist все hello Hive таблиц, доступных в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="f8656-199">For hello **Table** field, click hello **Find** icon again toolist all hello Hive tables available in hello cluster.</span></span> <span data-ttu-id="f8656-200">Вы увидите hello **кондиционирования** таблицы, созданной ранее с помощью записной книжки hello.</span><span class="sxs-lookup"><span data-stu-id="f8656-200">You should see hello **hvac** table you created earlier using hello notebook.</span></span>

    <span data-ttu-id="f8656-201">![Поиск схемы для Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Поиск схемы для Apache Spark BI")</span><span class="sxs-lookup"><span data-stu-id="f8656-201">![Find table for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-find-table-apache-spark-bi.png "Find table for Apache Spark BI")</span></span>
5. <span data-ttu-id="f8656-202">Перетаскивание hello таблицы toohello верхнем поле на hello вправо.</span><span class="sxs-lookup"><span data-stu-id="f8656-202">Drag and drop hello table toohello top box on hello right.</span></span> <span data-ttu-id="f8656-203">Tableau импортирует данные hello и отображает hello схемы как видно hello красным прямоугольником.</span><span class="sxs-lookup"><span data-stu-id="f8656-203">Tableau imports hello data and displays hello schema as highlighted by hello red box.</span></span>

    <span data-ttu-id="f8656-204">![Добавление таблицы tooTableau для бизнес-Аналитики Apache Spark](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "добавить tooTableau таблиц для бизнес-Аналитики Apache Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-204">![Add tables tooTableau for Apache Spark BI](./media/hdinsight-apache-spark-use-bi-tools/tableau-add-table-apache-spark-bi.png "Add tables tooTableau for Apache Spark BI")</span></span>
6. <span data-ttu-id="f8656-205">Нажмите кнопку hello **Sheet1** вкладку внизу hello слева.</span><span class="sxs-lookup"><span data-stu-id="f8656-205">Click hello **Sheet1** tab at hello bottom left.</span></span> <span data-ttu-id="f8656-206">Сделайте визуализации, показывающую средний целевой hello и фактический температуре все зданий для каждой даты.</span><span class="sxs-lookup"><span data-stu-id="f8656-206">Make a visualization that shows hello average target and actual temperatures for all buildings for each date.</span></span> <span data-ttu-id="f8656-207">Перетащите **даты** и **код здания** слишком**столбцы** и **фактическое Temp**/**Temp целевой**слишком**строк**.</span><span class="sxs-lookup"><span data-stu-id="f8656-207">Drag **Date** and **Building ID** too**Columns** and **Actual Temp**/**Target Temp** too**Rows**.</span></span> <span data-ttu-id="f8656-208">В разделе **метки**выберите **область** toouse область карты для визуализации данных Spark.</span><span class="sxs-lookup"><span data-stu-id="f8656-208">Under **Marks**, select **Area** toouse an area map for Spark data visualization.</span></span>

     <span data-ttu-id="f8656-209">![Добавление полей для визуализации данных Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Добавление полей для визуализации данных Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-209">![Add fields for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-add-fields.png "Add fields for Spark data visualization")</span></span>
7. <span data-ttu-id="f8656-210">По умолчанию показаны поля температуры hello как статистическое выражение.</span><span class="sxs-lookup"><span data-stu-id="f8656-210">By default, hello temperature fields are shown as aggregate.</span></span> <span data-ttu-id="f8656-211">Если вместо этого требуется среднее температуры tooshow hello это можно сделать hello раскрывающемся списке, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="f8656-211">If you want tooshow hello average temperatures instead, you can do so from hello drop-down, as shown below.</span></span>

    <span data-ttu-id="f8656-212">![Получение среднего значения температуры для визуализации данных Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Получение среднего значения температуры для визуализации данных Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-212">![Take average of temperature for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-average-temperature.png "Take average of temperature for Spark data visualization")</span></span>

8. <span data-ttu-id="f8656-213">Можно также super применить температуры сопоставления более hello других tooget лучше понять разницу между цель и фактический температуре.</span><span class="sxs-lookup"><span data-stu-id="f8656-213">You can also super-impose one temperature map over hello other tooget a better feel of difference between target and actual temperatures.</span></span> <span data-ttu-id="f8656-214">Переместите hello мыши toohello углу hello нижней области карты, пока не появиться фигуры дескриптор hello, выделяются в красном круге.</span><span class="sxs-lookup"><span data-stu-id="f8656-214">Move hello mouse toohello corner of hello lower area map till you see hello handle shape highlighted in a red circle.</span></span> <span data-ttu-id="f8656-215">Перетащите toohello карты hello другого сопоставления hello top и выпуска hello мыши при появлении hello фигуры, выделены красным прямоугольником.</span><span class="sxs-lookup"><span data-stu-id="f8656-215">Drag hello map toohello other map on hello top and release hello mouse when you see hello shape highlighted in red rectangle.</span></span>

    <span data-ttu-id="f8656-216">![Слияние карт для визуализации данных Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Слияние карт для визуализации данных Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-216">![Merge maps for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-merge-maps.png "Merge maps for Spark data visualization")</span></span>

     <span data-ttu-id="f8656-217">Визуализация данных необходимо указать, как показано на снимке экрана приветствия:</span><span class="sxs-lookup"><span data-stu-id="f8656-217">Your data visualization should change as shown in hello screenshot:</span></span>

    <span data-ttu-id="f8656-218">![Выходные данные Tableau для визуализации данных Spark](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Выходные данные Tableau для визуализации данных Spark")</span><span class="sxs-lookup"><span data-stu-id="f8656-218">![Tableau output for Spark data visualization](./media/hdinsight-apache-spark-use-bi-tools/spark-data-visualization-tableau-output.png "Tableau output for Spark data visualization")</span></span>
9. <span data-ttu-id="f8656-219">Нажмите кнопку **Сохранить** toosave hello листа.</span><span class="sxs-lookup"><span data-stu-id="f8656-219">Click **Save** toosave hello worksheet.</span></span> <span data-ttu-id="f8656-220">Можно создать панели мониторинга и добавьте один или несколько листов tooit.</span><span class="sxs-lookup"><span data-stu-id="f8656-220">You can create dashboards and add one or more sheets tooit.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f8656-221">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="f8656-221">Next steps</span></span>

<span data-ttu-id="f8656-222">Пока вы узнали, как создать данных tooquery кадры данных Spark toocreate кластера и получить доступ к этим данным из средств бизнес-Аналитики.</span><span class="sxs-lookup"><span data-stu-id="f8656-222">So far you learned how toocreate a cluster, create Spark data frames tooquery data, and then access that data from BI tools.</span></span> <span data-ttu-id="f8656-223">Теперь можно просмотреть инструкции по их как toomanage hello ресурсы кластера и отладка задания, запущенные в кластере HDInsight Spark.</span><span class="sxs-lookup"><span data-stu-id="f8656-223">You can now look at instructions on how toomanage hello cluster resources and debug jobs that are running in an HDInsight Spark cluster.</span></span>

* [<span data-ttu-id="f8656-224">Управление ресурсами кластера hello Apache Spark в Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="f8656-224">Manage resources for hello Apache Spark cluster in Azure HDInsight</span></span>](hdinsight-apache-spark-resource-manager.md)
* [<span data-ttu-id="f8656-225">Отслеживание и отладка заданий в кластере Apache Spark в HDInsight на платформе Linux</span><span class="sxs-lookup"><span data-stu-id="f8656-225">Track and debug jobs running on an Apache Spark cluster in HDInsight</span></span>](hdinsight-apache-spark-job-debugging.md)

