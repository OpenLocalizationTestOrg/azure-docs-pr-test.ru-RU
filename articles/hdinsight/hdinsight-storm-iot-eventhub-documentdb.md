---
title: "aaaProcess vehicle датчиков с Apache Storm на HDInsight | Документы Microsoft"
description: "Узнайте, как tooprocess vehicle датчиков из концентраторов событий с помощью Apache Storm на HDInsight. Добавление модели данных из базы данных Azure Cosmos и хранения toostorage выходных данных."
services: hdinsight,documentdb,notification-hubs
documentationcenter: 
author: Blackmist
manager: jhubbard
editor: cgronlun
ms.assetid: 78980635-8bef-4c33-96c3-fae50e932e31
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: java
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 05/03/2017
ms.author: larryfr
ms.openlocfilehash: 8f7b1dbb9072e095ea32160bb731bedd071288af
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="process-vehicle-sensor-data-from-azure-event-hubs-using-apache-storm-on-hdinsight"></a><span data-ttu-id="82bba-104">Обработка данных с датчиков автомобилей из концентраторов событий Azure с использованием средств Apache Storm в HDInsight.</span><span class="sxs-lookup"><span data-stu-id="82bba-104">Process vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight</span></span>

<span data-ttu-id="82bba-105">Узнайте, как tooprocess vehicle датчиков из концентраторов событий Azure с помощью Apache Storm на HDInsight.</span><span class="sxs-lookup"><span data-stu-id="82bba-105">Learn how tooprocess vehicle sensor data from Azure Event Hubs using Apache Storm on HDInsight.</span></span> <span data-ttu-id="82bba-106">Этот пример считывает данные датчика из концентраторов событий Azure, обогащает hello данных с помощью ссылки на данные, хранящиеся в базе данных Azure Cosmos.</span><span class="sxs-lookup"><span data-stu-id="82bba-106">This example reads sensor data from Azure Event Hubs, enriches hello data by referencing data stored in Azure Cosmos DB.</span></span> <span data-ttu-id="82bba-107">Hello данные хранятся в хранилище Azure с помощью hello системы файла Hadoop (HDFS).</span><span class="sxs-lookup"><span data-stu-id="82bba-107">hello data is stored into Azure Storage using hello Hadoop File System (HDFS).</span></span>

![HDInsight и hello схема архитектуры Интернета вещей (IoT)](./media/hdinsight-storm-iot-eventhub-documentdb/iot.png)

## <a name="overview"></a><span data-ttu-id="82bba-109">Обзор</span><span class="sxs-lookup"><span data-stu-id="82bba-109">Overview</span></span>

<span data-ttu-id="82bba-110">Добавление датчиков toovehicles позволяет toopredict неполадок оборудования, на основе исторических данных тенденций.</span><span class="sxs-lookup"><span data-stu-id="82bba-110">Adding sensors toovehicles allows you toopredict equipment problems based on historical data trends.</span></span> <span data-ttu-id="82bba-111">Она также позволяет усовершенствования toomake toofuture версии на основе анализа шаблонов использования.</span><span class="sxs-lookup"><span data-stu-id="82bba-111">It also allows you toomake improvements toofuture versions based on usage pattern analysis.</span></span> <span data-ttu-id="82bba-112">Должен быть доступ tooquickly и эффективно hello данных из всех автомобилей Чтобы загрузить в Hadoop может произойти обработка MapReduce.</span><span class="sxs-lookup"><span data-stu-id="82bba-112">You must be able tooquickly and efficiently load hello data from all vehicles into Hadoop before MapReduce processing can occur.</span></span> <span data-ttu-id="82bba-113">Кроме того вы можете toodo анализа для путей критический сбой (температуры ядра, brakes, т. д.) в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="82bba-113">Additionally, you may wish toodo analysis for critical failure paths (engine temperature, brakes, etc.) in real time.</span></span>

<span data-ttu-id="82bba-114">Концентраторы событий Azure построен toohandle hello значительный объем данных, созданные датчиков.</span><span class="sxs-lookup"><span data-stu-id="82bba-114">Azure Event Hubs is built toohandle hello massive volume of data generated by sensors.</span></span> <span data-ttu-id="82bba-115">Apache Storm можно использовать tooload и hello обработки данных перед их передачей в HDFS.</span><span class="sxs-lookup"><span data-stu-id="82bba-115">Apache Storm can be used tooload and process hello data before storing it into HDFS.</span></span>

## <a name="solution"></a><span data-ttu-id="82bba-116">Решение</span><span class="sxs-lookup"><span data-stu-id="82bba-116">Solution</span></span>

<span data-ttu-id="82bba-117">Данные телеметрии, связанные с температурой двигателя и окружающей среды, и также со скоростью автомобиля, фиксируются датчиками</span><span class="sxs-lookup"><span data-stu-id="82bba-117">Telemetry data for engine temperature, ambient temperature, and vehicle speed is recorded by sensors.</span></span> <span data-ttu-id="82bba-118">Данных затем отправляется концентраторов tooEvent вместе с номер идентификации hello car транспортного средства (VIN) и отметкой времени.</span><span class="sxs-lookup"><span data-stu-id="82bba-118">Data is then sent tooEvent Hubs along with hello car's Vehicle Identification Number (VIN) and a time stamp.</span></span> <span data-ttu-id="82bba-119">Оттуда Storm топология, работающая на Apache Storm в кластере HDInsight считывает данные hello, обрабатывает его и сохраняет его в HDFS.</span><span class="sxs-lookup"><span data-stu-id="82bba-119">From there, a Storm Topology running on an Apache Storm on HDInsight cluster reads hello data, processes it, and stores it into HDFS.</span></span>

<span data-ttu-id="82bba-120">Во время обработки hello VIN является используется tooretrieve сведения о модели из базы данных Cosmos.</span><span class="sxs-lookup"><span data-stu-id="82bba-120">During processing, hello VIN is used tooretrieve model information from Cosmos DB.</span></span> <span data-ttu-id="82bba-121">Эти данные добавляется в поток данных toohello перед сохранением.</span><span class="sxs-lookup"><span data-stu-id="82bba-121">This data is added toohello data stream before it is stored.</span></span>

<span data-ttu-id="82bba-122">Hello компоненты, используемые в hello Storm топологии являются:</span><span class="sxs-lookup"><span data-stu-id="82bba-122">hello components used in hello Storm Topology are:</span></span>

* <span data-ttu-id="82bba-123">**EventHubSpout** : считывает данные из концентраторов событий Azure.</span><span class="sxs-lookup"><span data-stu-id="82bba-123">**EventHubSpout** - reads data from Azure Event Hubs</span></span>
* <span data-ttu-id="82bba-124">**TypeConversionBolt** -преобразует hello строки JSON из концентраторов событий в кортеж, содержащий следующие данные датчика hello:</span><span class="sxs-lookup"><span data-stu-id="82bba-124">**TypeConversionBolt** - converts hello JSON string from Event Hubs into a tuple containing hello following sensor data:</span></span>
    * <span data-ttu-id="82bba-125">engineTemperature</span><span class="sxs-lookup"><span data-stu-id="82bba-125">Engine temperature</span></span>
    * <span data-ttu-id="82bba-126">температура окружающей среды;</span><span class="sxs-lookup"><span data-stu-id="82bba-126">Ambient temperature</span></span>
    * <span data-ttu-id="82bba-127">Speed</span><span class="sxs-lookup"><span data-stu-id="82bba-127">Speed</span></span>
    * <span data-ttu-id="82bba-128">VIN</span><span class="sxs-lookup"><span data-stu-id="82bba-128">VIN</span></span>
    * <span data-ttu-id="82bba-129">Timestamp</span><span class="sxs-lookup"><span data-stu-id="82bba-129">Timestamp</span></span>
* <span data-ttu-id="82bba-130">**DataReferencBolt** -ищет hello vehicle модели из Cosmos базу данных, используя hello VIN</span><span class="sxs-lookup"><span data-stu-id="82bba-130">**DataReferencBolt** - looks up hello vehicle model from Cosmos DB using hello VIN</span></span>
* <span data-ttu-id="82bba-131">**WasbStoreBolt** -магазины hello tooHDFS данных (хранилище Azure)</span><span class="sxs-lookup"><span data-stu-id="82bba-131">**WasbStoreBolt** - stores hello data tooHDFS (Azure Storage)</span></span>

<span data-ttu-id="82bba-132">Следующие изображения Hello является схема этого решения:</span><span class="sxs-lookup"><span data-stu-id="82bba-132">hello following image is a diagram of this solution:</span></span>

![топология Storm](./media/hdinsight-storm-iot-eventhub-documentdb/iottopology.png)

## <a name="implementation"></a><span data-ttu-id="82bba-134">Реализация</span><span class="sxs-lookup"><span data-stu-id="82bba-134">Implementation</span></span>

<span data-ttu-id="82bba-135">Завершенный автоматизированным решением, для этого сценария доступна как часть hello [HDInsight-Storm-примеры](https://github.com/hdinsight/hdinsight-storm-examples) репозитория в GitHub.</span><span class="sxs-lookup"><span data-stu-id="82bba-135">A complete, automated solution for this scenario is available as part of hello [HDInsight-Storm-Examples](https://github.com/hdinsight/hdinsight-storm-examples) repository on GitHub.</span></span> <span data-ttu-id="82bba-136">toouse в этом примере, повторите шаги hello в hello [IoTExample файл README. MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span><span class="sxs-lookup"><span data-stu-id="82bba-136">toouse this example, follow hello steps in hello [IoTExample README.MD](https://github.com/hdinsight/hdinsight-storm-examples/blob/master/IotExample/README.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="82bba-137">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="82bba-137">Next Steps</span></span>

<span data-ttu-id="82bba-138">Другие примеры топологий Storm см. в статье [Примеры топологий и компонентов Storm для Apache Storm в HDInsight](hdinsight-storm-example-topology.md).</span><span class="sxs-lookup"><span data-stu-id="82bba-138">For more example Storm topologies, see [Example topologies for Storm on HDInsight](hdinsight-storm-example-topology.md).</span></span>

