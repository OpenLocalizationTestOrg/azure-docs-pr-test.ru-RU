---
title: "Использование нескольких кластеров HDInsight с учетной записью Azure Data Lake Store — Azure | Документы Майкрософт"
description: "Узнайте, как использовать несколько кластеров HDInsight с одной учетной записью Azure Data Lake Store"
keywords: "хранилище HDInsight, HDFS, структурированные данные, неструктурированные данные, Data Lake Store"
services: hdinsight,storage
documentationcenter: 
tags: azure-portal
author: nitinme
manager: jhubbard
editor: cgronlun
ms.service: hdinsight
ms.custom: hdinsightactive
ms.workload: big-data
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/02/2017
ms.author: nitinme
ms.openlocfilehash: 043141e8496a947f54564d29a1d7fb724fac5cda
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="use-multiple-hdinsight-clusters-with-an-azure-data-lake-store-account"></a><span data-ttu-id="34d20-104">Использование нескольких кластеров HDInsight с учетной записью Azure Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="34d20-104">Use multiple HDInsight clusters with an Azure Data Lake Store account</span></span>

<span data-ttu-id="34d20-105">Начиная с версии HDInsight 3.5 можно создавать кластеры HDInsight с учетными записями Azure Data Lake Store в качестве файловой системы по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="34d20-105">Starting with HDInsight version 3.5, you can create HDInsight clusters with  Azure Data Lake Store accounts as the default filesystem.</span></span>
<span data-ttu-id="34d20-106">Data Lake Store поддерживает неограниченное пространство для хранения данных, поэтому оно идеально подходит не только для хранения больших объемов данных, но и для размещения нескольких кластеров HDInsight, которые совместно используют одну и ту же учетную запись Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="34d20-106">Data Lake Store supports unlimited storage that makes it ideal not only for hosting large amounts of data; but also for hosting multiple HDInsight clusters that share a single Data Lake Store Account.</span></span> <span data-ttu-id="34d20-107">Инструкции по созданию кластера HDInsight с Data Lake Store в качестве хранилища см. в разделе [Создание кластеров HDInsight с хранилищем Data Lake Store](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).</span><span class="sxs-lookup"><span data-stu-id="34d20-107">For instructionson how to create an HDInsight cluster with Data Lake Store as the storage, see [Create HDInsight clusters with Data Lake Store](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md).</span></span>

<span data-ttu-id="34d20-108">Эта статья содержит рекомендации для администратора Data Lake Store по настройке единственной и общей учетной записи Data Lake Store, которая может использоваться в нескольких **активных** кластерах HDInsight.</span><span class="sxs-lookup"><span data-stu-id="34d20-108">This article provides recommendations to the Data Lake store administrator for setting up a single and shared Data Lake Store Account that can be used across multiple **active** HDInsight clusters.</span></span> <span data-ttu-id="34d20-109">Эти рекомендации относятся к размещению нескольких защищенных и незащищенных кластеров Hadoop в общей учетной записи Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="34d20-109">These recommendations apply to hosting multiple secure as well as non-secure Hadoop clusters on a shared Data Lake store account.</span></span>


## <a name="data-lake-store-file-and-folder-level-acls"></a><span data-ttu-id="34d20-110">Списки управления доступом на уровне файла и папки в Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="34d20-110">Data Lake Store file and folder level ACLs</span></span>

<span data-ttu-id="34d20-111">В оставшейся части этой статьи предполагается, что у вас хорошие знания списков управления доступом на уровне файла и папки в Azure Data Lake Store, которые подробно описаны в разделе [Управление доступом в Azure Data Lake Store](../data-lake-store/data-lake-store-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="34d20-111">The rest of this article assumes that you have a good knowledge of file and folder level ACLs in Azure Data Lake Store, which is described in detail at [Access control in Azure Data Lake Store](../data-lake-store/data-lake-store-access-control.md).</span></span>

## <a name="data-lake-store-setup-for-multiple-hdinsight-clusters"></a><span data-ttu-id="34d20-112">Настройка Data Lake Store для нескольких кластеров HDInsight</span><span class="sxs-lookup"><span data-stu-id="34d20-112">Data Lake Store setup for multiple HDInsight clusters</span></span>
<span data-ttu-id="34d20-113">Давайте поясним рекомендации по использованию нескольких кластеров HDInsight с учетной записью Data Lake Store на примере двухуровневой иерархии папок.</span><span class="sxs-lookup"><span data-stu-id="34d20-113">Let us take a two-level folder hierarchy to explain the recommendations for using mutilple HDInsight clusters with a Data Lake Store account.</span></span> <span data-ttu-id="34d20-114">Предположим, что у вас есть учетная запись Data Lake Store со структурой папок **/clusters/finance**.</span><span class="sxs-lookup"><span data-stu-id="34d20-114">Consider you have a Data Lake Store account with the folder structure **/clusters/finance**.</span></span> <span data-ttu-id="34d20-115">С такой структурой папок все кластеры, необходимые финансовой организации, могут использовать папку /clusters/finance в качестве расположения хранилища.</span><span class="sxs-lookup"><span data-stu-id="34d20-115">With this structure, all the clusters required by the Finance organization can use /clusters/finance as the storage location.</span></span> <span data-ttu-id="34d20-116">Если другая организация (например, маркетинговая) захочет создать кластеры, использующие ту же учетную запись Data Lake Store, для этой организации можно просто создать папку /clusters/marketing.</span><span class="sxs-lookup"><span data-stu-id="34d20-116">In the future, if another organization, say Marketing, wants to create HDInsight clusters using the same Data Lake Store account, they could create /clusters/marketing.</span></span> <span data-ttu-id="34d20-117">Пока давайте использовать папку **/clusters/finance**.</span><span class="sxs-lookup"><span data-stu-id="34d20-117">For now, let's just use **/clusters/finance**.</span></span>

<span data-ttu-id="34d20-118">Чтобы настроить такую структуру папок для кластеров HDInsight, администратору Data Lake Store необходимо назначить соответствующие разрешения, как описано в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="34d20-118">To enable this folder structure to be effectively used by HDInsight clusters, the Data Lake Store administrator must assign appropriate permissions, as described in the table.</span></span> <span data-ttu-id="34d20-119">Разрешения, показанные в таблице, соответствуют спискам управления доступом (Access-ACL), а не спискам управления доступом по умолчанию (Default-ACL).</span><span class="sxs-lookup"><span data-stu-id="34d20-119">The permissions shown in the table correspond to Access-ACLs, and not Default-ACLs.</span></span> 


|<span data-ttu-id="34d20-120">Папка</span><span class="sxs-lookup"><span data-stu-id="34d20-120">Folder</span></span>  |<span data-ttu-id="34d20-121">Разрешения</span><span class="sxs-lookup"><span data-stu-id="34d20-121">Permissions</span></span>  |<span data-ttu-id="34d20-122">владельца</span><span class="sxs-lookup"><span data-stu-id="34d20-122">Owning user</span></span>  |<span data-ttu-id="34d20-123">группы владельцев</span><span class="sxs-lookup"><span data-stu-id="34d20-123">Owning group</span></span>  | <span data-ttu-id="34d20-124">Именованный пользователь</span><span class="sxs-lookup"><span data-stu-id="34d20-124">Named user</span></span> | <span data-ttu-id="34d20-125">Разрешения именованного пользователя</span><span class="sxs-lookup"><span data-stu-id="34d20-125">Named user permissions</span></span> | <span data-ttu-id="34d20-126">Именованная группа</span><span class="sxs-lookup"><span data-stu-id="34d20-126">Named group</span></span> | <span data-ttu-id="34d20-127">Разрешения именованной группы</span><span class="sxs-lookup"><span data-stu-id="34d20-127">Named group permissions</span></span> |
|---------|---------|---------|---------|---------|---------|---------|---------|
|/ | <span data-ttu-id="34d20-128">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="34d20-128">rwxr-x--x</span></span>  |<span data-ttu-id="34d20-129">admin</span><span class="sxs-lookup"><span data-stu-id="34d20-129">admin</span></span> |<span data-ttu-id="34d20-130">admin</span><span class="sxs-lookup"><span data-stu-id="34d20-130">admin</span></span>  |<span data-ttu-id="34d20-131">Субъект-служба</span><span class="sxs-lookup"><span data-stu-id="34d20-131">Service principal</span></span> |<span data-ttu-id="34d20-132">--x</span><span class="sxs-lookup"><span data-stu-id="34d20-132">--x</span></span>  |<span data-ttu-id="34d20-133">FINGRP</span><span class="sxs-lookup"><span data-stu-id="34d20-133">FINGRP</span></span>   |<span data-ttu-id="34d20-134">r-x</span><span class="sxs-lookup"><span data-stu-id="34d20-134">r-x</span></span>         |
|<span data-ttu-id="34d20-135">/clusters</span><span class="sxs-lookup"><span data-stu-id="34d20-135">/clusters</span></span> | <span data-ttu-id="34d20-136">rwxr-x--x</span><span class="sxs-lookup"><span data-stu-id="34d20-136">rwxr-x--x</span></span> |<span data-ttu-id="34d20-137">admin</span><span class="sxs-lookup"><span data-stu-id="34d20-137">admin</span></span> |<span data-ttu-id="34d20-138">admin</span><span class="sxs-lookup"><span data-stu-id="34d20-138">admin</span></span> |<span data-ttu-id="34d20-139">Субъект-служба</span><span class="sxs-lookup"><span data-stu-id="34d20-139">Service principal</span></span> |<span data-ttu-id="34d20-140">--x</span><span class="sxs-lookup"><span data-stu-id="34d20-140">--x</span></span>  |<span data-ttu-id="34d20-141">FINGRP</span><span class="sxs-lookup"><span data-stu-id="34d20-141">FINGRP</span></span> |<span data-ttu-id="34d20-142">r-x</span><span class="sxs-lookup"><span data-stu-id="34d20-142">r-x</span></span>         |
|<span data-ttu-id="34d20-143">/clusters/finance</span><span class="sxs-lookup"><span data-stu-id="34d20-143">/clusters/finance</span></span> | <span data-ttu-id="34d20-144">rwxr-x--t</span><span class="sxs-lookup"><span data-stu-id="34d20-144">rwxr-x--t</span></span> |<span data-ttu-id="34d20-145">admin</span><span class="sxs-lookup"><span data-stu-id="34d20-145">admin</span></span> |<span data-ttu-id="34d20-146">FINGRP</span><span class="sxs-lookup"><span data-stu-id="34d20-146">FINGRP</span></span>  |<span data-ttu-id="34d20-147">Субъект-служба</span><span class="sxs-lookup"><span data-stu-id="34d20-147">Service principal</span></span> |<span data-ttu-id="34d20-148">rwx</span><span class="sxs-lookup"><span data-stu-id="34d20-148">rwx</span></span>  |-  |-     |

<span data-ttu-id="34d20-149">В этой таблице:</span><span class="sxs-lookup"><span data-stu-id="34d20-149">In the table,</span></span>

- <span data-ttu-id="34d20-150">**admin** — создатель и администратор учетной записи Data Lake Store.</span><span class="sxs-lookup"><span data-stu-id="34d20-150">**admin** is the creator and administrator of the Data Lake Store account.</span></span>
- <span data-ttu-id="34d20-151">**Субъект-служба** — субъект-служба Azure Active Directory (AAD), связанная с учетной записью.</span><span class="sxs-lookup"><span data-stu-id="34d20-151">**Service principal** is the Azure Active Directory (AAD) service principal associated with the account.</span></span>
- <span data-ttu-id="34d20-152">**FINGRP** — группа пользователей, созданная в AAD и содержащая пользователей из финансовой организации.</span><span class="sxs-lookup"><span data-stu-id="34d20-152">**FINGRP** is a user group created in AAD that contains users from the Finance organization.</span></span>

<span data-ttu-id="34d20-153">Инструкции по созданию приложения AAD (при создании которого также создается субъект-служба) см. в разделе [Создание приложения AAD](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application).</span><span class="sxs-lookup"><span data-stu-id="34d20-153">For instructions on how to create an AAD application (that also creates a Service Principal), see [Create an AAD application](../azure-resource-manager/resource-group-create-service-principal-portal.md#create-an-azure-active-directory-application).</span></span> <span data-ttu-id="34d20-154">Инструкции по созданию группы пользователей в AAD см. в разделе [Управление группами в Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).</span><span class="sxs-lookup"><span data-stu-id="34d20-154">For instructions on how to create a user group in AAD, see [Managing groups in Azure Active Directory](../active-directory/active-directory-accessmanagement-manage-groups.md).</span></span>

<span data-ttu-id="34d20-155">Необходимо учесть следующие основные моменты.</span><span class="sxs-lookup"><span data-stu-id="34d20-155">Some key points to consider.</span></span>

- <span data-ttu-id="34d20-156">**Перед** использованием учетной записи хранения для кластеров администратору Data Lake Store необходимо создать и подготовить двухуровневую структуру папок (**/clusters/finance/**) с соответствующими разрешениями.</span><span class="sxs-lookup"><span data-stu-id="34d20-156">The two level folder structure (**/clusters/finance/**) must be created and provisioned with appropriate permissions by the Data Lake Store admin **before** using the storage account for clusters.</span></span> <span data-ttu-id="34d20-157">Эта структура не создается автоматически при создании кластеров.</span><span class="sxs-lookup"><span data-stu-id="34d20-157">This structure is not created automatically while creating clusters.</span></span>
- <span data-ttu-id="34d20-158">В приведенном выше примере рекомендуется установить **FINGRP** в качестве группы-владельца **/clusters/finance** и установить для FINGRP разрешения **r-x** для всей структуры папок начиная с корневой папки.</span><span class="sxs-lookup"><span data-stu-id="34d20-158">The example above recommends setting the owning group of **/clusters/finance** as **FINGRP** and permitting **r-x** access to FINGRP to the entire folder hierarchy starting from the root.</span></span> <span data-ttu-id="34d20-159">Это позволит участникам группы FINGRP перемещаться по всей структуре папок начиная с корневой папки.</span><span class="sxs-lookup"><span data-stu-id="34d20-159">This ensures that the members of FINGRP can navigate the folder structure starting from root.</span></span>
- <span data-ttu-id="34d20-160">В том случае, когда различные субъекты-службы AAD могут создавать кластеры в каталоге **/clusters/finance**, бит sticky (установленный для папки **finance**) гарантирует, что папки, созданные одним субъектом-службой, не могут быть удалены другими субъектами-службами.</span><span class="sxs-lookup"><span data-stu-id="34d20-160">In the case when different AAD Service Principals can create clusters under **/clusters/finance**, the sticky-bit (when set on the **finance** folder) ensures that folders created by one Service Principal cannot be deleted by the other.</span></span>
- <span data-ttu-id="34d20-161">После создания структуры папок и настройки разрешений создается расположение для кластера HDInsight в папке **/clusters/finance/**.</span><span class="sxs-lookup"><span data-stu-id="34d20-161">Once the folder structure and permissions are in place, HDInsight cluster creation process creates a cluster-specific storage loaction under **/clusters/finance/**.</span></span> <span data-ttu-id="34d20-162">Например, в качестве расположения для кластера с именем fincluster01 может использоваться папка **/clusters/finance/fincluster01**.</span><span class="sxs-lookup"><span data-stu-id="34d20-162">For example, the storage for a cluster with the name fincluster01 could be **/clusters/finance/fincluster01**.</span></span> <span data-ttu-id="34d20-163">В таблице ниже показаны владельцы и разрешения для папок, созданных для кластера HDInsight.</span><span class="sxs-lookup"><span data-stu-id="34d20-163">The ownership and permissions for the folders created by HDInsight cluster is shown in the table here.</span></span>

    |<span data-ttu-id="34d20-164">Папка</span><span class="sxs-lookup"><span data-stu-id="34d20-164">Folder</span></span>  |<span data-ttu-id="34d20-165">Разрешения</span><span class="sxs-lookup"><span data-stu-id="34d20-165">Permissions</span></span>  |<span data-ttu-id="34d20-166">владельца</span><span class="sxs-lookup"><span data-stu-id="34d20-166">Owning user</span></span>  |<span data-ttu-id="34d20-167">группы владельцев</span><span class="sxs-lookup"><span data-stu-id="34d20-167">Owning group</span></span>  | <span data-ttu-id="34d20-168">Именованный пользователь</span><span class="sxs-lookup"><span data-stu-id="34d20-168">Named user</span></span> | <span data-ttu-id="34d20-169">Разрешения именованного пользователя</span><span class="sxs-lookup"><span data-stu-id="34d20-169">Named user permissions</span></span> | <span data-ttu-id="34d20-170">Именованная группа</span><span class="sxs-lookup"><span data-stu-id="34d20-170">Named group</span></span> | <span data-ttu-id="34d20-171">Разрешения именованной группы</span><span class="sxs-lookup"><span data-stu-id="34d20-171">Named group permissions</span></span> |
    |---------|---------|---------|---------|---------|---------|---------|---------|
    |<span data-ttu-id="34d20-172">/clusters/finanace/ fincluster01</span><span class="sxs-lookup"><span data-stu-id="34d20-172">/clusters/finanace/ fincluster01</span></span> | <span data-ttu-id="34d20-173">rwxr-x---</span><span class="sxs-lookup"><span data-stu-id="34d20-173">rwxr-x---</span></span>  |<span data-ttu-id="34d20-174">Субъект-служба</span><span class="sxs-lookup"><span data-stu-id="34d20-174">Service Principal</span></span> |<span data-ttu-id="34d20-175">FINGRP</span><span class="sxs-lookup"><span data-stu-id="34d20-175">FINGRP</span></span>  |- |-  |-   |-  | 
   


## <a name="recommendations-for-job-input-and-output-data"></a><span data-ttu-id="34d20-176">Рекомендации по входным и выходным данным задания</span><span class="sxs-lookup"><span data-stu-id="34d20-176">Recommendations for job input and output data</span></span>

<span data-ttu-id="34d20-177">Входные и выходные данные задания рекомендуется размещать в папке за пределами папки **/clusters**.</span><span class="sxs-lookup"><span data-stu-id="34d20-177">We recommend that input data to a job, and the outputs from a job be stored in a folder outside **/clusters**.</span></span> <span data-ttu-id="34d20-178">Это гарантирует, что даже при удалении папки кластера, чтобы освободить место, входные и выходные данные задания останутся доступными для использования в будущем.</span><span class="sxs-lookup"><span data-stu-id="34d20-178">This ensures that even if the cluster-specific folder is deleted to reclaim some storage space,the job inputs and outputs are still available for future use.</span></span> <span data-ttu-id="34d20-179">В этом случае убедитесь, что иерархия папок для хранения входных и выходных данных задания обеспечивает соответствующий уровень доступа для субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="34d20-179">In such a case, ensure that the folder hierarchy for storing the job inputs and outputs allows appropriate level of access for the Service Principal.</span></span>

## <a name="limit-on-clusters-sharing-a-single-storage-account"></a><span data-ttu-id="34d20-180">Ограничение на число кластеров, которые могут использовать общую учетную запись хранения</span><span class="sxs-lookup"><span data-stu-id="34d20-180">Limit on clusters sharing a single storage account</span></span>

<span data-ttu-id="34d20-181">Ограничение на число кластеров, которые могут использовать общую учетную запись Data Lake Store, зависит от рабочей нагрузки, выполняемой на этих кластерах.</span><span class="sxs-lookup"><span data-stu-id="34d20-181">The limit on the number of clusters that can share a single Data Lake Store account depends on the workload being run on those clusters.</span></span> <span data-ttu-id="34d20-182">Слишком большое число кластеров или очень интенсивные рабочие нагрузки на кластерах, которые используют общую учетную запись хранения, могут привести к регулированию входящего/исходящего трафика для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="34d20-182">Having too many clusters or very heavy workloads on the clusters that share a storage account might cause the storage account ingress/egress to get throttled.</span></span>

## <a name="support-for-default-acls"></a><span data-ttu-id="34d20-183">Поддержка списков управления доступом по умолчанию</span><span class="sxs-lookup"><span data-stu-id="34d20-183">Support for Default-ACLs</span></span>

<span data-ttu-id="34d20-184">При создании субъекта-службы с доступом именованного пользователя (как показано в таблице выше) рекомендуется **не** добавлять именованного пользователя со списком управления доступом по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="34d20-184">When creating a Service Principal with named-user access (as shown in the table above), we recommend **not** adding the named-user with a default-ACL.</span></span> <span data-ttu-id="34d20-185">При подготовке доступа именованного пользователя со списками управления доступом по умолчанию назначаются разрешения 770 для пользователя-владельца, группы-владельца и остальных пользователей.</span><span class="sxs-lookup"><span data-stu-id="34d20-185">Provisioning named-user access using default-ACLs results in the assignment of 770 permissions for owning-user, owning-group, and others.</span></span> <span data-ttu-id="34d20-186">Хотя в этом режиме сохраняются все разрешения для пользователя-владельца (7) и группы-владельца (7), все разрешения для других пользователей удаляются (0).</span><span class="sxs-lookup"><span data-stu-id="34d20-186">While this default value of 770 does not take away permissions from owning-user (7) or owning-group (7), it takes away all permissions for others (0).</span></span> <span data-ttu-id="34d20-187">Это приводит к известной проблеме, которая подробно описана в разделе [Известные проблемы и их решения](#known-issues-and-workarounds).</span><span class="sxs-lookup"><span data-stu-id="34d20-187">This results in a known issue with one particular use-case that is discussed in detail in the [Known issues and workarounds](#known-issues-and-workarounds) section.</span></span>

## <a name="known-issues-and-workarounds"></a><span data-ttu-id="34d20-188">Известные проблемы и их решения</span><span class="sxs-lookup"><span data-stu-id="34d20-188">Known issues and workarounds</span></span>

<span data-ttu-id="34d20-189">В этом разделе перечислены известные проблемы, которые возникают при использовании HDInsight с Data Lake Store, и их решения.</span><span class="sxs-lookup"><span data-stu-id="34d20-189">This section lists the known issues for using HDInsight with Data Lake Store, and their workarounds.</span></span>

### <a name="publicly-visible-localized-yarn-resources"></a><span data-ttu-id="34d20-190">Открытые локализованные ресурсы YARN</span><span class="sxs-lookup"><span data-stu-id="34d20-190">Publicly visible localized YARN resources</span></span>

<span data-ttu-id="34d20-191">При создании новой учетной записи Azure Data Lake Store корневая папка автоматически подготавливается с разрешениями 770 для списка управления доступом.</span><span class="sxs-lookup"><span data-stu-id="34d20-191">When a new Azure Data Lake store account is created, the root directory is automatically provisioned with Access-ACL permission bits set to 770.</span></span> <span data-ttu-id="34d20-192">В качестве пользователя-владельца корневой папки устанавливается пользователь, который создал учетную запись (администратор Data Lake Store), а в качестве группы-владельца — основная группа пользователя, который создал учетную запись.</span><span class="sxs-lookup"><span data-stu-id="34d20-192">The root folder’s owning user is set to the user that created the account (the Data Lake Store admin) and the owning group is set to the primary group of the user that created the account.</span></span> <span data-ttu-id="34d20-193">Доступ для других пользователей не предоставляется.</span><span class="sxs-lookup"><span data-stu-id="34d20-193">No access is provided for "others".</span></span>

<span data-ttu-id="34d20-194">Эти параметры влияют на один из вариантов использования HDInsight, который описан в разделе [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247).</span><span class="sxs-lookup"><span data-stu-id="34d20-194">These settings are known to affect one specific HDInsight use-case captured in [YARN 247](https://hwxmonarch.atlassian.net/browse/YARN-247).</span></span> <span data-ttu-id="34d20-195">Отправка задания может завершиться сбоем со следующим сообщением об ошибке:</span><span class="sxs-lookup"><span data-stu-id="34d20-195">Job submissions could fail with an error message similar to this:</span></span>

    Resource XXXX is not publicly accessible and as such cannot be part of the public cache.

<span data-ttu-id="34d20-196">Как указано в статье YARN JIRA, ссылка на которую приведена выше, при локализации общедоступных ресурсов средство локализации проверяет, что все запрошенные ресурсы действительно являются общедоступными, анализируя их разрешения в удаленной файловой системе.</span><span class="sxs-lookup"><span data-stu-id="34d20-196">As stated in the YARN JIRA linked earlier, while localizing public resources, the localizer validates that all the requested resources are indeed public by checking their permissions on the remote file-system.</span></span> <span data-ttu-id="34d20-197">Все локальные ресурсы, не соответствующие этому условию, не локализуются.</span><span class="sxs-lookup"><span data-stu-id="34d20-197">Any LocalResource that does not fit that condition is rejected for localization.</span></span> <span data-ttu-id="34d20-198">Проверка разрешений включает проверку доступа к файлу на чтение для остальных пользователей.</span><span class="sxs-lookup"><span data-stu-id="34d20-198">The check for permissions, includes read-access to the file for "others".</span></span> <span data-ttu-id="34d20-199">При размещении кластеров HDInsight в Azure Data Lake этот сценарий не работает сразу же, так как Azure Data Lake запрещает остальным пользователям доступ на уровне корневой папки.</span><span class="sxs-lookup"><span data-stu-id="34d20-199">This scenario does not work out-of-the-box when hosting HDInsight clusters on Azure Data Lake, since Azure Data Lake denies all access to "others" at root folder level.</span></span>

#### <a name="workaround"></a><span data-ttu-id="34d20-200">Возможное решение</span><span class="sxs-lookup"><span data-stu-id="34d20-200">Workaround</span></span>
<span data-ttu-id="34d20-201">Установите права на чтение и выполнение для **остальных пользователей** по всей иерархии папок, например для папок **/**, **/clusters** и **/clusters/finance**, как показано в таблице выше.</span><span class="sxs-lookup"><span data-stu-id="34d20-201">Set read-execute permissions for **others** through the hierarchy, for example,  at **/**, **/clusters** and **/clusters/finance** as shown in the table above.</span></span>

## <a name="see-also"></a><span data-ttu-id="34d20-202">См. также</span><span class="sxs-lookup"><span data-stu-id="34d20-202">See also</span></span>

* [<span data-ttu-id="34d20-203">Создание кластера HDInsight с хранилищем озера данных в качестве хранилища</span><span class="sxs-lookup"><span data-stu-id="34d20-203">Create an HDInsight cluster with Data Lake Store as storage</span></span>](../data-lake-store/data-lake-store-hdinsight-hadoop-use-portal.md)


