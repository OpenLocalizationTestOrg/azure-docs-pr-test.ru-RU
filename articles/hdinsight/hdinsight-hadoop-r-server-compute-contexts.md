---
title: "Параметры контекстного aaaCompute для R Server HDInsight — Azure | Документы Microsoft"
description: "Дополнительные сведения о hello различных вычислительных контекста параметры доступные toousers с сервером R в HDInsight"
services: HDInsight
documentationcenter: 
author: bradsev
manager: jhubbard
editor: cgronlun
ms.assetid: 0deb0b1c-4094-459b-94fc-ec9b774c1f8a
ms.service: HDInsight
ms.custom: hdinsightactive
ms.devlang: R
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-services
ms.date: 06/19/2017
ms.author: bradsev
ms.openlocfilehash: b3b0d0cc3caa390797dcff8c73d66cd3ad78bcaa
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="compute-context-options-for-r-server-on-hdinsight"></a><span data-ttu-id="64b87-103">Варианты контекста вычислений для R Server в HDInsight</span><span class="sxs-lookup"><span data-stu-id="64b87-103">Compute context options for R Server on HDInsight</span></span>

<span data-ttu-id="64b87-104">Microsoft R Server на Azure HDInsight управляет выполнением вызовов, параметр контекста вычислений hello.</span><span class="sxs-lookup"><span data-stu-id="64b87-104">Microsoft R Server on Azure HDInsight controls how calls are executed by setting hello compute context.</span></span> <span data-ttu-id="64b87-105">В этой статье рассматриваются параметры hello, будут ли доступны toospecify и как удалось распараллелить выполнения между ядрами hello граничного узла или кластера HDInsight.</span><span class="sxs-lookup"><span data-stu-id="64b87-105">This article outlines hello options that are available toospecify whether and how execution is parallelized across cores of hello edge node or HDInsight cluster.</span></span>

<span data-ttu-id="64b87-106">Hello граничного узла кластера обеспечивает удобное место tooconnect toohello кластера и toorun R-сценарии.</span><span class="sxs-lookup"><span data-stu-id="64b87-106">hello edge node of a cluster provides a convenient place tooconnect toohello cluster and toorun your R scripts.</span></span> <span data-ttu-id="64b87-107">С граничного узла у вас есть hello функций ScaleR возможность выполнения hello параллелизован распределенных между ядрами hello hello edge узел сервера.</span><span class="sxs-lookup"><span data-stu-id="64b87-107">With an edge node, you have hello option of running hello parallelized distributed functions of ScaleR across hello cores of hello edge node server.</span></span> <span data-ttu-id="64b87-108">Также выполнять их на узлах hello hello кластера с помощью элемента ScaleR Map-Reduce Hadoop или Spark контекстов вычислений.</span><span class="sxs-lookup"><span data-stu-id="64b87-108">You can also run them across hello nodes of hello cluster by using ScaleR’s Hadoop Map Reduce or Spark compute contexts.</span></span>

## <a name="microsoft-r-server-on-azure-hdinsight"></a><span data-ttu-id="64b87-109">Microsoft R Server в Azure HDInsight</span><span class="sxs-lookup"><span data-stu-id="64b87-109">Microsoft R Server on Azure HDInsight</span></span>
<span data-ttu-id="64b87-110">[Microsoft R Server на Azure HDInsight](hdinsight-hadoop-r-server-overview.md) предоставляет hello новейшим возможностям для анализа на основе R.</span><span class="sxs-lookup"><span data-stu-id="64b87-110">[Microsoft R Server on Azure HDInsight](hdinsight-hadoop-r-server-overview.md) provides hello latest capabilities for R-based analytics.</span></span> <span data-ttu-id="64b87-111">Он может использовать данные, хранящиеся в контейнере HDFS в вашей [больших двоичных объектов Azure](../storage/common/storage-introduction.md "хранилища больших двоичных объектов Azure") учетной записи хранилища, хранилища Озера данных или hello локальной файловой системе Linux.</span><span class="sxs-lookup"><span data-stu-id="64b87-111">It can use data that is stored in an HDFS container in your [Azure Blob](../storage/common/storage-introduction.md "Azure Blob storage") storage account, a Data Lake store, or hello local Linux file system.</span></span> <span data-ttu-id="64b87-112">Поскольку R Server встроена в R с открытым кодом, hello R-приложений, создаваемые можно применять какие-либо hello 8000 + пакеты R с открытым кодом.</span><span class="sxs-lookup"><span data-stu-id="64b87-112">Since R Server is built on open source R, hello R-based applications you build can apply any of hello 8000+ open source R packages.</span></span> <span data-ttu-id="64b87-113">Они могут также использовать подпрограммы hello в [RevoScaleR](https://msdn.microsoft.com/microsoft-r/scaler/scaler), пакет аналитики большие наборы данных корпорации Майкрософт, входит в состав R Server.</span><span class="sxs-lookup"><span data-stu-id="64b87-113">They can also use hello routines in [RevoScaleR](https://msdn.microsoft.com/microsoft-r/scaler/scaler), Microsoft’s big data analytics package that is included with R Server.</span></span>  

## <a name="compute-contexts-for-an-edge-node"></a><span data-ttu-id="64b87-114">Контексты вычислений для граничного узла</span><span class="sxs-lookup"><span data-stu-id="64b87-114">Compute contexts for an edge node</span></span>
<span data-ttu-id="64b87-115">Как правило сценарий R, выполняемой в R Server на hello граничного узла выполняется в интерпретатора hello R на этом узле.</span><span class="sxs-lookup"><span data-stu-id="64b87-115">In general, an R script that's run in R Server on hello edge node runs within hello R interpreter on that node.</span></span> <span data-ttu-id="64b87-116">Hello исключениями являются шагов, которые вызывают функцию ScaleR.</span><span class="sxs-lookup"><span data-stu-id="64b87-116">hello exceptions are those steps that call a ScaleR function.</span></span> <span data-ttu-id="64b87-117">Hello ScaleR вызовы выполняются в среде вычислений, которая определяется как задать контекст вычислений ScaleR hello.</span><span class="sxs-lookup"><span data-stu-id="64b87-117">hello ScaleR calls run in a compute environment that is determined by how you set hello ScaleR compute context.</span></span>  <span data-ttu-id="64b87-118">При выполнении сценария R из граничного узла hello возможных значений hello вычислений, контекста:</span><span class="sxs-lookup"><span data-stu-id="64b87-118">When you run your R script from an edge node, hello possible values of hello compute context are:</span></span>

- <span data-ttu-id="64b87-119">локальный последовательный (*‘local’*);</span><span class="sxs-lookup"><span data-stu-id="64b87-119">local sequential (*‘local’*)</span></span>
- <span data-ttu-id="64b87-120">локальный параллельный (*‘localpar’*);</span><span class="sxs-lookup"><span data-stu-id="64b87-120">local parallel (*‘localpar’*)</span></span>
- <span data-ttu-id="64b87-121">Map Reduce</span><span class="sxs-lookup"><span data-stu-id="64b87-121">Map Reduce</span></span>
- <span data-ttu-id="64b87-122">Spark</span><span class="sxs-lookup"><span data-stu-id="64b87-122">Spark</span></span>

<span data-ttu-id="64b87-123">Hello *'local'* и *«localpar»* параметры отличаются только в том, как **rxExec** вызовы выполняются.</span><span class="sxs-lookup"><span data-stu-id="64b87-123">hello *‘local’* and *‘localpar’* options differ only in how **rxExec** calls are executed.</span></span> <span data-ttu-id="64b87-124">Они оба выполняются другие вызовы функций rx параллельных образом для всех доступных ядер Если не указано иное с помощью hello ScaleR **numCoresToUse** вариант, например `rxOptions(numCoresToUse=6)`.</span><span class="sxs-lookup"><span data-stu-id="64b87-124">They both execute other rx-function calls in a parallel manner across all available cores unless specified otherwise through use of hello ScaleR **numCoresToUse** option, for example `rxOptions(numCoresToUse=6)`.</span></span> <span data-ttu-id="64b87-125">Параметры параллельного выполнения обеспечивают оптимальную производительность.</span><span class="sxs-lookup"><span data-stu-id="64b87-125">Parallel execution options offer optimal performance.</span></span>

<span data-ttu-id="64b87-126">Hello в следующей таблице перечислены различные вычислений tooset параметры контекста выполнения вызовов hello.</span><span class="sxs-lookup"><span data-stu-id="64b87-126">hello following table summarizes hello various compute context options tooset how calls are executed:</span></span>

| <span data-ttu-id="64b87-127">Контекст вычислений</span><span class="sxs-lookup"><span data-stu-id="64b87-127">Compute context</span></span>  | <span data-ttu-id="64b87-128">Как tooset</span><span class="sxs-lookup"><span data-stu-id="64b87-128">How tooset</span></span>                      | <span data-ttu-id="64b87-129">Контекст выполнения</span><span class="sxs-lookup"><span data-stu-id="64b87-129">Execution context</span></span>                        |
| ---------------- | ------------------------------- | ---------------------------------------- |
| <span data-ttu-id="64b87-130">Локальный последовательный</span><span class="sxs-lookup"><span data-stu-id="64b87-130">Local sequential</span></span> | <span data-ttu-id="64b87-131">rxSetComputeContext(‘local’)</span><span class="sxs-lookup"><span data-stu-id="64b87-131">rxSetComputeContext(‘local’)</span></span>    | <span data-ttu-id="64b87-132">Параллелизованный выполнения между ядрами hello hello пограничного узел сервера, за исключением rxExec вызовы, которые обрабатываются последовательно</span><span class="sxs-lookup"><span data-stu-id="64b87-132">Parallelized execution across hello cores of hello edge node server, except for rxExec calls, which are executed serially</span></span> |
| <span data-ttu-id="64b87-133">Локальный параллельный</span><span class="sxs-lookup"><span data-stu-id="64b87-133">Local parallel</span></span>   | <span data-ttu-id="64b87-134">rxSetComputeContext(‘localpar’)</span><span class="sxs-lookup"><span data-stu-id="64b87-134">rxSetComputeContext(‘localpar’)</span></span> | <span data-ttu-id="64b87-135">Параллелизованный выполнения между ядрами hello hello пограничный сервер узла</span><span class="sxs-lookup"><span data-stu-id="64b87-135">Parallelized execution across hello cores of hello edge node server</span></span> |
| <span data-ttu-id="64b87-136">Spark</span><span class="sxs-lookup"><span data-stu-id="64b87-136">Spark</span></span>            | <span data-ttu-id="64b87-137">RxSpark()</span><span class="sxs-lookup"><span data-stu-id="64b87-137">RxSpark()</span></span>                       | <span data-ttu-id="64b87-138">Параллельно распределенное выполнение через Spark на узлах hello hello кластер HDI</span><span class="sxs-lookup"><span data-stu-id="64b87-138">Parallelized distributed execution via Spark across hello nodes of hello HDI cluster</span></span> |
| <span data-ttu-id="64b87-139">Map Reduce</span><span class="sxs-lookup"><span data-stu-id="64b87-139">Map Reduce</span></span>       | <span data-ttu-id="64b87-140">RxHadoopMR()</span><span class="sxs-lookup"><span data-stu-id="64b87-140">RxHadoopMR()</span></span>                    | <span data-ttu-id="64b87-141">Параллельно распределенное выполнение через Map Reduce по узлам hello hello кластер HDI</span><span class="sxs-lookup"><span data-stu-id="64b87-141">Parallelized distributed execution via Map Reduce across hello nodes of hello HDI cluster</span></span> |

## <a name="guidelines-for-deciding-on-a-compute-context"></a><span data-ttu-id="64b87-142">Рекомендации по выбору контекста вычислений</span><span class="sxs-lookup"><span data-stu-id="64b87-142">Guidelines for deciding on a compute context</span></span>

<span data-ttu-id="64b87-143">Какой из трех вариантов hello выборе, предоставляющие Параллелизованный выполнения зависит от природы hello работы аналитика, размер hello и hello расположения данных.</span><span class="sxs-lookup"><span data-stu-id="64b87-143">Which of hello three options you choose that provide parallelized execution depends on hello nature of your analytics work, hello size, and hello location of your data.</span></span> <span data-ttu-id="64b87-144">Нет нет простой формулы, информирующее о которой toouse контекст вычислений.</span><span class="sxs-lookup"><span data-stu-id="64b87-144">There is no simple formula that tells you which compute context toouse.</span></span> <span data-ttu-id="64b87-145">Однако, существуют некоторые основные принципы, которые помогут вам сделать правильный выбор hello, или по крайней мере, помочь сузить выбранные параметры перед запуском теста производительности.</span><span class="sxs-lookup"><span data-stu-id="64b87-145">There are, however, some guiding principles that can help you make hello right choice, or, at least, help you narrow down your choices before you run a benchmark.</span></span> <span data-ttu-id="64b87-146">К ним относятся следующие:</span><span class="sxs-lookup"><span data-stu-id="64b87-146">These guiding principles include:</span></span>

- <span data-ttu-id="64b87-147">локальная файловая система Linux Hello выполняется быстрее, чем HDFS.</span><span class="sxs-lookup"><span data-stu-id="64b87-147">hello local Linux file system is faster than HDFS.</span></span>
- <span data-ttu-id="64b87-148">Повторяющиеся анализ работают быстрее, если локальные данные hello и если он находится в XDF.</span><span class="sxs-lookup"><span data-stu-id="64b87-148">Repeated analyses are faster if hello data is local, and if it's in XDF.</span></span>
- <span data-ttu-id="64b87-149">Он является более предпочтительным, чем toostream небольших объемов данных из источника данных text.</span><span class="sxs-lookup"><span data-stu-id="64b87-149">It's preferable toostream small amounts of data from a text data source.</span></span> <span data-ttu-id="64b87-150">Если размер hello объем данных, преобразуйте его tooXDF перед анализом.</span><span class="sxs-lookup"><span data-stu-id="64b87-150">If hello amount of data is larger, convert it tooXDF before analysis.</span></span>
- <span data-ttu-id="64b87-151">издержки Hello копирование или потоковая передача граничного узла toohello hello данных для анализа становится неудобными для очень больших объемов данных.</span><span class="sxs-lookup"><span data-stu-id="64b87-151">hello overhead of copying or streaming hello data toohello edge node for analysis becomes unmanageable for very large amounts of data.</span></span>
- <span data-ttu-id="64b87-152">Spark работает быстрее, чем MapReduce для анализа в Hadoop.</span><span class="sxs-lookup"><span data-stu-id="64b87-152">Spark is faster than Map Reduce for analysis in Hadoop.</span></span>

<span data-ttu-id="64b87-153">Учитывая эти принципы, hello в последующих разделах приводятся некоторые общие правила выбора контекст вычислений.</span><span class="sxs-lookup"><span data-stu-id="64b87-153">Given these principles, hello following sections offer some general rules of thumb for selecting a compute context.</span></span>

### <a name="local"></a><span data-ttu-id="64b87-154">Local</span><span class="sxs-lookup"><span data-stu-id="64b87-154">Local</span></span>
* <span data-ttu-id="64b87-155">Если не требуется повторный анализ hello объем данных tooanalyze мал, затем потоковой его непосредственно в hello анализ сопоставление с помощью *'local'* или *«localpar»*.</span><span class="sxs-lookup"><span data-stu-id="64b87-155">If hello amount of data tooanalyze is small and does not require repeated analysis, then stream it directly into hello analysis routine using *'local'* or *'localpar'*.</span></span>
* <span data-ttu-id="64b87-156">Если объем hello tooanalyze данных небольшого или среднего размера и требует повторного анализа, затем скопируйте его toohello локальной файловой системе, импортировать его tooXDF и проанализировать их через *'local'* или *«localpar»*.</span><span class="sxs-lookup"><span data-stu-id="64b87-156">If hello amount of data tooanalyze is small or medium-sized and requires repeated analysis, then copy it toohello local file system, import it tooXDF, and analyze it via *'local'* or *'localpar'*.</span></span>

### <a name="hadoop-spark"></a><span data-ttu-id="64b87-157">Hadoop Spark</span><span class="sxs-lookup"><span data-stu-id="64b87-157">Hadoop Spark</span></span>
* <span data-ttu-id="64b87-158">Если объем hello tooanalyze данных имеет большой размер, затем импортировать его tooa Spark кадр данных с помощью **RxHiveData** или **RxParquetData**, или tooXDF в HDFS (если хранилище не проблемы) и проанализировать его с помощью hello Spark контекста вычислений.</span><span class="sxs-lookup"><span data-stu-id="64b87-158">If hello amount of data tooanalyze is large, then import it tooa Spark DataFrame using **RxHiveData** or **RxParquetData**, or tooXDF in HDFS (unless storage is an issue), and analyze it using hello Spark compute context.</span></span>

### <a name="hadoop-map-reduce"></a><span data-ttu-id="64b87-159">Hadoop Map Reduce</span><span class="sxs-lookup"><span data-stu-id="64b87-159">Hadoop Map Reduce</span></span>
* <span data-ttu-id="64b87-160">Используйте контекст вычислений Map Reduce hello только в случае проблемы непреодолимые с контекстом вычислений Spark hello так как это обычно медленнее.</span><span class="sxs-lookup"><span data-stu-id="64b87-160">Use hello Map Reduce compute context only if you encounter an insurmountable problem with hello Spark compute context since it is generally slower.</span></span>  

## <a name="inline-help-on-rxsetcomputecontext"></a><span data-ttu-id="64b87-161">Встроенная справка по rxSetComputeContext</span><span class="sxs-lookup"><span data-stu-id="64b87-161">Inline help on rxSetComputeContext</span></span>
<span data-ttu-id="64b87-162">Дополнительные сведения и примеры ScaleR контекстов вычислений см. в разделе hello встроенной справки в R в методе rxSetComputeContext hello, например:</span><span class="sxs-lookup"><span data-stu-id="64b87-162">For more information and examples of ScaleR compute contexts, see hello inline help in R on hello rxSetComputeContext method, for example:</span></span>

    > ?rxSetComputeContext

<span data-ttu-id="64b87-163">Можно также ссылаться toohello»[руководство распределенных вычислений ScaleR](https://msdn.microsoft.com/microsoft-r/scaler-distributed-computing)", которое доступно из hello [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server на сайте MSDN") библиотеки.</span><span class="sxs-lookup"><span data-stu-id="64b87-163">You can also refer toohello “[ScaleR Distributed Computing Guide](https://msdn.microsoft.com/microsoft-r/scaler-distributed-computing)” that's available from hello [R Server MSDN](https://msdn.microsoft.com/library/mt674634.aspx "R Server on MSDN") library.</span></span>

## <a name="next-steps"></a><span data-ttu-id="64b87-164">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="64b87-164">Next steps</span></span>
<span data-ttu-id="64b87-165">В этой статье вы узнали о параметрах hello доступных toospecify способ и выполнения параллелизации подвергается между ядрами hello граничного узла или кластера HDInsight.</span><span class="sxs-lookup"><span data-stu-id="64b87-165">In this article, you learned about hello options that are available toospecify whether and how execution is parallelized across cores of hello edge node or HDInsight cluster.</span></span> <span data-ttu-id="64b87-166">toolearn Дополнительные сведения о как кластеры toouse R Server с HDInsight, в разделе hello следующие вопросы:</span><span class="sxs-lookup"><span data-stu-id="64b87-166">toolearn more about how toouse R Server with HDInsight clusters, see hello following topics:</span></span>

* [<span data-ttu-id="64b87-167">Общие сведения об R Server в HDInsight (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="64b87-167">Overview of R Server for Hadoop</span></span>](hdinsight-hadoop-r-server-overview.md)
* [<span data-ttu-id="64b87-168">Приступая к работе с R Server в HDInsight (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="64b87-168">Get started with R Server for Hadoop</span></span>](hdinsight-hadoop-r-server-get-started.md)
* [<span data-ttu-id="64b87-169">Добавление сервера RStudio tooHDInsight (если не добавлен во время создания кластера)</span><span class="sxs-lookup"><span data-stu-id="64b87-169">Add RStudio Server tooHDInsight (if not added during cluster creation)</span></span>](hdinsight-hadoop-r-server-install-r-studio.md)
* [<span data-ttu-id="64b87-170">Параметры службы хранилища Azure для R Server в HDInsight (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="64b87-170">Azure Storage options for R Server on HDInsight</span></span>](hdinsight-hadoop-r-server-storage.md)

