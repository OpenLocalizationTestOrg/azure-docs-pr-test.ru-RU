---
title: "расписание исправления aaaConfigure ОС для кластеров под управлением Linux HDInsight - Azure | Документы Microsoft"
description: "Узнайте, как кластеры расписание исправления tooconfigure ОС для HDInsight под управлением Linux."
services: hdinsight
documentationcenter: 
author: bprakash
manager: asadk
editor: bprakash
ms.assetid: 
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 03/21/2017
ms.author: bhanupr
ms.openlocfilehash: 1598d64e594d7e8a68573fc63dd86051a5a9d025
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="os-patching-for-hdinsight"></a><span data-ttu-id="fd17f-103">Обновление путем частичной замены ОС для кластеров HDInsight</span><span class="sxs-lookup"><span data-stu-id="fd17f-103">OS patching for HDInsight</span></span> 
<span data-ttu-id="fd17f-104">Как управляемая служба Hadoop HDInsight отвечает за исправление hello ОС из hello, базовые виртуальные машины, используемые в кластерах HDInsight.</span><span class="sxs-lookup"><span data-stu-id="fd17f-104">As a managed Hadoop service, HDInsight takes care of patching hello OS of hello underlying VMs used by HDInsight clusters.</span></span> <span data-ttu-id="fd17f-105">Начиная с 1 августа 2016 г. Мы изменили исправления политика hello гостевой операционной системы для кластеров HDInsight под управлением Linux (версии 3.4 или выше).</span><span class="sxs-lookup"><span data-stu-id="fd17f-105">As of August 1, 2016, we have changed hello guest OS patching policy for Linux-based HDInsight clusters (version 3.4 or greater).</span></span> <span data-ttu-id="fd17f-106">Цель Hello hello новой политики — toosignificantly снизить количество hello перезагрузки из-за toopatching.</span><span class="sxs-lookup"><span data-stu-id="fd17f-106">hello goal of hello new policy is toosignificantly reduce hello number of reboots due toopatching.</span></span> <span data-ttu-id="fd17f-107">Новая политика Hello по-прежнему toopatch виртуальных машин (ВМ) в Linux кластеры каждый понедельник или Четверг, начиная с 12: 00 UTC в виде перемещение по узлам данного кластера.</span><span class="sxs-lookup"><span data-stu-id="fd17f-107">hello new policy will continue toopatch virtual machines (VMs) on Linux clusters every Monday or Thursday starting at 12AM UTC in a staggered fashion across nodes in any given cluster.</span></span> <span data-ttu-id="fd17f-108">Тем не менее все виртуальные Машины, заданного перезагрузится только один раз каждые 30 дней, из-за исправления tooguest ОС.</span><span class="sxs-lookup"><span data-stu-id="fd17f-108">However, any given VM will only reboot at most once every 30 days due tooguest OS patching.</span></span> <span data-ttu-id="fd17f-109">Кроме того hello первой перезагрузки для только что созданный кластер не произойдет раньше, чем 30 дней после даты создания кластера hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-109">In addition, hello first reboot for a newly created cluster will not happen sooner than 30 days from hello cluster creation date.</span></span> <span data-ttu-id="fd17f-110">Обновления будут действовать после перезагружаются hello виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fd17f-110">Patches will be effective once hello VMs are rebooted.</span></span>

## <a name="how-tooconfigure-hello-os-patching-schedule-for-linux-based-hdinsight-clusters"></a><span data-ttu-id="fd17f-111">Как tooconfigure hello расписание исправления операционной системы для кластеров HDInsight под управлением Linux</span><span class="sxs-lookup"><span data-stu-id="fd17f-111">How tooconfigure hello OS patching schedule for Linux-based HDInsight clusters</span></span>
<span data-ttu-id="fd17f-112">Hello виртуальных машин в кластер HDInsight должны toobe иногда перезагрузить, чтобы можно было установить важных исправлений.</span><span class="sxs-lookup"><span data-stu-id="fd17f-112">hello virtual machines in an HDInsight cluster need toobe rebooted occasionally so that important security patches can be installed.</span></span> <span data-ttu-id="fd17f-113">Начиная с 1 августа 2016 г. новые кластеры HDInsight под управлением Linux (версия 3.4 или более поздней версии) перезагружаются hello следующие расписания:</span><span class="sxs-lookup"><span data-stu-id="fd17f-113">As of August 1, 2016, new Linux-based HDInsight clusters (version 3.4 or greater,) are rebooted using hello following schedule:</span></span>

1. <span data-ttu-id="fd17f-114">Виртуальной машины в кластере hello можно только перезагрузить для исправлений максимум один раз в течение 30-дневного периода.</span><span class="sxs-lookup"><span data-stu-id="fd17f-114">A virtual machine in hello cluster can only reboot for patches at most, once within a 30-day period.</span></span>
2. <span data-ttu-id="fd17f-115">Перезагрузка Hello происходит, начиная с 00: 00 UTC.</span><span class="sxs-lookup"><span data-stu-id="fd17f-115">hello reboot occurs starting at 12AM UTC.</span></span>
3. <span data-ttu-id="fd17f-116">процесс перезагрузки Hello происходит постепенно на виртуальных машинах в кластере hello, поэтому hello кластера по-прежнему доступна во время перезагрузки hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-116">hello reboot process is staggered across virtual machines in hello cluster, so hello cluster is still available during hello reboot process.</span></span>
4. <span data-ttu-id="fd17f-117">Hello первой перезагрузки для только что созданный кластер не произойдет раньше, чем через 30 дней после даты создания кластера hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-117">hello first reboot for a newly created cluster will not happen sooner than 30 days after hello cluster creation date.</span></span>

<span data-ttu-id="fd17f-118">Используя действие hello сценария, описанных в этой статье, можно изменить расписание исправления hello ОС следующим образом:</span><span class="sxs-lookup"><span data-stu-id="fd17f-118">Using hello script action described in this article, you can modify hello OS patching schedule as follows:</span></span>
1. <span data-ttu-id="fd17f-119">Можно включить или отключить автоматическую перезагрузку.</span><span class="sxs-lookup"><span data-stu-id="fd17f-119">Enable or disable automatic reboots</span></span>
2. <span data-ttu-id="fd17f-120">Частота hello набор перезагрузки (в днях между перезагрузками)</span><span class="sxs-lookup"><span data-stu-id="fd17f-120">Set hello frequency of reboots (days between reboots)</span></span>
3. <span data-ttu-id="fd17f-121">Задать hello день недели hello, когда происходит перезагрузка</span><span class="sxs-lookup"><span data-stu-id="fd17f-121">Set hello day of hello week when a reboot occurs</span></span>

> [!NOTE]
> <span data-ttu-id="fd17f-122">Это действие сценария будет работать только с кластерами HDInsight под управлением Linux, созданными после 1 августа 2016 года.</span><span class="sxs-lookup"><span data-stu-id="fd17f-122">This script action will only work with Linux-based HDInsight clusters created after August 1st, 2016.</span></span> <span data-ttu-id="fd17f-123">Исправления начнут действовать только после перезагрузки виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="fd17f-123">Patches will be effective only when VMs are rebooted.</span></span> 
>

## <a name="how-toouse-hello-script"></a><span data-ttu-id="fd17f-124">Как toouse hello сценария</span><span class="sxs-lookup"><span data-stu-id="fd17f-124">How toouse hello script</span></span> 

<span data-ttu-id="fd17f-125">При использовании этого сценария требуется hello следующую информацию:</span><span class="sxs-lookup"><span data-stu-id="fd17f-125">When using this script requires hello following information:</span></span>
1. <span data-ttu-id="fd17f-126">Здравствуйте, расположение сценария: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight использует этот URI toofind и запустите сценарий hello на всех виртуальных машинах hello в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-126">hello script location: https://hdiconfigactions.blob.core.windows.net/linuxospatchingrebootconfigv01/os-patching-reboot-config.sh.  HDInsight uses this URI toofind and run hello script on all hello virtual machines in hello cluster.</span></span>
  
2. <span data-ttu-id="fd17f-127">Здравствуйте типы узлов кластера, к которым применяется сценарий hello: головному узлу, workernode, zookeeper.</span><span class="sxs-lookup"><span data-stu-id="fd17f-127">hello cluster node types that hello script is applied to: headnode, workernode, zookeeper.</span></span> <span data-ttu-id="fd17f-128">Этот скрипт должен быть применен tooall типов узлов в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-128">This script must be applied tooall node types in hello cluster.</span></span> <span data-ttu-id="fd17f-129">Если это не применен tooa тип узла, а затем hello виртуальной машины для этого типа узла по-прежнему toouse hello предыдущего исправления расписания.</span><span class="sxs-lookup"><span data-stu-id="fd17f-129">If it is not applied tooa node type, then hello virtual machines for that node type will continue toouse hello previous patching schedule.</span></span>


3.  <span data-ttu-id="fd17f-130">Параметры. Этот сценарий принимает три числовых параметра.</span><span class="sxs-lookup"><span data-stu-id="fd17f-130">Parameter: This script accepts three numeric parameters:</span></span>

    | <span data-ttu-id="fd17f-131">Параметр</span><span class="sxs-lookup"><span data-stu-id="fd17f-131">Parameter</span></span> | <span data-ttu-id="fd17f-132">Определение</span><span class="sxs-lookup"><span data-stu-id="fd17f-132">Definition</span></span> |
    | --- | --- |
    | <span data-ttu-id="fd17f-133">Включение или отключение автоматических перезагрузок.</span><span class="sxs-lookup"><span data-stu-id="fd17f-133">Enable/disable automatic reboots</span></span> |<span data-ttu-id="fd17f-134">0 или 1.</span><span class="sxs-lookup"><span data-stu-id="fd17f-134">0 or 1.</span></span> <span data-ttu-id="fd17f-135">Значение 0 отключает автоматические перезагрузки, а значение 1 — включает.</span><span class="sxs-lookup"><span data-stu-id="fd17f-135">A value of 0 disables automatic reboots while 1 enables automatic reboots.</span></span> |
    | <span data-ttu-id="fd17f-136">Frequency</span><span class="sxs-lookup"><span data-stu-id="fd17f-136">Frequency</span></span> |<span data-ttu-id="fd17f-137">7 too90 (включительно).</span><span class="sxs-lookup"><span data-stu-id="fd17f-137">7 too90 (inclusive).</span></span> <span data-ttu-id="fd17f-138">количество дней toowait перед перезапуском hello виртуальных машин для обновления, которые требуют перезагрузки Hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-138">hello number of days toowait before rebooting hello virtual machines for patches that require a reboot.</span></span> |
    | <span data-ttu-id="fd17f-139">День недели</span><span class="sxs-lookup"><span data-stu-id="fd17f-139">Day of week</span></span> |<span data-ttu-id="fd17f-140">1 too7 (включительно).</span><span class="sxs-lookup"><span data-stu-id="fd17f-140">1 too7 (inclusive).</span></span> <span data-ttu-id="fd17f-141">Значение 1 указывает перезагрузки hello должно выполняться в понедельник, а 7 — пример Sunday.For, с помощью параметров 1 2 60 результаты в автоматически перезагружается каждые 60 дней (максимум) во вторник.</span><span class="sxs-lookup"><span data-stu-id="fd17f-141">A value of 1 indicates hello reboot should occur on a Monday, and 7 indicates a Sunday.For example, using parameters of 1 60 2 results in automatic reboots every 60 days (at most) on Tuesday.</span></span> |
    | <span data-ttu-id="fd17f-142">Сохраняемость</span><span class="sxs-lookup"><span data-stu-id="fd17f-142">Persistence</span></span> |<span data-ttu-id="fd17f-143">При применении действия сценария tooan существующий кластер, можно пометить hello сценария сохраняется.</span><span class="sxs-lookup"><span data-stu-id="fd17f-143">When applying a script action tooan existing cluster, you can mark hello script as persisted.</span></span> <span data-ttu-id="fd17f-144">Сохраненные сценарии применяются при добавлении нового workernodes toohello кластера с помощью операции масштабирования.</span><span class="sxs-lookup"><span data-stu-id="fd17f-144">Persisted scripts are applied when new workernodes are added toohello cluster through scaling operations.</span></span> |

> [!NOTE]
> <span data-ttu-id="fd17f-145">Этот скрипт необходимо пометить сохраняется при применении tooan существующего кластера.</span><span class="sxs-lookup"><span data-stu-id="fd17f-145">You must mark this script as persisted when applying tooan existing cluster.</span></span> <span data-ttu-id="fd17f-146">В противном случае новые узлы, созданные с помощью масштабирования операций будет использовать исправления расписание по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="fd17f-146">Otherwise, any new nodes created through scaling      operations will use hello default patching schedule.</span></span>
<span data-ttu-id="fd17f-147">Если применить hello сценарий как часть процесса создания кластера hello, оно сохраняется автоматически.</span><span class="sxs-lookup"><span data-stu-id="fd17f-147">If you apply hello script as part of hello cluster creation process, it is persisted automatically.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="fd17f-148">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="fd17f-148">Next steps</span></span>

<span data-ttu-id="fd17f-149">Конкретные действия по использованию hello действие скрипта, см. в следующих разделах в hello hello [HDInsight под управлением Linuz настроить кластеры, использующие действие сценария](hdinsight-hadoop-customize-cluster-linux.md):</span><span class="sxs-lookup"><span data-stu-id="fd17f-149">For specific steps on using hello script action, see hello following sections in hello [Customize Linuz-based HDInsight clusters using script action](hdinsight-hadoop-customize-cluster-linux.md):</span></span>

* [<span data-ttu-id="fd17f-150">Использование действия скрипта при создании кластера</span><span class="sxs-lookup"><span data-stu-id="fd17f-150">Use a script action during cluster creation</span></span>](hdinsight-hadoop-customize-cluster-linux.md#use-a-script-action-during-cluster-creation)
* [<span data-ttu-id="fd17f-151">Применить tooa действие скрипта под управлением кластера</span><span class="sxs-lookup"><span data-stu-id="fd17f-151">Apply a script action tooa running cluster</span></span>](hdinsight-hadoop-customize-cluster-linux.md#apply-a-script-action-to-a-running-cluster)
