---
title: "Безопасность Hadoop — присоединенные к домену кластеры HDInsight — Azure | Документация Майкрософт"
description: "Дополнительные сведения"
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 10/31/2016
ms.author: saurinsh
ms.openlocfilehash: 303be1d303df8074283cb1d37c74923cca80ae59
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="an-introduction-to-hadoop-security-with-domain-joined-hdinsight-clusters-preview"></a><span data-ttu-id="0f856-103">Основные сведения о безопасности Hadoop в присоединенных к домену кластерах HDInsight (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="0f856-103">An introduction to Hadoop security with domain-joined HDInsight clusters (Preview)</span></span>

<span data-ttu-id="0f856-104">До сегодняшнего дня служба Azure HDInsight поддерживала локального администратора, работающего только с одним пользователем. Такой сценарий отлично подходил для небольших отделов по работе с приложениями.</span><span class="sxs-lookup"><span data-stu-id="0f856-104">Azure HDInsight until today supported only a single user local admin. This worked great for smaller application teams or departments.</span></span> <span data-ttu-id="0f856-105">По мере набора популярности рабочих нагрузок Hadoop в корпоративном секторе увеличилась потребность в возможностях корпоративного уровня, таких как проверка подлинности на основе Active Directory, поддержка нескольких пользователей и управление доступом на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="0f856-105">As Hadoop based workloads gained more popularity in the enterprise sector, the need for enterprise grade capabilities like active directory based authentication, multi-user support, and role based access control became increasingly important.</span></span> <span data-ttu-id="0f856-106">С помощью присоединенных к домену кластеров HDInsight можно создать кластер HDInsight, присоединенный к домену Active Directory, настроить список сотрудников компании, которые могут пройти проверку подлинности в Azure Active Directory для входа в кластер HDInsight.</span><span class="sxs-lookup"><span data-stu-id="0f856-106">Using Domain-joined HDInsight clusters, you can create an HDInsight cluster joined to an Active Directory domain, configure a list of employees from the enterprise who can authenticate through Azure Active Directory to log on to HDInsight cluster.</span></span> <span data-ttu-id="0f856-107">Люди, которые не являются сотрудниками организации, не могут войти в кластер HDInsight или получить к нему доступ.</span><span class="sxs-lookup"><span data-stu-id="0f856-107">Anyone outside the enterprise cannot log on or access the HDInsight cluster.</span></span> <span data-ttu-id="0f856-108">Корпоративный администратор может настроить управление доступом на основе ролей для обеспечения защиты Hive с помощью [Apache Ranger](http://hortonworks.com/apache/ranger/) и ограничить доступ к данным до требуемого уровня.</span><span class="sxs-lookup"><span data-stu-id="0f856-108">The enterprise admin can configure role based access control for Hive security using [Apache Ranger](http://hortonworks.com/apache/ranger/), thus restricting access to data to only as much as needed.</span></span> <span data-ttu-id="0f856-109">Наконец, администратор может провести аудит доступа к данным по сотрудникам, а также аудит любых изменений в политиках контроля доступа, обеспечивая высокий уровень контроля над корпоративными ресурсами.</span><span class="sxs-lookup"><span data-stu-id="0f856-109">Finally, the admin can audit the data access by employees, and any changes done to access control policies, thus achieving a high degree of governance of their corporate resources.</span></span>

> [!NOTE]
> <span data-ttu-id="0f856-110">Новые возможности, описанные в этой предварительной версии, доступны только в кластерах HDInsight под управлением Linux для рабочей нагрузки Hive.</span><span class="sxs-lookup"><span data-stu-id="0f856-110">The new features described in this preview are available only on Linux-based HDInsight clusters for Hive workload.</span></span> <span data-ttu-id="0f856-111">Поддержка других рабочих нагрузок, таких как HBase, Spark, Storm и Kafka, будет добавлена в будущих выпусках.</span><span class="sxs-lookup"><span data-stu-id="0f856-111">The other workloads, such as HBase, Spark, Storm and Kafka, will be enabled in future releases.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0f856-112">Oozie не включен в присоединенном к домену кластере HDInsight.</span><span class="sxs-lookup"><span data-stu-id="0f856-112">Oozie is not enabled on domain-joined HDInsight.</span></span>

## <a name="benefits"></a><span data-ttu-id="0f856-113">Преимущества</span><span class="sxs-lookup"><span data-stu-id="0f856-113">Benefits</span></span>
<span data-ttu-id="0f856-114">Безопасность корпоративного уровня разделяется на четыре обширных составляющих — безопасность периметра, проверка подлинности, авторизация и шифрование.</span><span class="sxs-lookup"><span data-stu-id="0f856-114">Enterprise Security contains four big pillars – Perimeter Security, Authentication, Authorization, and Encryption.</span></span>

![Преимущества, предоставляемые основными составляющими присоединенного к домену кластера HDInsight](./media/hdinsight-domain-joined-introduction/hdinsight-domain-joined-four-pillars.png)<span data-ttu-id="0f856-116">.</span><span class="sxs-lookup"><span data-stu-id="0f856-116">.</span></span>

### <a name="perimeter-security"></a><span data-ttu-id="0f856-117">Безопасность периметра</span><span class="sxs-lookup"><span data-stu-id="0f856-117">Perimeter Security</span></span>
<span data-ttu-id="0f856-118">Безопасность периметра в HDInsight обеспечивается за счет виртуальных сетей и службы шлюза.</span><span class="sxs-lookup"><span data-stu-id="0f856-118">Perimeter security in HDInsight is achieved using virtual networks and Gateway service.</span></span> <span data-ttu-id="0f856-119">В настоящее время корпоративный администратор может создать кластер HDInsight в виртуальной сети и ограничить доступ к ней с помощью групп безопасности сети (правила входящего и исходящего трафика брандмауэра).</span><span class="sxs-lookup"><span data-stu-id="0f856-119">Today, an enterprise admin can create an HDInsight cluster inside a virtual network and use Network Security Groups (inbound or outbound firewall rules) to restrict access to the virtual network.</span></span> <span data-ttu-id="0f856-120">Для обмена данными с кластером HDInsight будут использоваться только IP-адреса, определенные в правилах исходящего трафика брандмауэра, тем самым обеспечивая безопасность периметра.</span><span class="sxs-lookup"><span data-stu-id="0f856-120">Only the IP addresses defined in the inbound firewall rules will be able to communicate with the HDInsight cluster, thus providing perimeter security.</span></span> <span data-ttu-id="0f856-121">Еще один уровень безопасности периметра обеспечивает шлюз.</span><span class="sxs-lookup"><span data-stu-id="0f856-121">Another layer of perimeter security is achieved using Gateway service.</span></span> <span data-ttu-id="0f856-122">Шлюз — это служба, выступающая в качестве первой линии обороны для любого входящего запроса к кластеру HDInsight.</span><span class="sxs-lookup"><span data-stu-id="0f856-122">The Gateway is the service which acts as first line of defense for any incoming request to the HDInsight cluster.</span></span> <span data-ttu-id="0f856-123">Он принимает запрос, проверяет его и только после этого позволяет его передачу на другие узлы в кластере, обеспечивая таким образом безопасность периметра для других узлов имен и данных в кластере.</span><span class="sxs-lookup"><span data-stu-id="0f856-123">It accepts the request, validates it and only then allows the request to pass to the other nodes in cluster, thus providing perimeter security to other name and data nodes in the cluster.</span></span>

### <a name="authentication"></a><span data-ttu-id="0f856-124">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="0f856-124">Authentication</span></span>
<span data-ttu-id="0f856-125">С помощью этой общедоступной предварительной версии корпоративный администратор может подготовить присоединенный к домену кластер HDInsight в [виртуальной сети](https://azure.microsoft.com/services/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="0f856-125">With this public preview, an enterprise admin can provision a Domain-joined HDInsight cluster, in a [virtual network](https://azure.microsoft.com/services/virtual-network/).</span></span> <span data-ttu-id="0f856-126">Узлы кластера HDInsight присоединяются к домену, управление которым осуществляется на корпоративном уровне.</span><span class="sxs-lookup"><span data-stu-id="0f856-126">The nodes of the HDInsight cluster will be joined to the domain managed by the enterprise.</span></span> <span data-ttu-id="0f856-127">Для этого нужно использовать [доменные службы Azure Active Directory](../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0f856-127">This is achieved through use of [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span></span> <span data-ttu-id="0f856-128">Все узлы в кластере присоединяются к домену, управление которым осуществляется на корпоративном уровне.</span><span class="sxs-lookup"><span data-stu-id="0f856-128">All the nodes in the cluster are joined to a domain that the enterprise manages.</span></span> <span data-ttu-id="0f856-129">При такой конфигурации сотрудники компании могут войти в узлы кластера с использованием своих учетных данных домена.</span><span class="sxs-lookup"><span data-stu-id="0f856-129">With this setup, the enterprise employees can log on to the cluster nodes using their domain credentials.</span></span> <span data-ttu-id="0f856-130">Кроме того, эти учетные данные можно использовать для проверки подлинности в других утвержденных конечных точках, например Hue, представлениях Ambari, ODBC, JDBC, PowerShell и интерфейсах REST API, а также для взаимодействия с кластером.</span><span class="sxs-lookup"><span data-stu-id="0f856-130">They can also use their domain credentials to authenticate with other approved endpoints like Hue, Ambari Views, ODBC, JDBC, PowerShell and REST APIs to interact with the cluster.</span></span> <span data-ttu-id="0f856-131">Администратор полностью управляет ограничением числа пользователей, взаимодействующих с кластером через эти конечные точки.</span><span class="sxs-lookup"><span data-stu-id="0f856-131">The admin has full control over limiting the number of users interacting with the cluster via these endpoints.</span></span>

### <a name="authorization"></a><span data-ttu-id="0f856-132">Авторизация</span><span class="sxs-lookup"><span data-stu-id="0f856-132">Authorization</span></span>
<span data-ttu-id="0f856-133">В большинстве компаний следуют такой рекомендации: доступ ко всем корпоративным ресурсам предоставляется не всем сотрудникам.</span><span class="sxs-lookup"><span data-stu-id="0f856-133">A best practice followed by most enterprises is that not every employee has access to all enterprise resources.</span></span> <span data-ttu-id="0f856-134">Аналогичным образом в этом выпуске администратор может определить политики управления доступом на основе ролей для ресурсов кластера.</span><span class="sxs-lookup"><span data-stu-id="0f856-134">Likewise, with this release, the admin can define role based access control policies for the cluster resources.</span></span> <span data-ttu-id="0f856-135">Например, администратор может настроить [Apache Ranger](http://hortonworks.com/apache/ranger/), чтобы настроить политики контроля доступа для Hive.</span><span class="sxs-lookup"><span data-stu-id="0f856-135">For example, the admin can configure [Apache Ranger](http://hortonworks.com/apache/ranger/) to set access control policies for Hive.</span></span> <span data-ttu-id="0f856-136">Эта возможность гарантирует, что сотрудники будут иметь доступ только к тем данным, которые им нужны для успешного выполнения задач.</span><span class="sxs-lookup"><span data-stu-id="0f856-136">This functionality ensures that employees will be able to access only as much data as they need to be successful in their jobs.</span></span> <span data-ttu-id="0f856-137">Только администраторы могут получить доступ к кластеру по протоколу SSH.</span><span class="sxs-lookup"><span data-stu-id="0f856-137">SSH access to the cluster is also restricted only to the administrator.</span></span>

### <a name="auditing"></a><span data-ttu-id="0f856-138">Аудит</span><span class="sxs-lookup"><span data-stu-id="0f856-138">Auditing</span></span>
<span data-ttu-id="0f856-139">Кроме защиты ресурсов кластера HDInsight от неавторизованных пользователей и защиты данных, для отслеживания неавторизованного или случайного доступа к ресурсам также требуется аудит доступа к ресурсам кластера и отслеживание данных.</span><span class="sxs-lookup"><span data-stu-id="0f856-139">Along with protecting the HDInsight cluster resources from unauthorized users, and securing the data, auditing of all access to the cluster resources, and the data is necessary to track unauthorized or unintentional access of the resources.</span></span> <span data-ttu-id="0f856-140">В этой предварительной версии администратор может просмотреть все случаи получения доступа к ресурсам и данным кластера HDInsight и сообщить о них.</span><span class="sxs-lookup"><span data-stu-id="0f856-140">With this preview, the admin can view and report all access to the HDInsight cluster resources and data.</span></span> <span data-ttu-id="0f856-141">Кроме того, администратор может просмотреть все изменения в политиках контроля доступа, внесенные в поддерживаемых конечных точках Apache Ranger, и сообщить о них.</span><span class="sxs-lookup"><span data-stu-id="0f856-141">The admin can also view and report all changes to the access control policies done in Apache Ranger supported endpoints.</span></span> <span data-ttu-id="0f856-142">Для поиска журналов аудита присоединенный к домену кластер HDInsight использует знакомый пользовательский интерфейс Apache Ranger.</span><span class="sxs-lookup"><span data-stu-id="0f856-142">A Domain-joined HDInsight cluster uses the familiar Apache Ranger UI to search audit logs.</span></span> <span data-ttu-id="0f856-143">В серверной части Ranger использует [Apache Solr](http://hortonworks.com/apache/solr/) для хранения и поиска журналов.</span><span class="sxs-lookup"><span data-stu-id="0f856-143">On the backend, Ranger uses [Apache Solr](http://hortonworks.com/apache/solr/) for storing and searching the logs.</span></span>

### <a name="encryption"></a><span data-ttu-id="0f856-144">Шифрование</span><span class="sxs-lookup"><span data-stu-id="0f856-144">Encryption</span></span>
<span data-ttu-id="0f856-145">Защита данных важна для соответствия требованиям корпоративной безопасности и обеспечения соответствия требованиям. Для защиты данных нужно не только ограничивать доступ к данным для несанкционированных сотрудников, но и шифровать их.</span><span class="sxs-lookup"><span data-stu-id="0f856-145">Protecting data is important for meeting organizational security and compliance requirements, and along with restricting access to data from unauthorized employees, it should also be secured by encrypting it.</span></span> <span data-ttu-id="0f856-146">Хранилища данных для кластеров HDInsight, хранилище BLOB-объектов Azure и Azure Data Lake Store поддерживают [шифрование неактивных данных](../storage/common/storage-service-encryption.md) на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="0f856-146">Both the data stores for HDInsight clusters, Azure Storage Blob, and Azure Data Lake Storage support transparent server-side [encryption of data](../storage/common/storage-service-encryption.md) at rest.</span></span> <span data-ttu-id="0f856-147">Защищенные кластеры HDInsight полностью совместимы с возможностью шифрования неактивных данных на стороне сервера.</span><span class="sxs-lookup"><span data-stu-id="0f856-147">Secure HDInsight clusters will seamlessly work with this server side encryption of data at rest capability.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0f856-148">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="0f856-148">Next steps</span></span>
* <span data-ttu-id="0f856-149">Сведения о настройке присоединенного к домену кластера HDInsight см. в [этой статье](hdinsight-domain-joined-configure.md).</span><span class="sxs-lookup"><span data-stu-id="0f856-149">For configuring a Domain-joined HDInsight cluster, see [Configure Domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="0f856-150">Сведения об управлении присоединенными к домену кластерами HDInsight см. в [этой статье](hdinsight-domain-joined-manage.md).</span><span class="sxs-lookup"><span data-stu-id="0f856-150">For managing a Domain-joined HDInsight clusters, see [Manage Domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="0f856-151">Сведения о настройке политик Hive и выполнении запросов Hive для присоединенного к домену кластера HDInsight см. [здесь](hdinsight-domain-joined-run-hive.md).</span><span class="sxs-lookup"><span data-stu-id="0f856-151">For configuring Hive policies and run Hive queries, see [Configure Hive policies for Domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="0f856-152">Сведения о выполнении запросов Hive с помощью SSH в присоединенных к домену кластерах HDInsight см. в статье [Подключение к HDInsight (Hadoop) с помощью SSH](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined).</span><span class="sxs-lookup"><span data-stu-id="0f856-152">For running Hive queries using SSH on Domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md#domainjoined).</span></span>
