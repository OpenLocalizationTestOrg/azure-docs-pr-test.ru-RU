---
title: "Виртуальный центр обработки данных Microsoft Azure | Документация Майкрософт"
description: "Узнайте, как создать виртуальный центр обработки данных в Azure"
services: networking
author: tracsman
manager: rossort
tags: azure-resource-manager
ms.service: virtual-network
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/26/2017
ms.author: jonor
ms.openlocfilehash: 487c2dc22acc5194ef103ebef01c62c887580335
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="microsoft-azure-virtual-data-center"></a><span data-ttu-id="2829c-103">Виртуальный центр обработки данных Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="2829c-103">Microsoft Azure Virtual Data Center</span></span>
<span data-ttu-id="2829c-104">**Microsoft Azure**: ускоренное перемещение, оптимальные затраты, интеграция локальных приложений и данных</span><span class="sxs-lookup"><span data-stu-id="2829c-104">**Microsoft Azure**: Move faster, Save money, Integrate on-premises apps and data</span></span>

## <a name="overview"></a><span data-ttu-id="2829c-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="2829c-105">Overview</span></span>
<span data-ttu-id="2829c-106">Перемещение локальных приложений в Azure даже без каких-либо значительных изменений (подход lift-and-shift) предоставляет организациям безопасную и экономичную инфраструктуру.</span><span class="sxs-lookup"><span data-stu-id="2829c-106">Migrating on-premises applications to Azure, even without any significant changes (an approach known as “lift and shift”), provides organizations the benefits of a secured and cost-efficient infrastructure.</span></span> <span data-ttu-id="2829c-107">Тем не менее для получения максимальной гибкости облачных вычислений организациям нужно модернизировать свою архитектуру, чтобы использовать возможности Azure в полном объеме.</span><span class="sxs-lookup"><span data-stu-id="2829c-107">However, to make the most of the agility possible with cloud computing, enterprises should evolve their architectures to take advantage of Azure capabilities.</span></span> <span data-ttu-id="2829c-108">Microsoft Azure предоставляет гипермасштабируемые службы и инфраструктуру, надежность и возможности корпоративного класса, а также множество вариантов гибридных подключений.</span><span class="sxs-lookup"><span data-stu-id="2829c-108">Microsoft Azure delivers hyper-scale services and infrastructure, enterprise-grade capabilities and reliability, and many choices for hybrid connectivity.</span></span> <span data-ttu-id="2829c-109">Клиенты могут обращаться к этим облачным службам через Интернет или с помощью службы Azure ExpressRoute, которая позволяет создавать подключения к частной сети.</span><span class="sxs-lookup"><span data-stu-id="2829c-109">Customers can choose to access these cloud services either via the Internet or with Azure ExpressRoute, which provides private network connectivity.</span></span> <span data-ttu-id="2829c-110">Платформа Microsoft Azure позволяет клиентам легко добавлять в свою инфраструктуру облачные решения и создавать многоуровневую архитектуру.</span><span class="sxs-lookup"><span data-stu-id="2829c-110">The Microsoft Azure platform allows customers to seamlessly extend their infrastructure into the cloud and build multi-tier architectures.</span></span> <span data-ttu-id="2829c-111">Кроме того, партнеры Майкрософт предоставляют расширенные возможности, предлагая службы безопасности и виртуальные устройства, оптимизированные для работы в Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-111">Additionally, Microsoft partners provide enhanced capabilities by offering security services and virtual appliances that are optimized to run in Azure.</span></span>

<span data-ttu-id="2829c-112">Эта статья содержит обзор шаблонов и разработок, которые можно использовать для решения проблем безопасности, производительности и масштабирования архитектуры, с которыми сталкиваются многие клиенты, рассматривая массовое перемещение в облако.</span><span class="sxs-lookup"><span data-stu-id="2829c-112">This article provides an overview of patterns and designs that can be used to solve the architectural scale, performance, and security concerns many customers face when thinking about moving en masse to the cloud.</span></span> <span data-ttu-id="2829c-113">Здесь также обсуждается применение различных ролей ИТ-специалистов в управлении и регулировании системы с упором на требованиях безопасности и оптимизации затрат.</span><span class="sxs-lookup"><span data-stu-id="2829c-113">An overview of how to fit different organizational IT roles into the management and governance of the system is also discussed, with emphasis to security requirements and cost optimization.</span></span>

## <a name="what-is-a-virtual-data-center"></a><span data-ttu-id="2829c-114">Что такое виртуальный центр обработки данных?</span><span class="sxs-lookup"><span data-stu-id="2829c-114">What is a Virtual Data Center?</span></span>
<span data-ttu-id="2829c-115">Изначально облачные решения были разработаны для размещения отдельных относительно изолированных приложений для общедоступного использования.</span><span class="sxs-lookup"><span data-stu-id="2829c-115">In the early days, cloud solutions were designed to host single, relatively isolated, applications, in the public spectrum.</span></span> <span data-ttu-id="2829c-116">Этот подход был оптимальным несколько лет.</span><span class="sxs-lookup"><span data-stu-id="2829c-116">This approach worked well for a few years.</span></span> <span data-ttu-id="2829c-117">Однако, когда преимущества облачных решений стали очевидными, и в облаке стало возможным размещать несколько крупномасштабных рабочих нагрузок, обеспечение безопасности, надежности, производительности и оптимальных затрат развертывания в одном или нескольких регионах стало критически важным в масштабах жизненного цикла облачной службы.</span><span class="sxs-lookup"><span data-stu-id="2829c-117">However, as the benefits of cloud solutions became apparent and multiple large-scale workloads were hosted on the cloud, addressing security, reliability, performance, and cost concerns of deployments in one or more regions became vital throughout the life cycle of the cloud service.</span></span>

<span data-ttu-id="2829c-118">На схеме облачного развертывания ниже показаны некоторые примеры упущений в системе безопасности (область выделена красным), а также пространство для оптимизации сетевых виртуальных устройств для рабочих нагрузок (области выделены желтым).</span><span class="sxs-lookup"><span data-stu-id="2829c-118">The following cloud deployment diagram illustrates some examples of security gaps (red box) and room for optimization network virtual appliances across workloads (yellow box).</span></span>

<span data-ttu-id="2829c-119">[![0]][0]</span><span class="sxs-lookup"><span data-stu-id="2829c-119">[![0]][0]</span></span>

<span data-ttu-id="2829c-120">Виртуальный центр обработки данных появился вследствие необходимости масштабирования для поддержки корпоративных рабочих нагрузок и необходимости решения проблем, возникающих при поддержке широкомасштабных приложений в общедоступном облаке.</span><span class="sxs-lookup"><span data-stu-id="2829c-120">The Virtual Data Center (vDC) was born from this necessity for scaling to support enterprise workloads, and the need to deal with the problems introduced when supporting large-scale applications in the public cloud.</span></span>

<span data-ttu-id="2829c-121">Виртуальный центр обработки данных представляет собой не только рабочие нагрузки приложения в облаке, но также сеть, безопасность, управление и инфраструктуру (например, DNS и службы каталогов).</span><span class="sxs-lookup"><span data-stu-id="2829c-121">A vDC is not just the application workloads in the cloud, but also the network, security, management, and infrastructure (for example, DNS and Directory Services).</span></span> <span data-ttu-id="2829c-122">Он также обеспечивает обратное частное подключение к локальной сети или центру обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-122">It usually also provides a private connection back to an on-premises network or data center.</span></span> <span data-ttu-id="2829c-123">Так как все больше и больше рабочих нагрузок перемещаются в Azure, важно подумать о поддержке инфраструктуры и объектов, вмещающих эти рабочие нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2829c-123">As more and more workloads move to Azure, it is important to think about the supporting infrastructure and objects that these workloads are placed in.</span></span> <span data-ttu-id="2829c-124">Верное понимание того, как структурированы ресурсы, может помочь избежать распространения сотен "островов рабочих нагрузок", которым требуется отдельное управление с независимым потоком данных, моделями безопасности и подходом к решению проблем соответствия требованиям.</span><span class="sxs-lookup"><span data-stu-id="2829c-124">Thinking carefully about how resources are structured can avoid the proliferation of hundreds of "workload islands" that must be managed separately with independent data flow, security models, and compliance challenges.</span></span>

<span data-ttu-id="2829c-125">Виртуальный центр обработки данных — это преимущественно коллекция отдельных, но связанных сущностей с общими функциями поддержки, возможностями и инфраструктурой.</span><span class="sxs-lookup"><span data-stu-id="2829c-125">A Virtual Data Center is essentially a collection of separate but related entities with common supporting functions, features, and infrastructure.</span></span> <span data-ttu-id="2829c-126">Рассматривая рабочие нагрузки как интегрированный виртуальный центр обработки данных, вы осознаете потенциальную экономию затрат за счет увеличения масштабирования, оптимизированной безопасности с помощью централизации потока данных и компонентов, а также упрощенного аудита операций, управления и соответствия требованиям.</span><span class="sxs-lookup"><span data-stu-id="2829c-126">By viewing your workloads as an integrated vDC, you can realize reduced cost due to economies of scale, optimized security through component and data flow centralization, along with easier operations, management, and compliance audits.</span></span>

> [!NOTE]
> <span data-ttu-id="2829c-127">Важно понимать, что виртуальный центр обработки данных — это **не** дискретный продукт Azure, а сочетание различных функций и возможностей для обеспечения точных требований.</span><span class="sxs-lookup"><span data-stu-id="2829c-127">It's important to understand that the vDC is **NOT** a discrete Azure product, but the combination of various features and capabilities to  meet your exact requirements.</span></span> <span data-ttu-id="2829c-128">Это возможность подумать о том, как можно использовать рабочие нагрузки и Azure для максимизации ресурсов и возможностей в облаке.</span><span class="sxs-lookup"><span data-stu-id="2829c-128">vDC is a way of thinking about your workloads and Azure usage to maximize your resources and abilities in the cloud.</span></span> <span data-ttu-id="2829c-129">Таким образом, виртуальный центр обработки данных представляет модульный подход к созданию ИТ-служб в Azure с учетом корпоративных ролей и обязанностей.</span><span class="sxs-lookup"><span data-stu-id="2829c-129">The virtual DC is therefore a modular approach on how to build up IT services in the Azure, respecting organizational roles and responsibilities.</span></span>

<span data-ttu-id="2829c-130">Этот центр может помочь реализовать предприятиям следующие сценарии для рабочих нагрузок и приложений в Azure:</span><span class="sxs-lookup"><span data-stu-id="2829c-130">The vDC can help enterprises get workloads and applications into Azure for the following scenarios:</span></span>

-   <span data-ttu-id="2829c-131">размещения нескольких связанных рабочих нагрузок;</span><span class="sxs-lookup"><span data-stu-id="2829c-131">Hosting multiple related workloads</span></span>
-   <span data-ttu-id="2829c-132">перемещения рабочих нагрузок из локальной среды в Azure;</span><span class="sxs-lookup"><span data-stu-id="2829c-132">Migrating workloads from an on-premises environment to Azure</span></span>
-   <span data-ttu-id="2829c-133">реализации общей или централизованной безопасности и требований к доступности рабочих нагрузок;</span><span class="sxs-lookup"><span data-stu-id="2829c-133">Implementing shared or centralized security and access requirements across workloads</span></span>
-   <span data-ttu-id="2829c-134">соответствующего объединения DevOps и централизованной ИТ-инфраструктуры для большого предприятия.</span><span class="sxs-lookup"><span data-stu-id="2829c-134">Mixing DevOps and Centralized IT appropriately for a large enterprise</span></span>

<span data-ttu-id="2829c-135">Ключом к получению возможности использовать преимущества виртуального центра обработки данных является централизованная топология (типа "звезда"), а также совмещение функций Azure: [виртуальной сети Azure][VNet], [групп безопасности сети][NSG], [пиринга виртуальных сетей][VNetPeering], [определенных пользователями маршрутов (UDR)][UDR], а также удостоверения Azure с [контролем доступа на основе ролей (RBAC)][RBAC].</span><span class="sxs-lookup"><span data-stu-id="2829c-135">The key to unlock the advantages of vDC, is a centralized topology (hub and spokes) with a mix of Azure features: [Azure VNet][VNet], [NSGs][NSG], [VNet Peering][VNetPeering], [User-Defined Routes (UDR)][UDR], and Azure Identity with [Role Base Access Control (RBAC)][RBAC].</span></span>

## <a name="who-needs-a-virtual-data-center"></a><span data-ttu-id="2829c-136">Кому нужен виртуальный центр обработки данных?</span><span class="sxs-lookup"><span data-stu-id="2829c-136">Who Needs a Virtual Data Center?</span></span>
<span data-ttu-id="2829c-137">Любому клиенту Azure, которому нужно переместить более нескольких рабочих нагрузок в Azure, стоит рассмотреть возможность использования общих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2829c-137">Any Azure customer that needs to move more than a couple of workloads into Azure can benefit from thinking about using common resources.</span></span> <span data-ttu-id="2829c-138">В зависимости от масштабов использование шаблонов и компонентов, заложенных в виртуальный центр обработки данных, может оказаться эффективным даже для отдельных приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-138">Depending on the magnitude, even single applications can benefit from using the patterns and components used to build a vDC.</span></span>

<span data-ttu-id="2829c-139">Если у вашей организации есть централизованная ИТ-инфраструктура, группа или отдел по сетям, обеспечению безопасности и соответствия требованиям, виртуальный центр обработки данных поможет вам в применении политики, разделении обязанностей, а также обеспечении единообразия базовых общих компонентов, не ограничивая при этом группу по работе с приложениями в определенных вопросах в соответствии со своими требованиями.</span><span class="sxs-lookup"><span data-stu-id="2829c-139">If your organization has a centralized IT, Network, Security, and/or Compliance team/department, a vDC can help enforce policy points, segregation of duty, and ensure uniformity of the underlying common components while giving application teams as much freedom and control as is appropriate for your requirements.</span></span>

<span data-ttu-id="2829c-140">Организации, которые отдают предпочтение DevOps, могут использовать основные концепции виртуального центра обработки данных для обеспечения авторизованных групп ресурсов Azure, а также обеспечить полный контроль в таких группах (подписке или группе ресурсов в общей подписке), но границы безопасности и сети соответствуют стандартам, определенным централизованной политикой в центральной виртуальной сети и группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2829c-140">Organizations that are looking to DevOps can utilize the vDC concepts to provide authorized pockets of Azure resources and ensure they have total control within that group (either subscription or resource group in a common subscription), but the network and security boundaries stay compliant as defined by a centralized policy in a hub VNet and Resource Group.</span></span>

## <a name="considerations-on-implementing-a-virtual-data-center"></a><span data-ttu-id="2829c-141">Рекомендации по реализация виртуального центра обработки данных</span><span class="sxs-lookup"><span data-stu-id="2829c-141">Considerations on Implementing a Virtual Data Center</span></span>
<span data-ttu-id="2829c-142">При разработке виртуального центра обработки данных стоит рассмотреть следующие критически важные вопросы:</span><span class="sxs-lookup"><span data-stu-id="2829c-142">When designing a vDC, there are several pivotal issues to consider:</span></span>

-   <span data-ttu-id="2829c-143">службы удостоверений и каталогов;</span><span class="sxs-lookup"><span data-stu-id="2829c-143">Identity and Directory Services</span></span>
-   <span data-ttu-id="2829c-144">инфраструктуру безопасности;</span><span class="sxs-lookup"><span data-stu-id="2829c-144">Security infrastructure</span></span>
-   <span data-ttu-id="2829c-145">подключения к облаку;</span><span class="sxs-lookup"><span data-stu-id="2829c-145">Connectivity to the cloud</span></span>
-   <span data-ttu-id="2829c-146">подключения в облаке.</span><span class="sxs-lookup"><span data-stu-id="2829c-146">Connectivity within the cloud</span></span>

##### <a name="identity-and-directory-service"></a><span data-ttu-id="2829c-147">*Службы удостоверений и каталогов*</span><span class="sxs-lookup"><span data-stu-id="2829c-147">*Identity and Directory Service*</span></span>
<span data-ttu-id="2829c-148">Службы удостоверений и каталогов — ключевой аспект всех центров обработки данных, локальных и в облаке.</span><span class="sxs-lookup"><span data-stu-id="2829c-148">Identity and Directory services are a key aspect of all data centers, both on-premises and in the cloud.</span></span> <span data-ttu-id="2829c-149">Удостоверение связано со всеми аспектами доступа и авторизации в отношении служб в пределах виртуального центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-149">Identity is related to all aspects of access and authorization to services within the vDC.</span></span> <span data-ttu-id="2829c-150">Чтобы обеспечить доступ к учетной записи и ресурсам Azure только авторизованным пользователям и процессам, Azure использует несколько типов учетных данных для аутентификации.</span><span class="sxs-lookup"><span data-stu-id="2829c-150">To help ensure that only authorized users and processes access your Azure Account and resources, Azure uses several types of credentials for authentication.</span></span> <span data-ttu-id="2829c-151">К ним относятся пароли (для доступа к учетной записи Azure), криптографические ключи, цифровые подписи и сертификаты.</span><span class="sxs-lookup"><span data-stu-id="2829c-151">These include passwords (to access the Azure account), cryptographic keys, digital signatures, and certificates.</span></span> <span data-ttu-id="2829c-152">[*Многофакторная идентификация Azure* (MFA)][MFA] — это дополнительный слой обеспечения безопасности для получения доступа к службам Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-152">[*Azure Multi-Factor Authentication* (MFA)][MFA] is an additional layer of security for accessing Azure services.</span></span> <span data-ttu-id="2829c-153">Этот слой обеспечивает надежную проверку подлинности с использованием ряда простых вариантов подтверждения (например, телефонных вызовов, текстовых сообщений или уведомлений в мобильных приложениях). Пользователи сами выбирают предпочтительный способ подтверждения.</span><span class="sxs-lookup"><span data-stu-id="2829c-153">Azure MFA provides strong authentication with a range of easy verification options—phone call, text message, or mobile app notification—and allow customers to choose the method they prefer.</span></span>

<span data-ttu-id="2829c-154">Любому крупному предприятию необходимо определить процесс управления удостоверениями, описывающий управление индивидуальными удостоверениями, их проверку подлинности, авторизацию, роли и привилегии в виртуальном центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-154">Any large enterprise needs to define an identity management process that describes the management of individual identities, their authentication, authorization, roles, and privileges within or across the vDC.</span></span> <span data-ttu-id="2829c-155">Цели такого процесса — повышение безопасности и производительности при одновременном снижении затрат, времени простоя, а также повторяющихся и выполняемых вручную задач.</span><span class="sxs-lookup"><span data-stu-id="2829c-155">The goals of this process should be to increase security and productivity while decreasing cost, downtime, and repetitive manual tasks.</span></span>

<span data-ttu-id="2829c-156">Предприятиям или организациям может потребоваться нужное сочетание служб для различных бизнес-приложений, так как сотрудники часто используют разные роли при работе с различными проектами.</span><span class="sxs-lookup"><span data-stu-id="2829c-156">Enterprise/organizations can require a demanding mix of services for different Line-of-Businesses (LOBs), and employees often have different roles when involved with different projects.</span></span> <span data-ttu-id="2829c-157">Виртуальный центр обработки данных требует налаженного взаимодействия между различными группами, для каждой из которых предусмотрены конкретные определения ролей, для надлежащего регулирования запущенных систем.</span><span class="sxs-lookup"><span data-stu-id="2829c-157">A vDC requires good cooperation between different teams, each with specific role definitions, to get systems running with good governance.</span></span> <span data-ttu-id="2829c-158">Матрица обязанностей, разрешений и прав может быть очень непростой.</span><span class="sxs-lookup"><span data-stu-id="2829c-158">The matrix of responsibilities, access, and rights can be extremely complex.</span></span> <span data-ttu-id="2829c-159">Управление удостоверениями в виртуальном центре обработки данных реализуется с помощью [*Azure Active Directory* (AAD)][AAD] и управления доступом на основе ролей (RBAC).</span><span class="sxs-lookup"><span data-stu-id="2829c-159">Identity management in vDC is implemented through [*Azure Active Directory* (AAD)][AAD] and Role-Based Access Control (RBAC).</span></span>

<span data-ttu-id="2829c-160">Служба каталогов — это общая инфраструктура сведений для поиска, управления, администрирования и организации стандартных элементов и сетевых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2829c-160">A Directory Service is a shared information infrastructure for locating, managing, administering, and organizing everyday items and network resources.</span></span> <span data-ttu-id="2829c-161">Эти ресурсы могут включать тома, папки, файлы, принтеры, пользователей, группы, устройства и другие объекты.</span><span class="sxs-lookup"><span data-stu-id="2829c-161">These resources can include volumes, folders, files, printers, users, groups, devices, and other objects.</span></span> <span data-ttu-id="2829c-162">Каждый ресурс в сети считается объектом сервера каталогов.</span><span class="sxs-lookup"><span data-stu-id="2829c-162">Each resource on the network is considered an object by the directory server.</span></span> <span data-ttu-id="2829c-163">Сведения о ресурсе хранятся в виде коллекции атрибутов, связанных с этим ресурсом или объектом.</span><span class="sxs-lookup"><span data-stu-id="2829c-163">Information about a resource is stored as a collection of attributes associated with that resource or object.</span></span>

<span data-ttu-id="2829c-164">Все бизнес-службы Microsoft Online используют Azure Active Directory (AAD) для входа и других задач, связанных с идентификацией.</span><span class="sxs-lookup"><span data-stu-id="2829c-164">All Microsoft online business services rely on Azure Active Directory (AAD) for sign-in and other identity needs.</span></span> <span data-ttu-id="2829c-165">Azure Active Directory (Azure AD) — это комплексное высокодоступное облачное решение для управления удостоверениями и доступом, предоставляющее базовые службы каталогов, расширенные функции управления удостоверениями и функции управления доступом к приложениям.</span><span class="sxs-lookup"><span data-stu-id="2829c-165">Azure Active Directory is a comprehensive, highly available identity and access management cloud solution that combines core directory services, advanced identity governance, and application access management.</span></span> <span data-ttu-id="2829c-166">AAD можно интегрировать с локальным каталогом Active Directory для включения единого входа для всех облачных и локальных приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-166">AAD can be integrated with on-premises Active Directory to enable single sign-on for all cloud-based and locally hosted (on-premises) applications.</span></span> <span data-ttu-id="2829c-167">Атрибуты пользователя локальной службы Active Directory могут автоматически синхронизироваться с AAD.</span><span class="sxs-lookup"><span data-stu-id="2829c-167">The user attributes of on-premises Active Directory can be automatically synchronized to AAD.</span></span>

<span data-ttu-id="2829c-168">Для назначения всех разрешений в виртуальном центре обработки данных не требуется отдельный глобальный администратор.</span><span class="sxs-lookup"><span data-stu-id="2829c-168">A single global administrator is not required to assign all permissions in a vDC.</span></span> <span data-ttu-id="2829c-169">Вместо этого получить разрешения, необходимые для управления собственными ресурсами в таком центре, может каждый отдел (группа пользователей или служб в службе каталогов).</span><span class="sxs-lookup"><span data-stu-id="2829c-169">Instead each specific department (or group of users or services in the Directory Service) can have the permissions required to manage their own resources within a vDC.</span></span> <span data-ttu-id="2829c-170">Структурирование разрешений требует балансировки.</span><span class="sxs-lookup"><span data-stu-id="2829c-170">Structuring permissions requires balancing.</span></span> <span data-ttu-id="2829c-171">Большое количество разрешений может препятствовать оптимальной производительности, а недостаточное или отсутствие некоторых — может повысить риски для системы безопасности.</span><span class="sxs-lookup"><span data-stu-id="2829c-171">Too many permissions can impede performance efficiency, and too few or loose permissions can increase security risks.</span></span> <span data-ttu-id="2829c-172">Управление доступом на основе ролей (RBAC) Azure помогает решить эту задачу, обеспечивая точное управление доступом для ресурсов виртуального центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-172">Azure Role-Based Access Control (RBAC) helps to address this problem, by offering fine-grained access management for vDC resources.</span></span>

##### <a name="security-infrastructure"></a><span data-ttu-id="2829c-173">*Инфраструктура безопасности*</span><span class="sxs-lookup"><span data-stu-id="2829c-173">*Security Infrastructure*</span></span>
<span data-ttu-id="2829c-174">Инфраструктура безопасности в контексте виртуального центра обработки данных преимущественно относится к разделению трафика в конкретных сегментах виртуальной сети такого центра, а также к управлению входящим и исходящим потоками для всего центра.</span><span class="sxs-lookup"><span data-stu-id="2829c-174">Security infrastructure, in the context of a vDC, is mainly related to the segregation of traffic in the vDC's specific virtual network segment, and how to control ingress and egress flows throughout the vDC.</span></span> <span data-ttu-id="2829c-175">Служба Azure основана на мультитенантной архитектуре, которая предотвращает несанкционированный и непреднамеренный трафик между развертываниями, используя изоляцию виртуальной сети (VNet), списки управления доступом (ACL), подсистемы балансировки нагрузки, IP-фильтры и политики потока трафика.</span><span class="sxs-lookup"><span data-stu-id="2829c-175">Azure is based on multi-tenant architecture that prevents unauthorized and unintentional traffic between deployments, using Virtual Network (VNet) isolation, access control lists (ACLs), load balancers, and IP filters, along with traffic flow policies.</span></span> <span data-ttu-id="2829c-176">Преобразование сетевых адресов (NAT) отделяет внутренний и внешний сетевой трафик.</span><span class="sxs-lookup"><span data-stu-id="2829c-176">Network address translation (NAT) separates internal network traffic from external traffic.</span></span>

<span data-ttu-id="2829c-177">Структура Azure выделяет ресурсы инфраструктуры для рабочих нагрузок клиента и управляет исходящим и входящим обменом данными виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="2829c-177">The Azure fabric allocates infrastructure resources to tenant workloads and manages communications to and from virtual machines (VMs).</span></span> <span data-ttu-id="2829c-178">Низкоуровневая оболочка Azure принудительно разделяет память и процессы между виртуальными машинами и обеспечивает безопасную передачу сетевого трафика клиентам гостевой ОС.</span><span class="sxs-lookup"><span data-stu-id="2829c-178">The Azure hypervisor enforces memory and process separation between VMs and securely routes network traffic to guest OS tenants.</span></span>

##### <a name="connectivity-to-the-cloud"></a><span data-ttu-id="2829c-179">*Подключения к облаку*</span><span class="sxs-lookup"><span data-stu-id="2829c-179">*Connectivity to the cloud*</span></span>
<span data-ttu-id="2829c-180">Виртуальному центру данных требуется подключение к внешним сетям, чтобы предложить службы клиентам, партнерам и внутренним пользователям.</span><span class="sxs-lookup"><span data-stu-id="2829c-180">The vDC needs connectivity with external networks to offer services to customers, partners and/or internal users.</span></span> <span data-ttu-id="2829c-181">Обычно это подразумевает подключение не только к Интернету, но также к локальным сетям и центрам обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-181">This usually means connectivity not only to the Internet, but also to on-premises networks and data centers.</span></span>

<span data-ttu-id="2829c-182">Клиенты могут создавать свои политики безопасности, чтобы регулировать, каким образом можно получить доступ к определенным размещенным службам виртуального центра обработки данных из Интернета с помощью сетевых виртуальных устройств (с фильтрацией и проверкой трафика), настраиваемых политик маршрутизации и сетевой фильтрации (определяемые пользователем маршруты и группы сетевой безопасности).</span><span class="sxs-lookup"><span data-stu-id="2829c-182">Customers can build their security policies to control what and how specific vDC hosted services are accessible to/from the Internet using Network Virtual Appliances (with filtering and traffic inspection), and custom routing policies and network filtering (User Defined Routing and Network Security Groups).</span></span>

<span data-ttu-id="2829c-183">Предприятиям часто требуется подключать виртуальные центры данных к локальным центрам обработки данных или другим ресурсам.</span><span class="sxs-lookup"><span data-stu-id="2829c-183">Enterprises often need to connect vDCs to on-premises data centers or other resources.</span></span> <span data-ttu-id="2829c-184">Таким образом, подключение между Azure и локальными сетями — важный аспект при проектировании эффективной архитектуры.</span><span class="sxs-lookup"><span data-stu-id="2829c-184">The connectivity between Azure and on-premises networks is therefore a crucial aspect when designing an effective architecture.</span></span> <span data-ttu-id="2829c-185">Предприятия могут использовать два разных способа для создания взаимодействия между виртуальным центром данных и локальными центрами в Azure: подключение через Интернет и частные прямые подключения.</span><span class="sxs-lookup"><span data-stu-id="2829c-185">Enterprises have two different ways to create an interconnection between vDC and on-premises in Azure: transit over the Internet and/or by private direct connections.</span></span>

<span data-ttu-id="2829c-186">[**VPN типа "сеть —сеть" Azure**][VPN] — это служба подключения через Интернет между локальными сетями и виртуальным центром данных. Подключение устанавливается через защищенные зашифрованные подключения (туннели IPsec или IKE).</span><span class="sxs-lookup"><span data-stu-id="2829c-186">An [**Azure Site-to-Site VPN**][VPN] is an interconnection service over the Internet between on-premises networks and the vDC, established through secure encrypted connections (IPsec/IKE tunnels).</span></span> <span data-ttu-id="2829c-187">Подключение типа "сеть — сеть" Azure — это гибкое подключение, которое можно быстро создать. Оно не требует последующего снабжения, так как все подключения выполняются через Интернет.</span><span class="sxs-lookup"><span data-stu-id="2829c-187">Azure Site-to-Site connection is flexible, quick to create, and does not require any further procurement, as all connections connect over the internet.</span></span>

<span data-ttu-id="2829c-188">[**ExpressRoute**][ExR] — это служба подключения Azure, которая позволяет создавать частные подключения между виртуальным центром обработки данных и локальными сетями.</span><span class="sxs-lookup"><span data-stu-id="2829c-188">[**ExpressRoute**][ExR] is an Azure connectivity service that lets you create private connections between vDC and the on-premises networks.</span></span> <span data-ttu-id="2829c-189">Подключения ExpressRoute не осуществляются через общедоступный Интернет и обеспечивают повышенный уровень безопасности, надежности и быстродействия (до 10 Гбит/с) с низкими и последовательными задержками.</span><span class="sxs-lookup"><span data-stu-id="2829c-189">ExpressRoute connections do not go over the public Internet, and offer higher security, reliability, and higher speeds (up to 10 Gbps) along with consistent latency.</span></span> <span data-ttu-id="2829c-190">ExpressRoute оптимально использовать для виртуальных центров обработки данных, так как клиенты ExpressRoute могут получить преимущества правил соответствия, связанных с частными подключениями.</span><span class="sxs-lookup"><span data-stu-id="2829c-190">ExpressRoute is very useful for vDCs, as ExpressRoute customers can get the benefits of compliance rules associated with private connections.</span></span>

<span data-ttu-id="2829c-191">Развертывание подключений ExpressRoute требует участия поставщика услуг ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2829c-191">Deploying ExpressRoute connections involves engaging with an ExpressRoute service provider.</span></span> <span data-ttu-id="2829c-192">Для клиентов, которым необходимо быстро приступить к работе, мы рекомендуем поначалу использовать VPN типа "сеть — сеть", чтобы установить подключение между виртуальным центром обработки данных и локальными ресурсами, а после выбрать подключение ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2829c-192">For customers that need to start quickly, it is common to initially use Site-to-Site VPN to establish connectivity between the vDC and on-premises resources, and then migrate to ExpressRoute connection.</span></span>

##### <a name="connectivity-within-the-cloud"></a><span data-ttu-id="2829c-193">*Подключения в облаке*</span><span class="sxs-lookup"><span data-stu-id="2829c-193">*Connectivity within the cloud*</span></span>
<span data-ttu-id="2829c-194">[Виртуальные сети][VNet] и [пиринг виртуальных сетей][VNetPeering] — основные сетевые службы подключения в виртуальном центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-194">[VNets][VNet] and [VNet Peering][VNetPeering] are the basic networking connectivity services inside a vDC.</span></span> <span data-ttu-id="2829c-195">Виртуальная сеть гарантирует естественную границу изоляции для ресурсов виртуального центра обработки данных, а пиринг виртуальных сетей разрешает внутренние взаимодействия между различными виртуальными сетями в одном регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-195">A VNet guarantees a natural boundary of isolation for vDC resources, and VNet peering allows intercommunication between different VNets within the same Azure region.</span></span> <span data-ttu-id="2829c-196">Управление трафиком внутри виртуальной сети и между ними должно выполняться в соответствии с набором правил безопасности, заданных через списки управления доступом ([группа безопасности сети][NSG]), [сетевые виртуальные устройства][NVA] и настраиваемые таблицы маршрутизации ([UDR][UDR]).</span><span class="sxs-lookup"><span data-stu-id="2829c-196">Traffic control inside a VNet and between VNets need to match a set of security rules specified through Access Control Lists ([Network Security Group][NSG]), [Network Virtual Appliances][NVA], and custom routing tables ([UDR][UDR]).</span></span>

## <a name="virtual-data-center-overview"></a><span data-ttu-id="2829c-197">Обзор виртуального центра обработки данных</span><span class="sxs-lookup"><span data-stu-id="2829c-197">Virtual Data Center Overview</span></span>

### <a name="topology"></a><span data-ttu-id="2829c-198">Топология</span><span class="sxs-lookup"><span data-stu-id="2829c-198">Topology</span></span>
<span data-ttu-id="2829c-199">Звездообразная модель, расширяющая виртуальный центр обработки данных в пределах одного региона Azure</span><span class="sxs-lookup"><span data-stu-id="2829c-199">Hub and spokes model extended the Virtual Data Center within a single Azure region</span></span>

<span data-ttu-id="2829c-200">[![1]][1]</span><span class="sxs-lookup"><span data-stu-id="2829c-200">[![1]][1]</span></span>

<span data-ttu-id="2829c-201">Центральная зона (концентратор) контролирует и проверяет входящий и исходящий трафик между различными зонами: Интернетом, локальными зонами и периферийными.</span><span class="sxs-lookup"><span data-stu-id="2829c-201">The hub is the central zone that controls and inspects ingress and/or egress traffic between different zones: Internet, on-premises, and the spokes.</span></span> <span data-ttu-id="2829c-202">Звездообразная топология предоставляет ИТ-отделу возможность применить политики безопасности в центральном расположении, одновременно снижая вероятность уязвимости и ошибки в конфигурации.</span><span class="sxs-lookup"><span data-stu-id="2829c-202">The hub and spoke topology gives the IT department an effective way to enforce security policies in a central location, while reducing the potential for misconfiguration and exposure.</span></span>

<span data-ttu-id="2829c-203">В центре содержатся общие компоненты службы, используемые периферийными зонами.</span><span class="sxs-lookup"><span data-stu-id="2829c-203">The hub contains the common service components consumed by the spokes.</span></span> <span data-ttu-id="2829c-204">Ниже приведены несколько стандартных примеров распространенных центральных служб:</span><span class="sxs-lookup"><span data-stu-id="2829c-204">Here are a few typical examples of common central services:</span></span>

-   <span data-ttu-id="2829c-205">инфраструктура Windows Active Directory (со связанной службой ADFS) для проверки подлинности сторонних пользователей, которые пытаются получить доступ из ненадежных сетей (эта проверка выполняется прежде, чем предоставить таким пользователям доступ к рабочим нагрузкам в периферийных зонах);</span><span class="sxs-lookup"><span data-stu-id="2829c-205">The Windows Active Directory infrastructure (with the related ADFS service) required for user authentication of third parties accessing from untrusted networks before getting access to the workloads in the spoke</span></span>
-   <span data-ttu-id="2829c-206">служба DNS для разрешения именования рабочих нагрузок в периферийных зонах, чтобы получить доступ к ресурсам локально и в Интернете;</span><span class="sxs-lookup"><span data-stu-id="2829c-206">A DNS service to resolve naming for the workload in the spokes, to access resources on-premises and on the Internet</span></span>
-   <span data-ttu-id="2829c-207">инфраструктура PKI для реализации единого входа для рабочих нагрузок;</span><span class="sxs-lookup"><span data-stu-id="2829c-207">A PKI infrastructure, to implement single sign-on on workloads</span></span>
-   <span data-ttu-id="2829c-208">управление потоком (TCP/UDP) между периферийными зонами и Интернетом;</span><span class="sxs-lookup"><span data-stu-id="2829c-208">Flow control (TCP/UDP) between the spokes and Internet</span></span>
-   <span data-ttu-id="2829c-209">управление потоком между периферийными зонами и локальными центрами;</span><span class="sxs-lookup"><span data-stu-id="2829c-209">Flow control between the spoke and on-premises</span></span>
-   <span data-ttu-id="2829c-210">управление потоком между несколькими периферийными зонами при необходимости.</span><span class="sxs-lookup"><span data-stu-id="2829c-210">If desired, flow control between one spoke and another</span></span>

<span data-ttu-id="2829c-211">Виртуальный центр обработки данных снижает общую стоимость, используя общую центральную инфраструктуру между несколькими периферийными зонами.</span><span class="sxs-lookup"><span data-stu-id="2829c-211">The vDC reduces overall cost by using the shared hub infrastructure between multiple spokes.</span></span>

<span data-ttu-id="2829c-212">Роль каждой периферийной зоны может заключаться в размещении различных типов рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="2829c-212">The role of each spoke can be to host different types of workloads.</span></span> <span data-ttu-id="2829c-213">Периферийные зоны также предоставляют модульный подход для повторяемых развертываний (например, сценарии разработки и тестирования, пользовательское приемочное тестирование, предварительный этап и рабочий этап) одних рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="2829c-213">The spokes can also provide a modular approach for repeatable deployments (for example, dev and test, User Acceptance Testing, pre-production, and production) of the same workloads.</span></span> <span data-ttu-id="2829c-214">Также эти зоны можно использовать для разделения и активации различных групп в организации (например, групп DevOps).</span><span class="sxs-lookup"><span data-stu-id="2829c-214">The spokes can also be used to segregate and enable different groups within your organization (for example, DevOps groups).</span></span> <span data-ttu-id="2829c-215">Внутри периферийной зоны можно развернуть базовую рабочую нагрузку или сложные многоуровневые рабочие нагрузки с управлением трафиком между уровнями.</span><span class="sxs-lookup"><span data-stu-id="2829c-215">Inside a spoke, it is possible to deploy a basic workload or complex multi-tier workloads with traffic control between the tiers.</span></span>

##### <a name="subscription-limits-and-multiple-hubs"></a><span data-ttu-id="2829c-216">Ограничения подписки и несколько центральных зон</span><span class="sxs-lookup"><span data-stu-id="2829c-216">Subscription limits and multiple hubs</span></span>
<span data-ttu-id="2829c-217">В Azure каждый компонент (независимо от типа) развертывается в подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-217">In Azure, every component, whatever the type, is deployed in an Azure Subscription.</span></span> <span data-ttu-id="2829c-218">Изоляция компонентов Azure в разных подписках Azure может удовлетворять требования различных бизнес-приложений, например настройку дифференцированных уровней доступа и авторизации.</span><span class="sxs-lookup"><span data-stu-id="2829c-218">The isolation of Azure components in different Azure subscriptions can satisfy the requirements of different LOBs, such as setting up differentiated levels of access and authorization.</span></span>

<span data-ttu-id="2829c-219">Отдельный виртуальный центр обработки данных можно масштабировать для большого количества периферийных зон, но, как и в случае с любой ИТ-системой, существуют ограничения платформы.</span><span class="sxs-lookup"><span data-stu-id="2829c-219">A single vDC can scale up to large number of spokes, although, as with every IT system, there are platforms limits.</span></span> <span data-ttu-id="2829c-220">Развертывание концентратора привязано к определенной подписке Azure с установленными ограничениями (например, максимальное число пиринга виртуальных сетей;. дополнительные сведения см. в статье [Подписка Azure, границы, квоты и ограничения службы][Limits]).</span><span class="sxs-lookup"><span data-stu-id="2829c-220">The hub deployment is bound to a specific Azure subscription, which has restrictions and limits (for example, a max number of VNet peerings - see [Azure subscription and service limits, quotas, and constraints][Limits] for details).</span></span> <span data-ttu-id="2829c-221">В случаях, когда ограничения становятся проблемой, архитектуру можно далее масштабировать, расширяя отдельную звездообразную модель до кластера.</span><span class="sxs-lookup"><span data-stu-id="2829c-221">In cases where limits may be an issue, the architecture can scale up further by extending the model from a single hub-spokes to a cluster of hub and spokes.</span></span> <span data-ttu-id="2829c-222">Несколько концентраторов в одном или нескольких регионах Azure могут быть взаимосвязаны с помощью подключения Express Route или VPN типа "сеть — сеть".</span><span class="sxs-lookup"><span data-stu-id="2829c-222">Multiple hubs in one or more Azure regions can be interconnected using Express Route or site-to-site VPN.</span></span>

<span data-ttu-id="2829c-223">[![2]][2]</span><span class="sxs-lookup"><span data-stu-id="2829c-223">[![2]][2]</span></span>

<span data-ttu-id="2829c-224">Введение нескольких концентраторов приводит к увеличению затрат и действий по управлению системой и может быть оправдано только соответствующей масштабируемостью (для ограничений или избыточности системы) и региональной репликацией (для производительности пользователя или аварийного восстановления).</span><span class="sxs-lookup"><span data-stu-id="2829c-224">The introduction of multiple hubs increases the cost and management effort of the system and would only be justified by scalability (examples: system limits or redundancy) and regional replication (examples: end-user performance or disaster recovery).</span></span> <span data-ttu-id="2829c-225">В сценариях, требующих несколько концентраторов, все концентраторы должны обеспечивать один набор служб для упрощения выполнения операций.</span><span class="sxs-lookup"><span data-stu-id="2829c-225">In scenarios requiring multiple hubs, all the hubs should strive to offer the same set of services for operational ease.</span></span>

##### <a name="interconnection-between-spokes"></a><span data-ttu-id="2829c-226">Взаимодействие между периферийными зонами</span><span class="sxs-lookup"><span data-stu-id="2829c-226">Interconnection between spokes</span></span>
<span data-ttu-id="2829c-227">Внутри отдельной периферийной зоны можно реализовать сложные рабочие нагрузки с несколькими уровнями.</span><span class="sxs-lookup"><span data-stu-id="2829c-227">Inside a single spoke, it is possible to implement complex multi-tiers workloads.</span></span> <span data-ttu-id="2829c-228">Многоуровневые конфигурации можно реализовать с помощью подсетей (одна подсеть для каждого уровня) в одной виртуальной сети и фильтрации потоков с помощью групп безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="2829c-228">Multi-tier configurations can be implemented using subnets (one for every tier) in the same VNet and filtering the flows using NSGs.</span></span>

<span data-ttu-id="2829c-229">С другой стороны архитектор может также развернуть многоуровневую рабочую нагрузку для нескольких виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="2829c-229">On the other hand, an architect may want to deploy a multi-tier workload across multiple VNets.</span></span> <span data-ttu-id="2829c-230">Периферийные зоны могут подключаться к другим периферийным зонам в одном концентраторе или разных с помощью пиринга виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="2829c-230">Using VNet peering, spokes can connect to other spokes in the same hub or different hubs.</span></span> <span data-ttu-id="2829c-231">Типичным примером такого сценария является случай, когда серверы обработки приложения располагаются в одной периферийной зоне (виртуальной сети), а база данных развернута в другой периферийной зоне (виртуальной сети).</span><span class="sxs-lookup"><span data-stu-id="2829c-231">A typical example of this scenario is the case where application processing servers are in one spoke (VNet), while the database is deployed in a different spoke (VNet).</span></span> <span data-ttu-id="2829c-232">В этом случае периферийные зоны могут легко взаимодействовать через пиринг виртуальных сетей, не используя при этом концентратор.</span><span class="sxs-lookup"><span data-stu-id="2829c-232">In this case, it is easy to interconnect the spokes with VNet peering and thereby avoid transiting through the hub.</span></span> <span data-ttu-id="2829c-233">Особой проверки в этом случае требуют архитектура и система безопасности, чтобы гарантировать, что обход концентратора не сопровождается обходом важных элементов безопасности или аудита, которые могут существовать только в концентраторе.</span><span class="sxs-lookup"><span data-stu-id="2829c-233">A careful architecture and security review should be performed to ensure that bypassing the hub doesn’t bypass important security or auditing points that may only exist in the hub.</span></span>

<span data-ttu-id="2829c-234">[![3]][3]</span><span class="sxs-lookup"><span data-stu-id="2829c-234">[![3]][3]</span></span>

<span data-ttu-id="2829c-235">Периферийные зоны могут также взаимодействовать с периферийной зоной, выполняющей функции концентратора.</span><span class="sxs-lookup"><span data-stu-id="2829c-235">Spokes can also be interconnected to a spoke that acts as a hub.</span></span> <span data-ttu-id="2829c-236">Такой подход создает двухуровневую иерархию: периферийная зона высокого уровня (уровень 0) становится концентратором подчиненных периферийных зон (уровень 1) иерархии.</span><span class="sxs-lookup"><span data-stu-id="2829c-236">This approach creates a two-level hierarchy: the spoke in the higher level (level 0) become the hub of lower spokes (level 1) of the hierarchy.</span></span> <span data-ttu-id="2829c-237">Периферийные зоны виртуального центра обработки данных должны направлять трафик в центральный концентратор, чтобы подключиться к локальной сети или Интернету.</span><span class="sxs-lookup"><span data-stu-id="2829c-237">The spokes of vDC need to forward the traffic to the central hub to reach out either to the on-premises network or internet.</span></span> <span data-ttu-id="2829c-238">Такая архитектура концентратора представляет сложную маршрутизацию, что сводит на нет преимущества отдельной звездообразной связи.</span><span class="sxs-lookup"><span data-stu-id="2829c-238">An architecture with two levels of hub introduces complex routing that removes the benefits of a simple hub-spoke relationship.</span></span>

<span data-ttu-id="2829c-239">Несмотря на то что Azure допускает сложные топологии, одним из основных принципов концепции виртуального центра обработки данных является повторяемость и простота.</span><span class="sxs-lookup"><span data-stu-id="2829c-239">Although Azure allows complex topologies, one of the core principles of the vDC concept is repeatability and simplicity.</span></span> <span data-ttu-id="2829c-240">Чтобы свести к минимуму действия по управлению системой, в эталонной архитектуре виртуального центра обработки данных рекомендуется простая звездообразная модель.</span><span class="sxs-lookup"><span data-stu-id="2829c-240">To minimize management effort, the simple hub-spoke design is the recommended vDC reference architecture.</span></span>

### <a name="components"></a><span data-ttu-id="2829c-241">Компоненты</span><span class="sxs-lookup"><span data-stu-id="2829c-241">Components</span></span>
<span data-ttu-id="2829c-242">Виртуальный центр обработки данных состоит из четырех базовых типов компонентов: **инфраструктуры**, **сетей периметра**, **рабочих нагрузок** и **мониторинга**.</span><span class="sxs-lookup"><span data-stu-id="2829c-242">A Virtual Data Center is made up of four basic component types: **Infrastructure**, **Perimeter Networks**, **Workloads**, and **Monitoring**.</span></span>

<span data-ttu-id="2829c-243">Каждый тип компонента состоит из различных функций и ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-243">Each component type consists of various Azure features and resources.</span></span> <span data-ttu-id="2829c-244">Ваш виртуальный центр обработки данных состоит из экземпляров нескольких типов компонентов и нескольких вариантов одного типа компонента.</span><span class="sxs-lookup"><span data-stu-id="2829c-244">Your vDC is made up of instances of multiple components types and multiple variations of the same component type.</span></span> <span data-ttu-id="2829c-245">Например, у вас может быть много разных, логически разделенных экземпляров рабочей нагрузки, представляющих разные приложения.</span><span class="sxs-lookup"><span data-stu-id="2829c-245">For instance, you may have many different, logically separated, workload instances that represent different applications.</span></span> <span data-ttu-id="2829c-246">Вы используете эти различные экземпляры и типы компонентов, чтобы в конечном счете создать виртуальный центр обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-246">You use these different component types and instances to ultimately build the vDC.</span></span>

<span data-ttu-id="2829c-247">[![4]][4]</span><span class="sxs-lookup"><span data-stu-id="2829c-247">[![4]][4]</span></span>

<span data-ttu-id="2829c-248">Предыдущая высокоуровневая архитектура виртуального центра обработки данных показывает разные типы компонентов, используемые в различных зонах звездообразной топологии.</span><span class="sxs-lookup"><span data-stu-id="2829c-248">The preceding high-level architecture of a vDC shows different component types used in different zones of the hub-spokes topology.</span></span> <span data-ttu-id="2829c-249">На схеме показаны компоненты инфраструктуры в различных частях архитектуры.</span><span class="sxs-lookup"><span data-stu-id="2829c-249">The diagram shows infrastructure components in various parts of the architecture.</span></span>

<span data-ttu-id="2829c-250">Как показывает опыт (для локального центра обработки данных или виртуального центра обработки данных), права доступа и привилегии должны предоставляться на основе группы.</span><span class="sxs-lookup"><span data-stu-id="2829c-250">As a good practice (for an on-premises DC or vDC) access rights and privileges should be group-based.</span></span> <span data-ttu-id="2829c-251">Работа с группами, а не отдельными пользователями, позволит обеспечить согласованность политик доступа между группами, а также минимизировать ошибки конфигурации.</span><span class="sxs-lookup"><span data-stu-id="2829c-251">Dealing with groups, instead of individual users helps maintaining access policies consistently across teams and aids in minimizing configuration errors.</span></span> <span data-ttu-id="2829c-252">Назначение и удаление пользователей в соответствующих группах позволит обеспечить актуальность привилегий определенного пользователя.</span><span class="sxs-lookup"><span data-stu-id="2829c-252">Assigning and removing users to and from appropriate groups helps keeping the privileges of a specific user up-to-date.</span></span>

<span data-ttu-id="2829c-253">Каждая группа роли должна содержать уникальный префикс имени, чтобы легко определить связь определенной группы с определенной рабочей нагрузкой.</span><span class="sxs-lookup"><span data-stu-id="2829c-253">Each role group should have a unique prefix on their names making it easy to identify which group is associated with which workload.</span></span> <span data-ttu-id="2829c-254">Например, рабочая нагрузка, размещающая службы проверки подлинности, должна содержать группы с именами *AuthServiceNetOps, AuthServiceSecOps, AuthServiceDevOps и AuthServiceInfraOps.*</span><span class="sxs-lookup"><span data-stu-id="2829c-254">For instance, a workload hosting an authentication service might have groups named *AuthServiceNetOps, AuthServiceSecOps, AuthServiceDevOps, and AuthServiceInfraOps.*</span></span> <span data-ttu-id="2829c-255">Аналогичным образом для централизованных ролей или ролей, не связанных с конкретной службой, должен использоваться префикс "Corp" (например, *CorpNetOps*).</span><span class="sxs-lookup"><span data-stu-id="2829c-255">Likewise for centralized roles, or roles not related to a specific service, could be prefaced with “Corp”, *CorpNetOps* for example.</span></span>

<span data-ttu-id="2829c-256">Многие организации используют разновидность следующих групп для предоставления основной декомпозиции ролей:</span><span class="sxs-lookup"><span data-stu-id="2829c-256">Many organizations use a variation of the following groups to provide a major breakdown of roles:</span></span>

-   <span data-ttu-id="2829c-257">*Центральная ИТ-группа (Corp)* имеет права владения для управления компонентами инфраструктуры (например, сетями и безопасностью). Поэтому должна включать роль участника в подписке (и управлять концентратором) и права участника сети в периферийных зонах.</span><span class="sxs-lookup"><span data-stu-id="2829c-257">The *central IT group (Corp)* has the ownership rights to control infrastructure (such as networking and security) components, and therefore needs to have the role of contributor on the subscription (and have control of the hub) and network contributor rights in the spokes.</span></span> <span data-ttu-id="2829c-258">Большая организация часто разделяет эти обязанности управления между несколькими группами, например группой по выполнению сетевых операций (CorpNetOps) (уделяя исключительное внимание сетевым службам) и группой по выполнению операций безопасности (CorpSecOps) (отвечающей за политики безопасности и брандмауэра).</span><span class="sxs-lookup"><span data-stu-id="2829c-258">Large organization frequently split up these management responsibilities between multiple teams such as; a Network Operations (CorpNetOps) group (with exclusive focus on networking) and a Security Operations (CorpSecOps) group (responsible for firewall and security policy).</span></span> <span data-ttu-id="2829c-259">В этом конкретном случае требуется создание двух разных групп для назначения этих пользовательских ролей.</span><span class="sxs-lookup"><span data-stu-id="2829c-259">In this specific case, two different groups need to be created for assignment of these custom roles.</span></span>
-   <span data-ttu-id="2829c-260">*Группа разработки и тестирования (AppDevOps)* несет ответственность за развертывание рабочих нагрузок (приложений или служб).</span><span class="sxs-lookup"><span data-stu-id="2829c-260">The *dev & test (AppDevOps) group* has the responsibility to deploy workloads (Apps or Services).</span></span> <span data-ttu-id="2829c-261">Эта группа выполняет роль участника виртуальной машины для развертываний IaaS, а также одну или несколько ролей участника PaaS (дополнительные сведения см. в статье [Встроенные роли управления доступом на основе ролей в Azure][Roles]).</span><span class="sxs-lookup"><span data-stu-id="2829c-261">This group takes the role of Virtual Machine Contributor for IaaS deployments and/or one or more PaaS contributor’s roles (see [Built-in roles for Azure Role-Based Access Control][Roles]).</span></span> <span data-ttu-id="2829c-262">При необходимости группе разработки и тестирования может потребоваться видимость политик безопасности (групп безопасности сети) и политик маршрутизации (UDR) внутри концентратора или определенной периферийной зоны.</span><span class="sxs-lookup"><span data-stu-id="2829c-262">Optionally the dev & test team may need to have visibility on security policies (NSGs) and routing policies (UDR) inside the hub or a specific spoke.</span></span> <span data-ttu-id="2829c-263">Таким образом, кроме ролей участника для рабочих нагрузок этой группе также потребуется роль сетевого средства чтения.</span><span class="sxs-lookup"><span data-stu-id="2829c-263">Therefore, in addition to the roles of contributor for workloads, this group would also need the role of Network Reader.</span></span>
-   <span data-ttu-id="2829c-264">*Группа операций и обслуживания (CorpInfraOps или AppInfraOps)* несет ответственность за управление рабочими нагрузками в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2829c-264">The *operation and maintenance group (CorpInfraOps or AppInfraOps)* have the responsibility of managing workloads in production.</span></span> <span data-ttu-id="2829c-265">Эта группа должна быть участником подписки для рабочих нагрузок в любой рабочей подписке.</span><span class="sxs-lookup"><span data-stu-id="2829c-265">This group needs to be a subscription contributor on workloads in any production subscriptions.</span></span> <span data-ttu-id="2829c-266">Некоторые организации могут также решить, есть ли необходимость в дополнительной эскалации группы службы поддержки с помощью роли участника подписки в рабочей среде и подписке центрального концентратора, чтобы разрешить потенциальные проблемы конфигурации в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="2829c-266">Some organizations might also evaluate if they need an additional escalation support team group with the role of subscription contributor in production and in the central hub subscription, in order to fix potential configuration issues in the production environment.</span></span>

<span data-ttu-id="2829c-267">Так как виртуальный центр обработки данных структурирован, группы, созданные для центральных ИТ-групп, управляющих концентратором, содержат соответствующие группы на уровне рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2829c-267">A vDC is structured so that groups created for the central IT groups managing the hub have corresponding groups at the workload level.</span></span> <span data-ttu-id="2829c-268">Кроме управления ресурсами концентратора только центральные ИТ-группы смогут управлять внешним доступом и разрешениями верхнего уровня в подписке.</span><span class="sxs-lookup"><span data-stu-id="2829c-268">In addition to managing hub resources only the central IT groups would be able to control external access and top-level permissions on the subscription.</span></span> <span data-ttu-id="2829c-269">Тем не менее группы рабочей нагрузки смогли бы управлять ресурсами и разрешениями своих виртуальных сетей независимо от центрального ИТ-отдела.</span><span class="sxs-lookup"><span data-stu-id="2829c-269">However, workload groups would be able to control resources and permissions of their VNet independently on Central IT.</span></span>

<span data-ttu-id="2829c-270">Виртуальный центр обработки данных должен быть секционирован для безопасного размещения нескольких проектов в различных бизнес-приложениях.</span><span class="sxs-lookup"><span data-stu-id="2829c-270">The vDC needs to be partitioned to securely host multiple projects across different Line-of-Businesses (LOBs).</span></span> <span data-ttu-id="2829c-271">Всем проектам необходимы разные изолированные среды (разработки, UAT, рабочая среда).</span><span class="sxs-lookup"><span data-stu-id="2829c-271">All projects require different isolated environments (Dev, UAT, production).</span></span> <span data-ttu-id="2829c-272">Отдельные подписки Azure для каждой из этих сред обеспечивают естественную изоляцию.</span><span class="sxs-lookup"><span data-stu-id="2829c-272">Separate Azure subscriptions for each of these environments provide natural isolation.</span></span>

<span data-ttu-id="2829c-273">[![5]][5]</span><span class="sxs-lookup"><span data-stu-id="2829c-273">[![5]][5]</span></span>

<span data-ttu-id="2829c-274">На предыдущей схеме показана связь между проектами организации, пользователями, группами и средами, в которых развернуты компоненты Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-274">The preceding diagram shows the relationship between an organization's projects, users, groups, and the environments where the Azure components are deployed.</span></span>

<span data-ttu-id="2829c-275">Обычно в сфере ИТ среда (или уровень) представляет систему, в которой развертываются и выполняются несколько приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-275">Typically in IT, an environment (or tier) is a system in which multiple applications are deployed and executed.</span></span> <span data-ttu-id="2829c-276">Крупные предприятия используют среду разработки (в которой формируются и тестируются изменения) и рабочую среду (которую используют пользователи).</span><span class="sxs-lookup"><span data-stu-id="2829c-276">Large enterprises use a development environment (where changes originally made and tested) and a production environment (what end-users use).</span></span> <span data-ttu-id="2829c-277">Эти среды отделены, часто с помощью нескольких промежуточных сред, что позволяет выполнять поэтапное развертывание, тестирование и откат в случае возникновения проблем.</span><span class="sxs-lookup"><span data-stu-id="2829c-277">Those environments are separated, often with several staging environments in between them to allow phased deployment (rollout), testing, and rollback in case of problems.</span></span> <span data-ttu-id="2829c-278">Архитектуры развертывания сильно различаются, но обычно соблюдается основной процесс начала развертывания (разработка) и окончания развертывания (рабочая среда).</span><span class="sxs-lookup"><span data-stu-id="2829c-278">Deployment architectures vary significantly, but usually the basic process of starting at development (DEV) and ending at production (PROD) is still followed.</span></span>

<span data-ttu-id="2829c-279">Общая архитектура для этих типов многоуровневых сред состоит из DevOps (разработка и тестирование), UAT (промежуточная среда) и рабочих сред.</span><span class="sxs-lookup"><span data-stu-id="2829c-279">A common architecture for these types of multi-tier environments consists of DevOps (development and testing), UAT (staging), and production environments.</span></span> <span data-ttu-id="2829c-280">Организации могут использовать один или несколько клиентов Azure AD для определения доступа к этим средам и соответствующих прав.</span><span class="sxs-lookup"><span data-stu-id="2829c-280">Organizations can leverage single or multiple Azure AD tenants to define access and rights to these environments.</span></span> <span data-ttu-id="2829c-281">На предыдущей схеме показана ситуация, когда используются два разных клиента Azure AD: один для DevOps и UAT, а другой — исключительно для рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="2829c-281">The previous diagram shows a case where two different Azure AD tenants are used: one for DevOps and UAT, and the other exclusively for production.</span></span>

<span data-ttu-id="2829c-282">Наличие разных клиентов Azure AD обеспечивает разделение между средами.</span><span class="sxs-lookup"><span data-stu-id="2829c-282">The presence of different Azure AD tenants enforces the separation between environments.</span></span> <span data-ttu-id="2829c-283">Одна группа пользователей (например, центрального ИТ-отдела) должна пройти проверку подлинности с помощью другого URI, чтобы получить доступ к другому клиенту AD и изменить роли или разрешения DevOps или рабочих сред проекта.</span><span class="sxs-lookup"><span data-stu-id="2829c-283">The same group of users (as an example, Central IT) needs to authenticate using a different URI to access a different AD tenant modify the roles or permissions of either the DevOps or production environments of a project.</span></span> <span data-ttu-id="2829c-284">Выполнение проверки подлинности другого пользователя для доступа к другим средам уменьшает возможные простои и другие проблемы, вызванные человеческим фактором.</span><span class="sxs-lookup"><span data-stu-id="2829c-284">The presence of different user authentication to access different environments reduces possible outages and other issues caused by human errors.</span></span>

#### <a name="component-type-infrastructure"></a><span data-ttu-id="2829c-285">Тип компонента: инфраструктура</span><span class="sxs-lookup"><span data-stu-id="2829c-285">Component Type: Infrastructure</span></span>
<span data-ttu-id="2829c-286">В этом типе компонента размещается большая часть вспомогательной инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="2829c-286">This component type is where most of the supporting infrastructure resides.</span></span> <span data-ttu-id="2829c-287">Здесь также проводят большую часть времени группы централизованной ИТ-инфраструктуры и группы по обеспечению соответствия требованиям и безопасности.</span><span class="sxs-lookup"><span data-stu-id="2829c-287">It's also where your centralized IT, Security, and/or Compliance teams spend most of their time.</span></span>

<span data-ttu-id="2829c-288">[![6]][6]</span><span class="sxs-lookup"><span data-stu-id="2829c-288">[![6]][6]</span></span>

<span data-ttu-id="2829c-289">Компоненты инфраструктуры обеспечивают взаимодействие между различными компонентами виртуального центра обработки данных и присутствуют в концентраторе и периферийных зонах.</span><span class="sxs-lookup"><span data-stu-id="2829c-289">Infrastructure components provide an interconnection between the different components of a vDC, and are present in both the hub and the spokes.</span></span> <span data-ttu-id="2829c-290">Ответственность за управление компонентами инфраструктуры и их обслуживание обычно возлагается на группу централизованной ИТ-инфраструктуры или группу безопасности.</span><span class="sxs-lookup"><span data-stu-id="2829c-290">The responsibility for managing and maintaining the infrastructure components is typically assigned to the central IT and/or security team.</span></span>

<span data-ttu-id="2829c-291">Одна из основных задач группы ИТ-инфраструктуры — обеспечение согласованности схем IP-адреса на предприятии.</span><span class="sxs-lookup"><span data-stu-id="2829c-291">One of the primary tasks of the IT infrastructure team is to guarantee the consistency of IP address schemas across the enterprise.</span></span> <span data-ttu-id="2829c-292">Пространство частного IP-адреса, назначенное виртуальному центру данных, должно быть согласованно с частным IP-адресом, назначенным локальным сетям и не перекрываться им.</span><span class="sxs-lookup"><span data-stu-id="2829c-292">The private IP address space assigned to the vDC needs to be consistent and NOT overlapping with private IP addresses assigned on your on-premises networks.</span></span>

<span data-ttu-id="2829c-293">Хотя преобразование NAT в локальных пограничных маршрутизаторах или средах Azure может помочь избежать конфликтов IP-адресов, оно усложняет работу компонентов инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="2829c-293">While NAT on the on-premises edge routers or in Azure environments can avoid IP address conflicts, it adds complications to your infrastructure components.</span></span> <span data-ttu-id="2829c-294">Простота управления — одна из основных целей виртуального центра обработки данных, поэтому мы не рекомендуем использовать NAT для обхода конфликта IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="2829c-294">Simplicity of management is one of the key goals of vDC, so using NAT to handle IP concerns is not a recommended solution.</span></span>

<span data-ttu-id="2829c-295">Компоненты инфраструктуры содержат следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="2829c-295">Infrastructure components contain the following functionality:</span></span>

-   <span data-ttu-id="2829c-296">[**Службы удостоверений и каталогов**][AAD].</span><span class="sxs-lookup"><span data-stu-id="2829c-296">[**Identity and directory services**][AAD].</span></span> <span data-ttu-id="2829c-297">Доступ к каждому типу ресурса в Azure регулируется удостоверением, хранящимся в службе каталогов.</span><span class="sxs-lookup"><span data-stu-id="2829c-297">Access to every resource type in Azure is controlled by an identity stored in a directory service.</span></span> <span data-ttu-id="2829c-298">В службе каталогов хранится не только список пользователей, но также права доступа к ресурсам в определенной подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-298">The directory service stores not only the list of users, but also the access rights to resources in a specific Azure subscription.</span></span> <span data-ttu-id="2829c-299">Эти службы могут существовать только в облаке или их можно синхронизировать с локальным удостоверением, хранящимся в Active Directory.</span><span class="sxs-lookup"><span data-stu-id="2829c-299">These services can exist cloud-only, or they can be synchronized with on-premises identity stored in Active Directory.</span></span>
-   <span data-ttu-id="2829c-300">[**Виртуальная сеть**][VPN].</span><span class="sxs-lookup"><span data-stu-id="2829c-300">[**Virtual Network**][VPN].</span></span> <span data-ttu-id="2829c-301">Виртуальные сети — это один из основных компонентов виртуального центра обработки данных. Они позволяют создавать границы изоляции трафика на платформе Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-301">Virtual Networks are one of main components of a vDC, and enable you to create a traffic isolation boundary on the Azure platform.</span></span> <span data-ttu-id="2829c-302">Виртуальная сеть состоит из одного или нескольких сегментов виртуальной сети, каждый из которых содержит определенный сетевой префикс IP-адреса (подсеть).</span><span class="sxs-lookup"><span data-stu-id="2829c-302">A Virtual Network is composed of a single or multiple virtual network segments, each with a specific IP network prefix (a subnet).</span></span> <span data-ttu-id="2829c-303">Виртуальная сеть определяет внутреннюю область периметра, где виртуальные машины IaaS и службы PaaS могут устанавливать конфиденциальный канал связи.</span><span class="sxs-lookup"><span data-stu-id="2829c-303">The Virtual Network defines an internal perimeter area where IaaS virtual machines and PaaS services can establish private communications.</span></span> <span data-ttu-id="2829c-304">Виртуальные машины (и службы PaaS) в одной виртуальной сети не могут напрямую обращаться к виртуальным машинам (и службам PaaS) в другой виртуальной сети, даже если обе виртуальные сети созданы одним клиентом в одной подписке.</span><span class="sxs-lookup"><span data-stu-id="2829c-304">VMs (and PaaS services) in one virtual network cannot communicate directly to VMs (and PaaS services) in a different virtual network, even if both virtual networks are created by the same customer, under the same subscription.</span></span> <span data-ttu-id="2829c-305">Это критически важное свойство, которое гарантирует, что виртуальные машины и все коммуникации клиента останутся закрытыми в пределах виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="2829c-305">Isolation is a critical property that ensures customer VMs and communication remains private within a virtual network.</span></span>
-   <span data-ttu-id="2829c-306">[**UDR**][UDR].</span><span class="sxs-lookup"><span data-stu-id="2829c-306">[**UDR**][UDR].</span></span> <span data-ttu-id="2829c-307">Трафик в виртуальной сети перенаправляется по умолчанию на основе системной таблицы маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="2829c-307">Traffic in a Virtual Network is routed by default based on the system routing table.</span></span> <span data-ttu-id="2829c-308">Маршрут, определенный пользователем, представляет настраиваемую таблицу маршрутизации, которую сетевые администраторы могут связать с одной или несколькими подсетями, чтобы перезаписать поведение системной таблицы маршрутизации и определить путь обмена данными в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="2829c-308">A User Define Route is a custom routing table that network administrators can associate to one or more subnets to overwrite the behavior of the system routing table and define a communication path within a virtual network.</span></span> <span data-ttu-id="2829c-309">Наличие маршрутов, определенных пользователем, гарантирует, что исходящий трафик из периферийной зоны проходит через определенные настраиваемые виртуальные машины, сетевые виртуальные устройства и подсистемы балансировки нагрузки в концентраторе и периферийных зонах.</span><span class="sxs-lookup"><span data-stu-id="2829c-309">The presence of UDRs guarantees that egress traffic from the spoke transit through specific custom VMs and/or Network Virtual Appliances and load balancers present in the hub and in the spokes.</span></span>
-   <span data-ttu-id="2829c-310">[**Группа безопасности сети (NSG)**][NSG].</span><span class="sxs-lookup"><span data-stu-id="2829c-310">[**NSG**][NSG].</span></span> <span data-ttu-id="2829c-311">Группа безопасности сети представляет список правил безопасности, которые действуют как фильтрация трафика для источников IP-адреса, назначения IP-адреса, протоколов, портов источника IP-адреса и портов назначения IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="2829c-311">A Network Security Group is a list of security rules that act as traffic filtering on IP Sources, IP Destination, Protocols, IP Source Ports, and IP Destination ports.</span></span> <span data-ttu-id="2829c-312">Эти группы можно применить к подсети, виртуальной плате сетевого адаптера, связанной с виртуальной машиной Azure или и к тому, и к другому.</span><span class="sxs-lookup"><span data-stu-id="2829c-312">The NSG can be applied to a subnet, a Virtual NIC card associated with an Azure VM, or both.</span></span> <span data-ttu-id="2829c-313">Группы безопасности сети необходимы для реализации правильного управления потоком в концентраторе и периферийных зонах.</span><span class="sxs-lookup"><span data-stu-id="2829c-313">The NSGs are essential to implement a correct flow control in the hub and in the spokes.</span></span> <span data-ttu-id="2829c-314">Уровень безопасности, обеспечиваемый этой группой, определяется функцией, с помощью которой вы можете открыть определенные порты для определенной цели.</span><span class="sxs-lookup"><span data-stu-id="2829c-314">The level of security afforded by the NSG is a function of which ports you open, and for what purpose.</span></span> <span data-ttu-id="2829c-315">Клиенты должны применить дополнительные фильтры для каждой виртуальной машины с помощью брандмауэров на основе узла, например iptables или брандмауэра Windows.</span><span class="sxs-lookup"><span data-stu-id="2829c-315">Customers should apply additional per-VM filters with host-based firewalls such as IPtables or the Windows Firewall.</span></span>
-   <span data-ttu-id="2829c-316">**DNS**.</span><span class="sxs-lookup"><span data-stu-id="2829c-316">**DNS**.</span></span> <span data-ttu-id="2829c-317">Разрешение имен ресурсов в виртуальных сетях виртуального центра обработки данных обеспечивается через DNS.</span><span class="sxs-lookup"><span data-stu-id="2829c-317">The name resolution of resources in the VNets of a vDC is provided through DNS.</span></span> <span data-ttu-id="2829c-318">Область разрешения имен DNS по умолчанию ограничена виртуальной сетью.</span><span class="sxs-lookup"><span data-stu-id="2829c-318">The scope of name resolution of the default DNS is limited to the VNet.</span></span> <span data-ttu-id="2829c-319">Обычно требуется развернуть пользовательскую службу DNS в концентраторе как часть общих служб, но основные потребители службы находятся в периферийной зоне.</span><span class="sxs-lookup"><span data-stu-id="2829c-319">Usually, a custom DNS service needs to be deployed in the hub as part of common services, but the main consumers of DNS services reside in the spoke.</span></span> <span data-ttu-id="2829c-320">При необходимости клиенты могут создать иерархическую структуру DNS с делегированием зон DNS в периферийные зоны.</span><span class="sxs-lookup"><span data-stu-id="2829c-320">If necessary, customers can create a hierarchical DNS structure with delegation of DNS zones to the spokes.</span></span>
-   <span data-ttu-id="2829c-321">[**Подписка][SubMgmt] и [управление группой ресурсов][RGMgmt]**.</span><span class="sxs-lookup"><span data-stu-id="2829c-321">[**Subscription][SubMgmt] and [Resource Group Management][RGMgmt]**.</span></span> <span data-ttu-id="2829c-322">Подписка определяет естественную границу, чтобы создать несколько групп ресурсов в Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-322">A subscription defines a natural boundary to create multiple groups of resources in Azure.</span></span> <span data-ttu-id="2829c-323">Ресурсы в подписке собраны вместе в логические контейнеры, которые называются группами ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2829c-323">Resources in a subscription are assembled together in logical containers named Resource Groups.</span></span> <span data-ttu-id="2829c-324">Группа ресурсов представляет логическую группу для организации ресурсов виртуального центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-324">The Resource Group represents a logical group to organize the resources of a vDC.</span></span>
-   <span data-ttu-id="2829c-325">[**RBAC**][RBAC].</span><span class="sxs-lookup"><span data-stu-id="2829c-325">[**RBAC**][RBAC].</span></span> <span data-ttu-id="2829c-326">Через RBAC можно сопоставить роль в организации с правами доступа к определенным ресурсам Azure, позволяя предоставить пользователям разрешения только на определенный набор действий (т. е. ограничить их).</span><span class="sxs-lookup"><span data-stu-id="2829c-326">Through RBAC, it is possible to map organizational role along with rights to access specific Azure resources, allowing you to restrict users to only a certain subset of actions.</span></span> <span data-ttu-id="2829c-327">С помощью RBAC доступ предоставляется путем назначения соответствующей роли пользователям, группам и приложениям в определенной области.</span><span class="sxs-lookup"><span data-stu-id="2829c-327">With RBAC, you can grant access by assigning the appropriate role to users, groups, and applications within the relevant scope.</span></span> <span data-ttu-id="2829c-328">Областью назначения роли может быть подписка Azure, группа ресурсов или отдельный ресурс.</span><span class="sxs-lookup"><span data-stu-id="2829c-328">The scope of a role assignment can be an Azure subscription, a resource group, or a single resource.</span></span> <span data-ttu-id="2829c-329">RBAC разрешает наследование разрешений.</span><span class="sxs-lookup"><span data-stu-id="2829c-329">RBAC allows inheritance of permissions.</span></span> <span data-ttu-id="2829c-330">Роли, назначенной в родительской области, предоставляется доступ также к содержащимся в ней дочерним элементам.</span><span class="sxs-lookup"><span data-stu-id="2829c-330">A role assigned at a parent scope also grants access to the children contained within it.</span></span> <span data-ttu-id="2829c-331">С помощью RBAC вы можете распределить обязанности и предоставить пользователям доступ на уровне, который им необходим для выполнения поставленных задач.</span><span class="sxs-lookup"><span data-stu-id="2829c-331">Using RBAC, you can segregate duties and grant only the amount of access to users that they need to perform their jobs.</span></span> <span data-ttu-id="2829c-332">Например, можно использовать RBAC, чтобы разрешить одному сотруднику управлять виртуальными машинами в подписке, а другому — управлять в ней базами данных SQL.</span><span class="sxs-lookup"><span data-stu-id="2829c-332">For example, use RBAC to let one employee manage virtual machines in a subscription, while another can manage SQL DBs within the same subscription.</span></span>
-   <span data-ttu-id="2829c-333">[**Пиринговая связь между виртуальными сетями**][VNetPeering].</span><span class="sxs-lookup"><span data-stu-id="2829c-333">[**VNet Peering**][VNetPeering].</span></span> <span data-ttu-id="2829c-334">Основная функция, используемая для создания инфраструктуры виртуального центра обработки данных — пиринговая связь между виртуальными сетями, механизм, который соединяет две виртуальные сети в одном регионе через сеть центра обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-334">The fundamental feature used to create the infrastructure of a vDC is VNet Peering, a mechanism that connects two virtual networks (VNets) in the same region through the network of the Azure data center.</span></span>

#### <a name="component-type-perimeter-networks"></a><span data-ttu-id="2829c-335">Тип компонента: сети периметра</span><span class="sxs-lookup"><span data-stu-id="2829c-335">Component Type: Perimeter Networks</span></span>
<span data-ttu-id="2829c-336">Компоненты [сети периметра][DMZ] (сети DMZ) позволяют обеспечить сетевые подключения локальных или физических сетей центра обработки данных, а также любые подключения к Интернету и из него.</span><span class="sxs-lookup"><span data-stu-id="2829c-336">[Perimeter network][DMZ] components (also known as a DMZ network) allow you to provide network  connectivity with your on-premises or physical data center networks, along with any connectivity to and from the Internet.</span></span> <span data-ttu-id="2829c-337">Сетевые группы и группы по обеспечению безопасности также проводят здесь большую часть времени.</span><span class="sxs-lookup"><span data-stu-id="2829c-337">It's also where your network and security teams likely spend most of their time.</span></span>

<span data-ttu-id="2829c-338">Прежде чем попасть на внутренние серверы в периферийных зонах, входящие пакеты должны пройти через устройства безопасности в концентраторе, такие как брандмауэры, IDS и IPS.</span><span class="sxs-lookup"><span data-stu-id="2829c-338">Incoming packets should flow through the security appliances in the hub, such as the firewall, IDS, and IPS, before reaching the back-end servers in the spokes.</span></span> <span data-ttu-id="2829c-339">Пакеты, направленные в Интернет рабочими нагрузками, также должны проходить через защитные устройства сети периметра перед выходом из сети. Это удобно для применения политик, выполнения проверок и аудита.</span><span class="sxs-lookup"><span data-stu-id="2829c-339">Internet-bound packets from the workloads should also flow through the security appliances in the perimeter network for policy enforcement, inspection, and auditing purposes, before leaving the network.</span></span>

<span data-ttu-id="2829c-340">Компоненты сети периметра предоставляют следующие возможности:</span><span class="sxs-lookup"><span data-stu-id="2829c-340">Perimeter network components provide the following features:</span></span>

-   <span data-ttu-id="2829c-341">[Виртуальные сети][VNet], [UDR][UDR], [NSG][NSG].</span><span class="sxs-lookup"><span data-stu-id="2829c-341">[Virtual Networks][VNet], [UDR][UDR], [NSG][NSG]</span></span>
-   <span data-ttu-id="2829c-342">[Виртуальные сетевые модули][NVA].</span><span class="sxs-lookup"><span data-stu-id="2829c-342">[Network Virtual Appliance][NVA]</span></span>
-   <span data-ttu-id="2829c-343">[Подсистема балансировки нагрузки][ALB].</span><span class="sxs-lookup"><span data-stu-id="2829c-343">[Load Balancer][ALB]</span></span>
-   <span data-ttu-id="2829c-344">[Шлюз приложения][AppGW] / [WAF][WAF].</span><span class="sxs-lookup"><span data-stu-id="2829c-344">[Application Gateway][AppGW] / [WAF][WAF]</span></span>
-   <span data-ttu-id="2829c-345">[Общедоступные IP-адреса][PIP].</span><span class="sxs-lookup"><span data-stu-id="2829c-345">[Public IPs][PIP]</span></span>

<span data-ttu-id="2829c-346">Как правило, группы централизованной ИТ-инфраструктуры и группы по обеспечению безопасности ответственны за определение требований и операций в сетях периметра.</span><span class="sxs-lookup"><span data-stu-id="2829c-346">Usually, the central IT and security teams have responsibility for requirement definition and operations of the perimeter networks.</span></span>

<span data-ttu-id="2829c-347">[![7]][7]</span><span class="sxs-lookup"><span data-stu-id="2829c-347">[![7]][7]</span></span>

<span data-ttu-id="2829c-348">На предыдущей схеме показано применение двух периметров с доступом в Интернет и локальную сеть. Оба периметра располагаются в концентраторе.</span><span class="sxs-lookup"><span data-stu-id="2829c-348">The preceding diagram shows the enforcement of two perimeters with access to the internet and an on-premises network, both resident in the hub.</span></span> <span data-ttu-id="2829c-349">В отдельном концентраторе сеть периметра с доступом в Интернет можно масштабировать для поддержки большого количества бизнес-приложений с помощью нескольких ферм брандмауэров веб-приложения (WAF) и стандартных брандмауэров.</span><span class="sxs-lookup"><span data-stu-id="2829c-349">In a single hub, the perimeter network to internet can scale up to support large numbers of LOBs, using multiple farms of Web Application Firewalls (WAFs) and/or firewalls.</span></span>

<span data-ttu-id="2829c-350">[**Виртуальные сети**][VNet]. Обычно концентратор создается в виртуальной сети с несколькими подсетями для размещения другого типа служб, выполняющих фильтрацию и анализ трафика в Интернет и обратно через NVA, WAF и шлюзы приложения Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-350">[**Virtual Networks**][VNet] The hub is typically built on a VNet with multiple subnets to host the different type of services filtering and inspecting traffic to or from the internet via NVAs, WAFs, and Azure Application Gateways.</span></span>

<span data-ttu-id="2829c-351">[**UDR**][UDR]. С помощью UDR клиенты могут развернуть брандмауэр, устройство IDS/IPS или другие виртуальные устройства и направить сетевой трафик через эти устройства безопасности, что позволяет применять, контролировать и проверять политики границ безопасности.</span><span class="sxs-lookup"><span data-stu-id="2829c-351">[**UDR**][UDR] Using UDR, customers can deploy firewalls, IDS/IPS, and other virtual appliances, and route network traffic through these security appliances for security boundary policy enforcement, auditing, and inspection.</span></span> <span data-ttu-id="2829c-352">UDR можно создать в концентраторе и периферийных зонах для обеспечения передачи трафика через определенные пользовательские виртуальные машины, виртуальные сетевые устройства и подсистемы балансировки нагрузки, используемые виртуальным центром обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-352">UDRs can be created in both the hub and the spokes to guarantee that traffic transits through the specific custom VMs, Network Virtual Appliances and load balancers used by the vDC.</span></span> <span data-ttu-id="2829c-353">Чтобы гарантировать, что трафик, созданный виртуальными машинами, находящимися в периферийной зоне, передается в нужные виртуальные устройства, в подсетях периферийной зоны необходимо задать определяемый пользователем маршрут. Для этого нужно задать интерфейсный IP-адрес внутреннего балансировщика нагрузки для следующего перехода.</span><span class="sxs-lookup"><span data-stu-id="2829c-353">To guarantee that traffic generated from VMs resident in the spoke transit to the correct virtual appliances, a UDR needs to be set in the subnets of the spoke by setting the front-end IP address of the internal load balancer as the next-hop.</span></span> <span data-ttu-id="2829c-354">Внутренняя подсистема балансировки нагрузки распределяет внутренний трафик на виртуальные устройства (внутренний пул подсистемы балансировки нагрузки).</span><span class="sxs-lookup"><span data-stu-id="2829c-354">The internal load balancer distributes the internal traffic to the virtual appliances (load balancer back-end pool).</span></span>

<span data-ttu-id="2829c-355">[![8]][8]</span><span class="sxs-lookup"><span data-stu-id="2829c-355">[![8]][8]</span></span>

<span data-ttu-id="2829c-356">[**Сетевые виртуальные устройства**][NVA]. В концентраторе сеть периметра с доступом в Интернет обычно управляется с помощью фермы брандмауэров или брандмауэров веб-приложения (WAF).</span><span class="sxs-lookup"><span data-stu-id="2829c-356">[**Network Virtual Appliances**][NVA] In the hub, the perimeter network with access to the internet is normally managed through a farm of firewalls and/or Web Application Firewalls (WAFs).</span></span>

<span data-ttu-id="2829c-357">Различные бизнес-приложения обычно используют многие веб-приложения, которые, как правило, являются уязвимыми.</span><span class="sxs-lookup"><span data-stu-id="2829c-357">Different LOBs commonly use many web applications, and these applications tend to suffer from various vulnerabilities and potential exploits.</span></span> <span data-ttu-id="2829c-358">Брандмауэры веб-приложений представляют особое поколение продукта, используемого для обнаружения атак, направленных на веб-приложения (HTTP и HTTPS). Это и отличает их от брандмауэров стандартного типа.</span><span class="sxs-lookup"><span data-stu-id="2829c-358">Web Applications Firewalls are a special breed of product used to detect attacks against web applications (HTTP/HTTPS) in more depth than a generic firewall.</span></span> <span data-ttu-id="2829c-359">По сравнению с традиционными брандмауэрами WAF содержит набор специальных функций для защиты внутренних веб-серверов от угроз.</span><span class="sxs-lookup"><span data-stu-id="2829c-359">Compared with tradition firewall technology, WAFs have a set of specific features to protect internal web servers from threats.</span></span>

<span data-ttu-id="2829c-360">Ферма брандмауэра представляет группу брандмауэров, совместно работающих под общим администрированием и включающих набор правил безопасности для защиты рабочих нагрузок, размещенных в периферийных зонах, а также управление доступом к локальным сетям.</span><span class="sxs-lookup"><span data-stu-id="2829c-360">A firewall farm is group of firewalls working in tandem under the same common administration, with a set of security rules to protect the workloads hosted in the spokes, and control access to on-premises networks.</span></span> <span data-ttu-id="2829c-361">Программное обеспечение фермы брандмауэра менее специализированное по сравнению с ПО WAF, но включает широкую область для фильтрации и проверки любого типа трафика (входящего и исходящего).</span><span class="sxs-lookup"><span data-stu-id="2829c-361">A firewall farm has less specialized software compared with a WAF, but has a broad application scope to filter and inspect any type of traffic in egress and ingress.</span></span> <span data-ttu-id="2829c-362">Фермы брандмауэра обычно реализуются в Azure с помощью виртуальных сетевых устройств (NVA), доступных в Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="2829c-362">Firewall farms are normally implemented in Azure through Network Virtual Appliances (NVAs), which are available in the Azure marketplace.</span></span>

<span data-ttu-id="2829c-363">Мы рекомендуем использовать один набор NVA для трафика в Интернете, и другой набор — для трафика, создаваемого локальными системами.</span><span class="sxs-lookup"><span data-stu-id="2829c-363">It is recommended to use one set of NVAs for traffic originating on the Internet, and another for traffic originating on-premises.</span></span> <span data-ttu-id="2829c-364">Использование только одного набора NVA в обоих случаях представляет угрозу безопасности, так как между двумя наборами сетевого трафика отсутствует периметр безопасности.</span><span class="sxs-lookup"><span data-stu-id="2829c-364">Using only one set of NVAs for both is a security risk, as it provides no security perimeter between the two sets of network traffic.</span></span> <span data-ttu-id="2829c-365">Использование отдельных NVA упрощает проверку правил безопасности, а также позволяет понять, какие правила соответствуют определенным входящим сетевым запросам.</span><span class="sxs-lookup"><span data-stu-id="2829c-365">Using separate NVAs reduces the complexity of checking security rules, and makes it clear which rules correspond to which incoming network request.</span></span>

<span data-ttu-id="2829c-366">Большинство крупных предприятий управляют несколькими доменами.</span><span class="sxs-lookup"><span data-stu-id="2829c-366">Most large enterprises manage multiple domains.</span></span> <span data-ttu-id="2829c-367">Azure DNS можно использовать для размещения DNS-записей определенного домена.</span><span class="sxs-lookup"><span data-stu-id="2829c-367">Azure DNS can be used to host the DNS records for a particular domain.</span></span> <span data-ttu-id="2829c-368">Например, виртуальный IP-адрес (VIP) внешней подсистемы балансировки нагрузки Azure (или брандмауэры WAF) можно зарегистрировать в записи A записи Azure DNS.</span><span class="sxs-lookup"><span data-stu-id="2829c-368">As example, the Virtual IP Address (VIP) of the Azure external load balancer (or the WAFs) can be registered in the A record of an Azure DNS record.</span></span>

<span data-ttu-id="2829c-369">[**Azure Load Balancer**][ALB]. Это служба высокого уровня доступности (уровень 4) (TCP, UDP), которая может распределять входящий трафик между экземплярами службы, определенными в наборе балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2829c-369">[**Azure Load Balancer**][ALB] Azure load balancer offers a high availability Layer 4 (TCP, UDP) service, which can distribute incoming traffic among service instances defined in a load-balanced set.</span></span> <span data-ttu-id="2829c-370">Трафик, отправленный в подсистему балансировки нагрузки из интерфейсных конечных точек (конечных точек общедоступного IP-адреса или частного IP-адреса) может распространяться с преобразованием адреса и без него в набор внутреннего пула IP-адресов (например, виртуальные сетевые устройства или виртуальные машины).</span><span class="sxs-lookup"><span data-stu-id="2829c-370">Traffic sent to the load balancer from front-end endpoints (public IP endpoints or private IP endpoints) can be redistributed with or without address translation to a set of back-end IP address pool (examples being; Network Virtual Appliances or VMs).</span></span>

<span data-ttu-id="2829c-371">Azure Load Balancer также может проверять работоспособность различных экземпляров сервера. Если проверка завершается ошибкой, подсистема балансировки нагрузки останавливает передачу трафика в неработоспособный экземпляр.</span><span class="sxs-lookup"><span data-stu-id="2829c-371">Azure Load Balancer can probe the health of the various server instances as well, and when a probe fails to respond the load balancer stops sending traffic to the unhealthy instance.</span></span> <span data-ttu-id="2829c-372">В виртуальном центре обработки данных у нас есть внешняя подсистема балансировки нагрузки в концентраторе (например, балансировка трафика в NVA) и периферийных зонах (для выполнения таких задач, как балансировка трафика между разными виртуальными машинами многоуровневого приложения).</span><span class="sxs-lookup"><span data-stu-id="2829c-372">In a vDC, we have the presence of an external load balancer in the hub (for instance, balance the traffic to NVAs), and in the spokes (to perform tasks like balancing traffic between different VMs of a multitier application).</span></span>

<span data-ttu-id="2829c-373">[**Шлюз приложений**][AppGW]. Шлюз приложений Microsoft Azure — это выделенный виртуальный модуль, предоставляющий контроллер доставки приложений (ADC) как услугу, предлагая для приложения множество функций балансировки нагрузки уровня 7.</span><span class="sxs-lookup"><span data-stu-id="2829c-373">[**Application Gateway**][AppGW] Microsoft Azure Application Gateway is a dedicated virtual appliance providing application delivery controller (ADC) as a service, offering various layer 7 load balancing capabilities for your application.</span></span> <span data-ttu-id="2829c-374">Таким образом, вы можете оптимизировать производительность веб-фермы за счет выполнения операции завершения SSL-запросов, требующей интенсивного использования ЦП, на шлюзе приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-374">It allows you to optimize web farm productivity by offloading CPU intensive SSL termination to the application gateway.</span></span> <span data-ttu-id="2829c-375">Кроме того, пользователи получают другие возможности маршрутизации уровня 7, включая распределение входящего трафика методом циклического перебора, соответствие сеансу на основе файлов cookie, маршрутизацию на основе URL-путей и возможность размещения нескольких веб-сайтов за одним шлюзом приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-375">It also provides other layer 7 routing capabilities including round robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and the ability to host multiple websites behind a single Application Gateway.</span></span> <span data-ttu-id="2829c-376">Брандмауэр веб-приложений (WAF) также предоставляется как часть SKU WAF шлюза приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-376">A web application firewall (WAF) is also provided as part of the application gateway WAF SKU.</span></span> <span data-ttu-id="2829c-377">Этот SKU обеспечивает защиту веб-приложений от распространенных веб-уязвимостей и эксплойтов.</span><span class="sxs-lookup"><span data-stu-id="2829c-377">This SKU provides protection to web applications from common web vulnerabilities and exploits.</span></span> <span data-ttu-id="2829c-378">Шлюз приложений можно настроить как шлюз с выходом в Интернет, внутренний шлюз или их сочетание.</span><span class="sxs-lookup"><span data-stu-id="2829c-378">Application Gateway can be configured as internet facing gateway, internal only gateway, or a combination of both.</span></span> 

<span data-ttu-id="2829c-379">[**Общедоступные IP-адреса**][PIP]. Некоторые функции Azure позволяют связывать конечные точки службы с общедоступным IP-адресом для получения доступа к ресурсам из Интернета.</span><span class="sxs-lookup"><span data-stu-id="2829c-379">[**Public IPs**][PIP] Some Azure features enable you to associate service endpoints to a public IP address that allows to your resource to be accessed from the internet.</span></span> <span data-ttu-id="2829c-380">Конечная точка использует преобразование сетевых адресов (NAT) для маршрутизации трафика на внутренний адрес и порт в виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-380">This endpoint uses Network Address Translation (NAT) to route traffic to the internal address and port on the Azure virtual network.</span></span> <span data-ttu-id="2829c-381">Это основной путь передачи внешнего трафика в виртуальную сеть.</span><span class="sxs-lookup"><span data-stu-id="2829c-381">This path is the primary way for external traffic to pass into the virtual network.</span></span> <span data-ttu-id="2829c-382">Общедоступные IP-адреса можно настроить, чтобы определить, какой трафик следует пропускать в виртуальную сеть, а также как и где его следует пропускать.</span><span class="sxs-lookup"><span data-stu-id="2829c-382">The Public IP addresses can be configured to determine which traffic is passed in, and how and where it's translated on to the virtual network.</span></span>

#### <a name="component-type-monitoring"></a><span data-ttu-id="2829c-383">Тип компонента: мониторинг</span><span class="sxs-lookup"><span data-stu-id="2829c-383">Component Type: Monitoring</span></span>
<span data-ttu-id="2829c-384">Компоненты мониторинга обеспечивают видимость и оповещения, получаемые от всех других типов компонентов.</span><span class="sxs-lookup"><span data-stu-id="2829c-384">Monitoring components provide visibility and alerting from all the other components types.</span></span> <span data-ttu-id="2829c-385">У всех групп должен быть доступ к мониторингу соответствующих компонентов и служб.</span><span class="sxs-lookup"><span data-stu-id="2829c-385">All teams should have access to monitoring for the components and services they have access to.</span></span> <span data-ttu-id="2829c-386">Если у вас есть централизованная служба поддержки или операционные группы, им понадобится интегрированный доступ к данным, обеспечиваемым этими компонентами.</span><span class="sxs-lookup"><span data-stu-id="2829c-386">If you have a centralized help desk or operations teams, they would need to have integrated access to the data provided by these components.</span></span>

<span data-ttu-id="2829c-387">Azure предлагает различные типы служб ведения журналов и мониторинга для отслеживания поведения размещенных ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-387">Azure offers different types of logging and monitoring services to track the behavior of Azure hosted resources.</span></span> <span data-ttu-id="2829c-388">Регулирование рабочих нагрузок и управление ими в Azure основано не только на сборе данных журнала, но также на возможности активировать действия на основе определенных сообщаемых событий.</span><span class="sxs-lookup"><span data-stu-id="2829c-388">Governance and control of workloads in Azure is based not just on collecting log data, but also the ability to trigger actions based on specific reported events.</span></span>

<span data-ttu-id="2829c-389">Есть два основных типа журналов в Azure:</span><span class="sxs-lookup"><span data-stu-id="2829c-389">There are two major types of logs in Azure:</span></span>

-   <span data-ttu-id="2829c-390">[**Журнал действий**][ActLog] (также называется "операционный журнал") обеспечивает сведения об операциях, выполняемых в ресурсах в подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-390">[**Activity Logs**][ActLog] (referred also as "Operational Log") provide insight into the operations that were performed on resources in the Azure subscription.</span></span> <span data-ttu-id="2829c-391">Эти журналы предоставляют отчет о событиях уровня управления в подписках.</span><span class="sxs-lookup"><span data-stu-id="2829c-391">These logs report the control-plane events for your subscriptions.</span></span> <span data-ttu-id="2829c-392">Журналы аудита ведутся для каждого ресурса Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-392">Every Azure resource produces audit logs.</span></span>

-   <span data-ttu-id="2829c-393">[**Журналы диагностики Azure**][DiagLog] генерируются ресурсом. Они содержат подробные и своевременные данные о работе этого ресурса.</span><span class="sxs-lookup"><span data-stu-id="2829c-393">[**Azure Diagnostic Logs**][DiagLog] are logs generated by a resource that provide rich, frequent data about the operation of that resource.</span></span> <span data-ttu-id="2829c-394">Содержимое этих журналов зависит от типа ресурса.</span><span class="sxs-lookup"><span data-stu-id="2829c-394">The content of these logs varies by resource type.</span></span>

<span data-ttu-id="2829c-395">[![9]][9]</span><span class="sxs-lookup"><span data-stu-id="2829c-395">[![9]][9]</span></span>

<span data-ttu-id="2829c-396">В виртуальном центре обработки данных очень важно отслеживать журналы групп безопасности сети (NSG), а особенно следующие:</span><span class="sxs-lookup"><span data-stu-id="2829c-396">In a vDC, it is extremely important to track the NSGs logs, particularly this information:</span></span>

-   <span data-ttu-id="2829c-397">[**Журналы событий**][NSGLog]. Эти журналы предоставляют сведения о правилах NSG, примененных к виртуальным машинам и ролям экземпляров на основе MAC-адреса.</span><span class="sxs-lookup"><span data-stu-id="2829c-397">[**Event logs**][NSGLog]: provides information on what NSG rules are applied to VMs and instance roles based on MAC address.</span></span>
-   <span data-ttu-id="2829c-398">[**Журналы счетчиков**][NSGLog].Они позволяют отслеживать, сколько раз каждое правило NSG применялось для запрета или разрешения трафика.</span><span class="sxs-lookup"><span data-stu-id="2829c-398">[**Counter logs**][NSGLog]: tracks how many times each NSG rule was executed to deny or allow traffic.</span></span>

<span data-ttu-id="2829c-399">Все журналы можно хранить в учетных записях хранения Azure для аудита, статического анализа или архивации.</span><span class="sxs-lookup"><span data-stu-id="2829c-399">All logs can be stored in Azure Storage Accounts for audit, static analysis, or backup purposes.</span></span> <span data-ttu-id="2829c-400">Если журналы хранятся в учетной записи хранения Azure, клиенты могут использовать разные типы платформ для извлечения, подготовки, анализа и визуализации этих данных для отчета о состоянии работоспособности облачных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2829c-400">When the logs are stored in an Azure storage account, customers can use different types of frameworks to retrieve, prep, analyze, and visualize this data to report the status and health of cloud resources.</span></span>

<span data-ttu-id="2829c-401">У больших предприятий должна быть стандартная платформа для мониторинга локальных систем, которую они могут расширить для интеграции журналов, созданных развертываниями в облаке.</span><span class="sxs-lookup"><span data-stu-id="2829c-401">Large enterprises should already have acquired a standard framework for monitoring on-premises systems and can extend that framework to integrate logs generated by cloud deployments.</span></span> <span data-ttu-id="2829c-402">Для организаций, которые предпочитают хранить все журналы в облаке, [Microsoft Operations Management Suite (OMS)][OMS] — оптимальный выбор.</span><span class="sxs-lookup"><span data-stu-id="2829c-402">For organizations that wish to keep all the logging in the cloud, [Microsoft Operations Management Suite (OMS)][OMS] is a great choice.</span></span> <span data-ttu-id="2829c-403">Набор OMS реализован как облачная служба, поэтому время, затрачиваемое на подготовку к работе, минимально, как и вложения в службы инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="2829c-403">Since OMS is implemented as a cloud-based service, you can have it up and running quickly with minimal investment in infrastructure services.</span></span> <span data-ttu-id="2829c-404">OMS может также поддерживать интеграцию с компонентами System Center, такими как System Center Operations Manager, позволяя распространить существующие инвестиции управления в облако.</span><span class="sxs-lookup"><span data-stu-id="2829c-404">OMS can also integrate with System Center components such as System Center Operations Manager to extend your existing management investments into the cloud.</span></span>

<span data-ttu-id="2829c-405">OMS Log Analytics — это компонент платформы OMS, который помогает выполнить сбор, сопоставление, поиск и действия в отношении данных журналов и производительности, созданных операционными системами, приложениями и облачными компонентами инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="2829c-405">OMS Log analytics is a component of the OMS framework to help collect, correlate, search, and act on log and performance data generated by operating systems, applications, infrastructure cloud components.</span></span> <span data-ttu-id="2829c-406">OMS Log Analytics предоставляет клиентам сведения об операциях в режиме реального времени, используя интегрированный поиск и настраиваемые панели мониторинга для анализа всех записей всех рабочих нагрузок в виртуальном центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-406">It gives customers real-time operational insights using integrated search and custom dashboards to analyze all the records across all your workloads in a vDC.</span></span>

#### <a name="component-type-workloads"></a><span data-ttu-id="2829c-407">Тип компонента: рабочие нагрузки</span><span class="sxs-lookup"><span data-stu-id="2829c-407">Component Type: Workloads</span></span>
<span data-ttu-id="2829c-408">Именно здесь находятся ваши фактические приложения и службы.</span><span class="sxs-lookup"><span data-stu-id="2829c-408">Workload components are where your actual applications and services reside.</span></span> <span data-ttu-id="2829c-409">Группы разработчиков приложения также проводят здесь большую часть времени.</span><span class="sxs-lookup"><span data-stu-id="2829c-409">It's also where your application development teams spend most of their time.</span></span>

<span data-ttu-id="2829c-410">Возможности рабочих нагрузок на самом деле безграничны.</span><span class="sxs-lookup"><span data-stu-id="2829c-410">The workload possibilities are truly endless.</span></span> <span data-ttu-id="2829c-411">Ниже приведены всего несколько возможных типов рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="2829c-411">The following are just a few of the possible workload types:</span></span>

<span data-ttu-id="2829c-412">**Внутренние бизнес-приложения**</span><span class="sxs-lookup"><span data-stu-id="2829c-412">**Internal LOB Applications**</span></span>

<span data-ttu-id="2829c-413">Бизнес-приложения — приложения для компьютера, которые являются чрезвычайно важными для выполняющихся корпоративных операций.</span><span class="sxs-lookup"><span data-stu-id="2829c-413">Line-of-business applications are computer applications critical to the ongoing operation of an enterprise.</span></span> <span data-ttu-id="2829c-414">У них есть некоторые общие характеристики.</span><span class="sxs-lookup"><span data-stu-id="2829c-414">LOB applications have some common characteristics:</span></span>

-   <span data-ttu-id="2829c-415">**Интерактивность**.</span><span class="sxs-lookup"><span data-stu-id="2829c-415">**Interactive**.</span></span> <span data-ttu-id="2829c-416">Бизнес-приложения интерактивны по своей природе: вводятся данные и возвращаются результаты или отчеты.</span><span class="sxs-lookup"><span data-stu-id="2829c-416">LOB applications are interactive by nature: data is entered, and result/reports are returned.</span></span>
-   <span data-ttu-id="2829c-417">**Активное использование данных**.</span><span class="sxs-lookup"><span data-stu-id="2829c-417">**Data driven**.</span></span> <span data-ttu-id="2829c-418">Бизнес-приложения — это приложения, интенсивно использующие данные, которым требуется частый доступ к базам данных или другому хранилищу.</span><span class="sxs-lookup"><span data-stu-id="2829c-418">LOB applications are data intensive with frequent access to the databases or other storage.</span></span>
-   <span data-ttu-id="2829c-419">**Интеграция**.</span><span class="sxs-lookup"><span data-stu-id="2829c-419">**Integrated**.</span></span> <span data-ttu-id="2829c-420">Эти приложения предлагают интеграцию с другими системами в организации или за ее пределами.</span><span class="sxs-lookup"><span data-stu-id="2829c-420">LOB applications offer integration with other systems within or outside the organization.</span></span>

<span data-ttu-id="2829c-421">**Веб-сайты для клиентов (Интернет или внутренние)**. Большинство приложений, взаимодействующих с Интернетом, — это веб-сайты.</span><span class="sxs-lookup"><span data-stu-id="2829c-421">**Customer facing web sites (Internet or Internal facing)** Most applications that interact with the Internet are web sites.</span></span> <span data-ttu-id="2829c-422">Azure предлагает возможность запуска веб-сайта на виртуальной машине IaaS или на сайте [веб-приложений Azure][WebApps] (PaaS).</span><span class="sxs-lookup"><span data-stu-id="2829c-422">Azure offers the capability to run a web site on an IaaS VM or from an [Azure Web Apps][WebApps] site (PaaS).</span></span> <span data-ttu-id="2829c-423">Веб-приложения Azure поддерживают интеграцию с виртуальными сетями, которые разрешают развертывание веб-приложений в периферийной зоне виртуального центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-423">Azure Web Apps support integration with VNets that allow the deployment of the Web Apps in the spoke of a vDC.</span></span> <span data-ttu-id="2829c-424">Благодаря интеграции с виртуальной сетью вам не нужно предоставлять конечную точку в Интернете приложениям. Вместо этого из частной виртуальной сети будут использоваться частные адреса, недоступные из Интернета.</span><span class="sxs-lookup"><span data-stu-id="2829c-424">With the VNET integration, you don't need to expose an Internet endpoint for your applications but can use the resources private non-internet routable address from your private VNet instead.</span></span>

<span data-ttu-id="2829c-425">**Данные большого размера и анализ**. Когда данные необходимо масштабировать до очень большого объема, базы данных могут не справиться с соответствующим масштабированием.</span><span class="sxs-lookup"><span data-stu-id="2829c-425">**Big Data/Analytics** When data needs to scale up to a very large volume, databases may not scale up properly.</span></span> <span data-ttu-id="2829c-426">Технология Hadoop предлагает систему для параллельного запуска распределенных запросов в большом количестве узлов.</span><span class="sxs-lookup"><span data-stu-id="2829c-426">Hadoop technology offers a system to run distributed queries in parallel on large number of nodes.</span></span> <span data-ttu-id="2829c-427">Клиенты могут выполнить рабочие нагрузки данных на виртуальных машинах IaaS или в PaaS ([HDInsight][HDI]).</span><span class="sxs-lookup"><span data-stu-id="2829c-427">Customers have the option to run data workloads in IaaS VMs or PaaS ([HDInsight][HDI]).</span></span> <span data-ttu-id="2829c-428">HDInsight поддерживает развертывание в виртуальную сеть на основе расположения. Развертывание можно выполнить в кластер в периферийной зоне виртуального центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-428">HDInsight supports deploying into a location-based VNet, can be deployed to a cluster in a spoke of the vDC.</span></span>

<span data-ttu-id="2829c-429">
[Концентраторы событий Azure][EventHubs]**для событий и сообщений** — это служба обработки данных телеметрии с высокой степенью масштабируемости, которая собирает, преобразовывает и хранит миллионы событий.</span><span class="sxs-lookup"><span data-stu-id="2829c-429">**Events and Messaging**
[Azure Event Hubs][EventHubs] is a hyper-scale telemetry ingestion service that collects, transforms, and stores millions of events.</span></span> <span data-ttu-id="2829c-430">Эта распределенная платформа для потоковой передачи данных с низкой задержкой и настраиваемым временем хранения позволяет принимать большие объемы данных телеметрии в Azure, а также считывать эти данные из нескольких приложений.</span><span class="sxs-lookup"><span data-stu-id="2829c-430">As a distributed streaming platform, it offers low latency and configurable time retention, enabling you to ingest massive amounts of telemetry into Azure and read that data from multiple applications.</span></span> <span data-ttu-id="2829c-431">С концентраторами событий отдельный поток может поддерживать обработку конвейеров в режиме реального времени и на основе пакетов.</span><span class="sxs-lookup"><span data-stu-id="2829c-431">With Event Hubs, a single stream can support both real-time and batch-based pipelines.</span></span>

<span data-ttu-id="2829c-432">Высоконадежную облачную систему для обмена сообщениями между приложениями и службами можно реализовать с помощью [служебной шины Azure][ServiceBus], которая предлагает асинхронный обмен сообщениями через брокер между клиентом и сервером, а также обработку сообщений в порядке поступления и возможность публикации и подписки.</span><span class="sxs-lookup"><span data-stu-id="2829c-432">A highly reliable cloud messaging service between applications and services, can be implemented through [Azure Service Bus][ServiceBus] that offers asynchronous brokered messaging between client and server, along with structured first-in-first-out (FIFO) messaging and publish/subscribe capabilities.</span></span>

<span data-ttu-id="2829c-433">[![10]][10]</span><span class="sxs-lookup"><span data-stu-id="2829c-433">[![10]][10]</span></span>

### <a name="multiple-vdc"></a><span data-ttu-id="2829c-434">Несколько виртуальных центров обработки данных</span><span class="sxs-lookup"><span data-stu-id="2829c-434">Multiple vDC</span></span>
<span data-ttu-id="2829c-435">Как видно в этой статье основное внимание уделяется отдельному виртуальному центру данных. Здесь описываются базовые компоненты и архитектура, обеспечивающие отказоустойчивость этого центра.</span><span class="sxs-lookup"><span data-stu-id="2829c-435">So far, this article has focused on a single vDC, describing the basic components and architecture that contribute to a resilient vDC.</span></span> <span data-ttu-id="2829c-436">Такие компоненты Azure, как Azure Load Balancer, NVA, группы доступности, наборы масштабирования и другие механизмы обеспечивают систему, позволяющую создать в рабочих службах надежные уровни SLA.</span><span class="sxs-lookup"><span data-stu-id="2829c-436">Azure features such as Azure load balancer, NVAs, availability sets, scale sets, along with other mechanisms contribute to a system that allow you to build solid SLA levels into your production services.</span></span>

<span data-ttu-id="2829c-437">Тем не менее, отдельный виртуальный центр обработки данных размещается в одном регионе и является уязвимым к простоям, что может сказаться на функционировании всего региона.</span><span class="sxs-lookup"><span data-stu-id="2829c-437">However, a single vDC is hosted within a single region, and is vulnerable to major outage that might affect that entire region.</span></span> <span data-ttu-id="2829c-438">Клиентам, которые хотят получить высокий уровень обслуживания согласно SLA, необходимо защитить службы с помощью развертываний одного проекта в двух (или более) виртуальных центрах данных в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="2829c-438">Customers that want to achieve high SLAs need to protect the services through deployments of the same project in two (or more) vDCs, placed in different regions.</span></span>

<span data-ttu-id="2829c-439">Кроме этого сценария, мы рекомендуем рассмотреть еще несколько распространенных сценариев, требующих развертывания нескольких виртуальных центров обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-439">In addition to SLA concerns, there are several common scenarios where deploying multiple vDCs makes sense:</span></span>

-   <span data-ttu-id="2829c-440">Региональное и глобальное присутствие.</span><span class="sxs-lookup"><span data-stu-id="2829c-440">Regional/Global presence</span></span>
-   <span data-ttu-id="2829c-441">Аварийное восстановление</span><span class="sxs-lookup"><span data-stu-id="2829c-441">Disaster Recovery</span></span>
-   <span data-ttu-id="2829c-442">Механизм перенаправления трафика между центрами обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-442">Mechanism to divert traffic between DC</span></span>

#### <a name="regionalglobal-presence"></a><span data-ttu-id="2829c-443">Региональное и глобальное присутствие</span><span class="sxs-lookup"><span data-stu-id="2829c-443">Regional/Global presence</span></span>
<span data-ttu-id="2829c-444">Центры обработки данных Azure присутствуют в различных регионах по всему миру.</span><span class="sxs-lookup"><span data-stu-id="2829c-444">Azure data centers are present in numerous regions worldwide.</span></span> <span data-ttu-id="2829c-445">При выборе нескольких центров обработки данных Azure клиенты должны учитывать два связанных фактора: географические расстояния и задержку.</span><span class="sxs-lookup"><span data-stu-id="2829c-445">When selecting multiple Azure data centers, customers need to consider two related factors: geographical distances and latency.</span></span> <span data-ttu-id="2829c-446">Клиентам необходимо рассчитать географическое расстояние между виртуальными центрами обработки данных, а также расстояние между таким центром и пользователем для обеспечения оптимального взаимодействия с последним.</span><span class="sxs-lookup"><span data-stu-id="2829c-446">Customers need to evaluate the geographical distance between the vDCs and  the distance between the vDC and the end users, to offer the best user experience.</span></span>

<span data-ttu-id="2829c-447">Регион Azure, в котором размещаются виртуальные центры обработки данных, должен соответствовать нормативным требованиям, установленным обязательной юрисдикцией для организации.</span><span class="sxs-lookup"><span data-stu-id="2829c-447">The Azure Region where vDCs are hosted also need to conform with regulatory requirements established by any legal jurisdiction under which your organization operates.</span></span>

#### <a name="disaster-recovery"></a><span data-ttu-id="2829c-448">Аварийное восстановление</span><span class="sxs-lookup"><span data-stu-id="2829c-448">Disaster Recovery</span></span>
<span data-ttu-id="2829c-449">Реализация плана аварийного восстановления напрямую связана с типом соответствующей рабочей нагрузки и возможностью синхронизации состояния рабочей нагрузки между виртуальными центрами обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-449">The implementation of a disaster recovery plan is strongly related to the type of workload concerned, and the ability to synchronize the workload state between different vDCs.</span></span> <span data-ttu-id="2829c-450">В идеале большинство клиентов хотят синхронизировать данные приложений между развертываниями, выполняющимися в двух разных виртуальных центрах данных, для реализации быстрой отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="2829c-450">Ideally, most customers want to synchronize application data between deployments running in two different vDCs to implement a fast fail-over mechanism.</span></span> <span data-ttu-id="2829c-451">Большинство приложений чувствительны к задержке, что может привести к потенциальному истечению времени ожидания и задержке синхронизации данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-451">Most applications are sensitive to latency, and that can cause potential timeout and delay in data synchronization.</span></span>

<span data-ttu-id="2829c-452">Мониторинг синхронизации или пульса приложений в разных виртуальных центрах данных требует взаимодействия между этими центрами.</span><span class="sxs-lookup"><span data-stu-id="2829c-452">Synchronization or heartbeat monitoring of applications in different vDCs requires communication between them.</span></span> <span data-ttu-id="2829c-453">Два виртуальных центра обработки данных в разных регионах можно подключить следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2829c-453">Two vDCs in different regions can be connected through:</span></span>

-   <span data-ttu-id="2829c-454">частный пиринг ExpressRoute, когда концентраторы виртуального центра обработки данных подключены к одному каналу ExpressRoute;</span><span class="sxs-lookup"><span data-stu-id="2829c-454">ExpressRoute private peering when the vDC hubs are connected to the same ExpressRoute circuit</span></span>
-   <span data-ttu-id="2829c-455">несколько каналов ExpressRoute, подключенных через корпоративную магистраль, и сетку виртуального центра обработки данных, подключенную к каналам ExpressRoute;</span><span class="sxs-lookup"><span data-stu-id="2829c-455">multiple ExpressRoute circuits connected via your corporate backbone and your vDC mesh connected to the ExpressRoute circuits</span></span>
-   <span data-ttu-id="2829c-456">VPN-подключения типа "сеть — сеть" между концентраторами виртуального центра обработки данных в каждом регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="2829c-456">Site-to-Site VPN connections between your vDC hubs in each Azure Region</span></span>

<span data-ttu-id="2829c-457">Подключение ExpressRoute — предпочтительный механизм из-за более высокой пропускной способности и последовательной задержки при передаче через магистраль Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="2829c-457">Usually the ExpressRoute connection is the preferred mechanism due higher bandwidth and consistent latency when transiting through the Microsoft backbone.</span></span>

<span data-ttu-id="2829c-458">Для проверки приложения, распределенного между двумя (или более) разными виртуальными центрами обработки данных, расположенных в разных регионах, используется стандартный способ.</span><span class="sxs-lookup"><span data-stu-id="2829c-458">There is no magic recipe to validate an application distributed between two (or more) different vDCs located in different regions.</span></span> <span data-ttu-id="2829c-459">Клиенты должны выполнить тестовую проверку сети, чтобы проверить задержку и пропускную способность подключений и решить, какая репликация данных более подходящая (синхронная или асинхронная), а также определить оптимальное целевое время восстановления для рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="2829c-459">Customers should run network qualification tests to verify the latency and bandwidth of the connections and target whether synchronous or asynchronous data replication is appropriate and what the optimal recovery time objective (RTO) can be for your workloads.</span></span>

#### <a name="mechanism-to-divert-traffic-between-dc"></a><span data-ttu-id="2829c-460">Механизм перенаправления трафика между центрами обработки данных</span><span class="sxs-lookup"><span data-stu-id="2829c-460">Mechanism to divert traffic between DC</span></span>
<span data-ttu-id="2829c-461">Один из эффективных подходов для перенаправления входящего трафика из одного виртуального центра обработки данных в другой основан на DNS.</span><span class="sxs-lookup"><span data-stu-id="2829c-461">One effective technique to divert the traffic incoming in one DC to another is based on DNS.</span></span> <span data-ttu-id="2829c-462">[Диспетчер трафика Azure][TM] использует механизм службы доменных имен (DNS), чтобы направлять трафик пользователей в наиболее оптимальную общедоступную конечную точку в определенном виртуальном центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-462">[Azure Traffic Manager][TM] uses the Domain Name System (DNS) mechanism to direct the end-user traffic to the most appropriate public endpoint in a specific vDC.</span></span> <span data-ttu-id="2829c-463">Через пробы диспетчер трафика периодически проверяет работоспособность службы общедоступных конечных точек в разных виртуальных центрах данных, а в случае сбоя этих конечных точек выполняется автоматическое перенаправление в дополнительный виртуальный центр обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-463">Through probes, Traffic Manager periodically checks the service health of public endpoints in different vDCs and, in case of failure of those endpoints, it routes automatically to the secondary vDC.</span></span>

<span data-ttu-id="2829c-464">Диспетчер трафика работает в общедоступных конечных точках Azure и его можно использовать, например, для управления или перенаправления трафика на виртуальные машины Azure и веб-приложения в соответствующем виртуальном центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-464">Traffic Manager works on Azure public endpoints and can be used, for example, to control/divert traffic to Azure VMs and Web Apps in the appropriate vDC.</span></span> <span data-ttu-id="2829c-465">Диспетчер трафика является отказоустойчивым даже в случае сбоя во всем регионе Azure. Он может управлять распределением пользовательского трафика для конечных точек службы в разных виртуальных центрах данных на основе нескольких критериев (например, при сбое службы в определенном виртуальном центре обработки данных или выборе виртуального центра обработки данных с наименьшей задержкой сети для клиента).</span><span class="sxs-lookup"><span data-stu-id="2829c-465">Traffic Manager is resilient even in the face of an entire Azure region failing and can control the distribution of user traffic for service endpoints in different vDCs based on several criteria (for instance, failure of a service in a specific vDC, or selecting the vDC with the lowest network latency for the client).</span></span>

### <a name="conclusion"></a><span data-ttu-id="2829c-466">Заключение</span><span class="sxs-lookup"><span data-stu-id="2829c-466">Conclusion</span></span>
<span data-ttu-id="2829c-467">Виртуальный центр обработки данных — это подход к перемещению центра обработки данных в облако, в котором используется сочетание функций и возможностей для создания масштабируемой архитектуры в Azure, расширяющей использование облачных ресурсов, сокращающей затраты и упрощающей системное регулирование.</span><span class="sxs-lookup"><span data-stu-id="2829c-467">The Virtual Data Center is an approach to data center migration into the cloud that uses a combination of features and capabilities to create a scalable architecture in Azure that maximizes cloud resource use, reducing costs, and simplifying system governance.</span></span> <span data-ttu-id="2829c-468">Понятие виртуального центра обработки данных основано на звездообразной топологии, предоставляющей распространенные общие службы в концентраторе и позволяющей размещать конкретные приложения и рабочие нагрузки в периферийных зонах.</span><span class="sxs-lookup"><span data-stu-id="2829c-468">The vDC concept is based on a hub-spokes topology, providing common shared services in the hub and allowing specific applications/workloads in the spokes.</span></span> <span data-ttu-id="2829c-469">Виртуальный центр обработки данных соответствует структуре корпоративных ролей при совместной работе разных отделов (центрального ИТ-отдела, DevOps, операционного отдела и отдела обслуживания), для каждого из которых предусмотрен определенный список ролей и обязанностей.</span><span class="sxs-lookup"><span data-stu-id="2829c-469">A vDC matches the structure of company roles, where different departments (Central IT, DevOps, operation and maintenance) work together, each with a specific list of roles and duties.</span></span> <span data-ttu-id="2829c-470">Виртуальный центр обработки данных удовлетворяет требованиям перемещения по методике lift-and-shift и также предоставляет множество преимуществ для системных развертываний в облаке.</span><span class="sxs-lookup"><span data-stu-id="2829c-470">A vDC satisfies the requirements for a "Lift and Shift" migration, but also provides many advantages to native cloud deployments.</span></span>

## <a name="references"></a><span data-ttu-id="2829c-471">Ссылки</span><span class="sxs-lookup"><span data-stu-id="2829c-471">References</span></span>
<span data-ttu-id="2829c-472">В этом руководстве были рассмотрены приведенные ниже функции и компоненты.</span><span class="sxs-lookup"><span data-stu-id="2829c-472">The following features were discussed in this document.</span></span> <span data-ttu-id="2829c-473">Щелкните ссылки, чтобы получить дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="2829c-473">Click the links to learn more.</span></span>

| | | |
|-|-|-|
|<span data-ttu-id="2829c-474">Сетевые функции</span><span class="sxs-lookup"><span data-stu-id="2829c-474">Network Features</span></span>|<span data-ttu-id="2829c-475">Балансировка нагрузки</span><span class="sxs-lookup"><span data-stu-id="2829c-475">Load Balancing</span></span>|<span data-ttu-id="2829c-476">Соединение</span><span class="sxs-lookup"><span data-stu-id="2829c-476">Connectivity</span></span>|
|<span data-ttu-id="2829c-477">[Виртуальные сети Azure][VNet]</span><span class="sxs-lookup"><span data-stu-id="2829c-477">[Azure Virtual Networks][VNet]</span></span></br><span data-ttu-id="2829c-478">[Группы безопасности сети][NSG].</span><span class="sxs-lookup"><span data-stu-id="2829c-478">[Network Security Groups][NSG]</span></span></br><span data-ttu-id="2829c-479">[Журналы групп безопасности сети][NSGLog]</span><span class="sxs-lookup"><span data-stu-id="2829c-479">[NSG Logs][NSGLog]</span></span></br><span data-ttu-id="2829c-480">[Определяемая пользователем маршрутизация][UDR]</span><span class="sxs-lookup"><span data-stu-id="2829c-480">[User Defined Routing][UDR]</span></span></br><span data-ttu-id="2829c-481">[Сетевые виртуальные устройства][NVA]</span><span class="sxs-lookup"><span data-stu-id="2829c-481">[Network Virtual Appliances][NVA]</span></span></br><span data-ttu-id="2829c-482">[Общедоступные IP-адреса][PIP]</span><span class="sxs-lookup"><span data-stu-id="2829c-482">[Public IP Addresses][PIP]</span></span>|<span data-ttu-id="2829c-483">[Azure Load Balancer (L3) ][ALB]</span><span class="sxs-lookup"><span data-stu-id="2829c-483">[Azure Load Balancer (L3) ][ALB]</span></span></br><span data-ttu-id="2829c-484">[Шлюз приложений (L7) ][AppGW]</span><span class="sxs-lookup"><span data-stu-id="2829c-484">[Application Gateway (L7) ][AppGW]</span></span></br><span data-ttu-id="2829c-485">[Брандмауэр веб-приложения][WAF]</span><span class="sxs-lookup"><span data-stu-id="2829c-485">[Web Application Firewall][WAF]</span></span></br><span data-ttu-id="2829c-486">[Диспетчер трафика Azure][TM]</span><span class="sxs-lookup"><span data-stu-id="2829c-486">[Azure Traffic Manager][TM]</span></span> |<span data-ttu-id="2829c-487">[Пиринг виртуальных сетей][VNetPeering]</span><span class="sxs-lookup"><span data-stu-id="2829c-487">[VNet Peering][VNetPeering]</span></span></br><span data-ttu-id="2829c-488">[Виртуальная частная сеть][VPN]</span><span class="sxs-lookup"><span data-stu-id="2829c-488">[Virtual Private Network][VPN]</span></span></br><span data-ttu-id="2829c-489">[ExpressRoute][ExR]</span><span class="sxs-lookup"><span data-stu-id="2829c-489">[ExpressRoute][ExR]</span></span>
|<span data-ttu-id="2829c-490">Удостоверение</span><span class="sxs-lookup"><span data-stu-id="2829c-490">Identity</span></span></br>|<span data-ttu-id="2829c-491">Мониторинг</span><span class="sxs-lookup"><span data-stu-id="2829c-491">Monitoring</span></span></br>|<span data-ttu-id="2829c-492">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="2829c-492">Best Practices</span></span></br>|
|<span data-ttu-id="2829c-493">[Azure Active Directory][AAD]</span><span class="sxs-lookup"><span data-stu-id="2829c-493">[Azure Active Directory][AAD]</span></span></br><span data-ttu-id="2829c-494">[Многофакторная идентификация][MFA]</span><span class="sxs-lookup"><span data-stu-id="2829c-494">[Multi-Factor Authentication][MFA]</span></span></br><span data-ttu-id="2829c-495">[Элементы управления доступом на основе ролей][RBAC]</span><span class="sxs-lookup"><span data-stu-id="2829c-495">[Role Base Access Controls][RBAC]</span></span></br><span data-ttu-id="2829c-496">[Роли AAD по умолчанию][Roles]</span><span class="sxs-lookup"><span data-stu-id="2829c-496">[Default AAD Roles][Roles]</span></span> |<span data-ttu-id="2829c-497">[Журналы действий][ActLog]</span><span class="sxs-lookup"><span data-stu-id="2829c-497">[Activity Logs][ActLog]</span></span></br><span data-ttu-id="2829c-498">[Журналы диагностики][DiagLog]</span><span class="sxs-lookup"><span data-stu-id="2829c-498">[Diagnostic Logs][DiagLog]</span></span></br><span data-ttu-id="2829c-499">[Microsoft Operations Management Suite][OMS]</span><span class="sxs-lookup"><span data-stu-id="2829c-499">[Microsoft Operations Management Suite][OMS]</span></span></br> |<span data-ttu-id="2829c-500">[Сети периметра: рекомендации][DMZ]</span><span class="sxs-lookup"><span data-stu-id="2829c-500">[Perimeter Networks Best Practices][DMZ]</span></span></br><span data-ttu-id="2829c-501">[Управление подпиской][SubMgmt]</span><span class="sxs-lookup"><span data-stu-id="2829c-501">[Subscription Management][SubMgmt]</span></span></br><span data-ttu-id="2829c-502">[Управление группой ресурсов][RGMgmt]</span><span class="sxs-lookup"><span data-stu-id="2829c-502">[Resource Group Management][RGMgmt]</span></span></br><span data-ttu-id="2829c-503">[Ограничения подписки Azure][Limits]</span><span class="sxs-lookup"><span data-stu-id="2829c-503">[Azure Subscription Limits][Limits]</span></span> |
|<span data-ttu-id="2829c-504">Прочие службы Azure</span><span class="sxs-lookup"><span data-stu-id="2829c-504">Other Azure Services</span></span>|
|<span data-ttu-id="2829c-505">[Веб-приложения Azure][WebApps]</span><span class="sxs-lookup"><span data-stu-id="2829c-505">[Azure Web Apps][WebApps]</span></span></br><span data-ttu-id="2829c-506">[HDInsights (Hadoop) ][HDI]</span><span class="sxs-lookup"><span data-stu-id="2829c-506">[HDInsights (Hadoop) ][HDI]</span></span></br><span data-ttu-id="2829c-507">[Концентраторы событий][EventHubs]</span><span class="sxs-lookup"><span data-stu-id="2829c-507">[Event Hubs][EventHubs]</span></span></br><span data-ttu-id="2829c-508">[Служебная шина][ServiceBus]</span><span class="sxs-lookup"><span data-stu-id="2829c-508">[Service Bus][ServiceBus]</span></span>|



## <a name="next-steps"></a><span data-ttu-id="2829c-509">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2829c-509">Next Steps</span></span>
 - <span data-ttu-id="2829c-510">Ознакомьтесь с [пиринговой связью между виртуальными сетями][VNetPeering] — базовой технологией связи в звездообразной топологии виртуального центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="2829c-510">Explore [VNet Peering][VNetPeering], the underpinning technology for vDC hub and spoke designs</span></span>
 - <span data-ttu-id="2829c-511">Реализуйте [AAD][AAD], чтобы приступить к анализу [RBAC][RBAC].</span><span class="sxs-lookup"><span data-stu-id="2829c-511">Implement [AAD][AAD] to get started with [RBAC][RBAC] exploration</span></span>
 - <span data-ttu-id="2829c-512">Разработайте модель управления ресурсами и подпиской, а также модель RBAC для обеспечения необходимой структуры, требований и политик организации.</span><span class="sxs-lookup"><span data-stu-id="2829c-512">Develop a Subscription and Resource management model and RBAC model to meet the structure, requirements, and polices of your organization.</span></span> <span data-ttu-id="2829c-513">Планирование является самым важным действием:</span><span class="sxs-lookup"><span data-stu-id="2829c-513">The most important activity is planning.</span></span> <span data-ttu-id="2829c-514">для реорганизации, слияния, новых разработок и т. д.</span><span class="sxs-lookup"><span data-stu-id="2829c-514">As much as practical, plan for reorganizations, mergers, new product lines, etc.</span></span>

<!--Image References-->
<span data-ttu-id="2829c-515">[0]: ./media/networking-virtual-datacenter/redundant-equipment.png "Примеры перекрытия компонента" </span><span class="sxs-lookup"><span data-stu-id="2829c-515">[0]: ./media/networking-virtual-datacenter/redundant-equipment.png "Examples of component overlap" </span></span>
<span data-ttu-id="2829c-516">[1]: ./media/networking-virtual-datacenter/vdc-high-level.png "Подробный пример звездообразной топологии в виртуальном центре обработки данных"</span><span class="sxs-lookup"><span data-stu-id="2829c-516">[1]: ./media/networking-virtual-datacenter/vdc-high-level.png "High-level example of hub and spoke vDC"</span></span>
<span data-ttu-id="2829c-517">[2]: ./media/networking-virtual-datacenter/hub-spokes-cluster.png "Кластер концентраторов и периферийных зон"</span><span class="sxs-lookup"><span data-stu-id="2829c-517">[2]: ./media/networking-virtual-datacenter/hub-spokes-cluster.png "Cluster of hubs and spokes"</span></span>
<span data-ttu-id="2829c-518">[3]: ./media/networking-virtual-datacenter/spoke-to-spoke.png "Связь между периферийными зонами"</span><span class="sxs-lookup"><span data-stu-id="2829c-518">[3]: ./media/networking-virtual-datacenter/spoke-to-spoke.png "Spoke-to-spoke"</span></span>
<span data-ttu-id="2829c-519">[4]: ./media/networking-virtual-datacenter/vdc-block-level-diagram.png "Схема виртуального центра обработки данных на уровне блоков"</span><span class="sxs-lookup"><span data-stu-id="2829c-519">[4]: ./media/networking-virtual-datacenter/vdc-block-level-diagram.png "Block level diagram of the vDC"</span></span>
<span data-ttu-id="2829c-520">[5]: ./media/networking-virtual-datacenter/users-groups-subsciptions.png "Пользователи, группы, подписки и проекты"</span><span class="sxs-lookup"><span data-stu-id="2829c-520">[5]: ./media/networking-virtual-datacenter/users-groups-subsciptions.png "Users, groups, subscriptions, and projects"</span></span>
<span data-ttu-id="2829c-521">[6]: ./media/networking-virtual-datacenter/infrastructure-high-level.png "Высокоуровневая схема инфраструктуры"</span><span class="sxs-lookup"><span data-stu-id="2829c-521">[6]: ./media/networking-virtual-datacenter/infrastructure-high-level.png "High-level infrastructure diagram"</span></span>
<span data-ttu-id="2829c-522">[7]: ./media/networking-virtual-datacenter/highlevel-perimeter-networks.png "Высокоуровневая схема инфраструктуры"</span><span class="sxs-lookup"><span data-stu-id="2829c-522">[7]: ./media/networking-virtual-datacenter/highlevel-perimeter-networks.png "High-level infrastructure diagram"</span></span>
<span data-ttu-id="2829c-523">[8]: ./media/networking-virtual-datacenter/vnet-peering-perimeter-neworks.png "Пиринг виртуальных сетей и сети периметра"</span><span class="sxs-lookup"><span data-stu-id="2829c-523">[8]: ./media/networking-virtual-datacenter/vnet-peering-perimeter-neworks.png "VNet Peering and perimeter networks"</span></span>
<span data-ttu-id="2829c-524">[9]: ./media/networking-virtual-datacenter/high-level-diagram-monitoring.png "Схема высокого уровня для мониторинга"</span><span class="sxs-lookup"><span data-stu-id="2829c-524">[9]: ./media/networking-virtual-datacenter/high-level-diagram-monitoring.png "High-Level diagram for Monitoring"</span></span>
<span data-ttu-id="2829c-525">[10]: ./media/networking-virtual-datacenter/high-level-workloads.png "Схема высокого уровня для рабочих нагрузок"</span><span class="sxs-lookup"><span data-stu-id="2829c-525">[10]: ./media/networking-virtual-datacenter/high-level-workloads.png "High-level diagram for Workload"</span></span>

<!--Link References-->
[Limits]: https://docs.microsoft.com/azure/azure-subscription-service-limits
[Roles]: https://docs.microsoft.com/azure/active-directory/role-based-access-built-in-roles
[VNet]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-overview
[NSG]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-nsg 
[VNetPeering]: https://docs.microsoft.com/azure/virtual-network/virtual-network-peering-overview 
[UDR]: https://docs.microsoft.com/azure/virtual-network/virtual-networks-udr-overview 
[RBAC]: https://docs.microsoft.com/azure/active-directory/role-based-access-control-what-is
[MFA]: https://docs.microsoft.com/azure/multi-factor-authentication/multi-factor-authentication
[AAD]: https://docs.microsoft.com/azure/active-directory/active-directory-whatis
[VPN]: https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-about-vpngateways 
[ExR]: https://docs.microsoft.com/azure/expressroute/expressroute-introduction 
[NVA]: https://docs.microsoft.com/azure/architecture/reference-architectures/dmz/nva-ha
[SubMgmt]: https://docs.microsoft.com/azure/azure-resource-manager/resource-manager-subscription-governance 
[RGMgmt]: https://docs.microsoft.com/azure/azure-resource-manager/resource-group-overview
[DMZ]: https://docs.microsoft.com/azure/best-practices-network-security
[ALB]: https://docs.microsoft.com/azure/load-balancer/load-balancer-overview
[PIP]: https://docs.microsoft.com/azure/virtual-network/resource-groups-networking#public-ip-address
[AppGW]: https://docs.microsoft.com/azure/application-gateway/application-gateway-introduction
[WAF]: https://docs.microsoft.com/azure/application-gateway/application-gateway-web-application-firewall-overview
[ActLog]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-activity-logs 
[DiagLog]: https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-of-diagnostic-logs
[NSGLog]: https://docs.microsoft.com/azure/virtual-network/virtual-network-nsg-manage-log
[OMS]: https://docs.microsoft.com/azure/operations-management-suite/operations-management-suite-overview
[WebApps]: https://docs.microsoft.com/azure/app-service-web/
[HDI]: https://docs.microsoft.com/azure/hdinsight/hdinsight-hadoop-introduction
[EventHubs]: https://docs.microsoft.com/azure/event-hubs/event-hubs-what-is-event-hubs 
[ServiceBus]: https://docs.microsoft.com/azure/service-bus-messaging/service-bus-messaging-overview
[TM]: https://docs.microsoft.com/azure/traffic-manager/traffic-manager-overview
