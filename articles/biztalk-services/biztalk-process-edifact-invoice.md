---
title: "Руководство. Обработка счетов-фактур EDIFACT с помощью служб BizTalk Azure | Документация Майкрософт"
description: "Как toocreate и настроить приложение hello соединитель поле или API и использовать его в приложение логики в службе приложений Azure"
services: biztalk-services
documentationcenter: .net,nodejs,java
author: msftman
manager: erikre
editor: 
ms.assetid: 7e0b93fa-3e2b-4a9c-89ef-abf1d3aa8fa9
ms.service: biztalk-services
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 05/31/2016
ms.author: deonhe
ms.openlocfilehash: 4ca021c9084b9b6540c93ef15fc3d44be0966970
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="tutorial-process-edifact-invoices-using-azure-biztalk-services"></a><span data-ttu-id="28740-103">Руководство по обработке счетов EDIFACT с помощью служб BizTalk Azure</span><span class="sxs-lookup"><span data-stu-id="28740-103">Tutorial: Process EDIFACT invoices using Azure BizTalk Services</span></span>

> [!INCLUDE [BizTalk Services is being retired, and replaced with Azure Logic Apps](../../includes/biztalk-services-retirement.md)]

<span data-ttu-id="28740-104">Можно использовать tooconfigure hello портале служб BizTalk и развертывание соглашения X12 и EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="28740-104">You can use hello BizTalk Services Portal tooconfigure and deploy X12 and EDIFACT agreements.</span></span> <span data-ttu-id="28740-105">В этом учебнике рассматривается как toocreate соглашения EDIFACT для обмена накладных между торговыми партнерами.</span><span class="sxs-lookup"><span data-stu-id="28740-105">In this tutorial, we look at how toocreate an EDIFACT agreement for exchanging invoices between trading partners.</span></span> <span data-ttu-id="28740-106">В качестве примера здесь используется комплексное бизнес-решение с двумя торговыми партнерами, компаниями Contoso и Northwind, которые обмениваются сообщениями EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="28740-106">This tutorial is written around an end-to-end business solution involving two trading partners, Northwind and Contoso that exchange EDIFACT messages.</span></span>  

## <a name="sample-based-on-this-tutorial"></a><span data-ttu-id="28740-107">Пример, который используется в этом руководстве</span><span class="sxs-lookup"><span data-stu-id="28740-107">Sample based on this tutorial</span></span>
<span data-ttu-id="28740-108">Этот учебник написан на основе примера **Отправка EDIFACT счетов с помощью служб BizTalk**, являющееся доступных toodownload из hello [коллекции кода MSDN](http://go.microsoft.com/fwlink/?LinkId=401005).</span><span class="sxs-lookup"><span data-stu-id="28740-108">This tutorial is written around a sample, **Sending EDIFACT Invoices Using BizTalk Services**, which is available toodownload from hello [MSDN Code Gallery](http://go.microsoft.com/fwlink/?LinkId=401005).</span></span> <span data-ttu-id="28740-109">Можно использовать образец hello и пройти этот учебник toounderstand, как был построен образец hello.</span><span class="sxs-lookup"><span data-stu-id="28740-109">You could use hello sample and go through this tutorial toounderstand how hello sample was built.</span></span> <span data-ttu-id="28740-110">Или можно использовать этот учебник toocreate собственное решение основ.</span><span class="sxs-lookup"><span data-stu-id="28740-110">Or, you could use this tutorial toocreate your own solution ground-up.</span></span> <span data-ttu-id="28740-111">Этот учебник ориентирован hello второй подход, чтобы понять, как было построено данное решение.</span><span class="sxs-lookup"><span data-stu-id="28740-111">This tutorial is targeted towards hello second approach so that you understand how this solution was built.</span></span> <span data-ttu-id="28740-112">Кроме того насколько возможно, hello учебник согласован с образец hello и использует hello же имена артефактов (например, схем, преобразований и), которые заданы в образце hello.</span><span class="sxs-lookup"><span data-stu-id="28740-112">Also, as much as possible, hello tutorial is consistent with hello sample and uses hello same names for artifacts (for example, schemas, transforms) as used in hello sample.</span></span>  

> [!NOTE]
> <span data-ttu-id="28740-113">Поскольку это решение подразумевает отправку сообщения из моста EAI tooan мост EDI, он повторно использует hello [пример цепочки мостов служб BizTalk](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104) образца.</span><span class="sxs-lookup"><span data-stu-id="28740-113">Because this solution involves sending a message from an EAI bridge tooan EDI bridge, it reuses hello [BizTalk Services Bridge chaining sample](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104) sample.</span></span>  
> 
> 

## <a name="what-does-hello-solution-do"></a><span data-ttu-id="28740-114">Что делает hello решение?</span><span class="sxs-lookup"><span data-stu-id="28740-114">What does hello solution do?</span></span>
<span data-ttu-id="28740-115">В рамках этого решения компания Northwind получает счета EDIFACT от компании Contoso.</span><span class="sxs-lookup"><span data-stu-id="28740-115">In this solution, Northwind receives EDIFACT invoices from Contoso.</span></span> <span data-ttu-id="28740-116">Эти счета передаются не в стандартном формате EDI.</span><span class="sxs-lookup"><span data-stu-id="28740-116">These invoices are not in a standard EDI format.</span></span> <span data-ttu-id="28740-117">Таким образом перед отправкой счета tooNorthwind hello, он должен быть преобразованный tooan EDIFACT (также называемый INVOIC) документа.</span><span class="sxs-lookup"><span data-stu-id="28740-117">So, before sending hello invoice tooNorthwind, it must be transformed tooan EDIFACT invoice (also called INVOIC) document.</span></span> <span data-ttu-id="28740-118">По получении Northwind необходимо обработать счет EDIFACT hello и вернуть tooContoso сообщение (также называемое CONTRL) элемента управления.</span><span class="sxs-lookup"><span data-stu-id="28740-118">On receipt, Northwind must process hello EDIFACT invoice, and return a control message (also called CONTRL) tooContoso.</span></span>

![][1]  

<span data-ttu-id="28740-119">tooachieve этот бизнес-сценарий, Contoso использует функции hello, в состав служб BizTalk Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="28740-119">tooachieve this business scenario, Contoso uses hello features provided with Microsoft Azure BizTalk Services.</span></span>

* <span data-ttu-id="28740-120">Contoso использует EAI мосты tootransform hello исходного счета tooEDIFACT INVOIC.</span><span class="sxs-lookup"><span data-stu-id="28740-120">Contoso uses EAI bridges tootransform hello original invoice tooEDIFACT INVOIC.</span></span>
* <span data-ttu-id="28740-121">мост EAI Hello отправляет tooan сообщение hello развернут мост отправки EDI в рамках соглашения, настроенного в hello портале служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="28740-121">hello EAI bridge then sends hello message tooan EDI send bridge deployed as part of an agreement configured in hello BizTalk Services Portal.</span></span>
* <span data-ttu-id="28740-122">Hello мост отправки EDI обрабатывает EDIFACT INVOIC hello и направляет его tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="28740-122">hello EDI send bridge processes hello EDIFACT INVOIC and routes it tooNorthwind.</span></span>
* <span data-ttu-id="28740-123">После получения счета hello, Northwind возвращает CONTRL toohello сообщений, развернутый в рамках соглашения hello моста получения EDI.</span><span class="sxs-lookup"><span data-stu-id="28740-123">After receiving hello invoice, Northwind returns a CONTRL message toohello EDI receive bridge deployed as part of hello agreement.</span></span>  

> [!NOTE]
> <span data-ttu-id="28740-124">При необходимости это решение также демонстрирует, как пакетная обработка toosend hello toouse счетов в пакетах, вместо того чтобы отправлять каждой накладной отдельно.</span><span class="sxs-lookup"><span data-stu-id="28740-124">Optionally, this solution also demonstrates how toouse batching toosend hello invoices in batches, instead of sending each invoice separately.</span></span>  
> 
> 

<span data-ttu-id="28740-125">сценарий toocomplete hello, мы используем очереди Service Bus toosend счета из Contoso tooNorthwind или получать подтверждения от Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-125">toocomplete hello scenario, we use Service Bus queues toosend invoice from Contoso tooNorthwind or receive acknowledgement from Northwind.</span></span> <span data-ttu-id="28740-126">Эти очереди могут быть созданы с помощью клиентского приложения, который доступен для загрузки и входит в пакет образца hello, который доступен в рамках этого учебника.</span><span class="sxs-lookup"><span data-stu-id="28740-126">These queues can be created using a client application, which is available as a download and is included in hello sample package that is available as part of this tutorial.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="28740-127">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="28740-127">Prerequisites</span></span>
* <span data-ttu-id="28740-128">Вам понадобится пространство имен служебной шины.</span><span class="sxs-lookup"><span data-stu-id="28740-128">You must have a Service Bus namespace.</span></span> <span data-ttu-id="28740-129">Чтобы создать пространство имен, выполните действия, описанные в статье [Руководство по созданию или изменению пространства имен службы служебной шины](https://msdn.microsoft.com/library/azure/hh674478.aspx).</span><span class="sxs-lookup"><span data-stu-id="28740-129">For instructions on creating a namespace, see [How To: Create or Modify a Service Bus Service Namespace](https://msdn.microsoft.com/library/azure/hh674478.aspx).</span></span> <span data-ttu-id="28740-130">Предположим, вы уже подготовили пространство имен служебной шины с именем **edifactbts**.</span><span class="sxs-lookup"><span data-stu-id="28740-130">Let us assume that you already have a Service Bus namespace provisioned, called **edifactbts**.</span></span>
* <span data-ttu-id="28740-131">Необходимо подписаться на службы BizTalk.</span><span class="sxs-lookup"><span data-stu-id="28740-131">You must have a BizTalk Services subscription.</span></span> <span data-ttu-id="28740-132">Инструкции см. в статье [Создание служб BizTalk с помощью портала Azure](http://go.microsoft.com/fwlink/?LinkID=302280).</span><span class="sxs-lookup"><span data-stu-id="28740-132">For instructions, see [Create a BizTalk Service using Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=302280).</span></span> <span data-ttu-id="28740-133">В этом руководстве давайте предположим, что у вас есть подписка на службы BizTalk с именем **contosowabs**.</span><span class="sxs-lookup"><span data-stu-id="28740-133">For this tutorial, let us assume you have a BizTalk Services subscription, called **contosowabs**.</span></span>
* <span data-ttu-id="28740-134">Зарегистрируйте подписку служб BizTalk на портале служб BizTalk hello.</span><span class="sxs-lookup"><span data-stu-id="28740-134">Register your BizTalk Services subscription on hello BizTalk Services Portal.</span></span> <span data-ttu-id="28740-135">Инструкции см. в разделе [регистрация развертывания службы BizTalk на портале служб BizTalk hello](https://msdn.microsoft.com/library/hh689837.aspx)</span><span class="sxs-lookup"><span data-stu-id="28740-135">For instructions, see [Registering a BizTalk Service Deployment on hello BizTalk Services Portal](https://msdn.microsoft.com/library/hh689837.aspx)</span></span>
* <span data-ttu-id="28740-136">Необходимо установить Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="28740-136">You must have Visual Studio installed.</span></span>
* <span data-ttu-id="28740-137">Необходимо установить пакет SDK для служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="28740-137">You must have BizTalk Services SDK installed.</span></span> <span data-ttu-id="28740-138">Вы можете загрузить hello SDK из [http://go.microsoft.com/fwlink/?LinkId=235057](http://go.microsoft.com/fwlink/?LinkId=235057)</span><span class="sxs-lookup"><span data-stu-id="28740-138">You can download hello SDK from [http://go.microsoft.com/fwlink/?LinkId=235057](http://go.microsoft.com/fwlink/?LinkId=235057)</span></span>  

## <a name="step-1-create-hello-service-bus-queues"></a><span data-ttu-id="28740-139">Шаг 1: Создание hello очереди шины обслуживания</span><span class="sxs-lookup"><span data-stu-id="28740-139">Step 1: Create hello Service Bus queues</span></span>
<span data-ttu-id="28740-140">Это решение использует Service Bus очереди tooexchange сообщениями между торговыми партнерами.</span><span class="sxs-lookup"><span data-stu-id="28740-140">This solution uses Service Bus queues tooexchange messages between trading partners.</span></span> <span data-ttu-id="28740-141">Contoso и Northwind отправляют сообщения toohello очередей из которых мосты EAI и EDI hello смогут использовать их.</span><span class="sxs-lookup"><span data-stu-id="28740-141">Contoso and Northwind send messages toohello queues from where hello EAI and/or EDI bridges consume them.</span></span> <span data-ttu-id="28740-142">Для этого решения требуется три очереди служебной шины:</span><span class="sxs-lookup"><span data-stu-id="28740-142">For this solution, you need three Service Bus queues:</span></span>

* <span data-ttu-id="28740-143">**northwindreceive** — Northwind получает счет hello из Contoso по этой очереди.</span><span class="sxs-lookup"><span data-stu-id="28740-143">**northwindreceive** – Northwind receives hello invoice from Contoso over this queue.</span></span>
* <span data-ttu-id="28740-144">**contosoreceive** — Contoso получает подтверждение hello от Northwind по этой очереди.</span><span class="sxs-lookup"><span data-stu-id="28740-144">**contosoreceive** – Contoso receives hello acknowledgement from Northwind over this queue.</span></span>
* <span data-ttu-id="28740-145">**Приостановить** — все приостановленные сообщения, перенаправленные toothis очереди.</span><span class="sxs-lookup"><span data-stu-id="28740-145">**suspended** – All suspended messages are routed toothis queue.</span></span> <span data-ttu-id="28740-146">Сообщения приостанавливаются, если во время их обработки происходит ошибка.</span><span class="sxs-lookup"><span data-stu-id="28740-146">Messages are suspended if they fail during processing.</span></span>

<span data-ttu-id="28740-147">В этих очередях шины обслуживания можно создать с помощью клиентского приложения, включенные в пакет образца hello.</span><span class="sxs-lookup"><span data-stu-id="28740-147">You can create these Service Bus queues by using a client application included in hello sample package.</span></span>  

1. <span data-ttu-id="28740-148">Hello расположение, куда вы загрузили пример hello, откройте **учебника отправка счетов с помощью BizTalk Services EDI Bridges.sln**.</span><span class="sxs-lookup"><span data-stu-id="28740-148">From hello location where you downloaded hello sample, open **Tutorial Sending Invoices Using BizTalk Services EDI Bridges.sln**.</span></span>
2. <span data-ttu-id="28740-149">Нажмите клавишу **F5** toobuild и начала hello **Tutorial Client** приложения.</span><span class="sxs-lookup"><span data-stu-id="28740-149">Press **F5** toobuild and start hello **Tutorial Client** application.</span></span>
3. <span data-ttu-id="28740-150">На экране «hello» введите пространство имен ACS шины службы hello, имя издателя и ключ издателя.</span><span class="sxs-lookup"><span data-stu-id="28740-150">In hello screen, enter hello Service Bus ACS namespace, issuer name, and issuer key.</span></span>
   
   ![][2]  
4. <span data-ttu-id="28740-151">Появится сообщение с предложением создать в пространстве имен служебной шины три очереди.</span><span class="sxs-lookup"><span data-stu-id="28740-151">A message box prompts that three queues will be created in your Service Bus namespace.</span></span> <span data-ttu-id="28740-152">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="28740-152">Click **OK**.</span></span>
5. <span data-ttu-id="28740-153">Оставьте Tutorial Client запущена hello.</span><span class="sxs-lookup"><span data-stu-id="28740-153">Leave hello Tutorial Client running.</span></span> <span data-ttu-id="28740-154">Откройте hello, щелкните **Service Bus** > ***пространство имен Service Bus*** > **очереди**и убедитесь, что hello три очереди создаются.</span><span class="sxs-lookup"><span data-stu-id="28740-154">Open hello , click **Service Bus** > ***your Service Bus namespace*** > **Queues**, and verify that hello three queues are created.</span></span>  

## <a name="step-2-create-and-deploy-trading-partner-agreement"></a><span data-ttu-id="28740-155">Шаг 2. Создание и развертывание соглашения между торговыми партнерами</span><span class="sxs-lookup"><span data-stu-id="28740-155">Step 2: Create and deploy trading partner agreement</span></span>
<span data-ttu-id="28740-156">Создайте соглашение между торговыми партнерами Contoso и Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-156">Create a trading partner agreement between Contoso and Northwind.</span></span> <span data-ttu-id="28740-157">Соглашение между торговыми партнерами определяет контракт trade между hello двух деловых партнеров, например какие toouse схемы сообщений, который обмена сообщениями toouse протокола и т. д. Соглашение между торговыми партнерами включает два мосты EDI, один toosend сообщений tootrading партнеров (называется hello **мост отправки EDI**) и один tooreceive сообщений от торговых партнеров (вызывается hello **моста получения EDI**).</span><span class="sxs-lookup"><span data-stu-id="28740-157">A trading partner agreement defines a trade contract between hello two business partners, such as which message schema toouse, which messaging protocol toouse, etc. A trading partner agreement includes two EDI bridges, one toosend messages tootrading partners (called hello **EDI Send bridge**) and one tooreceive messages from trading partners (called hello **EDI Receive bridge**).</span></span>

<span data-ttu-id="28740-158">В контексте hello данного решения мост отправки EDI hello соответствует toohello отправляющей стороне соглашения hello и не используется toosend счета EDIFACT hello из Contoso tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="28740-158">In hello context of this solution, hello EDI send bridge corresponds toohello send-side of hello agreement and is used toosend hello EDIFACT invoice from Contoso tooNorthwind.</span></span> <span data-ttu-id="28740-159">Аналогично, мост получения hello EDI соответствует toohello на стороне приема соглашения hello и не используется tooreceive подтверждения от Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-159">Similarly, hello EDI receive bridge corresponds toohello receive-side of hello agreement and is used tooreceive acknowledgements from Northwind.</span></span>  

### <a name="create-hello-trading-partners"></a><span data-ttu-id="28740-160">Создание торговых партнеров hello</span><span class="sxs-lookup"><span data-stu-id="28740-160">Create hello trading partners</span></span>
<span data-ttu-id="28740-161">toostart, создать Торговые партнеры Contoso и Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-161">toostart with, create trading partners for Contoso and Northwind.</span></span>  

1. <span data-ttu-id="28740-162">В hello портала служб BizTalk на hello **партнеров** щелкните **добавить**.</span><span class="sxs-lookup"><span data-stu-id="28740-162">In hello BizTalk Services Portal, on hello **Partners** tab, click **Add**.</span></span>
2. <span data-ttu-id="28740-163">В новую страницу приветствия партнера, введите **Contoso** как имя участника, а затем щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="28740-163">In hello New partner page, enter **Contoso** as a partner name, and then click **Save**.</span></span>
3. <span data-ttu-id="28740-164">Повторите hello шаг toocreate hello вторым партнером **Northwind**.</span><span class="sxs-lookup"><span data-stu-id="28740-164">Repeat hello step toocreate hello second partner, **Northwind**.</span></span>  

### <a name="create-hello-agreement"></a><span data-ttu-id="28740-165">Создание соглашения hello</span><span class="sxs-lookup"><span data-stu-id="28740-165">Create hello agreement</span></span>
<span data-ttu-id="28740-166">Соглашения между торговыми партнерами — это соглашения между бизнес-профилями торговых партнеров.</span><span class="sxs-lookup"><span data-stu-id="28740-166">Trading partner agreements are created between business profiles of trading partners.</span></span> <span data-ttu-id="28740-167">Это решение использует профили участника по умолчанию hello, создаваемых автоматически, когда мы создавали hello партнеров.</span><span class="sxs-lookup"><span data-stu-id="28740-167">This solution uses hello default partner profiles that are automatically created when we created hello partners.</span></span>  

1. <span data-ttu-id="28740-168">В hello портале служб BizTalk, щелкните **соглашения** > **добавить**.</span><span class="sxs-lookup"><span data-stu-id="28740-168">In hello BizTalk Services Portal, click **Agreements** > **Add**.</span></span>
2. <span data-ttu-id="28740-169">В новое соглашение hello **Общие параметры** , укажите значения hello, как показано в приведенном ниже рисунке hello и выберите **Продолжить**.</span><span class="sxs-lookup"><span data-stu-id="28740-169">In hello new agreement’s **General Settings** page, specify hello values as shown in hello image below, and then click **Continue**.</span></span>
   
   ![][3]  
   
   <span data-ttu-id="28740-170">После нажатия кнопки **Продолжить** станут доступными две вкладки: **Настройки получения** и **Настройки отправки**.</span><span class="sxs-lookup"><span data-stu-id="28740-170">After you click **Continue**, two tabs, **Receive Settings** and **Send Settings** become available.</span></span>
3. <span data-ttu-id="28740-171">Создайте hello соглашение отправки между Contoso и Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-171">Create hello send agreement between Contoso and Northwind.</span></span> <span data-ttu-id="28740-172">Данное соглашение регламентирует, каким образом Contoso отправляет счет tooNorthwind hello EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="28740-172">This agreement governs how Contoso sends hello EDIFACT invoice tooNorthwind.</span></span>
   
   1. <span data-ttu-id="28740-173">Щелкните **Параметры отправки**.</span><span class="sxs-lookup"><span data-stu-id="28740-173">Click **Send Settings**.</span></span>
   2. <span data-ttu-id="28740-174">Сохранить значения по умолчанию hello на hello **входящий URL-адрес**, **преобразования**, и **Пакетная обработка** вкладок.</span><span class="sxs-lookup"><span data-stu-id="28740-174">Retain hello default values on hello **Inbound URL**, **Transform**, and **Batching** tabs.</span></span>
   3. <span data-ttu-id="28740-175">На hello **протокола** в группе hello **схемы** Загрузите hello **EFACT_D93A_INVOIC.xsd** схемы.</span><span class="sxs-lookup"><span data-stu-id="28740-175">On hello **Protocol** tab, under hello **Schemas** section, upload hello **EFACT_D93A_INVOIC.xsd** schema.</span></span> <span data-ttu-id="28740-176">Эта схема доступен в пакете образца hello.</span><span class="sxs-lookup"><span data-stu-id="28740-176">This schema is available with hello sample package.</span></span>
      
      ![][4]  
   4. <span data-ttu-id="28740-177">На hello **транспорта** укажите hello подробные сведения об очередях Service Bus hello.</span><span class="sxs-lookup"><span data-stu-id="28740-177">On hello **Transport** tab, specify hello details for hello Service Bus queues.</span></span> <span data-ttu-id="28740-178">В соглашение на стороне отправителя hello, мы будем использовать hello **northwindreceive** очередь tooNorthwind счета EDIFACT hello toosend и hello **приостановки** очереди все сообщения, для которых не выполняется во время обработки и являются tooroute Приостановить.</span><span class="sxs-lookup"><span data-stu-id="28740-178">For hello send-side agreement, we use hello **northwindreceive** queue toosend hello EDIFACT invoice tooNorthwind, and hello **suspended** queue tooroute any messages that fail during processing and are suspended.</span></span> <span data-ttu-id="28740-179">Вы создали эти очереди в **шаг 1: Создание очереди Service Bus hello** (в этом разделе).</span><span class="sxs-lookup"><span data-stu-id="28740-179">You created these queues in **Step 1: Create hello Service Bus queues** (in this topic).</span></span>
      
      ![][5]  
      
      <span data-ttu-id="28740-180">В разделе **параметры транспорта > тип транспорта** и **параметры приостановки сообщений > тип транспорта**выберите Azure Service Bus и задать значения hello, показанную hello.</span><span class="sxs-lookup"><span data-stu-id="28740-180">Under **Transport Settings > Transport type** and **Message Suspension Settings > Transport type**, select Azure Service Bus and provide hello values as shown in hello image.</span></span>
4. <span data-ttu-id="28740-181">Создать hello получать соглашение между Contoso и Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-181">Create hello receive agreement between Contoso and Northwind.</span></span> <span data-ttu-id="28740-182">Это соглашение регулирует, как Contoso получает подтверждение hello из Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-182">This agreement governs how Contoso receives hello acknowledgement from Northwind.</span></span>
   
   1. <span data-ttu-id="28740-183">Щелкните **Параметры получения**.</span><span class="sxs-lookup"><span data-stu-id="28740-183">Click **Receive Settings**.</span></span>
   2. <span data-ttu-id="28740-184">Сохранить значения по умолчанию hello на hello **транспорта** и **преобразования** вкладок.</span><span class="sxs-lookup"><span data-stu-id="28740-184">Retain hello default values on hello **Transport** and **Transform** tabs.</span></span>
   3. <span data-ttu-id="28740-185">На hello **протокола** в группе hello **схемы** Загрузите hello **EFACT_4.1_CONTRL.xsd** схемы.</span><span class="sxs-lookup"><span data-stu-id="28740-185">On hello **Protocol** tab, under hello **Schemas** section, upload hello **EFACT_4.1_CONTRL.xsd** schema.</span></span> <span data-ttu-id="28740-186">Эта схема доступен в пакете образца hello.</span><span class="sxs-lookup"><span data-stu-id="28740-186">This schema is available with hello sample package.</span></span>
   4. <span data-ttu-id="28740-187">На hello **маршрута** создайте tooensure фильтр, только подтверждения от Northwind перенаправленное tooContoso.</span><span class="sxs-lookup"><span data-stu-id="28740-187">On hello **Route** tab, create a filter tooensure that only acknowledgements from Northwind are routed tooContoso.</span></span> <span data-ttu-id="28740-188">В разделе **параметры маршрутизации**, нажмите кнопку **добавить** toocreate hello фильтра маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="28740-188">Under **Route Settings**, click **Add** toocreate hello routing filter.</span></span>
      
      ![][6]  
      
      1. <span data-ttu-id="28740-189">Укажите значения для **имя правила**, **правило маршрутизации**, и **назначение маршрутизации** как показано на рисунке hello.</span><span class="sxs-lookup"><span data-stu-id="28740-189">Provide values for **Rule Name**, **Route rule**, and **Route destination** as shown in hello image.</span></span>
      2. <span data-ttu-id="28740-190">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="28740-190">Click **Save**.</span></span>
   5. <span data-ttu-id="28740-191">На hello **маршрута** укажите, куда направляются приостановленные подтверждения (которых возник сбой во время обработки).</span><span class="sxs-lookup"><span data-stu-id="28740-191">On hello **Route** tab again, specify where suspended acknowledgements (acknowledgements that fail during processing) are routed to.</span></span> <span data-ttu-id="28740-192">Задать tooAzure тип транспорта hello Service Bus, назначение маршрутизации слишком**очереди**, тип проверки подлинности слишком**подписи общего доступа** (SAS), укажите строку подключения SAS hello hello Service Bus пространство имен, а затем введите имя очереди hello **приостановки**.</span><span class="sxs-lookup"><span data-stu-id="28740-192">Set hello transport type tooAzure Service Bus, route destination type too**Queue**, authentication type too**Shared Access Signature** (SAS), provide hello SAS connection string for hello Service Bus namespace, and then enter hello queue name as **suspended**.</span></span>
5. <span data-ttu-id="28740-193">Наконец, нажмите кнопку **развернуть** toodeploy hello соглашения.</span><span class="sxs-lookup"><span data-stu-id="28740-193">Finally, click **Deploy** toodeploy hello agreement.</span></span> <span data-ttu-id="28740-194">Конечные точки hello Примечание где hello отправки и получения соглашений развертывается.</span><span class="sxs-lookup"><span data-stu-id="28740-194">Note hello endpoints where hello send and receive agreements get deployed.</span></span>
   
   * <span data-ttu-id="28740-195">На hello **параметры отправки** в разделе **входящий URL-адрес**, обратите внимание hello конечную точку.</span><span class="sxs-lookup"><span data-stu-id="28740-195">On hello **Send Settings** tab, under **Inbound URL**, note hello endpoint.</span></span> <span data-ttu-id="28740-196">toosend сообщение от tooNorthwind Contoso с помощью hello мост отправки EDI, необходимо отправить toothis конечную точку сообщения.</span><span class="sxs-lookup"><span data-stu-id="28740-196">toosend a message from Contoso tooNorthwind using hello EDI send bridge, you must send a message toothis endpoint.</span></span>
   * <span data-ttu-id="28740-197">На hello **параметры получения** в разделе **транспорта**, обратите внимание hello конечную точку.</span><span class="sxs-lookup"><span data-stu-id="28740-197">On hello **Receive Settings** tab, under **Transport**, note hello endpoint.</span></span> <span data-ttu-id="28740-198">toosend сообщение от Northwind tooContoso hello EDI с помощью моста получения, вы должны отправить toothis конечную точку сообщения.</span><span class="sxs-lookup"><span data-stu-id="28740-198">toosend a message from Northwind tooContoso using hello EDI receive bridge, you must send a message toothis endpoint.</span></span>  

## <a name="step-3-create-and-deploy-hello-biztalk-services-project"></a><span data-ttu-id="28740-199">Шаг 3: Создание и развертывание проекта служб BizTalk hello</span><span class="sxs-lookup"><span data-stu-id="28740-199">Step 3: Create and deploy hello BizTalk Services project</span></span>
<span data-ttu-id="28740-200">В предыдущем шаге hello вы уже развернули hello EDI, отправки и получения счетов EDIFACT tooprocess соглашений и подтверждений.</span><span class="sxs-lookup"><span data-stu-id="28740-200">In hello previous step, you deployed hello EDI send and receive agreements tooprocess EDIFACT invoices and acknowledgements.</span></span> <span data-ttu-id="28740-201">Эти соглашения могут обрабатывать только сообщения, соответствующие стандарту схемы сообщений EDIFACT toohello.</span><span class="sxs-lookup"><span data-stu-id="28740-201">These agreements can only process messages that conform toohello standard EDIFACT message schema.</span></span> <span data-ttu-id="28740-202">Однако по сценариям hello для этого решения, Contoso отправляет счет tooNorthwind в собственной схеме.</span><span class="sxs-lookup"><span data-stu-id="28740-202">However, per hello scenario for this solution, Contoso sends an invoice tooNorthwind in an in-house proprietary schema.</span></span> <span data-ttu-id="28740-203">Таким образом перед отправкой сообщения hello toohello мост отправки EDI, его необходимо преобразовать из hello собственная схема toohello стандартную схему счетов EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="28740-203">So, before hello message is sent toohello EDI send bridge, it must be transformed from hello in-house schema toohello standard EDIFACT invoice schema.</span></span> <span data-ttu-id="28740-204">Hello EAI служб BizTalk проект делает это.</span><span class="sxs-lookup"><span data-stu-id="28740-204">hello BizTalk Services EAI project does that.</span></span>

<span data-ttu-id="28740-205">проект служб BizTalk Hello, **InvoiceProcessingBridge**, hello, преобразований сообщений также включается как часть образца hello, загруженный.</span><span class="sxs-lookup"><span data-stu-id="28740-205">hello BizTalk Services project, **InvoiceProcessingBridge**, that transforms hello message is also included as part of hello sample you downloaded.</span></span> <span data-ttu-id="28740-206">Hello проект включает следующие артефакты hello.</span><span class="sxs-lookup"><span data-stu-id="28740-206">hello project includes hello following artifacts:</span></span>

* <span data-ttu-id="28740-207">**INHOUSEINVOICE. XSD** — схема счета hello, отправляется tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="28740-207">**INHOUSEINVOICE.XSD** – Schema of hello in-house invoice that is sent tooNorthwind.</span></span>
* <span data-ttu-id="28740-208">**EFACT_D93A_INVOIC. XSD** — схема счета EDIFACT Стандартная hello.</span><span class="sxs-lookup"><span data-stu-id="28740-208">**EFACT_D93A_INVOIC.XSD** – Schema of hello standard EDIFACT invoice.</span></span>
* <span data-ttu-id="28740-209">**EFACT_4.1_CONTRL. XSD** — схема подтверждения EDIFACT hello, Northwind отправляет tooContoso.</span><span class="sxs-lookup"><span data-stu-id="28740-209">**EFACT_4.1_CONTRL.XSD** – Schema of hello EDIFACT acknowledgement that Northwind sends tooContoso.</span></span>
* <span data-ttu-id="28740-210">**INHOUSEINVOICE_to_D93AINVOIC. TRFM** — hello преобразование, которое отображает hello корпоративного счета схемы toohello стандартную схему счетов EDIFACT.</span><span class="sxs-lookup"><span data-stu-id="28740-210">**INHOUSEINVOICE_to_D93AINVOIC.TRFM** – hello transform that maps hello in-house invoice schema toohello standard EDIFACT invoice schema.</span></span>  

### <a name="create-hello-biztalk-services-project"></a><span data-ttu-id="28740-211">Создание проекта служб BizTalk hello</span><span class="sxs-lookup"><span data-stu-id="28740-211">Create hello BizTalk Services project</span></span>
1. <span data-ttu-id="28740-212">В hello решения Visual Studio, разверните проект InvoiceProcessingBridge hello, а затем откройте hello **MessageFlowItinerary.bcs** файла.</span><span class="sxs-lookup"><span data-stu-id="28740-212">In hello Visual Studio solution, expand hello InvoiceProcessingBridge project, and then open hello **MessageFlowItinerary.bcs** file.</span></span>
2. <span data-ttu-id="28740-213">Щелкните в любом месте холста hello и задайте hello **URL-адрес службы BizTalk** в hello toospecify поле свойства имя своей подписки служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="28740-213">Click anywhere on hello canvas and set hello **BizTalk Service URL** in hello property box toospecify your BizTalk Services subscription name.</span></span> <span data-ttu-id="28740-214">Например, `https://contosowabs.biztalk.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="28740-214">For example, `https://contosowabs.biztalk.windows.net`.</span></span>
   
   ![][7]  
3. <span data-ttu-id="28740-215">Перетащите из элементов hello **односторонний мост Xml** toohello холста.</span><span class="sxs-lookup"><span data-stu-id="28740-215">From hello toolbox, drag an **Xml One-Way Bridge** toohello canvas.</span></span> <span data-ttu-id="28740-216">Набор hello **имя сущности** и **относительный адрес** свойства hello мост слишком**ProcessInvoiceBridge**.</span><span class="sxs-lookup"><span data-stu-id="28740-216">Set hello **Entity Name** and **Relative Address** properties of hello bridge too**ProcessInvoiceBridge**.</span></span> <span data-ttu-id="28740-217">Дважды щелкните **ProcessInvoiceBridge** tooopen hello конструктора моста.</span><span class="sxs-lookup"><span data-stu-id="28740-217">Double-click **ProcessInvoiceBridge** tooopen hello bridge configuration surface.</span></span>
4. <span data-ttu-id="28740-218">В пределах hello **типы сообщений** щелкните плюс hello (**+**) кнопку toospecify hello схему входящего сообщения hello.</span><span class="sxs-lookup"><span data-stu-id="28740-218">Within hello **Message Types** box, click hello plus (**+**) button toospecify hello schema of hello incoming message.</span></span> <span data-ttu-id="28740-219">Поскольку входящее сообщение hello для hello мост EAI всегда hello корпоративного счета, установите это слишком**INHOUSEINVOICE**.</span><span class="sxs-lookup"><span data-stu-id="28740-219">Because hello incoming message for hello EAI bridge is always hello in-house invoice, set this too**INHOUSEINVOICE**.</span></span>
   
   ![][8]  
5. <span data-ttu-id="28740-220">Щелкните hello **преобразование Xml** фигуры и в поле свойства hello, hello **Maps** свойства, нажмите кнопку с многоточием hello (**...** ) кнопки.</span><span class="sxs-lookup"><span data-stu-id="28740-220">Click hello **Xml Transform** shape, and in hello property box, for hello **Maps** property, click hello ellipsis (**...**) button.</span></span> <span data-ttu-id="28740-221">В hello **Выбор сопоставлений** диалоговое окно, выберите hello **INHOUSEINVOICE_to_D93AINVOIC** преобразования файла и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="28740-221">In hello **Maps Selection** dialog box, select hello **INHOUSEINVOICE_to_D93AINVOIC** transform file, and then click **OK**.</span></span>
   
   ![][9]  
6. <span data-ttu-id="28740-222">Возврат слишком**MessageFlowItinerary.bcs**и перетащите из элементов hello **конечная точка двусторонней внешней службы** toohello справа от приветствия **ProcessInvoiceBridge**.</span><span class="sxs-lookup"><span data-stu-id="28740-222">Go back too**MessageFlowItinerary.bcs**, and from hello toolbox, drag a **Two-Way External Service Endpoint** toohello right of hello **ProcessInvoiceBridge**.</span></span> <span data-ttu-id="28740-223">Задайте его **имя сущности** свойство слишком**EDIBridge**.</span><span class="sxs-lookup"><span data-stu-id="28740-223">Set its **Entity Name** property too**EDIBridge**.</span></span>
7. <span data-ttu-id="28740-224">В hello в обозревателе решений, разверните hello **MessageFlowItinerary.bcs** и дважды щелкните hello **EDIBridge.config** файла.</span><span class="sxs-lookup"><span data-stu-id="28740-224">In hello Solution Explorer, expand hello **MessageFlowItinerary.bcs** and double-click hello **EDIBridge.config** file.</span></span> <span data-ttu-id="28740-225">Замените содержимое hello hello **EDIBridge.config** hello следующее.</span><span class="sxs-lookup"><span data-stu-id="28740-225">Replace hello content of hello **EDIBridge.config** with hello following.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="28740-226">Почему необходимо tooedit hello config-файл? Hello внешней конечной точки службы, добавленный toohello холст представляет hello мосты EDI, развернутые ранее.</span><span class="sxs-lookup"><span data-stu-id="28740-226">Why do I need tooedit hello .config file? hello external service endpoint that we added toohello bridge designer canvas represents hello EDI bridges that we deployed earlier.</span></span> <span data-ttu-id="28740-227">Мосты EDI являются двусторонними, то есть обеспечивают отправку и получение.</span><span class="sxs-lookup"><span data-stu-id="28740-227">EDI bridges are two-way bridges, with a send and receive side.</span></span> <span data-ttu-id="28740-228">Однако hello мост EAI, добавленный конструктора моста toohello является однонаправленным.</span><span class="sxs-lookup"><span data-stu-id="28740-228">However, hello EAI bridge that we added toohello bridge designer is a one-way bridge.</span></span> <span data-ttu-id="28740-229">Поэтому toohandle hello различных шаблонов обмена сообщениями hello двух мостов, мы используем настраиваемый мост, включая настройки в файле .config hello.</span><span class="sxs-lookup"><span data-stu-id="28740-229">So, toohandle hello different message exchange patterns of hello two bridges, we use a custom bridge behavior by including its configuration in hello .config file.</span></span> <span data-ttu-id="28740-230">Кроме того hello пользовательское поведение также отвечает конечной точке моста отправки EDI в toohello проверки подлинности hello. Это поведение доступно как отдельный пример на [пример - EAI tooEDI цепочки мостов служб BizTalk](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104).</span><span class="sxs-lookup"><span data-stu-id="28740-230">Additionally, hello custom behavior also handles hello authentication toohello EDI send bridge endpoint.This custom behavior is available as a separate sample at [BizTalk Services Bridge chaining sample - EAI tooEDI](http://code.msdn.microsoft.com/BizTalk-Bridge-chaining-2246b104).</span></span> <span data-ttu-id="28740-231">Это решение использует образец hello.</span><span class="sxs-lookup"><span data-stu-id="28740-231">This solution reuses hello sample.</span></span>  
   > 
   > 
   
   ```
   <?xml version="1.0" encoding="utf-8"?>
   <configuration>
     <system.serviceModel>
       <extensions>
         <behaviorExtensions>
           <add name="BridgeAuthentication" 
                 type="Microsoft.BizTalk.Bridge.Behaviour.BridgeBehaviorElement, Microsoft.BizTalk.Bridge.Behaviour, Version=1.0.0.0, Culture=neutral, PublicKeyToken=ae58f69b69495c05" />
         </behaviorExtensions>
       </extensions>
       <behaviors>
         <endpointBehaviors>
           <behavior name="BridgeAuthenticationConfiguration">
             <!-- Enter hello ACS namespace, issuer name and issuer secret of hello BizTalk Services deployment -->
             <BridgeAuthentication acsnamespace="[YOUR ACS NAMESPACE]" 
                                   issuername="owner" 
                                   issuersecret="[YOUR ACS SECRET]" />
             <webHttp />
           </behavior>
         </endpointBehaviors>
       </behaviors>
       <bindings>
         <webHttpBinding>
           <binding name="BridgeBindingConfiguration">
             <security mode="Transport" />
           </binding>
         </webHttpBinding>
       </bindings>
       <client>
         <clear />
         <!--
           Go BizTalk Portal > Agreement > Send Settings > Inbound URL
           Copy hello Endpoint URL and paste it in hello below address field
         -->
         <endpoint name="TwoWayExternalServiceEndpointReference1" 
                   address="[YOUR EDI BRIDGE SEND URI]" 
                   behaviorConfiguration="BridgeAuthenticationConfiguration" 
                   binding="webHttpBinding" 
                   bindingConfiguration="BridgeBindingConfiguration" 
                   contract="System.ServiceModel.Routing.IRequestReplyRouter" />
       </client>
     </system.serviceModel>
   </configuration>
   
   ```
8. <span data-ttu-id="28740-232">Обновление сведений о конфигурации tooinclude файла EDIBridge.config hello</span><span class="sxs-lookup"><span data-stu-id="28740-232">Update hello EDIBridge.config file tooinclude configuration details</span></span>
   
   * <span data-ttu-id="28740-233">В разделе  *<behaviors>* укажите приветствия имен ACS и ключ, связанный с hello подписки служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="28740-233">Under *<behaviors>*, provide hello ACS namespace and key associated with hello BizTalk Services subscription.</span></span>
   * <span data-ttu-id="28740-234">В разделе  *<client>* , предоставляют hello конечной точки, где развернуто соглашение отправки EDI hello.</span><span class="sxs-lookup"><span data-stu-id="28740-234">Under *<client>*, provide hello endpoint where hello EDI send agreement is deployed.</span></span>
   
   <span data-ttu-id="28740-235">Сохраните изменения и закройте файл конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="28740-235">Save changes and close hello configuration file.</span></span>
9. <span data-ttu-id="28740-236">Hello элементов щелкните hello **соединитель** и соединения hello **ProcessInvoiceBridge** и **EDIBridge** компонентов.</span><span class="sxs-lookup"><span data-stu-id="28740-236">From hello Toolbox, click hello **Connector** and join hello **ProcessInvoiceBridge** and **EDIBridge** components.</span></span> <span data-ttu-id="28740-237">Выберите соединитель hello и в окно «Свойства» задайте **условие фильтра** слишком**сопоставить все**.</span><span class="sxs-lookup"><span data-stu-id="28740-237">Select hello connector, and in Properties box, set **Filter Condition** too**Match All**.</span></span> <span data-ttu-id="28740-238">Это гарантирует, что все сообщения, обрабатываемые hello мост EAI, направляются toohello мост EDI.</span><span class="sxs-lookup"><span data-stu-id="28740-238">This ensures that all messages processed by hello EAI bridge are routed toohello EDI bridge.</span></span>
   
   ![][10]  
10. <span data-ttu-id="28740-239">Сохраните изменения toohello решения.</span><span class="sxs-lookup"><span data-stu-id="28740-239">Save changes toohello solution.</span></span>  

### <a name="deploy-hello-project"></a><span data-ttu-id="28740-240">Развертывание проекта hello</span><span class="sxs-lookup"><span data-stu-id="28740-240">Deploy hello project</span></span>
1. <span data-ttu-id="28740-241">На компьютере hello, где создан проект служб BizTalk hello Загрузите и установите hello SSL-сертификат для подписки на службы BizTalk.</span><span class="sxs-lookup"><span data-stu-id="28740-241">On hello computer where you created hello BizTalk Services project, download and install hello SSL certificate for your BizTalk Services subscription.</span></span> <span data-ttu-id="28740-242">В разделе служб BizTalk щелкните **Панель мониторинга**, а затем нажмите кнопку **Загрузить SSL-сертификат**.</span><span class="sxs-lookup"><span data-stu-id="28740-242">From , under BizTalk Services, click **Dashboard**, and then click **Download SSL Certificate**.</span></span> <span data-ttu-id="28740-243">Дважды щелкните сертификат hello и выполните установку hello prompt toocomplete hello.</span><span class="sxs-lookup"><span data-stu-id="28740-243">Double-click hello certificate and follow hello prompt toocomplete hello installation.</span></span> <span data-ttu-id="28740-244">Убедитесь, что установки сертификата hello под **доверенные корневые центры сертификации** хранилище сертификатов.</span><span class="sxs-lookup"><span data-stu-id="28740-244">Make sure you install hello certificate under **Trusted Root Certification Authorities** certificate store.</span></span>
2. <span data-ttu-id="28740-245">В обозревателе решений Visual Studio, щелкните правой кнопкой мыши hello **InvoiceProcessingBridge** проекта, а затем нажмите кнопку **развернуть**.</span><span class="sxs-lookup"><span data-stu-id="28740-245">In Visual Studio Solution Explorer, right-click hello **InvoiceProcessingBridge** project, and then click **Deploy**.</span></span>
3. <span data-ttu-id="28740-246">Укажите значения hello, как показано на рисунке hello и нажмите кнопку **развернуть**.</span><span class="sxs-lookup"><span data-stu-id="28740-246">Provide hello values as shown in hello image, and then click **Deploy**.</span></span> <span data-ttu-id="28740-247">Можно получить учетные данные hello ACS для служб BizTalk, щелкнув **сведения о соединении** из панели мониторинга службы BizTalk hello.</span><span class="sxs-lookup"><span data-stu-id="28740-247">You can get hello ACS credentials for BizTalk Services by clicking **Connection Information** from hello BizTalk Services dashboard.</span></span>
   
   ![][11]  
   
   <span data-ttu-id="28740-248">Из области вывода hello, копирование hello конечной точки, где hello мост EAI развернут, например, `https://contosowabs.biztalk.windows.net/default/ProcessInvoiceBridge`.</span><span class="sxs-lookup"><span data-stu-id="28740-248">From hello output pane, copy hello endpoint where hello EAI bridge is deployed, for example, `https://contosowabs.biztalk.windows.net/default/ProcessInvoiceBridge`.</span></span> <span data-ttu-id="28740-249">Этот URL-адрес конечной точки понадобится вам позже.</span><span class="sxs-lookup"><span data-stu-id="28740-249">You will need this endpoint URL later.</span></span>  

## <a name="step-4-test-hello-solution"></a><span data-ttu-id="28740-250">Шаг 4: Тестирование решения hello</span><span class="sxs-lookup"><span data-stu-id="28740-250">Step 4: Test hello solution</span></span>
<span data-ttu-id="28740-251">В этом разделе рассматривается, как tootest hello решения с помощью hello **Tutorial Client** приложения предоставляется как часть образца hello.</span><span class="sxs-lookup"><span data-stu-id="28740-251">In this topic, we look at how tootest hello solution by using hello **Tutorial Client** application provided as part of hello sample.</span></span>  

1. <span data-ttu-id="28740-252">В Visual Studio нажмите клавишу F5 toostart hello **Tutorial Client**.</span><span class="sxs-lookup"><span data-stu-id="28740-252">In Visual Studio, press F5 toostart hello **Tutorial Client**.</span></span>
2. <span data-ttu-id="28740-253">экран приветствия должен иметь hello значения, заданные hello шаг создания hello очереди Service Bus.</span><span class="sxs-lookup"><span data-stu-id="28740-253">hello screen must have hello values prepopulated from hello step where we created hello Service Bus queues.</span></span> <span data-ttu-id="28740-254">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="28740-254">Click **Next**.</span></span>
3. <span data-ttu-id="28740-255">В следующем окне приветствия учетные данные ACS для служб BizTalk подписки и hello конечных точек которой EAI и EDI (получения) развернуты мосты.</span><span class="sxs-lookup"><span data-stu-id="28740-255">In hello next window, provide ACS credentials for BizTalk Services subscription, and hello endpoints where EAI and EDI (receive) bridges are deployed.</span></span>
   
   <span data-ttu-id="28740-256">Вы скопировали конечную точку моста EAI hello в предыдущем шаге hello.</span><span class="sxs-lookup"><span data-stu-id="28740-256">You had copied hello EAI bridge endpoint in hello previous step.</span></span> <span data-ttu-id="28740-257">Для конечной точки моста получения EDI в портале служб BizTalk hello, go toohello соглашения > Параметры получения > транспорта > конечной точки.</span><span class="sxs-lookup"><span data-stu-id="28740-257">For EDI receive bridge endpoint, in hello BizTalk Services Portal, go toohello agreement > Receive Settings > Transport > Endpoint.</span></span>
   
   ![][12]  
4. <span data-ttu-id="28740-258">В следующем окне приветствия в разделе Contoso нажмите кнопку hello **Send In-house Invoice** кнопки.</span><span class="sxs-lookup"><span data-stu-id="28740-258">In hello next window, under Contoso, click hello **Send In-house Invoice** button.</span></span> <span data-ttu-id="28740-259">В файл Привет открыть диалоговое окно, откройте файл INHOUSEINVOICE.txt hello.</span><span class="sxs-lookup"><span data-stu-id="28740-259">In hello File open dialog box, open hello INHOUSEINVOICE.txt file.</span></span> <span data-ttu-id="28740-260">Изучите содержимое hello hello файла и нажмите кнопку **ОК** toosend hello счета.</span><span class="sxs-lookup"><span data-stu-id="28740-260">Examine hello content of hello file and then click **OK** toosend hello invoice.</span></span>
   
   ![][13]  
5. <span data-ttu-id="28740-261">В hello несколько секунд счет будет получен в Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-261">In a few seconds hello invoice is received at Northwind.</span></span> <span data-ttu-id="28740-262">Нажмите кнопку hello **просмотреть сообщение** ссылку toosee hello счета, полученного из базы данных Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-262">Click hello **View Message** link toosee hello invoice received by Northwind.</span></span> <span data-ttu-id="28740-263">Обратите внимание, каким образом является hello счета, полученного из базы данных Northwind в стандартную схему EDIFACT при hello один Contoso отправляется была собственная схема.</span><span class="sxs-lookup"><span data-stu-id="28740-263">Notice how hello invoice received by Northwind is in standard EDIFACT schema while hello one sent by Contoso was an in-house schema.</span></span>
   
   ![][14]  
6. <span data-ttu-id="28740-264">Выберите счет hello и нажмите кнопку **отправить подтверждение**.</span><span class="sxs-lookup"><span data-stu-id="28740-264">Select hello invoice and then click **Send Acknowledgement**.</span></span> <span data-ttu-id="28740-265">Обратите внимание, hello обмена, когда идентификатор же hello полученного счета и hello подтверждение отправки hello диалоговом появившемся.</span><span class="sxs-lookup"><span data-stu-id="28740-265">In hello dialog box that pops up, notice that hello interchange ID is same in hello received invoice and hello acknowledgement being sent.</span></span> <span data-ttu-id="28740-266">Нажмите кнопку "ОК" в hello **отправить подтверждение** диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="28740-266">Click OK in hello **Send Acknowledgement** dialog box.</span></span>
   
   ![][15]  
7. <span data-ttu-id="28740-267">Через несколько секунд hello успешно подтверждения в Contoso.</span><span class="sxs-lookup"><span data-stu-id="28740-267">In a few seconds, hello acknowledgement is successfully received at Contoso.</span></span>
   
   ![][16]  

## <a name="step-5-optional-send-edifact-invoice-in-batches"></a><span data-ttu-id="28740-268">Шаг 5 (необязательный). Пакетная отправка счетов EDIFACT</span><span class="sxs-lookup"><span data-stu-id="28740-268">Step 5 (optional): Send EDIFACT invoice in batches</span></span>
<span data-ttu-id="28740-269">Мосты EDI служб BizTalk также поддерживают пакетную обработку исходящих сообщений.</span><span class="sxs-lookup"><span data-stu-id="28740-269">BizTalk Services EDI bridges also supports batching of outgoing messages.</span></span> <span data-ttu-id="28740-270">Эта возможность полезна для принимающих партнеров, которые предпочитают tooreceive пакет сообщений (по определенному критерию) вместо отдельных сообщений.</span><span class="sxs-lookup"><span data-stu-id="28740-270">This feature is useful for receiving partners that prefer tooreceive a batch of messages (meeting certain criterion) instead of individual messages.</span></span>

<span data-ttu-id="28740-271">Hello наиболее важным аспектом при работе с пакетами является фактический выпуск пакета hello, называемый также условия выпуска hello hello.</span><span class="sxs-lookup"><span data-stu-id="28740-271">hello most important aspect when working with batches is hello actual release of hello batch, also called hello release criteria.</span></span> <span data-ttu-id="28740-272">условия выпуска Hello могут определяться как принимающий партнер hello хочет tooreceive сообщений.</span><span class="sxs-lookup"><span data-stu-id="28740-272">hello release criteria can be based on how hello receiving partner wants tooreceive messages.</span></span> <span data-ttu-id="28740-273">При включенной пакетной обработке hello мост EDI не отправлять исходящие сообщения toohello hello получение партнера, пока hello выполнения условий выпуска.</span><span class="sxs-lookup"><span data-stu-id="28740-273">If batching is enabled, hello EDI bridge does not send hello outgoing message toohello receiving partner until hello release criteria is fulfilled.</span></span> <span data-ttu-id="28740-274">Например, условия отправки пакета на основе размера сообщения будут выполнены, только когда количество сообщений в пакете достигнет определенного значения.</span><span class="sxs-lookup"><span data-stu-id="28740-274">For example, a batching criteria based on message size dispatches a batch only when ‘n’ messages are batched.</span></span> <span data-ttu-id="28740-275">Условия также могут определяться временем отправки (например, пакет будет отправляться ежедневно в указанное время).</span><span class="sxs-lookup"><span data-stu-id="28740-275">A batch criteria can also be time-based, such that a batch is sent at a fixed time every day.</span></span> <span data-ttu-id="28740-276">В данном решении мы пытаемся условия на основе размера сообщения hello.</span><span class="sxs-lookup"><span data-stu-id="28740-276">In this solution, we try hello message-size based criteria.</span></span>

1. <span data-ttu-id="28740-277">В hello портале служб BizTalk щелкните hello соглашения, которое было создано ранее.</span><span class="sxs-lookup"><span data-stu-id="28740-277">In hello BizTalk Services Portal, click hello agreement you created earlier.</span></span> <span data-ttu-id="28740-278">Щелкните «Параметры отправки» > «Пакетная обработка» > «Добавить пакет».</span><span class="sxs-lookup"><span data-stu-id="28740-278">Click Send Settings > Batching > Add Batch.</span></span>
2. <span data-ttu-id="28740-279">В качестве имени пакета укажите **InvoiceBatch**, введите описание и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="28740-279">For batch name, enter **InvoiceBatch**, provide a description, and then click **Next**.</span></span>
3. <span data-ttu-id="28740-280">Укажите условия пакетной обработки, в соответствии с которыми сообщения будут включены в пакет.</span><span class="sxs-lookup"><span data-stu-id="28740-280">Specify a batch criteria, that defines which messages must be batched.</span></span> <span data-ttu-id="28740-281">В этом решении будут включены все сообщения.</span><span class="sxs-lookup"><span data-stu-id="28740-281">In this solution, we batch all messages.</span></span> <span data-ttu-id="28740-282">Таким образом, выберите hello использовать расширенные определения параметр и введите **1 = 1**.</span><span class="sxs-lookup"><span data-stu-id="28740-282">So, select hello Use advanced definitions option, and enter **1 = 1**.</span></span> <span data-ttu-id="28740-283">Так как это условие всегда будет иметь значение Тrue, пакетной обработке будут подлежать все сообщения.</span><span class="sxs-lookup"><span data-stu-id="28740-283">This is a condition which will always be true, and hence all messages will be batched.</span></span> <span data-ttu-id="28740-284">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="28740-284">Click **Next**.</span></span>
   
   ![][17]  
4. <span data-ttu-id="28740-285">Укажите условия пакетной отправки.</span><span class="sxs-lookup"><span data-stu-id="28740-285">Specify a batch release criteria.</span></span> <span data-ttu-id="28740-286">Hello раскрывающемся списке выберите **MessageCountBased**, а также для **число**, укажите **3**.</span><span class="sxs-lookup"><span data-stu-id="28740-286">From hello drop-box, select **MessageCountBased**, and for **Count**, specify **3**.</span></span> <span data-ttu-id="28740-287">Это означает, что пакет из трех сообщений будет отправлено tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="28740-287">This means that a batch of three messages will be sent tooNorthwind.</span></span> <span data-ttu-id="28740-288">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="28740-288">Click **Next**.</span></span>
   
   ![][18]  
5. <span data-ttu-id="28740-289">Просмотрите сводку hello и нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="28740-289">Review hello summary and then click **Save**.</span></span> <span data-ttu-id="28740-290">Нажмите кнопку **развернуть** tooredeploy hello соглашения.</span><span class="sxs-lookup"><span data-stu-id="28740-290">Click **Deploy** tooredeploy hello agreement.</span></span>
6. <span data-ttu-id="28740-291">Вернитесь к предыдущему окну toohello **Tutorial Client**, нажмите кнопку **Send In-house Invoice**и следуйте hello приглашения toosend hello счета.</span><span class="sxs-lookup"><span data-stu-id="28740-291">Go back toohello **Tutorial Client**, click **Send In-house Invoice**, and follow hello prompts toosend hello invoice.</span></span> <span data-ttu-id="28740-292">Обратите внимание, что счет не получен в Northwind, так как размер пакета hello не выполнены.</span><span class="sxs-lookup"><span data-stu-id="28740-292">You will notice that no invoice is received at Northwind because hello batch size is not met.</span></span> <span data-ttu-id="28740-293">Повторите это действие еще два раза, чтобы получить набрать три сообщения tooNorthwind.</span><span class="sxs-lookup"><span data-stu-id="28740-293">Repeat this step two more times, so that you have three invoice messages sent tooNorthwind.</span></span> <span data-ttu-id="28740-294">Это удовлетворяет условия выпуска пакета 3 сообщений hello и должно отобразиться счет в Northwind.</span><span class="sxs-lookup"><span data-stu-id="28740-294">This satisfies hello batch release criteria of 3 messages and you should now see an invoice at Northwind.</span></span>

<!--Image references-->
[1]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-1.PNG  
[2]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-2.PNG  
[3]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-3.PNG
[4]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-4.PNG  
[5]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-5.PNG  
[6]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-6.PNG  
[7]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-7.PNG  
[8]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-8.PNG
[9]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-9.PNG  
[10]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-10.PNG  
[11]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-11.PNG  
[12]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-12.PNG  
[13]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-13.PNG
[14]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-14.PNG  
[15]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-15.PNG  
[16]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-16.PNG  
[17]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-17.PNG  
[18]: ./media/biztalk-process-edifact-invoice/process-edifact-invoices-with-auzure-bts-18.PNG

