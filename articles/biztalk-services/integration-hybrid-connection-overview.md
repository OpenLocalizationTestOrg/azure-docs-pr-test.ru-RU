---
title: "Обзор гибридных подключений | Документация Майкрософт"
description: "Сведения о гибридных подключениях, безопасности, TCP-портах и поддерживаемых конфигурациях. MABS, WABS."
services: biztalk-services
documentationcenter: 
author: MandiOhlinger
manager: erikre
editor: 
ms.assetid: 216e4927-6863-46e7-aa7c-77fec575c8a6
ms.service: biztalk-services
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 10/18/2016
ms.author: ccompy
ms.openlocfilehash: 9367d6f57e694c8a438781004ef29a09de77aaa8
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="hybrid-connections-overview"></a><span data-ttu-id="17700-104">Обзор гибридных подключений</span><span class="sxs-lookup"><span data-stu-id="17700-104">Hybrid Connections overview</span></span>

> [!IMPORTANT]
> <span data-ttu-id="17700-105">Гибридные подключения BizTalk больше не используются. Они заменены гибридными подключениями службы приложений.</span><span class="sxs-lookup"><span data-stu-id="17700-105">BizTalk Hybrid Connections is retired, and replaced by App Service Hybrid Connections.</span></span> <span data-ttu-id="17700-106">Дополнительную информацию, включая сведения об управлении существующими гибридными подключениями BizTalk, см. в статье [Гибридные подключения к службе приложений Azure](../app-service/app-service-hybrid-connections.md).</span><span class="sxs-lookup"><span data-stu-id="17700-106">For more information, including how to manage your existing BizTalk Hybrid Connections, see [Azure App Service Hybrid Connections](../app-service/app-service-hybrid-connections.md).</span></span>

<span data-ttu-id="17700-107">В этой статье приведены обзорная информация о гибридных подключениях, список поддерживаемых конфигураций и список необходимых TCP-портов.</span><span class="sxs-lookup"><span data-stu-id="17700-107">Introduction to Hybrid Connections, lists the supported configurations, and lists the required TCP ports.</span></span>

## <a name="what-is-a-hybrid-connection"></a><span data-ttu-id="17700-108">Что такое гибридное подключение</span><span class="sxs-lookup"><span data-stu-id="17700-108">What is a hybrid connection</span></span>
<span data-ttu-id="17700-109">Гибридное подключение является компонентом службы Azure BizTalk.</span><span class="sxs-lookup"><span data-stu-id="17700-109">Hybrid Connections are a feature of Azure BizTalk Services.</span></span> <span data-ttu-id="17700-110">Гибридное подключение обеспечивает простой и удобный способ соединения веб-приложений Azure (ранее — веб-сайты) и мобильных приложений Azure (ранее — мобильные службы) в службе приложений Azure с локальными ресурсами, защищенными брандмауэром.</span><span class="sxs-lookup"><span data-stu-id="17700-110">Hybrid Connections provide an easy and convenient way to connect the Web Apps feature in Azure App Service (formerly Websites) and the Mobile Apps feature in Azure App Service (formerly Mobile Services) to on-premises resources behind your firewall.</span></span>

![через гибридные подключения][HCImage]

<span data-ttu-id="17700-112">К преимуществам гибридных подключений относятся:</span><span class="sxs-lookup"><span data-stu-id="17700-112">Hybrid Connections benefits include:</span></span>

* <span data-ttu-id="17700-113">Веб-приложения и мобильные приложения получают безопасный доступ к существующим локальным данным и службам.</span><span class="sxs-lookup"><span data-stu-id="17700-113">Web Apps and Mobile Apps can access existing on-premises data and services securely.</span></span>
* <span data-ttu-id="17700-114">Несколько веб-приложений или мобильных приложений могут одновременно использовать гибридное подключение для доступа к локальному ресурсу.</span><span class="sxs-lookup"><span data-stu-id="17700-114">Multiple Web Apps or Mobile Apps can share a Hybrid Connection to access an on-premises resource.</span></span>
* <span data-ttu-id="17700-115">Для доступа к сети требуется минимальное количество портов TCP.</span><span class="sxs-lookup"><span data-stu-id="17700-115">Minimal TCP ports are required to access your network.</span></span>
* <span data-ttu-id="17700-116">приложения, использующие гибридные подключения, имеют доступ только к определенным локальным ресурсам, опубликованным через гибридное подключение;</span><span class="sxs-lookup"><span data-stu-id="17700-116">Applications using Hybrid Connections access only the specific on-premises resource that is published through the Hybrid Connection.</span></span>
* <span data-ttu-id="17700-117">вы можете подключиться к любому локальному ресурсу, который использует статический TCP-порт: например, SQL Server, MySQL, веб-интерфейсы API HTTP и большинство настраиваемых веб-служб.</span><span class="sxs-lookup"><span data-stu-id="17700-117">Can connect to any on-premises resource that uses a static TCP port, such as SQL Server, MySQL, HTTP Web APIs, and most custom Web Services.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="17700-118">Службы на базе протокола TCP, использующие динамические порты (такие как пассивным режим FTP или расширенный пассивный режим), в настоящее время не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="17700-118">TCP-based services that use dynamic ports (such as FTP Passive Mode or Extended Passive Mode) are currently not supported.</span></span> <span data-ttu-id="17700-119">LDAP также не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="17700-119">LDAP is also not supported.</span></span> <span data-ttu-id="17700-120">LDAP использует статический порт TCP, но также может использовать UDP.</span><span class="sxs-lookup"><span data-stu-id="17700-120">LDAP uses a static TCP port but it could also use UDP.</span></span> <span data-ttu-id="17700-121">Поэтому LDAP не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="17700-121">As a result, it is not supported.</span></span>
  > 
  > 
* <span data-ttu-id="17700-122">Можно использовать со всеми платформами, поддерживаемыми веб-приложениями (.NET, PHP, Java, Python, Node.js) и мобильными приложениями (Node.js, .NET).</span><span class="sxs-lookup"><span data-stu-id="17700-122">Can be used with all frameworks supported by Web Apps (.NET, PHP, Java, Python, Node.js) and Mobile Apps (Node.js, .NET).</span></span>
* <span data-ttu-id="17700-123">Веб-приложения и мобильные приложения могут осуществлять доступ к локальным ресурсам таким же образом, как если бы веб-приложение или мобильное приложение находились в вашей локальной сети.</span><span class="sxs-lookup"><span data-stu-id="17700-123">Web Apps and Mobile Apps can access on-premises resources in exactly the same way as if the Web or Mobile App is located on your local network.</span></span> <span data-ttu-id="17700-124">Например, одна и та же строка подключения может использоваться как локально, так и в Azure.</span><span class="sxs-lookup"><span data-stu-id="17700-124">For example, the same connection string used on-premises can also be used on Azure.</span></span>

<span data-ttu-id="17700-125">Гибридные подключения также обеспечивают администраторам предприятия управление и видимость корпоративных ресурсов, к которым осуществляется доступ со стороны гибридных приложений, включая:</span><span class="sxs-lookup"><span data-stu-id="17700-125">Hybrid Connections also provide enterprise administrators with control and visibility into the corporate resources accessed by hybrid applications, including:</span></span>

* <span data-ttu-id="17700-126">Используя групповые политики, администраторы могут предоставлять доступ гибридным подключениям к сети и задавать ресурсы, которые будут доступны гибридным приложениям.</span><span class="sxs-lookup"><span data-stu-id="17700-126">Using Group Policy settings, administrators can allow Hybrid Connections on the network and also designate resources that can be accessed by hybrid applications.</span></span>
* <span data-ttu-id="17700-127">Журналы события и аудита корпоративной сети обеспечивают видимость ресурсов, к которым осуществляется доступ гибридными подключениями.</span><span class="sxs-lookup"><span data-stu-id="17700-127">Event and audit logs on the corporate network provide visibility into the resources accessed by Hybrid Connections.</span></span>

## <a name="example-scenarios"></a><span data-ttu-id="17700-128">Примеры сценариев</span><span class="sxs-lookup"><span data-stu-id="17700-128">Example scenarios</span></span>
<span data-ttu-id="17700-129">Гибридные подключения поддерживают следующие комбинации платформ и приложений:</span><span class="sxs-lookup"><span data-stu-id="17700-129">Hybrid Connections support the following framework and application combinations:</span></span>

* <span data-ttu-id="17700-130">доступ из .NET к SQL Server;</span><span class="sxs-lookup"><span data-stu-id="17700-130">.NET framework access to SQL Server</span></span>
* <span data-ttu-id="17700-131">доступ из .NET к службам HTTP/HTTPS с веб-клиентом;</span><span class="sxs-lookup"><span data-stu-id="17700-131">.NET framework access to HTTP/HTTPS services with WebClient</span></span>
* <span data-ttu-id="17700-132">доступ из PHP к SQL Server, MySQL;</span><span class="sxs-lookup"><span data-stu-id="17700-132">PHP access to SQL Server, MySQL</span></span>
* <span data-ttu-id="17700-133">доступ из Java к SQL Server, MySQL и Oracle;</span><span class="sxs-lookup"><span data-stu-id="17700-133">Java access to SQL Server, MySQL and Oracle</span></span>
* <span data-ttu-id="17700-134">доступ из Java к службам HTTP/HTTPS.</span><span class="sxs-lookup"><span data-stu-id="17700-134">Java access to HTTP/HTTPS services</span></span>

<span data-ttu-id="17700-135">При использовании гибридных подключений для доступа к локальному SQL Server, учитывайте следующее:</span><span class="sxs-lookup"><span data-stu-id="17700-135">When using Hybrid Connections to access on-premises SQL Server, consider the following:</span></span>

* <span data-ttu-id="17700-136">именованные экземпляры SQL Express должны быть настроены для использования статических портов.</span><span class="sxs-lookup"><span data-stu-id="17700-136">SQL Express Named Instances must be configured to use static ports.</span></span> <span data-ttu-id="17700-137">По умолчанию именованные экземпляры SQL Express используют динамические порты.</span><span class="sxs-lookup"><span data-stu-id="17700-137">By default, SQL Express named instances use dynamic ports.</span></span>
* <span data-ttu-id="17700-138">Экземпляр SQL Express по умолчанию использует статический порт, однако необходимо разрешить использование протокола TCP.</span><span class="sxs-lookup"><span data-stu-id="17700-138">SQL Express Default Instances use a static port, but TCP must be enabled.</span></span> <span data-ttu-id="17700-139">По умолчанию протокол TCP отключен.</span><span class="sxs-lookup"><span data-stu-id="17700-139">By default, TCP is not enabled.</span></span>
* <span data-ttu-id="17700-140">При использовании Кластеризации или Групп доступности, режим `MultiSubnetFailover=true` в настоящее время не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="17700-140">When using Clustering or Availability Groups, the `MultiSubnetFailover=true` mode is currently not supported.</span></span>
* <span data-ttu-id="17700-141">`ApplicationIntent=ReadOnly` в настоящее время не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="17700-141">The `ApplicationIntent=ReadOnly` is currently not supported.</span></span>
* <span data-ttu-id="17700-142">Проверка подлинности SQL может понадобиться в том случае, если сквозная проверка подлинности поддерживается приложением Azure и локальным SQL Server.</span><span class="sxs-lookup"><span data-stu-id="17700-142">SQL Authentication may be required as the end-to-end authorization method supported by the Azure application and the on-premises SQL server.</span></span>

## <a name="security-and-ports"></a><span data-ttu-id="17700-143">Безопасность и порты</span><span class="sxs-lookup"><span data-stu-id="17700-143">Security and ports</span></span>
<span data-ttu-id="17700-144">Гибридные подключения используют авторизацию с помощью подписанного URL-адреса (SAS), чтобы гарантировать безопасность подключений от приложений Azure и локального диспетчера гибридных подключений к гибридному подключению.</span><span class="sxs-lookup"><span data-stu-id="17700-144">Hybrid Connections use Shared Access Signature (SAS) authorization to secure the connections from the Azure applications and the on-premises Hybrid Connection Manager to the Hybrid Connection.</span></span> <span data-ttu-id="17700-145">Для приложения и локального диспетчера гибридных подключений создаются отдельные ключи подключения.</span><span class="sxs-lookup"><span data-stu-id="17700-145">Separate connection keys are created for the application and the on-premises Hybrid Connection Manager.</span></span> <span data-ttu-id="17700-146">Эти ключи можно выпускать и отзывать независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="17700-146">These connection keys can be rolled over and revoked independently.</span></span>

<span data-ttu-id="17700-147">Гибридные подключения обеспечивают простое и безопасное распределение ключей приложениям и локальному диспетчеру гибридных подключений.</span><span class="sxs-lookup"><span data-stu-id="17700-147">Hybrid Connections provide for seamless and secure distribution of the keys to the applications and the on-premises Hybrid Connection Manager.</span></span>

<span data-ttu-id="17700-148">См. статью [Создание гибридных подключений и управление ими](integration-hybrid-connection-create-manage.md).</span><span class="sxs-lookup"><span data-stu-id="17700-148">See [Create and Manage Hybrid Connections](integration-hybrid-connection-create-manage.md).</span></span>

<span data-ttu-id="17700-149">*Авторизация приложения осуществляется отдельно от гибридного подключения*.</span><span class="sxs-lookup"><span data-stu-id="17700-149">*Application authorization is separate from the Hybrid Connection*.</span></span> <span data-ttu-id="17700-150">Можно использовать любой подходящий метод авторизации.</span><span class="sxs-lookup"><span data-stu-id="17700-150">Any appropriate authorization method can be used.</span></span> <span data-ttu-id="17700-151">Метод авторизации зависит от сочетания сквозных методов авторизации, поддерживаемых в облаке Azure и локальных компонентах.</span><span class="sxs-lookup"><span data-stu-id="17700-151">The authorization method depends on the end-to-end authorization methods supported across the Azure cloud and the on-premises components.</span></span> <span data-ttu-id="17700-152">Например, приложение Azure осуществляет доступ к локальному SQL Server.</span><span class="sxs-lookup"><span data-stu-id="17700-152">For example, your Azure application accesses an on-premises SQL Server.</span></span> <span data-ttu-id="17700-153">В этом сценарии авторизация SQL может являться сквозным методом авторизации.</span><span class="sxs-lookup"><span data-stu-id="17700-153">In this scenario, SQL Authorization may be the authorization method that is supported end-to-end.</span></span>

#### <a name="tcp-ports"></a><span data-ttu-id="17700-154">Порты TCP</span><span class="sxs-lookup"><span data-stu-id="17700-154">TCP ports</span></span>
<span data-ttu-id="17700-155">Гибридные подключения требуют только исходящее подключение по протоколу TCP или HTTP из частной сети.</span><span class="sxs-lookup"><span data-stu-id="17700-155">Hybrid Connections require only outbound TCP or HTTP connectivity from your private network.</span></span> <span data-ttu-id="17700-156">Вам не нужно открывать какие-либо порты брандмауэра или изменять параметры конфигурации сети, чтобы разрешить исходящее подключение к своей сети.</span><span class="sxs-lookup"><span data-stu-id="17700-156">You do not need to open any firewall ports or change your network perimeter configuration to allow any inbound connectivity into your network.</span></span>

<span data-ttu-id="17700-157">Гибридные подключения используют следующие TCP-порты:</span><span class="sxs-lookup"><span data-stu-id="17700-157">The following TCP ports are used by Hybrid Connections:</span></span>

| <span data-ttu-id="17700-158">Порт</span><span class="sxs-lookup"><span data-stu-id="17700-158">Port</span></span> | <span data-ttu-id="17700-159">Их назначение</span><span class="sxs-lookup"><span data-stu-id="17700-159">Why you need it</span></span> |
| --- | --- |
| <span data-ttu-id="17700-160">9350 - 9354</span><span class="sxs-lookup"><span data-stu-id="17700-160">9350 - 9354</span></span> |<span data-ttu-id="17700-161">Эти порты используются для передачи данных.</span><span class="sxs-lookup"><span data-stu-id="17700-161">These ports are used for data transmission.</span></span> <span data-ttu-id="17700-162">Диспетчер ретранслятора служебной шины проверяет порт 9350, чтобы определить, доступно ли подключение TCP.</span><span class="sxs-lookup"><span data-stu-id="17700-162">The Service Bus relay manager probes port 9350 to determine if TCP connectivity is available.</span></span> <span data-ttu-id="17700-163">Если оно доступно, диспетчер предполагает, что порт 9352 также доступен.</span><span class="sxs-lookup"><span data-stu-id="17700-163">If it is available, then it assumes that port 9352 is also available.</span></span> <span data-ttu-id="17700-164">Обмен данными осуществляется через порт 9352.</span><span class="sxs-lookup"><span data-stu-id="17700-164">Data traffic goes over port 9352.</span></span> <br/><br/><span data-ttu-id="17700-165">Разрешите внешние подключения к этим портам.</span><span class="sxs-lookup"><span data-stu-id="17700-165">Allow outbound connections to these ports.</span></span> |
| <span data-ttu-id="17700-166">5671</span><span class="sxs-lookup"><span data-stu-id="17700-166">5671</span></span> |<span data-ttu-id="17700-167">Когда порт 9352 используется для обмена данными, порт 5671 употребляется в качестве канала управления.</span><span class="sxs-lookup"><span data-stu-id="17700-167">When port 9352 is used for data traffic, port 5671 is used as the control channel.</span></span> <br/><br/><span data-ttu-id="17700-168">Разрешите внешние подключения к этому порту.</span><span class="sxs-lookup"><span data-stu-id="17700-168">Allow outbound connections to this port.</span></span> |
| <span data-ttu-id="17700-169">80, 443</span><span class="sxs-lookup"><span data-stu-id="17700-169">80, 443</span></span> |<span data-ttu-id="17700-170">Эти порты используются для запросов данных в Azure.</span><span class="sxs-lookup"><span data-stu-id="17700-170">These ports are used for some data requests to Azure.</span></span> <span data-ttu-id="17700-171">Если порты 9352 и 5671 недоступны, *то* в качестве резервных портов для обмена данными и управления используются порты 80 и 443.</span><span class="sxs-lookup"><span data-stu-id="17700-171">Also, if ports 9352 and 5671 are not usable, *then* ports 80 and 443 are the fallback ports used for data transmission and the control channel.</span></span><br/><br/><span data-ttu-id="17700-172">Разрешите внешние подключения к этим портам.</span><span class="sxs-lookup"><span data-stu-id="17700-172">Allow outbound connections to these ports.</span></span> <br/><br/><span data-ttu-id="17700-173">**Примечание.** Не рекомендуется использовать эти резервные порты вместо других TCP-портов.</span><span class="sxs-lookup"><span data-stu-id="17700-173">**Note** It is not recommended to use these as the fallback ports in place of the other TCP ports.</span></span> <span data-ttu-id="17700-174">HTTP/WebSocket используется в качестве протокола вместо собственного TCP-протокола для каналов данных.</span><span class="sxs-lookup"><span data-stu-id="17700-174">The HTTP/WebSocket is used as the protocol instead of native TCP for data channels.</span></span> <span data-ttu-id="17700-175">Это может привести к снижению производительности.</span><span class="sxs-lookup"><span data-stu-id="17700-175">It could result in lower performance.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="17700-176">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="17700-176">Next steps</span></span>
[<span data-ttu-id="17700-177">Создание гибридных подключений и управление ими</span><span class="sxs-lookup"><span data-stu-id="17700-177">Create and manage Hybrid Connections</span></span>](integration-hybrid-connection-create-manage.md)<br/><span data-ttu-id="17700-178">
[Доступ к локальным ресурсам с помощью гибридных подключений в службе приложений Azure](../app-service-web/web-sites-hybrid-connection-get-started.md)</span><span class="sxs-lookup"><span data-stu-id="17700-178">
[Connect Azure Web Apps to an On-Premises Resource](../app-service-web/web-sites-hybrid-connection-get-started.md)</span></span><br/><span data-ttu-id="17700-179">
[Подключение к локальному SQL Server из веб-приложения, размещенного в службе приложений Azure с помощью гибридных подключений](../app-service-web/web-sites-hybrid-connection-connect-on-premises-sql-server.md)</span><span class="sxs-lookup"><span data-stu-id="17700-179">
[Connect to on-premises SQL Server from an Azure web app](../app-service-web/web-sites-hybrid-connection-connect-on-premises-sql-server.md)</span></span><br/>

## <a name="see-also"></a><span data-ttu-id="17700-180">См. также</span><span class="sxs-lookup"><span data-stu-id="17700-180">See Also</span></span>
<span data-ttu-id="17700-181">[REST API для управления службами BizTalk в Microsoft Azure](http://msdn.microsoft.com/library/azure/dn232347.aspx)
[Службы BizTalk: диаграмма выпусков](biztalk-editions-feature-chart.md)</span><span class="sxs-lookup"><span data-stu-id="17700-181">[REST API for Managing BizTalk Services on Microsoft Azure](http://msdn.microsoft.com/library/azure/dn232347.aspx)
[BizTalk Services: Editions Chart](biztalk-editions-feature-chart.md)</span></span><br/><span data-ttu-id="17700-182">
[Создание служб BizTalk с помощью портала Azure](biztalk-provision-services.md)</span><span class="sxs-lookup"><span data-stu-id="17700-182">
[Create a BizTalk Service using Azure portal](biztalk-provision-services.md)</span></span><br/><span data-ttu-id="17700-183">
[Просмотр вкладок "Панель мониторинга", "Монитор", "Масштаб", "Настройка" и "Гибридное подключение"](biztalk-dashboard-monitor-scale-tabs.md)</span><span class="sxs-lookup"><span data-stu-id="17700-183">
[BizTalk Services: Dashboard, Monitor and Scale tabs](biztalk-dashboard-monitor-scale-tabs.md)</span></span><br/>

[HCImage]: ./media/integration-hybrid-connection-overview/WABS_HybridConnectionImage.png
[HybridConnectionTab]: ./media/integration-hybrid-connection-overview/WABS_HybridConnectionTab.png
[HCOnPremSetup]: ./media/integration-hybrid-connection-overview/WABS_HybridConnectionOnPremSetup.png
[HCManageConnection]: ./media/integration-hybrid-connection-overview/WABS_HybridConnectionManageConn.png
