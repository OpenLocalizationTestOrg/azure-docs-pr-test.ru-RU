---
title: "Техническое руководство по переносу решений EDI для BizTalk Server в службы BizTalk | Документация Майкрософт"
description: "Перенос EDI в MABS; Службы BizTalk Microsoft Azure"
services: biztalk-services
documentationcenter: na
author: MandiOhlinger
manager: anneta
editor: 
ms.assetid: 61c179fa-3f37-495b-8016-dee7474fd3a6
ms.service: biztalk-services
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/07/2016
ms.author: mandia
ms.openlocfilehash: 1b70fc3d199d7f1521acb534dafec8fb3e69500e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="migrating-biztalk-server-edi-solutions-to-biztalk-services-technical-guide"></a><span data-ttu-id="d2f05-103">Перенос решений EDI для BizTalk Server в службы BizTalk: техническое руководство</span><span class="sxs-lookup"><span data-stu-id="d2f05-103">Migrating BizTalk Server EDI Solutions to BizTalk Services: Technical Guide</span></span>

> [!INCLUDE [BizTalk Services is being retired, and replaced with Azure Logic Apps](../../includes/biztalk-services-retirement.md)]

<span data-ttu-id="d2f05-104">Авторы: Тим Виман (Tim Wieman) и Нитин Мехротра (Nitin Mehrotra)</span><span class="sxs-lookup"><span data-stu-id="d2f05-104">Author: Tim Wieman and Nitin Mehrotra</span></span>

<span data-ttu-id="d2f05-105">Рецензенты: Катрик Брахти (Karthik Bharthy)</span><span class="sxs-lookup"><span data-stu-id="d2f05-105">Reviewers: Karthik Bharthy</span></span>

<span data-ttu-id="d2f05-106">Написано с использованием служб BizTalk Microsoft Azure, выпуск от февраля 2014 г.</span><span class="sxs-lookup"><span data-stu-id="d2f05-106">Written using:  Microsoft Azure BizTalk Services – February 2014 release.</span></span>

## <a name="introduction"></a><span data-ttu-id="d2f05-107">Введение</span><span class="sxs-lookup"><span data-stu-id="d2f05-107">Introduction</span></span>
<span data-ttu-id="d2f05-108">Электронный обмен данными (EDI) является одним из наиболее распространенных средств электронного обмена данными между предприятиями, его также называют транзакциями «бизнес — бизнес» или B2B.</span><span class="sxs-lookup"><span data-stu-id="d2f05-108">Electronic Data Interchange (EDI) is one of the most prevalent means by which businesses exchange data electronically, also termed as Business-to-Business or B2B transactions.</span></span> <span data-ttu-id="d2f05-109">BizTalk Server поддерживает EDI более десяти лет с момента своего первоначального выпуска.</span><span class="sxs-lookup"><span data-stu-id="d2f05-109">BizTalk Server has had EDI support for over a decade, since the initial BizTalk Sever release.</span></span> <span data-ttu-id="d2f05-110">С помощью служб BizTalk Microsoft продолжает поддерживать решения EDI на платформе Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d2f05-110">With BizTalk Services, Microsoft continues the support for EDI solutions on the Microsoft Azure platform.</span></span> <span data-ttu-id="d2f05-111">B2B-транзакции в основном являются внешними для организации и поэтому их легче реализовать на базе облачной платформы.</span><span class="sxs-lookup"><span data-stu-id="d2f05-111">B2B transactions are mostly external to an organization, and hence it’s easier to implement if it was implemented on a cloud platform.</span></span> <span data-ttu-id="d2f05-112">Microsoft Azure предоставляет такую возможность посредством служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-112">Microsoft Azure provides this capability through BizTalk Services.</span></span>

<span data-ttu-id="d2f05-113">Хотя некоторые клиенты смотрят на службы BizTalk как на «зеленое поле» для новых решений EDI, у многих клиентов есть текущие решения EDI для BizTalk Server, которые они хотели бы перенести Azure.</span><span class="sxs-lookup"><span data-stu-id="d2f05-113">While some customers look at BizTalk Services as a "greenfield" platform for new EDI solutions, many customers have current BizTalk Server EDI solutions that they may want to migrate to Azure.</span></span> <span data-ttu-id="d2f05-114">Поскольку EDI служб BizTalk построена на тех же основных понятиях, что и EDI для BizTalk Server (торговые партнеры, сущности, соглашения), артефакты EDI для BizTalk Server можно перенести в службы BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-114">Because BizTalk Services EDI is architected based on the same key entities as BizTalk Server EDI architecture (trading partners, entities, agreements), it is possible to migrate BizTalk Server EDI artifacts to BizTalk Services.</span></span>

<span data-ttu-id="d2f05-115">В этом документе рассматриваются некоторые отличия, связанные с переносом артефактов EDI для BizTalk Server в службы BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-115">This document discusses some of the differences involved with migrating BizTalk Server EDI artifacts to BizTalk Services.</span></span> <span data-ttu-id="d2f05-116">Этот документ предполагает наличие у читателя практического опыта обработки EDI для BizTalk Server и соглашений между торговыми партнерами.</span><span class="sxs-lookup"><span data-stu-id="d2f05-116">This document assumes a working knowledge of BizTalk Server EDI processing and Trading Partner Agreements.</span></span> <span data-ttu-id="d2f05-117">Дополнительные сведения о EDI для BizTalk Server см. в статье [Управление торговыми партнерами с помощью BizTalk Server](https://msdn.microsoft.com/library/bb259970.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2f05-117">For more information on BizTalk Server EDI, see [Trading Partner Management Using BizTalk Server](https://msdn.microsoft.com/library/bb259970.aspx).</span></span>

## <a name="which-version-of-biztalk-server-edi-artifacts-can-be-migrated-to-biztalk-services"></a><span data-ttu-id="d2f05-118">Какая версия артефактов EDI для BizTalk Server может быть перенесена в службы BizTalk?</span><span class="sxs-lookup"><span data-stu-id="d2f05-118">Which version of BizTalk Server EDI artifacts can be migrated to BizTalk Services?</span></span>
<span data-ttu-id="d2f05-119">Модуль EDI для BizTalk Server был значительно усовершенствован в BizTalk Server 2010, когда в него были включены партнеры, профили и соглашения.</span><span class="sxs-lookup"><span data-stu-id="d2f05-119">The BizTalk Server EDI module was significantly enhanced for BizTalk Server 2010, when it was remodeled to include partners, profiles, and agreements.</span></span> <span data-ttu-id="d2f05-120">В службах BizTalk используется та же самая модель упорядочения торговых партнеров и бизнес-подразделений этих торговых партнеров, что и в BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d2f05-120">BizTalk Services uses the same model to organize the trading partners and the business divisions within those trading partners.</span></span> <span data-ttu-id="d2f05-121">Поэтому перенос артефактов EDI для BizTalk Server 2010 и более поздних версий в службы BizTalk является намного более простым процессом.</span><span class="sxs-lookup"><span data-stu-id="d2f05-121">As a result, migrating EDI artifacts from BizTalk Server 2010 and later versions to BizTalk Services, is a much more straight forward process.</span></span> <span data-ttu-id="d2f05-122">Для версий BizTalk Server до 2010 необходимо сначала выполнить обновление BizTalk Server до версии 2010 и затем перенести артефакты EDI в службы BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-122">To migrate EDI artifacts associated with versions prior to BizTalk Server 2010, you must first upgrade to BizTalk Server 2010 and then migrate your EDI artifacts to BizTalk Services.</span></span>

## <a name="scenariosmessage-flow"></a><span data-ttu-id="d2f05-123">Сценарии и поток сообщений</span><span class="sxs-lookup"><span data-stu-id="d2f05-123">Scenarios/Message Flow</span></span>
<span data-ttu-id="d2f05-124">Как и в BizTalk Server, обработка EDI в службах BizTalk построена вокруг решения управления торговыми партнерами (TPM).</span><span class="sxs-lookup"><span data-stu-id="d2f05-124">As with BizTalk Server, EDI processing in BizTalk Services is built around a Trading Partner Management (TPM) solution.</span></span> <span data-ttu-id="d2f05-125">Решение TPM состоит из следующих ключевых компонентов.</span><span class="sxs-lookup"><span data-stu-id="d2f05-125">The TPM solution has the following key components:</span></span>

* <span data-ttu-id="d2f05-126">Торговые партнеры, которые представляют организацию в B2B-транзакции.</span><span class="sxs-lookup"><span data-stu-id="d2f05-126">Trading partners, which represent organization in a B2B transaction.</span></span>
* <span data-ttu-id="d2f05-127">Профили, которые представляют подразделения торгового партнера.</span><span class="sxs-lookup"><span data-stu-id="d2f05-127">Profiles, which represent divisions within a trading partner.</span></span>
* <span data-ttu-id="d2f05-128">Соглашения торгового партнера, которые представляют бизнес-соглашения между двумя партнерами или профилями.</span><span class="sxs-lookup"><span data-stu-id="d2f05-128">Trading partner agreements (or agreements), which represent the business agreement between two partners/profiles.</span></span>

<span data-ttu-id="d2f05-129">На следующем рисунке показаны сходства и различия между решениями EDI для BizTalk Server и решениями EDI для служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-129">The following illustration depicts the similarities, as well as differences, between a BizTalk Server EDI solution and BizTalk Services EDI solution:</span></span>

![][EDImessageflow]

<span data-ttu-id="d2f05-130">Ключевые сходства и различия между работой решения EDI в BizTalk Server и службах BizTalk таковы.</span><span class="sxs-lookup"><span data-stu-id="d2f05-130">The key differences, and similarities, between an EDI solution flow in BizTalk Server and BizTalk Services are:</span></span>

* <span data-ttu-id="d2f05-131">Так же, как в BizTalk Server для получения сообщений EDI используется конвейер EDIReceive, а для отправки сообщений EDI — конвейер EDISend, в службах BizTalk для получения сообщений EDI используется мост EDI Receive, а для отправки — мост EDI Send.</span><span class="sxs-lookup"><span data-stu-id="d2f05-131">Just like BizTalk Server uses an EDIReceive pipeline to receive an EDI message and an EDISend pipeline to send an EDI message, BizTalk Services uses an EDI Receive bridge to receive and EDI Send bridge to send out EDI messages.</span></span> <span data-ttu-id="d2f05-132">В BizTalk Server конвейеры связываются с соглашением с помощью портов отправки и получения.</span><span class="sxs-lookup"><span data-stu-id="d2f05-132">In BizTalk Server, the pipelines are associated with an agreement by using send or receive ports.</span></span> <span data-ttu-id="d2f05-133">В службах BizTalk мост отправки или приема определяется самим соглашением.</span><span class="sxs-lookup"><span data-stu-id="d2f05-133">In BizTalk Services, the agreement itself denotes the send or receive bridge.</span></span>
* <span data-ttu-id="d2f05-134">В BizTalk Server после обработки сообщения EDI конвейером EDIReceive оно помещается в базу данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d2f05-134">In BizTalk Server, after the EDIReceive pipeline processes the EDI message, the message is dumped to a SQL Server database.</span></span> <span data-ttu-id="d2f05-135">Затем конвейер EdiSend извлекает сообщение из базы данных SQL Server, обрабатывает его и отправляет торговому партнеру.</span><span class="sxs-lookup"><span data-stu-id="d2f05-135">The EdiSend pipeline then picks up the message from the SQL Server database, processes it, and then sends it out to the trading partner.</span></span>
  
    <span data-ttu-id="d2f05-136">В службах BizTalk после получения сообщения приемный мост EDI обрабатывает его и направляет сообщение внешнему процессу.</span><span class="sxs-lookup"><span data-stu-id="d2f05-136">In BizTalk Services, after the EDI receive bridge processes the EDI message, it routes the message to an external process.</span></span> <span data-ttu-id="d2f05-137">Внешний процесс может быть запущен в Microsoft Azure или локально.</span><span class="sxs-lookup"><span data-stu-id="d2f05-137">The external process could be running on Microsoft Azure or on-premises.</span></span> <span data-ttu-id="d2f05-138">Внешний процесс должен отправить сообщение мосту отправки EDI; мост отправки не извлекает сообщения самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="d2f05-138">The external process should route the message to the EDI send bridge; the send bridge does not inherently pull the message.</span></span> <span data-ttu-id="d2f05-139">После обработки сообщения мост отправки EDI направляет сообщение торговому партнеру.</span><span class="sxs-lookup"><span data-stu-id="d2f05-139">After processing the message, the EDI send bridge routes the message to the trading partner.</span></span>

<span data-ttu-id="d2f05-140">В службах BizTalk можно легко и удобно создать и развернуть B2B-соглашение между торговыми партнерами, не настраивая ни одного вычислительного экземпляра Microsoft Azure (рабочих ролей и веб-ролей), ни одной базы данных SQL Microsoft Azure и ни одной учетной записи службы хранилища Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="d2f05-140">BizTalk Services provides an easy-to-use configuration experience to quickly create and deploy a B2B agreement between trading partners without configuring any Microsoft Azure Compute instances (Web or Worker roles), any Microsoft Azure SQL Databases, or any Microsoft Azure storage accounts.</span></span> <span data-ttu-id="d2f05-141">Более сложные сценарии требуют привязок в рабочих процессах или другой обработки «по краям» соглашения между торговыми партнерами, то есть до или после обработки торгового соглашения партнера мостом EDI.</span><span class="sxs-lookup"><span data-stu-id="d2f05-141">More complex scenarios will require tying in workflows or other service processing "around the edges" of a Trading Partner agreement, that is, before or after Trading Partner Agreement EDI bridge processing.</span></span> <span data-ttu-id="d2f05-142">Ниже подробно описана последовательность событий, которые возникают при обработке сообщения EDI в службах BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-142">In detail, the following sequences of events occur during an EDI message processing in BizTalk Services.</span></span>

1. <span data-ttu-id="d2f05-143">Сообщение EDI получено от торгового партнера Fabrikam.</span><span class="sxs-lookup"><span data-stu-id="d2f05-143">An EDI message is received from trading partner, Fabrikam.</span></span>  <span data-ttu-id="d2f05-144">Для получения сообщений EDI от торговых партнеров службы BizTalk поддерживают такие транспортные протоколы, как FTP, SFTP, AS2 и HTTP/S.</span><span class="sxs-lookup"><span data-stu-id="d2f05-144">For receiving EDI messages from trading partners, BizTalk Services supports transport protocols such as FTP, SFTP, AS2, and HTTP/S.</span></span>
2. <span data-ttu-id="d2f05-145">На стороне приема соглашения торговых партнеров сообщение EDI разбирается в формат XML.</span><span class="sxs-lookup"><span data-stu-id="d2f05-145">The trading partner agreement receive-side processing disassembles the EDI message to XML format.</span></span>  <span data-ttu-id="d2f05-146">Разобранное EDI-сообщение (в формате XML) можно направить в конечные точки служебной шины, такие как конечная точка ретранслятора служебной шины, раздел служебной шины, очередь служебной шины или мост служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-146">You can route the disassembled EDI message (in XML format) to Service Bus endpoints such as a Service Bus Relay endpoint, Service Bus Topic, Service Bus Queue, or a BizTalk Services bridge.</span></span>
3. <span data-ttu-id="d2f05-147">Затем разобранные XML-сообщения можно получить из конечной точки для дальнейшей пользовательской обработки.</span><span class="sxs-lookup"><span data-stu-id="d2f05-147">The disassembled XML messages could then be received from the endpoint for further custom processing.</span></span>  <span data-ttu-id="d2f05-148">Эти конечные точки могут быть обработаны локальным компонентом или вычислительной операцией Microsoft Azure для дальнейшей обработки, например в службе Windows Workflow (WF) или в службе Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="d2f05-148">These endpoints could be processed by an on-premises component or a Microsoft Azure Compute instance to further process the message in a Windows Workflow (WF) or Windows Communication Foundation (WCF) service, for example.</span></span>
4. <span data-ttu-id="d2f05-149">Затем на стороне отправки соглашения торгового партнера XML-сообщение собирается в формат EDI и отправляется его торговому партнеру Contoso.</span><span class="sxs-lookup"><span data-stu-id="d2f05-149">The "send-side processing" of the trading partner agreement then assembles the XML message into EDI format and sends it to trading partner, Contoso.</span></span>  <span data-ttu-id="d2f05-150">Для отправки сообщений EDI торговым партнерам службы BizTalk поддерживают те же протоколы, которые используются для получения сообщений EDI.</span><span class="sxs-lookup"><span data-stu-id="d2f05-150">For sending EDI messages to trading partners, BizTalk Services supports the same protocols as those used for receiving EDI messages.</span></span>

<span data-ttu-id="d2f05-151">Далее в этом документе содержатся подробные указания по переносу некоторых артефактов EDI для BizTalk Server в службы BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-151">This document further provides conceptual guidance on migrating some of the different BizTalk Server EDI artifacts to BizTalk Services.</span></span>

## <a name="sendreceive-ports-to-trading-partners"></a><span data-ttu-id="d2f05-152">Порты отправки и получения для торговых партнеров</span><span class="sxs-lookup"><span data-stu-id="d2f05-152">Send/Receive Ports to Trading Partners</span></span>
<span data-ttu-id="d2f05-153">В BizTalk Server необходимо настроить местоположение приема и порт приема для приема сообщений EDI/XML от торговых партнеров, а также порты отправки для отправки сообщений EDI/XML торговому партнеру.</span><span class="sxs-lookup"><span data-stu-id="d2f05-153">In BizTalk Server you set up Receive Locations and Receive Ports to receive EDI/XML messages from trading partners, and you set up Send Ports to send EDI/XML messages to trading partner.</span></span> <span data-ttu-id="d2f05-154">Затем нужно связать эти порты с соглашением между торговыми партнерами с помощью консоли администрирования BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d2f05-154">You then tie up these ports to a trading partner agreement using the BizTalk Server Administration console.</span></span> <span data-ttu-id="d2f05-155">В службах BizTalk места получения сообщений от торговых партнеров и отправки сообщений торговым партнерам настраиваются как часть самого торгового соглашения (в составе Параметров передачи) на портале служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-155">In BizTalk Services, the locations where you receive messages from trading partners and where you send messages to trading partners are configured as part of the trading partner agreement itself (as part of Transport Settings) in the BizTalk Services Portal.</span></span>  <span data-ttu-id="d2f05-156">Поэтому в службах BizTalk «портов отправки» и «портов получения» как таковых нет.</span><span class="sxs-lookup"><span data-stu-id="d2f05-156">So you do not really have the concept of "send ports" and "receive locations", per se, in BizTalk Services.</span></span> <span data-ttu-id="d2f05-157">Дополнительные сведения см. в статье [Создание соглашений](https://msdn.microsoft.com/library/windowsazure/hh689908.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2f05-157">For more information, see [Creating Agreements](https://msdn.microsoft.com/library/windowsazure/hh689908.aspx).</span></span>

## <a name="pipelines-bridges"></a><span data-ttu-id="d2f05-158">Конвейеры (мосты)</span><span class="sxs-lookup"><span data-stu-id="d2f05-158">Pipelines (Bridges)</span></span>
<span data-ttu-id="d2f05-159">В EDI BizTalk Server конвейеры — это сущности для обработки сообщений, которые также могут включать настраиваемую логику для обработки определенных возможностей необходимых приложению.</span><span class="sxs-lookup"><span data-stu-id="d2f05-159">In BizTalk Server EDI, pipelines are message processing entities that can also include custom logic for specific processing capabilities, as required by the application.</span></span> <span data-ttu-id="d2f05-160">Их эквивалентом в службах BizTalk является мост EDI.</span><span class="sxs-lookup"><span data-stu-id="d2f05-160">For BizTalk Services, the equivalent would an EDI bridge.</span></span> <span data-ttu-id="d2f05-161">Однако в службах BizTalk мосты EDI пока «закрыты».</span><span class="sxs-lookup"><span data-stu-id="d2f05-161">However in BizTalk Services, for now, the EDI bridges are "closed".</span></span>  <span data-ttu-id="d2f05-162">То есть в мост EDI нельзя добавить собственные пользовательские действия.</span><span class="sxs-lookup"><span data-stu-id="d2f05-162">That is, you cannot add your own custom activities to an EDI bridge.</span></span> <span data-ttu-id="d2f05-163">Любая пользовательская обработка должна выполняться вне моста EDI в приложении, до или после поступления сообщения в мост, настроенный как часть соглашения между торговыми партнерами.</span><span class="sxs-lookup"><span data-stu-id="d2f05-163">Any custom processing must be done outside the EDI bridge in your application, either before or after the message enters the bridge configured as part of the Trading Partner agreement.</span></span> <span data-ttu-id="d2f05-164">Мосты EAI имеют возможность пользовательской обработки данных.</span><span class="sxs-lookup"><span data-stu-id="d2f05-164">EAI bridges have the option to do custom processing.</span></span> <span data-ttu-id="d2f05-165">Чтобы ей воспользоваться, необходимо воспользоваться мостом EAI до или после обработки сообщения мостом EDI.</span><span class="sxs-lookup"><span data-stu-id="d2f05-165">If you want custom processing, you can use EAI bridges before or after the message is processed by the EDI bridge.</span></span> <span data-ttu-id="d2f05-166">Дополнительные сведения см. в статье [Включение пользовательского кода в мостах](https://msdn.microsoft.com/library/azure/dn232389.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2f05-166">For more information, see [How to Include Custom Code in Bridges](https://msdn.microsoft.com/library/azure/dn232389.aspx).</span></span>

<span data-ttu-id="d2f05-167">Для обработки сообщения можно включить поток публикации или подписки с пользовательским кодом и/или использовать очереди сообщений и разделы служебной шины, до того как соглашение между торговыми партнерами получит сообщение или после того как соглашение обработает сообщение и направит его в конечную точку служебной шины.</span><span class="sxs-lookup"><span data-stu-id="d2f05-167">You can insert a publish/subscribe flow with custom code and/or using Service Bus messaging Queues and Topics before the trading partner agreement receives the message, or after the agreement processes the message and routes it to a Service Bus endpoint.</span></span>

<span data-ttu-id="d2f05-168">Шаблон потока сообщений описан в разделе **Сценарии и поток сообщений** этой статьи.</span><span class="sxs-lookup"><span data-stu-id="d2f05-168">See **Scenarios/Message Flow** in this topic for the message flow pattern.</span></span>

## <a name="agreements"></a><span data-ttu-id="d2f05-169">Соглашения</span><span class="sxs-lookup"><span data-stu-id="d2f05-169">Agreements</span></span>
<span data-ttu-id="d2f05-170">Если вы знакомы с соглашениями между торговыми партнерами в BizTalk Server 2010, используемыми для обработки сообщений EDI, то соглашения между торговыми партнерами в службах BizTalk покажутся очень знакомыми.</span><span class="sxs-lookup"><span data-stu-id="d2f05-170">If you are familiar with the BizTalk Server 2010 Trading Partner Agreements used for EDI processing, then BizTalk Services trading partner agreements look very familiar.</span></span> <span data-ttu-id="d2f05-171">Большинство параметров соглашения одинаковы и используют ту же терминологию.</span><span class="sxs-lookup"><span data-stu-id="d2f05-171">Most of the agreement settings are the same and use the same terminology.</span></span> <span data-ttu-id="d2f05-172">В некоторых случаях параметры соглашения в службах гораздо проще по сравнению с аналогичными параметрами в BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d2f05-172">In some cases, the agreement settings are much simpler compared to the same settings in BizTalk Server.</span></span> <span data-ttu-id="d2f05-173">Службы BizTalk Microsoft Azure поддерживают транспортные протоколы X12, EDIFACT и AS2.</span><span class="sxs-lookup"><span data-stu-id="d2f05-173">Microsoft Azure BizTalk Services supports X12, EDIFACT, and AS2 transport.</span></span>

<span data-ttu-id="d2f05-174">Службы BizTalk Microsoft Azure также предоставляют средство **переноса данных TPM** для переноса торговых партнеров и соглашений из модуля торговых партнеров BizTalk Server на портал служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-174">Microsoft Azure BizTalk Services also provides a **TPM Data Migration** tool to migrate trading partners and agreements from BizTalk Server Trading Partner module to BizTalk Services Portal.</span></span> <span data-ttu-id="d2f05-175">Средство переноса данных TPM доступно как часть пакета инструментов, который можно загрузить из [MABS SDK](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span><span class="sxs-lookup"><span data-stu-id="d2f05-175">The TPM Data Migration tool is available as part of a Tools package, which can be downloaded from the [MABS SDK](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span></span> <span data-ttu-id="d2f05-176">Пакет также содержит файл сведений с инструкциями по использованию средства и базовой информацией об устранении неполадок.</span><span class="sxs-lookup"><span data-stu-id="d2f05-176">The package also includes a readme that provides instructions on how to use the tool, and basic troubleshooting information for the tool.</span></span>

## <a name="schemas"></a><span data-ttu-id="d2f05-177">Схемы</span><span class="sxs-lookup"><span data-stu-id="d2f05-177">Schemas</span></span>
<span data-ttu-id="d2f05-178">Службы BizTalk предоставляют схемы EDI, которые можно использовать в решениях служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-178">BizTalk Services provides EDI schemas which can be used in BizTalk Services solutions.</span></span>  <span data-ttu-id="d2f05-179">Кроме того со службами BizTalk также могут использоваться схемы EDI для BizTalk Server, поскольку корневой узел схемы одинаков в EDI для BizTalk Server и для служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-179">In addition, BizTalk Server EDI schemas can also be used with BizTalk Services because the root node of the EDI schema is same across BizTalk Server as well as BizTalk Services.</span></span> <span data-ttu-id="d2f05-180">Таким образом, схемы EDI для BizTalk Server можно напрямую использовать в решениях EDI, разработанных с помощью служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-180">Thus, you will be able to directly take your BizTalk Server EDI schemas and use them in the EDI solutions that you develop using BizTalk Services.</span></span> <span data-ttu-id="d2f05-181">Схемы также можно загрузить из [MABS SDK](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span><span class="sxs-lookup"><span data-stu-id="d2f05-181">You can also download the schemas from the [MABS SDK](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span></span>

## <a name="maps-transforms"></a><span data-ttu-id="d2f05-182">Сопоставления (преобразования)</span><span class="sxs-lookup"><span data-stu-id="d2f05-182">Maps (Transforms)</span></span>
<span data-ttu-id="d2f05-183">Сопоставления в BizTalk Server называются преобразованиями в службах BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-183">Maps in BizTalk Server are called Transforms in BizTalk Services.</span></span> <span data-ttu-id="d2f05-184">Миграция сопоставлений из BizTalk Server в службы BizTalk может быть весьма сложной задачей (в зависимости от сложности сопоставления).</span><span class="sxs-lookup"><span data-stu-id="d2f05-184">Migrating maps from BizTalk Server to BizTalk Services could be one of the more complex tasks to achieve (depending on map complexity).</span></span> <span data-ttu-id="d2f05-185">Средство сопоставления для служб BizTalk отличается от модуля сопоставления для BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d2f05-185">The mapping tool used for BizTalk Services is different from the BizTalk mapper.</span></span> <span data-ttu-id="d2f05-186">Несмотря на то что модуль сопоставления очень похож на средство сопоставления, сам формат сопоставления отличается.</span><span class="sxs-lookup"><span data-stu-id="d2f05-186">Even though the mapper looks mostly the same, the underlying map format is different.</span></span> <span data-ttu-id="d2f05-187">Доступные пользователям функтоиды (называемые **операциями сопоставления** в службах BizTalk) также отличаются.</span><span class="sxs-lookup"><span data-stu-id="d2f05-187">The functoids (called **Map Operations** in BizTalk Services) available to the users are different as well.</span></span>  <span data-ttu-id="d2f05-188">По сути, напрямую сопоставление BizTalk в службах BizTalk использовать нельзя.</span><span class="sxs-lookup"><span data-stu-id="d2f05-188">In effect, you cannot directly use a BizTalk map in BizTalk Services.</span></span> <span data-ttu-id="d2f05-189">Кроме того, не все функтоиды в BizTalk Server доступны как операции сопоставления в службах BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-189">Also, not all the functoids available in BizTalk Server are available as map operations in BizTalk Services.</span></span>

### <a name="new-transform-operations"></a><span data-ttu-id="d2f05-190">Новые операции преобразования</span><span class="sxs-lookup"><span data-stu-id="d2f05-190">New Transform Operations</span></span>
<span data-ttu-id="d2f05-191">Хотя список доступных операций сопоставления преобразований в службах BizTalk может довольно сильно отличаться от списка в модуле сопоставления BizTalk Server, преобразования в службах BizTalk, по сути, выполняют те же задачи новыми способами.</span><span class="sxs-lookup"><span data-stu-id="d2f05-191">While the list of Transform map operations available may seem quite different from the BizTalk Server mapper, BizTalk Services Transforms have new ways of accomplishing the same tasks.</span></span> <span data-ttu-id="d2f05-192">Например, в преобразованиях служб BizTalk доступен **Список операций**.</span><span class="sxs-lookup"><span data-stu-id="d2f05-192">For example, BizTalk Services Transforms have **List Operations** available.</span></span> <span data-ttu-id="d2f05-193">В модуле сопоставления BizTalk этого списка не было.</span><span class="sxs-lookup"><span data-stu-id="d2f05-193">This was not available in the BizTalk mapper.</span></span>  <span data-ttu-id="d2f05-194">**Список операций** позволяет создавать и работать со списком, который представляет собой набор элементов (также называемых "строками"), и каждый элемент может иметь несколько членов (также называемых "столбцами").</span><span class="sxs-lookup"><span data-stu-id="d2f05-194">The **List Operations** enable you to create and operate on a "List", where a list is a set of items (also known as "rows") and where each item can have multiple members (also known as "columns").</span></span>  <span data-ttu-id="d2f05-195">Список можно сортировать, выбирать элементы по условию и т. д.</span><span class="sxs-lookup"><span data-stu-id="d2f05-195">You can sort the list, select items based on a condition, etc.</span></span>

<span data-ttu-id="d2f05-196">Еще один пример новой функциональности в преобразованиях служб BizTalk — **операции цикла**.</span><span class="sxs-lookup"><span data-stu-id="d2f05-196">Another example of new functionality in BizTalk Services Transforms are the **Loop Operations**.</span></span>  <span data-ttu-id="d2f05-197">В модуле сопоставления BizTalk Server сложно создавать вложенные циклы.</span><span class="sxs-lookup"><span data-stu-id="d2f05-197">It is difficult to create nested loops in the BizTalk Server mapper.</span></span>  <span data-ttu-id="d2f05-198">Таким образом, к преобразованиям служб BizTalk добавлены циклические операции с сопоставлениями.</span><span class="sxs-lookup"><span data-stu-id="d2f05-198">Thus, the Loop map operations are added for the BizTalk Services Transforms.</span></span>

<span data-ttu-id="d2f05-199">Еще один пример — оператор **If-Then-Else** для сопоставления.</span><span class="sxs-lookup"><span data-stu-id="d2f05-199">Yet another example is the **If-Then-Else** Expression map operation.</span></span>  <span data-ttu-id="d2f05-200">В модуле сопоставления BizTalk эта операция была невозможной и приходилось использовать несколько функтоидов для решения этой внешне простой задачи.</span><span class="sxs-lookup"><span data-stu-id="d2f05-200">Doing an if-then-else operation was possible in the BizTalk mapper, but it required multiple functoids to accomplish a seemingly simple task.</span></span>

### <a name="migrating-biztalk-server-maps"></a><span data-ttu-id="d2f05-201">Миграция сопоставлений BizTalk Server</span><span class="sxs-lookup"><span data-stu-id="d2f05-201">Migrating BizTalk Server Maps</span></span>
<span data-ttu-id="d2f05-202">Службы BizTalk Microsoft Azure предоставляют средства для переноса сопоставлений BizTalk Server в преобразования служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-202">Microsoft Azure BizTalk Services provides a tool to migrate BizTalk Server maps to BizTalk Services transforms.</span></span> <span data-ttu-id="d2f05-203">Инструмент **BTMMigrationTool** входит в пакет **Инструменты**, предоставляемый при [скачивании пакета SDK для служб BizTalk](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span><span class="sxs-lookup"><span data-stu-id="d2f05-203">The **BTMMigrationTool** is available as part of the **Tools** package provided with the [BizTalk Services SDK download](http://go.microsoft.com/fwlink/p/?LinkId=235057).</span></span> <span data-ttu-id="d2f05-204">Дополнительные сведения об этом средстве приведены в статье [Преобразование сопоставления BizTalk в преобразование служб BizTalk](https://msdn.microsoft.com/library/windowsazure/hh949812.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2f05-204">For more information about the tool, see [Convert a BizTalk map to a BizTalk Services Transform](https://msdn.microsoft.com/library/windowsazure/hh949812.aspx).</span></span>

<span data-ttu-id="d2f05-205">Кроме того, вы можете посмотреть на пример Сандро Перейры (Sandro Pereira), наиболее ценного специалиста Майкрософт, о [переносе сопоставлений BizTalk Server в службы BizTalk](http://social.technet.microsoft.com/wiki/contents/articles/23220.migrating-biztalk-server-maps-to-windows-azure-biztalk-services-wabs-maps.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2f05-205">You can also look at a sample by Sandro Pereira, BizTalk MVP, on how to [migrate BizTalk Server maps to BizTalk Services transforms](http://social.technet.microsoft.com/wiki/contents/articles/23220.migrating-biztalk-server-maps-to-windows-azure-biztalk-services-wabs-maps.aspx).</span></span>

## <a name="orchestrations"></a><span data-ttu-id="d2f05-206">Взаимодействия</span><span class="sxs-lookup"><span data-stu-id="d2f05-206">Orchestrations</span></span>
<span data-ttu-id="d2f05-207">Если нужно перенести обработку взаимодействий BizTalk Server в Microsoft Azure, то взаимодействия потребуется переписать, так как Microsoft Azure не поддерживает выполнение взаимодействий BizTalk Server.</span><span class="sxs-lookup"><span data-stu-id="d2f05-207">If you need to migrate BizTalk Server orchestration processing to Microsoft Azure, the orchestrations would need to be rewritten because Microsoft Azure does not support running BizTalk Server orchestrations.</span></span>  <span data-ttu-id="d2f05-208">Функциональность взаимодействий можно переписать в службе Windows Workflow Foundation 4.0 (WF4).</span><span class="sxs-lookup"><span data-stu-id="d2f05-208">You could rewrite the orchestration functionality in a Windows Workflow Foundation 4.0 (WF4) service.</span></span>  <span data-ttu-id="d2f05-209">Возможно, ее придется переписать полностью, так как на данный момент не существует возможности переноса взаимодействий из BizTalk Server в WF4.</span><span class="sxs-lookup"><span data-stu-id="d2f05-209">This would be a complete rewrite as there is currently no migration from BizTalk Server orchestrations to WF4.</span></span> <span data-ttu-id="d2f05-210">Ниже приведены некоторые ресурсы для Windows Workflow.</span><span class="sxs-lookup"><span data-stu-id="d2f05-210">Here are some resources for Windows Workflow:</span></span>

* <span data-ttu-id="d2f05-211">[*Интеграция службы WCF Workflow с очередями и разделами служебной шины*](https://msdn.microsoft.com/library/azure/hh709041.aspx) Паоло Сальватори (Paolo Salvatori).</span><span class="sxs-lookup"><span data-stu-id="d2f05-211">[*How to integrate a WCF Workflow Service with Service Bus Queues and Topics*](https://msdn.microsoft.com/library/azure/hh709041.aspx) by Paolo Salvatori.</span></span> 
* <span data-ttu-id="d2f05-212">[*Создание приложений с Windows Workflow Foundation и Azure*](http://go.microsoft.com/fwlink/p/?LinkId=237314) (выступление на конференции Build 2011).</span><span class="sxs-lookup"><span data-stu-id="d2f05-212">[*Building apps with Windows Workflow Foundation and Azure* session](http://go.microsoft.com/fwlink/p/?LinkId=237314) from the Build 2011 conference.</span></span>
* <span data-ttu-id="d2f05-213">[*Центр разработчиков Windows Workflow Foundation*](http://go.microsoft.com/fwlink/p/?LinkId=237315) в MSDN.</span><span class="sxs-lookup"><span data-stu-id="d2f05-213">[*Windows Workflow Foundation Developer Center*](http://go.microsoft.com/fwlink/p/?LinkId=237315) on MSDN.</span></span>
* <span data-ttu-id="d2f05-214">[*Документация по Windows Workflow Foundation 4 (WF4)*](https://msdn.microsoft.com/library/dd489441.aspx) в MSDN.</span><span class="sxs-lookup"><span data-stu-id="d2f05-214">[*Windows Workflow Foundation 4 (WF4) documentation*](https://msdn.microsoft.com/library/dd489441.aspx) on MSDN.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="d2f05-215">Дополнительные рекомендации</span><span class="sxs-lookup"><span data-stu-id="d2f05-215">Other Considerations</span></span>
<span data-ttu-id="d2f05-216">Ниже приведены некоторые рекомендации, которые необходимо учитывать при использовании служб BizTalk.</span><span class="sxs-lookup"><span data-stu-id="d2f05-216">Following are a few considerations that you must make while using BizTalk Services.</span></span>

### <a name="fallback-agreements"></a><span data-ttu-id="d2f05-217">Резервные соглашения</span><span class="sxs-lookup"><span data-stu-id="d2f05-217">Fallback Agreements</span></span>
<span data-ttu-id="d2f05-218">При обработке EDI в BizTalk Server используется концепция «Резервных соглашений».</span><span class="sxs-lookup"><span data-stu-id="d2f05-218">BizTalk Server EDI processing has the concept of "Fallback Agreements".</span></span>  <span data-ttu-id="d2f05-219">В службах BizTalk понятия резервных соглашений пока **нет**.</span><span class="sxs-lookup"><span data-stu-id="d2f05-219">BizTalk Services does **not** have a Fallback Agreement concept so far.</span></span>  <span data-ttu-id="d2f05-220">Сведения об использовании резервных соглашений в BizTalk Server см. в следующих разделах документации BizTalk: [Роль соглашений в обработке EDI](http://go.microsoft.com/fwlink/p/?LinkId=237317) и [Настройка свойств глобальных и резервных соглашений](https://msdn.microsoft.com/library/bb245981.aspx).</span><span class="sxs-lookup"><span data-stu-id="d2f05-220">See BizTalk documentation topics [The Role of Agreements in EDI Processing](http://go.microsoft.com/fwlink/p/?LinkId=237317) and [Configuring Global or Fallback Agreement Properties](https://msdn.microsoft.com/library/bb245981.aspx) for information on how Fallback Agreements are used in BizTalk Server.</span></span>

### <a name="routing-to-multiple-destinations"></a><span data-ttu-id="d2f05-221">Маршрутизация нескольким получателям</span><span class="sxs-lookup"><span data-stu-id="d2f05-221">Routing to multiple destinations</span></span>
<span data-ttu-id="d2f05-222">Мосты служб BizTalk на данный момент не поддерживают маршрутизацию сообщений нескольким получателям с использованием модели публикации-подписки.</span><span class="sxs-lookup"><span data-stu-id="d2f05-222">BizTalk Services bridges, in its current state does not support routing messages to multiple destinations using a publish-subscribe model.</span></span> <span data-ttu-id="d2f05-223">Вместо этого сообщения от моста служб BizTalk можно направить в раздел служебной шины, который может иметь несколько подписок для получения сообщения на нескольких конечных точках.</span><span class="sxs-lookup"><span data-stu-id="d2f05-223">Instead you could route messages from a BizTalk Services bridge to a Service Bus topic, which can then have multiple subscriptions to receive the message at more than one endpoint.</span></span>

## <a name="conclusion"></a><span data-ttu-id="d2f05-224">Заключение</span><span class="sxs-lookup"><span data-stu-id="d2f05-224">Conclusion</span></span>
<span data-ttu-id="d2f05-225">Службы BizTalk Microsoft Azure регулярно обновляются для добавления новых функций и возможностей.</span><span class="sxs-lookup"><span data-stu-id="d2f05-225">Microsoft Azure BizTalk Services is updated at regular milestones to add more features and capabilities.</span></span> <span data-ttu-id="d2f05-226">С каждым обновлением мы рассчитываем на увеличение функциональности для облегчения создания решений полного цикла с помощью служб BizTalk и других технологий Azure.</span><span class="sxs-lookup"><span data-stu-id="d2f05-226">With each update, we look forward to supporting increased functionality to facilitate creating end-to-end solutions using BizTalk Services and other Azure technologies.</span></span>

## <a name="see-also"></a><span data-ttu-id="d2f05-227">См. также</span><span class="sxs-lookup"><span data-stu-id="d2f05-227">See Also</span></span>
[<span data-ttu-id="d2f05-228">Разработка корпоративных приложений с Azure</span><span class="sxs-lookup"><span data-stu-id="d2f05-228">Developing Enterprise Applications with Azure</span></span>](https://msdn.microsoft.com/library/azure/hh674490.aspx)

[EDImessageflow]: ./media/biztalk-migrating-to-edi-guide/IC719455.png
