---
title: "Создание служб Azure BizTalk на портале Azure | Документы Майкрософт"
description: "Узнайте, как подготовить или создать службы Azure BizTalk на портале Azure; MABS, WABS"
services: biztalk-services
documentationcenter: 
author: MandiOhlinger
manager: anneta
editor: 
ms.assetid: 3ad18876-a649-40d6-9aa0-1509c1d62c43
ms.service: biztalk-services
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 11/07/2016
ms.author: mandia
ms.openlocfilehash: eca77b4a82eb67e1755717bb4429f8d450a64dc5
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="create-biztalk-services-using-the-azure-portal"></a>Создание служб BizTalk с помощью портала Azure

> [!INCLUDE [BizTalk Services is being retired, and replaced with Azure Logic Apps](../../includes/biztalk-services-retirement.md)]


> [!TIP]
> Для входа на портал Azure требуются учетная запись и подписка Azure. Если учетной записи нет, можно создать бесплатную пробную учетную запись всего за несколько минут. См. страницу [Бесплатная пробная версия Azure](http://go.microsoft.com/fwlink/p/?LinkID=239738).


## <a name="CreateService"></a>Создание службы BizTalk
В зависимости от выбранного выпуска вам могут быть доступны не все настройки службы BizTalk.

1. Войдите на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885).
2. В нижней области навигации выберите **Создать**:  
   ![Выбор кнопки "Создать"][NEWButton]
3. Выберите **Службы приложений** > **Служба BizTalk** > **Настраиваемое создание**:  
   ![Выбор элементов "Служба BizTalk" и "Настраиваемое создание"][NewBizTalkService]
4. Введите параметры службы BizTalk.
   
    <table border="1">
    <tr>
    <td><strong>Имя службы BizTalk</strong></td>
    <td>Можно ввести любое имя, но рекомендуется использовать конкретные имена. Некоторые примеры:<br/><br/>
    <em>mycompany</em>.biztalk.windows.net<br/>
    <em>mycompanymyapplication</em>.biztalk.windows.net<br/>
    <em>myapplication</em>.biztalk.windows.net<br/><br/>К введенному имени автоматически добавляется ".biztalk.windows.net". Таким образом, создается URL-адрес, используемый для доступа к вашей службе BizTalk, например <strong>https://<em>myapplication</em>.biztalk.windows.net</strong>.
    </td>
    </tr>
    <tr>
    <td><strong>Выпуск</strong></td>
    <td>На этапе тестирования или разработки выберите выпуск <strong>Developer</strong>. На этапе рабочего развертывания используйте статью <a HREF="http://go.microsoft.com/fwlink/p/?LinkID=302279">Службы BizTalk: диаграмма выпусков</a>, чтобы выбрать для своего бизнес-сценария оптимальный вариант: <strong>Premium</strong>, <strong>Standard</strong> или <strong>Basic</strong>.
    </td>
    </tr>
    <tr>
    <td><strong>Регион</strong></td>
    <td>Выберите географический регион для размещения службы BizTalk.</td>
    </tr>
    <tr>
    <td><strong>URL-адрес домена</strong></td>
    <td><strong>Необязательный</strong>. По умолчанию используется следующий URL-адрес домена: <em>YourBizTalkServiceName</em>.biztalk.windows.net. Можно также указать пользовательский домен. Например, если вы используете домен <em>contoso</em>, можно ввести следующее: <br/><br/>
    <em>MyCompany</em>.contoso.com<br/>
    <em>MyCompanyMyApplication</em>.contoso.com<br/>
    <em>MyApplication</em>.contoso.com<br/>
    <em>YourBizTalkServiceName</em>.contoso.com<br/>
    </td>
    </tr>
    </table>
Выберите стрелку ДАЛЕЕ.
5. Укажите параметры хранилища и базы данных.  <table border="1">
    <tr>
    <td><strong>Учетная запись хранения для мониторинга и архивации</strong></td>
    <td>Выберите существующую учетную запись хранения или параметр «Создать новую учетную запись хранения». <br/><br/>При создании учетной записи хранения введите <strong>Имя учетной записи хранения</strong>.</td>
    </tr>
    <tr>
    <td><strong>База данных отслеживания</strong></td>
    <td>Если используется существующая база данных SQL Azure, ее нельзя использовать в другой службе BizTalk. Потребуются имя и пароль для входа в систему, которые были указаны при создании сервера базы данных SQL Azure.<br/><br/><strong>СОВЕТ.</strong> Создайте базу данных отслеживания и учетную запись хранения для мониторинга и архивации в одном регионе службы BizTalk.</td>
    </tr>
    </table>
Выберите стрелку ДАЛЕЕ.
6. Введите параметры базы данных.  <table border="1">
    <tr>
    <td><strong>Имя</strong></td>
    <td>Параметр доступен в том случае, если на предыдущем экране был выбран параметр <strong>Создать экземпляр базы данных SQL</strong>.
    <br/><br/>
Введите имя базы данных SQL, которую будет использовать служба BizTalk.</td>
    </tr>
    <tr>
    <td><strong>Сервер</strong></td>
    <td>Параметр доступен в том случае, если на предыдущем экране был выбран параметр <strong>Создать экземпляр базы данных SQL</strong>.
    <br/><br/>
Выберите существующий сервер базы данных SQL или создайте новый.</td>
    </tr>
    <tr>
    <td><strong>Имя входа на сервер</strong></td>
    <td>Введите имя пользователя для входа в систему.</td>
    </tr>
    <tr>
    <td><strong>Пароль для входа на сервер</strong></td>
    <td>Введите пароль для входа.</td>
    </tr>
    <tr>
    <td><strong>Регион</strong></td>
    <td>Параметр доступен, если выбран параметр <strong>Создать экземпляр базы данных SQL</strong>. Выберите географический регион для размещения вашей базы данных SQL.</td>
    </tr>
    </table>

Установите флажок для завершения работы мастера. Появится значок хода выполнения:   
![Значок хода выполнения, отображаемый при завершении процесса][ProgressComplete]

После завершения этого шага служба BizTalk Azure будет создана и готова к использованию в приложениях. Параметров по умолчанию достаточно. Если вы хотите изменить параметры по умолчанию, в левой области навигации выберите **СЛУЖБЫ BIZTALK** , а затем необходимую службу BizTalk. Дополнительные параметры отображаются вверху [на вкладках "Панель мониторинга", "Монитор" и "Масштаб"](biztalk-dashboard-monitor-scale-tabs.md) .

В зависимости от состояния службы BizTalk некоторые операции завершить невозможно. Список этих операций см. в статье [Диаграмма состояния службы BizTalk](biztalk-service-state-chart.md).

## <a name="post-provisioning-steps"></a>Действия после подготовки
* [Установка сертификата на локальном компьютере](#InstallCert)
* [Добавление готового сертификата для рабочей среды](#AddCert)
* [Извлечение пространства имен контроля доступа](#ACS)

#### <a name="InstallCert"></a>Установка сертификата на локальном компьютере
На этапе подготовки службы BizTalk создается самозаверяющий сертификат, который связывается с вашей подпиской службы BizTalk. Этот сертификат необходимо загрузить и установить на компьютерах, используемых для развертывания приложений службы BizTalk или отправки сообщений в конечную точку службы BizTalk.

1. Войдите на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885).
2. В левой области навигации выберите **Службы BizTalk** , а затем выберите подписку службы BizTalk.
3. Перейдите на вкладку **Панель мониторинга** .
4. Выберите **Загрузить SSL-сертификат**:  
   ![Изменение SSL-сертификата][QuickGlance]
5. Дважды щелкните кнопкой мыши по сертификату и выполните все инструкции мастера, чтобы завершить установку. Убедитесь, что сертификат устанавливается в **Хранилище корневых центров сертификации пользователей** .

#### <a name="AddCert"></a>Добавление готового сертификата для рабочей среды
Самозаверяющий сертификат, созданный автоматически при создании служб BizTalk, предназначен исключительно для использования в среде разработки. Для выполнения рабочих сценариев замените его готовым сертификатом для рабочей среды.

1. На вкладке **Панель мониторинга** выберите **Обновить SSL-сертификат**.
2. Перейдите к своему закрытому SSL-сертификату (*имя_сертификата*.pfx), который содержит имя службы BizTalk, введите пароль и щелкните значок галочки.

#### <a name="ACS"></a>Извлечение пространства имен контроля доступа
1. Войдите на [портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885).
2. В левой области навигации щелкните **СЛУЖБЫ BIZTALK** , а затем выберите свою службу BizTalk.
3. На панели задач выберите **Сведения о подключении**:  
   ![Выбор элемента "Сведения о подключении"][ACSConnectInfo]
4. Скопируйте значения Access Control.

Это пространство имен Access Control вводится при развертывании проекта службы BizTalk из Visual Studio. Пространство имен Access Control создается автоматически для вашей службы BizTalk.

Значения Access Control можно использовать в любом приложении. При создании служб BizTalk это пространство имен Access Control управляет проверкой подлинности при развертывании службы BizTalk. Для изменения подписки или управления пространством имен выберите **ACTIVE DIRECTORY** в левой области навигации, а затем выберите ваше пространство имен. Параметры перечислены на панели задач.

Если щелкнуть **Управление** , откроется портал управления доступом. На портале управления службы контроля доступа служба BizTalk использует **идентификаторы службы**:  
![Идентификаторы службы ACS на портале управления доступом][ACSServiceIdentities]

Идентификатор службы Access Control — это набор учетных данных, позволяющих приложениям или клиентам проходить проверку подлинности непосредственно в службе Access Control и получать токен.

> [!IMPORTANT]
> Служба BizTalk использует значение **Владелец** в качестве идентификатора службы по умолчанию и значение **Пароль**. Если вместо значения пароля используется значение симметричного ключа, может возникнуть следующая ошибка:<br/><br/>*Could not connect to the Access Control Management Service account with the specified credentials*
> 
> 

[Управление пространством имен ACS](https://msdn.microsoft.com/library/azure/hh674478.aspx) приведены некоторые правила и рекомендации.

## <a name="requirements-explained"></a>Пояснение требований
Эти требования не применяются к выпуску Free Edition.

<table border="1">
<tr bgcolor="FAF9F9">
        <td><strong>Необходимые элементы</strong></td>
        <td><strong>Их назначение</strong></td>
</tr>
<tr>
<td>Подписка Azure.</td>
<td>Подписка определяет, кто может входить на портал Azure. Владелец учетной записи создает подписку на странице <a HREF="https://account.windowsazure.com/Subscriptions">подписок Azure</a>.
<br/><br/>
В учетную запись Azure может входить несколько подписок, и ею могут управлять все пользователи, у которых есть соответствующие права. Например, владелец учетной записи Azure создает подписку с именем <em>BizTalkServiceSubscription</em> и предоставляет администраторам BizTalk в компании (например, ContosoBTSAdmins@live.com) доступ к этой подписке. В этом сценарии администраторы BizTalk входят на портал Azure с полными правами администратора на все размещенные службы в подписке, в том числе службы BizTalk Azure. Администраторы BizTalk не являются владельцами учетной записи Azure и, следовательно, не имеют доступа к каким-либо данным для выставления счетов.
<br/><br/>Дополнительные сведения см. в статье 
<a HREF="http://go.microsoft.com/fwlink/p/?LinkID=267577">Использование назначений ролей для управления доступом к ресурсам в подписке Azure</a>.
</td>
</tr>
<tr>
<td>База данных SQL Azure</td>
<td>Здесь хранятся таблицы, представления, хранимые процедуры и данные отслеживания, используемые службой BizTalk.
<br/><br/>
При создании службы BizTalk можно использовать существующий сервер SQL Server Azure, базу данных SQL Azure или автоматически создать новый сервер или базу данных.
<br/><br/>
Масштаб базы данных SQL настраивается автоматически. Обычно для службы BizTalk достаточно масштаба по умолчанию. Изменение масштаба может повлиять на цену. См. статью о <a HREF="http://go.microsoft.com/fwlink/p/?LinkID=234930">стоимости услуг Azure</a>
.<br/><br/>
<strong>Примечания</strong>
<br/>
<ul>
<li> При создании нового сервера SQL Server и базы данных Azure автоматически включаются службы Azure. Для работы службы BizTalk необходимо, чтобы службы Azure были включены.</li>
<li>При создании новой базы данных SQL Azure на существующем сервере SQL Server Azure правила брандмауэра сервера не изменяются. В результате другие службы Azure могут не получить доступа к базам данных сервера.</li>
</ul>
</td>
</tr>
<tr>
<td>Пространство имен Azure Access Control</td>
<td>Выполняет проверку подлинности с помощью служб BizTalk Azure. Это пространство имен Access Control вводится при развертывании проекта службы BizTalk из Visual Studio. Пространство имен контроля доступа создается автоматически при создании службы BizTalk.</td>
</tr>

<tr>
<td>Учетная запись хранения Azure</td>
<td>Предоставляет доступ к таблицам, BLOB-объектам и очередям, используемым службой BizTalk, для сохранения следующих элементов:

<ul>
<li>Файлы журналов, в которых отслеживается работа службы BizTalk. Выходные данные мониторинга отображаются также на вкладке **Мониторинг** на портале Azure.</li>
<li>При создании соглашения X12 или AS2 между партнерами можно включить функцию архивирования для сохранения свойств сообщений. Эти данные сохраняются в учетной записи хранения.</li>
</ul>
<br/>
При создании службы BizTalk можно использовать существующую или автоматически созданную новую учетную запись хранения.
<br/><br/>
Службе BizTalk достаточно параметров хранилища по умолчанию.
<br/><br/>
При создании учетной записи хранения автоматически создаются первичный ключ и вторичный ключ. Эти ключи позволяют управлять доступом к учетной записи хранения. Служба BizTalk автоматически использует первичный ключ.
<br/><br/>
Дополнительные сведения см. в статье <a HREF="http://go.microsoft.com/fwlink/p/?LinkID=285671">Хранилище</a>.
</td>
</tr>

<tr>
<td>Закрытый сертификат SSL</td>
<td>
При создании службы BizTalk Azure также создается URL-адрес HTTPS-узла, включающий имя службы BizTalk. Этот URL-адрес автоматически конфигурируется для использования самозаверяющего сертификата исключительно для разработки. На рабочем этапе вам потребуется личный SSL-сертификат.
<br/><br/>
<strong>Важные сведения об SSL-сертификате</strong>

<ul>
<li>Сертификат должен иметь срок действия менее 5 лет.</li>
<li>Все личные сертификаты требуют наличия пароля. Запомните этот пароль, а также сообщите его вашим администраторам.</li>
<li>Самозаверяющие сертификаты используются в средах разработки/тестирования. При использовании самозаверяющих сертификатов импортируйте сертификат в хранилище личных сертификатов и хранилище доверенных корневых центров сертификации пользователей.</li>
</ul>
<br/>При отправке центру сертификации запроса на сертификат для рабочей среды укажите следующие свойства сертификата:
<br/>

<ul>
<li><strong>Расширенное использование ключа.</strong> Службы BizTalk Azure требуют как минимум проверки подлинности сервера.</li>
<li><strong>Общее имя.</strong> Введите полное доменное имя (FQDN) URL-адреса службы BizTalk Azure. См. раздел <a HREF="#CreateService">Создание службы BizTalk</a> в этой статье.</li>
</ul>
<br/>
По окончании создания службы BizTalk можно добавить новый или имеющийся сертификат.
</td>
</tr>
</table>
<!---Loc Comment: Please, check link [Create a BizTalk Service] since it is not redirecting to any location.--->



## <a name="hybrid-connections"></a>через гибридные подключения
При создании службы BizTalk Azure становится доступной вкладка **Гибридные подключения** :

![вкладка "Гибридные подключения"][HybridConnectionTab]

Гибридные подключения используются для подключения веб-сайта Azure или мобильной службы Azure к любому локальному ресурсу, использующему статический TCP-порт, например SQL Server, MySQL, веб-интерфейсы API HTTP, мобильные службы и большинство настраиваемых веб-служб.  Гибридные соединения и службы адаптера BizTalk — это не одно и то же. Служба адаптера BizTalk используется для подключения служб BizTalk Azure к локальной бизнес-системе.

 Дополнительные сведения, в том числе о создании гибридных подключений и управлении ими, см. в статье [Гибридные подключения](integration-hybrid-connection-overview.md).

## <a name="next-steps"></a>Дальнейшие действия
После создания службы BizTalk ознакомьтесь со статьей [Службы BizTalk: вкладки «Панель мониторинга», «Монитор» и «Масштаб»](biztalk-dashboard-monitor-scale-tabs.md). Служба BizTalk готова для использования в приложениях. Чтобы приступить к созданию приложений, перейдите по ссылке [Службы BizTalk Azure](http://go.microsoft.com/fwlink/p/?LinkID=235197).

## <a name="see-also"></a>Дополнительные материалы
* [Службы BizTalk: диаграмма выпусков](biztalk-editions-feature-chart.md)<br/>
* [Службы BizTalk: диаграмма состояния](biztalk-service-state-chart.md)<br/>
* [Службы BizTalk: резервное копирование и восстановление](biztalk-backup-restore.md)<br/>
* [Службы BizTalk: регулирование](biztalk-throttling-thresholds.md)<br/>
* [Службы BizTalk: имя и ключ издателя](biztalk-issuer-name-issuer-key.md)<br/>
* [Как приступить к работе с пакетом SDK для служб BizTalk Azure](http://go.microsoft.com/fwlink/p/?LinkID=302335)<br/>
* [гибридных подключений](integration-hybrid-connection-overview.md)

[NewBizTalkService]: ./media/biztalk-provision-services/WABS_NewBizTalkService.png
[NEWButton]: ./media/biztalk-provision-services/WABS_New.png
[ProgressComplete]: ./media/biztalk-provision-services/WABS_ProgressComplete.png
[ACSConnectInfo]: ./media/biztalk-provision-services/WABS_ACSConnectInformation.png
[QuickGlance]: ./media/biztalk-provision-services/WABS_QuickGlance.png
[ACSServiceIdentities]: ./media/biztalk-provision-services/WABS_ACSServiceIdentities.png
[HybridConnectionTab]: ./media/biztalk-provision-services/WABS_HybridConnectionTab.png
