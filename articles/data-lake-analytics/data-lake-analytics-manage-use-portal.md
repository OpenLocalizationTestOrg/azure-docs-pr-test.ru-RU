---
title: "Управление Azure Data Lake Analytics с помощью портала Azure | Документация Майкрософт"
description: "Узнайте, как управлять учетными записями аналитики озера данных, источниками данных, пользователями и заданиями."
services: data-lake-analytics
documentationcenter: 
author: saveenr
manager: jhubbard
editor: cgronlun
ms.assetid: a0e045f1-73d6-427f-868d-7b55c10f811b
ms.service: data-lake-analytics
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 12/05/2016
ms.author: edmaca
ms.openlocfilehash: e49d1a0e0ccc6567d0a6841817667717ff5dba76
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="manage-azure-data-lake-analytics-by-using-the-azure-portal"></a>Управление Azure Data Lake Analytics с помощью портала Azure
[!INCLUDE [manage-selector](../../includes/data-lake-analytics-selector-manage.md)]

Узнайте, как управлять учетными записями, источниками данных учетной записи, пользователями и заданиями Azure Data Lake Analytics с помощью портала Azure. Для просмотра разделов, посвященных управлению с помощью других инструментов, воспользуйтесь вкладкой вверху страницы.

<!-- ################################ -->
<!-- ################################ -->

## <a name="manage-data-lake-analytics-accounts"></a>Управление учетными записями Data Lake Analytics

### <a name="create-an-account"></a>Создание учетной записи

1. Войдите на [портал Azure](https://portal.azure.com).
2. Щелкните **Создать** > **Аналитика** > **Data Lake Analytics**.
3. Выберите значения для следующих параметров: 
   1. **Имя**: имя учетной записи Data Lake Analytics.
   2. **Подписка**: подписка Azure, которая используется для учетной записи.
   3. **Группа ресурсов**: группа ресурсов Azure, в которой создается учетная запись. 
   4. **Расположение**: центр обработки данных Azure для учетной записи Data Lake Analytics. 
   5. **Data Lake Store**: хранилище по умолчанию для учетной записи Data Lake Analytics. Учетная запись Azure Data Lake Store и учетная запись Data Lake Analytics должны находиться в одном расположении.
4. Щелкните **Создать**. 

### <a name="delete-a-data-lake-analytics-account"></a>Удаление учетной записи Data Lake Analytics

Перед удалением учетной записи Data Lake Analytics необходимо удалить учетную запись Data Lake Store по умолчанию.

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Нажмите кнопку **Delete**(Удалить).
3. Введите имя учетной записи.
4. Нажмите кнопку **Delete**(Удалить).

<!-- ################################ -->
<!-- ################################ -->

## <a name="manage-data-sources"></a>Управление источниками данных

Data Lake Analytics в настоящее время поддерживает следующие источники данных:

* Data Lake Store
* Хранилище Azure

Вы можете использовать обозреватель данных для просмотра источников данных и выполнения основных операций управления файлами. 

### <a name="add-a-data-source"></a>Добавление источника данных

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Источники данных**.
3. Щелкните **Добавить источник данных**.
    
   * Чтобы добавить учетную запись Data Lake Store, требуется имя учетной записи и доступ к учетной записи, чтобы отправить ей запрос.
   * Чтобы добавить хранилище BLOB-объектов Azure, требуется учетная запись хранения и ключ учетной записи. Чтобы найти их, перейдите к учетной записи хранения на портале.

## <a name="set-up-firewall-rules"></a>Настройка правил брандмауэра

Data Lake Analytics позволяет дополнительно блокировать доступ к учетной записи Data Lake Analytics на уровне сети. Вы можете включить брандмауэр, указать IP-адрес или определить диапазон IP-адресов для доверенных клиентов. После этого к хранилищу смогут подключаться только клиенты с IP-адресами из определенного диапазона.

Если другие службы Azure, например Azure Data Factory или виртуальные машины, будут подключаться к учетной записи Data Lake Analytics, убедитесь, что для параметра **Разрешить использование служб Azure** установлено значение **Вкл**. 

### <a name="set-up-a-firewall-rule"></a>Настройка правила брандмауэра.

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. В меню слева щелкните **Брандмауэр**.

## <a name="add-a-new-user"></a>Добавление нового пользователя

Чтобы быстро подготовить новых пользователей Data Lake, используйте **мастер добавления пользователей**.

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. В левой части экрана в разделе **Приступая к работе** щелкните **Мастер добавления пользователей**.
3. Выберите пользователя и нажмите кнопку **Выбрать**.
4. Выберите роль и нажмите кнопку **Выбрать**. Чтобы добавить нового разработчика в Azure Data Lake, выберите роль **Разработчик Data Lake Analytics**.
5. Выберите списки управления доступом для баз данных U-SQL. Когда нужные параметры настроены, нажмите кнопку **Выбрать**.
6. Выберите списки управления доступом для файлов. Чтобы использовать хранилище по умолчанию, не изменяйте списки управления доступом для корневой папки "/" и для папки /system. Нажмите кнопку **Выбрать**.
7. Просмотрите выбранные изменения и нажмите кнопку **Выполнить**.
8. После завершения работы мастера нажмите кнопку **Готово**.

## <a name="manage-role-based-access-control"></a>Управление доступом на основе ролей

Подобно другим службам Azure, можно использовать управление доступом на основе ролей (RBAC), чтобы управлять взаимодействием пользователей со службой.

Стандартные роли RBAC имеют следующие возможности:
* **Владелец**: может отправлять и отслеживать задания, отменять задания от любого пользователя, а также настраивать учетные записи.
* **Участник**: может отправлять и отслеживать задания, отменять задания для любого пользователя, а также настраивать учетные записи.
* **Читатель**: может отслеживать задания.

Чтобы предоставить разработчикам доступ к U-SQL для использования службы Data Lake Analytics, используйте роль "Разработчик Data Lake Analytics". Роль "Разработчик Data Lake Analytics" можно использовать для:
* отправки заданий;
* отслеживания состояния и хода выполнения отправленных пользователями заданий;
* просмотра скриптов U-SQL в отправленных пользователями заданиях;
* отмены собственных заданий.

### <a name="add-users-or-security-groups-to-a-data-lake-analytics-account"></a>Добавление пользователей или групп безопасности к учетной записи Data Lake Analytics

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Управление доступом (IAM)** > **Добавить**.
3. Выберите роль.
4. Добавьте пользователя.
5. Нажмите кнопку **ОК**.

>[!NOTE]
>Если пользователю или группе безопасности требуется отправлять задания, они также должны иметь разрешение в учетной записи хранения. Дополнительные сведения см. в статье [Защита данных, хранимых в Azure Data Lake Store](../data-lake-store/data-lake-store-secure-data.md).
>

<!-- ################################ -->
<!-- ################################ -->

## <a name="manage-jobs"></a>Управление заданиями

### <a name="submit-a-job"></a>Отправка задания

1. На портале Azure выберите свою учетную запись Data Lake Analytics.

2. Нажмите кнопку **Создать задание**. Настройте для каждого задания:

    1. **Имя задания**: имя задания.
    2. **Приоритет**: чем меньше число, тем выше приоритет. Если два задания поставлены в очередь, первым выполняется задание с более низким приоритетом.
    3. **Параллелизм**: максимальное число вычислительных процессов, зарезервированных для этого задания.

3. Щелкните **Отправить задание**.

### <a name="monitor-jobs"></a>Мониторинг заданий

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Просмотр всех заданий**. Отобразится список всех активных и недавно завершенных заданий в учетной записи.
3. При необходимости щелкните **Фильтр** для поиска заданий по значениям **Диапазон времени**, **Имя задания** и **Автор**. 

### <a name="monitoring-pipeline-jobs"></a>Отслеживание заданий конвейера
Задания конвейера определенного сценария выполнятся совместно в последовательном порядке. Например, вы можете иметь конвейер, который очищает, извлекает, преобразует и содержит статистические данные, используемые при работе с клиентами. Задания конвейера определяются с помощью свойства Pipeline при отправке задания. В заданиях, запланированных с помощью ADF V2, эти свойства заполняются автоматически. 

Чтобы просмотреть список заданий U-SQL конвейера, сделайте следующее: 

1. На портале Azure перейдите к своим учетным записям Data Lake Analytics.
2. Выберите **Подробные сведения о заданиях**. По умолчанию на вкладке "Все задания" можно просмотреть список выполняющихся и завершенных заданий, а также заданий, поставленных в очередь.
3. Перейдите на вкладку **Задания конвейера**. Список заданий конвейера будет отображаться со сводными статистическими данными по каждому конвейеру.

### <a name="monitoring-recurring-jobs"></a>Отслеживание повторяющихся заданий
Повторяющиеся задания — это задания, которые имеют одинаковую бизнес-логику, но используют разные входные данные при каждом запуске. В идеале повторяющиеся задания должны всегда выполняться успешно и иметь относительно стабильное время выполнения. Отслеживание этого поведения поможет обеспечить работоспособность задания. Повторяющиеся задания определяются с помощью свойства Recurrence. В заданиях, запланированных с помощью ADF V2, эти свойства заполняются автоматически.

Чтобы просмотреть список повторяющихся заданий U-SQL, сделайте следующее: 

1. На портале Azure перейдите к своим учетным записям Data Lake Analytics.
2. Выберите **Подробные сведения о заданиях**. По умолчанию на вкладке "Все задания" можно просмотреть список выполняющихся и завершенных заданий, а также заданий, поставленных в очередь.
3. Откройте вкладку **Повторяющиеся задания**. Список повторяющихся заданий будет отображаться со сводными статистическими данными по повторяющемуся заданию.

## <a name="manage-policies"></a>Управление политиками

### <a name="account-level-policies"></a>Политики на уровне учетной записи

Эти политики применяются для всех заданий в учетной записи Data Lake Analytics.

#### <a name="maximum-number-of-aus-in-a-data-lake-analytics-account"></a>Максимальное число единиц использования аналитики в учетной записи Data Lake Analytics
Общее число единиц использования аналитики (AU), которые может использовать учетная запись Data Lake Analytics, контролируется политикой. По умолчанию установлено значение 250. Например, если это значение равно 250 единицам, можно выполнять одно задание с 250 единицами или 10 заданий с 25 единицами. Дополнительные задания, которые передаются, помещаются в очередь до завершения выполняющихся заданий. После завершения выполняющихся заданий единицы использования аналитики освобождаются и могут использоваться для выполнения заданий в очереди.

Чтобы изменить количество единиц использования аналитики для вашей учетной записи Data Lake Analytics, выполните следующее:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Максимум единиц аналитики (AU) на задание** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле. 
4. Щелкните **Сохранить**.

> [!NOTE]
> Если требуется больше единиц использования аналитики, чем значение по умолчанию (250), на портале щелкните **Справка и поддержка**, чтобы отправить запрос в службу технической поддержки. Количество единиц использования аналитики, доступных в вашей учетной записи Data Lake Analytics, можно увеличить.
>

#### <a name="maximum-number-of-jobs-that-can-run-simultaneously"></a>Максимальное количество одновременно выполняемых заданий
Политика определяет количество заданий, которые могут выполняться одновременно. По умолчанию установлено значение 20. Если в вашей учетной записи Data Lake Analytics есть доступные единицы использования аналитики, новые задания будут запускаться немедленно до тех пор, пока общее количество выполняемых заданий не достигнет значения этой политики. По достижении максимального количества одновременно выполняемых заданий, последующие задания помещаются в очередь в порядке приоритета, пока не будет завершено одно или несколько запущенных заданий (в зависимости от доступности единиц использования аналитики).

Чтобы изменить количество одновременно выполняемых заданий:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Максимальное число выполняемых заданий** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле. 
4. Щелкните **Сохранить**.

> [!NOTE]
> Если требуется запустить больше заданий, чем значение по умолчанию (20), на портале щелкните **Справка и поддержка**, чтобы отправить запрос в службу технической поддержки. Количество одновременно выполняемых заданий, доступных в вашей учетной записи Data Lake Analytics, можно увеличить.
>

#### <a name="how-long-to-keep-job-metadata-and-resources"></a>Как долго следует хранить метаданные и ресурсы задания 
При запуске заданий U-SQL служба Data Lake Analytics сохраняет все связанные файлы. Связанные файлы включают в себя скрипт U-SQL, DLL-файлы, на которые ссылается скрипт U-SQL, скомпилированные ресурсы и статистику. Файлы находятся в папке /system/ учетной записи Azure Data Lake Storage по умолчанию. Эта политика определяет, как долго хранятся эти ресурсы, прежде чем они будут удалены автоматически (по умолчанию — 30 дней). Эти файлы можно использовать для отладки, а также для настройки производительности заданий, которые будут повторно выполнятся в будущем.

Чтобы изменить срок хранения метаданных и ресурсов задания:

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Срок хранения запросов заданий в днях** передвиньте ползунок, чтобы выбрать значение, или введите значение в текстовом поле.  
4. Щелкните **Сохранить**.

### <a name="job-level-policies"></a>Политики на уровне задания
С помощью политик на уровне задания можно управлять максимальным количеством единиц использования аналитики и максимальным приоритетом, который отдельные пользователи (или участники групп безопасности) могут устанавливать в заданиях, которые они отправляют. Это позволит контролировать затраты, которые несут пользователи. Политики также позволяют контролировать эффект, который запланированные задания могу оказать на рабочие задания с высоким приоритетом, запущенные в одной учетной записи Data Lake Analytics.

Служба Data Lake Analytics имеет две политики, которые могут быть установлены на уровне задания.

* **Ограничение единиц использования аналитики для задания**: пользователи могут отправлять только те задания, которые содержат это число единиц использования аналитики. По умолчанию это ограничение аналогично максимальному значению единиц использования аналитики для учетной записи.
* **Приоритет**: пользователи могут отправлять только те задания, приоритет которых меньше или равен этому значению. Обратите внимание, что большее значение означает более низкий приоритет. По умолчанию устанавливается значение 1, которое означает максимально возможный приоритет.

Для каждой учетной записи назначается политика по умолчанию. Она применяется ко всем пользователям учетной записи. Можно установить дополнительные политики для отдельных пользователей и групп. 

> [!NOTE]
> Политики на уровне учетной записи и политики на уровне задания применяются одновременно.
>

#### <a name="add-a-policy-for-a-specific-user-or-group"></a>Добавление политики для конкретного пользователя или группы

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Пределы отправки заданий** нажмите кнопку **Добавить политику**. Затем выберите или введите следующие параметры.
    1. **Имя политики вычислений**: введите имя политики для напоминания о назначении политики.
    2. **Выберите пользователя или группу**: выберите пользователя или группу, к которым будет применяться эта политика.
    3. **Задайте предел AU для задания**: установите предел единиц использования аналитики, который будет применяться для выбранного пользователя или группы.
    4. **Set the Priority Limit** (Задайте предел приоритета): установите предел приоритета, который будет применяться для выбранного пользователя или группы.

4. Нажмите кнопку **ОК**.

5. Новая политика отобразится в таблице политик **По умолчанию** в разделе **Пределы отправки заданий**. 

#### <a name="delete-or-edit-an-existing-policy"></a>Удаление или изменение существующей политики

1. На портале Azure выберите свою учетную запись Data Lake Analytics.
2. Щелкните **Свойства**.
3. В разделе **Пределы отправки заданий** найдите политику, которую требуется изменить.
4.  Чтобы увидеть параметры **Удалить** и **Изменить**, в правом столбце таблицы щелкните **…**.

### <a name="additional-resources-for-job-policies"></a>Дополнительные ресурсы политики заданий
* [Запись блога с обзором политик](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-overview/)
* [Запись блога о политиках на уровне учетной записи](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-account-level-policy/)
* [Запись блога о политиках на уровне задания](https://blogs.msdn.microsoft.com/azuredatalake/2017/06/08/managing-your-azure-data-lake-analytics-compute-resources-job-level-policy/)

## <a name="next-steps"></a>Дальнейшие действия

* [Обзор аналитики озера данных Microsoft Azure](data-lake-analytics-overview.md)
* [Начало работы с Azure Data Lake Analytics с помощью портала Azure](data-lake-analytics-get-started-portal.md)
* [Управление Azure Data Lake Analytics с помощью Azure PowerShell](data-lake-analytics-manage-use-powershell.md)

