---
title: "Как управлять конфигурациями и профилями службы | Документация Майкрософт"
description: "Узнайте, как работать с файлами конфигурации службы и файлами профилей, в которых хранятся параметры для сред развертывания и параметры публикации для облачных служб."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 7da8c551-fb06-4057-b5c7-c77f4b39d803
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 8/11/2017
ms.author: kraigb
ms.openlocfilehash: af1205f8c3e477d123d4835c80a68b3afd6ee5ad
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="how-to-manage-service-configurations-and-profiles"></a><span data-ttu-id="e594b-103">Управление конфигурациями и профилями службы</span><span class="sxs-lookup"><span data-stu-id="e594b-103">How to manage service configurations and profiles</span></span>
## <a name="overview"></a><span data-ttu-id="e594b-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="e594b-104">Overview</span></span>
<span data-ttu-id="e594b-105">При публикации облачной службы Visual Studio сохраняет сведения о конфигурации в файлах конфигурации двух видов: конфигурациях службы и профилях.</span><span class="sxs-lookup"><span data-stu-id="e594b-105">When you publish a cloud service, Visual Studio stores configuration information in two kinds of configuration files: service configurations and profiles.</span></span> <span data-ttu-id="e594b-106">Конфигурации службы (CSCFG-файлы) содержат параметры для сред развертывания облачной службы Azure.</span><span class="sxs-lookup"><span data-stu-id="e594b-106">Service configurations (.cscfg files) store settings for the deployment environments for an Azure cloud service.</span></span> <span data-ttu-id="e594b-107">Azure использует эти файлы конфигурации при управлении облачными службами.</span><span class="sxs-lookup"><span data-stu-id="e594b-107">Azure uses these configuration files when it manages your cloud services.</span></span> <span data-ttu-id="e594b-108">В свою очередь, профили (файлы AZUREPUBXML) содержат параметры публикации для облачных служб.</span><span class="sxs-lookup"><span data-stu-id="e594b-108">On the other hand, profiles (.azurePubxml files) store publish settings for cloud services.</span></span> <span data-ttu-id="e594b-109">Эти параметры являются отражением конфигурации, выбранной при использовании мастера публикации, и используются локально в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e594b-109">These settings are a record of what you choose when you use the publish wizard, and are used locally by Visual Studio.</span></span> <span data-ttu-id="e594b-110">В этой статье объясняется, как работать с файлами конфигурации обоих типов.</span><span class="sxs-lookup"><span data-stu-id="e594b-110">This topic explains how to work with both types of configuration files.</span></span>

## <a name="service-configurations"></a><span data-ttu-id="e594b-111">Конфигурации службы</span><span class="sxs-lookup"><span data-stu-id="e594b-111">Service Configurations</span></span>
<span data-ttu-id="e594b-112">Вы можете создать несколько конфигураций службы для каждой из своих сред развертывания.</span><span class="sxs-lookup"><span data-stu-id="e594b-112">You can create multiple service configurations to use for each of your deployment environments.</span></span> <span data-ttu-id="e594b-113">Например, вы можете создать одну конфигурацию службы для локальной среды, в которой запускаете и тестируете приложения Azure, а другую — для рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="e594b-113">For example, you might create a service configuration for the local environment that you use to run and test an Azure application and another service configuration for your production environment.</span></span>

<span data-ttu-id="e594b-114">Вы можете добавлять, удалять, переименовывать и изменять конфигурации служб по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="e594b-114">You can add, delete, rename, and modify these service configurations based on your requirements.</span></span> <span data-ttu-id="e594b-115">Конфигурациями служб можно управлять из Visual Studio, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e594b-115">You can manage these service configurations from Visual Studio, as shown in the following illustration.</span></span>

![Управление конфигурациями службы](./media/vs-azure-tools-service-configurations-and-profiles-how-to-manage/manage-service-config.png)

<span data-ttu-id="e594b-117">Также вы можете открыть диалоговое окно **Управление конфигурациями** со страниц свойств роли.</span><span class="sxs-lookup"><span data-stu-id="e594b-117">You can also open the **Manage Configurations** dialog box from the role’s property pages.</span></span> <span data-ttu-id="e594b-118">Чтобы открыть окно свойств роли в проекте Azure, откройте контекстное меню для этой роли и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="e594b-118">To open the properties for a role in your Azure project, open the shortcut menu for that role, and then choose **Properties**.</span></span> <span data-ttu-id="e594b-119">На вкладке **Параметры** разверните список **Конфигурация службы**, а затем выберите **Управление**, чтобы открыть диалоговое окно **Управление конфигурациями**.</span><span class="sxs-lookup"><span data-stu-id="e594b-119">On the **Settings** tab, expand the **Service Configuration** list, and then select **Manage** to open the **Manage Configurations** dialog box.</span></span>

### <a name="to-add-a-service-configuration"></a><span data-ttu-id="e594b-120">Добавление конфигурации службы</span><span class="sxs-lookup"><span data-stu-id="e594b-120">To add a service configuration</span></span>
1. <span data-ttu-id="e594b-121">В обозревателе решений откройте контекстное меню проекта Azure и выберите пункт **Управление конфигурациями**.</span><span class="sxs-lookup"><span data-stu-id="e594b-121">In Solution Explorer, open the shortcut menu for the Azure project and then select **Manage Configurations**.</span></span>
   
    <span data-ttu-id="e594b-122">Откроется диалоговое окно **Управление конфигурациями службы** .</span><span class="sxs-lookup"><span data-stu-id="e594b-122">The **Manage Service Configurations** dialog box appears.</span></span>
2. <span data-ttu-id="e594b-123">Чтобы добавить новую конфигурацию службы, создайте копию существующей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e594b-123">To add a service configuration, you must create a copy of an existing configuration.</span></span> <span data-ttu-id="e594b-124">Для этого выберите в списке "Имя" конфигурацию, которую хотите скопировать, и нажмите кнопку **Создать копию**.</span><span class="sxs-lookup"><span data-stu-id="e594b-124">To do this, choose the configuration that you want to copy from the Name list and then select **Create copy**.</span></span>
3. <span data-ttu-id="e594b-125">(Необязательно.) Чтобы изменить имя конфигурации службы, выберите из списка "Имя" новую конфигурацию службы и нажмите кнопку **Переименовать**.</span><span class="sxs-lookup"><span data-stu-id="e594b-125">(Optional) To give the service configuration a different name, choose the new service configuration from the Name list and then select **Rename**.</span></span> <span data-ttu-id="e594b-126">В текстовом поле **Имя** введите имя для этой конфигурации службы и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="e594b-126">In the **Name** text box, type the name that you want to use for this service configuration and then select **OK**.</span></span>
   
    <span data-ttu-id="e594b-127">В проект Azure в обозревателе решений добавится новый CSCFG-файл с именем ServiceConfiguration.[Новое имя].cscfg.</span><span class="sxs-lookup"><span data-stu-id="e594b-127">A new service configuration file that is named ServiceConfiguration.[New Name].cscfg is added to the Azure project in Solution Explorer.</span></span>

### <a name="to-delete-a-service-configuration"></a><span data-ttu-id="e594b-128">Удаление конфигурации службы</span><span class="sxs-lookup"><span data-stu-id="e594b-128">To delete a service configuration</span></span>
1. <span data-ttu-id="e594b-129">В обозревателе решений откройте контекстное меню проекта Azure и выберите пункт **Управление конфигурациями**.</span><span class="sxs-lookup"><span data-stu-id="e594b-129">In Solution Explorer, open the shortcut menu for the Azure project and then select **Manage Configurations**.</span></span>
   
    <span data-ttu-id="e594b-130">Откроется диалоговое окно **Управление конфигурациями службы** .</span><span class="sxs-lookup"><span data-stu-id="e594b-130">The **Manage Service Configurations** dialog box appears.</span></span>
2. <span data-ttu-id="e594b-131">Чтобы удалить конфигурацию службы, выберите из списка **Имя** конфигурацию, которую нужно удалить, и нажмите кнопку **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="e594b-131">To delete a service configuration, choose the configuration that you want to delete from the **Name** list and then select **Remove**.</span></span> <span data-ttu-id="e594b-132">Появится диалоговое окно, в котором следует подтвердить удаление конфигурации.</span><span class="sxs-lookup"><span data-stu-id="e594b-132">A dialog box appears to verify that you want to delete this configuration.</span></span>
3. <span data-ttu-id="e594b-133">Нажмите кнопку **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="e594b-133">Select **Delete**.</span></span>
   
     <span data-ttu-id="e594b-134">Файл конфигурации службы будет удален из проекта Azure в обозревателе решений.</span><span class="sxs-lookup"><span data-stu-id="e594b-134">The service configuration file is removed from the Azure project in Solution Explorer.</span></span>

### <a name="to-rename-a-service-configuration"></a><span data-ttu-id="e594b-135">Переименование конфигурации службы</span><span class="sxs-lookup"><span data-stu-id="e594b-135">To rename a service configuration</span></span>
1. <span data-ttu-id="e594b-136">В обозревателе решений откройте контекстное меню проекта Azure и выберите пункт **Управление конфигурациями**.</span><span class="sxs-lookup"><span data-stu-id="e594b-136">In Solution Explorer, open the shortcut menu for the Azure project, and then select **Manage Configurations**.</span></span>
   
    <span data-ttu-id="e594b-137">Откроется диалоговое окно **Управление конфигурациями службы** .</span><span class="sxs-lookup"><span data-stu-id="e594b-137">The **Manage Service Configurations** dialog box appears.</span></span>
2. <span data-ttu-id="e594b-138">Чтобы переименовать конфигурацию службы, выберите из списка **Имя** новую конфигурацию службы и нажмите кнопку **Переименовать**.</span><span class="sxs-lookup"><span data-stu-id="e594b-138">To rename a service configuration, choose the new service configuration from the **Name** list, and then select **Rename**.</span></span> <span data-ttu-id="e594b-139">В текстовом поле **Имя** введите имя для этой конфигурации службы и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="e594b-139">In the **Name** text box, type the name that you want to use for this service configuration, and then select **OK**.</span></span>
   
    <span data-ttu-id="e594b-140">Имя файла конфигурации службы изменится в проекте Azure в обозревателе решений.</span><span class="sxs-lookup"><span data-stu-id="e594b-140">The name of the service configuration file is changed in the Azure project in Solution Explorer.</span></span>

### <a name="to-change-a-service-configuration"></a><span data-ttu-id="e594b-141">Изменение конфигурации службы</span><span class="sxs-lookup"><span data-stu-id="e594b-141">To change a service configuration</span></span>
* <span data-ttu-id="e594b-142">Если вы хотите изменить конфигурацию службы, откройте контекстное меню для роли, которую нужно изменить в проекте Azure, и выберите пункт **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="e594b-142">If you want to change a service configuration, open the shortcut menu for the specific role you want to change in the Azure project, and then select **Properties**.</span></span> <span data-ttu-id="e594b-143">Дополнительные сведения см. в статье [Настройка ролей для облачной службы Azure в среде Visual Studio](https://docs.microsoft.com/azure/vs-azure-tools-configure-roles-for-cloud-service).</span><span class="sxs-lookup"><span data-stu-id="e594b-143">See [How to: Configure the Roles for an Azure Cloud Service with Visual Studio](https://docs.microsoft.com/azure/vs-azure-tools-configure-roles-for-cloud-service) for more information.</span></span>

## <a name="make-different-setting-combinations-by-using-profiles"></a><span data-ttu-id="e594b-144">Создание различных комбинаций параметров с помощью профилей</span><span class="sxs-lookup"><span data-stu-id="e594b-144">Make different setting combinations by using profiles</span></span>
<span data-ttu-id="e594b-145">С помощью профилей вы можете автоматически добавлять в **мастер публикации** комбинации параметров для различных целей.</span><span class="sxs-lookup"><span data-stu-id="e594b-145">By using a profile, you can automatically fill in the **Publish Wizard** with different combinations of settings for different purposes.</span></span> <span data-ttu-id="e594b-146">Например, вы можете создать один профиль для отладки, а другой — для сборок выпуска.</span><span class="sxs-lookup"><span data-stu-id="e594b-146">For example, you can have one profile for debugging and another for release builds.</span></span> <span data-ttu-id="e594b-147">В таком случае в профиле **Отладка** будет включен параметр **IntelliTrace** и выбрана конфигурация **Отладка**, а в профиле **Выпуск** будет отключен параметр **IntelliTrace** и выбрана конфигурация **Выпуск**.</span><span class="sxs-lookup"><span data-stu-id="e594b-147">In that case, your **Debug** profile would have **IntelliTrace** enabled and the **Debug** configuration selected, and your **Release** profile would have **IntelliTrace** disabled and the **Release** configuration selected.</span></span> <span data-ttu-id="e594b-148">Также вы можете использовать различные профили для развертывания службы с помощью разных учетных записей хранения.</span><span class="sxs-lookup"><span data-stu-id="e594b-148">You could also use different profiles to deploy a service using a different storage account.</span></span>

<span data-ttu-id="e594b-149">При первом запуске мастера публикации создается профиль по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="e594b-149">When you run the wizard for the first time, a default profile is created.</span></span> <span data-ttu-id="e594b-150">Visual Studio создает файл профиля с расширением AZUREPUBXML и сохраняет его в папку **Профили** вашего проекта Azure.</span><span class="sxs-lookup"><span data-stu-id="e594b-150">Visual Studio stores the profile in a file that has an .azurePubXml extension, which is added to your Azure project under the **Profiles** folder.</span></span> <span data-ttu-id="e594b-151">Если при следующем запуске мастера вы вручную укажете другие параметры, этот файл автоматически обновится.</span><span class="sxs-lookup"><span data-stu-id="e594b-151">If you manually specify different choices when you run the wizard later, the file automatically updates.</span></span> <span data-ttu-id="e594b-152">Перед выполнением следующей процедуры следует хотя бы один раз опубликовать облачную службу.</span><span class="sxs-lookup"><span data-stu-id="e594b-152">Before you run the following procedure, you should have already published your cloud service at least once.</span></span>

### <a name="to-add-a-profile"></a><span data-ttu-id="e594b-153">Добавление профиля</span><span class="sxs-lookup"><span data-stu-id="e594b-153">To add a profile</span></span>
1. <span data-ttu-id="e594b-154">Откройте контекстное меню проекта Azure и выберите пункт **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="e594b-154">Open the shortcut menu for your Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="e594b-155">Нажмите кнопку **Сохранить профиль**, расположенную рядом со списком **Целевой профиль**, как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e594b-155">Next to the **Target profile** list, select the **Save Profile** button, as the following illustration shows.</span></span> <span data-ttu-id="e594b-156">Будет создан новый профиль.</span><span class="sxs-lookup"><span data-stu-id="e594b-156">This creates a profile for you.</span></span>
   
    ![Создание нового профиля](./media/vs-azure-tools-service-configurations-and-profiles-how-to-manage/create-new-profile.png)
3. <span data-ttu-id="e594b-158">Создав профиль, щелкните **<Управление…>** в списке **Целевой профиль**.</span><span class="sxs-lookup"><span data-stu-id="e594b-158">After the profile is created, select **<Manage…>** in the **Target profile** list.</span></span>
   
    <span data-ttu-id="e594b-159">Появится диалоговое окно **Управление профилями** , как показано на следующем рисунке.</span><span class="sxs-lookup"><span data-stu-id="e594b-159">The **Manage Profiles** dialog box appears, as the following illustration shows.</span></span>
   
    ![Диалоговое окно «Управление профилями»](./media/vs-azure-tools-service-configurations-and-profiles-how-to-manage/manage-profiles.png)
4. <span data-ttu-id="e594b-161">Из списка **Имя** выберите профиль и нажмите кнопку **Создать копию**.</span><span class="sxs-lookup"><span data-stu-id="e594b-161">In the **Name** list, choose a profile, and then select **Create Copy**.</span></span>
5. <span data-ttu-id="e594b-162">Щелкните кнопку **Закрыть** .</span><span class="sxs-lookup"><span data-stu-id="e594b-162">Choose the **Close** button.</span></span>
   
    <span data-ttu-id="e594b-163">Новый профиль появится в списке «Целевой профиль».</span><span class="sxs-lookup"><span data-stu-id="e594b-163">The new profile appears in the Target profile list.</span></span>
6. <span data-ttu-id="e594b-164">Выберите этот профиль в списке **Целевой профиль** .</span><span class="sxs-lookup"><span data-stu-id="e594b-164">In the **Target profile** list, select the profile that you just created.</span></span> <span data-ttu-id="e594b-165">Значения из выбранного профиля будут заданы для параметров мастера публикации.</span><span class="sxs-lookup"><span data-stu-id="e594b-165">The Publish Wizard settings are filled in with the choices from the profile you selected.</span></span>
7. <span data-ttu-id="e594b-166">Просмотрите страницы мастера публикации, нажимая кнопки **Назад** и **Далее**, и настройте параметры для этого профиля.</span><span class="sxs-lookup"><span data-stu-id="e594b-166">Select the **Previous** and **Next** buttons to display each page of the Publish Wizard, and then customize the settings for this profile.</span></span> <span data-ttu-id="e594b-167">Дополнительные сведения см. в статье [Мастер публикации приложений Azure](http://go.microsoft.com/fwlink/p/?LinkID=623085).</span><span class="sxs-lookup"><span data-stu-id="e594b-167">See [Publish Azure Application Wizard](http://go.microsoft.com/fwlink/p/?LinkID=623085) for information.</span></span>
8. <span data-ttu-id="e594b-168">Когда вы настроите все параметры, нажмите кнопку **Далее** , чтобы вернуться на страницу параметров.</span><span class="sxs-lookup"><span data-stu-id="e594b-168">After you finish customizing the settings, select **Next** to go back to the Settings page.</span></span> <span data-ttu-id="e594b-169">Профиль будет сохранен, если вы опубликуете службу с помощью этих параметров или нажмете кнопку **Сохранить** рядом со списком профилей.</span><span class="sxs-lookup"><span data-stu-id="e594b-169">The profile is saved when you publish the service by using these settings or if you select **Save** next to the list of profiles.</span></span>

### <a name="to-rename-or-delete-a-profile"></a><span data-ttu-id="e594b-170">Переименование или удаление профиля</span><span class="sxs-lookup"><span data-stu-id="e594b-170">To rename or delete a profile</span></span>
1. <span data-ttu-id="e594b-171">Откройте контекстное меню проекта Azure и выберите пункт **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="e594b-171">Open the shortcut menu for your Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="e594b-172">Из списка **Целевой профиль** выберите **Управление**.</span><span class="sxs-lookup"><span data-stu-id="e594b-172">In the **Target profile** list, select **Manage**.</span></span>
3. <span data-ttu-id="e594b-173">В диалоговом окне **Управление профилями** выберите профиль, который нужно удалить, и нажмите кнопку **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="e594b-173">In the **Manage Profiles** dialog box, select the profile that you want to delete, and then select **Remove**.</span></span>
4. <span data-ttu-id="e594b-174">В появившемся диалоговом окне подтвердите удаление, нажав кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="e594b-174">In the confirmation dialog box that appears, select **OK**.</span></span>
5. <span data-ttu-id="e594b-175">Нажмите кнопку **Закрыть**.</span><span class="sxs-lookup"><span data-stu-id="e594b-175">Select **Close**.</span></span>

### <a name="to-change-a-profile"></a><span data-ttu-id="e594b-176">Изменение профиля</span><span class="sxs-lookup"><span data-stu-id="e594b-176">To change a profile</span></span>
1. <span data-ttu-id="e594b-177">Откройте контекстное меню проекта Azure и выберите пункт **Опубликовать**.</span><span class="sxs-lookup"><span data-stu-id="e594b-177">Open the shortcut menu for your Azure project, and then select **Publish**.</span></span>
2. <span data-ttu-id="e594b-178">В списке **Целевой профиль** выберите профиль, который нужно изменить.</span><span class="sxs-lookup"><span data-stu-id="e594b-178">In the **Target profile** list, select the profile that you want to change.</span></span>
3. <span data-ttu-id="e594b-179">Просмотрите страницы мастера публикации, нажимая кнопки **Назад** и **Далее**, и настройте необходимые параметры.</span><span class="sxs-lookup"><span data-stu-id="e594b-179">Select the **Previous** and **Next** buttons to display each page of the Publish Wizard, and then change the settings you want.</span></span> <span data-ttu-id="e594b-180">Дополнительные сведения см. в статье [Мастер публикации приложений Azure](http://go.microsoft.com/fwlink/p/?LinkID=623085).</span><span class="sxs-lookup"><span data-stu-id="e594b-180">See [Publish Azure Application Wizard](http://go.microsoft.com/fwlink/p/?LinkID=623085) for information.</span></span>
4. <span data-ttu-id="e594b-181">Когда вы настроите все параметры, нажмите кнопку **Далее**, чтобы вернуться на страницу **Параметры**.</span><span class="sxs-lookup"><span data-stu-id="e594b-181">After you finish changing the settings, select **Next** to go back to the **Settings** page.</span></span>
5. <span data-ttu-id="e594b-182">(Необязательно.) Нажмите кнопку **Опубликовать**, чтобы опубликовать облачную службу с новыми параметрами.</span><span class="sxs-lookup"><span data-stu-id="e594b-182">(Optional) select **Publish** to publish the cloud service using the new settings.</span></span> <span data-ttu-id="e594b-183">Если вы не опубликуете облачную службу и закроете мастер публикации, в Visual Studio появится запрос на сохранение изменений в профиле.</span><span class="sxs-lookup"><span data-stu-id="e594b-183">If you don’t want to publish your cloud service at this time, and you close the Publish Wizard, Visual Studio asks you if you want to save the changes to the profile.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e594b-184">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="e594b-184">Next steps</span></span>
<span data-ttu-id="e594b-185">Дополнительные сведения о настройке других частей проекта Azure в Visual Studio см. в статье [Настройка проекта Azure](http://go.microsoft.com/fwlink/p/?LinkID=623075).</span><span class="sxs-lookup"><span data-stu-id="e594b-185">To learn about configuring other parts of your Azure project from Visual Studio, see [Configuring an Azure Project](http://go.microsoft.com/fwlink/p/?LinkID=623075)</span></span>

