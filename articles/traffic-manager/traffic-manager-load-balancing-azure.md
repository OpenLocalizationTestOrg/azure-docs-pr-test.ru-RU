---
title: "Балансировка нагрузки aaaUsing службами в Azure | Документы Microsoft"
description: "В этом учебнике показано, как сценарий с помощью toocreate hello Azure портфеля балансировки нагрузки: диспетчера трафика, шлюз приложения и подсистемы балансировки нагрузки."
services: traffic-manager
documentationcenter: 
author: liumichelle
manager: vitinnan
editor: 
ms.assetid: f89be3be-a16f-4d47-bcae-db2ab72ade17
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 10/27/2016
ms.author: limichel
ms.openlocfilehash: d217047102d8c4828250dc0733e8ec9ee1e84b3f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="using-load-balancing-services-in-azure"></a><span data-ttu-id="eb5a1-103">Использование служб балансировки нагрузки в Azure</span><span class="sxs-lookup"><span data-stu-id="eb5a1-103">Using load-balancing services in Azure</span></span>

## <a name="introduction"></a><span data-ttu-id="eb5a1-104">Введение</span><span class="sxs-lookup"><span data-stu-id="eb5a1-104">Introduction</span></span>

<span data-ttu-id="eb5a1-105">Microsoft Azure включает несколько служб, управляющих распределением сетевого трафика и балансировкой нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-105">Microsoft Azure provides multiple services for managing how network traffic is distributed and load balanced.</span></span> <span data-ttu-id="eb5a1-106">Можно использовать эти службы по отдельности или объединять их методов в зависимости от потребностей toobuild hello оптимальное решение.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-106">You can use these services individually or combine their methods, depending on your needs, toobuild hello optimal solution.</span></span>

<span data-ttu-id="eb5a1-107">В этом учебнике мы сначала определить вариант использования клиента и просмотреть с помощью hello, следуя Azure портфеля балансировки нагрузки как его можно сделать более надежный и эффективный: диспетчера трафика, шлюз приложения и подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-107">In this tutorial, we first define a customer use case and see how it can be made more robust and performant by using hello following Azure load-balancing portfolio: Traffic Manager, Application Gateway, and Load Balancer.</span></span> <span data-ttu-id="eb5a1-108">Затем представлены пошаговые инструкции по созданию развертывания, которая является географически избыточным, распределяет трафик tooVMs и помогает управлять различными типами запросов.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-108">We then provide step-by-step instructions for creating a deployment that is geographically redundant, distributes traffic tooVMs, and helps you manage different types of requests.</span></span>

<span data-ttu-id="eb5a1-109">На концептуальном уровне каждая из этих служб играет роль distinct в иерархии балансировки нагрузки hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-109">At a conceptual level, each of these services plays a distinct role in hello load-balancing hierarchy.</span></span>

* <span data-ttu-id="eb5a1-110">**Диспетчер трафика** выполняет глобальную балансировку нагрузки на уровне DNS.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-110">**Traffic Manager** provides global DNS load balancing.</span></span> <span data-ttu-id="eb5a1-111">Он просматривает входящие запросы DNS и высылает работоспособная конечная точка, в соответствии с hello выбрал маршрутизации клиента hello политики.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-111">It looks at incoming DNS requests and responds with a healthy endpoint, in accordance with hello routing policy hello customer has selected.</span></span> <span data-ttu-id="eb5a1-112">Используются следующие методы маршрутизации:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-112">Options for routing methods are:</span></span>
  * <span data-ttu-id="eb5a1-113">Производительность маршрутизации toosend hello запрашивающей стороны toohello ближайшей конечной точки с точки зрения задержки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-113">Performance routing toosend hello requestor toohello closest endpoint in terms of latency.</span></span>
  * <span data-ttu-id="eb5a1-114">Приоритет маршрутизации toodirect все tooan трафика конечной точки, с другими конечными точками в качестве резервной копии.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-114">Priority routing toodirect all traffic tooan endpoint, with other endpoints as backup.</span></span>
  * <span data-ttu-id="eb5a1-115">Взвешенный циклический перебор маршрутизации, который распределяет трафик на основании hello весовой коэффициент, назначенный tooeach конечной точки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-115">Weighted round-robin routing, which distributes traffic based on hello weighting that is assigned tooeach endpoint.</span></span>

  <span data-ttu-id="eb5a1-116">Клиент Hello напрямую подключается toothat конечной точки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-116">hello client connects directly toothat endpoint.</span></span> <span data-ttu-id="eb5a1-117">Диспетчер трафика Azure определяет конечную точку работает неправильно, и затем перенаправляет hello работоспособности экземпляра tooanother клиентов.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-117">Azure Traffic Manager detects when an endpoint is unhealthy and then redirects hello clients tooanother healthy instance.</span></span> <span data-ttu-id="eb5a1-118">См. слишком[документация диспетчера трафика Azure](traffic-manager-overview.md) toolearn Дополнительные сведения о службе hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-118">Refer too[Azure Traffic Manager documentation](traffic-manager-overview.md) toolearn more about hello service.</span></span>
* <span data-ttu-id="eb5a1-119">**Шлюз приложений** предоставляет контроллер доставки приложений (ADC) как услугу, предлагая для приложения разные функции балансировки нагрузки уровня 7.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-119">**Application Gateway** provides application delivery controller (ADC) as a service, offering various Layer 7 load-balancing capabilities for your application.</span></span> <span data-ttu-id="eb5a1-120">Это позволяет клиентам toooptimize web фермы производительность за счет разгрузки SSL процессор завершения toohello приложения шлюза.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-120">It allows customers toooptimize web farm productivity by offloading CPU-intensive SSL termination toohello application gateway.</span></span> <span data-ttu-id="eb5a1-121">Другие уровня 7 маршрутизации возможности включают циклическое распределение входящего трафика, сходство сеансов на основе файлов cookie, маршрутизация URL-адрес на основе пути и toohost возможность hello несколько веб-сайтов за шлюзом одного приложения.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-121">Other Layer 7 routing capabilities include round-robin distribution of incoming traffic, cookie-based session affinity, URL path-based routing, and hello ability toohost multiple websites behind a single application gateway.</span></span> <span data-ttu-id="eb5a1-122">Шлюз приложений можно настроить как шлюз с доступом в Интернет, внутренний шлюз или же как сочетание этих вариантов.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-122">Application Gateway can be configured as an Internet-facing gateway, an internal-only gateway, or a combination of both.</span></span> <span data-ttu-id="eb5a1-123">Шлюз приложений полностью управляется Azure. Он является масштабируемым и обладает высоким уровнем доступности.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-123">Application Gateway is fully Azure managed, scalable, and highly available.</span></span> <span data-ttu-id="eb5a1-124">Для более эффективного управления предоставляется широкий набор возможностей ведения журнала и диагностики.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-124">It provides a rich set of diagnostics and logging capabilities for better manageability.</span></span>
* <span data-ttu-id="eb5a1-125">**Подсистема балансировки нагрузки** является неотъемлемой частью стека Azure SDN hello, обслуживании высокой производительности и малой задержкой четвертого уровня балансировки нагрузки для протоколов все UDP и TCP.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-125">**Load Balancer** is an integral part of hello Azure SDN stack, providing high-performance, low-latency Layer 4 load-balancing services for all UDP and TCP protocols.</span></span> <span data-ttu-id="eb5a1-126">Она управляет и входящими, и исходящими подключениями.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-126">It manages inbound and outbound connections.</span></span> <span data-ttu-id="eb5a1-127">Можно настроить открытых и внутренних балансировки нагрузки конечных точек и определить toomap правила входящих подключений назначения пула подключений tooback узел с помощью TCP и HTTP Проверка работоспособности параметры toomanage доступность службы.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-127">You can configure public and internal load-balanced endpoints and define rules toomap inbound connections tooback-end pool destinations by using TCP and HTTP health-probing options toomanage service availability.</span></span>

## <a name="scenario"></a><span data-ttu-id="eb5a1-128">Сценарий</span><span class="sxs-lookup"><span data-stu-id="eb5a1-128">Scenario</span></span>

<span data-ttu-id="eb5a1-129">В этом примере мы используем простой веб-сайт, который предоставляет содержимое двух типов: изображения и динамически отображаемые веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-129">In this example scenario, we use a simple website that serves two types of content: images and dynamically rendered webpages.</span></span> <span data-ttu-id="eb5a1-130">Hello веб-сайта должен быть географически избыточным, и он должен обслуживать его пользователям hello ближайший (Наименьшая задержка) toothem расположение.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-130">hello website must be geographically redundant, and it should serve its users from hello closest (lowest latency) location toothem.</span></span> <span data-ttu-id="eb5a1-131">Hello разработчик приложения приняла решение, hello все URL-адреса, которые соответствуют шаблону/images / * обслуживаются выделенный пул виртуальных машин, которые отличаются от остальных hello hello веб-фермы.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-131">hello application developer has decided that any URLs that match hello pattern /images/* are served from a dedicated pool of VMs that are different from hello rest of hello web farm.</span></span>

<span data-ttu-id="eb5a1-132">Кроме того предоставляются динамического содержимого hello пулом виртуальной Машины по умолчанию hello должен tootalk tooa серверную базу данных, размещенной на кластере высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-132">Additionally, hello default VM pool serving hello dynamic content needs tootalk tooa back-end database that is hosted on a high-availability cluster.</span></span> <span data-ttu-id="eb5a1-133">всего развертывания Hello настраивается через диспетчер ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-133">hello entire deployment is set up through Azure Resource Manager.</span></span>

<span data-ttu-id="eb5a1-134">С помощью диспетчера трафика, шлюз приложения и подсистемы балансировки нагрузки позволяет tooachieve этот веб-сайт, эти цели проектирования:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-134">Using Traffic Manager, Application Gateway, and Load Balancer allows this website tooachieve these design goals:</span></span>

* <span data-ttu-id="eb5a1-135">**Multi-геоизбыточность**: Если одного региона выходит из строя, маршруты диспетчера трафика легко трафика toohello ближайший регион без какого-либо вмешательства владелец приложения hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-135">**Multi-geo redundancy**: If one region goes down, Traffic Manager routes traffic seamlessly toohello closest region without any intervention from hello application owner.</span></span>
* <span data-ttu-id="eb5a1-136">**Уменьшая задержку обращений**: так как диспетчер трафика автоматически направляет hello клиента toohello ближайший регион, взаимодействий клиентов hello Уменьшить задержку, при запросе содержимого веб-страницы приветствия.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-136">**Reduced latency**: Because Traffic Manager automatically directs hello customer toohello closest region, hello customer experiences lower latency when requesting hello webpage contents.</span></span>
* <span data-ttu-id="eb5a1-137">**Масштабируемость независимых**: поскольку нагрузки приложения hello web отделяется от типа содержимого, владелец приложения hello можно масштабировать рабочих нагрузок запрос hello независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-137">**Independent scalability**: Because hello web application workload is separated by type of content, hello application owner can scale hello request workloads independent of each other.</span></span> <span data-ttu-id="eb5a1-138">Шлюз приложений гарантирует, что трафик hello перенаправленное toohello правой пулов в зависимости от указанного hello правила и hello работоспособности приложения hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-138">Application Gateway ensures that hello traffic is routed toohello right pools based on hello specified rules and hello health of hello application.</span></span>
* <span data-ttu-id="eb5a1-139">**Внутренней балансировки нагрузки**: так как Подсистема балансировки нагрузки — перед hello кластера высокой доступности, используется только предоставляется toohello приложения hello исправна и активной конечной точки для базы данных.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-139">**Internal load balancing**: Because Load Balancer is in front of hello high-availability cluster, only hello active and healthy endpoint for a database is exposed toohello application.</span></span> <span data-ttu-id="eb5a1-140">Кроме того администратор базы данных может оптимизировать рабочей нагрузки hello распределение активных и пассивных реплик по hello кластера зависит от клиентского приложения hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-140">Additionally, a database administrator can optimize hello workload by distributing active and passive replicas across hello cluster independent of hello front-end application.</span></span> <span data-ttu-id="eb5a1-141">Подсистема балансировки нагрузки предоставляет подключений toohello высокого уровня доступности кластера и гарантирует, что только работоспособности базы данных получают запросы на подключение.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-141">Load Balancer delivers connections toohello high-availability cluster and ensures that only healthy databases receive connection requests.</span></span>

<span data-ttu-id="eb5a1-142">Hello следующей схеме показана архитектура hello этого сценария:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-142">hello following diagram shows hello architecture of this scenario:</span></span>

![Схема архитектуры балансировки нагрузки](./media/traffic-manager-load-balancing-azure/scenario-diagram.png)

> [!NOTE]
> <span data-ttu-id="eb5a1-144">В этом примере используется только одно из многих возможных конфигураций служб hello балансировки нагрузки, Azure предлагает.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-144">This example is only one of many possible configurations of hello load-balancing services that Azure offers.</span></span> <span data-ttu-id="eb5a1-145">Можно комбинировать диспетчера трафика, шлюз приложения и подсистемы балансировки нагрузки и соответствующих toobest при необходимости балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-145">Traffic Manager, Application Gateway, and Load Balancer can be mixed and matched toobest suit your load-balancing needs.</span></span> <span data-ttu-id="eb5a1-146">Например, если вам не требуется разгрузка SSL или обработка уровня 7, вместо шлюза приложений можно применить подсистему балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-146">For example, if SSL offload or Layer 7 processing is not necessary, Load Balancer can be used in place of Application Gateway.</span></span>

## <a name="setting-up-hello-load-balancing-stack"></a><span data-ttu-id="eb5a1-147">Настройка балансировки нагрузки стека hello</span><span class="sxs-lookup"><span data-stu-id="eb5a1-147">Setting up hello load-balancing stack</span></span>

### <a name="step-1-create-a-traffic-manager-profile"></a><span data-ttu-id="eb5a1-148">Шаг 1. Создание профиля диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="eb5a1-148">Step 1: Create a Traffic Manager profile</span></span>

1. <span data-ttu-id="eb5a1-149">В hello портал Azure, щелкните **New**и затем поиска hello marketplace для «Профиля диспетчера трафика».</span><span class="sxs-lookup"><span data-stu-id="eb5a1-149">In hello Azure portal, click **New**, and then search hello marketplace for "Traffic Manager profile."</span></span>
2. <span data-ttu-id="eb5a1-150">На hello **профиля диспетчера трафика создать** колонке введите hello следующие сведения:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-150">On hello **Create Traffic Manager profile** blade, enter hello following basic information:</span></span>

  * <span data-ttu-id="eb5a1-151">**Имя:** присвойте профилю диспетчера трафика уникальное имя префикса DNS.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-151">**Name**: Give your Traffic Manager profile a DNS prefix name.</span></span>
  * <span data-ttu-id="eb5a1-152">**Метод маршрутизации**: выберите hello политики метод маршрутизации трафика.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-152">**Routing method**: Select hello traffic-routing method policy.</span></span> <span data-ttu-id="eb5a1-153">Дополнительные сведения о методах hello см. в разделе [методы маршрутизации трафика о диспетчере трафика](traffic-manager-routing-methods.md).</span><span class="sxs-lookup"><span data-stu-id="eb5a1-153">For more information about hello methods, see [About Traffic Manager traffic routing methods](traffic-manager-routing-methods.md).</span></span>
  * <span data-ttu-id="eb5a1-154">**Подписки**: выберите hello подписку, которая содержит профиль hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-154">**Subscription**: Select hello subscription that contains hello profile.</span></span>
  * <span data-ttu-id="eb5a1-155">**Группа ресурсов**: hello выберите группы ресурсов, содержащий профиль hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-155">**Resource group**: Select hello resource group that contains hello profile.</span></span> <span data-ttu-id="eb5a1-156">Это может быть новая или уже существующая группа ресурсов.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-156">It can be a new or existing resource group.</span></span>
  * <span data-ttu-id="eb5a1-157">**Расположение группы ресурсов**: служба диспетчера трафика является глобальной и не привязана tooa расположение.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-157">**Resource group location**: Traffic Manager service is global and not bound tooa location.</span></span> <span data-ttu-id="eb5a1-158">Тем не менее необходимо указать область группы hello размещения hello метаданные, связанные с профилем диспетчера трафика hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-158">However, you must specify a region for hello group where hello metadata associated with hello Traffic Manager profile resides.</span></span> <span data-ttu-id="eb5a1-159">Это расположение не оказывает влияния на доступность среды выполнения hello hello профиля.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-159">This location has no impact on hello runtime availability of hello profile.</span></span>

3. <span data-ttu-id="eb5a1-160">Нажмите кнопку **создать** toogenerate hello профиля диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-160">Click **Create** toogenerate hello Traffic Manager profile.</span></span>

  ![Колонка создания диспетчера трафика](./media/traffic-manager-load-balancing-azure/s1-create-tm-blade.png)

### <a name="step-2-create-hello-application-gateways"></a><span data-ttu-id="eb5a1-162">Шаг 2: Создание hello шлюзы приложений</span><span class="sxs-lookup"><span data-stu-id="eb5a1-162">Step 2: Create hello application gateways</span></span>

1. <span data-ttu-id="eb5a1-163">В hello hello левой панели портала Azure щелкните **New** > **сети** > **шлюз приложений**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-163">In hello Azure portal, in hello left pane, click **New** > **Networking** > **Application Gateway**.</span></span>
2. <span data-ttu-id="eb5a1-164">Введите следующие основные сведения о шлюзе приложения hello hello:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-164">Enter hello following basic information about hello application gateway:</span></span>

  * <span data-ttu-id="eb5a1-165">**Имя**: hello имя шлюза приложения hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-165">**Name**: hello name of hello application gateway.</span></span>
  * <span data-ttu-id="eb5a1-166">**Размер SKU**: hello размер шлюза приложения hello, доступной в качестве малый, средний и крупный.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-166">**SKU size**: hello size of hello application gateway, available as Small, Medium, or Large.</span></span>
  * <span data-ttu-id="eb5a1-167">**Число экземпляров**: hello количество экземпляров, значение от 2 до 10.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-167">**Instance count**: hello number of instances, a value from 2 through 10.</span></span>
  * <span data-ttu-id="eb5a1-168">**Группа ресурсов**: hello группы ресурсов, содержащий шлюза приложения hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-168">**Resource group**: hello resource group that holds hello application gateway.</span></span> <span data-ttu-id="eb5a1-169">Это может быть новая или уже существующая группа ресурсов.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-169">It can be an existing resource group or a new one.</span></span>
  * <span data-ttu-id="eb5a1-170">**Расположение**: hello регион для шлюза приложения hello, который является hello же расположении, что группа ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-170">**Location**: hello region for hello application gateway, which is hello same location as hello resource group.</span></span> <span data-ttu-id="eb5a1-171">расположение Hello важен, так как hello виртуальную сеть и общедоступный IP-адрес должен находиться в hello местоположения hello шлюза.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-171">hello location is important, because hello virtual network and public IP must be in hello same location as hello gateway.</span></span>
3. <span data-ttu-id="eb5a1-172">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-172">Click **OK**.</span></span>
4. <span data-ttu-id="eb5a1-173">Определите hello виртуальной сети, подсети, интерфейсный IP и конфигураций прослушивателей для шлюза приложения hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-173">Define hello virtual network, subnet, front-end IP, and listener configurations for hello application gateway.</span></span> <span data-ttu-id="eb5a1-174">В этом сценарии — IP-адрес интерфейса hello **открытый**, что позволяет позднее добавить в качестве toohello конечной точки профиля диспетчера трафика toobe.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-174">In this scenario, hello front-end IP address is **Public**, which allows it toobe added as an endpoint toohello Traffic Manager profile later on.</span></span>
5. <span data-ttu-id="eb5a1-175">Настройте прослушиватель hello с одним из следующих вариантов hello:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-175">Configure hello listener with one of hello following options:</span></span>
    * <span data-ttu-id="eb5a1-176">Если используется HTTP, что нет tooconfigure.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-176">If you use HTTP, there is nothing tooconfigure.</span></span> <span data-ttu-id="eb5a1-177">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-177">Click **OK**.</span></span>
    * <span data-ttu-id="eb5a1-178">Если вы используете протокол HTTPS, необходимо настроить дополнительные параметры.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-178">If you use HTTPS, further configuration is required.</span></span> <span data-ttu-id="eb5a1-179">См. слишком[создания шлюза приложения](../application-gateway/application-gateway-create-gateway-portal.md), начиная с шага 9.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-179">Refer too[Create an application gateway](../application-gateway/application-gateway-create-gateway-portal.md), starting at step 9.</span></span> <span data-ttu-id="eb5a1-180">После завершения настройки hello щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-180">When you have completed hello configuration, click **OK**.</span></span>

#### <a name="configure-url-routing-for-application-gateways"></a><span data-ttu-id="eb5a1-181">Настройка маршрутизации URL-адресов для шлюзов приложений</span><span class="sxs-lookup"><span data-stu-id="eb5a1-181">Configure URL routing for application gateways</span></span>

<span data-ttu-id="eb5a1-182">При выборе пула внутренней шлюза приложения, настроенного с помощью правила на основе пути принимает шаблон пути URL-адреса запроса hello в распространения tooround по принципу циклического сложения.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-182">When you choose a back-end pool, an application gateway that's configured with a path-based rule takes a path pattern of hello request URL in addition tooround-robin distribution.</span></span> <span data-ttu-id="eb5a1-183">В этом сценарии мы добавляем toodirect правила на основе пути любой URL-адрес с «/images/\*"пул серверов toohello изображения.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-183">In this scenario, we are adding a path-based rule toodirect any URL with "/images/\*" toohello image server pool.</span></span> <span data-ttu-id="eb5a1-184">Дополнительные сведения о настройке URL-адрес маршрутизации на основе пути для шлюза приложения, см. в разделе слишком[создать правило на основе пути для шлюза приложения](../application-gateway/application-gateway-create-url-route-portal.md).</span><span class="sxs-lookup"><span data-stu-id="eb5a1-184">For more information about configuring URL path-based routing for an application gateway, refer too[Create a path-based rule for an application gateway](../application-gateway/application-gateway-create-url-route-portal.md).</span></span>

![Схема веб-уровня шлюза приложений](./media/traffic-manager-load-balancing-azure/web-tier-diagram.png)

1. <span data-ttu-id="eb5a1-186">В группе ресурсов последовательно toohello экземпляр шлюза приложения hello, созданную в предшествующих раздел hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-186">From your resource group, go toohello instance of hello application gateway that you created in hello preceding section.</span></span>
2. <span data-ttu-id="eb5a1-187">В разделе **параметры**выберите **внутренние пулы**и выберите **добавить** tooadd hello виртуальных машин, которые должны tooassociate с пулами серверной части веб уровня hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-187">Under **Settings**, select **Backend pools**, and then select **Add** tooadd hello VMs that you want tooassociate with hello web-tier back-end pools.</span></span>
3. <span data-ttu-id="eb5a1-188">На hello **Добавление внутреннего пула** колонки, введите имя hello hello серверной части пула и все IP-адреса hello hello машин, которые находятся в пуле hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-188">On hello **Add backend pool** blade, enter hello name of hello back-end pool and all hello IP addresses of hello machines that reside in hello pool.</span></span> <span data-ttu-id="eb5a1-189">В нашем примере мы подключаем два серверных пула виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-189">In this scenario, we are connecting two back-end server pools of virtual machines.</span></span>

  ![Колонка добавления серверного пула для шлюза приложений](./media/traffic-manager-load-balancing-azure/s2-appgw-add-bepool.png)

4. <span data-ttu-id="eb5a1-191">В разделе **параметры** шлюза приложения hello, выберите **правила**и нажмите кнопку hello **путь на основе** кнопку tooadd правило.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-191">Under **Settings** of hello application gateway, select **Rules**, and then click hello **Path based** button tooadd a rule.</span></span>

  ![Кнопка Path based (На основе пути) для правил шлюза приложения](./media/traffic-manager-load-balancing-azure/s2-appgw-add-pathrule.png)

5. <span data-ttu-id="eb5a1-193">На hello **добавить правило на основе пути** колонки, настройте правило hello, предоставляя hello следующую информацию.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-193">On hello **Add path-based rule** blade, configure hello rule by providing hello following information.</span></span>

   <span data-ttu-id="eb5a1-194">Основные параметры.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-194">Basic settings:</span></span>

   + <span data-ttu-id="eb5a1-195">**Имя**: hello понятное имя правила hello, доступной на портале hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-195">**Name**: hello friendly name of hello rule that is accessible in hello portal.</span></span>
   + <span data-ttu-id="eb5a1-196">**Прослушиватель**: hello прослушиватель, который используется для правила hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-196">**Listener**: hello listener that is used for hello rule.</span></span>
   + <span data-ttu-id="eb5a1-197">**По умолчанию серверный пул**: hello toobe серверной части пула, использовать правило по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-197">**Default backend pool**: hello back-end pool toobe used with hello default rule.</span></span>
   + <span data-ttu-id="eb5a1-198">**Параметры HTTP по умолчанию**: hello HTTP toobe параметры, используемые с правилом по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-198">**Default HTTP settings**: hello HTTP settings toobe used with hello default rule.</span></span>

   <span data-ttu-id="eb5a1-199">Правила на основе пути.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-199">Path-based rules:</span></span>

   + <span data-ttu-id="eb5a1-200">**Имя**: hello понятное имя правила на основе пути hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-200">**Name**: hello friendly name of hello path-based rule.</span></span>
   + <span data-ttu-id="eb5a1-201">**Пути**: hello правило для пути, используемый для перенаправления трафика.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-201">**Paths**: hello path rule that is used for forwarding traffic.</span></span>
   + <span data-ttu-id="eb5a1-202">**Внутренний пул**: hello toobe серверной части пула, используемый с этим правилом.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-202">**Backend Pool**: hello back-end pool toobe used with this rule.</span></span>
   + <span data-ttu-id="eb5a1-203">**Параметр HTTP**: toobe параметров hello HTTP, используемый с этим правилом.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-203">**HTTP Setting**: hello HTTP settings toobe used with this rule.</span></span>

   > [!IMPORTANT]
   > <span data-ttu-id="eb5a1-204">Пути: допустимые пути должны начинаться с символа /.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-204">Paths: Valid paths must start with "/".</span></span> <span data-ttu-id="eb5a1-205">Здравствуйте, подстановочный знак "\*" допускается только в конце hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-205">hello wildcard "\*" is allowed only at hello end.</span></span> <span data-ttu-id="eb5a1-206">Примеры допустимых значений: /xyz, /xyz\*; или /xyz/\*.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-206">Valid examples are /xyz, /xyz\*, or /xyz/\*.</span></span>

   ![Колонка добавления правила на основе пути для шлюза приложений](./media/traffic-manager-load-balancing-azure/s2-appgw-pathrule-blade.png)

### <a name="step-3-add-application-gateways-toohello-traffic-manager-endpoints"></a><span data-ttu-id="eb5a1-208">Шаг 3: Добавление конечных точек диспетчера трафика toohello шлюзы приложения</span><span class="sxs-lookup"><span data-stu-id="eb5a1-208">Step 3: Add application gateways toohello Traffic Manager endpoints</span></span>

<span data-ttu-id="eb5a1-209">В этом случае диспетчер трафика — подключенных tooapplication шлюзов (согласно настройке в предыдущих шагах hello), которые находятся в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-209">In this scenario, Traffic Manager is connected tooapplication gateways (as configured in hello preceding steps) that reside in different regions.</span></span> <span data-ttu-id="eb5a1-210">Теперь, когда настроены шлюзы приложения hello, hello следующим шагом является tooconnect их tooyour профиль диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-210">Now that hello application gateways are configured, hello next step is tooconnect them tooyour Traffic Manager profile.</span></span>

1. <span data-ttu-id="eb5a1-211">Откройте профиль диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-211">Open your Traffic Manager profile.</span></span> <span data-ttu-id="eb5a1-212">Таким образом, найдите toodo в группе ресурсов или поиск hello имя профиля диспетчера трафика hello **все ресурсы**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-212">toodo so, look in your resource group or search for hello name of hello Traffic Manager profile from **All Resources**.</span></span>
2. <span data-ttu-id="eb5a1-213">Выберите в левой области hello **конечные точки**и нажмите кнопку **добавить** tooadd конечной точки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-213">In hello left pane, select **Endpoints**, and then click **Add** tooadd an endpoint.</span></span>

  ![Кнопка добавления конечных точек диспетчера трафика](./media/traffic-manager-load-balancing-azure/s3-tm-add-endpoint.png)

3. <span data-ttu-id="eb5a1-215">На hello **добавить конечную точку** колонки, создайте конечную точку, введя hello следующую информацию:</span><span class="sxs-lookup"><span data-stu-id="eb5a1-215">On hello **Add endpoint** blade, create an endpoint by entering hello following information:</span></span>

  * <span data-ttu-id="eb5a1-216">**Тип**: выберите тип hello tooload балансировки конечной точки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-216">**Type**: Select hello type of endpoint tooload-balance.</span></span> <span data-ttu-id="eb5a1-217">В этом случае выберите **конечной точки Azure** так, как мы подключаетесь экземпляры шлюза toohello приложений, которые были настроены ранее.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-217">In this scenario, select **Azure endpoint** because we are connecting it toohello application gateway instances that were configured previously.</span></span>
  * <span data-ttu-id="eb5a1-218">**Имя**: Введите имя hello hello конечной точки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-218">**Name**: Enter hello name of hello endpoint.</span></span>
  * <span data-ttu-id="eb5a1-219">**Целевой тип ресурса**: выберите **общедоступный IP-адрес** и затем в разделе **целевой ресурс**, выберите hello общедоступный IP-адрес шлюза приложения hello, который был настроен ранее.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-219">**Target resource type**: Select **Public IP address** and then, under **Target resource**, select hello public IP of hello application gateway that was configured previously.</span></span>

   ![Колонка добавления конечной точки диспетчера трафика](./media/traffic-manager-load-balancing-azure/s3-tm-add-endpoint-blade.png)

4. <span data-ttu-id="eb5a1-221">Теперь можно проверить настройки программы установки, к нему с hello DNS вашего профиля диспетчера трафика (в этом примере: TrafficManagerScenario.trafficmanager.net).</span><span class="sxs-lookup"><span data-stu-id="eb5a1-221">Now you can test your setup by accessing it with hello DNS of your Traffic Manager profile (in this example: TrafficManagerScenario.trafficmanager.net).</span></span> <span data-ttu-id="eb5a1-222">Можно повторно отправить запросы, подключить или привести к остановке виртуальные машины и веб-серверы, которые были созданы в различных регионах и изменение настроек tootest параметры профиля диспетчера трафика hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-222">You can resend requests, bring up or bring down VMs and web servers that were created in different regions, and change hello Traffic Manager profile settings tootest your setup.</span></span>

### <a name="step-4-create-a-load-balancer"></a><span data-ttu-id="eb5a1-223">Шаг 4. Создание балансировщика нагрузки</span><span class="sxs-lookup"><span data-stu-id="eb5a1-223">Step 4: Create a load balancer</span></span>

<span data-ttu-id="eb5a1-224">В этом случае подсистема балансировки нагрузки распределяет подключения из hello веб-уровня toohello базы данных в пределах кластера высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-224">In this scenario, Load Balancer distributes connections from hello web tier toohello databases within a high-availability cluster.</span></span>

<span data-ttu-id="eb5a1-225">Если кластер высокого уровня доступности базы данных используется SQL Server AlwaysOn, см. слишком[настроить один или несколько всегда на прослушиватели группы доступности](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) пошаговые инструкции.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-225">If your high-availability database cluster is using SQL Server AlwaysOn, refer too[Configure one or more Always On Availability Group Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) for step-by-step instructions.</span></span>

<span data-ttu-id="eb5a1-226">Дополнительные сведения о настройке внутренний балансировщик нагрузки см. в разделе [создать внутренний балансировщик нагрузки в hello портал Azure](../load-balancer/load-balancer-get-started-ilb-arm-portal.md).</span><span class="sxs-lookup"><span data-stu-id="eb5a1-226">For more information about configuring an internal load balancer, see [Create an Internal load balancer in hello Azure portal](../load-balancer/load-balancer-get-started-ilb-arm-portal.md).</span></span>

1. <span data-ttu-id="eb5a1-227">В hello hello левой панели портала Azure щелкните **New** > **сети** > **балансировки нагрузки**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-227">In hello Azure portal, in hello left pane, click **New** > **Networking** > **Load balancer**.</span></span>
2. <span data-ttu-id="eb5a1-228">На hello **балансировки нагрузки создать** колонке выберите имя для балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-228">On hello **Create load balancer** blade, choose a name for your load balancer.</span></span>
3. <span data-ttu-id="eb5a1-229">Набор hello **тип** слишком**внутренний**и выберите hello соответствующую виртуальную сеть и подсеть для hello tooreside подсистемы балансировки нагрузки в.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-229">Set hello **Type** too**Internal**, and choose hello appropriate virtual network and subnet for hello load balancer tooreside in.</span></span>
4. <span data-ttu-id="eb5a1-230">В разделе **Назначение IP-адресов** выберите вариант **Динамическое** или **Статическое**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-230">Under **IP address assignment**, select either **Dynamic** or **Static**.</span></span>
5. <span data-ttu-id="eb5a1-231">В разделе **группы ресурсов**, выбрать группу ресурсов hello hello подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-231">Under **Resource group**, choose hello resource group for hello load balancer.</span></span>
6. <span data-ttu-id="eb5a1-232">В разделе **расположение**, выберите соответствующую область hello hello подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-232">Under **Location**, choose hello appropriate region for hello load balancer.</span></span>
7. <span data-ttu-id="eb5a1-233">Нажмите кнопку **создать** балансировки нагрузки toogenerate hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-233">Click **Create** toogenerate hello load balancer.</span></span>

#### <a name="connect-a-back-end-database-tier-toohello-load-balancer"></a><span data-ttu-id="eb5a1-234">Подключение подсистемы балансировки нагрузки уровня toohello серверной базы данных</span><span class="sxs-lookup"><span data-stu-id="eb5a1-234">Connect a back-end database tier toohello load balancer</span></span>

1. <span data-ttu-id="eb5a1-235">Из группы ресурсов найти hello подсистемы балансировки нагрузки, созданный на предыдущих этапах hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-235">From your resource group, find hello load balancer that was created in hello previous steps.</span></span>
2. <span data-ttu-id="eb5a1-236">В разделе **параметры**, нажмите кнопку **внутренние пулы**и нажмите кнопку **добавить** tooadd пула серверной части.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-236">Under **Settings**, click **Backend pools**, and then click **Add** tooadd a back-end pool.</span></span>

  ![Колонка добавления серверного пула к балансировщику нагрузки](./media/traffic-manager-load-balancing-azure/s4-ilb-add-bepool.png)

3. <span data-ttu-id="eb5a1-238">На hello **Добавление внутреннего пула** колонки, введите имя hello пула hello серверной части.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-238">On hello **Add backend pool** blade, enter hello name of hello back-end pool.</span></span>
4. <span data-ttu-id="eb5a1-239">Добавьте отдельные компьютеры или пул доступности toohello набор серверной части.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-239">Add either individual machines or an availability set toohello back-end pool.</span></span>

#### <a name="configure-a-probe"></a><span data-ttu-id="eb5a1-240">Настройка проверки</span><span class="sxs-lookup"><span data-stu-id="eb5a1-240">Configure a probe</span></span>

1. <span data-ttu-id="eb5a1-241">В балансировки нагрузки в разделе **параметры**выберите **проверяет**и нажмите кнопку **добавить** tooadd зонда.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-241">In your load balancer, under **Settings**, select **Probes**, and then click **Add** tooadd a probe.</span></span>

 ![Колонка добавления пробы в балансировщик нагрузки](./media/traffic-manager-load-balancing-azure/s4-ilb-add-probe.png)

2. <span data-ttu-id="eb5a1-243">На hello **пробы добавить** колонки, введите имя hello для пробы hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-243">On hello **Add probe** blade, enter hello name for hello probe.</span></span>
3. <span data-ttu-id="eb5a1-244">Выберите hello **протокола** для пробы hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-244">Select hello **Protocol** for hello probe.</span></span> <span data-ttu-id="eb5a1-245">Для базы данных вам больше подойдет проба TCP, а не HTTP.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-245">For a database, you might want a TCP probe rather than an HTTP probe.</span></span> <span data-ttu-id="eb5a1-246">toolearn Дополнительные сведения о зондов подсистемы балансировки нагрузки ссылаются слишком[зондов подсистемы балансировки нагрузки понимание](../load-balancer/load-balancer-custom-probe-overview.md).</span><span class="sxs-lookup"><span data-stu-id="eb5a1-246">toolearn more about load-balancer probes, refer too[Understand load balancer probes](../load-balancer/load-balancer-custom-probe-overview.md).</span></span>
4. <span data-ttu-id="eb5a1-247">Введите hello **порт** из toobe вашей базы данных, для доступа к пробы hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-247">Enter hello **Port** of your database toobe used for accessing hello probe.</span></span>
5. <span data-ttu-id="eb5a1-248">В разделе **интервал**, укажите, как часто tooprobe hello приложения.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-248">Under **Interval**, specify how frequently tooprobe hello application.</span></span>
6. <span data-ttu-id="eb5a1-249">В разделе **порог состояния неработоспособности**, укажите hello число сбоев непрерывного пробы, которые должны быть выполнены для виртуальной Машины toobe hello серверной части, считаются неисправное.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-249">Under **Unhealthy threshold**, specify hello number of continuous probe failures that must occur for hello back-end VM toobe considered unhealthy.</span></span>
7. <span data-ttu-id="eb5a1-250">Нажмите кнопку **ОК** toocreate hello пробы.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-250">Click **OK** toocreate hello probe.</span></span>

#### <a name="configure-hello-load-balancing-rules"></a><span data-ttu-id="eb5a1-251">Настройка правил балансировки нагрузки hello</span><span class="sxs-lookup"><span data-stu-id="eb5a1-251">Configure hello load-balancing rules</span></span>

1. <span data-ttu-id="eb5a1-252">В разделе **параметры** балансировки нагрузки, выберите **правила подсистемы балансировки нагрузки**и нажмите кнопку **добавить** toocreate правила.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-252">Under **Settings** of your load balancer, select **Load balancing rules**, and then click **Add** toocreate a rule.</span></span>
2. <span data-ttu-id="eb5a1-253">На hello **правило балансировки нагрузки добавить** колонке введите hello **имя** для hello правила балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-253">On hello **Add load balancing rule** blade, enter hello **Name** for hello load-balancing rule.</span></span>
3. <span data-ttu-id="eb5a1-254">Выберите hello **интерфейсный IP-адрес** из hello подсистемы балансировки нагрузки, **протокола**, и **порт**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-254">Choose hello **Frontend IP Address** of hello load balancer, **Protocol**, and **Port**.</span></span>
4. <span data-ttu-id="eb5a1-255">В разделе **внутренний порт**, укажите порт toobe hello, используются в пуле hello серверной части.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-255">Under **Backend port**, specify hello port toobe used in hello back-end pool.</span></span>
5. <span data-ttu-id="eb5a1-256">Выберите hello **внутренний пул** и hello **проверки** , созданные в hello предыдущего действия tooapply hello правило.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-256">Select hello **Backend pool** and hello **Probe** that were created in hello previous steps tooapply hello rule to.</span></span>
6. <span data-ttu-id="eb5a1-257">В разделе **Сохранение сеанса**, выберите способ toopersist сеансы hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-257">Under **Session persistence**, choose how you want hello sessions toopersist.</span></span>
7. <span data-ttu-id="eb5a1-258">В разделе **тайм-ауты простоя**, укажите количество минут, прежде чем время ожидания простоя в hello.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-258">Under **Idle timeouts**, specify hello number of minutes before an idle timeout.</span></span>
8. <span data-ttu-id="eb5a1-259">В разделе **Плавающий IP-адрес** выберите **Отключен** или **Включен**.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-259">Under **Floating IP**, select either **Disabled** or **Enabled**.</span></span>
9. <span data-ttu-id="eb5a1-260">Нажмите кнопку **ОК** toocreate hello правило.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-260">Click **OK** toocreate hello rule.</span></span>

### <a name="step-5-connect-web-tier-vms-toohello-load-balancer"></a><span data-ttu-id="eb5a1-261">Шаг 5: Подключение подсистемы балансировки нагрузки веб уровень виртуальных машин toohello</span><span class="sxs-lookup"><span data-stu-id="eb5a1-261">Step 5: Connect web-tier VMs toohello load balancer</span></span>

<span data-ttu-id="eb5a1-262">Теперь мы настраиваем hello IP-адресов и подсистемы балансировки нагрузки переднего плана порт hello приложений, выполняющихся на веб уровень виртуальных машин для подключения к любой базе данных.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-262">Now we configure hello IP address and load-balancer front-end port in hello applications that are running on your web-tier VMs for any database connections.</span></span> <span data-ttu-id="eb5a1-263">Такая настройка является toohello конкретных приложений, запущенных на этих виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-263">This configuration is specific toohello applications that run on these VMs.</span></span> <span data-ttu-id="eb5a1-264">tooconfigure hello конечный IP-адрес и порт, см. документацию toohello приложения.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-264">tooconfigure hello destination IP address and port, refer toohello application documentation.</span></span> <span data-ttu-id="eb5a1-265">toofind hello IP-адрес внешнего интерфейса hello в hello портал Azure, переходите переднего плана пула IP-адресов toohello hello **параметры подсистемы балансировки нагрузки** колонку.</span><span class="sxs-lookup"><span data-stu-id="eb5a1-265">toofind hello IP address of hello front end, in hello Azure portal, go toohello front-end IP pool on hello **Load balancer settings** blade.</span></span>

![Область перехода к разделу пула внешних IP-адресов балансировщика нагрузки](./media/traffic-manager-load-balancing-azure/s5-ilb-frontend-ippool.png)

## <a name="next-steps"></a><span data-ttu-id="eb5a1-267">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="eb5a1-267">Next steps</span></span>

* [<span data-ttu-id="eb5a1-268">Обзор диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="eb5a1-268">Overview of Traffic Manager</span></span>](traffic-manager-overview.md)
* [<span data-ttu-id="eb5a1-269">Обзор шлюза приложений</span><span class="sxs-lookup"><span data-stu-id="eb5a1-269">Application Gateway overview</span></span>](../application-gateway/application-gateway-introduction.md)
* [<span data-ttu-id="eb5a1-270">Обзор Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="eb5a1-270">Azure Load Balancer overview</span></span>](../load-balancer/load-balancer-overview.md)
