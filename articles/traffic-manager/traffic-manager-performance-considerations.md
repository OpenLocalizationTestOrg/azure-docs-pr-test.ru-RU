---
title: "Рекомендации по обеспечению производительности для диспетчера трафика Azure | Документация Майкрософт"
description: "Общие сведения о производительности диспетчера трафика и о проверке производительности веб-сайта при использовании диспетчера трафика"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: 3ba5dfa1-2922-43f1-9a23-d06969c4a516
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/16/2017
ms.author: kumud
ms.openlocfilehash: f686685138625a53971f1fc5fc754fd22c9d67b2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="performance-considerations-for-traffic-manager"></a><span data-ttu-id="8ae1e-103">Рекомендации по безопасности для диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="8ae1e-103">Performance considerations for Traffic Manager</span></span>

<span data-ttu-id="8ae1e-104">На этой странице описываются особенности использования диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-104">This page explains performance considerations using Traffic Manager.</span></span> <span data-ttu-id="8ae1e-105">Рассмотрим следующие сценарии.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-105">Consider the following scenario:</span></span>

<span data-ttu-id="8ae1e-106">У вас есть экземпляры веб-сайта в регионах WestUS и EastAsia.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-106">You have instances of your website in the WestUS and EastAsia regions.</span></span> <span data-ttu-id="8ae1e-107">На одном из экземпляров происходит сбой проверки работоспособности, выполняемой для диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-107">One of the instances is failing the health check for the traffic manager probe.</span></span> <span data-ttu-id="8ae1e-108">Трафик приложения перенаправляется в работоспособный регион.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-108">Application traffic is directed to the healthy region.</span></span> <span data-ttu-id="8ae1e-109">Хотя такой переход на другой ресурс ожидаемый, он может привести к проблемам с производительностью из-за задержки трафика, отправляемого в удаленный регион.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-109">This failover is expected but performance can be a problem based on the latency of the traffic now traveling to a distant region.</span></span>

## <a name="performance-considerations-for-traffic-manager"></a><span data-ttu-id="8ae1e-110">Рекомендации по безопасности для диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="8ae1e-110">Performance considerations for Traffic Manager</span></span>

<span data-ttu-id="8ae1e-111">Диспетчер трафика может снизить производительность веб-сайта только при первоначальном поиске DNS.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-111">The only performance impact that Traffic Manager can have on your website is the initial DNS lookup.</span></span> <span data-ttu-id="8ae1e-112">DNS-запрос имени профиля диспетчера трафика обрабатывается корневым DNS-сервером Майкрософт с размещенной зоной trafficmanager.net.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-112">A DNS request for the name of your Traffic Manager profile is handled by the Microsoft DNS root server that hosts the trafficmanager.net zone.</span></span> <span data-ttu-id="8ae1e-113">Диспетчер трафика заполняет и регулярно обновляет обычные корневые DNS-серверы Майкрософт в соответствии со своей политикой и результатами проверки.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-113">Traffic Manager populates, and regularly updates, the Microsoft's DNS root servers based on the Traffic Manager policy and the probe results.</span></span> <span data-ttu-id="8ae1e-114">Поэтому даже при первоначальном поиске DNS DNS-запросы не отправляются в диспетчер трафика.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-114">So even during the initial DNS lookup, no DNS queries are sent to Traffic Manager.</span></span>

<span data-ttu-id="8ae1e-115">Диспетчер трафика включает нескольких компонентов: DNS-серверы, служба API, слой хранилища и служба мониторинга конечной точки.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-115">Traffic Manager is made up of several components: DNS name servers, an API service, the storage layer, and an endpoint monitoring service.</span></span> <span data-ttu-id="8ae1e-116">Если происходит сбой какого-либо компонента службы диспетчера трафика, это не влияет на DNS-имя, связанное с профилем диспетчера трафика.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-116">If a Traffic Manager service component fails, there is no effect on the DNS name associated with your Traffic Manager profile.</span></span> <span data-ttu-id="8ae1e-117">Записи в DNS-серверах Майкрософт также остаются неизменными.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-117">The records in the Microsoft DNS servers remain unchanged.</span></span> <span data-ttu-id="8ae1e-118">При этом мониторинг конечной точки и обновление DNS не выполняется.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-118">However, endpoint monitoring and DNS updating do not happen.</span></span> <span data-ttu-id="8ae1e-119">Следовательно, диспетчер трафика не сможет обновить DNS, чтобы определить сайт отработки отказа при сбое первичного сайта.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-119">Therefore, Traffic Manager is not able to update DNS to point to your failover site when your primary site goes down.</span></span>

<span data-ttu-id="8ae1e-120">Разрешение DNS-имен выполняется быстро и с кэшированием результатов.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-120">DNS name resolution is fast and results are cached.</span></span> <span data-ttu-id="8ae1e-121">Скорость первоначального поиска DNS зависит от DNS-серверов, которые клиент использует для разрешения имен.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-121">The speed of the initial DNS lookup depends on the DNS servers the client uses for name resolution.</span></span> <span data-ttu-id="8ae1e-122">Как правило, клиент выполняет поиск DNS примерно за 50 мс.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-122">Typically, a client can complete a DNS lookup within ~50 ms.</span></span> <span data-ttu-id="8ae1e-123">Результаты поиска кэшируются на время, определяемое сроком жизни DNS (TTL).</span><span class="sxs-lookup"><span data-stu-id="8ae1e-123">The results of the lookup are cached for the duration of the DNS Time-to-live (TTL).</span></span> <span data-ttu-id="8ae1e-124">Стандартное значение TTL для диспетчера трафика составляет 300 секунд.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-124">The default TTL for Traffic Manager is 300 seconds.</span></span>

<span data-ttu-id="8ae1e-125">Трафик НЕ проходит через диспетчер трафика.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-125">Traffic does NOT flow through Traffic Manager.</span></span> <span data-ttu-id="8ae1e-126">Когда поиск DNS завершается, клиент получает IP-адрес экземпляра веб-узла.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-126">Once the DNS lookup completes, the client has an IP address for an instance of your web site.</span></span> <span data-ttu-id="8ae1e-127">Клиент подключается непосредственно к этому адресу, не проходя через диспетчер трафика.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-127">The client connects directly to that address and does not pass through Traffic Manager.</span></span> <span data-ttu-id="8ae1e-128">Выбранная политика диспетчера трафика не влияет на производительность DNS.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-128">The Traffic Manager policy you choose has no influence on the DNS performance.</span></span> <span data-ttu-id="8ae1e-129">Тем не менее связанный с производительностью метод маршрутизации может негативно сказаться на работе приложения.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-129">However, a Performance routing-method can negatively impact the application experience.</span></span> <span data-ttu-id="8ae1e-130">Например, если ваша политика перенаправляет трафик из Северной Америки в экземпляр, размещенный в Азии, задержки сети для этих сеансов могут вызвать проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-130">For example, if your policy redirects traffic from North America to an instance hosted in Asia, the network latency for those sessions may be a performance issue.</span></span>

## <a name="measuring-traffic-manager-performance"></a><span data-ttu-id="8ae1e-131">Проверка производительности диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="8ae1e-131">Measuring Traffic Manager Performance</span></span>

<span data-ttu-id="8ae1e-132">Есть несколько веб-сайтов, на которых можно узнать, как поведением профиля диспетчера трафика влияет на производительность.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-132">There are several websites you can use to understand the performance and behavior of a Traffic Manager profile.</span></span> <span data-ttu-id="8ae1e-133">Многие из этих сайтов можно использовать бесплатно, но с некоторыми ограничениями.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-133">Many of these sites are free but may have limitations.</span></span> <span data-ttu-id="8ae1e-134">Некоторые сайты предлагают платные расширенные возможности мониторинга и отчетности.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-134">Some sites offer enhanced monitoring and reporting for a fee.</span></span>

<span data-ttu-id="8ae1e-135">Средства на этих сайтах измеряют задержки DNS и отображают разрешенные IP-адреса в клиентских расположениях во всем мире.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-135">The tools on these sites measure DNS latencies and display the resolved IP addresses for client locations around the world.</span></span> <span data-ttu-id="8ae1e-136">Эти средства в основном не кэшируют результаты DNS.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-136">Most of these tools do not cache the DNS results.</span></span> <span data-ttu-id="8ae1e-137">Следовательно, они выполняют полный поиск DNS при каждом запуске теста.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-137">Therefore, the tools show the full DNS lookup each time a test is run.</span></span> <span data-ttu-id="8ae1e-138">При тестировании из собственного клиента полный поиск DNS выполняется только на время, определяемое TTL.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-138">When you test from your own client, you only experience the full DNS lookup performance once during the TTL duration.</span></span>

## <a name="sample-tools-to-measure-dns-performance"></a><span data-ttu-id="8ae1e-139">Примеры средств, измеряющих производительность DNS</span><span class="sxs-lookup"><span data-stu-id="8ae1e-139">Sample tools to measure DNS performance</span></span>

* [<span data-ttu-id="8ae1e-140">SolveDNS</span><span class="sxs-lookup"><span data-stu-id="8ae1e-140">SolveDNS</span></span>](http://www.solvedns.com/dns-comparison/)

    <span data-ttu-id="8ae1e-141">SolveDNS включает разные средства для повышения производительности.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-141">SolveDNS offers many performance tools.</span></span> <span data-ttu-id="8ae1e-142">Средство DNS Comparison показывает, сколько времени занимает разрешение DNS-имени, в том числе в сравнении с другими поставщиками служб DNS.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-142">The DNS Comparison tool can show you how long it takes to resolve your DNS name and how that compares to other DNS service providers.</span></span>

* [<span data-ttu-id="8ae1e-143">WebSitePulse</span><span class="sxs-lookup"><span data-stu-id="8ae1e-143">WebSitePulse</span></span>](http://www.websitepulse.com/help/tools.php)

    <span data-ttu-id="8ae1e-144">Одно из самых простых средств — это WebSitePulse.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-144">One of the simplest tools is WebSitePulse.</span></span> <span data-ttu-id="8ae1e-145">Введите URL-адрес, чтобы просмотреть время разрешения DNS, первый байт, последний байт и другую статистику производительности.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-145">Enter the URL to see DNS resolution time, First Byte, Last Byte, and other performance statistics.</span></span> <span data-ttu-id="8ae1e-146">Вы можете выбрать одно из трех тестовых расположений.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-146">You can choose from three different test locations.</span></span> <span data-ttu-id="8ae1e-147">В этом примере при первом запуске поиск DNS выполняется за 0,204 с.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-147">In this example, you see that the first execution shows that DNS lookup takes 0.204 sec.</span></span>

    ![pulse1](./media/traffic-manager-performance-considerations/traffic-manager-web-site-pulse.png)

    <span data-ttu-id="8ae1e-149">Так как результаты кэшируются, второй тестовый поиск DNS для той же конечной точки диспетчера трафика занимает 0,002 с.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-149">Because the results are cached, the second test for the same Traffic Manager endpoint the DNS lookup takes 0.002 sec.</span></span>

    ![pulse2](./media/traffic-manager-performance-considerations/traffic-manager-web-site-pulse2.png)

* [<span data-ttu-id="8ae1e-151">CA App Synthetic Monitor</span><span class="sxs-lookup"><span data-stu-id="8ae1e-151">CA App Synthetic Monitor</span></span>](https://asm.ca.com/en/checkit.php)

    <span data-ttu-id="8ae1e-152">Ранее известное как Watchmouse Check Website, это средство отображает время разрешения одновременно для нескольких географических регионов.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-152">Formerly known as the Watchmouse Check Website tool, this site show you the DNS resolution time from multiple geographic regions simultaneously.</span></span> <span data-ttu-id="8ae1e-153">Введите URL-адрес, чтобы узнать время разрешения DNS, время подключения и скорость для нескольких расположений.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-153">Enter the URL to see DNS resolution time, connection time, and speed from several geographic locations.</span></span> <span data-ttu-id="8ae1e-154">С помощью этого теста можно узнать, какая размещенная служба возвращается для разных расположений во всем мире.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-154">Use this test to see which hosted service is returned for different locations around the world.</span></span>

    ![pulse1](./media/traffic-manager-performance-considerations/traffic-manager-web-site-watchmouse.png)

* [<span data-ttu-id="8ae1e-156">Pingdom</span><span class="sxs-lookup"><span data-stu-id="8ae1e-156">Pingdom</span></span>](http://tools.pingdom.com/)

    <span data-ttu-id="8ae1e-157">Это средство отображает статистику производительности для каждого элемента веб-страницы.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-157">This tool provides performance statistics for each element of a web page.</span></span> <span data-ttu-id="8ae1e-158">На вкладке "Page Analysis" (Анализ страницы) показано время (в %), затраченное на поиск DNS.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-158">The Page Analysis tab shows the percentage of time spent on DNS lookup.</span></span>

* [<span data-ttu-id="8ae1e-159">What's My DNS?</span><span class="sxs-lookup"><span data-stu-id="8ae1e-159">What's My DNS?</span></span>](http://www.whatsmydns.net/)

    <span data-ttu-id="8ae1e-160">На этом сайте выполняется поиск DNS в 20 географических расположениях, результаты которого отображаются на карте.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-160">This site does a DNS lookup from 20 different locations and displays the results on a map.</span></span>

* [<span data-ttu-id="8ae1e-161">Dig Web Interface</span><span class="sxs-lookup"><span data-stu-id="8ae1e-161">Dig Web Interface</span></span>](http://www.digwebinterface.com)

    <span data-ttu-id="8ae1e-162">На этом сайте отображается подробная информация о DNS, включая записи CNAME и A.</span><span class="sxs-lookup"><span data-stu-id="8ae1e-162">This site shows more detailed DNS information including CNAMEs and A records.</span></span> <span data-ttu-id="8ae1e-163">Установите флажки "Colorize output" (Выделить цветом выходные данные) и "Stats" (Статистика), а для "Nameservers" (Имена серверов) выберите значение "All" (Все).</span><span class="sxs-lookup"><span data-stu-id="8ae1e-163">Make sure you check the 'Colorize output' and 'Stats' under options, and select 'All' under Nameservers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8ae1e-164">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="8ae1e-164">Next Steps</span></span>

[<span data-ttu-id="8ae1e-165">О методах маршрутизации трафика в диспетчере трафика</span><span class="sxs-lookup"><span data-stu-id="8ae1e-165">About Traffic Manager traffic routing methods</span></span>](traffic-manager-routing-methods.md)

[<span data-ttu-id="8ae1e-166">Проверка параметров диспетчера трафика</span><span class="sxs-lookup"><span data-stu-id="8ae1e-166">Test your Traffic Manager settings</span></span>](traffic-manager-testing-settings.md)

[<span data-ttu-id="8ae1e-167">Операции с диспетчером трафика (справочник по REST API)</span><span class="sxs-lookup"><span data-stu-id="8ae1e-167">Operations on Traffic Manager (REST API Reference)</span></span>](http://go.microsoft.com/fwlink/?LinkId=313584)

[<span data-ttu-id="8ae1e-168">Командлеты для диспетчера трафика Azure</span><span class="sxs-lookup"><span data-stu-id="8ae1e-168">Azure Traffic Manager Cmdlets</span></span>](http://go.microsoft.com/fwlink/p/?LinkId=400769)

