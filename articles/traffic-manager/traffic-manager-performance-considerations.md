---
title: "Рекомендации по обеспечению производительности для диспетчера трафика Azure | Документация Майкрософт"
description: "Общие сведения о производительности диспетчера трафика и о проверке производительности веб-сайта при использовании диспетчера трафика"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: 3ba5dfa1-2922-43f1-9a23-d06969c4a516
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/16/2017
ms.author: kumud
ms.openlocfilehash: f686685138625a53971f1fc5fc754fd22c9d67b2
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="performance-considerations-for-traffic-manager"></a>Рекомендации по безопасности для диспетчера трафика

На этой странице описываются особенности использования диспетчера трафика. Рассмотрим следующие сценарии.

У вас есть экземпляры веб-сайта в регионах WestUS и EastAsia. На одном из экземпляров происходит сбой проверки работоспособности, выполняемой для диспетчера трафика. Трафик приложения перенаправляется в работоспособный регион. Хотя такой переход на другой ресурс ожидаемый, он может привести к проблемам с производительностью из-за задержки трафика, отправляемого в удаленный регион.

## <a name="performance-considerations-for-traffic-manager"></a>Рекомендации по безопасности для диспетчера трафика

Диспетчер трафика может снизить производительность веб-сайта только при первоначальном поиске DNS. DNS-запрос имени профиля диспетчера трафика обрабатывается корневым DNS-сервером Майкрософт с размещенной зоной trafficmanager.net. Диспетчер трафика заполняет и регулярно обновляет обычные корневые DNS-серверы Майкрософт в соответствии со своей политикой и результатами проверки. Поэтому даже при первоначальном поиске DNS DNS-запросы не отправляются в диспетчер трафика.

Диспетчер трафика включает нескольких компонентов: DNS-серверы, служба API, слой хранилища и служба мониторинга конечной точки. Если происходит сбой какого-либо компонента службы диспетчера трафика, это не влияет на DNS-имя, связанное с профилем диспетчера трафика. Записи в DNS-серверах Майкрософт также остаются неизменными. При этом мониторинг конечной точки и обновление DNS не выполняется. Следовательно, диспетчер трафика не сможет обновить DNS, чтобы определить сайт отработки отказа при сбое первичного сайта.

Разрешение DNS-имен выполняется быстро и с кэшированием результатов. Скорость первоначального поиска DNS зависит от DNS-серверов, которые клиент использует для разрешения имен. Как правило, клиент выполняет поиск DNS примерно за 50 мс. Результаты поиска кэшируются на время, определяемое сроком жизни DNS (TTL). Стандартное значение TTL для диспетчера трафика составляет 300 секунд.

Трафик НЕ проходит через диспетчер трафика. Когда поиск DNS завершается, клиент получает IP-адрес экземпляра веб-узла. Клиент подключается непосредственно к этому адресу, не проходя через диспетчер трафика. Выбранная политика диспетчера трафика не влияет на производительность DNS. Тем не менее связанный с производительностью метод маршрутизации может негативно сказаться на работе приложения. Например, если ваша политика перенаправляет трафик из Северной Америки в экземпляр, размещенный в Азии, задержки сети для этих сеансов могут вызвать проблемы с производительностью.

## <a name="measuring-traffic-manager-performance"></a>Проверка производительности диспетчера трафика

Есть несколько веб-сайтов, на которых можно узнать, как поведением профиля диспетчера трафика влияет на производительность. Многие из этих сайтов можно использовать бесплатно, но с некоторыми ограничениями. Некоторые сайты предлагают платные расширенные возможности мониторинга и отчетности.

Средства на этих сайтах измеряют задержки DNS и отображают разрешенные IP-адреса в клиентских расположениях во всем мире. Эти средства в основном не кэшируют результаты DNS. Следовательно, они выполняют полный поиск DNS при каждом запуске теста. При тестировании из собственного клиента полный поиск DNS выполняется только на время, определяемое TTL.

## <a name="sample-tools-to-measure-dns-performance"></a>Примеры средств, измеряющих производительность DNS

* [SolveDNS](http://www.solvedns.com/dns-comparison/)

    SolveDNS включает разные средства для повышения производительности. Средство DNS Comparison показывает, сколько времени занимает разрешение DNS-имени, в том числе в сравнении с другими поставщиками служб DNS.

* [WebSitePulse](http://www.websitepulse.com/help/tools.php)

    Одно из самых простых средств — это WebSitePulse. Введите URL-адрес, чтобы просмотреть время разрешения DNS, первый байт, последний байт и другую статистику производительности. Вы можете выбрать одно из трех тестовых расположений. В этом примере при первом запуске поиск DNS выполняется за 0,204 с.

    ![pulse1](./media/traffic-manager-performance-considerations/traffic-manager-web-site-pulse.png)

    Так как результаты кэшируются, второй тестовый поиск DNS для той же конечной точки диспетчера трафика занимает 0,002 с.

    ![pulse2](./media/traffic-manager-performance-considerations/traffic-manager-web-site-pulse2.png)

* [CA App Synthetic Monitor](https://asm.ca.com/en/checkit.php)

    Ранее известное как Watchmouse Check Website, это средство отображает время разрешения одновременно для нескольких географических регионов. Введите URL-адрес, чтобы узнать время разрешения DNS, время подключения и скорость для нескольких расположений. С помощью этого теста можно узнать, какая размещенная служба возвращается для разных расположений во всем мире.

    ![pulse1](./media/traffic-manager-performance-considerations/traffic-manager-web-site-watchmouse.png)

* [Pingdom](http://tools.pingdom.com/)

    Это средство отображает статистику производительности для каждого элемента веб-страницы. На вкладке "Page Analysis" (Анализ страницы) показано время (в %), затраченное на поиск DNS.

* [What's My DNS?](http://www.whatsmydns.net/)

    На этом сайте выполняется поиск DNS в 20 географических расположениях, результаты которого отображаются на карте.

* [Dig Web Interface](http://www.digwebinterface.com)

    На этом сайте отображается подробная информация о DNS, включая записи CNAME и A. Установите флажки "Colorize output" (Выделить цветом выходные данные) и "Stats" (Статистика), а для "Nameservers" (Имена серверов) выберите значение "All" (Все).

## <a name="next-steps"></a>Дальнейшие действия

[О методах маршрутизации трафика в диспетчере трафика](traffic-manager-routing-methods.md)

[Проверка параметров диспетчера трафика](traffic-manager-testing-settings.md)

[Операции с диспетчером трафика (справочник по REST API)](http://go.microsoft.com/fwlink/?LinkId=313584)

[Командлеты для диспетчера трафика Azure](http://go.microsoft.com/fwlink/p/?LinkId=400769)

