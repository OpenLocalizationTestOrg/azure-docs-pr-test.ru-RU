---
title: "aaaWorking с большими наборами масштабирования виртуальной машины Azure | Документы Microsoft"
description: "Необходимые наборы масштабирования tooknow toouse больших виртуальной машины Azure"
services: virtual-machine-scale-sets
documentationcenter: 
author: gbowerman
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 76ac7fd7-2e05-4762-88ca-3b499e87906e
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 2/7/2017
ms.author: guybo
ms.openlocfilehash: a39aab25925d7fc50763f0a20148b1f2213b492f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="working-with-large-virtual-machine-scale-sets"></a>Работа с крупными масштабируемыми наборами виртуальных машин
Теперь можно создать Azure [наборы масштабирования виртуальных машин](/azure/virtual-machine-scale-sets/) размером вверх too1 000 виртуальных машин. В этом документе _масштабный набор виртуальных машин, больших_ определяется как возможность масштабирования toogreater чем 100 виртуальных машин наборе масштабирования. Эта возможность задается с помощью свойства масштабируемого набора (_singlePlacementGroup=False_). 

Задает определенные аспекты большого объема, такие, как домены балансировки и отказоустойчивость нагрузки ведут себя иначе tooa набор стандартных масштабирования. В этом документе Объясняет характеристики hello наборов данных большого объема и описывает, какие требуются tooknow toosuccessfully использовании их в приложениях. 

Наиболее распространенный подход для развертывания облачной инфраструктуры в больших масштабах является toocreate набор _единицы масштабирования_, например путем создания нескольких виртуальных машин можно масштабировать наборов между несколькими виртуальными сетями и учетные записи хранения. Такой подход позволяет проще сравнивать управления toosingle виртуальные машины, и несколько единиц масштабирования полезны для многих приложений, особенно тех, которые требуют наличия объединения в стек компонентов, как несколько виртуальных сетей и конечных точек. Если приложению требуется один большой кластер, тем не менее, может быть более простой toodeploy единая шкала Настройка из too1 000 виртуальных машин. К примерам сценариев относятся централизованные развертывания больших данных или сетки вычислений, требующие простого управления крупным пулом рабочих узлов. В сочетании с набора масштабирования виртуальных Машин [присоединенных дисков с данными](virtual-machine-scale-sets-attached-disks.md), наборы большого объема позволяют toodeploy масштабируемой инфраструктуры, состоящей из тысяч ядер и петабайт хранилища, в ходе одной операции.

## <a name="placement-groups"></a>Группы размещения 
Что делает _больших_ набор специальных масштабирования не hello число виртуальных машин, а также количество hello _размещения группы_ он содержит. Группа размещения — это конструкция аналогичные tooan доступности Azure набор, с собственными домены сбоя и доменах обновления. По умолчанию масштабируемый набор содержит одну группу размещения максимум со 100 виртуальными машинами. Если свойство с именем набора масштабирования _singlePlacementGroup_ задано too_false_, hello масштабного набора может состоять из нескольких групп размещения и должна находиться в диапазоне 0-1000 виртуальных машин. Если задано значение по умолчанию toohello _true_, набор масштабирования и он состоит из одного размещения группы, имеет диапазон от 0 до 100 виртуальных машин.

## <a name="checklist-for-using-large-scale-sets"></a>Контрольный список для использования крупных масштабируемых наборов
toodecide ли ваше приложение может обеспечить эффективное использование наборов данных большого объема, примите во внимание следующие требования к hello.

- Крупные масштабируемые наборы необходимо создавать с управляемыми дисками Azure. В противном случае для них требуется несколько учетных записей хранения (по одной на каждые 20 виртуальных машин). Наборы большого объема, разработанной toowork исключительно с управляемых дисков tooreduce ограничивает хранилища расходов на управление и tooavoid hello риск запуска в подписку для учетных записей хранения. Если управляемых дисков не используется, ваш набор масштабирования является ограниченной too100 виртуальных машин.
- Наборы масштабирования, созданных из образов Azure Marketplace можно увеличивать масштаб too1 000 виртуальных машин.
- Наборы масштабирования, созданные на основе пользовательских образов (образов виртуальных Машин создайте и отправьте самостоятельно) в настоящее время можно увеличивать масштаб too100 виртуальных машин.
- Уровня 4 балансировки нагрузки с помощью hello подсистемы балансировки нагрузки Azure для набора масштабирования, состоящие из нескольких групп размещения еще не поддерживается. Если нужен toouse hello подсистемы балансировки нагрузки Azure убедитесь, что набор масштабирования hello — настроенное toouse группу одного размещения, которое является значением по умолчанию hello.
- Для всех наборов масштабирования поддерживается уровня 7 балансировки нагрузки с помощью hello шлюза приложения Azure.
- Набор масштабирования определен с одной подсетью - убедитесь, что подсеть имеет достаточно большой пространство адресов для всех виртуальных машин hello необходимо. По умолчанию в наборе overprovisions (создает дополнительные виртуальные машины во время развертывания или горизонтальное масштабирование, которых вы не оплачивать) tooimprove развертывания надежность и производительность. Разрешить для-адреса пространства 20% больше номера hello планирование tooscale для виртуальных машин.
- При планировании toodeploy много виртуальных машин, квоты на ядра вычислений может потребоваться увеличить toobe.
- Домены сбоя и домены обновления согласованы только в пределах группы размещения. Эта архитектура не изменяет hello в целом установлен доступности шкалы, поскольку виртуальные машины равномерно распределяются между distinct физическое оборудование, но не означает, что при необходимости tooguarantee две виртуальные машины находятся на другом оборудовании, убедитесь, что они находятся в разных ошибки домены в hello одной группе размещения. Идентификатор группы домена и размещение ошибки отображаются в hello _экземпляра представление_ набора масштабирования виртуальных Машин. Представление экземпляра hello набора масштабирования виртуальных Машин можно просмотреть в hello [обозревателя ресурсов Azure](https://resources.azure.com/).


## <a name="creating-a-large-scale-set"></a>Создание крупного масштабируемого набора
При создании шкалу в hello портал Azure, можно разрешить его tooscale toomultiple размещение групп, задание hello _ограничение tooa размещения одной группы_ too_False_ параметр в hello _основы_ колонку. Этот параметр too_False_ набор, можно указать _число экземпляров_ значение вверх too1 000.

![](./media/virtual-machine-scale-sets-placement-groups/portal-large-scale.png)

Созданием больших масштабах виртуальной Машины, заданные с помощью hello [Azure CLI](https://github.com/Azure/azure-cli) _az vmss создать_ команды. Эта команда задает интеллектуальной значения по умолчанию, таких как размер подсети, в зависимости от hello _число экземпляров_ аргумент:

```bash
az group create -l southcentralus -n biginfra
az vmss create -g biginfra -n bigvmss --image ubuntults --instance-count 1000
```
Обратите внимание, что hello _vmss создания_ команды по умолчанию определенные значения конфигурации, если они не указаны. Доступные параметры hello toosee, которые можно переопределить, попробуйте:
```bash
az vmss create --help
```

При создании большого объема, задайте создав шаблоном диспетчера ресурсов Azure, убедитесь, что шаблон hello создает набор масштабирования, исходя из управляемых дисков Azure. Можно задать hello _singlePlacementGroup_ too_false_ свойство в hello _свойства_ раздел hello _Microsoft.Compute/virtualMAchineScaleSets_ ресурсов. Hello следующий фрагмент JSON показывает начало hello шаблона набора масштабирования, включая емкость виртуальной Машины hello 1000 и hello _«singlePlacementGroup»: false_ параметр:
```json
{
  "type": "Microsoft.Compute/virtualMachineScaleSets",
  "location": "australiaeast",
  "name": "bigvmss",
  "sku": {
    "name": "Standard_DS1_v2",
    "tier": "Standard",
    "capacity": 1000
  },
  "properties": {
    "singlePlacementGroup": false,
    "upgradePolicy": {
      "mode": "Automatic"
    }
```
Полный пример значительная Настройка шаблона см. в слишком[https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json](https://github.com/gbowerman/azure-myriad/blob/master/bigtest/bigbottle.json).

## <a name="converting-an-existing-scale-set-toospan-multiple-placement-groups"></a>Преобразование существующего шкалы набора toospan несколько групп размещения
toomake существующей виртуальной Машины в наборе поддерживает масштабирование toomore чем 100 виртуальных машин, необходимо toochange hello _singplePlacementGroup_ модели задано свойство too_false_ шкале hello. Можно проверить изменение этого свойства с hello [обозревателя ресурсов Azure](https://resources.azure.com/). Найти существующий набор шкалы, выберите _изменить_ и измените hello _singlePlacementGroup_ свойство. Если это свойство не отображается, возможно, просмотр hello набор масштабирования с более старой версии hello Microsoft.Compute API.

>[!NOTE] 
Можно изменить с поддержкой размещения одной группы только (поведение по умолчанию hello) tooa поддержки нескольких групп размещения наборе масштабирования, но не удается преобразовать hello в обратном направлении. Таким образом, чтобы убедиться, что вы понимаете свойства hello крупных наборов данных перед преобразованием. В частности убедитесь, что нет необходимости четвертого уровня балансировки нагрузки с помощью подсистемы балансировки нагрузки Azure hello.


