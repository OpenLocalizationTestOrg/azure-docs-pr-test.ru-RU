---
title: "Перенос ExpressRoute связанные виртуальные сети из классической tooResource диспетчер: Azure: PowerShell | Документы Microsoft"
description: "На этой странице описаны как toomigrate связан tooResource виртуальных сетей Manager после перемещения ваш канал."
documentationcenter: na
services: expressroute
author: ganesr
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: expressroute
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2017
ms.author: ganesr;cherylmc
ms.openlocfilehash: e64506c6909296f98c5dd23b1437bc0b81f31c75
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-expressroute-associated-virtual-networks-from-classic-tooresource-manager"></a><span data-ttu-id="2cb48-103">Миграция с tooResource классический диспетчер ExpressRoute связанные виртуальные сети</span><span class="sxs-lookup"><span data-stu-id="2cb48-103">Migrate ExpressRoute associated virtual networks from classic tooResource Manager</span></span>

<span data-ttu-id="2cb48-104">В этой статье объясняется, как Azure ExpressRoute toomigrate связан виртуальных сетей с hello классической модели toohello диспетчера ресурсов Azure развертывания модели развертывания после перемещения к каналу ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2cb48-104">This article explains how toomigrate Azure ExpressRoute associated virtual networks from hello classic deployment model toohello Azure Resource Manager deployment model after moving your ExpressRoute circuit.</span></span> 


## <a name="before-you-begin"></a><span data-ttu-id="2cb48-105">Перед началом работы</span><span class="sxs-lookup"><span data-stu-id="2cb48-105">Before you begin</span></span>
* <span data-ttu-id="2cb48-106">Проверьте наличие последней версии hello hello модули Azure PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2cb48-106">Verify that you have hello latest version of hello Azure PowerShell modules.</span></span> <span data-ttu-id="2cb48-107">Дополнительные сведения см. в разделе [как tooinstall и настройка Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="2cb48-107">For more information, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>
* <span data-ttu-id="2cb48-108">Убедитесь, что вы просмотрели hello [необходимые компоненты](expressroute-prerequisites.md), [требования к маршрутизации](expressroute-routing.md), и [рабочих процессов](expressroute-workflows.md) перед началом настройки.</span><span class="sxs-lookup"><span data-stu-id="2cb48-108">Make sure that you have reviewed hello [prerequisites](expressroute-prerequisites.md), [routing requirements](expressroute-routing.md), and [workflows](expressroute-workflows.md) before you begin configuration.</span></span>
* <span data-ttu-id="2cb48-109">Проверьте сведения hello предоставляется на условиях [переход с классической tooResource диспетчера канал ExpressRoute](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="2cb48-109">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span> <span data-ttu-id="2cb48-110">Убедитесь, что полностью понимаете принципы hello ограничения и ограничения.</span><span class="sxs-lookup"><span data-stu-id="2cb48-110">Make sure that you fully understand hello limits and limitations.</span></span>
* <span data-ttu-id="2cb48-111">Убедитесь, что цепь hello полностью в hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="2cb48-111">Verify that hello circuit is fully operational in hello classic deployment model.</span></span>
* <span data-ttu-id="2cb48-112">Убедитесь, что группы ресурсов, который был создан в модели развертывания диспетчера ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-112">Ensure that you have a resource group that was created in hello Resource Manager deployment model.</span></span>
* <span data-ttu-id="2cb48-113">Просмотрите hello Следующая документация по миграции ресурсов:</span><span class="sxs-lookup"><span data-stu-id="2cb48-113">Review hello following resource-migration documentation:</span></span>

    * [<span data-ttu-id="2cb48-114">Поддерживаемые платформы миграции IaaS ресурсов от классических tooAzure диспетчера ресурсов</span><span class="sxs-lookup"><span data-stu-id="2cb48-114">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * [<span data-ttu-id="2cb48-115">Технические близкое знакомство с платформа поддерживается перенос из классической tooAzure диспетчера ресурсов</span><span class="sxs-lookup"><span data-stu-id="2cb48-115">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
    * [<span data-ttu-id="2cb48-116">Вопросы и ответы: Поддерживаемые платформой миграции IaaS ресурсов от классических tooAzure диспетчера ресурсов</span><span class="sxs-lookup"><span data-stu-id="2cb48-116">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
    * <span data-ttu-id="2cb48-117">[Common errors during Classic to Azure Resource Manager migration](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Распространенные ошибки при переносе из классической модели на модель Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="2cb48-117">[Review most common migration errors and mitigations](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>

## <a name="supported-and-unsupported-scenarios"></a><span data-ttu-id="2cb48-118">Поддерживаемые и неподдерживаемые сценарии</span><span class="sxs-lookup"><span data-stu-id="2cb48-118">Supported and unsupported scenarios</span></span>

* <span data-ttu-id="2cb48-119">Канал ExpressRoute можно перемещать из hello toohello классический диспетчер ресурсов среды без простоев.</span><span class="sxs-lookup"><span data-stu-id="2cb48-119">An ExpressRoute circuit can be moved from hello classic toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="2cb48-120">Любой канал ExpressRoute можно перемещать из классической toohello hello диспетчер ресурсов среды без простоев.</span><span class="sxs-lookup"><span data-stu-id="2cb48-120">You can move any ExpressRoute circuit from hello classic toohello Resource Manager environment with no downtime.</span></span> <span data-ttu-id="2cb48-121">Следуйте инструкциям в разделе hello [перемещение каналы ExpressRoute от hello классический toohello диспетчера ресурсов развертывания модели с помощью PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="2cb48-121">Follow hello instructions in [moving ExpressRoute circuits from hello classic toohello Resource Manager deployment model using PowerShell](expressroute-howto-move-arm.md).</span></span> <span data-ttu-id="2cb48-122">Это подключенных toohello готовности к установке toomove ресурсы виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="2cb48-122">This is a prerequisite toomove resources connected toohello virtual network.</span></span>
* <span data-ttu-id="2cb48-123">Виртуальные сети, шлюзы и связанные развертывания в виртуальной сети hello, вложенные tooan канал ExpressRoute, в которых может находиться в той же подписке hello миграции toohello диспетчер ресурсов среды без простоев.</span><span class="sxs-lookup"><span data-stu-id="2cb48-123">Virtual networks, gateways, and associated deployments within hello virtual network that are attached tooan ExpressRoute circuit in hello same subscription can be migrated toohello Resource Manager environment without any downtime.</span></span> <span data-ttu-id="2cb48-124">Вы можете использовать hello шаги описанных далее toomigrate ресурсы, такие как виртуальные сети, шлюзы и виртуальных машин, развернутых в виртуальной сети hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-124">You can follow hello steps described later toomigrate resources such as virtual networks, gateways, and virtual machines deployed within hello virtual network.</span></span> <span data-ttu-id="2cb48-125">Необходимо убедиться, что виртуальные сети hello настроены правильно прежде чем переносить их.</span><span class="sxs-lookup"><span data-stu-id="2cb48-125">You must ensure that hello virtual networks are configured correctly before they are migrated.</span></span> 
* <span data-ttu-id="2cb48-126">Виртуальные сети, шлюзы и связанных развертываний в виртуальной сети hello, которых нет в hello той же подписке, как hello канал ExpressRoute требуется некоторое время простоя toocomplete hello миграции.</span><span class="sxs-lookup"><span data-stu-id="2cb48-126">Virtual networks, gateways, and associated deployments within hello virtual network that are not in hello same subscription as hello ExpressRoute circuit require some downtime toocomplete hello migration.</span></span> <span data-ttu-id="2cb48-127">Последний раздел Hello hello документа описываются hello действия toobe за toomigrate ресурсы.</span><span class="sxs-lookup"><span data-stu-id="2cb48-127">hello last section of hello document describes hello steps toobe followed toomigrate resources.</span></span>
* <span data-ttu-id="2cb48-128">Виртуальную сеть с обоими шлюзами (ExpressRoute и VPN-шлюз) нельзя переместить.</span><span class="sxs-lookup"><span data-stu-id="2cb48-128">A virtual network with both ExpressRoute Gateway and VPN Gateway can't be migrated.</span></span>

## <a name="move-an-expressroute-circuit-from-classic-tooresource-manager"></a><span data-ttu-id="2cb48-129">Переместить из классической tooResource диспетчера канал ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="2cb48-129">Move an ExpressRoute circuit from classic tooResource Manager</span></span>
<span data-ttu-id="2cb48-130">Необходимо переместить канал ExpressRoute из классической toohello hello диспетчер ресурсов среды, прежде чем пытаться toomigrate ресурсы, которые являются присоединен toohello канал ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2cb48-130">You must move an ExpressRoute circuit from hello classic toohello Resource Manager environment before you try toomigrate resources that are attached toohello ExpressRoute circuit.</span></span> <span data-ttu-id="2cb48-131">tooaccomplish это задача, см. следующие статьи hello:</span><span class="sxs-lookup"><span data-stu-id="2cb48-131">tooaccomplish this task, see hello following articles:</span></span>

* <span data-ttu-id="2cb48-132">Проверьте сведения hello предоставляется на условиях [переход с классической tooResource диспетчера канал ExpressRoute](expressroute-move.md).</span><span class="sxs-lookup"><span data-stu-id="2cb48-132">Review hello information that is provided under [Moving an ExpressRoute circuit from classic tooResource Manager](expressroute-move.md).</span></span>
* <span data-ttu-id="2cb48-133">[Переместить канала из классической tooResource диспетчера с помощью Azure PowerShell](expressroute-howto-move-arm.md).</span><span class="sxs-lookup"><span data-stu-id="2cb48-133">[Move a circuit from classic tooResource Manager using Azure PowerShell](expressroute-howto-move-arm.md).</span></span>
* <span data-ttu-id="2cb48-134">С помощью портала управления службами Azure hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-134">Use hello Azure Service Management portal.</span></span> <span data-ttu-id="2cb48-135">Можно выполнить рабочий процесс hello слишком[создайте новый канал ExpressRoute](expressroute-howto-circuit-portal-resource-manager.md) и выберите вариант импорта hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-135">You can follow hello workflow too[create a new ExpressRoute circuit](expressroute-howto-circuit-portal-resource-manager.md) and select hello import option.</span></span> 

<span data-ttu-id="2cb48-136">При этой операции прости не возникают.</span><span class="sxs-lookup"><span data-stu-id="2cb48-136">This operation does not involve downtime.</span></span> <span data-ttu-id="2cb48-137">Вы можете продолжить tootransfer данных между вашей организацией и Microsoft hello миграции во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="2cb48-137">You can continue tootransfer data between your premises and Microsoft while hello migration is in progress.</span></span>

## <a name="migrate-virtual-networks-gateways-and-associated-deployments"></a><span data-ttu-id="2cb48-138">Перенос виртуальных сетей, шлюзов и связанных развертываний</span><span class="sxs-lookup"><span data-stu-id="2cb48-138">Migrate virtual networks, gateways, and associated deployments</span></span>

<span data-ttu-id="2cb48-139">Hello действия выполните toomigrate зависят ли ресурсы находятся в hello той же подписке и/или в разных подписках.</span><span class="sxs-lookup"><span data-stu-id="2cb48-139">hello steps you follow toomigrate depend on whether your resources are in hello same subscription, different subscriptions, or both.</span></span>

### <a name="migrate-virtual-networks-gateways-and-associated-deployments-in-hello-same-subscription-as-hello-expressroute-circuit"></a><span data-ttu-id="2cb48-140">Перенос виртуальных сетей, шлюзы, и связанных развертываний в одной подписке hello, как hello канал ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="2cb48-140">Migrate virtual networks, gateways, and associated deployments in hello same subscription as hello ExpressRoute circuit</span></span>
<span data-ttu-id="2cb48-141">В этом разделе описываются toomigrate toobe за действия hello виртуальной сети, шлюз и связанных развертываний в hello той же подписке, как hello канал ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="2cb48-141">This section describes hello steps toobe followed toomigrate a virtual network, gateway, and associated deployments in hello same subscription as hello ExpressRoute circuit.</span></span> <span data-ttu-id="2cb48-142">При таком переносе простои не возникают.</span><span class="sxs-lookup"><span data-stu-id="2cb48-142">No downtime is associated with this migration.</span></span> <span data-ttu-id="2cb48-143">Вы можете продолжить toouse все ресурсы в процессе миграции hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-143">You can continue toouse all resources through hello migration process.</span></span> <span data-ttu-id="2cb48-144">Hello плоскости управления блокируется во время миграции hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-144">hello management plane is locked while hello migration is in progress.</span></span> 

1. <span data-ttu-id="2cb48-145">Убедитесь, что канал ExpressRoute hello была перенесена в hello toohello классический диспетчер ресурсов среды.</span><span class="sxs-lookup"><span data-stu-id="2cb48-145">Ensure that hello ExpressRoute circuit has been moved from hello classic toohello Resource Manager environment.</span></span>
2. <span data-ttu-id="2cb48-146">Убедитесь, что hello виртуальной сети был подготовлен надлежащим образом для миграции hello.</span><span class="sxs-lookup"><span data-stu-id="2cb48-146">Ensure that hello virtual network has been prepared appropriately for hello migration.</span></span>
3. <span data-ttu-id="2cb48-147">Зарегистрируйте подписку для переноса ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2cb48-147">Register your subscription for resource migration.</span></span> <span data-ttu-id="2cb48-148">tooregister подписки для миграции ресурсов, используйте hello, следующий фрагмент команды PowerShell:</span><span class="sxs-lookup"><span data-stu-id="2cb48-148">tooregister your subscription for resource migration, use hello following PowerShell snippet:</span></span>

  ```powershell 
  Select-AzureRmSubscription -SubscriptionName <Your Subscription Name>
  Register-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  Get-AzureRmResourceProvider -ProviderNamespace Microsoft.ClassicInfrastructureMigrate
  ```
4. <span data-ttu-id="2cb48-149">Выполните проверку, подготовку и миграцию.</span><span class="sxs-lookup"><span data-stu-id="2cb48-149">Validate, prepare, and migrate.</span></span> <span data-ttu-id="2cb48-150">toomove hello виртуальной сети, используйте hello, следующий фрагмент команды PowerShell:</span><span class="sxs-lookup"><span data-stu-id="2cb48-150">toomove hello virtual network, use hello following PowerShell snippet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Prepare $vnetName  
  Move-AzureVirtualNetwork -Commit $vnetName
  ```

  <span data-ttu-id="2cb48-151">Можно также прервать миграции, выполнив следующий командлет PowerShell hello:</span><span class="sxs-lookup"><span data-stu-id="2cb48-151">You can also abort migration by running hello following PowerShell cmdlet:</span></span>

  ```powershell
  Move-AzureVirtualNetwork -Abort $vnetName
  ```

## <a name="next-steps"></a><span data-ttu-id="2cb48-152">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2cb48-152">Next steps</span></span>
* [<span data-ttu-id="2cb48-153">Поддерживаемые платформы миграции IaaS ресурсов от классических tooAzure диспетчера ресурсов</span><span class="sxs-lookup"><span data-stu-id="2cb48-153">Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* [<span data-ttu-id="2cb48-154">Технические близкое знакомство с платформа поддерживается перенос из классической tooAzure диспетчера ресурсов</span><span class="sxs-lookup"><span data-stu-id="2cb48-154">Technical deep dive on platform-supported migration from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager-deep-dive.md)
* [<span data-ttu-id="2cb48-155">Вопросы и ответы: Поддерживаемые платформой миграции IaaS ресурсов от классических tooAzure диспетчера ресурсов</span><span class="sxs-lookup"><span data-stu-id="2cb48-155">FAQs: Platform-supported migration of IaaS resources from classic tooAzure Resource Manager</span></span>](../virtual-machines/virtual-machines-windows-migration-classic-resource-manager.md)
* <span data-ttu-id="2cb48-156">[Common errors during Classic to Azure Resource Manager migration](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Распространенные ошибки при переносе из классической модели на модель Azure Resource Manager)</span><span class="sxs-lookup"><span data-stu-id="2cb48-156">[Review most common migration errors and mitigations](../virtual-machines/windows/migration-classic-resource-manager-errors.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json)</span></span>
