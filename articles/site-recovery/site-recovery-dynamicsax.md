---
title: "aaaReplicate развертывания многоуровневого Dynamics AX, с помощью Azure Site Recovery | Документы Microsoft"
description: "В этой статье описывается как tooreplicate и защитить с помощью Azure Site Recovery Dynamics AX"
services: site-recovery
documentationcenter: 
author: asgang
manager: rochakm
editor: 
ms.assetid: 9126f5e8-e9ed-4c31-b6b4-bf969c12c184
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 8/24/2017
ms.author: asgang
ms.openlocfilehash: b974315ec50ab2ec43846b3d3f95c7de88b72fc3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-dynamics-ax-application-using-azure-site-recovery"></a>Репликация многоуровневого приложения Dynamics AX с помощью Azure Site Recovery

## <a name="overview"></a>Обзор


Microsoft Dynamics AX является одним из наиболее популярных решений ERP hello среди предприятий toostandardized процесса в расположениях, управления ресурсами и упрощая соответствие. Учитывая приложение hello — критический tooan организации является очень важным toobe убедиться, что, если любой аварии, приложение должно быть запущен и работает в кратчайшие сроки.

На данный момент Microsoft Dynamics AX не предоставляет какие-либо готовые функции аварийного восстановления. Microsoft Dynamics AX состоит из многих компонентов сервера как базы данных объекта сервера приложений, Active Directory (AD), SQL Server, SharePoint Server, и т.д. сервер отчетов toomanage hello аварийного восстановления для каждого из этих компонентов вручную, не только ресурсоемким, но также вероятность ошибок.

В этой статье подробно рассматривается создание решения аварийного восстановления для приложения Dynamics AX с помощью [Azure Site Recovery](site-recovery-overview.md). Кроме того, рассматривается плановая, незапланированная и тестовая отработка отказа с помощью плана восстановления одним щелчком, поддерживаемых конфигураций и необходимых компонентов.
Решение аварийного восстановления на основе Azure Site Recovery полностью протестировано, сертифицировано и рекомендовано рабочей группой Microsoft Dynamics AX.



## <a name="prerequisites"></a>Предварительные требования

Реализация аварийного восстановления для приложения Dynamics AX, с помощью Azure Site Recovery требует hello следующих предварительных требований завершена.

•   Локальное развертывание Dynamics AX настроено.

•   Хранилище служб Azure Site Recovery создано в подписке Microsoft Azure.

• Если Azure является сайта аварийного восстановления, запустите hello Оценка готовности виртуальной машины Azure на виртуальные машины tooensure, они были совместимы с виртуальными машинами Azure и служб Azure Site Recovery


## <a name="site-recovery-support"></a>Поддержка Site Recovery

Hello целью написания данной статьи использовались виртуальные машины VMware с Dynamics AX 2012R3 на Windows Server 2012 R2 Enterprise. Как репликация восстановления сайтов не зависит от приложения, рекомендации hello приведены здесь ожидаемый toohold также в следующих сценариях.

### <a name="source-and-target"></a>Исходный и целевой объект

**Сценарий** | **tooa вторичного сайта** | **tooAzure**
--- | --- | ---
**Hyper-V** | Да | Да
**VMware** | Да | Да
**Физический сервер** | Да | Да

## <a name="enable-dr-of-dynamics-ax-application-using-azure-site-recovery"></a>Реализация аварийного восстановления для приложений Dynamics AX с помощью Azure Site Recovery
### <a name="protect-your-dynamics-ax-application"></a>Защита приложения Dynamics AX
Каждый компонент toobe потребностей Dynamics AX hello защищенных репликации полное приложение hello tooenable и восстановления. В этом разделе:

**1. Защита Active Directory**

**2. Защита уровня SQL**

**3. Защита уровня приложений и веб-уровня**

**4. Конфигурация сети**

**5. План восстановления**

### <a name="1-setup-ad-and-dns-replication"></a>1. Настройка AD и репликация DNS

На сайте аварийного восстановления hello toofunction приложение Dynamics AX требуется Active Directory. Существует две рекомендуемые варианты в зависимости от сложности hello hello клиента в локальной среде.

**Вариант 1**

Если у клиента hello небольшое количество приложений и один контроллер домена для всей своей локального сайта и будет завершаться hello всего узла вместе, то мы рекомендуем использовать ASR репликации tooreplicate hello контроллера домена компьютере toosecondary сайта ( применимо для сайта tooSite и tooAzure сайта).

**Вариант 2**

Если hello клиента имеет большое количество приложений и выполняется в лесу Active Directory и переключается несколько приложений одновременно, то рекомендуется настроить дополнительный контроллер домена на сайте hello аварийного восстановления (вторичного сайта или в Azure).

См. слишком[дополнительное руководство по на доступность контроллера домена на сайте аварийного восстановления](site-recovery-active-directory.md). Далее в этом документе подразумевается, что контроллер домена доступен на сайте аварийного восстановления.

### <a name="2-setup-sql-server-replication"></a>2) Настройка репликации SQL Server
Подробное техническое руководство по hello, рекомендуется использовать параметр для защиты см. руководство по toocompanion [уровня SQL](site-recovery-sql.md).

### <a name="3-enable-protection-for-dynamics-ax-client-and-aos-vms"></a>3. Включение защиты для клиента Dynamics AX и виртуальных машин AOS
Выполнить на ли hello виртуальных машин, развернутых на основе конфигурации Azure Site Recovery [Hyper-V](site-recovery-hyper-v-site-to-azure.md) или [VMware](site-recovery-vmware-to-azure.md).

> [!TIP]
> Рекомендуемые tooconfigure частота для согласованности аварийного завершения составляет 15 минут.
>

Hello ниже моментального снимка состояние hello защиты виртуальных машин Dynamics компонента в сценарий защиты «TooAzure сайт VMware».
![Защищенные элементы](./media/site-recovery-dynamics-ax/protecteditems.png)

### <a name="4-configure-networking"></a>4. Настройка сети
Настройка параметров вычислений и сети для виртуальной машины

Для клиента AX hello и виртуальных машин AOS конфигурации сети в Azure Site Recovery, чтобы сети виртуальных Машин hello получить вложенные toohello правильной сети аварийного восстановления после отработки отказа. Убедитесь, что сетевой hello аварийного восстановления для этих уровней является маршрутизируемым toohello уровня SQL.

Можно выбрать hello виртуальной Машины в hello реплицируются параметры сети hello tooconfigure элементов как показано ниже снимка hello.

* Для серверов AOS выберите набор правильное значение доступности hello.

* Если используется статический IP-адрес, а затем укажите IP-адрес hello требуется hello tootake виртуальной машины в hello **целевой IP-адрес** поле ![параметры сети](./media/site-recovery-dynamics-ax/vmpropertiesaos1.png)



### <a name="5-creating-a-recovery-plan"></a>5. Создание плана восстановления

В процессе отработки отказа hello tooautomate Azure Site Recovery, можно создать план восстановления. Добавьте в план восстановления hello уровень приложения и веб-уровня. Расположите их в разные группы так, hello переднего плана завершения работы до уровня приложения.

1)  Выберите хранилище Azure Site Recovery hello в вашей подписке и щелкните плитку «Планы восстановления».

2)  Нажмите кнопку "Добавить план восстановления" и укажите имя.

3)  Выберите hello «Источник» и «Целевой объект». Hello цель может быть Azure или вторичного сайта. В случае, если выбран Azure, необходимо указать модель развертывания hello

![Создание плана восстановления](./media/site-recovery-dynamics-ax/recoveryplancreation1.png)

4)  Выберите hello AOS и план восстановления toohello виртуальные машины клиента и нажмите кнопку ✓.
![Создание плана восстановления](./media/site-recovery-dynamics-ax/selectvms.png)


![План восстановления](./media/site-recovery-dynamics-ax/recoveryplan.png)

Hello план восстановления для приложения Dynamics AX можно настроить, добавив различные действия, как описано ниже. Hello выше моментального снимка показывает hello всего плана восстановления после добавления всех шагов hello.

*Действия:*

*1. Действия по отработке отказа для SQL Server.*

См. слишком[«Решения аварийного восстановления SQL Server»](site-recovery-sql.md) дополнительное руководство по подробные сведения о сервере tooSQL определенные шаги восстановления.

*2. Переход на другой ресурс группа 1: Отработки отказа виртуальных машин AOS hello*

Убедитесь, что выбранная точка восстановления hello максимально близко базы данных возможно toohello PIT, но не вперед.

*3. Скрипт: Подсистема балансировки нагрузки добавить (только E-A)* добавления сценария (с помощью службы автоматизации Azure) после группы ВМ AOS появится tooadd tooit подсистемы балансировки нагрузки. Эту задачу можно использовать toodo сценария. См. в статье [как tooadd Подсистема балансировки нагрузки для многоуровневого приложения аварийного восстановления](https://azure.microsoft.com/blog/cloud-migration-and-disaster-recovery-of-load-balanced-multi-tier-applications-using-azure-site-recovery/)

*4. Переход на другой ресурс группа 2: Переход на клиенте AX hello виртуальных машин.*
При сбое hello веб-уровень виртуальных машин в рамках плана восстановления hello.


### <a name="doing-a-test-failover"></a>Тестовая отработка отказа

Too'AD решение аварийного восстановления см. "и «Решения аварийного восстановления SQL Server» Дополнительные руководства для конкретных tooAD вопросы и SQL server, соответственно, при тесте отработки отказа.

1.  Портал tooAzure перейти и выбрать хранилище Site Recovery.
2.  Щелкните hello плана восстановления, созданных для Dynamics AX.
3.  Щелкните "Тестовая отработка отказа".
4.  Выберите hello виртуальной сети toostart hello сбое процесс тестирования.
5.  После hello получателей среде можно выполнять вашей проверки.
6.  После завершения проверки hello, «Выполнить проверку» можно выбрать и hello тестовой среды отработки отказа будет очищен.

Выполните [в этом руководстве](site-recovery-test-failover-to-azure.md) toodo тестовой отработки отказа.

### <a name="doing-a-failover"></a>Отработка отказа

1.  Портал tooAzure перейти и выбрать хранилище Site Recovery.
2.  Щелкните hello плана восстановления, созданных для Dynamics AX.
3.  Щелкните "Отработка отказа" и выберите "Отработка отказа".
4.  Выберите целевой сети hello и щелкните процесс ✓ toostart hello отработки отказа.

При выполнении отработки отказа используйте [это руководство](site-recovery-failover.md).

### <a name="perform-a-failback"></a>Восстановление размещения

Ссылки too'SQL решение аварийного восстановления сервера "дополнительное руководство по для сервера tooSQL определенные вопросы при отработке отказа.

1.  Портал tooAzure перейти и выбрать хранилище Site Recovery.
2.  Щелкните hello плана восстановления, созданных для Dynamics AX.
3.  Щелкните "Отработка отказа" и выберите "Отработка отказа".
4.  Щелкните "Изменить направление".
5.  Выберите соответствующие параметры hello - синхронизации данных и параметры создания виртуальной Машины
6.  Щелкните ✓ toostart hello «процесс восстановления размещения».


При восстановлении размещения используйте [это руководство](site-recovery-failback-azure-to-vmware.md).

##<a name="summary"></a>Сводка
С помощью Azure Site Recovery можно создать полностью автоматизированный план аварийного восстановления для приложения Dynamics AX. Вы может инициировать отработку отказа hello в течение секунды из любого места в hello событий перебои и получить приложение hello работающий в минутах.

## <a name="next-steps"></a>Дальнейшие действия
Чтение [какие рабочие нагрузки защитить?](site-recovery-workload.md) toolearn Дополнительные сведения о защите рабочих нагрузок предприятия с помощью Azure Site Recovery.
