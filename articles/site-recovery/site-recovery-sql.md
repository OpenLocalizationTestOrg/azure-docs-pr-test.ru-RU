---
title: "Репликация приложений с помощью SQL Server и Azure Site Recovery | Документы Майкрософт"
description: "В этой статье рассматривается репликация SQL Server с помощью возможностей аварийного восстановления SQL Server и Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 9126f5e8-e9ed-4c31-b6b4-bf969c12c184
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: pratshar
ms.openlocfilehash: e53f60979e01a0eabe118d3ae6457a61bd4b0ded
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="protect-sql-server-using-sql-server-disaster-recovery-and-azure-site-recovery"></a><span data-ttu-id="9aace-103">Защита SQL Server с помощью аварийного восстановления SQL Server и Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-103">Protect SQL Server using SQL Server disaster recovery and Azure Site Recovery</span></span>

<span data-ttu-id="9aace-104">В этой статье описывается способ организации защиты серверной части SQL Server приложения с помощью сочетания технологий непрерывности бизнес-процессов и аварийного восстановления (BCDR) SQL Server и [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9aace-104">This article describes how to protect the SQL Server back end of an application using a combination of SQL Server business continuity and disaster recovery (BCDR) technologies, and [Azure Site Recovery](site-recovery-overview.md).</span></span>

<span data-ttu-id="9aace-105">Прежде чем начать, убедитесь, что вы ознакомлены с возможностями аварийного восстановления SQL Server, включая отказоустойчивую кластеризацию, группы доступности AlwaysOn, зеркальное отображение базы данных и доставку журналов.</span><span class="sxs-lookup"><span data-stu-id="9aace-105">Before you start, make sure you understand SQL Server disaster recovery capabilities, including failover clustering, Always On availability groups, database mirroring, and log shipping.</span></span>


## <a name="sql-server-deployments"></a><span data-ttu-id="9aace-106">Развертывания SQL Server</span><span class="sxs-lookup"><span data-stu-id="9aace-106">SQL Server deployments</span></span>

<span data-ttu-id="9aace-107">Многие рабочие нагрузки используют SQL Server как основу, которую можно интегрировать с такими приложениями, как SharePoint, Dynamics и SAP, для реализации служб данных.</span><span class="sxs-lookup"><span data-stu-id="9aace-107">Many workloads use SQL Server as a foundation, and it can be integrated with apps such as SharePoint, Dynamics, and SAP, to implement data services.</span></span>  <span data-ttu-id="9aace-108">Вы можете развернуть SQL Server несколькими способами:</span><span class="sxs-lookup"><span data-stu-id="9aace-108">SQL Server can be deployed in a number of ways:</span></span>

* <span data-ttu-id="9aace-109">**Изолированный сервер SQL Server**. SQL Server и все базы данных размещаются на одном компьютере (физическом или виртуальном).</span><span class="sxs-lookup"><span data-stu-id="9aace-109">**Standalone SQL Server**: SQL Server and all databases are hosted on a single machine (physical or a virtual).</span></span> <span data-ttu-id="9aace-110">Если сервер виртуальный, то для обеспечения локальной высокой доступности используется кластеризация размещения.</span><span class="sxs-lookup"><span data-stu-id="9aace-110">When virtualized, host clustering is used for local high availability.</span></span> <span data-ttu-id="9aace-111">Высокая доступность на уровне гостя не обеспечивается.</span><span class="sxs-lookup"><span data-stu-id="9aace-111">Guest-level high availability isn't implemented.</span></span>
* <span data-ttu-id="9aace-112">**Экземпляры отказоустойчивых кластеров SQL Server (Always On FCI).** В этом случае два или несколько узлов экземпляров SQL Server с общими дисками настраиваются в отказоустойчивом кластере Windows.</span><span class="sxs-lookup"><span data-stu-id="9aace-112">**SQL Server Failover Clustering Instances (Always On FCI)**: Two or more nodes running SQL Server instanced with shared disks are configured in a Windows Failover cluster.</span></span> <span data-ttu-id="9aace-113">Если узел не работает, кластер может выполнить отработку отказа SQL Server в другой экземпляр.</span><span class="sxs-lookup"><span data-stu-id="9aace-113">If a node is down, the cluster can fail SQL Server over to another instance.</span></span> <span data-ttu-id="9aace-114">Эта настройка обычно используется для реализации высокого уровня доступности на основном сайте.</span><span class="sxs-lookup"><span data-stu-id="9aace-114">This setup is typically used to implement high availability at a primary site.</span></span> <span data-ttu-id="9aace-115">Этот тип развертывания не защищает от сбоев и неполадок на уровне общего хранилища.</span><span class="sxs-lookup"><span data-stu-id="9aace-115">This deployment doesn't protect against failure or outage in the shared storage layer.</span></span> <span data-ttu-id="9aace-116">Общий диск может быть реализован с использованием интерфейса iSCSI, Fiber Channel или общих VHDX-файлов.</span><span class="sxs-lookup"><span data-stu-id="9aace-116">A shared disk can be implemented using iSCSI, fiber channel or shared vhdx.</span></span>
* <span data-ttu-id="9aace-117">**Группы доступности SQL AlwaysOn.** В этом случае два или несколько узлов настраиваются в кластере без общих ресурсов, в котором базы данных SQL Server настроены в группе доступности с синхронной репликацией и автоматической отработкой отказа.</span><span class="sxs-lookup"><span data-stu-id="9aace-117">**SQL Always On Availability Groups**: Two or more nodes are set up in a shared nothing cluster, with SQL Server databases configured in an availability group, with synchronous replication and automatic failover.</span></span>

 <span data-ttu-id="9aace-118">Ниже описаны исходные технологии аварийного восстановления SQL для восстановления баз данных на удаленном сайте.</span><span class="sxs-lookup"><span data-stu-id="9aace-118">This article leverages the following native SQL disaster recovery technologies for recovering databases to a remote site:</span></span>

* <span data-ttu-id="9aace-119">Группы доступности SQL AlwaysOn, чтобы обеспечить аварийное восстановление для выпуска SQL Server Enterprise 2012 или 2014.</span><span class="sxs-lookup"><span data-stu-id="9aace-119">SQL Always On Availability Groups, to provide for disaster recovery for SQL Server 2012 or 2014 Enterprise editions.</span></span>
* <span data-ttu-id="9aace-120">Зеркальное отображение базы данных SQL в режиме высокого уровня безопасности для SQL Server Standard (любой версии) или SQL Server 2008 R2.</span><span class="sxs-lookup"><span data-stu-id="9aace-120">SQL database mirroring in high safety mode, for SQL Server Standard edition (any version), or for SQL Server 2008 R2.</span></span>

## <a name="site-recovery-support"></a><span data-ttu-id="9aace-121">Поддержка Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-121">Site Recovery support</span></span>

### <a name="supported-scenarios"></a><span data-ttu-id="9aace-122">Поддерживаемые сценарии использования.</span><span class="sxs-lookup"><span data-stu-id="9aace-122">Supported scenarios</span></span>
<span data-ttu-id="9aace-123">В таблице представлены сведения о защите SQL Server службой Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="9aace-123">Site Recovery can protect SQL Server as summarized in the table.</span></span>

<span data-ttu-id="9aace-124">**Сценарий**</span><span class="sxs-lookup"><span data-stu-id="9aace-124">**Scenario**</span></span> | <span data-ttu-id="9aace-125">**На дополнительный сайт**</span><span class="sxs-lookup"><span data-stu-id="9aace-125">**To a secondary site**</span></span> | <span data-ttu-id="9aace-126">**В Azure**</span><span class="sxs-lookup"><span data-stu-id="9aace-126">**To Azure**</span></span>
--- | --- | ---
<span data-ttu-id="9aace-127">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="9aace-127">**Hyper-V**</span></span> | <span data-ttu-id="9aace-128">Да</span><span class="sxs-lookup"><span data-stu-id="9aace-128">Yes</span></span> | <span data-ttu-id="9aace-129">Да</span><span class="sxs-lookup"><span data-stu-id="9aace-129">Yes</span></span>
<span data-ttu-id="9aace-130">**VMware**</span><span class="sxs-lookup"><span data-stu-id="9aace-130">**VMware**</span></span> | <span data-ttu-id="9aace-131">Да</span><span class="sxs-lookup"><span data-stu-id="9aace-131">Yes</span></span> | <span data-ttu-id="9aace-132">Да</span><span class="sxs-lookup"><span data-stu-id="9aace-132">Yes</span></span>
<span data-ttu-id="9aace-133">**Физический сервер**</span><span class="sxs-lookup"><span data-stu-id="9aace-133">**Physical server**</span></span> | <span data-ttu-id="9aace-134">Да</span><span class="sxs-lookup"><span data-stu-id="9aace-134">Yes</span></span> | <span data-ttu-id="9aace-135">Да</span><span class="sxs-lookup"><span data-stu-id="9aace-135">Yes</span></span>

### <a name="supported-sql-server-versions"></a><span data-ttu-id="9aace-136">Поддерживаемые версии SQL Server</span><span class="sxs-lookup"><span data-stu-id="9aace-136">Supported SQL Server versions</span></span>
<span data-ttu-id="9aace-137">Для соответствующих сценариев поддерживаются следующие версии SQL Server:</span><span class="sxs-lookup"><span data-stu-id="9aace-137">These SQL Server versions are supported, for the supported scenarios:</span></span>

* <span data-ttu-id="9aace-138">SQL Server 2016 Enterprise и Standard;</span><span class="sxs-lookup"><span data-stu-id="9aace-138">SQL Server 2016 Enterprise and Standard</span></span>
* <span data-ttu-id="9aace-139">SQL Server 2014 Enterprise и Standard;</span><span class="sxs-lookup"><span data-stu-id="9aace-139">SQL Server 2014 Enterprise and Standard</span></span>
* <span data-ttu-id="9aace-140">SQL Server 2012 Enterprise и Standard;</span><span class="sxs-lookup"><span data-stu-id="9aace-140">SQL Server 2012 Enterprise and Standard</span></span>
* <span data-ttu-id="9aace-141">SQL Server 2008 R2 Enterprise и Standard.</span><span class="sxs-lookup"><span data-stu-id="9aace-141">SQL Server 2008 R2 Enterprise and Standard</span></span>

### <a name="supported-sql-server-integration"></a><span data-ttu-id="9aace-142">Поддерживаемая интеграция SQL Server</span><span class="sxs-lookup"><span data-stu-id="9aace-142">Supported SQL Server integration</span></span>

<span data-ttu-id="9aace-143">Site Recovery может интегрироваться с собственными технологиями SQL Server BCDR, перечисленными в таблице ниже, для создания решения аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="9aace-143">Site Recovery can be integrated with native SQL Server BCDR technologies summarized in the table, to provide a disaster recovery solution.</span></span>

<span data-ttu-id="9aace-144">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="9aace-144">**Feature**</span></span> | <span data-ttu-id="9aace-145">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="9aace-145">**Details**</span></span> | <span data-ttu-id="9aace-146">**SQL Server**</span><span class="sxs-lookup"><span data-stu-id="9aace-146">**SQL Server**</span></span> |
--- | --- | ---
<span data-ttu-id="9aace-147">**Группы доступности AlwaysOn**</span><span class="sxs-lookup"><span data-stu-id="9aace-147">**Always On availability group**</span></span> | <span data-ttu-id="9aace-148">Несколько отдельных экземпляров SQL Server, каждый из которых запущен в отказоустойчивом кластере с несколькими узлами.</span><span class="sxs-lookup"><span data-stu-id="9aace-148">Multiple standalone instances of SQL Server each run in a failover cluster that has multiple nodes.</span></span><br/><br/><span data-ttu-id="9aace-149">Базы данных можно объединить в группы отработки отказа, которые затем можно скопировать (зеркальное отображение) на экземпляры SQL Server, благодаря чему исключается необходимость в общем хранилище.</span><span class="sxs-lookup"><span data-stu-id="9aace-149">Databases can be grouped into failover groups that can be copied (mirrored) on SQL Server instances so that no shared storage is needed.</span></span><br/><br/><span data-ttu-id="9aace-150">Обеспечивает аварийное восстановление между основным сайтом и одним или несколькими дополнительными сайтами.</span><span class="sxs-lookup"><span data-stu-id="9aace-150">Provides disaster recovery between a primary site and one or more secondary sites.</span></span> <span data-ttu-id="9aace-151">Два узла можно настроить в кластере без общих ресурсов, в котором базы данных SQL Server настроены в группе доступности с синхронной репликацией и автоматической отработкой отказа.</span><span class="sxs-lookup"><span data-stu-id="9aace-151">Two nodes can be set up in a shared nothing cluster with SQL Server databases configured in an availability group with synchronous replication and automatic failover.</span></span> | <span data-ttu-id="9aace-152">SQL Server Enterprise 2014 и 2012</span><span class="sxs-lookup"><span data-stu-id="9aace-152">SQL Server 2014 & 2012 Enterprise edition</span></span>
<span data-ttu-id="9aace-153">**Отказоустойчивая кластеризация (AlwaysOn FCI)**</span><span class="sxs-lookup"><span data-stu-id="9aace-153">**Failover clustering (Always On FCI)**</span></span> | <span data-ttu-id="9aace-154">SQL Server применяет отказоустойчивую кластеризацию Windows для обеспечения высокого уровня доступности локальных рабочих нагрузок SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-154">SQL Server leverages Windows failover clustering for high availability of on-premises SQL Server workloads.</span></span><br/><br/><span data-ttu-id="9aace-155">Узлы, на которых выполняются экземпляры SQL Server с общими дисками, настроены в отказоустойчивом кластере.</span><span class="sxs-lookup"><span data-stu-id="9aace-155">Nodes running instances of SQL Server with shared disks are configured in a failover cluster.</span></span> <span data-ttu-id="9aace-156">Если экземпляр выходит из строя, выполняется переход кластера на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="9aace-156">If an instance is down the cluster fails over to different one.</span></span><br/><br/><span data-ttu-id="9aace-157">Кластер не обеспечивает защиту от сбоев или простоев в общем хранилище.</span><span class="sxs-lookup"><span data-stu-id="9aace-157">The cluster doesn't protect against failure or outages in shared storage.</span></span> <span data-ttu-id="9aace-158">Общий диск может быть реализован с использованием интерфейса iSCSI, Fiber Channel или с помощью в общих VHDX-файлов.</span><span class="sxs-lookup"><span data-stu-id="9aace-158">The shared disk can be implemented with iSCSI, fiber channel, or shared VHDXs.</span></span> | <span data-ttu-id="9aace-159">Выпуски SQL Server Enterprise</span><span class="sxs-lookup"><span data-stu-id="9aace-159">SQL Server Enterprise editions</span></span><br/><br/><span data-ttu-id="9aace-160">SQL Server Standard (ограничено только двумя узлами)</span><span class="sxs-lookup"><span data-stu-id="9aace-160">SQL Server Standard edition (limited to two nodes only)</span></span>
<span data-ttu-id="9aace-161">**Зеркальное отображение базы данных (в режиме высокого уровня безопасности)**</span><span class="sxs-lookup"><span data-stu-id="9aace-161">**Database mirroring (high safety mode)**</span></span> | <span data-ttu-id="9aace-162">Защищает одну базу данных переносом в одну дополнительную копию.</span><span class="sxs-lookup"><span data-stu-id="9aace-162">Protects a single database to a single secondary copy.</span></span> <span data-ttu-id="9aace-163">Доступно как в режиме репликации с высоким уровнем безопасности (синхронный режим), так и в режиме репликации с высоким уровнем производительности (асинхронный режим).</span><span class="sxs-lookup"><span data-stu-id="9aace-163">Available in both high safety (synchronous) and high performance (asynchronous) replication modes.</span></span> <span data-ttu-id="9aace-164">Не требует наличия отказоустойчивого кластера.</span><span class="sxs-lookup"><span data-stu-id="9aace-164">Doesn’t require a failover cluster.</span></span> | <span data-ttu-id="9aace-165">SQL Server 2008 R2</span><span class="sxs-lookup"><span data-stu-id="9aace-165">SQL Server 2008 R2</span></span><br/><br/><span data-ttu-id="9aace-166">Все выпуски SQL Server Enterprise</span><span class="sxs-lookup"><span data-stu-id="9aace-166">SQL Server Enterprise all editions</span></span>
<span data-ttu-id="9aace-167">**Автономный SQL Server**</span><span class="sxs-lookup"><span data-stu-id="9aace-167">**Standalone SQL Server**</span></span> | <span data-ttu-id="9aace-168">SQL Server и база данных находятся на одном сервере (физическом или виртуальном).</span><span class="sxs-lookup"><span data-stu-id="9aace-168">The SQL Server and database are hosted on a single server (physical or virtual).</span></span> <span data-ttu-id="9aace-169">Если сервер виртуальный, то кластеризация размещения используется для обеспечения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="9aace-169">Host clustering is used for high availability if the server is virtual.</span></span> <span data-ttu-id="9aace-170">Без высокой доступности гостевого уровня.</span><span class="sxs-lookup"><span data-stu-id="9aace-170">No guest-level high availability.</span></span> | <span data-ttu-id="9aace-171">Выпуск Enterprise или Standard</span><span class="sxs-lookup"><span data-stu-id="9aace-171">Enterprise or Standard edition</span></span>

## <a name="deployment-recommendations"></a><span data-ttu-id="9aace-172">Рекомендации по развертыванию</span><span class="sxs-lookup"><span data-stu-id="9aace-172">Deployment recommendations</span></span>

<span data-ttu-id="9aace-173">В таблице перечислены рекомендации относительно интеграции технологий SQL Server BCDR в Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="9aace-173">This table summarizes our recommendations for integrating SQL Server BCDR technologies with Site Recovery.</span></span>

| <span data-ttu-id="9aace-174">**Версия**</span><span class="sxs-lookup"><span data-stu-id="9aace-174">**Version**</span></span> | <span data-ttu-id="9aace-175">**Выпуск**</span><span class="sxs-lookup"><span data-stu-id="9aace-175">**Edition**</span></span> | <span data-ttu-id="9aace-176">**Развертывание**</span><span class="sxs-lookup"><span data-stu-id="9aace-176">**Deployment**</span></span> | <span data-ttu-id="9aace-177">**От локального к локальным**</span><span class="sxs-lookup"><span data-stu-id="9aace-177">**On-prem to on-prem**</span></span> | <span data-ttu-id="9aace-178">**От локального к Azure**</span><span class="sxs-lookup"><span data-stu-id="9aace-178">**On-prem to Azure**</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="9aace-179">SQL Server 2014 или 2012</span><span class="sxs-lookup"><span data-stu-id="9aace-179">SQL Server 2014 or 2012</span></span> |<span data-ttu-id="9aace-180">Enterprise</span><span class="sxs-lookup"><span data-stu-id="9aace-180">Enterprise</span></span> |<span data-ttu-id="9aace-181">Экземпляр отказоустойчивого кластера</span><span class="sxs-lookup"><span data-stu-id="9aace-181">Failover cluster instance</span></span> |<span data-ttu-id="9aace-182">Группы доступности AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="9aace-182">Always On availability groups</span></span> |<span data-ttu-id="9aace-183">Группы доступности AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="9aace-183">Always On availability groups</span></span> |
|| <span data-ttu-id="9aace-184">Enterprise</span><span class="sxs-lookup"><span data-stu-id="9aace-184">Enterprise</span></span> |<span data-ttu-id="9aace-185">Группы доступности AlwaysOn для обеспечения высокой доступности</span><span class="sxs-lookup"><span data-stu-id="9aace-185">Always On availability groups for high availability</span></span> |<span data-ttu-id="9aace-186">Группы доступности AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="9aace-186">Always On availability groups</span></span> |<span data-ttu-id="9aace-187">Группы доступности AlwaysOn</span><span class="sxs-lookup"><span data-stu-id="9aace-187">Always On availability groups</span></span> | |
|| <span data-ttu-id="9aace-188">Standard</span><span class="sxs-lookup"><span data-stu-id="9aace-188">Standard</span></span> |<span data-ttu-id="9aace-189">Экземпляр отказоустойчивого кластера (FCI)</span><span class="sxs-lookup"><span data-stu-id="9aace-189">Failover cluster instance (FCI)</span></span> |<span data-ttu-id="9aace-190">Репликация Site Recovery с локальным зеркалом</span><span class="sxs-lookup"><span data-stu-id="9aace-190">Site Recovery replication with local mirror</span></span> |<span data-ttu-id="9aace-191">Репликация Site Recovery с локальным зеркалом</span><span class="sxs-lookup"><span data-stu-id="9aace-191">Site Recovery replication with local mirror</span></span> | |
|| <span data-ttu-id="9aace-192">Enterprise или Standard</span><span class="sxs-lookup"><span data-stu-id="9aace-192">Enterprise or Standard</span></span> |<span data-ttu-id="9aace-193">Автономный</span><span class="sxs-lookup"><span data-stu-id="9aace-193">Standalone</span></span> |<span data-ttu-id="9aace-194">Репликация Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-194">Site Recovery replication</span></span> |<span data-ttu-id="9aace-195">Репликация Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-195">Site Recovery replication</span></span> | |
| <span data-ttu-id="9aace-196">SQL Server 2008 R2 или 2008</span><span class="sxs-lookup"><span data-stu-id="9aace-196">SQL Server 2008 R2 or 2008</span></span> |<span data-ttu-id="9aace-197">Enterprise или Standard</span><span class="sxs-lookup"><span data-stu-id="9aace-197">Enterprise or Standard</span></span> |<span data-ttu-id="9aace-198">Экземпляр отказоустойчивого кластера (FCI)</span><span class="sxs-lookup"><span data-stu-id="9aace-198">Failover cluster instance (FCI)</span></span> |<span data-ttu-id="9aace-199">Репликация Site Recovery с локальным зеркалом</span><span class="sxs-lookup"><span data-stu-id="9aace-199">Site Recovery replication with local mirror</span></span> |<span data-ttu-id="9aace-200">Репликация Site Recovery с локальным зеркалом</span><span class="sxs-lookup"><span data-stu-id="9aace-200">Site Recovery replication with local mirror</span></span> |
|| <span data-ttu-id="9aace-201">Enterprise или Standard</span><span class="sxs-lookup"><span data-stu-id="9aace-201">Enterprise or Standard</span></span> |<span data-ttu-id="9aace-202">Автономный</span><span class="sxs-lookup"><span data-stu-id="9aace-202">Standalone</span></span> |<span data-ttu-id="9aace-203">Репликация Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-203">Site Recovery replication</span></span> |<span data-ttu-id="9aace-204">Репликация Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-204">Site Recovery replication</span></span> | |
| <span data-ttu-id="9aace-205">SQL Server (любая версия)</span><span class="sxs-lookup"><span data-stu-id="9aace-205">SQL Server (Any version)</span></span> |<span data-ttu-id="9aace-206">Enterprise или Standard</span><span class="sxs-lookup"><span data-stu-id="9aace-206">Enterprise or Standard</span></span> |<span data-ttu-id="9aace-207">Экземпляр отказоустойчивого кластера — приложение DTC</span><span class="sxs-lookup"><span data-stu-id="9aace-207">Failover cluster instance - DTC application</span></span> |<span data-ttu-id="9aace-208">Репликация Site Recovery</span><span class="sxs-lookup"><span data-stu-id="9aace-208">Site Recovery replication</span></span> |<span data-ttu-id="9aace-209">Не поддерживается</span><span class="sxs-lookup"><span data-stu-id="9aace-209">Not Supported</span></span> |

## <a name="deployment-prerequisites"></a><span data-ttu-id="9aace-210">Предварительные условия для развертывания</span><span class="sxs-lookup"><span data-stu-id="9aace-210">Deployment prerequisites</span></span>

* <span data-ttu-id="9aace-211">Локальное развертывание SQL Server с поддерживаемой версией SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-211">An on-premises SQL Server deployment, running a supported SQL Server version.</span></span> <span data-ttu-id="9aace-212">Обычно также требуется служба Active Directory для SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-212">Typically, you also need Active Directory for your SQL server.</span></span>
* <span data-ttu-id="9aace-213">Необходимые условия для сценария, который требуется развернуть.</span><span class="sxs-lookup"><span data-stu-id="9aace-213">The requirements for the scenario you want to deploy.</span></span> <span data-ttu-id="9aace-214">Ознакомьтесь с дополнительными сведениями о требованиях к поддержке для [репликации в Azure](site-recovery-support-matrix-to-azure.md), [в локальную среду](site-recovery-support-matrix.md) и с [предварительными требованиями для развертывания](site-recovery-prereq.md).</span><span class="sxs-lookup"><span data-stu-id="9aace-214">Learn more about support requirements for [replication to Azure](site-recovery-support-matrix-to-azure.md) and [on-premises](site-recovery-support-matrix.md), and [deployment prerequisites](site-recovery-prereq.md).</span></span>
* <span data-ttu-id="9aace-215">Для настройки восстановления в Azure на виртуальных машинах SQL Server запустите средство [оценки готовности виртуальной машины Azure](http://www.microsoft.com/download/details.aspx?id=40898), чтобы убедиться в их совместимости с Azure и Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="9aace-215">To set up recovery in Azure, run the [Azure Virtual Machine Readiness Assessment](http://www.microsoft.com/download/details.aspx?id=40898) tool on your SQL Server virtual machines, to make sure they're compatible with Azure and Site Recovery.</span></span>

## <a name="set-up-active-directory"></a><span data-ttu-id="9aace-216">настроить Active Directory;</span><span class="sxs-lookup"><span data-stu-id="9aace-216">Set up Active Directory</span></span>

<span data-ttu-id="9aace-217">Для правильной работы SQL Server на дополнительном сайте восстановления вам потребуется настроить службу Active Directory.</span><span class="sxs-lookup"><span data-stu-id="9aace-217">Set up Active Directory, in the secondary recovery site, for SQL Server to run properly.</span></span>

* <span data-ttu-id="9aace-218">**Для малых предприятий.** Если у вас имеется небольшое количество приложений и один контроллер домена для локального сайта, то для выполнения отработки отказа всего сайта мы рекомендуем использовать репликацию Site Recovery для репликации контроллера домена в дополнительный центр обработки данных или в Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-218">**Small enterprise**—With a small number of applications, and single domain controller for the on-premises site, if you want to fail over the entire site, we recommend you use Site Recovery replication to replicate the domain controller to the secondary datacenter, or to Azure.</span></span>
* <span data-ttu-id="9aace-219">**Для средних и крупных предприятий**. Если у вас имеется большое количество приложений и лес Active Directory, то для выполнения отработки отказа для каждого отдельного приложения или рабочей нагрузки мы рекомендуем настроить дополнительный контроллер домена в дополнительном центре обработки данных или в Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-219">**Medium to large enterprise**—If you have a large number of applications, an Active Directory forest, and you want to fail over by application or workload, we recommend you set up an additional domain controller in the secondary datacenter, or in Azure.</span></span> <span data-ttu-id="9aace-220">При использовании групп доступности AlwaysOn для восстановления удаленного сайта мы рекомендуем настроить другой дополнительный контроллер домена на дополнительном сайте или в Azure, который будет использоваться для восстановленного экземпляра SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-220">If you're using Always On availability groups to recover to a remote site, we recommend you set up another additional domain controller on the secondary site or in Azure, to use for the recovered SQL Server instance.</span></span>

<span data-ttu-id="9aace-221">При выполнении инструкций, описанных в этой статье, предполагается, что в дополнительном расположении доступен контроллер домена.</span><span class="sxs-lookup"><span data-stu-id="9aace-221">The instructions in this article presume that a domain controller is available in the secondary location.</span></span> <span data-ttu-id="9aace-222">[Узнайте больше](site-recovery-active-directory.md) о защите Active Directory с помощью Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="9aace-222">[Read more](site-recovery-active-directory.md) about protecting Active Directory with Site Recovery.</span></span>


## <a name="integrate-with-sql-server-always-on-for-replication-to-azure"></a><span data-ttu-id="9aace-223">Интеграция с SQL Server AlwaysOn для репликации в Azure</span><span class="sxs-lookup"><span data-stu-id="9aace-223">Integrate with SQL Server Always On for replication to Azure</span></span>

<span data-ttu-id="9aace-224">Необходимо сделать следующее:</span><span class="sxs-lookup"><span data-stu-id="9aace-224">Here's what you need to do:</span></span>

1. <span data-ttu-id="9aace-225">Импортировать скрипты в учетную запись службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-225">Import scripts into your Azure Automation account.</span></span> <span data-ttu-id="9aace-226">Содержит скрипты для перехода на другой ресурс группы доступности SQL в [виртуальной машине Resource Manager](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAG.ps1) и [классической виртуальной машине](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAGClassic.ps1).</span><span class="sxs-lookup"><span data-stu-id="9aace-226">This contains the scripts to failover SQL Availability Group in a [Resource Manager virtual machine](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAG.ps1) and a [Classic virtual machine](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/asr-automation-recovery/scripts/ASR-SQL-FailoverAGClassic.ps1).</span></span>

    <span data-ttu-id="9aace-227">[![Развертывание в Azure](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c4803408-340e-49e3-9a1f-0ed3f689813d.png)](https://aka.ms/asr-automationrunbooks-deploy)</span><span class="sxs-lookup"><span data-stu-id="9aace-227">[![Deploy to Azure](https://azurecomcdn.azureedge.net/mediahandler/acomblog/media/Default/blog/c4803408-340e-49e3-9a1f-0ed3f689813d.png)](https://aka.ms/asr-automationrunbooks-deploy)</span></span>


1. <span data-ttu-id="9aace-228">Добавьте ASR SQL-FailoverAG как предварительное действие первой группы плана восстановления.</span><span class="sxs-lookup"><span data-stu-id="9aace-228">Add ASR-SQL-FailoverAG as a pre action of the first group of the recovery plan.</span></span>

1. <span data-ttu-id="9aace-229">Следуйте инструкциям в скрипте для создания переменной автоматизации, чтобы предоставить имя группы доступности.</span><span class="sxs-lookup"><span data-stu-id="9aace-229">Follow the instructions available in the script to create an automation variable to provide the name of the availability groups.</span></span>

### <a name="steps-to-do-a-test-failover"></a><span data-ttu-id="9aace-230">Действия по тестовой отработке отказа</span><span class="sxs-lookup"><span data-stu-id="9aace-230">Steps to do a test failover</span></span>

<span data-ttu-id="9aace-231">В SQL AlwaysOn нет встроенной поддержки тестовой отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="9aace-231">SQL Always On doesn’t natively support test failover.</span></span> <span data-ttu-id="9aace-232">Таким образом, мы рекомендуем следующее.</span><span class="sxs-lookup"><span data-stu-id="9aace-232">Therefore, we recommend the following:</span></span>

1. <span data-ttu-id="9aace-233">Установите [службу архивации Azure](../backup/backup-azure-vms.md) на виртуальной машине, где размещена реплика группы доступности в Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-233">Set up [Azure Backup](../backup/backup-azure-vms.md) on the virtual machine that hosts the availability group replica in Azure.</span></span>

1. <span data-ttu-id="9aace-234">Прежде чем активировать тестовую отработку отказа для плана восстановления, восстановите виртуальную машину из резервной копии, полученной на предыдущем шаге.</span><span class="sxs-lookup"><span data-stu-id="9aace-234">Before triggering test failover of the recovery plan, recover the virtual machine from the backup taken in the previous step.</span></span>

    ![<span data-ttu-id="9aace-235">Восстановление из службы архивации Azure</span><span class="sxs-lookup"><span data-stu-id="9aace-235">Restore from Azure Backup</span></span> ](./media/site-recovery-sql/restore-from-backup.png)

1. <span data-ttu-id="9aace-236">[Создайте принудительный кворум](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/force-a-wsfc-cluster-to-start-without-a-quorum#PowerShellProcedure) на виртуальной машине, восстановленной из резервной копии.</span><span class="sxs-lookup"><span data-stu-id="9aace-236">[Force a quorum](https://docs.microsoft.com/sql/sql-server/failover-clusters/windows/force-a-wsfc-cluster-to-start-without-a-quorum#PowerShellProcedure) in the virtual machine restored from backup.</span></span>

1. <span data-ttu-id="9aace-237">Обновите IP-адрес прослушивателя до IP-адреса в сети тестовой отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="9aace-237">Update IP of the listener to an IP available in the test failover network.</span></span>

    ![Обновление IP-адреса прослушивателя](./media/site-recovery-sql/update-listener-ip.png)

1. <span data-ttu-id="9aace-239">Подключите прослушиватель.</span><span class="sxs-lookup"><span data-stu-id="9aace-239">Bring listener online.</span></span>

    ![Подключение прослушивателя](./media/site-recovery-sql/bring-listener-online.png)

1. <span data-ttu-id="9aace-241">Создайте балансировщик нагрузки с одним IP-адресом, созданным во внешнем пуле IP-адресов, соответствующим каждому прослушивателю группы доступности, и с виртуальной машиной SQL, добавленной в серверный пул.</span><span class="sxs-lookup"><span data-stu-id="9aace-241">Create a load balancer with one IP created under frontend IP pool corresponding to each availability group listener and with the SQL virtual machine added in the backend pool.</span></span>

     ![<span data-ttu-id="9aace-242">Создание балансировщика нагрузки — внешний пул IP-адресов</span><span class="sxs-lookup"><span data-stu-id="9aace-242">Create Load Balancer - Frontend IP pool</span></span> ](./media/site-recovery-sql/create-load-balancer1.png)

    ![<span data-ttu-id="9aace-243">Создание балансировщика нагрузки — серверный пул IP-адресов</span><span class="sxs-lookup"><span data-stu-id="9aace-243">Create Load Balancer - Backend pool</span></span> ](./media/site-recovery-sql/create-load-balancer2.png)

1. <span data-ttu-id="9aace-244">Выполните тестовую отработку отказа для плана восстановления.</span><span class="sxs-lookup"><span data-stu-id="9aace-244">Do a test failover of the recovery plan.</span></span>

### <a name="steps-to-do-a-failover"></a><span data-ttu-id="9aace-245">Действия по отработке отказа</span><span class="sxs-lookup"><span data-stu-id="9aace-245">Steps to do a failover</span></span>

<span data-ttu-id="9aace-246">После добавления скрипта в план восстановления и проверки плана восстановления с помощью тестовой отработки отказа можно выполнить отработку отказа плана восстановления.</span><span class="sxs-lookup"><span data-stu-id="9aace-246">Once you have added the script in the recovery plan and validated the recovery plan by doing a test failover, you can do failover of the recovery plan.</span></span>


## <a name="integrate-with-sql-server-always-on-for-replication-to-a-secondary-on-premises-site"></a><span data-ttu-id="9aace-247">Интеграция с SQL Server AlwaysOn для репликации на дополнительный локальный сайт</span><span class="sxs-lookup"><span data-stu-id="9aace-247">Integrate with SQL Server Always On for replication to a secondary on-premises site</span></span>

<span data-ttu-id="9aace-248">Если SQL Server использует группы доступности для обеспечения высокой доступности (или экземпляр отказоустойчивого кластера), то на сайте восстановления также рекомендуется использовать группы доступности.</span><span class="sxs-lookup"><span data-stu-id="9aace-248">If the SQL Server is using availability groups for high availability (or an FCI), we recommend using availability groups on the recovery site as well.</span></span> <span data-ttu-id="9aace-249">Обратите внимание, что это актуально для приложений, не использующих распределенные транзакции.</span><span class="sxs-lookup"><span data-stu-id="9aace-249">Note that this applies to apps that don't use distributed transactions.</span></span>

1. <span data-ttu-id="9aace-250">[Настройте базы данных](https://msdn.microsoft.com/library/hh213078.aspx) для их добавления в группы доступности.</span><span class="sxs-lookup"><span data-stu-id="9aace-250">[Configure databases](https://msdn.microsoft.com/library/hh213078.aspx) into availability groups.</span></span>
1. <span data-ttu-id="9aace-251">Создайте на дополнительном сайте виртуальную сеть.</span><span class="sxs-lookup"><span data-stu-id="9aace-251">Create a virtual network on the secondary site.</span></span>
1. <span data-ttu-id="9aace-252">Настройте подключение VPN типа "сеть — сеть" между виртуальной сетью и основным сайтом.</span><span class="sxs-lookup"><span data-stu-id="9aace-252">Set up a site-to-site VPN connection between the virtual network, and the primary site.</span></span>
1. <span data-ttu-id="9aace-253">Создайте виртуальную машину на сайте восстановления и установите на нее SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-253">Create a virtual machine on the recovery site, and install SQL Server on it.</span></span>
1. <span data-ttu-id="9aace-254">Расширьте существующие группы доступности AlwaysOn для новой виртуальной машины SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-254">Extend the existing Always On availability groups to the new SQL Server VM.</span></span> <span data-ttu-id="9aace-255">Настройте этот экземпляр SQL Server в качестве копии асинхронной реплики.</span><span class="sxs-lookup"><span data-stu-id="9aace-255">Configure this SQL Server instance as an asynchronous replica copy.</span></span>
1. <span data-ttu-id="9aace-256">Создайте прослушиватель группы доступности или обновите существующий прослушиватель, включив в него виртуальную машину асинхронной реплики.</span><span class="sxs-lookup"><span data-stu-id="9aace-256">Create an availability group listener, or update the existing listener to include the asynchronous replica virtual machine.</span></span>
1. <span data-ttu-id="9aace-257">Убедитесь в том, что ферма приложений настроена с помощью прослушивателя.</span><span class="sxs-lookup"><span data-stu-id="9aace-257">Make sure that the application farm is set up using the listener.</span></span> <span data-ttu-id="9aace-258">Если настройка выполнена с использованием имени сервера базы данных, обновите его, чтобы использовать прослушиватель и избежать повторной настройки после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="9aace-258">If it's setup up using the database server name, update it to use the listener, so you don't need to reconfigure it after the failover.</span></span>

<span data-ttu-id="9aace-259">Для приложений, использующих распределенные транзакции, мы рекомендуем развернуть Site Recovery с помощью [репликации VMware или физического сервера типа "сеть — сеть"](site-recovery-vmware-to-vmware.md).</span><span class="sxs-lookup"><span data-stu-id="9aace-259">For applications that use distributed transactions, we recommend you deploy Site Recovery with [VMware/physical server site-to-site replication](site-recovery-vmware-to-vmware.md).</span></span>

### <a name="recovery-plan-considerations"></a><span data-ttu-id="9aace-260">Рекомендации по плану восстановления</span><span class="sxs-lookup"><span data-stu-id="9aace-260">Recovery plan considerations</span></span>
1. <span data-ttu-id="9aace-261">Добавьте этот образец сценария в библиотеку VMM на основном и дополнительном сайтах.</span><span class="sxs-lookup"><span data-stu-id="9aace-261">Add this sample script to the VMM library, on the primary and secondary sites.</span></span>

        Param(
        [string]$SQLAvailabilityGroupPath
        )
        import-module sqlps
        Switch-SqlAvailabilityGroup -Path $SQLAvailabilityGroupPath -AllowDataLoss -force

1. <span data-ttu-id="9aace-262">При создании плана восстановления для приложения добавьте предварительное действие в шаг "Group-1", которое запускает сценарий для отработки отказа групп доступности.</span><span class="sxs-lookup"><span data-stu-id="9aace-262">When you create a recovery plan for the application, add a pre action to Group-1 scripted step, that invokes the script to fail over availability groups.</span></span>

## <a name="protect-a-standalone-sql-server"></a><span data-ttu-id="9aace-263">Защита автономного сервера SQL Server</span><span class="sxs-lookup"><span data-stu-id="9aace-263">Protect a standalone SQL Server</span></span>

<span data-ttu-id="9aace-264">В этом примере для защиты компьютера SQL Server мы рекомендуем использовать репликацию Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="9aace-264">In this scenario, we recommend that you use Site Recovery replication to protect the SQL Server machine.</span></span> <span data-ttu-id="9aace-265">Конкретные шаги зависят от того, настроен ли SQL Server в качестве виртуальной машины или физического сервера, а также от необходимости реплицировать в Azure или в дополнительный локальный сайт.</span><span class="sxs-lookup"><span data-stu-id="9aace-265">The exact steps will depend whether SQL Server is a VM or a physical server, and whether you want to replicate to Azure or a secondary on-premises site.</span></span> <span data-ttu-id="9aace-266">Дополнительные сведения см. в статье [Что такое Site Recovery?](site-recovery-overview.md)</span><span class="sxs-lookup"><span data-stu-id="9aace-266">Learn about [Site Recovery scenarios](site-recovery-overview.md).</span></span>

## <a name="protect-a-sql-server-cluster-standard-editionwindows-server-2008-r2"></a><span data-ttu-id="9aace-267">Защита кластера SQL Server (версия Standard для Windows Server 2008 R2)</span><span class="sxs-lookup"><span data-stu-id="9aace-267">Protect a SQL Server cluster (standard edition/Windows Server 2008 R2)</span></span>

<span data-ttu-id="9aace-268">Для кластера под управлением выпуска SQL Server Standard или SQL Server 2008 R2 рекомендуется использовать репликацию Site Recovery для защиты SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9aace-268">For a cluster running SQL Server Standard edition, or SQL Server 2008 R2, we recommend you use Site Recovery replication to protect SQL Server.</span></span>

### <a name="on-premises-to-on-premises"></a><span data-ttu-id="9aace-269">Из локальной среды в локальную среду</span><span class="sxs-lookup"><span data-stu-id="9aace-269">On-premises to on-premises</span></span>

* <span data-ttu-id="9aace-270">Если приложение использует распределенные транзакции, мы рекомендуем развернуть [репликацию Site Recovery с SAN](site-recovery-vmm-san.md) для среды Hyper-V или [репликацию VMware или физического сервера в VMware](site-recovery-vmware-to-vmware.md) для среды VMware.</span><span class="sxs-lookup"><span data-stu-id="9aace-270">If the app uses distributed transactions we recommend you deploy [Site Recovery with SAN replication](site-recovery-vmm-san.md) for a Hyper-V environment, or [VMware/physical server to VMware](site-recovery-vmware-to-vmware.md) for a VMware environment.</span></span>
* <span data-ttu-id="9aace-271">Для приложений без DTC описанный выше метод позволяет восстановить кластер в качестве автономного сервера, используя локальное зеркало баз данных с высоким уровнем безопасности.</span><span class="sxs-lookup"><span data-stu-id="9aace-271">For non-DTC applications, use the above approach to recover the cluster as a standalone server, by leveraging a local high safety DB mirror.</span></span>

### <a name="on-premises-to-azure"></a><span data-ttu-id="9aace-272">Из локальной среды в Azure</span><span class="sxs-lookup"><span data-stu-id="9aace-272">On-premises to Azure</span></span>

<span data-ttu-id="9aace-273">Site Recovery не поддерживает гостевой кластер при репликации в Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-273">Site Recovery doesn't provide guest cluster support when replicating to Azure.</span></span> <span data-ttu-id="9aace-274">SQL Server также не предоставляет экономичное решение для аварийного восстановления для выпуска Standard.</span><span class="sxs-lookup"><span data-stu-id="9aace-274">SQL Server also doesn't provide a low-cost disaster recovery solution for Standard edition.</span></span> <span data-ttu-id="9aace-275">В этом примере мы рекомендуем защитить локальный кластер SQL Server в автономный сервер SQL Server и восстановить его в Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-275">In this scenario, we recommend you protect the on-premises SQL Server cluster to a standalone SQL Server, and recover it in Azure.</span></span>

1. <span data-ttu-id="9aace-276">Настройте дополнительный автономный экземпляр SQL Server в локальном сайте.</span><span class="sxs-lookup"><span data-stu-id="9aace-276">Configure an additional standalone SQL Server instance on the on-premises site.</span></span>
1. <span data-ttu-id="9aace-277">Настройте этот экземпляр в качестве зеркальной копии баз данных, которые требуется защитить.</span><span class="sxs-lookup"><span data-stu-id="9aace-277">Configure the instance to serve as a mirror for the databases you want to protect.</span></span> <span data-ttu-id="9aace-278">Настройте зеркальное отображение в режиме высокого уровня безопасности.</span><span class="sxs-lookup"><span data-stu-id="9aace-278">Configure mirroring in high safety mode.</span></span>
1. <span data-ttu-id="9aace-279">Настройте Site Recovery на локальном сайте для [Hyper-V](site-recovery-hyper-v-site-to-azure.md) или [виртуальных машин VMware либо физических серверов](site-recovery-vmware-to-azure-classic.md).</span><span class="sxs-lookup"><span data-stu-id="9aace-279">Configure Site Recovery on the on-premises site, for ([Hyper-V](site-recovery-hyper-v-site-to-azure.md) or [VMware VMs/physical servers)](site-recovery-vmware-to-azure-classic.md).</span></span>
1. <span data-ttu-id="9aace-280">Воспользуйтесь репликацией Site Recovery для репликации нового экземпляра SQL Server в Azure.</span><span class="sxs-lookup"><span data-stu-id="9aace-280">Use Site Recovery replication to replicate the new SQL Server instance to Azure.</span></span> <span data-ttu-id="9aace-281">Так как это зеркальная копия с высоким уровнем безопасности, она будет синхронизирована с основным кластером, однако в Azure она будет реплицирована с помощью репликации Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="9aace-281">Since it's a high safety mirror copy, it will be synchronized with the primary cluster, but it will be replicated to Azure using Site Recovery replication.</span></span>


![Стандартный кластер](./media/site-recovery-sql/standalone-cluster-local.png)

### <a name="failback-considerations"></a><span data-ttu-id="9aace-283">Рекомендации относительно восстановления размещения</span><span class="sxs-lookup"><span data-stu-id="9aace-283">Failback considerations</span></span>

<span data-ttu-id="9aace-284">В случае стандартных кластеров SQL Server восстановление размещения после внеплановой отработки отказа требует выполнения резервного копирования SQL Server и его восстановления из экземпляра зеркала в исходный кластер с повторной установкой зеркала.</span><span class="sxs-lookup"><span data-stu-id="9aace-284">For SQL Server Standard clusters, failback after an unplanned failover requires a SQL server backup and restore, from the mirror instance to the original cluster, with reestablishment of the mirror.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9aace-285">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="9aace-285">Next steps</span></span>
<span data-ttu-id="9aace-286">Дополнительные сведения об архитектуре Site Recovery см. [здесь](site-recovery-components.md).</span><span class="sxs-lookup"><span data-stu-id="9aace-286">[Learn more](site-recovery-components.md) about Site Recovery architecture.</span></span>
