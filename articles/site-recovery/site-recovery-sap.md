---
title: "развертывание приложений SAP NetWeaver многоуровневых приложений, с помощью Azure Site Recovery aaaProtect | Документы Microsoft"
description: "В этой статье описывается, как tooprotect SAP NetWeaver развертывания приложений, с помощью Azure Site Recovery"
services: site-recovery
documentationcenter: 
author: mayanknayar
manager: rochakm
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/07/2017
ms.author: manayar
ms.openlocfilehash: 34651c7b14d23a44005372f4f923c401e0224231
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="protect-a-multi-tier-sap-netweaver-application-deployment-using-azure-site-recovery"></a>Защита многоуровневого развертывания приложения SAP NetWeaver с помощью Azure Site Recovery

Для большинства больших и средних развертываний SAP используется какая-либо разновидность решения аварийного восстановления.  важность Hello надежных и тестируемых решений аварийного восстановления увеличилось как дополнительные основные бизнес-процессы, переместить tooapplications, таких как SAP.  Azure Site Recovery был тестирования и интеграции с приложениями SAP и превышает возможности hello большинство решений аварийного восстановления в локальной среде, выполните сократить совокупную стоимость владения (TCO) чем конкурирующих решения.
Служба Azure Site Recovery предоставляет следующие возможности:
* Включите защиту SAP NetWeaver и NetWeaver нерабочей приложений, работающих в локальной среде, копируя tooAzure компонентов.
* Включите защиту SAP NetWeaver и NetWeaver нерабочей приложений, работающих в Azure, путем репликации tooanother компоненты центра обработки данных Azure.
* Упрощение миграции в облако, с помощью Site Recovery toomigrate вашей tooAzure развертывания SAP.
* упрощение обновления, тестирования и создания прототипов проектов SAP путем создания рабочего клона по запросу для тестирования приложений SAP.

В этой статье описывается, как tooprotect SAP NetWeaver развертывания приложения, с помощью [Azure Site Recovery](site-recovery-overview.md). В этой статье приведены рекомендации по hello по защита трехуровневого развертывания SAP NetWeaver в Azure, копируя tooanother центра обработки данных Azure с помощью Azure Site Recovery hello Поддерживаемые сценарии и конфигурации, и как переход на другой ресурс tooperform обоих тестов Переход на другой ресурс (аварийного восстановления) и фактический переход на другой ресурс.


## <a name="prerequisites"></a>Предварительные требования
Прежде чем начать, убедитесь, что вы понимаете следующие hello:

1. [Репликация tooAzure виртуальной машины](azure-to-azure-walkthrough-enable-replication.md)
2. Как слишком[проектирования сети восстановления](site-recovery-azure-to-azure-networking-guidance.md)
3. [Выполнив tooAzure теста отработки отказа](azure-to-azure-walkthrough-test-failover.md)
4. [Выполнив tooAzure отработки отказа](site-recovery-failover.md)
5. Как слишком[репликации контроллера домена](site-recovery-active-directory.md)
6. Как слишком[репликации SQL Server](site-recovery-sql.md)

## <a name="supported-scenarios"></a>Поддерживаемые сценарии использования.
С помощью Azure Site Recovery можно реализовать решение аварийного восстановления для hello следующие сценарии:
* Системы SAP, работающие в одном центре данных Azure, репликация tooanother центра обработки данных Azure (аварийного восстановления Azure для Azure), которые рассчитаны [здесь](https://aka.ms/asr-a2a-architecture).
* Системы SAP, работающие на серверах VMWare (или физических) в локальной репликации сайта tooa аварийного восстановления в центре обработки данных Azure (DR VMware для Azure), которой требуются некоторые дополнительные компоненты, как разработана [здесь](https://aka.ms/asr-v2a-architecture).
* Системы SAP, работающие на узле Hyper-V в локальной репликации сайта tooa аварийного восстановления в центре обработки данных Azure (аварийного восстановления Hyper-V для Azure), что требует дополнительных компонентов, как разработана [здесь](https://aka.ms/asr-h2a-architecture).

В этом документе используется возможности аварийного восстановления hello первого варианта - аварийного восстановления Azure для Azure — toodemonstrate Azure Site Recovery SAP. Как репликация Azure Site Recovery не зависит от приложения, hello процесс, описанный — ожидаемый toohold также в других ситуациях.

### <a name="required-foundation-services"></a>Требуемые основные службы
Все это документации были развернуты вместе с hello после развертывания служб WCF:
* ExpressRoute или виртуальная частная сеть (VPN) типа "сеть — сеть".
* По крайней мере один контроллер домена Active Directory и DNS-сервер, работающий в Azure.

Рекомендуется этой выше hello инфраструктуры является установленным предыдущих toodeploying Azure Site Recovery.


## <a name="typical-sap-application-deployment"></a>Типичное развертывание приложения SAP
Между отдельными приложениями SAP 6 too20 обычно развертывания крупных клиентов SAP.  Большинство из этих приложений основаны на hello SAP NetWeaver ABAP Java ядер.  Для поддержки этих основных приложений NetWeaver используется множество специальных изолированных обработчиков (не SAP NetWeaver) и, как правило, некоторые сторонние приложения (не SAP).  

Это критическое tooinventory обработка всех приложений SAP hello, выполняемых в альбомной и toodetermine hello режима развертывания (2-уровневой или 3-уровневой), версии, исправления, размеры, частоту и требования к дисковому сохраняемости.

![Модель развертывания](./media/site-recovery-sap/sap-typical-deployment.png)

уровень сохраняемости Hello базы данных SAP должны быть защищены через hello собственного средства СУБД, такие как SQL Server AlwaysOn, Oracle DataGuard или HANA системы репликации. Уровень клиента Hello также не защищен Azure Site Recovery, но это tooconsider важные разделы, в которых повлиять на этот уровень, такие как задержка распространения записей DNS, безопасности и удаленного доступа toohello аварийного восстановления центра обработки данных.

Azure Site Recovery не рекомендуется использовать решение для уровня приложения hello, включая (A) SCS hello. Другие приложения, например приложений не SAP и NetWeaver SAP является частью hello в целом SAP среду развертывания, а также должны быть защищены с помощью Azure Site Recovery.

## <a name="replicate-virtual-machines"></a>Репликация виртуальных машин
Выполните [в этом руководстве](azure-to-azure-walkthrough-enable-replication.md) toostart реплицирования hello toohello виртуальные машины приложения SAP аварийного восстановления центра обработки данных Azure.

При использовании статического IP-адреса можно указать IP-адрес hello требуется hello tootake виртуальной машины в разделе карты hello сетевой интерфейс в вычислительных и сетевых параметров.

![Целевой IP-адрес](./media/site-recovery-sap/sap-static-ip.png)


## <a name="creating-a-recovery-plan"></a>Создание плана восстановления
План восстановления позволяет последовательность отработки отказа hello различных уровней многоуровневого приложения, таким образом, поддерживая согласованность приложения. Следуйте инструкциям hello [здесь](site-recovery-create-recovery-plans.md) при создании плана восстановления для многоуровневого веб-приложения.

### <a name="adding-scripts-toohello-recovery-plan"></a>Добавление плана восстановления toohello сценариев
Может потребоваться toodo определенных операций над hello Azure виртуальные машины после отработки отказа или тестовой отработки отказа для вашего приложения toofunction правильно. Можно автоматизировать операцию отработки отказа post hello, таких как обновление DNS-запись и изменение привязок и подключений, путем добавления в план восстановления hello сценариев, как описано в [в этой статье](site-recovery-create-recovery-plans.md#add-scripts).

### <a name="dns-update"></a>Обновление DNS
Если hello DNS настроен для динамического обновления DNS, а затем виртуальные машины обычно дополнить hello DNS hello новый IP-адрес после их запуска. Tooadd явные шаг tooupdate DNS, с hello новый IP-адреса виртуальных машин hello затем добавить это [скрипт tooupdate IP-адрес в DNS](https://aka.ms/asr-dns-update) как действие post в группы плана восстановления.  

## <a name="example-azure-to-azure-deployment"></a>Пример развертывания из Azure в Azure
Описываемый следующей сценарии аварийного восстановления Azure для Azure Azure Site Recovery hello диаграмме hello:
* Hello основного центра обработки данных находится в Сингапур (Azure Южная-Восточной Азии) и hello аварийного восстановления центра обработки данных — Гонконг (Восточная Азия Azure).  В этом сценарии высокий уровень доступности локальной среды обеспечивается двумя виртуальными машинами SQL Server AlwaysOn в Сингапуре, работающими в синхронном режиме.
* Hello ASCS общую папку файл может быть используется tooprovide высокого уровня ДОСТУПНОСТИ для hello SAP единых точек отказа. Для ASCS файлового ресурса не требуется ни общий диск кластера, ни такие приложения, как SIOS.
* Защита аварийного восстановления для уровня СУБД hello достигается с помощью асинхронной репликации.
* Этот сценарий демонстрирует «симметричная аварийного восстановления —» термин используется toodescribe решение аварийного восстановления, который является точной копией рабочей, поэтому hello решение аварийного восстановления SQL Server имеет высокий уровень доступности локальных ресурсов. Hello использование симметричных аварийного восстановления не является обязательным для hello уровня базы данных и многие клиенты используют облачные развертывания toobuild локального узла высокого уровня доступности гибкость hello быстро после события аварийного восстановления.
* Hello диаграмма изображает hello SAP NetWeaver ASCS и уровень сервера приложений, реплицироваться с помощью Azure Site Recovery.

![Сценарий репликации](./media/site-recovery-sap/sap-replication-scenario.png)

## <a name="doing-a-test-failover"></a>Тестовая отработка отказа
Выполните [в этом руководстве](azure-to-azure-walkthrough-test-failover.md) toodo тестовой отработки отказа.

1.  Портал tooAzure перейти и выбрать хранилище служб восстановления.
2.  Щелкните hello плана восстановления, созданных для приложений SAP (s).
3.  Щелкните "Тестовая отработка отказа".
4.  Выберите точку восстановления и процесс перехода на другой ресурс тестирования hello toostart виртуальной сети Azure.
5.  После hello получателей среде можно выполнять вашей проверки.
6.  После завершения проверки hello, щелкните «Очистка тестирования» и tooclean hello отработка отказа среды.

## <a name="doing-a-failover"></a>Отработка отказа
При выполнении отработки отказа используйте [это руководство](site-recovery-failover.md).

1.  Портал tooAzure перейти и выбрать хранилище служб восстановления.
2.  Щелкните hello плана восстановления, созданных для приложений SAP.
3.  Щелкните "Отработка отказа".
4.  Выберите процесс отработки отказа hello toostart точки восстановления.

## <a name="next-steps"></a>Дальнейшие действия
Узнайте больше о создании решения аварийного восстановления для развертываний SAP NetWeaver с помощью Azure Site Recovery, прочитав [этот технический документ](http://aka.ms/asr-sap). Hello техническом документе также рассматриваются рекомендации для разных архитектур SAP, список поддерживаемых приложений и типов ВМ для SAP в Azure и описывает возможные планы тестирования для решения аварийного восстановления.

Узнайте больше о [репликации других рабочих нагрузок](site-recovery-workload.md) с помощью Site Recovery.
