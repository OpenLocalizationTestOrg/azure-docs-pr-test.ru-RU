---
title: "отработка отказа aaaTest (VMM tooVMM) в Azure Site Recovery | Документы Microsoft"
description: "Azure Site Recovery координирует hello репликации, отработки отказа и восстановления виртуальных машин и физических серверов. Дополнительные сведения о tooAzure отработки отказа или вторичный центр обработки данных."
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 06/05/2017
ms.author: pratshar
ms.openlocfilehash: 6b4f65ab692cbb0665102c4f51ea0694151cd3ae
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="test-failover-vmm-toovmm-in-site-recovery"></a><span data-ttu-id="6bcdd-104">Тестовая отработка отказа (VMM tooVMM) в компоненте восстановления сайта</span><span class="sxs-lookup"><span data-stu-id="6bcdd-104">Test failover (VMM tooVMM) in Site Recovery</span></span>


<span data-ttu-id="6bcdd-105">В данной статье содержатся сведения и инструкции по тестовой отработке отказа или тренировке аварийного восстановления виртуальных машин и физических серверов, защищенных с помощью Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="6bcdd-105">This article provides information and instructions for doing a test failover or a disaster recovery (DR) drill of virtual machines (VMs) and physical servers that are protected with Azure Site Recovery.</span></span> <span data-ttu-id="6bcdd-106">С управлением System Center Virtual Machine Manager VMM на локальном сайте будет использоваться как hello восстановления сайта.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-106">You'll use a System Center Virtual Machine Manager (VMM)-managed on-premises site as hello recovery site.</span></span>

<span data-ttu-id="6bcdd-107">Запустить тест отработки отказа toovalidate стратегии репликации или выполнить детализация аварийного восстановления без потери данных или простоя.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-107">You run a test failover toovalidate your replication strategy or perform a DR drill without any data loss or downtime.</span></span> <span data-ttu-id="6bcdd-108">Тестовой отработки отказа не негативного влияния на выполняющуюся репликацию hello или на рабочую среду.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-108">A test failover doesn't have any impact on hello ongoing replication or on your production environment.</span></span> <span data-ttu-id="6bcdd-109">Ее можно выполнять на виртуальной машине или в [плане восстановления](site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-109">You can run it on either a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="6bcdd-110">Когда Запуск тестовой отработки отказа, вам нужно toospecify hello сети, к которой будет подключаться hello тестовые виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-110">When you're triggering a test failover, you need toospecify hello network that hello test virtual machines will connect to.</span></span> <span data-ttu-id="6bcdd-111">Можно отслеживать ход выполнения hello hello тестовой отработки отказа на hello **заданий** страницы.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-111">You can track hello progress of hello test failover on hello **Jobs** page.</span></span>  

<span data-ttu-id="6bcdd-112">Если вы используете комментарии или вопросы, задайте их hello нижней части этой статьи, или на hello [форум по службам восстановления Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-112">If you have any comments or questions, post them at hello bottom of this article or on hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="prepare-hello-infrastructure-for-test-failover"></a><span data-ttu-id="6bcdd-113">Подготовка инфраструктуры hello для тестовой отработки отказа</span><span class="sxs-lookup"><span data-stu-id="6bcdd-113">Prepare hello infrastructure for test failover</span></span>
<span data-ttu-id="6bcdd-114">Если требуется toorun тестовую отработку отказа с использованием существующей сети, подготовьте Active Directory, DHCP и DNS в этой сети.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-114">If you want toorun a test failover by using an existing network, prepare Active Directory, DHCP, and DNS in that network.</span></span>

<span data-ttu-id="6bcdd-115">Требуется toorun тестовой отработки отказа с помощью сети виртуальных Машин toocreate параметр hello автоматически добавьте ручной шаг перед Group-1 в план восстановления hello ты toouse для тестовой отработки отказа hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-115">If you want toorun a test failover by using hello option toocreate VM networks automatically, add a manual step before Group-1 in hello recovery plan that you’re going toouse for hello test failover.</span></span> <span data-ttu-id="6bcdd-116">Затем добавьте hello инфраструктуры ресурсы toohello автоматически создается сети, прежде чем выполнить тестовую отработку отказа hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-116">Then, add hello infrastructure resources toohello automatically created network before you run hello test failover.</span></span>

### <a name="things-toonote"></a><span data-ttu-id="6bcdd-117">Toonote действия</span><span class="sxs-lookup"><span data-stu-id="6bcdd-117">Things toonote</span></span>
<span data-ttu-id="6bcdd-118">При выполнении репликации tooa вторичного сайта, тип сети, что использует машины hello реплики не требуется тип hello toomatch логической сети, используемой для тестовой отработки отказа, но может не работать некоторые сочетания hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-118">When you're replicating tooa secondary site, hello type of network that hello replica machine uses doesn’t need toomatch hello type of logical network used for test failover, but some combinations might not work.</span></span> <span data-ttu-id="6bcdd-119">Если реплика hello использует DHCP и изоляцию на основе виртуальной ЛС, hello сеть виртуальных Машин для реплики hello не требуется пул статических IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-119">If hello replica uses DHCP and VLAN-based isolation, hello VM network for hello replica doesn't need a static IP address pool.</span></span> <span data-ttu-id="6bcdd-120">С помощью виртуализации сети Windows для hello тестовой отработки отказа не будет работать, так как нет пулы адресов недоступны.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-120">So using Windows Network Virtualization for hello test failover won't work because no address pools are available.</span></span> 

<span data-ttu-id="6bcdd-121">Кроме того hello тестовой отработки отказа не будут работать при hello реплики сети используется без изоляции и hello тестовой сети использует виртуализацию сети Windows.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-121">In addition, hello test failover won't work if hello replica network uses no isolation and hello test network uses Windows Network Virtualization.</span></span> <span data-ttu-id="6bcdd-122">Это объясняется hello без изоляции сети не требуется toocreate hello подсетей сети виртуализация сети Windows.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-122">This is because hello no-isolation network doesn't have hello subnets required toocreate a Windows Network Virtualization network.</span></span>

<span data-ttu-id="6bcdd-123">Как реплики виртуальных машин, подключенных toomapped сетей виртуальных Машин после отработки отказа зависит от того, как сеть виртуальной Машины hello настроена в консоли VMM hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-123">How replica virtual machines are connected toomapped VM networks after failover depends on how hello VM network is configured in hello VMM console.</span></span>

#### <a name="vm-network-configured-with-no-isolation-or-vlan-isolation"></a><span data-ttu-id="6bcdd-124">Сеть виртуальных машин настроенная без изоляции или с изоляцией виртуальной локальной сети</span><span class="sxs-lookup"><span data-stu-id="6bcdd-124">VM network configured with no isolation or VLAN isolation</span></span>
<span data-ttu-id="6bcdd-125">Если DHCP определен для сети виртуальной Машины hello, hello реплики виртуальной машины — подключенных toohello идентификатор виртуальной локальной сети через hello параметры, указанные для сетевого сайта hello в связанной логической сетью hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-125">If DHCP is defined for hello VM network, hello replica virtual machine is connected toohello VLAN ID through hello settings that are specified for hello network site in hello associated logical network.</span></span> <span data-ttu-id="6bcdd-126">Виртуальная машина Hello получает свой IP-адрес с hello доступных DHCP-сервера.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-126">hello virtual machine receives its IP address from hello available DHCP server.</span></span> 

<span data-ttu-id="6bcdd-127">Toodefine пул статических IP-адресов не требуется для hello целевой сети ВМ.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-127">You don't need toodefine a static IP address pool for hello target VM network.</span></span> <span data-ttu-id="6bcdd-128">При использовании статических IP-адресов для сети виртуальной Машины hello hello реплики виртуальной машины — подключенных toohello идентификатор виртуальной локальной сети через hello параметры, указанные для сетевого сайта hello в связанной логической сетью hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-128">If a static IP address pool is used for hello VM network, hello replica virtual machine is connected toohello VLAN ID through hello settings that are specified for hello network site in hello associated logical network.</span></span>

<span data-ttu-id="6bcdd-129">Виртуальная машина Hello получает свой IP-адрес из пула hello, которая определена для сети виртуальной Машины hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-129">hello virtual machine receives its IP address from hello pool that's defined for hello VM network.</span></span> <span data-ttu-id="6bcdd-130">Если в целевой сети ВМ hello не определен статический пул IP-адресов, произойдет сбой выделения IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-130">If a static IP address pool isn't defined on hello target VM network, IP address allocation will fail.</span></span> <span data-ttu-id="6bcdd-131">Создайте пул IP-адресов hello на обоих hello исходных и целевых серверах VMM, будет использоваться для защиты и восстановления.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-131">Create hello IP address pool on both hello source and target VMM servers that you will use for protection and recovery.</span></span>

#### <a name="vm-network-with-windows-network-virtualization"></a><span data-ttu-id="6bcdd-132">Сеть виртуальных машин с виртуализацией сети Windows</span><span class="sxs-lookup"><span data-stu-id="6bcdd-132">VM network with Windows Network Virtualization</span></span>
<span data-ttu-id="6bcdd-133">Если сеть виртуальной Машины настроен с использованием виртуализации сети Windows, следует определить статический пул для hello целевой сети ВМ, независимо от того, hello исходную сеть виртуальных Машин настроенных toouse DHCP или пул статических IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-133">If a VM network is configured with Windows Network Virtualization, you should define a static pool for hello target VM network, regardless of whether hello source VM network is configured toouse DHCP or a static IP address pool.</span></span> 

<span data-ttu-id="6bcdd-134">Если DHCP определен, целевой сервер VMM hello выступает в роли DHCP-сервера и предоставляет IP-адрес из пула hello, определенного для целевой сети ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-134">If you define DHCP, hello target VMM server acts as a DHCP server and provides an IP address from hello pool that's defined for hello target VM network.</span></span> <span data-ttu-id="6bcdd-135">Если для исходного сервера hello определено использование статических IP-адресов, hello целевой сервер VMM выделяет IP-адрес из пула hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-135">If use of a static IP address pool is defined for hello source server, hello target VMM server allocates an IP address from hello pool.</span></span> <span data-ttu-id="6bcdd-136">Если пул статических IP-адресов не определен, то в обоих случаях выделение IP-адреса завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-136">In both cases, IP address allocation will fail if a static IP address pool is not defined.</span></span>


### <a name="prepare-dhcp"></a><span data-ttu-id="6bcdd-137">Подготовка DHCP</span><span class="sxs-lookup"><span data-stu-id="6bcdd-137">Prepare DHCP</span></span>
<span data-ttu-id="6bcdd-138">Hello виртуальные машины, участвующие в тестовой отработки отказа используется протокол DHCP, создать тест DHCP-сервера в изолированной сети hello тестовой отработки отказа с целью hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-138">If hello virtual machines involved in test failover use DHCP, create a test DHCP server within hello isolated network for hello purpose of test failover.</span></span>

### <a name="prepare-active-directory"></a><span data-ttu-id="6bcdd-139">Подготовка Active Directory</span><span class="sxs-lookup"><span data-stu-id="6bcdd-139">Prepare Active Directory</span></span>
<span data-ttu-id="6bcdd-140">toorun тестовую отработку отказа для тестирования приложений в тестовой среде нужна копия производственной среды Active Directory hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-140">toorun a test failover for application testing, you need a copy of hello production Active Directory environment in your test environment.</span></span> <span data-ttu-id="6bcdd-141">Дополнительные сведения см. в статье hello [тестирование отработки отказа рекомендации для Active Directory](site-recovery-active-directory.md#test-failover-considerations).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-141">For more information, review hello [test failover considerations for Active Directory](site-recovery-active-directory.md#test-failover-considerations).</span></span>

### <a name="prepare-dns"></a><span data-ttu-id="6bcdd-142">Подготовка DNS</span><span class="sxs-lookup"><span data-stu-id="6bcdd-142">Prepare DNS</span></span>
<span data-ttu-id="6bcdd-143">Подготовьте DNS-сервер для тестовой отработки отказа hello следующим образом:</span><span class="sxs-lookup"><span data-stu-id="6bcdd-143">Prepare a DNS server for hello test failover as follows:</span></span>

* <span data-ttu-id="6bcdd-144">**DHCP**: Если виртуальные машины используют DHCP, IP-адрес hello hello теста DNS должны обновляться на DHCP-сервере hello теста.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-144">**DHCP**: If virtual machines use DHCP, hello IP address of hello test DNS should be updated on hello test DHCP server.</span></span> <span data-ttu-id="6bcdd-145">Если вы используете сеть типа виртуализации сети Windows, сервер VMM hello действует как hello DHCP-сервера.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-145">If you’re using a network type of Windows Network Virtualization, hello VMM server acts as hello DHCP server.</span></span> <span data-ttu-id="6bcdd-146">Таким образом hello IP-адрес DNS должны обновляться в hello тестовой отработки отказа сети.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-146">Therefore, hello IP address of DNS should be updated in hello test failover network.</span></span> <span data-ttu-id="6bcdd-147">В этом случае hello виртуальные машины регистрируются toohello соответствующем DNS-сервере.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-147">In this case, hello virtual machines register themselves toohello relevant DNS server.</span></span>
* <span data-ttu-id="6bcdd-148">**Статический адрес**: Если виртуальные машины используют статические IP-адреса, hello IP-адрес DNS-сервера должны быть обновлены в тестовой отработки отказа сети теста hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-148">**Static address**: If virtual machines use a static IP address, hello IP address of hello test DNS server should be updated in test failover network.</span></span> <span data-ttu-id="6bcdd-149">Может потребоваться tooupdate DNS с IP-адрес hello hello тестовые виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-149">You might need tooupdate DNS with hello IP address of hello test virtual machines.</span></span> <span data-ttu-id="6bcdd-150">Можно использовать следующий пример скрипта для этой цели hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-150">You can use hello following sample script for this purpose:</span></span>

        Param(
        [string]$Zone,
        [string]$name,
        [string]$IP
        )
        $Record = Get-DnsServerResourceRecord -ZoneName $zone -Name $name
        $newrecord = $record.clone()
        $newrecord.RecordData[0].IPv4Address  =  $IP
        Set-DnsServerResourceRecord -zonename $zone -OldInputObject $record -NewInputObject $Newrecord



## <a name="run-a-test-failover"></a><span data-ttu-id="6bcdd-151">Запуск тестовой отработки отказа</span><span class="sxs-lookup"><span data-stu-id="6bcdd-151">Run a test failover</span></span>
<span data-ttu-id="6bcdd-152">Эта процедура описывает, как toorun тестовую отработку отказа для восстановления плане.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-152">This procedure describes how toorun a test failover for a recovery plan.</span></span> <span data-ttu-id="6bcdd-153">Кроме того, можно запустить hello отработку отказа для одной виртуальной машины на hello **виртуальные машины** вкладки.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-153">Alternatively, you can run hello failover for a single virtual machine on hello **Virtual Machines** tab.</span></span>

![Колонка "Тестирование отработки отказа"](./media/site-recovery-test-failover-vmm-to-vmm/TestFailover.png)

1. <span data-ttu-id="6bcdd-155">Выберите **Планы восстановления** > *имя_плана_восстановления*.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-155">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="6bcdd-156">Последовательно выберите пункты **Тип отработки отказа** > **Test Тип отработки отказа**.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-156">Click **Failover** > **Test Failover**.</span></span>
1. <span data-ttu-id="6bcdd-157">На hello **тестовой отработки отказа** колонки, указать, как виртуальные машины должны быть подключенных toonetworks после тестовой отработки отказа hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-157">On hello **Test Failover** blade, specify how virtual machines should be connected toonetworks after hello test failover.</span></span> <span data-ttu-id="6bcdd-158">Дополнительные сведения см. в разделе hello [параметры сетевой](#network-options-in-site-recovery).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-158">For more information, see hello [network options](#network-options-in-site-recovery).</span></span>
1. <span data-ttu-id="6bcdd-159">Отслеживать ход аварийного переключения на hello **заданий** вкладки.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-159">Track failover progress on hello **Jobs** tab.</span></span>
1. <span data-ttu-id="6bcdd-160">После завершения отработки отказа убедитесь, что hello виртуальные машины запускаются успешно.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-160">After failover is complete, verify that hello virtual machines start successfully.</span></span>
1. <span data-ttu-id="6bcdd-161">Когда закончите, нажмите кнопку **очистку тестовой отработки отказа** hello плана восстановления.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-161">When you're done, click **Cleanup test failover** on hello recovery plan.</span></span> <span data-ttu-id="6bcdd-162">В **заметки**, записать и сохранить все наблюдения, связанные с тестовой отработки отказа hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-162">In **Notes**, record and save any observations associated with hello test failover.</span></span> <span data-ttu-id="6bcdd-163">Этот шаг удаляет hello виртуальные машины и сети, которые были созданы во время тестовой отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-163">This step deletes hello virtual machines and networks that were created during test failover.</span></span>


## <a name="network-options-in-site-recovery"></a><span data-ttu-id="6bcdd-164">Параметры сети в Site Recovery</span><span class="sxs-lookup"><span data-stu-id="6bcdd-164">Network options in Site Recovery</span></span>

<span data-ttu-id="6bcdd-165">При выполнении тестовой отработки отказа, появится сообщение с tooselect сетевые параметры для тестовых машин реплики.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-165">When you run a test failover, you're asked tooselect network settings for test replica machines.</span></span> <span data-ttu-id="6bcdd-166">У вас есть несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-166">You have multiple options.</span></span>  

| <span data-ttu-id="6bcdd-167">**Вариант тестовой отработки отказа**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-167">**Test failover option**</span></span> | <span data-ttu-id="6bcdd-168">**Описание**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-168">**Description**</span></span> | <span data-ttu-id="6bcdd-169">**Проверки, выполняемые при отработке отказа**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-169">**Failover check**</span></span> | <span data-ttu-id="6bcdd-170">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-170">**Details**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="6bcdd-171">**При сбое tooa вторичный сайт VMM — без сети**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-171">**Fail over tooa secondary VMM site--without network**</span></span> |<span data-ttu-id="6bcdd-172">Не нужно выбирать сеть виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-172">Don't select a VM network.</span></span> |<span data-ttu-id="6bcdd-173">При отработке отказа выполняется проверка того, созданы ли тестовые машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-173">Failover checks that test machines are created.</span></span><br/><br/><span data-ttu-id="6bcdd-174">Hello тестовая виртуальная машина создается на узле hello, где существует виртуальная машина реплики hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-174">hello test virtual machine is created on hello host where hello replica virtual machine exists.</span></span> <span data-ttu-id="6bcdd-175">Она не будет добавляться toohello облака, где находится виртуальная машина реплики hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-175">It isn’t added toohello cloud where hello replica virtual machine is located.</span></span> |<p><span data-ttu-id="6bcdd-176">машина Hello отработка отказа не tooany подключенной сети.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-176">hello failed-over machine isn’t connected tooany network.</span></span><br/><br/><span data-ttu-id="6bcdd-177">Hello компьютер может быть tooa подключенной сети виртуальной Машины, после его создания.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-177">hello machine can be connected tooa VM network after it has been created.</span></span> |
| <span data-ttu-id="6bcdd-178">**При сбое tooa вторичный сайт VMM — с сетью**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-178">**Fail over tooa secondary VMM site--with network**</span></span> |<span data-ttu-id="6bcdd-179">Необходимо выбрать существующую сеть виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-179">Select an existing VM network.</span></span> |<span data-ttu-id="6bcdd-180">При отработке отказа выполняется проверка того, созданы ли виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-180">Failover checks that virtual machines are created.</span></span> |<span data-ttu-id="6bcdd-181">Hello тестовая виртуальная машина создается на узле hello, где существует виртуальная машина реплики hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-181">hello test virtual machine is created on hello host where hello replica virtual machine exists.</span></span> <span data-ttu-id="6bcdd-182">Она не будет добавляться toohello облака, где находится виртуальная машина реплики hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-182">It isn’t added toohello cloud where hello replica virtual machine is located.</span></span><br/><br/><span data-ttu-id="6bcdd-183">Создайте сеть виртуальных машин, которая будет изолирована от вашей рабочей сети.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-183">Create a VM network that's isolated from your production network.</span></span><br/><br/><span data-ttu-id="6bcdd-184">Если вы используете сеть на основе виртуальной локальной сети, то рекомендуется создать в VMM отдельную логическую сеть (которая не будет применяться в рабочих целях).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-184">If you're using a VLAN-based network, we recommend that you create a separate logical network (not used in production) in VMM for this purpose.</span></span> <span data-ttu-id="6bcdd-185">Эта логическая сеть является используется toocreate сетей виртуальных Машин для тестовой отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-185">This logical network is used toocreate VM networks for test failovers.</span></span><br/><br/><span data-ttu-id="6bcdd-186">Hello логической сети должен быть связан по крайней мере одно hello сетевых адаптеров всех серверов Hyper-V hello, в которых размещаются виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-186">hello logical network should be associated with at least one of hello network adapters of all hello Hyper-V servers that are hosting virtual machines.</span></span><br/><br/><span data-ttu-id="6bcdd-187">Для логических сетей VLAN hello сетевые сайты, добавления toohello логической сети должны быть изолированы.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-187">For VLAN logical networks, hello network sites that you add toohello logical network should be isolated.</span></span><br/><br/><span data-ttu-id="6bcdd-188">При использовании логической сети на базе виртуализации сети Windows Azure Site Recovery автоматически создает изолированные сети виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-188">If you’re using a Windows Network Virtualization–based logical network, Azure Site Recovery automatically creates isolated VM networks.</span></span> |
| <span data-ttu-id="6bcdd-189">**Сбой по tooa вторичный сайт VMM — создание сети**</span><span class="sxs-lookup"><span data-stu-id="6bcdd-189">**Fail over tooa secondary VMM site--create a network**</span></span> |<span data-ttu-id="6bcdd-190">Временная тестовая сеть создается автоматически на основании приветствия, указываемое в **логической сети** и ее связанных сетевых сайтов.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-190">A temporary test network is created automatically based on hello setting that you specify in **Logical Network** and its related network sites.</span></span> |<span data-ttu-id="6bcdd-191">При отработке отказа выполняется проверка того, созданы ли виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-191">Failover checks that virtual machines are created.</span></span> |<span data-ttu-id="6bcdd-192">Используйте этот параметр, если план восстановления hello использует несколько сетей виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-192">Use this option if hello recovery plan uses more than one VM network.</span></span> <span data-ttu-id="6bcdd-193">При использовании сетей Wnv этот параметр, можно автоматически создать сети виртуальных Машин с hello параметрами (подсетей и пулы IP-адресов) в сети hello hello реплики виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-193">If you're using Windows Network Virtualization networks, this option can automatically create VM networks with hello same settings (subnets and IP address pools) in hello network of hello replica virtual machine.</span></span> <span data-ttu-id="6bcdd-194">Сети виртуальных Машин будут автоматически удалены после завершения тестовой отработки отказа hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-194">These VM networks are cleaned up automatically after hello test failover is complete.</span></span></p><p><span data-ttu-id="6bcdd-195">Hello тестовая виртуальная машина создается на узле hello, где существует виртуальная машина реплики hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-195">hello test virtual machine is created on hello host where hello replica virtual machine exists.</span></span> <span data-ttu-id="6bcdd-196">Она не будет добавляться toohello облака, где находится виртуальная машина реплики hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-196">It isn’t added toohello cloud where hello replica virtual machine is located.</span></span> |

> [!TIP]
> <span data-ttu-id="6bcdd-197">Hello заданное tooa виртуальной машины во время тестовой отработки отказа IP-адрес — hello же IP-адрес, который hello виртуальной машины получают при выполнении плановой или незапланированной отработки отказа (предполагается, что IP-адрес hello доступна в hello тестовой отработки отказа сети).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-197">hello IP address given tooa virtual machine during test failover is hello same IP address that hello virtual machine would receive for a planned or unplanned failover (presuming that hello IP address is available in hello test failover network).</span></span> <span data-ttu-id="6bcdd-198">Если hello одного IP-адреса не поддерживается в hello тестовой отработки отказа сети, виртуальная машина hello получает другой IP-адрес, который доступен в hello тестовой отработки отказа сети.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-198">If hello same IP address isn't available in hello test failover network, hello virtual machine receives another IP address that's available in hello test failover network.</span></span>
>
>


## <a name="test-failover-tooa-production-network-on-a-recovery-site"></a><span data-ttu-id="6bcdd-199">Тестирование отработки отказа tooa рабочей сети на сайте восстановления</span><span class="sxs-lookup"><span data-stu-id="6bcdd-199">Test failover tooa production network on a recovery site</span></span>
<span data-ttu-id="6bcdd-200">При выполнении тестовой отработки отказа советуем выбрать сеть, которая отличается от рабочей сети сайта восстановления, указанной в разделе параметров [Сетевое сопоставление](https://docs.microsoft.com/azure/site-recovery/site-recovery-network-mapping).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-200">We recommend that when you're doing a test failover, you choose a network that is different from your production recovery site network that you provided in [network mapping](https://docs.microsoft.com/azure/site-recovery/site-recovery-network-mapping).</span></span> <span data-ttu-id="6bcdd-201">Но если действительно toovalidate конца в конец сетевого подключения на виртуальной машине отработка отказа, обратите внимание hello после точки:</span><span class="sxs-lookup"><span data-stu-id="6bcdd-201">But if you really want toovalidate end-to-end network connectivity in a failed-over virtual machine, note hello following points:</span></span>

* <span data-ttu-id="6bcdd-202">Убедитесь, что основная виртуальная машина, hello завершает работу при выполнении тестовой отработки отказа hello.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-202">Make sure that hello primary virtual machine is shut down when you're doing hello test failover.</span></span> <span data-ttu-id="6bcdd-203">Если этого не сделать, две виртуальные машины с удостоверением будет выполняться в сетевых на hello hello hello же время.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-203">If you don't, two virtual machines with hello same identity will be running in hello same network at hello same time.</span></span> <span data-ttu-id="6bcdd-204">Такой ситуации может привести tooundesired последствия.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-204">That situation can lead tooundesired consequences.</span></span>
* <span data-ttu-id="6bcdd-205">Любые внесенные toohello тестовые отработки отказа виртуальные машины будут потеряны при очистке hello тестировании отработки отказа виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-205">Any changes that you make toohello test failover virtual machines are lost when you clean up hello test failover virtual machines.</span></span> <span data-ttu-id="6bcdd-206">Эти изменения не реплицированных задней toohello основной виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-206">These changes are not replicated back toohello primary virtual machine.</span></span>
* <span data-ttu-id="6bcdd-207">Такой способ тестировании приводит toodowntime для производственного приложения.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-207">This way of doing testing leads toodowntime for your production application.</span></span> <span data-ttu-id="6bcdd-208">Попросите пользователей приложения hello не toouse, что выполняется приложение hello при детализации hello аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="6bcdd-208">Ask users of hello application not toouse hello application when hello DR drill is in progress.</span></span>  


## <a name="next-steps"></a><span data-ttu-id="6bcdd-209">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="6bcdd-209">Next steps</span></span>
<span data-ttu-id="6bcdd-210">После успешного выполнения тестовой отработки отказа можно выполнить [фактическую отработку отказа](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="6bcdd-210">After you have successfully run a test failover, you can try a [failover](site-recovery-failover.md).</span></span>
