---
title: "Архитектура hello aaaReview для tooAzure репликации (с System Center VMM) Hyper-V с помощью Azure Site Recovery | Документы Microsoft"
description: "В этой статье содержится обзор компонентов и архитектура, используемая при репликации локальных виртуальных машин Hyper-V в tooAzure облака VMM, со службой Azure Site Recovery hello."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 07/24/2017
ms.author: raynew
ms.openlocfilehash: ee1f2775b0c929894933b639464176d7a0441519
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="step-1-review-hello-architecture"></a><span data-ttu-id="a03f7-103">Шаг 1: Проверка hello архитектуры</span><span class="sxs-lookup"><span data-stu-id="a03f7-103">Step 1: Review hello architecture</span></span>


<span data-ttu-id="a03f7-104">В этой статье описываются компоненты hello и процессы, которые используются при репликации локальных виртуальных машин Hyper-V в облаках диспетчера виртуальных машин System Center (VMM), с помощью hello tooAzure [Azure Site Recovery](site-recovery-overview.md) службы.</span><span class="sxs-lookup"><span data-stu-id="a03f7-104">This article describes hello components and processes used when replicating on-premises Hyper-V virtual machines in System Center Virtual Machine Manager (VMM) clouds, tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="a03f7-105">Отправлять все комментарии hello нижней части этой статьи, или в hello [форум по службам восстановления Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span><span class="sxs-lookup"><span data-stu-id="a03f7-105">Post any comments at hello bottom of this article, or in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>



## <a name="architectural-components"></a><span data-ttu-id="a03f7-106">Компоненты архитектуры</span><span class="sxs-lookup"><span data-stu-id="a03f7-106">Architectural components</span></span>

<span data-ttu-id="a03f7-107">Ряд компонентов участвуют, при репликации виртуальных машин Hyper-V в облаках tooAzure VMM.</span><span class="sxs-lookup"><span data-stu-id="a03f7-107">There are a number of components involved when replicating Hyper-V VMs in VMM clouds tooAzure.</span></span>

<span data-ttu-id="a03f7-108">**Компонент**</span><span class="sxs-lookup"><span data-stu-id="a03f7-108">**Component**</span></span> | <span data-ttu-id="a03f7-109">**Требование**</span><span class="sxs-lookup"><span data-stu-id="a03f7-109">**Requirement**</span></span> | <span data-ttu-id="a03f7-110">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="a03f7-110">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="a03f7-111">**Таблицы Azure**</span><span class="sxs-lookup"><span data-stu-id="a03f7-111">**Azure**</span></span> | <span data-ttu-id="a03f7-112">В Azure вам требуется учетная запись Microsoft Azure, учетная запись хранения Azure и сеть Azure.</span><span class="sxs-lookup"><span data-stu-id="a03f7-112">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="a03f7-113">Реплицированные данные хранятся в учетной записи хранения hello и виртуальных машинах Azure создаются с hello реплицированных данных, когда происходит переход на другой ресурс с веб-узла в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="a03f7-113">Replicated data is stored in hello storage account, and Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="a03f7-114">Hello виртуальных машинах Azure подключиться toohello виртуальной сети Azure, когда они создаются.</span><span class="sxs-lookup"><span data-stu-id="a03f7-114">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="a03f7-115">**Сервер VMM**</span><span class="sxs-lookup"><span data-stu-id="a03f7-115">**VMM server**</span></span> | <span data-ttu-id="a03f7-116">Сервер VMM Hello имеет одно или несколько облаков, содержащий узлы Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a03f7-116">hello VMM server has one or more clouds containing Hyper-V hosts.</span></span> | <span data-ttu-id="a03f7-117">На сервере VMM hello Установка hello поставщика Site Recovery tooorchestrate репликации с компонентом восстановления сайта и зарегистрировать сервер hello в hello в хранилище служб восстановления.</span><span class="sxs-lookup"><span data-stu-id="a03f7-117">On hello VMM server you install hello Site Recovery Provider tooorchestrate replication with Site Recovery, and register hello server in hello Recovery Services vault.</span></span>
<span data-ttu-id="a03f7-118">**Узел Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="a03f7-118">**Hyper-V host**</span></span> | <span data-ttu-id="a03f7-119">Один или несколько кластеров (узлов) Hyper-V под управлением VMM.</span><span class="sxs-lookup"><span data-stu-id="a03f7-119">One or more Hyper-V hosts/clusters managed by VMM.</span></span> |  <span data-ttu-id="a03f7-120">Установите агент служб восстановления hello на каждый член узла или кластера.</span><span class="sxs-lookup"><span data-stu-id="a03f7-120">You install hello Recovery Services agent on each host or cluster member.</span></span>
<span data-ttu-id="a03f7-121">**Виртуальные машины Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="a03f7-121">**Hyper-V VMs**</span></span> | <span data-ttu-id="a03f7-122">Хотя бы одна виртуальная машина, запущенная на сервере узла Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a03f7-122">One or VMs running on a Hyper-V host server.</span></span> | <span data-ttu-id="a03f7-123">Ничего не должен tooexplicitly, установленных на виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="a03f7-123">Nothing needs tooexplicitly installed on VMs.</span></span>
<span data-ttu-id="a03f7-124">**Сеть**</span><span class="sxs-lookup"><span data-stu-id="a03f7-124">**Networking**</span></span> |<span data-ttu-id="a03f7-125">Логическое "и" сети виртуальных Машин настроены на сервере VMM hello.</span><span class="sxs-lookup"><span data-stu-id="a03f7-125">Logical and VM networks set up on hello VMM server.</span></span> <span data-ttu-id="a03f7-126">Сеть виртуальной Машины должно быть связанного tooa логической сети, связанной с облаком hello.</span><span class="sxs-lookup"><span data-stu-id="a03f7-126">A VM network should be linked tooa logical network that's associated with hello cloud.</span></span> | <span data-ttu-id="a03f7-127">Сети виртуальных Машин являются сопоставленных tooAzure виртуальных сетей, виртуальных машинах Azure находятся в сети, когда они создаются после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="a03f7-127">VM networks are mapped tooAzure virtual networks, so that Azure VMs are located in a network when they're created after failover.</span></span>

<span data-ttu-id="a03f7-128">Дополнительные сведения о необходимых условий развертывания hello и требования для каждого из этих компонентов в hello [Матрица поддержки](site-recovery-support-matrix-to-azure.md).</span><span class="sxs-lookup"><span data-stu-id="a03f7-128">Learn about hello deployment prerequisites and requirements for each of these components in hello [support matrix](site-recovery-support-matrix-to-azure.md).</span></span>


<span data-ttu-id="a03f7-129">**Рисунок 1: Репликация виртуальных машин на узлах Hyper-V в tooAzure облака VMM**</span><span class="sxs-lookup"><span data-stu-id="a03f7-129">**Figure 1: Replicate VMs on Hyper-V hosts in VMM clouds tooAzure**</span></span>

![Компоненты](./media/vmm-to-azure-walkthrough-architecture/arch-onprem-onprem-azure-vmm.png)


## <a name="replication-process"></a><span data-ttu-id="a03f7-131">Процесс репликации</span><span class="sxs-lookup"><span data-stu-id="a03f7-131">Replication process</span></span>

<span data-ttu-id="a03f7-132">**Рисунок 2: Процесс репликации и восстановления для tooAzure репликации Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="a03f7-132">**Figure 2: Replication and recovery process for Hyper-V replication tooAzure**</span></span>

![рабочий процесс](./media/vmm-to-azure-walkthrough-architecture/arch-hyperv-azure-workflow.png)

### <a name="enable-protection"></a><span data-ttu-id="a03f7-134">Включить защиту</span><span class="sxs-lookup"><span data-stu-id="a03f7-134">Enable protection</span></span>

1. <span data-ttu-id="a03f7-135">После включения защиты для виртуальной Машины Hyper-V в hello портала Azure или локально, hello **включить защиту** запускает.</span><span class="sxs-lookup"><span data-stu-id="a03f7-135">After you enable protection for a Hyper-V VM, in hello Azure portal or on-premises, hello **Enable protection** starts.</span></span>
2. <span data-ttu-id="a03f7-136">Hello задания проверяет, что компьютер, hello соответствует необходимым требованиям, перед вызовом hello [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), tooset репликации заданы параметры hello.</span><span class="sxs-lookup"><span data-stu-id="a03f7-136">hello job checks that hello machine complies with prerequisites, before invoking hello [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), tooset up replication with hello settings you've configured.</span></span>
3. <span data-ttu-id="a03f7-137">Hello задание запускается начальная репликация с помощью вызова hello [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) метод tooinitialize полной репликации виртуальной Машины и tooAzure виртуальные диски send hello Виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="a03f7-137">hello job starts initial replication by invoking hello [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, tooinitialize a full VM replication, and send hello VM's virtual disks tooAzure.</span></span>
4. <span data-ttu-id="a03f7-138">Вы можете отслеживать задания hello в hello **заданий** вкладки.      ![Список заданий](media/vmm-to-azure-walkthrough-architecture/image1.png)![Подробные сведения о включении защиты](media/vmm-to-azure-walkthrough-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="a03f7-138">You can monitor hello job in hello **Jobs** tab.      ![Jobs list](media/vmm-to-azure-walkthrough-architecture/image1.png) ![Enable protection drill down](media/vmm-to-azure-walkthrough-architecture/image2.png)</span></span>

### <a name="replicate-hello-initial-data"></a><span data-ttu-id="a03f7-139">Репликация hello первоначальных данных</span><span class="sxs-lookup"><span data-stu-id="a03f7-139">Replicate hello initial data</span></span>

1. <span data-ttu-id="a03f7-140">При запуске начальной репликации создается [моментальный снимок виртуальной машины Hyper-V](https://technet.microsoft.com/library/dd560637.aspx).</span><span class="sxs-lookup"><span data-stu-id="a03f7-140">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="a03f7-141">Виртуальные жесткие диски, реплицируемых по одному до они все скопированные tooAzure.</span><span class="sxs-lookup"><span data-stu-id="a03f7-141">Virtual hard disks are replicated one by one until they're all copied tooAzure.</span></span> <span data-ttu-id="a03f7-142">Он может занять некоторое время, в зависимости от hello размер виртуальной Машины и пропускной способности сети.</span><span class="sxs-lookup"><span data-stu-id="a03f7-142">It could take a while, depending on hello VM size, and network bandwidth.</span></span> <span data-ttu-id="a03f7-143">toooptimize использование вашей сети, в разделе [как toomanage локальной пропускной способности сети защиты tooAzure](https://support.microsoft.com/kb/3056159).</span><span class="sxs-lookup"><span data-stu-id="a03f7-143">toooptimize your network usage, see [How toomanage on-premises tooAzure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="a03f7-144">В случае изменения диска во время начальной репликации hello отслеживания репликации реплика Hyper-V отслеживает эти изменения как журналы репликации Hyper-V (.hrl).</span><span class="sxs-lookup"><span data-stu-id="a03f7-144">If disk changes occur while initial replication is in progress, hello Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="a03f7-145">Эти файлы расположены в hello же папке, что диски hello.</span><span class="sxs-lookup"><span data-stu-id="a03f7-145">These files are located in hello same folder as hello disks.</span></span> <span data-ttu-id="a03f7-146">Каждый диск имеет связанный .hrl файл, будут отправляться toosecondary хранилища.</span><span class="sxs-lookup"><span data-stu-id="a03f7-146">Each disk has an associated .hrl file that will be sent toosecondary storage.</span></span>
4. <span data-ttu-id="a03f7-147">файлы моментальных снимков и журналов Hello потребляют ресурсы диска, во время начальной репликации.</span><span class="sxs-lookup"><span data-stu-id="a03f7-147">hello snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="a03f7-148">После завершения начальной репликации hello, удаление снимка виртуальной Машины hello.</span><span class="sxs-lookup"><span data-stu-id="a03f7-148">When hello initial replication finishes, hello VM snapshot is deleted.</span></span> <span data-ttu-id="a03f7-149">Диск изменений в журнале hello, синхронизированным и объединенные toohello родительского диска.</span><span class="sxs-lookup"><span data-stu-id="a03f7-149">Delta disk changes in hello log are synchronized and merged toohello parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="a03f7-150">Завершение подготовки защиты</span><span class="sxs-lookup"><span data-stu-id="a03f7-150">Finalize protection</span></span>

1. <span data-ttu-id="a03f7-151">По завершении начальной репликации hello hello **завершить подготовку защиты на виртуальной машине hello** задания настроить сеть и другие параметры после репликации таким образом, чтобы hello виртуальная машина защищена.</span><span class="sxs-lookup"><span data-stu-id="a03f7-151">After hello initial replication finishes, hello **Finalize protection on hello virtual machine** job configures network and other post-replication settings, so that hello virtual machine is protected.</span></span>
    <span data-ttu-id="a03f7-152">![Задание завершения подготовки защиты](media/vmm-to-azure-walkthrough-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="a03f7-152">![Finalize protection job](media/vmm-to-azure-walkthrough-architecture/image3.png)</span></span>
2. <span data-ttu-id="a03f7-153">Если выполняется репликация tooAzure, может потребоваться tootweak hello параметры для hello виртуальной машины, чтобы она готова для отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="a03f7-153">If you're replicating tooAzure, you might need tootweak hello settings for hello virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="a03f7-154">На этом этапе можно запустить toocheck отработки отказа теста, который все работает, как ожидалось.</span><span class="sxs-lookup"><span data-stu-id="a03f7-154">At this point you can run a test failover toocheck everything is working as expected.</span></span>

### <a name="replicate-hello-delta"></a><span data-ttu-id="a03f7-155">Репликация изменений hello</span><span class="sxs-lookup"><span data-stu-id="a03f7-155">Replicate hello delta</span></span>

1. <span data-ttu-id="a03f7-156">После начальной репликации hello начинает разностной синхронизации, в соответствии с параметрами репликации.</span><span class="sxs-lookup"><span data-stu-id="a03f7-156">After hello initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="a03f7-157">Hello отслеживания репликации реплика Hyper-V отслеживает файлы .hrl hello изменения tooa виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="a03f7-157">hello Hyper-V Replica Replication Tracker tracks hello changes tooa virtual hard disk as .hrl files.</span></span> <span data-ttu-id="a03f7-158">Для каждого диска, предназначенного для репликации, создается связанный HRL-файл.</span><span class="sxs-lookup"><span data-stu-id="a03f7-158">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="a03f7-159">Этот журнал отправляется toohello пользовательской учетной записи хранения, после завершения начальной репликации.</span><span class="sxs-lookup"><span data-stu-id="a03f7-159">This log is sent toohello customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="a03f7-160">Если журнал транспорте tooAzure, в другой файл журнала, в hello отслеживаются изменения hello основной диск hello один каталог.</span><span class="sxs-lookup"><span data-stu-id="a03f7-160">When a log is in transit tooAzure, hello changes in hello primary disk are tracked in another log file, in hello same directory.</span></span>
3. <span data-ttu-id="a03f7-161">Во время начального и разностных репликации можно отслеживать hello виртуальной Машины в hello представление виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a03f7-161">During initial and delta replication, you can monitor hello VM in hello VM view.</span></span> <span data-ttu-id="a03f7-162">[Подробнее](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="a03f7-162">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="synchronize-replication"></a><span data-ttu-id="a03f7-163">Синхронизация репликации</span><span class="sxs-lookup"><span data-stu-id="a03f7-163">Synchronize replication</span></span>

1. <span data-ttu-id="a03f7-164">Если происходит сбой дельта-репликации и для полной репликации необходима высокая пропускная способность или требуется много времени, тогда виртуальная машина помечается для повторной синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a03f7-164">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="a03f7-165">Например если файлы .hrl hello достигают 50% от размера диска hello, затем hello ВМ помечается для повторной синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a03f7-165">For example, if hello .hrl files reach 50% of hello disk size, then hello VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="a03f7-166">Повторная синхронизация сводит к минимуму hello объем данных, посланных расчет контрольных сумм hello исходных и целевых виртуальных машин и отправка только hello дельта-данные.</span><span class="sxs-lookup"><span data-stu-id="a03f7-166">Resynchronization minimizes hello amount of data sent by computing checksums of hello source and target virtual machines, and sending only hello delta data.</span></span> <span data-ttu-id="a03f7-167">Повторная синхронизация использует алгоритм фрагментации, то есть разбивает исходный и целевой файлы на блоки фиксированного размера.</span><span class="sxs-lookup"><span data-stu-id="a03f7-167">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="a03f7-168">Контрольные суммы для каждого фрагмента данных создаются и затем сравнивается toodetermine, который блокирует hello источника необходимость toobe примененных toohello цели.</span><span class="sxs-lookup"><span data-stu-id="a03f7-168">Checksums for each chunk are generated and then compared toodetermine which blocks from hello source need toobe applied toohello target.</span></span>
3. <span data-ttu-id="a03f7-169">После завершения повторной синхронизации возобновляется обычная разностная репликация данных.</span><span class="sxs-lookup"><span data-stu-id="a03f7-169">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="a03f7-170">По умолчанию повторная синхронизация является запланированных toorun автоматически вне времени office, но можно синхронизировать виртуальную машину вручную.</span><span class="sxs-lookup"><span data-stu-id="a03f7-170">By default resynchronization is scheduled toorun automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="a03f7-171">Например, в случае сбоя сети или другого сбоя повторную синхронизацию можно возобновить.</span><span class="sxs-lookup"><span data-stu-id="a03f7-171">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="a03f7-172">toodo это, выберите hello ВМ на портале hello > **повторной синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="a03f7-172">toodo this, select hello VM in hello portal > **Resynchronize**.</span></span>

    ![Повторная синхронизация вручную](media/vmm-to-azure-walkthrough-architecture/image4.png)


### <a name="retry-logic"></a><span data-ttu-id="a03f7-174">Логика повторных попыток</span><span class="sxs-lookup"><span data-stu-id="a03f7-174">Retry logic</span></span>

<span data-ttu-id="a03f7-175">При ошибке репликации используется встроенный механизм повторных попыток.</span><span class="sxs-lookup"><span data-stu-id="a03f7-175">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="a03f7-176">Этот алгоритм предполагает работу с двумя представленными ниже категориями ошибок.</span><span class="sxs-lookup"><span data-stu-id="a03f7-176">This logic can be classified into two categories:</span></span>

<span data-ttu-id="a03f7-177">**Категория**</span><span class="sxs-lookup"><span data-stu-id="a03f7-177">**Category**</span></span> | <span data-ttu-id="a03f7-178">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="a03f7-178">**Details**</span></span>
--- | ---
<span data-ttu-id="a03f7-179">**Неустранимые ошибки**</span><span class="sxs-lookup"><span data-stu-id="a03f7-179">**Non-recoverable errors**</span></span> | <span data-ttu-id="a03f7-180">Без повторных попыток.</span><span class="sxs-lookup"><span data-stu-id="a03f7-180">No retry is attempted.</span></span> <span data-ttu-id="a03f7-181">Состояние виртуальной машины отображается как **Критическое**, что требует вмешательства администратора.</span><span class="sxs-lookup"><span data-stu-id="a03f7-181">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="a03f7-182">Примеры этих ошибок: разрыв цепочки виртуальных жестких ДИСКОВ; Недопустимое состояние для hello реплики виртуальной Машины; Сетевые ошибки проверки подлинности: ошибки авторизации; Виртуальная машина не обнаружены ошибки (для изолированных серверов Hyper-V)</span><span class="sxs-lookup"><span data-stu-id="a03f7-182">Examples of these errors include: broken VHD chain; Invalid state for hello replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="a03f7-183">**Устранимые ошибки**</span><span class="sxs-lookup"><span data-stu-id="a03f7-183">**Recoverable errors**</span></span> | <span data-ttu-id="a03f7-184">Повторы выполняются каждый интервал репликации, с помощью экспоненциальной отсрочки, увеличивает интервал повтора hello от начала hello hello первой попытки, 1, 2, 4, 8 и 10 минут.</span><span class="sxs-lookup"><span data-stu-id="a03f7-184">Retries occur every replication interval, using an exponential back-off that increases hello retry interval from hello start of hello first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="a03f7-185">Если проблема не устранена, повторные попытки выполняются каждые 30 минут.</span><span class="sxs-lookup"><span data-stu-id="a03f7-185">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="a03f7-186">Примеры таких ошибок: сетевые ошибки, дефицит места на диске, нехватка памяти.</span><span class="sxs-lookup"><span data-stu-id="a03f7-186">Examples include: network errors; low disk  errors; low memory conditions</span></span> |



## <a name="failover-and-failback-process"></a><span data-ttu-id="a03f7-187">Процесс отработки отказа и восстановления размещения</span><span class="sxs-lookup"><span data-stu-id="a03f7-187">Failover and failback process</span></span>

1. <span data-ttu-id="a03f7-188">Выполнением запланированного или незапланированного [перехода на другой ресурс](site-recovery-failover.md) из tooAzure локальных виртуальных машин Hyper-V.</span><span class="sxs-lookup"><span data-stu-id="a03f7-188">You can run a planned or unplanned [failover](site-recovery-failover.md) from on-premises Hyper-V VMs tooAzure.</span></span> <span data-ttu-id="a03f7-189">Если запустить плановую отработку отказа, то источник виртуальных машин, завершают работу tooensure без потери данных.</span><span class="sxs-lookup"><span data-stu-id="a03f7-189">If you run a planned failover, then source VMs are shut down tooensure no data loss.</span></span>
2. <span data-ttu-id="a03f7-190">При сбое одного компьютера или создайте [планы восстановления](site-recovery-create-recovery-plans.md) tooorchestrate отработки отказа нескольких машин.</span><span class="sxs-lookup"><span data-stu-id="a03f7-190">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) tooorchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="a03f7-191">После запуска отработки отказа hello следует hello toosee может создать виртуальные машины реплики в Azure.</span><span class="sxs-lookup"><span data-stu-id="a03f7-191">After you run hello failover, you should be able toosee hello created replica VMs in Azure.</span></span> <span data-ttu-id="a03f7-192">При необходимости можно назначить открытый IP адрес toohello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a03f7-192">You can assign a public IP address toohello VM if required.</span></span>
5. <span data-ttu-id="a03f7-193">Подтвердите toostart hello перехода на другой ресурс, доступ к рабочей нагрузки hello из hello реплики виртуальной Машины Azure.</span><span class="sxs-lookup"><span data-stu-id="a03f7-193">You then commit hello failover toostart accessing hello workload from hello replica Azure VM.</span></span>
6. <span data-ttu-id="a03f7-194">Когда основной локальный сайт снова станет доступным, вы сможете выполнить [восстановление размещения](site-recovery-failback-from-azure-to-hyper-v.md).</span><span class="sxs-lookup"><span data-stu-id="a03f7-194">When your primary on-premises site is available again, you can [fail back](site-recovery-failback-from-azure-to-hyper-v.md).</span></span> <span data-ttu-id="a03f7-195">Начнем плановой отработки отказа Azure toohello основного сайта.</span><span class="sxs-lookup"><span data-stu-id="a03f7-195">You kick off a planned failover from Azure toohello primary site.</span></span> <span data-ttu-id="a03f7-196">Для плановой отработки отказа, можно toohello выберите toofailback одной виртуальной Машины или tooan другое расположение и синхронизировать изменения между Azure и локальной, tooensure без потери данных.</span><span class="sxs-lookup"><span data-stu-id="a03f7-196">For a planned failover you can select toofailback toohello same VM or tooan alternate location, and synchronize changes between Azure and on-premises, tooensure no data loss.</span></span> <span data-ttu-id="a03f7-197">При создании локальных виртуальных машин фиксации hello перехода на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="a03f7-197">When VMs are created on-premises, you commit hello failover.</span></span>




## <a name="next-steps"></a><span data-ttu-id="a03f7-198">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a03f7-198">Next steps</span></span>

<span data-ttu-id="a03f7-199">Go слишком[шаг 2: проверка необходимых условий развертывания hello](vmm-to-azure-walkthrough-prerequisites.md)</span><span class="sxs-lookup"><span data-stu-id="a03f7-199">Go too[Step 2: Review hello deployment prerequisites](vmm-to-azure-walkthrough-prerequisites.md)</span></span>
