---
title: "Планировщик развертывания aaaAzure Site Recovery для VMware для Azure | Документы Microsoft"
description: "Это руководство по развертыванию планировщик hello Azure Site Recovery пользователя."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: garavd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: hero-article
ms.date: 08/28/2017
ms.author: nisoneji
ms.openlocfilehash: a8c13cd47850575769e0186528807bc525bdeec7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-site-recovery-deployment-planner"></a>Планировщик ресурсов Azure Site Recovery
Эта статья содержит руководство пользователя hello Azure Site Recovery развертывания планировщик для рабочих развертываний VMware для Azure.

## <a name="overview"></a>Обзор

Прежде чем начать защиту любой VMware виртуальных машин (ВМ) с помощью Site Recovery, выделите достаточную пропускную способность зависимости от вашей ежедневной скорость изменения данных, toomeet вашей точки требуемой восстановления (RPO). Быть убедиться, что toodeploy hello правильное количество серверы конфигурации и процесс локальными серверами.

Необходимо также toocreate hello правильный тип и количество конечных учетных записей хранилища Azure. (класса Standard или Premium), учитывая рост нагрузки на исходные рабочие серверы из-за более активного их использования в будущем. Выберите тип хранилища hello каждой виртуальной Машины, в зависимости от характеристик рабочей нагрузки (например, операций чтения и записи операций в секунду [IOPS] и обработки данных) и ограничивает Site Recovery.

Hello Site Recovery развертывания планировщик общедоступной предварительной версии это средство командной строки, в настоящий момент доступна только для сценария hello VMware для Azure. Позволяет удаленно профилирование виртуальные машины VMware с помощью этого средства (с влияние рабочей ни при каких обстоятельствах) toounderstand hello, пропускной способности и требований к хранилищу Azure для успешной репликации и протестировать отработку отказа. Hello средство можно запускать без установки любой Site Recovery компонентов в локальной среде. Однако tooget точные достичь пропускной способности, рекомендуется выполнять hello планировщика на сервере Windows, на соответствие hello минимальным требованиям сервера конфигурации hello Site Recovery, в конечном итоге потребовалось бы toodeploy как один из первых шагов hello в рабочей среде развертывания.

Средство Hello предоставляет hello, приведенные ниже сведения:

**Оценка совместимости**

* Оценка совместимости виртуальной машины в зависимости от количества дисков, их размера, числа операций ввода-вывода в секунду, активности обработки данных и типа загрузки (EFI/BIOS).
* Оценка Hello пропускную способность сети, необходимые для разностной репликации

**Оценка пропускной способности сети и целевой точки восстановления**

* Оценка Hello пропускную способность сети, необходимые для разностной репликации
* пропускная способность Hello, Site Recovery можно получить из локальной tooAzure
* число Hello toobatch виртуальных машин, в зависимости от hello оценка пропускной способности toocomplete начальной репликации в течение заданного промежутка времени

**Требования к инфраструктуре Azure**

* требования к типу (учетная запись хранения standard или premium) Hello хранилища для каждой виртуальной Машины
* Общее число Hello toobe учетные записи хранения standard и premium для репликации
* Именование учетных записей хранения в соответствии с рекомендациями к службе хранилища Azure.
* Размещение Hello учетной записи хранилища для всех виртуальных машин
* настроить Hello ряд Azure ядер toobe перед теста или переход на hello подписки
* Hello виртуальной Машины Azure рекомендуется размер для каждой локальной виртуальной Машины

**Требования к локальной инфраструктуре**
* Hello необходимое количество серверов конфигурации и toobe серверы процесса развертывания в локальной среде

>[!IMPORTANT]
>
>Так как использование tooincrease скорее всего, со временем, все hello выше средства вычисления выполняются при условии, что коэффициент роста 30 процентов в характеристиках рабочей нагрузки и с помощью 95-го процентиля для всех hello профилирование метрики (чтения и записи операций ввода-ВЫВОДА, обработка и поэтому д.). Оба эти элемента (коэффициент роста и используемый процентиль) можно изменить. toolearn Дополнительные сведения о коэффициент роста см. раздел «коэффициент роста вопросы» hello. toolearn Дополнительные сведения о значение процентиля в разделе hello «Значение процентиля для расчета hello».
>

## <a name="requirements"></a>Требования
инструмент Hello имеет два основных этапа: профилирования и создания отчета. Имеется также третий параметр toocalculate пропускной способностью только. Hello требования для сервера hello, из какой hello инициируется профилирования и пропускной способности измерения представлены в следующей таблице hello:

| Требование к серверу | Описание|
|---|---|
|Профилирование и измерение пропускной способности| <ul><li>Операционная система: Microsoft Windows Server 2012 R2<br>(в идеале соответствия по крайней мере hello [размер рекомендации по конфигурации сервера hello](https://aka.ms/asr-v2a-on-prem-components))</li><li>Конфигурация виртуальной машины: 8 виртуальных ЦП, 16 ГБ ОЗУ, жесткий диск емкостью 300 ГБ.</li><li>[Microsoft .NET Framework 4.5](https://aka.ms/dotnet-framework-45)</li><li>[VMware vSphere PowerCLI 6.0 R3](https://aka.ms/download_powercli).</li><li>[Распространяемый компонент Microsoft Visual C++ для Visual Studio 2012](https://aka.ms/vcplusplus-redistributable).</li><li>TooAzure доступа к Интернету с этого сервера</li><li>Учетная запись хранения Azure.</li><li>Доступ с правами администратора на сервере hello</li><li>Минимальное свободное место на диске: 100 ГБ (предполагается, что профилирование 1000 виртуальных машин в среднем с 3 дисками на каждую выполняется 30 дней).</li><li>VMware vCenter статистики уровня параметров должно быть задано, too2 или высокого уровня</li><li>Разрешить порт 443: ASR развертывания планировщик использует этот порт tooconnect toovCenter server или узла ESXi</ul></ul>|
| Создание отчетов. | Любой компьютер с Windows или Windows Server с Microsoft Excel 2013 или более поздней версии. |
| Разрешения пользователя | Разрешение только на чтение для учетной записи пользователя hello, которое использовалось во время профилирования tooaccess hello vCenter server или VMware vSphere узел VMware ESXi |

> [!NOTE]
>
>Средство Hello можно профилировать только виртуальные машины с дисками VMDK и RDM. и не поддерживает диски iSCSI или NFS. Site Recovery поддерживает iSCSI и NFS дисков для серверов VMware, но так как планировщик развертывания hello не находится внутри гостевой hello и его профили только с помощью счетчиков производительности vCenter, инструмент hello не видимость этих типов дисков.
>

## <a name="download-and-extract-hello-public-preview"></a>Загрузите и извлеките hello общедоступной предварительной версии
1. Загрузить последнюю версию hello hello [развертывания Site Recovery планировщик общедоступной предварительной версии](https://aka.ms/asr-deployment-planner).  
Средство Hello упаковывается в ZIP-папке. Текущая версия средства hello Hello поддерживает только сценарий hello VMware для Azure.

2. Скопируйте hello .zip папку toohello Windows server из которого нужно средство toorun hello.  
Если сервере hello сетевого доступа tooconnect toohello vCenter server или ESXi узлы vSphere, содержащий toobe ВМ hello профилирования, можно запустить средство hello из Windows Server 2012 R2. Тем не менее, рекомендуется выполнить hello средство для сервера, конфигурация которого оборудование соответствует hello [направляющих размера конфигурации сервера](https://aka.ms/asr-v2a-on-prem-components). Если вы уже развернули Site Recovery компонентов в локальной, запустите средство hello с сервера конфигурации hello.

 Мы рекомендуем включать функцию hello такую же аппаратную конфигурацию как сервера hello конфигурации (которая имеет встроенные процесса сервера) на сервере hello, где выполняется средство hello. Такая конфигурация гарантирует, что hello достичь пропускной способности, hello средство отчеты совпадений hello фактическая пропускная способность, можно добиться Site Recovery во время репликации. Hello пропускной способностью зависит от доступную пропускную способность сети на сервере hello и конфигурация оборудования (ЦП, хранилища и т. д.) сервера hello. Если вы запускаете средство hello из любой другой сервер, пропускной способности hello вычисляется на основе tooMicrosoft этого сервера Azure. Кроме того так как конфигурация оборудования hello hello сервера может отличаться от обнаружения сервера конфигурации hello, hello достичь пропускной способности, hello средство отчетов могут быть неточными.

3. Извлеките ZIP-папке hello.  
Папка Hello содержит несколько файлы и вложенные папки. исполняемый файл Hello — ASRDeploymentPlanner.exe в родительской папке hello.

    Пример:  
    Скопируйте файл tooE hello .zip: \ диска и извлеките его.
   E:\ASR Deployment Planner-Preview_v1.2.zip

    E:\ASR Deployment Planner-Preview_v1.2\ ASR Deployment Planner-Preview_v1.2\ ASRDeploymentPlanner.exe

## <a name="capabilities"></a>Возможности
Средство командной строки hello (ASRDeploymentPlanner.exe) можно запускать в любом из следующих трех режимов hello.

1. Профилирование.  
2. Создание отчетов.
3. Оценка пропускной способности.

Во-первых запустите средство hello профилирования режим toogather ВМ данных обработки и операций ввода-ВЫВОДА. Затем запустите toogenerate hello hello средство отчетов toofind hello пропускания и хранилище требования к сети.

## <a name="profiling"></a>Профилирование.
В режиме профилирования hello развертывания планировщика подключается toohello vCenter server/vSphere ESXi узла toocollect содержатся данные о производительности hello виртуальной Машины.

* Профилирование не влияет на производительность hello hello рабочей среды виртуальных машин, так как нет прямого подключения toothem. Все данные производительности, полученные от hello vCenter server или ESXi узлы vSphere.
* tooensure при наличии снижения влияния на приветствия сервера из-за профилирование hello средства запросов hello vCenter server или ESXi узлы vSphere каждые 15 минут. Этот интервал между запросами не нарушает профилирования точность, так как средство hello сохраняет данные счетчиков производительности каждую минуту.

### <a name="create-a-list-of-vms-tooprofile"></a>Создать список tooprofile виртуальные машины
Во-первых необходимо, чтобы список toobe ВМ hello профилирования. Все имена hello виртуальных машин на узле ESXi vCenter server/vSphere можно получить с помощью hello VMware vSphere PowerCLI команд hello после процедуры. Также можно перечислить в файл hello понятные имена или IP-адреса hello виртуальных машин, которые должны tooprofile вручную.

1. Войдите в ВМ, VMware vSphere, установленному PowerCLI toohello.
2. Откройте hello VMware vSphere PowerCLI консоль.
3. Включить политику выполнения hello hello скрипта. Если она отключена, запустите консоль hello VMware vSphere PowerCLI с правами администратора и затем включить ее, выполнив следующую команду hello:

            Set-ExecutionPolicy –ExecutionPolicy AllSigned

4. Возможно, требуется только toorun hello следующую команду, если подключение VIServer не распознан как имя командлета hello.
 
            Add-PSSnapin VMware.VimAutomation.Core 

5. все имена hello виртуальных машин на сервере vCenter/vSphere ESXi tooget узлов, сохранить список hello в txt-файл, перечисленных ниже двух команд выполнения hello.
Замените значения &lsaquo;имени сервера&rsaquo;, &lsaquo;имени пользователя&rsaquo;, &lsaquo;пароля&rsaquo; и &lsaquo;выходного TXT-файла&rsaquo; собственными.

            Connect-VIServer -Server <server name> -User <user name> -Password <password>

            Get-VM |  Select Name | Sort-Object -Property Name >  <outputfile.txt>

6. Откройте hello выходной файл в Блокноте и скопируйте hello имена всех виртуальных машин, что нужно tooprofile tooanother-файл (например, ProfileVMList.txt), одно имя виртуальной Машины в строке. Этот файл используется в качестве входного toohello *- VMListFile* параметр командной строки средства hello.

    ![Список имен виртуальных Машин в планировщике развертывания hello](./media/site-recovery-deployment-planner/profile-vm-list.png)

### <a name="start-profiling"></a>Начало профилирования
После имеется список виртуальных машин toobe профилирования hello hello средство можно запустить в режиме профилирования. Ниже приведен список hello обязательные и необязательные параметры toorun hello средство в режиме профилирования.

ASRDeploymentPlanner.exe -Operation StartProfiling /?

| Имя параметра | Описание |
|---|---|
| -Operation | StartProfiling |
| -Server | Здравствуйте, полное доменное имя или IP-адрес hello vCenter server или ESXi узлы vSphere которого виртуальные машины будут toobe профилирования.|
| -User | Hello пользователя имя tooconnect toohello vCenter server или ESXi узлы vSphere. Hello пользователь должен toohave доступ только для чтения, по крайней мере.|
| -VMListFile | Hello файл, содержащий список виртуальных машин toobe профилирования hello. путь к файлу Hello может быть абсолютным или относительным. Hello файл должен содержать одно имя или IP-адрес виртуальной Машины в строке. Имя виртуальной машины, указанный в файле hello следует hello совпадает с именем hello виртуальной Машины на узел ESXi hello vCenter server/vSphere.<br>Например файл hello VMList.txt содержит следующие виртуальные машины hello:<ul><li>virtual_machine_A</li><li>10.150.29.110</li><li>virtual_machine_B</li><ul> |
| -NoOfDaysToProfile | Hello число дней для профилирования какие toobe выполнения. Рекомендуется запустить профилирование для более 15 дней tooensure, hello шаблон рабочей нагрузки в вашей среде над hello указан период соблюдается и использовать tooprovide точных рекомендаций. |
| -Directory | (Необязательно) hello соглашения об универсальных именах (UNC) или toostore путь к локальному каталогу профилирования данных, сформированных во время профилирования. Если имя каталога не задано, hello каталог с именем «ProfiledData» в текущем пути hello будет использоваться как каталог по умолчанию hello. |
| -Password | (Необязательно) hello пароль toouse tooconnect toohello vCenter server или ESXi узлы vSphere. Если вы не укажете его сейчас, то предложит ввести его при выполнении команды hello.|
| -StorageAccountName | Имя учетной записи хранилища (необязательно) hello, пропускная способность hello используется toofind достижимой для репликации данных из локальной tooAzure. Hello средство передачи теста данных toothis учетной записи toocalculate пропускной способности хранилища.|
| -StorageAccountKey | (Необязательно) hello ключ учетной записи хранилища, который использовал учетную запись хранения tooaccess hello. Go toohello портала Azure > учетные записи хранения ><*имя учетной записи хранения*>> Параметры > клавиши доступа > Key1 (или первичный ключ доступа для учетной записи хранения классический). |
| -Environment | (необязательно) Это целевая среда учетной записи хранения Azure. Этот параметр может иметь одно из трех значений: AzureCloud, AzureUSGovernment, AzureChinaCloud. Значение по умолчанию — AzureCloud. Используйте параметр hello, когда целевой регион Azure правительства США или Azure China облаков. |


Корпорация Майкрософт рекомендует профилю виртуальных машин по крайней мере 15 дней too30. Во время профилирования период hello ASRDeploymentPlanner.exe продолжит выполнение. Средство Hello входные данные профилирования времени в днях. Если требуется tooprofile несколько часов или минут для быстрой проверки средства hello в общедоступной предварительной версии hello, необходимо будет tooconvert hello времени в эквивалентное мер hello дней. Например, tooprofile в течение 30 минут, hello входное значение должно быть 30/(60*24) = 0.021 дней. Hello минимальное допустимое профилирование времени — 30 минут.

Во время профилирования, при необходимости можно передать имя учетной записи хранения и ключа toofind hello пропускная способность, которую Site Recovery можно добиться во время hello репликации с сервера конфигурации hello или tooAzure процесса сервера. Если имя учетной записи хранения hello и ключа не передаются во время профилирования, средство hello не вычисляет достижимая пропускная способность.

Можно запустить несколько экземпляров средства hello для различных наборов виртуальных машин. Убедитесь, приветствия имен виртуальных Машин не повторяются в любом hello профилирование наборов. Например, если профилирования десять виртуальных машин (VM1 через VM10) и через несколько дней требуется tooprofile другой пять ВМ (VM11 через VM15), можно запустить средство hello из другой консоли командной строки для hello второй набор виртуальных машин (VM11 через VM15). Убедитесь, что hello второй набор виртуальных машин имеют имена виртуальных Машин из первого экземпляра профилирования hello, или используйте другой выходной каталог для второй запуск hello. При использовании двух экземпляров hello средства для профилирования hello одной ВМ и использовать Здравствуйте же выходной каталог, hello созданный отчет будет неправильным.

Конфигурации виртуальной Машины записываются один раз в начале hello hello профилирования операции и хранятся в файле с именем VMDetailList.xml. Эта информация используется при создании отчета hello. Любое изменение в конфигурации виртуальной Машины (например, увеличение количество ядер, дисков и сетевых адаптеров) в конце toohello начало hello профилирования не фиксируются. При изменении профилируемого конфигурацию виртуальной Машины ходе hello профилирования в общедоступной предварительной версии hello, вот hello решение tooget последних сведений, виртуальной Машины при создании отчета hello.

* Резервное копирование VMdetailList.xml и удалите файл hello из текущего расположения.
* Передайте - пользователь и - Password аргументы во время создания отчета hello.

Hello профилирование команда создает несколько файлов в hello профилирование каталог. Не удаляйте hello файлов, так как это таким образом влияют создания отчетов.

#### <a name="example-1-profile-vms-for-30-days-and-find-hello-throughput-from-on-premises-tooazure"></a>Пример 1: Профиля ВМ для 30 дней и пропускной способности hello поиска из локальной tooAzure
```
ASRDeploymentPlanner.exe -Operation StartProfiling -Directory “E:\vCenter1_ProfiledData” -Server vCenter1.contoso.com -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -NoOfDaysToProfile  30  -User vCenterUser1 -StorageAccountName  asrspfarm1 -StorageAccountKey Eby8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==
```

#### <a name="example-2-profile-vms-for-15-days"></a>Пример 2. Профилирование виртуальных машин, выполняемое в течение 15 дней

```
ASRDeploymentPlanner.exe -Operation StartProfiling -Directory “E:\vCenter1_ProfiledData” -Server vCenter1.contoso.com -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -NoOfDaysToProfile  15  -User vCenterUser1
```

#### <a name="example-3-profile-vms-for-1-hour-for-a-quick-test-of-hello-tool"></a>Пример 3: Профиль ВМ в течение часа для быстрой проверки средства hello
```
ASRDeploymentPlanner.exe -Operation StartProfiling -Directory “E:\vCenter1_ProfiledData” -Server vCenter1.contoso.com -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -NoOfDaysToProfile  0.04  -User vCenterUser1
```

>[!NOTE]
>
>* В случае hello сервера этого инструмента hello ОС перезагружается, или произошло аварийное завершение или если закрыть hello средство, с помощью клавиши Ctrl + C, hello профилирования данных сохраняется. Тем не менее есть вероятность отсутствует hello профилируемые данные за последние 15 минут. В таком случае hello запустите средство еще раз в режиме профилирования после перезагрузки сервера hello.
>* Когда hello имя учетной записи хранилища и ключ передаются, hello средство меры hello пропускной способности на последнем шаге hello профилирования. Если средство hello закрыт до завершения профилирования, пропускная способность hello не вычисляется. пропускная способность hello toofind перед созданием Здравствуйте отчета, hello GetThroughput операции можно запустить из командной строки консоли hello. В противном случае hello созданный отчет не будет содержать сведения о пропускной способности hello.


## <a name="generate-a-report"></a>Создание отчета
Программа Hello создает файл Microsoft Excel с поддержкой макросов (XLSM-файл) в качестве выходных данных отчетов hello, где показаны все рекомендации по развертыванию hello. Hello отчетов называется DeploymentPlannerReport_ <*уникальный числовой идентификатор*> .xlsm и hello помещается в указанный каталог.

После завершения профилирования запуском инструмента hello в режиме создания отчетов. Hello в следующей таблице содержится список toorun средство обязательные и необязательные параметры в режиме создания отчетов.

`ASRDeploymentPlanner.exe -Operation GenerateReport /?`

|Имя параметра | Описание |
|-|-|
| -Operation | Создание отчета. |
| -Server |  сервер vCenter/vSphere Hello полное доменное имя или IP-адрес (используйте hello же имя или IP-адрес, который использовался во время hello профилирования) находятся где hello профилирования которого отчет является toobe созданные виртуальные машины. Обратите внимание, что если вы использовали vCenter server во время профилирования hello, нельзя использовать сервер vSphere для создания отчетов и наоборот.|
| -VMListFile | Hello файл, содержащий список hello профилируемого виртуальных машин, которые hello отчета является toobe, созданный для. путь к файлу Hello может быть абсолютным или относительным. Hello файл должен содержать одно имя виртуальной Машины или IP-адрес в строке. то же, что имена hello виртуальной Машины на узел ESXi hello vCenter server/vSphere и соответствия, что был использован во время профилирования следует hello Hello имен виртуальных Машин, которые указаны в файле hello.|
| -Directory | (Необязательно) hello UNC или путь к локальному каталогу, где hello профилирования данных (файлы, созданные во время профилирования) хранится. Эти данные требуется для формирования отчетов hello. Если имя не указано, используется каталог ProfiledData. |
| -GoalToCompleteIR | (Необязательно) hello количество часов, в какие hello начальной репликации hello профилирования виртуальных машин должен toobe завершена. Hello созданный отчет содержит hello число виртуальных машин, для которых можно выполнить начальную репликацию в указанный hello времени. Hello по умолчанию — 72 часов. |
| -User | (Необязательно) hello пользователя имя toouse tooconnect toohello vCenter/сервер vSphere. Имя Hello — используется toofetch hello последние сведения о настройках hello ВМ, например hello количество дисков, количество ядер и число сетевых адаптеров, toouse в отчете hello. Если не указано имя hello, используется конфигурации hello, собираемых в начале hello профилирование начальное hello. |
| -Password | (Необязательно) hello пароль toouse tooconnect toohello vCenter server или ESXi узлы vSphere. Если пароль hello не указано в качестве параметра, вы предложит ввести его позже при выполнении команды hello. |
| -DesiredRPO | (Необязательно) hello требуемой цели точки восстановления, в минутах. по умолчанию Hello составляет 15 минут.|
| -Bandwidth | Пропускная способность в Мбит/с. Hello параметр toouse toocalculate hello RPO, достижимой для hello указан пропускной способности. |
| -StartDate | Дата и время начала (необязательно) hello в мм-дд-YYYY:HH:MM (24-часовом формате). Параметр *StartDate* необходимо указать с параметром *EndDate*. Если указано StartDate hello отчет создается для hello профилировать данные, собранные между StartDate и EndDate. |
| -EndDate | (Необязательно) hello Дата и время окончания в мм-дд-YYYY:HH:MM (24-часовом формате). Параметр *EndDate* необходимо указать с параметром *StartDate*. При указании конечной даты, hello отчет создается для hello профилировать данные, собранные между StartDate и EndDate. |
| -GrowthFactor | (Необязательно) hello инкремента, выраженное в процентах. по умолчанию Hello — 30 процентов. |
| -UseManagedDisks | (Необязательно) UseManagedDisks — "Да" или "Нет". Значение по умолчанию — "Да". Учитывая ли отработки отказа или тестовая отработка отказа виртуальных машин выполняется на управляемого диска вместо неуправляемого disk вычисляется Hello число виртуальных машин, которые могут быть помещены в одной учетной записи хранения. |

#### <a name="example-1-generate-a-report-with-default-values-when-hello-profiled-data-is-on-hello-local-drive"></a>Пример 1: Создание отчета со значениями по умолчанию при hello профилирования данных на локальном диске hello
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “\\PS1-W2K12R2\vCenter1_ProfiledData” -VMListFile “\\PS1-W2K12R2\vCenter1_ProfiledData\ProfileVMList1.txt”
```

#### <a name="example-2-generate-a-report-when-hello-profiled-data-is-on-a-remote-server"></a>Пример 2: Создание отчета, если данные hello профилирования на удаленном сервере
Должна иметь доступ на чтение и запись для hello удаленный каталог.
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “\\PS1-W2K12R2\vCenter1_ProfiledData” -VMListFile “\\PS1-W2K12R2\vCenter1_ProfiledData\ProfileVMList1.txt”
```

#### <a name="example-3-generate-a-report-with-a-specific-bandwidth-and-goal-toocomplete-ir-within-specified-time"></a>Пример 3: Создание отчета с определенной toocomplete пропускной способности и цель IR в течение указанного времени
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt” -Bandwidth 100 -GoalToCompleteIR 24
```

#### <a name="example-4-generate-a-report-with-a-5-percent-growth-factor-instead-of-hello-default-30-percent"></a>Пример 4: Создание отчета с коэффициентом роста 5 процентов вместо 30 процентов по умолчанию hello
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt” -GrowthFactor 5
```

#### <a name="example-5-generate-a-report-with-a-subset-of-profiled-data"></a>Пример 5. Создание отчета с подмножеством данных профилирования
Например в течение 30 дней профилируемого данных и будут toogenerate отчет только 20 дней.
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt” -StartDate  01-10-2017:12:30 -EndDate 01-19-2017:12:30
```

#### <a name="example-6-generate-a-report-for-5-minute-rpo"></a>Пример 6. Создание отчета для 5-минутной целевой точки восстановления
```
ASRDeploymentPlanner.exe -Operation GenerateReport -Server vCenter1.contoso.com -Directory “E:\vCenter1_ProfiledData” -VMListFile “E:\vCenter1_ProfiledData\ProfileVMList1.txt”  -DesiredRPO 5
```

## <a name="percentile-value-used-for-hello-calculation"></a>Значение процентиля для расчета hello
**Значение процентиля какие по умолчанию hello метрик производительности, собранные во время профилирования используйте средство выполняет hello, при формировании отчета?**

Hello средство значения по умолчанию toohello 95-го процентиля значения чтения и записи операций ввода-ВЫВОДА, запись операций ввода-ВЫВОДА и обработки данных, собранных во время профилирования всех виртуальных машин hello. Эта метрика гарантирует этого hello 100-й процентиль пик виртуальных машин может появиться из-за временных событий является не используется toodetermine требований к целевой учетной записи хранилища и пропускной способности источника. например из-за выполнения задания архивации раз в день, периодического индексирования базы данных, создания аналитического отчета или какого-либо другого кратковременного события, происходящего в определенный момент времени.

С помощью значения 95-го процентиля дает значение true, изображения характеристики реальными рабочими нагрузками и предоставляет hello наилучшей производительности при запуске hello рабочих нагрузок в Azure. Корпорация Майкрософт не предполагает, что потребовалось бы toochange этот номер. Если изменить значение hello (toohello 90-процентное значение, например), можно обновить файл конфигурации hello *ASRDeploymentPlanner.exe.config* в папку по умолчанию hello и сохраните его toogenerate новый отчет в существующих hello профилирования данные.
```
<add key="WriteIOPSPercentile" value="95" />      
<add key="ReadWriteIOPSPercentile" value="95" />      
<add key="DataChurnPercentile" value="95" />
```

## <a name="growth-factor-considerations"></a>Рекомендации по коэффициенту роста
**Почему следует учитывать коэффициент роста при планировании развертывания?**

Это критическое tooaccount к увеличению вашего характеристик рабочей нагрузки, при условии, что возможное увеличение использования со временем. После защиты на месте, если изменить характеристики вашей рабочей нагрузки, не может переключаться tooa другую учетную запись хранилища для защиты без отключения и повторного включения защиты hello.

Например, сейчас виртуальная машина находится в учетной записи репликации хранилища класса Standard. Через hello следующие три месяца несколько изменений, скорее всего, toooccur:

* приведет к увеличению числа Hello пользователей приложение hello, которое выполняется на ВМ hello.
* Hello результирующее увеличение обновленных данных на hello ВМ потребуется hello виртуальной Машины toogo toopremium хранилище, чтобы репликация Site Recovery можно не отставать.
* Следовательно будет иметь toodisable и снова включить учетную запись хранения premium tooa защиты.

Мы настоятельно рекомендуем спланировать роста при планировании развертывания, а значение по умолчанию hello — 30 процентов. Эксперт hello активны проекций использования вашего приложения шаблона и роста и это число можно изменить соответствующим образом при создании отчета. Кроме того, можно создать несколько отчетов с различных факторов роста с hello профилирования данных и определить, какие рекомендации целевого хранилища и источник пропускной способности лучше подходят для вас.

Hello созданный отчет Microsoft Excel содержит hello следующую информацию:

* [Входные данные](site-recovery-deployment-planner.md#input)
* [рекомендации](site-recovery-deployment-planner.md#recommendations-with-desired-rpo-as-input);
* [рекомендации по вводу значения пропускной способности](site-recovery-deployment-planner.md#recommendations-with-available-bandwidth-as-input);
* [Размещение хранилища виртуальной машины](site-recovery-deployment-planner.md#vm-storage-placement)
* [Совместимые виртуальные машины](site-recovery-deployment-planner.md#compatible-vms)
* [Несовместимые виртуальные машины](site-recovery-deployment-planner.md#incompatible-vms)

![Планировщик ресурсов](./media/site-recovery-deployment-planner/dp-report.png)

## <a name="get-throughput"></a>Оценка пропускной способности.

hello tooestimate пропускная способность, которую можно добиться Site Recovery на локальной tooAzure во время репликации, запустите средство hello в режиме GetThroughput. Hello вычисления пропускной способности hello с сервера hello, hello средство, запущена ли на. В идеальном случае этот сервер зависит hello server изменения размера руководство по выбору конфигурации. Если вы уже развернули Site Recovery компоненты локальной инфраструктуры, запустите средство hello на сервере конфигурации hello.

Откройте консоль командной строки и перейдите планирования папка инструмент развертывания toohello Site Recovery. Запустите ASRDeploymentPlanner.exe с указанными ниже параметрами.

`ASRDeploymentPlanner.exe -Operation GetThroughput /?`

|Имя параметра | Описание |
|-|-|
| -Operation | Оценка пропускной способности. |
| -Directory | (Необязательно) hello UNC или путь к локальному каталогу, где hello профилирования данных (файлы, созданные во время профилирования) хранится. Эти данные требуется для формирования отчетов hello. Если имя каталога не указано, используется каталог ProfiledData. |
| -StorageAccountName | Имя учетной записи хранилища Hello, применяющее hello toofind пропускной способности, используемой для репликации данных из локальной tooAzure. Hello средство передачи теста данных toothis хранилища учетной записи toofind hello потребляемая пропускная способность. |
| -StorageAccountKey | Hello ключ учетной записи хранилища, который использовал учетную запись хранения tooaccess hello. Go toohello портала Azure > учетные записи хранения ><*имя учетной записи хранения*>> Параметры > клавиши доступа > Key1 (или первичный ключ доступа для учетной записи хранения классический). |
| -VMListFile | Hello файл, содержащий список виртуальных машин toobe профилирования для расчета hello пропускной способности, используемой hello. путь к файлу Hello может быть абсолютным или относительным. Hello файл должен содержать одно имя или IP-адрес виртуальной Машины в строке. то же, что имена hello виртуальной Машины на узел ESXi hello vCenter server/vSphere следует hello Hello имен виртуальных Машин, указанный в файле hello.<br>Например файл hello VMList.txt содержит следующие виртуальные машины hello:<ul><li>VM_A;</li><li>10.150.29.110</li><li>VM_B.</li></ul>|
| -Environment | (необязательно) Это целевая среда учетной записи хранения Azure. Этот параметр может иметь одно из трех значений: AzureCloud, AzureUSGovernment, AzureChinaCloud. Значение по умолчанию — AzureCloud. Используйте параметр hello, когда целевой регион Azure правительства США или Azure China облаков. |

инструмент «Hello» создает несколько asrvhdfile 64 МБ .vhd # <> файлов (где «#» — число hello файлов) в указанный каталог hello. Средство Hello передает hello файлы toohello учетной записи toofind hello пропускной способности хранилища. После пропускная hello hello средство удаляет все файлы hello из учетной записи хранения hello и с локального сервера hello. Средство hello был завершен по любой причине, пока она является вычисление пропускной способности, файлы hello не удаляется из хранилища hello или с локального сервера hello. Будет иметь toodelete их вручную.

Hello пропускная способность измеряется в определенный момент времени, и именно hello максимальную производительность, можно добиться Site Recovery во время репликации, условии, что все другие факторы остаются одинаковыми hello. Например, если любое приложение начинает использовать больший объем полосы пропускания на приветствия одной сети, фактическая пропускная способность hello изменяется во время репликации. При выполнении команды GetThroughput hello с сервера конфигурации средства hello неизвестно, все защищенные виртуальные машины и текущей репликации. Hello измеренной пропускной способности hello образом другим, если обработка данных имеют hello GetThroughput операция выполняется, когда hello защищенных виртуальных машин. Рекомендуется запускать средство hello в разных точках в времени во время профилирования toounderstand какие пропускной способности, уровни, может осуществляться в различные моменты времени. В отчете hello hello программа отображает hello последнего измеренной пропускной способности.

### <a name="example"></a>Пример
```
ASRDeploymentPlanner.exe -Operation GetThroughput -Directory  E:\vCenter1_ProfiledData -VMListFile E:\vCenter1_ProfiledData\ProfileVMList1.txt  -StorageAccountName  asrspfarm1 -StorageAccountKey by8vdM02xNOcqFlqUwJPLlmEtlCDXJ1OUzFT50uSRZ6IFsuFq2UVErCz4I6tq/K1SZFPTOtr/KBHBeksoGMGw==
```

>[!NOTE]
>
> Запустите средство hello на сервере, где Привет одному контейнеру хранилища и ЦП характеристики, что и сервер конфигурации hello.
>
> Для репликации задайте hello рекомендуемые пропускной способности hello toomeet RPO 100% времени hello. После выбора hello правой пропускной способности, если вы не видите повысить пропускную способность достичь hello, о которых сообщает анализатор hello hello следующие:
>
>  1. Проверьте toodetermine, является ли какой-либо сети качества обслуживания (QoS), ограничивается пропускной способности Site Recovery.
>
>  2. Проверьте toodetermine, является ли ваше хранилище Site Recovery hello ближайшего физически поддерживаемых задержки сети toominimize региона Microsoft Azure.
>
>  3. Проверьте наличие toodetermine характеристики вашего локального хранилища можно улучшить hello оборудования (например, tooSSD жесткого диска).
>
>  4. Изменить параметры Site Recovery hello в сервер обработки hello слишком[увеличить hello объем пропускной способности сети, используемой для репликации](./site-recovery-plan-capacity-vmware.md#control-network-bandwidth).

## <a name="recommendations-with-desired-rpo-as-input"></a>Рекомендации относительно требуемого значения RPO

### <a name="profiled-data"></a>Данные профилирования

![представления профилирования данных Hello в планировщике развертывания hello](./media/site-recovery-deployment-planner/profiled-data-period.png)

**Период профилируемые данные**: hello период, во время которого hello запуска профилирования. По умолчанию средство hello включает все данные профилируемого в вычислении hello, если создается отчет hello за определенный период с помощью StartDate и EndDate параметры при создании отчета.

**Имя сервера**: hello имя или IP-адрес hello VMware vCenter или узла ESXi, создается отчет, виртуальные машины.

**Требуемого RPO**: hello цель точки восстановления для развертывания. По умолчанию hello требуемая пропускная способность сети вычисляется для значения RPO 15, 30 до 60 минут. В зависимости от выбора hello обновлении значений hello влияет на листе hello. При использовании hello *DesiredRPOinMin* параметр при создании отчета hello, показанному значение hello RPO требуемого результата.

### <a name="profiling-overview"></a>Общие сведения о профилировании

![Результаты профилирования в планировщике развертывания hello](./media/site-recovery-deployment-planner/profiling-overview.png)

**Общее число виртуальных машин профилирования**: hello общее число виртуальных машин, данные которых профилируемый доступен. Если hello VMListFile имена все виртуальные машины, которые не были профилированы, эти виртуальные машины не учитываются при создании отчета hello и исключаются из hello профилируемого виртуальных машин всего.

**Виртуальные машины, совместимые**: hello число виртуальных машин, которые могут быть tooAzure, защищенных с помощью Site Recovery. Это общее число hello совместимых виртуальных машин, для какой hello вычисляются необходимая пропускная способность сети, количество учетных записей хранения, количество ядер, Azure и номер конфигурации серверов и серверов дополнительной обработки. Подробные сведения Hello каждой виртуальной машины, совместимые доступны в раздел «Совместимых виртуальных машин» hello.

**Несовместимые виртуальные машины**: hello количество профилируемым виртуальных машин, которые несовместимы для защиты с помощью Site Recovery. Hello причины несовместимости, указаны в hello раздел «Несовместимый виртуальные машины». Если hello VMListFile имена все виртуальные машины, которые не были профилированы, эти виртуальные машины исключаются из hello несовместимые число виртуальных машин. Эти виртуальные машины отображается как «Не удалось найти данные» в hello конец раздела hello «несовместимые виртуальные машины».

**Desired RPO** (Требуемое значение RPO) — требуемая целевая точка восстановления в минутах. Hello отчет создается для трех RPO значений: 15 (по умолчанию), 30 до 60 минут. Рекомендация Hello пропускной способности в отчете hello изменяется в зависимости от сделанного выбора, в списке hello требуемого RPO раскрывающегося списка в правой верхней hello hello листа. Если созданный hello отчетов с помощью hello *- DesiredRPO* параметр пользовательское значение, это пользовательское значение будет показано как по умолчанию hello в hello требуемого RPO раскрывающегося списка.

### <a name="required-network-bandwidth-mbps"></a>Требуемая пропускная способность сети (Мбит/с)

![Необходимая пропускная способность сети в планировщике развертывания hello](./media/site-recovery-deployment-planner/required-network-bandwidth.png)

**toomeet RPO 100% времени hello:** hello рекомендуется пропускная способность в Мбит/с toobe выделенной toomeet требуемой RPO 100% времени hello. Этот объем пропускной способности, должен быть выделен специально для репликации изменений устойчивого состояния все совместимые виртуальные машины tooavoid нарушения RPO.

**toomeet RPO 90 процентов времени hello**: из-за широкополосного цены или по другой причине, если невозможно задать toomeet необходимую пропускную способность hello требуемой RPO 100% времени hello, вы можете toogo с низкой пропускной способностью, которые могут соответствовать вашей требуемый RPO 90 процентов времени hello. toounderstand последствия hello задания этого низкой пропускной способностью, hello отчет предоставляет Анализ гипотетических числом hello и длительность RPO tooexpect нарушений.

**Достигнутую пропускная способность:** пропускной способности hello из hello сервера, на котором нужно выполнять регион hello GetThroughput команда toohello Microsoft Azure, где находится hello учетной записи хранилища. Это число пропускной способности Указывает предполагаемое hello уровень, который можно добиться при защите приветствия совместимых виртуальных машин с помощью Site Recovery при условии, что на сервере конфигурации или характеристики хранилища и сети сервера процесса остаются hello таким же, что и Hello сервер, на котором будет работать средство hello.

Для репликации необходимо задать hello рекомендуемые пропускной способности hello toomeet RPO 100% времени hello. После выбора hello пропускной способности, если вы не видите увеличения пропускной способности достигается hello, о которых сообщает анализатор hello, выполните следующие hello.

1. Проверьте toosee, является ли какой-либо сети качества обслуживания (QoS), ограничивается пропускной способности Site Recovery.

2. Проверьте toosee, является ли ваше хранилище Site Recovery hello ближайшего физически поддерживаемых задержки сети toominimize региона Microsoft Azure.

3. Проверьте наличие toodetermine характеристики вашего локального хранилища можно улучшить hello оборудования (например, tooSSD жесткого диска).

4. Изменить параметры Site Recovery hello в сервер обработки hello слишком[увеличить пропускную способность сети hello сумма для репликации](./site-recovery-plan-capacity-vmware.md#control-network-bandwidth).

При запуске средства hello на сервере конфигурации или сервер обработки, который уже защищенные виртуальные машины, запустите средство hello несколько раз. Hello достичь пропускной способности число изменяется в зависимости от hello объем обработки, обрабатываемых на момент времени.

Для всех развертываний Site Recovery в корпоративных средах мы рекомендуем использовать [ExpressRoute](https://aka.ms/expressroute).

### <a name="required-storage-accounts"></a>Диаграмма Required Azure Storage Accounts (Требуемые учетные записи хранения Azure)
После передачи диаграммы, которые hello общее число хранилище учетных записей (standard и premium), все необходимые tooprotect Hello hello совместимых виртуальных машин. toolearn учетную запись toouse какие хранилища для каждой виртуальной Машины, см. раздел «хранилище виртуальных Машин размещения» hello.

![Требуется хранилище учетных записей в планировщике развертывания hello](./media/site-recovery-deployment-planner/required-azure-storage-accounts.png)

### <a name="required-number-of-azure-cores"></a>Область Required Number of Azure Cores (Необходимое число ядер Azure)
Этот результат — общее число ядер toobe до перехода на другой ресурс или тестовой отработки отказа всех hello совместимых виртуальных машин устанавливать hello. Если доступно слишком мало ядер в подписке hello, сайта происходит сбой восстановления toocreate виртуальных машин во время hello тестирования или переход.

![Требуемое количество ядер Azure в планировщике развертывания hello](./media/site-recovery-deployment-planner/required-number-of-azure-cores.png)

### <a name="required-on-premises-infrastructure"></a>Область Required On-premises Infrastructure (Необходимая локальная инфраструктура)
На рисунке — общее число hello серверы конфигурации и дополнительные процедуры серверы toobe настроен было достаточно tooprotect все hello совместимых виртуальных машин. В зависимости от hello поддерживается [размер рекомендации по конфигурации сервера hello](https://aka.ms/asr-v2a-on-prem-components), средство hello может рекомендовать дополнительных серверов. Hello рекомендация основана на hello большее из обработки день hello или hello максимальное количество защищенных виртуальных машин (при условии, что три диска на виртуальную Машину в среднем), какое значение будет достигнута первым на hello конфигурации сервера или сервера hello дополнительных процессов. Вы найдете в разделе «Input» hello hello сведения из общего объема обновлений в день и общее количество защищенных дисках.

![Требуется локальная инфраструктура в планировщике развертывания hello](./media/site-recovery-deployment-planner/required-on-premises-infrastructure.png)

### <a name="what-if-analysis"></a>Анализ "что если"
Этот анализ описаны сколько нарушения могут происходить во время профилирования периода при задании hello, что низкой пропускной способностью для требуемого hello RPO toobe выполняются только 90 процентов времени hello. Это может быть одно или несколько нарушений, которые могут произойти в любой заданный день. График Hello показывает пиковых нагрузок hello RPO hello дня.
По результатам анализа, решите, если допустима hello число нарушений RPO для всех дней и пиковых нагрузок RPO посещений в день с hello указан низкой пропускной способностью. Если это допустимо, можно выделить hello низкой пропускной способностью для репликации, в противном случае выделите hello выше пропускной способности, предлагаемых toomeet hello требуемого RPO 100% времени hello.

![Анализ гипотетических вариантов в планировщике развертывания hello](./media/site-recovery-deployment-planner/what-if-analysis.png)

### <a name="recommended-vm-batch-size-for-initial-replication"></a>Recommended VM batch size for initial replication (Рекомендуемый размер пакета виртуальных машин для начальной репликации)
В этом разделе мы рекомендуем hello число виртуальных машин, которые могут быть защищены в параллельных toocomplete hello начальной репликации в течение 72 часов с hello предложенные toomeet пропускной способности желаемой RPO 100% времени hello устанавливается. Это значение можно изменить toochange его во время создания отчетов, используйте hello *GoalToCompleteIR* параметра.

Hello диаграмме здесь отображается диапазон значений пропускной способности и вычисляемые ВМ пакета размер счетчик toocomplete начальной репликации через 72 часа по hello обнаружил ВМ размера для всех hello совместимых виртуальных машин.

В общедоступной предварительной версии hello hello отчета, не указывайте какие виртуальные машины должны быть включены в пакет. Можно использовать размер диска hello показано hello «совместимый виртуальных машин» раздела toofind размер каждой виртуальной Машины и выбирать их для пакета, или можно выбрать hello виртуальных машин на основе характеристик известных рабочей нагрузки. время завершения Hello hello начальной репликации изменений пропорционально, основанные на hello фактический размер диска виртуальной Машины, использовать место на диске и пропускную способность сети.

![Рекомендуемый размер пакета виртуальных машин](./media/site-recovery-deployment-planner/recommended-vm-batch-size.png)

### <a name="growth-factor-and-percentile-values-used"></a>Коэффициент роста и используемые значения процентилей
В этом разделе внизу hello hello листа значение процентиля hello показывает, используется для всех счетчиков производительности hello hello профилирования виртуальных машин (по умолчанию — процентиль значения 95) и hello коэффициент роста (по умолчанию — 30 процентов), используемый в вычислениях все hello.

![Коэффициент роста и используемые значения процентилей](./media/site-recovery-deployment-planner/max-iops-and-data-churn-setting.png)

## <a name="recommendations-with-available-bandwidth-as-input"></a>Рекомендации по вводу значения доступной пропускной способности

![Рекомендации по вводу значения доступной пропускной способности](./media/site-recovery-deployment-planner/profiling-overview-bandwidth-input.png)

Возможны ситуации, когда вы не сможете установить для репликации Site Recovery достаточный объем пропускной способности. Hello средство позволяет tooinput доступную полосу пропускания (с помощью hello - параметр пропускной способности при создании отчета) и get hello достичь целей точек восстановления в минутах. С этого достичь значение RPO можно ли необходимые tooset дополнительной пропускной способности или вы не наличие решения аварийного восстановления с этой целевой точкой восстановления.

![Достигаемое значение RPO для пропускной способности 500 Мбит/с](./media/site-recovery-deployment-planner/achievable-rpos.png)

## <a name="input"></a>Входные данные
входные данные листа Hello предоставляет обзор hello профилирования среды VMware.

![Общие сведения о hello профилирования среды VMware](./media/site-recovery-deployment-planner/Input.png)

**Дата начала** и **Дата окончания**: hello даты начала и окончания hello профилирование данных для создания отчетов. По умолчанию Дата начала hello является профилирования начала, дата hello и hello конечная дата является датой hello, при остановке профилирования. Это может быть hello «Дата начала» и «Дата окончания» значения, если создается отчет hello со следующими параметрами.

**Общее количество дней профилирование**: hello общее количество дней между hello профилирования даты начала и окончания для какой hello формируется отчет.

**Количество совместимых виртуальных машин**: hello общее число совместимые виртуальных машин, которой требуется hello пропускной способности сети, требуемого количества хранилища учетные записи, ядра Microsoft Azure, серверы конфигурации и серверы дополнительных процессов вычислить.

**Общее число дисков для всех виртуальных машин в совместимый**: hello номер, который используется как один из hello вводит номер hello toodecide конфигурации серверов и серверов toobe дополнительные процедуры, используемые в развертывании hello.

**Среднее число дисков в каждой виртуальной машины, совместимые**: hello среднее количество дисков, вычисленная для всех виртуальных машин совместимы.

**Средний размер диска (ГБ)**: hello среднего размера, вычисленная для всех виртуальных машин совместимы.

**Требуемого RPO (в минутах)**: либо hello по умолчанию значение точки восстановления цель или hello, переданное для параметра «DesiredRPO» hello во время hello tooestimate создания отчетов, которые требуется пропускной способности.

**Требуемой полосы пропускания (Мбит/с)**: hello значение, которое Вы передали для параметра «Пропускная способность» hello во время создания tooestimate отчет hello достичь целей точек восстановления.

**Обработка наблюдаемых типовых данных в день (ГБ)**: hello среднего значения данных обработка наблюдается все профилирования дней. Этот номер используется как один из hello входов toodecide hello число конфигурации серверов и серверов toobe дополнительные процедуры, используемые в развертывании hello.


## <a name="vm-storage-placement"></a>Размещение хранилища виртуальной машины

![Размещение хранилища виртуальной машины](./media/site-recovery-deployment-planner/vm-storage-placement.png)

**Тип хранения на диске**: либо стандартного или расширенного учетной записи хранения, являющийся используется tooreplicate все hello соответствующие виртуальные машины, упомянутые в hello **tooPlace виртуальные машины** столбца.

**Предлагаемые префикс**: hello предлагаемые трех символов префикс, который может использоваться для создания имени учетной записи хранилища hello. Можно использовать собственный префикс, но средство hello предложений соответствует hello [секции соглашение об именовании для учетных записей хранения](https://aka.ms/storage-performance-checklist).

**Предлагаемое имя учетной записи**: имя учетной записи хранения hello, после включения hello предлагаемые префикс. Замените именем hello в hello угловые скобки (< и >) во входных данных пользовательских.

**Войдите в учетную запись хранения**: все журналы hello репликации хранятся в стандартном хранилище учетной записи. Для виртуальных машин, которые реплицируются tooa учетной записи хранения premium, настроить дополнительная Стандартная учетная запись хранения для хранения журнала. Одна учетная запись хранения журналов уровня Standard может использоваться несколькими учетными записями хранения репликации уровня Premium. Виртуальные машины, которые будут использовать учетные записи хранения реплицируемых toostandard hello учетную запись хранения для журналов.

**Предлагаемое имя учетной записи журнала**: имя учетной записи хранения журнала после включения hello предлагаемые префикс. Замените именем hello в hello угловые скобки (< и >) во входных данных пользовательских.

**Сводка размещения**: Сводка hello Общая нагрузка ВМ в учетной записи хранения hello во время hello репликации и тестирования или переход. Он включает hello общее количество виртуальных машин сопоставленных toohello учетной записи хранения, общее чтение и запись, операций ввода-ВЫВОДА через все виртуальные машины в этой учетной записи хранения, общее записи (репликация) операций ввода-ВЫВОДА, Общая Настройка размера для всех дисков, а также общее число дисков.

**Виртуальные машины tooPlace**: список всех hello виртуальных машин, которые должны размещаться на hello, заданным для оптимальной производительности и использовании учетной записи хранилища.

## <a name="compatible-vms"></a>Совместимые виртуальные машины
![Электронная таблица Excel с совместимыми виртуальными машинами](./media/site-recovery-deployment-planner/compatible-vms.png)

**Имя виртуальной Машины**: hello имя виртуальной Машины или IP-адрес, используемый в hello VMListFile при создании отчета. В этом столбце также перечислены дисков hello (VMDKs), которые будут toohello подключенных виртуальных машин. toodistinguish vCenter виртуальных машин с дублирующимися именами или IP-адреса, имена hello включают имя узла ESXi hello. Hello перечисленных узел ESXi — hello один где hello ВМ помещен при средство hello обнаруженных во время профилирования период hello.

Параметр **VM Compatibility** (Совместимость виртуальной машины) имеет два значения: **Да** и **Да**\*. **Да** \* для экземпляров, в какие hello Виртуальная машина подходит для [хранилища Azure Premium](https://aka.ms/premium-storage-workload). Здесь hello профилирования высокой обработки операций ввода-ВЫВОДА диска на дисплее hello P20 или P30 категории, либо hello размер диска hello вызывает сопоставлен вниз tooa P10 или P20 toobe. Учетная запись хранения Hello решает, какой диск хранилища premium введите toomap диска в зависимости от его размера. Например:
* если емкость диска составляет меньше 128 ГБ, он сопоставляется с категорией P10;
* 128 ГБ too512 является P20.
* 512 ГБ too1024 является P30.
* 1025 ГБ too2048 является P40.
* 2049 too4095 ГБ является P50.

Если характеристик рабочей нагрузки hello диска поместить его в hello P20 или P30 категории, но размер hello сопоставляет его вниз tooa ниже premium тип диска для хранения данных, средство hello помечает эту виртуальную Машину как **Да**\*. Средство Hello также рекомендуется использовать либо изменить toofit размер диска источника hello в hello, рекомендуется использовать тип диска хранилища premium, либо изменить hello целевой диск тип после отработки отказа.

**Тип хранилища** — Standard или Premium.

**Предлагаемые префикс**: hello префикс трех символов-учетной записи хранилища.

**Учетная запись хранения**: hello имя, которое использует префикс hello предлагаемые учетной записи хранилища.

**ОПЕРАЦИЙ чтения и записи (с коэффициент роста)**: hello пиковой рабочей нагрузки чтения и записи операций ввода-ВЫВОДА на диске hello (по умолчанию — процентиль значения 95), включая hello будущих коэффициент роста (по умолчанию — 30 процентов). Обратите внимание, что hello общее чтение и запись операций ввода-ВЫВОДА виртуальной машины не всегда является сумма hello hello ВМ отдельных дисков чтение и запись операций ввода-ВЫВОДА, так как hello пиковых нагрузок чтения и записи IOPS hello ВМ hello пик hello сумму его отдельных дисков чтение и запись операций ввода-ВЫВОДА во время каждую минуту hello Профилирование периода.

**Обработка данных в Мбит/с (с коэффициент роста)**: hello скорость обработки пиковых нагрузок на диске hello (по умолчанию — процентиль значения 95), включая hello будущих коэффициент роста (по умолчанию — 30 процентов). Обратите внимание, что hello обработка данных из hello виртуальной Машины не всегда hello сумма обработки данных виртуальная машина hello отдельных дисков, обработка данных пиковых нагрузок hello объекта hello виртуальной Машины имеет hello пик hello сумма об обработке его отдельных дисков во время каждую минуту hello профилирование периода.

**Размер виртуальной Машины Azure**: hello идеальный сопоставлен размер виртуальной машины облачных служб Azure для этого локальной виртуальной Машины. сопоставление Hello зависит от объема памяти виртуальной Машины в локальной среде hello, количество дисков или ядер и сетевых адаптеров и операций ввода-ВЫВОДА чтения и записи. Hello рекомендуется всегда размер виртуальной Машины Azure наименьшее hello, соответствующего всем hello локальной виртуальной Машины характеристики.

**Количество дисков**: hello общее количество дисков виртуальной машины (VMDKs) на hello виртуальной Машины.

**Место на диске (ГБ)**: hello установки общий размер всех дисков виртуальной Машины hello. инструмент Hello также отображает hello места на диске для отдельных дисков hello в hello виртуальной Машины.

**Ядер**: hello количество ядер ЦП на hello виртуальной Машины.

**Память (МБ)**: hello ОЗУ на hello виртуальной Машины.

**Сетевые адаптеры**: hello число сетевых адаптеров на hello виртуальной Машины.

**Загрузка типа**: это тип загрузки hello виртуальной Машины. (BIOS или EFI). Сейчас Azure Site Recovery поддерживает только тип загрузки BIOS. Все виртуальные машины hello типа загрузки EFI, перечислены в листе несовместимые виртуальных машин.

**Тип ОС**: hello — тип ОС hello виртуальной Машины. (Windows, Linux или другая ОС).

## <a name="incompatible-vms"></a>Несовместимые виртуальные машины

![Электронная таблица Excel с несовместимыми виртуальными машинами](./media/site-recovery-deployment-planner/incompatible-vms.png)

**Имя виртуальной Машины**: hello имя виртуальной Машины или IP-адрес, используемый в hello VMListFile при создании отчета. В этом столбце также перечислены VMDKs hello, toohello подключенных виртуальных машин. toodistinguish vCenter виртуальных машин с дублирующимися именами или IP-адреса, имена hello включают имя узла ESXi hello. Hello перечисленных узел ESXi — hello один где hello ВМ помещен при средство hello обнаруженных во время профилирования период hello.

**Виртуальная машина совместимости**: Указывает, почему hello, учитывая виртуальной Машины несовместимо для использования с компонентом восстановления сайта. Hello причин описаны для каждого несовместимые диска hello виртуальной Машины и, на основе на опубликованные [ограничения хранилища](https://aka.ms/azure-storage-scalbility-performance), может быть любым из следующих hello:

* Размер диска превышает 4095 ГБ. Сейчас служба хранилища Azure не поддерживает диски данных емкостью более 4095 ГБ.
* Размер диска ОС превышает 2048 ГБ. Сейчас служба хранилища Azure не поддерживает диски ОС емкостью более 2048 ГБ.
* Тип загрузки — EFI. Сейчас Azure Site Recovery поддерживает только виртуальные машины с типом загрузки BIOS.

* Общий размер виртуальной Машины (репликации + TFO) превышает максимальный размер hello поддерживается учетной записи хранения (35 ТБ). Эта несовместимость обычно возникает, когда характеристики производительности, превышает hello максимальные поддерживаемые Azure или Site Recovery ограничения для стандартного хранилища имеет один диск в hello виртуальной Машины. Такого экземпляра отправляет hello виртуальной Машины в зону хранения premium hello. Однако невозможно защитить hello максимальный поддерживаемый размер учетной записи хранения premium составляет 35 ТБ и один защищенных виртуальных Машин для нескольких учетных записей хранилища. Также Обратите внимание, что при выполнении тестовой отработки отказа на виртуальной Машине, защищенных он выполняется в hello одной учетной записи хранения, где хода репликации. В данном экземпляре настройте 2 x размер hello hello диска для tooprogress репликации и проверьте toosucceed отработки отказа в параллельном режиме.
* Число операций ввода-вывода в секунду источника превышает поддерживаемое хранилищем ограничение в 5000 операций ввода-вывода в секунду на диск.
* Число операций ввода-вывода в секунду источника превышает поддерживаемое хранилищем ограничение в 80 000 операций ввода-вывода в секунду на виртуальную машину.
* Обработка среднего значения данных превышает допустимое ограничение обработка данных Site Recovery 10 Мбит/с для среднего размера ввода-вывода для диска hello.
* Обработка данных на всех дисках на hello виртуальной Машины превышает максимальное hello поддерживается Site Recovery данные об обработке 54 Мбит/с на виртуальную Машину.
* Среднее эффективное числа операций записи превышает предел IOPS восстановления сайта hello поддерживается 840 для диска.
* Хранилище моментальных снимков вычисляемые превышает предел хранилища моментальных снимков hello поддерживается 10 ТБ.

**ОПЕРАЦИЙ чтения и записи (с коэффициент роста)**: hello пиковой рабочей нагрузки операций ввода-ВЫВОДА на диске hello (по умолчанию — процентиль значения 95), включая hello будущих коэффициент роста (по умолчанию — 30 процентов). Обратите внимание, что hello общее чтение и запись IOPS hello виртуальной Машины не всегда является сумма hello hello ВМ отдельных дисков чтение и запись операций ввода-ВЫВОДА, так как hello пиковых нагрузок чтения и записи IOPS hello ВМ hello пик hello сумму его отдельных дисков чтение и запись операций ввода-ВЫВОДА во время каждую минуту hello Профилирование периода.

**Обработка данных в Мбит/с (с коэффициент роста)**: hello скорость обработки пиковых нагрузок на диске hello (процентиль значения 95 по умолчанию), включая hello будущих инкремента (по умолчанию 30 процентов). Обратите внимание, что hello обработка данных из hello виртуальной Машины не всегда hello сумма обработки данных виртуальная машина hello отдельных дисков, обработка данных пиковых нагрузок hello объекта hello виртуальной Машины имеет hello пик hello сумма об обработке его отдельных дисков во время каждую минуту hello профилирование периода.

**Количество дисков**: hello общее число VMDKs на hello виртуальной Машины.

**Место на диске (ГБ)**: hello установки общий размер всех дисков виртуальной Машины hello. инструмент Hello также отображает hello места на диске для отдельных дисков hello в hello виртуальной Машины.

**Ядер**: hello количество ядер ЦП на hello виртуальной Машины.

**Память (МБ)**: hello объема ОЗУ hello виртуальной Машины.

**Сетевые адаптеры**: hello число сетевых адаптеров на hello виртуальной Машины.

**Загрузка типа**: это тип загрузки hello виртуальной Машины. (BIOS или EFI). Сейчас Azure Site Recovery поддерживает только тип загрузки BIOS. Все виртуальные машины hello типа загрузки EFI, перечислены в листе несовместимые виртуальных машин.

**Тип ОС**: hello — тип ОС hello виртуальной Машины. (Windows, Linux или другая ОС).


## <a name="site-recovery-limits"></a>Ограничения Site Recovery

**Целевое хранилище репликации** | **Средний размер ввода-вывода исходного диска** |**Средняя скорость обработки данных исходного диска** | **Общий размер обработанных данных на исходном диске за день**
---|---|---|---
Хранилище уровня "Стандартный" | 8 КБ | 2 Мбит/с | 168 ГБ на диск
Диск класса Premium категории P10 | 8 КБ | 2 Мбит/с | 168 ГБ на диск
Диск класса Premium категории P10 | 16 КБ | 4 Мбит/с | 336 ГБ на диск
Диск класса Premium категории P10 | 32 КБ или выше | 8 Мбит/с | 672 ГБ на диск
Диск уровня Premium категории P20 или P30 | 8 КБ  | 5 Мбит/с | 421 ГБ на диск
Диск уровня Premium категории P20 или P30 | 16 КБ или выше |10 Мбит/с | 842 ГБ на диск

В указанных средних значениях предполагается 30-процентное перекрытие операций ввода-вывода. В зависимости от коэффициента перекрытия, размера записи и фактической рабочей нагрузки ввода-вывода Site Recovery может обрабатывать более высокую пропускную способность. Hello выше числа предполагается типичные очередь приблизительно пять минут. то есть после передачи выполняется обработка данных, а созданная точка восстановления составляет 5 минут.

Эти ограничения получены на основе наших проверок, но они не охватывают все возможные сочетания операций ввода-вывода в приложении. Фактические результаты зависят от сочетания операций ввода-вывода приложения. Для получения наилучших результатов даже после планирования развертывания, рекомендуется выполнить тестирование с помощью рисунка теста отработки отказа tooget hello true производительности приложений.

## <a name="updating-hello-deployment-planner"></a>Обновление развертывания планировщик hello
Планировщик развертывания tooupdate hello, hello следующие:

1. Загрузить последнюю версию hello hello [планировщик развертывания Azure Site Recovery](https://aka.ms/asr-deployment-planner).

2. Копировать hello .zip папку tooa сервера, которые должны toorun ее на.

3. Извлеките ZIP-папке hello.

4. Выполните одно из следующих hello.
 * Если последнюю версию hello не содержит исправления профилирования, профилирование уже выполняется в текущей версии hello планировщик по-прежнему hello профилирования.
 * Если последняя версия hello содержат профилирования исправление, рекомендуется остановить профилирование на текущей версии и перезапустите профилирование hello hello новой версии.

  >[!NOTE]
  >
  >При запуске профилирования hello новой версии, передайте hello же выходной путь к каталогу, чтобы hello будут добавляться данные профилирования на hello существующие файлы. Полный набор профилируемые данные будут использовать toogenerate hello отчета. Если передать другой выходной каталог, создаются новые файлы, и старые профилирования данных не используется toogenerate hello отчета.
  >
  >Каждый новый планировщик развертывания — накопительное обновление hello ZIP-файл. Не нужно toocopy hello новейшие файлы toohello предыдущей папки. Вы можете создать и использовать папку.


## <a name="version-history"></a>Журнал версий

### <a name="131"></a>1.3.1
Обновление: 19 июля 2017 г.

Добавлена следующая новая функция:

* Добавлена поддержка дисков большого объема (>1 ТБ) при создании отчетов. Теперь можно использовать развертывание планировщик tooplan репликации для виртуальных машин, которые имеют размер диска больше 1 ТБ (не более 4095 ГБ).
Дополнительные сведения о [поддержке дисков большого размера в Azure Site Recovery](https://azure.microsoft.com/en-us/blog/azure-site-recovery-large-disks/).


### <a name="13"></a>1,3
Обновление: 9 мая 2017 г.

Добавлена следующая новая функция:

* Добавлена поддержка управляемых дисков при создании отчетов. Hello количество виртуальных машин можно поместить одно хранилище tooa учетная запись является вычисляемые, если диск под управлением на основе выбранной для отработки отказа или тестовая отработка отказа.        


### <a name="12"></a>1.2
Обновлено: 7 апреля 2017 г.

Добавлены следующие исправления:

* Добавлены загрузочные введите проверку (BIOS или EFI) для каждой виртуальной машины toodetermine Если виртуальная машина hello совместимы для защиты hello.
* Добавлены ОС введите сведения для каждой виртуальной машины в hello совместимых виртуальных машин и листы несовместимые виртуальных машин.
* Hello GetThroughput операции теперь поддерживается в регионах hello правительства США и Microsoft Azure для Китая.
* Добавлено несколько дополнительных проверок необходимых компонентов для vCenter и сервера ESXi.
* Получение формирования отчета неверные Если региональных параметров задано toonon на английском языке.


### <a name="11"></a>1,1
Обновление: 9 марта 2017 г.

Фиксированный hello следующих ситуаций:

* Средство Hello нельзя профилировать виртуальных машин, если hello vCenter имеет два или больше виртуальных машин с hello таким же именем или IP-адрес на различных узлах ESXi.
* Копирование и поиска отключена для листов hello совместимые виртуальных машин и виртуальных машин несовместимы.

### <a name="10"></a>1.0
Обновление: 23 февраля 2017 г.

Azure планировщик развертывания восстановления сайта общедоступной предварительной версии 1.0 имеет hello следующие известные проблемы (toobe в будущих обновлений).

* Анализатор Hello только для сценариев VMware для Azure, не развертываний Hyper-V для Azure. При использовании Hyper-V для Azure используйте hello [планировщика емкости Hyper-V](./site-recovery-capacity-planning-for-hyper-v-replication.md).
* Hello GetThroughput операция не поддерживается в области hello правительства США и Microsoft Azure для Китая.
* Средство Hello нельзя профилировать виртуальных машин, если сервер vCenter hello имеет два или больше виртуальных машин с hello таким же именем или IP-адрес на различных узлах ESXi. В этой версии средства hello пропускает профилирование для повторяющихся имен виртуальных Машин или IP-адресов в hello VMListFile. Hello достаточно tooprofile hello виртуальных машин с помощью узла ESXi вместо hello vCenter server. Необходимо запустить один экземпляр для каждого узла ESXi.
