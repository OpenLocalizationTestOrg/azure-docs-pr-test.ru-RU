---
title: "aaaReplicate IIS многоуровневых приложений на основе веб-приложения с помощью Azure Site Recovery | Документы Microsoft"
description: "В этой статье описывается, как tooreplicate IIS веб-фермы виртуальных машин с помощью Azure Site Recovery."
services: site-recovery
documentationcenter: 
author: nsoneji
manager: gauravd
editor: 
ms.assetid: 
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: nisoneji
ms.openlocfilehash: 1974265b3cb05f6dc57049876306d2e08424bb97
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="replicate-a-multi-tier-iis-based-web-application-using-azure-site-recovery"></a><span data-ttu-id="3e104-103">Репликация многоуровневого веб-приложения на основе IIS с помощью Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3e104-103">Replicate a multi-tier IIS based web application using Azure Site Recovery</span></span>

## <a name="overview"></a><span data-ttu-id="3e104-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="3e104-104">Overview</span></span>


<span data-ttu-id="3e104-105">Программное обеспечение — hello подсистемы производительность бизнеса в организации.</span><span class="sxs-lookup"><span data-stu-id="3e104-105">Application software is hello engine of business productivity in an organization.</span></span> <span data-ttu-id="3e104-106">Разные веб-приложения используются для различных целей.</span><span class="sxs-lookup"><span data-stu-id="3e104-106">Various web applications can serve different purposes in an organization.</span></span> <span data-ttu-id="3e104-107">Важнейшими для деятельности организации являются приложения обработки платежных ведомостей, финансовые приложения и сайты для обслуживания клиентов.</span><span class="sxs-lookup"><span data-stu-id="3e104-107">Some of these like payroll processing, financial applications and customer facing websites can be utmost critical for an organization.</span></span> <span data-ttu-id="3e104-108">Будет ли это важно для hello организации toohave их вверх и работают в постоянно tooprevent снижение производительности и более важно предотвратить повреждение toohello изображения фирменной символики организации hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-108">It will be important for hello organization toohave them up and running at all times tooprevent loss of productivity and more importantly prevent any damage toohello brand image of hello organization.</span></span>

<span data-ttu-id="3e104-109">Критическое веб-приложений, обычно настраиваются как многоуровневых приложений с hello web, базы данных и приложения на разных уровнях.</span><span class="sxs-lookup"><span data-stu-id="3e104-109">Critical web applications are typically set up as multi-tier applications with hello web, database and application on different tiers.</span></span> <span data-ttu-id="3e104-110">Помимо распределены на различных уровнях, hello приложения также могут использовать несколько серверов в каждый уровень tooload баланс hello трафик.</span><span class="sxs-lookup"><span data-stu-id="3e104-110">Apart from being spread across various tiers, hello applications may also be using multiple servers in each tier tooload balance hello traffic.</span></span> <span data-ttu-id="3e104-111">Кроме того hello сопоставления между различными уровнями и на веб-сервере hello может основываться на статические IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="3e104-111">Moreover, hello mappings between various tiers and on hello web server may be based on static IP addresses.</span></span> <span data-ttu-id="3e104-112">При отработке отказа некоторые из этих сопоставлений потребуется toobe обновлен, особенно, если имеется несколько веб-сайтов настроены на веб-сервере hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-112">On failover, some of these mappings will need toobe updated, especially, if you have multiple websites configured on hello web server.</span></span> <span data-ttu-id="3e104-113">В случае веб-приложений с помощью протокола SSL привязки сертификата потребуется обновить toobe.</span><span class="sxs-lookup"><span data-stu-id="3e104-113">In case of web applications using SSL, certificate bindings will need toobe updated.</span></span>

<span data-ttu-id="3e104-114">Включает в себя методы традиционных по репликации на основе восстановления резервное копирование из различных файлов конфигурации, параметры реестра, привязки, пользовательских компонентов (COM или .NET), содержимое и также сертификаты и восстановления файлов hello через набор действий.</span><span class="sxs-lookup"><span data-stu-id="3e104-114">Traditional non-replication based recovery methods involve backing up of various configuration files, registry settings, bindings, custom components (COM or .NET), content and also certificates and recovering hello files through a set of manual steps.</span></span> <span data-ttu-id="3e104-115">Эти методы весьма трудоемки, к тому же они могут приводить к ошибкам и не являются масштабируемыми.</span><span class="sxs-lookup"><span data-stu-id="3e104-115">These techniques are clearly cumbersome, error prone and not scalable.</span></span> <span data-ttu-id="3e104-116">Он является, например, возможность легко tooforget создает резервную копию сертификата и оставить с выбором, но не toobuy новые сертификаты для hello сервера после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3e104-116">It is, for example, easily possible for you tooforget backing up certificates and be left with no choice but toobuy new certificates for hello server after failover.</span></span>

<span data-ttu-id="3e104-117">Это решение хорошо аварийного восстановления, следует разрешить моделирования планов восстановления вокруг hello выше архитектур сложных приложений и также имеют hello возможность tooadd настроенные действия toohandle для сопоставлений между различными уровнями таким образом обеспечивая одним щелчком, что снимок решения в событии hello аварии начальные tooa снижение RTO.</span><span class="sxs-lookup"><span data-stu-id="3e104-117">A good disaster recovery solution, should allow modeling of recovery plans around hello above complex application architectures and also have hello ability tooadd customized steps toohandle application mappings between various tiers hence providing a single-click sure shot solution in hello event of a disaster leading tooa lower RTO.</span></span>


<span data-ttu-id="3e104-118">В этой статье описывается, как на основе tooprotect IIS веб-приложения с помощью [Azure Site Recovery](site-recovery-overview.md).</span><span class="sxs-lookup"><span data-stu-id="3e104-118">This article describes how tooprotect an IIS based web application using a [Azure Site Recovery](site-recovery-overview.md).</span></span> <span data-ttu-id="3e104-119">В этой статье рассматриваются рекомендации по репликации три уровня IIS на основе tooAzure приложения web, инструкции аварийного восстановления, и способы tooAzure приложения hello отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3e104-119">This article will cover best practices for replicating a three tier IIS based web application tooAzure, how you can do a disaster recovery drill, and how you can failover hello application tooAzure.</span></span>


## <a name="prerequisites"></a><span data-ttu-id="3e104-120">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="3e104-120">Prerequisites</span></span>

<span data-ttu-id="3e104-121">Прежде чем начать, убедитесь, что вы понимаете следующие hello:</span><span class="sxs-lookup"><span data-stu-id="3e104-121">Before you start, make sure you understand hello following:</span></span>

1. [<span data-ttu-id="3e104-122">Репликация tooAzure виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="3e104-122">Replicating a virtual machine tooAzure</span></span>](site-recovery-vmware-to-azure.md)
1. <span data-ttu-id="3e104-123">Как слишком[проектирования сети восстановления](site-recovery-network-design.md)</span><span class="sxs-lookup"><span data-stu-id="3e104-123">How too[design a recovery network](site-recovery-network-design.md)</span></span>
1. [<span data-ttu-id="3e104-124">Выполнив tooAzure теста отработки отказа</span><span class="sxs-lookup"><span data-stu-id="3e104-124">Doing a test failover tooAzure</span></span>](./site-recovery-test-failover-to-azure.md)
1. [<span data-ttu-id="3e104-125">Выполнив tooAzure отработки отказа</span><span class="sxs-lookup"><span data-stu-id="3e104-125">Doing a failover tooAzure</span></span>](site-recovery-failover.md)
1. <span data-ttu-id="3e104-126">Как слишком[репликации контроллера домена](site-recovery-active-directory.md)</span><span class="sxs-lookup"><span data-stu-id="3e104-126">How too[replicate a domain controller](site-recovery-active-directory.md)</span></span>
1. <span data-ttu-id="3e104-127">Как слишком[репликации SQL Server](site-recovery-sql.md)</span><span class="sxs-lookup"><span data-stu-id="3e104-127">How too[replicate SQL Server](site-recovery-sql.md)</span></span>

## <a name="deployment-patterns"></a><span data-ttu-id="3e104-128">Модели развертывания</span><span class="sxs-lookup"><span data-stu-id="3e104-128">Deployment patterns</span></span>
<span data-ttu-id="3e104-129">Веб-приложение IIS на основе обычно соответствует одному из следующих схем развертывания hello:</span><span class="sxs-lookup"><span data-stu-id="3e104-129">An IIS based web application typically follows one of hello following deployment patterns:</span></span>

<span data-ttu-id="3e104-130">**Модель развертывания 1.** Веб-ферма на основе IIS с маршрутизацией запросов приложений (ARR), сервером IIS и Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3e104-130">**Deployment pattern 1 ** An IIS based web farm  with Application Request Routing(ARR), IIS Server and Microsoft SQL Server.</span></span>

![Модель развертывания](./media/site-recovery-iis/deployment-pattern1.png)

<span data-ttu-id="3e104-132">**Модель развертывания 2.** Веб-ферма на основе IIS с маршрутизацией запросов приложений (ARR), сервером IIS, сервером приложений и Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3e104-132">**Deployment pattern 2** An IIS based web farm with Application Request Routing(ARR), IIS Server, Application Server, and Microsoft SQL Server.</span></span>


![Модель развертывания](./media/site-recovery-iis/deployment-pattern2.png)

## <a name="site-recovery-support"></a><span data-ttu-id="3e104-134">Поддержка Site Recovery</span><span class="sxs-lookup"><span data-stu-id="3e104-134">Site Recovery support</span></span>

<span data-ttu-id="3e104-135">Создание виртуальных машин VMware этой статьи с сервера IIS версии 7.5 в Windows Server 2012 R2 Enterprise с целью hello использовались.</span><span class="sxs-lookup"><span data-stu-id="3e104-135">For hello purpose of creating this article VMware virtual machines with IIS Server version 7.5 on Windows Server 2012 R2 Enterprise were used.</span></span> <span data-ttu-id="3e104-136">Как репликация восстановления сайтов не зависит от приложения, рекомендации hello приведены здесь ожидаемый toohold в следующих сценариях также и для другой версии IIS.</span><span class="sxs-lookup"><span data-stu-id="3e104-136">As site recovery replication is application agnostic, hello recommendations provided here are expected toohold on following scenarios as well and for different version of IIS.</span></span>

### <a name="source-and-target"></a><span data-ttu-id="3e104-137">Исходный и целевой объект</span><span class="sxs-lookup"><span data-stu-id="3e104-137">Source and target</span></span>

<span data-ttu-id="3e104-138">**Сценарий**</span><span class="sxs-lookup"><span data-stu-id="3e104-138">**Scenario**</span></span> | <span data-ttu-id="3e104-139">**tooa вторичного сайта**</span><span class="sxs-lookup"><span data-stu-id="3e104-139">**tooa secondary site**</span></span> | <span data-ttu-id="3e104-140">**tooAzure**</span><span class="sxs-lookup"><span data-stu-id="3e104-140">**tooAzure**</span></span>
--- | --- | ---
<span data-ttu-id="3e104-141">**Hyper-V**</span><span class="sxs-lookup"><span data-stu-id="3e104-141">**Hyper-V**</span></span> | <span data-ttu-id="3e104-142">Да</span><span class="sxs-lookup"><span data-stu-id="3e104-142">Yes</span></span> | <span data-ttu-id="3e104-143">Да</span><span class="sxs-lookup"><span data-stu-id="3e104-143">Yes</span></span>
<span data-ttu-id="3e104-144">**VMware**</span><span class="sxs-lookup"><span data-stu-id="3e104-144">**VMware**</span></span> | <span data-ttu-id="3e104-145">Да</span><span class="sxs-lookup"><span data-stu-id="3e104-145">Yes</span></span> | <span data-ttu-id="3e104-146">Да</span><span class="sxs-lookup"><span data-stu-id="3e104-146">Yes</span></span>
<span data-ttu-id="3e104-147">**Физический сервер**</span><span class="sxs-lookup"><span data-stu-id="3e104-147">**Physical server**</span></span> | <span data-ttu-id="3e104-148">Нет</span><span class="sxs-lookup"><span data-stu-id="3e104-148">No</span></span> | <span data-ttu-id="3e104-149">Да</span><span class="sxs-lookup"><span data-stu-id="3e104-149">Yes</span></span>

## <a name="replicate-virtual-machines"></a><span data-ttu-id="3e104-150">Репликация виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="3e104-150">Replicate virtual machines</span></span>

<span data-ttu-id="3e104-151">Выполните [в этом руководстве](site-recovery-vmware-to-azure.md) toostart репликации tooAzure все hello IIS web фермы виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3e104-151">Follow [this guidance](site-recovery-vmware-to-azure.md) toostart replicating all hello IIS web farm virtual machines tooAzure.</span></span>

<span data-ttu-id="3e104-152">Если используется статический IP-адрес, а затем укажите IP-адрес hello требуется hello tootake виртуальной машины в hello [ **целевой IP-адрес** ](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) в вычислительных и сетевых параметров.</span><span class="sxs-lookup"><span data-stu-id="3e104-152">If you are using a static IP then specify hello IP that you want hello virtual machine tootake in hello [**Target IP**](./site-recovery-replicate-vmware-to-azure.md#view-and-manage-vm-properties) setting in Compute and Network settings.</span></span>

![Целевой IP-адрес](./media/site-recovery-active-directory/dns-target-ip.png)


## <a name="creating-a-recovery-plan"></a><span data-ttu-id="3e104-154">Создание плана восстановления</span><span class="sxs-lookup"><span data-stu-id="3e104-154">Creating a recovery plan</span></span>

<span data-ttu-id="3e104-155">План восстановления позволяет последовательность отработки отказа hello различных уровней многоуровневого приложения, таким образом, поддерживая согласованность приложения.</span><span class="sxs-lookup"><span data-stu-id="3e104-155">A recovery plan allows sequencing hello failover of various tiers in a multi-tier application, hence, maintaining application consistency.</span></span> <span data-ttu-id="3e104-156">При создании плана восстановления многоуровневые веб-приложение, выполните hello шаги, описанные ниже.</span><span class="sxs-lookup"><span data-stu-id="3e104-156">Follow hello below steps while creating a recovery plan for a multi-tier web application.</span></span>  <span data-ttu-id="3e104-157">Дополнительные сведения см. в статье [Создание планов восстановления](./site-recovery-create-recovery-plans.md).</span><span class="sxs-lookup"><span data-stu-id="3e104-157">[Learn more about creating a recovery plan](./site-recovery-create-recovery-plans.md).</span></span>

### <a name="adding-virtual-machines-toofailover-groups"></a><span data-ttu-id="3e104-158">Добавление групп toofailover виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="3e104-158">Adding virtual machines toofailover groups</span></span>
<span data-ttu-id="3e104-159">Типичные многоуровневого веб-приложения IIS будет состоять из уровня базы данных с виртуальных машин, веб-уровень hello круглую сервером IIS и уровень приложений SQL.</span><span class="sxs-lookup"><span data-stu-id="3e104-159">A typical multi-tier IIS web application will consist of a database tier with SQL virtual machines, hello web tier constituted by a IIS server and an application tier.</span></span> <span data-ttu-id="3e104-160">Добавьте все эти виртуальные машины toodifferent группы на основании уровень ниже.</span><span class="sxs-lookup"><span data-stu-id="3e104-160">Add all these virtual machines toodifferent group based on tier as below.</span></span> <span data-ttu-id="3e104-161">Дополнительные сведения см. в разделе [Настройка плана восстановления](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span><span class="sxs-lookup"><span data-stu-id="3e104-161">[Learn more about customising recovery plan](site-recovery-runbook-automation.md#customize-the-recovery-plan).</span></span>

1. <span data-ttu-id="3e104-162">Создайте план восстановления.</span><span class="sxs-lookup"><span data-stu-id="3e104-162">Create a recovery plan.</span></span> <span data-ttu-id="3e104-163">Добавление виртуальных машин уровня hello базы данных в группу 1 tooensure их завершения работы последнего и первого активным.</span><span class="sxs-lookup"><span data-stu-id="3e104-163">Add hello database tier virtual machines under Group 1 tooensure that they are shutdown last and brought up first.</span></span>

1. <span data-ttu-id="3e104-164">Добавьте hello приложения уровня виртуальных машин в группе 2, таким образом, что они запускаются после была помещена hello уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="3e104-164">Add hello application tier virtual machines under Group 2 such that they are brought up after hello database tier has been brought up.</span></span>

1. <span data-ttu-id="3e104-165">Добавление hello web уровня виртуальных машин в группа 3 таким образом, что они запускаются после была помещена уровня приложения hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-165">Add hello web tier virtual machines in Group 3 such that they are brought up after hello application tier has been brought up.</span></span>

1. <span data-ttu-id="3e104-166">Добавьте в группу 4 виртуальных машин для балансировки нагрузки, таким образом, что они запускаются после была помещена hello веб-уровня.</span><span class="sxs-lookup"><span data-stu-id="3e104-166">Add load balance virtual machines in Group 4 such that they are brought up after hello web tier has been brought up.</span></span>


### <a name="adding-scripts-toohello-recovery-plan"></a><span data-ttu-id="3e104-167">Добавление плана восстановления toohello сценариев</span><span class="sxs-lookup"><span data-stu-id="3e104-167">Adding scripts toohello recovery plan</span></span>
<span data-ttu-id="3e104-168">Может потребоваться toodo некоторых операций на виртуальных машинах Azure post отработки отказа или тестовой отработки отказа toomake IIS веб-фермы функции hello правильно.</span><span class="sxs-lookup"><span data-stu-id="3e104-168">You may need toodo some operations on hello Azure virtual machines post failover/Test failover toomake IIS web farm function correctly.</span></span> <span data-ttu-id="3e104-169">Можно автоматизировать операцию отработки отказа hello как обновление DNS-запись, изменение привязки сайта, в строке подключения, добавив соответствующие сценарии в плане восстановления hello, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="3e104-169">You can automate hello post failover operation like updating DNS entry, changing site binding, change  in connection string  by adding corresponding scripts in hello recovery plan as below.</span></span> <span data-ttu-id="3e104-170">Дополнительные сведения см. в разделе [Добавление скриптов](./site-recovery-create-recovery-plans.md#add-scripts).</span><span class="sxs-lookup"><span data-stu-id="3e104-170">[Learn more about add script recovery plan](./site-recovery-create-recovery-plans.md#add-scripts).</span></span>

#### <a name="dns-update"></a><span data-ttu-id="3e104-171">Обновление DNS</span><span class="sxs-lookup"><span data-stu-id="3e104-171">DNS Update</span></span>
<span data-ttu-id="3e104-172">Если hello DNS настроен для динамического обновления DNS, обновите виртуальные машины обычно hello DNS с hello новый IP-адрес после их запуска.</span><span class="sxs-lookup"><span data-stu-id="3e104-172">If hello DNS is configured for dynamic DNS update then virtual machines usually update hello DNS with hello new IP once they start.</span></span> <span data-ttu-id="3e104-173">Tooadd явные шаг tooupdate DNS, с hello новый IP-адреса виртуальных машин hello затем добавить это [скрипт tooupdate IP-адрес в DNS](https://aka.ms/asr-dns-update) как действие post в группы плана восстановления.</span><span class="sxs-lookup"><span data-stu-id="3e104-173">If you want tooadd an explicit step tooupdate DNS with hello new IPs of hello virtual machines then add this [script tooupdate IP in DNS](https://aka.ms/asr-dns-update) as a post action on recovery plan groups.</span></span>  

#### <a name="connection-string-in-an-applications-webconfig"></a><span data-ttu-id="3e104-174">Строка подключения в файле web.config приложения</span><span class="sxs-lookup"><span data-stu-id="3e104-174">Connection string in an application’s web.config</span></span>
<span data-ttu-id="3e104-175">Строка подключения Hello указывает hello базы данных, веб-сайт hello обменивается данными с.</span><span class="sxs-lookup"><span data-stu-id="3e104-175">hello connection string specifies hello database that hello web site communicates with.</span></span>

<span data-ttu-id="3e104-176">Если строка подключения hello содержит имя hello hello базы данных виртуальной машины, никакие дополнительные действия будут необходимые после отработки отказа и hello приложение сможет получить доступ tooautomatically взаимодействовать toohello DB.</span><span class="sxs-lookup"><span data-stu-id="3e104-176">If hello connection string carries hello name of hello database virtual machine, no further steps will be needed post failover and hello application will be able tooautomatically communicate toohello DB.</span></span> <span data-ttu-id="3e104-177">Кроме того, если сохраняется hello IP-адрес для виртуальной машины hello базы данных, он не будет необходимости строка подключения tooupdate hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-177">Also, if hello IP address for hello database virtual machine is retained, it will not be needed tooupdate hello connection string.</span></span> <span data-ttu-id="3e104-178">Если строка подключения hello ссылается toohello базы данных виртуальной машины с помощью IP-адрес, его потребуется toobe обновлен после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3e104-178">If hello connection string refers toohello database virtual machine using an IP address, it will need toobe updated post failover.</span></span> <span data-ttu-id="3e104-179">Например: </span><span class="sxs-lookup"><span data-stu-id="3e104-179">E.g.</span></span> <span data-ttu-id="3e104-180">Hello ниже строка подключения указывает toohello DB с IP-адресом 127.0.1.2</span><span class="sxs-lookup"><span data-stu-id="3e104-180">hello below connection string points toohello DB with IP 127.0.1.2</span></span>

        <?xml version="1.0" encoding="utf-8"?>
        <configuration>
        <connectionStrings>
        <add name="ConnStringDb1" connectionString="Data Source= 127.0.1.2\SqlExpress; Initial Catalog=TestDB1;Integrated Security=False;" />
        </connectionStrings>
        </configuration>

<span data-ttu-id="3e104-181">Можно обновить hello строку подключения в веб-уровень, добавив [скрипт обновления подключения IIS](https://aka.ms/asr-update-webtier-script-classic) после 3 группы в плане восстановления hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-181">You can update hello connection string in web tier by adding [IIS connection update script](https://aka.ms/asr-update-webtier-script-classic) after Group 3 in hello recovery plan.</span></span>

#### <a name="site-bindings-for-hello-application"></a><span data-ttu-id="3e104-182">Привязки узла для приложения hello</span><span class="sxs-lookup"><span data-stu-id="3e104-182">Site bindings for hello application</span></span>
<span data-ttu-id="3e104-183">Каждый сайт состоит из привязки сведения, включающие hello тип привязки, hello IP-адрес, по которой hello сервера IIS ожидает передачи данных toohello запросов для сайта hello, номер порта hello и приветствия имен узлов для сайта hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-183">Every site consists of binding information that includes hello type of binding, hello IP address at which hello IIS server listens toohello requests for hello site, hello port number and hello host names for hello site.</span></span> <span data-ttu-id="3e104-184">Во время перехода на другой ресурс hello эти привязки может потребоваться toobe обновляются при изменении в hello IP-адреса, связанного с ними.</span><span class="sxs-lookup"><span data-stu-id="3e104-184">At hello time of a failover, these bindings might need toobe updated if there is a change in hello IP address associated with them.</span></span>

> [!NOTE]
>
> <span data-ttu-id="3e104-185">Если помеченные «все неназначенные» для привязки сайта hello, как показано в приведенном ниже примере hello, не потребуется tooupdate этой привязки после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3e104-185">If you have marked ‘all unassigned’ for hello site binding as in hello example below, you will not need tooupdate this binding post failover.</span></span> <span data-ttu-id="3e104-186">Кроме того, если hello IP-адреса, связанного с узлом не меняется после отработки отказа, hello привязки сайта требуется не будут обновлены (хранения hello IP-адреса зависит от архитектуры сети hello и подсети назначены toohello основной и восстановления сайтов и таким образом может или не может быть возможно в вашей организации.)</span><span class="sxs-lookup"><span data-stu-id="3e104-186">Also, if hello IP address associated with a site is not changed post failover, hello site binding need not be updated (Retention of hello IP address depends on hello network architecture and subnets assigned toohello primary and recovery sites and hence may or may not be feasible for your organization.)</span></span>

![Привязка SSL](./media/site-recovery-iis/sslbinding.png)

<span data-ttu-id="3e104-188">Если IP-адрес hello связаны с сайтом, необходимо будет tooupdate все привязки сайта hello новый IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="3e104-188">If you have associated hello IP address with a site, you will need tooupdate all site bindings with hello new IP address.</span></span> <span data-ttu-id="3e104-189">Можно добавить [скрипт обновления уровня IIS Web](https://aka.ms/asr-web-tier-update-runbook-classic) после группа 3 в привязки сайта hello toochange плана восстановления.</span><span class="sxs-lookup"><span data-stu-id="3e104-189">You can add [IIS Web tier update script](https://aka.ms/asr-web-tier-update-runbook-classic) after Group 3 in recovery plan toochange hello site bindings.</span></span>


#### <a name="update-load-balancer-ip-address"></a><span data-ttu-id="3e104-190">Обновление IP-адреса балансировщика нагрузки</span><span class="sxs-lookup"><span data-stu-id="3e104-190">Update load balancer IP address</span></span>
<span data-ttu-id="3e104-191">При наличии маршрутизации запросов приложений виртуальной машины, добавьте [сценария отработки отказа IIS ARR](https://aka.ms/asr-iis-arrtier-failover-script-classic) после группу 4 tooupdate hello IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="3e104-191">If you have  Application Request Routing virtual machine, add [IIS ARR  failover script](https://aka.ms/asr-iis-arrtier-failover-script-classic) after Group 4 tooupdate hello IP address.</span></span>

#### <a name="hello-ssl-cert-binding-for-an-https-connection"></a><span data-ttu-id="3e104-192">Hello привязки сертификата SSL для https-соединения</span><span class="sxs-lookup"><span data-stu-id="3e104-192">hello SSL cert binding for an https connection</span></span>
<span data-ttu-id="3e104-193">Веб-сайтов может иметь связанный SSL-сертификат, помогающая для обеспечения безопасного взаимодействия между веб-сервере hello и браузер пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="3e104-193">Websites can have an associated SSL certificate that helps in ensuring a secure communication between hello webserver and hello user’s browser.</span></span> <span data-ttu-id="3e104-194">Если веб-сайта hello https-соединения и связанные https сайта привязки toohello IP-адрес hello сервера IIS с помощью привязки сертификата SSL, новую привязку сайта потребуется toobe добавлена cert hello hello, IP-адреса виртуальной машины hello IIS учет перехода на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="3e104-194">If hello website has an https connection and an associated https site binding toohello IP address of hello IIS server with an SSL cert binding, a new site binding will need toobe added for hello cert with hello IP of hello IIS virtual machine post failover.</span></span>

<span data-ttu-id="3e104-195">Hello SSL-сертификат может быть выдан для-</span><span class="sxs-lookup"><span data-stu-id="3e104-195">hello SSL cert can be issued against-</span></span>

<span data-ttu-id="3e104-196">) полное доменное имя hello hello веб-сайта</span><span class="sxs-lookup"><span data-stu-id="3e104-196">a) hello fully qualified domain name of hello website</span></span><br>
<span data-ttu-id="3e104-197">b) имя сервера, hello hello</span><span class="sxs-lookup"><span data-stu-id="3e104-197">b) hello name of hello server</span></span><br>
<span data-ttu-id="3e104-198">c) сертификатом с подстановочными символами для hello доменного имени</span><span class="sxs-lookup"><span data-stu-id="3e104-198">c) A wildcard certificate for hello domain name</span></span><br>
<span data-ttu-id="3e104-199">d) IP-адрес — Если выполняется hello IP-адрес сервера IIS hello hello SSL-сертификат, другой toobe требованиям сертификата SSL выдан для hello hello IP-адрес сервера IIS на hello Azure site и дополнительные привязки SSL для этого сертификата потребуется создать toobe.</span><span class="sxs-lookup"><span data-stu-id="3e104-199">d) An IP address – If hello SSL cert is issued against hello IP of hello IIS server, another SSL cert needs toobe issued against hello IP address of hello IIS server on hello Azure site and an additional SSL binding for this certificate will need toobe created.</span></span> <span data-ttu-id="3e104-200">Таким образом он является использование рекомендуется toonot выдан сертификат SSL для IP.</span><span class="sxs-lookup"><span data-stu-id="3e104-200">Hence, it is advisable toonot use an SSL cert issued against IP.</span></span> <span data-ttu-id="3e104-201">Этот вариант используется не часто, а вскоре он будет объявлен устаревшим в соответствии с изменениями CA/Browser Forum.</span><span class="sxs-lookup"><span data-stu-id="3e104-201">This is a less widely used option and will soon be deprecated as per new CA/browser forum changes.</span></span>

#### <a name="update-hello-dependency-between-hello-web-and-hello-application-tier"></a><span data-ttu-id="3e104-202">Обновление hello зависимость между веб-hello и уровня приложения hello</span><span class="sxs-lookup"><span data-stu-id="3e104-202">Update hello dependency between hello web and hello application tier</span></span>
<span data-ttu-id="3e104-203">При наличии определенных зависимость приложения по IP-адресу hello hello виртуальных машин, tooupdate необходимо это зависимостей после отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3e104-203">If you have an application specific dependency based on hello IP address of hello virtual machines, you need tooupdate this dependency post failover.</span></span>

## <a name="doing-a-test-failover"></a><span data-ttu-id="3e104-204">Тестовая отработка отказа</span><span class="sxs-lookup"><span data-stu-id="3e104-204">Doing a test failover</span></span>
<span data-ttu-id="3e104-205">Выполните [в этом руководстве](site-recovery-test-failover-to-azure.md) toodo тестовой отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="3e104-205">Follow [this guidance](site-recovery-test-failover-to-azure.md) toodo a test failover.</span></span>

1.  <span data-ttu-id="3e104-206">Портал tooAzure перейти и выбрать хранилище службы восстановления.</span><span class="sxs-lookup"><span data-stu-id="3e104-206">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="3e104-207">Щелкните hello плана восстановления, созданные для веб-ферму IIS.</span><span class="sxs-lookup"><span data-stu-id="3e104-207">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="3e104-208">Щелкните "Тестовая отработка отказа".</span><span class="sxs-lookup"><span data-stu-id="3e104-208">Click on 'Test Failover'.</span></span>
1.  <span data-ttu-id="3e104-209">Выберите точку восстановления и процесс перехода на другой ресурс тестирования hello toostart виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="3e104-209">Select recovery point and Azure virtual network toostart hello test failover process.</span></span>
1.  <span data-ttu-id="3e104-210">После hello получателей среде можно выполнять вашей проверки.</span><span class="sxs-lookup"><span data-stu-id="3e104-210">Once hello secondary environment is up, you can perform your validations.</span></span>
1.  <span data-ttu-id="3e104-211">После завершения проверки hello, «Выполнить проверку» можно выбрать и hello тестовой среды отработки отказа будет очищен.</span><span class="sxs-lookup"><span data-stu-id="3e104-211">Once hello validations are complete, you can select ‘Validations complete’ and hello test failover environment will be cleaned.</span></span>

## <a name="doing-a-failover"></a><span data-ttu-id="3e104-212">Отработка отказа</span><span class="sxs-lookup"><span data-stu-id="3e104-212">Doing a failover</span></span>
<span data-ttu-id="3e104-213">При выполнении отработки отказа используйте [это руководство](site-recovery-failover.md).</span><span class="sxs-lookup"><span data-stu-id="3e104-213">Follow [this guidance](site-recovery-failover.md) when you are doing a failover.</span></span>

1.  <span data-ttu-id="3e104-214">Портал tooAzure перейти и выбрать хранилище службы восстановления.</span><span class="sxs-lookup"><span data-stu-id="3e104-214">Go tooAzure portal and select your Recovery Service vault.</span></span>
1.  <span data-ttu-id="3e104-215">Щелкните hello плана восстановления, созданные для веб-ферму IIS.</span><span class="sxs-lookup"><span data-stu-id="3e104-215">Click on hello recovery plan created for IIS web farm.</span></span>
1.  <span data-ttu-id="3e104-216">Щелкните "Отработка отказа".</span><span class="sxs-lookup"><span data-stu-id="3e104-216">Click on 'Failover'.</span></span>
1.  <span data-ttu-id="3e104-217">Выберите процесс отработки отказа hello toostart точки восстановления.</span><span class="sxs-lookup"><span data-stu-id="3e104-217">Select recovery point toostart hello failover process.</span></span>

## <a name="next-steps"></a><span data-ttu-id="3e104-218">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="3e104-218">Next steps</span></span>
<span data-ttu-id="3e104-219">Вы можете узнать дополнительные сведения о [репликации других приложений](site-recovery-workload.md) с помощью Site Recovery.</span><span class="sxs-lookup"><span data-stu-id="3e104-219">You can learn more about [replicate other applications](site-recovery-workload.md) using Site Recovery.</span></span>
