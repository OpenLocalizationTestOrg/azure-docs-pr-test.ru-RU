---
title: "Управление оповещениями в продуктах мониторинга Майкрософт | Документация Майкрософт"
description: "Оповещение указывает на некоторые проблемы, которые требуют внимания администратора.  В этой статье описываются различия в создании оповещений и управлении ими в System Center Operations Manager (SCOM) и службе Log Analytics, а также приводятся рекомендации по использованию обоих продуктов для реализации гибридной стратегии управления оповещениями."
services: operations-management-suite
documentationcenter: 
author: bwren
manager: jwhit
editor: tysonn
ms.assetid: 6572c3f8-78ca-4fa9-8fe1-d0b488590788
ms.service: operations-management-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/11/2017
ms.author: bwren
ms.openlocfilehash: 7df2fd7ef838465a60e3b0ce2f889127b7487684
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="managing-alerts-with-microsoft-monitoring"></a>Управление оповещениями с помощью решений Майкрософт для мониторинга
Оповещение указывает на некоторые проблемы, которые требуют внимания администратора.  Между System Center Operations Manager (SCOM) и службой Log Analytics в составе Operations Management Suite (OMS) существуют четкие различия с точки зрения создания оповещений, управления и анализа, а также уведомления пользователей об обнаружении критических ошибок.

## <a name="alerts-in-operations-manager"></a>Оповещения в Operations Manager
Оповещения в SCOM создаются отдельными правилами или мониторами для обозначения конкретной проблемы.  Монитор может создавать оповещение, когда переходит в состояние ошибки, тогда как правило может создавать оповещение для обозначения некоторой критической ошибки, которая не относится непосредственно к работоспособности управляемого объекта.  Пакеты управления включают различные рабочие процессы, которые создают оповещения для приложений или служб, которыми они управляют.  При настройке нового пакета управления необходимо уделить внимание настройке оповещений, чтобы избежать получения чрезмерного числа оповещений о проблемах, которые вы не считаете критическими.

![Представление оповещений SCOM](media/operations-management-suite-monitoring-alerts/scom-alert-view.png)

SCOM предоставляет полный набор функций управления оповещениями: оповещениям назначается состояние, которое администраторы могут изменять в ходе работы над устранением проблемы.  Устранив проблему, администратор закрывает оповещение, после чего оно перестает отображаться в представлениях для вывода активных оповещений.  Оповещения, созданные на основе мониторов, могут разрешаться автоматически при возвращении монитора в работоспособное состояние.

![Состояние оповещения](media/operations-management-suite-monitoring-alerts/scom-alert-status.png)

## <a name="alerts-in-log-analytics"></a>Оповещения в Log Analytics
Оповещения в Log Analytics создаются на основе запроса журнала, который автоматически выполняется через определенные интервалы.  Правило оповещения можно создать на основе любого запроса журнала.  Если запрос возвращает результаты, которые соответствуют заданным условиям, создается оповещение.  Это может быть специальный запрос, который создает оповещение при обнаружении определенного события, однако также можно использовать более общий запрос, осуществляющий поиск любых событий ошибок, относящихся к конкретному приложению.

Оповещения Log Analytics записываются в репозиторий OMS как события, их можно получить с помощью запроса журнала.  Им не назначается состояние (как событиям SCOM), поэтому вы не можете указать, что проблема была устранена.

![Оповещение OMS](media/operations-management-suite-monitoring-alerts/oms-alert.png)

Если SCOM используется в качестве источника данных для Log Analytics, оповещения SCOM записываются в репозиторий OMS по мере их создания и изменения.  

![Оповещение SCOM](media/operations-management-suite-monitoring-alerts/scom-alert.png)

[Решение для управления оповещениями](http://technet.microsoft.com/library/mt484092.aspx) предоставляет сводку активных оповещений и несколько типичных запросов для получения разных наборов оповещений.  Это обеспечивает более эффективный анализ оповещений, чем отчет в SCOM.  Из сводки можно выполнить детализацию и создать специальные запросы для получения разных наборов оповещений.

![Решение для управления оповещениями](media/operations-management-suite-monitoring-alerts/alert-management.png)

## <a name="notifications"></a>Уведомления
Уведомления в SCOM отправляются по электронной почте или в виде текста в ответ на оповещения, которые соответствуют определенным условиям.  Можно создать различные подписки на уведомления: разные пользователи будут получать уведомления в зависимости от таких условий, как отслеживаемый объект, серьезность оповещения, тип обнаруженной проблемы или время суток.

Несколько подписок можно использовать для реализации полной стратегии уведомлений для большого количества пакетов управления.

![Оповещения SCOM](media/operations-management-suite-monitoring-alerts/alerts-overview-scom.png)

Служба Log Analytics отправляет по почте уведомление о создании оповещения путем настройки действия уведомления по электронной почте для каждого [правила оповещений](http://technet.microsoft.com/library/mt614775.aspx).  В отличие от SCOM служба не предоставляет возможность подписки на несколько оповещений с помощью одного правила.  Вам также потребуется создать собственные правила оповещений, так как OMS не предоставляет стандартные правила.

![Оповещения Log Analytics](media/operations-management-suite-monitoring-alerts/alerts-overview-oms.png)

Оповещениями SCOM нельзя полностью управлять с помощью Log Analytics, так как изменять их можно только в консоли управления.  Службу Log Analytics можно использовать в составе процесса управления оповещениями, так как она предоставляет инструменты анализа, которых нет в SCOM.

## <a name="alert-remediation"></a>Исправление оповещений
[Исправление](http://technet.microsoft.com/library/mt614775.aspx) представляет собой попытку автоматически устранить проблему, указанную оповещением.

SCOM позволяет выполнять диагностику и восстановление в ответ на переход монитора в неработоспособное состояние.  Это выполняется одновременно с созданием оповещения монитором.  Диагностика и восстановление, как правило, реализуются в виде сценария, который выполняется на агенте.  Служба диагностики пытается собрать дополнительные сведения об обнаруженной проблеме, тогда как служба восстановления пытается устранить проблему.

Служба Log Analytics позволяет запустить [модуль Runbook службы автоматизации Azure](https://azure.microsoft.com/documentation/services/automation/) или вызвать webhook в ответ на оповещение Log Analytics.  Модули Runbook могут содержать сложную логику, реализованную в PowerShell.  Сценарий выполняется в Azure и может получать доступ к ресурсам Azure или внешним ресурсам, доступным из облака.  Служба автоматизации Azure может выполнять модули Runbook на сервере в локальном центре обработки данных, однако эта функция пока недоступна при запуске модуля Runbook в ответ на оповещения Log Analytics.

Служба восстановления в SCOM и модули Runbook в OMS могут включать сценарии PowerShell, однако создание функций восстановления и управление ими сложнее, так как они должны содержаться в пакете управления.  Модули Runbook хранятся в службе автоматизации Azure, которая предоставляет возможности разработки, тестирования и управления модулями Runbook.

При использовании SCOM как источника данных для Log Analytics можно создавать оповещения Log Analytics с помощью запроса журнала для получения оповещений SCOM, хранящихся в репозитории OMS.  Это позволяет запускать модули Runbook службы автоматизации Azure в ответ на оповещения SCOM.  Очевидно, что, так как модули Runbook будут запускаться в среде Azure, эта стратегия не подходит для восстановления, связанного с локальными проблемами.

## <a name="next-steps"></a>Дальнейшие действия
* Ознакомьтесь с подробными сведениями об [оповещениях в System Center Operations Manager (SCOM)](https://technet.microsoft.com/library/hh212913.aspx).

