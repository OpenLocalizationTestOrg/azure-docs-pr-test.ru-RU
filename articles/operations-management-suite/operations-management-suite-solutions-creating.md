---
title: "Создание решения по управлению в OMS | Документация Майкрософт"
description: "Решения для управления расширяют функции консоли Operations Management Suite (OMS), предоставляя упакованные сценарии управления, которые клиенты могут добавить в свое рабочее пространство OMS.  В этой статье описано, как создавать решения для управления, которые можно использовать в своей среде или предоставлять другим пользователям."
services: operations-management-suite
documentationcenter: 
author: bwren
manager: carmonm
editor: tysonn
ms.assetid: 1915e204-ba7e-431b-9718-9eb6b4213ad8
ms.service: operations-management-suite
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/20/2017
ms.author: bwren
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 6ea959f1e95ea46c07eec3afa9d46bfeb72ca3e4
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="design-and-build-a-management-solution-in-operations-management-suite-oms-preview"></a><span data-ttu-id="739e5-104">Проектирование и создание решения по управлению в Operations Management Suite (OMS) (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="739e5-104">Design and build a management solution in Operations Management Suite (OMS) (Preview)</span></span>
> [!NOTE]
> <span data-ttu-id="739e5-105">Это предварительная документация для создания решений для управления в консоли OMS, которая доступна в данный момент в режиме предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="739e5-105">This is preliminary documentation for creating management solutions in OMS which are currently in preview.</span></span> <span data-ttu-id="739e5-106">Любые схемы, приведенные ниже, могут измениться.</span><span class="sxs-lookup"><span data-stu-id="739e5-106">Any schema described below is subject to change.</span></span>

<span data-ttu-id="739e5-107">[Решения по управлению](operations-management-suite-solutions.md) расширяют функции консоли Operations Management Suite (OMS), предоставляя упакованные сценарии управления, которые клиенты могут добавлять в свое рабочее пространство OMS.</span><span class="sxs-lookup"><span data-stu-id="739e5-107">[Management solutions](operations-management-suite-solutions.md) extend the functionality of Operations Management Suite (OMS) by providing packaged management scenarios that customers can add to their OMS workspace.</span></span>  <span data-ttu-id="739e5-108">В этой статье описывается базовый процесс проектирования и создания решений по управлению, который подходит для большинства сценариев.</span><span class="sxs-lookup"><span data-stu-id="739e5-108">This article presents a basic process to design and build a management solution that is suitable for most common requirements.</span></span>  <span data-ttu-id="739e5-109">Если вы не знаете, как создавать решения по управлению, вы можете использовать эти сведения в качестве отправной точки, применяя основные понятия для работы с более сложными решениями по мере изменения своих потребностей.</span><span class="sxs-lookup"><span data-stu-id="739e5-109">If you are new to building management solutions then you can use this process as a starting point and then leverage the concepts for more complex solutions as your requirements evolve.</span></span>

## <a name="what-is-a-management-solution"></a><span data-ttu-id="739e5-110">Что такое решение по управлению?</span><span class="sxs-lookup"><span data-stu-id="739e5-110">What is a management solution?</span></span>

<span data-ttu-id="739e5-111">Решения по управлению содержат ресурсы OMS и Azure, которые используются для выполнения задач в рамках определенных сценариев мониторинга.</span><span class="sxs-lookup"><span data-stu-id="739e5-111">Management solutions contain OMS and Azure resources that work together to achieve a particular monitoring scenario.</span></span>  <span data-ttu-id="739e5-112">Они реализуются как [шаблоны управления ресурсами](../azure-resource-manager/resource-manager-template-walkthrough.md), которые содержат сведения об установке и настройке содержащихся в них ресурсов после установки решения.</span><span class="sxs-lookup"><span data-stu-id="739e5-112">They are implemented as [Resource Management templates](../azure-resource-manager/resource-manager-template-walkthrough.md) that contain details of how to install and configure their contained resources when the solution is installed.</span></span>

<span data-ttu-id="739e5-113">Основная стратегия заключается в том, что решение по управлению запускается при создании отдельных компонентов в среде Azure.</span><span class="sxs-lookup"><span data-stu-id="739e5-113">The basic strategy is to start your management solution by building the individual components in your Azure environment.</span></span>  <span data-ttu-id="739e5-114">Если все компоненты работают правильно, вы можете упаковать их в [файл решения по управлению](operations-management-suite-solutions-solution-file.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-114">Once you have the functionality working properly, then you can start packaging them into a [management solution file](operations-management-suite-solutions-solution-file.md).</span></span> 


## <a name="design-your-solution"></a><span data-ttu-id="739e5-115">Разработка решения</span><span class="sxs-lookup"><span data-stu-id="739e5-115">Design your solution</span></span>
<span data-ttu-id="739e5-116">Самый распространенный шаблон для решения по управлению показан на следующей схеме.</span><span class="sxs-lookup"><span data-stu-id="739e5-116">The most common pattern for a management solution is shown in the following diagram.</span></span>  <span data-ttu-id="739e5-117">Разные компоненты этого шаблона описываются ниже.</span><span class="sxs-lookup"><span data-stu-id="739e5-117">The different components in this pattern are discussed in the below.</span></span>

![Обзор решения OMS](media/operations-management-suite-solutions/solution-overview.png)


### <a name="data-sources"></a><span data-ttu-id="739e5-119">Источники данных</span><span class="sxs-lookup"><span data-stu-id="739e5-119">Data sources</span></span>
<span data-ttu-id="739e5-120">Первый шаг в разработке решения — это определение нужных данных из репозитория Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="739e5-120">The first step in designing a solution is determining the data that you require from the Log Analytics repository.</span></span>  <span data-ttu-id="739e5-121">Эти данные собираться в [источнике данных](../log-analytics/log-analytics-data-sources.md) или [другом решении](operations-management-suite-solutions.md). Возможно, вам понадобится настроить процесс их сбора.</span><span class="sxs-lookup"><span data-stu-id="739e5-121">This data may be collected by a [data source](../log-analytics/log-analytics-data-sources.md) or [another solution](operations-management-suite-solutions.md), or your solution may need to provide the process to collect it.</span></span>

<span data-ttu-id="739e5-122">В репозитории Log Analytics данные могут собираться из разных источников, как описано в статье [Источники данных в Log Analytics](../log-analytics/log-analytics-data-sources.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-122">There are a number of ways data sources that can be collected in the Log Analytics repository as described in [Data sources in Log Analytics](../log-analytics/log-analytics-data-sources.md).</span></span>  <span data-ttu-id="739e5-123">Сюда входят события в журнале событий Windows или события, созданные Syslog, а также счетчики производительности для клиентов Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="739e5-123">This includes events in the Windows Event Log or generated by Syslog in addition to performance counters for both Windows and Linux clients.</span></span>  <span data-ttu-id="739e5-124">Вы также можете собирать данные из ресурсов Azure, полученных службой Azure Monitor.</span><span class="sxs-lookup"><span data-stu-id="739e5-124">You can also gather data from Azure resources collected by Azure Monitor.</span></span>  

<span data-ttu-id="739e5-125">Если вам нужны данные, которых нет ни в одном из доступных источников данных, используйте [API сборщика данных HTTP](../log-analytics/log-analytics-data-collector-api.md). Так вы сможете записывать данные в репозиторий Log Analytics из любого клиента, который может вызывать REST API.</span><span class="sxs-lookup"><span data-stu-id="739e5-125">If you require data that's not accessible through any of the available data sources, then you can use the [HTTP Data Collector API](../log-analytics/log-analytics-data-collector-api.md) which allows you to write data to the Log Analytics repository from any client that can call a REST API.</span></span>  <span data-ttu-id="739e5-126">Самый простой способ собирать пользовательские данные в решении по управлению — создать [модуль runbook в службе автоматизации Azure](../automation/automation-runbook-types.md). Этот модуль собирает необходимые данные из Azure или внешних ресурсов и записывает их в репозиторий с помощью API сборщика данных.</span><span class="sxs-lookup"><span data-stu-id="739e5-126">The most common means of custom data collection in a management solution is to create a [runbook in Azure Automation](../automation/automation-runbook-types.md) that collects the required data from Azure or external resources and uses the Data Collector API to write to the repository.</span></span>  

### <a name="log-searches"></a><span data-ttu-id="739e5-127">Поиск по журналам</span><span class="sxs-lookup"><span data-stu-id="739e5-127">Log searches</span></span>
<span data-ttu-id="739e5-128">[Поиск по журналам](../log-analytics/log-analytics-log-searches.md) используется для извлечения и анализа данных в репозитории Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="739e5-128">[Log searches](../log-analytics/log-analytics-log-searches.md) are used to extract and analyze data in the Log Analytics repository.</span></span>  <span data-ttu-id="739e5-129">Поиск по журналам используется представлениями и оповещениями. Кроме того, это средство позволяет пользователям выполнять специальный анализ данных в репозитории.</span><span class="sxs-lookup"><span data-stu-id="739e5-129">They are used by views and alerts in addition to allowing the user to perform ad hoc analysis of data in the repository.</span></span>  

<span data-ttu-id="739e5-130">Определите любые запросы, которые, по вашему мнению, пригодятся пользователю, даже если эти запросы не используются представлениями или оповещениями.</span><span class="sxs-lookup"><span data-stu-id="739e5-130">You should define any queries that you think will be helpful to the user even if they aren't used by any views or alerts.</span></span>  <span data-ttu-id="739e5-131">Запросы будут доступны пользователю как сохраненные условия поиска на портале. Их также можно включить в [часть визуализации списка запросов](../log-analytics/log-analytics-view-designer-parts.md#list-of-queries-part) в вашем представлении.</span><span class="sxs-lookup"><span data-stu-id="739e5-131">These will be available to them as Saved Searches in the portal, and you can also include them in a [List of Queries visualization part](../log-analytics/log-analytics-view-designer-parts.md#list-of-queries-part) in your custom view.</span></span>

### <a name="alerts"></a><span data-ttu-id="739e5-132">Оповещения</span><span class="sxs-lookup"><span data-stu-id="739e5-132">Alerts</span></span>
<span data-ttu-id="739e5-133">Для [оповещений в Log Analytics](../log-analytics/log-analytics-alerts.md) ошибки определяются с помощью [поиска по журналам](#log-searches) в данных репозитория.</span><span class="sxs-lookup"><span data-stu-id="739e5-133">[Alerts in Log Analytics](../log-analytics/log-analytics-alerts.md) identify issues through [log searches](#log-searches) against the data in the repository.</span></span>  <span data-ttu-id="739e5-134">В итоге либо пользователь получает уведомление об ошибке, либо эти ошибки обрабатываются автоматически.</span><span class="sxs-lookup"><span data-stu-id="739e5-134">They either notify the user or automatically run an action in response.</span></span> <span data-ttu-id="739e5-135">Вы должны определить разные условия оповещений для приложения и включить соответствующие правила оповещений в файл решения.</span><span class="sxs-lookup"><span data-stu-id="739e5-135">You should identify different alert conditions for your application and include corresponding alert rules in your solution file.</span></span>

<span data-ttu-id="739e5-136">Если проблема устранима с помощью автоматизированного процесса, создайте модуль runbook в службе автоматизации Azure. Ошибка будет исправлена автоматически.</span><span class="sxs-lookup"><span data-stu-id="739e5-136">If the issue can potentially be corrected with an automated process, then you'll typically create a runbook in Azure Automation to perform this remediation.</span></span>  <span data-ttu-id="739e5-137">Большинством служб Azure можно управлять с помощью [командлетов](/powershell/azure/overview), используемых модулем runbook.</span><span class="sxs-lookup"><span data-stu-id="739e5-137">Most Azure services can be managed with [cmdlets](/powershell/azure/overview) which the runbook would leverage to perform such functionality.</span></span>

<span data-ttu-id="739e5-138">Если решению требуются внешние функции для обработки оповещения, вы можете использовать [ответ webhook](../log-analytics/log-analytics-alerts-actions.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-138">If your solution requires external functionality in response to an alert, then you can use a [webhook response](../log-analytics/log-analytics-alerts-actions.md).</span></span>  <span data-ttu-id="739e5-139">Этот ответ позволяет вызывать внешнюю веб-службу, отправляя информацию из оповещения.</span><span class="sxs-lookup"><span data-stu-id="739e5-139">This allows you to call an external web service sending information from the alert.</span></span>

### <a name="views"></a><span data-ttu-id="739e5-140">Views</span><span class="sxs-lookup"><span data-stu-id="739e5-140">Views</span></span>
<span data-ttu-id="739e5-141">Представления в Log Analytics используются для визуализации данных из репозитория Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="739e5-141">Views in Log Analytics are used to visualize data from the Log Analytics repository.</span></span>  <span data-ttu-id="739e5-142">Каждое решение обычно содержит одно представление с [плиткой](../log-analytics/log-analytics-view-designer-tiles.md), которая отображается на основной панели мониторинга пользователя.</span><span class="sxs-lookup"><span data-stu-id="739e5-142">Each solution will typically contain a single view with a [tile](../log-analytics/log-analytics-view-designer-tiles.md) that is displayed on the user's main dashboard.</span></span>  <span data-ttu-id="739e5-143">Представление может содержать сколько угодно [частей визуализации](../log-analytics/log-analytics-view-designer-parts.md), чтобы пользователь мог просматривать разные визуализации собранных данных.</span><span class="sxs-lookup"><span data-stu-id="739e5-143">The view can contain any number of [visualization parts](../log-analytics/log-analytics-view-designer-parts.md) to provide different visualizations of the collected data to the user.</span></span>

<span data-ttu-id="739e5-144">[Создавайте пользовательские представления с помощью конструктора представлений](../log-analytics/log-analytics-view-designer.md), которые вы сможете потом экспортировать в файл решения.</span><span class="sxs-lookup"><span data-stu-id="739e5-144">You [create custom views using the View Designer](../log-analytics/log-analytics-view-designer.md) which you can later export for inclusion in your solution file.</span></span>  


## <a name="create-solution-file"></a><span data-ttu-id="739e5-145">Создание файла решения</span><span class="sxs-lookup"><span data-stu-id="739e5-145">Create solution file</span></span>
<span data-ttu-id="739e5-146">После настройки и тестирования компонентов, которые будут входить в решение, можно [создавать файл решения](operations-management-suite-solutions-solution-file.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-146">Once you've configured and tested the components that will be part of your solution, you can [create your solution file](operations-management-suite-solutions-solution-file.md).</span></span>  <span data-ttu-id="739e5-147">Реализуйте компоненты решения в [шаблоне Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md), который включает [ресурс решения](operations-management-suite-solutions-solution-file.md#solution-resource) и связи с другими ресурсами в файле.</span><span class="sxs-lookup"><span data-stu-id="739e5-147">You will implement the solution components in a [Resource Manager template](../azure-resource-manager/resource-group-authoring-templates.md) that includes a [solution resource](operations-management-suite-solutions-solution-file.md#solution-resource) with relationships to the other resources in the file.</span></span>  


## <a name="test-your-solution"></a><span data-ttu-id="739e5-148">Тестирование решения</span><span class="sxs-lookup"><span data-stu-id="739e5-148">Test your solution</span></span>
<span data-ttu-id="739e5-149">В ходе разработки решения вам нужно установить его и протестировать в рабочей области.</span><span class="sxs-lookup"><span data-stu-id="739e5-149">While you are developing your solution, you will need to install and test it in your workspace.</span></span>  <span data-ttu-id="739e5-150">Это можно сделать с помощью любого из методов [тестирования и установки шаблонов Resource Managerв](../azure-resource-manager/resource-group-template-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-150">You can do this using any of the available methods to [test and install Resource Manager templates](../azure-resource-manager/resource-group-template-deploy.md).</span></span>

## <a name="publish-your-solution"></a><span data-ttu-id="739e5-151">Опубликуйте свое решения</span><span class="sxs-lookup"><span data-stu-id="739e5-151">Publish your solution</span></span>
<span data-ttu-id="739e5-152">После того как решение будет создано и протестировано, вы можете предоставить клиентам доступ к нему, используя следующие источники.</span><span class="sxs-lookup"><span data-stu-id="739e5-152">Once you have completed and tested your solution, you can make it available to customers through either the following sources.</span></span>

- <span data-ttu-id="739e5-153">**Шаблоны быстрого запуска Azure**.</span><span class="sxs-lookup"><span data-stu-id="739e5-153">**Azure Quickstart templates**.</span></span>  <span data-ttu-id="739e5-154">[Шаблоны быстрого запуска Azure](https://azure.microsoft.com/resources/templates/) представляют набор шаблонов Resource Manager, предоставленные сообществом разработчиков через GitHub.</span><span class="sxs-lookup"><span data-stu-id="739e5-154">[Azure Quickstart templates](https://azure.microsoft.com/resources/templates/) is a set of Resource Manager templates contributed by the community through GitHub.</span></span>  <span data-ttu-id="739e5-155">Чтобы предоставить доступ к решению, следуйте инструкциям в [руководстве по участию](https://github.com/Azure/azure-quickstart-templates/tree/master/1-CONTRIBUTION-GUIDE).</span><span class="sxs-lookup"><span data-stu-id="739e5-155">You can make your solution available by following information in the [contribution guide](https://github.com/Azure/azure-quickstart-templates/tree/master/1-CONTRIBUTION-GUIDE).</span></span>
- <span data-ttu-id="739e5-156">**Azure Marketplace**.</span><span class="sxs-lookup"><span data-stu-id="739e5-156">**Azure Marketplace**.</span></span>  <span data-ttu-id="739e5-157">На [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/) можно распространять решения среди других разработчиков, независимых поставщиков ПО и ИТ-специалистов, а также продавать решения.</span><span class="sxs-lookup"><span data-stu-id="739e5-157">The [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/) allows you to distribute and sell your solution to other developers, ISVs, and IT professionals.</span></span>  <span data-ttu-id="739e5-158">Дополнительные сведения см. в статье [Как опубликовать предложение и управлять им в Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-158">You can learn how to publish your solution to Azure Marketplace at [How to publish and manage an offer in the Azure Marketplace](../marketplace-publishing/marketplace-publishing-getting-started.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="739e5-159">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="739e5-159">Next steps</span></span>
* <span data-ttu-id="739e5-160">Узнайте, как [создать файл решения](operations-management-suite-solutions-solution-file.md) для решения по управлению.</span><span class="sxs-lookup"><span data-stu-id="739e5-160">Learn how to [create a solution file](operations-management-suite-solutions-solution-file.md) for your management solution.</span></span>
* <span data-ttu-id="739e5-161">Узнайте больше о [создании шаблонов Azure Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md).</span><span class="sxs-lookup"><span data-stu-id="739e5-161">Learn the details of [Authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md).</span></span>
* <span data-ttu-id="739e5-162">Найдите в коллекции [шаблонов быстрого запуска Azure](https://azure.microsoft.com/documentation/templates) примеры разных шаблонов Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="739e5-162">Search [Azure Quickstart Templates](https://azure.microsoft.com/documentation/templates) for samples of different Resource Manager templates.</span></span>