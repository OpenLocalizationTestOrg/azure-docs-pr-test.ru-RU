---
title: "aaaScenarios и примеры по управлению подпиской | Документы Microsoft"
description: "Примеры tooimplement Управление подпиской Azure для распространенных сценариев."
services: azure-resource-manager
documentationcenter: na
author: rdendtler
manager: timlt
editor: tysonn
ms.assetid: e8fbeeb8-d7a1-48af-804f-6fe1a6024bcb
ms.service: azure-resource-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 01/03/2017
ms.author: rodend;karlku;tomfitz
ms.openlocfilehash: f750e834519c8e64f57f87e2067801feb38b5c29
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="examples-of-implementing-azure-enterprise-scaffold"></a>Примеры реализации корпоративного каркаса Azure
В этом разделе приведены примеры как предприятия может реализовать рекомендации hello для [корпоративные функции формирования шаблонов](resource-manager-subscription-governance.md). Она использует вымышленной компании, с именем Contoso tooillustrate советы и рекомендации для распространенных сценариев.

## <a name="background"></a>Фоновый
Contoso представляет локального развертывания по всему миру компания, предоставляющая решений цепочки поставок для клиентов все элементы из модели упакованных tooa модель «Программное обеспечение как услуга».  Разработка программного обеспечения через земной шар hello с центрах разработки значительные Индии, hello США и Канады.

часть компании hello ISV Hello делится на несколько независимых бизнес-подразделениям и Управление продуктами значительные бизнеса. Во всех подразделениях имеются собственные разработчики, менеджеры по продуктам и архитекторы.

Hello корпоративные технологии служб (ETS) предоставляет возможность централизованного ИТ и управляет несколько центров обработки данных, где бизнес-единиц размещения своих приложений. А также управление центрами обработки данных hello, hello ETS организации предоставляет и управляет централизованного совместной работы (например, электронной почты и веб-сайтов) и сети или телефонные службы. Кроме того, организация ETS управляет рабочими нагрузками клиентов в небольших подразделениях, не имеющих эксплуатационного персонала.

в этом разделе используются следующие образы Hello:

* Дэйв является администратором ETS Azure hello.
* Анна — Contoso директора разработки в филиале цепочки поставок hello.

Компания Contoso должна toobuild из бизнес-приложения и приложения с клиентом. Он решил toorun приложения hello в Azure. Dave считывает hello [управления конкретные подписки](resource-manager-subscription-governance.md) раздела, и теперь готовы tooimplement hello рекомендации.

## <a name="scenario-1-line-of-business-application"></a>Сценарий 1. Бизнес-приложение
Contoso построение исходного кода управления системы (BitBucket) toobe hello world в масштабах разработчиками.  приложение Hello использует инфраструктуру как услугу (IaaS) для размещения и состоит из веб-серверов и сервер базы данных. Разработчики получают доступ к серверам в своих средах разработки, но не иметь доступа toohello серверов в Azure. Contoso ETS хочет tooallow владелец приложения hello, а приложение hello toomanage team. приложение Hello доступен только при корпоративной сети Contoso. Dave должен tooset копирование hello подписки для данного приложения. Hello подписки также будет размещаться другими программами, связанные с hello в будущем.  

### <a name="naming-standards--resource-groups"></a>Стандарты именования и группы ресурсов
Dave создается подписка toosupport средств разработки, которые являются общими для всех подразделений hello. Он должен toocreate значимые имена для hello подписки и группы ресурсов (для приложения hello и hello сети). Он создает следующие группы ресурса и подписки hello:

| Элемент | Имя | Описание |
| --- | --- | --- |
| Подписки |Contoso ETS DeveloperTools Production |Поддерживает типовые инструменты разработки. |
| Группа ресурсов |rgBitBucket |Содержит веб-сервера приложения hello и сервер базы данных |
| Группа ресурсов |rgCoreNetworks |Содержит hello виртуальных сетей и подключения шлюза сайта для сайта |

### <a name="role-based-access-control"></a>Контроль доступа на основе ролей
После создания своей подписки, Dave хочет tooensure, hello соответствующие команды и владельцы приложений доступа к ресурсам. Дейв понимает, что у всех команд разные требования. Он использует hello групп, которые были синхронизированы из Contoso в локальной среде Active Directory (AD) tooAzure Active Directory и предоставляет hello необходимого уровня доступа toohello команд.

Dave назначает hello следующие роли для hello подписки.

| Роль | Назначенный слишком| Описание |
| --- | --- | --- |
| [Владелец](../active-directory/role-based-access-built-in-roles.md#owner) |Управляемый идентификатор из AD компании Contoso. |Для контроля этого идентификатора используется доступ по схеме "точно в срок" (JIT) с помощью инструмента управления удостоверениями Contoso, при этом гарантируется полный аудит доступа владельца подписки. |
| [Диспетчер безопасности](../active-directory/role-based-access-built-in-roles.md#security-manager) |Отдел безопасности и управления рисками |Эта роль позволяет toolook пользователей на hello центра безопасности Azure и состояние hello hello ресурсов. |
| [Участник сети](../active-directory/role-based-access-built-in-roles.md#network-contributor) |Сетевая группа |Эта роль позволяет сайта hello tooSite VPN Contoso сети команды toomanage и hello виртуальных сетей. |
| *Настраиваемая роль* |Владелец приложения |Dave создает роль, которая предоставляет hello возможность toomodify ресурсы в группе ресурсов hello. Дополнительные сведения см. в разделе [Пользовательские роли в Azure RBAC](../active-directory/role-based-access-control-custom-roles.md). |

### <a name="policies"></a>Политики
Dave имеет следующие требования для управления ресурсами в подписке hello hello.

* Поскольку средства разработки hello поддержки разработчиков между Здравствуй, мир, он не должен быть tooblock пользователям возможность создавать ресурсы в любом регионе. Тем не менее он должен tooknow, где создаются ресурсы.
* Дейва заботят затраты. Таким образом ему tooprevent владельцы приложений от создания без необходимости дорогих виртуальных машин.  
* Поскольку это приложение обслуживает разработчики в многих бизнес-подразделениям, ему tootag каждого ресурса с владельцем компании модульных тестов и приложения hello. Используя эти теги, ETS сможете оплачивать hello соответствующие команды.

Он создает следующие hello [политик диспетчера ресурсов](resource-manager-policy.md):

| Поле | Результат | Описание |
| --- | --- | --- |
| location |audit |Создание аудита hello ресурсов hello в любом регионе |
| type |deny |Запрет создания виртуальных машин серии G. |
| Теги |deny |Требование наличия тега владельца приложения. |
| Теги |deny |Требование наличия тега места возникновения затрат. |
| Теги |append |Добавление имени тега **BusinessUnit** и значение тега **ETS** tooall ресурсы |

### <a name="resource-tags"></a>Теги ресурсов
Dave понимает, что он должен toohave подробные сведения о счете tooidentify hello hello-центр затрат для реализации BitBucket hello. Кроме того Dave хочет Здравствуйте, все ресурсы, которыми владеет ETS tooknow.

Он добавляет следующие hello [теги](resource-group-using-tags.md) toohello и группы ресурсов.

| Имя тега | Значение тега |
| --- | --- |
| ApplicationOwner |Имя Hello hello лицо, управляющее этого приложения. |
| CostCenter |Центр затрат Hello hello группы, которая платит за использование Azure hello. |
| BusinessUnit |**ETS** (hello подразделения в hello подписка) |

### <a name="core-network"></a>Основная сеть
Hello ETS Contoso, предлагаемые сведения риск нарушения безопасности и команды управления проверок Дейва плана tooAzure приложения hello toomove. Они хотят tooensure, приложение hello не предоставляется toohello Интернета.  Dave также имеет разработчика приложений, которые в будущем hello будут перемещены tooAzure. Этим приложениям требуются общедоступные интерфейсы.  toomeet этим требованиям, он предоставляет внутренние и внешние виртуальные сети и группы безопасности сети toorestrict права.

Он создает hello следующие ресурсы:

| Тип ресурса | Имя | Описание |
| --- | --- | --- |
| Виртуальная сеть |vnInternal |При использовании BitBucket приложения hello и подключен через ExpressRoute tooContoso корпоративной сети.  Подсеть (sbBitBucket) предоставляет приложение hello с определенной пространство IP-адресов. |
| Виртуальная сеть |vnExternal |Доступна для будущих приложений, которым понадобятся общедоступные конечные точки. |
| Группа безопасности сети |nsgBitBucket |Гарантирует, что hello уязвимость этой рабочей нагрузки сведено к минимуму, разрешив соединения только через порт 443 для подсети hello, где приложения hello находятся (sbBitBucket). |

### <a name="resource-locks"></a>Блокировки ресурсов
Dave распознает, что подключение hello из Contoso корпоративной сети toohello внутренней виртуальной сети должны быть защищены от любой wayward скрипт или случайного удаления.

Он создает следующие hello [блокировка ресурса](resource-group-lock-resources.md):

| Тип блокировки | Resource (Ресурс) | Описание |
| --- | --- | --- |
| **CanNotDelete** |vnInternal |Запрещает пользователям удаление hello виртуальной сети или подсети, но не предотвращает добавление новых подсетей hello. |

### <a name="azure-automation"></a>Служба автоматизации Azure
Dave не имеет никакого tooautomate для этого приложения. Несмотря на то, что он создал учетную запись службы автоматизации Azure, Дейв не будет сразу ее использовать.

### <a name="azure-security-center"></a>Центр безопасности Azure
Contoso ИТ должен tooquickly идентификации и обработки угроз. Также требуется, чтобы toounderstand какие проблемы могут существовать.  

toofulfill эти требования, hello включает Dave [центра безопасности Azure](../security-center/security-center-intro.md)и предоставляет роли диспетчера безопасности toohello доступа.

## <a name="scenario-2-customer-facing-app"></a>Сценарий 2. Приложение для клиентов
с помощью карты руководителей бизнеса Hello в филиале цепочки поставок hello определил различных работе tooincrease возможных сделок с клиентами компании Contoso. Команда Анны необходимо создать это приложение и решает, что Azure повышает их возможности toomeet hello бизнес-задачи. Алиса работает с Dave из ETS tooconfigure две подписки по разработке и эксплуатации этого приложения.

### <a name="azure-subscriptions"></a>Подписки Azure
Dave входит toohello Azure корпоративного портала и видит, что этот отдел цепочки поставок hello уже существует.  Тем не менее как данный проект является hello первый проект разработки для команды цепочки поставок hello в Azure, Dave распознает hello потребность в новую учетную запись для команды разработки Анны.  Он создает hello учетной записи «R & D» для своей рабочей группой и назначает tooAlice доступа. Алиса вошел в систему через портал Azure hello и создает две подписки: один toohold hello разработки серверов и один toohold hello рабочих серверов.  Она ниже стандарты именования hello установленного ранее при создании hello следующие подписки:

| Назначение подписки | Имя |
| --- | --- |
| Разработка |SupplyChain ResearchDevelopment LoyaltyCard Development |
| Производство |SupplyChain Operations LoyaltyCard Production |

### <a name="policies"></a>Политики
Dave и Анна обсудить приложения hello и определить, что это приложение обслуживает только клиентов в Северной Америке области hello.  Анна и ее сотрудникам плана toouse Azure среды службы приложения и приложения hello toocreate Azure SQL. Они потребуют toocreate виртуальных машин во время разработки.  Алиса хочет tooensure у других разработчиков ресурсы hello, они должны tooexplore и изучать проблемы не извлекаются в ETS.

Для hello **подписки разработки**, они создают hello следующие политики:

| Поле | Результат | Описание |
| --- | --- | --- |
| location |audit |Аудит hello Создание ресурсов hello в любом регионе. |

Не ограничивать тип hello sku, которые пользователь может создавать в разработке и не требуют теги для любой группы ресурсов или ресурсов.

Для hello **производственной подписке**, они создают hello следующие политики:

| Поле | Результат | Описание |
| --- | --- | --- |
| location |deny |Запретите Создание hello все ресурсы за пределами США hello центрах обработки данных. |
| tags |deny |Требование наличия тега владельца приложения. |
| Теги |deny |Требуется тег отдела. |
| Теги |append |Добавление группы ресурсов tooeach тег, указывающее, рабочей среде. |

Они не ограничивают hello типа sku, которые пользователь может создать в рабочей среде.

### <a name="resource-tags"></a>Теги ресурсов
Dave понимает, что он должен toohave определенные сведения tooidentify hello правильные бизнес группы для выставления счетов и владельца. Для этого он определяет теги ресурсов для групп ресурсов и ресурсов.

| Имя тега | Значение тега |
| --- | --- |
| ApplicationOwner |Имя Hello hello лицо, управляющее этого приложения. |
| Department |Центр затрат Hello hello группы, которая платит за использование Azure hello. |
| EnvironmentType |**Производство** (несмотря на то, что подписка hello включает **рабочей** в имени hello, включая этот тег позволяет легко идентифицировать при просмотре ресурсов hello портала или на счете hello.) |

### <a name="core-networks"></a>Основные сети
Hello ETS Contoso, предлагаемые сведения риск нарушения безопасности и команды управления проверок Дейва плана tooAzure приложения hello toomove. Должен быть правильно tooensure, карты приложения hello изолированных и защищенные в сети Периметра.  toofulfill это требование, Дейв и Анна создать внешнюю виртуальную сеть и сетевой безопасности группы tooisolate hello карты приложения hello Contoso корпоративной сети.  

Для hello **подписки разработки**, они создают:

| Тип ресурса | Имя | Описание |
| --- | --- | --- |
| Виртуальная сеть |vnInternal |Служит в среде разработки карты Contoso hello и подключен через ExpressRoute tooContoso корпоративной сети. |

Для hello **производственной подписке**, они создают:

| Тип ресурса | Имя | Описание |
| --- | --- | --- |
| Виртуальная сеть |vnExternal |Где размещается приложение hello карты и не подключен напрямую tooContoso по ExpressRoute. Код передается через систему исходного кода непосредственно toohello служб PaaS. |
| Группа безопасности сети |nsgBitBucket |Гарантирует, что hello уязвимость этой рабочей нагрузки сведено к минимуму, просто разрешив обмен данными в привязкой на TCP-порт 443.  Компания Contoso также рассматривает применение брандмауэра веб-приложения для усиления защиты. |

### <a name="resource-locks"></a>Блокировки ресурсов
Дейв и Ольга предоставляет и решите, tooadd ресурса блокировки на некоторых ключевых ресурсов hello в hello среды tooprevent случайного удаления во время принудительной отправки умыслу кода.

Они создают hello следующие блокировки:

| Тип блокировки | Resource (Ресурс) | Описание |
| --- | --- | --- |
| **CanNotDelete** |vnExternal |люди tooprevent удалять hello виртуальной сети или подсети. Hello блокировка не препятствует hello Добавление новых подсетей. |

### <a name="azure-automation"></a>Служба автоматизации Azure
Анна и команды разработчиков имеют среды hello toomanage расширенные модули Runbook для этого приложения. модули Runbook Hello позволяют hello добавлении или удалении узлов для приложения hello и других задач DevOps.

toouse таких модулей, они позволяют [автоматизации](../automation/automation-intro.md).

### <a name="azure-security-center"></a>Центр безопасности Azure
Contoso ИТ должен tooquickly идентификации и обработки угроз. Также требуется, чтобы toounderstand какие проблемы могут существовать.  

toofulfill эти требования Dave позволяет центра безопасности Azure. Он гарантирует, что центр безопасности Azure hello наблюдает за ресурсы hello и предоставляет доступ группам безопасности и DevOps toohello.

## <a name="next-steps"></a>Дальнейшие действия
* в разделе toolearn о создании шаблонов диспетчера ресурсов [советы и рекомендации по созданию шаблонов диспетчера ресурсов Azure](resource-manager-template-best-practices.md).

