---
title: "Управляемые приложения Azure в Marketplace | Документация Майкрософт"
description: "Описываются управляемые приложения Azure, доступные в Marketplace."
services: azure-resource-manager
author: ravbhatnagar
manager: rjmax
ms.service: azure-resource-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 07/09/2017
ms.author: gauravbh; tomfitz
ms.openlocfilehash: 58ac7665abf7e75a43bb0b92bdf6f41005c3efe8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="azure-managed-applications-in-the-marketplace"></a>Управляемые приложения Azure в Marketplace

 Поставщики управляемых служб, независимые поставщики программного обеспечения и системные интеграторы могут использовать управляемые приложения Azure, чтобы предлагать свои решения всем клиентам Azure Marketplace. Такие решения уменьшают затраты на обслуживание и управление для клиентов. Издатели могут продавать инфраструктуру и программное обеспечение через Marketplace. Они могут подключать услуги и эксплуатационную поддержку к управляемым приложениям. Дополнительные сведения см. в разделе [Обзор управляемых приложений Azure](managed-application-overview.md).

В этой статье описывается, как поставщики управляемых служб, независимые поставщики программного обеспечения и системные интеграторы могут опубликовать приложения в Marketplace и сделать их широкодоступными для клиентов.

## <a name="prerequisites-for-publishing-a-managed-application"></a>Предварительные требования для публикации управляемого приложения

Предварительные требования для добавления приложения в Marketplace

* Технические требования

    *  Дополнительные сведения о базовой инфраструктуре и синтаксисе шаблонов Azure Resource Manager см. в статье [Описание структуры и синтаксиса шаблонов Azure Resource Manager](resource-group-authoring-templates.md).
    *  Готовые шаблоны можно найти в статье [Шаблоны быстрого запуска Azure](https://azure.microsoft.com/en-us/documentation/templates/) или [репозитории шаблонов быстрого запуска](https://github.com/azure/azure-quickstart-templates).
    *  Дополнительные сведения о создании интерфейса для пользователей, развертывающих ваше приложение через Marketplace, см. в разделе [Начало работы с CreateUiDefinition](managed-application-createuidefinition-overview.md).

* Требования нетехнического характера (бизнес-требования)

    *   Ваша компания (или ее филиал) должна находиться в стране, на территории которой могут осуществляться продажи в Marketplace.
    *   Продукт должен иметь лицензию, совместимую с моделями выставления счетов, которые поддерживает Marketplace.
    *   Вы должны предоставить клиентам техническую поддержку экономически обоснованным образом. Поддержка может быть платной, бесплатной или обеспечиваться посредством поддержки от сообщества.
    *   Вы несете ответственность за лицензирование программного обеспечения, а также любых зависимостей от стороннего программного обеспечения.
    *   Предоставьте маркетинговые материалы, отвечающие критериям для вашего предложения, соблюдение которых требуется для добавления приложения в Marketplace и на портале Azure.
    *   Вам нужно принять условия политик участия и соглашения для издателей Azure Marketplace.
    *   Вам нужно принять условия использования, заявление о конфиденциальности Майкрософт и соглашение по программе сертификации Microsoft Azure.

## <a name="create-a-new-azure-application-offer"></a>Создание предложения приложения Azure

После выполнения необходимых условий можно создать предложение управляемого приложения. Давайте ознакомимся с кратким обзором предложения и SKU.

### <a name="offer"></a>ПРЕДЛОЖЕНИЕ

Предложение управляемого приложения соответствует классу предложения продукта от издателя. Если у вас есть новый тип решения или приложения, которое вы хотели бы добавить в Marketplace, можно разместить его в качестве нового предложения. Предложение — это коллекция SKU. Каждое предложение отображается в виде отдельной сущности в Marketplace.

### <a name="sku"></a>SKU

SKU — это наименьшая единица предложения, доступная для приобретения. Номер SKU в том же классе продуктов (предложении) можно использовать, чтобы:

* указывать различные функции, которые поддерживаются;
* указывать, является ли предложение управляемым или неуправляемым;
* указывать разные модели выставления счетов, которые поддерживаются.

В Marketplace номер SKU отображается внутри родительского предложения, а на портале Azure — в качестве отдельной сущности, доступной для приобретения.

### <a name="set-up-an-offer"></a>Настройка предложения

1. Войдите на [портал Cloud Partner](https://cloudpartner.azure.com/).

2. В области навигации слева выберите **+ Новое предложение** > **Приложения Azure**.

    ![Новое предложение](./media/managed-application-author-marketplace/newOffer.png)

3. Заполните формы в левой части представления **Редактор**. Обязательные для заполнения поля отмечены красной звездочкой (*).

    ![Параметры предложения](./media/managed-application-author-marketplace/newOffer_OfferSettings.png)

    Для создания управляемого приложения используются четыре основные формы.

    а. Параметры предложения

    b. Номера SKU

    c. Marketplace

    d. Поддержка

Эти формы описаны более подробно в следующих разделах.

## <a name="offer-settings-form"></a>Форма параметров предложения
Укажите параметры предложения в этой базовой форме.

1. Заполните форму **Параметры предложения**. Ниже описаны ее поля:

    а. **Идентификатор предложения**. Уникальный идентификатор предложения в профиле издателя. Он отображается в URL-адресах продукта, шаблонах Resource Manager и отчетах о выставлении счетов. Идентификатор может содержать только строчные буквы, цифры или дефисы (-). Идентификатор не может заканчиваться дефисом. Его длина не должна превышать 50 знаков. После активации предложения это поле блокируется.

    b. **Идентификатор издателя**. Из этого раскрывающегося списка можно выбрать профиль издателя, используемый для публикации этого предложения. После активации предложения это поле блокируется.

    c. **Имя**. Отображаемое имя вашего предложения в Marketplace и на портале. Его длина не должна превышать 50 символов. Укажите для своего продукта узнаваемое название торговой марки. Не включайте в него название своей организации, если только это не требуется для продвижения продукта. Если вы продвигаете это предложение через свой веб-сайт, убедитесь, что данное имя полностью совпадает с используемым на веб-сайте.

2. Щелкните **Сохранить**, чтобы сохранить настройки. 

## <a name="skus-form"></a>Форма номеров SKU
Следующим шагом является добавление номеров SKU для вашего предложения.

1. Выберите **Номера SKU** > **Новый код SKU**. 

    ![Выбор нового номера SKU](./media/managed-application-author-marketplace/newOffer_skus.png)

2. Введите **идентификатор SKU**. Идентификатор SKU — это уникальный идентификатор номера SKU в рамках предложения. Он отображается в URL-адресах продукта, шаблонах Resource Manager и отчетах о выставлении счетов. Идентификатор может содержать только строчные буквы, цифры или дефисы (-). Он не может заканчиваться дефисом, а его длина не должна превышать 50 знаков. После активации предложения это поле блокируется. В предложении можно использовать несколько SKU. Номер SKU нужен для каждого публикуемого образа.

3. Заполните раздел **SKU Details** (Сведения о номере SKU) в приведенной ниже форме.

    ![Указание нового номера SKU](./media/managed-application-author-marketplace/newOffer_newsku.png)

    Заполните приведенные ниже поля.
    
    а. **Название**. Введите название для номера SKU. Данное название элемента отображается в коллекции.

    b. **Сводка**. Введите краткое описание номера SKU. Этот текст отображается под названием.

    c. **Описание**. Введите подробное описание номера SKU.

    d. **Тип SKU**. Допустимыми значениями являются **Управляемое приложение** и **Шаблоны решений**. В этом случае выберите **Managed Application** (Управляемое приложение).

4. Заполните раздел **Сведения о пакете** в приведенной ниже форме.

    ![Package](./media/managed-application-author-marketplace/newOffer_newsku_package.png)

    Заполните приведенные ниже поля.

    а. **Текущая версия**. Введите версию передаваемого пакета. Ее необходимо указать в формате `{number}.{number}.{number}{number}`.

    b. **Выбор файла пакета**. Этот пакет содержит следующие файлы, которые будут сжаты в ZIP-файл.
    * **applianceMainTemplate.json**. Это файл шаблона развертывания, который используется для развертывания решения или приложения. Дополнительные сведения о создании файлов шаблонов развертывания см. в статье [Создание первого шаблона Azure Resource Manager](resource-manager-create-first-template.md).
    * **appliancecreateUIDefinition.json**. Этот файл используется порталом Azure, чтобы создать пользовательский интерфейс для подготовки этого решения или приложения. Дополнительные сведения см. в статье [Начало работы с CreateUiDefinition](managed-application-createuidefinition-overview.md).
    * **mainTemplate.json**. Это файл шаблона, который содержит только ресурс Microsoft.Solution/appliances. mainTemplate содержит следующие свойства:

        *  **kind**. Используйте **Marketplace** для управляемых приложений в Marketplace.
        *  **managedResourceGroupId**. Это группа ресурсов в подписке клиента, в которой развертываются все ресурсы, определенные в файле applianceMainTemplate.json.
        *  **PublisherPackageId**. Это строка, которая уникальным образом идентифицирует пакет. Укажите значение в формате `{publisherId}.{OfferId}.{SKUID}.{PackageVersion}`.

Получите **идентификатор предложения** и **идентификатор издателя** на портале публикации, как показано на следующем рисунке.

![Offer ID (Идентификатор предложения)](./media/managed-application-author-marketplace/UniqueString_pubid_offerid.png)
        
Получите **идентификатор SKU**, как показано на следующем рисунке.

![Идентификатор SKU](./media/managed-application-author-marketplace/UniqueString_skuid.png)
        
Получите **версию** пакета, как показано на следующем рисунке.

![Версия пакета](./media/managed-application-author-marketplace/UniqueString_packageversion.png)
    
  Исходя из предыдущих примеров, значение **PublisherPackageId** — `azureappliance-test.ravmanagedapptest.ravpreviewmanagedsku.1.0.0`.

  Пример mainTemplate.json:

  ```json
  {
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
      "storageAccountNamePrefix": {
        "type": "string",
        "metadata": {
          "description": "Specify the name of the storage account"
        }
      },
      "storageAccountType": {
        "type": "string"
      }
    },
    "variables": {
      "managedResourceGroup": "[concat(resourceGroup().id,uniquestring(resourceGroup().id))]"
    },
    "resources": [{
      "type": "Microsoft.Solutions/appliances",
      "apiVersion": "2016-09-01-preview",
      "name": "[concat(parameters('storageAccountNamePrefix'), '-', 'managed')]",
      "location": "[resourceGroup().location]",
      "kind": "marketplace",
      "properties": {
        "managedResourceGroupId": "[variables('managedResourceGroup')]",
        "PublisherPackageId":"azureappliancetest.ravmanagedapptest.ravpreviewmanagedsku.1.0.0",
        "parameters": {
          "storageAccountName": {
            "value": "[parameters('storageAccountNamePrefix')]"
          },
          "storageAccountType": {
            "value": "[parameters('storageAccountType')]"
          }
        }
      }
    }],
    "outputs": {

    }
  }
  ```

Этот пакет должен содержать все другие вложенные шаблоны или скрипты, необходимые для успешной подготовки этого приложения. Файлы mainTemplate.json, applianceMainTemplate.json и applianceCreateUIDefinition.json должны находиться в корневом каталоге.

* **Authorizations**. Это свойство определяет, кто и на каком уровне получает доступ к ресурсам в подписках клиентов. Оно позволяет издателю управлять приложением от имени клиента.
* **PrincipalId**. Это свойство является идентификатором Azure Active Directory (Azure AD) пользователя, группы пользователей или приложения, которому предоставляются определенные разрешения для ресурсов в подписке клиента. Эти разрешения описывает свойство Role Definition. 
* **Role Definition**. Это свойство является списком всех встроенных ролей RBAC (управление доступом на основе ролей), предоставляемых Azure AD. Можно выбрать наиболее подходящую роль, чтобы управлять ресурсами от имени клиента.

Можно добавить несколько разрешений. Рекомендуется создать группу пользователей AD и указать ее идентификатор в свойстве **PrincipalId**. Таким образом можно будет добавлять пользователей в эту группу без необходимости обновлять номер SKU.

Дополнительные сведения об управлении доступом на основе ролей см. в статье [Начало работы с управлением доступом на основе ролей на портале Azure](../active-directory/role-based-access-control-what-is.md).

## <a name="marketplace-form"></a>Форма Marketplace

Форма Marketplace запрашивает поля, отображаемые в [Azure Marketplace](https://azuremarketplace.microsoft.com) и на [портале Azure](https://portal.azure.com/).

### <a name="preview-subscription-ids"></a>Идентификаторы подписок для предварительного просмотра

Введите список идентификаторов подписок Azure, у которых будет доступ к предложению после его публикации. Эти разрешенные подписки можно использовать, чтобы протестировать предварительную версию предложения перед его активацией. На портале для партнеров можно добавить в список разрешений до 100 подписок.

### <a name="suggested-categories"></a>Предлагаемые категории

Выберите из списка до пяти категорий, которые точнее всего описывают ваше предложение. Эти категории используются для сопоставления вашего предложения с категориями продуктов, доступными в [Azure Marketplace](https://azuremarketplace.microsoft.com) и на [портале Azure](https://portal.azure.com/).

#### <a name="azure-marketplace"></a>Azure Marketplace

В разделе сводки управляемого приложения отображаются следующие поля.

![Сводка Marketplace](./media/managed-application-author-marketplace/publishvm10.png)

На вкладке **Обзор** управляемого приложения отображаются следующие поля.

![Обзор Marketplace](./media/managed-application-author-marketplace/publishvm11.png)

На вкладке **Планы + цены** управляемого приложения отображаются следующие поля.

![Планы Marketplace](./media/managed-application-author-marketplace/publishvm15.png)

#### <a name="azure-portal"></a>Портал Azure

В разделе сводки управляемого приложения отображаются следующие поля.

![Сводка на портале](./media/managed-application-author-marketplace/publishvm12.png)

В обзоре управляемого приложения отображаются следующие поля.

![Общие сведения на портале](./media/managed-application-author-marketplace/publishvm13.png)

#### <a name="logo-guidelines"></a>Рекомендации по логотипам

Следуйте приведенным ниже указаниям для любого логотипа, передаваемого на портал Cloud Partner.

*   Дизайн Azure отличается простой цветовой палитрой. Используйте в логотипах ограниченное число основных и дополнительных цветов.
*   Цвета темы портала — белый и черный. Постарайтесь не использовать эти цвета для фона своего логотипа. Используйте цвет, который выделяет ваш логотип на портале. Мы рекомендуем простые основные цвета. *При использовании прозрачного фона убедитесь, что для логотипа и текста не используется белый, черный или синий цвет.*
*   Не используйте в логотипе градиентный фон.
*   Не размещайте в логотипе текст, даже название своей компании или торговой марки. Логотип должен быть сплошным, избегайте градиентов.
*   Логотип не должен быть растянут.

#### <a name="hero-logo"></a>Имиджевый логотип

Имиджевый логотип использовать необязательно. Издатель может не передавать такой логотип. После передачи имиджевого значка его нельзя удалить. Партнер также должен следовать рекомендациям для имиджевых значков Marketplace.

Следуйте приведенным ниже рекомендациям для значка имиджевого логотипа.

*   Отображаемое имя издателя, название плана и развернутая сводка предложения отображаются белым цветом. Поэтому не используйте светлый цвет для фона имиджевого значка. Фон имиджевого значка не может быть черным, белым или прозрачным.
*   Как только предложение вносится в список, в имиджевый логотип программно вставляется отображаемое имя издателя, название плана, развернутая сводка предложения и кнопка **Создать**. Следовательно, не нужно добавлять какой-либо текст в процессе разработки имиджевого логотипа. Оставьте пустое место справа, так как туда будет программно добавлен текст. Для текста следует оставить справа пустое место 415 на 100 пикселей. Смещение от левого края должно составлять 370 пикселей.

    ![Пример имиджевого логотипа](./media/managed-application-author-marketplace/publishvm14.png)

## <a name="support-form"></a>Форма службы поддержки

Заполните форму **Поддержка** контактными данными службы поддержки своей компании. Это могут быть контактные данные технического отдела или службы поддержки клиентов.

## <a name="publish-an-offer"></a>Публикация предложения

Заполнив все разделы, щелкните **Опубликовать**, чтобы начать процесс размещения вашего приложения для клиентов.

## <a name="next-steps"></a>Дальнейшие действия

* Общие сведения об управляемых приложениях Azure см. в разделе [Обзор управляемых приложений Azure](managed-application-overview.md).
* Сведения об использовании управляемого приложения из Marketplace см. в статье [Использование управляемых приложений Azure в Marketplace](managed-application-consume-marketplace.md).
* Сведения о публикации управляемых приложений в каталоге услуг см. в разделе [Создание и публикация управляемого приложения Azure](managed-application-publishing.md).
* Дополнительные сведения об использовании управляемых приложений из каталога услуг см. в разделе [Использование управляемого приложения Azure](managed-application-consumption.md).
