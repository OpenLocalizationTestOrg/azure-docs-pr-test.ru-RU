---
title: "aaaResource Manager и классическое развертывание | Документы Microsoft"
description: "Описывает модель развертывания hello различия между модели развертывания диспетчера ресурсов hello и классический hello (или службы управления)."
services: azure-resource-manager
documentationcenter: na
author: tfitzmac
manager: timlt
editor: tysonn
ms.assetid: 7ae0ffa3-c8da-4151-bdcc-8f4f69290fb4
ms.service: azure-resource-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/09/2017
ms.author: tomfitz
ms.openlocfilehash: fbf1959991b100547a459bf88a29c0afbc8592e8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-resource-manager-vs-classic-deployment-understand-deployment-models-and-hello-state-of-your-resources"></a>Диспетчер ресурсов Azure и классическое развертывание: Обзор модели развертывания и hello состояния ресурсов
В этом разделе, узнайте о диспетчера ресурсов Azure и классическое развертывание модели, состояние hello ресурсов, и почему ресурсы были развернуты с помощью одного или других hello. Hello диспетчера ресурсов и классическое развертывание модели представляют два разных способа развертывания и управления ими решений Azure. Работать с ними через двух разных наборов API и развернуты hello ресурсы могут содержать важные различия. Hello две модели не являются полностью совместимы друг с другом. В данном разделе описываются эти различия.

toosimplify hello развертывание и управление ресурсами, корпорация Майкрософт рекомендует использовать диспетчер ресурсов для всех новых ресурсов. И для повторного развертывания существующих ресурсов рекомендуется также по возможности использовать Resource Manager.

Если новый tooResource Manager, вы можете терминология hello toofirst проверки, определенные в hello [Обзор диспетчера ресурсов Azure](resource-group-overview.md).

## <a name="history-of-hello-deployment-models"></a>Журнал развертывания моделей hello
Azure изначально предоставлен только hello классической модели развертывания. В этой модели каждый ресурс существовал независимо друг от друга; не было возможности toogroup ресурсы, связанные с друг с другом. Вместо этого было toomanually отслеживать ресурсы состоит из приложения или решения и запоминать toomanage их в согласованные подход. toodeploy решение было tooeither создания каждого ресурса отдельно через портал классический hello или создать скрипт, который развернут все ресурсы hello в правильном порядке hello. toodelete решения необходимо было toodelete каждого ресурса по отдельности. Применение и обновление политик контроля доступа также было связано с определенными трудностями. Наконец не удалось применить теги tooresources toolabel их с условиями, которые помогают отслеживать ресурсы и управление выставлением счетов.

В 2014 Azure появилась диспетчера ресурсов, который добавляется концепция hello группы ресурсов. Группа ресурсов — это контейнер для ресурсов с общим жизненным циклом. модель развертывания диспетчера ресурсов Hello предоставляет несколько преимуществ.

* Можно развертывать, контролировать и отслеживать все службы hello решения как группу, а не по отдельности обработки этих служб.
* Вы можете повторно развертывать решение на протяжении всего его жизненного цикла и гарантировать, что ресурсы развертываются в согласованном состоянии.
* Можно применить tooall управления доступа к ресурсам в группе ресурсов, и эти политики автоматически применяются при добавлении новых ресурсов toohello группы ресурсов.
* Можно применить теги tooresources toologically организовать все ресурсы hello в вашей подписке.
* Можно использовать инфраструктуру hello toodefine JavaScript Object Notation (JSON) для вашего решения. файл JSON Hello называется шаблона диспетчера ресурсов.
* Можно определить hello зависимости между ресурсами, поэтому они развертываются в правильном порядке hello.

При добавлении диспетчера ресурсов, все ресурсы задним числом были добавлены toodefault групп ресурсов. При создании ресурса с помощью классического развертывания теперь hello ресурс автоматически создается в группе ресурсов по умолчанию для этой службы, несмотря на то, что вы не указали данной группы ресурсов во время развертывания. Однако только существующие в группе ресурсов не означает успешного ресурсов hello модели преобразованный toohello диспетчера ресурсов. Мы рассмотрим, как каждая служба обрабатывает hello две модели развертывания, в следующем разделе hello. 

## <a name="understand-support-for-hello-models"></a>Понять, поддержка моделей hello
При определении того, какие toouse модель развертывания для ресурсов, существует три учитывать toobe сценариев:

1. Служба Hello поддерживает диспетчер ресурсов и предоставляет только один тип.
2. Hello служба поддерживает диспетчер ресурсов, но предоставляет два типа — один для диспетчера ресурсов и один для классического. Это распространяется только toovirtual компьютеров, учетных записей хранилища и виртуальных сетей.
3. Служба Hello не поддерживает диспетчера ресурсов.

toodiscover ли службы поддерживает диспетчера ресурсов. в разделе [поставщиков ресурсов и типы](resource-manager-supported-services.md).

Если нужно toouse службы hello не поддерживает диспетчер ресурсов, необходимо продолжить использование классического развертывания.

Если служба hello поддерживает диспетчер ресурсов и **не** виртуальную машину, учетной записи хранилища или виртуальной сети можно использовать диспетчер ресурсов безо всяких осложнений.

Для виртуальных машин, учетных записей хранилища и виртуальные сети если hello ресурс был создан при помощи классического развертывания необходимо продолжать toooperate на нем классические операции. Если hello виртуальной машины, учетной записи хранилища или виртуальной сети был создан при помощи развертывания диспетчера ресурсов, необходимо продолжить использование операций диспетчера ресурсов. Это различие следует учитывать, если в подписке содержатся как ресурсы, созданные в классической модели развертывания, так и ресурсы, созданные с помощью Resource Manager. Это сочетание ресурсов может создать непредвиденные результаты, поскольку hello ресурсы не поддерживают hello и те же операции.

В некоторых случаях команда Диспетчер ресурсов можно получить сведения о ресурсе, созданные с помощью классического развертывания или выполнять задачи администрирования, например для перемещения группы ресурсов tooanother классический ресурс. Но таких случаях не следует давать hello впечатление, что тип hello поддерживает операции диспетчера ресурсов. Например, предположим, что имеется группа ресурсов, содержащая виртуальную машину, которая была создана с помощью классического развертывания. Если вы выполните следующую команду PowerShell диспетчера ресурсов hello:

```powershell
Get-AzureRmResource -ResourceGroupName ExampleGroup -ResourceType Microsoft.ClassicCompute/virtualMachines
```

Оно возвращает hello виртуальной машины.

```powershell
Name              : ExampleClassicVM
ResourceId        : /subscriptions/{guid}/resourceGroups/ExampleGroup/providers/Microsoft.ClassicCompute/virtualMachines/ExampleClassicVM
ResourceName      : ExampleClassicVM
ResourceType      : Microsoft.ClassicCompute/virtualMachines
ResourceGroupName : ExampleGroup
Location          : westus
SubscriptionId    : {guid}
```

Однако hello командлета диспетчера ресурсов **Get AzureRmVM** возвращает только виртуальные машины, развернутые с помощью диспетчера ресурсов. Hello следующая команда не возвращает hello виртуальной машины, созданные с помощью классического развертывания.

```powershell
Get-AzureRmVM -ResourceGroupName ExampleGroup
```

Теги поддерживаются только ресурсами, созданными с помощью диспетчера ресурсов. Не удается применить теги tooclassic ресурсов.

## <a name="resource-manager-characteristics"></a>Характеристики диспетчера ресурсов
toohelp понять hello двух моделей, давайте рассмотрим hello характеристики типов диспетчера ресурсов:

* Создана с помощью hello [портал Azure](https://portal.azure.com/).
  
     ![Портал Azure](./media/resource-manager-deployment-model/portal.png)
  
     Для вычислений, хранения и сетевых ресурсов предусмотрена возможность hello с помощью диспетчера ресурсов, так и в классическом развертывания. Выберите **Диспетчер ресурсов**.
  
     ![Развертывание с помощью Resource Manager](./media/resource-manager-deployment-model/select-resource-manager.png)
* Создан в версии диспетчера ресурсов hello hello командлетов Azure PowerShell. Эти команды имеют формат hello *AzureRmNoun команда*.

  ```powershell
  New-AzureRmResourceGroupDeployment
  ```

* Создана с помощью hello [REST API диспетчера ресурсов Azure](https://docs.microsoft.com/rest/api/resources/) для операций REST.
* Создана с помощью Azure CLI команд, запущенных в hello **arm** режим.
  
  ```azurecli
  azure config mode arm
  azure group deployment create
  ```

* Тип ресурса Hello не включает **(классической)** в имени hello. Hello на иллюстрации показан тип hello как **учетной записи хранилища**.
  
    ![веб-приложение](./media/resource-manager-deployment-model/resource-manager-type.png)

## <a name="classic-deployment-characteristics"></a>Характеристики классического развертывания
Hello классической модели развертывания может быть также известно как hello модель управления службами.

Ресурсы, созданные в hello классическое развертывание модели общего ресурса hello следующие характеристики:

* Создана с помощью hello [классического портала](https://manage.windowsazure.com)
  
     ![Классический портал.](./media/resource-manager-deployment-model/classic-portal.png)
  
     Здравствуйте, портал Azure или указать **классический** развертывания (для вычислений, хранения и сети).
  
     ![Классическое развертывание](./media/resource-manager-deployment-model/select-classic.png)
* Создается с помощью версии службы управления hello hello командлетов Azure PowerShell. Эти имена команд имеют формат hello *AzureNoun команда*.

  ```powershell
  New-AzureVM
  ```

* Создана с помощью hello [API REST управления службами](https://msdn.microsoft.com/library/azure/ee460799.aspx) для операций REST.
* Создаются с помощью команд интерфейса командной строки Azure, запускаемых в режиме **asm** .

  ```azurecli
  azure config mode asm
  azure vm create
  ```
   
* Тип ресурса Hello включает **(классической)** в имени hello. Hello на иллюстрации показан тип hello как **учетной записи хранения (классические)**.
  
    ![классический тип](./media/resource-manager-deployment-model/classic-type.png)

Можно использовать ресурсы Azure портала toomanage hello, созданным с помощью классического развертывания.

## <a name="changes-for-compute-network-and-storage"></a>Изменения для вычислительных, сетевых ресурсов и ресурсов хранения
Hello приведенной ниже диаграмме показан вычисления, сети и хранилища ресурсы, развертываемые через диспетчер ресурсов.

![Архитектура Resource Manager](./media/resource-manager-deployment-model/arm_arch3.png)

Обратите внимание, следующие отношения между ресурсами hello hello:

* Все ресурсы hello существует в группе ресурсов.
* Hello виртуальной машины зависит от конкретной учетной записи хранения определенные в toostore поставщика ресурсов хранилища hello его дисков в хранилище больших двоичных объектов (обязательно).
* Hello виртуальной машины ссылается на конкретного сетевого Адаптера, определенные в hello (обязательно) поставщика сетевых ресурсов и доступности, определенный в поставщике ресурсов вычислений hello (необязательно).
* Hello Сетевых ссылки hello виртуальной машины назначен IP-адрес (обязательно), подсети hello hello виртуальной сети для виртуальной машины hello (обязательно) и tooa (необязательно) группы безопасности сети.
* Hello подсети в виртуальной сети ссылается на группу безопасности сети (необязательно).
* экземпляр подсистемы балансировки нагрузки Hello ссылается hello внутренний пул IP-адресов, которые включают hello сетевого Адаптера виртуальной машины (необязательно) и ссылается на нагрузки балансировки общедоступных или частных IP-адрес (необязательно).

Ниже приведены компоненты hello и их связи для классического развертывания.

![классическая архитектура](./media/resource-manager-deployment-model/arm_arch1.png)

классическое решение Hello для размещения виртуальной машины включает в себя:

* Требуемой облачной службой, которая выступает в роли контейнера для размещения виртуальных машин (вычислений). Виртуальным машинам автоматически предоставляется сетевая карта (NIC) и IP-адрес, назначаемый Azure. Кроме того, hello облачная служба содержит экземпляр подсистемы балансировки нагрузки, общедоступный IP-адрес и по умолчанию конечные точки tooallow удаленный рабочий стол и удаленный PowerShell для виртуальных машин на основе Windows и Secure Shell (SSH) трафик для под управлением Linux виртуальные машины.
* Требуется учетной записи хранилища, магазины hello виртуальные жесткие диски для виртуальной машины, включая hello операционной системы, временный характер и дополнительных данных дисков (хранилище).
* Необязательный виртуальной сети, который выступает в качестве дополнительного контейнера, в котором можно создать структуру подсетями и назначить hello подсети, на какие hello находится виртуальная машина (сеть).

Hello в следующей таблице описаны изменения в способ взаимодействия поставщики ресурсов вычисления, сети и хранилища:

| Элемент | Классический | Диспетчер ресурсов |
| --- | --- | --- |
| Облачная служба для виртуальных машин |Облачная служба была контейнером для хранения hello виртуальных машин, которые требуется доступности платформе hello и балансировки нагрузки. |Облачная служба больше не требуется для создания виртуальной машины с использованием новой модели hello объекта. |
| Виртуальные сети |Виртуальная сеть является необязательным для hello виртуальной машины. Если включен, виртуальная сеть hello не удается развернуть с помощью диспетчера ресурсов. |Для виртуальной машины необходима виртуальная сеть, развернутая с помощью Resource Manager. |
| Учетные записи хранения |Hello виртуальной машине требуется учетной записи хранилища, в которой хранятся VHD hello для hello операционной системы диски временный характер и дополнительных данных. |Hello виртуальной машине требуется toostore учетной записи хранилища его дисков в хранилище больших двоичных объектов. |
| Группы доступности |Настроив указанную платформу toohello доступности hello же «AvailabilitySetName» на hello виртуальных машин. Максимальное число доменов сбоя Hello: 2. |Группа доступности — это ресурс, предоставляемый поставщиком Microsoft.Compute. Виртуальных машин, требующих высокого уровня доступности должны быть включены в набор доступности hello. Максимальное число доменов сбоя Hello теперь равно 3. |
| Территориальные группы |Территориальные группы требовались для создания виртуальных сетей. Тем не менее с появлением hello региональные виртуальные сети, которая не требовалось больше. |toosimplify, концепции территориальных групп hello не существует в hello интерфейсы API, предоставляемые с помощью диспетчера ресурсов Azure. |
| Балансировка нагрузки |Создание облачной службы обеспечивает балансировки нагрузки неявное hello виртуальных машин, развернутых. |Hello балансировки нагрузки — это ресурс, предоставленной поставщиком Microsoft.Network hello. Hello первичный сетевой интерфейс из виртуальных машин, необходимые для балансировки нагрузки toobe hello следует ссылаться hello подсистемы балансировки нагрузки. Подсистемы балансировки нагрузки могут быть внутренними или внешними. Экземпляр подсистемы балансировки нагрузки ссылается hello внутренний пул IP-адресов, которые включают hello сетевого Адаптера виртуальной машины (необязательно) и ссылается на нагрузки балансировки общедоступных или частных IP-адрес (необязательно). [Подробная информация.](../virtual-network/resource-groups-networking.md) |
| Виртуальный IP-адрес |Облачные службы получить VIP-адрес по умолчанию (виртуальный IP-адрес), при добавлении виртуальной Машины tooa облачной службы. Hello виртуального IP-адреса — адрес hello, связанный с подсистемой балансировки нагрузки неявное hello. |Общедоступный IP-адрес — это ресурс, предоставленной поставщиком Microsoft.Network hello. Общедоступный IP-адрес может быть статическим (зарезервированным) или динамическим. Динамические общедоступные IP-адреса могут назначаться tooa подсистемы балансировки нагрузки. Их можно защитить с помощью групп безопасности. |
| Зарезервированный IP-адрес |Можно зарезервировать IP-адрес в Azure и связать его с tooensure облачной службы, которая hello IP-адрес остается. |Можно создать общедоступный IP-адрес в режим «Статический» и его предложения hello же возможность как «зарезервированный IP-адрес». Статические общедоступные IP-адреса могут назначаться только tooa балансировки нагрузки в данный момент. |
| Отдельный общедоступный IP-адрес для каждой виртуальной машины |Общедоступные IP-адреса также может быть связан tooa виртуальной Машины напрямую. |Общедоступный IP-адрес — это ресурс, предоставленной поставщиком Microsoft.Network hello. Общедоступный IP-адрес может быть статическим (зарезервированным) или динамическим. Однако только динамические общедоступные IP-адреса можно tooget сетевой интерфейс tooa назначенного общедоступного IP-адреса каждой виртуальной Машины в данный момент. |
| Endpoints |Входные конечные точки необходимости toobe, настроенный на toobe виртуальной машины откройте подключение для определенных портов. Одно из наиболее распространенных режима hello машины toovirtual сделать с помощью настройки конечных точек ввода для подключения. |Можно настроить правила для входящих подключений NAT на подсистемы балансировки нагрузки tooachieve hello же возможность включения конечных точек на определенные порты для подключения виртуальных машин toohello. |
| DNS-имя |Облачная служба получит скрытое глобальное уникальное DNS-имя. Например, `mycoffeeshop.cloudapp.net`. |DNS-имена являются необязательными параметрами, которые можно указать в ресурсе общедоступного IP-адреса. Hello полное доменное имя — в следующее hello формат — `<domainlabel>.<region>.cloudapp.azure.com`. |
| Сетевые интерфейсы |Первичный и вторичный сетевой интерфейс и их свойства были определены в качестве конфигурации сети виртуальной машины. |Сетевой интерфейс — это ресурс, предоставляемый поставщиком Microsoft.Network. жизненный цикл Hello приветствия сетевой интерфейс не привязаны tooa виртуальной машины. Он ссылается на виртуальную машину hello назначенный IP-адрес (обязательно), подсети hello hello виртуальной сети для виртуальной машины hello (обязательно) и tooa (необязательно) группы безопасности сети. |

toolearn о подключении виртуальных сетей из моделей развертывания, в разделе [подключиться к виртуальным сетям из модели развертывания в портале hello](../vpn-gateway/vpn-gateway-connect-different-deployment-models-portal.md).

## <a name="migrate-from-classic-tooresource-manager"></a>Перенос из классической tooResource Manager
Если вы не готовы toomigrate из классического развертывания tooResource развертывания диспетчера ресурсов см.

1. [Технические близкое знакомство с платформа поддерживается перенос из классической tooAzure диспетчера ресурсов](../virtual-machines/windows/migration-classic-resource-manager-deep-dive.md)
2. [Поддерживаемые платформой миграции IaaS ресурсов из tooAzure классический диспетчер ресурсов](../virtual-machines/windows/migration-classic-resource-manager-overview.md)
3. [Перенос ресурсов IaaS в классическом tooAzure диспетчера ресурсов с помощью Azure PowerShell](../virtual-machines/windows/migration-classic-resource-manager-ps.md)
4. [Перенос ресурсов IaaS в классическом tooAzure диспетчера ресурсов с помощью Azure CLI](../virtual-machines/virtual-machines-linux-cli-migration-classic-resource-manager.md)

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы
**Можно создать виртуальную машину, используя toodeploy диспетчера ресурсов Azure в виртуальной сети, созданной с помощью классического развертывания?**

Это не поддерживается. Нельзя использовать toodeploy диспетчера ресурсов Azure виртуальной машины в виртуальной сети, которая была создана с помощью классического развертывания.

**Можно создать виртуальную машину, используя hello диспетчера ресурсов Azure в пользовательский образ, который был создан с помощью API управления службами Azure hello?**

Это не поддерживается. Тем не менее можно скопировать файлы VHD hello из учетной записи хранилища, который был создан с помощью API управления службами hello и добавить их tooa новой учетной записи, созданные посредством Azure Resource Manager.

**Каково влияние hello на hello квоты для подписки?**

Hello квоты для hello виртуальных машин, виртуальных сетей и учетных записей хранилища, созданные с помощью диспетчера ресурсов Azure hello отделены от других квот. Каждая подписка получает квоты toocreate hello ресурсов с помощью hello новых API. Вы можете прочитать больше о дополнительных квот hello [здесь](../azure-subscription-service-limits.md).

**Можно продолжать работу toouse Мой автоматизированные скрипты для подготовки виртуальных машин, виртуальных сетей и учетные записи хранилища с помощью hello API диспетчера ресурсов?**

Все hello автоматизации и сценариев, которые вы создали по-прежнему toowork существующими виртуальными машинами hello, виртуальных сетей, созданные в режиме управления службами Azure hello. Однако скрипты hello имеют toobe обновленные toouse hello новой схемы для создания hello столько же ресурсов через hello режим диспетчера ресурсов.

**Где можно найти примеры шаблонов диспетчера ресурсов Azure?**

Полный набор начальных шаблонов можно найти в разделе [шаблонов быстрого запуска для Azure Resource Manager](https://azure.microsoft.com/documentation/templates/).

## <a name="next-steps"></a>Дальнейшие действия
* toowalk по созданию hello шаблон, определяющий виртуальная машина, учетная запись хранения и виртуальной сети см. [Пошаговое руководство диспетчера ресурсов шаблона](resource-manager-template-walkthrough.md).
* команды hello toosee для развертывания шаблона, в разделе [развернуть приложение с помощью шаблона Azure Resource Manager](resource-group-template-deploy.md).

