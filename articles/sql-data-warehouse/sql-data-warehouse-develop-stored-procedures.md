---
title: "aaaStored процедуры в хранилище данных SQL | Документы Microsoft"
description: "Советы по реализации хранимых процедур в хранилище данных SQL Azure для разработки решений."
services: sql-data-warehouse
documentationcenter: NA
author: jrowlandjones
manager: jhubbard
editor: 
ms.assetid: 9b238789-6efe-4820-bf77-5a5da2afa0e8
ms.service: sql-data-warehouse
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-services
ms.custom: t-sql
ms.date: 10/31/2016
ms.author: jrj;barbkess
ms.openlocfilehash: 416252dd3dea95c66aa5e886860b933b22578002
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="stored-procedures-in-sql-data-warehouse"></a>Хранимые процедуры в хранилище данных SQL
Хранилище данных SQL поддерживает многие функции hello Transact-SQL, имеющихся в SQL Server. Что более важно, конкретных компонентов, что мы хотите tooleverage toomaximize hello производительности решения для горизонтального масштабирования.

Однако toomaintain hello масштаб и производительность хранилища данных SQL существует также являются некоторых функций, которые имеют различия в поведении и другим пользователям, которые не поддерживаются.

В этой статье объясняется, как tooimplement хранимые процедуры в хранилище данных SQL.

## <a name="introducing-stored-procedures"></a>Введение в хранимые процедуры
Хранимые процедуры — это отличный способ для инкапсуляции кода SQL; хранение его закрыть tooyour данных в хранилище данных hello. Путем инкапсуляции кода hello в управляемые единицы хранимых процедур помочь разработчикам модули различных своих решений; Облегчение многократному использованию больше кода. Каждая хранимая процедура может также принимать параметры toomake их еще более гибким.

Хранилище данных SQL предоставляет упрощенную и оптимизированную реализацию хранимых процедур. Hello Главное отличие tooSQL которой находится сервер, hello хранимой процедуры не предварительно скомпилированный код. В хранилищах данных мы интересует обычно менее hello времени компиляции. Очень важно правильно компактная кода hello хранимой процедуры при обработке больших объемов данных. Задача Hello — toosave часов, минут и секунд не в миллисекундах. Поэтому происходит гораздо больше полезных toothink хранимых процедур как контейнеры для логики SQL.     

При выполнении хранилище данных SQL инструкций SQL hello хранимой процедуры синтаксического анализа, переводятся и оптимизирован во время выполнения. Во время этого процесса каждая инструкция преобразуется в распределенные запросы. Hello кода SQL, который фактически выполняется для hello данных — другой toohello запроса, отправленного.

## <a name="nesting-stored-procedures"></a>Вложенные хранимые процедуры
Если хранимые процедуры вызывать другие хранимые процедуры или выполняется динамический код sql, то внутреннее hello хранимой процедуры или вызова кода, называется вложенным toobe.

Хранилище данных SQL поддерживает до 8 уровней вложенности. Это немного отличается tooSQL сервера. уровень вложенности Hello в SQL Server — 32.

Hello верхнего уровня вызова хранимой процедуры соответствует toonest уровня 1

```sql
EXEC prc_nesting
```
Если hello хранимой процедуры также делает другой EXEC вызова, то это приведет к увеличению too2 уровня вложенности hello

```sql
CREATE PROCEDURE prc_nesting
AS
EXEC prc_nesting_2  -- This call is nest level 2
GO
EXEC prc_nesting
```
Если вторая процедура hello затем выполняет некоторые динамического sql затем это приведет к увеличению too3 уровня вложенности hello

```sql
CREATE PROCEDURE prc_nesting_2
AS
EXEC sp_executesql 'SELECT 'another nest level'  -- This call is nest level 2
GO
EXEC prc_nesting
```

Примечание. Хранилище данных SQL не поддерживает @@NESTLEVEL. Вам потребуется tookeep за уровень вложенности самостоятельно. Однако маловероятно, ограничение уровня вложенности hello 8 выполнение будет остановлено, но если это сделать, вы должны toore рабочего кода и «сведение» его, чтобы он не превышает это ограничение.

## <a name="insertexecute"></a>INSERT..EXECUTE
Хранилище данных SQL не выполняет tooconsume hello результирующего набора хранимой процедуры с инструкцией INSERT. Однако существует другой подход, которым можно воспользоваться.

Можно найти toohello следующей статьей [временные таблицы] пример toodo это.

## <a name="limitations"></a>Ограничения
Существуют некоторые аспекты хранимых процедур Transact-SQL, которые не реализованы в хранилище данных SQL.

К ним относятся:

* временные хранимые процедуры;
* нумерованные хранимые процедуры;
* расширенные хранимые процедуры;
* хранимые процедуры CLR;
* возможность шифрования;
* возможность репликации;
* параметры с табличным значением;
* параметры только для чтения;
* параметры по умолчанию;
* контекст выполнения;
* инструкция Return.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные советы по разработке см. в статье [Проектные решения и методики программирования для хранилища данных SQL][development overview].

<!--Image references-->

<!--Article references-->
[временные таблицы]: ./sql-data-warehouse-tables-temporary.md#modularizing-code
[development overview]: ./sql-data-warehouse-overview-develop.md

<!--MSDN references-->
[nest level]: https://msdn.microsoft.com/library/ms187371.aspx

<!--Other Web references-->
