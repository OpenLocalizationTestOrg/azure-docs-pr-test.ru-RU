---
title: "aaaServer журналы в базе данных Azure для PostgreSQL | Документы Microsoft"
description: "Создание журналов запросов и ошибок в базе данных Azure для PostgreSQL."
services: postgresql
author: SaloniSonpal
ms.author: salonis
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 22575f3882ce67fe640952f0a8dbfd8dcb4b16fc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="server-logs-in-azure-database-for-postgresql"></a><span data-ttu-id="d9a7c-103">Журналы сервера в базе данных Azure для PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="d9a7c-103">Server Logs in Azure Database for PostgreSQL</span></span> 
<span data-ttu-id="d9a7c-104">База данных Azure для PostgreSQL создает журналы запросов и ошибок.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-104">Azure Database for PostgreSQL generates query and error logs.</span></span> <span data-ttu-id="d9a7c-105">Тем не менее журналы tootransaction доступа не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-105">However, access tootransaction logs is not supported.</span></span> <span data-ttu-id="d9a7c-106">Эти журналы могут быть используется tooidentify, устранение неполадок и исправить ошибки конфигурации и проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-106">These logs can be used tooidentify, troubleshoot, and repair configuration errors and sub-optimal performance.</span></span> <span data-ttu-id="d9a7c-107">Дополнительные сведения см. на странице [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) (Отчеты об ошибках и ведение журнала).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-107">For more information, see [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html).</span></span>

## <a name="access-server-logs"></a><span data-ttu-id="d9a7c-108">Доступ к журналам сервера</span><span class="sxs-lookup"><span data-stu-id="d9a7c-108">Access server logs</span></span>
<span data-ttu-id="d9a7c-109">Можно перечислить и загрузить с помощью портала Azure hello журналы ошибок сервера Azure PostgreSQL [Azure CLI](howto-configure-server-logs-using-cli.md) и API REST Azure.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-109">You can list and download Azure PostgreSQL server error logs using hello Azure Portal, [Azure CLI](howto-configure-server-logs-using-cli.md) and Azure REST APIs.</span></span>

## <a name="log-retention"></a><span data-ttu-id="d9a7c-110">Хранение журналов</span><span class="sxs-lookup"><span data-stu-id="d9a7c-110">Log retention</span></span>
<span data-ttu-id="d9a7c-111">Можно задать срок хранения hello журналы системы с помощью **журнала\_хранения\_период** параметр, связанный с сервером.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-111">You can set hello retention period for system logs using the **log\_retention\_period** parameter associated with your server.</span></span> <span data-ttu-id="d9a7c-112">Единица измерения Hello для этого параметра — дней (требуются tooconfirm).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-112">hello unit for this parameter is days (need tooconfirm).</span></span> <span data-ttu-id="d9a7c-113">значение по умолчанию Hello — три дня.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-113">hello default value is three days.</span></span> <span data-ttu-id="d9a7c-114">Hello максимальное значение составляет 7 дней.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-114">hello maximum value is 7 days.</span></span> <span data-ttu-id="d9a7c-115">Обратите внимание, что ваш сервер должен иметь достаточно hello toocontain хранилище, выделенное сохраняются файлы журналов.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-115">Note that your server must have enough allocated storage toocontain hello retained log files.</span></span>
<span data-ttu-id="d9a7c-116">файлы журналов Hello будет вращаться каждый час или размером 100 МБ, наступит раньше.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-116">hello log files will rotate every 1 hour or 100MB size, whichever comes first.</span></span>

## <a name="configure-logging-for-azure-postgresql-server"></a><span data-ttu-id="d9a7c-117">Настройка ведения журнала для сервера Azure PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="d9a7c-117">Configure logging for Azure PostgreSQL server</span></span>
<span data-ttu-id="d9a7c-118">Вы можете включить для своего сервера ведение журнала запросов и журнала ошибок.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-118">You can enable query logging and error logging for your server.</span></span> <span data-ttu-id="d9a7c-119">Журналы ошибок могут содержать сведения об автоматической очистке, подключениях и контрольных точках.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-119">Error logs can contain auto-vacuum, connection and checkpoints information.</span></span>

<span data-ttu-id="d9a7c-120">Чтобы включить ведение журнала запросов для экземпляра базы данных PostgreSQL, необходимо настроить два параметра сервера: log\_statement и log\_min\_duration\_statement.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-120">You can enable query logging for your PostgreSQL DB instance by setting two server parameters: log\_statement and log\_min\_duration\_statement.</span></span>

<span data-ttu-id="d9a7c-121">Hello **журнала\_инструкции** параметр определяет, какие инструкции SQL регистрируются.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-121">hello **log\_statement** parameter controls which SQL statements are logged.</span></span> <span data-ttu-id="d9a7c-122">Рекомендуется установить этот параметр слишком***все*** toolog все операторы; значение по умолчанию hello none (необходим tooconfirm).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-122">We recommend setting this parameter too***all*** toolog all statements; hello default value is none (need tooconfirm).</span></span>

<span data-ttu-id="d9a7c-123">Hello **журнала\_min\_длительность\_инструкции** параметр задает hello предел в миллисекундах toobe инструкции, в журнал.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-123">hello **log\_min\_duration\_statement** parameter sets hello limit in milliseconds of a statement toobe logged.</span></span> <span data-ttu-id="d9a7c-124">Регистрируются все инструкции SQL, выполняемых больше значения параметра hello.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-124">All SQL statements that run longer than hello parameter setting are logged.</span></span> <span data-ttu-id="d9a7c-125">Этот параметр является toominus отключено и 1 (-1) по умолчанию (необходимость tooconfirm).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-125">This parameter is disabled and set toominus 1 (-1) by default (need tooconfirm).</span></span> <span data-ttu-id="d9a7c-126">Включение этого параметра может быть полезным, когда требуется отследить в приложениях неоптимизированные запросы.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-126">Enabling this parameter can be helpful in tracking down unoptimized queries in your applications.</span></span>

<span data-ttu-id="d9a7c-127">Hello **журнала\_min\_сообщений** позволяет toocontrol, какие уровни сообщений записываются в журнал toohello сервера.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-127">hello **log\_min\_messages** allows you toocontrol which message levels are written toohello server log.</span></span> <span data-ttu-id="d9a7c-128">по умолчанию Hello — предупреждение.</span><span class="sxs-lookup"><span data-stu-id="d9a7c-128">hello default is WARNING.</span></span> <span data-ttu-id="d9a7c-129">(требуется tooconfirm)</span><span class="sxs-lookup"><span data-stu-id="d9a7c-129">(need tooconfirm)</span></span>

<span data-ttu-id="d9a7c-130">Дополнительные сведения об этих настройках см. в документации на странице [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) (Отчеты об ошибках и ведение журнала).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-130">For more information on these settings, see [Error Reporting and Logging](https://www.postgresql.org/docs/9.6/static/runtime-config-logging.html) documentation.</span></span> <span data-ttu-id="d9a7c-131">Чтобы настроить конкретно параметры сервера базы данных Azure для PostgreSQL, см. статью [Журналы сервера в базе данных Azure для PostgreSQL](concepts-server-logs.md).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-131">For particularly configuring Azure Database for PostgreSQL server parameters, see [Server Logs in Azure Database for PostgreSQL](concepts-server-logs.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d9a7c-132">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d9a7c-132">Next steps</span></span>
- <span data-ttu-id="d9a7c-133">см. журналы tooaccess, с помощью интерфейса командной строки Azure CLI [настроить и доступ журналы сервера, с помощью Azure CLI](howto-configure-server-logs-using-cli.md)</span><span class="sxs-lookup"><span data-stu-id="d9a7c-133">tooaccess logs using Azure CLI command line interface, see [Configure and access server logs using Azure CLI](howto-configure-server-logs-using-cli.md)</span></span>
- <span data-ttu-id="d9a7c-134">Дополнительные сведения о параметрах сервера см. в статье [Настройка параметров службы в базе данных Azure для PostgreSQL](howto-configure-server-parameters-using-cli.md).</span><span class="sxs-lookup"><span data-stu-id="d9a7c-134">For more information on server parameters, see [Customize server configuration parameters using Azure CLI](howto-configure-server-parameters-using-cli.md).</span></span>