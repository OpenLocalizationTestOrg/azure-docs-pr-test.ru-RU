---
title: "Правила брандмауэра сервера базы данных Azure для PostgreSQL | Документация Майкрософт"
description: "Описываются правила брандмауэра сервера базы данных Azure для PostgreSQL."
services: postgresql
author: jasonwhowell
ms.author: jasonh
manager: jhubbard
editor: jasonwhowell
ms.service: postgresql
ms.topic: article
ms.date: 05/10/2017
ms.openlocfilehash: 1d46a4434c483c3612a9a7b4cdef718d6dc3e765
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-database-for-postgresql-server-firewall-rules"></a><span data-ttu-id="5b12e-103">Правила брандмауэра сервера базы данных Azure для PostgreSQL</span><span class="sxs-lookup"><span data-stu-id="5b12e-103">Azure Database for PostgreSQL Server firewall rules</span></span>
<span data-ttu-id="5b12e-104">Брандмауэр не все сервера базы данных access tooyour, пока вы не укажете компьютеры, на которых есть разрешение.</span><span class="sxs-lookup"><span data-stu-id="5b12e-104">Firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="5b12e-105">Hello брандмауэр предоставляет серверу toohello доступ на основании hello, рассчитанные на IP-адреса каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="5b12e-105">hello firewall grants access toohello server based on hello originating IP address of each request.</span></span>
<span data-ttu-id="5b12e-106">tooconfigure брандмауэра, создать правила брандмауэра, которые указывают диапазон допустимых IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="5b12e-106">tooconfigure your firewall, you create firewall rules that specify ranges of acceptable IP addresses.</span></span> <span data-ttu-id="5b12e-107">Можно создавать правила брандмауэра на уровне сервера hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-107">You can create firewall rules at hello server level.</span></span>

<span data-ttu-id="5b12e-108">**Правила брандмауэра:** эти правила позволяют клиентам tooaccess всей базы данных Azure для сервера PostgreSQL, то есть все базы данных hello в hello на одном логическом сервере.</span><span class="sxs-lookup"><span data-stu-id="5b12e-108">**Firewall rules:** These rules enable clients tooaccess your entire Azure Database for PostgreSQL Server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="5b12e-109">Правила брандмауэра уровня сервера можно настроить с помощью hello портал Azure или Azure CLI команд.</span><span class="sxs-lookup"><span data-stu-id="5b12e-109">Server-level firewall rules can be configured by using hello Azure portal or using Azure CLI commands.</span></span> <span data-ttu-id="5b12e-110">правила брандмауэра уровня сервера toocreate, необходимо быть владельцем подписки hello или участником подписки.</span><span class="sxs-lookup"><span data-stu-id="5b12e-110">toocreate server-level firewall rules, you must be hello subscription owner or a subscription contributor.</span></span>

## <a name="firewall-overview"></a><span data-ttu-id="5b12e-111">Общие сведения о брандмауэре</span><span class="sxs-lookup"><span data-stu-id="5b12e-111">Firewall overview</span></span>
<span data-ttu-id="5b12e-112">Доступ tooyour все базы данных базы данных Azure для сервера PostgreSQL заблокирован брандмауэром hello по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="5b12e-112">All database access tooyour Azure Database for PostgreSQL server is blocked by hello firewall by default.</span></span> <span data-ttu-id="5b12e-113">toobegin с помощью сервера с другого компьютера необходимо toospecify один или более серверного уровня брандмауэра правила tooenable доступа tooyour сервера.</span><span class="sxs-lookup"><span data-stu-id="5b12e-113">toobegin using your server from another computer, you need toospecify one or more server-level firewall rules tooenable access tooyour server.</span></span> <span data-ttu-id="5b12e-114">Используйте toospecify правила брандмауэра hello, какой IP-адрес в диапазоне от tooallow Интернет hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-114">Use hello firewall rules toospecify which IP address ranges from hello Internet tooallow.</span></span> <span data-ttu-id="5b12e-115">Toohello доступа Azure веб-сайта портала сам он не подвержен влиянию hello правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="5b12e-115">Access toohello Azure portal website itself is not impacted by hello firewall rules.</span></span>
<span data-ttu-id="5b12e-116">Здравствуйте, попытки соединения из Интернета и Azure должны сначала пройти через брандмауэр hello до попадания базы данных PostgreSQL, как показано в hello, следующая схема:</span><span class="sxs-lookup"><span data-stu-id="5b12e-116">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your PostgreSQL Database, as shown in hello following diagram:</span></span>

![Поток пример того, как работает брандмауэр hello](media/concepts-firewall-rules/1-firewall-concept.png)

## <a name="connecting-from-hello-internet"></a><span data-ttu-id="5b12e-118">Подключение из Интернета hello</span><span class="sxs-lookup"><span data-stu-id="5b12e-118">Connecting from hello Internet</span></span>
<span data-ttu-id="5b12e-119">Правила брандмауэра уровня сервера в hello базы данных Azure для сервера PostgreSQL применяются tooall баз данных.</span><span class="sxs-lookup"><span data-stu-id="5b12e-119">Server-level firewall rules apply tooall databases on hello Azure Database for PostgreSQL server.</span></span> <span data-ttu-id="5b12e-120">Если в одном из диапазонов hello, указанных в правилах брандмауэра уровня сервера hello hello IP-адреса запроса hello, предоставляется возможность подключения hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-120">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span>
<span data-ttu-id="5b12e-121">Если IP-адреса hello hello запроса находится за пределами hello диапазонов, указанных в hello уровня базы данных или правила брандмауэра уровня сервера, происходит сбой запроса подключения hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-121">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>
<span data-ttu-id="5b12e-122">Например если приложение соединяется с драйвером JDBC для PostgreSQL, могут возникнуть ошибки попытка tooconnect при hello брандмауэр блокирует подключение hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-122">For example, if your application connects with JDBC driver for PostgreSQL, you may encounter this error attempting tooconnect when hello firewall is blocking hello connection.</span></span>
> <span data-ttu-id="5b12e-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span><span class="sxs-lookup"><span data-stu-id="5b12e-123">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: no pg\_hba.conf entry for host "123.45.67.890", user "adminuser", database "postgresql", SSL</span></span>

## <a name="programmatically-managing-firewall-rules"></a><span data-ttu-id="5b12e-124">Программное управление правилами брандмауэра</span><span class="sxs-lookup"><span data-stu-id="5b12e-124">Programmatically managing firewall rules</span></span>
<span data-ttu-id="5b12e-125">В дополнение к этому toohello портал Azure, могут быть правила брандмауэра управлять программным путем с помощью Azure CLI.</span><span class="sxs-lookup"><span data-stu-id="5b12e-125">In addition toohello Azure portal, firewall rules can be managed programmatically using Azure CLI.</span></span>
<span data-ttu-id="5b12e-126">Ознакомьтесь также со статьей [Создание правил брандмауэра базы данных Azure для PostgreSQL и управление ими с помощью Azure CLI](howto-manage-firewall-using-cli.md).</span><span class="sxs-lookup"><span data-stu-id="5b12e-126">See also [Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI](howto-manage-firewall-using-cli.md)</span></span>

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="5b12e-127">Устранение неполадок брандмауэра hello базы данных</span><span class="sxs-lookup"><span data-stu-id="5b12e-127">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="5b12e-128">Примите во внимание при toohello доступа к базе данных Microsoft Azure для службы сервера PostgreSQL работать не так, как предполагается, что следующие точки hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-128">Consider hello following points when access toohello Microsoft Azure Database for PostgreSQL Server service does not behave as you expect:</span></span>

* <span data-ttu-id="5b12e-129">**Список разрешенных toohello изменения не вступили в силу еще:** может быть как больше пяти минут задержки для изменения toohello базы данных Azure для эффекта tootake конфигурации брандмауэра сервера PostgreSQL.</span><span class="sxs-lookup"><span data-stu-id="5b12e-129">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure Database for PostgreSQL Server firewall configuration tootake effect.</span></span>

* <span data-ttu-id="5b12e-130">**Hello входа не имеет прав или неправильный пароль был использован:** hello toohello подключения базы данных Azure для сервера PostgreSQL — Если имени входа нет разрешений на hello базы данных Azure для PostgreSQL сервера или hello используется неверный пароль, запрещено.</span><span class="sxs-lookup"><span data-stu-id="5b12e-130">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure Database for PostgreSQL server or hello password used is incorrect, hello connection toohello Azure Database for PostgreSQL server is denied.</span></span> <span data-ttu-id="5b12e-131">Только создания параметра брандмауэра предоставляет клиентам возможность tooattempt подключении tooyour серверу; Каждый клиент должен предоставить необходимые учетные записи hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-131">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span>

<span data-ttu-id="5b12e-132">Например с помощью клиента JDBC, может появиться следующая ошибка hello.</span><span class="sxs-lookup"><span data-stu-id="5b12e-132">For example, using a JDBC client, hello following error may appear.</span></span>
> <span data-ttu-id="5b12e-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span><span class="sxs-lookup"><span data-stu-id="5b12e-133">java.util.concurrent.ExecutionException: java.lang.RuntimeException: org.postgresql.util.PSQLException: FATAL: password authentication failed for user "yourusername"</span></span>

* <span data-ttu-id="5b12e-134">**Динамический IP-адрес:** при наличии подключения к Интернету с динамическим IP-адресов и испытываете проблемы с прохождением через брандмауэр hello, может воспользоваться hello следующие решения:</span><span class="sxs-lookup"><span data-stu-id="5b12e-134">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>

* <span data-ttu-id="5b12e-135">Попросите поставщика услуг Интернета (ISP) для диапазона IP-адресов hello hello, доступа к базе данных Azure tooyour клиентских компьютеров, назначенных для сервера PostgreSQL, а затем добавьте hello диапазон IP-адресов в качестве правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="5b12e-135">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure Database for PostgreSQL Server, and then add hello IP address range as a firewall rule.</span></span>

* <span data-ttu-id="5b12e-136">Получить статический IP-адреса для клиентских компьютеров, а затем задать hello IP-адреса в правила брандмауэра.</span><span class="sxs-lookup"><span data-stu-id="5b12e-136">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="5b12e-137">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="5b12e-137">Next steps</span></span>
<span data-ttu-id="5b12e-138">Ниже перечислены статьи о создании правил брандмауэра уровня сервера и уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="5b12e-138">For articles on creating server-level and database-level firewall rules, see:</span></span>
* [<span data-ttu-id="5b12e-139">Создание и управление для правила брандмауэра PostgreSQL, с помощью портала Azure hello базы данных Azure</span><span class="sxs-lookup"><span data-stu-id="5b12e-139">Create and manage Azure Database for PostgreSQL firewall rules using hello Azure portal</span></span>](howto-manage-firewall-using-portal.md)
* [<span data-ttu-id="5b12e-140">Создание правил брандмауэра базы данных Azure для PostgreSQL и управление ими с помощью Azure CLI</span><span class="sxs-lookup"><span data-stu-id="5b12e-140">Create and manage Azure Database for PostgreSQL firewall rules using Azure CLI</span></span>](howto-manage-firewall-using-cli.md)