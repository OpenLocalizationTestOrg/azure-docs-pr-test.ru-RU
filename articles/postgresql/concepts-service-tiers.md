---
title: "Ценовые категории в базе данных Azure для PostgreSQL"
description: "Ценовые категории в базе данных Azure для PostgreSQL"
services: postgresql
author: kamathsun
ms.author: sukamat
manager: jhubbard
editor: jasonwhowell
ms.custom: mvc
ms.service: postgresql
ms.topic: article
ms.date: 05/31/2017
ms.openlocfilehash: 59ac187e50527517c402a5cc2aa871717dde5650
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="azure-database-for-postgresql-options-and-performance-understand-whats-available-in-each-pricing-tier"></a>Параметры и производительность базы данных Azure для PostgreSQL: возможности, доступные в каждой ценовой категории
При создании базы данных Azure для сервера PostgreSQL настройка выделяемых серверу ресурсов определяется тремя основными параметрами. Эти параметры влияют на производительность и масштаб сервера.
- Ценовой уровень
- Единицы вычислений
- Хранилище (ГБ)

В каждой ценовой категории есть диапазон уровней производительности (единицы вычислений), которые можно выбирать в зависимости от требований рабочей нагрузки. Чем выше уровень производительности, тем больше он предоставляет вашему серверу ресурсов, предназначенных для повышения пропускной способности. Уровень производительности сервера в ценовой категории можно изменить практически без простоя приложения.

> [!IMPORTANT]
> Пока служба находится в общедоступной предварительной версии, ей не предоставляется гарантированное соглашением об уровне обслуживания (SLA).

В базу данных Azure для сервера PostgreSQL можно включить одну или несколько баз данных. Можно создать по одной базе данных на каждом сервере, чтобы использовать все ресурсы, или несколько баз данных, чтобы предоставить общий доступ к ресурсам. 

## <a name="choose-a-pricing-tier"></a>Выбор ценовой категории
В предварительной версии базы данных Azure для PostgreSQL предлагается две ценовые категории: "Базовая" и "Стандартная". Категория "Премиум" еще недоступна, но ожидается в ближайшее время. 

В таблице ниже приведены примеры ценовых категорий, которые лучше всего подходят для рабочих нагрузок различных приложений.

| Ценовой уровень | Целевые рабочие нагрузки |
| :----------- | :----------------|
| Basic | Лучше всего подходит для небольших рабочих нагрузок, при которых требуется увеличение числа единиц вычислений и хранения, но не требуется гарантированное число операций ввода-вывода в секунду. В качестве примера можно привести серверы, используемые для разработки или тестирования, или небольшие редко используемые приложения. |
| Стандартная | Идеально подходит для облачных приложений, которым необходимо гарантированное число операций ввода-вывода в секунду с высокой пропускной способностью. В качестве примера можно привести аналитические или веб-приложения. |
| Премиум | Лучше всего подходит для рабочих нагрузок, требующих низкой задержки для транзакций и операций ввода-вывода. Поддерживает наибольшее число параллельных пользователей. Подходит для баз данных, поддерживающих критически важные приложения.<br />Ценовая категория "Премиум" недоступна в предварительной версии. |

Чтобы выбрать ценовую категорию, сначала определите, требуется ли для ваших рабочих нагрузок гарантированное число операций ввода-вывода в секунду. Если требуется, используйте ценовую категорию "Стандартный".

| **Возможности в пределах ценовых категорий** | **базовая;** | **Стандартный** |
| :------------------------ | :-------- | :----------- |
| Максимальное число единиц вычислений | 100 | 800 | 
| Максимальный общий объем хранилища | 1 TБ | 1 TБ | 
| Гарантированное число операций ввода-вывода в секунду, поддерживаемое хранилищем | Недоступно | Да | 
| Максимальное число операций ввода-вывода в секунду, поддерживаемое хранилищем | Недоступно | 3000 | 
| Срок хранения резервной копии | 7 дней | 35 дней | 

В предварительной версии вы не можете изменять ценовые категории после создания сервера. В будущем станет возможно изменить ценовую категорию для сервера с более высокой на более низкую и наоборот.

## <a name="understand-the-price"></a>Общие сведения о ценах
Создавая базу данных Azure для PostgreSQL на [портале Azure](https://portal.azure.com/#create/Microsoft.PostgreSQLServer), щелкните колонку **Ценовая категория**. Отобразятся ежемесячные расходы на основе выбранных параметров. Если у вас нет подписки Azure, для расчета цены можно воспользоваться калькулятором цен Azure. На сайте с [калькулятором цен Azure](https://azure.microsoft.com/pricing/calculator/) нажмите кнопку **Добавить элементы**, разверните категорию **Базы данных** и выберите **База данных Azure для PostgreSQL**, чтобы настроить параметры.

## <a name="choose-a-performance-level-compute-units"></a>Выбор уровня производительности (единицы вычислений)
После определения ценовой категории для базы данных Azure для сервера PostgreSQL необходимо определить уровень производительности, выбрав необходимое число единиц измерений. Как правило, 200 и 400 единиц вычислений являются хорошей отправной точкой для приложений, в которых веб-нагрузки или аналитика требуют обработки большого числа параллельных пользователей. Затем по мере необходимости число единиц вычислений можно поэтапно корректировать. 

Единицы вычислений — это единицы измерения пропускной способности ЦП при обработке данных, которые гарантированно доступны каждому отдельному серверу базы данных Azure для PostgreSQL. Единица вычислений — это объединенный показатель ресурсов ЦП и памяти.  Дополнительные сведения см. в статье [Сведения о единицах вычислений](concepts-compute-unit-and-storage.md)

### <a name="basic-pricing-tier-performance-levels"></a>Уровни производительности ценовой категории "Базовый":

| **Уровень производительности** | **50** | **100** |
| :-------------------- | :----- | :------ |
| Максимальное число единиц вычислений | 50 | 100 |
| Включенный размер хранилища | 50 ГБ | 50 ГБ |
| Максимальный размер хранилища сервера\* | 1 TБ | 1 TБ |

### <a name="standard-pricing-tier-performance-levels"></a>Уровни производительности ценовой категории "Стандартный":

| **Уровень производительности** | **100** | **200** | **400** | **800** |
| :-------------------- | :------ | :------ | :------ | :------ |
| Максимальное число единиц вычислений | 100 | 200 | 400 | 800 |
| Включенный размер хранилища и подготовленные операции ввода-вывода в секунду | 125 ГБ,<br/> 375 операций ввода-вывода в секунду | 125 ГБ,<br/> 375 операций ввода-вывода в секунду | 125 ГБ,<br/> 375 операций ввода-вывода в секунду | 125 ГБ,<br/> 375 операций ввода-вывода в секунду |
| Максимальный размер хранилища сервера\* | 1 TБ | 1 TБ | 1 TБ | 1 TБ |
| Максимальное число подготовленных операций ввода-вывода в секунду на сервере | 3 000 операций ввода-вывода в секунду | 3 000 операций ввода-вывода в секунду | 3 000 операций ввода-вывода в секунду | 3 000 операций ввода-вывода в секунду |
| Максимальное число подготовленных операций ввода-вывода в секунду на сервере на каждый ГБ | Зафиксировано 3 операции ввода-вывода в секунду на каждый ГБ | Зафиксировано 3 операции ввода-вывода в секунду на каждый ГБ | Зафиксировано 3 операции ввода-вывода в секунду на каждый ГБ | Зафиксировано 3 операции ввода-вывода в секунду на каждый ГБ |

\* Максимальный размер хранилища сервера соответствует максимальному подготовленному размеру хранилища вашего сервера.

## <a name="storage"></a>Хранилище 
Конфигурация хранилища определяет объем доступной емкости хранилища базы данных Azure для сервера PostgreSQL. Хранилище, используемое службой, включает файлы базы данных, журналы транзакций и журналы сервера PostgreSQL. При выборе конфигурации хранилища следует учесть размер хранилища, необходимый для размещения баз данных, и требования производительности (число операций ввода-вывода в секунду).

В каждой ценовой категории некоторая емкость хранилища включена в качестве минимума и отмечена в предыдущей таблице как "Включенный размер хранилища". Дополнительную емкость хранилища можно добавить при создании сервера с шагом приращения 125 ГБ вплоть до максимально доступного размера хранилища. Дополнительную емкость хранилища можно настроить независимо от настройки единиц вычислений. Цена изменяется в зависимости от выбранного размера хранилища.

Конфигурация операций ввода-вывода в секунду на каждом уровне производительности связана с выбранной ценовой категорией и размером хранилища. Для ценовой категории "Базовый" число операций ввода-вывода в секунду не гарантируется. В ценовой категории "Стандартный" число операций ввода-вывода в секунду масштабируется пропорционально максимальному размеру хранилища в фиксированном отношении 3:1. Хранилище объемом 125 ГБ гарантирует 375 подготовленных операций ввода-вывода в секунду с объемом ввода-вывода до 256 КБ. Вы можете выбрать дополнительное хранилище размером максимум до 1 ТБ, чтобы гарантировать 3000 подготовленных операций ввода-вывода в секунду.

Чтобы измерить потребление хранилища и число операций ввода-вывода в секунду, отслеживайте граф метрик на портале Azure или используйте команды Azure CLI. Следует отслеживать такие метрики, как размер хранилища, процент хранилища, используемое хранилище и процент операций ввода-вывода данных.

>[!IMPORTANT]
> В предварительной версии выберите объем памяти во время создания сервера. Изменение размера хранилища на имеющемся сервере пока что не поддерживается. 

## <a name="scaling-a-server-up-or-down"></a>Масштабирование сервера
Сначала выберите ценовую категорию и уровень производительности во время создания базы данных Azure для PostgreSQL. Затем можно динамически масштабировать единицы вычислений в диапазоне одной ценовой категории. На портале Azure установите единицы вычислений в колонке ценовой категории сервера или задайте их в скрипте по примеру в статье [Мониторинг и масштабирование отдельного сервера PostgreSQL с помощью Azure CLI](scripts/sample-scale-server-up-or-down.md).

Масштабирование единиц вычислений происходит независимо от выбранного максимального размера хранилища.

Во время изменения уровня производительности базы данных создается реплика исходной базы данных с новым уровнем производительности, после чего устанавливаются подключения к реплике. Во время этого процесса данные не теряются. В течение короткого периода, когда производится переподключение к реплике, соединения с базой данных становятся неактивны, поэтому некоторые текущие транзакции могут откатиться. Этот период может быть разным, но обычно он не превышает 4 секунд, а в более чем 99 % случаев его длительность составляет менее 30 секунд. Если в момент отключения подключений выполняется большое количество транзакций, этот период может быть длиннее.

Длительность всего процесса масштабирования зависит от размера и ценовой категории сервера до и после изменения. Например, изменение единиц вычислений в ценовой категории "Стандартный" для сервера завершится в течение нескольких минут. Новые свойства сервера не применяются до тех пор, пока изменение не завершится.

## <a name="next-steps"></a>Дальнейшие действия
- Дополнительные сведения о единицах вычислений и единицах хранения см. в [этой статье](concepts-compute-unit-and-storage.md).
- Дополнительные сведения о мониторинге и масштабировании отдельного сервера PostgreSQL с помощью Azure CLI см. в [этой статье](scripts/sample-scale-server-up-or-down.md).
