---
title: "Шаблон приложения Web aaaMulti клиента | Документы Microsoft"
description: "Найти архитектуры обзоры и принципы разработки, которые описывают, каким образом tooimplement многопользовательское веб-приложения в Azure."
services: 
documentationcenter: .net
author: wadepickett
manager: wpickett
editor: 
ms.assetid: 4f0281d2-1555-42b0-a99d-1222fade0b0f
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/05/2015
ms.author: wpickett
ms.openlocfilehash: 3b7822c8ca4aa50d295a174973ae4746c230ba66
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="multitenant-applications-in-azure"></a><span data-ttu-id="1ae96-103">Мультитенантные приложения Azure</span><span class="sxs-lookup"><span data-stu-id="1ae96-103">Multitenant Applications in Azure</span></span>
<span data-ttu-id="1ae96-104">Многопользовательского приложения — это общий ресурс, которое позволяет отдельные пользователи, или «клиенты», приложение tooview hello так, будто он был свои собственные.</span><span class="sxs-lookup"><span data-stu-id="1ae96-104">A multitenant application is a shared resource that allows separate users, or "tenants," tooview hello application as though it was their own.</span></span> <span data-ttu-id="1ae96-105">Типичный сценарий, которая поддается tooa многопользовательского приложения является одним где все пользователи hello приложение может обратиться toocustomize взаимодействие с пользователем hello, но нет hello же базовых требований бизнеса.</span><span class="sxs-lookup"><span data-stu-id="1ae96-105">A typical scenario that lends itself tooa multitenant application is one in which all users of hello application may wish toocustomize hello user experience but otherwise have hello same basic business requirements.</span></span> <span data-ttu-id="1ae96-106">Примерами крупных мультитенатных приложений являются Office 365, Outlook.com и visualstudio.com.</span><span class="sxs-lookup"><span data-stu-id="1ae96-106">Examples of large multitenant applications are Office 365, Outlook.com, and visualstudio.com.</span></span>

<span data-ttu-id="1ae96-107">С точки зрения поставщика приложения hello преимущества поддержки главным образом связаны toooperational и свою производительность.</span><span class="sxs-lookup"><span data-stu-id="1ae96-107">From an application provider's perspective, hello benefits of multitenancy mostly relate toooperational and cost efficiencies.</span></span> <span data-ttu-id="1ae96-108">Одна версия приложения требованиям hello много клиентов или заказчиков, позволяя консолидации системы задач администрирования, таких как мониторинг, Настройка производительности, обслуживания программного обеспечения и резервные копии данных.</span><span class="sxs-lookup"><span data-stu-id="1ae96-108">One version of your application can meet hello needs of many tenants/customers, allowing consolidation of system administration tasks such as monitoring, performance tuning, software maintenance, and data backups.</span></span>

<span data-ttu-id="1ae96-109">следующие Hello список hello наиболее важных целей и требований с точки зрения поставщика.</span><span class="sxs-lookup"><span data-stu-id="1ae96-109">hello following provides a list of hello most significant goals and requirements from a provider's perspective.</span></span>

* <span data-ttu-id="1ae96-110">**Подготовка**: должно быть новых клиентов может tooprovision для приложения hello.</span><span class="sxs-lookup"><span data-stu-id="1ae96-110">**Provisioning**: You must be able tooprovision new tenants for hello application.</span></span>  <span data-ttu-id="1ae96-111">Для многопользовательских приложений с большим числом клиентов, это обычно потребует tooautomate этот процесс, Включение самостоятельного подготовки.</span><span class="sxs-lookup"><span data-stu-id="1ae96-111">For multitenant applications with a large number of tenants, it is usually necessary tooautomate this process by enabling self-service provisioning.</span></span>
* <span data-ttu-id="1ae96-112">**Простота модификации**: необходимо будет tooupgrade приложения hello и выполнить другие задачи обслуживания, пока он используется несколькими пользователями.</span><span class="sxs-lookup"><span data-stu-id="1ae96-112">**Maintainability**: You must be able tooupgrade hello application and perform other maintenance tasks while multiple tenants are using it.</span></span>
* <span data-ttu-id="1ae96-113">**Наблюдение за**: вы могли toomonitor hello приложения на все время tooidentify необходимо любые проблемы и tootroubleshoot их.</span><span class="sxs-lookup"><span data-stu-id="1ae96-113">**Monitoring**: You must be able toomonitor hello application at all times tooidentify any problems and tootroubleshoot them.</span></span> <span data-ttu-id="1ae96-114">Включает в себя проверку использования приложения hello каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="1ae96-114">This includes monitoring how each tenant is using hello application.</span></span>

<span data-ttu-id="1ae96-115">Правильно реализованная многопользовательского приложения предоставляет следующие hello преимущества toousers.</span><span class="sxs-lookup"><span data-stu-id="1ae96-115">A properly implemented multitenant application provides hello following benefits toousers.</span></span>

* <span data-ttu-id="1ae96-116">**Изоляция**: hello действия отдельных клиентов не влияют на использование hello приложения hello другими клиентами.</span><span class="sxs-lookup"><span data-stu-id="1ae96-116">**Isolation**: hello activities of individual tenants do not affect hello use of hello application by other tenants.</span></span> <span data-ttu-id="1ae96-117">Клиенты не могут получить доступ к данным друг друга.</span><span class="sxs-lookup"><span data-stu-id="1ae96-117">Tenants cannot access each other's data.</span></span> <span data-ttu-id="1ae96-118">Toohello клиента отображается в том случае, как будто они имеют использовать приложение hello.</span><span class="sxs-lookup"><span data-stu-id="1ae96-118">It appears toohello tenant as though they have exclusive use of hello application.</span></span>
* <span data-ttu-id="1ae96-119">**Доступность**: отдельных клиентов будет постоянно доступное toobe приложения hello возможно с гарантии, определенного в соглашении об уровне ОБСЛУЖИВАНИЯ.</span><span class="sxs-lookup"><span data-stu-id="1ae96-119">**Availability**: Individual tenants want hello application toobe constantly available, perhaps with guarantees defined in an SLA.</span></span> <span data-ttu-id="1ae96-120">Опять же hello действий других клиентов не должна влиять на доступность hello приложения hello.</span><span class="sxs-lookup"><span data-stu-id="1ae96-120">Again, hello activities of other tenants should not affect hello availability of hello application.</span></span>
* <span data-ttu-id="1ae96-121">**Масштабируемость**: приложение hello масштабирует запросу hello toomeet отдельных клиентов.</span><span class="sxs-lookup"><span data-stu-id="1ae96-121">**Scalability**: hello application scales toomeet hello demand of individual tenants.</span></span> <span data-ttu-id="1ae96-122">Hello присутствия и действия других клиентов не должно влиять hello производительность приложения hello.</span><span class="sxs-lookup"><span data-stu-id="1ae96-122">hello presence and actions of other tenants should not affect hello performance of hello application.</span></span>
* <span data-ttu-id="1ae96-123">**Затраты на**: затраты на предшествуют управлением выделенный приложение одного клиента, поскольку позволяет Многопользовательские приложения hello общий доступ к ресурсам.</span><span class="sxs-lookup"><span data-stu-id="1ae96-123">**Costs**: Costs are lower than running a dedicated, single-tenant application because multi-tenancy enables hello sharing of resources.</span></span>
* <span data-ttu-id="1ae96-124">**Возможность настройки**.</span><span class="sxs-lookup"><span data-stu-id="1ae96-124">**Customizability**.</span></span> <span data-ttu-id="1ae96-125">Hello возможность toocustomize приложение hello для отдельного клиента различными способами, например добавление или удаление компонентов, изменение цветов и эмблемы или даже добавлять свои собственные кода или сценария.</span><span class="sxs-lookup"><span data-stu-id="1ae96-125">hello ability toocustomize hello application for an individual tenant in various ways such as adding or removing features, changing colors and logos, or even adding their own code or script.</span></span>

<span data-ttu-id="1ae96-126">Иными словами, при наличии учесть множество факторов, которые необходимо выполнить в учетной записи tooprovide высокомасштабируемых службы, также существует несколько целей hello и требований, которые имеют общие toomany многопользовательских приложений.</span><span class="sxs-lookup"><span data-stu-id="1ae96-126">In short, while there are many considerations that you must take into account tooprovide a highly scalable service, there are also a number of hello goals and requirements that are common toomany multitenant applications.</span></span> <span data-ttu-id="1ae96-127">Некоторые могут быть не подходит для конкретных сценариев и важность hello отдельных цели и требования будут различаться в каждом сценарии.</span><span class="sxs-lookup"><span data-stu-id="1ae96-127">Some may not be relevant in specific scenarios, and hello importance of individual goals and requirements will differ in each scenario.</span></span> <span data-ttu-id="1ae96-128">Как поставщик многопользовательского приложения hello вы также будете иметь цели и требования, такие как собрания hello клиентов цели и требования, рентабельности, выставления счетов, несколько уровней обслуживания, подготовки, удобство поддержки мониторинга и автоматизации.</span><span class="sxs-lookup"><span data-stu-id="1ae96-128">As a provider of hello multitenant application, you will also have goals and requirements such as, meeting hello tenants' goals and requirements, profitability, billing, multiple service levels, provisioning, maintainability monitoring, and automation.</span></span>

<span data-ttu-id="1ae96-129">Дополнительные сведения о дополнительных аспектах разработки мультитенантного приложения см. в статье [Размещение мультитенантного приложения в Azure][Hosting a Multi-Tenant Application on Azure].</span><span class="sxs-lookup"><span data-stu-id="1ae96-129">For more information on additional design considerations of a multitenant application, see [Hosting a Multi-Tenant Application on Azure][Hosting a Multi-Tenant Application on Azure].</span></span> <span data-ttu-id="1ae96-130">Сведения о распространенных шаблонах архитектуры данных для мультитенантных приложений базы данных SaaS см. в статье [Шаблоны разработки для мультитенантных приложений SaaS с использованием базы данных Azure SQL](sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md).</span><span class="sxs-lookup"><span data-stu-id="1ae96-130">For information on common data architecture patterns of multi-tenant software-as-a-service (SaaS) database applications, see [Design Patterns for Multi-tenant SaaS Applications with Azure SQL Database](sql-database/sql-database-design-patterns-multi-tenancy-saas-applications.md).</span></span> 

<span data-ttu-id="1ae96-131">Azure предоставляет множество функций, позволяющих tooaddress hello ключевых проблем, возникающих при проектировании многопользовательской системы.</span><span class="sxs-lookup"><span data-stu-id="1ae96-131">Azure provides many features that allow you tooaddress hello key problems encountered when designing a multitenant system.</span></span>

<span data-ttu-id="1ae96-132">**Изоляция**</span><span class="sxs-lookup"><span data-stu-id="1ae96-132">**Isolation**</span></span>

* <span data-ttu-id="1ae96-133">Сегментация клиентов веб-сайта с помощью заголовков узла как при использовании SSL-подключений, так и при их отсутствии.</span><span class="sxs-lookup"><span data-stu-id="1ae96-133">Segment Website Tenants by Host Headers with or without SSL communication</span></span>
* <span data-ttu-id="1ae96-134">Сегментация клиентов веб-сайтов с помощью параметров запросов.</span><span class="sxs-lookup"><span data-stu-id="1ae96-134">Segment Website Tenants by Query Parameters</span></span>
* <span data-ttu-id="1ae96-135">Веб-службы в рабочих ролях.</span><span class="sxs-lookup"><span data-stu-id="1ae96-135">Web Services in Worker Roles</span></span>
  * <span data-ttu-id="1ae96-136">Рабочие роли</span><span class="sxs-lookup"><span data-stu-id="1ae96-136">Worker Roles.</span></span> <span data-ttu-id="1ae96-137">как правило, обрабатывать данные на hello серверной части приложения.</span><span class="sxs-lookup"><span data-stu-id="1ae96-137">that typically process data on hello backend of an application.</span></span>
  * <span data-ttu-id="1ae96-138">Веб-ролей, которые обычно являются hello внешнего интерфейса для приложений.</span><span class="sxs-lookup"><span data-stu-id="1ae96-138">Web Roles that typically act as hello frontend for applications.</span></span>

<span data-ttu-id="1ae96-139">**Хранилище**</span><span class="sxs-lookup"><span data-stu-id="1ae96-139">**Storage**</span></span>

<span data-ttu-id="1ae96-140">Управление данными, такие как службы хранилища Azure или база данных SQL Azure, например hello служба, которая предоставляет службы для хранения больших объемов неструктурированных данных таблиц и hello службы BLOB-объектов, который предоставляет службы toostore большие объемы неструктурированных текстовых или двоичные данные, такие как видео, аудио и изображения.</span><span class="sxs-lookup"><span data-stu-id="1ae96-140">Data management such as Azure SQL Database or Azure Storage services such as hello Table service which provides services for storage of large amounts of unstructured data and hello Blob service which provides services toostore large amounts of unstructured text or binary data such as video, audio and images.</span></span>

* <span data-ttu-id="1ae96-141">Обеспечение защиты мультитенантных данных в базе данных SQL в соответствии с учетными данными входа каждого клиента на сервер SQL Server.</span><span class="sxs-lookup"><span data-stu-id="1ae96-141">Securing Multitenant Data in SQL Database appropriate per-tenant SQL Server logins.</span></span>
* <span data-ttu-id="1ae96-142">Использование таблиц Azure для приложения ресурсов, указав политику доступа на уровне контейнера, можно hello возможность tooadjust разрешения без необходимости tooissue новый URL-адреса для hello ресурсов, защищенных подписями коллективного доступа.</span><span class="sxs-lookup"><span data-stu-id="1ae96-142">Using Azure Tables for Application Resources By specifying a container level access policy, you can hello ability tooadjust permissions without having tooissue new URL's for hello resources protected with shared access signatures.</span></span>
* <span data-ttu-id="1ae96-143">Очереди Azure для приложения Azure ресурсы очередей, часто используемые toodrive обработки от имени клиентов, но может также быть используется toodistribute действия, необходимые для подготовки и управления.</span><span class="sxs-lookup"><span data-stu-id="1ae96-143">Azure Queues for Application Resources Azure queues are commonly used toodrive processing on behalf of tenants, but may also be used toodistribute work required for provisioning or management.</span></span>
* <span data-ttu-id="1ae96-144">Очереди Service Bus для ресурсов приложения, tooa Push-уведомлений рабочих общие службы, можно использовать одной очереди, где каждый отправитель клиента только имеет очереди toothat toopush разрешения (как на основе утверждений, выданных ACS) при только получатели службы hello hello иметь разрешения toopull из hello очереди hello данные поступают из нескольких клиентов.</span><span class="sxs-lookup"><span data-stu-id="1ae96-144">Service Bus Queues for Application Resources that pushes work tooa shared a service, you can use a single queue where each tenant sender only has permissions (as derived from claims issued from ACS) toopush toothat queue, while only hello receivers from hello service have permission toopull from hello queue hello data coming from multiple tenants.</span></span>

<span data-ttu-id="1ae96-145">**Службы подключения и безопасности**</span><span class="sxs-lookup"><span data-stu-id="1ae96-145">**Connection and Security Services**</span></span>

* <span data-ttu-id="1ae96-146">Azure Service Bus, инфраструктура обмена сообщениями, который располагается между приложениями, позволяя им tooexchange сообщений в слабо связанным образом для улучшенная масштабируемость и отказоустойчивость.</span><span class="sxs-lookup"><span data-stu-id="1ae96-146">Azure Service Bus, a messaging infrastructure that sits between applications allowing them tooexchange messages in a loosely coupled way for improved scale and resiliency.</span></span>

<span data-ttu-id="1ae96-147">**Сетевые службы**</span><span class="sxs-lookup"><span data-stu-id="1ae96-147">**Networking Services**</span></span>

<span data-ttu-id="1ae96-148">Azure предоставляет несколько сетевых служб, поддерживающих проверку подлинности и повышающих управляемость размещенных приложений.</span><span class="sxs-lookup"><span data-stu-id="1ae96-148">Azure provides several networking services that support authentication, and improve manageability of your hosted applications.</span></span> <span data-ttu-id="1ae96-149">Эти службы включают hello следующее:</span><span class="sxs-lookup"><span data-stu-id="1ae96-149">These services include hello following:</span></span>

* <span data-ttu-id="1ae96-150">Виртуальная сеть Azure позволяет подготавливать виртуальные частные сети (VPN) в Azure, управлять ими, а также обеспечить безопасный канал с локальной ИТ-инфраструктурой.</span><span class="sxs-lookup"><span data-stu-id="1ae96-150">Azure Virtual Network lets you provision and manage virtual private networks (VPNs) in Azure as well as securely link these with on-premises IT infrastructure.</span></span>
* <span data-ttu-id="1ae96-151">Диспетчер трафика виртуальных сетей позволяет tooload баланс входящий трафик через Azure нескольких размещенных служб, они выполняются в hello одного центра обработки данных или в разных центрах обработки данных вокруг Здравствуй, мир.</span><span class="sxs-lookup"><span data-stu-id="1ae96-151">Virtual Network Traffic Manager allows you tooload balance incoming traffic across multiple hosted Azure services whether they're running in hello same datacenter or across different datacenters around hello world.</span></span>
* <span data-ttu-id="1ae96-152">Azure Active Directory (Azure AD) — это современная служба на основе интерфейса REST, которая предоставляет возможности для управления идентификацией и доступом в облачных приложениях.</span><span class="sxs-lookup"><span data-stu-id="1ae96-152">Azure Active Directory (Azure AD) is a modern, REST-based service that provides identity management and access control capabilities for your cloud applications.</span></span> <span data-ttu-id="1ae96-153">С помощью Azure AD для ресурсов приложения Azure AD tooprovides простой способ проверки подлинности и авторизации пользователей toogain доступа tooyour веб-приложений и служб при hello функции проверки подлинности и авторизации toobe исходить из вашей код.</span><span class="sxs-lookup"><span data-stu-id="1ae96-153">Using Azure AD for Application Resources Azure AD tooprovides an easy way of authenticating and authorizing users toogain access tooyour web applications and services while allowing hello features of authentication and authorization toobe factored out of your code.</span></span>
* <span data-ttu-id="1ae96-154">Azure Service Bus предоставляет возможность безопасного обмена сообщениями и передачи данных для распределенных и гибридных приложений, например связи между размещенными в Azure приложениями и локальными приложениями и службами без необходимости в использовании комплексных инфраструктур брандмауэра и безопасности.</span><span class="sxs-lookup"><span data-stu-id="1ae96-154">Azure Service Bus provides a secure messaging and data flow capability for distributed and hybrid applications, such as communication between Azure hosted applications and on-premises applications and services, without requiring complex firewall and security infrastructures.</span></span> <span data-ttu-id="1ae96-155">Использование ретрансляции Service Bus для ресурсов приложения toohello служб, которые представляются как конечные точки могут входить toohello клиента (например, размещенных за пределами hello системы, таких как в локальной среде) или это могут быть службы, специально выделенные (hello) клиента так как конфиденциальные, специальную эти данные передаются между ними).</span><span class="sxs-lookup"><span data-stu-id="1ae96-155">Using Service Bus Relay for Application Resources toohello services that are exposed as endpoints may belong toohello tenant (for example, hosted outside of hello system, such as on-premises), or they may be services provisioned specifically for hello tenant (because sensitive, tenant-specific data travels across them).</span></span>

<span data-ttu-id="1ae96-156">**Подготовка ресурсов**</span><span class="sxs-lookup"><span data-stu-id="1ae96-156">**Provisioning Resources**</span></span>

<span data-ttu-id="1ae96-157">Azure предоставляет ряд способов подготовки новых клиентов для приложения hello.</span><span class="sxs-lookup"><span data-stu-id="1ae96-157">Azure provides a number of ways provision new tenants for hello application.</span></span> <span data-ttu-id="1ae96-158">Для многопользовательских приложений с большим числом клиентов, это обычно потребует tooautomate этот процесс, Включение самостоятельного подготовки.</span><span class="sxs-lookup"><span data-stu-id="1ae96-158">For multitenant applications with a large number of tenants, it is usually necessary tooautomate this process by enabling self-service provisioning.</span></span>

* <span data-ttu-id="1ae96-159">Рабочие роли позволяют tooprovision и Отмена подготовки ресурсов клиентам (например, когда новый клиент регистрируется или отменяет), собирать метрики для метрик использования и управления согласно установленному расписанию определенных масштаб или в ответ toohello превышение пороговых значений ключа индикаторы производительности.</span><span class="sxs-lookup"><span data-stu-id="1ae96-159">Worker roles allow you tooprovision and de-provision per tenant resources (such as when a new tenant signs-up or cancels), collect metrics for metering use, and manage scale following a certain schedule or in response toohello crossing of thresholds of key performance indicators.</span></span> <span data-ttu-id="1ae96-160">Эта же роль также могут использоваться toopush об обновлениях toohello решения для горизонтального.</span><span class="sxs-lookup"><span data-stu-id="1ae96-160">This same role may also be used toopush out updates and upgrades toohello solution.</span></span>
* <span data-ttu-id="1ae96-161">Больших двоичных объектов Azure может быть используется tooprovision вычислений или ресурсов предварительно инициализированных хранилища для новых клиентов, то же время предоставляя контейнера доступ на уровне политики tooprotect hello вычислений пакетов служб, образов виртуальных жестких ДИСКОВ и другие ресурсы.</span><span class="sxs-lookup"><span data-stu-id="1ae96-161">Azure Blobs can be used tooprovision compute or pre-initialized storage resources for new tenants while providing container level access policies tooprotect hello compute service Packages, VHD images and other resources.</span></span>
* <span data-ttu-id="1ae96-162">Возможности подготовки ресурсов баз данных SQL для клиентов включают следующие:</span><span class="sxs-lookup"><span data-stu-id="1ae96-162">Options for provisioning SQL Database resources for a tenant include:</span></span>
  
  * <span data-ttu-id="1ae96-163">DDL в сценариях или в виде встроенных ресурсов в сборках</span><span class="sxs-lookup"><span data-stu-id="1ae96-163">DDL in scripts or embedded as resources within assemblies</span></span>
  * <span data-ttu-id="1ae96-164">Пакеты SQL Server 2008 R2, развернутые программными средствами.</span><span class="sxs-lookup"><span data-stu-id="1ae96-164">SQL Server 2008 R2 DAC Packages deployed programmatically.</span></span>
  * <span data-ttu-id="1ae96-165">Копирование из главной справочной базы данных</span><span class="sxs-lookup"><span data-stu-id="1ae96-165">Copying from a master reference database</span></span>
  * <span data-ttu-id="1ae96-166">Использование баз данных импорта и экспорта, новые tooprovision базы данных из файла.</span><span class="sxs-lookup"><span data-stu-id="1ae96-166">Using database Import and Export tooprovision new databases from a file.</span></span>

<!--links-->

[Hosting a Multi-Tenant Application on Azure]: http://msdn.microsoft.com/library/hh534480.aspx
[Designing Multitenant Applications on Azure]: http://msdn.microsoft.com/library/windowsazure/hh689716
