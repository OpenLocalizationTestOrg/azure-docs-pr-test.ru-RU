---
title: "Вариант использования фабрики данных: система рекомендации товаров"
description: "Сведения о решении, в котором используется фабрика данных Azure и другие службы."
services: data-factory
documentationcenter: 
author: sharonlo101
manager: jhubbard
editor: monicar
ms.assetid: 6f1523c7-46c3-4b8d-9ed6-b847ae5ec4ae
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/14/2017
ms.author: shlo
ms.openlocfilehash: 697e7814f0e7c4407728e6623c8f36a6c4abeb56
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="use-case---product-recommendations"></a><span data-ttu-id="83c9e-103">Вариант использования: система рекомендации товаров</span><span class="sxs-lookup"><span data-stu-id="83c9e-103">Use Case - Product Recommendations</span></span>
<span data-ttu-id="83c9e-104">Фабрика данных Azure — одна из многочисленных служб, используемых для внедрения набора аналитических инструментов Cortana Intelligence Suite для ускорителей решений.</span><span class="sxs-lookup"><span data-stu-id="83c9e-104">Azure Data Factory is one of many services used to implement the Cortana Intelligence Suite of solution accelerators.</span></span>  <span data-ttu-id="83c9e-105">Подробные сведения об этом наборе см. на странице [Cortana Intelligence Suite](http://www.microsoft.com/cortanaanalytics).</span><span class="sxs-lookup"><span data-stu-id="83c9e-105">See [Cortana Intelligence Suite](http://www.microsoft.com/cortanaanalytics) page for details about this suite.</span></span> <span data-ttu-id="83c9e-106">В этой статье мы рассмотрим проверенное и реализованное многими пользователями Azure решение, в котором используется фабрика данных Azure и другие службы компонентов Cortana Intelligence.</span><span class="sxs-lookup"><span data-stu-id="83c9e-106">In this document, we describe a common use case that Azure users have already solved and implemented using Azure Data Factory and other Cortana Intelligence component services.</span></span>

## <a name="scenario"></a><span data-ttu-id="83c9e-107">Сценарий</span><span class="sxs-lookup"><span data-stu-id="83c9e-107">Scenario</span></span>
<span data-ttu-id="83c9e-108">Как правило, интернет-магазины пытаются привлечь клиентов, предлагая им те товары, которые заинтересуют их с наибольшей вероятностью и, следовательно, которые они скорее всего купят.</span><span class="sxs-lookup"><span data-stu-id="83c9e-108">Online retailers commonly want to entice their customers to purchase products by presenting them with products they are most likely to be interested in, and therefore most likely to buy.</span></span> <span data-ttu-id="83c9e-109">Для этого продавцам необходимо настроить показ товаров на сайте, используя персонализированные рекомендации товаров для конкретного пользователя.</span><span class="sxs-lookup"><span data-stu-id="83c9e-109">To accomplish this, online retailers need to customize their user’s online experience by using personalized product recommendations for that specific user.</span></span> <span data-ttu-id="83c9e-110">В этих рекомендациях должны учитываться исторические и текущие данные о покупательском поведении, сведения о товарах и новых торговых марках, а также данные о сегментации товаров и клиентов.</span><span class="sxs-lookup"><span data-stu-id="83c9e-110">These personalized recommendations are to be made based on their current and historical shopping behavior data, product information, newly introduced brands, and product and customer segmentation data.</span></span>  <span data-ttu-id="83c9e-111">Кроме того, продавцы могут рекомендовать пользователям товары, основываясь на результатах анализа обобщенного покупательского поведения всех пользователей.</span><span class="sxs-lookup"><span data-stu-id="83c9e-111">Additionally, they can provide the user product recommendations based on analysis of overall usage behavior from all their users combined.</span></span>

<span data-ttu-id="83c9e-112">Цель таких продавцов — оптимизировать конверсию просмотров в продажи и получить более высокий доход.</span><span class="sxs-lookup"><span data-stu-id="83c9e-112">The goal of these retailers is to optimize for user click-to-sale conversions and earn higher sales revenue.</span></span>  <span data-ttu-id="83c9e-113">Они добиваются этого, предоставляя контекстные рекомендации товаров, основанные на покупательском поведении, интересах и действиях клиента.</span><span class="sxs-lookup"><span data-stu-id="83c9e-113">They achieve this conversion by delivering contextual, behavior-based product recommendations based on customer interests and actions.</span></span> <span data-ttu-id="83c9e-114">В данном случае мы используем интернет-магазины в качестве примера компаний, которые стараются подстраиваться под своих клиентов.</span><span class="sxs-lookup"><span data-stu-id="83c9e-114">For this use case, we use online retailers as an example of businesses that want to optimize for their customers.</span></span> <span data-ttu-id="83c9e-115">Эти же принципы относятся к любой компании, которая хочет привлечь клиентов к своим товарам и услугам и улучшить процесс покупки, предоставляя клиентам персонализированные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="83c9e-115">However, these principles apply to any business that wants to engage its customers around its goods and services and enhance their customers’ buying experience with personalized product recommendations.</span></span>

## <a name="challenges"></a><span data-ttu-id="83c9e-116">Сложности</span><span class="sxs-lookup"><span data-stu-id="83c9e-116">Challenges</span></span>
<span data-ttu-id="83c9e-117">Интернет-магазины сталкиваются со множеством трудностей при попытке реализовать такую модель.</span><span class="sxs-lookup"><span data-stu-id="83c9e-117">There are many challenges that online retailers face when trying to implement this type of use case.</span></span> 

<span data-ttu-id="83c9e-118">Во-первых, данные разных объемов и форм должны поступать из нескольких источников данных, как локальных, так и облачных.</span><span class="sxs-lookup"><span data-stu-id="83c9e-118">First, data of different sizes and shapes must be ingested from multiple data sources, both on-premises and in the cloud.</span></span> <span data-ttu-id="83c9e-119">Эти данные включают данные о товарах, исторические данные о поведении клиента и данные о просмотре пользователем сайта интернет-магазина.</span><span class="sxs-lookup"><span data-stu-id="83c9e-119">This data includes product data, historical customer behavior data, and user data as the user browses the online retail site.</span></span> 

<span data-ttu-id="83c9e-120">Во-вторых, подбор и прогнозирование персонализированных рекомендаций должны быть объективными и точными.</span><span class="sxs-lookup"><span data-stu-id="83c9e-120">Second, personalized product recommendations must be reasonably and accurately calculated and predicted.</span></span> <span data-ttu-id="83c9e-121">Помимо данных о товарах, торговых марках, покупательском поведении и просмотренных клиентом страницах, интернет-магазину также необходимо учитывать отзывы о товарах от других покупателей. Вместе эти данные позволят подобрать лучшие рекомендации для каждого конкретного пользователя.</span><span class="sxs-lookup"><span data-stu-id="83c9e-121">In addition to product, brand, and customer behavior and browser data, online retailers also need to include customer feedback on past purchases to factor in the determination of the best product recommendations for the user.</span></span> 

<span data-ttu-id="83c9e-122">В-третьих, пользователи должны мгновенно получать эти рекомендации. Это не только сделает процесс работы с сайтом более удобным, а процедуру покупки более простой, но и позволит пользователям получать наиболее актуальные и релевантные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="83c9e-122">Third, the recommendations must be immediately deliverable to the user to provide a seamless browsing and purchasing experience, and provide the most recent and relevant recommendations.</span></span> 

<span data-ttu-id="83c9e-123">И наконец, продавцам нужно оценивать эффективность такого подхода путем отслеживания количества успешных дополнительных и перекрестных продаж (конверсия просмотров в продажи) и корректировать последующие рекомендации.</span><span class="sxs-lookup"><span data-stu-id="83c9e-123">Finally, retailers need to measure the effectiveness of their approach by tracking overall up-sell and cross-sell click-to-conversion sales successes, and adjust to their future recommendations.</span></span>

## <a name="solution-overview"></a><span data-ttu-id="83c9e-124">Обзор решения</span><span class="sxs-lookup"><span data-stu-id="83c9e-124">Solution Overview</span></span>
<span data-ttu-id="83c9e-125">Этот пример решения испытан и реализован реальными пользователями Azure. При этом использовалась фабрика данных Azure и другие службы компонентов Cortana Intelligence, включая [HDInsight](https://azure.microsoft.com/services/hdinsight/) и [Power BI](https://powerbi.microsoft.com/).</span><span class="sxs-lookup"><span data-stu-id="83c9e-125">This example use case has been solved and implemented by real Azure users by using Azure Data Factory and other Cortana Intelligence component services, including [HDInsight](https://azure.microsoft.com/services/hdinsight/) and [Power BI](https://powerbi.microsoft.com/).</span></span>

<span data-ttu-id="83c9e-126">Для хранения данных на протяжении всего рабочего процесса интернет-магазин использует хранилище BLOB-объектов Azure, локальный сервер SQL, базу данных SQL Azure и киоск реляционных данных.</span><span class="sxs-lookup"><span data-stu-id="83c9e-126">The online retailer uses an Azure Blob store, an on-premises SQL server, Azure SQL DB, and a relational data mart as their data storage options throughout the workflow.</span></span>  <span data-ttu-id="83c9e-127">Хранилище BLOB-объектов содержит данные о клиентах, их поведении и сведения о товарах.</span><span class="sxs-lookup"><span data-stu-id="83c9e-127">The blob store contains customer information, customer behavior data, and product information data.</span></span> <span data-ttu-id="83c9e-128">Информация о товарах — это, в частности, сведения о торговых марках и каталоге товаров, который храниться локально в хранилище данных SQL.</span><span class="sxs-lookup"><span data-stu-id="83c9e-128">The product information data includes product brand information and a product catalog stored on-premises in a SQL data warehouse.</span></span> 

<span data-ttu-id="83c9e-129">Все данные объединяются и передаются в систему рекомендаций товаров, предоставляющую персонализированные рекомендации на основе интересов и действий клиента, когда он просматривает товары в каталоге на веб-сайте магазина.</span><span class="sxs-lookup"><span data-stu-id="83c9e-129">All the data is combined and fed into a product recommendation system to deliver personalized recommendations based on customer interests and actions, while the user browses products in the catalog on the website.</span></span> <span data-ttu-id="83c9e-130">Клиенту также показываются товары, которые могут иметь отношение к просматриваемой позиции, на основании общих моделей использования веб-сайта, не относящихся к конкретному пользователю.</span><span class="sxs-lookup"><span data-stu-id="83c9e-130">The customers also see products that are related to the product they are looking at based on overall website usage patterns that are not related to any one user.</span></span>

![схема решения](./media/data-factory-product-reco-usecase/diagram-1.png)

<span data-ttu-id="83c9e-132">Ежедневно с веб-сайта интернет-магазина передаются гигабайты необработанных веб-журналов в виде частично структурированных файлов.</span><span class="sxs-lookup"><span data-stu-id="83c9e-132">Gigabytes of raw web log files are generated daily from the online retailer’s website as semi-structured files.</span></span> <span data-ttu-id="83c9e-133">Необработанные файлы веб-журналов и сведения о каталогах клиентов и товаров регулярно поступают в хранилище BLOB-объектов Azure. Для этого в фабрике данных используется глобально развернутая служба перемещения.</span><span class="sxs-lookup"><span data-stu-id="83c9e-133">The raw web log files and the customer and product catalog information is ingested regularly into an Azure Blob storage using Data Factory’s globally deployed data movement as a service.</span></span> <span data-ttu-id="83c9e-134">Необработанные файлы журналов за день группируются (по году и месяцу) в хранилище BLOB-объектов для долговременного хранения.</span><span class="sxs-lookup"><span data-stu-id="83c9e-134">The raw log files for the day are partitioned (by year and month) in blob storage for long-term storage.</span></span>  <span data-ttu-id="83c9e-135">[Azure HDInsight](https://azure.microsoft.com/services/hdinsight/) группирует необработанные файлы журналов в хранилище BLOB-объектов и обрабатывает полученные объемы с помощью сценариев Hive и Pig.</span><span class="sxs-lookup"><span data-stu-id="83c9e-135">[Azure HDInsight](https://azure.microsoft.com/services/hdinsight/) is used to partition the raw log files in the blob store and process the ingested logs at scale using both Hive and Pig scripts.</span></span> <span data-ttu-id="83c9e-136">Из сгруппированных данных веб-журналов затем извлекаются необходимые сведения, которые передаются в систему рекомендаций. С помощью машинного обучения эти данные обрабатываются, и на их основе система предлагает персонализированные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="83c9e-136">The partitioned web logs data is then processed to extract the needed inputs for a machine learning recommendation system to generate the personalized product recommendations.</span></span>

<span data-ttu-id="83c9e-137">В этом примере для машинного обучения используется открытая платформа рекомендаций [Apache Mahout](http://mahout.apache.org/).</span><span class="sxs-lookup"><span data-stu-id="83c9e-137">The recommendation system used for the machine learning in this example is an open source machine learning recommendation platform from [Apache Mahout](http://mahout.apache.org/).</span></span>  <span data-ttu-id="83c9e-138">Вместо нее в этом случае можно использовать [службы машинного обучения Azure](https://azure.microsoft.com/services/machine-learning/) или любую другую пользовательскую модель.</span><span class="sxs-lookup"><span data-stu-id="83c9e-138">Any [Azure Machine Learning](https://azure.microsoft.com/services/machine-learning/) or custom model can be applied to the scenario.</span></span>  <span data-ttu-id="83c9e-139">Модель Mahout используется для определения сходства между элементами на веб-сайте интернет-магазина на основе общей модели использования веб-сайта, а также для создания персонализированных рекомендаций, основанных на данных о конкретном пользователе.</span><span class="sxs-lookup"><span data-stu-id="83c9e-139">The Mahout model is used to predict the similarity between items on the website based on overall usage patterns, and to generate the personalized recommendations based on the individual user.</span></span>

<span data-ttu-id="83c9e-140">Наконец, финальный набор персонализированных рекомендаций перемещается в киоск реляционных данных, откуда его и берет веб-сайт интернет-магазина.</span><span class="sxs-lookup"><span data-stu-id="83c9e-140">Finally, the result set of personalized product recommendations is moved to a relational data mart for consumption by the retailer website.</span></span>  <span data-ttu-id="83c9e-141">Для других приложений финальный набор также может быть доступен непосредственно в хранилище BLOB-объектов. Кроме того, для других потребителей и вариантов использования набор можно переместить в дополнительные хранилища.</span><span class="sxs-lookup"><span data-stu-id="83c9e-141">The result set could also be accessed directly from blob storage by another application, or moved to additional stores for other consumers and use cases.</span></span>

## <a name="benefits"></a><span data-ttu-id="83c9e-142">Преимущества</span><span class="sxs-lookup"><span data-stu-id="83c9e-142">Benefits</span></span>
<span data-ttu-id="83c9e-143">Вследствие оптимизации стратегии по рекомендациям товаров и ее согласования с целями предприятия решение позволило интернет-магазину достичь своих целей в области сбыта и маркетинга.</span><span class="sxs-lookup"><span data-stu-id="83c9e-143">By optimizing their product recommendation strategy and aligning it with business goals, the solution met the online retailer’s merchandising and marketing objectives.</span></span> <span data-ttu-id="83c9e-144">Кроме того, продавец смог организовать систему рекомендаций и получил инструменты, которые позволяют не только эффективно, а и надежно управлять ею без лишних затрат.</span><span class="sxs-lookup"><span data-stu-id="83c9e-144">Additionally, they were able to operationalize and manage the product recommendation workflow in an efficient, reliable, and cost effective manner.</span></span> <span data-ttu-id="83c9e-145">Этот подход позволяет с легкостью обновить и настроить имеющуюся модель на основе данных о конверсии просмотров в продажи.</span><span class="sxs-lookup"><span data-stu-id="83c9e-145">The approach made it easy for them to update their model and fine-tune its effectiveness based on the measures of sales click-to-conversion successes.</span></span> <span data-ttu-id="83c9e-146">Использование фабрики данных Azure дало возможность отказаться от ручного управления облачными ресурсами, которое сопряжено с высокими затратами времени и ресурсов, и перейти к модели управления облачными ресурсами по требованию.</span><span class="sxs-lookup"><span data-stu-id="83c9e-146">By using Azure Data Factory, they were able to abandon their time consuming and expensive manual cloud resource management and move to on-demand cloud resource management.</span></span> <span data-ttu-id="83c9e-147">Таким образом, это позволило сэкономить время и деньги, а также сократить сроки развертывания решения.</span><span class="sxs-lookup"><span data-stu-id="83c9e-147">Therefore, they were able to save time, money, and reduce their time to solution deployment.</span></span> <span data-ttu-id="83c9e-148">Благодаря удобному пользовательскому интерфейсу фабрики данных для мониторинга и управления на портале Azure стало проще визуализировать представления журнала преобразований данных и устранять неполадки в работе службы.</span><span class="sxs-lookup"><span data-stu-id="83c9e-148">Data lineage views and operational service health became easy to visualize and troubleshoot with the intuitive Data Factory monitoring and management UI available from the Azure portal.</span></span> <span data-ttu-id="83c9e-149">Теперь решение может постоянно выдавать готовые данные и доставлять их пользователям. При этом управление данными и обработка зависимостей осуществляются автоматически без человеческого вмешательства.</span><span class="sxs-lookup"><span data-stu-id="83c9e-149">Their solution can now be scheduled and managed so that finished data is reliably produced and delivered to users, and data and processing dependencies are automatically managed without human intervention.</span></span>

<span data-ttu-id="83c9e-150">Внедрив такой персонализированный подход, интернет-магазин предложил своим клиентам более увлекательный процесс покупок. За счет этого повысилась конкурентоспособность бизнеса и появились условия для роста продаж и общей удовлетворенности клиентов.</span><span class="sxs-lookup"><span data-stu-id="83c9e-150">By providing this personalized shopping experience, the online retailer created a more competitive, engaging customer experience and therefore increase sales and overall customer satisfaction.</span></span>

