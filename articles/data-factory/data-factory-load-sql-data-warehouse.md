---
title: "aaaLoad терабайт данных в хранилище данных SQL | Документы Microsoft"
description: "Демонстрируется загрузка 1 ТБ данных в хранилище данных SQL Azure с помощью фабрики данных Azure менее чем за 15 минут."
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: monicar
ms.assetid: a6c133c0-ced2-463c-86f0-a07b00c9e37f
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: jingwang
ms.openlocfilehash: e63f60461b082b0e3979004cb631dbf4a6710de3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="load-1-tb-into-azure-sql-data-warehouse-under-15-minutes-with-data-factory"></a>Загрузка 1 ТБ в хранилище данных SQL Azure с помощью фабрики данных менее чем за 15 минут
[Хранилище данных SQL Azure](../sql-data-warehouse/sql-data-warehouse-overview-what-is.md) — это развернутая в облаке база данных, способная обрабатывать большие объемы реляционных и нереляционных данных.  Благодаря реализованной архитектуре вычислений с массовым параллелизмом (MPP) хранилище данных SQL оптимизировано для рабочих нагрузок хранилища корпоративных данных.  Он предлагает облачных эластичности с хранилищем tooscale гибкость hello и вычислений независимо друг от друга.

Приступить к работе с хранилищем данных SQL Azure теперь проще, чем когда-либо, с помощью **фабрики данных Azure**.  Фабрика данных Azure является полностью управляемая облачными данными интеграции службы, которая может быть toopopulate используется хранилище данных SQL с hello данных из существующей системы и сохранение вы ценное время при оценке хранилище данных SQL и построение аналитику решения. Ниже приведены ключевые преимущества hello загрузки данных в хранилище данных SQL Azure, с помощью фабрики данных Azure.

* **Легко tooset копирование**: шаг 5 интуитивно понятный мастер с нет необходимости в сценариях.
* **Расширенная поддержка хранилищ данных**: встроенная поддержка обширного набора локальных и облачных хранилищ.
* **Безопасность и соответствие**: данные передаются по протоколу HTTPS или ExpressRoute и гарантирует наличие глобальной службы данных никогда не покидает hello географической границы
* **Несравненную производительности с помощью PolyBase** — с помощью Polybase — hello наиболее эффективный способ toomove данные в хранилище данных SQL Azure. Привет, промежуточного хранения больших двоичных этого можно добиться высокой нагрузки скорости из всех типов хранилищ данных, помимо хранения больших двоичных объектов Azure, которые hello Polybase поддерживает по умолчанию.

В этой статье показано, как toouse мастер копирования фабрики данных tooload 1 ТБ данных из хранилища больших двоичных объектов в хранилище данных SQL Azure в разделе 15 минут, в более 1,2 Гбит/с пропускной способности.

В этой статье содержит пошаговые инструкции по переносу данных в хранилище данных SQL Azure с помощью мастера копирования hello.

> [!NOTE]
>  Общие сведения о возможностях фабрики данных при перемещении данных в хранилище данных SQL Azure см. в разделе [перемещения tooand данные из хранилища данных SQL Azure, с помощью фабрики данных Azure](data-factory-azure-sql-data-warehouse-connector.md) статьи.
>
> Можно также создавать конвейеры с помощью портала Azure, Visual Studio PowerShell и т. д. В разделе [учебника: копирование данных из больших двоичных объектов Azure tooAzure базы данных SQL](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md) краткое Пошаговое руководство с пошаговыми инструкциями по использованию hello действие копирования в фабрике данных Azure.  
>
>

## <a name="prerequisites"></a>Предварительные требования
* Хранилище BLOB-объектов Azure: в этом эксперименте хранилище BLOB-объектов Azure (GRS) используется для хранения тестового набора данных TPC-H.  Если у вас учетная запись хранилища Azure, узнайте [как учетную запись хранения toocreate](../storage/common/storage-create-storage-account.md#create-a-storage-account).
* [TPC-H](http://www.tpc.org/tpch/) данных: мы будем toouse TPC-H как hello проверочного набора данных.  потребуется toouse toodo `dbgen` из набора средств TPC-H, который поможет создать набор данных hello.  Можно загрузить исходный код для `dbgen` из [средства TPC](http://www.tpc.org/tpc_documents_current_versions/current_specifications.asp) и скомпилируйте его самостоятельно, либо двоичный файл скомпилирован hello загрузки из [GitHub](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/TPCHTools).  Неструктурированный файл toogenerate 1 ТБ для команды выполнения dbgen.exe следующий hello `lineitem` таблицы разворота через 10 файлов:

  * `Dbgen -s 1000 -S **1** -C 10 -T L -v`
  * `Dbgen -s 1000 -S **2** -C 10 -T L -v`
  * …
  * `Dbgen -s 1000 -S **10** -C 10 -T L -v`

    Теперь hello копирования создается tooAzure файлов больших двоичных объектов.  См. слишком[перемещение tooand данных из локальной файловой системы с помощью фабрики данных Azure](data-factory-onprem-file-system-connector.md) как toodo, с помощью копирования ADF.    
* Хранилище данных SQL Azure: в ходе этого эксперимента данные загружаются в хранилище данных SQL Azure, созданное с 6000 DWU.

    См. слишком[создать хранилище данных SQL Azure](../sql-data-warehouse/sql-data-warehouse-get-started-provision.md) подробные инструкции о том, как toocreate хранилище данных SQL базы данных.  tooget hello наилучшей возможную нагрузку производительности в хранилище данных SQL с помощью Polybase, мы выбираем максимальное число единиц хранилища данных (Dwu) допускается в производительности приветствия, являющийся 6000 Dwu.

  > [!NOTE]
  > При загрузке из больших двоичных объектов Azure, производительность загрузки данных hello — прямо пропорционально toohello количество Dwu настроить на hello хранилище данных SQL:
  >
  > Загрузка 1 ТБ в 1000 DWU хранилища данных SQL занимает 87 минут (при пропускной способности около 200 Мбит/с). Загрузка 1 ТБ в 2000 DWU хранилища данных SQL занимает 46 минут (при пропускной способности около 380 Мбит/с). Загрузка 1 ТБ в 6000 DWU хранилища данных SQL занимает 14 минут (при пропускной способности около 1,2 Гбит/с).
  >
  >

    Хранилище данных SQL с 6000 Dwu toocreate ползунок hello производительности всех toohello способом hello справа:

    ![Ползунок "Производительность"](media/data-factory-load-sql-data-warehouse/performance-slider.png)

    В случае, если для существующей базы данных не настроено 6000 DWU, ее можно масштабировать с помощью портала Azure.  Перейдите toohello базы данных на портале Azure и **шкалы** кнопку в hello **Обзор** панели показано hello после изображения:

    ![Кнопка "Масштаб"](media/data-factory-load-sql-data-warehouse/scale-button.png)    

    Нажмите кнопку hello **шкалы** следующие hello tooopen кнопку панели, переместите hello ползунок toohello максимальное значение и нажмите кнопку **Сохранить** кнопки.

    ![Диалоговое окно "Масштаб"](media/data-factory-load-sql-data-warehouse/scale-dialog.png)

    В этом эксперименте данные загружаются в хранилище данных SQL Azure с помощью класса ресурсов `xlargerc`.

    tooachieve лучшие возможности пропускной способности копирования необходимо выполнить с помощью SQL хранилища данных пользователь, принадлежащий слишком toobe`xlargerc` класса ресурсов.  Узнайте, как toodo, выполнив следующие [измените пример класса ресурса для пользователя](../sql-data-warehouse/sql-data-warehouse-develop-concurrency.md#changing-user-resource-class-example).  
* Создание схемы целевой таблицы в базе данных хранилища данных SQL Azure, выполнив следующие инструкции DDL hello:

    ```SQL  
    CREATE TABLE [dbo].[lineitem]
    (
        [L_ORDERKEY] [bigint] NOT NULL,
        [L_PARTKEY] [bigint] NOT NULL,
        [L_SUPPKEY] [bigint] NOT NULL,
        [L_LINENUMBER] [int] NOT NULL,
        [L_QUANTITY] [decimal](15, 2) NULL,
        [L_EXTENDEDPRICE] [decimal](15, 2) NULL,
        [L_DISCOUNT] [decimal](15, 2) NULL,
        [L_TAX] [decimal](15, 2) NULL,
        [L_RETURNFLAG] [char](1) NULL,
        [L_LINESTATUS] [char](1) NULL,
        [L_SHIPDATE] [date] NULL,
        [L_COMMITDATE] [date] NULL,
        [L_RECEIPTDATE] [date] NULL,
        [L_SHIPINSTRUCT] [char](25) NULL,
        [L_SHIPMODE] [char](10) NULL,
        [L_COMMENT] [varchar](44) NULL
    )
    WITH
    (
        DISTRIBUTION = ROUND_ROBIN,
        CLUSTERED COLUMNSTORE INDEX
    )
    ```
Обязательные шаги hello завершена мы становятся действие копирования hello готов tooconfigure, с помощью мастера копирования hello.

## <a name="launch-copy-wizard"></a>Запуск мастера копирования
1. Войдите в toohello [портал Azure](https://portal.azure.com).
2. Нажмите кнопку **+ создать** в левом верхнем углу hello, выберите **аналитики + аналитика**и нажмите кнопку **фабрики данных**.
3. В hello **новую фабрику данных** колонки:

   1. Введите **LoadIntoSQLDWDataFactory** для hello **имя**.
       Имя фабрики данных Azure hello Hello должно быть глобально уникальным. Если ошибка hello: **имя фабрики данных «LoadIntoSQLDWDataFactory» недоступен**, измените имя hello hello фабрики данных (например, yournameLoadIntoSQLDWDataFactory) и повторите попытку создания. Ознакомьтесь со статьей [Фабрика данных Azure — правила именования](data-factory-naming-rules.md) , чтобы узнать о правилах именования артефактов фабрики данных.  
   2. Выберите свою **подписку Azure**.
   3. Для группы ресурсов выполните одно из действий hello.
      1. Выберите **использовать существующие** tooselect существующую группу ресурсов.
      2. Выберите **создать новый** tooenter имя для группы ресурсов.
   4. Выберите **расположение** для фабрики данных hello.
   5. Выберите **toodashboard ПИН-код** флажок hello нижней части колонки hello.  
   6. Щелкните **Создать**.
4. После завершения создания hello, вы видите hello **фабрики данных** колонки, как показано в hello после изображения:

   ![Домашняя страница фабрики данных](media/data-factory-load-sql-data-warehouse/data-factory-home-page-copy-data.png)
5. На домашней странице hello фабрики данных, нажмите кнопку hello **скопировать данные** плитки toolaunch **мастер копирования**.

   > [!NOTE]
   > При появлении этого веб-браузер hello застряла в «Авторизации...», отключить или снимите **блокировать сторонние файлы cookie и данным сайта** параметра (или) Оставьте включенным и создание исключения для **login.microsoftonline.com**, затем попытайтесь еще раз запустить мастер hello.
   >
   >

## <a name="step-1-configure-data-loading-schedule"></a>Шаг 1. Настройка расписания загрузки данных
Hello первым шагом является загрузка расписание tooconfigure hello данных.  

В hello **свойства** страницы:

1. В качестве **имени задачи** введите **CopyFromBlobToAzureSqlDataWarehouse**.
2. Выберите параметр **Run once now** (Запустить сейчас один раз).   
3. Щелкните **Далее**.  

    ![Мастер копирования — страница "Свойства"](media/data-factory-load-sql-data-warehouse/copy-wizard-properties-page.png)

## <a name="step-2-configure-source"></a>Шаг 2. Настройка источника
В этом разделе представлены hello действия tooconfigure hello источника: содержащий больших двоичных объектов Azure hello 1 ТБ TPC-H файлы элементов строки.

1. Выберите hello **хранилища больших двоичных объектов** как hello хранилище и нажмите кнопку **Далее**.

    ![Мастер копирования — страница "Выбрать источник"](media/data-factory-load-sql-data-warehouse/select-source-connection.png)

2. Заполните сведения о соединении hello для hello учетной записи хранилища больших двоичных объектов Azure и нажмите кнопку **Далее**.

    ![Мастер копирования — сведения о подключении к источнику](media/data-factory-load-sql-data-warehouse/source-connection-info.png)

3. Выберите hello **папки** содержащего строку hello TPC-H элемент файлы и нажмите кнопку **Далее**.

    ![Мастер копирования — выбор папки входных данных](media/data-factory-load-sql-data-warehouse/select-input-folder.png)

4. После нажатия кнопки **Далее**, параметры формата файла hello обнаруживаются автоматически.  Проверьте toomake убедиться, что разделителем столбцов является "| «вместо запятой по умолчанию hello»,".  Нажмите кнопку **Далее** после просмотрев hello данных.

    ![Мастер копирования — параметры формата файлов](media/data-factory-load-sql-data-warehouse/file-format-settings.png)

## <a name="step-3-configure-destination"></a>Шаг 3. Настройка назначения
В этом разделе показано, как tooconfigure hello назначения: `lineitem` таблицы в базе данных хранилища данных SQL Azure hello.

1. Выберите **хранилище данных SQL Azure** как hello назначения хранилище и нажмите кнопку **Далее**.

    ![Мастер копирования — выбор целевого хранилища данных](media/data-factory-load-sql-data-warehouse/select-destination-data-store.png)

2. Заполните сведения о соединении hello для хранилища данных SQL Azure.  Убедитесь, что указан hello пользователя, который является членом роли hello `xlargerc` (hello в разделе **необходимые компоненты** подробные инструкции в разделе) и нажмите кнопку **Далее**.

    ![Мастер копирования — сведения о подключении к целевому хранилищу](media/data-factory-load-sql-data-warehouse/destination-connection-info.png)

3. Выберите целевую таблицу hello и нажмите кнопку **Далее**.

    ![Мастер копирования — страница сопоставления таблиц](media/data-factory-load-sql-data-warehouse/table-mapping-page.png)

4. На странице сопоставления схемы оставьте флажок "Apply column mapping" (Применить сопоставление столбцов) снятым и нажмите кнопку **Далее**.

## <a name="step-4-performance-settings"></a>Шаг 4. Настройки производительности

Флажок **Allow polybase** (Разрешить использование PolyBase) установлен по умолчанию.  Щелкните **Далее**.

![Мастер копирования — страница сопоставления столбцов](media/data-factory-load-sql-data-warehouse/performance-settings-page.png)

## <a name="step-5-deploy-and-monitor-load-results"></a>Шаг 5. Развертывание и мониторинг результатов нагрузки
1. Нажмите кнопку **Готово** toodeploy кнопки.

    ![Мастер копирования — страница сводки](media/data-factory-load-sql-data-warehouse/summary-page.png)

2. По завершении развертывания hello щелкните `Click here toomonitor copy pipeline` ход выполнения копирования hello toomonitor. Выберите hello копирования конвейера, созданный в hello **действия Windows** списка.

    ![Мастер копирования — страница сводки](media/data-factory-load-sql-data-warehouse/select-pipeline-monitor-manage-app.png)

    Можно просмотреть сведения о выполнении в hello копирования hello **действия окно обозревателя** hello правой панели, включая hello тома данных из источника для чтения и записи в назначения, продолжительность и hello Средняя пропускная способность для запуска hello.

    Как видно из hello следующий снимок экрана, копируя 1 ТБ из хранилища больших двоичных объектов в хранилище данных SQL занимает 14 минут, эффективно достижение 1,22 Гбит/с пропускной способности!

    ![Мастер копирования — диалоговое окно успешного выполнения](media/data-factory-load-sql-data-warehouse/succeeded-info.png)

## <a name="best-practices"></a>Рекомендации
Ниже приведены некоторые советы и рекомендации по выполнению базы данных хранилища данных SQL Azure.

* При загрузке в кластеризованный индекс columnstore используйте класс ресурсов большего размера.
* Чтобы повысить эффективность соединений, рассмотрите возможность использования хэш-распределения по выбранному столбцу вместо используемого по умолчанию циклического распределения.
* Чтобы ускорить загрузку, рекомендуется использовать кучу для хранения временных данных.
* Сформируйте статистику после окончания загрузки хранилища данных SQL Azure.

Дополнительные сведения см. в разделе [Рекомендации по использованию хранилища данных SQL Azure](../sql-data-warehouse/sql-data-warehouse-best-practices.md).

## <a name="next-steps"></a>Дальнейшие действия
* [Мастер копирования фабрики данных](data-factory-copy-wizard.md) -Эта статья содержит сведения о приветствия мастера копирования.
* [Скопируйте действие производительности и руководство по настройке](data-factory-copy-activity-performance.md) -Эта статья содержит измерения производительности ссылка hello и руководство по настройке.
