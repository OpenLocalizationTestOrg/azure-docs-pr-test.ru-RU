---
title: "aaaCopy данных из хранилища больших двоичных объектов | Документы Microsoft"
description: "Узнайте, как toocopy данные большого двоичного объекта в фабрике данных Azure. Используйте приведенный образец: как toocopy tooand данных из хранилища больших двоичных объектов и базы данных SQL Azure."
keywords: "данные BLOB-объектов, копирование BLOB-объекта Azure"
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: monicar
ms.assetid: bec8160f-5e07-47e4-8ee1-ebb14cfb805d
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/22/2017
ms.author: jingwang
ms.openlocfilehash: 8428c64e8e8b1084b3f2f680c4e1819559e4ffa3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="copy-data-tooor-from-azure-blob-storage-using-azure-data-factory"></a>Tooor копирования данных из хранилища больших двоичных объектов Azure, с помощью фабрики данных Azure
В этой статье объясняется, как toouse hello действие копирования в tooand данных toocopy фабрики данных Azure из хранилища больших двоичных объектов. Она построена на hello [действия перемещения данных](data-factory-data-movement-activities.md) статьи, которая представляет общие сведения о перемещении данных с действием копирования hello.

## <a name="overview"></a>Обзор
Можно скопировать данные из любого поддерживаемого источника данных хранения tooAzure хранилища BLOB-объектов или из хранилища больших двоичных объектов поддерживается tooany приемник данных хранилища. Hello Следующая таблица содержит перечень хранилищ данных, поддерживаемые в качестве источников или приемники действием копирования hello. Например, вы можете переместить данные **из** базы данных SQL Server или SQL Azure **в** хранилище BLOB-объектов Azure. Вы также можете копировать данные **из** хранилища BLOB-объектов Azure **в** хранилище данных SQL Azure или в коллекцию Azure Cosmos DB. 

## <a name="supported-scenarios"></a>Поддерживаемые сценарии использования.
Можно скопировать данные **из хранилища больших двоичных объектов** toohello следующие хранилищ данных:

[!INCLUDE [data-factory-supported-sink](../../includes/data-factory-supported-sinks.md)]

Можно скопировать данные из hello, следуя хранилищ данных **tooAzure хранилища больших двоичных объектов**:

[!INCLUDE [data-factory-supported-sources](../../includes/data-factory-supported-sources.md)]
 
> [!IMPORTANT]
> Действие копирования поддерживает копирование данных из / tooboth общего назначения хранилища Azure, учетные записи и горячей/охлаждение хранилище больших двоичных объектов. Действие Hello поддерживает **чтение из блока, добавить или страничные большие двоичные объекты**, но поддерживает **записи tooonly блочных больших двоичных объектов**. Хранилище Azure класса Premium нельзя использовать в качестве приемника, так как оно поддерживается страничными BLOB-объектами.
> 
> Действие копирования не удаляет данные из источника hello, скопировав hello данных равен успешно toohello назначения. При необходимости после успешной копии toodelete исходных данных, создать [пользовательское действие](data-factory-use-custom-activities.md) toodelete hello данных и используйте действие hello в конвейере hello. Пример см. в разделе hello [пример удаления BLOB-объектов или папки на GitHub](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/DeleteBlobFileFolderCustomActivity). 

## <a name="get-started"></a>Начало работы
Можно создать конвейер с действием копирования, которое перемещает данные из хранилища BLOB-объектов Azure или в него с помощью различных инструментов и интерфейсов API.

toocreate простым способом Hello конвейера — toouse hello **мастер копирования**. Данная статья содержит [Пошаговое руководство](#walkthrough-use-copy-wizard-to-copy-data-tofrom-blob-storage) для создания конвейера toocopy данных из хранилища больших двоичных объектов расположение tooanother расположение хранилища больших двоичных объектов. Учебник по созданию toocopy конвейера данных из хранилища больших двоичных объектов tooAzure базы данных SQL см. в разделе [учебника: создать конвейер, с помощью мастера копирования](data-factory-copy-data-wizard-tutorial.md).

Также можно использовать следующие средства toocreate конвейера hello: **портал Azure**, **Visual Studio**, **Azure PowerShell**, **шаблона диспетчера ресурсов Azure** , **.NET API**, и **API-интерфейса REST**. В разделе [учебника действия копирования](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md) для toocreate пошаговые инструкции конвейера с помощью операции копирования.

Независимо от используемого hello инструменты или интерфейсы API, необходимо выполнить следующие шаги toocreate конвейера, который перемещает данные из источника данных хранилище tooa приемник данных hello.

1. Создание **фабрики данных**. Фабрика данных может содержать один или несколько конвейеров. 
2. Создание **связанные службы** toolink ввода-вывода хранилища tooyour данных фабрики данных. Например при копировании данных из базы данных Azure SQL tooan хранилища BLOB-объектов Azure, создается два связанных служб toolink вашей учетной записи хранилища Azure и фабрики данных tooyour базы данных Azure SQL. Свойства связанной службы, определенные tooAzure хранилища больших двоичных объектов, в разделе [связанные свойства службы](#linked-service-properties) раздела. 
2. Создание **наборы данных** toorepresent входных и выходных данных для hello операции копирования. В примере hello, упомянутые в последнем шаге hello создать контейнер больших двоичных объектов dataset toospecify hello и папку, содержащую hello входных данных. И создайте другую таблицу SQL hello toospecify набора данных в базе данных Azure SQL hello, содержащий hello данные, скопированные из хранилища больших двоичных объектов hello. Свойства набора данных, определенных tooAzure хранилища больших двоичных объектов, в разделе [свойства набора данных](#dataset-properties) раздела.
3. Создайте **конвейер** с действием копирования, который принимает входной набор данных и возвращает выходной набор данных. В примере hello приведенные выше используются BlobSource в исходной и SqlSink в приемник для действия копирования hello. Аналогично Если копируются из базы данных SQL Azure tooAzure хранилища больших двоичных объектов, использовать SqlSource и BlobSink в действии копирования hello. Свойства действия копирования, определенные tooAzure хранилища больших двоичных объектов, в разделе [скопировать свойства действия](#copy-activity-properties) раздела. Дополнительные сведения о том, как toouse хранилища данных, как источник или приемник по ссылке hello в предыдущем разделе hello для источника данных.  

При использовании мастера hello JSON определения для этих сущностей фабрики данных (связанные службы, наборы данных и hello конвейера) создаются автоматически. При использовании средств и API-интерфейсы (за исключением .NET API), определяются с использованием формата JSON hello этих сущностей фабрики данных.  Образцы с определениями JSON для сущностей фабрики данных, используемых toocopy данные из хранилища больших двоичных объектов Azure см. в разделе [JSON примеры](#json-examples-for-copying-data-to-and-from-blob-storage  ) этой статьи.

Hello в следующих разделах приведены сведения о JSON свойства, используемые toodefine фабрики данных сущностей определенного tooAzure хранилища больших двоичных объектов.

## <a name="linked-service-properties"></a>Свойства связанной службы
Существует два типа связанных служб можно использовать toolink фабрикой данных Azure tooan хранилища Azure. **AzureStorage** и **AzureStorageSas**. Hello связанной службой хранилища Azure обеспечивает для фабрики данных hello с toohello глобальный доступ к службе хранилища Azure. В то время как связанные hello SAS хранилища Azure (подпись общего доступа) службы обеспечивает для фабрики данных hello с toohello ограничен или ограниченным временем доступа хранилища Azure. Других различий между этими связанными службами нет. Выберите службу hello связаны, которая соответствует вашим потребностям. Hello следующие подразделы содержат дополнительные сведения в этих двух связанных служб.

[!INCLUDE [data-factory-azure-storage-linked-services](../../includes/data-factory-azure-storage-linked-services.md)]

## <a name="dataset-properties"></a>Свойства набора данных
toospecify dataset toorepresent входных или выходных данных в хранилище BLOB-объектов Azure, задайте свойство типа hello hello набора данных для: **AzureBlob**. Набор hello **linkedServiceName** свойство toohello имя набора данных hello hello хранилища Azure или SAS хранилища Azure связанной службы.  свойства типа Hello hello набора данных укажите hello **контейнер больших двоичных объектов** и hello **папки** в хранилище больших двоичных объектов hello.

Полный список разделов JSON и свойства, доступные для определения наборов данных, см. в разделе hello [Создание наборов данных](data-factory-create-datasets.md) статьи. Разделы структуры, доступности и политики JSON набора данных одинаковы для всех типов наборов данных (SQL Azure, большие двоичные объекты Azure, таблицы Azure и т. д.).

Фабрика данных поддерживает следующие CLS-совместимым .NET на основе типа значения для предоставления информации о типах в «структура» для источников данных схемы на чтение как BLOB-объектов Azure hello: Int16, Int32, Int64, единый, Double, Decimal, Byte [], Bool, String, Guid, Datetime, DateTimeOffset, Timespan. Фабрика данных автоматически выполняет преобразования типов при перемещении данных из источника данных в хранилище tooa приемник данных.

Hello **typeProperties** разделе отличается для каждого типа набора данных и содержатся сведения о местоположении hello, форматирования и т.д., hello данных в хранилище данных hello. Hello typeProperties статьи для набора данных типа **AzureBlob** набор данных имеет hello следующие свойства:

| Свойство | Описание | Обязательно |
| --- | --- | --- |
| folderPath |Контейнер toohello путь к папке, в hello хранилище больших двоичных объектов. Пример: myblobcontainer\myblobfolder\ |Да |
| fileName |Имя большого двоичного объекта hello. Свойство fileName является необязательным и в нем учитывается регистр знаков.<br/><br/>При указании имени файла, hello деятельности (включая копирования) работает на hello определенным BLOB-объектом.<br/><br/>Если не указано имя файла, копирования включает все большие двоичные объекты в folderPath hello для входного набора данных.<br/><br/>Когда **fileName** не указано для выходной набор данных и **preserveHierarchy** не указан в приемник действие hello имя hello созданный файл будет в следующем формате hello: данные.<Guid>. txt (например:: Data.0a405f8a-93ff-4c6f-b3be-f69616f1df7a.txt |Нет |
| partitionedBy |Необязательное свойство. Можно использовать его toospecify динамического folderPath и filename для временного ряда данных. Например, путь к папке (значение folderPath) каждый час может быть другим. В разделе hello [с помощью свойства раздела partitionedBy](#using-partitionedBy-property) подробные сведения и примеры. |Нет |
| свойства | поддерживаются следующие типы формата Hello: **TextFormat**, **JsonFormat**, **AvroFormat**, **OrcFormat**,  **ParquetFormat**. Набор hello **тип** свойства в формате tooone из следующих значений. Дополнительные сведения см. в разделах о [текстовом формате](data-factory-supported-file-and-compression-formats.md#text-format), [формате Json](data-factory-supported-file-and-compression-formats.md#json-format), [формате Avro](data-factory-supported-file-and-compression-formats.md#avro-format), [формате Orc](data-factory-supported-file-and-compression-formats.md#orc-format) и [ формате Parquet](data-factory-supported-file-and-compression-formats.md#parquet-format). <br><br> Если требуется слишком**скопируйте файлы как-является** между файловых хранилищ (двоичный копия), пропустите раздел формат hello в оба определения набора входных и выходных данных. |Нет |
| compression | Укажите тип hello и уровень сжатия данных hello. Поддерживаемые типы: **GZip**, **Deflate**, **BZip2** и **ZipDeflate**. Поддерживаемые уровни: **Optimal** и **Fastest**. См. дополнительные сведения о [форматах файлов и сжатия данных в фабрике данных Azure](data-factory-supported-file-and-compression-formats.md#compression-support). |Нет |

### <a name="using-partitionedby-property"></a>Использование свойства partitionedBy
Как упоминалось в предыдущем разделе hello, можно указать динамического folderPath и filename для временного ряда данных с hello **partitionedBy** свойства [функции фабрики данных, а системные переменные hello](data-factory-functions-variables.md).

Дополнительные сведения о наборах данных временных рядов, планировании и срезах см. в статьях [Наборы данных в фабрике данных Azure](data-factory-create-datasets.md) и [Планирование и исполнение с использованием фабрики данных](data-factory-scheduling-and-execution.md).

#### <a name="sample-1"></a>Пример 1

```json
"folderPath": "wikidatagateway/wikisampledataout/{Slice}",
"partitionedBy":
[
    { "name": "Slice", "value": { "type": "DateTime", "date": "SliceStart", "format": "yyyyMMddHH" } },
],
```

В этом примере {Slice} заменяется hello значение системной переменной фабрики данных SliceStart в формате hello (ГГГГММДДЧЧ) указан. Hello SliceStart ссылается toostart время hello среза. Hello folderPath отличается для каждого среза. Например: wikidatagateway/wikisampledataout/2014100103 или wikidatagateway/wikisampledataout/2014100104.

#### <a name="sample-2"></a>Пример 2

```json
"folderPath": "wikidatagateway/wikisampledataout/{Year}/{Month}/{Day}",
"fileName": "{Hour}.csv",
"partitionedBy":
 [
    { "name": "Year", "value": { "type": "DateTime", "date": "SliceStart", "format": "yyyy" } },
    { "name": "Month", "value": { "type": "DateTime", "date": "SliceStart", "format": "MM" } },
    { "name": "Day", "value": { "type": "DateTime", "date": "SliceStart", "format": "dd" } },
    { "name": "Hour", "value": { "type": "DateTime", "date": "SliceStart", "format": "hh" } }
],
```

В этом примере год, месяц, день и время SliceStart извлекаются в отдельные переменные, используемые в свойствах folderPath и fileName.

## <a name="copy-activity-properties"></a>Свойства действия копирования
Полный список разделов и свойства, доступные для определения действий см. в разделе hello [Создание конвейеры](data-factory-create-pipelines.md) статьи. Свойства, например имя, описание, входные и выходные таблицы, политики и т. д., доступны для всех типов действий. В то время как свойства, доступные в hello **typeProperties** раздел hello действия зависят от типа каждого действия. Для действия копирования они зависят от типов источников и приемников hello. При перемещении данных из хранилища больших двоичных объектов Azure установке hello исходного типа в действие копирования hello слишком**BlobSource**. Аналогичным образом, при перемещении данных tooan хранилища больших двоичных объектов, установке тип приемника hello в действии копирования hello слишком**BlobSink**. Этот раздел содержит список свойств, поддерживаемых типами BlobSource и BlobSink.

**BlobSource** поддерживает следующие свойства в hello hello **typeProperties** раздела:

| Свойство | Описание | Допустимые значения | Обязательно |
| --- | --- | --- | --- |
| recursive |Указывает, доступна ли для чтения рекурсивно hello данных из подпапок hello или только из указанной папки hello. |True (значение по умолчанию), False |Нет |

**BlobSink** поддерживает следующие свойства hello **typeProperties** раздела:

| Свойство | Описание | Допустимые значения | Обязательно |
| --- | --- | --- | --- |
| copyBehavior |Определяет поведение копирования hello, когда источник hello BlobSource или файловой системы. |<b>PreserveHierarchy</b>: сохраняет hello иерархию файлов в целевой папке hello. Hello относительный путь к исходной папке toosource файла представляет идентичные toohello относительный путь папки tootarget целевого файла.<br/><br/><b>FlattenHierarchy</b>: все файлы из исходной папки hello в hello сначала уровень целевую папку. файлы целевой Hello иметь автоматически созданное имя. <br/><br/><b>MergeFiles</b>: объединяет все файлы из папки tooone hello исходного файла. Если указано имя файла или большого двоичного объекта hello hello объединенный файл будет hello указанным именем. в противном случае будет автоматически формируемого имени файла. |Нет |

**BlobSource** также поддерживает эти два свойства для обеспечения обратной совместимости.

* **treatEmptyAsNull**: Указывает, является ли tootreat null или пустую строку как значение null.
* **skipHeaderLineCount** указывает, сколько строк необходимо пропустить. Применяется, только когда для входного набора данных используется TextFormat.

Аналогичным образом **BlobSink** поддерживает hello следующие свойства для обеспечения обратной совместимости.

* **blobWriterAddHeader**: Указывает, является ли заголовок определений столбцов при записи tooan tooadd выходной набор данных.

Наборы данных теперь поддержки hello следующие свойства, которые реализуют hello же функциональные возможности: **treatEmptyAsNull**, **skipLineCount**, **firstRowAsHeader**.

Hello следующей таблице приведены инструкции по использованию hello новые свойства набора данных, вместо этих свойств большого двоичного объекта источника и приемника.

| Свойство "Действие копирования" | Свойство "Набор данных" |
|:--- |:--- |
| skipHeaderLineCount в BlobSource |skipLineCount и firstRowAsHeader. Строки пропускаются сначала и читается hello первую строку как заголовок. |
| treatEmptyAsNull в BlobSource |treatEmptyAsNull во входном наборе данных |
| blobWriterAddHeader в BlobSink |firstRowAsHeader в выходном наборе данных |

Подробную информацию об этих свойствах см. в разделе [Определение TextFormat](data-factory-supported-file-and-compression-formats.md#text-format).    

### <a name="recursive-and-copybehavior-examples"></a>Примеры recursive и copyBehavior
Этот раздел описывает поведение функции hello операции копирования для различных сочетаний значений рекурсивные и copyBehavior hello.

| recursive | copyBehavior | Результаты выполнения операции |
| --- | --- | --- |
| Да |preserveHierarchy |Для исходной папки Folder1 с hello следующие структуры: <br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5<br/><br/>Hello целевую папку Folder1 создается с таким же структуру как исходной hello hello<br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5 |
| Да |flattenHierarchy |Для исходной папки Folder1 с hello следующие структуры: <br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5<br/><br/>целевой Hello папка1 создана следующая структура hello: <br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл1"<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл2"<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл3"<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл4"<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл5" |
| Да |mergeFiles |Для исходной папки Folder1 с hello следующие структуры: <br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5<br/><br/>целевой Hello папка1 создана следующая структура hello: <br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Содержимое файлов "Файл1", "Файл2", "Файл3", "Файл4" и "Файл5" объединяется в один файл с автоматически созданным именем. |
| нет |preserveHierarchy |Для исходной папки Folder1 с hello следующие структуры: <br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5<br/><br/>Hello целевую папку Folder1 создается с следующая структура hello<br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/><br/><br/>Папка "Вложенная_папка1" с файлами "Файл3", "Файл4" и "Файл5" не будет включена в эту папку. |
| нет |flattenHierarchy |Для исходной папки Folder1 с hello следующие структуры:<br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5<br/><br/>Hello целевую папку Folder1 создается с следующая структура hello<br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл1"<br/>&nbsp;&nbsp;&nbsp;&nbsp;Автоматически созданное имя для "Файл2"<br/><br/><br/>Папка "Вложенная_папка1" с файлами "Файл3", "Файл4" и "Файл5" не будет включена в эту папку. |
| нет |mergeFiles |Для исходной папки Folder1 с hello следующие структуры:<br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Файл2<br/>&nbsp;&nbsp;&nbsp;&nbsp;Вложенная_папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл3<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл4<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Файл5<br/><br/>Hello целевую папку Folder1 создается с следующая структура hello<br/><br/>Папка1<br/>&nbsp;&nbsp;&nbsp;&nbsp;Содержимое файлов "Файл1" и "Файл2" объединяется в один файл с автоматически созданным именем. Автоматически созданное имя для "Файл1"<br/><br/>Папка "Вложенная_папка1" с файлами "Файл3", "Файл4" и "Файл5" не будет включена в эту папку. |

## <a name="walkthrough-use-copy-wizard-toocopy-data-tofrom-blob-storage"></a>Пошаговое руководство: Использование мастера копирования toocopy данных из хранилища больших двоичных объектов
Давайте взглянем на как tooquickly копирование данных из Azure хранилище больших двоичных объектов. В этом пошаговом руководстве используются исходное и целевое хранилища данных типа хранилище BLOB-объектов Azure. Hello конвейера в этом пошаговом руководстве копирует данные из tooanother папки в hello же контейнер больших двоичных объектов. В этом пошаговом руководстве будет намеренно простые tooshow параметры или свойства при использовании хранилища BLOB-объектов в качестве источника или приемника. 

### <a name="prerequisites"></a>Предварительные требования
1. Создайте **учетную запись хранения Azure** общего назначения, если у вас ее нет. Использовать хранилище больших двоичных объектов hello как **источника** и **назначения** хранилище данных в этом пошаговом руководстве. При отсутствии учетной записи хранилища Azure в разделе hello [создать учетную запись хранилища](../storage/common/storage-create-storage-account.md#create-a-storage-account) статьи для действия toocreate один.
2. Создание контейнера BLOB-объекта с именем **adfblobconnector** в учетной записи хранения hello. 
4. Создайте папку с именем **ввода** в hello **adfblobconnector** контейнера.
5. Создайте файл с именем **emp.txt** с hello после содержимого и передать его toohello **ввода** папки с помощью средств, таких как [обозреватель хранилищ Azure](https://azurestorageexplorer.codeplex.com/)
    ```json
    John, Doe
    Jane, Doe
    ```
### <a name="create-hello-data-factory"></a>Создание фабрики данных hello
1. Войдите в toohello [портал Azure](https://portal.azure.com).
2. Нажмите кнопку **+ создать** в левом верхнем углу hello, выберите **аналитики + аналитика**и нажмите кнопку **фабрики данных**.
3. В hello **новую фабрику данных** колонки:   
    1. Введите **ADFBlobConnectorDF** для hello **имя**. Имя фабрики данных Azure hello Hello должно быть глобально уникальным. Если ошибка hello: `*Data factory name “ADFBlobConnectorDF” is not available`, измените имя hello hello фабрики данных (например, yournameADFBlobConnectorDF) и повторите попытку создания. Ознакомьтесь со статьей [Фабрика данных Azure — правила именования](data-factory-naming-rules.md) , чтобы узнать о правилах именования артефактов фабрики данных.
    2. Выберите свою **подписку Azure**.
    3. Группа ресурсов выберите **использовать существующие** tooselect для существующих ресурсов группы (или) выберите **создать новый** tooenter имя для группы ресурсов.
    4. Выберите **расположение** для фабрики данных hello.
    5. Выберите **toodashboard ПИН-код** флажок hello нижней части колонки hello.
    6. Щелкните **Создать**.
3. После завершения создания hello, вы видите hello **фабрики данных** колонки, как показано в hello после изображения: ![Домашняя страница фабрики данных](./media/data-factory-azure-blob-connector/data-factory-home-page.png)

### <a name="copy-wizard"></a>Мастер копирования
1. На домашней странице hello фабрики данных, нажмите кнопку hello **копирование данных [Предварительная версия]** плитки toolaunch **мастер копирования данных** на отдельной вкладке.    
    
    > [!NOTE]
    >    При появлении этого веб-браузер hello застряла в «Авторизации...», отключить или снимите **блокировать сторонние файлы cookie и данным сайта** параметра (или) Оставьте включенным и создание исключения для **login.microsoftonline.com**, затем попытайтесь еще раз запустить мастер hello.
2. В hello **свойства** страницы:
    1. Введите **CopyPipeline** в качестве **имени задачи**. Имя задачи Hello — имя hello hello конвейера в фабрике данных.
    2. Введите **описание** для задачи «hello» (необязательно).
    3. Для **последовательность задач или расписании задач**, сохранить hello **регулярно выполнять по расписанию** параметр. Toorun многократно выполнять эту задачу только один раз, а не по расписанию, установите **выполнить один раз**. Если выбрать переключатель **Run once now** (Выполнить один раз), будет создан [одноразовый конвейер](data-factory-create-pipelines.md#onetime-pipeline). 
    4. Сохраните параметры hello для **шаблон периодически**. Эта задача выполняется ежедневно чтобы между hello, начала и окончания раз можно указать в следующем шаге hello.
    5. Изменение hello **Дата-время начала** слишком**04/21/2017 г.**. 
    6. Изменение hello **время Дата окончания** слишком**04/25/2017 г.**. Вы можете tootype hello даты вместо перехода через hello календаря.     
    8. Щелкните **Далее**.
      ![Средство копирования — страница "Свойства"](./media/data-factory-azure-blob-connector/copy-tool-properties-page.png) 
3. На hello **хранилище данных источника** щелкните **хранилища больших двоичных объектов** плитки. Использовать хранилище страницы toospecify hello источника данных для копирования задачу hello. Вы можете использовать существующую связанную службу хранилища данных или указать новое хранилище данных. toouse существующей связанной службы, необходимо выбрать **из СУЩЕСТВУЮЩИХ СВЯЗАННЫХ СЛУЖБ** и выберите hello правой связанной службы. 
    ![Средство копирования — страница "Исходное хранилище данных"](./media/data-factory-azure-blob-connector/copy-tool-source-data-store-page.png)
4. На hello **укажите учетную запись хранилища больших двоичных объектов Azure hello** страницы:
   1. Сохранить hello автоматически созданным именем для **имя подключения**. Имя подключения Hello является именем hello hello связанной службы типа: хранилища Azure. 
   2. Убедитесь, что в качестве **метода выбора учетной записи** выбран вариант **From Azure subscriptions** (Из подписок Azure).
   3. В поле **Подписка Azure** выберите свою подписку Azure или оставьте значение **Select all** (Выбрать все).   
   4. Выберите **учетной записи хранилища Azure** из hello список хранилища Azure учетные записи, доступные в hello выбранной подписки. Можно также выбрать tooenter параметры учетной записи хранилища вручную, выбрав **вручную ввести** параметр для hello **учетной записи метод выбора**.
   5. Щелкните **Далее**. 
      ![Средство копирования — указать учетную запись хранилища больших двоичных объектов Azure hello](./media/data-factory-azure-blob-connector/copy-tool-specify-azure-blob-storage-account.png)
5. На **выбрать hello входной файл или папку** страницы:
   1. Дважды щелкните **adfblobcontainer**.
   2. Выберите **input** и нажмите кнопку **Выбрать**. В этом пошаговом руководстве выбирается hello папка входных данных. Можно также выбрать hello emp.txt файл в папке hello вместо него. 
      ![Средство копирования: Выбор hello входного файла или папки](./media/data-factory-azure-blob-connector/copy-tool-choose-input-file-or-folder.png)
6. На hello **выбрать hello входной файл или папку** страницы:
    1. Убедитесь, что hello **файла или папки** задано слишком**adfblobconnector или ввода**. Если hello файлы во вложенных папках, например, 2017 г/04/01 2017 г/04/02 и т. д., введите adfblobconnector/входные данные / {year} / {month} / {day} для файла или папки. При нажатии клавиши TAB вне hello текстовое поле, вы увидите три формата tooselect раскрывающиеся списки года (гггг), month (MM) и день (dd). 
    2. Не устанавливайте флажок **Copy file recursively** (Копировать файл рекурсивно). Выберите перекрестной toorecursively этот параметр по папкам для назначения копируются toohello toobe файлов. 
    3. Здравствуйте, не **двоичного копирования** параметр. Выберите этот параметр tooperform двоичные копию исходного файла toohello назначения. Не устанавливайте в данном пошаговом руководстве, чтобы вы могли видеть дополнительные параметры в следующих страницах hello. 
    4. Убедитесь, что hello **тип сжатия** задано слишком**нет**. Выберите значение для этого параметра, если исходные файлы будут сжаты в одном из форматов hello поддерживается. 
    5. Щелкните **Далее**.
    ![Средство копирования: Выбор hello входного файла или папки](./media/data-factory-azure-blob-connector/chose-input-file-folder.png) 
7. На hello **настроек формата файла** страницы, появятся разделители hello и hello схему, которая определяется автоматически мастером hello путем синтаксического анализа файла hello. 
    1. Подтвердите hello следующие варианты:. Hello **формат файла** задано слишком**текстовом формате**. Вы увидите все форматы hello поддерживается в раскрывающемся списке hello. Например, JSON, Avro, ORC, Parquet.
        b. Hello **разделитель столбцов** задано слишком`Comma (,)`. Вы увидите hello другие поддерживаемые фабрикой данных в раскрывающемся списке hello разделители столбцов. Вы также можете указать пользовательский разделитель.
        c. Hello **разделитель строк** задано слишком`Carriage Return + Line feed (\r\n)`. Вы увидите hello другие поддерживаемые фабрикой данных в раскрывающемся списке hello разделителей строк. Вы также можете указать пользовательский разделитель.
        d. Hello **пропустить число строк** задано слишком**0**. Если требуется несколько toobe строк пропущен в начале hello hello файла, введите здесь номер hello.
        д.  Hello **первая строка данных содержит имена столбцов** не задано. Если исходные файлы hello содержат имена столбцов в первой строке hello, выберите этот параметр.
        f. Hello **значение пустой столбец рассматривается как null** был установлен.
    2. Разверните **Дополнительные параметры** toosee дополнительный параметр доступен.
    3. Hello нижней части страницы приветствия, в разделе hello **предварительного просмотра** данных из файла emp.txt hello.
    4. Нажмите кнопку **СХЕМЫ** tab в hello нижней toosee hello схем, мастер копирования hello вывести путем просмотра данных hello в исходном файле hello.
    5. Нажмите кнопку **Далее** после проверки разделители hello и предварительного просмотра данных.
    ![Средство копирования — параметры формата файла](./media/data-factory-azure-blob-connector/copy-tool-file-format-settings.png)  
8. На hello **хранения данных назначения страницы**выберите **хранилища больших двоичных объектов**и нажмите кнопку **Далее**. Оба hello исходного и конечного хранилищ данных в этом пошаговом руководстве используются hello хранилища больших двоичных объектов.    
    ![Мастер копирования — выбор целевого хранилища данных](media/data-factory-azure-blob-connector/select-destination-data-store.png)
9. На **укажите учетную запись хранилища больших двоичных объектов Azure hello** страницы:
   1. Введите **AzureStorageLinkedService** для hello **имя подключения** поля.
   2. Убедитесь, что в качестве **метода выбора учетной записи** выбран вариант **From Azure subscriptions** (Из подписок Azure).
   3. Выберите свою **подписку Azure**.  
   4. Выберите свою учетную запись хранения Azure. 
   5. Щелкните **Далее**.     
10. На hello **hello Выбор выходного файла или папки** страницы: 
    6. В поле **Путь к папке** укажите **adfblobconnector/output/{год}/{месяц}/{день}**. Нажмите клавишу **TAB**.
    7. Для hello **года**выберите **гггг**.
    8. Для hello **месяц**, убедитесь, что оно задано слишком**мм**.
    9. Для hello **день**, убедитесь, что оно задано слишком**дд**.
    10. Убедитесь, что hello **тип сжатия** задано слишком**нет**.
    11. Убедитесь, что hello **скопируйте поведение** задано слишком**выполнить слияние файлов**. Если hello выходной файл с таким же именем уже существует hello, hello новое содержимое будет добавлено toohello тот же файл в конце hello.
    12. Щелкните **Далее**.
    ![Средство копирования — выбор выходного файла или папки](media/data-factory-azure-blob-connector/choose-the-output-file-or-folder.png)
11. На hello **настроек формата файла** , проверьте параметры hello и нажмите кнопку **Далее**. Одна из hello здесь дополнительные параметры — tooadd файл заголовка toohello выходных данных. Если выбран этот параметр, строку заголовка добавляется с именами столбцов hello из схемы hello hello источника. Имена столбцов по умолчанию hello можно переименовать при просмотре hello схему для источника hello. Например можно изменить hello tooFirst первого столбца Name и второй столбец tooLast имя. Затем hello выходной файл создается с заголовком с этими именами, как имена столбцов. 
    ![Средство копирования — параметры формата файла для назначения](media/data-factory-azure-blob-connector/file-format-destination.png)
12. На hello **параметры производительности** убедитесь, что **облако единицы** и **параллельные копии** заданы слишком**автоматически**и нажмите кнопку Далее. Дополнительные сведения об этих параметрах см. в [руководстве по производительности и настройке действия копирования](data-factory-copy-activity-performance.md#parallel-copy).
    ![Средство копирования — параметры производительности](media/data-factory-azure-blob-connector/copy-performance-settings.png) 
14. На hello **Сводка** , просмотрите все параметры (свойства задачи, параметры для источника и назначения и копии) и нажмите кнопку **Далее**.
    ![Средство копирования — страница "Сводка"](media/data-factory-azure-blob-connector/copy-tool-summary-page.png)
15. Просмотрите сведения в hello **Сводка** и нажмите кнопку **Готово**. Hello мастер создает две связанные службы, два набора данных (ввода и вывода) и один конвейер в фабрике данных hello (из которой запущено приветствия мастера копирования).
    ![Средство копирования — страница "Развертывание"](media/data-factory-azure-blob-connector/copy-tool-deployment-page.png)

### <a name="monitor-hello-pipeline-copy-task"></a>Монитор hello конвейера (задача copy)

1. Щелкните ссылку hello `Click here toomonitor copy pipeline` на hello **развертывания** страницы. 
2. Вы увидите hello **отслеживать и контролировать приложения** на отдельной вкладке.  ![Приложение для мониторинга и управления](media/data-factory-azure-blob-connector/monitor-manage-app.png)
3. Изменение hello **запустить** время вверху hello слишком`04/19/2017` и **окончания** время слишком`04/27/2017`и нажмите кнопку **применить**. 
4. Вы увидите пять окон действий в hello **действия WINDOWS** списка. Hello **WindowStart** раз должен охватывать все дней после окончания toopipeline начало конвейера. 
5. Нажмите кнопку **обновление** кнопки для hello **действия WINDOWS** несколько раз, пока не увидите hello состояние всех окон действие hello установлено tooReady. 
6. Теперь убедитесь, что hello выходные файлы создаются в выходной папке hello adfblobconnector контейнера. Вы должны увидеть hello следующая структура папок в выходной папке hello. 
    ```
    2017/04/21
    2017/04/22
    2017/04/23
    2017/04/24
    2017/04/25    
    ```
Подробные сведения о мониторинге фабрик данных и управлении ими см. в статье [Мониторинг конвейеров фабрики данных Azure и управление ими с помощью приложения для мониторинга и управления](data-factory-monitor-manage-app.md). 
 
### <a name="data-factory-entities"></a>Сущности фабрики данных
Перейдите назад toohello вкладка с домашней страницы приветствия фабрики данных. Обратите внимание, что в фабрике данных теперь есть две связанные службы, два набора данных и один конвейер. 

![Домашняя страница фабрики данных с сущностями](media/data-factory-azure-blob-connector/data-factory-home-page-with-numbers.png)

Нажмите кнопку **автор и развернуть** toolaunch редактор фабрики данных. 

![Редактор фабрики данных](media/data-factory-azure-blob-connector/data-factory-editor.png)

Вы должны увидеть hello, следуя фабрики данных сущности в вашей фабрике данных. 

 - Две связанные службы: Одно для источника hello и hello, другой для назначения hello. Обе службы hello связаны ссылаться toohello учетную запись хранилища Azure в этом пошаговом руководстве. 
 - Два набора данных: входной и выходной. В этом пошаговом руководстве используются hello же больших двоичных объектов контейнера, но ссылаться toodifferent папок (ввода и вывода).
 - Один конвейер. конвейер Hello содержит операции копирования, которая использует источник больших двоичных объектов и данных BLOB-объект приемника toocopy из tooanother расположение BLOB-объектов Azure расположение BLOB-объектов Azure. 

Hello следующих разделах содержатся дополнительные сведения об этих сущностях. 

#### <a name="linked-services"></a>Связанные службы
Вы должны видеть две связанные службы: Одно для источника hello и hello, другой для назначения hello. В этом пошаговом руководстве представлены оба вида определения hello таким же за исключением имен hello. Hello **тип** hello связанной службы задано слишком**AzureStorage**. Наиболее важные свойства определения службы hello связаны — hello **connectionString**, который используется для tooyour tooconnect фабрики данных учетной записи хранилища Azure во время выполнения. Игнорируйте свойство hubName hello в определении hello. 

##### <a name="source-blob-storage-linked-service"></a>Связанная служба исходного хранилища больших двоичных объектов
```json
{
    "name": "Source-BlobStorage-z4y",
    "properties": {
        "type": "AzureStorage",
        "typeProperties": {
            "connectionString": "DefaultEndpointsProtocol=https;AccountName=mystorageaccount;AccountKey=**********"
        }
    }
}
```

##### <a name="destination-blob-storage-linked-service"></a>Связанная служба выходного хранилища больших двоичных объектов

```json
{
    "name": "Destination-BlobStorage-z4y",
    "properties": {
        "type": "AzureStorage",
        "typeProperties": {
            "connectionString": "DefaultEndpointsProtocol=https;AccountName=mystorageaccount;AccountKey=**********"
        }
    }
}
```

Дополнительные сведения о связанной службе хранилища Azure см. в разделе [Свойства связанной службы](#linked-service-properties). 

#### <a name="datasets"></a>Наборы данных
Есть два набора данных: входной и выходной. Тип Hello hello набора данных установлен слишком**AzureBlob** для обоих. 

Входной набор данных Hello указывает toohello **ввода** папки hello **adfblobconnector** контейнер больших двоичных объектов. Hello **внешних** задано слишком**true** для этого набора данных как hello данные не создаются конвейером hello действием копирования hello, которое принимает этот набор данных в качестве входных данных. 

Hello выходной набор данных точек toohello **выходные данные** папки hello же контейнер больших двоичных объектов. Hello выходной набор данных также использует hello год, месяц и день hello **SliceStart** переменных toodynamically системы оценки hello путь для выходного файла hello. Список функций и системных переменных, поддерживаемых фабрикой данных Azure, см. в [этой статье](data-factory-functions-variables.md). Hello **внешних** задано слишком**false** (значение по умолчанию), так как этот набор данных создается путем hello конвейера. 

Дополнительные сведения о свойствах, поддерживаемых набором данных большого двоичного объекта Azure, см. в разделе [свойств набора данных](#dataset-properties).

##### <a name="input-dataset"></a>Входной набор данных

```json
{
    "name": "InputDataset-z4y",
    "properties": {
        "structure": [
            { "name": "Prop_0", "type": "String" },
            { "name": "Prop_1", "type": "String" }
        ],
        "type": "AzureBlob",
        "linkedServiceName": "Source-BlobStorage-z4y",
        "typeProperties": {
            "folderPath": "adfblobconnector/input/",
            "format": {
                "type": "TextFormat",
                "columnDelimiter": ","
            }
        },
        "availability": {
            "frequency": "Day",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
```

##### <a name="output-dataset"></a>Выходной набор данных

```json
{
    "name": "OutputDataset-z4y",
    "properties": {
        "structure": [
            { "name": "Prop_0", "type": "String" },
            { "name": "Prop_1", "type": "String" }
        ],
        "type": "AzureBlob",
        "linkedServiceName": "Destination-BlobStorage-z4y",
        "typeProperties": {
            "folderPath": "adfblobconnector/output/{year}/{month}/{day}",
            "format": {
                "type": "TextFormat",
                "columnDelimiter": ","
            },
            "partitionedBy": [
                { "name": "year", "value": { "type": "DateTime", "date": "SliceStart", "format": "yyyy" } },
                { "name": "month", "value": { "type": "DateTime", "date": "SliceStart", "format": "MM" } },
                { "name": "day", "value": { "type": "DateTime", "date": "SliceStart", "format": "dd" } }
            ]
        },
        "availability": {
            "frequency": "Day",
            "interval": 1
        },
        "external": false,
        "policy": {}
    }
}
```

#### <a name="pipeline"></a>Конвейер
конвейер Hello содержит только одно действие. Hello **тип** hello действие задано слишком**копирования**.  В свойства типа hello для действия "hello" существует два раздела: один для источника и hello, другой для приемника. Тип источника Hello задано слишком**BlobSource** как hello действие копирование данных из хранилища больших двоичных объектов. Hello тип приемника задано слишком**BlobSink** как копирование больших двоичных объектов хранилища данных tooa действие hello. Действие копирования Hello InputDataset z4y принимает в качестве входных данных hello и OutputDataset-z4y в качестве выходных данных hello. 

Дополнительные сведения о свойствах, поддерживаемых BlobSource и BlobSink, см. в разделе [свойств действия копирования](#copy-activity-properties). 

```json
{
    "name": "CopyPipeline",
    "properties": {
        "activities": [
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "BlobSource",
                        "recursive": false
                    },
                    "sink": {
                        "type": "BlobSink",
                        "copyBehavior": "MergeFiles",
                        "writeBatchSize": 0,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "InputDataset-z4y"
                    }
                ],
                "outputs": [
                    {
                        "name": "OutputDataset-z4y"
                    }
                ],
                "policy": {
                    "timeout": "1.00:00:00",
                    "concurrency": 1,
                    "executionPriorityOrder": "NewestFirst",
                    "style": "StartOfInterval",
                    "retry": 3,
                    "longRetry": 0,
                    "longRetryInterval": "00:00:00"
                },
                "scheduler": {
                    "frequency": "Day",
                    "interval": 1
                },
                "name": "Activity-0-Blob path_ adfblobconnector_input_->OutputDataset-z4y"
            }
        ],
        "start": "2017-04-21T22:34:00Z",
        "end": "2017-04-25T05:00:00Z",
        "isPaused": false,
        "pipelineMode": "Scheduled"
    }
}
```

## <a name="json-examples-for-copying-data-tooand-from-blob-storage"></a>Примеры JSON для копирования данных tooand из хранилища больших двоичных объектов  
Hello ниже приведены примеры определения образца JSON можно использовать toocreate конвейера с помощью [портал Azure](data-factory-copy-activity-tutorial-using-azure-portal.md) или [Visual Studio](data-factory-copy-activity-tutorial-using-visual-studio.md) или [Azure PowerShell](data-factory-copy-activity-tutorial-using-powershell.md). Они показывают как toocopy tooand данных из хранилища больших двоичных объектов и базы данных SQL Azure. Тем не менее, данные можно скопировать **непосредственно** из любых источников tooany приемников hello указано [здесь](data-factory-data-movement-activities.md#supported-data-stores-and-formats) с помощью hello действие копирования в фабрике данных Azure.

### <a name="json-example-copy-data-from-blob-storage-toosql-database"></a>Пример JSON: Копирование данных из хранилища больших двоичных объектов tooSQL базы данных
Hello следующем образце показано:

1. Связанная служба типа [AzureSqlDatabase](data-factory-azure-sql-connector.md#linked-service-properties).
2. Связанная служба типа [AzureStorage](#linked-service-properties).
3. Входной [набор данных](data-factory-create-datasets.md) типа [AzureBlob](#dataset-properties).
4. Выходной [набор данных](data-factory-create-datasets.md) типа [AzureSqlTable](data-factory-azure-sql-connector.md#dataset-properties).
5. [Конвейер](data-factory-create-pipelines.md) с действием копирования, в котором используются [BlobSource](#copy-activity-properties) и [SqlSink](data-factory-azure-sql-connector.md#copy-activity-properties).

Образец Hello копирует временных рядов данных из таблиц Azure SQL tooan BLOB-объектов Azure каждый час. свойства Hello JSON, используемые в этих примерах описаны в разделах, следующие примеры hello.

**Связанная служба SQL Azure**

```json
{
  "name": "AzureSqlLinkedService",
  "properties": {
    "type": "AzureSqlDatabase",
    "typeProperties": {
      "connectionString": "Server=tcp:<servername>.database.windows.net,1433;Database=<databasename>;User ID=<username>@<servername>;Password=<password>;Trusted_Connection=False;Encrypt=True;Connection Timeout=30"
    }
  }
}
```
**Связанная служба хранилища Azure**

```json
{
  "name": "StorageLinkedService",
  "properties": {
    "type": "AzureStorage",
    "typeProperties": {
      "connectionString": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"
    }
  }
}
```
Фабрика данных Azure поддерживает два типа связанных служб хранилища Azure: **AzureStorage** и **AzureStorageSas**. Для hello первый, укажите строку подключения hello, содержащую ключ учетной записи hello и для hello позже у одного укажите hello Uri подписи общего доступа (SAS). Дополнительные сведения см. в разделе [Связанные службы](#linked-service-properties).  

**Входной набор данных BLOB-объекта Azure**

Данные берутся из нового BLOB-объекта каждый час (frequency: hour, interval: 1). Hello путь и имя папки для большого двоичного объекта hello, динамически оцениваются на основе времени начала hello hello среза, который обрабатывается. путь к папке Hello использует года, месяца и дня время начала hello и имя файла hello час часть времени начала hello. «external»: параметр «true» сообщает фабрики данных, таблица hello фабрики toohello внешних данных и не был создан из действия в фабрике данных hello.

```json
{
  "name": "AzureBlobInput",
  "properties": {
    "type": "AzureBlob",
    "linkedServiceName": "StorageLinkedService",
    "typeProperties": {
      "folderPath": "mycontainer/myfolder/yearno={Year}/monthno={Month}/dayno={Day}/",
      "fileName": "{Hour}.csv",
      "partitionedBy": [
        { "name": "Year", "value": { "type": "DateTime", "date": "SliceStart", "format": "yyyy" } },
        { "name": "Month", "value": { "type": "DateTime", "date": "SliceStart", "format": "MM" } },
        { "name": "Day", "value": { "type": "DateTime", "date": "SliceStart", "format": "dd" } },
        { "name": "Hour", "value": { "type": "DateTime", "date": "SliceStart", "format": "HH" } }
      ],
      "format": {
        "type": "TextFormat",
        "columnDelimiter": ",",
        "rowDelimiter": "\n"
      }
    },
    "external": true,
    "availability": {
      "frequency": "Hour",
      "interval": 1
    },
    "policy": {
      "externalData": {
        "retryInterval": "00:01:00",
        "retryTimeout": "00:10:00",
        "maximumRetry": 3
      }
    }
  }
}
```
**Выходной набор данных SQL Azure**

Образец Hello копирует tooa таблицу данных, с именем «MyTable» в базе данных Azure SQL. Создать таблицу hello в базе данных Azure SQL с hello столько же столбцов, как предполагается, что файл toocontain hello CSV больших двоичных объектов. Новые строки добавляются в таблицу toohello каждый час.

```json
{
  "name": "AzureSqlOutput",
  "properties": {
    "type": "AzureSqlTable",
    "linkedServiceName": "AzureSqlLinkedService",
    "typeProperties": {
      "tableName": "MyOutputTable"
    },
    "availability": {
      "frequency": "Hour",
      "interval": 1
    }
  }
}
```
**Действие копирования в конвейере с BLOB-объектом в качестве источника и базой данных SQL в качестве приемника:**

Hello конвейера содержит операции копирования, настроенные toouse hello входные и выходные наборы данных и является запланированных toorun каждый час. В определении JSON конвейера hello, hello **источника** тип установлен слишком**BlobSource** и **приемник** тип установлен слишком**SqlSink**.

```json
{  
    "name":"SamplePipeline",
    "properties":{  
    "start":"2014-06-01T18:00:00",
    "end":"2014-06-01T19:00:00",
    "description":"pipeline with copy activity",
    "activities":[  
      {
        "name": "AzureBlobtoSQL",
        "description": "Copy Activity",
        "type": "Copy",
        "inputs": [
          {
            "name": "AzureBlobInput"
          }
        ],
        "outputs": [
          {
            "name": "AzureSqlOutput"
          }
        ],
        "typeProperties": {
          "source": {
            "type": "BlobSource"
          },
          "sink": {
            "type": "SqlSink"
          }
        },
       "scheduler": {
          "frequency": "Hour",
          "interval": 1
        },
        "policy": {
          "concurrency": 1,
          "executionPriorityOrder": "OldestFirst",
          "retry": 0,
          "timeout": "01:00:00"
        }
      }
      ]
   }
}
```
### <a name="json-example-copy-data-from-azure-sql-tooazure-blob"></a>Пример JSON: Копирование данных из Azure SQL tooAzure больших двоичных объектов
Hello следующем образце показано:

1. Связанная служба типа [AzureSqlDatabase](data-factory-azure-sql-connector.md#linked-service-properties).
2. Связанная служба типа [AzureStorage](#linked-service-properties).
3. Входной [набор данных](data-factory-create-datasets.md) типа [AzureSqlTable](data-factory-azure-sql-connector.md#dataset-properties).
4. Выходной [набор данных](data-factory-create-datasets.md) типа [AzureBlob](#dataset-properties).
5. [Конвейер](data-factory-create-pipelines.md) с действием копирования, в котором используются [SqlSource](data-factory-azure-sql-connector.md#copy-activity-properties) и [BlobSink](#copy-activity-properties).

Образец Hello копирует данные временного ряда из tooan таблицы Azure SQL BLOB-объектов Azure каждый час. свойства Hello JSON, используемые в этих примерах описаны в разделах, следующие примеры hello.

**Связанная служба SQL Azure**

```json
{
  "name": "AzureSqlLinkedService",
  "properties": {
    "type": "AzureSqlDatabase",
    "typeProperties": {
      "connectionString": "Server=tcp:<servername>.database.windows.net,1433;Database=<databasename>;User ID=<username>@<servername>;Password=<password>;Trusted_Connection=False;Encrypt=True;Connection Timeout=30"
    }
  }
}
```
**Связанная служба хранилища Azure**

```json
{
  "name": "StorageLinkedService",
  "properties": {
    "type": "AzureStorage",
    "typeProperties": {
      "connectionString": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"
    }
  }
}
```
Фабрика данных Azure поддерживает два типа связанных служб хранилища Azure: **AzureStorage** и **AzureStorageSas**. Для hello первый, укажите строку подключения hello, содержащую ключ учетной записи hello и для hello позже у одного укажите hello Uri подписи общего доступа (SAS). Дополнительные сведения см. в разделе [Связанные службы](#linked-service-properties).  

**Входной набор данных SQL Azure**

Образец Hello предполагается создания таблицы «MyTable» в Azure SQL и содержит столбец с именем «timestampcolumn» для временного ряда данных.

Параметр «external»: «true» уведомляет службу фабрики данных, что таблица hello внешних toohello фабрики данных и не был создан из действия в фабрике данных hello.

```json
{
  "name": "AzureSqlInput",
  "properties": {
    "type": "AzureSqlTable",
    "linkedServiceName": "AzureSqlLinkedService",
    "typeProperties": {
      "tableName": "MyTable"
    },
    "external": true,
    "availability": {
      "frequency": "Hour",
      "interval": 1
    },
    "policy": {
      "externalData": {
        "retryInterval": "00:01:00",
        "retryTimeout": "00:10:00",
        "maximumRetry": 3
      }
    }
  }
}
```

**Выходной набор данных BLOB-объекта Azure**

Записывается новый большой двоичный объект tooa каждый час (частота: час, интервал: 1). путь к папке Hello для большого двоичного объекта hello динамически вычисляется на основе времени начала hello hello среза, который обрабатывается. путь к папке Hello использует года, месяца, дня и часа части времени начала hello.

```json
{
  "name": "AzureBlobOutput",
  "properties": {
    "type": "AzureBlob",
    "linkedServiceName": "StorageLinkedService",
    "typeProperties": {
      "folderPath": "mycontainer/myfolder/yearno={Year}/monthno={Month}/dayno={Day}/hourno={Hour}/",
      "partitionedBy": [
        {
          "name": "Year",
          "value": { "type": "DateTime",  "date": "SliceStart", "format": "yyyy" } },
        { "name": "Month", "value": { "type": "DateTime", "date": "SliceStart", "format": "MM" } },
        { "name": "Day", "value": { "type": "DateTime", "date": "SliceStart", "format": "dd" } },
        { "name": "Hour", "value": { "type": "DateTime", "date": "SliceStart", "format": "HH" } }
      ],
      "format": {
        "type": "TextFormat",
        "columnDelimiter": "\t",
        "rowDelimiter": "\n"
      }
    },
    "availability": {
      "frequency": "Hour",
      "interval": 1
    }
  }
}
```

**Действие копирования в конвейере с базой данных SQL в качестве источника и BLOB-объектом в качестве приемника:**

Hello конвейера содержит операции копирования, настроенные toouse hello входные и выходные наборы данных и является запланированных toorun каждый час. В определении JSON конвейера hello, hello **источника** тип установлен слишком**SqlSource** и **приемник** тип установлен слишком**BlobSink**. запрос SQL Hello, указанный для hello **SqlReaderQuery** свойство выбирает данные hello в hello за час toocopy.

```json
{  
    "name":"SamplePipeline",
    "properties":{  
        "start":"2014-06-01T18:00:00",
        "end":"2014-06-01T19:00:00",
        "description":"pipeline for copy activity",
        "activities":[  
              {
                "name": "AzureSQLtoBlob",
                "description": "copy activity",
                "type": "Copy",
                "inputs": [
                  {
                    "name": "AzureSQLInput"
                  }
                ],
                "outputs": [
                  {
                    "name": "AzureBlobOutput"
                  }
                ],
                "typeProperties": {
                    "source": {
                        "type": "SqlSource",
                        "SqlReaderQuery": "$$Text.Format('select * from MyTable where timestampcolumn >= \\'{0:yyyy-MM-dd HH:mm}\\' AND timestampcolumn < \\'{1:yyyy-MM-dd HH:mm}\\'', WindowStart, WindowEnd)"
                      },
                      "sink": {
                        "type": "BlobSink"
                      }
                },
                   "scheduler": {
                      "frequency": "Hour",
                      "interval": 1
                },
                "policy": {
                      "concurrency": 1,
                      "executionPriorityOrder": "OldestFirst",
                      "retry": 0,
                      "timeout": "01:00:00"
                }
              }
         ]
    }
}
```

> [!NOTE]
> toomap столбцы из источника toocolumns набора данных из набора данных приемников, в разделе [сопоставление столбцов набора данных в фабрике данных Azure](data-factory-map-columns.md).

## <a name="performance-and-tuning"></a>Производительность и настройка
В разделе [производительности для действия копирования & руководство по настройке](data-factory-copy-activity-performance.md) toolearn о ключе факторы, оказывают влияние на производительность перемещения данных (действие копирования) в фабрике данных Azure и различных способов toooptimize его.
