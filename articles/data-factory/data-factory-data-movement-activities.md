---
title: "aaaMove данных с помощью действия копирования | Документы Microsoft"
description: "Дополнительные сведения о перемещении данных в конвейерах фабрики данных: перенос данных между облачными хранилищами, а также между локальным и облачным хранилищами. Использование действия копирования."
keywords: "перемещение данных, перенос данных, копирование данных, передача данных"
services: data-factory
documentationcenter: 
author: linda33wj
manager: jhubbard
editor: monicar
ms.assetid: 67543a20-b7d5-4d19-8b5e-af4c1fd7bc75
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/19/2017
ms.author: jingwang
ms.openlocfilehash: 29b74154b9006795ead3b0ee9638a3dbf2c5d831
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="move-data-by-using-copy-activity"></a>Перемещение данных с помощью действия копирования
## <a name="overview"></a>Обзор
В фабрике данных Azure, можно использовать действие копирования toocopy данных между локальными и облачными хранилищами данных. После копирования данных hello можно дополнительно преобразования и анализа. Также можно использовать преобразование toopublish копии действия и результаты анализа для бизнес-аналитики (BI) и использования приложения.

![Роль действия копирования](media/data-factory-data-movement-activities/copy-activity.png)

Действием копирования управляет защищенная, надежная, масштабируемая и [глобально доступная служба](#global). Эта статья содержит сведения о перемещении данных в фабрике данных и в рамках действия копирования.

Сначала давайте рассмотрим, как происходит перенос данных между двумя облачными хранилищами данных, а также между локальным и облачным хранилищами.

> [!NOTE]
> toolearn о действиях см. в общем случае [понимание конвейеры и действия](data-factory-create-pipelines.md).
>
>

### <a name="copy-data-between-two-cloud-data-stores"></a>Копирование данных из одного облачного хранилища в другое
Когда источник и приемник хранилищ данных в облаке hello, действие копирования проходит через следующие этапы toocopy данные из приемника toohello источника hello hello. Служба Hello, лежащих в основе действии копирования:

1. Считывает данные из хранилища данных источника hello.
2. Выполняет сериализацию или десериализацию, сжатие или распаковку, сопоставление столбцов и преобразование данных из одного типа в другой. Он выполняет эти операции на основе конфигураций hello hello входного набора данных, выходной набор данных и действие копирования.
3. Записывает данные toohello целевое хранилище данных.

Hello службы автоматически выбирает перемещения данных hello tooperform оптимальной области hello. Эта область обычно является hello один ближайший toohello приемника хранилища данных.

![Копирование из облака в облако](./media/data-factory-data-movement-activities/cloud-to-cloud.png)

### <a name="copy-data-between-an-on-premises-data-store-and-a-cloud-data-store"></a>Копирование данных из локального хранилища данных в облачное и наоборот
toosecurely перемещения данных между к локальному хранилищу данных и хранилищем данных облака установить шлюз управления данными на локальном компьютере. Шлюз управления данными — это агент, обеспечивающий гибридное перемещение и обработку данных. Его можно установить на hello же компьютера как самого хранилища данных hello или на отдельный компьютер, который имеет доступ к данным toohello хранения.

В этом случае шлюз управления данными выполняет hello сериализации или десериализации, сжатия и распаковки, сопоставления столбцов и преобразование типов. Данные не проходят через hello служба фабрики данных Azure. Вместо этого шлюза управления данными непосредственно записывает hello данных toohello конечное хранилище.

![Копировать из локального хранилища в облако](./media/data-factory-data-movement-activities/onprem-to-cloud.png)

Общие сведения и пошаговые инструкции см. в статье [Перемещение данных между локальными источниками и облаком с помощью шлюза управления данными](data-factory-move-data-between-onprem-and-cloud.md). Подробные сведения об этом агенте см. в статье [Шлюз управления данными](data-factory-data-management-gateway.md).

Также можно перемещать данные из / toosupported данных хранит, размещаются в Azure IaaS виртуальных машин (ВМ) с помощью шлюза управления данными. В этом случае можно установить шлюз управления данными на hello одной виртуальной Машины как самого хранилища данных hello, или на отдельной виртуальной Машины, которая имеет доступ к данным toohello хранения.

## <a name="supported-data-stores-and-formats"></a>Поддерживаемые хранилища данных и форматы
Действие копирования в фабрике данных копирует данные из хранилища данных источника данных хранилища tooa приемника. Фабрика данных поддерживает hello, следуя хранилищ данных. Данные из любого источника, могут быть записаны tooany приемника. Нажмите кнопку toolearn хранилище данных как toocopy tooand данные из этого хранилища.

> [!NOTE] 
> Если требуются toomove данные из хранилища данных, которая не поддерживает действие копирования, используйте **пользовательское действие** в фабрике данных с свою собственную логику для копирования или перемещения данных. Сведения о создании и использовании настраиваемого действия см. в статье [Использование настраиваемых действий в конвейере фабрики данных Azure](data-factory-use-custom-activities.md).

[!INCLUDE [data-factory-supported-data-stores](../../includes/data-factory-supported-data-stores.md)]

> [!NOTE]
> Данные хранятся с * может быть локальным или в Azure IaaS и требуют tooinstall [шлюз управления данными](data-factory-data-management-gateway.md) на машине IaaS на локальном или Azure.

### <a name="supported-file-formats"></a>Поддерживаемые форматы файлов
Можно использовать действие копирования слишком**скопируйте файлы как-—** между хранилищами двух файловых данных, можно пропустить hello [отформатировать раздел](data-factory-create-datasets.md) в hello ввода и вывода определения наборов данных. Hello данные копируются эффективно без сериализации или десериализации.

Действие копирования также считывает из и записывает toofiles в указанных форматов: **текст, JSON, Avro, ORC и Parquet**и кодек сжатия **GZip, Deflate, BZip2 и ZipDeflate** поддерживаются. Дополнительные сведения см. в разделе [Форматы файлов и сжатия данных, поддерживаемые фабрикой данных Azure](data-factory-supported-file-and-compression-formats.md).

Например, можно сделать Копировать hello следующие действия:

* Копирование данных в SQL Server в локальной среде и записи tooAzure хранилища Озера данных в формат ORC.
* Скопируйте файлы в формате текста (CSV) из локальной файловой системы и записать tooAzure большого двоичного объекта в формате Avro.
* Скопируйте ZIP-файл из локальной файловой системы и распаковки затем перемещаться tooAzure хранилища Озера данных.
* Скопируйте данные в формате GZip сжатого текстового (CSV) из больших двоичных объектов Azure и записи tooAzure базы данных SQL.

## <a name="global"></a>Глобально доступное перемещение данных
Фабрика данных Azure доступен только в регионах hello Запад США, восток США и Северной Европе. Однако служба hello, лежащих в основе действие копирования доступна глобально в hello следующие области и географических регионах. глобально доступной топологии Hello обеспечивает перемещение эффективно данных, обычно позволяет избежать прыжков различных регионах. Дополнительные сведения о доступности фабрики данных и перемещения данных в регионе см. на [этой странице](https://azure.microsoft.com/regions/#services).

### <a name="copy-data-between-cloud-data-stores"></a>Копирование данных из одного облачного хранилища данных в другое
Когда источник и приемник хранилищ данных в облаке hello, фабрики данных использует развертывание службы в области hello, которая является ближайшим приемник toohello в hello и тех же данных hello toomove geography. См. в следующей таблице для сопоставления toohello:

| География hello хранилищ данных назначения | Область hello целевое хранилище данных | Регион, используемый для перемещения данных |
|:--- |:--- |:--- |
| США | Восток США | Восток США |
| &nbsp; | Восток США 2 | Восток США 2 |
| &nbsp; | Центральный регион США | Центральный регион США |
| &nbsp; | Северо-центральный регион США | Северо-центральный регион США |
| &nbsp; | Южно-центральный регион США | Южно-центральный регион США |
| &nbsp; | Западно-центральная часть США | Западно-центральная часть США |
| &nbsp; | Запад США | Запад США |
| &nbsp; | Западный регион США 2 | Запад США |
| Канада | Восточная Канада | Центральная Канада |
| &nbsp; | Центральная Канада | Центральная Канада |
| Бразилия | Южная часть Бразилии | Южная часть Бразилии |
| Европа | Северная Европа | Северная Европа |
| &nbsp; | Западная Европа | Западная Европа |
| Великобритания | Западная часть Великобритании | Южная часть Великобритании |
| &nbsp; | Южная часть Великобритании | Южная часть Великобритании |
| Азиатско-Тихоокеанский регион | Юго-Восточная Азия | Юго-Восточная Азия |
| &nbsp; | Восточная Азия | Юго-Восточная Азия |
| Австралия | Восточная часть Австралии | Восточная часть Австралии |
| &nbsp; | Юго-Восточная часть Австралии | Юго-Восточная часть Австралии |
| Япония | Восточная часть Японии | Восточная часть Японии |
| &nbsp; | Западная часть Японии | Восточная часть Японии |
| Индия | Центральная Индия | Центральная Индия |
| &nbsp; | Западная Индия | Центральная Индия |
| &nbsp; | Южная Индия | Центральная Индия |

Кроме того, можно явно указать область hello объекта toobe служба фабрики данных использоваться tooperform hello копирования, указав `executionLocation` свойства в действии копирования `typeProperties`. Поддерживаемые значения для этого свойства перечислены в приведенном выше столбце **Регион, используемый для перемещения данных**. Обратите внимание, что данные проходит через этот регион по сети hello во время копирования. Например, toocopy между Azure хранит в Республике Корея, можно указать `"executionLocation": "Japan East"` tooroute через область на японском языке (см. [образца JSON](#by-using-json-scripts) как ссылку).

> [!NOTE]
> Если область hello объекта hello целевое хранилище данных не находится в предыдущем списке или необнаруживаемых, по умолчанию действие копирования завершается ошибкой, вместо через альтернативный регион, если `executionLocation` указано. со временем необходимо расширить список регионов Hello поддерживается.
>

### <a name="copy-data-between-an-on-premises-data-store-and-a-cloud-data-store"></a>Копирование данных из локального хранилища данных в облачное и наоборот
Когда данные копируются между локальным (виртуальные машины Azure/IaaS) и облачным хранилищами, [шлюз управления данными](data-factory-data-management-gateway.md) выполняет перемещение данных на локальном компьютере или виртуальной машине. Hello не потока данных через службу hello в облаке hello, если вы не используете hello [промежуточное копирования](data-factory-copy-activity-performance.md#staged-copy) возможностей. В этом случае поток данных проходит через hello промежуточного хранения больших двоичных объектов Azure до их записи в хранилище данных приемник hello.

## <a name="create-a-pipeline-with-copy-activity"></a>Создание конвейера с действием копирования
Создать конвейер с действием копирования можно несколькими способами, описанными ниже.

### <a name="by-using-hello-copy-wizard"></a>С помощью мастера копирования hello
Hello мастер копирования фабрики данных помогает toocreate конвейер с действием копирования. В этом конвейере позволяет toocopy данные из поддерживаемых источников toodestinations *без написания JSON* определения связанные службы, наборы данных и конвейеры. В разделе [мастер копирования фабрики данных](data-factory-copy-wizard.md) Дополнительные сведения о мастере hello.  

### <a name="by-using-json-scripts"></a>С помощью сценариев JSON
Редактор фабрики данных можно использовать в hello портал Azure, Visual Studio или Azure PowerShell toocreate определения JSON для конвейера (с помощью действия копирования). Затем можно развернуть его toocreate hello конвейера в фабрике данных. Пошаговые инструкции см. в руководстве [Копирование данных из хранилища BLOB-объектов Azure в базу данных SQL с помощью фабрики данных](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md).    

Свойства JSON (такие как имя, описание, входные и выходные таблицы, политики и т. д.) доступны для всех типов действий. Свойства, доступные в hello `typeProperties` раздел hello действия зависят от типа каждого действия.

Действие копирования hello `typeProperties` раздел изменяется в зависимости от типа hello источников и приемников. Щелкните источник и приемник в hello [поддерживаемые источники и приемники](#supported-data-stores-and-formats) toolearn раздел о свойствах типа, которые поддерживает действие копирования для хранилища данных.

Ниже приведен пример определения JSON.

```json
{
  "name": "ADFTutorialPipeline",
  "properties": {
    "description": "Copy data from Azure blob tooAzure SQL table",
    "activities": [
      {
        "name": "CopyFromBlobToSQL",
        "type": "Copy",
        "inputs": [
          {
            "name": "InputBlobTable"
          }
        ],
        "outputs": [
          {
            "name": "OutputSQLTable"
          }
        ],
        "typeProperties": {
          "source": {
            "type": "BlobSource"
          },
          "sink": {
            "type": "SqlSink"
          },
          "executionLocation": "Japan East"          
        },
        "Policy": {
          "concurrency": 1,
          "executionPriorityOrder": "NewestFirst",
          "retry": 0,
          "timeout": "01:00:00"
        }
      }
    ],
    "start": "2016-07-12T00:00:00Z",
    "end": "2016-07-13T00:00:00Z"
  }
}
```
Hello расписания, определенные в hello выходной набор данных определяет, когда выполняется действие hello (например: **ежедневно**, частоту в виде **день**и интервала как **1**). Hello действие копирует данные из входного набора данных (**источника**) tooan выходной набор данных (**приемник**).

Можно указать более одного входного набора данных tooCopy действия. Они являются используется tooverify hello зависимости перед запуском действия hello. Однако hello данные только из первого набора hello является скопированный toohello результирующем наборе данных. Дополнительные сведения см. в статье [Планирование и исполнение с использованием фабрики данных](data-factory-scheduling-and-execution.md).  

## <a name="performance-and-tuning"></a>Производительность и настройка
В разделе hello [действие копирования производительности и руководство по настройке](data-factory-copy-activity-performance.md), описывающей ключевые факторы, влияющие на производительность hello перемещения данных (действие копирования) в фабрике данных Azure. Также перечислены hello наблюдаемая производительность во время внутреннего тестирования и рассматриваются различные способы toooptimize hello производительности операций копирования.

## <a name="fault-tolerance"></a>Отказоустойчивость
По умолчанию действие копирования будет остановить копирование данных и возврата сбоя при возникновении несовместимые данные между источником и приемником; Хотя явным образом настраивать tooskip и несовместимые строк журнала hello и копировать только эти копии hello toomake совместимых данных выполнено успешно. В разделе hello [отказоустойчивость действие копирования](data-factory-copy-activity-fault-tolerance.md) на дополнительные сведения см.

## <a name="security-considerations"></a>Вопросы безопасности
В разделе hello [вопросы безопасности](data-factory-data-movement-security-considerations.md), описывающей инфраструктура безопасности службы перемещения данных в фабрике данных Azure воспользуйтесь toosecure данными.

## <a name="scheduling-and-sequential-copy"></a>Планирование и последовательное копирование
Подробные сведения о планировании и исполнении в фабрике данных см. в [этой статье](data-factory-scheduling-and-execution.md). Он является возможные toorun несколько операций копирования друг за другом в виде последовательных/упорядочены. В разделе hello [скопируйте последовательно](data-factory-scheduling-and-execution.md#multiple-activities-in-a-pipeline) раздела.

## <a name="type-conversions"></a>Преобразование типов
Различные хранилища данных используют разные собственные системы типов. Действие копирования выполняет автоматического преобразования типов toosink типы источников с подходе двухэтапный hello.

1. Преобразования из типа .NET tooa типы собственного источника.
2. Преобразования типа собственного приемник tooa типа .NET.

Hello сопоставление типа собственный тип tooa системы .NET для хранилища данных — в статье хранилища hello соответствующих данных. (Щелкните ссылку конкретных hello в hello [поддерживается хранилищ данных](#supported-data-stores) таблицы). Эти сопоставления toodetermine соответствующих типов можно использовать при создании таблицы, чтобы действие копирования выполняет преобразования правой hello.

## <a name="next-steps"></a>Дальнейшие действия
* toolearn о hello действия копирования, в разделе [копирования данных из хранилища больших двоичных объектов Azure tooAzure базы данных SQL](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md).
* toolearn о переносе данных из локального хранилища tooa облачных данных хранилище данных, в разделе [перемещения данных из локальных хранилищ данных toocloud](data-factory-move-data-between-onprem-and-cloud.md).
