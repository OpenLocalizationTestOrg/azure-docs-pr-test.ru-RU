---
title: "aaaSecurity рекомендации по перемещению данных в фабрике данных Azure | Документы Microsoft"
description: "Узнайте о безопасном перемещении данных в фабрике данных Azure."
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: monicar
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: abnarain
ms.openlocfilehash: 4bfce8884df14ad5b94e28ad3dfcf7025e2130a3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-data-factory---security-considerations-for-data-movement"></a>Вопросы безопасности при перемещении данных в фабрике данных Azure
## <a name="introduction"></a>Введение
Этой статье описываются основы безопасности инфраструктуры службы перемещения данных в фабрике данных Azure воспользуйтесь toosecure данными. Ресурсы управления фабрики данных Azure созданы на основе инфраструктуры безопасности Azure и используют все возможные меры безопасности, предлагаемые Azure.

С помощью фабрики данных можно создать один или несколько [конвейеров](data-factory-create-pipelines.md)данных. Конвейеры — это логические группы действий, которые вместе отвечают за выполнение задачи. Эти каналы находятся в области hello, где был создан hello фабрики данных. 

Несмотря на то, что фабрика данных доступна только на **Запад США**, **Восток США**, и **Северной Европе** областей, служба перемещения данных hello доступен [глобально доступны в несколько областей](data-factory-data-movement-activities.md#global). Фабрики данных, которую службы гарантирует, что данных не остается географической области / регион Если явно указать hello службы toouse альтернативный регион Если служба перемещения данных hello не развернут еще toothat области. 

Сама фабрика данных Azure не хранит никакие данные, за исключением учетных данных связанной службы для облачных хранилищ данных, зашифрованных с помощью сертификатов. Он позволяет создать управляемые данными рабочие процессы tooorchestrate перемещение данных между [поддерживается хранилищ данных](data-factory-data-movement-activities.md#supported-data-stores-and-formats) и обработки данных с помощью [службы вычислений](data-factory-compute-linked-services.md) в других регионах или в локальной Среда. Оно также позволяет слишком[мониторинг и управление рабочими процессами](data-factory-monitor-manage-pipelines.md) использование обеих программный и механизмы пользовательского интерфейса.

Перемещение данных с помощью фабрики данных Azure было **сертифицировано** для:
-   [HIPAA/HITECH](https://www.microsoft.com/en-us/trustcenter/Compliance/HIPAA);  
-   [ISO/IEC 27001](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27001);  
-   [ISO/IEC 27018](https://www.microsoft.com/en-us/trustcenter/Compliance/ISO-IEC-27018); 
-   [CSA STAR](https://www.microsoft.com/en-us/trustcenter/Compliance/CSA-STAR-Certification).
     
Если вы заинтересованы в Azure соответствия и защита собственной инфраструктурой Azure, посетите hello [Центр управления безопасностью Microsoft](https://www.microsoft.com/TrustCenter/default.aspx). 

В этой статье рассматриваются вопросы безопасности в hello, следующие два сценария перемещения данных: 

- **Облачный сценарий**, в котором источник и приемник являются общедоступными через Интернет. Эти источники данных включают управляемые службы облачного хранения, например служба хранилища Azure, хранилище данных SQL Azure, база данных SQL Azure, Azure Data Lake Store, Amazon S3, Amazon Redshift, службы SaaS (Salesforce) и такие веб-протоколы, как FTP и OData. Полный список поддерживаемых источников данных можно найти [здесь](data-factory-data-movement-activities.md#supported-data-stores-and-formats).
- **Гибридным**— в этом случае источника или назначения находится за брандмауэром или внутри локальной корпоративной сети или hello данных хранилище находится в частной сети, виртуальная сеть (чаще всего hello источника) и не является общедоступным . Этот сценарий также охватывает серверы базы данных, расположенные на виртуальных машинах.

## <a name="cloud-scenarios"></a>Облачные сценарии
###<a name="securing-data-store-credentials"></a>Защита учетных данных хранилища данных
Фабрика данных Azure защищает учетные данные хранилища данных, выполняя их **шифрование** с помощью **сертификатов, управляемых Майкрософт**. Эти сертификаты меняются каждые **два года**. Изменения включают продление сертификата и перемещение учетных данных. Зашифрованные учетные данные безопасно хранятся в **службе хранилища Azure, которая контролируется службами управления фабрики данных Azure**. Дополнительные сведения о безопасности службы хранилища Azure см. [здесь](../security/security-storage-overview.md).

### <a name="data-encryption-in-transit"></a>Шифрование данных при передаче
Если хранилище данных облака hello поддерживает протокол HTTPS или TLS, всех данных, передаваемых между службами перемещения данных в фабрике данных и хранилищем данных облака, через защищенный канал HTTPS или TLS.

> [!NOTE]
> Все соединения слишком**базы данных SQL Azure** и **хранилище данных SQL Azure** всегда требовать шифрования (SSL/TLS) данных во время передачи tooand из базы данных hello время. Во время разработки с помощью редактора JSON конвейера, добавить hello **шифрования** свойства и задать для него слишком**true** в hello **строка подключения**. При использовании hello [мастер копирования](data-factory-azure-copy-wizard.md), hello мастер устанавливает это свойство по умолчанию. Для **хранилища Azure**, можно использовать **HTTPS** в строке подключения hello.

### <a name="data-encryption-at-rest"></a>Шифрование неактивных данных
Некоторые хранилища данных поддерживают шифрование неактивных данных. Мы советуем включить механизм шифрования данных для этих хранилищ данных. 

#### <a name="azure-sql-data-warehouse"></a>Хранилище данных SQL Azure
Прозрачное шифрование данных (TDE) в хранилище данных SQL Azure помогает защиты от угроз вредоносных действий hello, выполняя в реальном времени шифрование и расшифровку статических данных. Такое поведение является прозрачным toohello клиента. Дополнительные сведения см. в статье [Защита базы данных в хранилище данных SQL](../sql-data-warehouse/sql-data-warehouse-overview-manage-security.md).

#### <a name="azure-sql-database"></a>База данных SQL Azure
База данных SQL Azure также поддерживает прозрачное шифрование данных (TDE), который участвует, выполняя в реальном времени шифрование и расшифровка данных hello без необходимости изменения toohello приложения для защиты от угроз вредоносных действий hello. Такое поведение является прозрачным toohello клиента. Дополнительные сведения см. в статье [Transparent Data Encryption with Azure SQL Database](https://docs.microsoft.com/sql/relational-databases/security/encryption/transparent-data-encryption-with-azure-sql-database) (Прозрачное шифрование данных в базе данных SQL Azure). 

#### <a name="azure-data-lake-store"></a>Хранилище озера данных Azure
Хранилище Озера данных Azure также обеспечивает шифрование данных, хранящихся в учетной записи hello. При включении хранилища Озера данных автоматически шифрует данные перед сохранением и расшифровывает до получения, сделав его прозрачным toohello клиента, доступ к данным hello. Дополнительные сведения см. в статье [Обеспечение безопасности в хранилище озера данных Azure](../data-lake-store/data-lake-store-security-overview.md). 

#### <a name="azure-blob-storage-and-azure-table-storage"></a>Хранилище BLOB-объектов Azure и хранилище таблиц Azure
Хранилище Azure хранилища больших двоичных объектов и таблиц Azure поддерживает шифрование службы хранилища (SSE), который автоматически шифрует и расшифровывает до извлечения данных до сохранения toostorage. Дополнительные сведения см. в статье [Шифрование службы хранилища Azure для неактивных данных (предварительная версия)](../storage/common/storage-service-encryption.md).

#### <a name="amazon-s3"></a>Amazon S3
Amazon S3 поддерживает шифрование неактивных данных для сервера и клиента. Дополнительные сведения см. в документации [Protecting Data Using Encryption](http://docs.aws.amazon.com/AmazonS3/latest/dev/UsingEncryption.html) (Защита данных с помощью шифрования). Сейчас фабрика данных не поддерживает Amazon S3 в виртуальном частном облаке.

#### <a name="amazon-redshift"></a>Amazon Redshift
Amazon Redshift поддерживает шифрование неактивных данных кластера. Дополнительные сведения см. в документации [Amazon Redshift Database Encryption](http://docs.aws.amazon.com/redshift/latest/mgmt/working-with-db-encryption.html) (Шифрование базы данных Amazon Redshift). Сейчас фабрика данных не поддерживает Amazon Redshift в виртуальном частном облаке. 

#### <a name="salesforce"></a>Salesforce
SalesForce поддерживает шифрование Shield Platform Encryption, которое позволяет зашифровать все файлы, вложения и настраиваемые поля. Дополнительные сведения см. в разделе [hello понимание потока проверки подлинности OAuth Web Server](https://developer.salesforce.com/docs/atlas.en-us.api_rest.meta/api_rest/intro_understanding_web_server_oauth_flow.htm).  

## <a name="hybrid-scenarios-using-data-management-gateway"></a>Гибридные сценарии (с использованием шлюза управления данных)
Гибридные сценарии требуют toobe шлюз управления данными, которые установлены в локальной сети или в виртуальной сети (Azure) или виртуального частного облака (Amazon). Hello шлюз должен быть доступ tooaccess hello локальных хранилищ данных. Дополнительные сведения о шлюзе hello см. в разделе [шлюз управления данными](data-factory-data-management-gateway.md). 

![Каналы шлюза управления данными](media/data-factory-data-movement-security-considerations/data-management-gateway-channels.png)

Hello **канала команды** обеспечивает связь между службами перемещения данных в фабрике данных и шлюз управления данными. связи Hello содержит сведения о связанных toohello действия. канал данных Hello используется для передачи данных между хранилищами данных локальных и облачных хранилищ данных.    

### <a name="on-premises-data-store-credentials"></a>Учетные данные локального хранилища данных
Hello учетные данные для вашей локальных хранилищ данных хранятся локально (не в облаке hello). Их можно задать тремя разными способами. 

- С помощью **обычного текста** (обеспечивает меньшую защиту) через протокол HTTPS, используя портал Azure или мастер копирования. Hello учетные данные передаются в обычный текст toohello локального шлюза.
- С помощью **библиотеки шифрования JavaScript из мастера копирования**.
- С помощью **диспетчера учетных данных на основе ClickOnce-приложения**. Щелкните Hello-когда приложение выполняет hello на локальном компьютере, которая имеет шлюз toohello доступа и задает учетные данные для хранилища данных hello. Этот параметр и hello следующий являются hello наиболее безопасные параметры. приложение диспетчер учетных данных Hello, по умолчанию использует порт hello 8050 на машине hello со шлюзом для обеспечения безопасной связи.  
- Используйте [New AzureRmDataFactoryEncryptValue](/powershell/module/azurerm.datafactories/New-AzureRmDataFactoryEncryptValue) учетные данные tooencrypt командлета PowerShell. Hello командлет использует hello сертификата, что шлюз находится настроенный toouse tooencrypt hello, учетные данные. Можно использовать учетные данные зашифрованы hello, возвращенный этим командлетом и добавить его слишком**EncryptedCredential** элемент hello **connectionString** в файле JSON hello, который используется с hello [ Новый AzureRmDataFactoryLinkedService](/powershell/module/azurerm.datafactories/new-azurermdatafactorylinkedservice) командлета или в фрагменте кода JSON hello в hello редактор фабрики данных на портале hello. Щелкните этот параметр и hello-после приложения hello наиболее безопасные параметры. 

#### <a name="javascript-cryptography-library-based-encryption"></a>Шифрование на основе библиотеки шифрования JavaScript
Можно зашифровать с помощью учетных данных хранилища данных [библиотеки JavaScript криптографии](https://www.microsoft.com/download/details.aspx?id=52439) из hello [мастер копирования](data-factory-copy-wizard.md). При выборе этого параметра приветствия мастера копирования извлекает открытый ключ шлюза hello и использует ее учетные данные для хранилища данных hello tooencrypt. учетные данные Hello расшифрованы компьютер шлюза hello и защищен Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx).

**Поддерживаемые браузеры:** IE8, IE9, IE10, IE11, Microsoft Edge, последние версии Firefox, Chrome, Opera и Safari. 

#### <a name="click-once-credentials-manager-app"></a>Диспетчер учетных данных ClickOnce-приложения
Можно запустить щелкните hello-после основе приложение диспетчер учетных данных из портала Azure или копирования мастер при создании конвейеров. Это приложение гарантирует, что учетные данные не передаются в виде обычного текста по сети hello. По умолчанию используется порт hello **8050** на машине hello со шлюзом для обеспечения безопасной связи. При необходимости этот порт можно изменить.  
  
![HTTPS-порт для шлюза hello](media/data-factory-data-movement-security-considerations/https-port-for-gateway.png)

В настоящее время шлюз управления данными использует единый **сертификат**. Этот сертификат создается во время установки шлюза hello (применяется tooData шлюз управления создан после ноября 2016 г. и версии 2.4.xxxx.x или более поздней версии). Вы можете заменить этот сертификат собственным сертификатом SSL или TLS. Этот сертификат используется нажатием hello-после toosecurely приложения диспетчер учетных данных, подключиться к компьютеру шлюза toohello для задания учетных данных хранилища данных. Он хранит данные хранилища учетных данных безопасно локально с помощью hello Windows [DPAPI](https://msdn.microsoft.com/library/ms995355.aspx) на машине hello со шлюзом. 

> [!NOTE]
> Более старые шлюзов, которые были установлены до ноября 2016 или 2.3.xxxx.x версии по-прежнему toouse учетные данные шифруются и хранятся в облаке. Даже если обновлении hello шлюза toohello последнюю версию hello учетные данные не перенесенные tooan на локальном компьютере    
  
| Версия шлюза (во время создания) | Хранимые учетные данные | Шифрование и безопасность учетных данных | 
| --------------------------------- | ------------------ | --------- |  
| < = 2.3.xxxx.x | В облаке | Зашифрованные при помощи сертификата (отличающиеся от hello, используемый в приложение диспетчер учетных данных) | 
| > = 2.4.xxxx.x | Локально | Защищен с помощью DPAPI | 
  

### <a name="encryption-in-transit"></a>Шифрование при передаче
Все передача данных осуществляется через безопасный канал **HTTPS** и **TLS по TCP** атак в середине tooprevent во время обмена данными со службами Azure.
 
Можно также использовать [IPSec VPN](../vpn-gateway/vpn-gateway-about-vpn-devices.md) или [Express Route](../expressroute/expressroute-introduction.md) toofurther hello безопасный коммуникационный канал между локальной сетью и Azure.

Виртуальная сеть — это логическое представление сети в облаке hello. В локальной сети tooyour виртуальной сети (VNet) Azure можно подключиться с помощью настройки VPN IPSec (сеть сеть) или Express Route (частного Пиринга)       

Hello Следующая таблица обобщает hello сети и шлюза конфигурации рекомендации на основе различных сочетаний исходное и целевое расположение для перемещения данных гибридных.

| Источник | Место назначения | Конфигурация сети | Установка шлюза |
| ------ | ----------- | --------------------- | ------------- | 
| Локальная система | Виртуальные машины и облачные службы, развернутые в виртуальных сетях | VPN-подключение IPSec (типа "точка — сеть" или "сеть — сеть") | Вы можете установить шлюз на локальной виртуальной машине или виртуальной машине Azure в виртуальной сети. | 
| Локальная система | Виртуальные машины и облачные службы, развернутые в виртуальных сетях | ExpressRoute (частный пиринг) | Вы можете установить шлюз на локальной виртуальной машине или виртуальной машине Azure в виртуальной сети | 
| Локальная система | Службы на базе Azure, у которых есть общедоступная конечная точка | ExpressRoute (общедоступный пиринг) | Шлюз должен быть установлен локально | 

Hello следующих изображениях представлены hello использования шлюза управления данными для перемещения данных между локальной базы данных и служб Azure с помощью Express route и VPN IPSec (с помощью виртуальной сети):

**ExpressRoute:**
 
![Использование ExpressRoute со шлюзом](media/data-factory-data-movement-security-considerations/express-route-for-gateway.png) 

**VPN-подключение IPSec:**

![VPN-подключение IPSec со шлюзом](media/data-factory-data-movement-security-considerations/ipsec-vpn-for-gateway.png)

### <a name="firewall-configurations-and-whitelisting-ip-address-of-gateway"></a>Параметры конфигурации брандмауэра и добавление IP-адреса шлюза в список разрешенных

#### <a name="firewall-requirements-for-on-premisesprivate-network"></a>Требования к брандмауэру для локальной или частной сети  
На предприятии **корпоративного брандмауэра** выполняется на маршрутизаторе центра hello hello организации. И, **брандмауэра Windows** запускается как управляющая программа на локальном компьютере hello какие hello установлен шлюз. 

Hello Следующая таблица содержит **исходящий порт** и требования к домена для hello **корпоративного брандмауэра**.

| Имена доменов | Исходящие порты | Описание |
| ------------ | -------------- | ----------- | 
| `*.servicebus.windows.net` | 443, 80 | Необходимые службам hello шлюза tooconnect toodata перемещения в фабрике данных |
| `*.core.windows.net` | 443 | Используемые hello шлюза tooconnect tooAzure учетной записи хранилища, при использовании hello [промежуточное копирования](data-factory-copy-activity-performance.md#staged-copy) компонентов. | 
| `*.frontend.clouddatahub.net` | 443 | Необходимые условия для hello шлюза tooconnect toohello служба фабрики данных Azure. | 
| `*.database.windows.net` | 1433   | (Необязательно.) Требуется, если местом назначения является база данных SQL Azure или хранилище данных SQL Azure. Используйте hello промежуточное копирования функция toocopy данных tooAzure хранилище данных SQL для базы данных и Azure SQL без открытия hello порт 1433. | 
| `*.azuredatalakestore.net` | 443 | (Необязательно.) Требуется, если местом назначения является Azure Data Lake Store. | 

> [!NOTE] 
> Могут иметь порты toomanage / доменах список утвержденных на hello корпоративного брандмауэра уровень при необходимости по источникам данных. В этой таблице в качестве примеров используются база данных SQL Azure, хранилище данных SQL Azure и Azure Data Lake Store.   

Hello Следующая таблица содержит **входящий порт** требования для hello **брандмауэра windows**.

| Входящие порты | Описание | 
| ------------- | ----------- | 
| 8050 (TCP) | Необходимые условия для hello учетные данные диспетчера приложений toosecurely задание учетных данных для локальных хранилищ данных на шлюзе hello. | 

![Требования к порту шлюза](media\data-factory-data-movement-security-considerations/gateway-port-requirements.png) 

#### <a name="ip-configurations-whitelisting-in-data-store"></a>Конфигурации IP или утвержденный список в хранилище данных
Некоторые из хранилища данных в облаке hello также требуют разрешенных IP-адрес компьютера hello, доступ к ним. Убедитесь, что hello IP-адрес компьютера шлюза hello входят надлежащим образом настраивается в брандмауэре.

Hello следующие облачные хранилища данных требуется разрешенных IP-адрес компьютера шлюза hello. Некоторые из этих хранилищ данных по умолчанию не может потребоваться добавление hello IP-адреса в список разрешений. 

- [База данных SQL Azure;](../sql-database/sql-database-firewall-configure.md) 
- [Хранилище данных Azure SQL](../sql-data-warehouse/sql-data-warehouse-get-started-provision.md#create-a-server-level-firewall-rule-in-the-azure-portal)
- [Хранилище озера данных Azure](../data-lake-store/data-lake-store-secure-data.md#set-ip-address-range-for-data-access)
- [Azure Cosmos DB](../documentdb/documentdb-firewall-support.md)
- [Amazon Redshift](http://docs.aws.amazon.com/redshift/latest/gsg/rs-gsg-authorize-cluster-access.html) 

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

**Вопрос:** могут hello шлюза совместно использоваться фабрики данных?
**Ответ**. В настоящее время эта функция не поддерживается. Но мы работаем над этим.

**Вопрос:** hello требования порта для hello toowork шлюза?
**Ответ:** tooopen HTTP-подключений принимаются шлюзом Интернета. Hello **исходящие порты 443 и 80** должен быть открыт для toomake шлюза этого подключения. Откройте **входящий порт 8050** только на уровне машины hello (не на уровне корпоративного брандмауэра) для приложения диспетчера учетных данных. Если используется база данных SQL Azure или хранилище данных SQL Azure как источника и назначения, а затем при необходимости tooopen **1433** также порт. Дополнительные сведения см. в разделе [о параметрах конфигурации брандмауэра и утвержденном списке IP-адресов](#firewall-configurations-and-whitelisting-ip-address-of gateway). 

**Вопрос**. Каковы требования сертификата к шлюзу?
**Ответ:** текущий шлюз требуется сертификат, используемый приложением диспетчер учетных данных hello безопасно настройки учетных данных хранилища данных. Этот сертификат является самозаверяющий сертификат, который создается и настраивается путем установки шлюза hello. Вместо этого сертификата вы можете использовать собственный сертификат TLS или SSL. Дополнительные сведения см. в разделе о [диспетчере учетных данных ClickOnce-приложения](#click-once-credentials-manager-app). 

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о производительности действия копирования см. в [руководстве о производительности действия копирования и его настройке](data-factory-copy-activity-performance.md).

 
