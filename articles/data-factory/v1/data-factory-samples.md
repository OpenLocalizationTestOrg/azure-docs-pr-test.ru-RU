---
title: "Фабрика данных Azure — примеры"
description: "Подробное описание примеров, поставляемых со службой фабрики данных Azure."
services: data-factory
documentationcenter: 
author: sharonlo101
manager: jhubbard
editor: monicar
ms.assetid: c0538b90-2695-4c4c-a6c8-82f59111f4ab
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/10/2018
ms.author: shlo
robots: noindex
ms.openlocfilehash: e72cdee5b164fcd4944f4f1f95ff22bb5ceba6a4
ms.sourcegitcommit: 9cc3d9b9c36e4c973dd9c9028361af1ec5d29910
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2018
---
# <a name="azure-data-factory---samples"></a>Фабрика данных Azure — примеры
> [!NOTE]
> Статья относится к версии 1 фабрики данных, которая является общедоступной версией. Если вы используете версию 2 службы фабрики данных, которая находится на этапе предварительной версии, см. [примеры PowerShell в фабрике данных версии 2](../samples-powershell.md) и [примеры кода в галерее Azure](https://azure.microsoft.com/en-us/resources/samples/?service=data-factory).


## <a name="samples-on-github"></a>Примеры на GitHub
В [репозитории GitHub Azure-DataFactory](https://github.com/azure/azure-datafactory) предлагается несколько примеров, которые помогут вам быстро приступить к работе со службой фабрики данных Azure или настроить сценарии для использования в собственном приложении. Папка Samples\JSON содержит фрагменты JSON для распространенных сценариев.

| Образец | ОПИСАНИЕ |
|:--- |:--- |
| [Пошаговое руководство по ADF](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/ADFWalkthrough) |Этот пример представляет собой сквозное руководство по обработке файлов журналов с помощью фабрики данных Azure для преобразования данных из файлов журналов в аналитические данные. <br/><br/>В этом руководстве конвейер фабрики данных собирает примеры журналов, обрабатывает и дополняет их эталонными данными из журналов, а также преобразует сведения, чтобы оценить эффективность недавно запущенной маркетинговой кампании. |
| [Примеры JSON](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/JSON) |В этой выборке представлены примеры кода JSON для распространенных сценариев. |
| [Пример загрузчика данных HTTP](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/HttpDataDownloaderSample) |В этой выборке демонстрируется скачивание данных из конечной точки HTTP в хранилище BLOB-объектов Azure с помощью настраиваемого действия .NET. |
| [Пример действия перекрестного домена приложения .NET](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/CrossAppDomainDotNetActivitySample) |Этот пример позволяет создать настраиваемое действие .NET, не ограниченное версиями сборок, которые используются средством запуска фабрики данных Azure (например, WindowsAzure.Storage версии 4.3.0, Newtonsoft.Json версии 6.0.x и т. д.). |
| [Запуск сценария R](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/RunRScriptUsingADFSample) |Этот пример включает пользовательское действие фабрики данных, которое можно использовать для вызова файла RScript.exe. Этот пример работает только с вашим собственным кластером HDInsight (не по требованию), в которое уже установлен R. |
| [Вызов заданий Spark в кластере HDInsight Hadoop](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/Spark) |В этом примере показано, как использовать действие MapReduce для запуска программы Spark. Программа Spark просто копирует данные из одного контейнера BLOB-объектов Azure в другой. |
| [Анализ Twitter с использованием действия пакетной оценки показателей машинного обучения Azure](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/TwitterAnalysisSample-AzureMLBatchScoringActivity) |В этом примере показано, как использовать AzureMLBatchScoringActivity для вызова модели машинного обучения Azure, которая выполняет анализ мнений с помощью Twitter, оценку, прогноз и т. д. |
| [Анализ Twitter с использованием настраиваемого действия](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/TwitterAnalysisSample-CustomC%23Activity) |В этом примере показано, как использовать настраиваемое действие .NET для вызова модели машинного обучения Azure, которая выполняет анализ мнений с помощью Twitter, оценку, прогноз и т. д. |
| [Параметризованные конвейеры для машинного обучения Azure](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/ParameterizedPipelinesForAzureML/) |Пример содержит полный код C# для развертывания N конвейеров для оценки и повторного обучения с различными параметрами регионов (список регионов берется из файла parameters.txt, включенного в этот пример). |
| [Обновление эталонных данных для заданий в службе Azure Stream Analytics](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/ReferenceDataRefreshForASAJobs) |В этом примере показано, как использовать фабрику данных Azure и службу Azure Stream Analytics для выполнения запросов с эталонными данными и настройки обновления эталонных данных по расписанию. |
| [Гибридный конвейер с локальным кластером Hadoop Hortonworks](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/HybridPipelineWithOnPremisesHortonworksHadoop) |В этом примере локальный кластер Hadoop используется как целевой объект для выполнения заданий в фабрике данных, аналогично другим объектам вычислений, таким как кластер Hadoop на основе HDInsight в облаке. |
| [Средство преобразования JSON](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/JSONConversionTool) |Позволяет преобразовать JSON из версии до 2015-07-01-preview в последнюю доступную версию или в версию 2015-07-01-preview (по умолчанию). |
| [Пример входного файла U-SQL](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/U-SQL%20Sample%20Input%20File) |Это пример файла, который используется действием U-SQL. |
| [Удаление файла большого двоичного объекта](https://github.com/Azure/Azure-DataFactory/tree/master/Samples/DeleteBlobFileFolderCustomActivity) | В этом примере демонстрируется файл C#, который можно использовать как часть настраиваемого действия .NET ADF для удаления файлов из исходного расположения больших двоичных объектов Azure после копирования файлов.|

## <a name="azure-resource-manager-templates"></a>Шаблоны Azure Resource Manager
Следующие шаблоны Azure Resource Manager для фабрики данных можно найти на портале GitHub.

| Шаблон | ОПИСАНИЕ |
| --- | --- |
| [Копирование из хранилища BLOB-объектов Azure в базу данных SQL Azure](https://github.com/Azure/azure-quickstart-templates/tree/master/101-data-factory-blob-to-sql-copy) |Развертывание этого шаблона создает фабрику данных Azure с конвейером, который копирует данные из указанного хранилища BLOB-объектов Azure в базу данных SQL Azure. |
| [Копирование из Salesforce в хранилище BLOB-объектов Azure](https://github.com/Azure/azure-quickstart-templates/tree/master/101-data-factory-salesforce-to-blob-copy) |Развертывание этого шаблона создает фабрику данных Azure с конвейером, который копирует данные из указанной учетной записи Salesforce в хранилище BLOB-объектов Azure. |
| [Преобразование данных путем запуска сценария Hive в кластере Azure HDInsight](https://github.com/Azure/azure-quickstart-templates/tree/master/101-data-factory-hive-transformation) |Развертывание этого шаблона создает фабрику данных Azure с конвейером, который преобразовывает данные путем запуска примера сценария Hive в кластере Azure HDInsight (Hadoop). |

## <a name="samples-in-azure-portal"></a>Примеры на портале Azure
Воспользуйтесь элементом **Примеры конвейеров** на домашней странице фабрики данных, чтобы развернуть примеры конвейеров и их связанные сущности (наборы данных и связанные службы) в фабрике данных.

1. Создайте или откройте существующую фабрику данных. Инструкции по созданию фабрики данных см. в статье [Копирование данных из хранилища BLOB-объектов Azure в базу данных SQL с помощью фабрики данных](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md).
2. В колонке **ФАБРИКА ДАННЫХ** для этой фабрики данных щелкните элемент **Примеры конвейеров**.

    ![Плитка "Примеры конвейеров"](./media/data-factory-samples/SamplePipelinesTile.png)
3. В колонке **Примеры конвейеров** выберите **пример**, который необходимо развернуть.

    ![Колонка "Примеры конвейеров"](./media/data-factory-samples/SampleTile.png)
4. Задайте параметры конфигурации для этого примера. Например, вы можете указать имя и ключ вашей учетной записи хранения Azure, имя сервера SQL Azure, базу данных, идентификатор пользователя, пароль и т. д.

    ![Колонка примера](./media/data-factory-samples/SampleBlade.png)
5. Настроив параметры, нажмите кнопку **Создать** , чтобы создать или развернуть примеры конвейеров и используемые ими связанные службы и таблицы.
6. Состояние развертывания отображается на элементе примера, который вы щелкнули ранее в колонке **Примеры конвейеров**.

    ![Состояния развертывания](./media/data-factory-samples/DeploymentStatus.png)
7. Когда на элементе примера появится сообщение **Развертывание прошло успешно**, закройте колонку **Примеры конвейеров**.  
8. В колонке **ФАБРИКА ДАННЫХ** вы увидите, что связанные службы, наборы данных и конвейеры добавлены в вашу фабрику данных.  

    ![Колонка "Фабрика данных"](./media/data-factory-samples/DataFactoryBladeAfter.png)

## <a name="samples-in-visual-studio"></a>Примеры в Visual Studio
### <a name="prerequisites"></a>предварительным требованиям
На вашем компьютере должны быть установлены следующие компоненты:

* Visual Studio 2013 или Visual Studio 2015.
* Загрузите пакет SDK Azure для Visual Studio 2013 или Visual Studio 2015. Перейдите на [cтраницу загрузки Azure](https://azure.microsoft.com/downloads/) и щелкните **VS 2013** или **VS2015** в разделе **.NET**.
* Скачайте последнюю версию подключаемого модуля фабрики данных Azure для Visual Studio: [VS 2013](https://visualstudiogallery.msdn.microsoft.com/754d998c-8f92-4aa7-835b-e89c8c954aa5) или [VS 2015](https://visualstudiogallery.msdn.microsoft.com/371a4cf9-0093-40fa-b7dd-be3c74f49005). При использовании Visual Studio 2013 также можно обновить подключаемый модуль, выполнив следующие действия. В меню выберите **Сервис** -> **Расширения и обновления** -> **В сети** -> **Галерея Visual Studio** -> **Microsoft Azure Data Factory Tools for Visual Studio**(Инструменты фабрики данных Microsoft Azure для Visual Studio) -> **Обновить**.

### <a name="use-data-factory-templates"></a>Использование шаблонов фабрики данных
1. Щелкните **Файл**, наведите указатель мыши на пункт **Создать** и щелкните **Проект**.
2. В диалоговом окне **Новый проект** выполните следующие действия:

   1. Выберите **Фабрика данных** в разделе **Шаблоны**.
   2. В правой области выберите **Шаблоны фабрики данных** .
   3. Введите **имя** проекта.
   4. Выберите **расположение** для проекта.
   5. Последовательно выберите **ОК**.

      ![Диалоговое окно "Новый проект"](./media/data-factory-samples/vs-new-project-adf-templates.png)
3. В диалоговом окне **Шаблоны фабрики данных** выберите пример шаблона в разделе **Use-Case Templates** (Примеры использования шаблонов) и нажмите кнопку **Далее**. Далее приводится описание процедуры использования шаблона **Профилирование клиентов** . Действия аналогичны действиям в других примерах.

    ![Диалоговое окно "Шаблоны фабрики данных"](./media/data-factory-samples/vs-data-factory-templates-dialog.png)
4. В диалоговом окне **Data Factory Configuration** (Конфигурация фабрики данных) на странице **Data Factory Basics** (Основы фабрики данных) нажмите кнопку **Далее**.
5. На странице **Configure data factory** (Настройка фабрики данных) выполните следующие действия:
   1. Выберите элемент **Create New Data Factory** (Создать фабрику данных). Можно также выбрать **Использовать существующую фабрику данных**.
   2. Введите **имя** фабрики данных.
   3. Выберите **подписку Azure** , в рамках которой вы хотите создать фабрику данных.
   4. Выберите **группу ресурсов** для фабрики данных.
   5. В качестве **региона** выберите **западную часть США**, **восточную часть США** или **Северную Европу**.
   6. Нажмите кнопку **Далее**.
6. На странице **Configure data stores** (Настройка хранилищ данных) укажите существующую **базу данных SQL Azure** и **учетную запись хранения Azure** (или создайте новые), а затем нажмите кнопку "Далее".
7. На странице **Настройка вычислений** выберите значения по умолчанию и нажмите кнопку **Далее**.
8. На странице **Сводка** проверьте все параметры и нажмите кнопку **Далее**.
9. На странице **Состояние развертывания** дождитесь завершения развертывания и затем нажмите кнопку **Готово**.
10. В обозревателе решений щелкните проект правой кнопкой мыши и выберите **Опубликовать**.
11. Когда отобразится диалоговое окно **Вход в учетную запись Майкрософт**, введите данные учетной записи с подпиской Azure и нажмите кнопку **Войти**.
12. Вы должны увидеть следующее диалоговое окно:

    ![Диалоговое окно "Опубликовать"](./media/data-factory-build-your-first-pipeline-using-vs/publish.png)
13. На странице **Configure data factory** (Настройка фабрики данных) выполните следующие действия:

    1. Убедитесь, что выбран параметр **Use existing data factory** (Использовать существующую фабрику данных).
    2. Выберите **фабрику данных**, выбранную при использовании шаблона.
    3. Нажмите кнопку **Далее**, чтобы перейти на страницу **Publish Items** (Публикация элементов). (Нажмите клавишу **TAB**, чтобы выйти из поля с именем, если кнопка **Далее** недоступна).
14. На странице **Publish Items** (Публикация элементов) выберите все сущности фабрик данных и нажмите кнопку **Далее**, чтобы перейти на страницу **Сводка**.     
15. Просмотрите сводку и нажмите кнопку **Далее** для запуска процесса развертывания и просмотра **состояния развертывания**.
16. На странице **Состояние развертывания** вы увидите состояние процесса развертывания. После завершения развертывания нажмите кнопку "Готово".

Подробные сведения об использовании Visual Studio для создания сущностей фабрики данных и их публикации в Azure см. в статье [Создание первой фабрики данных Azure с помощью Microsoft Visual Studio](data-factory-build-your-first-pipeline-using-vs.md).          
