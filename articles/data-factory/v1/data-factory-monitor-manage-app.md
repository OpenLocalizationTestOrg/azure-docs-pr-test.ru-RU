---
title: "Мониторинг конвейеров данных и управление ими в Azure | Документация Майкрософт"
description: "Узнайте, как отслеживать фабрики данных и конвейеры Azure и управлять ими с помощью приложения для мониторинга и управления."
services: data-factory
documentationcenter: 
author: spelluru
manager: jhubbard
editor: monicar
ms.assetid: f3f07bc4-6dc3-4d4d-ac22-0be62189d578
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/18/2017
ms.author: spelluru
robots: noindex
ms.openlocfilehash: 6d00c776da3be0f799b82160c45f4c47a965b4bb
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="monitor-and-manage-azure-data-factory-pipelines-by-using-the-monitoring-and-management-app"></a>Мониторинг конвейеров фабрики данных Azure и управление ими с помощью приложения для мониторинга и управления
> [!div class="op_single_selector"]
> * [Использование портала Azure или Azure PowerShell](data-factory-monitor-manage-pipelines.md)
> * [Использование приложения для мониторинга и управления](data-factory-monitor-manage-app.md)
>
>

В этой статье описывается, как с помощью приложения для мониторинга и управления отслеживать конвейеры фабрики данных, управлять ими и выполнять их отладку. В ней также приводятся инструкции по настройке оповещений в случае сбоев. Вы можете начать работу с приложением, посмотрев следующее видео:

> [!NOTE]
> Пользовательский интерфейс, показанный в видео, может не соответствовать тому, который отображается на портале. Он немного старше, но основные понятия остаются неизменными. 

> [!VIDEO https://channel9.msdn.com/Shows/Azure-Friday/Azure-Data-Factory-Monitoring-and-Managing-Big-Data-Piplines/player]
>

## <a name="launch-the-monitoring-and-management-app"></a>Запуск приложения для мониторинга и управления
Чтобы открыть приложение для мониторинга и управления, щелкните элемент **Monitor & Manage** (Мониторинг и управление) в колонке **Фабрика данных** для фабрики данных.

![Элемент "Мониторинг" на домашней странице фабрики данных](./media/data-factory-monitor-manage-app/MonitoringAppTile.png)

Приложение для мониторинга и управления откроется в отдельном окне.  

![Приложение для мониторинга и управления](./media/data-factory-monitor-manage-app/AppLaunched.png)

> [!NOTE]
> Если веб-браузер завис на действии "Авторизация...", то снимите флажок **Block third-party cookies and site data** (Блокировать сторонние файлы cookie и данные сайта). Либо оставьте флажок и создайте исключение для адреса **login.microsoftonline.com**, а затем попробуйте открыть приложение еще раз.


В средней области списка "Activity Windows" (Окна действий) появится окно действия для каждого действия запуска. Например, при наличии действия запланированного ежечасно в течение пяти часов, вы увидите пять окон действий, связанные с пятью срезами данных. Если вы не видите окон действий внизу списка, выполните следующее:
 
- Обновите фильтры **время начала** и **время окончания** в верхней части, чтобы они соответствовали времени начала и окончания конвейера, а затем нажмите кнопку **Применить**.  
- Список "Activity Windows" (Окна действий) не обновляется автоматически. Нажмите кнопку **Обновить** на панели инструментов в списке **Activity Windows** (Окна действий).  

Если у вас нет приложения фабрики данных , чтобы протестировать эти действия, см. статью [Руководство. Копирование данных из хранилища BLOB-объектов Azure в базу данных SQL с помощью фабрики данных](data-factory-copy-data-from-azure-blob-storage-to-sql-database.md).

## <a name="understand-the-monitoring-and-management-app"></a>Общие сведения о приложении для мониторинга и управления
В левой части находятся три вкладки (**Обозреватель ресурсов**, **Monitoring Views** (Представления мониторинга) и **Оповещения**). Первая вкладка (**Обозреватель ресурсов**) выбрана по умолчанию.

### <a name="resource-explorer"></a>Обозреватель ресурсов
Отображается следующее:

* **представление в виде дерева** обозревателя ресурсов в левой области;
* **Представление схемы** вверху средней области.
* список **Activity Windows** (Окна действий) внизу средней области;
* Вкладки **Свойства**, **Activity Window Explorer** (Обозреватель окон действий) и **Скрипт** в правой области.

В обозревателе ресурсов все ресурсы (конвейеры, наборы данных, связанные службы) в фабрике данных отображаются в представлении в виде дерева. При выборе объекта в обозревателе ресурсов вы заметите следующее:

* связанная сущность фабрики данных выделена в представлении схемы;
* [связанные окна действий](data-factory-scheduling-and-execution.md) выделены в списке "Activity Windows" (Окна действий) внизу;  
* свойства выбранного объекта отображаются в окне "Свойства" в правой области;
* отображается определение JSON выбранного объекта, если это применимо (например: связанная служба, набор данных или конвейер).

![Обозреватель ресурсов](./media/data-factory-monitor-manage-app/ResourceExplorer.png)

Дополнительные сведения об окнах действий см. в статье [Планирование и исполнение с использованием фабрики данных](data-factory-scheduling-and-execution.md).

### <a name="diagram-view"></a>Представление схемы
Представление схемы позволяет отслеживать состояние фабрики данных и всех ее ресурсов, а также управлять ими. При выборе сущности фабрики данных (набора данных или конвейера) в представлении схемы вы заметите следующее:

* сущность фабрики данных выбрана в представлении в виде дерева;
* связанные окна действий выделены в списке "Activity Windows" (Окна действий);
* свойства выбранного объекта отображаются в окне "Свойства".

Если конвейер включен (не находится в приостановленном состоянии), то он отображается с зеленой линией:

![Выполняющийся конвейер](./media/data-factory-monitor-manage-app/PipelineRunning.png)

Конвейер можно приостановить, возобновить или завершить, выбрав его в представлении схемы, а также с помощью кнопок на панели команд.

![Приостановка или возобновление на панели команд](./media/data-factory-monitor-manage-app/SuspendResumeOnCommandBar.png)
 
В представлении схемы для конвейера доступны три кнопки панели команд. Вторая кнопка используется для приостановки конвейера. Во время приостановки текущие выполняющиеся действия не останавливаются, а завершаются до конца. Третья кнопка используется для приостановки конвейера и завершения текущих выполняющихся действий. Первая кнопка позволяет возобновить работу конвейера. Если конвейер приостановлен, его цвет меняется: Например, приостановленный конвейер выглядит следующим образом: 

![Приостановленный конвейер](./media/data-factory-monitor-manage-app/PipelinePaused.png)

С помощью клавиши Ctrl можно выбрать два конвейера или более. С помощью кнопок панели команд можно приостанавливать или возобновлять работу нескольких конвейеров одновременно.

Кроме того, можно щелкнуть конвейер правой кнопкой мыши и выбрать параметры, чтобы приостановить, возобновить или завершить его работу. 

![Контекстное меню конвейера](./media/data-factory-monitor-manage-app/right-click-menu-for-pipeline.png)

Выберите параметр **Открыть конвейер**, чтобы просмотреть все действия в конвейере. 

![Откройте меню конвейера](./media/data-factory-monitor-manage-app/OpenPipelineMenu.png)

В открывшемся представлении конвейера вы увидите все действия в конвейере. В этом примере в конвейере существует только одно действие — действие копирования. 

![Открытый конвейер](./media/data-factory-monitor-manage-app/OpenedPipeline.png)

Чтобы перейти к предыдущему представлению, щелкните имя фабрики данных в меню навигации вверху.

При щелчке выходного набора данных или наведении на него указателя мыши в представлении конвейера отобразится всплывающее окно "Activity Windows" (Окна действий) для этого набора данных.

![Всплывающее окно "Activity Windows" (Окна действий)](./media/data-factory-monitor-manage-app/ActivityWindowsPopup.png)

Щелкните окно действий, чтобы просмотреть сведения о нем в окне **Свойства** в правой области.

![Свойства окна действий](./media/data-factory-monitor-manage-app/ActivityWindowProperties.png)

Чтобы просмотреть дополнительные сведения, в правой области перейдите на вкладку **Activity Window Explorer** (Обозреватель окон действий).

![Activity Window Explorer](./media/data-factory-monitor-manage-app/ActivityWindowExplorer.png)

Вы также увидите **разрешенные переменные** для каждой попытки запуска действия в разделе **Попытки**.

![Разрешенные переменные](./media/data-factory-monitor-manage-app/ResolvedVariables.PNG)

Перейдите на вкладку **Скрипт** , чтобы просмотреть определение скриптов JSON для выбранного объекта.   

![Вкладка "Скрипт"](./media/data-factory-monitor-manage-app/ScriptTab.png)

Окна действий можно просматривать в трех местах:

* всплывающее окно "Activity Windows" (Окна действий) в представлении схемы (средняя область);
* "Activity Window Explorer" (Обозреватель окон действий) в правой области;
* список "Activity Windows" (Окна действий) в нижней области.

Во всплывающем окне "Activity Windows" (Окна действий) и на вкладке "Activity Window Explorer" (Обозреватель окон действий) можно перейти к прошлой и следующей неделям, используя кнопки со стрелками влево и вправо.

![Кнопки со стрелками вправо и влево в "Activity Window Explorer" (Обозреватель окон действий)](./media/data-factory-monitor-manage-app/ActivityWindowExplorerLeftRightArrows.png)

В нижней части представления схемы находятся такие кнопки: увеличение и уменьшение масштаба, выбор 100-процентного масштаба, масштаба по размеру и блокировки структуры схемы. Кнопка **блокировки структуры** позволяет предотвратить случайное перемещение таблиц и конвейеров в представлении схемы. Она включена по умолчанию. Ее можно отключить и перемещать объекты в рамках схемы. Если кнопка отключена, то для автоматического размещения таблиц и конвейеров можно использовать последнюю кнопку. Также можно увеличить или уменьшить масштаб с помощью колесика мыши.

![Команды изменения масштаба в представлении схемы](./media/data-factory-monitor-manage-app/DiagramViewZoomCommands.png)

### <a name="activity-windows-list"></a>Список "Activity Windows" (Окна действий)
В списке "Activity Windows" (Окна действий) в нижней части средней области отображаются все окна действий для набора данных, выбранного в обозревателе ресурсов или представлении схемы. По умолчанию список отсортирован по убыванию. Это значит, что в его верхней части находится самое последнее окно действий.

![Список "Activity Windows" (Окна действий)](./media/data-factory-monitor-manage-app/ActivityWindowsList.png)

Этот список не обновляется автоматически, поэтому воспользуйтесь кнопкой "Обновить" на панели инструментов, чтобы обновить его вручную.  

Окна действий могут находиться в одном из указанных ниже состояний.

<table>
<tr>
    <th align="left">Состояние</th><th align="left">Подсостояние</th><th align="left">Описание</th>
</tr>
<tr>
    <td rowspan="8">Waiting</td><td>ScheduleTime</td><td>Время выполнения окна действий еще не наступило.</td>
</tr>
<tr>
<td>DatasetDependencies</td><td>Восходящие зависимости не готовы.</td>
</tr>
<tr>
<td>ComputeResources</td><td>Вычислительные ресурсы недоступны.</td>
</tr>
<tr>
<td>ConcurrencyLimit</td> <td>Все экземпляры действия заняты выполнением других окон действий.</td>
</tr>
<tr>
<td>ActivityResume</td><td>Действие приостановлено, и до его возобновления выполнение окон действий недоступно.</td>
</tr>
<tr>
<td>Retry</td><td>Действие выполняется повторно.</td>
</tr>
<tr>
<td>Проверка</td><td>Проверка еще не начата.</td>
</tr>
<tr>
<td>ValidationRetry</td><td>Ожидание повторения проверки.</td>
</tr>
<tr>
<tr>
<td rowspan="2">InProgress</td><td>Validating</td><td>Проверка выполняется.</td>
</tr>
<td>-</td>
<td>Выполняется обработка окна действия.</td>
</tr>
<tr>
<td rowspan="4">Сбой</td><td>TimedOut</td><td>Выполнение действия заняло больше времени, чем разрешено для данного действия.</td>
</tr>
<tr>
<td>Canceled</td><td>Окно действий отменено пользователем.</td>
</tr>
<tr>
<td>Проверка</td><td>Сбой проверки.</td>
</tr>
<tr>
<td>-</td><td>Не удалось создать или проверить окно действий.</td>
</tr>
<td>Ready</td><td>-</td><td>Окно действия готово к использованию.</td>
</tr>
<tr>
<td>Skipped</td><td>-</td><td>Окно действий не обработано.</td>
</tr>
<tr>
<td>Без блокировки</td><td>-</td><td>Окно действий, которое ранее существовало с другим состоянием, но было сброшено.</td>
</tr>
</table>


При выборе окна действий в списке вы увидите сведения о нем на вкладке **Activity Windows Explorer** (Обозреватель окон действий) или в окне **Свойства** справа.

![Activity Window Explorer](./media/data-factory-monitor-manage-app/ActivityWindowExplorer-2.png)

### <a name="refresh-activity-windows"></a>Обновление окон действий
Данные не обновляются автоматически, поэтому воспользуйтесь кнопкой "Обновить" (вторая по счету) на панели команд, чтобы обновить список окон действий вручную.  

### <a name="properties-window"></a>Окно "Свойства"
Окно "Свойства" доступно в правой области приложения по мониторингу и управлению.

![Окно "Свойства"](./media/data-factory-monitor-manage-app/PropertiesWindow.png)

В нем отображаются свойства элемента, выбранного в обозревателе ресурсов (в представлении в виде дерева), представлении схемы или списке "Activity Windows" (Окна действий).

### <a name="activity-window-explorer"></a>Activity Window Explorer
Окно **Activity Window Explorer** (Обозреватель окон действий) находится в правой области приложения для мониторинга и управления. В нем отображаются сведения об окне действий, выбранном во всплывающем окне или списке Activity Windows (Окна действий).

![Activity Window Explorer](./media/data-factory-monitor-manage-app/ActivityWindowExplorer-3.png)

Вы можете переключиться между окнами действий, щелкнув нужное окно в представлении календаря в верхней части. Чтобы просмотреть окна действий за прошлую или следующую неделю, используйте кнопки со стрелками влево и вправо в верхней части.

Чтобы повторно выполнить окно действий или обновить сведения, используйте кнопки панели инструментов в нижней области.

### <a name="script"></a>Скрипт
Откройте вкладку **Скрипт**, чтобы просмотреть определение JSON выбранной сущности фабрики данных (связанную службу, набор данных или конвейер).

![Вкладка "Скрипт"](./media/data-factory-monitor-manage-app/ScriptTab.png)

## <a name="use-system-views"></a>Использование системных представлений
Приложение для мониторинга и управления содержит встроенные системные представления (**Recent activity windows** (Последние окна действий), **Failed activity windows** (Ошибки окон действий), **In-Progress activity windows** (Выполняющиеся окна действий)), которые позволяют просматривать последние, завершившиеся ошибкой или выполняющиеся окна действий для фабрики данных.

В левой части откройте вкладку **Monitoring Views** (Представления мониторинга), щелкнув ее.

![Вкладка "Представления мониторинга"](./media/data-factory-monitor-manage-app/MonitoringViewsTab.png)

В настоящее время поддерживаются три системных представления. Выберите, какие именно окна будут отображаться в списке "Activity Windows" (Окна действий) (в нижней части средней области) — последние, завершившиеся ошибкой или выполняющиеся.

При выборе варианта **Recent activity windows** (Последние окна действий) будут отображены все последние окна действий в порядке убывания по **времени последней попытки**.

В представлении **Failed activity windows** (Ошибки окон действий) в списке отображаются все завершившиеся ошибкой окна действий. Выберите в списке окно действий, завершившееся ошибкой, чтобы просмотреть подробные сведения о нем в окне **Свойства** или в **Activity Window Explorer** (Обозреватель окон действий). Можно также загрузить журналы для завершившегося ошибкой окна действия.

## <a name="sort-and-filter-activity-windows"></a>Сортировка и фильтрация окон действий
Чтобы отфильтровать окна действий, измените значение параметров **Время начала** и **Время окончания** в командной строке. После изменения времени начала и окончания нажмите кнопку рядом с параметром "Время окончания", чтобы обновить список "Activity Windows" (Окна действий).

![Время начала и окончания](./media/data-factory-monitor-manage-app/StartAndEndTimes.png)

> [!NOTE]
> Сейчас в приложении для мониторинга и управления все значения времени указываются в формате UTC.
>
>

В **списке окон действий**щелкните имя столбца (например, "Состояние").

![Меню столбца списка "Activity Windows" (Окна действий)](./media/data-factory-monitor-manage-app/ActivityWindowsListColumnMenu.png)

Можно сделать следующее:

* отсортировать по возрастанию;
* отсортировать по убыванию;
* отфильтровать по одному или нескольким значениям ("Готово", "Ожидание" и т. д.).

После выбора фильтра в столбце активируется кнопка "Фильтр", указывающая, что значения в столбце являются отфильтрованными.

![Фильтр в столбце списка "Activity Windows" (Окна действий)](./media/data-factory-monitor-manage-app/ActivityWindowsListFilterInColumn.png)

Чтобы очистить фильтры, можно использовать то же самое всплывающее окно. Чтобы очистить все фильтры для списка "Activity Windows" (Окна действий), нажмите кнопку очистки фильтров на панели команд.

![Очистка всех фильтров для списка "Activity Windows" (Окна действий)](./media/data-factory-monitor-manage-app/ClearAllFiltersActivityWindowsList.png)

## <a name="perform-batch-actions"></a>Выполнение пакетных действий
### <a name="rerun-selected-activity-windows"></a>Повторное выполнение выбранных окон действий
Выберите окно действий, нажмите кнопку со стрелкой вниз (первая кнопка на панели команд) и выберите **Выполнить снова** или  / **Rerun with upstream in pipeline** (Повторно выполнить с параметром UpstreamInPipeline). При выборе варианта **Rerun with upstream in pipeline** (Повторно выполнить с параметром UpstreamInPipeline) также будут выполнены все вышестоящие окна действий.
    ![Повторное выполнение окна действия](./media/data-factory-monitor-manage-app/ReRunSlice.png)

Кроме того, в списке можно выбрать несколько окон действий и повторно выполнить сразу все эти окна. Вы можете отфильтровать окна действий на основе состояния (например, **Сбой**), а после устранения причины сбоя выполнить окна действий повторно. Дополнительные сведения о фильтрации окон действий см. в следующем разделе.  

### <a name="pauseresume-multiple-pipelines"></a>Приостановка и возобновление нескольких конвейеров
С помощью клавиши Ctrl можно выбрать два конвейера или более. Чтобы приостановить или возобновить все эти конвейеры, можно воспользоваться кнопками на панели команд (на следующем снимке экрана выделены красным прямоугольником).

![Приостановка или возобновление на панели команд](./media/data-factory-monitor-manage-app/SuspendResumeOnCommandBar.png)

## <a name="create-alerts"></a>Создание оповещений
На странице **Оповещения** можно создать оповещение, а также просмотреть, изменить или удалить имеющиеся оповещения. Можно также включить или отключить оповещение. Щелкните вкладку **Оповещения**, чтобы открыть страницу оповещений.

![Вкладка "Оповещения"](./media/data-factory-monitor-manage-app/AlertsTab.png)

### <a name="to-create-an-alert"></a>Создание оповещения
1. Чтобы добавить оповещение, нажмите кнопку **Добавить оповещение** . Отобразится страница **Подробности**.

    ![Создание оповещений — страница "Сведения"](./media/data-factory-monitor-manage-app/CreateAlertDetailsPage.png)
2. Укажите **имя** и введите **описание** оповещения в соответствующих полях, а затем нажмите кнопку **Далее**. Должна открыться страница **Фильтры** .

    ![Создание оповещений — страница "Фильтры"](./media/data-factory-monitor-manage-app/CreateAlertFiltersPage.png)
3. Выберите **событие**, **состояние** и **подсостояние** (необязательно), о которых служба фабрики данных должна выводить оповещение, а затем нажмите кнопку **Далее**. Откроется страница **Получатели** .

    ![Создание оповещений — страница "Получатели"](./media/data-factory-monitor-manage-app/CreateAlertRecipientsPage.png)
4. Выберите параметр **Email subscription admins** (Администраторы подписки электронной почты) и (или) укажите значение параметра **Дополнительный адрес электронной почты администратора**, а затем нажмите кнопку **Готово**. Оповещение должно появиться в списке.

    ![Список "Оповещения"](./media/data-factory-monitor-manage-app/AlertsList.png)

В списке "Оповещения" используйте связанные с оповещением кнопки, чтобы изменить, удалить, включить или отключить оповещение.

### <a name="eventstatussubstatus"></a>Событие, состояние и подсостояние
В приведенной далее таблице содержится список возможных событий и состояний (и подсостояний).

| Имя события | Состояние | Подсостояние |
| --- | --- | --- |
| Выполнение действия начато |Started |Запуск |
| Выполнение действия завершено |Успешно |Успешно |
| Выполнение действия завершено |Сбой |Неудачное выделение ресурсов<br/><br/>Сбой при выполнении<br/><br/>Timed Out<br/><br/>Failed Validation<br/><br/>Abandoned |
| Создание кластера HDI по запросу начато |Started |-|
| Кластер HDI по запросу успешно создан |Успешно |-|
| Кластер HDI по запросу удален |Успешно |-|

### <a name="to-edit-delete-or-disable-an-alert"></a>Изменение, удаление или отключение оповещения

Используйте следующие кнопки (выделены красным цветом), чтобы изменить, удалить или отключить оповещение.

![Кнопки оповещений](./media/data-factory-monitor-manage-app/AlertButtons.png)
