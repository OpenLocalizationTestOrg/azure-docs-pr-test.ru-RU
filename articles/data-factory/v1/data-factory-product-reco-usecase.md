---
title: "Вариант использования фабрики данных: система рекомендации товаров"
description: "Сведения о решении, в котором используется фабрика данных Azure и другие службы."
services: data-factory
documentationcenter: 
author: sharonlo101
manager: jhubbard
editor: monicar
ms.assetid: 6f1523c7-46c3-4b8d-9ed6-b847ae5ec4ae
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/10/2018
ms.author: shlo
robots: noindex
ms.openlocfilehash: 04504d1e32243f752e488a24e04ec5ba73fbadc1
ms.sourcegitcommit: 9cc3d9b9c36e4c973dd9c9028361af1ec5d29910
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2018
---
# <a name="use-case---product-recommendations"></a>Вариант использования: система рекомендации товаров
Фабрика данных Azure — одна из многочисленных служб, используемых для внедрения набора аналитических инструментов Cortana Intelligence Suite для ускорителей решений.  Подробные сведения об этом наборе см. на странице [Cortana Intelligence Suite](http://www.microsoft.com/cortanaanalytics). В этой статье мы рассмотрим проверенное и реализованное многими пользователями Azure решение, в котором используется фабрика данных Azure и другие службы компонентов Cortana Intelligence.

## <a name="scenario"></a>Сценарий
Как правило, интернет-магазины пытаются привлечь клиентов, предлагая им те товары, которые заинтересуют их с наибольшей вероятностью и, следовательно, которые они скорее всего купят. Для этого продавцам необходимо настроить показ товаров на сайте, используя персонализированные рекомендации товаров для конкретного пользователя. В этих рекомендациях должны учитываться исторические и текущие данные о покупательском поведении, сведения о товарах и новых торговых марках, а также данные о сегментации товаров и клиентов.  Кроме того, продавцы могут рекомендовать пользователям товары, основываясь на результатах анализа обобщенного покупательского поведения всех пользователей.

Цель таких продавцов — оптимизировать конверсию просмотров в продажи и получить более высокий доход.  Они добиваются этого, предоставляя контекстные рекомендации товаров, основанные на покупательском поведении, интересах и действиях клиента. В данном случае мы используем интернет-магазины в качестве примера компаний, которые стараются подстраиваться под своих клиентов. Эти же принципы относятся к любой компании, которая хочет привлечь клиентов к своим товарам и услугам и улучшить процесс покупки, предоставляя клиентам персонализированные рекомендации.

## <a name="challenges"></a>Сложности
Интернет-магазины сталкиваются со множеством трудностей при попытке реализовать такую модель. 

Во-первых, данные разных объемов и форм должны поступать из нескольких источников данных, как локальных, так и облачных. Эти данные включают данные о товарах, исторические данные о поведении клиента и данные о просмотре пользователем сайта интернет-магазина. 

Во-вторых, подбор и прогнозирование персонализированных рекомендаций должны быть объективными и точными. Помимо данных о товарах, торговых марках, покупательском поведении и просмотренных клиентом страницах, интернет-магазину также необходимо учитывать отзывы о товарах от других покупателей. Вместе эти данные позволят подобрать лучшие рекомендации для каждого конкретного пользователя. 

В-третьих, пользователи должны мгновенно получать эти рекомендации. Это не только сделает процесс работы с сайтом более удобным, а процедуру покупки более простой, но и позволит пользователям получать наиболее актуальные и релевантные рекомендации. 

И наконец, продавцам нужно оценивать эффективность такого подхода путем отслеживания количества успешных дополнительных и перекрестных продаж (конверсия просмотров в продажи) и корректировать последующие рекомендации.

## <a name="solution-overview"></a>Обзор решения
Этот пример решения испытан и реализован реальными пользователями Azure. При этом использовалась фабрика данных Azure и другие службы компонентов Cortana Intelligence, включая [HDInsight](https://azure.microsoft.com/services/hdinsight/) и [Power BI](https://powerbi.microsoft.com/).

Для хранения данных на протяжении всего рабочего процесса интернет-магазин использует хранилище BLOB-объектов Azure, локальный сервер SQL, базу данных SQL Azure и киоск реляционных данных.  Хранилище BLOB-объектов содержит данные о клиентах, их поведении и сведения о товарах. Информация о товарах — это, в частности, сведения о торговых марках и каталоге товаров, который храниться локально в хранилище данных SQL. 

Все данные объединяются и передаются в систему рекомендаций товаров, предоставляющую персонализированные рекомендации на основе интересов и действий клиента, когда он просматривает товары в каталоге на веб-сайте магазина. Клиенту также показываются товары, которые могут иметь отношение к просматриваемой позиции, на основании общих моделей использования веб-сайта, не относящихся к конкретному пользователю.

![схема решения](./media/data-factory-product-reco-usecase/diagram-1.png)

Ежедневно с веб-сайта интернет-магазина передаются гигабайты необработанных веб-журналов в виде частично структурированных файлов. Необработанные файлы веб-журналов и сведения о каталогах клиентов и товаров регулярно поступают в хранилище BLOB-объектов Azure. Для этого в фабрике данных используется глобально развернутая служба перемещения. Необработанные файлы журналов за день группируются (по году и месяцу) в хранилище BLOB-объектов для долговременного хранения.  [Azure HDInsight](https://azure.microsoft.com/services/hdinsight/) группирует необработанные файлы журналов в хранилище BLOB-объектов и обрабатывает полученные объемы с помощью сценариев Hive и Pig. Из сгруппированных данных веб-журналов затем извлекаются необходимые сведения, которые передаются в систему рекомендаций. С помощью машинного обучения эти данные обрабатываются, и на их основе система предлагает персонализированные рекомендации.

В этом примере для машинного обучения используется открытая платформа рекомендаций [Apache Mahout](http://mahout.apache.org/).  Вместо нее в этом случае можно использовать [службы машинного обучения Azure](https://azure.microsoft.com/services/machine-learning/) или любую другую пользовательскую модель.  Модель Mahout используется для определения сходства между элементами на веб-сайте интернет-магазина на основе общей модели использования веб-сайта, а также для создания персонализированных рекомендаций, основанных на данных о конкретном пользователе.

Наконец, финальный набор персонализированных рекомендаций перемещается в киоск реляционных данных, откуда его и берет веб-сайт интернет-магазина.  Для других приложений финальный набор также может быть доступен непосредственно в хранилище BLOB-объектов. Кроме того, для других потребителей и вариантов использования набор можно переместить в дополнительные хранилища.

## <a name="benefits"></a>Преимущества
Вследствие оптимизации стратегии по рекомендациям товаров и ее согласования с целями предприятия решение позволило интернет-магазину достичь своих целей в области сбыта и маркетинга. Кроме того, продавец смог организовать систему рекомендаций и получил инструменты, которые позволяют не только эффективно, а и надежно управлять ею без лишних затрат. Этот подход позволяет с легкостью обновить и настроить имеющуюся модель на основе данных о конверсии просмотров в продажи. Использование фабрики данных Azure дало возможность отказаться от ручного управления облачными ресурсами, которое сопряжено с высокими затратами времени и ресурсов, и перейти к модели управления облачными ресурсами по требованию. Таким образом, это позволило сэкономить время и деньги, а также сократить сроки развертывания решения. Благодаря удобному пользовательскому интерфейсу фабрики данных для мониторинга и управления на портале Azure стало проще визуализировать представления журнала преобразований данных и устранять неполадки в работе службы. Теперь решение может постоянно выдавать готовые данные и доставлять их пользователям. При этом управление данными и обработка зависимостей осуществляются автоматически без человеческого вмешательства.

Внедрив такой персонализированный подход, интернет-магазин предложил своим клиентам более увлекательный процесс покупок. За счет этого повысилась конкурентоспособность бизнеса и появились условия для роста продаж и общей удовлетворенности клиентов.

