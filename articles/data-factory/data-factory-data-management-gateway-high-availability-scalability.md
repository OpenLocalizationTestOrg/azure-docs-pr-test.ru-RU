---
title: "aaaHigh доступности с помощью шлюза управления данными в фабрике данных Azure | Документы Microsoft"
description: "В этой статье объясняется, как можно развернуть шлюз управления данными, добавив дополнительные узлы, и увеличить его масштаб, увеличив число одновременных заданий, которые могут выполняться на одном узле."
services: data-factory
documentationcenter: 
author: nabhishek
manager: jhubbard
editor: 
ms.service: data-factory
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: abnarain
ms.openlocfilehash: 925f63728e23596bca2655636f6535b509fce0b1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="data-management-gateway---high-availability-and-scalability-preview"></a><span data-ttu-id="39acf-103">Шлюз управления данными: высокий уровень доступности и масштабируемость (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="39acf-103">Data Management Gateway - high availability and scalability (Preview)</span></span>
<span data-ttu-id="39acf-104">Эта статья поможет вам настроить решение по обеспечению высокого уровня доступности и масштабируемости с помощью шлюза управления данными.</span><span class="sxs-lookup"><span data-stu-id="39acf-104">This article helps you configure high availability and scalability solution with Data Management Gateway.</span></span>    

> [!NOTE]
> <span data-ttu-id="39acf-105">В этой статье предполагается, что вы уже знакомы с основами шлюза управления данными.</span><span class="sxs-lookup"><span data-stu-id="39acf-105">This article assumes that you are already familiar with basics of Data Management Gateway.</span></span> <span data-ttu-id="39acf-106">В противном случае см. статью [Шлюз управления данными](data-factory-data-management-gateway.md).</span><span class="sxs-lookup"><span data-stu-id="39acf-106">If you are not, see [Data Management Gateway](data-factory-data-management-gateway.md).</span></span>

><span data-ttu-id="39acf-107">**Эта функция предварительного просмотра официально поддерживается в версии 2.12.xxxx.x шлюза управления данными и более поздних версиях**.</span><span class="sxs-lookup"><span data-stu-id="39acf-107">**This preview feature is officially supported on Data Management Gateway version 2.12.xxxx.x and above**.</span></span> <span data-ttu-id="39acf-108">Убедитесь, что вы используете версию 2.12.xxxx.x или более позднюю версию.</span><span class="sxs-lookup"><span data-stu-id="39acf-108">Please make sure you are using version 2.12.xxxx.x or above.</span></span> <span data-ttu-id="39acf-109">Загрузить последнюю версию шлюза управления данными hello [здесь](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="39acf-109">Download hello latest version of Data Management Gateway [here](https://www.microsoft.com/download/details.aspx?id=39717).</span></span>

## <a name="overview"></a><span data-ttu-id="39acf-110">Обзор</span><span class="sxs-lookup"><span data-stu-id="39acf-110">Overview</span></span>
<span data-ttu-id="39acf-111">Можно связать шлюзы данных управления, установленных на несколько компьютеров в локальной среде с одного логического шлюза с портала hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-111">You can associate data management gateways that are installed on multiple on-premises machines with a single logical gateway from hello portal.</span></span> <span data-ttu-id="39acf-112">Эти компьютеры называются **узлами**.</span><span class="sxs-lookup"><span data-stu-id="39acf-112">These machines are called **nodes**.</span></span> <span data-ttu-id="39acf-113">Можно создать до слишком**четырех узлов** связанный с логической шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-113">You can have up too**four nodes** associated with a logical gateway.</span></span> <span data-ttu-id="39acf-114">Ниже перечислены преимущества Hello с несколькими узлами (локальные компьютеры с установленным шлюзом) для логического шлюза</span><span class="sxs-lookup"><span data-stu-id="39acf-114">hello benefits of having multiple nodes (on-premises machines with gateway installed) for a logical gateway are:</span></span>  

- <span data-ttu-id="39acf-115">Повышение производительности перемещения данных между локальными и облачными хранилищами данных.</span><span class="sxs-lookup"><span data-stu-id="39acf-115">Improve performance of data movement between on-premises and cloud data stores.</span></span>  
- <span data-ttu-id="39acf-116">Если один из узлов hello отключается по некоторым причинам, другие узлы, по-прежнему доступны для перемещения данных hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-116">If one of hello nodes goes down for some reason, other nodes are still available for moving hello data.</span></span> 
- <span data-ttu-id="39acf-117">Если один из узлов hello требуется toobe автономный режим для обслуживания, другие узлы, по-прежнему доступны для перемещения данных hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-117">If one of hello nodes need toobe taken offline for maintenance, other nodes are still available for moving hello data.</span></span>

<span data-ttu-id="39acf-118">Можно также настроить количество hello **задания перемещения данных** , можно запускать на узел tooscale копирование hello возможность перемещения данных между локальными и облачными хранилищами данных.</span><span class="sxs-lookup"><span data-stu-id="39acf-118">You can also configure hello number of **concurrent data movement jobs** that can run on a node tooscale up hello capability of moving data between on-premises and cloud data stores.</span></span> 

<span data-ttu-id="39acf-119">С помощью hello портал Azure, можно отслеживать hello состояния этих узлов, которая поможет вам решить, является ли tooadd или удалить узел из логических шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-119">Using hello Azure portal, you can monitor hello status of these nodes, which helps you decide whether tooadd or remove a node from hello logical gateway.</span></span> 

## <a name="architecture"></a><span data-ttu-id="39acf-120">Архитектура</span><span class="sxs-lookup"><span data-stu-id="39acf-120">Architecture</span></span> 
<span data-ttu-id="39acf-121">Hello следующая схема содержит общие сведения об архитектуре hello масштабируемости и доступности функции hello шлюз управления данными:</span><span class="sxs-lookup"><span data-stu-id="39acf-121">hello following diagram provides hello architecture overview of scalability and availability feature of hello Data Management Gateway:</span></span> 

![Шлюз управления данными: высокий уровень доступности и масштабируемость](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-high-availability-and-scalability.png)

<span data-ttu-id="39acf-123">Объект **логических шлюза** шлюз hello фабрики данных tooa надстройки hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="39acf-123">A **logical gateway** is hello gateway you add tooa data factory in hello Azure portal.</span></span> <span data-ttu-id="39acf-124">Раньше с логическим шлюзом можно было связать только один локальный компьютер с Windows, на котором установлен шлюз управления данными.</span><span class="sxs-lookup"><span data-stu-id="39acf-124">Earlier, you could associate only one on-premises Windows machine with Data Management Gateway installed with a logical gateway.</span></span> <span data-ttu-id="39acf-125">Этот локальный компьютер со шлюзом называется узлом.</span><span class="sxs-lookup"><span data-stu-id="39acf-125">This on-premises gateway machine is called a node.</span></span> <span data-ttu-id="39acf-126">Теперь можно связать копирование слишком**четырьмя физическими узлами** логический шлюз.</span><span class="sxs-lookup"><span data-stu-id="39acf-126">Now, you can associate up too**four physical nodes** with a logical gateway.</span></span> <span data-ttu-id="39acf-127">Логический шлюз с несколькими узлами называется **шлюзом с несколькими узлами**.</span><span class="sxs-lookup"><span data-stu-id="39acf-127">A logical gateway with multiple nodes is called a **multi-node gateway**.</span></span>  

<span data-ttu-id="39acf-128">Все узлы **активны**.</span><span class="sxs-lookup"><span data-stu-id="39acf-128">All these nodes are **active**.</span></span> <span data-ttu-id="39acf-129">Все они могут обрабатывать данные toomove задания перемещения данных между локальными и облачными хранилищами данных.</span><span class="sxs-lookup"><span data-stu-id="39acf-129">They all can process data movement jobs toomove data between on-premises and cloud data stores.</span></span> <span data-ttu-id="39acf-130">Один из узлов hello в качестве рабочих и диспетчером.</span><span class="sxs-lookup"><span data-stu-id="39acf-130">One of hello nodes act as both dispatcher and worker.</span></span> <span data-ttu-id="39acf-131">Другие узлы в группах hello являются рабочих узлов.</span><span class="sxs-lookup"><span data-stu-id="39acf-131">Other nodes in hello groups are worker nodes.</span></span> <span data-ttu-id="39acf-132">Объект **диспетчер** узел извлекает перемещения данных задачи и задания из облачной службы hello и распределяет их tooworker узлов (включая сам).</span><span class="sxs-lookup"><span data-stu-id="39acf-132">A **dispatcher** node pulls data movement tasks/jobs from hello cloud service and dispatches them tooworker nodes (including itself).</span></span> <span data-ttu-id="39acf-133">Объект **рабочих** узел выполняет данных toomove задания перемещения данных между локальными и облачными хранилищами данных.</span><span class="sxs-lookup"><span data-stu-id="39acf-133">A **worker** node executes data movement jobs toomove data between on-premises and cloud data stores.</span></span> <span data-ttu-id="39acf-134">Все узлы являются рабочими,</span><span class="sxs-lookup"><span data-stu-id="39acf-134">All nodes are workers.</span></span> <span data-ttu-id="39acf-135">но только один узел может быть узлом-диспетчером и рабочим узлом.</span><span class="sxs-lookup"><span data-stu-id="39acf-135">Only one node can be both dispatch and worker.</span></span>    

<span data-ttu-id="39acf-136">Обычно можно запустить с одним узлом и **горизонтальное масштабирование** tooadd дополнительные узлы как hello существующие узлы перегружены с нагрузкой перемещения данных hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-136">You may typically start with one node and **scale out** tooadd more nodes as hello existing node(s) are overwhelmed with hello data movement load.</span></span> <span data-ttu-id="39acf-137">Вы также можете **масштабировать** hello возможность перемещения данных узла шлюза, увеличив hello число одновременных заданий, которые допускаются toorun на узле hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-137">You can also **scale up** hello data movement capability of a gateway node by increasing hello number of concurrent jobs that are allowed toorun on hello node.</span></span> <span data-ttu-id="39acf-138">Эта возможность доступна также с одним узлом шлюза (даже если не включена функция hello масштабируемости и доступности).</span><span class="sxs-lookup"><span data-stu-id="39acf-138">This capability is also available with a single-node gateway (even when hello scalability and availability feature is not enabled).</span></span> 

<span data-ttu-id="39acf-139">Шлюз с несколькими узлами сохраняет hello учетных данных хранилища данных синхронизации на всех узлах.</span><span class="sxs-lookup"><span data-stu-id="39acf-139">A gateway with multiple nodes keeps hello data store credentials in sync across all nodes.</span></span> <span data-ttu-id="39acf-140">Если существует проблема подключения для узлов, возможно, учетные данные hello синхронизированы. При установке учетные данные для хранилища данных в локальной среде, использующий шлюз, она сохраняет учетные данные на узле диспетчера рабочих hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-140">If there is a node-to-node connectivity issue, hello credentials may be out of sync. When you set credentials for an on-premises data store that uses a gateway, it saves credentials on hello dispatcher/worker node.</span></span> <span data-ttu-id="39acf-141">Hello диспетчер синхронизации узла с других узлов рабочих ролей.</span><span class="sxs-lookup"><span data-stu-id="39acf-141">hello dispatcher node syncs with other worker nodes.</span></span> <span data-ttu-id="39acf-142">Этот процесс называется **учетные данные для синхронизации**. может быть hello канал связи между узлами **зашифрованные** с помощью открытого сертификата SSL/TLS.</span><span class="sxs-lookup"><span data-stu-id="39acf-142">This process is known as **credentials sync**. hello communication channel between nodes can be **encrypted** by a public SSL/TLS certificate.</span></span> 

## <a name="set-up-a-multi-node-gateway"></a><span data-ttu-id="39acf-143">Настройка шлюза с несколькими узлами</span><span class="sxs-lookup"><span data-stu-id="39acf-143">Set up a multi-node gateway</span></span>
<span data-ttu-id="39acf-144">В этом разделе предполагается, что Вы завершили hello, следующие две статьи или знакомые с концепциями в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="39acf-144">This section assumes that you have gone through hello following two articles or familiar with concepts in these articles:</span></span> 

- <span data-ttu-id="39acf-145">[Шлюз управления данными](data-factory-data-management-gateway.md) -приведен подробный обзор hello шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-145">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of hello gateway.</span></span>
- <span data-ttu-id="39acf-146">Статья [Перемещение данных между локальными источниками и облаком с помощью шлюза управления данными](data-factory-move-data-between-onprem-and-cloud.md) содержит пошаговые инструкции по использованию шлюза с одним узлом.</span><span class="sxs-lookup"><span data-stu-id="39acf-146">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span>  

> [!NOTE]
> <span data-ttu-id="39acf-147">Прежде чем устанавливать шлюз управления данными на локальном компьютере Windows, см. предварительные требования, перечисленные в [hello основная статья](data-factory-data-management-gateway.md#prerequisites).</span><span class="sxs-lookup"><span data-stu-id="39acf-147">Before you install a data management gateway on an on-premises Windows machine, see prerequisites listed in [hello main article](data-factory-data-management-gateway.md#prerequisites).</span></span>

1. <span data-ttu-id="39acf-148">В hello [Пошаговое руководство](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), при создании логических шлюз, включите hello **высокий уровень доступности и масштабируемости** компонентов.</span><span class="sxs-lookup"><span data-stu-id="39acf-148">In hello [walkthrough](data-factory-move-data-between-onprem-and-cloud.md#create-gateway), while creating a logical gateway, enable hello **High Availability & Scalability** feature.</span></span> 

    ![Шлюз управления данными: включение возможности "Высокий уровень доступности и масштабируемость"](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-enable-high-availability-scalability.png)
2. <span data-ttu-id="39acf-150">В hello **Настройка** , либо используйте **установки Express** или **ручной установки** связать tooinstall шлюза на первом узле hello (на локальном компьютере Windows).</span><span class="sxs-lookup"><span data-stu-id="39acf-150">In hello **Configure** page, use either **Express Setup** or **Manual Setup** link tooinstall a gateway on hello first node (an on-premises Windows machine).</span></span>

    ![Шлюз управления данными: экспресс-установка или установка вручную](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-express-manual-setup.png)

    > [!NOTE]
    > <span data-ttu-id="39acf-152">Если параметр hello экспресс-установку hello связи для узлов выполняется без шифрования.</span><span class="sxs-lookup"><span data-stu-id="39acf-152">If you use hello express setup option, hello node-to-node communication is done without encryption.</span></span> <span data-ttu-id="39acf-153">Имя узла Hello является такой же, как имя машины hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-153">hello node name is same as hello machine name.</span></span> <span data-ttu-id="39acf-154">Используйте установку вручную, если связи узлов hello toobe зашифрованы или нужны toospecify имя узла по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="39acf-154">Use manual setup if hello node-node communication needs toobe encrypted or you want toospecify a node name of your choice.</span></span> <span data-ttu-id="39acf-155">Имена узлов невозможно изменить позже.</span><span class="sxs-lookup"><span data-stu-id="39acf-155">Node names cannot be edited later.</span></span>
3. <span data-ttu-id="39acf-156">Если выбрать **экспресс-установку**:</span><span class="sxs-lookup"><span data-stu-id="39acf-156">If you choose **express setup**</span></span>
    1. <span data-ttu-id="39acf-157">Появляется после сообщения после hello шлюза успешно установлено hello:</span><span class="sxs-lookup"><span data-stu-id="39acf-157">You see hello following message after hello gateway is successfully installed:</span></span>

        ![Шлюз управления данными: успешное выполнение экспресс-установки](media/data-factory-data-management-gateway-high-availability-scalability/express-setup-success.png)
    2. <span data-ttu-id="39acf-159">Запустите диспетчер конфигурации для управления данными для шлюза hello, следуя [эти инструкции](data-factory-data-management-gateway.md#configuration-manager).</span><span class="sxs-lookup"><span data-stu-id="39acf-159">Launch Data Management Configuration Manager for hello gateway by following [these instructions](data-factory-data-management-gateway.md#configuration-manager).</span></span> <span data-ttu-id="39acf-160">Вы видите hello имя шлюза, имя узла, состояние, и т. д.</span><span class="sxs-lookup"><span data-stu-id="39acf-160">You see hello gateway name, node name, status, etc.</span></span>

        ![Шлюз управления данными: успешная установка](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)
4. <span data-ttu-id="39acf-162">Если выбрать **установку вручную**:</span><span class="sxs-lookup"><span data-stu-id="39acf-162">If you choose **manual setup**:</span></span>
    1. <span data-ttu-id="39acf-163">Загрузка пакета установки hello из центра загрузки Майкрософт hello, запустите tooinstall шлюза на компьютере.</span><span class="sxs-lookup"><span data-stu-id="39acf-163">Download hello installation package from hello Microsoft Download Center, run it tooinstall gateway on your machine.</span></span>
    2. <span data-ttu-id="39acf-164">Используйте hello **ключ проверки подлинности** из hello **Настройка** страницы tooregister hello шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-164">Use hello **authentication key** from hello **Configure** page tooregister hello gateway.</span></span>
    
        ![Шлюз управления данными: успешная установка](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-authentication-key.png)
    3. <span data-ttu-id="39acf-166">В hello **новый узел шлюза** страницы, можно предоставить пользовательский **имя** toohello узла шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-166">In hello **New gateway node** page, you can provide a custom **name** toohello gateway node.</span></span> <span data-ttu-id="39acf-167">По умолчанию имя узла совпадает с именем компьютера hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-167">By default, node name is same as hello machine name.</span></span>    

        ![Шлюз управления данными: указание имени](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-name.png)
    4. <span data-ttu-id="39acf-169">На следующей странице приветствия, можно ли слишком**включить шифрование для взаимодействия с узлами**.</span><span class="sxs-lookup"><span data-stu-id="39acf-169">In hello next page, you can choose whether too**enable encryption for node-to-node communication**.</span></span> <span data-ttu-id="39acf-170">Нажмите кнопку **пропустить** toodisable шифрования (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="39acf-170">Click **Skip** toodisable encryption (default).</span></span>

        ![Шлюз управления данными: включение шифрования](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-node-encryption.png)  
    
        > [!NOTE]
        > <span data-ttu-id="39acf-172">Изменение режима шифрования поддерживается только при наличии шлюза логических hello узел один шлюз.</span><span class="sxs-lookup"><span data-stu-id="39acf-172">Changing of encryption mode is only supported when you have a single gateway node in hello logical gateway.</span></span> <span data-ttu-id="39acf-173">режим шифрования toochange hello после нескольких узлов шлюза hello следующие действия: удалить hello всех узлов, кроме одного узла, измените режим шифрования hello и затем снова добавьте узлы hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-173">toochange hello encryption mode when a gateway has multiple nodes, do hello following steps: delete all hello nodes except one node, change hello encryption mode, and then add hello nodes again.</span></span>
        > 
        > <span data-ttu-id="39acf-174">Список предварительных требований для использования TLS- и SSL-сертификатов см. в [этом разделе](#tlsssl-certificate-requirements).</span><span class="sxs-lookup"><span data-stu-id="39acf-174">See [TLS/SSL certificate requirements](#tlsssl-certificate-requirements) section for a list of requirements for using an TLS/SSL certificate.</span></span> 
    5. <span data-ttu-id="39acf-175">После успешной установки шлюза hello щелкните запустите диспетчер конфигураций:</span><span class="sxs-lookup"><span data-stu-id="39acf-175">After hello gateway is successfully installed, click Launch Configuration Manager:</span></span>
    
        ![Установка вручную: запуск Configuration Manager](media/data-factory-data-management-gateway-high-availability-scalability/manual-setup-launch-configuration-manager.png)   
    6. <span data-ttu-id="39acf-177">Вы видите диспетчера конфигурации шлюза управления данными на узле hello (Windows на локальном компьютере), отображающий состояние подключения к, **имя шлюза**, и **имя узла**.</span><span class="sxs-lookup"><span data-stu-id="39acf-177">you see Data Management Gateway Configuration Manager on hello node (on-premises Windows machine), which shows connectivity status, **gateway name**, and **node name**.</span></span>  

        ![Шлюз управления данными: успешная установка](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-installation-success.png)

        > [!NOTE]
        > <span data-ttu-id="39acf-179">При подготовке hello шлюза в виртуальной Машине Azure, можно использовать [этого шаблона диспетчера ресурсов Azure на GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span><span class="sxs-lookup"><span data-stu-id="39acf-179">If you are provisioning hello gateway on an Azure VM, you can use [this Azure Resource Manager template on GitHub](https://github.com/xiaoyingLJ/vms-with-multiple-data-management-gateway).</span></span> <span data-ttu-id="39acf-180">Этот скрипт создает логический шлюз, настраивает виртуальных машин с установленным программным обеспечением шлюз управления данными и регистрирует их в логические шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-180">This script creates a logical gateway, sets up VMs with Data Management Gateway software installed, and registers them with hello logical gateway.</span></span> 
6. <span data-ttu-id="39acf-181">На портале Azure, запустите hello **шлюза** страницы:</span><span class="sxs-lookup"><span data-stu-id="39acf-181">In Azure portal, launch hello **Gateway** page:</span></span> 
    1. <span data-ttu-id="39acf-182">Щелкните hello данных фабрики домашней странице портала hello **связанные службы**.</span><span class="sxs-lookup"><span data-stu-id="39acf-182">On hello data factory home page in hello portal, click **Linked Services**.</span></span>
    
        ![Домашняя страница фабрики данных](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-home-page.png)
    2. <span data-ttu-id="39acf-184">Выберите hello **шлюза** toosee hello **шлюза** страницы:</span><span class="sxs-lookup"><span data-stu-id="39acf-184">select hello **gateway** toosee hello **Gateway** page:</span></span>
    
        ![Домашняя страница фабрики данных](media/data-factory-data-management-gateway-high-availability-scalability/linked-services-gateway.png)
    4. <span data-ttu-id="39acf-186">Вы видите hello **шлюза** страницы:</span><span class="sxs-lookup"><span data-stu-id="39acf-186">You see hello **Gateway** page:</span></span>   

        ![Представление шлюза с одним узлом](media/data-factory-data-management-gateway-high-availability-scalability/gateway-first-node-portal-view.png) 
7. <span data-ttu-id="39acf-188">Нажмите кнопку **добавления узла** на tooadd инструментов hello логический шлюз toohello узла.</span><span class="sxs-lookup"><span data-stu-id="39acf-188">Click **Add Node** on hello toolbar tooadd a node toohello logical gateway.</span></span> <span data-ttu-id="39acf-189">При планировании toouse экспресс-установки, выполните этот шаг из hello на локальном компьютере, будет добавлен в качестве шлюза toohello узла.</span><span class="sxs-lookup"><span data-stu-id="39acf-189">If you are planning toouse express setup, do this step from hello on-premises machine that will be added as a node toohello gateway.</span></span> 

    ![Шлюз управления данными: меню Add Node (Добавить узел)](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)
8. <span data-ttu-id="39acf-191">Действия, аналогичные toosetting hello первый узел.</span><span class="sxs-lookup"><span data-stu-id="39acf-191">Steps are similar toosetting up hello first node.</span></span> <span data-ttu-id="39acf-192">Hello пользовательского интерфейса Configuration Manager позволяет задавать имя узла hello, при выборе варианта установки вручную hello:</span><span class="sxs-lookup"><span data-stu-id="39acf-192">hello Configuration Manager UI lets you set hello node name if you choose hello manual installation option:</span></span> 

    ![Configuration Manager: установка второго шлюза](media/data-factory-data-management-gateway-high-availability-scalability/install-second-gateway.png)
9. <span data-ttu-id="39acf-194">После успешной установки шлюза hello на узле hello hello Configuration Manager откроется следующий экран приветствия:</span><span class="sxs-lookup"><span data-stu-id="39acf-194">After hello gateway is installed successfully on hello node, hello Configuration Manager tool displays hello following screen:</span></span>  

    ![Configuration Manager: успешная установка второго шлюза](media/data-factory-data-management-gateway-high-availability-scalability/second-gateway-installation-successful.png)
10. <span data-ttu-id="39acf-196">При открытии hello **шлюза** страницы портала hello увидеть два узла шлюза представление:</span><span class="sxs-lookup"><span data-stu-id="39acf-196">If you open hello **Gateway** page in hello portal, you see two gateway nodes now:</span></span> 

    ![Шлюз с двумя узлами портала hello](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)
11. <span data-ttu-id="39acf-198">toodelete узла шлюза, нажмите кнопку **удалить узел** выберите узел hello toodelete и нажмите кнопку панели инструментов hello **удаление** из инструментов hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-198">toodelete a gateway node, click **Delete Node** on hello toolbar, select hello node you want toodelete, and then click **Delete** from hello toolbar.</span></span> <span data-ttu-id="39acf-199">Это действие удаляет hello выбранного узла из группы hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-199">This action deletes hello selected node from hello group.</span></span> <span data-ttu-id="39acf-200">Обратите внимание, что это действие не удаляет программное обеспечение шлюза управления данными hello из узла "hello" (Windows на локальном компьютере).</span><span class="sxs-lookup"><span data-stu-id="39acf-200">Note that this action does not uninstall hello data management gateway software from hello node (on-premises Windows machine).</span></span> <span data-ttu-id="39acf-201">Используйте **Установка и удаление программ** на панели управления на toouninstall hello hello локального шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-201">Use **Add or remove programs** in Control Panel on hello on-premises toouninstall hello gateway.</span></span> <span data-ttu-id="39acf-202">При удалении шлюза из узла "hello", автоматически удаляется на портале hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-202">When you uninstall gateway from hello node, it's automatically deleted in hello portal.</span></span>   

## <a name="upgrade-an-existing-gateway"></a><span data-ttu-id="39acf-203">Обновление имеющегося шлюза</span><span class="sxs-lookup"><span data-stu-id="39acf-203">Upgrade an existing gateway</span></span>
<span data-ttu-id="39acf-204">Вы можете обновить существующий шлюз toouse hello высокого уровня доступности и масштабируемости компонент.</span><span class="sxs-lookup"><span data-stu-id="39acf-204">You can upgrade an existing gateway toouse hello high availability and scalability feature.</span></span> <span data-ttu-id="39acf-205">Эта функция работает только с узлов, имеющих hello шлюз управления данными версии > = 2.12.xxxx.</span><span class="sxs-lookup"><span data-stu-id="39acf-205">This feature works only with nodes that have hello data management gateway of version >= 2.12.xxxx.</span></span> <span data-ttu-id="39acf-206">Вы увидите hello версия шлюза управления данными, которые установлены на компьютере в hello **справки** вкладке hello диспетчера конфигурации шлюза управления данными.</span><span class="sxs-lookup"><span data-stu-id="39acf-206">You can see hello version of data management gateway installed on a machine in hello **Help** tab of hello Data Management Gateway Configuration Manager.</span></span> 

1. <span data-ttu-id="39acf-207">Обновление шлюза hello hello локальной машины toohello последнюю версию, выполнив по загрузке и запуске пакет установки MSI с hello [центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=39717).</span><span class="sxs-lookup"><span data-stu-id="39acf-207">Update hello gateway on hello on-premises machine toohello latest version by following by downloading and running an MSI setup package from hello [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=39717).</span></span> <span data-ttu-id="39acf-208">Дополнительные сведения см. в разделе об [установке](data-factory-data-management-gateway.md#installation).</span><span class="sxs-lookup"><span data-stu-id="39acf-208">See [installation](data-factory-data-management-gateway.md#installation) section for details.</span></span>  
2. <span data-ttu-id="39acf-209">Перейдите toohello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="39acf-209">Navigate toohello Azure portal.</span></span> <span data-ttu-id="39acf-210">Запустите hello **фабрики данных страницы** для фабрики данных.</span><span class="sxs-lookup"><span data-stu-id="39acf-210">Launch hello **Data Factory page** for your data factory.</span></span> <span data-ttu-id="39acf-211">Щелкните плитку toolaunch связанной службы hello **страницы связанные службы**.</span><span class="sxs-lookup"><span data-stu-id="39acf-211">Click Linked services tile toolaunch hello **linked services page**.</span></span> <span data-ttu-id="39acf-212">Выберите hello шлюза toolaunch hello **страницу шлюза**.</span><span class="sxs-lookup"><span data-stu-id="39acf-212">Select hello gateway toolaunch hello **gateway page**.</span></span> <span data-ttu-id="39acf-213">Щелкните и включить **Предварительная версия функции** как показано в hello после изображения:</span><span class="sxs-lookup"><span data-stu-id="39acf-213">Click and enable **Preview Feature** as shown in hello following image:</span></span> 

    ![Шлюз управления данными: включение предварительной версии функции](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-existing-gateway-enable-high-availability.png)   
2. <span data-ttu-id="39acf-215">После включения функция предварительного просмотра hello hello портала, закройте все окна.</span><span class="sxs-lookup"><span data-stu-id="39acf-215">Once hello preview feature is enabled in hello portal, close all pages.</span></span> <span data-ttu-id="39acf-216">Снова откройте hello **страницу шлюза** toosee hello новый Предварительный просмотр пользовательского интерфейса (UI).</span><span class="sxs-lookup"><span data-stu-id="39acf-216">Reopen hello **gateway page** toosee hello new preview user interface (UI).</span></span>
 
    ![Шлюз управления данными: успешное включение предварительной версии функции](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview-success.png)

    ![Шлюз управления данными: предварительная версия пользовательского интерфейса](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-preview.png)

    > [!NOTE]
    > <span data-ttu-id="39acf-219">Во время обновления hello hello первый узел называется hello имя машины hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-219">During hello upgrade, name of hello first node is hello name of hello machine.</span></span> 
3. <span data-ttu-id="39acf-220">Теперь добавьте узел.</span><span class="sxs-lookup"><span data-stu-id="39acf-220">Now, add a node.</span></span> <span data-ttu-id="39acf-221">В hello **шлюза** щелкните **добавления узла**.</span><span class="sxs-lookup"><span data-stu-id="39acf-221">In hello **Gateway** page, click **Add Node**.</span></span>  

    ![Шлюз управления данными: меню Add Node (Добавить узел)](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-add-node-menu.png)

    <span data-ttu-id="39acf-223">Следуйте инструкциям hello предыдущего раздела tooset узел hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-223">Follow instructions from hello previous section tooset up hello node.</span></span> 

### <a name="installation-best-practices"></a><span data-ttu-id="39acf-224">Рекомендации по установке</span><span class="sxs-lookup"><span data-stu-id="39acf-224">Installation best practices</span></span>

- <span data-ttu-id="39acf-225">Настройте схему управления питанием на хост-компьютере hello hello шлюза, чтобы hello компьютера не удается.</span><span class="sxs-lookup"><span data-stu-id="39acf-225">Configure power plan on hello host machine for hello gateway so that hello machine does not hibernate.</span></span> <span data-ttu-id="39acf-226">Если хост-компьютере hello перейдет в спящий режим, hello шлюза не отвечает toodata запросов.</span><span class="sxs-lookup"><span data-stu-id="39acf-226">If hello host machine hibernates, hello gateway does not respond toodata requests.</span></span>
- <span data-ttu-id="39acf-227">Создайте резервную копию сертификата hello, связанной со шлюзом hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-227">Back up hello certificate associated with hello gateway.</span></span>
- <span data-ttu-id="39acf-228">Для оптимальной производительности убедитесь, что все узлы настроены одинаково (рекомендуется).</span><span class="sxs-lookup"><span data-stu-id="39acf-228">Ensure all nodes are of similar configuration (recommended) for ideal performance.</span></span> 
- <span data-ttu-id="39acf-229">Добавьте по крайней мере два узла tooensure высокого уровня доступности.</span><span class="sxs-lookup"><span data-stu-id="39acf-229">Add at least two nodes tooensure high availability.</span></span>  

### <a name="tlsssl-certificate-requirements"></a><span data-ttu-id="39acf-230">Требования к TLS- и SSL-сертификатам</span><span class="sxs-lookup"><span data-stu-id="39acf-230">TLS/SSL certificate requirements</span></span>
<span data-ttu-id="39acf-231">Ниже приведены требования к hello для сертификата hello TLS/SSL, используемый для защиты обмена данными между узлами шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-231">Here are hello requirements for hello TLS/SSL certificate that is used for securing communications between gateway nodes:</span></span>

- <span data-ttu-id="39acf-232">Hello сертификат должен быть доверенному X509 сертификата версии 3.</span><span class="sxs-lookup"><span data-stu-id="39acf-232">hello certificate must be a publicly trusted X509 v3 certificate.</span></span>
- <span data-ttu-id="39acf-233">Все узлы шлюза должны доверять этому сертификату.</span><span class="sxs-lookup"><span data-stu-id="39acf-233">All gateway nodes must trust this certificate.</span></span> 
- <span data-ttu-id="39acf-234">Мы рекомендуем использовать сертификаты, выданные общедоступным (сторонним) центром сертификации.</span><span class="sxs-lookup"><span data-stu-id="39acf-234">We recommend that you use certificates that are issued by a public (third-party) certification authority (CA).</span></span>
- <span data-ttu-id="39acf-235">Поддержка ключа любого размера, поддерживаемого Windows Server 2012 R2 для SSL-сертификатов.</span><span class="sxs-lookup"><span data-stu-id="39acf-235">Supports any key size supported by Windows Server 2012 R2 for SSL certificates.</span></span>
- <span data-ttu-id="39acf-236">Без поддержки сертификатов на основе ключей CNG.</span><span class="sxs-lookup"><span data-stu-id="39acf-236">Does not support certificates that use CNG keys.</span></span>
- <span data-ttu-id="39acf-237">Поддерживаются групповые сертификаты.</span><span class="sxs-lookup"><span data-stu-id="39acf-237">Wild-card certificates are supported.</span></span> 


## <a name="monitor-a-multi-node-gateway"></a><span data-ttu-id="39acf-238">Мониторинг шлюза с несколькими узлами</span><span class="sxs-lookup"><span data-stu-id="39acf-238">Monitor a multi-node gateway</span></span>
### <a name="multi-node-gateway-monitoring"></a><span data-ttu-id="39acf-239">Мониторинг шлюза с несколькими узлами</span><span class="sxs-lookup"><span data-stu-id="39acf-239">Multi-node gateway monitoring</span></span>
<span data-ttu-id="39acf-240">В hello портал Azure можно просмотреть снимок практически в режиме реального времени использования ресурсов (ЦП, памяти, network(in/out), т. д.) на каждом узле, а также состояния узлов шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-240">In hello Azure portal, you can view near-real time snapshot of resource utilization (CPU, memory, network(in/out), etc.) on each node along with statuses of gateway nodes.</span></span> 

![Шлюз управления данными: мониторинг нескольких узлов](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring.png)

<span data-ttu-id="39acf-242">Можно включить **Дополнительные параметры** в hello **шлюза** toosee advanced показателей, как страница **сети**(входящий/исходящий), **роли и учетные данные состояния**, что очень удобно при отладке проблем с сервером шлюза, и **одновременно выполняемых заданий** (под управлением / Limit) которого могут быть изменения и соответствующим образом изменен во время настройки производительности.</span><span class="sxs-lookup"><span data-stu-id="39acf-242">You can enable **Advanced Settings** in hello **Gateway** page toosee advanced metrics like **Network**(in/out), **Role & Credential Status**, which is helpful in debugging gateway issues, and **Concurrent Jobs** (Running/ Limit) which can be modified/ changed accordingly during performance tuning.</span></span> <span data-ttu-id="39acf-243">Hello следующей таблице приводится описание столбцов в hello **узлов шлюза** списка:</span><span class="sxs-lookup"><span data-stu-id="39acf-243">hello following table provides descriptions of columns in hello **Gateway Nodes** list:</span></span>  

<span data-ttu-id="39acf-244">Свойство мониторинга</span><span class="sxs-lookup"><span data-stu-id="39acf-244">Monitoring Property</span></span> | <span data-ttu-id="39acf-245">Описание</span><span class="sxs-lookup"><span data-stu-id="39acf-245">Description</span></span>
:------------------ | :---------- 
<span data-ttu-id="39acf-246">Имя</span><span class="sxs-lookup"><span data-stu-id="39acf-246">Name</span></span> | <span data-ttu-id="39acf-247">Имя логического шлюза hello и узлов, связанной со шлюзом hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-247">Name of hello logical gateway and nodes associated with hello gateway.</span></span>  
<span data-ttu-id="39acf-248">Состояние</span><span class="sxs-lookup"><span data-stu-id="39acf-248">Status</span></span> | <span data-ttu-id="39acf-249">Состояние логического шлюза hello и узлы шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-249">Status of hello logical gateway and hello gateway nodes.</span></span> <span data-ttu-id="39acf-250">например, "В сети", "Автономно", "Ограничено" и т. д. Сведения об этих состояниях см. в разделе [Состояние шлюза](#gateway-status).</span><span class="sxs-lookup"><span data-stu-id="39acf-250">Example: Online/Offline/Limited/etc. For information about these statuses, See [Gateway status](#gateway-status) section.</span></span> 
<span data-ttu-id="39acf-251">Version (версия)</span><span class="sxs-lookup"><span data-stu-id="39acf-251">Version</span></span> | <span data-ttu-id="39acf-252">Показывает версию hello логических шлюза hello и каждый узел шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-252">Shows hello version of hello logical gateway and each gateway node.</span></span> <span data-ttu-id="39acf-253">версия Hello hello логических шлюза определяется на основе версии большинства узлов в группе hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-253">hello version of hello logical gateway is determined based on version of majority of nodes in hello group.</span></span> <span data-ttu-id="39acf-254">Если узлы с различными версиями в установки логических шлюза hello, только узлы hello с hello же номер версии, что шлюз логические функции hello должным образом.</span><span class="sxs-lookup"><span data-stu-id="39acf-254">If there are nodes with different versions in hello logical gateway setup, only hello nodes with hello same version number as hello logical gateway function properly.</span></span> <span data-ttu-id="39acf-255">Другие пользователи находятся в режиме limited приветствия и требуется toobe обновлены вручную (только в случае сбоя автоматического обновления).</span><span class="sxs-lookup"><span data-stu-id="39acf-255">Others are in hello limited mode and need toobe manually updated (only in case auto-update fails).</span></span> 
<span data-ttu-id="39acf-256">Объем доступной памяти</span><span class="sxs-lookup"><span data-stu-id="39acf-256">Available memory</span></span> | <span data-ttu-id="39acf-257">Объем доступной памяти на узле шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-257">Available memory on a gateway node.</span></span> <span data-ttu-id="39acf-258">Это значение соответствует моментальному снимку в режиме, близком к реальному времени.</span><span class="sxs-lookup"><span data-stu-id="39acf-258">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="39acf-259">загрузка ЦП;</span><span class="sxs-lookup"><span data-stu-id="39acf-259">CPU utilization</span></span> | <span data-ttu-id="39acf-260">Использование ЦП на узле шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-260">CPU utilization of a gateway node.</span></span> <span data-ttu-id="39acf-261">Это значение соответствует моментальному снимку в режиме, близком к реальному времени.</span><span class="sxs-lookup"><span data-stu-id="39acf-261">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="39acf-262">Networking (In/Out) (Сеть (входящий и исходящий трафик))</span><span class="sxs-lookup"><span data-stu-id="39acf-262">Networking (In/Out)</span></span> | <span data-ttu-id="39acf-263">Использование сети на узле шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-263">Network utilization of a gateway node.</span></span> <span data-ttu-id="39acf-264">Это значение соответствует моментальному снимку в режиме, близком к реальному времени.</span><span class="sxs-lookup"><span data-stu-id="39acf-264">This value is a near real-time snapshot.</span></span> 
<span data-ttu-id="39acf-265">Concurrent Jobs (Running/Limit) (Одновременные задания (выполняемые и ограниченные))</span><span class="sxs-lookup"><span data-stu-id="39acf-265">Concurrent Jobs (Running/ Limit)</span></span> | <span data-ttu-id="39acf-266">Число заданий или задач, выполняющихся на каждом узле.</span><span class="sxs-lookup"><span data-stu-id="39acf-266">Number of jobs or tasks running on each node.</span></span> <span data-ttu-id="39acf-267">Это значение соответствует моментальному снимку в режиме, близком к реальному времени.</span><span class="sxs-lookup"><span data-stu-id="39acf-267">This value is a near real-time snapshot.</span></span> <span data-ttu-id="39acf-268">Ограничение означает максимальное hello одновременно выполняемых заданий для каждого узла.</span><span class="sxs-lookup"><span data-stu-id="39acf-268">Limit signifies hello maximum concurrent jobs for each node.</span></span> <span data-ttu-id="39acf-269">Это значение определяется в зависимости от размера машины hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-269">This value is defined based on hello machine size.</span></span> <span data-ttu-id="39acf-270">Можно увеличить tooscale предел hello скорость выполнения параллельных заданий в сложных сценариях, где ЦП и памяти / сети недостаточно, но действия истекает время ожидания. Эта возможность доступна также с одним узлом шлюза (даже если не включена функция hello масштабируемости и доступности).</span><span class="sxs-lookup"><span data-stu-id="39acf-270">You can increase hello limit tooscale up concurrent job execution in advanced scenarios, where CPU/ memory/ network is under-utilized, but activities are timing out. This capability is also available with a single-node gateway (even when hello scalability and availability feature is not enabled).</span></span> <span data-ttu-id="39acf-271">Дополнительные сведения см. в разделе о [рекомендациях по масштабированию](#scale-considerations).</span><span class="sxs-lookup"><span data-stu-id="39acf-271">For more information, see [scale considerations](#scale-considerations) section.</span></span> 
<span data-ttu-id="39acf-272">Роль</span><span class="sxs-lookup"><span data-stu-id="39acf-272">Role</span></span> | <span data-ttu-id="39acf-273">Существует два типа ролей — диспетчер и рабочая роль.</span><span class="sxs-lookup"><span data-stu-id="39acf-273">There are two types of roles – Dispatcher and worker.</span></span> <span data-ttu-id="39acf-274">Все узлы — это работники, что означает, что они могут быть используется tooexecute заданий.</span><span class="sxs-lookup"><span data-stu-id="39acf-274">All nodes are workers, which means they can all be used tooexecute jobs.</span></span> <span data-ttu-id="39acf-275">Имеется только один диспетчер узел, который будет использоваться toopull задачи и задания из облачных служб и направление toodifferent рабочих узлов (включая сам).</span><span class="sxs-lookup"><span data-stu-id="39acf-275">There is only one dispatcher node, which is used toopull tasks/jobs from cloud services and dispatch them toodifferent worker nodes (including itself).</span></span> 

![Шлюз управления данными: расширенный мониторинг нескольких узлов](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-advanced.png)

### <a name="gateway-status"></a><span data-ttu-id="39acf-277">Состояние шлюза</span><span class="sxs-lookup"><span data-stu-id="39acf-277">Gateway status</span></span>

<span data-ttu-id="39acf-278">Hello следующей таблице представлены возможные состояния **узел шлюза**:</span><span class="sxs-lookup"><span data-stu-id="39acf-278">hello following table provides possible statuses of a **gateway node**:</span></span> 

<span data-ttu-id="39acf-279">Состояние</span><span class="sxs-lookup"><span data-stu-id="39acf-279">Status</span></span>  | <span data-ttu-id="39acf-280">Комментарии и сценарии</span><span class="sxs-lookup"><span data-stu-id="39acf-280">Comments/Scenarios</span></span>
:------- | :------------------
<span data-ttu-id="39acf-281">В сети</span><span class="sxs-lookup"><span data-stu-id="39acf-281">Online</span></span> | <span data-ttu-id="39acf-282">Узел подключенных tooData фабрики служб.</span><span class="sxs-lookup"><span data-stu-id="39acf-282">Node connected tooData Factory service.</span></span>
<span data-ttu-id="39acf-283">Автономно</span><span class="sxs-lookup"><span data-stu-id="39acf-283">Offline</span></span> | <span data-ttu-id="39acf-284">Узел находится в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="39acf-284">Node is offline.</span></span>
<span data-ttu-id="39acf-285">Обновление</span><span class="sxs-lookup"><span data-stu-id="39acf-285">Upgrading</span></span> | <span data-ttu-id="39acf-286">узел Hello выполняется автоматическое обновление.</span><span class="sxs-lookup"><span data-stu-id="39acf-286">hello node is being auto-updated.</span></span>
<span data-ttu-id="39acf-287">Ограничено</span><span class="sxs-lookup"><span data-stu-id="39acf-287">Limited</span></span> | <span data-ttu-id="39acf-288">Из-за проблемы tooConnectivity.</span><span class="sxs-lookup"><span data-stu-id="39acf-288">Due tooConnectivity issue.</span></span> <span data-ttu-id="39acf-289">Возможно, из-за проблемы порт 8050 tooHTTP, проблема подключения service bus или проблемы синхронизации учетных данных.</span><span class="sxs-lookup"><span data-stu-id="39acf-289">May be due tooHTTP port 8050 issue, service bus connectivity issue, or credential sync issue.</span></span> 
<span data-ttu-id="39acf-290">Неактивно</span><span class="sxs-lookup"><span data-stu-id="39acf-290">Inactive</span></span> | <span data-ttu-id="39acf-291">Узел находится в конфигурации, отличный от конфигурации hello других большинство узлов.</span><span class="sxs-lookup"><span data-stu-id="39acf-291">Node is in a configuration different from hello configuration of other majority nodes.</span></span><br/><br/> <span data-ttu-id="39acf-292">Узел может быть неактивные, если она не может подключиться tooother узлов.</span><span class="sxs-lookup"><span data-stu-id="39acf-292">A node can be inactive when it cannot connect tooother nodes.</span></span> 


<span data-ttu-id="39acf-293">Hello следующей таблице представлены возможные состояния **логических шлюза**.</span><span class="sxs-lookup"><span data-stu-id="39acf-293">hello following table provides possible statuses of a **logical gateway**.</span></span> <span data-ttu-id="39acf-294">состояние шлюза Hello зависит от состояния узлов шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-294">hello gateway status depends on statuses of hello gateway nodes.</span></span> 

<span data-ttu-id="39acf-295">Состояние</span><span class="sxs-lookup"><span data-stu-id="39acf-295">Status</span></span> | <span data-ttu-id="39acf-296">Комментарии</span><span class="sxs-lookup"><span data-stu-id="39acf-296">Comments</span></span>
:----- | :-------
<span data-ttu-id="39acf-297">Needs Registration (Требуется регистрация)</span><span class="sxs-lookup"><span data-stu-id="39acf-297">Needs Registration</span></span> | <span data-ttu-id="39acf-298">Ни один узел еще зарегистрированных toothis логических шлюза</span><span class="sxs-lookup"><span data-stu-id="39acf-298">No node is yet registered toothis logical gateway</span></span>
<span data-ttu-id="39acf-299">В сети</span><span class="sxs-lookup"><span data-stu-id="39acf-299">Online</span></span> | <span data-ttu-id="39acf-300">Узлы шлюза подключены к сети.</span><span class="sxs-lookup"><span data-stu-id="39acf-300">Gateway Nodes are online</span></span>
<span data-ttu-id="39acf-301">Автономно</span><span class="sxs-lookup"><span data-stu-id="39acf-301">Offline</span></span> | <span data-ttu-id="39acf-302">Узлы не подключены к сети.</span><span class="sxs-lookup"><span data-stu-id="39acf-302">No node in online status.</span></span>
<span data-ttu-id="39acf-303">Ограничено</span><span class="sxs-lookup"><span data-stu-id="39acf-303">Limited</span></span> | <span data-ttu-id="39acf-304">Не все узлы в этом шлюзе находятся в работоспособном состоянии.</span><span class="sxs-lookup"><span data-stu-id="39acf-304">Not all nodes in this gateway are in healthy state.</span></span> <span data-ttu-id="39acf-305">Это состояние является предупреждением, что определенный узел не работает.</span><span class="sxs-lookup"><span data-stu-id="39acf-305">This status is a warning that some node might be down!</span></span> <br/><br/><span data-ttu-id="39acf-306">Может произойти из-за проблемы синхронизации toocredential на узле диспетчера рабочих.</span><span class="sxs-lookup"><span data-stu-id="39acf-306">Could be due toocredential sync issue on dispatcher/worker node.</span></span> 

### <a name="pipeline-activities-monitoring"></a><span data-ttu-id="39acf-307">Мониторинг конвейера и действий</span><span class="sxs-lookup"><span data-stu-id="39acf-307">Pipeline/ activities monitoring</span></span>
<span data-ttu-id="39acf-308">Hello портал Azure предоставляет средств со сведениям детальные узла мониторинга конвейера.</span><span class="sxs-lookup"><span data-stu-id="39acf-308">hello Azure portal provides a pipeline monitoring experience with granular node level details.</span></span> <span data-ttu-id="39acf-309">Например, здесь можно узнать о действиях, выполненных на разных узлах.</span><span class="sxs-lookup"><span data-stu-id="39acf-309">For example, it shows which activities ran on which node.</span></span> <span data-ttu-id="39acf-310">Эта информация может быть полезно для понимания проблем с производительностью на определенном узле, например из-за регулирования toonetwork.</span><span class="sxs-lookup"><span data-stu-id="39acf-310">This information can be helpful in understanding performance issues on a particular node, say due toonetwork throttling.</span></span> 

![Шлюз управления данными: мониторинг нескольких узлов для конвейеров](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-monitoring-pipelines.png)

![Шлюз управления данными: сведения о конвейере](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-multi-node-pipeline-details.png)

## <a name="scale-considerations"></a><span data-ttu-id="39acf-313">Рекомендации по масштабированию</span><span class="sxs-lookup"><span data-stu-id="39acf-313">Scale considerations</span></span>

### <a name="scale-out"></a><span data-ttu-id="39acf-314">Масштабирование</span><span class="sxs-lookup"><span data-stu-id="39acf-314">Scale out</span></span>
<span data-ttu-id="39acf-315">Здравствуйте, когда **доступной памяти недостаточно** и hello **ЦП велика**, Добавление нового узла помогает масштабирования hello нагрузки на нескольких компьютерах.</span><span class="sxs-lookup"><span data-stu-id="39acf-315">When hello **available memory is low** and hello **CPU usage is high**, adding a new node helps scale out hello load across machines.</span></span> <span data-ttu-id="39acf-316">Если действия не удается из-за ожидания tootime или шлюз узел находится в автономном режиме, это полезно, если добавить шлюз toohello узла.</span><span class="sxs-lookup"><span data-stu-id="39acf-316">If activities are failing due tootime-out or gateway node being offline, it helps if you add a node toohello gateway.</span></span>
 
### <a name="scale-up"></a><span data-ttu-id="39acf-317">Увеличение масштаба</span><span class="sxs-lookup"><span data-stu-id="39acf-317">Scale up</span></span>
<span data-ttu-id="39acf-318">Hello доступной памяти и ЦП также не используются, когда hello простоя емкость составляет 0, следует использовать масштабирование вверх за счет увеличения hello количество одновременно выполняемых заданий, которые могут выполняться на узле.</span><span class="sxs-lookup"><span data-stu-id="39acf-318">When hello available memory and CPU are not utilized well, but hello idle capacity is 0, you should scale up by increasing hello number of concurrent jobs that can run on a node.</span></span> <span data-ttu-id="39acf-319">Вы также можете tooscale вверх при действия истекает время ожидания из-за перегрузки hello шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-319">You may also want tooscale up when activities are timing out because hello gateway is overloaded.</span></span> <span data-ttu-id="39acf-320">Как показано в hello после изображения, можно увеличить hello максимальной емкости узла.</span><span class="sxs-lookup"><span data-stu-id="39acf-320">As shown in hello following image, you can increase hello maximum capacity for a node.</span></span> <span data-ttu-id="39acf-321">Мы советуем использовать удвоение его toostart с.</span><span class="sxs-lookup"><span data-stu-id="39acf-321">We suggest doubling it toostart with.</span></span>  

![Шлюз управления данными: рекомендации по масштабированию](media/data-factory-data-management-gateway-high-availability-scalability/data-factory-gateway-scale-considerations.png)


## <a name="known-issuesbreaking-changes"></a><span data-ttu-id="39acf-323">Известные проблемы и критические изменения</span><span class="sxs-lookup"><span data-stu-id="39acf-323">Known issues/breaking changes</span></span>

- <span data-ttu-id="39acf-324">В настоящее время может иметь toofour узлов физический шлюз для одного логического шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-324">Currently, you can have up toofour physical gateway nodes for a single logical gateway.</span></span> <span data-ttu-id="39acf-325">Если вам требуется более четырех узлов, для повышения производительности, отправить сообщение электронной почты слишком[DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="39acf-325">If you need more than four nodes for performance reasons, send an email too[DMGHelp@microsoft.com](mailto:DMGHelp@microsoft.com).</span></span>
- <span data-ttu-id="39acf-326">Не удается повторно зарегистрировать узел шлюза hello ключ проверки подлинности из другой логический шлюза tooswitch из текущего логического шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-326">You cannot re-register a gateway node with hello authentication key from another logical gateway tooswitch from hello current logical gateway.</span></span> <span data-ttu-id="39acf-327">toore регистрацию удаление шлюза hello из узла "hello", переустановите шлюз hello и зарегистрируйте его с hello ключ проверки подлинности для hello другой логический шлюз.</span><span class="sxs-lookup"><span data-stu-id="39acf-327">toore-register, uninstall hello gateway from hello node, reinstall hello gateway, and register it with hello authentication key for hello other logical gateway.</span></span> 
- <span data-ttu-id="39acf-328">Если прокси-сервер HTTP, необходимые для всех узлов шлюза, установить прокси-сервера hello в diahost.exe.config и diawp.exe.config и используйте hello server manager toomake убедиться, что все узлы имеют hello же diahost.exe.config и diawip.exe.config. Дополнительные сведения см. в разделе о [настройке параметров прокси-сервера](data-factory-data-management-gateway.md#configure-proxy-server-settings).</span><span class="sxs-lookup"><span data-stu-id="39acf-328">If HTTP proxy is required for all your gateway nodes, set hello proxy in diahost.exe.config and diawp.exe.config, and use hello server manager toomake sure all nodes have hello same diahost.exe.config and diawip.exe.config. See [configure proxy settings](data-factory-data-management-gateway.md#configure-proxy-server-settings) section for details.</span></span> 
- <span data-ttu-id="39acf-329">toochange режим шифрования для обмена данными узла на узел в диспетчере конфигурации шлюза, удалить все узлы hello hello портале, кроме одного.</span><span class="sxs-lookup"><span data-stu-id="39acf-329">toochange encryption mode for node-to-node communication in Gateway Configuration Manager, delete all hello nodes in hello portal except one.</span></span> <span data-ttu-id="39acf-330">Затем можно добавьте узлы обратно после изменения режима шифрования hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-330">Then, add nodes back after changing hello encryption mode.</span></span>
- <span data-ttu-id="39acf-331">Используйте официальный сертификат SSL, при выборе канала связи для узлов tooencrypt hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-331">Use an official SSL certificate if you choose tooencrypt hello node-to-node communication channel.</span></span> <span data-ttu-id="39acf-332">Самозаверяющий сертификат может вызвать проблемы с подключением как hello, который не заслуживает доверия один сертификат выдан центром списка на других компьютерах.</span><span class="sxs-lookup"><span data-stu-id="39acf-332">Self-signed certificate may cause connectivity issues as hello same certificate may not be trusted in certifying authority list on other machines.</span></span> 
- <span data-ttu-id="39acf-333">Не удается зарегистрировать шлюз шлюз логических узла tooa при версию узла hello меньше, чем версия hello логических шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-333">You cannot register a gateway node tooa logical gateway when hello node version is lower than hello logical gateway version.</span></span> <span data-ttu-id="39acf-334">Удалить все узлы hello логических шлюза с портала, чтобы нижний node(downgrade) версии можно зарегистрировать его.</span><span class="sxs-lookup"><span data-stu-id="39acf-334">Delete all nodes of hello logical gateway from portal so that you can register a lower version node(downgrade) it.</span></span> <span data-ttu-id="39acf-335">При удалении всех узлов логических шлюза, вручную установите и зарегистрируйте новый шлюз логических toothat узлов.</span><span class="sxs-lookup"><span data-stu-id="39acf-335">If you delete all nodes of a logical gateway, manually install and register new nodes toothat logical gateway.</span></span> <span data-ttu-id="39acf-336">В этом случае экспресс-установка не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="39acf-336">Express setup is not supported in this case.</span></span>
- <span data-ttu-id="39acf-337">Нельзя использовать экспресс-установку tooinstall узлы tooan существующий логический шлюз, который по-прежнему использует учетные данные облака.</span><span class="sxs-lookup"><span data-stu-id="39acf-337">You cannot use express setup tooinstall nodes tooan existing logical gateway, which is still using cloud credentials.</span></span> <span data-ttu-id="39acf-338">Можно проверить, где хранятся учетные данные hello из hello диспетчера конфигурации шлюза на вкладку "Параметры" hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-338">You can check where hello credentials are stored from hello Gateway Configuration Manager on hello Settings tab.</span></span>
- <span data-ttu-id="39acf-339">Нельзя использовать экспресс-установку tooinstall узлы tooan существующий логический шлюз, который имеет включено шифрование узла на узел.</span><span class="sxs-lookup"><span data-stu-id="39acf-339">You cannot use express setup tooinstall nodes tooan existing logical gateway, which has node-to-node encryption enabled.</span></span> <span data-ttu-id="39acf-340">Как изменять ее режим шифрования hello включает вручную добавлять сертификаты, экспресс-установка вариант больше нет.</span><span class="sxs-lookup"><span data-stu-id="39acf-340">As setting hello encryption mode involves manually adding certificates, express install is no more an option.</span></span> 
- <span data-ttu-id="39acf-341">Чтобы скопировать файл из локальной среды, не используйте каталог \\localhost или C:\files, так как не все узлы имеют доступ к localhost или к локальному диску.</span><span class="sxs-lookup"><span data-stu-id="39acf-341">For a file copy from on-premises environment, you should not use \\localhost or C:\files anymore since localhost or local drive might not be accessible via all nodes.</span></span> <span data-ttu-id="39acf-342">Вместо этого используйте \\расположение ServerName\files toospecify файлов.</span><span class="sxs-lookup"><span data-stu-id="39acf-342">Instead, use \\ServerName\files toospecify files’ location.</span></span>


## <a name="rolling-back-from-hello-preview"></a><span data-ttu-id="39acf-343">Откат из предварительной версии hello</span><span class="sxs-lookup"><span data-stu-id="39acf-343">Rolling back from hello preview</span></span> 
<span data-ttu-id="39acf-344">tooroll обратно из предварительной версии hello, удалите все узлы, кроме одного узла.</span><span class="sxs-lookup"><span data-stu-id="39acf-344">tooroll back from hello preview, delete all nodes but one node.</span></span> <span data-ttu-id="39acf-345">Неважно, какие узлы, удалить, но убедитесь, что имеется хотя бы один узел в логической шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-345">It doesn’t matter which nodes you delete, but ensure you have at least one node in hello logical gateway.</span></span> <span data-ttu-id="39acf-346">Можно удалить узел, путем удаления шлюза на компьютере hello или с помощью портала Azure hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-346">You can delete a node either by uninstalling gateway on hello machine or by using hello Azure portal.</span></span> <span data-ttu-id="39acf-347">В hello в hello портале Azure **фабрики данных** щелкните связанной службы toolaunch hello **связанные службы** страницы.</span><span class="sxs-lookup"><span data-stu-id="39acf-347">In hello Azure portal, in hello **Data Factory** page, click Linked services toolaunch hello **Linked services** page.</span></span> <span data-ttu-id="39acf-348">Выберите hello шлюза toolaunch hello **шлюза** страницы.</span><span class="sxs-lookup"><span data-stu-id="39acf-348">Select hello gateway toolaunch hello **Gateway** page.</span></span> <span data-ttu-id="39acf-349">На странице приветствия шлюза вы увидите hello узлов, связанной со шлюзом hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-349">In hello Gateway page, you can see hello nodes associated with hello gateway.</span></span> <span data-ttu-id="39acf-350">Страница приветствия позволяет удалить узел из шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-350">hello page lets you delete a node from hello gateway.</span></span>
 
<span data-ttu-id="39acf-351">После удаления, нажмите кнопку **Предварительный просмотр компонентов** в hello же странице портала Azure и отключить функцию предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="39acf-351">After deleting, click **preview features** in hello same Azure portal page, and disable hello preview feature.</span></span> <span data-ttu-id="39acf-352">Выполнен сброс шлюза шлюза tooone узел общедоступной версии (общедоступная).</span><span class="sxs-lookup"><span data-stu-id="39acf-352">You have reset your gateway tooone node GA (general availability) gateway.</span></span>


## <a name="next-steps"></a><span data-ttu-id="39acf-353">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="39acf-353">Next steps</span></span>
<span data-ttu-id="39acf-354">Просмотрите hello в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="39acf-354">Review hello following articles:</span></span>
- <span data-ttu-id="39acf-355">[Шлюз управления данными](data-factory-data-management-gateway.md) -приведен подробный обзор hello шлюза.</span><span class="sxs-lookup"><span data-stu-id="39acf-355">[Data Management Gateway](data-factory-data-management-gateway.md) - provides a detailed overview of hello gateway.</span></span>
- <span data-ttu-id="39acf-356">Статья [Перемещение данных между локальными источниками и облаком с помощью шлюза управления данными](data-factory-move-data-between-onprem-and-cloud.md) содержит пошаговые инструкции по использованию шлюза с одним узлом.</span><span class="sxs-lookup"><span data-stu-id="39acf-356">[Move data between on-premises and cloud data stores](data-factory-move-data-between-onprem-and-cloud.md) - contains a walkthrough with step-by-step instructions for using a gateway with a single node.</span></span> 
