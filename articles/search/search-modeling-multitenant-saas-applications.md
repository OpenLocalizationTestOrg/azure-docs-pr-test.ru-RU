---
title: "aaaModeling Мультитенантность в поиске Azure | Документы Microsoft"
description: "Узнайте о распространенных шаблонах разработки мультитенантных приложений SaaS с использованием Поиска Azure."
services: search
manager: jhubbard
author: ashmaka
documentationcenter: 
ms.assetid: 72e9696a-553b-47dc-9e05-a82db0ebf094
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 10/26/2016
ms.author: ashmaka
ms.openlocfilehash: dd46cda772d32566b9aaa18d407f12fdf178bd43
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="design-patterns-for-multitenant-saas-applications-and-azure-search"></a><span data-ttu-id="e1870-103">Шаблоны разработки для мультитенантных приложений SaaS и Поиска Azure</span><span class="sxs-lookup"><span data-stu-id="e1870-103">Design patterns for multitenant SaaS applications and Azure Search</span></span>
<span data-ttu-id="e1870-104">Многопользовательского приложения, является hello же служб и возможностей tooany количество клиентов, которые не отображаются, и совместно использовать данные hello любым другим клиентом.</span><span class="sxs-lookup"><span data-stu-id="e1870-104">A multitenant application is one that provides hello same services and capabilities tooany number of tenants who cannot see or share hello data of any other tenant.</span></span> <span data-ttu-id="e1870-105">В этом документе рассматриваются стратегии изоляции клиентов в мультитенантных приложениях на основе Поиска Azure.</span><span class="sxs-lookup"><span data-stu-id="e1870-105">This document discusses tenant isolation strategies for multitenant applications built with Azure Search.</span></span>

## <a name="azure-search-concepts"></a><span data-ttu-id="e1870-106">Основные понятия Поиска Azure</span><span class="sxs-lookup"><span data-stu-id="e1870-106">Azure Search concepts</span></span>
<span data-ttu-id="e1870-107">Как решение поиска как службы поиска Azure позволяет разработчикам tooadd широкие возможности поиска возникает tooapplications без управления любой инфраструктуры, и полезные советы при поиске.</span><span class="sxs-lookup"><span data-stu-id="e1870-107">As a search-as-a-service solution, Azure Search allows developers tooadd rich search experiences tooapplications without managing any infrastructure or becoming an expert in search.</span></span> <span data-ttu-id="e1870-108">Данные отправлены toohello службы, а затем сохраняются в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-108">Data is uploaded toohello service and then stored in hello cloud.</span></span> <span data-ttu-id="e1870-109">С помощью простых запросов toohello API поиска Azure, hello данных можно затем изменить и поиск.</span><span class="sxs-lookup"><span data-stu-id="e1870-109">Using simple requests toohello Azure Search API, hello data can then be modified and searched.</span></span> <span data-ttu-id="e1870-110">Общие сведения о службе hello можно найти в [в этой статье](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="e1870-110">An overview of hello service can be found in [this article](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="e1870-111">Прежде чем обсуждать шаблоны проектирования, это важно toounderstand некоторые основные понятия в поиске Azure.</span><span class="sxs-lookup"><span data-stu-id="e1870-111">Before discussing design patterns, it is important toounderstand some concepts in Azure Search.</span></span>

### <a name="search-services-indexes-fields-and-documents"></a><span data-ttu-id="e1870-112">Службы поиска, индексы, поля и документы</span><span class="sxs-lookup"><span data-stu-id="e1870-112">Search services, indexes, fields, and documents</span></span>
<span data-ttu-id="e1870-113">При использовании службы поиска Azure, один подписывается tooa *службы поиска*.</span><span class="sxs-lookup"><span data-stu-id="e1870-113">When using Azure Search, one subscribes tooa *search service*.</span></span> <span data-ttu-id="e1870-114">Как отправленный tooAzure поиска данных, он хранится в *индекс* в службе поиска hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-114">As data is uploaded tooAzure Search, it is stored in an *index* within hello search service.</span></span> <span data-ttu-id="e1870-115">В одной службе может существовать множество индексов.</span><span class="sxs-lookup"><span data-stu-id="e1870-115">There can be a number of indexes within a single service.</span></span> <span data-ttu-id="e1870-116">toouse hello знакомых концепций баз данных службы поиска hello могут быть приравнены tooa базы данных, если индексы hello в службе могут быть приравнены tootables в базе данных.</span><span class="sxs-lookup"><span data-stu-id="e1870-116">toouse hello familiar concepts of databases, hello search service can be likened tooa database while hello indexes within a service can be likened tootables within a database.</span></span>

<span data-ttu-id="e1870-117">Каждый индекс в службе поиска имеет свою собственную схему, которая определяется рядом настраиваемых *полей*.</span><span class="sxs-lookup"><span data-stu-id="e1870-117">Each index within a search service has its own schema, which is defined by a number of customizable *fields*.</span></span> <span data-ttu-id="e1870-118">Данные в форме hello отдельных добавляется индекс поиска Azure tooan *документов*.</span><span class="sxs-lookup"><span data-stu-id="e1870-118">Data is added tooan Azure Search index in hello form of individual *documents*.</span></span> <span data-ttu-id="e1870-119">Каждый документ должен быть загруженного tooa определенного индекса и должны соответствовать схеме индекса.</span><span class="sxs-lookup"><span data-stu-id="e1870-119">Each document must be uploaded tooa particular index and must fit that index's schema.</span></span> <span data-ttu-id="e1870-120">При поиске данных с помощью поиска Azure, запросы полнотекстового поиска hello выдаются с определенного индекса.</span><span class="sxs-lookup"><span data-stu-id="e1870-120">When searching data using Azure Search, hello full-text search queries are issued against a particular index.</span></span>  <span data-ttu-id="e1870-121">toocompare toothose эти основные понятия базы данных, поля могут быть приравнены toocolumns в таблице и документы могут быть приравнены toorows.</span><span class="sxs-lookup"><span data-stu-id="e1870-121">toocompare these concepts toothose of a database, fields can be likened toocolumns in a table and documents can be likened toorows.</span></span>

### <a name="scalability"></a><span data-ttu-id="e1870-122">Масштабируемость</span><span class="sxs-lookup"><span data-stu-id="e1870-122">Scalability</span></span>
<span data-ttu-id="e1870-123">Любой службы поиска Azure в hello Standard [ценовой категории](https://azure.microsoft.com/pricing/details/search/) можно масштабировать в два измерения: хранение и доступность.</span><span class="sxs-lookup"><span data-stu-id="e1870-123">Any Azure Search service in hello Standard [pricing tier](https://azure.microsoft.com/pricing/details/search/) can scale in two dimensions: storage and availability.</span></span>

* <span data-ttu-id="e1870-124">*Секции* можно добавить хранилище hello tooincrease службы поиска.</span><span class="sxs-lookup"><span data-stu-id="e1870-124">*Partitions* can be added tooincrease hello storage of a search service.</span></span>
* <span data-ttu-id="e1870-125">*Реплики* можно добавить tooa службы tooincrease hello пропускную способность запросов, которые могут обрабатывать службы поиска.</span><span class="sxs-lookup"><span data-stu-id="e1870-125">*Replicas* can be added tooa service tooincrease hello throughput of requests that a search service can handle.</span></span>

<span data-ttu-id="e1870-126">Добавление и удаление разделов и реплик на позволит hello емкость hello toogrow службы поиска с объемом данных и трафика требований приложения hello hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-126">Adding and removing partitions and replicas at will allow hello capacity of hello search service toogrow with hello amount of data and traffic hello application demands.</span></span> <span data-ttu-id="e1870-127">Чтобы для поиска службы tooachieve чтения [соглашения об уровне ОБСЛУЖИВАНИЯ](https://azure.microsoft.com/support/legal/sla/search/v1_0/), требует двух реплик.</span><span class="sxs-lookup"><span data-stu-id="e1870-127">In order for a search service tooachieve a read [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires two replicas.</span></span> <span data-ttu-id="e1870-128">В порядок tooachieve службы для чтения и записи [соглашения об уровне ОБСЛУЖИВАНИЯ](https://azure.microsoft.com/support/legal/sla/search/v1_0/), требуется три реплики.</span><span class="sxs-lookup"><span data-stu-id="e1870-128">In order for a service tooachieve a read-write [SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/), it requires three replicas.</span></span>

### <a name="service-and-index-limits-in-azure-search"></a><span data-ttu-id="e1870-129">Ограничения служб и индексов в Поиске Azure</span><span class="sxs-lookup"><span data-stu-id="e1870-129">Service and index limits in Azure Search</span></span>
<span data-ttu-id="e1870-130">Несколько отличаются [ценовым категориям](https://azure.microsoft.com/pricing/details/search/) в поиске Azure, каждый из уровней hello имеет другие [ограничения и квоты](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="e1870-130">There are a few different [pricing tiers](https://azure.microsoft.com/pricing/details/search/) in Azure Search, each of hello tiers has different [limits and quotas](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="e1870-131">Некоторые из этих ограничений подвергаются hello уровня обслуживания, некоторые являются на уровне индексов hello, а некоторые — на уровне секции hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-131">Some of these limits are at hello service-level, some are at hello index-level, and some are at hello partition-level.</span></span>

|  | <span data-ttu-id="e1870-132">Basic</span><span class="sxs-lookup"><span data-stu-id="e1870-132">Basic</span></span> | <span data-ttu-id="e1870-133">Standard1</span><span class="sxs-lookup"><span data-stu-id="e1870-133">Standard1</span></span> | <span data-ttu-id="e1870-134">Standard2</span><span class="sxs-lookup"><span data-stu-id="e1870-134">Standard2</span></span> | <span data-ttu-id="e1870-135">Standard3</span><span class="sxs-lookup"><span data-stu-id="e1870-135">Standard3</span></span> | <span data-ttu-id="e1870-136">Standard3 HD</span><span class="sxs-lookup"><span data-stu-id="e1870-136">Standard3 HD</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="e1870-137">Максимальное число реплик на службу</span><span class="sxs-lookup"><span data-stu-id="e1870-137">Maximum Replicas per Service</span></span> |<span data-ttu-id="e1870-138">3</span><span class="sxs-lookup"><span data-stu-id="e1870-138">3</span></span> |<span data-ttu-id="e1870-139">12</span><span class="sxs-lookup"><span data-stu-id="e1870-139">12</span></span> |<span data-ttu-id="e1870-140">12</span><span class="sxs-lookup"><span data-stu-id="e1870-140">12</span></span> |<span data-ttu-id="e1870-141">12</span><span class="sxs-lookup"><span data-stu-id="e1870-141">12</span></span> |<span data-ttu-id="e1870-142">12</span><span class="sxs-lookup"><span data-stu-id="e1870-142">12</span></span> |
| <span data-ttu-id="e1870-143">Максимальное число секций на службу</span><span class="sxs-lookup"><span data-stu-id="e1870-143">Maximum Partitions per Service</span></span> |<span data-ttu-id="e1870-144">1</span><span class="sxs-lookup"><span data-stu-id="e1870-144">1</span></span> |<span data-ttu-id="e1870-145">12</span><span class="sxs-lookup"><span data-stu-id="e1870-145">12</span></span> |<span data-ttu-id="e1870-146">12</span><span class="sxs-lookup"><span data-stu-id="e1870-146">12</span></span> |<span data-ttu-id="e1870-147">12</span><span class="sxs-lookup"><span data-stu-id="e1870-147">12</span></span> |<span data-ttu-id="e1870-148">1</span><span class="sxs-lookup"><span data-stu-id="e1870-148">1</span></span> |
| <span data-ttu-id="e1870-149">Максимальное число единиц поиска ((число реплик) * (число секций)) на службу</span><span class="sxs-lookup"><span data-stu-id="e1870-149">Maximum Search Units (Replicas*Partitions) per Service</span></span> |<span data-ttu-id="e1870-150">3</span><span class="sxs-lookup"><span data-stu-id="e1870-150">3</span></span> |<span data-ttu-id="e1870-151">36</span><span class="sxs-lookup"><span data-stu-id="e1870-151">36</span></span> |<span data-ttu-id="e1870-152">36</span><span class="sxs-lookup"><span data-stu-id="e1870-152">36</span></span> |<span data-ttu-id="e1870-153">36</span><span class="sxs-lookup"><span data-stu-id="e1870-153">36</span></span> |<span data-ttu-id="e1870-154">36 (максимум 3 секции)</span><span class="sxs-lookup"><span data-stu-id="e1870-154">36 (max 3 partitions)</span></span> |
| <span data-ttu-id="e1870-155">Максимальное число документов на службу</span><span class="sxs-lookup"><span data-stu-id="e1870-155">Maximum Documents per Service</span></span> |<span data-ttu-id="e1870-156">1 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-156">1 million</span></span> |<span data-ttu-id="e1870-157">180 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-157">180 million</span></span> |<span data-ttu-id="e1870-158">720 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-158">720 million</span></span> |<span data-ttu-id="e1870-159">1,4 млрд</span><span class="sxs-lookup"><span data-stu-id="e1870-159">1.4 billion</span></span> |<span data-ttu-id="e1870-160">600 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-160">600 million</span></span> |
| <span data-ttu-id="e1870-161">Максимальный объем хранилища на службу</span><span class="sxs-lookup"><span data-stu-id="e1870-161">Maximum Storage per Service</span></span> |<span data-ttu-id="e1870-162">2 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-162">2 GB</span></span> |<span data-ttu-id="e1870-163">300 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-163">300 GB</span></span> |<span data-ttu-id="e1870-164">1,2 ТБ</span><span class="sxs-lookup"><span data-stu-id="e1870-164">1.2 TB</span></span> |<span data-ttu-id="e1870-165">2,4 ТБ</span><span class="sxs-lookup"><span data-stu-id="e1870-165">2.4 TB</span></span> |<span data-ttu-id="e1870-166">600 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-166">600 GB</span></span> |
| <span data-ttu-id="e1870-167">Максимальное число документов на секцию</span><span class="sxs-lookup"><span data-stu-id="e1870-167">Maximum Documents per Partition</span></span> |<span data-ttu-id="e1870-168">1 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-168">1 million</span></span> |<span data-ttu-id="e1870-169">15 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-169">15 million</span></span> |<span data-ttu-id="e1870-170">60 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-170">60 million</span></span> |<span data-ttu-id="e1870-171">120 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-171">120 million</span></span> |<span data-ttu-id="e1870-172">200 млн</span><span class="sxs-lookup"><span data-stu-id="e1870-172">200 million</span></span> |
| <span data-ttu-id="e1870-173">Максимальный объем хранилища на секцию</span><span class="sxs-lookup"><span data-stu-id="e1870-173">Maximum Storage per Partition</span></span> |<span data-ttu-id="e1870-174">2 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-174">2 GB</span></span> |<span data-ttu-id="e1870-175">25 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-175">25 GB</span></span> |<span data-ttu-id="e1870-176">100 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-176">100 GB</span></span> |<span data-ttu-id="e1870-177">200 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-177">200 GB</span></span> |<span data-ttu-id="e1870-178">200 ГБ</span><span class="sxs-lookup"><span data-stu-id="e1870-178">200 GB</span></span> |
| <span data-ttu-id="e1870-179">Максимальное число индексов на службу</span><span class="sxs-lookup"><span data-stu-id="e1870-179">Maximum Indexes per Service</span></span> |<span data-ttu-id="e1870-180">5</span><span class="sxs-lookup"><span data-stu-id="e1870-180">5</span></span> |<span data-ttu-id="e1870-181">50</span><span class="sxs-lookup"><span data-stu-id="e1870-181">50</span></span> |<span data-ttu-id="e1870-182">200</span><span class="sxs-lookup"><span data-stu-id="e1870-182">200</span></span> |<span data-ttu-id="e1870-183">200</span><span class="sxs-lookup"><span data-stu-id="e1870-183">200</span></span> |<span data-ttu-id="e1870-184">3000 (максимум 1000 индексов на секцию)</span><span class="sxs-lookup"><span data-stu-id="e1870-184">3000 (max 1000 indexes/partition)</span></span> |

#### <a name="s3-high-density"></a><span data-ttu-id="e1870-185">S3, высокая плотность</span><span class="sxs-lookup"><span data-stu-id="e1870-185">S3 High Density'</span></span>
<span data-ttu-id="e1870-186">В ценовой категории S3 поиска Azure имеется параметр для режима высокой плотности (HD) hello, разработанных специально для многопользовательских сценариев.</span><span class="sxs-lookup"><span data-stu-id="e1870-186">In Azure Search’s S3 pricing tier, there is an option for hello High Density (HD) mode designed specifically for multitenant scenarios.</span></span> <span data-ttu-id="e1870-187">Во многих случаях бывает необходимо toosupport большое количество небольших клиентов в одной службы tooachieve hello преимущества простоты и экономичности.</span><span class="sxs-lookup"><span data-stu-id="e1870-187">In many cases, it is necessary toosupport a large number of smaller tenants under a single service tooachieve hello benefits of simplicity and cost efficiency.</span></span>

<span data-ttu-id="e1870-188">S3 HD позволяет hello toobe много небольших индексов упаковываются в группе управления hello службы единого поиска с торговыми hello tooscale возможность ожидания индексы, используя разделы для hello возможность toohost большего числа индексов в одной службы.</span><span class="sxs-lookup"><span data-stu-id="e1870-188">S3 HD allows for hello many small indexes toobe packed under hello management of a single search service by trading hello ability tooscale out indexes using partitions for hello ability toohost more indexes in a single service.</span></span>

<span data-ttu-id="e1870-189">В частности S3 службе может быть между 1 и 200 индексы, которые может размещаться совместно too1.4 миллиардов документов.</span><span class="sxs-lookup"><span data-stu-id="e1870-189">Concretely, an S3 service could have between 1 and 200 indexes that together could host up too1.4 billion documents.</span></span> <span data-ttu-id="e1870-190">S3 HD на hello позволит другой стороны, tooonly отдельных индексов наверх too1 миллионов документов, но она может обрабатывать копирование индексов too1000 на секцию (вверх too3000 каждой службы) и документа общее число 200 миллионов на раздел (копирование too600 миллионов на службы).</span><span class="sxs-lookup"><span data-stu-id="e1870-190">An S3 HD on hello other hand would allow individual indexes tooonly go up too1 million documents, but it can handle up too1000 indexes per partition (up too3000 per service) with a total document count of 200 million per partition (up too600 million per service).</span></span>

## <a name="considerations-for-multitenant-applications"></a><span data-ttu-id="e1870-191">Рекомендации для мультитенантных приложений</span><span class="sxs-lookup"><span data-stu-id="e1870-191">Considerations for multitenant applications</span></span>
<span data-ttu-id="e1870-192">Многопользовательские приложения должны эффективно распространять ресурсы среди клиентов hello, сохраняя определенный уровень секретности hello различных клиентов.</span><span class="sxs-lookup"><span data-stu-id="e1870-192">Multitenant applications must effectively distribute resources among hello tenants while preserving some level of privacy between hello various tenants.</span></span> <span data-ttu-id="e1870-193">Существуют некоторые особенности при разработке hello архитектуры для такого приложения:</span><span class="sxs-lookup"><span data-stu-id="e1870-193">There are a few considerations when designing hello architecture for such an application:</span></span>

* <span data-ttu-id="e1870-194">*Изоляции клиентов:* разработчики приложений должны tootake tooensure соответствующие меры, не клиенты имеют доступ запрещен и нежелательных toohello доступа к данным других клиентов.</span><span class="sxs-lookup"><span data-stu-id="e1870-194">*Tenant isolation:* Application developers need tootake appropriate measures tooensure that no tenants have unauthorized or unwanted access toohello data of other tenants.</span></span> <span data-ttu-id="e1870-195">Помимо hello точки зрения обеспечения конфиденциальности данных стратегии изоляции клиента требуется эффективное управление общими ресурсами и защиту от шумный соседей.</span><span class="sxs-lookup"><span data-stu-id="e1870-195">Beyond hello perspective of data privacy, tenant isolation strategies require effective management of shared resources and protection from noisy neighbors.</span></span>
* <span data-ttu-id="e1870-196">*Стоимость облачных ресурсов.* Как и любое другое приложение, программные решения должны обладать конкурентоспособной ценой в составе мультитенантного приложения.</span><span class="sxs-lookup"><span data-stu-id="e1870-196">*Cloud resource cost:* As with any other application, software solutions must remain cost competitive as a component of a multitenant application.</span></span>
* <span data-ttu-id="e1870-197">*Простота операций:* при разработке многопользовательской архитектуры, hello влияние на операции приложения hello и сложности является важным аспектом.</span><span class="sxs-lookup"><span data-stu-id="e1870-197">*Ease of Operations:* When developing a multitenant architecture, hello impact on hello application's operations and complexity is an important consideration.</span></span> <span data-ttu-id="e1870-198">Поиск Azure реализует [соглашение об уровне обслуживания 99,9 %](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="e1870-198">Azure Search has a [99.9% SLA](https://azure.microsoft.com/support/legal/sla/search/v1_0/).</span></span>
* <span data-ttu-id="e1870-199">*Глобальные занимаемое место:* многопользовательских приложений может потребоваться tooeffectively serve клиентов, которые распределяются по всему миру hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-199">*Global footprint:* Multitenant applications may need tooeffectively serve tenants which are distributed across hello globe.</span></span>
* <span data-ttu-id="e1870-200">*Масштабируемость:* разработчики приложений должны tooconsider, как они согласовать между обслуживание достаточно низкий уровень сложности и проектирование tooscale приложения hello с количеством клиентов и hello размер данных клиентов и Рабочая нагрузка.</span><span class="sxs-lookup"><span data-stu-id="e1870-200">*Scalability:* Application developers need tooconsider how they reconcile between maintaining a sufficiently low level of application complexity and designing hello application tooscale with number of tenants and hello size of tenants' data and workload.</span></span>

<span data-ttu-id="e1870-201">Поиск Azure предлагает несколько границ, которые можно использовать tooisolate клиентов данных и рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="e1870-201">Azure Search offers a few boundaries that can be used tooisolate tenants’ data and workload.</span></span>

## <a name="modeling-multitenancy-with-azure-search"></a><span data-ttu-id="e1870-202">Моделирование мультитенантности с использованием Поиска Azure</span><span class="sxs-lookup"><span data-stu-id="e1870-202">Modeling multitenancy with Azure Search</span></span>
<span data-ttu-id="e1870-203">В случае hello многопользовательском сценарии разработчик приложения hello использует один или несколько служб поиска и разделить их клиентов между службами и индексы.</span><span class="sxs-lookup"><span data-stu-id="e1870-203">In hello case of a multitenant scenario, hello application developer consumes one or more search services and divide their tenants among services, indexes, or both.</span></span> <span data-ttu-id="e1870-204">При моделировании мультитенантного сценария для Поиска Azure применяется несколько распространенных шаблонов.</span><span class="sxs-lookup"><span data-stu-id="e1870-204">Azure Search has a few common patterns when modeling a multitenant scenario:</span></span>

1. <span data-ttu-id="e1870-205">*Индекс на каждого клиента*. Каждый клиент имеет собственный индекс в службе поиска, используемой совместно с другими клиентами.</span><span class="sxs-lookup"><span data-stu-id="e1870-205">*Index per tenant:* Each tenant has its own index within a search service that is shared with other tenants.</span></span>
2. <span data-ttu-id="e1870-206">*Служба на каждого клиента*. Каждый клиент имеет собственную выделенную службу Поиска Azure, что обеспечивает высочайший уровень разделения данных и рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="e1870-206">*Service per tenant:* Each tenant has its own dedicated Azure Search service, offering highest level of data and workload separation.</span></span>
3. <span data-ttu-id="e1870-207">*Сочетание обоих вариантов*. Более активным клиентам большого размера назначаются выделенные службы, а небольшим клиентам назначаются отдельные индексы в общих службах.</span><span class="sxs-lookup"><span data-stu-id="e1870-207">*Mix of both:* Larger, more-active tenants are assigned dedicated services while smaller tenants are assigned individual indexes within shared services.</span></span>

## <a name="1-index-per-tenant"></a><span data-ttu-id="e1870-208">1. Индекс на каждого клиента</span><span class="sxs-lookup"><span data-stu-id="e1870-208">1. Index per tenant</span></span>
![Portrayal модели hello индекс для клиента](./media/search-modeling-multitenant-saas-applications/azure-search-index-per-tenant.png)

<span data-ttu-id="e1870-210">В модели с индексом на каждого клиента несколько клиентов занимают одну службу Поиска Azure, в которой у каждого клиента есть собственный индекс.</span><span class="sxs-lookup"><span data-stu-id="e1870-210">In an index-per-tenant model, multiple tenants occupy a single Azure Search service where each tenant has their own index.</span></span>

<span data-ttu-id="e1870-211">Это обеспечивает изоляцию данных клиентов, так как все запросы на поиск и операции с документами выполняются на уровне индекса в Поиске Azure.</span><span class="sxs-lookup"><span data-stu-id="e1870-211">Tenants achieve data isolation because all search requests and document operations are issued at an index level in Azure Search.</span></span> <span data-ttu-id="e1870-212">В уровне приложения hello имеется hello необходимость учета toodirect hello соответствующие индексы различных клиентов трафика toohello управление ресурсами на уровне службы hello распределяются по всем клиентам.</span><span class="sxs-lookup"><span data-stu-id="e1870-212">In hello application layer, there is hello need awareness toodirect hello various tenants’ traffic toohello proper indexes while also managing resources at hello service level across all tenants.</span></span>

<span data-ttu-id="e1870-213">Ключевой атрибут модели hello индекс для клиента — возможность hello емкости hello toooversubscribe разработчика приложения hello службы поиска среди клиентов приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-213">A key attribute of hello index-per-tenant model is hello ability for hello application developer toooversubscribe hello capacity of a search service among hello application’s tenants.</span></span> <span data-ttu-id="e1870-214">Если клиенты hello неравномерное распределение рабочей нагрузки, оптимальное сочетание hello клиенты могут распределяться по службы поиска индексирует tooaccommodate число очень активно, интенсивно клиентов для при обслуживании хвоста одновременно менее активных клиентов.</span><span class="sxs-lookup"><span data-stu-id="e1870-214">If hello tenants have an uneven distribution of workload, hello optimal combination of tenants can be distributed across a search service’s indexes tooaccommodate a number of highly active, resource-intensive tenants while simultaneously serving a long tail of less active tenants.</span></span> <span data-ttu-id="e1870-215">компромисс Hello — невозможность hello hello модели toohandle ситуациях, когда каждый клиент одновременно высокой активностью.</span><span class="sxs-lookup"><span data-stu-id="e1870-215">hello trade-off is hello inability of hello model toohandle situations where each tenant is concurrently highly active.</span></span>

<span data-ttu-id="e1870-216">Hello индекс для клиента модель предоставляет основу hello модель переменных затрат, где все службы поиска Azure приобретаемое авансовых и впоследствии заполнен с клиентами.</span><span class="sxs-lookup"><span data-stu-id="e1870-216">hello index-per-tenant model provides hello basis for a variable cost model, where an entire Azure Search service is bought up-front and then subsequently filled with tenants.</span></span> <span data-ttu-id="e1870-217">Это позволяет назначить для пробных версий и учетные записи свободных toobe неиспользуемого пространства.</span><span class="sxs-lookup"><span data-stu-id="e1870-217">This allows for unused capacity toobe designated for trials and free accounts.</span></span>

<span data-ttu-id="e1870-218">Для приложений с помощью глобальной памяти модель hello индекс для клиента не может быть наиболее эффективный hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-218">For applications with a global footprint, hello index-per-tenant model may not be hello most efficient.</span></span> <span data-ttu-id="e1870-219">Если клиенты приложения распределены по всему миру hello, отдельная служба может потребоваться для каждого региона, в котором могут дублировать затраты по каждой из них.</span><span class="sxs-lookup"><span data-stu-id="e1870-219">If an application's tenants are distributed across hello globe, a separate service may be necessary for each region which may duplicate costs across each of them.</span></span>

<span data-ttu-id="e1870-220">Поиск Azure обеспечивает масштаб hello hello отдельных индексов и общее количество индексов toogrow hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-220">Azure Search allows for hello scale of both hello individual indexes and hello total number of indexes toogrow.</span></span> <span data-ttu-id="e1870-221">Если соответствующий ценовой уровень выбора разделы и реплики можно добавить toohello всей операции поиска службы при конкретному индексу, в службе hello становится слишком большим, с точки зрения хранилища или трафика.</span><span class="sxs-lookup"><span data-stu-id="e1870-221">If an appropriate pricing tier is chosen, partitions and replicas can be added toohello entire search service when an individual index within hello service grows too large in terms of storage or traffic.</span></span>

<span data-ttu-id="e1870-222">Если общее число индексов hello становится слишком большим для одной службы, другая служба имеет tooaccommodate toobe подготовить hello новых клиентов.</span><span class="sxs-lookup"><span data-stu-id="e1870-222">If hello total number of indexes grows too large for a single service, another service has toobe provisioned tooaccommodate hello new tenants.</span></span> <span data-ttu-id="e1870-223">Если индексы имеют toobe перемещать между служб поиска по мере добавления новых служб, hello данным из индекса hello есть toobe, вручную скопированные из других один индекс toohello как поиск Azure не разрешено для индекса toobe перемещен.</span><span class="sxs-lookup"><span data-stu-id="e1870-223">If indexes have toobe moved between search services as new services are added, hello data from hello index has toobe manually copied from one index toohello other as Azure Search does not allow for an index toobe moved.</span></span>

## <a name="2-service-per-tenant"></a><span data-ttu-id="e1870-224">2. Служба на каждого клиента</span><span class="sxs-lookup"><span data-stu-id="e1870-224">2. Service per tenant</span></span>
![Portrayal hello модели службы для клиента](./media/search-modeling-multitenant-saas-applications/azure-search-service-per-tenant.png)

<span data-ttu-id="e1870-226">В архитектуре со службой на каждого клиента каждый клиент имеет свою собственную службу поиска.</span><span class="sxs-lookup"><span data-stu-id="e1870-226">In a service-per-tenant architecture, each tenant has its own search service.</span></span>

<span data-ttu-id="e1870-227">В этой модели приложения hello достигает hello максимальный уровень изоляции для его клиентов.</span><span class="sxs-lookup"><span data-stu-id="e1870-227">In this model, hello application achieves hello maximum level of isolation for its tenants.</span></span> <span data-ttu-id="e1870-228">Каждая служба имеет выделенное хранилище и пропускную способность для обработки запросов на поиск, а также отдельные ключи API.</span><span class="sxs-lookup"><span data-stu-id="e1870-228">Each service has dedicated storage and throughput for handling search request as well as separate API keys.</span></span>

<span data-ttu-id="e1870-229">Для приложений, где каждый клиент имеет большого объема или hello рабочей нагрузки содержит мало особенностей из клиента tootenant hello модели службы для клиента является эффективным выбором как ресурсы, не являются общими для различных клиентов рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="e1870-229">For applications where each tenant has a large footprint or hello workload has little variability from tenant tootenant, hello service-per-tenant model is an effective choice as resources are not shared across various tenants’ workloads.</span></span>

<span data-ttu-id="e1870-230">Службы, каждой модели клиента также предлагает преимущество hello прогнозируемый, фиксированную стоимость модели.</span><span class="sxs-lookup"><span data-stu-id="e1870-230">A service per tenant model also offers hello benefit of a predictable, fixed cost model.</span></span> <span data-ttu-id="e1870-231">Нет без предварительных инвестиций в службе поиска всего до toofill клиента, однако hello стоимость каждого клиента больше, чем модель индекс для клиента.</span><span class="sxs-lookup"><span data-stu-id="e1870-231">There is no up-front investment in an entire search service until there is a tenant toofill it, however hello cost-per-tenant is higher than an index-per-tenant model.</span></span>

<span data-ttu-id="e1870-232">Hello модели службы для клиента является эффективным выбором для приложений с помощью глобальной памяти.</span><span class="sxs-lookup"><span data-stu-id="e1870-232">hello service-per-tenant model is an efficient choice for applications with a global footprint.</span></span> <span data-ttu-id="e1870-233">С географически распределенными клиентами, это легко toohave службы каждого клиента в соответствующую область hello.</span><span class="sxs-lookup"><span data-stu-id="e1870-233">With geographically-distributed tenants, it is easy toohave each tenant's service in hello appropriate region.</span></span>

<span data-ttu-id="e1870-234">Hello трудности в масштабировании этот шаблон возникают, когда отдельными пользователями превышают их службы.</span><span class="sxs-lookup"><span data-stu-id="e1870-234">hello challenges in scaling this pattern arise when individual tenants outgrow their service.</span></span> <span data-ttu-id="e1870-235">Поиск Azure в настоящее время не поддерживает обновление hello в ценовой категории службы поиска, поэтому все данные новой службы tooa toobe вручную скопировать.</span><span class="sxs-lookup"><span data-stu-id="e1870-235">Azure Search does not currently support upgrading hello pricing tier of a search service, so all data would have toobe manually copied tooa new service.</span></span>

## <a name="3-mixing-both-models"></a><span data-ttu-id="e1870-236">3. Совмещение обеих моделей</span><span class="sxs-lookup"><span data-stu-id="e1870-236">3. Mixing both models</span></span>
<span data-ttu-id="e1870-237">Еще один шаблон для моделирования мультитенантности подразумевает совмещение модели с индексом на каждый клиента и модели со службой на каждый клиент.</span><span class="sxs-lookup"><span data-stu-id="e1870-237">Another pattern for modeling multitenancy is mixing both index-per-tenant and service-per-tenant strategies.</span></span>

<span data-ttu-id="e1870-238">Смешиванием hello двух шаблонов, клиенты большого приложения может занимать выделенные службы во время hello долго заключительным фрагментом менее активно, более мелкие клиенты могут занимать индексов в общих служб.</span><span class="sxs-lookup"><span data-stu-id="e1870-238">By mixing hello two patterns, an application's largest tenants can occupy dedicated services while hello long tail of less active, smaller tenants can occupy indexes in a shared service.</span></span> <span data-ttu-id="e1870-239">Эта модель обеспечивает hello наибольшее клиентов постоянно высокой производительности от службы hello продолжая tooprotect hello меньшего размера клиентов с любой шумный соседей.</span><span class="sxs-lookup"><span data-stu-id="e1870-239">This model ensures that hello largest tenants have consistently high performance from hello service while helping tooprotect hello smaller tenants from any noisy neighbors.</span></span>

<span data-ttu-id="e1870-240">Тем не менее, для реализации этой стратегии понадобится спрогнозировать, каким клиентам потребуется выделенная служба, а каким — индекс в общей службе.</span><span class="sxs-lookup"><span data-stu-id="e1870-240">However, implementing this strategy relies foresight in predicting which tenants will require a dedicated service versus an index in a shared service.</span></span> <span data-ttu-id="e1870-241">Возрастает сложность приложения hello необходимость toomanage оба этих мультитенантности моделей.</span><span class="sxs-lookup"><span data-stu-id="e1870-241">Application complexity increases with hello need toomanage both of these multitenancy models.</span></span>

## <a name="achieving-even-finer-granularity"></a><span data-ttu-id="e1870-242">Достижение большей степени детализации</span><span class="sxs-lookup"><span data-stu-id="e1870-242">Achieving even finer granularity</span></span>
<span data-ttu-id="e1870-243">Hello выше многопользовательских сценарии разработки шаблонов toomodel в поиске Azure предполагается универсальный области, где каждый клиент является весь экземпляр приложения.</span><span class="sxs-lookup"><span data-stu-id="e1870-243">hello above design patterns toomodel multitenant scenarios in Azure Search assume a uniform scope where each tenant is a whole instance of an application.</span></span> <span data-ttu-id="e1870-244">Однако иногда приложения могут обрабатывать несколько областей меньшего размера.</span><span class="sxs-lookup"><span data-stu-id="e1870-244">However, applications can sometimes handle many smaller scopes.</span></span>

<span data-ttu-id="e1870-245">Если модели службы для клиента и индекс для клиента не слишком мало областей, это возможных toomodel tooachieve индекс еще более точно степень гранулярности.</span><span class="sxs-lookup"><span data-stu-id="e1870-245">If service-per-tenant and index-per-tenant models are not sufficiently small scopes, it is possible toomodel an index tooachieve an even finer degree of granularity.</span></span>

<span data-ttu-id="e1870-246">toohave один индекс ведут себя по-разному для различных клиентских конечных точек, поле может быть добавлено tooan индекс, который задает определенное значение для каждого клиента можно.</span><span class="sxs-lookup"><span data-stu-id="e1870-246">toohave a single index behave differently for different client endpoints, a field can be added tooan index which designates a certain value for each possible client.</span></span> <span data-ttu-id="e1870-247">Каждый раз, клиент вызывает tooquery поиска Azure или изменить индекс, кода hello из клиентского приложения hello указывает hello соответствующее значение для этого поля с помощью поиска Azure [фильтра](https://msdn.microsoft.com/library/azure/dn798921.aspx) возможность во время выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="e1870-247">Each time a client calls Azure Search tooquery or modify an index, hello code from hello client application specifies hello appropriate value for that field using Azure Search's [filter](https://msdn.microsoft.com/library/azure/dn798921.aspx) capability at query time.</span></span>

<span data-ttu-id="e1870-248">Этот метод может быть функции используется tooachieve отдельных учетных записей пользователей, отдельные уровни и даже полностью отдельных приложений.</span><span class="sxs-lookup"><span data-stu-id="e1870-248">This method can be used tooachieve functionality of separate user accounts, separate permission levels, and even completely separate applications.</span></span>

> [!NOTE]
> <span data-ttu-id="e1870-249">Используя подход hello описанном выше tooconfigure tooserve один индекс hello релевантность клиентов влияет на результаты поиска.</span><span class="sxs-lookup"><span data-stu-id="e1870-249">Using hello approach described above tooconfigure a single index tooserve multiple tenants affects hello relevance of search results.</span></span> <span data-ttu-id="e1870-250">Релевантности поиска вычисляются на уровне индексов область, не области уровня клиента, поэтому данные всех клиентов будет включено в степени соответствия hello базовые статистические данные, такие как частота термина.</span><span class="sxs-lookup"><span data-stu-id="e1870-250">Search relevance scores are computed at an index-level scope, not a tenant-level scope, so all tenants' data is incorporated in hello relevance scores' underlying statistics such as term frequency.</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="e1870-251">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="e1870-251">Next steps</span></span>
<span data-ttu-id="e1870-252">Поиск Azure — привлекательным выбором для многих приложений [более подробные сведения о службе hello мощные возможности](http://aka.ms/whatisazsearch).</span><span class="sxs-lookup"><span data-stu-id="e1870-252">Azure Search is a compelling choice for many applications, [read more about hello service's robust capabilities](http://aka.ms/whatisazsearch).</span></span> <span data-ttu-id="e1870-253">При оценке hello, различными создавать шаблоны для многопользовательских приложений, рассмотрите возможность hello [различные ценовые категории](https://azure.microsoft.com/pricing/details/search/) и соответствующих hello [службы ограничения](search-limits-quotas-capacity.md) toobest адаптировать toofit поиска Azure рабочие нагрузки приложений и архитектуры для всех размеров.</span><span class="sxs-lookup"><span data-stu-id="e1870-253">When evaluating hello various design patterns for multitenant applications, consider hello [various pricing tiers](https://azure.microsoft.com/pricing/details/search/) and hello respective [service limits](search-limits-quotas-capacity.md) toobest tailor Azure Search toofit application workloads and architectures of all sizes.</span></span>

<span data-ttu-id="e1870-254">Вопросы поиска Azure и сценариях для нескольких клиентов могут быть отправлены tooazuresearch_contact@microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="e1870-254">Any questions about Azure Search and multitenant scenarios can be directed tooazuresearch_contact@microsoft.com.</span></span>

