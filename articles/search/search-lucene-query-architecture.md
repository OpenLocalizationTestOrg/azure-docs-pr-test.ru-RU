---
title: "Архитектура aaaFull text search engine (Lucene) в поиске Azure | Документы Microsoft"
description: "Объяснение Lucene обработки и документа извлечения основные принципы запросов для полнотекстового поиска, как связанные tooAzure поиска."
services: search
manager: jhubbard
author: yahnoosh
documentationcenter: 
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 04/06/2017
ms.author: jlembicz
ms.openlocfilehash: c6d1bea8d40154fd9237b9e44584cdfcd193cbd9
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-full-text-search-works-in-azure-search"></a>Как работает полнотекстовый поиск в службе поиска Azure

Эта статья предназначена для разработчиков, которым нужно тщательно разобраться с работой полнотекстового поиска Lucene в поиске Azure. Для текстовых запросов служба поиска Azure в большинстве сценариев быстро предоставляет ожидаемые результаты, однако иногда вы можете получить и неточные результаты. В таких случаях наличие фона в hello четыре этапа выполнения запроса Lucene (запросов анализа Лексический анализ, документов, соответствующих оценки) может помочь определить конкретные изменения tooquery параметры или индекс конфигурацию, которая будет доставлять hello желаемый результат. 

> [!Note] 
> В службе поиска Azure для полнотекстового поиска используется Lucene, но процесс не ограничивается интеграцией Lucene. Выборочно представлять и расширить Lucene функциональность tooenable hello сценарии важно tooAzure поиска. 

## <a name="architecture-overview-and-diagram"></a>Схема архитектуры и ее обзор

Обработка полнотекстового поиска запроса начинается с синтаксический анализ условий поиска tooextract текст запроса hello. Hello поисковая система использует tooretrieve индексировать документы с совпадающими терминами. Отдельные запросы условия иногда разбивкой и воссозданы в новой формы toocast широкой net за то, что может рассматриваться как возможные совпадения. Затем результирующий набор сортируется по релевантности оценка назначенного tooeach отдельных сопоставления документа. Те вверху hello hello рангом список возвращаются вызывающему приложению toohello.

Итак, запрос выполняется в четыре этапа: 

1. синтаксический анализ запроса; 
2. лексический анализ; 
3. извлечение документа; 
4. оценка. 

Hello приведенной ниже схеме показано tooprocess компоненты, используемые hello поисковый запрос. 

 ![Схема архитектуры запросов Lucene в службе поиска Azure][1]


| Ключевые компоненты | Описание функций | 
|----------------|------------------------|
|**Средства синтаксического анализа запроса** | Отдельные операторы выражений запросов и создать hello запрос структуры запроса дерева, отправляемых toobe toohello поисковой системы. |
|**Анализаторы** | Выполняют лексический анализ терминов запроса, что может включать их преобразование, удаление или расширение. |
|**Индекс** | Структуру данных, эффективно использовать toostore и организации с возможностью поиска термины, извлеченные из индексированных документов. |
|**Поисковая система** | Извлекает и оценки соответствия документов на основании содержимого hello hello инвертированный индекс. |

## <a name="anatomy-of-a-search-request"></a>Схема поискового запроса

Поисковый запрос представляет собой полную спецификацию содержимого, возвращаемого в результирующем наборе. В самой простой форме это пустой запрос с отсутствием каких-либо критериев. Более реалистичный пример включает параметры, некоторые запрос условия, возможно с областью toocertain поля, возможно критерий фильтра и упорядочения правила.  

Hello ниже приведен запрос поиска может отправить tooAzure поиска с помощью hello [API-интерфейса REST](https://docs.microsoft.com/rest/api/searchservice/search-documents).  

~~~~
POST /indexes/hotels/docs/search?api-version=2016-09-01 
{  
    "search": "Spacious, air-condition* +\"Ocean view\"",  
    "searchFields": "description, title",  
    "searchMode": "any",
    "filter": "price ge 60 and price lt 300",  
    "orderby": "geo.distance(location, geography'POINT(-159.476235 22.227659)')", 
    "queryType": "full" 
 } 
~~~~

Для этого запроса hello поисковая система hello следующие:

1. Отфильтровывает документы, где цена hello менее 60 и меньше 300 долларов.
2. Выполняет запрос hello. В этом примере запрос поиска hello состоит фраз и условиями: `"Spacious, air-condition* +\"Ocean view\""` (пользователи обычно не ввести знаки препинания, но его включением в примере hello позволяет нам tooexplain как анализаторы обрабатывать). Для этого запроса hello поисковая система проверяет описание hello и поля заголовка, указываемой `searchFields` документы, содержащие «Аквамарин view» и дополнительно hello термин «снижает» или термины, которые начинаются с префикса hello «air-condition». Hello `searchMode` параметр является используется toomatch на любой термин (по умолчанию) или все из них, в случае если условие не указано явно (`+`).
3. Заказы hello результирующий набор гостиницы по сходству tooa заданное место geography, а затем возвращается вызывающему приложению toohello. 

Hello основная часть этой статьи посвящена обработку hello *поискового запроса*: `"Spacious, air-condition* +\"Ocean view\""`. Фильтрация и упорядочение выходят за рамки этого руководства. Дополнительные сведения см. в разделе hello [справочная документация по API поиска](https://docs.microsoft.com/rest/api/searchservice/search-documents).

<a name="stage1"></a>
## <a name="stage-1-query-parsing"></a>Этап 1. Синтаксический анализ запроса 

Как уже отмечалось, строка hello запроса является первой строки запроса hello hello: 

~~~~
 "search": "Spacious, air-condition* +\"Ocean view\"", 
~~~~

Анализатор отделяет операторы запросов Hello (такие как `*` и `+` в примере hello) из поиска терминов и деконструирование hello поискового запроса в *вложенные запросы* относится к поддерживаемым типам: 

+ *запрос термина* — для автономных терминов (например, spacious);
+ *запрос фразы* — для терминов, заключенных в кавычки (например, ocean view);
+ *запрос префикса* — для терминов, за которыми следует оператор префикса `*` (например, air-condition).

Полный список поддерживаемых типов запросов см. в статье о [синтаксисе запросов Lucene в службе поиска Azure](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search).

Операторы, связанный с вложенным запросом определяют hello запрос «должно быть» или «должен быть» удовлетворен в порядке документа toobe совпадении. Например `+"Ocean view"` «необходимо» из-за toohello `+` оператор. 

средство синтаксического анализа запросов Hello перестраивает hello вложенные запросы в *дерево запроса* (внутренняя структура представляющий hello запрос), он передает на toohello поисковой системы. Hello первой стадии синтаксического анализа запроса дерево запроса hello выглядит следующим образом.  

 ![Режим поиска логических запросов any][2]

### <a name="supported-parsers-simple-and-full-lucene"></a>Поддерживаемые средства синтаксического анализа запроса для упрощенного и полного языка запросов Lucene 

 Служба поиска Azure поддерживает два разных языка запросов — `simple` (по умолчанию) и `full`. Путем установки hello `queryType` параметр в запрос поиска, вы указываете hello синтаксического анализа запросов языка запроса выбрать, чтобы оно было известно как toointerpret Здравствуйте, операторах и синтаксисе. Hello [язык простой запрос](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) производится интуитивно понятно и надежной, ввод данных пользователем часто подходящий toointerpret как-без обработки на стороне клиента. Он поддерживает те же операторы запросов,что и поисковые системы в Интернете. Hello [полного Lucene язык запросов](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search), который можно получить, установив `queryType=full`, расширяет язык простого запроса по умолчанию hello, добавляя поддержку дополнительные операторы и типы запросов как подстановочный знак, Нечеткий, регулярных выражений и запросов в области полей. Например, регулярное выражение, отправленное в простой синтаксис запросов, будет интерпретироваться как строка запроса, а не как выражение. Пример запроса Hello в этой статье использует язык запросов полного Lucene hello.

### <a name="impact-of-searchmode-on-hello-parser"></a>Влияние поиска searchMode анализатор hello 

Другим параметром запрос поиска, который влияет на синтаксический анализ является hello `searchMode` параметра. Он управляет hello оператор по умолчанию для запросов типа Boolean: все (по умолчанию) или все.  

При `searchMode=any`, которой по умолчанию hello, разделитель пространства hello снижает и air-condition или (`||`), что эквивалентно hello образец текста запроса: 

~~~~
Spacious,||air-condition*+"Ocean view" 
~~~~

Явные операторы, такие как `+` в `+"Ocean view"`, однозначны создания логического запроса (hello термин *должен* совпадают). Очевидно, как условия hello toointerpret осталось: снижает и air-condition. Следует hello поисковая система поиска соответствий на Океан *и* снижает *и* air-condition? Или следует найти Океан, а также *любого* из оставшихся условия hello? 

По умолчанию (`searchMode=any`), hello поисковой системы предполагает более широкой Интерпретация hello. Будет выполняться поиск соответствия по какому-либо из терминов, что *представляет* семантику оператора or. Hello начального запроса дерева ранее проиллюстрировать на примере hello две «должно» операции, по умолчанию отображает hello.  

Предположим, что мы задали параметр `searchMode=all`. В этом случае пространство hello интерпретируется как операция «и». Каждый из оставшихся условия hello оба следует предоставить в tooqualify hello документа как совпадение. результирующий запрос Образец Hello интерпретируется следующим образом: 

~~~~
+Spacious,+air-condition*+"Ocean view"  
~~~~

Измененный запрос дерева для этого запроса будет следующим образом, когда соответствующий документ представляет пересечение hello все три вложенных запросов: 

 ![Режим поиска логических запросов all][3]

> [!Note] 
> Для выполнения репрезентативных запросов лучше выбрать `searchMode=any`, а не `searchMode=all`. Пользователи, имеющие вероятность tooinclude операторы (общее при поиске документа хранит) может оказаться результатов более понятными, если `searchMode=all` информирует конструкции логический запрос. Дополнительные сведения о hello взаимозависимость между `searchMode` и операторы, в разделе [синтаксис простого запроса](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search).

<a name="stage2"></a>
## <a name="stage-2-lexical-analysis"></a>Этап 2. Лексический анализ 

Процесс лексические анализаторы *терминов запросов* и *фразу запросы* после структурированные дерево запроса hello. Анализатор принимает hello текстовое входов заданному tooit анализатором hello, процессы hello текст и затем отправляет обратно токеном условия, которые toobe частью hello дерево запроса. 

Наиболее распространенная форма Hello лексического анализа является *лингвистический анализ* преобразующий запроса термов на основании определенных tooa правилами заданного языка: 

* Уменьшение форма запроса термин toohello корневого слова 
* удаляет слова, которые не представляют смысла (стоп-слова, например артикли the и and в английском языке); 
* разбивает составные слова на части; 
* преобразовывает слова с верхним регистром в нижний. 

Все эти операции, как правило, различия tooerase ввода текста hello, предоставляемые hello пользователя и hello терминов, хранящийся в индексе hello. Такие операции выходят за пределы обработки текста и требуется обширный опыт сам язык hello. tooadd этого слоя лингвистические учета, поиска Azure поддерживает длинный список [языковых анализаторов](https://docs.microsoft.com/rest/api/searchservice/language-support) Lucene и Microsoft.

> [!Note]
> Анализ требований может варьироваться от минимальной tooelaborate в зависимости от вашего сценария. Можно управлять сложности лексического анализа, hello, выбрав один из анализаторов предопределенные hello или создав собственный [пользовательского анализатора](https://docs.microsoft.com/rest/api/searchservice/Custom-analyzers-in-Azure-Search). Анализаторы области toosearchable поля и указаны как часть определения поля. Это позволяет toovary лексического анализа на основе каждого поля. Не указан, hello *Стандартная* анализатор Lucene используется.

В нашем примере предыдущего tooanalysis hello начального запроса дерева имеет hello термин «Spacious» с заглавную букву «S» и интерпретирует запятую, которая hello синтаксического анализа запросов как часть поисковому запросу hello (запятая не считается оператор языка запроса).  

При анализатора по умолчанию hello обрабатывает hello термина, будет «представление Аквамарин» и «снижает» в нижнем регистре и удалите символ запятой hello. дерево Hello измененный запрос будет выглядеть следующим образом: 

 ![Логический запрос с терминами после анализа][4]

### <a name="testing-analyzer-behaviors"></a>Проверка поведения анализатора 

поведение Hello анализатор можно проверить при помощи hello [анализ API](https://docs.microsoft.com/rest/api/searchservice/test-analyzer). Укажите нужный tooanalyze toosee какие термины, учитывая анализатор будет формировать текст hello. Например как стандартный анализатор hello будет обрабатывать toosee Здравствуйте, текст «air-condition», может выдавать hello, следующий запрос:

~~~~
{ 
    "text": "air-condition",
    "analyzer": "standard"
}
~~~~

стандартный анализатор Hello разбивает входной текст hello на hello, следующие два маркера, Создание примечаний к их атрибутов, например Пуск и конечного смещения (используется для выделения попаданий), а также их расположения (используется для сопоставления фразы):

~~~~
{  
  "tokens": [
    {
      "token": "air",
      "startOffset": 0,
      "endOffset": 3,
      "position": 0
    },
    {
      "token": "condition",
      "startOffset": 4,
      "endOffset": 13,
      "position": 1
    }
  ]
}
~~~~

### <a name="exceptions-toolexical-analysis"></a>Анализ toolexical исключения 

Лексический анализ применяется только tooquery типы, требующие полного условия — запрос термин или фраза запроса. Он не распространяется tooquery типы с неполными условия — префикс запрос, шаблон запроса, регулярное выражение запроса или tooa Нечеткий уточняющий запрос. Те запроса типов, включая запрос префикс hello термин *air-condition\**  в нашем примере добавляются непосредственно дерево запроса toohello, минуя этап анализа hello. Hello только преобразование, выполненное на условиях запроса этих типов строчной версии.

<a name="stage3"></a>
## <a name="stage-3-document-retrieval"></a>Этап 3. Извлечение документа 

Получение документа относится toofinding документы с совпадающими терминами в индексе hello. Лучше всего этот этап рассмотреть на примере. Начнем с индексом гостиницы, имеющих hello, следуя простой схемы: 

~~~~
{   
    "name": "hotels",     
    "fields": [     
        { "name": "id", "type": "Edm.String", "key": true, "searchable": false },     
        { "name": "title", "type": "Edm.String", "searchable": true },     
        { "name": "description", "type": "Edm.String", "searchable": true }
    ] 
} 
~~~~

Далее предполагается, что этот индекс содержит следующие четыре документы hello: 

~~~~
{ 
    "value": [
        {         
            "id": "1",         
            "title": "Hotel Atman",         
            "description": "Spacious rooms, ocean view, walking distance toohello beach."   
        },       
        {         
            "id": "2",         
            "title": "Beach Resort",        
            "description": "Located on hello north shore of hello island of Kauaʻi. Ocean view."     
        },       
        {         
            "id": "3",         
            "title": "Playa Hotel",         
            "description": "Comfortable, air-conditioned rooms with ocean view."
        },       
        {         
            "id": "4",         
            "title": "Ocean Retreat",         
            "description": "Quiet and secluded"
        }    
    ]
}
~~~~

**Как индексируются термины**

Получение toounderstand помогает tooknow с основными сведениями об индексировании. Hello единицей хранилища является инвертированного индекса, по одному для каждого поля для поиска. Обращенный индекс содержит отсортированный список со всеми терминами из всех документов. Каждый термин сопоставляет toohello список документов, в которых он применяется, как видно в приведенном ниже примере hello.

условия tooproduce hello в инвертированном индексе, hello поисковая система выполняет лексического анализа над содержимым hello документов, аналогичные toowhat происходит во время обработки запроса. Текстовые входные данные передаются tooan анализатора в нижнем регистре, удаляются знаки пунктуации и т. д., в зависимости от конфигурации анализатора hello. Общие, но не обязательны, toouse hello же анализаторы для поиска и индексирования операции, чтобы больше похожи на условия в индексе hello выражений запросов.

> [!Note]
> Служба поиска Azure позволяет указать различные анализаторы для индексирования и поиска с помощью дополнительных параметров полей — `indexAnalyzer` и `searchAnalyzer`. Если не указано, hello анализатора hello `analyzer` свойство используется для индексирования и поиска.  

**Обращенный индекс для примеров документов**

Возвращение примере tooour для hello **заголовок** поле hello инвертированный индекс выглядит следующим образом:

| Термин | Список документов |
|------|---------------|
| atman | 1 |
| beach | 2 |
| hotel | 1, 3 |
| ocean | 4.  |
| playa | 3 |
| resort | 3 |
| retreat | 4. |

В поле заголовка hello, только *гостиницы* отображается в двух документов: 1, 3.

Для hello **описание** поля, индекс hello выглядит следующим образом:

| Термин | Список документов |
|------|---------------|
| air | 3
| и | 4.
| beach | 1
| conditioned | 3
| comfortable | 3
| distance | 1
| island | 2
| kauaʻi | 2
| located | 2
| north | 2
| ocean | 1, 2, 3
| of | 2
| on |2
| quiet | 4.
| rooms  | 1, 3
| secluded | 4.
| shore | 2
| spacious | 1
| Привет | 1, 2
| слишком| 1
| view | 1, 2, 3
| walking | 1
| на | 3


**Соответствие терминов запроса индексированным терминам**

Имея hello инвертированный индексов выше, давайте вернуться toohello образец запроса и увидеть, как соответствующих документов находятся в этом примере. Помните, что это дерево hello окончательный запрос выглядит следующим образом: 

 ![Логический запрос с терминами после анализа][4]

Во время выполнения запроса отдельные запросы выполняются для поля поиска hello независимо друг от друга. 

+ Hello TermQuery «снижает» соответствует документам 1 (гостиницы Atman). 

+ Hello PrefixQuery, «air-condition *», не соответствует все документы. 

  Именно такие случаи и запутывают разработчиков. Несмотря на то, что термин hello помещении с существует в документе hello, она разбивается на два слова анализатором по умолчанию hello. Вспомним, что запросы префикса, содержащие частичные термины, анализу не подлежат. Поэтому условия с префиксом «air-condition» ищутся в hello инвертированный индекс и не найден.

+ Hello PhraseQuery «Аквамарин view», находит hello термины «Аквамарин» и «представление» и проверяет близости hello терминов в исходном документе hello. Документы, 1, 2 и 3 соответствует этот запрос в поле описания hello. Обратите внимание документ 4 имеет Аквамарин термин hello в заголовок hello, но не рассматриваются как совпадающие, как мы ищем hello фразу «Аквамарин view», а не отдельные слова. 

> [!Note]
> Запрос поиска выполняется независимо друг от друга для всех полей для поиска в индекс поиска Azure, если не ограничить набор с hello поля hello hello `searchFields` параметра, как показано в hello пример поискового запроса. Документы, соответствующие условиям hello выбранных полей возвращаются. 

На всей для рассматриваемого запроса hello hello hello документов, которые соответствуют не 1, 2, 3. 

## <a name="stage-4-scoring"></a>Этап 4. Оценка  

Каждому документу в результирующем наборе поиска присваивается оценка релевантности. функция Hello оценку значимости hello — toorank более поздней версии, эти документы, которые лучше всего ответить пользователь вопрос по hello поискового запроса. Оценка Hello вычисляется на основе статистических свойств, соответствующих условий. Является основой для оценки формула hello hello [(частота термина обратная частота документа) TF-IDF](https://en.wikipedia.org/wiki/Tf%E2%80%93idf). В запросах, содержащий редко и общие термины TF-IDF способствует результаты, содержащие термин редких hello. Например, в гипотетический индекс со всех статей Википедии, из документы запроса сопоставленная hello *президент hello*, документов, соответствующих на *президент* считаются важнее документы, соответствующие на **.


### <a name="scoring-example"></a>Пример оценки

Отзыв hello три документы, соответствующие наш пример запроса:
~~~~
search=Spacious, air-condition* +"Ocean view"  
~~~~
~~~~
{  
  "value": [
    {
      "@search.score": 0.25610128,
      "id": "1",
      "title": "Hotel Atman",
      "description": "Spacious rooms, ocean view, walking distance toohello beach."
    },
    {
      "@search.score": 0.08951007,
      "id": "3",
      "title": "Playa Hotel",
      "description": "Comfortable, air-conditioned rooms with ocean view."
    },
    {
      "@search.score": 0.05967338,
      "id": "2",
      "title": "Ocean Resort",
      "description": "Located on a cliff on hello north shore of hello island of Kauai. Ocean view."
    }
  ]
}
~~~~

Лучше всего документа 1 сопоставленная hello запроса, так как оба hello термин *снижает* и необходимые фразы hello *Океан* происходят в поле описания hello. следующие два документов Hello соответствует только hello фразу *Океан*. Он может неожиданным этот показатель релевантности hello для документа, 2 и 3 отличается, несмотря на то, что они сопоставлены запроса hello в hello таким же образом. Это так, как hello оценки формула имеет несколько компонентов, чем просто TF-IDF-ФАЙЛ. В этом случае документу 3 была присвоена оценка выше, так как его описание короче. Дополнительные сведения о [Lucene практические формулы оценки](https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html) toounderstand, как длина поля и другие факторы могут повлиять на hello оценку значимости.

Некоторые запроса типов (подстановочный знак, префикс, регулярное выражение) всегда влияют на оценку константой toohello общий документ оценки. Это позволяет совпадений, найденных с помощью toobe расширения запроса включены в результаты hello, но без влияния на ранжирование hello. 

В примере объясняется, почему это важно. Поиск с подстановочными знаками, включая поиск префиксных форм являются неоднозначным по определению, поскольку ввода hello частичную строку с возможных совпадений на очень большое количество различных условий (рассмотрите возможность ввода «Обзор *», с совпадений, обнаруженных на «учебники», «tourettes», и « tourmaline»). Условии hello характера эти результаты, нет способа определить tooreasonably какие из терминов являются более полезна, чем другие. Именно поэтому при оценке результатов в запросах с подстановочными знаками, префиксами и регулярными выражениями стоит игнорировать частоту встречаемости термина. В составной поискового запроса, включающий условия частичных или полных результатов из частичного ввода hello были включены с константой оценки tooavoid смещения в сторону может привести к непредвиденным совпадений.

### <a name="score-tuning"></a>Настройка оценки

Существует два способа tootune релевантности в поиске Azure:

1. **Профили оценки** promote документы в списке hello отсортированных результатов на основе набора правил. В нашем примере мы рассмотреть документов, в поле "Название" hello важнее документов, в поле описания hello соответствия соответствия. Кроме того, если бы для индекса было задано поле цены для каждого отеля, мы могли бы повысить позиции документов с более низкой стоимостью. Дополнительные сведения как слишком[добавить индекс поиска tooa профилей оценки.](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index)
2. **Терминов подъема** (доступно только в синтаксисе запроса hello полного Lucene) предоставляет подъема оператор `^` , может быть применен tooany частью дерева запроса hello. В нашем примере вместо поиска по префиксу hello *air-condition*\*, один выполнить поиск точного указания термина либо hello *air-condition* hello префикс, но документы, которые соответствуют hello точное Термин более высоким рангом, применяя boost toohello термин запроса: *воздух условие ^ 2 || AIR-Condition**. Дополнительные сведения см. в разделе о [повышении приоритета слов](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search#bkmk_termboost).


### <a name="scoring-in-a-distributed-index"></a>Оценка в распределенном индексе

Все индексы в поиске Azure, автоматически разбить на несколько сегментов, позволяет нам tooquickly распространение индекса hello между несколькими узлами во время масштабирования службы вверх или уменьшения масштаба. Когда инициирован поисковый запрос, он выполняется отдельно для каждого сегмента. Hello результаты из каждого сегмента затем объединяется и упорядочены по оценке (если другие порядок не определяется). Это важные tooknow, hello не по всем сегментам оценки функция весовые коэффициенты запроса частоты от его частота обратный документа в всех документов в сегмент hello!

Это значит, что оценка релевантности *может* отличаться для идентичных документов, если они находятся в разных сегментах. К счастью достигнутое обычно toodisappear по мере роста hello число документов в индексе hello из-за распространения toomore даже термин. Это не возможные tooassume на какого сегмента будут располагаться любое данного документа. Тем не менее, при условии, что ключ документа не изменяется, она будет всегда соответствовать toohello же сегментов.

В общем случае оценке документа не лучший hello атрибут сортировки документов, если важен порядок стабильности. Например, имея два документа с одинаковой оценкой, нет гарантии, какой из них отображается первым в последующих запусках hello того же запроса. Оценке документа следует только предоставить общем смысле релевантности документа относительный tooother документов в наборе результатов hello.

## <a name="conclusion"></a>Заключение

Успех Hello средства поиска в Интернете вызвало ожиданий для полнотекстового поиска по личных данных. Практически для любого типа результатов поиска, теперь ожидается hello engine toounderstand нашей назначение, даже если написаны с ошибками термины или является неполным. Более того, могут даже возвращаться совпадения на основе терминов с приблизительным эквивалентным значением или синонимов, которые не были указаны.

С технической точки зрения полнотекстовый поиск является очень сложными, требующих сложных лингвистический анализ и систематический подход tooprocessing таким образом, чтобы уточнить, разверните и преобразования toodeliver условия запроса соответствующую. Учитывая специфические сложности hello, существует много факторов, влияющих на результат hello запроса. По этой причине инвестиции hello время toounderstand hello механизм полнотекстового поиска предлагает очевидные преимущества при попытке toowork через непредвиденные результаты.  

В этой статье использовать полнотекстовый поиск в контексте hello поиска Azure. Мы надеемся, что она позволяет достаточно фона toorecognize возможные причины и способы их устранения по устранению общих проблем запроса. 

## <a name="next-steps"></a>Дальнейшие действия

+ Создание индекса образец hello, пробное использование различных запросов и просмотрите результаты. Инструкции см. в разделе [сборки и запроса индекса в портале hello](search-get-started-portal.md#query-index).

+ Повторите дополнительного синтаксиса hello [поиск документов](https://docs.microsoft.com/rest/api/searchservice/search-documents#examples) разделе "Пример" или из [синтаксис простого запроса](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search) в обозреватель поиска в портале hello.

+ Просмотрите [профилей оценки](https://docs.microsoft.com/rest/api/searchservice/add-scoring-profiles-to-a-search-index) Если tootune ранжирования в приложении поиска.

+ Узнайте, как tooapply [лексические анализаторы языка](https://docs.microsoft.com/rest/api/searchservice/language-support).

+ [Настройте пользовательские анализаторы](https://docs.microsoft.com/rest/api/searchservice/custom-analyzers-in-azure-search) для минимальной или специализированной обработки определенных полей.

+ [Параллельно сравните стандартный анализатор и анализатор английского языка](http://alice.unearth.ai/) на этом демонстрационном веб-сайте. 

## <a name="see-also"></a>См. также

[Search Documents (Azure Search Service REST API)](https://docs.microsoft.com/rest/api/searchservice/search-documents) (Поиск по документам (REST API службы поиска Azure))

[Простой синтаксис запросов](https://docs.microsoft.com/rest/api/searchservice/simple-query-syntax-in-azure-search)

[Lucene query syntax in Azure Search](https://docs.microsoft.com/rest/api/searchservice/lucene-query-syntax-in-azure-search) (Синтаксис запросов Lucene в службе поиска Azure)

[Обработка результатов поиска](https://docs.microsoft.com/azure/search/search-pagination-page-layout)

<!--Image references-->
[1]: ./media/search-lucene-query-architecture/architecture-diagram2.png
[2]: ./media/search-lucene-query-architecture/azSearch-queryparsing-should2.png
[3]: ./media/search-lucene-query-architecture/azSearch-queryparsing-must2.png
[4]: ./media/search-lucene-query-architecture/azSearch-queryparsing-spacious2.png
