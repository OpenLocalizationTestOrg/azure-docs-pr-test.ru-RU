---
title: "aaaService администрирования для службы поиска Azure в hello портал Azure"
description: "Управление поиском Azure, размещенной облачной службой поиска в Microsoft Azure с помощью портала Azure hello."
services: search
documentationcenter: 
author: HeidiSteen
manager: jhubbard
editor: 
tags: azure-portal
ms.assetid: c87d1fdd-b3b8-4702-a753-6d7e29dbe0a2
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 06/18/2017
ms.author: heidist
ms.openlocfilehash: 9bb33660d93e068e0f35b856cba0a41c92623644
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-administration-for-azure-search-in-hello-azure-portal"></a>Администрирование службы для службы поиска Azure в hello портал Azure
> [!div class="op_single_selector"]
> * [Портал](search-manage.md)
> * [PowerShell](search-manage-powershell.md)
> * [Пакет SDK для .NET](https://docs.microsoft.com/dotnet/api/microsoft.azure.management.search)
> * [Python](https://pypi.python.org/pypi/azure-mgmt-search/0.1.0)> 

Поиск Azure — это облачная служба поиска с полным управлением, которая используется для создания многофункционального поискового интерфейса в пользовательских приложениях. В этой статье рассматриваются hello *службы администрирования* задачи, которые можно выполнять в hello [портал Azure](https://portal.azure.com) для службы поиска, который уже инициализирован. *Служба администрирования* простой предусмотренные ограниченный toohello следующие задачи:

* Управление и защиту доступа к toohello *ключи api* используется для чтения или записи tooyour службы.
* Настройте службы емкость, изменив hello выделение разделов и реплик.
* Наблюдение за использованием ресурсов, относительный toomaximum ограничения уровня службы.

**За рамками данной статьи** 

*Управление содержимым* (или индекс управления) относится toooperations анализа toounderstand запрос поиска трафика тома, обнаружение которого термины людей, поиск и успешность поиска результаты возвращаются в руководить toospecific клиентов документы в индексе. Дополнительные сведения об этом см. в статье, посвященной [поиску аналитики трафика для службы Поиска Azure](search-traffic-analytics.md).

*Производительность запросов,* также выходит за рамки данной статьи hello. Дополнительные сведения см. в статьях [Контроль использования и статистики в службе поиска Azure](search-monitor-usage.md) и [Рекомендации по производительности и оптимизации Поиска Azure](search-performance-optimization.md).

*Обновление* не является задачей администрирования. Поскольку ресурсы выделяются при подготовке службы hello, перемещение другому уровню tooa требует новой службы. Подробные сведения см. в статье [Создание службы поиска Azure](search-create-service-portal.md).

<a id="admin-rights"></a>

## <a name="administrator-rights"></a>Права администратора
Подготовки или списания саму службу hello может выполняться администратором подписки Azure или соадминистратором.

В службе любой пользователь с URL-адрес службы toohello доступа и api ключ администратора есть доступ для чтения и записи toohello служба. Доступ для чтения и записи предоставляет возможность tooadd hello, удаления или изменения серверных объектов, включая ключи api, индексы, индексаторы, источники данных, расписаний и назначения ролей, как реализуется с помощью [роли, определяемые RBAC](#rbac).

Все взаимодействие с пользователем с поиском Azure находится в одном из следующих режимов: чтения и записи службы доступа к toohello (прав администратора) или службы toohello доступ только для чтения (запрос прав). Дополнительные сведения см. в разделе [управление ключи api hello](#manage-keys).

<a id="sys-info"></a>

## <a name="set-rbac-roles-for-administrative-access"></a>Настройка ролей RBAC с правами администратора
Azure предоставляет [модель глобального авторизации на основе ролей](../active-directory/role-based-access-control-configure.md) для всех служб, управляемых с помощью портала hello или интерфейсы API диспетчера ресурсов. Владельца, участника и чтения роли определяют уровень hello администрирования службы Active Directory-пользователи, группы и роли назначенного tooeach субъектов безопасности. 

Для поиска Azure RBAC разрешения определяют hello следующие административные задачи:

| Роль | Задача |
| --- | --- |
| Владелец |Создание или удаление hello службы или любого объекта на службу hello, включая ключи api, индексы, индексаторы, индексатор источники данных и расписания индексатора.<p>Просмотр состояния службы, в том числе счетчиков и размера хранилища.<p>Добавление или удаление ролевой принадлежности (только владелец может управлять ролевой принадлежностью).<p>Администраторы подписки и владельцы службы иметь автоматическое членство в роли Владельцы hello. |
| Участник |Тот же уровень доступа, что и владелец, но без возможности управлять ролями. Например, участник может просматривать и повторно создавать `api-key`, но не может изменять членство в ролях. |
| читатель. |Просматривает состояние службы и ключи запросов. Пользователи в этой роли не могут изменять конфигурацию службы, а также не могут просматривать ключи администратора. |

Роли не предоставляйте конечной точки службы toohello прав доступа. Операции службы поиска, такие как управление индексами, совокупностями индексов и поисковые запросы к данным, управляются посредством ключей API, а не через роли. Дополнительные сведения см. в разделе "Предоставление прав на управление и операции с данными" статьи [Начало работы с управлением доступом на портале Azure](../active-directory/role-based-access-control-what-is.md).

<a id="secure-keys"></a>
## <a name="logging-and-system-information"></a>Ведение журнала и сведения о системе
Поиск Azure не предоставляет файлы журналов для отдельной службы через портал hello или программных интерфейсов. На уровне Basic hello и более поздних версий Microsoft отслеживает все службы поиска Azure для обеспечения доступности 99,9% каждого соглашения об уровне обслуживания (SLA). Если служба hello работает медленно или пропускной способности запроса падает ниже пороговых значений соглашения об уровне ОБСЛУЖИВАНИЯ, группы поддержки просмотрите toothem доступные файлы журнала hello и адрес hello проблему.

С точки зрения Общие сведения о службе можно узнать в hello следующих способов:

* На портале hello на панель мониторинга службы hello посредством уведомлений, свойств и сообщения о состоянии.
* С помощью [PowerShell](search-manage-powershell.md) или hello [API REST управления](https://docs.microsoft.com/rest/api/searchmanagement/) слишком[получение свойств службы](https://docs.microsoft.com/rest/api/searchmanagement/services), или состояние индекса использование ресурсов.
* с помощью функции [аналитики поискового трафика](search-traffic-analytics.md), как уже говорилось ранее.

<a id="manage-keys"></a>

## <a name="manage-api-keys"></a>Управление ключами API
Служба поиска tooa все запросы должны api ключ, созданный специально для вашей службы. Этот ключ api — hello единственный механизм для проверки подлинности конечной точки службы поиска tooyour доступа. 

Ключ API является строкой, состоящей из случайно сгенерированных букв и цифр. Через [разрешения RBAC](#rbac), можно удалить или прочитать hello ключи, но нельзя заменить ключ пользовательским паролем. 

Два типа ключей являются tooaccess используется службой поиска:

* Admin (действителен для любой операции чтения и записи к службе hello)
* ключ запроса (применяется только к операциям чтения, таким как запросы к индексу).

Ключ api администратора создается при подготовке службы hello. Имеется два ключа администратора, в качестве *основной* и *получателя* tookeep их непосредственно, но в действительности они являются взаимозаменяемыми. Каждая служба имеет два ключа администратора, чтобы Смена один без потери доступа tooyour службы. Можно повторно создать или ключ администратора, но не удается добавить число ключей toohello общее администратора. На одну службу поиска допускается не более двух ключей администратора.

Ключи запроса предназначены для клиентских приложений, которые могут напрямую вызывать поиск. Можно создать копии ключей too50 запроса. В коде приложения укажите URL-адрес для поиска hello и доступ только для чтения toohello запроса tooallow ключ api службы. Код приложения также указывает индекс hello, используемую приложением. Вместе, конечная точка hello, ключ api для доступа только для чтения и целевой индекс определить hello области и уровень доступа hello подключения из клиентского приложения.

tooget или повторное создание ключей api, Привет открыть панель мониторинга службы. Нажмите кнопку **КЛЮЧЕЙ** tooslide откройте страницу управления ключами hello. Команды, для повторного создания или создание ключей, в начале hello страницы приветствия. По умолчанию создаются только ключи администратора. Ключи API запроса необходимо создать вручную.

 ![][9]

<a id="rbac"></a>

## <a name="secure-api-keys"></a>Обеспечение безопасности ключей API
Безопасность ключей обеспечивается путем ограничения доступа через портал hello или интерфейсы диспетчера ресурсов (PowerShell или интерфейса командной строки). Как уже упоминалось, администраторы подписки могут просматривать и повторно создавать все ключи API. В качестве меры предосторожности просмотрите toounderstand назначения роли, имеющий ключи администратора toohello доступа.

1. В панели мониторинга службы hello щелкните hello доступа значок tooslide Привет открыть колонка "пользователи".
   ![][7]
2. В колонке "Пользователи" проверьте существующие назначения ролей. Как и ожидалось, администраторы подписки уже есть полный доступ службы toohello через роль владельца hello.
3. Нажмите кнопку Далее, toodrill **Администраторы подписки** и разверните hello назначения роли список toosee с правами совместного администрирования на службе поиска.

Разрешения на доступ другим способом tooview — tooclick **ролей** на колонка "пользователи" hello. При этом отображаются доступные роли и номер hello назначенного tooeach роли пользователям или группам.

<a id="sub-5"></a>

## <a name="monitor-resource-usage"></a>Отслеживание использования ресурсов
В панели мониторинга hello отслеживание ресурсов является ограниченной toohello сведения, отображаемые на панели мониторинга службы hello и несколько метрик, которые можно получить с помощью запроса к службе hello. На панель мониторинга службы hello в разделе "использование" hello можно быстро определить, соответствуют ли уровни раздел ресурсов приложения.

С помощью hello API службы поиска, можно получить число документов и индексы. Существуют жесткие ограничения, связанные с этих счетчиков, в зависимости от ценового уровня hello. Дополнительные сведения см. в статье [Ограничения поиска Azure](search-limits-quotas-capacity.md). 

* [Получение статистики индексов](https://docs.microsoft.com/rest/api/searchservice/Get-Index-Statistics)
* [Подсчет документов](https://docs.microsoft.com/rest/api/searchservice/count-documents)

> [!NOTE]
> Поведение кэша может временно превышать предел. Например, при использовании hello общие службы, может появиться документа счетчик через hello жестко ограничен: максимум 10 000 документов. Hello overstatement являются временными и будут определяться на hello Далее проверки принудительного применения ограничения. 
> 
> 

## <a name="disaster-recovery-and-service-outages"></a>Аварийное восстановление и простои службы

Несмотря на то, что мы спасти данные, поиска Azure не предоставляет немедленной отработки отказа службы hello, если происходит сбой на уровне центра hello кластера или данных. В случае кластера в центре обработки данных hello hello рабочая группа обнаруживает и служба toorestore рабочих. Во время восстановления службы возникнет простой. Можно запросить toocompensate кредиты службы для недоступности службы на hello [соглашения уровня службы (SLA)](https://azure.microsoft.com/support/legal/sla/search/v1_0/). 

Если в событии hello критическим сбоям за пределами контроля корпорации Майкрософт требуется непрерывной работы, вы можете [подготовить это дополнительная служба](search-create-service-portal.md) в другом регионе и реализовать географическую репликацию стратегии tooensure индексов являются полностью избыточные во всех службах.

Пользователи, использующие [индексаторы](search-indexer-overview.md) toopopulate и обновления индексов может обрабатывать аварийное восстановление с помощью конкретного geo индексаторы, используя hello одного источника данных. Две службы в различных регионах, в которых запущена индексатора, делает индекс из hello же tooachieve геоизбыточность источника данных. Если индексация осуществляется из источников данных, которые также обладают географической избыточностью, следует учитывать, что индексаторы поиска Azure могут выполнять добавочную индексацию только из первичных реплик. В отработки отказа нужно убедиться, что точка toore hello индексатора toohello новой первичной репликой. 

Если вы не используете индексаторы, используется код toopush объектов и данных toodifferent поиска служб приложения в параллельном режиме. Дополнительные сведения см. в статье [Рекомендации по производительности и оптимизации Поиска Azure](search-performance-optimization.md).

## <a name="backup-and-restore"></a>Архивация и восстановление

Так как Поиск Azure не является основным решением для хранения данных, мы не предоставляем формальный механизм для автоматического резервного копирования и самостоятельного восстановления. Код приложения, используемый для создания и заполнения индекса является hello фактически параметр восстановления, если индекс был удален по ошибке. 

toorebuild индекса, будет удалить его (если он существует), заново создайте индекс hello в службе hello и перезагрузить путем извлечения данных из источника данных хранилища. Кроме того, можно получить доступ к слишком[поддержки]() toosalvage индексы при региональном сбое.


<a id="scale"></a>

## <a name="scale-up-or-down"></a>Масштабирование вверх или вниз
Каждая поисковая служба стартует минимум с одной реплики и одного раздела. Если вы зарегистрировались на [уровня, который предоставляет выделенные ресурсы](search-limits-quotas-capacity.md), щелкните hello **ШКАЛЫ** плитки уровня использования ресурсов tooadjust hello службы мониторинга.

При добавлении мощность за счет либо ресурсов hello служба использует их автоматически. Никаких дополнительных действий со стороны пользователя требуется, но есть небольшая задержка перед реализуется hello влияние hello новый ресурс. Дополнительные ресурсы может потребоваться 15 минут или более tooprovision.

 ![][10]

### <a name="add-replicas"></a>Добавление реплик
Увеличение количества запросов в секунду (QPS) или достижение высокой производительности осуществляется посредством добавления реплик. Каждой реплики имеет одну копию индекса, поэтому добавляется один дополнительные реплика переводит tooone дополнительные индекса, доступных для обработки запросов на обслуживание запроса. Для обеспечения высокой доступности требуется не менее 3 реплик (дополнительные сведения см. в статье [Масштабирование уровней ресурсов для рабочих нагрузок запросов и индексирования в Поиске Azure](search-capacity-planning.md)).

Служба поиска с большим количеством реплик может загружать баланс поисковых запросов по большему числу индексов. Присвоен уровень число запросов, запросов пропускной способности будет toobe быстрее, если существует несколько копий hello индекс доступен tooservice hello запроса. Если наблюдается задержка обработки запросов, можно ожидать положительное влияние на производительность после hello другие реплики находятся в оперативном режиме.

Несмотря на то, что пропускная способность запросов возрастает по мере добавления реплик, он не точно дважды или Тройное по мере добавления реплик tooyour службы. Тема tooexternal факторов, которые могут impinge на производительность запроса, все приложения поиска. Сложные запросы и задержки сети являются двух факторов, которые входят toovariations время ответа на запрос.

### <a name="add-partitions"></a>Добавление разделов
Большинство приложений-служб имеет встроенную потребность в большем количестве реплик, а не секций. В случае необходимости повысить количество документов нужно добавить секции, если вы подписаны на службу ценовой категории "Стандартный". Для категории "Базовый" дополнительные секции не предоставляются.

На уровне Standard hello кратно 12 добавляются секции (в частности, 1, 2, 3, 4, 6 или 12). Это артефакт сегментирования. Индекс создается в 12 сегментах, которые все вместе могут храниться в одной секции или равномерно распределяться по 2, 3, 4, 6 или 12 секциям (один сегмент на секцию).

### <a name="remove-replicas"></a>Удаление реплик
После окончания периода большого количества запросов вы можете сократить число реплик, когда нагрузки поисковых запросов нормализуются (например, после окончания периода сезонных распродаж).

toodo, перемещения hello реплики ползунок задней tooa меньшее число. Больше с вашей стороны ничего делать не нужно. Уменьшение числа реплик hello освобождает виртуальных машин в центре обработки данных hello. Теперь ваши запросы и операции приема данных будут работать на меньшем количестве виртуальных машин, чем раньше. Hello минимальное ограничение — одна из реплик.

### <a name="remove-partitions"></a>Удаление разделов
В отличие от Удаление реплик, который требуется никаких дополнительных действий со стороны пользователя, может потребоваться некоторые toodo работы при использовании больше памяти, чем может быть уменьшен. Например если решение использует три секции, загружаемый шрифт tooone или две секции будут вызывать ошибку, если новое дисковое пространство hello меньше, чем требуется. Как и следует ожидать, сделанного выбора toodelete индексы и документы в toofree связанный индекс места или сохранить текущую конфигурацию hello.

Не существует метода, задающего конкретные сегменты индекса, хранящиеся в каждом разделе. Каждой секции предоставляет около 25 ГБ в хранилище, поэтому вам необходимо будет tooreduce хранения tooa размер, который может быть размещено hello число секций, которые у вас есть. Если требуется toorevert tooone секции, все 12 сегментов потребуется toofit.

toohelp планирования будущих может потребоваться toocheck хранилища (с помощью [получить статистику индекса](https://docs.microsoft.com/rest/api/searchservice/Get-Index-Statistics)) toosee, насколько вы использовали. 

<a id="advanced-deployment"></a>

## <a name="best-practices-on-scale-and-deployment"></a>Рекомендации по масштабированию и развертыванию
В этом 30-минутном видеоролике представлены рекомендации для расширенных сценариев развертывания, включая геораспределение рабочих нагрузок. Можно также просмотреть [производительности и оптимизации в поиске Azure](search-performance-optimization.md) hello, титульных страниц справки же точек.

> [!VIDEO https://channel9.msdn.com/Events/Microsoft-Azure/AzureCon-2015/ACON319/player]
> 
> 

<a id="next-steps"></a>

## <a name="next-steps"></a>Дальнейшие действия
Поняв принципы hello администрирования службы, рассмотрите возможность использования [PowerShell](search-manage-powershell.md) tooautomate задачи.

Также рекомендуется ознакомиться с hello [оптимизация производительности и статьи](search-performance-optimization.md).

Другой рекомендуется toowatch hello видео, указаны в предыдущем разделе hello. Он обеспечивает более глубокого покрытия hello методы, описанные в этом разделе.

<!--Image references-->
[7]: ./media/search-manage/rbac-icon.png
[8]: ./media/search-manage/Azure-Search-Manage-1-URL.png
[9]: ./media/search-manage/Azure-Search-Manage-2-Keys.png
[10]: ./media/search-manage/Azure-Search-Manage-3-ScaleUp.png



