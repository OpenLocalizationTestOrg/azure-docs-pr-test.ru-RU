---
title: "Планирование загрузки для Поиска Azure | Документация Майкрософт"
description: "Настройка вычислительных ресурсов секций и реплик в Поиске Azure, в которых каждый ресурс оценивается в оплачиваемых единицах поиска."
services: search
documentationcenter: 
author: HeidiSteen
manager: jhubbard
editor: 
tags: azure-portal
ms.assetid: 1dc16afe-56f9-439d-8874-1733ae1a2b74
ms.service: search
ms.devlang: NA
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.date: 02/08/2017
ms.author: heidist
ms.openlocfilehash: 26f5e71f3d00161a92de702209e224008ec8a5ae
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="scale-resource-levels-for-query-and-indexing-workloads-in-azure-search"></a><span data-ttu-id="e6e99-103">Масштабирование уровней ресурсов для рабочих нагрузок запросов и индексирования в Поиске Azure</span><span class="sxs-lookup"><span data-stu-id="e6e99-103">Scale resource levels for query and indexing workloads in Azure Search</span></span>
<span data-ttu-id="e6e99-104">После [выбора ценовой категории](search-sku-tier.md) и [подготовки службы поиска](search-create-service-portal.md) следующим шагом является необязательное увеличение количества реплик или секций, используемых службой.</span><span class="sxs-lookup"><span data-stu-id="e6e99-104">After you [choose a pricing tier](search-sku-tier.md) and [provision a search service](search-create-service-portal.md), the next step is to optionally increase the number of replicas or partitions used by your service.</span></span> <span data-ttu-id="e6e99-105">Каждый уровень предоставляет фиксированное число единиц выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-105">Each tier offers a fixed number of billing units.</span></span> <span data-ttu-id="e6e99-106">В этой статье объясняется, как выделять эти единицы для достижения оптимальной конфигурации, позволяющей сбалансировать ваши требования к для выполнению запросов, индексированию и хранению данных.</span><span class="sxs-lookup"><span data-stu-id="e6e99-106">This article explains how to allocate those units to achieve an optimal configuration that balances your requirements for query execution, indexing, and storage.</span></span>

<span data-ttu-id="e6e99-107">Конфигурация ресурсов доступна при настройке службы на уровне [Базовый](http://aka.ms/azuresearchbasic) или на одном из уровней [Стандартный](search-limits-quotas-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="e6e99-107">Resource configuration is available when you set up a service at the [Basic tier](http://aka.ms/azuresearchbasic) or one of the [Standard tiers](search-limits-quotas-capacity.md).</span></span> <span data-ttu-id="e6e99-108">Для всех платных служб на этих уровнях емкость приобретается в *единицах поиска*, где каждая секция и реплика принимается за одну единицу поиска.</span><span class="sxs-lookup"><span data-stu-id="e6e99-108">For billable services at these tiers, capacity is purchased in increments of *search units* (SUs) where each partition and replica counts as one SU.</span></span> 

<span data-ttu-id="e6e99-109">Чем меньше используется единиц поиска, тем меньше выставляется счет.</span><span class="sxs-lookup"><span data-stu-id="e6e99-109">Using fewer SUs results in a proportionally lower bill.</span></span> <span data-ttu-id="e6e99-110">Оплата осуществляется на протяжении всего периода настройки службы.</span><span class="sxs-lookup"><span data-stu-id="e6e99-110">Billing is in effect for as long as the service is set up.</span></span> <span data-ttu-id="e6e99-111">Чтобы не платить за службу, которую вы временно не используете, вам нужно удалить ее, а затем при необходимости создать снова.</span><span class="sxs-lookup"><span data-stu-id="e6e99-111">If you are temporarily not using a service, the only way to avoid billing is by deleting the service and then re-creating it when you need it.</span></span>

> [!Note]
> <span data-ttu-id="e6e99-112">Удаление службы приводит к удалению всех связанных с ней компонентов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-112">Deleting a service deletes everything on it.</span></span> <span data-ttu-id="e6e99-113">В службе поиска Azure отсутствуют возможности резервного копирования и восстановления сохраненных данных для поиска.</span><span class="sxs-lookup"><span data-stu-id="e6e99-113">There is no facility within Azure Search for backing up and restoring persisted search data.</span></span> <span data-ttu-id="e6e99-114">Чтобы повторно развернуть существующий индекс в новой службе, необходимо запустить программу, которая изначально использовалась для его создания и загрузки.</span><span class="sxs-lookup"><span data-stu-id="e6e99-114">To redeploy an existing index on a new service, you should run the program used to create and load it originally.</span></span> 

## <a name="terminology-partitions-and-replicas"></a><span data-ttu-id="e6e99-115">Терминология: секции и реплики</span><span class="sxs-lookup"><span data-stu-id="e6e99-115">Terminology: partitions and replicas</span></span>
<span data-ttu-id="e6e99-116">Разделы и реплики — это основные ресурсы, на которых работает служба поиска.</span><span class="sxs-lookup"><span data-stu-id="e6e99-116">Partitions and replicas are the primary resources that back a search service.</span></span>

| <span data-ttu-id="e6e99-117">Ресурс</span><span class="sxs-lookup"><span data-stu-id="e6e99-117">Resource</span></span> | <span data-ttu-id="e6e99-118">Определение</span><span class="sxs-lookup"><span data-stu-id="e6e99-118">Definition</span></span> |
|----------|------------|
|<span data-ttu-id="e6e99-119">*Секции*</span><span class="sxs-lookup"><span data-stu-id="e6e99-119">*Partitions*</span></span> | <span data-ttu-id="e6e99-120">Служат для хранения индексов и ввода-вывода данных для операций чтения и записи (например, при повторном создании или обновлении индексов).</span><span class="sxs-lookup"><span data-stu-id="e6e99-120">Provides index storage and I/O for read/write operations (for example, when rebuilding or refreshing an index).</span></span>|
|<span data-ttu-id="e6e99-121">*Реплики*</span><span class="sxs-lookup"><span data-stu-id="e6e99-121">*Replicas*</span></span> | <span data-ttu-id="e6e99-122">Экземпляры службы поиска, используемые главным образом для распределения операций запросов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-122">Instances of the search service, used primarily to load balance query operations.</span></span> <span data-ttu-id="e6e99-123">На каждой реплике всегда размещается одна копия индекса.</span><span class="sxs-lookup"><span data-stu-id="e6e99-123">Each replica always hosts one copy of an index.</span></span> <span data-ttu-id="e6e99-124">Если у вас есть 12 реплик, в службу будет загружено 12 копий каждого индекса.</span><span class="sxs-lookup"><span data-stu-id="e6e99-124">If you have 12 replicas, you will have 12 copies of every index loaded on the service.</span></span>|

> [!NOTE]
> <span data-ttu-id="e6e99-125">Невозможно напрямую выбрать или определить, какие индексы будут запущены в реплике.</span><span class="sxs-lookup"><span data-stu-id="e6e99-125">There is no way to directly manipulate or manage which indexes run on a replica.</span></span> <span data-ttu-id="e6e99-126">Одна копия каждого индекса в каждой реплике является частью архитектуры службы.</span><span class="sxs-lookup"><span data-stu-id="e6e99-126">One copy of each index on every replica is part of the service architecture.</span></span>
>

## <a name="how-to-allocate-partitions-and-replicas"></a><span data-ttu-id="e6e99-127">Как выделять секции и реплики</span><span class="sxs-lookup"><span data-stu-id="e6e99-127">How to allocate partitions and replicas</span></span>
<span data-ttu-id="e6e99-128">В Поиске Azure для службы поиска изначально выделяется минимальный уровень ресурсов, состоящий из одного раздела и одной реплики.</span><span class="sxs-lookup"><span data-stu-id="e6e99-128">In Azure Search, a service is initially allocated a minimal level of resources consisting of one partition and one replica.</span></span> <span data-ttu-id="e6e99-129">Для уровней, которые поддерживают службу, вы можете постепенно корректировать вычислительные ресурсы, увеличивая количество секций, если вам нужно больше места для хранения и операций ввода-вывода, или добавляя реплики, чтобы увеличить объем запросов или повысить производительность.</span><span class="sxs-lookup"><span data-stu-id="e6e99-129">For tiers that support it, you can incrementally adjust computational resources by increasing partitions if you need more storage and I/O, or add more replicas for larger query volumes or better performance.</span></span> <span data-ttu-id="e6e99-130">Одна служба должна иметь достаточно ресурсов для обработки всех рабочих нагрузок (индексирования и запросов).</span><span class="sxs-lookup"><span data-stu-id="e6e99-130">A single service must have sufficient resources to handle all workloads (indexing and queries).</span></span> <span data-ttu-id="e6e99-131">Нельзя разделить рабочие нагрузки между несколькими службами.</span><span class="sxs-lookup"><span data-stu-id="e6e99-131">You cannot subdivide workloads among multiple services.</span></span>

<span data-ttu-id="e6e99-132">Для увеличения или изменения количества выделенных реплик или секций мы рекомендуем использовать портал Azure.</span><span class="sxs-lookup"><span data-stu-id="e6e99-132">To increase or change the allocation of replicas and partitions, we recommend using the Azure portal.</span></span> <span data-ttu-id="e6e99-133">Он принудительно применяет ограничения для допустимых сочетаний, которые не превышают верхний предел.</span><span class="sxs-lookup"><span data-stu-id="e6e99-133">The portal enforces limits on allowable combinations that stay below maximum limits:</span></span>

1. <span data-ttu-id="e6e99-134">Войдите на [портал Azure](https://portal.azure.com/) и выберите службу поиска.</span><span class="sxs-lookup"><span data-stu-id="e6e99-134">Sign in to the [Azure portal](https://portal.azure.com/) and select the search service.</span></span>
2. <span data-ttu-id="e6e99-135">В разделе **Параметры** откройте колонку **Масштаб** и с помощью ползунков укажите количество секций и реплик.</span><span class="sxs-lookup"><span data-stu-id="e6e99-135">In **Settings**, open the **Scale** blade and use the sliders to increase or decrease the number of partitions and replicas.</span></span>

<span data-ttu-id="e6e99-136">Кроме того, если требуется подготовка на основе скрипта или кода, вместо портала можно использовать [REST API управления](https://msdn.microsoft.com/library/azure/dn832687.aspx).</span><span class="sxs-lookup"><span data-stu-id="e6e99-136">If you require a script-based or code-based provisioning approach, the [Management REST API](https://msdn.microsoft.com/library/azure/dn832687.aspx) is an alternative to the portal.</span></span>

<span data-ttu-id="e6e99-137">Как правило, приложениям поиска требуется больше реплик, чем секций, особенно если операции службы смещаются в сторону рабочей нагрузки запросов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-137">Generally, search applications need more replicas than partitions, particularly when the service operations are biased toward query workloads.</span></span> <span data-ttu-id="e6e99-138">В разделе, посвященном [высокой доступности](#HA) , объясняется, почему так происходит.</span><span class="sxs-lookup"><span data-stu-id="e6e99-138">The section on [high availability](#HA) explains why.</span></span>

> [!NOTE]
> <span data-ttu-id="e6e99-139">После подготовки службы ее невозможно обновить до более высокого SKU.</span><span class="sxs-lookup"><span data-stu-id="e6e99-139">After a service is provisioned, it cannot be upgraded to a higher SKU.</span></span> <span data-ttu-id="e6e99-140">Вам нужно будет создать службу поиска на новом уровне и перезагрузить индексы.</span><span class="sxs-lookup"><span data-stu-id="e6e99-140">You will need to create a search service at the new tier and reload your indexes.</span></span> <span data-ttu-id="e6e99-141">Инструкции по подготовке службы см. в статье [Создание службы Поиска Azure с помощью портала Azure](search-create-service-portal.md).</span><span class="sxs-lookup"><span data-stu-id="e6e99-141">See [Create an Azure Search service in the portal](search-create-service-portal.md) for help with service provisioning.</span></span>
>
>

<a id="HA"></a>

## <a name="high-availability"></a><span data-ttu-id="e6e99-142">высокую доступность;</span><span class="sxs-lookup"><span data-stu-id="e6e99-142">High availability</span></span>
<span data-ttu-id="e6e99-143">Поскольку задача масштабирования решается достаточно легко и быстро, на начальном этапе обычно рекомендуется использовать один раздел и одну или две реплики, увеличивая их количество по мере роста запросов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-143">Because it's easy and relatively fast to scale up, we generally recommend that you start with one partition and one or two replicas, and then scale up as query volumes build.</span></span> <span data-ttu-id="e6e99-144">Для многих служб уровня "Базовый" или S1 будет достаточно места для хранения одной секции и операций ввода-вывода (15 миллионов документов на раздел).</span><span class="sxs-lookup"><span data-stu-id="e6e99-144">For many services at the Basic or S1 tiers, one partition provides sufficient storage and I/O (at 15 million documents per partition).</span></span>

<span data-ttu-id="e6e99-145">Рабочие нагрузки запросов в основном выполняются с репликами.</span><span class="sxs-lookup"><span data-stu-id="e6e99-145">Query workloads run primarily on replicas.</span></span> <span data-ttu-id="e6e99-146">Для повышения пропускной способности или обеспечения высокого уровня доступности вам, скорее всего, потребуется больше реплик.</span><span class="sxs-lookup"><span data-stu-id="e6e99-146">If you need more throughput or high availability, you will probably require additional replicas.</span></span>

<span data-ttu-id="e6e99-147">Ниже приведены общие рекомендации для обеспечения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="e6e99-147">General recommendations for high availability are:</span></span>

* <span data-ttu-id="e6e99-148">Две реплики для обеспечения высокой доступности рабочих нагрузок для чтения (запросов).</span><span class="sxs-lookup"><span data-stu-id="e6e99-148">Two replicas for high availability of read-only workloads (queries)</span></span>
* <span data-ttu-id="e6e99-149">Три или более реплик для обеспечения высокого уровня доступности рабочих нагрузок чтения и записи (запросов и индексирования по мере добавления, обновления или удаления отдельных документов).</span><span class="sxs-lookup"><span data-stu-id="e6e99-149">Three or more replicas for high availability of read/write workloads (queries plus indexing as individual documents are added, updated, or deleted)</span></span>

<span data-ttu-id="e6e99-150">Соглашения об уровне обслуживания для Поиска Azure используются для операций запросов и обновления индекса, которые состоят из добавления, обновления или удаления документов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-150">Service level agreements (SLA) for Azure Search are targeted at query operations and at index updates that consist of adding, updating, or deleting documents.</span></span>

### <a name="index-availability-during-a-rebuild"></a><span data-ttu-id="e6e99-151">Доступность индексов во время повторного создания</span><span class="sxs-lookup"><span data-stu-id="e6e99-151">Index availability during a rebuild</span></span>

<span data-ttu-id="e6e99-152">Высокий уровень доступности для Поиска Azure относится к запросам и обновлению индексов, не требующих повторного создания индексов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-152">High availability for Azure Search pertains to queries and index updates that don't involve rebuilding an index.</span></span> <span data-ttu-id="e6e99-153">Если вы удалите, переименуете поле или измените тип данных, индекс потребуется перестроить.</span><span class="sxs-lookup"><span data-stu-id="e6e99-153">If you delete a field, change a data type, or rename a field, you will need to rebuild the index.</span></span> <span data-ttu-id="e6e99-154">Для этого его необходимо удалить, затем создать заново и повторно загрузить данные.</span><span class="sxs-lookup"><span data-stu-id="e6e99-154">To rebuild the index, you must delete the index, re-create the index, and reload the data.</span></span>

> [!NOTE]
> <span data-ttu-id="e6e99-155">Можно добавить новые поля в индекс Поиска Azure, не перестраивая его.</span><span class="sxs-lookup"><span data-stu-id="e6e99-155">You can add new fields to an Azure Search index without rebuilding the index.</span></span> <span data-ttu-id="e6e99-156">Значение нового поля будет равно NULL для всех документов, уже добавленных в индекс.</span><span class="sxs-lookup"><span data-stu-id="e6e99-156">The value of the new field will be null for all documents already in the index.</span></span>

<span data-ttu-id="e6e99-157">Чтобы обеспечить доступность индекса во время повторного создания, необходимо иметь копию индекса с другим именем в той же службе или копию индекса с таким же именем в другой службе, а затем обеспечить перенаправление или логику отработки отказа в коде.</span><span class="sxs-lookup"><span data-stu-id="e6e99-157">To maintain index availability during a rebuild, you must have a copy of the index with a different name on the same service, or a copy of the index with the same name on a different service, and then provide redirection or failover logic in your code.</span></span>

## <a name="disaster-recovery"></a><span data-ttu-id="e6e99-158">Аварийное восстановление</span><span class="sxs-lookup"><span data-stu-id="e6e99-158">Disaster recovery</span></span>
<span data-ttu-id="e6e99-159">В настоящее время встроенного механизма для аварийного восстановления не предусмотрено.</span><span class="sxs-lookup"><span data-stu-id="e6e99-159">Currently, there is no built-in mechanism for disaster recovery.</span></span> <span data-ttu-id="e6e99-160">Увеличение разделов или реплик для решения задач аварийного восстановления является ошибочной стратегией.</span><span class="sxs-lookup"><span data-stu-id="e6e99-160">Adding partitions or replicas would be the wrong strategy for meeting disaster recovery objectives.</span></span> <span data-ttu-id="e6e99-161">Наиболее распространенным подходом является добавление избыточности на уровне службы за счет настройки второй службы поиска в другом регионе.</span><span class="sxs-lookup"><span data-stu-id="e6e99-161">The most common approach is to add redundancy at the service level by setting up a second search service in another region.</span></span> <span data-ttu-id="e6e99-162">Как и в случае с доступностью при повторном создании индекса, перенаправление и логику отработки отказа должен обеспечивать ваш код.</span><span class="sxs-lookup"><span data-stu-id="e6e99-162">As with availability during an index rebuild, the redirection or failover logic must come from your code.</span></span>

## <a name="increase-query-performance-with-replicas"></a><span data-ttu-id="e6e99-163">Увеличение производительности запросов с помощью реплик</span><span class="sxs-lookup"><span data-stu-id="e6e99-163">Increase query performance with replicas</span></span>
<span data-ttu-id="e6e99-164">Признаком необходимости добавления дополнительных реплик является задержка обработки запросов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-164">Query latency is an indicator that additional replicas are needed.</span></span> <span data-ttu-id="e6e99-165">Как правило, первым шагом к повышению производительности запросов является добавление этого ресурса.</span><span class="sxs-lookup"><span data-stu-id="e6e99-165">Generally, a first step toward improving query performance is to add more of this resource.</span></span> <span data-ttu-id="e6e99-166">При добавлении новых реплик вы подключаете дополнительные копии индексов. В результате увеличивается допустимая рабочая нагрузка и обеспечивается распределение запросов между большим количеством реплик.</span><span class="sxs-lookup"><span data-stu-id="e6e99-166">As you add replicas, additional copies of the index are brought online to support bigger query workloads and to load balance the requests over the multiple replicas.</span></span>

<span data-ttu-id="e6e99-167">Мы не можем указать точное количество запросов в секунду (QPS), так как выполнение запроса во многом зависит от его сложности и конкурирующих рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="e6e99-167">We cannot provide hard estimates on queries per second (QPS): query performance depends on the complexity of the query and competing workloads.</span></span> <span data-ttu-id="e6e99-168">В среднем реплика на SKU уровня "Базовый" или S1 обслуживает около 15 запросов в секунду, но фактическая пропускная способность будет немного выше или ниже в зависимости от сложности запросов (фасетные запросы являются более сложными) и задержки сети.</span><span class="sxs-lookup"><span data-stu-id="e6e99-168">On average, a replica at Basic or S1 SKUs can service about 15 QPS, but your throughput will be higher or lower depending on query complexity (faceted queries are more complex) and network latency.</span></span> <span data-ttu-id="e6e99-169">Кроме того, необходимо учитывать, что зависимость роста мощности и производительности от количества реплик не обязательно является линейной. Например, добавление трех реплик не гарантирует трехкратный рост пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="e6e99-169">Also, it's important to recognize that although adding replicas will definitely add scale and performance, the result is not strictly linear: adding three replicas does not guarantee triple throughput.</span></span>

<span data-ttu-id="e6e99-170">Дополнительные сведения о количестве запросов в секунду (QPS), включая способы оценки QPS для рабочих нагрузок, см. в статье [Управление службой поиска в Microsoft Azure](search-manage.md).</span><span class="sxs-lookup"><span data-stu-id="e6e99-170">To learn about QPS, including approaches for estimating QPS for your workloads, see [Manage your Search service](search-manage.md).</span></span>

## <a name="increase-indexing-performance-with-partitions"></a><span data-ttu-id="e6e99-171">Увеличение производительности индексирования с помощью секций</span><span class="sxs-lookup"><span data-stu-id="e6e99-171">Increase indexing performance with partitions</span></span>
<span data-ttu-id="e6e99-172">Приложениям поиска, которым требуется обновления данных в режиме, близком к реальному времени, понадобится пропорционально больше секций, чем реплик.</span><span class="sxs-lookup"><span data-stu-id="e6e99-172">Search applications that require near real-time data refresh will need proportionally more partitions than replicas.</span></span> <span data-ttu-id="e6e99-173">При добавлении секций операции чтения-записи распределяются среди большего количества вычислительных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-173">Adding partitions spreads read/write operations across a larger number of compute resources.</span></span> <span data-ttu-id="e6e99-174">Оно также обеспечивает больше дискового пространства для хранения дополнительных индексов и документов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-174">It also gives you more disk space for storing additional indexes and documents.</span></span>

<span data-ttu-id="e6e99-175">Запрос больших индексов выполняется дольше.</span><span class="sxs-lookup"><span data-stu-id="e6e99-175">Larger indexes take longer to query.</span></span> <span data-ttu-id="e6e99-176">Поэтому может оказаться, что каждое добавочное увеличение числа секций потребует меньшего, но пропорционального увеличения числа реплик.</span><span class="sxs-lookup"><span data-stu-id="e6e99-176">As such, you might find that every incremental increase in partitions requires a smaller but proportional increase in replicas.</span></span> <span data-ttu-id="e6e99-177">Сложность запросов и их объем обусловливают скорость выполнения запросов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-177">The complexity of your queries and query volume will factor into how quickly query execution is turned around.</span></span>

## <a name="basic-tier-partition-and-replica-combinations"></a><span data-ttu-id="e6e99-178">Уровень "Базовый": сочетания разделов и реплик</span><span class="sxs-lookup"><span data-stu-id="e6e99-178">Basic tier: Partition and replica combinations</span></span>
<span data-ttu-id="e6e99-179">На уровне "Базовый" служба может иметь только одну секцию и до трех реплик. Таким образом, максимальное количество единиц поиска составляет три.</span><span class="sxs-lookup"><span data-stu-id="e6e99-179">A Basic service can have exactly one partition and up to three replicas, for a maximum limit of three SUs.</span></span> <span data-ttu-id="e6e99-180">Единственным ресурсом, который можно изменять, являются реплики.</span><span class="sxs-lookup"><span data-stu-id="e6e99-180">The only adjustable resource is replicas.</span></span> <span data-ttu-id="e6e99-181">Требуется не менее двух реплик, чтобы обеспечить высокий уровень доступности при обработке запросов.</span><span class="sxs-lookup"><span data-stu-id="e6e99-181">You need a minimum of two replicas for high availability on queries.</span></span>

<a id="chart"></a>

## <a name="standard-tiers-partition-and-replica-combinations"></a><span data-ttu-id="e6e99-182">Уровень "Стандартный": сочетания разделов и реплик</span><span class="sxs-lookup"><span data-stu-id="e6e99-182">Standard tiers: Partition and replica combinations</span></span>
<span data-ttu-id="e6e99-183">В этой таблице показаны единицы поиска для всех стандартных уровней, необходимые для поддержки сочетаний реплик и секций, с ограничением в 36 единиц поиска.</span><span class="sxs-lookup"><span data-stu-id="e6e99-183">This table shows the SUs required to support combinations of replicas and partitions, subject to the 36-SU limit, for all Standard tiers.</span></span>

|   | <span data-ttu-id="e6e99-184">**1 секция**</span><span class="sxs-lookup"><span data-stu-id="e6e99-184">**1 partition**</span></span> | <span data-ttu-id="e6e99-185">**2 секции**</span><span class="sxs-lookup"><span data-stu-id="e6e99-185">**2 partitions**</span></span> | <span data-ttu-id="e6e99-186">**3 секции**</span><span class="sxs-lookup"><span data-stu-id="e6e99-186">**3 partitions**</span></span> | <span data-ttu-id="e6e99-187">**4 секции**</span><span class="sxs-lookup"><span data-stu-id="e6e99-187">**4 partitions**</span></span> | <span data-ttu-id="e6e99-188">**6 секций**</span><span class="sxs-lookup"><span data-stu-id="e6e99-188">**6 partitions**</span></span> | <span data-ttu-id="e6e99-189">**12 секций**</span><span class="sxs-lookup"><span data-stu-id="e6e99-189">**12 partitions**</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="e6e99-190">**1 реплика**</span><span class="sxs-lookup"><span data-stu-id="e6e99-190">**1 replica**</span></span> |<span data-ttu-id="e6e99-191">1 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-191">1 SU</span></span> |<span data-ttu-id="e6e99-192">2 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-192">2 SU</span></span> |<span data-ttu-id="e6e99-193">3 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-193">3 SU</span></span> |<span data-ttu-id="e6e99-194">4 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-194">4 SU</span></span> |<span data-ttu-id="e6e99-195">6 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-195">6 SU</span></span> |<span data-ttu-id="e6e99-196">12 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-196">12 SU</span></span> |
| <span data-ttu-id="e6e99-197">**2 реплики**</span><span class="sxs-lookup"><span data-stu-id="e6e99-197">**2 replicas**</span></span> |<span data-ttu-id="e6e99-198">2 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-198">2 SU</span></span> |<span data-ttu-id="e6e99-199">4 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-199">4 SU</span></span> |<span data-ttu-id="e6e99-200">6 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-200">6 SU</span></span> |<span data-ttu-id="e6e99-201">8 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-201">8 SU</span></span> |<span data-ttu-id="e6e99-202">12 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-202">12 SU</span></span> |<span data-ttu-id="e6e99-203">24 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-203">24 SU</span></span> |
| <span data-ttu-id="e6e99-204">**3 реплики**</span><span class="sxs-lookup"><span data-stu-id="e6e99-204">**3 replicas**</span></span> |<span data-ttu-id="e6e99-205">3 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-205">3 SU</span></span> |<span data-ttu-id="e6e99-206">6 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-206">6 SU</span></span> |<span data-ttu-id="e6e99-207">9 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-207">9 SU</span></span> |<span data-ttu-id="e6e99-208">12 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-208">12 SU</span></span> |<span data-ttu-id="e6e99-209">18 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-209">18 SU</span></span> |<span data-ttu-id="e6e99-210">36 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-210">36 SU</span></span> |
| <span data-ttu-id="e6e99-211">**4 реплики**</span><span class="sxs-lookup"><span data-stu-id="e6e99-211">**4 replicas**</span></span> |<span data-ttu-id="e6e99-212">4 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-212">4 SU</span></span> |<span data-ttu-id="e6e99-213">8 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-213">8 SU</span></span> |<span data-ttu-id="e6e99-214">12 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-214">12 SU</span></span> |<span data-ttu-id="e6e99-215">16 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-215">16 SU</span></span> |<span data-ttu-id="e6e99-216">24 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-216">24 SU</span></span> |<span data-ttu-id="e6e99-217">Недоступно</span><span class="sxs-lookup"><span data-stu-id="e6e99-217">N/A</span></span> |
| <span data-ttu-id="e6e99-218">**5 реплик**</span><span class="sxs-lookup"><span data-stu-id="e6e99-218">**5 replicas**</span></span> |<span data-ttu-id="e6e99-219">5 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-219">5 SU</span></span> |<span data-ttu-id="e6e99-220">10 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-220">10 SU</span></span> |<span data-ttu-id="e6e99-221">15 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-221">15 SU</span></span> |<span data-ttu-id="e6e99-222">20 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-222">20 SU</span></span> |<span data-ttu-id="e6e99-223">30 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-223">30 SU</span></span> |<span data-ttu-id="e6e99-224">Недоступно</span><span class="sxs-lookup"><span data-stu-id="e6e99-224">N/A</span></span> |
| <span data-ttu-id="e6e99-225">**6 реплик**</span><span class="sxs-lookup"><span data-stu-id="e6e99-225">**6 replicas**</span></span> |<span data-ttu-id="e6e99-226">6 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-226">6 SU</span></span> |<span data-ttu-id="e6e99-227">12 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-227">12 SU</span></span> |<span data-ttu-id="e6e99-228">18 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-228">18 SU</span></span> |<span data-ttu-id="e6e99-229">24 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-229">24 SU</span></span> |<span data-ttu-id="e6e99-230">36 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-230">36 SU</span></span> |<span data-ttu-id="e6e99-231">Недоступно</span><span class="sxs-lookup"><span data-stu-id="e6e99-231">N/A</span></span> |
| <span data-ttu-id="e6e99-232">**12 реплик**</span><span class="sxs-lookup"><span data-stu-id="e6e99-232">**12 replicas**</span></span> |<span data-ttu-id="e6e99-233">12 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-233">12 SU</span></span> |<span data-ttu-id="e6e99-234">24 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-234">24 SU</span></span> |<span data-ttu-id="e6e99-235">36 ЕП</span><span class="sxs-lookup"><span data-stu-id="e6e99-235">36 SU</span></span> |<span data-ttu-id="e6e99-236">Недоступно</span><span class="sxs-lookup"><span data-stu-id="e6e99-236">N/A</span></span> |<span data-ttu-id="e6e99-237">Недоступно</span><span class="sxs-lookup"><span data-stu-id="e6e99-237">N/A</span></span> |<span data-ttu-id="e6e99-238">Недоступно</span><span class="sxs-lookup"><span data-stu-id="e6e99-238">N/A</span></span> |

<span data-ttu-id="e6e99-239">Подробные сведения о единицах поиска, ценах и объемах приведены на веб-сайте Azure.</span><span class="sxs-lookup"><span data-stu-id="e6e99-239">SUs, pricing, and capacity are explained in detail on the Azure website.</span></span> <span data-ttu-id="e6e99-240">Дополнительные сведения см. на [странице с ценами](https://azure.microsoft.com/pricing/details/search/).</span><span class="sxs-lookup"><span data-stu-id="e6e99-240">For more information, see [Pricing Details](https://azure.microsoft.com/pricing/details/search/).</span></span>

> [!NOTE]
> <span data-ttu-id="e6e99-241">Количество реплик и секций должно быть делителем 12 (а именно 1, 2, 3, 4, 6, 12).</span><span class="sxs-lookup"><span data-stu-id="e6e99-241">The number of replicas and partitions divides evenly into 12 (specifically, 1, 2, 3, 4, 6, 12).</span></span> <span data-ttu-id="e6e99-242">Это связано с тем, что Поиск Azure предварительно делит каждый индекс на 12 сегментов, которые можно распределить равными частями по разделам.</span><span class="sxs-lookup"><span data-stu-id="e6e99-242">This is because Azure Search pre-divides each index into 12 shards so that it can be spread in equal portions across all partitions.</span></span> <span data-ttu-id="e6e99-243">Например, если в вашей службе есть три секции и вы создаете индекс, то каждая секция будет содержать по четыре сегмента индекса.</span><span class="sxs-lookup"><span data-stu-id="e6e99-243">For example, if your service has three partitions and you create an index, each partition will contain four shards of the index.</span></span> <span data-ttu-id="e6e99-244">Способ, используемый службой поиска Azure для сегментации индекса, является задачей оптимизации и может быть изменен в будущих выпусках.</span><span class="sxs-lookup"><span data-stu-id="e6e99-244">How Azure Search shards an index is an implementation detail, subject to change in future releases.</span></span> <span data-ttu-id="e6e99-245">Несмотря на то, что сегодня это число 12, вам не следует полагаться на то, что в будущем оно не изменится.</span><span class="sxs-lookup"><span data-stu-id="e6e99-245">Although the number is 12 today, you shouldn't expect that number to always be 12 in the future.</span></span>
>
>

## <a name="billing-formula-for-replica-and-partition-resources"></a><span data-ttu-id="e6e99-246">Формула выставления счетов за ресурсы реплик и секций</span><span class="sxs-lookup"><span data-stu-id="e6e99-246">Billing formula for replica and partition resources</span></span>
<span data-ttu-id="e6e99-247">Формула для расчета единиц поиска, используемых в определенных сочетаниях, основана на произведении количества реплик и секций, т. е. (R X P = SU).</span><span class="sxs-lookup"><span data-stu-id="e6e99-247">The formula for calculating how many SUs are used for specific combinations is the product of replicas and partitions, or (R X P = SU).</span></span> <span data-ttu-id="e6e99-248">Например, три реплики, умноженные на три секции, оплачиваются как девять единиц поиска.</span><span class="sxs-lookup"><span data-stu-id="e6e99-248">For example, three replicas multiplied by three partitions is billed as nine SUs.</span></span>

<span data-ttu-id="e6e99-249">Стоимость единицы поиска определяется уровнем. Например, единица для уровня "Базовый" стоит меньше, чем для уровня "Стандартный".</span><span class="sxs-lookup"><span data-stu-id="e6e99-249">Cost per SU is determined by the tier, with a lower per-unit billing rate for Basic than for Standard.</span></span> <span data-ttu-id="e6e99-250">Расценки для каждого уровня см. в разделе [Сведения о ценах](https://azure.microsoft.com/pricing/details/search/).</span><span class="sxs-lookup"><span data-stu-id="e6e99-250">Rates for each tier can be found on [Pricing Details](https://azure.microsoft.com/pricing/details/search/).</span></span>
