---
title: "Профили оценки (REST API службы поиска Azure, версия 2015-02-28-Preview) | Документация Майкрософт"
description: "Поиск Azure — это размещенная облачная служба поиска, которая поддерживает настройку ранжированных результатов на основе определяемых пользователем профилей повышения."
services: search
documentationcenter: 
author: HeidiSteen
manager: jhubbard
editor: 
ms.assetid: bfd62649-13d7-40b3-a8fa-85521a15084d
ms.service: search
ms.devlang: rest-api
ms.workload: search
ms.topic: article
ms.tgt_pltfrm: na
ms.author: heidist
ms.date: 10/27/2016
ms.openlocfilehash: a67637d149a84313270c03d21acf8a9c1870be05
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="scoring-profiles-azure-search-rest-api-version-2015-02-28-preview"></a><span data-ttu-id="02dd5-103">Профили оценки (API REST службы "Поиск Azure", версия 2015-02-28-Preview)</span><span class="sxs-lookup"><span data-stu-id="02dd5-103">Scoring Profiles (Azure Search REST API Version 2015-02-28-Preview)</span></span>
> [!NOTE]
> <span data-ttu-id="02dd5-104">В этой статье описываются профили оценки, доступные в версии [2015-02-28-Preview](search-api-2015-02-28-preview.md).</span><span class="sxs-lookup"><span data-stu-id="02dd5-104">This article describes scoring profiles in the [2015-02-28-Preview](search-api-2015-02-28-preview.md).</span></span> <span data-ttu-id="02dd5-105">Сейчас нет различий между версией `2016-09-01`, описанной на сайте [MSDN](http://msdn.microsoft.com/library/azure/mt183328.aspx), и версией `2015-02-28-Preview`, описанной в этой статье. Однако мы предлагаем этот документ, чтобы обеспечить полную документацию по API.</span><span class="sxs-lookup"><span data-stu-id="02dd5-105">Currently there is no difference between the `2016-09-01` version documented on [MSDN](http://msdn.microsoft.com/library/azure/mt183328.aspx) and the `2015-02-28-Preview` version described here, but we offer this document anyway in order to provide document coverage across the entire API.</span></span>
>
>

## <a name="overview"></a><span data-ttu-id="02dd5-106">Обзор</span><span class="sxs-lookup"><span data-stu-id="02dd5-106">Overview</span></span>
<span data-ttu-id="02dd5-107">Оценка — это вычисление оценки поиска для всех элементов, возвращенных в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="02dd5-107">Scoring refers to the computation of a search score for every item returned in search results.</span></span> <span data-ttu-id="02dd5-108">Это показатель релевантности элемента в контексте текущей операции поиска.</span><span class="sxs-lookup"><span data-stu-id="02dd5-108">The score is an indicator of an item's relevance in the context of the current search operation.</span></span> <span data-ttu-id="02dd5-109">Чем выше оценка, тем более релевантен элемент.</span><span class="sxs-lookup"><span data-stu-id="02dd5-109">The higher the score, the more relevant the item.</span></span> <span data-ttu-id="02dd5-110">Элементы в результатах поиска упорядочиваются по рангу (от наивысшего до наименьшего) на основе оценок поиска, вычисленных для каждого элемента.</span><span class="sxs-lookup"><span data-stu-id="02dd5-110">In search results, items are rank ordered from high to low, based on the search score calculated for each item.</span></span>

<span data-ttu-id="02dd5-111">В службе "Поиск Azure" используется метод начальной оценки по умолчанию, но вы можете настроить вычисление с помощью профиля оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-111">Azure Search uses default scoring to compute an initial score, but you can customize the calculation through a scoring profile.</span></span> <span data-ttu-id="02dd5-112">Профили оценки позволяют управлять приоритетом элементов в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="02dd5-112">Scoring profiles give you greater control over the ranking of items in search results.</span></span> <span data-ttu-id="02dd5-113">Например, может потребоваться повысить приоритет элементов на основе потенциального дохода, повысить уровень более новых элементов или, возможно, элементов, которые слишком долго находились на складе.</span><span class="sxs-lookup"><span data-stu-id="02dd5-113">For example, you might want to boost items based on their revenue potential, promote newer items, or perhaps boost items that have been in inventory too long.</span></span>

<span data-ttu-id="02dd5-114">Профиль оценки — часть определения индекса, состоящая из полей, функций и параметров.</span><span class="sxs-lookup"><span data-stu-id="02dd5-114">A scoring profile is part of the index definition, composed of fields, functions, and parameters.</span></span>

<span data-ttu-id="02dd5-115">В следующем примере показан простой профиль geo, который поможет вам получить представление о профиле оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-115">To give you an idea of what a scoring profile looks like, the following example shows a simple profile named 'geo'.</span></span> <span data-ttu-id="02dd5-116">Он повышает приоритет элементов, содержащих условие поиска в поле `hotelName` .</span><span class="sxs-lookup"><span data-stu-id="02dd5-116">This one boosts items that have the search term in the `hotelName` field.</span></span> <span data-ttu-id="02dd5-117">Он также использует функцию `distance` для выбора элементов, которые находятся в пределах десяти километров от текущего расположения.</span><span class="sxs-lookup"><span data-stu-id="02dd5-117">It also uses the `distance` function to favor items that are within ten kilometers of the current location.</span></span> <span data-ttu-id="02dd5-118">Если кто-то ищет слово inn, которое входит в название отеля, документы, содержащие слово inn, будут показаны в результатах поиска выше.</span><span class="sxs-lookup"><span data-stu-id="02dd5-118">If someone searches on the term 'inn', and 'inn' happens to be part of the hotel name, documents that include hotels with 'inn' will appear higher in the search results.</span></span>

    "scoringProfiles": [
      {
        "name": "geo",
        "text": {
          "weights": { "hotelName": 5 }
        },
        "functions": [
          {
            "type": "distance",
            "boost": 5,
            "fieldName": "location",
            "interpolation": "logarithmic",
            "distance": {
              "referencePointParameter": "currentLocation",
              "boostingDistance": 10
            }
          }
        ]
      }
    ]

<span data-ttu-id="02dd5-119">Чтобы использовать этот профиль оценки, в строке запроса необходимо указать профиль.</span><span class="sxs-lookup"><span data-stu-id="02dd5-119">To use this scoring profile, your query is formulated to specify the profile on the query string.</span></span> <span data-ttu-id="02dd5-120">В следующем запросе обратите внимание на параметр `scoringProfile=geo` .</span><span class="sxs-lookup"><span data-stu-id="02dd5-120">In the query below, notice the query parameter, `scoringProfile=geo` in the request.</span></span>

    GET /indexes/hotels/docs?search=inn&scoringProfile=geo&scoringParameter=currentLocation--122.123,44.77233&api-version=2015-02-28-Preview

<span data-ttu-id="02dd5-121">Этот запрос выполняет поиск слова inn и передает текущее расположение.</span><span class="sxs-lookup"><span data-stu-id="02dd5-121">This query searches on the term 'inn' and passes in the current location.</span></span> <span data-ttu-id="02dd5-122">Обратите внимание, что этот запрос содержит другие параметры, такие как `scoringParameter`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-122">Note that this query includes other parameters, such as `scoringParameter`.</span></span> <span data-ttu-id="02dd5-123">Параметры запроса описаны в [разделе, в котором рассматривается поиск документов (API службы "Поиск Azure")](search-api-2015-02-28-preview.md#SearchDocs).</span><span class="sxs-lookup"><span data-stu-id="02dd5-123">Query parameters are described in [Search Documents (Azure Search API)](search-api-2015-02-28-preview.md#SearchDocs).</span></span>

<span data-ttu-id="02dd5-124">Щелкните [Пример](#example) , чтобы просмотреть более подробный пример профиля оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-124">Click [Example](#example) to review a more detailed example of a scoring profile.</span></span>

## <a name="what-is-default-scoring"></a><span data-ttu-id="02dd5-125">Что такое оценка по умолчанию?</span><span class="sxs-lookup"><span data-stu-id="02dd5-125">What is default scoring?</span></span>
<span data-ttu-id="02dd5-126">В процессе оценки вычисляется оценка поиска для каждого элемента в упорядоченном по рангу результирующем наборе.</span><span class="sxs-lookup"><span data-stu-id="02dd5-126">Scoring computes a search score for each item in a rank ordered result set.</span></span> <span data-ttu-id="02dd5-127">Каждому элементу в результирующем наборе поиска назначается оценка поиска (от наивысшей до наименьшей).</span><span class="sxs-lookup"><span data-stu-id="02dd5-127">Every item in a search result set is assigned a search score, then ranked highest to lowest.</span></span> <span data-ttu-id="02dd5-128">Элементы с более высокой оценкой возвращаются приложению.</span><span class="sxs-lookup"><span data-stu-id="02dd5-128">Items with the higher scores are returned to the application.</span></span> <span data-ttu-id="02dd5-129">По умолчанию возвращаются первые 50 элементов, но можно использовать параметр `$top` , чтобы вернуть меньше или больше элементов (до 1000 в одном ответе).</span><span class="sxs-lookup"><span data-stu-id="02dd5-129">By default, the top 50 are returned, but you can use the `$top` parameter to return a smaller or larger number of items (up to 1000 in a single response).</span></span>

<span data-ttu-id="02dd5-130">По умолчанию оценка поиска вычисляется на основе статистических свойств данных и запроса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-130">By default, a search score is computed based on statistical properties of the data and the query.</span></span> <span data-ttu-id="02dd5-131">Поиск Azure находит документы, содержащие условия поиска в строке запроса (некоторые или все в зависимости от `searchMode`), отдавая предпочтение документам, которые содержат несколько экземпляров условия поиска.</span><span class="sxs-lookup"><span data-stu-id="02dd5-131">Azure Search finds documents that include the search terms in the query string (some or all, depending on `searchMode`), favoring documents that contain many instances of the search term.</span></span> <span data-ttu-id="02dd5-132">Оценка поиска возрастает, если условие поиска редко встречается в совокупности данных, но часто — внутри документа.</span><span class="sxs-lookup"><span data-stu-id="02dd5-132">The search score goes up even higher if the term is rare across the data corpus, but common within the document.</span></span> <span data-ttu-id="02dd5-133">Основу для такого подхода к вычислению релевантности называют TF-IDF (частота условия — инверсная частота в документе).</span><span class="sxs-lookup"><span data-stu-id="02dd5-133">The basis for this approach to computing relevance is known as TF-IDF or (term frequency-inverse document frequency).</span></span>

<span data-ttu-id="02dd5-134">Если предположить, что пользовательская сортировка не применяется, результаты ранжируются по оценке поиска, прежде чем они будут возвращены вызывающему приложению.</span><span class="sxs-lookup"><span data-stu-id="02dd5-134">Assuming there is no custom sorting, results are then ranked by search score before they are returned to the calling application.</span></span> <span data-ttu-id="02dd5-135">Если параметр `$top` не указан, возвращаются 50 элементов с наивысшей оценкой поиска.</span><span class="sxs-lookup"><span data-stu-id="02dd5-135">If `$top` is not specified, 50 items having the highest search score are returned.</span></span>

<span data-ttu-id="02dd5-136">Значения оценки поиска в результирующем наборе могут повторяться.</span><span class="sxs-lookup"><span data-stu-id="02dd5-136">Search score values can be repeated throughout a result set.</span></span> <span data-ttu-id="02dd5-137">Например, может быть 10 элементов с оценкой 1,2, 20 элементов с оценкой 1,0 и 20 элементов с оценкой 0,5.</span><span class="sxs-lookup"><span data-stu-id="02dd5-137">For example, you might have 10 items with a score of 1.2, 20 items with a score of 1.0, and 20 items with a score of 0.5.</span></span> <span data-ttu-id="02dd5-138">Если у нескольких совпадений одинаковая оценка поиска, порядок сортировки элементов не определен и не является стабильным.</span><span class="sxs-lookup"><span data-stu-id="02dd5-138">When multiple hits have the same search score, the ordering of same scored items is not defined, and is not stable.</span></span> <span data-ttu-id="02dd5-139">Выполните запрос еще раз, и, возможно, позиции элементов изменятся.</span><span class="sxs-lookup"><span data-stu-id="02dd5-139">Run the query again, and you might see items shift position.</span></span> <span data-ttu-id="02dd5-140">Если есть два элемента с одинаковой оценкой, невозможно определить, какой из них отобразится первым.</span><span class="sxs-lookup"><span data-stu-id="02dd5-140">Given two items with an identical score, there is no guarantee which one appears first.</span></span>

## <a name="when-to-use-custom-scoring"></a><span data-ttu-id="02dd5-141">Когда следует использовать пользовательские оценки</span><span class="sxs-lookup"><span data-stu-id="02dd5-141">When to use custom scoring</span></span>
<span data-ttu-id="02dd5-142">Вам следует создать один или несколько профилей оценки, если ранжирование по умолчанию не соответствует вашим бизнес-целям.</span><span class="sxs-lookup"><span data-stu-id="02dd5-142">You should create one or more scoring profiles when the default ranking behavior doesn’t go far enough in meeting your business objectives.</span></span> <span data-ttu-id="02dd5-143">Например, вы можете решить, что при поиске следует предпочитать вновь добавленные элементы.</span><span class="sxs-lookup"><span data-stu-id="02dd5-143">For example, you might decide that search relevance should favor newly added items.</span></span> <span data-ttu-id="02dd5-144">Аналогично, у вас может быть поле, содержащее удельную прибыль, или другое поле, указывающее потенциальный доход.</span><span class="sxs-lookup"><span data-stu-id="02dd5-144">Likewise, you might have a field that contains profit margin, or some other field indicating revenue potential.</span></span> <span data-ttu-id="02dd5-145">Повышение приоритета элементов, которые дают преимущества для бизнеса, может быть важным фактором при решении об использовании профилей оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-145">Boosting hits that bring benefits to your business can be an important factor in deciding to use scoring profiles.</span></span>

<span data-ttu-id="02dd5-146">Упорядочивание на основе релевантности также реализуется с помощью профилей оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-146">Relevancy-based ordering is also implemented through scoring profiles.</span></span> <span data-ttu-id="02dd5-147">Рассмотрим страницы результатов поиска, которые вы использовали ранее, позволяющие сортировать данные по цене, дате, рейтингу или релевантности.</span><span class="sxs-lookup"><span data-stu-id="02dd5-147">Consider search results pages you’ve used in the past that let you sort by price, date, rating, or relevance.</span></span> <span data-ttu-id="02dd5-148">В службе "Поиск Azure" профили оценки предоставляют параметр "релевантности".</span><span class="sxs-lookup"><span data-stu-id="02dd5-148">In Azure Search, scoring profiles drive the 'relevance' option.</span></span> <span data-ttu-id="02dd5-149">Определение релевантности контролируете вы в соответствии с бизнес-целями и типом результатов поиска, которые хотите предоставить.</span><span class="sxs-lookup"><span data-stu-id="02dd5-149">The definition of relevance is controlled by you, predicated on business objectives and the type of search experience you want to deliver.</span></span>

<a name="example"></a>

## <a name="example"></a><span data-ttu-id="02dd5-150">Пример</span><span class="sxs-lookup"><span data-stu-id="02dd5-150">Example</span></span>
<span data-ttu-id="02dd5-151">Как отмечалось ранее, пользовательская оценка реализуется с профилей оценки, определенных в схеме индекса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-151">As noted, customized scoring is implemented through scoring profiles defined in an index schema.</span></span>

<span data-ttu-id="02dd5-152">В этом примере показана схема индекса с двумя профилями оценки (`boostGenre`, `newAndHighlyRated`).</span><span class="sxs-lookup"><span data-stu-id="02dd5-152">This example shows the schema of an index with two scoring profiles (`boostGenre`, `newAndHighlyRated`).</span></span> <span data-ttu-id="02dd5-153">Любой запрос к этому индексу, включающий профиль в качестве параметра запроса, будет использовать профиль для оценки результирующего набора.</span><span class="sxs-lookup"><span data-stu-id="02dd5-153">Any query against this index that includes either profile as a query parameter will use the profile to score the result set.</span></span>

    {
      "name": "musicstoreindex",
      "fields": [
        { "name": "key", "type": "Edm.String", "key": true },
        { "name": "albumTitle", "type": "Edm.String" },
        { "name": "albumUrl", "type": "Edm.String", "filterable": false },
        { "name": "genre", "type": "Edm.String" },
        { "name": "genreDescription", "type": "Edm.String", "filterable": false },
        { "name": "artistName", "type": "Edm.String" },
        { "name": "orderableOnline", "type": "Edm.Boolean" },
        { "name": "rating", "type": "Edm.Int32" },
        { "name": "tags", "type": "Collection(Edm.String)" },
        { "name": "price", "type": "Edm.Double", "filterable": false },
        { "name": "margin", "type": "Edm.Int32", "retrievable": false },
        { "name": "inventory", "type": "Edm.Int32" },
        { "name": "lastUpdated", "type": "Edm.DateTimeOffset" }
      ],
      "scoringProfiles": [
        {
          "name": "boostGenre",
          "text": {
            "weights": {
              "albumTitle": 1.5,
              "genre": 5,
              "artistName": 2
            }
          }
        },
        {
          "name": "newAndHighlyRated",
          "functions": [
            {
              "type": "freshness",
              "fieldName": "lastUpdated",
              "boost": 10,
              "interpolation": "quadratic",
              "freshness": {
                "boostingDuration": "P365D"
              }
            },
            {
              "type": "magnitude",
              "fieldName": "rating",
              "boost": 10,
              "interpolation": "linear",
              "magnitude": {
                "boostingRangeStart": 1,
                "boostingRangeEnd": 5,
                "constantBoostBeyondRange": false
              }
            }
          ]
        }
      ],
      "suggesters": [
        {
          "name": "sg",
          "searchMode": "analyzingInfixMatching",
          "sourceFields": ["albumTitle", "artistName"]
        }
      ]
    }


## <a name="workflow"></a><span data-ttu-id="02dd5-154">Рабочий процесс</span><span class="sxs-lookup"><span data-stu-id="02dd5-154">Workflow</span></span>
<span data-ttu-id="02dd5-155">Чтобы реализовать пользовательское поведение оценки, добавьте профиль оценки в схему, которая определяет индекс.</span><span class="sxs-lookup"><span data-stu-id="02dd5-155">To implement custom scoring behavior, add a scoring profile to the schema that defines the index.</span></span> <span data-ttu-id="02dd5-156">В индексе может быть до 16 профилей оценки (см. статью [Ограничения поиска Azure](search-limits-quotas-capacity.md)), но в одном запросе можно указать только один профиль.</span><span class="sxs-lookup"><span data-stu-id="02dd5-156">You can have up to 16 scoring profiles within an index (see [Service Limits](search-limits-quotas-capacity.md)), but you can only specify one profile at time in any given query.</span></span>

<span data-ttu-id="02dd5-157">Начните с [шаблона](#bkmk_template) , приведенного в этой статье.</span><span class="sxs-lookup"><span data-stu-id="02dd5-157">Start with the [Template](#bkmk_template) provided in this topic.</span></span>

<span data-ttu-id="02dd5-158">Введите имя.</span><span class="sxs-lookup"><span data-stu-id="02dd5-158">Provide a name.</span></span> <span data-ttu-id="02dd5-159">Профили оценки не являются обязательными, но если вы добавите профиль, необходимо указать имя.</span><span class="sxs-lookup"><span data-stu-id="02dd5-159">Scoring profiles are optional, but if you add one, the name is required.</span></span> <span data-ttu-id="02dd5-160">Следуйте соглашениям об именовании полей (начинается с буквы, не содержит специальных символов и зарезервированных слов).</span><span class="sxs-lookup"><span data-stu-id="02dd5-160">Be sure to follow the naming conventions for fields (starts with a letter, avoids special characters and reserved words).</span></span> <span data-ttu-id="02dd5-161">Правила именования приведены в статье [Правила именования](http://msdn.microsoft.com/library/azure/dn857353.aspx) .</span><span class="sxs-lookup"><span data-stu-id="02dd5-161">See [Naming Rules](http://msdn.microsoft.com/library/azure/dn857353.aspx) for more information.</span></span>

<span data-ttu-id="02dd5-162">Текст профиля оценки состоит из взвешенных полей и функций.</span><span class="sxs-lookup"><span data-stu-id="02dd5-162">The body of the scoring profile is constructed from weighted fields and functions.</span></span>

### <a name="weights"></a><span data-ttu-id="02dd5-163">Weights</span><span class="sxs-lookup"><span data-stu-id="02dd5-163">Weights</span></span>
<span data-ttu-id="02dd5-164">Свойство `weights` профиля повышения содержит пары "имя–значение", которые назначают полю относительный вес.</span><span class="sxs-lookup"><span data-stu-id="02dd5-164">The `weights` property of a scoring profile specifies name-value pairs that assign a relative weight to a field.</span></span> <span data-ttu-id="02dd5-165">В [примере](#example)приоритет полей albumTitle, genre и artistName повышается на 1,5, 5 и 2 позиции соответственно.</span><span class="sxs-lookup"><span data-stu-id="02dd5-165">In the [Example](#example), the albumTitle, genre, and artistName fields are boosted 1.5, 5, and 2, respectively.</span></span> <span data-ttu-id="02dd5-166">Почему для поля genre приоритет повышен намного больше, чем для других полей?</span><span class="sxs-lookup"><span data-stu-id="02dd5-166">Why is genre boosted so much higher than the others?</span></span> <span data-ttu-id="02dd5-167">Если поиск выполняется в однородных данных (как в случае с genre в `musicstoreindex`), вам может потребоваться большая вариативность в относительных весах.</span><span class="sxs-lookup"><span data-stu-id="02dd5-167">If search is conducted over data that is somewhat homogeneous (as is the case with 'genre' in the `musicstoreindex`), you might need a larger variance in the relative weights.</span></span> <span data-ttu-id="02dd5-168">Например, в `musicstoreindex`«рок» появляется как жанр и в идентично сформулированных описаниях жанра.</span><span class="sxs-lookup"><span data-stu-id="02dd5-168">For example, in the `musicstoreindex`, 'rock' appears as both a genre and in identically phrased genre descriptions.</span></span> <span data-ttu-id="02dd5-169">Если жанр должен обладать большим весом, чем описание жанра, полю genre потребуется назначить гораздо больший относительный вес.</span><span class="sxs-lookup"><span data-stu-id="02dd5-169">If you want genre to outweigh genre description, the genre field will need a much higher relative weight.</span></span>

### <a name="functions"></a><span data-ttu-id="02dd5-170">Functions</span><span class="sxs-lookup"><span data-stu-id="02dd5-170">Functions</span></span>
<span data-ttu-id="02dd5-171">Функции используются, когда необходимы дополнительные вычисления для определенных контекстов.</span><span class="sxs-lookup"><span data-stu-id="02dd5-171">Functions are used when additional calculations are required for specific contexts.</span></span> <span data-ttu-id="02dd5-172">Допустимые типы функций: `freshness`, `magnitude`, `distance` и `tag`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-172">Valid function types are `freshness`, `magnitude`, `distance` and `tag`.</span></span> <span data-ttu-id="02dd5-173">Каждая функция имеет свои уникальные параметры.</span><span class="sxs-lookup"><span data-stu-id="02dd5-173">Each function has parameters that are unique to it.</span></span>

* <span data-ttu-id="02dd5-174">`freshness` следует использовать, если вам необходимо повысить приоритет нового или старого элемента в зависимости от его "возраста".</span><span class="sxs-lookup"><span data-stu-id="02dd5-174">`freshness` should be used when you want to boost by how new or old an item is.</span></span> <span data-ttu-id="02dd5-175">Эта функция может использоваться только с полями типа "дата и время" (`Edm.DataTimeOffset`).</span><span class="sxs-lookup"><span data-stu-id="02dd5-175">This function can only be used with datetime fields (`Edm.DataTimeOffset`).</span></span> <span data-ttu-id="02dd5-176">Обратите внимание, что атрибут `boostingDuration` используется только с функцией freshness.</span><span class="sxs-lookup"><span data-stu-id="02dd5-176">Note the `boostingDuration` attribute is used only with the freshness function.</span></span>
* <span data-ttu-id="02dd5-177">`magnitude` следует применять, когда требуется повысить приоритет элементов на основе числового значения.</span><span class="sxs-lookup"><span data-stu-id="02dd5-177">`magnitude` should be used when you want to boost based on how high or low a numeric value is.</span></span> <span data-ttu-id="02dd5-178">К сценариям, в которых может вызваться эта функция, относится повышение приоритета на основе прибыли, наибольшей цены, наименьшей цены или числа загрузок.</span><span class="sxs-lookup"><span data-stu-id="02dd5-178">Scenarios that call for this function include boosting by profit margin, highest price, lowest price, or a count of downloads.</span></span> <span data-ttu-id="02dd5-179">Можно задать обратный диапазон (от высоких оценок до низких), если результаты нужно отобразить в обратном порядке (например, повысить приоритет для элементов с более низкими ценами по сравнению с элементами с более высокими ценами).</span><span class="sxs-lookup"><span data-stu-id="02dd5-179">You can reverse the range, high to low, if you want the inverse pattern (for example, to boost lower-priced items more than higher-priced items).</span></span> <span data-ttu-id="02dd5-180">Если у вас есть диапазон цен от 100 до 1 доллара США, для параметров `boostingRangeStart` и `boostingRangeEnd` следует установить значения 100 и 1 соответственно, чтобы повысить приоритет для элементов с более низкими ценами.</span><span class="sxs-lookup"><span data-stu-id="02dd5-180">Given a range of prices from $100 to $1, you would set `boostingRangeStart` at 100 and `boostingRangeEnd` at 1 to boost the lower-priced items.</span></span> <span data-ttu-id="02dd5-181">Эта функция может использоваться только с полями типа double и integer.</span><span class="sxs-lookup"><span data-stu-id="02dd5-181">This function can only be used with double and integer fields.</span></span>
* <span data-ttu-id="02dd5-182">`distance` следует применять, чтобы повысить приоритет по близости или географическому расположению.</span><span class="sxs-lookup"><span data-stu-id="02dd5-182">`distance` should be used when you want to boost by proximity or geographic location.</span></span> <span data-ttu-id="02dd5-183">Эта функция может использоваться только с полями типа `Edm.GeographyPoint` .</span><span class="sxs-lookup"><span data-stu-id="02dd5-183">This function can only be used with `Edm.GeographyPoint` fields.</span></span>
* <span data-ttu-id="02dd5-184">`tag` следует применять, чтобы повысить приоритет по тегам, которые одновременно используются в документах и поисковых запросах.</span><span class="sxs-lookup"><span data-stu-id="02dd5-184">`tag` should be used when you want to boost by tags in common between documents and search queries.</span></span> <span data-ttu-id="02dd5-185">Эта функция может использоваться только с полями `Edm.String` и `Collection(Edm.String)`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-185">This function can only be used with `Edm.String` and `Collection(Edm.String)` fields.</span></span>

#### <a name="rules-for-using-functions"></a><span data-ttu-id="02dd5-186">Правила использования функции</span><span class="sxs-lookup"><span data-stu-id="02dd5-186">Rules for using functions</span></span>
* <span data-ttu-id="02dd5-187">Тип функции (freshness, magnitude, distance, tag) необходимо указывать в нижнем регистре.</span><span class="sxs-lookup"><span data-stu-id="02dd5-187">Function type (freshness, magnitude, distance, tag) must be lower case.</span></span>
* <span data-ttu-id="02dd5-188">Функции не могут содержать значения NULL или пустые значения.</span><span class="sxs-lookup"><span data-stu-id="02dd5-188">Functions cannot include null or empty values.</span></span> <span data-ttu-id="02dd5-189">В частности, если добавить поле fieldname, для него необходимо указать значение.</span><span class="sxs-lookup"><span data-stu-id="02dd5-189">Specifically, if you include fieldname, you have to set it to something.</span></span>
* <span data-ttu-id="02dd5-190">Функции можно применять только к фильтруемым полям.</span><span class="sxs-lookup"><span data-stu-id="02dd5-190">Functions can only be applied to filterable fields.</span></span> <span data-ttu-id="02dd5-191">Дополнительные сведения о фильтруемых полях см. в разделе [Создание индекса](search-api-2015-02-28-preview.md#CreateIndex).</span><span class="sxs-lookup"><span data-stu-id="02dd5-191">See [Create Index](search-api-2015-02-28-preview.md#CreateIndex) for more information about filterable fields.</span></span>
* <span data-ttu-id="02dd5-192">Функции могут применяться только к полям, определенным в коллекции полей индекса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-192">Functions can only be applied to fields that are defined in the fields collection of an index.</span></span>

<span data-ttu-id="02dd5-193">После определения индекса выполните построение индекса, загрузив схему индекса и документы.</span><span class="sxs-lookup"><span data-stu-id="02dd5-193">After the index is defined, build the index by uploading the index schema, followed by documents.</span></span> <span data-ttu-id="02dd5-194">Инструкции по этим операциям приведены в разделах [Создание индекса](search-api-2015-02-28-preview.md#CreateIndex) и [Добавление или обновление документов](search-api-2015-02-28-preview.md#AddOrUpdateDocuments).</span><span class="sxs-lookup"><span data-stu-id="02dd5-194">See [Create Index](search-api-2015-02-28-preview.md#CreateIndex) and [Add or Update Documents](search-api-2015-02-28-preview.md#AddOrUpdateDocuments) for instructions on these operations.</span></span> <span data-ttu-id="02dd5-195">После построения индекса вы получите функциональный профиль оценки, который работает с данными поиска.</span><span class="sxs-lookup"><span data-stu-id="02dd5-195">Once the index is built, you should have a functional scoring profile that works with your search data.</span></span>

<a name="bkmk_template"></a>

## <a name="template"></a><span data-ttu-id="02dd5-196">Шаблон</span><span class="sxs-lookup"><span data-stu-id="02dd5-196">Template</span></span>
<span data-ttu-id="02dd5-197">В этом разделе показан синтаксис и шаблон для профилей оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-197">This section shows the syntax and template for scoring profiles.</span></span> <span data-ttu-id="02dd5-198">Описание атрибутов см. в подразделе [Справочник по атрибутам индекса](#bkmk_indexref) в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="02dd5-198">Refer to [Index attribute reference](#bkmk_indexref) in the next section for descriptions of the attributes.</span></span>

    ...
    "scoringProfiles": [
      {
        "name": "name of scoring profile",
        "text": (optional, only applies to searchable fields) {
          "weights": {
            "searchable_field_name": relative_weight_value (positive #'s),
            ...
          }
        },
        "functions": (optional) [
          {
            "type": "magnitude | freshness | distance | tag",
            "boost": # (positive number used as multiplier for raw score != 1),
            "fieldName": "...",
            "interpolation": "constant | linear (default) | quadratic | logarithmic",

            "magnitude": {
              "boostingRangeStart": #,
              "boostingRangeEnd": #,
              "constantBoostBeyondRange": true | false (default)
            }

            // (- or -)

            "freshness": {
              "boostingDuration": "..." (value representing timespan over which boosting occurs)
            }

            // (- or -)

            "distance": {
              "referencePointParameter": "...", (parameter to be passed in queries to use as reference location)
              "boostingDistance": # (the distance in kilometers from the reference location where the boosting range ends)
            }

            // (- or -)

            "tag": {
              "tagsParameter": "..." (parameter to be passed in queries to specify list of tags to compare against target field)
            }
          }
        ],
        "functionAggregation": (optional, applies only when functions are specified)
            "sum (default) | average | minimum | maximum | firstMatching"
      }
    ],
    "defaultScoringProfile": (optional) "...",
    ...

<a name="bkmk_indexref"></a>

## <a name="scoring-profile-property-reference"></a><span data-ttu-id="02dd5-199">Справочник по свойствам профиля повышения</span><span class="sxs-lookup"><span data-stu-id="02dd5-199">Scoring profile property reference</span></span>
> [!NOTE]
> <span data-ttu-id="02dd5-200">Функция оценки может применяться только к фильтруемым полям.</span><span class="sxs-lookup"><span data-stu-id="02dd5-200">A scoring function can only be applied to fields that are filterable.</span></span>
>
>

| <span data-ttu-id="02dd5-201">Свойство</span><span class="sxs-lookup"><span data-stu-id="02dd5-201">Property</span></span> | <span data-ttu-id="02dd5-202">Описание</span><span class="sxs-lookup"><span data-stu-id="02dd5-202">Description</span></span> |
| --- | --- |
| `name` |<span data-ttu-id="02dd5-203">обязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="02dd5-203">Required.</span></span> <span data-ttu-id="02dd5-204">Это имя профиля оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-204">This is the name of the scoring profile.</span></span> <span data-ttu-id="02dd5-205">К нему применяются те же соглашения об именовании, что и к полям.</span><span class="sxs-lookup"><span data-stu-id="02dd5-205">It follows the same naming conventions of a field.</span></span> <span data-ttu-id="02dd5-206">Оно должно начинаться с буквы, не может содержать точки, двоеточия и символы "@", а также не может начинаться с фразы azureSearch (с учетом регистра).</span><span class="sxs-lookup"><span data-stu-id="02dd5-206">It must start with a letter, cannot contain dots, colons or @ symbols, and cannot start with the phrase "azureSearch" (case-sensitive).</span></span> |
| `text` |<span data-ttu-id="02dd5-207">Содержит свойство Weights (Весовые коэффициенты).</span><span class="sxs-lookup"><span data-stu-id="02dd5-207">Contains the Weights property.</span></span> |
| `weights` |<span data-ttu-id="02dd5-208">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="02dd5-208">Optional.</span></span> <span data-ttu-id="02dd5-209">Пара "имя-значение", указывающая имя поля и относительный вес.</span><span class="sxs-lookup"><span data-stu-id="02dd5-209">A name-value pair that specifies a field name and relative weight.</span></span> <span data-ttu-id="02dd5-210">Относительный вес должен быть положительным целым числом или числом с плавающей запятой.</span><span class="sxs-lookup"><span data-stu-id="02dd5-210">Relative weight must be a positive integer or floating-point number.</span></span> <span data-ttu-id="02dd5-211">Можно указать имя поля без соответствующего веса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-211">You can specify the field name without a corresponding weight.</span></span> <span data-ttu-id="02dd5-212">Весовые коэффициенты используются для указания важности одного поля относительно другого.</span><span class="sxs-lookup"><span data-stu-id="02dd5-212">Weights are used to indicate the importance of one field relative to another.</span></span> |
| `functions` |<span data-ttu-id="02dd5-213">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="02dd5-213">Optional.</span></span> <span data-ttu-id="02dd5-214">Учтите, что функция оценки может применяться только к фильтруемым полям.</span><span class="sxs-lookup"><span data-stu-id="02dd5-214">Note that a scoring function can only be applied to fields that are filterable.</span></span> |
| `type` |<span data-ttu-id="02dd5-215">Требуется для функций оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-215">Required for scoring functions.</span></span> <span data-ttu-id="02dd5-216">Указывает тип используемой функции.</span><span class="sxs-lookup"><span data-stu-id="02dd5-216">Indicates the type of function to use.</span></span> <span data-ttu-id="02dd5-217">Допустимые значения: `magnitude`, `freshness`, `distance` и `tag`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-217">Valid values include `magnitude`, `freshness`, `distance` and `tag`.</span></span> <span data-ttu-id="02dd5-218">В каждый профиль оценки можно включить несколько функций.</span><span class="sxs-lookup"><span data-stu-id="02dd5-218">You can include more than one function in each scoring profile.</span></span> <span data-ttu-id="02dd5-219">Имя функции должно состоять из строчных букв.</span><span class="sxs-lookup"><span data-stu-id="02dd5-219">The function name must be lower case.</span></span> |
| `boost` |<span data-ttu-id="02dd5-220">Требуется для функций оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-220">Required for scoring functions.</span></span> <span data-ttu-id="02dd5-221">Положительное число, используемое в качестве множителя для необработанной оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-221">A positive number used as multiplier for raw score.</span></span> <span data-ttu-id="02dd5-222">Не может быть равно 1.</span><span class="sxs-lookup"><span data-stu-id="02dd5-222">It cannot be equal to 1.</span></span> |
| `fieldName` |<span data-ttu-id="02dd5-223">Требуется для функций оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-223">Required for scoring functions.</span></span> <span data-ttu-id="02dd5-224">Функция оценки может применяться только к фильтруемым полям, входящим в коллекцию полей индекса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-224">A scoring function can only be applied to fields that are part of the field collection of the index, and that are filterable.</span></span> <span data-ttu-id="02dd5-225">Кроме того, каждый тип функции накладывает дополнительные ограничения (freshness используется с полями типа datetime, magnitude — с полями типа integer или double, distance — с полями типа location, а tag — с полями типа string или string collection).</span><span class="sxs-lookup"><span data-stu-id="02dd5-225">In addition, each function type introduces additional restrictions (freshness is used with datetime fields, magnitude with integer or double fields, distance with location fields and tag with string or string collection fields).</span></span> <span data-ttu-id="02dd5-226">В определении функции можно указать только одно поле.</span><span class="sxs-lookup"><span data-stu-id="02dd5-226">You can only specify a single field per function definition.</span></span> <span data-ttu-id="02dd5-227">Например, чтобы использовать функцию magnitude дважды в одном профиле, необходимо добавить два определения magnitude (по одному для каждого поля).</span><span class="sxs-lookup"><span data-stu-id="02dd5-227">For example, to use magnitude twice in the same profile, you would need to include two definitions magnitude, one for each field.</span></span> |
| `interpolation` |<span data-ttu-id="02dd5-228">Требуется для функций оценки.</span><span class="sxs-lookup"><span data-stu-id="02dd5-228">Required for scoring functions.</span></span> <span data-ttu-id="02dd5-229">Определяет наклон для повышения приоритета оценки от начала до конца диапазона.</span><span class="sxs-lookup"><span data-stu-id="02dd5-229">Defines the slope for which the score boosting increases from the start of the range to the end of the range.</span></span> <span data-ttu-id="02dd5-230">Допустимые значения: `linear` (по умолчанию), `constant`, `quadratic` и `logarithmic`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-230">Valid values include `linear` (default), `constant`, `quadratic`, and `logarithmic`.</span></span> <span data-ttu-id="02dd5-231">Дополнительные сведения см. в разделе [Настройка интерполяций](#bkmk_interpolation).</span><span class="sxs-lookup"><span data-stu-id="02dd5-231">See [Set interpolations](#bkmk_interpolation) for details.</span></span> |
| `magnitude` |<span data-ttu-id="02dd5-232">Функция оценки magnitude используется для изменения рейтинга на основе диапазона значений для числового поля.</span><span class="sxs-lookup"><span data-stu-id="02dd5-232">The magnitude scoring function is used to alter rankings based on the range of values for a numeric field.</span></span> <span data-ttu-id="02dd5-233">Ниже приведены некоторые наиболее распространенные примеры.</span><span class="sxs-lookup"><span data-stu-id="02dd5-233">Some of the most common usage examples of this are:</span></span><ul><li><span data-ttu-id="02dd5-234">Оценка по звездам: изменение оценки на основе значения в поле "Оценка по звездам".</span><span class="sxs-lookup"><span data-stu-id="02dd5-234">Star ratings: Alter the scoring based on the value within the "Star Rating" field.</span></span> <span data-ttu-id="02dd5-235">Если релевантны два элемента, первым отобразится элемент с более высокой оценкой.</span><span class="sxs-lookup"><span data-stu-id="02dd5-235">When two items are relevant, the item with the higher rating will be displayed first.</span></span></li><li><span data-ttu-id="02dd5-236">Маржа: если релевантны два документа, то розничный торговец может повышать приоритет документов с более высокой маржой.</span><span class="sxs-lookup"><span data-stu-id="02dd5-236">Margin: When two documents are relevant, a retailer may wish to boost documents that have higher margins first.</span></span></li><li><span data-ttu-id="02dd5-237">Число переходов: для приложений, которые отслеживают переходы к продуктам или страницам, можно использовать функцию magnitude для повышения приоритета элементов, которые могут привлекать более высокий трафик.</span><span class="sxs-lookup"><span data-stu-id="02dd5-237">Click counts: For applications that track click through actions to products or pages, you could use magnitude to boost items that tend to get the most traffic.</span></span></li><li><span data-ttu-id="02dd5-238">Число скачиваний: для приложений, которые отслеживают скачивания, функция magnitude позволяет повысить приоритет элементов с наибольшим числом скачиваний.</span><span class="sxs-lookup"><span data-stu-id="02dd5-238">Download counts: For applications that track downloads, the magnitude function lets you boost items that have the most downloads.</span></span></li></ul> |
| `magnitude:boostingRangeStart` |<span data-ttu-id="02dd5-239">Задает начальное значение диапазона, на основе которого вычисляется результат функции magnitude.</span><span class="sxs-lookup"><span data-stu-id="02dd5-239">Sets the start value of the range over which magnitude is scored.</span></span> <span data-ttu-id="02dd5-240">Значение должно быть целым числом или числом с плавающей запятой.</span><span class="sxs-lookup"><span data-stu-id="02dd5-240">The value must be an integer or floating-point number.</span></span> <span data-ttu-id="02dd5-241">Для оценок по звездам от 1 до 4 — 1.</span><span class="sxs-lookup"><span data-stu-id="02dd5-241">For star ratings of 1 through 4, this would be 1.</span></span> <span data-ttu-id="02dd5-242">Для маржи более 50 % — 50.</span><span class="sxs-lookup"><span data-stu-id="02dd5-242">For margins over 50%, this would be 50.</span></span> |
| `magnitude:boostingRangeEnd` |<span data-ttu-id="02dd5-243">Задает конечное значение диапазона, на основе которого вычисляется результат функции magnitude.</span><span class="sxs-lookup"><span data-stu-id="02dd5-243">Sets the end value of the range over which magnitude is scored.</span></span> <span data-ttu-id="02dd5-244">Значение должно быть целым числом или числом с плавающей запятой.</span><span class="sxs-lookup"><span data-stu-id="02dd5-244">The value must be an integer or floating-point number.</span></span> <span data-ttu-id="02dd5-245">Для оценок по звездам от 1 до 4 — 4.</span><span class="sxs-lookup"><span data-stu-id="02dd5-245">For star ratings of 1 through 4, this would be 4.</span></span> |
| `magnitude:constantBoostBeyondRange` |<span data-ttu-id="02dd5-246">Допустимые значения: true или false (по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="02dd5-246">Valid values are true or false (default).</span></span> <span data-ttu-id="02dd5-247">Если задано значение true, к документам, содержащим значение целевого поля, превышающее верхнее ограничение диапазона, будет применяться максимальное повышение приоритета.</span><span class="sxs-lookup"><span data-stu-id="02dd5-247">When set to true, the full boost will continue to apply to documents that have a value for the target field that’s higher than the upper end of the range.</span></span> <span data-ttu-id="02dd5-248">Если задано значение false, эта функция не будет применяться к документам, содержащим значение целевого поля, которое не входит в диапазон.</span><span class="sxs-lookup"><span data-stu-id="02dd5-248">If false, the boost of this function won’t be applied to documents having a value for the target field that falls outside of the range.</span></span> |
| `freshness` |<span data-ttu-id="02dd5-249">Функция оценки freshness используется для оценки ранжирования элементов на основе значений в полях DateTimeOffset.</span><span class="sxs-lookup"><span data-stu-id="02dd5-249">The freshness scoring function is used to alter ranking scores for items based on values in DateTimeOffset fields.</span></span> <span data-ttu-id="02dd5-250">Например, элемент с более близкой датой может классифицироваться выше, чем старые элементы.</span><span class="sxs-lookup"><span data-stu-id="02dd5-250">For example, an item with a more recent date can be ranked higher than older items.</span></span> <span data-ttu-id="02dd5-251">(Обратите внимание, что ранжировать можно и такие элементы, как события календаря с будущими датами, в случае чего события, более близкие к текущей дате, получат более высокий ранг, чем события в будущем.) В текущем выпуске службы один конец диапазона фиксируется на текущее время.</span><span class="sxs-lookup"><span data-stu-id="02dd5-251">(Note that it is also possible to rank items like calendar events with future dates such that items closer to the present can be ranked higher than items further in the future.) In the current service release, one end of the range will be fixed to the current time.</span></span> <span data-ttu-id="02dd5-252">Чтобы повысить приоритет диапазона будущего времени, используйте отрицательное значение параметра `boostingDuration`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-252">The other end is a time in the past based on the `boostingDuration`.</span></span> <span data-ttu-id="02dd5-253">Чтобы повысить приоритет диапазона будущего времени, используйте отрицательное значение параметра `boostingDuration`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-253">To boost a range of times in the future use a negative `boostingDuration`.</span></span> <span data-ttu-id="02dd5-254">рисунок ниже).</span><span class="sxs-lookup"><span data-stu-id="02dd5-254">The rate at which the boosting changes from a maximum and minimum range is determined by the Interpolation applied to the scoring profile (see the figure below).</span></span> <span data-ttu-id="02dd5-255">Чтобы изменить направление коэффициента повышения приоритета, выберите коэффициент повышения приоритета меньше 1.</span><span class="sxs-lookup"><span data-stu-id="02dd5-255">To reverse the boosting factor applied, choose a boost factor of less than 1.</span></span> |
| `freshness:boostingDuration` |<span data-ttu-id="02dd5-256">Задает срок действия, после которого повышение приоритета перестает применяться для определенного документа.</span><span class="sxs-lookup"><span data-stu-id="02dd5-256">Sets an expiration period after which boosting will stop for a particular document.</span></span> <span data-ttu-id="02dd5-257">Синтаксис и примеры приведены далее в подразделе [Настройка boostingDuration](#bkmk_boostdur).</span><span class="sxs-lookup"><span data-stu-id="02dd5-257">See [Set boostingDuration](#bkmk_boostdur) in the following section for syntax and examples.</span></span> |
| `distance` |<span data-ttu-id="02dd5-258">Функция оценки distance используется, чтобы изменить оценку документов на основе их близости к эталонному географическому расположению.</span><span class="sxs-lookup"><span data-stu-id="02dd5-258">The distance scoring function is used to affect the score of documents based on how close or far they are relative to a reference geographic location.</span></span> <span data-ttu-id="02dd5-259">Эталонное расположение предоставляется как часть запроса в параметре (с помощью параметра запроса `scoringParameter` ) в аргументе lon,lat.</span><span class="sxs-lookup"><span data-stu-id="02dd5-259">The reference location is given as part of the query in a parameter (using the `scoringParameter` query parameter) as a lon,lat argument.</span></span> |
| `distance:referencePointParameter` |<span data-ttu-id="02dd5-260">Параметр, который передается в запросах и используется в качестве эталонного расположения.</span><span class="sxs-lookup"><span data-stu-id="02dd5-260">A parameter to be passed in queries to use as reference location.</span></span> <span data-ttu-id="02dd5-261">scoringParameter — это параметр запроса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-261">scoringParameter is a query parameter.</span></span> <span data-ttu-id="02dd5-262">Описание параметров запроса см. в разделе о [поиске документов](search-api-2015-02-28-preview.md#SearchDocs).</span><span class="sxs-lookup"><span data-stu-id="02dd5-262">See [Search Documents](search-api-2015-02-28-preview.md#SearchDocs) for descriptions of query parameters.</span></span> |
| `distance:boostingDistance` |<span data-ttu-id="02dd5-263">Число, которое задает расстояние в километрах от эталонного расположения, где заканчивается диапазон повышения приоритета.</span><span class="sxs-lookup"><span data-stu-id="02dd5-263">A number that indicates the distance in kilometers from the reference location where the boosting range ends.</span></span> |
| `tag` |<span data-ttu-id="02dd5-264">Функция оценки tag определяет оценку документов на основе тегов, имеющихся в документах и поисковых запросах.</span><span class="sxs-lookup"><span data-stu-id="02dd5-264">The tag scoring function is used to affect the score of documents based on tags in documents and search queries.</span></span> <span data-ttu-id="02dd5-265">Документы, в которых имеются общие с поисковыми запросами теги, получают более высокий приоритет.</span><span class="sxs-lookup"><span data-stu-id="02dd5-265">Documents that have tags in common with the search query will be boosted.</span></span> <span data-ttu-id="02dd5-266">Теги для каждого поискового запроса указываются в качестве параметра оценки (с помощью параметра запроса `scoringParameter` ).</span><span class="sxs-lookup"><span data-stu-id="02dd5-266">The tags for the search query is provided as a scoring parameter in each search request(using the `scoringParameter` query parameter).</span></span> |
| `tag:tagsParameter` |<span data-ttu-id="02dd5-267">Параметр, который передается в запросах для указания тегов определенного запроса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-267">A parameter to be passed in queries to specify tags for a particular request.</span></span> <span data-ttu-id="02dd5-268">`scoringParameter` — это параметр запроса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-268">`scoringParameter` is a query parameter.</span></span> <span data-ttu-id="02dd5-269">Описание параметров запроса см. в разделе о [поиске документов](search-api-2015-02-28-preview.md#SearchDocs).</span><span class="sxs-lookup"><span data-stu-id="02dd5-269">See [Search Documents](search-api-2015-02-28-preview.md#SearchDocs) for descriptions of query parameters.</span></span> |
| `functionAggregation` |<span data-ttu-id="02dd5-270">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="02dd5-270">Optional.</span></span> <span data-ttu-id="02dd5-271">Применяется, только если указаны функции.</span><span class="sxs-lookup"><span data-stu-id="02dd5-271">Applies only when functions are specified.</span></span> <span data-ttu-id="02dd5-272">Допустимые значения: `sum` (по умолчанию), `average`, `minimum`, `maximum` и `firstMatching`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-272">Valid values include: `sum` (default), `average`, `minimum`, `maximum`, and `firstMatching`.</span></span> <span data-ttu-id="02dd5-273">Оценка поиска — это одиночное значение, которое вычисляется на основе нескольких переменных, включая несколько функций.</span><span class="sxs-lookup"><span data-stu-id="02dd5-273">A search score is a single value that is computed from multiple variables, including multiple functions.</span></span> <span data-ttu-id="02dd5-274">Эти атрибуты показывают, как значения повышения приоритета всех функций объединяются в единое агрегированное повышение приоритета, которое затем применяется к базовой оценке документа.</span><span class="sxs-lookup"><span data-stu-id="02dd5-274">This attributes indicates how the boosts of all the functions are combined into a single aggregate boost that is then applied to the base document score.</span></span> <span data-ttu-id="02dd5-275">Базовая оценка основана на значении tf-idf, которое вычисляется на основе документа и поискового запроса.</span><span class="sxs-lookup"><span data-stu-id="02dd5-275">The base score is based on the tf-idf value computed from the document and the search query.</span></span> |
| `defaultScoringProfile` |<span data-ttu-id="02dd5-276">Если при выполнении поискового запроса профиль оценки не указан, используется оценка по умолчанию (только tf-idf).</span><span class="sxs-lookup"><span data-stu-id="02dd5-276">When executing a search request, if no scoring profile is specified, then default scoring is used (tf-idf only).</span></span> <span data-ttu-id="02dd5-277">Здесь можно указать имя профиля оценки по умолчанию, после чего служба "Поиск Azure" будет использовать его, если в поисковом запросе на задан другой профиль.</span><span class="sxs-lookup"><span data-stu-id="02dd5-277">A default scoring profile name can be set here, causing Azure Search to use that profile when no specific profile is given in the search request.</span></span> |

<a name="bkmk_interpolation"></a>

## <a name="set-interpolations"></a><span data-ttu-id="02dd5-278">Настройка интерполяций</span><span class="sxs-lookup"><span data-stu-id="02dd5-278">Set interpolations</span></span>
<span data-ttu-id="02dd5-279">Интерполяции позволяют определить наклон для повышения приоритета оценки от начала до конца диапазона.</span><span class="sxs-lookup"><span data-stu-id="02dd5-279">Interpolations allow you to define the slope for which the score boosting increases from the start of the range to the end of the range.</span></span> <span data-ttu-id="02dd5-280">Можно использовать следующие типы интерполяции.</span><span class="sxs-lookup"><span data-stu-id="02dd5-280">The following interpolations can be used:</span></span>

* <span data-ttu-id="02dd5-281">`Linear`: для элементов, которые находятся в диапазоне от минимального до максимального значения, применяется постоянно убывающая величина.</span><span class="sxs-lookup"><span data-stu-id="02dd5-281">`Linear`: For items that are within the max and min range, the boost applied to the item will be done in a constantly decreasing amount.</span></span> <span data-ttu-id="02dd5-282">Линейная интерполяция — это интерполяция для оценки профиля по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="02dd5-282">Linear is the default interpolation for a scoring profile.</span></span>
* <span data-ttu-id="02dd5-283">`Constant`: для элементов, которые находятся между начальным и конечным диапазонами, к результатам ранжирования применяется постоянное повышение приоритета.</span><span class="sxs-lookup"><span data-stu-id="02dd5-283">`Constant`: For items that are within the start and ending range, a constant boost will be applied to the rank results.</span></span>
* <span data-ttu-id="02dd5-284">`Quadratic`: по сравнению с линейной интерполяцией с постоянно убывающим повышением приоритета квадратичная интерполяционная функция сначала уменьшается не так быстро, а по мере приближения к конечному диапазону уменьшается на гораздо большую величину.</span><span class="sxs-lookup"><span data-stu-id="02dd5-284">`Quadratic`: In comparison to a Linear interpolation that has a constantly decreasing boost, Quadratic will initially decrease at smaller pace and then as it approaches the end range, it decreases at a much higher interval.</span></span> <span data-ttu-id="02dd5-285">Этот тип интерполяции невозможно использовать в функциях оценки tag.</span><span class="sxs-lookup"><span data-stu-id="02dd5-285">This interpolation option is not allowed in tag scoring functions.</span></span>
* <span data-ttu-id="02dd5-286">`Logarithmic`: по сравнению с линейной интерполяцией с постоянно убывающим повышением приоритета логарифмическая интерполяционная функция сначала уменьшается быстрее, а по мере приближения к конечному диапазону уменьшается на гораздо меньшую величину.</span><span class="sxs-lookup"><span data-stu-id="02dd5-286">`Logarithmic`: In comparison to a Linear interpolation that has a constantly decreasing boost, Logarithmic will initially decrease at higher pace and then as it approaches the end range, it decreases at a much smaller interval.</span></span> <span data-ttu-id="02dd5-287">Этот тип интерполяции невозможно использовать в функциях оценки tag.</span><span class="sxs-lookup"><span data-stu-id="02dd5-287">This interpolation option is not allowed in tag scoring functions.</span></span>

<span data-ttu-id="02dd5-288"><a name="Figure1"></a> ![][1]</span><span class="sxs-lookup"><span data-stu-id="02dd5-288"><a name="Figure1"></a> ![][1]</span></span>

<a name="bkmk_boostdur"></a>

## <a name="set-boostingduration"></a><span data-ttu-id="02dd5-289">Настройка boostingDuration</span><span class="sxs-lookup"><span data-stu-id="02dd5-289">Set boostingDuration</span></span>
<span data-ttu-id="02dd5-290">`boostingDuration` — это атрибут функции freshness.</span><span class="sxs-lookup"><span data-stu-id="02dd5-290">`boostingDuration` is an attribute of the freshness function.</span></span> <span data-ttu-id="02dd5-291">Он задает срок действия, после которого повышение приоритета перестает применяться для определенного документа.</span><span class="sxs-lookup"><span data-stu-id="02dd5-291">You use it to set an expiration period after which boosting will stop for a particular document.</span></span> <span data-ttu-id="02dd5-292">Например, для повышения приоритета линейки продуктов или торговой марки в течение 10-дневного периода следует указать для соответствующих документов 10-дневный период как "P10D".</span><span class="sxs-lookup"><span data-stu-id="02dd5-292">For example, to boost a product line or brand for a 10-day promotional period, you would specify the 10-day period as "P10D" for those documents.</span></span> <span data-ttu-id="02dd5-293">А чтобы повысить приоритет событий, предстоящих на следующей неделе, укажите значение -P7D.</span><span class="sxs-lookup"><span data-stu-id="02dd5-293">Or to boost upcoming events in the next week specify "-P7D".</span></span>

<span data-ttu-id="02dd5-294">`boostingDuration` необходимо отформатировать как XSD-значение dayTimeDuration (ограниченное подмножество значения длительности ISO 8601).</span><span class="sxs-lookup"><span data-stu-id="02dd5-294">`boostingDuration` must be formatted as an XSD "dayTimeDuration" value (a restricted subset of an ISO 8601 duration value).</span></span> <span data-ttu-id="02dd5-295">Используется следующий шаблон: `[-]P[nD][T[nH][nM][nS]]`.</span><span class="sxs-lookup"><span data-stu-id="02dd5-295">The pattern for this is: `[-]P[nD][T[nH][nM][nS]]`.</span></span>

<span data-ttu-id="02dd5-296">Следующая таблица содержит несколько примеров.</span><span class="sxs-lookup"><span data-stu-id="02dd5-296">The following table provides several examples.</span></span>

| <span data-ttu-id="02dd5-297">Длительность</span><span class="sxs-lookup"><span data-stu-id="02dd5-297">Duration</span></span> | <span data-ttu-id="02dd5-298">boostingDuration</span><span class="sxs-lookup"><span data-stu-id="02dd5-298">boostingDuration</span></span> |
| --- | --- |
| <span data-ttu-id="02dd5-299">1 день</span><span class="sxs-lookup"><span data-stu-id="02dd5-299">1 day</span></span> |<span data-ttu-id="02dd5-300">"P1D"</span><span class="sxs-lookup"><span data-stu-id="02dd5-300">"P1D"</span></span> |
| <span data-ttu-id="02dd5-301">2 дня и 12 часов</span><span class="sxs-lookup"><span data-stu-id="02dd5-301">2 days and 12 hours</span></span> |<span data-ttu-id="02dd5-302">"P2DT12H"</span><span class="sxs-lookup"><span data-stu-id="02dd5-302">"P2DT12H"</span></span> |
| <span data-ttu-id="02dd5-303">15 минут</span><span class="sxs-lookup"><span data-stu-id="02dd5-303">15 minutes</span></span> |<span data-ttu-id="02dd5-304">"PT15M"</span><span class="sxs-lookup"><span data-stu-id="02dd5-304">"PT15M"</span></span> |
| <span data-ttu-id="02dd5-305">30 дней, 5 часов, 10 минут и 6,334 секунды</span><span class="sxs-lookup"><span data-stu-id="02dd5-305">30 days, 5 hours, 10 minutes, and 6.334 seconds</span></span> |<span data-ttu-id="02dd5-306">"P30DT5H10M6.334S"</span><span class="sxs-lookup"><span data-stu-id="02dd5-306">"P30DT5H10M6.334S"</span></span> |

<span data-ttu-id="02dd5-307">Дополнительные примеры см. в [документе о типах данных в схеме XML (веб-сайт W3.org)](http://www.w3.org/TR/xmlschema11-2/).</span><span class="sxs-lookup"><span data-stu-id="02dd5-307">For more examples, see [XML Schema: Datatypes (W3.org web site)](http://www.w3.org/TR/xmlschema11-2/).</span></span>

<span data-ttu-id="02dd5-308">**Ознакомьтесь также с разделом** 
[Azure Search Service REST](http://msdn.microsoft.com/library/azure/dn798935.aspx) (REST службы поиска Azure) на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="02dd5-308">**See Also**
[Azure Search Service REST API](http://msdn.microsoft.com/library/azure/dn798935.aspx) on MSDN</span></span> <br/><span data-ttu-id="02dd5-309">
[Создание индекса (API Поиска Azure)](http://msdn.microsoft.com/library/azure/dn798941.aspx) (на сайте MSDN).</span><span class="sxs-lookup"><span data-stu-id="02dd5-309">
[Create Index (Azure Search API)](http://msdn.microsoft.com/library/azure/dn798941.aspx) on MSDN</span></span><br/><span data-ttu-id="02dd5-310">
[Добавление профиля оценки в индекс поиска](http://msdn.microsoft.com/library/azure/dn798928.aspx) (на сайте MSDN).</span><span class="sxs-lookup"><span data-stu-id="02dd5-310">
[Add a scoring profile to a search index](http://msdn.microsoft.com/library/azure/dn798928.aspx) on MSDN</span></span><br/>

<!--Image references-->
[1]: ./media/search-api-scoring-profiles-2015-02-28-Preview/scoring_interpolations.png
