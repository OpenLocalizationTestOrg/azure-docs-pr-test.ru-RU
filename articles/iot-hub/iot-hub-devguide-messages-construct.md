---
title: "Формат сообщения aaaUnderstand центр IoT Azure | Документы Microsoft"
description: "Руководстве для разработчиков - формат descibes hello и ожидаемое содержимое сообщений центр IoT."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 3fc5f1a3-3711-4611-9897-d4db079b4250
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/25/2017
ms.author: dobett
ms.openlocfilehash: 3b1567e47bc32f70c0c252996648c4035ae81243
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-and-read-iot-hub-messages"></a>Создание и чтение сообщений Центра Интернета вещей

toosupport взаимодействием между протоколами, центр IoT определяет общий формат сообщений для всех устройств с выходом протоколов. Этот формат сообщения используется для сообщений, передаваемых [с устройства в облако][lnk-d2c] и [из облака на устройство][lnk-c2d]. [Сообщение Центра Интернета вещей][lnk-messaging] состоит из следующих компонентов.

* Набор *свойств системы*. Свойства, которые интерпретирует или задает Центр Интернета вещей. Этот набор определяется предварительно.
* Набор *свойств приложения*. Словарь строковых свойств, определяющих приложение hello и доступом, без необходимости toodeserialize тело сообщения hello. Центр IoT никогда не изменяет эти свойства.
* Непрозрачная двоичная основная часть.

Имена и значения свойств могут содержать только буквенно-цифровые символы ASCII и символы ``{'!', '#', '$', '%, '&', "'", '*', '*', '+', '-', '.', '^', '_', '`', '|', '~'}`` при

* Отправка сообщения из устройства в облако с помощью протокола HTTP hello.
* Отправка сообщений из облака на устройство.

Дополнительные сведения о том, как tooencode и декодирования сообщений, отправляемых с помощью различных протоколов см. в разделе [пакеты SDK Azure IoT][lnk-sdks].

Привет, в следующей таблице перечислены hello набор системных свойств в сообщениях центр IoT.

| Свойство | Description (Описание) |
| --- | --- |
| MessageId |Задаваемое пользователем идентификатор сообщения hello для шаблонов запрос ответ. Формат: Строк с учетом регистра (вверх too128 символов) буквенно-цифровых символов ASCII 7-разрядных + `{'-', ':',’.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`. |
| Порядковый номер |Число (уникальным для каждого устройства очереди), назначаемые сообщение облака на устройство tooeach центр IoT. |
| слишком|Место назначения, которое указывается в сообщениях, отправляемых [из облака на устройство][lnk-c2d]. |
| ExpiryTimeUtc |Дата и время истечения срока действия сообщения. |
| EnqueuedTime |Дата и время hello [облака на устройство] [ lnk-c2d] IoT Hub было получено сообщение. |
| CorrelationId |Строковое свойство в сообщении ответа, который обычно содержит hello MessageId hello запроса, в шаблонах запрос ответ. |
| UserId |Идентификатор, используемый toospecify hello источника сообщения. При сообщения создаются в IoT Hub, задано слишком`{iot hub name}`. |
| Ack |Генератор отзывов на сообщения. Это свойство используется в сообщениях сообщения облака на устройство toorequest центр IoT toogenerate отзывы в результате использования hello сообщения hello устройством hello. Возможные значения: **нет** (по умолчанию): сообщение с отзывом создается, **положительное**: получено сообщение обратной связи, если была выполнена приветственное сообщение, **отрицательное**: получение отзыв сообщение, если истек срок действия сообщения hello (или достигнуто максимальное число доставок) без, выполняемой устройства hello или **полного**: положительные и отрицательные. Дополнительные сведения см. в разделе [Отзыв на сообщение][lnk-feedback]. |
| ConnectionDeviceId |Центр IoT устанавливает этот идентификатор в сообщениях, отправляемых с устройства в облако. Он содержит hello **deviceId** hello устройства, который отправил сообщение hello. |
| ConnectionDeviceGenerationId |Центр IoT устанавливает этот идентификатор в сообщениях, отправляемых с устройства в облако. Он содержит hello **generationId** (согласно [свойства удостоверения устройства][lnk-device-properties]) hello устройства, который отправил сообщение hello. |
| ConnectionAuthMethod |Центр IoT устанавливает этот метод проверки подлинности в сообщениях, отправляемых с устройства в облако. Это свойство содержит сведения о hello проверки подлинности используется метод tooauthenticate hello устройство отправляет сообщение hello. Дополнительные сведения см. в разделе [защиты устройства toocloud от подмены][lnk-antispoofing]. |

## <a name="message-size"></a>Размер сообщения

Центр IoT Измеряет размер сообщения в виде зависит от протокола, учитывая только hello, фактически применяемые полезные данные. Hello размер в байтах вычисляется как сумма hello hello следующее:

* размер текста Hello в байтах.
* Hello размер в байтах всех значений hello системных свойств сообщение hello.
* Hello размер в байтах всех пользователей имена и значения свойств.

Имена и значения свойств являются символы ограниченный tooASCII, поэтому hello, длина строк hello равна hello размер в байтах.

## <a name="next-steps"></a>Дальнейшие действия

Сведения об ограничениях на размер сообщений в Центре Интернета вещей см. в справочнике [по квотам и регулированию Центра Интернета вещей][lnk-quotas].

toolearn toocreate и чтения сообщений центра IoT на различных языках программирования, в статье hello [начать] [ lnk-get-started] учебники.

[lnk-messaging]: iot-hub-devguide-messaging.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-get-started]: iot-hub-get-started.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-c2d]: iot-hub-devguide-messages-c2d.md
[lnk-d2c]: iot-hub-devguide-messages-d2c.md
[lnk-feedback]: iot-hub-devguide-messages-c2d.md#message-feedback
[lnk-device-properties]: iot-hub-devguide-identity-registry.md#device-identity-properties
[lnk-antispoofing]: iot-hub-devguide-messages-d2c.md#anti-spoofing-properties
