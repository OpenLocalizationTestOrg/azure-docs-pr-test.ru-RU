---
title: "методы прямой aaaUnderstand центр IoT Azure | Документы Microsoft"
description: "Руководство разработчика - использовать прямые методы tooinvoke код на устройствах из приложения службы."
services: iot-hub
documentationcenter: .net
author: nberdy
manager: timlt
editor: 
ms.assetid: 9f0535f1-02e6-467a-9fc4-c0950702102d
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/25/2017
ms.author: nberdy
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0d15d44a0c3e1d1cda1669c1ed011c2f932e3d92
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understand-and-invoke-direct-methods-from-iot-hub"></a>Общие сведения о прямых методах и информация о вызове этих методов из Центра Интернета вещей
## <a name="overview"></a>Обзор
Центр IoT дает возможность tooinvoke непосредственные методы на устройствах из облака hello. Непосредственные методы представляют взаимодействия запрос ответ с аналогичные tooan устройства, вызовите HTTP, в том, что они завершаются успехом или сбоем немедленно (после указанного пользователем времени ожидания). Это полезно в сценариях, где hello набор действий, немедленно отличается в зависимости от того, было ли устройство hello может toorespond, например отправлять SMS tooa пробуждения устройства, если устройство находится в автономном режиме (SMS, дороже, чем вызов метода).

Каждый метод устройства предназначен для одного устройства. [Задания] [ lnk-devguide-jobs] предоставляют прямые методы tooinvoke способом на нескольких устройствах и запланировать вызов метода для отключенных устройств.

Любой пользователь с разрешениями на **подключение службы** в Центре Интернета вещей может вызвать метод на устройстве.

### <a name="when-toouse"></a>Когда toouse
Непосредственные методы соответствуют шаблону запрос ответ и предназначены для обмена данными, которые требуют немедленного подтверждения их результат обычно интерактивного управления hello устройства, например tooturn на вентилятора.

См. слишком[руководство связи облака на устройство] [ lnk-c2d-guidance] в случае неясностей между нужными свойствами с помощью прямой методов или сообщения облака на устройство.

## <a name="method-lifecycle"></a>Жизненный цикл метода
Прямой методы реализуются на устройстве hello и может потребовать ноль или более входов в полезных данных toocorrectly hello метод создания экземпляра. Вызов прямого метода осуществляется через обращенный к службе URI (`{iot hub}/twins/{device id}/methods/`). Устройство получает прямые методы через раздел MQTT для устройства (`$iothub/methods/POST/{method name}/`). Корпорация Майкрософт может поддерживает прямой методов на дополнительные сетевые протоколы стороне устройства в будущем hello.

> [!NOTE]
> При вызове прямого метода на устройстве, имена и значения свойств может содержать только печатаемые US-ASCII буквенно-цифровых, за исключением в следующий набор hello: ``{'$', '(', ')', '<', '>', '@', ',', ';', ':', '\', '"', '/', '[', ']', '?', '=', '{', '}', SP, HT}``.
> 
> 

Прямое синхронных методов и либо выполняются успешно или не истечет время ожидания hello (по умолчанию: 30 секунд, можно задать вверх too3600 секунд). Прямой методы полезны в интерактивных сценариев место tooact устройства только в том случае, если hello устройство находится в сети и получения команд, такие как включение индикатор с помощью мобильного телефона. В этих сценариях необходимо toosee немедленно успешное выполнение или сбой, как можно быстрее hello облачная служба может действовать на результат hello. Hello устройство может возвращать некоторые сообщения, в результате метод hello, но это не требуется для метода toodo hello. Упорядочивание или обеспечение какой-либо семантики параллелизма при вызове метода не гарантировано.

Прямой метод HTTP-только со стороны облачной hello и только со стороны устройства hello MQTT.

полезные данные Hello метод запросов и ответов является документ JSON вверх too8KB.

## <a name="reference-topics"></a>Справочные материалы
Hello следующие справочные разделы предоставляют дополнительные сведения об использовании непосредственные методы.

## <a name="invoke-a-direct-method-from-a-back-end-app"></a>Вызов прямого метода из серверного приложения
### <a name="method-invocation"></a>Вызов метода
Вызов прямого метода на устройстве является вызовом HTTP, включающим следующие элементы:

* Hello *URI* toohello конкретного устройства (`{iot hub}/twins/{device id}/methods/`)
* Hello POST *метод*
* *Заголовки* которого содержит hello авторизации, необходимо запросить идентификатор, тип содержимого и кодировку содержимого
* Прозрачный JSON *текст* в hello следующий формат:

```
{
    "methodName": "reboot",
    "responseTimeoutInSeconds": 200,
    "payload": {
        "input1": "someInput",
        "input2": "anotherInput"
    }
}
```

Время ожидания измеряется в секундах. Если время ожидания не задано, то по умолчанию too30 секунд.

### <a name="response"></a>Ответ
приложение Hello внутренней получает ответ, который включает в себя:

* *Код состояния HTTP*, который используется для ошибок, поступающих от hello центра IoT, включая ошибки 404 для устройств в настоящее время не подключен
* *Заголовки* которой содержат hello ETag, необходимо запросить идентификатор, тип содержимого и кодировку содержимого
* JSON *текст* в hello следующий формат:

```
{
    "status" : 201,
    "payload" : {...}
}
```

   Оба `status` и `body` предоставляются устройством hello и использовать toorespond с кодом состояния устройства собственные hello или описание.

## <a name="handle-a-direct-method-on-a-device"></a>Обработка прямого метода на устройстве
### <a name="method-invocation"></a>Вызов метода
Прямой метод запросов на разделе MQTT hello получение устройств:`$iothub/methods/POST/{method name}/?$rid={request id}`

текст Hello, какое устройство hello получает имеет hello следующий формат:

```
{
    "input1": "someInput",
    "input2": "anotherInput"
}
```

Запросы метода имеют нулевой уровень качества обслуживания.

### <a name="response"></a>Ответ
Hello устройство отправляет ответы слишком`$iothub/methods/res/{status}/?$rid={request id}`, где:

* Hello `status` свойство — hello устройства указано состояние выполнения метода.
* Hello `$rid` свойство является идентификатор запроса hello из вызова метода hello, полученный от центра IoT.

текст Hello задается hello устройства и может быть любым состоянием.

## <a name="additional-reference-material"></a>Дополнительные справочные материалы
Другие разделы ссылку в hello центра IoT руководстве для разработчиков:

* [Конечные точки центра IoT] [ lnk-endpoints] описывает hello различные конечные точки, предоставляемые каждый центр IoT для операций времени выполнения и управления.
* [Регулирование и квоты] [ lnk-quotas] сведения о квотах hello, применять toohello службы центр IoT и hello регулирования tooexpect поведение при использовании службы hello.
* [Пакеты SDK устройств и служб Azure IoT] [ lnk-sdks] списки hello языка различных пакетов SDK, которые можно использовать при разработке приложений, устройств и служб, которые взаимодействуют с центром IoT.
* [Центр IoT язык запросов для близнецы устройства, задания и маршрутизация сообщений] [ lnk-query] описывает hello tooretrieve сведения из центра IoT близнецы устройства и заданий можно использовать язык запросов центра IoT.
* [Поддержка MQTT концентратора IoT] [ lnk-devguide-mqtt] приведены более подробные сведения о поддержке центра IoT протокола MQTT hello.

## <a name="next-steps"></a>Дальнейшие действия
Теперь вы узнали, как toouse непосредственные методы, можно получить в разделе руководства разработчика центра IoT hello:

* [Schedule jobs on multiple devices][lnk-devguide-jobs] (Планирование заданий на нескольких устройствах)

При желании tootry некоторые основные понятия hello, описанных в этой статье, могут быть интересны следующие учебника центра IoT hello параметры:

* [Use direct methods (Node)][lnk-methods-tutorial] (Использование прямых методов (Node))

<!-- links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md

[lnk-devguide-jobs]: iot-hub-devguide-jobs.md
[lnk-methods-tutorial]: iot-hub-node-node-direct-methods.md
[lnk-devguide-messages]: iot-hub-devguide-messaging.md
[lnk-c2d-guidance]: iot-hub-devguide-c2d-guidance.md
