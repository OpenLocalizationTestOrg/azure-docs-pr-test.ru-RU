---
title: "Центр IoT Azure удостоверения aaaUnderstand hello реестра | Документы Microsoft"
description: "Руководство разработчика - описание hello реестра удостоверений центр IoT и как toouse его toomanage устройств. Содержит сведения о hello Импорт и экспорт удостоверения устройства в пакетном режиме."
services: iot-hub
documentationcenter: .net
author: dominicbetts
manager: timlt
editor: 
ms.assetid: 0706eccd-e84c-4ae7-bbd4-2b1a22241147
ms.service: iot-hub
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/08/2017
ms.author: dobett
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c9fe3730a4608e28c47807ecb42e13e73f6a2e80
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understand-hello-identity-registry-in-your-iot-hub"></a><span data-ttu-id="1dd9d-104">Понимать реестра удостоверений hello в концентратор IoT</span><span class="sxs-lookup"><span data-stu-id="1dd9d-104">Understand hello identity registry in your IoT hub</span></span>

<span data-ttu-id="1dd9d-105">Каждый центр IoT имеет удостоверение реестра, который хранит сведения о разрешенных центра IoT toohello tooconnect устройств hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-105">Every IoT hub has an identity registry that stores information about hello devices permitted tooconnect toohello IoT hub.</span></span> <span data-ttu-id="1dd9d-106">Прежде чем устройство сможет подключиться центра IoT tooan, должен быть вход для этого устройства в реестре удостоверений центра IoT hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-106">Before a device can connect tooan IoT hub, there must be an entry for that device in hello IoT hub's identity registry.</span></span> <span data-ttu-id="1dd9d-107">Устройство также должно проверять подлинность с центром IoT hello на основе учетных данных, хранящиеся в реестре удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-107">A device must also authenticate with hello IoT hub based on credentials stored in hello identity registry.</span></span>

<span data-ttu-id="1dd9d-108">Идентификатор устройства Hello, хранящиеся в реестре удостоверений hello учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-108">hello device ID stored in hello identity registry is case-sensitive.</span></span>

<span data-ttu-id="1dd9d-109">На высоком уровне реестру удостоверений hello является коллекцией поддержкой REST идентификаторов ресурсов устройств.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-109">At a high level, hello identity registry is a REST-capable collection of device identity resources.</span></span> <span data-ttu-id="1dd9d-110">При добавлении записи в реестре удостоверений hello центра IoT создает набор ресурсов на устройство, например hello очередь, которая содержит перераспределяет сообщения облака на устройство.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-110">When you add an entry in hello identity registry, IoT Hub creates a set of per-device resources such as hello queue that contains in-flight cloud-to-device messages.</span></span>

### <a name="when-toouse"></a><span data-ttu-id="1dd9d-111">Когда toouse</span><span class="sxs-lookup"><span data-stu-id="1dd9d-111">When toouse</span></span>

<span data-ttu-id="1dd9d-112">При необходимости, используйте hello удостоверение реестра:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-112">Use hello identity registry when you need to:</span></span>

* <span data-ttu-id="1dd9d-113">Подготовка устройства, подключаемые tooyour центр IoT.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-113">Provision devices that connect tooyour IoT hub.</span></span>
* <span data-ttu-id="1dd9d-114">Управление конечными точками концентратора для каждого из устройств доступа tooyour устройств с выходом.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-114">Control per-device access tooyour hub's device-facing endpoints.</span></span>

> [!NOTE]
> <span data-ttu-id="1dd9d-115">Hello реестра удостоверений не содержит все метаданные для конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-115">hello identity registry does not contain any application-specific metadata.</span></span>

## <a name="identity-registry-operations"></a><span data-ttu-id="1dd9d-116">операции с реестром удостоверений.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-116">Identity registry operations</span></span>

<span data-ttu-id="1dd9d-117">Hello реестра удостоверений центра IoT предоставляет hello следующие операции:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-117">hello IoT Hub identity registry exposes hello following operations:</span></span>

* <span data-ttu-id="1dd9d-118">создание удостоверения устройства;</span><span class="sxs-lookup"><span data-stu-id="1dd9d-118">Create device identity</span></span>
* <span data-ttu-id="1dd9d-119">обновление удостоверения устройства;</span><span class="sxs-lookup"><span data-stu-id="1dd9d-119">Update device identity</span></span>
* <span data-ttu-id="1dd9d-120">получение удостоверения устройства по идентификатору;</span><span class="sxs-lookup"><span data-stu-id="1dd9d-120">Retrieve device identity by ID</span></span>
* <span data-ttu-id="1dd9d-121">удаление удостоверения устройства;</span><span class="sxs-lookup"><span data-stu-id="1dd9d-121">Delete device identity</span></span>
* <span data-ttu-id="1dd9d-122">Перечислить копии too1000 удостоверений</span><span class="sxs-lookup"><span data-stu-id="1dd9d-122">List up too1000 identities</span></span>
* <span data-ttu-id="1dd9d-123">Экспорт всех хранилищ больших двоичных объектов tooAzure удостоверений</span><span class="sxs-lookup"><span data-stu-id="1dd9d-123">Export all identities tooAzure blob storage</span></span>
* <span data-ttu-id="1dd9d-124">импорт всех удостоверений из хранилища BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-124">Import identities from Azure blob storage</span></span>

<span data-ttu-id="1dd9d-125">Все эти операции могут использовать оптимистичный параллелизм (согласно [RFC7232][lnk-rfc7232]).</span><span class="sxs-lookup"><span data-stu-id="1dd9d-125">All these operations can use optimistic concurrency, as specified in [RFC7232][lnk-rfc7232].</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1dd9d-126">Здравствуйте только способом tooretrieve всех удостоверений в реестре удостоверений центр IoT — toouse hello [Экспорт] [ lnk-export] функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-126">hello only way tooretrieve all identities in an IoT hub's identity registry is toouse hello [Export][lnk-export] functionality.</span></span>

<span data-ttu-id="1dd9d-127">Реестр удостоверений Центра Интернета вещей:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-127">An IoT Hub identity registry:</span></span>

* <span data-ttu-id="1dd9d-128">не содержит метаданные приложения;</span><span class="sxs-lookup"><span data-stu-id="1dd9d-128">Does not contain any application metadata.</span></span>
* <span data-ttu-id="1dd9d-129">Может осуществляться как словарь, с помощью hello **deviceId** как ключ hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-129">Can be accessed like a dictionary, by using hello **deviceId** as hello key.</span></span>
* <span data-ttu-id="1dd9d-130">не поддерживает выразительные запросы.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-130">Does not support expressive queries.</span></span>

<span data-ttu-id="1dd9d-131">Решение IoT обычно включает в себя отдельное хранилище, содержащее метаданные приложений.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-131">An IoT solution typically has a separate solution-specific store that contains application-specific metadata.</span></span> <span data-ttu-id="1dd9d-132">Например hello конкретного решения хранилища в решении смарт-построение зафиксирует hello комнаты, в которой развертывается датчика температуры.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-132">For example, hello solution-specific store in a smart building solution would record hello room in which a temperature sensor is deployed.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="1dd9d-133">Hello удостоверение реестра следует используйте только для управления устройствами и подготовка operations.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-133">Only use hello identity registry for device management and provisioning operations.</span></span> <span data-ttu-id="1dd9d-134">Высокая пропускная способность операций во время выполнения, не следует полагаться на выполнение операций в реестре удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-134">High throughput operations at run time should not depend on performing operations in hello identity registry.</span></span> <span data-ttu-id="1dd9d-135">Например проверка состояния подключения hello устройства перед отправкой команды не поддерживается шаблон.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-135">For example, checking hello connection state of a device before sending a command is not a supported pattern.</span></span> <span data-ttu-id="1dd9d-136">Убедитесь, что hello toocheck [уровни регулирования] [ lnk-quotas] для реестра удостоверений hello и hello [пульса устройства] [ lnk-guidance-heartbeat] шаблон.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-136">Make sure toocheck hello [throttling rates][lnk-quotas] for hello identity registry, and hello [device heartbeat][lnk-guidance-heartbeat] pattern.</span></span>

## <a name="disable-devices"></a><span data-ttu-id="1dd9d-137">Отключение устройств</span><span class="sxs-lookup"><span data-stu-id="1dd9d-137">Disable devices</span></span>

<span data-ttu-id="1dd9d-138">Можно отключить устройств, обновив hello **состояние** свойство идентификатора в реестре удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-138">You can disable devices by updating hello **status** property of an identity in hello identity registry.</span></span> <span data-ttu-id="1dd9d-139">Обычно это свойство используется в двух сценариях.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-139">Typically, you use this property in two scenarios:</span></span>

* <span data-ttu-id="1dd9d-140">В процессе оркестрации подготовки.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-140">During a provisioning orchestration process.</span></span> <span data-ttu-id="1dd9d-141">Дополнительные сведения см. в разделе [Подготовка устройств][lnk-guidance-provisioning].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-141">For more information, see [Device Provisioning][lnk-guidance-provisioning].</span></span>
* <span data-ttu-id="1dd9d-142">Если по какой-либо причине вы решите, что безопасность устройства нарушена или оно является неавторизованным.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-142">If, for any reason, you consider a device is compromised or has become unauthorized.</span></span>

## <a name="import-and-export-device-identities"></a><span data-ttu-id="1dd9d-143">Импорт и экспорт удостоверений устройств</span><span class="sxs-lookup"><span data-stu-id="1dd9d-143">Import and export device identities</span></span>

<span data-ttu-id="1dd9d-144">Идентификаторы устройств в пакетном режиме можно экспортировать из реестра центр IoT удостоверение, с помощью асинхронных операций в hello [конечной точки поставщика ресурсов центра IoT][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-144">You can export device identities in bulk from an IoT hub's identity registry, by using asynchronous operations on hello [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="1dd9d-145">Экспорты долго выполняющихся заданий, использующих большой двоичный объект, предоставляемый пользователем устройства toosave контейнер учетных данных, считываемых из реестра удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-145">Exports are long-running jobs that use a customer-supplied blob container toosave device identity data read from hello identity registry.</span></span>

<span data-ttu-id="1dd9d-146">Идентификаторы устройств в реестре удостоверений массового tooan IoT hub, можно импортировать с помощью асинхронных операций в hello [конечной точки поставщика ресурсов центра IoT][lnk-endpoints].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-146">You can import device identities in bulk tooan IoT hub's identity registry, by using asynchronous operations on hello [IoT Hub resource provider endpoint][lnk-endpoints].</span></span> <span data-ttu-id="1dd9d-147">Импорты, длительные задания, использующие данные в большой двоичный объект, предоставляемый пользователем устройства toowrite контейнер учетных данных в реестре удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-147">Imports are long-running jobs that use data in a customer-supplied blob container toowrite device identity data into hello identity registry.</span></span>

* <span data-ttu-id="1dd9d-148">Подробные сведения о hello импорта и экспорта API-интерфейсы в разделе [API REST поставщика ресурсов центра IoT][lnk-resource-provider-apis].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-148">For detailed information about hello import and export APIs, see [IoT Hub resource provider REST APIs][lnk-resource-provider-apis].</span></span>
* <span data-ttu-id="1dd9d-149">toolearn больше о запуске импортировать и экспортировать задания см. в разделе [массовое Управление удостоверениями устройства центра IoT][lnk-bulk-identity].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-149">toolearn more about running import and export jobs, see [Bulk management of IoT Hub device identities][lnk-bulk-identity].</span></span>

## <a name="device-provisioning"></a><span data-ttu-id="1dd9d-150">Подготовка устройств</span><span class="sxs-lookup"><span data-stu-id="1dd9d-150">Device provisioning</span></span>

<span data-ttu-id="1dd9d-151">данные устройства Hello хранятся данного решения IoT зависит от hello конкретных требований этого решения.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-151">hello device data that a given IoT solution stores depends on hello specific requirements of that solution.</span></span> <span data-ttu-id="1dd9d-152">Но в решении как минимум должны сохраняться удостоверения устройства и ключи проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-152">But, as a minimum, a solution must store device identities and authentication keys.</span></span> <span data-ttu-id="1dd9d-153">Центр Интернета вещей Azure имеет реестр удостоверений, который может хранить значения для каждого устройства, например идентификаторы, ключи проверки подлинности и коды состояния.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-153">Azure IoT Hub includes an identity registry that can store values for each device such as IDs, authentication keys, and status codes.</span></span> <span data-ttu-id="1dd9d-154">Решения можно использовать других служб Azure, таких как хранилище таблиц, хранилище BLOB-объектов или toostore Cosmos DB любые данные дополнительных устройств.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-154">A solution can use other Azure services such as table storage, blob storage, or Cosmos DB toostore any additional device data.</span></span>

<span data-ttu-id="1dd9d-155">*Подготовка устройств* — hello процесс добавления hello начальной устройства данных toohello магазинов в решении.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-155">*Device provisioning* is hello process of adding hello initial device data toohello stores in your solution.</span></span> <span data-ttu-id="1dd9d-156">tooenable новый концентратор tooyour tooconnect устройства, необходимо добавить устройство идентификатор и ключи toohello реестра удостоверений центр IoT.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-156">tooenable a new device tooconnect tooyour hub, you must add a device ID and keys toohello IoT Hub identity registry.</span></span> <span data-ttu-id="1dd9d-157">Как часть процесса инициализации hello может потребоваться tooinitialize сведений в других хранилищах решения.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-157">As part of hello provisioning process, you might need tooinitialize device-specific data in other solution stores.</span></span>

## <a name="device-heartbeat"></a><span data-ttu-id="1dd9d-158">Пульс устройства</span><span class="sxs-lookup"><span data-stu-id="1dd9d-158">Device heartbeat</span></span>

<span data-ttu-id="1dd9d-159">Hello центра IoT удостоверение реестра содержит поле с именем **connectionState**.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-159">hello IoT Hub identity registry contains a field called **connectionState**.</span></span> <span data-ttu-id="1dd9d-160">Использовать только hello **connectionState** во время разработки и отладки.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-160">Only use hello **connectionState** field during development and debugging.</span></span> <span data-ttu-id="1dd9d-161">Решения IoT не должен запросить hello поля во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-161">IoT solutions should not query hello field at run time.</span></span> <span data-ttu-id="1dd9d-162">Например, не запрос hello **connectionState** toocheck поля, если устройство подключено, перед отправкой сообщения облака на устройство или SMS.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-162">For example, do not query hello **connectionState** field toocheck if a device is connected before you send a cloud-to-device message or an SMS.</span></span>

<span data-ttu-id="1dd9d-163">Если вашего решения IoT должен tooknow, если устройство подключено, должны реализовывать hello *пульса шаблон*.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-163">If your IoT solution needs tooknow if a device is connected, you should implement hello *heartbeat pattern*.</span></span>

<span data-ttu-id="1dd9d-164">В шаблоне пульса hello hello устройство отправляет сообщения из устройства в облако хотя бы один раз каждые фиксированное количество времени (например, по крайней мере один раз в час).</span><span class="sxs-lookup"><span data-stu-id="1dd9d-164">In hello heartbeat pattern, hello device sends device-to-cloud messages at least once every fixed amount of time (for example, at least once every hour).</span></span> <span data-ttu-id="1dd9d-165">Таким образом даже если устройство не имеет toosend любые данные, он по-прежнему отправляет пустое сообщение устройства в облако (обычно со свойством, которое идентифицирует его как периодический сигнал).</span><span class="sxs-lookup"><span data-stu-id="1dd9d-165">Therefore, even if a device does not have any data toosend, it still sends an empty device-to-cloud message (usually with a property that identifies it as a heartbeat).</span></span> <span data-ttu-id="1dd9d-166">На стороне службы hello hello решение поддерживает карту с hello последнего пульса, полученных для каждого устройства.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-166">On hello service side, hello solution maintains a map with hello last heartbeat received for each device.</span></span> <span data-ttu-id="1dd9d-167">Решение hello не получил сообщение пульса в течение времени hello ожидается от устройства hello, предполагается, проблему с устройством hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-167">If hello solution does not receive a heartbeat message within hello expected time from hello device, it assumes that there is a problem with hello device.</span></span>

<span data-ttu-id="1dd9d-168">Более сложные реализации могут включать сведения hello из [мониторинга операций] [ lnk-devguide-opmon] tooidentify устройств, которые пытаются tooconnect или взаимодействия, но произошел сбой.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-168">A more complex implementation could include hello information from [operations monitoring][lnk-devguide-opmon] tooidentify devices that are trying tooconnect or communicate but failing.</span></span> <span data-ttu-id="1dd9d-169">При реализации шаблона hello пульса убедитесь, что toocheck [IoT Hub квот и регулировок][lnk-quotas].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-169">When you implement hello heartbeat pattern, make sure toocheck [IoT Hub Quotas and Throttles][lnk-quotas].</span></span>

> [!NOTE]
> <span data-ttu-id="1dd9d-170">Если подключение к IoT использует решение hello ли состояние исключительно toodetermine сообщения toosend облака на устройство, и сообщения, не широковещательных toolarge наборы устройств, рассмотрите возможность использования hello проще *короткий срок* шаблон.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-170">If an IoT solution uses hello connection state solely toodetermine whether toosend cloud-to-device messages, and messages are not broadcast toolarge sets of devices, consider using hello simpler *short expiry time* pattern.</span></span> <span data-ttu-id="1dd9d-171">Этот шаблон позволяет достичь hello же результат от обслуживания реестра состояние подключения устройства, с помощью шаблона пакета пульса hello, являются более эффективными.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-171">This pattern achieves hello same result as maintaining a device connection state registry using hello heartbeat pattern, while being more efficient.</span></span> <span data-ttu-id="1dd9d-172">При запросе подтверждения сообщений, центр IoT может уведомлять о устройства, возможности tooreceive сообщения, а какие — нет.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-172">If you request message acknowledgements, IoT Hub can notify you about which devices are able tooreceive messages and which are not.</span></span>

## <a name="device-lifecycle-notifications"></a><span data-ttu-id="1dd9d-173">Уведомления жизненного цикла устройств</span><span class="sxs-lookup"><span data-stu-id="1dd9d-173">Device lifecycle notifications</span></span>

<span data-ttu-id="1dd9d-174">Центр Интернета вещей может уведомлять решение Интернета вещей во время создания или удаления удостоверения устройства путем отправки уведомлений жизненного цикла устройств.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-174">IoT Hub can notify your IoT solution when a device identity is created or deleted by sending device lifecycle notifications.</span></span> <span data-ttu-id="1dd9d-175">toodo таким образом, вашего решения IoT должен toocreate маршрута и равенства источника данных hello tooset слишком*DeviceLifecycleEvents*.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-175">toodo so, your IoT solution needs toocreate a route and tooset hello Data Source equal too*DeviceLifecycleEvents*.</span></span> <span data-ttu-id="1dd9d-176">По умолчанию уведомления жизненного цикла не отправляются, то есть такие маршруты не существуют.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-176">By default, no lifecycle notifications are sent, that is, no such routes pre-exist.</span></span> <span data-ttu-id="1dd9d-177">сообщение уведомления Hello включает свойства и текст.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-177">hello notification message includes properties, and body.</span></span>

<span data-ttu-id="1dd9d-178">Свойства: Системные свойства сообщения с префиксом hello `'$'` символов.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-178">Properties: Message system properties are prefixed with hello `'$'` symbol.</span></span>

| <span data-ttu-id="1dd9d-179">Имя</span><span class="sxs-lookup"><span data-stu-id="1dd9d-179">Name</span></span> | <span data-ttu-id="1dd9d-180">Значение</span><span class="sxs-lookup"><span data-stu-id="1dd9d-180">Value</span></span> |
| --- | --- |
<span data-ttu-id="1dd9d-181">$content-type</span><span class="sxs-lookup"><span data-stu-id="1dd9d-181">$content-type</span></span> | <span data-ttu-id="1dd9d-182">приложение/json</span><span class="sxs-lookup"><span data-stu-id="1dd9d-182">application/json</span></span> |
<span data-ttu-id="1dd9d-183">$iothub-enqueuedtime</span><span class="sxs-lookup"><span data-stu-id="1dd9d-183">$iothub-enqueuedtime</span></span> |  <span data-ttu-id="1dd9d-184">Время отправки уведомлений hello</span><span class="sxs-lookup"><span data-stu-id="1dd9d-184">Time when hello notification was sent</span></span> |
<span data-ttu-id="1dd9d-185">$iothub-message-source</span><span class="sxs-lookup"><span data-stu-id="1dd9d-185">$iothub-message-source</span></span> | <span data-ttu-id="1dd9d-186">deviceLifecycleEvents</span><span class="sxs-lookup"><span data-stu-id="1dd9d-186">deviceLifecycleEvents</span></span> |
<span data-ttu-id="1dd9d-187">$content-encoding</span><span class="sxs-lookup"><span data-stu-id="1dd9d-187">$content-encoding</span></span> | <span data-ttu-id="1dd9d-188">utf-8</span><span class="sxs-lookup"><span data-stu-id="1dd9d-188">utf-8</span></span> |
<span data-ttu-id="1dd9d-189">opType</span><span class="sxs-lookup"><span data-stu-id="1dd9d-189">opType</span></span> | <span data-ttu-id="1dd9d-190">**createDeviceIdentity** или **deleteDeviceIdentity**</span><span class="sxs-lookup"><span data-stu-id="1dd9d-190">**createDeviceIdentity** or **deleteDeviceIdentity**</span></span> |
<span data-ttu-id="1dd9d-191">hubName</span><span class="sxs-lookup"><span data-stu-id="1dd9d-191">hubName</span></span> | <span data-ttu-id="1dd9d-192">Имя Центра Интернета вещей</span><span class="sxs-lookup"><span data-stu-id="1dd9d-192">Name of IoT Hub</span></span> |
<span data-ttu-id="1dd9d-193">deviceId</span><span class="sxs-lookup"><span data-stu-id="1dd9d-193">deviceId</span></span> | <span data-ttu-id="1dd9d-194">Идентификатор устройства hello</span><span class="sxs-lookup"><span data-stu-id="1dd9d-194">ID of hello device</span></span> |
<span data-ttu-id="1dd9d-195">operationTimestamp</span><span class="sxs-lookup"><span data-stu-id="1dd9d-195">operationTimestamp</span></span> | <span data-ttu-id="1dd9d-196">Отметка времени операции по стандарту ISO8601</span><span class="sxs-lookup"><span data-stu-id="1dd9d-196">ISO8601 timestamp of operation</span></span> |
<span data-ttu-id="1dd9d-197">iothub-message-schema</span><span class="sxs-lookup"><span data-stu-id="1dd9d-197">iothub-message-schema</span></span> | <span data-ttu-id="1dd9d-198">deviceLifecycleNotification</span><span class="sxs-lookup"><span data-stu-id="1dd9d-198">deviceLifecycleNotification</span></span> |

<span data-ttu-id="1dd9d-199">Текст: В этом разделе в формате JSON и представляет двойных hello объекта hello создания удостоверения устройства.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-199">Body: This section is in JSON format and represents hello twin of hello created device identity.</span></span> <span data-ttu-id="1dd9d-200">Например,</span><span class="sxs-lookup"><span data-stu-id="1dd9d-200">For example,</span></span>

```json
{
    "deviceId":"11576-ailn-test-0-67333793211",
    "etag":"AAAAAAAAAAE=",
    "properties": {
        "desired": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        },
        "reported": {
            "$metadata": {
                "$lastUpdated": "2016-02-30T16:24:48.789Z"
            },
            "$version": 1
        }
    }
}
```

## <a name="reference-topics"></a><span data-ttu-id="1dd9d-201">Справочные материалы</span><span class="sxs-lookup"><span data-stu-id="1dd9d-201">Reference topics:</span></span>

<span data-ttu-id="1dd9d-202">Hello следующие справочные разделы предоставляют дополнительные сведения о реестре удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-202">hello following reference topics provide you with more information about hello identity registry.</span></span>

## <a name="device-identity-properties"></a><span data-ttu-id="1dd9d-203">Свойства удостоверений устройств</span><span class="sxs-lookup"><span data-stu-id="1dd9d-203">Device identity properties</span></span>

<span data-ttu-id="1dd9d-204">Идентификаторы устройств представлены в виде документов JSON с hello следующие свойства:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-204">Device identities are represented as JSON documents with hello following properties:</span></span>

| <span data-ttu-id="1dd9d-205">Свойство</span><span class="sxs-lookup"><span data-stu-id="1dd9d-205">Property</span></span> | <span data-ttu-id="1dd9d-206">Параметры</span><span class="sxs-lookup"><span data-stu-id="1dd9d-206">Options</span></span> | <span data-ttu-id="1dd9d-207">Описание</span><span class="sxs-lookup"><span data-stu-id="1dd9d-207">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1dd9d-208">deviceId</span><span class="sxs-lookup"><span data-stu-id="1dd9d-208">deviceId</span></span> |<span data-ttu-id="1dd9d-209">Обязательно, при обновлениях доступно только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-209">required, read-only on updates</span></span> |<span data-ttu-id="1dd9d-210">Строк с учетом регистра (вверх too128 символов) буквенно-цифровых символов ASCII 7-разрядных + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-210">A case-sensitive string (up too128 characters long) of ASCII 7-bit alphanumeric characters + `{'-', ':', '.', '+', '%', '_', '#', '*', '?', '!', '(', ')', ',', '=', '@', ';', '$', '''}`.</span></span> |
| <span data-ttu-id="1dd9d-211">generationId</span><span class="sxs-lookup"><span data-stu-id="1dd9d-211">generationId</span></span> |<span data-ttu-id="1dd9d-212">Обязательно, только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-212">required, read-only</span></span> |<span data-ttu-id="1dd9d-213">IoT концентратор создан строк с учетом регистра вверх too128 символов.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-213">An IoT hub-generated, case-sensitive string up too128 characters long.</span></span> <span data-ttu-id="1dd9d-214">Это значение является используется toodistinguish устройствами с помощью hello же **deviceId**, когда они удалена и создана заново.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-214">This value is used toodistinguish devices with hello same **deviceId**, when they have been deleted and re-created.</span></span> |
| <span data-ttu-id="1dd9d-215">etag</span><span class="sxs-lookup"><span data-stu-id="1dd9d-215">etag</span></span> |<span data-ttu-id="1dd9d-216">Обязательно, только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-216">required, read-only</span></span> |<span data-ttu-id="1dd9d-217">Строка, представляющая слабый ETag для идентификации устройства hello, согласно [RFC7232][lnk-rfc7232].</span><span class="sxs-lookup"><span data-stu-id="1dd9d-217">A string representing a weak ETag for hello device identity, as per [RFC7232][lnk-rfc7232].</span></span> |
| <span data-ttu-id="1dd9d-218">auth</span><span class="sxs-lookup"><span data-stu-id="1dd9d-218">auth</span></span> |<span data-ttu-id="1dd9d-219">необязательный</span><span class="sxs-lookup"><span data-stu-id="1dd9d-219">optional</span></span> |<span data-ttu-id="1dd9d-220">Составной объект, содержащий сведения об аутентификации и материалы безопасности.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-220">A composite object containing authentication information and security materials.</span></span> |
| <span data-ttu-id="1dd9d-221">auth.symkey</span><span class="sxs-lookup"><span data-stu-id="1dd9d-221">auth.symkey</span></span> |<span data-ttu-id="1dd9d-222">необязательный</span><span class="sxs-lookup"><span data-stu-id="1dd9d-222">optional</span></span> |<span data-ttu-id="1dd9d-223">Составной объект, содержащий первичный и вторичный ключи, хранящиеся в формате base64.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-223">A composite object containing a primary and a secondary key, stored in base64 format.</span></span> |
| <span data-ttu-id="1dd9d-224">status</span><span class="sxs-lookup"><span data-stu-id="1dd9d-224">status</span></span> |<span data-ttu-id="1dd9d-225">обязательно</span><span class="sxs-lookup"><span data-stu-id="1dd9d-225">required</span></span> |<span data-ttu-id="1dd9d-226">Индикатор доступа.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-226">An access indicator.</span></span> <span data-ttu-id="1dd9d-227">Доступно два значения: **Включено** или **Отключено**.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-227">Can be **Enabled** or **Disabled**.</span></span> <span data-ttu-id="1dd9d-228">Если **включено**, hello устройство может быть tooconnect.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-228">If **Enabled**, hello device is allowed tooconnect.</span></span> <span data-ttu-id="1dd9d-229">Если указано значение **Отключено**, устройство не может подключаться ни к одной конечной точке, обращенной к устройству.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-229">If **Disabled**, this device cannot access any device-facing endpoint.</span></span> |
| <span data-ttu-id="1dd9d-230">statusReason</span><span class="sxs-lookup"><span data-stu-id="1dd9d-230">statusReason</span></span> |<span data-ttu-id="1dd9d-231">необязательный</span><span class="sxs-lookup"><span data-stu-id="1dd9d-231">optional</span></span> |<span data-ttu-id="1dd9d-232">128 символов длиной строки этой причине hello хранилищ состояния идентификаторов устройств hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-232">A 128 character-long string that stores hello reason for hello device identity status.</span></span> <span data-ttu-id="1dd9d-233">Разрешены все символы UTF-8.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-233">All UTF-8 characters are allowed.</span></span> |
| <span data-ttu-id="1dd9d-234">statusUpdateTime</span><span class="sxs-lookup"><span data-stu-id="1dd9d-234">statusUpdateTime</span></span> |<span data-ttu-id="1dd9d-235">Только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-235">read-only</span></span> |<span data-ttu-id="1dd9d-236">Временная индикатор, показывающий hello Дата и время последнего обновления состояния hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-236">A temporal indicator, showing hello date and time of hello last status update.</span></span> |
| <span data-ttu-id="1dd9d-237">connectionState</span><span class="sxs-lookup"><span data-stu-id="1dd9d-237">connectionState</span></span> |<span data-ttu-id="1dd9d-238">Только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-238">read-only</span></span> |<span data-ttu-id="1dd9d-239">Поле, отображающее состояние подключения: **Подключено** или **Отключено**.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-239">A field indicating connection status: either **Connected** or **Disconnected**.</span></span> <span data-ttu-id="1dd9d-240">Это поле представляет hello зрения центра IoT hello состояние подключения устройства.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-240">This field represents hello IoT Hub view of hello device connection status.</span></span> <span data-ttu-id="1dd9d-241">**Важно!**Используйте это поле только в целях разработки и отладки.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-241">**Important**: This field should be used only for development/debugging purposes.</span></span> <span data-ttu-id="1dd9d-242">состояние соединения Hello обновляется только для устройств с помощью MQTT или AMQP.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-242">hello connection state is updated only for devices using MQTT or AMQP.</span></span> <span data-ttu-id="1dd9d-243">Кроме того, оно определяется по запросам проверки связи (по протоколу MQTT или AMQP) и может иметь максимальную задержку равную всего лишь 5 минутам.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-243">Also, it is based on protocol-level pings (MQTT pings, or AMQP pings), and it can have a maximum delay of only 5 minutes.</span></span> <span data-ttu-id="1dd9d-244">В связи с этим могут возникать ложно положительные результаты, например, когда отключенные устройства отображаются как подключенные.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-244">For these reasons, there can be false positives, such as devices reported as connected but that are disconnected.</span></span> |
| <span data-ttu-id="1dd9d-245">connectionStateUpdatedTime</span><span class="sxs-lookup"><span data-stu-id="1dd9d-245">connectionStateUpdatedTime</span></span> |<span data-ttu-id="1dd9d-246">Только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-246">read-only</span></span> |<span data-ttu-id="1dd9d-247">Признак temporal Отображение даты hello и последнее состояние подключения hello времени был обновлен.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-247">A temporal indicator, showing hello date and last time hello connection state was updated.</span></span> |
| <span data-ttu-id="1dd9d-248">lastActivityTime</span><span class="sxs-lookup"><span data-stu-id="1dd9d-248">lastActivityTime</span></span> |<span data-ttu-id="1dd9d-249">Только для чтения</span><span class="sxs-lookup"><span data-stu-id="1dd9d-249">read-only</span></span> |<span data-ttu-id="1dd9d-250">Временная индикатор, показывающий hello даты и времени hello устройство подключен, полученных или отправленных сообщений.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-250">A temporal indicator, showing hello date and last time hello device connected, received, or sent a message.</span></span> |

> [!NOTE]
> <span data-ttu-id="1dd9d-251">Состояние подключения может представлять только hello центра IoT представление состояния hello hello соединения.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-251">Connection state can only represent hello IoT Hub view of hello status of hello connection.</span></span> <span data-ttu-id="1dd9d-252">Состояние обновления toothis с задержкой, в зависимости от состояния сети и конфигурации.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-252">Updates toothis state may be delayed, depending on network conditions and configurations.</span></span>

## <a name="additional-reference-material"></a><span data-ttu-id="1dd9d-253">Дополнительные справочные материалы</span><span class="sxs-lookup"><span data-stu-id="1dd9d-253">Additional reference material</span></span>

<span data-ttu-id="1dd9d-254">Другие разделы ссылку в hello центра IoT руководстве для разработчиков:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-254">Other reference topics in hello IoT Hub developer guide include:</span></span>

* <span data-ttu-id="1dd9d-255">[Конечные точки центра IoT] [ lnk-endpoints] описывает hello различные конечные точки, предоставляемые каждый центр IoT для операций времени выполнения и управления.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-255">[IoT Hub endpoints][lnk-endpoints] describes hello various endpoints that each IoT hub exposes for run-time and management operations.</span></span>
* <span data-ttu-id="1dd9d-256">[Регулирование и квоты] [ lnk-quotas] описывает hello квот и регулирования, применяющимся toohello службы центра IoT.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-256">[Throttling and quotas][lnk-quotas] describes hello quotas and throttling behaviors that apply toohello IoT Hub service.</span></span>
* <span data-ttu-id="1dd9d-257">[Пакеты SDK устройств и служб Azure IoT] [ lnk-sdks] списки hello языка различных пакетов SDK, которые можно использовать при разработке приложений, устройств и служб, которые взаимодействуют с центром IoT.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-257">[Azure IoT device and service SDKs][lnk-sdks] lists hello various language SDKs you can use when you develop both device and service apps that interact with IoT Hub.</span></span>
* <span data-ttu-id="1dd9d-258">[Язык запросов центра IoT] [ lnk-query] описывает hello язык запросов, можно использовать tooretrieve сведения из центра IoT близнецы устройства и заданий.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-258">[IoT Hub query language][lnk-query] describes hello query language you can use tooretrieve information from IoT Hub about your device twins and jobs.</span></span>
* <span data-ttu-id="1dd9d-259">[Поддержка MQTT концентратора IoT] [ lnk-devguide-mqtt] приведены более подробные сведения о поддержке центра IoT протокола MQTT hello.</span><span class="sxs-lookup"><span data-stu-id="1dd9d-259">[IoT Hub MQTT support][lnk-devguide-mqtt] provides more information about IoT Hub support for hello MQTT protocol.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1dd9d-260">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="1dd9d-260">Next steps</span></span>

<span data-ttu-id="1dd9d-261">Теперь вы узнали, как toouse реестра удостоверений центра IoT hello, вам может быть полезен в следующие разделы руководства разработчика центра IoT hello:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-261">Now you have learned how toouse hello IoT Hub identity registry, you may be interested in hello following IoT Hub developer guide topics:</span></span>

* <span data-ttu-id="1dd9d-262">[Элемент управления доступом tooIoT концентратора][lnk-devguide-security]</span><span class="sxs-lookup"><span data-stu-id="1dd9d-262">[Control access tooIoT Hub][lnk-devguide-security]</span></span>
* <span data-ttu-id="1dd9d-263">[Конфигурации и состояния toosynchronize близнецы устройства][lnk-devguide-device-twins]</span><span class="sxs-lookup"><span data-stu-id="1dd9d-263">[Use device twins toosynchronize state and configurations][lnk-devguide-device-twins]</span></span>
* <span data-ttu-id="1dd9d-264">[Вызов прямого метода на устройстве (предварительная версия)][lnk-devguide-directmethods]</span><span class="sxs-lookup"><span data-stu-id="1dd9d-264">[Invoke a direct method on a device][lnk-devguide-directmethods]</span></span>
* <span data-ttu-id="1dd9d-265">[Schedule jobs on multiple devices][lnk-devguide-jobs] (Планирование заданий на нескольких устройствах)</span><span class="sxs-lookup"><span data-stu-id="1dd9d-265">[Schedule jobs on multiple devices][lnk-devguide-jobs]</span></span>

<span data-ttu-id="1dd9d-266">При желании tootry некоторые основные понятия hello, описанных в этой статье, могут быть интересны следующие учебника центра IoT hello параметры:</span><span class="sxs-lookup"><span data-stu-id="1dd9d-266">If you would like tootry out some of hello concepts described in this article, you may be interested in hello following IoT Hub tutorial:</span></span>

* <span data-ttu-id="1dd9d-267">[Приступая к работе с Центром Интернета вещей Azure][lnk-getstarted-tutorial]</span><span class="sxs-lookup"><span data-stu-id="1dd9d-267">[Get started with Azure IoT Hub][lnk-getstarted-tutorial]</span></span>

<!-- Links and images -->

[lnk-endpoints]: iot-hub-devguide-endpoints.md
[lnk-quotas]: iot-hub-devguide-quotas-throttling.md
[lnk-sdks]: iot-hub-devguide-sdks.md
[lnk-query]: iot-hub-devguide-query-language.md
[lnk-devguide-mqtt]: iot-hub-mqtt-support.md
[lnk-resource-provider-apis]: https://docs.microsoft.com/rest/api/iothub/iothubresource
[lnk-guidance-provisioning]: iot-hub-devguide-identity-registry.md#device-provisioning
[lnk-guidance-heartbeat]: iot-hub-devguide-identity-registry.md#device-heartbeat
[lnk-rfc7232]: https://tools.ietf.org/html/rfc7232
[lnk-bulk-identity]: iot-hub-bulk-identity-mgmt.md
[lnk-export]: iot-hub-devguide-identity-registry.md#import-and-export-device-identities
[lnk-devguide-opmon]: iot-hub-operations-monitoring.md

[lnk-devguide-security]: iot-hub-devguide-security.md
[lnk-devguide-device-twins]: iot-hub-devguide-device-twins.md
[lnk-devguide-directmethods]: iot-hub-devguide-direct-methods.md
[lnk-devguide-jobs]: iot-hub-devguide-jobs.md

[lnk-getstarted-tutorial]: iot-hub-csharp-csharp-getstarted.md
