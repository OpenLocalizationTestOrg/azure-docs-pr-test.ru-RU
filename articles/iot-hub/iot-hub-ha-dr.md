---
title: "Центр IoT высокой доступности и аварийного восстановления aaaAzure | Документы Microsoft"
description: "Описание возможностей Azure и центр IoT hello, помогающие решения высокого уровня доступности Azure IoT toobuild с возможности аварийного восстановления."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a>Высокая доступность и аварийное восстановление центра IoT
Как службу Azure центра IoT обеспечивает высокий уровень доступности (HA) с использованием избыточных данных на уровне hello регион Azure, не требуется никаких дополнительных действий, предусмотренного hello решения. Hello платформы Microsoft Azure также включает функции toohelp построения решений с помощью возможности аварийного восстановления (DR) или доступности в различных регионах. Следует tooprovide глобальной межрегиональное высокий уровень доступности для устройства или пользователей, проектирования и подготовьте решениях tootake преимуществами этих возможностей аварийного восстановления Azure. статья Hello [техническое руководство по непрерывности бизнеса Azure](../resiliency/resiliency-technical-guidance.md) Описывает встроенные функции hello в Azure для непрерывности и аварийного восстановления. Hello [аварийное восстановление и высокий уровень доступности для приложений Azure] [ Disaster recovery and high availability for Azure applications] документ содержит руководство по архитектуре на стратегий для приложения Azure tooachieve высокого уровня ДОСТУПНОСТИ и аварийного восстановления.

## <a name="azure-iot-hub-dr"></a>Аварийное восстановление центра IoT Azure
Кроме того региона toointra высокого уровня ДОСТУПНОСТИ, центр IoT реализует механизмы отказоустойчивости для аварийного восстановления, которые не требуют вмешательства пользователя hello. IoT Hub DR инициируется самостоятельно и имеет время восстановления (RTO) 2 26 часа и hello следующие целями точки восстановления (RPO).

| Функции | RPO |
| --- | --- |
| Доступность службы для операций с реестром и операций взаимодействия |Возможна потеря записи CName |
| Данные удостоверений в реестре удостоверений |Потеря 0–5 мин данных |
| Отправка сообщений с устройства в облако |Теряются все непрочитанные сообщения |
| Отправка сообщений о мониторинге операций |Теряются все непрочитанные сообщения |
| Получение сообщений из облака на устройство |Потеря 0–5 мин данных |
| Очередь отзывов из облака на устройство |Теряются все непрочитанные сообщения |

## <a name="regional-failover-with-iot-hub"></a>Отработка отказа между регионами с помощью центра IoT
Полное раскрытие топологии развертывания в решениях IoT выходит за рамки данной статьи hello. Hello рассматривается hello *региональной отработки отказа* модели развертывания высокого уровня доступности и аварийного восстановления с целью hello.

В модели региональной отработки отказа hello решения задней запускает главным образом в расположении одного центра обработки данных и вторичной центр IoT и серверной части развертываются в другое расположение центра обработки данных. Если центр IoT hello в основном центре обработки данных hello подвергается атаке сбоя или нарушено сетевое подключение hello из hello устройства toohello основного центра обработки данных. Устройства используют конечную точку службы получателя всякий раз, когда не удается связаться со шлюзом основной hello. С возможностью отработки отказа в различных регионах доступность решения hello может быть улучшена за высокого уровня доступности hello одной области.

На высоком уровне tooimplement модель региональной отработки отказа с центром IoT требуется hello следующее:

* **Центр IoT и устройства, логику маршрутизации вторичной**: В случае перебоев в работе службы в основном регионе hello, устройства необходимо запустить подключение tooyour дополнительный регион. Условии hello учитывать состояние характера участвующих большинство служб, часто бывает процесс отработки отказа между области hello tootrigger Администраторы решения. Hello лучшим способом toocommunicate hello новой конечной точки toodevices, сохраняя контроль над процессом hello, — их Регулярная проверка toohave *concierge* hello текущей активной конечной точки службы. Hello дежурная служба может быть веб-приложения, репликации, которую достижимым методами перенаправления DNS (например, с помощью [диспетчера трафика Azure][Azure Traffic Manager]).
* **Репликация реестра удостоверений** -toobe можно использовать вторичный центр IoT hello должен содержать все удостоверения устройства подключаются toohello решения. Hello решения необходимо сохранить резервные копии на георепликацией удостоверений устройств и отправить вторичного центра IoT toohello перед переключением hello активную конечную точку для hello устройств. в этом контексте полезно Hello функциональные возможности экспорта устройства удостоверение из центра IoT. Дополнительные сведения см. в [разделе, посвященном реестру удостоверений, руководства разработчика для Центра Интернета вещей][IoT Hub developer guide - identity registry].
* **Слияние логику** — Если основной регион hello снова становится доступной, все hello состояние и данные, которые были созданы в hello вторичный сайт должен быть основной регион перенесенных toohello назад. Это состояние и данные практически связывает toodevice удостоверений и метаданные приложения, которые должны быть объединены с hello первичный центр IoT и другим хранилищам конкретного приложения в основном регионе hello. toosimplify этот шаг следует использовать операции идемпотентными. Операции идемпотентными свести к минимуму hello побочные эффекты от окончательной равномерным распределением hello событий и от дубликаты или доставки ожидания неупорядоченных событий. Кроме того логика приложения hello может потенциальных несоответствий спроектированный tootolerate «немного» из состояния даты. Такая ситуация может возникнуть из-за toohello дополнительное время, необходимое для системы hello слишком «автоматическое восстановление» с учетом целей точки восстановления (RPO).

## <a name="next-steps"></a>Дальнейшие действия
Выполните эти дополнительные сведения о Azure IoT Hub toolearn ссылки.

* [Приступая к работе с Центром Интернета вещей Azure][lnk-get-started]
* [Что такое центр IoT в Azure?][What is Azure IoT Hub?]

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
