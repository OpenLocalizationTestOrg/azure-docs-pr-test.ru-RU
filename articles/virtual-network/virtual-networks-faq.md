---
title: "Часто задаваемые вопросы по виртуальным сетям Azure | Документация Майкрософт"
description: "Ответы на наиболее часто задаваемые вопросы о виртуальных сетях Microsoft Azure."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 54bee086-a8a5-4312-9866-19a1fba913d0
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 01/18/2017
ms.author: jdial
ms.openlocfilehash: c71e188b74ebfd9420f840957e83190cf476b584
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-virtual-network-frequently-asked-questions-faq"></a>Виртуальная сеть Azure: часто задаваемые вопросы

## <a name="virtual-network-basics"></a>Основные сведения о виртуальных сетях

### <a name="what-is-an-azure-virtual-network-vnet"></a>Что представляет собой виртуальная сеть Azure?
Виртуальная сеть Azure — это представление сети в облаке. Это логическая изоляция облака Azure, выделенного для вашей подписки. С помощью виртуальной сети можно подготовить VPN к работе в Azure и управлять ею. Кроме того, при необходимости можно связать виртуальную сеть с другими виртуальными сетями в Azure или с локальной ИТ-инфраструктурой для создания гибридных или распределенных решений. Каждая создаваемая виртуальная сеть имеет собственный блок CIDR. Ее можно связать с другими виртуальными и локальными сетями, если блоки CIDR не пересекаются. Кроме того, вы можете изменять настройки DNS-серверов для виртуальных сетей и разбивать виртуальные сети на подсети.

Вы можете использовать виртуальные сети для указанных ниже целей.

* Создание выделенной частной облачной виртуальной сети. Иногда для решения не нужна распределенная конфигурация. При создании виртуальной сети подключенные к ней службы и виртуальные машины могут безопасно обмениваться данными непосредственно друг с другом в облаке. Это позволяет безопасно ограничить трафик пределами виртуальной сети. При этом в рамках вашего решения вы можете настроить подключения конечных точек для виртуальных машин и служб, которым необходимо подключение к Интернету.
* Безопасное расширение центра обработки данных. С помощью виртуальных сетей можно создавать традиционные VPN-подключения типа "сеть — сеть" (S2S) для безопасного масштабирования емкости центра обработки данных. Для создания безопасного подключения между корпоративным VPN-шлюзом и Azure в VPN-подключениях S2S используется IPsec.
* Поддержка гибридных облачных сценариев. Виртуальные сети предоставляют гибкие возможности для использования целого ряда гибридных облачных сценариев. Вы можете безопасно подключать облачные приложения к локальным системам любого типа, например к большим ЭВМ и системам под управлением ОС Unix.

### <a name="how-do-i-know-if-i-need-a-vnet"></a>Как узнать, требуется ли виртуальная сеть?
В статье [Обзор виртуальной сети](virtual-networks-overview.md) есть таблица решений, с помощью которой вы сможете подобрать оптимальную схему сети.

### <a name="how-do-i-get-started"></a>Как начать работу?
Чтобы начать работу, ознакомьтесь с [документацией по виртуальным сетям](https://docs.microsoft.com/azure/virtual-network/). В ней представлены описание и информация о развертывании для всех компонентов виртуальной сети.

### <a name="can-i-use-vnets-without-cross-premises-connectivity"></a>Можно ли использовать виртуальные сети без распределенных подключений?
Да. Вы можете использовать виртуальную сеть без гибридных подключений. Это особенно удобно, если вы хотите запустить в Azure контроллеры доменов Active Directory для Microsoft Windows Server или фермы SharePoint.

### <a name="can-i-perform-wan-optimization-between-vnets-or-a-vnet-and-my-on-premises-data-center"></a>Можно ли выполнять оптимизацию глобальной сети между виртуальными сетями или между виртуальной сетью и локальным центром обработки данных?

Да. Вы можете развернуть [виртуальные сетевые устройства оптимизации глобальной сети](https://azure.microsoft.com/marketplace/?term=wan+optimization), предоставляемые несколькими поставщиками через Azure Marketplace.

## <a name="configuration"></a>Конфигурация

### <a name="what-tools-do-i-use-to-create-a-vnet"></a>Какие средства необходимо использовать для создания виртуальной сети?
Для создания или настройки виртуальной сети можно использовать указанные ниже средства.

* Портал Azure (для классических виртуальных сетей и виртуальных сетей Resource Manager).
* Файл конфигурации сети (netcfg — только для классических виртуальных сетей). См. статью [Настройка виртуальной сети с помощью файла конфигурации сети](virtual-networks-using-network-configuration-file.md).
* PowerShell (для классических виртуальных сетей и виртуальных сетей Resource Manager).
* Azure CLI (для классических виртуальных сетей и виртуальных сетей Resource Manager).

### <a name="what-address-ranges-can-i-use-in-my-vnets"></a>Какие диапазоны адресов можно использовать в виртуальных сетях?
Любой диапазон IP-адресов, определенный в [RFC 1918](http://tools.ietf.org/html/rfc1918). Например, 10.0.0.0/16.

### <a name="can-i-have-public-ip-addresses-in-my-vnets"></a>Можно ли в виртуальных сетях использовать общедоступные IP-адреса?
Да. Дополнительные сведения о диапазонах общедоступных IP-адресов см. в статье [Общедоступное пространство IP-адресов в виртуальной сети (VNet)](virtual-networks-public-ip-within-vnet.md). Ваши общедоступные IP-адреса не будут доступны непосредственно из Интернета.

### <a name="is-there-a-limit-to-the-number-of-subnets-in-my-vnet"></a>Существует ли ограничение на количество подсетей в виртуальной сети?
Да. См. дополнительные сведения об [ограничениях в Azure](../azure-subscription-service-limits.md#networking-limits). Адресные пространства подсетей не должны пересекаться друг с другом.

### <a name="are-there-any-restrictions-on-using-ip-addresses-within-these-subnets"></a>Существуют ли ограничения на использование IP-адресов в пределах этих подсетей?
Да. Azure резервирует некоторые IP-адреса в каждой подсети. Зарезервированы первый и последний IP-адреса подсетей (для соответствия требованиям протокола), а также еще 3 адреса, используемые для служб Azure.

### <a name="how-small-and-how-large-can-vnets-and-subnets-be"></a>Насколько большими или малыми могут быть виртуальные сети и подсети?
Самая маленькая поддерживаемая подсеть — /29, а самая большая — /8 (согласно определениям подсети CIDR).

### <a name="can-i-bring-my-vlans-to-azure-using-vnets"></a>Можно ли переносить виртуальные локальные сети в Azure с помощью виртуальных сетей?
Нет. Виртуальные сети представляют собой наложения Layer-3. Azure не поддерживает семантику Layer-2.

### <a name="can-i-specify-custom-routing-policies-on-my-vnets-and-subnets"></a>Можно ли в виртуальных сетях и подсетях задавать настраиваемые политики маршрутизации?
Да. Вы можете использовать пользовательскую маршрутизацию. Дополнительные сведения о пользовательской маршрутизации см. в статье [Что такое определяемые пользователем маршруты и IP-пересылка?](virtual-networks-udr-overview.md)

### <a name="do-vnets-support-multicast-or-broadcast"></a>Поддерживают ли виртуальные сети технологии многоадресной или широковещательной рассылки?
Нет. Технологии многоадресной или широковещательной рассылки не поддерживаются.

### <a name="what-protocols-can-i-use-within-vnets"></a>Какие протоколы можно использовать в рамках виртуальных сетей?
Вы можете использовать в виртуальных сетях протоколы TCP, UDP и ICMP, относящиеся к стеку TCP/IP. В виртуальных сетях блокируются многоадресные и широковещательные рассылки, инкапсулированные пакеты IP in IP и пакеты, передаваемые по протоколу GRE (Generic Routing Encapsulation). 

### <a name="can-i-ping-my-default-routers-within-a-vnet"></a>Можно ли в виртуальной сети проверять связь с маршрутизаторами по умолчанию?
Нет.

### <a name="can-i-use-tracert-to-diagnose-connectivity"></a>Можно ли использовать команду tracert для диагностики подключения?
Нет.

### <a name="can-i-add-subnets-after-the-vnet-is-created"></a>Можно ли добавлять подсети после создания виртуальной сети?
Да. Вы можете в любое время добавлять подсети в виртуальные сети при условии, что адрес добавляемой подсети не принадлежит другой подсети виртуальной сети.

### <a name="can-i-modify-the-size-of-my-subnet-after-i-create-it"></a>Можно ли изменить размер подсети после ее создания?
Да. Вы можете добавлять, удалять, расширять или уменьшать подсеть (если в ней не развернуты виртуальные машины и службы).

### <a name="can-i-modify-subnets-after-i-created-them"></a>Можно ли изменять подсети после их создания?
Да. Вы можете добавлять, удалять и изменять блоки CIDR, используемые виртуальной сетью.

### <a name="can-i-connect-to-the-internet-if-i-am-running-my-services-in-a-vnet"></a>Могут ли службы, работающие в виртуальной сети, подключиться к Интернету?
Да. Все службы, развернутые в виртуальной сети, могут подключаться к Интернету. У каждой облачной службы, развернутой в Azure, есть виртуальный IP-адрес. Чтобы эти службы могли принимать подключения из Интернета, необходимо определить входные конечные точки для ролей "платформа как услуга" и конечные точки для виртуальных машин.

### <a name="do-vnets-support-ipv6"></a>Поддерживают ли виртуальные сети протокол IPv6?
Нет. В настоящее время невозможно использовать протокол IPv6 в виртуальных сетях.

### <a name="can-a-vnet-span-regions"></a>Может ли виртуальная сеть охватывать несколько регионов?
Нет. Виртуальную сеть можно использовать только в пределах одного региона.

### <a name="can-i-connect-a-vnet-to-another-vnet-in-azure"></a>Можно ли подключить виртуальную сеть к другой виртуальной сети в Azure?
Да. Вы можете подключить одну виртуальную сеть к другой с помощью следующих методов.
- VPN-шлюз Azure. Дополнительные сведения см. в статье [Настройка подключения между виртуальными сетями на портале Azure](../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md). 
- Пиринговая связь между виртуальными сетями. Дополнительные сведения см. в [этой статье](virtual-network-peering-overview.md).

## <a name="name-resolution-dns"></a>Разрешение имен (DNS)

### <a name="what-are-my-dns-options-for-vnets"></a>Каковы параметры DNS для виртуальных сетей?
Все доступные параметры DNS есть в таблице решений на странице [Разрешение имен для виртуальных машин и экземпляров ролей](virtual-networks-name-resolution-for-vms-and-role-instances.md) .

### <a name="can-i-specify-dns-servers-for-a-vnet"></a>Можно ли указать DNS-серверы для виртуальной сети?
Да. Вы можете указать IP-адреса DNS-сервера в параметрах виртуальной сети. Он будет использоваться в качестве DNS-сервера по умолчанию для всех виртуальных машин в виртуальной сети.

### <a name="how-many-dns-servers-can-i-specify"></a>Сколько DNS-серверов можно указать?
См. дополнительные сведения об [ограничениях в Azure](../azure-subscription-service-limits.md#networking-limits).

### <a name="can-i-modify-my-dns-servers-after-i-have-created-the-network"></a>Можно ли изменять DNS-серверы после создания сети?
Да. Вы можете в любое время изменить список DNS-серверов для виртуальной сети. После изменения списка DNS-серверов необходимо перезапустить все виртуальные машины в виртуальной сети, чтобы они начали использовать параметры нового DNS-сервера.

### <a name="what-is-azure-provided-dns-and-does-it-work-with-vnets"></a>Что такое DNS, предоставленная Azure, и работает ли она с виртуальными сетями?
DNS, предоставленная Azure, — это мультитенантная служба DNS, предлагаемая корпорацией Майкрософт. Azure регистрирует в этой службе все ваши виртуальные машины и экземпляры ролей облачной службы. Эта служба выполняет разрешение имен по имени узла для виртуальных машин и экземпляров ролей, содержащихся в одной и той же облачной службе, и по FQDN для виртуальных машин и экземпляров ролей в одной и той же виртуальной сети. Дополнительные сведения о DNS см. в статье [Разрешение имен для ВМ и экземпляров ролей](virtual-networks-name-resolution-for-vms-and-role-instances.md).

> [!NOTE]
> Сейчас применяется следующее ограничение: разрешение имен между клиентами с помощью службой DNS, предоставленной Azure, выполняется только для первых 100 облачных служб в виртуальной сети. Если вы используете собственный DNS-сервер, то это ограничение не применяется.
> 
> 

### <a name="can-i-override-my-dns-settings-on-a-per-vm--service-basis"></a>Можно ли переопределять параметры DNS для каждой виртуальной машины или службы?
Да. Чтобы переопределить параметры сети по умолчанию, можно задать DNS-серверы для каждой службы. Тем не менее, мы рекомендуем максимально широко использовать DNS уровня сети.

### <a name="can-i-bring-my-own-dns-suffix"></a>Можно использовать собственный суффикс DNS?
Нет. Невозможно указать пользовательский суффикс DNS для виртуальных сетей.

## <a name="connecting-virtual-machines"></a>Подключение виртуальных машин

### <a name="can-i-deploy-vms-to-a-vnet"></a>Можно ли развертывать виртуальные машины в виртуальной сети?
Да. Все сетевые интерфейсы (сетевые адаптеры), подключенные к виртуальной машине, развернутой по модели развертывания с помощью Resource Manager, должны быть подключены к виртуальной сети. Виртуальные машины, развернутые с помощью классической модели развертывания, можно (но не обязательно) подключать к виртуальной сети.

### <a name="what-are-the-different-types-of-ip-addresses-i-can-assign-to-vms"></a>Какие типы IP-адресов можно назначать для виртуальных машин?
* **Частные:** назначаются каждому сетевому адаптеру на каждой виртуальной машине. Для назначения адресов может применяться статический или динамический метод. Частные IP-адреса назначаются из диапазона, указанного в параметрах подсети виртуальной сети. Ресурсам, развернутым с помощью классической модели развертывания, назначаются частные IP-адреса, даже если они не подключены к виртуальной сети. Динамический частный IP-адрес остается назначенным ресурсу, пока этот ресурс не будет удален (относится к виртуальным машинам и слотам развертывания облачной службы). Динамический частный IP-адрес может измениться при перезапуске виртуальной машины после того, как она была остановлена (освобождена). Статический частный IP-адрес остается назначенным ресурсу, пока этот ресурс не будет удален. Если необходимо присвоить ресурсу постоянный частный IP-адрес, используемый вплоть до удаления ресурса, назначьте ему частный IP-адрес с помощью статического метода.
* **Общедоступные:** могут назначаться для сетевых адаптеров, подключенных к виртуальным машинам, развернутым по модели развертывания с помощью Azure Resource Manager. Для назначения адресов может применяться статический или динамический метод распределения. Все виртуальные машины и экземпляры ролей облачных служб, развернутые по классической модели развертывания, существуют в облачной службе, которой назначается *динамический* общедоступный виртуальный IP-адрес. В качестве виртуального IP-адреса может быть назначен общедоступный *статический* IP-адрес, который также называется [зарезервированным IP-адресом](virtual-networks-reserved-public-ip.md). Общедоступные IP-адреса можно назначать отдельным виртуальным машинам или экземплярам ролей облачных служб, развернутым по классической модели. Эти адреса называются [общедоступными IP-адресами уровня экземпляра (ILPIP)](virtual-networks-instance-level-public-ip.md) и могут назначаться динамически.

### <a name="can-i-reserve-a-private-ip-address-for-a-vm-that-i-will-create-at-a-later-time"></a>Можно ли зарезервировать частный IP-адрес для виртуальной машины, которую я планирую создать позже?
Нет. Зарезервировать частный IP-адрес невозможно. Если частный IP-адрес доступен, DHCP-сервер назначит его виртуальной машине или экземпляру роли. Это может оказаться любая виртуальная машина, а не обязательно та, для которой вы хотите использовать определенный частный IP-адрес. Но вы можете изменить частный IP-адрес уже созданной виртуальной машины на любой доступный частный IP-адрес.

### <a name="do-private-ip-addresses-change-for-vms-in-a-vnet"></a>Изменяются ли частные IP-адреса виртуальных машин в виртуальной сети?
Здесь возможны варианты в зависимости от обстоятельств. Динамические частные IP-адреса сохраняются за виртуальной машиной, пока она не будет остановлена (освобождена) или удалена. Статические частные IP-адреса не освобождаются, пока виртуальная машина не будет удалена.

### <a name="can-i-manually-assign-ip-addresses-to-nics-within-the-vm-operating-system"></a>Можно ли вручную назначать IP-адреса для сетевых адаптеров в операционной системе виртуальной машины?
Да, но делать это не рекомендуется. Если вручную изменить IP-адрес для сетевого адаптера в операционной системе виртуальной машины, вы потеряете подключение к этой виртуальной машине, когда изменится IP-адрес, назначенный этому сетевому адаптеру на виртуальной машине Azure.

### <a name="what-happens-to-my-ip-addresses-if-i-stop-a-cloud-service-deployment-slot-or-shutdown-a-vm-from-within-the-operating-system"></a>Что происходит с IP-адресами, когда я останавливаю слот развертывания облачной службы или завершаю работу виртуальной машины средствами операционной системы?
Ничего. IP-адреса (общедоступный виртуальный, общедоступный или частный) остаются назначенными для слота развертывания облачной службы или для виртуальной машины. Динамические адреса освобождаются только в том случае, когда виртуальная машина остановлена (освобождена) или удалена либо удален слот развертывания облачной службы. Когда вы нажимаете для виртуальной машины кнопку **Остановить** на портале Azure, виртуальная машина переходит в состояние "Остановлено (освобождено)". В этом случае виртуальная машина теряет назначенные ей IP-адреса.

### <a name="can-i-move-vms-from-one-subnet-to-another-subnet-in-a-vnet-without-re-deploying"></a>Можно ли перемещать виртуальные машины между подсетями виртуальной сети без повторного развертывания?
Да. Дополнительные сведения см. в статье [Перемещение виртуальной машины или экземпляра роли в другую подсеть](virtual-networks-move-vm-role-to-subnet.md).

### <a name="can-i-configure-a-static-mac-address-for-my-vm"></a>Можно ли настроить статический MAC-адрес для виртуальной машины?
Нет. Настроить MAC-адрес статически невозможно.

### <a name="will-the-mac-address-remain-the-same-for-my-vm-once-it-has-been-created"></a>Остается ли MAC-адрес виртуальной машины неизменным после ее создания?
Да, MAC-адрес остается неизменным для виртуальной машины, развернутой по модели с помощью Resource Manager или по классической модели развертывания, пока виртуальная машина не будет удалена. Ранее MAC-адрес освобождался также при остановке (освобождении) виртуальной машины, но теперь MAC-адрес сохраняется даже для виртуальных машин в состоянии "Освобождено".

### <a name="can-i-connect-to-the-internet-from-a-vm-in-a-vnet"></a>Можно ли подключиться к Интернету из виртуальной машины, находящейся в виртуальной сети?
Да. Все виртуальные машины и экземпляры ролей облачных служб, развернутые в виртуальной сети, могут подключаться к Интернету.

## <a name="azure-services-that-connect-to-vnets"></a>Службы Azure, которые подключаются к виртуальным сетям

### <a name="can-i-use-azure-app-service-web-apps-with-a-vnet"></a>Могу ли я использовать веб-приложения службы приложений Azure с виртуальной сетью?
Да. Вы можете развернуть веб-приложения внутри виртуальной сети, используя среду службы приложений (ASE). Все веб-приложения могут безопасно подключаться к виртуальной сети Azure и получать доступ к ее ресурсам, если для нее настроено подключение типа "точка — сеть". Дополнительные сведения см. в следующих статьях:

* [Создание веб-приложений в среде службы приложений](../app-service/environment/app-service-web-how-to-create-a-web-app-in-an-ase.md)
* [Интеграция приложения с виртуальной сетью Azure](../app-service/web-sites-integrate-with-vnet.md)
* [Использование интеграции виртуальной сети и гибридных подключений с веб-приложениями](../app-service/web-sites-integrate-with-vnet.md#hybrid-connections-and-app-service-environments)

### <a name="can-i-deploy-cloud-services-with-web-and-worker-roles-paas-in-a-vnet"></a>Можно ли развернуть в виртуальной сети облачные службы с веб-ролями и рабочими ролями (платформа как услуга)?
Да. Вы можете (по своему усмотрению) развертывать экземпляры ролей облачных служб в виртуальных сетях. Для этого нужно указать имя виртуальной сети и сопоставления роли и подсети в разделе конфигурации сети в конфигурации службы. Не нужно обновлять никакие двоичные файлы.

### <a name="can-i-connect-a-virtual-machine-scale-set-vmss-to-a-vnet"></a>Можно ли подключить к виртуальной сети масштабируемый набор виртуальных машин?
Да. Масштабируемый набор виртуальных машин нужно обязательно подключить к виртуальной сети.

### <a name="can-i-move-my-services-in-and-out-of-vnets"></a>Можно ли перемещать службы в виртуальные сети и из них?
Нет. Невозможно перемещать службы в виртуальные сети и из них. Чтобы переместить службу в другую виртуальную сеть, потребуется удалить ее, а затем повторно развернуть.

## <a name="security"></a>Безопасность

### <a name="what-is-the-security-model-for-vnets"></a>Какова модель безопасности для виртуальных сетей?
Виртуальные сети полностью изолированы друг от друга и от других служб, размещенных в инфраструктуре Azure. Виртуальная сеть — это граница доверия.

### <a name="can-i-restrict-inbound-or-outbound-traffic-flow-to-vnet-connected-resources"></a>Можно ли ограничить входящий или исходящий трафик к ресурсам, подключенным к виртуальной сети?
Да. Вы можете применить [группы безопасности сети](virtual-networks-nsg.md) для отдельных подсетей в виртуальной сети и (или) для подключенных к виртуальной сети сетевых адаптеров.

### <a name="can-i-implement-a-firewall-between-vnet-connected-resources"></a>Можно ли развернуть брандмауэр между ресурсами, подключенными к виртуальной сети?
Да. Вы можете развернуть [виртуальные сетевые устройства с ролью брандмауэра](https://azure.microsoft.com/en-us/marketplace/?term=firewall), предоставляемые несколькими поставщиками через Azure Marketplace.

### <a name="is-there-information-available-about-securing-vnets"></a>Могу ли я получить информацию о защите виртуальных сетей?
Да. Дополнительные сведения см. в разделе [Обзор сетевой безопасности Azure](../security/security-network-overview.md).

## <a name="apis-schemas-and-tools"></a>API-интерфейсы, схемы и инструменты

### <a name="can-i-manage-vnets-from-code"></a>Можно ли управлять виртуальными сетями из кода?
Да. Вы можете использовать интерфейсы REST API для виртуальных сетей, развернутых по модели развертывания [с помощью Azure Resource Manager](https://msdn.microsoft.com/library/mt163658.aspx) или [классической модели развертывания (управление службами)](http://go.microsoft.com/fwlink/?LinkId=296833).

### <a name="is-there-tooling-support-for-vnets"></a>Существуют ли специальные программные средства для работы с виртуальными сетями?
Да. Дополнительные сведения об использовании средств:
- Развертывание виртуальных сетей по модели [Azure Resource Manager](virtual-networks-create-vnet-arm-pportal.md) или [классической модели развертывания](virtual-networks-create-vnet-classic-pportal.md) с помощью портала Azure.
- Управление виртуальными сетями, развернутыми по модели [Azure Resource Manager](/powershell/resourcemanager/azurerm.network/v3.1.0/azurerm.network.md) или [классической модели развертывания](/powershell/module/azure/?view=azuresmps-3.7.0), с помощью PowerShell.
- Управление виртуальными сетями, развернутыми по любой из двух моделей развертывания, с помощью [интерфейса командной строки Azure](../virtual-machines/azure-cli-arm-commands.md#azure-network-commands-to-manage-network-resources).  
