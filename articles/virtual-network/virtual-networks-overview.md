---
title: "Виртуальная сеть Azure | Документация Майкрософт"
description: "Узнайте об основных понятиях и функциях виртуальной сети Azure."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 9633de4b-a867-4ddf-be3c-a332edf02e24
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/23/2017
ms.author: jdial
ms.openlocfilehash: 6d6afd2b9b956138ed400fbd6cabd3b480fde0f0
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-virtual-network"></a>Виртуальная сеть Azure

Служба виртуальной сети Azure позволяет безопасно подключать ресурсы Azure между собой с помощью виртуальных сетей. Виртуальная сеть — это представление вашей собственной сети в облаке. Это логическая изоляция облака Azure, выделенного для вашей подписки. Виртуальные сети можно также подключать к локальной сети. На следующем рисунке показаны некоторые возможности службы виртуальной сети Azure:

![Схема сети](./media/virtual-networks-overview/virtual-network-overview.png)

Чтобы получить дополнительные сведения о следующих возможностях виртуальной сети Azure, щелкните их:
- **[Изоляция.](#isolation)** Виртуальные сети полностью изолированы друг от друга. Это позволяет создавать отдельные виртуальные сети для разработки, тестирования и эксплуатации, использующие одинаковые блоки адресов CIDR. И наоборот, можно создать несколько виртуальных сетей, использующих различные блоки адресов CIDR, и соединить их. Виртуальную сеть можно разделить на несколько подсетей. Azure предоставляет возможность внутреннего разрешения имен для экземпляров ролей виртуальных машин и облачных служб, подключенных к виртуальной сети. При необходимости можно настроить виртуальную сеть для использования собственных DNS-серверов вместо внутреннего разрешения имен Azure.
- **[Подключение к Интернету.](#internet)** По умолчанию все экземпляры ролей виртуальных машин и облачных служб Azure, подключенных к виртуальной сети, имеют доступ к Интернету. При необходимости можно также включить входящий доступ к определенным ресурсам.
- **[Подключение ресурсов Azure.](#within-vnet)** Ресурсы Azure, такие как облачные службы и виртуальные машины, можно подключить к одной виртуальной сети. Ресурсы могут подключаться друг к другу по частному IP-адресу, даже если они находятся в разных подсетях. В Azure предусмотрена маршрутизация по умолчанию между подсетями, виртуальными сетями и локальными сетями, поэтому вам не нужно настраивать маршруты и управлять ими.
- **[Подключение к виртуальной сети.](#connect-vnets)** Виртуальные сети можно подключить между собой. Таким образом ресурсы в этих виртуальных сетях смогут взаимодействовать.
- **[Локальное подключение.](#connect-on-premises)** Виртуальные сети можно подключить к локальным сетям через частные сетевые каналы между вашей сетью и Azure либо путем VPN-подключения типа "сеть — сеть" в Интернете.
- **[Фильтрация трафика.](#filtering)** Входящий и исходящий сетевой трафик экземпляров ролей виртуальных машин и облачных служб можно фильтровать по исходному и конечному IP-адресу и порту, а также по протоколу.
- **[Маршрутизация.](#routing)** При необходимости можно переопределить маршрутизацию Azure по умолчанию, настроив собственные правила или используя маршруты BGP через сетевой шлюз.

## <a name = "isolation"></a>Изоляция и сегментирование сети

Вы можете реализовать несколько виртуальных сетей в пределах [подписки](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#subscription) и [региона](../azure-glossary-cloud-terminology.md?toc=%2fazure%2fvirtual-network%2ftoc.json#region) Azure. Виртуальные сети изолированы друг от друга. Вот что можно сделать для каждой из них:
- Указать пользовательское пространство частных IP-адресов, в котором используются общедоступные и частные адреса (RFC 1918). Azure назначает ресурсам, подключенным к виртуальной сети, частный IP-адрес из определенного адресного пространства.
- Разделить виртуальную сеть на подсети и выделить каждой из них часть адресного пространства виртуальной сети.
- Использовать разрешение имен Azure или указать собственный DNS-сервер, который будут использовать ресурсы, подключенные к виртуальной сети. Дополнительные сведения о разрешении имен в виртуальных сетях см. в статье [Разрешение имен для ВМ и экземпляров ролей](virtual-networks-name-resolution-for-vms-and-role-instances.md).

## <a name = "internet"></a>Подключение к Интернету
По умолчанию все ресурсы, подключенные к виртуальной сети, имеют исходящее подключение к Интернету. Частный IP-адрес ресурса методом SNAT преобразовывается в общедоступный IP-адрес в инфраструктуре Azure. Дополнительные сведения об исходящих интернет-подключениях см. в статье [Общие сведения об исходящих подключениях в Azure](..\load-balancer\load-balancer-outbound-connections.md?toc=%2fazure%2fvirtual-network%2ftoc.json#standalone-vm-with-no-instance-level-public-ip-address). Подключение по умолчанию можно изменить, реализовав пользовательскую маршрутизацию и фильтрацию трафика.

Для входящего подключения к ресурсам Azure из Интернета или исходящего подключения к Интернету без SNAT ресурсу необходимо назначить общедоступный IP-адрес. Дополнительные сведения об общедоступных IP-адресах см. в [этой статье](virtual-network-public-ip-address.md).

## <a name="within-vnet"></a>Подключение ресурсов Azure
К виртуальной сети можно подключить несколько ресурсов Azure, таких как виртуальные машины, облачные службы, среды службы приложений и масштабируемые наборы виртуальных машин. Виртуальные машины подключаются к подсети в виртуальной сети с помощью сетевого интерфейса. Дополнительные сведения о сетевых интерфейсах см. в [этой статье](virtual-network-network-interface.md).

## <a name="connect-vnets"></a>Подключение виртуальных сетей

Виртуальные сети можно подключать между собой. Таким образом ресурсы в этих виртуальных сетях смогут взаимодействовать. Чтобы подключить виртуальные сети между собой, воспользуйтесь одним или обоими способами:
- **Пиринг.** Позволяет взаимодействовать ресурсам, подключенным к разным виртуальным сетям Azure, в одном расположении Azure. Значения пропускной способности и задержки виртуальных сетей совпадают, как и при подключении ресурсов к одной виртуальной сети. Дополнительные сведения о пиринге между виртуальными сетями см. в [этой статье](virtual-network-peering-overview.md).
- **Подключение между виртуальными сетями.** Позволяет взаимодействовать ресурсам, подключенным к разным виртуальным сетям Azure, в одном или в разных расположениях Azure. В отличие от пиринга, между виртуальными сетями пропускная способность ограничена, так как трафик должен проходить через VPN-шлюз Azure. Дополнительные сведения о подключении между виртуальными сетями см. в статье [Настройка подключения между виртуальными сетями на портале Azure](../vpn-gateway/vpn-gateway-howto-vnet-vnet-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json).

## <a name="connect-on-premises"></a>Подключение к локальной сети

Локальную сеть можно подключить к виртуальной, используя сочетание следующих способов:
- **VPN типа "точка — сеть".** Устанавливается между компьютером, подключенным к вашей сети, и виртуальной сетью. Этот тип подключения идеально подходит для новичков, не умеющих работать в Azure, или для разработчиков, так как при его использовании существующую сеть почти не нужно менять. Подключение осуществляется по протоколу SSTP для обеспечения зашифрованного обмена данными между компьютером и виртуальной сетью через Интернет. Задержку VPN типа "точка — сеть" невозможно спрогнозировать, так как трафик проходит через Интернет.
- **VPN типа "сеть — сеть".** Устанавливается между VPN-устройством и VPN-шлюзом Azure. Используя такое подключение, авторизованные локальные ресурсы могут получить доступ к виртуальной сети. Это VPN-подключение по протоколу IPSec/IKE, благодаря которому локальные устройства и VPN-шлюз Azure могут взаимодействовать по зашифрованному каналу через Интернет. Задержку VPN типа "сеть — сеть" невозможно спрогнозировать, так как трафик проходит через Интернет.
- **Azure ExpressRoute.** Устанавливается между вашей сетью и Azure через партнера ExpressRoute. Это подключение является закрытым. Трафик не передается через Интернет. Задержку для подключения ExpressRoute можно спрогнозировать, так как трафик не передается через Интернет.

Дополнительные сведения о предыдущих способах подключения см. в разделе [Схемы топологий подключения](../vpn-gateway/vpn-gateway-about-vpngateways.md?toc=%2fazure%2fvirtual-network%2ftoc.json#diagrams).

## <a name="filtering"></a>Фильтрация сетевого трафика
Сетевой трафик между подсетями можно фильтровать следующими способами:
- **Группы безопасности (NSG).** Каждая NSG может содержать несколько правил безопасности относительно входящего и исходящего трафика для его фильтрации по исходному и конечному IP-адресу, порту и протоколу. NSG можно применять к каждой сетевой карте на виртуальной машине, а также к подсети, к которой подключена сетевая карта или другой ресурс Azure. Дополнительные сведения о группах безопасности сети см. в [этой статье](virtual-networks-nsg.md).
- **Виртуальные сетевые устройства.** Виртуальное сетевое устройство представляет собой виртуальную машину, на которой выполняется программное обеспечение, выступающее в роли сети, такое как брандмауэр. Список доступных виртуальных сетевых устройств см. в [Azure Marketplace](https://azuremarketplace.microsoft.com/marketplace/apps/category/networking?page=1&subcategories=appliances). Кроме того, доступны виртуальные сетевые устройства, обеспечивающие оптимизацию WAN, а также предоставляющие другие возможности для сетевого трафика. Виртуальные сетевые устройства обычно используются с определяемыми пользователем маршрутами или с маршрутами BGP. С помощью виртуальных сетевых устройств также можно фильтровать трафик между виртуальными сетями.

## <a name="routing"></a>Маршрутизация сетевого трафика

Azure создает таблицы маршрутов, используя которые ресурсы, подключенные к любой подсети в любой сети, могут по умолчанию взаимодействовать. Чтобы переопределить маршруты по умолчанию, создаваемые в Azure, используйте следующие варианты:
- **Определяемые пользователем маршруты.** Вы можете создать пользовательские таблицы маршрутов с маршрутами, определяющими направление передачи трафика для каждой подсети. Дополнительные сведения об определяемых пользователем маршрутах см. в [этой статье](virtual-networks-udr-overview.md).
- **Маршруты BGP.** При подключении виртуальной сети к локальной сети с помощью VPN-шлюза или канала ExpressRoute Azure можно распространить маршруты BGP в виртуальных сетях.

## <a name="pricing"></a>Цены

За использование виртуальных сетей, подсетей, таблиц маршрутов или групп безопасности сети плата не взимается. Для использования пропускной способности при исходящем подключении к Интернету, общедоступных IP-адресов, пиринга между виртуальными сетями, VPN-шлюзов и ExpressRoute имеются собственные структуры ценообразования. Дополнительные сведения см. на страницах о ценах на [виртуальную сеть](https://azure.microsoft.com/pricing/details/virtual-network), [VPN-шлюз](https://azure.microsoft.com/pricing/details/vpn-gateway) и [ExpressRoute](https://azure.microsoft.com/pricing/details/expressroute).

## <a name="faq"></a>Часто задаваемые вопросы

Чтобы просмотреть часто задаваемые вопросы о виртуальной сети, ознакомьтесь со статьей [Часто задаваемые вопросы о виртуальной сети](virtual-networks-faq.md).


## <a name="next-steps"></a>Дальнейшие действия

- Создайте первую виртуальную сеть и подключите к ней несколько виртуальных машин, выполнив действия, описанные в [этой статье](virtual-network-get-started-vnet-subnet.md).
- Установите подключение типа "точка — сеть" к виртуальной сети, выполнив действия, описанные в [этой статье](../vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json).
- Изучите другие ключевые [сетевые возможности](../networking/networking-overview.md?toc=%2fazure%2fvirtual-network%2ftoc.json) Azure.
