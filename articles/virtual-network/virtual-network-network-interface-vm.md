---
title: "Добавление или удаление сетевых интерфейсов виртуальных машин Azure | Документация Майкрософт"
description: "Узнайте, как добавлять и удалять сетевые интерфейсы виртуальных машин."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/15/2017
ms.author: jdial
ms.openlocfilehash: abe6abb942d206330e809f3aef388b846d7d7c7f
ms.sourcegitcommit: 3f33787645e890ff3b73c4b3a28d90d5f814e46c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/03/2018
---
# <a name="add-network-interfaces-to-or-remove-network-interfaces-from-virtual-machines"></a>Сетевые интерфейсы для добавления или удаления сетевых интерфейсов из виртуальных машин

Узнайте, как добавить имеющейся сетевой интерфейс при создании виртуальной машины, а также как добавить или удалить сетевые интерфейсы имеющейся виртуальной машины, которая остановлена (освобождена). Сетевой интерфейс позволяет виртуальной машине Azure взаимодействовать с Интернетом, Azure и локальными ресурсами. У виртуальной машины может быть один или несколько сетевых интерфейсов. 

При необходимости см. инструкции по [добавлению, изменению и удалению IP-адресов для сетевых интерфейсов Azure](virtual-network-network-interface-addresses.md). Чтобы создать, изменить или удалить сетевые интерфейсы, ознакомьтесь со статьей [Создание, изменение или удаление сетевых интерфейсов](virtual-network-network-interface.md).

## <a name="before"></a>Перед началом работы

Перед выполнением действий, описанных в любом разделе этой статьи, выполните следующие задачи.

- Войдите на [портал](https://portal.azure.com) Azure, в интерфейс командной строки Azure (Azure CLI) или Azure PowerShell с помощью учетной записи Azure. Если у вас нет учетной записи Azure, зарегистрируйтесь для получения [бесплатной пробной учетной записи](https://azure.microsoft.com/free).
- Чтобы использовать команды PowerShell для выполнения задач в этой статье, [установите и настройте Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия командлетов Azure PowerShell. Для получения справки по командам PowerShell с примерами введите `get-help <command> -full`. Вместо установке Azure PowerShell, можно использовать консоль облако Azure. Оболочка облако Azure — свободного PowerShell, который можно запустить непосредственно на портале Azure. Он имеет Azure PowerShell предварительно установить и настроить для использования с учетной записью. Использование облачной среды, щелкните оболочки облака **> _** кнопку в верхней части [портала](https://portal.azure.com) и выберите команду PowerShell в левом верхнем углу, когда появится окно командной.
- Чтобы использовать команды интерфейса командной строки Azure (Azure CLI) для выполнения задач в этой статье, [установите и настройте Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена самая последняя версия Azure CLI. Для получения справки по командам интерфейса командной строки введите `az <command> --help`. Вы можете не устанавливать интерфейс командной строки и его зависимости, а воспользоваться Azure Cloud Shell. Azure Cloud Shell — это бесплатная оболочка Bash, которую можно запускать непосредственно на портале Azure. Она включает предварительно установленный интерфейс Azure CLI и настроена для использования с вашей учетной записью. Использование облачной среды, щелкните оболочки облака **> _** кнопку в верхней части [портала](https://portal.azure.com) и выберите в левом верхнем углу Bash, когда появится окно командной.

## <a name="vm-create"></a>Добавление имеющихся сетевых интерфейсов к новой виртуальной машине

При создании виртуальной машины с помощью портала автоматически создается сетевой интерфейс с параметрами по умолчанию, который подключается к виртуальной машине. На портале Azure невозможно добавить имеющиеся сетевые интерфейсы в новую виртуальную машину или создать виртуальную машину с несколькими сетевыми интерфейсами. Это можно сделать с помощью интерфейса командной строки или PowerShell. Прежде чем использовать PowerShell или CLI для создания виртуальной Машины с помощью существующего сетевого интерфейса, однако, ознакомьтесь с [ограничения](#constraints). При создании виртуальной машины с несколькими сетевыми интерфейсами, необходимо также настроить операционную систему для правильного использования их после создания виртуальной Машины. Дополнительные сведения см. в разделе Настройка [Linux](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics) или [Windows](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics) для нескольких сетевых интерфейсов.

**Команды** перед созданием виртуальной Машины, создать сетевой интерфейс, с помощью действия, описанные в [создать сетевой интерфейс](virtual-network-network-interface.md#create-a-network-interface).

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az vm create](/cli/azure/vm?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|PowerShell|[New-AzureRmVM](/powershell/module/azurerm.compute/new-azurermvm?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="vm-add-nic"></a>Добавьте сетевой интерфейс существующей виртуальной Машины

1. Войдите на портал Azure.
2. В поле поиска в верхней части портала найдите имя виртуальной машины, необходимо добавить сетевой интерфейс, или перейдите к ВМ, щелкнув **все службы**, затем **виртуальные машины**. Найдя виртуальную Машину, щелкните ее. Виртуальной Машины, необходимо добавить сетевой интерфейс должен поддерживать количество сетевых интерфейсов, который вы хотите добавить. Чтобы узнать, сколько сетевых интерфейсов поддерживается каждым из размеров виртуальной машины, ознакомьтесь со статьями [Размеры виртуальных машин Linux в Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Размеры виртуальных машин Windows в Azure](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json).  
3. Нажмите кнопку **Обзор**в разделе **параметры**. Нажмите кнопку **остановить**и подождите, пока **состояние** виртуальной машины меняется на *остановлена (освобождена)*. 
4. Нажмите кнопку **сети**в разделе **параметры**.
5. Нажмите кнопку **присоединить сетевой интерфейс**. Из списка существующих сетевых интерфейсов, которые не связаны в настоящее время другой виртуальной Машиной выберите сетевой интерфейс, который вы хотите подключить. Сетевой интерфейс, который выбран не может иметь accelerated сети включена и не может быть назначен для IPv6-адрес должен существовать в той же виртуальной сети, как виртуальная сеть, сетевой интерфейс в настоящее время подключен к виртуальной Машине. Если у вас нет существующего сетевого интерфейса, вам необходимо создать. Чтобы создать сетевой интерфейс, щелкните **создать сетевой интерфейс**. Дополнительные сведения о создании сетевого интерфейса см. в разделе [создать сетевой интерфейс](virtual-network-network-interface.md#create-a-network-interface). Дополнительные сведения о дополнительных ограничений при добавлении сетевых интерфейсов виртуальных машин см. в разделе [ограничения](#constraints).
6. Последовательно выберите **ОК**.
7. Нажмите кнопку **Обзор**в разделе **параметры**. Нажмите кнопку **запустить** для запуска виртуальной машины.
8. Настройка операционной системы виртуальной Машины для правильного использования нескольких сетевых интерфейсов. Дополнительные сведения см. в разделе Настройка [Linux](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics) или [Windows](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-guest-os-for-multiple-nics) для нескольких сетевых интерфейсов.

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|az vm nic add — см. [раздел руководства](/cli/azure/vm/nic?toc=%2fazure%2fvirtual-network%2ftoc.json#add) или [подробные инструкции](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#add-a-nic-to-a-vm)|
|PowerShell|Add-AzureRmVMNetworkInterface — см. [раздел руководства](/powershell/module/azurerm.compute/add-azurermvmnetworkinterface?toc=%2fazure%2fvirtual-network%2ftoc.json) или [подробные инструкции](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#add-a-nic-to-an-existing-vm)|

## <a name="vm-view-nic"></a> Просмотр сетевых интерфейсов для виртуальной машины

Вы можете просмотреть сетевые интерфейсы, подключенные к виртуальной машине, чтобы изучить конфигурацию каждого из них, а также назначенные им IP-адреса. 

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетной записи, которой назначены роли "Владелец", "Участник" или "Участник сети" для подписки. Дополнительные сведения о назначении ролей учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В верхней части портала Azure в поле с текстом *Поиск ресурсов* введите *виртуальные машины*. Когда **виртуальные машины** появятся в результатах поиска, щелкните их.
3. Щелкните имя виртуальной Машины, для просмотра сетевых интерфейсов.
4. В **параметры** статьи для виртуальной Машины, которые вы выбрали, нажмите кнопку **сети**. Дополнительные сведения о параметры сетевого интерфейса и их изменении см. в разделе [Управление сетевыми интерфейсами](virtual-network-network-interface.md). См. дополнительные сведения о [добавлении, изменении и удалении IP-адресов, назначенных сетевому интерфейсу](virtual-network-network-interface-addresses.md).

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|[az vm show](/cli/azure/vm?toc=%2fazure%2fvirtual-network%2ftoc.json#show)|
|PowerShell|[Get-AzureRmVM](/powershell/module/azurerm.compute/get-azurermvm?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="vm-remove-nic"></a> Удаление сетевого интерфейса из виртуальной машины

1. Войдите на портал Azure.
2. В поле поиска в верхней части портала найдите имя виртуальной машины, необходимо удалить (отсоединения) с помощью сетевого интерфейса или Обзор для виртуальной Машины, нажав кнопку **все службы**, затем **виртуальные машины**. Найдя виртуальную Машину, щелкните ее.
3. Нажмите кнопку **Обзор**в разделе **параметры**. Нажмите кнопку **остановить**и подождите, пока **состояние** виртуальной машины меняется на *остановлена (освобождена)*. 
4. Нажмите кнопку **сети**в разделе **параметры**.
5. Нажмите кнопку **отсоединения сетевого интерфейса**. Список сетевых интерфейсов, в настоящее время подключен к виртуальной машине выберите сетевой интерфейс, который вы хотите отсоединить. Один сетевой интерфейс присутствует, если только невозможно отсоединить, так как виртуальная машина всегда должен иметь по крайней мере один сетевой интерфейс, присоединенные к нему.
6. Последовательно выберите **ОК**.

**Команды**

|Средство|Get-Help|
|---|---|
|Интерфейс командной строки|az vm nic remove — см. [раздел руководства](/cli/azure/vm/nic?toc=%2fazure%2fvirtual-network%2ftoc.json#remove) или [подробные инструкции](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#remove-a-nic-from-a-vm)|
|PowerShell|Remove-AzureRmVMNetworkInterface — см. [раздел руководства](/powershell/module/azurerm.compute/remove-azurermvmnetworkinterface?toc=%2fazure%2fvirtual-network%2ftoc.json) или [подробные инструкции](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json#remove-a-nic-from-an-existing-vm)|

## <a name="next-steps"></a>Дальнейшие действия
Чтобы создать виртуальную машину с несколькими сетевыми интерфейсами или IP-адресами, прочитайте приведенные ниже статьи.

**Команды**

|Задача|Средство|
|---|---|
|Создание виртуальной машины с несколькими сетевыми адаптерами|[Интерфейс командной строки](../virtual-machines/linux/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../virtual-machines/windows/multiple-nics.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|
|Создание виртуальной машины с одним сетевым адаптером, которому назначено несколько IPv4-адресов|[Интерфейс командной строки](virtual-network-multiple-ip-addresses-cli.md), [PowerShell](virtual-network-multiple-ip-addresses-powershell.md)|
|Создание виртуальной машины с одним сетевым адаптером, которому назначен частный IPv6-адрес (обслуживаемый Azure Load Balancer).|[Интерфейс командной строки](../load-balancer/load-balancer-ipv6-internet-cli.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [PowerShell](../load-balancer/load-balancer-ipv6-internet-ps.md?toc=%2fazure%2fvirtual-network%2ftoc.json), [шаблон Azure Resource Manager](../load-balancer/load-balancer-ipv6-internet-template.md?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="constraints"></a>Ограничения

- Виртуальный компьютер должен иметь по крайней мере один сетевой интерфейс, присоединенные к нему.
- Виртуальная машина может иметь только как большого количества сетевых интерфейсов, подключенных к нему как поддерживает размер виртуальной Машины. Дополнительные сведения о сетевых интерфейсах, сколько поддерживает размер каждой виртуальной Машины см. в разделе [Linux](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) и [Windows](../virtual-machines/virtual-machines-windows-sizes.md?toc=%2fazure%2fvirtual-network%2ftoc.json) размеры виртуальных Машин. Все размеры поддерживает по крайней мере два сетевых интерфейсов.
- Сейчас сетевые интерфейсы, добавляемые в виртуальную машину, невозможно подключить к другой виртуальной машине. Дополнительные сведения о создании сетевых интерфейсов см. в разделе [создать сетевой интерфейс](virtual-network-network-interface.md#create-a-network-interface).
- В прошлом сетевые интерфейсы можно было добавлять только к виртуальным машинам, которые поддерживали несколько сетевых интерфейсов и были созданы с по крайней мере двумя сетевыми интерфейсами. Сетевой интерфейс невозможно было добавить к виртуальной машине, которая была создана с одним сетевым интерфейсом, даже если размер виртуальной машины поддерживал несколько сетевых интерфейсов. И наоборот, сетевые интерфейсы можно было удалять только из виртуальной машины по крайней мере с тремя сетевыми интерфейсами, так как виртуальные машины, созданные по крайней мере с двумя сетевыми интерфейсами, всегда должны были иметь по крайней мере два сетевых интерфейса. Ни одно из этих ограничений больше не действует. Теперь можно создать виртуальную Машину с любым количеством сетевых интерфейсов (до числа, поддерживаемый размер виртуальной Машины).
- По умолчанию считается первый сетевой интерфейс, присоединенного к виртуальной машине *основной* сетевого интерфейса. Все остальные сетевые интерфейсы в виртуальной машине считаются *дополнительными*.
- Хотя можно выбрать, какой сетевой интерфейс отправки исходящего трафика, по умолчанию, IP-адрес, назначенный основной IP-конфигурации первичный сетевой интерфейс отправляется весь исходящий трафик от виртуальной Машины.
- В прошлом все виртуальные машины в одной группе доступности должны были иметь один или несколько сетевых интерфейсов. Теперь в одной группе доступности могут находиться виртуальные машины с любым количеством сетевых интерфейсов (в пределах количества, поддерживаемого размером виртуальной машины). Виртуальную машину можно добавить в группу доступности только при ее создании. Чтобы узнать больше о группах доступности, прочитайте статью [Управление доступностью виртуальных машин Windows в Azure](../virtual-machines/windows/manage-availability.md?toc=%2fazure%2fvirtual-network%2ftoc.json#configure-multiple-virtual-machines-in-an-availability-set-for-redundancy).
- Хотя сетевые интерфейсы, подключенные к одной виртуальной машине, можно подключить к разным подсетям в виртуальной сети, все они должны быть подключены к одной виртуальной сети.
- Вы можете добавить любой IP-адрес для любой IP-конфигурации любого основного или дополнительного сетевого интерфейса во внутренний Azure Load Balancer. Раньше во внутренний пул можно было добавить только основной IP-адрес для основного сетевого интерфейса. Чтобы узнать больше об IP-адресах и IP-конфигурациях, прочитайте статью [Добавление, изменение и удаление IP-адресов для сетевых интерфейсов Azure](virtual-network-network-interface-addresses.md).
- При удалении виртуальной машины подключенные к ней сетевые интерфейсы не удаляются. Когда виртуальная машина удаляется, сетевые интерфейсы отключаются от нее. Вы можете добавить эти сетевые интерфейсы в другие виртуальные машины или удалить их.
- Если сетевой интерфейс имеет закрытый IPv6-адрес, назначенный его, необходимо добавить (присоединение) для виртуальной Машины при создании ВМ. Сетевой интерфейс адресом IPv6 для виртуальной Машины нельзя добавить после создания виртуальной Машины. При добавлении сетевого интерфейса закрытый адресом IPv6 при создании виртуальной машины можно только добавлять этот сетевой интерфейс виртуальной машине, независимо от того, какое количество сетевых интерфейсов, поддерживает размер виртуальной Машины. См. дополнительные сведения о [назначении IP-адресов для сетевых интерфейсов](virtual-network-network-interface-addresses.md).
- Как и для IPv6, нельзя присоединить сетевой интерфейс с ускорителем сеть, включенная для виртуальной Машины после создания виртуальной Машины. Кроме того чтобы воспользоваться преимуществами ускорителем сети, необходимо также выполнить действия в операционной системе на виртуальной Машине. Чтобы узнать больше о ускорителем сети и другие ограничения, при его использовании, в разделе Accelerated сети для [Windows](create-vm-accelerated-networking-powershell.md) или [Linux](create-vm-accelerated-networking-cli.md) виртуальных машин.
