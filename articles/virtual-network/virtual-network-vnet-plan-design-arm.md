---
title: "aaaAzure виртуальной сети (VNet) плана и руководство по проектированию | Документы Microsoft"
description: "Узнайте, как tooplan и проектирования виртуальных сетей в Azure на основе изоляции, подключение и расположение требований."
services: virtual-network
documentationcenter: na
author: jimdial
manager: carmonm
editor: tysonn
ms.assetid: 3a4a9aea-7608-4d2e-bb3c-40de2e537200
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/08/2016
ms.author: jdial
ms.openlocfilehash: f3ffadf8cf254f64b1f86b44f90315d2bc679f63
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="plan-and-design-azure-virtual-networks"></a><span data-ttu-id="1a9c7-103">Планирование и проектирование виртуальных сетей Azure</span><span class="sxs-lookup"><span data-stu-id="1a9c7-103">Plan and design Azure Virtual Networks</span></span>
<span data-ttu-id="1a9c7-104">Создание виртуальной сети tooexperiment с достаточно просто, но скорее всего, будет развертывать несколько виртуальных сетей по времени hello toosupport производственных потребностей вашей организации.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-104">Creating a VNet tooexperiment with is easy enough, but chances are, you will deploy multiple VNets over time toosupport hello production needs of your organization.</span></span> <span data-ttu-id="1a9c7-105">С некоторыми планирования и разработки необходимо будет toodeploy виртуальных сетей и соединять hello ресурсы, необходимые для более эффективного.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-105">With some planning and design, you will be able toodeploy VNets and connect hello resources you need more effectively.</span></span> <span data-ttu-id="1a9c7-106">Если вы не знакомы с виртуальными сетями, рекомендуется вы [Дополнительные сведения о виртуальных сетей](virtual-networks-overview.md) и [как toodeploy](virtual-networks-create-vnet-arm-pportal.md) один перед продолжением.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-106">If you are not familiar with VNets, it's recommended that you [learn about VNets](virtual-networks-overview.md) and [how toodeploy](virtual-networks-create-vnet-arm-pportal.md) one before proceeding.</span></span>

## <a name="plan"></a><span data-ttu-id="1a9c7-107">План</span><span class="sxs-lookup"><span data-stu-id="1a9c7-107">Plan</span></span>
<span data-ttu-id="1a9c7-108">Крайне важно иметь полное представление о подписках, регионах и сетевых ресурсах Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-108">A thorough understanding of Azure subscriptions, regions, and network resources is critical for success.</span></span> <span data-ttu-id="1a9c7-109">Список hello аспектов ниже можно использовать в качестве отправной точки.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-109">You can use hello list of considerations below as a starting point.</span></span> <span data-ttu-id="1a9c7-110">Поняв эти вопросы, можно определить требования hello для конфигурации сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-110">Once you understand those considerations, you can define hello requirements for your network design.</span></span>

### <a name="considerations"></a><span data-ttu-id="1a9c7-111">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="1a9c7-111">Considerations</span></span>
<span data-ttu-id="1a9c7-112">До ответа hello ниже вопросы по планированию, рассмотрим следующие hello.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-112">Before answering hello planning questions below, consider hello following:</span></span>

* <span data-ttu-id="1a9c7-113">Все, что вы создаете в Azure, состоит из одного или нескольких ресурсов.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-113">Everything you create in Azure is composed of one or more resources.</span></span> <span data-ttu-id="1a9c7-114">Виртуальной машины (VM) — это ресурс, hello сетевого адаптера интерфейса (NIC) используемые для виртуальной Машины — это ресурс, hello общедоступный IP-адрес используется сетевой КАРТЫ — это ресурс, hello виртуальной сети hello Сетевых подключенных toois ресурса.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-114">A virtual machine (VM) is a resource, hello network adapter interface (NIC) used by a VM is a resource, hello public IP address used by a NIC is a resource, hello VNet hello NIC is connected toois a resource.</span></span>
* <span data-ttu-id="1a9c7-115">Вы создаете ресурсы в рамках [региона и подписки Azure](https://azure.microsoft.com/regions/#services) .</span><span class="sxs-lookup"><span data-stu-id="1a9c7-115">You create resources within an [Azure region](https://azure.microsoft.com/regions/#services) and subscription.</span></span> <span data-ttu-id="1a9c7-116">Ресурсы можно только подключенные tooa виртуальной сети, которая существует в hello же регионе и подписке hello ресурс находится в.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-116">Resources can only be connected tooa virtual network that exists in hello same region and subscription hello resource is in.</span></span>
* <span data-ttu-id="1a9c7-117">Другие виртуальные сети tooeach можно подключиться с помощью:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-117">You can connect virtual networks tooeach other by using:</span></span>
    * <span data-ttu-id="1a9c7-118">**[Виртуальная сеть пиринга](virtual-network-peering-overview.md)**: hello виртуальные сети должны существовать в hello же регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-118">**[Virtual network peering](virtual-network-peering-overview.md)**: hello virtual networks must exist in hello same Azure region.</span></span> <span data-ttu-id="1a9c7-119">Полосы пропускания между ресурсами в одноранговыми виртуальных сетей hello же так, будто ресурсы hello подключенных toohello одной виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-119">Bandwidth between resources in peered virtual networks is hello same as if hello resources were connected toohello same virtual network.</span></span>
    * <span data-ttu-id="1a9c7-120">**Azure [VPN-шлюз](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: hello виртуальные сети могут существовать в hello, или в разных регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-120">**An Azure [VPN Gateway](../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md)**: hello virtual networks can exist in hello same, or different Azure regions.</span></span> <span data-ttu-id="1a9c7-121">Пропускная способность между ресурсами в виртуальных сетей, подключенных через VPN-шлюза, ограничено hello пропускной способности hello шлюза VPN.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-121">Bandwidth between resources in virtual networks connected through a VPN Gateway is limited by hello bandwidth of hello VPN Gateway.</span></span>
* <span data-ttu-id="1a9c7-122">Локальная сеть tooyour виртуальных сетей можно подключиться с помощью одного из hello [варианты подключения](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) доступны в Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-122">You can connect VNets tooyour on-premises network by using one of hello [connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) available in Azure.</span></span>
* <span data-ttu-id="1a9c7-123">Другие ресурсы могут быть объединены в [групп ресурсов](../azure-resource-manager/resource-group-overview.md#resource-groups), сделав его проще ресурсов hello toomanage как единое целое.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-123">Different resources can be grouped together in [resource groups](../azure-resource-manager/resource-group-overview.md#resource-groups), making it easier toomanage hello resource as a unit.</span></span> <span data-ttu-id="1a9c7-124">Группы ресурсов может содержать ресурсы из нескольких областей, при условии, что ресурсы hello входить toohello одной подписке.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-124">A resource group can contain resources from multiple regions, as long as hello resources belong toohello same subscription.</span></span>

### <a name="define-requirements"></a><span data-ttu-id="1a9c7-125">Определение требований</span><span class="sxs-lookup"><span data-stu-id="1a9c7-125">Define requirements</span></span>
<span data-ttu-id="1a9c7-126">Используйте вопросы hello ниже в качестве отправной точки для разработки вашей сети Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-126">Use hello questions below as a starting point for your Azure network design.</span></span>    

1. <span data-ttu-id="1a9c7-127">Что местоположений Azure потребуется использовать toohost виртуальных сетей?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-127">What Azure locations will you use toohost VNets?</span></span>
2. <span data-ttu-id="1a9c7-128">Требуется tooprovide связи между этими местоположений Azure?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-128">Do you need tooprovide communication between these Azure locations?</span></span>
3. <span data-ttu-id="1a9c7-129">Требуется tooprovide связи между вашей VNet(s) Azure и вашей локальной центрами обработки данных?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-129">Do you need tooprovide communication between your Azure VNet(s) and your on-premises datacenter(s)?</span></span>
4. <span data-ttu-id="1a9c7-130">Сколько виртуальных машин IaaS, ролей облачных служб и веб-приложений необходимо для вашего решения?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-130">How many Infrastructure as a Service (IaaS) VMs, cloud services roles, and web apps do you need for your solution?</span></span>
5. <span data-ttu-id="1a9c7-131">Требуется tooisolate трафика в зависимости от группы виртуальных машин (т. е. внешнего интерфейса веб-серверов и серверов баз данных серверной части)?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-131">Do you need tooisolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>
6. <span data-ttu-id="1a9c7-132">Требуется toocontrol поток трафика, с помощью виртуальных устройств?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-132">Do you need toocontrol traffic flow using virtual appliances?</span></span>
7. <span data-ttu-id="1a9c7-133">Нет пользователей необходимость разные наборы разрешений toodifferent ресурсы Azure?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-133">Do users need different sets of permissions toodifferent Azure resources?</span></span>

### <a name="understand-vnet-and-subnet-properties"></a><span data-ttu-id="1a9c7-134">Общие сведения о свойствах виртуальных сетей и подсетей</span><span class="sxs-lookup"><span data-stu-id="1a9c7-134">Understand VNet and subnet properties</span></span>
<span data-ttu-id="1a9c7-135">Ресурсы виртуальных сетей и подсетей позволяют определить периметр безопасности для рабочих нагрузок, выполняемых в Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-135">VNet and subnets resources help define a security boundary for workloads running in Azure.</span></span> <span data-ttu-id="1a9c7-136">Виртуальная сеть характеризуется набором адресных пространств, которые также называются блоками CIDR.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-136">A VNet is characterized by a collection of address spaces, defined as CIDR blocks.</span></span>

> [!NOTE]
> <span data-ttu-id="1a9c7-137">Сетевым администраторам знакомы нотации CIDR.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-137">Network administrators are familiar with CIDR notation.</span></span> <span data-ttu-id="1a9c7-138">Если вы не знакомы с методом CIDR, [узнайте больше о нем](http://whatismyipaddress.com/cidr).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-138">If you are not familiar with CIDR, [learn more about it](http://whatismyipaddress.com/cidr).</span></span>
>
>

<span data-ttu-id="1a9c7-139">Виртуальные сети содержать hello следующие свойства.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-139">VNets contain hello following properties.</span></span>

| <span data-ttu-id="1a9c7-140">Свойство</span><span class="sxs-lookup"><span data-stu-id="1a9c7-140">Property</span></span> | <span data-ttu-id="1a9c7-141">Описание</span><span class="sxs-lookup"><span data-stu-id="1a9c7-141">Description</span></span> | <span data-ttu-id="1a9c7-142">Ограничения</span><span class="sxs-lookup"><span data-stu-id="1a9c7-142">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1a9c7-143">**name**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-143">**name**</span></span> |<span data-ttu-id="1a9c7-144">Имя виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="1a9c7-144">VNet name</span></span> |<span data-ttu-id="1a9c7-145">Строка вверх too80 символов.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-145">String of up too80 characters.</span></span> <span data-ttu-id="1a9c7-146">может содержать буквы, цифры, символы подчеркивания, точки или дефисы.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-146">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="1a9c7-147">Первый символ — буква или цифра.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-147">Must start with a letter or number.</span></span> <span data-ttu-id="1a9c7-148">Последний символ — буква, цифра или символ подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-148">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="1a9c7-149">Могут использоваться как заглавные, так и строчные буквы.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-149">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="1a9c7-150">**расположение**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-150">**location**</span></span> |<span data-ttu-id="1a9c7-151">Расположение Azure (также назывались tooas регион).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-151">Azure location (also referred tooas region).</span></span> |<span data-ttu-id="1a9c7-152">Должен быть одним из hello Azure корректными.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-152">Must be one of hello valid Azure locations.</span></span> |
| <span data-ttu-id="1a9c7-153">**addressSpace**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-153">**addressSpace**</span></span> |<span data-ttu-id="1a9c7-154">Коллекция префиксов адресов, составляющих hello виртуальной сети в нотации CIDR.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-154">Collection of address prefixes that make up hello VNet in CIDR notation.</span></span> |<span data-ttu-id="1a9c7-155">Массив допустимых блоков адресов CIDR, включая диапазоны общедоступных IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-155">Must be an array of valid CIDR address blocks, including public IP address ranges.</span></span> |
| <span data-ttu-id="1a9c7-156">**Подсети**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-156">**subnets**</span></span> |<span data-ttu-id="1a9c7-157">Коллекция подсетей, составляющих hello виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="1a9c7-157">Collection of subnets that make up hello VNet</span></span> |<span data-ttu-id="1a9c7-158">см. в следующей таблице свойства подсети hello.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-158">see hello subnet properties table below.</span></span> |
| <span data-ttu-id="1a9c7-159">**dhcpOptions**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-159">**dhcpOptions**</span></span> |<span data-ttu-id="1a9c7-160">Объект, содержащий одно обязательное свойство с именем **dnsServers**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-160">Object that contains a single required property named **dnsServers**.</span></span> | |
| <span data-ttu-id="1a9c7-161">**dnsServers**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-161">**dnsServers**</span></span> |<span data-ttu-id="1a9c7-162">Массив DNS-серверов, используемых hello виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-162">Array of DNS servers used by hello VNet.</span></span> <span data-ttu-id="1a9c7-163">Если сервер не указан, используется внутреннее разрешение имен Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-163">If no server is specified, Azure internal name resolution is used.</span></span> |<span data-ttu-id="1a9c7-164">Должен быть массивом из копии too10 DNS-серверы по IP-адресу.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-164">Must be an array of up too10 DNS servers, by IP address.</span></span> |

<span data-ttu-id="1a9c7-165">Подсеть является дочерним ресурсом виртуальной сети, который помогает определить сегменты адресных пространств в пределах блока CIDR на основе префиксов IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-165">A subnet is a child resource of a VNet, and helps define segments of address spaces within a CIDR block, using IP address prefixes.</span></span> <span data-ttu-id="1a9c7-166">Сетевые адаптеры могут добавляться toosubnets и подключенных tooVMs, предоставляя возможность подключения к для различных рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-166">NICs can be added toosubnets, and connected tooVMs, providing connectivity for various workloads.</span></span>

<span data-ttu-id="1a9c7-167">Подсети содержат hello следующие свойства.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-167">Subnets contain hello following properties.</span></span>

| <span data-ttu-id="1a9c7-168">Свойство</span><span class="sxs-lookup"><span data-stu-id="1a9c7-168">Property</span></span> | <span data-ttu-id="1a9c7-169">Описание</span><span class="sxs-lookup"><span data-stu-id="1a9c7-169">Description</span></span> | <span data-ttu-id="1a9c7-170">Ограничения</span><span class="sxs-lookup"><span data-stu-id="1a9c7-170">Constraints</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1a9c7-171">**name**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-171">**name**</span></span> |<span data-ttu-id="1a9c7-172">Имя подсети</span><span class="sxs-lookup"><span data-stu-id="1a9c7-172">Subnet name</span></span> |<span data-ttu-id="1a9c7-173">Строка вверх too80 символов.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-173">String of up too80 characters.</span></span> <span data-ttu-id="1a9c7-174">может содержать буквы, цифры, символы подчеркивания, точки или дефисы.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-174">May contain letters, numbers, underscore, periods, or hyphens.</span></span> <span data-ttu-id="1a9c7-175">Первый символ — буква или цифра.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-175">Must start with a letter or number.</span></span> <span data-ttu-id="1a9c7-176">Последний символ — буква, цифра или символ подчеркивания.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-176">Must end with a letter, number, or underscore.</span></span> <span data-ttu-id="1a9c7-177">Могут использоваться как заглавные, так и строчные буквы.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-177">Can contains upper or lower case letters.</span></span> |
| <span data-ttu-id="1a9c7-178">**расположение**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-178">**location**</span></span> |<span data-ttu-id="1a9c7-179">Расположение Azure (также назывались tooas регион).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-179">Azure location (also referred tooas region).</span></span> |<span data-ttu-id="1a9c7-180">Должен быть одним из hello Azure корректными.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-180">Must be one of hello valid Azure locations.</span></span> |
| <span data-ttu-id="1a9c7-181">**addressPrefix**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-181">**addressPrefix**</span></span> |<span data-ttu-id="1a9c7-182">Один префикс адреса, которые образуют hello подсети в нотации CIDR</span><span class="sxs-lookup"><span data-stu-id="1a9c7-182">Single address prefix that make up hello subnet in CIDR notation</span></span> |<span data-ttu-id="1a9c7-183">Должен быть один блок CIDR, который является частью какого-либо адресные пространства виртуальной сети hello.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-183">Must be a single CIDR block that is part of one of hello VNet's address spaces.</span></span> |
| <span data-ttu-id="1a9c7-184">**networkSecurityGroup**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-184">**networkSecurityGroup**</span></span> |<span data-ttu-id="1a9c7-185">NSG применяется toohello подсети</span><span class="sxs-lookup"><span data-stu-id="1a9c7-185">NSG applied toohello subnet</span></span> | |
| <span data-ttu-id="1a9c7-186">**routeTable**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-186">**routeTable**</span></span> |<span data-ttu-id="1a9c7-187">Таблица маршрутов применяется toohello подсети</span><span class="sxs-lookup"><span data-stu-id="1a9c7-187">Route table applied toohello subnet</span></span> | |
| <span data-ttu-id="1a9c7-188">**ipConfigurations**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-188">**ipConfigurations**</span></span> |<span data-ttu-id="1a9c7-189">Коллекция объектов конфигурации IP, используемые подсети toohello подключенных сетевых адаптеров</span><span class="sxs-lookup"><span data-stu-id="1a9c7-189">Collection of IP configuration objects used by NICs connected toohello subnet</span></span> | |

### <a name="name-resolution"></a><span data-ttu-id="1a9c7-190">Разрешение имен</span><span class="sxs-lookup"><span data-stu-id="1a9c7-190">Name resolution</span></span>
<span data-ttu-id="1a9c7-191">По умолчанию используется виртуальная сеть [разрешение имен Azure](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve имена внутри hello виртуальной сети, а также на hello общедоступный Интернет.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-191">By default, your VNet uses [Azure-provided name resolution](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve names inside hello VNet, and on hello public Internet.</span></span> <span data-ttu-id="1a9c7-192">Однако при подключении центрах обработки данных tooyour локально на виртуальных сетей, необходимо tooprovide [DNS-сервере](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve имен между сетями.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-192">However, if you connect your VNets tooyour on-premises data centers, you need tooprovide [your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md) tooresolve names between your networks.</span></span>  

### <a name="limits"></a><span data-ttu-id="1a9c7-193">Ограничения</span><span class="sxs-lookup"><span data-stu-id="1a9c7-193">Limits</span></span>
<span data-ttu-id="1a9c7-194">Просмотрите сетевые ограничения hello в hello [Azure ограничивает](../azure-subscription-service-limits.md#networking-limits) tooensure статьи, проект не конфликтует с любым из ограничений hello.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-194">Review hello networking limits in hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article tooensure that your design doesn't conflict with any of hello limits.</span></span> <span data-ttu-id="1a9c7-195">Некоторые ограничения можно увеличить, отправив запрос в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-195">Some limits can be increased by opening a support ticket.</span></span>

### <a name="role-based-access-control-rbac"></a><span data-ttu-id="1a9c7-196">Управление доступа на основе ролей</span><span class="sxs-lookup"><span data-stu-id="1a9c7-196">Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="1a9c7-197">Можно использовать [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) toodifferent ресурсы могут иметь уровень hello toocontrol доступ различных пользователей в Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-197">You can use [Azure RBAC](../active-directory/role-based-access-built-in-roles.md) toocontrol hello level of access different users may have toodifferent resources in Azure.</span></span> <span data-ttu-id="1a9c7-198">Таким образом можно разделять hello работы, выполненной команды на основе своих требований.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-198">That way you can segregate hello work done by your team based on their needs.</span></span>

<span data-ttu-id="1a9c7-199">Лицам, как далеко, как виртуальные сети, пользователей в hello **сети участника** роль имеет полный контроль над ресурсов виртуальной сети Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-199">As far as virtual networks are concerned, users in hello **Network Contributor** role have full control over Azure Resource Manager virtual network resources.</span></span> <span data-ttu-id="1a9c7-200">Аналогичным образом, пользователи в hello **классический участника сети** роль имеет полный контроль над ресурсами классической виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-200">Similarly, users in hello **Classic Network Contributor** role have full control over classic virtual network resources.</span></span>

> [!NOTE]
> <span data-ttu-id="1a9c7-201">Вы также можете [создавать свои собственные роли](../active-directory/role-based-access-control-configure.md) tooseparate потребностями администрирования.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-201">You can also [create your own roles](../active-directory/role-based-access-control-configure.md) tooseparate your administrative needs.</span></span>
>
>

## <a name="design"></a><span data-ttu-id="1a9c7-202">Проектирование</span><span class="sxs-lookup"><span data-stu-id="1a9c7-202">Design</span></span>
<span data-ttu-id="1a9c7-203">Как только вы устанавливаете hello ответы toohello вопросы в hello [планирование](#Plan) просмотрите следующие hello перед определением своих сетей Vnet.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-203">Once you know hello answers toohello questions in hello [Plan](#Plan) section, review hello following before defining your VNets.</span></span>

### <a name="number-of-subscriptions-and-vnets"></a><span data-ttu-id="1a9c7-204">Число подписок и виртуальных сетей</span><span class="sxs-lookup"><span data-stu-id="1a9c7-204">Number of subscriptions and VNets</span></span>
<span data-ttu-id="1a9c7-205">Рекомендуется создать несколько виртуальных сетей в hello следующие сценарии:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-205">You should consider creating multiple VNets in hello following scenarios:</span></span>

* <span data-ttu-id="1a9c7-206">**Виртуальные машины, которые необходимо разместить в разных регионах Azure toobe**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-206">**VMs that need toobe placed in different Azure locations**.</span></span> <span data-ttu-id="1a9c7-207">Виртуальные сети в Azure являются региональными.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-207">VNets in Azure are regional.</span></span> <span data-ttu-id="1a9c7-208">Они не могут охватывать несколько расположений.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-208">They cannot span locations.</span></span> <span data-ttu-id="1a9c7-209">Поэтому необходимо по крайней мере к одной виртуальной сети для каждого расположения Azure, виртуальные машины toohost в требуемый.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-209">Therefore you need at least one VNet for each Azure location you want toohost VMs in.</span></span>
* <span data-ttu-id="1a9c7-210">**Рабочие нагрузки, которые должны полностью изолированном от других toobe**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-210">**Workloads that need toobe completely isolated from one another**.</span></span> <span data-ttu-id="1a9c7-211">Можно создать отдельных виртуальных сетей, что даже использование hello же пространствами IP-адресов, tooisolate разных рабочих нагрузок друг от друга.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-211">You can create separate VNets, that even use hello same IP address spaces, tooisolate different workloads from one another.</span></span>

<span data-ttu-id="1a9c7-212">Имейте в виду, что ограничения hello, отображаемые выше находятся в одном регионе для каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-212">Keep in mind that hello limits you see above are per region, per subscription.</span></span> <span data-ttu-id="1a9c7-213">Это означает, что можно использовать hello лимита подписки tooincrease ресурсы, которые можно сохранить в Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-213">That means you can use multiple subscriptions tooincrease hello limit of resources you can maintain in Azure.</span></span> <span data-ttu-id="1a9c7-214">Можно использовать VPN сайтами или канал ExpressRoute tooconnect виртуальных сетей в разных подписках.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-214">You can use a site-to-site VPN, or an ExpressRoute circuit, tooconnect VNets in different subscriptions.</span></span>

### <a name="subscription-and-vnet-design-patterns"></a><span data-ttu-id="1a9c7-215">Шаблоны проектирования для виртуальной сети и подписки</span><span class="sxs-lookup"><span data-stu-id="1a9c7-215">Subscription and VNet design patterns</span></span>
<span data-ttu-id="1a9c7-216">Hello ниже приведены некоторые общие принципы проектирования с помощью подписок и виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-216">hello table below shows some common design patterns for using subscriptions and VNets.</span></span>

| <span data-ttu-id="1a9c7-217">Сценарий</span><span class="sxs-lookup"><span data-stu-id="1a9c7-217">Scenario</span></span> | <span data-ttu-id="1a9c7-218">Схема</span><span class="sxs-lookup"><span data-stu-id="1a9c7-218">Diagram</span></span> | <span data-ttu-id="1a9c7-219">Преимущества</span><span class="sxs-lookup"><span data-stu-id="1a9c7-219">Pros</span></span> | <span data-ttu-id="1a9c7-220">Недостатки</span><span class="sxs-lookup"><span data-stu-id="1a9c7-220">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="1a9c7-221">Одна подписка, две виртуальные сети на приложение</span><span class="sxs-lookup"><span data-stu-id="1a9c7-221">Single subscription, two VNets per app</span></span> |![Одна подписка](./media/virtual-network-vnet-plan-design-arm/figure1.png) |<span data-ttu-id="1a9c7-223">Toomanage только одной подписке.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-223">Only one subscription toomanage.</span></span> |<span data-ttu-id="1a9c7-224">Максимальное количество виртуальных сетей на регион Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-224">Maximum number of VNets per Azure region.</span></span> <span data-ttu-id="1a9c7-225">Из-за этого вам нужно больше подписок.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-225">You need more subscriptions after that.</span></span> <span data-ttu-id="1a9c7-226">Просмотрите hello [Azure ограничивает](../azure-subscription-service-limits.md#networking-limits) Дополнительные сведения см.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-226">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="1a9c7-227">Одна подписка и две виртуальные сети на приложение</span><span class="sxs-lookup"><span data-stu-id="1a9c7-227">One subscription per app, two VNets per app</span></span> |![Одна подписка](./media/virtual-network-vnet-plan-design-arm/figure2.png) |<span data-ttu-id="1a9c7-229">Используются только две виртуальные сети в рамках одной подписки.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-229">Uses only two VNets per subscription.</span></span> |<span data-ttu-id="1a9c7-230">Более сложные toomanage при наличии слишком много приложений.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-230">Harder toomanage when there are too many apps.</span></span> |
| <span data-ttu-id="1a9c7-231">Одна подписка на подразделение и две виртуальные сети на приложение</span><span class="sxs-lookup"><span data-stu-id="1a9c7-231">One subscription per business unit, two VNets per app.</span></span> |![Одна подписка](./media/virtual-network-vnet-plan-design-arm/figure3.png) |<span data-ttu-id="1a9c7-233">Баланс между числом подписок и виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-233">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="1a9c7-234">Максимальное количество виртуальных сетей на подразделение (подписку).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-234">Maximum number of VNets per business unit (subscription).</span></span> <span data-ttu-id="1a9c7-235">Просмотрите hello [Azure ограничивает](../azure-subscription-service-limits.md#networking-limits) Дополнительные сведения см.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-235">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="1a9c7-236">Одна подписка на подразделение и две виртуальные сети на группу приложений</span><span class="sxs-lookup"><span data-stu-id="1a9c7-236">One subscription per business unit, two VNets per group of apps.</span></span> |![Одна подписка](./media/virtual-network-vnet-plan-design-arm/figure4.png) |<span data-ttu-id="1a9c7-238">Баланс между числом подписок и виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-238">Balance between number of subscriptions and VNets.</span></span> |<span data-ttu-id="1a9c7-239">Приложения должны быть изолированы с помощью подсетей и групп безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-239">Apps must be isolated by using subnets and NSGs.</span></span> |

### <a name="number-of-subnets"></a><span data-ttu-id="1a9c7-240">Количество подсетей</span><span class="sxs-lookup"><span data-stu-id="1a9c7-240">Number of subnets</span></span>
<span data-ttu-id="1a9c7-241">Необходимо учитывать несколько подсетей в виртуальной сети в hello следующие сценарии:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-241">You should consider multiple subnets in a VNet in hello following scenarios:</span></span>

* <span data-ttu-id="1a9c7-242">**Недостаточно частных IP-адресов для всех сетевых адаптеров в подсети**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-242">**Not enough private IP addresses for all NICs in a subnet**.</span></span> <span data-ttu-id="1a9c7-243">Если ваше адресное пространство подсети не содержит достаточно IP-адресов для hello число сетевых адаптеров в подсети hello, то необходимо toocreate несколько подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-243">If your subnet address space does not contain enough IP addresses for hello number of NICs in hello subnet, you need toocreate multiple subnets.</span></span> <span data-ttu-id="1a9c7-244">Имейте в виду, что Azure зарезервирует 5 частные IP-адреса из каждой подсети, которая не может использоваться: сначала hello и последний адреса hello адресного пространства (для подсети адрес hello и многоадресной рассылки) и 3 адреса toobe используется внутренним образом (в целях DHCP и DNS).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-244">Keep in mind that Azure reserves 5 private IP addresses from each subnet that cannot be used: hello first and last addresses of hello address space (for hello subnet address, and multicast) and 3 addresses toobe used internally (for DHCP and DNS purposes).</span></span>
* <span data-ttu-id="1a9c7-245">**Безопасность**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-245">**Security**.</span></span> <span data-ttu-id="1a9c7-246">Группы tooseparate подсетей виртуальных машин друг от друга можно использовать для рабочих нагрузок, имеющих многоуровневой структуры и применить различные [сетевых групп безопасности (Nsg)](virtual-networks-nsg.md#subnets) для этих подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-246">You can use subnets tooseparate groups of VMs from one another for workloads that have a multi-layer structure, and apply different [network security groups (NSGs)](virtual-networks-nsg.md#subnets) for those subnets.</span></span>
* <span data-ttu-id="1a9c7-247">**Гибридное подключение**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-247">**Hybrid connectivity**.</span></span> <span data-ttu-id="1a9c7-248">Можно использовать VPN-шлюзов и каналы ExpressRoute слишком[подключения](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) вашей tooone виртуальных сетей на другой, и tooyour локальных центрах обработки данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-248">You can use VPN gateways and ExpressRoute circuits too[connect](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti) your VNets tooone another, and tooyour on-premises data center(s).</span></span> <span data-ttu-id="1a9c7-249">VPN-шлюзов и каналы ExpressRoute требуется подсеть собственные toobe создан.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-249">VPN gateways and ExpressRoute circuits require a subnet of their own toobe created.</span></span>
* <span data-ttu-id="1a9c7-250">**Виртуальные устройства**.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-250">**Virtual appliances**.</span></span> <span data-ttu-id="1a9c7-251">В виртуальной сети Azure можно использовать виртуальные устройства, например брандмауэр, акселератор WAN или VPN-шлюз.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-251">You can use a virtual appliance, such as a firewall, WAN accelerator, or VPN gateway in an Azure VNet.</span></span> <span data-ttu-id="1a9c7-252">При этом необходимо слишком[маршрутизации трафика](virtual-networks-udr-overview.md) toothose устройств и изолировать их в своих собственных подсети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-252">When you do so, you need too[route traffic](virtual-networks-udr-overview.md) toothose appliances and isolate them in their own subnet.</span></span>

### <a name="subnet-and-nsg-design-patterns"></a><span data-ttu-id="1a9c7-253">Шаблоны проектирования для подсети и группы безопасности сети</span><span class="sxs-lookup"><span data-stu-id="1a9c7-253">Subnet and NSG design patterns</span></span>
<span data-ttu-id="1a9c7-254">Hello ниже приведены некоторые общие принципы проектирования для использования подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-254">hello table below shows some common design patterns for using subnets.</span></span>

| <span data-ttu-id="1a9c7-255">Сценарий</span><span class="sxs-lookup"><span data-stu-id="1a9c7-255">Scenario</span></span> | <span data-ttu-id="1a9c7-256">Схема</span><span class="sxs-lookup"><span data-stu-id="1a9c7-256">Diagram</span></span> | <span data-ttu-id="1a9c7-257">Преимущества</span><span class="sxs-lookup"><span data-stu-id="1a9c7-257">Pros</span></span> | <span data-ttu-id="1a9c7-258">Недостатки</span><span class="sxs-lookup"><span data-stu-id="1a9c7-258">Cons</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="1a9c7-259">Одна подсеть и группы безопасности сети на один уровень приложения на приложение</span><span class="sxs-lookup"><span data-stu-id="1a9c7-259">Single subnet, NSGs per application layer, per app</span></span> |![Одна подсеть](./media/virtual-network-vnet-plan-design-arm/figure5.png) |<span data-ttu-id="1a9c7-261">Только один toomanage подсети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-261">Only one subnet toomanage.</span></span> |<span data-ttu-id="1a9c7-262">Несколько необходимые tooisolate Nsg каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-262">Multiple NSGs necessary tooisolate each application.</span></span> |
| <span data-ttu-id="1a9c7-263">Одна подсеть на приложение, группы безопасности сети на один уровень приложения</span><span class="sxs-lookup"><span data-stu-id="1a9c7-263">One subnet per app, NSGs per application layer</span></span> |![Подсеть на приложение](./media/virtual-network-vnet-plan-design-arm/figure6.png) |<span data-ttu-id="1a9c7-265">Меньшее число toomanage Nsg.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-265">Fewer NSGs toomanage.</span></span> |<span data-ttu-id="1a9c7-266">Toomanage несколько подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-266">Multiple subnets toomanage.</span></span> |
| <span data-ttu-id="1a9c7-267">Одна подсеть на один уровень приложения, группы безопасности сети на приложение</span><span class="sxs-lookup"><span data-stu-id="1a9c7-267">One subnet per application layer, NSGs per app.</span></span> |![Подсеть на один уровень](./media/virtual-network-vnet-plan-design-arm/figure7.png) |<span data-ttu-id="1a9c7-269">Баланс между количеством подсетей и групп безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-269">Balance between number of subnets and NSGs.</span></span> |<span data-ttu-id="1a9c7-270">Максимальное число групп безопасности сети на подписку.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-270">Maximum number of NSGs per subscription.</span></span> <span data-ttu-id="1a9c7-271">Просмотрите hello [Azure ограничивает](../azure-subscription-service-limits.md#networking-limits) Дополнительные сведения см.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-271">Review hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article for details.</span></span> |
| <span data-ttu-id="1a9c7-272">Одна подсеть на один уровень приложения на приложение, группы безопасности сети на подсеть</span><span class="sxs-lookup"><span data-stu-id="1a9c7-272">One subnet per application layer, per app, NSGs per subnet</span></span> |![Подсеть на один уровень на приложение](./media/virtual-network-vnet-plan-design-arm/figure8.png) |<span data-ttu-id="1a9c7-274">Возможно, меньшее количество групп безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-274">Possibly smaller number of NSGs.</span></span> |<span data-ttu-id="1a9c7-275">Toomanage несколько подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-275">Multiple subnets toomanage.</span></span> |

## <a name="sample-design"></a><span data-ttu-id="1a9c7-276">Пример проектирования</span><span class="sxs-lookup"><span data-stu-id="1a9c7-276">Sample design</span></span>
<span data-ttu-id="1a9c7-277">приложение hello tooillustrate hello сведения в этой статье, рассмотрите возможность hello следующие сценарии.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-277">tooillustrate hello application of hello information in this article, consider hello following scenario.</span></span>

<span data-ttu-id="1a9c7-278">Вы работаете в компании, у которой есть два центра обработки данных в Северной Америке и два — в Европе.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-278">You work for a company that has 2 data centers in North America, and two data centers Europe.</span></span> <span data-ttu-id="1a9c7-279">Идентифицировать 6 различных клиентских приложений с выходом обслуживается 2 различных подразделений, которые должны tooAzure toomigrate как пилотный проект.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-279">You identified 6 different customer facing applications maintained by 2 different business units that you want toomigrate tooAzure as a pilot.</span></span> <span data-ttu-id="1a9c7-280">Базовая архитектура Hello для приложения hello выглядят следующим образом:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-280">hello basic architecture for hello applications are as follows:</span></span>

* <span data-ttu-id="1a9c7-281">Приложение 1, приложение 2, приложение 3 и приложение 4 — это веб-приложения, размещенные на серверах Linux под управлением Ubuntu.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-281">App1, App2, App3, and App4 are web applications hosted on Linux servers running Ubuntu.</span></span> <span data-ttu-id="1a9c7-282">Каждое приложение подключается к серверу отдельное приложение tooa, на котором размещены службы RESTful на серверах Linux.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-282">Each application connects tooa separate application server that hosts RESTful services on Linux servers.</span></span> <span data-ttu-id="1a9c7-283">службы RESTful Hello подключения базы данных MySQL tooa серверной части.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-283">hello RESTful services connect tooa back end MySQL database.</span></span>
* <span data-ttu-id="1a9c7-284">Приложение 5 и приложение 6 — это веб-приложения, размещенные на серверах Windows под управлением Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-284">App5 and App6 are web applications hosted on Windows servers running Windows Server 2012 R2.</span></span> <span data-ttu-id="1a9c7-285">Каждое приложение подключается базы данных SQL Server tooa серверной части.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-285">Each application connects tooa back end SQL Server database.</span></span>
* <span data-ttu-id="1a9c7-286">Все приложения, в настоящее время размещаются в одном из центров обработки данных компании hello в Северной Америке.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-286">All apps are currently hosted in one of hello company's data centers in North America.</span></span>
* <span data-ttu-id="1a9c7-287">центры обработки данных в локальной среде Hello использовать hello 10.0.0.0/8 адресное пространство.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-287">hello on-premises data centers use hello 10.0.0.0/8 address space.</span></span>

<span data-ttu-id="1a9c7-288">Требуется toodesign виртуальной сети решение, удовлетворяющее hello следующие требования:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-288">You need toodesign a virtual network solution that meets hello following requirements:</span></span>

* <span data-ttu-id="1a9c7-289">Потребление ресурсов в одних подразделениях не должно оказывать влияние на остальные подразделения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-289">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="1a9c7-290">Следует свести к минимуму объем hello виртуальных сетей и подсетей проще управления toomake.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-290">You should minimize hello amount of VNets and subnets toomake management easier.</span></span>
* <span data-ttu-id="1a9c7-291">В каждом подразделении для всех приложений должна использоваться одна виртуальная сеть тестирования и разработки.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-291">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="1a9c7-292">Каждое приложение должно быть размещено в двух центрах обработки данных Azure на разных континентах (Северная Америка и Европа).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-292">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>
* <span data-ttu-id="1a9c7-293">Все приложения должны быть полностью изолированы друг от друга.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-293">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="1a9c7-294">Каждое приложение может осуществляться клиентов через Интернет hello с помощью протокола HTTP.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-294">Each application can be accessed by customers over hello Internet using HTTP.</span></span>
* <span data-ttu-id="1a9c7-295">Каждое приложение может осуществляться центрах обработки данных в локальной toohello подключенных пользователей с помощью зашифрованный канал.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-295">Each application can be accessed by users connected toohello on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="1a9c7-296">Центры обработки данных tooon локальные соединения следует использовать существующий VPN-устройства.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-296">Connection tooon-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="1a9c7-297">Hello компании сети группа должна содержать полный контроль над hello конфигурацию виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-297">hello company's networking group should have full control over hello VNet configuration.</span></span>
* <span data-ttu-id="1a9c7-298">Разработчики в каждом филиале должно быть tooexisting подсети могут toodeploy виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-298">Developers in each business unit should only be able toodeploy VMs tooexisting subnets.</span></span>
* <span data-ttu-id="1a9c7-299">Все приложения будут перенесены, как они являются tooAzure (точности прогнозов и сдвига).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-299">All applications will be migrated as they are tooAzure (lift-and-shift).</span></span>
* <span data-ttu-id="1a9c7-300">tooother Azure должны быть реплицированы Hello баз данных в каждом месте расположения один раз в день.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-300">hello databases in each location should replicate tooother Azure locations once a day.</span></span>
* <span data-ttu-id="1a9c7-301">Каждое приложение должно использовать 5 интерфейсных веб-серверов, два сервера приложений (при необходимости) и два сервера баз данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-301">Each application should use 5 front end web servers, 2 application servers (when necessary), and 2 database servers.</span></span>

### <a name="plan"></a><span data-ttu-id="1a9c7-302">План</span><span class="sxs-lookup"><span data-stu-id="1a9c7-302">Plan</span></span>
<span data-ttu-id="1a9c7-303">Необходимо запустить проект, планирование, ответив на вопросы hello hello [определяют требования](#Define-requirements) статьи, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-303">You should start your design planning by answering hello question in hello [Define requirements](#Define-requirements) section as shown below.</span></span>

1. <span data-ttu-id="1a9c7-304">Что местоположений Azure потребуется использовать toohost виртуальных сетей?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-304">What Azure locations will you use toohost VNets?</span></span>

    <span data-ttu-id="1a9c7-305">Два расположения в Северной Америке и два — в Европе.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-305">2 locations in North America, and 2 locations in Europe.</span></span> <span data-ttu-id="1a9c7-306">Следует выбрать, основанные на физическое расположение hello существующими центрами обработки данных в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-306">You should pick those based on hello physical location of your existing on-premises data centers.</span></span> <span data-ttu-id="1a9c7-307">Таким образом подключения из вашей tooAzure физическим расположением будет иметь более высокую задержку.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-307">That way your connection from your physical locations tooAzure will have a better latency.</span></span>
2. <span data-ttu-id="1a9c7-308">Требуется tooprovide связи между этими местоположений Azure?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-308">Do you need tooprovide communication between these Azure locations?</span></span>

    <span data-ttu-id="1a9c7-309">Да.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-309">Yes.</span></span> <span data-ttu-id="1a9c7-310">Поскольку hello базы данных должны быть реплицированной tooall расположения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-310">Since hello databases must be replicated tooall locations.</span></span>
3. <span data-ttu-id="1a9c7-311">Требуется tooprovide связи между вашей VNet(s) Azure и в центрах обработки данных в локальной среде?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-311">Do you need tooprovide communication between your Azure VNet(s) and your on-premises data center(s)?</span></span>

    <span data-ttu-id="1a9c7-312">Да.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-312">Yes.</span></span> <span data-ttu-id="1a9c7-313">Поскольку пользователи подключены toohello центрах обработки данных в локальной должен быть приложения hello может tooaccess через зашифрованный канал.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-313">Since users connected toohello on-premises data centers must be able tooaccess hello applications through an encrypted tunnel.</span></span>
4. <span data-ttu-id="1a9c7-314">Сколько виртуальных машин IaaS требуется для вашего решения?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-314">How many IaaS VMs do you need for your solution?</span></span>

    <span data-ttu-id="1a9c7-315">200 виртуальных машин IaaS.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-315">200 IaaS VMs.</span></span> <span data-ttu-id="1a9c7-316">Для приложения 1, приложения 2 и приложения 3 требуется по 5 веб-серверов, два сервера приложений и два сервера баз данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-316">App1, App2, App3, and App4 require 5 web servers each, 2 applications servers each, and 2 database servers each.</span></span> <span data-ttu-id="1a9c7-317">Всего необходимо 9 виртуальных машин IaaS для каждого приложения или 36 виртуальных машин IaaS.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-317">That's a total of 9 IaaS VMs per application, or 36 IaaS VMs.</span></span> <span data-ttu-id="1a9c7-318">Для приложения 5 и приложения 6 требуется по 5 веб-серверов и два сервера баз данных.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-318">App5 and App6 require 5 web servers and 2 database servers each.</span></span> <span data-ttu-id="1a9c7-319">Всего необходимо 7 виртуальных машин IaaS для каждого приложения или 14 виртуальных машин IaaS.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-319">That's a total of 7 IaaS VMs per application, or 14 IaaS VMs.</span></span> <span data-ttu-id="1a9c7-320">Таким образом, необходимо 50 виртуальных машин IaaS для всех приложений в каждом регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-320">Therefore, you need 50 IaaS VMs for all applications in each Azure region.</span></span> <span data-ttu-id="1a9c7-321">Поскольку нам требуется toouse 4 области, может быть 200 ВМ IaaS.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-321">Since we need toouse 4 regions, there will be 200 IaaS VMs.</span></span>

    <span data-ttu-id="1a9c7-322">Необходимо также tooprovide DNS-серверы в каждой виртуальной сети или в ваше имя tooresolve локальных центров обработки данных между ВМ IaaS Azure и локальной сетью.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-322">You will also need tooprovide DNS servers in each VNet, or in your on-premises data centers tooresolve name between your Azure IaaS VMs and your on-premises network.</span></span>
5. <span data-ttu-id="1a9c7-323">Требуется tooisolate трафика в зависимости от группы виртуальных машин (т. е. внешнего интерфейса веб-серверов и серверов баз данных серверной части)?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-323">Do you need tooisolate traffic based on groups of VMs (i.e. front end web servers and back end database servers)?</span></span>

    <span data-ttu-id="1a9c7-324">Да.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-324">Yes.</span></span> <span data-ttu-id="1a9c7-325">Все приложения, в том числе все уровни приложений, должны быть полностью изолированы друг от друга.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-325">Each application should be completely isolated from each other, and each application layer should also be isolated.</span></span>
6. <span data-ttu-id="1a9c7-326">Требуется toocontrol поток трафика, с помощью виртуальных устройств?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-326">Do you need toocontrol traffic flow using virtual appliances?</span></span>

    <span data-ttu-id="1a9c7-327">Нет.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-327">No.</span></span> <span data-ttu-id="1a9c7-328">Виртуальных устройств может быть используется tooprovide более широкие возможности управления потоками данных, включая более подробного ведения журнала данных плоскости.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-328">Virtual appliances can be used tooprovide more control over traffic flow, including more detailed data plane logging.</span></span>
7. <span data-ttu-id="1a9c7-329">Нет пользователей необходимость разные наборы разрешений toodifferent ресурсы Azure?</span><span class="sxs-lookup"><span data-stu-id="1a9c7-329">Do users need different sets of permissions toodifferent Azure resources?</span></span>

    <span data-ttu-id="1a9c7-330">Да.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-330">Yes.</span></span> <span data-ttu-id="1a9c7-331">Hello по обслуживанию сети должен полный контроль над hello виртуальные сетевые настройки, пока разработчики должны быть только возможности toodeploy свои подсети toopre существующие виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-331">hello networking team needs full control on hello virtual networking settings, while developers should only be able toodeploy their VMs toopre-existing subnets.</span></span>

### <a name="design"></a><span data-ttu-id="1a9c7-332">Проектирование</span><span class="sxs-lookup"><span data-stu-id="1a9c7-332">Design</span></span>
<span data-ttu-id="1a9c7-333">Необходимо следовать разработки hello, указав подписок, виртуальных сетей, подсетей и Nsg.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-333">You should follow hello design specifying subscriptions, VNets, subnets, and NSGs.</span></span> <span data-ttu-id="1a9c7-334">Здесь мы рассмотрим группы безопасности сети, но, прежде чем завершить проектирование, вам необходимо узнать больше о [группах безопасности сети](virtual-networks-nsg.md) .</span><span class="sxs-lookup"><span data-stu-id="1a9c7-334">We will discuss NSGs here, but you should learn more about [NSGs](virtual-networks-nsg.md) before finishing your design.</span></span>

<span data-ttu-id="1a9c7-335">**Число подписок и виртуальных сетей**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-335">**Number of subscriptions and VNets**</span></span>

<span data-ttu-id="1a9c7-336">Hello следующие требования, связанные toosubscriptions и виртуальных сетей:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-336">hello following requirements are related toosubscriptions and VNets:</span></span>

* <span data-ttu-id="1a9c7-337">Потребление ресурсов в одних подразделениях не должно оказывать влияние на остальные подразделения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-337">Each business unit should not be affected by resource consumption of other business units.</span></span>
* <span data-ttu-id="1a9c7-338">Следует свести к минимуму объем hello виртуальных сетей и подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-338">You should minimize hello amount of VNets and subnets.</span></span>
* <span data-ttu-id="1a9c7-339">В каждом подразделении для всех приложений должна использоваться одна виртуальная сеть тестирования и разработки.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-339">Each business unit should have a single test/development VNet used for all applications.</span></span>
* <span data-ttu-id="1a9c7-340">Каждое приложение должно быть размещено в двух центрах обработки данных Azure на разных континентах (Северная Америка и Европа).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-340">Each application is hosted in 2 different Azure data centers per continent (North America and Europe).</span></span>

<span data-ttu-id="1a9c7-341">Согласно этим требованиям вам необходима подписка для каждого подразделения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-341">Based on those requirements, you need a subscription for each business unit.</span></span> <span data-ttu-id="1a9c7-342">Таким образом, потребление ресурсов в других подразделениях не будет влиять на другие подразделения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-342">That way, consumption of resources from a business unit will not count towards limits for other business units.</span></span> <span data-ttu-id="1a9c7-343">И поскольку требуется toominimize hello число виртуальных сетей, следует рассмотреть возможность использования hello **с одной подпиской на подразделения, двух виртуальных сетей на каждую группу приложений** шаблона, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-343">And since you want toominimize hello number of VNets, you should consider using hello **one subscription per business unit, two VNets per group of apps** pattern as seen below.</span></span>

![Одна подписка](./media/virtual-network-vnet-plan-design-arm/figure9.png)

<span data-ttu-id="1a9c7-345">Необходимо также toospecify hello адресное пространство для каждой виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-345">You also need toospecify hello address space for each VNet.</span></span> <span data-ttu-id="1a9c7-346">Так как вам нужно подключение между hello локальных центров обработки данных и hello регионах Azure hello адресного пространства, используемый для виртуальных сетей Azure не может пересекаться с локальной сетью hello и адрес hello, занимаемого каждой виртуальной сети не должны пересекаться с другими существующие виртуальные сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-346">Since you need connectivity between hello on-premises data centers and hello Azure regions, hello address space used for Azure VNets cannot clash with hello on-premises network, and hello address space used by each VNet should not clash with other existing VNets.</span></span> <span data-ttu-id="1a9c7-347">Можно использовать hello адресные пространства hello таблицы ниже toosatisfy этим требованиям.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-347">You could use hello address spaces in hello table below toosatisfy these requirements.</span></span>  

| <span data-ttu-id="1a9c7-348">**Подписка**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-348">**Subscription**</span></span> | <span data-ttu-id="1a9c7-349">**Виртуальная сеть**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-349">**VNet**</span></span> | <span data-ttu-id="1a9c7-350">**Регион Azure**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-350">**Azure region**</span></span> | <span data-ttu-id="1a9c7-351">**Пространство адресов**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-351">**Address space**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="1a9c7-352">Подразделение 1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-352">BU1</span></span> |<span data-ttu-id="1a9c7-353">ProdBU1US1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-353">ProdBU1US1</span></span> |<span data-ttu-id="1a9c7-354">Запад США</span><span class="sxs-lookup"><span data-stu-id="1a9c7-354">West US</span></span> |<span data-ttu-id="1a9c7-355">172.16.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-355">172.16.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-356">Подразделение 1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-356">BU1</span></span> |<span data-ttu-id="1a9c7-357">ProdBU1US2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-357">ProdBU1US2</span></span> |<span data-ttu-id="1a9c7-358">Восток США</span><span class="sxs-lookup"><span data-stu-id="1a9c7-358">East US</span></span> |<span data-ttu-id="1a9c7-359">172.17.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-359">172.17.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-360">Подразделение 1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-360">BU1</span></span> |<span data-ttu-id="1a9c7-361">ProdBU1EU1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-361">ProdBU1EU1</span></span> |<span data-ttu-id="1a9c7-362">Северная Европа</span><span class="sxs-lookup"><span data-stu-id="1a9c7-362">North Europe</span></span> |<span data-ttu-id="1a9c7-363">172.18.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-363">172.18.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-364">Подразделение 1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-364">BU1</span></span> |<span data-ttu-id="1a9c7-365">ProdBU1EU2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-365">ProdBU1EU2</span></span> |<span data-ttu-id="1a9c7-366">Западная Европа</span><span class="sxs-lookup"><span data-stu-id="1a9c7-366">West Europe</span></span> |<span data-ttu-id="1a9c7-367">172.19.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-367">172.19.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-368">Подразделение 1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-368">BU1</span></span> |<span data-ttu-id="1a9c7-369">TestDevBU1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-369">TestDevBU1</span></span> |<span data-ttu-id="1a9c7-370">Запад США</span><span class="sxs-lookup"><span data-stu-id="1a9c7-370">West US</span></span> |<span data-ttu-id="1a9c7-371">172.20.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-371">172.20.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-372">Подразделение 2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-372">BU2</span></span> |<span data-ttu-id="1a9c7-373">TestDevBU2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-373">TestDevBU2</span></span> |<span data-ttu-id="1a9c7-374">Запад США</span><span class="sxs-lookup"><span data-stu-id="1a9c7-374">West US</span></span> |<span data-ttu-id="1a9c7-375">172.21.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-375">172.21.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-376">Подразделение 2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-376">BU2</span></span> |<span data-ttu-id="1a9c7-377">ProdBU2US1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-377">ProdBU2US1</span></span> |<span data-ttu-id="1a9c7-378">Запад США</span><span class="sxs-lookup"><span data-stu-id="1a9c7-378">West US</span></span> |<span data-ttu-id="1a9c7-379">172.22.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-379">172.22.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-380">Подразделение 2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-380">BU2</span></span> |<span data-ttu-id="1a9c7-381">ProdBU2US2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-381">ProdBU2US2</span></span> |<span data-ttu-id="1a9c7-382">Восток США</span><span class="sxs-lookup"><span data-stu-id="1a9c7-382">East US</span></span> |<span data-ttu-id="1a9c7-383">172.23.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-383">172.23.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-384">Подразделение 2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-384">BU2</span></span> |<span data-ttu-id="1a9c7-385">ProdBU2EU1</span><span class="sxs-lookup"><span data-stu-id="1a9c7-385">ProdBU2EU1</span></span> |<span data-ttu-id="1a9c7-386">Северная Европа</span><span class="sxs-lookup"><span data-stu-id="1a9c7-386">North Europe</span></span> |<span data-ttu-id="1a9c7-387">172.24.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-387">172.24.0.0/16</span></span> |
| <span data-ttu-id="1a9c7-388">Подразделение 2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-388">BU2</span></span> |<span data-ttu-id="1a9c7-389">ProdBU2EU2</span><span class="sxs-lookup"><span data-stu-id="1a9c7-389">ProdBU2EU2</span></span> |<span data-ttu-id="1a9c7-390">Западная Европа</span><span class="sxs-lookup"><span data-stu-id="1a9c7-390">West Europe</span></span> |<span data-ttu-id="1a9c7-391">172.25.0.0/16</span><span class="sxs-lookup"><span data-stu-id="1a9c7-391">172.25.0.0/16</span></span> |

<span data-ttu-id="1a9c7-392">**Количество подсетей и групп безопасности сети**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-392">**Number of subnets and NSGs**</span></span>

<span data-ttu-id="1a9c7-393">Hello следующие требования, связанные toosubnets и Nsg:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-393">hello following requirements are related toosubnets and NSGs:</span></span>

* <span data-ttu-id="1a9c7-394">Следует свести к минимуму объем hello виртуальных сетей и подсетей.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-394">You should minimize hello amount of VNets and subnets.</span></span>
* <span data-ttu-id="1a9c7-395">Все приложения должны быть полностью изолированы друг от друга.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-395">Each application is completely isolated from each other.</span></span>
* <span data-ttu-id="1a9c7-396">Каждое приложение может осуществляться клиентов через Интернет hello с помощью протокола HTTP.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-396">Each application can be accessed by customers over hello Internet using HTTP.</span></span>
* <span data-ttu-id="1a9c7-397">Каждое приложение может осуществляться центрах обработки данных в локальной toohello подключенных пользователей с помощью зашифрованный канал.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-397">Each application can be accessed by users connected toohello on-premises data centers by using an encrypted tunnel.</span></span>
* <span data-ttu-id="1a9c7-398">Центры обработки данных tooon локальные соединения следует использовать существующий VPN-устройства.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-398">Connection tooon-premises data centers should use existing VPN devices.</span></span>
* <span data-ttu-id="1a9c7-399">tooother Azure должны быть реплицированы Hello баз данных в каждом месте расположения один раз в день.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-399">hello databases in each location should replicate tooother Azure locations once a day.</span></span>

<span data-ttu-id="1a9c7-400">На основании этих требований, можно использовать одну подсеть для каждого уровня приложения и использовать Nsg toofilter трафика каждого приложения.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-400">Based on those requirements, you could use one subnet per application layer, and use NSGs toofilter traffic per application.</span></span> <span data-ttu-id="1a9c7-401">Таким образом, в каждой виртуальной сети (интерфейсная часть, уровень приложения и уровень данных) есть три подсети, а в каждой подсети — одна группа безопасности сети на приложение.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-401">That way, you only have 3 subnets in each VNet (front end, application layer, and data layer) and one NSG per application per subnet.</span></span> <span data-ttu-id="1a9c7-402">В этом случае следует использовать hello **одну подсеть для каждого уровня приложения, Nsg на каждое приложение** шаблону проектирования.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-402">In this case, you should consider using hello **one subnet per application layer, NSGs per app** design pattern.</span></span> <span data-ttu-id="1a9c7-403">на следующем рисунке Hello показано использование hello hello конструктивного шаблона, представляющий hello **ProdBU1US1** виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-403">hello figure below shows hello use of hello design pattern representing hello **ProdBU1US1** VNet.</span></span>

![Одна подсеть на один уровень, одна группа безопасности сети на приложение и на уровень](./media/virtual-network-vnet-plan-design-arm/figure11.png)

<span data-ttu-id="1a9c7-405">Тем не менее необходимо также toocreate дополнительные подсети для hello VPN-подключение между hello виртуальных сетей и вашей центрах обработки данных в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-405">However, you also need toocreate an extra subnet for hello VPN connectivity between hello VNets, and your on-premises data centers.</span></span> <span data-ttu-id="1a9c7-406">И потребуется toospecify hello адресное пространство для каждой подсети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-406">And you need toospecify hello address space for each subnet.</span></span> <span data-ttu-id="1a9c7-407">на следующем рисунке Hello показана образец решения для **ProdBU1US1** виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-407">hello figure below shows a sample solution for **ProdBU1US1** VNet.</span></span> <span data-ttu-id="1a9c7-408">Вы будете реплицировать этот сценарий для каждой виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-408">You would replicate this scenario for each VNet.</span></span> <span data-ttu-id="1a9c7-409">Каждый цвет соответствует одному приложению.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-409">Each color represents a different application.</span></span>

![Пример виртуальной сети](./media/virtual-network-vnet-plan-design-arm/figure10.png)

<span data-ttu-id="1a9c7-411">**Контроль доступа**</span><span class="sxs-lookup"><span data-stu-id="1a9c7-411">**Access Control**</span></span>

<span data-ttu-id="1a9c7-412">Hello предъявляются следующие требования связанные tooaccess управления:</span><span class="sxs-lookup"><span data-stu-id="1a9c7-412">hello following requirements are related tooaccess control:</span></span>

* <span data-ttu-id="1a9c7-413">Hello компании сети группа должна содержать полный контроль над hello конфигурацию виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-413">hello company's networking group should have full control over hello VNet configuration.</span></span>
* <span data-ttu-id="1a9c7-414">Разработчики в каждом филиале должно быть tooexisting подсети могут toodeploy виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-414">Developers in each business unit should only be able toodeploy VMs tooexisting subnets.</span></span>

<span data-ttu-id="1a9c7-415">На основании этих требований, можно добавить пользователей из сети team toohello Встроенные hello **сети участника** роли в каждой подписке; и создать пользовательские роли для hello разработчикам приложений к выдаче каждой подписки подсети tooexisting виртуальные машины tooadd их права.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-415">Based on those requirements, you could add users from hello networking team toohello built-in **Network Contributor** role in each subscription; and create a custom role for hello application developers in each subscription giving them rights tooadd VMs tooexisting subnets.</span></span>

## <a name="next-steps"></a><span data-ttu-id="1a9c7-416">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="1a9c7-416">Next steps</span></span>
* <span data-ttu-id="1a9c7-417">[Разверните виртуальную сеть](virtual-networks-create-vnet-arm-template-click.md) в соответствии со сценарием.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-417">[Deploy a virtual network](virtual-networks-create-vnet-arm-template-click.md) based on a scenario.</span></span>
* <span data-ttu-id="1a9c7-418">Понять, каким образом слишком[балансировки нагрузки](../load-balancer/load-balancer-overview.md) ВМ IaaS и [управлять маршрутизацией по нескольким регионам Azure](../traffic-manager/traffic-manager-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-418">Understand how too[load balance](../load-balancer/load-balancer-overview.md) IaaS VMs and [manage routing over multiple Azure regions](../traffic-manager/traffic-manager-overview.md).</span></span>
* <span data-ttu-id="1a9c7-419">Дополнительные сведения о [Nsg и как tooplan и проектирования](virtual-networks-nsg.md) решения NSG.</span><span class="sxs-lookup"><span data-stu-id="1a9c7-419">Learn more about [NSGs and how tooplan and design](virtual-networks-nsg.md) an NSG solution.</span></span>
* <span data-ttu-id="1a9c7-420">Узнайте больше о [возможностях подключений к виртуальной сети и распределенных подключений](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span><span class="sxs-lookup"><span data-stu-id="1a9c7-420">Learn more about your [cross-premises and VNet connectivity options](../vpn-gateway/vpn-gateway-about-vpngateways.md#s2smulti).</span></span>
