---
title: "пиринг виртуальная сеть Azure - aaaCreate развертывания моделей - разных подписок | Документы Microsoft"
description: "Узнайте, как toocreate пиринг между виртуальными сетями виртуальная сеть создана с помощью модели развертывания Azure, существующих в разных подписках Azure."
services: virtual-network
documentationcenter: 
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/17/2017
ms.author: jdial;narayan;annahar
ms.openlocfilehash: 865bdabb5b87523ba943d7b5dcbdc2475b78bdb5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-a-virtual-network-peering---different-deployment-models-and-subscriptions"></a><span data-ttu-id="06524-103">Создание пиринга виртуальных сетей с разными моделями развертывания в разных подписках</span><span class="sxs-lookup"><span data-stu-id="06524-103">Create a virtual network peering - different deployment models and subscriptions</span></span>

<span data-ttu-id="06524-104">В этом учебнике вы узнаете, toocreate виртуальную сеть пиринга между виртуальными сетями, созданные с помощью модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="06524-104">In this tutorial, you learn toocreate a virtual network peering between virtual networks created through different deployment models.</span></span> <span data-ttu-id="06524-105">Hello виртуальные сети существуют в разных подписках.</span><span class="sxs-lookup"><span data-stu-id="06524-105">hello virtual networks exist in different subscriptions.</span></span> <span data-ttu-id="06524-106">Пиринг два ресурса включает виртуальные сети в разных виртуальных сетей toocommunicate друг с другом и с hello же полосы пропускания и задержки, как будто hello ресурсы в hello одной виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-106">Peering two virtual networks enables resources in different virtual networks toocommunicate with each other with hello same bandwidth and latency as though hello resources were in hello same virtual network.</span></span> <span data-ttu-id="06524-107">Узнайте больше о [пиринге виртуальных сетей](virtual-network-peering-overview.md).</span><span class="sxs-lookup"><span data-stu-id="06524-107">Learn more about [Virtual network peering](virtual-network-peering-overview.md).</span></span> 

<span data-ttu-id="06524-108">Hello действия toocreate виртуальную сеть пиринга различаются, в зависимости от того, являются ли виртуальные сети hello hello в одном или разных, подписки и который [модели развертывания Azure](../azure-resource-manager/resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json) hello виртуальные сети создаются через.</span><span class="sxs-lookup"><span data-stu-id="06524-108">hello steps toocreate a virtual network peering are different, depending on whether hello virtual networks are in hello same, or different, subscriptions, and which [Azure deployment model](../azure-resource-manager/resource-manager-deployment-model.md?toc=%2fazure%2fvirtual-network%2ftoc.json) hello virtual networks are created through.</span></span> <span data-ttu-id="06524-109">Узнайте, как toocreate в виртуальной сети пиринг в других сценариях, щелкнув hello сценарий из hello в следующей таблице:</span><span class="sxs-lookup"><span data-stu-id="06524-109">Learn how toocreate a virtual network peering in other scenarios by clicking hello scenario from hello following table:</span></span>

|<span data-ttu-id="06524-110">Модель развертывания Azure</span><span class="sxs-lookup"><span data-stu-id="06524-110">Azure deployment model</span></span>  | <span data-ttu-id="06524-111">Подписка Azure.</span><span class="sxs-lookup"><span data-stu-id="06524-111">Azure subscription</span></span>  |
|--------- |---------|
|[<span data-ttu-id="06524-112">Обе виртуальные сети Resource Manager</span><span class="sxs-lookup"><span data-stu-id="06524-112">Both Resource Manager</span></span>](virtual-network-create-peering.md) |<span data-ttu-id="06524-113">Аналогично</span><span class="sxs-lookup"><span data-stu-id="06524-113">Same</span></span>|
|[<span data-ttu-id="06524-114">Обе виртуальные сети Resource Manager</span><span class="sxs-lookup"><span data-stu-id="06524-114">Both Resource Manager</span></span>](create-peering-different-subscriptions.md) |<span data-ttu-id="06524-115">Разные</span><span class="sxs-lookup"><span data-stu-id="06524-115">Different</span></span>|
|[<span data-ttu-id="06524-116">Одна виртуальная сеть Resource Manager, одна классическая виртуальная сеть</span><span class="sxs-lookup"><span data-stu-id="06524-116">One Resource Manager, one classic</span></span>](create-peering-different-deployment-models.md) |<span data-ttu-id="06524-117">Аналогично</span><span class="sxs-lookup"><span data-stu-id="06524-117">Same</span></span>|

<span data-ttu-id="06524-118">Невозможно создать виртуальную сеть пиринга между двумя виртуальными сетями, развернутые с помощью hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="06524-118">A virtual network peering cannot be created between two virtual networks deployed through hello classic deployment model.</span></span> <span data-ttu-id="06524-119">Пиринг виртуальной сети могут быть созданы только между двумя виртуальными сетями, существующие в hello же регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="06524-119">A virtual network peering can only be created between two virtual networks that exist in hello same Azure region.</span></span> <span data-ttu-id="06524-120">При создании виртуальной сети между виртуальными сетями, которые существуют в разных подписок, подписки должны быть приветствия пиринг связанной toohello же клиент Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="06524-120">When creating a virtual network peering between virtual networks that exist in different subscriptions, hello subscriptions must both be associated toohello same Azure Active Directory tenant.</span></span> <span data-ttu-id="06524-121">Если у вас еще нет клиента Azure Active Directory, можно быстро [создать его](../active-directory/develop/active-directory-howto-tenant.md?toc=%2fazure%2fvirtual-network%2ftoc.json#start-from-scratch).</span><span class="sxs-lookup"><span data-stu-id="06524-121">If you don't already have an Azure Active Directory tenant, you can quickly [create one](../active-directory/develop/active-directory-howto-tenant.md?toc=%2fazure%2fvirtual-network%2ftoc.json#start-from-scratch).</span></span> <span data-ttu-id="06524-122">Если вам требуется tooconnect виртуальных сетей, оба созданным с помощью hello классической модели развертывания, или, существующие в разных регионах Azure, существующие в подписки связанные toodifferent клиентов Azure Active Directory, можно использовать Azure [VPN-шлюз](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) tooconnect hello виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="06524-122">If you need tooconnect virtual networks that were both created through hello classic deployment model, or that exist in different Azure regions, or that exist in subscriptions associated toodifferent Azure Active Directory tenants, you can use an Azure [VPN Gateway](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md?toc=%2fazure%2fvirtual-network%2ftoc.json) tooconnect hello virtual networks.</span></span> 

> [!WARNING]
> <span data-ttu-id="06524-123">Функция создания пиринга между виртуальными сетями, созданными с помощью разных моделей развертывания Azure, которые существуют в разных подписках Azure, сейчас находится на этапе предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="06524-123">Creating a virtual network peering between virtual networks in created through different Azure deployment models that exist in different subscriptions is currently in preview.</span></span> <span data-ttu-id="06524-124">Не может иметь пиринги виртуальных сетей, созданных в этом сценарии hello одинаковый уровень доступности и надежность, как создание виртуальной сети, пиринг в сценарии в целом доступности выпуска.</span><span class="sxs-lookup"><span data-stu-id="06524-124">Virtual network peerings created in this scenario may not have hello same level of availability and reliability as creating a virtual network peering in scenarios in general availability release.</span></span> <span data-ttu-id="06524-125">Пиринги виртуальных сетей, создаваемые в этом сценарии, могут поддерживаться, обеспечивать все возможности или быть доступны не во всех регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="06524-125">Virtual network peerings created in this scenario are not supported, may have constrained capabilities, and may not be available in all Azure regions.</span></span> <span data-ttu-id="06524-126">Hello последних уведомлений на доступность и состояние этой функцией, проверьте hello [виртуальной сети Azure обновляет](https://azure.microsoft.com/updates/?product=virtual-network) страницы.</span><span class="sxs-lookup"><span data-stu-id="06524-126">For hello most up-to-date notifications on availability and status of this feature, check hello [Azure Virtual Network updates](https://azure.microsoft.com/updates/?product=virtual-network) page.</span></span>

<span data-ttu-id="06524-127">Можно использовать hello [портал Azure](#portal), hello Azure [интерфейс командной строки](#cli) (CLI), или Azure [PowerShell](#powershell) toocreate пиринг виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-127">You can use hello [Azure portal](#portal), hello Azure [command-line interface](#cli) (CLI), or Azure [PowerShell](#powershell) toocreate a virtual network peering.</span></span> <span data-ttu-id="06524-128">Щелкните любой hello предыдущего средства ссылки toogo напрямую toohello шаги для создания виртуальной сети пиринг с помощью нравятся.</span><span class="sxs-lookup"><span data-stu-id="06524-128">Click any of hello previous tool links toogo directly toohello steps for creating a virtual network peering using your tool of choice.</span></span>

## <span data-ttu-id="06524-129"><a name="register"></a>Зарегистрируйтесь для предварительного просмотра hello</span><span class="sxs-lookup"><span data-stu-id="06524-129"><a name="register"></a>Register for hello preview</span></span>

<span data-ttu-id="06524-130">tooregister для предварительного просмотра hello завершения hello, описанных ниже для обеих подписок, содержащих виртуальные сети hello требуется toopeer.</span><span class="sxs-lookup"><span data-stu-id="06524-130">tooregister for hello preview, complete hello steps that follow for both subscriptions that contain hello virtual networks you want toopeer.</span></span> <span data-ttu-id="06524-131">Hello только tooregister можно использовать для предварительного просмотра hello оно PowerShell.</span><span class="sxs-lookup"><span data-stu-id="06524-131">hello only tool you can use tooregister for hello preview is PowerShell.</span></span>

1. <span data-ttu-id="06524-132">Установите последнюю версию hello hello PowerShell [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) модуля.</span><span class="sxs-lookup"><span data-stu-id="06524-132">Install hello latest version of hello PowerShell [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) module.</span></span> <span data-ttu-id="06524-133">Если у вас отсутствует новый tooAzure PowerShell, [Обзор Azure PowerShell](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="06524-133">If you're new tooAzure PowerShell, see [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
2. <span data-ttu-id="06524-134">Запустите сеанс PowerShell и войдите с помощью hello tooAzure `login-azurermaccount` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-134">Start a PowerShell session and log in tooAzure using hello `login-azurermaccount` command.</span></span>
3. <span data-ttu-id="06524-135">Зарегистрируйте подписку для предварительной версии hello, введя hello, следующие команды:</span><span class="sxs-lookup"><span data-stu-id="06524-135">Register your subscription for hello preview by entering hello following commands:</span></span>

    ```powershell
    Register-AzureRmProviderFeature `
      -FeatureName AllowClassicCrossSubscriptionPeering `
      -ProviderNamespace Microsoft.Network
    
    Register-AzureRmResourceProvider `
      -ProviderNamespace Microsoft.Network
    ```
    <span data-ttu-id="06524-136">Не завершите hello hello портала, PowerShell или Azure CLI подразделах этой статьи до hello **RegistrationState** вывода появляется после ввода hello следующую команду **зарегистрированные** для обеих подписок:</span><span class="sxs-lookup"><span data-stu-id="06524-136">Do not complete hello steps in hello Portal, Azure CLI, or PowerShell sections of this article until hello **RegistrationState** output you receive after entering hello following command is **Registered** for both subscriptions:</span></span>

    ```powershell    
    Get-AzureRmProviderFeature `
      -FeatureName AllowClassicCrossSubscriptionPeering `
      -ProviderNamespace Microsoft.Network
    ```

## <span data-ttu-id="06524-137"><a name="portal"></a>Создание пиринга с помощью портала Azure</span><span class="sxs-lookup"><span data-stu-id="06524-137"><a name="portal"></a>Create peering - Azure portal</span></span>

<span data-ttu-id="06524-138">В этом руководстве используются разные учетные записи для каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-138">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="06524-139">При использовании учетной записи, имеющей разрешения tooboth подписки можно использовать hello же учетную запись для всех шагов, пропустите шаги hello для ведения журнала из портала hello и пропустите шаги hello для назначения другого пользователя разрешения toohello виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="06524-139">If you're using an account that has permissions tooboth subscriptions, you can use hello same account for all steps, skip hello steps for logging out of hello portal, and skip hello steps for assigning another user permissions toohello virtual networks.</span></span> <span data-ttu-id="06524-140">Перед выполнением действий hello, выполнив действия, необходимо зарегистрировать для предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="06524-140">Before completing any of hello following steps, you must register for hello preview.</span></span> <span data-ttu-id="06524-141">tooregister, hello завершения шагов в hello [Зарегистрируйтесь для предварительного просмотра hello](#register) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="06524-141">tooregister, complete hello steps in hello [Register for hello preview](#register) section of this article.</span></span> <span data-ttu-id="06524-142">Не продолжайте hello, оставшиеся действия, пока обе подписки зарегистрированы для предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="06524-142">Do not continue with hello remaining steps until both subscriptions are registered for hello preview.</span></span>
 
1. <span data-ttu-id="06524-143">Войдите в toohello [портал Azure](https://portal.azure.com) учетной записью UserA.</span><span class="sxs-lookup"><span data-stu-id="06524-143">Log in toohello [Azure portal](https://portal.azure.com) as UserA.</span></span> <span data-ttu-id="06524-144">Hello учетной записи, использованной для входа в систему должен иметь необходимые разрешения toocreate hello пиринг виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-144">hello account you log in with must have hello necessary permissions toocreate a virtual network peering.</span></span> <span data-ttu-id="06524-145">В разделе hello [разрешения](#permissions) Дополнительные сведения см.</span><span class="sxs-lookup"><span data-stu-id="06524-145">See hello [Permissions](#permissions) section of this article for details.</span></span>
2. <span data-ttu-id="06524-146">Щелкните **+ Создать**, выберите **Сети** и щелкните **Виртуальная сеть**.</span><span class="sxs-lookup"><span data-stu-id="06524-146">Click **+ New**, click **Networking**, then click **Virtual network**.</span></span>
3. <span data-ttu-id="06524-147">В hello **Создание виртуальной сети** колонки, введите, или выбрать значения для hello следующие параметры, а затем нажмите кнопку **создать**:</span><span class="sxs-lookup"><span data-stu-id="06524-147">In hello **Create virtual network** blade, enter, or select values for hello following settings, then click **Create**:</span></span>
    - <span data-ttu-id="06524-148">**Имя**: *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="06524-148">**Name**: *myVnetA*</span></span>
    - <span data-ttu-id="06524-149">**Адресное пространство**: *10.0.0.0/16*.</span><span class="sxs-lookup"><span data-stu-id="06524-149">**Address space**: *10.0.0.0/16*</span></span>
    - <span data-ttu-id="06524-150">**Имя подсети**: *по умолчанию*.</span><span class="sxs-lookup"><span data-stu-id="06524-150">**Subnet name**: *default*</span></span>
    - <span data-ttu-id="06524-151">**Диапазон адресов подсети**: *10.0.0.0/24*.</span><span class="sxs-lookup"><span data-stu-id="06524-151">**Subnet address range**: *10.0.0.0/24*</span></span>
    - <span data-ttu-id="06524-152">**Подписка**: выберите подписку A.</span><span class="sxs-lookup"><span data-stu-id="06524-152">**Subscription**: Select subscription A.</span></span>
    - <span data-ttu-id="06524-153">**Группа ресурсов**: установите флажок **Создать** и введите *myResourceGroupA*.</span><span class="sxs-lookup"><span data-stu-id="06524-153">**Resource group**: Select **Create new** and enter *myResourceGroupA*</span></span>
    - <span data-ttu-id="06524-154">**Расположение**: *Восточная часть США*.</span><span class="sxs-lookup"><span data-stu-id="06524-154">**Location**: *East US*</span></span>
4. <span data-ttu-id="06524-155">В hello **Найдите ресурсы** поле вверху hello портала hello, тип *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="06524-155">In hello **Search resources** box at hello top of hello portal, type *myVnetA*.</span></span> <span data-ttu-id="06524-156">Нажмите кнопку **myVnetA** когда он появится в результатах поиска hello.</span><span class="sxs-lookup"><span data-stu-id="06524-156">Click **myVnetA** when it appears in hello search results.</span></span> <span data-ttu-id="06524-157">Стоечный модуль появится для hello **myVnetA** виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-157">A blade appears for hello **myVnetA** virtual network.</span></span>
5. <span data-ttu-id="06524-158">В hello **myVnetA** колонки, отображается, нажмите кнопку **(IAM) управления доступом к** из hello вертикальной список параметров в hello левая сторона колонка hello.</span><span class="sxs-lookup"><span data-stu-id="06524-158">In hello **myVnetA** blade that appears, click **Access control (IAM)** from hello vertical list of options on hello left side of hello blade.</span></span>
6. <span data-ttu-id="06524-159">В hello **myVnetA - контроля доступа (IAM)** колонки, отображается, нажмите кнопку **+ добавить**.</span><span class="sxs-lookup"><span data-stu-id="06524-159">In hello **myVnetA - Access control (IAM)** blade that appears, click **+ Add**.</span></span>
7. <span data-ttu-id="06524-160">В hello **добавить разрешения** колонки, отображается, выберите **сети участника** в hello **роли** поле.</span><span class="sxs-lookup"><span data-stu-id="06524-160">In hello **Add permissions** blade that appears, select **Network contributor** in hello **Role** box.</span></span>
8. <span data-ttu-id="06524-161">В hello **выберите** , пользователь б Выберите или введите toosearch адрес электронной почты пользователя UserB для него.</span><span class="sxs-lookup"><span data-stu-id="06524-161">In hello **Select** box, select UserB, or type UserB's email address toosearch for it.</span></span> <span data-ttu-id="06524-162">Hello списка пользователей показано является hello того же клиента Azure Active Directory, что виртуальная сеть hello вы устанавливаете hello пиринг для.</span><span class="sxs-lookup"><span data-stu-id="06524-162">hello list of users shown is from hello same Azure Active Directory tenant as hello virtual network you're setting up hello peering for.</span></span> <span data-ttu-id="06524-163">Щелкните UserB, когда он появится в списке hello.</span><span class="sxs-lookup"><span data-stu-id="06524-163">Click UserB when it appears in hello list.</span></span>
9. <span data-ttu-id="06524-164">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="06524-164">Click **Save**.</span></span>
10. <span data-ttu-id="06524-165">Выйдите из портала hello как UserA, а затем войдите в систему как пользователь б.</span><span class="sxs-lookup"><span data-stu-id="06524-165">Log out of hello portal as UserA, then log in as UserB.</span></span>
11. <span data-ttu-id="06524-166">Нажмите кнопку **+ создать**, тип *виртуальная сеть* в hello **поиска hello Marketplace** , а затем нажмите кнопку **виртуальная сеть** в результатах поиска hello .</span><span class="sxs-lookup"><span data-stu-id="06524-166">Click **+ New**, type *Virtual network* in hello **Search hello Marketplace** box, then click **Virtual network** in hello search results.</span></span>
12. <span data-ttu-id="06524-167">В hello **виртуальной сети** колонки, отображается, выберите **классический** в hello **выберите модель развертывания** , а затем нажмите кнопку **создать**.</span><span class="sxs-lookup"><span data-stu-id="06524-167">In hello **Virtual Network** blade that appears, select **Classic** in hello **Select a deployment model** box, then click **Create**.</span></span>
13.   <span data-ttu-id="06524-168">Hello Создание виртуальной сети (классические) введите в поле, отображается hello следующие значения:</span><span class="sxs-lookup"><span data-stu-id="06524-168">In hello Create virtual network (classic) box that appears, enter hello following values:</span></span>

    - <span data-ttu-id="06524-169">**Имя**: *myVnetB*.</span><span class="sxs-lookup"><span data-stu-id="06524-169">**Name**: *myVnetB*</span></span>
    - <span data-ttu-id="06524-170">**Адресное пространство**: *10.1.0.0/16*.</span><span class="sxs-lookup"><span data-stu-id="06524-170">**Address space**: *10.1.0.0/16*</span></span>
    - <span data-ttu-id="06524-171">**Имя подсети**: *по умолчанию*.</span><span class="sxs-lookup"><span data-stu-id="06524-171">**Subnet name**: *default*</span></span>
    - <span data-ttu-id="06524-172">**Диапазон адресов подсети:** *10.1.0.0/24*.</span><span class="sxs-lookup"><span data-stu-id="06524-172">**Subnet address range**: *10.1.0.0/24*</span></span>
    - <span data-ttu-id="06524-173">**Подписка**: выберите подписку B.</span><span class="sxs-lookup"><span data-stu-id="06524-173">**Subscription**: Select subscription B.</span></span>
    - <span data-ttu-id="06524-174">**Группа ресурсов**: установите флажок **Создать** и введите *myResourceGroupB*.</span><span class="sxs-lookup"><span data-stu-id="06524-174">**Resource group**: Select **Create new** and enter *myResourceGroupB*</span></span>
    - <span data-ttu-id="06524-175">**Расположение**: *Восточная часть США*.</span><span class="sxs-lookup"><span data-stu-id="06524-175">**Location**: *East US*</span></span>

14. <span data-ttu-id="06524-176">В hello **Найдите ресурсы** поле вверху hello портала hello, тип *myVnetB*.</span><span class="sxs-lookup"><span data-stu-id="06524-176">In hello **Search resources** box at hello top of hello portal, type *myVnetB*.</span></span> <span data-ttu-id="06524-177">Нажмите кнопку **myVnetB** когда он появится в результатах поиска hello.</span><span class="sxs-lookup"><span data-stu-id="06524-177">Click **myVnetB** when it appears in hello search results.</span></span> <span data-ttu-id="06524-178">Стоечный модуль появится для hello **myVnetB** виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-178">A blade appears for hello **myVnetB** virtual network.</span></span>
15. <span data-ttu-id="06524-179">В hello **myVnetB** колонки, отображается, нажмите кнопку **свойства** hello вертикальной списке вариантов на hello левая сторона колонка hello.</span><span class="sxs-lookup"><span data-stu-id="06524-179">In hello **myVnetB** blade that appears, click **Properties** from hello vertical list of options on hello left side of hello blade.</span></span> <span data-ttu-id="06524-180">Копировать hello **идентификатор РЕСУРСА**, которое используется в более позднем этапе.</span><span class="sxs-lookup"><span data-stu-id="06524-180">Copy hello **RESOURCE ID**, which is used in a later step.</span></span> <span data-ttu-id="06524-181">Идентификатор ресурса Hello — примерно toohello следующий пример: /subscriptions/<Susbscription ID>/resourceGroups/myResoureGroupB/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB</span><span class="sxs-lookup"><span data-stu-id="06524-181">hello resource ID is similar toohello following example: /subscriptions/<Susbscription ID>/resourceGroups/myResoureGroupB/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB</span></span>
16. <span data-ttu-id="06524-182">Выполните шаги 5–9 для myVnetB, указав **пользователя A** на шаге 8.</span><span class="sxs-lookup"><span data-stu-id="06524-182">Complete steps 5-9 for myVnetB, entering **UserA** in step 8.</span></span>
17. <span data-ttu-id="06524-183">Выйдите из портала hello как пользователь б и войдите в систему как пользователь UserA.</span><span class="sxs-lookup"><span data-stu-id="06524-183">Log out of hello portal as UserB and log in as UserA.</span></span>
18. <span data-ttu-id="06524-184">В hello **Найдите ресурсы** поле вверху hello портала hello, тип *myVnetA*.</span><span class="sxs-lookup"><span data-stu-id="06524-184">In hello **Search resources** box at hello top of hello portal, type *myVnetA*.</span></span> <span data-ttu-id="06524-185">Нажмите кнопку **myVnetA** когда он появится в результатах поиска hello.</span><span class="sxs-lookup"><span data-stu-id="06524-185">Click **myVnetA** when it appears in hello search results.</span></span> <span data-ttu-id="06524-186">Стоечный модуль появится для hello **myVnet** виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-186">A blade appears for hello **myVnet** virtual network.</span></span>
19. <span data-ttu-id="06524-187">Щелкните **myVnetA**.</span><span class="sxs-lookup"><span data-stu-id="06524-187">Click **myVnetA**.</span></span>
20. <span data-ttu-id="06524-188">В hello **myVnetA** колонки, отображается, нажмите кнопку **Пиринги** из hello вертикальной список параметров в hello левая сторона колонка hello.</span><span class="sxs-lookup"><span data-stu-id="06524-188">In hello **myVnetA** blade that appears, click **Peerings** from hello vertical list of options on hello left side of hello blade.</span></span>
21. <span data-ttu-id="06524-189">В hello **myVnetA - Пиринги** колонки, которое было открыто, нажмите кнопку **+ добавить**</span><span class="sxs-lookup"><span data-stu-id="06524-189">In hello **myVnetA - Peerings** blade that appeared, click **+ Add**</span></span>
22. <span data-ttu-id="06524-190">В hello **пиринг добавить** колонки, отображается, введите, или выберите hello следующие параметры, а затем нажмите кнопку **ОК**:</span><span class="sxs-lookup"><span data-stu-id="06524-190">In hello **Add peering** blade that appears, enter, or select hello following options, then click **OK**:</span></span>
     - <span data-ttu-id="06524-191">**Имя**: *myVnetAToMyVnetB*.</span><span class="sxs-lookup"><span data-stu-id="06524-191">**Name**: *myVnetAToMyVnetB*</span></span>
     - <span data-ttu-id="06524-192">**Модель развертывания виртуальной сети**: выберите **Классический**.</span><span class="sxs-lookup"><span data-stu-id="06524-192">**Virtual network deployment model**:  Select **Classic**.</span></span>
     - <span data-ttu-id="06524-193">**Я знаю идентификатор ресурса**: установите этот флажок.</span><span class="sxs-lookup"><span data-stu-id="06524-193">**I know my resource ID**: Check this box.</span></span>
     - <span data-ttu-id="06524-194">**Идентификатор ресурса**: Введите идентификатор ресурса hello myVnetB из шаг 15.</span><span class="sxs-lookup"><span data-stu-id="06524-194">**Resource ID**: Enter hello resource ID of myVnetB from step 15.</span></span>
     - <span data-ttu-id="06524-195">**Разрешить доступ к виртуальным сетям**: убедитесь, что выбрано значение **Включено**.</span><span class="sxs-lookup"><span data-stu-id="06524-195">**Allow virtual network access:** Ensure that **Enabled** is selected.</span></span>
    <span data-ttu-id="06524-196">Другие параметры в этом руководстве не используются.</span><span class="sxs-lookup"><span data-stu-id="06524-196">No other settings are used in this tutorial.</span></span> <span data-ttu-id="06524-197">чтение toolearn обо всех параметрах пиринга, [управления пиринги виртуальных сетей](virtual-network-manage-peering.md#create-a-peering).</span><span class="sxs-lookup"><span data-stu-id="06524-197">toolearn about all peering settings, read [Manage virtual network peerings](virtual-network-manage-peering.md#create-a-peering).</span></span>
23. <span data-ttu-id="06524-198">После нажатия кнопки **ОК** hello в предыдущем шаге, hello **пиринг добавить** колонке закрывается, и вы увидите hello **myVnetA - Пиринги** колонке еще раз.</span><span class="sxs-lookup"><span data-stu-id="06524-198">After clicking **OK** in hello previous step, hello **Add peering** blade closes and you see hello **myVnetA - Peerings** blade again.</span></span> <span data-ttu-id="06524-199">Через несколько секунд hello пиринг был создан появится в колонке hello.</span><span class="sxs-lookup"><span data-stu-id="06524-199">After a few seconds, hello peering you created appears in hello blade.</span></span> <span data-ttu-id="06524-200">**Подключение** перечисленные в hello **ПИРИНГ состояние** столбца для hello **myVnetAToMyVnetB** пиринг можно создать.</span><span class="sxs-lookup"><span data-stu-id="06524-200">**Connected** is listed in hello **PEERING STATUS** column for hello **myVnetAToMyVnetB** peering you created.</span></span> <span data-ttu-id="06524-201">Hello пиринг установлен.</span><span class="sxs-lookup"><span data-stu-id="06524-201">hello peering is now established.</span></span> <span data-ttu-id="06524-202">Нет необходимости toopeer hello виртуальной сети (классические) toohello виртуальная сеть не (диспетчера ресурсов).</span><span class="sxs-lookup"><span data-stu-id="06524-202">There is no need toopeer hello virtual network (classic) toohello virtual network (Resource Manager).</span></span>

    <span data-ttu-id="06524-203">Все ресурсы Azure, созданные в любой виртуальной сети, теперь может toocommunicate друг с другом через свои IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="06524-203">Any Azure resources you create in either virtual network are now able toocommunicate with each other through their IP addresses.</span></span> <span data-ttu-id="06524-204">При использовании разрешение имен Azure по умолчанию для виртуальных сетей hello hello ресурсы в виртуальных сетях hello не может tooresolve имен между виртуальными сетями hello.</span><span class="sxs-lookup"><span data-stu-id="06524-204">If you're using default Azure name resolution for hello virtual networks, hello resources in hello virtual networks are not able tooresolve names across hello virtual networks.</span></span> <span data-ttu-id="06524-205">Если требуется tooresolve имен между виртуальными сетями в пиринге необходимо создать собственный DNS-сервер.</span><span class="sxs-lookup"><span data-stu-id="06524-205">If you want tooresolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="06524-206">Узнайте, как tooset копирование [разрешение имен с помощью DNS-сервере](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="06524-206">Learn how tooset up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

24. <span data-ttu-id="06524-207">**Необязательный**: хотя Создание виртуальных машин не освещены в учебнике, можно создать виртуальную машину в каждой виртуальной сети и подключение из одной виртуальной машины toohello других, toovalidate подключения.</span><span class="sxs-lookup"><span data-stu-id="06524-207">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine toohello other, toovalidate connectivity.</span></span>
25. <span data-ttu-id="06524-208">**Необязательный**: ресурсов hello toodelete, созданных в этом учебнике, hello завершения шагов в hello [удаление ресурсов](#delete-portal) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="06524-208">**Optional**: toodelete hello resources that you create in this tutorial, complete hello steps in hello [Delete resources](#delete-portal) section of this article.</span></span>

## <span data-ttu-id="06524-209"><a name="cli"></a>Создание пиринга с помощью Azure CLI</span><span class="sxs-lookup"><span data-stu-id="06524-209"><a name="cli"></a>Create peering - Azure CLI</span></span>

<span data-ttu-id="06524-210">В этом руководстве используются разные учетные записи для каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-210">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="06524-211">При использовании учетной записи, имеющей разрешения tooboth подписки можно использовать hello же учетной записи для всех шагов, пропустите шаги hello для ведения журнала из Azure и удаления строк hello сценария, создайте назначения ролей.</span><span class="sxs-lookup"><span data-stu-id="06524-211">If you're using an account that has permissions tooboth subscriptions, you can use hello same account for all steps, skip hello steps for logging out of Azure, and remove hello lines of script that create user role assignments.</span></span> <span data-ttu-id="06524-212">Замените UserA@azure.com и UserB@azure.com во всех следующих сценариев с помощью приветствия имен пользователей, вы используете для пользователя UserA и UserB hello.</span><span class="sxs-lookup"><span data-stu-id="06524-212">Replace UserA@azure.com and UserB@azure.com in all of hello following scripts with hello usernames you're using for UserA and UserB.</span></span> 

<span data-ttu-id="06524-213">Перед выполнением действий hello, выполнив действия, необходимо зарегистрировать для предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="06524-213">Before completing any of hello following steps, you must register for hello preview.</span></span> <span data-ttu-id="06524-214">tooregister, hello завершения шагов в hello [Зарегистрируйтесь для предварительного просмотра hello](#register) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="06524-214">tooregister, complete hello steps in hello [Register for hello preview](#register) section of this article.</span></span> <span data-ttu-id="06524-215">Не продолжайте hello, оставшиеся действия, пока обе подписки зарегистрированы для предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="06524-215">Do not continue with hello remaining steps until both subscriptions are registered for hello preview.</span></span>

1. <span data-ttu-id="06524-216">[Установка](../cli-install-nodejs.md?toc=%2fazure%2fvirtual-network%2ftoc.json) hello Azure CLI 1.0 toocreate hello виртуальной сети (классические).</span><span class="sxs-lookup"><span data-stu-id="06524-216">[Install](../cli-install-nodejs.md?toc=%2fazure%2fvirtual-network%2ftoc.json) hello Azure CLI 1.0 toocreate hello virtual network (classic).</span></span>
2. <span data-ttu-id="06524-217">Откройте сеанс CLI и вход tooAzure как с помощью hello UserB `azure login` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-217">Open a CLI session and log in tooAzure as UserB using hello `azure login` command.</span></span>
3. <span data-ttu-id="06524-218">Запустите hello CLI в режиме управления службой, введя hello `azure config mode asm` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-218">Run hello CLI in Service Management mode by entering hello `azure config mode asm` command.</span></span>
4. <span data-ttu-id="06524-219">Введите следующую команду, toocreate hello виртуальной сети (классические) hello:</span><span class="sxs-lookup"><span data-stu-id="06524-219">Enter hello following command toocreate hello virtual network (classic):</span></span>
 
    ```azurecli
    azure network vnet create --vnet myVnetB --address-space 10.1.0.0 --cidr 16 --location "East US"
    ```
5. <span data-ttu-id="06524-220">Привет, оставшиеся шаги необходимо выполнить с помощью команд bash с hello Azure CLI 2.0.4 или более поздней версии [установлен](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json), или с помощью hello оболочки облако Azure.</span><span class="sxs-lookup"><span data-stu-id="06524-220">hello remaining steps must be completed using a bash shell with hello Azure CLI 2.0.4 or later [installed](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json), or by using hello Azure Cloud Shell.</span></span> <span data-ttu-id="06524-221">Hello оболочки облако Azure — это бесплатные Bash, который выполняется непосредственно в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="06524-221">hello Azure Cloud Shell is a free Bash shell that you can run directly within hello Azure portal.</span></span> <span data-ttu-id="06524-222">Он имеет hello Azure CLI предварительно установить и настроить toouse с вашей учетной записью.</span><span class="sxs-lookup"><span data-stu-id="06524-222">It has hello Azure CLI preinstalled and configured toouse with your account.</span></span> <span data-ttu-id="06524-223">Нажмите кнопку hello **опробовать** кнопку в hello скрипты, которые открывает оболочку облака, которое входе tooyour учетная запись Azure.</span><span class="sxs-lookup"><span data-stu-id="06524-223">Click hello **Try it** button in hello scripts that follow, which opens a Cloud Shell that logs you in tooyour Azure account.</span></span> <span data-ttu-id="06524-224">Параметры, на котором установлена bash сценариев CLI на клиенте Windows, см. в разделе [работающих в Windows Azure CLI hello](../virtual-machines/windows/cli-options.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="06524-224">For options on running bash CLI scripts on a Windows client, see [Running hello Azure CLI in Windows](../virtual-machines/windows/cli-options.md?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span> 
6. <span data-ttu-id="06524-225">Скопируйте следующий скрипт tooa текстовый редактор на вашем ПК hello.</span><span class="sxs-lookup"><span data-stu-id="06524-225">Copy hello following script tooa text editor on your PC.</span></span> <span data-ttu-id="06524-226">Замените `<SubscriptionB-Id>` идентификатором своей подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-226">Replace `<SubscriptionB-Id>` with your subscription ID.</span></span> <span data-ttu-id="06524-227">Если вы не знаете идентификатор подписки, введите hello `az account show` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-227">If you don't know your subscription Id, enter hello `az account show` command.</span></span> <span data-ttu-id="06524-228">Здравствуйте, значение для **идентификатор** в hello выходные данные являются идентификатор вашей подписки. Скопируйте скрипт изменения hello, вставьте его в сеансе tooyour CLI 2.0 и нажмите клавишу `Enter`.</span><span class="sxs-lookup"><span data-stu-id="06524-228">hello value for **id** in hello output is your subscription Id. Copy hello modified script, paste it in tooyour CLI 2.0 session, and then press `Enter`.</span></span> 

    ```azurecli-interactive
    az role assignment create \
      --assignee UserA@azure.com \
      --role "Classic Network Contributor" \
      --scope /subscriptions/<SubscriptionB-Id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB
    ```

    <span data-ttu-id="06524-229">При создании виртуальной сети hello (классической) на шаге 4, Azure создан hello виртуальной сети в hello *сети по умолчанию* группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="06524-229">When you created hello virtual network (classic) in step 4, Azure created hello virtual network in hello *Default-Networking* resource group.</span></span>
7. <span data-ttu-id="06524-230">Вход UserB за пределами Azure и войти в качестве UserA hello CLI 2.0.</span><span class="sxs-lookup"><span data-stu-id="06524-230">Log UserB out of Azure and log in as UserA in hello CLI 2.0.</span></span>
8. <span data-ttu-id="06524-231">Создайте группу ресурсов и виртуальную сеть Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="06524-231">Create a resource group and a virtual network (Resource Manager).</span></span> <span data-ttu-id="06524-232">Копирования hello следующий скрипт, вставьте его в сеансе CLI tooyour и нажмите клавишу `Enter`.</span><span class="sxs-lookup"><span data-stu-id="06524-232">Copy hello following script, paste it in tooyour CLI session, and then press `Enter`.</span></span> 

    ```azurecli-interactive
    #!/bin/bash

    # Variables for common values used throughout hello script.
    rgName="myResourceGroupA"
    location="eastus"

    # Create a resource group.
    az group create \
      --name $rgName \
      --location $location

    # Create virtual network A (Resource Manager).
    az network vnet create \
      --name myVnetA \
      --resource-group $rgName \
      --location $location \
      --address-prefix 10.0.0.0/16

    # Get hello id for myVnetA.
    vNetAId=$(az network vnet show \
      --resource-group $rgName \
      --name myVnetA \
      --query id --out tsv)

    # Assign UserB permissions toomyVnetA.
    az role assignment create \
      --assignee UserB@azure.com \
      --role "Network Contributor" \
      --scope $vNetAId
    ```

9. <span data-ttu-id="06524-233">Создайте виртуальную сеть пиринга между hello двух виртуальных сетей создана с помощью модели развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="06524-233">Create a virtual network peering between hello two virtual networks created through hello different deployment models.</span></span> <span data-ttu-id="06524-234">Скопируйте следующий скрипт tooa текстовый редактор на вашем ПК hello.</span><span class="sxs-lookup"><span data-stu-id="06524-234">Copy hello following script tooa text editor on your PC.</span></span> <span data-ttu-id="06524-235">Замените `<SubscriptionB-id>` идентификатором своей подписки. Если вы не знаете идентификатор подписки, введите hello `az account show` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-235">Replace `<SubscriptionB-id>` with your subscription Id. If you don't know your subscription Id, enter hello `az account show` command.</span></span> <span data-ttu-id="06524-236">Здравствуйте, значение для **идентификатор** в hello выходные данные являются идентификатор вашей подписки. Azure создан hello виртуальной сети (классические) был создан на шаге 4 в группе ресурсов с именем *сети по умолчанию*.</span><span class="sxs-lookup"><span data-stu-id="06524-236">hello value for **id** in hello output is your subscription Id. Azure created hello virtual network (classic) you created in step 4 in a resource group named *Default-Networking*.</span></span> <span data-ttu-id="06524-237">Вставьте скрипт hello изменения в текущем сеансе CLI и нажмите клавишу `Enter`.</span><span class="sxs-lookup"><span data-stu-id="06524-237">Paste hello modified script in your CLI session, and then press `Enter`.</span></span>

    ```azurecli-interactive
    # Peer VNet1 tooVNet2.
    az network vnet peering create \
      --name myVnetAToMyVnetB \
      --resource-group $rgName \
      --vnet-name myVnetA \
      --remote-vnet-id  /subscriptions/<SubscriptionB-id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB \
      --allow-vnet-access
    ```

10. <span data-ttu-id="06524-238">После выполнения скрипта hello, просмотрите hello пиринг для hello виртуальной сети (диспетчера ресурсов).</span><span class="sxs-lookup"><span data-stu-id="06524-238">After hello script executes, review hello peering for hello virtual network (Resource Manager).</span></span> <span data-ttu-id="06524-239">Скопируйте следующий скрипт hello и вставьте его в текущем сеансе CLI:</span><span class="sxs-lookup"><span data-stu-id="06524-239">Copy hello following script, and then paste it in your CLI session:</span></span>

    ```azurecli-interactive
    az network vnet peering list \
      --resource-group $rgName \
      --vnet-name myVnetA \
      --output table
    ```
    <span data-ttu-id="06524-240">Hello выходных данных указывается **подключен** в hello **PeeringState** столбца.</span><span class="sxs-lookup"><span data-stu-id="06524-240">hello output shows **Connected** in hello **PeeringState** column.</span></span>

    <span data-ttu-id="06524-241">Все ресурсы Azure, созданные в любой виртуальной сети, теперь может toocommunicate друг с другом через свои IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="06524-241">Any Azure resources you create in either virtual network are now able toocommunicate with each other through their IP addresses.</span></span> <span data-ttu-id="06524-242">При использовании разрешение имен Azure по умолчанию для виртуальных сетей hello hello ресурсы в виртуальных сетях hello не может tooresolve имен между виртуальными сетями hello.</span><span class="sxs-lookup"><span data-stu-id="06524-242">If you're using default Azure name resolution for hello virtual networks, hello resources in hello virtual networks are not able tooresolve names across hello virtual networks.</span></span> <span data-ttu-id="06524-243">Если требуется tooresolve имен между виртуальными сетями в пиринге необходимо создать собственный DNS-сервер.</span><span class="sxs-lookup"><span data-stu-id="06524-243">If you want tooresolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="06524-244">Узнайте, как tooset копирование [разрешение имен с помощью DNS-сервере](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="06524-244">Learn how tooset up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

11. <span data-ttu-id="06524-245">**Необязательный**: хотя Создание виртуальных машин не освещены в учебнике, можно создать виртуальную машину в каждой виртуальной сети и подключение из одной виртуальной машины toohello других, toovalidate подключения.</span><span class="sxs-lookup"><span data-stu-id="06524-245">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine toohello other, toovalidate connectivity.</span></span>
12. <span data-ttu-id="06524-246">**Необязательный**: ресурсов hello toodelete, созданных в этом учебнике, hello завершения шагов в [удаление ресурсов](#delete-cli) в этой статье.</span><span class="sxs-lookup"><span data-stu-id="06524-246">**Optional**: toodelete hello resources that you create in this tutorial, complete hello steps in [Delete resources](#delete-cli) in this article.</span></span>

## <span data-ttu-id="06524-247"><a name="powershell"></a>Создание пиринга с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="06524-247"><a name="powershell"></a>Create peering - PowerShell</span></span>

<span data-ttu-id="06524-248">В этом руководстве используются разные учетные записи для каждой подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-248">This tutorial uses different accounts for each subscription.</span></span> <span data-ttu-id="06524-249">При использовании учетной записи, имеющей разрешения tooboth подписки можно использовать hello же учетной записи для всех шагов, пропустите шаги hello для ведения журнала из Azure и удаления строк hello сценария, создайте назначения ролей.</span><span class="sxs-lookup"><span data-stu-id="06524-249">If you're using an account that has permissions tooboth subscriptions, you can use hello same account for all steps, skip hello steps for logging out of Azure, and remove hello lines of script that create user role assignments.</span></span> <span data-ttu-id="06524-250">Замените UserA@azure.com и UserB@azure.com во всех следующих сценариев с помощью приветствия имен пользователей, вы используете для пользователя UserA и UserB hello.</span><span class="sxs-lookup"><span data-stu-id="06524-250">Replace UserA@azure.com and UserB@azure.com in all of hello following scripts with hello usernames you're using for UserA and UserB.</span></span> 

<span data-ttu-id="06524-251">Перед выполнением действий hello, выполнив действия, необходимо зарегистрировать для предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="06524-251">Before completing any of hello following steps, you must register for hello preview.</span></span> <span data-ttu-id="06524-252">tooregister, hello завершения шагов в hello [Зарегистрируйтесь для предварительного просмотра hello](#register) этой статьи.</span><span class="sxs-lookup"><span data-stu-id="06524-252">tooregister, complete hello steps in hello [Register for hello preview](#register) section of this article.</span></span> <span data-ttu-id="06524-253">Не продолжайте hello, оставшиеся действия, пока обе подписки зарегистрированы для предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="06524-253">Do not continue with hello remaining steps until both subscriptions are registered for hello preview.</span></span>

1. <span data-ttu-id="06524-254">Установите последнюю версию hello hello PowerShell [Azure](https://www.powershellgallery.com/packages/Azure) и [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) модулей.</span><span class="sxs-lookup"><span data-stu-id="06524-254">Install hello latest version of hello PowerShell [Azure](https://www.powershellgallery.com/packages/Azure) and [AzureRm](https://www.powershellgallery.com/packages/AzureRM/) modules.</span></span> <span data-ttu-id="06524-255">Если у вас отсутствует новый tooAzure PowerShell, [Обзор Azure PowerShell](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="06524-255">If you're new tooAzure PowerShell, see [Azure PowerShell overview](/powershell/azure/overview?toc=%2fazure%2fvirtual-network%2ftoc.json).</span></span>
2. <span data-ttu-id="06524-256">Запустите сеанс PowerShell.</span><span class="sxs-lookup"><span data-stu-id="06524-256">Start a PowerShell session.</span></span>
3. <span data-ttu-id="06524-257">В PowerShell, войдите в tooUserB по подписке, что пользователь б, указав hello `Add-AzureAccount` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-257">In PowerShell, log in tooUserB's subscription as UserB by entering hello `Add-AzureAccount` command.</span></span>
4. <span data-ttu-id="06524-258">toocreate виртуальной сети (классической) с помощью PowerShell, необходимо создать новую или изменить существующий файл конфигурации сети.</span><span class="sxs-lookup"><span data-stu-id="06524-258">toocreate a virtual network (classic) with PowerShell, you must create a new, or modify an existing, network configuration file.</span></span> <span data-ttu-id="06524-259">Узнайте, каким образом слишком[экспорт, обновления и импорт файлов конфигурации сети](virtual-networks-using-network-configuration-file.md).</span><span class="sxs-lookup"><span data-stu-id="06524-259">Learn how too[export, update, and import network configuration files](virtual-networks-using-network-configuration-file.md).</span></span> <span data-ttu-id="06524-260">Hello файл должен содержать следующие hello **VirtualNetworkSite** элемент для hello виртуальной сети, используемые в этом учебнике:</span><span class="sxs-lookup"><span data-stu-id="06524-260">hello file should include hello following **VirtualNetworkSite** element for hello virtual network used in this tutorial:</span></span>

    ```xml
    <VirtualNetworkSite name="myVnetB" Location="East US">
      <AddressSpace>
        <AddressPrefix>10.1.0.0/16</AddressPrefix>
      </AddressSpace>
      <Subnets>
        <Subnet name="default">
          <AddressPrefix>10.1.0.0/24</AddressPrefix>
        </Subnet>
      </Subnets>
    </VirtualNetworkSite>
    ```

    > [!WARNING]
    > <span data-ttu-id="06524-261">Импорт файла конфигурации сети измененные может привести к изменения tooexisting виртуальные сети (классической) для вашей подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-261">Importing a changed network configuration file can cause changes tooexisting virtual networks (classic) in your subscription.</span></span> <span data-ttu-id="06524-262">Убедитесь в добавлении hello предыдущих виртуальной сети и не изменить или удалить все существующие виртуальные сети из подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-262">Ensure you only add hello previous virtual network and that you don't change or remove any existing virtual networks from your subscription.</span></span> 

5. <span data-ttu-id="06524-263">Войдите в подписке tooUserB как пользователь б toouse диспетчера ресурсов команды, указав hello `login-azurermaccount` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-263">Log in tooUserB's subscription as UserB toouse Resource Manager commands by entering hello `login-azurermaccount` command.</span></span>
6. <span data-ttu-id="06524-264">Toovirtual назначение UserA разрешения сети б. копирование hello следующую скрипта текстовый редактор tooa на ПК и замените `<SubscriptionB-id>` с Идентификатором hello подписки б. Если вы не знаете идентификатор подписки hello, введите hello `Get-AzureRmSubscription` команда tooview его.</span><span class="sxs-lookup"><span data-stu-id="06524-264">Assign UserA permissions toovirtual network B. Copy hello following script tooa text editor on your PC and replace `<SubscriptionB-id>` with hello ID of subscription B. If you don't know hello subscription Id, enter hello `Get-AzureRmSubscription` command tooview it.</span></span> <span data-ttu-id="06524-265">Здравствуйте, значение для **идентификатор** в hello возвращаются выводится идентификатор вашей подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-265">hello value for **Id** in hello returned output is your subscription ID.</span></span> <span data-ttu-id="06524-266">Azure создан hello виртуальной сети (классические) был создан на шаге 4 в группе ресурсов с именем *сети по умолчанию*.</span><span class="sxs-lookup"><span data-stu-id="06524-266">Azure created hello virtual network (classic) you created in step 4 in a resource group named *Default-Networking*.</span></span> <span data-ttu-id="06524-267">сценарий tooexecute hello, hello копирования изменить скрипт, вставьте его в tooPowerShell и нажмите клавишу `Enter`.</span><span class="sxs-lookup"><span data-stu-id="06524-267">tooexecute hello script, copy hello modified script, paste it in tooPowerShell, and then press `Enter`.</span></span>
    
    ```powershell 
    New-AzureRmRoleAssignment `
      -SignInName UserA@azure.com `
      -RoleDefinitionName "Classic Network Contributor" `
      -Scope /subscriptions/<SubscriptionB-id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB
    ```

7. <span data-ttu-id="06524-268">Выйдите из Azure в качестве пользователей UserB и войдите в подписке tooUserA UserA, введя hello `login-azurermaccount` команды.</span><span class="sxs-lookup"><span data-stu-id="06524-268">Log out of Azure as UserB and log in tooUserA's subscription as UserA by entering hello `login-azurermaccount` command.</span></span> <span data-ttu-id="06524-269">Hello учетной записи, использованной для входа в систему должен иметь необходимые разрешения toocreate hello пиринг виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-269">hello account you log in with must have hello necessary permissions toocreate a virtual network peering.</span></span> <span data-ttu-id="06524-270">В разделе hello [разрешения](#permissions) Дополнительные сведения см.</span><span class="sxs-lookup"><span data-stu-id="06524-270">See hello [Permissions](#permissions) section of this article for details.</span></span>
8. <span data-ttu-id="06524-271">Создайте виртуальную сеть hello (диспетчера ресурсов), скопировав hello следующий скрипт, вставив tooPowerShell, а затем нажать клавишу `Enter`:</span><span class="sxs-lookup"><span data-stu-id="06524-271">Create hello virtual network (Resource Manager) by copying hello following script, pasting it in tooPowerShell, and then pressing `Enter`:</span></span>

    ```powershell
    # Variables for common values
      $rgName='MyResourceGroupA'
      $location='eastus'

    # Create a resource group.
    New-AzureRmResourceGroup `
      -Name $rgName `
      -Location $location

    # Create virtual network A.
    $vnetA = New-AzureRmVirtualNetwork `
      -ResourceGroupName $rgName `
      -Name 'myVnetA' `
      -AddressPrefix '10.0.0.0/16' `
      -Location $location
    ```

9. <span data-ttu-id="06524-272">Назначьте пользователей UserB toomyVnetA разрешения.</span><span class="sxs-lookup"><span data-stu-id="06524-272">Assign UserB permissions toomyVnetA.</span></span> <span data-ttu-id="06524-273">Копировать hello следующую скрипта текстовый редактор tooa на ПК и замените `<SubscriptionA-Id>` с Идентификатором hello подписки A. Если вы не знаете идентификатор подписки hello, введите hello `Get-AzureRmSubscription` команда tooview его.</span><span class="sxs-lookup"><span data-stu-id="06524-273">Copy hello following script tooa text editor on your PC and replace `<SubscriptionA-Id>` with hello ID of subscription A. If you don't know hello subscription Id, enter hello `Get-AzureRmSubscription` command tooview it.</span></span> <span data-ttu-id="06524-274">Здравствуйте, значение для **идентификатор** в hello возвращаются выводится идентификатор вашей подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-274">hello value for **Id** in hello returned output is your subscription ID.</span></span> <span data-ttu-id="06524-275">Вставьте измененную версию сценария hello hello в PowerShell и нажмите клавишу `Enter` tooexecute его.</span><span class="sxs-lookup"><span data-stu-id="06524-275">Paste hello modified version of hello script in PowerShell, and then press `Enter` tooexecute it.</span></span>

    ```powershell
    New-AzureRmRoleAssignment `
      -SignInName UserB@azure.com `
      -RoleDefinitionName "Network Contributor" `
      -Scope /subscriptions/<SubscriptionA-Id>/resourceGroups/myResourceGroupA/providers/Microsoft.Network/VirtualNetworks/myVnetA
    ```

10. <span data-ttu-id="06524-276">Копировать hello следующую скрипта текстовый редактор tooa на ПК и замените `<SubscriptionB-id>` с Идентификатором hello подписки B. toopeer myVnetA toomyVNetB, скопируйте скрипт изменения hello, вставьте его в tooPowerShell и нажмите клавишу `Enter`.</span><span class="sxs-lookup"><span data-stu-id="06524-276">Copy hello following script tooa text editor on your PC, and replace `<SubscriptionB-id>` with hello ID of subscription B. toopeer myVnetA toomyVNetB, copy hello modified script, paste it in tooPowerShell, and then press `Enter`.</span></span>

    ```powershell
    Add-AzureRmVirtualNetworkPeering `
      -Name 'myVnetAToMyVnetB' `
      -VirtualNetwork $vnetA `
      -RemoteVirtualNetworkId /subscriptions/<SubscriptionB-id>/resourceGroups/Default-Networking/providers/Microsoft.ClassicNetwork/virtualNetworks/myVnetB
    ```

11. <span data-ttu-id="06524-277">Просмотр состояния пиринга hello myVnetA путем копирования hello следующий сценарий, в PowerShell и нажав клавишу `Enter`.</span><span class="sxs-lookup"><span data-stu-id="06524-277">View hello peering state of myVnetA by copying hello following script, pasting it into PowerShell, and pressing `Enter`.</span></span>

    ```powershell
    Get-AzureRmVirtualNetworkPeering `
      -ResourceGroupName $rgName `
      -VirtualNetworkName myVnetA `
      | Format-Table VirtualNetworkName, PeeringState
    ```

    <span data-ttu-id="06524-278">находится в состоянии Hello **подключен**.</span><span class="sxs-lookup"><span data-stu-id="06524-278">hello state is **Connected**.</span></span> <span data-ttu-id="06524-279">Он изменяет слишком**подключен** после установки hello пиринга toomyVnetA из myVnetB.</span><span class="sxs-lookup"><span data-stu-id="06524-279">It changes too**Connected** once you setup hello peering toomyVnetA from myVnetB.</span></span>

    <span data-ttu-id="06524-280">Все ресурсы Azure, созданные в любой виртуальной сети, теперь может toocommunicate друг с другом через свои IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="06524-280">Any Azure resources you create in either virtual network are now able toocommunicate with each other through their IP addresses.</span></span> <span data-ttu-id="06524-281">При использовании разрешение имен Azure по умолчанию для виртуальных сетей hello hello ресурсы в виртуальных сетях hello не может tooresolve имен между виртуальными сетями hello.</span><span class="sxs-lookup"><span data-stu-id="06524-281">If you're using default Azure name resolution for hello virtual networks, hello resources in hello virtual networks are not able tooresolve names across hello virtual networks.</span></span> <span data-ttu-id="06524-282">Если требуется tooresolve имен между виртуальными сетями в пиринге необходимо создать собственный DNS-сервер.</span><span class="sxs-lookup"><span data-stu-id="06524-282">If you want tooresolve names across virtual networks in a peering, you must create your own DNS server.</span></span> <span data-ttu-id="06524-283">Узнайте, как tooset копирование [разрешение имен с помощью DNS-сервере](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="06524-283">Learn how tooset up [Name resolution using your own DNS server](virtual-networks-name-resolution-for-vms-and-role-instances.md#name-resolution-using-your-own-dns-server).</span></span>

12. <span data-ttu-id="06524-284">**Необязательный**: хотя Создание виртуальных машин не освещены в учебнике, можно создать виртуальную машину в каждой виртуальной сети и подключение из одной виртуальной машины toohello других, toovalidate подключения.</span><span class="sxs-lookup"><span data-stu-id="06524-284">**Optional**: Though creating virtual machines is not covered in this tutorial, you can create a virtual machine in each virtual network and connect from one virtual machine toohello other, toovalidate connectivity.</span></span>
13. <span data-ttu-id="06524-285">**Необязательный**: ресурсов hello toodelete, созданных в этом учебнике, hello завершения шагов в [удаление ресурсов](#delete-powershell) в этой статье.</span><span class="sxs-lookup"><span data-stu-id="06524-285">**Optional**: toodelete hello resources that you create in this tutorial, complete hello steps in [Delete resources](#delete-powershell) in this article.</span></span>

## <span data-ttu-id="06524-286"><a name="permissions"></a>Разрешения</span><span class="sxs-lookup"><span data-stu-id="06524-286"><a name="permissions"></a>Permissions</span></span>

<span data-ttu-id="06524-287">Привет, используется toocreate пиринг виртуальной сети должны иметь hello необходимые роли и разрешения.</span><span class="sxs-lookup"><span data-stu-id="06524-287">hello accounts you use toocreate a virtual network peering must have hello necessary role or permissions.</span></span> <span data-ttu-id="06524-288">Например если две виртуальные сети с именем myVnetA и myVnetB пиринг, учетной записи должно быть назначено hello следующие минимальные роли или разрешения для каждой виртуальной сети:</span><span class="sxs-lookup"><span data-stu-id="06524-288">For example, if you were peering two virtual networks named myVnetA and myVnetB, your account must be assigned hello following minimum role or permissions for each virtual network:</span></span>
    
|<span data-ttu-id="06524-289">Виртуальная сеть</span><span class="sxs-lookup"><span data-stu-id="06524-289">Virtual network</span></span>|<span data-ttu-id="06524-290">Модель развертывания</span><span class="sxs-lookup"><span data-stu-id="06524-290">Deployment model</span></span>|<span data-ttu-id="06524-291">Роль</span><span class="sxs-lookup"><span data-stu-id="06524-291">Role</span></span>|<span data-ttu-id="06524-292">Разрешения</span><span class="sxs-lookup"><span data-stu-id="06524-292">Permissions</span></span>|
|---|---|---|---|
|<span data-ttu-id="06524-293">myVnetA</span><span class="sxs-lookup"><span data-stu-id="06524-293">myVnetA</span></span>|<span data-ttu-id="06524-294">Диспетчер ресурсов</span><span class="sxs-lookup"><span data-stu-id="06524-294">Resource Manager</span></span>|[<span data-ttu-id="06524-295">Участник сети</span><span class="sxs-lookup"><span data-stu-id="06524-295">Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)|<span data-ttu-id="06524-296">Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write</span><span class="sxs-lookup"><span data-stu-id="06524-296">Microsoft.Network/virtualNetworks/virtualNetworkPeerings/write</span></span>|
| |<span data-ttu-id="06524-297">Классический</span><span class="sxs-lookup"><span data-stu-id="06524-297">Classic</span></span>|[<span data-ttu-id="06524-298">Участник классической сети</span><span class="sxs-lookup"><span data-stu-id="06524-298">Classic Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#classic-network-contributor)|<span data-ttu-id="06524-299">Недоступно</span><span class="sxs-lookup"><span data-stu-id="06524-299">N/A</span></span>|
|<span data-ttu-id="06524-300">myVnetB</span><span class="sxs-lookup"><span data-stu-id="06524-300">myVnetB</span></span>|<span data-ttu-id="06524-301">Диспетчер ресурсов</span><span class="sxs-lookup"><span data-stu-id="06524-301">Resource Manager</span></span>|[<span data-ttu-id="06524-302">Участник сети</span><span class="sxs-lookup"><span data-stu-id="06524-302">Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor)|<span data-ttu-id="06524-303">Microsoft.Network/virtualNetworks/peer</span><span class="sxs-lookup"><span data-stu-id="06524-303">Microsoft.Network/virtualNetworks/peer</span></span>|
||<span data-ttu-id="06524-304">Классический</span><span class="sxs-lookup"><span data-stu-id="06524-304">Classic</span></span>|[<span data-ttu-id="06524-305">Участник классической сети</span><span class="sxs-lookup"><span data-stu-id="06524-305">Classic Network Contributor</span></span>](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#classic-network-contributor)|<span data-ttu-id="06524-306">Microsoft.ClassicNetwork/virtualNetworks/peer</span><span class="sxs-lookup"><span data-stu-id="06524-306">Microsoft.ClassicNetwork/virtualNetworks/peer</span></span>|

<span data-ttu-id="06524-307">Дополнительные сведения о [встроенные роли](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) и назначение разрешений для конкретного слишком[пользовательские роли](../active-directory/role-based-access-control-custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (только для диспетчера ресурсов).</span><span class="sxs-lookup"><span data-stu-id="06524-307">Learn more about [built-in roles](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor) and assigning specific permissions too[custom roles](../active-directory/role-based-access-control-custom-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json) (Resource Manager only).</span></span>

## <span data-ttu-id="06524-308"><a name="delete"></a>Удаление ресурсов</span><span class="sxs-lookup"><span data-stu-id="06524-308"><a name="delete"></a>Delete resources</span></span>
<span data-ttu-id="06524-309">После завершения этого учебника вы можете toodelete hello ресурсы, созданный в учебнике hello, поэтому не приводит к дополнительным расходам.</span><span class="sxs-lookup"><span data-stu-id="06524-309">When you've finished this tutorial, you might want toodelete hello resources you created in hello tutorial, so you don't incur usage charges.</span></span> <span data-ttu-id="06524-310">При удалении группы ресурсов также удаляются все ресурсы, которые находятся в группе ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="06524-310">Deleting a resource group also deletes all resources that are in hello resource group.</span></span>

### <span data-ttu-id="06524-311"><a name="delete-portal"></a>Портал Azure</span><span class="sxs-lookup"><span data-stu-id="06524-311"><a name="delete-portal"></a>Azure portal</span></span>

1. <span data-ttu-id="06524-312">Введите в поле поиска портала hello, **myResourceGroupA**.</span><span class="sxs-lookup"><span data-stu-id="06524-312">In hello portal search box, enter **myResourceGroupA**.</span></span> <span data-ttu-id="06524-313">В результатах поиска hello, нажмите кнопку **myResourceGroupA**.</span><span class="sxs-lookup"><span data-stu-id="06524-313">In hello search results, click **myResourceGroupA**.</span></span>
2. <span data-ttu-id="06524-314">На hello **myResourceGroupA** колонка, щелкните hello **удалить** значок.</span><span class="sxs-lookup"><span data-stu-id="06524-314">On hello **myResourceGroupA** blade, click hello **Delete** icon.</span></span>
3. <span data-ttu-id="06524-315">Удаление hello tooconfirm, в hello **ТИПА hello имя группы РЕСУРСОВ** введите **myResourceGroupA**и нажмите кнопку **удалить**.</span><span class="sxs-lookup"><span data-stu-id="06524-315">tooconfirm hello deletion, in hello **TYPE hello RESOURCE GROUP NAME** box, enter **myResourceGroupA**, and then click **Delete**.</span></span>
4. <span data-ttu-id="06524-316">В hello **Найдите ресурсы** поле вверху hello портала hello, тип *myVnetB*.</span><span class="sxs-lookup"><span data-stu-id="06524-316">In hello **Search resources** box at hello top of hello portal, type *myVnetB*.</span></span> <span data-ttu-id="06524-317">Нажмите кнопку **myVnetB** когда он появится в результатах поиска hello.</span><span class="sxs-lookup"><span data-stu-id="06524-317">Click **myVnetB** when it appears in hello search results.</span></span> <span data-ttu-id="06524-318">Стоечный модуль появится для hello **myVnetB** виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-318">A blade appears for hello **myVnetB** virtual network.</span></span>
5. <span data-ttu-id="06524-319">В hello **myVnetB** колонка, щелкните **удалить**.</span><span class="sxs-lookup"><span data-stu-id="06524-319">In hello **myVnetB** blade, click **Delete**.</span></span>
6. <span data-ttu-id="06524-320">tooconfirm hello удаления, нажмите кнопку **Да** в hello **удаления виртуальной сети** поле.</span><span class="sxs-lookup"><span data-stu-id="06524-320">tooconfirm hello deletion, click **Yes** in hello **Delete virtual network** box.</span></span>

### <span data-ttu-id="06524-321"><a name="delete-cli"></a>Интерфейс командной строки Azure</span><span class="sxs-lookup"><span data-stu-id="06524-321"><a name="delete-cli"></a>Azure CLI</span></span>

1. <span data-ttu-id="06524-322">Вход с помощью hello tooAzure CLI 2.0 toodelete hello виртуальной сети (диспетчера ресурсов) с hello следующую команду:</span><span class="sxs-lookup"><span data-stu-id="06524-322">Log in tooAzure using hello CLI 2.0 toodelete hello virtual network (Resource Manager) with hello following command:</span></span>

    ```azurecli-interactive
    az group delete --name myResourceGroupA --yes
    ```

2. <span data-ttu-id="06524-323">Вход с помощью hello tooAzure Azure CLI 1.0 toodelete hello виртуальной сети (классические) с hello, следующие команды:</span><span class="sxs-lookup"><span data-stu-id="06524-323">Log in tooAzure using hello Azure CLI 1.0 toodelete hello virtual network (classic) with hello following commands:</span></span>

    ```azurecli
    azure config mode asm 

    azure network vnet delete --vnet myVnetB --quiet
    ```

### <span data-ttu-id="06524-324"><a name="delete-powershell"></a>PowerShell</span><span class="sxs-lookup"><span data-stu-id="06524-324"><a name="delete-powershell"></a>PowerShell</span></span>

1. <span data-ttu-id="06524-325">Hello PowerShell командной строки введите следующую команду, toodelete hello виртуальной сети (диспетчера ресурсов) hello:</span><span class="sxs-lookup"><span data-stu-id="06524-325">At hello PowerShell command prompt, enter hello following command toodelete hello virtual network (Resource Manager):</span></span>

    ```powershell
    Remove-AzureRmResourceGroup -Name myResourceGroupA -Force
    ```

2. <span data-ttu-id="06524-326">toodelete hello виртуальной сети (классической) с помощью PowerShell, необходимо изменить существующий файл конфигурации сети.</span><span class="sxs-lookup"><span data-stu-id="06524-326">toodelete hello virtual network (classic) with PowerShell, you must modify an existing network configuration file.</span></span> <span data-ttu-id="06524-327">Узнайте, каким образом слишком[экспорт, обновления и импорт файлов конфигурации сети](virtual-networks-using-network-configuration-file.md).</span><span class="sxs-lookup"><span data-stu-id="06524-327">Learn how too[export, update, and import network configuration files](virtual-networks-using-network-configuration-file.md).</span></span> <span data-ttu-id="06524-328">Удалите следующий элемент VirtualNetworkSite для hello виртуальной сети, используемые в этом учебнике hello:</span><span class="sxs-lookup"><span data-stu-id="06524-328">Remove hello following VirtualNetworkSite element for hello virtual network used in this tutorial:</span></span>

    ```xml
    <VirtualNetworkSite name="myVnetB" Location="East US">
      <AddressSpace>
        <AddressPrefix>10.1.0.0/16</AddressPrefix>
      </AddressSpace>
      <Subnets>
        <Subnet name="default">
          <AddressPrefix>10.1.0.0/24</AddressPrefix>
        </Subnet>
      </Subnets>
    </VirtualNetworkSite>
    ```

    > [!WARNING]
    > <span data-ttu-id="06524-329">Импорт файла конфигурации сети измененные может привести к изменения tooexisting виртуальные сети (классической) для вашей подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-329">Importing a changed network configuration file can cause changes tooexisting virtual networks (classic) in your subscription.</span></span> <span data-ttu-id="06524-330">Убедитесь в удалении hello предыдущих виртуальной сети и не изменить или удалить любые другие существующие виртуальные сети из подписки.</span><span class="sxs-lookup"><span data-stu-id="06524-330">Ensure you only remove hello previous virtual network and that you don't change or remove any other existing virtual networks from your subscription.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="06524-331">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="06524-331">Next steps</span></span>

- <span data-ttu-id="06524-332">Внимательно ознакомьтесь с важными [ограничениями и особенностями работы пиринга виртуальных сетей](virtual-network-manage-peering.md#requirements-and-constraints), прежде чем создавать пиринг виртуальных сетей для рабочей среды.</span><span class="sxs-lookup"><span data-stu-id="06524-332">Thoroughly familiarize yourself with important [virtual network peering constraints and behaviors](virtual-network-manage-peering.md#requirements-and-constraints) before creating a virtual network peering for production use.</span></span>
- <span data-ttu-id="06524-333">Узнайте о [параметрах пиринга виртуальных сетей](virtual-network-manage-peering.md#create-a-peering).</span><span class="sxs-lookup"><span data-stu-id="06524-333">Learn about all [virtual network peering settings](virtual-network-manage-peering.md#create-a-peering).</span></span>
- <span data-ttu-id="06524-334">Узнайте, каким образом слишком[создать концентратор и топология сети резервный](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json#vnet-peering) с пиринг виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="06524-334">Learn how too[create a hub and spoke network topology](/azure/architecture/reference-architectures/hybrid-networking/hub-spoke?toc=%2fazure%2fvirtual-network%2ftoc.json#vnet-peering) with virtual network peering.</span></span>
