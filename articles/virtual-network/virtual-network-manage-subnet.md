---
title: "Создание, изменение или удаление виртуальной сети Azure | Документация Майкрософт"
description: "Сведения о создании, изменении и удалении виртуальной сети в Azure."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-network
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/10/2017
ms.author: jdial
ms.openlocfilehash: 85ba6ef3e51c339a77eb9b4198c4f87e2a64cf09
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="add-change-or-delete-a-virtual-network-subnet"></a>Создание, изменение или удаление виртуальной сети

Сведения о создании, изменении и удалении подсетей виртуальной сети. 

Если вы не работали с виртуальными сетями, прежде чем создавать, изменять и удалять подсеть, мы рекомендуем прочитать [обзор виртуальных сетей Azure ](virtual-networks-overview.md), а также статью [Создание, изменение и удаление виртуальной сети](virtual-network-manage-network.md). Все ресурсы Azure, развернутые в виртуальной сети, также развертываются в подсети виртуальной сети. Как правило, в виртуальной сети создается несколько подсетей для решения следующих задач.
- **Фильтрация трафика между подсетями**. К подсетям можно применить группы безопасности сети для фильтрации входящего и исходящего сетевого трафика для всех ресурсов (например, виртуальных машин), подключенных к виртуальной сети. Подробнее о создании группы безопасности сети см. в статье [Создание групп безопасности сети](virtual-networks-create-nsg-arm-pportal.md).
- **Управление маршрутизацией между подсетями**. Azure создает маршруты по умолчанию, чтобы трафик автоматически направлялся между подсетями. Вы можете переопределить стандартные маршруты Azure, создав определяемые пользователем маршруты. Дополнительные сведения об определяемых пользователем маршрутах см. в статье [Создание определяемых пользователем маршрутов](virtual-network-create-udr-arm-ps.md). 

В этой статье объясняется, как создавать, изменять и удалять подсети для виртуальных сетей, созданных на основе модели развертывания с помощью Azure Resource Manager.
 
## <a name="before"></a>Перед началом работы

Прежде чем перейти к задачам, приведенным в этой статье, выполните следующие условия.

- Если вы впервые работаете с виртуальными сетями, рекомендуется просмотреть упражнения в руководстве [Создание первой собственной виртуальной сети](virtual-network-get-started-vnet-subnet.md). Это руководство поможет вам ознакомиться с принципами работы виртуальных сетей.
- Сведения об ограничениях для виртуальных сетей cм. в разделе [ограничений Azure](../azure-subscription-service-limits.md?toc=%2fazure%2fvirtual-network%2ftoc.json#azure-resource-manager-virtual-networking-limits).
- Войдите на портал Azure, в программу командной строки Azure (Azure CLI) или Azure PowerShell с помощью учетной записи Azure. Если у вас нет учетной записи Azure, зарегистрируйтесь, чтобы получить [бесплатную пробную учетную запись](https://azure.microsoft.com/free).
- Если вы планируете использовать команды PowerShell для выполнения задач в этой статье, сначала необходимо [установить и настроить Azure PowerShell](/powershell/azureps-cmdlets-docs?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена последняя версия командлетов Azure PowerShell. Чтобы получить справку по командам PowerShell в этих примерах, введите `get-help <command> -full`.
- Если вы планируете использовать команды Azure CLI для выполнения задач, описанных в этой статье, сначала необходимо:
    - [Установить и настроить Azure CLI](/cli/azure/install-azure-cli?toc=%2fazure%2fvirtual-network%2ftoc.json). Убедитесь, что у вас установлена последняя версия Azure CLI.
    - Использовать Azure Cloud Shell. Вместо установки интерфейса командной строки и его зависимостей вы можете использовать Azure Cloud Shell. Azure Cloud Shell — это бесплатная оболочка Bash, которую можно запускать непосредственно на портале Azure. Она включает предварительно установленный интерфейс Azure CLI и настроена для использования с вашей учетной записью. Чтобы использовать Azure Cloud Shell, нажмите кнопку(**>_**) вверху портала. 

  Чтобы получить справку по командам Azure CLI, введите `az <command> --help`.

## <a name="create-subnet"></a>Создание подсети

Чтобы создать подсеть, сделайте следующее:

1. Войдите на [портал](https://portal.azure.com), используя учетную запись, которой назначены разрешения роли "Участник сетей" (как минимум) для подписки. Дополнительные сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В поле поиска на портале введите **виртуальные сети**. В результатах поиска щелкните **виртуальные сети**.
3. В колонке **Виртуальные сети** щелкните виртуальную сеть, в которую требуется добавить подсеть.
4. В колонке виртуальной сети щелкните **Подсети**.
5. Щелкните **Добавить подсеть**.
6. В колонке **Добавление подсети** введите значения для следующих параметров.
    - **Имя**. Имя должно быть уникальным в пределах виртуальной сети.
    - **Диапазон адресов**. Диапазон должен быть уникальным в пределах адресного пространства виртуальной сети. Диапазон не должен перекрываться с другими диапазонами адресов подсетей в виртуальной сети. Адресное пространство должно быть указано с помощью нотации CIDR. Например, в виртуальной сети с адресным пространством 10.0.0.0/16 можно определить адресное пространство подсети 10.0.0.0/24. Наименьший допустимый диапазон — /29. Он обеспечивает восемь IP-адресов для подсети. Azure резервирует первый и последний адреса в каждой подсети для соответствия требованиям протоколов. Еще три адреса резервируются для служб Azure. Следовательно, если определить подсеть с диапазоном адресов /29, то в ней будет только три пригодных для использования IP-адреса. Если вы планируете подключать виртуальную сеть к VPN-шлюзу, необходимо создать подсеть шлюза. Узнайте больше о [рекомендациях по диапазонам адресов для подсетей шлюза](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md?toc=%2fazure%2fvirtual-network%2ftoc.json#gwsub). При определенных условиях после создания подсети можно изменить диапазон адресов. Сведения об изменении диапазона адресов подсети см. в разделе [Изменение параметров подсети](#change-subnet) этой статьи.
    - **Группа безопасности сети** (NSG). При необходимости вы можете связать с подсетью существующую группу безопасности сети, чтобы управлять фильтрацией входящего и исходящего сетевого трафика подсети. Группа безопасности сети должна существовать в той же подписке и расположении, что и виртуальная сеть. Кроме того, она должна быть создана с использованием модели развертывания Azure Resource Manager. Подробнее о создании группы безопасности сети см. в статье [Группы безопасности сети](virtual-networks-create-nsg-arm-pportal.md).
    - **Таблица маршрутов**. С подсетью можно связать существующую таблицу маршрутов, чтобы управлять маршрутизацией сетевого трафика в другие сети. Таблица маршрутов должна существовать в той же подписке и расположении, что и виртуальная сеть. Кроме того, она должна быть создана с использованием модели развертывания Azure Resource Manager. Подробнее о создании таблиц маршрутов см. в статье [Определяемые пользователем маршруты](virtual-network-create-udr-arm-ps.md).
    - **Пользователи**. Можно управлять доступом к подсети, используя встроенные роли или собственные настраиваемые роли. Подробнее о назначении ролей и пользователей для доступа к подсети см. в статье [Использование управления доступом на основе ролей для контроля доступа к ресурсам в подписке Azure](../active-directory/role-based-access-control-configure.md?toc=%2fazure%2fvirtual-network%2ftoc.json#add-access).
7. Чтобы добавить подсеть в выбранную виртуальную сеть, нажмите кнопку **ОК**.

**Команды**

|Средство|Команда|
|---|---|
|Инфраструктура CLI Azure|[az network vnet subnet create](/cli/azure/network/vnet/subnet?toc=%2fazure%2fvirtual-network%2ftoc.json#create)|
|PowerShell|[New-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/new-azurermvirtualnetworksubnetconfig?toc=%2fazure%2fvirtual-network%2ftoc.json), [Add-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/add-azurermvirtualnetworksubnetconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="change-subnet"></a>Изменение параметров подсети

Вы можете изменить группы безопасности сети, таблицы маршрутов и уровень доступа пользователя к подсети, управляя ресурсами, подключенными к подсети. Подробнее об этих параметрах см. в шаге 6 [Создание подсети](#create-subnet). Если вам нужно изменить адресное пространство подсети, сначала необходимо удалить все подключенные к этой сети ресурсы. Конкретная процедура удаления ресурса зависит от его типа. Чтобы узнать, как удалить ресурсы, подключенные к подсети, прочтите документацию по всем типам ресурсов, которые вам необходимо удалить. Изменение диапазона адресов для подсети

1. Войдите на [портал](https://portal.azure.com) с помощью учетной записи, которой назначены разрешения роли "Участник сети" (как минимум) для подписки. Дополнительные сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В поле поиска на портале введите **виртуальные сети**. В результатах поиска щелкните **виртуальные сети**.
3. В колонке **Виртуальные сети** щелкните виртуальную сеть, для подсети которой требуется изменить диапазон адресов.
4. Выберите подсеть, для которой нужно изменить диапазон адресов.
5. В колонке подсети в поле **Диапазон адресов** введите новый диапазон адресов. Диапазон должен быть уникальным в пределах адресного пространства виртуальной сети. Диапазон не должен перекрываться с другими диапазонами адресов подсетей в виртуальной сети. Адресное пространство должно быть указано с помощью нотации CIDR. Например, в виртуальной сети с адресным пространством 10.0.0.0/16 можно определить адресное пространство подсети 10.0.0.0/24. Наименьший допустимый диапазон — /29. Он обеспечивает восемь IP-адресов для подсети. Azure резервирует первый и последний адреса в каждой подсети для соответствия требованиям протоколов. Еще три адреса резервируются для служб Azure. В результате подсеть с диапазоном адресов /29 содержит только три пригодных для использования IP-адреса. Если вы планируете подключать виртуальную сеть к VPN-шлюзу, необходимо создать подсеть шлюза. Узнайте больше о [рекомендациях по диапазонам адресов для подсетей шлюза](../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md?toc=%2fazure%2fvirtual-network%2ftoc.json#gwsub). При определенных условиях диапазон адресов после создания подсети можно изменить. Сведения об изменении диапазона адресов подсети см. в разделе [Изменение параметров подсети](#change-subnet) этой статьи.
6. Щелкните **Сохранить**.

**Команды**

|Средство|Команда|
|---|---|
|Инфраструктура CLI Azure|[az network vnet subnet update](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#update)|
|PowerShell|[Set-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/set-azurermvirtualnetworksubnetconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|


## <a name="delete-subnet"></a>Удаление подсети

Подсеть можно удалить только если, к ней не подключены какие-либо ресурсы. Если в подсети есть подключенные ресурсы, их необходимо удалить, и только потом — саму подсеть. Конкретная процедура удаления ресурса зависит от его типа. Чтобы узнать, как удалить ресурсы, подключенные к подсети, прочтите документацию по всем типам ресурсов, которые вам необходимо удалить. Удаление подсети

1. Войдите на [портал](https://portal.azure.com) с помощью учетной записи, которой назначены разрешения роли "Участник сети" (как минимум) для подписки. Дополнительные сведения о назначении ролей и разрешений учетным записям см. в статье [Встроенные роли для управления доступом на основе ролей в Azure](../active-directory/role-based-access-built-in-roles.md?toc=%2fazure%2fvirtual-network%2ftoc.json#network-contributor).
2. В поле поиска на портале введите **виртуальные сети**. В результатах поиска щелкните **виртуальные сети**.
3. В колонке **Виртуальные сети** щелкните виртуальную сеть, из которой требуется удалить подсеть.
4. В колонке виртуальной сети в разделе **ПАРАМЕТРЫ** выберите **Подсети**.
5. В отобразившемся списке подсетей в колонке "Подсети" щелкните правой кнопкой мыши подсеть, которую нужно удалить, щелкните **Удалить**, затем щелкните **Да**, чтобы удалить подсеть.

**Команды**

|Средство|Команда|
|---|---|
|Инфраструктура CLI Azure|[az network vnet delete](/cli/azure/network/vnet?toc=%2fazure%2fvirtual-network%2ftoc.json#delete)|
|PowerShell|[Remove-AzureRmVirtualNetworkSubnetConfig](/powershell/module/azurerm.network/remove-azurermvirtualnetworksubnetconfig?toc=%2fazure%2fvirtual-network%2ftoc.json)|

## <a name="next-steps"></a>Дальнейшие действия

Сведения о создании виртуальной машины в подсети см. в разделе [Создание виртуальных машин](virtual-network-get-started-vnet-subnet.md#create-vms).
