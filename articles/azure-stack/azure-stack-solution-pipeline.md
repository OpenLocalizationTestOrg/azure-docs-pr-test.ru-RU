---
title: "aaaDeploy ваши приложения tooAzure и стек Azure | Документы Microsoft"
description: "Узнайте, как tooAzure toodeploy приложений и стек Azure с гибридными CI/CD конвейера."
services: azure-stack
documentationcenter: 
author: HeathL17
manager: byronr
editor: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: helaw
ms.custom: mvc
ms.openlocfilehash: a468d7da6f34d04809ee98463a8c4146da581015
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="deploy-apps-tooazure-and-azure-stack"></a>Развертывание приложений tooAzure и стек Azure
Гибридной [непрерывной интеграции](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[непрерывной поставки](https://www.visualstudio.com/learn/what-is-continuous-delivery/)конвейера (CI/CD) позволяет toobuild, тестирования и развертывания вашего приложения toomultiple облаков.  В этом учебнике построить образец среды toolearn как конвейер CI/CD гибридного может помочь:
 
> [!div class="checklist"]
> * Запуск новой сборки, исходя из репозитория Visual Studio Team Services (VSTS) tooyour фиксации кода.
> * Автоматически разверните tooAzure ваш код, созданный для пользовательского приемочного тестирования.
> * После прохождения проверки кода автоматически разверните tooAzure стека. 


## <a name="prerequisites"></a>Предварительные требования
Несколько компонентов, необходимых toobuild конвейера CI/CD гибридного и может занять некоторое время tooprepare.  Если у вас уже есть некоторые из этих компонентов, убедитесь, что они соответствуют требованиям hello перед запуском.

В этом разделе также предполагается, что имеется знание Azure и Azure стека. Toolearn дополнительные перед продолжением необходимо будет убедиться, что toostart с этих разделов:

- [Введение tooAzure](https://docs.microsoft.com/azure/fundamentals-introduction-to-azure)
- [Основные понятия стек Azure](azure-stack-key-features.md)

### <a name="azure"></a>Таблицы Azure
 - Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.
 - Создание [веб-приложения](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md)и настройте его для [FTP-публикацию](../app-service-web/app-service-deploy-ftp.md).  Запишите hello новый URL-адрес приложения, как будет использоваться позднее.


### <a name="azure-stack"></a>Azure Stack
 - [Развертывание Azure стека](azure-stack-run-powershell-script.md).  Установка Hello обычно занимает несколько часов toocomplete, поэтому планирование соответствующим образом.
 - Развертывание [службы приложений](azure-stack-app-service-deploy.md) tooAzure стека служб PaaS.
 - Создать веб-приложения и настроить его для [FTP-публикацию](azure-stack-app-service-enable-ftp.md).  Запишите hello новый URL-адрес приложения, как будет использоваться позднее.  

### <a name="developer-tools"></a>Инструменты для разработчиков
 - Создание [VSTS рабочей](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).  процесс регистрации Hello создает проект с именем «MyFirstProject.»  
 - [Установка Visual Studio 2017 г](https://docs.microsoft.com/visualstudio/install/install-visual-studio) и [tooVSTS входа](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)
 - Подключить проект toohello и [клонировать локально](https://www.visualstudio.com/docs/git/gitquickstart).
 - Создание [пул агентов](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) в VSTS.
 - Установка Visual Studio и развертывание [агент сборки VSTS](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) tooa виртуальной машины в Azure стека. 
 

## <a name="create-app--push-toovsts"></a>Создание приложения и принудительная отправка tooVSTS

### <a name="create-application"></a>Создание приложения
В этом разделе также создать простое приложение ASP.NET и передать его tooVSTS.  Эти шаги представляют рабочего процесса обычного разработчика hello и может быть адаптирована для разработчиков средств и языков. 

1.  Откройте Visual Studio.
2.  Из Team Explorer пространства hello и **решения...**  область, щелкните **New**.
3.  Выберите **Visual C#** > **Web** > **веб-приложения ASP.NET (.NET Framework)**.
4.  Укажите имя для приложения hello и нажмите кнопку **ОК**.
5.  На следующем экране приветствия, оставьте значения по умолчанию hello (Web forms), а затем нажмите **ОК**.

### <a name="commit-and-push-changes-toovsts"></a>Зафиксируйте и отправьте изменения tooVSTS
1.  С помощью Team Explorer в Visual Studio, выберите hello раскрывающегося списка и нажмите кнопку **изменения**.
2.  Введите сообщение фиксации и выберите **фиксации на всех**. Может быть файл решения hello toosave запрос, нажмите кнопку Да toosave все.
3.  После фиксации, Visual Studio предлагает toosync изменения tooyour проекта. Выберите **синхронизации**.

    ![экран фиксации отображение hello изображений после фиксации](./media/azure-stack-solution-pipeline/image1.png)

4.  Во вкладке "Синхронизация" hello в разделе *исходящие*, появится новый фиксации.  Выберите **Push** tooVSTS изменить toosynchronize hello.

    ![шаги синхронизации отображение изображений](./media/azure-stack-solution-pipeline/image2.png)

### <a name="review-code-in-vsts"></a>Проверьте код в VSTS
После фиксации изменений и помещается tooVSTS, проверьте код из портала VSTS hello.  Выберите **кода**, а затем **файлы** hello раскрывающемся меню.  Вы увидите hello решение, которое вы создали.

## <a name="create-build-definition"></a>Создание определения сборки
процесс построения Hello определяет как построен и объединенных пакет для развертывания на каждой фиксации изменений кода приложения. В нашем примере мы использование процесса сборки hello tooconfigure шаблона hello включены для приложения ASP.NET, хотя эта конфигурация может быть адаптирован в зависимости от приложения.

1.  Войдите в систему tooyour VSTS рабочей веб-браузере.
2.  Баннер hello выберите **построения и выпуска** и затем **строит**.
3.  Нажмите кнопку **+ новое определение**.
4.  Выберите из списка шаблонов hello **ASP.NET (Предварительная версия)** и выберите **применить**.
5.  Изменение hello *Аргументы MSBuild* в *построить решение* шаг для:

    `/p:DeployOnBuild=True /p:WebPublishMethod=FileSystem /p:DeployDefaultTarget=WebPublish /p:publishUrl="$(build.artifactstagingdirectory)\\"`

6.  Выберите hello **параметры** вкладку и очереди агента выберите hello hello агент построения развернутый tooa виртуальной машины на стек Azure. 
7.  Выберите hello **триггеры** и включите **непрерывной интеграции**.
7.  Нажмите кнопку **сохранить & очередь** , а затем выберите **Сохранить** из раскрывающегося списка hello. 

## <a name="create-release-definition"></a>Создание определения выпуска
Процесс выпуска Hello определяет, как сборки из предыдущего шага hello становятся tooan развернутой среды.  В этом учебнике мы опубликовать нашего приложения ASP.NET с tooan FTP веб-приложения Azure. tooconfigure tooAzure выпуска использовать hello, следующие шаги:

1.  Баннер VSTS hello, выберите **построения и выпуска** и затем **выпуски**.
2.  Щелкните зеленый hello **+ новое определение**.
3.  Выберите **пустой** и нажмите кнопку **Далее**.
4.  Установите флажок "hello" для *непрерывного развертывания*, а затем нажмите кнопку **создать**.

Создания определения пустой выпуска и привязан его toohello сборки, мы добавить шаги для hello среду Azure:

1.  Щелкните зеленый hello  **+**  tooadd задачи.
2.  Выберите **все**, а затем из списка hello, добавьте **отправить FTP** и выберите **закрыть**.
3.  Выберите hello **отправить FTP** задачу необходимо просто добавить и настроить hello следующие параметры:
    
    | Параметр | Значение |
    | ----- | ----- |
    |Метод проверки подлинности| Введите учетные данные|
    |URL-адрес сервера | Получить URL-адрес FTP приложения с портала Azure |
    |Имя пользователя | Имя пользователя, которые были настроены при создании учетных данных FTP для веб-приложения |
    |Пароль | Пароль, созданный при установке учетные данные FTP для веб-приложения|
    |Исходный каталог | $(System.DefaultWorkingDirectory)\**\ |
    |Удаленный каталог | /Site/wwwroot / |
    |Сохранить пути к файлам | Включен (флажок установлен)|

4.  Нажмите кнопку **Сохранить**

Наконец настроить агент hello выпуска определения toouse hello пул, содержащий hello агент развертывается с помощью hello следующие шаги:
1.  Выберите определение выпуска hello и нажмите кнопку **изменить**.
2.  Выберите **выполняются на агенте** в среднем столбце hello.  В правом столбце hello выберите hello очереди агента, содержащий hello агент построения, выполняющий стек Azure.  
    ![Отображение изображения конфигурации выпуска определения toouse определенной очереди](./media/azure-stack-solution-pipeline/image3.png)


## <a name="deploy-your-app-tooazure"></a>Развертывание tooAzure вашего приложения
Этот шаг использует ваш созданный CI/CD конвейера toodeploy hello ASP.NET приложения tooa веб-приложения в Azure. 

1.  Баннер hello в VSTS, выберите **построения и выпуска**и выберите **строит**.
2.  Нажмите кнопку **...**  на hello создано определение построения и выберите **в очередь новую сборку**.
3.  Примите значения по умолчанию hello и нажмите кнопку **ОК**.  сборки Hello начинается и отображает ход выполнения.
4.  После завершения построения hello можно отслеживать состояние hello, выбрав **построения и выпуска** и выбрав **выпуски**.
5.  После завершения построения hello узле hello hello URL-адресу, указанных при создании веб-приложения hello.    


## <a name="add-azure-stack-toopipeline"></a>Добавить toopipeline стек Azure
Теперь, когда тестировании конвейер CI/CD, развернув tooAzure это время tooadd конвейера toohello стек Azure.  В hello, выполнив действия можно создать новую среду и добавьте toodeploy задача FTP отправить вашего приложения tooAzure стека.  Вы также добавить утверждающий выпуска служит в качестве toosimulate способом, «подпись» на tooAzure выпуска кода стека.  

1.  В hello определения выпуска, выберите **+ добавить среду** и **Создание новой среды**.
2.  Выберите **пустой**, нажмите кнопку **Далее**.
3.  Выберите **конкретных пользователей** и укажите учетную запись.  Нажмите кнопку **Создать**.
4.  Переименование hello среды, выбрав имя существующего hello и введя *стека Azure*.
5.  Теперь, выбор hello среды стека Azure, а затем выберите **добавьте задачи**.
6.  Выберите hello **отправить FTP** задач и выберите **добавить**, а затем выберите **закрыть**.


### <a name="configure-ftp-task"></a>Настройка задачи «FTP»
После создания выпуска следует настроить hello шаги, необходимые для публикации toohello веб-приложения Azure стек.  Так же, как с помощью задачи передачи FTP hello вы настроили для Azure, настройке задачи «hello» для стека Azure:

1.  Выберите hello **отправить FTP** задачу необходимо просто добавить и настроить hello следующие параметры:
    
    | Параметр | Значение |
    | -----     | ----- |
    |Метод проверки подлинности| Введите учетные данные|
    |URL-адрес сервера | Получить URL-адрес FTP приложения с портала Azure стека |
    |Имя пользователя | Имя пользователя, которые были настроены при создании учетных данных FTP для веб-приложения |
    |Пароль | Пароль, созданный при установке учетные данные FTP для веб-приложения|
    |Исходный каталог | $(System.DefaultWorkingDirectory)\**\ |
    |Удаленный каталог | /Site/wwwroot /|
    |Сохранить пути к файлам | Включен (флажок установлен)|

2.  Нажмите кнопку **Сохранить**

И наконец настройте агент hello выпуска определения toouse hello пул, содержащий hello агент развертывается с помощью hello следующие шаги:
1.  Выберите определение выпуска hello и нажмите кнопку **изменение**
2.  Выберите **выполняются на агенте** в среднем столбце hello. В правом столбце hello выберите hello очереди агента, содержащий hello агент построения, выполняющий стек Azure.  
    ![Отображение изображения конфигурации выпуска определения toouse определенной очереди](./media/azure-stack-solution-pipeline/image3.png)

## <a name="deploy-new-code"></a>Развертывание нового кода
Теперь можно проверить конвейер CI/CD гибридный hello с tooAzure публикации последнего шага hello стека.  В этом разделе изменения нижней части страницы сайта hello и начать развертывание через конвейер hello.  После завершения вы увидите изменения развернуты tooAzure для просмотра, а затем после подтверждения hello выпуска, они являются опубликованные tooAzure стека.

1. В Visual Studio откройте hello *site.master* файл и измените следующую строку:
    
    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application</p>
    `

    toothis:

    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application delivered by VSTS, Azure, and Azure Stack</p>
    `
3.  Зафиксируйте изменения hello и синхронизировать tooVSTS.  
4.  Из рабочей области VSTS hello, проверьте состояние сборки hello, выбрав **построения и выпуска** > **построения**
5.  Вы увидите построение выполняется.  Дважды щелкните состояние hello и можно отслеживать ход выполнения сборок hello.  Как только вы увидите «По завершении сборки» в консоли hello, перемещение на выпуск hello toocheck из **построения и выпуска** > **выпуска**.  Дважды щелкните hello выпуска.
6.  Вы получите уведомление, что выпуск необходим анализ. Проверьте URL-адрес приложения hello и убедитесь, что новые изменения hello.  Утверждение выпуска hello в VSTS.
    ![Отображение изображения конфигурации выпуска определения toouse определенной очереди](./media/azure-stack-solution-pipeline/image4.png)
    
7.  Проверка публикации tooAzure стека является полный обход hello веб-сайт, используя URL-адрес hello, указанных при создании веб-приложения hello.
    ![изображение ASP. NEt приложения с нижним колонтитулом изменен](./media/azure-stack-solution-pipeline/image5.png)


Теперь можно использовать новый конвейер CI/CD гибридного как стандартный блок для других шаблонов гибридного облака.

## <a name="next-steps"></a>Дальнейшие действия
В этом учебнике вы узнали, как toobuild гибридных CI/CD конвейера:

> [!div class="checklist"]
> * Инициирует новый сборки, исходя из репозитория Visual Studio Team Services (VSTS) tooyour фиксации кода.
> * Автоматически развертывает tooAzure ваш код, созданный для пользовательского приемочного тестирования.
> * После прохождения проверки кода автоматически развертывает tooAzure стека. 

Теперь, когда конвейер CI/CD гибридного продолжить путем изучения как toodevelop приложений для Azure стека.

> [!div class="nextstepaction"]
> [Разработка для Azure Stack](azure-stack-developer.md)


