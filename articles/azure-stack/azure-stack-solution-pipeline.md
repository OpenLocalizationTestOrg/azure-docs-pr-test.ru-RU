---
title: "aaaDeploy ваши приложения tooAzure и стек Azure | Документы Microsoft"
description: "Узнайте, как tooAzure toodeploy приложений и стек Azure с гибридными CI/CD конвейера."
services: azure-stack
documentationcenter: 
author: HeathL17
manager: byronr
editor: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/11/2017
ms.author: helaw
ms.custom: mvc
ms.openlocfilehash: a468d7da6f34d04809ee98463a8c4146da581015
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="deploy-apps-tooazure-and-azure-stack"></a><span data-ttu-id="69947-103">Развертывание приложений tooAzure и стек Azure</span><span class="sxs-lookup"><span data-stu-id="69947-103">Deploy apps tooAzure and Azure Stack</span></span>
<span data-ttu-id="69947-104">Гибридной [непрерывной интеграции](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[непрерывной поставки](https://www.visualstudio.com/learn/what-is-continuous-delivery/)конвейера (CI/CD) позволяет toobuild, тестирования и развертывания вашего приложения toomultiple облаков.</span><span class="sxs-lookup"><span data-stu-id="69947-104">A hybrid [continuous integration](https://www.visualstudio.com/learn/what-is-continuous-integration/)/[continuous delivery](https://www.visualstudio.com/learn/what-is-continuous-delivery/)(CI/CD) pipeline enables you toobuild, test, and deploy your app toomultiple clouds.</span></span>  <span data-ttu-id="69947-105">В этом учебнике построить образец среды toolearn как конвейер CI/CD гибридного может помочь:</span><span class="sxs-lookup"><span data-stu-id="69947-105">In this tutorial, you build a sample environment toolearn how a hybrid CI/CD pipeline can help you:</span></span>
 
> [!div class="checklist"]
> * <span data-ttu-id="69947-106">Запуск новой сборки, исходя из репозитория Visual Studio Team Services (VSTS) tooyour фиксации кода.</span><span class="sxs-lookup"><span data-stu-id="69947-106">Initiate a new build based on code commits tooyour Visual Studio Team Services (VSTS) repository.</span></span>
> * <span data-ttu-id="69947-107">Автоматически разверните tooAzure ваш код, созданный для пользовательского приемочного тестирования.</span><span class="sxs-lookup"><span data-stu-id="69947-107">Automatically deploy your newly built code tooAzure for user acceptance testing.</span></span>
> * <span data-ttu-id="69947-108">После прохождения проверки кода автоматически разверните tooAzure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-108">Once your code has passed testing, automatically deploy tooAzure Stack.</span></span> 


## <a name="prerequisites"></a><span data-ttu-id="69947-109">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="69947-109">Prerequisites</span></span>
<span data-ttu-id="69947-110">Несколько компонентов, необходимых toobuild конвейера CI/CD гибридного и может занять некоторое время tooprepare.</span><span class="sxs-lookup"><span data-stu-id="69947-110">A few components are required toobuild a hybrid CI/CD pipeline, and may take some time tooprepare.</span></span>  <span data-ttu-id="69947-111">Если у вас уже есть некоторые из этих компонентов, убедитесь, что они соответствуют требованиям hello перед запуском.</span><span class="sxs-lookup"><span data-stu-id="69947-111">If you already have some of these components, make sure they meet hello requirements before beginning.</span></span>

<span data-ttu-id="69947-112">В этом разделе также предполагается, что имеется знание Azure и Azure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-112">This topic also assumes that you have some knowledge of Azure and Azure Stack.</span></span> <span data-ttu-id="69947-113">Toolearn дополнительные перед продолжением необходимо будет убедиться, что toostart с этих разделов:</span><span class="sxs-lookup"><span data-stu-id="69947-113">If you want toolearn more before proceeding, be sure toostart with these topics:</span></span>

- [<span data-ttu-id="69947-114">Введение tooAzure</span><span class="sxs-lookup"><span data-stu-id="69947-114">Introduction tooAzure</span></span>](https://docs.microsoft.com/azure/fundamentals-introduction-to-azure)
- [<span data-ttu-id="69947-115">Основные понятия стек Azure</span><span class="sxs-lookup"><span data-stu-id="69947-115">Azure Stack Key Concepts</span></span>](azure-stack-key-features.md)

### <a name="azure"></a><span data-ttu-id="69947-116">Таблицы Azure</span><span class="sxs-lookup"><span data-stu-id="69947-116">Azure</span></span>
 - <span data-ttu-id="69947-117">Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.</span><span class="sxs-lookup"><span data-stu-id="69947-117">If you don't have an Azure subscription, create a [free account](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) before you begin.</span></span>
 - <span data-ttu-id="69947-118">Создание [веб-приложения](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md)и настройте его для [FTP-публикацию](../app-service-web/app-service-deploy-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="69947-118">Create a [Web App](../app-service-web/app-service-web-how-to-create-a-web-app-in-an-ase.md), and configure it for [FTP publishing](../app-service-web/app-service-deploy-ftp.md).</span></span>  <span data-ttu-id="69947-119">Запишите hello новый URL-адрес приложения, как будет использоваться позднее.</span><span class="sxs-lookup"><span data-stu-id="69947-119">Make note of hello new Web App URL, as it is used later.</span></span>


### <a name="azure-stack"></a><span data-ttu-id="69947-120">Azure Stack</span><span class="sxs-lookup"><span data-stu-id="69947-120">Azure Stack</span></span>
 - <span data-ttu-id="69947-121">[Развертывание Azure стека](azure-stack-run-powershell-script.md).</span><span class="sxs-lookup"><span data-stu-id="69947-121">[Deploy Azure Stack](azure-stack-run-powershell-script.md).</span></span>  <span data-ttu-id="69947-122">Установка Hello обычно занимает несколько часов toocomplete, поэтому планирование соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="69947-122">hello installation usually takes a few hours toocomplete, so plan accordingly.</span></span>
 - <span data-ttu-id="69947-123">Развертывание [службы приложений](azure-stack-app-service-deploy.md) tooAzure стека служб PaaS.</span><span class="sxs-lookup"><span data-stu-id="69947-123">Deploy [App Service](azure-stack-app-service-deploy.md) PaaS services tooAzure Stack.</span></span>
 - <span data-ttu-id="69947-124">Создать веб-приложения и настроить его для [FTP-публикацию](azure-stack-app-service-enable-ftp.md).</span><span class="sxs-lookup"><span data-stu-id="69947-124">Create a Web App and configure it for [FTP publishing](azure-stack-app-service-enable-ftp.md).</span></span>  <span data-ttu-id="69947-125">Запишите hello новый URL-адрес приложения, как будет использоваться позднее.</span><span class="sxs-lookup"><span data-stu-id="69947-125">Make note of hello new Web App URL, as it is used later.</span></span>  

### <a name="developer-tools"></a><span data-ttu-id="69947-126">Инструменты для разработчиков</span><span class="sxs-lookup"><span data-stu-id="69947-126">Developer tools</span></span>
 - <span data-ttu-id="69947-127">Создание [VSTS рабочей](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).</span><span class="sxs-lookup"><span data-stu-id="69947-127">Create a [VSTS workspace](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services).</span></span>  <span data-ttu-id="69947-128">процесс регистрации Hello создает проект с именем «MyFirstProject.»</span><span class="sxs-lookup"><span data-stu-id="69947-128">hello sign-up process creates a project named "MyFirstProject."</span></span>  
 - <span data-ttu-id="69947-129">[Установка Visual Studio 2017 г](https://docs.microsoft.com/visualstudio/install/install-visual-studio) и [tooVSTS входа](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)</span><span class="sxs-lookup"><span data-stu-id="69947-129">[Install Visual Studio 2017](https://docs.microsoft.com/visualstudio/install/install-visual-studio) and [sign-in tooVSTS](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#connect-and-share-code-from-visual-studio)</span></span>
 - <span data-ttu-id="69947-130">Подключить проект toohello и [клонировать локально](https://www.visualstudio.com/docs/git/gitquickstart).</span><span class="sxs-lookup"><span data-stu-id="69947-130">Connect toohello project and [clone locally](https://www.visualstudio.com/docs/git/gitquickstart).</span></span>
 - <span data-ttu-id="69947-131">Создание [пул агентов](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) в VSTS.</span><span class="sxs-lookup"><span data-stu-id="69947-131">Create an [agent pool](https://www.visualstudio.com/docs/build/concepts/agents/pools-queues#creating-agent-pools-and-queues) in VSTS.</span></span>
 - <span data-ttu-id="69947-132">Установка Visual Studio и развертывание [агент сборки VSTS](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) tooa виртуальной машины в Azure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-132">Install Visual Studio and deploy a [VSTS build agent](https://www.visualstudio.com/docs/build/actions/agents/v2-windows) tooa virtual machine on Azure Stack.</span></span> 
 

## <a name="create-app--push-toovsts"></a><span data-ttu-id="69947-133">Создание приложения и принудительная отправка tooVSTS</span><span class="sxs-lookup"><span data-stu-id="69947-133">Create app & push tooVSTS</span></span>

### <a name="create-application"></a><span data-ttu-id="69947-134">Создание приложения</span><span class="sxs-lookup"><span data-stu-id="69947-134">Create application</span></span>
<span data-ttu-id="69947-135">В этом разделе также создать простое приложение ASP.NET и передать его tooVSTS.</span><span class="sxs-lookup"><span data-stu-id="69947-135">In this section, you create a simple ASP.NET application and push it tooVSTS.</span></span>  <span data-ttu-id="69947-136">Эти шаги представляют рабочего процесса обычного разработчика hello и может быть адаптирована для разработчиков средств и языков.</span><span class="sxs-lookup"><span data-stu-id="69947-136">These steps represent hello normal developer workflow, and could be adapted for developer tools and languages.</span></span> 

1.  <span data-ttu-id="69947-137">Откройте Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="69947-137">Open Visual Studio.</span></span>
2.  <span data-ttu-id="69947-138">Из Team Explorer пространства hello и **решения...**  область, щелкните **New**.</span><span class="sxs-lookup"><span data-stu-id="69947-138">From hello Team Explorer space and **Solutions...** area, click **New**.</span></span>
3.  <span data-ttu-id="69947-139">Выберите **Visual C#** > **Web** > **веб-приложения ASP.NET (.NET Framework)**.</span><span class="sxs-lookup"><span data-stu-id="69947-139">Select **Visual C#** > **Web** > **ASP.NET Web Application (.NET Framework)**.</span></span>
4.  <span data-ttu-id="69947-140">Укажите имя для приложения hello и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="69947-140">Provide a name for hello application and click **OK**.</span></span>
5.  <span data-ttu-id="69947-141">На следующем экране приветствия, оставьте значения по умолчанию hello (Web forms), а затем нажмите **ОК**.</span><span class="sxs-lookup"><span data-stu-id="69947-141">On hello next screen, keep hello defaults (Web forms) and click **OK**.</span></span>

### <a name="commit-and-push-changes-toovsts"></a><span data-ttu-id="69947-142">Зафиксируйте и отправьте изменения tooVSTS</span><span class="sxs-lookup"><span data-stu-id="69947-142">Commit and push changes tooVSTS</span></span>
1.  <span data-ttu-id="69947-143">С помощью Team Explorer в Visual Studio, выберите hello раскрывающегося списка и нажмите кнопку **изменения**.</span><span class="sxs-lookup"><span data-stu-id="69947-143">Using Team Explorer in Visual Studio, select hello dropdown and click **Changes**.</span></span>
2.  <span data-ttu-id="69947-144">Введите сообщение фиксации и выберите **фиксации на всех**.</span><span class="sxs-lookup"><span data-stu-id="69947-144">Provide a commit message and select **Commit all**.</span></span> <span data-ttu-id="69947-145">Может быть файл решения hello toosave запрос, нажмите кнопку Да toosave все.</span><span class="sxs-lookup"><span data-stu-id="69947-145">You may be prompted toosave hello solution file, click yes toosave all.</span></span>
3.  <span data-ttu-id="69947-146">После фиксации, Visual Studio предлагает toosync изменения tooyour проекта.</span><span class="sxs-lookup"><span data-stu-id="69947-146">Once committed, Visual Studio offers toosync changes tooyour project.</span></span> <span data-ttu-id="69947-147">Выберите **синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="69947-147">Select **Sync**.</span></span>

    ![экран фиксации отображение hello изображений после фиксации](./media/azure-stack-solution-pipeline/image1.png)

4.  <span data-ttu-id="69947-149">Во вкладке "Синхронизация" hello в разделе *исходящие*, появится новый фиксации.</span><span class="sxs-lookup"><span data-stu-id="69947-149">In hello synchronization tab, under *Outgoing*, you see your new commit.</span></span>  <span data-ttu-id="69947-150">Выберите **Push** tooVSTS изменить toosynchronize hello.</span><span class="sxs-lookup"><span data-stu-id="69947-150">Select **Push** toosynchronize hello change tooVSTS.</span></span>

    ![шаги синхронизации отображение изображений](./media/azure-stack-solution-pipeline/image2.png)

### <a name="review-code-in-vsts"></a><span data-ttu-id="69947-152">Проверьте код в VSTS</span><span class="sxs-lookup"><span data-stu-id="69947-152">Review code in VSTS</span></span>
<span data-ttu-id="69947-153">После фиксации изменений и помещается tooVSTS, проверьте код из портала VSTS hello.</span><span class="sxs-lookup"><span data-stu-id="69947-153">Once you've committed a change and pushed tooVSTS, check your code from hello VSTS portal.</span></span>  <span data-ttu-id="69947-154">Выберите **кода**, а затем **файлы** hello раскрывающемся меню.</span><span class="sxs-lookup"><span data-stu-id="69947-154">Select **Code**, and then **Files** from hello dropdown menu.</span></span>  <span data-ttu-id="69947-155">Вы увидите hello решение, которое вы создали.</span><span class="sxs-lookup"><span data-stu-id="69947-155">You can see hello solution you created.</span></span>

## <a name="create-build-definition"></a><span data-ttu-id="69947-156">Создание определения сборки</span><span class="sxs-lookup"><span data-stu-id="69947-156">Create build definition</span></span>
<span data-ttu-id="69947-157">процесс построения Hello определяет как построен и объединенных пакет для развертывания на каждой фиксации изменений кода приложения.</span><span class="sxs-lookup"><span data-stu-id="69947-157">hello build process defines how your application is built and packaged for deployment on each commit of code changes.</span></span> <span data-ttu-id="69947-158">В нашем примере мы использование процесса сборки hello tooconfigure шаблона hello включены для приложения ASP.NET, хотя эта конфигурация может быть адаптирован в зависимости от приложения.</span><span class="sxs-lookup"><span data-stu-id="69947-158">In our example, we use hello included template tooconfigure hello build process for an ASP.NET app, though this configuration could be adapted depending on your application.</span></span>

1.  <span data-ttu-id="69947-159">Войдите в систему tooyour VSTS рабочей веб-браузере.</span><span class="sxs-lookup"><span data-stu-id="69947-159">Sign in tooyour VSTS workspace from a web browser.</span></span>
2.  <span data-ttu-id="69947-160">Баннер hello выберите **построения и выпуска** и затем **строит**.</span><span class="sxs-lookup"><span data-stu-id="69947-160">From hello banner, select **Build & Release**  and then **Builds**.</span></span>
3.  <span data-ttu-id="69947-161">Нажмите кнопку **+ новое определение**.</span><span class="sxs-lookup"><span data-stu-id="69947-161">Click **+ New definition**.</span></span>
4.  <span data-ttu-id="69947-162">Выберите из списка шаблонов hello **ASP.NET (Предварительная версия)** и выберите **применить**.</span><span class="sxs-lookup"><span data-stu-id="69947-162">From hello list of templates, select **ASP.NET (Preview)** and select **Apply**.</span></span>
5.  <span data-ttu-id="69947-163">Изменение hello *Аргументы MSBuild* в *построить решение* шаг для:</span><span class="sxs-lookup"><span data-stu-id="69947-163">Modify hello *MSBuild Arguments* field in *Build Solution* step to:</span></span>

    `/p:DeployOnBuild=True /p:WebPublishMethod=FileSystem /p:DeployDefaultTarget=WebPublish /p:publishUrl="$(build.artifactstagingdirectory)\\"`

6.  <span data-ttu-id="69947-164">Выберите hello **параметры** вкладку и очереди агента выберите hello hello агент построения развернутый tooa виртуальной машины на стек Azure.</span><span class="sxs-lookup"><span data-stu-id="69947-164">Select hello **Options** tab, and select hello agent queue for hello build agent you deployed tooa virtual machine on Azure Stack.</span></span> 
7.  <span data-ttu-id="69947-165">Выберите hello **триггеры** и включите **непрерывной интеграции**.</span><span class="sxs-lookup"><span data-stu-id="69947-165">Select hello **Triggers** tab, and enable **Continuous Integration**.</span></span>
7.  <span data-ttu-id="69947-166">Нажмите кнопку **сохранить & очередь** , а затем выберите **Сохранить** из раскрывающегося списка hello.</span><span class="sxs-lookup"><span data-stu-id="69947-166">Click **Save & queue** and then select **Save** from hello dropdown.</span></span> 

## <a name="create-release-definition"></a><span data-ttu-id="69947-167">Создание определения выпуска</span><span class="sxs-lookup"><span data-stu-id="69947-167">Create release definition</span></span>
<span data-ttu-id="69947-168">Процесс выпуска Hello определяет, как сборки из предыдущего шага hello становятся tooan развернутой среды.</span><span class="sxs-lookup"><span data-stu-id="69947-168">hello release process defines how builds from hello previous step are deployed tooan environment.</span></span>  <span data-ttu-id="69947-169">В этом учебнике мы опубликовать нашего приложения ASP.NET с tooan FTP веб-приложения Azure.</span><span class="sxs-lookup"><span data-stu-id="69947-169">In this tutorial, we publish our ASP.NET app with FTP tooan Azure Web App.</span></span> <span data-ttu-id="69947-170">tooconfigure tooAzure выпуска использовать hello, следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="69947-170">tooconfigure a release tooAzure, use hello following steps:</span></span>

1.  <span data-ttu-id="69947-171">Баннер VSTS hello, выберите **построения и выпуска** и затем **выпуски**.</span><span class="sxs-lookup"><span data-stu-id="69947-171">From hello VSTS banner, select **Build & Release**  and then **Releases**.</span></span>
2.  <span data-ttu-id="69947-172">Щелкните зеленый hello **+ новое определение**.</span><span class="sxs-lookup"><span data-stu-id="69947-172">Click hello green **+ New definition**.</span></span>
3.  <span data-ttu-id="69947-173">Выберите **пустой** и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="69947-173">Select **Empty** and click **Next**.</span></span>
4.  <span data-ttu-id="69947-174">Установите флажок "hello" для *непрерывного развертывания*, а затем нажмите кнопку **создать**.</span><span class="sxs-lookup"><span data-stu-id="69947-174">Check hello box for *Continuous deployment*, and then click **Create**.</span></span>

<span data-ttu-id="69947-175">Создания определения пустой выпуска и привязан его toohello сборки, мы добавить шаги для hello среду Azure:</span><span class="sxs-lookup"><span data-stu-id="69947-175">Now that you've created an empty release definition and tied it toohello build, we add steps for hello Azure environment:</span></span>

1.  <span data-ttu-id="69947-176">Щелкните зеленый hello  **+**  tooadd задачи.</span><span class="sxs-lookup"><span data-stu-id="69947-176">Click hello green **+** tooadd tasks.</span></span>
2.  <span data-ttu-id="69947-177">Выберите **все**, а затем из списка hello, добавьте **отправить FTP** и выберите **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="69947-177">Select **All**, and then from hello list, add **FTP Upload** and select **Close**.</span></span>
3.  <span data-ttu-id="69947-178">Выберите hello **отправить FTP** задачу необходимо просто добавить и настроить hello следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="69947-178">Select hello **FTP Upload** task you just added, and configure hello following parameters:</span></span>
    
    | <span data-ttu-id="69947-179">Параметр</span><span class="sxs-lookup"><span data-stu-id="69947-179">Parameter</span></span> | <span data-ttu-id="69947-180">Значение</span><span class="sxs-lookup"><span data-stu-id="69947-180">Value</span></span> |
    | ----- | ----- |
    |<span data-ttu-id="69947-181">Метод проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="69947-181">Authentication Method</span></span>| <span data-ttu-id="69947-182">Введите учетные данные</span><span class="sxs-lookup"><span data-stu-id="69947-182">Enter Credentials</span></span>|
    |<span data-ttu-id="69947-183">URL-адрес сервера</span><span class="sxs-lookup"><span data-stu-id="69947-183">Server URL</span></span> | <span data-ttu-id="69947-184">Получить URL-адрес FTP приложения с портала Azure</span><span class="sxs-lookup"><span data-stu-id="69947-184">Web App FTP URL retrieved from Azure portal</span></span> |
    |<span data-ttu-id="69947-185">Имя пользователя</span><span class="sxs-lookup"><span data-stu-id="69947-185">Username</span></span> | <span data-ttu-id="69947-186">Имя пользователя, которые были настроены при создании учетных данных FTP для веб-приложения</span><span class="sxs-lookup"><span data-stu-id="69947-186">Username you configured when creating FTP Credentials for Web App</span></span> |
    |<span data-ttu-id="69947-187">Пароль</span><span class="sxs-lookup"><span data-stu-id="69947-187">Password</span></span> | <span data-ttu-id="69947-188">Пароль, созданный при установке учетные данные FTP для веб-приложения</span><span class="sxs-lookup"><span data-stu-id="69947-188">Password you created when establishing FTP credentials for Web App</span></span>|
    |<span data-ttu-id="69947-189">Исходный каталог</span><span class="sxs-lookup"><span data-stu-id="69947-189">Source Directory</span></span> | <span data-ttu-id="69947-190">$(System.DefaultWorkingDirectory)\**\\</span><span class="sxs-lookup"><span data-stu-id="69947-190">$(System.DefaultWorkingDirectory)\**\\</span></span> |
    |<span data-ttu-id="69947-191">Удаленный каталог</span><span class="sxs-lookup"><span data-stu-id="69947-191">Remote Directory</span></span> | <span data-ttu-id="69947-192">/Site/wwwroot /</span><span class="sxs-lookup"><span data-stu-id="69947-192">/site/wwwroot/</span></span> |
    |<span data-ttu-id="69947-193">Сохранить пути к файлам</span><span class="sxs-lookup"><span data-stu-id="69947-193">Preserve file paths</span></span> | <span data-ttu-id="69947-194">Включен (флажок установлен)</span><span class="sxs-lookup"><span data-stu-id="69947-194">Enabled (checked)</span></span>|

4.  <span data-ttu-id="69947-195">Нажмите кнопку **Сохранить**</span><span class="sxs-lookup"><span data-stu-id="69947-195">Click **Save**</span></span>

<span data-ttu-id="69947-196">Наконец настроить агент hello выпуска определения toouse hello пул, содержащий hello агент развертывается с помощью hello следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="69947-196">Finally, you configure hello release definition toouse hello agent pool containing hello agent deployed using hello following steps:</span></span>
1.  <span data-ttu-id="69947-197">Выберите определение выпуска hello и нажмите кнопку **изменить**.</span><span class="sxs-lookup"><span data-stu-id="69947-197">Select hello release definition and click **Edit**.</span></span>
2.  <span data-ttu-id="69947-198">Выберите **выполняются на агенте** в среднем столбце hello.</span><span class="sxs-lookup"><span data-stu-id="69947-198">Select **Run on agent** from hello middle column.</span></span>  <span data-ttu-id="69947-199">В правом столбце hello выберите hello очереди агента, содержащий hello агент построения, выполняющий стек Azure.</span><span class="sxs-lookup"><span data-stu-id="69947-199">In hello right column, select hello agent queue containing hello build agent running on Azure Stack.</span></span>  
    <span data-ttu-id="69947-200">![Отображение изображения конфигурации выпуска определения toouse определенной очереди](./media/azure-stack-solution-pipeline/image3.png)</span><span class="sxs-lookup"><span data-stu-id="69947-200">![image showing configuration of release definition toouse specific queue](./media/azure-stack-solution-pipeline/image3.png)</span></span>


## <a name="deploy-your-app-tooazure"></a><span data-ttu-id="69947-201">Развертывание tooAzure вашего приложения</span><span class="sxs-lookup"><span data-stu-id="69947-201">Deploy your app tooAzure</span></span>
<span data-ttu-id="69947-202">Этот шаг использует ваш созданный CI/CD конвейера toodeploy hello ASP.NET приложения tooa веб-приложения в Azure.</span><span class="sxs-lookup"><span data-stu-id="69947-202">This step uses your newly built CI/CD pipeline toodeploy hello ASP.NET app tooa Web App on Azure.</span></span> 

1.  <span data-ttu-id="69947-203">Баннер hello в VSTS, выберите **построения и выпуска**и выберите **строит**.</span><span class="sxs-lookup"><span data-stu-id="69947-203">From hello banner in VSTS, select **Build & Release**, and then select **Builds**.</span></span>
2.  <span data-ttu-id="69947-204">Нажмите кнопку **...**  на hello создано определение построения и выберите **в очередь новую сборку**.</span><span class="sxs-lookup"><span data-stu-id="69947-204">Click **...** on hello build definition previously created, and select **Queue new build**.</span></span>
3.  <span data-ttu-id="69947-205">Примите значения по умолчанию hello и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="69947-205">Accept hello defaults and click **Ok**.</span></span>  <span data-ttu-id="69947-206">сборки Hello начинается и отображает ход выполнения.</span><span class="sxs-lookup"><span data-stu-id="69947-206">hello build begins and displays progress.</span></span>
4.  <span data-ttu-id="69947-207">После завершения построения hello можно отслеживать состояние hello, выбрав **построения и выпуска** и выбрав **выпуски**.</span><span class="sxs-lookup"><span data-stu-id="69947-207">Once hello build is complete, you can track hello status by selecting **Build & Release** and selecting **Releases**.</span></span>
5.  <span data-ttu-id="69947-208">После завершения построения hello узле hello hello URL-адресу, указанных при создании веб-приложения hello.</span><span class="sxs-lookup"><span data-stu-id="69947-208">After hello build is complete, visit hello website using hello URL noted when creating hello Web App.</span></span>    


## <a name="add-azure-stack-toopipeline"></a><span data-ttu-id="69947-209">Добавить toopipeline стек Azure</span><span class="sxs-lookup"><span data-stu-id="69947-209">Add Azure Stack toopipeline</span></span>
<span data-ttu-id="69947-210">Теперь, когда тестировании конвейер CI/CD, развернув tooAzure это время tooadd конвейера toohello стек Azure.</span><span class="sxs-lookup"><span data-stu-id="69947-210">Now that you've tested your CI/CD pipeline by deploying tooAzure, it's time tooadd Azure Stack toohello pipeline.</span></span>  <span data-ttu-id="69947-211">В hello, выполнив действия можно создать новую среду и добавьте toodeploy задача FTP отправить вашего приложения tooAzure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-211">In hello following steps, you create a new environment and add an FTP Upload task toodeploy your app tooAzure Stack.</span></span>  <span data-ttu-id="69947-212">Вы также добавить утверждающий выпуска служит в качестве toosimulate способом, «подпись» на tooAzure выпуска кода стека.</span><span class="sxs-lookup"><span data-stu-id="69947-212">You also add a release approver, which serves as a way toosimulate "signing off" on a code release tooAzure Stack.</span></span>  

1.  <span data-ttu-id="69947-213">В hello определения выпуска, выберите **+ добавить среду** и **Создание новой среды**.</span><span class="sxs-lookup"><span data-stu-id="69947-213">In hello Release definition, select **+ Add Environment** and **Create new environment**.</span></span>
2.  <span data-ttu-id="69947-214">Выберите **пустой**, нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="69947-214">Select **Empty**, click **Next**.</span></span>
3.  <span data-ttu-id="69947-215">Выберите **конкретных пользователей** и укажите учетную запись.</span><span class="sxs-lookup"><span data-stu-id="69947-215">Select **Specific users** and specify your account.</span></span>  <span data-ttu-id="69947-216">Нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="69947-216">Select **Create**.</span></span>
4.  <span data-ttu-id="69947-217">Переименование hello среды, выбрав имя существующего hello и введя *стека Azure*.</span><span class="sxs-lookup"><span data-stu-id="69947-217">Rename hello environment by selecting hello existing name and typing *Azure Stack*.</span></span>
5.  <span data-ttu-id="69947-218">Теперь, выбор hello среды стека Azure, а затем выберите **добавьте задачи**.</span><span class="sxs-lookup"><span data-stu-id="69947-218">Now, selection hello Azure Stack environment, then select **Add tasks**.</span></span>
6.  <span data-ttu-id="69947-219">Выберите hello **отправить FTP** задач и выберите **добавить**, а затем выберите **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="69947-219">Select hello **FTP Upload** task and select **Add**, then select **Close**.</span></span>


### <a name="configure-ftp-task"></a><span data-ttu-id="69947-220">Настройка задачи «FTP»</span><span class="sxs-lookup"><span data-stu-id="69947-220">Configure FTP task</span></span>
<span data-ttu-id="69947-221">После создания выпуска следует настроить hello шаги, необходимые для публикации toohello веб-приложения Azure стек.</span><span class="sxs-lookup"><span data-stu-id="69947-221">Now that you've created a release, you'll configure hello steps required for publishing toohello Web App on Azure Stack.</span></span>  <span data-ttu-id="69947-222">Так же, как с помощью задачи передачи FTP hello вы настроили для Azure, настройке задачи «hello» для стека Azure:</span><span class="sxs-lookup"><span data-stu-id="69947-222">Just like you configured hello FTP Upload task for Azure, you configure hello task for Azure Stack:</span></span>

1.  <span data-ttu-id="69947-223">Выберите hello **отправить FTP** задачу необходимо просто добавить и настроить hello следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="69947-223">Select hello **FTP Upload** task you just added, and configure hello following parameters:</span></span>
    
    | <span data-ttu-id="69947-224">Параметр</span><span class="sxs-lookup"><span data-stu-id="69947-224">Parameter</span></span> | <span data-ttu-id="69947-225">Значение</span><span class="sxs-lookup"><span data-stu-id="69947-225">Value</span></span> |
    | -----     | ----- |
    |<span data-ttu-id="69947-226">Метод проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="69947-226">Authentication Method</span></span>| <span data-ttu-id="69947-227">Введите учетные данные</span><span class="sxs-lookup"><span data-stu-id="69947-227">Enter Credentials</span></span>|
    |<span data-ttu-id="69947-228">URL-адрес сервера</span><span class="sxs-lookup"><span data-stu-id="69947-228">Server URL</span></span> | <span data-ttu-id="69947-229">Получить URL-адрес FTP приложения с портала Azure стека</span><span class="sxs-lookup"><span data-stu-id="69947-229">Web App FTP URL retrieved from Azure Stack portal</span></span> |
    |<span data-ttu-id="69947-230">Имя пользователя</span><span class="sxs-lookup"><span data-stu-id="69947-230">Username</span></span> | <span data-ttu-id="69947-231">Имя пользователя, которые были настроены при создании учетных данных FTP для веб-приложения</span><span class="sxs-lookup"><span data-stu-id="69947-231">Username you configured when creating FTP Credentials for Web App</span></span> |
    |<span data-ttu-id="69947-232">Пароль</span><span class="sxs-lookup"><span data-stu-id="69947-232">Password</span></span> | <span data-ttu-id="69947-233">Пароль, созданный при установке учетные данные FTP для веб-приложения</span><span class="sxs-lookup"><span data-stu-id="69947-233">Password you created when establishing FTP credentials for Web App</span></span>|
    |<span data-ttu-id="69947-234">Исходный каталог</span><span class="sxs-lookup"><span data-stu-id="69947-234">Source Directory</span></span> | <span data-ttu-id="69947-235">$(System.DefaultWorkingDirectory)\**\\</span><span class="sxs-lookup"><span data-stu-id="69947-235">$(System.DefaultWorkingDirectory)\**\\</span></span> |
    |<span data-ttu-id="69947-236">Удаленный каталог</span><span class="sxs-lookup"><span data-stu-id="69947-236">Remote Directory</span></span> | <span data-ttu-id="69947-237">/Site/wwwroot /</span><span class="sxs-lookup"><span data-stu-id="69947-237">/site/wwwroot/</span></span>|
    |<span data-ttu-id="69947-238">Сохранить пути к файлам</span><span class="sxs-lookup"><span data-stu-id="69947-238">Preserve file paths</span></span> | <span data-ttu-id="69947-239">Включен (флажок установлен)</span><span class="sxs-lookup"><span data-stu-id="69947-239">Enabled (checked)</span></span>|

2.  <span data-ttu-id="69947-240">Нажмите кнопку **Сохранить**</span><span class="sxs-lookup"><span data-stu-id="69947-240">Click **Save**</span></span>

<span data-ttu-id="69947-241">И наконец настройте агент hello выпуска определения toouse hello пул, содержащий hello агент развертывается с помощью hello следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="69947-241">Finally, configure hello release definition toouse hello agent pool containing hello agent deployed using hello following steps:</span></span>
1.  <span data-ttu-id="69947-242">Выберите определение выпуска hello и нажмите кнопку **изменение**</span><span class="sxs-lookup"><span data-stu-id="69947-242">Select hello release definition and click **Edit**</span></span>
2.  <span data-ttu-id="69947-243">Выберите **выполняются на агенте** в среднем столбце hello.</span><span class="sxs-lookup"><span data-stu-id="69947-243">Select **Run on agent** from hello middle column.</span></span> <span data-ttu-id="69947-244">В правом столбце hello выберите hello очереди агента, содержащий hello агент построения, выполняющий стек Azure.</span><span class="sxs-lookup"><span data-stu-id="69947-244">In hello right column, select hello agent queue containing hello build agent running on Azure Stack.</span></span>  
    <span data-ttu-id="69947-245">![Отображение изображения конфигурации выпуска определения toouse определенной очереди](./media/azure-stack-solution-pipeline/image3.png)</span><span class="sxs-lookup"><span data-stu-id="69947-245">![image showing configuration of release definition toouse specific queue](./media/azure-stack-solution-pipeline/image3.png)</span></span>

## <a name="deploy-new-code"></a><span data-ttu-id="69947-246">Развертывание нового кода</span><span class="sxs-lookup"><span data-stu-id="69947-246">Deploy new code</span></span>
<span data-ttu-id="69947-247">Теперь можно проверить конвейер CI/CD гибридный hello с tooAzure публикации последнего шага hello стека.</span><span class="sxs-lookup"><span data-stu-id="69947-247">You can now test hello hybrid CI/CD pipeline, with hello final step publishing tooAzure Stack.</span></span>  <span data-ttu-id="69947-248">В этом разделе изменения нижней части страницы сайта hello и начать развертывание через конвейер hello.</span><span class="sxs-lookup"><span data-stu-id="69947-248">In this section, you modify hello site's footer and start deployment through hello pipeline.</span></span>  <span data-ttu-id="69947-249">После завершения вы увидите изменения развернуты tooAzure для просмотра, а затем после подтверждения hello выпуска, они являются опубликованные tooAzure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-249">Once complete, you will see your changes deployed tooAzure for review, then once you approve hello release, they are published tooAzure Stack.</span></span>

1. <span data-ttu-id="69947-250">В Visual Studio откройте hello *site.master* файл и измените следующую строку:</span><span class="sxs-lookup"><span data-stu-id="69947-250">In Visual Studio, open hello *site.master* file and change this line:</span></span>
    
    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application</p>
    `

    <span data-ttu-id="69947-251">toothis:</span><span class="sxs-lookup"><span data-stu-id="69947-251">toothis:</span></span>

    `
        <p>&copy; <%: DateTime.Now.Year %> - My ASP.NET Application delivered by VSTS, Azure, and Azure Stack</p>
    `
3.  <span data-ttu-id="69947-252">Зафиксируйте изменения hello и синхронизировать tooVSTS.</span><span class="sxs-lookup"><span data-stu-id="69947-252">Commit hello changes and sync tooVSTS.</span></span>  
4.  <span data-ttu-id="69947-253">Из рабочей области VSTS hello, проверьте состояние сборки hello, выбрав **построения и выпуска** > **построения**</span><span class="sxs-lookup"><span data-stu-id="69947-253">From hello VSTS workspace, check hello build status by selecting **Build & Release** > **Build**</span></span>
5.  <span data-ttu-id="69947-254">Вы увидите построение выполняется.</span><span class="sxs-lookup"><span data-stu-id="69947-254">You will see a build in progress.</span></span>  <span data-ttu-id="69947-255">Дважды щелкните состояние hello и можно отслеживать ход выполнения сборок hello.</span><span class="sxs-lookup"><span data-stu-id="69947-255">Double-click hello status, and you can watch hello build progress.</span></span>  <span data-ttu-id="69947-256">Как только вы увидите «По завершении сборки» в консоли hello, перемещение на выпуск hello toocheck из **построения и выпуска** > **выпуска**.</span><span class="sxs-lookup"><span data-stu-id="69947-256">Once you see "Finished build" in hello console, move on toocheck hello release from **Build & Release** > **Release**.</span></span>  <span data-ttu-id="69947-257">Дважды щелкните hello выпуска.</span><span class="sxs-lookup"><span data-stu-id="69947-257">Double-click hello release.</span></span>
6.  <span data-ttu-id="69947-258">Вы получите уведомление, что выпуск необходим анализ.</span><span class="sxs-lookup"><span data-stu-id="69947-258">You will receive notification that a release requires review.</span></span> <span data-ttu-id="69947-259">Проверьте URL-адрес приложения hello и убедитесь, что новые изменения hello.</span><span class="sxs-lookup"><span data-stu-id="69947-259">Check hello Web App URL and verify hello new changes are present.</span></span>  <span data-ttu-id="69947-260">Утверждение выпуска hello в VSTS.</span><span class="sxs-lookup"><span data-stu-id="69947-260">Approve hello release in VSTS.</span></span>
    <span data-ttu-id="69947-261">![Отображение изображения конфигурации выпуска определения toouse определенной очереди](./media/azure-stack-solution-pipeline/image4.png)</span><span class="sxs-lookup"><span data-stu-id="69947-261">![image showing configuration of release definition toouse specific queue](./media/azure-stack-solution-pipeline/image4.png)</span></span>
    
7.  <span data-ttu-id="69947-262">Проверка публикации tooAzure стека является полный обход hello веб-сайт, используя URL-адрес hello, указанных при создании веб-приложения hello.</span><span class="sxs-lookup"><span data-stu-id="69947-262">Verify publishing tooAzure Stack is complete by visiting hello website using hello URL noted when creating hello Web App.</span></span>
    <span data-ttu-id="69947-263">![изображение ASP. NEt приложения с нижним колонтитулом изменен](./media/azure-stack-solution-pipeline/image5.png)</span><span class="sxs-lookup"><span data-stu-id="69947-263">![image showing ASP.NEt app with footer changed](./media/azure-stack-solution-pipeline/image5.png)</span></span>


<span data-ttu-id="69947-264">Теперь можно использовать новый конвейер CI/CD гибридного как стандартный блок для других шаблонов гибридного облака.</span><span class="sxs-lookup"><span data-stu-id="69947-264">You can now use your new hybrid CI/CD pipeline as a building block for other hybrid cloud patterns.</span></span>

## <a name="next-steps"></a><span data-ttu-id="69947-265">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="69947-265">Next steps</span></span>
<span data-ttu-id="69947-266">В этом учебнике вы узнали, как toobuild гибридных CI/CD конвейера:</span><span class="sxs-lookup"><span data-stu-id="69947-266">In this tutorial, you learned how toobuild a hybrid CI/CD pipeline that:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="69947-267">Инициирует новый сборки, исходя из репозитория Visual Studio Team Services (VSTS) tooyour фиксации кода.</span><span class="sxs-lookup"><span data-stu-id="69947-267">Initiates a new build based on code commits tooyour Visual Studio Team Services (VSTS) repository.</span></span>
> * <span data-ttu-id="69947-268">Автоматически развертывает tooAzure ваш код, созданный для пользовательского приемочного тестирования.</span><span class="sxs-lookup"><span data-stu-id="69947-268">Automatically deploys your newly built code tooAzure for user acceptance testing.</span></span>
> * <span data-ttu-id="69947-269">После прохождения проверки кода автоматически развертывает tooAzure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-269">Once your code has passed testing, automatically deploys tooAzure Stack.</span></span> 

<span data-ttu-id="69947-270">Теперь, когда конвейер CI/CD гибридного продолжить путем изучения как toodevelop приложений для Azure стека.</span><span class="sxs-lookup"><span data-stu-id="69947-270">Now that you have a hybrid CI/CD pipeline, continue by learning how toodevelop apps for Azure Stack.</span></span>

> [!div class="nextstepaction"]
> [<span data-ttu-id="69947-271">Разработка для Azure Stack</span><span class="sxs-lookup"><span data-stu-id="69947-271">Develop for Azure Stack</span></span>](azure-stack-developer.md)


