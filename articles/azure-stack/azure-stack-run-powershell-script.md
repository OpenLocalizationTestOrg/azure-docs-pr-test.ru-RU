---
title: "Развертывание комплекта разработки Azure Stack | Документация Майкрософт"
description: "Сведения о подготовке комплекта разработки Azure Stack и выполнении сценария PowerShell для его развертывания."
services: azure-stack
documentationcenter: 
author: jeffgilb
manager: femila
editor: 
ms.assetid: 0ad02941-ed14-4888-8695-b82ad6e43c66
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/15/2017
ms.author: jeffgilb
ms.reviewer: wfayed
ms.openlocfilehash: 470a45aea253e1e238983527427b600117e413fe
ms.sourcegitcommit: 821b6306aab244d2feacbd722f60d99881e9d2a4
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/16/2017
---
# <a name="deploy-the-azure-stack-development-kit"></a>Развертывание комплекта разработки Azure Stack

*Область применения: комплект разработки Azure Stack*

Чтобы развернуть [комплект разработки Azure Stack](azure-stack-poc.md), сделайте следующее:

1. [Скачайте пакет развертывания](https://azure.microsoft.com/overview/azure-stack/try/?v=try), чтобы получить файл Cloudbuilder.vhdx.
2. Подготовьте файл Cloudbuilder.vhdx, чтобы настроить компьютер (узел комплекта разработки), на котором следует установить комплект разработки. После этого узел комплекта разработки загрузится в файл Cloudbuilder.vhdx.
3. Разверните пакет средств разработки на соответствующем узле.

> [!NOTE]
> Чтобы получить оптимальные результаты, мы советуем выполнять развертывание с подключением к Интернету, даже если вы хотите использовать среду Azure Stack без доступа к Интернету. Это позволит активировать ознакомительную версию Windows Server 2016, входящую в комплект установки набора разработчика, во время развертывания.

## <a name="download-and-extract-the-development-kit"></a>Скачивание и извлечение комплекта разработки
1. Перед скачиванием убедитесь, что компьютер соответствует следующим предварительным требованиям:

  - Наряду с диском операционной системы компьютер должен иметь не менее 60 ГБ свободного места на четырех отдельных идентичных логических жестких дисках.
  - На компьютере должна быть установлена платформа [.NET Framework 4.6 (или более поздняя версия)](https://aka.ms/r6mkiy).

2. [Перейдите на страницу "Начало работы"](https://azure.microsoft.com/overview/azure-stack/try/?v=try), где можно скачать пакет средств разработки Azure Stack, укажите сведения и нажмите кнопку **Отправить**.
3. Скачайте и запустите скрипт проверки готовности к установке [средства проверки развертывания для пакета средств разработки Azure Stack](https://go.microsoft.com/fwlink/?LinkId=828735&clcid=0x409). Этот автономный скрипт проходит предварительные проверки во время установки для пакета средств разработки Azure Stack. Он дает вам возможность подтвердить, что ваше аппаратное и программное обеспечение соответствуют требованиям, перед скачиванием пакета большего размера для пакета разработки Azure Stack
4. В разделе **Download the software** (Загрузить ПО) щелкните **Azure Stack Development Kit** (Комплект разработки Azure Stack).

  > [!NOTE]
  > Скачиваемый пакет ASDK (AzureStackDevelopmentKit.exe) имеет размер примерно 10 ГБ. Если вы также захотите скачать ISO-файл с ознакомительной версией Windows Server 2016, размер скачиваемых файлов увеличится примерно до 17 ГБ. ISO-файл можно использовать для создания и добавления образа виртуальной машины Windows Server 2016 в Microsoft Azure Stack после завершения установки ASDK. Обратите внимание, что этот образ пробной версии Windows Server 2016 может использоваться только с ASDK и регулируется условиями лицензии ASDK.

5. После скачивания нажмите кнопку **Выполнить** для запуска самоизвлечения ASDK (AzureStackDevelopmentKit.exe).
6. Просмотрите и подтвердите отображаемое лицензионное соглашение на странице **лицензионного соглашения** мастера самоизвлечения, а затем нажмите кнопку **Далее**.
7. Просмотрите сведения заявления о конфиденциальности, указанные на странице **Важное** мастера самоизвлечения, а затем нажмите кнопку **Далее**.
8. Выберите местоположение файлов установки Azure Stack, которые нужно извлечь, на странице **Выбор целевого расположения** мастера самоизвлечения, а затем нажмите кнопку**Далее**. Расположение по умолчанию — *текущая папка*\Azure Stack Development Kit. 
9. Просмотрите краткую сводку местоположения на странице **Готово к извлечению** мастера самоизвлечения, а затем нажмите кнопку **Извлечь**, чтобы извлечь файл CloudBuilder.vhdx (примерно 25 ГБ) и ThirdPartyLicenses.rtf. Этот процесс может занять некоторое время.
10. Скопируйте или переместите файл CloudBuilder.vhdx в корень диска C:\ (C:\CloudBuilder.vhdx) на главном компьютере ASDK.

> [!NOTE]
> После извлечения файлов вы можете удалить EXE- и BIN-файлы, чтобы освободить пространство на диске. Эти файлы также можно переместить в другое расположение, чтобы не скачивать их снова, если потребуется выполнить повторное развертывание ASDK.

## <a name="deploy-the-asdk-using-a-guided-experience"></a>Интерактивное развертывание ASDK
ASDK можно развернуть с использованием графического интерфейса пользователя (GUI), скачав и запустив скрипт PowerShell asdk-installer.ps1.

> [!NOTE]
> Пользовательский интерфейс установщика для пакета разработки Azure Stack — это скрипт с открытым кодом на основе WCF и PowerShell.

### <a name="prepare-the-development-kit-host-using-a-guided-user-experience"></a>Интерактивная подготовка узла пакета средств разработки
Перед установкой ASDK на главном компьютере необходимо подготовить среду ASDK.
1. Войдите в систему с учетной записью локального администратора на главном компьютере ASDK.
2. Переместите файл CloudBuilder.vhdx в корень диска C:\ (C:\CloudBuilder.vhdx).
3. Запустите следующий скрипт, чтобы скачать файл установщика пакета разработчика (asdk-installer.ps1) из репозитория инструментов [Azure Stack на GitHub](https://github.com/Azure/AzureStack-Tools) в папку **C:\AzureStack_Installer** на главном компьютере разработки:

  ```powershell
  # Variables
  $Uri = 'https://raw.githubusercontent.com/Azure/AzureStack-Tools/master/Deployment/asdk-installer.ps1'
  $LocalPath = 'C:\AzureStack_Installer'
  # Create folder
  New-Item $LocalPath -Type directory
  # Download file
  Invoke-WebRequest $uri -OutFile ($LocalPath + '\' + 'asdk-installer.ps1')
  ```

4. Откройте консоль PowerShell с повышенными привилегиями, выполните скрипт **C:\AzureStack_Installer\asdk-installer.ps1** и щелкните **Prepare Environment** (Подготовка среды).
5. На странице **Select Cloudbuilder vhdx** (Выбор файла Cloudbuilder.vhdx) установщика найдите и выберите файл **Cloudbuilder.vhdx**, скачанный и извлеченный на предыдущих шагах. На этой странице вы также можете установить флажок **Добавление драйверов**, если вам нужно добавить дополнительные драйверы на главный компьютер разработки.  
6. На странице **Дополнительные параметры** укажите учетную запись локального администратора главного компьютера комплекта разработки. 

  > [!IMPORTANT]
  > Если вы не предоставите эти учетные данные, вам понадобится прямой или KVM-доступ к узлу после перезагрузки компьютера в рамках настройки пакета разработки.

7. Вы можете предоставить эти необязательные параметры на странице **Необязательные параметры**:
    - **Computername** (Имя компьютера). Задает имя узла комплекта разработки. Имя должно соответствовать требованиям к полному доменному имени, а его размер не должен превышать 15 символов. Значение по умолчанию — случайное имя компьютера, созданное Windows.
    - **Часовой пояс.** Задает часовой пояс узла комплекта разработки. Значение по умолчанию — "(UTC-08:00) Тихоокеанское время (США и Канада)".
    - **Static IP configuration** (Конфигурация статических IP-адресов). Задает использование статического IP-адреса в развертывании. В противном случае при перезагрузке установщика в файл Cloudbuilder.vhdx сетевые интерфейсы настраиваются с помощью протокола DHCP.
11. Щелкните **Далее**.
12. Если вы на предыдущем шаге выбрали конфигурацию статических IP-адресов, далее сделайте следующее:
    - Выберите сетевой адаптер. Проверьте, можете ли вы подключиться к адаптеру, а затем нажмите кнопку **Далее**.
    - Проверьте значения параметров **IP-адрес**, **Шлюз** и **DNS**, а затем нажмите кнопку **Далее**.
13. Нажмите кнопку **Далее**, чтобы запустить процесс подготовки.
14. Когда состояние подготовки изменится на **Завершено**, нажмите кнопку **Далее**.
15. Нажмите кнопку **Перезагрузить**, чтобы выполнить загрузку в файл Cloudbuilder.vhdx и продолжить процесс развертывания.


### <a name="deploy-the-development-kit-using-a-guided-experience"></a>Интерактивное развертывание пакета средств разработки
После подготовки главного компьютера ASDK пакет ASDK можно развернуть в образ CloudBuilder.vhdx, выполнив следующие действия. 
1. После успешной загрузки главного компьютера в образ CloudBuilder.vhdx войдите с учетными данными администратора, указанными в предыдущих шагах. 
2. Откройте консоль PowerShell с повышенными привилегиями, выполните **\AzureStack_Installer\asdk-installer.ps1** (он может храниться на другом диске в файле Cloudbuilder.vhdx). Щелкните **Install**(Установить).
3. В поле **Тип** выберите **Azure Cloud** или **ADFS**.
    - **Azure Cloud.** Настраивает Azure Active Directory в качестве поставщика удостоверений. Чтобы использовать этот параметр, необходимо подключение к Интернету, полное имя клиента каталога Azure AD в формате *имя_домена*.onmicrosoft.com или имя проверенного личного домена Azure AD и учетные данные глобального администратора для указанного каталога. 
    - **ADFS.** Служба каталогов с меткой по умолчанию выступает в качестве поставщика удостоверений. Используется учетная запись для входа по умолчанию azurestackadmin@azurestack.local и пароль, указанный при настройке.
4. В разделе **Пароль локального администратора** в поле **Пароль** введите пароль локального администратора (который должен соответствовать текущему паролю локального администратора) и нажмите кнопку **Далее**.
5. Выберите сетевой адаптер, который будет использоваться с комплектом разработки, и нажмите кнопку **Далее**.
6. Выберите конфигурацию сети виртуальной машины BGPNAT01: DHCP или статическую.
    - **DHCP** (по умолчанию). Виртуальная машина получает конфигурацию IP-сети с сервера DHCP.
    - **Статическая.** Используйте этот параметр только в том случае, если DHCP не удается назначить допустимый IP-адрес Azure Stack для доступа к Интернету. Статический IP-адрес не должен превышать длину маски подсети в формате CIDR (например, 10.0.0.5/24).
7. При необходимости задайте следующие значения:
    - **ИД виртуальной ЛС.** Задает идентификатор виртуальной локальной сети. Используйте этот параметр только в том случае, если на узле и AzS-BGPNAT01 необходимо настроить идентификатор виртуальной сети для доступа к физической сети (и Интернету). 
    - **DNS forwarder** (DNS-перенаправитель). DNS-сервер, созданный в ходе развертывания Azure Stack. Чтобы разрешить компьютерам в решении разрешать имена, расположенные за пределами метки, укажите имеющийся DNS-сервер инфраструктуры. DNS-сервер, расположенный в этой метке, перенаправляет неизвестные запросы на сопоставление имен на этот DNS-сервер.
    - **Сервер времени.** Это обязательное поле задает сервер времени,который будет использоваться пакетом разработки. Этот параметр может быть предоставлен в качестве допустимого IP-адреса сервера времени. Имена серверов не поддерживаются.
  
  > [!TIP]
  > Чтобы найти IP-адрес сервера времени, перейдите на сайт [pool.ntp.org](http:\\pool.ntp.org) или выполните проверку связи с сервером time.windows.com. 
  
8. Щелкните **Далее**. 
9. На странице **Verifying network interface card properties** (Проверка свойств сетевого адаптера) появится индикатор хода выполнения. 
    - Если там указано, что **обновление загрузить невозможно**, следуйте инструкциям на этой странице.
    - Когда состояние изменится на **Завершено**, нажмите кнопку **Далее**.
10. На странице **Сводка** нажмите кнопку **Развернуть**. Здесь также можно скопировать команды установки PowerShell, которые будут использоваться для установки пакета средств разработки.
11. Если вы используете развертывание Azure Active Directory, вскоре после начала настройки отобразится запрос на ввод учетных данных учетной записи глобального администратора Azure Active Directory.
12. Процесс развертывания может занять несколько часов, в течение которых система автоматически перезагрузится один раз. После завершения развертывания в окне консоли PowerShell отобразится следующее сообщение:**COMPLETE: Action ‘Deployment’** (Завершено: действие "Развертывание"). Если развертывание завершается неудачей, вы можете выполнить [повторное развертывание](azure-stack-redeploy.md) с нуля или использовать следующие команды PowerShell в том же окне PowerShell с повышенными привилегиями, чтобы перезапустить развертывание с последнего успешного шага:

  ```powershell
  cd C:\CloudDeployment\Setup
  .\InstallAzureStackPOC.ps1 -Rerun
  ```

   > [!IMPORTANT]
   > Чтобы отследить ход выполнения развертывания, войдите в систему как azurestack\AzureStackAdmin после перезагрузки главного компьютера разработки во время настройки. Если вы вошли в систему от имени локального администратора, после присоединения компьютера к домену ход выполнения развертывания отображаться не будет. В этом случае повторное развертывание выполнять не нужно. Чтобы проверить выполнение процесса, просто войдите в систему как azurestack\AzureStackAdmin.
   

## <a name="deploy-the-asdk-using-powershell"></a>Развертывание шаблона с помощью PowerShell
В предыдущих шагах подробно описывалось интерактивное развертывание ASDK. Кроме того, можно использовать PowerShell для развертывания ASDK на узле пакета средств разработки следуя шагам, описанным в этом разделе.

### <a name="configure-the-asdk-host-computer-to-boot-from-cloudbuildervhdx"></a>Настройка главного компьютера ASDK для загрузки с помощью CloudBuilder.vhdx
Эти команды настроят главный компьютер ASDK для загрузки со скачанного и извлеченного виртуального жесткого Azure Stack (CloudBuilder.vhdx). После выполнения этих действий перезапустите главный компьютер ASDK.

1. Запустите командную строку от имени администратора.
2. Запустите `bcdedit /copy {current} /d "Azure Stack"`
3. Скопируйте (CTRL+C) возвращенное значение CLSID, включая требуемые символы {}. Это значение называется {CLSID} и его нужно вставить (с помощью клавиш CTRL+V или щелчком правой кнопкой мыши) на оставшихся шагах.
4. Запустите `bcdedit /set {CLSID} device vhd=[C:]\CloudBuilder.vhdx` 
5. Запустите `bcdedit /set {CLSID} osdevice vhd=[C:]\CloudBuilder.vhdx` 
6. Запустите `bcdedit /set {CLSID} detecthal on` 
7. Запустите `bcdedit /default {CLSID}`
8. Чтобы проверить параметры загрузки, запустите `bcdedit`. 
9. Переместите файл CloudBuilder.vhdx в корень диска C:\ (C:\CloudBuilder.vhdx) и перезапустите главный компьютер пакета разработки. При перезапуске узла ASK он должен по умолчанию загружаться с виртуальной машины Cloud Builder.vhd. 

### <a name="prepare-the-development-kit-host-using-powershell"></a>Подготовка узла комплекта разработки с помощью PowerShell 
После того, как главный компьютер разработки успешно загрузится с помощью CloudBuilder.vhdx, вы можете открыть консоль PowerShell с повышенными привилегиями и запустить команды из этого раздела для развертывания ASDK на узле пакета разработки.

> [!IMPORTANT] 
> Установка ASDK поддерживает только один сетевой адаптер (NIC) для работы в сети. При наличии нескольких сетевых интерфейсов перед выполнением сценария развертывания включите только один из них, а все остальные отключите.

Вы можете развернуть Azure Stack с помощью Azure AD или AD FS в качестве поставщика удостоверений. Azure Stack, поставщики ресурсов и другие приложения одинаково работают с обеими службами. Дополнительные сведения о поддерживаемых возможностях в Azure Stack с AD FS см. в статье [Основные возможности и концепции Azure Stack](.\azure-stack-key-features.md).

> [!TIP]
> Если вы не указали никаких параметров настройки (см. раздел "Необязательные параметры" и примеры InstallAzureStackPOC.ps1 ниже), отобразится запрос на ввод обязательных параметров.

### <a name="deploy-azure-stack-using-azure-ad"></a>Развертывание Azure Stack с помощью Azure AD 
Чтобы развернуть Azure Stack **с использованием Azure AD в качестве поставщика удостоверений** , компьютер должен быть подключен к Интернету напрямую или через прозрачный прокси-сервер. Выполните следующие команды PowerShell для развертывания пакета средств разработки с помощью Azure AD:

  ```powershell
  cd C:\CloudDeployment\Setup     
  $adminpass = Get-Credential Administrator     
  .\InstallAzureStackPOC.ps1 -AdminPassword $adminpass.Password
  ```

  Через несколько минут после установки ASDK вам потребуется ввести учетные данные Azure AD. Укажите учетные данные глобального администратора Azure AD для клиента Azure AD. 

### <a name="deploy-azure-stack-using-ad-fs"></a>Развертывание Azure Stack с помощью AD FS 
Чтобы развернуть пакет разработки **с использованием AD FS в качестве поставщика удостоверений**, выполните следующие команды PowerShell (вам просто нужно добавить параметр -UseADFS): 

  ```powershell
  cd C:\CloudDeployment\Setup     
  $adminpass = Get-Credential Administrator 
  .\InstallAzureStackPOC.ps1 -AdminPassword $adminpass.Password -UseADFS
  ```

При развертывании служб федерации Active Directory служба каталогов по умолчанию используется в качестве поставщика удостоверений. Учетная запись по умолчанию для входа — azurestackadmin@azurestack.local, а в качестве пароля будет использоваться пароль, указанный как часть команд настройки PowerShell.

Процесс развертывания может занять несколько часов, в течение которых система автоматически перезагрузится один раз. После завершения развертывания в окне консоли PowerShell отобразится следующее сообщение:**COMPLETE: Action ‘Deployment’** (Завершено: действие "Развертывание"). Если развертывание завершилось сбоем, выполните сценарий снова, используя параметр -rerun. Вы также можете [повторно развернуть ASDK](.\azure-stack-redeploy.md) с нуля.
> [!IMPORTANT]
> Если вы хотите отслеживать ход развертывания после перезагрузки компьютера ASDK, войдите в систему как AzureStack\AzureStackAdmin. Если вы входите в систему как локальный администратор после перезапуска главного компьютера (и присоединения к домену azurestack.local), вы не увидите ход выполнения развертывания. В этом случае повторное развертывание выполнять не нужно. Чтобы проверить выполнение процесса, просто войдите в систему как azurestack.
>

#### <a name="azure-ad-deployment-script-examples"></a>Примеры сценария развертывания AAD
Полное развертывание AAD можно прописать в сценарии. Вот несколько примеров с комментариями, которые содержат некоторые необязательные параметры.

Если удостоверение AAD связано только с **одним** каталогом AAD:
```powershell
cd C:\CloudDeployment\Setup 
$adminpass = Get-Credential Administrator 
$aadcred = Get-Credential "<Azure AD global administrator account name>" 
.\InstallAzureStackPOC.ps1 -AdminPassword $adminpass.Password -InfraAzureDirectoryTenantAdminCredential $aadcred -TimeServer 52.168.138.145 #Example time server IP address.
```

Если удостоверение AAD связано только с **несколькими** каталогами AAD:
```powershell
cd C:\CloudDeployment\Setup 
$adminpass = Get-Credential Administrator 
$aadcred = Get-Credential "<Azure AD global administrator account name>" #Example: user@AADDirName.onmicrosoft.com 
.\InstallAzureStackPOC.ps1 -AdminPassword $adminpass.Password -InfraAzureDirectoryTenantAdminCredential $aadcred -InfraAzureDirectoryTenantName "<Azure AD directory in the form of domainname.onmicrosoft.com or an Azure AD verified custom domain name>" -TimeServer 52.168.138.145 #Example time server IP address.
```

Если в вашей среде **отключен** протокол DHCP, в один из предоставленных примеров использования необходимо включить приведенные ниже дополнительные параметры. 

```powershell
.\InstallAzureStackPOC.ps1 -AdminPassword $adminpass.Password -InfraAzureDirectoryTenantAdminCredential $aadcred -NatIPv4Subnet 10.10.10.0/24 -NatIPv4Address 10.10.10.3 -NatIPv4DefaultGateway 10.10.10.1 -TimeServer 10.222.112.26
```

### <a name="asdk-installazurestackpocps1-optional-parameters"></a>Необязательные параметры ASDK InstallAzureStackPOC.ps1
|Параметр|Обязательный/необязательный|Описание|
|-----|-----|-----|
|AdminPassword|Обязательно|Задает учетную запись локального администратора и другие учетные записи пользователей на всех виртуальных машинах, созданных в процессе развертывания пакета разработки. Этот пароль должен совпадать с текущим паролем локального администратора на узле.|
|InfraAzureDirectoryTenantName|Обязательно|Задает каталог клиента. Используйте этот параметр, чтобы указать конкретный каталог, где у учетной записи AAD есть разрешения на управление несколькими каталогами. Полное имя клиента каталога AAD имеет формат .onmicrosoft.com или имя проверенного личного домена Azure AD.|
|TimeServer|Обязательно|Используйте этот параметр, чтобы указать определенный сервер времени. Этот параметр может быть предоставлен в качестве допустимого IP-адреса сервера времени. Имена серверов не поддерживаются.|
|InfraAzureDirectoryTenantAdminCredential|Необязательно|Задает имя пользователя и пароль Azure Active Directory. В качестве этих учетных данных Azure следует использовать идентификатор организации.|
|InfraAzureEnvironment|Необязательно|Выберите среду Azure, в которой вы хотите зарегистрировать это развертывание Azure Stack. Допустимые значения: Общедоступная служба Azure, Azure — Китай, Azure — US Government.|
|DNSForwarder|Необязательно|DNS-сервер, созданный в ходе развертывания Azure Stack. Чтобы разрешить компьютерам в решении разрешать имена, расположенные за пределами метки, укажите имеющийся DNS-сервер инфраструктуры. DNS-сервер, расположенный в этой метке, перенаправляет неизвестные запросы на сопоставление имен на этот DNS-сервер.|
|NatIPv4Address|Требуется для поддержки преобразования сетевых адресов (NAT) DHCP|Задает статический IP-адрес для MAS-BGPNAT01. Используйте этот параметр только в том случае, если DHCP не удается назначить допустимый IP-адрес для доступа в Интернет.|
|NatIPv4Subnet|Требуется для поддержки преобразования сетевых адресов (NAT) DHCP|Префикс IP-подсети, используемый для обеспечения поддержки DHCP через преобразование сетевых адресов. Используйте этот параметр только в том случае, если DHCP не удается назначить допустимый IP-адрес для доступа в Интернет.|
|PublicVlanId|Необязательно|Задает идентификатор виртуальной локальной сети. Используйте этот параметр, только если на узле и MAS-BGPNAT01 необходимо настроить идентификатор виртуальной сети для доступа к физической сети (и Интернету). Например, .\InstallAzureStackPOC.ps1 -Verbose -PublicVLan 305|
|Rerun|Необязательно|Этот флажок используется для повторного выполнения развертывания. Используются все предыдущие входные данные. Повторный ввод ранее предоставленных данных не поддерживается, так как для развертывания создаются и используются несколько уникальных значений.|

## <a name="activate-the-administrator-and-tenant-portals"></a>Активация порталов администрирования и клиента
После развертывания с использованием Azure Active Directory необходимо активировать порталы администрирования и клиента Azure Stack. Эта активация заключается в предоставлении порталу Azure Stack и Azure Resource Manager требуемых разрешений (перечисленные на странице принятия условий) для всех пользователей каталога.

- На портале администрирования перейдите по адресу https://adminportal.local.azurestack.external/guest/signup, ознакомьтесь со сведениями, а затем щелкните **Принять**. После этого вы можете добавить администраторов служб, не являющихся также администраторами каталога клиента.

- На портале клиента перейдите по адресу https://portal.local.azurestack.external/guest/signup, ознакомьтесь со сведениями, а затем щелкните **Принять**. После этого пользователи в каталоге смогут войти на портал клиента. 

> [!NOTE] 
> Если порталы не активированы, доступ к ним будут иметь только администраторы. При входе на портал другого пользователя отобразится сообщение, указывающее, что администратор не предоставил необходимые разрешения другим пользователям. Если администратор не принадлежит к каталогу, в котором зарегистрирована инфраструктура Azure Stack, к каталогу Azure Stack необходимо добавить URL-адрес активации. Например, если инфраструктура Azure Stack зарегистрирована в каталоге fabrikam.onmicrosoft.com, а администратор — в admin@contoso.com, для активации портала перейдите по адресу https://portal.local.azurestack.external/guest/signup/fabrikam.onmicrosoft.com. 

## <a name="reset-the-password-expiration-policy"></a>Политика сброса срока действия пароля 
Чтобы убедиться, что срок действия пароля узла комплекта разработки не завершится до окончания периода ознакомления, выполните следующие действия после развертывания ASDK.

### <a name="to-change-the-password-expiration-policy-from-powershell"></a>Для изменения политики срока действия паролей из PowerShell сделайте следующее:
В консоли Powershell с повышенными привилегиями выполните команду:

```powershell
Set-ADDefaultDomainPasswordPolicy -MaxPasswordAge 180.00:00:00 -Identity azurestack.local
```

### <a name="to-change-the-password-expiration-policy-manually"></a>Для изменения политики срока действия паролей вручную сделайте следующее:
1. На узле комплекта разработки откройте редактор **Управление групповыми политиками** и последовательно выберите **Управление групповой политикой**, **Лес: azurestack.local**, **Домены**, **azurestack.local**.
2. Щелкните правой кнопкой мыши **политику домена по умолчанию** и выберите **Изменить**.
3. В редакторе "Управление групповыми политиками" последовательно выберите **Конфигурация компьютера**, **Политики**, **Параметры Windows**, **Параметры безопасности**, **Политики учетных записей**, **Политика паролей**.
4. В области справа дважды щелкните параметр **Максимальный срок действия пароля**.
5. В диалоговом окне **Maximum password age Properties** (Свойства максимального срока действия пароля) измените значение параметра **Срок истечения действия пароля** на 180 и нажмите кнопку **ОК**.


## <a name="next-steps"></a>Дальнейшие действия

[Подключение к Azure Stack](azure-stack-connect-azure-stack.md)

[Начало работы с PowerShell в Azure Stack](azure-stack-powershell-configure-quickstart.md)

[Register Azure Stack with your Azure subscription](azure-stack-register.md) (Регистрация Azure Stack с помощью подписки Azure)



