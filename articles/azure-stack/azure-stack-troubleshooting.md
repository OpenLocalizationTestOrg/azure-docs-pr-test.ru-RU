---
title: "Устранение неполадок стека Microsoft Azure | Документы Microsoft"
description: "Azure стека устранения неполадок."
services: azure-stack
documentationcenter: 
author: heathl17
manager: byronr
editor: 
ms.assetid: a20bea32-3705-45e8-9168-f198cfac51af
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/10/2017
ms.author: helaw
ms.openlocfilehash: a7309693d8f7971e42768a13d12fa0a8bd81925a
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="microsoft-azure-stack-troubleshooting"></a>Устранение неполадок стека Microsoft Azure
Этот документ содержит общие сведения об устранении неполадок для Azure стека. 

Так как технические комплекта разработки Azure стека предлагается как среде оценки, не поддерживается официальный из службы поддержки Майкрософт.  Если вы испытываете проблемы, не описанной, не забудьте проверить [форум MSDN стек Azure](https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack) для получения дополнительной помощи и сведения.  

Рекомендации по устранению неполадок, описанные в этом разделе являются производными от нескольких источников и может или не может разрешить конкретной проблемы. Примеры кода предоставляются как есть, и ожидаемые результаты не гарантируется. В этом разделе регулируется частые изменения и обновления как реализованы улучшения продукта.

## <a name="deployment"></a>Развертывание
### <a name="deployment-failure"></a>Сбой развертывания
При возникновении сбоя во время установки, можно использовать параметр повторного запуска скрипта развертывания для перезапустить развертывание из ошибочного шага.  


### <a name="at-the-end-of-the-deployment-the-powershell-session-is-still-open-and-doesnt-show-any-output"></a>В конце развертывания сеанс PowerShell все еще открыто и не отображается никаких выходных данных
Это поведение, скорее всего, является результат по умолчанию командное окно PowerShell Если был выбран. Фактически успешного развертывания комплект средств для разработки, но скрипт был приостановлен, при выборе окна. Чтобы проверить это условие выполняется путем поиска слова «select» в строке заголовка окна команд.  Нажмите клавишу ESC, чтобы отменить его выбор, и после него должно быть показано сообщение о завершении.

## <a name="templates"></a>Шаблоны
### <a name="azure-template-wont-deploy-to-azure-stack"></a>Шаблон Azure не будут развертываться на стек Azure
Убедитесь, что:

* Службы Microsoft Azure уже доступен или в режиме просмотра стека Azure необходимо использовать шаблон.
* API, используемые для определенного ресурса поддерживаются локальным экземпляром Azure стека, и вы используете допустимое расположение («local» в пакете средств разработки Azure стека, vs «Восток США» или «Южной Индии» в Azure).
* Просмотреть [в этой статье](https://github.com/Azure/AzureStack-QuickStart-Templates/blob/master/README.md) о командлетах AzureRmResourceGroupDeployment теста, который перехватывать небольшие различия в синтаксисе диспетчера ресурсов Azure.

Также можно использовать шаблоны Azure стека, уже содержится в [репозитории GitHub](http://aka.ms/AzureStackGitHub/) помогут вам приступить к работе.

## <a name="virtual-machines"></a>Виртуальные машины
### <a name="default-image-and-gallery-item"></a>По умолчанию элемент изображения и коллекции
Перед развертыванием виртуальных машин в Azure стека, необходимо сначала добавить Windows Server изображения и коллекции элементов.

### <a name="after-restarting-my-azure-stack-host-some-vms-may-not-automatically-start"></a>После перезагрузки узла Azure стека, некоторые виртуальные машины могут не запускаться автоматически.
После перезагрузки узла, можно заметить, что службы Azure стека не сразу становятся доступными.  Это обусловлено стека Azure [инфраструктуры виртуальных машин](azure-stack-architecture.md#virtual-machine-roles) и RPs принимают немного позже для проверки согласованности, но в конечном итоге будет запускаться автоматически.

Также можно заметить этого клиента, виртуальные машины не запускаются автоматически после перезагрузки узла комплект средств для разработки Azure стека.  Это известная проблема и требуется несколько действий вручную, чтобы перевести в оперативный режим:

1.  На узле комплект средств для разработки Azure стека запуска **Диспетчер отказоустойчивости кластеров** из меню "Пуск".
2.  Выберите кластер **S Cluster.azurestack.local**.
3.  Выберите **Роли**.
4.  Виртуальные машины клиента будет отображаться в *Сохранить* состояния.  После запуска всех виртуальных машин в инфраструктуре, щелкните правой кнопкой мыши виртуальные машины клиента и выберите **запустить** возобновить виртуальную Машину.

### <a name="i-have-deleted-some-virtual-machines-but-still-see-the-vhd-files-on-disk-is-this-behavior-expected"></a>Я удалил некоторые виртуальные машины, но по-прежнему отображается VHD-файлы на диске. Это поведение ожидается?
Да, это поведение, ожидаемое. Он был разработан таким образом, так как:

* При удалении виртуальной Машины, виртуальные жесткие диски не удаляются. Диски представляют собой отдельные ресурсы в группе ресурсов.
* При удалении учетной записи хранилища возвращает удаление отображается непосредственно через диспетчер ресурсов Azure (портал, PowerShell), а диски, которые он может содержать все еще хранятся в хранилище, пока не будет запущен сборщик мусора.

При появлении виртуальные жесткие диски «потерянных объектов», важно знать, если они являются частью папки для учетной записи хранения, который был удален. Если учетная запись хранения не был удален, обычный, что они по-прежнему существуют.

Вы можете прочитать больше о настройке хранения по требованию и пороговое значение в освобождение [управление учетными записями хранения](azure-stack-manage-storage-accounts.md).

## <a name="storage"></a>Хранилище
### <a name="storage-reclamation"></a>Освобождение хранилища
Он может занять до Четырнадцать часов утилизируемого емкости отображались на портале. Освобождение пространства зависит от различных факторов, включая процент использования внутренних контейнера файлов в хранилище BLOB-объект блока. Таким образом в зависимости от того, какой объем данных удаляется, нет никакой гарантии на объем пространства, могли быть освобождены при запуске сборщика мусора.

## <a name="powershell"></a>PowerShell
### <a name="resource-providers-not-registered"></a>Поставщики ресурсов не зарегистрирована
При подключении к подпискам клиента с помощью PowerShell, вы заметите, что поставщики ресурсов не регистрируются автоматически. Используйте [с помощью модуля Connect](https://github.com/Azure/AzureStack-Tools/tree/master/Connect), или выполните следующую команду из PowerShell (после вы [Установка и подключение](azure-stack-connect-powershell.md) как клиента): 
  
       Get-AzureRMResourceProvider | Register-AzureRmResourceProvider

## <a name="cli"></a>Интерфейс командной строки

* Интерактивный режим CLI т. е. `az interactive` команда еще не поддерживается в Azure стека.
* Чтобы получить список образов виртуальных машин, доступных в Azure стека, используйте `az vm images list --all` вместо `az vm image list` команды. Указание `--all` option гарантирует, что ответ возвращает только изображения, которые доступны в среде Azure стека. 
* Псевдонимы образ виртуальной машины, доступные в Azure может оказаться неприменимым для Azure стека. При использовании образов виртуальных машин, необходимо использовать параметр всей URN (канонические: UbuntuServer:14.04.3-LTS:1.0.0) вместо изображения псевдонима. И это URNmust соответствует спецификации изображения, производный от `az vm images list` команды.
* По умолчанию CLI 2.0 использует «Standard_DS1_v2» в качестве размер образа виртуальной машины по умолчанию. Тем не менее, этот размер еще не доступны в стек Azure, таким образом, необходимо указать `--size` параметр явным образом при создании виртуальной машины. Вы можете получить список размеров виртуальных машин, доступных в стек Azure с помощью `az vm list-sizes --location <locationName>` команды.


## <a name="windows-azure-pack-connector"></a>Соединитель Windows Azure Pack
* Если изменить пароль учетной записи, azurestackadmin после развертывания пакета средств разработки Azure стека, больше не можно настроить режим несколько компонентов в облаке. Таким образом будет невозможно подключиться к целевой среде Windows Azure Pack.
* После настройки режима несколько компонентов в облаке:
    * Пользователь видит панели мониторинга только после их Сброс параметров портала. (На пользовательском портале щелкните значок "Параметры портала" (значок шестеренки в правом верхнем углу). В разделе **восстановить параметры по умолчанию**, нажмите кнопку **применить**.)
    * Заголовки панели мониторинга могут не отображаться. При возникновении этой проблемы, необходимо вручную добавить их снова.
    * Некоторые разделы могут показывать некорректно при первом добавлении их на панель мониторинга. Чтобы устранить эту проблему, обновите браузер.



