---
title: "Устранение неполадок Azure стека aaaMicrosoft | Документы Microsoft"
description: "Azure стека устранения неполадок."
services: azure-stack
documentationcenter: 
author: heathl17
manager: byronr
editor: 
ms.assetid: a20bea32-3705-45e8-9168-f198cfac51af
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/10/2017
ms.author: helaw
ms.openlocfilehash: e274e92bc12fd6b7a2594f2f21b69ff0b9de594b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-azure-stack-troubleshooting"></a><span data-ttu-id="731fb-103">Устранение неполадок стека Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="731fb-103">Microsoft Azure Stack troubleshooting</span></span>
<span data-ttu-id="731fb-104">Этот документ содержит общие сведения об устранении неполадок для Azure стека.</span><span class="sxs-lookup"><span data-stu-id="731fb-104">This document provides common troubleshooting information for Azure Stack.</span></span> 

<span data-ttu-id="731fb-105">Поскольку hello Azure стека технические Development Kit предлагается как среде оценки, не поддерживается официальный из службы поддержки Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="731fb-105">Because hello Azure Stack Technical Development Kit is offered as an evaluation environment, there is no official support from Microsoft Customer Support Services.</span></span>  <span data-ttu-id="731fb-106">При возникновении проблемы, не описанной, убедитесь, что hello toocheck [форум MSDN стек Azure](https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack) для получения дополнительной помощи и информации.</span><span class="sxs-lookup"><span data-stu-id="731fb-106">If you are experiencing an issue not documented, make sure toocheck hello [Azure Stack MSDN Forum](https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack) for further assistance and information.</span></span>  

<span data-ttu-id="731fb-107">Hello рекомендации по устранению неполадок, описанные в этом разделе являются производными от нескольких источников и может или не может разрешить конкретной проблемы.</span><span class="sxs-lookup"><span data-stu-id="731fb-107">hello recommendations for troubleshooting issues that are described in this section are derived from several sources and may or may not resolve your particular issue.</span></span> <span data-ttu-id="731fb-108">Примеры кода предоставляются как есть, и ожидаемые результаты не гарантируется.</span><span class="sxs-lookup"><span data-stu-id="731fb-108">Code examples are provided as is and expected results cannot be guaranteed.</span></span> <span data-ttu-id="731fb-109">Этот раздел представляет субъекта toofrequent изменения и реализации обновляется по мере улучшения toohello продукта.</span><span class="sxs-lookup"><span data-stu-id="731fb-109">This section is subject toofrequent edits and updates as improvements toohello product are implemented.</span></span>

## <a name="deployment"></a><span data-ttu-id="731fb-110">Развертывание</span><span class="sxs-lookup"><span data-stu-id="731fb-110">Deployment</span></span>
### <a name="deployment-failure"></a><span data-ttu-id="731fb-111">Сбой развертывания</span><span class="sxs-lookup"><span data-stu-id="731fb-111">Deployment failure</span></span>
<span data-ttu-id="731fb-112">При возникновении сбоя во время установки, можно использовать вариант использования hello повторно hello развертывания сценария toorestart hello развертывания из hello ошибка в шаге.</span><span class="sxs-lookup"><span data-stu-id="731fb-112">If you experience a failure during installation, you can use use hello rerun option of hello deployment script toorestart hello deployment from hello failed step.</span></span>  


### <a name="at-hello-end-of-hello-deployment-hello-powershell-session-is-still-open-and-doesnt-show-any-output"></a><span data-ttu-id="731fb-113">В конце развертывания hello hello, сеанс PowerShell hello все еще открыто и не отображается никаких выходных данных</span><span class="sxs-lookup"><span data-stu-id="731fb-113">At hello end of hello deployment, hello PowerShell session is still open and doesn’t show any output</span></span>
<span data-ttu-id="731fb-114">Это поведение, скорее всего, является результатом hello только поведение по умолчанию hello командное окно PowerShell, если был выбран.</span><span class="sxs-lookup"><span data-stu-id="731fb-114">This behavior is probably just hello result of hello default behavior of a PowerShell command window, when it has been selected.</span></span> <span data-ttu-id="731fb-115">Hello разработки комплект средств для развертывания фактически выполнено успешно, но сценарий hello приостановлена при выборе окна hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-115">hello development kit deployment has actually succeeded but hello script was paused when selecting hello window.</span></span> <span data-ttu-id="731fb-116">Вы можете подтвердить это случай hello ищет слово hello «select» в hello заголовка hello командное окно.</span><span class="sxs-lookup"><span data-stu-id="731fb-116">You can verify this is hello case by looking for hello word "select" in hello titlebar of hello command window.</span></span>  <span data-ttu-id="731fb-117">Нажмите клавишу toounselect ключа hello ESC и сообщение о завершении hello должен отображаться после него.</span><span class="sxs-lookup"><span data-stu-id="731fb-117">Press hello ESC key toounselect it, and hello completion message should be shown after it.</span></span>

## <a name="templates"></a><span data-ttu-id="731fb-118">Шаблоны</span><span class="sxs-lookup"><span data-stu-id="731fb-118">Templates</span></span>
### <a name="azure-template-wont-deploy-tooazure-stack"></a><span data-ttu-id="731fb-119">Шаблон Azure не будут развертываться tooAzure стека</span><span class="sxs-lookup"><span data-stu-id="731fb-119">Azure template won't deploy tooAzure Stack</span></span>
<span data-ttu-id="731fb-120">Убедитесь, что:</span><span class="sxs-lookup"><span data-stu-id="731fb-120">Make sure that:</span></span>

* <span data-ttu-id="731fb-121">службы Microsoft Azure уже доступен или в режиме просмотра стека Azure необходимо использовать шаблон Hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-121">hello template must be using a Microsoft Azure service that is already available or in preview in Azure Stack.</span></span>
* <span data-ttu-id="731fb-122">Hello API, используемые для определенного ресурса поддерживаются hello локального экземпляра Azure стека, и, для которой предназначен допустимое расположение («local» в пакете средств разработки Azure стека, vs hello «Восток США» или «Южной Индии» в Azure).</span><span class="sxs-lookup"><span data-stu-id="731fb-122">hello APIs used for a specific resource are supported by hello local Azure Stack instance, and that you are targeting a valid location (“local” in Azure Stack development kit, vs hello “East US” or “South India” in Azure).</span></span>
* <span data-ttu-id="731fb-123">Просмотреть [в этой статье](https://github.com/Azure/AzureStack-QuickStart-Templates/blob/master/README.md) о командлетах hello AzureRmResourceGroupDeployment теста, который перехватывать небольшие различия в синтаксисе диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="731fb-123">You review [this article](https://github.com/Azure/AzureStack-QuickStart-Templates/blob/master/README.md) about hello Test-AzureRmResourceGroupDeployment cmdlets, which catch small differences in Azure Resource Manager syntax.</span></span>

<span data-ttu-id="731fb-124">Можно также использовать hello Azure стека шаблонов уже в hello [репозитории GitHub](http://aka.ms/AzureStackGitHub/) toohelp приступить к работе.</span><span class="sxs-lookup"><span data-stu-id="731fb-124">You can also use hello Azure Stack templates already provided in hello [GitHub repository](http://aka.ms/AzureStackGitHub/) toohelp you get started.</span></span>

## <a name="virtual-machines"></a><span data-ttu-id="731fb-125">Виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="731fb-125">Virtual machines</span></span>
### <a name="default-image-and-gallery-item"></a><span data-ttu-id="731fb-126">По умолчанию элемент изображения и коллекции</span><span class="sxs-lookup"><span data-stu-id="731fb-126">Default image and gallery item</span></span>
<span data-ttu-id="731fb-127">Перед развертыванием виртуальных машин в Azure стека, необходимо сначала добавить Windows Server изображения и коллекции элементов.</span><span class="sxs-lookup"><span data-stu-id="731fb-127">You must first add a Windows Server image and gallery item before deploying VMs in Azure Stack.</span></span>

### <a name="after-restarting-my-azure-stack-host-some-vms-may-not-automatically-start"></a><span data-ttu-id="731fb-128">После перезагрузки узла Azure стека, некоторые виртуальные машины могут не запускаться автоматически.</span><span class="sxs-lookup"><span data-stu-id="731fb-128">After restarting my Azure Stack host, some VMs may not automatically start.</span></span>
<span data-ttu-id="731fb-129">После перезагрузки узла, можно заметить, что службы Azure стека не сразу становятся доступными.</span><span class="sxs-lookup"><span data-stu-id="731fb-129">After rebooting your host, you may notice Azure Stack services are not immediately available.</span></span>  <span data-ttu-id="731fb-130">Это обусловлено стека Azure [инфраструктуры виртуальных машин](azure-stack-architecture.md#virtual-machine-roles) и RPs принимают немного toocheck согласованности, но в конечном итоге будет запускаться автоматически.</span><span class="sxs-lookup"><span data-stu-id="731fb-130">This is because Azure Stack [infrastructure VMs](azure-stack-architecture.md#virtual-machine-roles) and RPs take a little bit toocheck consistency, but will eventually start automatically.</span></span>

<span data-ttu-id="731fb-131">Также можно заметить этого клиента, виртуальные машины не запускаются автоматически после перезагрузки узла комплект средств для разработки Azure стека hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-131">You may also notice that tenant VMs don't automatically start after a reboot of hello Azure Stack development kit host.</span></span>  <span data-ttu-id="731fb-132">Это известная проблема и требуется несколько действий вручную toobring их через Интернет:</span><span class="sxs-lookup"><span data-stu-id="731fb-132">This is a known issue, and just requires a few manual steps toobring them online:</span></span>

1.  <span data-ttu-id="731fb-133">На узел комплект средств для разработки Azure стека hello, запустите **Диспетчер отказоустойчивости кластеров** из меню "Пуск" hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-133">On hello Azure Stack development kit host, start **Failover Cluster Manager** from hello Start Menu.</span></span>
2.  <span data-ttu-id="731fb-134">Выберите hello кластера **S Cluster.azurestack.local**.</span><span class="sxs-lookup"><span data-stu-id="731fb-134">Select hello cluster **S-Cluster.azurestack.local**.</span></span>
3.  <span data-ttu-id="731fb-135">Выберите **Роли**.</span><span class="sxs-lookup"><span data-stu-id="731fb-135">Select **Roles**.</span></span>
4.  <span data-ttu-id="731fb-136">Виртуальные машины клиента будет отображаться в *Сохранить* состояния.</span><span class="sxs-lookup"><span data-stu-id="731fb-136">Tenant VMs will appear in a *saved* state.</span></span>  <span data-ttu-id="731fb-137">После запуска всех виртуальных машин в инфраструктуре, щелкните правой кнопкой мыши hello клиентских виртуальных машин и выберите **запустить** tooresume hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="731fb-137">Once all Infrastructure VMs are running, right-click hello tenant VMs and select **Start** tooresume hello VM.</span></span>

### <a name="i-have-deleted-some-virtual-machines-but-still-see-hello-vhd-files-on-disk-is-this-behavior-expected"></a><span data-ttu-id="731fb-138">Я удалил некоторые виртуальные машины, но по-прежнему отображается hello VHD-файлы на диске.</span><span class="sxs-lookup"><span data-stu-id="731fb-138">I have deleted some virtual machines, but still see hello VHD files on disk.</span></span> <span data-ttu-id="731fb-139">Это поведение ожидается?</span><span class="sxs-lookup"><span data-stu-id="731fb-139">Is this behavior expected?</span></span>
<span data-ttu-id="731fb-140">Да, это поведение, ожидаемое.</span><span class="sxs-lookup"><span data-stu-id="731fb-140">Yes, this is behavior expected.</span></span> <span data-ttu-id="731fb-141">Он был разработан таким образом, так как:</span><span class="sxs-lookup"><span data-stu-id="731fb-141">It was designed this way because:</span></span>

* <span data-ttu-id="731fb-142">При удалении виртуальной Машины, виртуальные жесткие диски не удаляются.</span><span class="sxs-lookup"><span data-stu-id="731fb-142">When you delete a VM, VHDs are not deleted.</span></span> <span data-ttu-id="731fb-143">Диски представляют собой отдельные ресурсы в группе ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-143">Disks are separate resources in hello resource group.</span></span>
* <span data-ttu-id="731fb-144">При удалении учетной записи хранилища возвращает удаления hello отображается непосредственно через диспетчер ресурсов Azure (портал, PowerShell), а диски hello, содержащиеся в нем по-прежнему хранятся в хранилище, пока не будет запущен сборщик мусора.</span><span class="sxs-lookup"><span data-stu-id="731fb-144">When a storage account gets deleted, hello deletion is visible immediately through Azure Resource Manager (portal, PowerShell) but hello disks it may contain are still kept in storage until garbage collection runs.</span></span>

<span data-ttu-id="731fb-145">При появлении виртуальные жесткие диски «строк», является важным tooknow они являются частью hello папки для учетной записи хранения, который был удален.</span><span class="sxs-lookup"><span data-stu-id="731fb-145">If you see "orphan" VHDs, it is important tooknow if they are part of hello folder for a storage account that was deleted.</span></span> <span data-ttu-id="731fb-146">Если учетной записи хранилища hello не было удалено, обычных, что они по-прежнему существуют.</span><span class="sxs-lookup"><span data-stu-id="731fb-146">If hello storage account was not deleted, it's normal they are still there.</span></span>

<span data-ttu-id="731fb-147">Вы можете прочитать больше о настройке hello хранения по требованию и пороговое значение освобождение в [управление учетными записями хранения](azure-stack-manage-storage-accounts.md).</span><span class="sxs-lookup"><span data-stu-id="731fb-147">You can read more about configuring hello retention threshold and on-demand reclamation in [manage storage accounts](azure-stack-manage-storage-accounts.md).</span></span>

## <a name="storage"></a><span data-ttu-id="731fb-148">Хранилище</span><span class="sxs-lookup"><span data-stu-id="731fb-148">Storage</span></span>
### <a name="storage-reclamation"></a><span data-ttu-id="731fb-149">Освобождение хранилища</span><span class="sxs-lookup"><span data-stu-id="731fb-149">Storage reclamation</span></span>
<span data-ttu-id="731fb-150">Может потребоваться toofourteen часов для tooshow утилизируемого емкости вверх в портале hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-150">It may take up toofourteen hours for reclaimed capacity tooshow up in hello portal.</span></span> <span data-ttu-id="731fb-151">Освобождение пространства зависит от различных факторов, включая процент использования внутренних контейнера файлов в хранилище BLOB-объект блока.</span><span class="sxs-lookup"><span data-stu-id="731fb-151">Space reclamation depends on various factors including usage percentage of internal container files in block blob store.</span></span> <span data-ttu-id="731fb-152">Таким образом в зависимости от того, какой объем данных удаляется, нет никакой гарантии на hello объем пространства, могли быть освобождены при запуске сборщика мусора.</span><span class="sxs-lookup"><span data-stu-id="731fb-152">Therefore, depending on how much data is deleted, there is no guarantee on hello amount of space that could be reclaimed when garbage collector runs.</span></span>

## <a name="powershell"></a><span data-ttu-id="731fb-153">PowerShell</span><span class="sxs-lookup"><span data-stu-id="731fb-153">PowerShell</span></span>
### <a name="resource-providers-not-registered"></a><span data-ttu-id="731fb-154">Поставщики ресурсов не зарегистрирована</span><span class="sxs-lookup"><span data-stu-id="731fb-154">Resource Providers not registered</span></span>
<span data-ttu-id="731fb-155">При подключении tootenant подписки с помощью PowerShell, вы заметите, что ресурсов hello поставщики не регистрируются автоматически.</span><span class="sxs-lookup"><span data-stu-id="731fb-155">When connecting tootenant subscriptions with PowerShell, you will notice that hello resource providers are not automatically registered.</span></span> <span data-ttu-id="731fb-156">Используйте hello [с помощью модуля Connect](https://github.com/Azure/AzureStack-Tools/tree/master/Connect), или выполнения hello следующую команду из PowerShell (после вы [Установка и подключение](azure-stack-connect-powershell.md) как клиента):</span><span class="sxs-lookup"><span data-stu-id="731fb-156">Use hello [Connect module](https://github.com/Azure/AzureStack-Tools/tree/master/Connect), or run hello following command from PowerShell (after you [install and connect](azure-stack-connect-powershell.md) as a tenant):</span></span> 
  
       Get-AzureRMResourceProvider | Register-AzureRmResourceProvider

## <a name="cli"></a><span data-ttu-id="731fb-157">Интерфейс командной строки</span><span class="sxs-lookup"><span data-stu-id="731fb-157">CLI</span></span>

* <span data-ttu-id="731fb-158">Hello CLI интерактивного режима, т. е.</span><span class="sxs-lookup"><span data-stu-id="731fb-158">hello CLI interactive mode i.e</span></span> <span data-ttu-id="731fb-159">Hello `az interactive` команда еще не поддерживается в Azure стека.</span><span class="sxs-lookup"><span data-stu-id="731fb-159">hello `az interactive` command is not yet supported in Azure Stack.</span></span>
* <span data-ttu-id="731fb-160">список образов виртуальных машин, доступных в Azure стек, используйте hello hello tooget `az vm images list --all` команду вместо hello `az vm image list` команды.</span><span class="sxs-lookup"><span data-stu-id="731fb-160">tooget hello list of virtual machine images available in Azure Stack, use hello `az vm images list --all` command instead of hello `az vm image list` command.</span></span> <span data-ttu-id="731fb-161">Указание hello `--all` option гарантирует, что ответ возвращает только hello изображений, доступных в среде Azure стека.</span><span class="sxs-lookup"><span data-stu-id="731fb-161">Specifying hello `--all` option makes sure that response returns only hello images that are available in your Azure Stack environment.</span></span> 
* <span data-ttu-id="731fb-162">Псевдонимы образ виртуальной машины, доступные в Azure может быть применимо tooAzure стека.</span><span class="sxs-lookup"><span data-stu-id="731fb-162">Virtual machine image aliases that are available in Azure may not be applicable tooAzure Stack.</span></span> <span data-ttu-id="731fb-163">При использовании образов виртуальных машин, необходимо использовать hello целиком URN (канонические: UbuntuServer:14.04.3-LTS:1.0.0) вместо изображения псевдонима hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-163">When using virtual machine images, you must use hello entire URN parameter (Canonical:UbuntuServer:14.04.3-LTS:1.0.0) instead of hello image alias.</span></span> <span data-ttu-id="731fb-164">И это URNmust соответствует спецификации изображения hello, производный от hello `az vm images list` команды.</span><span class="sxs-lookup"><span data-stu-id="731fb-164">And this URNmust match hello image specifications as derived from hello `az vm images list` command.</span></span>
* <span data-ttu-id="731fb-165">По умолчанию CLI 2.0 использует «Standard_DS1_v2» в качестве размера образа виртуальной машины по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-165">By default, CLI 2.0 uses “Standard_DS1_v2” as hello default virtual machine image size.</span></span> <span data-ttu-id="731fb-166">Тем не менее, этот размер еще не доступны в стек Azure, таким образом, необходимо toospecify hello `--size` параметр явным образом при создании виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="731fb-166">However, this size is not yet available in Azure Stack, so, you need toospecify hello `--size` parameter explicitly when creating a virtual machine.</span></span> <span data-ttu-id="731fb-167">Вы можете получить список hello размеров виртуальных машин, доступных в стек Azure с помощью hello `az vm list-sizes --location <locationName>` команды.</span><span class="sxs-lookup"><span data-stu-id="731fb-167">You can get hello list of virtual machine sizes that are available in Azure Stack by using hello `az vm list-sizes --location <locationName>` command.</span></span>


## <a name="windows-azure-pack-connector"></a><span data-ttu-id="731fb-168">Соединитель Windows Azure Pack</span><span class="sxs-lookup"><span data-stu-id="731fb-168">Windows Azure Pack Connector</span></span>
* <span data-ttu-id="731fb-169">Если изменить hello пароль учетной записи azurestackadmin hello после развертывания пакета средств разработки Azure стека, больше не можно настроить режим несколько компонентов в облаке.</span><span class="sxs-lookup"><span data-stu-id="731fb-169">If you change hello password of hello azurestackadmin account after you deploy Azure Stack development kit, you can no longer configure multi-cloud mode.</span></span> <span data-ttu-id="731fb-170">Таким образом он не будет возможности tooconnect toohello целевой Windows Azure Pack среды.</span><span class="sxs-lookup"><span data-stu-id="731fb-170">Therefore, it won't be possible tooconnect toohello target Windows Azure Pack environment.</span></span>
* <span data-ttu-id="731fb-171">После настройки режима несколько компонентов в облаке:</span><span class="sxs-lookup"><span data-stu-id="731fb-171">After you set up multi-cloud mode:</span></span>
    * <span data-ttu-id="731fb-172">Пользователь может видеть панель мониторинга hello только после их Сброс параметров портала hello.</span><span class="sxs-lookup"><span data-stu-id="731fb-172">A user can see hello dashboard only after they reset hello portal settings.</span></span> <span data-ttu-id="731fb-173">(В hello пользовательского портала, щелкните значок параметров портала hello (значок шестеренки в правом верхнем углу hello).</span><span class="sxs-lookup"><span data-stu-id="731fb-173">(In hello user portal, click hello portal settings icon (gear icon in hello top-right corner).</span></span> <span data-ttu-id="731fb-174">В разделе **восстановить параметры по умолчанию**, нажмите кнопку **применить**.)</span><span class="sxs-lookup"><span data-stu-id="731fb-174">Under **Restore default settings**, click **Apply**.)</span></span>
    * <span data-ttu-id="731fb-175">заголовки Hello панели мониторинга могут не отображаться.</span><span class="sxs-lookup"><span data-stu-id="731fb-175">hello dashboard titles may not appear.</span></span> <span data-ttu-id="731fb-176">При возникновении этой проблемы, необходимо вручную добавить их снова.</span><span class="sxs-lookup"><span data-stu-id="731fb-176">If this issue occurs, you must manually add them back.</span></span>
    * <span data-ttu-id="731fb-177">Некоторые разделы могут показывать некорректно при первом добавлении их toohello панели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="731fb-177">Some tiles may not show correctly when you first add them toohello dashboard.</span></span> <span data-ttu-id="731fb-178">toofix эту проблему, браузер hello обновления.</span><span class="sxs-lookup"><span data-stu-id="731fb-178">toofix this issue, refresh hello browser.</span></span>



