---
title: "Устранение неполадок Azure стека aaaMicrosoft | Документы Microsoft"
description: "Azure стека устранения неполадок."
services: azure-stack
documentationcenter: 
author: heathl17
manager: byronr
editor: 
ms.assetid: a20bea32-3705-45e8-9168-f198cfac51af
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/10/2017
ms.author: helaw
ms.openlocfilehash: e274e92bc12fd6b7a2594f2f21b69ff0b9de594b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-azure-stack-troubleshooting"></a>Устранение неполадок стека Microsoft Azure
Этот документ содержит общие сведения об устранении неполадок для Azure стека. 

Поскольку hello Azure стека технические Development Kit предлагается как среде оценки, не поддерживается официальный из службы поддержки Майкрософт.  При возникновении проблемы, не описанной, убедитесь, что hello toocheck [форум MSDN стек Azure](https://social.msdn.microsoft.com/Forums/azure/home?forum=azurestack) для получения дополнительной помощи и информации.  

Hello рекомендации по устранению неполадок, описанные в этом разделе являются производными от нескольких источников и может или не может разрешить конкретной проблемы. Примеры кода предоставляются как есть, и ожидаемые результаты не гарантируется. Этот раздел представляет субъекта toofrequent изменения и реализации обновляется по мере улучшения toohello продукта.

## <a name="deployment"></a>Развертывание
### <a name="deployment-failure"></a>Сбой развертывания
При возникновении сбоя во время установки, можно использовать вариант использования hello повторно hello развертывания сценария toorestart hello развертывания из hello ошибка в шаге.  


### <a name="at-hello-end-of-hello-deployment-hello-powershell-session-is-still-open-and-doesnt-show-any-output"></a>В конце развертывания hello hello, сеанс PowerShell hello все еще открыто и не отображается никаких выходных данных
Это поведение, скорее всего, является результатом hello только поведение по умолчанию hello командное окно PowerShell, если был выбран. Hello разработки комплект средств для развертывания фактически выполнено успешно, но сценарий hello приостановлена при выборе окна hello. Вы можете подтвердить это случай hello ищет слово hello «select» в hello заголовка hello командное окно.  Нажмите клавишу toounselect ключа hello ESC и сообщение о завершении hello должен отображаться после него.

## <a name="templates"></a>Шаблоны
### <a name="azure-template-wont-deploy-tooazure-stack"></a>Шаблон Azure не будут развертываться tooAzure стека
Убедитесь, что:

* службы Microsoft Azure уже доступен или в режиме просмотра стека Azure необходимо использовать шаблон Hello.
* Hello API, используемые для определенного ресурса поддерживаются hello локального экземпляра Azure стека, и, для которой предназначен допустимое расположение («local» в пакете средств разработки Azure стека, vs hello «Восток США» или «Южной Индии» в Azure).
* Просмотреть [в этой статье](https://github.com/Azure/AzureStack-QuickStart-Templates/blob/master/README.md) о командлетах hello AzureRmResourceGroupDeployment теста, который перехватывать небольшие различия в синтаксисе диспетчера ресурсов Azure.

Можно также использовать hello Azure стека шаблонов уже в hello [репозитории GitHub](http://aka.ms/AzureStackGitHub/) toohelp приступить к работе.

## <a name="virtual-machines"></a>Виртуальные машины
### <a name="default-image-and-gallery-item"></a>По умолчанию элемент изображения и коллекции
Перед развертыванием виртуальных машин в Azure стека, необходимо сначала добавить Windows Server изображения и коллекции элементов.

### <a name="after-restarting-my-azure-stack-host-some-vms-may-not-automatically-start"></a>После перезагрузки узла Azure стека, некоторые виртуальные машины могут не запускаться автоматически.
После перезагрузки узла, можно заметить, что службы Azure стека не сразу становятся доступными.  Это обусловлено стека Azure [инфраструктуры виртуальных машин](azure-stack-architecture.md#virtual-machine-roles) и RPs принимают немного toocheck согласованности, но в конечном итоге будет запускаться автоматически.

Также можно заметить этого клиента, виртуальные машины не запускаются автоматически после перезагрузки узла комплект средств для разработки Azure стека hello.  Это известная проблема и требуется несколько действий вручную toobring их через Интернет:

1.  На узел комплект средств для разработки Azure стека hello, запустите **Диспетчер отказоустойчивости кластеров** из меню "Пуск" hello.
2.  Выберите hello кластера **S Cluster.azurestack.local**.
3.  Выберите **Роли**.
4.  Виртуальные машины клиента будет отображаться в *Сохранить* состояния.  После запуска всех виртуальных машин в инфраструктуре, щелкните правой кнопкой мыши hello клиентских виртуальных машин и выберите **запустить** tooresume hello виртуальной Машины.

### <a name="i-have-deleted-some-virtual-machines-but-still-see-hello-vhd-files-on-disk-is-this-behavior-expected"></a>Я удалил некоторые виртуальные машины, но по-прежнему отображается hello VHD-файлы на диске. Это поведение ожидается?
Да, это поведение, ожидаемое. Он был разработан таким образом, так как:

* При удалении виртуальной Машины, виртуальные жесткие диски не удаляются. Диски представляют собой отдельные ресурсы в группе ресурсов hello.
* При удалении учетной записи хранилища возвращает удаления hello отображается непосредственно через диспетчер ресурсов Azure (портал, PowerShell), а диски hello, содержащиеся в нем по-прежнему хранятся в хранилище, пока не будет запущен сборщик мусора.

При появлении виртуальные жесткие диски «строк», является важным tooknow они являются частью hello папки для учетной записи хранения, который был удален. Если учетной записи хранилища hello не было удалено, обычных, что они по-прежнему существуют.

Вы можете прочитать больше о настройке hello хранения по требованию и пороговое значение освобождение в [управление учетными записями хранения](azure-stack-manage-storage-accounts.md).

## <a name="storage"></a>Хранилище
### <a name="storage-reclamation"></a>Освобождение хранилища
Может потребоваться toofourteen часов для tooshow утилизируемого емкости вверх в портале hello. Освобождение пространства зависит от различных факторов, включая процент использования внутренних контейнера файлов в хранилище BLOB-объект блока. Таким образом в зависимости от того, какой объем данных удаляется, нет никакой гарантии на hello объем пространства, могли быть освобождены при запуске сборщика мусора.

## <a name="powershell"></a>PowerShell
### <a name="resource-providers-not-registered"></a>Поставщики ресурсов не зарегистрирована
При подключении tootenant подписки с помощью PowerShell, вы заметите, что ресурсов hello поставщики не регистрируются автоматически. Используйте hello [с помощью модуля Connect](https://github.com/Azure/AzureStack-Tools/tree/master/Connect), или выполнения hello следующую команду из PowerShell (после вы [Установка и подключение](azure-stack-connect-powershell.md) как клиента): 
  
       Get-AzureRMResourceProvider | Register-AzureRmResourceProvider

## <a name="cli"></a>Интерфейс командной строки

* Hello CLI интерактивного режима, т. е. Hello `az interactive` команда еще не поддерживается в Azure стека.
* список образов виртуальных машин, доступных в Azure стек, используйте hello hello tooget `az vm images list --all` команду вместо hello `az vm image list` команды. Указание hello `--all` option гарантирует, что ответ возвращает только hello изображений, доступных в среде Azure стека. 
* Псевдонимы образ виртуальной машины, доступные в Azure может быть применимо tooAzure стека. При использовании образов виртуальных машин, необходимо использовать hello целиком URN (канонические: UbuntuServer:14.04.3-LTS:1.0.0) вместо изображения псевдонима hello. И это URNmust соответствует спецификации изображения hello, производный от hello `az vm images list` команды.
* По умолчанию CLI 2.0 использует «Standard_DS1_v2» в качестве размера образа виртуальной машины по умолчанию hello. Тем не менее, этот размер еще не доступны в стек Azure, таким образом, необходимо toospecify hello `--size` параметр явным образом при создании виртуальной машины. Вы можете получить список hello размеров виртуальных машин, доступных в стек Azure с помощью hello `az vm list-sizes --location <locationName>` команды.


## <a name="windows-azure-pack-connector"></a>Соединитель Windows Azure Pack
* Если изменить hello пароль учетной записи azurestackadmin hello после развертывания пакета средств разработки Azure стека, больше не можно настроить режим несколько компонентов в облаке. Таким образом он не будет возможности tooconnect toohello целевой Windows Azure Pack среды.
* После настройки режима несколько компонентов в облаке:
    * Пользователь может видеть панель мониторинга hello только после их Сброс параметров портала hello. (В hello пользовательского портала, щелкните значок параметров портала hello (значок шестеренки в правом верхнем углу hello). В разделе **восстановить параметры по умолчанию**, нажмите кнопку **применить**.)
    * заголовки Hello панели мониторинга могут не отображаться. При возникновении этой проблемы, необходимо вручную добавить их снова.
    * Некоторые разделы могут показывать некорректно при первом добавлении их toohello панели мониторинга. toofix эту проблему, браузер hello обновления.



