---
title: "API использования ресурсов aaaTenant | Документы Microsoft"
description: "Ссылку для использования ресурсов API, которая получить сведения об использовании Azure стека."
services: azure-stack
documentationcenter: 
author: AlfredoPizzirani
manager: byronr
editor: 
ms.assetid: b9d7c7ee-e906-4978-92a3-a2c52df16c36
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/10/2016
ms.author: alfredop
ms.openlocfilehash: eb826aba87b3b5b79155d9003162f2b5e6871f82
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="tenant-resource-usage-api"></a><span data-ttu-id="6cfb7-103">Использование ресурсов API клиента</span><span class="sxs-lookup"><span data-stu-id="6cfb7-103">Tenant Resource Usage API</span></span>
<span data-ttu-id="6cfb7-104">Клиент может использовать hello hello tooview API клиента клиента собственные данные об использовании ресурсов.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-104">A tenant can use hello Tenant API tooview hello tenant’s own resource usage data.</span></span> <span data-ttu-id="6cfb7-105">Этот API согласуется с hello API использования Azure (в настоящее время в личной предварительной версии).</span><span class="sxs-lookup"><span data-stu-id="6cfb7-105">This API is consistent with hello Azure Usage API (currently in private preview).</span></span>

<span data-ttu-id="6cfb7-106">Можно использовать командлет Windows PowerShell hello **Get UsageAggregates** tooget данные об использовании, как в Azure.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-106">You can use hello Windows PowerShell cmdlet **Get-UsageAggregates** tooget usage data like in Azure.</span></span>

## <a name="api-call"></a><span data-ttu-id="6cfb7-107">Вызов API</span><span class="sxs-lookup"><span data-stu-id="6cfb7-107">API call</span></span>
### <a name="request"></a><span data-ttu-id="6cfb7-108">Запрос</span><span class="sxs-lookup"><span data-stu-id="6cfb7-108">Request</span></span>
<span data-ttu-id="6cfb7-109">Hello сведения о потреблении запрос возвращает для hello запрашивается подписки и для hello запрошен промежуток времени.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-109">hello request gets consumption details for hello requested subscriptions and for hello requested time frame.</span></span> <span data-ttu-id="6cfb7-110">Нет текста запроса нет.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-110">There is no request body.</span></span>

| <span data-ttu-id="6cfb7-111">**Метод**</span><span class="sxs-lookup"><span data-stu-id="6cfb7-111">**Method**</span></span> | <span data-ttu-id="6cfb7-112">**URI запроса**</span><span class="sxs-lookup"><span data-stu-id="6cfb7-112">**Request URI**</span></span> |
| --- | --- |
| <span data-ttu-id="6cfb7-113">ПОЛУЧЕНИЕ</span><span class="sxs-lookup"><span data-stu-id="6cfb7-113">GET</span></span> |<span data-ttu-id="6cfb7-114">https://{armendpoint}/subscriptions/{subId}/providers/Microsoft.Commerce/usageAggregates?reportedStartTime={reportedStartTime}&reportedEndTime={reportedEndTime}&aggregationGranularity={granularity}&api-version= 2015-06-01-preview & continuationToken = {значение маркера}</span><span class="sxs-lookup"><span data-stu-id="6cfb7-114">https://{armendpoint}/subscriptions/{subId}/providers/Microsoft.Commerce/usageAggregates?reportedStartTime={reportedStartTime}&reportedEndTime={reportedEndTime}&aggregationGranularity={granularity}&api-version=2015-06-01-preview&continuationToken={token-value}</span></span> |

### <a name="arguments"></a><span data-ttu-id="6cfb7-115">Аргументы</span><span class="sxs-lookup"><span data-stu-id="6cfb7-115">Arguments</span></span>
| <span data-ttu-id="6cfb7-116">**Аргумент**</span><span class="sxs-lookup"><span data-stu-id="6cfb7-116">**Argument**</span></span> | <span data-ttu-id="6cfb7-117">**Описание**</span><span class="sxs-lookup"><span data-stu-id="6cfb7-117">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="6cfb7-118">*Armendpoint*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-118">*Armendpoint*</span></span> |<span data-ttu-id="6cfb7-119">Конечная точка Azure диспетчер ресурсов среды Azure стека.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-119">Azure Resource Manager endpoint of your Azure Stack environment.</span></span> <span data-ttu-id="6cfb7-120">Hello соглашение стек Azure — имя этого hello диспетчера ресурсов Azure конечная точка находится в формате hello `https://management.{domain-name}`.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-120">hello Azure Stack convention is that hello name of Azure Resource Manager endpoint is in hello format `https://management.{domain-name}`.</span></span> <span data-ttu-id="6cfb7-121">Например, если hello доменное имя local.azurestack.external, то конечная точка диспетчера ресурсов hello `https://management.local.azurestack.external`.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-121">For example, if hello domain name is local.azurestack.external, then hello Resource Manager  endpoint is `https://management.local.azurestack.external`.</span></span> |
| <span data-ttu-id="6cfb7-122">*subId*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-122">*subId*</span></span> |<span data-ttu-id="6cfb7-123">Идентификатор подписки hello пользователя, который выполняет вызов hello.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-123">Subscription ID of hello user who is making hello call.</span></span> <span data-ttu-id="6cfb7-124">Для использования одной подписке можно использовать только tooquery этого API.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-124">You can use this API only tooquery for a single subscription’s usage.</span></span> <span data-ttu-id="6cfb7-125">Поставщики могут использовать использования tooquery hello API использования поставщика ресурсов для всех клиентов.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-125">Providers can use hello Provider Resource Usage API tooquery usage for all tenants.</span></span> |
| <span data-ttu-id="6cfb7-126">*reportedStartTime*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-126">*reportedStartTime*</span></span> |<span data-ttu-id="6cfb7-127">Запуск запроса hello.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-127">Start time of hello query.</span></span> <span data-ttu-id="6cfb7-128">Здравствуйте, значение для *DateTime* должно быть в формате UTC и в начале hello hello час, 13:00.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-128">hello value for *DateTime* should be in UTC and at hello beginning of hello hour, for example, 13:00.</span></span> <span data-ttu-id="6cfb7-129">Для ежедневного статистической обработки значение полуночи tooUTC это значение.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-129">For daily aggregation, set this value tooUTC midnight.</span></span> <span data-ttu-id="6cfb7-130">Формат Hello *escape-последовательность* ISO 8601, например, 2015-06-16T18% 3a53% 3a11% 2b00% 3a00Z, где двоеточие escape-последовательность слишком % 3a и плюс экранируется слишком 2b %, чтобы оно было понятное URI.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-130">hello format is *escaped* ISO 8601, for example, 2015-06-16T18%3a53%3a11%2b00%3a00Z, where colon is escaped too%3a and plus is escaped too%2b so that it is URI friendly.</span></span> |
| <span data-ttu-id="6cfb7-131">*reportedEndTime*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-131">*reportedEndTime*</span></span> |<span data-ttu-id="6cfb7-132">Время окончания запроса hello.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-132">End time of hello query.</span></span> <span data-ttu-id="6cfb7-133">Здравствуйте, ограничения, применяемые слишком*reportedStartTime* справедливы toothis аргумент.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-133">hello constraints that apply too*reportedStartTime* also apply toothis argument.</span></span> <span data-ttu-id="6cfb7-134">Здравствуйте, значение для *reportedEndTime* не может быть в будущем hello.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-134">hello value for *reportedEndTime* cannot be in hello future.</span></span> |
| <span data-ttu-id="6cfb7-135">*aggregationGranularity*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-135">*aggregationGranularity*</span></span> |<span data-ttu-id="6cfb7-136">Необязательный параметр, который имеет два дискретных возможные значения: дням или часам.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-136">Optional parameter that has two discrete potential values: daily and hourly.</span></span> <span data-ttu-id="6cfb7-137">Предложить значения hello, одно возвращает данные hello в дням и hello других является почасовой разрешение.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-137">As hello values suggest, one returns hello data in daily granularity, and hello other is an hourly resolution.</span></span> <span data-ttu-id="6cfb7-138">параметр ежедневной Hello — по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-138">hello daily option is hello default.</span></span> |
| <span data-ttu-id="6cfb7-139">*версия API*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-139">*api-version*</span></span> |<span data-ttu-id="6cfb7-140">Версия протокола hello, используемые toomake этого запроса.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-140">Version of hello protocol that is used toomake this request.</span></span> <span data-ttu-id="6cfb7-141">Необходимо использовать 2015-06-01-preview.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-141">You must use 2015-06-01-preview.</span></span> |
| <span data-ttu-id="6cfb7-142">*continuationToken*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-142">*continuationToken*</span></span> |<span data-ttu-id="6cfb7-143">Маркер извлекается из hello последнего вызова toohello использования API поставщика.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-143">Token retrieved from hello last call toohello Usage API provider.</span></span> <span data-ttu-id="6cfb7-144">Этот токен необходим в том случае, когда ответ больше 1 000 строк и он действует в качестве закладки для хода выполнения.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-144">This token is needed when a response is greater than 1,000 lines and it acts as a bookmark for progress.</span></span> <span data-ttu-id="6cfb7-145">Если он отсутствует, данные извлекаются из hello начало hello день или час, в зависимости от гранулярности hello, переданный приветствия.</span><span class="sxs-lookup"><span data-stu-id="6cfb7-145">If not present, hello data is retrieved from hello beginning of hello day or hour, based on hello granularity passed in.</span></span> |

### <a name="response"></a><span data-ttu-id="6cfb7-146">Ответ</span><span class="sxs-lookup"><span data-stu-id="6cfb7-146">Response</span></span>
<span data-ttu-id="6cfb7-147">ПОЛУЧИТЬ /subscriptions/sub1/providers/Microsoft.Commerce/UsageAggregates?reportedStartTime=reportedStartTime=2014-05-01T00%3a00%3a00%2b00%3a00 & reportedEndTime = 2015-06-01T00% 3a00% 3a00% 2b00% 3a00 & aggregationGranularity = ежедневно & api-version = 1,0</span><span class="sxs-lookup"><span data-stu-id="6cfb7-147">GET /subscriptions/sub1/providers/Microsoft.Commerce/UsageAggregates?reportedStartTime=reportedStartTime=2014-05-01T00%3a00%3a00%2b00%3a00&reportedEndTime=2015-06-01T00%3a00%3a00%2b00%3a00&aggregationGranularity=Daily&api-version=1.0</span></span>

<span data-ttu-id="6cfb7-148">{</span><span class="sxs-lookup"><span data-stu-id="6cfb7-148">{</span></span>

<span data-ttu-id="6cfb7-149">«значение»:\[</span><span class="sxs-lookup"><span data-stu-id="6cfb7-149">"value": \[</span></span>

<span data-ttu-id="6cfb7-150">{</span><span class="sxs-lookup"><span data-stu-id="6cfb7-150">{</span></span>

<span data-ttu-id="6cfb7-151">«Идентификатор»: «/ subscriptions/sub1/providers/Microsoft.Commerce/UsageAggregate/sub1-meterID1»,</span><span class="sxs-lookup"><span data-stu-id="6cfb7-151">"id": "/subscriptions/sub1/providers/Microsoft.Commerce/UsageAggregate/sub1-meterID1",</span></span>

<span data-ttu-id="6cfb7-152">«Имя»: «sub1-meterID1»</span><span class="sxs-lookup"><span data-stu-id="6cfb7-152">"name": "sub1-meterID1",</span></span>

<span data-ttu-id="6cfb7-153">«Тип»: «Microsoft.Commerce/UsageAggregate»</span><span class="sxs-lookup"><span data-stu-id="6cfb7-153">"type": "Microsoft.Commerce/UsageAggregate",</span></span>

<span data-ttu-id="6cfb7-154">"properties": {</span><span class="sxs-lookup"><span data-stu-id="6cfb7-154">"properties": {</span></span>

<span data-ttu-id="6cfb7-155">«subscriptionId»: «sub1»</span><span class="sxs-lookup"><span data-stu-id="6cfb7-155">"subscriptionId":"sub1",</span></span>

<span data-ttu-id="6cfb7-156">«usageStartTime»: «2015-03-03T00:00:00 + 00:00»,</span><span class="sxs-lookup"><span data-stu-id="6cfb7-156">"usageStartTime": "2015-03-03T00:00:00+00:00",</span></span>

<span data-ttu-id="6cfb7-157">«usageEndTime»: «2015-03-04T00:00:00 + 00:00»,</span><span class="sxs-lookup"><span data-stu-id="6cfb7-157">"usageEndTime": "2015-03-04T00:00:00+00:00",</span></span>

<span data-ttu-id="6cfb7-158">«instanceData»: «{\\» Microsoft.Resources\\»: {\\» resourceUri\\»:\\» resourceUri1\\»,\\«расположение\\»:\\«Аляска \\»,\\«теги\\«: null,\\» additionalInfo\\«: null}}»,</span><span class="sxs-lookup"><span data-stu-id="6cfb7-158">"instanceData":"{\\"Microsoft.Resources\\":{\\"resourceUri\\":\\"resourceUri1\\",\\"location\\":\\"Alaska\\",\\"tags\\":null,\\"additionalInfo\\":null}}",</span></span>

<span data-ttu-id="6cfb7-159">:2.4000000000 «quantity»</span><span class="sxs-lookup"><span data-stu-id="6cfb7-159">"quantity":2.4000000000,</span></span>

<span data-ttu-id="6cfb7-160">«meterId»: «meterID1»</span><span class="sxs-lookup"><span data-stu-id="6cfb7-160">"meterId":"meterID1"</span></span>

<span data-ttu-id="6cfb7-161">}</span><span class="sxs-lookup"><span data-stu-id="6cfb7-161">}</span></span>

<span data-ttu-id="6cfb7-162">},</span><span class="sxs-lookup"><span data-stu-id="6cfb7-162">},</span></span>

<span data-ttu-id="6cfb7-163">…</span><span class="sxs-lookup"><span data-stu-id="6cfb7-163">…</span></span>

### <a name="response-details"></a><span data-ttu-id="6cfb7-164">Сведения об ответе</span><span class="sxs-lookup"><span data-stu-id="6cfb7-164">Response details</span></span>
| <span data-ttu-id="6cfb7-165">**Аргумент**</span><span class="sxs-lookup"><span data-stu-id="6cfb7-165">**Argument**</span></span> | <span data-ttu-id="6cfb7-166">**Описание**</span><span class="sxs-lookup"><span data-stu-id="6cfb7-166">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="6cfb7-167">*id*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-167">*id*</span></span> |<span data-ttu-id="6cfb7-168">Уникальный идентификатор совокупное использование hello</span><span class="sxs-lookup"><span data-stu-id="6cfb7-168">Unique ID of hello usage aggregate</span></span> |
| <span data-ttu-id="6cfb7-169">*name*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-169">*name*</span></span> |<span data-ttu-id="6cfb7-170">Имя статистической использования hello</span><span class="sxs-lookup"><span data-stu-id="6cfb7-170">Name of hello usage aggregate</span></span> |
| <span data-ttu-id="6cfb7-171">*type*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-171">*type*</span></span> |<span data-ttu-id="6cfb7-172">Определение ресурсов</span><span class="sxs-lookup"><span data-stu-id="6cfb7-172">Resource definition</span></span> |
| <span data-ttu-id="6cfb7-173">*subscriptionId*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-173">*subscriptionId*</span></span> |<span data-ttu-id="6cfb7-174">Идентификатор подписки hello Azure пользователя</span><span class="sxs-lookup"><span data-stu-id="6cfb7-174">Subscription identifier of hello Azure user</span></span> |
| <span data-ttu-id="6cfb7-175">*usageStartTime*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-175">*usageStartTime*</span></span> |<span data-ttu-id="6cfb7-176">Время hello использование контейнеров toowhich, к которому относится это статистическое выражение использования начала UTC</span><span class="sxs-lookup"><span data-stu-id="6cfb7-176">UTC start time of hello usage bucket toowhich this usage aggregate belongs</span></span> |
| <span data-ttu-id="6cfb7-177">*usageEndTime*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-177">*usageEndTime*</span></span> |<span data-ttu-id="6cfb7-178">Время hello использование контейнеров toowhich, к которому относится это статистическое выражение использования завершения UTC</span><span class="sxs-lookup"><span data-stu-id="6cfb7-178">UTC end time of hello usage bucket toowhich this usage aggregate belongs</span></span> |
| <span data-ttu-id="6cfb7-179">*instanceData*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-179">*instanceData*</span></span> |<span data-ttu-id="6cfb7-180">Подробные сведения об экземпляре (в новом формате) пар ключ значение:</span><span class="sxs-lookup"><span data-stu-id="6cfb7-180">Key-value pairs of instance details (in a new format):</span></span><br>  <span data-ttu-id="6cfb7-181">*resourceUri*: полный идентификатор ресурса, включая группы ресурсов и имя экземпляра</span><span class="sxs-lookup"><span data-stu-id="6cfb7-181">*resourceUri*: Fully qualified resource ID, including resource groups and instance name</span></span> <br>  <span data-ttu-id="6cfb7-182">*расположение*: область, в котором эта служба была запущена</span><span class="sxs-lookup"><span data-stu-id="6cfb7-182">*location*: Region in which this service was run</span></span> <br>  <span data-ttu-id="6cfb7-183">*теги*: теги ресурсов этого пользователя hello указывает</span><span class="sxs-lookup"><span data-stu-id="6cfb7-183">*tags*: Resource tags that hello user specifies</span></span> <br>  <span data-ttu-id="6cfb7-184">*additionalInfo*: более подробные сведения о ресурсе hello, которое было получено, например, тип версии или образа ОС</span><span class="sxs-lookup"><span data-stu-id="6cfb7-184">*additionalInfo*: More details about hello resource that was consumed, for example, OS version or image type</span></span> |
| <span data-ttu-id="6cfb7-185">*количество*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-185">*quantity*</span></span> |<span data-ttu-id="6cfb7-186">Объем потребления ресурсов, возникшее в этот промежуток времени</span><span class="sxs-lookup"><span data-stu-id="6cfb7-186">Amount of resource consumption that occurred in this time frame</span></span> |
| <span data-ttu-id="6cfb7-187">*meterId*</span><span class="sxs-lookup"><span data-stu-id="6cfb7-187">*meterId*</span></span> |<span data-ttu-id="6cfb7-188">Уникальный идентификатор ресурса hello, которое было получено (также называемый *ResourceID*)</span><span class="sxs-lookup"><span data-stu-id="6cfb7-188">Unique ID for hello resource that was consumed (also called *ResourceID*)</span></span> |

## <a name="next-steps"></a><span data-ttu-id="6cfb7-189">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="6cfb7-189">Next steps</span></span>
[<span data-ttu-id="6cfb7-190">API использования ресурсов для поставщиков</span><span class="sxs-lookup"><span data-stu-id="6cfb7-190">Provider resource usage API</span></span>](azure-stack-provider-resource-api.md)

[<span data-ttu-id="6cfb7-191">Часто задаваемые вопросы, относящиеся к использованию</span><span class="sxs-lookup"><span data-stu-id="6cfb7-191">Usage-related FAQ</span></span>](azure-stack-usage-related-faq.md)

