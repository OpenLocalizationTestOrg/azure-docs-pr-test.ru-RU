---
title: "DNS-сервер в стек Azure | Документы Microsoft"
description: "DNS в Azure Stack"
services: azure-stack
documentationcenter: 
author: ScottNapolitan
manager: byronr
editor: 
ms.assetid: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/27/2017
ms.author: victorh
ms.openlocfilehash: 61a9955c5ee65ccbe9a8231fa394eab01cda584f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="dns-in-azure-stack"></a><span data-ttu-id="53def-103">DNS в Azure Stack</span><span class="sxs-lookup"><span data-stu-id="53def-103">DNS in Azure Stack</span></span>
<span data-ttu-id="53def-104">Стек Azure включает следующие компоненты DNS.</span><span class="sxs-lookup"><span data-stu-id="53def-104">Azure Stack includes the following DNS features:</span></span>
* <span data-ttu-id="53def-105">Поддержка разрешения имени узла DNS</span><span class="sxs-lookup"><span data-stu-id="53def-105">Support for DNS hostname resolution</span></span>
* <span data-ttu-id="53def-106">Создание и управление ими зон DNS и записей с помощью API</span><span class="sxs-lookup"><span data-stu-id="53def-106">Create and manage DNS zones and records using API</span></span>

## <a name="support-for-dns-hostname-resolution"></a><span data-ttu-id="53def-107">Поддержка разрешения имени узла DNS</span><span class="sxs-lookup"><span data-stu-id="53def-107">Support for DNS hostname resolution</span></span>
<span data-ttu-id="53def-108">Можно указать метка DNS-имени домена для открытого IP ресурса, который создает сопоставление для *domainnamelabel.location*. cloudapp.azurestack.external общедоступный IP-адрес в стеке Azure управляемых DNS-серверов.</span><span class="sxs-lookup"><span data-stu-id="53def-108">You can specify a DNS domain name label for a public IP resource, which creates a mapping for *domainnamelabel.location*.cloudapp.azurestack.external to the public IP address in the Azure Stack managed DNS servers.</span></span>  

<span data-ttu-id="53def-109">Например, если создать открытый IP ресурс с **contoso** как метка доменного имени в расположение локального Azure стека, полное доменное имя (FQDN) **contoso.local.cloudapp.azurestack.external**устраняет общедоступный IP-адрес ресурса.</span><span class="sxs-lookup"><span data-stu-id="53def-109">For example, if you create a public IP resource with **contoso** as a domain name label in the Local Azure Stack location, the fully qualified domain name (FQDN) **contoso.local.cloudapp.azurestack.external** resolves to the public IP address of the resource.</span></span> <span data-ttu-id="53def-110">Это полное доменное имя можно использовать для создания пользовательского домена CNAME, которая указывает на общедоступный IP-адрес в стеке Azure.</span><span class="sxs-lookup"><span data-stu-id="53def-110">You can use this FQDN to create a custom domain CNAME record that points to the public IP address in Azure Stack.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="53def-111">Каждая метка доменного имени, которая создана должно быть уникальным в пределах его расположение стека Azure.</span><span class="sxs-lookup"><span data-stu-id="53def-111">Each domain name label created must be unique within its Azure Stack location.</span></span>

<span data-ttu-id="53def-112">При создании общедоступный IP-адрес, на портале, она выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="53def-112">If you create the public IP address using the portal, it looks like this:</span></span>

![Создание общедоступного IP-адреса](media/azure-stack-whats-new-dns/image01.png)

<span data-ttu-id="53def-114">Такая конфигурация удобна, если вы хотите связать общедоступный IP-адрес с балансировкой нагрузки ресурса.</span><span class="sxs-lookup"><span data-stu-id="53def-114">This configuration is useful if you want to associate a public IP address with a load-balanced resource.</span></span> <span data-ttu-id="53def-115">Например может потребоваться балансировки нагрузки, обработку запросов от веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="53def-115">For example, you might have a load balancer processing requests from a web application.</span></span> <span data-ttu-id="53def-116">За нагрузки вполне веб-сайта, расположенные на один или несколько виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="53def-116">Behind the load balancer is a web site located  on one or more virtual machines.</span></span> <span data-ttu-id="53def-117">Теперь можно открыть веб-узла балансировки нагрузки по DNS-имени, а не по IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="53def-117">Now you can access the load-balanced web site by a DNS name, rather than by an IP address.</span></span>

## <a name="create-and-manage-dns-zones-and-records-using-api"></a><span data-ttu-id="53def-118">Создание и управление ими зон DNS и записей с помощью API</span><span class="sxs-lookup"><span data-stu-id="53def-118">Create and manage DNS zones and records using API</span></span>
<span data-ttu-id="53def-119">Можно создать и управлять зон DNS и записей в Azure стека.</span><span class="sxs-lookup"><span data-stu-id="53def-119">You can create and manage DNS zones and records in Azure Stack.</span></span>  

<span data-ttu-id="53def-120">Стек Azure предоставляет службу DNS, таких как Azure, с помощью API-интерфейсы, согласованные с Azure DNS API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="53def-120">Azure Stack provides a DNS service like Azure’s, using APIs that are consistent with Azure’s DNS APIs.</span></span>  <span data-ttu-id="53def-121">Путем размещения доменов в Azure DNS стека, DNS-записей с учетными данными, API-интерфейсы, средства, выставления счетов и поддержки можно управлять как других служб Azure.</span><span class="sxs-lookup"><span data-stu-id="53def-121">By hosting your domains in Azure Stack DNS, you can manage your DNS records with the same credentials, APIs, tools, billing, and support as your other Azure services.</span></span> 

<span data-ttu-id="53def-122">В целях очевидным инфраструктуры DNS Azure стека меньше места, чем в Azure.</span><span class="sxs-lookup"><span data-stu-id="53def-122">For obvious reasons, the Azure Stack DNS infrastructure is more compact than Azure's.</span></span> <span data-ttu-id="53def-123">Таким образом области, масштабирования и производительности зависят от масштаба развертывания Azure стека и среды, в которых она развернута.</span><span class="sxs-lookup"><span data-stu-id="53def-123">Thus, the scope, scale, and performance depend on the scale of the Azure Stack deployment and the environment where it is deployed.</span></span>  <span data-ttu-id="53def-124">Таким образом например производительности, доступности, глобальные распространения и высокого уровня доступности (HA) может отличаться от развертывания для развертывания.</span><span class="sxs-lookup"><span data-stu-id="53def-124">So, things like performance, availability, global distribution, and High-Availability (HA) can vary from deployment to deployment.</span></span>

## <a name="comparison-with-azure-dns"></a><span data-ttu-id="53def-125">Сравнение с Azure DNS</span><span class="sxs-lookup"><span data-stu-id="53def-125">Comparison with Azure DNS</span></span>
<span data-ttu-id="53def-126">DNS-сервер в Azure стека похожа на DNS-сервер в Azure, с двумя главными исключениями:</span><span class="sxs-lookup"><span data-stu-id="53def-126">DNS in Azure Stack is similar to DNS in Azure, with two major exceptions:</span></span>
* <span data-ttu-id="53def-127">**Не поддерживает записи AAAA**</span><span class="sxs-lookup"><span data-stu-id="53def-127">**It does not support AAAA records**</span></span>

    <span data-ttu-id="53def-128">Стек Azure не поддерживает записи AAAA, поскольку стек Azure не поддерживает адреса IPv6.</span><span class="sxs-lookup"><span data-stu-id="53def-128">Azure Stack does NOT support AAAA records because Azure Stack does not support IPv6 addresses.</span></span>  <span data-ttu-id="53def-129">Это ключевое различие между DNS-сервер в Azure и Azure стека.</span><span class="sxs-lookup"><span data-stu-id="53def-129">This is a key difference between DNS in Azure and Azure Stack.</span></span>
* <span data-ttu-id="53def-130">**Не является мультитенантной**</span><span class="sxs-lookup"><span data-stu-id="53def-130">**It is not multi-tenant**</span></span>

    <span data-ttu-id="53def-131">В отличие от Azure служба DNS Azure стека не несколькими клиентами.</span><span class="sxs-lookup"><span data-stu-id="53def-131">Unlike Azure, the DNS Service in Azure Stack is not multi-tenant.</span></span> <span data-ttu-id="53def-132">Поэтому каждый клиент не удается создать же зоны DNS.</span><span class="sxs-lookup"><span data-stu-id="53def-132">So each tenant cannot create the same DNS zone.</span></span> <span data-ttu-id="53def-133">Первую подписку, которая пытается создать зону завершается успешно и последующие запросы с ошибкой.</span><span class="sxs-lookup"><span data-stu-id="53def-133">Only the first subscription that attempts to create the zone succeeds, and subsequent requests fail.</span></span>  <span data-ttu-id="53def-134">Это известная проблема и основное отличие между Azure и Azure DNS стека.</span><span class="sxs-lookup"><span data-stu-id="53def-134">It is a known issue, and a key difference between Azure and Azure Stack DNS.</span></span> <span data-ttu-id="53def-135">Эта проблема будет устранена в будущих выпусках.</span><span class="sxs-lookup"><span data-stu-id="53def-135">This issue will be resolved in a future release.</span></span>

<span data-ttu-id="53def-136">Кроме того существуют некоторые незначительные различия в как стек DNS Azure реализует теги, метаданные, теги eTag и ограничения.</span><span class="sxs-lookup"><span data-stu-id="53def-136">In addition, there are some minor differences in how Azure Stack DNS implements Tags, Metadata, Etags, and Limits.</span></span>

<span data-ttu-id="53def-137">Следующие сведения относятся к DNS Azure стека и немного отличается от Azure DNS.</span><span class="sxs-lookup"><span data-stu-id="53def-137">The following information applies specifically to Azure Stack DNS and varies slightly from Azure DNS.</span></span> <span data-ttu-id="53def-138">Дополнительные сведения о Azure DNS см. в разделе [DNS-зоны и записывает](../dns/dns-zones-records.md) на сайте документации Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="53def-138">To learn more about Azure DNS, see [DNS zones and records](../dns/dns-zones-records.md) at the Microsoft Azure documentation site.</span></span>

### <a name="tags-metadata-and-etags"></a><span data-ttu-id="53def-139">Метки, метаданных и теги eTag</span><span class="sxs-lookup"><span data-stu-id="53def-139">Tags, metadata, and Etags</span></span>

<span data-ttu-id="53def-140">**Теги**</span><span class="sxs-lookup"><span data-stu-id="53def-140">**Tags**</span></span>

<span data-ttu-id="53def-141">Azure DNS стека поддерживает, с помощью диспетчера ресурсов Azure тегов в ресурсы зоны DNS.</span><span class="sxs-lookup"><span data-stu-id="53def-141">Azure Stack DNS supports using Azure Resource Manager tags on DNS zone resources.</span></span> <span data-ttu-id="53def-142">Она поддерживает теги на наборы записей DNS, несмотря на то, что задает как альтернатива «metadata» поддерживается в запись DNS, как описано далее.</span><span class="sxs-lookup"><span data-stu-id="53def-142">It does not support tags on DNS record sets, although as an alternative 'metadata' is supported on DNS record sets as explained next.</span></span>

<span data-ttu-id="53def-143">**Metadata**</span><span class="sxs-lookup"><span data-stu-id="53def-143">**Metadata**</span></span>

<span data-ttu-id="53def-144">В качестве альтернативы тегами набора записей DNS стек Azure поддерживает аннотации наборы записей с помощью «metadata».</span><span class="sxs-lookup"><span data-stu-id="53def-144">As an alternative to record set tags, Azure Stack DNS supports annotating record sets using 'metadata'.</span></span> <span data-ttu-id="53def-145">Так же как и теги, метаданные позволяют связывать пары "имя — значение" с каждым набором записей.</span><span class="sxs-lookup"><span data-stu-id="53def-145">Similar to tags, metadata enables you to associate name-value pairs with each record set.</span></span> <span data-ttu-id="53def-146">Например это может быть полезно для записи назначение каждого набора записей.</span><span class="sxs-lookup"><span data-stu-id="53def-146">For example, this can be useful to record the purpose of each record set.</span></span> <span data-ttu-id="53def-147">В отличие от тегов метаданные нельзя использовать, чтобы обеспечить отфильтрованное представление счетов Azure, и указывать в политике Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="53def-147">Unlike tags, metadata cannot be used to provide a filtered view of your Azure bill and cannot be specified in an Azure Resource Manager policy.</span></span>

<span data-ttu-id="53def-148">**Теги eTag**</span><span class="sxs-lookup"><span data-stu-id="53def-148">**Etags**</span></span>

<span data-ttu-id="53def-149">Предположим, что два человека или два процесса пробуют изменить запись DNS одновременно.</span><span class="sxs-lookup"><span data-stu-id="53def-149">Suppose two people or two processes try to modify a DNS record at the same time.</span></span> <span data-ttu-id="53def-150">У какого из них это получится?</span><span class="sxs-lookup"><span data-stu-id="53def-150">Which one wins?</span></span> <span data-ttu-id="53def-151">И будет ли этот человек или процесс знать, что они заменили изменения кого-то другого?</span><span class="sxs-lookup"><span data-stu-id="53def-151">And does the winner know that they've overwritten changes created by someone else?</span></span>

<span data-ttu-id="53def-152">Azure DNS стека использует теги eTag для обработки параллельных изменений к тому же ресурсу безопасно.</span><span class="sxs-lookup"><span data-stu-id="53def-152">Azure Stack DNS uses Etags to handle concurrent changes to the same resource safely.</span></span> <span data-ttu-id="53def-153">Теги eTag, отделены от диспетчера ресурсов Azure «Теги».</span><span class="sxs-lookup"><span data-stu-id="53def-153">Etags are separate from Azure Resource Manager 'Tags'.</span></span> <span data-ttu-id="53def-154">С каждым ресурсом DNS (зоной или набором записей) связан Etag.</span><span class="sxs-lookup"><span data-stu-id="53def-154">Each DNS resource (zone or record set) has an Etag associated with it.</span></span> <span data-ttu-id="53def-155">При извлечении ресурса также передается его значение Etag.</span><span class="sxs-lookup"><span data-stu-id="53def-155">Whenever a resource is retrieved, its Etag is also retrieved.</span></span> <span data-ttu-id="53def-156">При обновлении ресурса, можно передать обратно Etag, стек DNS Azure можно убедиться, что Etag соответствует сервера.</span><span class="sxs-lookup"><span data-stu-id="53def-156">When updating a resource, you can choose to pass back the Etag so Azure Stack DNS can verify that the Etag on the server matches.</span></span> <span data-ttu-id="53def-157">Так как каждое обновление ресурса приводит к повторному созданию Etag, несовпадение Etag указывает на параллельное изменение.</span><span class="sxs-lookup"><span data-stu-id="53def-157">Since each update to a resource results in the Etag being regenerated, an Etag mismatch indicates a concurrent change has occurred.</span></span> <span data-ttu-id="53def-158">Теги Etag можно также использовать при создании ресурса для проверки того, что ресурс не существует.</span><span class="sxs-lookup"><span data-stu-id="53def-158">Etags can also be used when creating a new resource to ensure that the resource does not already exist.</span></span>

<span data-ttu-id="53def-159">По умолчанию DNS стек Azure PowerShell использует теги eTag блокирования одновременных изменений зоны и наборы записей.</span><span class="sxs-lookup"><span data-stu-id="53def-159">By default, Azure Stack DNS PowerShell uses Etags to block concurrent changes to zones and record sets.</span></span> <span data-ttu-id="53def-160">С помощью необязательного параметра *-Overwrite* можно отключить проверки тегов Etag. В этом случае все одновременные изменения перезаписываются.</span><span class="sxs-lookup"><span data-stu-id="53def-160">The optional *-Overwrite* switch can be used to suppress Etag checks, in which case any concurrent changes that have occurred are overwritten.</span></span>

<span data-ttu-id="53def-161">На уровне API REST Azure DNS стека теги eTag задаются с помощью заголовков HTTP.</span><span class="sxs-lookup"><span data-stu-id="53def-161">At the level of the Azure Stack DNS REST API, Etags are specified using HTTP headers.</span></span> <span data-ttu-id="53def-162">Их поведение описывается в следующей таблице:</span><span class="sxs-lookup"><span data-stu-id="53def-162">Their behavior is given in the following table:</span></span>

| <span data-ttu-id="53def-163">Заголовок</span><span class="sxs-lookup"><span data-stu-id="53def-163">Header</span></span> | <span data-ttu-id="53def-164">Поведение</span><span class="sxs-lookup"><span data-stu-id="53def-164">Behavior</span></span>|
|--------|---------|
| <span data-ttu-id="53def-165">None</span><span class="sxs-lookup"><span data-stu-id="53def-165">None</span></span>   | <span data-ttu-id="53def-166">PUT всегда завершается успешно (без проверки Etag)</span><span class="sxs-lookup"><span data-stu-id="53def-166">PUT always succeeds (no Etag checks)</span></span>|
| <span data-ttu-id="53def-167">IF-match</span><span class="sxs-lookup"><span data-stu-id="53def-167">If-match</span></span>| <span data-ttu-id="53def-168">PUT завершается успешно, только если ресурс существует и Etag соответствует</span><span class="sxs-lookup"><span data-stu-id="53def-168">PUT only succeeds if resource exists and Etag matches</span></span>|
| <span data-ttu-id="53def-169">If-match *</span><span class="sxs-lookup"><span data-stu-id="53def-169">If-match *</span></span>| <span data-ttu-id="53def-170">PUT завершается успешно, только если ресурс существует</span><span class="sxs-lookup"><span data-stu-id="53def-170">PUT only succeeds if resource exists</span></span>|
| <span data-ttu-id="53def-171">If-none-match*</span><span class="sxs-lookup"><span data-stu-id="53def-171">If-none-match *</span></span>| <span data-ttu-id="53def-172">PUT завершается успешно, только если ресурс не существует</span><span class="sxs-lookup"><span data-stu-id="53def-172">PUT only succeeds if resource does not exist</span></span>|

### <a name="limits"></a><span data-ttu-id="53def-173">Ограничения</span><span class="sxs-lookup"><span data-stu-id="53def-173">Limits</span></span>

<span data-ttu-id="53def-174">При использовании DNS Azure стека налагаются следующие ограничения по умолчанию:</span><span class="sxs-lookup"><span data-stu-id="53def-174">The following default limits apply when using Azure Stack DNS:</span></span>

| <span data-ttu-id="53def-175">Ресурс</span><span class="sxs-lookup"><span data-stu-id="53def-175">Resource</span></span>| <span data-ttu-id="53def-176">Ограничение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="53def-176">Default limit</span></span>|
|---------|--------------|
| <span data-ttu-id="53def-177">Зон на подписку</span><span class="sxs-lookup"><span data-stu-id="53def-177">Zones per subscription</span></span>| <span data-ttu-id="53def-178">100</span><span class="sxs-lookup"><span data-stu-id="53def-178">100</span></span>|
| <span data-ttu-id="53def-179">Наборов записей на зону</span><span class="sxs-lookup"><span data-stu-id="53def-179">Record sets per zone</span></span>| <span data-ttu-id="53def-180">5000</span><span class="sxs-lookup"><span data-stu-id="53def-180">5000</span></span>|
| <span data-ttu-id="53def-181">Записей на набор записей</span><span class="sxs-lookup"><span data-stu-id="53def-181">Records per record set</span></span>| <span data-ttu-id="53def-182">20</span><span class="sxs-lookup"><span data-stu-id="53def-182">20</span></span>|

## <a name="next-steps"></a><span data-ttu-id="53def-183">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="53def-183">Next steps</span></span>
[<span data-ttu-id="53def-184">Общие сведения о имена IDN для стек Azure</span><span class="sxs-lookup"><span data-stu-id="53def-184">Introducing iDNS for Azure Stack</span></span>](azure-stack-understanding-dns.md)
