---
title: "aaaDNS стека Azure | Документы Microsoft"
description: "DNS в Azure Stack"
services: azure-stack
documentationcenter: 
author: ScottNapolitan
manager: byronr
editor: 
ms.assetid: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/27/2017
ms.author: victorh
ms.openlocfilehash: 8620178833ac29e9653cce332b7c5d89bbdea0af
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="dns-in-azure-stack"></a><span data-ttu-id="729c0-103">DNS в Azure Stack</span><span class="sxs-lookup"><span data-stu-id="729c0-103">DNS in Azure Stack</span></span>
<span data-ttu-id="729c0-104">Стек Azure включает следующие атрибуты DNS hello.</span><span class="sxs-lookup"><span data-stu-id="729c0-104">Azure Stack includes hello following DNS features:</span></span>
* <span data-ttu-id="729c0-105">Поддержка разрешения имени узла DNS</span><span class="sxs-lookup"><span data-stu-id="729c0-105">Support for DNS hostname resolution</span></span>
* <span data-ttu-id="729c0-106">Создание и управление ими зон DNS и записей с помощью API</span><span class="sxs-lookup"><span data-stu-id="729c0-106">Create and manage DNS zones and records using API</span></span>

## <a name="support-for-dns-hostname-resolution"></a><span data-ttu-id="729c0-107">Поддержка разрешения имени узла DNS</span><span class="sxs-lookup"><span data-stu-id="729c0-107">Support for DNS hostname resolution</span></span>
<span data-ttu-id="729c0-108">Можно указать метка DNS-имени домена для открытого IP ресурса, который создает сопоставление для *domainnamelabel.location*. cloudapp.azurestack.external toohello общедоступный IP-адрес в hello Azure стека управляемых DNS-серверов.</span><span class="sxs-lookup"><span data-stu-id="729c0-108">You can specify a DNS domain name label for a public IP resource, which creates a mapping for *domainnamelabel.location*.cloudapp.azurestack.external toohello public IP address in hello Azure Stack managed DNS servers.</span></span>  

<span data-ttu-id="729c0-109">Например, если создать открытый IP ресурс с **contoso** как метка доменного имени в расположение локального стека Azure hello, hello полное доменное имя (FQDN) **contoso.local.cloudapp.azurestack.external** разрешает toohello общедоступный IP-адрес ресурса hello.</span><span class="sxs-lookup"><span data-stu-id="729c0-109">For example, if you create a public IP resource with **contoso** as a domain name label in hello Local Azure Stack location, hello fully qualified domain name (FQDN) **contoso.local.cloudapp.azurestack.external** resolves toohello public IP address of hello resource.</span></span> <span data-ttu-id="729c0-110">Можно использовать этот toocreate полное доменное имя пользовательского домена CNAME, указывающую toohello общедоступный IP-адрес в стеке Azure.</span><span class="sxs-lookup"><span data-stu-id="729c0-110">You can use this FQDN toocreate a custom domain CNAME record that points toohello public IP address in Azure Stack.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="729c0-111">Каждая метка доменного имени, которая создана должно быть уникальным в пределах его расположение стека Azure.</span><span class="sxs-lookup"><span data-stu-id="729c0-111">Each domain name label created must be unique within its Azure Stack location.</span></span>

<span data-ttu-id="729c0-112">Если вы создаете hello общедоступный IP-адрес с помощью портала hello, он выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="729c0-112">If you create hello public IP address using hello portal, it looks like this:</span></span>

![Создание общедоступного IP-адреса](media/azure-stack-whats-new-dns/image01.png)

<span data-ttu-id="729c0-114">Такая конфигурация удобна, если требуется, чтобы tooassociate общедоступный IP-адрес с балансировкой нагрузки ресурсом.</span><span class="sxs-lookup"><span data-stu-id="729c0-114">This configuration is useful if you want tooassociate a public IP address with a load-balanced resource.</span></span> <span data-ttu-id="729c0-115">Например может потребоваться балансировки нагрузки, обработку запросов от веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="729c0-115">For example, you might have a load balancer processing requests from a web application.</span></span> <span data-ttu-id="729c0-116">За hello нагрузки вполне веб-сайта, расположенные на один или несколько виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="729c0-116">Behind hello load balancer is a web site located  on one or more virtual machines.</span></span> <span data-ttu-id="729c0-117">Теперь можно открыть hello балансировки нагрузки веб-сайта по DNS-имени, а не по IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="729c0-117">Now you can access hello load-balanced web site by a DNS name, rather than by an IP address.</span></span>

## <a name="create-and-manage-dns-zones-and-records-using-api"></a><span data-ttu-id="729c0-118">Создание и управление ими зон DNS и записей с помощью API</span><span class="sxs-lookup"><span data-stu-id="729c0-118">Create and manage DNS zones and records using API</span></span>
<span data-ttu-id="729c0-119">Можно создать и управлять зон DNS и записей в Azure стека.</span><span class="sxs-lookup"><span data-stu-id="729c0-119">You can create and manage DNS zones and records in Azure Stack.</span></span>  

<span data-ttu-id="729c0-120">Стек Azure предоставляет службу DNS, таких как Azure, с помощью API-интерфейсы, согласованные с Azure DNS API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="729c0-120">Azure Stack provides a DNS service like Azure’s, using APIs that are consistent with Azure’s DNS APIs.</span></span>  <span data-ttu-id="729c0-121">Путем размещения доменов в Azure DNS стека, можно управлять записи DNS с hello учетные данные, API-интерфейсы, средства, выставления счетов и поддержки других служб Azure.</span><span class="sxs-lookup"><span data-stu-id="729c0-121">By hosting your domains in Azure Stack DNS, you can manage your DNS records with hello same credentials, APIs, tools, billing, and support as your other Azure services.</span></span> 

<span data-ttu-id="729c0-122">В целях очевидным инфраструктуры DNS Azure стека hello меньше места, чем в Azure.</span><span class="sxs-lookup"><span data-stu-id="729c0-122">For obvious reasons, hello Azure Stack DNS infrastructure is more compact than Azure's.</span></span> <span data-ttu-id="729c0-123">Таким образом hello области, масштабирования и производительности зависят от масштаба hello развертывания Azure стека hello и hello среде, где он будет развернут.</span><span class="sxs-lookup"><span data-stu-id="729c0-123">Thus, hello scope, scale, and performance depend on hello scale of hello Azure Stack deployment and hello environment where it is deployed.</span></span>  <span data-ttu-id="729c0-124">Таким образом такие как производительности, доступности, глобальные распространения и высокого уровня доступности (HA) может отличаться от toodeployment развертывания.</span><span class="sxs-lookup"><span data-stu-id="729c0-124">So, things like performance, availability, global distribution, and High-Availability (HA) can vary from deployment toodeployment.</span></span>

## <a name="comparison-with-azure-dns"></a><span data-ttu-id="729c0-125">Сравнение с Azure DNS</span><span class="sxs-lookup"><span data-stu-id="729c0-125">Comparison with Azure DNS</span></span>
<span data-ttu-id="729c0-126">DNS-сервер в стек Azure — аналогично tooDNS в Azure, с двумя главными исключениями:</span><span class="sxs-lookup"><span data-stu-id="729c0-126">DNS in Azure Stack is similar tooDNS in Azure, with two major exceptions:</span></span>
* <span data-ttu-id="729c0-127">**Не поддерживает записи AAAA**</span><span class="sxs-lookup"><span data-stu-id="729c0-127">**It does not support AAAA records**</span></span>

    <span data-ttu-id="729c0-128">Стек Azure не поддерживает записи AAAA, поскольку стек Azure не поддерживает адреса IPv6.</span><span class="sxs-lookup"><span data-stu-id="729c0-128">Azure Stack does NOT support AAAA records because Azure Stack does not support IPv6 addresses.</span></span>  <span data-ttu-id="729c0-129">Это ключевое различие между DNS-сервер в Azure и Azure стека.</span><span class="sxs-lookup"><span data-stu-id="729c0-129">This is a key difference between DNS in Azure and Azure Stack.</span></span>
* <span data-ttu-id="729c0-130">**Не является мультитенантной**</span><span class="sxs-lookup"><span data-stu-id="729c0-130">**It is not multi-tenant**</span></span>

    <span data-ttu-id="729c0-131">В отличие от Azure служба DNS Azure стека hello не несколькими клиентами.</span><span class="sxs-lookup"><span data-stu-id="729c0-131">Unlike Azure, hello DNS Service in Azure Stack is not multi-tenant.</span></span> <span data-ttu-id="729c0-132">Поэтому каждому клиенту не удается создать hello таким же зоны DNS.</span><span class="sxs-lookup"><span data-stu-id="729c0-132">So each tenant cannot create hello same DNS zone.</span></span> <span data-ttu-id="729c0-133">Выполняется успешно только hello первую подписку, которую пытается выполнить toocreate hello зоны и последующие запросы с ошибкой.</span><span class="sxs-lookup"><span data-stu-id="729c0-133">Only hello first subscription that attempts toocreate hello zone succeeds, and subsequent requests fail.</span></span>  <span data-ttu-id="729c0-134">Это известная проблема и основное отличие между Azure и Azure DNS стека.</span><span class="sxs-lookup"><span data-stu-id="729c0-134">It is a known issue, and a key difference between Azure and Azure Stack DNS.</span></span> <span data-ttu-id="729c0-135">Эта проблема будет устранена в будущих выпусках.</span><span class="sxs-lookup"><span data-stu-id="729c0-135">This issue will be resolved in a future release.</span></span>

<span data-ttu-id="729c0-136">Кроме того существуют некоторые незначительные различия в как стек DNS Azure реализует теги, метаданные, теги eTag и ограничения.</span><span class="sxs-lookup"><span data-stu-id="729c0-136">In addition, there are some minor differences in how Azure Stack DNS implements Tags, Metadata, Etags, and Limits.</span></span>

<span data-ttu-id="729c0-137">Hello следующие сведения относятся специально tooAzure стека DNS и немного отличается от Azure DNS.</span><span class="sxs-lookup"><span data-stu-id="729c0-137">hello following information applies specifically tooAzure Stack DNS and varies slightly from Azure DNS.</span></span> <span data-ttu-id="729c0-138">toolearn Дополнительные сведения о Azure DNS в разделе [DNS-зоны и записывает](../dns/dns-zones-records.md) на сайте документации Microsoft Azure hello.</span><span class="sxs-lookup"><span data-stu-id="729c0-138">toolearn more about Azure DNS, see [DNS zones and records](../dns/dns-zones-records.md) at hello Microsoft Azure documentation site.</span></span>

### <a name="tags-metadata-and-etags"></a><span data-ttu-id="729c0-139">Метки, метаданных и теги eTag</span><span class="sxs-lookup"><span data-stu-id="729c0-139">Tags, metadata, and Etags</span></span>

<span data-ttu-id="729c0-140">**Теги**</span><span class="sxs-lookup"><span data-stu-id="729c0-140">**Tags**</span></span>

<span data-ttu-id="729c0-141">Azure DNS стека поддерживает, с помощью диспетчера ресурсов Azure тегов в ресурсы зоны DNS.</span><span class="sxs-lookup"><span data-stu-id="729c0-141">Azure Stack DNS supports using Azure Resource Manager tags on DNS zone resources.</span></span> <span data-ttu-id="729c0-142">Она поддерживает теги на наборы записей DNS, несмотря на то, что задает как альтернатива «metadata» поддерживается в запись DNS, как описано далее.</span><span class="sxs-lookup"><span data-stu-id="729c0-142">It does not support tags on DNS record sets, although as an alternative 'metadata' is supported on DNS record sets as explained next.</span></span>

<span data-ttu-id="729c0-143">**Metadata**</span><span class="sxs-lookup"><span data-stu-id="729c0-143">**Metadata**</span></span>

<span data-ttu-id="729c0-144">Как альтернативный toorecord набор тегов, стек DNS Azure поддерживает аннотации наборы записей с помощью «metadata».</span><span class="sxs-lookup"><span data-stu-id="729c0-144">As an alternative toorecord set tags, Azure Stack DNS supports annotating record sets using 'metadata'.</span></span> <span data-ttu-id="729c0-145">Аналогичные tootags метаданные позволяют вам tooassociate пар имя значение с каждым набором записей.</span><span class="sxs-lookup"><span data-stu-id="729c0-145">Similar tootags, metadata enables you tooassociate name-value pairs with each record set.</span></span> <span data-ttu-id="729c0-146">Например это может быть полезным toorecord hello назначение каждого набора записей.</span><span class="sxs-lookup"><span data-stu-id="729c0-146">For example, this can be useful toorecord hello purpose of each record set.</span></span> <span data-ttu-id="729c0-147">В отличие от тегов метаданных не может быть используется tooprovide отфильтрованное представление счете Azure и не может указываться в политике диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="729c0-147">Unlike tags, metadata cannot be used tooprovide a filtered view of your Azure bill and cannot be specified in an Azure Resource Manager policy.</span></span>

<span data-ttu-id="729c0-148">**Теги eTag**</span><span class="sxs-lookup"><span data-stu-id="729c0-148">**Etags**</span></span>

<span data-ttu-id="729c0-149">Предположим, что два человека или два процесса повторите toomodify записи DNS на hello же время.</span><span class="sxs-lookup"><span data-stu-id="729c0-149">Suppose two people or two processes try toomodify a DNS record at hello same time.</span></span> <span data-ttu-id="729c0-150">У какого из них это получится?</span><span class="sxs-lookup"><span data-stu-id="729c0-150">Which one wins?</span></span> <span data-ttu-id="729c0-151">И победителя hello узнает, что они перезаписываете изменения, созданные другим пользователем?</span><span class="sxs-lookup"><span data-stu-id="729c0-151">And does hello winner know that they've overwritten changes created by someone else?</span></span>

<span data-ttu-id="729c0-152">Теги eTag toohandle параллельных изменений toohello использует Azure DNS стека того же ресурса безопасно.</span><span class="sxs-lookup"><span data-stu-id="729c0-152">Azure Stack DNS uses Etags toohandle concurrent changes toohello same resource safely.</span></span> <span data-ttu-id="729c0-153">Теги eTag, отделены от диспетчера ресурсов Azure «Теги».</span><span class="sxs-lookup"><span data-stu-id="729c0-153">Etags are separate from Azure Resource Manager 'Tags'.</span></span> <span data-ttu-id="729c0-154">С каждым ресурсом DNS (зоной или набором записей) связан Etag.</span><span class="sxs-lookup"><span data-stu-id="729c0-154">Each DNS resource (zone or record set) has an Etag associated with it.</span></span> <span data-ttu-id="729c0-155">При извлечении ресурса также передается его значение Etag.</span><span class="sxs-lookup"><span data-stu-id="729c0-155">Whenever a resource is retrieved, its Etag is also retrieved.</span></span> <span data-ttu-id="729c0-156">При обновлении ресурса, можно выбрать, что toopass обратно hello Etag, поэтому стека DNS Azure можно проверить, что hello Etag в соответствует идентификатору сервера hello.</span><span class="sxs-lookup"><span data-stu-id="729c0-156">When updating a resource, you can choose toopass back hello Etag so Azure Stack DNS can verify that hello Etag on hello server matches.</span></span> <span data-ttu-id="729c0-157">Поскольку каждый ресурс tooa обновление приводит к hello Etag создаются заново, несоответствие Etag указывает, что в параллельных произошло изменение.</span><span class="sxs-lookup"><span data-stu-id="729c0-157">Since each update tooa resource results in hello Etag being regenerated, an Etag mismatch indicates a concurrent change has occurred.</span></span> <span data-ttu-id="729c0-158">Также можно использовать теги eTag, при создании нового ресурса tooensure, hello ресурсов уже существует.</span><span class="sxs-lookup"><span data-stu-id="729c0-158">Etags can also be used when creating a new resource tooensure that hello resource does not already exist.</span></span>

<span data-ttu-id="729c0-159">По умолчанию DNS стек Azure PowerShell использует toozones параллельных изменений tooblock теги eTag и наборы записей.</span><span class="sxs-lookup"><span data-stu-id="729c0-159">By default, Azure Stack DNS PowerShell uses Etags tooblock concurrent changes toozones and record sets.</span></span> <span data-ttu-id="729c0-160">Необязательный Hello *-перезаписать* коммутатор может быть используется toosuppress проверки Etag, в этом случае все одновременных изменений, произошедших перезаписываются.</span><span class="sxs-lookup"><span data-stu-id="729c0-160">hello optional *-Overwrite* switch can be used toosuppress Etag checks, in which case any concurrent changes that have occurred are overwritten.</span></span>

<span data-ttu-id="729c0-161">На уровне API REST Azure стека DNS hello hello теги eTag задаются с помощью заголовков HTTP.</span><span class="sxs-lookup"><span data-stu-id="729c0-161">At hello level of hello Azure Stack DNS REST API, Etags are specified using HTTP headers.</span></span> <span data-ttu-id="729c0-162">В следующей таблице hello дается их поведения:</span><span class="sxs-lookup"><span data-stu-id="729c0-162">Their behavior is given in hello following table:</span></span>

| <span data-ttu-id="729c0-163">Заголовок</span><span class="sxs-lookup"><span data-stu-id="729c0-163">Header</span></span> | <span data-ttu-id="729c0-164">Поведение</span><span class="sxs-lookup"><span data-stu-id="729c0-164">Behavior</span></span>|
|--------|---------|
| <span data-ttu-id="729c0-165">None</span><span class="sxs-lookup"><span data-stu-id="729c0-165">None</span></span>   | <span data-ttu-id="729c0-166">PUT всегда завершается успешно (без проверки Etag)</span><span class="sxs-lookup"><span data-stu-id="729c0-166">PUT always succeeds (no Etag checks)</span></span>|
| <span data-ttu-id="729c0-167">IF-match</span><span class="sxs-lookup"><span data-stu-id="729c0-167">If-match</span></span>| <span data-ttu-id="729c0-168">PUT завершается успешно, только если ресурс существует и Etag соответствует</span><span class="sxs-lookup"><span data-stu-id="729c0-168">PUT only succeeds if resource exists and Etag matches</span></span>|
| <span data-ttu-id="729c0-169">If-match *</span><span class="sxs-lookup"><span data-stu-id="729c0-169">If-match *</span></span>| <span data-ttu-id="729c0-170">PUT завершается успешно, только если ресурс существует</span><span class="sxs-lookup"><span data-stu-id="729c0-170">PUT only succeeds if resource exists</span></span>|
| <span data-ttu-id="729c0-171">If-none-match*</span><span class="sxs-lookup"><span data-stu-id="729c0-171">If-none-match *</span></span>| <span data-ttu-id="729c0-172">PUT завершается успешно, только если ресурс не существует</span><span class="sxs-lookup"><span data-stu-id="729c0-172">PUT only succeeds if resource does not exist</span></span>|

### <a name="limits"></a><span data-ttu-id="729c0-173">Ограничения</span><span class="sxs-lookup"><span data-stu-id="729c0-173">Limits</span></span>

<span data-ttu-id="729c0-174">следующие ограничения по умолчанию Hello применяются при использовании DNS Azure стека.</span><span class="sxs-lookup"><span data-stu-id="729c0-174">hello following default limits apply when using Azure Stack DNS:</span></span>

| <span data-ttu-id="729c0-175">Ресурс</span><span class="sxs-lookup"><span data-stu-id="729c0-175">Resource</span></span>| <span data-ttu-id="729c0-176">Ограничение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="729c0-176">Default limit</span></span>|
|---------|--------------|
| <span data-ttu-id="729c0-177">Зон на подписку</span><span class="sxs-lookup"><span data-stu-id="729c0-177">Zones per subscription</span></span>| <span data-ttu-id="729c0-178">100</span><span class="sxs-lookup"><span data-stu-id="729c0-178">100</span></span>|
| <span data-ttu-id="729c0-179">Наборов записей на зону</span><span class="sxs-lookup"><span data-stu-id="729c0-179">Record sets per zone</span></span>| <span data-ttu-id="729c0-180">5000</span><span class="sxs-lookup"><span data-stu-id="729c0-180">5000</span></span>|
| <span data-ttu-id="729c0-181">Записей на набор записей</span><span class="sxs-lookup"><span data-stu-id="729c0-181">Records per record set</span></span>| <span data-ttu-id="729c0-182">20</span><span class="sxs-lookup"><span data-stu-id="729c0-182">20</span></span>|

## <a name="next-steps"></a><span data-ttu-id="729c0-183">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="729c0-183">Next steps</span></span>
[<span data-ttu-id="729c0-184">Общие сведения о имена IDN для стек Azure</span><span class="sxs-lookup"><span data-stu-id="729c0-184">Introducing iDNS for Azure Stack</span></span>](azure-stack-understanding-dns.md)
