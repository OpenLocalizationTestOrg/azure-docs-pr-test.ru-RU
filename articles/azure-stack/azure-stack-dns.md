---
title: "DNS-сервер в стек Azure | Документы Microsoft"
description: "DNS в Azure Stack"
services: azure-stack
documentationcenter: 
author: ScottNapolitan
manager: byronr
editor: 
ms.assetid: 
ms.service: azure-stack
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/27/2017
ms.author: victorh
ms.openlocfilehash: 61a9955c5ee65ccbe9a8231fa394eab01cda584f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="dns-in-azure-stack"></a>DNS в Azure Stack
Стек Azure включает следующие компоненты DNS.
* Поддержка разрешения имени узла DNS
* Создание и управление ими зон DNS и записей с помощью API

## <a name="support-for-dns-hostname-resolution"></a>Поддержка разрешения имени узла DNS
Можно указать метка DNS-имени домена для открытого IP ресурса, который создает сопоставление для *domainnamelabel.location*. cloudapp.azurestack.external общедоступный IP-адрес в стеке Azure управляемых DNS-серверов.  

Например, если создать открытый IP ресурс с **contoso** как метка доменного имени в расположение локального Azure стека, полное доменное имя (FQDN) **contoso.local.cloudapp.azurestack.external**устраняет общедоступный IP-адрес ресурса. Это полное доменное имя можно использовать для создания пользовательского домена CNAME, которая указывает на общедоступный IP-адрес в стеке Azure.

> [!IMPORTANT]
> Каждая метка доменного имени, которая создана должно быть уникальным в пределах его расположение стека Azure.

При создании общедоступный IP-адрес, на портале, она выглядит следующим образом:

![Создание общедоступного IP-адреса](media/azure-stack-whats-new-dns/image01.png)

Такая конфигурация удобна, если вы хотите связать общедоступный IP-адрес с балансировкой нагрузки ресурса. Например может потребоваться балансировки нагрузки, обработку запросов от веб-приложения. За нагрузки вполне веб-сайта, расположенные на один или несколько виртуальных машин. Теперь можно открыть веб-узла балансировки нагрузки по DNS-имени, а не по IP-адрес.

## <a name="create-and-manage-dns-zones-and-records-using-api"></a>Создание и управление ими зон DNS и записей с помощью API
Можно создать и управлять зон DNS и записей в Azure стека.  

Стек Azure предоставляет службу DNS, таких как Azure, с помощью API-интерфейсы, согласованные с Azure DNS API-интерфейсы.  Путем размещения доменов в Azure DNS стека, DNS-записей с учетными данными, API-интерфейсы, средства, выставления счетов и поддержки можно управлять как других служб Azure. 

В целях очевидным инфраструктуры DNS Azure стека меньше места, чем в Azure. Таким образом области, масштабирования и производительности зависят от масштаба развертывания Azure стека и среды, в которых она развернута.  Таким образом например производительности, доступности, глобальные распространения и высокого уровня доступности (HA) может отличаться от развертывания для развертывания.

## <a name="comparison-with-azure-dns"></a>Сравнение с Azure DNS
DNS-сервер в Azure стека похожа на DNS-сервер в Azure, с двумя главными исключениями:
* **Не поддерживает записи AAAA**

    Стек Azure не поддерживает записи AAAA, поскольку стек Azure не поддерживает адреса IPv6.  Это ключевое различие между DNS-сервер в Azure и Azure стека.
* **Не является мультитенантной**

    В отличие от Azure служба DNS Azure стека не несколькими клиентами. Поэтому каждый клиент не удается создать же зоны DNS. Первую подписку, которая пытается создать зону завершается успешно и последующие запросы с ошибкой.  Это известная проблема и основное отличие между Azure и Azure DNS стека. Эта проблема будет устранена в будущих выпусках.

Кроме того существуют некоторые незначительные различия в как стек DNS Azure реализует теги, метаданные, теги eTag и ограничения.

Следующие сведения относятся к DNS Azure стека и немного отличается от Azure DNS. Дополнительные сведения о Azure DNS см. в разделе [DNS-зоны и записывает](../dns/dns-zones-records.md) на сайте документации Microsoft Azure.

### <a name="tags-metadata-and-etags"></a>Метки, метаданных и теги eTag

**Теги**

Azure DNS стека поддерживает, с помощью диспетчера ресурсов Azure тегов в ресурсы зоны DNS. Она поддерживает теги на наборы записей DNS, несмотря на то, что задает как альтернатива «metadata» поддерживается в запись DNS, как описано далее.

**Metadata**

В качестве альтернативы тегами набора записей DNS стек Azure поддерживает аннотации наборы записей с помощью «metadata». Так же как и теги, метаданные позволяют связывать пары "имя — значение" с каждым набором записей. Например это может быть полезно для записи назначение каждого набора записей. В отличие от тегов метаданные нельзя использовать, чтобы обеспечить отфильтрованное представление счетов Azure, и указывать в политике Azure Resource Manager.

**Теги eTag**

Предположим, что два человека или два процесса пробуют изменить запись DNS одновременно. У какого из них это получится? И будет ли этот человек или процесс знать, что они заменили изменения кого-то другого?

Azure DNS стека использует теги eTag для обработки параллельных изменений к тому же ресурсу безопасно. Теги eTag, отделены от диспетчера ресурсов Azure «Теги». С каждым ресурсом DNS (зоной или набором записей) связан Etag. При извлечении ресурса также передается его значение Etag. При обновлении ресурса, можно передать обратно Etag, стек DNS Azure можно убедиться, что Etag соответствует сервера. Так как каждое обновление ресурса приводит к повторному созданию Etag, несовпадение Etag указывает на параллельное изменение. Теги Etag можно также использовать при создании ресурса для проверки того, что ресурс не существует.

По умолчанию DNS стек Azure PowerShell использует теги eTag блокирования одновременных изменений зоны и наборы записей. С помощью необязательного параметра *-Overwrite* можно отключить проверки тегов Etag. В этом случае все одновременные изменения перезаписываются.

На уровне API REST Azure DNS стека теги eTag задаются с помощью заголовков HTTP. Их поведение описывается в следующей таблице:

| Заголовок | Поведение|
|--------|---------|
| None   | PUT всегда завершается успешно (без проверки Etag)|
| IF-match| PUT завершается успешно, только если ресурс существует и Etag соответствует|
| If-match *| PUT завершается успешно, только если ресурс существует|
| If-none-match*| PUT завершается успешно, только если ресурс не существует|

### <a name="limits"></a>Ограничения

При использовании DNS Azure стека налагаются следующие ограничения по умолчанию:

| Ресурс| Ограничение по умолчанию|
|---------|--------------|
| Зон на подписку| 100|
| Наборов записей на зону| 5000|
| Записей на набор записей| 20|

## <a name="next-steps"></a>Дальнейшие действия
[Общие сведения о имена IDN для стек Azure](azure-stack-understanding-dns.md)
