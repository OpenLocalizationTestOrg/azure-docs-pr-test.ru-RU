---
title: "Обнаружение – аномалий производительности aaaSmart | Документы Microsoft"
description: "Служба Application Insights выполняет интеллектуальный анализ телеметрии вашего приложения и предупреждает о потенциальных проблемах производительности. Эта функция не требует настройки."
services: application-insights
documentationcenter: windows
author: antonfrMSFT
manager: carmonm
ms.assetid: 6acd41b9-fbf0-45b8-b83b-117e19062dd2
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 5/04/2017
ms.author: bwren
ms.openlocfilehash: 60f10612188920330030129f7464e2f398ef1f2a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="smart-detection---performance-anomalies"></a>Интеллектуальное обнаружение. Аномалии производительности

[Application Insights](app-insights-overview.md) автоматически анализирует hello производительности веб-приложения и предупреждать о потенциальных проблемах. Возможно, вы читаете это потому, что получили одно из уведомлений интеллектуального обнаружения.

Эта функция не требует специальной настройки, нужно лишь настроить приложение для использования Application Insights (с помощью [ASP.NET](app-insights-asp-net.md), [Java](app-insights-java-get-started.md) или [Node.js](app-insights-nodejs.md) и в [коде веб-страницы](app-insights-javascript.md)). Она работает, когда приложение создает достаточно данных телеметрии.

## <a name="when-would-i-get-a-smart-detection-notification"></a>Когда я буду получать уведомления интеллектуального обнаружения?

Application Insights обнаружил, что производительность приложения hello уменьшилась одним из следующих способов:

* **Снижение времени ответа** -запуска приложения toorequests медленнее, чем отвечать на запросы. Изменение Hello находилась быстро, например из-за регрессии в развертывании последней. Или оно может происходить постепенно, например из-за утечки памяти. 
* **Снижение длительность зависимостей** -приложение делает вызовы API REST tooa, базы данных или других зависимостей. медленнее, чем отвечает Hello зависимостей.
* **Низкая производительность шаблон** -приложения отображается toohave проблема производительности влияет на работу только некоторых запросов. Например, страницы приложения загружаются намного медленнее только в конкретном браузере или медленнее обслуживаются запросы только с конкретного сервера. В настоящее время наши алгоритмы анализируют время загрузки страницы, время отклика на запрос и время выполнения запросов к зависимостям.  

Смарт-обнаружения требуется по крайней мере 8 дней телеметрии на работоспособное том в порядке tooestablish базовых показателей производительности в обычном. Таким образом, после того, как приложение будет выполняться в течение этого периода, вы начнете получать уведомления о всех значительных проблемах.


## <a name="does-my-app-definitely-have-a-problem"></a>В работе моего приложения обязательно существует проблема?

Уведомление не означает, что в работе приложения возникла проблема. Это просто предложение по поводу то, что может потребоваться toolook на более подробно.

## <a name="how-do-i-fix-it"></a>Как ее исправить?

уведомления Hello содержат диагностическую информацию. Ниже приведен пример:


![Ниже приведен пример обнаружения увеличения времени отклика сервера.](./media/app-insights-proactive-diagnostics/server_response_time_degradation.png)

1. **Рассмотрение**. уведомления Hello показывает, сколько пользователей или затрагиваются сколько операций. Это поможет вам назначить приоритет toohello проблема.
2. **Область**. Hello проблема влияет на весь трафик, или только некоторые страницы? — Ограниченные ИТ tooparticular браузеры или расположения? Эти сведения можно получить из hello уведомления.
3. **Диагностика**. Часто hello диагностических сведений в уведомлении hello предложит hello природу проблемы hello. Например, если время отклика увеличивается при высокой частоте запросов, предлагается, что сервер или зависимости перегружены. 

    В противном случае откройте колонку производительности hello в Application Insights. Здесь вы найдете данные [профилировщика](app-insights-profiler.md). При возникновении исключений, можно также попытаться hello [отладчик моментального снимка](app-insights-snapshot-debugger.md).



## <a name="configure-email-notifications"></a>Настройка уведомлений по электронной почте

Смарт-обнаружения уведомлений включен по умолчанию и отправленных toothose, имеющего [владельцы, участники и читатели, доступ к ресурсу Application Insights toohello](app-insights-resources-roles-access-control.md). toochange это, нажмите кнопку **Настройка** hello уведомление по электронной почте или откройте параметры смарт-обнаружения в Application Insights. 
  
  ![Параметры интеллектуального обнаружения](./media/app-insights-proactive-diagnostics/smart_detection_configuration.png)
  
  * Можно использовать hello **отказаться от подписки** ссылку в hello смарт-обнаружение электронной почты toostop уведомления по электронной почте hello.

По электронной почте о смарт-обнаружение аномалий производительности являются ограниченные tooone электронной почты в день за ресурс Application Insights. только в том случае, если по крайней мере один новый проблемы, обнаруженной в этот день будет отправлено сообщение Hello. Сообщения не отправляются повторно. 

## <a name="faq"></a>Часто задаваемые вопросы

* *Это означает, что вы отслеживаете мои данные?*
  * Нет. Служба Hello полностью автоматически. Получить только уведомления hello. Ваши данные остаются [конфиденциальными](app-insights-data-retention-privacy.md).
* *Анализе все данные hello, собранные службой аналитики приложений?*
  * В настоящее время нет. В настоящее время мы анализируем время ответа на запрос, время отклика на зависимости и время загрузки страницы. Анализ дополнительных метрик добавлен в нашу невыполненную работу, которую нам предстоит сделать.

* С какими типами приложений это работает?
  * Эти снижение обнаруживаются в любое приложение, которое создает соответствующие телеметрии hello. Если вы установили Application Insights в веб-приложении, то запросы и зависимости отслеживаются автоматически. Однако в серверных служб или другие приложения, если было введено вызовы слишком[TrackRequest()](app-insights-api-custom-events-metrics.md#trackrequest) или [TrackDependency](app-insights-api-custom-events-metrics.md#trackdependency), смарт-обнаружение будет работать в hello таким же способом.

* *Можно ли создавать собственные правила обнаружения аномалий или настраивать имеющиеся правила?*

  * Пока еще нет, но вы можете:
    * [настроить оповещения](app-insights-alerts.md), которые предупреждают вас, когда метрика достигает порогового значения;
    * [Экспортировать данные телеметрии](app-insights-export-telemetry.md) tooa [базы данных](app-insights-code-sample-export-sql-stream-analytics.md) или [tooPowerBI](app-insights-export-power-bi.md), где можно проанализировать его самостоятельно.
* *Как часто выполняется анализ hello*

  * Выполняется анализ hello ежедневно hello телеметрии из hello предыдущий день (полный день в часовом поясе UTC).
* *То есть эта функция заменяет [оповещения о метриках](app-insights-alerts.md)?*
  * Нет.  Мы не выделяйте toodetecting каждые поведение, которое может потребоваться чрезмерных.


* *Если я ничего в ответ tooa уведомления не делают, будет получить напоминание?*
  * Нет, вы получаете сообщение о каждой проблеме только один раз. Если hello ошибка будет повторяться обновляется в смарт-обнаружение веб-канала колонке приветствия.
* *Я потерял hello электронной почты. Где найти уведомления hello hello портала?*
  * В Application Insights hello Общие сведения о приложении, выберите hello **смарт-обнаружение** плитки. Что вы будете может toofind все уведомления вверх too90 дней назад.

## <a name="how-can-i-improve-performance"></a>Как можно повысить производительность?
Медленно и неудачных откликов являются одним из больших разочарований hello для пользователей веб-сайта, как известно из собственных возможностей. Таким образом очень важно, tooaddress hello проблемы.

### <a name="triage"></a>Рассмотрение
Во-первых, имеет ли это значение? Если страница всегда является медленным tooload, но только 1% от пользователей на веб-узле имеется toolook его, возможно более важные вещи toothink о. На hello другой стороны, если только 1% пользователей, откройте его, но создает исключения каждый раз, возможно, стоит над этой проблемой.

Используйте инструкцию влияние hello (затронутых пользователей или % трафика) в качестве общего руководства, но имейте в виду, что это не всю статью hello. Сбор других tooconfirm свидетельства.

Учитывает параметры hello hello проблемы. Причиной может быть географическое расположение. Выполните [тесты доступности](app-insights-monitor-web-app-availability.md), включив этот регион. Возможно, в этой области просто проблемы с сетью.

### <a name="diagnose-slow-page-loads"></a>Диагностика медленных загрузок страниц
Где находится hello проблему? Представляет медленно toorespond hello server, страница приветствия очень много или браузера hello toodo с большим числом рабочих toodisplay его?

Откройте колонка метрики браузеры hello. Hello разбито Отображение времени загрузки страницы браузера показан где hello времени будет. 

* Если **время отправки запроса** — высокий, либо hello сервер отвечает медленно или hello запроса — это сообщение, с большой объем данных. Рассмотрим hello [метрики производительности](app-insights-web-monitor-performance.md#metrics) tooinvestigate отклика.
* Настройка [отслеживания зависимостей](app-insights-asp-net-dependencies.md) toosee ли быстродействием hello — из-за tooexternal служб или базы данных.
* Если преобладает метрика **Получение ответа**, это значит, что страница и ее зависимые компоненты (JavaScript, CSS, изображения и т. п. — но не асинхронно загруженные данные) имеют большой размер. Настройка [тест доступности](app-insights-monitor-web-app-availability.md), и убедиться, что tooset hello параметр tooload зависимые элементы. При получении некоторые результаты открыть hello сведения о результатах и развернуть его toosee hello время из различных файлов загрузки.
* Высокое значение счетчика **Время обработки клиента** может указывать на медленное выполнение сценариев. Если причина hello не очевидно, рассмотрите возможность добавления некоторых код учета времени и отправьте раз hello в trackMetric вызовов.

### <a name="improve-slow-pages"></a>Улучшение производительности медленных страниц
Имеется полный часть советов по увеличению ваши ответы сервера и времени загрузки страницы, поэтому больше попыток toorepeat веб-узла все здесь. Ниже приведены несколько советов, которые, возможно, уже известно о tooget точно так же вы думаете:

* Медленной загрузки из-за больших файлов: асинхронной загрузки hello скриптов и других частей. Используйте объединение скриптов. Главная страница hello разбиение мини-приложения, которые загружают их данных отдельно. Не отправлять чистый HTML для таблиц: hello данных toorequest сценарий как JSON или других компактный формат, а затем заполнить таблицу hello в месте. Существуют значительные платформы toohelp с этого. (Они, конечно же, также содержат большие скрипты).
* Медленный серверные зависимости: рассмотрите возможность hello географического расположения компонентов. Например, при использовании Azure, убедитесь, что hello веб-сервера и базы данных hello находятся в hello одного региона. Проверьте, не получают ли запросы больше данных, чем требуется. Возможно, поможет кэширование или пакетная обработка.
* Проблемы производительности: Проверьте hello server показатели времени ответа и числа запросов. Если пики времени ответа непропорциональны пикам количества запросов, вполне вероятно, что ресурсы серверов исчерпаны.


## <a name="server-response-time-degradation"></a>Увеличение времени отклика сервера

уведомления снижение времени ответа Hello позволяет узнать:

* время ответа Hello сравнивать toonormal время ответа для этой операции.
* Сколько пользователей затронуто.
* Среднее время отклика и 90-й процентиль время отклика для этой операции на день hello обнаружения hello и последние 7 дней до. 
* Число этой операции запросов в день hello обнаружения hello и последние 7 дней до.
* Корреляция между снижением производительности данной операции и снижением производительности связанных зависимостей. 
* Связывает toohelp диагностики hello.
  * Профилировщик отслеживает toohelp просмотра расходуется время операции (hello ссылка доступна при собранные примеры трассировки приложения Profiler для этой операции обнаружения период hello). 
  * Отчеты о производительности в обозревателе метрик, позволяющие анализировать эту операцию на различных диапазонах времени с помощью разнообразных фильтров.
  * Найдите это вызывает tooview свойства конкретных вызовов.
  * Сообщает о сбое - Если count > 1, это означает, что в данной операции, может повлиять снижение tooperformance было сбоев.

## <a name="dependency-duration-degradation"></a>Увеличение времени отклика зависимостей

Современные приложения более внедрить подход micro служб, что во многих случаях приводит tooheavy надежности на внешние службы. Например, если приложение использует некоторые платформы данных или даже при создании собственных программ-роботов службы вы будут, скорее всего, ретрансляции на некоторые tooenable когнитивных служб поставщика toointeract вашей программы-роботы человеческих способами и некоторые данные сохранить службы для программ-роботов toopull hello ответы от.  

Пример уведомления об увеличении времени отклика зависимостей.

![Ниже приведен пример обнаружения увеличения времени отклика зависимостей.](./media/app-insights-proactive-diagnostics/dependency_duration_degradation.png)

Обратите внимание на то, что оно содержит:

* Длительность Hello сравнивается toonormal время ответа для этой операции
* Сколько пользователей затронуто.
* Среднее и 90 продолжительности процентиль для этой зависимости в день hello обнаружения hello и последние 7 дней до
* Число зависимостей вызовов в день hello обнаружения hello и последние 7 дней до
* Ссылки toohelp диагностики hello
  * Отчеты о производительности в обозревателе метрик для этой зависимости.
  * Поиск этой зависимости вызывает tooview вызовы свойств
  * Отчеты об ошибках - Если обнаружение hello count > 1, это означает, что было неудачных зависимостей вызывает во время периода, который может принять участие снижение tooduration. 
  * Служба анализа с запросами, которые вычисляют длительность и число вызовов этой зависимости.  

## <a name="smart-detection-of-slow-performing-patterns"></a>Интеллектуальное обнаружение шаблонов снижения производительности 

Application Insights определяет проблемы производительности, которые влияют только на часть пользователей или влияют на пользователей лишь в некоторых случаях. Например, уведомляет о том, что страницы загружаются медленнее только в конкретном типе браузера или что намного медленнее обслуживаются запросы только с конкретного сервера. Можно также выявлять проблемы, связанные с сочетаниями свойств. Например, можно обнаружить медленную загрузку страниц в одном географическом регионе для клиентов в определенной операционной системе.  

Аномалии подобные сложно toodetect просто просмотрев hello данных, а — чаще, чем может показаться. Часто они обнаруживаются только после жалоб ваших клиентов. К тому времени уже слишком поздно: hello затронутые пользователи уже переключена конкурентов tooyour!

В настоящее время наши алгоритмы поиска во время загрузки страницы, время отклика запроса на сервере hello и время ответа зависимостей.  

Не имеют tooset предельных значений и настройка правил. Машинное обучение и алгоритмов интеллектуального анализа данных, используемых toodetect аномальных тенденций.

![Оповещение по электронной почте hello щелкните hello tooopen ссылку hello диагностический отчет Azure](./media/app-insights-proactive-performance-diagnostics/03.png)

* **Когда** показывает, была обнаружена проблема hello hello времени.
* **Что** описывается:

  * Hello проблемы, обнаруженной;
  * характеристики Hello hello набор событий, которые мы нашли отображается поведение проблема hello.
* Hello таблице сравниваются hello плохо работающее набор с поведением среднее hello других событий.

Щелкните tooopen ссылки hello метрика обозревателя и выполните поиск в отчетах, отфильтрованные по времени hello и свойства hello медленного выполнения набора.

Измените hello время диапазона и фильтры tooexplore hello телеметрии.

## <a name="next-steps"></a>Дальнейшие действия
Эти средства диагностики помогут проверить hello телеметрии из приложения:

* [Профилировщик](app-insights-profiler.md) 
* [Отладчик моментальных снимков](app-insights-snapshot-debugger.md)
* [Аналитика](app-insights-analytics-tour.md)
* [Интеллектуальная диагностика и анализ](app-insights-analytics-diagnostics.md)

Интеллектуальное обнаружение — это полностью автоматическая функция, Но возможно хотелось бы tooset некоторые дополнительные предупреждений?

* [Настройка оповещений в Application Insights](app-insights-alerts.md)
* [Доступность веб-тестов](app-insights-monitor-web-app-availability.md)
