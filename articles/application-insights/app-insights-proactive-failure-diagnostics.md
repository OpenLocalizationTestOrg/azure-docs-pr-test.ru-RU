---
title: "Обнаружение – аномалий сбоя, в Application Insights aaaSmart | Документы Microsoft"
description: "Оповещает toounusual изменения в hello частота неудачных запросов tooyour веб-приложения и анализа данных диагностики. Настройка не требуется."
services: application-insights
documentationcenter: 
author: yorac
manager: carmonm
ms.assetid: ea2a28ed-4cd9-4006-bd5a-d4c76f4ec20b
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 01/09/2017
ms.author: bwren
ms.openlocfilehash: dfd178ca9546294be91f27b0c1b846d519539b77
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="smart-detection---failure-anomalies"></a>Интеллектуальное обнаружение аномальных сбоев
[Application Insights](app-insights-overview.md) автоматически уведомляет вас почти в реальном времени если чрезмерное увеличение hello Частота сбоев запросов в веб-приложения. Он обнаруживает необычные увеличению hello частота HTTP-запросы или вызовы зависимостей, имена которых присутствуют в состояние сбоя. Невыполненными обычно считаются запросы с кодом ответа 400 или больше. toohelp рассматривать и диагностировать проблемы hello, анализ характеристики hello hello сбои и связанную телеметрию предоставляется в уведомлении hello. Существуют также портал Application Insights toohello ссылки для дальнейшей диагностики. Hello компонент должен без установки и конфигурации, не как в нем используется машинное обучение обычный коэффициент toopredict алгоритмы hello.

Эта возможность доступна для Java и ASP.NET веб-приложения, размещенные в облаке hello, или на собственных серверах. Она также работает для любого приложения, создающего данные телеметрии запросов или зависимостей (например, при наличии рабочей роли, вызывающей [TrackRequest()](app-insights-api-custom-events-metrics.md#trackrequest) или [TrackDependency()](app-insights-api-custom-events-metrics.md#trackdependency)).

После настройки [Application Insights для проекта](app-insights-overview.md), и предоставляемые приложение создает определенные минимальный объем телеметрии, смарт-обнаружение аномалий сбоя принимает 24 часа toolearn hello обычное поведение приложения, прежде чем он включено ли и отправлять оповещения.

Вот пример оповещения.

![Пример оповещения системы интеллектуального обнаружения, содержащий связанный анализ кластера после сбоя](./media/app-insights-proactive-failure-diagnostics/013.png)

> [!NOTE]
> По умолчанию приходит более краткое сообщение, чем в этом примере. Но вы можете [коммутатор toothis подробный формат](#configure-alerts).
>
>

Обратите внимание на то, что оно содержит:

* Сравнение частоты сбоев Hello toonormal поведения приложения.
* Сколько влияет на пользователей — сведения о том, сколько tooworry.
* Свойство шаблона, связанного с ошибками hello. В этом примере имеются конкретный код ошибки, имя запроса (операция) и версия приложения. Немедленно указано, где toostart в коде. К другим возможностям может относиться определенный тип браузера или клиентской операционной системы.
* Здравствуйте, исключение, трассировки журналов и ошибки зависимости (баз данных или другие внешние компоненты), отображаемые toobe, связанные с ошибками охарактеризовать hello.
* Связывает непосредственно toorelevant поиск hello телеметрии в Application Insights.

## <a name="benefits-of-smart-detection"></a>Преимущества интеллектуального обнаружения
Обычные [оповещения метрик](app-insights-alerts.md) сообщают о возможном наличии проблемы. Но смарт-обнаружение начинает работать диагностики hello автоматически выполняет много hello анализа, в противном случае пришлось бы toodo самостоятельно. Вы получите hello результаты аккуратно упаковки, помогая tooget быстро toohello корень проблемы hello.

## <a name="how-it-works"></a>Принцип работы
Смарт-обнаружение отслеживает hello телеметрии, полученных из приложения, а также в определенной hello сбоев. Это правило подсчитывает число запросов какие hello hello `Successful request` свойство имеет значение false, и вызывает hello количество зависимостей для какой hello `Successful call` свойство имеет значение false. Для запросов по умолчанию `Successful request == (resultCode < 400)` (если имеется пользовательский код слишком[фильтра](app-insights-api-filtering-sampling.md#filtering) или создавать свои собственные [TrackRequest](app-insights-api-custom-events-metrics.md#trackrequest) вызовы). 

Производительность вашего приложения обладает типичным шаблоном поведения. Некоторые запросы или вызовы зависимостей будут вероятность возникновения toofailure, чем другие; и hello общая частота сбоев может возрасти при увеличении нагрузки. Смарт-обнаружения использует машинного обучения toofind эти аномалии.

Как телеметрии поступают в аналитические данные приложения из веб-приложения, смарт-обнаружение сравнивает текущее поведение hello с шаблонами hello наблюдавшихся за hello за последние несколько дней. Если по сравнению с предыдущими показателями производительности наблюдается чрезмерное увеличение частоты отказов, запускается анализ.

При запуске анализа hello служба выполняет анализ кластера на hello невыполненных запросов, tootry tooidentify шаблон значения, характеризующих hello сбоев. В приведенном выше примере hello анализа hello обнаружила, что большинство сбоев, о конкретный код результата, имя запроса, URL-адрес сервера узла и экземпляра роли. В отличие от этого анализа hello был обнаружен, свойство операционной системы клиента hello распределяется по несколько значений и поэтому он не отображается.

Когда службе снабжается эти вызовы телеметрии, анализатор hello ищет исключения и ошибки зависимости, связанные с запросами в кластере hello, которые она определила, вместе с примером все журналы трассировки, связанные с этими запросы.

Полученный анализа Hello отправляется tooyou как предупреждения, пока недоступны для настройки.

Как hello [оповещения можно задать вручную](app-insights-alerts.md), можно проверять состояние hello hello предупреждения и настройте его в колонке оповещения hello ресурса Application Insights. Но в отличие от других оповещений не требуется tooset вверх или настройки смарт-обнаружение. При желании адреса электронной почты для отправки оповещений можно отключить или изменить.

## <a name="configure-alerts"></a>Настройка оповещений
Отключить обнаружение смарт-, изменять hello электронной почты получателей, создать веб-перехватчик или соглашаться toomore подробные сообщения на предупреждения.

Откройте страницу приветствия предупреждения. Сбой аномалий включается вместе с все оповещения, которые заданы вручную, и видно ли он в данный момент hello состояние оповещения.

![На странице обзора hello щелкните плитку предупреждения. Либо на любой странице метрики нажмите кнопку "Оповещения".](./media/app-insights-proactive-failure-diagnostics/021.png)

Выберите оповещения tooconfigure hello его.

![Конфигурация](./media/app-insights-proactive-failure-diagnostics/032.png)

Обратите внимание, что систему интеллектуального обнаружения можно отключить, но нельзя удалить (или создать еще одну).

#### <a name="detailed-alerts"></a>Подробные оповещения
Если выбрать «Получить более подробные диагностические» hello электронной почты будет содержать дополнительные диагностические сведения. Иногда вы будете проблема hello может toodiagnose только из данных hello в сообщении электронной почты hello.

Есть небольшие риск того, что hello более подробные предупреждения могут содержать конфиденциальные сведения, поскольку он включает исключения и сообщения трассировки. Тем не менее это может произойти, только если код допускает передачу конфиденциальных сведений в эти сообщения.

## <a name="triaging-and-diagnosing-an-alert"></a>Рассмотрение и диагностика оповещения
Предупреждение означает, что была обнаружена чрезмерное увеличение частоты неудачных запросов hello. Скорее всего, проблема возникла в приложении или его среде.

Из hello процент запросов и количество пользователей, для которых можно решить, как срочная проблема hello —. В приведенном выше примере hello Частота сбоев hello 22.5% сравнивает с нормальной скорости % 1, указывает, что-то неправильный будет. На Здравствуйте другой стороны, затронутых пользователей только 11. Если бы приложение будет может насколько серьезно tooassess.

Во многих случаях можно будет toodiagnose hello проблемы быстро hello имя запроса, исключения, зависимости сбоя и трассировки данных.

Существуют и некоторые другие признаки. Например Частота сбоев hello зависимостей в этом примере hello равна hello скорость исключение (89.3%). Это предполагает, что hello исключение возникает непосредственно после сбоя зависимостей hello - очистить идею о том, предоставляя toostart в коде.

tooinvestigate в дальнейшем hello в каждом разделе ссылкам прямой tooa [страницу поиска](app-insights-diagnostic-search.md) отфильтрованные toohello соответствующие запросы, исключения, зависимости или трассировки. Или можно открыть hello [портал Azure](https://portal.azure.com), перейдите toohello ресурс Application Insights для своего приложения и открыть колонку сбоев hello.

В этом примере нажав кнопку hello ' зависимостей сбоев ссылку Просмотр сведений» открывает колонку поиска Application Insights hello. Он показывает hello инструкции SQL, которая содержит пример hello причина: были указаны на обязательные поля для значения NULL и не прошел проверку во время hello операции сохранения.

![Поиск по журналу диагностики](./media/app-insights-proactive-failure-diagnostics/051.png)

## <a name="review-recent-alerts"></a>Просмотр последних оповещений

Нажмите кнопку **смарт-обнаружение** tooget toohello последние предупреждения:

![Общие данные оповещения](./media/app-insights-proactive-failure-diagnostics/070.png)


## <a name="whats-hello-difference-"></a>Какова разница hello...
Интеллектуальное обнаружение аномальных сбоев дополняет другие похожие компоненты Application Insights.

* [Оповещения метрик](app-insights-alerts.md) задаются пользователем и позволяют отслеживать самые разные метрики, включая нагрузку на ЦП, частоту запросов, время загрузки страниц и т. д. Их можно использовать toowarn вы, например, если требуется tooadd больше ресурсов. В отличие от этого смарт-обнаружение аномалий сбоя охватывает toonotify небольшой диапазон важные метрики (в настоящее время только частоты неудачных запросов), разработанные в практически в режиме реального времени после существенно повышает скорость неудачных запросов веб-приложения сравниваемые tooweb приложения обычное поведение.

    Смарт-обнаружение автоматически изменяет пороговое значение в условиях tooprevailing ответа.

    Смарт-обнаружение начинает работать диагностики hello для вас.
* [Обнаружение аномалий производительности смарт-](app-insights-proactive-performance-diagnostics.md) также использует автомата аналитики toodiscover необычные шаблонов в показатели, а не требуется никакой настройки пользователем. Но в отличие от смарт-обнаружение аномалий сбоя, hello смарт-обнаружение аномалий производительности служит toofind сегменты из вашего размножение использования, может быть предоставлен неверный — например, определенные страницы в заданном типе браузера. Hello анализ выполняется ежедневно, и при обнаружении любой результат, это скорее всего toobe гораздо меньше срочным, чем оповещение. Напротив входящие данные телеметрии постоянно выполняется анализ hello для сбоя аномалий и вы получите уведомление в течение минут, если больше, чем ожидалось, сбоев сервера.

## <a name="if-you-receive-a-smart-detection-alert"></a>При возникновении оповещения интеллектуального обнаружения
*Почему мне направлено это предупреждение?*

* Мы обнаружили чрезмерное увеличение неудачных запросов скорость по сравнению toohello обычных показателей hello предшествующего периода. После анализа сбоев hello и связанные данные телеметрии мы думаем, что имеется проблема, необходимо рассмотреть.

*Уведомления hello означает, что возникают неполадки определенно?*

* Мы пытаемся tooalert перебоев в работе приложения или снижение, но только полностью понимаете принципы семантика hello и hello влияние на приложение hello или пользователей.

*Это означает, что вы отслеживаете мои данные?*

* Нет. Служба Hello полностью автоматически. Получить только уведомления hello. Ваши данные остаются [конфиденциальными](app-insights-data-retention-privacy.md).

*У toosubscribe toothis предупреждение?*

* Нет. Каждое приложение, что отправляет запрос телеметрии имеет правило генерации оповещений hello смарт-обнаружение.

*Можно ли отменить подписку или получить hello уведомлений, отправленных коллеги toomy вместо?*

* Да, правилами в оповещений, щелкните правило tooconfigure hello смарт-обнаружение его. Можно отключить предупреждение hello или изменять получателей оповещения hello.

*Я потерял hello электронной почты. Где найти уведомления hello hello портала?*

* В журналы действий hello. В Azure откройте hello ресурс Application Insights для своего приложения, а затем выберите журналы действий.

*Некоторые оповещения hello около известных проблем и не выполнять tooreceive их.*

* У нас в планах есть функция подавления оповещений.

## <a name="next-steps"></a>Дальнейшие действия
Эти средства диагностики помогут проверить hello телеметрии из приложения:

* [Обозреватель метрик](app-insights-metrics-explorer.md)
* [Обозреватель поиска](app-insights-diagnostic-search.md)
* [Аналитика, мощный язык запросов](app-insights-analytics-tour.md)

Интеллектуальное обнаружение — это полностью автоматическая функция, Но возможно хотелось бы tooset некоторые дополнительные предупреждений?

* [Настройка оповещений в Application Insights](app-insights-alerts.md)
* [Доступность веб-тестов](app-insights-monitor-web-app-availability.md)
