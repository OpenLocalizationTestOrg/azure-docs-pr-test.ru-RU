---
title: "Схема сопоставления приложений в Azure Application Insights | Документация Майкрософт"
description: "Визуальное представление зависимостей между компонентами приложения с ключевыми индикаторами производительности и предупреждениями."
services: application-insights
documentationcenter: 
author: SoubhagyaDash
manager: carmonm
ms.assetid: 3bf37fe9-70d7-4229-98d6-4f624d256c36
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 03/14/2017
ms.author: mbullwin
ms.openlocfilehash: e1eb2177d6032142781e6e31af6c7f6313d38f4d
ms.sourcegitcommit: e462e5cca2424ce36423f9eff3a0cf250ac146ad
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/01/2017
---
# <a name="application-map-in-application-insights"></a>Схема сопоставления приложений в Application Insights
Схема сопоставления приложений в [Azure Application Insights](app-insights-overview.md) — это наглядный макет отношений зависимости компонентов приложения. С помощью компонентов, которые отображают ключевые показатели эффективности, включая нагрузку, производительность, сбои и оповещения, вы можете определять другие компоненты, вызывающие проблемы с производительностью или сбои. Вы можете щелкнуть любой компонент, чтобы получить более подробные диагностические данные (например, события Application Insights). Если приложение использует службы Azure, то можно также выбрать данные системы диагностики Azure, например рекомендации Помощника по базам данных SQL.

Как и другие диаграммы, схему сопоставления приложений можно закрепить на панели мониторинга Azure, где она будет полностью функциональна. 

## <a name="open-the-application-map"></a>Открытие схемы сопоставления приложений
Откройте схему в колонке обзора приложения:

![Открытие схемы сопоставления приложений](./media/app-insights-app-map/01.png)

![Схема сопоставления приложений](./media/app-insights-app-map/02.png)

На схеме показаны:

* Тесты доступности
* компонент на стороне клиента (отслеживаемый с помощью пакета SDK для JavaScript);
* компонент на стороне сервера;
* зависимости клиентских и серверных компонентов.

Можно разворачивать и сворачивать группы ссылок зависимостей:

![Свертывание](./media/app-insights-app-map/03.png)

Если есть большое количество однотипных зависимостей (например, SQL, HTTP и пр.), они могут группироваться. 

![Сгруппированные зависимости](./media/app-insights-app-map/03-2.png)

## <a name="spot-problems"></a>Выявление проблем
Каждый узел имеет соответствующие показатели эффективности, например нагрузки, производительности и частоты сбоев для определенного компонента. 

Предупреждающие значки указывают на возможные проблемы. Оранжевое предупреждение означает сбои в запросах, представлении страниц или вызовах зависимостей. Красное предупреждение указывает на риск сбоя с вероятностью более 5 %. Откройте "Параметры", чтобы изменить эти пороговые значения.

![Значки, указывающие на сбои](./media/app-insights-app-map/04.png)

Тут же отображаются активные оповещения: 

![Активные оповещения](./media/app-insights-app-map/05.png)

При использовании SQL Azure вы увидите соответствующий значок, информирующий о наличии рекомендаций по улучшению производительности. 

![Рекомендации Azure](./media/app-insights-app-map/06.png)

Щелкните любой значок, чтобы просмотреть подробные данные:

![Рекомендации Azure](./media/app-insights-app-map/07.png)

## <a name="diagnostic-click-through"></a>Просмотр данных диагностики
Каждый из узлов на схеме позволяет просматривать определенные данные диагностики. Параметры различаются в зависимости от типа узла.

![Параметры сервера](./media/app-insights-app-map/09.png)

Для компонентов, которые размещаются в Azure, доступны прямые ссылки.

## <a name="filters-and-time-range"></a>Фильтры и диапазон времени
По умолчанию на схеме представлены все данные, доступные для выбранного диапазона времени. Однако можно отфильтровать только имена конкретных операций или зависимостей.

* Имя операции: сюда входят запросы просмотров страниц и запросы сервера. Этот параметр позволяет отобразить на схеме ключевые показатели эффективности на узле сервера или клиента только для отдельных операций. Будут показаны зависимости, вызванные в контексте этих конкретных операций.
* Базовое имя зависимости: сюда входят зависимости обозревателя AJAX и сервера. Если вы включите в отчет данные телеметрии настраиваемых зависимостей с помощью API TrackDependency, они также будут показаны здесь. Можно выбирать зависимости, которые будут отображены на схеме. Обратите внимание, что сейчас запросы на стороне сервера или просмотры страниц на стороне клиента не фильтруются.

![Настройка фильтров](./media/app-insights-app-map/11.png)

## <a name="save-filters"></a>Сохранение фильтров
Чтобы сохранить примененные фильтры, закрепите отфильтрованный вид на [панели мониторинга](app-insights-dashboards.md).

![Закрепление на панели мониторинга](./media/app-insights-app-map/12.png)

## <a name="error-pane"></a>Область ошибок
Если щелкнуть узел в схеме, справа отобразится область ошибок, содержащая краткую информацию о сбоях этого узла. Сбои группируются сначала по идентификатору операции, затем — по идентификатору проблемы.

![Область ошибок](./media/app-insights-app-map/error-pane.png)

Если щелкнуть сбой, можно перейти к последнему экземпляру этого сбоя.

## <a name="resource-health"></a>Работоспособность ресурса
Для некоторых типов ресурсов в верхней части области ошибок отображается работоспособность ресурса. Например, если щелкнуть узел SQL, отобразится состояние базы данных и все оповещения, которые были активированы.

![Работоспособность ресурса](./media/app-insights-app-map/resource-health.png)

Можно щелкнуть имя ресурса, чтобы просмотреть стандартные общие метрики для этого ресурса.

## <a name="end-to-end-system-app-maps"></a>Комплексная схема сопоставления приложений системы

*Требуется пакет SDK версии 2.3 или выше.*

Если ваше приложение содержит несколько компонентов (например, внутреннюю службу в дополнение к веб-приложению), то их можно показать на одной объединенной схеме сопоставления приложений.

![Настройка фильтров](./media/app-insights-app-map/multi-component-app-map.png)

Карта приложений находит узлы сервера, отслеживая HTTP-вызовы зависимостей, выполняемые между серверами, на которых установлен пакет SDK для Application Insights. Предполагается, что каждый ресурс Application Insights содержит один сервер.

### <a name="multi-role-app-map-preview"></a>Карта приложений с несколькими ролями (предварительная версия)

Предварительная версия функции карты приложений с несколькими ролями позволяет использовать карту приложений с несколькими серверами, отправляющими данные в один и тот же ресурс Application Insights или по одному ключу инструментирования. Серверы в карте сегментированы по свойству cloud_RoleName в элементах телеметрии. В колонке "Previews" (Предварительный просмотр) для параметра *Multi-role Application Map* (Карта приложений с несколькими ролями) задайте значение *On* (Вкл.), чтобы включить такую конфигурацию.

Этот подход может потребоваться в приложении микрослужб или в других сценариях, когда нужно сопоставлять события на нескольких серверах в пределах отдельного ресурса Application Insights.

## <a name="video"></a>Видео

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/112/player] 

## <a name="feedback"></a>Отзыв
Оставьте свой отзыв на портале.

![Изображение MapLink-1](./media/app-insights-app-map/13.png)


## <a name="next-steps"></a>Дальнейшие действия

* [Портал Azure](https://portal.azure.com)
