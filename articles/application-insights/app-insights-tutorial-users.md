---
title: "Изучение клиентов в Azure Application Insights | Документация Майкрософт"
description: "Руководство по использованию Azure Application Insights для анализа информации о том, как пользователи используют приложение."
keywords: 
services: application-insights
author: mrbullwinkle
ms.author: mbullwin
ms.date: 09/20/2017
ms.service: application-insights
ms.custom: mvc
ms.topic: tutorial
manager: carmonm
ms.openlocfilehash: db61c300ad82270e59d315fa3372d9e4390c7a21
ms.sourcegitcommit: 93902ffcb7c8550dcb65a2a5e711919bd1d09df9
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/09/2017
---
# <a name="use-azure-application-insights-to-understand-how-customers-are-using-your-application"></a>Использование Azure Application Insights для анализа информации о том, как пользователи используют приложение

Собираемые Azure Application Insights сведения об использовании помогут вам понять, как пользователи взаимодействуют с приложением.  Это руководство описывает несколько ресурсов, доступных для анализа этих данных.  Вы научитесь:

> [!div class="checklist"]
> * анализировать сведения о пользователях, использующих приложение;
> * на основе сведений о сеансах анализировать, каким образом пользователи используют приложение;
> * определять воронки для сравнения желаемого поведения пользователей с фактическим; 
> * создавать книги для консолидации в одном документе визуализаций и запросов;
> * группировать пользователей с похожим поведением для группового анализа;
> * понимать, какие пользователи используют приложение повторно;
> * изучать, как пользователи перемещаются внутри приложения.


## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством:

- Установите [Visual Studio 2017](https://www.visualstudio.com/downloads/) с указанными ниже рабочими нагрузками:
    - ASP.NET и веб-разработка.
    - разработка Azure;
- Загрузите и установите [отладчик моментальных снимков Visual Studio](http://aka.ms/snapshotdebugger).
- Разверните приложение .NET в Azure и [включите пакет SDK для Application Insights](app-insights-asp-net.md). 
- Включите [отправку из приложения телеметрии](app-insights-usage-overview.md#send-telemetry-from-your-app) для пользовательских событий и просмотров страниц.
- Включите [отправку контекста пользователя](https://docs.microsoft.com/azure/application-insights/app-insights-usage-send-user-context) для отслеживания действий с привязкой ко времени, чтобы максимально эффективно применить информацию об использовании.

## <a name="log-in-to-azure"></a>Вход в Azure
Войдите на портал Azure по адресу [https://portal.azure.com](https://portal.azure.com).

## <a name="get-information-about-your-users"></a>Получение сведений о пользователях
Панель **Пользователи** позволяет получить важные сведения о пользователях разными способами. С помощью этой панели вы можете узнать, откуда подключаются пользователи, какое клиентское приложение они используют, какие области приложения их интересуют. 

1. Выберите **Application Insights**, а затем выберите подписку.
2. Выберите в меню пункт **Пользователи**.
3. Отображение по умолчанию демонстрирует количество уникальных пользователей, подключившихся к приложению за последние 24 часа.  Вы можете изменить этот интервал или задать другие критерии для фильтрации этих сведений.

    ![Построитель запросов](media\app-insights-tutorial-users\QueryBuilder.png)

6. Нажмите раскрывающийся список **Во время** и установите в нем интервал "7 дней".  Теперь в диаграммах на этой панели учитывается больше данных.

    ![Изменение диапазона времени](media\app-insights-tutorial-users\TimeRange.png)

4. Нажмите раскрывающийся список **Разделение по**, чтобы создать на диаграмме разбиение по определенному свойству пользователей.  Выберите **Страна или регион**.  Эта диаграмма отображает те же данные, но с разбивкой пользователей по странам.

    ![Диаграмма по странам и регионам](media\app-insights-tutorial-users\CountryorRegion.png)

5. Наведите курсор на разные столбцы диаграммы. Обратите внимание, что данные по каждой стране учитывают только тот интервал времени, которому соответствуют эти столбцы.
6. Давайте рассмотрим расположенный справа столбец **Аналитика**, в котором представлен анализ данных о пользователях.  Это столбец содержит такие данные, как число уникальных сеансов за период времени и записи с общими свойствами, характерными для значительной части данных о пользователях. 

    ![Столбец аналитики](media\app-insights-tutorial-users\insights.png)


## <a name="analyze-user-sessions"></a>Анализ пользовательских сеансов
Панель **Сеансы** работает так же, как панель **Пользователи**.  Панель **Пользователи** позволяет получить сведения о пользователях, использующих приложение, а панель **Сеансы** помогает понять, как пользователи используют приложение.  

1. Выберите в меню пункт **Сеансы**.
2. Посмотрите на диаграмму и обратите внимание, что возможности для фильтрации и разбиения данных точно такие же, как и в панели **Пользователи**.

    ![Конструктор запросов по сеансам](media\app-insights-tutorial-users\SessionsBuilder.png)

3. На панели **Образец этих сеансов** справа перечислены сеансы с большим количеством событий.  Эти сеансы наиболее интересны для анализа.

    ![Образец этих сеансов](media\app-insights-tutorial-users\SessionsSample.png)

4. Щелкните любой сеанс, чтобы просмотреть **временную шкалу сеанса**, где отображается каждое действие в этом сеансе.  Так вы сможете найти интересную информацию, например сеансы с большим числом исключений.

    ![Временная шкала сеанса](media\app-insights-tutorial-users\SessionsTimeline.png)

## <a name="group-together-similar-users"></a>Объединение схожих пользователей в группы
Набор **Когорта** представляет группу пользователей со сходными характеристиками.  Их можно использовать для фильтрации данных, отображаемых в других панелях, чтобы анализировать определенные группы пользователей.  Например, вы можете выделить для анализа тех пользователей, которые завершили покупку.

1.  Выберите в меню **Когорты**.
2.  Нажмите **Создать**, чтобы создать новую когорту.
3.  Откройте раскрывающийся список **которые использовали** и выберите нужное действие.  Теперь в отчет будут включены только те пользователи, которые выполняли выбранное действие в указанный период времени.

    ![Когорта тех, кто выполнял указанные действия](media\app-insights-tutorial-users\CohortsDropdown.png)

4.  Выберите в меню пункт **Пользователи**.
5.  Откройте раскрывающийся список **Показать** и выберите созданную когорту.  Теперь в диаграмме будут отображаться данные только по пользователям из этой когорты.

    ![Когорта в инструментах пользователя](media\app-insights-tutorial-users\UsersCohort.png)


## <a name="compare-desired-activity-to-reality"></a>Сравнение желаемого поведения с фактическим
Панели, которые мы обсуждали выше, посвящены тому, что делают пользователи в приложении, а **воронки** позволяют проанализировать ожидаемые от пользователей действия.  Воронка отображает набор шагов в приложении и процент пользователей, переходящих в приложении между этими шагами.  Например, вы можете создать воронку, которая измеряет процент пользователей, перешедших от входа в приложение к поиску продукта.  Также можно увидеть процент пользователей, добавивших этот продукт в корзину, и затем процент пользователей, завершивших покупку.

1. Выберите в меню пункт **Воронки**, а затем нажмите кнопку **Добавить**. 

    ![](media\app-insights-tutorial-users\funnelsnew.png)

2. Введите **имя воронки**.
3. Создайте воронку хотя бы с двумя шагами, выбрав действие для каждого шага.  Список действий создается на основе данных об использовании, собранных в Application Insights.

    ![](media\app-insights-tutorial-users\funnelsedit.png)

4. Нажмите копку **Сохранить**, чтобы сохранить эту воронку и просмотреть ее результаты.  В окне справа от воронки отображаются самые распространенные события, выполняемые до первого действия и после последнего действия. Так вы сможете оценить тенденции в поведении пользователей для этой последовательности.

    ![](media\app-insights-tutorial-users\funnelsright.png)


## <a name="learn-which-customers-return"></a>Изучение клиентов, которые возвращаются
Панель **Удержание** поможет вам понять, какие пользователи возвращаются в приложение.  

1. Выберите в меню пункт **Удержание**.
2. По умолчанию в анализ данных включаются те пользователи, которые выполнили любое действие, а позднее вернулись, чтобы выполнить любое другое действие.  Вы можете изменить этот фильтр, например, включив только тех пользователей, которые возвращаются после завершения покупки.

    ![](media\app-insights-tutorial-users\retentionquery.png)

3. Пользователи, которые считаются вернувшимися согласно выбранным критериям, отображаются в графическом и табличном виде по разным периодам.  Обычно процент возвращающихся пользователей плавно снижается с течением времени.  Большая разница между соседними периодами может означать какую-то проблему. 

    ![](media\app-insights-tutorial-users\retentiongraph.png)

## <a name="analyze-user-navigation"></a>Анализ навигации пользователей
Панель **Маршруты пользователя** позволяет анализировать, как пользователи выполняют переходы между страницами и компонентами приложения.  Вы получите ответы на такие вопросы: куда пользователи обычно переходят с определенной страницы, как они обычно выходят из приложения и существуют ли какие-то регулярно повторяемые действия.

1.  Выберите в меню пункт **Маршруты пользователей**.
2.  Нажмите кнопку **Создать**, чтобы создать новый маршрут, а затем нажмите **Изменить** для редактирования его параметров.
3.  Увеличьте **диапазон времени** до 7 дней, а затем выберите начальное событие.  Теперь последовательность будет отслеживать пользовательские сеансы, которые начинаются с этого события.

    ![](media\app-insights-tutorial-users\flowsedit.png)

4.  Вы увидите последовательность пользователей, различные переходы пользователей и соответствующее им число сеансов.  Синие линии обозначают действие, которое пользователь выполнял после текущего действия.  Красная линия обозначает завершение сеанса пользователя.

    ![](media\app-insights-tutorial-users\flows.png)

5.  Чтобы удалить события из маршрута, щелкните значок **x** в углу этого действия, затем щелкните **Создать граф**.  Граф будет построен заново, уже без экземпляров удаленного события.  Нажмите кнопку **Изменить**. Вы увидите, что событие теперь находится в списке **Исключенные события**.

    ![](media\app-insights-tutorial-users\flowsexclude.png)

## <a name="consolidate-usage-data"></a>Консолидация данных об использовании
Панель **Книги** создает интерактивные документы, объединяя в них визуализации данных, запросы аналитики и текст.  Книги можно использовать для группировки распространенных параметров использования, консолидации данных о конкретном инциденте или подготовки отчета об использовании приложения.

1.  Выберите **Книги** в меню.
2.  Нажмите **Создать**, чтобы создать новую книгу.
3.  По умолчанию в нее включается запрос, который отображает в виде линейчатой диаграммы все данные об использовании за последний день.  Вы можете использовать этот запрос, вручную изменить его или выбрать другой полезный запрос из списка, нажав кнопку **Примеры запросов**.

    ![](media\app-insights-tutorial-users\samplequeries.png)

4.  Нажмите кнопку **Завершить редактирование**.
5.  Нажмите кнопку **Изменить** на верхней панели, чтобы изменить текст в верхней части книги.  Для форматирования применяется разметка Markdown.

    ![](media\app-insights-tutorial-users\markdown.png)

6.  Щелкните ссылку **Добавить пользователей**, чтобы включить в книгу граф с данными о пользователях.  Измените здесь любые параметры графа, затем нажмите кнопку **Завершить редактирование** для его сохранения.


## <a name="next-steps"></a>Дальнейшие действия
Теперь вы знаете, как анализировать пользователей. Переходите к следующему руководству, чтобы узнать, как создавать настраиваемые панели мониторинга, в которых эта информация комбинируется с другими полезными данными о приложении.

> [!div class="nextstepaction"]
> [Create custom KPI dashboards using Azure Application Insights](app-insights-tutorial-dashboards.md) (Создание настраиваемых панелей мониторинга с помощью Azure Application Insights)
