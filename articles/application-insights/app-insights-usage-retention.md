---
title: "Анализ удержания пользователей веб-приложений с помощью Azure Application Insights | Документы Майкрософт"
description: "Сколько пользователей вернулось к использованию вашего приложения?"
services: application-insights
documentationcenter: 
author: botatoes
manager: carmonm
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 05/03/2017
ms.author: bwren
ms.openlocfilehash: 7f7ca19ab171278bbd82f68e3822bc650b25373d
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="user-retention-analysis-for-web-applications-with-application-insights"></a>Анализ удержания пользователей веб-приложений с помощью Application Insights

Компонент "Удержание" в [Azure Application Insights](app-insights-overview.md) помогает анализировать, сколько пользователей вернулось в ваше приложение и как часто они выполняют определенные задачи или достигают цели. Например, если вы разместили игровой сайт, то можете сравнить число пользователей, которые вернулись на сайт после проигрыша, и число пользователей, которые вернулись после победы в игре. Эти сведения помогут улучшить взаимодействие с пользователем и свою бизнес-стратегию.

## <a name="get-started"></a>Начало работы

Если вы еще не видите данных в инструменте "Удержание" на портале Application Insights, [узнайте, как приступить к работе с инструментами для данных об использовании](app-insights-usage-overview.md).

## <a name="the-retention-tool"></a>Инструмент "Удержание"

![Инструмент "Хранение"](./media/app-insights-usage-retention/retention.png)

1. Эта панель инструментов позволяет пользователям создавать новые отчеты и открывать существующие отчеты об удержании, а также дает возможность сохранить (или сохранить как) текущий отчет об удержании, отменить все изменения, внесенные в сохраненные отчеты, обновить данные в отчете, предоставить отчет по электронной почте или посредством прямой ссылки и перейти на страницу документации. 
2. По умолчанию инструмент "Удержание" отображает всех пользователей, которые выполнили какие-либо операции, а затем вернулись и выполнили дополнительные операции в течение определенного периода. Можно выбирать разное сочетание событий, чтобы сводить отображаемые сведения к определенным действиям пользователя.
3. Добавьте один или несколько фильтров по свойствам. Например, можно сосредоточиться на пользователях в определенной стране или регионе. Щелкните **Обновить** после настройки фильтров. 
4. Общая диаграмма удержания содержит сводку по удержанию пользователей за выбранный период времени. 
5. Сетка отображает количество удержанных пользователей согласно настройкам конструктора запросов (см. пункт 2). Каждая строка представляет когорту пользователей, выполнивших какое-либо действие в указанный период. В каждой ячейке в строке показано, сколько пользователей из этой когорты впоследствии вернулось хотя бы один раз. Некоторые пользователи могут возвращаться в нескольких периодах. 
6. На картах аналитики отображаются пять инициирующих событий и пять возвращенных событий, чтобы отчет об удержании был понятнее пользователям. 

![Наведение указателя мыши на компонент "Удержание"](./media/app-insights-usage-retention/hover.png)

Можно навести указатель мыши на ячейки в инструменте "Удержание", чтобы отобразить кнопку аналитики и советов по работе с инструментом, в которых указано, что означает та или иная ячейка. Кнопка "Аналитика" позволяет перейти к средству аналитики с предварительно заполненным запросом для создания пользователей из ячейки. 

## <a name="use-business-events-to-track-retention"></a>Использование бизнес-событий для отслеживания периода удержания

Чтобы получить наиболее полезный анализ удержания, измеряйте события, представляющие значительные коммерческие действия. 

Например, многие пользователи могут открывать страницу в приложении, не играя в игру на ней. Следовательно, просто отслеживание просмотров страницы обеспечит неточную оценку того, сколько людей возвращается к игре, получив от нее удовольствие ранее. Чтобы получить четкое представление о возвращающихся игроках, приложение должно отправлять пользовательское событие всякий раз, когда пользователь действительно играет.  

Рекомендуется для запрограммировать пользовательские события, представляющих ключевые коммерческие действия, и использовать их для анализа удержания. Для записи результатов игры необходимо написать строку кода, отправляющую пользовательские события в Application Insights. В коде веб-страницы или в Node.js она выглядит следующим образом.

```JavaScript
    appinsights.trackEvent("won game");
```

Можно так же использовать код сервера ASP.NET, как показано ниже.

```C#
   telemetry.TrackEvent("won game");
```

[Узнайте больше о создании пользовательских событий](app-insights-api-custom-events-metrics.md#trackevent).


## <a name="next-steps"></a>Дальнейшие действия
- Чтобы обеспечить оптимальное использование, начните отправлять [пользовательские события](https://docs.microsoft.com/en-us/azure/application-insights/app-insights-api-custom-events-metrics#trackevent) или [сведения о просмотрах страниц](https://docs.microsoft.com/azure/application-insights/app-insights-api-custom-events-metrics#page-views).
- Если вы уже сделали это, изучите инструменты использования, чтобы узнать, как пользователи используют службу.
    - [Пользователи, сеансы, события](app-insights-usage-segmentation.md)
    - [Воронки](usage-funnels.md)
    - [Средство "Маршруты пользователей"](app-insights-usage-flows.md)
    - [Книги](app-insights-usage-workbooks.md)
    - [Добавление контекста пользователей](app-insights-usage-send-user-context.md)


