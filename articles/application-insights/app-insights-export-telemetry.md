---
title: "При экспорте данных телеметрии Application Insights aaaContinuous | Документы Microsoft"
description: "Экспорт toostorage данных диагностики и использования в Microsoft Azure и загрузить его оттуда."
services: application-insights
documentationcenter: 
author: CFreemanwa
manager: carmonm
ms.assetid: 5b859200-b484-4c98-9d9f-929713f1030c
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: na
ms.topic: article
ms.date: 02/23/2017
ms.author: bwren
ms.openlocfilehash: be9ed7e05922c1c8186df9ca4e642862adaa5fd0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="export-telemetry-from-application-insights"></a>Экспорт данных телеметрии из Application Insights
Требуется tookeep телеметрии дольше, чем стандартный срок hello? или анализировать ее особым образом? Функция "Непрерывный экспорт" идеально подходит для этого. Hello события, отображаемые на портале Application Insights hello могут быть экспортированного toostorage в Microsoft Azure в формате JSON. Из него можно загрузить данные и записи, независимо от кода, которые должны tooprocess его.  

За использование непрерывного экспорта может взиматься дополнительная плата. Проверьте свою [модель ценообразования](http://azure.microsoft.com/pricing/details/application-insights/).

Перед настройкой непрерывный экспорт, существуют некоторые альтернативные решения, может потребоваться tooconsider:

* Кнопка "экспортировать" Hello вверху hello показателей или поиска колонке позволяет передавать электронную таблицу Excel tooan таблиц и диаграмм.

* [Аналитика](app-insights-analytics.md) предоставляет эффективный язык запросов для телеметрии и позволяет экспортировать результаты.
* Если вы рассматриваете возможность слишком[изучение данных в Power BI](app-insights-export-power-bi.md), это можно сделать без использования непрерывный экспорт.
* Hello [REST API доступа к данным](https://dev.applicationinsights.io/) позволяет программно получить доступ к телеметрии.

После экспорта непрерывного копирует вашей toostorage данных (где он может оставаться при условии, что вам нравится), по-прежнему доступен в Application Insights для hello обычные [срок хранения](app-insights-data-retention-privacy.md).

## <a name="setup"></a>Создание непрерывного экспорта
1. В hello ресурс Application Insights для своего приложения, откройте непрерывный Экспорт и выберите **добавить**:

    ![Прокрутите вниз и щелкните "Непрерывный экспорт"](./media/app-insights-export-telemetry/01-export.png)

2. Выберите типы данных телеметрии hello требуется tooexport.

3. Создайте или выберите [учетной записи хранилища Azure](../storage/common/storage-introduction.md) место toostore hello данных.

    > [!Warning]
    > По умолчанию место хранения hello задается toohello одном географическом регионе ресурс Application Insights. Если вы выберете другой регион, может взиматься плата за передачу данных.

    ![Последовательно щелкните "Добавить", "Назначение экспорта", "Учетная запись хранения" и затем создайте новое хранилище или выберите существующее.](./media/app-insights-export-telemetry/02-add.png)

4. Создайте или выберите контейнер хранилища hello:

    ![Щелкните "Выбор типов событий".](./media/app-insights-export-telemetry/create-container.png)

После создания параметров экспорта запускается процедура экспорта. Можно получить только данных, поступающих после создания hello экспорта.

Может быть задержка до одного часа до появления данных в хранилище hello.

### <a name="tooedit-continuous-export"></a>непрерывный Экспорт tooedit

Типы событий toochange hello позже, просто измените hello экспорта:

![Щелкните "Выбор типов событий".](./media/app-insights-export-telemetry/05-edit.png)

### <a name="toostop-continuous-export"></a>непрерывный Экспорт toostop

Экспорт toostop hello, отключить. При нажатии кнопки включения экспорта hello перезапустится с новыми данными. Вы не сможете получить данные hello, поступивших в портал hello во время отключения экспорта.

Экспорт hello toostop навсегда, удалите его. Это действие не повлечет удаление данных из хранилища.

### <a name="cant-add-or-change-an-export"></a>Не удается добавить или изменить параметры экспорта?
* tooadd или измените экспортов, необходимы права доступа владельца, участника или участников аналитики приложений. [Дополнительные сведения о ролях][roles].

## <a name="analyze"></a> Какие события вы получаете?
Hello экспортированных данных — hello необработанные телеметрии, полученных из своего приложения, за исключением того, что мы добавляем расположение данных, которые мы можем вычислить из IP-адрес клиента hello.

Данные были отклонены, [выборки](app-insights-sampling.md) не включается в hello экспортированы данные.

Другие вычисляемые метрики не включаются. Например мы не экспортирует среднее использование ЦП, но мы экспортировать hello необработанные данные телеметрии, из которого вычисляется среднее hello.

Hello данных также включает hello результаты любого [доступности веб-тесты](app-insights-monitor-web-app-availability.md) , были установлены.

> [!NOTE]
> **Выборка.** Если приложение отправляет большой объем данных, функция выборки hello может работать и отправьте лишь часть телеметрии hello создан. [Дополнительная информация о выборке.](app-insights-sampling.md)
>
>

## <a name="get"></a>Проверки данных hello
Рекомендуется проверить hello хранения непосредственно на портале hello. Нажмите кнопку **Обзор**, выберите учетную запись хранения, а затем откройте раздел **Контейнеры**.

tooinspect хранилища Azure в Visual Studio откройте **представление**, **Cloud Explorer**. (Если у вас нет этой команды меню, необходимо tooinstall hello Azure SDK: Привет открыть **новый проект** диалоговое окно, откройте Visual C# / облака и выберите **получить Microsoft Azure SDK для .NET**.)

При открытии хранилища больших двоичных объектов вы увидите контейнер с набором файлов больших двоичных объектов. Hello URI каждого файла на основе ваше имя ресурса Application Insights, ключ инструментирования, телеметрии тип, дату и время. (имя ресурса hello только нижний регистр, и ключ инструментирования hello не содержит тире).

![Проверять hello хранилища больших двоичных объектов с помощью подходящего средства](./media/app-insights-export-telemetry/04-data.png)

Hello Дата и время UTC и при телеметрии hello был внесен в хранилище hello — не hello время его создания. Поэтому при написании кода toodownload hello данных, его можно перемещать линейно через hello данных.

Вот формы hello hello пути:

    $"{applicationName}_{instrumentationKey}/{type}/{blobDeliveryTimeUtc:yyyy-MM-dd}/{ blobDeliveryTimeUtc:HH}/{blobId}_{blobCreationTimeUtc:yyyyMMdd_HHmmss}.blob"

Where

* `blobCreationTimeUtc`При создании BLOB-объект был в hello внутренней промежуточного хранения хранилища
* `blobDeliveryTimeUtc`— время hello при скопированный toohello экспорта конечное хранилище BLOB-объект

## <a name="format"></a> Формат данных
* Каждый большой двоичный объект является текстовым файлом, который содержит несколько строк, разделенных символом новой строки "\n". Он содержит телеметрии hello, обработанных за период времени, половина около минуты.
* Каждая строка представляет точку данных телеметрии, например просмотр страницы или запроса.
* Каждая строка представляет собой неформатированный JSON-документ. Toosit и stare его, откройте его в Visual Studio и выберите изменение, Дополнительно, файл форматирования:

![Представление hello телеметрии с помощью подходящего средства](./media/app-insights-export-telemetry/06-json.png)

Продолжительность времени измеряется в тактах, где 10 000 тактов составляют 1 мс. Например, эти значения показывают время 1 мс toosend запроса в браузере hello мс tooreceive и 1.8s tooprocess hello страницы в браузере hello:

    "sendRequest": {"value": 10000.0},
    "receiveRequest": {"value": 30000.0},
    "clientProcess": {"value": 17970000.0}

[Подробные данные модели ссылок для значений и типы свойств hello.](app-insights-export-data-model.md)

## <a name="processing-hello-data"></a>Обработка данных hello
Небольших масштабах записи данных друг от друга, некоторые toopull кода, его чтение в электронную таблицу и так далее. Например:

    private IEnumerable<T> DeserializeMany<T>(string folderName)
    {
      var files = Directory.EnumerateFiles(folderName, "*.blob", SearchOption.AllDirectories);
      foreach (var file in files)
      {
         using (var fileReader = File.OpenText(file))
         {
            string fileContent = fileReader.ReadToEnd();
            IEnumerable<string> entities = fileContent.Split('\n').Where(s => !string.IsNullOrWhiteSpace(s));
            foreach (var entity in entities)
            {
                yield return JsonConvert.DeserializeObject<T>(entity);
            }
         }
      }
    }

Больший пример кода см. в статье [Пошаговое руководство. Экспорт в SQL из Application Insights с использованием Stream Analytics][exportasa].

## <a name="delete"></a>Удаление старых данных
Обратите внимание на то, что вы несете ответственность за управление емкость хранилища и удаление старых данных hello, при необходимости.

## <a name="if-you-regenerate-your-storage-key"></a>При повторном создании ключа хранилища...
При изменении хранилища ключей tooyour hello непрерывный Экспорт перестанут работать. Вы увидите уведомление в учетной записи Azure.

Откройте колонку непрерывный Экспорт hello и отредактируйте экспорта. Редактировать hello назначения экспорта, но просто оставьте hello выбран же хранилище. Нажмите кнопку ОК tooconfirm.

![Hello изменить непрерывный экспорт, открыть и закрыть три назначение экспорта.](./media/app-insights-export-telemetry/07-resetstore.png)

Hello непрерывный экспорт будет перезапущена.

## <a name="export-samples"></a>Примеры экспорта

* [С помощью Stream Analytics tooSQL экспорта][exportasa]
* [Пример 2 с использованием Stream Analytics](app-insights-export-stream-analytics.md)

На больших масштабах, рассмотрите возможность [HDInsight](https://azure.microsoft.com/services/hdinsight/) -кластеров Hadoop в облаке hello. HDInsight предоставляет широкий набор технологий для управления и анализа больших данных, и его можно использовать tooprocess данные, которые были экспортированы из Application Insights.

## <a name="q--a"></a>Вопросы и ответы
* *Все, что мне требуется, – всего лишь один раз загрузить диаграмму.*  

    Да, это можно сделать. Hello верхней части колонки hello, нажмите кнопку **Экспорт данных**.
* *Параметры экспорта настроены, но в хранилище нет данных.*

    Был Application Insights получен все данные телеметрии из приложения, так как настроено hello экспорта? Вы получите только новые данные.
* *Я попытался tooset копирование экспорт, но было отказано в доступе*

    Если hello учетная запись принадлежит вашей организации, у вас toobe членом hello владельцев или участники групп.
* *Можно экспортировать прямой toomy собственные к локальному хранилищу*

    Нет. Наш механизм экспорта в настоящее время работает только для хранилища Azure.  
* *Есть ли все toohello ограничить объем данных, помещаемых в хранилище my?*

    Нет. Мы будем хранить Принудительная отправка данных до момента удаления экспорта hello. Мы будем останавливаться, если мы получаем hello ограничений на внешнее хранилище BLOB-объектов, но это довольно большой. Он работает tooyou toocontrol объем хранилища используется.  
* *Сколько большие двоичные объекты должны увидеть в хранилище hello*

  * Для каждого данные из выбранного tooexport, новый большой двоичный объект создается каждую минуту (при наличии данных).
  * Кроме того, для приложений с высоким трафиком выделяются дополнительные единицы разделов. В этом случае каждую минуту каждая единица создает большой двоичный объект.
* *Я повторно хранилища ключей toomy hello или изменено имя hello hello контейнера, а теперь hello экспорта не работает.*

    Изменить Экспорт hello и откройте колонку назначения экспорта hello. Оставьте hello, как и ранее выбранные же хранилище и нажмите кнопку ОК tooconfirm. Экспорт будет перезапущен. В случае изменения hello в hello за последние несколько дней сохранности данных.
* *Можно приостановить hello экспорта*

    Да. Нажмите кнопку "Отключить".

## <a name="code-samples"></a>Примеры кода

* [Пример с использованием Stream Analytics](app-insights-export-stream-analytics.md).
* [С помощью Stream Analytics tooSQL экспорта][exportasa]
* [Подробные данные модели ссылок для значений и типы свойств hello.](app-insights-export-data-model.md)

<!--Link references-->

[exportasa]: app-insights-code-sample-export-sql-stream-analytics.md
[roles]: app-insights-resources-roles-access-control.md
