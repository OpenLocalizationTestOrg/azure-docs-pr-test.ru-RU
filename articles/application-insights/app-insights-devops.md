---
title: "aaaWeb наблюдения за производительностью приложений - приложения Azure Insights | Документы Microsoft"
description: "Как можно внедрить в цикл devOps hello Application Insights"
services: application-insights
documentationcenter: 
author: CFreemanwa
manager: carmonm
ms.assetid: 479522a9-ff5c-471e-a405-b8fa221aedb3
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 03/14/2017
ms.author: bwren
ms.openlocfilehash: bba2d6c59de1794adcbf8e298d0ef4f0dbaa700f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="deep-diagnostics-for-web-apps-and-services-with-application-insights"></a>Углубленная диагностика для веб-приложений и служб с помощью Application Insights
## <a name="why-do-i-need-application-insights"></a>Зачем мне Application Insights?
Служба Application Insights отслеживает работу веб-приложения. Она сообщает о сбоях и проблемах производительности, а также помогает анализировать использование приложения пользователями. Он работает для приложений, выполняющихся на многих платформах (ASP.NET, J2EE, Node.js,...) и размещается в hello облачной или локальной. 

![Аспекты упрощение hello веб-приложений](./media/app-insights-devops/010.png)

Это основные toomonitor современное приложение во время его выполнения. Самое главное требуется toodetect сбоев перед большую часть ваших клиентов. Также требуется toodiscover и устранение проблем с производительностью, пока не катастрофический возможно снижают быстродействие или вызвать некоторые неудобства tooyour пользователей. И удовлетворенность tooyour работает система hello, их нужно какие hello их действия с ним tooknow: они с помощью последней функции hello? добиваются ли они успеха?

В цикле непрерывной поставки разрабатываются современных веб-приложений: выпуска новой функции или улучшения; Обратите внимание, насколько хорошо работает для пользователей hello; Планирование hello следующий фрагмент разработки на основе этого набора знаний. Ключевой частью этого цикла является этапом hello наблюдения. Application Insights предоставляет средства toomonitor hello о производительности и использовании веб-приложения.

Hello наиболее важным аспектом этого процесса является диагностики и диагностику. Если происходит сбой приложения hello, business теряются. основной роли Hello мониторинга платформы таким образом toodetect сбоев надежно, уведомлять немедленно и toopresent с данными, hello необходимости toodiagnose hello проблему. Именно это и делает Application Insights.

### <a name="where-do-bugs-come-from"></a>Откуда берутся ошибки?
Ошибки в веб-системах обычно возникают из-за проблем с конфигурацией или из-за нечеткого взаимодействия между многочисленными компонентами. Hello первой задачи при работе над инцидент действующем сайте является таким образом позволяет визуально hello tooidentify проблемы hello: какой компонент или связь является причиной hello?

Некоторые из нас помнят то время, когда компьютерная программа выполнялась на одном компьютере. Разработчики Hello бы его тщательно протестировать перед передачей компьютера; и, поставляемый бы редко см или беспокоиться. Пользователи Hello бы tooput сообщения об ошибках, остаточные hello в течение многих лет. 

В наши дни все по-другому. В приложении существует множество различных устройств toorun и может быть трудно tooguarantee hello точно так же происходит каждого из них. Размещение приложения в облаке hello означает исправлены быстрого, но это также означает непрерывного конкуренции и hello предположения новых возможностей с достаточно частым интервалом. 

В этих условиях hello только tookeep способом, когда фирмы управления на число ошибок hello автоматических модульных тестов. Невозможно toomanually повторно проверить все, что для каждой доставки. Модульный тест — теперь процесс создания обычных часть hello. Средства, такие как hello Xamarin Test Cloud помочь, предоставляя автоматических тестов на несколько версий браузера пользовательского интерфейса. Тестирование regimes позволяют нам toohope, частота hello ошибок внутри приложения могут храниться tooa минимальное.

Обычные веб-приложения содержат множество динамических компонентов. В сложения toohello клиент (в приложении браузер или устройство) и hello веб-сервер имеется вероятность toobe значительных серверная обработка. Возможно, серверной hello является конвейера компонентов или меньшей настойчивости коллекции совместной фрагментов. И многие из них вы не сможете контролировать, так как это внешние службы, от которых вы зависите.

В конфигурациях подобные его может быть сложным и uneconomical tootest, или предусмотрели каждый режим возможные сбои, отличный от в hello live самой системы. 

### <a name="questions-"></a>Вопросы...
Некоторые вопросы возникают при разработке веб-системы.

* В моем приложении происходит аварийное завершение работы? 
* Что именно произошло? — Если не удалось выполнить запрос, я хочу tooknow как попала. Нам нужно отследить последовательность событий...
* Мое приложение достаточно быстро работает? Как долго требуется toorespond tootypical запросов?
* Можно загружать hello дескриптор hello server? Подъем hello частота запросов, время отклика hello хранит постоянными?
* Уровень отклика my зависимости - hello API REST, баз данных и другие компоненты, которые вызывает приложение my. В частности Если hello системы выполняется медленно, это Мои компонента или я получаю замедление отклика от кого-нибудь?
* Работает мое приложение или нет? Он виден с вокруг Здравствуй, мир!? Сообщите мне, если оно остановится...
* Что такое hello основной причины? Ошибка hello в моей компонента или зависимости? Это проблема связи?
* Сколько пользователей было затронуто? Если у меня есть несколько tootackle проблемы, что является наиболее важным hello?

## <a name="what-is-application-insights"></a>Что такое Azure Application Insights?
![Базовый рабочий процесс Application Insights](./media/app-insights-devops/020.png)

1. Application Insights выполняет инструментирование приложения и отправляет данные телеметрии об этом, пока работает приложение hello. Можно построить hello пакет SDK Application Insights в приложение hello либо можно применить инструментарий в среде выполнения. Первый метод Hello является более гибкой, как можно добавить собственные модули регулярного toohello телеметрии.
2. Hello телеметрии отправляется на портале Application Insights toohello, где будет храниться и обрабатываться. (Несмотря на то, что служба Application Insights размещается в Microsoft Azure, она позволяет отслеживать любые веб-приложения, а не только приложения Azure.)
3. Данные телеметрии Hello представлены tooyou в форме hello диаграмм и таблиц событий.

Существует два основных типа телеметрии: статистически обработанные и необработанные экземпляры. 

* Данные экземпляра включают в себя, например, отчет о запросе, который был получен веб-приложением. Можно искать и просматривать hello подробные сведения запроса с помощью средства поиска hello на портале Application Insights hello. экземпляр Hello бы такие данные, как длительность приложения заняло toorespond toohello запроса, а также hello запрошенного URL-адреса, Приблизительное расположение hello клиента и другие данные.
* Статистические данные включают счетчики событий в единицу времени, так что можно сравнить hello частота запросов со временем ответа hello. Они также содержат средние значения метрик, таких как время отклика на запрос.

Hello основные категории данных являются:

* Запросы tooyour приложения (обычно HTTP-запросов), с данными в URL-адрес, время отклика и успех или неудача.
* Зависимости — вызовы REST и SQL, совершенные приложением, а также данные URI, время отклика и результат (успешный или неудачный).
* Исключения, включая трассировки стека.
* Данные представления страницы, которые берутся из браузеры пользователей hello.
* Метрики, такие как счетчики производительности, а также созданные вами метрики. 
* Пользовательские события, которые можно использовать tootrack бизнес-событий
* Трассировки журналов, используемые для отладки.

## <a name="case-study-real-madrid-fc"></a>Пример использования: футбольный клуб "Реал" (Мадрид)
Здравствуйте, веб-служба [реальные сообщество футбольной Мадрид](http://www.realmadrid.com/) служит вентиляторы около 450 миллионов вокруг Здравствуй, мир!. Вентиляторы доступ обоих через веб-браузеры и hello в сообщество мобильных приложений. Они могут не только бронировать билеты, но и имеют доступ к видеоматериалам, результатам игр, сведениям об игроках и следующих матчах. При поиске можно использовать фильтры, например по количеству забитых голов. Также существуют ссылки toosocial мультимедиа. Hello высокой персонализации, пользователей и предназначен как вентиляторы tooengage двусторонний обмен данными.

Здравствуйте, решение [— это система, служб и приложений в Microsoft Azure](https://www.microsoft.com/en-us/enterprise/microsoftcloud/realmadrid.aspx). Масштабируемость является ключевым требованием: объем трафика переменчив и может особенно возрастать во время матчей, а также до и после матчей.

Для реальных Мадрид — производительность важных toomonitor hello системы. Azure Application Insights позволяет всесторонне изучать во всей системе hello, обеспечивая надежный и высокий уровень обслуживания. 

Hello сообщество также возвращает исчерпывающее описание его вентиляторы: по мере (только 3% находятся в Испании), какой процент, они имеют в проигрыватели, исторических результаты и будущих игр и их реакцию на toomatch результатов.

Большая часть этих данных телеметрии автоматически сохраняются не добавлены кодом, который упрощенное решение hello и уменьшить сложность.  Для клуба "Реал" (Мадрид) Application Insights ежемесячно обрабатывает 3,8 миллиарда точек телеметрических данных.

Реальные Мадрид использует модуль tooview hello Power BI их телеметрии.

![Представление телеметрии Application Insights в Power BI](./media/app-insights-devops/080.png)

## <a name="smart-detection"></a>Интеллектуальное обнаружение
[Упреждающая диагностика](app-insights-proactive-diagnostics.md) — это одна из новых функций. Без каких-либо специальных настроек Application Insights автоматически обнаруживает необычное возрастание числа сбоев в приложении и оповещает вас о нем. Это достаточно широкими tooignore фон случайные ошибки, и также растет, которые являются просто пропорционально увеличению tooa запросов. Например если происходит сбой в одной из служб hello, от которых зависит или hello нового построения только развернутого не работает таким образом также затем вы узнаете о его как можно скорее взглянуть на ваш адрес электронной почты. (Также есть веб-перехватчики, которые позволяют приводить в действие другие приложения.)

Другим аспектом эта функция выполняет ежедневные углубленный анализ телеметрии, поиск необычные шаблоны производительности, жестких toodiscover. Например, она может выявить снижение производительности в определенном географическом регионе или в отдельной версии браузера.

В обоих случаях Здравствуйте, предупреждение не только сообщает hello симптомы, обнаружения, но также предоставляет информацию, необходимую toohelp диагностике hello проблемы, такие как отчеты соответствующее исключение.

![Сообщение электронной почты от компонента упреждающей диагностики](./media/app-insights-devops/030.png)

Пользователь Samtec сообщил следующее: "Во время последнего переключения функции мы выявили базу данных с некорректным масштабированием, в которой достигались ограничения ресурсов, вызывая превышение времени ожидания. Оповещения об обнаружении упреждающего происхождения буквально, содержащемуся мы рассмотрения проблемы hello, очень почти в реальном времени. Это предупреждение, в сочетании с оповещениями платформы Azure hello помогли нам практически мгновенно устранить проблему hello. Общее время простоя — не более 10 минут".

## <a name="live-metrics-stream"></a>Динамический поток метрик
Развертывание hello последняя сборка может быть терпится взаимодействие. Если имеются проблемы, нужно tooknow о них прямо сейчас, чтобы вы сможете отменить операцию при необходимости. Динамический поток метрик предоставляет ключевые данные метрик с задержкой около одной секунды.

![Динамические метрики](./media/app-insights-devops/040.png)

Кроме того, решение позволяет незамедлительно проверить образец любых ошибок или исключений.

![Динамические события сбоев](./media/app-insights-devops/live-stream-failures.png)

## <a name="application-map"></a>Схема сопоставления приложений
Сопоставления приложения автоматически обнаруживает топологии приложения размещение hello сведения о производительности на основе его toolet, позволяющий легко определять узкие места по производительности и проблемных потоков в распределенной среде. Это позволяет toodiscover зависимостей приложения в службах Azure. Можно рассмотрение проблемы hello, понять их в случае связанные с кодом или связанные зависимости и из единую детализации в связанных диагностики столкнуться. Например приложения могут завершаться из-за tooperformance снижение уровня SQL. С картой приложения можно увидеть сразу и можно перейти к возможности помощника по индексам SQL или подробных сведений о запросов hello.

![Схема сопоставления приложений](./media/app-insights-devops/050.png)

## <a name="application-insights-analytics"></a>Аналитика Application Insights
Используя [аналитику](app-insights-analytics.md), можно создавать произвольные запросы с помощью мощного языка, подобного SQL.  Диагностика через стек всего приложения hello становится простым, как связи различных перспектив и вы можете запросить toocorrelate hello правильные вопросы производительности службы с помощью бизнес-метрики и качества. 

Вы можете запрашивать экземпляр телеметрии и метрики необработанные данные, хранящиеся в портал hello. язык Hello содержит фильтр, соединения, агрегаты и другие операции. Можно выполнять вычисление полей и статистический анализ. Имеются как табличные, так и графические визуализации.

![Запрос аналитики и диаграмма результатов](./media/app-insights-devops/025.png)

Например, можно с легкостью выполнить следующие действия.

* Сегмент данных производительности по клиенту уровнями toounderstand порядок работы запросов приложения.
* Найти конкретные коды ошибок или имена пользовательских событий, исследуя рабочие сайты.
* Детализируйте использование приложения hello toounderstand конкретных клиентов как получить и применяет функции.
* Отслеживание сеансов и время ответа для поддержки конкретных пользователей tooenable и операций команды tooprovide мгновенных службы технической поддержки.
* Определите приложения часто используемых функций tooanswer функция приоритетов вопросы.

Говорят, что клиент DNN: «Application Insights сообщил нам hello отсутствует часть уравнения hello за то, что может toocombine, сортировки, запроса и фильтрации данных при необходимости. Позволяя нашей команды toouse toofind собственные ingenuity и качества данных с запросами языка можем toofind аналитики и устранения проблем, которые мы даже не знали, что. Много интересных ответы берутся из вопросы hello, начиная с *"я чудо if...".*"

## <a name="development-tools-integration"></a>Интеграция средств разработки
### <a name="configuring-application-insights"></a>Настройка Application Insights
Visual Studio и Eclipse имеют средства tooconfigure hello правильный пакетами SDK для hello проекта, который вы разрабатываете. Нет tooadd команду меню Application Insights.

Если вы столкнулись с помощью платформы ведения журнала трассировки, например Log4N, NLog или System.Diagnostics.Trace toobe, то получены tooApplication журналы hello параметр toosend hello аналитики вместе с hello других данные телеметрии, чтобы легко может согласовывать hello трассировки с запросами , вызовы зависимостей и исключения.

### <a name="search-telemetry-in-visual-studio"></a>Поиск данных телеметрии в Visual Studio
При разработке и отладке компонент, могут просматривать и искать hello телеметрии непосредственно в Visual Studio, используя же поиска средств, как в веб-портале hello hello.

И когда Application Insights входит исключение, можно просматривать точки данных hello в Visual Studio и перехода прямой toohello соответствующий код.

![Поиск в Visual Studio](./media/app-insights-devops/060.png)

Во время отладки, у вас есть hello параметр tookeep hello телеметрии на компьютере разработки, просмотрев его в Visual Studio, но не отправляя toohello портала. Этот локальный параметр позволяет не смешивать отладку с рабочей телеметрией.

### <a name="build-annotations"></a>Аннотации к сборке
Если вы используете Visual Studio Team Services toobuild и развертывания приложения, развертывания заметок отображаться на диаграммах в портале hello. Если ваш последний выпуск влияет на метрики hello, становится очевидным.

![Аннотации к сборке](./media/app-insights-devops/070.png)

### <a name="work-items"></a>Рабочие элементы
При появлении оповещения Application Insights может автоматически создавать в системе отслеживания работы рабочий элемент.

## <a name="but-what-about"></a>А как насчет...?
* [Конфиденциальность и хранение](app-insights-data-retention-privacy.md) — данные телеметрии хранятся на защищенных серверах Azure.
* Производительность — влияния hello очень мала. Данные телеметрии передаются в пакетном режиме.
* [Цены](app-insights-pricing.md) — начать работу можно бесплатно, и при небольших объемах такой режим сохраняется.


## <a name="video"></a>Видео

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/112/player]

## <a name="next-steps"></a>Дальнейшие действия
Начать работу с Application Insights легко. Существуют следующие основные параметры Hello.

* Инструментирование уже работающего веб-приложения. Это дает все данные телеметрии производительности, встроенные hello. Эта функция доступна для [Java](app-insights-java-live.md) и [серверов IIS](app-insights-monitor-performance-live-website-now.md), а также для [веб-приложений Azure](app-insights-azure.md).
* Инструментирование проекта во время разработки. Это можно сделать для приложений [ASP.NET](app-insights-asp-net.md) или [Java](app-insights-java-get-started.md), а также для [Node.js](app-insights-nodejs.md) и узлов [других типов](app-insights-platforms.md). 
* Инструментирование [любой веб-страницы](app-insights-javascript.md) с помощью добавления небольшого фрагмента кода.

