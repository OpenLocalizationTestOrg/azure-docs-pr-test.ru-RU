---
title: "Анализ шаблонов навигации пользователя с помощью инструмента \"Маршруты пользователя\"в Azure Application Insights | Документация Майкрософт"
description: "Анализируйте то, как пользователи выполняют переходы между страницами и компонентами веб-приложения."
services: application-insights
documentationcenter: 
author: numberbycolors
manager: carmonm
ms.service: application-insights
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.devlang: multiple
ms.topic: article
ms.date: 08/02/2017
ms.author: cfreeman
ms.openlocfilehash: d17ed3dff08f00a1d6a2108608e42b29f95fbd84
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="analyze-user-navigation-patterns-with-user-flows-in-application-insights"></a><span data-ttu-id="175f8-103">Анализ шаблонов навигации пользователя с помощью инструмента "Маршруты пользователя"в Azure Application Insights</span><span class="sxs-lookup"><span data-stu-id="175f8-103">Analyze user navigation patterns with User Flows in Application Insights</span></span>

![Инструмент "Маршруты пользователя" в Application Insights](./media/app-insights-usage-flows/flows.png)

<span data-ttu-id="175f8-105">Инструмент "Маршруты пользователя" позволяет анализировать то, как пользователи выполняют переходы между страницами и компонентами сайта.</span><span class="sxs-lookup"><span data-stu-id="175f8-105">The User Flows tool visualizes how users navigate between the pages and features of your site.</span></span> <span data-ttu-id="175f8-106">Он позволяет получить ответ на такие вопросы, как, например, следующие.</span><span class="sxs-lookup"><span data-stu-id="175f8-106">It's great for answering questions like:</span></span>
* <span data-ttu-id="175f8-107">Как пользователи покидают страницу на сайте?</span><span class="sxs-lookup"><span data-stu-id="175f8-107">How do users navigate away from a page on your site?</span></span>
* <span data-ttu-id="175f8-108">Какой элемент на странице нажимают пользователи сайта?</span><span class="sxs-lookup"><span data-stu-id="175f8-108">What do users click on a page on your site?</span></span>
* <span data-ttu-id="175f8-109">Что на сайте отталкивает его посетителей больше всего?</span><span class="sxs-lookup"><span data-stu-id="175f8-109">Where are the places that users churn most from your site?</span></span>
* <span data-ttu-id="175f8-110">Существуют ли места на сайте, где пользователи снова и снова повторяют одни и те же действия?</span><span class="sxs-lookup"><span data-stu-id="175f8-110">Are there places where users repeat the same action over and over?</span></span>

<span data-ttu-id="175f8-111">Инструмент "Маршруты пользователя" начинает с просмотра начальной страницы или с указанного вами события.</span><span class="sxs-lookup"><span data-stu-id="175f8-111">The User Flows tool starts from an initial page view or event that you specify.</span></span> <span data-ttu-id="175f8-112">На основе этого просмотра страницы или пользовательского события инструмент показывает просмотры страницы и пользовательские события, отправленные пользователям сразу же после этого во время сеанса, за два действия после него, и т. д.</span><span class="sxs-lookup"><span data-stu-id="175f8-112">Given this page view or custom event, User Flows shows the page views and custom events that users sent immediately afterwards during a session, two steps afterwards, and so forth.</span></span> <span data-ttu-id="175f8-113">Линии различной толщины показывают, сколько раз пользователи выбрали тот или иной путь.</span><span class="sxs-lookup"><span data-stu-id="175f8-113">Lines of varying thickness show how many times each path was followed by users.</span></span> <span data-ttu-id="175f8-114">Особые узлы "Сеанс завершен" служат для того, чтобы показать, сколько пользователей не отправили просмотры страниц или пользовательские события после предшествующего узла, что позволяет выделить те моменты, когда пользователи, вероятно, покинули веб-сайт.</span><span class="sxs-lookup"><span data-stu-id="175f8-114">Special "Session Ended" nodes show how many users sent no page views or custom events after the preceding node, highlighting where users probably left your site.</span></span>



> [!NOTE]
> <span data-ttu-id="175f8-115">Ресурс Application Insights должен содержать просмотры страниц или пользовательские события для использования инструмента "Маршруты пользователя".</span><span class="sxs-lookup"><span data-stu-id="175f8-115">Your Application Insights resource must contain page views or custom events to use the User Flows tool.</span></span> <span data-ttu-id="175f8-116">[Узнайте, как настроить приложение для сбора сведений о просмотре страниц автоматически с помощью пакета SDK для JavaScript Application Insights](app-insights-javascript.md).</span><span class="sxs-lookup"><span data-stu-id="175f8-116">[Learn how to set up your app to collect page views automatically with the Application Insights JavaScript SDK](app-insights-javascript.md).</span></span>
> 
> 

## <a name="start-by-choosing-an-initial-page-view-or-custom-event"></a><span data-ttu-id="175f8-117">Для начала выберите просмотр начальной страницы или пользовательское событие</span><span class="sxs-lookup"><span data-stu-id="175f8-117">Start by choosing an initial page view or custom event</span></span>

![Выбор начального события для инструмента "Маршруты пользователя"](./media/app-insights-usage-flows/flows-initial-event.png)

<span data-ttu-id="175f8-119">Чтобы приступить к получению ответов на вопросы с помощью инструмента "Маршруты пользователя", выберите просмотр начальной страницы или пользовательское событие в качестве отправной точки для визуализации.</span><span class="sxs-lookup"><span data-stu-id="175f8-119">To get started answering questions with the User Flows tool, choose an initial page view or custom event to serve as the starting point for the visualization:</span></span>
1. <span data-ttu-id="175f8-120">Щелкните ссылку на плитке "What do users do after...?" (Что делают пользователи после...?)</span><span class="sxs-lookup"><span data-stu-id="175f8-120">Click the link in the "What do users do after...?"</span></span> <span data-ttu-id="175f8-121">или нажмите кнопку Edit (Изменить).</span><span class="sxs-lookup"><span data-stu-id="175f8-121">title, or click the Edit button.</span></span> 
2. <span data-ttu-id="175f8-122">Выберите просмотр страницы или пользовательское событие в раскрывающемся списке Initial event (Начальное событие).</span><span class="sxs-lookup"><span data-stu-id="175f8-122">Select a page view or custom event from the "Initial event" dropdown.</span></span>
3. <span data-ttu-id="175f8-123">Нажмите кнопку Create graph (Создать диаграмму).</span><span class="sxs-lookup"><span data-stu-id="175f8-123">Click "Create graph".</span></span>

<span data-ttu-id="175f8-124">В столбце Step 1 (Шаг 1) визуализации показано, что пользователи чаще всего делают после начального события (действия упорядочены сверху вниз по популярности).</span><span class="sxs-lookup"><span data-stu-id="175f8-124">The "Step 1" column of the visualization shows what users did most frequently just after the initial event, ordered top-to-bottom from most- to least-frequent.</span></span> <span data-ttu-id="175f8-125">В столбце Step 2 (Шаг 2) и последующих столбцах показано, что пользователи делают в дальнейшем, что позволяет получить картину того, как пользователи перемещаются по веб-сайту.</span><span class="sxs-lookup"><span data-stu-id="175f8-125">The "Step 2" and subsequent columns show what users did thereafter, creating a picture of all the ways users have navigated through your site.</span></span>

<span data-ttu-id="175f8-126">По умолчанию инструмент "Маршруты пользователя" выполняет случайную выборку просмотров страниц и пользовательских событий с веб-сайта только за последние 24 часа.</span><span class="sxs-lookup"><span data-stu-id="175f8-126">By default, the User Flows tool randomly samples only the last 24 hours of page views and custom event from your site.</span></span> <span data-ttu-id="175f8-127">Можно увеличить период времени и изменить баланс производительности и точности случайной выборки в меню "Правка".</span><span class="sxs-lookup"><span data-stu-id="175f8-127">You can increase the time range and change the balance of performance and accuracy for random sampling in the Edit menu.</span></span>

<span data-ttu-id="175f8-128">Чтобы скрыть ненужные просмотры страниц и пользовательские события, щелкните значок "X" для соответствующих узлов.</span><span class="sxs-lookup"><span data-stu-id="175f8-128">If some of the page views and custom events aren't relevant to you, click the "X" on the nodes you want to hide.</span></span> <span data-ttu-id="175f8-129">После выбора узлов, которые нужно скрыть, нажмите кнопку Create graph (Создать диаграмму) под визуализацией.</span><span class="sxs-lookup"><span data-stu-id="175f8-129">Once you've selected the nodes you want to hide, click the "Create graph" button below the visualization.</span></span> <span data-ttu-id="175f8-130">Чтобы отобразить все скрытые узлы, нажмите кнопку Edit (Изменить), а затем обратитесь к разделу Excluded events (Исключенные события).</span><span class="sxs-lookup"><span data-stu-id="175f8-130">To see all of the nodes you've hidden, click the Edit button, then look at the "Excluded events" section.</span></span>

<span data-ttu-id="175f8-131">Если просмотры страниц или пользовательские события, которые вы хотите увидеть в визуализации, отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="175f8-131">If page views or custom events are missing that you expect to see on the visualization:</span></span>
* <span data-ttu-id="175f8-132">Перейдите к разделу Excluded events (Исключенные события) в меню "Правка".</span><span class="sxs-lookup"><span data-stu-id="175f8-132">Check the "Excluded events" section in the Edit menu.</span></span>
* <span data-ttu-id="175f8-133">С помощью ползунка Detail level (Уровень детализации) в меню "Правка" в визуализацию можно включить достаточно редкие события.</span><span class="sxs-lookup"><span data-stu-id="175f8-133">Use the "Detail level" control in the Edit menu to include less-frequent events in the visualization.</span></span>
* <span data-ttu-id="175f8-134">Если ожидаемые просмотр страницы или пользовательское событие выполняются редко, попробуйте увеличить диапазон времени визуализации в меню "Правка".</span><span class="sxs-lookup"><span data-stu-id="175f8-134">If the page view or custom event you expect is sent infrequently by users, try increasing the time range of the visualization in the Edit menu.</span></span>
* <span data-ttu-id="175f8-135">Убедитесь, что ожидаемый просмотр страницы или пользовательское событие настроены на сбор пакетом SDK Application Insights в исходном коде веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="175f8-135">Make sure the page view or custom event you expect is set up to be collected by the Application Insights SDK in the source code of your site.</span></span> <span data-ttu-id="175f8-136">[Узнайте подробнее о создании пользовательских событий](app-insights-api-custom-events-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="175f8-136">[Learn more about collecting custom events.](app-insights-api-custom-events-metrics.md)</span></span>

<span data-ttu-id="175f8-137">Чтобы отобразить в визуализации больше шагов, воспользуйтесь ползунком Number of steps (Число шагов) в меню "Правка".</span><span class="sxs-lookup"><span data-stu-id="175f8-137">If you want to see more steps in the visualization, use the "Number of steps" slider in the Edit menu.</span></span>

## <a name="after-visiting-a-page-or-feature-where-do-users-go-and-what-do-they-click"></a><span data-ttu-id="175f8-138">Куда переходят пользователи и что они нажимают после посещения страницы или компонента?</span><span class="sxs-lookup"><span data-stu-id="175f8-138">After visiting a page or feature, where do users go and what do they click?</span></span>

![Используйте инструмент "Маршруты пользователя", чтобы понять, где пользователи щелкают элементы сайта.](./media/app-insights-usage-flows/flows-one-step.png)

<span data-ttu-id="175f8-140">Если начальным событием является просмотр страницы, то первый столбец (Step 1 [Шаг 1]) визуализации позволяет быстро понять, что пользователи сделали сразу же после посещения страницы.</span><span class="sxs-lookup"><span data-stu-id="175f8-140">If your initial event is a page view, the first column ("Step 1") of the visualization is a quick way to understand what users did immediately after visiting the page.</span></span> <span data-ttu-id="175f8-141">Попробуйте открыть сайт в окне рядом с визуализацией в инструменте "Маршруты пользователя".</span><span class="sxs-lookup"><span data-stu-id="175f8-141">Try opening your site in a window next to the User Flows visualization.</span></span> <span data-ttu-id="175f8-142">Сравните ожидаемое взаимодействие пользователей с этой страницей со списком событий в столбце Step 1 (Шаг 1).</span><span class="sxs-lookup"><span data-stu-id="175f8-142">Compare your expectations of how users interact with the page to the list of events in the "Step 1" column.</span></span> <span data-ttu-id="175f8-143">Часто элемент пользовательского интерфейса, который кажется незначительным для команды, может входить в список наиболее часто используемых элементов на странице.</span><span class="sxs-lookup"><span data-stu-id="175f8-143">Often, a UI element on the page that seems insignificant to your team can be among the most-used on the page.</span></span> <span data-ttu-id="175f8-144">Это может стать отличной отправной точкой для улучшения дизайна сайта.</span><span class="sxs-lookup"><span data-stu-id="175f8-144">It can be a great starting point for design improvements to your site.</span></span>

<span data-ttu-id="175f8-145">Если начальным событием является пользовательское событие, то в первом столбце показано, что пользователи сделали сразу после выполнения этого действия.</span><span class="sxs-lookup"><span data-stu-id="175f8-145">If your initial event is a custom event, the first column shows what users did just after performing that action.</span></span> <span data-ttu-id="175f8-146">Как и в случае с просмотрами страниц, проверьте, совпадает ли поведение пользователей с целями и ожиданиями команды.</span><span class="sxs-lookup"><span data-stu-id="175f8-146">As with page views, consider if the observed behavior of your users matches your team's goals and expectations.</span></span> <span data-ttu-id="175f8-147">Если, к примеру, выбрано начальное событие "Товар добавлен в корзину", обратите внимание в визуализации на то, появилось ли вскоре после этого событие "Переход к оформлению заказа" или "Покупка совершена".</span><span class="sxs-lookup"><span data-stu-id="175f8-147">If your selected initial event is "Added Item to Shopping Cart", for example, look to see if "Go to Checkout" and "Completed Purchase" appear in the visualization shortly thereafter.</span></span> <span data-ttu-id="175f8-148">Если поведение пользователя сильно отличается от ожиданий, используйте визуализацию, чтобы понять, как пользователей "заинтересовывает" текущий дизайн веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="175f8-148">If user behavior is much different from your expectations, use the visualization to understand how users are getting "trapped" by your site's current design.</span></span>

## <a name="where-are-the-places-that-users-churn-most-from-your-site"></a><span data-ttu-id="175f8-149">Что на сайте отталкивает его посетителей больше всего?</span><span class="sxs-lookup"><span data-stu-id="175f8-149">Where are the places that users churn most from your site?</span></span>

<span data-ttu-id="175f8-150">Обратите внимание на большое количество узлов Session Ended (Сеанс завершен) в столбце визуализации, особенно на начальном этапе.</span><span class="sxs-lookup"><span data-stu-id="175f8-150">Watch for "Session Ended" nodes that appear high-up in a column in the visualization, especially early in a flow.</span></span> <span data-ttu-id="175f8-151">Это означает, что многие пользователи, возможно, покинули веб-сайт после перехода по предыдущему пути просмотра страниц и взаимодействия с элементами пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="175f8-151">This means many users probably churned from your site after following the preceding path of pages and UI interactions.</span></span> <span data-ttu-id="175f8-152">Иногда отток посетителей является ожидаемым явлением — например, после совершения покупки в интернет-магазине, — но обычно отток посетителей указывает на проблемы с дизайном, на плохую производительность или на иные проблемы с сайтом, которые следует устранить.</span><span class="sxs-lookup"><span data-stu-id="175f8-152">Sometimes churn is expected - after completing a purchase on an eCommerce site, for example - but usually churn is a sign of design problems, poor performance, or other issues with your site that can be improved.</span></span>

<span data-ttu-id="175f8-153">Помните, что узлы Session Ended (Сеанс завершен) основаны только на данных телеметрии, собираемых этим ресурсом Application Insights.</span><span class="sxs-lookup"><span data-stu-id="175f8-153">Keep in mind that "Session Ended" nodes are based only on telemetry collected by this Application Insights resource.</span></span> <span data-ttu-id="175f8-154">Если Application Insights не получает данные телеметрии для определенных действий пользователя, пользователи по-прежнему могли бы взаимодействовать с сайтом этими способами после того, как инструмент "Маршруты пользователя" сообщил о завершении сеанса.</span><span class="sxs-lookup"><span data-stu-id="175f8-154">If Application Insights doesn't receive telemetry for certain user interactions, users could still have interacted with your site in those ways after the User Flows tool says the session ended.</span></span>

## <a name="are-there-places-where-users-repeat-the-same-action-over-and-over"></a><span data-ttu-id="175f8-155">Существуют ли места на сайте, где пользователи снова и снова повторяют одни и те же действия?</span><span class="sxs-lookup"><span data-stu-id="175f8-155">Are there places where users repeat the same action over and over?</span></span>

<span data-ttu-id="175f8-156">Найдите просмотр страницы или пользовательское событие, которые повторяются несколькими пользователями на последующих шагах в визуализации.</span><span class="sxs-lookup"><span data-stu-id="175f8-156">Look for a page view or custom event that is repeated by many users across subsequent steps in the visualization.</span></span> <span data-ttu-id="175f8-157">Обычно это означает, что пользователи выполняют повторяющиеся действия на вашем сайте.</span><span class="sxs-lookup"><span data-stu-id="175f8-157">This usually means that users are performing repetitive actions on your site.</span></span> <span data-ttu-id="175f8-158">Если вы нашли такое повторение, рекомендуется изменить дизайн веб-сайта или добавить новые функции, чтобы уменьшить повторения.</span><span class="sxs-lookup"><span data-stu-id="175f8-158">If you find repetition, think about changing the design of your site or adding new functionality to reduce repetition.</span></span> <span data-ttu-id="175f8-159">Например, можно добавить функцию массового редактирования, если вы обнаружили, что пользователи выполняют повторяющиеся действия в каждой строке элемента таблицы.</span><span class="sxs-lookup"><span data-stu-id="175f8-159">For example, adding bulk edit functionality if you find users performing repetitive actions on each row of a table element.</span></span>

## <a name="common-questions"></a><span data-ttu-id="175f8-160">Часто задаваемые вопросы</span><span class="sxs-lookup"><span data-stu-id="175f8-160">Common Questions</span></span>

### <a name="why-do-steps-appear-disconnected"></a><span data-ttu-id="175f8-161">Почему шаги отображаются несвязанными?</span><span class="sxs-lookup"><span data-stu-id="175f8-161">Why do steps appear disconnected?</span></span>

![Окно инструмента "Маршруты пользователей" с несвязанными шагами](./media/app-insights-usage-flows/flows-disconnected.png)

<span data-ttu-id="175f8-163">Если шаги (столбцы) в визуализации отображаются несвязанными, это означает, что отсутствуют пути, которыми посетители сайта пользовались достаточно часто, чтобы они отобразились в визуализации.</span><span class="sxs-lookup"><span data-stu-id="175f8-163">If steps (columns) in a User Flows visualization are disconnected, it means none of the paths taken by users between the steps were frequent enough to be shown.</span></span> <span data-ttu-id="175f8-164">Для отображения в визуализации более редких событий, чтобы шаги отображались связанными, отрегулируйте соответствующим образом ползунок Detail level (Уровень детализации) в меню "Правка".</span><span class="sxs-lookup"><span data-stu-id="175f8-164">To show less frequent events on the visualization so the steps appear connected, adjust the "Detail level" slider in the Edit menu.</span></span>

### <a name="does-the-initial-event-represent-the-first-time-the-event-appears-in-a-session-or-any-time-it-appears-in-a-session"></a><span data-ttu-id="175f8-165">Начальные события представляют самые первые события во время сеанса или относятся к любому времени в сеансе?</span><span class="sxs-lookup"><span data-stu-id="175f8-165">Does the initial event represent the first time the event appears in a session, or any time it appears in a session?</span></span>

<span data-ttu-id="175f8-166">Начальное событие в визуализации представляется только самый первый раз, когда пользователь отправил данные о просмотре страницы или пользовательском событии во время сеанса.</span><span class="sxs-lookup"><span data-stu-id="175f8-166">The initial event on the visualization only represents the first time a user sent that page view or custom event during a session.</span></span> <span data-ttu-id="175f8-167">Если пользователи могут отправлять начальные события несколько раз за сеанс, то в столбце Step 1 (Шаг 1) отображается только поведение пользователей после *первого* экземпляра начального события, а не все экземпляры.</span><span class="sxs-lookup"><span data-stu-id="175f8-167">If users can send the initial event multiple times in a session, then the "Step 1" column only shows how users behave after the *first* instance of initial event, not all instances.</span></span>

## <a name="next-steps"></a><span data-ttu-id="175f8-168">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="175f8-168">Next steps</span></span>

* [<span data-ttu-id="175f8-169">Общие сведения об использовании</span><span class="sxs-lookup"><span data-stu-id="175f8-169">Usage overview</span></span>](app-insights-usage-overview.md)
* [<span data-ttu-id="175f8-170">Анализ пользователей, сеансов и событий в Application Insights</span><span class="sxs-lookup"><span data-stu-id="175f8-170">Users, Sessions, and Events</span></span>](app-insights-usage-segmentation.md)
* [<span data-ttu-id="175f8-171">Сохранение</span><span class="sxs-lookup"><span data-stu-id="175f8-171">Retention</span></span>](app-insights-usage-retention.md)
* [<span data-ttu-id="175f8-172">API Application Insights для пользовательских событий и метрик</span><span class="sxs-lookup"><span data-stu-id="175f8-172">Adding custom events to your app</span></span>](app-insights-api-custom-events-metrics.md)