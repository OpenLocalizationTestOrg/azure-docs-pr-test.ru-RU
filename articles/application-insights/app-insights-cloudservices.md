---
title: "aaaApplication аналитики для облачных служб Azure | Документы Microsoft"
description: "Эффективное отслеживание веб-ролей и рабочих ролей с помощью Application Insights"
services: application-insights
documentationcenter: 
keywords: "WAD2AI, система диагностики Azure"
author: CFreemanwa
manager: carmonm
editor: alancameronwills
ms.assetid: 5c7a5b34-329e-42b7-9330-9dcbb9ff1f88
ms.service: application-insights
ms.devlang: na
ms.tgt_pltfrm: ibiza
ms.topic: get-started-article
ms.workload: tbd
ms.date: 05/05/2017
ms.author: bwren
ms.openlocfilehash: 6956ce423eea1e2cf387bd98250bae32d9501ed0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="application-insights-for-azure-cloud-services"></a><span data-ttu-id="bc16b-104">Application Insights для облачных служб Azure</span><span class="sxs-lookup"><span data-stu-id="bc16b-104">Application Insights for Azure Cloud Services</span></span>
<span data-ttu-id="bc16b-105">С помощью [Application Insights][start] можно отслеживать [приложения облачной службы Microsoft Azure](https://azure.microsoft.com/services/cloud-services/) на предмет доступности, производительности, сбоев и использования, объединяя данные из пакета SDK Application Insights с данными [диагностики Azure](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) из облачных служб.</span><span class="sxs-lookup"><span data-stu-id="bc16b-105">[Microsoft Azure Cloud service apps](https://azure.microsoft.com/services/cloud-services/) can be monitored by [Application Insights][start] for availability, performance, failures, and usage by combining data from Application Insights' SDKs with [Azure Diagnotics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) data from your Cloud Services.</span></span> <span data-ttu-id="bc16b-106">Отзыв hello, получаемых о hello производительность и эффективность работы приложения в hello подстановки можно сделать правильный выбор hello направления проектирования hello в каждом жизненного цикла разработки.</span><span class="sxs-lookup"><span data-stu-id="bc16b-106">With hello feedback you get about hello performance and effectiveness of your app in hello wild, you can make informed choices about hello direction of hello design in each development lifecycle.</span></span>

![Пример](./media/app-insights-cloudservices/sample.png)

## <a name="before-you-start"></a><span data-ttu-id="bc16b-108">Перед началом работы</span><span class="sxs-lookup"><span data-stu-id="bc16b-108">Before you start</span></span>
<span data-ttu-id="bc16b-109">Что вам понадобится:</span><span class="sxs-lookup"><span data-stu-id="bc16b-109">You'll need:</span></span>

* <span data-ttu-id="bc16b-110">Потребуется подписка [Microsoft Azure](http://azure.com).</span><span class="sxs-lookup"><span data-stu-id="bc16b-110">A subscription with [Microsoft Azure](http://azure.com).</span></span> <span data-ttu-id="bc16b-111">Войдите, используя учетную запись Майкрософт, которая уже может быть у вас для Windows, XBox Live или других облачных служб Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="bc16b-111">Sign in with a Microsoft account, which you might have for Windows, XBox Live, or other Microsoft cloud services.</span></span> 
* <span data-ttu-id="bc16b-112">Инструменты Microsoft Azure 2.9 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="bc16b-112">Microsoft Azure tools 2.9 or later</span></span>
* <span data-ttu-id="bc16b-113">Developer Analytics Tools 7.10 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="bc16b-113">Developer Analytics Tools 7.10 or later</span></span>

## <a name="quick-start"></a><span data-ttu-id="bc16b-114">Быстрый запуск</span><span class="sxs-lookup"><span data-stu-id="bc16b-114">Quick start</span></span>
<span data-ttu-id="bc16b-115">Здравствуйте, toomonitor быстрее и проще всего облачной службы с помощью Application Insights — toochoose, при публикации tooAzure вашей службы.</span><span class="sxs-lookup"><span data-stu-id="bc16b-115">hello quickest and easiest way toomonitor your cloud service with Application Insights is toochoose that option when you publish your service tooAzure.</span></span>

![Пример](./media/app-insights-cloudservices/azure-cloud-application-insights.png)

<span data-ttu-id="bc16b-117">Этот параметр, инструменты счетчики приложения во время выполнения, что дает вам все данные телеметрии hello toomonitor запросы, исключения и зависимости в веб-роли, а также производительность из ваших рабочих ролей.</span><span class="sxs-lookup"><span data-stu-id="bc16b-117">This option instruments your app at run time, giving you all hello telemetry you need toomonitor requests, exceptions, and dependencies in your web role, as well as performance counters from your worker roles.</span></span> <span data-ttu-id="bc16b-118">Все диагностические трассировки, сгенерированный вашим приложением tooApplication аналитики также передаются.</span><span class="sxs-lookup"><span data-stu-id="bc16b-118">Any diagnostic traces generated by your app are also sent tooApplication Insights.</span></span>

<span data-ttu-id="bc16b-119">Если это все, что вам нужно, то все готово.</span><span class="sxs-lookup"><span data-stu-id="bc16b-119">If that's all you need, you're done!</span></span> <span data-ttu-id="bc16b-120">Следующие шаги — [просмотр метрик приложения](app-insights-metrics-explorer.md), [запрос данных с помощью Аналитики](app-insights-analytics.md), и, возможно, настройка [мониторинга](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-120">Next steps are [viewing metrics from your app](app-insights-metrics-explorer.md), [querying your data with Analytics](app-insights-analytics.md), and maybe setting up a [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="bc16b-121">Копирование может потребоваться tooset [тестов доступности](app-insights-monitor-web-app-availability.md) и [добавлять код tooyour веб-страницы](app-insights-javascript.md) toomonitor производительности в браузере hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-121">You might want tooset up [availability tests](app-insights-monitor-web-app-availability.md) and [add code tooyour web pages](app-insights-javascript.md) toomonitor performance in hello browser.</span></span>

<span data-ttu-id="bc16b-122">Но можно также получить дополнительные возможности:</span><span class="sxs-lookup"><span data-stu-id="bc16b-122">But you can also get more options:</span></span>

* <span data-ttu-id="bc16b-123">Отправить данные из различных компонентов и конфигураций сборки tooseparate ресурсов.</span><span class="sxs-lookup"><span data-stu-id="bc16b-123">Send data from different components and build configurations tooseparate resources.</span></span>
* <span data-ttu-id="bc16b-124">добавить пользовательские данные телеметрии из своего приложения.</span><span class="sxs-lookup"><span data-stu-id="bc16b-124">Add custom telemetry from your app.</span></span>

<span data-ttu-id="bc16b-125">Если эти параметры имеют tooyou интерес, читайте дальше.</span><span class="sxs-lookup"><span data-stu-id="bc16b-125">If those options are of interest tooyou, read on.</span></span>

## <a name="sample-application-instrumented-with-application-insights"></a><span data-ttu-id="bc16b-126">Пример приложения, инструментированного с помощью Application Insights</span><span class="sxs-lookup"><span data-stu-id="bc16b-126">Sample Application instrumented with Application Insights</span></span>
<span data-ttu-id="bc16b-127">Рассмотрим это [образец приложения](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) в котором Application Insights добавляется tooa облачной службы с двумя рабочими ролями, размещенных в Azure.</span><span class="sxs-lookup"><span data-stu-id="bc16b-127">Take a look at this [sample application](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) in which Application Insights is added tooa cloud service with two worker roles hosted in Azure.</span></span> 

<span data-ttu-id="bc16b-128">Далее рассказывается, как tooadapt облачной службы проект hello таким же образом.</span><span class="sxs-lookup"><span data-stu-id="bc16b-128">What follows tells you how tooadapt your own cloud service project in hello same way.</span></span>

## <a name="plan-resources-and-resource-groups"></a><span data-ttu-id="bc16b-129">Планирование ресурсов и групп ресурсов</span><span class="sxs-lookup"><span data-stu-id="bc16b-129">Plan resources and resource groups</span></span>
<span data-ttu-id="bc16b-130">Hello телеметрии из приложения сохраняется, анализируются и отображается в ресурс Azure типа Application Insights.</span><span class="sxs-lookup"><span data-stu-id="bc16b-130">hello telemetry from your app is stored, analyzed and displayed in an Azure resource of type Application Insights.</span></span> 

<span data-ttu-id="bc16b-131">Группа ресурсов tooa принадлежит каждый ресурс.</span><span class="sxs-lookup"><span data-stu-id="bc16b-131">Each resource belongs tooa resource group.</span></span> <span data-ttu-id="bc16b-132">Группы ресурсов используются для управления затратами, для предоставления доступа членов tooteam и toodeploy обновления в одной транзакции скоординированного.</span><span class="sxs-lookup"><span data-stu-id="bc16b-132">Resource groups are used for managing costs, for granting access tooteam members, and toodeploy updates in a single coordinated transaction.</span></span> <span data-ttu-id="bc16b-133">Например, можно было бы [записи toodeploy сценария](../azure-resource-manager/resource-group-template-deploy.md) облачной службы Azure и его Application Insights, отслеживание ресурсов в одной операции.</span><span class="sxs-lookup"><span data-stu-id="bc16b-133">For example, you could [write a script toodeploy](../azure-resource-manager/resource-group-template-deploy.md) an Azure Cloud Service and its Application Insights monitoring resources all in one operation.</span></span>

### <a name="resources-for-components"></a><span data-ttu-id="bc16b-134">Ресурсы для компонентов</span><span class="sxs-lookup"><span data-stu-id="bc16b-134">Resources for components</span></span>
<span data-ttu-id="bc16b-135">Hello рекомендуемые схема является toocreate отдельный ресурс для каждого компонента приложения — то есть каждый веб-роли и рабочей роли.</span><span class="sxs-lookup"><span data-stu-id="bc16b-135">hello recommended scheme is toocreate a separate resource for each component of your application - that is, each web role and worker role.</span></span> <span data-ttu-id="bc16b-136">Можно анализировать каждый компонент отдельно, но можно создать [мониторинга](app-insights-dashboards.md) , объединяет в себе hello основные диаграммы из всех компонентов hello, можно сравнить и отслеживать их друг с другом.</span><span class="sxs-lookup"><span data-stu-id="bc16b-136">You can analyze each component separately, but can create a [dashboard](app-insights-dashboards.md) that brings together hello key charts from all hello components, so that you can compare and monitor them together.</span></span> 

<span data-ttu-id="bc16b-137">Альтернативные схемы является toosend hello телеметрии из более чем одной роли toohello одного ресурса, но [добавьте элемент измерения tooeach свойств телеметрии](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) , определяющий его роль источника.</span><span class="sxs-lookup"><span data-stu-id="bc16b-137">An alternative scheme is toosend hello telemetry from more than one role toohello same resource, but [add a dimension property tooeach telemetry item](app-insights-api-filtering-sampling.md#add-properties-itelemetryinitializer) that identifies its source role.</span></span> <span data-ttu-id="bc16b-138">В этой схеме метрики диаграммы, такие как исключения обычно показывают агрегат hello счетчики hello разные роли, но можно отделить hello диаграммы с идентификатором hello роли, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="bc16b-138">In this scheme, metric charts such as exceptions normally show an aggregation of hello counts from hello different roles, but you can segment hello chart by hello role identifier when required.</span></span> <span data-ttu-id="bc16b-139">Поиск также можно фильтровать по hello одно измерение.</span><span class="sxs-lookup"><span data-stu-id="bc16b-139">Searches can also be filtered by hello same dimension.</span></span> <span data-ttu-id="bc16b-140">Этот вариант делает его более удобным tooview все в hello же времени, но может также привести toosome путаницы между ролями hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-140">This alternative makes it a bit easier tooview everything at hello same time, but could also lead toosome confusion between hello roles.</span></span>

<span data-ttu-id="bc16b-141">Браузер телеметрии обычно включаются в hello того же ресурса в качестве его серверные веб-роли.</span><span class="sxs-lookup"><span data-stu-id="bc16b-141">Browser telemetry is usually included in hello same resource as its server-side web role.</span></span>

<span data-ttu-id="bc16b-142">Поместите ресурсы Application Insights hello для различных компонентов hello в одну группу ресурсов.</span><span class="sxs-lookup"><span data-stu-id="bc16b-142">Put hello Application Insights resources for hello different components in one resource group.</span></span> <span data-ttu-id="bc16b-143">Это позволяет легко toomanage их вместе.</span><span class="sxs-lookup"><span data-stu-id="bc16b-143">This makes it easy toomanage them together.</span></span> 

### <a name="separating-development-test-and-production"></a><span data-ttu-id="bc16b-144">Разделение данных для разработки, тестирования и эксплуатации</span><span class="sxs-lookup"><span data-stu-id="bc16b-144">Separating development, test, and production</span></span>
<span data-ttu-id="bc16b-145">При разработке пользовательских событий для следующего компонента при динамической hello предыдущей версии, необходимо toosend hello разработки телеметрии tooa отдельный ресурс Application Insights.</span><span class="sxs-lookup"><span data-stu-id="bc16b-145">If you are developing custom events for your next feature while hello previous version is live, you want toosend hello development telemetry tooa separate Application Insights resource.</span></span> <span data-ttu-id="bc16b-146">В противном случае он будет жестких toofind телеметрии тестирования среди всех hello трафик от hello действующем сайте.</span><span class="sxs-lookup"><span data-stu-id="bc16b-146">Otherwise it will be hard toofind your test telemetry among all hello traffic from hello live site.</span></span>

<span data-ttu-id="bc16b-147">tooavoid этой ситуации создать отдельные ресурсы для каждой конфигурации сборки или «метка» (разработки, тестирования, производства,...) системы.</span><span class="sxs-lookup"><span data-stu-id="bc16b-147">tooavoid this situation, create separate resources for each build configuration or 'stamp' (development, test, production, ...) of your system.</span></span> <span data-ttu-id="bc16b-148">Поместите hello ресурсы для каждой конфигурации сборки в отдельной группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="bc16b-148">Put hello resources for each build configuration in a separate resource group.</span></span> 

<span data-ttu-id="bc16b-149">toosend hello телеметрии toohello соответствующие ресурсы, можно выполнить настройку hello пакет SDK Application Insights, чтобы он собирает ключ инструментирования разные в зависимости от конфигурации построения hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-149">toosend hello telemetry toohello appropriate resources, you can set up hello Application Insights SDK so that it picks up a different instrumentation key depending on hello build configuration.</span></span> 

## <a name="create-an-application-insights-resource-for-each-role"></a><span data-ttu-id="bc16b-150">Создание ресурса Application Insights для каждой роли</span><span class="sxs-lookup"><span data-stu-id="bc16b-150">Create an Application Insights resource for each role</span></span>
<span data-ttu-id="bc16b-151">Если вы решили toocreate отдельный ресурс для каждой роли - и возможно отдельный набор для каждой конфигурации сборки -, то он является простым toocreate их на портале Application Insights hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-151">If you've decided toocreate a separate resource for each role - and perhaps a separate set for each build configuration - then it's easiest toocreate them all in hello Application Insights portal.</span></span> <span data-ttu-id="bc16b-152">(Если гораздо создания ресурсов можно [автоматизации процесса hello](app-insights-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-152">(If you create resources a lot, you can [automate hello process](app-insights-powershell.md).</span></span>

1. <span data-ttu-id="bc16b-153">В hello [портал Azure][portal], создать новый ресурс Application Insights.</span><span class="sxs-lookup"><span data-stu-id="bc16b-153">In hello [Azure portal][portal], create a new Application Insights resource.</span></span> <span data-ttu-id="bc16b-154">Для параметра типа приложения выберите приложение ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="bc16b-154">For application type, choose ASP.NET app.</span></span> 

    ![Нажмите "Создать" и "Application Insights"](./media/app-insights-cloudservices/01-new.png)
2. <span data-ttu-id="bc16b-156">Обратите внимание, что каждый ресурс идентифицируется с помощью ключа инструментирования.</span><span class="sxs-lookup"><span data-stu-id="bc16b-156">Note that each resource is identified by an Instrumentation Key.</span></span> <span data-ttu-id="bc16b-157">Возможно потребуется позже при необходимости toomanually настройте или проверьте конфигурацию hello hello SDK.</span><span class="sxs-lookup"><span data-stu-id="bc16b-157">You might need this later if you want toomanually configure or verify hello configuration of hello SDK.</span></span>

    ![Щелкните свойства, выберите раздел hello и нажмите клавиши ctrl + C](./media/app-insights-cloudservices/02-props.png) 

## <a name="set-up-azure-diagnostics-for-each-role"></a><span data-ttu-id="bc16b-159">Настройка системы диагностики Azure для каждой роли</span><span class="sxs-lookup"><span data-stu-id="bc16b-159">Set up Azure Diagnostics for each role</span></span>
<span data-ttu-id="bc16b-160">Задайте этот параметр toomonitor приложения с помощью Application Insights.</span><span class="sxs-lookup"><span data-stu-id="bc16b-160">Set this option toomonitor your app with Application Insights.</span></span> <span data-ttu-id="bc16b-161">Для веб-ролей это обеспечивает мониторинг производительности, создание оповещений и диагностику, а также анализ сведений об использовании.</span><span class="sxs-lookup"><span data-stu-id="bc16b-161">For web roles, this provides performance monitoring, alerts, and diagnostics, as well as usage analysis.</span></span> <span data-ttu-id="bc16b-162">Для других ролей можно найти и отслеживать диагностики Azure, такие как перезапуск, счетчики производительности и tooSystem.Diagnostics.Trace вызовы.</span><span class="sxs-lookup"><span data-stu-id="bc16b-162">For other roles, you can search and monitor Azure diagnostics such as restart, performance counters, and calls tooSystem.Diagnostics.Trace.</span></span> 

1. <span data-ttu-id="bc16b-163">В обозревателе решений Visual Studio в разделе &lt;YourCloudService&gt;, роли, откройте свойства каждой роли hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-163">In Visual Studio Solution Explorer, under &lt;YourCloudService&gt;, Roles, open hello properties of each role.</span></span>
2. <span data-ttu-id="bc16b-164">В **конфигурации**, задайте **отправка данных диагностики tooApplication аналитики** и выберите hello соответствующего ресурса Application Insights, созданного ранее.</span><span class="sxs-lookup"><span data-stu-id="bc16b-164">In **Configuration**, set **Send diagnostics data tooApplication Insights** and select hello appropriate Application Insights resource that you created earlier.</span></span>

<span data-ttu-id="bc16b-165">Если вы решили toouse отдельный ресурс Application Insights для каждой конфигурации сборки, сначала выберите конфигурацию hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-165">If you have decided toouse a separate Application Insights resource for each build configuration, select hello configuration first.</span></span>

![В окне приветствия свойства каждой роли Azure Настройка Application Insights](./media/app-insights-cloudservices/configure-azure-diagnostics.png)

<span data-ttu-id="bc16b-167">Действует hello вставки ключи инструментирования Application Insights в hello файлы с именем `ServiceConfiguration.*.cscfg`.</span><span class="sxs-lookup"><span data-stu-id="bc16b-167">This has hello effect of inserting your Application Insights instrumentation keys into hello files named `ServiceConfiguration.*.cscfg`.</span></span> <span data-ttu-id="bc16b-168">([Пример кода](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span><span class="sxs-lookup"><span data-stu-id="bc16b-168">([Sample code](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/AzureEmailService/ServiceConfiguration.Cloud.cscfg)).</span></span>

<span data-ttu-id="bc16b-169">Следует toovary уровень hello диагностические сведения, передаваемые tooApplication аналитики это можно сделать [путем редактирования hello `.cscfg` непосредственно файлы](app-insights-azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-169">If you want toovary hello level of diagnostic information sent tooApplication Insights, you can do so [by editing hello `.cscfg` files directly](app-insights-azure-diagnostics.md).</span></span>

## <span data-ttu-id="bc16b-170"><a name="sdk"></a>Установка пакета SDK для hello в каждом проекте</span><span class="sxs-lookup"><span data-stu-id="bc16b-170"><a name="sdk"></a>Install hello SDK in each project</span></span>
<span data-ttu-id="bc16b-171">Этот параметр добавляет hello возможность tooadd пользовательские бизнес-телеметрии tooany роли, для более тщательного анализа того, как используется приложение и выполняет.</span><span class="sxs-lookup"><span data-stu-id="bc16b-171">This option adds hello ability tooadd custom business telemetry tooany role, for a closer analysis of how your application is used and performs.</span></span>

<span data-ttu-id="bc16b-172">В Visual Studio настройте hello пакет SDK Application Insights для каждого проекта облачных приложений.</span><span class="sxs-lookup"><span data-stu-id="bc16b-172">In Visual Studio, configure hello Application Insights SDK for each cloud app project.</span></span>

1. <span data-ttu-id="bc16b-173">**Веб-ролей**: щелкните правой кнопкой мыши проект hello и выберите **настроить Application Insights** или **Добавить > телеметрии Application Insights**.</span><span class="sxs-lookup"><span data-stu-id="bc16b-173">**Web roles**: Right-click hello project and choose **Configure Application Insights** or **Add > Application Insights telemetry**.</span></span>

2. <span data-ttu-id="bc16b-174">**Рабочие роли**:</span><span class="sxs-lookup"><span data-stu-id="bc16b-174">**Worker roles**:</span></span> 
 * <span data-ttu-id="bc16b-175">Щелкните правой кнопкой мыши проект hello и выберите **управление пакетами Nuget**.</span><span class="sxs-lookup"><span data-stu-id="bc16b-175">Right-click hello project and select **Manage Nuget Packages**.</span></span>
 * <span data-ttu-id="bc16b-176">Добавьте [Application Insights для Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span><span class="sxs-lookup"><span data-stu-id="bc16b-176">Add [Application Insights for Windows Servers](https://www.nuget.org/packages/Microsoft.ApplicationInsights.WindowsServer/).</span></span>

    ![Поиск Application Insights](./media/app-insights-cloudservices/04-ai-nuget.png)

3. <span data-ttu-id="bc16b-178">Настройка данных toosend toohello ресурс Application Insights для hello SDK.</span><span class="sxs-lookup"><span data-stu-id="bc16b-178">Configure hello SDK toosend data toohello Application Insights resource.</span></span>

    <span data-ttu-id="bc16b-179">В функцию запуска подходящий задайте ключ инструментирования hello в параметр конфигурации hello в cscfg-файле hello:</span><span class="sxs-lookup"><span data-stu-id="bc16b-179">In a suitable startup function, set hello instrumentation key from hello configuration setting in hello .cscfg file:</span></span>
 
    ```C#
   
     TelemetryConfiguration.Active.InstrumentationKey = RoleEnvironment.GetConfigurationSettingValue("APPINSIGHTS_INSTRUMENTATIONKEY");
    ```
   
    <span data-ttu-id="bc16b-180">Сделайте это для каждой роли в вашем приложении.</span><span class="sxs-lookup"><span data-stu-id="bc16b-180">Do this for each role in your application.</span></span> <span data-ttu-id="bc16b-181">См. Примеры hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-181">See hello examples:</span></span>
   
   * [<span data-ttu-id="bc16b-182">Веб-роль</span><span class="sxs-lookup"><span data-stu-id="bc16b-182">Web role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Global.asax.cs#L27)
   * [<span data-ttu-id="bc16b-183">Рабочая роль</span><span class="sxs-lookup"><span data-stu-id="bc16b-183">Worker role</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L232)
   * [<span data-ttu-id="bc16b-184">При работе с веб-страницами</span><span class="sxs-lookup"><span data-stu-id="bc16b-184">For web pages</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Views/Shared/_Layout.cshtml#L13) 
4. <span data-ttu-id="bc16b-185">Toobe файл ApplicationInsights.config hello набор всегда копируются toohello выходной каталог.</span><span class="sxs-lookup"><span data-stu-id="bc16b-185">Set hello ApplicationInsights.config file toobe copied always toohello output directory.</span></span> 
   
    <span data-ttu-id="bc16b-186">(В файле .config hello, вы увидите попросить вас tooplace hello ключ инструментирования существует сообщения.</span><span class="sxs-lookup"><span data-stu-id="bc16b-186">(In hello .config file, you'll see messages asking you tooplace hello instrumentation key there.</span></span> <span data-ttu-id="bc16b-187">Однако для облачных приложений это лучше tooset его из hello cscfg-файле.</span><span class="sxs-lookup"><span data-stu-id="bc16b-187">However, for cloud applications it's better tooset it from hello .cscfg file.</span></span> <span data-ttu-id="bc16b-188">Это гарантирует, что эта роль hello правильно задан в портал hello.)</span><span class="sxs-lookup"><span data-stu-id="bc16b-188">This ensures that hello role is correctly identified in hello portal.)</span></span>

#### <a name="run-and-publish-hello-app"></a><span data-ttu-id="bc16b-189">Запустить и опубликовать приложение hello</span><span class="sxs-lookup"><span data-stu-id="bc16b-189">Run and publish hello app</span></span>
<span data-ttu-id="bc16b-190">Запустите приложение и войдите в Azure.</span><span class="sxs-lookup"><span data-stu-id="bc16b-190">Run your app, and sign into Azure.</span></span> <span data-ttu-id="bc16b-191">Создать ресурсы Application Insights Привет открыть, и вы увидите отдельных точек данных в [поиска](app-insights-diagnostic-search.md), и статистические данные в [Explorer метрика](app-insights-metrics-explorer.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-191">Open hello Application Insights resources you created, and you'll see individual data points appearing in [Search](app-insights-diagnostic-search.md), and aggregated data in [Metric Explorer](app-insights-metrics-explorer.md).</span></span> 

<span data-ttu-id="bc16b-192">Добавьте дополнительные телеметрии - разделах hello ниже - и опубликуйте приложение tooget динамической диагностике и использовании отзыв.</span><span class="sxs-lookup"><span data-stu-id="bc16b-192">Add more telemetry - see hello sections below - and then publish your app tooget live diagnostic and usage feedback.</span></span> 

#### <a name="no-data"></a><span data-ttu-id="bc16b-193">Данные отсутствуют?</span><span class="sxs-lookup"><span data-stu-id="bc16b-193">No data?</span></span>
* <span data-ttu-id="bc16b-194">Откройте hello [поиска] [ diagnostic] плитки toosee отдельные события.</span><span class="sxs-lookup"><span data-stu-id="bc16b-194">Open hello [Search][diagnostic] tile, toosee individual events.</span></span>
* <span data-ttu-id="bc16b-195">С помощью приложения hello, открыв разные страницы, чтобы он создает некоторые телеметрии.</span><span class="sxs-lookup"><span data-stu-id="bc16b-195">Use hello application, opening different pages so that it generates some telemetry.</span></span>
* <span data-ttu-id="bc16b-196">Подождите несколько секунд и нажмите "Обновить".</span><span class="sxs-lookup"><span data-stu-id="bc16b-196">Wait a few seconds and click Refresh.</span></span>
* <span data-ttu-id="bc16b-197">Ознакомьтесь с разделом [Устранение неполадок][qna].</span><span class="sxs-lookup"><span data-stu-id="bc16b-197">See [Troubleshooting][qna].</span></span>

## <a name="view-azure-diagnostic-events"></a><span data-ttu-id="bc16b-198">Просмотр событий диагностики Azure</span><span class="sxs-lookup"><span data-stu-id="bc16b-198">View Azure Diagnostic events</span></span>
<span data-ttu-id="bc16b-199">Где toofind hello [диагностики Azure](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) данные в Application Insights:</span><span class="sxs-lookup"><span data-stu-id="bc16b-199">Where toofind hello [Azure Diagnostics](https://docs.microsoft.com/en-us/azure/monitoring-and-diagnostics/azure-diagnostics) information in Application Insights:</span></span>

* <span data-ttu-id="bc16b-200">Счетчики производительности отображаются в виде настраиваемых метрик.</span><span class="sxs-lookup"><span data-stu-id="bc16b-200">Performance counters are displayed as custom metrics.</span></span> 
* <span data-ttu-id="bc16b-201">Журналы событий Windows отображаются в виде трассировок и настраиваемых событий.</span><span class="sxs-lookup"><span data-stu-id="bc16b-201">Windows event logs are shown as traces and custom events.</span></span>
* <span data-ttu-id="bc16b-202">Журналы приложений, журналы трассировки событий Windows и все журналы инфраструктуры диагностики отображаются в виде трассировок.</span><span class="sxs-lookup"><span data-stu-id="bc16b-202">Application logs, ETW logs, and any diagnostics infrastructure logs appear as traces.</span></span>

<span data-ttu-id="bc16b-203">toosee счетчики производительности и счетчики событий, откройте [обозревателя метрик](app-insights-metrics-explorer.md) и добавить новую диаграмму:</span><span class="sxs-lookup"><span data-stu-id="bc16b-203">toosee performance counters and counts of events, open [Metrics Explorer](app-insights-metrics-explorer.md) and add a new chart:</span></span>

![Диагностические данные Azure](./media/app-insights-cloudservices/23-wad.png)

<span data-ttu-id="bc16b-205">Используйте [поиска](app-insights-diagnostic-search.md) или [аналитический запрос](app-insights-analytics-tour.md) toosearch через hello, различными трассировки журналов, отправляемых системой диагностики Azure.</span><span class="sxs-lookup"><span data-stu-id="bc16b-205">Use [Search](app-insights-diagnostic-search.md) or an [Analytics query](app-insights-analytics-tour.md) toosearch across hello various trace logs sent by Azure Diagnostics.</span></span> <span data-ttu-id="bc16b-206">Например предположим, что у вас есть необрабатываемое исключение, вызвавшее toocrash роли и повторный запуск.</span><span class="sxs-lookup"><span data-stu-id="bc16b-206">For example, suppose you have an unhandled exception which caused a Role toocrash and recycle.</span></span> <span data-ttu-id="bc16b-207">Эти сведения будут отображаться в hello приложения канал журнала событий Windows.</span><span class="sxs-lookup"><span data-stu-id="bc16b-207">That information would show up in hello Application channel of Windows Event Log.</span></span> <span data-ttu-id="bc16b-208">Можно использовать toolook поиска на ошибки в журнале событий Windows hello и получить hello полную трассировку стека для исключения hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-208">You can use Search toolook at hello Windows Event Log error and get hello full stack trace for hello exception.</span></span> <span data-ttu-id="bc16b-209">Помогут вам найти hello причину проблемы hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-209">That will help you find hello root cause of hello issue.</span></span>

![Поиск диагностических данных Azure](./media/app-insights-cloudservices/25-wad.png)

## <a name="more-telemetry"></a><span data-ttu-id="bc16b-211">Дополнительные данные телеметрии</span><span class="sxs-lookup"><span data-stu-id="bc16b-211">More telemetry</span></span>
<span data-ttu-id="bc16b-212">Здравствуйте, разделы ниже показано как tooget дополнительные данные телеметрии из различных аспектов приложения.</span><span class="sxs-lookup"><span data-stu-id="bc16b-212">hello sections below show how tooget additional telemetry from different aspects of your application.</span></span>

## <a name="track-requests-from-worker-roles"></a><span data-ttu-id="bc16b-213">Отслеживание запросов из рабочих ролей</span><span class="sxs-lookup"><span data-stu-id="bc16b-213">Track Requests from Worker roles</span></span>
<span data-ttu-id="bc16b-214">В веб-роли модуля hello запросов автоматически собирает данные о HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="bc16b-214">In web roles, hello requests module automatically collects data about HTTP requests.</span></span> <span data-ttu-id="bc16b-215">В разделе hello [пример MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) примеры как можно переопределить поведение коллекции по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-215">See hello [sample MVCWebRole](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/MvcWebRole) for examples of how you can override hello default collection behavior.</span></span> 

<span data-ttu-id="bc16b-216">Можно записать производительности hello вызовов tooworker ролей путем их отслеживания в hello так же, как HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="bc16b-216">You can capture hello performance of calls tooworker roles by tracking them in hello same way as HTTP requests.</span></span> <span data-ttu-id="bc16b-217">В Application Insights тип телеметрии запроса hello измеряет единицы именованный серверные работы, которая была ограничена по времени и могут независимо друг от друга завершаются успехом или сбоем.</span><span class="sxs-lookup"><span data-stu-id="bc16b-217">In Application Insights, hello Request telemetry type measures a unit of named server-side work that can be timed and can independently succeed or fail.</span></span> <span data-ttu-id="bc16b-218">Во время HTTP-запросы автоматически фиксируются по hello SDK, вы можете вставить свои собственные роли tooworker запросов tootrack кода.</span><span class="sxs-lookup"><span data-stu-id="bc16b-218">While HTTP requests are captured automatically by hello SDK, you can insert your own code tootrack requests tooworker roles.</span></span>

<span data-ttu-id="bc16b-219">В разделе hello два образца рабочих ролей инструментированного tooreport запросов: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) и [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span><span class="sxs-lookup"><span data-stu-id="bc16b-219">See hello two sample worker roles instrumented tooreport requests: [WorkerRoleA](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleA) and [WorkerRoleB](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService/WorkerRoleB)</span></span>

## <a name="exceptions"></a><span data-ttu-id="bc16b-220">Исключения</span><span class="sxs-lookup"><span data-stu-id="bc16b-220">Exceptions</span></span>
<span data-ttu-id="bc16b-221">Способы сбора необработанных исключений, выдаваемых веб-приложениями разных типов, см. в статье [Настройка Application Insights: диагностика исключений](app-insights-asp-net-exceptions.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-221">See [Monitoring Exceptions in Application Insights](app-insights-asp-net-exceptions.md) for information on how you can collect unhandled exceptions from different web application types.</span></span>

<span data-ttu-id="bc16b-222">веб-роль Образец Hello имеет MVC5 и веб-API 2 устройства.</span><span class="sxs-lookup"><span data-stu-id="bc16b-222">hello sample web role has MVC5 and Web API 2 controllers.</span></span> <span data-ttu-id="bc16b-223">Hello необработанные исключения из двух hello регистрируются с hello следующие обработчики.</span><span class="sxs-lookup"><span data-stu-id="bc16b-223">hello unhandled exceptions from hello two are captured with hello following handlers:</span></span>

* <span data-ttu-id="bc16b-224">объектом [AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs), заданным [здесь](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) для контроллеров MVC5;</span><span class="sxs-lookup"><span data-stu-id="bc16b-224">[AiHandleErrorAttribute](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiHandleErrorAttribute.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/FilterConfig.cs#L12) for MVC5 controllers</span></span>
* <span data-ttu-id="bc16b-225">объектом [AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs), заданным [здесь](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) для контроллеров веб-API 2.</span><span class="sxs-lookup"><span data-stu-id="bc16b-225">[AiWebApiExceptionLogger](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/Telemetry/AiWebApiExceptionLogger.cs) set up [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/MvcWebRole/App_Start/WebApiConfig.cs#L25) for Web API 2 controllers</span></span>

<span data-ttu-id="bc16b-226">Для рабочих ролей существует два способа tootrack исключения:</span><span class="sxs-lookup"><span data-stu-id="bc16b-226">For worker roles, there are two ways tootrack exceptions:</span></span>

* <span data-ttu-id="bc16b-227">TrackException(ex);</span><span class="sxs-lookup"><span data-stu-id="bc16b-227">TrackException(ex)</span></span>
* <span data-ttu-id="bc16b-228">При добавлении пакета NuGet прослушивателя трассировки Application Insights hello, можно использовать **System.Diagnostics.Trace** toolog исключения.</span><span class="sxs-lookup"><span data-stu-id="bc16b-228">If you have added hello Application Insights trace listener NuGet package, you can use **System.Diagnostics.Trace** toolog exceptions.</span></span> [<span data-ttu-id="bc16b-229">Пример кода</span><span class="sxs-lookup"><span data-stu-id="bc16b-229">Code example.</span></span>](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L107)

## <a name="performance-counters"></a><span data-ttu-id="bc16b-230">Счетчики производительности</span><span class="sxs-lookup"><span data-stu-id="bc16b-230">Performance Counters</span></span>
<span data-ttu-id="bc16b-231">по умолчанию собираются Hello следующие счетчики:</span><span class="sxs-lookup"><span data-stu-id="bc16b-231">hello following counters are collected by default:</span></span>

    * <span data-ttu-id="bc16b-232">\Process(??APP_WIN32_PROC??)\% Загруженность процессора</span><span class="sxs-lookup"><span data-stu-id="bc16b-232">\Process(??APP_WIN32_PROC??)\% Processor Time</span></span>
    * <span data-ttu-id="bc16b-233">\Память\доступные байты</span><span class="sxs-lookup"><span data-stu-id="bc16b-233">\Memory\Available Bytes</span></span>
    * <span data-ttu-id="bc16b-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# Исключений в секунду</span><span class="sxs-lookup"><span data-stu-id="bc16b-234">\.NET CLR Exceptions(??APP_CLR_PROC??)\# of Exceps Thrown / sec</span></span>
    * <span data-ttu-id="bc16b-235">\Process(??APP_WIN32_PROC??)\Байт исключительного пользования</span><span class="sxs-lookup"><span data-stu-id="bc16b-235">\Process(??APP_WIN32_PROC??)\Private Bytes</span></span>
    * <span data-ttu-id="bc16b-236">\Process(??APP_WIN32_PROC??)\I/O — обмен данными, байт в секунду</span><span class="sxs-lookup"><span data-stu-id="bc16b-236">\Process(??APP_WIN32_PROC??)\IO Data Bytes/sec</span></span>
    * <span data-ttu-id="bc16b-237">\Processor(_Total)\% Загруженность процессора</span><span class="sxs-lookup"><span data-stu-id="bc16b-237">\Processor(_Total)\% Processor Time</span></span>

<span data-ttu-id="bc16b-238">Эти счетчики также собираются для веб-ролей.</span><span class="sxs-lookup"><span data-stu-id="bc16b-238">For web roles, these counters are also collected:</span></span>

    * <span data-ttu-id="bc16b-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Запросов в секунду</span><span class="sxs-lookup"><span data-stu-id="bc16b-239">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests/Sec</span></span>
    * <span data-ttu-id="bc16b-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Время выполнения запросов</span><span class="sxs-lookup"><span data-stu-id="bc16b-240">\ASP.NET Applications(??APP_W3SVC_PROC??)\Request Execution Time</span></span>
    * <span data-ttu-id="bc16b-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Запросы в очереди приложений</span><span class="sxs-lookup"><span data-stu-id="bc16b-241">\ASP.NET Applications(??APP_W3SVC_PROC??)\Requests In Application Queue</span></span>

<span data-ttu-id="bc16b-242">Можно указать дополнительные пользовательские или другие счетчики производительности Windows, изменив файл ApplicationInsights.config, [как показано в этом примере](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span><span class="sxs-lookup"><span data-stu-id="bc16b-242">You can specify additional custom or other windows performance counters by editing ApplicationInsights.config [as in this example](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/ApplicationInsights.config#L14).</span></span>

  ![Счетчики производительности](./media/app-insights-cloudservices/OLfMo2f.png)

## <a name="correlated-telemetry-for-worker-roles"></a><span data-ttu-id="bc16b-244">Коррелированная телеметрия для рабочих ролей</span><span class="sxs-lookup"><span data-stu-id="bc16b-244">Correlated Telemetry for Worker Roles</span></span>
<span data-ttu-id="bc16b-245">Это богатые возможности диагностики, можно увидеть, какие индикаторы tooa сбой или высокой задержкой запроса.</span><span class="sxs-lookup"><span data-stu-id="bc16b-245">It is a rich diagnostic experience, when you can see what led tooa failed or high latency request.</span></span> <span data-ttu-id="bc16b-246">С веб-ролей приветствия SDK автоматически настраивает корреляции между сопутствующей телеметрии.</span><span class="sxs-lookup"><span data-stu-id="bc16b-246">With web roles, hello SDK automatically sets up correlation between related telemetry.</span></span> <span data-ttu-id="bc16b-247">Для рабочих ролей tooset инициализатора пользовательского телеметрии общий атрибут контекста Operation.Id можно использовать для всех tooachieve телеметрии hello это.</span><span class="sxs-lookup"><span data-stu-id="bc16b-247">For worker roles, you can use a custom telemetry initializer tooset a common Operation.Id context attribute for all hello telemetry tooachieve this.</span></span> <span data-ttu-id="bc16b-248">Это позволяет вам toosee проблему задержки и сбоев hello, вызываемые из-за зависимостей tooa или код, с первого взгляда!</span><span class="sxs-lookup"><span data-stu-id="bc16b-248">This allows you toosee whether hello latency/failure issue was caused due tooa dependency or your code, at a glance!</span></span> 

<span data-ttu-id="bc16b-249">Этот процесс описывается далее.</span><span class="sxs-lookup"><span data-stu-id="bc16b-249">Here's how:</span></span>

* <span data-ttu-id="bc16b-250">Задайте идентификатор корреляции hello в CallContext, как показано [здесь](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span><span class="sxs-lookup"><span data-stu-id="bc16b-250">Set hello correlation Id into a CallContext as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L36).</span></span> <span data-ttu-id="bc16b-251">В этом случае мы используем hello ИД запроса как идентификатор корреляции hello</span><span class="sxs-lookup"><span data-stu-id="bc16b-251">In this case, we are using hello Request ID as hello correlation id</span></span>
* <span data-ttu-id="bc16b-252">Добавление пользовательской реализации TelemetryInitializer, tooset hello Operation.Id toohello correlationId больше.</span><span class="sxs-lookup"><span data-stu-id="bc16b-252">Add a custom TelemetryInitializer implementation, tooset hello Operation.Id toohello correlationId set above.</span></span> <span data-ttu-id="bc16b-253">Пример: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13).</span><span class="sxs-lookup"><span data-stu-id="bc16b-253">There's an example here: [ItemCorrelationTelemetryInitializer](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/Telemetry/ItemCorrelationTelemetryInitializer.cs#L13)</span></span>
* <span data-ttu-id="bc16b-254">Добавьте инициализатор пользовательского телеметрии hello.</span><span class="sxs-lookup"><span data-stu-id="bc16b-254">Add hello custom telemetry initializer.</span></span> <span data-ttu-id="bc16b-255">Это можно сделать в файле ApplicationInsights.config hello, или в коде следующим [здесь](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span><span class="sxs-lookup"><span data-stu-id="bc16b-255">You could do that in hello ApplicationInsights.config file, or in code as shown [here](https://github.com/Microsoft/ApplicationInsights-Home/blob/master/Samples/AzureEmailService/WorkerRoleA/WorkerRoleA.cs#L233)</span></span>

<span data-ttu-id="bc16b-256">Вот и все!</span><span class="sxs-lookup"><span data-stu-id="bc16b-256">That's it!</span></span> <span data-ttu-id="bc16b-257">взаимодействие с порталом Hello уже подключено toohelp позволяет просматривать все связанные данные телеметрии с одного взгляда:</span><span class="sxs-lookup"><span data-stu-id="bc16b-257">hello portal experience is already wired up toohelp you see all associated telemetry at a glance:</span></span>

![Коррелированные данные телеметрии](./media/app-insights-cloudservices/bHxuUhd.png)

## <a name="client-telemetry"></a><span data-ttu-id="bc16b-259">Данные телеметрии клиента</span><span class="sxs-lookup"><span data-stu-id="bc16b-259">Client telemetry</span></span>
<span data-ttu-id="bc16b-260">[Добавить hello JavaScript SDK tooyour веб-страницы] [ client] tooget на основе браузера телеметрии, например число просмотров страниц, время загрузки страницы, исключений в скриптах и toolet записи настраиваемой телеметрии в скриптах страницы.</span><span class="sxs-lookup"><span data-stu-id="bc16b-260">[Add hello JavaScript SDK tooyour web pages][client] tooget browser-based telemetry such as page view counts, page load times, script exceptions, and toolet you write custom telemetry in your page scripts.</span></span>

## <a name="availability-tests"></a><span data-ttu-id="bc16b-261">Тесты доступности</span><span class="sxs-lookup"><span data-stu-id="bc16b-261">Availability tests</span></span>
<span data-ttu-id="bc16b-262">[Настройка веб-тестов] [ availability] toomake убедиться, что приложение остается динамической и отвечать на запросы.</span><span class="sxs-lookup"><span data-stu-id="bc16b-262">[Set up web tests][availability] toomake sure your application stays live and responsive.</span></span>

## <a name="display-everything-together"></a><span data-ttu-id="bc16b-263">Отображение всей информации вместе</span><span class="sxs-lookup"><span data-stu-id="bc16b-263">Display everything together</span></span>
<span data-ttu-id="bc16b-264">tooget общее представление о системе, можно использовать ключ hello диаграммы мониторинга вместе на одном [мониторинга](app-insights-dashboards.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-264">tooget an overall picture of your system, you can bring hello key monitoring charts together on one [dashboard](app-insights-dashboards.md).</span></span> <span data-ttu-id="bc16b-265">Например можно закрепить запрос hello и неудачных установок для каждой роли.</span><span class="sxs-lookup"><span data-stu-id="bc16b-265">For example, you could pin hello request and failure counts of each role.</span></span> 

<span data-ttu-id="bc16b-266">Если в системе используются другие службы Azure, такие как Stream Analytics, добавьте и их диаграммы мониторинга.</span><span class="sxs-lookup"><span data-stu-id="bc16b-266">If your system uses other Azure services such as Stream Analytics, include their monitoring charts as well.</span></span> 

<span data-ttu-id="bc16b-267">Если у вас есть мобильные клиентские приложения, некоторые коды toosend пользовательских событий ключа пользовательские операции вставки и создать [HockeyApp моста](app-insights-hockeyapp-bridge-app.md).</span><span class="sxs-lookup"><span data-stu-id="bc16b-267">If you have a client mobile app, insert some code toosend custom events on key user operations, and create a [HockeyApp bridge](app-insights-hockeyapp-bridge-app.md).</span></span> <span data-ttu-id="bc16b-268">Создание запросов в [Analytics](app-insights-analytics.md) toodisplay hello счетчиков событий и закреплять их toohello панели мониторинга.</span><span class="sxs-lookup"><span data-stu-id="bc16b-268">Create queries in [Analytics](app-insights-analytics.md) toodisplay hello event counts, and pin them toohello dashboard.</span></span>

## <a name="example"></a><span data-ttu-id="bc16b-269">Пример</span><span class="sxs-lookup"><span data-stu-id="bc16b-269">Example</span></span>
<span data-ttu-id="bc16b-270">[пример Hello](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) отслеживает службу с веб-роли и два рабочих ролей.</span><span class="sxs-lookup"><span data-stu-id="bc16b-270">[hello example](https://github.com/Microsoft/ApplicationInsights-Home/tree/master/Samples/AzureEmailService) monitors a service that has a web role and two worker roles.</span></span>

## <a name="exception-method-not-found-on-running-in-azure-cloud-services"></a><span data-ttu-id="bc16b-271">Исключение "метод не найден" при выполнении в облачных службах Azure</span><span class="sxs-lookup"><span data-stu-id="bc16b-271">Exception "method not found" on running in Azure Cloud Services</span></span>
<span data-ttu-id="bc16b-272">Выполняется сборка для .NET 4.6?</span><span class="sxs-lookup"><span data-stu-id="bc16b-272">Did you build for .NET 4.6?</span></span> <span data-ttu-id="bc16b-273">Версия 4.6 не поддерживается автоматически в ролях облачных служб Azure.</span><span class="sxs-lookup"><span data-stu-id="bc16b-273">4.6 is not automatically supported in Azure Cloud Services roles.</span></span> <span data-ttu-id="bc16b-274">[установите версию 4.6 в каждой роли](../cloud-services/cloud-services-dotnet-install-dotnet.md) .</span><span class="sxs-lookup"><span data-stu-id="bc16b-274">[Install 4.6 on each role](../cloud-services/cloud-services-dotnet-install-dotnet.md) before running your app.</span></span>

## <a name="video"></a><span data-ttu-id="bc16b-275">Видео</span><span class="sxs-lookup"><span data-stu-id="bc16b-275">Video</span></span>

> [!VIDEO https://channel9.msdn.com/events/Connect/2016/100/player]

## <a name="next-steps"></a><span data-ttu-id="bc16b-276">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="bc16b-276">Next steps</span></span>
* [<span data-ttu-id="bc16b-277">Настройка отправки аналитики tooApplication диагностики Azure</span><span class="sxs-lookup"><span data-stu-id="bc16b-277">Configure sending Azure Diagnostics tooApplication Insights</span></span>](app-insights-azure-diagnostics.md)
* [<span data-ttu-id="bc16b-278">Автоматизация создания ресурсов Application Insights</span><span class="sxs-lookup"><span data-stu-id="bc16b-278">Automate creation of Application Insights resources</span></span>](app-insights-powershell.md)
* [<span data-ttu-id="bc16b-279">Автоматизация системы диагностики Azure</span><span class="sxs-lookup"><span data-stu-id="bc16b-279">Automate Azure diagnostics</span></span>](app-insights-powershell-azure-diagnostics.md)
* [<span data-ttu-id="bc16b-280">Функции Azure</span><span class="sxs-lookup"><span data-stu-id="bc16b-280">Azure Functions</span></span>](https://github.com/christopheranderson/azure-functions-app-insights-sample)

[api]: app-insights-api-custom-events-metrics.md
[availability]: app-insights-monitor-web-app-availability.md
[azure]: app-insights-azure.md
[client]: app-insights-javascript.md
[diagnostic]: app-insights-diagnostic-search.md
[netlogs]: app-insights-asp-net-trace-logs.md
[portal]: http://portal.azure.com/
[qna]: app-insights-troubleshoot-faq.md
[redfield]: app-insights-monitor-performance-live-website-now.md
[start]: app-insights-overview.md 
