---
title: "поток hello aaaUnderstanding OAuth2 неявных разрешений в Azure AD | Документы Microsoft"
description: "Дополнительные сведения о реализации Azure Active Directory потока неявного предоставления hello OAuth2, и подходит ли она для вашего приложения."
services: active-directory
documentationcenter: dev-center-name
author: jmprieur
manager: mbaldwin
editor: 
ms.assetid: 90e42ff9-43b0-4b4f-a222-51df847b2a8d
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 11/15/2016
ms.author: jmprieur
ms.custom: aaddev
ms.openlocfilehash: 3402e6619709e1a5b1e790ffd79dc62139552d9d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-hello-oauth2-implicit-grant-flow-in-azure-active-directory-ad"></a>Основные сведения о hello OAuth2 неявное предоставление потока в Azure Active Directory (AD)
для предоставления hello с hello длинного списка проблемы безопасности в спецификации OAuth2 hello, важнее неявного предоставления Hello OAuth2. И еще, этот подход hello реализованные ADAL JS и hello, рекомендуется при написании приложений SPA. Что это дает? Это делается путем компромиссы: и оказывается, неявного предоставления hello является лучшим подходом hello можно применять для приложений, использующих веб-API через JavaScript в браузере.

## <a name="what-is-hello-oauth2-implicit-grant"></a>Что такое неявного предоставления OAuth2 hello
Hello quintessential [предоставления кода авторизации OAuth2](https://tools.ietf.org/html/rfc6749#section-1.3.1) — hello предоставления авторизации, который использует две отдельные конечные точки. Конечная точка авторизации Hello используется на этапе взаимодействие пользователя hello, что приводит к код авторизации. Конечная точка маркера Hello затем используется клиентом hello для обмена кода hello для токена доступа и часто токен обновления. Веб-приложения, свои собственные учетные данные toohello маркера конечной точки приложения, toopresent требуется, чтобы hello авторизации сервер может проверить подлинность клиента hello.

Hello [неявного предоставления OAuth2](https://tools.ietf.org/html/rfc6749#section-1.3.2) вариант предоставляет другие авторизации. Он позволяет tooobtain клиента маркер доступа (и id_token при использовании [OpenId Connect](http://openid.net/specs/openid-connect-core-1_0.html)) непосредственно из конечной точки авторизации hello без обращения конечная точка маркера hello ни проверки подлинности клиента hello. Этот вариант был специально разработан для JavaScript на основе приложений, работающих в веб-браузере: hello исходной спецификацией OAuth2, возвращаются токены фрагмент URI. Делает маркера bits hello доступных toohello код JavaScript в клиенте hello, но он гарантирует, что они не будут включены в перенаправления на сторону сервера hello. Возвращение токены через браузер перенаправляет непосредственно из конечной точки авторизации hello. Он также имеет преимущество hello устраняя все требования для кросс-origin вызовы, которые необходимы, если конечная точка маркера hello необходимые toocontact hello приложения JavaScript.

Важной характеристикой неявного предоставления hello OAuth2 — hello факт, что такие потоки никогда не возвращает обновления токенов toohello клиента. Как будет показано в следующем разделе hello, не является обязательным, действительно и фактически может представлять угрозу безопасности.

## <a name="suitable-scenarios-for-hello-oauth2-implicit-grant"></a>Предоставление подходящих сценариев для hello неявное OAuth2
Как объявляет самой спецификации OAuth2 hello, hello неявного предоставления был продумать tooenable агент пользователя приложения —, является toosay, JavaScript-приложений, выполняющихся в браузере. Определение характеристик такие приложения Hello является использование код JavaScript для доступа к ресурсам сервера (обычно веб-API) и обновление приложения hello UX соответствующим образом. Представьте приложениями, например Gmail или Outlook Web Access: при выборе сообщение в папку «Входящие» панели визуализации изменяет toodisplay hello новое выделение, при hello остальной части страницы приветствия только приветственное сообщение остается без изменений. Это в отличие от традиционных основе перенаправления веб-приложений, где каждый взаимодействие с пользователем приводит к обратной передачи целой страницы и подготовки в полностраничном hello новый ответ сервера.

Приложения, использующие extreme tooits подход на основе JavaScript hello называются приложений на одной странице или SPAs: hello идея заключается в том, что эти приложения только обслуживать начальной страницы HTML и связанные JavaScript с определяются все последующие действия Веб-API-вызовов, выполняемых через JavaScript. Однако гибридное подходов, когда приложения hello по большей части управляемых обратной передачи, но выполняет случайные JS вызовов, не являются редкими — hello обсуждение использования неявного потока применимо для тех, кто также.

Приложения на основе перенаправления традиционно защищают свои запросы с помощью файлов cookie, но этот метод не очень хорошо подходит для приложений JavaScript. Файлы "cookie" работают только относительно домена hello, которую они были созданы, пока вызовов JavaScript может направить других доменов. На самом деле, часто оказываются hello случай: обработки приложений, вызов API API Graph Office API, Microsoft Azure — всех находящихся за пределами домена hello, из которой обслуживается приложение hello. Растущий тренд для приложения JavaScript является toohave не серверной части, проверяющей 100% по сторонних производителей веб-API tooimplement их бизнес-функции.

В настоящее время hello предпочтительный метод защиты tooa вызовы веб-API подход toouse hello OAuth2 носителя токена, где каждый вызов сопровождается маркер доступа OAuth2. Hello веб-API проверяет входящий токен доступа hello и, при обнаружении в его hello необходимые области, он предоставляет доступ toohello запрошенную операцию. Hello неявного потока обеспечивает удобный механизм для приложений JavaScript tooobtain токены доступа для веб-API, предлагают многочисленные преимущества в учитывают toocookies:

* Токены можно надежно получить без каких-либо для кросс-вызовы источника — обязательной регистрации toowhich URI перенаправления hello, будут возвращать маркеры гарантирует, что токены не являются замещения
* Приложения JavaScript могут получать любое необходимое количество маркеров доступа для обращения к любому количеству веб-API без ограничений по доменам.
* Функции HTML5, такие как сеанса или локальное хранилище предоставления полного доступа к кэширования токенов и управление временем существования, тогда как непрозрачный toohello приложения управления файлы cookie
* Маркеры доступа не подвержены tooCross сайт атак с подделкой (CSRF) запросов

поток неявного предоставления Hello не выдает токены обновления, главным образом из соображений безопасности. В отличие от маркеров доступа, маркеры обновления не используются в узкой области. Они предоставляют больше возможностей, и поэтому их раскрытие причиняет больше вреда. В hello неявного потока токены доставляются в URL-АДРЕСЕ hello, поэтому hello риск перехвата выше, чем в предоставления кода авторизации hello.

Тем не менее Обратите внимание, что приложение JavaScript другой механизм окон обновлении токены доступа без запроса учетных данных пользователя hello несколько раз. Hello приложение может с помощью скрытого iframe tooperform новый токен запросов к hello конечную точку авторизации Azure AD: при условии, что браузере hello по-прежнему имеется активный сеанс (чтение: имеет файл cookie сеанса) относительно домена hello Azure AD hello запрос проверки подлинности может возникнуть успешно без необходимости вмешательства пользователя.

Эта модель позволяет hello JavaScript приложения hello обладателям tooindependently обновите маркеры доступа и даже получить новые для нового API (при условии, что hello пользователя ранее согласие для них. Это позволяет избежать hello добавлены нагрузку приобретение, обслуживание и защита артефакт высокое значение, такие как токен обновления. Hello артефакт, который позволяет hello автоматического обновления, файл cookie сеанса hello Azure AD, осуществляется вне приложения hello. Еще одно преимущество этого подхода — пользователь может выйти из Azure AD, с помощью любого приложения hello, вход в Azure AD, любого hello вкладки браузера. Это приведет к hello удаление файла cookie сеанса hello Azure AD и hello приложения JavaScript автоматически теряет возможность hello toorenew маркерах hello выход пользователя.

## <a name="is-hello-implicit-grant-suitable-for-my-app"></a>Hello неявного предоставления подходит для приложения?
неявного предоставления Hello содержит несколько рисков, чем другие предоставляет и hello областей требуется tooare внимания toopay подробно описаны в документации. Например [tooImpersonate неправильное использование из токена доступа владельца ресурса в неявного потока] [ OAuth2-Spec-Implicit-Misuse] и [модели угроз OAuth 2.0 и вопросы безопасности] [ OAuth2-Threat-Model-And-Security-Implications]). Однако hello выше профилю риска является главным образом из-за toohello факт, что он должен tooenable приложениях, выполняемых активном коде, обслуживаемых браузера tooa удаленный ресурс. При планировании архитектуры SPA имеют нет внутренних компонентов или хотите tooinvoke веб-API через JavaScript, рекомендуется использовать для получения маркера hello неявного потока.

Если приложение является собственный клиент, hello неявного потока не отлично подходит. отсутствие Hello файла cookie сеанса hello Azure AD в контексте hello собственного клиента deprives приложения hello средства поддержки долговременной сеанса. Это означает приложения несколько раз запросит hello пользователя при получении маркера доступа для новых ресурсов.

При разработке веб-приложения, который включает в себя серверной части и использует интерфейс API из внутреннего кода hello неявного потока также не является удачным выбором. Другие варианты предоставления маркера дают намного больше возможностей. Например предоставления учетных данных клиента hello OAuth2 предоставляет hello возможность tooobtain токены, отражающие hello разрешений, назначенных toohello самого приложения, в противоположность toouser делегирования. Это означает, что клиент hello имеет tooresources программный доступ toomaintain возможность hello, даже в том случае, если пользователь не активно участвует в сеансе и т. д. Кроме того, такое предоставление обеспечивает более высокий уровень безопасности. Например токены доступа никогда не проходить через браузер пользователя hello, они не существует риск не будут сохранены в журнал браузера hello и т. д. Hello клиентское приложение может выполнять строгой проверки подлинности при запросе маркера.

## <a name="next-steps"></a>Дальнейшие действия
* Полный список ресурсов для разработчиков, включая справочные сведения для протоколов hello и авторизации OAuth2 предоставлять поддержку потоков Azure AD, см. в разделе toohello [руководство разработчика Azure AD][AAD-Developers-Guide]
* В разделе [как toointegrate приложения с Azure AD] [ ACOM-How-To-Integrate] для дополнительных глубины на процесс интеграции приложения hello.

<!--Image references-->

<!--Reference style links in use-->
[AAD-Developers-Guide]: active-directory-developers-guide.md
[ACOM-How-And-Why-Apps-Added-To-AAD]: active-directory-how-applications-are-added.md
[ACOM-How-To-Integrate]: active-directory-how-to-integrate.md
[OAuth2-Spec-Implicit-Misuse]: https://tools.ietf.org/html/rfc6749#section-10.16
[OAuth2-Threat-Model-And-Security-Implications]: https://tools.ietf.org/html/rfc6819
