---
title: "aaaLearn об hello другой токен и типы, поддерживаемые Azure AD утверждений | Документы Microsoft"
description: "Руководство для понимания, оценке заявок hello в hello SAML 2.0 и веб-токены JSON (JWT) маркеры, выпущенные с Azure Active Directory (AAD)"
documentationcenter: na
author: dstrockis
services: active-directory
manager: mbaldwin
editor: 
ms.assetid: 166aa18e-1746-4c5e-b382-68338af921e2
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 02/08/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: c512894476613e94d86a994c32a8459d6cf00fbd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-token-reference"></a><span data-ttu-id="0050e-103">Справочник по токенам в Azure AD</span><span class="sxs-lookup"><span data-stu-id="0050e-103">Azure AD token reference</span></span>
<span data-ttu-id="0050e-104">Azure Active Directory (Azure AD) создает несколько типов маркеров безопасности во время обработки hello каждого потока проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="0050e-104">Azure Active Directory (Azure AD) emits several types of security tokens in hello processing of each authentication flow.</span></span> <span data-ttu-id="0050e-105">В этом документе описывается формат hello, характеристики безопасности и содержимого каждого типа маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-105">This document describes hello format, security characteristics, and contents of each type of token.</span></span>

## <a name="types-of-tokens"></a><span data-ttu-id="0050e-106">Типы маркеров</span><span class="sxs-lookup"><span data-stu-id="0050e-106">Types of tokens</span></span>
<span data-ttu-id="0050e-107">Azure AD поддерживает hello [протокола авторизации OAuth 2.0](active-directory-protocols-oauth-code.md), который использует access_tokens и refresh_tokens.</span><span class="sxs-lookup"><span data-stu-id="0050e-107">Azure AD supports hello [OAuth 2.0 authorization protocol](active-directory-protocols-oauth-code.md), which makes use of both access_tokens and refresh_tokens.</span></span>  <span data-ttu-id="0050e-108">Оно также поддерживает проверку подлинности и войти через [OpenID Connect](active-directory-protocols-openid-connect-code.md), который представляет тип маркера, id_token hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-108">It also supports authentication and sign-in via [OpenID Connect](active-directory-protocols-openid-connect-code.md), which introduces a third type of token, hello id_token.</span></span>  <span data-ttu-id="0050e-109">Каждый из этих маркеров представляется как "токен носителя".</span><span class="sxs-lookup"><span data-stu-id="0050e-109">Each of these tokens is represented as a "bearer token".</span></span>

<span data-ttu-id="0050e-110">Токен носителя — это упрощенный токен безопасности, предоставляет hello tooa доступа «bearer» защищенный ресурс.</span><span class="sxs-lookup"><span data-stu-id="0050e-110">A bearer token is a lightweight security token that grants hello “bearer” access tooa protected resource.</span></span> <span data-ttu-id="0050e-111">В этом смысле hello «bearer» является любая сторона, которая может предъявить токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-111">In this sense, hello “bearer” is any party that can present hello token.</span></span> <span data-ttu-id="0050e-112">Если требуется проверка подлинности с помощью Azure AD в заказ tooreceive токен носителя, необходимо выполнить действия токена, перехват tooprevent toosecure hello несанкционированной стороной.</span><span class="sxs-lookup"><span data-stu-id="0050e-112">Though authentication with Azure AD is required in order tooreceive a bearer token, steps must be taken toosecure hello token, tooprevent interception by an unintended party.</span></span> <span data-ttu-id="0050e-113">Так как токены носителя нет сторон tooprevent несанкционированный встроенный механизм использовать их, они должны передаваться в защищенном канале, например безопасность на уровне транспорта (HTTPS).</span><span class="sxs-lookup"><span data-stu-id="0050e-113">Because bearer tokens do not have a built-in mechanism tooprevent unauthorized parties from using them, they must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="0050e-114">Если токен носителя, передается в очистить hello, атаке hello man в среднем можно токен используется tooacquire hello и получить несанкционированный доступ tooa защищенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="0050e-114">If a bearer token is transmitted in hello clear, a man-in hello middle attack can be used tooacquire hello token and gain unauthorized access tooa protected resource.</span></span> <span data-ttu-id="0050e-115">Hello те же принципы безопасности применяются при сохранении или кэшировании токенов носителя для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="0050e-115">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="0050e-116">Необходимо всегда проверять, что приложение передает и сохраняет токены носителя безопасным образом.</span><span class="sxs-lookup"><span data-stu-id="0050e-116">Always ensure that your app transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="0050e-117">Дополнительные сведения о безопасности в случае применения токенов носителя см. в [RFC 6750, раздел 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="0050e-117">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="0050e-118">Многие hello токенов, выданных Azure AD реализуются как веб-маркеры JSON или JWT.</span><span class="sxs-lookup"><span data-stu-id="0050e-118">Many of hello tokens issued by Azure AD are implemented as JSON Web Tokens, or JWTs.</span></span>  <span data-ttu-id="0050e-119">Маркер JWT — это компактное и безопасное для URL-адреса средство передачи информации между двумя сторонами.</span><span class="sxs-lookup"><span data-stu-id="0050e-119">A JWT is a compact, URL-safe means of transferring information between two parties.</span></span>  <span data-ttu-id="0050e-120">Hello сведения, содержащиеся в JWT известны как «утверждения» или проверочные утверждения информации о носителя hello и субъект маркера hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-120">hello information contained in JWTs are known as "claims", or assertions of information about hello bearer and subject of hello token.</span></span>  <span data-ttu-id="0050e-121">утверждения Hello в JWT являются объектами JSON в кодировке и сериализацию для передачи.</span><span class="sxs-lookup"><span data-stu-id="0050e-121">hello claims in JWTs are JSON objects encoded and serialized for transmission.</span></span>  <span data-ttu-id="0050e-122">Поскольку hello JWT, выданного Azure AD подписан, но не шифруется, можно легко проверять содержимое hello JWT для целей отладки.</span><span class="sxs-lookup"><span data-stu-id="0050e-122">Since hello JWTs issued by Azure AD are signed, but not encrypted, you can easily inspect hello contents of a JWT for debugging purposes.</span></span>  <span data-ttu-id="0050e-123">Для этого существует несколько инструментов, таких как [jwt.calebb.net](http://jwt.calebb.net).</span><span class="sxs-lookup"><span data-stu-id="0050e-123">There are several tools available for doing so, such as [jwt.calebb.net](http://jwt.calebb.net).</span></span> <span data-ttu-id="0050e-124">Дополнительные сведения о JWT можно ссылаться toohello [спецификации JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="0050e-124">For more information on JWTs, you can refer toohello [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

## <a name="idtokens"></a><span data-ttu-id="0050e-125">Маркеры id_token</span><span class="sxs-lookup"><span data-stu-id="0050e-125">Id_tokens</span></span>
<span data-ttu-id="0050e-126">Маркеры id_token — это разновидность маркера безопасности входа, который приложение получается при аутентификации с использованием [OpenID Connect](active-directory-protocols-openid-connect-code.md).</span><span class="sxs-lookup"><span data-stu-id="0050e-126">Id_tokens are a form of sign-in security token that your app receives when performing authentication using [OpenID Connect](active-directory-protocols-openid-connect-code.md).</span></span>  <span data-ttu-id="0050e-127">Они представлены в виде [JWT](#types-of-tokens)и содержат утверждения, которые можно использовать для входа в приложение hello пользователя.</span><span class="sxs-lookup"><span data-stu-id="0050e-127">They are represented as [JWTs](#types-of-tokens), and contain claims that you can use for signing hello user into your app.</span></span>  <span data-ttu-id="0050e-128">Можно использовать утверждения hello в id_token как угодно — обычно используется для отображения сведений учетной записи или принятия решений управления доступом в приложении.</span><span class="sxs-lookup"><span data-stu-id="0050e-128">You can use hello claims in an id_token as you see fit - commonly they are used for displaying account information or making access control decisions in an app.</span></span>

<span data-ttu-id="0050e-129">На текущий момент маркеры "id_token" подписываются, но не зашифровываются.</span><span class="sxs-lookup"><span data-stu-id="0050e-129">Id_tokens are signed, but not encrypted at this time.</span></span>  <span data-ttu-id="0050e-130">Когда приложение получает id_token, он должен [проверки подписи hello](#validating-tokens) tooprove hello подлинность маркера и проверить его допустимость несколько утверждений в токен tooprove hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-130">When your app receives an id_token, it must [validate hello signature](#validating-tokens) tooprove hello token's authenticity and validate a few claims in hello token tooprove its validity.</span></span>  <span data-ttu-id="0050e-131">Hello утверждений, прошедшим проверку приложения зависят от требований к сценарию, но существуют некоторые [общие проверки утверждения](#validating-tokens) , приложение необходимо выполнить в каждом случае.</span><span class="sxs-lookup"><span data-stu-id="0050e-131">hello claims validated by an app vary depending on scenario requirements, but there are some [common claim validations](#validating-tokens) that your app must perform in every scenario.</span></span>

<span data-ttu-id="0050e-132">См. в следующем разделе сведения на id_tokens утверждений, а также id_token образец hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-132">See hello following section for information on id_tokens claims, as well as a sample id_token.</span></span>  <span data-ttu-id="0050e-133">Обратите внимание, что утверждения hello в id_tokens не возвращаются в любом порядке.</span><span class="sxs-lookup"><span data-stu-id="0050e-133">Note that hello claims in id_tokens are not returned in any particular order.</span></span>  <span data-ttu-id="0050e-134">Кроме того, в любой момент в маркеры "id_token" можно добавлять новые утверждения. При этом сбоев в работе приложения возникать не должно.</span><span class="sxs-lookup"><span data-stu-id="0050e-134">In addition, new claims can be introduced into id_tokens at any point in time - your app should not break as new claims are introduced.</span></span>  <span data-ttu-id="0050e-135">Hello следующий список содержит hello утверждения, которые приложение может надежно интерпретировать на момент написания этой статьи hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-135">hello following list includes hello claims that your app can reliably interpret at hello time of this writing.</span></span>  <span data-ttu-id="0050e-136">При необходимости еще более подробные сведения можно найти в hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="0050e-136">If necessary, even more detail can be found in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-idtoken"></a><span data-ttu-id="0050e-137">Пример маркера id_token</span><span class="sxs-lookup"><span data-stu-id="0050e-137">Sample id_token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJub25lIn0.eyJhdWQiOiIyZDRkMTFhMi1mODE0LTQ2YTctODkwYS0yNzRhNzJhNzMwOWUiLCJpc3MiOiJodHRwczovL3N0cy53aW5kb3dzLm5ldC83ZmU4MTQ0Ny1kYTU3LTQzODUtYmVjYi02ZGU1N2YyMTQ3N2UvIiwiaWF0IjoxMzg4NDQwODYzLCJuYmYiOjEzODg0NDA4NjMsImV4cCI6MTM4ODQ0NDc2MywidmVyIjoiMS4wIiwidGlkIjoiN2ZlODE0NDctZGE1Ny00Mzg1LWJlY2ItNmRlNTdmMjE0NzdlIiwib2lkIjoiNjgzODlhZTItNjJmYS00YjE4LTkxZmUtNTNkZDEwOWQ3NGY1IiwidXBuIjoiZnJhbmttQGNvbnRvc28uY29tIiwidW5pcXVlX25hbWUiOiJmcmFua21AY29udG9zby5jb20iLCJzdWIiOiJKV3ZZZENXUGhobHBTMVpzZjd5WVV4U2hVd3RVbTV5elBtd18talgzZkhZIiwiZmFtaWx5X25hbWUiOiJNaWxsZXIiLCJnaXZlbl9uYW1lIjoiRnJhbmsifQ.
```

> [!TIP]
> <span data-ttu-id="0050e-138">Для занятия, попробуйте проверки утверждений hello в id_token образец hello, вставив его в [calebb.net](http://jwt.calebb.net).</span><span class="sxs-lookup"><span data-stu-id="0050e-138">For practice, try inspecting hello claims in hello sample id_token by pasting it into [calebb.net](http://jwt.calebb.net).</span></span>
> 
> 

#### <a name="claims-in-idtokens"></a><span data-ttu-id="0050e-139">Утверждения в маркерах id_token</span><span class="sxs-lookup"><span data-stu-id="0050e-139">Claims in id_tokens</span></span>
> [!div class="mx-codeBreakAll"]
| <span data-ttu-id="0050e-140">Утверждение JWT</span><span class="sxs-lookup"><span data-stu-id="0050e-140">JWT Claim</span></span> | <span data-ttu-id="0050e-141">Name (Имя)</span><span class="sxs-lookup"><span data-stu-id="0050e-141">Name</span></span> | <span data-ttu-id="0050e-142">Описание</span><span class="sxs-lookup"><span data-stu-id="0050e-142">Description</span></span> |
| --- | --- | --- |
| `appid` |<span data-ttu-id="0050e-143">Идентификатор приложения</span><span class="sxs-lookup"><span data-stu-id="0050e-143">Application ID</span></span> |<span data-ttu-id="0050e-144">Идентифицирует hello приложение, использующее токен tooaccess hello ресурса.</span><span class="sxs-lookup"><span data-stu-id="0050e-144">Identifies hello application that is using hello token tooaccess a resource.</span></span> <span data-ttu-id="0050e-145">приложение Hello может действовать самостоятельно или от имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="0050e-145">hello application can act as itself or on behalf of a user.</span></span> <span data-ttu-id="0050e-146">Идентификатор приложения Hello обычно представляет объект приложения, но также может представлять объект участника службы в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-146">hello application ID typically represents an application object, but it can also represent a service principal object in Azure AD.</span></span> <br><br> <span data-ttu-id="0050e-147">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-147">**Example JWT Value**:</span></span> <br> `"appid":"15CB020F-3984-482A-864D-1D92265E8268"` |
| `aud` |<span data-ttu-id="0050e-148">Аудитория</span><span class="sxs-lookup"><span data-stu-id="0050e-148">Audience</span></span> |<span data-ttu-id="0050e-149">Hello предназначен получателя токена hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-149">hello intended recipient of hello token.</span></span> <span data-ttu-id="0050e-150">приложения Hello, которое получает токен hello необходимо убедиться, что значение, обозначающее аудиторию hello указано правильно и отклонять любые токены, предназначенные для другой аудитории.</span><span class="sxs-lookup"><span data-stu-id="0050e-150">hello application that receives hello token must verify that hello audience value is correct and reject any tokens intended for a different audience.</span></span> <br><br> <span data-ttu-id="0050e-151">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-151">**Example SAML Value**:</span></span> <br> `<AudienceRestriction>`<br>`<Audience>`<br>`https://contoso.com`<br>`</Audience>`<br>`</AudienceRestriction>` <br><br> <span data-ttu-id="0050e-152">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-152">**Example JWT Value**:</span></span> <br> `"aud":"https://contoso.com"` |
| `appidacr` |<span data-ttu-id="0050e-153">Application Authentication Context Class Reference</span><span class="sxs-lookup"><span data-stu-id="0050e-153">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="0050e-154">Указывает способ проверки подлинности клиента hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-154">Indicates how hello client was authenticated.</span></span> <span data-ttu-id="0050e-155">Для открытого клиента значение hello — 0.</span><span class="sxs-lookup"><span data-stu-id="0050e-155">For a public client, hello value is 0.</span></span> <span data-ttu-id="0050e-156">Если используются ИД клиента и секрет клиента, hello значение равно 1.</span><span class="sxs-lookup"><span data-stu-id="0050e-156">If client ID and client secret are used, hello value is 1.</span></span> <br><br> <span data-ttu-id="0050e-157">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-157">**Example JWT Value**:</span></span> <br> `"appidacr": "0"` |
| `acr` |<span data-ttu-id="0050e-158">Authentication Context Class Reference</span><span class="sxs-lookup"><span data-stu-id="0050e-158">Authentication Context Class Reference</span></span> |<span data-ttu-id="0050e-159">Указывает, как hello была выполнена проверка подлинности субъекта, как клиент противоположность toohello в утверждение ссылку на класс контекста аутентификации приложения hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-159">Indicates how hello subject was authenticated, as opposed toohello client in hello Application Authentication Context Class Reference claim.</span></span> <span data-ttu-id="0050e-160">Значение «0» указывает, что аутентификация конечного пользователя hello не отвечает требованиям hello объекта ISO/IEC 29115.</span><span class="sxs-lookup"><span data-stu-id="0050e-160">A value of "0" indicates hello end-user authentication did not meet hello requirements of ISO/IEC 29115.</span></span> <br><br> <span data-ttu-id="0050e-161">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-161">**Example JWT Value**:</span></span> <br> `"acr": "0"` |
| <span data-ttu-id="0050e-162">Authentication Instant</span><span class="sxs-lookup"><span data-stu-id="0050e-162">Authentication Instant</span></span> |<span data-ttu-id="0050e-163">Записи hello дату и время аутентификации.</span><span class="sxs-lookup"><span data-stu-id="0050e-163">Records hello date and time when authentication occurred.</span></span> <br><br> <span data-ttu-id="0050e-164">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-164">**Example SAML Value**:</span></span> <br> `<AuthnStatement AuthnInstant="2011-12-29T05:35:22.000Z">` | |
| `amr` |<span data-ttu-id="0050e-165">Метод проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="0050e-165">Authentication Method</span></span> |<span data-ttu-id="0050e-166">Определяет, как был аутентифицирован субъект hello hello маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-166">Identifies how hello subject of hello token was authenticated.</span></span> <br><br> <span data-ttu-id="0050e-167">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-167">**Example SAML Value**:</span></span> <br> `<AuthnContextClassRef>`<br>`http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod/password`<br>`</AuthnContextClassRef>` <br><br> <span data-ttu-id="0050e-168">**Пример значения JWT**: `“amr”: ["pwd"]`</span><span class="sxs-lookup"><span data-stu-id="0050e-168">**Example JWT Value**: `“amr”: ["pwd"]`</span></span> |
| `given_name` |<span data-ttu-id="0050e-169">Имя</span><span class="sxs-lookup"><span data-stu-id="0050e-169">First Name</span></span> |<span data-ttu-id="0050e-170">Предоставляет hello сначала или «данное имя пользователя hello» в виде набора в объекте пользователя Azure AD hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-170">Provides hello first or "given" name of hello user, as set on hello Azure AD user object.</span></span> <br><br> <span data-ttu-id="0050e-171">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-171">**Example SAML Value**:</span></span> <br> `<Attribute Name=”http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname”>`<br>`<AttributeValue>Frank<AttributeValue>` <br><br> <span data-ttu-id="0050e-172">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-172">**Example JWT Value**:</span></span> <br> `"given_name": "Frank"` |
| `groups` |<span data-ttu-id="0050e-173">Группы</span><span class="sxs-lookup"><span data-stu-id="0050e-173">Groups</span></span> |<span data-ttu-id="0050e-174">Предоставляет идентификаторы объектов, которые представляют Привет субъекта в группах.</span><span class="sxs-lookup"><span data-stu-id="0050e-174">Provides object IDs that represent hello subject's group memberships.</span></span> <span data-ttu-id="0050e-175">Эти значения являются уникальными (см. идентификатор объекта) и безопасно использовать для управления доступом, например принудительной авторизации tooaccess ресурса.</span><span class="sxs-lookup"><span data-stu-id="0050e-175">These values are unique (see Object ID) and can be safely used for managing access, such as enforcing authorization tooaccess a resource.</span></span> <span data-ttu-id="0050e-176">Hello группы, входящие в группы утверждения hello настраиваются на основе каждого приложения посредством свойства «groupMembershipClaims» hello манифест приложения hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-176">hello groups included in hello groups claim are configured on a per-application basis, through hello "groupMembershipClaims" property of hello application manifest.</span></span> <span data-ttu-id="0050e-177">Если установлено значение null, исключаются все группы, если значение SecurityGroup — включается только членство в группах безопасности Active Directory, а значение All подразумевает включение как групп безопасности, так и списков рассылки Office 365.</span><span class="sxs-lookup"><span data-stu-id="0050e-177">A value of null will exclude all groups, a value of "SecurityGroup" will include only Active Directory Security Group memberships, and a value of "All" will include both Security Groups and Office 365 Distribution Lists.</span></span> <br><br> <span data-ttu-id="0050e-178">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-178">**Example SAML Value**:</span></span> <br> `<Attribute Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/groups">`<br>`<AttributeValue>07dd8a60-bf6d-4e17-8844-230b77145381</AttributeValue>` <br><br> <span data-ttu-id="0050e-179">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-179">**Example JWT Value**:</span></span> <br> `“groups”: ["0e129f5b-6b0a-4944-982d-f776045632af", … ]` |
| `idp` |<span data-ttu-id="0050e-180">Identity Provider</span><span class="sxs-lookup"><span data-stu-id="0050e-180">Identity Provider</span></span> |<span data-ttu-id="0050e-181">Поставщик удостоверений записей hello проверку подлинности субъекта hello hello маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-181">Records hello identity provider that authenticated hello subject of hello token.</span></span> <span data-ttu-id="0050e-182">Это значение является значением идентичные toohello hello издателя утверждения, если учетная запись пользователя hello не работает в разным клиентам hello издателя.</span><span class="sxs-lookup"><span data-stu-id="0050e-182">This value is identical toohello value of hello Issuer claim unless hello user account is in a different tenant than hello issuer.</span></span> <br><br> <span data-ttu-id="0050e-183">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-183">**Example SAML Value**:</span></span> <br> `<Attribute Name=” http://schemas.microsoft.com/identity/claims/identityprovider”>`<br>`<AttributeValue>https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/<AttributeValue>` <br><br> <span data-ttu-id="0050e-184">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-184">**Example JWT Value**:</span></span> <br> `"idp":”https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/”` |
| `iat` |<span data-ttu-id="0050e-185">IssuedAt</span><span class="sxs-lookup"><span data-stu-id="0050e-185">IssuedAt</span></span> |<span data-ttu-id="0050e-186">Хранит время hello, какие hello выдачи маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-186">Stores hello time at which hello token was issued.</span></span> <span data-ttu-id="0050e-187">Чаще всего используется toomeasure возраста токена.</span><span class="sxs-lookup"><span data-stu-id="0050e-187">It is often used toomeasure token freshness.</span></span> <br><br> <span data-ttu-id="0050e-188">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-188">**Example SAML Value**:</span></span> <br> `<Assertion ID="_d5ec7a9b-8d8f-4b44-8c94-9812612142be" IssueInstant="2014-01-06T20:20:23.085Z" Version="2.0" xmlns="urn:oasis:names:tc:SAML:2.0:assertion">` <br><br> <span data-ttu-id="0050e-189">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-189">**Example JWT Value**:</span></span> <br> `"iat": 1390234181` |
| `iss` |<span data-ttu-id="0050e-190">Издатель</span><span class="sxs-lookup"><span data-stu-id="0050e-190">Issuer</span></span> |<span data-ttu-id="0050e-191">Идентифицирует hello службы маркеров безопасности (STS), создает и возвращает токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-191">Identifies hello security token service (STS) that constructs and returns hello token.</span></span> <span data-ttu-id="0050e-192">В возвращаемых Azure AD токенах hello hello издателем является sts.windows.net.</span><span class="sxs-lookup"><span data-stu-id="0050e-192">In hello tokens that Azure AD returns, hello issuer is sts.windows.net.</span></span> <span data-ttu-id="0050e-193">Hello GUID в значении утверждения издателя hello — идентификатор клиента hello hello каталог Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-193">hello GUID in hello Issuer claim value is hello tenant ID of hello Azure AD directory.</span></span> <span data-ttu-id="0050e-194">Идентификатор клиента Hello представляет неизменяемый и надежный идентификатор каталога hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-194">hello tenant ID is an immutable and reliable identifier of hello directory.</span></span> <br><br> <span data-ttu-id="0050e-195">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-195">**Example SAML Value**:</span></span> <br> `<Issuer>https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/</Issuer>` <br><br> <span data-ttu-id="0050e-196">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-196">**Example JWT Value**:</span></span> <br>  `"iss":”https://sts.windows.net/cbb1a5ac-f33b-45fa-9bf5-f37db0fed422/”` |
| `family_name` |<span data-ttu-id="0050e-197">Фамилия</span><span class="sxs-lookup"><span data-stu-id="0050e-197">Last Name</span></span> |<span data-ttu-id="0050e-198">Предоставляет фамилию hello, Фамилия или фамилию пользователя hello, как определено в объекте пользователя Azure AD hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-198">Provides hello last name, surname, or family name of hello user as defined in hello Azure AD user object.</span></span> <br><br> <span data-ttu-id="0050e-199">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-199">**Example SAML Value**:</span></span> <br> `<Attribute Name=” http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname”>`<br>`<AttributeValue>Miller<AttributeValue>` <br><br> <span data-ttu-id="0050e-200">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-200">**Example JWT Value**:</span></span> <br> `"family_name": "Miller"` |
| `unique_name` |<span data-ttu-id="0050e-201">Имя</span><span class="sxs-lookup"><span data-stu-id="0050e-201">Name</span></span> |<span data-ttu-id="0050e-202">Предоставляет читаемое значение, идентифицирующее субъект hello hello маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-202">Provides a human readable value that identifies hello subject of hello token.</span></span> <span data-ttu-id="0050e-203">Это значение не гарантируется, что toobe уникальный в пределах клиента и не спроектированных toobe используется только для отображения.</span><span class="sxs-lookup"><span data-stu-id="0050e-203">This value is not guaranteed toobe unique within a tenant and is designed toobe used only for display purposes.</span></span> <br><br> <span data-ttu-id="0050e-204">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-204">**Example SAML Value**:</span></span> <br> `<Attribute Name=”http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name”>`<br>`<AttributeValue>frankm@contoso.com<AttributeValue>` <br><br> <span data-ttu-id="0050e-205">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-205">**Example JWT Value**:</span></span> <br> `"unique_name": "frankm@contoso.com"` |
| `oid` |<span data-ttu-id="0050e-206">Object ID</span><span class="sxs-lookup"><span data-stu-id="0050e-206">Object ID</span></span> |<span data-ttu-id="0050e-207">Содержит уникальный идентификатор объекта в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-207">Contains a unique identifier of an object in Azure AD.</span></span> <span data-ttu-id="0050e-208">Это значение является неизменяемым и не может быть переназначено или повторно использовано.</span><span class="sxs-lookup"><span data-stu-id="0050e-208">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="0050e-209">Используйте tooidentify идентификатор объекта hello объекта в запросы tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-209">Use hello object ID tooidentify an object in queries tooAzure AD.</span></span> <br><br> <span data-ttu-id="0050e-210">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-210">**Example SAML Value**:</span></span> <br> `<Attribute Name="http://schemas.microsoft.com/identity/claims/objectidentifier">`<br>`<AttributeValue>528b2ac2-aa9c-45e1-88d4-959b53bc7dd0<AttributeValue>` <br><br> <span data-ttu-id="0050e-211">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-211">**Example JWT Value**:</span></span> <br> `"oid":"528b2ac2-aa9c-45e1-88d4-959b53bc7dd0"` |
| `roles` |<span data-ttu-id="0050e-212">Роли</span><span class="sxs-lookup"><span data-stu-id="0050e-212">Roles</span></span> |<span data-ttu-id="0050e-213">Контроль доступа представляет все роли приложений, которые hello субъекта был предоставлен напрямую или косвенно через членство в группе и может быть используется tooenforce на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="0050e-213">Represents all application roles that hello subject has been granted both directly and indirectly through group membership and can be used tooenforce role-based access control.</span></span> <span data-ttu-id="0050e-214">Роли приложения определяются на основе каждого приложения, используя hello `appRoles` свойства манифеста приложения hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-214">Application roles are defined on a per-application basis, through hello `appRoles` property of hello application manifest.</span></span> <span data-ttu-id="0050e-215">Hello `value` свойства каждой роли приложения — hello значение, которое отображается в утверждении ролей hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-215">hello `value` property of each application role is hello value that appears in hello roles claim.</span></span> <br><br> <span data-ttu-id="0050e-216">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-216">**Example SAML Value**:</span></span> <br> `<Attribute Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/role">`<br>`<AttributeValue>Admin</AttributeValue>` <br><br> <span data-ttu-id="0050e-217">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-217">**Example JWT Value**:</span></span> <br> `“roles”: ["Admin", … ]` |
| `scp` |<span data-ttu-id="0050e-218">Область</span><span class="sxs-lookup"><span data-stu-id="0050e-218">Scope</span></span> |<span data-ttu-id="0050e-219">Указывает hello олицетворения разрешения предоставленный toohello клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="0050e-219">Indicates hello impersonation permissions granted toohello client application.</span></span> <span data-ttu-id="0050e-220">разрешение по умолчанию Hello — `user_impersonation`.</span><span class="sxs-lookup"><span data-stu-id="0050e-220">hello default permission is `user_impersonation`.</span></span> <span data-ttu-id="0050e-221">Владелец Hello hello, защищенному ресурсу может регистрировать дополнительные значения в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-221">hello owner of hello secured resource can register additional values in Azure AD.</span></span> <br><br> <span data-ttu-id="0050e-222">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-222">**Example JWT Value**:</span></span> <br> `"scp": "user_impersonation"` |
| `sub` |<span data-ttu-id="0050e-223">Субъект</span><span class="sxs-lookup"><span data-stu-id="0050e-223">Subject</span></span> |<span data-ttu-id="0050e-224">Идентифицирует участника hello о какой hello подтверждает токен, сведения, такие как hello пользователя приложения.</span><span class="sxs-lookup"><span data-stu-id="0050e-224">Identifies hello principal about which hello token asserts information, such as hello user of an application.</span></span> <span data-ttu-id="0050e-225">Это значение является постоянным и не может быть переназначены или повторно, поэтому его можно проверки авторизации используется tooperform безопасно.</span><span class="sxs-lookup"><span data-stu-id="0050e-225">This value is immutable and cannot be reassigned or reused, so it can be used tooperform authorization checks safely.</span></span> <span data-ttu-id="0050e-226">Поскольку hello субъект всегда присутствует в hello маркеры hello Azure AD токенах, мы рекомендуем использовать это значение в системе авторизации общего назначения.</span><span class="sxs-lookup"><span data-stu-id="0050e-226">Because hello subject is always present in hello tokens hello Azure AD issues, we recommended using this value in a general purpose authorization system.</span></span> <br> <span data-ttu-id="0050e-227">`SubjectConfirmation` не является утверждением.</span><span class="sxs-lookup"><span data-stu-id="0050e-227">`SubjectConfirmation` is not a claim.</span></span> <span data-ttu-id="0050e-228">Он описывает, как проверяется субъект hello hello маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-228">It describes how hello subject of hello token is verified.</span></span> <span data-ttu-id="0050e-229">`Bearer`Указывает, что этот hello субъект подтвержден благодаря владению токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-229">`Bearer` indicates that hello subject is confirmed by their possession of hello token.</span></span> <br><br> <span data-ttu-id="0050e-230">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-230">**Example SAML Value**:</span></span> <br> `<Subject>`<br>`<NameID>S40rgb3XjhFTv6EQTETkEzcgVmToHKRkZUIsJlmLdVc</NameID>`<br>`<SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" />`<br>`</Subject>` <br><br> <span data-ttu-id="0050e-231">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-231">**Example JWT Value**:</span></span> <br> `"sub":"92d0312b-26b9-4887-a338-7b00fb3c5eab"` |
| `tid` |<span data-ttu-id="0050e-232">Tenant ID</span><span class="sxs-lookup"><span data-stu-id="0050e-232">Tenant ID</span></span> |<span data-ttu-id="0050e-233">Неизменяемый, однократного идентификатор, который идентифицирует клиента каталога hello, выдавшего токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-233">An immutable, non-reusable identifier that identifies hello directory tenant that issued hello token.</span></span> <span data-ttu-id="0050e-234">Ресурсы каталога конкретного клиента tooaccess это значение можно использовать в приложении несколькими клиентами.</span><span class="sxs-lookup"><span data-stu-id="0050e-234">You can use this value tooaccess tenant-specific directory resources in a multi-tenant application.</span></span> <span data-ttu-id="0050e-235">Например можно использовать этот клиент hello tooidentify значение в toohello вызова Graph API.</span><span class="sxs-lookup"><span data-stu-id="0050e-235">For example, you can use this value tooidentify hello tenant in a call toohello Graph API.</span></span> <br><br> <span data-ttu-id="0050e-236">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-236">**Example SAML Value**:</span></span> <br> `<Attribute Name=”http://schemas.microsoft.com/identity/claims/tenantid”>`<br>`<AttributeValue>cbb1a5ac-f33b-45fa-9bf5-f37db0fed422<AttributeValue>` <br><br> <span data-ttu-id="0050e-237">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-237">**Example JWT Value**:</span></span> <br> `"tid":"cbb1a5ac-f33b-45fa-9bf5-f37db0fed422"` |
| <span data-ttu-id="0050e-238">`nbf`, `exp`</span><span class="sxs-lookup"><span data-stu-id="0050e-238">`nbf`, `exp`</span></span> |<span data-ttu-id="0050e-239">Token Lifetime</span><span class="sxs-lookup"><span data-stu-id="0050e-239">Token Lifetime</span></span> |<span data-ttu-id="0050e-240">Определяет hello интервал времени, в течение которого действителен маркер.</span><span class="sxs-lookup"><span data-stu-id="0050e-240">Defines hello time interval within which a token is valid.</span></span> <span data-ttu-id="0050e-241">Hello служба, проверяющая токен hello следует убедиться в том, hello текущая дата — в hello время существования маркера, else отклонить токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-241">hello service that validates hello token should verify that hello current date is within hello token lifetime, else it should reject hello token.</span></span> <span data-ttu-id="0050e-242">Hello службы может разрешить для копирования toofive минут после окончания tooaccount диапазон времени существования маркера hello различия в формате времени («отклонение во времени») между Azure AD и службы hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-242">hello service might allow for up toofive minutes beyond hello token lifetime range tooaccount for any differences in clock time ("time skew") between Azure AD and hello service.</span></span> <br><br> <span data-ttu-id="0050e-243">**Пример значения SAML**:</span><span class="sxs-lookup"><span data-stu-id="0050e-243">**Example SAML Value**:</span></span> <br> `<Conditions`<br>`NotBefore="2013-03-18T21:32:51.261Z"`<br>`NotOnOrAfter="2013-03-18T22:32:51.261Z"`<br>`>` <br><br> <span data-ttu-id="0050e-244">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-244">**Example JWT Value**:</span></span> <br> `"nbf":1363289634, "exp":1363293234` |
| `upn` |<span data-ttu-id="0050e-245">Имя участника-пользователя</span><span class="sxs-lookup"><span data-stu-id="0050e-245">User Principal Name</span></span> |<span data-ttu-id="0050e-246">Сохраняет hello имя основного пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-246">Stores hello user name of hello user principal.</span></span><br><br> <span data-ttu-id="0050e-247">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-247">**Example JWT Value**:</span></span> <br> `"upn": frankm@contoso.com` |
| `ver` |<span data-ttu-id="0050e-248">Version (версия)</span><span class="sxs-lookup"><span data-stu-id="0050e-248">Version</span></span> |<span data-ttu-id="0050e-249">Содержит номер версии hello hello маркера.</span><span class="sxs-lookup"><span data-stu-id="0050e-249">Stores hello version number of hello token.</span></span> <br><br> <span data-ttu-id="0050e-250">**Пример значения JWT**:</span><span class="sxs-lookup"><span data-stu-id="0050e-250">**Example JWT Value**:</span></span> <br> `"ver": "1.0"` |

## <a name="access-tokens"></a><span data-ttu-id="0050e-251">Маркеры доступа</span><span class="sxs-lookup"><span data-stu-id="0050e-251">Access tokens</span></span>
<span data-ttu-id="0050e-252">После успешной проверки подлинности Azure AD возвращает маркер доступа, который можно использовать tooaccess защищенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="0050e-252">Upon successful authentication, Azure AD returns an access token, which can be used tooaccess protected resources.</span></span> <span data-ttu-id="0050e-253">маркер доступа Hello является JSON Web Token (JWT) в кодировке base-64, и его содержимое может проверяться с помощью декодера.</span><span class="sxs-lookup"><span data-stu-id="0050e-253">hello access token is a base 64 encoded JSON Web Token (JWT) and its contents can be inspected by running it through a decoder.</span></span>

<span data-ttu-id="0050e-254">Если приложение только *использует* tooAPIs доступа tooget маркеры доступа, можно (и следует обрабатываются токены доступа как полностью непрозрачный — это только строки, которые приложение сможет пройти tooresources HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="0050e-254">If your app only *uses* access tokens tooget access tooAPIs, you can (and should) treat access tokens as completely opaque - they are just strings which your app can pass tooresources in HTTP requests.</span></span>

<span data-ttu-id="0050e-255">При запросе маркера доступа Azure AD также возвращает некоторые метаданные hello маркер доступа для использования приложения.</span><span class="sxs-lookup"><span data-stu-id="0050e-255">When you request an access token, Azure AD also returns some metadata about hello access token for your app's consumption.</span></span>  <span data-ttu-id="0050e-256">Эти сведения включают hello срок действия маркера доступа hello и hello областей, для которых он допустим.</span><span class="sxs-lookup"><span data-stu-id="0050e-256">This information includes hello expiry time of hello access token and hello scopes for which it is valid.</span></span>  <span data-ttu-id="0050e-257">Это позволяет интеллектуальной кэширование маркеров доступа без необходимости tooparse открыть токен доступа hello сам tooperform вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="0050e-257">This allows your app tooperform intelligent caching of access tokens without having tooparse open hello access token itself.</span></span>

<span data-ttu-id="0050e-258">Если приложение является интерфейсом API, защищенные с помощью Azure AD, который ожидает токены доступа в HTTP-запросы, затем следует выполнить проверку и проверки токенов hello, получаемых.</span><span class="sxs-lookup"><span data-stu-id="0050e-258">If your app is an API protected with Azure AD that expects access tokens in HTTP requests, then you should perform validation and inspection of hello tokens you receive.</span></span> <span data-ttu-id="0050e-259">Приложения должен выполнить проверку маркера доступа hello перед его использованием tooaccess ресурсов.</span><span class="sxs-lookup"><span data-stu-id="0050e-259">Your app should perform validation of hello access token before using it tooaccess resources.</span></span> <span data-ttu-id="0050e-260">Дополнительные сведения о проверке см. в разделе [Проверка маркеров](#validating-tokens).</span><span class="sxs-lookup"><span data-stu-id="0050e-260">For more information on validation, please see [Validating Tokens](#validating-tokens).</span></span>  
<span data-ttu-id="0050e-261">Дополнительные сведения о toodo это с помощью .NET, в статье [защитить веб-API, с помощью маркеров носителя из Azure AD](active-directory-devquickstarts-webapi-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="0050e-261">For details on how toodo this with .NET, see [Protect a Web API using Bearer tokens from Azure AD](active-directory-devquickstarts-webapi-dotnet.md).</span></span>

## <a name="refresh-tokens"></a><span data-ttu-id="0050e-262">Маркеры обновления</span><span class="sxs-lookup"><span data-stu-id="0050e-262">Refresh tokens</span></span>

<span data-ttu-id="0050e-263">Обновить маркеры являются маркерами безопасности, которых приложение может использовать tooacquire новые маркеры доступа, см в потоке OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="0050e-263">Refresh tokens are security tokens, which your app can use tooacquire new access tokens in an OAuth 2.0 flow.</span></span>  <span data-ttu-id="0050e-264">Он позволяет вашей tooresources приложения tooachieve долгосрочной доступ от имени пользователя, не требуя взаимодействие с пользователем hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-264">It allows your app tooachieve long-term access tooresources on behalf of a user without requiring interaction by hello user.</span></span>

<span data-ttu-id="0050e-265">Маркеры обновления относятся к нескольким ресурсам.</span><span class="sxs-lookup"><span data-stu-id="0050e-265">Refresh tokens are multi-resource.</span></span>  <span data-ttu-id="0050e-266">Это toosay, токен обновления, полученные во время запроса маркера для одного ресурса может быть активирован для маркеры доступа tooa совершенно разных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="0050e-266">That is toosay that a refresh token received during a token request for one resource can be redeemed for access tokens tooa completely different resource.</span></span> <span data-ttu-id="0050e-267">toodo hello, этот набор `resource` параметр в запрос toohello hello целевой ресурс.</span><span class="sxs-lookup"><span data-stu-id="0050e-267">toodo this, set hello `resource` parameter in hello request toohello targeted resource.</span></span>

<span data-ttu-id="0050e-268">Токены обновления являются полностью непрозрачный tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="0050e-268">Refresh tokens are completely opaque tooyour app.</span></span> <span data-ttu-id="0050e-269">Они находятся в течение продолжительного времени, но приложения не должны быть написаны tooexpect, токен обновления будут продолжаться в течение любого периода времени.</span><span class="sxs-lookup"><span data-stu-id="0050e-269">They are long-lived, but your app should not be written tooexpect that a refresh token will last for any period of time.</span></span>  <span data-ttu-id="0050e-270">Маркеры обновления могут стать недействительными в любое время по разным причинам.</span><span class="sxs-lookup"><span data-stu-id="0050e-270">Refresh tokens can be invalidated at any moment in time for a variety of reasons.</span></span>  <span data-ttu-id="0050e-271">Здравствуйте, только для вашего приложения tooknow, если токен обновления является допустимым в том числе tooattempt tooredeem его, делая конечная точка маркера запроса маркера tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-271">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request tooAzure AD token endpoint.</span></span>

<span data-ttu-id="0050e-272">Когда вы активируете токен обновления для нового маркера доступа, вы получите новый маркер обновления в ответ на токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-272">When you redeem a refresh token for a new access token, you will receive a new refresh token in hello token response.</span></span>  <span data-ttu-id="0050e-273">Сохраняйте hello только что выданный маркер обновления, заменив hello, который используется в запросе hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-273">You should save hello newly issued refresh token, replacing hello one you used in hello request.</span></span>  <span data-ttu-id="0050e-274">Такой подход обеспечит максимальный срок действия маркеров обновления.</span><span class="sxs-lookup"><span data-stu-id="0050e-274">This will guarantee that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="0050e-275">Проверка маркеров</span><span class="sxs-lookup"><span data-stu-id="0050e-275">Validating tokens</span></span>

<span data-ttu-id="0050e-276">В порядке toovalidate букве id_token или access_token приложение должно проверять оба hello маркер подписи и hello утверждения.</span><span class="sxs-lookup"><span data-stu-id="0050e-276">In order toovalidate an id_token or an access_token, your app should validate both hello token's signature and hello claims.</span></span> <span data-ttu-id="0050e-277">Маркеры доступа toovalidate заказа приложения должны также проверять hello издатель, аудитория hello и hello подписи маркеров.</span><span class="sxs-lookup"><span data-stu-id="0050e-277">In order toovalidate access tokens, your app should also validate hello issuer, hello audience and hello signing tokens.</span></span> <span data-ttu-id="0050e-278">Они должны toobe проверяется hello значения в документе обнаружения hello OpenID.</span><span class="sxs-lookup"><span data-stu-id="0050e-278">These need toobe validated against hello values in hello OpenID discovery document.</span></span> <span data-ttu-id="0050e-279">Например, hello клиента независимых версия документа hello расположен в [https://login.microsoftonline.com/common/.well-known/openid-configuration](https://login.microsoftonline.com/common/.well-known/openid-configuration).</span><span class="sxs-lookup"><span data-stu-id="0050e-279">For example, hello tenant independent version of hello document is located at [https://login.microsoftonline.com/common/.well-known/openid-configuration](https://login.microsoftonline.com/common/.well-known/openid-configuration).</span></span> <span data-ttu-id="0050e-280">Azure AD по промежуточного слоя предусмотрены встроенные возможности для проверки маркеров доступа, а также можно выполнять поиск нашей [образцы](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-code-samples) toofind один языке hello по своему усмотрению.</span><span class="sxs-lookup"><span data-stu-id="0050e-280">Azure AD middleware has built-in capabilities for validating access tokens, and you can browse through our [samples](https://docs.microsoft.com/en-us/azure/active-directory/active-directory-code-samples) toofind one in hello language of your choice.</span></span> <span data-ttu-id="0050e-281">Дополнительные сведения о способ tooexplicitly проверки маркера JWT см. в разделе hello [вручную пример проверки JWT](https://github.com/Azure-Samples/active-directory-dotnet-webapi-manual-jwt-validation).</span><span class="sxs-lookup"><span data-stu-id="0050e-281">For more information on how tooexplicitly validate a JWT token, please see hello [manual JWT validation sample](https://github.com/Azure-Samples/active-directory-dotnet-webapi-manual-jwt-validation).</span></span>  

<span data-ttu-id="0050e-282">Мы предоставляем библиотеки и образцы кода, которые показывают, как tooeasily обрабатывать проверки токенов - hello ниже сведения просто предназначен для тех, кто обратиться hello toounderstand базовый процесс.</span><span class="sxs-lookup"><span data-stu-id="0050e-282">We provide libraries and code samples that show how tooeasily handle token validation - hello below information is simply provided for those who wish toounderstand hello underlying process.</span></span>  <span data-ttu-id="0050e-283">Для проверки токенов JWT также доступны несколько сторонних библиотек с открытым исходным кодом. Среди них вы найдете как минимум один вариант для каждой платформы и языка.</span><span class="sxs-lookup"><span data-stu-id="0050e-283">There are also several third party open source libraries available for JWT validation - there is at least one option for almost every platform and language out there.</span></span> <span data-ttu-id="0050e-284">Дополнительные сведения о библиотеках аутентификации Azure AD и примеры кода см. в статье [Библиотеки проверки подлинности Azure Active Directory](active-directory-authentication-libraries.md).</span><span class="sxs-lookup"><span data-stu-id="0050e-284">For more information about Azure AD authentication libraries and code samples, please see [Azure AD authentication libraries](active-directory-authentication-libraries.md).</span></span>

#### <a name="validating-hello-signature"></a><span data-ttu-id="0050e-285">Проверка подписи hello</span><span class="sxs-lookup"><span data-stu-id="0050e-285">Validating hello signature</span></span>

<span data-ttu-id="0050e-286">JWT содержит три сегмента, разделенные точками hello `.` символов.</span><span class="sxs-lookup"><span data-stu-id="0050e-286">A JWT contains three segments, which are separated by hello `.` character.</span></span>  <span data-ttu-id="0050e-287">Первый сегмент Hello называется hello **заголовок**, hello, во-вторых, как hello **текст**и hello в-третьих, как hello **подпись**.</span><span class="sxs-lookup"><span data-stu-id="0050e-287">hello first segment is known as hello **header**, hello second as hello **body**, and hello third as hello **signature**.</span></span>  <span data-ttu-id="0050e-288">Сегмент Hello подпись может быть используется toovalidate hello подлинность маркера hello, чтобы доверенным приложения.</span><span class="sxs-lookup"><span data-stu-id="0050e-288">hello signature segment can be used toovalidate hello authenticity of hello token so that it can be trusted by your app.</span></span>

<span data-ttu-id="0050e-289">Маркеры, выдаваемые Azure AD, подписываются при помощи стандартных отраслевых алгоритмов асимметричного шифрования, таких как RSA 256.</span><span class="sxs-lookup"><span data-stu-id="0050e-289">Tokens issued by Azure AD are signed using industry standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="0050e-290">Заголовок Hello hello JWT содержит сведения о ключе hello и метод шифрования используется токен hello toosign:</span><span class="sxs-lookup"><span data-stu-id="0050e-290">hello header of hello JWT contains information about hello key and encryption method used toosign hello token:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "x5t": "kriMPdmBvx68skT8-mPAB3BseeA"
}
```

<span data-ttu-id="0050e-291">Hello `alg` утверждение указывает hello алгоритм, который был токен используется toosign hello, при hello `x5t` утверждение указывает hello определенный открытый ключ, который был toosign используется токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-291">hello `alg` claim indicates hello algorithm that was used toosign hello token, while hello `x5t` claim indicates hello particular public key that was used toosign hello token.</span></span>

<span data-ttu-id="0050e-292">Azure AD может в любой момент времени подписать маркер идентификации с использованием любой пары открытого и закрытого ключей из определенного набора пар.</span><span class="sxs-lookup"><span data-stu-id="0050e-292">At any given point in time, Azure AD may sign an id_token using any one of a certain set of public-private key pairs.</span></span> <span data-ttu-id="0050e-293">Azure AD поворачивает hello возможный набор ключей на периодической основе так, что приложение должно записывать toohandle этих ключ автоматически изменяется.</span><span class="sxs-lookup"><span data-stu-id="0050e-293">Azure AD rotates hello possible set of keys on a periodic basis, so your app should be written toohandle those key changes automatically.</span></span>  <span data-ttu-id="0050e-294">Toocheck разумного частоты для обновления toohello открытых ключей, используемых Azure AD выполняется каждые 24 часа.</span><span class="sxs-lookup"><span data-stu-id="0050e-294">A reasonable frequency toocheck for updates toohello public keys used by Azure AD is every 24 hours.</span></span>

<span data-ttu-id="0050e-295">Можно получить hello подписание подпись hello необходимые toovalidate ключей данных с помощью документа OpenID Connect метаданных hello, расположенный в:</span><span class="sxs-lookup"><span data-stu-id="0050e-295">You can acquire hello signing key data necessary toovalidate hello signature by using hello OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="0050e-296">Попробуйте ввести этот URL-адрес в браузере.</span><span class="sxs-lookup"><span data-stu-id="0050e-296">Try this URL in a browser!</span></span>
> 
> 

<span data-ttu-id="0050e-297">Данный документ метаданных является объект JSON, содержащий несколько важных сведений, таких как расположение hello hello конечных точек, необходимые для выполнения проверки подлинности OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="0050e-297">This metadata document is a JSON object containing several useful pieces of information, such as hello location of hello various endpoints required for performing OpenID Connect authentication.</span></span>  

<span data-ttu-id="0050e-298">Он также включает `jwks_uri`, что дает hello расположение hello набор открытых ключей, как использовать toosign токены.</span><span class="sxs-lookup"><span data-stu-id="0050e-298">It also includes a `jwks_uri`, which gives hello location of hello set of public keys used toosign tokens.</span></span>  <span data-ttu-id="0050e-299">документ JSON Hello, расположенный hello `jwks_uri` содержит все hello сведения об открытом ключе используемый на этот конкретный момент времени.</span><span class="sxs-lookup"><span data-stu-id="0050e-299">hello JSON document located at hello `jwks_uri` contains all of hello public key information in use at that particular moment in time.</span></span>  <span data-ttu-id="0050e-300">Приложение может использовать hello `kid` утверждения в tooselect заголовок JWT hello, какие открытый ключ в этом документе было toosign используется данная лексема.</span><span class="sxs-lookup"><span data-stu-id="0050e-300">Your app can use hello `kid` claim in hello JWT header tooselect which public key in this document has been used toosign a particular token.</span></span>  <span data-ttu-id="0050e-301">Затем можно выполнить проверку подписи с использованием hello правильный открытый ключ и hello указанного алгоритма.</span><span class="sxs-lookup"><span data-stu-id="0050e-301">It can then perform signature validation using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="0050e-302">Выполнение проверки подписи вне hello рамки данного документа — помогающие сделать это при необходимости доступны многие библиотеки с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="0050e-302">Performing signature validation is outside hello scope of this document - there are many open source libraries available for helping you do so if necessary.</span></span>

#### <a name="validating-hello-claims"></a><span data-ttu-id="0050e-303">Проверка утверждения hello</span><span class="sxs-lookup"><span data-stu-id="0050e-303">Validating hello claims</span></span>

<span data-ttu-id="0050e-304">Когда приложение получает токен (id_token при входе пользователя, или маркер доступа в качестве токена носителя в запросе hello HTTP) его необходимо выполнить несколько проверки hello утверждений в токен hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-304">When your app receives a token (either an id_token upon user sign-in, or an access token as a bearer token in hello HTTP request) it should also perform a few checks against hello claims in hello token.</span></span>  <span data-ttu-id="0050e-305">Помимо прочего, к ним относятся:</span><span class="sxs-lookup"><span data-stu-id="0050e-305">These include but are not limited to:</span></span>

* <span data-ttu-id="0050e-306">Hello **аудитории** утверждения - tooverify, hello маркера было предполагаемым toobe заданному tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="0050e-306">hello **Audience** claim - tooverify that hello token was intended toobe given tooyour app.</span></span>
* <span data-ttu-id="0050e-307">Hello **вступления в силу** и **время истечения срока действия** утверждений - tooverify, hello маркера не истек.</span><span class="sxs-lookup"><span data-stu-id="0050e-307">hello **Not Before** and **Expiration Time** claims - tooverify that hello token has not expired.</span></span>
* <span data-ttu-id="0050e-308">Hello **издателя** утверждения - tooverify, hello маркера действительно был выпущен tooyour приложения Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-308">hello **Issuer** claim - tooverify that hello token was indeed issued tooyour app by Azure AD.</span></span>
* <span data-ttu-id="0050e-309">Hello **Nonce** -toomitigate атаки воспроизведения токена.</span><span class="sxs-lookup"><span data-stu-id="0050e-309">hello **Nonce** -  toomitigate a token replay attack.</span></span>
* <span data-ttu-id="0050e-310">и многое другое...</span><span class="sxs-lookup"><span data-stu-id="0050e-310">and more...</span></span>

<span data-ttu-id="0050e-311">Полный список проверки утверждений, выполните приложение для маркеров безопасности, см. в разделе toohello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span><span class="sxs-lookup"><span data-stu-id="0050e-311">For a full list of claim validations your app should perform for ID Tokens, refer toohello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span> <span data-ttu-id="0050e-312">Подробные сведения о hello ожидаемые значения для этих утверждений включаются в предыдущем hello [id_token раздел](#id-tokens) раздела.</span><span class="sxs-lookup"><span data-stu-id="0050e-312">Details of hello expected values for these claims are included in hello preceding [id_token section](#id-tokens) section.</span></span>

## <a name="sample-tokens"></a><span data-ttu-id="0050e-313">Примеры токенов</span><span class="sxs-lookup"><span data-stu-id="0050e-313">Sample Tokens</span></span>

<span data-ttu-id="0050e-314">В этом разделе приводятся примеры токенов SAML и JWT, которые возвращает служба Azure AD.</span><span class="sxs-lookup"><span data-stu-id="0050e-314">This section displays samples of SAML and JWT tokens that Azure AD returns.</span></span> <span data-ttu-id="0050e-315">В этих примерах позволяет увидеть hello утверждения в контексте.</span><span class="sxs-lookup"><span data-stu-id="0050e-315">These samples let you see hello claims in context.</span></span>

### <a name="saml-token"></a><span data-ttu-id="0050e-316">Токен SAML</span><span class="sxs-lookup"><span data-stu-id="0050e-316">SAML Token</span></span>

<span data-ttu-id="0050e-317">Ниже приведен пример типичного токена SAML.</span><span class="sxs-lookup"><span data-stu-id="0050e-317">This is a sample of a typical SAML token.</span></span>

    <?xml version="1.0" encoding="UTF-8"?>
    <t:RequestSecurityTokenResponse xmlns:t="http://schemas.xmlsoap.org/ws/2005/02/trust">
      <t:Lifetime>
        <wsu:Created xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2014-12-24T05:15:47.060Z</wsu:Created>
        <wsu:Expires xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">2014-12-24T06:15:47.060Z</wsu:Expires>
      </t:Lifetime>
      <wsp:AppliesTo xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy">
        <EndpointReference xmlns="http://www.w3.org/2005/08/addressing">
          <Address>https://contoso.onmicrosoft.com/MyWebApp</Address>
        </EndpointReference>
      </wsp:AppliesTo>
      <t:RequestedSecurityToken>
        <Assertion xmlns="urn:oasis:names:tc:SAML:2.0:assertion" ID="_3ef08993-846b-41de-99df-b7f3ff77671b" IssueInstant="2014-12-24T05:20:47.060Z" Version="2.0">
          <Issuer>https://sts.windows.net/b9411234-09af-49c2-b0c3-653adc1f376e/</Issuer>
          <ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
            <ds:SignedInfo>
              <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
              <ds:SignatureMethod Algorithm="http://www.w3.org/2001/04/xmldsig-more#rsa-sha256" />
              <ds:Reference URI="#_3ef08993-846b-41de-99df-b7f3ff77671b">
                <ds:Transforms>
                  <ds:Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature" />
                  <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#" />
                </ds:Transforms>
                <ds:DigestMethod Algorithm="http://www.w3.org/2001/04/xmlenc#sha256" />
                <ds:DigestValue>cV1J580U1pD24hEyGuAxrbtgROVyghCqI32UkER/nDY=</ds:DigestValue>
              </ds:Reference>
            </ds:SignedInfo>
            <ds:SignatureValue>j+zPf6mti8Rq4Kyw2NU2nnu0pbJU1z5bR/zDaKaO7FCTdmjUzAvIVfF8pspVR6CbzcYM3HOAmLhuWmBkAAk6qQUBmKsw+XlmF/pB/ivJFdgZSLrtlBs1P/WBV3t04x6fRW4FcIDzh8KhctzJZfS5wGCfYw95er7WJxJi0nU41d7j5HRDidBoXgP755jQu2ZER7wOYZr6ff+ha+/Aj3UMw+8ZtC+WCJC3yyENHDAnp2RfgdElJal68enn668fk8pBDjKDGzbNBO6qBgFPaBT65YvE/tkEmrUxdWkmUKv3y7JWzUYNMD9oUlut93UTyTAIGOs5fvP9ZfK2vNeMVJW7Xg==</ds:SignatureValue>
            <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
              <X509Data>
                <X509Certificate>MIIDPjCCAabcAwIBAgIQsRiM0jheFZhKk49YD0SK1TAJBgUrDgMCHQUAMC0xKzApBgNVBAMTImFjY291bnRzLmFjY2Vzc2NvbnRyb2wud2luZG93cy5uZXQwHhcNMTQwMTAxMDcwMDAwWhcNMTYwMTAxMDcwMDAwWjAtMSswKQYDVQQDEyJhY2NvdW50cy5hY2Nlc3Njb250cm9sLndpbmRvd3MubmV0MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAkSCWg6q9iYxvJE2NIhSyOiKvqoWCO2GFipgH0sTSAs5FalHQosk9ZNTztX0ywS/AHsBeQPqYygfYVJL6/EgzVuwRk5txr9e3n1uml94fLyq/AXbwo9yAduf4dCHTP8CWR1dnDR+Qnz/4PYlWVEuuHHONOw/blbfdMjhY+C/BYM2E3pRxbohBb3x//CfueV7ddz2LYiH3wjz0QS/7kjPiNCsXcNyKQEOTkbHFi3mu0u13SQwNddhcynd/GTgWN8A+6SN1r4hzpjFKFLbZnBt77ACSiYx+IHK4Mp+NaVEi5wQtSsjQtI++XsokxRDqYLwus1I1SihgbV/STTg5enufuwIDAQABo2IwYDBeBgNVHQEEVzBVgBDLebM6bK3BjWGqIBrBNFeNoS8wLTErMCkGA1UEAxMiYWNjb3VudHMuYWNjZXNzY29udHJvbC53aW5kb3dzLm5ldIIQsRiM0jheFZhKk49YD0SK1TAJBgUrDgMCHQUAA4IBAQCJ4JApryF77EKC4zF5bUaBLQHQ1PNtA1uMDbdNVGKCmSp8M65b8h0NwlIjGGGy/unK8P6jWFdm5IlZ0YPTOgzcRZguXDPj7ajyvlVEQ2K2ICvTYiRQqrOhEhZMSSZsTKXFVwNfW6ADDkN3bvVOVbtpty+nBY5UqnI7xbcoHLZ4wYD251uj5+lo13YLnsVrmQ16NCBYq2nQFNPuNJw6t3XUbwBHXpF46aLT1/eGf/7Xx6iy8yPJX4DyrpFTutDz882RWofGEO5t4Cw+zZg70dJ/hH/ODYRMorfXEW+8uKmXMKmX2wyxMKvfiPbTy5LmAU8Jvjs2tLg4rOBcXWLAIarZ</X509Certificate>
              </X509Data>
            </KeyInfo>
          </ds:Signature>
          <Subject>
            <NameID Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent">m_H3naDei2LNxUmEcWd0BZlNi_jVET1pMLR6iQSuYmo</NameID>
            <SubjectConfirmation Method="urn:oasis:names:tc:SAML:2.0:cm:bearer" />
          </Subject>
          <Conditions NotBefore="2014-12-24T05:15:47.060Z" NotOnOrAfter="2014-12-24T06:15:47.060Z">
            <AudienceRestriction>
              <Audience>https://contoso.onmicrosoft.com/MyWebApp</Audience>
            </AudienceRestriction>
          </Conditions>
          <AttributeStatement>
            <Attribute Name="http://schemas.microsoft.com/identity/claims/objectidentifier">
              <AttributeValue>a1addde8-e4f9-4571-ad93-3059e3750d23</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.microsoft.com/identity/claims/tenantid">
              <AttributeValue>b9411234-09af-49c2-b0c3-653adc1f376e</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name">
              <AttributeValue>sample.admin@contoso.onmicrosoft.com</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/surname">
              <AttributeValue>Admin</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.xmlsoap.org/ws/2005/05/identity/claims/givenname">
              <AttributeValue>Sample</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.microsoft.com/ws/2008/06/identity/claims/groups">
              <AttributeValue>5581e43f-6096-41d4-8ffa-04e560bab39d</AttributeValue>
              <AttributeValue>07dd8a89-bf6d-4e81-8844-230b77145381</AttributeValue>
              <AttributeValue>0e129f4g-6b0a-4944-982d-f776000632af</AttributeValue>
              <AttributeValue>3ee07328-52ef-4739-a89b-109708c22fb5</AttributeValue>
              <AttributeValue>329k14b3-1851-4b94-947f-9a4dacb595f4</AttributeValue>
              <AttributeValue>6e32c650-9b0a-4491-b429-6c60d2ca9a42</AttributeValue>
              <AttributeValue>f3a169a7-9a58-4e8f-9d47-b70029v07424</AttributeValue>
              <AttributeValue>8e2c86b2-b1ad-476d-9574-544d155aa6ff</AttributeValue>
              <AttributeValue>1bf80264-ff24-4866-b22c-6212e5b9a847</AttributeValue>
              <AttributeValue>4075f9c3-072d-4c32-b542-03e6bc678f3e</AttributeValue>
              <AttributeValue>76f80527-f2cd-46f4-8c52-8jvd8bc749b1</AttributeValue>
              <AttributeValue>0ba31460-44d0-42b5-b90c-47b3fcc48e35</AttributeValue>
              <AttributeValue>edd41703-8652-4948-94a7-2d917bba7667</AttributeValue>
            </Attribute>
            <Attribute Name="http://schemas.microsoft.com/identity/claims/identityprovider">
              <AttributeValue>https://sts.windows.net/b9411234-09af-49c2-b0c3-653adc1f376e/</AttributeValue>
            </Attribute>
          </AttributeStatement>
          <AuthnStatement AuthnInstant="2014-12-23T18:51:11.000Z">
            <AuthnContext>
              <AuthnContextClassRef>urn:oasis:names:tc:SAML:2.0:ac:classes:Password</AuthnContextClassRef>
            </AuthnContext>
          </AuthnStatement>
        </Assertion>
      </t:RequestedSecurityToken>
      <t:RequestedAttachedReference>
        <SecurityTokenReference xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:d3p1="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" d3p1:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0">
          <KeyIdentifier ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID">_3ef08993-846b-41de-99df-b7f3ff77671b</KeyIdentifier>
        </SecurityTokenReference>
      </t:RequestedAttachedReference>
      <t:RequestedUnattachedReference>
        <SecurityTokenReference xmlns="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:d3p1="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" d3p1:TokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0">
          <KeyIdentifier ValueType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLID">_3ef08993-846b-41de-99df-b7f3ff77671b</KeyIdentifier>
        </SecurityTokenReference>
      </t:RequestedUnattachedReference>
      <t:TokenType>http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV2.0</t:TokenType>
      <t:RequestType>http://schemas.xmlsoap.org/ws/2005/02/trust/Issue</t:RequestType>
      <t:KeyType>http://schemas.xmlsoap.org/ws/2005/05/identity/NoProofKey</t:KeyType>
    </t:RequestSecurityTokenResponse>

### <a name="jwt-token---user-impersonation"></a><span data-ttu-id="0050e-318">Токен JWT — олицетворение пользователя</span><span class="sxs-lookup"><span data-stu-id="0050e-318">JWT Token - User Impersonation</span></span>
<span data-ttu-id="0050e-319">Ниже приведен пример типичного токена JSON Web Token, используемого в потоке предоставления кода авторизации.</span><span class="sxs-lookup"><span data-stu-id="0050e-319">This is a sample of a typical JSON web token (JWT) used in an authorization code grant flow.</span></span>
<span data-ttu-id="0050e-320">В tooclaims сложения hello токен включает номер версии в **ver** и **appidacr**, hello проверки подлинности ссылку на класс контекста, который указывает способ проверки подлинности клиента hello.</span><span class="sxs-lookup"><span data-stu-id="0050e-320">In addition tooclaims, hello token includes a version number in **ver** and **appidacr**, hello authentication context class reference, which indicates how hello client was authenticated.</span></span> <span data-ttu-id="0050e-321">Для открытого клиента значение hello — 0.</span><span class="sxs-lookup"><span data-stu-id="0050e-321">For a public client, hello value is 0.</span></span> <span data-ttu-id="0050e-322">Если использовался идентификатор клиента и секрет клиента, hello значение равно 1.</span><span class="sxs-lookup"><span data-stu-id="0050e-322">If a client ID or client secret was used, hello value is 1.</span></span>

    {
     typ: "JWT",
     alg: "RS256",
     x5t: "kriMPdmBvx68skT8-mPAB3BseeA"
    }.
    {
     aud: "https://contoso.onmicrosoft.com/scratchservice",
     iss: "https://sts.windows.net/b9411234-09af-49c2-b0c3-653adc1f376e/",
     iat: 1416968588,
     nbf: 1416968588,
     exp: 1416972488,
     ver: "1.0",
     tid: "b9411234-09af-49c2-b0c3-653adc1f376e",
     amr: [
      "pwd"
     ],
     roles: [
      "Admin"
     ],
     oid: "6526e123-0ff9-4fec-ae64-a8d5a77cf287",
     upn: "sample.user@contoso.onmicrosoft.com",
     unique_name: "sample.user@contoso.onmicrosoft.com",
     sub: "yf8C5e_VRkR1egGxJSDt5_olDFay6L5ilBA81hZhQEI",
     family_name: "User",
     given_name: "Sample",
     groups: [
      "0e129f6b-6b0a-4944-982d-f776000632af",
      "323b13b3-1851-4b94-947f-9a4dacb595f4",
      "6e32c250-9b0a-4491-b429-6c60d2ca9a42",
      "f3a161a7-9a58-4e8f-9d47-b70022a07424",
      "8d4c81b2-b1ad-476d-9574-544d155aa6ff",
      "1bf80164-ff24-4866-b19c-6212e5b9a847",
      "76f80127-f2cd-46f4-8c52-8edd8bc749b1",
      "0ba27160-44d0-42b5-b90c-47b3fcc48e35"
     ],
     appid: "b075ddef-0efa-123b-997b-de1337c29185",
     appidacr: "1",
     scp: "user_impersonation",
     acr: "1"
    }.

## <a name="related-content"></a><span data-ttu-id="0050e-323">Связанная информация</span><span class="sxs-lookup"><span data-stu-id="0050e-323">Related content</span></span>
* <span data-ttu-id="0050e-324">В разделе hello Azure AD Graph [операции политики](https://msdn.microsoft.com/library/azure/ad/graph/api/policy-operations) и hello [объектом политики](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#policy-entity), toolearn Дополнительные сведения об управлении политикой времени существования маркера через hello API Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="0050e-324">See hello Azure AD Graph [Policy operations](https://msdn.microsoft.com/library/azure/ad/graph/api/policy-operations) and hello [Policy entity](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#policy-entity), toolearn more about managing token lifetime policy via hello Azure AD Graph API.</span></span>
* <span data-ttu-id="0050e-325">Дополнительные сведения об управлении политиками посредством командлетов PowerShell, включая примеры, см. в разделе [Configurable Token Lifetimes in Azure Active Directory (Public Preview)](../active-directory-configurable-token-lifetimes.md) (Настраиваемое время существования маркеров в Azure Active Directory (общедоступная предварительная версия)).</span><span class="sxs-lookup"><span data-stu-id="0050e-325">For more information and samples on managing policies via PowerShell cmdlets, including samples, see [Configurable token lifetimes in Azure AD](../active-directory-configurable-token-lifetimes.md).</span></span> 
