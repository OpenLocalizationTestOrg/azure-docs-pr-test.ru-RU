---
title: "aaaAzure Active Directory Graph API | Документы Microsoft"
description: "Общие сведения и примеры использования руководства для hello Graph API, который обеспечивает программный доступ к tooAzure AD через конечные точки REST API."
services: active-directory
documentationcenter: 
author: viv-liu
manager: mbaldwin
editor: mbaldwin
ms.assetid: 5471ad74-20b3-44df-a2b5-43cde2c0a045
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: viviali
ms.custom: aaddev
ms.openlocfilehash: cde1dd86b0ca1dc24a5b46dc578b6245ba98751f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-graph-api"></a><span data-ttu-id="ceb26-103">API Graph Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ceb26-103">Azure Active Directory Graph API</span></span>
> [!IMPORTANT]
> <span data-ttu-id="ceb26-104">Мы настоятельно рекомендуем использовать [Microsoft Graph](https://graph.microsoft.io/) вместо API Azure AD Graph tooaccess ресурсов Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="ceb26-104">We strongly recommend that you use [Microsoft Graph](https://graph.microsoft.io/) instead of Azure AD Graph API tooaccess Azure Active Directory resources.</span></span> <span data-ttu-id="ceb26-105">В настоящее время усилия наших разработчиков направлены на Microsoft Graph, и дальнейшие усовершенствования API Azure AD Graph не планируются.</span><span class="sxs-lookup"><span data-stu-id="ceb26-105">Our development efforts are now concentrated on Microsoft Graph and no further enhancements are planned for Azure AD Graph API.</span></span> <span data-ttu-id="ceb26-106">Существует очень ограниченное количество сценариев, для которых API Azure AD Graph по-прежнему может быть целесообразным; Дополнительные сведения см. в разделе hello [Microsoft Graph или hello Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) блога в hello центра разработки для Office.</span><span class="sxs-lookup"><span data-stu-id="ceb26-106">There are a very limited number of scenarios for which Azure AD Graph API might still be appropriate; for more information, see hello [Microsoft Graph or hello Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) blog post in hello Office Dev Center.</span></span>
> 
> 

<span data-ttu-id="ceb26-107">Hello Azure Active Directory Graph API обеспечивает программный доступ tooAzure AD через конечные точки REST API.</span><span class="sxs-lookup"><span data-stu-id="ceb26-107">hello Azure Active Directory Graph API provides programmatic access tooAzure AD through REST API endpoints.</span></span> <span data-ttu-id="ceb26-108">Приложения могут использовать Graph API tooperform hello создания, чтения, обновления и удаления (CRUD) с данными и объектами каталогов.</span><span class="sxs-lookup"><span data-stu-id="ceb26-108">Applications can use hello Graph API tooperform create, read, update, and delete (CRUD) operations on directory data and objects.</span></span> <span data-ttu-id="ceb26-109">Например hello Graph API поддерживает hello следующих общих действий для объекта-пользователя:</span><span class="sxs-lookup"><span data-stu-id="ceb26-109">For example, hello Graph API supports hello following common operations for a user object:</span></span>

* <span data-ttu-id="ceb26-110">Создание нового пользователя в каталоге.</span><span class="sxs-lookup"><span data-stu-id="ceb26-110">Create a new user in a directory</span></span>
* <span data-ttu-id="ceb26-111">Получение подробных свойств пользователя, например его группы.</span><span class="sxs-lookup"><span data-stu-id="ceb26-111">Get a user’s detailed properties, such as their groups</span></span>
* <span data-ttu-id="ceb26-112">Обновление свойств пользователя, например его расположения и номера телефона, или изменение его пароля.</span><span class="sxs-lookup"><span data-stu-id="ceb26-112">Update a user’s properties, such as their location and phone number, or change their password</span></span>
* <span data-ttu-id="ceb26-113">Проверка членства в группах для доступа на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="ceb26-113">Check a user’s group membership for role-based access</span></span>
* <span data-ttu-id="ceb26-114">Отключение или полное удаление учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="ceb26-114">Disable a user’s account or delete it entirely</span></span>

<span data-ttu-id="ceb26-115">В дополнение toouser объектов можно выполнять подобных операций на другие объекты, такие как группы и приложения.</span><span class="sxs-lookup"><span data-stu-id="ceb26-115">In addition toouser objects, you can perform similar operations on other objects such as groups and applications.</span></span> <span data-ttu-id="ceb26-116">hello toocall API Graph в каталоге приложения hello, должны быть зарегистрированы в Azure AD и быть настроен каталог toohello tooallow доступа.</span><span class="sxs-lookup"><span data-stu-id="ceb26-116">toocall hello Graph API on a directory, hello application must be registered with Azure AD and be configured tooallow access toohello directory.</span></span> <span data-ttu-id="ceb26-117">Обычно это делается с помощью потока согласия пользователя или администратора.</span><span class="sxs-lookup"><span data-stu-id="ceb26-117">This is normally achieved through a user or admin consent flow.</span></span>

<span data-ttu-id="ceb26-118">с помощью toobegin hello Azure AD Graph API, разделе hello [Graph API краткого руководства](active-directory-graph-api-quickstart.md), или представление hello [интерактивный справочника по Graph API](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span><span class="sxs-lookup"><span data-stu-id="ceb26-118">toobegin using hello Azure Active Directory Graph API, see hello [Graph API Quickstart Guide](active-directory-graph-api-quickstart.md), or view hello [interactive Graph API reference documentation](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>

## <a name="features"></a><span data-ttu-id="ceb26-119">Функции</span><span class="sxs-lookup"><span data-stu-id="ceb26-119">Features</span></span>
<span data-ttu-id="ceb26-120">Hello Graph API предоставляет hello следующие атрибуты:</span><span class="sxs-lookup"><span data-stu-id="ceb26-120">hello Graph API provides hello following features:</span></span>

* <span data-ttu-id="ceb26-121">**Конечные точки API REST**: hello Graph API — эта служба состоит из конечных точек, доступных с помощью стандартных HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="ceb26-121">**REST API Endpoints**: hello Graph API is a RESTful service comprised of endpoints that are accessed using standard HTTP requests.</span></span> <span data-ttu-id="ceb26-122">Hello Graph API поддерживает типы контента XML или нотации объектов Javascript (JSON) для запросов и ответов.</span><span class="sxs-lookup"><span data-stu-id="ceb26-122">hello Graph API supports XML or Javascript Object Notation (JSON) content types for requests and responses.</span></span> <span data-ttu-id="ceb26-123">Дополнительные сведения см. в [справочнике по Azure AD Graph REST API](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span><span class="sxs-lookup"><span data-stu-id="ceb26-123">For more information, see [Azure AD Graph REST API Reference](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>
* <span data-ttu-id="ceb26-124">**Проверка подлинности с помощью Azure AD**: каждый toohello запрос Graph API должен пройти проверку подлинности путем добавления JSON Web Token (JWT) в заголовок авторизации hello hello запроса.</span><span class="sxs-lookup"><span data-stu-id="ceb26-124">**Authentication with Azure AD**: Every request toohello Graph API must be authenticated by appending a JSON Web Token (JWT) in hello Authorization header of hello request.</span></span> <span data-ttu-id="ceb26-125">Этот маркер можно получить путем создания конечной точки маркера запроса tooAzure AD и предоставления действительных учетных данных.</span><span class="sxs-lookup"><span data-stu-id="ceb26-125">This token is acquired by making a request tooAzure AD’s token endpoint and providing valid credentials.</span></span> <span data-ttu-id="ceb26-126">Можно использовать поток клиентских учетных данных OAuth 2.0 hello или разрешений кода авторизации hello, tooacquire потока типа маркера toocall hello графа.</span><span class="sxs-lookup"><span data-stu-id="ceb26-126">You can use hello OAuth 2.0 client credentials flow or hello authorization code grant flow tooacquire a token toocall hello Graph.</span></span> <span data-ttu-id="ceb26-127">Дополнительные сведения см. в статье [Авторизация доступа к веб-приложениям с помощью OAuth 2.0 и Azure Active Directory](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span><span class="sxs-lookup"><span data-stu-id="ceb26-127">For more information, [OAuth 2.0 in Azure AD](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span></span>
* <span data-ttu-id="ceb26-128">**Авторизация на основе ролей (RBAC)**: группы безопасности, используемые tooperform RBAC в Graph API hello.</span><span class="sxs-lookup"><span data-stu-id="ceb26-128">**Role-Based Authorization (RBAC)**: Security groups are used tooperform RBAC in hello Graph API.</span></span> <span data-ttu-id="ceb26-129">Например, если вы хотите toodetermine ли у пользователя есть доступ tooa определенного ресурса, hello приложение может вызвать hello [проверка членства в группе (транзитивно)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive) операцию, которая возвращает значение true или false.</span><span class="sxs-lookup"><span data-stu-id="ceb26-129">For example, if you want toodetermine whether a user has access tooa specific resource, hello application can call hello [Check Group Membership (transitive)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive) operation, which returns true or false.</span></span>
* <span data-ttu-id="ceb26-130">**Разностный запрос**: Если требуется toocheck изменений в каталоге между двумя периодами без toomake частые запросы toohello Graph API, можно сделать разностного запроса.</span><span class="sxs-lookup"><span data-stu-id="ceb26-130">**Differential Query**: If you want toocheck for changes in a directory between two time periods without having toomake frequent queries toohello Graph API, you can make a differential query request.</span></span> <span data-ttu-id="ceb26-131">Этот тип запроса возвращает только hello изменения между hello предыдущего разностного запроса и hello текущего запроса.</span><span class="sxs-lookup"><span data-stu-id="ceb26-131">This type of request will return only hello changes made between hello previous differential query request and hello current request.</span></span> <span data-ttu-id="ceb26-132">Дополнительные сведения см. в статье [Разностный запрос | Общие понятия API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span><span class="sxs-lookup"><span data-stu-id="ceb26-132">For more information, see [Azure AD Graph API Differential Query](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span></span>
* <span data-ttu-id="ceb26-133">**Расширения каталогов**: Если вы разрабатываете приложение, требующее tooread или запись уникальные свойства для объектов каталога, можно зарегистрировать и использовать значения расширений с помощью Graph API hello.</span><span class="sxs-lookup"><span data-stu-id="ceb26-133">**Directory Extensions**: If you are developing an application that needs tooread or write unique properties for directory objects, you can register and use extension values by using hello Graph API.</span></span> <span data-ttu-id="ceb26-134">Например если приложению требуется идентификатор Скайп свойство для каждого пользователя, можно зарегистрировать hello новое свойство в каталоге hello, и она будет доступна для каждого объекта пользователя.</span><span class="sxs-lookup"><span data-stu-id="ceb26-134">For example, if your application requires a Skype ID property for each user, you can register hello new property in hello directory and it will be available on every user object.</span></span> <span data-ttu-id="ceb26-135">Дополнительные сведения см. в статье [Расширения схемы каталогов | Общие понятия API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span><span class="sxs-lookup"><span data-stu-id="ceb26-135">For more information, see [Azure AD Graph API Directory Schema Extensions](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span></span>
* <span data-ttu-id="ceb26-136">**Защищен области разрешений**: AAD Graph API предоставляет области разрешений, которые позволяют защитить согласие доступа tooAAD данные и поддерживает широкий набор типов клиентских приложений, включая:</span><span class="sxs-lookup"><span data-stu-id="ceb26-136">**Secured by permission scopes**: AAD Graph API exposes permission scopes that enable secure/consented access tooAAD data, and support a variety of client app types, including:</span></span>
  
  * <span data-ttu-id="ceb26-137">имеющих пользовательский интерфейс, который получают делегированный доступ к toodata через авторизации из hello пользователя, выполнившего вход (делегированы)</span><span class="sxs-lookup"><span data-stu-id="ceb26-137">those with a user interface which are given delegated access toodata via authorization from hello signed-in user (delegated)</span></span>
  * <span data-ttu-id="ceb26-138">приложения, использующие контроль доступа основе ролей, например клиенты службы или управляющей программы (роли приложений).</span><span class="sxs-lookup"><span data-stu-id="ceb26-138">those that use application-define role-based access control such as service/daemon clients (app roles)</span></span>
    
    <span data-ttu-id="ceb26-139">Оба делегируются и области разрешений роли приложения представляют прав доступа, предоставляемые Graph API hello и могут запрашиваться клиентскими приложениями через разрешения для регистрации приложения [возможности hello портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="ceb26-139">Both delegated and app role permission scopes represent a privilege exposed by hello Graph API and can be requested by client applications through application registration permissions [features in hello Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="ceb26-140">Клиенты могут проверить hello области разрешений предоставлен toothem путем проверки утверждений hello области («scp»), полученных в маркере доступа hello для делегирования разрешений и утверждения hello роли («») для разрешения роли приложения.</span><span class="sxs-lookup"><span data-stu-id="ceb26-140">Clients can verify hello permission scopes granted toothem by inspecting hello scope (“scp”) claim received in hello access token for delegated permissions and hello roles (“roles”) claim for app role permissions.</span></span> <span data-ttu-id="ceb26-141">Подробнее об этом: [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span><span class="sxs-lookup"><span data-stu-id="ceb26-141">Learn more about [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span></span>

## <a name="scenarios"></a><span data-ttu-id="ceb26-142">Сценарии</span><span class="sxs-lookup"><span data-stu-id="ceb26-142">Scenarios</span></span>
<span data-ttu-id="ceb26-143">Hello Graph API поддерживает многие сценарии приложений.</span><span class="sxs-lookup"><span data-stu-id="ceb26-143">hello Graph API enables many application scenarios.</span></span> <span data-ttu-id="ceb26-144">следующие сценарии Hello приведены наиболее распространенные hello.</span><span class="sxs-lookup"><span data-stu-id="ceb26-144">hello following scenarios are hello most common:</span></span>

* <span data-ttu-id="ceb26-145">**Бизнес-приложение (однотенантное)**. В этом сценарии разработчик работает на предприятие, у которого есть подписка Office 365.</span><span class="sxs-lookup"><span data-stu-id="ceb26-145">**Line of Business (Single Tenant) Application**: In this scenario, an enterprise developer works for an organization that has an Office 365 subscription.</span></span> <span data-ttu-id="ceb26-146">Hello разработчиком веб-приложения, взаимодействующего с tooperform задачи Azure AD, например назначении пользователю лицензии tooa.</span><span class="sxs-lookup"><span data-stu-id="ceb26-146">hello developer is building a web application that interacts with Azure AD tooperform tasks such assigning a license tooa user.</span></span> <span data-ttu-id="ceb26-147">Эта задача требует toohello доступа к API Graph, поэтому hello разработчик регистрирует приложение для одного клиента hello в Azure AD и настраивает разрешения чтения и записи для hello Graph API.</span><span class="sxs-lookup"><span data-stu-id="ceb26-147">This task requires access toohello Graph API, so hello developer registers hello single tenant application in Azure AD and configures read and write permissions for hello Graph API.</span></span> <span data-ttu-id="ceb26-148">Затем hello приложения является настроенным toouse свои собственные учетные данные, или те tooacquire вошедшего в систему пользователя hello маркера toocall hello Graph API.</span><span class="sxs-lookup"><span data-stu-id="ceb26-148">Then hello application is configured toouse either its own credentials or those of hello currently sign-in user tooacquire a token toocall hello Graph API.</span></span>
* <span data-ttu-id="ceb26-149">**Программное обеспечение как приложение-служба (мультитенантное)**. В этом сценарии независимый поставщик программного обеспечения разрабатывает и размещенное мультитенантное веб-приложение, которое предоставляет пользователю функции управления для других организаций, использующих Azure AD.</span><span class="sxs-lookup"><span data-stu-id="ceb26-149">**Software as a Service Application (Multi-Tenant)**: In this scenario, an independent software vendor (ISV) is developing hosted multi-tenant web application that provides user management features for other organizations that use Azure AD.</span></span> <span data-ttu-id="ceb26-150">Эти функции требуют доступа к объектам toodirectory, и таким образом приложение hello должен hello toocall Graph API.</span><span class="sxs-lookup"><span data-stu-id="ceb26-150">These features require access toodirectory objects, and so hello application needs toocall hello Graph API.</span></span> <span data-ttu-id="ceb26-151">developer Привет зарегистрирует приложение hello в Azure AD, настраивает его чтения toorequire и разрешение на запись в Graph API hello и затем включает внешний доступ, чтобы другая организация могла согласиться toouse приложения hello в своем каталоге.</span><span class="sxs-lookup"><span data-stu-id="ceb26-151">hello developer registers hello application in Azure AD, configures it toorequire read and write permissions for hello Graph API, and then enables external access so that other organizations can consent toouse hello application in their directory.</span></span> <span data-ttu-id="ceb26-152">Когда toohello приложения для hello первый раз проверки подлинности пользователя в другой организации, они отображается диалоговое окно согласия с разрешениями hello, которые запрашивает приложение hello.</span><span class="sxs-lookup"><span data-stu-id="ceb26-152">When a user in another organization authenticates toohello application for hello first time, they are shown a consent dialog with hello permissions hello application is requesting.</span></span>  <span data-ttu-id="ceb26-153">Предоставление, что в случае согласия приложения hello предоставляются запрашиваемые разрешения toohello Graph API в каталоге пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="ceb26-153">Granting consent will then give hello application those requested permissions toohello Graph API in hello user’s directory.</span></span> <span data-ttu-id="ceb26-154">Дополнительные сведения об инфраструктуре согласия hello см. в разделе [Обзор инфраструктуры согласия hello](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="ceb26-154">For more information on hello consent framework, see [Overview of hello Consent Framework](active-directory-integrating-applications.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="ceb26-155">См. также</span><span class="sxs-lookup"><span data-stu-id="ceb26-155">See Also</span></span>
[<span data-ttu-id="ceb26-156">Краткое руководство по API Graph Azure AD</span><span class="sxs-lookup"><span data-stu-id="ceb26-156">Azure AD Graph API Quickstart Guide</span></span>](active-directory-graph-api-quickstart.md)

[<span data-ttu-id="ceb26-157">Документация REST для Graph AD</span><span class="sxs-lookup"><span data-stu-id="ceb26-157">AD Graph REST documentation</span></span>](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)

[<span data-ttu-id="ceb26-158">Руководство разработчика по Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ceb26-158">Azure Active Directory developer's guide</span></span>](active-directory-developers-guide.md)

