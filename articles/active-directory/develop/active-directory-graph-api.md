---
title: "API Graph Azure Active Directory | Документация Майкрософт"
description: "Общие сведения и краткое руководство по API Graph, который обеспечивает программный доступ к Azure AD через конечные точки API-интерфейса REST."
services: active-directory
documentationcenter: 
author: viv-liu
manager: mbaldwin
editor: mbaldwin
ms.assetid: 5471ad74-20b3-44df-a2b5-43cde2c0a045
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: viviali
ms.custom: aaddev
ms.openlocfilehash: 79bb96171c00fa62f24113800c3824856febe728
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="azure-active-directory-graph-api"></a><span data-ttu-id="40a2d-103">API Graph Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="40a2d-103">Azure Active Directory Graph API</span></span>
> [!IMPORTANT]
> <span data-ttu-id="40a2d-104">Мы настоятельно рекомендуем использовать для доступа к ресурсам Azure Active Directory [Microsoft Graph](https://graph.microsoft.io/) вместо API Azure AD Graph.</span><span class="sxs-lookup"><span data-stu-id="40a2d-104">We strongly recommend that you use [Microsoft Graph](https://graph.microsoft.io/) instead of Azure AD Graph API to access Azure Active Directory resources.</span></span> <span data-ttu-id="40a2d-105">В настоящее время усилия наших разработчиков направлены на Microsoft Graph, и дальнейшие усовершенствования API Azure AD Graph не планируются.</span><span class="sxs-lookup"><span data-stu-id="40a2d-105">Our development efforts are now concentrated on Microsoft Graph and no further enhancements are planned for Azure AD Graph API.</span></span> <span data-ttu-id="40a2d-106">Существует совсем немного сценариев, в которых по-прежнему можно использовать API Azure AD Graph. Дополнительные сведения см. в записи блога [Microsoft Graph or the Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) (Microsoft Graph или Azure AD Graph) в Центре разработчика Office.</span><span class="sxs-lookup"><span data-stu-id="40a2d-106">There are a very limited number of scenarios for which Azure AD Graph API might still be appropriate; for more information, see the [Microsoft Graph or the Azure AD Graph](https://dev.office.com/blogs/microsoft-graph-or-azure-ad-graph) blog post in the Office Dev Center.</span></span>
> 
> 

<span data-ttu-id="40a2d-107">API Graph Azure Active Directory обеспечивает программный доступ к Azure AD через конечные точки API-интерфейса Rest Azure AD.</span><span class="sxs-lookup"><span data-stu-id="40a2d-107">The Azure Active Directory Graph API provides programmatic access to Azure AD through REST API endpoints.</span></span> <span data-ttu-id="40a2d-108">Приложения могут использовать API Graph для выполнения операций создания, чтения, обновления и удаления (CRUD) с данными и объектами каталогов.</span><span class="sxs-lookup"><span data-stu-id="40a2d-108">Applications can use the Graph API to perform create, read, update, and delete (CRUD) operations on directory data and objects.</span></span> <span data-ttu-id="40a2d-109">Например, API Graph поддерживает следующие операции для объекта-пользователя.</span><span class="sxs-lookup"><span data-stu-id="40a2d-109">For example, the Graph API supports the following common operations for a user object:</span></span>

* <span data-ttu-id="40a2d-110">Создание нового пользователя в каталоге.</span><span class="sxs-lookup"><span data-stu-id="40a2d-110">Create a new user in a directory</span></span>
* <span data-ttu-id="40a2d-111">Получение подробных свойств пользователя, например его группы.</span><span class="sxs-lookup"><span data-stu-id="40a2d-111">Get a user’s detailed properties, such as their groups</span></span>
* <span data-ttu-id="40a2d-112">Обновление свойств пользователя, например его расположения и номера телефона, или изменение его пароля.</span><span class="sxs-lookup"><span data-stu-id="40a2d-112">Update a user’s properties, such as their location and phone number, or change their password</span></span>
* <span data-ttu-id="40a2d-113">Проверка членства в группах для доступа на основе ролей.</span><span class="sxs-lookup"><span data-stu-id="40a2d-113">Check a user’s group membership for role-based access</span></span>
* <span data-ttu-id="40a2d-114">Отключение или полное удаление учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="40a2d-114">Disable a user’s account or delete it entirely</span></span>

<span data-ttu-id="40a2d-115">Вы можете выполнять с другими объектами, например группами или приложениями, те же операции, что и с объектами-пользователями.</span><span class="sxs-lookup"><span data-stu-id="40a2d-115">In addition to user objects, you can perform similar operations on other objects such as groups and applications.</span></span> <span data-ttu-id="40a2d-116">Чтобы вызвать API Graph в каталоге, приложение должно быть зарегистрировано в Azure AD и разрешать доступ к каталогу.</span><span class="sxs-lookup"><span data-stu-id="40a2d-116">To call the Graph API on a directory, the application must be registered with Azure AD and be configured to allow access to the directory.</span></span> <span data-ttu-id="40a2d-117">Обычно это делается с помощью потока согласия пользователя или администратора.</span><span class="sxs-lookup"><span data-stu-id="40a2d-117">This is normally achieved through a user or admin consent flow.</span></span>

<span data-ttu-id="40a2d-118">Чтобы начать использовать API Graph Azure Active Directory ознакомьтесь с [кратким руководством по началу работы с API Graph](active-directory-graph-api-quickstart.md) или просмотрите [справочную документацию по API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span><span class="sxs-lookup"><span data-stu-id="40a2d-118">To begin using the Azure Active Directory Graph API, see the [Graph API Quickstart Guide](active-directory-graph-api-quickstart.md), or view the [interactive Graph API reference documentation](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>

## <a name="features"></a><span data-ttu-id="40a2d-119">Функции</span><span class="sxs-lookup"><span data-stu-id="40a2d-119">Features</span></span>
<span data-ttu-id="40a2d-120">API Graph предоставляет следующие возможности.</span><span class="sxs-lookup"><span data-stu-id="40a2d-120">The Graph API provides the following features:</span></span>

* <span data-ttu-id="40a2d-121">**Конечные точки API-интерфейса REST**. Служба API Graph соответствует ограничениям REST. Она состоит из конечных точек, доступ к которым можно получить с помощью стандартных HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="40a2d-121">**REST API Endpoints**: The Graph API is a RESTful service comprised of endpoints that are accessed using standard HTTP requests.</span></span> <span data-ttu-id="40a2d-122">API Graph поддерживает содержимое в виде XML или нотаций объектов Javascript (JSON) для запросов и ответов.</span><span class="sxs-lookup"><span data-stu-id="40a2d-122">The Graph API supports XML or Javascript Object Notation (JSON) content types for requests and responses.</span></span> <span data-ttu-id="40a2d-123">Дополнительные сведения см. в [справочнике по Azure AD Graph REST API](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span><span class="sxs-lookup"><span data-stu-id="40a2d-123">For more information, see [Azure AD Graph REST API Reference](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog).</span></span>
* <span data-ttu-id="40a2d-124">**Проверка подлинности с помощью Azure AD**. Каждый запрос API Graph должен пройти проверку подлинности путем добавления веб-маркеров JSON (JWT) в заголовок авторизации запроса.</span><span class="sxs-lookup"><span data-stu-id="40a2d-124">**Authentication with Azure AD**: Every request to the Graph API must be authenticated by appending a JSON Web Token (JWT) in the Authorization header of the request.</span></span> <span data-ttu-id="40a2d-125">Чтобы получить этот токен, нужно отправить запрос к конечной точке токена Azure AD и предоставить действительные учетные данные.</span><span class="sxs-lookup"><span data-stu-id="40a2d-125">This token is acquired by making a request to Azure AD’s token endpoint and providing valid credentials.</span></span> <span data-ttu-id="40a2d-126">Чтобы получить токен для вызова Graph, можно использовать поток клиентских учетных данных OAuth 2.0 или поток предоставления кода авторизации.</span><span class="sxs-lookup"><span data-stu-id="40a2d-126">You can use the OAuth 2.0 client credentials flow or the authorization code grant flow to acquire a token to call the Graph.</span></span> <span data-ttu-id="40a2d-127">Дополнительные сведения см. в статье [Авторизация доступа к веб-приложениям с помощью OAuth 2.0 и Azure Active Directory](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span><span class="sxs-lookup"><span data-stu-id="40a2d-127">For more information, [OAuth 2.0 in Azure AD](https://msdn.microsoft.com/library/azure/dn645545.aspx).</span></span>
* <span data-ttu-id="40a2d-128">**Ролевая авторизация (RBAC)**. Для реализации RBAC в API Graph используются группы безопасности.</span><span class="sxs-lookup"><span data-stu-id="40a2d-128">**Role-Based Authorization (RBAC)**: Security groups are used to perform RBAC in the Graph API.</span></span> <span data-ttu-id="40a2d-129">Например, чтобы определить, имеет ли пользователь доступ к определенному ресурсу, приложение может вызвать операцию [Проверка членства в группе (транзитивно)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive), которая возвращает значение true или false.</span><span class="sxs-lookup"><span data-stu-id="40a2d-129">For example, if you want to determine whether a user has access to a specific resource, the application can call the [Check Group Membership (transitive)](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/groups-operations#FunctionsandactionsongroupsCheckmembershipinaspecificgrouptransitive) operation, which returns true or false.</span></span>
* <span data-ttu-id="40a2d-130">**Дифференциальный запрос**. Если вы хотите проверить наличие изменений в каталоге в промежутке между двумя периодами времени, не отправляя частые запросы к API Graph, вы можете сделать дифференциальный запрос.</span><span class="sxs-lookup"><span data-stu-id="40a2d-130">**Differential Query**: If you want to check for changes in a directory between two time periods without having to make frequent queries to the Graph API, you can make a differential query request.</span></span> <span data-ttu-id="40a2d-131">Этот тип запроса возвращает только изменения, внесенные в промежутке между предыдущим дифференциальным запросом и текущим запросом.</span><span class="sxs-lookup"><span data-stu-id="40a2d-131">This type of request will return only the changes made between the previous differential query request and the current request.</span></span> <span data-ttu-id="40a2d-132">Дополнительные сведения см. в статье [Разностный запрос | Общие понятия API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span><span class="sxs-lookup"><span data-stu-id="40a2d-132">For more information, see [Azure AD Graph API Differential Query](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-differential-query).</span></span>
* <span data-ttu-id="40a2d-133">**Расширения каталогов**. Если вы разрабатываете приложение, которому требуется читать или записывать уникальные свойства объектов каталога, вы можете зарегистрировать и использовать значения расширений с помощью API Graph.</span><span class="sxs-lookup"><span data-stu-id="40a2d-133">**Directory Extensions**: If you are developing an application that needs to read or write unique properties for directory objects, you can register and use extension values by using the Graph API.</span></span> <span data-ttu-id="40a2d-134">Например, если приложению требуется свойство "идентификатор Skype" для каждого пользователя, вы можете зарегистрировать новое свойство в каталоге и оно будет доступно для каждого объекта-пользователя.</span><span class="sxs-lookup"><span data-stu-id="40a2d-134">For example, if your application requires a Skype ID property for each user, you can register the new property in the directory and it will be available on every user object.</span></span> <span data-ttu-id="40a2d-135">Дополнительные сведения см. в статье [Расширения схемы каталогов | Общие понятия API Graph](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span><span class="sxs-lookup"><span data-stu-id="40a2d-135">For more information, see [Azure AD Graph API Directory Schema Extensions](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-directory-schema-extensions).</span></span>
* <span data-ttu-id="40a2d-136">**Защита с помощью областей разрешений**: API Graph AAD предоставляет области разрешений, которые обеспечивают защищенный доступ к данным AAD по согласию и поддерживают различные типы клиентских приложений, включая:</span><span class="sxs-lookup"><span data-stu-id="40a2d-136">**Secured by permission scopes**: AAD Graph API exposes permission scopes that enable secure/consented access to AAD data, and support a variety of client app types, including:</span></span>
  
  * <span data-ttu-id="40a2d-137">приложения с пользовательским интерфейсом, которым предоставляется делегированный доступ к данным с помощью разрешения, получаемого от пользователя, выполнившего вход (делегирование);</span><span class="sxs-lookup"><span data-stu-id="40a2d-137">those with a user interface which are given delegated access to data via authorization from the signed-in user (delegated)</span></span>
  * <span data-ttu-id="40a2d-138">приложения, использующие контроль доступа основе ролей, например клиенты службы или управляющей программы (роли приложений).</span><span class="sxs-lookup"><span data-stu-id="40a2d-138">those that use application-define role-based access control such as service/daemon clients (app roles)</span></span>
    
    <span data-ttu-id="40a2d-139">Обе эти области разрешений (с делегированием и ролями приложений) представляют привилегию, предоставляемую API Graph, и могут запрашиваться клиентскими приложениями с помощью функций разрешений для зарегистрированных приложений [на портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="40a2d-139">Both delegated and app role permission scopes represent a privilege exposed by the Graph API and can be requested by client applications through application registration permissions [features in the Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="40a2d-140">Клиенты могут проверить предоставленные им области разрешений, изучив полученное в маркере доступа утверждение области ("scp") — для делегированных разрешений и утверждение ролей ("roles") — для разрешений роли приложения.</span><span class="sxs-lookup"><span data-stu-id="40a2d-140">Clients can verify the permission scopes granted to them by inspecting the scope (“scp”) claim received in the access token for delegated permissions and the roles (“roles”) claim for app role permissions.</span></span> <span data-ttu-id="40a2d-141">Подробнее об этом: [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span><span class="sxs-lookup"><span data-stu-id="40a2d-141">Learn more about [Azure AD Graph API Permission Scopes](https://msdn.microsoft.com/Library/Azure/Ad/Graph/howto/azure-ad-graph-api-permission-scopes).</span></span>

## <a name="scenarios"></a><span data-ttu-id="40a2d-142">Сценарии</span><span class="sxs-lookup"><span data-stu-id="40a2d-142">Scenarios</span></span>
<span data-ttu-id="40a2d-143">API Graph поддерживает многие сценарии приложений.</span><span class="sxs-lookup"><span data-stu-id="40a2d-143">The Graph API enables many application scenarios.</span></span> <span data-ttu-id="40a2d-144">Ниже перечислены наиболее распространенные сценарии.</span><span class="sxs-lookup"><span data-stu-id="40a2d-144">The following scenarios are the most common:</span></span>

* <span data-ttu-id="40a2d-145">**Бизнес-приложение (однотенантное)**. В этом сценарии разработчик работает на предприятие, у которого есть подписка Office 365.</span><span class="sxs-lookup"><span data-stu-id="40a2d-145">**Line of Business (Single Tenant) Application**: In this scenario, an enterprise developer works for an organization that has an Office 365 subscription.</span></span> <span data-ttu-id="40a2d-146">Разработчик создает веб-приложение, взаимодействующее с Azure AD для выполнения задач, таких как назначение лицензии пользователю.</span><span class="sxs-lookup"><span data-stu-id="40a2d-146">The developer is building a web application that interacts with Azure AD to perform tasks such assigning a license to a user.</span></span> <span data-ttu-id="40a2d-147">Эта задача требует доступа к API Graph, поэтому разработчик регистрирует одноклиентское приложение в Azure AD и настраивает разрешения чтения и записи для API GraphI.</span><span class="sxs-lookup"><span data-stu-id="40a2d-147">This task requires access to the Graph API, so the developer registers the single tenant application in Azure AD and configures read and write permissions for the Graph API.</span></span> <span data-ttu-id="40a2d-148">Затем приложение настраивается для использования собственных учетных данных или учетных данных пользователя, вошедшего в систему, чтобы получить маркер для вызова API Graph.</span><span class="sxs-lookup"><span data-stu-id="40a2d-148">Then the application is configured to use either its own credentials or those of the currently sign-in user to acquire a token to call the Graph API.</span></span>
* <span data-ttu-id="40a2d-149">**Программное обеспечение как приложение-служба (мультитенантное)**. В этом сценарии независимый поставщик программного обеспечения разрабатывает и размещенное мультитенантное веб-приложение, которое предоставляет пользователю функции управления для других организаций, использующих Azure AD.</span><span class="sxs-lookup"><span data-stu-id="40a2d-149">**Software as a Service Application (Multi-Tenant)**: In this scenario, an independent software vendor (ISV) is developing hosted multi-tenant web application that provides user management features for other organizations that use Azure AD.</span></span> <span data-ttu-id="40a2d-150">Для этих функций требуется доступ к объектам каталога, поэтому приложение должно вызвать API Graph.</span><span class="sxs-lookup"><span data-stu-id="40a2d-150">These features require access to directory objects, and so the application needs to call the Graph API.</span></span> <span data-ttu-id="40a2d-151">Разработчик регистрирует приложение в Azure AD, настраивает его, чтобы оно требовало разрешения чтения и записи для API Graph, а затем включает внешний доступ, чтобы другие организации могли соглашаться на использование приложения в своем каталоге.</span><span class="sxs-lookup"><span data-stu-id="40a2d-151">The developer registers the application in Azure AD, configures it to require read and write permissions for the Graph API, and then enables external access so that other organizations can consent to use the application in their directory.</span></span> <span data-ttu-id="40a2d-152">Когда пользователь в другой организации впервые проходит проверку подлинности в приложении, он видит диалоговое окно с разрешениями, которые запрашивает приложение.</span><span class="sxs-lookup"><span data-stu-id="40a2d-152">When a user in another organization authenticates to the application for the first time, they are shown a consent dialog with the permissions the application is requesting.</span></span>  <span data-ttu-id="40a2d-153">Если пользователь предоставит согласие, приложение получит запрошенные разрешения для API Graph в каталоге пользователя.</span><span class="sxs-lookup"><span data-stu-id="40a2d-153">Granting consent will then give the application those requested permissions to the Graph API in the user’s directory.</span></span> <span data-ttu-id="40a2d-154">Дополнительные сведения об инфраструктуре согласия см. в статье [Интеграция приложений с Azure Active Directory](active-directory-integrating-applications.md).</span><span class="sxs-lookup"><span data-stu-id="40a2d-154">For more information on the consent framework, see [Overview of the Consent Framework](active-directory-integrating-applications.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="40a2d-155">См. также</span><span class="sxs-lookup"><span data-stu-id="40a2d-155">See Also</span></span>
[<span data-ttu-id="40a2d-156">Краткое руководство по API Graph Azure AD</span><span class="sxs-lookup"><span data-stu-id="40a2d-156">Azure AD Graph API Quickstart Guide</span></span>](active-directory-graph-api-quickstart.md)

[<span data-ttu-id="40a2d-157">Документация REST для Graph AD</span><span class="sxs-lookup"><span data-stu-id="40a2d-157">AD Graph REST documentation</span></span>](https://msdn.microsoft.com/Library/Azure/Ad/Graph/api/api-catalog)

[<span data-ttu-id="40a2d-158">Руководство разработчика по Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="40a2d-158">Azure Active Directory developer's guide</span></span>](active-directory-developers-guide.md)

