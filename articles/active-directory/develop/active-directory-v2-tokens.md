---
title: "Active Directory v2.0 aaaAzure маркеры ссылку | Документы Microsoft"
description: "типы Hello токены и утверждения, генерируемой конечная точка v2.0 hello Azure AD"
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: dc58c282-9684-4b38-b151-f3e079f034fd
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/07/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: 29eb5c3402aeae302ee7c6234488520495f85904
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-v20-tokens-reference"></a><span data-ttu-id="1f614-103">Справочник маркерам Azure Active Directory версии 2.0</span><span class="sxs-lookup"><span data-stu-id="1f614-103">Azure Active Directory v2.0 tokens reference</span></span>
<span data-ttu-id="1f614-104">Hello конечной точки Azure Active Directory (Azure AD) версии 2.0 создает несколько типов маркеров безопасности в каждом [поток проверки подлинности](active-directory-v2-flows.md).</span><span class="sxs-lookup"><span data-stu-id="1f614-104">hello Azure Active Directory (Azure AD) v2.0 endpoint emits several types of security tokens in each [authentication flow](active-directory-v2-flows.md).</span></span> <span data-ttu-id="1f614-105">Этот справочник описывает формат hello, характеристики безопасности и содержимое каждого типа маркера.</span><span class="sxs-lookup"><span data-stu-id="1f614-105">This reference describes hello format, security characteristics, and contents of each type of token.</span></span>

> [!NOTE]
> <span data-ttu-id="1f614-106">Конечная точка v2.0 Hello не поддерживает все сценарии Azure Active Directory и возможности.</span><span class="sxs-lookup"><span data-stu-id="1f614-106">hello v2.0 endpoint does not support all Azure Active Directory scenarios and features.</span></span> <span data-ttu-id="1f614-107">toodetermine необходимость использования конечной точки v2.0 hello, узнайте, как [ограничения v2.0](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="1f614-107">toodetermine whether you should use hello v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>
>

## <a name="types-of-tokens"></a><span data-ttu-id="1f614-108">Типы маркеров</span><span class="sxs-lookup"><span data-stu-id="1f614-108">Types of tokens</span></span>
<span data-ttu-id="1f614-109">Hello v2.0 конечная точка поддерживает hello [протокола авторизации OAuth 2.0](active-directory-v2-protocols.md), которая использует токены доступа и обновления токенов.</span><span class="sxs-lookup"><span data-stu-id="1f614-109">hello v2.0 endpoint supports hello [OAuth 2.0 authorization protocol](active-directory-v2-protocols.md), which uses access tokens and refresh tokens.</span></span> <span data-ttu-id="1f614-110">Конечная точка Hello версии 2.0 также поддерживает проверку подлинности и войти через [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="1f614-110">hello v2.0 endpoint also supports authentication and sign-in via [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="1f614-111">OpenID Connect вводит третий тип маркера, маркер идентификатора hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-111">OpenID Connect introduces a third type of token, hello ID token.</span></span> <span data-ttu-id="1f614-112">Каждый из этих маркеров представлен как токен *носителя*.</span><span class="sxs-lookup"><span data-stu-id="1f614-112">Each of these tokens is represented as a *bearer* token.</span></span>

<span data-ttu-id="1f614-113">Токен носителя — это упрощенный токен безопасности, предоставляет hello tooa доступа носителя защищенный ресурс.</span><span class="sxs-lookup"><span data-stu-id="1f614-113">A bearer token is a lightweight security token that grants hello bearer access tooa protected resource.</span></span> <span data-ttu-id="1f614-114">Hello носителя является любая сторона, которая может предъявить токен hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-114">hello bearer is any party that can present hello token.</span></span> <span data-ttu-id="1f614-115">Несмотря на то, что субъект должен пройти проверку подлинности с помощью токена носителя hello tooreceive Azure AD, если действия не предпринимаются toosecure hello токен во время передачи и хранения, ему может перехватываться и используется несанкционированной стороной.</span><span class="sxs-lookup"><span data-stu-id="1f614-115">Although a party must authenticate with Azure AD tooreceive hello bearer token, if steps are not taken toosecure hello token during transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="1f614-116">Некоторых токенах безопасности предусмотрен сторон tooprevent несанкционированный встроенный механизм не использовать их, но токены носителя.</span><span class="sxs-lookup"><span data-stu-id="1f614-116">Some security tokens have a built-in mechanism tooprevent unauthorized parties from using them, but bearer tokens do not.</span></span> <span data-ttu-id="1f614-117">Токены носителя должны передаваться по защищенному каналу, например по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="1f614-117">Bearer tokens must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="1f614-118">Если токен носителя, передается без этого типа безопасности, злоумышленник может использовать маркер hello tooacquire «атаки в середине» и использовать его для несанкционированного доступа tooa защищенных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="1f614-118">If a bearer token is transmitted without this type of security, a malicious party could use a "man-in-the-middle attack" tooacquire hello token and use it for unauthorized access tooa protected resource.</span></span> <span data-ttu-id="1f614-119">Hello те же принципы безопасности применяются при сохранении или кэшировании токенов носителя для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="1f614-119">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="1f614-120">Всегда следует убедиться, что приложение передает и сохраняет токены носителя, применяя меры безопасности.</span><span class="sxs-lookup"><span data-stu-id="1f614-120">Always ensure that your app securely transmits and stores bearer tokens.</span></span> <span data-ttu-id="1f614-121">Дополнительные рекомендации по защите токенов носителя см. в документе [RFC 6750, раздел 5](http://tools.ietf.org/html/rfc6750).</span><span class="sxs-lookup"><span data-stu-id="1f614-121">For more security considerations for bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="1f614-122">Многие hello маркеры, выпущенные hello v2.0 конечной точкой реализованы в виде веб-маркеры JSON (JWT).</span><span class="sxs-lookup"><span data-stu-id="1f614-122">Many of hello tokens issued by hello v2.0 endpoint are implemented as JSON Web Tokens (JWTs).</span></span> <span data-ttu-id="1f614-123">JWT является набор данных compact, URL-адрес безопасный способ tootransfer между двумя сторонами.</span><span class="sxs-lookup"><span data-stu-id="1f614-123">A JWT is a compact, URL-safe way tootransfer information between two parties.</span></span> <span data-ttu-id="1f614-124">Hello в маркер JWT называют *утверждения*.</span><span class="sxs-lookup"><span data-stu-id="1f614-124">hello information in a JWT is called a *claim*.</span></span> <span data-ttu-id="1f614-125">Это утверждение сведений о носителя hello и субъект маркера hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-125">It's an assertion of information about hello bearer and subject of hello token.</span></span> <span data-ttu-id="1f614-126">Hello утверждения в маркер JWT — объекты JavaScript Object Notation (JSON) в кодировке и сериализацию для передачи.</span><span class="sxs-lookup"><span data-stu-id="1f614-126">hello claims in a JWT are JavaScript Object Notation (JSON) objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="1f614-127">JWT hello, выданным конечной точки v2.0 hello подписан, но не зашифровано, можно легко проверить содержимое hello JWT для целей отладки.</span><span class="sxs-lookup"><span data-stu-id="1f614-127">Because hello JWTs issued by hello v2.0 endpoint are signed but not encrypted, you can easily inspect hello contents of a JWT for debugging purposes.</span></span> <span data-ttu-id="1f614-128">Дополнительные сведения о JWT см. в разделе hello [спецификации JWT](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span><span class="sxs-lookup"><span data-stu-id="1f614-128">For more information about JWTs, see hello [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="1f614-129">Маркеры идентификации</span><span class="sxs-lookup"><span data-stu-id="1f614-129">ID tokens</span></span>
<span data-ttu-id="1f614-130">Маркер идентификации — это разновидность маркера безопасности входа, который приложение получает при аутентификации с использованием [OpenID Connect](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="1f614-130">An ID token is a form of sign-in security token that your app receives when it performs authentication by using [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="1f614-131">Маркеров безопасности представлены в виде [JWT](#types-of-tokens), и они содержат утверждения, можно использовать toosign hello пользователя в tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-131">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use toosign hello user in tooyour app.</span></span> <span data-ttu-id="1f614-132">Можно использовать утверждения hello в маркер идентификатора различными способами.</span><span class="sxs-lookup"><span data-stu-id="1f614-132">You can use hello claims in an ID token in various ways.</span></span> <span data-ttu-id="1f614-133">Обычно администраторы используют сведения об учетной записи toodisplay токены идентификатор или toomake решения по управлению доступом в приложении.</span><span class="sxs-lookup"><span data-stu-id="1f614-133">Typically, admins use ID tokens toodisplay account information or toomake access control decisions in an app.</span></span> <span data-ttu-id="1f614-134">Конечная точка v2.0 Hello выдает только один тип токена идентификатора, который содержит согласованный набор утверждений, независимо от типа hello пользователя, выполнившего вход.</span><span class="sxs-lookup"><span data-stu-id="1f614-134">hello v2.0 endpoint issues only one type of ID token, which has a consistent set of claims, regardless of hello type of user that is signed in.</span></span> <span data-ttu-id="1f614-135">Hello формат и содержимое маркеров безопасности hello таким же, для личных пользователям учетной записи Майкрософт и рабочих учетных записей.</span><span class="sxs-lookup"><span data-stu-id="1f614-135">hello format and content of ID tokens are hello same for personal Microsoft account users and for work or school accounts.</span></span>

<span data-ttu-id="1f614-136">На текущий момент маркеры идентификации подписываются, но не шифруются.</span><span class="sxs-lookup"><span data-stu-id="1f614-136">Currently, ID tokens are signed but not encrypted.</span></span> <span data-ttu-id="1f614-137">Когда приложение получает маркер идентификатора, он должен [проверки подписи hello](#validating-tokens) tooprove hello подлинность маркера и проверить его допустимость несколько утверждений в токен tooprove hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-137">When your app receives an ID token, it must [validate hello signature](#validating-tokens) tooprove hello token's authenticity and validate a few claims in hello token tooprove its validity.</span></span> <span data-ttu-id="1f614-138">Hello утверждений, прошедшим проверку приложения различаться в зависимости от требований к сценарию, но приложения необходимо выполнить некоторые [общие проверки утверждений](#validating-tokens) в каждом сценарии.</span><span class="sxs-lookup"><span data-stu-id="1f614-138">hello claims validated by an app vary depending on scenario requirements, but your app must perform some [common claim validations](#validating-tokens) in every scenario.</span></span>

<span data-ttu-id="1f614-139">Мы предоставим вам hello полные сведения об утверждениях в маркерах идентификатор в hello следующие разделы, кроме tooa пример идентификатор маркера.</span><span class="sxs-lookup"><span data-stu-id="1f614-139">We give you hello full details about claims in ID tokens in hello following sections, in addition tooa sample ID token.</span></span> <span data-ttu-id="1f614-140">Обратите внимание, что утверждения в маркерах идентификации не возвращаются в определенном порядке.</span><span class="sxs-lookup"><span data-stu-id="1f614-140">Note that claims in ID tokens are not returned in a specific order.</span></span> <span data-ttu-id="1f614-141">Кроме того, новые утверждения могут появиться в маркерах идентификации в любое время.</span><span class="sxs-lookup"><span data-stu-id="1f614-141">Also, new claims can be introduced into ID tokens at any time.</span></span> <span data-ttu-id="1f614-142">Ваше приложение не должно прерывать работу при появлении новых утверждений.</span><span class="sxs-lookup"><span data-stu-id="1f614-142">Your app should not break when new claims are introduced.</span></span> <span data-ttu-id="1f614-143">После списка Hello включает hello утверждения, которые приложение в настоящее время может надежно интерпретировать.</span><span class="sxs-lookup"><span data-stu-id="1f614-143">hello following list includes hello claims that your app currently can reliably interpret.</span></span> <span data-ttu-id="1f614-144">Дополнительные сведения можно найти в hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="1f614-144">You can find more details in hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="1f614-145">Пример маркера идентификации</span><span class="sxs-lookup"><span data-stu-id="1f614-145">Sample ID token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSJ9.eyJhdWQiOiI2NzMxZGU3Ni0xNGE2LTQ5YWUtOTdiYy02ZWJhNjkxNDM5MWUiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vYjk0MTk4MTgtMDlhZi00OWMyLWIwYzMtNjUzYWRjMWYzNzZlL3YyLjAiLCJpYXQiOjE0NTIyODUzMzEsIm5iZiI6MTQ1MjI4NTMzMSwiZXhwIjoxNDUyMjg5MjMxLCJuYW1lIjoiQmFiZSBSdXRoIiwibm9uY2UiOiIxMjM0NSIsIm9pZCI6ImExZGJkZGU4LWU0ZjktNDU3MS1hZDkzLTMwNTllMzc1MGQyMyIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWdyZWF0YmFtYmlub0BueXkub25taWNyb3NvZnQuY29tIiwic3ViIjoiTUY0Zi1nZ1dNRWppMTJLeW5KVU5RWnBoYVVUdkxjUXVnNWpkRjJubDAxUSIsInRpZCI6ImI5NDE5ODE4LTA5YWYtNDljMi1iMGMzLTY1M2FkYzFmMzc2ZSIsInZlciI6IjIuMCJ9.p_rYdrtJ1oCmgDBggNHB9O38KTnLCMGbMDODdirdmZbmJcTHiZDdtTc-hguu3krhbtOsoYM2HJeZM3Wsbp_YcfSKDY--X_NobMNsxbT7bqZHxDnA2jTMyrmt5v2EKUnEeVtSiJXyO3JWUq9R0dO-m4o9_8jGP6zHtR62zLaotTBYHmgeKpZgTFB9WtUq8DVdyMn_HSvQEfz-LWqckbcTwM_9RNKoGRVk38KChVJo4z5LkksYRarDo8QgQ7xEKmYmPvRr_I7gvM2bmlZQds2OeqWLB1NSNbFZqyFOCgYn3bAQ-nEQSKwBaA36jYGPOVG2r2Qv1uKcpSOxzxaQybzYpQ
```

> [!TIP]
> <span data-ttu-id="1f614-146">В практическом tooinspect hello утверждения в маркер идентификатора образец hello, вставить маркер идентификатора образец hello в [calebb.net](http://calebb.net/).</span><span class="sxs-lookup"><span data-stu-id="1f614-146">For practice, tooinspect hello claims in hello sample ID token, paste hello sample ID token into [calebb.net](http://calebb.net/).</span></span>
>
>

#### <a name="claims-in-id-tokens"></a><span data-ttu-id="1f614-147">Утверждения в маркерах идентификации</span><span class="sxs-lookup"><span data-stu-id="1f614-147">Claims in ID tokens</span></span>
| <span data-ttu-id="1f614-148">Имя</span><span class="sxs-lookup"><span data-stu-id="1f614-148">Name</span></span> | <span data-ttu-id="1f614-149">Утверждение</span><span class="sxs-lookup"><span data-stu-id="1f614-149">Claim</span></span> | <span data-ttu-id="1f614-150">Пример значения</span><span class="sxs-lookup"><span data-stu-id="1f614-150">Example value</span></span> | <span data-ttu-id="1f614-151">Описание</span><span class="sxs-lookup"><span data-stu-id="1f614-151">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="1f614-152">audience</span><span class="sxs-lookup"><span data-stu-id="1f614-152">audience</span></span> |`aud` |`6731de76-14a6-49ae-97bc-6eba6914391e` |<span data-ttu-id="1f614-153">Указывает токен hello hello предназначен получателя.</span><span class="sxs-lookup"><span data-stu-id="1f614-153">Identifies hello intended recipient of hello token.</span></span> <span data-ttu-id="1f614-154">В токенах идентификатор hello аудитория — идентификатор приложения вашего приложения, назначенный tooyour приложения hello портала регистрации приложения Microsoft.</span><span class="sxs-lookup"><span data-stu-id="1f614-154">In ID tokens, hello audience is your app's Application ID, assigned tooyour app in hello Microsoft Application Registration Portal.</span></span> <span data-ttu-id="1f614-155">Ваше приложение должно проверить это значение и отклонять hello маркера, если значение hello не совпадает.</span><span class="sxs-lookup"><span data-stu-id="1f614-155">Your app should validate this value, and reject hello token if hello value does not match.</span></span> |
| <span data-ttu-id="1f614-156">issuer</span><span class="sxs-lookup"><span data-stu-id="1f614-156">issuer</span></span> |`iss` |`https://login.microsoftonline.com/b9419818-09af-49c2-b0c3-653adc1f376e/v2.0 ` |<span data-ttu-id="1f614-157">Идентифицирует hello службы маркеров безопасности (STS), создает и возвращает токен hello и hello клиента Azure AD, в которой hello пользователь прошел проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="1f614-157">Identifies hello security token service (STS) that constructs and returns hello token, and hello Azure AD tenant in which hello user was authenticated.</span></span> <span data-ttu-id="1f614-158">Приложение должно проверять hello издателя утверждения, что получено tooensure, hello токена из конечной точки v2.0 hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-158">Your app should validate hello issuer claim tooensure that hello token came from hello v2.0 endpoint.</span></span> <span data-ttu-id="1f614-159">Она также должна использовать GUID для набора hello toorestrict hello утверждения клиентов, которые могут войти в приложение toohello hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-159">It also should use hello GUID portion of hello claim toorestrict hello set of tenants that can sign in toohello app.</span></span> <span data-ttu-id="1f614-160">Hello идентификатор GUID, который указывает этот пользователь hello является потребителем пользователем корпорации Майкрософт, учетная запись является `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="1f614-160">hello GUID that indicates that hello user is a consumer user from a Microsoft account is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> |
| <span data-ttu-id="1f614-161">issued at</span><span class="sxs-lookup"><span data-stu-id="1f614-161">issued at</span></span> |`iat` |`1452285331` |<span data-ttu-id="1f614-162">Hello время выдачи маркера какие hello, представленный во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="1f614-162">hello time at which hello token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="1f614-163">expiration time</span><span class="sxs-lookup"><span data-stu-id="1f614-163">expiration time</span></span> |`exp` |`1452289231` |<span data-ttu-id="1f614-164">время Hello, какие hello токен становится недействительным, представленный во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="1f614-164">hello time at which hello token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="1f614-165">Приложения должны использовать это утверждение tooverify hello допустимость время существования маркера hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-165">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="1f614-166">not before</span><span class="sxs-lookup"><span data-stu-id="1f614-166">not before</span></span> |`nbf` |`1452285331` |<span data-ttu-id="1f614-167">время Hello, какие hello маркер становится действительным, представленный во время эпохи.</span><span class="sxs-lookup"><span data-stu-id="1f614-167">hello time at which hello token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="1f614-168">Это обычно Здравствуйте таким же, как время выдачи hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-168">It is usually hello same as hello issuance time.</span></span> <span data-ttu-id="1f614-169">Приложения должны использовать это утверждение tooverify hello допустимость время существования маркера hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-169">Your app should use this claim tooverify hello validity of hello token lifetime.</span></span> |
| <span data-ttu-id="1f614-170">версия</span><span class="sxs-lookup"><span data-stu-id="1f614-170">version</span></span> |`ver` |`2.0` |<span data-ttu-id="1f614-171">версия Hello маркер идентификатора hello, в соответствии с определением Azure AD.</span><span class="sxs-lookup"><span data-stu-id="1f614-171">hello version of hello ID token, as defined by Azure AD.</span></span> <span data-ttu-id="1f614-172">Для конечной точки v2.0 hello hello значение — `2.0`.</span><span class="sxs-lookup"><span data-stu-id="1f614-172">For hello v2.0 endpoint, hello value is `2.0`.</span></span> |
| <span data-ttu-id="1f614-173">tenant ID</span><span class="sxs-lookup"><span data-stu-id="1f614-173">tenant ID</span></span> |`tid` |`b9419818-09af-49c2-b0c3-653adc1f376e` |<span data-ttu-id="1f614-174">Идентификатор GUID, представляющий клиента hello Azure AD, hello пользователя — из.</span><span class="sxs-lookup"><span data-stu-id="1f614-174">A GUID that represents hello Azure AD tenant that hello user is from.</span></span> <span data-ttu-id="1f614-175">Для рабочих и учебную учетные записи hello GUID — неизменяемые клиентский hello, к которой принадлежит Организации hello, hello пользователя.</span><span class="sxs-lookup"><span data-stu-id="1f614-175">For work and school accounts, hello GUID is hello immutable tenant ID of hello organization that hello user belongs to.</span></span> <span data-ttu-id="1f614-176">Для личных учетных записей hello значение равно `9188040d-6c67-4c5b-b112-36a304b66dad`.</span><span class="sxs-lookup"><span data-stu-id="1f614-176">For personal accounts, hello value is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> <span data-ttu-id="1f614-177">Hello `profile` требуется область в заказ tooreceive это утверждение.</span><span class="sxs-lookup"><span data-stu-id="1f614-177">hello `profile` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="1f614-178">code hash</span><span class="sxs-lookup"><span data-stu-id="1f614-178">code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="1f614-179">хэш кода Hello включается в маркеров безопасности только в том случае, если выданный маркер идентификатора hello с кодом авторизации OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="1f614-179">hello code hash is included in ID tokens only when hello ID token is issued with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="1f614-180">Это может быть подлинность hello используется toovalidate код авторизации.</span><span class="sxs-lookup"><span data-stu-id="1f614-180">It can be used toovalidate hello authenticity of an authorization code.</span></span> <span data-ttu-id="1f614-181">Дополнительные сведения о выполнении этой проверки см. в разделе hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="1f614-181">For details about performing this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="1f614-182">access token hash</span><span class="sxs-lookup"><span data-stu-id="1f614-182">access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="1f614-183">хэш токена доступа Hello включается в маркеров безопасности только в том случае, когда выдается маркер идентификатор hello с помощью токена доступа OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="1f614-183">hello access token hash is included in ID tokens only when hello ID token is issued with an OAuth 2.0 access token.</span></span> <span data-ttu-id="1f614-184">Это может быть используется toovalidate hello подлинность маркера доступа.</span><span class="sxs-lookup"><span data-stu-id="1f614-184">It can be used toovalidate hello authenticity of an access token.</span></span> <span data-ttu-id="1f614-185">Дополнительные сведения о выполнении этой проверки см. в разделе hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html).</span><span class="sxs-lookup"><span data-stu-id="1f614-185">For details about performing this validation, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="1f614-186">nonce</span><span class="sxs-lookup"><span data-stu-id="1f614-186">nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="1f614-187">специальное слово Hello является стратегией по снижению рисков атак с повторением токенов.</span><span class="sxs-lookup"><span data-stu-id="1f614-187">hello nonce is a strategy for mitigating token replay attacks.</span></span> <span data-ttu-id="1f614-188">Приложения можно задать nonce в запрос на аутентификацию с помощью hello `nonce` параметр запроса.</span><span class="sxs-lookup"><span data-stu-id="1f614-188">Your app can specify a nonce in an authorization request by using hello `nonce` query parameter.</span></span> <span data-ttu-id="1f614-189">значение Hello, указываемые в запросе hello создается маркер идентификатора hello `nonce` утверждения, без изменений.</span><span class="sxs-lookup"><span data-stu-id="1f614-189">hello value you provide in hello request is emitted in hello ID token's `nonce` claim, unmodified.</span></span> <span data-ttu-id="1f614-190">Приложение может проверить значение hello с hello значением, указанным на hello запрос, который связывает приложение hello сеанса с определенной маркер идентификатора.</span><span class="sxs-lookup"><span data-stu-id="1f614-190">Your app can verify hello value against hello value it specified on hello request, which associates hello app's session with a specific ID token.</span></span> <span data-ttu-id="1f614-191">Это проверку во время процесса проверки токенов идентификатор hello следует выполнять приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-191">Your app should perform this validation during hello ID token validation process.</span></span> |
| <span data-ttu-id="1f614-192">name</span><span class="sxs-lookup"><span data-stu-id="1f614-192">name</span></span> |`name` |`Babe Ruth` |<span data-ttu-id="1f614-193">Имя Hello предоставляет удобное для восприятия значение, идентифицирующее субъект hello hello маркера.</span><span class="sxs-lookup"><span data-stu-id="1f614-193">hello name claim provides a human-readable value that identifies hello subject of hello token.</span></span> <span data-ttu-id="1f614-194">значение Hello не гарантируется, что toobe уникальным, оно является изменяемым, которая разработана toobe используется только для отображения.</span><span class="sxs-lookup"><span data-stu-id="1f614-194">hello value is not guaranteed toobe unique, it is mutable, and it's designed toobe used only for display purposes.</span></span> <span data-ttu-id="1f614-195">Hello `profile` требуется область в заказ tooreceive это утверждение.</span><span class="sxs-lookup"><span data-stu-id="1f614-195">hello `profile` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="1f614-196">email</span><span class="sxs-lookup"><span data-stu-id="1f614-196">email</span></span> |`email` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="1f614-197">Hello основной адрес электронной почты связанные с hello учетной записи пользователя, если он существует.</span><span class="sxs-lookup"><span data-stu-id="1f614-197">hello primary email address associated with hello user account, if one exists.</span></span> <span data-ttu-id="1f614-198">Его значение не является неизменяемым и может меняться с течением времени.</span><span class="sxs-lookup"><span data-stu-id="1f614-198">Its value is mutable and might change over time.</span></span> <span data-ttu-id="1f614-199">Hello `email` требуется область в заказ tooreceive это утверждение.</span><span class="sxs-lookup"><span data-stu-id="1f614-199">hello `email` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="1f614-200">preferred username</span><span class="sxs-lookup"><span data-stu-id="1f614-200">preferred username</span></span> |`preferred_username` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="1f614-201">Hello основного имени пользователя, представляющий пользователя hello в конечной точке v2.0 hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-201">hello primary username that represents hello user in hello v2.0 endpoint.</span></span> <span data-ttu-id="1f614-202">Это может быть адрес электронной почты, телефонный номер или универсальное имя пользователя без определенного формата.</span><span class="sxs-lookup"><span data-stu-id="1f614-202">It could be an email address, phone number, or a generic username without a specified format.</span></span> <span data-ttu-id="1f614-203">Его значение не является неизменяемым и может меняться с течением времени.</span><span class="sxs-lookup"><span data-stu-id="1f614-203">Its value is mutable and might change over time.</span></span> <span data-ttu-id="1f614-204">Hello `profile` требуется область в заказ tooreceive это утверждение.</span><span class="sxs-lookup"><span data-stu-id="1f614-204">hello `profile` scope is required in order tooreceive this claim.</span></span> |
| <span data-ttu-id="1f614-205">subject</span><span class="sxs-lookup"><span data-stu-id="1f614-205">subject</span></span> |`sub` |`MF4f-ggWMEji12KynJUNQZphaUTvLcQug5jdF2nl01Q` | <span data-ttu-id="1f614-206">Участник Hello, о какой hello подтверждает токен, сведения, такие как hello пользователя приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-206">hello principal about which hello token asserts information, such as hello user of an app.</span></span> <span data-ttu-id="1f614-207">Это значение является неизменяемым и не может быть переназначено или повторно использовано.</span><span class="sxs-lookup"><span data-stu-id="1f614-207">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="1f614-208">Используется tooperform проверки авторизации может быть безопасно, например когда токен hello используется tooaccess ресурса и может использоваться в качестве ключа в таблицах базы данных.</span><span class="sxs-lookup"><span data-stu-id="1f614-208">It can be used tooperform authorization checks safely, such as when hello token is used tooaccess a resource, and can be used as a key in database tables.</span></span> <span data-ttu-id="1f614-209">Так как hello субъект всегда присутствует в токенах hello, Azure AD выдает, мы рекомендуем использовать это значение в системе авторизации общего назначения.</span><span class="sxs-lookup"><span data-stu-id="1f614-209">Because hello subject is always present in hello tokens that Azure AD issues, we recommend using this value in a general-purpose authorization system.</span></span> <span data-ttu-id="1f614-210">Однако Hello субъекта является парный идентификатор — это идентификатор уникальный tooa конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-210">hello subject is, however, a pairwise identifier - it is unique tooa particular application ID.</span></span>  <span data-ttu-id="1f614-211">Таким образом Если один пользователь входит в двух различных приложений, с помощью двух идентификаторов другого клиента, такие приложения получат два разных значения для hello субъект утверждения.</span><span class="sxs-lookup"><span data-stu-id="1f614-211">Therefore, if a single user signs into two different apps using two different client IDs, those apps will receive two different values for hello subject claim.</span></span>  <span data-ttu-id="1f614-212">Это может быть или не быть необходимым в зависимости от требований архитектуры и конфиденциальности.</span><span class="sxs-lookup"><span data-stu-id="1f614-212">This may or may not be desired depending on your architecture and privacy requirements.</span></span> |
| <span data-ttu-id="1f614-213">object ID</span><span class="sxs-lookup"><span data-stu-id="1f614-213">object ID</span></span> |`oid` |`a1dbdde8-e4f9-4571-ad93-3059e3750d23` | <span data-ttu-id="1f614-214">Hello неизменяемый идентификатор для объекта в hello Microsoft системы удостоверений, в этом случае учетной записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="1f614-214">hello immutable identifier for an object in hello Microsoft identity system, in this case, a user account.</span></span>  <span data-ttu-id="1f614-215">Он также может быть проверки авторизации используется tooperform безопасно и в таблицах базы данных в качестве ключа.</span><span class="sxs-lookup"><span data-stu-id="1f614-215">It can also be used tooperform authorization checks safely and as a key in database tables.</span></span> <span data-ttu-id="1f614-216">Этот идентификатор уникально идентифицирует пользователя hello в приложениях - двух различных приложений, вход hello же пользователь получит hello же значение в hello `oid` утверждения.</span><span class="sxs-lookup"><span data-stu-id="1f614-216">This ID uniquely identifies hello user across applications - two different applications signing in hello same user will receive hello same value in hello `oid` claim.</span></span>  <span data-ttu-id="1f614-217">Это означает, что он может использоваться для использования в запросах tooMicrosoft Интернет-служб, таких как Microsoft Graph hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-217">This means that it can be used when making queries tooMicrosoft online services, such as hello Microsoft Graph.</span></span>  <span data-ttu-id="1f614-218">Возвращает этот идентификатор как hello Hello Microsoft Graph `id` свойства для данной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="1f614-218">hello Microsoft Graph will return this ID as hello `id` property for a given user account.</span></span>  <span data-ttu-id="1f614-219">Поскольку hello `oid` позволяет нескольким приложениям пользователи toocorrelate hello `profile` требуется область в заказ tooreceive это утверждение.</span><span class="sxs-lookup"><span data-stu-id="1f614-219">Because hello `oid` allows multiple apps toocorrelate users, hello `profile` scope is required in order tooreceive this claim.</span></span> <span data-ttu-id="1f614-220">Обратите внимание, что если один пользователь существует в нескольких клиентов, hello пользователя будет содержать другим Идентификатором объекта в каждый клиент — они считаются разными учетными записями, несмотря на то, что hello входе пользователя в каждой учетной записи с hello одинаковые учетные данные.</span><span class="sxs-lookup"><span data-stu-id="1f614-220">Note that if a single user exists in multiple tenants, hello user will contain a different object ID in each tenant - they are considered different accounts, even though hello user logs into each account with hello same credentials.</span></span> |

### <a name="access-tokens"></a><span data-ttu-id="1f614-221">Маркеры доступа</span><span class="sxs-lookup"><span data-stu-id="1f614-221">Access tokens</span></span>
<span data-ttu-id="1f614-222">В настоящее время маркеры доступа, выданный hello v2.0 endpoint могут использоваться только службами Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="1f614-222">Currently, access tokens issued by hello v2.0 endpoint can be consumed only by Microsoft Services.</span></span> <span data-ttu-id="1f614-223">Приложения не должны должна быть tooperform любой проверки или проверки маркеров доступа для любого из сценариев hello в настоящее время поддерживается.</span><span class="sxs-lookup"><span data-stu-id="1f614-223">Your apps shouldn't need tooperform any validation or inspection of access tokens for any of hello currently supported scenarios.</span></span> <span data-ttu-id="1f614-224">Их можно рассматривать как полностью непрозрачные маркеры.</span><span class="sxs-lookup"><span data-stu-id="1f614-224">You can treat access tokens as completely opaque.</span></span> <span data-ttu-id="1f614-225">Они являются только строки, что приложение сможет пройти tooMicrosoft HTTP-запросов.</span><span class="sxs-lookup"><span data-stu-id="1f614-225">They are just strings that your app can pass tooMicrosoft in HTTP requests.</span></span>

<span data-ttu-id="1f614-226">В hello рядом будущих, v2.0 hello конечной точки накладывает hello возможность токены доступа tooreceive вашего приложения с других клиентов.</span><span class="sxs-lookup"><span data-stu-id="1f614-226">In hello near future, hello v2.0 endpoint will introduce hello ability for your app tooreceive access tokens from other clients.</span></span> <span data-ttu-id="1f614-227">В этот момент hello сведения в этом справочном разделе обновляется с hello сведения, необходимые для приложения tooperform проверки токена доступа и других подобных задач.</span><span class="sxs-lookup"><span data-stu-id="1f614-227">At that time, hello information in this reference topic will be updated with hello information that you need for your app tooperform access token validation and other similar tasks.</span></span>

<span data-ttu-id="1f614-228">При запросе маркера доступа из конечной точки v2.0 hello, конечная точка v2.0 hello также возвращает метаданные о hello маркер доступа для toouse вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-228">When you request an access token from hello v2.0 endpoint, hello v2.0 endpoint also returns metadata about hello access token for your app toouse.</span></span> <span data-ttu-id="1f614-229">Эти сведения включают hello срок действия маркера доступа hello и hello областей, для которых он допустим.</span><span class="sxs-lookup"><span data-stu-id="1f614-229">This information includes hello expiry time of hello access token and hello scopes for which it is valid.</span></span> <span data-ttu-id="1f614-230">Ваше приложение использует это метаданные tooperform интеллектуальной кэширование маркеров доступа без необходимости маркер доступа откройте hello tooparse сам.</span><span class="sxs-lookup"><span data-stu-id="1f614-230">Your app uses this metadata tooperform intelligent caching of access tokens without having tooparse open hello access token itself.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="1f614-231">Маркеры обновления</span><span class="sxs-lookup"><span data-stu-id="1f614-231">Refresh tokens</span></span>
<span data-ttu-id="1f614-232">Обновить маркеры, маркеры в потоке OAuth 2.0 доступа приложение может использовать tooget как новые маркеры безопасности.</span><span class="sxs-lookup"><span data-stu-id="1f614-232">Refresh tokens are security tokens that your app can use tooget new access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="1f614-233">Приложение может использовать обновления токенов tooachieve долгосрочной доступа tooresources от имени пользователя без необходимости взаимодействия с пользователем hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-233">Your app can use refresh tokens tooachieve long-term access tooresources on behalf of a user without requiring interaction with hello user.</span></span>

<span data-ttu-id="1f614-234">Маркеры обновления относятся к нескольким ресурсам.</span><span class="sxs-lookup"><span data-stu-id="1f614-234">Refresh tokens are multi-resource.</span></span> <span data-ttu-id="1f614-235">Токен обновления, полученные во время запроса маркера для одного ресурса может быть активирован для ресурса совершенно tooa токены доступа.</span><span class="sxs-lookup"><span data-stu-id="1f614-235">A refresh token received during a token request for one resource can be redeemed for access tokens tooa completely different resource.</span></span>

<span data-ttu-id="1f614-236">tooreceive обновления в ответ на токен приложения необходимо запросить и предоставить hello `offline_acesss` области.</span><span class="sxs-lookup"><span data-stu-id="1f614-236">tooreceive a refresh in a token response, your app must request and be granted hello `offline_acesss` scope.</span></span> <span data-ttu-id="1f614-237">Дополнительные сведения о hello toolearn `offline_access` области см. в разделе hello [согласия и областей](active-directory-v2-scopes.md) статьи.</span><span class="sxs-lookup"><span data-stu-id="1f614-237">toolearn more about hello `offline_access` scope, see hello [consent and scopes](active-directory-v2-scopes.md) article.</span></span>

<span data-ttu-id="1f614-238">Токенов обновления и всегда будет, полностью непрозрачный tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-238">Refresh tokens are, and always will be, completely opaque tooyour app.</span></span> <span data-ttu-id="1f614-239">Они выдаются hello Azure AD v2.0 конечной точкой и можно только проверять и интерпретации hello v2.0 конечной точкой.</span><span class="sxs-lookup"><span data-stu-id="1f614-239">They are issued by hello Azure AD v2.0 endpoint and can only be inspected and interpreted by hello v2.0 endpoint.</span></span> <span data-ttu-id="1f614-240">Они находятся в течение продолжительного времени, но приложения не должны быть написаны tooexpect, токен обновления будут продолжаться в течение любого периода времени.</span><span class="sxs-lookup"><span data-stu-id="1f614-240">They are long-lived, but your app should not be written tooexpect that a refresh token will last for any period of time.</span></span> <span data-ttu-id="1f614-241">Маркеры обновления могут стать недействительными в любое время по разным причинам.</span><span class="sxs-lookup"><span data-stu-id="1f614-241">Refresh tokens can be invalidated at any moment for various reasons.</span></span> <span data-ttu-id="1f614-242">Здравствуйте, только для вашего приложения tooknow, если токен обновления является допустимым в том числе tooattempt tooredeem его, делая конечную точку v2.0 toohello запроса маркера.</span><span class="sxs-lookup"><span data-stu-id="1f614-242">hello only way for your app tooknow if a refresh token is valid is tooattempt tooredeem it by making a token request toohello v2.0 endpoint.</span></span>

<span data-ttu-id="1f614-243">Когда вы активируете токен обновления для нового токена доступа (и если приложение предоставлено hello `offline_access` области), в ответ на токен hello появляется новый токен обновления.</span><span class="sxs-lookup"><span data-stu-id="1f614-243">When you redeem a refresh token for a new access token (and if your app had been granted hello `offline_access` scope), you receive a new refresh token in hello token response.</span></span> <span data-ttu-id="1f614-244">Сохраните hello вновь выданные обновления токенов, tooreplace hello, который используется в запросе hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-244">Save hello newly issued refresh token, tooreplace hello one you used in hello request.</span></span> <span data-ttu-id="1f614-245">Такой подход обеспечит максимальный срок действия маркеров обновления.</span><span class="sxs-lookup"><span data-stu-id="1f614-245">This guarantees that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="1f614-246">Проверка маркеров</span><span class="sxs-lookup"><span data-stu-id="1f614-246">Validating tokens</span></span>
<span data-ttu-id="1f614-247">В настоящее время hello только проверки токенов приложения должны требоваться tooperform проверки маркеров безопасности.</span><span class="sxs-lookup"><span data-stu-id="1f614-247">Currently, hello only token validation your apps should need tooperform is validating ID tokens.</span></span> <span data-ttu-id="1f614-248">toovalidate маркер идентификатора, приложение должно проверять оба hello маркер идентификатора подписи и hello утверждения в маркер идентификатора hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-248">toovalidate an ID token, your app should validate both hello ID token's signature and hello claims in hello ID token.</span></span>

<!-- TODO: Link -->
<span data-ttu-id="1f614-249">Корпорация Майкрософт предоставляет библиотеки и образцы кода, которые показывают, как tooeasily обрабатывать проверки токенов.</span><span class="sxs-lookup"><span data-stu-id="1f614-249">Microsoft provides libraries and code samples that show you how tooeasily handle token validation.</span></span> <span data-ttu-id="1f614-250">В следующих разделах hello описывается базовый процесс hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-250">In hello next sections, we describe hello underlying process.</span></span> <span data-ttu-id="1f614-251">Кроме того, доступно несколько сторонних библиотек с открытым кодом для проверки JWT.</span><span class="sxs-lookup"><span data-stu-id="1f614-251">Several third-party open-source libraries also are available for JWT validation.</span></span> <span data-ttu-id="1f614-252">Существует по крайней мере одна библиотека практически для каждой платформы и языка.</span><span class="sxs-lookup"><span data-stu-id="1f614-252">There's at least one library option for almost every platform and language.</span></span>

### <a name="validate-hello-signature"></a><span data-ttu-id="1f614-253">Проверить подпись hello</span><span class="sxs-lookup"><span data-stu-id="1f614-253">Validate hello signature</span></span>
<span data-ttu-id="1f614-254">JWT содержит три сегмента, разделенные точками hello `.` символов.</span><span class="sxs-lookup"><span data-stu-id="1f614-254">A JWT contains three segments, which are separated by hello `.` character.</span></span> <span data-ttu-id="1f614-255">Первый сегмент Hello называется hello *заголовок*, второй сегмент hello — hello *текст*, и третьего сегмента hello — hello *подпись*.</span><span class="sxs-lookup"><span data-stu-id="1f614-255">hello first segment is known as hello *header*, hello second segment is hello *body*, and hello third segment is hello *signature*.</span></span> <span data-ttu-id="1f614-256">Сегмент Hello подпись может быть используется toovalidate hello подлинность маркера идентификатор hello, чтобы доверенным приложения.</span><span class="sxs-lookup"><span data-stu-id="1f614-256">hello signature segment can be used toovalidate hello authenticity of hello ID token so that it can be trusted by your app.</span></span>

<span data-ttu-id="1f614-257">Маркеры идентификации подписываются при помощи стандартных отраслевых алгоритмов асимметричного шифрования, таких как RSA 256.</span><span class="sxs-lookup"><span data-stu-id="1f614-257">ID tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="1f614-258">Hello заголовок hello идентификатор маркера содержит сведения о ключе hello и метод шифрования используется токен toosign hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-258">hello header of hello ID token has information about hello key and encryption method used toosign hello token.</span></span> <span data-ttu-id="1f614-259">Например:</span><span class="sxs-lookup"><span data-stu-id="1f614-259">For example:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "kid": "MnC_VZcATfM5pOYiJHMba9goEKY"
}
```

<span data-ttu-id="1f614-260">Hello `alg` утверждение указывает hello алгоритм, который был toosign используется токен hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-260">hello `alg` claim indicates hello algorithm that was used toosign hello token.</span></span> <span data-ttu-id="1f614-261">Hello `kid` утверждение указывает hello открытый ключ, который был toosign используется токен hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-261">hello `kid` claim indicates hello public key that was used toosign hello token.</span></span>

<span data-ttu-id="1f614-262">В любой момент hello v2.0 endpoint могут подписывать маркер идентификатора с помощью любого из определенной группы пары открытого и закрытого ключей.</span><span class="sxs-lookup"><span data-stu-id="1f614-262">At any time, hello v2.0 endpoint might sign an ID token by using any one of a specific set of public-private key pairs.</span></span> <span data-ttu-id="1f614-263">конечной точки v2.0 Hello периодически поворачивает hello возможный набор ключей, поэтому приложение должно быть написано toohandle этих ключ автоматически изменяется.</span><span class="sxs-lookup"><span data-stu-id="1f614-263">hello v2.0 endpoint periodically rotates hello possible set of keys, so your app should be written toohandle those key changes automatically.</span></span> <span data-ttu-id="1f614-264">Toocheck разумного частоты для обновления toohello открытых ключей используется конечной точкой v2.0 hello выполняется каждые 24 часа.</span><span class="sxs-lookup"><span data-stu-id="1f614-264">A reasonable frequency toocheck for updates toohello public keys used by hello v2.0 endpoint is every 24 hours.</span></span>

<span data-ttu-id="1f614-265">Можно получить hello подписи основные данные, необходимые toovalidate hello подписи с помощью документа OpenID Connect метаданных hello, расположенный в:</span><span class="sxs-lookup"><span data-stu-id="1f614-265">You can acquire hello signing key data that you need toovalidate hello signature by using hello OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="1f614-266">Попробуйте hello URL-адрес в браузере!</span><span class="sxs-lookup"><span data-stu-id="1f614-266">Try hello URL in a browser!</span></span>
>
>

<span data-ttu-id="1f614-267">Данный документ метаданных является объект JSON, который имеет несколько частей полезные сведения, такие как расположение hello hello конечных точек, необходимые для проверки подлинности OpenID Connect.</span><span class="sxs-lookup"><span data-stu-id="1f614-267">This metadata document is a JSON object that has several useful pieces of information, such as hello location of hello various endpoints required for OpenID Connect authentication.</span></span>  <span data-ttu-id="1f614-268">Hello документ также включает *jwks_uri*, что дает hello расположение hello набор открытых ключей, как использовать toosign токены.</span><span class="sxs-lookup"><span data-stu-id="1f614-268">hello document also includes a *jwks_uri*, which gives hello location of hello set of public keys used toosign tokens.</span></span> <span data-ttu-id="1f614-269">документ JSON Hello, расположенный в hello jwks_uri имеет все hello сведения об открытом ключе, используется в настоящий момент.</span><span class="sxs-lookup"><span data-stu-id="1f614-269">hello JSON document located at hello jwks_uri has all hello public key information that is currently in use.</span></span> <span data-ttu-id="1f614-270">Приложение может использовать hello `kid` утверждения в tooselect заголовок JWT hello, какие открытый ключ в этом документе было toosign используется токен.</span><span class="sxs-lookup"><span data-stu-id="1f614-270">Your app can use hello `kid` claim in hello JWT header tooselect which public key in this document has been used toosign a token.</span></span> <span data-ttu-id="1f614-271">Затем выполняется проверка подписи, используя правильный открытый ключ hello и указанный алгоритм hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-271">It then performs signature validation by using hello correct public key and hello indicated algorithm.</span></span>

<span data-ttu-id="1f614-272">Выполнение проверки подписи используется вне области hello этого документа.</span><span class="sxs-lookup"><span data-stu-id="1f614-272">Performing signature validation is outside hello scope of this document.</span></span> <span data-ttu-id="1f614-273">Многие библиотеки с открытым исходным кодом, доступных toohelp вас с этим.</span><span class="sxs-lookup"><span data-stu-id="1f614-273">Many open-source libraries are available toohelp you with this.</span></span>

### <a name="validate-hello-claims"></a><span data-ttu-id="1f614-274">Проверки утверждений hello</span><span class="sxs-lookup"><span data-stu-id="1f614-274">Validate hello claims</span></span>
<span data-ttu-id="1f614-275">Когда приложение получает маркер идентификатора при входе пользователя, его необходимо выполнить несколько проверок соответствие утверждениям hello в маркер идентификатора hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-275">When your app receives an ID token upon user sign-in, it should also perform a few checks against hello claims in hello ID token.</span></span> <span data-ttu-id="1f614-276">Помимо прочего, к ним относятся:</span><span class="sxs-lookup"><span data-stu-id="1f614-276">These include but are not limited to:</span></span>

* <span data-ttu-id="1f614-277">**аудитория** утверждения tooverify, hello маркер идентификатора было предполагаемым toobe заданному tooyour приложения</span><span class="sxs-lookup"><span data-stu-id="1f614-277">**audience** claim, tooverify that hello ID token was intended toobe given tooyour app</span></span>
* <span data-ttu-id="1f614-278">**не ранее** и **время истечения срока действия** утверждений, tooverify, hello маркер идентификатора не истек.</span><span class="sxs-lookup"><span data-stu-id="1f614-278">**not before** and **expiration time** claims, tooverify that hello ID token has not expired</span></span>
* <span data-ttu-id="1f614-279">**издатель** утверждения tooverify, hello маркер был выдан tooyour приложения hello v2.0 конечной точкой</span><span class="sxs-lookup"><span data-stu-id="1f614-279">**issuer** claim, tooverify that hello token was issued tooyour app by hello v2.0 endpoint</span></span>
* <span data-ttu-id="1f614-280">Утверждение **nonce**. Необходимо для предотвращения атак с использованием воспроизведения маркеров.</span><span class="sxs-lookup"><span data-stu-id="1f614-280">**nonce**, as a token replay attack mitigation</span></span>

<span data-ttu-id="1f614-281">Полный список проверки утверждений, которые должен выполнять приложения см. в разделе hello [спецификация OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span><span class="sxs-lookup"><span data-stu-id="1f614-281">For a full list of claim validations that your app should perform, see hello [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span>

<span data-ttu-id="1f614-282">Подробные сведения о hello ожидаемые значения для этих утверждений включаются в hello [маркеров безопасности](# ID tokens) раздела.</span><span class="sxs-lookup"><span data-stu-id="1f614-282">Details of hello expected values for these claims are included in hello [ID tokens](# ID tokens) section.</span></span>

## <a name="token-lifetimes"></a><span data-ttu-id="1f614-283">Время существования маркеров</span><span class="sxs-lookup"><span data-stu-id="1f614-283">Token lifetimes</span></span>
<span data-ttu-id="1f614-284">Мы предоставляем hello после времени жизни токенов только в информационных целях.</span><span class="sxs-lookup"><span data-stu-id="1f614-284">We provide hello following token lifetimes for your information only.</span></span> <span data-ttu-id="1f614-285">Hello сведения могут помочь в процессе разработки и отладки приложений.</span><span class="sxs-lookup"><span data-stu-id="1f614-285">hello information might help you as you develop and debug apps.</span></span> <span data-ttu-id="1f614-286">Приложения не должно быть записаны tooexpect любой из этих константа tooremain время жизни.</span><span class="sxs-lookup"><span data-stu-id="1f614-286">Your apps should not be written tooexpect any of these lifetimes tooremain constant.</span></span> <span data-ttu-id="1f614-287">Время существования маркеров может изменяться в любое время, что и будет происходить.</span><span class="sxs-lookup"><span data-stu-id="1f614-287">Token lifetimes can and will change at any time.</span></span>

| <span data-ttu-id="1f614-288">Маркер</span><span class="sxs-lookup"><span data-stu-id="1f614-288">Token</span></span> | <span data-ttu-id="1f614-289">Срок действия</span><span class="sxs-lookup"><span data-stu-id="1f614-289">Lifetime</span></span> | <span data-ttu-id="1f614-290">Описание</span><span class="sxs-lookup"><span data-stu-id="1f614-290">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1f614-291">Маркеры идентификации (рабочие или учебные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-291">ID tokens (work or school accounts)</span></span> |<span data-ttu-id="1f614-292">1 час</span><span class="sxs-lookup"><span data-stu-id="1f614-292">1 hour</span></span> |<span data-ttu-id="1f614-293">Как правило, маркеры идентификации действительны в течение часа.</span><span class="sxs-lookup"><span data-stu-id="1f614-293">ID tokens typically are valid for 1 hour.</span></span> <span data-ttu-id="1f614-294">Веб-приложения можно использовать этот же toomaintain время существования собственном сеансе с hello пользователя (рекомендуется), или можно выбрать время существования совершенно другой сеанс.</span><span class="sxs-lookup"><span data-stu-id="1f614-294">Your web app can use this same lifetime toomaintain its own session with hello user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="1f614-295">Если ваше приложение должно tooget новый маркер идентификатора, ему запрос toomake новый вход toohello v2.0 конечной точки для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="1f614-295">If your app needs tooget a new ID token, it needs toomake a new sign-in request toohello v2.0 authorize endpoint.</span></span> <span data-ttu-id="1f614-296">Если пользователь hello имеет допустимый браузера сеанс с конечной точкой v2.0 hello, hello пользователя может не иметь необходимые tooenter свои учетные данные еще раз.</span><span class="sxs-lookup"><span data-stu-id="1f614-296">If hello user has a valid browser session with hello v2.0 endpoint, hello user might not be required tooenter their credentials again.</span></span> |
| <span data-ttu-id="1f614-297">Маркеры идентификации (личные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-297">ID tokens (personal accounts)</span></span> |<span data-ttu-id="1f614-298">24 часа</span><span class="sxs-lookup"><span data-stu-id="1f614-298">24 hours</span></span> |<span data-ttu-id="1f614-299">Маркеры идентификации для личных учетных записей обычно действительны в течение 24 часов.</span><span class="sxs-lookup"><span data-stu-id="1f614-299">ID tokens for personal accounts typically are valid for 24 hours.</span></span> <span data-ttu-id="1f614-300">Веб-приложения можно использовать этот же toomaintain время существования собственном сеансе с hello пользователя (рекомендуется), или можно выбрать время существования совершенно другой сеанс.</span><span class="sxs-lookup"><span data-stu-id="1f614-300">Your web app can use this same lifetime toomaintain its own session with hello user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="1f614-301">Если ваше приложение должно tooget новый маркер идентификатора, ему запрос toomake новый вход toohello v2.0 конечной точки для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="1f614-301">If your app needs tooget a new ID token, it needs toomake a new sign-in request toohello v2.0 authorize endpoint.</span></span> <span data-ttu-id="1f614-302">Если пользователь hello имеет допустимый браузера сеанс с конечной точкой v2.0 hello, hello пользователя может не иметь необходимые tooenter свои учетные данные еще раз.</span><span class="sxs-lookup"><span data-stu-id="1f614-302">If hello user has a valid browser session with hello v2.0 endpoint, hello user might not be required tooenter their credentials again.</span></span> |
| <span data-ttu-id="1f614-303">Маркеры доступа (рабочие или учебные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-303">Access tokens (work or school accounts)</span></span> |<span data-ttu-id="1f614-304">1 час</span><span class="sxs-lookup"><span data-stu-id="1f614-304">1 hour</span></span> |<span data-ttu-id="1f614-305">Как часть токена метаданных hello, указанных в токен ответов.</span><span class="sxs-lookup"><span data-stu-id="1f614-305">Indicated in token responses as part of hello token metadata.</span></span> |
| <span data-ttu-id="1f614-306">Маркеры доступа (личные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-306">Access tokens (personal accounts)</span></span> |<span data-ttu-id="1f614-307">1 час</span><span class="sxs-lookup"><span data-stu-id="1f614-307">1 hour</span></span> |<span data-ttu-id="1f614-308">Как часть токена метаданных hello, указанных в токен ответов.</span><span class="sxs-lookup"><span data-stu-id="1f614-308">Indicated in token responses as part of hello token metadata.</span></span> <span data-ttu-id="1f614-309">Срок действия маркеров доступа, выданных от имени личных учетных записей, можно изменить, но обычно он составляет один час.</span><span class="sxs-lookup"><span data-stu-id="1f614-309">Access tokens that are issued on behalf of personal accounts can be configured for a different lifetime, but 1 hour is typical.</span></span> |
| <span data-ttu-id="1f614-310">Маркеры обновления (рабочая или учебная учетная запись)</span><span class="sxs-lookup"><span data-stu-id="1f614-310">Refresh tokens (work or school account)</span></span> |<span data-ttu-id="1f614-311">Копирование too14 дней</span><span class="sxs-lookup"><span data-stu-id="1f614-311">Up too14 days</span></span> |<span data-ttu-id="1f614-312">Один маркер обновления действителен до 14 дней.</span><span class="sxs-lookup"><span data-stu-id="1f614-312">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="1f614-313">Однако токен обновления hello могут стать недопустимыми в любое время по различным причинам, приложения должны продолжать tootry toouse токен обновления, пока не происходит сбой, или пока приложение заменяет его с помощью нового токена обновления.</span><span class="sxs-lookup"><span data-stu-id="1f614-313">However, hello refresh token might become invalid at any time for various reasons, so your app should continue tootry toouse a refresh token until it fails, or until your app replaces it with a new refresh token.</span></span> <span data-ttu-id="1f614-314">Токен обновления также становится недействительным, если он был 90 дней с момента hello пользователь ввел свои учетные данные.</span><span class="sxs-lookup"><span data-stu-id="1f614-314">A refresh token also becomes invalid if it has been 90 days since hello user has entered their credentials.</span></span> |
| <span data-ttu-id="1f614-315">Маркеры обновления (личные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-315">Refresh tokens (personal accounts)</span></span> |<span data-ttu-id="1f614-316">Too1 год</span><span class="sxs-lookup"><span data-stu-id="1f614-316">Up too1 year</span></span> |<span data-ttu-id="1f614-317">Один маркер обновления действителен до 1 года.</span><span class="sxs-lookup"><span data-stu-id="1f614-317">A single refresh token is valid for a maximum of 1 year.</span></span> <span data-ttu-id="1f614-318">Тем не менее hello токен обновления могут стать недопустимыми в любое время по различным причинам, поэтому приложение должно по-прежнему tootry toouse токен обновления, пока она не завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="1f614-318">However, hello refresh token might become invalid at any time for various reasons, so your app should continue tootry toouse a refresh token until it fails.</span></span> |
| <span data-ttu-id="1f614-319">Коды авторизации (рабочие или учебные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-319">Authorization codes (work or school accounts)</span></span> |<span data-ttu-id="1f614-320">10 минут</span><span class="sxs-lookup"><span data-stu-id="1f614-320">10 minutes</span></span> |<span data-ttu-id="1f614-321">Коды авторизации, специально кратковременных и следует немедленно распространяются на токены доступа и токен обновления при получении токены hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-321">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when hello tokens are received.</span></span> |
| <span data-ttu-id="1f614-322">Коды авторизации (личные учетные записи)</span><span class="sxs-lookup"><span data-stu-id="1f614-322">Authorization codes (personal accounts)</span></span> |<span data-ttu-id="1f614-323">5 мин</span><span class="sxs-lookup"><span data-stu-id="1f614-323">5 minutes</span></span> |<span data-ttu-id="1f614-324">Коды авторизации, специально кратковременных и следует немедленно распространяются на токены доступа и токен обновления при получении токены hello.</span><span class="sxs-lookup"><span data-stu-id="1f614-324">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when hello tokens are received.</span></span> <span data-ttu-id="1f614-325">Коды авторизации, выданные от имени личных учетных записей, являются одноразовыми.</span><span class="sxs-lookup"><span data-stu-id="1f614-325">Authorization codes that are issued on behalf of personal accounts are for one-time use.</span></span> |
