---
title: "aaaWhat отличается в конечной точке v2.0 hello Azure AD? | Документация Майкрософт"
description: "Сравнение hello Azure AD, исходные и конечные точки v2.0 hello."
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: 5060da46-b091-4e25-9fa8-af4ae4359b6c
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/01/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: e7ed196f9053fc21db799cd6bc513ba5c2b92885
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="whats-different-about-hello-v20-endpoint"></a><span data-ttu-id="307f8-104">Что такое различных о конечной точке v2.0 hello?</span><span class="sxs-lookup"><span data-stu-id="307f8-104">What's different about hello v2.0 endpoint?</span></span>
<span data-ttu-id="307f8-105">Если вы уже знакомы с Azure Active Directory или интеграцией приложений с Azure AD в прошлом hello, возможно, некоторые отличия в конечной точке v2.0 hello, который не ожидается.</span><span class="sxs-lookup"><span data-stu-id="307f8-105">If you're familiar with Azure Active Directory or have integrated apps with Azure AD in hello past, there may be some differences in hello v2.0 endpoint that you would not expect.</span></span>  <span data-ttu-id="307f8-106">Они описаны в этом документе.</span><span class="sxs-lookup"><span data-stu-id="307f8-106">This document calls out those differences for your understanding.</span></span>

> [!NOTE]
> <span data-ttu-id="307f8-107">Не все сценарии Azure Active Directory и возможности поддерживаются hello v2.0 конечной точкой.</span><span class="sxs-lookup"><span data-stu-id="307f8-107">Not all Azure Active Directory scenarios & features are supported by hello v2.0 endpoint.</span></span>  <span data-ttu-id="307f8-108">toodetermine, если необходимо использовать конечную точку v2.0 hello, прочтите сведения о [ограничения v2.0](active-directory-v2-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="307f8-108">toodetermine if you should use hello v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>

## <a name="microsoft-accounts-and-azure-ad-accounts"></a><span data-ttu-id="307f8-109">Учетные записи Майкрософт и Azure AD</span><span class="sxs-lookup"><span data-stu-id="307f8-109">Microsoft accounts and Azure AD accounts</span></span>
<span data-ttu-id="307f8-110">Конечная точка v2.0 Hello позволяют разработчикам toowrite приложения, принимающие вход с учетными записями Майкрософт и Azure AD учетных записей, через конечную точку одного проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="307f8-110">hello v2.0 endpoint allow developers toowrite apps that accept sign-in from both Microsoft Accounts and Azure AD accounts, using a single auth endpoint.</span></span>  <span data-ttu-id="307f8-111">Это дает hello toowrite возможности приложения полностью учетной записи независимой от; Это может быть игнорирующих hello типа учетной записи, которая hello пользователь входит в систему.</span><span class="sxs-lookup"><span data-stu-id="307f8-111">This gives you hello ability toowrite your app completely account-agnostic; it can be ignorant of hello type of account that hello user signs in with.</span></span>  <span data-ttu-id="307f8-112">Конечно, вы *можно* создания приложения с учетом типа "hello" учетная запись, используемая в отдельном сеансе, но не требуется.</span><span class="sxs-lookup"><span data-stu-id="307f8-112">Of course, you *can* make your app aware of hello type of account being used in a particular session, but you don't have to.</span></span>

<span data-ttu-id="307f8-113">Например если приложение вызывает hello [Microsoft Graph](https://graph.microsoft.io), некоторые дополнительные функциональные возможности и данные будут доступны tooenterprise пользователей, например их сайтам SharePoint или данных каталога.</span><span class="sxs-lookup"><span data-stu-id="307f8-113">For instance, if your app calls hello [Microsoft Graph](https://graph.microsoft.io), some additional functionality and data will be available tooenterprise users, such as their SharePoint sites or Directory data.</span></span>  <span data-ttu-id="307f8-114">Но для многих действий таких как [чтение почты пользователя](https://graph.microsoft.io/docs/api-reference/v1.0/resources/message), точно можно написать код hello hello одинаково для учетных записей и учетных записей Майкрософт и Azure AD.</span><span class="sxs-lookup"><span data-stu-id="307f8-114">But for many actions, such as [Reading a user's mail](https://graph.microsoft.io/docs/api-reference/v1.0/resources/message), hello code can be written exactly hello same for both Microsoft Accounts and Azure AD accounts.</span></span>  

<span data-ttu-id="307f8-115">Теперь интеграция приложения с учетными записями Майкрософт и Azure AD — один простой процесс.</span><span class="sxs-lookup"><span data-stu-id="307f8-115">Integrating your app with Microsoft Accounts and Azure AD accounts is now one simple process.</span></span>  <span data-ttu-id="307f8-116">Можно использовать один набор конечных точек, отдельную библиотеку и одно приложение регистрации toogain доступа tooboth hello потребителя и предприятия миров.</span><span class="sxs-lookup"><span data-stu-id="307f8-116">You can use a single set of endpoints, a single library, and a single app registration toogain access tooboth hello consumer and enterprise worlds.</span></span>  <span data-ttu-id="307f8-117">Дополнительные сведения о toolearn hello v2.0 конечной точки, ознакомьтесь с [hello Обзор](active-directory-appmodel-v2-overview.md).</span><span class="sxs-lookup"><span data-stu-id="307f8-117">toolearn more about hello v2.0 endpoint, check out [hello overview](active-directory-appmodel-v2-overview.md).</span></span>

## <a name="new-app-registration-portal"></a><span data-ttu-id="307f8-118">Новый портал регистрации приложений</span><span class="sxs-lookup"><span data-stu-id="307f8-118">New app registration portal</span></span>
<span data-ttu-id="307f8-119">tooregister приложение, которое работает с конечной точкой v2.0 hello, необходимо использовать новый портал регистрации приложения: [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList).  Это hello портал, где можно получить идентификатор приложения, настроить внешний вид hello страница входа в приложения и многое другое.</span><span class="sxs-lookup"><span data-stu-id="307f8-119">tooregister an app that works with hello v2.0 endpoint, you must use a new app registration portal: [apps.dev.microsoft.com](https://apps.dev.microsoft.com/?referrer=https://azure.microsoft.com/documentation/articles&deeplink=/appList).  This is hello portal where you can obtain an application ID, customize hello appearance of your app's sign-in page, and more.</span></span>  <span data-ttu-id="307f8-120">Все, что нужно tooaccess hello портала — учетная запись на платформе Microsoft - личных или рабочих или учебную учетную запись.</span><span class="sxs-lookup"><span data-stu-id="307f8-120">All you need tooaccess hello portal is a Microsoft powered account - either personal or work/school account.</span></span>

## <a name="one-app-id-for-all-platforms"></a><span data-ttu-id="307f8-121">Один идентификатор приложения для всех платформ</span><span class="sxs-lookup"><span data-stu-id="307f8-121">One app ID for all platforms</span></span>
<span data-ttu-id="307f8-122">Если вы использовали Azure Active Directory, вы, вероятно, зарегистрировали несколько различных приложений для одного проекта.</span><span class="sxs-lookup"><span data-stu-id="307f8-122">If you've used Azure Active Directory, you've probably registered several different apps for a single project.</span></span>  <span data-ttu-id="307f8-123">Например, при построении веб-сайт и приложение iOS, необходимо было tooregister их отдельно, используя два разных идентификатора приложения.</span><span class="sxs-lookup"><span data-stu-id="307f8-123">For example, if you built both a website and an iOS app, you had tooregister them separately, using two different Application Ids.</span></span> <span data-ttu-id="307f8-124">портал регистрации приложения Hello Azure AD принудительно во время регистрации вы toomake это различие:</span><span class="sxs-lookup"><span data-stu-id="307f8-124">hello Azure AD app registration portal forced you toomake this distinction during registration:</span></span>

![Старый пользовательский интерфейс регистрации приложения](../../media/active-directory-v2-flows/old_app_registration.PNG)

<span data-ttu-id="307f8-126">Точно так же, если у вас был веб-сайт и серверный веб-API, вы могли зарегистрировать их как отдельные приложения в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="307f8-126">Similarly, if you had a website and a backend web api, you might have registered each as a separate app in Azure AD.</span></span>  <span data-ttu-id="307f8-127">Если же у вас было приложение для iOS и Android, вы также могли зарегистрировать два различных приложения.</span><span class="sxs-lookup"><span data-stu-id="307f8-127">Or if you had an iOS app and an Android app, you also might have registered two different apps.</span></span>  <span data-ttu-id="307f8-128">Регистрация каждый компонент приложения, ставших toosome непредсказуемого поведения для разработчиков и своих клиентов:</span><span class="sxs-lookup"><span data-stu-id="307f8-128">Registering each component of an application led toosome unexpected behaviors for developers and their customers:</span></span>

* <span data-ttu-id="307f8-129">Каждый компонент появлялись как отдельные приложения в клиенте Azure Active Directory hello каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="307f8-129">Each component appeared as a separate app in hello Azure Active Directory tenant of each customer.</span></span>
* <span data-ttu-id="307f8-130">При попытке администратора клиента tooapply политики для управления доступом к или удалить приложение, они бы toodo Да для каждого компонента приложения hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-130">When a tenant administrator attempted tooapply policy to, manage access to, or delete an app, they would have toodo so for each component of hello app.</span></span>
* <span data-ttu-id="307f8-131">Когда клиенты соглашается tooan приложения, каждого компонента будет отображаются в экран согласия hello различных приложений.</span><span class="sxs-lookup"><span data-stu-id="307f8-131">When customers consented tooan application, each component would appear in hello consent screen as a distinct application.</span></span>

<span data-ttu-id="307f8-132">С конечной точкой v2.0 hello теперь можно зарегистрировать все компоненты проекта как регистрации одного приложения и использовать один идентификатор приложения для всего проекта.</span><span class="sxs-lookup"><span data-stu-id="307f8-132">With hello v2.0 endpoint, you can now register all components of your project as a single app registration, and use a single Application Id for your entire project.</span></span>  <span data-ttu-id="307f8-133">Можно добавить несколько tooa «платформы» каждого проекта и предоставить hello соответствующие данные для каждой платформы, которые можно добавить.</span><span class="sxs-lookup"><span data-stu-id="307f8-133">You can add several "platforms" tooa each project, and provide hello appropriate data for each platform you add.</span></span>  <span data-ttu-id="307f8-134">Конечно можно создать столько приложения, в зависимости от требований, но для большинства случаев hello только один идентификатор приложения не требуется.</span><span class="sxs-lookup"><span data-stu-id="307f8-134">Of course, you can create as many apps as you like depending on your requirements, but for hello majority of cases only one Application Id should be necessary.</span></span>

<span data-ttu-id="307f8-135">Нашей целью является что это будет привести tooa дополнительные упрощенное управление приложениями и процесс разработки и создавать более объединенное представление отдельного проекта, вы можете работать на.</span><span class="sxs-lookup"><span data-stu-id="307f8-135">Our aim is that this will lead tooa more simplified app management and development experience, and create a more consolidated view of a single project that you might be working on.</span></span>

## <a name="scopes-not-resources"></a><span data-ttu-id="307f8-136">Области, а не ресурсы</span><span class="sxs-lookup"><span data-stu-id="307f8-136">Scopes, not resources</span></span>
<span data-ttu-id="307f8-137">В Azure Active Directory приложение может вести себя как **ресурс** или получатель маркеров.</span><span class="sxs-lookup"><span data-stu-id="307f8-137">In Azure Active Directory, an app can behave as a **resource**, or a recipient of tokens.</span></span>  <span data-ttu-id="307f8-138">Ресурс можно определить несколько **областей** или **oAuth2Permissions** , он понимает, позволяя ресурс toothat toorequest маркеры для набор областей клиентских приложений.</span><span class="sxs-lookup"><span data-stu-id="307f8-138">A resource can define a number of **scopes** or **oAuth2Permissions** that it understands, allowing client apps toorequest tokens toothat resource for a certain set of scopes.</span></span>  <span data-ttu-id="307f8-139">Рассмотрим hello API Azure AD Graph в качестве примера ресурса.</span><span class="sxs-lookup"><span data-stu-id="307f8-139">Consider hello Azure AD Graph API as an example of a resource:</span></span>

* <span data-ttu-id="307f8-140">Идентификатор ресурса или `AppID URI`: `https://graph.windows.net/`</span><span class="sxs-lookup"><span data-stu-id="307f8-140">Resource Identifier, or `AppID URI`: `https://graph.windows.net/`</span></span>
* <span data-ttu-id="307f8-141">Области или `OAuth2Permissions`: `Directory.Read`, `Directory.Write` и т. п.</span><span class="sxs-lookup"><span data-stu-id="307f8-141">Scopes, or `OAuth2Permissions`: `Directory.Read`, `Directory.Write`, etc.</span></span>  

<span data-ttu-id="307f8-142">Все это справедливо и для конечной точки v2.0 hello hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-142">All of this holds true for hello hello v2.0 endpoint.</span></span>  <span data-ttu-id="307f8-143">Приложение по-прежнему может вести себя как ресурс, определять области и идентифицироваться по URI.</span><span class="sxs-lookup"><span data-stu-id="307f8-143">An app can still behave as resource, define scopes, and be identified by a URI.</span></span>  <span data-ttu-id="307f8-144">Клиентские приложения по-прежнему можно запросить toothose области доступа.</span><span class="sxs-lookup"><span data-stu-id="307f8-144">Client apps can still request access toothose scopes.</span></span>  <span data-ttu-id="307f8-145">Тем не менее был изменен способом hello, в котором клиент запрашивает эти разрешения.</span><span class="sxs-lookup"><span data-stu-id="307f8-145">However, hello way in which a client requests those permissions has changed.</span></span>  <span data-ttu-id="307f8-146">В прошлом hello OAuth 2.0 авторизация tooAzure запрос, который может выглядела AD.</span><span class="sxs-lookup"><span data-stu-id="307f8-146">In hello past, an OAuth 2.0 authorize request tooAzure AD might have looked like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&resource=https%3A%2F%2Fgraph.windows.net%2F
...
```

<span data-ttu-id="307f8-147">Здравствуйте, где **ресурсов** параметр указывает, какой ресурс hello клиентское приложение запрашивает авторизацию для.</span><span class="sxs-lookup"><span data-stu-id="307f8-147">where hello **resource** parameter indicated which resource hello client app is requesting authorization for.</span></span>  <span data-ttu-id="307f8-148">Azure AD, рассчитанное hello разрешениях, необходимых для приложения hello на основании статической конфигурации в hello портал Azure и соответствующим образом выданных маркеров.</span><span class="sxs-lookup"><span data-stu-id="307f8-148">Azure AD computed hello permissions required by hello app based on static configuration in hello Azure Portal, and issued tokens accordingly.</span></span>  <span data-ttu-id="307f8-149">Теперь hello же OAuth 2.0 авторизовать запрос выглядит:</span><span class="sxs-lookup"><span data-stu-id="307f8-149">Now, hello same OAuth 2.0 authorize request looks like:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read%20https%3A%2F%2Fgraph.windows.net%2Fdirectory.write
...
```

<span data-ttu-id="307f8-150">Здравствуйте, где **область** параметр указывает, какой ресурс и разрешения приложения hello запрашивает авторизацию.</span><span class="sxs-lookup"><span data-stu-id="307f8-150">where hello **scope** parameter indicates which resource and permissions hello app is requesting authorization for.</span></span> <span data-ttu-id="307f8-151">Hello требуемого ресурса по-прежнему очень наличие в запросе hello — просто указан в каждом hello значений параметра области hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-151">hello desired resource is still very present in hello request - it is simply encompassed in each of hello values of hello scope parameter.</span></span>  <span data-ttu-id="307f8-152">С помощью параметра области hello таким способом позволяет hello v2.0 конечной точки toobe более совместимый со спецификацией hello OAuth 2.0, а более точно с распространенные приемы отрасли.</span><span class="sxs-lookup"><span data-stu-id="307f8-152">Using hello scope parameter in this manner allows hello v2.0 endpoint toobe more compliant with hello OAuth 2.0 specification, and aligns more closely with common industry practices.</span></span>  <span data-ttu-id="307f8-153">Она также позволяет приложениям tooperform [добавочное согласия](#incremental-and-dynamic-consent), который описан в следующем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-153">It also enables apps tooperform [incremental consent](#incremental-and-dynamic-consent), which is described in hello next section.</span></span>

## <a name="incremental-and-dynamic-consent"></a><span data-ttu-id="307f8-154">Добавочное и динамическое согласие</span><span class="sxs-lookup"><span data-stu-id="307f8-154">Incremental and dynamic consent</span></span>
<span data-ttu-id="307f8-155">Приложения зарегистрирована в Azure AD ранее необходимости toospecify необходимые разрешения OAuth 2.0 в hello портала Azure во время создания приложения:</span><span class="sxs-lookup"><span data-stu-id="307f8-155">Apps registered in Azure AD previously needed toospecify their required OAuth 2.0 permissions in hello Azure Portal, at app creation time:</span></span>

![Пользовательский интерфейс регистрации разрешений](../../media/active-directory-v2-flows/app_reg_permissions.PNG)

<span data-ttu-id="307f8-157">необходимые приложения были настроены разрешения Hello **статически**.</span><span class="sxs-lookup"><span data-stu-id="307f8-157">hello permissions an app required were configured **statically**.</span></span>  <span data-ttu-id="307f8-158">Хотя это допускается настройка tooexist приложения hello в hello портала Azure и сохранять hello кода, работы с низким приоритетом и простой, он возвращает несколько проблем для разработчиков:</span><span class="sxs-lookup"><span data-stu-id="307f8-158">While this allowed configuration of hello app tooexist in hello Azure Portal and kept hello code nice and simple, it presents a few issues for developers:</span></span>

* <span data-ttu-id="307f8-159">Приложение было tooknow все разрешения hello, когда-либо потребуется во время создания приложения.</span><span class="sxs-lookup"><span data-stu-id="307f8-159">An app had tooknow all of hello permissions it would ever need at app creation time.</span></span>  <span data-ttu-id="307f8-160">Добавить разрешения в дальнейшем было не так просто.</span><span class="sxs-lookup"><span data-stu-id="307f8-160">Adding permissions over time was a difficult process.</span></span>
* <span data-ttu-id="307f8-161">Приложение было tooknow все ресурсы hello, никогда не будет доступа к заранее.</span><span class="sxs-lookup"><span data-stu-id="307f8-161">An app had tooknow all of hello resources it would ever access ahead of time.</span></span>  <span data-ttu-id="307f8-162">Было трудно toocreate приложений, которые может получить доступ к произвольное количество ресурсов.</span><span class="sxs-lookup"><span data-stu-id="307f8-162">It was difficult toocreate apps that could access an arbitrary number of resources.</span></span>
* <span data-ttu-id="307f8-163">Приложение было toorequest все hello разрешения, которые когда-либо потребуется после hello пользователя первый вход в систему.</span><span class="sxs-lookup"><span data-stu-id="307f8-163">An app had toorequest all hello permissions it would ever need upon hello user's first sign-in.</span></span>  <span data-ttu-id="307f8-164">В некоторых случаях это привело tooa очень длинный список разрешений, которые конечные пользователи из утверждение приложение hello доступ на начальной вход, не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="307f8-164">In some cases this led tooa very long list of permissions, which discouraged end-users from approving hello app's access on initial sign-in.</span></span>

<span data-ttu-id="307f8-165">С конечной точкой v2.0 hello, вы можете указать разрешения hello потребностей приложения **динамически**, во время выполнения во время регулярного использования приложения.</span><span class="sxs-lookup"><span data-stu-id="307f8-165">With hello v2.0 endpoint, you can specify hello permissions your app needs **dynamically**, at runtime, during regular usage of your app.</span></span>  <span data-ttu-id="307f8-166">toodo таким образом, можно указать hello областей потребностям приложения в любой момент времени, включая их в hello `scope` параметр запроса авторизации:</span><span class="sxs-lookup"><span data-stu-id="307f8-166">toodo so, you can specify hello scopes your app needs at any given point in time by including them in hello `scope` parameter of an authorization request:</span></span>

```
GET https://login.microsoftonline.com/common/oauth2/v2.0/authorize?
client_id=2d4d11a2-f814-46a7-890a-274a72a7309e
&scope=https%3A%2F%2Fgraph.windows.net%2Fdirectory.read%20https%3A%2F%2Fgraph.windows.net%2Fdirectory.write
...
```

<span data-ttu-id="307f8-167">Hello выше запрашивает разрешение для tooread приложения hello пользователя Azure AD данных каталога, а также каталог tootheir записи данных.</span><span class="sxs-lookup"><span data-stu-id="307f8-167">hello above requests permission for hello app tooread an Azure AD user's directory data, as well as write data tootheir directory.</span></span>  <span data-ttu-id="307f8-168">Если hello пользователь согласился toothose разрешений в прошлом hello для конкретного приложения, они просто будут вводить свои учетные данные и войти в приложение hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-168">If hello user has consented toothose permissions in hello past for this particular app, they will simply enter their credentials and be signed into hello app.</span></span>  <span data-ttu-id="307f8-169">Если пользователь hello не согласился tooany эти разрешения, конечная точка v2.0 hello запросит пользователя hello согласия toothose разрешения.</span><span class="sxs-lookup"><span data-stu-id="307f8-169">If hello user has not consented tooany of these permissions, hello v2.0 endpoint will ask hello user for consent toothose permissions.</span></span>  <span data-ttu-id="307f8-170">Дополнительные toolearn, можно получить на [разрешений, согласия и областей](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="307f8-170">toolearn more, you can read up on [permissions, consent, and scopes](active-directory-v2-scopes.md).</span></span>

<span data-ttu-id="307f8-171">Позволяет приложению разрешения toorequest динамически посредством hello `scope` параметр дает полный контроль над вашей пользователем.</span><span class="sxs-lookup"><span data-stu-id="307f8-171">Allowing an app toorequest permissions dynamically via hello `scope` parameter gives you full control over your user's experience.</span></span>  <span data-ttu-id="307f8-172">При желании вы можете toofrontload вашего согласия возникать и запросить все разрешения в одном запросе начальной авторизации.</span><span class="sxs-lookup"><span data-stu-id="307f8-172">If you wish, you can choose toofrontload your consent experience and ask for all permissions in one initial authorization request.</span></span>  <span data-ttu-id="307f8-173">Или, если вашему приложению требуется большое количество разрешений, можно выбрать toogather эти разрешения пользователя hello постепенно, как они пытаются toouse некоторые возможности приложения со временем.</span><span class="sxs-lookup"><span data-stu-id="307f8-173">Or if your app requires a large number of permissions, you can choose toogather those permissions from hello user incrementally, as they attempt toouse certain features of your app over time.</span></span>

## <a name="well-known-scopes"></a><span data-ttu-id="307f8-174">Хорошо известные области</span><span class="sxs-lookup"><span data-stu-id="307f8-174">Well-known scopes</span></span>
#### <a name="offline-access"></a><span data-ttu-id="307f8-175">Автономный доступ</span><span class="sxs-lookup"><span data-stu-id="307f8-175">Offline access</span></span>
<span data-ttu-id="307f8-176">Приложения с помощью конечной точки v2.0 hello могут требовать hello использования нового хорошо известного разрешения для приложений - hello `offline_access` области.</span><span class="sxs-lookup"><span data-stu-id="307f8-176">Apps using hello v2.0 endpoint may require hello use of a new well-known permission for apps - hello `offline_access` scope.</span></span>  <span data-ttu-id="307f8-177">Все приложения потребуется toorequest это разрешение в случае необходимости tooaccess ресурсов на hello имени пользователя в течение длительного времени, даже если hello пользователя может активно не используется приложение hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-177">All apps will need toorequest this permission if they need tooaccess resources on hello behalf of a user for a prolonged period of time, even when hello user may not be actively using hello app.</span></span>  <span data-ttu-id="307f8-178">Hello `offline_access` область будет отображаться пользователю toohello согласию диалоговые окна как «Доступ к данным вне сети», какие hello пользователь должен принять.</span><span class="sxs-lookup"><span data-stu-id="307f8-178">hello `offline_access` scope will appear toohello user in consent dialogs as "Access your data offline", which hello user must agree to.</span></span>  <span data-ttu-id="307f8-179">Запрашивающий hello `offline_access` разрешение позволит вашей tooreceive приложения web refresh_tokens OAuth 2.0 от конечной точки v2.0 hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-179">Requesting hello `offline_access` permission will enable your web app tooreceive OAuth 2.0 refresh_tokens from hello v2.0 endpoint.</span></span>  <span data-ttu-id="307f8-180">У маркеров обновления длительный срок действия, и их можно заменить на новые маркеры доступа OAuth 2.0 на значительные периоды доступа.</span><span class="sxs-lookup"><span data-stu-id="307f8-180">Refresh_tokens are long-lived, and can be exchanged for new OAuth 2.0 access_tokens for extended periods of access.</span></span>  

<span data-ttu-id="307f8-181">Если приложение не запрашивает hello `offline_access` области, он не будет получать refresh_tokens.</span><span class="sxs-lookup"><span data-stu-id="307f8-181">If your app does not request hello `offline_access` scope, it will not receive refresh_tokens.</span></span>  <span data-ttu-id="307f8-182">Это означает, что когда вы активируете значение authorization_code потока кода авторизации OAuth 2.0 hello, вы будете получать обратно access_token из hello `/token` конечной точки.</span><span class="sxs-lookup"><span data-stu-id="307f8-182">This means that when you redeem an authorization_code in hello OAuth 2.0 authorization code flow, you will only receive back an access_token from hello `/token` endpoint.</span></span>  <span data-ttu-id="307f8-183">Маркер доступа будет действительным короткое время (обычно один час), но в конечном итоге срок его действия истечет.</span><span class="sxs-lookup"><span data-stu-id="307f8-183">That access_token will remain valid for a short period of time (typically one hour), but will eventually expire.</span></span>  <span data-ttu-id="307f8-184">На момент времени, вашему приложению потребуется tooredirect hello пользователя задней toohello `/authorize` конечная точка tooretrieve новое значение authorization_code.</span><span class="sxs-lookup"><span data-stu-id="307f8-184">At that point in time, your app will need tooredirect hello user back toohello `/authorize` endpoint tooretrieve a new authorization_code.</span></span>  <span data-ttu-id="307f8-185">Во время этого перенаправления hello пользователь может или могут не tooenter свои учетные данные требуются еще раз или повторно согласия toopermissions, в зависимости от типа приложения hello hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-185">During this redirect, hello user may or may not need tooenter their credentials again or re-consent toopermissions, depending on hello hello type of app.</span></span>

<span data-ttu-id="307f8-186">Дополнительные сведения об OAuth 2.0, refresh_tokens и access_tokens, извлечение hello toolearn [v2.0 протокола ссылка](active-directory-v2-protocols.md).</span><span class="sxs-lookup"><span data-stu-id="307f8-186">toolearn more about OAuth 2.0, refresh_tokens, and access_tokens, check out hello [v2.0 protocol reference](active-directory-v2-protocols.md).</span></span>

#### <a name="openid-profile-and-email"></a><span data-ttu-id="307f8-187">OpenID, профиль и электронная почта</span><span class="sxs-lookup"><span data-stu-id="307f8-187">OpenID, profile and email</span></span>
<span data-ttu-id="307f8-188">Исторически hello основным OpenID Connect входа потока в Azure Active Directory предоставляет множество сведений о пользователе hello в id_token полученный hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-188">Historically, hello most basic OpenID Connect sign-in flow with Azure Active Directory would provide a wealth of information about hello user in hello resulting id_token.</span></span>  <span data-ttu-id="307f8-189">правила Hello в id_token могут включать hello пользователя имя, предпочтительным имя пользователя, адрес электронной почты, идентификатор объекта и многое другое.</span><span class="sxs-lookup"><span data-stu-id="307f8-189">hello claims in an id_token can include hello user's name, preferred username, email address, object ID, and more.</span></span>

<span data-ttu-id="307f8-190">Приносим теперь ограничение hello, hello `openid` область позволяет вашему приложению доступ к.</span><span class="sxs-lookup"><span data-stu-id="307f8-190">We are now restricting hello information that hello `openid` scope affords your app access to.</span></span>  <span data-ttu-id="307f8-191">область «openid» Hello только разрешить пользователей приложения toosign hello в и получать идентификатор конкретного приложения для пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-191">hello ‘openid’ scope will only allow your app toosign hello user in, and receive an app-specific identifier for hello user.</span></span>  <span data-ttu-id="307f8-192">Если требуется tooobtain персональные данные (PII) о пользователе hello в приложении, вашему приложению потребуется toorequest дополнительные разрешения у пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-192">If you want tooobtain personally identifiable information (PII) about hello user in your app, your app will need toorequest additional permissions from hello user.</span></span>  <span data-ttu-id="307f8-193">Мы представляем две новые области — hello `email` и `profile` областей — позволяющих toodo таким образом.</span><span class="sxs-lookup"><span data-stu-id="307f8-193">We are introducing two new scopes – hello `email` and `profile` scopes – which allow you toodo so.</span></span>

<span data-ttu-id="307f8-194">Hello `email` область очень проста – он позволяет вашего приложения доступа toohello основной адрес электронной почты пользователя через hello `email` утверждения в hello id_token.</span><span class="sxs-lookup"><span data-stu-id="307f8-194">hello `email` scope is very straightforward – it allows your app access toohello user’s primary email address via hello `email` claim in hello id_token.</span></span>  <span data-ttu-id="307f8-195">Hello `profile` область предоставляет доступ вашего приложения tooall другие основные сведения о hello пользователей и их имя, предпочтительным username, идентификатор объекта и т. д.</span><span class="sxs-lookup"><span data-stu-id="307f8-195">hello `profile` scope affords your app access tooall other basic information about hello user – their name, preferred username, object ID, and so on.</span></span>

<span data-ttu-id="307f8-196">Это позволяет toocode приложения в режиме минимальной раскрытие — можно только запросить пользователя hello hello набор сведений, что приложение требуется toodo свою работу.</span><span class="sxs-lookup"><span data-stu-id="307f8-196">This allows you toocode your app in a minimal-disclosure fashion – you can only ask hello user for hello set of information that your app requires toodo its job.</span></span>  <span data-ttu-id="307f8-197">Дополнительные сведения об этих областей, см. в разделе слишком[hello ссылку область v2.0](active-directory-v2-scopes.md).</span><span class="sxs-lookup"><span data-stu-id="307f8-197">For more information on these scopes, refer too[hello v2.0 scope reference](active-directory-v2-scopes.md).</span></span>

## <a name="token-claims"></a><span data-ttu-id="307f8-198">Утверждения маркера</span><span class="sxs-lookup"><span data-stu-id="307f8-198">Token Claims</span></span>
<span data-ttu-id="307f8-199">Hello утверждений в токены, выданные конечной точки v2.0 hello не будет идентичные tootokens выданный hello Azure AD, обычно доступные конечные точки — перенос toohello новые службы приложений не следует считать, что определенный утверждения будет существовать в id_tokens или access_tokens.</span><span class="sxs-lookup"><span data-stu-id="307f8-199">hello claims in tokens issued by hello v2.0 endpoint will not be identical tootokens issued by hello generally available Azure AD endpoints - apps migrating toohello new service should not assume a particular claim will exist in id_tokens or access_tokens.</span></span> <span data-ttu-id="307f8-200">toolearn о hello конкретных утверждений в токены v2.0 разделе hello [ссылку на маркер v2.0](active-directory-v2-tokens.md).</span><span class="sxs-lookup"><span data-stu-id="307f8-200">toolearn about hello specific claims emitted in v2.0 tokens, see hello [v2.0 token reference](active-directory-v2-tokens.md).</span></span>

## <a name="limitations"></a><span data-ttu-id="307f8-201">Ограничения</span><span class="sxs-lookup"><span data-stu-id="307f8-201">Limitations</span></span>
<span data-ttu-id="307f8-202">Существует несколько ограничений toobe учитывать при использовании точки v2.0 hello.</span><span class="sxs-lookup"><span data-stu-id="307f8-202">There are a few restrictions toobe aware of when using hello v2.0 point.</span></span>  <span data-ttu-id="307f8-203">См. toohello [doc ограничения v2.0](active-directory-v2-limitations.md) toosee, если применим один из этих ограничений tooyour определенного сценария.</span><span class="sxs-lookup"><span data-stu-id="307f8-203">Please refer toohello [v2.0 limitations doc](active-directory-v2-limitations.md) toosee if any of these restrictions apply tooyour particular scenario.</span></span>
