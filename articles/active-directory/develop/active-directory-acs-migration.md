---
title: "Миграция из службы контроля доступа Azure | Документы Microsoft"
description: "Параметры перемещения приложениям и службам из службы контроля доступа Azure"
services: active-directory
documentationcenter: dev-center-name
author: dstrockis
manager: mtillman
editor: 
ms.assetid: 820acdb7-d316-4c3b-8de9-79df48ba3b06
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 11/14/2017
ms.author: dastrock
ms.openlocfilehash: f3de9016fe29a51ab2c7fb9e93fcd33af0f0e871
ms.sourcegitcommit: fa28ca091317eba4e55cef17766e72475bdd4c96
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2017
---
# <a name="migrate-from-the-azure-access-control-service"></a>Миграция из службы контроля доступа Azure

Контроль доступа Azure, служба Azure Active Directory (Azure AD), будут удалены в ноябре 2018. Приложений и служб, использующих контроль доступа должен быть целиком перенесены в другой механизм проверки подлинности, затем. В этой статье описываются рекомендации по текущих заказчиков, как планируется устаревание использовании управления доступом. Если в настоящее время вы не используете контроля доступа, не нужно предпринимать никаких действий.


## <a name="overview"></a>Обзор

Управление доступом — облачной службы проверки подлинности, который предлагает простой способ проверки подлинности и авторизации пользователей для доступа к веб-приложениям и службам. Она позволяет многие функции проверки подлинности и авторизации вынесены за пределы используемого кода. Управление доступом в основном используется разработчикам и архитекторам клиентов Microsoft .NET, веб-приложений ASP.NET и веб-служб Windows Communication Foundation (WCF).

Варианты использования для управления доступом можно разделить на три основные категории:

- Проверки подлинности для определенных облачных служб Майкрософт, включая Azure Service Bus и Dynamics CRM. Клиентским приложениям получить токены от контроля доступа для проверки подлинности для этих служб для выполнения различных действий.
- Добавление проверки подлинности для веб-приложений, как пользовательские, так и предварительно пакетированных (например, SharePoint). С помощью контроля доступа «пассивный» проверки подлинности, веб-приложений может поддерживать вход с учетной записью Майкрософт (ранее Live ID) и с учетными записями из Google, Facebook, Yahoo, Azure AD и службы федерации Active Directory (AD FS).
- Защита пользовательских веб-служб с маркеры, выпущенные службой управления доступом. С использованием проверки подлинности «active», веб-службы гарантирует, что разрешают доступ только к известным клиентам, которые прошли проверку подлинности с использованием управления доступом.

Каждый из них варианты использования и их рекомендуется миграции, которые обсуждаются стратегии в следующих разделах. 

> [!WARNING]
> В большинстве случаев значительное изменение кода необходимы для переноса существующих приложений и служб на новые технологии. Рекомендуется немедленно начать планировать и выполнять миграцию, чтобы избежать потенциальных сбоев или простоев.

Управление доступом состоит из следующих компонентов:

- Службы маркеров безопасности (STS), которая получает запросы на проверку подлинности и выдает токены безопасности в ответ.
- Классический портал Azure, где можно создавать, удалять и включить и отключить пространствам имен Access Control.
- Отдельный управления доступом управления портал, где настройки и настройте пространствам имен Access Control.
- Служба управления, который можно использовать для автоматизации функций порталы.
- Обработчик правил преобразования маркеров, который можно использовать для определения сложной логики для обработки выходного формата токенов, издаваемых контроля доступа.

Чтобы использовать эти компоненты, необходимо создать один или несколько пространств имен управления доступом. Объект *имен* соответствует отдельный экземпляр средства управления доступом, приложения и службы обмена данными с. Пространство имен изолирован от всех других клиентов управления доступом. Другие клиенты контроля доступа использовать собственные пространства имен. Пространство имен в управления доступом имеет выделенный URL-адрес выглядит следующим образом:

```HTTP
https://<mynamespace>.accesscontrol.windows.net
```

Весь обмен данными с STS и операций управления, выполняемые в этот URL-адрес. Для разных целей используются различные пути. Чтобы определить, использовать ли приложения или службы управления доступом, отслеживания для любого трафика на https://\<пространства имен\>. accesscontrol.windows.net. Любой трафик, этот URL-адрес обрабатывается с помощью управления доступом и должна быть прекращена. 

Исключением является весь трафик, https://accounts.accesscontrol.windows.net. Трафик этот URL-адрес уже обработан другой службой и не зависит от контроля доступа об устаревании. 

Вы должны также вход на классический портал Azure и проверить наличие любого пространства имен контроля доступа в подписках, которыми вы владеете. Пространства имен Access Control отображаются на **пространства имен Access Control** в разделе **Active Directory** службы.

Дополнительные сведения о контроле доступа см. в разделе [Access Control Service 2.0 (архивная)](https://msdn.microsoft.com/library/hh147631.aspx).

## <a name="retirement-schedule"></a>Расписание вывода из эксплуатации

Начиная с ноября 2017 г. все компоненты управления доступом работоспособность и полностью поддерживается. Единственным ограничением является то, что вы [не удается создать новые пространства имен контроля доступа через портал Azure классические](https://azure.microsoft.com/blog/acs-access-control-service-namespace-creation-restriction/).

Вот расписание неподдерживаемые компоненты управления доступом.

- **Ноябрь 2017 г**: администратор Azure AD вы можете работать в классическом портале Azure [Выбывает](https://blogs.technet.microsoft.com/enterprisemobility/2017/09/18/marching-into-the-future-of-the-azure-ad-admin-experience-retiring-the-azure-classic-portal/). На этом этапе доступен на URL-адрес нового, выделенного пространства имен управления для управления доступом: http://manage.windowsazure.com?restoreClassic=true. Используйте этот URL-адрес для просмотра существующих пространств имен, включения и отключения пространства имен и пространств имен, удалить, если вы решили.
- **Апрель 2018**: пространство имен управления доступом больше не доступен по URL-АДРЕСУ http://manage.windowsazure.com?restoreClassic=true выделенного. На этом этапе невозможно отключить или включить, удаление или перечисление пространств имен управления доступом. Однако портал управления Access Control будет полностью функциональной, расположенный в папке https://\<пространства имен\>. accesscontrol.windows.net. Другие компоненты управления доступом по-прежнему работать в обычном режиме.
- **Ноябрь 2018**: все управление доступом компоненты окончательно выключить. Сюда входят на портал управления Access Control, службу управления, STS и обработчик правил преобразования маркеров. На этом этапе все запросы, адресованные контроля доступа (расположенный в \<пространства имен\>. accesscontrol.windows.net) ошибкой. Следует переноса все существующие приложения и службы в другие технологии хорошо до указанного времени.


## <a name="migration-strategies"></a>Стратегии миграции

В следующих разделах описаны общие рекомендации по миграции от управления доступом к другим технологиям Майкрософт.

### <a name="clients-of-microsoft-cloud-services"></a>Клиенты облачных служб Майкрософт

Каждая облачная служба Microsoft, принимает маркеры, выпущенные службой управления доступом теперь поддерживает по крайней мере один альтернативный способ проверки подлинности. Механизм проверку подлинности пользователя меняется для каждой службы. Мы рекомендуем обратиться к документации, определенного для каждой службы, официальные рекомендации. Для удобства ниже приведен каждый набор документации.

| Service | Руководство |
| ------- | -------- |
| Azure Service Bus | [Перенос в подписанных URL-адресов](https://docs.microsoft.com/azure/service-bus-messaging/service-bus-migrate-acs-sas) |
| Ретрансляция служебной шины Azure | [Перенос в подписанных URL-адресов](https://docs.microsoft.com/azure/service-bus-relay/relay-migrate-acs-sas) |
| Кэша Azure | [Переход на кэш Redis для Azure](https://docs.microsoft.com/azure/redis-cache/cache-faq#which-azure-cache-offering-is-right-for-me) |
| Azure DataMarket | [Переход на API-интерфейсы Cognitive Services](https://docs.microsoft.com/azure/machine-learning/studio/datamarket-deprecation) |
| Службы BizTalk | [Перенос в компонент приложения логики службы приложений Azure](https://docs.microsoft.com/azure/machine-learning/studio/datamarket-deprecation) |
| Службы мультимедиа Azure | [Azure Media Services announces support for Azure AD and deprecation of Access Control authentication](https://azure.microsoft.com/blog/azure-media-service-aad-auth-and-acs-deprecation/) (Команда разработчиков служб мультимедиа Azure анонсирует поддержку проверки подлинности AAD и объявление проверки подлинности ACS устаревшей) |
| Служба архивации Azure | [Обновите агент архивации Azure](https://docs.microsoft.com/azure/backup/backup-azure-file-folder-backup-faq) |

<!-- Dynamics CRM: Migrate to new SDK, Dynamics team handling privately -->
<!-- Azure RemoteApp deprecated in favor of Citrix: http://www.zdnet.com/article/microsoft-to-drop-azure-remoteapp-in-favor-of-citrix-remoting-technologies/ -->
<!-- Exchange push notifications are moving, customers don't need to move -->
<!-- Retail federation services are moving, customers don't need to move -->
<!-- Azure StorSimple: TODO -->
<!-- Azure SiteRecovery: TODO -->


### <a name="web-applications-that-use-passive-authentication"></a>Веб-приложений, использующих пассивной проверкой подлинности

Для веб-приложений, использующих управление доступом для проверки подлинности пользователей управление доступом предоставляет следующие функции и возможности для приложения веб-разработчиков и архитекторов:

- Тесная интеграция с Windows Identity Foundation (WIF).
- Федерации с Google, Facebook, Yahoo, Azure Active Directory и AD FS учетные записи и учетные записи Майкрософт.
- Поддержка для следующих протоколов проверки подлинности: OAuth 2.0 черновик 13, WS-Trust и веб-служб федерации (WS-Federation).
- Поддержка маркеров следующие форматы: JSON Web Token (JWT), SAML 1.1, SAML 2.0 и Simple Web Token (SWT).
- Функции обнаружения домашней области, интегрированы в WIF, позволяет пользователям выбрать тип учетной записи, которые они используют для входа. Этот интерфейс размещается веб-приложением и полностью настраивается.
- Токен преобразование, которое позволяет настройки утверждений, полученных веб-приложения управления доступом, включая:
    - Пропуск утверждений от поставщиков удостоверений.
    - Добавление дополнительных пользовательских утверждений.
    - Простая логика if-then для выдачи утверждений при определенных условиях.

К сожалению не существует одна служба, обеспечивающая все эти возможности эквивалент. Следует оценить возможности управления доступом, которые требуется, а затем выберите между использованием [Azure Active Directory](https://azure.microsoft.com/develop/identity/signin/), [Azure Active Directory B2C](https://azure.microsoft.com/services/active-directory-b2c/) (Azure AD B2C), или другой облачной проверки подлинности Служба.

#### <a name="migrate-to-azure-active-directory"></a>Перенос в Azure Active Directory

Путь, рассмотрите возможность интеграция приложения и службы непосредственно в Azure AD. Azure AD — это поставщик удостоверений на основе облака Майкрософт рабочая или учебная учетные записи. Azure AD — это поставщик удостоверений для Office 365, Azure и многое другое. Он предоставляет аналогичные федеративной возможности проверки подлинности для управления доступом, но не поддерживает все возможности управления доступом. 

Основной пример — федерация с поставщиками удостоверений социальных сетей, таких как Facebook, Google и Yahoo. Если пользователям вход эти типы учетных данных, Azure AD не является решением для вас. 

Azure AD также не поддерживает обязательно точное же протоколы проверки подлинности, контроля доступа. Например несмотря на то, что управление доступом и Azure AD поддерживает OAuth, существуют небольшие различия между каждой реализации. Различные реализации необходимо изменить код в ходе миграции.

Однако Azure AD предоставляют несколько потенциальных преимуществ для контроля доступа клиентов. Он изначально поддерживает Microsoft работы или учебы учетных записей, размещенных в облаке, которые часто используются клиентами для управления доступом. 

Клиент Azure AD также может быть объединена в один или несколько экземпляров из локальной Active Directory через службы AD FS. Таким образом, приложения могут проходить проверку подлинности пользователей на основе облака, и пользователи, являющиеся размещается локально. Оно также поддерживает протокол WS-Federation, что делает его сравнительно легко интегрировать веб-приложения с помощью WIF.

В следующей таблице сравниваются возможности управления доступом, которые относятся к веб-приложений с помощью этих функций, доступных в Azure AD. 

На высоком уровне *Azure Active Directory, возможно, является наилучшим вариантом для переноса, если разрешить регистрацию пользователей в только в своих Microsoft работать или школьные учетные записи*.

| Функция | Поддержка управления доступом | Поддержка Azure AD |
| ---------- | ----------- | ---------------- |
| **Типы учетных записей** | | |
| Microsoft рабочая или учебная учетные записи | Поддерживаются | Поддерживаются |
| Учетные записи из Active Directory и AD FS в Windows Server |-Поддерживается через федерацию с клиента Azure AD <br />-Поддерживается посредством прямого федерации с AD FS | Поддерживаются только через федерацию с клиентом Azure AD | 
| Учетные записи других корпоративных систем управления удостоверениями |-Возможные через федерацию с клиента Azure AD <br />-Поддерживается посредством прямого федерации | Возможно через федерацию с клиентом Azure AD |
| Учетные записи Майкрософт для личного пользования | Поддерживаются | Поддерживается с помощью Azure AD v2.0 протокола OAuth, а не через другие протоколы | 
| Учетные записи Facebook, Google, Yahoo | Поддерживаются | Не поддерживается никакой |
| **Протоколы и совместимость с пакетом SDK** | | |
| WIF | Поддерживаются | Поддерживаемые, но ограниченный инструкции доступны |
| Сертификат | Поддерживаются | Поддерживаются |
| OAuth 2.0 | Поддерживается черновая версия 13 | Поддержка RFC 6749, большинство современных спецификации |
| WS-Trust | Поддерживаются | Не поддерживается |
| **Форматы маркеров** | | |
| JWT | Поддерживается в бета-версии | Поддерживаются |
| SAML 1.1 | Поддерживаются | Предварительный просмотр |
| SAML 2.0 | Поддерживаются | Поддерживаются |
| SWT | Поддерживаются | Не поддерживается |
| **Настройки** | | |
| Настраиваемые домашней области обнаружения и учетной записи комплектации пользовательского интерфейса | Загружаемый код, который можно включить в приложения | Не поддерживается |
| Отправка пользовательских сертификатов подписи токена | Поддерживаются | Поддерживаются |
| Настройка утверждений в маркерах |-Пропуск входящих утверждений от поставщиков удостоверений<br />— Получение маркера доступа из поставщика удостоверений в качестве утверждения<br />-Выдавать исходящие утверждения на основе значений входящих утверждений<br />-Выдавать исходящие утверждения с помощью константы |-Не удается пройти утверждений от поставщиков федеративных удостоверений<br />-Не удалось получить доступ маркер от поставщика удостоверений в качестве утверждения<br />-Не могут выдавать исходящие утверждения на основе значений входящих утверждений<br />-Может выдавать исходящие утверждения с значения констант<br />-Может выдавать исходящие утверждения на основе свойств пользователей, синхронизированные с Azure AD |
| **Автоматизация** | | |
| Автоматизация задач настройки и управления | Поддерживается посредством службы управления для управления доступом | Поддерживается через Microsoft Graph и Azure AD Graph API |

Если вы решите, что Azure AD является наилучшим образом переход для приложений и служб, следует учитывать два способа интеграции приложения с Azure AD.

Использование WS-Federation или WIF для интеграции с Azure AD, рекомендуется следующий подход с использованием описанной в [Настройка федеративного единого входа для приложения не коллекции](https://docs.microsoft.com/azure/active-directory/application-config-sso-how-to-configure-federated-sso-non-gallery). Статья относится к настройке Azure AD для на основе SAML единого входа, но также работает для настройки WS-Federation. Этот подход требует наличия лицензии Azure AD Premium. Такой подход имеет два преимущества:

- Вы получаете полную гибкость настройки маркера Azure AD. Вы можете настроить утверждения, выданные Azure AD, чтобы сопоставить утверждения, выданные службой управления доступом. Это особенно включает утверждение идентификатора или идентификатора имени пользователя. Чтобы продолжить получать целостное идентификаторы для пользователей после изменения технологий, убедиться, что идентификаторы пользователей выдан Azure AD, соответствуют выданные контроля доступа.
- Можно настроить сертификат для подписи маркера, относящиеся к приложению и с временем жизни, которым вы управляете.

<!--

Possible nameIdentifiers from Access Control (via AAD or AD FS):
- AD FS - Whatever AD FS is configured to send (email, UPN, employeeID, what have you)
- Default from AAD using App Registrations, or Custom Apps before ClaimsIssuance policy: subject/persistent ID
- Default from AAD using Custom apps nowadays: UPN
- Kusto can't tell us distribution, it's redacted

-->

> [!NOTE]
> Этот подход требует наличия лицензии Azure AD Premium. Если вы являетесь клиентом контроля доступа и требуется лицензия premium для настройки единого входа для приложения, свяжитесь с нами. Мы будем рады предоставить лицензии разработчика для использования.

Альтернативный подход — следовать [в этом примере кода](https://github.com/Azure-Samples/active-directory-dotnet-webapp-wsfederation), что дает различную инструкции по настройке WS-Federation. В этом примере кода используется не WIF, а ПО промежуточного слоя ASP.NET 4.5 OWIN. Инструкции по регистрации приложения являются допустимыми для приложений, использующих WIF, но не требуется лицензия Azure AD Premium. 

Если выбран этот подход, необходимо понимать [смене ключей подписывания в Azure AD](https://docs.microsoft.com/azure/active-directory/develop/active-directory-signing-key-rollover). В нем выдача маркеров осуществляется с помощью общего ключа подписывания Azure AD. По умолчанию WIF не обновляет ключи подписывания автоматически. Когда Azure AD сменяет свои общие ключи подписывания, WIF необходимо подготовить к принятию изменений.

Если вы можете интегрировать с Azure AD через протоколы OpenID Connect или OAuth, мы рекомендуем делать это. У нас есть подробную документацию и рекомендации о том, как интегрировать Azure AD в веб-приложения доступны в нашем [руководство разработчика Azure AD](http://aka.ms/aaddev).

<!-- TODO: If customers ask about authZ, let's put a blurb on role claims here -->

#### <a name="migrate-to-azure-active-directory-b2c"></a>Перенос в Azure Active Directory B2C

Еще один вариант переноса, который следует рассмотреть, — это Azure AD B2C. Azure AD B2C — это облачная служба проверки подлинности, которое, как управление доступом позволяет разработчикам исполнителю свою логику управления проверки подлинности и удостоверения в облачной службе. Она является платной службой (с уровни бесплатных и "премиум"), предназначенный для потребительском приложениями, которые имеют миллионы активные пользователи.

Например, контроля доступа одной из наиболее привлекательный функций Azure AD B2C является, он поддерживает множество различных типов учетных записей. С помощью Azure AD B2C можно вход пользователей, используя свою учетную запись Майкрософт или учетные записи Facebook, Google, LinkedIn, GitHub или Yahoo и многое другое. Специально для приложения Azure AD B2C также поддерживает «локальных учетных записей», или имя пользователя и пароли, создаваемые пользователями. Azure AD B2C также предоставляет широкие возможности расширения, можно использовать для настройки вашей вход потоков. 

Однако Azure AD B2C не поддерживает спектра протоколы проверки подлинности и маркер форматы, контроля доступа, клиенты могут потребоваться. Azure AD B2C нельзя использовать для получения маркеров и запросов Дополнительные сведения о пользователе от поставщика удостоверений, Microsoft или иным способом.

В следующей таблице сравниваются возможности управления доступом, которые относятся к веб-приложения с тех, которые доступны в Azure AD B2C. В целом *Azure AD B2C — это, скорее всего, правильный выбор для переноса, если приложение ориентировано на пользователей или поддерживает большое количество разных типов учетных записей*.

| Функция | Поддержка управления доступом | Поддержка Azure AD B2C |
| ---------- | ----------- | ---------------- |
| **Типы учетных записей** | | |
| Microsoft рабочая или учебная учетные записи | Поддерживаются | Поддерживаются через пользовательские политики  |
| Учетные записи из Active Directory и AD FS в Windows Server | Поддерживается посредством прямого федерации с AD FS | Поддерживается посредством SAML федерации с помощью пользовательских политик |
| Учетные записи других корпоративных систем управления удостоверениями | Поддерживается посредством прямого federation через WS-Federation | Поддерживается посредством SAML федерации с помощью пользовательских политик |
| Учетные записи Майкрософт для личного пользования | Поддерживаются | Поддерживаются | 
| Учетные записи Facebook, Google, Yahoo | Поддерживаются | Facebook и Google по умолчанию поддерживается Yahoo поддерживается через OpenID Connect федерации с помощью пользовательских политик |
| **Протоколы и совместимость с пакетом SDK** | | |
| Windows Identity Foundation | Поддерживаются | Не поддерживается |
| Сертификат | Поддерживаются | Не поддерживается |
| OAuth 2.0 | Поддерживается черновая версия 13 | Поддержка RFC 6749, большинство современных спецификации |
| WS-Trust | Поддерживаются | Не поддерживается |
| **Форматы маркеров** | | |
| JWT | Поддерживается в бета-версии | Поддерживаются |
| SAML 1.1 | Поддерживаются | Не поддерживается |
| SAML 2.0 | Поддерживаются | Не поддерживается |
| SWT | Поддерживаются | Не поддерживается |
| **Настройки** | | |
| Настраиваемые домашней области обнаружения и учетной записи комплектации пользовательского интерфейса | Загружаемый код, который можно включить в приложения | Полностью настраиваемый пользовательский Интерфейс через пользовательские CSS |
| Отправка пользовательских сертификатов подписи токена | Поддерживаются | Пользовательские ключи подписывания, сертификаты не поддерживается посредством пользовательских политик |
| Настройка утверждений в маркерах |-Пропуск входящих утверждений от поставщиков удостоверений<br />— Получение маркера доступа из поставщика удостоверений в качестве утверждения<br />-Выдавать исходящие утверждения на основе значений входящих утверждений<br />-Выдавать исходящие утверждения с помощью константы |-Могли пройти утверждений от поставщиков удостоверений; настраиваемые политики, необходимых для некоторых утверждений<br />-Не удалось получить доступ маркер от поставщика удостоверений в качестве утверждения<br />-Может выдавать исходящие утверждения на основе значений входящих утверждений через настраиваемые политики<br />-Можно выдавать исходящие утверждения с постоянные значения через пользовательские политики |
| **Автоматизация** | | |
| Автоматизация задач настройки и управления | Поддерживается посредством службы управления для управления доступом |-Создание пользователей через API Azure AD Graph<br />-Не удается создать клиентов, приложений или политик B2C программным способом |

Если решено использовать Azure AD B2C наилучший путь миграции для приложений и служб, начинаются со следующими ресурсами:

- [Документация по Azure AD B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview)
- [Azure AD B2C пользовательских политик](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom)
- [Цены на Azure AD B2C](https://azure.microsoft.com/pricing/details/active-directory-b2c/)


#### <a name="migrate-to-ping-identity-or-auth0"></a>Перенос удостоверения Ping или Auth0

В некоторых случаях может выясниться, что Azure AD и Azure AD B2C недостаточно для замены в веб-приложений управления доступом, без внесения изменений в код существенных. Некоторые типичные примеры могут включать:

- Веб-приложений, использующих WIF или WS-Federation для входа в систему с поставщиками удостоверений из социальных сетей, например Google или Facebook.
- Веб-приложения, выполняющие прямой федерации предприятия определения поставщика с помощью протокола WS-Federation.
- Веб-приложения, которым требуется маркер доступа, выданный поставщиком удостоверений из социальных сетей (например, Google или Facebook) как утверждений в токены, созданные службой управления доступом.
- Веб-приложения с правилами сложные преобразования маркеров, Azure AD или Azure AD B2C невозможно воспроизвести.
- Мультитенантных веб-приложений, использующих для централизованного управления федерации для многих разных поставщика удостоверений ACS

В таких случаях может потребоваться рассмотреть миграцию веб-приложении другую облачную службу проверки подлинности. Корпорация Майкрософт рекомендует изучение следующие параметры. Каждый из следующих параметров предоставляют возможности, аналогичные для управления доступом:



|     |     | 
| --- | --- |
| ![Auth0](./media/active-directory-acs-migration/rsz_auth0.png) | [Auth0](https://auth0.com/acs) — это гибкая облачная служба удостоверений, созданный [руководство по миграции для клиентов, управления доступом](https://auth0.com/acs)и поддерживает почти каждый компонент, выполняющий ACS. |
| ![Проверка связи](./media/active-directory-acs-migration/rsz_ping.png) | [Удостоверение ping](https://www.pingidentity.com) предлагает два решения аналогично ACS. PingOne — это облачная служба удостоверений, который поддерживает многие из тех же функций, как служба ACS, а PingFederate представляет собой аналогичный продукт удостоверений в локальной среде, которое обеспечивает большую гибкость. Ссылаться на [руководство вывода из эксплуатации ACS Ping за](https://www.pingidentity.com/company/blog/2017/11/20/migrating_from_microsoft_acs_to_ping_identity.html) Дополнительные сведения об использовании этих продуктов.  |

При работе со столбцами идентификаторов Ping и Auth0 нашей целью является убедитесь, что все клиенты, управление доступом пути миграции для своих приложений и служб, который сводит к минимуму объем работ, необходимый для перемещения от управления доступом.

<!--

## Sharepoint 2010, 2013, 2016

TODO: Azure AD only, use Azure AD SAML 1.1 tokens, when we bring it back online.
Other IDPs: use Auth0? https://auth0.com/docs/integrations/sharepoint.

-->

### <a name="web-services-that-use-active-authentication"></a>Веб-службы, использующие активной проверки подлинности

Для веб-служб, которые защищены с помощью маркеры, выпущенные службой управления доступом управление доступом предлагает следующие функции и возможности:

- Возможность регистрировать один или несколько *удостоверения службы* в пространстве имен Access Control. Удостоверения службы можно использовать для запроса маркеров.
- Поддержка OAuth WRAP и OAuth 2.0 черновик 13 протоколы для запроса маркеров, используя следующие типы учетных данных:
    - Простые пароли, который создается для удостоверения службы
    - Со знаком SWT с помощью симметричного ключа или X509 сертификата
    - Маркер SAML, выданного доверенного поставщика удостоверений (как правило, экземпляр AD FS)
- Поддержка маркеров следующие форматы: JWT, SAML 1.1, SAML 2.0 и SWT.
- Правила простого преобразования токенов.

Удостоверения службы в системе контроля доступа обычно используются для реализации проверки подлинности сервера на сервер.  

#### <a name="migrate-to-azure-active-directory"></a>Перенос в Azure Active Directory

Для этого типа поток проверки подлинности рекомендуется перейти на [Azure Active Directory](https://azure.microsoft.com/develop/identity/signin/). Azure AD — это поставщик удостоверений на основе облака Майкрософт рабочая или учебная учетные записи. Azure AD — это поставщик удостоверений для Office 365, Azure и многое другое. 

Можно также использовать Azure AD для проверки подлинности сервера на сервер с помощью Azure AD для предоставления учетных данных клиента OAuth. В следующей таблице сравниваются возможности управления доступом в проверке подлинности сервера на сервер с, доступные в Azure AD.

| Функция | Поддержка управления доступом | Поддержка Azure AD |
| ---------- | ----------- | ---------------- |
| Регистрация веб-службы | Создание проверяющей стороны на портале управления для управления доступом | Создание веб-приложения Azure AD на портале Azure |
| Регистрация клиента | Создайте удостоверение службы на портале управления для управления доступом | Создайте другое веб-приложение Azure AD на портале Azure |
| Используемый протокол |— Протокол OAuth WRAP<br />-Предоставления учетных данных клиента черновик 13 OAuth 2.0 | Предоставление учетных данных клиента OAuth 2.0 |
| Методы проверки подлинности клиента |-Простой пароль<br />-Знаком SWT<br />-SAML токена, полученного на поставщик федеративных удостоверений |-Простой пароль<br />-Знаком JWT |
| Форматы маркеров |-JWT<br />-SAML 1.1<br />-SAML 2.0<br />-SWT<br /> | Только JWT |
| Преобразование маркеров |-Добавьте настраиваемые утверждения<br />-Логика выдачи утверждения простой if-then | Добавление пользовательских утверждений | 
| Автоматизация задач настройки и управления | Поддерживается посредством службы управления для управления доступом | Поддерживается через Microsoft Graph и Azure AD Graph API |

Рекомендации по реализации сценариев сервера к серверу см. следующие ресурсы:

- Раздел Service to Service [руководство разработчика Azure AD](https://aka.ms/aaddev)
- [Образец кода управляющей программы с помощью учетных данных клиента простые пароли](https://github.com/Azure-Samples/active-directory-dotnet-daemon)
- [Образец кода управляющей программы с помощью учетных данных сертификата клиента](https://github.com/Azure-Samples/active-directory-dotnet-daemon-certificate-credential)

#### <a name="migrate-to-ping-identity-or-auth0"></a>Перенос удостоверения Ping или Auth0

В некоторых случаях может оказаться, что учетные данные клиента Azure AD и OAuth предоставить реализацию недостаточно для управления доступом в архитектуре без внесения изменений в код существенных замены. Некоторые типичные примеры могут включать:

- Проверка подлинности сервера на сервер с помощью токена форматах, отличных от JWT.
- С помощью внешнего поставщика удостоверений, предоставляемые входящий маркер проверки подлинности сервера на сервер.
- Проверка подлинности сервера на сервер с помощью правила преобразования токенов, которые невозможно воспроизвести Azure AD.

В таких случаях может потребоваться перенос веб-приложении другую облачную службу проверки подлинности. Корпорация Майкрософт рекомендует изучение следующие параметры. Каждый из следующих параметров предоставляют возможности, аналогичные для управления доступом:

|     |     | 
| --- | --- |
| ![Auth0](./media/active-directory-acs-migration/rsz_auth0.png) | [Auth0](https://auth0.com/acs) — это гибкая облачная служба удостоверений, созданный [руководство по миграции для клиентов, управления доступом](https://auth0.com/acs)и поддерживает почти каждый компонент, выполняющий ACS. |
| ![Проверка связи](./media/active-directory-acs-migration/rsz_ping.png) | [Удостоверение ping](https://www.pingidentity.com) предлагает два решения аналогично ACS. PingOne — это облачная служба удостоверений, который поддерживает многие из тех же функций, как служба ACS, а PingFederate представляет собой аналогичный продукт удостоверений в локальной среде, которое обеспечивает большую гибкость. Ссылаться на [руководство вывода из эксплуатации ACS Ping за](https://www.pingidentity.com/company/blog/2017/11/20/migrating_from_microsoft_acs_to_ping_identity.html) Дополнительные сведения об использовании этих продуктов.  |

При работе со столбцами идентификаторов Ping и Auth0 нашей целью является убедитесь, что все клиенты, управление доступом пути миграции для своих приложений и служб, который сводит к минимуму объем работ, необходимый для перемещения от управления доступом.

## <a name="questions-concerns-and-feedback"></a>Вопросы, вопросы и отзывы

Мы понимаем, что несколько клиентов управления доступом не найдет понятный способ перехода этой статьи. Может потребоваться некоторое помощника и руководство для определения продуманный план. Если вы хотите обсудить варианты миграции и вопросы, оставьте комментарий на этой странице.
