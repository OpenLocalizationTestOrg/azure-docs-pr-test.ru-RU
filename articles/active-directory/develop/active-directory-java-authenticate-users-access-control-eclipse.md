---
title: "Использование контроля доступа (Java) | Документация Майкрософт"
description: "Узнайте, как разрабатывать и применять контроль доступа с использованием Java в Azure."
services: active-directory
documentationcenter: java
author: rmcmurray
manager: erikre
editor: 
ms.assetid: 247dfd59-0221-4193-97ec-4f3ebe01d3c7
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: Java
ms.topic: article
ms.date: 04/25/2017
ms.author: robmcm
ms.custom: aaddev
ms.openlocfilehash: 698403d181e1fee09bb4692290c92203ded97ba4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-authenticate-web-users-with-azure-access-control-service-using-eclipse"></a><span data-ttu-id="2b91d-103">Проверка подлинности веб-пользователей с помощью службы контроля доступа Azure и Eclipse</span><span class="sxs-lookup"><span data-stu-id="2b91d-103">How to Authenticate Web Users with Azure Access Control Service Using Eclipse</span></span>
<span data-ttu-id="2b91d-104">В этом руководстве показано, как использовать службу Azure Access Control Service (ACS) в наборе средств Azure для Eclipse.</span><span class="sxs-lookup"><span data-stu-id="2b91d-104">This guide will show you how to use the Azure Access Control Service (ACS) within the Azure Toolkit for Eclipse.</span></span> <span data-ttu-id="2b91d-105">Дополнительные сведения об ACS см. в разделе [Дальнейшие действия](#next_steps).</span><span class="sxs-lookup"><span data-stu-id="2b91d-105">For more information on ACS, see the [Next steps](#next_steps) section.</span></span>

> [!NOTE]
> <span data-ttu-id="2b91d-106">Фильтр служб управления доступом Azure является CTP-версией.</span><span class="sxs-lookup"><span data-stu-id="2b91d-106">The Azure Access Services Control Filter is a community technology preview.</span></span> <span data-ttu-id="2b91d-107">Эта предварительная версия программного обеспечения не обеспечивается официальной поддержкой корпорации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="2b91d-107">As pre-release software, it is not formally supported by Microsoft.</span></span>
> 
> 

## <a name="what-is-acs"></a><span data-ttu-id="2b91d-108">Что такое ACS?</span><span class="sxs-lookup"><span data-stu-id="2b91d-108">What is ACS?</span></span>
<span data-ttu-id="2b91d-109">Большинство разработчиков не являются экспертами в области идентификации, и обычно не нужно тратить механизмы проверки подлинности и авторизации разработка времени для своих приложений и служб.</span><span class="sxs-lookup"><span data-stu-id="2b91d-109">Most developers are not identity experts and generally do not want to spend time developing authentication and authorization mechanisms for their applications and services.</span></span> <span data-ttu-id="2b91d-110">ACS — это служба Azure, предоставляющая простой способ проверки подлинности пользователей, которым требуется доступ к вашим веб-приложениям и службам без необходимости учитывать в коде сложную логику проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-110">ACS is an Azure service that provides an easy way of authenticating users who need to access your web applications and services without having to factor complex authentication logic into your code.</span></span>

<span data-ttu-id="2b91d-111">В ACS доступны следующие возможности:</span><span class="sxs-lookup"><span data-stu-id="2b91d-111">The following features are available in ACS:</span></span>

* <span data-ttu-id="2b91d-112">Интеграция с Windows Identity Foundation (WIF).</span><span class="sxs-lookup"><span data-stu-id="2b91d-112">Integration with Windows Identity Foundation (WIF).</span></span>
* <span data-ttu-id="2b91d-113">Поддержка популярных поставщиков удостоверений в Интернете, в том числе Windows Live ID, Google, Yahoo! и Facebook.</span><span class="sxs-lookup"><span data-stu-id="2b91d-113">Support for popular web identity providers (IPs) including Windows Live ID, Google, Yahoo!, and Facebook.</span></span>
* <span data-ttu-id="2b91d-114">Поддержка служб федерации Active Directory (AD FS) 2.0.</span><span class="sxs-lookup"><span data-stu-id="2b91d-114">Support for Active Directory Federation Services (AD FS) 2.0.</span></span>
* <span data-ttu-id="2b91d-115">Служба управления на основе Open Data Protocol (OData), предоставляющая программный доступ к параметрам ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-115">An Open Data Protocol (OData)-based management service that provides programmatic access to ACS settings.</span></span>
* <span data-ttu-id="2b91d-116">Портал управления, предоставляющий административный доступ к параметрам ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-116">A Management Portal that allows administrative access to the ACS settings.</span></span>

<span data-ttu-id="2b91d-117">Дополнительные сведения о службе ACS см. в разделе [Служба Access Control Service 2.0][Access Control Service 2.0].</span><span class="sxs-lookup"><span data-stu-id="2b91d-117">For more information about ACS, see [Access Control Service 2.0][Access Control Service 2.0].</span></span>

## <a name="concepts"></a><span data-ttu-id="2b91d-118">Основные понятия</span><span class="sxs-lookup"><span data-stu-id="2b91d-118">Concepts</span></span>
<span data-ttu-id="2b91d-119">Служба Azure ACS построена по принципу идентификации на основе утверждений и обеспечивает согласованный подход к созданию механизмов проверки подлинности для приложений, выполняющихся локально или в облаке.</span><span class="sxs-lookup"><span data-stu-id="2b91d-119">Azure ACS is built on the principals of claims-based identity - a consistent approach to creating authentication mechanisms for applications running on-premises or in the cloud.</span></span> <span data-ttu-id="2b91d-120">Удостоверение на основе утверждений предоставляет общий способ для приложений и служб для получения идентификатора информации о пользователях в своей организации, в других организациях и в Интернете.</span><span class="sxs-lookup"><span data-stu-id="2b91d-120">Claims-based identity provides a common way for applications and services to acquire the identity information they need about users inside their organization, in other organizations, and on the Internet.</span></span>

<span data-ttu-id="2b91d-121">Для выполнения задач в данном руководстве необходимо понимать следующие концепции.</span><span class="sxs-lookup"><span data-stu-id="2b91d-121">To complete the tasks in this guide, you should understand the following concepts:</span></span>

<span data-ttu-id="2b91d-122">**Клиент** — в контексте данного руководства это браузер, который пытается получить доступ к веб-приложению.</span><span class="sxs-lookup"><span data-stu-id="2b91d-122">**Client** - In the context of this how-to guide, this is a browser that is attempting to gain access to your web application.</span></span>

<span data-ttu-id="2b91d-123">**Приложение проверяющей стороны** — веб-сайт или служба, привлекающая внешний полномочный орган для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-123">**Relying party (RP) application** - An RP application is a website or service that outsources authentication to one external authority.</span></span> <span data-ttu-id="2b91d-124">Применительно к идентификации мы говорим, что проверяющая сторона доверяет этому органу.</span><span class="sxs-lookup"><span data-stu-id="2b91d-124">In identity jargon, we say that the RP trusts that authority.</span></span> <span data-ttu-id="2b91d-125">В этом руководстве объясняется, как настроить приложение на доверие ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-125">This guide explains how to configure your application to trust ACS.</span></span>

<span data-ttu-id="2b91d-126">**Маркер** — набор данных безопасности, который обычно выдается после успешной аутентификации пользователя.</span><span class="sxs-lookup"><span data-stu-id="2b91d-126">**Token** - A token is a collection of security data that is usually issued upon successful authentication of a user.</span></span> <span data-ttu-id="2b91d-127">Он содержит набор *утверждений*, атрибутов пользователя, прошедшего аутентификацию.</span><span class="sxs-lookup"><span data-stu-id="2b91d-127">It contains a set of *claims*, attributes of the authenticated user.</span></span> <span data-ttu-id="2b91d-128">Утверждение может представлять имя пользователя, идентификатор связанной с пользователем роли, возраст пользователя и т. д.</span><span class="sxs-lookup"><span data-stu-id="2b91d-128">A claim can represent a user's name, an identifier for a role a user belongs to, a user's age, and so on.</span></span> <span data-ttu-id="2b91d-129">Маркер обычно имеет цифровую подпись, то есть его источник всегда можно проследить и его содержимое нельзя подделать.</span><span class="sxs-lookup"><span data-stu-id="2b91d-129">A token is usually digitally signed, which means it can always be sourced back to its issuer, and its content cannot be tampered with.</span></span> <span data-ttu-id="2b91d-130">Пользователь получает доступ к приложению проверяющей стороны, предоставляя действительный маркер, выданный полномочным органом, которому доверяет приложение.</span><span class="sxs-lookup"><span data-stu-id="2b91d-130">A user gains access to a RP application by presenting a valid token issued by an authority that the RP application trusts.</span></span>

<span data-ttu-id="2b91d-131">**Поставщик удостоверений** — полномочный орган, который проверяет подлинность идентификационных данных пользователя и выдает маркеры безопасности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-131">**Identity Provider (IP)** - An IP is an authority that authenticates user identities and issues security tokens.</span></span> <span data-ttu-id="2b91d-132">Фактическая работа по выдаче маркеров осуществляется специальной службой, которая называется службой маркеров безопасности (Security Token Service, STS).</span><span class="sxs-lookup"><span data-stu-id="2b91d-132">The actual work of issuing tokens is implemented though a special service called Security Token Service (STS).</span></span> <span data-ttu-id="2b91d-133">Типичными примерами поставщиков удостоверений являются Windows Live ID, Facebook, репозитории бизнес-пользователей (например, Active Directory) и т. д.</span><span class="sxs-lookup"><span data-stu-id="2b91d-133">Typical examples of IPs include Windows Live ID, Facebook, business user repositories (like Active Directory), and so on.</span></span>
<span data-ttu-id="2b91d-134">Если служба ACS настроена на доверие поставщику удостоверений, система будет принимать и проверять маркеры, выданные этим поставщиком.</span><span class="sxs-lookup"><span data-stu-id="2b91d-134">When ACS is configured to trust an IP, the system will accept and validate tokens issued by that IP.</span></span> <span data-ttu-id="2b91d-135">ACS может доверять сразу нескольким поставщикам, это означает, что, если ваше приложение доверяет ACS, можно мгновенно предложить приложение для всех пользователей, прошедших проверку подлинности всех IP-адресов, которым доверяет ACS от вашего имени.</span><span class="sxs-lookup"><span data-stu-id="2b91d-135">ACS can trust multiple IPs at once, which means that when your application trusts ACS, you can instantly offer your application to all the authenticated users from all the IPs that ACS trusts on your behalf.</span></span>

<span data-ttu-id="2b91d-136">**Поставщик федерации** — поставщики удостоверений располагают непосредственными знаниями о пользователях, осуществляют проверку их подлинности, используя их учетные данные, и выдают утверждения о том, что они знают об этих пользователях.</span><span class="sxs-lookup"><span data-stu-id="2b91d-136">**Federation Provider (FP)** - IPs have direct knowledge of users, and authenticate them using their credentials and issue claims about what they know about them.</span></span> <span data-ttu-id="2b91d-137">Поставщик федерации — это другой вид полномочного органа: вместо непосредственной проверки подлинности пользователей он действует как промежуточное звено и выступает посредником при проверке подлинности между одной проверяющей стороной и одним или несколькими поставщиками удостоверений.</span><span class="sxs-lookup"><span data-stu-id="2b91d-137">A Federation Provider (FP) is a different kind of authority: rather than authenticating users directly, it acts as an intermediary and brokers authentication between one RP and one or more IPs.</span></span> <span data-ttu-id="2b91d-138">И поставщики удостоверений, и поставщики федерации выдают маркеры безопасности, поэтому и те и другие используют службу маркеров безопасности (Security Token Services, STS).</span><span class="sxs-lookup"><span data-stu-id="2b91d-138">Both IPs and FPs issue security tokens, hence they both use Security Token Services (STS).</span></span> <span data-ttu-id="2b91d-139">ACS — это один поставщик федерации.</span><span class="sxs-lookup"><span data-stu-id="2b91d-139">ACS is one FP.</span></span>

<span data-ttu-id="2b91d-140">**Обработчик правил ACS** — логика, которая используется для преобразования входящих маркеров от доверенных поставщиков удостоверений в маркеры, предназначенные для использования проверяющей стороной, и кодифицируется в форме простых правил преобразования утверждений.</span><span class="sxs-lookup"><span data-stu-id="2b91d-140">**ACS Rule Engine** - The logic used to transform incoming tokens from trusted IPs to tokens meant to be consumed by the RP is codified in form of simple claims transformation rules.</span></span> <span data-ttu-id="2b91d-141">В ACS имеется обработчик правил, который следит за применением любой логики преобразования, указанной для вашей проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-141">ACS features a rule engine that takes care of applying whatever transformation logic you specified for your RP.</span></span>

<span data-ttu-id="2b91d-142">**Пространство имен ACS** — пространство имен представляет собой раздел ACS верхнего уровня, который используется для систематизации параметров.</span><span class="sxs-lookup"><span data-stu-id="2b91d-142">**ACS Namespace** - A namespace is a top level partition of ACS that you use for organizing your settings.</span></span> <span data-ttu-id="2b91d-143">В пространстве имен размещается список поставщиков удостоверений, которым вы доверяете, приложений проверяющей стороны, которые нужно обслуживать, правил, которые будут применяться для обработки входящих маркеров, и т. д.</span><span class="sxs-lookup"><span data-stu-id="2b91d-143">A namespace holds a list of IPs you trust, the RP applications you want to serve, the rules that you expect the rule engine to process incoming tokens with, and so on.</span></span> <span data-ttu-id="2b91d-144">Пространство имен предоставляет различные конечные точки, которые будут использоваться приложением и разработчиком для обеспечения выполнения функции службы ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-144">A namespace exposes various endpoints that will be used by the application and the developer to get ACS to perform its function.</span></span>

<span data-ttu-id="2b91d-145">На следующем рисунке показано, как работает проверка подлинности ACS с веб-приложением:</span><span class="sxs-lookup"><span data-stu-id="2b91d-145">The following figure shows how ACS authentication works with a web application:</span></span>

![Рабочая схема ACS][acs_flow]

1. <span data-ttu-id="2b91d-147">Клиент (в данном случае браузер) запрашивает страницу у проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-147">The client (in this case a browser) requests a page from the RP.</span></span>
2. <span data-ttu-id="2b91d-148">Поскольку запрос еще не прошел проверку подлинности, проверяющая сторона перенаправляет пользователя в полномочный орган, которому она доверяет, то есть в ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-148">Since the request is not yet authenticated, the RP redirects the user to the authority that it trusts, which is ACS.</span></span> <span data-ttu-id="2b91d-149">ACS предлагает пользователю на выбор поставщики удостоверений, указанные для этой проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-149">The ACS presents the user with the choice of IPs that were specified for this RP.</span></span> <span data-ttu-id="2b91d-150">Пользователь выбирает поставщика удостоверений.</span><span class="sxs-lookup"><span data-stu-id="2b91d-150">The user selects the appropriate IP.</span></span>
3. <span data-ttu-id="2b91d-151">Клиент переходит на страницу проверки подлинности поставщика удостоверений и предлагает пользователю войти в систему.</span><span class="sxs-lookup"><span data-stu-id="2b91d-151">The client browses to the IP's authentication page, and prompts the user to log on.</span></span>
4. <span data-ttu-id="2b91d-152">После проверки подлинности клиента (например, введенных учетных данных) поставщик удостоверений выдает маркер безопасности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-152">After the client is authenticated (for example, the identity credentials are entered), the IP issues a security token.</span></span>
5. <span data-ttu-id="2b91d-153">После выдачи маркера безопасности поставщик удостоверений перенаправляет клиент в ACS и клиент отправляет маркер безопасности, выданный поставщиком, в ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-153">After issuing a security token, the IP redirects the client to ACS and the client sends the security token issued by the IP to ACS.</span></span>
6. <span data-ttu-id="2b91d-154">ACS проверяет маркер безопасности, выданный поставщиком удостоверений, вводит идентификационные утверждения из этого маркера в обработчик правил ACS, вычисляет выходные идентификационные утверждения и выдает новый маркер безопасности, содержащий эти выходные утверждения.</span><span class="sxs-lookup"><span data-stu-id="2b91d-154">ACS validates the security token issued by the IP, inputs the identity claims in this token into the ACS rules engine, calculates the output identity claims, and issues a new security token that contains these output claims.</span></span>
7. <span data-ttu-id="2b91d-155">ACS перенаправляет клиент к проверяющей стороне.</span><span class="sxs-lookup"><span data-stu-id="2b91d-155">ACS redirects the client to the RP.</span></span> <span data-ttu-id="2b91d-156">Клиент отправляет новый маркер безопасности, выданный службой ACS, проверяющей стороне.</span><span class="sxs-lookup"><span data-stu-id="2b91d-156">The client sends the new security token issued by ACS to the RP.</span></span> <span data-ttu-id="2b91d-157">Проверяющая сторона проверяет подпись маркера безопасности, выданного службой ACS, проверяет утверждения в этом маркере и возвращает первоначально запрошенную страницу.</span><span class="sxs-lookup"><span data-stu-id="2b91d-157">The RP validates the signature on the security token issued by ACS, validates the claims in this token, and returns the page that was originally requested.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="2b91d-158">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="2b91d-158">Prerequisites</span></span>
<span data-ttu-id="2b91d-159">Для выполнения задач в этом руководстве вам потребуется следующее:</span><span class="sxs-lookup"><span data-stu-id="2b91d-159">To complete the tasks in this guide, you will need the following:</span></span>

* <span data-ttu-id="2b91d-160">Java Developer Kit (JDK), версия 1.6 или более поздняя.</span><span class="sxs-lookup"><span data-stu-id="2b91d-160">A Java Developer Kit (JDK), v 1.6 or later.</span></span>
* <span data-ttu-id="2b91d-161">Интегрированная среда разработки Eclipse для разработчиков Java EE, версия Indigo или более поздняя.</span><span class="sxs-lookup"><span data-stu-id="2b91d-161">Eclipse IDE for Java EE Developers, Indigo or later.</span></span> <span data-ttu-id="2b91d-162">Скачать ее можно на веб-странице <http://www.eclipse.org/downloads/>.</span><span class="sxs-lookup"><span data-stu-id="2b91d-162">This can be downloaded from <http://www.eclipse.org/downloads/>.</span></span> 
* <span data-ttu-id="2b91d-163">Дистрибутив веб-сервера или сервера приложений на основе Java, например Apache Tomcat, GlassFish, сервера приложений JBoss или Jetty.</span><span class="sxs-lookup"><span data-stu-id="2b91d-163">A distribution of a Java-based web server or application server, such as Apache Tomcat, GlassFish, JBoss Application Server, or Jetty.</span></span>
* <span data-ttu-id="2b91d-164">Подписка на Azure, которую можно получить, перейдя по ссылке <http://www.microsoft.com/windowsazure/offers/>.</span><span class="sxs-lookup"><span data-stu-id="2b91d-164">an Azure subscription, which can be acquired from <http://www.microsoft.com/windowsazure/offers/>.</span></span>
* <span data-ttu-id="2b91d-165">Выпуск набора средств Azure для Eclipse за апрель 2014 года или более поздняя версия.</span><span class="sxs-lookup"><span data-stu-id="2b91d-165">The Azure Toolkit for Eclipse, April 2014 release or later.</span></span> <span data-ttu-id="2b91d-166">Дополнительные сведения см. в статье [Установка набора средств Azure для Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690946.aspx).</span><span class="sxs-lookup"><span data-stu-id="2b91d-166">For more information, see [Installing the Azure Toolkit for Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690946.aspx).</span></span>
* <span data-ttu-id="2b91d-167">Сертификат X.509 для использования с приложением.</span><span class="sxs-lookup"><span data-stu-id="2b91d-167">An X.509 certificate to use with your application.</span></span> <span data-ttu-id="2b91d-168">Этот сертификат потребуется в обоих форматах: открытый сертификат (CER) и файл обмена личной информацией (PFX).</span><span class="sxs-lookup"><span data-stu-id="2b91d-168">You will need this certificate in both public certificate (.cer) and Personal Information Exchange (.PFX) format.</span></span> <span data-ttu-id="2b91d-169">(Возможности для создания этого сертификата будут описаны далее в этом руководстве.)</span><span class="sxs-lookup"><span data-stu-id="2b91d-169">(Options for creating this certificate will be described later in this tutorial).</span></span>
* <span data-ttu-id="2b91d-170">Знакомство с эмулятором среды выполнения приложений Azure и методами развертывания, которые обсуждаются в разделе [Создание приложения Hello World для Azure в Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx).</span><span class="sxs-lookup"><span data-stu-id="2b91d-170">Familiarity with the Azure compute emulator and deployment techniques discussed at [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx).</span></span>

## <a name="create-an-acs-namespace"></a><span data-ttu-id="2b91d-171">Создание пространства имен ACS</span><span class="sxs-lookup"><span data-stu-id="2b91d-171">Create an ACS Namespace</span></span>
<span data-ttu-id="2b91d-172">Чтобы начать использование службы Access Control Service (ACS) в Azure, необходимо создать пространство имен ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-172">To begin using Access Control Service (ACS) in Azure, you must create an ACS namespace.</span></span> <span data-ttu-id="2b91d-173">Пространство имен предоставляет уникальную область для адресации ресурсов ACS из приложения.</span><span class="sxs-lookup"><span data-stu-id="2b91d-173">The namespace provides a unique scope for addressing ACS resources from within your application.</span></span>

1. <span data-ttu-id="2b91d-174">Войдите на [портал управления Azure][Azure Management Portal].</span><span class="sxs-lookup"><span data-stu-id="2b91d-174">Log into the [Azure Management Portal][Azure Management Portal].</span></span>
2. <span data-ttu-id="2b91d-175">Щелкните **Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-175">Click **Active Directory**.</span></span> 
3. <span data-ttu-id="2b91d-176">Чтобы создать новое пространство имен Access Control, последовательно щелкните **Создать**, **Службы приложений**, **Access Control** и **Быстро создать**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-176">To create a new Access Control namespace, click **New**, click **App Services**, click **Access Control**, and then click **Quick Create**.</span></span> 
4. <span data-ttu-id="2b91d-177">Введите имя для пространства имен.</span><span class="sxs-lookup"><span data-stu-id="2b91d-177">Enter a name for the namespace.</span></span> <span data-ttu-id="2b91d-178">Azure проверяет, является ли имя уникальным.</span><span class="sxs-lookup"><span data-stu-id="2b91d-178">Azure verifies that the name is unique.</span></span>
5. <span data-ttu-id="2b91d-179">Выберите регион, в котором используется пространство имен.</span><span class="sxs-lookup"><span data-stu-id="2b91d-179">Select the region in which the namespace is used.</span></span> <span data-ttu-id="2b91d-180">Для максимальной эффективности используйте регион, в котором развертывается приложение.</span><span class="sxs-lookup"><span data-stu-id="2b91d-180">For the best performance, use the region in which you are deploying your application.</span></span>
6. <span data-ttu-id="2b91d-181">Если у вас есть несколько подписок, выберите ту, которую следует использовать для пространства имен ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-181">If you have more than one subscription, select the subscription that you want to use for the ACS namespace.</span></span>
7. <span data-ttu-id="2b91d-182">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-182">Click **Create**.</span></span>

<span data-ttu-id="2b91d-183">Azure создает и активирует пространство имен.</span><span class="sxs-lookup"><span data-stu-id="2b91d-183">Azure creates and activates the namespace.</span></span> <span data-ttu-id="2b91d-184">Прежде чем продолжить, дождитесь, когда пространство имен перейдет в состояние **Активно** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-184">Wait until the status of the new namespace is **Active** before continuing.</span></span> 

## <a name="add-identity-providers"></a><span data-ttu-id="2b91d-185">Добавление поставщиков удостоверений</span><span class="sxs-lookup"><span data-stu-id="2b91d-185">Add identity providers</span></span>
<span data-ttu-id="2b91d-186">В этой задаче добавляются поставщики удостоверений, которые будут использоваться с приложением проверяющей стороны для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-186">In this task, you add IPs to use with your RP application for authentication.</span></span> <span data-ttu-id="2b91d-187">Для демонстрационных целей в этой задаче показано, как добавить Windows Live в качестве поставщика удостоверений, но вы можете использовать любой из поставщиков, перечисленных на портале управления ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-187">For demonstration purposes, this task shows how to add Windows Live as an IP, but you could use any of the IPs listed in the ACS Management Portal.</span></span>

1. <span data-ttu-id="2b91d-188">На [портале управления Azure][Azure Management Portal] щелкните **Active Directory**, выберите пространство имен Access Control и щелкните **Управление**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-188">In the [Azure Management Portal][Azure Management Portal], click **Active Directory**, select an Access Control namespace, and then click **Manage**.</span></span> <span data-ttu-id="2b91d-189">Откроется портал управления ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-189">The ACS Management Portal opens.</span></span>
2. <span data-ttu-id="2b91d-190">В левой области навигации портала управления ACS щелкните **Поставщики удостоверений**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-190">In the left navigation pane of the ACS Management Portal, click **Identity providers**.</span></span>
3. <span data-ttu-id="2b91d-191">Windows Live ID включен по умолчанию и не может быть удален.</span><span class="sxs-lookup"><span data-stu-id="2b91d-191">Windows Live ID is enabled by default, and cannot be deleted.</span></span> <span data-ttu-id="2b91d-192">В данном учебнике используется только Windows Live ID.</span><span class="sxs-lookup"><span data-stu-id="2b91d-192">For purposes of this tutorial, only Windows Live ID is used.</span></span> <span data-ttu-id="2b91d-193">Однако на этом экране можно добавлять и другие поставщики удостоверений нажатием кнопки **Добавить** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-193">This screen, however, is where you could add other IPs, by clicking the **Add** button.</span></span>

<span data-ttu-id="2b91d-194">Теперь Windows Live ID используется в качестве поставщика удостоверений для вашего пространства имен ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-194">Windows Live ID is now enabled as an IP for your ACS namespace.</span></span> <span data-ttu-id="2b91d-195">Далее необходимо указать веб-приложение Java (будет создано позже) в качестве проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-195">Next, you specify your Java web application (to be created later) as an RP.</span></span>

## <a name="add-a-relying-party-application"></a><span data-ttu-id="2b91d-196">Добавление приложения проверяющей стороны</span><span class="sxs-lookup"><span data-stu-id="2b91d-196">Add a relying party application</span></span>
<span data-ttu-id="2b91d-197">В этой задаче ACS настраивается для распознавания веб-приложения Java как допустимого приложения проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-197">In this task, you configure ACS to recognize your Java web application as a valid RP application.</span></span>

1. <span data-ttu-id="2b91d-198">На портале управления ACS щелкните **Приложения проверяющей стороны**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-198">On the ACS Management Portal, click **Relying party applications**.</span></span>
2. <span data-ttu-id="2b91d-199">На странице **Relying Party Applications** (Приложения проверяющей стороны) нажмите кнопку **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-199">On the **Relying Party Applications** page, click **Add**.</span></span>
3. <span data-ttu-id="2b91d-200">На странице **Добавить приложение проверяющей стороны** выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="2b91d-200">On the **Add Relying Party Application** page, do the following:</span></span>
   
   1. <span data-ttu-id="2b91d-201">В поле **Имя**введите имя проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-201">In **Name**, type the name of the RP.</span></span> <span data-ttu-id="2b91d-202">Для целей данного учебника введите **Azure Web App**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-202">For purposes of this tutorial, type **Azure Web App**.</span></span>
   2. <span data-ttu-id="2b91d-203">В поле **Режим** выберите **Enter settings manually** (Ввод параметров вручную).</span><span class="sxs-lookup"><span data-stu-id="2b91d-203">In **Mode**, select **Enter settings manually**.</span></span>
   3. <span data-ttu-id="2b91d-204">В поле **Область**введите URI, к которому применяется маркер безопасности, выданный ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-204">In **Realm**, type the URI to which the security token issued by ACS applies.</span></span> <span data-ttu-id="2b91d-205">Для рассматриваемой задачи введите **http://localhost:8080/**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-205">For this task, type **http://localhost:8080/**.</span></span>
      <span data-ttu-id="2b91d-206">![Область действия проверяющей стороны для использования в эмуляторе среды выполнения приложений][relying_party_realm_emulator]</span><span class="sxs-lookup"><span data-stu-id="2b91d-206">![Relying party realm for use in compute emulator][relying_party_realm_emulator]</span></span>
   4. <span data-ttu-id="2b91d-207">В поле **URL возврата** введите URL-адрес, по которому ACS возвращает маркер безопасности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-207">In **Return URL,** type the URL to which ACS returns the security token.</span></span> <span data-ttu-id="2b91d-208">Для данной задачи введите **http://localhost:8080/MyACSHelloWorld/index.jsp**
      ![URL-адрес возврата проверяющей стороны для использования в эмуляторе вычислений][relying_party_return_url_emulator]</span><span class="sxs-lookup"><span data-stu-id="2b91d-208">For this task, type **http://localhost:8080/MyACSHelloWorld/index.jsp**
![Relying party return URL for use in compute emulator][relying_party_return_url_emulator]</span></span>
   5. <span data-ttu-id="2b91d-209">Примите значения по умолчанию в остальных полях.</span><span class="sxs-lookup"><span data-stu-id="2b91d-209">Accept the default values in the rest of the fields.</span></span>
4. <span data-ttu-id="2b91d-210">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-210">Click **Save**.</span></span>

<span data-ttu-id="2b91d-211">Вы успешно настроили веб-приложение Java, чтобы при запуске в эмуляторе вычислений Azure (на http://localhost:8080/) оно выступало в роли проверяющей стороны в пространстве имен ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-211">You have now successfully configured your Java web application when it is run in the Azure compute emulator (at http://localhost:8080/) to be an RP in your ACS namespace.</span></span> <span data-ttu-id="2b91d-212">Теперь необходимо создать правила, которые будет использовать ACS при обработке утверждений для проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-212">Next, create the rules that ACS uses to process claims for the RP.</span></span>

## <a name="create-rules"></a><span data-ttu-id="2b91d-213">Создание правил</span><span class="sxs-lookup"><span data-stu-id="2b91d-213">Create rules</span></span>
<span data-ttu-id="2b91d-214">В этой задаче задаются правила, которые определяют способ передачи проверяющей стороне утверждений от поставщиков удостоверений.</span><span class="sxs-lookup"><span data-stu-id="2b91d-214">In this task, you define the rules that drive how claims are passed from IPs to your RP.</span></span> <span data-ttu-id="2b91d-215">В данном руководстве мы просто настроим ACS для копирования типов и значений входных утверждений прямо в выходной маркер без фильтрации или изменения.</span><span class="sxs-lookup"><span data-stu-id="2b91d-215">For the purpose of this guide, we will simply configure ACS to copy the input claim types and values directly in the output token, without filtering or modifying them.</span></span>

1. <span data-ttu-id="2b91d-216">На главной странице портала управления ACS щелкните **Группы правил**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-216">On the ACS Management Portal main page, click **Rule groups**.</span></span>
2. <span data-ttu-id="2b91d-217">На странице **Группы правил** щелкните **Default Rule Group for Azure Web App** (Группа правил по умолчанию для веб-приложения Azure).</span><span class="sxs-lookup"><span data-stu-id="2b91d-217">On the **Rule Groups** page, click **Default Rule Group for Azure Web App**.</span></span>
3. <span data-ttu-id="2b91d-218">На странице **Edit Rule Group** (Изменить группу правил) щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-218">On the **Edit Rule Group** page, click **Generate**.</span></span>
4. <span data-ttu-id="2b91d-219">На странице **Generate Rules: Default Rule Group for Azure Web App** (Создать правила: группа правил по умолчанию для веб-приложения Azure) убедитесь, что установлен флажок "Windows Live ID", а затем щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-219">On the **Generate Rules: Default Rule Group for Azure Web App** page, ensure Windows Live ID is checked and then click **Generate**.</span></span>    
5. <span data-ttu-id="2b91d-220">На странице **Edit Rule Group** (Изменить группу правил) щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-220">On the **Edit Rule Group** page, click **Save**.</span></span>

## <a name="upload-a-certificate-to-your-acs-namespace"></a><span data-ttu-id="2b91d-221">Отправка сертификата в пространство имен ACS</span><span class="sxs-lookup"><span data-stu-id="2b91d-221">Upload a certificate to your ACS namespace</span></span>
<span data-ttu-id="2b91d-222">В этой задаче отправляется PFX-сертификат, который будет использоваться для подписи запросов маркера, созданных пространством имен ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-222">In this task, you upload a .PFX certificate that will be used to sign token requests created by your ACS namespace.</span></span>

1. <span data-ttu-id="2b91d-223">На главной странице портала управления ACS щелкните **Сертификаты и ключи**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-223">On the ACS Management Portal main page, click **Certificates and keys**.</span></span>
2. <span data-ttu-id="2b91d-224">На странице **Certificates and Keys** (Сертификаты и ключи) щелкните **Добавить** над полем **Token Signing** (Подпись маркеров).</span><span class="sxs-lookup"><span data-stu-id="2b91d-224">On the **Certificates and Keys** page, click **Add** above **Token Signing**.</span></span>
3. <span data-ttu-id="2b91d-225">На странице **Добавить сертификат или ключ для подписи маркера** сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="2b91d-225">On the **Add Token-Signing Certificate or Key** page:</span></span>
   1. <span data-ttu-id="2b91d-226">В разделе **Используется для** щелкните **Relying Party Application** (Приложение проверяющей стороны) и выберите **Веб-приложение Azure** (указано ранее в качестве имени приложения проверяющей стороны).</span><span class="sxs-lookup"><span data-stu-id="2b91d-226">In the **Used for** section, click **Relying Party Application** and select **Azure Web App** (which you previously set as the name of your relying party application).</span></span>
   2. <span data-ttu-id="2b91d-227">В разделе **Тип** выберите **Сертификат X.509**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-227">In the **Type** section, select **X.509 Certificate**.</span></span>
   3. <span data-ttu-id="2b91d-228">В разделе **Сертификат** нажмите кнопку обзора и перейдите к файлу сертификата X.509, который нужно использовать.</span><span class="sxs-lookup"><span data-stu-id="2b91d-228">In the **Certificate** section, click the browse button and navigate to the X.509 certificate file that you want to use.</span></span> <span data-ttu-id="2b91d-229">Это будет PFX-файл.</span><span class="sxs-lookup"><span data-stu-id="2b91d-229">This will be a .PFX file.</span></span> <span data-ttu-id="2b91d-230">Выберите файл, щелкните **Открыть**, а затем введите пароль сертификата в поле **Пароль**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-230">Select the file, click **Open**,  and then enter the certificate password in the **Password** text box.</span></span> <span data-ttu-id="2b91d-231">Имейте в виду, что для целей тестирования можно использовать самозаверяющий сертификат.</span><span class="sxs-lookup"><span data-stu-id="2b91d-231">Note that for testing purposes, you may use a self-signed-certificate.</span></span> <span data-ttu-id="2b91d-232">Чтобы создать самозаверяющий сертификат, используйте кнопку **Создать** в описанном далее диалоговом окне **ACS Filter Library** (Библиотека фильтров ACS) или служебную программу **encutil.exe** с [веб-сайта проекта][project website] начального набора Azure для Java.</span><span class="sxs-lookup"><span data-stu-id="2b91d-232">To create a self-signed certificate, use the **New** button in the **ACS Filter Library** dialog (described later), or use the **encutil.exe** utility from the [project website][project website] of the Azure Starter Kit for Java.</span></span>
   4. <span data-ttu-id="2b91d-233">Убедитесь, что установлен флаг **Назначить основным**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-233">Ensure that **Make Primary** is checked.</span></span> <span data-ttu-id="2b91d-234">Страница **Add Token-Signing Certificate or Key** (Добавить сертификат или ключ для подписи маркера) должна выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2b91d-234">Your **Add Token-Signing Certificate or Key** page should look similar to the following.</span></span>
       <span data-ttu-id="2b91d-235">![Добавление сертификата для подписи маркера][add_token_signing_cert]</span><span class="sxs-lookup"><span data-stu-id="2b91d-235">![Add token-signing certificate][add_token_signing_cert]</span></span>
   5. <span data-ttu-id="2b91d-236">Щелкните **Сохранить**, чтобы сохранить настройки и закрыть страницу **Add Token-Signing Certificate or Key** (Добавить сертификат или ключ для подписи маркера).</span><span class="sxs-lookup"><span data-stu-id="2b91d-236">Click **Save** to save your settings and close the **Add Token-Signing Certificate or Key** page.</span></span>

<span data-ttu-id="2b91d-237">Теперь просмотрите сведения на странице интеграции приложений и скопируйте URI, который потребуется для настройки веб-приложения Java на использование ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-237">Next, review the information in the Application Integration page and copy the URI that you will need to configure your Java web application to use ACS.</span></span>

## <a name="review-the-application-integration-page"></a><span data-ttu-id="2b91d-238">Просмотр страницы интеграции приложений</span><span class="sxs-lookup"><span data-stu-id="2b91d-238">Review the Application Integration page</span></span>
<span data-ttu-id="2b91d-239">Все необходимые сведения и код, чтобы настроить веб-приложение Java (приложение проверяющей стороны) для работы с ACS, вы найдете на странице интеграции приложений на портале управления ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-239">You can find all the information and the code necessary to configure your Java web application (the RP application) to work with ACS on the Application Integration page of the ACS Management Portal.</span></span> <span data-ttu-id="2b91d-240">Эти сведения понадобятся при настройке веб-приложения Java для федеративной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="2b91d-240">You will need this information when configuring your Java web application for federated authentication.</span></span>

1. <span data-ttu-id="2b91d-241">На портале управления ACS щелкните **Интеграция приложений**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-241">On the ACS Management Portal, click **Application integration**.</span></span>  
2. <span data-ttu-id="2b91d-242">На странице **Application Integration** (Интеграция приложений) щелкните **Login Pages** (Страницы входа).</span><span class="sxs-lookup"><span data-stu-id="2b91d-242">In the **Application Integration** page, click **Login Pages**.</span></span>
3. <span data-ttu-id="2b91d-243">На странице **Login Page Integration** (Интеграция страниц входа) щелкните **Веб-приложение Azure**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-243">In the **Login Page Integration** page, click **Azure Web App**.</span></span>

<span data-ttu-id="2b91d-244">На странице **Login Page Integration: Azure Web App** (Интеграция страниц входа: веб-приложение Azure)URL-адрес, указанный в поле **Option 1: Link to an ACS-hosted login page** (Параметр 1: ссылка на страницу входа, размещаемую в ACS), будет использоваться в вашем веб-приложении Java.</span><span class="sxs-lookup"><span data-stu-id="2b91d-244">In the **Login Page Integration: Azure Web App** page, the URL listed in **Option 1: Link to an ACS-hosted login page** will be used in your Java web application.</span></span> <span data-ttu-id="2b91d-245">Это значение потребуется при добавлении библиотеки фильтров служб Azure Access Control в приложение Java.</span><span class="sxs-lookup"><span data-stu-id="2b91d-245">You will need this value when you add the Azure Access Control Services Filter library to your Java application.</span></span>

## <a name="create-a-java-web-application"></a><span data-ttu-id="2b91d-246">Создание веб-приложения Java</span><span class="sxs-lookup"><span data-stu-id="2b91d-246">Create a Java web application</span></span>
1. <span data-ttu-id="2b91d-247">В меню Eclipse выберите **Файл**, щелкните **Создать**, а затем щелкните **Dynamic Web Project** (Динамический веб-проект).</span><span class="sxs-lookup"><span data-stu-id="2b91d-247">Within Eclipse, at the menu click **File**, click **New**, and then click **Dynamic Web Project**.</span></span> <span data-ttu-id="2b91d-248">(Если элемента **Dynamic Web Project** (Динамический веб-проект) нет в списке доступных проектов после выбора пунктов **Файл** и **Создать**, то сделайте следующее: щелкните **Файл**, **Создать**, **Проект**, разверните узел **Интернет**, щелкните **Dynamic Web Project** (Динамический веб-проект) и нажмите кнопку **Далее**). Для целей данного учебника присвойте проекту имя **MyACSHelloWorld**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-248">(If you don't see **Dynamic Web Project** listed as an available project after clicking **File**, **New**, then do the following: click **File**, click **New**, click **Project**, expand **Web**, click **Dynamic Web Project**, and click **Next**.) For purposes of this tutorial, name the project **MyACSHelloWorld**.</span></span> <span data-ttu-id="2b91d-249">(Обязательно используйте это имя, на последующих шагах в учебнике предполагается, что WAR-файл должен называться MyACSHelloWorld.)</span><span class="sxs-lookup"><span data-stu-id="2b91d-249">(Ensure you use this name, subsequent steps in this tutorial expect your WAR file to be named MyACSHelloWorld).</span></span> <span data-ttu-id="2b91d-250">Экран будет выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2b91d-250">Your screen will appear similar to the following:</span></span>
   
    ![Пример создания проекта Hello World для ACS][create_acs_hello_world]
   
    <span data-ttu-id="2b91d-252">Нажмите кнопку **Готово**</span><span class="sxs-lookup"><span data-stu-id="2b91d-252">Click **Finish**.</span></span>
2. <span data-ttu-id="2b91d-253">В окне обозревателя проектов в Eclipse разверните узел **MyACSHelloWorld**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-253">Within Eclipse's Project Explorer view, expand **MyACSHelloWorld**.</span></span> <span data-ttu-id="2b91d-254">Щелкните правой кнопкой мыши **WebContent**, выберите **Создать**, затем щелкните **JSP File** (JSP-файл).</span><span class="sxs-lookup"><span data-stu-id="2b91d-254">Right-click **WebContent**, click **New**, and then click **JSP File**.</span></span>
3. <span data-ttu-id="2b91d-255">В диалоговом окне **New JSP File** (Новый JSP-файл) укажите для файла имя **index.jsp**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-255">In the **New JSP File** dialog, name the file **index.jsp**.</span></span> <span data-ttu-id="2b91d-256">Сохраните родительскую папку как MyACSHelloWorld/WebContent, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="2b91d-256">Keep the parent folder as MyACSHelloWorld/WebContent, as shown in the following:</span></span>
   
    ![Пример добавления JSP-файла для ACS][add_jsp_file_acs]
   
    <span data-ttu-id="2b91d-258">Щелкните **Далее**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-258">Click **Next**.</span></span>
4. <span data-ttu-id="2b91d-259">В диалоговом окне **Выбор шаблона JSP** выберите **Новый JSP-файл (html)** и нажмите кнопку **Готово**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-259">In the **Select JSP Template** dialog, select **New JSP File (html)** and click **Finish**.</span></span>
5. <span data-ttu-id="2b91d-260">Открыв файл index.jsp в Eclipse, добавьте в отображаемый текст **Hello ACS World!**</span><span class="sxs-lookup"><span data-stu-id="2b91d-260">When the index.jsp file opens in Eclipse, add in text to display **Hello ACS World!**</span></span> <span data-ttu-id="2b91d-261">в существующий элемент `<body>`.</span><span class="sxs-lookup"><span data-stu-id="2b91d-261">within the existing `<body>` element.</span></span> <span data-ttu-id="2b91d-262">Обновленное содержимое элемента `<body>` должно иметь следующий вид:</span><span class="sxs-lookup"><span data-stu-id="2b91d-262">Your updated `<body>` content should appear as the following:</span></span>
   
        <body>
          <b><% out.println("Hello ACS World!"); %></b>
        </body>
   
    <span data-ttu-id="2b91d-263">Сохраните index.jsp.</span><span class="sxs-lookup"><span data-stu-id="2b91d-263">Save index.jsp.</span></span>

## <a name="add-the-acs-filter-library-to-your-application"></a><span data-ttu-id="2b91d-264">Добавление библиотеки фильтров ACS в приложение</span><span class="sxs-lookup"><span data-stu-id="2b91d-264">Add the ACS Filter library to your application</span></span>
1. <span data-ttu-id="2b91d-265">В обозревателе проектов Eclipse щелкните правой кнопкой мыши **MyACSHelloWorld**, выберите **Build Path** (Путь сборки), а затем щелкните **Configure Build Path** (Настроить путь сборки).</span><span class="sxs-lookup"><span data-stu-id="2b91d-265">In Eclipse's Project Explorer, right-click **MyACSHelloWorld**, click **Build Path**, and then click **Configure Build Path**.</span></span>
2. <span data-ttu-id="2b91d-266">В диалоговом окне **Java Build Path** (Путь сборки Java) перейдите на вкладку **Библиотеки**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-266">In the **Java Build Path** dialog, click the **Libraries** tab.</span></span>
3. <span data-ttu-id="2b91d-267">Щелкните **Добавить библиотеку**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-267">Click **Add Library**.</span></span>
4. <span data-ttu-id="2b91d-268">Щелкните **Azure Access Control Services Filter (by MS Open Tech)** (Фильтр служб контроля доступа Azure (от MS Open Tech)) и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-268">Click **Azure Access Control Services Filter (by MS Open Tech)** and then click **Next**.</span></span> <span data-ttu-id="2b91d-269">Откроется диалоговое окно **Фильтр служб Azure Access Control** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-269">The **Azure Access Control Services Filter** dialog is displayed.</span></span>  <span data-ttu-id="2b91d-270">(В поле **Расположение** может быть указан другой путь в зависимости от того, где установлен Eclipse, и номер версии тоже может отличаться в зависимости от обновлений программного обеспечения.)</span><span class="sxs-lookup"><span data-stu-id="2b91d-270">(The **Location** field may have a different path, depending on where you installed Eclipse, and the version number could be different, depending on software updates.)</span></span>
   
    ![Добавление библиотеки фильтров ACS][add_acs_filter_lib]
5. <span data-ttu-id="2b91d-272">С помощью браузера откройте страницу **Login Page Integration** (Интеграция страниц входа) портала управления, скопируйте URL-адрес, указанный в поле **Option 1: Link to an ACS-hosted login page** (Параметр 1: ссылка на страницу входа, размещаемую в ACS), и вставьте его в поле **ACS Authentication Endpoint** (Конечная точка аутентификации ACS) в диалоговом окне Eclipse.</span><span class="sxs-lookup"><span data-stu-id="2b91d-272">Using a browser opened to the **Login Page Integration** page of the Management Portal, copy the URL listed in the **Option 1: Link to an ACS-hosted login page** field and paste it into the **ACS Authentication Endpoint** field of the Eclipse dialog.</span></span>
6. <span data-ttu-id="2b91d-273">С помощью браузера откройте страницу **Edit Relying Party Application** (Изменение приложения проверяющей стороны) на портале управления, скопируйте URL-адрес, указанный в поле **Область**, и вставьте его в поле **Relying Party Realm** (Область проверяющей стороны) в диалоговом окне Eclipse.</span><span class="sxs-lookup"><span data-stu-id="2b91d-273">Using a browser opened to the **Edit Relying Party Application** page of the Management Portal, copy the URL listed in the **Realm** field and paste it into the **Relying Party Realm** field of the Eclipse dialog.</span></span>
7. <span data-ttu-id="2b91d-274">В разделе **Безопасность** диалогового окна Eclipse, если хотите использовать существующий сертификат, щелкните **Обзор**, перейдите к нужному сертификату, выберите его и щелкните **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-274">Within the **Security** section of the Eclipse dialog, if you want to use an existing certificate, click **Browse**, navigate to the certificate you want to use, select it, and click **Open**.</span></span> <span data-ttu-id="2b91d-275">Если же вы хотите создать новый сертификат, щелкните **Создать** для отображения диалогового окна **Новый сертификат**, затем укажите пароль, имя CER-файла и имя PFX-файла для нового сертификата.</span><span class="sxs-lookup"><span data-stu-id="2b91d-275">Or, if you want to create a new certificate, click **New** to display the **New Certificate** dialog, then specify the password, name of the .cer file, and name of the .pfx file for the new certificate.</span></span>
8. <span data-ttu-id="2b91d-276">Установите флажок **Внедрить сертификат в WAR-файл**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-276">Check **Embed the certificate in the WAR file**.</span></span> <span data-ttu-id="2b91d-277">При таком внедрении сертификат включается в ваше развертывание и его не требуется вручную добавлять в качестве компонента.</span><span class="sxs-lookup"><span data-stu-id="2b91d-277">Embedding the certificate in this manner includes it in your deployment without requiring you to manually add it as a component.</span></span> <span data-ttu-id="2b91d-278">(В противном случае необходимо сохранить сертификат вне WAR-файла, а затем можно добавить сертификат в качестве компонента роли и снять флажок **Внедрить сертификат в WAR-файл**.)</span><span class="sxs-lookup"><span data-stu-id="2b91d-278">(If instead you must store your certificate externally from your WAR file, you could add the certificate as a role component and uncheck **Embed the certificate in the WAR file**.)</span></span>
9. <span data-ttu-id="2b91d-279">[Необязательно] Оставьте установленный флажок **Требовать соединения HTTPS** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-279">[Optional] Keep **Require HTTPS connections** checked.</span></span> <span data-ttu-id="2b91d-280">Если этот флажок установлен, для доступа к приложению необходимо использовать протокол HTTPS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-280">If you set this option, you'll need to access your application using the HTTPS protocol.</span></span> <span data-ttu-id="2b91d-281">Если вы не собираетесь требовать соединения HTTPS, снимите этот флажок.</span><span class="sxs-lookup"><span data-stu-id="2b91d-281">If you don't want to require HTTPS connections, uncheck this option.</span></span>
10. <span data-ttu-id="2b91d-282">Для развертывания в эмуляторе среды выполнения приложений ваши параметры **фильтра Azure ACS** будут выглядеть следующим образом.</span><span class="sxs-lookup"><span data-stu-id="2b91d-282">For a deployment to the compute emulator, your **Azure ACS Filter** settings will look similar to the following.</span></span>
    
    ![Параметры фильтра Azure ACS для развертывания в эмуляторе среды выполнения приложений][add_acs_filter_lib_emulator]
11. <span data-ttu-id="2b91d-284">Нажмите кнопку **Готово**</span><span class="sxs-lookup"><span data-stu-id="2b91d-284">Click **Finish**.</span></span>
12. <span data-ttu-id="2b91d-285">Щелкните **Да** при появлении диалогового окна с сообщением о создании файла web.xml.</span><span class="sxs-lookup"><span data-stu-id="2b91d-285">Click **Yes** when presented with with a dialog box stating that a web.xml file will be created.</span></span>
13. <span data-ttu-id="2b91d-286">Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Java Build Path** (Путь сборки Java).</span><span class="sxs-lookup"><span data-stu-id="2b91d-286">Click **OK** to close the **Java Build Path** dialog.</span></span>

## <a name="deploy-to-the-compute-emulator"></a><span data-ttu-id="2b91d-287">Развертывание в эмуляторе среды выполнения приложений</span><span class="sxs-lookup"><span data-stu-id="2b91d-287">Deploy to the compute emulator</span></span>
1. <span data-ttu-id="2b91d-288">В обозревателе проектов Eclipse щелкните правой кнопкой мыши **MyACSHelloWorld**, выберите **Azure**, а затем щелкните **Package for Azure** (Пакет для Azure).</span><span class="sxs-lookup"><span data-stu-id="2b91d-288">In Eclipse's Project Explorer, right-click **MyACSHelloWorld**, click **Azure**, and then click **Package for Azure**.</span></span>
2. <span data-ttu-id="2b91d-289">В поле **Имя проекта** введите **MyAzureACSProject** и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-289">For **Project name**, type **MyAzureACSProject** and click **Next**.</span></span>
3. <span data-ttu-id="2b91d-290">Выберите JDK и сервер приложений.</span><span class="sxs-lookup"><span data-stu-id="2b91d-290">Select a JDK and application server.</span></span> <span data-ttu-id="2b91d-291">(Эти шаги подробно описаны в учебнике [Создание приложения Hello World для Azure в Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) .)</span><span class="sxs-lookup"><span data-stu-id="2b91d-291">(These steps are covered in detail in the [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) tutorial).</span></span>
4. <span data-ttu-id="2b91d-292">Нажмите кнопку **Готово**</span><span class="sxs-lookup"><span data-stu-id="2b91d-292">Click **Finish**.</span></span>
5. <span data-ttu-id="2b91d-293">Нажмите кнопку **Запуск в эмуляторе Azure** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-293">Click the **Run in Azure Emulator** button.</span></span>
6. <span data-ttu-id="2b91d-294">После запуска веб-приложения Java в эмуляторе среды выполнения приложений закройте все экземпляры браузера (чтобы все текущие сеансы браузера не мешали тестированию входа в ACS).</span><span class="sxs-lookup"><span data-stu-id="2b91d-294">After your Java web application starts in the compute emulator, close all instances of your browser (so that any current browser sessions do not interfere with your ACS login test).</span></span>
7. <span data-ttu-id="2b91d-295">Запустите приложение, открыв в браузере ссылку <http://localhost:8080/MyACSHelloWorld/> (или <https://localhost:8080/MyACSHelloWorld/>, если установлен флажок **Require HTTPS connections** (Требовать соединения HTTPS)).</span><span class="sxs-lookup"><span data-stu-id="2b91d-295">Run your application by opening <http://localhost:8080/MyACSHelloWorld/> in your browser (or <https://localhost:8080/MyACSHelloWorld/> if you checked **Require HTTPS connections**).</span></span> <span data-ttu-id="2b91d-296">Вам будет предложено войти в Windows Live ID, а затем следует использовать URL-адрес возврата, указанный для приложения проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-296">You should be prompted for a Windows Live ID login, then you should be taken to the return URL specified for your relying party application.</span></span>
8. <span data-ttu-id="2b91d-297">По завершении просмотра приложения нажмите кнопку **Сброс эмулятора Azure** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-297">When you have finished viewing your application, click the **Reset Azure Emulator** button.</span></span>

## <a name="deploy-to-azure"></a><span data-ttu-id="2b91d-298">Развертывание в Azure</span><span class="sxs-lookup"><span data-stu-id="2b91d-298">Deploy to Azure</span></span>
<span data-ttu-id="2b91d-299">Для развертывания в Azure необходимо изменить область действия проверяющей стороны и URL-адрес возврата для пространства имен ACS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-299">To deploy to Azure, you'll need to change the relying party realm and return URL for your ACS namespace.</span></span>

1. <span data-ttu-id="2b91d-300">На портале управления Azure на странице **Edit Relying Party Application** (Изменение приложения проверяющей стороны) измените значение **Область** на URL-адрес развернутого сайта.</span><span class="sxs-lookup"><span data-stu-id="2b91d-300">Within the Azure Management Portal, in the **Edit Relying Party Application** page, modify **Realm** to be the URL of your deployed site.</span></span> <span data-ttu-id="2b91d-301">Замените **example** DNS-именем, указанным для вашего развертывания.</span><span class="sxs-lookup"><span data-stu-id="2b91d-301">Replace **example** with the DNS name you specified for your deployment.</span></span>
   
    ![Область действия проверяющей стороны для использования в рабочей среде][relying_party_realm_production]
2. <span data-ttu-id="2b91d-303">Измените **URL-адрес возврата** на URL-адрес приложения.</span><span class="sxs-lookup"><span data-stu-id="2b91d-303">Modify **Return URL** to be the URL of your application.</span></span> <span data-ttu-id="2b91d-304">Замените **example** DNS-именем, указанным для вашего развертывания.</span><span class="sxs-lookup"><span data-stu-id="2b91d-304">Replace **example** with the DNS name you specified for your deployment.</span></span>
   
    ![URL-адрес возврата проверяющей стороны для использования в рабочей среде][relying_party_return_url_production]
3. <span data-ttu-id="2b91d-306">Щелкните **Сохранить** , чтобы сохранить обновленную область действия проверяющей стороны и изменение URL-адреса возврата.</span><span class="sxs-lookup"><span data-stu-id="2b91d-306">Click **Save** to save your updated replying party realm and return URL changes.</span></span>
4. <span data-ttu-id="2b91d-307">Оставьте в браузере открытой страницу **Интеграция страниц входа** , вам скоро потребуется копировать с нее данные.</span><span class="sxs-lookup"><span data-stu-id="2b91d-307">Keep the **Login Page Integration** page open in your browser, you'll need to copy from it shortly.</span></span>
5. <span data-ttu-id="2b91d-308">В обозревателе проектов Eclipse щелкните правой кнопкой мыши **MyACSHelloWorld**, выберите **Build Path** (Путь сборки), а затем щелкните **Configure Build Path** (Настроить путь сборки).</span><span class="sxs-lookup"><span data-stu-id="2b91d-308">In Eclipse's Project Explorer, right-click **MyACSHelloWorld**, click **Build Path**, and then click **Configure Build Path**.</span></span>
6. <span data-ttu-id="2b91d-309">Перейдите на вкладку **Библиотеки**, щелкните **Azure Access Control Services Filter** (Фильтр служб контроля доступа Azure) и нажмите кнопку **Изменить**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-309">Click the **Libraries** tab, click **Azure Access Control Services Filter**, and then click **Edit**.</span></span>
7. <span data-ttu-id="2b91d-310">С помощью браузера откройте страницу **Login Page Integration** (Интеграция страниц входа) портала управления, скопируйте URL-адрес, указанный в поле **Option 1: Link to an ACS-hosted login page** (Параметр 1: ссылка на страницу входа, размещаемую в ACS), и вставьте его в поле **ACS Authentication Endpoint** (Конечная точка аутентификации ACS) в диалоговом окне Eclipse.</span><span class="sxs-lookup"><span data-stu-id="2b91d-310">Using a browser opened to the **Login Page Integration** page of the Management Portal, copy the URL listed in the **Option 1: Link to an ACS-hosted login page** field and paste it into the **ACS Authentication Endpoint** field of the Eclipse dialog.</span></span>
8. <span data-ttu-id="2b91d-311">С помощью браузера откройте страницу **Edit Relying Party Application** (Изменение приложения проверяющей стороны) на портале управления, скопируйте URL-адрес, указанный в поле **Область**, и вставьте его в поле **Relying Party Realm** (Область проверяющей стороны) в диалоговом окне Eclipse.</span><span class="sxs-lookup"><span data-stu-id="2b91d-311">Using a browser opened to the **Edit Relying Party Application** page of the Management Portal, copy the URL listed in the **Realm** field and paste it into the **Relying Party Realm** field of the Eclipse dialog.</span></span>
9. <span data-ttu-id="2b91d-312">В разделе **Безопасность** диалогового окна Eclipse, если хотите использовать существующий сертификат, щелкните **Обзор**, перейдите к нужному сертификату, выберите его и щелкните **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-312">Within the **Security** section of the Eclipse dialog, if you want to use an existing certificate, click **Browse**, navigate to the certificate you want to use, select it, and click **Open**.</span></span> <span data-ttu-id="2b91d-313">Если же вы хотите создать новый сертификат, щелкните **Создать** для отображения диалогового окна **Новый сертификат**, затем укажите пароль, имя CER-файла и имя PFX-файла для нового сертификата.</span><span class="sxs-lookup"><span data-stu-id="2b91d-313">Or, if you want to create a new certificate, click **New** to display the **New Certificate** dialog, then specify the password, name of the .cer file, and name of the .pfx file for the new certificate.</span></span>
10. <span data-ttu-id="2b91d-314">Оставьте установленный флажок **Внедрить сертификат в WAR-файл** , исходя из предположения, что вы хотите внедрить сертификат в WAR-файл.</span><span class="sxs-lookup"><span data-stu-id="2b91d-314">Keep **Embed the certificate in the WAR file** checked, assuming you want to embed the certificate in the WAR file.</span></span>
11. <span data-ttu-id="2b91d-315">[Необязательно] Оставьте установленный флажок **Требовать соединения HTTPS** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-315">[Optional] Keep **Require HTTPS connections** checked.</span></span> <span data-ttu-id="2b91d-316">Если этот флажок установлен, для доступа к приложению необходимо использовать протокол HTTPS.</span><span class="sxs-lookup"><span data-stu-id="2b91d-316">If you set this option, you'll need to access your application using the HTTPS protocol.</span></span> <span data-ttu-id="2b91d-317">Если вы не собираетесь требовать соединения HTTPS, снимите этот флажок.</span><span class="sxs-lookup"><span data-stu-id="2b91d-317">If you don't want to require HTTPS connections, uncheck this option.</span></span>
12. <span data-ttu-id="2b91d-318">Для развертывания в Azure ваши параметры фильтра Azure ACS будут выглядеть следующим образом.</span><span class="sxs-lookup"><span data-stu-id="2b91d-318">For a deployment to Azure, your Azure ACS Filter settings will look similar to the following.</span></span>
    
    ![Параметры фильтра Azure ACS для развертывания в рабочей среде][add_acs_filter_lib_production]
13. <span data-ttu-id="2b91d-320">Нажмите кнопку **Готово**, чтобы закрыть диалоговое окно **Изменить библиотеку**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-320">Click **Finish** to close the **Edit Library** dialog.</span></span>
14. <span data-ttu-id="2b91d-321">Нажмите кнопку **ОК**, чтобы закрыть диалоговое окно **Свойства MyACSHelloWorld**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-321">Click **OK** to close the **Properties for MyACSHelloWorld** dialog.</span></span>
15. <span data-ttu-id="2b91d-322">В Eclipse нажмите кнопку **Опубликовать в облаке Azure** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-322">In Eclipse, click the **Publish to Azure Cloud** button.</span></span> <span data-ttu-id="2b91d-323">На запросы отвечайте примерно так, как это сделано разделе **Развертывание приложения в Azure** статьи [Создание приложения Hello World для Azure в Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) .</span><span class="sxs-lookup"><span data-stu-id="2b91d-323">Respond to the prompts, similar as done in the **To deploy your application to Azure** section of the [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) topic.</span></span> 

<span data-ttu-id="2b91d-324">После развертывания веб-приложения закройте все открытые сеансы браузера и запустите веб-приложение. Вам будет предложено выполнить вход с учетными данными Windows Live ID, а затем произойдет отправка на URL-возврата приложения проверяющей стороны.</span><span class="sxs-lookup"><span data-stu-id="2b91d-324">After your web application has been deployed, close any open browser sessions, run your web application, and you should be prompted to sign in with Windows Live ID credentials, followed by being sent to the return URL of your relying party application.</span></span>

<span data-ttu-id="2b91d-325">После применения приложения ACS Hello World не забудьте удалить развертывание (сведения об удалении развертывания см. в статье [Создание приложения Hello World для Azure в Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx)).</span><span class="sxs-lookup"><span data-stu-id="2b91d-325">When you are done using your ACS Hello World application, remember to delete the deployment (you can learn how to delete a deployment in the [Creating a Hello World Application for Azure in Eclipse](http://msdn.microsoft.com/library/windowsazure/hh690944.aspx) topic).</span></span>

## <span data-ttu-id="2b91d-326"><a name="next_steps"></a>Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2b91d-326"><a name="next_steps"></a>Next steps</span></span>
<span data-ttu-id="2b91d-327">Сведения о языке SAML (язык разметки заявлений системы безопасности), возвращаемом службой ACS в приложение, см. в статье [Как просматривать SAML, возвращенный службой Azure Access Control][How to view SAML returned by the Azure Access Control Service].</span><span class="sxs-lookup"><span data-stu-id="2b91d-327">For an examination of the Security Assertion Markup Language (SAML) returned by ACS to your application, see [How to view SAML returned by the Azure Access Control Service][How to view SAML returned by the Azure Access Control Service].</span></span> <span data-ttu-id="2b91d-328">Чтобы продолжить изучение функций ACS и поэкспериментировать с более сложными сценариями, см. документ [Служба Access Control Service 2.0][Access Control Service 2.0].</span><span class="sxs-lookup"><span data-stu-id="2b91d-328">To further explore ACS's functionality and to experiment with more sophisticated scenarios, see [Access Control Service 2.0][Access Control Service 2.0].</span></span>

<span data-ttu-id="2b91d-329">Кроме того, в этом примере используется параметр **Внедрить сертификат в WAR-файл** .</span><span class="sxs-lookup"><span data-stu-id="2b91d-329">Also, this example used the **Embed the certificate in the WAR file** option.</span></span> <span data-ttu-id="2b91d-330">Этот параметр упрощает развертывание сертификата.</span><span class="sxs-lookup"><span data-stu-id="2b91d-330">This option makes it simple to deploy the certificate.</span></span> <span data-ttu-id="2b91d-331">Если вместо этого вы хотите подписать сертификат отдельно от WAR-файла, можно использовать следующий способ:</span><span class="sxs-lookup"><span data-stu-id="2b91d-331">If instead you want to keep your signing certificate separate from your WAR file, you can use the following technique:</span></span>

1. <span data-ttu-id="2b91d-332">В разделе **Безопасность** диалогового окна **Azure Access Control Services Filter** (Фильтр служб контроля доступа Azure) введите **${env.JAVA_HOME}/mycert.cer** и снимите флажок **Embed the certificate in the WAR file** (Встроить сертификат в WAR-файл).</span><span class="sxs-lookup"><span data-stu-id="2b91d-332">Within the **Security** section of the **Azure Access Control Services Filter** dialog, type **${env.JAVA_HOME}/mycert.cer** and uncheck **Embed the certificate in the WAR file**.</span></span> <span data-ttu-id="2b91d-333">(Если имя вашего файла сертификата отличается, настройте mycert.cer.) Нажмите кнопку **Готово**, чтобы закрыть диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="2b91d-333">(Adjust mycert.cer if your certificate file name is different.) Click **Finish** to close the dialog.</span></span>
2. <span data-ttu-id="2b91d-334">Скопируйте сертификат как компонент развертывания: в обозревателе проектов Eclipse разверните узел **MyAzureACSProject**, щелкните правой кнопкой мыши **WorkerRole1**, выберите **Свойства**, разверните узел **Azure Role** (Роль Azure) и щелкните **Компоненты**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-334">Copy the certificate as a component in your deployment: In Eclipse's Project Explorer, expand **MyAzureACSProject**, right-click **WorkerRole1**, click **Properties**, expand **Azure Role**, and click **Components**.</span></span>
3. <span data-ttu-id="2b91d-335">Щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-335">Click **Add**.</span></span>
4. <span data-ttu-id="2b91d-336">В диалоговом окне **Добавить компонент** выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="2b91d-336">Within the **Add Component** dialog:</span></span>
   
   1. <span data-ttu-id="2b91d-337">В разделе **Импорт** :</span><span class="sxs-lookup"><span data-stu-id="2b91d-337">In the **Import** section:</span></span>
      1. <span data-ttu-id="2b91d-338">С помощью кнопки **Файл** перейдите к нужному сертификату.</span><span class="sxs-lookup"><span data-stu-id="2b91d-338">Use the **File** button to navigate to the certificate you want to use.</span></span> 
      2. <span data-ttu-id="2b91d-339">Для параметра **Метод** выберите **copy**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-339">For **Method**, select **copy**.</span></span>
   2. <span data-ttu-id="2b91d-340">Для параметра **Как имя**щелкните текстовое поле и примите имя по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2b91d-340">For **As Name**, click on the text box and accept the default name.</span></span>
   3. <span data-ttu-id="2b91d-341">В разделе **Развертывание** :</span><span class="sxs-lookup"><span data-stu-id="2b91d-341">In the **Deploy** section:</span></span>
      1. <span data-ttu-id="2b91d-342">Для параметра **Метод** выберите **copy**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-342">For **Method**, select **copy**.</span></span>
      2. <span data-ttu-id="2b91d-343">Для параметра **To directory** (В каталог) введите **%JAVA_HOME%**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-343">For **To directory**, type **%JAVA_HOME%**.</span></span>
   4. <span data-ttu-id="2b91d-344">Ваше диалоговое окно **Добавить компонент** должно выглядеть следующим образом.</span><span class="sxs-lookup"><span data-stu-id="2b91d-344">Your **Add Component** dialog should look similar to the following.</span></span>
      
       ![Добавление сертификата как компонента][add_cert_component]
   5. <span data-ttu-id="2b91d-346">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="2b91d-346">Click **OK**.</span></span>

<span data-ttu-id="2b91d-347">На этом этапе ваш сертификат должен быть включен в развертывание.</span><span class="sxs-lookup"><span data-stu-id="2b91d-347">At this point, your certificate would be included in your deployment.</span></span> <span data-ttu-id="2b91d-348">Обратите внимание, что независимо от того, внедряется ли сертификат в WAR-файл или добавляется в качестве компонента в развертывание, необходимо отправить сертификат в пространство имен, как описано в разделе [Отправка сертификата в пространство имен ACS][Upload a certificate to your ACS namespace].</span><span class="sxs-lookup"><span data-stu-id="2b91d-348">Note that regardless of whether you embed the certificate in the WAR file or add it as a component to your deployment, you need to upload the certificate to your namespace as described in the [Upload a certificate to your ACS namespace][Upload a certificate to your ACS namespace] section.</span></span>

[What is ACS?]: #what-is
[Concepts]: #concepts
[Prerequisites]: #pre
[Create a Java web application]: #create-java-app
[Create an ACS Namespace]: #create-namespace
[Add Identity Providers]: #add-IP
[Add a Relying Party Application]: #add-RP
[Create Rules]: #create-rules
[Upload a certificate to your ACS namespace]: #upload-certificate
[Review the Application Integration Page]: #review-app-int
[Configure Trust between ACS and Your ASP.NET Web Application]: #config-trust
[Add the ACS Filter library to your application]: #add_acs_filter_library
[Deploy to the compute emulator]: #deploy_compute_emulator
[Deploy to Azure]: #deploy_azure
[Next steps]: #next_steps
[project website]: http://wastarterkit4java.codeplex.com/releases/view/61026
[How to view SAML returned by the Azure Access Control Service]: active-directory-java-view-saml-returned-by-access-control.md
[Access Control Service 2.0]: http://go.microsoft.com/fwlink/?LinkID=212360
[Windows Identity Foundation]: http://www.microsoft.com/download/en/details.aspx?id=17331
[Windows Identity Foundation SDK]: http://www.microsoft.com/download/en/details.aspx?id=4451
[Azure Management Portal]: https://manage.windowsazure.com
[acs_flow]: ./media/active-directory-java-authenticate-users-access-control-eclipse/ACSFlow.png

<!-- Eclipse-specific -->
[add_acs_filter_lib]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddACSFilterLibrary.png
[add_acs_filter_lib_emulator]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddACSFilterLibraryEmulator.png
[add_acs_filter_lib_production]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddACSFilterLibraryProduction.png

[relying_party_realm_emulator]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyRealmEmulator.png
[relying_party_return_url_emulator]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyReturnURLEmulator.png
[relying_party_realm_production]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyRealmProduction.png
[relying_party_return_url_production]: ./media/active-directory-java-authenticate-users-access-control-eclipse/RelyingPartyReturnURLProduction.png
[add_cert_component]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddCertificateComponent.png
[add_jsp_file_acs]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddJSPFileACS.png
[create_acs_hello_world]: ./media/active-directory-java-authenticate-users-access-control-eclipse/CreateACSHelloWorld.png
[add_token_signing_cert]: ./media/active-directory-java-authenticate-users-access-control-eclipse/AddTokenSigningCertificate.png

