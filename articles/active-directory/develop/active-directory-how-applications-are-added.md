---
title: "Как приложения добавляются в Azure AD."
description: "В этой статье описывается способ добавления приложений в экземпляр Azure Active Directory."
services: active-directory
documentationcenter: 
author: shoatman
manager: mtillman
editor: 
ms.assetid: 3321d130-f2a8-4e38-b35e-0959693f3576
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 02/09/2016
ms.author: shoatman
ms.custom: aaddev
ms.openlocfilehash: 51ef7e554b6fd3764893f0fd35464088e42e49f8
ms.sourcegitcommit: e266df9f97d04acfc4a843770fadfd8edf4fa2b7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2017
---
# <a name="how-and-why-applications-are-added-to-azure-ad"></a>Как и почему приложения добавляются в Azure AD
Одной из первоначальных проблем, сбивающих с толку при просмотре списка приложений в вашем экземпляре Azure Active Directory, является попытка ответить на вопрос, откуда поступили приложения и почему они там находятся.  В этой статье приводится общий обзор представления приложений в каталоге, а также контекст, позволяющий понять, каким образом приложение попало в каталог.

## <a name="what-services-does-azure-ad-provide-to-applications"></a>Какие службы система Azure AD предоставляет приложениям?
Приложения добавляются в Azure AD, чтобы использовать одну или несколько служб, предоставляемых данной системой.  К таким службам относятся:

* проверка подлинности и авторизация приложений;
* проверка подлинности и авторизация пользователей;
* единый вход (SSO) с помощью федерации или пароля;
* подготовка пользователей и синхронизация.
* Управление доступом на основе ролей; использование каталога для определения ролей приложения с целью выполнения проверок авторизации в приложении на основе ролей.
* Службы авторизации oAuth (используемые приложением Office 365 и другими приложениями корпорации Майкрософт для авторизации доступа к API-интерфейсам и ресурсам.)
* Публикация приложений и прокси-сервер; публикация приложения из частной сети в Интернете

## <a name="how-are-applications-represented-in-the-directory"></a>Как приложения представляются в каталоге?
Для представления приложений в Azure AD используются два объекта: объект приложения и объект субъекта-службы.  Имеются один объект приложения, зарегистрированный в каталоге home или owner либо publishing, и один или несколько объектов субъекта-службы, представляющих приложение в каждом каталоге, в котором оно действует.  

Объект приложения описывает само приложение в Azure AD (мультитенантная служба) и может включать в себя любое из следующих сведений (*обратите внимание*, что данный список не является исчерпывающим):

* Имя, логотип и издатель
* Секретные ключи (симметричные и/или асимметричные ключи, применяемые для проверки подлинности приложения)
* Зависимости API (oAuth)
* API-интерфейсы/ресурсы/опубликованные области (oAuth)
* Роли приложения (RBAC)
* Метаданные и конфигурации единого входа (SSO)
* Метаданные и конфигурация для подготовки пользователя
* Метаданные и конфигурация прокси-сервера

Субъект-служба — это запись приложения в каждом каталоге, где оно действует, включая его домашний каталог.  Субъект-служба:

* ссылается на объект приложения через свойство идентификатора приложения;
* регистрирует назначения для локальных пользователей и ролей приложения в группе;
* регистрирует разрешения для локальных пользователей и администраторов, предоставленные приложению.
  * Например, разрешение для приложения на доступ к электронной почте конкретного пользователя
* регистрирует локальные политики, включая политику условного доступа;
* регистрирует запасные локальные параметры для приложения;
  * утверждает правила преобразования.
  * Сопоставление атрибутов (подготовка пользователей)
  * Специфические для клиента роли приложения (если приложение поддерживает настраиваемые роли)
  * Имя или логотип

### <a name="a-diagram-of-application-objects-and-service-principals-across-directories"></a>Схема объектов приложения и субъектов-служб в каталогах
![Схема, на которой показаны объекты приложения и субъекты-службы, существующие в экземплярах Azure AD.][apps_service_principals_directory]

Как видно из предыдущей схемы.  Корпорация Microsoft поддерживает два внутренних каталога (слева), которые используются компанией для публикации приложений.

* Один служит для приложений Microsoft (каталог служб Microsoft)
* Другой — для предварительно интегрированных сторонних приложений (каталог коллекции приложений)

Издатели и поставщики приложений, которые интегрируются с Azure AD, должны иметь каталог публикации.  (Каталог SAAS).

Самостоятельно можно добавлять следующие приложения:

* приложения, которые вы разработали (интегрировали с AAD);
* приложения, которые вы подключили для единого входа;
* приложения, которые вы опубликовали с помощью прокси-сервера  приложений Azure AD.

### <a name="a-couple-of-notes-and-exceptions"></a>Несколько примечаний и исключений
* Не все субъекты-службы указывают на объекты приложения.  Правда? Когда была первоначально создана система Azure AD, количество служб, предоставляемых приложений, было небольшим, и имени субъекта-службы было достаточно для установления удостоверения приложения.  По своей форме первоначальный субъект-служба был похож на учетную запись службы Windows Server Active Directory.  Поэтому субъекты-службы можно по-прежнему создавать с помощью Azure AD PowerShell без предварительного создания объекта приложения.  Перед созданием субъекта-службы интерфейсу Graph API требуется объект приложения.
* В настоящее время не все приведенные выше сведения предоставляются программно.  Ниже перечислены только сведения, доступные в пользовательском интерфейсе:
  * утверждает правила преобразования.
  * Сопоставление атрибутов (подготовка пользователей)
* Более подробные сведения об объектах участника-службы и приложений см. в справочной документации по Azure AD Graph REST API.  *Совет*: документация по API Graph Azure AD — это наиболее полезный источник данных о схемах для Azure AD, доступный в настоящее время.  
  * [Приложения](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#application-entity)
  * [Субъект-служба](https://msdn.microsoft.com/library/azure/ad/graph/api/entity-and-complex-type-reference#serviceprincipal-entity)

## <a name="how-are-apps-added-to-my-azure-ad-instance"></a>Как приложения добавляются в мой экземпляр Azure AD?
Для добавления приложений в Azure AD можно использовать различные способы.

* Добавление приложения из [коллекции приложений в Azure Active Directory](https://azure.microsoft.com/updates/azure-active-directory-over-1000-apps/)
* Регистрация/вход в стороннее приложение, интегрированное с Azure Active Directory (например: [Smartsheet](https://app.smartsheet.com/b/home) или [DocuSign](https://www.docusign.net/member/MemberLogin.aspx))
  * Во время регистрации/входа пользователям предлагается предоставлять приложению разрешение на право доступа к своему профилю и прочие разрешения.  Когда первый пользователь дает свое согласие, субъект-служба, которая представляет приложение, добавляется в каталог.
* Регистрация/вход в веб-службы Microsoft, например, [Office 365](http://products.office.com/)
  * Когда вы подписываетесь на Office 365 или начинаете работать с пробной версией, в каталоге создается один или несколько субъектов-служб, которые представляют различные службы, используемые для предоставления всех возможностей, связанных с Office 365.
  * Некоторые службы Office 365, например SharePoint, создают субъекты-службы на постоянной основе, чтобы обеспечивать безопасное взаимодействие между компонентами, включая рабочие процессы.
* При добавлении приложения, которое вы разрабатываете на портале управления Azure, см. https://msdn.microsoft.com/library/azure/dn132599.aspx.
* При добавлении приложения, которое вы разрабатываете с помощью Visual Studio, см.
  * [Методы проверки подлинности ASP.Net](http://www.asp.net/visual-studio/overview/2013/creating-web-projects-in-visual-studio#orgauthoptions)
  * [Подключенные службы](http://blogs.msdn.com/b/visualstudio/archive/2014/11/19/connecting-to-cloud-services.aspx)
* Добавление приложения для использования [прокси-сервера приложений Azure AD](https://msdn.microsoft.com/library/azure/dn768219.aspx)
* Подключение приложения для единого входа в систему с помощью SAML или пароля
* К другим методам относятся различные возможности разработки в Azure и обозревателе API-интерфейсов в центрах разработчиков

## <a name="who-has-permission-to-add-applications-to-my-azure-ad-instance"></a>Кто имеет право добавлять приложения в мой экземпляр Azure AD?
Только глобальные администраторы могут:

* добавлять приложения из коллекции приложений Azure AD (предварительно интегрированные сторонние приложения);
* публиковать приложения с помощью прокси-сервера приложений Azure AD.

Все пользователи в каталоге имеют право добавлять приложения, которые они разрабатывают, и указывать, какие приложения они совместно используют или предоставляют доступ к их данным.  *Помните, что регистрация или вход пользователя в приложение и предоставление разрешений могут привести к созданию субъекта-службы.*

Всегда помните следующее.

* В течение многих лет приложения могли использовать Windows Server Active Directory для проверки подлинности пользователей и не требовали регистрации приложения или его записи в каталоге.  Теперь организациям будет четко видно, сколько приложений используют каталог и в каких целях.
* Управляемый администраторами процесс публикации/регистрации приложений не требуется.  В случае со службами федерации Active Directory существовала определенная вероятность, что администратор должен был добавлять приложение в качестве проверяющей стороны от имени разработчиков.  Теперь разработчики могут все делать сами.
* Очень удобно, когда пользователи могут входить в приложения или подписываться на них с помощью своих учетных записей организации для выполнения бизнес-задач.  Если впоследствии они покидают организацию, то они теряют доступ к своим учетным записям в приложении, которое они ранее использовали.
* Очень удобно записывать (фиксировать) данные, к которым был организован общий доступ, а также приложение, которое применялось для этого.  Данные сегодня стали еще более переносимыми, и очень удобно (фиксировать) данные, к которым был организован общий доступ, а также приложение, которое применялось для этого.
* Приложения, которые используют Azure AD для процесса oAuth, точно указывают разрешения, которые пользователи могут предоставлять приложениям, а также разрешения, для выдачи которых требуется согласие администратора.  Не стоит забывать о том, что только администраторы могут давать согласие на более крупные области, а также предоставлять более значимые разрешения.
* Операции пользователей по добавлению приложений и предоставления им права на доступ к данным подлежат аудиту, поэтому вы можете просматривать отчеты об аудите на портале управления Azure, чтобы определить, каким образом приложение было добавлено в каталог.

**Примечание:** *в самой корпорации Майкрософт конфигурация по умолчанию применяется уже в течение нескольких месяцев.*

Благодаря вышеизложенному посредством изменения конфигурации каталога на портале управления Azure пользователям в вашем каталоге можно запрещать добавлять приложения и указывать, какими сведениями они могут обмениваться с приложениями.  На вкладке «Настройка» в вашем каталоге на портале управления Azure можно получить доступ к следующей конфигурации.

![Снимок экрана пользовательского интерфейса для настройки параметров интегрированного приложения][app_settings]

<!--Every topic should have next steps and links to the next logical set of content to keep the customer engaged-->
## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о добавлении приложений в Azure AD и настройке служб для приложений.

* Разработчики: [Как интегрировать приложение с AAD](https://msdn.microsoft.com/library/azure/dn151122.aspx)
* Разработчики: [Просмотр примеров кода для приложений, интегрированных с Azure Active Directory, на сайте GitHub](https://github.com/AzureADSamples).
* Разработчики и ИТ-специалисты: [Просмотр документации по REST API для Azure Active Directory Graph API](https://msdn.microsoft.com/library/azure/hh974478.aspx)
* ИТ-специалисты: [Использование приложений, предварительно интегрированных с Azure Active Directory, из коллекции приложений](https://msdn.microsoft.com/library/azure/dn308590.aspx)
* ИТ-специалисты: [Учебники для настройки предварительно интегрированных приложений](https://msdn.microsoft.com/library/azure/dn893637.aspx)
* ИТ-специалисты: [Публикация приложения с помощью прокси-сервера приложений Azure Active Directory](https://msdn.microsoft.com/library/azure/dn768219.aspx)

## <a name="see-also"></a>См. также
* [Указатель статьей по управлению приложениями в Azure Active Directory](../active-directory-apps-index.md)

<!--Image references-->
[apps_service_principals_directory]:../media/active-directory-how-applications-are-added/HowAppsAreAddedToAAD.jpg
[app_settings]:../media/active-directory-how-applications-are-added/IntegratedAppSettings.jpg
