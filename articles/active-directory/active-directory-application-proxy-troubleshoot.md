---
title: "Прокси приложения aaaTroubleshoot | Документы Microsoft"
description: "Рассматриваются как ошибки tootroubleshoot в прокси приложения Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 970caafb-40b8-483c-bb46-c8b032a4fb74
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/21/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017; it-pro
ms.openlocfilehash: d426708a2ee32da6674987b5794602ed984b06b3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-application-proxy-problems-and-error-messages"></a>Устранение неполадок и сообщения об ошибках прокси приложения
В случае возникновения ошибки при доступе к опубликованному приложению или публикации приложений, проверьте следующие параметры toosee при правильной работе прокси приложения Microsoft Azure AD hello:

* Службы Windows hello, откройте консоль и убедитесь, что hello **Microsoft AAD Application Proxy Connector** включена и запущена. Вы также можете toolook на страницу свойств службы прокси приложения hello, как показано в hello после изображения:  
  ![Снимок экрана свойств соединителя прокси-сервера приложений Microsoft AAD](./media/active-directory-application-proxy-troubleshoot/connectorproperties.png)
* Откройте средство просмотра событий и найдите события для соединителя прокси приложения в узле **Журналы приложений и служб** > **Microsoft** > **AadApplicationProxy** > **Соединитель** > **Администратор**.
* При необходимости по доступны более подробные журналы [Включение hello Журналы сеансов соединитель прокси приложения](application-proxy-understand-connectors.md#under-the-hood).

Дополнительные сведения о средством устранения неполадок hello Azure AD см. в разделе [устранения неполадок сети предварительные требования соединителя toovalidate средство](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/03/troubleshooting-tool-to-validate-connector-networking-prerequisites).

## <a name="hello-page-is-not-rendered-correctly"></a>Страница приветствия, отображается неправильно
Даже если вы не получаете сообщения о конкретных ошибках, все равно возможны проблемы с отображением или работой приложения. Это может произойти, если вы опубликовали путь к статье hello, но приложение hello требуется содержимое, которое существует вне этого пути.

Например приложение hello вызывает изображений в https://yourapp/media публикации https://yourapp/app путь hello, они не будут отображены. Убедитесь в том, что публикация с использованием уровня пути с наивысшим hello необходимо tooinclude все соответствующее содержимое приложения hello. В этом примере путь должен быть таким: http://yourapp/.

Если изменить путь tooinclude ссылки на содержимое, но все еще нуждаются пользователи tooland глубже ссылку в путь hello, см. hello блога [параметр hello правая ссылка для приложений прокси приложения в панели доступа hello Azure AD и Office 365 приложения средство запуска](https://blogs.technet.microsoft.com/applicationproxyblog/2016/04/06/setting-the-right-link-for-application-proxy-applications-in-the-azure-ad-access-panel-and-office-365-app-launcher/).

## <a name="connector-errors"></a>Ошибки соединителя

Используйте hello [Azure средство тестирования порты соединителя AD приложения прокси](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify, что соединитель доступ службы прокси приложения hello. Как минимум убедитесь, что у всех зеленой галочки области центральной части США hello и tooyou ближайший регион hello. Учитывайте также, что большее число зеленых флажков означает большую устойчивость. 

Если происходит ошибка регистрации во время установки мастера создания соединителя hello, существует два способа tooview hello причину hello. Либо см. в журнале событий hello **приложений и служб Logs\Microsoft\AadApplicationProxy\Connector\Admin**, или выполнения hello следующую команду Windows PowerShell:

    Get-EventLog application –source “Microsoft AAD Application Proxy Connector” –EntryType “Error” –Newest 1

После обнаружения ошибки hello соединителя из журнала событий hello, используйте эту таблицу распространенные проблемы hello tooresolve ошибки:

| Ошибка | Рекомендуемые действия |
| ----- | ----------------- |
| Не удалось зарегистрировать соединитель: Убедитесь, что включен прокси приложения в hello портала управления Azure и что вы ввели имя пользователя Active Directory и пароль неправильно. Ошибка: "Произошла одна или несколько ошибок". | Если закрыть окно регистрации hello не входя в tooAzure AD, снова запустите мастер создания соединителя hello и зарегистрируйте соединитель hello. <br><br> Если hello окно регистрации открывается и сразу же закрывается, не позволяя toolog в, возможно, возникнет эта ошибка. Эта ошибка возникает при ошибках сетевого подключения в системе. Убедитесь, что ее возможные tooconnect из браузера tooa общедоступный веб-сайт и что открыты порты hello согласно [необходимые условия для прокси-сервера приложения](active-directory-application-proxy-enable.md). |
| Об ошибке выводится в окне регистрации hello. Продолжение невозможно. | Если эта ошибка появляется, и затем закрывает окно приветствия, вы ввели hello неправильное имя пользователя или пароль. Повторите попытку. |
| Не удалось зарегистрировать соединитель: Убедитесь, что включен прокси приложения в hello портала управления Azure и что вы ввели имя пользователя Active Directory и пароль неправильно. Ошибка: "AADSTS50059: сведения, идентифицирующие клиента не найден в любом запросе hello или подразумевается ни одной предоставляемые учетные данные и выполнить поиск по службе сбой основной URI. | Вы пытаетесь toosign в с использованием учетной записи Майкрософт и не в домен, который является частью идентификатора организации hello hello каталога, которому вы пытаетесь tooaccess. Убедитесь, что Здравствуйте, администратор входит в состав hello же имени домена домен клиента hello, например, если hello Azure AD домена contoso.com, Здравствуйте, администратор будет admin@contoso.com. |
| Не удалось выполнить tooretrieve hello текущую политику выполнения для запуска сценариев PowerShell. | Если hello Установка соединителя завершается ошибкой, проверьте toomake том, что политика выполнения PowerShell не отключена. <br><br>1. Здравствуйте, откройте редактор групповой политики.<br>2. Go слишком**Конфигурация компьютера** > **административные шаблоны** > **компоненты Windows**  >   **Windows PowerShell** и дважды щелкните **Turn on Script Execution**.<br>3. политика выполнения hello можно задать tooeither **не настроен** или **включено**. Если задать слишком**включено**, убедитесь, что в параметрах, hello политика выполнения установлено tooeither **разрешать выполнение локальных сценариев и подписанных удаленных сценариев** или слишком**разрешать выполнение всех сценариев**. |
| Соединитель не удалось toodownload hello конфигурации. | истек срок действия сертификата клиента Hello соединителя, который используется для проверки подлинности. Это также может произойти при наличии hello установлен соединитель через прокси. В этом случае приветствия соединителя невозможно получить доступ к Интернету hello и не будет возможности tooprovide приложений tooremote пользователей. Обновите доверительные отношения вручную с помощью hello `Register-AppProxyConnector` в Windows PowerShell. Если соединитель работает через прокси, это необходимые toogrant доступа toohello соединитель учетные записи в Интернете «сетевые службы» и «локальная система». Это можно сделать путем предоставления им доступа toohello прокси-сервера или задав их toobypass hello прокси-сервера. |
| Не удалось зарегистрировать соединитель: Убедитесь, что вы являетесь глобальным администратором для вашей hello tooregister Active Directory Connector. Ошибка: «hello запрос на регистрацию был отклонен». | Hello псевдоним, который вы пытаетесь toolog в систему, не является администратором в данном домене. Соединитель всегда устанавливается для каталога hello, которому принадлежит домен пользователя hello. Убедитесь, что наличие клиента Azure AD toohello глобальные разрешения учетной записи администратора hello, которому вы пытаетесь toosign в с. |

## <a name="kerberos-errors"></a>Ошибки Kerberos

В этой таблице описаны hello наиболее распространенных ошибок, которые берутся из Установка и настройка Kerberos и предложения для разрешения.

| Ошибка | Рекомендуемые действия |
| ----- | ----------------- |
| Не удалось выполнить tooretrieve hello текущую политику выполнения для запуска сценариев PowerShell. | Если hello Установка соединителя завершается ошибкой, проверьте toomake том, что политика выполнения PowerShell не отключена.<br><br>1. Здравствуйте, откройте редактор групповой политики.<br>2. Go слишком**Конфигурация компьютера** > **административные шаблоны** > **компоненты Windows**  >   **Windows PowerShell** и дважды щелкните **Turn on Script Execution**.<br>3. политика выполнения hello можно задать tooeither **не настроен** или **включено**. Если задать слишком**включено**, убедитесь, что в параметрах, hello политика выполнения установлено tooeither **разрешать выполнение локальных сценариев и подписанных удаленных сценариев** или слишком**разрешать выполнение всех сценариев**. |
| 12008 — azure AD превышено hello максимальное число разрешенных проверки подлинности Kerberos попыток toohello внутреннему серверу. | Эта ошибка может указывать на неправильную конфигурацию между Azure AD и hello внутреннего сервера приложений или проблему настройки даты и времени на обеих машинах. Hello внутренний сервер отклонил билет Kerberos hello, созданный Azure AD. Убедитесь, что Azure AD и правильность настройки hello внутреннего сервера приложений. Убедитесь, что синхронизация hello настройки даты и времени на hello Azure AD и hello внутреннего сервера приложений. |
| 13016 — azure AD не может получить билет Kerberos от имени пользователя hello, из-за UPN отсутствует в hello edge маркера или в файле cookie доступа hello. | Существует проблема с конфигурацией STS hello. Исправьте конфигурации hello утверждения UPN в hello STS. |
| 13019 — azure AD не может получить билет Kerberos, от имени пользователя hello из-за следующих общих ошибок API hello. | Это событие может указывать на неправильную конфигурацию между Azure AD и контроллер домена hello, или проблему настройки даты и времени на обеих машинах. Hello контроллер домена отклонил билет Kerberos hello, созданный Azure AD. Убедитесь, что Azure AD и внутреннего сервера приложений hello настроены правильно, особенно hello имени участника-службы конфигурации. Убедитесь, что hello Azure AD toohello домену того же домена как hello tooensure контроллера домена, Здравствуйте, контроллер домена устанавливает доверие с Azure AD. Убедитесь, что синхронизация hello настройки даты и времени на hello Azure AD и контроллер домена hello. |
| 13020 — azure AD не может получить билет Kerberos от имени пользователя hello, поскольку SPN внутреннего сервера hello не определен. | Это событие может указывать на неправильную конфигурацию между Azure AD и контроллер домена hello, или проблему настройки даты и времени на обеих машинах. Hello контроллер домена отклонил билет Kerberos hello, созданный Azure AD. Убедитесь, что Azure AD и внутреннего сервера приложений hello настроены правильно, особенно hello имени участника-службы конфигурации. Убедитесь, что hello Azure AD toohello домену того же домена как hello tooensure контроллера домена, Здравствуйте, контроллер домена устанавливает доверие с Azure AD. Убедитесь, что синхронизация hello настройки даты и времени на hello Azure AD и контроллер домена hello. |
| 13022 — azure AD не может проверить подлинность пользователя hello, поскольку hello внутренний сервер отвечает tooKerberos попыток проверки подлинности с ошибкой HTTP 401. | Это событие может указывать на неправильную конфигурацию между Azure AD и hello внутреннего сервера приложений или проблему настройки даты и времени на обеих машинах. Hello внутренний сервер отклонил билет Kerberos hello, созданный Azure AD. Убедитесь, что Azure AD и правильность настройки hello внутреннего сервера приложений. Убедитесь, что синхронизация hello настройки даты и времени на hello Azure AD и hello внутреннего сервера приложений. |

## <a name="end-user-errors"></a>Ошибки пользователей

Далее приведены ошибки, которые конечные пользователи могут возникнуть при их повторите tooaccess приложение hello и ошибкой. 

| Ошибка | Рекомендуемые действия |
| ----- | ----------------- |
| Hello веб-сайта не удается отобразить страницу приветствия. | Пользователь может получить эту ошибку при попытке tooaccess hello опубликованному вами приложению, если приложение hello является приложением IWA. Hello определенных имени участника-службы для этого приложения может быть неправильным. Для приложений IWA убедитесь, что указано правильно, hello SPN, сконфигурированный для этого приложения. |
| Hello веб-сайта не удается отобразить страницу приветствия. | Пользователь может получить эту ошибку при попытке tooaccess hello опубликованному вами приложению, если приложение hello является приложением OWA. Это может быть вызвано одно из следующих hello:<br><li>Hello определено имя участника-службы для приложения указан неправильный. Убедитесь, что указано правильно, hello SPN, сконфигурированный для этого приложения.</li><li>пользователь Hello пытался приложения hello tooaccess используется учетная запись Майкрософт, а не hello toosign соответствующей корпоративной учетной записи в или hello пользователь является гостем. Убедитесь, что hello пользователь входит с помощью своей корпоративной учетной записи, что соответствует hello домен hello опубликованное приложение. Пользователи учетных записей Майкрософт и гости не могут получить доступ к приложениям IWA.</li><li>пользователь Hello пытался приложения hello tooaccess неправильно определена для данного приложения на локальной стороне hello. Убедитесь, что этот пользователь имеет соответствующие разрешения hello в соответствии с внутренним приложением на hello на локальном компьютере. |
| К этому корпоративному приложению нет доступа. Вы — это не авторизовано tooaccess этого приложения. Ошибка авторизации. Сделать убедиться, что пользователь hello tooassign с toothis приложения access. | Пользователи Данная ошибка может возникать при попытке tooaccess hello опубликованному вами приложению, если они используют учетные записи Майкрософт вместо их toosign корпоративной учетной записи в. Также эта ошибка возникает при входе с помощью гостевой учетной записи. Пользователи учетных записей Майкрософт и гости не могут получить доступ к приложениям IWA. Убедитесь, что hello пользователь входит с помощью своей корпоративной учетной записи, что соответствует hello домен hello опубликованное приложение.<br><br>Вы не назначили hello пользователя для этого приложения. Go toohello **приложения** вкладку и в разделе **пользователей и групп**, назначьте этого пользователя или приложения toothis группы пользователей. |
| Доступ к этому корпоративному приложению невозможно получить прямо сейчас. Повторите попытку позже... hello соединителя истекло время ожидания. | Пользователи могут получить эту ошибку, при попытке tooaccess hello опубликованному вами приложению, если они заданы неверно для этого приложения на локальной стороне hello. Убедитесь, что пользователи имеют соответствующие разрешения hello в соответствии с внутренним приложением на hello на локальном компьютере. |
| К этому корпоративному приложению нет доступа. Вы — это не авторизовано tooaccess этого приложения. Ошибка авторизации. Убедитесь, что этот пользователь hello имеет лицензию для Azure Active Directory Premium или Basic. | Пользователи могут получить эту ошибку, при попытке tooaccess hello опубликованному вами приложению, если они не были назначены явно с лицензией Premium или Basic администратором подписчика hello. Go Active Directory подписчика toohello **лицензий** вкладку и убедитесь в том, что этого пользователя или группы пользователей назначены лицензии Premium или Basic. |

## <a name="my-error-wasnt-listed-here"></a>Моей ошибки здесь нет

При возникновении ошибки или проблемы с прокси приложения Azure AD, не указанного в этом руководстве по устранению неполадок, мы хотели бы toohear о нем. Отправить по электронной почте tooour [отзывы команды](mailto:aadapfeedback@microsoft.com) с подробными сведениями hello возникли ошибки hello.

## <a name="see-also"></a>См. также
* [Включение прокси приложения Azure AD](active-directory-application-proxy-enable.md)
* [Опубликуйте приложения с помощью прокси-сервера приложений.](active-directory-application-proxy-publish.md)
* [Доступ с единым входом](active-directory-application-proxy-sso-using-kcd.md)
* [Включение условного доступа](active-directory-application-proxy-conditional-access.md)


<!--Image references-->
[1]: ./media/active-directory-application-proxy-troubleshoot/connectorproperties.png
[2]: ./media/active-directory-application-proxy-troubleshoot/sessionlog.png
