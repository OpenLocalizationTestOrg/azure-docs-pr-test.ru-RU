---
title: "aaaWriting выражения для сопоставления атрибутов в Azure Active Directory | Документы Microsoft"
description: "Узнайте, как атрибут tootransform сопоставления toouse выражения значений в приемлемом формате во время автоматической подготовки объектов приложения SaaS в Azure Active Directory."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
ms.assetid: b13c51cd-1bea-4e5e-9791-5d951a518943
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/06/2017
ms.author: markvi
ms.openlocfilehash: caa0dd8144f6e5279a869e015ed75bd24169d585
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="writing-expressions-for-attribute-mappings-in-azure-active-directory"></a>Запись выражений для сопоставления атрибутов в Azure Active Directory
При настройке приложения SaaS подготовки tooa один из типов сопоставлений атрибутов, которые можно указать hello является сопоставление выражений. В этом случае вам необходимо написать сценарий как выражение, которое позволяет вам tootransform данные пользователей в формат, более подходящий для приложения SaaS hello.

## <a name="syntax-overview"></a>Общие сведения о синтаксисе
Hello синтаксис выражений для сопоставления атрибутов близок к Visual Basic для приложений (VBA) функции.

* Hello все выражение должно определяться функциями, которые состоят из имени, с аргументами в круглые скобки: <br>
  *Имя_функции(<< аргумент 1 >>, <<argument N>>)*
* Функции можно вкладывать одну в другую. Например: <br> *Функция1(функция2(<<argument1>>))*
* В функцию можно передавать следующие три типа аргументов.
  
  1. Атрибуты, которые должны быть заключены в квадратные скобки. Например: [имя_атрибута].
  2. Строковые константы, которые должны быть заключены в двойные кавычки. Например: "США".
  3. Другие функции. Например: функция_один(<<argument1>>, функция_два(<<argument2>>)).
* Строковая константа Если требуется обратная косая черта (\) или знак кавычек ("") в строке приветствия, ее следует экранировать hello символ обратной косой черты (\). Например: "Название компании: \"Contoso\"".

## <a name="list-of-functions"></a>Список функций
[Добавить](#append) &nbsp;&nbsp;&nbsp;&nbsp; [FormatDateTime](#formatdatetime) &nbsp;&nbsp;&nbsp;&nbsp; [Join](#join) &nbsp;&nbsp;&nbsp;&nbsp; [Mid](#mid) &nbsp;&nbsp;&nbsp;&nbsp; [Not](#not) &nbsp;&nbsp;&nbsp;&nbsp; [Замените](#replace) &nbsp;&nbsp;&nbsp;&nbsp; [StripSpaces](#stripspaces) &nbsp;&nbsp;&nbsp;&nbsp; [Switch](#switch)

- - -
### <a name="append"></a>Добавить
**Функция:**<br> Append(source, suffix)

**Описание.**<br> Принимает строковое значение источника и добавляет hello суффикс toohello конец.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Строка |Как правило, имя атрибута hello из исходного объекта hello |
| **суффикс** |Обязательно |Строка |строку Hello, что нужно tooappend toohello конец hello исходного значения. |

- - -
### <a name="formatdatetime"></a>FormatDateTime
**Функция:**<br> FormatDateTime(source, inputFormat, outputFormat)

**Описание.**<br> Преобразовывает строку даты из одного формата в другой.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Строка |Обычно — имя атрибута hello из hello объекта источника. |
| **входной_формат** |Обязательно |Строка |Ожидаемый формат hello исходного значения. Список поддерживаемых форматов см. на странице [http://msdn.microsoft.com/library/8kb3ddd4%28v=vs.110%29.aspx](http://msdn.microsoft.com/library/8kb3ddd4%28v=vs.110%29.aspx). |
| **выходной_формат** |Обязательно |Строка |Формат вывода даты hello. |

- - -
### <a name="join"></a>Объединение
**Функция:**<br> Join(separator, source1, source2, …)

**Описание.**<br> Функция JOIN() действует аналогично tooAppend(), за исключением того, что он может объединять несколько **источника** строковых значений в одну строку, а каждое значение будет разделяться **разделителя** строки.

Если один из исходных значений hello является атрибутом с несколькими значениями, каждое значение этого атрибута будет значение разделителя hello соединенных друг с другом, разделенных запятыми.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **разделитель** |Обязательно |Строка |Строка используется tooseparate исходных значений, когда они объединяются в одну строку. Если разделитель не требуется, может не иметь значения (""). |
| **source1  … sourceN ** |Обязательно, количество повторов может меняться |Строка |Объединить toobe значения строки. |

- - -
### <a name="mid"></a>Mid
**Функция:**<br> Mid(source, start, length)

**Описание.**<br> Возвращает подстроку исходного значения hello. Подстрока — строка, содержащая только некоторые hello символов из строки источника hello.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Строка |Как правило, имя атрибута hello. |
| **start** |Обязательно |целое число |Индекс в hello **источника** строка положения начала подстроки. Первый символ в строку hello будет индекс 1, второй символ будут иметь индекс 2 и т. д. |
| **длина** |Обязательно |целое число |Длина подстроки hello. Если длина оканчивается вне hello **источника** строку, функция возвратит подстроку из **запустить** индекса до конца **источника** строки. |

- - -
### <a name="not"></a>not
**Функция:**<br> Not(источник)

**Описание.**<br> Отражение hello логическое значение hello **источника**. Если значение **source** равно *True*, возвращается значение *False*. В противном случае возвращает значение*True*.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Логическая строка |Предполагаемые значения **source** : True или False. |

- - -
### <a name="replace"></a>Замените
**Функция:**<br> ObsoleteReplace(source, oldValue, regexPattern, regexGroupName, replacementValue, replacementAttributeName, template)

**Описание.**<br>
Заменяет значения в пределах строки. Он работает по-разному в зависимости от параметров hello предоставлено:

* Если указаны параметры **oldValue** и **replacementValue**:
  
  * Заменяет все вхождения oldValue hello источника Заменяющее_значение
* Если указаны параметры **oldValue** и **template**:
  
  * Заменяет все вхождения hello **oldValue** в hello **шаблона** с hello **источника** значение
* Если указаны параметры **oldValueRegexPattern**, **oldValueRegexGroupName**, **replacementValue**:
  
  * Заменяет все значения, совпадающие Шаблон_регулярного_выражения_старого_значения в hello исходная строка с Заменяющее_значение
* Если указаны параметры **oldValueRegexPattern**, **oldValueRegexGroupName**, **replacementPropertyName**:
  
  * Если **source** имеет значение, возвращает **source**.
  * Если **источника** не имеет значения, использует **Шаблон_регулярного_выражения_старого_значения** и **Имя_группы_регулярного_выражения_старого_значения** tooextract заменяющего значения из свойства hello с  **Имя_свойства_замены**. Замещающее значение возвращается в виде результата hello

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Строка |Обычно — имя атрибута hello из hello объекта источника. |
| **старое_значение** |Необязательно |Строка |Значение в заменены toobe **источника** или **шаблона**. |
| **шаблон_регулярного_выражения** |Необязательно |Строка |Шаблон регулярного выражения для toobe значение hello в заменены **источника**. Или, если используется Имя_свойства_замены, tooextract значение из свойства замены шаблона. |
| **имя_группы_регулярного_выражения** |Необязательно |Строка |Имя группы hello внутри **шаблона регулярного выражения**. Значение этой группы будет извлечено из свойства замены как значение замены, только если используется имя свойства замены. |
| **значение_замены** |Необязательно |Строка |Tooreplace значение старый, новый с. |
| **имя_атрибута_замены** |Необязательно |Строка |Имя атрибута toobe hello, используемый для заменяющего значения, если источник не имеет значения. |
| **шаблон** |Необязательно |Строка |Когда **шаблона** указано значение, мы будем искать **oldValue** внутри шаблона hello и замените его исходное значение. |

- - -
### <a name="stripspaces"></a>StripSpaces
**Функция:**<br> StripSpaces(source)

**Описание.**<br> Удаляет все пробелы (» «) строку символов из hello с источником.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Строка |**источник** tooupdate значение. |

- - -
### <a name="switch"></a>Switch
**Функция:**<br> Switch(source, defaultValue, key1, value1, key2, value2, …)

**Описание.**<br> Если значение **source** соответствует **key**, возвращается **value** для этого параметра **key**. Если значение **source** не соответствует ни одному параметру, то возвращается **defaultValue**.  Параметры **key** и **value** должны всегда быть парными. функция Hello всегда ожидает четное число параметров.

**Параметры:**<br> 

| Имя | Обязательно/повторяется | Тип | Примечания |
| --- | --- | --- | --- |
| **источник** |Обязательно |Строка |**Источник** tooupdate значение. |
| **defaultValue** |Необязательно |Строка |Toobe значение по умолчанию используется, если источник не совпадает ни с одним ключом. Может быть пустой строкой (""). |
| **key** |Обязательно |Строка |**Ключ** toocompare **источника** значение с. |
| **значение** |Обязательно |Строка |Замещающее значение для hello **источника** соответствующий ключ hello. |

## <a name="examples"></a>Примеры
### <a name="strip-known-domain-name"></a>Извлечение известного доменного имени
Необходимо toostrip известное доменное имя из tooobtain электронной почты пользователя имя пользователя. <br>
Например если домен hello «contoso.com», может использовать hello, следующее выражение:

**Выражение:** <br>
`Replace([mail], "@contoso.com", , ,"", ,)`

**Пример ввода и вывода:** <br>

* **Входные данные** (mail): "john.doe@contoso.com"
* **Выходные данные**: john.doe

### <a name="append-constant-suffix-toouser-name"></a>Добавление постоянный суффикс имени toouser
При использовании Salesforce Sandbox может потребоваться дополнительный суффикс tooall tooappend именам пользователей перед их синхронизацией.

**Выражение:** <br>
`Append([userPrincipalName], ".test"))`

**Пример ввода и вывода:** <br>

* **Входные данные**: (userPrincipalName): "John.Doe@contoso.com"
* **Выходные данные**: "John.Doe@contoso.com.test"

### <a name="generate-user-alias-by-concatenating-parts-of-first-and-last-name"></a>Создание псевдонима пользователя путем сцепления частей имени и фамилии
Необходимо toogenerate псевдоним пользователя, используя первые три буквы имени пользователя и первые пять букв фамилии пользователя.

**Выражение:** <br>
`Append(Mid([givenName], 1, 3), Mid([surname], 1, 5))`

**Пример ввода и вывода:** <br>

* **ВВОД** : (givenName): "John"
* **ВВОД** : (surname): "Doe"
* **Выходные данные**: "JohDoe"

### <a name="output-date-as-a-string-in-a-certain-format"></a>Вывод даты в виде строки в определенном формате
Требуется приложение SaaS tooa toosend дат в определенном формате. <br>
Например можно tooformat даты для ServiceNow.

**Выражение:** <br>

`FormatDateTime([extensionAttribute1], "yyyyMMddHHmmss.fZ", "yyyy-MM-dd")`

**Пример ввода и вывода:**

* **ВВОД** : (extensionAttribute1): "20150123105347.1Z"
* **Выходные данные**: "2015-01-23"

### <a name="replace-a-value-based-on-predefined-set-of-options"></a>Замена значения на основе предопределенного набора параметров
Необходимо toodefine hello часовой пояс пользователя hello в зависимости от кода hello состояния, сохраненного в Azure AD. <br>
Если код состояния hello не соответствует ни одному из hello предопределенные параметры, используйте значение по умолчанию «Australia/Sydney».

**Выражение:** <br>

`Switch([state], "Australia/Sydney", "NSW", "Australia/Sydney","QLD", "Australia/Brisbane", "SA", "Australia/Adelaide")`

**Пример ввода и вывода:**

* **ВВОД** : (state): "QLD"
* **ВЫВОД**: "Australia/Brisbane"

## <a name="related-articles"></a>Связанные статьи
* [Указатель статьей по управлению приложениями в Azure Active Directory](active-directory-apps-index.md)
* [Автоматизация пользователя подготовки и отзыва tooSaaS приложений](active-directory-saas-app-provisioning.md)
* [Настройка сопоставления атрибутов для подготовки пользователей](active-directory-saas-customizing-attribute-mappings.md)
* [Фильтры области для подготовки пользователей](active-directory-saas-scoping-filters.md)
* [С помощью SCIM tooenable автоматическую подготовку пользователей и групп из Azure Active Directory tooapplications](active-directory-scim-provisioning.md)
* [Уведомления о подготовке учетных записей](active-directory-saas-account-provisioning-notifications.md)
* [Список учебников по tooIntegrate приложений SaaS](active-directory-saas-tutorial-list.md)

