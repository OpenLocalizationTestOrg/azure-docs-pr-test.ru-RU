---
title: "Автоматическая подготовка пользователей для приложения SaaS в Azure AD | Документы Майкрософт"
description: "Общие сведения об использовании Azure AD для автоматической подготовки, отзыва и постоянного обновления учетных записей пользователей в нескольких приложениях SaaS сторонних разработчиков."
services: active-directory
documentationcenter: 
author: asmalser-msft
manager: mtillman
editor: 
ms.assetid: 58c5fa2d-bb33-4fba-8742-4441adf2cb62
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 09/15/2017
ms.author: asmalser
ms.openlocfilehash: cd82ef109abbc5707db4c02c2f14f9d55dfb74e3
ms.sourcegitcommit: e266df9f97d04acfc4a843770fadfd8edf4fa2b7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/11/2017
---
# <a name="automate-user-provisioning-and-deprovisioning-to-saas-applications-with-azure-active-directory"></a>Автоматическая подготовка пользователей и ее отзыв для приложений SaaS в Azure Active Directory
## <a name="what-is-automated-user-provisioning-for-saas-apps"></a>Что такое автоматическая подготовка пользователей для приложений SaaS
Служба Azure Active Directory (Azure AD) предоставляет возможность автоматизировать процесс создания, обслуживания и удаления удостоверений пользователей в облачных приложениях ([SaaS](https://azure.microsoft.com/overview/what-is-saas/)), таких как Dropbox, Salesforce, ServiceNow и другие.

**Ниже приведены некоторые примеры возможностей, которые предоставляет эта функция.**

* Автоматическое создание новых учетных записей в соответствующих системах для новых членов вашей команды или организации.
* Автоматическая деактивация учетных записей в соответствующих системах, когда люди покидают команду или организацию.
* Постоянное обновление удостоверений в ваших приложениях и системах при внесении изменений в каталог или в систему управления персоналом.
* Подготовка не созданных пользователями объектов, таких как группы, в приложениях, которые их поддерживают.

**Автоматическая подготовка пользователей также предусматривает такие возможности:**

* Сопоставление существующих удостоверений в исходных и целевых системах.
* Индивидуализация параметров для приведения Azure AD в соответствие с текущими настройками приложений и систем, которые в данный момент используются в вашей организации.
* Необязательная отправка сообщения с оповещением об ошибке при подготовке.
* Составление отчетов и журналов действий для упрощения отслеживания и устранения неполадок.

## <a name="why-use-automated-provisioning"></a>Для чего нужна автоматическая подготовка
Вот несколько основных причин, по которым стоит использовать эту функцию:

* Исключение затрат, неэффективности и ошибок, связанных с человеческим фактором, которые могут возникать в ходе выполнения подготовки вручную.
* Чтобы избежать затрат, связанных с размещением и поддержкой специально разработанных решений и сценариев для подготовки.
* Возможность обезопасить свою организацию, мгновенно удаляя из ключевых приложений SaaS удостоверения пользователей, которые покидают вашу организацию.
* Для максимального упрощения импорта большого количества пользователей в конкретное приложение SaaS или систем.
* Работа вашего решения по подготовке в соответствии с той же политикой доступа к приложению, которая было задана для единого входа в Azure AD.


## <a name="how-does-automatic-provisioning-work"></a>Как работает автоматическая подготовка
    
**Служба подготовки Azure AD** подготавливает пользователей для приложений SaaS и других систем путем подключения к конечным точкам API управления пользователями, предоставляемыми каждым поставщиком приложений. Эти конечные точки API управления пользователями позволяют Azure AD создавать, обновлять и удалять пользователей путем программирования. Для выбранных приложений служба подготовки может также создавать, обновлять и удалять дополнительные объекты, связанные с удостоверениями, такие как группы и роли. 

![Подготовка](./media/active-directory-saas-app-provisioning/provisioning0.PNG)
*Рис. 1. Служба подготовки Azure AD*

![Исходящая подготовка](./media/active-directory-saas-app-provisioning/provisioning1.PNG)
*Рис. 2. "Исходящий" рабочий процесс подготовки пользователей из Azure AD в популярные приложения SaaS*

![Входящая подготовка](./media/active-directory-saas-app-provisioning/provisioning2.PNG)
*Рис. 3."Входящий" рабочий процесс подготовки пользователей из популярных приложений управления кадрами (HCM) в Azure Active Directory и Windows Server Active Directory*


## <a name="what-applications-and-systems-can-i-use-with-azure-ad-automatic-user-provisioning"></a>Какие приложения и системы можно использовать с автоматической подготовкой пользователей Azure AD

Azure AD предлагает предварительно интегрированную поддержку множества популярных приложений SaaS и систем управления кадрами, а также универсальную поддержку приложений, которые реализуют определенные части стандарта [SCIM 2.0](https://docs.microsoft.com/azure/active-directory/active-directory-scim-provisioning).

Все приложения из раздела "Избранные" в коллекции приложений Azure AD поддерживают автоматическую подготовку пользователей. [Список избранных приложений можно просмотреть здесь.](https://azuremarketplace.microsoft.com/marketplace/apps/category/azure-active-directory-apps?page=1&subcategories=featured)

Чтобы приложение поддерживало автоматическую подготовку пользователей, в первую очередь, оно должно предоставить необходимые конечные точки управления пользователями, которые позволят внешним программам автоматизировать создание, обслуживание и удаление пользователей. Таким образом не все приложения SaaS совместимы с этой функцией. Для приложений, поддерживающих интерфейсы API для управления пользователями, команда инженеров Azure AD сможет собрать соединитель подготовки для этих приложений. Приоритет для этой работы устанавливается в соответствии с требованиями текущих и потенциальных заказчиков. 

Для того чтобы связаться с командой инженеров Azure AD для обеспечения подготовки в других приложениях, отправьте сообщение через [форум отзывов Azure Active Directory](https://feedback.azure.com/forums/374982-azure-active-directory-application-requests/category/172035-user-provisioning). 
    
    
## <a name="how-do-i-set-up-automatic-provisioning-to-an-application"></a>Как настроить автоматический вход в приложение

Настройка службы подготовки Azure AD для выбранного приложения начинается на **[портале Azure](https://potal.azure.com)**. В разделе **Azure Active Directory > Корпоративные приложения** выберите **Добавить**, а затем **Все** и добавьте одно из следующих в зависимости от вашего сценария:

* Все приложения в разделе**Популярные приложения** поддерживают автоматическую подготовку.

* Используйте параметр "Приложение не из коллекции" для специально разработанных интеграций SCIM.

![Коллекция](./media/active-directory-saas-app-provisioning/gallery.png)

На экране управления приложениями настройка выполняется на вкладке **Подготовка**.

![Параметры](./media/active-directory-saas-app-provisioning/provisioning_settings0.PNG)


* **Учетные данные администратора** нужно указать в службе подготовки Azure AD, которая позволит подключаться к API управления пользователями, предоставляемому приложением.

* Можно настроить**сопоставления атрибутов**, которые определяют, какие поля в исходной системе (например, Azure AD) будут синхронизированы с соответствующими полями в целевой системе (например, ServiceNow). Если целевое приложение поддерживает его, этот раздел позволит дополнительно настроить подготовку групп в дополнение к учетным записям пользователей. "Сопоставление свойств" позволяет выбрать, какие поля используются для сопоставления учетных записей между этими системами. [Выражения](active-directory-saas-writing-expressions-for-attribute-mappings.md) позволяют изменять и преобразовывать значения, полученные из исходной системы, до того как они будут записаны в целевую систему. Дополнительные сведения см. в статье [Настройка сопоставлений атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory](active-directory-saas-customizing-attribute-mappings.md).

![Параметры](./media/active-directory-saas-app-provisioning/provisioning_settings1.PNG)

* **Фильтры области** сообщают службе подготовки, какие пользователи и группы в исходной системе должны быть подготовлены и/или отозваны в целевой системе. Есть два аспекта для фильтров области, которые оцениваются вместе и определяют, кто находится в области для подготовки:

* **Filter on attribute values** (Фильтровать по значениям атрибутов) — меню "Область исходного объекта" в сопоставлениях атрибутов позволяет фильтровать определенные значения атрибутов. Например, вы можете указать, что в области подготовки должны быть только пользователи с атрибутом отдела "Продажи".

* **Filter on assignments** (Фильтровать по назначениям) — меню "Область" в разделе "Подготовка > Параметры" портала позволяет указать, должны ли быть подготовлены только "назначенные" пользователи и группы или все пользователи в каталоге Azure AD. Дополнительные сведения см. в статье [Назначение пользователя или группы корпоративному приложению в Azure Active Directory](active-directory-coreapps-assign-user-azure-portal.md).
    
* **Параметры** управляют работой службы подготовки приложений, в том числе запущенных.

* **Журналы аудита** предоставляют записи каждой операции, выполненной службой подготовки Azure AD. Дополнительные сведения см. в статье [Руководство по отчетам об автоматической подготовке учетных записей пользователей](active-directory-saas-provisioning-reporting.md).

![Параметры](./media/active-directory-saas-app-provisioning/audit_logs.PNG)

## <a name="what-happens-during-provisioning"></a>Что происходит при подготовке

1. Когда вы активируете подготовку приложения в первый раз, выполняются следующие действия:
   * Azure AD пытается сопоставить существующих пользователей в приложении SaaS с их соответствующими удостоверениями в каталоге. При совпадении пользователей единый вход для них *не* активируется автоматически. Чтобы пользователь получил доступ к приложению, необходимо явно назначить его приложению в Azure AD напрямую или через членство в группе.
   * Если вы уже указали пользователей, которые должны быть назначены приложению, и если Azure AD не удается найти существующие учетные записи этих пользователей, Azure AD подготовит для них в приложении новые учетные записи.
2. После завершения первоначальной синхронизации, как было описано выше, каждые 20 минут Azure AD будет проверять следующие изменения:
   * Если приложению были назначены новые пользователи (напрямую или на основании членства в группе), то для них будет подготовлена новая учетная запись в приложении SaaS.
   * Если доступ пользователей был удален, то их учетные записи в приложении SaaS будут помечены как отключенные (пользователи никогда полностью не удаляются, что обеспечивает защиту от потери данных в случае неправильной настройки).
   * Если пользователь недавно был назначен в приложении и у него уже есть учетная запись в приложении SaaS, эта учетная запись будет помечена как активная. Также, если определенные свойства пользователя устарели по сравнению со свойствами каталога, то они будут обновлены.
   * Если личные данные пользователя (например, номер телефона, адрес офиса) были изменены в каталоге, эти сведения также будут обновлены в приложении SaaS.


## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы
**Как часто Azure AD записывает изменения каталога в приложение SaaS?**

По завершении изначальной полной синхронизации служба подготовки Azure AD обычно проверяет изменения каждые 20 минут. 

Если приложение SaaS возвращает несколько ошибок (например, в случае неверных учетных данных администратора), в этом случае Azure AD постепенно сокращает частоту проверки до полного устранения этой ошибки (минимальная частота – раз в сутки). Когда это произойдет, задание подготовки Azure AD переходит в состояние "карантина" и указывает это в [сводном отчете подготовки](active-directory-saas-provisioning-reporting.md).

**Сколько времени займет подготовка моих пользователей?**

После завершения начальной полной синхронизации добавочные изменения обычно происходят в течение 20–40 минут. Если вы пытаетесь подготовить большую часть каталога, в этом случае продолжительность этого процесса будет зависеть от количества ваших пользователей и групп. Производительность зависит от производительности API-интерфейсов управления пользователями, которые службы подготовки используют для чтения данных из исходной системы и записи данных в целевую систему. 

Производительность также снижается, если возникает большое количество ошибок (записываются в [журнал аудита](active-directory-saas-provisioning-reporting.md)) и служба подготовки перешла в состояние "карантина".

**Что такое начальная полная синхронизация и почему она занимает больше времени, чем последующие синхронизации**

При первом запуске службы подготовки Azure AD для заданного приложения требуется "моментальный снимок" пользователей (и необязательно групп) в исходном каталоге. Этот моментальный снимок позволяет службе подготовки сократить количество обращений к исходным и целевым API-интерфейсам и позволяет выполнять последующие синхронизации изменений более эффективно. 

Начальная полная синхронизация пользователей часто может завершиться за несколько минут для очень маленьких каталогов, но для больших каталогов может потребоваться несколько часов. Начальная полная синхронизация корпоративных каталогов с сотнями тысяч пользователей может выполняться много часов. Однако после начальной синхронизации последующие синхронизации изменений происходят гораздо быстрее.

> [!NOTE]
> Для приложений, которые поддерживают подготовку групп и членства в группах, это позволяет значительно увеличить время, необходимое для полной синхронизации. Если вы не хотите подготавливать имена групп и членство в группах для своего приложения, вы можете отключить подготовки в [сопоставлениях атрибутов](active-directory-saas-customizing-attribute-mappings.md) конфигурации подготовки.

**Как я могу отслеживать процесс выполнения текущего задания по подготовке?**

Дополнительные сведения см. в статье [Руководство по отчетам об автоматической подготовке учетных записей пользователей](active-directory-saas-provisioning-reporting.md).

**Как я узнаю, что подготовка пользователей не была произведена успешно?**

Все ошибки записываются в журналы аудита Azure AD. Дополнительные сведения см. в статье [Руководство по отчетам об автоматической подготовке учетных записей пользователей](active-directory-saas-provisioning-reporting.md).

**Как отправить отзыв команде инженеров?**

Связаться с нами можно через [форум обратной связи Azure Active Directory](https://feedback.azure.com/forums/169401-azure-active-directory/).


## <a name="related-articles"></a>Связанные статьи
* [Указатель статьей по управлению приложениями в Azure Active Directory](active-directory-apps-index.md)
* [Настройка сопоставления атрибутов для подготовки пользователей](active-directory-saas-customizing-attribute-mappings.md)
* [Запись выражений для сопоставления атрибутов](active-directory-saas-writing-expressions-for-attribute-mappings.md)
* [Фильтры области для подготовки пользователей](active-directory-saas-scoping-filters.md)
* [Автоматическая подготовка пользователей и групп из Azure Active Directory в приложениях с использованием SCIM](active-directory-scim-provisioning.md)
* [Уведомления о подготовке учетных записей](active-directory-saas-account-provisioning-notifications.md)
* [Список учебников по интеграции приложений SaaS](active-directory-saas-tutorial-list.md)

