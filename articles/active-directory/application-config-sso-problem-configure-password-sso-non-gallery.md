---
title: "Проблема при настройке единого входа по паролю для приложения не из коллекции | Документы Майкрософт"
description: "Из этой статьи вы узнаете, какие проблемы возникают при настройке единого входа по паролю для пользовательских приложений не из коллекции приложений Azure AD."
services: active-directory
documentationcenter: 
author: ajamess
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/11/2017
ms.author: asteen
ms.openlocfilehash: 9c76b6f3495e2dd759a156fcef97b57aece8d632
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="problem-configuring-password-single-sign-on-for-a-non-gallery-application"></a>Проблема при настройке единого входа по паролю для приложения не из коллекции

Эта статья поможет понять распространенные проблемы, которые возникают при настройке **единого входа по паролю** для приложения не из коллекции.

## <a name="how-to-capture-sign-in-fields-for-an-application"></a>Определение полей входа в систему для приложения

Определение полей входа в систему поддерживается только для страниц входа на основе HTML и **не поддерживается для нестандартных страниц входа**, например для тех, которые используют Flash и другие технологии не на основе HTML.

Существует два способа определения полей входа в систему для приложения:

-   Автоматическое определение полей входа в систему

-   Определение полей входа в систему вручную

**Автоматическое определение полей входа в систему** хорошо работает для большинства страниц входа в систему на основе HTML, если в них используются **хорошо известные идентификаторы DIV для полей имени пользователя и пароля**. Оно анализирует HTML-код страницы, извлекает идентификаторы DIV, которые соответствуют определенным критериям, и сохраняет метаданные для этого приложения, чтобы воспользоваться ими впоследствии.

**Определение полей входа в систему вручную** можно использовать в том случае, если **разработчик приложения не отметил** поля, используемые для входа в систему. Определение полей входа в систему вручную также можно использовать в том случае, если **разработчик приложения предусмотрел несколько полей**, для которых автоматическое определение не работает. Azure AD может сохранить данные для любого количества полей на странице входа, если вы покажете, где находятся эти поля.

В общем случае, **если автоматическое определение полей входа в систему не работает, мы всегда рекомендуем попробовать определение полей вручную.**

### <a name="how-to-automatically-capture-sign-in-fields-for-an-application"></a>Автоматическое определение полей входа в систему для приложения

Для настройки **единого входа в систему по паролю** для приложения с **автоматическим определением полей входа в систему** выполните следующие действия:

1.  Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2.  Откройте **расширение Azure Active Directory**, щелкнув **Больше служб** в нижней части расположенного слева главного меню навигации.

3.  В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4.  В меню навигации Azure Active Directory слева щелкните **Корпоративные приложения**.

5.  Щелкните **Все приложения**, чтобы открыть полный список приложений.

  * Если нужное приложение отсутствует в списке, воспользуйтесь элементом управления **Фильтр** в верхней части списка **Все приложения**, указав в нем для параметра **Показать** значение **Все приложения**.

6.  Выберите приложение, для которого нужно настроить единый вход.

7.  После загрузки приложения выберите пункт **Единый вход** в левом меню навигации этого приложения.

8.  Выберите режим **Вход по паролю**.

9.  Введите **URL-адрес для входа**. Это URL-адрес страницы, на которой пользователи вводят имена и пароли для входа в систему. **Убедитесь, что на странице по этому URL-адресу отображаются поля для ввода учетных данных**.

10. Нажмите кнопку **Сохранить** .

11. Теперь этот URL-адрес будет автоматически использоваться для ввода имени пользователя и пароля и позволит использовать Azure AD для безопасной передачи паролей в приложение с помощью панели доступа в расширении обозревателя.

## <a name="how-to-manually-capture-sign-in-fields-for-an-application"></a>Определение полей входа в систему для приложения вручную

Для определения полей входа в систему вручную вам потребуется установить расширение "Панель доступа" для браузера. **Не работайте в приватном режиме, режиме inPrivate или в режиме инкогнито**. Чтобы установить расширение браузера, выполните действия, описанные в разделе [Как установить расширение "Панель доступа" для браузера](#i-cannot-manually-detect-sign-in-fields-for-my-application).

Для настройки **единого входа в систему по паролю** для приложения с **определением полей входа в систему вручную** выполните следующие действия:

1.  Откройте [**портал Azure**](https://portal.azure.com/) и войдите в систему как **глобальный администратор** или **соадминистратор**.

2.  Откройте **расширение Azure Active Directory**, щелкнув **Больше служб** в нижней части расположенного слева главного меню навигации.

3.  В поле фильтра поиска введите **Azure Active Directory** и выберите элемент **Azure Active Directory**.

4.  В меню навигации Azure Active Directory слева щелкните **Корпоративные приложения**.

5.  Щелкните **Все приложения**, чтобы открыть полный список приложений.

   * Если нужное приложение отсутствует в списке, воспользуйтесь элементом управления **Фильтр** в верхней части списка **Все приложения**, указав в нем для параметра **Показать** значение **Все приложения**.

6.  Выберите приложение, для которого нужно настроить единый вход.

7.  После загрузки приложения выберите пункт **Единый вход** в левом меню навигации этого приложения.

8.  Выберите режим **Вход по паролю**.

9.  Введите **URL-адрес для входа**. Это URL-адрес страницы, на которой пользователи вводят имена и пароли для входа в систему. **Убедитесь, что на странице по этому URL-адресу отображаются поля для ввода учетных данных**.

10. Нажмите кнопку **Сохранить** .

11. Теперь этот URL-адрес будет автоматически использоваться для ввода имени пользователя и пароля и позволит использовать Azure AD для безопасной передачи паролей в приложение с помощью панели доступа в расширении обозревателя. В случае неудачи можно **изменить режим определения полей на ручной**, перейдя к шагу 12.

12. Щелкните **Настроить параметры единого входа по паролю для &lt;имя_приложения&gt;**.

13. Выберите параметр **Определить поля входа в систему вручную**.

14. Нажмите кнопку **ОК**.

15. Щелкните **Сохранить**.

16. Следуйте указаниям на экране по использованию панели доступа.

## <a name="i-see-a-we-couldnt-find-any-sign-in-fields-at-that-url-error"></a>Появляется сообщение об ошибке "Не удалось найти ни одного поля входа в систему на этой странице"

Эта ошибка возникает, если не удается определить поля входа в систему автоматически. Чтобы устранить эту проблему, попробуйте определить поля входа в систему вручную, выполнив действия, описанные в статье [Определение полей входа в систему для приложения вручную](#how-to-manually-capture-sign-in-fields-for-an-application).

## <a name="i-see-an-unable-to-save-single-sign-on-configuration-error"></a>Появляется сообщение об ошибке "Невозможно сохранить конфигурацию единого входа"

В редких случаях обновление конфигурации единого входа может завершиться сбоем. Чтобы решить эту проблему, попробуйте еще раз сохранить конфигурацию единого входа.

Если проблема возникает постоянно, создайте обращение в службу поддержки и укажите в нем сведения, полученные при выполнении инструкций в разделах [Как просмотреть сведения об уведомлении портала](#i-cannot-manually-detect-sign-in-fields-for-my-application) и [Как получить помощь, отправив сведения об уведомлении инженеру службы поддержки](#how-to-get-help-by-sending-notification-details-to-a-support-engineer).

## <a name="i-cannot-manually-detect-sign-in-fields-for-my-application"></a>Не удается определить поля входа в систему вручную для моего приложения

Ниже перечислены некоторые сценарии, в которых определить поля входа в систему вручную не удается:

-   Определение, на первый взгляд, работает, но определяются неправильные поля

-   В ходе определения не выделяются нужные поля

-   В процессе определения открывается страница входа в приложение, как и ожидалось, но ничего не происходит

-   Определение полей вручную работает, но когда пользователи переходят к приложению из панели доступа, единого входа не выполняется.

При наличии любой из этих проблем проверьте следующее:

-   Убедитесь, что **установлена** и **включена** последняя версия расширения панели доступа. Для этого выполните действия, приведенные в разделе [Как установить расширение "Панель доступа" для браузера](#how-to-install-the-access-panel-browser-extension).

-   Убедитесь, что во время отслеживания не включены **режим инкогнито, режим inPrivate или приватный режим**. Расширение панели доступа не поддерживается в этих режимах.

-   Убедитесь, что пользователи не пытаются войти в приложение с панели доступа в **режиме инкогнито, режиме inPrivate или приватном режиме**. Расширение панели доступа не поддерживается в этих режимах.

-   Попробуйте снова определить поля вручную, убедившись, что соответствующие поля помечены красными отметками.

-   Если процесс определения полей вручную зависает или на странице входа в систему не выполняется никаких действий (случай 3 выше), попробуйте снова определить поля вручную. Но на этот раз после завершения процесса нажмите кнопку **F12**, чтобы открыть консоль разработчика браузера. Откройте **консоль**, введите **window.location="&lt;URL-адрес входа, указанный при настройке приложения&gt;"** и нажмите клавишу **ВВОД**. Это вызовет принудительный переход на указанную страницу, при этом процесс определения завершится, и найденные поля будут сохранены.

Если ни один из этих подходов не помогает, обратитесь к нам. Создайте обращение в службу поддержки и подробно опишите свои действия, а также укажите сведения, полученные при выполнении инструкций в разделах [Как просмотреть сведения об уведомлении портала](#i-cannot-manually-detect-sign-in-fields-for-my-application) и [Как получить помощь, отправив сведения об уведомлении инженеру службы поддержки](#how-to-get-help-by-sending-notification-details-to-a-support-engineer) (при необходимости).

## <a name="how-to-install-the-access-panel-browser-extension"></a>Установка расширения "Панель доступа" для браузера

Чтобы установить расширение "Панель доступа" для браузера, выполните указанные ниже действия.

1.  Откройте [панель доступа](https://myapps.microsoft.com) в одном из поддерживаемых браузеров и войдите в систему как **пользователь** Azure AD.

2.  Щелкните **password-SSO application** (приложение с единым входом по паролю) на панели доступа.

3.  При появлении запроса на установку программного обеспечения выберите **Установить сейчас**.

4.  Откроется страница для скачивания расширения в зависимости от вашего браузера. **Добавьте** расширение в свой браузер.

5.  При необходимости **включите** или **разрешите** расширение.

6.  После установки **перезапустите** сеанс браузера.

7.  Войдите в панель доступа и посмотрите, можете ли вы **запустить** приложения с единым входом по паролю.

Чтобы скачать расширение для Chrome и Firefox, воспользуйтесь следующими ссылками:

-   [Расширение "Панель доступа" для Chrome](https://chrome.google.com/webstore/detail/access-panel-extension/ggjhpefgjjfobnfoldnjipclpcfbgbhl)

-   [Расширение "Панель доступа" для Firefox](https://addons.mozilla.org/firefox/addon/access-panel-extension/)

## <a name="how-to-see-the-details-of-a-portal-notification"></a>Как просмотреть сведения об уведомлении портала

Чтобы просмотреть сведения об уведомлении на портале, выполните следующие действия:

1.  Щелкните значок **Уведомления** (в форме колокольчика) в правом верхнем углу портала Azure.

2.  Выберите любое уведомление, которое находится в состоянии **Ошибка** (с красным восклицательным знаком (!)).

  >!Примечание] Не следует выбирать уведомления, которые находятся в состоянии **Успешно** или **Выполняется**.
  >
  >

3.  Откроется колонка **Сведения об уведомлении**.

4.  Используйте представленную здесь информацию, чтобы самостоятельно исследовать проблему.

5.  Если этого будет недостаточно, вы можете передать эти сведения инженеру службы поддержки или сотруднику группы продуктов, которые помогут вам решить возникшую проблему.

6.  Щелкните **значок** **копирования** справа от текстового поля **Копировать ошибку**, чтобы скопировать в буфер обмена все сведения об уведомлении, которые затем можно будет передать инженеру службы поддержки или сотруднику группы продуктов.

## <a name="how-to-get-help-by-sending-notification-details-to-a-support-engineer"></a>Как получить помощь, отправив сведения об уведомлении инженеру службы поддержки

Если вам нужна помощь, вы можете ускорить этот процесс, предоставив инженеру службы поддержки **все перечисленные ниже сведения**. Для этого можно **сделать снимок экрана** или щелкнуть **значок копирования ошибки**, который находится справа от текстового поля **Скопировать ошибку**.

## <a name="notification-details-explained"></a>Объяснение сведений об уведомлении

Ниже объясняется, что означает каждый из элементов сведений об уведомлениях, и приведено несколько примеров.

### <a name="essential-notification-items"></a>Основные элементы уведомления

-   **Заголовок** — описательное название уведомления.

    -   Пример: **Настройки прокси приложения**.

-   **Описание** — текст с описанием результата операции.

    -   Пример: **Введенный внутренний URL-адрес уже используется другим приложением**.

-   **Идентификатор уведомления** — уникальный идентификатор уведомления.

    -   Пример: **clientNotification-2adbfc06-2073-4678-a69f-7eb78d96b068**.

-   **Идентификатор запроса клиента** — идентификатор конкретного запроса, созданного браузером.

    -   Пример: **302fd775-3329-4670-a9f3-bea37004f0bc**.

-   **Метка времени в формате UTC** — время создания уведомления, в формате UTC.

    -   Пример: **2017-03-23T19:50:43.7583681Z**.

-   **ИД внутренней транзакции** — внутренний идентификатор, который поможет нам найти ошибку в наших системах.

    -   Пример: **71a2f329-ca29-402f-aa72-bc00a7aca603**.

-   **UPN** — пользователь, который выполнил операцию.

    -   Пример: **tperkins@f128.info**.

-   **Идентификатор клиента** — уникальный идентификатор клиента, к которому относится пользователь, выполнивший операцию.

    -   Пример: **7918d4b5-0442-4a97-be2d-36f9f9962ece**.

-   **ИД объекта пользователя** — уникальный идентификатор пользователя, выполнившего операцию.

    -   Пример: **17f84be4-51f8-483a-b533-383791227a99**.

### <a name="detailed-notification-items"></a>Дополнительные элементы уведомления с подробными сведениями

-   **Отображаемое имя** — отображаемое имя с более подробным описанием ошибки **(может быть пустым)**

    -   Пример*: **Параметры прокси приложения**

-   **Состояние** — состояние уведомления

    -   Пример*: **Сбой**

-   **Идентификатор объекта** — идентификатор объекта, для которого выполнялась операция **(может быть пустым)**

    -   Пример: **8e08161d-f2fd-40ad-a34a-a9632d6bb599**.

-   **Подробные сведения** — подробное описание результата операции.

    -   Пример: **Внутренний URL-адрес http://bing.com/ является недопустимым, так как он уже используется**.

-   **Копировать ошибку** — щелкните **значок копирования** справа от текстового поля **Копировать ошибку**, чтобы скопировать в буфер обмена все сведения об уведомлении, которые можно передать инженеру службы поддержки или сотруднику группы продуктов.

    -   Пример: ```{"errorCode":"InternalUrl\_Duplicate","localizedErrorDetails":{"errorDetail":"Internal url 'http://google.com/' is invalid since it is already in use"},"operationResults":\[{"objectId":null,"displayName":null,"status":0,"details":"Internal url 'http://bing.com/' is invalid since it is already in use"}\],"timeStampUtc":"2017-03-23T19:50:26.465743Z","clientRequestId":"302fd775-3329-4670-a9f3-bea37004f0bb","internalTransactionId":"ea5b5475-03b9-4f08-8e95-bbb11289ab65","upn":"tperkins@f128.info","tenantId":"7918d4b5-0442-4a97-be2d-36f9f9962ece","userObjectId":"17f84be4-51f8-483a-b533-383791227a99"}```

## <a name="next-steps"></a>Дальнейшие действия
[Реализация единого входа в приложения с помощью прокси приложения](active-directory-application-proxy-sso-using-kcd.md)

