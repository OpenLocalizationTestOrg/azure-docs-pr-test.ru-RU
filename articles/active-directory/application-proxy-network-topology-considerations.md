---
title: "вопросы по топологии aaaNetwork при использовании прокси приложения Azure Active Directory | Документы Microsoft"
description: "В этой статье рассматриваются аспекты топологии сети при использовании прокси приложения Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/28/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 9b8cdd2196efeb92a74e44dde6511f7d3091a968
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="network-topology-considerations-when-using-azure-active-directory-application-proxy"></a><span data-ttu-id="a3356-103">Аспекты топологии сети при использовании прокси приложения Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a3356-103">Network topology considerations when using Azure Active Directory Application Proxy</span></span>

<span data-ttu-id="a3356-104">В этой статье рассматриваются аспекты топологии сети при использовании прокси приложения Azure Active Directory для публикации и удаленного доступа к приложениям.</span><span class="sxs-lookup"><span data-stu-id="a3356-104">This article explains network topology considerations when using Azure Active Directory (Azure AD) Application Proxy for publishing and accessing your applications remotely.</span></span>

## <a name="traffic-flow"></a><span data-ttu-id="a3356-105">Поток трафика</span><span class="sxs-lookup"><span data-stu-id="a3356-105">Traffic flow</span></span>

<span data-ttu-id="a3356-106">При публикации приложения через прокси приложения Azure AD, трафик от приложений toohello пользователей hello проходит через три подключения:</span><span class="sxs-lookup"><span data-stu-id="a3356-106">When an application is published through Azure AD Application Proxy, traffic from hello users toohello applications flows through three connections:</span></span>

1. <span data-ttu-id="a3356-107">Hello пользователь подключается toohello прокси приложения Azure AD общей конечной точки службы в Azure</span><span class="sxs-lookup"><span data-stu-id="a3356-107">hello user connects toohello Azure AD Application Proxy service public endpoint on Azure</span></span>
2. <span data-ttu-id="a3356-108">прокси-служба приложения Hello подключается toohello соединитель прокси приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-108">hello Application Proxy service connects toohello Application Proxy connector</span></span>
3. <span data-ttu-id="a3356-109">Соединитель прокси приложения Hello подключается toohello целевого приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-109">hello Application Proxy connector connects toohello target application</span></span>

![Схема, показывающая поток трафика от пользователей tootarget приложения](./media/application-proxy-network-topologies/application-proxy-three-hops.png)

## <a name="tenant-location-and-application-proxy-service"></a><span data-ttu-id="a3356-111">Расположение клиента и службы прокси приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-111">Tenant location and Application Proxy service</span></span>

<span data-ttu-id="a3356-112">При подписке на клиенте Azure AD hello страны, указываемые определяется hello области клиента.</span><span class="sxs-lookup"><span data-stu-id="a3356-112">When you sign up for an Azure AD tenant, hello region of your tenant is determined by hello country you specify.</span></span> <span data-ttu-id="a3356-113">При включении прокси приложения hello экземпляры службы прокси приложения для вашего клиента выбран или созданные hello же регионе, что клиент Azure AD или ближайший регион tooit hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-113">When you enable Application Proxy, hello Application Proxy service instances for your tenant are chosen or created in hello same region as your Azure AD tenant, or hello closest region tooit.</span></span>

<span data-ttu-id="a3356-114">Например если клиент Azure AD область является hello Европейского Союза, соединителях прокси приложения используйте экземпляров службы в центрах обработки данных Azure в hello Европа.</span><span class="sxs-lookup"><span data-stu-id="a3356-114">For example, if your Azure AD tenant’s region is hello European Union (EU), all your Application Proxy connectors use service instances in Azure datacenters in hello EU.</span></span> <span data-ttu-id="a3356-115">При доступ пользователей к опубликованным приложениям, их трафик проходит через экземпляров службы прокси приложения hello в этом расположении.</span><span class="sxs-lookup"><span data-stu-id="a3356-115">When your users access published applications, their traffic goes through hello Application Proxy service instances in this location.</span></span>

## <a name="considerations-for-reducing-latency"></a><span data-ttu-id="a3356-116">Рекомендации по уменьшению задержки</span><span class="sxs-lookup"><span data-stu-id="a3356-116">Considerations for reducing latency</span></span>

<span data-ttu-id="a3356-117">Любые решения прокси увеличивают задержку сетевого подключения.</span><span class="sxs-lookup"><span data-stu-id="a3356-117">All proxy solutions introduce latency into your network connection.</span></span> <span data-ttu-id="a3356-118">Независимо от того, какой прокси-сервера или виртуальную Частную сеть, выбираемое в качестве решения удаленного доступа он всегда содержит набор серверов, включение tooinside hello подключения к корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-118">No matter which proxy or VPN solution you choose as your remote access solution, it always includes a set of servers enabling hello connection tooinside your corporate network.</span></span>

<span data-ttu-id="a3356-119">Организации обычно размещают серверные конечные точки в сети периметра.</span><span class="sxs-lookup"><span data-stu-id="a3356-119">Organizations typically include server endpoints in their perimeter network.</span></span> <span data-ttu-id="a3356-120">С помощью прокси приложения Azure AD Однако трафик проходит через hello прокси-службы в облаке hello пока соединители hello находятся в корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-120">With Azure AD Application Proxy, however, traffic flows through hello proxy service in hello cloud while hello connectors reside on your corporate network.</span></span> <span data-ttu-id="a3356-121">Сеть периметра не требуется.</span><span class="sxs-lookup"><span data-stu-id="a3356-121">No perimeter network is required.</span></span>

<span data-ttu-id="a3356-122">Hello далее разделах toohelp Дополнительные предложения, уменьшить задержки еще больше.</span><span class="sxs-lookup"><span data-stu-id="a3356-122">hello next sections contain additional suggestions toohelp you reduce latency even further.</span></span> 

### <a name="connector-placement"></a><span data-ttu-id="a3356-123">Расположение соединителя</span><span class="sxs-lookup"><span data-stu-id="a3356-123">Connector placement</span></span>

<span data-ttu-id="a3356-124">Прокси приложения выбирает расположение hello экземпляров в, в зависимости от расположения клиента.</span><span class="sxs-lookup"><span data-stu-id="a3356-124">Application Proxy chooses hello location of instances for you, based on your tenant location.</span></span> <span data-ttu-id="a3356-125">Тем не менее вы получаете toodecide где tooinstall hello соединителя, предоставляя hello toodefine hello задержки энергопотреблении сетевого трафика.</span><span class="sxs-lookup"><span data-stu-id="a3356-125">However, you get toodecide where tooinstall hello connector, giving you hello power toodefine hello latency characteristics of your network traffic.</span></span>

<span data-ttu-id="a3356-126">При настройке службы прокси приложения hello, попросите hello следующие вопросы:</span><span class="sxs-lookup"><span data-stu-id="a3356-126">When setting up hello Application Proxy service, ask hello following questions:</span></span>

* <span data-ttu-id="a3356-127">Где находится приложение hello</span><span class="sxs-lookup"><span data-stu-id="a3356-127">Where is hello app located?</span></span>
* <span data-ttu-id="a3356-128">Где находятся большинство пользователей, обращающихся к находится приложение hello?</span><span class="sxs-lookup"><span data-stu-id="a3356-128">Where are most users who access hello app located?</span></span>
* <span data-ttu-id="a3356-129">Где находится экземпляр прокси-сервера приложения hello</span><span class="sxs-lookup"><span data-stu-id="a3356-129">Where is hello Application Proxy instance located?</span></span>
* <span data-ttu-id="a3356-130">У вас уже есть выделенного сетевого подключения tooAzure центрах обработки данных настройки, таких как Azure ExpressRoute или аналогичные VPN?</span><span class="sxs-lookup"><span data-stu-id="a3356-130">Do you already have a dedicated network connection tooAzure datacenters set up, like Azure ExpressRoute or a similar VPN?</span></span>

<span data-ttu-id="a3356-131">Соединитель Hello имеет toocommunicate с Azure и приложений (шаги 2 и 3 в диаграмме потока трафика hello), поэтому hello размещения задержки hello hello соединителя влияет на эти два соединения.</span><span class="sxs-lookup"><span data-stu-id="a3356-131">hello connector has toocommunicate with both Azure and your applications (steps 2 and 3 in hello Traffic flow diagram), so hello placement of hello connector affects hello latency of those two connections.</span></span> <span data-ttu-id="a3356-132">При вычислении размещения hello hello соединителя, имейте в виду hello после точки.</span><span class="sxs-lookup"><span data-stu-id="a3356-132">When evaluating hello placement of hello connector, keep in mind hello following points:</span></span>

* <span data-ttu-id="a3356-133">Если требуется toouse ограниченного делегирования Kerberos (KCD) для единого входа hello соединитель должен tooa прямой видимости центре обработки данных.</span><span class="sxs-lookup"><span data-stu-id="a3356-133">If you want toouse Kerberos constrained delegation (KCD) for single sign-on, then hello connector needs a line of sight tooa datacenter.</span></span> <span data-ttu-id="a3356-134">Кроме того сервер соединителя hello должен toobe домену.</span><span class="sxs-lookup"><span data-stu-id="a3356-134">Additionally, hello connector server needs toobe domain joined.</span></span>  
* <span data-ttu-id="a3356-135">Если вы сомневаетесь, установите hello соединителя ближе toohello приложение.</span><span class="sxs-lookup"><span data-stu-id="a3356-135">When in doubt, install hello connector closer toohello application.</span></span>

### <a name="general-approach-toominimize-latency"></a><span data-ttu-id="a3356-136">Общий подход toominimize задержки</span><span class="sxs-lookup"><span data-stu-id="a3356-136">General approach toominimize latency</span></span>

<span data-ttu-id="a3356-137">Можно свести к минимуму задержки hello трафика конца в конец hello путем оптимизации для каждого сетевого подключения.</span><span class="sxs-lookup"><span data-stu-id="a3356-137">You can minimize hello latency of hello end-to-end traffic by optimizing each network connection.</span></span> <span data-ttu-id="a3356-138">Каждое подключение можно оптимизировать следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a3356-138">Each connection can be optimized by:</span></span>

* <span data-ttu-id="a3356-139">Снижение hello расстояние между двумя концами hello прыжка hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-139">Reducing hello distance between hello two ends of hello hop.</span></span>
* <span data-ttu-id="a3356-140">Выбор правильного сетевого tootraverse hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-140">Choosing hello right network tootraverse.</span></span> <span data-ttu-id="a3356-141">Например проходящий через частную сеть, а не hello общедоступный Интернет могут выполняться быстрее, из-за toodedicated ссылки.</span><span class="sxs-lookup"><span data-stu-id="a3356-141">For example, traversing a private network rather than hello public Internet may be faster, due toodedicated links.</span></span>

<span data-ttu-id="a3356-142">Если у вас есть выделенный VPN или ExpressRoute связь между Azure и корпоративной сети, можно toouse.</span><span class="sxs-lookup"><span data-stu-id="a3356-142">If you have a dedicated VPN or ExpressRoute link between Azure and your corporate network, you may want toouse that.</span></span>

## <a name="focus-your-optimization-strategy"></a><span data-ttu-id="a3356-143">Направление стратегии оптимизации</span><span class="sxs-lookup"><span data-stu-id="a3356-143">Focus your optimization strategy</span></span>

<span data-ttu-id="a3356-144">Нет мало, это можно сделать toocontrol hello соединения между пользователями и hello прокси-сервер приложения службы.</span><span class="sxs-lookup"><span data-stu-id="a3356-144">There's little that you can do toocontrol hello connection between your users and hello Application Proxy service.</span></span> <span data-ttu-id="a3356-145">Пользователи могут подключаться к приложениям из домашней сети, кафе или другой страны.</span><span class="sxs-lookup"><span data-stu-id="a3356-145">Users may access your apps from a home network, a coffee shop, or a different country.</span></span> <span data-ttu-id="a3356-146">Вместо этого вы можете оптимизировать hello подключения из hello прокси-сервер приложения службы toohello соединителей прокси приложения toohello приложений.</span><span class="sxs-lookup"><span data-stu-id="a3356-146">Instead, you can optimize hello connections from hello Application Proxy service toohello Application Proxy connectors toohello apps.</span></span> <span data-ttu-id="a3356-147">Рассмотрим внедрение hello следующие шаблоны в вашей среде.</span><span class="sxs-lookup"><span data-stu-id="a3356-147">Consider incorporating hello following patterns in your environment.</span></span>

### <a name="pattern-1-put-hello-connector-close-toohello-application"></a><span data-ttu-id="a3356-148">Шаблон 1: Hello соединитель toohello закрыть приложение помещено</span><span class="sxs-lookup"><span data-stu-id="a3356-148">Pattern 1: Put hello connector close toohello application</span></span>

<span data-ttu-id="a3356-149">Место hello соединителя закрыть toohello целевого приложения в сети клиента hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-149">Place hello connector close toohello target application in hello customer network.</span></span> <span data-ttu-id="a3356-150">Эта конфигурация позволяет свести к минимуму шаг 3 из диаграммы топографии hello, так как соединитель hello и приложение закрыть.</span><span class="sxs-lookup"><span data-stu-id="a3356-150">This configuration minimizes step 3 in hello topography diagram, because hello connector and application are close.</span></span> 

<span data-ttu-id="a3356-151">Если соединителя требуется контроллер домена toohello прямой видимости, этот шаблон является выгодно.</span><span class="sxs-lookup"><span data-stu-id="a3356-151">If your connector needs a line of sight toohello domain controller, then this pattern is advantageous.</span></span> <span data-ttu-id="a3356-152">Большая часть наших клиентов использует этот шаблон, так как он хорошо подходит для большинства сценариев.</span><span class="sxs-lookup"><span data-stu-id="a3356-152">Most of our customers use this pattern, because it works well for most scenarios.</span></span> <span data-ttu-id="a3356-153">Этот шаблон может также быть совмещено с шаблон 2 toooptimize трафик между службой hello и соединитель hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-153">This pattern can also be combined with pattern 2 toooptimize traffic between hello service and hello connector.</span></span>

### <a name="pattern-2-take-advantage-of-expressroute-with-public-peering"></a><span data-ttu-id="a3356-154">Шаблон 2. Использование подключения ExpressRoute с общедоступным пирингом</span><span class="sxs-lookup"><span data-stu-id="a3356-154">Pattern 2: Take advantage of ExpressRoute with public peering</span></span>

<span data-ttu-id="a3356-155">При наличии настроены для общедоступного пиринга ExpressRoute hello более быстрое подключение ExpressRoute можно использовать для трафика между прокси-сервера приложений и соединителем hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-155">If you have ExpressRoute set up with public peering, you can use hello faster ExpressRoute connection for traffic between Application Proxy and hello connector.</span></span> <span data-ttu-id="a3356-156">Соединитель Hello — по-прежнему в сети, toohello закрыть приложение.</span><span class="sxs-lookup"><span data-stu-id="a3356-156">hello connector is still on your network, close toohello app.</span></span>

### <a name="pattern-3-take-advantage-of-expressroute-with-private-peering"></a><span data-ttu-id="a3356-157">Шаблон 3. Использование подключения ExpressRoute с частным пирингом</span><span class="sxs-lookup"><span data-stu-id="a3356-157">Pattern 3: Take advantage of ExpressRoute with private peering</span></span>

<span data-ttu-id="a3356-158">Если у вас есть выделенное подключение VPN или ExpressRoute с частным пирингом между Azure и корпоративной сетью, можно использовать другой вариант.</span><span class="sxs-lookup"><span data-stu-id="a3356-158">If you have a dedicated VPN or ExpressRoute set up with private peering between Azure and your corporate network, you have another option.</span></span> <span data-ttu-id="a3356-159">В этой конфигурации обычно считается hello виртуальной сети в Azure как расширение hello корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-159">In this configuration, hello virtual network in Azure is typically considered as an extension of hello corporate network.</span></span> <span data-ttu-id="a3356-160">Поэтому можно установить соединитель hello в центре обработки данных Azure hello и по-прежнему удовлетворять требованиям низкой задержкой hello подключения соединитель для приложения hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-160">So you can install hello connector in hello Azure datacenter, and still satisfy hello low latency requirements of hello connector-to-app connection.</span></span>

<span data-ttu-id="a3356-161">Задержка не увеличивается, так как трафик передается через выделенное подключение.</span><span class="sxs-lookup"><span data-stu-id="a3356-161">Latency is not compromised because traffic is flowing over a dedicated connection.</span></span> <span data-ttu-id="a3356-162">Можно также получить улучшенные задержки соединителя службы прокси приложения, поскольку hello соединитель устанавливается в расположение клиента Azure AD закрыть tooyour центра обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="a3356-162">You also get improved Application Proxy service-to-connector latency because hello connector is installed in an Azure datacenter close tooyour Azure AD tenant location.</span></span>

![Схема, демонстрирующая установку соединителя в центре обработки данных Azure](./media/application-proxy-network-topologies/application-proxy-expressroute-private.png)

### <a name="other-approaches"></a><span data-ttu-id="a3356-164">Другие подходы</span><span class="sxs-lookup"><span data-stu-id="a3356-164">Other approaches</span></span>

<span data-ttu-id="a3356-165">Несмотря на то, что hello посвящена эта статья является расположение, можно также изменить размещение hello лучшие характеристики задержки hello приложения tooget.</span><span class="sxs-lookup"><span data-stu-id="a3356-165">Although hello focus of this article is connector placement, you can also change hello placement of hello application tooget better latency characteristics.</span></span>

<span data-ttu-id="a3356-166">Все больше организаций перемещают сети в размещенные среды.</span><span class="sxs-lookup"><span data-stu-id="a3356-166">Increasingly, organizations are moving their networks into hosted environments.</span></span> <span data-ttu-id="a3356-167">Это позволяет им tooplace свои приложения в среде сервера, который также является частью корпоративной сети и по-прежнему находиться в домене, hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-167">This enables them tooplace their apps in a hosted environment that is also part of their corporate network, and still be within hello domain.</span></span> <span data-ttu-id="a3356-168">В этом случае hello шаблонов, описанных в предыдущих разделах hello может быть применен toohello новое расположение приложения.</span><span class="sxs-lookup"><span data-stu-id="a3356-168">In this case, hello patterns discussed in hello preceding sections can be applied toohello new application location.</span></span> <span data-ttu-id="a3356-169">Если вы рассматриваете этот вариант, перейдите на страницу [Доменные службы Azure Active Directory](../active-directory-domain-services/active-directory-ds-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a3356-169">If you're considering this option, see [Azure AD Domain Services](../active-directory-domain-services/active-directory-ds-overview.md).</span></span>

<span data-ttu-id="a3356-170">Кроме того, рассмотрите возможность организации соединителях с помощью [группы соединителей](active-directory-application-proxy-connectors.md) tootarget приложений, которые находятся в разных местах и сетей.</span><span class="sxs-lookup"><span data-stu-id="a3356-170">Additionally, consider organizing your connectors using [connector groups](active-directory-application-proxy-connectors.md) tootarget apps that are in different locations and networks.</span></span> 

## <a name="common-use-cases"></a><span data-ttu-id="a3356-171">Распространенные варианты использования</span><span class="sxs-lookup"><span data-stu-id="a3356-171">Common use cases</span></span>

<span data-ttu-id="a3356-172">В этом разделе рассматриваются несколько распространенных сценариев.</span><span class="sxs-lookup"><span data-stu-id="a3356-172">In this section, we walk through a few common scenarios.</span></span> <span data-ttu-id="a3356-173">Предположим, что hello клиента Azure AD (и поэтому конечной точки службы прокси-сервера) находится в hello United States (США).</span><span class="sxs-lookup"><span data-stu-id="a3356-173">Assume that hello Azure AD tenant (and therefore proxy service endpoint) is located in hello United States (US).</span></span> <span data-ttu-id="a3356-174">Hello особенности, рассматриваемые в этих вариантов использования справедливы tooother регионах мира hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-174">hello considerations discussed in these use cases also apply tooother regions around hello globe.</span></span>

<span data-ttu-id="a3356-175">В этих сценариях мы называем соединения "прыжками" и присваиваем им номера:</span><span class="sxs-lookup"><span data-stu-id="a3356-175">For these scenarios, we call each connection a "hop" and number them for easier discussion:</span></span>

- <span data-ttu-id="a3356-176">**Прыжков 1**: toohello пользователя прокси-сервера приложения службы</span><span class="sxs-lookup"><span data-stu-id="a3356-176">**Hop 1**: User toohello Application Proxy service</span></span>
- <span data-ttu-id="a3356-177">**Прыжков 2**: соединитель прокси приложения toohello службы прокси приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-177">**Hop 2**: Application Proxy service toohello Application Proxy connector</span></span>
- <span data-ttu-id="a3356-178">**Перескочить 3**: прокси приложения соединителя toohello целевого приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-178">**Hop 3**: Application Proxy connector toohello target application</span></span> 

### <a name="use-case-1"></a><span data-ttu-id="a3356-179">Вариант использования 1</span><span class="sxs-lookup"><span data-stu-id="a3356-179">Use case 1</span></span>

<span data-ttu-id="a3356-180">**Сценарий:** приложение hello находится в сети организации в hello (США), с пользователями в hello одного региона.</span><span class="sxs-lookup"><span data-stu-id="a3356-180">**Scenario:** hello app is in an organization's network in hello US, with users in hello same region.</span></span> <span data-ttu-id="a3356-181">Не ExpressRoute или VPN hello центра обработки данных Azure и существует hello корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-181">No ExpressRoute or VPN exists between hello Azure datacenter and hello corporate network.</span></span>

<span data-ttu-id="a3356-182">**Рекомендация:** шаблон выполните 1, описано в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-182">**Recommendation:** Follow pattern 1, explained in hello previous section.</span></span> <span data-ttu-id="a3356-183">Если необходимо уменьшить задержку, рассмотрите возможность создать подключение ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a3356-183">For improved latency, consider using ExpressRoute, if needed.</span></span>

<span data-ttu-id="a3356-184">Это простой шаблон.</span><span class="sxs-lookup"><span data-stu-id="a3356-184">This is a simple pattern.</span></span> <span data-ttu-id="a3356-185">Оптимизировать прыжка 3, поместив соединителя hello рядом приложение hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-185">You optimize hop 3 by placing hello connector near hello app.</span></span> <span data-ttu-id="a3356-186">Это также естественным выбором, так как соединитель hello обычно устанавливается вместе с прямой видимости toohello приложение и toohello эксплуатации центра обработки данных tooperform ограниченное делегирование Kerberos.</span><span class="sxs-lookup"><span data-stu-id="a3356-186">This is also a natural choice, because hello connector typically is installed with line of sight toohello app and toohello datacenter tooperform KCD operations.</span></span>

![Схема, показывающая, что пользователи, прокси-сервера, соединитель и приложения, отображаются в hello нам](./media/application-proxy-network-topologies/application-proxy-pattern1.png)

### <a name="use-case-2"></a><span data-ttu-id="a3356-188">Вариант использования 2</span><span class="sxs-lookup"><span data-stu-id="a3356-188">Use case 2</span></span>

<span data-ttu-id="a3356-189">**Сценарий:** приложение hello находится в сети организации в hello (США), с пользователями, распределено глобально.</span><span class="sxs-lookup"><span data-stu-id="a3356-189">**Scenario:** hello app is in an organization's network in hello US, with users spread out globally.</span></span> <span data-ttu-id="a3356-190">Не ExpressRoute или VPN hello центра обработки данных Azure и существует hello корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-190">No ExpressRoute or VPN exists between hello Azure datacenter and hello corporate network.</span></span>

<span data-ttu-id="a3356-191">**Рекомендация:** шаблон выполните 1, описано в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-191">**Recommendation:** Follow pattern 1, explained in hello previous section.</span></span> 

<span data-ttu-id="a3356-192">Опять же hello шаблоном является toooptimize прыжка 3, расположения соединителя hello рядом приложение hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-192">Again, hello common pattern is toooptimize hop 3, where you place hello connector near hello app.</span></span> <span data-ttu-id="a3356-193">Прыжок 3 невысока обычно, если это же в hello области.</span><span class="sxs-lookup"><span data-stu-id="a3356-193">Hop 3 is not typically expensive, if it is all within hello same region.</span></span> <span data-ttu-id="a3356-194">Тем не менее прыжок 1 может быть более дороги в зависимости от расположения пользователя hello, так как пользователями в пределах Здравствуй, мир! необходимо получить доступ к экземпляру прокси приложения hello в hello США.</span><span class="sxs-lookup"><span data-stu-id="a3356-194">However, hop 1 can be more expensive depending on where hello user is, because users across hello world must access hello Application Proxy instance in hello US.</span></span> <span data-ttu-id="a3356-195">Следует отметить, что в случае глобального распределения пользователя любые решения прокси будет иметь сходные характеристики.</span><span class="sxs-lookup"><span data-stu-id="a3356-195">It's worth noting that any proxy solution has similar characteristics regarding users being spread out globally.</span></span>

![Схема, показывающая, что пользователи будут распределены глобально, но hello прокси-сервера, соединитель и приложения находятся в hello нам](./media/application-proxy-network-topologies/application-proxy-pattern2.png)

### <a name="use-case-3"></a><span data-ttu-id="a3356-197">Вариант использования 3</span><span class="sxs-lookup"><span data-stu-id="a3356-197">Use case 3</span></span>

<span data-ttu-id="a3356-198">**Сценарий:** приложение hello находится в сети организации в hello нам.</span><span class="sxs-lookup"><span data-stu-id="a3356-198">**Scenario:** hello app is in an organization's network in hello US.</span></span> <span data-ttu-id="a3356-199">ExpressRoute с помощью открытого пиринга существует между Azure и hello корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-199">ExpressRoute with public peering exists between Azure and hello corporate network.</span></span>

<span data-ttu-id="a3356-200">**Рекомендация:** выполните шаблонов 1 и 2, описано в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-200">**Recommendation:** Follow patterns 1 and 2, explained in hello previous section.</span></span>

<span data-ttu-id="a3356-201">Во-первых установите соединитель hello как возможные toohello приложения.</span><span class="sxs-lookup"><span data-stu-id="a3356-201">First, place hello connector as close as possible toohello app.</span></span> <span data-ttu-id="a3356-202">Затем система hello автоматически использует ExpressRoute прыжок 2.</span><span class="sxs-lookup"><span data-stu-id="a3356-202">Then, hello system automatically uses ExpressRoute for hop 2.</span></span> 

<span data-ttu-id="a3356-203">Если ссылка ExpressRoute hello использует открытый пиринг, hello трафика между прокси-сервера hello и соединитель hello поверх этой связи.</span><span class="sxs-lookup"><span data-stu-id="a3356-203">If hello ExpressRoute link is using public peering, hello traffic between hello proxy and hello connector flows over that link.</span></span> <span data-ttu-id="a3356-204">Задержка для прыжка 2 будет оптимизирована.</span><span class="sxs-lookup"><span data-stu-id="a3356-204">Hop 2 has optimized latency.</span></span>

![Схема, показывающая ExpressRoute hello прокси-сервера и соединителя](./media/application-proxy-network-topologies/application-proxy-pattern3.png)

### <a name="use-case-4"></a><span data-ttu-id="a3356-206">Вариант использования 4</span><span class="sxs-lookup"><span data-stu-id="a3356-206">Use case 4</span></span>

<span data-ttu-id="a3356-207">**Сценарий:** приложение hello находится в сети организации в hello нам.</span><span class="sxs-lookup"><span data-stu-id="a3356-207">**Scenario:** hello app is in an organization's network in hello US.</span></span> <span data-ttu-id="a3356-208">ExpressRoute с частного пиринга существует между Azure и hello корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="a3356-208">ExpressRoute with private peering exists between Azure and hello corporate network.</span></span>

<span data-ttu-id="a3356-209">**Рекомендация:** шаблон выполните 3, описано в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-209">**Recommendation:** Follow pattern 3, explained in hello previous section.</span></span>

<span data-ttu-id="a3356-210">Установите соединитель hello в hello центра обработки данных Azure, подключенной toohello корпоративной сети с помощью частного пиринга ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="a3356-210">Place hello connector in hello Azure datacenter that is connected toohello corporate network through ExpressRoute private peering.</span></span> 

<span data-ttu-id="a3356-211">Соединитель Hello может размещаться в центре обработки данных Azure hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-211">hello connector can be placed in hello Azure datacenter.</span></span> <span data-ttu-id="a3356-212">Поскольку hello соединителя по-прежнему прямой видимости toohello приложений и центра обработки данных hello через частную сеть hello, остается оптимизированного прыжка 3.</span><span class="sxs-lookup"><span data-stu-id="a3356-212">Since hello connector still has a line of sight toohello application and hello datacenter through hello private network, hop 3 remains optimized.</span></span> <span data-ttu-id="a3356-213">Кроме того, теперь оптимизирован и прыжок 2.</span><span class="sxs-lookup"><span data-stu-id="a3356-213">In addition, hop 2 is optimized further.</span></span>

![Схема, показывающая соединителя hello в центре обработки данных Azure и ExpressRoute между соединитель hello и приложения](./media/application-proxy-network-topologies/application-proxy-pattern4.png)

### <a name="use-case-5"></a><span data-ttu-id="a3356-215">Вариант использования 5</span><span class="sxs-lookup"><span data-stu-id="a3356-215">Use case 5</span></span>

<span data-ttu-id="a3356-216">**Сценарий:** приложение hello находится в сети организации в hello Европа, с экземпляром прокси приложения hello и большинство пользователей hello нам.</span><span class="sxs-lookup"><span data-stu-id="a3356-216">**Scenario:** hello app is in an organization's network in hello EU, with hello Application Proxy instance and most users in hello US.</span></span>

<span data-ttu-id="a3356-217">**Рекомендация:** соединитель hello месте рядом приложение hello.</span><span class="sxs-lookup"><span data-stu-id="a3356-217">**Recommendation:** Place hello connector near hello app.</span></span> <span data-ttu-id="a3356-218">Поскольку Американские пользователи обращаются экземпляр прокси-сервера приложений, который происходит toobe в hello же регионе прыжок 1 не слишком затратными.</span><span class="sxs-lookup"><span data-stu-id="a3356-218">Because US users are accessing an Application Proxy instance that happens toobe in hello same region, hop 1 is not too expensive.</span></span> <span data-ttu-id="a3356-219">Прыжок 3 оптимизирован.</span><span class="sxs-lookup"><span data-stu-id="a3356-219">Hop 3 is optimized.</span></span> <span data-ttu-id="a3356-220">Рассмотрите возможность использования ExpressRoute toooptimize прыжок 2.</span><span class="sxs-lookup"><span data-stu-id="a3356-220">Consider using ExpressRoute toooptimize hop 2.</span></span> 

![Схема, показывающая пользователей и прокси-сервера в hello США, с соединителем hello и приложения в hello Европа](./media/application-proxy-network-topologies/application-proxy-pattern5b.png)

<span data-ttu-id="a3356-222">Также в этой ситуации можно применить еще один вариант.</span><span class="sxs-lookup"><span data-stu-id="a3356-222">You can also consider using one other variant in this situation.</span></span> <span data-ttu-id="a3356-223">Если большинство пользователей в организации hello в hello нам, затем скорее всего, сети расширяет toohello нам также.</span><span class="sxs-lookup"><span data-stu-id="a3356-223">If most users in hello organization are in hello US, then chances are that your network extends toohello US as well.</span></span> <span data-ttu-id="a3356-224">Установите соединитель hello в hello США и используйте приложение toohello строки hello выделенной внутренней корпоративной сети в hello ЕС.</span><span class="sxs-lookup"><span data-stu-id="a3356-224">Place hello connector in hello US, and use hello dedicated internal corporate network line toohello application in hello EU.</span></span> <span data-ttu-id="a3356-225">Этот позволит оптимизировать прыжки 2 и 3.</span><span class="sxs-lookup"><span data-stu-id="a3356-225">This way hops 2 and 3 are optimized.</span></span>

![Схема, показывающая пользователей, прокси-сервер и соединитель в США, приложение в hello Европа hello](./media/application-proxy-network-topologies/application-proxy-pattern5c.png)

## <a name="next-steps"></a><span data-ttu-id="a3356-227">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a3356-227">Next steps</span></span>

- [<span data-ttu-id="a3356-228">Включение прокси приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-228">Enable Application Proxy</span></span>](active-directory-application-proxy-enable.md)
- [<span data-ttu-id="a3356-229">Включение единого входа</span><span class="sxs-lookup"><span data-stu-id="a3356-229">Enable single-sign on</span></span>](active-directory-application-proxy-sso-using-kcd.md)
- [<span data-ttu-id="a3356-230">Включение условного доступа</span><span class="sxs-lookup"><span data-stu-id="a3356-230">Enable conditional access</span></span>](active-directory-application-proxy-conditional-access.md)
- [<span data-ttu-id="a3356-231">Устранение неполадок с прокси приложения</span><span class="sxs-lookup"><span data-stu-id="a3356-231">Troubleshoot issues you're having with Application Proxy</span></span>](active-directory-application-proxy-troubleshoot.md)
