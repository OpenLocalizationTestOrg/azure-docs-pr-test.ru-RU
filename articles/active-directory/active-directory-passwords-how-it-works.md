---
title: "Руководство по Azure AD SSPR | Документация Майкрософт"
description: "Руководство по самостоятельному сбросу пароля в Azure AD."
services: active-directory
keywords: 
documentationcenter: 
author: MicrosoftGuyJFlo
manager: femila
ms.reviewer: gahug
ms.assetid: 618c5908-5bf6-4f0d-bf88-5168dfb28a88
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: joflore
ms.custom: it-pro
ms.openlocfilehash: c177192bbe69d179a25d174b06a0813ec28e2615
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="self-service-password-reset-in-azure-ad-deep-dive"></a>Руководство по самостоятельному сбросу пароля в Azure AD

Как работает самостоятельный сброс пароля (SSPR)? Что означает этот параметр в интерфейсе hello? Продолжить чтение toofind подробные сведения о Azure AD самостоятельный пароля сброса.

## <a name="how-does-hello-password-reset-portal-work"></a>Как пароль hello сброса рабочего портала

При переходе toohello портала сброса паролей, рабочий процесс будет запущен toodetermine:

   * Как должно быть локализовано hello страницы?
   * Является допустимым hello учетная запись пользователя?
   * Какой организации hello принадлежит пользователь?
   * Где осуществляется hello пароль?
   * Функция hello пользователя лицензированных toouse hello?


Прочтите hello описанные ниже toolearn о hello логики hello страницу сброса пароля.

1. Пользователь щелкает hello нет доступа к вашей учетной записи ссылку или переходит непосредственно слишком[https://passwordreset.microsoftonline.com](https://passwordreset.microsoftonline.com).
2. На основе на hello языка браузера hello качества подготавливается hello соответствующем языке. Hello интерфейса для сброса пароля локализован на hello те же языки, что поддерживает Office 365.
3. Пользователь вводит идентификатор пользователя и проходит тест CAPTCHA.
4. Azure AD проверяет, является ли пользователь hello может toouse этот компонент, выполнив hello ниже:
   * Проверяет, что этот пользователь hello имеет включения этой функции и назначенную лицензию Azure AD.
     * Является ли пользователь hello не имеет назначить лицензию или эта функция включена, пользователь hello задаваемые toocontact их tooreset администратора свой пароль.
   * Проверяет, что этот пользователь hello имеет hello правого запроса данных в учетной записи в соответствии с политикой администратора.
     * Если политика требует только одну проверку, то проверяется, что этот пользователь hello заданы соответствующие данные hello хотя бы для одного из включенных политикой администратора hello hello.
       * Если пользователь hello не настроен, а затем hello пользователя является желательно toocontact их tooreset администратора свой пароль.
     * Если политика hello требует двух проверок, то проверяется наличие этого пользователя hello hello соответствующие данные, определенные для по крайней мере двух проверок hello из включенных политикой администратора hello.
       * Если hello учетная запись не настроена, то мы hello пользователя является желательно toocontact их tooreset администратора свой пароль.
   * Проверяет, если hello управление паролем пользователя на локальном компьютере (федеративных или с синхронизацией хэшей паролей).
     * Если развернута служба обратной записи и пароля пользователя hello осуществляется локально, пользователь hello допускается tooproceed tooauthenticate и сброса пароля.
     * Если не развернута служба обратной записи и пароль hello пользователя осуществляется локально, то пользователь hello задаваемые toocontact их tooreset администратора свой пароль.
5. Если выяснилось, что этот пользователь hello может toosuccessfully сброса пароля, а затем hello запускается процесс сброса hello.

## <a name="authentication-methods"></a>Методы проверки подлинности

При включении самостоятельного сброса пароля (SSPR) необходимо выбрать хотя бы один из hello следующие параметры для методов проверки подлинности. Мы настоятельно советуем выбрать по крайней мере два метода проверки подлинности.

* Email
* Мобильный телефон
* Рабочий телефон
* Секретные вопросы

### <a name="what-fields-are-used-in-hello-directory-for-authentication-data"></a>Какие поля используются в каталоге hello для данных проверки подлинности

* Рабочий телефон соответствует tooOffice телефон
    * Пользователи, не удается tooset для данного поля сами должны быть определены администратором
* Мобильный телефон соответствует tooeither телефон для аутентификации (не открытые) или мобильного телефона (публично видимых)
    * Hello службы сначала ищет телефон для аутентификации, затем возвращается tooMobile телефон, если не присутствует
* Запасной адрес электронной почты соответствует tooeither проверочный адрес электронной почты (не открытые) или запасной адрес электронной почты
    * Hello службы сначала ищет электронной почты для проверки подлинности, происходит сбой задней tooAlternate электронной почты

По умолчанию только hello облака рабочий телефон и мобильный телефон: синхронизация атрибутов tooyour облачного каталога из локального каталога для данных проверки подлинности.

Пользователи могут только сброса пароля, если у них есть данные в методы проверки подлинности hello, hello администратор включил и требуется.

Если пользователям не требуется их toobe номера мобильного телефона отображается в каталоге hello, но будет по-прежнему как toouse его для сброса пароля, администраторы не должны заполнить его в каталоге hello и hello пользователя необходимо заполнить их **телефон для аутентификации ** атрибута с помощью hello [портала регистрации сброса пароля](http://aka.ms/ssprsetup). Администраторы могут просматривать эту информацию в профиле пользователя hello, но он не опубликован в другом месте. Если учетной записи администратора Azure регистрирует свой номер телефона для проверки подлинности, он заполняется в поле мобильного телефона hello и является видимым.

### <a name="number-of-authentication-methods-required"></a>Необходимое количество методов проверки подлинности

Этот параметр определяет минимальное количество hello hello доступные методы проверки подлинности пользователь должен проходить через tooreset или разблокировать свой пароль и можно задать tooeither 1 или 2.

Пользователи могут выбирать toosupply дополнительные методы проверки подлинности, если они включены администратором hello.

Если пользователь не имеет hello минимальные необходимые методы регистрации, они увидят страницу ошибки, который направляет их toorequest tooreset администратора свой пароль.

### <a name="how-secure-are-my-security-questions"></a>Уровень безопасности контрольных вопросов

Если вы используете контрольные вопросы, рекомендуется их используется одного метода другим, они могут быть менее безопасен, чем другие методы, поскольку некоторые пользователи могут знать ответы hello tooanother вопросы пользователей.

> [!NOTE] 
> Вопросы безопасности, хранятся в объекте пользователя в каталоге hello закрыты и защищены и могут только получать ответ пользователей во время регистрации. Нет возможности для tooread администратора или изменить пользователей вопросов и ответов.
>

### <a name="security-question-localization"></a>Локализация контрольных вопросов

Все стандартные вопросы, следующие за локализованы hello полный набор языков Office 365, на основе языкового стандарта браузер пользователя hello.

* В каком городе вы познакомились с первой супругой или первым супругом?
* В каком городе познакомились ваши родители?
* В каком городе живет ваш ближайший родственник?
* В каком городе родился ваш отец?
* В каком городе была ваша первая работа?
* В каком городе родилась ваша мать?
* В каком городе вы провели Новый год в 2000 году?
* Что такое hello Фамилия вашего любимого учителя в высокой * школе?
* Что такое имя hello учебного заведения, в которое вы применили toobut не смогли поступить?
* Что такое имя hello hello заведения, в котором вы сыграли первую свадьбу?
* Какое отчество у вашего отца?
* Какое ваше любимое блюдо?
* Какие имя и фамилия у вашей бабушки по материнской линии?
* Какое отчество у вашей матери?
* Какой месяц и год рождения вашего старшего брата или сестры? (Например, ноябрь 1985 г.)
* Какое отчество у вашего самого старого родственника?
* Какие имя и фамилия у вашего дедушки по отцовской линии?
* Какое отчество у вашего самого младшего родственника?
* Какую школу вы посещали в шестом классе?
* Что впервые hello и фамилия вашего лучшего друга детства?
* Что впервые hello и фамилия вашей первая любовь?
* Была hello Фамилия вашего любимого учителя в начальной школе?
* Была hello Марка и модель вашего первого автомобиля или мотоцикла?
* Была hello имя hello первой школы, в которую вы ходили?
* Была hello имя hello медицинского учреждения, в котором вы родились?
* Имя hello улице hello вашего домашнего самый первый была?
* Была hello имя вашего героя детства?
* Была hello имя вашего любимого плюшевого зверька?
* Имя первого домашнего hello была?
* Какое прозвище было у вас в детстве?
* Какой вид спорта вы любили в старших классах?
* Какова ваша первая работа?
* То, что были hello последние четыре цифры номер телефона в детстве?
* Когда вы были маленькими, что нужна toobe детстве?
* Кто является hello самый знаменитый человек, которого вы встречали?

### <a name="custom-security-questions"></a>Пользовательские контрольные вопросы

Пользовательские контрольные вопросы не переведены на другие языки. Все пользовательские вопросы отображаются в hello они вводятся в hello административный интерфейс пользователя, даже если hello браузера языковой стандарт пользователя — другой язык. Если требуются локализованные вопросы, используйте стандартные hello вопросы.

Максимальная длина пользовательских защитный вопрос Hello составляет 200 символов.

### <a name="security-question-requirements"></a>Требования к контрольному вопросу

* Минимальное количество знаков в ответе — 3.
* Максимальное количество знаков в ответе — 40.
* Пользователи не должны отвечать hello же вопрос несколько раз
* Пользователи могут не предоставлять hello же ответить toomore, чем один вопрос
* Может быть любой набор символов используется toodefine вопросов и ответов, включая символы Юникода
* Hello число заданных вопросов должно быть больше, чем меньше число toohello tooregister необходимые вопросы

## <a name="registration"></a>Регистрация

### <a name="require-users-tooregister-when-signing-in"></a>Требуется tooregister пользователей при входе

Включение этого параметра требуется пользователь, который включен для пароля сброса hello toocomplete регистрацию для сброса пароля, если они войти в систему с помощью Azure AD toosign в вроде тех, которые выполните tooapplications:

* Office 365
* Портал Azure
* Панель доступа
* федеративные приложения;
* пользовательские приложения, использующие Azure AD.

Отключение этой функции по-прежнему позволит пользователям toomanually регистра свои контактные данные, посетив [http://aka.ms/ssprsetup](http://aka.ms/ssprsetup) или щелкнув hello **регистрироваться для сброса пароля** ссылку в разделе hello Вкладка профиль в панель доступа hello.

> [!NOTE]
> Пользователи могут отклонить портала регистрации сброса пароля hello, нажав кнопку "Отмена", или закрытия окна hello, но запрос каждый раз, когда они входа до своего завершения регистрации.
>

### <a name="number-of-days-before-users-are-asked-tooreconfirm-their-authentication-information"></a>Количество дней, прежде чем пользователи задаваемые tooreconfirm данные проверки подлинности

Этот параметр определяет период времени между задание и подтверждение сведения для проверки подлинности, hello и доступно только при включении hello **требуют tooregister пользователей при входе в** параметр.

Допустимые значения: 0 до 730 дней с 0, то есть никогда не запрашивает данные проверки подлинности пользователей tooreconfirm

## <a name="notifications"></a>Уведомления

### <a name="notify-users-on-password-resets"></a>"Уведомлять пользователей о сбросе пароля";

Если этот параметр имеет значение tooyes, hello пользователь сбрасывает свой пароль получает сообщение электронной почты о том, что пароль был изменен через hello SSPR портала tootheir основной и запасной адрес электронной почты адреса на файл в Azure AD. Больше это уведомление никому не отправляется.

### <a name="notify-all-admins-when-other-admins-reset-their-passwords"></a>"Уведомлять всех администраторов, если другие администраторы сбрасывают свои пароли"

Если этот параметр имеет значение tooyes, а затем **всем администраторам** получать по электронной почте tootheir основной адрес электронной почты на файл в Azure AD с уведомлением о том, что другой администратор изменил свой пароль, с помощью SSPR.

Пример. В среде есть 4 администратора. Администратор А сбрасывает их пароли с помощью SSPR. Администраторы Б, В и Г получат письмо с уведомлением об этом событии.

## <a name="on-premises-integration"></a>Интеграция с локальной средой

Установив, настроив и включив Azure AD Connect, вы получите дополнительные параметры интеграции с локальной средой.

### <a name="write-back-passwords-tooyour-on-premises-directory"></a>Обратная запись паролей tooyour локального каталога

Определяет, включена ли обратная запись паролей для этого каталога и, если обратная запись включена, указывает состояние hello hello локальная служба обратной записи. Это полезно, если требуется hello пароль tootemporarily отключение обратной записи без повторной настройки Azure AD Connect.

* Если переключение hello является tooyes набор обратная запись будет включена и федеративные и синхронизации хэша пароля пользователя будет доступ tooreset свои пароли.
* Если переключение hello является toono набор обратная запись будет отключена и федеративные и синхронизации хэша пароля пользователя не будет возможности tooreset свои пароли.

### <a name="allow-users-toounlock-accounts-without-resetting-their-password"></a>Разрешить пользователям toounlock учетные записи без сброса пароля

Назначает ли пользователей, посетите портал сброса паролей hello должно быть toounlock параметр данного hello их в локальной среде Active Directory учетные записи без сброса пароля. По умолчанию, Azure AD будет всегда разблокировать учетные записи при выполнении сброса пароля, этот параметр позволяет tooseparate эти две операции. 

* Если задать слишком «yes», то пользователи будут tooreset hello данного параметра пароль и разблокировать учетную запись hello или toounlock без сброса пароля hello.
* Если значение слишком «no», то пользователи будут только может tooperform объединенный пароля и учетной записи операцию разблокировки.

## <a name="network-requirements"></a>Требования к сети

### <a name="firewall-rules"></a>Правила файрволла

[URL-адреса и диапазоны IP-адресов Office 365](https://support.office.com/article/Office-365-URLs-and-IP-address-ranges-8548a211-3fe7-47cb-abb1-355ea5aa88a2)

Для Azure AD Connect версии 1.1.443.0 и выше, вы должны исходящих следующие toohello доступа HTTPS
* passwordreset.microsoftonline.com
* servicebus.windows.net.

Для более детального доступа можно найти список hello обновления Microsoft Azure Datacenter диапазоны IP-адресов, обновляется каждую среду и поместить в силу следующих hello понедельник [здесь](https://www.microsoft.com/download/details.aspx?id=41653).

### <a name="idle-connection-timeouts"></a>Время ожидания простоя подключения

средства Hello Azure AD Connect отправляет tooensure конечные точки tooServiceBus периодической проверки связи и поддержку активности, что соединения hello еще существуют. Hello средство должно определять закрывается слишком много подключений, будет автоматически увеличена частоты hello конечной точки toohello проверки связи. Hello наименьшее «проверить связь с интервалами» удаляет toois 1 ping каждые 60 секунд, тем не менее, мы настоятельно рекомендуем что прокси-серверы или брандмауэры допускается toopersist неактивных соединений по крайней мере 2-3 минуты. * Для предыдущих версий мы советуем интервал в 4 минуты или больше.

## <a name="active-directory-permissions"></a>Разрешения Active Directory

Hello учетной записи, указанной в служебной программе hello Azure AD Connect необходимо сбросить пароль, изменить пароль, разрешения на запись на lockoutTime и разрешения на запись на pwdLastSet, расширенные права на любом hello корневой объект **каждого домена** в этом лесу **или** пользователя hello подразделений нужно toobe в области для SSPR.

Если вы не уверены какие выше hello учетная запись относится к откройте hello Azure Active Directory Connect пользовательский Интерфейс для настройки и переключатель hello представление текущей конфигурации. Hello от имени учетной записи требуется разрешение toois tooadd, перечисленных в разделе «Синхронизация каталогов»

Предоставление этих разрешений позволяет hello MA учетная запись службы для каждого леса toomanage паролей от имени учетных записей пользователей в этом лесу. **Если не tooassign эти разрешения, даже если обратная запись выводится toobe правильно настроен, пользователям возникнуть ошибки при попытке toomanage их локальными паролями из облака hello.**

> [!NOTE]
> Может занять час tooan или более для этих разрешений tooreplicate tooall объектов в каталоге.
>

tooset hello соответствующие разрешения для toooccur обратной записи пароля

1. Откройте с учетной записью, имеющей разрешения на администрирование hello соответствующего домена Active Directory — пользователи и компьютеры
2. Из меню "Вид" hello убедитесь, что включен дополнительные функции
3. Hello левой панели щелкните правой кнопкой мыши hello объекта, который представляет корень hello hello домена и выберите команду Свойства
    * Щелкните вкладку Безопасность hello
    * Затем нажмите "Дополнительно".
4. На вкладке разрешения hello нажмите кнопку Добавить
5. Выберите учетную запись hello, что разрешения применяются слишком (из Azure AD Connect программа установки)
6. В toodrop применяется hello списке выберите пользователя дочерних объектов
7. В области разрешений установите флажки hello для следующего hello
    * отмена истечения срока пароля;
    * Сброс пароля
    * изменение пароля;
    * запись lockoutTime;
    * запись pwdLastSet.
8. Нажмите кнопку Применить или ОК через tooapply и закройте все открытые диалоговые окна.

## <a name="how-does-password-reset-work-for-b2b-users"></a>Как работает сброс пароля для пользователей B2B
Сброс и изменение пароля полностью поддерживается во всех конфигурациях B2B.  Чтение ниже для hello трех явную B2B случаях поддерживается сброс паролей.

1. **Пользователи из организации партнера с существующие клиента Azure AD** — Если hello организации сотрудничает с имеет существующий клиент Azure AD, мы **учитывают независимо от политики сброса паролей, включены в этот клиент**. Шаги для пароля Сброс toowork, hello партнера организации только потребности toomake убедиться, что включен Azure AD SSPR, являющийся без дополнительной платы для клиентов Office 365, и можно включить, следуя hello в нашем [Приступая к работе со службой управления паролями ](https://azure.microsoft.com/documentation/articles/active-directory-passwords-getting-started/#enable-users-to-reset-or-change-their-aad-passwords) руководства.
2. **Пользователи, которые зарегистрировались с помощью [самостоятельную регистрацию](active-directory-self-service-signup.md) ** — Если hello сотрудничает с использовавшимися hello [самостоятельную регистрацию](active-directory-self-service-signup.md) tooget компонент в клиента, мы сообщим их сброса с Hello электронной почты, которыми они зарегистрированы.
3. **Пользователи B2B** -каждый новый пользователь B2B, созданных с помощью нового hello [возможности Azure AD B2B](active-directory-b2b-what-is-azure-ad-b2b.md) также будет может tooreset свои пароли с адресом электронной почты hello, они регистрируются во время процесса приглашения hello.

tootest это, откройте toohttp://passwordreset.microsoftonline.com с одним из этих пользователей партнеров. Если они определили дополнительный адрес электронной почты или адрес электронной почты для проверки подлинности, сброс паролей будет работать должным образом.

## <a name="next-steps"></a>Дальнейшие действия

Привет, следующие ссылки предоставляют дополнительную информацию об пароль с помощью Azure AD

* [**Быстрое начало работы с самостоятельным сбросом пароля в Azure AD**](active-directory-passwords-getting-started.md). Запуск и выполнение службы самостоятельного управления паролями Azure AD. 
* [**Licensing requirements for Azure AD self-service password reset**](active-directory-passwords-licensing.md) (Требования к лицензированию самостоятельного сброса пароля в Azure AD). Сведения о настройке лицензирования Azure AD.
* [**Данные** ](active-directory-passwords-data.md) — понять hello данные, которые не требуется и как она используется для управления паролями
* [**Развертывание** ](active-directory-passwords-best-practices.md) -планирование и развертывание SSPR tooyour пользователей с помощью hello рекомендации по следующему адресу
* [**Политики и ограничения для паролей в Azure Active Directory**](active-directory-passwords-policy.md). Общие сведения и информация об установке политик паролей Azure AD.
* [**Обзор компонента обратной записи паролей**](active-directory-passwords-writeback.md). Как работает функция обратной записи паролей с вашим локальным каталогом.
* [**Настройка** ](active-directory-passwords-customize.md) -настроить hello внешний вид и поведение hello SSPR взаимодействие с вашей компании.
* [**Reporting options for Azure AD password management**](active-directory-passwords-reporting.md) (Параметры отчетов для управления паролями Azure AD). Определяйте, кто и когда использовал функцию SSPR.
* [**Вопросы и ответы об управлении паролями**](active-directory-passwords-faq.md). Как? Почему? Что? Где? Кто? Когда? -Ответы tooquestions требуется, чтобы tooask
* [**Устранение неполадок** ](active-directory-passwords-troubleshoot.md) -Узнайте, как tooresolve распространенные проблемы, мы увидим с SSPR

