---
title: "Сопоставление утверждений в Azure Active Directory (общедоступная предварительная версия) | Документы Майкрософт"
description: "На этой странице описываются сопоставления утверждений Azure Active Directory."
services: active-directory
author: billmath
manager: femila
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/14/2017
ms.author: billmath
ms.openlocfilehash: 78dbbe085fca26ad529c6262ba852f3c06ace404
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="claims-mapping-in-azure-active-directory-public-preview"></a><span data-ttu-id="497fb-103">Сопоставление утверждений в Azure Active Directory (общедоступная предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="497fb-103">Claims mapping in Azure Active Directory (public preview)</span></span>

>[!NOTE]
><span data-ttu-id="497fb-104">Эта функция заменяет собой компонент [настройки утверждений](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization), предлагаемый сегодня на портале.</span><span class="sxs-lookup"><span data-stu-id="497fb-104">This feature replaces and supersedes the [claims customization](https://docs.microsoft.com/azure/active-directory/develop/active-directory-saml-claims-customization) offered through the portal today.</span></span> <span data-ttu-id="497fb-105">При настройке утверждения в одном и том же приложении с помощью портала, помимо метода Graph/PowerShell, подробно описанного в данном документе, токены, выдаваемые для этого приложения, будут игнорировать конфигурацию на портале.</span><span class="sxs-lookup"><span data-stu-id="497fb-105">If you customize claims using the portal in addition to the Graph/PowerShell method detailed in this document on the same application, tokens issued for that application will ignore the configuration in the portal.</span></span>
<span data-ttu-id="497fb-106">Конфигурации, настроенные с помощью способов, рассмотренных в этом документе, не будут отражены на портале.</span><span class="sxs-lookup"><span data-stu-id="497fb-106">Configurations made through the methods detailed in this document will not be reflected in the portal.</span></span>

<span data-ttu-id="497fb-107">Эта функция используется администраторами клиента для настройки утверждений, добавленных в токены, для определенных приложений в своих клиентах.</span><span class="sxs-lookup"><span data-stu-id="497fb-107">This feature is used by tenant admins to customize the claims emitted in tokens for a specific application in their tenant.</span></span> <span data-ttu-id="497fb-108">Политики сопоставления утверждений можно использовать в следующих целях:</span><span class="sxs-lookup"><span data-stu-id="497fb-108">You can use claims mapping policies to:</span></span>

- <span data-ttu-id="497fb-109">Выбор утверждений, добавляемых в токены.</span><span class="sxs-lookup"><span data-stu-id="497fb-109">Select which claims are included in tokens.</span></span>
- <span data-ttu-id="497fb-110">Создание типов утверждений, которые еще не существуют.</span><span class="sxs-lookup"><span data-stu-id="497fb-110">Create claim types that do not already exist.</span></span>
- <span data-ttu-id="497fb-111">Выбор или изменение источника данных, добавленного в определенные утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-111">Choose or change the source of data emitted in specific claims.</span></span>

>[!NOTE]
><span data-ttu-id="497fb-112">Эта функция сейчас предоставляется в режиме общедоступной предварительной версии.</span><span class="sxs-lookup"><span data-stu-id="497fb-112">This capability currently is in public preview.</span></span> <span data-ttu-id="497fb-113">Вы должны быть готовы отменить или удалить все изменения.</span><span class="sxs-lookup"><span data-stu-id="497fb-113">Be prepared to revert or remove any changes.</span></span> <span data-ttu-id="497fb-114">На этапе общедоступной предварительной версии эта функция доступна во всех подписках Azure Active Directory (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="497fb-114">The feature is available in any Azure Active Directory (Azure AD) subscription during public preview.</span></span> <span data-ttu-id="497fb-115">Однако, когда функция станет общедоступной, для некоторых аспектов компонента может потребоваться подписка Azure Active Directory Premium.</span><span class="sxs-lookup"><span data-stu-id="497fb-115">However, when the feature becomes generally available, some aspects of the feature might require an Azure Active Directory premium subscription.</span></span>

## <a name="claims-mapping-policy-type"></a><span data-ttu-id="497fb-116">Тип политики сопоставления утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-116">Claims mapping policy type</span></span>
<span data-ttu-id="497fb-117">В Azure AD объект **политики** представлен набором правил, которые применяются к отдельным приложениям или ко всем приложениям в организации.</span><span class="sxs-lookup"><span data-stu-id="497fb-117">In Azure AD, a **Policy** object represents a set of rules enforced on individual applications, or on all applications in an organization.</span></span> <span data-ttu-id="497fb-118">Каждый тип политики имеет уникальную структуру и набор свойств, которые применяются к объектам, для которых назначена эта политика.</span><span class="sxs-lookup"><span data-stu-id="497fb-118">Each type of policy has a unique structure, with a set of properties that are then applied to objects to which they are assigned.</span></span>

<span data-ttu-id="497fb-119">Тип политики сопоставления утверждений — это тип объекта **политики**, который изменяет утверждения, которые добавлены в токены, выданные определенным приложениям.</span><span class="sxs-lookup"><span data-stu-id="497fb-119">A claims mapping policy is a type of **Policy** object that modifies the claims emitted in tokens issued for specific applications.</span></span>

## <a name="claim-sets"></a><span data-ttu-id="497fb-120">Наборы утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-120">Claim sets</span></span>
<span data-ttu-id="497fb-121">Существуют определенные наборы утверждений, которые определяют, как и когда они используются в токенах.</span><span class="sxs-lookup"><span data-stu-id="497fb-121">There are certain sets of claims that define how and when they are used in tokens.</span></span>

### <a name="core-claim-set"></a><span data-ttu-id="497fb-122">Набор основных утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-122">Core claim set</span></span>
<span data-ttu-id="497fb-123">Утверждения из этого набора имеются в каждом токене, независимо от политики.</span><span class="sxs-lookup"><span data-stu-id="497fb-123">Claims in the core claim set are present in every token, regardless of policy.</span></span> <span data-ttu-id="497fb-124">Эти утверждения также считаются ограниченными, изменить их не удастся.</span><span class="sxs-lookup"><span data-stu-id="497fb-124">These claims are also considered restricted, and cannot be modified.</span></span>

### <a name="basic-claim-set"></a><span data-ttu-id="497fb-125">Набор базовых утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-125">Basic claim set</span></span>
<span data-ttu-id="497fb-126">Набор базовых утверждений включает в себя утверждения, которые по умолчанию добавляются в токены (в дополнение к основному набору утверждений).</span><span class="sxs-lookup"><span data-stu-id="497fb-126">The basic claim set includes the claims that are emitted by default for tokens (in addition to the core claim set).</span></span> <span data-ttu-id="497fb-127">Эти утверждения можно опустить или изменить с помощью политик сопоставления утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-127">These claims can be omitted or modified by using the claims mapping policies.</span></span>

### <a name="restricted-claim-set"></a><span data-ttu-id="497fb-128">Набор ограниченных утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-128">Restricted claim set</span></span>
<span data-ttu-id="497fb-129">Такие утверждения невозможно изменить с помощью политики.</span><span class="sxs-lookup"><span data-stu-id="497fb-129">Restricted claims cannot be modified by using policy.</span></span> <span data-ttu-id="497fb-130">Для таких утверждений также невозможно изменить источник данных, а при их создании не применяются преобразования.</span><span class="sxs-lookup"><span data-stu-id="497fb-130">The data source cannot be changed, and no transformation is applied when generating these claims.</span></span>

#### <a name="table-1-json-web-token-jwt-restricted-claim-set"></a><span data-ttu-id="497fb-131">Таблица 1. Набор ограниченных утверждений JSON Web Token (JWT)</span><span class="sxs-lookup"><span data-stu-id="497fb-131">Table 1: JSON Web Token (JWT) restricted claim set</span></span>
|<span data-ttu-id="497fb-132">Тип утверждения (имя)</span><span class="sxs-lookup"><span data-stu-id="497fb-132">Claim type (name)</span></span>|
| ----- |
|<span data-ttu-id="497fb-133">_claim_names</span><span class="sxs-lookup"><span data-stu-id="497fb-133">_claim_names</span></span>|
|<span data-ttu-id="497fb-134">_claim_sources</span><span class="sxs-lookup"><span data-stu-id="497fb-134">_claim_sources</span></span>|
|<span data-ttu-id="497fb-135">access_token</span><span class="sxs-lookup"><span data-stu-id="497fb-135">access_token</span></span>|
|<span data-ttu-id="497fb-136">account_type</span><span class="sxs-lookup"><span data-stu-id="497fb-136">account_type</span></span>|
|<span data-ttu-id="497fb-137">acr</span><span class="sxs-lookup"><span data-stu-id="497fb-137">acr</span></span>|
|<span data-ttu-id="497fb-138">actor</span><span class="sxs-lookup"><span data-stu-id="497fb-138">actor</span></span>|
|<span data-ttu-id="497fb-139">actortoken</span><span class="sxs-lookup"><span data-stu-id="497fb-139">actortoken</span></span>|
|<span data-ttu-id="497fb-140">aio</span><span class="sxs-lookup"><span data-stu-id="497fb-140">aio</span></span>|
|<span data-ttu-id="497fb-141">altsecid</span><span class="sxs-lookup"><span data-stu-id="497fb-141">altsecid</span></span>|
|<span data-ttu-id="497fb-142">amr</span><span class="sxs-lookup"><span data-stu-id="497fb-142">amr</span></span>|
|<span data-ttu-id="497fb-143">app_chain</span><span class="sxs-lookup"><span data-stu-id="497fb-143">app_chain</span></span>|
|<span data-ttu-id="497fb-144">app_displayname</span><span class="sxs-lookup"><span data-stu-id="497fb-144">app_displayname</span></span>|
|<span data-ttu-id="497fb-145">app_res</span><span class="sxs-lookup"><span data-stu-id="497fb-145">app_res</span></span>|
|<span data-ttu-id="497fb-146">appctx</span><span class="sxs-lookup"><span data-stu-id="497fb-146">appctx</span></span>|
|<span data-ttu-id="497fb-147">appctxsender</span><span class="sxs-lookup"><span data-stu-id="497fb-147">appctxsender</span></span>|
|<span data-ttu-id="497fb-148">appid</span><span class="sxs-lookup"><span data-stu-id="497fb-148">appid</span></span>|
|<span data-ttu-id="497fb-149">appidacr</span><span class="sxs-lookup"><span data-stu-id="497fb-149">appidacr</span></span>|
|<span data-ttu-id="497fb-150">assertion</span><span class="sxs-lookup"><span data-stu-id="497fb-150">assertion</span></span>|
|<span data-ttu-id="497fb-151">at_hash</span><span class="sxs-lookup"><span data-stu-id="497fb-151">at_hash</span></span>|
|<span data-ttu-id="497fb-152">aud</span><span class="sxs-lookup"><span data-stu-id="497fb-152">aud</span></span>|
|<span data-ttu-id="497fb-153">auth_data</span><span class="sxs-lookup"><span data-stu-id="497fb-153">auth_data</span></span>|
|<span data-ttu-id="497fb-154">auth_time</span><span class="sxs-lookup"><span data-stu-id="497fb-154">auth_time</span></span>|
|<span data-ttu-id="497fb-155">authorization_code</span><span class="sxs-lookup"><span data-stu-id="497fb-155">authorization_code</span></span>|
|<span data-ttu-id="497fb-156">azp</span><span class="sxs-lookup"><span data-stu-id="497fb-156">azp</span></span>|
|<span data-ttu-id="497fb-157">azpacr</span><span class="sxs-lookup"><span data-stu-id="497fb-157">azpacr</span></span>|
|<span data-ttu-id="497fb-158">c_hash</span><span class="sxs-lookup"><span data-stu-id="497fb-158">c_hash</span></span>|
|<span data-ttu-id="497fb-159">ca_enf</span><span class="sxs-lookup"><span data-stu-id="497fb-159">ca_enf</span></span>|
|<span data-ttu-id="497fb-160">cc</span><span class="sxs-lookup"><span data-stu-id="497fb-160">cc</span></span>|
|<span data-ttu-id="497fb-161">cert_token_use</span><span class="sxs-lookup"><span data-stu-id="497fb-161">cert_token_use</span></span>|
|<span data-ttu-id="497fb-162">client_id</span><span class="sxs-lookup"><span data-stu-id="497fb-162">client_id</span></span>|
|<span data-ttu-id="497fb-163">cloud_graph_host_name</span><span class="sxs-lookup"><span data-stu-id="497fb-163">cloud_graph_host_name</span></span>|
|<span data-ttu-id="497fb-164">cloud_instance_name</span><span class="sxs-lookup"><span data-stu-id="497fb-164">cloud_instance_name</span></span>|
|<span data-ttu-id="497fb-165">cnf</span><span class="sxs-lookup"><span data-stu-id="497fb-165">cnf</span></span>|
|<span data-ttu-id="497fb-166">Код</span><span class="sxs-lookup"><span data-stu-id="497fb-166">code</span></span>|
|<span data-ttu-id="497fb-167">controls</span><span class="sxs-lookup"><span data-stu-id="497fb-167">controls</span></span>|
|<span data-ttu-id="497fb-168">credential_keys</span><span class="sxs-lookup"><span data-stu-id="497fb-168">credential_keys</span></span>|
|<span data-ttu-id="497fb-169">csr</span><span class="sxs-lookup"><span data-stu-id="497fb-169">csr</span></span>|
|<span data-ttu-id="497fb-170">csr_type</span><span class="sxs-lookup"><span data-stu-id="497fb-170">csr_type</span></span>|
|<span data-ttu-id="497fb-171">deviceid</span><span class="sxs-lookup"><span data-stu-id="497fb-171">deviceid</span></span>|
|<span data-ttu-id="497fb-172">dns_names</span><span class="sxs-lookup"><span data-stu-id="497fb-172">dns_names</span></span>|
|<span data-ttu-id="497fb-173">domain_dns_name</span><span class="sxs-lookup"><span data-stu-id="497fb-173">domain_dns_name</span></span>|
|<span data-ttu-id="497fb-174">domain_netbios_name</span><span class="sxs-lookup"><span data-stu-id="497fb-174">domain_netbios_name</span></span>|
|<span data-ttu-id="497fb-175">e_exp</span><span class="sxs-lookup"><span data-stu-id="497fb-175">e_exp</span></span>|
|<span data-ttu-id="497fb-176">email</span><span class="sxs-lookup"><span data-stu-id="497fb-176">email</span></span>|
|<span data-ttu-id="497fb-177">endpoint</span><span class="sxs-lookup"><span data-stu-id="497fb-177">endpoint</span></span>|
|<span data-ttu-id="497fb-178">enfpolids</span><span class="sxs-lookup"><span data-stu-id="497fb-178">enfpolids</span></span>|
|<span data-ttu-id="497fb-179">exp</span><span class="sxs-lookup"><span data-stu-id="497fb-179">exp</span></span>|
|<span data-ttu-id="497fb-180">expires_on</span><span class="sxs-lookup"><span data-stu-id="497fb-180">expires_on</span></span>|
|<span data-ttu-id="497fb-181">grant_type</span><span class="sxs-lookup"><span data-stu-id="497fb-181">grant_type</span></span>|
|<span data-ttu-id="497fb-182">graph</span><span class="sxs-lookup"><span data-stu-id="497fb-182">graph</span></span>|
|<span data-ttu-id="497fb-183">group_sids</span><span class="sxs-lookup"><span data-stu-id="497fb-183">group_sids</span></span>|
|<span data-ttu-id="497fb-184">groups</span><span class="sxs-lookup"><span data-stu-id="497fb-184">groups</span></span>|
|<span data-ttu-id="497fb-185">hasgroups</span><span class="sxs-lookup"><span data-stu-id="497fb-185">hasgroups</span></span>|
|<span data-ttu-id="497fb-186">hash_alg</span><span class="sxs-lookup"><span data-stu-id="497fb-186">hash_alg</span></span>|
|<span data-ttu-id="497fb-187">home_oid</span><span class="sxs-lookup"><span data-stu-id="497fb-187">home_oid</span></span>|
|<span data-ttu-id="497fb-188">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span><span class="sxs-lookup"><span data-stu-id="497fb-188">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span></span>|
|<span data-ttu-id="497fb-189">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span><span class="sxs-lookup"><span data-stu-id="497fb-189">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span></span>|
|<span data-ttu-id="497fb-190">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span><span class="sxs-lookup"><span data-stu-id="497fb-190">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span></span>|
|<span data-ttu-id="497fb-191">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span><span class="sxs-lookup"><span data-stu-id="497fb-191">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span></span>|
|<span data-ttu-id="497fb-192">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span><span class="sxs-lookup"><span data-stu-id="497fb-192">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress</span></span>|
|<span data-ttu-id="497fb-193">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span><span class="sxs-lookup"><span data-stu-id="497fb-193">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name</span></span>|
|<span data-ttu-id="497fb-194">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span><span class="sxs-lookup"><span data-stu-id="497fb-194">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier</span></span>|
|<span data-ttu-id="497fb-195">iat</span><span class="sxs-lookup"><span data-stu-id="497fb-195">iat</span></span>|
|<span data-ttu-id="497fb-196">identityprovider</span><span class="sxs-lookup"><span data-stu-id="497fb-196">identityprovider</span></span>|
|<span data-ttu-id="497fb-197">idp</span><span class="sxs-lookup"><span data-stu-id="497fb-197">idp</span></span>|
|<span data-ttu-id="497fb-198">in_corp</span><span class="sxs-lookup"><span data-stu-id="497fb-198">in_corp</span></span>|
|<span data-ttu-id="497fb-199">instance</span><span class="sxs-lookup"><span data-stu-id="497fb-199">instance</span></span>|
|<span data-ttu-id="497fb-200">ipaddr</span><span class="sxs-lookup"><span data-stu-id="497fb-200">ipaddr</span></span>|
|<span data-ttu-id="497fb-201">isbrowserhostedapp</span><span class="sxs-lookup"><span data-stu-id="497fb-201">isbrowserhostedapp</span></span>|
|<span data-ttu-id="497fb-202">iss</span><span class="sxs-lookup"><span data-stu-id="497fb-202">iss</span></span>|
|<span data-ttu-id="497fb-203">jwk</span><span class="sxs-lookup"><span data-stu-id="497fb-203">jwk</span></span>|
|<span data-ttu-id="497fb-204">key_id</span><span class="sxs-lookup"><span data-stu-id="497fb-204">key_id</span></span>|
|<span data-ttu-id="497fb-205">key_type</span><span class="sxs-lookup"><span data-stu-id="497fb-205">key_type</span></span>|
|<span data-ttu-id="497fb-206">mam_compliance_url</span><span class="sxs-lookup"><span data-stu-id="497fb-206">mam_compliance_url</span></span>|
|<span data-ttu-id="497fb-207">mam_enrollment_url</span><span class="sxs-lookup"><span data-stu-id="497fb-207">mam_enrollment_url</span></span>|
|<span data-ttu-id="497fb-208">mam_terms_of_use_url</span><span class="sxs-lookup"><span data-stu-id="497fb-208">mam_terms_of_use_url</span></span>|
|<span data-ttu-id="497fb-209">mdm_compliance_url</span><span class="sxs-lookup"><span data-stu-id="497fb-209">mdm_compliance_url</span></span>|
|<span data-ttu-id="497fb-210">mdm_enrollment_url</span><span class="sxs-lookup"><span data-stu-id="497fb-210">mdm_enrollment_url</span></span>|
|<span data-ttu-id="497fb-211">mdm_terms_of_use_url</span><span class="sxs-lookup"><span data-stu-id="497fb-211">mdm_terms_of_use_url</span></span>|
|<span data-ttu-id="497fb-212">nameid</span><span class="sxs-lookup"><span data-stu-id="497fb-212">nameid</span></span>|
|<span data-ttu-id="497fb-213">nbf</span><span class="sxs-lookup"><span data-stu-id="497fb-213">nbf</span></span>|
|<span data-ttu-id="497fb-214">netbios_name</span><span class="sxs-lookup"><span data-stu-id="497fb-214">netbios_name</span></span>|
|<span data-ttu-id="497fb-215">nonce</span><span class="sxs-lookup"><span data-stu-id="497fb-215">nonce</span></span>|
|<span data-ttu-id="497fb-216">oid</span><span class="sxs-lookup"><span data-stu-id="497fb-216">oid</span></span>|
|<span data-ttu-id="497fb-217">on_prem_id</span><span class="sxs-lookup"><span data-stu-id="497fb-217">on_prem_id</span></span>|
|<span data-ttu-id="497fb-218">onprem_sam_account_name</span><span class="sxs-lookup"><span data-stu-id="497fb-218">onprem_sam_account_name</span></span>|
|<span data-ttu-id="497fb-219">onprem_sid</span><span class="sxs-lookup"><span data-stu-id="497fb-219">onprem_sid</span></span>|
|<span data-ttu-id="497fb-220">openid2_id</span><span class="sxs-lookup"><span data-stu-id="497fb-220">openid2_id</span></span>|
|<span data-ttu-id="497fb-221">пароль</span><span class="sxs-lookup"><span data-stu-id="497fb-221">password</span></span>|
|<span data-ttu-id="497fb-222">platf</span><span class="sxs-lookup"><span data-stu-id="497fb-222">platf</span></span>|
|<span data-ttu-id="497fb-223">polids</span><span class="sxs-lookup"><span data-stu-id="497fb-223">polids</span></span>|
|<span data-ttu-id="497fb-224">pop_jwk</span><span class="sxs-lookup"><span data-stu-id="497fb-224">pop_jwk</span></span>|
|<span data-ttu-id="497fb-225">preferred_username</span><span class="sxs-lookup"><span data-stu-id="497fb-225">preferred_username</span></span>|
|<span data-ttu-id="497fb-226">previous_refresh_token</span><span class="sxs-lookup"><span data-stu-id="497fb-226">previous_refresh_token</span></span>|
|<span data-ttu-id="497fb-227">primary_sid</span><span class="sxs-lookup"><span data-stu-id="497fb-227">primary_sid</span></span>|
|<span data-ttu-id="497fb-228">puid</span><span class="sxs-lookup"><span data-stu-id="497fb-228">puid</span></span>|
|<span data-ttu-id="497fb-229">pwd_exp</span><span class="sxs-lookup"><span data-stu-id="497fb-229">pwd_exp</span></span>|
|<span data-ttu-id="497fb-230">pwd_url</span><span class="sxs-lookup"><span data-stu-id="497fb-230">pwd_url</span></span>|
|<span data-ttu-id="497fb-231">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="497fb-231">redirect_uri</span></span>|
|<span data-ttu-id="497fb-232">refresh_token</span><span class="sxs-lookup"><span data-stu-id="497fb-232">refresh_token</span></span>|
|<span data-ttu-id="497fb-233">refreshtoken</span><span class="sxs-lookup"><span data-stu-id="497fb-233">refreshtoken</span></span>|
|<span data-ttu-id="497fb-234">request_nonce</span><span class="sxs-lookup"><span data-stu-id="497fb-234">request_nonce</span></span>|
|<span data-ttu-id="497fb-235">resource</span><span class="sxs-lookup"><span data-stu-id="497fb-235">resource</span></span>|
|<span data-ttu-id="497fb-236">role</span><span class="sxs-lookup"><span data-stu-id="497fb-236">role</span></span>|
|<span data-ttu-id="497fb-237">roles</span><span class="sxs-lookup"><span data-stu-id="497fb-237">roles</span></span>|
|<span data-ttu-id="497fb-238">scope</span><span class="sxs-lookup"><span data-stu-id="497fb-238">scope</span></span>|
|<span data-ttu-id="497fb-239">scp</span><span class="sxs-lookup"><span data-stu-id="497fb-239">scp</span></span>|
|<span data-ttu-id="497fb-240">sid</span><span class="sxs-lookup"><span data-stu-id="497fb-240">sid</span></span>|
|<span data-ttu-id="497fb-241">signature</span><span class="sxs-lookup"><span data-stu-id="497fb-241">signature</span></span>|
|<span data-ttu-id="497fb-242">signin_state</span><span class="sxs-lookup"><span data-stu-id="497fb-242">signin_state</span></span>|
|<span data-ttu-id="497fb-243">src1</span><span class="sxs-lookup"><span data-stu-id="497fb-243">src1</span></span>|
|<span data-ttu-id="497fb-244">src2</span><span class="sxs-lookup"><span data-stu-id="497fb-244">src2</span></span>|
|<span data-ttu-id="497fb-245">sub</span><span class="sxs-lookup"><span data-stu-id="497fb-245">sub</span></span>|
|<span data-ttu-id="497fb-246">tbid</span><span class="sxs-lookup"><span data-stu-id="497fb-246">tbid</span></span>|
|<span data-ttu-id="497fb-247">tenant_display_name</span><span class="sxs-lookup"><span data-stu-id="497fb-247">tenant_display_name</span></span>|
|<span data-ttu-id="497fb-248">tenant_region_scope</span><span class="sxs-lookup"><span data-stu-id="497fb-248">tenant_region_scope</span></span>|
|<span data-ttu-id="497fb-249">thumbnail_photo</span><span class="sxs-lookup"><span data-stu-id="497fb-249">thumbnail_photo</span></span>|
|<span data-ttu-id="497fb-250">tid</span><span class="sxs-lookup"><span data-stu-id="497fb-250">tid</span></span>|
|<span data-ttu-id="497fb-251">tokenAutologonEnabled</span><span class="sxs-lookup"><span data-stu-id="497fb-251">tokenAutologonEnabled</span></span>|
|<span data-ttu-id="497fb-252">trustedfordelegation</span><span class="sxs-lookup"><span data-stu-id="497fb-252">trustedfordelegation</span></span>|
|<span data-ttu-id="497fb-253">unique_name</span><span class="sxs-lookup"><span data-stu-id="497fb-253">unique_name</span></span>|
|<span data-ttu-id="497fb-254">upn</span><span class="sxs-lookup"><span data-stu-id="497fb-254">upn</span></span>|
|<span data-ttu-id="497fb-255">user_setting_sync_url</span><span class="sxs-lookup"><span data-stu-id="497fb-255">user_setting_sync_url</span></span>|
|<span data-ttu-id="497fb-256">Имя пользователя</span><span class="sxs-lookup"><span data-stu-id="497fb-256">username</span></span>|
|<span data-ttu-id="497fb-257">uti</span><span class="sxs-lookup"><span data-stu-id="497fb-257">uti</span></span>|
|<span data-ttu-id="497fb-258">ver</span><span class="sxs-lookup"><span data-stu-id="497fb-258">ver</span></span>|
|<span data-ttu-id="497fb-259">verified_primary_email</span><span class="sxs-lookup"><span data-stu-id="497fb-259">verified_primary_email</span></span>|
|<span data-ttu-id="497fb-260">verified_secondary_email</span><span class="sxs-lookup"><span data-stu-id="497fb-260">verified_secondary_email</span></span>|
|<span data-ttu-id="497fb-261">wids</span><span class="sxs-lookup"><span data-stu-id="497fb-261">wids</span></span>|
|<span data-ttu-id="497fb-262">win_ver</span><span class="sxs-lookup"><span data-stu-id="497fb-262">win_ver</span></span>|

#### <a name="table-2-security-assertion-markup-language-saml-restricted-claim-set"></a><span data-ttu-id="497fb-263">Таблица 2. Набор ограниченных утверждений Security Assertion Markup Language (SAML)</span><span class="sxs-lookup"><span data-stu-id="497fb-263">Table 2: Security Assertion Markup Language (SAML) restricted claim set</span></span>
|<span data-ttu-id="497fb-264">Тип утверждения (URI)</span><span class="sxs-lookup"><span data-stu-id="497fb-264">Claim type (URI)</span></span>|
| ----- |
|<span data-ttu-id="497fb-265">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span><span class="sxs-lookup"><span data-stu-id="497fb-265">http://schemas.microsoft.com/ws/2008/06/identity/claims/expiration</span></span>|
|<span data-ttu-id="497fb-266">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span><span class="sxs-lookup"><span data-stu-id="497fb-266">http://schemas.microsoft.com/ws/2008/06/identity/claims/expired</span></span>|
|<span data-ttu-id="497fb-267">http://schemas.microsoft.com/identity/claims/accesstoken</span><span class="sxs-lookup"><span data-stu-id="497fb-267">http://schemas.microsoft.com/identity/claims/accesstoken</span></span>|
|<span data-ttu-id="497fb-268">http://schemas.microsoft.com/identity/claims/openid2_id</span><span class="sxs-lookup"><span data-stu-id="497fb-268">http://schemas.microsoft.com/identity/claims/openid2_id</span></span>|
|<span data-ttu-id="497fb-269">http://schemas.microsoft.com/identity/claims/identityprovider</span><span class="sxs-lookup"><span data-stu-id="497fb-269">http://schemas.microsoft.com/identity/claims/identityprovider</span></span>|
|<span data-ttu-id="497fb-270">http://schemas.microsoft.com/identity/claims/objectidentifier</span><span class="sxs-lookup"><span data-stu-id="497fb-270">http://schemas.microsoft.com/identity/claims/objectidentifier</span></span>|
|<span data-ttu-id="497fb-271">http://schemas.microsoft.com/identity/claims/puid</span><span class="sxs-lookup"><span data-stu-id="497fb-271">http://schemas.microsoft.com/identity/claims/puid</span></span>|
|<span data-ttu-id="497fb-272">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier[MR1]</span><span class="sxs-lookup"><span data-stu-id="497fb-272">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier[MR1]</span></span> |
|<span data-ttu-id="497fb-273">http://schemas.microsoft.com/identity/claims/tenantid</span><span class="sxs-lookup"><span data-stu-id="497fb-273">http://schemas.microsoft.com/identity/claims/tenantid</span></span>|
|<span data-ttu-id="497fb-274">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span><span class="sxs-lookup"><span data-stu-id="497fb-274">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationinstant</span></span>|
|<span data-ttu-id="497fb-275">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span><span class="sxs-lookup"><span data-stu-id="497fb-275">http://schemas.microsoft.com/ws/2008/06/identity/claims/authenticationmethod</span></span>|
|<span data-ttu-id="497fb-276">http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider</span><span class="sxs-lookup"><span data-stu-id="497fb-276">http://schemas.microsoft.com/accesscontrolservice/2010/07/claims/identityprovider</span></span>|
|<span data-ttu-id="497fb-277">http://schemas.microsoft.com/ws/2008/06/identity/claims/groups</span><span class="sxs-lookup"><span data-stu-id="497fb-277">http://schemas.microsoft.com/ws/2008/06/identity/claims/groups</span></span>|
|<span data-ttu-id="497fb-278">http://schemas.microsoft.com/claims/groups.link</span><span class="sxs-lookup"><span data-stu-id="497fb-278">http://schemas.microsoft.com/claims/groups.link</span></span>|
|<span data-ttu-id="497fb-279">http://schemas.microsoft.com/ws/2008/06/identity/claims/role</span><span class="sxs-lookup"><span data-stu-id="497fb-279">http://schemas.microsoft.com/ws/2008/06/identity/claims/role</span></span>|
|<span data-ttu-id="497fb-280">http://schemas.microsoft.com/ws/2008/06/identity/claims/wids</span><span class="sxs-lookup"><span data-stu-id="497fb-280">http://schemas.microsoft.com/ws/2008/06/identity/claims/wids</span></span>|
|<span data-ttu-id="497fb-281">http://schemas.microsoft.com/2014/09/devicecontext/claims/iscompliant</span><span class="sxs-lookup"><span data-stu-id="497fb-281">http://schemas.microsoft.com/2014/09/devicecontext/claims/iscompliant</span></span>|
|<span data-ttu-id="497fb-282">http://schemas.microsoft.com/2014/02/devicecontext/claims/isknown</span><span class="sxs-lookup"><span data-stu-id="497fb-282">http://schemas.microsoft.com/2014/02/devicecontext/claims/isknown</span></span>|
|<span data-ttu-id="497fb-283">http://schemas.microsoft.com/2012/01/devicecontext/claims/ismanaged</span><span class="sxs-lookup"><span data-stu-id="497fb-283">http://schemas.microsoft.com/2012/01/devicecontext/claims/ismanaged</span></span>|
|<span data-ttu-id="497fb-284">http://schemas.microsoft.com/2014/03/psso</span><span class="sxs-lookup"><span data-stu-id="497fb-284">http://schemas.microsoft.com/2014/03/psso</span></span>|
|<span data-ttu-id="497fb-285">http://schemas.microsoft.com/claims/authnmethodsreferences</span><span class="sxs-lookup"><span data-stu-id="497fb-285">http://schemas.microsoft.com/claims/authnmethodsreferences</span></span>|
|<span data-ttu-id="497fb-286">http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor</span><span class="sxs-lookup"><span data-stu-id="497fb-286">http://schemas.xmlsoap.org/ws/2009/09/identity/claims/actor</span></span>|
|<span data-ttu-id="497fb-287">http://schemas.microsoft.com/ws/2008/06/identity/claims/samlissuername</span><span class="sxs-lookup"><span data-stu-id="497fb-287">http://schemas.microsoft.com/ws/2008/06/identity/claims/samlissuername</span></span>|
|<span data-ttu-id="497fb-288">http://schemas.microsoft.com/ws/2008/06/identity/claims/confirmationkey</span><span class="sxs-lookup"><span data-stu-id="497fb-288">http://schemas.microsoft.com/ws/2008/06/identity/claims/confirmationkey</span></span>|
|<span data-ttu-id="497fb-289">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname</span><span class="sxs-lookup"><span data-stu-id="497fb-289">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsaccountname</span></span>|
|<span data-ttu-id="497fb-290">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarygroupsid</span><span class="sxs-lookup"><span data-stu-id="497fb-290">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarygroupsid</span></span>|
|<span data-ttu-id="497fb-291">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarysid</span><span class="sxs-lookup"><span data-stu-id="497fb-291">http://schemas.microsoft.com/ws/2008/06/identity/claims/primarysid</span></span>|
|<span data-ttu-id="497fb-292">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authorizationdecision</span><span class="sxs-lookup"><span data-stu-id="497fb-292">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authorizationdecision</span></span>|
|<span data-ttu-id="497fb-293">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authentication</span><span class="sxs-lookup"><span data-stu-id="497fb-293">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/authentication</span></span>|
|<span data-ttu-id="497fb-294">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/sid</span><span class="sxs-lookup"><span data-stu-id="497fb-294">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/sid</span></span>|
|<span data-ttu-id="497fb-295">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarygroupsid</span><span class="sxs-lookup"><span data-stu-id="497fb-295">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarygroupsid</span></span>|
|<span data-ttu-id="497fb-296">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarysid</span><span class="sxs-lookup"><span data-stu-id="497fb-296">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlyprimarysid</span></span>|
|<span data-ttu-id="497fb-297">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/denyonlysid</span><span class="sxs-lookup"><span data-stu-id="497fb-297">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/denyonlysid</span></span>|
|<span data-ttu-id="497fb-298">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlywindowsdevicegroup</span><span class="sxs-lookup"><span data-stu-id="497fb-298">http://schemas.microsoft.com/ws/2008/06/identity/claims/denyonlywindowsdevicegroup</span></span>|
|<span data-ttu-id="497fb-299">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdeviceclaim</span><span class="sxs-lookup"><span data-stu-id="497fb-299">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdeviceclaim</span></span>|
|<span data-ttu-id="497fb-300">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdevicegroup</span><span class="sxs-lookup"><span data-stu-id="497fb-300">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsdevicegroup</span></span>|
|<span data-ttu-id="497fb-301">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsfqbnversion</span><span class="sxs-lookup"><span data-stu-id="497fb-301">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsfqbnversion</span></span>|
|<span data-ttu-id="497fb-302">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowssubauthority</span><span class="sxs-lookup"><span data-stu-id="497fb-302">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowssubauthority</span></span>|
|<span data-ttu-id="497fb-303">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsuserclaim</span><span class="sxs-lookup"><span data-stu-id="497fb-303">http://schemas.microsoft.com/ws/2008/06/identity/claims/windowsuserclaim</span></span>|
|<span data-ttu-id="497fb-304">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/x500distinguishedname</span><span class="sxs-lookup"><span data-stu-id="497fb-304">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/x500distinguishedname</span></span>|
|<span data-ttu-id="497fb-305">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn</span><span class="sxs-lookup"><span data-stu-id="497fb-305">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/upn</span></span>|
|<span data-ttu-id="497fb-306">http://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid</span><span class="sxs-lookup"><span data-stu-id="497fb-306">http://schemas.microsoft.com/ws/2008/06/identity/claims/groupsid</span></span>|
|<span data-ttu-id="497fb-307">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/spn</span><span class="sxs-lookup"><span data-stu-id="497fb-307">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/spn</span></span>|
|<span data-ttu-id="497fb-308">http://schemas.microsoft.com/ws/2008/06/identity/claims/ispersistent</span><span class="sxs-lookup"><span data-stu-id="497fb-308">http://schemas.microsoft.com/ws/2008/06/identity/claims/ispersistent</span></span>|
|<span data-ttu-id="497fb-309">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/privatepersonalidentifier</span><span class="sxs-lookup"><span data-stu-id="497fb-309">http://schemas.xmlsoap.org/ws/2005/05/identity/claims/privatepersonalidentifier</span></span>|
|<span data-ttu-id="497fb-310">http://schemas.microsoft.com/identity/claims/scope</span><span class="sxs-lookup"><span data-stu-id="497fb-310">http://schemas.microsoft.com/identity/claims/scope</span></span>|

## <a name="claims-mapping-policy-properties"></a><span data-ttu-id="497fb-311">Свойства политики сопоставления утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-311">Claims mapping policy properties</span></span>
<span data-ttu-id="497fb-312">С помощью свойств политики сопоставления утверждений можно указать, какие утверждения добавляются и где находится источник данных.</span><span class="sxs-lookup"><span data-stu-id="497fb-312">Use the properties of a claims mapping policy to control which claims are emitted, and where the data is sourced from.</span></span> <span data-ttu-id="497fb-313">Если политика не задана, система выдает токены, содержащие набор основных утверждений, набор базовых утверждений и любые необязательные утверждения, выбранные приложением для получения.</span><span class="sxs-lookup"><span data-stu-id="497fb-313">If no policy is set, the system issues tokens containing the core claim set, the basic claim set, and any optional claims that the application has chosen to receive.</span></span>

### <a name="include-basic-claim-set"></a><span data-ttu-id="497fb-314">Включение набора базовых утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-314">Include basic claim set</span></span>

<span data-ttu-id="497fb-315">**Строка:** IncludeBasicClaimSet</span><span class="sxs-lookup"><span data-stu-id="497fb-315">**String:** IncludeBasicClaimSet</span></span>

<span data-ttu-id="497fb-316">**Тип данных:** логический (значение True или False)</span><span class="sxs-lookup"><span data-stu-id="497fb-316">**Data type:** Boolean (True or False)</span></span>

<span data-ttu-id="497fb-317">**Общие сведения:** это свойство определяет, включен ли набор базовых утверждений в токены, на которые распространяется эта политика.</span><span class="sxs-lookup"><span data-stu-id="497fb-317">**Summary:** This property determines whether the basic claim set is included in tokens affected by this policy.</span></span> 

- <span data-ttu-id="497fb-318">Если задано значение True, все утверждения в наборе базовых утверждений добавляются в токены, на которые распространяется эта политика.</span><span class="sxs-lookup"><span data-stu-id="497fb-318">If set to True, all claims in the basic claim set are emitted in tokens affected by the policy.</span></span> 
- <span data-ttu-id="497fb-319">Если задано значение False, утверждения в наборе базовых утверждений не добавляются в токены, если только они не добавлены по отдельности в свойстве схемы утверждения этой же политики.</span><span class="sxs-lookup"><span data-stu-id="497fb-319">If set to False, claims in the basic claim set are not in the tokens, unless they are individually added in the claims schema property of the same policy.</span></span>

>[!NOTE] 
><span data-ttu-id="497fb-320">Утверждения из набора основных утверждений имеются в каждом токене, независимо от политики.</span><span class="sxs-lookup"><span data-stu-id="497fb-320">Claims in the core claim set are present in every token, regardless of what this property is set to.</span></span> 

### <a name="claims-schema"></a><span data-ttu-id="497fb-321">Схема утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-321">Claims schema</span></span>

<span data-ttu-id="497fb-322">**Строка:** ClaimsSchema</span><span class="sxs-lookup"><span data-stu-id="497fb-322">**String:** ClaimsSchema</span></span>

<span data-ttu-id="497fb-323">**Тип данных:** большой двоичный объект JSON с одной или несколькими записями схемы утверждения</span><span class="sxs-lookup"><span data-stu-id="497fb-323">**Data type:** JSON blob with one or more claim schema entries</span></span>

<span data-ttu-id="497fb-324">**Общие сведения:** это свойство определяет, какие утверждения присутствуют в токенах, на которые распространяется эта политика, помимо набора базовых утверждений и набора основных утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-324">**Summary:** This property defines which claims are present in the tokens affected by the policy, in addition to the basic claim set and the core claim set.</span></span>
<span data-ttu-id="497fb-325">Для каждой записи схемы утверждения, определенной в этом свойстве, требуются определенные сведения.</span><span class="sxs-lookup"><span data-stu-id="497fb-325">For each claim schema entry defined in this property, certain information is required.</span></span> <span data-ttu-id="497fb-326">Необходимо указать, откуда поступают данные (**Value** или **Пара Source/ID**), а также утверждение, в которое они добавляются (**Тип утверждения**).</span><span class="sxs-lookup"><span data-stu-id="497fb-326">You must specify where the data is coming from (**Value** or **Source/ID pair**), and which claim the data is emitted as (**Claim Type**).</span></span>

### <a name="claim-schema-entry-elements"></a><span data-ttu-id="497fb-327">Элементы записи схемы утверждения</span><span class="sxs-lookup"><span data-stu-id="497fb-327">Claim schema entry elements</span></span>

<span data-ttu-id="497fb-328">**Значение:** элемент "Значение" определяет статическое значение в качестве данных для добавления в утверждение.</span><span class="sxs-lookup"><span data-stu-id="497fb-328">**Value:** The Value element defines a static value as the data to be emitted in the claim.</span></span>

<span data-ttu-id="497fb-329">**Пара источник/идентификатор:** элементы Source и ID определяют, где находится источник данных в утверждении.</span><span class="sxs-lookup"><span data-stu-id="497fb-329">**Source/ID pair:** The Source and ID elements define where the data in the claim is sourced from.</span></span> 

<span data-ttu-id="497fb-330">Для элемента "Источник" необходимо задать одно из следующих значений:</span><span class="sxs-lookup"><span data-stu-id="497fb-330">The Source element must be set to one of the following:</span></span> 


- <span data-ttu-id="497fb-331">"user": данные в утверждении являются свойством в объекте User.</span><span class="sxs-lookup"><span data-stu-id="497fb-331">"user": The data in the claim is a property on the User object.</span></span> 
- <span data-ttu-id="497fb-332">"application": данные в утверждении являются свойством в субъекте-службе приложения (клиента).</span><span class="sxs-lookup"><span data-stu-id="497fb-332">"application": The data in the claim is a property on the application (client) service principal.</span></span> 
- <span data-ttu-id="497fb-333">"resource": данные в утверждении являются свойством в субъекте-службе ресурса.</span><span class="sxs-lookup"><span data-stu-id="497fb-333">"resource": The data in the claim is a property on the resource service principal.</span></span>
- <span data-ttu-id="497fb-334">"audience": данные в утверждении являются свойством в субъекте-службе, который является аудиторией токена (либо клиент, либо субъект-служба ресурса).</span><span class="sxs-lookup"><span data-stu-id="497fb-334">"audience": The data in the claim is a property on the service principal that is the audience of the token (either the client or resource service principal).</span></span>
- <span data-ttu-id="497fb-335">"company": данные в утверждении являются свойством в объекте Company клиента ресурса.</span><span class="sxs-lookup"><span data-stu-id="497fb-335">“company”: The data in the claim is a property on the resource tenant’s Company object.</span></span>
- <span data-ttu-id="497fb-336">"transformation": данные в утверждении берутся из преобразования утверждений (см. раздел "Преобразование утверждений" далее в этой статье).</span><span class="sxs-lookup"><span data-stu-id="497fb-336">"transformation": The data in the claim is from claims transformation (see the "Claims transformation" section later in this article).</span></span> 

<span data-ttu-id="497fb-337">Если источником является преобразование, в это определение утверждения также необходимо добавить элемент **TransformationID**.</span><span class="sxs-lookup"><span data-stu-id="497fb-337">If the source is transformation, the **TransformationID** element must be included in this claim definition as well.</span></span>

<span data-ttu-id="497fb-338">Элемент ID определяет, какое свойство в источнике предоставляет значение для утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-338">The ID element identifies which property on the source provides the value for the claim.</span></span> <span data-ttu-id="497fb-339">В следующей таблице перечислены значения идентификатора, допустимые для каждого значения источника.</span><span class="sxs-lookup"><span data-stu-id="497fb-339">The following table lists the values of ID valid for each value of Source.</span></span>

#### <a name="table-3-valid-id-values-per-source"></a><span data-ttu-id="497fb-340">Таблица 3. Допустимый идентификатор значения для источника</span><span class="sxs-lookup"><span data-stu-id="497fb-340">Table 3: Valid ID values per source</span></span>
|<span data-ttu-id="497fb-341">Источник</span><span class="sxs-lookup"><span data-stu-id="497fb-341">Source</span></span>|<span data-ttu-id="497fb-342">ИД</span><span class="sxs-lookup"><span data-stu-id="497fb-342">ID</span></span>|<span data-ttu-id="497fb-343">Описание</span><span class="sxs-lookup"><span data-stu-id="497fb-343">Description</span></span>|
|-----|-----|-----|
|<span data-ttu-id="497fb-344">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-344">User</span></span>|<span data-ttu-id="497fb-345">surname</span><span class="sxs-lookup"><span data-stu-id="497fb-345">surname</span></span>|<span data-ttu-id="497fb-346">Фамилия</span><span class="sxs-lookup"><span data-stu-id="497fb-346">Family Name</span></span>|
|<span data-ttu-id="497fb-347">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-347">User</span></span>|<span data-ttu-id="497fb-348">givenname</span><span class="sxs-lookup"><span data-stu-id="497fb-348">givenname</span></span>|<span data-ttu-id="497fb-349">Заданное имя</span><span class="sxs-lookup"><span data-stu-id="497fb-349">Given Name</span></span>|
|<span data-ttu-id="497fb-350">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-350">User</span></span>|<span data-ttu-id="497fb-351">displayname</span><span class="sxs-lookup"><span data-stu-id="497fb-351">displayname</span></span>|<span data-ttu-id="497fb-352">Отображаемое имя</span><span class="sxs-lookup"><span data-stu-id="497fb-352">Display Name</span></span>|
|<span data-ttu-id="497fb-353">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-353">User</span></span>|<span data-ttu-id="497fb-354">objectid</span><span class="sxs-lookup"><span data-stu-id="497fb-354">objectid</span></span>|<span data-ttu-id="497fb-355">ObjectID</span><span class="sxs-lookup"><span data-stu-id="497fb-355">ObjectID</span></span>|
|<span data-ttu-id="497fb-356">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-356">User</span></span>|<span data-ttu-id="497fb-357">mail</span><span class="sxs-lookup"><span data-stu-id="497fb-357">mail</span></span>|<span data-ttu-id="497fb-358">Электронная почта</span><span class="sxs-lookup"><span data-stu-id="497fb-358">Email Address</span></span>|
|<span data-ttu-id="497fb-359">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-359">User</span></span>|<span data-ttu-id="497fb-360">userprincipalname</span><span class="sxs-lookup"><span data-stu-id="497fb-360">userprincipalname</span></span>|<span data-ttu-id="497fb-361">Имя участника-пользователя</span><span class="sxs-lookup"><span data-stu-id="497fb-361">User Principal Name</span></span>|
|<span data-ttu-id="497fb-362">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-362">User</span></span>|<span data-ttu-id="497fb-363">department</span><span class="sxs-lookup"><span data-stu-id="497fb-363">department</span></span>|<span data-ttu-id="497fb-364">Department</span><span class="sxs-lookup"><span data-stu-id="497fb-364">Department</span></span>|
|<span data-ttu-id="497fb-365">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-365">User</span></span>|<span data-ttu-id="497fb-366">onpremisessamaccountname</span><span class="sxs-lookup"><span data-stu-id="497fb-366">onpremisessamaccountname</span></span>|<span data-ttu-id="497fb-367">Имя локальной учетной записи SAM</span><span class="sxs-lookup"><span data-stu-id="497fb-367">On Premises Sam Account Name</span></span>|
|<span data-ttu-id="497fb-368">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-368">User</span></span>|<span data-ttu-id="497fb-369">netbiosname</span><span class="sxs-lookup"><span data-stu-id="497fb-369">netbiosname</span></span>|<span data-ttu-id="497fb-370">NetBIOS-имя</span><span class="sxs-lookup"><span data-stu-id="497fb-370">NetBios Name</span></span>|
|<span data-ttu-id="497fb-371">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-371">User</span></span>|<span data-ttu-id="497fb-372">dnsdomainname</span><span class="sxs-lookup"><span data-stu-id="497fb-372">dnsdomainname</span></span>|<span data-ttu-id="497fb-373">DNS-имя домена</span><span class="sxs-lookup"><span data-stu-id="497fb-373">Dns Domain Name</span></span>|
|<span data-ttu-id="497fb-374">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-374">User</span></span>|<span data-ttu-id="497fb-375">onpremisesecurityidentifier</span><span class="sxs-lookup"><span data-stu-id="497fb-375">onpremisesecurityidentifier</span></span>|<span data-ttu-id="497fb-376">Локальный идентификатор безопасности</span><span class="sxs-lookup"><span data-stu-id="497fb-376">on-premises Security Identifier</span></span>|
|<span data-ttu-id="497fb-377">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-377">User</span></span>|<span data-ttu-id="497fb-378">companyname</span><span class="sxs-lookup"><span data-stu-id="497fb-378">companyname</span></span>|<span data-ttu-id="497fb-379">Название организации</span><span class="sxs-lookup"><span data-stu-id="497fb-379">Organization Name</span></span>|
|<span data-ttu-id="497fb-380">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-380">User</span></span>|<span data-ttu-id="497fb-381">streetaddress</span><span class="sxs-lookup"><span data-stu-id="497fb-381">streetaddress</span></span>|<span data-ttu-id="497fb-382">Почтовый адрес</span><span class="sxs-lookup"><span data-stu-id="497fb-382">Street Address</span></span>|
|<span data-ttu-id="497fb-383">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-383">User</span></span>|<span data-ttu-id="497fb-384">postalcode</span><span class="sxs-lookup"><span data-stu-id="497fb-384">postalcode</span></span>|<span data-ttu-id="497fb-385">Почтовый индекс</span><span class="sxs-lookup"><span data-stu-id="497fb-385">Postal Code</span></span>|
|<span data-ttu-id="497fb-386">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-386">User</span></span>|<span data-ttu-id="497fb-387">preferredlanguange</span><span class="sxs-lookup"><span data-stu-id="497fb-387">preferredlanguange</span></span>|<span data-ttu-id="497fb-388">Предпочитаемый язык</span><span class="sxs-lookup"><span data-stu-id="497fb-388">Preferred Language</span></span>|
|<span data-ttu-id="497fb-389">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-389">User</span></span>|<span data-ttu-id="497fb-390">onpremisesuserprincipalname</span><span class="sxs-lookup"><span data-stu-id="497fb-390">onpremisesuserprincipalname</span></span>|<span data-ttu-id="497fb-391">Имя участника-пользователя в локальной среде</span><span class="sxs-lookup"><span data-stu-id="497fb-391">on-premises UPN</span></span>|
|<span data-ttu-id="497fb-392">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-392">User</span></span>|<span data-ttu-id="497fb-393">mailNickname</span><span class="sxs-lookup"><span data-stu-id="497fb-393">mailnickname</span></span>|<span data-ttu-id="497fb-394">Почтовый псевдоним</span><span class="sxs-lookup"><span data-stu-id="497fb-394">Mail Nickname</span></span>|
|<span data-ttu-id="497fb-395">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-395">User</span></span>|<span data-ttu-id="497fb-396">extensionattribute1</span><span class="sxs-lookup"><span data-stu-id="497fb-396">extensionattribute1</span></span>|<span data-ttu-id="497fb-397">Атрибут расширения 1</span><span class="sxs-lookup"><span data-stu-id="497fb-397">Extension Attribute 1</span></span>|
|<span data-ttu-id="497fb-398">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-398">User</span></span>|<span data-ttu-id="497fb-399">extensionattribute2</span><span class="sxs-lookup"><span data-stu-id="497fb-399">extensionattribute2</span></span>|<span data-ttu-id="497fb-400">Атрибут расширения 2</span><span class="sxs-lookup"><span data-stu-id="497fb-400">Extension Attribute 2</span></span>|
|<span data-ttu-id="497fb-401">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-401">User</span></span>|<span data-ttu-id="497fb-402">extensionattribute3</span><span class="sxs-lookup"><span data-stu-id="497fb-402">extensionattribute3</span></span>|<span data-ttu-id="497fb-403">Атрибут расширения 3</span><span class="sxs-lookup"><span data-stu-id="497fb-403">Extension Attribute 3</span></span>|
|<span data-ttu-id="497fb-404">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-404">User</span></span>|<span data-ttu-id="497fb-405">extensionattribute4</span><span class="sxs-lookup"><span data-stu-id="497fb-405">extensionattribute4</span></span>|<span data-ttu-id="497fb-406">Атрибут расширения 4</span><span class="sxs-lookup"><span data-stu-id="497fb-406">Extension Attribute 4</span></span>|
|<span data-ttu-id="497fb-407">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-407">User</span></span>|<span data-ttu-id="497fb-408">extensionattribute5</span><span class="sxs-lookup"><span data-stu-id="497fb-408">extensionattribute5</span></span>|<span data-ttu-id="497fb-409">Атрибут расширения 5</span><span class="sxs-lookup"><span data-stu-id="497fb-409">Extension Attribute 5</span></span>|
|<span data-ttu-id="497fb-410">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-410">User</span></span>|<span data-ttu-id="497fb-411">extensionattribute6</span><span class="sxs-lookup"><span data-stu-id="497fb-411">extensionattribute6</span></span>|<span data-ttu-id="497fb-412">Атрибут расширения 6</span><span class="sxs-lookup"><span data-stu-id="497fb-412">Extension Attribute 6</span></span>|
|<span data-ttu-id="497fb-413">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-413">User</span></span>|<span data-ttu-id="497fb-414">extensionattribute7</span><span class="sxs-lookup"><span data-stu-id="497fb-414">extensionattribute7</span></span>|<span data-ttu-id="497fb-415">Атрибут расширения 7</span><span class="sxs-lookup"><span data-stu-id="497fb-415">Extension Attribute 7</span></span>|
|<span data-ttu-id="497fb-416">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-416">User</span></span>|<span data-ttu-id="497fb-417">extensionattribute8</span><span class="sxs-lookup"><span data-stu-id="497fb-417">extensionattribute8</span></span>|<span data-ttu-id="497fb-418">Атрибут расширения 8</span><span class="sxs-lookup"><span data-stu-id="497fb-418">Extension Attribute 8</span></span>|
|<span data-ttu-id="497fb-419">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-419">User</span></span>|<span data-ttu-id="497fb-420">extensionattribute9</span><span class="sxs-lookup"><span data-stu-id="497fb-420">extensionattribute9</span></span>|<span data-ttu-id="497fb-421">Атрибут расширения 9</span><span class="sxs-lookup"><span data-stu-id="497fb-421">Extension Attribute 9</span></span>|
|<span data-ttu-id="497fb-422">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-422">User</span></span>|<span data-ttu-id="497fb-423">extensionattribute10</span><span class="sxs-lookup"><span data-stu-id="497fb-423">extensionattribute10</span></span>|<span data-ttu-id="497fb-424">Атрибут расширения 10</span><span class="sxs-lookup"><span data-stu-id="497fb-424">Extension Attribute 10</span></span>|
|<span data-ttu-id="497fb-425">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-425">User</span></span>|<span data-ttu-id="497fb-426">extensionattribute11</span><span class="sxs-lookup"><span data-stu-id="497fb-426">extensionattribute11</span></span>|<span data-ttu-id="497fb-427">Атрибут расширения 11</span><span class="sxs-lookup"><span data-stu-id="497fb-427">Extension Attribute 11</span></span>|
|<span data-ttu-id="497fb-428">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-428">User</span></span>|<span data-ttu-id="497fb-429">extensionattribute12</span><span class="sxs-lookup"><span data-stu-id="497fb-429">extensionattribute12</span></span>|<span data-ttu-id="497fb-430">Атрибут расширения 12</span><span class="sxs-lookup"><span data-stu-id="497fb-430">Extension Attribute 12</span></span>|
|<span data-ttu-id="497fb-431">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-431">User</span></span>|<span data-ttu-id="497fb-432">extensionattribute13</span><span class="sxs-lookup"><span data-stu-id="497fb-432">extensionattribute13</span></span>|<span data-ttu-id="497fb-433">Атрибут расширения 13</span><span class="sxs-lookup"><span data-stu-id="497fb-433">Extension Attribute 13</span></span>|
|<span data-ttu-id="497fb-434">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-434">User</span></span>|<span data-ttu-id="497fb-435">extensionattribute14</span><span class="sxs-lookup"><span data-stu-id="497fb-435">extensionattribute14</span></span>|<span data-ttu-id="497fb-436">Атрибут расширения 14</span><span class="sxs-lookup"><span data-stu-id="497fb-436">Extension Attribute 14</span></span>|
|<span data-ttu-id="497fb-437">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-437">User</span></span>|<span data-ttu-id="497fb-438">extensionattribute15</span><span class="sxs-lookup"><span data-stu-id="497fb-438">extensionattribute15</span></span>|<span data-ttu-id="497fb-439">Атрибут расширения 15</span><span class="sxs-lookup"><span data-stu-id="497fb-439">Extension Attribute 15</span></span>|
|<span data-ttu-id="497fb-440">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-440">User</span></span>|<span data-ttu-id="497fb-441">othermail</span><span class="sxs-lookup"><span data-stu-id="497fb-441">othermail</span></span>|<span data-ttu-id="497fb-442">Остальные сообщения</span><span class="sxs-lookup"><span data-stu-id="497fb-442">Other Mail</span></span>|
|<span data-ttu-id="497fb-443">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-443">User</span></span>|<span data-ttu-id="497fb-444">country</span><span class="sxs-lookup"><span data-stu-id="497fb-444">country</span></span>|<span data-ttu-id="497fb-445">Страна</span><span class="sxs-lookup"><span data-stu-id="497fb-445">Country</span></span>|
|<span data-ttu-id="497fb-446">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-446">User</span></span>|<span data-ttu-id="497fb-447">city</span><span class="sxs-lookup"><span data-stu-id="497fb-447">city</span></span>|<span data-ttu-id="497fb-448">City</span><span class="sxs-lookup"><span data-stu-id="497fb-448">City</span></span>|
|<span data-ttu-id="497fb-449">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-449">User</span></span>|<span data-ttu-id="497fb-450">state</span><span class="sxs-lookup"><span data-stu-id="497fb-450">state</span></span>|<span data-ttu-id="497fb-451">Состояние</span><span class="sxs-lookup"><span data-stu-id="497fb-451">State</span></span>|
|<span data-ttu-id="497fb-452">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-452">User</span></span>|<span data-ttu-id="497fb-453">jobtitle</span><span class="sxs-lookup"><span data-stu-id="497fb-453">jobtitle</span></span>|<span data-ttu-id="497fb-454">Должность</span><span class="sxs-lookup"><span data-stu-id="497fb-454">Job Title</span></span>|
|<span data-ttu-id="497fb-455">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-455">User</span></span>|<span data-ttu-id="497fb-456">employeeid</span><span class="sxs-lookup"><span data-stu-id="497fb-456">employeeid</span></span>|<span data-ttu-id="497fb-457">Код сотрудника</span><span class="sxs-lookup"><span data-stu-id="497fb-457">Employee ID</span></span>|
|<span data-ttu-id="497fb-458">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-458">User</span></span>|<span data-ttu-id="497fb-459">facsimiletelephonenumber</span><span class="sxs-lookup"><span data-stu-id="497fb-459">facsimiletelephonenumber</span></span>|<span data-ttu-id="497fb-460">Номер телефона, факса</span><span class="sxs-lookup"><span data-stu-id="497fb-460">Facsimile Telephone Number</span></span>|
|<span data-ttu-id="497fb-461">application, resource, audience</span><span class="sxs-lookup"><span data-stu-id="497fb-461">application, resource, audience</span></span>|<span data-ttu-id="497fb-462">displayname</span><span class="sxs-lookup"><span data-stu-id="497fb-462">displayname</span></span>|<span data-ttu-id="497fb-463">Отображаемое имя</span><span class="sxs-lookup"><span data-stu-id="497fb-463">Display Name</span></span>|
|<span data-ttu-id="497fb-464">application, resource, audience</span><span class="sxs-lookup"><span data-stu-id="497fb-464">application, resource, audience</span></span>|<span data-ttu-id="497fb-465">objected</span><span class="sxs-lookup"><span data-stu-id="497fb-465">objected</span></span>|<span data-ttu-id="497fb-466">ObjectID</span><span class="sxs-lookup"><span data-stu-id="497fb-466">ObjectID</span></span>|
|<span data-ttu-id="497fb-467">application, resource, audience</span><span class="sxs-lookup"><span data-stu-id="497fb-467">application, resource, audience</span></span>|<span data-ttu-id="497fb-468">Теги</span><span class="sxs-lookup"><span data-stu-id="497fb-468">tags</span></span>|<span data-ttu-id="497fb-469">Тег субъекта-службы</span><span class="sxs-lookup"><span data-stu-id="497fb-469">Service Principal Tag</span></span>|
|<span data-ttu-id="497fb-470">Компания</span><span class="sxs-lookup"><span data-stu-id="497fb-470">Company</span></span>|<span data-ttu-id="497fb-471">tenantcountry</span><span class="sxs-lookup"><span data-stu-id="497fb-471">tenantcountry</span></span>|<span data-ttu-id="497fb-472">Страна клиента</span><span class="sxs-lookup"><span data-stu-id="497fb-472">Tenant’s country</span></span>|

<span data-ttu-id="497fb-473">**TransformationID:** элемент TransformationID должен быть указан только в том случае, если для элемента "Источник" задано значение "transformation".</span><span class="sxs-lookup"><span data-stu-id="497fb-473">**TransformationID:** The TransformationID element must be provided only if the Source element is set to “transformation”.</span></span>

- <span data-ttu-id="497fb-474">Этот элемент должен соответствовать элементу ID записи преобразования в свойстве **ClaimsTransformation**, которое определяет порядок создания данных для этого утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-474">This element must match the ID element of the transformation entry in the **ClaimsTransformation** property that defines how the data for this claim is generated.</span></span>

<span data-ttu-id="497fb-475">**Тип утверждения:** элементы **JwtClaimType** и **SamlClaimType** определяют, к какому утверждению относится эта запись схемы утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-475">**Claim Type:** The **JwtClaimType** and **SamlClaimType** elements define which claim this claim schema entry refers to.</span></span>

- <span data-ttu-id="497fb-476">Тип JwtClaimType должен содержать имя утверждения для добавления в JWT.</span><span class="sxs-lookup"><span data-stu-id="497fb-476">The JwtClaimType must contain the name of the claim to be emitted in JWTs.</span></span>
- <span data-ttu-id="497fb-477">Тип SamlClaimType должен содержать URI утверждения для добавления в токены SAML.</span><span class="sxs-lookup"><span data-stu-id="497fb-477">The SamlClaimType must contain the URI of the claim to be emitted in SAML tokens.</span></span>

>[!NOTE]
><span data-ttu-id="497fb-478">Имена и URI утверждений в наборе ограниченных утверждений не удастся использовать для элементов типа утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-478">Names and URIs of claims in the restricted claim set cannot be used for the claim type elements.</span></span> <span data-ttu-id="497fb-479">Дополнительные сведения см. в разделе "Исключения и ограничения" далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="497fb-479">For more information, see the "Exceptions and restrictions" section later in this article.</span></span>

### <a name="claims-transformation"></a><span data-ttu-id="497fb-480">Преобразование утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-480">Claims transformation</span></span>

<span data-ttu-id="497fb-481">**Строка:** ClaimsTransformation</span><span class="sxs-lookup"><span data-stu-id="497fb-481">**String:** ClaimsTransformation</span></span>

<span data-ttu-id="497fb-482">**Тип данных:** большой двоичный объект JSON с одной или несколькими записями преобразования</span><span class="sxs-lookup"><span data-stu-id="497fb-482">**Data type:** JSON blob, with one or more transformation entries</span></span> 

<span data-ttu-id="497fb-483">**Общие сведения:** это свойство используется для применения общих преобразований источника данных, для создания выходных данных для утверждений, указанных в схеме утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-483">**Summary:** Use this property to apply common transformations to source data, to generate the output data for claims specified in the Claims Schema.</span></span>

<span data-ttu-id="497fb-484">**ID:** элемент ID следует использовать для ссылки на эту запись преобразования в записи схемы утверждений TransformationID.</span><span class="sxs-lookup"><span data-stu-id="497fb-484">**ID:** Use the ID element to reference this transformation entry in the TransformationID Claims Schema entry.</span></span> <span data-ttu-id="497fb-485">Это значение должно быть уникальным для каждой записи преобразования в этой политике.</span><span class="sxs-lookup"><span data-stu-id="497fb-485">This value must be unique for each transformation entry within this policy.</span></span>

<span data-ttu-id="497fb-486">**TransformationMethod:** элемент TransformationMethod определяет, какая операция выполняется для создания данных для утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-486">**TransformationMethod:** The TransformationMethod element identifies which operation is performed to generate the data for the claim.</span></span>

<span data-ttu-id="497fb-487">В зависимости от выбранного метода ожидается набор входных и выходных данных.</span><span class="sxs-lookup"><span data-stu-id="497fb-487">Based on the method chosen, a set of inputs and outputs is expected.</span></span> <span data-ttu-id="497fb-488">Они определяются с помощью элементов **InputClaims**, **InputParameters** и **OutputClaims**.</span><span class="sxs-lookup"><span data-stu-id="497fb-488">These are defined by using the **InputClaims**, **InputParameters** and **OutputClaims** elements.</span></span>

#### <a name="table-4-transformation-methods-and-expected-inputs-and-outputs"></a><span data-ttu-id="497fb-489">Таблица 4. Методы преобразования и ожидаемые входные и выходные данные</span><span class="sxs-lookup"><span data-stu-id="497fb-489">Table 4: Transformation methods and expected inputs and outputs</span></span>
|<span data-ttu-id="497fb-490">TransformationMethod</span><span class="sxs-lookup"><span data-stu-id="497fb-490">TransformationMethod</span></span>|<span data-ttu-id="497fb-491">Ожидаемые входные данные</span><span class="sxs-lookup"><span data-stu-id="497fb-491">Expected input</span></span>|<span data-ttu-id="497fb-492">Ожидаемые выходные данные</span><span class="sxs-lookup"><span data-stu-id="497fb-492">Expected output</span></span>|<span data-ttu-id="497fb-493">Описание</span><span class="sxs-lookup"><span data-stu-id="497fb-493">Description</span></span>|
|-----|-----|-----|-----|
|<span data-ttu-id="497fb-494">Объединение</span><span class="sxs-lookup"><span data-stu-id="497fb-494">Join</span></span>|<span data-ttu-id="497fb-495">строка 1, строка 2, разделитель</span><span class="sxs-lookup"><span data-stu-id="497fb-495">string1, string2, separator</span></span>|<span data-ttu-id="497fb-496">outputClaim</span><span class="sxs-lookup"><span data-stu-id="497fb-496">outputClaim</span></span>|<span data-ttu-id="497fb-497">Объединение входных строк с помощью разделителя между ними.</span><span class="sxs-lookup"><span data-stu-id="497fb-497">Joins input strings by using a separator in between.</span></span> <span data-ttu-id="497fb-498">Например, результатом строка 1:"foo@bar.com", строка 2:"sandbox", разделитель:"." будет outputClaim:"foo@bar.com.sandbox"</span><span class="sxs-lookup"><span data-stu-id="497fb-498">For example: string1:"foo@bar.com" , string2:"sandbox" , separator:"." results in outputClaim:"foo@bar.com.sandbox"</span></span>|
|<span data-ttu-id="497fb-499">ExtractMailPrefix</span><span class="sxs-lookup"><span data-stu-id="497fb-499">ExtractMailPrefix</span></span>|<span data-ttu-id="497fb-500">mail</span><span class="sxs-lookup"><span data-stu-id="497fb-500">mail</span></span>|<span data-ttu-id="497fb-501">outputClaim</span><span class="sxs-lookup"><span data-stu-id="497fb-501">outputClaim</span></span>|<span data-ttu-id="497fb-502">Извлекает локальную часть адреса электронной почты.</span><span class="sxs-lookup"><span data-stu-id="497fb-502">Extracts the local part of an email address.</span></span> <span data-ttu-id="497fb-503">Например, результатом mail:"foo@bar.com" будет outputClaim:"foo".</span><span class="sxs-lookup"><span data-stu-id="497fb-503">For example: mail:"foo@bar.com" results in outputClaim:"foo".</span></span> <span data-ttu-id="497fb-504">Если символ "@" отсутствует, то возвращается исходная входная строка в состоянии "как есть".</span><span class="sxs-lookup"><span data-stu-id="497fb-504">If no @ sign is present, then the orignal input string is returned as is.</span></span>|

<span data-ttu-id="497fb-505">**InputClaims:** элемент InputClaims используется для передачи данных из записи схемы утверждения в преобразование.</span><span class="sxs-lookup"><span data-stu-id="497fb-505">**InputClaims:** Use an InputClaims element to pass the data from a claim schema entry to a transformation.</span></span> <span data-ttu-id="497fb-506">Он имеет два атрибута: **ClaimTypeReferenceId** и **TransformationClaimType**.</span><span class="sxs-lookup"><span data-stu-id="497fb-506">It has two attributes: **ClaimTypeReferenceId** and **TransformationClaimType**.</span></span>

- <span data-ttu-id="497fb-507">**ClaimTypeReferenceId** соединяется с элементом ID записи схемы утверждения для поиска соответствующего входного утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-507">**ClaimTypeReferenceId** is joined with ID element of the claim schema entry to find the appropriate input claim.</span></span> 
- <span data-ttu-id="497fb-508">**TransformationClaimType** используется для предоставления уникального имени для этих входных данных.</span><span class="sxs-lookup"><span data-stu-id="497fb-508">**TransformationClaimType** is used to give a unique name to this input.</span></span> <span data-ttu-id="497fb-509">Это имя должно соответствовать одному из ожидаемых входных данных для метода преобразования.</span><span class="sxs-lookup"><span data-stu-id="497fb-509">This name must match one of the expected inputs for the transformation method.</span></span>

<span data-ttu-id="497fb-510">**InputParameters:** элемент InputParameters используется для передачи значения константы в преобразование.</span><span class="sxs-lookup"><span data-stu-id="497fb-510">**InputParameters:** Use an InputParameters element to pass a constant value to a transformation.</span></span> <span data-ttu-id="497fb-511">Он имеет два атрибута: **Value** и **ID**.</span><span class="sxs-lookup"><span data-stu-id="497fb-511">It has two attributes: **Value** and **ID**.</span></span>

- <span data-ttu-id="497fb-512">**Value** — это фактическое значение константы для передачи.</span><span class="sxs-lookup"><span data-stu-id="497fb-512">**Value** is the actual constant value to be passed.</span></span>
- <span data-ttu-id="497fb-513">**ID** используется для предоставления уникального имени для этих входных данных.</span><span class="sxs-lookup"><span data-stu-id="497fb-513">**ID** is used to give a unique name to this input.</span></span> <span data-ttu-id="497fb-514">Это имя должно соответствовать одному из ожидаемых входных данных для метода преобразования.</span><span class="sxs-lookup"><span data-stu-id="497fb-514">This name must match one of the expected inputs for the transformation method.</span></span>

<span data-ttu-id="497fb-515">**OutputClaims:** элемент OutputClaims используется для хранения данных, сгенерированных преобразованием, и привязки этих данных к записи схемы утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-515">**OutputClaims:** Use an OutputClaims element to hold the data generated by a transformation, and tie it to a claim schema entry.</span></span> <span data-ttu-id="497fb-516">Он имеет два атрибута: **ClaimTypeReferenceId** и **TransformationClaimType**.</span><span class="sxs-lookup"><span data-stu-id="497fb-516">It has two attributes: **ClaimTypeReferenceId** and **TransformationClaimType**.</span></span>

- <span data-ttu-id="497fb-517">**ClaimTypeReferenceId** соединяется с элементом ID записи схемы утверждения для поиска соответствующего выходного утверждения.</span><span class="sxs-lookup"><span data-stu-id="497fb-517">**ClaimTypeReferenceId** is joined with the ID of the claim schema entry to find the appropriate output claim.</span></span>
- <span data-ttu-id="497fb-518">**TransformationClaimType** используется для предоставления уникального имени для этих выходных данных.</span><span class="sxs-lookup"><span data-stu-id="497fb-518">**TransformationClaimType** is used to give a unique name to this output.</span></span> <span data-ttu-id="497fb-519">Это имя должно соответствовать одному из ожидаемых выходных данных для метода преобразования.</span><span class="sxs-lookup"><span data-stu-id="497fb-519">This name must match one of the expected outputs for the transformation method.</span></span>

### <a name="exceptions-and-restrictions"></a><span data-ttu-id="497fb-520">Исключения и ограничения</span><span class="sxs-lookup"><span data-stu-id="497fb-520">Exceptions and restrictions</span></span>

<span data-ttu-id="497fb-521">**SAML NameID и UPN:** список атрибутов, из которых берутся значения NameID и UPN, а также список допустимых преобразований утверждений ограничены.</span><span class="sxs-lookup"><span data-stu-id="497fb-521">**SAML NameID and UPN:** The attributes from which you source the NameID and UPN values, and the claims transformations that are permitted, are limited.</span></span>

#### <a name="table-5-attributes-allowed-as-a-data-source-for-saml-nameid"></a><span data-ttu-id="497fb-522">Таблица 5. Атрибуты, разрешенные в качестве источника данных для идентификатора имени SAML NameID</span><span class="sxs-lookup"><span data-stu-id="497fb-522">Table 5: Attributes allowed as a data source for SAML NameID</span></span>
|<span data-ttu-id="497fb-523">Источник</span><span class="sxs-lookup"><span data-stu-id="497fb-523">Source</span></span>|<span data-ttu-id="497fb-524">ИД</span><span class="sxs-lookup"><span data-stu-id="497fb-524">ID</span></span>|<span data-ttu-id="497fb-525">Описание</span><span class="sxs-lookup"><span data-stu-id="497fb-525">Description</span></span>|
|-----|-----|-----|
|<span data-ttu-id="497fb-526">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-526">User</span></span>|<span data-ttu-id="497fb-527">mail</span><span class="sxs-lookup"><span data-stu-id="497fb-527">mail</span></span>|<span data-ttu-id="497fb-528">Электронная почта</span><span class="sxs-lookup"><span data-stu-id="497fb-528">Email Address</span></span>|
|<span data-ttu-id="497fb-529">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-529">User</span></span>|<span data-ttu-id="497fb-530">userprincipalname</span><span class="sxs-lookup"><span data-stu-id="497fb-530">userprincipalname</span></span>|<span data-ttu-id="497fb-531">Имя участника-пользователя</span><span class="sxs-lookup"><span data-stu-id="497fb-531">User Principal Name</span></span>|
|<span data-ttu-id="497fb-532">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-532">User</span></span>|<span data-ttu-id="497fb-533">onpremisessamaccountname</span><span class="sxs-lookup"><span data-stu-id="497fb-533">onpremisessamaccountname</span></span>|<span data-ttu-id="497fb-534">Имя локальной учетной записи SAM</span><span class="sxs-lookup"><span data-stu-id="497fb-534">On Premises Sam Account Name</span></span>|
|<span data-ttu-id="497fb-535">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-535">User</span></span>|<span data-ttu-id="497fb-536">employeeid</span><span class="sxs-lookup"><span data-stu-id="497fb-536">employeeid</span></span>|<span data-ttu-id="497fb-537">Код сотрудника</span><span class="sxs-lookup"><span data-stu-id="497fb-537">Employee ID</span></span>|
|<span data-ttu-id="497fb-538">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-538">User</span></span>|<span data-ttu-id="497fb-539">extensionattribute1</span><span class="sxs-lookup"><span data-stu-id="497fb-539">extensionattribute1</span></span>|<span data-ttu-id="497fb-540">Атрибут расширения 1</span><span class="sxs-lookup"><span data-stu-id="497fb-540">Extension Attribute 1</span></span>|
|<span data-ttu-id="497fb-541">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-541">User</span></span>|<span data-ttu-id="497fb-542">extensionattribute2</span><span class="sxs-lookup"><span data-stu-id="497fb-542">extensionattribute2</span></span>|<span data-ttu-id="497fb-543">Атрибут расширения 2</span><span class="sxs-lookup"><span data-stu-id="497fb-543">Extension Attribute 2</span></span>|
|<span data-ttu-id="497fb-544">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-544">User</span></span>|<span data-ttu-id="497fb-545">extensionattribute3</span><span class="sxs-lookup"><span data-stu-id="497fb-545">extensionattribute3</span></span>|<span data-ttu-id="497fb-546">Атрибут расширения 3</span><span class="sxs-lookup"><span data-stu-id="497fb-546">Extension Attribute 3</span></span>|
|<span data-ttu-id="497fb-547">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-547">User</span></span>|<span data-ttu-id="497fb-548">extensionattribute4</span><span class="sxs-lookup"><span data-stu-id="497fb-548">extensionattribute4</span></span>|<span data-ttu-id="497fb-549">Атрибут расширения 4</span><span class="sxs-lookup"><span data-stu-id="497fb-549">Extension Attribute 4</span></span>|
|<span data-ttu-id="497fb-550">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-550">User</span></span>|<span data-ttu-id="497fb-551">extensionattribute5</span><span class="sxs-lookup"><span data-stu-id="497fb-551">extensionattribute5</span></span>|<span data-ttu-id="497fb-552">Атрибут расширения 5</span><span class="sxs-lookup"><span data-stu-id="497fb-552">Extension Attribute 5</span></span>|
|<span data-ttu-id="497fb-553">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-553">User</span></span>|<span data-ttu-id="497fb-554">extensionattribute6</span><span class="sxs-lookup"><span data-stu-id="497fb-554">extensionattribute6</span></span>|<span data-ttu-id="497fb-555">Атрибут расширения 6</span><span class="sxs-lookup"><span data-stu-id="497fb-555">Extension Attribute 6</span></span>|
|<span data-ttu-id="497fb-556">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-556">User</span></span>|<span data-ttu-id="497fb-557">extensionattribute7</span><span class="sxs-lookup"><span data-stu-id="497fb-557">extensionattribute7</span></span>|<span data-ttu-id="497fb-558">Атрибут расширения 7</span><span class="sxs-lookup"><span data-stu-id="497fb-558">Extension Attribute 7</span></span>|
|<span data-ttu-id="497fb-559">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-559">User</span></span>|<span data-ttu-id="497fb-560">extensionattribute8</span><span class="sxs-lookup"><span data-stu-id="497fb-560">extensionattribute8</span></span>|<span data-ttu-id="497fb-561">Атрибут расширения 8</span><span class="sxs-lookup"><span data-stu-id="497fb-561">Extension Attribute 8</span></span>|
|<span data-ttu-id="497fb-562">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-562">User</span></span>|<span data-ttu-id="497fb-563">extensionattribute9</span><span class="sxs-lookup"><span data-stu-id="497fb-563">extensionattribute9</span></span>|<span data-ttu-id="497fb-564">Атрибут расширения 9</span><span class="sxs-lookup"><span data-stu-id="497fb-564">Extension Attribute 9</span></span>|
|<span data-ttu-id="497fb-565">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-565">User</span></span>|<span data-ttu-id="497fb-566">extensionattribute10</span><span class="sxs-lookup"><span data-stu-id="497fb-566">extensionattribute10</span></span>|<span data-ttu-id="497fb-567">Атрибут расширения 10</span><span class="sxs-lookup"><span data-stu-id="497fb-567">Extension Attribute 10</span></span>|
|<span data-ttu-id="497fb-568">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-568">User</span></span>|<span data-ttu-id="497fb-569">extensionattribute11</span><span class="sxs-lookup"><span data-stu-id="497fb-569">extensionattribute11</span></span>|<span data-ttu-id="497fb-570">Атрибут расширения 11</span><span class="sxs-lookup"><span data-stu-id="497fb-570">Extension Attribute 11</span></span>|
|<span data-ttu-id="497fb-571">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-571">User</span></span>|<span data-ttu-id="497fb-572">extensionattribute12</span><span class="sxs-lookup"><span data-stu-id="497fb-572">extensionattribute12</span></span>|<span data-ttu-id="497fb-573">Атрибут расширения 12</span><span class="sxs-lookup"><span data-stu-id="497fb-573">Extension Attribute 12</span></span>|
|<span data-ttu-id="497fb-574">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-574">User</span></span>|<span data-ttu-id="497fb-575">extensionattribute13</span><span class="sxs-lookup"><span data-stu-id="497fb-575">extensionattribute13</span></span>|<span data-ttu-id="497fb-576">Атрибут расширения 13</span><span class="sxs-lookup"><span data-stu-id="497fb-576">Extension Attribute 13</span></span>|
|<span data-ttu-id="497fb-577">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-577">User</span></span>|<span data-ttu-id="497fb-578">extensionattribute14</span><span class="sxs-lookup"><span data-stu-id="497fb-578">extensionattribute14</span></span>|<span data-ttu-id="497fb-579">Атрибут расширения 14</span><span class="sxs-lookup"><span data-stu-id="497fb-579">Extension Attribute 14</span></span>|
|<span data-ttu-id="497fb-580">Пользователь</span><span class="sxs-lookup"><span data-stu-id="497fb-580">User</span></span>|<span data-ttu-id="497fb-581">extensionattribute15</span><span class="sxs-lookup"><span data-stu-id="497fb-581">extensionattribute15</span></span>|<span data-ttu-id="497fb-582">Атрибут расширения 15</span><span class="sxs-lookup"><span data-stu-id="497fb-582">Extension Attribute 15</span></span>|

#### <a name="table-6-transformation-methods-allowed-for-saml-nameid"></a><span data-ttu-id="497fb-583">Таблица 6. Разрешенные методы преобразования для идентификатора имени SAML NameID</span><span class="sxs-lookup"><span data-stu-id="497fb-583">Table 6: Transformation methods allowed for SAML NameID</span></span>
|<span data-ttu-id="497fb-584">TransformationMethod</span><span class="sxs-lookup"><span data-stu-id="497fb-584">TransformationMethod</span></span>|<span data-ttu-id="497fb-585">Ограничения</span><span class="sxs-lookup"><span data-stu-id="497fb-585">Restrictions</span></span>|
| ----- | ----- |
|<span data-ttu-id="497fb-586">ExtractMailPrefix</span><span class="sxs-lookup"><span data-stu-id="497fb-586">ExtractMailPrefix</span></span>|<span data-ttu-id="497fb-587">None</span><span class="sxs-lookup"><span data-stu-id="497fb-587">None</span></span>|
|<span data-ttu-id="497fb-588">Объединение</span><span class="sxs-lookup"><span data-stu-id="497fb-588">Join</span></span>|<span data-ttu-id="497fb-589">Присоединяемый суффикс должен быть подтвержденным доменом клиента ресурса.</span><span class="sxs-lookup"><span data-stu-id="497fb-589">The suffix being joined must be a verified domain of the resource tenant.</span></span>|

### <a name="custom-signing-key"></a><span data-ttu-id="497fb-590">Пользовательский ключ подписывания</span><span class="sxs-lookup"><span data-stu-id="497fb-590">Custom signing key</span></span>
<span data-ttu-id="497fb-591">Чтобы политика сопоставления утверждений вступила в силу, объекту субъекта-службы необходимо назначить пользовательский ключ подписывания.</span><span class="sxs-lookup"><span data-stu-id="497fb-591">A custom signing key must be assigned to the service principal object for a claims mapping policy to take effect.</span></span> <span data-ttu-id="497fb-592">Все выпущенные токены, на которые распространяется эта политика, должны быть подписаны с помощью этого ключа.</span><span class="sxs-lookup"><span data-stu-id="497fb-592">All tokens issued that have been impacted by the policy are signed with this key.</span></span> <span data-ttu-id="497fb-593">Приложения должны быть настроены на прием токенов, подписанных этим ключом.</span><span class="sxs-lookup"><span data-stu-id="497fb-593">Applications must be configured to accept tokens signed with this key.</span></span> <span data-ttu-id="497fb-594">Это гарантирует подтверждение того, что токены были изменены создателем политики сопоставления утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-594">This ensures acknowledgment that tokens have been modified by the creator of the claims mapping policy.</span></span> <span data-ttu-id="497fb-595">Таким образом обеспечивается защита приложений от применения политик сопоставления утверждений, созданных вредоносными субъектами.</span><span class="sxs-lookup"><span data-stu-id="497fb-595">This protects applications from claims mapping policies created by malicious actors.</span></span>

### <a name="cross-tenant-scenarios"></a><span data-ttu-id="497fb-596">Межклиентские сценарии</span><span class="sxs-lookup"><span data-stu-id="497fb-596">Cross-tenant scenarios</span></span>
<span data-ttu-id="497fb-597">Политики сопоставления утверждений не применяются к гостевым пользователям.</span><span class="sxs-lookup"><span data-stu-id="497fb-597">Claims mapping policies do not apply to guest users.</span></span> <span data-ttu-id="497fb-598">Если гость пытается получить доступ к приложению, к субъекту-службе которого применяется политика сопоставления утверждений, выдается токен по умолчанию (политика не применяется).</span><span class="sxs-lookup"><span data-stu-id="497fb-598">If a guest user attempts to access an application with a claims mapping policy assigned to its service principal, the default token is issued (the policy has no effect).</span></span>

## <a name="claims-mapping-policy-assignment"></a><span data-ttu-id="497fb-599">Назначение политики сопоставления утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-599">Claims mapping policy assignment</span></span>
<span data-ttu-id="497fb-600">Политики сопоставления утверждений можно назначить только объектам субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-600">Claims mapping policies can only be assigned to service principal objects.</span></span>

### <a name="example-claims-mapping-policies"></a><span data-ttu-id="497fb-601">Примеры политик сопоставления утверждений</span><span class="sxs-lookup"><span data-stu-id="497fb-601">Example claims mapping policies</span></span>

<span data-ttu-id="497fb-602">В Azure AD существует множество сценариев, когда можно настроить утверждения, добавляемые в токены для определенных субъектов-служб.</span><span class="sxs-lookup"><span data-stu-id="497fb-602">In Azure AD, many scenarios are possible when you can customize claims emitted in tokens for specific service principals.</span></span> <span data-ttu-id="497fb-603">В этом разделе рассматриваются наиболее распространенные сценарии, которые помогут вам понять, как использовать политики сопоставления утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-603">In this section, we walk through a few common scenarios that can help you grasp how to use the claims mapping policy type.</span></span>

#### <a name="prerequisites"></a><span data-ttu-id="497fb-604">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="497fb-604">Prerequisites</span></span>
<span data-ttu-id="497fb-605">В следующих примерах мы будем создавать, обновлять, связывать и удалять политики для субъектов-служб.</span><span class="sxs-lookup"><span data-stu-id="497fb-605">In the following examples, you create, update, link, and delete policies for service principals.</span></span> <span data-ttu-id="497fb-606">Если вы еще не работали с Azure AD, прежде чем продолжить работу с этими примерами, советуем ознакомиться со статьей, посвященной тому, как получить клиент Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="497fb-606">If you are new to Azure AD, we recommend that you learn about how to get an Azure AD tenant before you proceed with these examples.</span></span> 

<span data-ttu-id="497fb-607">Чтобы начать работу, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="497fb-607">To get started, do the following steps:</span></span>


1. <span data-ttu-id="497fb-608">Cкачайте последнюю [общедоступную предварительную версию модуля Azure AD PowerShell](https://www.powershellgallery.com/packages/AzureADPreview/2.0.0.127).</span><span class="sxs-lookup"><span data-stu-id="497fb-608">Download the latest [Azure AD PowerShell Module public preview release](https://www.powershellgallery.com/packages/AzureADPreview/2.0.0.127).</span></span>
2.  <span data-ttu-id="497fb-609">Чтобы войти в учетную запись администратора Azure AD, выполните команду Connect.</span><span class="sxs-lookup"><span data-stu-id="497fb-609">Run the Connect command to sign in to your Azure AD admin account.</span></span> <span data-ttu-id="497fb-610">Эту команду следует выполнять при каждом запуске сеанса.</span><span class="sxs-lookup"><span data-stu-id="497fb-610">Run this command each time you start a new session.</span></span>
    
     ``` powershell
    Connect-AzureAD -Confirm
    
    ```
3.  <span data-ttu-id="497fb-611">Чтобы просмотреть все политики, которые созданы в организации, выполните следующую команду.</span><span class="sxs-lookup"><span data-stu-id="497fb-611">To see all policies that have been created in your organization, run the following command.</span></span> <span data-ttu-id="497fb-612">Эту команду рекомендуется запускать после выполнения большинства операций в следующих сценариях, чтобы проверить, что политики создаются должным образом.</span><span class="sxs-lookup"><span data-stu-id="497fb-612">We recommend that you run this command after most operations in the following scenarios, to check that your policies are being created as expected.</span></span>
   
    ``` powershell
        Get-AzureADPolicy
    
    ```
#### <a name="example-create-and-assign-a-policy-to-omit-the-basic-claims-from-tokens-issued-to-a-service-principal"></a><span data-ttu-id="497fb-613">Пример: создание и назначение политики для пропуска основных утверждений в токенах, выданных субъекту-службе.</span><span class="sxs-lookup"><span data-stu-id="497fb-613">Example: Create and assign a policy to omit the basic claims from tokens issued to a service principal.</span></span>
<span data-ttu-id="497fb-614">В этом примере мы создадим политику, которая удаляет набор базовых утверждений из токенов, выданных связанным субъектам-службам.</span><span class="sxs-lookup"><span data-stu-id="497fb-614">In this example, you create a policy that removes the basic claim set from tokens issued to linked service principals.</span></span>


1. <span data-ttu-id="497fb-615">Создайте политику сопоставления утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-615">Create a claims mapping policy.</span></span> <span data-ttu-id="497fb-616">Эта политика, связанная с определенными субъектами-службами, удаляет из токенов набор базовых утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-616">This policy, linked to specific service principals, removes the basic claim set from tokens.</span></span>
    1. <span data-ttu-id="497fb-617">Чтобы создать политику, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-617">To create the policy, run this command:</span></span> 
    
     ``` powershell
    New-AzureADPolicy -Definition @('{"ClaimsMappingPolicy":{"Version":1,"IncludeBasicClaimSet":"false"}}') -DisplayName "OmitBasicClaims” -Type "ClaimsMappingPolicy"
    ```
    2. <span data-ttu-id="497fb-618">Чтобы просмотреть созданную политику и получить ее идентификатор объекта, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-618">To see your new policy, and to get the policy ObjectId, run the following command:</span></span>
    
     ``` powershell
    Get-AzureADPolicy
    ```
2.  <span data-ttu-id="497fb-619">Назначьте политику для субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-619">Assign the policy to your service principal.</span></span> <span data-ttu-id="497fb-620">Вам потребуется также получить идентификатор объекта субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-620">You also need to get the ObjectId of your service principal.</span></span> 
    1.  <span data-ttu-id="497fb-621">Чтобы просмотреть список всех субъектов-служб в организации, можно запросить Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="497fb-621">To see all your organization's service principals, you can query Microsoft Graph.</span></span> <span data-ttu-id="497fb-622">или открыть проводник Azure AD Graph и войти в учетную запись Azure AD.</span><span class="sxs-lookup"><span data-stu-id="497fb-622">Or, in Azure AD Graph Explorer, sign in to your Azure AD account.</span></span>
    2.  <span data-ttu-id="497fb-623">Получив идентификатор объекта субъекта-службы, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-623">When you have the ObjectId of your service principal, run the following command:</span></span>  
     
     ``` powershell
    Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
    ```
#### <a name="example-create-and-assign-a-policy-to-include-the-employeeid-and-tenantcountry-as-claims-in-tokens-issued-to-a-service-principal"></a><span data-ttu-id="497fb-624">Пример: создание и назначение политики для добавления элементов EmployeeID и TenantCountry в качестве утверждений в токены, выданные субъекту-службе.</span><span class="sxs-lookup"><span data-stu-id="497fb-624">Example: Create and assign a policy to include the EmployeeID and TenantCountry as claims in tokens issued to a service principal.</span></span>
<span data-ttu-id="497fb-625">В этом примере мы создадим политику, которая добавляет элементы EmployeeID и TenantCountry в токены, выданные связанным субъектам-службам.</span><span class="sxs-lookup"><span data-stu-id="497fb-625">In this example, you create a policy that adds the EmployeeID and TenantCountry to tokens issued to linked service principals.</span></span> <span data-ttu-id="497fb-626">Элемент EmployeeID добавляется как тип утверждения имени в токены SAML и JWT.</span><span class="sxs-lookup"><span data-stu-id="497fb-626">The EmployeeID is emitted as the name claim type in both SAML tokens and JWTs.</span></span> <span data-ttu-id="497fb-627">Элемент TenantCountry добавляется как тип утверждения страны в токены SAML и JWT.</span><span class="sxs-lookup"><span data-stu-id="497fb-627">The TenantCountry is emitted as the country claim type in both SAML tokens and JWTs.</span></span> <span data-ttu-id="497fb-628">В этом примере мы продолжаем включать набор базовых утверждений в токены.</span><span class="sxs-lookup"><span data-stu-id="497fb-628">In this example, we continue to include the basic claims set in the tokens.</span></span>

1. <span data-ttu-id="497fb-629">Создайте политику сопоставления утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-629">Create a claims mapping policy.</span></span> <span data-ttu-id="497fb-630">Эта политика, связанная с субъектами-службами, добавляет утверждения EmployeeID и TenantCountry в токены.</span><span class="sxs-lookup"><span data-stu-id="497fb-630">This policy, linked to specific service principals, adds the EmployeeID and TenantCountry claims to tokens.</span></span>
    1. <span data-ttu-id="497fb-631">Чтобы создать политику, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-631">To create the policy, run this command:</span></span>  
     
     ``` powershell
    New-AzureADPolicy -Definition @('{"ClaimsMappingPolicy":{"Version":1,"IncludeBasicClaimSet":"true", "ClaimsSchema": [{"Source":"user","ID":"employeeid","SamlClaimType":"http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name","JwtClaimType":"name"},{"Source":"company","ID":" tenantcountry ","SamlClaimType":" http://schemas.xmlsoap.org/ws/2005/05/identity/claims/country ","JwtClaimType":"country"}]}}') -DisplayName "ExtraClaimsExample” -Type "ClaimsMappingPolicy"
    ```
    
    2. <span data-ttu-id="497fb-632">Чтобы просмотреть созданную политику и получить ее идентификатор объекта, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-632">To see your new policy, and to get the policy ObjectId, run the following command:</span></span>
     
     ``` powershell  
    Get-AzureADPolicy
    ```
2.  <span data-ttu-id="497fb-633">Назначьте политику для субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-633">Assign the policy to your service principal.</span></span> <span data-ttu-id="497fb-634">Вам потребуется также получить идентификатор объекта субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-634">You also need to get the ObjectId of your service principal.</span></span> 
    1.  <span data-ttu-id="497fb-635">Чтобы просмотреть список всех субъектов-служб в организации, можно запросить Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="497fb-635">To see all your organization's service principals, you can query Microsoft Graph.</span></span> <span data-ttu-id="497fb-636">или открыть проводник Azure AD Graph и войти в учетную запись Azure AD.</span><span class="sxs-lookup"><span data-stu-id="497fb-636">Or, in Azure AD Graph Explorer, sign in to your Azure AD account.</span></span>
    2.  <span data-ttu-id="497fb-637">Получив идентификатор объекта субъекта-службы, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-637">When you have the ObjectId of your service principal, run the following command:</span></span>  
     
     ``` powershell
    Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
    ```
#### <a name="example-create-and-assign-a-policy-that-uses-a-claims-transformation-in-tokens-issued-to-a-service-principal"></a><span data-ttu-id="497fb-638">Пример: создание и назначение политики, которая использует преобразование утверждений в токенах, выданных субъекту-службе.</span><span class="sxs-lookup"><span data-stu-id="497fb-638">Example: Create and assign a policy that uses a claims transformation in tokens issued to a service principal.</span></span>
<span data-ttu-id="497fb-639">В этом примере мы создадим политику, которая добавляет пользовательское утверждение "JoinedData" в токены JWT, выданные связанным субъектам-службам.</span><span class="sxs-lookup"><span data-stu-id="497fb-639">In this example, you create a policy that emits a custom claim “JoinedData” to JWTs issued to linked service principals.</span></span> <span data-ttu-id="497fb-640">Это утверждение содержит значение, созданное путем объединения данных, хранящихся в атрибуте extensionattribute1 в объекте пользователя с элементом ".sandbox".</span><span class="sxs-lookup"><span data-stu-id="497fb-640">This claim contains a value created by joining the data stored in the extensionattribute1 attribute on the user object with “.sandbox”.</span></span> <span data-ttu-id="497fb-641">В этом примере мы исключим набор базовых утверждений из токенов.</span><span class="sxs-lookup"><span data-stu-id="497fb-641">In this example, we exclude the basic claims set in the tokens.</span></span>


1. <span data-ttu-id="497fb-642">Создайте политику сопоставления утверждений.</span><span class="sxs-lookup"><span data-stu-id="497fb-642">Create a claims mapping policy.</span></span> <span data-ttu-id="497fb-643">Эта политика, связанная с субъектами-службами, добавляет утверждения EmployeeID и TenantCountry в токены.</span><span class="sxs-lookup"><span data-stu-id="497fb-643">This policy, linked to specific service principals, adds the EmployeeID and TenantCountry claims to tokens.</span></span>
    1. <span data-ttu-id="497fb-644">Чтобы создать политику, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-644">To create the policy, run this command:</span></span> 
     
     ``` powershell
    New-AzureADPolicy -Definition @('{"ClaimsMappingPolicy":{"Version":1,"IncludeBasicClaimSet":"true", "ClaimsSchema":[{"Source":"user","ID":"extensionattribute1"},{"Source":"transformation","ID":"DataJoin","TransformationId":"JoinTheData","JwtClaimType":"JoinedData"}],"ClaimsTransformation":[{"ID":"JoinTheData","TransformationMethod":"Join","InputClaims":[{"ClaimTypeReferenceId":"extensionattribute1","TransformationClaimType":"string1"}], "InputParameters": [{"Id":"string2","Value":"sandbox"},{"Id":"separator","Value":"."}],"OutputClaims":[{"ClaimTypeReferenceId":"DataJoin","TransformationClaimType":"outputClaim"}]}]}}') -DisplayName "TransformClaimsExample” -Type "ClaimsMappingPolicy"
    ```
    
    2. <span data-ttu-id="497fb-645">Чтобы просмотреть созданную политику и получить ее идентификатор объекта, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-645">To see your new policy, and to get the policy ObjectId, run the following command:</span></span> 
     
     ``` powershell
    Get-AzureADPolicy
    ```
2.  <span data-ttu-id="497fb-646">Назначьте политику для субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-646">Assign the policy to your service principal.</span></span> <span data-ttu-id="497fb-647">Вам потребуется также получить идентификатор объекта субъекта-службы.</span><span class="sxs-lookup"><span data-stu-id="497fb-647">You also need to get the ObjectId of your service principal.</span></span> 
    1.  <span data-ttu-id="497fb-648">Чтобы просмотреть список всех субъектов-служб в организации, можно запросить Microsoft Graph</span><span class="sxs-lookup"><span data-stu-id="497fb-648">To see all your organization's service principals, you can query Microsoft Graph.</span></span> <span data-ttu-id="497fb-649">или открыть проводник Azure AD Graph и войти в учетную запись Azure AD.</span><span class="sxs-lookup"><span data-stu-id="497fb-649">Or, in Azure AD Graph Explorer, sign in to your Azure AD account.</span></span>
    2.  <span data-ttu-id="497fb-650">Получив идентификатор объекта субъекта-службы, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="497fb-650">When you have the ObjectId of your service principal, run the following command:</span></span> 
     
     ``` powershell
    Add-AzureADServicePrincipalPolicy -Id <ObjectId of the ServicePrincipal> -RefObjectId <ObjectId of the Policy>
    ```
