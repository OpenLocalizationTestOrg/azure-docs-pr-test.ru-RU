---
title: "соединители прокси приложения Azure AD aaaUnderstand | Документы Microsoft"
description: "Описываются основы hello о соединителей прокси приложения Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 294cb26803ef7cf8be9f3af0678d6d2e64f6cc14
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a><span data-ttu-id="5b563-103">Сведения о соединителях прокси приложения Azure AD</span><span class="sxs-lookup"><span data-stu-id="5b563-103">Understand Azure AD Application Proxy connectors</span></span>

<span data-ttu-id="5b563-104">Соединители являются основой для работы прокси приложения Azure AD.</span><span class="sxs-lookup"><span data-stu-id="5b563-104">Connectors are what make Azure AD Application Proxy possible.</span></span> <span data-ttu-id="5b563-105">Они просты toodeploy и поддерживать, поэтому super мощный.</span><span class="sxs-lookup"><span data-stu-id="5b563-105">They are simple, easy toodeploy and maintain, and super powerful.</span></span> <span data-ttu-id="5b563-106">В этой статье рассматриваются какой разъема, как они работают и некоторые предложения по toooptimize развертывания.</span><span class="sxs-lookup"><span data-stu-id="5b563-106">This article discusses what connectors are, how they work, and some suggestions for how toooptimize your deployment.</span></span> 

## <a name="what-is-an-application-proxy-connector"></a><span data-ttu-id="5b563-107">Что такое соединитель прокси приложения</span><span class="sxs-lookup"><span data-stu-id="5b563-107">What is an Application Proxy connector</span></span>

<span data-ttu-id="5b563-108">Соединители — это упрощенный агенты, которые располагаются в локальной среде и упрощения hello исходящее подключение toohello прокси-сервера приложения службы.</span><span class="sxs-lookup"><span data-stu-id="5b563-108">Connectors are lightweight agents that sit on-premises and facilitate hello outbound connection toohello Application Proxy service.</span></span> <span data-ttu-id="5b563-109">Соединители должны устанавливаться на Windows Server, имеющий доступ toohello серверной части приложения.</span><span class="sxs-lookup"><span data-stu-id="5b563-109">Connectors must be installed on a Windows Server that has access toohello backend application.</span></span> <span data-ttu-id="5b563-110">Соединители можно организовать в группы соединителей, с каждой группой обработки трафика toospecific приложений.</span><span class="sxs-lookup"><span data-stu-id="5b563-110">You can organize connectors into connector groups, with each group handling traffic toospecific applications.</span></span> <span data-ttu-id="5b563-111">Балансировка нагрузки соединители автоматически и может помочь toooptimize структуру сети.</span><span class="sxs-lookup"><span data-stu-id="5b563-111">Connectors load-balance automatically, and can help toooptimize your network structure.</span></span> 

## <a name="requirements-and-deployment"></a><span data-ttu-id="5b563-112">Требования и развертывание</span><span class="sxs-lookup"><span data-stu-id="5b563-112">Requirements and deployment</span></span>

<span data-ttu-id="5b563-113">toodeploy прокси приложения успешно, требуется по крайней мере один соединитель, но мы рекомендуем два или более для большей гибкости.</span><span class="sxs-lookup"><span data-stu-id="5b563-113">toodeploy Application Proxy successfully, you need at least one connector, but we recommend two or more for greater resiliency.</span></span> <span data-ttu-id="5b563-114">Установите соединитель hello на машины 2016 или Windows Server 2012 R2.</span><span class="sxs-lookup"><span data-stu-id="5b563-114">Install hello connector on a Windows Server 2012 R2 or 2016 machine.</span></span> <span data-ttu-id="5b563-115">Соединитель Hello должен toobe может toocommunicate службы прокси приложения hello, а также hello локальных приложений, которые публикуются.</span><span class="sxs-lookup"><span data-stu-id="5b563-115">hello connector needs toobe able toocommunicate with hello Application Proxy service as well as hello on-premises applications that you publish.</span></span> 

<span data-ttu-id="5b563-116">Дополнительные сведения о требованиях к сети hello для сервера соединителя hello см. в разделе [Приступая к работе с прокси-сервера приложений и установить соединитель](active-directory-application-proxy-enable.md).</span><span class="sxs-lookup"><span data-stu-id="5b563-116">For more information about hello network requirements for hello connector server, see [Get started with Application Proxy and install a connector](active-directory-application-proxy-enable.md).</span></span>

## <a name="maintenance"></a><span data-ttu-id="5b563-117">Обслуживание, </span><span class="sxs-lookup"><span data-stu-id="5b563-117">Maintenance</span></span>
<span data-ttu-id="5b563-118">Hello соединители и службу hello аккуратно всех задач hello высокого уровня доступности.</span><span class="sxs-lookup"><span data-stu-id="5b563-118">hello connectors and hello service take care of all hello high availability tasks.</span></span> <span data-ttu-id="5b563-119">Их можно добавлять или удалять динамически.</span><span class="sxs-lookup"><span data-stu-id="5b563-119">They can be added or removed dynamically.</span></span> <span data-ttu-id="5b563-120">Каждый раз при создании нового запроса это перенаправленное tooone hello соединителей, доступных в данный момент.</span><span class="sxs-lookup"><span data-stu-id="5b563-120">Each time a new request arrives it is routed tooone of hello connectors that is currently available.</span></span> <span data-ttu-id="5b563-121">Если соединитель временно недоступен, он не будет реагировать toothis трафика.</span><span class="sxs-lookup"><span data-stu-id="5b563-121">If a connector is temporarily not available, it doesn't respond toothis traffic.</span></span>

<span data-ttu-id="5b563-122">Hello соединители не имеют состояния и которых отсутствуют данные конфигурации на компьютере hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-122">hello connectors are stateless and have no configuration data on hello machine.</span></span> <span data-ttu-id="5b563-123">Hello только те данные, которые они хранят — hello настройки для подключения службы hello и его сертификат проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="5b563-123">hello only data they store is hello settings for connecting hello service and its authentication certificate.</span></span> <span data-ttu-id="5b563-124">При подключении службы toohello они запрашивают данные конфигурации для всех необходимых hello и обновить его каждые несколько минут.</span><span class="sxs-lookup"><span data-stu-id="5b563-124">When they connect toohello service, they pull all hello required configuration data and refresh it every couple of minutes.</span></span>

<span data-ttu-id="5b563-125">Соединители также опрашивать hello server toofind ли имеется более новая версия соединителя hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-125">Connectors also poll hello server toofind out whether there is a newer version of hello connector.</span></span> <span data-ttu-id="5b563-126">Если он найден, соединители hello обновляются.</span><span class="sxs-lookup"><span data-stu-id="5b563-126">If one is found, hello connectors update themselves.</span></span>

<span data-ttu-id="5b563-127">Вы можете отслеживать соединителях из hello компьютером, на котором они работают под управлением, с помощью журнала событий hello и счетчики производительности.</span><span class="sxs-lookup"><span data-stu-id="5b563-127">You can monitor your connectors from hello machine they are running on, using either hello event log and performance counters.</span></span> <span data-ttu-id="5b563-128">Также можно просмотреть их состояние со страницы приветствия прокси приложения hello портала Azure:</span><span class="sxs-lookup"><span data-stu-id="5b563-128">Or you can view their status from hello Application Proxy page of hello Azure portal:</span></span>

 ![Соединители прокси приложения Azure AD](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

<span data-ttu-id="5b563-130">У вас нет toomanually удаление соединителей, которые не используются.</span><span class="sxs-lookup"><span data-stu-id="5b563-130">You don't have toomanually delete connectors that are unused.</span></span> <span data-ttu-id="5b563-131">При запуске соединителя, она остается активной, как она подключается toohello службы.</span><span class="sxs-lookup"><span data-stu-id="5b563-131">When a connector is running, it remains active as it connects toohello service.</span></span> <span data-ttu-id="5b563-132">Неиспользуемые соединители помечаются как _неактивные_ и удаляются спустя 10 дней бездействия.</span><span class="sxs-lookup"><span data-stu-id="5b563-132">Unused connectors are tagged as _inactive_ and are removed after 10 days of inactivity.</span></span> <span data-ttu-id="5b563-133">Если вы хотите toouninstall соединитель, удалите службу соединителя hello и hello обновления с сервера hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-133">If you do want toouninstall a connector, though, uninstall both hello Connector service and hello Updater service from hello server.</span></span> <span data-ttu-id="5b563-134">Перезапустите службу hello remove toofully компьютера.</span><span class="sxs-lookup"><span data-stu-id="5b563-134">Restart your computer toofully remove hello service.</span></span>

## <a name="automatic-updates"></a><span data-ttu-id="5b563-135">Автоматическое обновление</span><span class="sxs-lookup"><span data-stu-id="5b563-135">Automatic updates</span></span>

<span data-ttu-id="5b563-136">Для всех соединителей hello, развертываемых в Azure AD обеспечивает автоматическое обновление.</span><span class="sxs-lookup"><span data-stu-id="5b563-136">Azure AD provides automatic updates for all hello connectors that you deploy.</span></span> <span data-ttu-id="5b563-137">При условии, что выполняется hello средство обновления соединителя прокси-сервера приложения службы, соединителях обновляются автоматически.</span><span class="sxs-lookup"><span data-stu-id="5b563-137">As long as hello Application Proxy Connector Updater service is running, your connectors update automatically.</span></span> <span data-ttu-id="5b563-138">Если вы не видите hello средство обновления соединителя службы на сервере, вы должны слишком[переустановить соединитель](active-directory-application-proxy-enable.md) tooget все обновления.</span><span class="sxs-lookup"><span data-stu-id="5b563-138">If you don’t see hello Connector Updater service on your server, you need too[reinstall your connector](active-directory-application-proxy-enable.md) tooget any updates.</span></span> 

<span data-ttu-id="5b563-139">Если вы не хотите toowait для соединителя tooyour toocome автоматического обновления, можно выполнить обновление вручную.</span><span class="sxs-lookup"><span data-stu-id="5b563-139">If you don't want toowait for an automatic update toocome tooyour connector, you can perform a manual upgrade.</span></span> <span data-ttu-id="5b563-140">Go toohello [странице разъем загрузки](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) на сервере hello, где соединителя — найти и выбрать **загрузить**.</span><span class="sxs-lookup"><span data-stu-id="5b563-140">Go toohello [connector download page](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) on hello server where your connector is located and select **Download**.</span></span> <span data-ttu-id="5b563-141">Этот процесс запускает обновление для локального соединителя hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-141">This process kicks off an upgrade for hello local connector.</span></span> 

<span data-ttu-id="5b563-142">Для клиентов с несколькими разъемами hello автоматического обновления целевой один соединитель во время каждого простою tooprevent группы в вашей среде.</span><span class="sxs-lookup"><span data-stu-id="5b563-142">For tenants with multiple connectors, hello automatic updates target one connector at a time in each group tooprevent downtime in your environment.</span></span> 

<span data-ttu-id="5b563-143">При обновлении соединителя могут возникать простои в следующих случаях.</span><span class="sxs-lookup"><span data-stu-id="5b563-143">You may experience downtime when your connector updates if:</span></span>  
- <span data-ttu-id="5b563-144">У вас только один соединитель.</span><span class="sxs-lookup"><span data-stu-id="5b563-144">You only have one connector.</span></span> <span data-ttu-id="5b563-145">tooavoid это время простоя и улучшения высокого уровня доступности рекомендуется устанавливать второй соединитель и [создания соединителя группы](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="5b563-145">tooavoid this downtime and improve high availability, we recommend you install a second connector and [create a connector group](active-directory-application-proxy-connectors-azure-portal.md).</span></span>  
- <span data-ttu-id="5b563-146">Соединитель находился в середине hello транзакции во время начала обновления hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-146">A connector was in hello middle of a transaction when hello update began.</span></span> <span data-ttu-id="5b563-147">Несмотря на то, что hello начальной транзакции теряется, браузер автоматически следует повторить операцию hello или обновите страницу.</span><span class="sxs-lookup"><span data-stu-id="5b563-147">Although hello initial transaction is lost, your browser should automatically retry hello operation or you can refresh your page.</span></span> <span data-ttu-id="5b563-148">Если оно повторно отправляется запрос hello, hello трафика — перенаправленное tooa резервного копирования соединитель.</span><span class="sxs-lookup"><span data-stu-id="5b563-148">When hello request is resent, hello traffic is routed tooa backup connector.</span></span>

## <a name="creating-connector-groups"></a><span data-ttu-id="5b563-149">Создание групп соединителей</span><span class="sxs-lookup"><span data-stu-id="5b563-149">Creating connector groups</span></span>

<span data-ttu-id="5b563-150">Группы соединителей включить tooassign определенные соединители tooserve конкретных приложений.</span><span class="sxs-lookup"><span data-stu-id="5b563-150">Connector groups enable you tooassign specific connectors tooserve specific applications.</span></span> <span data-ttu-id="5b563-151">Можно сгруппировать несколько соединителей и затем назначьте каждую группу tooa приложения.</span><span class="sxs-lookup"><span data-stu-id="5b563-151">You can group a number of connectors together, and then assign each application tooa group.</span></span> 

<span data-ttu-id="5b563-152">Группы соединителей стала проще toomanage крупных развертываний.</span><span class="sxs-lookup"><span data-stu-id="5b563-152">Connector groups make it easier toomanage large deployments.</span></span> <span data-ttu-id="5b563-153">Они также сократить задержку для клиентов, имеющих приложений, размещенных в разных регионах, так как можно создать группы на основе расположения соединителей tooserve только локальные приложения.</span><span class="sxs-lookup"><span data-stu-id="5b563-153">They also improve latency for tenants that have applications hosted in different regions, because you can create location-based connector groups tooserve only local applications.</span></span> 

<span data-ttu-id="5b563-154">toolearn Дополнительные сведения о группах соединителя. в разделе [публикации приложений на отдельные сети и расположений с помощью соединителя группы](active-directory-application-proxy-connectors-azure-portal.md).</span><span class="sxs-lookup"><span data-stu-id="5b563-154">toolearn more about connector groups, see [Publish applications on separate networks and locations using connector groups](active-directory-application-proxy-connectors-azure-portal.md).</span></span>

## <a name="security-and-networking"></a><span data-ttu-id="5b563-155">Безопасность и сеть</span><span class="sxs-lookup"><span data-stu-id="5b563-155">Security and networking</span></span>

<span data-ttu-id="5b563-156">Соединители можно установить в любом месте сети hello, позволяет им toosend запросов toohello прокси-сервера приложения службы.</span><span class="sxs-lookup"><span data-stu-id="5b563-156">Connectors can be installed anywhere on hello network that allows them toosend requests toohello Application Proxy service.</span></span> <span data-ttu-id="5b563-157">Важно то, что hello компьютер с запущенной hello соединитель, также имеет доступ tooyour приложений.</span><span class="sxs-lookup"><span data-stu-id="5b563-157">What's important is that hello computer running hello connector also has access tooyour apps.</span></span> <span data-ttu-id="5b563-158">Можно установить соединители внутри сети организации или на виртуальной машине, работающей в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-158">You can install connectors inside of your corporate network or on a virtual machine that runs in hello cloud.</span></span> <span data-ttu-id="5b563-159">Соединители могут работать в сети периметра, но это необязательно, так как весь трафик является исходящим, поэтому сеть защищена.</span><span class="sxs-lookup"><span data-stu-id="5b563-159">Connectors can run within a demilitarized zone (DMZ), but it's not necessary because all traffic is outbound so your network stays secure.</span></span>

<span data-ttu-id="5b563-160">Соединители отправляют только исходящие запросы.</span><span class="sxs-lookup"><span data-stu-id="5b563-160">Connectors only send outbound requests.</span></span> <span data-ttu-id="5b563-161">исходящий трафик Hello отправляется toohello прокси-сервера приложения службы и toohello опубликованным приложениям.</span><span class="sxs-lookup"><span data-stu-id="5b563-161">hello outbound traffic is sent toohello Application Proxy service and toohello published applications.</span></span> <span data-ttu-id="5b563-162">У вас нет tooopen входящие порты, так как трафик проходит обоими способами после установления сеанса.</span><span class="sxs-lookup"><span data-stu-id="5b563-162">You don't have tooopen inbound ports because traffic flows both ways once a session is established.</span></span> <span data-ttu-id="5b563-163">Не имеют tooset копирование балансировки нагрузки между соединители hello и настройки доступа извне через брандмауэры.</span><span class="sxs-lookup"><span data-stu-id="5b563-163">You don't have tooset up load balancing between hello connectors or configure inbound access through your firewalls.</span></span> 

<span data-ttu-id="5b563-164">Дополнительные сведения о настройке правил брандмауэра для исходящего трафика см. в статье [Работа с имеющимися локальными прокси-серверами](application-proxy-working-with-proxy-servers.md).</span><span class="sxs-lookup"><span data-stu-id="5b563-164">For more information about configuring outbound firewall rules, see [Work with existing on-premises proxy servers](application-proxy-working-with-proxy-servers.md).</span></span>

<span data-ttu-id="5b563-165">Используйте hello [Azure средство тестирования порты соединителя AD приложения прокси](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify, что соединитель доступ службы прокси приложения hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-165">Use hello [Azure AD Application Proxy Connector Ports Test Tool](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify that your connector can reach hello Application Proxy service.</span></span> <span data-ttu-id="5b563-166">Как минимум убедитесь, что у всех зеленой галочки области центральной части США hello и tooyou ближайший регион hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-166">At a minimum, make sure that hello Central US region and hello region closest tooyou have all green checkmarks.</span></span> <span data-ttu-id="5b563-167">Учитывайте также, что большее число зеленых флажков означает большую устойчивость.</span><span class="sxs-lookup"><span data-stu-id="5b563-167">Beyond that, more green checkmarks means greater resiliency.</span></span> 

## <a name="performance-and-scalability"></a><span data-ttu-id="5b563-168">Производительность и масштабирование</span><span class="sxs-lookup"><span data-stu-id="5b563-168">Performance and scalability</span></span>

<span data-ttu-id="5b563-169">Масштаб для hello службы прокси приложения является прозрачным, но масштаб фактор для соединителей.</span><span class="sxs-lookup"><span data-stu-id="5b563-169">Scale for hello Application Proxy service is transparent, but scale is a factor for connectors.</span></span> <span data-ttu-id="5b563-170">Необходимо toohave пиковой достаточно toohandle соединители.</span><span class="sxs-lookup"><span data-stu-id="5b563-170">You need toohave enough connectors toohandle peak traffic.</span></span> <span data-ttu-id="5b563-171">Тем не менее не требуется балансировка нагрузки tooconfigure, так как все соединители внутри группы соединителей автоматического распределения нагрузки.</span><span class="sxs-lookup"><span data-stu-id="5b563-171">However, you don't need tooconfigure load balancing because all connectors within a connector group automatically load balance.</span></span>

<span data-ttu-id="5b563-172">Соединители не имеют состояния, они не подвержены hello количество пользователей или сеансов.</span><span class="sxs-lookup"><span data-stu-id="5b563-172">Since connectors are stateless, they are not affected by hello number of users or sessions.</span></span> <span data-ttu-id="5b563-173">Вместо этого они могут реагировать toohello число запросов и их размер полезных данных.</span><span class="sxs-lookup"><span data-stu-id="5b563-173">Instead, they respond toohello number of requests and their payload size.</span></span> <span data-ttu-id="5b563-174">Обычный компьютер может обработать несколько тысяч запросов стандартного веб-трафика в секунду.</span><span class="sxs-lookup"><span data-stu-id="5b563-174">With standard web traffic, an average machine can handle a couple thousand requests per second.</span></span> <span data-ttu-id="5b563-175">определенная мощность Hello зависит от характеристики hello точное компьютера.</span><span class="sxs-lookup"><span data-stu-id="5b563-175">hello specific capacity depends on hello exact machine characteristics.</span></span> 

<span data-ttu-id="5b563-176">производительность соединителей Hello ограничивается ЦП и сети.</span><span class="sxs-lookup"><span data-stu-id="5b563-176">hello connector performance is bound by CPU and networking.</span></span> <span data-ttu-id="5b563-177">Производительность ЦП необходим для SSL-шифрование и расшифровка, а сети является toohello приложений важно tooget быстрого подключения и hello веб-службы в Azure.</span><span class="sxs-lookup"><span data-stu-id="5b563-177">CPU performance is needed for SSL encryption and decryption, while networking is important tooget fast connectivity toohello applications and hello online service in Azure.</span></span>

<span data-ttu-id="5b563-178">Память, напротив, меньше всего важна для соединителей.</span><span class="sxs-lookup"><span data-stu-id="5b563-178">In contrast, memory is less of an issue for connectors.</span></span> <span data-ttu-id="5b563-179">веб-службу Hello отвечает за большую часть обработки hello и весь трафик, не прошедшие проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="5b563-179">hello online service takes care of much of hello processing and all unauthenticated traffic.</span></span> <span data-ttu-id="5b563-180">Все, что можно сделать в облаке hello выполняется в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-180">Everything that can be done in hello cloud is done in hello cloud.</span></span> 

<span data-ttu-id="5b563-181">Другим фактором, влияющим на производительность является качество hello hello сети между hello соединителей, включая:</span><span class="sxs-lookup"><span data-stu-id="5b563-181">Another factor that affects performance is hello quality of hello networking between hello connectors, including:</span></span> 

* <span data-ttu-id="5b563-182">**Здравствуйте, веб-службы**: toohello медленно или высокой задержкой подключения службы прокси приложения Azure влияют hello соединителя производительности.</span><span class="sxs-lookup"><span data-stu-id="5b563-182">**hello online service**: Slow or high-latency connections toohello Application Proxy service in Azure influence hello connector performance.</span></span> <span data-ttu-id="5b563-183">Для наилучшей производительности hello подключиться tooAzure вашей организации с помощью Express Route.</span><span class="sxs-lookup"><span data-stu-id="5b563-183">For hello best performance, connect your organization tooAzure with Express Route.</span></span> <span data-ttu-id="5b563-184">В противном случае имеют сетевые команды убедитесь, что tooAzure соединения обрабатываются максимально эффективно.</span><span class="sxs-lookup"><span data-stu-id="5b563-184">Otherwise, have your networking team ensure that connections tooAzure are handled as efficiently as possible.</span></span> 
* <span data-ttu-id="5b563-185">**Здравствуйте, внутренних приложений**: В некоторых случаях существуют дополнительные прокси между соединителя hello и hello внутренних приложений, которые могут привести к снижению или запретить подключения.</span><span class="sxs-lookup"><span data-stu-id="5b563-185">**hello backend applications**: In some cases, there are additional proxies between hello connector and hello backend applications that can slow or prevent connections.</span></span> <span data-ttu-id="5b563-186">tootroubleshoot этот сценарий, откройте браузер на сервер соединителя hello и повторите tooaccess приложения hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-186">tootroubleshoot this scenario, open a browser from hello connector server and try tooaccess hello application.</span></span> <span data-ttu-id="5b563-187">Если соединители hello запуска в Azure, но приложения hello являются локальными, hello взаимодействие может оказаться ожидаемого пользователями.</span><span class="sxs-lookup"><span data-stu-id="5b563-187">If you run hello connectors in Azure but hello applications are on-premises, hello experience might not be what your users expect.</span></span>
* <span data-ttu-id="5b563-188">**Здравствуйте, контроллеры домена**: hello соединители выполнить единый вход с использованием ограниченного делегирования Kerberos, обращаться hello контроллеры домена перед отправкой серверной toohello hello запроса.</span><span class="sxs-lookup"><span data-stu-id="5b563-188">**hello domain controllers**: If hello connectors perform SSO using Kerberos Constrained Delegation, they contact hello domain controllers before sending hello request toohello backend.</span></span> <span data-ttu-id="5b563-189">соединители Hello имеют кэш билетов Kerberos, но в среде занят скорости реагирования hello hello контроллеров домена может повлиять на производительность.</span><span class="sxs-lookup"><span data-stu-id="5b563-189">hello connectors have a cache of Kerberos tickets, but in a busy environment hello responsiveness of hello domain controllers can affect performance.</span></span> <span data-ttu-id="5b563-190">Такая проблема наиболее характерна для ситуации, когда соединители выполняются в Azure, но взаимодействуют с контроллерами домена в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="5b563-190">This issue is more common for connectors that run in Azure but communicate with domain controllers that are on-premises.</span></span> 

<span data-ttu-id="5b563-191">Дополнительные сведения об оптимизации сети см. в разделе [Аспекты топологии сети при использовании прокси приложения Azure Active Directory](application-proxy-network-topology-considerations.md).</span><span class="sxs-lookup"><span data-stu-id="5b563-191">For more information about optimizing your network, see [Network topology considerations when using Azure Active Directory Application Proxy](application-proxy-network-topology-considerations.md).</span></span>

## <a name="domain-joining"></a><span data-ttu-id="5b563-192">Присоединение к домену</span><span class="sxs-lookup"><span data-stu-id="5b563-192">Domain joining</span></span>

<span data-ttu-id="5b563-193">Соединители могут выполняться на компьютере, не присоединенном к домену.</span><span class="sxs-lookup"><span data-stu-id="5b563-193">Connectors can run on a machine that is not domain-joined.</span></span> <span data-ttu-id="5b563-194">Тем не менее если вы хотите единого входа (SSO) tooapplications, использовать встроенную проверку подлинности Windows (IWA), необходимо машины, присоединенных к домену.</span><span class="sxs-lookup"><span data-stu-id="5b563-194">However, if you want single sign-on (SSO) tooapplications that use Integrated Windows Authentication (IWA), you need a domain-joined machine.</span></span> <span data-ttu-id="5b563-195">В этом случае hello соединителя машины должны находиться домена tooa присоединены к домену, можно выполнить [Kerberos](https://web.mit.edu/kerberos) ограниченное делегирование от лица пользователей hello для hello опубликованным приложениям.</span><span class="sxs-lookup"><span data-stu-id="5b563-195">In this case, hello connector machines must be joined tooa domain that can perform [Kerberos](https://web.mit.edu/kerberos) Constrained Delegation on behalf of hello users for hello published applications.</span></span>

<span data-ttu-id="5b563-196">Соединители также может быть присоединены к домену toodomains или лесах, содержащих частичного доверия или контроллеров домена только для tooread.</span><span class="sxs-lookup"><span data-stu-id="5b563-196">Connectors can also be joined toodomains or forests that have a partial trust, or tooread-only domain controllers.</span></span>

## <a name="connector-deployments-on-hardened-environments"></a><span data-ttu-id="5b563-197">Развертывание соединителей в средах с усиленной защитой</span><span class="sxs-lookup"><span data-stu-id="5b563-197">Connector deployments on hardened environments</span></span>

<span data-ttu-id="5b563-198">Развертывание соединителей обычно не вызывает сложностей и не требует дополнительной настройки.</span><span class="sxs-lookup"><span data-stu-id="5b563-198">Usually, connector deployment is straightforward and requires no special configuration.</span></span> <span data-ttu-id="5b563-199">Но для некоторых редких сценариев есть определенные условия.</span><span class="sxs-lookup"><span data-stu-id="5b563-199">However, there are some unique conditions that should be considered:</span></span>

* <span data-ttu-id="5b563-200">Необходимо организаций, которые ограничивают исходящий трафик hello [открыть порты](active-directory-application-proxy-enable.md#open-your-ports).</span><span class="sxs-lookup"><span data-stu-id="5b563-200">Organizations that limit hello outbound traffic must [open required ports](active-directory-application-proxy-enable.md#open-your-ports).</span></span>
* <span data-ttu-id="5b563-201">FIPS-совместимые компьютеры будут необходимые toochange их tooallow конфигурации hello toogenerate процессов соединителя и хранения сертификата.</span><span class="sxs-lookup"><span data-stu-id="5b563-201">FIPS-compliant machines might be required toochange their configuration tooallow hello connector processes toogenerate and store a certificate.</span></span>
* <span data-ttu-id="5b563-202">Организации, заблокировать их среды на основе процессов hello hello, проблема, сетевые запросы иметь toomake том, что обе службы соединителя включена tooaccess все необходимые порты и IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="5b563-202">Organizations that lock down their environment based on hello processes that issue hello networking requests have toomake sure that both connector services are enabled tooaccess all required ports and IPs.</span></span>
* <span data-ttu-id="5b563-203">В некоторых случаях исходящих прямой прокси-серверов могут нарушить проверки подлинности сертификата двустороннее hello и привести к toofail связи hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-203">In some cases, outbound forward proxies may break hello two-way certificate authentication and cause hello communication toofail.</span></span>

## <a name="connector-authentication"></a><span data-ttu-id="5b563-204">Проверка подлинности соединителя</span><span class="sxs-lookup"><span data-stu-id="5b563-204">Connector authentication</span></span>

<span data-ttu-id="5b563-205">tooprovide службы безопасности, соединители имеет tooauthenticate сторону hello службы, а служба hello tooauthenticate сторону hello соединителя.</span><span class="sxs-lookup"><span data-stu-id="5b563-205">tooprovide a secure service, connectors have tooauthenticate toward hello service, and hello service has tooauthenticate toward hello connector.</span></span> <span data-ttu-id="5b563-206">Эта проверка подлинности выполняется с помощью сертификаты клиента и сервера, когда соединители hello инициируют подключение hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-206">This authentication is done using client and server certificates when hello connectors initiate hello connection.</span></span> <span data-ttu-id="5b563-207">Этот способ администратор hello имя пользователя и пароль не сохраняются на компьютере соединителя hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-207">This way hello administrator’s username and password are not stored on hello connector machine.</span></span>

<span data-ttu-id="5b563-208">Hello сертификаты, используемые зависят от конкретного toohello прокси-сервер приложения службы.</span><span class="sxs-lookup"><span data-stu-id="5b563-208">hello certificates used are specific toohello Application Proxy service.</span></span> <span data-ttu-id="5b563-209">Они создаются во время первоначальной регистрации hello и автоматически обновить соединители hello каждые несколько месяцев.</span><span class="sxs-lookup"><span data-stu-id="5b563-209">They get created during hello initial registration and are automatically renewed by hello connectors every couple of months.</span></span> 

<span data-ttu-id="5b563-210">Если соединитель не подключен toohello службы для нескольких месяцев, сертификаты могут быть устаревшими.</span><span class="sxs-lookup"><span data-stu-id="5b563-210">If a connector is not connected toohello service for several months, its certificates may be outdated.</span></span> <span data-ttu-id="5b563-211">В этом случае удалите и переустановите регистрации tootrigger hello соединителя.</span><span class="sxs-lookup"><span data-stu-id="5b563-211">In this case, uninstall and reinstall hello connector tootrigger registration.</span></span> <span data-ttu-id="5b563-212">Можно выполнить следующие команды PowerShell hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-212">You can run hello following PowerShell commands:</span></span>

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-hello-hood"></a><span data-ttu-id="5b563-213">Кулисами hello</span><span class="sxs-lookup"><span data-stu-id="5b563-213">Under hello hood</span></span>

<span data-ttu-id="5b563-214">Соединители основаны на прокси для веб-приложения Windows Server, поэтому они имеют большую часть hello же средства управления, включая журналы событий Windows</span><span class="sxs-lookup"><span data-stu-id="5b563-214">Connectors are based on Windows Server Web Application Proxy, so they have most of hello same management tools including Windows Event Logs</span></span>

 ![Управлять журналами событий с hello в окне просмотра событий](./media/application-proxy-understand-connectors/event-view-window.png)

<span data-ttu-id="5b563-216">и счетчики производительности Windows.</span><span class="sxs-lookup"><span data-stu-id="5b563-216">and Windows performance counters.</span></span> 

 ![Добавление счетчиков toohello соединителя с hello системного монитора](./media/application-proxy-understand-connectors/performance-monitor.png)

<span data-ttu-id="5b563-218">соединители Hello у администратора и сеансов журналы.</span><span class="sxs-lookup"><span data-stu-id="5b563-218">hello connectors have both admin and session logs.</span></span> <span data-ttu-id="5b563-219">журналы Hello администрирования включают ключевые события и их ошибки.</span><span class="sxs-lookup"><span data-stu-id="5b563-219">hello admin logs include key events and their errors.</span></span> <span data-ttu-id="5b563-220">Журналы сеансов Hello включают все транзакции hello и подробные сведения об их обработке.</span><span class="sxs-lookup"><span data-stu-id="5b563-220">hello session logs include all hello transactions and their processing details.</span></span> 

<span data-ttu-id="5b563-221">журналы toosee hello, go toohello просмотра событий откройте hello **представление** меню и включить **Отобразить аналитический и отладочный журналы**.</span><span class="sxs-lookup"><span data-stu-id="5b563-221">toosee hello logs, go toohello Event Viewer, open hello **View** menu, and enable **Show analytic and debug logs**.</span></span> <span data-ttu-id="5b563-222">Затем включите их toostart сбора событий.</span><span class="sxs-lookup"><span data-stu-id="5b563-222">Then, enable them toostart collecting events.</span></span> <span data-ttu-id="5b563-223">Эти журналы не отображаются в прокси веб-приложения в Windows Server 2012 R2 соединители hello основаны на более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="5b563-223">These logs do not appear in Web Application Proxy in Windows Server 2012 R2, as hello connectors are based on a more recent version.</span></span>

<span data-ttu-id="5b563-224">Вы можете проверить состояние hello службы hello в окне приветствия служб.</span><span class="sxs-lookup"><span data-stu-id="5b563-224">You can examine hello state of hello service in hello Services window.</span></span> <span data-ttu-id="5b563-225">Соединитель Hello состоит из двух служб Windows: hello фактическое соединителя и обновления hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-225">hello connector comprises two Windows Services: hello actual connector, and hello updater.</span></span> <span data-ttu-id="5b563-226">Оба параметра необходимо запустить все время hello.</span><span class="sxs-lookup"><span data-stu-id="5b563-226">Both of them must run all hello time.</span></span>

 ![Окно "Службы (локальные)" Azure AD](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a><span data-ttu-id="5b563-228">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="5b563-228">Next steps</span></span>


* [<span data-ttu-id="5b563-229">Публикация приложений в отдельных сетях и расположениях с помощью групп соединителей</span><span class="sxs-lookup"><span data-stu-id="5b563-229">Publish applications on separate networks and locations using connector groups</span></span>](active-directory-application-proxy-connectors-azure-portal.md)
* [<span data-ttu-id="5b563-230">Работа с имеющимися локальными прокси-серверами</span><span class="sxs-lookup"><span data-stu-id="5b563-230">Work with existing on-premises proxy servers</span></span>](application-proxy-working-with-proxy-servers.md)
* [<span data-ttu-id="5b563-231">Устранение неполадок и сообщения об ошибках прокси приложения</span><span class="sxs-lookup"><span data-stu-id="5b563-231">Troubleshoot Application Proxy and connector errors</span></span>](active-directory-application-proxy-troubleshoot.md)
* [<span data-ttu-id="5b563-232">Как toosilently установку hello соединитель прокси приложения Azure AD</span><span class="sxs-lookup"><span data-stu-id="5b563-232">How toosilently install hello Azure AD Application Proxy Connector</span></span>](active-directory-application-proxy-silent-installation.md)

