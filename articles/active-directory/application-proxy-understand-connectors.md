---
title: "соединители прокси приложения Azure AD aaaUnderstand | Документы Microsoft"
description: "Описываются основы hello о соединителей прокси приложения Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: 294cb26803ef7cf8be9f3af0678d6d2e64f6cc14
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understand-azure-ad-application-proxy-connectors"></a>Сведения о соединителях прокси приложения Azure AD

Соединители являются основой для работы прокси приложения Azure AD. Они просты toodeploy и поддерживать, поэтому super мощный. В этой статье рассматриваются какой разъема, как они работают и некоторые предложения по toooptimize развертывания. 

## <a name="what-is-an-application-proxy-connector"></a>Что такое соединитель прокси приложения

Соединители — это упрощенный агенты, которые располагаются в локальной среде и упрощения hello исходящее подключение toohello прокси-сервера приложения службы. Соединители должны устанавливаться на Windows Server, имеющий доступ toohello серверной части приложения. Соединители можно организовать в группы соединителей, с каждой группой обработки трафика toospecific приложений. Балансировка нагрузки соединители автоматически и может помочь toooptimize структуру сети. 

## <a name="requirements-and-deployment"></a>Требования и развертывание

toodeploy прокси приложения успешно, требуется по крайней мере один соединитель, но мы рекомендуем два или более для большей гибкости. Установите соединитель hello на машины 2016 или Windows Server 2012 R2. Соединитель Hello должен toobe может toocommunicate службы прокси приложения hello, а также hello локальных приложений, которые публикуются. 

Дополнительные сведения о требованиях к сети hello для сервера соединителя hello см. в разделе [Приступая к работе с прокси-сервера приложений и установить соединитель](active-directory-application-proxy-enable.md).

## <a name="maintenance"></a>Обслуживание, 
Hello соединители и службу hello аккуратно всех задач hello высокого уровня доступности. Их можно добавлять или удалять динамически. Каждый раз при создании нового запроса это перенаправленное tooone hello соединителей, доступных в данный момент. Если соединитель временно недоступен, он не будет реагировать toothis трафика.

Hello соединители не имеют состояния и которых отсутствуют данные конфигурации на компьютере hello. Hello только те данные, которые они хранят — hello настройки для подключения службы hello и его сертификат проверки подлинности. При подключении службы toohello они запрашивают данные конфигурации для всех необходимых hello и обновить его каждые несколько минут.

Соединители также опрашивать hello server toofind ли имеется более новая версия соединителя hello. Если он найден, соединители hello обновляются.

Вы можете отслеживать соединителях из hello компьютером, на котором они работают под управлением, с помощью журнала событий hello и счетчики производительности. Также можно просмотреть их состояние со страницы приветствия прокси приложения hello портала Azure:

 ![Соединители прокси приложения Azure AD](./media/application-proxy-understand-connectors/app-proxy-connectors.png)

У вас нет toomanually удаление соединителей, которые не используются. При запуске соединителя, она остается активной, как она подключается toohello службы. Неиспользуемые соединители помечаются как _неактивные_ и удаляются спустя 10 дней бездействия. Если вы хотите toouninstall соединитель, удалите службу соединителя hello и hello обновления с сервера hello. Перезапустите службу hello remove toofully компьютера.

## <a name="automatic-updates"></a>Автоматическое обновление

Для всех соединителей hello, развертываемых в Azure AD обеспечивает автоматическое обновление. При условии, что выполняется hello средство обновления соединителя прокси-сервера приложения службы, соединителях обновляются автоматически. Если вы не видите hello средство обновления соединителя службы на сервере, вы должны слишком[переустановить соединитель](active-directory-application-proxy-enable.md) tooget все обновления. 

Если вы не хотите toowait для соединителя tooyour toocome автоматического обновления, можно выполнить обновление вручную. Go toohello [странице разъем загрузки](https://download.msappproxy.net/subscription/d3c8b69d-6bf7-42be-a529-3fe9c2e70c90/connector/download) на сервере hello, где соединителя — найти и выбрать **загрузить**. Этот процесс запускает обновление для локального соединителя hello. 

Для клиентов с несколькими разъемами hello автоматического обновления целевой один соединитель во время каждого простою tooprevent группы в вашей среде. 

При обновлении соединителя могут возникать простои в следующих случаях.  
- У вас только один соединитель. tooavoid это время простоя и улучшения высокого уровня доступности рекомендуется устанавливать второй соединитель и [создания соединителя группы](active-directory-application-proxy-connectors-azure-portal.md).  
- Соединитель находился в середине hello транзакции во время начала обновления hello. Несмотря на то, что hello начальной транзакции теряется, браузер автоматически следует повторить операцию hello или обновите страницу. Если оно повторно отправляется запрос hello, hello трафика — перенаправленное tooa резервного копирования соединитель.

## <a name="creating-connector-groups"></a>Создание групп соединителей

Группы соединителей включить tooassign определенные соединители tooserve конкретных приложений. Можно сгруппировать несколько соединителей и затем назначьте каждую группу tooa приложения. 

Группы соединителей стала проще toomanage крупных развертываний. Они также сократить задержку для клиентов, имеющих приложений, размещенных в разных регионах, так как можно создать группы на основе расположения соединителей tooserve только локальные приложения. 

toolearn Дополнительные сведения о группах соединителя. в разделе [публикации приложений на отдельные сети и расположений с помощью соединителя группы](active-directory-application-proxy-connectors-azure-portal.md).

## <a name="security-and-networking"></a>Безопасность и сеть

Соединители можно установить в любом месте сети hello, позволяет им toosend запросов toohello прокси-сервера приложения службы. Важно то, что hello компьютер с запущенной hello соединитель, также имеет доступ tooyour приложений. Можно установить соединители внутри сети организации или на виртуальной машине, работающей в облаке hello. Соединители могут работать в сети периметра, но это необязательно, так как весь трафик является исходящим, поэтому сеть защищена.

Соединители отправляют только исходящие запросы. исходящий трафик Hello отправляется toohello прокси-сервера приложения службы и toohello опубликованным приложениям. У вас нет tooopen входящие порты, так как трафик проходит обоими способами после установления сеанса. Не имеют tooset копирование балансировки нагрузки между соединители hello и настройки доступа извне через брандмауэры. 

Дополнительные сведения о настройке правил брандмауэра для исходящего трафика см. в статье [Работа с имеющимися локальными прокси-серверами](application-proxy-working-with-proxy-servers.md).

Используйте hello [Azure средство тестирования порты соединителя AD приложения прокси](https://aadap-portcheck.connectorporttest.msappproxy.net/) tooverify, что соединитель доступ службы прокси приложения hello. Как минимум убедитесь, что у всех зеленой галочки области центральной части США hello и tooyou ближайший регион hello. Учитывайте также, что большее число зеленых флажков означает большую устойчивость. 

## <a name="performance-and-scalability"></a>Производительность и масштабирование

Масштаб для hello службы прокси приложения является прозрачным, но масштаб фактор для соединителей. Необходимо toohave пиковой достаточно toohandle соединители. Тем не менее не требуется балансировка нагрузки tooconfigure, так как все соединители внутри группы соединителей автоматического распределения нагрузки.

Соединители не имеют состояния, они не подвержены hello количество пользователей или сеансов. Вместо этого они могут реагировать toohello число запросов и их размер полезных данных. Обычный компьютер может обработать несколько тысяч запросов стандартного веб-трафика в секунду. определенная мощность Hello зависит от характеристики hello точное компьютера. 

производительность соединителей Hello ограничивается ЦП и сети. Производительность ЦП необходим для SSL-шифрование и расшифровка, а сети является toohello приложений важно tooget быстрого подключения и hello веб-службы в Azure.

Память, напротив, меньше всего важна для соединителей. веб-службу Hello отвечает за большую часть обработки hello и весь трафик, не прошедшие проверку подлинности. Все, что можно сделать в облаке hello выполняется в облаке hello. 

Другим фактором, влияющим на производительность является качество hello hello сети между hello соединителей, включая: 

* **Здравствуйте, веб-службы**: toohello медленно или высокой задержкой подключения службы прокси приложения Azure влияют hello соединителя производительности. Для наилучшей производительности hello подключиться tooAzure вашей организации с помощью Express Route. В противном случае имеют сетевые команды убедитесь, что tooAzure соединения обрабатываются максимально эффективно. 
* **Здравствуйте, внутренних приложений**: В некоторых случаях существуют дополнительные прокси между соединителя hello и hello внутренних приложений, которые могут привести к снижению или запретить подключения. tootroubleshoot этот сценарий, откройте браузер на сервер соединителя hello и повторите tooaccess приложения hello. Если соединители hello запуска в Azure, но приложения hello являются локальными, hello взаимодействие может оказаться ожидаемого пользователями.
* **Здравствуйте, контроллеры домена**: hello соединители выполнить единый вход с использованием ограниченного делегирования Kerberos, обращаться hello контроллеры домена перед отправкой серверной toohello hello запроса. соединители Hello имеют кэш билетов Kerberos, но в среде занят скорости реагирования hello hello контроллеров домена может повлиять на производительность. Такая проблема наиболее характерна для ситуации, когда соединители выполняются в Azure, но взаимодействуют с контроллерами домена в локальной среде. 

Дополнительные сведения об оптимизации сети см. в разделе [Аспекты топологии сети при использовании прокси приложения Azure Active Directory](application-proxy-network-topology-considerations.md).

## <a name="domain-joining"></a>Присоединение к домену

Соединители могут выполняться на компьютере, не присоединенном к домену. Тем не менее если вы хотите единого входа (SSO) tooapplications, использовать встроенную проверку подлинности Windows (IWA), необходимо машины, присоединенных к домену. В этом случае hello соединителя машины должны находиться домена tooa присоединены к домену, можно выполнить [Kerberos](https://web.mit.edu/kerberos) ограниченное делегирование от лица пользователей hello для hello опубликованным приложениям.

Соединители также может быть присоединены к домену toodomains или лесах, содержащих частичного доверия или контроллеров домена только для tooread.

## <a name="connector-deployments-on-hardened-environments"></a>Развертывание соединителей в средах с усиленной защитой

Развертывание соединителей обычно не вызывает сложностей и не требует дополнительной настройки. Но для некоторых редких сценариев есть определенные условия.

* Необходимо организаций, которые ограничивают исходящий трафик hello [открыть порты](active-directory-application-proxy-enable.md#open-your-ports).
* FIPS-совместимые компьютеры будут необходимые toochange их tooallow конфигурации hello toogenerate процессов соединителя и хранения сертификата.
* Организации, заблокировать их среды на основе процессов hello hello, проблема, сетевые запросы иметь toomake том, что обе службы соединителя включена tooaccess все необходимые порты и IP-адресов.
* В некоторых случаях исходящих прямой прокси-серверов могут нарушить проверки подлинности сертификата двустороннее hello и привести к toofail связи hello.

## <a name="connector-authentication"></a>Проверка подлинности соединителя

tooprovide службы безопасности, соединители имеет tooauthenticate сторону hello службы, а служба hello tooauthenticate сторону hello соединителя. Эта проверка подлинности выполняется с помощью сертификаты клиента и сервера, когда соединители hello инициируют подключение hello. Этот способ администратор hello имя пользователя и пароль не сохраняются на компьютере соединителя hello.

Hello сертификаты, используемые зависят от конкретного toohello прокси-сервер приложения службы. Они создаются во время первоначальной регистрации hello и автоматически обновить соединители hello каждые несколько месяцев. 

Если соединитель не подключен toohello службы для нескольких месяцев, сертификаты могут быть устаревшими. В этом случае удалите и переустановите регистрации tootrigger hello соединителя. Можно выполнить следующие команды PowerShell hello.

```
Import-module AppProxyPSModule
Register-AppProxyConnector
```

## <a name="under-hello-hood"></a>Кулисами hello

Соединители основаны на прокси для веб-приложения Windows Server, поэтому они имеют большую часть hello же средства управления, включая журналы событий Windows

 ![Управлять журналами событий с hello в окне просмотра событий](./media/application-proxy-understand-connectors/event-view-window.png)

и счетчики производительности Windows. 

 ![Добавление счетчиков toohello соединителя с hello системного монитора](./media/application-proxy-understand-connectors/performance-monitor.png)

соединители Hello у администратора и сеансов журналы. журналы Hello администрирования включают ключевые события и их ошибки. Журналы сеансов Hello включают все транзакции hello и подробные сведения об их обработке. 

журналы toosee hello, go toohello просмотра событий откройте hello **представление** меню и включить **Отобразить аналитический и отладочный журналы**. Затем включите их toostart сбора событий. Эти журналы не отображаются в прокси веб-приложения в Windows Server 2012 R2 соединители hello основаны на более поздней версии.

Вы можете проверить состояние hello службы hello в окне приветствия служб. Соединитель Hello состоит из двух служб Windows: hello фактическое соединителя и обновления hello. Оба параметра необходимо запустить все время hello.

 ![Окно "Службы (локальные)" Azure AD](./media/application-proxy-understand-connectors/aad-connector-services.png)

## <a name="next-steps"></a>Дальнейшие действия


* [Публикация приложений в отдельных сетях и расположениях с помощью групп соединителей](active-directory-application-proxy-connectors-azure-portal.md)
* [Работа с имеющимися локальными прокси-серверами](application-proxy-working-with-proxy-servers.md)
* [Устранение неполадок и сообщения об ошибках прокси приложения](active-directory-application-proxy-troubleshoot.md)
* [Как toosilently установку hello соединитель прокси приложения Azure AD](active-directory-application-proxy-silent-installation.md)

