---
title: "Azure AD Connect: принципы проектирования | Документация Майкрософт"
description: "В этой статье описываются факторы, которые необходимо учитывать при проектировании реализации."
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1e5d5c6a716ca653fb14fc059e8155124b433732
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="6c490-103">Azure AD Connect: принципы проектирования</span><span class="sxs-lookup"><span data-stu-id="6c490-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="6c490-104">Hello в этом разделе предназначена toodescribe областей, которые необходимо рассматривать во время разработки реализации hello из Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6c490-104">hello purpose of this topic is toodescribe areas that must be thought through during hello implementation design of Azure AD Connect.</span></span> <span data-ttu-id="6c490-105">Здесь подробно рассмотрены некоторые вопросы, но часть из них вкратце рассмотрена в других статьях.</span><span class="sxs-lookup"><span data-stu-id="6c490-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="6c490-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="6c490-106">sourceAnchor</span></span>
<span data-ttu-id="6c490-107">атрибут sourceAnchor Hello определен как *неизменяемый во время существования hello объекта атрибута*.</span><span class="sxs-lookup"><span data-stu-id="6c490-107">hello sourceAnchor attribute is defined as *an attribute immutable during hello lifetime of an object*.</span></span> <span data-ttu-id="6c490-108">Однозначно определяет объект как hello один объектов в локальной среде и в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-108">It uniquely identifies an object as being hello same object on-premises and in Azure AD.</span></span> <span data-ttu-id="6c490-109">атрибут Hello также называется **immutableId** и hello двух имена используются взаимозаменяемыми.</span><span class="sxs-lookup"><span data-stu-id="6c490-109">hello attribute is also called **immutableId** and hello two names are used interchangeable.</span></span>

<span data-ttu-id="6c490-110">Hello слово, неизменяемый, которое является «не может быть изменен», раздел важные toothis.</span><span class="sxs-lookup"><span data-stu-id="6c490-110">hello word immutable, that is "cannot be changed", is important toothis topic.</span></span> <span data-ttu-id="6c490-111">Поскольку значение этого атрибута нельзя изменить после его задания, она будет toopick важно разработать проект, который поддерживает вашего сценария.</span><span class="sxs-lookup"><span data-stu-id="6c490-111">Since this attribute’s value cannot be changed after it has been set, it is important toopick a design that supports your scenario.</span></span>

<span data-ttu-id="6c490-112">Hello атрибут используется для hello следующие сценарии:</span><span class="sxs-lookup"><span data-stu-id="6c490-112">hello attribute is used for hello following scenarios:</span></span>

* <span data-ttu-id="6c490-113">При создании нового сервера синхронизации или его пересоздании после аварийного восстановления: в таком случае этот атрибут связывает существующие объекты в Azure AD с локальными объектами.</span><span class="sxs-lookup"><span data-stu-id="6c490-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="6c490-114">Если переместить из модели только для облака удостоверения tooa синхронизированные удостоверения, то этот атрибут позволяет объектам слишком существующие объекты в Azure AD с локальными объектами «жестких соответствия».</span><span class="sxs-lookup"><span data-stu-id="6c490-114">If you move from a cloud-only identity tooa synchronized identity model, then this attribute allows objects too"hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="6c490-115">Если вы используете федерации, то этот атрибут, а также hello **userPrincipalName** используется в hello утверждения toouniquely идентификации пользователя.</span><span class="sxs-lookup"><span data-stu-id="6c490-115">If you use federation, then this attribute together with hello **userPrincipalName** is used in hello claim toouniquely identify a user.</span></span>

<span data-ttu-id="6c490-116">В этом разделе рассказывается о sourceAnchor, только по отношению toousers.</span><span class="sxs-lookup"><span data-stu-id="6c490-116">This topic only talks about sourceAnchor as it relates toousers.</span></span> <span data-ttu-id="6c490-117">Hello применяются те же правила tooall типы объектов, но он предназначен только для пользователей, что это проблема обычно возникает.</span><span class="sxs-lookup"><span data-stu-id="6c490-117">hello same rules apply tooall object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="6c490-118">Выбор значений атрибута sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="6c490-119">значение атрибута Hello должно соответствовать правилам hello:</span><span class="sxs-lookup"><span data-stu-id="6c490-119">hello attribute value must follow hello following rules:</span></span>

* <span data-ttu-id="6c490-120">Его длина должна быть меньше 60 символов.</span><span class="sxs-lookup"><span data-stu-id="6c490-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="6c490-121">Символы, отличные от a–z, A–Z или 0–9, кодируются, и каждый из них считается как три символа.</span><span class="sxs-lookup"><span data-stu-id="6c490-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="6c490-122">Оно не должно содержать специальные символы: &#92; !</span><span class="sxs-lookup"><span data-stu-id="6c490-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="6c490-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="6c490-123"># $ % & * + / = ?</span></span> <span data-ttu-id="6c490-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="6c490-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="6c490-125">Оно должно быть глобально уникальным.</span><span class="sxs-lookup"><span data-stu-id="6c490-125">Must be globally unique</span></span>
* <span data-ttu-id="6c490-126">Значение должно относиться к строковому, целочисленному или двоичному типу.</span><span class="sxs-lookup"><span data-stu-id="6c490-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="6c490-127">Значение не должно быть основано на имени пользователя.</span><span class="sxs-lookup"><span data-stu-id="6c490-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="6c490-128">Значение не должно быть с учетом регистра и содержать значения, которые изменяются в зависимости от регистра.</span><span class="sxs-lookup"><span data-stu-id="6c490-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="6c490-129">Следует назначить при создании hello объекта</span><span class="sxs-lookup"><span data-stu-id="6c490-129">Should be assigned when hello object is created</span></span>

<span data-ttu-id="6c490-130">Если hello выбран sourceAnchor не типа String и tooensure значение атрибута hello Base64Encode подключения Azure AD не имеются специальные знаки.</span><span class="sxs-lookup"><span data-stu-id="6c490-130">If hello selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode hello attribute value tooensure no special characters appear.</span></span> <span data-ttu-id="6c490-131">При использовании другого сервера федерации, чем служб федерации Active Directory, убедитесь, что сервер может также атрибут Base64Encode hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-131">If you use another federation server than ADFS, make sure your server can also Base64Encode hello attribute.</span></span>

<span data-ttu-id="6c490-132">атрибут sourceAnchor Hello учитывается регистр.</span><span class="sxs-lookup"><span data-stu-id="6c490-132">hello sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="6c490-133">Значение «АБВГД» не является hello такой же, как «АБВГД».</span><span class="sxs-lookup"><span data-stu-id="6c490-133">A value of “JohnDoe” is not hello same as “johndoe”.</span></span> <span data-ttu-id="6c490-134">При этом не стоит создавать два объекта, имена которых отличаются только регистром.</span><span class="sxs-lookup"><span data-stu-id="6c490-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="6c490-135">При наличии одного леса является локальной, затем атрибута hello, следует использовать **objectGUID**.</span><span class="sxs-lookup"><span data-stu-id="6c490-135">If you have a single forest on-premises, then hello attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="6c490-136">Это атрибут hello, используется, если используются стандартные параметры в Azure AD Connect и также hello атрибуте, используемом DirSync.</span><span class="sxs-lookup"><span data-stu-id="6c490-136">This is also hello attribute used when you use express settings in Azure AD Connect and also hello attribute used by DirSync.</span></span>

<span data-ttu-id="6c490-137">Если вы используете несколько лесов и не перемещайте пользователей между лесами и доменами, затем **objectGUID** toouse хорошо атрибута даже в этом случае является.</span><span class="sxs-lookup"><span data-stu-id="6c490-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute toouse even in this case.</span></span>

<span data-ttu-id="6c490-138">При перемещении пользователей между доменами и лесами, затем необходимо найти атрибут, который не изменяется, или можно переместить с пользователями hello во время перемещения hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with hello users during hello move.</span></span> <span data-ttu-id="6c490-139">Рекомендуемый подход — toointroduce искусственных атрибута.</span><span class="sxs-lookup"><span data-stu-id="6c490-139">A recommended approach is toointroduce a synthetic attribute.</span></span> <span data-ttu-id="6c490-140">Для этого подходит атрибут, который может содержать что-нибудь наподобие идентификатора GUID.</span><span class="sxs-lookup"><span data-stu-id="6c490-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="6c490-141">При создании объекта новый идентификатор GUID создается и меткой hello пользователя.</span><span class="sxs-lookup"><span data-stu-id="6c490-141">During object creation, a new GUID is created and stamped on hello user.</span></span> <span data-ttu-id="6c490-142">Правило пользовательских синхронизации может быть создано в hello синхронизации ядра сервера toocreate значение в зависимости от hello **objectGUID** и обновление hello выбранного атрибута в ADDS.</span><span class="sxs-lookup"><span data-stu-id="6c490-142">A custom sync rule can be created in hello sync engine server toocreate this value based on hello **objectGUID** and update hello selected attribute in ADDS.</span></span> <span data-ttu-id="6c490-143">При перемещении hello объекта, делает содержимое hello копирования tooalso убедиться, что это значение.</span><span class="sxs-lookup"><span data-stu-id="6c490-143">When you move hello object, make sure tooalso copy hello content of this value.</span></span>

<span data-ttu-id="6c490-144">Другим решением является toopick существующий атрибут, вы знаете, не изменяется.</span><span class="sxs-lookup"><span data-stu-id="6c490-144">Another solution is toopick an existing attribute you know does not change.</span></span> <span data-ttu-id="6c490-145">Зачастую можно использовать атрибут **employeeID**.</span><span class="sxs-lookup"><span data-stu-id="6c490-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="6c490-146">Если вы рассматриваете атрибут, который содержит буквы, убедитесь, что не вероятность hello регистр (верхний и нижний регистр) можно изменить для значения атрибута hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-146">If you consider an attribute that contains letters, make sure there is no chance hello case (upper case vs. lower case) can change for hello attribute's value.</span></span> <span data-ttu-id="6c490-147">Неверные атрибуты, которые не должны использоваться включить эти атрибуты с именем hello hello пользователя.</span><span class="sxs-lookup"><span data-stu-id="6c490-147">Bad attributes that should not be used include those attributes with hello name of hello user.</span></span> <span data-ttu-id="6c490-148">В семье или divorce используется имя hello ожидаемый toochange, что не допускается для этого атрибута.</span><span class="sxs-lookup"><span data-stu-id="6c490-148">In a marriage or divorce, hello name is expected toochange, which is not allowed for this attribute.</span></span> <span data-ttu-id="6c490-149">Кроме того, это одна из причин почему атрибуты, такие как **userPrincipalName**, **mail**, и **targetAddress** не возможно также tooselect в установке hello Azure AD Connect мастер.</span><span class="sxs-lookup"><span data-stu-id="6c490-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible tooselect in hello Azure AD Connect installation wizard.</span></span> <span data-ttu-id="6c490-150">Эти атрибуты также содержат hello «@» символ, что не допускается в hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-150">Those attributes also contain hello "@" character, which is not allowed in hello sourceAnchor.</span></span>

### <a name="changing-hello-sourceanchor-attribute"></a><span data-ttu-id="6c490-151">Изменения атрибута sourceAnchor hello</span><span class="sxs-lookup"><span data-stu-id="6c490-151">Changing hello sourceAnchor attribute</span></span>
<span data-ttu-id="6c490-152">значение атрибута sourceAnchor Hello не может изменяться после создания hello объекта в Azure AD и синхронизации удостоверений hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-152">hello sourceAnchor attribute value cannot be changed after hello object has been created in Azure AD and hello identity is synchronized.</span></span>

<span data-ttu-id="6c490-153">По этой причине hello следующие ограничения применяются tooAzure AD Connect:</span><span class="sxs-lookup"><span data-stu-id="6c490-153">For this reason, hello following restrictions apply tooAzure AD Connect:</span></span>

* <span data-ttu-id="6c490-154">атрибут sourceAnchor Hello можно задать только во время первоначальной установки.</span><span class="sxs-lookup"><span data-stu-id="6c490-154">hello sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="6c490-155">При повторном запуске мастера установки hello, этот параметр доступен, только для чтения.</span><span class="sxs-lookup"><span data-stu-id="6c490-155">If you rerun hello installation wizard, this option is read-only.</span></span> <span data-ttu-id="6c490-156">Если вам требуется toochange этот параметр, необходимо удалить и переустановить.</span><span class="sxs-lookup"><span data-stu-id="6c490-156">If you need toochange this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="6c490-157">При установке другого сервера Azure AD Connect, то необходимо выбрать hello предыдущих же атрибут sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-157">If you install another Azure AD Connect server, then you must select hello same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="6c490-158">Если вы ранее использовали DirSync и переместите tooAzure AD подключиться, необходимо использовать **objectGUID** это hello атрибуте, используемом DirSync.</span><span class="sxs-lookup"><span data-stu-id="6c490-158">If you have earlier been using DirSync and move tooAzure AD Connect, then you must use **objectGUID** since that is hello attribute used by DirSync.</span></span>
* <span data-ttu-id="6c490-159">При изменении значения hello для sourceAnchor после hello объекта экспортированного tooAzure AD, затем Azure AD Connect sync вызывает ошибку и не позволяет использовать новые изменения для этого объекта перед hello проблема была исправлена и обратно в hello изменяется hello sourceAnchor исходный каталог.</span><span class="sxs-lookup"><span data-stu-id="6c490-159">If hello value for sourceAnchor is changed after hello object has been exported tooAzure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before hello issue has been fixed and hello sourceAnchor is changed back in hello source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="6c490-160">Использование msDS-ConsistencyGuid в качестве sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="6c490-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="6c490-161">По умолчанию, Azure AD Connect (версия 1.1.486.0 и более ранних версий) использует objectGUID в качестве атрибута sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as hello sourceAnchor attribute.</span></span> <span data-ttu-id="6c490-162">ObjectGUID создается системой.</span><span class="sxs-lookup"><span data-stu-id="6c490-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="6c490-163">Его значение не указывается при создании локальных объектов AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="6c490-164">Как описано в разделе [sourceAnchor](#sourceanchor), существуют сценарии, где необходимо получить значение sourceAnchor toospecify hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need toospecify hello sourceAnchor value.</span></span> <span data-ttu-id="6c490-165">Если применимо tooyou сценарии hello, необходимо использовать настраиваемый атрибут AD (например, атрибут msDS-ConsistencyGuid) как атрибут sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-165">If hello scenarios are applicable tooyou, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as hello sourceAnchor attribute.</span></span>

<span data-ttu-id="6c490-166">Azure AD Connect (версия 1.1.524.0 и после) теперь облегчает использование hello msDS-ConsistencyGuid в качестве атрибута sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates hello use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="6c490-167">При использовании этой функции, Azure AD Connect автоматически настраивает hello правилах синхронизации:</span><span class="sxs-lookup"><span data-stu-id="6c490-167">When using this feature, Azure AD Connect automatically configures hello synchronization rules to:</span></span>

1. <span data-ttu-id="6c490-168">Используйте атрибут msDS-ConsistencyGuid как атрибут sourceAnchor hello для пользовательских объектов.</span><span class="sxs-lookup"><span data-stu-id="6c490-168">Use msDS-ConsistencyGuid as hello sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="6c490-169">Для других типов объектов используется ObjectGUID.</span><span class="sxs-lookup"><span data-stu-id="6c490-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="6c490-170">Для любой заданной локального пользователя AD, атрибут msDS-ConsistencyGuid не заполнено, Azure AD Connect записывает его атрибут msDS-ConsistencyGuid задней toohello значение objectGUID в локальной Active Directory объект.</span><span class="sxs-lookup"><span data-stu-id="6c490-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="6c490-171">После заполнения атрибута msDS-ConsistencyGuid hello Azure AD Connect затем экспортирует tooAzure hello объекта AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-171">After hello msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports hello object tooAzure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="6c490-172">Один раз в локальной среде AD импортируется в Azure AD Connect (который импортируется в пространство соединителя AD hello и проецируются в метавселенной hello), больше нельзя изменить его значение sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into hello AD Connector Space and projected into hello Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="6c490-173">значения sourceAnchor hello toospecify для заданного локального AD объекта, настройте его атрибут msDS-ConsistencyGuid перед его импортом в Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6c490-173">toospecify hello sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="6c490-174">Требования к разрешениям</span><span class="sxs-lookup"><span data-stu-id="6c490-174">Permission required</span></span>
<span data-ttu-id="6c490-175">Для этого toowork функция toosynchronize учетная запись, используемая hello AD DS с локальной Active Directory должны быть предоставлены атрибут msDS-ConsistencyGuid toohello разрешения записи в локальной Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6c490-175">For this feature toowork, hello AD DS account used toosynchronize with on-premises Active Directory must be granted write permission toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature---new-installation"></a><span data-ttu-id="6c490-176">Как tooenable hello функция ConsistencyGuid - новой установки</span><span class="sxs-lookup"><span data-stu-id="6c490-176">How tooenable hello ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="6c490-177">Во время новой установки, можно включить использование hello ConsistencyGuid в качестве sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-177">You can enable hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="6c490-178">В этом разделе подробно описывается экспресс- и пользовательская установка.</span><span class="sxs-lookup"><span data-stu-id="6c490-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="6c490-179">Только более новые версии Azure AD Connect (1.1.524.0 и после) поддерживает использование в качестве sourceAnchor ConsistencyGuid hello во время новой установки.</span><span class="sxs-lookup"><span data-stu-id="6c490-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature"></a><span data-ttu-id="6c490-180">Как tooenable hello ConsistencyGuid-функция</span><span class="sxs-lookup"><span data-stu-id="6c490-180">How tooenable hello ConsistencyGuid feature</span></span>
<span data-ttu-id="6c490-181">В настоящее время hello функцию можно включить только во время новой установки Azure AD Connect только.</span><span class="sxs-lookup"><span data-stu-id="6c490-181">Currently, hello feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="6c490-182">Экспресс-установка</span><span class="sxs-lookup"><span data-stu-id="6c490-182">Express Installation</span></span>
<span data-ttu-id="6c490-183">При установке Azure AD Connect с режимом экспресс-выпуск, hello Azure AD Connect мастер автоматически определяет toouse hello наиболее Подходящие атрибут как атрибут sourceAnchor hello, с помощью hello следующая логика:</span><span class="sxs-lookup"><span data-stu-id="6c490-183">When installing Azure AD Connect with Express mode, hello Azure AD Connect wizard automatically determines hello most appropriate AD attribute toouse as hello sourceAnchor attribute using hello following logic:</span></span>

* <span data-ttu-id="6c490-184">Во-первых hello Azure AD Connect мастера запросов в атрибуте hello AD tooretrieve клиента Azure AD используются в качестве hello атрибут sourceAnchor в установке hello предыдущих Azure AD Connect (если таковые имеются).</span><span class="sxs-lookup"><span data-stu-id="6c490-184">First, hello Azure AD Connect wizard queries your Azure AD tenant tooretrieve hello AD attribute used as hello sourceAnchor attribute in hello previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="6c490-185">Если эта информация доступна, Azure AD Connect использует атрибут hello же AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-185">If this information is available, Azure AD Connect uses hello same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="6c490-186">Только более новые версии Azure AD Connect (1.1.524.0 и после) в клиенте Azure AD хранит сведения о hello sourceAnchor атрибут, используемый во время установки.</span><span class="sxs-lookup"><span data-stu-id="6c490-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about hello sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="6c490-187">Более ранние версии Azure AD Connect этого не делают.</span><span class="sxs-lookup"><span data-stu-id="6c490-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="6c490-188">Если сведения о hello sourceAnchor атрибут, используемый недоступно, мастер hello проверяет состояние hello атрибут msDS-ConsistencyGuid hello в локальной службе Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6c490-188">If information about hello sourceAnchor attribute used isn't available, hello wizard checks hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="6c490-189">Если атрибут hello не настроен для любого объекта в каталоге hello, hello мастер использует hello msDS-ConsistencyGuid как атрибут sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-189">If hello attribute isn't configured on any object in hello directory, hello wizard uses hello msDS-ConsistencyGuid as hello sourceAnchor attribute.</span></span> <span data-ttu-id="6c490-190">Атрибут hello, настроенных на один или несколько объектов в каталоге hello, мастер hello завершается hello атрибут используется другими приложениями и не может использоваться как атрибут sourceAnchor...</span><span class="sxs-lookup"><span data-stu-id="6c490-190">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="6c490-191">В этом случае мастер hello возвращается toousing objectGUID как атрибут sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-191">In which case, hello wizard falls back toousing objectGUID as hello sourceAnchor attribute.</span></span>

* <span data-ttu-id="6c490-192">После решено атрибут sourceAnchor hello hello мастер сохраняет hello сведения в клиенте Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-192">Once hello sourceAnchor attribute is decided, hello wizard stores hello information in your Azure AD tenant.</span></span> <span data-ttu-id="6c490-193">Hello информация будет использоваться будущих установки Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="6c490-193">hello information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="6c490-194">После завершения установки экспресс-выпуск hello мастер сообщает, выбравший какой атрибут как атрибут источника привязки hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-194">Once Express installation completes, hello wizard informs you which attribute has been picked as hello Source Anchor attribute.</span></span>

![Мастер сообщает атрибут AD, выбранный для sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="6c490-196">Выборочная установка</span><span class="sxs-lookup"><span data-stu-id="6c490-196">Custom installation</span></span>
<span data-ttu-id="6c490-197">При установке Azure AD Connect с пользовательский режим, мастер Azure AD Connect hello обеспечивает два варианта при настройке атрибут sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-197">When installing Azure AD Connect with Custom mode, hello Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![Выборочная установка: настройка sourceAnchor](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="6c490-199">Настройка</span><span class="sxs-lookup"><span data-stu-id="6c490-199">Setting</span></span> | <span data-ttu-id="6c490-200">Описание</span><span class="sxs-lookup"><span data-stu-id="6c490-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="6c490-201">Платформа Azure управление hello источник привязки</span><span class="sxs-lookup"><span data-stu-id="6c490-201">Let Azure manage hello source anchor for me</span></span> | <span data-ttu-id="6c490-202">Выберите этот параметр, если требуется атрибут hello toopick Azure AD для вас.</span><span class="sxs-lookup"><span data-stu-id="6c490-202">Select this option if you want Azure AD toopick hello attribute for you.</span></span> <span data-ttu-id="6c490-203">Если этот параметр выбран, мастер применяет Azure AD Connect hello же [логику выбора атрибута sourceAnchor, используемых во время установки Express](#express-installation).</span><span class="sxs-lookup"><span data-stu-id="6c490-203">If you select this option, Azure AD Connect wizard applies hello same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="6c490-204">Аналогичные tooExpress установки, приветствия мастера о том, какой атрибут был выбравший как hello атрибут привязки источника после завершения выборочной установки.</span><span class="sxs-lookup"><span data-stu-id="6c490-204">Similar tooExpress installation, hello wizard informs you which attribute has been picked as hello Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="6c490-205">Определенный атрибут</span><span class="sxs-lookup"><span data-stu-id="6c490-205">A specific attribute</span></span> | <span data-ttu-id="6c490-206">Выберите этот параметр, при желании toospecify существующие AD атрибут как атрибут sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-206">Select this option if you wish toospecify an existing AD attribute as hello sourceAnchor attribute.</span></span> |

### <a name="how-tooenable-hello-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="6c490-207">Как tooenable hello функция ConsistencyGuid - существующего развертывания</span><span class="sxs-lookup"><span data-stu-id="6c490-207">How tooenable hello ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="6c490-208">При наличии существующего развертывания Azure AD Connect, который использует objectGUID в качестве источника привязки атрибута hello, можно переключить его toousing ConsistencyGuid вместо него.</span><span class="sxs-lookup"><span data-stu-id="6c490-208">If you have an existing Azure AD Connect deployment which is using objectGUID as hello Source Anchor attribute, you can switch it toousing ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="6c490-209">Только более новые версии Azure AD Connect (1.1.552.0 и после) поддерживает переключение с tooConsistencyGuid ObjectGuid как атрибут источника привязки hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid tooConsistencyGuid as hello Source Anchor attribute.</span></span>

<span data-ttu-id="6c490-210">tooswitch из tooConsistencyGuid objectGUID как атрибут источника привязки hello:</span><span class="sxs-lookup"><span data-stu-id="6c490-210">tooswitch from objectGUID tooConsistencyGuid as hello Source Anchor attribute:</span></span>

1. <span data-ttu-id="6c490-211">Запустите мастер hello Azure AD Connect и нажмите кнопку **Настройка** toogo toohello задачи экрана.</span><span class="sxs-lookup"><span data-stu-id="6c490-211">Start hello Azure AD Connect wizard and click **Configure** toogo toohello Tasks screen.</span></span>

2. <span data-ttu-id="6c490-212">Выберите hello **Настройка привязки источника** задач параметр и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6c490-212">Select hello **Configure Source Anchor** task option and click **Next**.</span></span>

   ![Включение ConsistencyGuid для существующего развертывания — шаг 2](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="6c490-214">Введите учетные данные администратора Azure AD и нажмите кнопку **Далее**.</span><span class="sxs-lookup"><span data-stu-id="6c490-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="6c490-215">Мастер Azure AD Connect анализирует hello состояние атрибута msDS-ConsistencyGuid hello в локальной службе Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6c490-215">Azure AD Connect wizard analyzes hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="6c490-216">Если атрибут hello не настроен на любой объект в каталоге, Azure AD Connect завершается, что никакое другое приложение использует в настоящее время атрибут hello и является безопасным toouse приветствия его как атрибут источника привязки hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-216">If hello attribute isn't configured on any object in hello directory, Azure AD Connect concludes that no other application is currently using hello attribute and is safe toouse it as hello Source Anchor attribute.</span></span> <span data-ttu-id="6c490-217">Нажмите кнопку **Далее** toocontinue.</span><span class="sxs-lookup"><span data-stu-id="6c490-217">Click **Next** toocontinue.</span></span>

   ![Включение ConsistencyGuid для существующего развертывания — шаг 4](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="6c490-219">В hello **готовности tooConfigure** щелкните **Настройка** изменение конфигурации toomake hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-219">In hello **Ready tooConfigure** screen, click **Configure** toomake hello configuration change.</span></span>

   ![Включение ConsistencyGuid для существующего развертывания — шаг 5](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="6c490-221">После завершения настройки hello, мастер hello указывает, что этот атрибут msDS-ConsistencyGuid теперь используется как атрибут источника привязки hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-221">Once hello configuration completes, hello wizard indicates that msDS-ConsistencyGuid is now being used as hello Source Anchor attribute.</span></span>

   ![Включение ConsistencyGuid для существующего развертывания — шаг 6](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="6c490-223">Во время анализа hello (этап 4) атрибут hello, настроенных на один или несколько объектов в каталоге hello приветствия мастера завершается hello атрибута используется другим приложением и возвращает сообщение об ошибке, как показано на следующей схеме hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-223">During hello analysis (step 4), if hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by another application and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="6c490-224">Если вы уверены, что этот атрибут hello не используется средством существующих приложений, сведения о как toosuppress hello ошибки необходимо toocontact поддержки.</span><span class="sxs-lookup"><span data-stu-id="6c490-224">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Включение ConsistencyGuid для существующего развертывания — ошибка](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="6c490-226">Влияние на конфигурацию AD FS или федерацию сторонних поставщиков</span><span class="sxs-lookup"><span data-stu-id="6c490-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="6c490-227">Если вы используете Azure AD Connect toomanage локального развертывания AD FS, hello Azure AD Connect автоматически обновляет атрибут hello же AD toouse правила утверждения hello как sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="6c490-227">If you are using Azure AD Connect toomanage on-premises AD FS deployment, hello Azure AD Connect automatically updates hello claim rules toouse hello same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="6c490-228">Это обеспечивает утверждения ImmutableID hello созданные ADFS согласованность с hello sourceAnchor значения экспортированного tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-228">This ensures that hello ImmutableID claim generated by ADFS is consistent with hello sourceAnchor values exported tooAzure AD.</span></span>

<span data-ttu-id="6c490-229">Если вы управляете AD FS за пределами Azure AD Connect или использовании серверов федерации сторонних разработчиков для проверки подлинности, необходимо вручную обновить hello правил утверждений для утверждения toobe соответствуют значения sourceAnchor hello экспортировать tooAzure AD в качестве ImmutableID описано в разделе статьи [изменить AD FS правил для утверждений](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span><span class="sxs-lookup"><span data-stu-id="6c490-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update hello claim rules for ImmutableID claim toobe consistent with hello sourceAnchor values exported tooAzure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="6c490-230">Мастер Hello возвращает hello следующие предупреждения после завершения установки:</span><span class="sxs-lookup"><span data-stu-id="6c490-230">hello wizard returns hello following warning after installation completes:</span></span>

![Настройка сторонней федерации](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-tooexisting-deployment"></a><span data-ttu-id="6c490-232">Добавление нового развертывания tooexisting каталоги</span><span class="sxs-lookup"><span data-stu-id="6c490-232">Adding new directories tooexisting deployment</span></span>
<span data-ttu-id="6c490-233">Предположим, что вы развернули Azure AD Connect с включенной функцией ConsistencyGuid hello, а теперь хотите tooadd развертывания toohello другой каталог.</span><span class="sxs-lookup"><span data-stu-id="6c490-233">Suppose you have deployed Azure AD Connect with hello ConsistencyGuid feature enabled, and now you would like tooadd another directory toohello deployment.</span></span> <span data-ttu-id="6c490-234">При попытке tooadd hello directory мастер Azure AD Connect проверяет состояние hello атрибута mSDS-ConsistencyGuid hello в каталоге hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-234">When you try tooadd hello directory, Azure AD Connect wizard checks hello state of hello mSDS-ConsistencyGuid attribute in hello directory.</span></span> <span data-ttu-id="6c490-235">Атрибут hello, настроенных на один или несколько объектов в каталоге hello, мастер hello заканчивается hello атрибута используется другими приложениями и возвращает сообщение об ошибке, как показано на следующей схеме hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-235">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="6c490-236">Если вы уверены, что этот атрибут hello не используется средством существующих приложений, сведения о как toosuppress hello ошибки необходимо toocontact поддержки.</span><span class="sxs-lookup"><span data-stu-id="6c490-236">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![Добавление нового развертывания tooexisting каталоги](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="6c490-238">Вход в Azure AD</span><span class="sxs-lookup"><span data-stu-id="6c490-238">Azure AD sign-in</span></span>
<span data-ttu-id="6c490-239">При интеграции локальной службы каталогов с Azure AD, является важным toounderstand влияние параметров синхронизации hello hello способом пользователь проходит проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="6c490-239">While integrating your on-premises directory with Azure AD, it is important toounderstand how hello synchronization settings can affect hello way user authenticates.</span></span> <span data-ttu-id="6c490-240">Azure AD использует пользователь hello tooauthenticate userPrincipalName (UPN).</span><span class="sxs-lookup"><span data-stu-id="6c490-240">Azure AD uses userPrincipalName (UPN) tooauthenticate hello user.</span></span> <span data-ttu-id="6c490-241">Однако при синхронизации пользователей, необходимо выбрать аккуратном значений userPrincipalName toobe атрибут hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-241">However, when you synchronize your users, you must choose hello attribute toobe used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-hello-attribute-for-userprincipalname"></a><span data-ttu-id="6c490-242">Выбрав атрибут userPrincipalName hello</span><span class="sxs-lookup"><span data-stu-id="6c490-242">Choosing hello attribute for userPrincipalName</span></span>
<span data-ttu-id="6c490-243">При выборе атрибута hello для предоставления hello значение toobe имя участника-пользователя, используемый в Azure из них следует</span><span class="sxs-lookup"><span data-stu-id="6c490-243">When you are selecting hello attribute for providing hello value of UPN toobe used in Azure one should ensure</span></span>

* <span data-ttu-id="6c490-244">значения атрибутов Hello соответствуют синтаксиса имени участника-пользователя toohello (RFC 822), то есть оно должно иметь формат hellousername@domain</span><span class="sxs-lookup"><span data-stu-id="6c490-244">hello attribute values conform toohello UPN syntax (RFC 822), that is it should be of hello format username@domain</span></span>
* <span data-ttu-id="6c490-245">суффикс Hello в tooone совпадения значений hello объекта hello проверки пользовательских доменов в Azure AD</span><span class="sxs-lookup"><span data-stu-id="6c490-245">hello suffix in hello values matches tooone of hello verified custom domains in Azure AD</span></span>

<span data-ttu-id="6c490-246">В параметрах express hello предполагалось, что выбрана для hello атрибут userPrincipalName.</span><span class="sxs-lookup"><span data-stu-id="6c490-246">In express settings, hello assumed choice for hello attribute is userPrincipalName.</span></span> <span data-ttu-id="6c490-247">Если атрибут userPrincipalName hello не содержит значение hello требуется вашей toosign пользователей в tooAzure, то необходимо выбрать **выборочной установки**.</span><span class="sxs-lookup"><span data-stu-id="6c490-247">If hello userPrincipalName attribute does not contain hello value you want your users toosign in tooAzure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="6c490-248">Состояние и имя участника-пользователя пользовательского домена</span><span class="sxs-lookup"><span data-stu-id="6c490-248">Custom domain state and UPN</span></span>
<span data-ttu-id="6c490-249">Это важные tooensure это проверенного домена для hello суффикса имени участника-пользователя.</span><span class="sxs-lookup"><span data-stu-id="6c490-249">It is important tooensure that there is a verified domain for hello UPN suffix.</span></span>

<span data-ttu-id="6c490-250">Джон (John) является пользователем в contoso.com. Вы хотите Джон toouse hello локального имени участника-пользователя john@contoso.com toosign в tooAzure окончании синхронизированы каталог contoso.onmicrosoft.com. toodo tooyour Azure AD для пользователей таким образом, требуется tooadd и проверка contoso.com как пользовательский домен в Azure AD, прежде чем начать Синхронизация пользователей hello.</span><span class="sxs-lookup"><span data-stu-id="6c490-250">John is a user in contoso.com. You want John toouse hello on-premises UPN john@contoso.com toosign in tooAzure after you have synced users tooyour Azure AD directory contoso.onmicrosoft.com. toodo so, you need tooadd and verify contoso.com as a custom domain in Azure AD before you can start syncing hello users.</span></span> <span data-ttu-id="6c490-251">Если суффикс UPN hello Джон, например contoso.com, не соответствует проверенному домену в Azure AD, Azure AD заменяет суффикс UPN hello с contoso.onmicrosoft.com.</span><span class="sxs-lookup"><span data-stu-id="6c490-251">If hello UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces hello UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="6c490-252">Не поддерживающие маршрутизацию локальные домены и имена участников-пользователей для Azure AD</span><span class="sxs-lookup"><span data-stu-id="6c490-252">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="6c490-253">В некоторых организациях используются домены, не поддерживающие маршрутизацию, например contoso.local, или простые одноуровневые домены наподобие contoso.</span><span class="sxs-lookup"><span data-stu-id="6c490-253">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="6c490-254">Вы не можете tooverify немаршрутизируемый домена в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-254">You are not able tooverify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="6c490-255">Azure AD Connect можно синхронизировать tooonly проверенного домена в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-255">Azure AD Connect can sync tooonly a verified domain in Azure AD.</span></span> <span data-ttu-id="6c490-256">При создании каталога Azure AD служба создает маршрутизируемый домен (например, contoso.onmicrosoft.com), который становится для Azure AD доменом по умолчанию. Таким образом он становится необходимые tooverify других маршрутизируемый домен в этом случае в случае, если вы не хотите домена onmicrosoft.com по умолчанию toohello toosync.</span><span class="sxs-lookup"><span data-stu-id="6c490-256">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com. Therefore, it becomes necessary tooverify any other routable domain in such a scenario in case you don't want toosync toohello default onmicrosoft.com domain.</span></span>

<span data-ttu-id="6c490-257">Чтение [добавить ваш tooAzure имя пользовательского домена Active Directory](../active-directory-add-domain.md) Дополнительные сведения о добавлении и проверка доменов.</span><span class="sxs-lookup"><span data-stu-id="6c490-257">Read [Add your custom domain name tooAzure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="6c490-258">Azure AD Connect определяет, когда используется не поддерживающая маршрутизацию доменная среда и соответствующим образом предупреждает, чтобы вы не продолжали, не изменив стандартные параметры.</span><span class="sxs-lookup"><span data-stu-id="6c490-258">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="6c490-259">При работе в домене, не поддерживающий маршрутизацию, то он, скорее всего, что имена участников-пользователей hello hello имеют слишком немаршрутизируемый суффиксы.</span><span class="sxs-lookup"><span data-stu-id="6c490-259">If you are operating in a non-routable domain, then it is likely that hello UPN of hello users have non-routable suffixes too.</span></span> <span data-ttu-id="6c490-260">Например, если приложение выполняется под contoso.local, Azure AD Connect предложит вы toouse настраиваемые параметры, вместо того чтобы использовать стандартные параметры.</span><span class="sxs-lookup"><span data-stu-id="6c490-260">For example, if you are running under contoso.local, Azure AD Connect suggests you toouse custom settings rather than using express settings.</span></span> <span data-ttu-id="6c490-261">С помощью настраиваемых параметров, все возможности toospecify hello атрибут, который следует использовать в качестве имени участника-пользователя toosign в tooAzure после hello пользователей, синхронизированных tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="6c490-261">Using custom settings, you are able toospecify hello attribute that should be used as UPN toosign in tooAzure after hello users are synced tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="6c490-262">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="6c490-262">Next steps</span></span>
<span data-ttu-id="6c490-263">Узнайте больше об [интеграции локальных удостоверений с Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="6c490-263">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
