---
title: "Синхронизация удостоверений и устойчивость повторяющихся атрибутов | Документация Майкрософт"
description: "Из этой статьи вы узнаете о новом поведении, которое имеет место при обработке объектов, содержащих конфликты имени участника-пользователя или ProxyAddress, во время синхронизации каталогов с Azure AD Connect."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 537a92b7-7a84-4c89-88b0-9bce0eacd931
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: markvi
ms.openlocfilehash: 7a8700e70f64851a0c5e5e8c6b31ec7a6884a96c
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="identity-synchronization-and-duplicate-attribute-resiliency"></a><span data-ttu-id="a4fa7-103">Синхронизация удостоверений и устойчивость повторяющихся атрибутов</span><span class="sxs-lookup"><span data-stu-id="a4fa7-103">Identity synchronization and duplicate attribute resiliency</span></span>
<span data-ttu-id="a4fa7-104">Устойчивость повторяющихся атрибутов — это компонент Azure Active Directory, устраняющий проблемы из-за конфликтов атрибутов **UserPrincipalName** и **ProxyAddress** при запуске средств синхронизации Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-104">Duplicate Attribute Resiliency is a feature in Azure Active Directory that will eliminate friction caused by **UserPrincipalName** and **ProxyAddress** conflicts when running one of Microsoft’s synchronization tools.</span></span>

<span data-ttu-id="a4fa7-105">Эти два атрибута обычно должны быть уникальными для всех объектов **Пользователь**, **Группа** и **Контакт** в заданном клиенте Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-105">These two attributes are generally required to be unique across all **User**, **Group**, or **Contact** objects in a given Azure Active Directory tenant.</span></span>

> [!NOTE]
> <span data-ttu-id="a4fa7-106">Только пользователи могут иметь имена участников-пользователей (UPN).</span><span class="sxs-lookup"><span data-stu-id="a4fa7-106">Only Users can have UPNs.</span></span>
> 
> 

<span data-ttu-id="a4fa7-107">Новое поведение, которое обеспечивает этот компонент, применяется в облачной части конвейера синхронизации. Поэтому оно не зависит от клиента и может применяться к любому продукту корпорации Майкрософт, включая Azure AD Connect, DirSync и MIM + соединитель.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-107">The new behavior that this feature enables is in the cloud portion of the sync pipeline, therefore it is client agnostic and relevant for any Microsoft synchronization product including Azure AD Connect, DirSync and MIM + Connector.</span></span> <span data-ttu-id="a4fa7-108">В этом документе универсальный термин "клиент синхронизации" означает любой из этих продуктов.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-108">The generic term “sync client” is used in this document to represent any one of these products.</span></span>

## <a name="current-behavior"></a><span data-ttu-id="a4fa7-109">Текущее поведение</span><span class="sxs-lookup"><span data-stu-id="a4fa7-109">Current behavior</span></span>
<span data-ttu-id="a4fa7-110">При попытке подготовить новый объект с помощью значения UPN или ProxyAddress, которое нарушает ограничение уникальности, Azure Active Directory блокирует создание этого объекта.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-110">If there is an attempt to provision a new object with a UPN or ProxyAddress value that violates this uniqueness constraint, Azure Active Directory blocks that object from being created.</span></span> <span data-ttu-id="a4fa7-111">Если объект обновляется с помощью неуникальных значений UPN или ProxyAddress, обновление не удается выполнить</span><span class="sxs-lookup"><span data-stu-id="a4fa7-111">Similarly, if an object is updated with a non-unique UPN or ProxyAddress, the update fails.</span></span> <span data-ttu-id="a4fa7-112">Клиент синхронизации повторяет попытку подготовки или обновления после каждого цикла экспорта, но эта попытка завершается сбоем, пока конфликт не устраняется.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-112">The provisioning attempt or update is retried by the sync client upon each export cycle, and continues to fail until the conflict is resolved.</span></span> <span data-ttu-id="a4fa7-113">После каждой попытки клиент синхронизации создает сообщение электронной почты с отчетом об ошибке и регистрирует ошибку в журнале.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-113">An error report email is generated upon each attempt and an error is logged by the sync client.</span></span>

## <a name="behavior-with-duplicate-attribute-resiliency"></a><span data-ttu-id="a4fa7-114">Поведение с устойчивостью повторяющихся атрибутов</span><span class="sxs-lookup"><span data-stu-id="a4fa7-114">Behavior with Duplicate Attribute Resiliency</span></span>
<span data-ttu-id="a4fa7-115">Azure Active Directory не завершает сбоем подготовку или обновление объекта с повторяющимся атрибутом. Вместо этого Azure Active Directory "помещает на карантин" повторяющийся атрибут, который нарушает ограничение уникальности.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-115">Instead of completely failing to provision or update an object with a duplicate attribute, Azure Active Directory “quarantines” the duplicate attribute which would violate the uniqueness constraint.</span></span> <span data-ttu-id="a4fa7-116">Если этот атрибут необходим для подготовки, как, например UserPrincipalName, служба назначает значение заполнителя.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-116">If this attribute is required for provisioning, like UserPrincipalName, the service assigns a placeholder value.</span></span> <span data-ttu-id="a4fa7-117">Формат этих временных значений следующий:</span><span class="sxs-lookup"><span data-stu-id="a4fa7-117">The format of these temporary values is</span></span>  
<span data-ttu-id="a4fa7-118">“***<OriginalPrefix>+<четырехзначное_число>@<InitialTenantDomain>.onmicrosoft.com***”.</четырехзначное_число>></span><span class="sxs-lookup"><span data-stu-id="a4fa7-118">“***<OriginalPrefix>+<4DigitNumber>@<InitialTenantDomain>.onmicrosoft.com***”.</span></span>  
<span data-ttu-id="a4fa7-119">Если атрибут не обязателен (например, **ProxyAddress**), то Azure Active Directory просто помещает конфликтующий атрибут в карантин и приступает к созданию или обновлению объекта.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-119">If the attribute is not required, like a  **ProxyAddress**, Azure Active Directory simply quarantines the conflict attribute and proceeds with the object creation or update.</span></span>

<span data-ttu-id="a4fa7-120">После помещения атрибута на карантин сведения о конфликте отправляются в том же сообщении электронной почты с отчетом об ошибке, которое использовалось в старом поведении.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-120">Upon quarantining the attribute, information about the conflict is sent in the same error report email used in the old behavior.</span></span> <span data-ttu-id="a4fa7-121">Но эта информация отображается в отчете об ошибке только один раз, когда атрибут помещается на карантин. Она не записывается в будущие сообщения электронной почты.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-121">However, this info only appears in the error report one time, when the quarantine happens, it does not continue to be logged in future emails.</span></span> <span data-ttu-id="a4fa7-122">Кроме того, так как данный объект успешно экспортирован, клиент синхронизации не регистрирует ошибку и не повторяет операцию создания или обновления после следующих циклов синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-122">Also, since the export for this object has succeeded, the sync client does not log an error and does not retry the create / update operation upon subsequent sync cycles.</span></span>

<span data-ttu-id="a4fa7-123">Для поддержки этого поведения в классы объектов "Пользователь", "Группа" и "Контакт" добавлен новый атрибут — </span><span class="sxs-lookup"><span data-stu-id="a4fa7-123">To support this behavior a new attribute has been added to the User, Group, and Contact object classes:</span></span>  
<span data-ttu-id="a4fa7-124">**DirSyncProvisioningErrors**</span><span class="sxs-lookup"><span data-stu-id="a4fa7-124">**DirSyncProvisioningErrors**</span></span>

<span data-ttu-id="a4fa7-125">Это многозначный атрибут, используемый для хранения конфликтующих атрибутов, которые нарушают ограничение уникальности, если добавляются как обычно.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-125">This is a multi-valued attribute that is used to store the conflicting attributes that would violate the uniqueness constraint should they be added normally.</span></span> <span data-ttu-id="a4fa7-126">В Azure Active Directory включена фоновая задача таймера, которая запускается каждый час. Эта задача ищет разрешенные конфликты повторяющихся атрибутов и автоматически удаляет такие атрибуты из карантина.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-126">A background timer task has been enabled in Azure Active Directory that  runs every hour to look for duplicate attribute conflicts that have been resolved, and automatically removes the attributes in question from quarantine.</span></span>

### <a name="enabling-duplicate-attribute-resiliency"></a><span data-ttu-id="a4fa7-127">Включение устойчивости повторяющихся атрибутов</span><span class="sxs-lookup"><span data-stu-id="a4fa7-127">Enabling Duplicate Attribute Resiliency</span></span>
<span data-ttu-id="a4fa7-128">Устойчивость повторяющихся атрибутов будет новым режимом по умолчанию для всем клиентов Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-128">Duplicate Attribute Resiliency will be the new default behavior across all Azure Active Directory tenants.</span></span> <span data-ttu-id="a4fa7-129">Этот режим будет включен по умолчанию для всех клиентов, для которых синхронизация была включена впервые 22 августа 2016 года или позже.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-129">It will be on by default for all tenants that enabled synchronization for the first time on August 22nd, 2016 or later.</span></span> <span data-ttu-id="a4fa7-130">Клиенты, для которых синхронизация была включена до этой даты, смогут включить данный режим с помощью выпускаемых пакетов.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-130">Tenants that enabled sync prior to this date will have the feature enabled in batches.</span></span> <span data-ttu-id="a4fa7-131">Выпуск начнется в сентябре 2016 года, и каждое контактное лицо по техническим вопросам клиента получит уведомление по электронной почте, в котором будет указана дата, когда эта функция будет включена.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-131">This rollout will begin in September 2016, and an email notification will be sent to each tenant's technical notification contact with the specific date when the feature will be enabled.</span></span>

> [!NOTE]
> <span data-ttu-id="a4fa7-132">После включения режим устойчивости повторяющихся атрибутов невозможно отключить.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-132">Once Duplicate Attribute Resiliency has been turned on it cannot be disabled.</span></span>

<span data-ttu-id="a4fa7-133">Чтобы проверить, включена ли эта функция для вашего клиента, можно скачать последнюю версию модуля PowerShell для Azure Active Directory и выполнив следующие командлеты.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-133">To check if the feature is enabled for your tenant, you can do so by downloading the latest version of the Azure Active Directory PowerShell module and running:</span></span>

`Get-MsolDirSyncFeatures -Feature DuplicateUPNResiliency`

`Get-MsolDirSyncFeatures -Feature DuplicateProxyAddressResiliency`

> [!NOTE]
> <span data-ttu-id="a4fa7-134">С помощью командлета Set-MsolDirSyncFeature больше нельзя упреждающе включать функцию "Устойчивость повторяющихся атрибутов", прежде чем она будет включена для вашего клиента.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-134">You can no longer use Set-MsolDirSyncFeature cmdlet to proactively enable the Duplicate Attribute Resiliency feature before it is turned on for your tenant.</span></span> <span data-ttu-id="a4fa7-135">Чтобы протестировать эту функцию, необходимо создать клиент Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-135">To be able to test the feature, you will need to create a new Azure Active Directory tenant.</span></span>

## <a name="identifying-objects-with-dirsyncprovisioningerrors"></a><span data-ttu-id="a4fa7-136">Идентификация объектов с DirSyncProvisioningErrors</span><span class="sxs-lookup"><span data-stu-id="a4fa7-136">Identifying Objects with DirSyncProvisioningErrors</span></span>
<span data-ttu-id="a4fa7-137">Объекты с ошибками, возникшими из-за конфликтов повторяющихся свойств, можно определить двумя методами: с помощью Azure Active Directory PowerShell и портала администрирования Office 365.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-137">There are currently two methods to identify objects that have these errors due to duplicate property conflicts, Azure Active Directory PowerShell and the Office 365 Admin Portal.</span></span> <span data-ttu-id="a4fa7-138">В будущем планируется добавить к этим средствам создание отчетов на портале.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-138">There are plans to extend to additional portal based reporting in the future.</span></span>

### <a name="azure-active-directory-powershell"></a><span data-ttu-id="a4fa7-139">PowerShell Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a4fa7-139">Azure Active Directory PowerShell</span></span>
<span data-ttu-id="a4fa7-140">Для командлетов PowerShell, упомянутых в этой статье, верны следующие утверждения:</span><span class="sxs-lookup"><span data-stu-id="a4fa7-140">For the PowerShell cmdlets in this topic, the following is true:</span></span>

* <span data-ttu-id="a4fa7-141">все командлеты вводятся с учетом регистра;</span><span class="sxs-lookup"><span data-stu-id="a4fa7-141">All of the following cmdlets are case sensitive.</span></span>
* <span data-ttu-id="a4fa7-142">Необходимо всегда указывать флаг **-ErrorCategory PropertyConflict** .</span><span class="sxs-lookup"><span data-stu-id="a4fa7-142">The **–ErrorCategory PropertyConflict** must always be included.</span></span> <span data-ttu-id="a4fa7-143">Других типов **ErrorCategory**сейчас нет, но они могут быть добавлены в будущем.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-143">There are currently no other types of **ErrorCategory**, but this may be extended in the future.</span></span>

<span data-ttu-id="a4fa7-144">Для начала выполните командлет **Connect-MsolService** и введите учетные данные администратора клиента.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-144">First, get started by running **Connect-MsolService** and entering credentials for a tenant administrator.</span></span>

<span data-ttu-id="a4fa7-145">Затем используйте следующие командлеты и операторы для просмотра ошибок разными способами.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-145">Then, use the following cmdlets and operators to view errors in different ways:</span></span>

1. [<span data-ttu-id="a4fa7-146">Смотреть все</span><span class="sxs-lookup"><span data-stu-id="a4fa7-146">See All</span></span>](#see-all)
2. [<span data-ttu-id="a4fa7-147">По типу свойства.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-147">By Property Type</span></span>](#by-property-type)
3. [<span data-ttu-id="a4fa7-148">По конфликтующему значению.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-148">By Conflicting Value</span></span>](#by-conflicting-value)
4. [<span data-ttu-id="a4fa7-149">С помощью поиска по строкам.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-149">Using a String Search</span></span>](#using-a-string-search)
5. [<span data-ttu-id="a4fa7-150">Сортированные.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-150">Sorted</span></span>](#sorted)
6. [<span data-ttu-id="a4fa7-151">В ограниченном количестве или все.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-151">In a Limited Quantity or All</span></span>](#in-a-limited-quantity-or-all)

#### <a name="see-all"></a><span data-ttu-id="a4fa7-152">Смотреть все</span><span class="sxs-lookup"><span data-stu-id="a4fa7-152">See all</span></span>
<span data-ttu-id="a4fa7-153">Чтобы просмотреть общий список ошибок подготовки атрибутов в клиенте, после подключения запустите следующий командлет.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-153">Once connected, to see a general list of attribute provisioning errors in the tenant run:</span></span>

`Get-MsolDirSyncProvisioningError -ErrorCategory PropertyConflict`

<span data-ttu-id="a4fa7-154">Вы получите результат, похожий на приведенный ниже.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-154">This produces a result like the following:</span></span>  
 <span data-ttu-id="a4fa7-155">![Get-MsolDirSyncProvisioningError](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/1.png "Get MsolDirSyncProvisioningError")</span><span class="sxs-lookup"><span data-stu-id="a4fa7-155">![Get-MsolDirSyncProvisioningError](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/1.png "Get-MsolDirSyncProvisioningError")</span></span>  

#### <a name="by-property-type"></a><span data-ttu-id="a4fa7-156">По типу свойства.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-156">By property type</span></span>
<span data-ttu-id="a4fa7-157">Чтобы просмотреть ошибки по типу свойства, добавьте флаг **-PropertyName** с аргументом **UserPrincipalName** или **ProxyAddresses**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-157">To see errors by property type, add the **-PropertyName** flag with the **UserPrincipalName** or **ProxyAddresses** argument:</span></span>

`Get-MsolDirSyncProvisioningError -ErrorCategory PropertyConflict -PropertyName UserPrincipalName`

<span data-ttu-id="a4fa7-158">Или</span><span class="sxs-lookup"><span data-stu-id="a4fa7-158">Or</span></span>

`Get-MsolDirSyncProvisioningError -ErrorCategory PropertyConflict -PropertyName ProxyAddresses`

#### <a name="by-conflicting-value"></a><span data-ttu-id="a4fa7-159">По конфликтующему значению.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-159">By conflicting value</span></span>
<span data-ttu-id="a4fa7-160">Чтобы просмотреть ошибки, относящиеся к конкретному свойству, добавьте флаг **-PropertyValue** (при добавлении этого флага следует использовать также атрибут **-PropertyName**).</span><span class="sxs-lookup"><span data-stu-id="a4fa7-160">To see errors relating to a specific property add the **-PropertyValue** flag (**-PropertyName** must be used as well when adding this flag):</span></span>

`Get-MsolDirSyncProvisioningError -ErrorCategory PropertyConflict -PropertyValue User@domain.com -PropertyName UserPrincipalName`

#### <a name="using-a-string-search"></a><span data-ttu-id="a4fa7-161">С помощью поиска по строкам.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-161">Using a string search</span></span>
<span data-ttu-id="a4fa7-162">Чтобы выполнить поиск по всем строкам, добавьте флаг **-SearchString** .</span><span class="sxs-lookup"><span data-stu-id="a4fa7-162">To do a broad string search use the **-SearchString** flag.</span></span> <span data-ttu-id="a4fa7-163">Этот флаг можно использовать отдельно от всех флагов, упомянутых выше, за исключением флага **-ErrorCategory PropertyConflict**, который необходимо использовать всегда.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-163">This can be used independently from all of the above flags, with the exception of **-ErrorCategory PropertyConflict**, which is always required:</span></span>

`Get-MsolDirSyncProvisioningError -ErrorCategory PropertyConflict -SearchString User`

#### <a name="in-a-limited-quantity-or-all"></a><span data-ttu-id="a4fa7-164">В ограниченном количестве или все.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-164">In a limited quantity or all</span></span>
1. <span data-ttu-id="a4fa7-165">Чтобы ограничить запрос определенным количеством значений, используйте флаг **MaxResults <Int>**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-165">**MaxResults <Int>** can be used to limit the query to a specific number of values.</span></span>
2. <span data-ttu-id="a4fa7-166">**All** гарантирует получение всех результатов в случае большого количества ошибок.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-166">**All** can be used to ensure all results are retrieved in the case that a large number of errors exists.</span></span>

`Get-MsolDirSyncProvisioningError -ErrorCategory PropertyConflict -MaxResults 5`

## <a name="office-365-admin-portal"></a><span data-ttu-id="a4fa7-167">Портал администрирования Office 365</span><span class="sxs-lookup"><span data-stu-id="a4fa7-167">Office 365 admin portal</span></span>
<span data-ttu-id="a4fa7-168">Ошибки синхронизации каталогов можно просмотреть в центре администрирования Office 365.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-168">You can view directory synchronization errors in the Office 365 admin center.</span></span> <span data-ttu-id="a4fa7-169">В отчете на портале Office 365 отображаются только объекты **Пользователь** , содержащие такие ошибки.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-169">The report in the Office 365 portal only displays **User** objects that have these errors.</span></span> <span data-ttu-id="a4fa7-170">Этот отчет не содержит сведений о конфликтах между такими объектами, как **Группы** и **Контакты**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-170">It does not show info about conflicts between **Groups** and **Contacts**.</span></span>

<span data-ttu-id="a4fa7-171">![Активные пользователи](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/1234.png "Активные пользователи")</span><span class="sxs-lookup"><span data-stu-id="a4fa7-171">![Active Users](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/1234.png "Active Users")</span></span>

<span data-ttu-id="a4fa7-172">Инструкции о том, как просмотреть ошибки синхронизации каталогов в центре администрирования Office 365, см. в статье [Определение ошибок синхронизации службы каталогов в Office 365](https://support.office.com/en-us/article/Identify-directory-synchronization-errors-in-Office-365-b4fc07a5-97ea-4ca6-9692-108acab74067).</span><span class="sxs-lookup"><span data-stu-id="a4fa7-172">For instructions on how to view directory synchronization errors in the Office 365 admin center, see [Identify directory synchronization errors in Office 365](https://support.office.com/en-us/article/Identify-directory-synchronization-errors-in-Office-365-b4fc07a5-97ea-4ca6-9692-108acab74067).</span></span>

### <a name="identity-synchronization-error-report"></a><span data-ttu-id="a4fa7-173">Отчет об ошибках синхронизации удостоверений</span><span class="sxs-lookup"><span data-stu-id="a4fa7-173">Identity synchronization error report</span></span>
<span data-ttu-id="a4fa7-174">Когда объект с конфликтом повторяющихся атрибутов обрабатывается с помощью нового поведения, в электронное письмо, содержащее стандартный отчет об ошибках синхронизации удостоверений, добавляется уведомление. Это письмо отправляется контакту клиента, предназначенному для технических уведомлений.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-174">When an object with a duplicate attribute conflict is handled with this new behavior a notification is included in the standard Identity Synchronization Error Report email that is sent to the Technical Notification contact for the tenant.</span></span> <span data-ttu-id="a4fa7-175">Но в этом поведении есть важные изменения.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-175">However, there is an important change in this behavior.</span></span> <span data-ttu-id="a4fa7-176">Раньше сведения о конфликте повторяющихся атрибутов включались в каждый отчет об ошибках до тех пор, пока конфликт не разрешался.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-176">In the past, information about a duplicate attribute conflict would be included in every subsequent error report until the conflict was resolved.</span></span> <span data-ttu-id="a4fa7-177">После включения нового поведения уведомление об ошибке, связанное с тем или иным конфликтом, отображается только один раз: когда конфликтующий атрибут помещается на карантин.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-177">With this new behavior, the error notification for a given conflict does only appear once- at the time the conflicting attribute is quarantined.</span></span>

<span data-ttu-id="a4fa7-178">Вот как выглядит уведомление электронной почты о конфликте ProxyAddress: </span><span class="sxs-lookup"><span data-stu-id="a4fa7-178">Here is an example of what the email notification looks like for a ProxyAddress conflict:</span></span>  
    <span data-ttu-id="a4fa7-179">![Активные пользователи](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/6.png "Активные пользователи")</span><span class="sxs-lookup"><span data-stu-id="a4fa7-179">![Active Users](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/6.png "Active Users")</span></span>  

## <a name="resolving-conflicts"></a><span data-ttu-id="a4fa7-180">Разрешение конфликтов</span><span class="sxs-lookup"><span data-stu-id="a4fa7-180">Resolving conflicts</span></span>
<span data-ttu-id="a4fa7-181">Стратегия устранения неполадок и методика разрешения этих ошибок не должны отличаться от того, как ошибки повторяющихся атрибутов обрабатывались раньше.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-181">Troubleshooting strategy and resolution tactics for these errors should not differ from the way duplicate attribute errors were handled in the past.</span></span> <span data-ttu-id="a4fa7-182">Единственное различие заключается в том, что задача таймера переходит через клиент на стороне службы и автоматически добавляет спорный атрибут в правильный объект после разрешения конфликта.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-182">The only difference is that the timer task sweeps through the tenant on the service-side to automatically add the attribute in question to the proper object once the conflict is resolved.</span></span>

<span data-ttu-id="a4fa7-183">Различные стратегии устранения неполадок и разрешения конфликтов описаны в статье [Duplicate or invalid attributes prevent directory synchronization in Office 365](https://support.microsoft.com/kb/2647098)(Повторяющиеся или недопустимые атрибуты препятствуют синхронизации каталогов в Office 365).</span><span class="sxs-lookup"><span data-stu-id="a4fa7-183">The following article outlines various troubleshooting and resolution strategies: [Duplicate or invalid attributes prevent directory synchronization in Office 365](https://support.microsoft.com/kb/2647098).</span></span>

## <a name="known-issues"></a><span data-ttu-id="a4fa7-184">Известные проблемы</span><span class="sxs-lookup"><span data-stu-id="a4fa7-184">Known issues</span></span>
<span data-ttu-id="a4fa7-185">Ни одна из известных проблем не приводит к потере данных или снижению производительности службы.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-185">None of these known issues causes data loss or service degradation.</span></span> <span data-ttu-id="a4fa7-186">Некоторые из них касаются внешнего вида, другие приводят к стандартным ошибкам повторяющихся атрибутов, *которые возникали до включения режима устойчивости* (эти ошибки отображаются вместо помещения в карантин конфликтующих атрибутов). Некоторые проблемы вызывают определенные ошибки, которые требуется дополнительно устранять вручную.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-186">Several of them are aesthetic, others cause standard “*pre-resiliency*” duplicate attribute errors to be thrown instead of quarantining the conflict attribute, and another causes certain errors to require extra manual fix-up.</span></span>

<span data-ttu-id="a4fa7-187">**Основное поведение**</span><span class="sxs-lookup"><span data-stu-id="a4fa7-187">**Core behavior:**</span></span>

1. <span data-ttu-id="a4fa7-188">Объекты с определенными конфигурациями атрибутов по-прежнему вызывают ошибки экспорта вместо помещения в карантин повторяющихся атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-188">Objects with specific attribute configurations continue to receive export errors as opposed to the duplicate attribute(s) being quarantined.</span></span>  
   <span data-ttu-id="a4fa7-189">Например:</span><span class="sxs-lookup"><span data-stu-id="a4fa7-189">For example:</span></span>
   
    <span data-ttu-id="a4fa7-190">а.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-190">a.</span></span> <span data-ttu-id="a4fa7-191">В Active Directory создается новый пользователь со следующими свойствами: имя участника-пользователя (UPN) — **Joe@contoso.com**, ProxyAddress — **smtp:Joe@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-191">New user is created in AD with a UPN of **Joe@contoso.com** and ProxyAddress **smtp:Joe@contoso.com**</span></span>
   
    <span data-ttu-id="a4fa7-192">b.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-192">b.</span></span> <span data-ttu-id="a4fa7-193">Свойства этого объекта конфликтуют с существующей группой, имеющей свойство ProxyAddress со значением **SMTP:Joe@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-193">The properties of this object conflict with an existing Group, where ProxyAddress is **SMTP:Joe@contoso.com**.</span></span>
   
    <span data-ttu-id="a4fa7-194">В.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-194">c.</span></span> <span data-ttu-id="a4fa7-195">После экспорта отображается ошибка о **конфликте ProxyAddress** , при этом конфликтующие атрибуты не помещаются на карантин.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-195">Upon export, a **ProxyAddress conflict** error is thrown instead of having the conflict attributes quarantined.</span></span> <span data-ttu-id="a4fa7-196">Операция повторяется после каждого цикла синхронизации, как это и происходило до включения компонента устойчивости.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-196">The operation is retried upon each subsequent sync cycle, as it would have been before the resiliency feature was enabled.</span></span>
2. <span data-ttu-id="a4fa7-197">Если локально создаются две группы с одним и тем же адресом SMTP, то одну группу не удается подготовить с первой попытки из-за стандартной ошибки повторяющихся значений **ProxyAddress** .</span><span class="sxs-lookup"><span data-stu-id="a4fa7-197">If two Groups are created on-premises with the same SMTP address, one fails to provision on the first attempt with a standard duplicate **ProxyAddress** error.</span></span> <span data-ttu-id="a4fa7-198">Но на следующем цикле синхронизации повторяющиеся значения будут правильно помещены на карантин.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-198">However, the duplicate value is properly quarantined upon the next sync cycle.</span></span>

<span data-ttu-id="a4fa7-199">**Отчет на портале Office**</span><span class="sxs-lookup"><span data-stu-id="a4fa7-199">**Office Portal Report**:</span></span>

1. <span data-ttu-id="a4fa7-200">Подробное сообщение об ошибке для двух объектов в конфликте, связанном с именем UPN, содержит одинаковые сведения.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-200">The detailed error message for two objects in a UPN conflict set is the same.</span></span> <span data-ttu-id="a4fa7-201">Это означает, что свойство UPN обоих объектов изменено или помещено на карантин, но на самом деле данные изменились только в одном объекте.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-201">This indicates that they have both had their UPN changed / quarantined, when in fact only a one of them had any data changed.</span></span>
2. <span data-ttu-id="a4fa7-202">Подробное сообщение об ошибке, связанное с конфликтом UPN, показывает неправильное свойство displayName пользователя, имя UPN которого изменено или помещено на карантин.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-202">The detailed error message for a UPN conflict shows the wrong displayName for a user who has had their UPN changed/quarantined.</span></span> <span data-ttu-id="a4fa7-203">Например:</span><span class="sxs-lookup"><span data-stu-id="a4fa7-203">For example:</span></span>
   
    <span data-ttu-id="a4fa7-204">а.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-204">a.</span></span> <span data-ttu-id="a4fa7-205">Сначала синхронизируется **пользователь A** с именем участника-пользователя **User@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-205">**User A** syncs up first with **UPN = User@contoso.com**.</span></span>
   
    <span data-ttu-id="a4fa7-206">b.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-206">b.</span></span> <span data-ttu-id="a4fa7-207">Затем выполняется попытка синхронизировать **пользователя B** с именем участника-пользователя **User@contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-207">**User B** is attempted to be synced up next with **UPN = User@contoso.com**.</span></span>
   
    <span data-ttu-id="a4fa7-208">В.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-208">c.</span></span> <span data-ttu-id="a4fa7-209">Имя участника-пользователя **B** изменяется на **User1234@contoso.onmicrosoft.com**, а **User@contoso.com** добавляется в список **DirSyncProvisioningErrors**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-209">**User B’s** UPN is changed to **User1234@contoso.onmicrosoft.com** and **User@contoso.com** is added to **DirSyncProvisioningErrors**.</span></span>
   
    <span data-ttu-id="a4fa7-210">d.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-210">d.</span></span> <span data-ttu-id="a4fa7-211">Сообщение об ошибке для **пользователя B** должно содержать информацию о том, что **пользователь A** уже использует **User@contoso.com** в качестве имени участника-пользователя, но вместо этого в нем содержится собственное отображаемое имя (свойство displayName) **пользователя B**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-211">The error message for **User B** should indicate that **User A** already has **User@contoso.com** as a UPN, but it shows **User B’s** own displayName.</span></span>

<span data-ttu-id="a4fa7-212">**Отчет об ошибках синхронизации удостоверений**.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-212">**Identity synchronization error report**:</span></span>

<span data-ttu-id="a4fa7-213">Ссылка на *указания по устранению этой проблемы* неправильная.</span><span class="sxs-lookup"><span data-stu-id="a4fa7-213">The link for *steps on how to resolve this issue* is incorrect:</span></span>  
    <span data-ttu-id="a4fa7-214">![Активные пользователи](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/6.png "Активные пользователи")</span><span class="sxs-lookup"><span data-stu-id="a4fa7-214">![Active Users](./media/active-directory-aadconnectsyncservice-duplicate-attribute-resiliency/6.png "Active Users")</span></span>  

<span data-ttu-id="a4fa7-215">Она должна указывать на [https://aka.ms/duplicateattributeresiliency](https://aka.ms/duplicateattributeresiliency).</span><span class="sxs-lookup"><span data-stu-id="a4fa7-215">It should point to [https://aka.ms/duplicateattributeresiliency](https://aka.ms/duplicateattributeresiliency).</span></span>

## <a name="see-also"></a><span data-ttu-id="a4fa7-216">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="a4fa7-216">See also</span></span>
* [<span data-ttu-id="a4fa7-217">Службы синхронизации Azure AD Connect</span><span class="sxs-lookup"><span data-stu-id="a4fa7-217">Azure AD Connect sync</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="a4fa7-218">Интеграция локальных удостоверений с Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a4fa7-218">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
* [<span data-ttu-id="a4fa7-219">Определение ошибок синхронизации службы каталогов в Office 365</span><span class="sxs-lookup"><span data-stu-id="a4fa7-219">Identify directory synchronization errors in Office 365</span></span>](https://support.office.com/en-us/article/Identify-directory-synchronization-errors-in-Office-365-b4fc07a5-97ea-4ca6-9692-108acab74067)

