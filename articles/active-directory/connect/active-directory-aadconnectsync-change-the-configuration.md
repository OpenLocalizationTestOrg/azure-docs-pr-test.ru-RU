---
title: "Синхронизация Azure AD Connect: изменение конфигурации | Документация Майкрософт"
description: "Узнайте, как изменить конфигурацию службы синхронизации Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 7b9df836-e8a5-4228-97da-2faec9238b31
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: 63a7ae9d39e1a74294637172efd607ee41b2d69b
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-how-to-make-a-change-to-the-default-configuration"></a><span data-ttu-id="a94f6-103">Службы синхронизации Azure AD Connect: изменение конфигурации по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a94f6-103">Azure AD Connect sync: How to make a change to the default configuration</span></span>
<span data-ttu-id="a94f6-104">В этой статье предоставлены сведения об изменении конфигурации по умолчанию в службах синхронизации Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a94f6-104">The purpose of this topic is to walk you through how to make changes to the default configuration in Azure AD Connect sync.</span></span> <span data-ttu-id="a94f6-105">Здесь также описываются действия для некоторых стандартных сценариев.</span><span class="sxs-lookup"><span data-stu-id="a94f6-105">It provides steps for some common scenarios.</span></span> <span data-ttu-id="a94f6-106">Ознакомившись с этими сведениями, вы сможете вносить изменения в конфигурацию в соответствии с собственными бизнес-правилами.</span><span class="sxs-lookup"><span data-stu-id="a94f6-106">With this knowledge, you should be able to make some simple changes to your own configuration based on your own business rules.</span></span>

## <a name="synchronization-rules-editor"></a><span data-ttu-id="a94f6-107">Редактор правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="a94f6-107">Synchronization Rules Editor</span></span>
<span data-ttu-id="a94f6-108">Редактор правил синхронизации используется для просмотра и изменения конфигурации по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a94f6-108">The Synchronization Rules Editor is used to see and change the default configuration.</span></span> <span data-ttu-id="a94f6-109">Его можно найти в меню "Пуск" в группе **Azure AD Connect** .</span><span class="sxs-lookup"><span data-stu-id="a94f6-109">You can find it in the Start Menu under the **Azure AD Connect** group.</span></span>  
<span data-ttu-id="a94f6-110">![Редактор правил синхронизации в меню "Пуск"](./media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-110">![Start Menu with Sync Rule Editor](./media/active-directory-aadconnectsync-change-the-configuration/startmenu2.png)</span></span>

<span data-ttu-id="a94f6-111">При открытии в нем отображаются стандартные правила по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="a94f6-111">When you open it, you see the default out-of-box rules.</span></span>

![Редактор правил синхронизации](./media/active-directory-aadconnectsync-change-the-configuration/sre2.png)

### <a name="navigating-in-the-editor"></a><span data-ttu-id="a94f6-113">Перемещение в редакторе</span><span class="sxs-lookup"><span data-stu-id="a94f6-113">Navigating in the editor</span></span>
<span data-ttu-id="a94f6-114">Чтобы быстро найти определенное правило, можно воспользоваться раскрывающимися списками, расположенными в верхней части редактора.</span><span class="sxs-lookup"><span data-stu-id="a94f6-114">The drop-downs at the top of the editor allow you to quickly find a particular rule.</span></span> <span data-ttu-id="a94f6-115">Например, чтобы просмотреть правила, содержащие атрибут proxyAddresses, необходимо выбрать в раскрывающихся списках следующее: </span><span class="sxs-lookup"><span data-stu-id="a94f6-115">For example, if you want to see the rules where the attribute proxyAddresses is included, you would change the drop-downs to the following:</span></span>  
<span data-ttu-id="a94f6-116">![Фильтрация в редакторе правил синхронизации](./media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-116">![SRE filtering](./media/active-directory-aadconnectsync-change-the-configuration/filtering.png)</span></span>  
<span data-ttu-id="a94f6-117">Чтобы сбросить параметры фильтрации и загрузить новую конфигурацию, нажмите клавишу **F5** .</span><span class="sxs-lookup"><span data-stu-id="a94f6-117">To reset filtering and load a fresh configuration, press **F5** on the keyboard.</span></span>

<span data-ttu-id="a94f6-118">В верхнем правом углу расположена кнопка **Добавить новое правило**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-118">To the top right, you have a button **Add new rule**.</span></span> <span data-ttu-id="a94f6-119">Она используется для создания собственного настраиваемого правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-119">This button is used to create your own custom rule.</span></span>

<span data-ttu-id="a94f6-120">Внизу находятся кнопки, позволяющие выполнять определенные действия с выбранным правилом синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-120">At the bottom, you have buttons for acting on a selected sync rule.</span></span> <span data-ttu-id="a94f6-121">Кнопки **Изменить** и **Удалить** используются для удаления и изменения правил.</span><span class="sxs-lookup"><span data-stu-id="a94f6-121">**Edit** and **Delete** do what you expect them to.</span></span> <span data-ttu-id="a94f6-122">**Экспортировать** позволяет создать сценарий PowerShell для повторного создания правила синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-122">**Export** produces a PowerShell script for recreating the sync rule.</span></span> <span data-ttu-id="a94f6-123">При этом правило синхронизации перемещается с одного сервера на другой.</span><span class="sxs-lookup"><span data-stu-id="a94f6-123">This procedure allows you to move a sync rule from one server to another.</span></span>

## <a name="create-your-first-custom-rule"></a><span data-ttu-id="a94f6-124">Создание настраиваемого правила</span><span class="sxs-lookup"><span data-stu-id="a94f6-124">Create your first custom rule</span></span>
<span data-ttu-id="a94f6-125">Чаще всего изменяются потоки атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-125">The most common change is changes to the attribute flows.</span></span> <span data-ttu-id="a94f6-126">Данные в исходном каталоге могут отображаться не так, как в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-126">The data in your source directory might not be as in Azure AD.</span></span> <span data-ttu-id="a94f6-127">В примере, рассматриваемом в этом разделе, необходимо убедиться, что имя пользователя всегда задано в **правильном регистре**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-127">In the example in this section, you want to make sure the given name of a user is always in **Proper case**.</span></span>

### <a name="disable-the-scheduler"></a><span data-ttu-id="a94f6-128">Отключение планировщика</span><span class="sxs-lookup"><span data-stu-id="a94f6-128">Disable the scheduler</span></span>
<span data-ttu-id="a94f6-129">По умолчанию [планировщик](active-directory-aadconnectsync-feature-scheduler.md) запускается каждые 30 минут.</span><span class="sxs-lookup"><span data-stu-id="a94f6-129">The [scheduler](active-directory-aadconnectsync-feature-scheduler.md) runs every 30 minutes by default.</span></span> <span data-ttu-id="a94f6-130">В некоторых случаях, чтобы внести изменения и устранить неполадки, связанные с новыми правилами, может потребоваться отключить его.</span><span class="sxs-lookup"><span data-stu-id="a94f6-130">You want to make sure it is not starting while you are making changes and troubleshoot your new rules.</span></span> <span data-ttu-id="a94f6-131">Чтобы временно отключить планировщик, запустите PowerShell и выполните команду `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="a94f6-131">To temporarily disable the scheduler, start PowerShell, and run `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

![Отключение планировщика](./media/active-directory-aadconnectsync-change-the-configuration/schedulerdisable.png)  

### <a name="create-the-rule"></a><span data-ttu-id="a94f6-133">Создание правила</span><span class="sxs-lookup"><span data-stu-id="a94f6-133">Create the rule</span></span>
1. <span data-ttu-id="a94f6-134">Щелкните **Добавить новое правило**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-134">Click **Add new rule**.</span></span>
2. <span data-ttu-id="a94f6-135">На странице **Описание** заполните следующие поля.</span><span class="sxs-lookup"><span data-stu-id="a94f6-135">On the **Description** page enter the following:</span></span>  
   <span data-ttu-id="a94f6-136">![Фильтрация входящего правила синхронизации](./media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-136">![Inbound rule filtering](./media/active-directory-aadconnectsync-change-the-configuration/description2.png)</span></span>  
   * <span data-ttu-id="a94f6-137">"Имя". Введите описательное имя правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-137">Name: Give the rule a descriptive name.</span></span>
   * <span data-ttu-id="a94f6-138">"Описание". Информация, позволяющая другим пользователям определить предназначение правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-138">Description: Some clarification so someone else can understand what the rule is for.</span></span>
   * <span data-ttu-id="a94f6-139">Connected system (Подключенная система). Система, в которой находится объект.</span><span class="sxs-lookup"><span data-stu-id="a94f6-139">Connected system: The system the object can be found in.</span></span> <span data-ttu-id="a94f6-140">В этом случае выберите соединитель Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a94f6-140">In this case, select the Active Directory Connector.</span></span>
   * <span data-ttu-id="a94f6-141">Connected System Type (Тип подключенной системы) и Metaverse Object Type (Тип объекта метавселенной). Выберите **Пользователь** и **Человек** соответственно.</span><span class="sxs-lookup"><span data-stu-id="a94f6-141">Connected System/Metaverse Object Type: Select **User** and **Person** respectively.</span></span>
   * <span data-ttu-id="a94f6-142">"Тип связи". Задайте для этого параметра значение **Присоединение**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-142">Link Type: Change this value to **Join**.</span></span>
   * <span data-ttu-id="a94f6-143">"Приоритет". Укажите уникальное в системе значение.</span><span class="sxs-lookup"><span data-stu-id="a94f6-143">Precedence: Provide a value that is unique in the system.</span></span> <span data-ttu-id="a94f6-144">Более низкие значения имеют более высокий приоритет.</span><span class="sxs-lookup"><span data-stu-id="a94f6-144">A lower numeric value indicates higher precedence.</span></span>
   * <span data-ttu-id="a94f6-145">"Тег". Оставьте это поле пустым.</span><span class="sxs-lookup"><span data-stu-id="a94f6-145">Tag: Leave empty.</span></span> <span data-ttu-id="a94f6-146">Его нужно заполнять только при использовании стандартных правил Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a94f6-146">Only out-of-box rules from Microsoft should have this box populated with a value.</span></span>
3. <span data-ttu-id="a94f6-147">На странице **Scoping filter** (Фильтр области действия) введите **givenName ISNOTNULL**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-147">On the **Scoping filter** page, enter **givenName ISNOTNULL**.</span></span>  
   <span data-ttu-id="a94f6-148">![Фильтр области входящего правила](./media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-148">![Inbound rule scoping filter](./media/active-directory-aadconnectsync-change-the-configuration/scopingfilter.png)</span></span>  
   <span data-ttu-id="a94f6-149">Этот раздел позволит определить, к каким объектам должно применяться правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-149">This section is used to define which objects the rule should apply to.</span></span> <span data-ttu-id="a94f6-150">Если оставить эти поля пустыми, правило будет применяться ко всем объектам пользователя,</span><span class="sxs-lookup"><span data-stu-id="a94f6-150">If left empty, the rule would apply to all user objects.</span></span> <span data-ttu-id="a94f6-151">в том числе к конференц-залам, учетным записям службы и другим неодушевленным объектам.</span><span class="sxs-lookup"><span data-stu-id="a94f6-151">But that would include conference rooms, service accounts, and other non-people user objects.</span></span>
4. <span data-ttu-id="a94f6-152">Оставьте страницу **Join rules**(Правила присоединения) пустой.</span><span class="sxs-lookup"><span data-stu-id="a94f6-152">On the **Join rules**, leave it empty.</span></span>
5. <span data-ttu-id="a94f6-153">На странице **Преобразования** для параметра FlowType (Тип потока) задайте значение **Выражение**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-153">On the **Transformations** page, change the FlowType to **Expression**.</span></span> <span data-ttu-id="a94f6-154">Выберите для параметра "Целевой атрибут" значение **givenName**, а в поле "Источник" введите `PCase([givenName])`.</span><span class="sxs-lookup"><span data-stu-id="a94f6-154">Select the Target Attribute **givenName**, and in Source enter `PCase([givenName])`.</span></span>
   <span data-ttu-id="a94f6-155">![Преобразования входящего правила](./media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-155">![Inbound rule transformations](./media/active-directory-aadconnectsync-change-the-configuration/transformations.png)</span></span>  
   <span data-ttu-id="a94f6-156">Для модуля синхронизации имя функции и имя атрибута необходимо указывать с учетом регистра.</span><span class="sxs-lookup"><span data-stu-id="a94f6-156">The sync engine is case-sensitive both on the function name and the name of the attribute.</span></span> <span data-ttu-id="a94f6-157">Если не учесть регистр, при добавлении правила отобразится предупреждение.</span><span class="sxs-lookup"><span data-stu-id="a94f6-157">If you type something wrong, you see a warning when you add the rule.</span></span> <span data-ttu-id="a94f6-158">В редакторе можно сохранить правило и продолжить с ним работу позже. Таким образом, вы сможете повторно открыть правило и внести в него изменения.</span><span class="sxs-lookup"><span data-stu-id="a94f6-158">The editor allows you to save and continue, so you would have to reopen the rule and correct the rule.</span></span>
6. <span data-ttu-id="a94f6-159">Нажмите кнопку **Добавить** , чтобы сохранить правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-159">Click **Add** to save the rule.</span></span>

<span data-ttu-id="a94f6-160">Новое настраиваемое правило отобразится в системе вместе с другими правилами синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-160">Your new custom rule should be visible with the other sync rules in the system.</span></span>

### <a name="verify-the-change"></a><span data-ttu-id="a94f6-161">Проверка изменений</span><span class="sxs-lookup"><span data-stu-id="a94f6-161">Verify the change</span></span>
<span data-ttu-id="a94f6-162">После внесения изменений в правило его можно проверить на наличие ошибок.</span><span class="sxs-lookup"><span data-stu-id="a94f6-162">With this new change, you want to make sure it is working as expected and is not throwing any errors.</span></span> <span data-ttu-id="a94f6-163">В зависимости от количества объектов это можно сделать двумя разными способами:</span><span class="sxs-lookup"><span data-stu-id="a94f6-163">Depending on the number of objects you have, there are two different ways to do this step.</span></span>

1. <span data-ttu-id="a94f6-164">Выполнить полную синхронизацию всех объектов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-164">Run a full sync on all objects</span></span>
2. <span data-ttu-id="a94f6-165">Выполнить предварительный просмотр и полную синхронизацию одного объекта.</span><span class="sxs-lookup"><span data-stu-id="a94f6-165">Run a preview and full sync on a single object</span></span>

<span data-ttu-id="a94f6-166">Запустите **Synchronization Service** из меню "Пуск".</span><span class="sxs-lookup"><span data-stu-id="a94f6-166">Start **Synchronization Service** from the start menu.</span></span> <span data-ttu-id="a94f6-167">Все действия, описанные в этом разделе, выполняются в этом средстве.</span><span class="sxs-lookup"><span data-stu-id="a94f6-167">The steps in this section are all in this tool.</span></span>

1. <span data-ttu-id="a94f6-168">**Полная синхронизация всех объектов**</span><span class="sxs-lookup"><span data-stu-id="a94f6-168">**Full sync on all objects**</span></span>  
   <span data-ttu-id="a94f6-169">Выберите **Соединители** вверху.</span><span class="sxs-lookup"><span data-stu-id="a94f6-169">Select **Connectors** at the top.</span></span> <span data-ttu-id="a94f6-170">Определите соединитель, измененный в предыдущем разделе (в этом примере "Доменные службы Active Directory"), и выберите его.</span><span class="sxs-lookup"><span data-stu-id="a94f6-170">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="a94f6-171">Выберите **Запустить** в колонке "Действия". После этого выберите **Полная синхронизация** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-171">Select **Run** from Actions and select **Full Synchronization** and **OK**.</span></span>
   <span data-ttu-id="a94f6-172">![Полная синхронизация](./media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-172">![Full sync](./media/active-directory-aadconnectsync-change-the-configuration/fullsync.png)</span></span>  
   <span data-ttu-id="a94f6-173">Теперь объекты в метавселенной обновлены,</span><span class="sxs-lookup"><span data-stu-id="a94f6-173">The objects are now updated in the metaverse.</span></span> <span data-ttu-id="a94f6-174">и их можно просмотреть.</span><span class="sxs-lookup"><span data-stu-id="a94f6-174">You now want to look at the object in the metaverse.</span></span>
2. <span data-ttu-id="a94f6-175">**Предварительный просмотр и полная синхронизация одного объекта**</span><span class="sxs-lookup"><span data-stu-id="a94f6-175">**Preview and full sync on a single object**</span></span>  
   <span data-ttu-id="a94f6-176">Выберите **Соединители** вверху.</span><span class="sxs-lookup"><span data-stu-id="a94f6-176">Select **Connectors** at the top.</span></span> <span data-ttu-id="a94f6-177">Определите соединитель, измененный в предыдущем разделе (в этом примере "Доменные службы Active Directory"), и выберите его.</span><span class="sxs-lookup"><span data-stu-id="a94f6-177">Identify the Connector you made a change to in the previous section, in this case the Active Directory Domain Services, and select it.</span></span> <span data-ttu-id="a94f6-178">Выберите **Search Connector Space**(Поиск пространства соединителя).</span><span class="sxs-lookup"><span data-stu-id="a94f6-178">Select **Search Connector Space**.</span></span> <span data-ttu-id="a94f6-179">Используйте область поиска, чтобы найти необходимый объект для проверки изменений.</span><span class="sxs-lookup"><span data-stu-id="a94f6-179">Use scope to find an object you want to use to test the change.</span></span> <span data-ttu-id="a94f6-180">Выберите объект и щелкните **Предварительный просмотр**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-180">Select the object and click **Preview**.</span></span> <span data-ttu-id="a94f6-181">В открывшемся окне выберите **Просмотр перед фиксацией**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-181">In the new screen, select **Commit Preview**.</span></span>  
   <span data-ttu-id="a94f6-182">![Просмотр перед фиксацией](./media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-182">![Commit preview](./media/active-directory-aadconnectsync-change-the-configuration/commitpreview.png)</span></span>  
   <span data-ttu-id="a94f6-183">Теперь изменение зафиксировано в метавселенной.</span><span class="sxs-lookup"><span data-stu-id="a94f6-183">The change is now committed to the metaverse.</span></span>

<span data-ttu-id="a94f6-184">**Просмотр объектов в метавселенной**</span><span class="sxs-lookup"><span data-stu-id="a94f6-184">**Look at the object in the metaverse**</span></span>  
<span data-ttu-id="a94f6-185">В этом разделе мы выберем несколько образцов объектов и убедимся, что для них задано правильное значение и применено необходимое правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-185">You now want to pick a few sample objects to make sure the value is expected and that the rule applied.</span></span> <span data-ttu-id="a94f6-186">В верхней части экрана выберите **Metaverse Search** (Поиск в метавселенной).</span><span class="sxs-lookup"><span data-stu-id="a94f6-186">Select **Metaverse Search** from the top.</span></span> <span data-ttu-id="a94f6-187">Добавьте любой фильтр, чтобы найти соответствующие объекты.</span><span class="sxs-lookup"><span data-stu-id="a94f6-187">Add any filter you need to find the relevant objects.</span></span> <span data-ttu-id="a94f6-188">Откройте объект, выбрав его в результатах поиска.</span><span class="sxs-lookup"><span data-stu-id="a94f6-188">From the search result, open an object.</span></span> <span data-ttu-id="a94f6-189">Просмотрите значения атрибута, а также проверьте применение правила в столбце **Правила синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="a94f6-189">Look at the attribute values and also verify in the **Sync Rules** column that the rule applied as expected.</span></span>  
<span data-ttu-id="a94f6-190">![Metaverse search](./media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-190">![Metaverse search](./media/active-directory-aadconnectsync-change-the-configuration/mvsearch.png)</span></span>  

### <a name="enable-the-scheduler"></a><span data-ttu-id="a94f6-191">Включение планировщика</span><span class="sxs-lookup"><span data-stu-id="a94f6-191">Enable the scheduler</span></span>
<span data-ttu-id="a94f6-192">Если все параметры заданы правильно, планировщик можно включить снова.</span><span class="sxs-lookup"><span data-stu-id="a94f6-192">If everything is as expected, you can enable the scheduler again.</span></span> <span data-ttu-id="a94f6-193">В PowerShell выполните команду `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span><span class="sxs-lookup"><span data-stu-id="a94f6-193">From PowerShell, run `Set-ADSyncScheduler -SyncCycleEnabled $true`.</span></span>

## <a name="other-common-attribute-flow-changes"></a><span data-ttu-id="a94f6-194">Другие основные изменения потоков атрибутов</span><span class="sxs-lookup"><span data-stu-id="a94f6-194">Other common attribute flow changes</span></span>
<span data-ttu-id="a94f6-195">В предыдущем разделе описан процесс изменения потока атрибута.</span><span class="sxs-lookup"><span data-stu-id="a94f6-195">The previous section described how to make changes to an attribute flow.</span></span> <span data-ttu-id="a94f6-196">В этом разделе приведены дополнительные примеры.</span><span class="sxs-lookup"><span data-stu-id="a94f6-196">In this section, some additional examples are provided.</span></span> <span data-ttu-id="a94f6-197">Действия по созданию правила синхронизации упомянуты лишь в общих чертах. Полное описание можно просмотреть в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="a94f6-197">The steps for how to create the sync rule is abbreviated, but you can find the full steps in the previous section.</span></span>

### <a name="use-another-attribute-than-the-default"></a><span data-ttu-id="a94f6-198">Использование атрибута не по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a94f6-198">Use another attribute than the default</span></span>
<span data-ttu-id="a94f6-199">В компании Fabrikam есть лес, в котором для указания имени, фамилии и отображаемого имени используются локальные алфавиты.</span><span class="sxs-lookup"><span data-stu-id="a94f6-199">At Fabrikam, there is a forest where the local alphabet is used for given name, surname, and display name.</span></span> <span data-ttu-id="a94f6-200">Представления этих атрибутов хранятся в атрибутах расширения, отображенные символами латиницы.</span><span class="sxs-lookup"><span data-stu-id="a94f6-200">The Latin character representation of these attributes can be found in the extension attributes.</span></span> <span data-ttu-id="a94f6-201">При формировании глобального списка адресов в Azure AD и Office 365 организации требуется использовать эти атрибуты.</span><span class="sxs-lookup"><span data-stu-id="a94f6-201">When building the global address list in Azure AD and Office 365, the organization wants these attributes to be used instead.</span></span>

<span data-ttu-id="a94f6-202">В конфигурации по умолчанию объект из локального леса выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a94f6-202">With a default configuration, an object from the local forest looks like this:</span></span>  
![Поток атрибутов 1](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp1.png)

<span data-ttu-id="a94f6-204">Чтобы создать правило с другими потоками атрибутов, выполните следующие действия.</span><span class="sxs-lookup"><span data-stu-id="a94f6-204">To create a rule with other attribute flows, do the following:</span></span>

* <span data-ttu-id="a94f6-205">В меню "Пуск" запустите **редактор правил синхронизации** .</span><span class="sxs-lookup"><span data-stu-id="a94f6-205">Start **Synchronization Rule Editor** from the start menu.</span></span>
* <span data-ttu-id="a94f6-206">Не снимая флажок **Входящие** слева, нажмите кнопку **Добавить новое правило**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-206">With **Inbound** still selected to the left, click the button **Add new rule**.</span></span>
* <span data-ttu-id="a94f6-207">Присвойте правилу имя и описание.</span><span class="sxs-lookup"><span data-stu-id="a94f6-207">Give the rule a name and description.</span></span> <span data-ttu-id="a94f6-208">Выберите локальный каталог Active Directory и соответствующие типы объектов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-208">Select the on-premises Active Directory and the relevant object types.</span></span> <span data-ttu-id="a94f6-209">В поле **Тип связи** выберите **Join** (Присоединение).</span><span class="sxs-lookup"><span data-stu-id="a94f6-209">In **Link Type**, select **Join**.</span></span> <span data-ttu-id="a94f6-210">Для задания приоритета выберите число, которое не используется другим правилом.</span><span class="sxs-lookup"><span data-stu-id="a94f6-210">For precedence, pick a number that is not used by another rule.</span></span> <span data-ttu-id="a94f6-211">Приоритет стандартных правил начинается со 100, поэтому в этом примере используется значение 50.</span><span class="sxs-lookup"><span data-stu-id="a94f6-211">The out-of-box rules start with 100, so the value 50 can be used in this example.</span></span>
  <span data-ttu-id="a94f6-212">![Поток атрибутов 2](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-212">![Attribute flow 2](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp2.png)</span></span>
* <span data-ttu-id="a94f6-213">Оставьте значение области пустым (это означает, что правило должно применяться для всех объектов-пользователей в лесу).</span><span class="sxs-lookup"><span data-stu-id="a94f6-213">Leave scope empty (that is, should apply to all user objects in the forest).</span></span>
* <span data-ttu-id="a94f6-214">Оставьте поле Join rules (Правила присоединения) пустым (это означает, что стандартные правила могут обрабатывать любые присоединения).</span><span class="sxs-lookup"><span data-stu-id="a94f6-214">Leave join rules empty (that is, let the out-of-box rule handle any joins).</span></span>
* <span data-ttu-id="a94f6-215">В разделе "Преобразования" создайте следующие потоки.</span><span class="sxs-lookup"><span data-stu-id="a94f6-215">In Transformations, create the following flows:</span></span>  
  ![Поток атрибутов 3](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp3.png)
* <span data-ttu-id="a94f6-217">Щелкните **Добавить** , чтобы сохранить правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-217">Click **Add** to save the rule.</span></span>
* <span data-ttu-id="a94f6-218">Откройте **Synchronization Service Manager**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-218">Go to **Synchronization Service Manager**.</span></span> <span data-ttu-id="a94f6-219">В разделе **Соединители**выберите соединитель, в который мы добавили правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-219">On **Connectors**, select the Connector where we added the rule.</span></span> <span data-ttu-id="a94f6-220">Выберите **Запустить**, а затем — **Полная синхронизация**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-220">Select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="a94f6-221">Функция полной синхронизации повторно вычисляет все объекты, используя текущие правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-221">A Full Synchronization recalculates all objects using the current rules.</span></span>

<span data-ttu-id="a94f6-222">Это результат для того же объекта с применением следующего настраиваемого правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-222">This is the result for the same object with this custom rule:</span></span>  
![Поток атрибутов 4](./media/active-directory-aadconnectsync-change-the-configuration/attributeflowjp4.png)

### <a name="length-of-attributes"></a><span data-ttu-id="a94f6-224">Длина атрибутов</span><span class="sxs-lookup"><span data-stu-id="a94f6-224">Length of attributes</span></span>
<span data-ttu-id="a94f6-225">Строковые атрибуты по умолчанию являются индексируемыми. Их длина не может превышать 448 знаков.</span><span class="sxs-lookup"><span data-stu-id="a94f6-225">String attributes are by default set to be indexable and the maximum length is 448 characters.</span></span> <span data-ttu-id="a94f6-226">При работе с атрибутами, которые могут содержать больше символов, необходимо включить в поток атрибутов следующее значение:</span><span class="sxs-lookup"><span data-stu-id="a94f6-226">If you are working with string attributes that might contain more, then make sure to include the following in the attribute flow:</span></span>  
`attributeName` <- `Left([attributeName],448)`

### <a name="changing-the-userprincipalsuffix"></a><span data-ttu-id="a94f6-227">Изменение атрибута userPrincipalSuffix</span><span class="sxs-lookup"><span data-stu-id="a94f6-227">Changing the userPrincipalSuffix</span></span>
<span data-ttu-id="a94f6-228">Атрибут userPrincipalName в Active Directory не всегда известен пользователям. Также он может не подходить в качестве идентификатора для входа.</span><span class="sxs-lookup"><span data-stu-id="a94f6-228">The userPrincipalName attribute in Active Directory is not always known by the users and might not be suitable as the sign-in ID.</span></span> <span data-ttu-id="a94f6-229">Мастер установки службы синхронизации Azure AD Connect позволяет выбрать другой атрибут, например mail.</span><span class="sxs-lookup"><span data-stu-id="a94f6-229">The Azure AD Connect sync installation wizard allows picking a different attribute, for example mail.</span></span> <span data-ttu-id="a94f6-230">Но в некоторых случаях этот атрибут должен вычисляться.</span><span class="sxs-lookup"><span data-stu-id="a94f6-230">But in some cases the attribute must be calculated.</span></span> <span data-ttu-id="a94f6-231">Например, у компании Contoso есть два каталога Azure AD: один для рабочей среды, а другой для тестовой.</span><span class="sxs-lookup"><span data-stu-id="a94f6-231">For example, the company Contoso has two Azure AD directories, one for production and one for testing.</span></span> <span data-ttu-id="a94f6-232">Пользователи в тестовом клиенте должны просто изменить суффикс в идентификаторе входа.</span><span class="sxs-lookup"><span data-stu-id="a94f6-232">They want the users in their test tenant to use another suffix in the sign-in ID.</span></span>  
`userPrincipalName` <- `Word([userPrincipalName],1,"@") & "@contosotest.com"`

<span data-ttu-id="a94f6-233">В этом выражении берется вся часть слева от первого знака @-sign (Word) и сцепляется с фиксированной строкой.</span><span class="sxs-lookup"><span data-stu-id="a94f6-233">In this expression, take everything left of the first @-sign (Word) and concatenate with a fixed string.</span></span>

### <a name="convert-a-multi-value-to-a-single-value"></a><span data-ttu-id="a94f6-234">Преобразование атрибута с несколькими значениями в атрибут с одним</span><span class="sxs-lookup"><span data-stu-id="a94f6-234">Convert a multi-value to a single-value</span></span>
<span data-ttu-id="a94f6-235">Некоторые атрибуты в Active Directory имеют несколько значений в схеме, даже если в средстве администрирования «Пользователи и компьютеры Active Directory» они выглядят как атрибуты с одним значением.</span><span class="sxs-lookup"><span data-stu-id="a94f6-235">Some attributes in Active Directory are multi-valued in the schema even though they look single valued in Active Directory Users and Computers.</span></span> <span data-ttu-id="a94f6-236">Пример — атрибут Description.</span><span class="sxs-lookup"><span data-stu-id="a94f6-236">An example is the description attribute.</span></span>  
`description` <- `IIF(IsNullOrEmpty([description]),NULL,Left(Trim(Item([description],1)),448))`

<span data-ttu-id="a94f6-237">В этом выражении в случае, если атрибут имеет значение, берется первый элемент (Item) в атрибуте, удаляются начальные и конечные пробелы (Trim), а затем сохраняются первые 448 знаков (Left) в строке.</span><span class="sxs-lookup"><span data-stu-id="a94f6-237">In this expression in case the attribute has a value, take the first item (Item) in the attribute, remove leading and trailing spaces (Trim), and then keep the first 448 characters (Left) in the string.</span></span>

### <a name="do-not-flow-an-attribute"></a><span data-ttu-id="a94f6-238">Отключение потока для атрибута</span><span class="sxs-lookup"><span data-stu-id="a94f6-238">Do not flow an attribute</span></span>
<span data-ttu-id="a94f6-239">Общие сведения о сценарии в этом разделе см. в разделе [Управление потоком атрибута](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span><span class="sxs-lookup"><span data-stu-id="a94f6-239">For background on the scenario for this section, see [Control the attribute flow process](active-directory-aadconnectsync-understanding-declarative-provisioning.md#control-the-attribute-flow-process).</span></span>

<span data-ttu-id="a94f6-240">Существует два способа отключения потока для атрибута.</span><span class="sxs-lookup"><span data-stu-id="a94f6-240">There are two ways to not flow an attribute.</span></span> <span data-ttu-id="a94f6-241">Первый доступен в мастере установки и позволяет [удалить выбранные атрибуты](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span><span class="sxs-lookup"><span data-stu-id="a94f6-241">The first is available in the installation wizard and allows you to [remove selected attributes](active-directory-aadconnect-get-started-custom.md#azure-ad-app-and-attribute-filtering).</span></span> <span data-ttu-id="a94f6-242">Им можно воспользоваться, если атрибут никогда не синхронизировался.</span><span class="sxs-lookup"><span data-stu-id="a94f6-242">This option works if you have never synchronized the attribute before.</span></span> <span data-ttu-id="a94f6-243">Однако если вы начали синхронизацию этого атрибута и позже удалили его с помощью этой функции, то модуль синхронизации прекратит управление атрибутом и в Azure AD будут оставлены имеющиеся значения.</span><span class="sxs-lookup"><span data-stu-id="a94f6-243">However, if you have started to synchronize this attribute and later remove it with this feature, then the sync engine stops managing the attribute and the existing values are left in Azure AD.</span></span>

<span data-ttu-id="a94f6-244">Если вы хотите удалить значение атрибута и гарантировать, что в будущем для него не будет включен поток, нужно создать настраиваемое правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-244">If you want to remove the value of an attribute and make sure it does not flow in the future, you need create a custom rule instead.</span></span>

<span data-ttu-id="a94f6-245">В компании Fabrikam мы обнаружили, что некоторые атрибуты, синхронизируемые с облаком, лишние.</span><span class="sxs-lookup"><span data-stu-id="a94f6-245">At Fabrikam, we have realized that some of the attributes we synchronize to the cloud should not be there.</span></span> <span data-ttu-id="a94f6-246">Мы хотим удалить эти атрибуты из Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-246">We want to make sure these attributes are removed from Azure AD.</span></span>  
![Неправильные атрибуты расширения](./media/active-directory-aadconnectsync-change-the-configuration/badextensionattribute.png)

* <span data-ttu-id="a94f6-248">Создайте новое входящее правило синхронизации и укажите описание. ![Описания](./media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-248">Create a new inbound Synchronization Rule and populate the description ![Descriptions](./media/active-directory-aadconnectsync-change-the-configuration/syncruledescription.png)</span></span>
* <span data-ttu-id="a94f6-249">Создайте потоки атрибутов типа **Выражение** с источником **AuthoritativeNull**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-249">Create attribute flows of type **Expression** and with the source **AuthoritativeNull**.</span></span> <span data-ttu-id="a94f6-250">Литеральный тип **AuthoritativeNull** указывает, что значение должно быть пустым в MV, даже если правило синхронизации с более низким приоритетом пытается заполнить значение.</span><span class="sxs-lookup"><span data-stu-id="a94f6-250">The literal **AuthoritativeNull** indicates that the value should be empty in the MV even if a lower precedence sync rule tries to populate the value.</span></span>
  <span data-ttu-id="a94f6-251">![Преобразование атрибутов расширения](./media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-251">![Transformation for Extension Attributes](./media/active-directory-aadconnectsync-change-the-configuration/syncruletransformations.png)</span></span>
* <span data-ttu-id="a94f6-252">Сохраните правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-252">Save the Sync Rule.</span></span> <span data-ttu-id="a94f6-253">Запустите **службу синхронизации**, найдите соединитель, выберите **Запустить** и **Полная синхронизация**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-253">Start **Synchronization Service**, find the Connector, select **Run**, and **Full Synchronization**.</span></span> <span data-ttu-id="a94f6-254">Это приведет к пересчету всех потоков атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-254">This step recalculates all attribute flows.</span></span>
* <span data-ttu-id="a94f6-255">Убедитесь, что требуемые изменения будут экспортированы, с помощью поиска в пространстве соединителя.</span><span class="sxs-lookup"><span data-stu-id="a94f6-255">Verify that the intended changes are about to be exported by searching the connector space.</span></span>
  <span data-ttu-id="a94f6-256">![Промежуточное удаление](./media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-256">![Staged delete](./media/active-directory-aadconnectsync-change-the-configuration/deletetobeexported.png)</span></span>

## <a name="create-rules-with-powershell"></a><span data-ttu-id="a94f6-257">Создание правил с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="a94f6-257">Create rules with PowerShell</span></span>
<span data-ttu-id="a94f6-258">Редактор правил синхронизации удобно использовать, если требуется внести всего несколько изменений.</span><span class="sxs-lookup"><span data-stu-id="a94f6-258">Using the sync rule editor works fine when you only have a few changes to make.</span></span> <span data-ttu-id="a94f6-259">Если требуется внести много изменений, то лучше использовать PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a94f6-259">If you need to make many changes, then PowerShell might be a better option.</span></span> <span data-ttu-id="a94f6-260">Некоторые дополнительные функции доступны только в PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a94f6-260">Some advanced features are only available with PowerShell.</span></span>

### <a name="get-the-powershell-script-for-an-out-of-box-rule"></a><span data-ttu-id="a94f6-261">Получение сценария PowerShell для стандартного правила</span><span class="sxs-lookup"><span data-stu-id="a94f6-261">Get the PowerShell script for an out-of-box rule</span></span>
<span data-ttu-id="a94f6-262">Чтобы получить сценарий PowerShell для создания стандартного правила, выберите правило в редакторе правил синхронизации и щелкните **Экспорт**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-262">To see the PowerShell script that created an out-of-box rule, select the rule in the sync rules editor and click **Export**.</span></span> <span data-ttu-id="a94f6-263">Это позволит получить сценарий PowerShell, который создал данное правило.</span><span class="sxs-lookup"><span data-stu-id="a94f6-263">This action gives you the PowerShell script that created the rule.</span></span>

### <a name="advanced-precedence"></a><span data-ttu-id="a94f6-264">Расширенный приоритет</span><span class="sxs-lookup"><span data-stu-id="a94f6-264">Advanced precedence</span></span>
<span data-ttu-id="a94f6-265">Значение приоритета стандартного правила синхронизации начинается со 100.</span><span class="sxs-lookup"><span data-stu-id="a94f6-265">The out-of-box sync rules start with a precedence value of 100.</span></span> <span data-ttu-id="a94f6-266">Если имеется несколько лесов и нужно внести множество пользовательских изменений, то 99 правил синхронизации может быть недостаточно.</span><span class="sxs-lookup"><span data-stu-id="a94f6-266">If you have many forests and you need to make many custom changes, then 99 sync rules might not be enough.</span></span>

<span data-ttu-id="a94f6-267">Можно указать модулю синхронизации, что вам нужно вставить дополнительные правила перед стандартными правилами.</span><span class="sxs-lookup"><span data-stu-id="a94f6-267">You can instruct the Sync Engine that you want additional rules inserted before the out-of-box rules.</span></span> <span data-ttu-id="a94f6-268">Чтобы сделать это, выполните следующее.</span><span class="sxs-lookup"><span data-stu-id="a94f6-268">To get this behavior, follow these steps:</span></span>

1. <span data-ttu-id="a94f6-269">Выберите первое стандартное правило синхронизации (это правило **In from AD-User Join**) в редакторе правил синхронизации и щелкните **Экспорт**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-269">Mark the first out-of-box sync rule (this rule is the **In from AD-User Join**) in the sync rule editor and select **Export**.</span></span> <span data-ttu-id="a94f6-270">Скопируйте значение идентификатора SR.</span><span class="sxs-lookup"><span data-stu-id="a94f6-270">Copy the SR Identifier value.</span></span>  
<span data-ttu-id="a94f6-271">![PowerShell до изменения](./media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-271">![PowerShell before change](./media/active-directory-aadconnectsync-change-the-configuration/powershell1.png)</span></span>  
2. <span data-ttu-id="a94f6-272">Создайте новое правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-272">Create the new sync rule.</span></span> <span data-ttu-id="a94f6-273">Для этого можно использовать редактор правил синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-273">You can use the sync rule editor to create it.</span></span> <span data-ttu-id="a94f6-274">Экспортируйте это правило в сценарий PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a94f6-274">Export the rule to a PowerShell script.</span></span>
3. <span data-ttu-id="a94f6-275">В свойство **PrecedenceBefore** вставьте значение идентификатора из стандартного правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-275">In the property **PrecedenceBefore**, insert the identifier value from the out-of-box rule.</span></span> <span data-ttu-id="a94f6-276">Задайте для параметра **Precedence** значение **0**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-276">Set the **Precedence** to **0**.</span></span> <span data-ttu-id="a94f6-277">Убедитесь, что атрибут Identifier является уникальным и вы не используете повторно GUID из другого правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-277">Make sure the Identifier attribute is unique and you are not reusing a GUID from another rule.</span></span> <span data-ttu-id="a94f6-278">Также убедитесь, что свойство **ImmutableTag** не задано. Это свойство должно задаваться только для стандартного правила.</span><span class="sxs-lookup"><span data-stu-id="a94f6-278">Also make sure that the **ImmutableTag** property is not set; this property should only be set for an out-of-box rule.</span></span> <span data-ttu-id="a94f6-279">Сохраните сценарий PowerShell и запустите его.</span><span class="sxs-lookup"><span data-stu-id="a94f6-279">Save the PowerShell script and run it.</span></span> <span data-ttu-id="a94f6-280">Результатом будет назначение приоритета со значением 100 вашему настраиваемому правилу, при этом приоритет всех прочих стандартных правил будет увеличен.</span><span class="sxs-lookup"><span data-stu-id="a94f6-280">The result is that your custom rule is assigned the precedence value of 100 and all other out-of-box rules are incremented.</span></span>  
<span data-ttu-id="a94f6-281">![PowerShell после изменения](./media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span><span class="sxs-lookup"><span data-stu-id="a94f6-281">![PowerShell after change](./media/active-directory-aadconnectsync-change-the-configuration/powershell2.png)</span></span>  

<span data-ttu-id="a94f6-282">При необходимости можно использовать несколько пользовательских правил синхронизации с одинаковым значением **PrecedenceBefore**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-282">You can have many custom sync rules using the same **PrecedenceBefore** value when needed.</span></span>


## <a name="enable-synchronization-of-preferreddatalocation"></a><span data-ttu-id="a94f6-283">Включение синхронизации PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="a94f6-283">Enable synchronization of PreferredDataLocation</span></span>
<span data-ttu-id="a94f6-284">Azure AD Connect поддерживает синхронизацию атрибута **PreferredDataLocation** для объектов **User** в версии 1.1.524.0 и более поздних версиях.</span><span class="sxs-lookup"><span data-stu-id="a94f6-284">Azure AD Connect supports synchronization of the **PreferredDataLocation** attribute for **User** objects in version 1.1.524.0 and after.</span></span> <span data-ttu-id="a94f6-285">В частности, были введены следующие изменения.</span><span class="sxs-lookup"><span data-stu-id="a94f6-285">More specifically, following changes have been introduced:</span></span>

* <span data-ttu-id="a94f6-286">Схема типа объекта **User** в соединителе Azure AD расширена для включения атрибута PreferredDataLocation, который имеет строковый тип и является однозначным.</span><span class="sxs-lookup"><span data-stu-id="a94f6-286">The schema of the object type **User** in the Azure AD Connector is extended to include PreferredDataLocation attribute, which is of type string and is single-valued.</span></span>

* <span data-ttu-id="a94f6-287">Схема типа объекта **Person** в метавселенной расширена для включения атрибута PreferredDataLocation, который имеет строковый тип и является однозначным.</span><span class="sxs-lookup"><span data-stu-id="a94f6-287">The schema of the object type **Person** in the Metaverse is extended to include PreferredDataLocation attribute, which is of type string and is single-valued.</span></span>

<span data-ttu-id="a94f6-288">По умолчанию синхронизация атрибута PreferredDataLocation не включена, так как в локальном каталоге Active Directory отсутствует соответствующий атрибут PreferredDataLocation.</span><span class="sxs-lookup"><span data-stu-id="a94f6-288">By default, the PreferredDataLocation attribute is not enabled for synchronization because there is no corresponding PreferredDataLocation attribute in on-premises Active Directory.</span></span> <span data-ttu-id="a94f6-289">Необходимо вручную включить синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="a94f6-289">You must manually enable synchronization.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a94f6-290">В настоящее время Azure AD позволяет непосредственно настроить атрибут PreferredDataLocation для синхронизированных объектов User и облачных объектов User с помощью Azure AD PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a94f6-290">Currently, Azure AD allows the PreferredDataLocation attribute on both synchronized User objects and cloud User objects to be directly configured using Azure AD PowerShell.</span></span> <span data-ttu-id="a94f6-291">После включения синхронизации атрибута PreferredDataLocation необходимо перестать использовать Azure AD PowerShell для настройки этого атрибута для **синхронизированных объектов User**, так как Azure AD Connect переопределит их атрибуты на основе значений исходных атрибутов в локальном каталоге Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a94f6-291">Once you have enabled synchronization of the PreferredDataLocation attribute, you must stop using Azure AD PowerShell to configure the attribute on **synchronized User objects** as Azure AD Connect will override them based on the source attribute values in on-premises Active Directory.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a94f6-292">С 1 сентября 2017 года возможность непосредственно настроить атрибут PreferredDataLocation для **синхронизированных объектов User** в Azure AD с помощью Azure AD PowerShell будет отсутствовать.</span><span class="sxs-lookup"><span data-stu-id="a94f6-292">On September 1 2017, Azure AD will no longer allow the PreferredDataLocation attribute on **synchronized User objects** to be directly configured using Azure AD PowerShell.</span></span> <span data-ttu-id="a94f6-293">Чтобы настроить атрибут PreferredLocation для синхронизированных объектов User, необходимо использовать только Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a94f6-293">To configure PreferredLocation attribute on synchronized User objects, you must use Azure AD Connect only.</span></span>

<span data-ttu-id="a94f6-294">Перед включением синхронизации атрибута PreferredDataLocation необходимо выполнить следующее.</span><span class="sxs-lookup"><span data-stu-id="a94f6-294">Before enabling synchronization of the PreferredDataLocation attribute, you must:</span></span>

 * <span data-ttu-id="a94f6-295">Сначала определите, какой атрибут локального каталога Active Directory следует использовать в качестве исходного атрибута.</span><span class="sxs-lookup"><span data-stu-id="a94f6-295">First, decide which on-premises Active Directory attribute to be used as the source attribute.</span></span> <span data-ttu-id="a94f6-296">Он должно иметь тип **string** и быть **однозначным**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-296">It should be of type **string** and is **single-valued**.</span></span>

 * <span data-ttu-id="a94f6-297">Если ранее с помощью Azure AD PowerShell в Azure AD вы настроили атрибут PreferredDataLocation для существующих синхронизированных объектов User, необходимо **бэкпортировать** значения атрибутов для соответствующих объектов User в локальном каталоге Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a94f6-297">If you have previously configured the PreferredDataLocation attribute on existing synchronized User objects in Azure AD using Azure AD PowerShell, you must **backport** the attribute values to the corresponding User objects in on-premises Active Directory.</span></span>
 
    > [!IMPORTANT]
    > <span data-ttu-id="a94f6-298">В противном случае после включения синхронизации атрибута PreferredDataLocation Azure AD Connect удалит существующие значения атрибутов в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-298">If you do not backport the attribute values to the corresponding User objects in on-premises Active Directory, Azure AD Connect will remove the existing attribute values in Azure AD when synchronization for the PreferredDataLocation attribute is enabled.</span></span>

 * <span data-ttu-id="a94f6-299">Рекомендуется настроить исходный атрибут по крайней мере для двух локальных объектов User в Active Directory, которые позже могут быть использованы для проверки.</span><span class="sxs-lookup"><span data-stu-id="a94f6-299">It is recommended you configure the source attribute on at least a couple of on-premises AD User objects now, which can be used for verification later.</span></span>
 
<span data-ttu-id="a94f6-300">Включение синхронизации атрибута PreferredDataLocation можно вкратце описать следующим образом.</span><span class="sxs-lookup"><span data-stu-id="a94f6-300">The steps to enable synchronization of the PreferredDataLocation attribute can be summarized as:</span></span>

1. <span data-ttu-id="a94f6-301">Отключите планировщик синхронизации и убедитесь, что синхронизация не выполняется</span><span class="sxs-lookup"><span data-stu-id="a94f6-301">Disable sync scheduler and verify there is no synchronization in progress</span></span>

2. <span data-ttu-id="a94f6-302">Добавьте исходный атрибут в схему локального соединителя AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-302">Add the source attribute to the on-premises AD Connector schema</span></span>

3. <span data-ttu-id="a94f6-303">Добавьте PreferredDataLocation в схему соединителя Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-303">Add PreferredDataLocation to the Azure AD Connector schema</span></span>

4. <span data-ttu-id="a94f6-304">Создайте правило входящей синхронизации для передачи значения атрибута из локального каталога Active Directory.</span><span class="sxs-lookup"><span data-stu-id="a94f6-304">Create an inbound synchronization rule to flow the attribute value from on-premises Active Directory</span></span>

5. <span data-ttu-id="a94f6-305">Создайте правило исходящей синхронизации для передачи значения атрибута в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-305">Create an outbound synchronization rule to flow the attribute value to Azure AD</span></span>

6. <span data-ttu-id="a94f6-306">Запустите полный цикл синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-306">Run Full Synchronization cycle</span></span>

7. <span data-ttu-id="a94f6-307">Включите планировщик синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-307">Enable sync scheduler</span></span>

> [!NOTE]
> <span data-ttu-id="a94f6-308">Эти шаги подробно описываются в остальной части данного раздела.</span><span class="sxs-lookup"><span data-stu-id="a94f6-308">The rest of this section covers these steps in details.</span></span> <span data-ttu-id="a94f6-309">Они описаны в контексте развертывания Azure AD в топологии с отдельным лесом и без пользовательских правил синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-309">They are described in the context of an Azure AD deployment with single-forest topology and without custom synchronization rules.</span></span> <span data-ttu-id="a94f6-310">Если используется топология с несколькими лесами, настроенными пользовательскими правилами синхронизации или промежуточным сервером, то необходимо соответствующим образом изменить действия.</span><span class="sxs-lookup"><span data-stu-id="a94f6-310">If you have multi-forest topology, custom synchronization rules configured or have a staging server, you need to adjust the steps accordingly.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="a94f6-311">Шаг 1. Отключение планировщика синхронизации и остановка синхронизации</span><span class="sxs-lookup"><span data-stu-id="a94f6-311">Step 1: Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="a94f6-312">Изменяя правила синхронизации, убедитесь, что синхронизация не выполняется, во избежание экспорта непреднамеренных изменений в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-312">Ensure no synchronization takes place while you are in the middle of updating synchronization rules to avoid unintended changes being exported to Azure AD.</span></span> <span data-ttu-id="a94f6-313">Чтобы отключить встроенный планировщик синхронизации, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="a94f6-313">To disable the built-in sync scheduler:</span></span>

 1. <span data-ttu-id="a94f6-314">Запустите сеанс PowerShell на сервере Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a94f6-314">Start PowerShell session on the Azure AD Connect server.</span></span>

 2. <span data-ttu-id="a94f6-315">Отключите плановую синхронизацию, выполнив командлет: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="a94f6-315">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>
 
 3. <span data-ttu-id="a94f6-316">Запустите **Synchronization Service Manager**, выбрав "Пуск → Служба синхронизации".</span><span class="sxs-lookup"><span data-stu-id="a94f6-316">Start the **Synchronization Service Manager** by going to START → Synchronization Service.</span></span>
 
 4. <span data-ttu-id="a94f6-317">Перейдите на вкладку **операций** и убедитесь, что на ней не отображаются операции в состоянии *Выполняется*.</span><span class="sxs-lookup"><span data-stu-id="a94f6-317">Go to the **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

![Synchronization Service Manager: проверка наличия выполняющихся операций](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step1.png)

### <a name="step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema"></a><span data-ttu-id="a94f6-319">Шаг 2. Добавление исходного атрибута в схему локального соединителя AD</span><span class="sxs-lookup"><span data-stu-id="a94f6-319">Step 2: Add the source attribute to the on-premises AD Connector schema</span></span>
<span data-ttu-id="a94f6-320">Не все атрибуты AD импортируются в пространство локального соединителя AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-320">Not all AD attributes are imported into the on-premises AD Connector Space.</span></span> <span data-ttu-id="a94f6-321">Чтобы добавить исходный атрибут в список импортируемых атрибутов, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="a94f6-321">To add the source attribute to the list of the imported attributes:</span></span>

 1. <span data-ttu-id="a94f6-322">Откройте вкладку **Connectors** (Соединители) в Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="a94f6-322">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>
 
 2. <span data-ttu-id="a94f6-323">Щелкните правой кнопкой мыши **локальный соединитель AD** и выберите **Properties** (Свойства).</span><span class="sxs-lookup"><span data-stu-id="a94f6-323">Right-click on the **on-premises AD Connector** and select **Properties**.</span></span>
 
 3. <span data-ttu-id="a94f6-324">Во всплывающем диалоговом окне перейдите на вкладку **Select Attributes** (Выбор атрибутов).</span><span class="sxs-lookup"><span data-stu-id="a94f6-324">In the pop-up dialog, go to the **Select Attributes** tab.</span></span>
 
 4. <span data-ttu-id="a94f6-325">Убедитесь, что исходный атрибут выбран в списке атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-325">Make sure the source attribute is checked in the attribute list.</span></span>
 
 5. <span data-ttu-id="a94f6-326">Нажмите кнопку **OK**, чтобы сохранить изменения.</span><span class="sxs-lookup"><span data-stu-id="a94f6-326">Click **OK** to save.</span></span>

![Добавление исходного атрибута в схему локального соединителя AD](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step2.png)

### <a name="step-3-add-preferreddatalocation-to-the-azure-ad-connector-schema"></a><span data-ttu-id="a94f6-328">Шаг 3. Добавление PreferredDataLocation в схему соединителя Azure AD</span><span class="sxs-lookup"><span data-stu-id="a94f6-328">Step 3: Add PreferredDataLocation to the Azure AD Connector schema</span></span>
<span data-ttu-id="a94f6-329">По умолчанию атрибут PreferredDataLocation не импортируется в пространство Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a94f6-329">By default, the PreferredDataLocation attribute is not imported into the Azure AD Connect Space.</span></span> <span data-ttu-id="a94f6-330">Вот как можно добавить атрибут PreferredDataLocation в список импортируемых атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-330">To add the PreferredDataLocation attribute to the list of imported attributes:</span></span>

 1. <span data-ttu-id="a94f6-331">Откройте вкладку **Connectors** (Соединители) в Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="a94f6-331">Go to the **Connectors** tab in the Synchronization Service Manager.</span></span>

 2. <span data-ttu-id="a94f6-332">Щелкните правой кнопкой мыши **соединитель Azure AD** и выберите **Properties** (Свойства).</span><span class="sxs-lookup"><span data-stu-id="a94f6-332">Right-click on the **Azure AD Connector** and select **Properties**.</span></span>

 3. <span data-ttu-id="a94f6-333">Во всплывающем диалоговом окне перейдите на вкладку **Select Attributes** (Выбор атрибутов).</span><span class="sxs-lookup"><span data-stu-id="a94f6-333">In the pop-up dialog, go to the **Select Attributes** tab.</span></span>

 4. <span data-ttu-id="a94f6-334">Убедитесь, что атрибут PreferredDataLocation выбран в списке атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-334">Make sure the PreferredDataLocation attribute is checked in the attribute list.</span></span>

 5. <span data-ttu-id="a94f6-335">Нажмите кнопку **OK**, чтобы сохранить изменения.</span><span class="sxs-lookup"><span data-stu-id="a94f6-335">Click **OK** to save.</span></span>

![Добавление исходного атрибута в схему соединителя Azure AD](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step3.png)

### <a name="step-4-create-an-inbound-synchronization-rule-to-flow-the-attribute-value-from-on-premises-active-directory"></a><span data-ttu-id="a94f6-337">Шаг 4. Создание правила входящей синхронизации для передачи значения атрибута из локального каталога Active Directory</span><span class="sxs-lookup"><span data-stu-id="a94f6-337">Step 4: Create an inbound synchronization rule to flow the attribute value from on-premises Active Directory</span></span>
<span data-ttu-id="a94f6-338">Правило входящей синхронизации позволяет передавать значение исходного атрибута из локального каталога Active Directory в метавселенную.</span><span class="sxs-lookup"><span data-stu-id="a94f6-338">The inbound synchronization rule permits the attribute value to flow from the source attribute from on-premises Active Directory to the Metaverse:</span></span>

1. <span data-ttu-id="a94f6-339">Запустите **редактор правил синхронизации**, выбрав "Пуск → Редактор правил синхронизации".</span><span class="sxs-lookup"><span data-stu-id="a94f6-339">Start the **Synchronization Rules Editor** by going to START → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="a94f6-340">В фильтре поиска для параметра **Направление** задайте значение **Входящие**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-340">Set the search filter **Direction** to be **Inbound**.</span></span>

3. <span data-ttu-id="a94f6-341">Нажмите кнопку **Добавить правило**, чтобы создать правило входящей синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-341">Click **Add new rule** button to create a new inbound rule.</span></span>

4. <span data-ttu-id="a94f6-342">На вкладке **Описание** укажите следующую конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="a94f6-342">Under the **Description** tab, provide the following configuration:</span></span>
 
    | <span data-ttu-id="a94f6-343">Атрибут</span><span class="sxs-lookup"><span data-stu-id="a94f6-343">Attribute</span></span> | <span data-ttu-id="a94f6-344">Значение</span><span class="sxs-lookup"><span data-stu-id="a94f6-344">Value</span></span> | <span data-ttu-id="a94f6-345">Сведения</span><span class="sxs-lookup"><span data-stu-id="a94f6-345">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="a94f6-346">Имя</span><span class="sxs-lookup"><span data-stu-id="a94f6-346">Name</span></span> | <span data-ttu-id="a94f6-347">*Укажите имя*</span><span class="sxs-lookup"><span data-stu-id="a94f6-347">*Provide a name*</span></span> | <span data-ttu-id="a94f6-348">Например, *In from AD – User PreferredDataLocation*.</span><span class="sxs-lookup"><span data-stu-id="a94f6-348">For example, *“In from AD – User PreferredDataLocation”*</span></span> |
    | <span data-ttu-id="a94f6-349">Описание</span><span class="sxs-lookup"><span data-stu-id="a94f6-349">Description</span></span> | <span data-ttu-id="a94f6-350">*Укажите описание*</span><span class="sxs-lookup"><span data-stu-id="a94f6-350">*Provide a description*</span></span> |  |
    | <span data-ttu-id="a94f6-351">Подключенная система</span><span class="sxs-lookup"><span data-stu-id="a94f6-351">Connected System</span></span> | <span data-ttu-id="a94f6-352">*Выберите локальный соединитель AD*.</span><span class="sxs-lookup"><span data-stu-id="a94f6-352">*Pick the on-premises AD connector*</span></span> |  |
    | <span data-ttu-id="a94f6-353">Тип объекта подключенной системы</span><span class="sxs-lookup"><span data-stu-id="a94f6-353">Connected System Object Type</span></span> | <span data-ttu-id="a94f6-354">**User**</span><span class="sxs-lookup"><span data-stu-id="a94f6-354">**User**</span></span> |  |
    | <span data-ttu-id="a94f6-355">Тип объекта метавселенной</span><span class="sxs-lookup"><span data-stu-id="a94f6-355">Metaverse Object Type</span></span> | <span data-ttu-id="a94f6-356">**Person**</span><span class="sxs-lookup"><span data-stu-id="a94f6-356">**Person**</span></span> |  |
    | <span data-ttu-id="a94f6-357">Тип связи</span><span class="sxs-lookup"><span data-stu-id="a94f6-357">Link Type</span></span> | <span data-ttu-id="a94f6-358">**Join**</span><span class="sxs-lookup"><span data-stu-id="a94f6-358">**Join**</span></span> |  |
    | <span data-ttu-id="a94f6-359">Приоритет</span><span class="sxs-lookup"><span data-stu-id="a94f6-359">Precedence</span></span> | <span data-ttu-id="a94f6-360">*Выберите число от 1 до 99*.</span><span class="sxs-lookup"><span data-stu-id="a94f6-360">*Choose a number between 1 – 99*</span></span> | <span data-ttu-id="a94f6-361">Значения 1–99 зарезервированы для настраиваемых правил синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-361">1 – 99 is reserved for custom sync rules.</span></span> <span data-ttu-id="a94f6-362">Не выбирайте значение, которое используется в другом правиле синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-362">Do not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="a94f6-363">Перейдите на вкладку **Scoping filter** (Фильтр области) и добавьте **отдельную группу фильтра области со следующим предложением**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-363">Go to the **Scoping filter** tab and add a **single scoping filter group with the following clause**:</span></span>
 
    | <span data-ttu-id="a94f6-364">Атрибут</span><span class="sxs-lookup"><span data-stu-id="a94f6-364">Attribute</span></span> | <span data-ttu-id="a94f6-365">Оператор</span><span class="sxs-lookup"><span data-stu-id="a94f6-365">Operator</span></span> | <span data-ttu-id="a94f6-366">Значение</span><span class="sxs-lookup"><span data-stu-id="a94f6-366">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="a94f6-367">adminDescription</span><span class="sxs-lookup"><span data-stu-id="a94f6-367">adminDescription</span></span> | <span data-ttu-id="a94f6-368">NOTSTARTWITH</span><span class="sxs-lookup"><span data-stu-id="a94f6-368">NOTSTARTWITH</span></span> | <span data-ttu-id="a94f6-369">Пользователь\_</span><span class="sxs-lookup"><span data-stu-id="a94f6-369">User\_</span></span> | 
 
    <span data-ttu-id="a94f6-370">Фильтр области определяет локальные объекты AD, к которым применяется данное правило входящей синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-370">Scoping filter determines which on-premises AD objects this inbound synchronization rule is applied to.</span></span> <span data-ttu-id="a94f6-371">В этом примере мы используем тот же фильтр области, что и в правиле синхронизации OOB *In from AD – User Common*, который запрещает применять правило синхронизации к объектам User, созданным с помощью функции обратной записи пользователей Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-371">In this example, we use the same scoping filter used as *“In from AD – User Common”* OOB synchronization rule, which prevents the synchronization rule from being applied to User objects created through Azure AD User writeback feature.</span></span> <span data-ttu-id="a94f6-372">Возможно, вам необходимо настроить фильтр области в соответствии с развертыванием Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a94f6-372">You may need to tweak the scoping filter according to your Azure AD Connect deployment.</span></span>

6. <span data-ttu-id="a94f6-373">Перейдите на вкладку **Преобразование** и реализуйте приведенное ниже правило преобразования.</span><span class="sxs-lookup"><span data-stu-id="a94f6-373">Go to the **Transformation tab** and implement the following transformation rule:</span></span>
 
    | <span data-ttu-id="a94f6-374">Тип потока</span><span class="sxs-lookup"><span data-stu-id="a94f6-374">Flow Type</span></span> | <span data-ttu-id="a94f6-375">Целевой атрибут</span><span class="sxs-lookup"><span data-stu-id="a94f6-375">Target Attribute</span></span> | <span data-ttu-id="a94f6-376">Источник</span><span class="sxs-lookup"><span data-stu-id="a94f6-376">Source</span></span> | <span data-ttu-id="a94f6-377">Применить однократно</span><span class="sxs-lookup"><span data-stu-id="a94f6-377">Apply Once</span></span> | <span data-ttu-id="a94f6-378">"Merge Type" (Тип объединения)</span><span class="sxs-lookup"><span data-stu-id="a94f6-378">Merge Type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="a94f6-379">Напрямую</span><span class="sxs-lookup"><span data-stu-id="a94f6-379">Direct</span></span> | <span data-ttu-id="a94f6-380">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="a94f6-380">PreferredDataLocation</span></span> | <span data-ttu-id="a94f6-381">Выберите исходный атрибут.</span><span class="sxs-lookup"><span data-stu-id="a94f6-381">Pick the source attribute</span></span> | <span data-ttu-id="a94f6-382">Флажок снят.</span><span class="sxs-lookup"><span data-stu-id="a94f6-382">Unchecked</span></span> | <span data-ttu-id="a94f6-383">Блокировка изменений</span><span class="sxs-lookup"><span data-stu-id="a94f6-383">Update</span></span> |

7. <span data-ttu-id="a94f6-384">Щелкните **Добавить**, чтобы создать правило входящей синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-384">Click **Add** to create the inbound rule.</span></span>

![Создание правила входящей синхронизации](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step4.png)

### <a name="step-5-create-an-outbound-synchronization-rule-to-flow-the-attribute-value-to-azure-ad"></a><span data-ttu-id="a94f6-386">Шаг 5. Создание правила исходящей синхронизации для передачи значения атрибута в Azure AD</span><span class="sxs-lookup"><span data-stu-id="a94f6-386">Step 5: Create an outbound synchronization rule to flow the attribute value to Azure AD</span></span>
<span data-ttu-id="a94f6-387">Правило исходящей синхронизации позволяет передать значение атрибута из метавселенной в атрибут PreferredDataLocation в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-387">The outbound synchronization rule permits the attribute value to flow from the Metaverse to the PreferredDataLocation attribute in Azure AD:</span></span>

1. <span data-ttu-id="a94f6-388">Перейдите в редактор **правил синхронизации**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-388">Go to the **Synchronization Rules** Editor.</span></span>

2. <span data-ttu-id="a94f6-389">В фильтре поиска для параметра **Направление** задайте значение **Исходящие**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-389">Set the search filter **Direction** to be **Outbound**.</span></span>

3. <span data-ttu-id="a94f6-390">Нажмите кнопку **Добавить правило**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-390">Click **Add new rule** button.</span></span>

4. <span data-ttu-id="a94f6-391">На вкладке **Описание** укажите следующую конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="a94f6-391">Under the **Description** tab, provide the following configuration:</span></span>

    | <span data-ttu-id="a94f6-392">Атрибут</span><span class="sxs-lookup"><span data-stu-id="a94f6-392">Attribute</span></span> | <span data-ttu-id="a94f6-393">Значение</span><span class="sxs-lookup"><span data-stu-id="a94f6-393">Value</span></span> | <span data-ttu-id="a94f6-394">Сведения</span><span class="sxs-lookup"><span data-stu-id="a94f6-394">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="a94f6-395">Имя</span><span class="sxs-lookup"><span data-stu-id="a94f6-395">Name</span></span> | <span data-ttu-id="a94f6-396">*Укажите имя*</span><span class="sxs-lookup"><span data-stu-id="a94f6-396">*Provide a name*</span></span> | <span data-ttu-id="a94f6-397">Например, "Out to AAD – User PreferredDataLocation".</span><span class="sxs-lookup"><span data-stu-id="a94f6-397">For example, “Out to AAD – User PreferredDataLocation”</span></span> |
    | <span data-ttu-id="a94f6-398">Описание</span><span class="sxs-lookup"><span data-stu-id="a94f6-398">Description</span></span> | <span data-ttu-id="a94f6-399">*Укажите описание*</span><span class="sxs-lookup"><span data-stu-id="a94f6-399">*Provide a description*</span></span> |
    | <span data-ttu-id="a94f6-400">Подключенная система</span><span class="sxs-lookup"><span data-stu-id="a94f6-400">Connected System</span></span> | <span data-ttu-id="a94f6-401">*Выберите соединитель AAD*</span><span class="sxs-lookup"><span data-stu-id="a94f6-401">*Select the AAD connector*</span></span> |
    | <span data-ttu-id="a94f6-402">Тип объекта подключенной системы</span><span class="sxs-lookup"><span data-stu-id="a94f6-402">Connected System Object Type</span></span> | <span data-ttu-id="a94f6-403">Пользователь</span><span class="sxs-lookup"><span data-stu-id="a94f6-403">User</span></span> ||
    | <span data-ttu-id="a94f6-404">Тип объекта метавселенной</span><span class="sxs-lookup"><span data-stu-id="a94f6-404">Metaverse Object Type</span></span> | <span data-ttu-id="a94f6-405">**Person**</span><span class="sxs-lookup"><span data-stu-id="a94f6-405">**Person**</span></span> ||
    | <span data-ttu-id="a94f6-406">Тип связи</span><span class="sxs-lookup"><span data-stu-id="a94f6-406">Link Type</span></span> | <span data-ttu-id="a94f6-407">**Join**</span><span class="sxs-lookup"><span data-stu-id="a94f6-407">**Join**</span></span> ||
    | <span data-ttu-id="a94f6-408">Приоритет</span><span class="sxs-lookup"><span data-stu-id="a94f6-408">Precedence</span></span> | <span data-ttu-id="a94f6-409">*Выберите число от 1 до 99*.</span><span class="sxs-lookup"><span data-stu-id="a94f6-409">*Choose a number between 1 – 99*</span></span> | <span data-ttu-id="a94f6-410">Значения 1–99 зарезервированы для настраиваемых правил синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-410">1 – 99 is reserved for custom sync rules.</span></span> <span data-ttu-id="a94f6-411">Не выбирайте значение, которое используется в другом правиле синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-411">YDo not pick a value that is used by another synchronization rule.</span></span> |

5. <span data-ttu-id="a94f6-412">Перейдите на вкладку **Scoping filter** (Фильтр области) и добавьте **отдельную группу фильтра области с двумя приведенными ниже предложениями**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-412">Go to the **Scoping filter** tab and add a **single scoping filter group with two clauses**:</span></span>
 
    | <span data-ttu-id="a94f6-413">Атрибут</span><span class="sxs-lookup"><span data-stu-id="a94f6-413">Attribute</span></span> | <span data-ttu-id="a94f6-414">Оператор</span><span class="sxs-lookup"><span data-stu-id="a94f6-414">Operator</span></span> | <span data-ttu-id="a94f6-415">Значение</span><span class="sxs-lookup"><span data-stu-id="a94f6-415">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="a94f6-416">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="a94f6-416">sourceObjectType</span></span> | <span data-ttu-id="a94f6-417">EQUAL</span><span class="sxs-lookup"><span data-stu-id="a94f6-417">EQUAL</span></span> | <span data-ttu-id="a94f6-418">Пользователь</span><span class="sxs-lookup"><span data-stu-id="a94f6-418">User</span></span> |
    | <span data-ttu-id="a94f6-419">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="a94f6-419">cloudMastered</span></span> | <span data-ttu-id="a94f6-420">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="a94f6-420">NOTEQUAL</span></span> | <span data-ttu-id="a94f6-421">Да</span><span class="sxs-lookup"><span data-stu-id="a94f6-421">True</span></span> |

    <span data-ttu-id="a94f6-422">Фильтр области определяет объекты Azure AD, к которым применяется данное правило исходящей синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-422">Scoping filter determines which Azure AD objects this outbound synchronization rule is applied to.</span></span> <span data-ttu-id="a94f6-423">В этом примере мы используем фильтр области из правила синхронизации OOB "Out to AD – User Identity".</span><span class="sxs-lookup"><span data-stu-id="a94f6-423">In this example, we use the same scoping filter from “Out to AD – User Identity” OOB synchronization rule.</span></span> <span data-ttu-id="a94f6-424">Он предотвращает применение правила синхронизации к объектам User в локальном каталоге Active Directory, которые не синхронизируются.</span><span class="sxs-lookup"><span data-stu-id="a94f6-424">It prevents the synchronization rule from being applied to User objects which are not synchronized from on-premises Active Directory.</span></span> <span data-ttu-id="a94f6-425">Возможно, вам необходимо настроить фильтр области в соответствии с развертыванием Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="a94f6-425">You may need to tweak the scoping filter according to your Azure AD Connect deployment.</span></span>
    
6. <span data-ttu-id="a94f6-426">Перейдите на вкладку **Преобразование** и реализуйте приведенное ниже правило преобразования.</span><span class="sxs-lookup"><span data-stu-id="a94f6-426">Go to the **Transformation** tab and implement the following transformation rule:</span></span>

    | <span data-ttu-id="a94f6-427">Тип потока</span><span class="sxs-lookup"><span data-stu-id="a94f6-427">Flow Type</span></span> | <span data-ttu-id="a94f6-428">Целевой атрибут</span><span class="sxs-lookup"><span data-stu-id="a94f6-428">Target Attribute</span></span> | <span data-ttu-id="a94f6-429">Источник</span><span class="sxs-lookup"><span data-stu-id="a94f6-429">Source</span></span> | <span data-ttu-id="a94f6-430">Применить однократно</span><span class="sxs-lookup"><span data-stu-id="a94f6-430">Apply Once</span></span> | <span data-ttu-id="a94f6-431">"Merge Type" (Тип объединения)</span><span class="sxs-lookup"><span data-stu-id="a94f6-431">Merge Type</span></span> |
    | --- | --- | --- | --- | --- |
    | <span data-ttu-id="a94f6-432">Напрямую</span><span class="sxs-lookup"><span data-stu-id="a94f6-432">Direct</span></span> | <span data-ttu-id="a94f6-433">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="a94f6-433">PreferredDataLocation</span></span> | <span data-ttu-id="a94f6-434">PreferredDataLocation</span><span class="sxs-lookup"><span data-stu-id="a94f6-434">PreferredDataLocation</span></span> | <span data-ttu-id="a94f6-435">Флажок снят.</span><span class="sxs-lookup"><span data-stu-id="a94f6-435">Unchecked</span></span> | <span data-ttu-id="a94f6-436">Блокировка изменений</span><span class="sxs-lookup"><span data-stu-id="a94f6-436">Update</span></span> |

7. <span data-ttu-id="a94f6-437">Щелкните **Добавить**, чтобы создать правило исходящей синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-437">Close **Add** to create the outbound rule.</span></span>

![Создание правила исходящей синхронизации](./media/active-directory-aadconnectsync-change-the-configuration/preferredDataLocation-step5.png)

### <a name="step-6-run-full-synchronization-cycle"></a><span data-ttu-id="a94f6-439">Шаг 6. Запуск полного цикла синхронизации</span><span class="sxs-lookup"><span data-stu-id="a94f6-439">Step 6: Run Full Synchronization cycle</span></span>
<span data-ttu-id="a94f6-440">Как правило, полный цикл синхронизации обязателен, так как мы добавили новые атрибуты в схемы AD и соединителя Azure AD, а также ввели пользовательские правила синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-440">In general, full synchronization cycle is required since we have added new attributes to both the AD and Azure AD Connector schema, and introduced custom synchronization rules.</span></span> <span data-ttu-id="a94f6-441">Рекомендуется проверить изменения перед их экспортом в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-441">It is recommended that you verify the changes before exporting them to Azure AD.</span></span> <span data-ttu-id="a94f6-442">Можно следовать приведенным ниже инструкциям, чтобы проверить изменения во время ручного выполнения действий, составляющих полный цикл синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-442">You can use the following steps to verify the changes while manually running the steps that make up a full synchronization cycle.</span></span> 

1. <span data-ttu-id="a94f6-443">Выполните шаг **полного импорта** для **локального соединителя AD**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-443">Run **Full import** step on the **on-premises AD Connector**:</span></span>

   1. <span data-ttu-id="a94f6-444">Откройте вкладку **Operations** (Операции) в Synchronization Service Manager.</span><span class="sxs-lookup"><span data-stu-id="a94f6-444">Go to the **Operations** tab in the Synchronization Service Manager.</span></span>

   2. <span data-ttu-id="a94f6-445">Щелкните правой кнопкой мыши **локальный соединитель AD** и выберите **Run** (Выполнить).</span><span class="sxs-lookup"><span data-stu-id="a94f6-445">Right-click on the **on-premises AD Connector** and select **Run...**</span></span>

   3. <span data-ttu-id="a94f6-446">Во всплывающем диалоговом окне выберите **Full Import** (Полный импорт) и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-446">In the pop-up dialog, select **Full Import** and click **OK**.</span></span>
    
   4. <span data-ttu-id="a94f6-447">Дождитесь завершения операции.</span><span class="sxs-lookup"><span data-stu-id="a94f6-447">Wait for operation to complete.</span></span>

    > [!NOTE]
    > <span data-ttu-id="a94f6-448">Можно пропустить полный импорт локального соединителя AD, если исходный атрибут уже включен в список импортируемых атрибутов.</span><span class="sxs-lookup"><span data-stu-id="a94f6-448">You can skip Full Import on the on-premises AD Connector if the source attribute is already included in the list of imported attributes.</span></span> <span data-ttu-id="a94f6-449">Другими словами, можно было не вносить изменения во время шага 2 [Добавление исходного атрибута в схему локального соединителя AD](#step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema).</span><span class="sxs-lookup"><span data-stu-id="a94f6-449">In other words, you did not have to make any change during [Step 2: Add the source attribute to the on-premises AD Connector schema](#step-2-add-the-source-attribute-to-the-on-premises-ad-connector-schema).</span></span>

2. <span data-ttu-id="a94f6-450">Выполните шаг **полного импорта** для **соединителя Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-450">Run **Full import** step on the **Azure AD Connector**:</span></span>

   1. <span data-ttu-id="a94f6-451">Щелкните правой кнопкой мыши **соединитель Azure AD** и выберите **Run** (Выполнить).</span><span class="sxs-lookup"><span data-stu-id="a94f6-451">Right-click on the **Azure AD Connector** and select **Run...**</span></span>

   2. <span data-ttu-id="a94f6-452">Во всплывающем диалоговом окне выберите **Full Import** (Полный импорт) и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-452">In the pop-up dialog, select **Full Import** and click **OK**.</span></span>
   
   3. <span data-ttu-id="a94f6-453">Дождитесь завершения операции.</span><span class="sxs-lookup"><span data-stu-id="a94f6-453">Wait for operation to complete.</span></span>

3. <span data-ttu-id="a94f6-454">Проверьте изменения правила синхронизации на существующем объекте User.</span><span class="sxs-lookup"><span data-stu-id="a94f6-454">Verify the synchronization rule changes on an existing User object:</span></span>

<span data-ttu-id="a94f6-455">Исходный атрибут из локального каталога Active Directory и атрибут PreferredDataLocation из Azure AD были импортированы в соответствующее пространство соединителя.</span><span class="sxs-lookup"><span data-stu-id="a94f6-455">The source attribute from on-premises Active Directory and PreferredDataLocation from Azure AD have been imported into the respective Connecter Space.</span></span> <span data-ttu-id="a94f6-456">Перед выполнением шага полной синхронизации рекомендуется выполнить **предварительный просмотр** существующего объекта User в пространстве локального соединителя AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-456">Before proceeding with Full Synchronization step, it is recommended that you do a **Preview** on an existing User object in the on-premises AD Connector Space.</span></span> <span data-ttu-id="a94f6-457">У выбранного объекта должен быть заполнен исходный атрибут.</span><span class="sxs-lookup"><span data-stu-id="a94f6-457">The object you picked should have the source attribute populated.</span></span> <span data-ttu-id="a94f6-458">Если при **предварительном просмотре** атрибут PreferredDataLocation успешно заполнен, то это хороший показатель того, что вы верно настроили правила синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="a94f6-458">A successful **Preview** with the PreferredDataLocation populated in the Metaverse is a good indicator that you have configured the synchronization rules correctly.</span></span> <span data-ttu-id="a94f6-459">Сведения о том, как выполнить **предварительный просмотр**, см. в разделе [Проверка изменений](#verify-the-change).</span><span class="sxs-lookup"><span data-stu-id="a94f6-459">For information about how to do a **Preview**, refer to section [Verify the change](#verify-the-change).</span></span>

4. <span data-ttu-id="a94f6-460">Выполните шаг **полной синхронизации** для **локального соединителя AD**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-460">Run **Full Synchronization** step on the **on-premises AD Connector**:</span></span>

   1. <span data-ttu-id="a94f6-461">Щелкните правой кнопкой мыши **локальный соединитель AD** и выберите **Run** (Выполнить).</span><span class="sxs-lookup"><span data-stu-id="a94f6-461">Right-click on the **on-premises AD Connector** and select **Run...**</span></span>
  
   2. <span data-ttu-id="a94f6-462">Во всплывающем диалоговом окне выберите **Full Synchronization** (Полная синхронизация) и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-462">In the pop-up dialog, select **Full Synchronization** and click **OK**.</span></span>
   
   3. <span data-ttu-id="a94f6-463">Дождитесь завершения операции.</span><span class="sxs-lookup"><span data-stu-id="a94f6-463">Wait for operation to complete.</span></span>

5. <span data-ttu-id="a94f6-464">Проверьте **ожидающие операции экспорта** в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-464">Verify **Pending Exports** to Azure AD:</span></span>

   1. <span data-ttu-id="a94f6-465">Щелкните правой кнопкой мыши **соединитель Azure AD** и выберите **Search Connector Space** (Поиск пространства соединителя).</span><span class="sxs-lookup"><span data-stu-id="a94f6-465">Right-click on the **Azure AD Connector** and select **Search Connector Space**.</span></span>

   2. <span data-ttu-id="a94f6-466">Во всплывающем диалоговом окне "Search Connector Space" (Поиск пространства соединителя) сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="a94f6-466">In the Search Connector Space pop-up dialog:</span></span>

      1. <span data-ttu-id="a94f6-467">Для параметра **Scope** (Область) укажите значение **Pending Export** (Ожидающая операция экспорта).</span><span class="sxs-lookup"><span data-stu-id="a94f6-467">Set **Scope** to **Pending Export**.</span></span>
      
      2. <span data-ttu-id="a94f6-468">Установите все 3 флажка: **"Добавить", "Изменить" и "Удалить"**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-468">Check all three checkboxes, including **Add, Modify, and Delete**.</span></span>
      
      3. <span data-ttu-id="a94f6-469">Нажмите кнопку **Найти**, чтобы получить список объектов с изменениями для экспорта.</span><span class="sxs-lookup"><span data-stu-id="a94f6-469">Click the **Search** button to get the list of objects with changes to be exported.</span></span> <span data-ttu-id="a94f6-470">Чтобы проверить изменения указанного объекта, дважды щелкните его.</span><span class="sxs-lookup"><span data-stu-id="a94f6-470">To examine the changes for a given object, double-click the object.</span></span>
      
      4. <span data-ttu-id="a94f6-471">Убедитесь, что изменения являются ожидаемыми.</span><span class="sxs-lookup"><span data-stu-id="a94f6-471">Verify the changes are expected.</span></span>

6. <span data-ttu-id="a94f6-472">Выполните шаг **экспорта** для **соединителя Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-472">Run **Export** step on the **Azure AD Connector**</span></span>
      
   1. <span data-ttu-id="a94f6-473">Щелкните правой кнопкой мыши **соединитель Azure AD** и выберите команду **Run** (Выполнить).</span><span class="sxs-lookup"><span data-stu-id="a94f6-473">Right-click the **Azure AD Connector** and select **Run...**</span></span>
   
   2. <span data-ttu-id="a94f6-474">Во всплывающем диалоговом окне "Run Connector" (Запуск соединителя) выберите **Экспорт** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="a94f6-474">In the Run Connector pop-up dialog, select **Export** and click **OK**.</span></span>
   
   3. <span data-ttu-id="a94f6-475">Дождитесь завершения экспорта в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-475">Wait for Export to Azure AD to complete.</span></span>

> [!NOTE]
> <span data-ttu-id="a94f6-476">Вы можете заметить, что для соединителя Azure AD отсутствуют шаги полной синхронизации и экспорта.</span><span class="sxs-lookup"><span data-stu-id="a94f6-476">You may notice that the steps do not include the Full Synchronization step and Export step on the Azure AD Connector.</span></span> <span data-ttu-id="a94f6-477">Они и не требуются, так как значения атрибутов передаются только из локального каталога Active Directory в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="a94f6-477">The steps are not required since the attribute values are flowing from on-premises Active Directory to Azure AD only.</span></span>

### <a name="step-7-re-enable-sync-scheduler"></a><span data-ttu-id="a94f6-478">Шаг 7. Повторное включение планировщика синхронизации</span><span class="sxs-lookup"><span data-stu-id="a94f6-478">Step 7: Re-enable sync scheduler</span></span>
<span data-ttu-id="a94f6-479">Повторно включите встроенный планировщик синхронизации.</span><span class="sxs-lookup"><span data-stu-id="a94f6-479">Re-enable the built-in sync scheduler:</span></span>

1. <span data-ttu-id="a94f6-480">Запустите сеанс PowerShell.</span><span class="sxs-lookup"><span data-stu-id="a94f6-480">Start PowerShell session.</span></span>

2. <span data-ttu-id="a94f6-481">Повторно включите плановую синхронизацию, выполнив командлет: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="a94f6-481">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>



## <a name="next-steps"></a><span data-ttu-id="a94f6-482">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a94f6-482">Next steps</span></span>
* <span data-ttu-id="a94f6-483">Дополнительные сведения о модели конфигурации, см. в статье о [принципах декларативной подготовки](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="a94f6-483">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="a94f6-484">Дополнительные сведения о языке выражений см. в статье [Служба синхронизации Azure AD Connect: общие сведения о выражениях декларативной подготовки](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="a94f6-484">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>

<span data-ttu-id="a94f6-485">**Обзорные статьи**</span><span class="sxs-lookup"><span data-stu-id="a94f6-485">**Overview topics**</span></span>

* [<span data-ttu-id="a94f6-486">Службы синхронизации Azure AD Connect: общие сведений о синхронизации и ее настройка</span><span class="sxs-lookup"><span data-stu-id="a94f6-486">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="a94f6-487">Интеграция локальных удостоверений с Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="a94f6-487">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
