---
title: "Синхронизация Azure AD Connect: Общие сведения о конфигурации по умолчанию hello | Документы Microsoft"
description: "В этой статье описана конфигурация по умолчанию hello в Azure AD Connect sync."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1cf95759af913cad8a1393839d3a836434e7c9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-understanding-hello-default-configuration"></a><span data-ttu-id="73f9a-103">Синхронизация Azure AD Connect: Общие сведения о конфигурации по умолчанию hello</span><span class="sxs-lookup"><span data-stu-id="73f9a-103">Azure AD Connect sync: Understanding hello default configuration</span></span>
<span data-ttu-id="73f9a-104">В этой статье описываются правила конфигурации out-of-box hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-104">This article explains hello out-of-box configuration rules.</span></span> <span data-ttu-id="73f9a-105">Здесь описывается правила hello и влияние конфигурации hello эти правила.</span><span class="sxs-lookup"><span data-stu-id="73f9a-105">It documents hello rules and how these rules impact hello configuration.</span></span> <span data-ttu-id="73f9a-106">Он также поможет выполнить конфигурацию по умолчанию hello синхронизации Azure AD Connect. Hello предназначена пониманию как работает модель конфигурации hello, именованная декларативная Подготовка в реальном примере hello чтения.</span><span class="sxs-lookup"><span data-stu-id="73f9a-106">It also walks you through hello default configuration of Azure AD Connect sync. hello goal is that hello reader understands how hello configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="73f9a-107">В этой статье предполагается, что уже установлен и Настройка синхронизации Azure AD Connect с помощью мастера установки hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-107">This article assumes that you have already installed and configure Azure AD Connect sync using hello installation wizard.</span></span>

<span data-ttu-id="73f9a-108">сведения о hello toounderstand модели конфигурации hello, чтение [декларативной подготовки основные сведения о](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="73f9a-108">toounderstand hello details of hello configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-tooazure-ad"></a><span data-ttu-id="73f9a-109">Out-of-box правила из tooAzure в локальной среде AD</span><span class="sxs-lookup"><span data-stu-id="73f9a-109">Out-of-box rules from on-premises tooAzure AD</span></span>
<span data-ttu-id="73f9a-110">Hello следующих выражений можно найти в конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-110">hello following expressions can be found in hello out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="73f9a-111">Стандартные правила: объект-пользователь</span><span class="sxs-lookup"><span data-stu-id="73f9a-111">User out-of-box rules</span></span>
<span data-ttu-id="73f9a-112">Эти правила применяются также тип объекта iNetOrgPerson toohello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-112">These rules also apply toohello iNetOrgPerson object type.</span></span>

<span data-ttu-id="73f9a-113">Объект пользователя должен отвечать после синхронизации toobe hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-113">A user object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="73f9a-114">Должен присутствовать атрибут sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="73f9a-114">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="73f9a-115">После hello объекта будет создана в Azure AD, а затем sourceAnchor нельзя изменить.</span><span class="sxs-lookup"><span data-stu-id="73f9a-115">After hello object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="73f9a-116">Если значение hello измененные в локальной среде, hello объекта прекращает синхронизацию до изменения hello sourceAnchor задней tooits предыдущее значение.</span><span class="sxs-lookup"><span data-stu-id="73f9a-116">If hello value is changed on-premises, hello object stops synchronizing until hello sourceAnchor is changed back tooits previous value.</span></span>
* <span data-ttu-id="73f9a-117">Должен атрибут accountEnabled (userAccountControl) hello заполнен.</span><span class="sxs-lookup"><span data-stu-id="73f9a-117">Must have hello accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="73f9a-118">Для локальной службы Active Directory этот атрибут всегда присутствует и является заполненным.</span><span class="sxs-lookup"><span data-stu-id="73f9a-118">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="73f9a-119">следующие объекты пользователя Hello, **не** синхронизированы tooAzure AD:</span><span class="sxs-lookup"><span data-stu-id="73f9a-119">hello following user objects are **not** synchronized tooAzure AD:</span></span>

* <span data-ttu-id="73f9a-120">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-120">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="73f9a-121">Убедитесь, многие объекты out-of-box в Active Directory, например hello встроенной учетной записи администратора, не синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="73f9a-121">Ensure many out-of-box objects in Active Directory, such as hello built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="73f9a-122">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-122">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="73f9a-123">Объекты-пользователи без атрибута sAMAccountName не должны синхронизироваться.</span><span class="sxs-lookup"><span data-stu-id="73f9a-123">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="73f9a-124">На практике этот случай может произойти только в домене, обновленном с уровня NT4.</span><span class="sxs-lookup"><span data-stu-id="73f9a-124">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="73f9a-125">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-125">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="73f9a-126">Не синхронизировать hello учетной записи службы синхронизации Azure AD Connect и предыдущими версиями.</span><span class="sxs-lookup"><span data-stu-id="73f9a-126">Do not synchronize hello service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="73f9a-127">Не синхронизируйте учетные записи Exchange, которые не будут работать в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="73f9a-127">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="73f9a-128">Не синхронизируйте объекты, которые не будут работать в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="73f9a-128">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="73f9a-129">Это битовая маска (& H21C07000) будет отфильтровывать hello следующие объекты:</span><span class="sxs-lookup"><span data-stu-id="73f9a-129">This bitmask (&H21C07000) would filter out hello following objects:</span></span>
  * <span data-ttu-id="73f9a-130">общедоступную папку с поддержкой электронной почты;</span><span class="sxs-lookup"><span data-stu-id="73f9a-130">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="73f9a-131">почтовый ящик системного помощника;</span><span class="sxs-lookup"><span data-stu-id="73f9a-131">System Attendant Mailbox</span></span>
  * <span data-ttu-id="73f9a-132">почтовый ящик базы данных почтовых ящиков (системный почтовый ящик);</span><span class="sxs-lookup"><span data-stu-id="73f9a-132">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="73f9a-133">универсальную группу безопасности (не применяется для пользователя, но доступно для прежних версий);</span><span class="sxs-lookup"><span data-stu-id="73f9a-133">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="73f9a-134">неуниверсальную группу (не применяется для пользователя, но доступно для прежних версий);</span><span class="sxs-lookup"><span data-stu-id="73f9a-134">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="73f9a-135">план почтового ящика;</span><span class="sxs-lookup"><span data-stu-id="73f9a-135">Mailbox Plan</span></span>
  * <span data-ttu-id="73f9a-136">почтовый ящик найденных сообщений.</span><span class="sxs-lookup"><span data-stu-id="73f9a-136">Discovery Mailbox</span></span>
* <span data-ttu-id="73f9a-137">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-137">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="73f9a-138">Не синхронизируйте объекты, являющиеся жертвами репликации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-138">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="73f9a-139">применить атрибут правилам Hello:</span><span class="sxs-lookup"><span data-stu-id="73f9a-139">hello following attribute rules apply:</span></span>

* <span data-ttu-id="73f9a-140">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-140">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="73f9a-141">атрибут sourceAnchor Hello не были получены из связанного почтового ящика.</span><span class="sxs-lookup"><span data-stu-id="73f9a-141">hello sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="73f9a-142">Предполагается, если найден связанный почтовый ящик фактической учетной записи hello входит более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="73f9a-142">It is assumed that if a linked mailbox has been found, hello actual account is joined later.</span></span>
* <span data-ttu-id="73f9a-143">Exchange связанные атрибуты синхронизируются только в том случае, если hello атрибут **mailNickName** имеет значение.</span><span class="sxs-lookup"><span data-stu-id="73f9a-143">Exchange related attributes are only synchronized if hello attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="73f9a-144">При наличии нескольких лесов, атрибуты используются в hello следующий порядок:</span><span class="sxs-lookup"><span data-stu-id="73f9a-144">When there are multiple forests, then attributes are consumed in hello following order:</span></span>
  1. <span data-ttu-id="73f9a-145">Связанные атрибуты в toosign (для примера userPrincipalName) предоставляются из леса hello с действующей учетной записью.</span><span class="sxs-lookup"><span data-stu-id="73f9a-145">Attributes related toosign-in (for example userPrincipalName) are contributed from hello forest with an enabled account.</span></span>
  2. <span data-ttu-id="73f9a-146">Атрибуты, которые находятся в Exchange GAL (глобальный список адресов) предоставляются из леса hello с почтовый ящик Exchange.</span><span class="sxs-lookup"><span data-stu-id="73f9a-146">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from hello forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="73f9a-147">Если почтовый ящик не найден, эти атрибуты могут поступать из любого леса.</span><span class="sxs-lookup"><span data-stu-id="73f9a-147">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="73f9a-148">Exchange связанные атрибуты (технические атрибуты не отображается в глобальном списке адресов hello) предоставляются из леса hello где `mailNickname ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-148">Exchange related attributes (technical attributes not visible in hello GAL) are contributed from hello forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="73f9a-149">При наличии нескольких лесов, в которых будет соответствовать одному из этих правил, а затем hello порядок создания (даты и времени) соединителей hello (лесов) — используется toodetermine лес, который участвует в реализации hello атрибуты.</span><span class="sxs-lookup"><span data-stu-id="73f9a-149">If there are multiple forests that would satisfy one of these rules, then hello creation order (date/time) of hello Connectors (forests) is used toodetermine which forest contributes hello attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="73f9a-150">Стандартные правила: объект-контакт</span><span class="sxs-lookup"><span data-stu-id="73f9a-150">Contact out-of-box rules</span></span>
<span data-ttu-id="73f9a-151">Контактный объект должны быть выполнены после синхронизации toobe hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-151">A contact object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="73f9a-152">обратитесь в службу Hello должно быть почту.</span><span class="sxs-lookup"><span data-stu-id="73f9a-152">hello contact must be mail-enabled.</span></span> <span data-ttu-id="73f9a-153">Оно проверяется с hello следующие правила:</span><span class="sxs-lookup"><span data-stu-id="73f9a-153">It is verified with hello following rules:</span></span>
  * <span data-ttu-id="73f9a-154">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-154">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="73f9a-155">атрибут proxyAddresses Hello должно быть заполнено.</span><span class="sxs-lookup"><span data-stu-id="73f9a-155">hello proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="73f9a-156">Основной адрес электронной почты можно найти в атрибут proxyAddresses hello или атрибут mail hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-156">A primary email address can be found in either hello proxyAddresses attribute or hello mail attribute.</span></span> <span data-ttu-id="73f9a-157">Здравствуйте, наличие @ является используется tooverify, hello содержимое будет адрес электронной почты.</span><span class="sxs-lookup"><span data-stu-id="73f9a-157">hello presence of an @ is used tooverify that hello content is an email address.</span></span> <span data-ttu-id="73f9a-158">Одно из этих двух правил должно быть вычисленное tooTrue.</span><span class="sxs-lookup"><span data-stu-id="73f9a-158">One of these two rules must be evaluated tooTrue.</span></span>
    * <span data-ttu-id="73f9a-159">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-159">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="73f9a-160">Есть запись с «SMTP:» и если нет, можно @ быть найдено в строке приветствия?</span><span class="sxs-lookup"><span data-stu-id="73f9a-160">Is there an entry with "SMTP:" and if there is, can an @ be found in hello string?</span></span>
    * <span data-ttu-id="73f9a-161">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-161">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="73f9a-162">Атрибут mail заполняется hello и если да, можно @ быть найдено в строке приветствия?</span><span class="sxs-lookup"><span data-stu-id="73f9a-162">Is hello mail attribute populated and if it is, can an @ be found in hello string?</span></span>

<span data-ttu-id="73f9a-163">следующие объекты-контакты Hello, **не** синхронизированы tooAzure AD:</span><span class="sxs-lookup"><span data-stu-id="73f9a-163">hello following contact objects are **not** synchronized tooAzure AD:</span></span>

* <span data-ttu-id="73f9a-164">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-164">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="73f9a-165">Объекты-контакты, отмеченные как критические, не должны синхронизироваться.</span><span class="sxs-lookup"><span data-stu-id="73f9a-165">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="73f9a-166">Не допускаются объекты с конфигурацией по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="73f9a-166">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="73f9a-167">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-167">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="73f9a-168">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-168">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="73f9a-169">Эти объекты не будут работать в Exchange Online.</span><span class="sxs-lookup"><span data-stu-id="73f9a-169">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="73f9a-170">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-170">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="73f9a-171">Не синхронизируйте объекты, являющиеся жертвами репликации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-171">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="73f9a-172">Стандартные правила: объект-группа</span><span class="sxs-lookup"><span data-stu-id="73f9a-172">Group out-of-box rules</span></span>
<span data-ttu-id="73f9a-173">Объект группы должны удовлетворять hello после синхронизации toobe:</span><span class="sxs-lookup"><span data-stu-id="73f9a-173">A group object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="73f9a-174">Должен включать менее 50 000 членов.</span><span class="sxs-lookup"><span data-stu-id="73f9a-174">Must have less than 50,000 members.</span></span> <span data-ttu-id="73f9a-175">Этот счетчик представляет hello количество элементов в локальной группе hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-175">This count is hello number of members in hello on-premises group.</span></span>
  * <span data-ttu-id="73f9a-176">Если он имеет дополнительные члены начала синхронизации hello первый раз, группа hello не синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="73f9a-176">If it has more members before synchronization starts hello first time, hello group is not synchronized.</span></span>
  * <span data-ttu-id="73f9a-177">Если из увеличение hello количество элементов, когда он изначально был создан, затем при достижении 50 000 членов, он прекращает синхронизацию пока hello членства число не меньше 50 000.</span><span class="sxs-lookup"><span data-stu-id="73f9a-177">If hello number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until hello membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="73f9a-178">Примечание: счетчик 50 000 членства hello также обеспечивается Azure AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-178">Note: hello 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="73f9a-179">Вы не может toosynchronize групп, имеющих несколько членов, даже если изменить или удалить это правило.</span><span class="sxs-lookup"><span data-stu-id="73f9a-179">You are not able toosynchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="73f9a-180">Если группа hello **группы рассылки**, то система также должна быть включена поддержка почты.</span><span class="sxs-lookup"><span data-stu-id="73f9a-180">If hello group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="73f9a-181">Сведения о принудительном применении этого правила см. разделе [Стандартные правила: объект-контакт](#contact-out-of-box-rules).</span><span class="sxs-lookup"><span data-stu-id="73f9a-181">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="73f9a-182">следующие объекты группы Hello, **не** синхронизированы tooAzure AD:</span><span class="sxs-lookup"><span data-stu-id="73f9a-182">hello following group objects are **not** synchronized tooAzure AD:</span></span>

* <span data-ttu-id="73f9a-183">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-183">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="73f9a-184">Убедитесь, многие объекты out-of-box в Active Directory, такие как группы hello встроенной учетной записи администратора, не синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="73f9a-184">Ensure many out-of-box objects in Active Directory, such as hello built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="73f9a-185">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-185">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="73f9a-186">Устаревшие группы, используемые DirSync.</span><span class="sxs-lookup"><span data-stu-id="73f9a-186">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="73f9a-187">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-187">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="73f9a-188">Группа ролей.</span><span class="sxs-lookup"><span data-stu-id="73f9a-188">Role Group.</span></span>
* <span data-ttu-id="73f9a-189">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-189">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="73f9a-190">Не синхронизируйте объекты, являющиеся жертвами репликации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-190">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="73f9a-191">Стандартные правила: ForeignSecurityPrincipal</span><span class="sxs-lookup"><span data-stu-id="73f9a-191">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="73f9a-192">FSP соединяются слишком «все» (\*) объекта в метавселенной hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-192">FSPs are joined too"any" (\*) object in hello metaverse.</span></span> <span data-ttu-id="73f9a-193">В действительности это присоединение происходит только для пользователей и групп безопасности.</span><span class="sxs-lookup"><span data-stu-id="73f9a-193">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="73f9a-194">Такая конфигурация гарантирует, что членство между лесами будет разрешено и правильно представлено в Azure AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-194">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="73f9a-195">Стандартные правила: объект-компьютер</span><span class="sxs-lookup"><span data-stu-id="73f9a-195">Computer out-of-box rules</span></span>
<span data-ttu-id="73f9a-196">Объект-компьютер должен отвечать после синхронизации toobe hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-196">A computer object must satisfy hello following toobe synchronized:</span></span>

* <span data-ttu-id="73f9a-197">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="73f9a-197">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="73f9a-198">Этот атрибут заполняют только компьютеры с Windows 10.</span><span class="sxs-lookup"><span data-stu-id="73f9a-198">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="73f9a-199">Синхронизируются все объекты-компьютеры со значением для этого атрибута.</span><span class="sxs-lookup"><span data-stu-id="73f9a-199">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-hello-out-of-box-rules-scenario"></a><span data-ttu-id="73f9a-200">Основные сведения о сценарии правила out-of-box hello</span><span class="sxs-lookup"><span data-stu-id="73f9a-200">Understanding hello out-of-box rules scenario</span></span>
<span data-ttu-id="73f9a-201">В этом примере мы используем развертывание с одним лесом учетных записей (A), одним лесом ресурсов (R) и одним каталогом Azure AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-201">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![Рисунок с описанием сценария](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="73f9a-203">В этой конфигурации предполагается, что учетная запись включена в лесу учетных записей hello и отключенной учетной записи в лесу ресурсов hello с привязанным почтовым ящиком.</span><span class="sxs-lookup"><span data-stu-id="73f9a-203">In this configuration, it is assumed there is an enabled account in hello account forest and a disabled account in hello resource forest with a linked mailbox.</span></span>

<span data-ttu-id="73f9a-204">Наша цель hello конфигурации по умолчанию является:</span><span class="sxs-lookup"><span data-stu-id="73f9a-204">Our goal with hello default configuration is:</span></span>

* <span data-ttu-id="73f9a-205">Связанные атрибуты в toosign синхронизируются из леса hello с учетной записью hello включена.</span><span class="sxs-lookup"><span data-stu-id="73f9a-205">Attributes related toosign-in are synchronized from hello forest with hello enabled account.</span></span>
* <span data-ttu-id="73f9a-206">Атрибуты, которые можно найти в глобальном списке адресов (глобальный список адресов) hello синхронизируются из леса hello с почтовым ящиком hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-206">Attributes that can be found in hello GAL (Global Address List) are synchronized from hello forest with hello mailbox.</span></span> <span data-ttu-id="73f9a-207">Если ни одного почтового ящика нет, используется любой другой лес.</span><span class="sxs-lookup"><span data-stu-id="73f9a-207">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="73f9a-208">Если найден связанный почтовый ящик hello связанного включенную учетную запись необходимо найти, чтобы tooAzure toobe экспортировать hello объекта AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-208">If a linked mailbox is found, hello linked enabled account must be found for hello object toobe exported tooAzure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="73f9a-209">Редактор правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-209">Synchronization Rule Editor</span></span>
<span data-ttu-id="73f9a-210">Hello конфигурации можно просмотреть и изменить с помощью средства hello редактор правил синхронизации (SRE) и tooit ярлык можно найти в меню "Пуск" hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-210">hello configuration can be viewed and changed with hello tool Synchronization Rules Editor (SRE) and a shortcut tooit can be found in hello start menu.</span></span>

![Значок редактора правил синхронизации](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="73f9a-212">Hello SRE — средство набора ресурсов и он установлен с помощью Azure AD Connect sync. возможности toostart toobe, необходимо быть членом группы ADSyncAdmins hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-212">hello SRE is a resource kit tool and it is installed with Azure AD Connect sync. toobe able toostart it, you must be a member of hello ADSyncAdmins group.</span></span> <span data-ttu-id="73f9a-213">При запуске редактора вы увидите примерно следующее:</span><span class="sxs-lookup"><span data-stu-id="73f9a-213">When it starts, you see something like this:</span></span>

![Входящие правила синхронизации](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="73f9a-215">Эта панель содержит все правила синхронизации, содержащиеся в вашей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-215">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="73f9a-216">Каждая строка в таблице hello представляет собой правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-216">Each line in hello table is one Synchronization Rule.</span></span> <span data-ttu-id="73f9a-217">toohello слева в списке типов правил, hello указаны два различных типа: входящих и исходящих подключений.</span><span class="sxs-lookup"><span data-stu-id="73f9a-217">toohello left under Rule Types, hello two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="73f9a-218">Входящие и исходящие из представления "hello" hello метавселенной.</span><span class="sxs-lookup"><span data-stu-id="73f9a-218">Inbound and Outbound is from hello view of hello metaverse.</span></span> <span data-ttu-id="73f9a-219">Используется главным образом toofocus переход на hello правила в этом обзоре для входящих подключений.</span><span class="sxs-lookup"><span data-stu-id="73f9a-219">You are mainly going toofocus on hello inbound rules in this overview.</span></span> <span data-ttu-id="73f9a-220">Hello фактический список правил синхронизации зависит от схемы обнаружено hello в AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-220">hello actual list of Synchronization Rules depends on hello detected schema in AD.</span></span> <span data-ttu-id="73f9a-221">На приведенном выше рисунке hello hello от имени учетной записи (fabrikamonline.com) лес не имеет все службы, такие как Exchange и Lync и правила синхронизации не были созданы для этих служб.</span><span class="sxs-lookup"><span data-stu-id="73f9a-221">In hello picture above, hello account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="73f9a-222">Тем не менее в лесу ресурсов hello (res.fabrikamonline.com) правила синхронизации найти для этих служб.</span><span class="sxs-lookup"><span data-stu-id="73f9a-222">However, in hello resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="73f9a-223">содержимое Hello правил hello отличается в зависимости от обнаруженной версии hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-223">hello content of hello rules is different depending on hello version detected.</span></span> <span data-ttu-id="73f9a-224">Например, в развертывании с Exchange 2013 создается больше правил для потоков атрибутов, чем в развертывании с Exchange 2010 или Exchange 2007.</span><span class="sxs-lookup"><span data-stu-id="73f9a-224">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="73f9a-225">Правило синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-225">Synchronization Rule</span></span>
<span data-ttu-id="73f9a-226">Правило синхронизации является объектом конфигурации с набором атрибутов, передаваемых при удовлетворении условия.</span><span class="sxs-lookup"><span data-stu-id="73f9a-226">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="73f9a-227">Кроме того, он используется toodescribe как объект в пространство соединителя имеет связанные tooan объекта в метавселенной hello, известный как **соединения** или **соответствует**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-227">It is also used toodescribe how an object in a connector space is related tooan object in hello metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="73f9a-228">Hello правила синхронизации имеют более высокий приоритет значение, указывающее, как они связаны другие tooeach.</span><span class="sxs-lookup"><span data-stu-id="73f9a-228">hello Synchronization Rules have a precedence value indicating how they relate tooeach other.</span></span> <span data-ttu-id="73f9a-229">Правило синхронизации с более низким числовым значением имеет более высокий приоритет, и в возникновении конфликта потоков атрибутов высокий приоритет wins hello разрешения конфликтов.</span><span class="sxs-lookup"><span data-stu-id="73f9a-229">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins hello conflict resolution.</span></span>

<span data-ttu-id="73f9a-230">В качестве примера рассмотрим правило синхронизации hello **в from AD – User AccountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-230">As an example, look at hello Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="73f9a-231">Отметим эту строку в hello SRE и выберите **изменить**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-231">Mark this line in hello SRE and select **Edit**.</span></span>

<span data-ttu-id="73f9a-232">Поскольку это правило является out-of-box, появится предупреждение при открытии hello правило.</span><span class="sxs-lookup"><span data-stu-id="73f9a-232">Since this rule is an out-of-box rule, you receive a warning when you open hello rule.</span></span> <span data-ttu-id="73f9a-233">Не следует вносить любые [изменяет правила tooout-of-box](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), поэтому вам предлагают свои намерения являются.</span><span class="sxs-lookup"><span data-stu-id="73f9a-233">You should not make any [changes tooout-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="73f9a-234">В этом случае требуется только tooview hello правило.</span><span class="sxs-lookup"><span data-stu-id="73f9a-234">In this case, you only want tooview hello rule.</span></span> <span data-ttu-id="73f9a-235">Выберите вариант **Нет**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-235">Select **No**.</span></span>

![Предупреждение правил синхронизации](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="73f9a-237">Правило синхронизации имеет четыре раздела конфигурации: описание, преобразование, правила объединения и фильтр области действия.</span><span class="sxs-lookup"><span data-stu-id="73f9a-237">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="73f9a-238">Описание</span><span class="sxs-lookup"><span data-stu-id="73f9a-238">Description</span></span>
<span data-ttu-id="73f9a-239">Первый раздел Hello основные сведения, такие как имя и описание.</span><span class="sxs-lookup"><span data-stu-id="73f9a-239">hello first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="73f9a-240">Вкладка "Описание" в редакторе правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-240">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="73f9a-241">Здесь также отображаются сведения о том, какие подключен системе оно применяется к подключенной системы, это правило относится к, что тип объекта в hello и hello типа объекта метавселенной.</span><span class="sxs-lookup"><span data-stu-id="73f9a-241">You also find information about which connected system this rule is related to, which object type in hello connected system it applies to, and hello metaverse object type.</span></span> <span data-ttu-id="73f9a-242">Тип объекта метавселенной Hello при всегда независимо от лица hello тип исходного объекта является пользователь, iNetOrgPerson или контакт.</span><span class="sxs-lookup"><span data-stu-id="73f9a-242">hello metaverse object type is always person regardless when hello source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="73f9a-243">Тип объекта метавселенной Hello не следует менять, поэтому он создан как универсальный тип.</span><span class="sxs-lookup"><span data-stu-id="73f9a-243">hello metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="73f9a-244">можно задать тип связи Hello tooJoin, StickyJoin или Provision.</span><span class="sxs-lookup"><span data-stu-id="73f9a-244">hello Link Type can be set tooJoin, StickyJoin, or Provision.</span></span> <span data-ttu-id="73f9a-245">Этот параметр работает вместе с раздела правила присоединения hello и рассматривается далее.</span><span class="sxs-lookup"><span data-stu-id="73f9a-245">This setting works together with hello Join Rules section and is covered later.</span></span>

<span data-ttu-id="73f9a-246">Кроме того, вы видите, что это правило синхронизации используется для синхронизации паролей. Если пользователь входит в область для этого правила синхронизации, hello пароль будет синхронизирован из локальной toocloud (при условии, что включена функция синхронизации паролей hello).</span><span class="sxs-lookup"><span data-stu-id="73f9a-246">You can also see that this sync rule is used for password sync. If a user is in scope for this sync rule, hello password is synchronized from on-premises toocloud (assuming you have enabled hello password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="73f9a-247">Фильтр области действия</span><span class="sxs-lookup"><span data-stu-id="73f9a-247">Scoping filter</span></span>
<span data-ttu-id="73f9a-248">раздел фильтр области Hello при используется tooconfigure должно применяться правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-248">hello Scoping Filter section is used tooconfigure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="73f9a-249">Поскольку hello имя правила синхронизации, вы видите hello указывает, должно применяться только к включенным пользователям, область hello настраивается так атрибут hello AD **userAccountControl** должен установлен hello бит 2.</span><span class="sxs-lookup"><span data-stu-id="73f9a-249">Since hello name of hello Synchronization Rule you are looking at indicates it should only be applied for enabled users, hello scope is configured so hello AD attribute **userAccountControl** must not have hello bit 2 set.</span></span> <span data-ttu-id="73f9a-250">Модуль синхронизации hello выполняет поиск пользователя в AD, применяется эта синхронизация правило, если **userAccountControl** задано toohello десятичное значение 512 (включенный обычный пользователь).</span><span class="sxs-lookup"><span data-stu-id="73f9a-250">When hello sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set toohello decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="73f9a-251">Не применяется правило hello Если hello пользователя **userAccountControl** задать too514 (выключенный обычный пользователь).</span><span class="sxs-lookup"><span data-stu-id="73f9a-251">It does not apply hello rule when hello user has **userAccountControl** set too514 (disabled normal user).</span></span>

![<span data-ttu-id="73f9a-252">Вкладка "Определение области" в редакторе правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-252">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="73f9a-253">Hello фильтр области имеет группы и предложения, которые могут быть вложенными.</span><span class="sxs-lookup"><span data-stu-id="73f9a-253">hello scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="73f9a-254">Все предложения в группе должны быть удовлетворены для tooapply правила синхронизации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-254">All clauses inside a group must be satisfied for a Synchronization Rule tooapply.</span></span> <span data-ttu-id="73f9a-255">Если определено несколько групп, по крайней мере одна группа должны быть удовлетворены для tooapply правило hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-255">When multiple groups are defined, then at least one group must be satisfied for hello rule tooapply.</span></span> <span data-ttu-id="73f9a-256">Это значит, что между группами вычисляется логический оператор OR, а внутри группы — логический оператор AND.</span><span class="sxs-lookup"><span data-stu-id="73f9a-256">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="73f9a-257">Примером такой конфигурации можно найти в hello исходящие правила синхронизации **Out tooAAD – Group Join**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-257">An example of this configuration can be found in hello outbound Synchronization Rule **Out tooAAD – Group Join**.</span></span> <span data-ttu-id="73f9a-258">Существуют несколько групп фильтров синхронизации, например для групп безопасности (`securityEnabled EQUAL True`) и для групп рассылки (`securityEnabled EQUAL False`).</span><span class="sxs-lookup"><span data-stu-id="73f9a-258">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="73f9a-259">Вкладка "Определение области" в редакторе правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-259">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="73f9a-260">Это правило не используется toodefine группы должно быть подготовленных tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-260">This rule is used toodefine which Groups should be provisioned tooAzure AD.</span></span> <span data-ttu-id="73f9a-261">Группы распространения должны быть синхронизированы с Azure AD toobe включена поддержка почты, но для групп безопасности сообщения электронной почты не требуется.</span><span class="sxs-lookup"><span data-stu-id="73f9a-261">Distribution Groups must be mail enabled toobe synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="73f9a-262">Правила объединения</span><span class="sxs-lookup"><span data-stu-id="73f9a-262">Join rules</span></span>
<span data-ttu-id="73f9a-263">Третий раздел Hello является tooconfigure используется как объекты в пространство соединителя hello связаны tooobjects в метавселенной hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-263">hello third section is used tooconfigure how objects in hello connector space relate tooobjects in hello metaverse.</span></span> <span data-ttu-id="73f9a-264">Hello правило бы посмотреть в более ранних версий не имеет какой-либо настройки правил присоединения, вместо являются toolook переход на **в from AD – User Join**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-264">hello rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going toolook at **In from AD – User Join**.</span></span>

![<span data-ttu-id="73f9a-265">Вкладка Join rules (Правила объединения) в редакторе правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-265">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="73f9a-266">содержимое Hello hello правилом присоединения, зависит от сопоставления параметра, выбранного в мастере установки hello hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-266">hello content of hello join rule depends on hello matching option selected in hello installation wizard.</span></span> <span data-ttu-id="73f9a-267">Правило входящего трафика hello оценка начинается с объекта в пространстве соединителя источника hello и каждой группы в hello правила присоединения оценивается последовательно.</span><span class="sxs-lookup"><span data-stu-id="73f9a-267">For an inbound rule, hello evaluation starts with an object in hello source connector space and each group in hello join rules is evaluated in sequence.</span></span> <span data-ttu-id="73f9a-268">Если объект источника является вычисленное toomatch ровно один объект в Здравствуйте метавселенной с помощью одного из правил присоединения hello, hello объекты присоединены.</span><span class="sxs-lookup"><span data-stu-id="73f9a-268">If a source object is evaluated toomatch exactly one object in hello metaverse using one of hello join rules, hello objects are joined.</span></span> <span data-ttu-id="73f9a-269">Если нет соответствия оценки всех правил, используется hello тип ссылки на странице описания hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-269">If all rules have been evaluated and there is no match, then hello Link Type on hello description page is used.</span></span> <span data-ttu-id="73f9a-270">Если эта конфигурация задана слишком**подготовки**, то на конечном hello hello метавселенной создается новый объект.</span><span class="sxs-lookup"><span data-stu-id="73f9a-270">If this configuration is set too**Provision**, then a new object is created in hello target, hello metaverse.</span></span> <span data-ttu-id="73f9a-271">новый объект метавселенной toohello называется также слишком tooprovision**проекта** toohello объект метавселенной.</span><span class="sxs-lookup"><span data-stu-id="73f9a-271">tooprovision a new object toohello metaverse is also known as too**project** an object toohello metaverse.</span></span>

<span data-ttu-id="73f9a-272">Правила присоединения Hello вычисляются только один раз.</span><span class="sxs-lookup"><span data-stu-id="73f9a-272">hello join rules are only evaluated once.</span></span> <span data-ttu-id="73f9a-273">Когда объект пространства соединителя и объект метавселенной присоединены, они остаются присоединены к домену, при условии, что пока удовлетворяется область hello hello правила синхронизации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-273">When a connector space object and a metaverse object are joined, they remain joined as long as hello scope of hello Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="73f9a-274">При вычислении правил синхронизации в области действия должно находиться только одно правило синхронизации с определенными правилами объединения.</span><span class="sxs-lookup"><span data-stu-id="73f9a-274">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="73f9a-275">Если для одного объекта найдено несколько правил синхронизации с правилами объединения, выдается ошибка.</span><span class="sxs-lookup"><span data-stu-id="73f9a-275">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="73f9a-276">По этой причине рекомендуется hello является toohave только одно правило синхронизации с соединением, определенное при нескольких правил синхронизации находятся в области видимости для объекта.</span><span class="sxs-lookup"><span data-stu-id="73f9a-276">For this reason, hello best practice is toohave only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="73f9a-277">В конфигурации out-of-box hello для синхронизации Azure AD Connect, эти правила можно найти, просмотрев имя hello и найти те словом hello **Join** конце hello имя hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-277">In hello out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at hello name and find those with hello word **Join** at hello end of hello name.</span></span> <span data-ttu-id="73f9a-278">Правило синхронизации без определенных правил присоединения применяется потоки атрибутов hello, когда другим правилом синхронизации объединены hello объекты или подготовлен новый объект в целевой hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-278">A Synchronization Rule without any join rules defined applies hello attribute flows when another Synchronization Rule joined hello objects together or provisioned a new object in hello target.</span></span>

<span data-ttu-id="73f9a-279">Если взглянуть на рисунке hello выше, можно обнаружить hello правила toojoin **objectSID** с **msExchMasterAccountSid** (обмен) и **msRTCSIP OriginatorSid** () Lync), являющийся ожидать в топологии леса ресурсов учетной записи.</span><span class="sxs-lookup"><span data-stu-id="73f9a-279">If you look at hello picture above, you can see that hello rule is trying toojoin **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="73f9a-280">Найти hello такие же правила для каждого из лесов.</span><span class="sxs-lookup"><span data-stu-id="73f9a-280">You find hello same rule on all forests.</span></span> <span data-ttu-id="73f9a-281">Hello предполагается, что каждый лес может быть ресурсов или учетной записи леса.</span><span class="sxs-lookup"><span data-stu-id="73f9a-281">hello assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="73f9a-282">Эта конфигурация также работает в том случае, если у вас есть учетные записи, проживающих в пределах одного леса и не имеют toobe присоединен.</span><span class="sxs-lookup"><span data-stu-id="73f9a-282">This configuration also works if you have accounts that live in a single forest and do not have toobe joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="73f9a-283">Преобразования</span><span class="sxs-lookup"><span data-stu-id="73f9a-283">Transformations</span></span>
<span data-ttu-id="73f9a-284">Hello раздел преобразований определяет все потоки атрибутов, которые применяются toohello целевого объекта, когда hello объекты присоединены и удовлетворяется условие фильтра области hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-284">hello transformation section defines all attribute flows that apply toohello target object when hello objects are joined and hello scope filter is satisfied.</span></span> <span data-ttu-id="73f9a-285">Вернемся toohello **в from AD – User AccountEnabled** правило синхронизации найти hello следующие преобразования:</span><span class="sxs-lookup"><span data-stu-id="73f9a-285">Going back toohello **In from AD – User AccountEnabled** Synchronization Rule, you find hello following transformations:</span></span>

![<span data-ttu-id="73f9a-286">Вкладка "Преобразования" в редакторе правил синхронизации</span><span class="sxs-lookup"><span data-stu-id="73f9a-286">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="73f9a-287">tooput эту настройку в контексте, при развертывании леса ресурсов учетной записи является ожидаемым toofind включенную учетную запись в лесу учетных записей hello и отключенной учетной записи в ресурсе hello леса с параметрами Exchange и Lync.</span><span class="sxs-lookup"><span data-stu-id="73f9a-287">tooput this configuration in context, in an Account-Resource forest deployment, it is expected toofind an enabled account in hello account forest and a disabled account in hello resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="73f9a-288">Hello вы видите правило синхронизации содержит атрибуты hello, необходимые для входа в систему, и эти атрибуты должны поступать из леса hello которого учетная запись включена.</span><span class="sxs-lookup"><span data-stu-id="73f9a-288">hello Synchronization Rule you are looking at contains hello attributes required for sign-in and these attributes should flow from hello forest where there is an enabled account.</span></span> <span data-ttu-id="73f9a-289">Эти потоки атрибутов вместе помещаются в одно правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-289">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="73f9a-290">Преобразования могут быть разных типов: константа, прямое или выражение.</span><span class="sxs-lookup"><span data-stu-id="73f9a-290">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="73f9a-291">Поток-константа всегда передает жестко закодированное значение.</span><span class="sxs-lookup"><span data-stu-id="73f9a-291">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="73f9a-292">В случае hello выше, он всегда задает значение hello **True** в атрибут метавселенной hello с именем **accountEnabled**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-292">In hello case above, it always sets hello value **True** in hello metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="73f9a-293">Прямой поток всегда проходит hello значения атрибута hello в целевой атрибут toohello hello источника как-является.</span><span class="sxs-lookup"><span data-stu-id="73f9a-293">A direct flow always flows hello value of hello attribute in hello source toohello target attribute as-is.</span></span>
* <span data-ttu-id="73f9a-294">Третий тип потока Hello — выражение, которое позволяет выполнять более сложных конфигураций.</span><span class="sxs-lookup"><span data-stu-id="73f9a-294">hello third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="73f9a-295">язык выражений Hello — VBA (Visual Basic для приложений), поэтому пользователи с опытом в Microsoft Office или VBScript распознает формат hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-295">hello expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize hello format.</span></span> <span data-ttu-id="73f9a-296">Атрибуты заключаются в квадратные скобки: [attributeName].</span><span class="sxs-lookup"><span data-stu-id="73f9a-296">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="73f9a-297">Имена атрибутов и имена функций учитывают регистр, но hello редактор правил синхронизации вычисляет выражения hello и выдает предупреждение, если выражение hello не является допустимым.</span><span class="sxs-lookup"><span data-stu-id="73f9a-297">Attribute names and function names are case-sensitive, but hello Synchronization Rules Editor evaluates hello expressions and provide a warning if hello expression is not valid.</span></span> <span data-ttu-id="73f9a-298">Все выражения выражаются в одной строке с вложенными функциями.</span><span class="sxs-lookup"><span data-stu-id="73f9a-298">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="73f9a-299">tooshow hello power языка конфигурации hello, вот hello потока для pwdLastSet, но со вставленными дополнительными комментариями:</span><span class="sxs-lookup"><span data-stu-id="73f9a-299">tooshow hello power of hello configuration language, here is hello flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (hello evaluation for IIF) Is hello attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (hello True part of IIF) If it is, then from right tooleft, convert hello AD time format tooa .Net datetime, change it toohello time format used by Azure AD, and finally convert it tooa string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (hello False part of IIF) Nothing toocontribute
NULL
)
```

<span data-ttu-id="73f9a-300">В разделе [выражения декларативной подготовки основные сведения о](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) Дополнительные сведения о языке выражений hello потоков атрибутов.</span><span class="sxs-lookup"><span data-stu-id="73f9a-300">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on hello expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="73f9a-301">Приоритет</span><span class="sxs-lookup"><span data-stu-id="73f9a-301">Precedence</span></span>
<span data-ttu-id="73f9a-302">Вы рассмотрели некоторые отдельные правила синхронизации, но правила hello совместной работы в конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-302">You have now looked at some individual Synchronization Rules, but hello rules work together in hello configuration.</span></span> <span data-ttu-id="73f9a-303">В некоторых случаях значение атрибута были получены из нескольких toohello правила синхронизации того же целевого атрибута.</span><span class="sxs-lookup"><span data-stu-id="73f9a-303">In some cases, an attribute value is contributed from multiple synchronization rules toohello same target attribute.</span></span> <span data-ttu-id="73f9a-304">В этом случае приоритет атрибута является используемым toodetermine побеждает какой атрибут.</span><span class="sxs-lookup"><span data-stu-id="73f9a-304">In this case, attribute precedence is used toodetermine which attribute wins.</span></span> <span data-ttu-id="73f9a-305">В качестве примера рассмотрим атрибут sourceAnchor hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-305">As an example, look at hello attribute sourceAnchor.</span></span> <span data-ttu-id="73f9a-306">Этот атрибут является важный атрибут toobe может toosign в tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-306">This attribute is an important attribute toobe able toosign in tooAzure AD.</span></span> <span data-ttu-id="73f9a-307">Потоки для этого атрибута есть в двух различных правилах синхронизации: **In from AD – User AccountEnabled** (Поступление из AD — учетная запись включена) и **In from AD – User Common** (Поступление из AD — все пользователи).</span><span class="sxs-lookup"><span data-stu-id="73f9a-307">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="73f9a-308">Из-за tooSynchronization приоритет правил атрибут sourceAnchor hello были получены из леса hello с действующей учетной записью сначала при наличии нескольких объекту метавселенной присоединены к домену toohello объектов.</span><span class="sxs-lookup"><span data-stu-id="73f9a-308">Due tooSynchronization Rule precedence, hello sourceAnchor attribute is contributed from hello forest with an enabled account first when there are several objects joined toohello metaverse object.</span></span> <span data-ttu-id="73f9a-309">Если имеются учетные записи не включен, то hello синхронизации подсистемой hello собирательное правило синхронизации **в from AD – User Common**.</span><span class="sxs-lookup"><span data-stu-id="73f9a-309">If there are no enabled accounts, then hello sync engine uses hello catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="73f9a-310">Эта конфигурация гарантирует, что атрибут sourceAnchor будет присутствовать даже в отключенных учетных записях.</span><span class="sxs-lookup"><span data-stu-id="73f9a-310">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![Входящие правила синхронизации](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="73f9a-312">Hello приоритет правил синхронизации задается в группах приветствия мастера установки.</span><span class="sxs-lookup"><span data-stu-id="73f9a-312">hello precedence for Synchronization Rules is set in groups by hello installation wizard.</span></span> <span data-ttu-id="73f9a-313">Все правила в группе имеют hello таким же именем, но они являются каталогами подключенных toodifferent подключен.</span><span class="sxs-lookup"><span data-stu-id="73f9a-313">All rules in a group have hello same name, but they are connected toodifferent connected directories.</span></span> <span data-ttu-id="73f9a-314">Мастер установки Hello предоставляет hello правило **в from AD – User Join** наивысший приоритет и он проходит по всем подключенным каталогам AD.</span><span class="sxs-lookup"><span data-stu-id="73f9a-314">hello installation wizard gives hello rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="73f9a-315">Затем он продолжает hello следующей группой правил согласно заранее определенному порядку.</span><span class="sxs-lookup"><span data-stu-id="73f9a-315">It then continues with hello next groups of rules in a predefined order.</span></span> <span data-ttu-id="73f9a-316">Внутри группы hello правила добавляются в hello порядок приветствия соединителей были добавлены в мастере hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-316">Inside a group, hello rules are added in hello order hello Connectors were added in hello wizard.</span></span> <span data-ttu-id="73f9a-317">Если через приветствия мастера добавления другого соединителя, переупорядочиваются правила синхронизации hello и правила нового соединителя hello вставляться последними в каждой группе.</span><span class="sxs-lookup"><span data-stu-id="73f9a-317">If another Connector is added through hello wizard, hello Synchronization Rules are reordered and hello new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="73f9a-318">Сборка</span><span class="sxs-lookup"><span data-stu-id="73f9a-318">Putting it all together</span></span>
<span data-ttu-id="73f9a-319">Мы получили достаточно информации о toounderstand может toobe правила синхронизации, как конфигурации hello работает с hello различными правилами синхронизации.</span><span class="sxs-lookup"><span data-stu-id="73f9a-319">We now know enough about Synchronization Rules toobe able toounderstand how hello configuration works with hello different Synchronization Rules.</span></span> <span data-ttu-id="73f9a-320">Если взглянуть на пользователей hello атрибуты, которые являются составлены toohello метавселенной, hello правила применяются в hello последовательностью:</span><span class="sxs-lookup"><span data-stu-id="73f9a-320">If you look at a user and hello attributes that are contributed toohello metaverse, hello rules are applied in hello following order:</span></span>

| <span data-ttu-id="73f9a-321">Имя</span><span class="sxs-lookup"><span data-stu-id="73f9a-321">Name</span></span> | <span data-ttu-id="73f9a-322">Комментарий</span><span class="sxs-lookup"><span data-stu-id="73f9a-322">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="73f9a-323">In from AD – User Join</span><span class="sxs-lookup"><span data-stu-id="73f9a-323">In from AD – User Join</span></span> |<span data-ttu-id="73f9a-324">Правило для присоединения к метавселенной объектов из пространства соединителя.</span><span class="sxs-lookup"><span data-stu-id="73f9a-324">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="73f9a-325">Поступление из AD — учетная запись включена</span><span class="sxs-lookup"><span data-stu-id="73f9a-325">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="73f9a-326">Атрибуты, необходимые для входа в tooAzure AD и Office 365.</span><span class="sxs-lookup"><span data-stu-id="73f9a-326">Attributes required for sign-in tooAzure AD and Office 365.</span></span> <span data-ttu-id="73f9a-327">Нам нужны эти атрибуты из учетной записи включена hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-327">We want these attributes from hello enabled account.</span></span> |
| <span data-ttu-id="73f9a-328">Поступление из AD — все пользователи с сервера Exchange</span><span class="sxs-lookup"><span data-stu-id="73f9a-328">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="73f9a-329">Атрибуты, найденные в глобальном списке адресов hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-329">Attributes found in hello Global Address List.</span></span> <span data-ttu-id="73f9a-330">Предполагается, что hello данные с наилучшим качеством находятся в лесу hello, в котором найден почтовый ящик пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-330">We assume hello data quality is best in hello forest where we have found hello user’s mailbox.</span></span> |
| <span data-ttu-id="73f9a-331">In from AD – User Common</span><span class="sxs-lookup"><span data-stu-id="73f9a-331">In from AD – User Common</span></span> |<span data-ttu-id="73f9a-332">Атрибуты, найденные в глобальном списке адресов hello.</span><span class="sxs-lookup"><span data-stu-id="73f9a-332">Attributes found in hello Global Address List.</span></span> <span data-ttu-id="73f9a-333">В случае, если не удалось найти почтовый ящик, присоединенный объект могут способствовать hello значение атрибута.</span><span class="sxs-lookup"><span data-stu-id="73f9a-333">In case we didn’t find a mailbox, any other joined object can contribute hello attribute value.</span></span> |
| <span data-ttu-id="73f9a-334">Поступление из AD — пользователь Exchange</span><span class="sxs-lookup"><span data-stu-id="73f9a-334">In from AD – User Exchange</span></span> |<span data-ttu-id="73f9a-335">Правило существует, только если обнаружена платформа Exchange.</span><span class="sxs-lookup"><span data-stu-id="73f9a-335">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="73f9a-336">Передает все атрибуты инфраструктуры Exchange.</span><span class="sxs-lookup"><span data-stu-id="73f9a-336">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="73f9a-337">Поступление из AD — пользователь Lync</span><span class="sxs-lookup"><span data-stu-id="73f9a-337">In from AD – User Lync</span></span> |<span data-ttu-id="73f9a-338">Правило существует, только если обнаружена платформа Lync.</span><span class="sxs-lookup"><span data-stu-id="73f9a-338">Only exists if Lync has been detected.</span></span> <span data-ttu-id="73f9a-339">Передает все атрибуты инфраструктуры Lync.</span><span class="sxs-lookup"><span data-stu-id="73f9a-339">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="73f9a-340">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="73f9a-340">Next steps</span></span>
* <span data-ttu-id="73f9a-341">Дополнительные сведения о модели конфигурации hello в [декларативной подготовки основные сведения о](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span><span class="sxs-lookup"><span data-stu-id="73f9a-341">Read more about hello configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="73f9a-342">Дополнительные сведения о языке выражений hello в [выражения декларативной подготовки основные сведения о](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span><span class="sxs-lookup"><span data-stu-id="73f9a-342">Read more about hello expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="73f9a-343">Продолжить чтение, как работает конфигурация hello в [общее представление о пользователях и контактах](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="73f9a-343">Continue reading how hello out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="73f9a-344">Просмотреть, как toomake практическая изменяются с помощью декларативной подготовки в [как конфигурация по умолчанию toomake toohello изменение](active-directory-aadconnectsync-change-the-configuration.md).</span><span class="sxs-lookup"><span data-stu-id="73f9a-344">See how toomake a practical change using declarative provisioning in [How toomake a change toohello default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="73f9a-345">**Обзорные статьи**</span><span class="sxs-lookup"><span data-stu-id="73f9a-345">**Overview topics**</span></span>

* [<span data-ttu-id="73f9a-346">Службы синхронизации Azure AD Connect: общие сведений о синхронизации и ее настройка</span><span class="sxs-lookup"><span data-stu-id="73f9a-346">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="73f9a-347">Интеграция локальных удостоверений с Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="73f9a-347">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

