---
title: "Использование Azure AD Connect при наличии существующего клиента Azure AD | Документация Майкрософт"
description: "В этом разделе описывается, как toouse подключаться, если у вас есть существующий клиент Azure AD."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f7b166e9e85c1f03330e8e0074d4afa4036738c2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a>Azure AD Connect: если имеется существующий клиент
Большинство разделов hello по как предполагает toouse Azure AD Connect, можно начать с нового Azure клиента AD, и что пользователи не и другие объекты в ней. Но если вы начали с клиента Azure AD, заполненный пользователей и других объектов, а теперь хотите toouse Connect, а затем этот раздел предназначен для вас.

## <a name="hello-basics"></a>Основы Hello
Объект в Azure AD либо управляется в облаке hello (Azure AD) или в локальной среде. Невозможно управлять одними атрибутами отдельного объекта в локальной среде, а другими — в Azure AD. Каждый объект имеет флаг, указывающий, где осуществляется hello объекта.

Некоторые пользователи локальных и других можно управлять в облаке hello. Распространенный сценарий для этой конфигурации — организация, состоящая из сотрудников отдела бухгалтерии и отдела продаж. Hello учета сотрудники имеют локальной учетной записи AD, но работников продаж hello этого не сделать, они имеют учетную запись в Azure AD. Будет удобно управлять одними пользователями в локальной среде, а другими — в Azure AD.

Если вы начали toomanage пользователей в Azure AD, которые также располагаются в локальной AD и позже будут toouse Connect, то существуют некоторые дополнительные проблемы, необходимые tooconsider.

## <a name="sync-with-existing-users-in-azure-ad"></a>Синхронизация с существующими пользователями в Azure AD
При установке Azure AD Connect и начать синхронизацию, hello службы синхронизации Azure AD (в Azure AD) выполняет проверку на каждый новый объект и повторите toofind существующие toomatch объекта. Для этого используются три атрибута: **userPrincipalName**, **proxyAddresses** и **sourceAnchor**/**immutableID**. Сопоставление по **userPrincipalName** и **proxyAddresses** называется **нестрогим сопоставлением**. Сопоставление по**sourceAnchor** называется **строгим сопоставлением**. Для hello **proxyAddresses** только hello значения с помощью атрибута **SMTP:**, является hello основной адрес электронной почты, используемый для вычисления hello.

соответствие Hello вычисляется только для новых объектов, поступающих от Connect. Если изменить существующий объект, чтобы он соответствовал какому-либо из этих атрибутов, то появится сообщение об ошибке.

Обнаружив Azure AD, где значения атрибута hello, hello объекта то же самое, объектом, находящимся из Connect и что она уже присутствует в Azure AD, то hello объекта в Azure AD, берется по строке подключения. Hello ранее управляемыми из облака объект помечен как управляемые локальные. Все атрибуты в Azure AD со значением в локальном AD заменяются значение hello в локальной среде. Hello исключение — когда атрибут имеет **NULL** значение в локальной среде. В этом случае значение hello в Azure AD остается, но может по-прежнему его изменить, только локально toosomething else.

> [!WARNING]
> Поскольку все атрибуты в Azure AD будет toobe перезаписать значение в локальной среде hello, убедитесь, что у вас есть хорошие данные локально. Например, если вы только использовали управляемый электронный адрес в Office 365 и не обновляли его в локальной среде AD DS, то будут потеряны все значения в Azure AD и Office 365, которые отсутствуют в AD DS.

> [!IMPORTANT]
> Если использовать синхронизацию паролей, которая всегда используется стандартные параметры, то пароль hello в Azure AD перезаписывается hello пароль в локальном AD. Если пользователи являются используется toomanage разные пароли, то вы должны tooinform их, должны использовать hello локальный пароль, при установке подключения.

предыдущий раздел Hello и предупреждение необходимо учитывать при планировании. Если внести много изменений были внесены в Azure AD, не отражаются в локальной службы AD DS, потребуется tooplan для toopopulate AD DS с hello обновление значения перед синхронизацией объектами с помощью Azure AD Connect.

Затем hello расстановке объектами с помощью программной match **sourceAnchor** добавляется toohello объекта в Azure AD, чтобы жесткий соответствия можно использовать позже.

### <a name="hard-match-vs-soft-match"></a>Строгое и нестрогое сопоставление
Для нового установленного экземпляра Connect нет практической разницы между строгим и нестрогим сопоставлением. Hello разница заключается в аварийном восстановлении. В случае потери сервера с Azure AD Connect можно повторно установить новый экземпляр без потери данных. Объект с sourceAnchor отправляется tooConnect во время первоначальной установки. Hello совпадения можно затем оценить клиентом hello (Azure AD Connect), который выполняется гораздо быстрее, чем это же hello в Azure AD. Строгое сопоставление оценивается Connect и Azure AD. Нестрогое сопоставление оценивается только Azure AD.

### <a name="other-objects-than-users"></a>Объекты, отличные от пользователей
Пользователи обычно имеют userPrincipalName и proxyAddresses, упрощение hello совпадения. Но у других объектов, таких как группы безопасности, их нет. В этом случае вы может соответствовать только на жестких сопоставление с использованием hello sourceAnchor. Hello sourceAnchor всегда является hello преобразовать Base64 **objectGUID** в локальной среде, необходимо обновить значение hello в Azure AD, при необходимости toomatch двух объектов. Hello sourceAnchor/immutableID могут обновляться только с помощью PowerShell, а не через порталы hello.

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a>Создание локальной службы Active Directory на основе данных в Azure AD
Некоторые клиенты начинают с облачного решения на основе Azure AD и не используют локальную среду AD. Позже tooconsume локальных ресурсов и их требуется toobuild локальной AD на основании данных Azure AD. В этом случае Azure AD Connect ничем не поможет. Не создает пользователей в локальной среде и не включает все возможности tooset hello пароль локального toohello отличается от используемого в Azure AD.

Если hello единственной причиной, почему планирование tooadd локальной AD — toosupport больших объектов (бизнес-приложения), то может быть целесообразно toouse [доменные службы Azure AD](../../active-directory-domain-services/index.md) вместо него.

## <a name="next-steps"></a>Дальнейшие действия
Узнайте больше об [интеграции локальных удостоверений с Azure Active Directory](active-directory-aadconnect.md).
