---
title: "Сквозная проверка подлинности в Azure AD Connect — смарт-блокировка | Документы Майкрософт"
description: "В этой статье описывается, как сквозная проверка подлинности Azure Active Directory (Azure AD) защищает учетные записи локальных от атак методом подбора пароля в облаке hello."
services: active-directory
keywords: "сквозная проверка подлинности azure ad connect, установка active directory, необходимые компоненты для azure ad, единый вход"
documentationcenter: 
author: swkrish
manager: femila
ms.assetid: 9f994aca-6088-40f5-b2cc-c753a4f41da7
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: billmath
ms.openlocfilehash: b02e315c3cc3eae00ca6408d735a416f34c2cdc3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-active-directory-pass-through-authentication-smart-lockout"></a>Сквозная проверка подлинности Azure Active Directory: смарт-блокировка

## <a name="overview"></a>Обзор

Azure AD обеспечивает защиту от атак методом подбора пароля и позволяет предотвратить потерю доступа пользователей к приложениям Office 365 и SaaS. Эта функция, которая называется **смарт-блокировкой**, поддерживается при входе с помощью сквозной проверки подлинности. Смарт-блокировки по умолчанию включена для всех клиентов и защиты своей учетной записи пользователя все время hello; Нет tooturn без необходимости его на.

Смарт-блокировка отслеживает неудачные попытки входа в систему и по достижении определенного **порогового значения блокировки** включает блокировку в течение заданного **периода блокировки**. Отклоняются все учетное попытки злоумышленника hello во время длительности блокировки hello. Если по-прежнему hello атаки, hello последующих Сбой попытки входа окончании hello продолжительность блокировки приведет к более длительности блокировки.

>[!NOTE]
>по умолчанию Hello пороговое значение блокировки — 10 неудачных попыток входа, а также по умолчанию hello, длительность блокировки, составляет 60 секунд.

Смарт-блокировки также различаются входы подлинность пользователей и от злоумышленников и только блокируются злоумышленники hello в большинстве случаев. Это не позволяет злоумышленникам намеренно заблокировать вход для настоящих пользователей. Мы используем за вход поведение, устройства пользователей & браузеры и другие сигналы toodistinguish между подлинность пользователей и злоумышленники. Мы постоянно улучшаем наши алгоритмы.

Поскольку сквозная проверка подлинности перенаправляет запросы на проверку пароля на вашей локальной Active Directory (AD), вам потребуется tooprevent злоумышленниками, блокировку учетных записей пользователей AD. Так как у вас есть собственные политики блокировки учетных записей AD (в частности, [ **пороговое значение блокировки** ](https://technet.microsoft.com/library/hh994574(v=ws.11).aspx) и [ **Сброс счетчика блокировки учетной записи после политики** ](https://technet.microsoft.com/library/hh994568(v=ws.11).aspx)), необходимо пороговое значение блокировки tooconfigure Azure AD и длительность блокировки соответствующим образом значения toofilter out атак в облаке hello, прежде чем они достигнут локальной AD.

>[!NOTE]
>возможность смарт-блокировки Hello предоставляется бесплатно и является _на_ по умолчанию для всех клиентов. Однако изменение порогового значения блокировки и блокировка значений с помощью Graph API Azure AD должна вашу лицензию клиента toohave по крайней мере один Azure AD Premium P2. Не требуется лицензия Azure AD Premium P2 _каждого пользователя_ tooget hello смарт-блокировку с проверкой подлинности к серверу.

tooensure что пользователей локальных учетных записей AD также защищены, требуется tooensure:

1.  Пороговое значение блокировки Azure AD _меньше_, чем пороговое значение блокировки учетных записей AD. Рекомендуется устанавливать значения hello таким образом, что пороговое значение блокировки учетной записи AD имеет по крайней мере два или три раза пороговое значение блокировки Azure AD.
2.  Продолжительность блокировки Azure AD (в секундах) _больше_, чем период сброса счетчика блокировки учетных записей AD (в минутах).

## <a name="verify-your-ad-account-lockout-policies"></a>Проверка политик блокировки учетных записей AD

Используйте следующие инструкции tooverify hello политик блокировки учетных записей AD:

1.  Откройте средство управления групповой политикой hello.
2.  Изменение hello групповой политики, примененные tooall пользователей, например, политика домена по умолчанию hello.
3.  Перейдите tooComputer Конфигурация компьютера\Политики\Параметры Windows\Параметры безопасности\Политики записей\Политика блокировки политика.
4.  Проверьте пороговое значение блокировки учетных записей и период сброса счетчика блокировки учетных записей.

![Политики блокировки учетных записей AD](./media/active-directory-aadconnect-pass-through-authentication/pta5.png)

## <a name="use-hello-graph-api-toomanage-your-tenants-smart-lockout-values"></a>Использовать Graph API toomanage hello значения блокировки смарт-клиента

>[!IMPORTANT]
>Изменение порогового значения блокировки и периода блокировки с помощью API Graph Azure AD — это функция Azure AD Premium P2. Он также должен toobe глобального администратора для клиента.

Можно использовать [Graph Explorer](https://developer.microsoft.com/graph/graph-explorer) tooread, задания и обновления значений смарт-блокировки Azure AD. Однако эти операции можно также выполнить программными средствами.

### <a name="read-smart-lockout-values"></a>Считывание параметров смарт-блокировки

Выполните эти шаги tooread значения смарт-блокировки вашего клиента.

1. Войдите в Graph Explorer как глобальный администратор клиента. Если будет предложено, предоставление доступа для hello запрашиваемые разрешения на доступ.
2. Щелкните «Изменить разрешения» и выберите разрешение «Directory.ReadWrite.All» hello.
3. Настройте запрос Graph API hello следующим образом: версия набора слишком «Бета» тип запроса слишком «GET» и URL-адрес слишком`https://graph.microsoft.com/beta/<your-tenant-domain>/settings`.
4. Щелкните «Выполнить запрос» toosee значения смарт-блокировки вашего клиента. Если вы не устанавливали значений параметров клиента, вы увидите пустой набор параметров.

### <a name="set-smart-lockout-values"></a>Установка параметров смарт-блокировки

Выполните эти шаги tooset значения смарт-блокировки вашего клиента (для hello только в первый раз).

1. Войдите в Graph Explorer как глобальный администратор клиента. Если будет предложено, предоставление доступа для hello запрашиваемые разрешения на доступ.
2. Щелкните «Изменить разрешения» и выберите разрешение «Directory.ReadWrite.All» hello.
3. Настройте запрос Graph API hello следующим образом: версия набора слишком «Бета» тип запроса слишком «POST» и URL-адрес слишком`https://graph.microsoft.com/beta/<your-tenant-domain>/settings`.
4. Скопируйте и вставьте после запроса JSON в поле «Текст запроса» hello hello. Изменить соответствующим образом значения hello смарт-блокировки и использовать случайный идентификатор GUID для `templateId`.
5. Щелкните «Выполнить запрос» tooset значения смарт-блокировки вашего клиента.

```
{
  "templateId": "5cf42378-d67d-4f36-ba46-e8b86229381d",
  "values": [
    {
      "name": "LockoutDurationInSeconds",
      "value": "300"
    },
    {
      "name": "LockoutThreshold",
      "value": "5"
    },
    {
      "name" : "BannedPasswordList",
      "value": ""
    },
    {
      "name" : "EnableBannedPasswordCheck",
      "value": "false"
    }
  ]
}
```

>[!NOTE]
>Если вы не используете их, можно оставить hello **BannedPasswordList** и **EnableBannedPasswordCheck** как пустые значения ("») и «false» соответственно.

Убедитесь, что параметры смарт-блокировки клиента установлены, выполнив [следующие действия](#read-smart-lockout-values).

### <a name="update-smart-lockout-values"></a>Обновление параметров смарт-блокировки

Выполните эти шаги tooupdate значения смарт-блокировки вашего клиента (Если вы уже задали их перед).

1. Войдите в Graph Explorer как глобальный администратор клиента. Если будет предложено, предоставление доступа для hello запрашиваемые разрешения на доступ.
2. Щелкните «Изменить разрешения» и выберите разрешение «Directory.ReadWrite.All» hello.
3. [Выполните эти шаги tooread значения смарт-блокировки вашего клиента](#read-smart-lockout-values). Копировать hello `id` значение (GUID) для элемента hello с «displayName» как «PasswordRuleSettings».
4. Настройте запрос Graph API hello следующим образом: установить версию слишком «Бета» тип запроса слишком «Исправление» и URL-адрес слишком`https://graph.microsoft.com/beta/<your-tenant-domain>/settings/<id>` -использовать hello GUID с шага 3 для `<id>`.
5. Скопируйте и вставьте после запроса JSON в поле «Текст запроса» hello hello. Измените значения смарт-блокировки hello соответствующим образом.
6. Щелкните «Выполнить запрос» tooupdate значения смарт-блокировки вашего клиента.

```
{
  "values": [
    {
      "name": "LockoutDurationInSeconds",
      "value": "30"
    },
    {
      "name": "LockoutThreshold",
      "value": "4"
    },
    {
      "name" : "BannedPasswordList",
      "value": ""
    },
    {
      "name" : "EnableBannedPasswordCheck",
      "value": "false"
    }
  ]
}
```

Убедитесь, что параметры смарт-блокировки клиента были обновлены, выполнив [следующие действия](#read-smart-lockout-values).

## <a name="next-steps"></a>Дальнейшие действия
- [**UserVoice**](https://feedback.azure.com/forums/169401-azure-active-directory/category/160611-directory-synchronization-aad-connect). Отправка запросов новых функций.
