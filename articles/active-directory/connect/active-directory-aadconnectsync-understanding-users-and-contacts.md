---
title: "Синхронизация Azure AD Connect: общие сведения о пользователях и контактах | Документация Майкрософт"
description: "Описание пользователей и контактов в службе синхронизации Azure AD Connect."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
ms.assetid: 8d204647-213a-4519-bd62-49563c421602
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: markvi;andkjell
ms.openlocfilehash: 4d80648c53a2981eb2626338913ed2282423f183
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-understanding-users-and-contacts"></a><span data-ttu-id="bbcff-103">Синхронизация Azure AD Connect: общее представление о пользователях и контактах</span><span class="sxs-lookup"><span data-stu-id="bbcff-103">Azure AD Connect sync: Understanding Users and Contacts</span></span>
<span data-ttu-id="bbcff-104">Существует несколько разных причин, по которым нужно иметь несколько лесов Active Directory. Кроме того, существует несколько разных топологий развертывания.</span><span class="sxs-lookup"><span data-stu-id="bbcff-104">There are several different reasons why you would have multiple Active Directory forests and there are several different deployment topologies.</span></span> <span data-ttu-id="bbcff-105">Распространенные модели включают развертывание ресурсов учетной записи и лесов с синхронизированным глобальным списком адресов после слияния и поглощения.</span><span class="sxs-lookup"><span data-stu-id="bbcff-105">Common models include an account-resource deployment and GAL sync’ed forests after a merger & acquisition.</span></span> <span data-ttu-id="bbcff-106">Но даже при наличии чистых моделей гибридные модели не менее часто используются.</span><span class="sxs-lookup"><span data-stu-id="bbcff-106">But even if there are pure models, hybrid models are common as well.</span></span> <span data-ttu-id="bbcff-107">Конфигурация по умолчанию Hello в Azure AD Connect sync не предполагает никакой конкретной модели, но в зависимости от того, каким образом выбора сопоставления пользователей в руководстве по установке hello, можно просмотреть различные виды поведения.</span><span class="sxs-lookup"><span data-stu-id="bbcff-107">hello default configuration in Azure AD Connect sync does not assume any particular model but depending on how user matching was selected in hello installation guide, different behaviors can be observed.</span></span>

<span data-ttu-id="bbcff-108">В этом разделе мы будем разбирать поведение конфигурации по умолчанию hello в определенных топологиях.</span><span class="sxs-lookup"><span data-stu-id="bbcff-108">In this topic, we will go through how hello default configuration behaves in certain topologies.</span></span> <span data-ttu-id="bbcff-109">Мы будем разбирать конфигурации hello и hello редактор правил синхронизации можно использовать toolook при настройке hello.</span><span class="sxs-lookup"><span data-stu-id="bbcff-109">We will go through hello configuration and hello Synchronization Rules Editor can be used toolook at hello configuration.</span></span>

<span data-ttu-id="bbcff-110">Существует несколько универсальных правил, которые предполагается hello конфигурации:</span><span class="sxs-lookup"><span data-stu-id="bbcff-110">There are a few general rules hello configuration assumes:</span></span>

* <span data-ttu-id="bbcff-111">Независимо от того, в каком порядке мы Импорт из источника hello каталогов Active Directory hello конечный результат должен всегда быть hello же.</span><span class="sxs-lookup"><span data-stu-id="bbcff-111">Regardless of which order we import from hello source Active Directories, hello end result should always be hello same.</span></span>
* <span data-ttu-id="bbcff-112">Активная учетная запись всегда будет передавать данные для входа, включая атрибуты **userPrincipalName** и **sourceAnchor**.</span><span class="sxs-lookup"><span data-stu-id="bbcff-112">An active account will always contribute sign-in information, including **userPrincipalName** and **sourceAnchor**.</span></span>
* <span data-ttu-id="bbcff-113">Отключенная учетная запись будет передавать userPrincipalName и sourceAnchor, если он не является привязанным почтовым ящиком, если нет, toobe активная учетная запись не найдена.</span><span class="sxs-lookup"><span data-stu-id="bbcff-113">A disabled account will contribute userPrincipalName and sourceAnchor, unless it is a linked mailbox, if there is no active account toobe found.</span></span>
* <span data-ttu-id="bbcff-114">Учетная запись со связанным почтовым ящиком никогда не будет использоваться для передачи атрибутов userPrincipalName и sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="bbcff-114">An account with a linked mailbox will never be used for userPrincipalName and sourceAnchor.</span></span> <span data-ttu-id="bbcff-115">Предполагается, что активная учетная запись будет найдена позже.</span><span class="sxs-lookup"><span data-stu-id="bbcff-115">It is assumed that an active account will be found later.</span></span>
* <span data-ttu-id="bbcff-116">Контактный объект может быть подготовленных tooAzure AD как контакт или пользователя.</span><span class="sxs-lookup"><span data-stu-id="bbcff-116">A contact object might be provisioned tooAzure AD as a contact or as a user.</span></span> <span data-ttu-id="bbcff-117">Фактически, это остается неизвестным до тех пор, пока не будут обработаны все исходные леса Active Directory.</span><span class="sxs-lookup"><span data-stu-id="bbcff-117">You don’t really know until all source Active Directory forests have been processed.</span></span>

## <a name="contacts"></a><span data-ttu-id="bbcff-118">Контакты</span><span class="sxs-lookup"><span data-stu-id="bbcff-118">Contacts</span></span>
<span data-ttu-id="bbcff-119">Наличие контактов, представляющих пользователя в разных лесах, — распространенное явление. Это происходит после слияния и поглощения, когда решение GALSync связывает два и более леса Exchange.</span><span class="sxs-lookup"><span data-stu-id="bbcff-119">Having contacts representing a user in a different forest is common after a merger & acquisition where a GALSync solution is bridging two or more Exchange forests.</span></span> <span data-ttu-id="bbcff-120">Hello контактный объект всегда присоединяется из hello пространства соединителя toohello метавселенной с помощью атрибута mail hello.</span><span class="sxs-lookup"><span data-stu-id="bbcff-120">hello contact object is always joining from hello connector space toohello metaverse using hello mail attribute.</span></span> <span data-ttu-id="bbcff-121">Если уже существует контактный объект или объект-пользователь с hello же почтовый адрес, hello объекты объединяются.</span><span class="sxs-lookup"><span data-stu-id="bbcff-121">If there is already a contact object or user object with hello same mail address, hello objects are joined together.</span></span> <span data-ttu-id="bbcff-122">Это настраивается в правиле hello **в from AD – Contact Join**.</span><span class="sxs-lookup"><span data-stu-id="bbcff-122">This is configured in hello rule **In from AD – Contact Join**.</span></span> <span data-ttu-id="bbcff-123">Имеется также правило с именем **в from AD – Contact Common** атрибут метавселенной атрибут потока toohello **sourceObjectType** с константой hello **контакт**.</span><span class="sxs-lookup"><span data-stu-id="bbcff-123">There is also a rule named **In from AD – Contact Common** with an attribute flow toohello metaverse attribute **sourceObjectType** with hello constant **Contact**.</span></span> <span data-ttu-id="bbcff-124">Это правило имеет очень низкий приоритет, если соединяемые toohello любой объект-пользователь же объекту метавселенной, то правило hello **в from AD – User Common** будет передавать пользователя toothis hello значение атрибута.</span><span class="sxs-lookup"><span data-stu-id="bbcff-124">This rule has very low precedence so if any user object is joined toohello same metaverse object, then hello rule **In from AD – User Common** will contribute hello value User toothis attribute.</span></span> <span data-ttu-id="bbcff-125">С этим правилом этот атрибут будет иметь значение hello обратитесь в, если пользователь не был присоединен и hello значение пользователя, если хотя бы одному пользователю не было найдено.</span><span class="sxs-lookup"><span data-stu-id="bbcff-125">With this rule, this attribute will have hello value Contact if no user has been joined and hello value User if at least one user has been found.</span></span>

<span data-ttu-id="bbcff-126">Для инициализации объекта tooAzure AD, hello исходящее правило **Out tooAAD – Contact Join** будет создавать контактный объект, если hello атрибут метавселенной **sourceObjectType** задано слишком**обратитесь в службу** .</span><span class="sxs-lookup"><span data-stu-id="bbcff-126">For provisioning an object tooAzure AD, hello outbound rule **Out tooAAD – Contact Join** will create a contact object if hello metaverse attribute **sourceObjectType** is set too**Contact**.</span></span> <span data-ttu-id="bbcff-127">Если этот атрибут задан слишком**пользователя**, затем hello правило **Out tooAAD – User Join** вместо создания объекта пользователя.</span><span class="sxs-lookup"><span data-stu-id="bbcff-127">If this attribute is set too**User**, then hello rule **Out tooAAD – User Join** will create a user object instead.</span></span>
<span data-ttu-id="bbcff-128">Это возможно повышение объекта из tooUser контакт при нескольких исходных каталогов для Active Directory импортируется и синхронизируется.</span><span class="sxs-lookup"><span data-stu-id="bbcff-128">It is possible that an object is promoted from Contact tooUser when more source Active Directories are imported and synchronized.</span></span>

<span data-ttu-id="bbcff-129">Например в топологии GALSync мы будет находить контактные объекты для всех пользователей в второго леса hello при импорте первого леса hello.</span><span class="sxs-lookup"><span data-stu-id="bbcff-129">For example, in a GALSync topology we will find contact objects for everyone in hello second forest when we import hello first forest.</span></span> <span data-ttu-id="bbcff-130">Таким образом будут размещаться новые контактные объекты в hello соединитель AAD.</span><span class="sxs-lookup"><span data-stu-id="bbcff-130">This will stage new contact objects in hello AAD Connector.</span></span> <span data-ttu-id="bbcff-131">При последующем импорте и синхронизации второго леса hello, мы найти hello реальных пользователей и присоединять их toohello существующим объектам метавселенной.</span><span class="sxs-lookup"><span data-stu-id="bbcff-131">When we later import and synchronize hello second forest, we will find hello real users and join them toohello existing metaverse objects.</span></span> <span data-ttu-id="bbcff-132">Затем будет удалить hello объекта контакта в Azure Active Directory и вместо этого создать новый объект пользователя.</span><span class="sxs-lookup"><span data-stu-id="bbcff-132">We will then delete hello contact object in AAD and create a new user object instead.</span></span>

<span data-ttu-id="bbcff-133">Если имеется топология, где пользователи представлены как контакты, убедитесь, что выбран toomatch пользователей по атрибуту mail hello в руководстве по установке hello.</span><span class="sxs-lookup"><span data-stu-id="bbcff-133">If you have a topology where users are represented as contacts, make sure you select toomatch users on hello mail attribute in hello installation guide.</span></span> <span data-ttu-id="bbcff-134">Если выбран другой вариант, вы получите конфигурацию, зависящую от порядка.</span><span class="sxs-lookup"><span data-stu-id="bbcff-134">If you select another option, then you will have an order dependent configuration.</span></span> <span data-ttu-id="bbcff-135">Контактные объекты всегда присоединяются по атрибуту mail hello, но объекты пользователя только присоединит по атрибуту mail hello, если этот параметр был выбран в руководстве по установке hello.</span><span class="sxs-lookup"><span data-stu-id="bbcff-135">Contact objects will always join on hello mail attribute, but user objects will only join on hello mail attribute if this option was selected in hello installation guide.</span></span> <span data-ttu-id="bbcff-136">Вы может закончиться двумя разными объектами в метавселенной hello с hello же атрибут mail, если hello контактный объект импортируется до hello объекта пользователя.</span><span class="sxs-lookup"><span data-stu-id="bbcff-136">You could then end up with two different objects in hello metaverse with hello same mail attribute if hello contact object was imported before hello user object.</span></span> <span data-ttu-id="bbcff-137">Во время экспорта tooAzure AD выдается ошибка.</span><span class="sxs-lookup"><span data-stu-id="bbcff-137">During export tooAzure AD, an error will be thrown.</span></span> <span data-ttu-id="bbcff-138">Это поведение предусмотрено намеренно и указывает на неверные данные или эту топологию hello была неправильно определена во время установки hello.</span><span class="sxs-lookup"><span data-stu-id="bbcff-138">This behavior is by design and would indicate bad data or that hello topology was not correctly identified during hello installation.</span></span>

## <a name="disabled-accounts"></a><span data-ttu-id="bbcff-139">Отключенные учетные записи</span><span class="sxs-lookup"><span data-stu-id="bbcff-139">Disabled accounts</span></span>
<span data-ttu-id="bbcff-140">Отключенные учетные записи также синхронизируются tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="bbcff-140">Disabled accounts are synchronized as well tooAzure AD.</span></span> <span data-ttu-id="bbcff-141">Отключенные учетные записи — это общие ресурсы toorepresent в Exchange, например конференц-зале.</span><span class="sxs-lookup"><span data-stu-id="bbcff-141">Disabled accounts are common toorepresent resources in Exchange, for example conference rooms.</span></span> <span data-ttu-id="bbcff-142">Hello исключением являются пользователи с привязанным почтовым ящиком; как упоминалось ранее они никогда не подготавливают tooAzure учетной записи AD.</span><span class="sxs-lookup"><span data-stu-id="bbcff-142">hello exception is users with a linked mailbox; as previously mentioned, these will never provision an account tooAzure AD.</span></span>

<span data-ttu-id="bbcff-143">Hello предполагается, что если обнаруживается отключенная учетная запись пользователя, а затем мы не найдем другая активная учетная запись более поздней версии и hello объекта подготовленных tooAzure AD с hello userPrincipalName и sourceAnchor найден.</span><span class="sxs-lookup"><span data-stu-id="bbcff-143">hello assumption is that if a disabled user account is found, then we will not find another active account later and hello object is provisioned tooAzure AD with hello userPrincipalName and sourceAnchor found.</span></span> <span data-ttu-id="bbcff-144">В случае другая активная учетная запись будет присоединен toohello будет использоваться же объекту метавселенной, затем его userPrincipalName и sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="bbcff-144">In case another active account will join toohello same metaverse object, then its userPrincipalName and sourceAnchor will be used.</span></span>

## <a name="changing-sourceanchor"></a><span data-ttu-id="bbcff-145">Изменение атрибута sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="bbcff-145">Changing sourceAnchor</span></span>
<span data-ttu-id="bbcff-146">Экспортированного объекта tooAzure AD, то оно уже не разрешенных toochange hello sourceAnchor.</span><span class="sxs-lookup"><span data-stu-id="bbcff-146">When an object has been exported tooAzure AD then it is not allowed toochange hello sourceAnchor anymore.</span></span> <span data-ttu-id="bbcff-147">Когда hello объекта был атрибут метавселенной экспортированного hello **cloudSourceAnchor** набор с hello **sourceAnchor** значение, принятое Azure AD.</span><span class="sxs-lookup"><span data-stu-id="bbcff-147">When hello object has been exported hello metaverse attribute **cloudSourceAnchor** is set with hello **sourceAnchor** value accepted by Azure AD.</span></span> <span data-ttu-id="bbcff-148">Если **sourceAnchor** изменяется и соответствует **cloudSourceAnchor**, правило hello **Out tooAAD – User Join** вызовет ошибки hello **атрибут sourceAnchor изменилось**.</span><span class="sxs-lookup"><span data-stu-id="bbcff-148">If **sourceAnchor** is changed and not match **cloudSourceAnchor**, hello rule **Out tooAAD – User Join** will throw hello error **sourceAnchor attribute has changed**.</span></span> <span data-ttu-id="bbcff-149">В этом случае необходимо исправить конфигурацию hello или данных так же hello sourceAnchor присутствует в метавселенной hello снова hello объекта синхронизации еще раз.</span><span class="sxs-lookup"><span data-stu-id="bbcff-149">In this case, hello configuration or data must be corrected so hello same sourceAnchor is present in hello metaverse again before hello object can be synchronized again.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="bbcff-150">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="bbcff-150">Additional Resources</span></span>
* [<span data-ttu-id="bbcff-151">Azure AD Connect Sync: настройка параметров синхронизации</span><span class="sxs-lookup"><span data-stu-id="bbcff-151">Azure AD Connect Sync: Customizing Synchronization options</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="bbcff-152">Интеграция локальных удостоверений с Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="bbcff-152">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

