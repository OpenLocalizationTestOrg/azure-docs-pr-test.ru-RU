---
title: "Azure AD Connect: общие сведения о декларативной подготовке | Документация Майкрософт"
description: "Описание hello декларативной подготовки модели настройки в Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: cfbb870d-be7d-47b3-ba01-9e78121f0067
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f11e078f0aafacf94d69f0726ae41629a8470336
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-understanding-declarative-provisioning"></a>Служба синхронизации Azure AD Connect: общие сведения о декларативной подготовке
В этом разделе объясняется hello модели настройки в Azure AD Connect. Hello модель называется декларативной подготовки и позволяет с легкостью изменения конфигурации toomake. Некоторые сложные аспекты, описанные в этой статье, не предназначены для большинства клиентских сценариев.

## <a name="overview"></a>Обзор
Декларативной подготовки обработки объектов, поступающие из подключенных исходного каталога и определяет, как преобразование hello объекта и атрибуты из tooa исходного целевого объекта. Объект обрабатывается в конвейере синхронизации и hello конвейера hello одинаково для правила входящего и исходящего трафика. Правило входящего трафика из метавселенной toohello пространства соединителя она исходящее правило из пространства соединителя tooa метавселенной hello.

![Конвейер синхронизации](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/sync1.png)  

конвейер Hello состоит из нескольких различных модулей. каждый из которых отвечает за определенную концепцию в процессе синхронизации объекта.

![Конвейер синхронизации](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/pipeline.png)  

* Исходный объект источника hello
* [Область](#scope)— находит все правила синхронизации в области.
* [Объединение](#join)— определяет связь между пространством соединителя и метавселенной.
* [Преобразование](#transform)— вычисляет, как атрибуты должны быть преобразованы, и сам поток.
* [Приоритет](#precedence)— разрешает конфликтующие изменения атрибута.
* Целевой объект, hello целевого объекта

## <a name="scope"></a>Область
модуль области Hello оценивает объекта и определяет правила hello в области действия, которые должны быть включены в обработке hello. В зависимости от значений атрибутов hello объекта hello правила, синхронизацию, вычисленное toobe в области видимости. Например, отключенный пользователь, у которого нет почтового ящика Exchange, и включенный пользователь, поддерживающий почту Exchange, имеют разные правила.  
![Область](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope1.png)  

Hello область определяется как группы и предложения. предложения Hello находятся внутри группы. Между всеми предложениями в группе используется логический оператор AND. Например, (department =IT AND country = Denmark). Группы должны быть соединены логическим оператором OR.

![Область](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/scope2.png)  
Hello области на этом рисунке должны читаться как (отдел ИТ и Страна = = Дания) или (страны = Швеция). Если группе 1 и группе 2, вычисленное tootrue hello правило находится в области.

модуль Hello область поддерживает следующие операции hello.

| Операция | Описание |
| --- | --- |
| EQUAL, NOTEQUAL |Сравнения строки, который возвращает, если значение равно toohello в атрибут hello. Для многозначных атрибутов см. операцию ISIN и ISNOTIN. |
| LESSTHAN, LESSTHAN_OR_EQUAL |Строка сравнения, который оценивается, если имеет значение меньше значения hello значения атрибута hello. |
| CONTAINS, NOTCONTAINS |Сравнения строки, который возвращает, если значение можно найти где-либо внутри значения атрибута hello. |
| STARTSWITH, NOTSTARTSWITH |Сравнения строки, который возвращает, если значение находится в начале hello hello значения атрибута hello. |
| ENDSWITH, NOTENDSWITH |Сравнения строки, который вычисляет, если значение присутствует в конце hello hello значения атрибута hello. |
| GREATERTHAN, GREATERTHAN_OR_EQUAL |Сравнения строки, который возвращает, если значение больше значения hello hello атрибута. |
| ISNULL, ISNOTNULL |Возвращает, если отсутствует атрибут hello из hello объекта. Если значение null, поэтому hello атрибут не указан, правило hello находится в области. |
| ISIN, ISNOTIN |Вычисляет при наличии в атрибуте hello определено значение hello. Эта операция является hello Многозначный разновидность равенства и НЕРАВЕНСТВО. атрибут Hello должен toobe многозначный атрибут и значение hello можно найти в любом из значений атрибутов hello, то правило hello не в области видимости. |
| ISBITSET, ISNOTBITSET |Вычисляет, является ли определенный бит набором. Например может быть используется tooevaluate hello битов в toosee управления учетными записями пользователя включена или отключена. |
| ISMEMBEROF, ISNOTMEMBEROF |значение Hello должно содержать группу tooa различающегося Имени в пространство соединителя hello. Если hello объекта является членом группы hello заданной, правило hello находится в области. |

## <a name="join"></a>Объединение
модуль соединения Hello в конвейере синхронизации hello отвечает за поиск hello связь между hello объекта в источнике hello и объект в целевой hello. Во входящем правиле эту связь будет объекта в пространстве соединителя, поиск в метавселенной hello объекта tooan relationship.  
![Объединение объектов пространства соединителя и метавселенной](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join1.png)  
Цель Hello toosee Если уже существует объект в метавселенной hello, созданный другой соединитель, он должен быть связан. Например в ресурсе учетной записи леса пользователя hello из леса учетных записей hello соединяются с hello пользователя из леса ресурсов hello.

Соединения используются главным образом на правила для входящих подключений toojoin соединитель пространства объектов вместе toohello же объекту метавселенной.

Hello соединения определяются как одну или несколько групп. Внутри группы находятся предложения. Между всеми предложениями в группе используется логический оператор AND. Группы должны быть соединены логическим оператором OR. группы Hello обрабатываются в порядке от верхней toobottom. Одна группа обнаружила ровно одно совпадение с объектом в целевом hello, другие правила соединения не вычисляются. Если ноль или более, чем один объект, обработка продолжается toohello следующей группы правил. По этой причине hello правила должны создаваться в порядке hello наиболее явного первый и более Нечеткое в конце hello.  
![Определение объединения](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join2.png)  
из верхнего toobottom обрабатываются Hello соединения на этом рисунке. Первый конвейера синхронизации hello видит, существует ли совпадение employeeID. В противном случае второе правило hello видит Если hello имя учетной записи может быть используется toojoin hello объектов друг с другом. Если это совпадение либо, hello третьей и последней правило является более нечеткого соответствия с помощью hello имя пользователя.

Если оценки всех правил соединения и имеет не ровно одно совпадение, hello **тип связи** на hello **описание** используется страница. Если этот параметр имеет значение слишком**подготовки**, а затем создается новый объект в целевой hello.  
![Подготовка или объединение](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/join3.png)  

Объект должен иметь только одно правило синхронизации с правилами объединения в области. При наличии в объединении нескольких правил синхронизации возникает ошибка. Приоритет не используется tooresolve конфликты объединения. Объект должен иметь правилом присоединения в области для tooflow атрибуты с hello того же входящего и исходящего направления. Если вам требуется tooflow атрибуты входящий и исходящий toohello один объектов, необходимо иметь один входящий и правило исходящей синхронизации с соединением.

Исходящие соединения имеет особое поведение, когда он пытается tooprovision пространство соединителя целевой объект tooa. атрибут Hello DN — попробуйте использовать toofirst обратного соединения. Если уже имеется объект в пространстве соединителя целевой hello с hello таким же доменным Именем, объекты соединяются приветствия.

модуль соединения Hello вычисляется только в том случае, как только когда новое правило синхронизации переходит в область действия. Если объект присоединен, он не исключив даже если критериях соединения hello больше не удовлетворяется. Следует toodisjoin объекта hello правило синхронизации, который присоединен hello объектов необходимо выйдет из области действия.

### <a name="metaverse-delete"></a>Удаление метавселенной
Объект метавселенной остается при условии, что имеется одно правило синхронизации в области с **тип связи** значение слишком**подготовки** или **StickyJoin**. StickyJoin используется в том случае, если соединитель не допускается tooprovision нового объекта метавселенной toohello, а когда он присоединен, он должен быть удален в источнике hello перед удалением hello объекта метавселенной.

Если объект метавселенной удаляется, все объекты, связанные с исходящим правилом синхронизации, отмеченные для **подготовки** , отмечаются для удаления.

## <a name="transformations"></a>Преобразования
Hello преобразования являются используется toodefine как атрибуты должны поступать от целевого объекта toohello источника hello. Hello потоков может иметь одно из следующих hello **потока типы**: Direct, константу или выражение. Прямой поток передает значение атрибута без дополнительных изменений. Задает постоянное значение hello заданное значение. Выражение использует hello декларативной подготовки выражения языка tooexpress способ преобразования «hello». Здравствуйте сведения для hello язык выражений можно найти в hello [основные сведения о декларативной подготовки язык выражений](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) раздела.

![Подготовка или объединение](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/transformations1.png)  

Hello **применить один раз** флажок определяет hello этого атрибута следует устанавливать только при первоначальном создании hello объекта. Например эта конфигурация может быть используется tooset начального пароля для нового объекта пользователя.

### <a name="merging-attribute-values"></a>Объединение значений атрибутов
В потоке атрибутов hello имеется toodetermine параметр, если многозначных атрибутов должны быть объединены из несколько разных разъемов. значение по умолчанию Hello — **обновление**, указывающая hello правила синхронизации с высоким приоритетом разрешается.

![Типы объединения](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/mergetype.png)  

Кроме того, существуют и другие параметры, такие как **Merge** и **MergeCaseInsensitive**. Эти параметры позволяют toomerge значения из разных источников. Например он может быть используется toomerge hello члена или proxyAddresses атрибут из нескольких разных лесов. При использовании этого параметра все синхронизации правил в области видимости для объекта, должны использовать hello же тип слияния. В одном соединителе нельзя определить значение **Update**, а в другом — **Merge**. В этом случае возникнет ошибка.

Здравствуйте, разница между **слияния** и **MergeCaseInsensitive** — как tooprocess повторяющиеся значения атрибута. Модуль синхронизации Hello гарантирует, что повторяющиеся значения не вставляются в hello целевого атрибута. С **MergeCaseInsensitive**, повторяющиеся значения с единственным отличием в случае, если присутствует toobe не будут. Например, вы не должны видеть оба»SMTP:bob@contoso.com«и»smtp:bob@contoso.com» в hello целевого атрибута. **Слияние** смотрит только на точные значения hello и несколько значений там, где есть разница в случае могут быть известны.

Здравствуйте, параметр **заменить** Здравствуйте, таким же, как **обновление**, но он не используется.

### <a name="control-hello-attribute-flow-process"></a>Атрибут потока управления hello процесса
При нескольких правил синхронизации входящего трафика, настроенные toocontribute toohello же атрибут метавселенной, то приоритет имеет победителя используется toodetermine hello. правило синхронизации Hello с высоким приоритетом (наименьшее числовое значение) будет значение toocontribute hello. Здравствуйте, происходит одинаково для правила для исходящих подключений. правило синхронизации Hello с высоким приоритетом входят directory подключенный toohello значение hello и wins.

В некоторых случаях, а не передает значение, правило синхронизации hello следует определить поведение других правил. В этом случае используются специальные литералы.

Для входящих правил синхронизации hello литерала **NULL** может быть используется tooindicate наличие hello потока не toocontribute значение. Значение может передать другое правило с более низким приоритетом. Если никакое правило не передает значение, hello атрибут метавселенной удаляется. Для исходящего правила если **NULL** — hello окончательное значение после обработки всех правил синхронизации значение hello удаляется в подключенном каталоге hello.

литерал Hello **AuthoritativeNull** аналогичен слишком**NULL** , но с hello отличием, что не правила с низким приоритетом может передать значение.

В потоке атрибута также может использоваться литерал **IgnoreThisFlow**. Это аналогично tooNULL в смысле hello указывает, что нет toocontribute. Hello различие заключается в том, что не удаляет уже существующее значение в целевом hello. Это, как поток атрибутов hello не существует.

Пример:

В *Out tooAD - пользователя Exchange hybrid* hello последовательности можно найти:  
`IIF([cloudSOAExchMailbox] = True,[cloudMSExchSafeSendersHash],IgnoreThisFlow)`  
Это выражение должно интерпретироваться как: hello почтовый ящик пользователя находится в Azure AD, затем потока hello атрибут из tooAD Azure AD. Если нет, не проходят любые задней tooActive каталога. В этом случае он сохранить существующее значение hello в AD.

### <a name="importedvalue"></a>Функция ImportedValue
Hello функция ImportedValue отличается от других функций, так как имя атрибута hello должны заключаться в кавычки, а не в квадратные скобки:  
`ImportedValue("proxyAddresses")`.

Обычно во время синхронизации атрибут использует hello ожидаемому значению, даже в том случае, если он еще не экспортировано или выдал ошибку во время экспорта (top of башня hello»). Во время входящей синхронизации предполагается, что атрибут, который еще не достиг связанного каталога, обязательно достигнет его. В некоторых случаях важно tooonly синхронизации значение, которое было подтверждено hello в подключенном каталоге («hologram and delta import tower»).

Пример этой функции можно найти в hello out-of-box правило синхронизации *в from AD – User Common Exchange*. В гибридной среде Exchange значение hello, добавленное Exchange online должно синхронизироваться только если был подтвержден успешно экспортирован hello значение:  
`proxyAddresses` <- `RemoveDuplicates(Trim(ImportedValue("proxyAddresses")))`

## <a name="precedence"></a>Приоритет
При нескольких правил синхронизации toocontribute hello же целевой toohello значение атрибута, значение приоритета hello победителя используется toodetermine hello. правило Hello с наивысшим приоритетом, наименьшее числовое значение, будет toocontribute атрибут hello в конфликт.

![Типы объединения](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/precedence1.png)  

Этот порядок можно более точно используется toodefine поток для небольшого подмножества объектов атрибутов. Например, hello out-of поле rules убедитесь, что атрибуты, с действующей учетной записью (**User AccountEnabled**) имеют приоритет из других учетных записей.

Для соединителей можно определить приоритет. Позволяющий соединители лучше значениями данных toocontribute сначала.

### <a name="multiple-objects-from-hello-same-connector-space"></a>Здравствуйте, несколько объектов из пространства соединителя
Если у вас есть несколько объектов в hello же соединителя пространства присоединены к домену toohello объекта метавселенной же приоритет должны быть изменены. Если несколько объектов находятся в области видимости из hello же правило синхронизации, то подсистема синхронизации hello не имеет приоритета может toodetermine. Он является неоднозначным, какой объект источника должны вносить свой вклад в метавселенной toohello значение hello. Эта конфигурация считается неоднозначным даже если атрибуты hello в источнике hello hello одинаковое значение.  
![Toohello объединить несколько объектов одного объекта mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple1.png)  

Для этого сценария необходимо toochange hello области правила синхронизации hello чтобы hello исходные объекты имеют правила синхронизации различных в области. Позволяющий различных toodefine более высокий приоритет.  
![Toohello объединить несколько объектов одного объекта mv](./media/active-directory-aadconnectsync-understanding-declarative-provisioning/multiple2.png)  

## <a name="next-steps"></a>Дальнейшие действия
* Дополнительные сведения о языке выражений hello в [выражения декларативной подготовки основные сведения о](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).
* См. в разделе как декларативной подготовки является используемым out-of-box в [основные сведения о настройке по умолчанию hello](active-directory-aadconnectsync-understanding-default-configuration.md).
* Просмотреть, как toomake практическая изменяются с помощью декларативной подготовки в [как конфигурация по умолчанию toomake toohello изменение](active-directory-aadconnectsync-change-the-configuration.md).
* Продолжить совместную работу пользователей и контакты в tooread [общее представление о пользователях и контактах](active-directory-aadconnectsync-understanding-users-and-contacts.md).

**Обзорные статьи**

* [Службы синхронизации Azure AD Connect: общие сведений о синхронизации и ее настройка](active-directory-aadconnectsync-whatis.md)
* [Интеграция локальных удостоверений с Azure Active Directory](active-directory-aadconnect.md)

**Справочные материалы**

* [Синхронизация Azure AD Connect: справочник по функциям](active-directory-aadconnectsync-functions-reference.md)
