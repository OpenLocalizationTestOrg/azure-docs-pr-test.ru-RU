---
title: "Синхронизация Azure AD Connect: изменение конфигурации по умолчанию hello | Документы Microsoft"
description: "Предоставляет рекомендации по изменению конфигурации по умолчанию hello службы синхронизации Azure AD Connect."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 7638a031-1635-4942-94c3-fce8f09eed5e
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/12/2017
ms.author: billmath
ms.openlocfilehash: aa05e935edd02c49c3c3fdc198b854f50327847c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-best-practices-for-changing-hello-default-configuration"></a><span data-ttu-id="2dd1c-103">Синхронизация Azure AD Connect: советы и рекомендации по изменению конфигурации по умолчанию hello</span><span class="sxs-lookup"><span data-stu-id="2dd1c-103">Azure AD Connect sync: Best practices for changing hello default configuration</span></span>
<span data-ttu-id="2dd1c-104">Цель этого раздела Hello — toodescribe поддерживаемые и неподдерживаемые изменения tooAzure AD Connect sync.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-104">hello purpose of this topic is toodescribe supported and unsupported changes tooAzure AD Connect sync.</span></span>

<span data-ttu-id="2dd1c-105">для большинства сред, которые синхронизации локальной Active Directory с Azure AD, Hello конфигурация, созданная Azure AD Connect работает «как есть».</span><span class="sxs-lookup"><span data-stu-id="2dd1c-105">hello configuration created by Azure AD Connect works “as is” for most environments that synchronize on-premises Active Directory with Azure AD.</span></span> <span data-ttu-id="2dd1c-106">Однако в некоторых случаях это необходимые tooapply tooa toosatisfy конфигурации конкретной некоторых изменений требуется или требования.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-106">However, in some cases, it is necessary tooapply some changes tooa configuration toosatisfy a particular need or requirement.</span></span>

## <a name="changes-toohello-service-account"></a><span data-ttu-id="2dd1c-107">Учетная запись службы toohello изменения</span><span class="sxs-lookup"><span data-stu-id="2dd1c-107">Changes toohello service account</span></span>
<span data-ttu-id="2dd1c-108">Синхронизация Azure AD Connect работает под учетной записью службы, созданные мастером установки hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-108">Azure AD Connect sync is running under a service account created by hello installation wizard.</span></span> <span data-ttu-id="2dd1c-109">Эта учетная запись службы содержит hello шифрования ключей toohello базе данных, при синхронизации. Он создается с длинного пароля 127 символов и hello пароль устанавливается toonot срока действия.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-109">This service account holds hello encryption keys toohello database used by sync. It is created with a 127 characters long password and hello password is set toonot expire.</span></span>

* <span data-ttu-id="2dd1c-110">Это **неподдерживаемый** toochange или сбросе hello пароль учетной записи службы hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-110">It is **unsupported** toochange or reset hello password of hello service account.</span></span> <span data-ttu-id="2dd1c-111">Это окончательно удаляет ключи шифрования hello и служба hello не является базой данных может tooaccess hello и не может toostart.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-111">Doing so destroys hello encryption keys and hello service is not able tooaccess hello database and is not able toostart.</span></span>

## <a name="changes-toohello-scheduler"></a><span data-ttu-id="2dd1c-112">Изменения toohello планировщика</span><span class="sxs-lookup"><span data-stu-id="2dd1c-112">Changes toohello scheduler</span></span>
<span data-ttu-id="2dd1c-113">Начиная с выпусков hello из сборки 1.1 (февраль 2016) можно настроить hello [планировщика](active-directory-aadconnectsync-feature-scheduler.md) toohave различных синхронизации цикла чем по умолчанию hello 30 минут.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-113">Starting with hello releases from build 1.1 (February 2016) you can configure hello [scheduler](active-directory-aadconnectsync-feature-scheduler.md) toohave a different sync cycle than hello default 30 minutes.</span></span>

## <a name="changes-toosynchronization-rules"></a><span data-ttu-id="2dd1c-114">Правила изменения tooSynchronization</span><span class="sxs-lookup"><span data-stu-id="2dd1c-114">Changes tooSynchronization Rules</span></span>
<span data-ttu-id="2dd1c-115">Мастер установки Hello обеспечивает конфигурацию, которая должна toowork для наиболее распространенных сценариев hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-115">hello installation wizard provides a configuration that is supposed toowork for hello most common scenarios.</span></span> <span data-ttu-id="2dd1c-116">При необходимости настройки toohello toomake изменения, необходимо выполнить эти правила toostill имеют поддерживаемой конфигурации.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-116">In case you need toomake changes toohello configuration, then you must follow these rules toostill have a supported configuration.</span></span>

* <span data-ttu-id="2dd1c-117">Вы можете [изменить потоки атрибутов](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) Если hello потоков прямой атрибутов по умолчанию не подходят для вашей организации.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-117">You can [change attribute flows](active-directory-aadconnectsync-change-the-configuration.md#other-common-attribute-flow-changes) if hello default direct attribute flows are not suitable for your organization.</span></span>
* <span data-ttu-id="2dd1c-118">Если требуется слишком[не будут поступать атрибут](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) и удалить существующий атрибут значения в Azure AD, то должны toocreate правило для этого сценария.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-118">If you want too[not flow an attribute](active-directory-aadconnectsync-change-the-configuration.md#do-not-flow-an-attribute) and remove any existing attribute values in Azure AD, then you need toocreate a rule for this scenario.</span></span>
* <span data-ttu-id="2dd1c-119">[Отключайте ненужные правила синхронизации](#disable-an-unwanted-sync-rule) , вместо того чтобы их удалять.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-119">[Disable an unwanted Sync Rule](#disable-an-unwanted-sync-rule) rather than deleting it.</span></span> <span data-ttu-id="2dd1c-120">Удаленное правило будет снова создано во время обновления.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-120">A deleted rule is recreated during an upgrade.</span></span>
* <span data-ttu-id="2dd1c-121">слишком[изменить правило out-of-box](#change-an-out-of-box-rule), следует создать копию исходной hello правила и отключить правило out-of-box hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-121">too[change an out-of-box rule](#change-an-out-of-box-rule), you should make a copy of hello original rule and disable hello out-of-box rule.</span></span> <span data-ttu-id="2dd1c-122">Редактор правил синхронизации Hello приглашение и помогает.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-122">hello Sync Rule Editor prompts and helps you.</span></span>
* <span data-ttu-id="2dd1c-123">Экспортируйте свои пользовательские правила синхронизации с помощью hello редактор правил синхронизации.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-123">Export your custom synchronization rules using hello Synchronization Rules Editor.</span></span> <span data-ttu-id="2dd1c-124">Hello предоставляет с помощью сценария PowerShell, можно использовать tooeasily повторно создать их в сценарии аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-124">hello editor provides you with a PowerShell script you can use tooeasily recreate them in a disaster recovery scenario.</span></span>

> [!WARNING]
> <span data-ttu-id="2dd1c-125">правила синхронизации out-of-box Hello имеют отпечаток.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-125">hello out-of-box sync rules have a thumbprint.</span></span> <span data-ttu-id="2dd1c-126">При внесении изменений правил toothese отпечаток hello больше не совпадают.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-126">If you make a change toothese rules, hello thumbprint is no longer matching.</span></span> <span data-ttu-id="2dd1c-127">При попытке tooapply нового выпуска Azure AD Connect, могут возникнуть проблемы в будущем hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-127">You might have problems in hello future when you try tooapply a new release of Azure AD Connect.</span></span> <span data-ttu-id="2dd1c-128">Создавать только такие изменения hello, как он описан в этой статье.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-128">Only make changes hello way it is described in this article.</span></span>

### <a name="disable-an-unwanted-sync-rule"></a><span data-ttu-id="2dd1c-129">Отключайте ненужные правила синхронизации</span><span class="sxs-lookup"><span data-stu-id="2dd1c-129">Disable an unwanted Sync Rule</span></span>
<span data-ttu-id="2dd1c-130">Не удаляйте правило синхронизации из стандартной конфигурации.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-130">Do not delete an out-of-box sync rule.</span></span> <span data-ttu-id="2dd1c-131">Оно будет создано заново при следующем обновлении.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-131">It is recreated during next upgrade.</span></span>

<span data-ttu-id="2dd1c-132">В некоторых случаях конфигурацию, которая не работает для используемой топологии созданных приветствия мастера установки.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-132">In some cases, hello installation wizard has produced a configuration that is not working for your topology.</span></span> <span data-ttu-id="2dd1c-133">Например если у вас есть топологии леса ресурсов учетной записи, но схемы расширенные hello hello учетной записи леса с схемы Exchange hello, правила для Exchange создаются для учетной записи hello и лесом ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-133">For example, if you have an account-resource forest topology but you have extended hello schema in hello account forest with hello Exchange schema, then rules for Exchange are created for hello account forest and hello resource forest.</span></span> <span data-ttu-id="2dd1c-134">В этом случае необходимо toodisable hello правило синхронизации для Exchange.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-134">In this case, you need toodisable hello Sync Rule for Exchange.</span></span>

![Отключенное правило синхронизации](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/exchangedisabledrule.png)

<span data-ttu-id="2dd1c-136">На приведенном выше рисунке hello приветствия мастера установки обнаружила старой схеме Exchange 2003 в лесу учетных записей hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-136">In hello picture above, hello installation wizard has found an old Exchange 2003 schema in hello account forest.</span></span> <span data-ttu-id="2dd1c-137">Это расширение схемы был добавлен до введения hello леса ресурсов в среде компании Fabrikam.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-137">This schema extension was added before hello resource forest was introduced in Fabrikam's environment.</span></span> <span data-ttu-id="2dd1c-138">tooensure атрибуты из старой реализации Exchange hello не синхронизированы, следует отключить правило синхронизации hello, как показано.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-138">tooensure no attributes from hello old Exchange implementation are synchronized, hello sync rule should be disabled as shown.</span></span>

### <a name="change-an-out-of-box-rule"></a><span data-ttu-id="2dd1c-139">внести изменения в стандартное правило</span><span class="sxs-lookup"><span data-stu-id="2dd1c-139">Change an out-of-box rule</span></span>
<span data-ttu-id="2dd1c-140">Hello только следует изменить правило out-of-box при при необходимости правилом присоединения toochange hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-140">hello only time you should change an out-of-box rule is when you need toochange hello join rule.</span></span> <span data-ttu-id="2dd1c-141">Если вам требуется toochange поток атрибутов, необходимо создать правило синхронизации с более высокий приоритет, чем правила out-of-box hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-141">If you need toochange an attribute flow, then you should create a sync rule with higher precedence than hello out-of-box rules.</span></span> <span data-ttu-id="2dd1c-142">Здравствуйте, только необходимо практически tooclone правила — правило hello **в из AD — User Join**.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-142">hello only rule you practically need tooclone is hello rule **In from AD - User Join**.</span></span> <span data-ttu-id="2dd1c-143">Все прочие правила можно переопределить правилами с более высоким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-143">You can override all other rules with a higher precedence rule.</span></span>

<span data-ttu-id="2dd1c-144">При необходимости изменения tooan toomake out-of-box-правило, следует внести копию правило out-of-box hello и отключить исходное правило hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-144">If you need toomake changes tooan out-of-box rule, then you should make a copy of hello out-of-box rule and disable hello original rule.</span></span> <span data-ttu-id="2dd1c-145">Создайте правило клонированного toohello изменения hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-145">Then make hello changes toohello cloned rule.</span></span> <span data-ttu-id="2dd1c-146">Эти действия которого запущено Hello редактор правил синхронизации.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-146">hello Sync Rule Editor is helping you with those steps.</span></span> <span data-ttu-id="2dd1c-147">Открыв стандартное правило, вы увидите такое диалоговое окно: </span><span class="sxs-lookup"><span data-stu-id="2dd1c-147">When you open an out-of-box rule, you are presented with this dialog box:</span></span>  
![Предупреждение стандартного правила](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/warningoutofboxrule.png)

<span data-ttu-id="2dd1c-149">Выберите **Да** toocreate копию hello правило.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-149">Select **Yes** toocreate a copy of hello rule.</span></span> <span data-ttu-id="2dd1c-150">затем открывается клонированного правило Hello.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-150">hello cloned rule is then opened.</span></span>  
<span data-ttu-id="2dd1c-151">![Клонированное правило](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span><span class="sxs-lookup"><span data-stu-id="2dd1c-151">![Cloned rule](./media/active-directory-aadconnectsync-best-practices-changing-default-configuration/clonedrule.png)</span></span>

<span data-ttu-id="2dd1c-152">На это точная копия правило внесите любые tooscope необходимые изменения, объединения и преобразования.</span><span class="sxs-lookup"><span data-stu-id="2dd1c-152">On this cloned rule, make any necessary changes tooscope, join, and transformations.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2dd1c-153">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2dd1c-153">Next steps</span></span>
<span data-ttu-id="2dd1c-154">**Обзорные статьи**</span><span class="sxs-lookup"><span data-stu-id="2dd1c-154">**Overview topics**</span></span>

* [<span data-ttu-id="2dd1c-155">Службы синхронизации Azure AD Connect: общие сведений о синхронизации и ее настройка</span><span class="sxs-lookup"><span data-stu-id="2dd1c-155">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="2dd1c-156">Интеграция локальных удостоверений с Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="2dd1c-156">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)
