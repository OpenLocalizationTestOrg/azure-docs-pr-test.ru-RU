---
title: "Синхронизация Azure AD Connect: обработка ошибок LargeObject, вызванных атрибутом userCertificate | Документация Майкрософт"
description: "В этом разделе шаги hello исправления для LargeObject ошибки, вызванные userCertificate атрибута."
services: active-directory
documentationcenter: 
author: cychua
manager: femila
editor: 
ms.assetid: 146ad5b3-74d9-4a83-b9e8-0973a19828d9
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: e547fb5f601b92f6f5154de9997651b1f28c51b4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-sync-handling-largeobject-errors-caused-by-usercertificate-attribute"></a><span data-ttu-id="775e8-103">Синхронизация Azure AD Connect: обработка ошибок LargeObject, вызванных атрибутом userCertificate</span><span class="sxs-lookup"><span data-stu-id="775e8-103">Azure AD Connect sync: Handling LargeObject errors caused by userCertificate attribute</span></span>

<span data-ttu-id="775e8-104">Azure AD обеспечивает максимальное количество **15** сертификатов значения на hello **userCertificate** атрибута.</span><span class="sxs-lookup"><span data-stu-id="775e8-104">Azure AD enforces a maximum limit of **15** certificate values on hello **userCertificate** attribute.</span></span> <span data-ttu-id="775e8-105">Если Azure AD Connect экспортирует объект с более чем на 15 tooAzure значения AD, Azure AD возвращает **LargeObject** ошибка с сообщением:</span><span class="sxs-lookup"><span data-stu-id="775e8-105">If Azure AD Connect exports an object with more than 15 values tooAzure AD, Azure AD returns a **LargeObject** error with message:</span></span>

><span data-ttu-id="775e8-106">*«hello подготовленный объект слишком велик. Trim hello число значений атрибутов для этого объекта. Hello операция будет повторена в hello следующего цикла синхронизации...»*</span><span class="sxs-lookup"><span data-stu-id="775e8-106">*"hello provisioned object is too large. Trim hello number of attribute values on this object. hello operation will be retried in hello next synchronization cycle..."*</span></span>

<span data-ttu-id="775e8-107">Hello LargeObject ошибки может быть вызвано другими атрибутами AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-107">hello LargeObject error may be caused by other AD attributes.</span></span> <span data-ttu-id="775e8-108">на самом деле она вызвана hello userCertificate атрибут tooconfirm, необходимо tooverify для hello объекта в локальном AD или в hello [поиска метавселенной диспетчера службы синхронизации](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span><span class="sxs-lookup"><span data-stu-id="775e8-108">tooconfirm it is indeed caused by hello userCertificate attribute, you need tooverify against hello object either in on-premises AD or in hello [Synchronization Service Manager Metaverse Search](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-mvsearch).</span></span>

<span data-ttu-id="775e8-109">tooobtain hello список объектов в клиенте с ошибками LargeObject, используйте один из следующих методов hello:</span><span class="sxs-lookup"><span data-stu-id="775e8-109">tooobtain hello list of objects in your tenant with LargeObject errors, use one of hello following methods:</span></span>

 * <span data-ttu-id="775e8-110">Если включена вашего клиента Azure AD Connect Health для синхронизации, можно обратиться toohello [отчет об ошибках синхронизации](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) предоставлен.</span><span class="sxs-lookup"><span data-stu-id="775e8-110">If your tenant is enabled for Azure AD Connect Health for sync, you can refer toohello [Synchronization Error Report](https://docs.microsoft.com/azure/active-directory/connect-health/active-directory-aadconnect-health-sync#object-level-synchronization-error-report-preview) provided.</span></span>
 
 * <span data-ttu-id="775e8-111">Hello уведомление по электронной почте для ошибок синхронизации каталогов, отправляемый в конце каждого цикла синхронизации в hello имеет hello список объектов с ошибками LargeObject.</span><span class="sxs-lookup"><span data-stu-id="775e8-111">hello notification email for directory synchronization errors that is sent at hello end of each sync cycle has hello list of objects with LargeObject errors.</span></span> 
 * <span data-ttu-id="775e8-112">Hello [вкладку Диспетчер службы синхронизации операции](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) отображает hello список объектов с ошибками LargeObject, если щелкнуть hello последней операции экспорта tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-112">hello [Synchronization Service Manager Operations tab](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnectsync-service-manager-ui-operations) displays hello list of objects with LargeObject errors if you click hello latest Export tooAzure AD operation.</span></span>
 
## <a name="mitigation-options"></a><span data-ttu-id="775e8-113">Варианты устранения ошибок</span><span class="sxs-lookup"><span data-stu-id="775e8-113">Mitigation options</span></span>
<span data-ttu-id="775e8-114">Пока не будет устранена ошибка LargeObject hello, другие toohello изменения атрибутов одного объекта не может быть экспортирован tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-114">Until hello LargeObject error is resolved, other attribute changes toohello same object cannot be exported tooAzure AD.</span></span> <span data-ttu-id="775e8-115">Ошибка tooresolve hello, рассмотрим hello следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="775e8-115">tooresolve hello error, you can consider hello following options:</span></span>

 * <span data-ttu-id="775e8-116">Обновление Azure AD Connect toobuild 1.1.524.0 или после.</span><span class="sxs-lookup"><span data-stu-id="775e8-116">Upgrade Azure AD Connect toobuild 1.1.524.0 or after.</span></span> <span data-ttu-id="775e8-117">В Azure AD Connect сборки 1.1.524.0, правила синхронизации out-of-box hello были userCertificate атрибуты экспорта обновленные toonot и userSMIMECertificate у более чем на 15 значения атрибутов hello.</span><span class="sxs-lookup"><span data-stu-id="775e8-117">In Azure AD Connect build 1.1.524.0, hello out-of-box synchronization rules have been updated toonot export attributes userCertificate and userSMIMECertificate if hello attributes have more than 15 values.</span></span> <span data-ttu-id="775e8-118">Дополнительные сведения о том, как tooupgrade Azure AD Connect см. tooarticle [Azure AD Connect: обновление с предыдущей версии toohello последней](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span><span class="sxs-lookup"><span data-stu-id="775e8-118">For details on how tooupgrade Azure AD Connect, refer tooarticle [Azure AD Connect: Upgrade from a previous version toohello latest](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-upgrade-previous-version).</span></span>

 * <span data-ttu-id="775e8-119">Реализуйте **правило исходящей синхронизации** в Azure AD Connect, которая экспортирует **значение вместо фактических значений для объектов с более чем на 15 значения сертификата hello null**.</span><span class="sxs-lookup"><span data-stu-id="775e8-119">Implement an **outbound sync rule** in Azure AD Connect that exports a **null value instead of hello actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="775e8-120">Этот параметр подходит, если любой из hello сертификата значения toobe экспортировать tooAzure AD не требуется для объектов с более чем на 15 значения.</span><span class="sxs-lookup"><span data-stu-id="775e8-120">This option is suitable if you do not require any of hello certificate values toobe exported tooAzure AD for objects with more than 15 values.</span></span> <span data-ttu-id="775e8-121">Дополнительные сведения о том, как правило этой синхронизации, см. раздел toonext tooimplement [реализация экспорта toolimit правила синхронизации userCertificate атрибута](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span><span class="sxs-lookup"><span data-stu-id="775e8-121">For details on how tooimplement this sync rule, refer toonext section [Implementing sync rule toolimit export of userCertificate attribute](#implementing-sync-rule-to-limit-export-of-usercertificate-attribute).</span></span>

 * <span data-ttu-id="775e8-122">Сократите число hello значений сертификат на hello локального объекта AD (15 или меньше), удаляя значения, которые больше не используются в организации.</span><span class="sxs-lookup"><span data-stu-id="775e8-122">Reduce hello number of certificate values on hello on-premises AD object (15 or less) by removing values that are no longer in use by your organization.</span></span> <span data-ttu-id="775e8-123">Это подходит, если атрибут Раздувание hello вызвана сертификаты с истекшим сроком действия или не используется.</span><span class="sxs-lookup"><span data-stu-id="775e8-123">This is suitable if hello attribute bloat is caused by expired or unused certificates.</span></span> <span data-ttu-id="775e8-124">Можно использовать hello [доступные здесь сценарий PowerShell](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) найти toohelp резервной копии, а также удалять просроченные сертификаты в локальном AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-124">You can use hello [PowerShell script available here](https://gallery.technet.microsoft.com/Remove-Expired-Certificates-0517e34f) toohelp find, backup, and delete expired certificates in your on-premises AD.</span></span> <span data-ttu-id="775e8-125">Прежде чем удалять сертификаты hello, рекомендуется проверить с открытым ключом инфраструктурных администраторами hello в вашей организации.</span><span class="sxs-lookup"><span data-stu-id="775e8-125">Before deleting hello certificates, it is recommended that you verify with hello Public-Key-Infrastructure administrators in your organization.</span></span>

 * <span data-ttu-id="775e8-126">Настройка Azure AD Connect tooexclude hello userCertificate атрибута не экспортированы tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-126">Configure Azure AD Connect tooexclude hello userCertificate attribute from being exported tooAzure AD.</span></span> <span data-ttu-id="775e8-127">В общем случае не рекомендуется этот параметр, так как атрибут hello может использоваться Microsoft Online Services tooenable конкретных сценариев.</span><span class="sxs-lookup"><span data-stu-id="775e8-127">In general, we do not recommend this option since hello attribute may be used by Microsoft Online Services tooenable specific scenarios.</span></span> <span data-ttu-id="775e8-128">например:</span><span class="sxs-lookup"><span data-stu-id="775e8-128">In particular:</span></span>
    * <span data-ttu-id="775e8-129">атрибут userCertificate Hello hello объекта пользователя используется с Exchange Online и клиенты Outlook для подписывания и шифрования сообщений.</span><span class="sxs-lookup"><span data-stu-id="775e8-129">hello userCertificate attribute on hello User object is used by Exchange Online and Outlook clients for message signing and encryption.</span></span> <span data-ttu-id="775e8-130">toolearn больше об этой функции см. tooarticle [S/MIME для подписывания и шифрования сообщений](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span><span class="sxs-lookup"><span data-stu-id="775e8-130">toolearn more about this feature, refer tooarticle [S/MIME for message signing and encryption](https://technet.microsoft.com/library/dn626158(v=exchg.150).aspx).</span></span>

    * <span data-ttu-id="775e8-131">атрибут userCertificate Hello hello объекта-компьютера используется tooconnect устройств, присоединенных к домену tooAzure AD Azure AD tooallow Windows 10 в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="775e8-131">hello userCertificate attribute on hello Computer object is used by Azure AD tooallow Windows 10 on-premises domain-joined devices tooconnect tooAzure AD.</span></span> <span data-ttu-id="775e8-132">toolearn больше об этой функции см. tooarticle [подключения tooAzure устройств, присоединенных к домену AD, для Windows 10 возникает](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span><span class="sxs-lookup"><span data-stu-id="775e8-132">toolearn more about this feature, please refer tooarticle [Connect domain-joined devices tooAzure AD for Windows 10 experiences](https://docs.microsoft.com/azure/active-directory/active-directory-azureadjoin-devices-group-policy).</span></span>

## <a name="implementing-sync-rule-toolimit-export-of-usercertificate-attribute"></a><span data-ttu-id="775e8-133">Реализация экспорта toolimit правила синхронизации userCertificate атрибута</span><span class="sxs-lookup"><span data-stu-id="775e8-133">Implementing sync rule toolimit export of userCertificate attribute</span></span>
<span data-ttu-id="775e8-134">LargeObject hello tooresolve ошибка вызвана hello userCertificate атрибута, можно реализовать правило исходящей синхронизации в Azure AD Connect, которая экспортирует **значение вместо фактических значений для объектов с более чем на 15 значения сертификатаhellonull**.</span><span class="sxs-lookup"><span data-stu-id="775e8-134">tooresolve hello LargeObject error caused by hello userCertificate attribute, you can implement an outbound sync rule in Azure AD Connect that exports a **null value instead of hello actual values for objects with more than 15 certificate values**.</span></span> <span data-ttu-id="775e8-135">В этом разделе описываются правила hello действия требуется tooimplement hello синхронизации для **пользователя** объектов.</span><span class="sxs-lookup"><span data-stu-id="775e8-135">This section describes hello steps required tooimplement hello sync rule for **User** objects.</span></span> <span data-ttu-id="775e8-136">Hello действия может быть адаптирован для **контакт** и **компьютера** объектов.</span><span class="sxs-lookup"><span data-stu-id="775e8-136">hello steps can be adapted for **Contact** and **Computer** objects.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="775e8-137">Экспорт значение null Удаляет сертификат, что значения ранее успешно экспортирован tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-137">Exporting null value removes certificate values previously exported successfully tooAzure AD.</span></span>

<span data-ttu-id="775e8-138">Hello действия можно вкратце описать следующим образом:</span><span class="sxs-lookup"><span data-stu-id="775e8-138">hello steps can be summarized as:</span></span>

1. <span data-ttu-id="775e8-139">Отключите планировщик синхронизации и убедитесь, что синхронизация не выполняется.</span><span class="sxs-lookup"><span data-stu-id="775e8-139">Disable sync scheduler and verify there is no synchronization in progress.</span></span>
3. <span data-ttu-id="775e8-140">Найти существующее правило исходящей синхронизации hello userCertificate атрибута.</span><span class="sxs-lookup"><span data-stu-id="775e8-140">Find hello existing outbound sync rule for userCertificate attribute.</span></span>
4. <span data-ttu-id="775e8-141">Создание правила исходящей синхронизации hello требуется.</span><span class="sxs-lookup"><span data-stu-id="775e8-141">Create hello outbound sync rule required.</span></span>
5. <span data-ttu-id="775e8-142">Проверьте hello новое правило синхронизации на основе существующего объекта с ошибкой LargeObject.</span><span class="sxs-lookup"><span data-stu-id="775e8-142">Verify hello new sync rule on an existing object with LargeObject error.</span></span>
6. <span data-ttu-id="775e8-143">Примените hello новый синхронизации правило tooremaining объекты с ошибкой LargeObject.</span><span class="sxs-lookup"><span data-stu-id="775e8-143">Apply hello new sync rule tooremaining objects with LargeObject error.</span></span>
7. <span data-ttu-id="775e8-144">Проверьте, нет ли Непредвиденная изменений, требующих tooAzure toobe экспортировать AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-144">Verify there are no unexpected changes waiting toobe exported tooAzure AD.</span></span>
8. <span data-ttu-id="775e8-145">Экспорт tooAzure изменения hello AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-145">Export hello changes tooAzure AD.</span></span>
9. <span data-ttu-id="775e8-146">Повторно включите планировщик синхронизации.</span><span class="sxs-lookup"><span data-stu-id="775e8-146">Re-enable sync scheduler.</span></span>

### <a name="step-1-disable-sync-scheduler-and-verify-there-is-no-synchronization-in-progress"></a><span data-ttu-id="775e8-147">Шаг 1.</span><span class="sxs-lookup"><span data-stu-id="775e8-147">Step 1.</span></span> <span data-ttu-id="775e8-148">Отключите планировщик синхронизации и убедитесь, что синхронизация не выполняется</span><span class="sxs-lookup"><span data-stu-id="775e8-148">Disable sync scheduler and verify there is no synchronization in progress</span></span>
<span data-ttu-id="775e8-149">Убедитесь, синхронизация не выполняется, пока вы находитесь в середине hello реализации синхронизацию правило tooavoid непреднамеренного изменения срока экспортировать tooAzure AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-149">Ensure no synchronization takes place while you are in hello middle of implementing a new sync rule tooavoid unintended changes being exported tooAzure AD.</span></span> <span data-ttu-id="775e8-150">Планировщик синхронизации встроенных hello toodisable:</span><span class="sxs-lookup"><span data-stu-id="775e8-150">toodisable hello built-in sync scheduler:</span></span>
1. <span data-ttu-id="775e8-151">Запустите сеанс PowerShell на сервере hello Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="775e8-151">Start PowerShell session on hello Azure AD Connect server.</span></span>

2. <span data-ttu-id="775e8-152">Отключите плановую синхронизацию, выполнив командлет: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span><span class="sxs-lookup"><span data-stu-id="775e8-152">Disable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $false`</span></span>

> [!Note]
> <span data-ttu-id="775e8-153">Hello описанные выше шаги являются только применимые toonewer версии (1.1.xxx.x) Azure AD Connect с помощью встроенного планировщика hello.</span><span class="sxs-lookup"><span data-stu-id="775e8-153">hello preceding steps are only applicable toonewer versions (1.1.xxx.x) of Azure AD Connect with hello built-in scheduler.</span></span> <span data-ttu-id="775e8-154">Если вы используете более старых версий Azure AD Connect, который использует планировщик заданий Windows (1.0.xxx.x) или вы используете собственный пользовательский планировщик (как правило, не) tootrigger периодической синхронизации, необходимо toodisable их соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="775e8-154">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) tootrigger periodic synchronization, you need toodisable them accordingly.</span></span>

3. <span data-ttu-id="775e8-155">Запуск hello **диспетчер службы синхронизации** с переходом → tooSTART службы синхронизации.</span><span class="sxs-lookup"><span data-stu-id="775e8-155">Start hello **Synchronization Service Manager** by going tooSTART → Synchronization Service.</span></span>

4. <span data-ttu-id="775e8-156">Go toohello **операции** вкладку и подтвердите нет операции с состоянием *в состоянии «выполняется».*</span><span class="sxs-lookup"><span data-stu-id="775e8-156">Go toohello **Operations** tab and confirm there is no operation whose status is *“in progress.”*</span></span>

### <a name="step-2-find-hello-existing-outbound-sync-rule-for-usercertificate-attribute"></a><span data-ttu-id="775e8-157">Шаг 2.</span><span class="sxs-lookup"><span data-stu-id="775e8-157">Step 2.</span></span> <span data-ttu-id="775e8-158">Поиск атрибута userCertificate hello существующее правило исходящей синхронизации</span><span class="sxs-lookup"><span data-stu-id="775e8-158">Find hello existing outbound sync rule for userCertificate attribute</span></span>
<span data-ttu-id="775e8-159">Должно быть существующее правило синхронизации, включения и настройки атрибутов userCertificate tooexport для tooAzure объектов пользователя AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-159">There should be an existing sync rule that is enabled and configured tooexport userCertificate attribute for User objects tooAzure AD.</span></span> <span data-ttu-id="775e8-160">Найдите это toofind правило синхронизации out его **приоритет** и **фильтр области** конфигурации:</span><span class="sxs-lookup"><span data-stu-id="775e8-160">Locate this sync rule toofind out its **precedence** and **scoping filter** configuration:</span></span>

1. <span data-ttu-id="775e8-161">Запуск hello **редактор правил синхронизации** с переходом → tooSTART синхронизации правила редактора.</span><span class="sxs-lookup"><span data-stu-id="775e8-161">Start hello **Synchronization Rules Editor** by going tooSTART → Synchronization Rules Editor.</span></span>

2. <span data-ttu-id="775e8-162">Настройте фильтры поиска hello hello следующие значения:</span><span class="sxs-lookup"><span data-stu-id="775e8-162">Configure hello search filters with hello following values:</span></span>

    | <span data-ttu-id="775e8-163">Атрибут</span><span class="sxs-lookup"><span data-stu-id="775e8-163">Attribute</span></span> | <span data-ttu-id="775e8-164">Значение</span><span class="sxs-lookup"><span data-stu-id="775e8-164">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="775e8-165">Направление</span><span class="sxs-lookup"><span data-stu-id="775e8-165">Direction</span></span> |<span data-ttu-id="775e8-166">**Outbound**</span><span class="sxs-lookup"><span data-stu-id="775e8-166">**Outbound**</span></span> |
    | <span data-ttu-id="775e8-167">Тип объекта метавселенной</span><span class="sxs-lookup"><span data-stu-id="775e8-167">MV Object Type</span></span> |<span data-ttu-id="775e8-168">**Person**</span><span class="sxs-lookup"><span data-stu-id="775e8-168">**Person**</span></span> |
    | <span data-ttu-id="775e8-169">Соединитель</span><span class="sxs-lookup"><span data-stu-id="775e8-169">Connector</span></span> |<span data-ttu-id="775e8-170">*Имя вашего клиента Azure AD*</span><span class="sxs-lookup"><span data-stu-id="775e8-170">*name of your Azure AD connector*</span></span> |
    | <span data-ttu-id="775e8-171">Тип объекта соединителя</span><span class="sxs-lookup"><span data-stu-id="775e8-171">Connector Object Type</span></span> |<span data-ttu-id="775e8-172">**user**</span><span class="sxs-lookup"><span data-stu-id="775e8-172">**user**</span></span> |
    | <span data-ttu-id="775e8-173">Атрибуты метавселенной</span><span class="sxs-lookup"><span data-stu-id="775e8-173">MV attribute</span></span> |<span data-ttu-id="775e8-174">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="775e8-174">**userCertificate**</span></span> |

3. <span data-ttu-id="775e8-175">Если вы используете OOB (out-of-box) tooAzure AD правила синхронизации соединителя атрибут userCertficiate tooexport для пользовательских объектов, вы должны получить обратно hello *«ожидания tooAAD — ExchangeOnline пользователя»* правило.</span><span class="sxs-lookup"><span data-stu-id="775e8-175">If you are using OOB (out-of-box) sync rules tooAzure AD connector tooexport userCertficiate attribute for User objects, you should get back hello *“Out tooAAD – User ExchangeOnline”* rule.</span></span>
4. <span data-ttu-id="775e8-176">Запишите hello **приоритет** значение данного правила синхронизации.</span><span class="sxs-lookup"><span data-stu-id="775e8-176">Note down hello **precedence** value of this sync rule.</span></span>
5. <span data-ttu-id="775e8-177">Выберите правило синхронизации hello и нажмите кнопку **изменить**.</span><span class="sxs-lookup"><span data-stu-id="775e8-177">Select hello sync rule and click **Edit**.</span></span>
6. <span data-ttu-id="775e8-178">В hello *«Изменить зарезервированный правило подтверждения»* всплывающем диалоговом окне щелкните **нет**.</span><span class="sxs-lookup"><span data-stu-id="775e8-178">In hello *“Edit Reserved Rule Confirmation”* pop-up dialog, click **No**.</span></span> <span data-ttu-id="775e8-179">(Не беспокойтесь, мы не будем toomake любое правило синхронизации toothis изменений).</span><span class="sxs-lookup"><span data-stu-id="775e8-179">(Don’t worry, we are not going toomake any change toothis sync rule).</span></span>
7. <span data-ttu-id="775e8-180">На экране приветствия редактирования выберите hello **фильтр области** вкладки.</span><span class="sxs-lookup"><span data-stu-id="775e8-180">In hello edit screen, select hello **Scoping filter** tab.</span></span>
8. <span data-ttu-id="775e8-181">Запишите hello области конфигурации фильтра.</span><span class="sxs-lookup"><span data-stu-id="775e8-181">Note down hello scoping filter configuration.</span></span> <span data-ttu-id="775e8-182">При использовании правил синхронизации OOB hello точно следует **одной области фильтра группа, содержащая два предложения**, в том числе:</span><span class="sxs-lookup"><span data-stu-id="775e8-182">If you are using hello OOB sync rule, there should exactly be **one scoping filter group containing two clauses**, including:</span></span>

    | <span data-ttu-id="775e8-183">Атрибут</span><span class="sxs-lookup"><span data-stu-id="775e8-183">Attribute</span></span> | <span data-ttu-id="775e8-184">Оператор</span><span class="sxs-lookup"><span data-stu-id="775e8-184">Operator</span></span> | <span data-ttu-id="775e8-185">Значение</span><span class="sxs-lookup"><span data-stu-id="775e8-185">Value</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="775e8-186">sourceObjectType</span><span class="sxs-lookup"><span data-stu-id="775e8-186">sourceObjectType</span></span> | <span data-ttu-id="775e8-187">EQUAL</span><span class="sxs-lookup"><span data-stu-id="775e8-187">EQUAL</span></span> | <span data-ttu-id="775e8-188">Пользователь</span><span class="sxs-lookup"><span data-stu-id="775e8-188">User</span></span> |
    | <span data-ttu-id="775e8-189">cloudMastered</span><span class="sxs-lookup"><span data-stu-id="775e8-189">cloudMastered</span></span> | <span data-ttu-id="775e8-190">NOTEQUAL</span><span class="sxs-lookup"><span data-stu-id="775e8-190">NOTEQUAL</span></span> | <span data-ttu-id="775e8-191">Да</span><span class="sxs-lookup"><span data-stu-id="775e8-191">True</span></span> |

### <a name="step-3-create-hello-outbound-sync-rule-required"></a><span data-ttu-id="775e8-192">Шаг 3.</span><span class="sxs-lookup"><span data-stu-id="775e8-192">Step 3.</span></span> <span data-ttu-id="775e8-193">Создание правила исходящей синхронизации hello требуется</span><span class="sxs-lookup"><span data-stu-id="775e8-193">Create hello outbound sync rule required</span></span>
<span data-ttu-id="775e8-194">Hello новое правило синхронизации должна иметь hello же **фильтр области** и **более высокий приоритет** чем hello существующее правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="775e8-194">hello new sync rule must have hello same **scoping filter** and **higher precedence** than hello existing sync rule.</span></span> <span data-ttu-id="775e8-195">Это гарантирует, что новое правило синхронизации hello относятся toohello же набор объектов как hello существующее правило синхронизации и переопределений hello существующего синхронизации правила для атрибута userCertificate hello.</span><span class="sxs-lookup"><span data-stu-id="775e8-195">This ensures that hello new sync rule applies toohello same set of objects as hello existing sync rule and overrides hello existing sync rule for hello userCertificate attribute.</span></span> <span data-ttu-id="775e8-196">правило синхронизации hello toocreate:</span><span class="sxs-lookup"><span data-stu-id="775e8-196">toocreate hello sync rule:</span></span>
1. <span data-ttu-id="775e8-197">В hello редактор правил синхронизации, щелкните hello **добавить новое правило** кнопки.</span><span class="sxs-lookup"><span data-stu-id="775e8-197">In hello Synchronization Rules Editor, click hello **Add new rule** button.</span></span>
2. <span data-ttu-id="775e8-198">В разделе hello **вкладка "Описание"**, предоставляют hello следующая конфигурация:</span><span class="sxs-lookup"><span data-stu-id="775e8-198">Under hello **Description tab**, provide hello following configuration:</span></span>

    | <span data-ttu-id="775e8-199">Атрибут</span><span class="sxs-lookup"><span data-stu-id="775e8-199">Attribute</span></span> | <span data-ttu-id="775e8-200">Значение</span><span class="sxs-lookup"><span data-stu-id="775e8-200">Value</span></span> | <span data-ttu-id="775e8-201">Сведения</span><span class="sxs-lookup"><span data-stu-id="775e8-201">Details</span></span> |
    | --- | --- | --- |
    | <span data-ttu-id="775e8-202">Имя</span><span class="sxs-lookup"><span data-stu-id="775e8-202">Name</span></span> | <span data-ttu-id="775e8-203">*Укажите имя*</span><span class="sxs-lookup"><span data-stu-id="775e8-203">*Provide a name*</span></span> | <span data-ttu-id="775e8-204">Например *«Out tooAAD — настраиваемый переопределение для userCertificate»*</span><span class="sxs-lookup"><span data-stu-id="775e8-204">E.g., *“Out tooAAD – Custom override for userCertificate”*</span></span> |
    | <span data-ttu-id="775e8-205">Описание</span><span class="sxs-lookup"><span data-stu-id="775e8-205">Description</span></span> | <span data-ttu-id="775e8-206">*Укажите описание*</span><span class="sxs-lookup"><span data-stu-id="775e8-206">*Provide a description*</span></span> | <span data-ttu-id="775e8-207">Например, *если атрибут userCertificate содержит более 15 значений, экспортировать NULL.*</span><span class="sxs-lookup"><span data-stu-id="775e8-207">E.g., *“If userCertificate attribute has more than 15 values, export NULL.”*</span></span> |
    | <span data-ttu-id="775e8-208">Подключенная система</span><span class="sxs-lookup"><span data-stu-id="775e8-208">Connected System</span></span> | <span data-ttu-id="775e8-209">*Выберите hello соединителя Azure AD*</span><span class="sxs-lookup"><span data-stu-id="775e8-209">*Select hello Azure AD Connector*</span></span> |
    | <span data-ttu-id="775e8-210">Тип объекта подключенной системы</span><span class="sxs-lookup"><span data-stu-id="775e8-210">Connected System Object Type</span></span> | <span data-ttu-id="775e8-211">**user**</span><span class="sxs-lookup"><span data-stu-id="775e8-211">**user**</span></span> | |
    | <span data-ttu-id="775e8-212">Тип объекта метавселенной</span><span class="sxs-lookup"><span data-stu-id="775e8-212">Metaverse Object Type</span></span> | <span data-ttu-id="775e8-213">**person**</span><span class="sxs-lookup"><span data-stu-id="775e8-213">**person**</span></span> | |
    | <span data-ttu-id="775e8-214">Тип связи</span><span class="sxs-lookup"><span data-stu-id="775e8-214">Link Type</span></span> | <span data-ttu-id="775e8-215">**Join**</span><span class="sxs-lookup"><span data-stu-id="775e8-215">**Join**</span></span> | |
    | <span data-ttu-id="775e8-216">Приоритет</span><span class="sxs-lookup"><span data-stu-id="775e8-216">Precedence</span></span> | <span data-ttu-id="775e8-217">*Выберите число от 1 до 99*</span><span class="sxs-lookup"><span data-stu-id="775e8-217">*Chose a number between 1 - 99*</span></span> | <span data-ttu-id="775e8-218">Hello число_выбранных не должны использоваться любое существующее правило синхронизации и имеет меньшее значение (и, следовательно, более высокий приоритет), чем hello существующее правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="775e8-218">hello number chosen must not be used by any existing sync rule and has a lower value (and therefore, higher precedence) than hello existing sync rule.</span></span> |

3. <span data-ttu-id="775e8-219">Go toohello **фильтр области** вкладку и реализовать hello, используя же области фильтра hello существующих правило синхронизации.</span><span class="sxs-lookup"><span data-stu-id="775e8-219">Go toohello **Scoping filter** tab and implement hello same scoping filter hello existing sync rule is using.</span></span>
4. <span data-ttu-id="775e8-220">Пропустить hello **правила присоединения** вкладки.</span><span class="sxs-lookup"><span data-stu-id="775e8-220">Skip hello **Join rules** tab.</span></span>
5. <span data-ttu-id="775e8-221">Go toohello **преобразования** вкладке tooadd новую преобразование, используя следующие конфигурации:</span><span class="sxs-lookup"><span data-stu-id="775e8-221">Go toohello **Transformations** tab tooadd a new transformation using following configuration:</span></span>

    | <span data-ttu-id="775e8-222">Атрибут</span><span class="sxs-lookup"><span data-stu-id="775e8-222">Attribute</span></span> | <span data-ttu-id="775e8-223">Значение</span><span class="sxs-lookup"><span data-stu-id="775e8-223">Value</span></span> |
    | --- | --- |
    | <span data-ttu-id="775e8-224">Тип потока</span><span class="sxs-lookup"><span data-stu-id="775e8-224">Flow Type</span></span> |<span data-ttu-id="775e8-225">**Expression**</span><span class="sxs-lookup"><span data-stu-id="775e8-225">**Expression**</span></span> |
    | <span data-ttu-id="775e8-226">Целевой атрибут</span><span class="sxs-lookup"><span data-stu-id="775e8-226">Target Attribute</span></span> |<span data-ttu-id="775e8-227">**userCertificate**</span><span class="sxs-lookup"><span data-stu-id="775e8-227">**userCertificate**</span></span> |
    | <span data-ttu-id="775e8-228">Исходный атрибут</span><span class="sxs-lookup"><span data-stu-id="775e8-228">Source Attribute</span></span> |<span data-ttu-id="775e8-229">*Следующее выражение hello используйте*:`IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span><span class="sxs-lookup"><span data-stu-id="775e8-229">*Use hello following expression*: `IIF(IsNullOrEmpty([userCertificate]), NULL, IIF((Count([userCertificate])> 15),AuthoritativeNull,[userCertificate]))`</span></span> |
    
6. <span data-ttu-id="775e8-230">Нажмите кнопку hello **добавить** правило синхронизации hello toocreate кнопки.</span><span class="sxs-lookup"><span data-stu-id="775e8-230">Click hello **Add** button toocreate hello sync rule.</span></span>

### <a name="step-4-verify-hello-new-sync-rule-on-an-existing-object-with-largeobject-error"></a><span data-ttu-id="775e8-231">Шаг 4.</span><span class="sxs-lookup"><span data-stu-id="775e8-231">Step 4.</span></span> <span data-ttu-id="775e8-232">Проверьте hello новое правило синхронизации на основе существующего объекта с ошибкой LargeObject</span><span class="sxs-lookup"><span data-stu-id="775e8-232">Verify hello new sync rule on an existing object with LargeObject error</span></span>
<span data-ttu-id="775e8-233">Это tooverify, hello синхронизации правило создано работает правильно на основе существующего объекта AD с ошибкой LargeObject применить tooother объектов:</span><span class="sxs-lookup"><span data-stu-id="775e8-233">This is tooverify that hello sync rule created is working correctly on an existing AD object with LargeObject error before you apply it tooother objects:</span></span>
1. <span data-ttu-id="775e8-234">Go toohello **операции** hello Synchronization Service Manager на вкладке.</span><span class="sxs-lookup"><span data-stu-id="775e8-234">Go toohello **Operations** tab in hello Synchronization Service Manager.</span></span>
2. <span data-ttu-id="775e8-235">Hello последней операции экспорта tooAzure AD и щелкните один из объектов hello LargeObject ошибок.</span><span class="sxs-lookup"><span data-stu-id="775e8-235">Select hello most recent Export tooAzure AD operation and click on one of hello objects with LargeObject errors.</span></span>
3.  <span data-ttu-id="775e8-236">В новое окно hello свойства объекта пространства соединителя, щелкните hello **предварительного просмотра** кнопки.</span><span class="sxs-lookup"><span data-stu-id="775e8-236">In hello Connector Space Object Properties pop-up screen, click on hello **Preview** button.</span></span>
4. <span data-ttu-id="775e8-237">В новое окно предварительного просмотра hello, выберите **полная синхронизация** и нажмите кнопку **зафиксировать Preview**.</span><span class="sxs-lookup"><span data-stu-id="775e8-237">In hello Preview pop-up screen, select **Full synchronization** and click **Commit Preview**.</span></span>
5. <span data-ttu-id="775e8-238">Закройте окно Предварительный просмотр экран приветствия и свойства объекта пространства соединителя экран приветствия.</span><span class="sxs-lookup"><span data-stu-id="775e8-238">Close hello Preview screen and hello Connector Space Object Properties screen.</span></span>
6. <span data-ttu-id="775e8-239">Go toohello **соединители** hello Synchronization Service Manager на вкладке.</span><span class="sxs-lookup"><span data-stu-id="775e8-239">Go toohello **Connectors** tab in hello Synchronization Service Manager.</span></span>
7. <span data-ttu-id="775e8-240">Щелкните правой кнопкой мыши на hello **Azure AD** соединитель и выберите **запуска...**</span><span class="sxs-lookup"><span data-stu-id="775e8-240">Right-click on hello **Azure AD** Connector and select **Run...**</span></span>
8. <span data-ttu-id="775e8-241">Во всплывающем запуска соединителя hello, выберите **Экспорт** шаг и щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="775e8-241">In hello Run Connector pop-up, select **Export** step and click **OK**.</span></span>
9. <span data-ttu-id="775e8-242">Дождитесь toocomplete tooAzure AD экспорта и убедиться, что ошибка не дополнительные LargeObject на данном объекте.</span><span class="sxs-lookup"><span data-stu-id="775e8-242">Wait for Export tooAzure AD toocomplete and confirm there is no more LargeObject error on this specific object.</span></span>

### <a name="step-5-apply-hello-new-sync-rule-tooremaining-objects-with-largeobject-error"></a><span data-ttu-id="775e8-243">Шаг 5.</span><span class="sxs-lookup"><span data-stu-id="775e8-243">Step 5.</span></span> <span data-ttu-id="775e8-244">Применить hello новых синхронизации правило tooremaining объектов с ошибкой LargeObject</span><span class="sxs-lookup"><span data-stu-id="775e8-244">Apply hello new sync rule tooremaining objects with LargeObject error</span></span>
<span data-ttu-id="775e8-245">После добавления правила синхронизации hello требуется toorun шага полную синхронизацию в hello соединителя AD:</span><span class="sxs-lookup"><span data-stu-id="775e8-245">Once hello sync rule has been added, you need toorun a full synchronization step on hello AD Connector:</span></span>
1. <span data-ttu-id="775e8-246">Go toohello **соединители** hello Synchronization Service Manager на вкладке.</span><span class="sxs-lookup"><span data-stu-id="775e8-246">Go toohello **Connectors** tab in hello Synchronization Service Manager.</span></span>
2. <span data-ttu-id="775e8-247">Щелкните правой кнопкой мыши на hello **AD** соединитель и выберите **запуска...**</span><span class="sxs-lookup"><span data-stu-id="775e8-247">Right-click on hello **AD** Connector and select **Run...**</span></span>
3. <span data-ttu-id="775e8-248">Во всплывающем запуска соединителя hello, выберите **полная синхронизация** шаг и щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="775e8-248">In hello Run Connector pop-up, select **Full Synchronization** step and click **OK**.</span></span>
4. <span data-ttu-id="775e8-249">Дождитесь toocomplete шаг hello полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="775e8-249">Wait for hello Full Synchronization step toocomplete.</span></span>
5. <span data-ttu-id="775e8-250">Повторите hello выше шаги для hello оставшийся соединители AD, если у вас есть несколько соединителей AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-250">Repeat hello above steps for hello remaining AD Connectors if you have more than one AD Connectors.</span></span> <span data-ttu-id="775e8-251">Как правило, для нескольких локальных каталогов требуется несколько соединителей.</span><span class="sxs-lookup"><span data-stu-id="775e8-251">Usually, multiple connectors are required if you have multiple on-premises directories.</span></span>

### <a name="step-6-verify-there-are-no-unexpected-changes-waiting-toobe-exported-tooazure-ad"></a><span data-ttu-id="775e8-252">Шаг 6.</span><span class="sxs-lookup"><span data-stu-id="775e8-252">Step 6.</span></span> <span data-ttu-id="775e8-253">Проверьте, нет Непредвиденная изменений, требующих tooAzure toobe экспортировать AD</span><span class="sxs-lookup"><span data-stu-id="775e8-253">Verify there are no unexpected changes waiting toobe exported tooAzure AD</span></span>
1. <span data-ttu-id="775e8-254">Go toohello **соединители** hello Synchronization Service Manager на вкладке.</span><span class="sxs-lookup"><span data-stu-id="775e8-254">Go toohello **Connectors** tab in hello Synchronization Service Manager.</span></span>
2. <span data-ttu-id="775e8-255">Щелкните правой кнопкой мыши на hello **Azure AD** соединитель и выберите **поиска пространства соединителя**.</span><span class="sxs-lookup"><span data-stu-id="775e8-255">Right-click on hello **Azure AD** Connector and select **Search Connector Space**.</span></span>
3. <span data-ttu-id="775e8-256">Во всплывающем hello поиска пространства соединителя:</span><span class="sxs-lookup"><span data-stu-id="775e8-256">In hello Search Connector Space pop-up:</span></span>
    1. <span data-ttu-id="775e8-257">Настройка области слишком**ожидающие экспорта**.</span><span class="sxs-lookup"><span data-stu-id="775e8-257">Set Scope too**Pending Export**.</span></span>
    2. <span data-ttu-id="775e8-258">Установите все 3 флажка, в том числе **Добавить**, **Изменить** и **Удалить**.</span><span class="sxs-lookup"><span data-stu-id="775e8-258">Check all 3 checkboxes, including **Add**, **Modify** and **Delete**.</span></span>
    3. <span data-ttu-id="775e8-259">Нажмите кнопку **поиска** кнопку tooreturn все объекты с изменений, требующих tooAzure toobe экспортировать AD.</span><span class="sxs-lookup"><span data-stu-id="775e8-259">Click **Search** button tooreturn all objects with changes waiting toobe exported tooAzure AD.</span></span>
    4. <span data-ttu-id="775e8-260">Убедитесь, что непредвиденные изменения отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="775e8-260">Verify there are no unexpected changes.</span></span> <span data-ttu-id="775e8-261">Дважды щелкните hello объекта tooexamine hello изменения для данного объекта.</span><span class="sxs-lookup"><span data-stu-id="775e8-261">tooexamine hello changes for a given object, double-click on hello object.</span></span>

### <a name="step-7-export-hello-changes-tooazure-ad"></a><span data-ttu-id="775e8-262">Шаг 7.</span><span class="sxs-lookup"><span data-stu-id="775e8-262">Step 7.</span></span> <span data-ttu-id="775e8-263">Экспорт tooAzure изменения hello AD</span><span class="sxs-lookup"><span data-stu-id="775e8-263">Export hello changes tooAzure AD</span></span>
<span data-ttu-id="775e8-264">изменения tooAzure hello tooexport AD:</span><span class="sxs-lookup"><span data-stu-id="775e8-264">tooexport hello changes tooAzure AD:</span></span>
1. <span data-ttu-id="775e8-265">Go toohello **соединители** hello Synchronization Service Manager на вкладке.</span><span class="sxs-lookup"><span data-stu-id="775e8-265">Go toohello **Connectors** tab in hello Synchronization Service Manager.</span></span>
2. <span data-ttu-id="775e8-266">Щелкните правой кнопкой мыши на hello **Azure AD** соединитель и выберите **запуска...**</span><span class="sxs-lookup"><span data-stu-id="775e8-266">Right-click on hello **Azure AD** Connector and select **Run...**</span></span>
4. <span data-ttu-id="775e8-267">Во всплывающем запуска соединителя hello, выберите **Экспорт** шаг и щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="775e8-267">In hello Run Connector pop-up, select **Export** step and click **OK**.</span></span>
5. <span data-ttu-id="775e8-268">Дождитесь toocomplete tooAzure AD экспорта и убедиться, что отсутствуют дополнительные ошибки LargeObject.</span><span class="sxs-lookup"><span data-stu-id="775e8-268">Wait for Export tooAzure AD toocomplete and confirm there are no more LargeObject errors.</span></span>

### <a name="step-8-re-enable-sync-scheduler"></a><span data-ttu-id="775e8-269">Шаг 8.</span><span class="sxs-lookup"><span data-stu-id="775e8-269">Step 8.</span></span> <span data-ttu-id="775e8-270">Повторно включите планировщик синхронизации</span><span class="sxs-lookup"><span data-stu-id="775e8-270">Re-enable sync scheduler</span></span>
<span data-ttu-id="775e8-271">Теперь, когда hello проблема будет устранена, повторно включите планировщика hello встроенных синхронизации:</span><span class="sxs-lookup"><span data-stu-id="775e8-271">Now that hello issue is resolved, re-enable hello built-in sync scheduler:</span></span>
1. <span data-ttu-id="775e8-272">Запустите сеанс PowerShell.</span><span class="sxs-lookup"><span data-stu-id="775e8-272">Start PowerShell session.</span></span>
2. <span data-ttu-id="775e8-273">Повторно включите плановую синхронизацию, выполнив командлет: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span><span class="sxs-lookup"><span data-stu-id="775e8-273">Re-enable scheduled synchronization by running cmdlet: `Set-ADSyncScheduler -SyncCycleEnabled $true`</span></span>

> [!Note]
> <span data-ttu-id="775e8-274">Hello описанные выше шаги являются только применимые toonewer версии (1.1.xxx.x) Azure AD Connect с помощью встроенного планировщика hello.</span><span class="sxs-lookup"><span data-stu-id="775e8-274">hello preceding steps are only applicable toonewer versions (1.1.xxx.x) of Azure AD Connect with hello built-in scheduler.</span></span> <span data-ttu-id="775e8-275">Если вы используете более старых версий Azure AD Connect, который использует планировщик заданий Windows (1.0.xxx.x) или вы используете собственный пользовательский планировщик (как правило, не) tootrigger периодической синхронизации, необходимо toodisable их соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="775e8-275">If you are using older versions (1.0.xxx.x) of Azure AD Connect that uses Windows Task Scheduler, or you are using your own custom scheduler (not common) tootrigger periodic synchronization, you need toodisable them accordingly.</span></span>

## <a name="next-steps"></a><span data-ttu-id="775e8-276">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="775e8-276">Next steps</span></span>
<span data-ttu-id="775e8-277">Узнайте больше об [интеграции локальных удостоверений с Azure Active Directory](active-directory-aadconnect.md).</span><span class="sxs-lookup"><span data-stu-id="775e8-277">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>

