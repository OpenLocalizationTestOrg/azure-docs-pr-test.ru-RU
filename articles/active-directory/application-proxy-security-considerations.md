---
title: "вопросы aaaSecurity прокси приложения Azure AD | Документы Microsoft"
description: "В этой статье рассматриваются вопросы безопасности при использовании прокси приложения Azure AD."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/03/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro
ms.openlocfilehash: ebd14b9d1fc8f4629c5916e5a910595727d935d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="security-considerations-for-accessing-apps-remotely-with-azure-ad-application-proxy"></a>Вопросы безопасности при удаленном доступе к приложениям через прокси приложения Azure AD

В этой статье описывается, каким образом прокси приложения Azure Active Directory обеспечивает безопасную публикацию приложений и удаленный доступ к ним.

Привет, следующая схема показывает, каким образом Azure AD позволяет приложениям в локальной tooyour безопасного удаленного доступа.

 ![Схема безопасного удаленного доступа через прокси приложения Azure AD](./media/application-proxy-security-considerations/secure-remote-access.png)

## <a name="security-benefits"></a>Преимущества безопасности

Прокси приложения Azure AD предлагает следующие преимущества безопасности hello.

### <a name="authenticated-access"></a>Аутентифицируемый доступ 

При выборе toouse Azure Active Directory предварительной проверки подлинности только проверенные на подлинность соединения возможность подключения к сети.

Прокси приложения Azure AD использует hello Azure AD службы маркеров безопасности (STS) для всех проверки подлинности.  Предварительной проверки подлинности, по своей природе блокирует значительное число анонимных атак, поскольку только прошедших проверку подлинности удостоверений можно получить доступ к серверному приложению hello.

Если выбрать сквозной режим для предварительной аутентификации, это преимущество будет отсутствовать. 

### <a name="conditional-access"></a>Условный доступ

Применить расширенные элементы управления политиками перед tooyour сети устанавливаются соединения.

С [условного доступа](active-directory-conditional-access-azuread-connected-apps.md), можно определить ограничения на трафик будет разрешен tooaccess серверной части приложения. Вы можете создать политики, ограничивающие вход на основе расположения, надежности аутентификации и профиля риска пользователя.

Также можно использовать политики многофакторной проверки подлинности tooconfigure условного доступа, добавления еще одного уровня проверки подлинности пользователей tooyour безопасности. 

### <a name="traffic-termination"></a>Завершение трафика

Весь трафик завершается в облаке hello.

Так как прокси приложения Azure AD обратного прокси-сервера, все приложения конечным tooback трафика заканчивается на службу hello. Hello сеанса можно получить заново только с внутреннего сервера hello, это означает, что на внутренних серверах, не предоставляемые toodirect HTTP-трафика. Эта конфигурация означает повышенную защиту от целенаправленных атак.

### <a name="all-access-is-outbound"></a>Только исходящий доступ 

Не нужно tooopen входящих соединений toohello корпоративной сети.

Соединители прокси приложения могут использовать только службы прокси приложения toohello Azure AD для исходящих подключений, это означает, что нет необходимости tooopen порты брандмауэра для входящих подключений. Традиционные учетных записей-посредников требуется в сети периметра (также называется *DMZ*, *демилитаризованная зона*, или *экранированная подсеть*) и toounauthenticated доступ разрешен подключения на границе сети hello. Этот сценарий требуется много дополнительных вложений в веб-приложение брандмауэра трафик tooanalyze продуктов и предложите Добавление защиты toohello среду. Благодаря прокси приложения можно отказаться от сети периметра, так как теперь все подключения являются исходящими и передаются по защищенному каналу.

Дополнительные сведения о соединителях см. в статье [Сведения о соединителях прокси приложения Azure AD](application-proxy-understand-connectors.md).

### <a name="cloud-scale-analytics-and-machine-learning"></a>Облачная аналитика и машинное обучение 

Получите новейшую систему безопасности.

Так как он является частью Azure Active Directory, могут использовать прокси-сервер приложения [Azure AD Identity Protection](active-directory-identityprotection.md)с аналитики обучения управляемого компьютера и данные из Microsoft Security Response Center hello и Digital Crimes Unit. Вместе мы в упреждающем режиме определяем скомпрометированные учетные записи и обеспечиваем защиту в реальном времени от входов, представляющих высокий уровень риска. Мы учитываем множество факторов, таких как доступ с зараженных устройств, из нетипичных и сомнительных расположений, а также через анонимизирующие сети.

Многие из этих отчетов и событий уже сейчас можно использовать в API для интеграции с системами управления сведениями о безопасности и событиями (SIEM).

### <a name="remote-access-as-a-service"></a>Удаленный доступ как услуга

У вас нет tooworry о поддержке и исправления на локальных серверах.

Программное обеспечение, на котором не установлены исправления, по-прежнему подвергается большому количеству атак. Прокси приложения Azure AD — это масштабируемая Интернет-служба, которая принадлежит корпорации Майкрософт, это всегда hello обновления безопасности и обновления.

безопасность hello tooimprove приложений, опубликованных через прокси приложения Azure AD, мы блокировать web роботов программой-обходчиком из индексирования и архивация приложений. Каждый раз, когда программа-обходчик пытается получить параметры автоматической обработки для опубликованного приложения, прокси приложения отправляет ей файл robots.txt, который содержит `User-agent: * Disallow: /`.

## <a name="under-hello-hood"></a>Кулисами hello

Прокси приложения Azure AD состоит из двух частей:

* Здравствуйте, облачная служба: Эта служба работает в Azure и является местом hello подключения внешнего клиента или пользователя.
* [Hello локального соединителя](application-proxy-understand-connectors.md): компонент локального соединителя hello прослушивает запросы от службы прокси приложения hello Azure AD и обрабатывает внутренних приложений toohello подключений. 

Поток между соединитель hello и службы прокси приложения hello устанавливается при:

* Соединитель Hello сначала настроить.
* Соединитель Hello запрашивает информацию о конфигурации из службы прокси приложения hello.
* Пользователь получает доступ к опубликованному приложению.

>[!NOTE]
>Любой обмен данными выполняется по протоколу SSL, и они всегда создаются на toohello hello соединитель прокси приложения службы. только службы Hello является исходящим.

Соединитель Hello использует toohello tooauthenticate сертификат клиента службы прокси приложения для почти всех вызовов. Hello только процесс toothis исключение — hello начальной настройки шаг, где установлен сертификат клиента hello.

### <a name="installing-hello-connector"></a>Установка соединителя hello

При первой настройке соединителя hello hello после событий потока происходить:

1. Служба toohello регистрации соединителя Hello происходит в процессе установки hello hello соединителя. Пользователи являются tooenter запрашиваемые учетные данные администратора Azure AD. Затем токена, полученного от этой проверки подлинности представляется toohello службы прокси приложения Azure AD.
2. прокси-служба приложения Hello вычисляет токен hello. Это гарантирует, что hello пользователя-администратора организации в клиенте hello, hello токена был выпущен для. Если пользователь hello не является администратором, hello процесс завершается.
3. Соединитель Hello создает запрос на сертификат клиента и передает его, вместе с маркера, toohello hello прокси-сервер приложения службы. в свою очередь, служба Hello проверяет токен hello и подписывает запрос сертификата клиента hello.
4. Соединитель Hello использует hello клиентский сертификат для будущих связи с прокси-служба приложения hello.
5. Соединитель Hello выполняет начальной запросу hello данные конфигурации системы с hello службы с использованием его сертификата клиента и теперь является готов tootake запросов.

### <a name="updating-hello-configuration-settings"></a>Обновление параметров конфигурации hello

Каждый раз, когда прокси-служба приложения hello обновляет параметры конфигурации hello, hello после событий потока происходить:

1. Соединитель Hello подключается конечной точки конфигурации toohello внутри hello прокси-сервер приложения службы с помощью сертификата клиента.
2. После проверки сертификата клиента hello службы прокси приложения hello возвращает соединитель toohello данных конфигурации (например, группы соединителей hello, hello соединителя должно быть частью).
3. Если hello текущий сертификат более чем 180 дней, соединитель hello создает новый запрос на сертификат, который фактически обновляет сертификат клиента hello раз в 180 дней.

### <a name="accessing-published-applications"></a>Доступ к опубликованным приложениям

При доступе к опубликованному приложению, hello происходит следующее между службой прокси приложения hello и соединитель прокси приложения hello:

1. [Hello служба проверяет подлинность пользователя hello приложение hello](#the-service-checks-the-configuration-settings-for-the-app)
2. [Служба Hello помещает запрос в очередь коннектора hello](#The-service-places-a-request-in-the-connector-queue)
3. [Соединитель обрабатывает запрос hello из очереди hello](#the-connector-receives-the-request-from-the-queue)
4. [Соединитель Hello ожидает ответа](#the-connector-waits-for-a-response)
5. [Hello службы потоки данных toohello пользователя](#the-service-streams-data-to-the-user)

продолжить чтение toolearn Дополнительные сведения о том, что происходит в каждое из этих действий.


#### <a name="1-hello-service-authenticates-hello-user-for-hello-app"></a>1. hello служба проверяет подлинность пользователя hello приложение hello

Если приложение hello toouse Passthrough настроен в качестве его метод предварительной проверки подлинности, hello шаги в этом разделе, пропускаются.

Если вы настроили toopreauthenticate приложения hello в Azure AD, пользователи являются перенаправленный toohello tooauthenticate STS Azure AD, и hello следующие шаги выполняются:

1. Прокси приложения проверяет все требования политики условного доступа для конкретного приложения hello. Это действие гарантирует, что этот пользователь hello назначена toohello приложения. При необходимости двухшаговую проверку, hello последовательность проверки подлинности пользователю hello для второй метод проверки подлинности.

2. После выполнения всех проверок, hello Azure AD STS выдает подписанный маркер для приложения hello и перенаправляет hello задней toohello пользователя прокси-сервера приложения службы.

3. Прокси приложения, подтверждает, что этот токен hello был выдан toocorrect приложения hello. Он также выполняет другие проверки, с помощью Azure AD, например убедиться, что hello подписан токен и — что он по-прежнему внутри окна допустимым hello.

4. Прокси приложения устанавливается tooindicate зашифрованной проверки подлинности файла cookie возникшей toohello приложения проверки подлинности. Hello куки-файл включает отметку времени истечения срока действия, основанный на hello токена от Azure AD и другие данные, такие как имя пользователя hello, Здравствуйте, проверка подлинности основывается на. Hello файл cookie шифруется с закрытым ключом, который известен только toohello прокси-сервера приложения службы.

5. Приложение прокси-сервера переадресации hello пользователя задней toohello первоначально запрошенный URL-адрес.

При сбое любой части предварительной проверки подлинности шаги hello пользователя hello запрос отклоняется и hello пользователь увидит сообщение hello источник проблемы hello.


#### <a name="2-hello-service-places-a-request-in-hello-connector-queue"></a>2. hello служба помещает запрос в очередь коннектора hello

Соединители сохранить открытые toohello исходящее подключение службы прокси приложения. При поступлении запроса службы hello ставит в очередь запрос hello на одном hello открытых соединений для hello соединитель toopick вверх.

запрос Hello содержит элементы из приложения hello, например заголовки запроса данных из файла cookie шифрования hello hello, идентификатор запроса hello пользователя, выполняющего hello запроса и hello Несмотря на то, что данных из зашифрованного файла cookie hello отправляется в запросе hello, файла cookie проверки подлинности hello сам не является.

#### <a name="3-hello-connector-processes-hello-request-from-hello-queue"></a>3. hello соединителя обрабатывает запрос hello из очереди hello. 

На основании запроса hello, прокси-сервер приложения выполняет одно из hello следующие действия.

* Если запрос hello — простая операция (например, нет данных в теле hello как с категории RESTful *получить* запроса), соединитель hello создает внутренний ресурс целевой toohello подключения и затем ожидает ответа.

* Если запрос hello содержит данные, связанные с ним в тексте hello (например, категории RESTful *POST* операции), соединитель hello делает исходящее подключение, используя экземпляр прокси-сервера приложения toohello сертификат клиента hello. Он делает их hello toorequest соединение и открыть ресурс toohello внутреннего соединения. После получения запроса hello из соединителя hello, службы прокси приложения hello начинает принимать содержимое от пользователя hello и пересылает данные toohello соединителя. Соединитель Hello, в свою очередь пересылает hello данных toohello внутренних ресурсов.

#### <a name="4-hello-connector-waits-for-a-response"></a>4. соединитель hello время ожидания ответа.

После запроса hello и передачей всего содержимого toohello окончания завершается, соединитель hello ожидает ответа.

После получения ответа, соединитель hello делает исходящее подключение toohello прокси-сервера приложения службы, tooreturn сведения заголовка hello с последующим потоковой передачи hello возвращаемых данных.

#### <a name="5-hello-service-streams-data-toohello-user"></a>5. hello службы потоки данных toohello пользователя. 

Некоторые приложения hello могут произойти здесь. Если вы настроили заголовки tootranslate прокси-сервера приложения или URL-адресов в приложении обработки происходит при необходимости во время выполнения этого шага.


## <a name="next-steps"></a>Дальнейшие действия

[Аспекты топологии сети при использовании прокси приложения Azure AD](application-proxy-network-topology-considerations.md)

[Сведения о соединителях прокси приложения Azure AD](application-proxy-understand-connectors.md)
