---
title: "Настройка мониторинга событий с помощью концентраторов событий Azure для Azure Logic Apps | Документация Майкрософт"
description: "Мониторинг потоков данных, передающих события между Azure Logic Apps и концентраторами событий Azure"
services: logic-apps
keywords: "поток данных, монитор событий, концентраторы событий"
author: ecfan
manager: anneta
editor: 
documentationcenter: 
tags: connectors
ms.assetid: 
ms.service: logic-apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/31/2017
ms.author: estfan; LADocs
ms.openlocfilehash: a7f31c2c17d326d58ede0bb00cdc0f701069ea14
ms.sourcegitcommit: be9a42d7b321304d9a33786ed8e2b9b972a5977e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2018
---
# <a name="monitor-receive-and-send-events-with-the-event-hubs-connector"></a>Мониторинг, получение и отправка событий с помощью соединителя концентратора событий

Чтобы настроить мониторинг событий, предоставляя приложениям логики возможность обнаруживать, получать и отправлять события, подключитесь из приложения логики к [концентратору событий Azure](https://azure.microsoft.com/services/event-hubs). Ознакомьтесь с дополнительными сведениями о [концентраторах событий Azure](../event-hubs/event-hubs-what-is-event-hubs.md).

## <a name="requirements"></a>Требования

* Вам потребуется [пространство имен концентраторов событий и концентратор событий](../event-hubs/event-hubs-create.md) в Azure. Узнайте, как [создать пространство имен концентраторов событий и концентратор событий](../event-hubs/event-hubs-create.md). 

* Прежде чем добавлять в приложение логики [соединители](https://docs.microsoft.com/azure/connectors/apis-list), нужно сначала создать само приложение логики. Узнайте, как [создать приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

<a name="permissions-connection-string"></a>
## <a name="check-event-hubs-namespace-permissions-and-find-the-connection-string"></a>Проверка разрешений для пространства имен концентраторов событий и определение строки подключения

Чтобы приложение логики получило доступ к любой службе, следует создать [*подключение*](./connectors-overview.md) между приложением логики и этой службой (если вы еще не сделали это). Такое подключение предоставит приложению логики права на доступ к данным.
Чтобы приложение логики могло использовать концентратор событий, у вас должны быть права на **управление** и строка подключения для доступа к пространству имен концентраторов событий.

Чтобы проверить наличие разрешений и получить строку подключения, сделайте следующее.

1.  Войдите на [портал Azure](https://portal.azure.com "Портал Azure"). 

2.  Перейдите к *пространству имен* концентраторов событий (но не к конкретному концентратору событий). В колонке пространства имен в разделе **Параметры** выберите **Политики общего доступа**. В разделе **Утверждения** убедитесь, что у вас есть разрешения на **управление** для этого пространства имен.

    ![Управление разрешениями для пространства имен концентраторов событий](./media/connectors-create-api-azure-event-hubs/event-hubs-namespace.png)

3.  Чтобы скопировать строку подключения к пространству имен концентраторов событий, выберите **RootManageSharedAccessKey**. Теперь нажмите кнопку копирования рядом со строкой подключения первичного ключа.

    ![Скопируйте строку подключения к пространству имен концентраторов событий](media/connectors-create-api-azure-event-hubs/find-event-hub-namespace-connection-string.png)

    > [!TIP]
    > Чтобы проверить, относится ли строка подключения к пространству имен концентраторов событий или к определенному концентратору событий, попробуйте найти в ней параметр `EntityPath`. Если в строке подключения есть такой параметр, значит она относится к определенной сущности концентратора событий, и ее нельзя использовать в приложении логики.

4.  Когда вам будет предложено ввести учетные после добавления триггеров или действий концентраторов событий в приложение логики, вы сможете подключиться к пространству имен концентраторов событий. Присвойте имя созданному подключению, введите скопированную ранее строку подключения и выберите **Создать**.

    ![Ввод строки подключения к пространству имен концентраторов событий](./media/connectors-create-api-azure-event-hubs/event-hubs-connection.png)

    Когда вы завершите создание подключения, его имя появится в соответствующем триггере или действии концентраторов событий. 
    Теперь можно переходить к другим действиям в приложении логики.

    ![Созданное подключение к пространству имен концентраторов событий](./media/connectors-create-api-azure-event-hubs/event-hubs-connection-created.png)

## <a name="start-workflow-when-your-event-hub-receives-new-events"></a>Запуск рабочего процесса при получении новых событий от концентратора событий

[*Триггер*](../logic-apps/logic-apps-overview.md#logic-app-concepts) — это событие, которое запускает рабочий процесс приложения логики. Чтобы рабочий процесс запускался при отправке нового события в концентратор событий, добавьте триггер для обнаружения событий, сделав следующее.

1.  На [портале Azure](https://portal.azure.com "портал Azure ") перейдите к существующему приложению логики или создайте пустое приложение логики.

2.  В конструкторе Logic Apps введите в поле поиска текст фильтра `event hubs`. Выберите триггер с именем **При наличии событий в концентраторе событий**.

    ![Выбор триггера, срабатывающего при получении концентратором событий новых событий](./media/connectors-create-api-azure-event-hubs/find-event-hubs-trigger.png)

    Если у вас еще нет подключения к пространству имен концентраторов событий, вам будет предложено создать такое подключение. Присвойте имя этому подключению и введите строку подключения к пространству имен концентраторов событий. 
    Если вы не знаете, как найти строку подключения, см. [инструкции в этом разделе](#permissions-connection-string).

    ![Ввод строки подключения к пространству имен концентраторов событий](./media/connectors-create-api-azure-event-hubs/event-hubs-connection.png)

    После создания подключения вы увидите параметры для настройки триггера **При наличии событий в концентраторе событий**.

    ![Настройки триггера, срабатывающего при получении концентратором событий новых событий](./media/connectors-create-api-azure-event-hubs/event-hubs-trigger.png)

3.  Укажите имя концентратора событий, который требуется отслеживать. Укажите частоту и продолжительность проверки этого концентратора событий.

    > [!TIP]
    > Если вы хотите выбрать группу потребителей для чтения событий, нажмите действие **Показать дополнительные параметры** (необязательно). 

    ![Выбор концентратора событий или группы потребителей](./media/connectors-create-api-azure-event-hubs/event-hubs-trigger-details.png)

    Теперь у вас есть настроенный триггер для запуска рабочего процесса приложения логики. 
    Приложение логики проверяет указанный концентратор событий, используя созданное вами расписание. 
    Если приложение обнаруживает новые события в концентраторе событий, этот триггер запускает другие действия или триггеры в приложении логики.

## <a name="send-events-to-your-event-hub-from-your-logic-app"></a>Отправка событий в концентратор событий из приложения логики

[*Действие*](../logic-apps/logic-apps-overview.md#logic-app-concepts) — это задание, выполняемое рабочим процессом приложения логики. После добавления триггера в приложение логики вы можете добавить действие, выполняющее операции с данными, созданными этим триггером. Чтобы отправлять события в концентратор событий из приложения логики, сделайте следующее.

1.  В конструкторе Logic App выберите для созданного триггера приложения логики пункты **Новый шаг** > **Добавить действие**.

    ![Выбор действий "Новый шаг" и "Добавить действие"](./media/connectors-create-api-azure-event-hubs/add-action.png)

    Теперь найдите и выберите нужное действие. 
    Здесь вы можете выбрать любое доступное действие, но для нашего примера мы выберем действие отправки событий в концентраторы событий.

2.  В поле поиска введите текст `event hubs` для фильтрации.
Выберите действие **Отправка события**.

    ![Выбор действия "Концентраторы событий — отправка события"](./media/connectors-create-api-azure-event-hubs/find-event-hubs-action.png)

3.  Введите обязательные сведения для этого события, например имя концентратора событий, в который вы будете отправлять событие. Введите любые необязательные сведения о событии, например описание.

    > [!TIP]
    > Если вы хотите указать раздел концентратора событий, в который следует отправлять событие, выберите **Показать дополнительные параметры** (необязательно). 

    ![Ввод имени концентратора событий и необязательных сведений о событии](./media/connectors-create-api-azure-event-hubs/event-hubs-send-event-action.png)

6.  Сохраните изменения.

    ![Сохранение приложения логики](./media/connectors-create-api-azure-event-hubs/save-logic-app.png)

    Теперь у вас есть настроенное действие для отправки событий из приложения логики. 

## <a name="connector-specific-details"></a>Сведения о соединителях

Информацию о существующих ограничениях, а также о триггерах и действиях, определенных в Swagger, см. в статье со [сведениями о соединителях](/connectors/eventhubs/). 

## <a name="get-help"></a>Получение справки

Чтобы задать вопросы, помочь другим пользователям и узнать, что делают другие пользователи, посетите [форум по Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).

Чтобы улучшить Logic Apps и соединители, голосуйте за идеи или предлагайте собственные на [сайте обратной связи Logic Apps](http://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дополнительная информация

*  Изучите [список соединителей](./apis-list.md) для приложений логики в Azure Logic Apps.