---
title: "Добавление соединителя DB2 в приложения логики | Документация Майкрософт"
description: "Обзор соединителя DB2 с параметрами REST API"
services: 
documentationcenter: 
author: gplarsen
manager: erikre
editor: 
tags: connectors
ms.assetid: 1c6b010c-beee-496d-943a-a99e168c99aa
ms.service: logic-apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 09/26/2016
ms.author: plarsen; ladocs
ms.openlocfilehash: 7ad246ede7e891de42235443c1bc6a90b88ad5ac
ms.sourcegitcommit: be9a42d7b321304d9a33786ed8e2b9b972a5977e
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2018
---
# <a name="get-started-with-the-db2-connector"></a>Приступая к работе с соединителем DB2
Соединитель DB2 (Майкрософт) подключает приложения логики к ресурсам, хранящимся в базе данных IBM DB2. Этот соединитель включает в себя клиент Майкрософт для взаимодействия с удаленными серверами DB2 по сети TCP/IP. Сюда входят облачные базы данных, например IBM Bluemix dashDB или IBM DB2 для Windows, работающие в среде виртуализации Azure, и локальные базы данных, использующие локальный шлюз данных. Ознакомьтесь со [списком поддерживаемых](connectors-create-api-db2.md#supported-db2-platforms-and-versions) платформ и версий IBM DB2 (в этой статье).

Соединитель DB2 поддерживает следующие операции базы данных:

* создание списка таблиц базы данных;
* чтение одной строки с помощью инструкции SELECT;
* чтение всех строк с помощью инструкции SELECT;
* добавление одной строки с помощью инструкции INSERT;
* изменение одной строки с помощью инструкции UPDATE;
* удаление одной строки с помощью инструкции DELETE.

В этой статье показано, как использовать соединитель в приложении логики для обработки операций базы данных.

Дополнительные сведения о приложениях логики см. в статье о [создании приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

## <a name="available-actions"></a>Доступные действия
Соединитель DB2 поддерживает следующие действия приложения логики:

* GetTables
* GetRow
* GetRows
* InsertRow
* UpdateRow
* DeleteRow

## <a name="list-tables"></a>Перечисление таблиц
Создание приложения логики для любой операции включает в себя несколько действий, выполняемых на портале Microsoft Azure.

В приложении логики можно добавить действие для вывода списка таблиц в базе данных DB2. Это действие указывает соединителю обработать инструкцию схемы DB2, например `CALL SYSIBM.SQLTABLES`.

### <a name="create-a-logic-app"></a>Создайте приложение логики
1. На **начальной доске Azure** выберите **+** (знак плюс), **Интернет+мобильные устройства**, а затем — **Приложение логики**.
2. Введите **имя**, например `Db2getTables`, **подписку**, **группу ресурсов**, **расположение** и **план службы приложений**. Установите флажок **Закрепить на панели мониторинга** и щелкните **Создать**.

### <a name="add-a-trigger-and-action"></a>Добавление триггера и действия
1. В **конструкторе приложений логики** из списка **Шаблоны** выберите **Пустой LogicApp**.
2. Из списка **Триггеры** выберите пункт **Повторение**. 
3. В триггере **Повторение** щелкните **Изменить**. Из раскрывающегося списка **Периодичность** выберите **День**, а затем щелкните **Интервал** и введите **7**.  
4. Выберите поле **+ Новый шаг**, а затем щелкните **Добавить действие**.
5. В списке **действий** в поле **Ищите дополнительные действия** введите `db2`, а затем щелкните **DB2 - Get tables (Preview)** (DB2 — получение таблиц (предварительная версия)).
   
   ![](./media/connectors-create-api-db2/Db2connectorActions.png)  
6. В области конфигурации **DB2 - Get tables** (DB2 — получение таблиц) установите **флажок**, чтобы включить **подключение через локальный шлюз данных**. Обратите внимание на то, что облачные параметры будут изменены на локальные.
   
   * Введите **имя сервера**в виде адреса или псевдонима и номера порта, разделенных двоеточием. Например, введите `ibmserver01:50000`.
   * Введите **имя базы данных**. Например, введите `nwind`.
   * Выберите **метод проверки подлинности**. Например, **Базовая**.
   * Введите **имя пользователя**. Например, введите `db2admin`.
   * Введите **пароль**. Например, введите `Password1`.
   * Введите **имя шлюза**. Например, выберите **datagateway01**.
7. Щелкните **Создать**, а затем щелкните **Сохранить**. 
   
    ![](./media/connectors-create-api-db2/Db2connectorOnPremisesDataGatewayConnection.png)
8. В колонке **Db2getTables** найдите раздел **Сводка** и в списке **Все запуски** выберите первый элемент списка (самое последнее выполнение).
9. В колонке **Запуск приложения логики** щелкните **Подробности о запуске**. Из списка **Действие** выберите **Get_tables**. Просмотрите значение параметра **Состояние**, которое должно быть **Успешно**. Выберите ссылку **Входные данные** для просмотра входных данных. Выберите ссылку **Выходные данные**и просмотрите выходные данные, которые должны содержать список таблиц.
   
   ![](./media/connectors-create-api-db2/Db2connectorGetTablesLogicAppRunOutputs.png)

## <a name="create-the-connections"></a>Создание подключений
Этот соединитель поддерживает подключения к локальным и облачным базам данных, используя следующие свойства подключения. 

| Свойство | ОПИСАНИЕ |
| --- | --- |
| server |Обязательный элемент. Принимает строковое значение, представляющее TCP/IP-адрес или псевдоним в формате IPv4 или IPv6, за которым следует номер порта TCP/IP (после двоеточия). |
| database |Обязательный элемент. Принимает строковое значение, представляющее имя реляционной базы данных DRDA (RDBNAM). DB2 для z/OS принимает 16-байтовую строку (для расположения z/OS база данных называется IBM DB2). DB2 для i5/OS принимает 18-байтовую строку (для реляционной базы данных платформы i база данных называется IBM DB2). DB2 для LUW принимает 8-байтовую строку. |
| authentication |необязательный параметр. Принимает значение элемента списка — "Обычная" или "Windows" (kerberos). |
| Имя пользователя |Обязательный элемент. Принимает строковое значение. DB2 для z/OS принимает 8-байтовую строку. DB2 для i принимает 10-байтовую строку. DB2 для Linux или UNIX принимает 8-байтовую строку. DB2 для Windows принимает 30-байтовую строку. |
| password |Обязательный элемент. Принимает строковое значение. |
| gateway |Обязательный элемент. Принимает значение элемента списка, представляющее локальный шлюз данных, определенный для приложений логики в группе хранения. |

## <a name="create-the-on-premises-gateway-connection"></a>Создание подключения к локальному шлюзу данных
Этот соединитель может обеспечить доступ к локальной базе данных DB2 через локальный шлюз. Дополнительные сведения см. в разделах о шлюзе. 

1. В области конфигурации **Шлюзы** установите **флажок**, чтобы включить **подключение через шлюз**. Обратите внимание на то, что облачные параметры будут изменены на локальные.
2. Введите **имя сервера**в виде адреса или псевдонима и номера порта, разделенных двоеточием. Например, введите `ibmserver01:50000`.
3. Введите **имя базы данных**. Например, введите `nwind`.
4. Выберите **метод проверки подлинности**. Например, **Базовая**.
5. Введите **имя пользователя**. Например, введите `db2admin`.
6. Введите **пароль**. Например, введите `Password1`.
7. Введите **имя шлюза**. Например, выберите **datagateway01**.
8. Щелкните **Создать** , чтобы продолжить. 
   
    ![](./media/connectors-create-api-db2/Db2connectorOnPremisesDataGatewayConnection.png)

## <a name="create-the-cloud-connection"></a>Создание подключения к облаку
Этот соединитель может обеспечить доступ к облачной базе данных DB2. 

1. В области конфигурации **Шлюзы** оставьте **флажок** **Connect via gateway** (Подключение через шлюз) снятым. 
2. Введите **имя подключения**. Например, введите `hisdemo2`.
3. Введите **имя сервера DB2**в виде адреса или псевдонима и номера порта, разделенных двоеточием. Например, введите `hisdemo2.cloudapp.net:50000`.
4. Введите **имя базы данных DB2**. Например, введите `nwind`.
5. Введите **имя пользователя**. Например, введите `db2admin`.
6. Введите **пароль**. Например, введите `Password1`.
7. Щелкните **Создать** , чтобы продолжить. 
   
    ![](./media/connectors-create-api-db2/Db2connectorCloudConnection.png)

## <a name="fetch-all-rows-using-select"></a>Получение всех строк с помощью инструкции SELECT
Можно определить действие приложения логики для получения всех строк в таблице DB2. Это действие указывает соединителю обработать инструкцию SELECT DB2, например `SELECT * FROM AREA`.

### <a name="create-a-logic-app"></a>Создайте приложение логики
1. На **начальной доске Azure** выберите **+** (знак плюс), **Интернет+мобильные устройства**, а затем — **Приложение логики**.
2. Введите **имя**, например `Db2getRows`, **подписку**, **группу ресурсов**, **расположение** и **план службы приложений**. Установите флажок **Закрепить на панели мониторинга** и щелкните **Создать**.

### <a name="add-a-trigger-and-action"></a>Добавление триггера и действия
1. В **конструкторе приложений логики** из списка **Шаблоны** выберите **Пустой LogicApp**.
2. Из списка **Триггеры** выберите пункт **Повторение**. 
3. В триггере **Повторение** щелкните **Изменить**. Из раскрывающегося списка **Периодичность** выберите **День**, а затем щелкните **Интервал** и введите **7**. 
4. Выберите поле **+ Новый шаг**, а затем щелкните **Добавить действие**.
5. В списке **действий** в поле **Ищите дополнительные действия** введите `db2`, а затем щелкните **DB2 - Get rows (Preview)** (DB2 — получение строк (предварительная версия)).
6. В действии **Get rows (Preview)** (Получение строк (предварительная версия)) щелкните **Изменить подключение**.
7. В области конфигурации **Подключения** щелкните **Создать**. 
   
    ![](./media/connectors-create-api-db2/Db2connectorNewConnection.png)
8. В области конфигурации **Шлюзы** оставьте **флажок** **Connect via gateway** (Подключение через шлюз) снятым.
   
   * Введите **имя подключения**. Например, введите `HISDEMO2`.
   * Введите **имя сервера DB2**в виде адреса или псевдонима и номера порта, разделенных двоеточием. Например, введите `HISDEMO2.cloudapp.net:50000`.
   * Введите **имя базы данных DB2**. Например, введите `NWIND`.
   * Введите **имя пользователя**. Например, введите `db2admin`.
   * Введите **пароль**. Например, введите `Password1`.
9. Щелкните **Создать** , чтобы продолжить.
   
    ![](./media/connectors-create-api-db2/Db2connectorCloudConnection.png)
10. В списке **Имя таблицы** щелкните **стрелку вниз** и выберите **AREA**.
11. При необходимости щелкните **Show advanced options** (Показать дополнительные параметры), чтобы указать параметры запроса.
12. Щелкните **Сохранить**. 
    
    ![](./media/connectors-create-api-db2/Db2connectorGetRowsTableName.png)
13. В колонке **Db2getRows** найдите раздел **Сводка** и в списке **Все запуски** выберите первый элемент списка (самое последнее выполнение).
14. В колонке **Запуск приложения логики** щелкните **Подробности о запуске**. Из списка **Действие** выберите **Get_rows**. Просмотрите значение параметра **Состояние**, которое должно быть **Успешно**. Выберите ссылку **Входные данные** для просмотра входных данных. Выберите ссылку **Выходные данные**и просмотрите выходные данные, которые должны содержать список строк.
    
    ![](./media/connectors-create-api-db2/Db2connectorGetRowsOutputs.png)

## <a name="add-one-row-using-insert"></a>добавление одной строки с помощью инструкции INSERT;
Можно определить действие приложения логики для добавления одной строки в таблицу DB2. Это действие указывает соединителю обработать инструкцию INSERT DB2, например `INSERT INTO AREA (AREAID, AREADESC, REGIONID) VALUES ('99999', 'Area 99999', 102)`.

### <a name="create-a-logic-app"></a>Создайте приложение логики
1. На **начальной доске Azure** выберите **+** (знак плюс), **Интернет+мобильные устройства**, а затем — **Приложение логики**.
2. Введите **имя**, например `Db2insertRow`, **подписку**, **группу ресурсов**, **расположение** и **план службы приложений**. Установите флажок **Закрепить на панели мониторинга** и щелкните **Создать**.

### <a name="add-a-trigger-and-action"></a>Добавление триггера и действия
1. В **конструкторе приложений логики** из списка **Шаблоны** выберите **Пустой LogicApp**.
2. Из списка **Триггеры** выберите пункт **Повторение**. 
3. В триггере **Повторение** щелкните **Изменить**. Из раскрывающегося списка **Периодичность** выберите **День**, а затем щелкните **Интервал** и введите **7**. 
4. Выберите поле **+ Новый шаг**, а затем щелкните **Добавить действие**.
5. В списке **действий** в поле **Ищите дополнительные действия** введите **db2**, а затем щелкните **DB2 - Insert row (Preview)** (DB2 — вставка строки (предварительная версия)).
6. В действии **DB2 - Insert row (Preview)** (DB2 — вставка строки (просмотр)) щелкните **Изменить подключение**. 
7. Выберите подключение в области конфигурации **Подключения** . Например, выберите **hisdemo2**.
   
    ![](./media/connectors-create-api-db2/Db2connectorChangeConnection.png)
8. В списке **Имя таблицы** щелкните **стрелку вниз** и выберите **AREA**.
9. Введите значения для всех обязательных столбцов (отмечены красной звездочкой). Например, для **AREAID** введите `99999`, в следующем поле укажите `Area 99999`, а для **REGIONID** введите `102`. 
10. Щелкните **Сохранить**.
    
    ![](./media/connectors-create-api-db2/Db2connectorInsertRowValues.png)
11. В колонке **Db2insertRow** найдите раздел **Сводка** и в списке **Все запуски** выберите первый элемент списка (самое последнее выполнение).
12. В колонке **Запуск приложения логики** щелкните **Подробности о запуске**. Из списка **Действие** выберите **Get_rows**. Просмотрите значение параметра **Состояние**, которое должно быть **Успешно**. Выберите ссылку **Входные данные** для просмотра входных данных. Выберите ссылку **Выходные данные**и просмотрите выходные данные, которые должны содержать новую строку.
    
    ![](./media/connectors-create-api-db2/Db2connectorInsertRowOutputs.png)

## <a name="fetch-one-row-using-select"></a>Получение одной строки с помощью инструкции SELECT
Можно определить действие приложения логики для получения одной строки таблицы DB2. Это действие указывает соединителю обработать инструкцию SELECT WHERE DB2, например `SELECT FROM AREA WHERE AREAID = '99999'`.

### <a name="create-a-logic-app"></a>Создайте приложение логики
1. На **начальной доске Azure** выберите **+** (знак плюс), **Интернет+мобильные устройства**, а затем — **Приложение логики**.
2. Введите **имя** (например, **Db2getRow**), **подписку**, **группу ресурсов**, **расположение** и **план службы приложений**. Установите флажок **Закрепить на панели мониторинга** и щелкните **Создать**.

### <a name="add-a-trigger-and-action"></a>Добавление триггера и действия
1. В **конструкторе приложений логики** из списка **Шаблоны** выберите **Пустой LogicApp**. 
2. Из списка **Триггеры** выберите пункт **Повторение**. 
3. В триггере **Повторение** щелкните **Изменить**. Из раскрывающегося списка **Периодичность** выберите **День**, а затем щелкните **Интервал** и введите **7**. 
4. Выберите поле **+ Новый шаг**, а затем щелкните **Добавить действие**.
5. В списке **действий** в поле **Ищите дополнительные действия** введите **db2**, а затем щелкните **DB2 - Get rows (Preview)** (DB2 — получение строк (предварительная версия)).
6. В действии **Get rows (Preview)** (Получение строк (предварительная версия)) щелкните **Изменить подключение**. 
7. В области конфигурации **Подключения** выберите существующее подключение. Например, выберите **hisdemo2**.
   
    ![](./media/connectors-create-api-db2/Db2connectorChangeConnection.png)
8. В списке **Имя таблицы** щелкните **стрелку вниз** и выберите **AREA**.
9. Введите значения для всех обязательных столбцов (отмечены красной звездочкой). Например, для **AREAID** введите `99999`. 
10. При необходимости щелкните **Show advanced options** (Показать дополнительные параметры), чтобы указать параметры запроса.
11. Щелкните **Сохранить**. 
    
    ![](./media/connectors-create-api-db2/Db2connectorGetRowValues.png)
12. В колонке **Db2getRow** найдите раздел **Сводка** и в списке **Все запуски** выберите первый элемент списка (самое последнее выполнение).
13. В колонке **Запуск приложения логики** щелкните **Подробности о запуске**. Из списка **Действие** выберите **Get_rows**. Просмотрите значение параметра **Состояние**, которое должно быть **Успешно**. Выберите ссылку **Входные данные** для просмотра входных данных. Выберите ссылку **Выходные данные**и просмотрите выходные данные, которые должны содержать полученную строку.
    
    ![](./media/connectors-create-api-db2/Db2connectorGetRowOutputs.png)

## <a name="change-one-row-using-update"></a>Изменение одной строки с помощью инструкции UPDATE
Можно определить действие приложения логики для изменения одной строки в таблице DB2. Это действие указывает соединителю обработать инструкцию UPDATE DB2, например `UPDATE AREA SET AREAID = '99999', AREADESC = 'Area 99999', REGIONID = 102)`.

### <a name="create-a-logic-app"></a>Создайте приложение логики
1. На **начальной доске Azure** выберите **+** (знак плюс), **Интернет+мобильные устройства**, а затем — **Приложение логики**.
2. Введите **имя**, например `Db2updateRow`, **подписку**, **группу ресурсов**, **расположение** и **план службы приложений**. Установите флажок **Закрепить на панели мониторинга** и щелкните **Создать**.

### <a name="add-a-trigger-and-action"></a>Добавление триггера и действия
1. В **конструкторе приложений логики** из списка **Шаблоны** выберите **Пустой LogicApp**.
2. Из списка **Триггеры** выберите пункт **Повторение**. 
3. В триггере **Повторение** щелкните **Изменить**. Из раскрывающегося списка **Периодичность** выберите **День**, а затем щелкните **Интервал** и введите **7**. 
4. Выберите поле **+ Новый шаг**, а затем щелкните **Добавить действие**.
5. В списке **действий** в поле **Ищите дополнительные действия** введите **db2**, а затем щелкните **DB2 - Update row (Preview)** (DB2 — обновление строки (предварительная версия)).
6. В действии **DB2 - Update row (Preview)** (DB2 — обновление строки (просмотр)) щелкните **Изменить подключение**. 
7. В области конфигурации **Подключения** выберите имеющееся подключение. Например, выберите **hisdemo2**.
   
    ![](./media/connectors-create-api-db2/Db2connectorChangeConnection.png)
8. В списке **Имя таблицы** щелкните **стрелку вниз** и выберите **AREA**.
9. Введите значения для всех обязательных столбцов (отмечены красной звездочкой). Например, для **AREAID** введите `99999`, в следующем поле укажите `Updated 99999`, а для **REGIONID** введите `102`. 
10. Щелкните **Сохранить**. 
    
    ![](./media/connectors-create-api-db2/Db2connectorUpdateRowValues.png)
11. В колонке **Db2updateRow** найдите раздел **Сводка** и в списке **Все запуски** выберите первый элемент списка (самое последнее выполнение).
12. В колонке **Запуск приложения логики** щелкните **Подробности о запуске**. Из списка **Действие** выберите **Get_rows**. Просмотрите значение параметра **Состояние**, которое должно быть **Успешно**. Выберите ссылку **Входные данные** для просмотра входных данных. Выберите ссылку **Выходные данные**и просмотрите выходные данные, которые должны содержать новую строку.
    
    ![](./media/connectors-create-api-db2/Db2connectorUpdateRowOutputs.png)

## <a name="remove-one-row-using-delete"></a>удаление одной строки с помощью инструкции DELETE.
Можно определить действие приложения логики для удаления одной строки из таблицы DB2. Это действие указывает соединителю обработать инструкцию DELETE DB2, например `DELETE FROM AREA WHERE AREAID = '99999'`.

### <a name="create-a-logic-app"></a>Создайте приложение логики
1. На **начальной доске Azure** выберите **+** (знак плюс), **Интернет+мобильные устройства**, а затем — **Приложение логики**.
2. Введите **имя**, например `Db2deleteRow`, **подписку**, **группу ресурсов**, **расположение** и **план службы приложений**. Установите флажок **Закрепить на панели мониторинга** и щелкните **Создать**.

### <a name="add-a-trigger-and-action"></a>Добавление триггера и действия
1. В **конструкторе приложений логики** из списка **Шаблоны** выберите **Пустой LogicApp**. 
2. Из списка **Триггеры** выберите пункт **Повторение**. 
3. В триггере **Повторение** щелкните **Изменить**. Из раскрывающегося списка **Периодичность** выберите **День**, а затем щелкните **Интервал** и введите **7**. 
4. Выберите поле **+ Новый шаг**, а затем щелкните **Добавить действие**.
5. В списке **действий** в поле **Ищите дополнительные действия** выберите **db2**, а затем щелкните **DB2 - Delete row (Preview)** (DB2 — удаление строки (предварительная версия)).
6. В действии **DB2 - Delete row (Preview)** (DB2 — удаление строки (просмотр)) щелкните **Изменить подключение**. 
7. В области конфигурации **Подключения** выберите существующее подключение. Например, выберите **hisdemo2**.
   
    ![](./media/connectors-create-api-db2/Db2connectorChangeConnection.png)
8. В списке **Имя таблицы** щелкните **стрелку вниз** и выберите **AREA**.
9. Введите значения для всех обязательных столбцов (отмечены красной звездочкой). Например, для **AREAID** введите `99999`. 
10. Щелкните **Сохранить**. 
    
    ![](./media/connectors-create-api-db2/Db2connectorDeleteRowValues.png)
11. В колонке **Db2deleteRow** найдите раздел **Сводка** и в списке **Все запуски** выберите первый элемент списка (самое последнее выполнение).
12. В колонке **Запуск приложения логики** щелкните **Подробности о запуске**. Из списка **Действие** выберите **Get_rows**. Просмотрите значение параметра **Состояние**, которое должно быть **Успешно**. Выберите ссылку **Входные данные** для просмотра входных данных. Выберите ссылку **Выходные данные**и просмотрите выходные данные, которые должны содержать удаленную строку.
    
    ![](./media/connectors-create-api-db2/Db2connectorDeleteRowOutputs.png)

## <a name="supported-db2-platforms-and-versions"></a>Поддерживаемые платформы и версии DB2
Этот соединитель поддерживает приведенные ниже платформы и версии IBM DB2, а также совместимые продукты IBM DB2 (например, IBM Bluemix dashDB), поддерживающие архитектуру распределенной реляционной базы данных (DRDA) SQL Access Manager (SQLAM) версии 10 и 11.

* IBM DB2 для z/OS версии 11.1
* IBM DB2 для z/OS версии 10.1
* IBM DB2 для i версии 7.3
* IBM DB2 для i версии 7.2
* IBM DB2 для i версии 7.1
* IBM DB2 для LUW версии 11
* IBM DB2 для LUW версии 10.5

## <a name="connector-specific-details"></a>Сведения о соединителях

Информацию о существующих ограничениях, а также о триггерах и действиях, определенных в Swagger, см. в статье со [сведениями о соединителях](/connectors/db2/). 

## <a name="next-steps"></a>Дополнительная информация
[Создание приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md). Чтобы узнать, какие еще соединители доступны в Logic Apps, просмотрите [список интерфейсов API](apis-list.md).

