---
ms.assetid: 
title: "Удаление с возможностью восстановления хранилище ключей aaaAzure | Документы Microsoft"
ms.service: key-vault
author: BrucePerlerMS
ms.author: bruceper
manager: mbaldwin
ms.date: 07/10/2017
ms.openlocfilehash: 1b402c58db6f25ae4ae5e2720786fa81eb0e839a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-key-vault-soft-delete-overview"></a>Общие сведения об обратимом удалении в Azure Key Vault

Функция обратимого удаления хранилища ключей позволяет восстановить хранилищ hello удалены и объекты, хранилище, называемые программной delete. В частности мы адресов hello следующие сценарии:

- Поддержка восстанавливаемого удаления хранилища ключей
- Поддержка восстанавливаемого удаления объектов Key Vault (например, ключей, секретов, сертификатов).

## <a name="supporting-interfaces"></a>Поддержка интерфейсов

Hello функция удаления программной изначально доступна через hello REST, .NET или C# и PowerShell интерфейсов. См. Эти сведения, ссылки на toohello [хранилище справочника по ключам](https://docs.microsoft.com/azure/key-vault/).

## <a name="scenarios"></a>Сценарии

Azure Key Vault — это отслеживаемые ресурсы, управляемые Azure Resource Manager. Azure Resource Manager также задает четко определенное поведение для удаления, которое требует, чтобы после успешной операции удаления этот ресурс больше не был доступен. функция удаления программной адреса Hello hello восстановления объекта hello удалены ли удаление hello было случайное или намеренное.

1. В типичном сценарии hello пользователь может случайно удаленных хранилища ключей и объектом хранилища ключей. Если этого хранилища ключей или ключа хранилища объекта были toobe восстановимых заранее определенное, hello пользователь может отменить удаление hello и восстанавливать свои данные.

2. В другом сценарии пользователь-мошенник может предпринимать toodelete хранилища ключей или объект хранилища ключей, например ключ в хранилище, toocause к прерыванию бизнеса. Отделение от hello фактическое удаление hello базовым данным hello удаление хранилища ключей hello объекта хранилища ключей можно использовать как меры предосторожности, ограничив разрешения для разных, tooa удаления данных для экземпляра надежные роли. По существу, при таком подходе требуется кворум для операции, так как в противном случае может произойти немедленная потеря данных.

### <a name="soft-delete-behavior"></a>Поведение обратимого удаления

С помощью этой функции hello операции удаления в хранилище ключей или объект хранилища ключей является фактически удерживая hello ресурсов для заданного срока, придавая вид hello объекта hello удаляется обратимо delete. Дополнительные службы Hello предоставляет механизм для восстановления удалена hello объекта, по существу, Отмена удаления hello. 

Обратимое удаление — это дополнительная функция Key Vault, которая **не включена по умолчанию** в этом выпуске. Подробные сведения о включении soft-delete для хранилища ключей, см. руководство hello в ссылке hello для интерфейса hello по своему усмотрению, [хранилище справочника по ключам](https://docs.microsoft.com/azure/key-vault/).

### <a name="key-vault-recovery"></a>Восстановление Key Vault

После удаления хранилища ключей, hello службы создает ресурс прокси-сервера в рамках подписки hello, добавление метаданных, необходимых для восстановления. Hello прокси-сервера ресурса — это хранимый объект, доступных в hello местоположения хранилища ключей hello удален. 

### <a name="key-vault-object-recovery"></a>Восстановление объектов Key Vault

После удаления объекта хранилища ключей, например ключ, hello служба будет помещать hello объекта в удаленном состоянии, делая его недоступным tooany операций получения. В этом состоянии hello объекта хранилища ключей можно только указать, восстановленные или принудительно или будут удалены. 

В hello же времени, ключа хранилища будет запланировано удаление hello hello базовые данные соответствующего toohello удалены хранилища ключей или объект хранилища ключей для выполнения после интервал предопределенном хранения. Hello DNS записей соответствующее toohello хранилище также можно сохранить для hello длительность интервала хранения hello.

### <a name="soft-delete-retention-period"></a>Период хранения при обратимом удалении

Ресурсы обратимого удаления сохраняются в течение заданного периода времени — 90 дней. Период хранения soft-delete hello применяются следующие hello.

- Вы может список всех хранилищ ключей hello и хранилища ключей объектов в состоянии удаления программной hello для подписки, а также удаления и восстановления доступа о них.
    - Только пользователи со специальными разрешениями могут вести список удаленных хранилищ. Мы советуем нашим пользователям создать настраиваемую роль с этими разрешениями для управления удаленными хранилищами.
- Хранилище ключей с таким же именем нельзя создать в hello hello местоположения; соответственно, хранилище ключей не удается создать объект в данном хранилище, если этого хранилища ключей содержит объект с hello таким же именем и который находится в удаленном состоянии 
- Только специально привилегированный пользователь может восстановить хранилища ключей или объект хранилища ключей с помощью команды восстановить на hello соответствующий ресурс прокси-сервера.
    - пользователь Hello членом пользовательской роли hello, обладающего toocreate hello привилегий хранилища ключей в группе ресурсов hello можно восстановить хранилище hello.
- Принудительно только специально привилегированный пользователь может удалять хранилища ключей или объект хранилища ключей с помощью команды delete на hello соответствующий ресурс прокси-сервера.

Если восстанавливается хранилища ключей или объект хранилища ключей, конец интервала hello hello хранения службы с hello выполняет очистку объекта hello обратимо удаленные хранилища ключей или ключа хранилища и его содержимое. Удаление ресурса нельзя запланировать повторно.

### <a name="permitted-purge"></a>Разрешенная очистка

Окончательно удалить, очистка, хранилища ключей можно сделать через операцию POST для ресурсов hello прокси-сервера и требует специальные права доступа. Как правило только владелец подписки hello будет может toopurge хранилища ключей. триггеры операции POST Hello hello немедленно и неустранимых удаления этого хранилища. 

Исключение toothis случается hello когда hello подписки Azure был помечен как *неудаляемый*. В этом случае только hello службы выполните фактическое удаление hello и выполняет как запланированные процесс. 



