---
title: "Анализ событий Service Fabric с OMS aaaAzure | Документы Microsoft"
description: "Ознакомьтесь со сведениями о визуализации и анализе событий с использованием OMS для мониторинга и диагностики кластеров Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/26/2017
ms.author: dekapur
ms.openlocfilehash: 526519293e70982c95e31241465b87f190096f74
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="event-analysis-and-visualization-with-oms"></a>Анализ и визуализация событий с помощью OMS

Operations Management Suite (OMS) — это совокупность службы управления, упрощающие наблюдение и диагностику для приложений и служб, размещенных в облаке hello. чтение tooget OMS, и он обеспечивает более подробный обзор [возможности OMS?](../operations-management-suite/operations-management-suite-overview.md)

## <a name="log-analytics-and-hello-oms-workspace"></a>Журнал аналитики и hello рабочей области OMS

Служба Log Analytics собирает данные из управляемых ресурсов, включая таблицу или агент службы хранилища Azure, и сохраняет их в центральном репозитории. Hello данные затем можно для анализа, предупреждения и визуализации, либо дальнейшей экспорт. Log Analytics поддерживает события, данные производительности, а также любые иные пользовательские данные.

При настройке OMS будет иметь доступ определенного tooa *рабочей области OMS*, начиная с которой данные можно запрашивать и отображаются в панели мониторинга.

После получения данных службой аналитики журналов OMS имеется несколько *решений по управлению* , которые предварительно пакетированных решения toomonitor входящих данных, настроенные tooseveral сценариев. К ним относятся *Analytics структуры службы* решения и *контейнеры* решение, которое toodiagnostics hello два наиболее важные из них и мониторинга при использовании кластеров Service Fabric. Существует несколько других также исследовать, и OMS также позволяет создавать пользовательские решения, которые можно получить дополнительные сведения о hello [здесь](../operations-management-suite/operations-management-suite-solutions.md). Каждое решение, выберите toouse для кластера будут настроены в hello одну рабочую область OMS, наряду с анализа журналов. Рабочие области позволяют для настраиваемых панелей мониторинга и визуализации данных, и изменения toohello данных, toocollect, обработки и анализа.

## <a name="setting-up-an-oms-workspace-with-hello-service-fabric-solution"></a>Настройка рабочей области OMS с hello решения Service Fabric

Рекомендуется, включить hello решение структуры службы в рабочей области OMS, так как она предоставляет полезные панели мониторинга, содержатся hello различных входящих каналов ведения журнала из hello платформы и приложения и на уровне может tooquery hello Service Fabric Заносит в журнал. Здесь выглядит структуры решения относительно простой службы, с одним приложением, развернутых на кластере hello:

![Решение OMS Service Fabric](media/service-fabric-diagnostics-event-analysis-oms/service-fabric-solution.png)

Существует два способа tooprovision и настройка рабочей области OMS, посредством шаблона диспетчера ресурсов или непосредственно из Azure Marketplace. Бывшая hello следует используйте при развертывании кластера и включен hello последний, если вы уже настроили кластер развернут с помощью системы диагностики.

### <a name="deploying-oms-using-a-resource-management-template"></a>Развертывание OMS с помощью шаблона Resource Management

Это происходит на этапе создания кластера hello, — когда развертывание кластера с помощью шаблона диспетчера ресурсов, hello шаблона можно создать новую рабочую область OMS, добавьте tooit hello решение структуры службы и настройте его tooread данные из соответствующих дисковых hello таблицы.

>[!NOTE]
>Для этого toowork Диагностика имеет toobe включены таблицы tooexist hello хранилища Azure для OMS и анализа журналов tooread сведения в из.

[Здесь](https://azure.microsoft.com/resources/templates/service-fabric-oms/) можно найти пример шаблона, который выполняет описанные выше действия и который вы можете использовать и изменять согласно требованиям. В случае hello требуется дополнительные возможности, существует несколько дополнительных шаблонов, которые предоставляют различные возможности в зависимости от того, где в процессе hello можно настроить рабочую область OMS — они могут быть найдены в [Service Fabric и OMS шаблоны](https://azure.microsoft.com/resources/templates/?term=service+fabric+OMS).

### <a name="deploying-oms-using-through-azure-marketplace"></a>Развертывание OMS посредством Azure Marketplace

Если вы предпочитаете tooadd рабочей области OMS, после развертывания кластера, перейдите tooAzure Marketplace и выполните поиск *«Службы аналитики структуры»*. Должен быть только один ресурс, который отображается, в категории «Мониторинга управления +» hello, показано ниже:

![Аналитика Service Fabric OMS в Marketplace](media/service-fabric-diagnostics-event-analysis-oms/service-fabric-analytics.png)

При нажатии кнопки **Создать** появится запрос на указание рабочей области OMS. Щелкните **Выберите рабочую область**, а затем — **Создать рабочую область**. Заполните необходимые hello записей — hello здесь единственное требование заключается в hello, hello подписки для hello Service Fabric кластера и hello рабочей области OMS должен быть одинаковым. После проверки записей рабочая область OMS будет развернута через несколько минут. Во время завершения операции развертывания, создания hello колонка решения hello Service Fabric по-прежнему будет оставаться открытым. Убедитесь в том, hello одной рабочей области появляется под *рабочей области OMS* и нажмите кнопку **создать** внизу hello tooadd hello рабочей области toohello решения Service Fabric.

## <a name="using-hello-oms-agent"></a>С помощью агента OMS hello

Рекомендуется toouse EventFlow WAD как решения статистической обработки, так как они позволяют более удобным toodiagnostics подход и мониторинга. Например следует toochange вашей выходные данные EventFlow требуется изменение tooyour фактическое инструментирование не, просто файл конфигурации tooyour простое изменение. Если, однако решить tooinvest с помощью OMS и быть готовым toocontinue его использования для анализа событий (нет toobe hello только для использования платформы, но вместо что он будет иметь по крайней мере одно hello платформ), мы рекомендуем просмотреть настройки hello [</C0настроекагентаOMS<spanclass="notranslate">](../log-analytics/log-analytics-windows-agents.md).</span> При развертывании кластера tooyour контейнеры, также следует использовать агент OMS hello, как описано ниже.

Hello таким образом выполняется относительно просто, поскольку достаточно агента hello tooadd как шаблона диспетчера ресурсов tooyour расширения, набора масштабирования виртуальных машин гарантирует, что он устанавливается на всех узлах. Образец шаблона диспетчера ресурсов, устанавливающая hello рабочей области OMS с hello Service Fabric решения (как описано выше) и добавляет узлы tooyour hello агента можно найти для кластеров под управлением [Windows](https://github.com/ChackDan/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Samples/Windows) или [Linux](https://github.com/ChackDan/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Samples/Linux).

Hello объекта имеет следующие преимущества. следующие hello

* Более подробные сведения на стороне счетчики и показатели производительности hello
* Простой tooconfigure данных, собираемых из hello кластера и внесите изменения tooit без повторного развертывания приложения или кластера hello, так как изменения параметров toohello hello агента может быть выполнена из рабочей области OMS hello, будет просто сбросить hello агента автоматически. toopick агент OMS hello tooconfigure копирование определенными счетчиками производительности, рабочей области перейдите toohello **Главная > Параметры > данных > счетчиков производительности Windows** и выбрать хотелось бы toosee собранных данных hello
* Данные отобразятся быстрее, чем оно будет иметь toobe сохраняется перед начал выполняться OMS и анализа журналов
* Отслеживать контейнеры гораздо проще, так как имеется возможность сбора журналов (stdout, stderror) и статистики (метрик производительности на уровнях контейнеров и узлов) для контейнеров Docker.

Hello главное, помнить здесь —, так как это агент, он будет развернут на кластер наряду с во всех приложениях, поэтому некоторые toohello минимальное влияние работы приложений на кластере hello.

## <a name="monitoring-containers"></a>Отслеживание контейнеров

При развертывании кластера Service Fabric tooa контейнеры, его рекомендуется hello кластер настроен с агентом OMS hello и этого hello контейнеры решение будет добавлен tooenable tooyour OMS рабочей области наблюдения и диагностики. Вот какие контейнеры hello выглядит решения в рабочей области.

![Основная панель мониторинга OMS](./media/service-fabric-diagnostics-event-analysis-oms/oms-containers-dashboard.png)

агент Hello включает сбор hello из нескольких журналов контейнером, можно запросить в OMS или toovisualized индикаторы производительности. Ниже приведены типы Hello журнала собираются.

* ContainerInventory — отображает информацию о местонахождении контейнера, имени и образах.
* ContainerImageInventory — информация о развернутых образах, в том числе их идентификаторы или размеры.
* ContainerLog — журналы конкретных ошибок, журналы Docker (StdOut и т. д.) и другие записи.
* ContainerServiceLog — выполнявшиеся команды управляющей программы Docker.
* Производительность: счетчики производительности, включая контейнера ЦП, памяти, то сетевой трафик дискового ввода-вывода и настраиваемых метрик из hello размещения машин

В этой статье рассматриваются hello tooset необходимые шаги вверх контейнера мониторинга для кластера. Дополнительные сведения о решение OMS контейнеры, toolearn извлечь их [документации](../log-analytics/log-analytics-containers.md).

tooset копирование hello контейнера решения в рабочей области, убедитесь в том, что у вас есть агент OMS hello, развернуты на узлах кластера, следуя hello действия, описанные выше. После подготовки кластера hello разверните tooit контейнера. Содержат помните, что hello первый раз образ контейнера развернутой tooa кластера, занимает несколько минут toodownload hello изображения в зависимости от его размера.

В Azure Marketplace, поиск *контейнеры* и создайте ресурс контейнеров (под hello мониторинг + управления категории).

![Добавление решения "Контейнеры"](./media/service-fabric-diagnostics-event-analysis-oms/containers-solution.png)

На этапе создания hello запросов рабочей области OMS. Выберите hello, созданный с помощью развертывания hello выше. Этот шаг добавляет контейнеры решения в рабочей области OMS и обнаруживается автоматически агентом OMS hello, предоставляемым hello шаблона. Hello агент начнет сбор данных на процессы контейнеры hello в кластере hello и менее чем за 15 минут или таким образом, вы увидите hello решения подсветка с данными, как изображения hello hello мониторинга выше.


## <a name="next-steps"></a>Дальнейшие действия

Изучение hello следующие средства и параметры toocustomize OMS, необходимые tooyour рабочей области.

* Для локальных кластерах OMS обеспечивает шлюза (вперед прокси-сервер HTTP), который может быть tooOMS toosend используемых данных. Узнайте больше о том, что в [подключении компьютеров без tooOMS доступ к Интернету с помощью hello шлюза OMS](../log-analytics/log-analytics-oms-gateway.md)
* Настроить OMS tooset [автоматических предупреждения](../log-analytics/log-analytics-alerts.md) tooaid в обнаружение и диагностика
* Получить для начала ознакомьтесь с hello [входа поиска и выполнения запросов](../log-analytics/log-analytics-log-searches.md) компоненты входят в состав службы анализа журналов
