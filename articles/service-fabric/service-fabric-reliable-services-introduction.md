---
title: "aaaOverview модели программирования служба Service Fabric надежного hello | Документы Microsoft"
description: "Сведения о модели программирования надежных служб Service Fabric, позволяющие приступить к написанию собственных служб."
services: Service-Fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: vturecek; mani-ramaswamy
ms.assetid: 0c88a533-73f8-4ae1-a939-67d17456ac06
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: masnider;
ms.openlocfilehash: 41d1826df902b1f1845c4702bf2567e6b9ca1f1f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="reliable-services-overview"></a><span data-ttu-id="c6a42-103">Обзор надежных служб</span><span class="sxs-lookup"><span data-stu-id="c6a42-103">Reliable Services overview</span></span>
<span data-ttu-id="c6a42-104">Платформа Azure Service Fabric упрощает написание надежных служб с отслеживанием и без отслеживания состояния и управление такими службами.</span><span class="sxs-lookup"><span data-stu-id="c6a42-104">Azure Service Fabric simplifies writing and managing stateless and stateful Reliable Services.</span></span> <span data-ttu-id="c6a42-105">В этой статье рассматриваются следующие вопросы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-105">This topic covers:</span></span>

* <span data-ttu-id="c6a42-106">Hello надежного обмена модель программирования для служб без отслеживания состояния и с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="c6a42-106">hello Reliable Services programming model for stateless and stateful services.</span></span>
* <span data-ttu-id="c6a42-107">варианты Hello имеется toomake при написании надежные службы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-107">hello choices you have toomake when writing a Reliable Service.</span></span>
* <span data-ttu-id="c6a42-108">Некоторые сценарии и примеры, когда toouse надежность службы и как они написаны.</span><span class="sxs-lookup"><span data-stu-id="c6a42-108">Some scenarios and examples of when toouse Reliable Services and how they are written.</span></span>

<span data-ttu-id="c6a42-109">Надежные службы является одним из hello программирование моделей, доступных в Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c6a42-109">Reliable Services is one of hello programming models available on Service Fabric.</span></span> <span data-ttu-id="c6a42-110">Hello других — hello Reliable Actor модель программирования, которая предоставляет виртуальный субъекта модель программирования на основе модели надежного обмена hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-110">hello other is hello Reliable Actor programming model, which provides a virtual Actor programming model on top of hello Reliable Services model.</span></span> <span data-ttu-id="c6a42-111">Дополнительные сведения о модели программирования службы Reliable Actor hello см. в разделе [tooService введение структуры службы Reliable Actor](service-fabric-reliable-actors-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="c6a42-111">For more information on hello Reliable Actors programming model, see [Introduction tooService Fabric Reliable Actors](service-fabric-reliable-actors-introduction.md).</span></span>

<span data-ttu-id="c6a42-112">Service Fabric управляет временем существования hello служб: от подготовки и развертывания с помощью обновления и удаления, через [управления приложения Service Fabric](service-fabric-deploy-remove-applications.md).</span><span class="sxs-lookup"><span data-stu-id="c6a42-112">Service Fabric manages hello lifetime of services, from provisioning and deployment through upgrade and deletion, via [Service Fabric application management](service-fabric-deploy-remove-applications.md).</span></span>

## <a name="what-are-reliable-services"></a><span data-ttu-id="c6a42-113">Что такое надежные службы?</span><span class="sxs-lookup"><span data-stu-id="c6a42-113">What are Reliable Services?</span></span>
<span data-ttu-id="c6a42-114">Надежные службы обеспечивает простой и эффективный, верхнего уровня, можно указать, что такое приложение важные tooyour toohelp модели программирования.</span><span class="sxs-lookup"><span data-stu-id="c6a42-114">Reliable Services gives you a simple, powerful, top-level programming model toohelp you express what is important tooyour application.</span></span> <span data-ttu-id="c6a42-115">С помощью надежного обмена hello модель программирования можно получить:</span><span class="sxs-lookup"><span data-stu-id="c6a42-115">With hello Reliable Services programming model, you get:</span></span>

* <span data-ttu-id="c6a42-116">Остальные toohello доступа hello API-интерфейсов Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c6a42-116">Access toohello rest of hello Service Fabric programming APIs.</span></span> <span data-ttu-id="c6a42-117">В отличие от структуры службы, смоделированная в виде [исполняемые файлы гостевой](service-fabric-deploy-existing-app.md), надежные службы непосредственно получить toouse hello остальной части hello API-интерфейсы службы структуры.</span><span class="sxs-lookup"><span data-stu-id="c6a42-117">Unlike Service Fabric Services modeled as [Guest Executables](service-fabric-deploy-existing-app.md), Reliable Services get toouse hello rest of hello Service Fabric APIs directly.</span></span> <span data-ttu-id="c6a42-118">Это дает службам такие возможности:</span><span class="sxs-lookup"><span data-stu-id="c6a42-118">This allows services to:</span></span>
  * <span data-ttu-id="c6a42-119">Система hello запроса</span><span class="sxs-lookup"><span data-stu-id="c6a42-119">query hello system</span></span>
  * <span data-ttu-id="c6a42-120">отчет о работоспособности о сущностях в кластере hello</span><span class="sxs-lookup"><span data-stu-id="c6a42-120">report health about entities in hello cluster</span></span>
  * <span data-ttu-id="c6a42-121">получение уведомлений об изменениях конфигурации и кода;</span><span class="sxs-lookup"><span data-stu-id="c6a42-121">receive notifications about configuration and code changes</span></span>
  * <span data-ttu-id="c6a42-122">поиск других служб и обмен данными с ними;</span><span class="sxs-lookup"><span data-stu-id="c6a42-122">find and communicate with other services,</span></span>
  * <span data-ttu-id="c6a42-123">(необязательно) используйте hello [надежного коллекций](service-fabric-reliable-services-reliable-collections.md)</span><span class="sxs-lookup"><span data-stu-id="c6a42-123">(optionally) use hello [Reliable Collections](service-fabric-reliable-services-reliable-collections.md)</span></span>
  * <span data-ttu-id="c6a42-124">.. и предоставление им доступа к toomany других возможностей из первого класса модели программирования в нескольких языках программирования.</span><span class="sxs-lookup"><span data-stu-id="c6a42-124">...and giving them access toomany other capabilities, all from a first class programming model in several programming languages.</span></span>
* <span data-ttu-id="c6a42-125">Простая модель для выполнения собственного кода, которая похожа на привычные модели программирования:</span><span class="sxs-lookup"><span data-stu-id="c6a42-125">A simple model for running your own code that looks like programming models you are used to.</span></span> <span data-ttu-id="c6a42-126">у создаваемого кода четко определенная точка входа и простой в управлении жизненный цикл.</span><span class="sxs-lookup"><span data-stu-id="c6a42-126">Your code has a well-defined entry point and easily managed lifecycle.</span></span>
* <span data-ttu-id="c6a42-127">Модель взаимодействия со службами</span><span class="sxs-lookup"><span data-stu-id="c6a42-127">A pluggable communication model.</span></span> <span data-ttu-id="c6a42-128">Использование транспорта hello по своему усмотрению, например HTTP с [веб-API](service-fabric-reliable-services-communication-webapi.md), WebSockets, пользовательские протоколы TCP и любые другие элементы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-128">Use hello transport of your choice, such as HTTP with [Web API](service-fabric-reliable-services-communication-webapi.md), WebSockets, custom TCP protocols, or anything else.</span></span> <span data-ttu-id="c6a42-129">Надежные службы позволяют использовать ряд отличных готовых вариантов или задействовать собственный.</span><span class="sxs-lookup"><span data-stu-id="c6a42-129">Reliable Services provide some great out-of-the-box options you can use, or you can provide your own.</span></span>
* <span data-ttu-id="c6a42-130">Для служб с отслеживанием состояния, позволяет вам tooconsistently и надежно хранить состояние прямо в службе с использованием модели программирования надежные службы hello [надежного коллекции](service-fabric-reliable-services-reliable-collections.md).</span><span class="sxs-lookup"><span data-stu-id="c6a42-130">For stateful services, hello Reliable Services programming model allows you tooconsistently and reliably store your state right inside your service by using [Reliable Collections](service-fabric-reliable-services-reliable-collections.md).</span></span> <span data-ttu-id="c6a42-131">Надежные коллекции являются простым набором классов коллекций высокой доступности и надежности, которые будут знакомы tooanyone, который использовал C# коллекций.</span><span class="sxs-lookup"><span data-stu-id="c6a42-131">Reliable Collections are a simple set of highly available and reliable collection classes that will be familiar tooanyone who has used C# collections.</span></span> <span data-ttu-id="c6a42-132">Обычно для надежного управления состоянием службам требовались внешние системы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-132">Traditionally, services needed external systems for Reliable state management.</span></span> <span data-ttu-id="c6a42-133">С помощью надежного коллекций можно хранить состояние Далее вычислительные tooyour с hello же высокий уровень доступности и надежности, вы уже tooexpect сопряжен с высокой надежности внешнего хранилища.</span><span class="sxs-lookup"><span data-stu-id="c6a42-133">With Reliable Collections, you can store your state next tooyour compute with hello same high availability and reliability you've come tooexpect from highly available external stores.</span></span> <span data-ttu-id="c6a42-134">Эта модель также повышает задержку, так как совместного размещения вычислений hello и состояние, он должен toofunction.</span><span class="sxs-lookup"><span data-stu-id="c6a42-134">This model also improves latency because you are co-locating hello compute and state it needs toofunction.</span></span>

<span data-ttu-id="c6a42-135">Посмотрите этот видеоролик от Microsoft Virtual Academy, который содержит обзор служб Reliable Services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span><span class="sxs-lookup"><span data-stu-id="c6a42-135">Watch this Microsoft Virtual Academy video for an overview of Reliable services: <center>
<a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=HhD9566yC_4106218965">
<img src="./media/service-fabric-reliable-services-introduction/ReliableServicesVid.png" WIDTH="360" HEIGHT="244" />
</a>
</center></span></span>

## <a name="what-makes-reliable-services-different"></a><span data-ttu-id="c6a42-136">Чем отличаются надежные службы</span><span class="sxs-lookup"><span data-stu-id="c6a42-136">What makes Reliable Services different?</span></span>
<span data-ttu-id="c6a42-137">Надежные службы в Service Fabric отличаются от служб, которые вы могли создавать ранее.</span><span class="sxs-lookup"><span data-stu-id="c6a42-137">Reliable Services in Service Fabric are different from services you may have written before.</span></span> <span data-ttu-id="c6a42-138">Service Fabric обеспечивает надежность, доступность, согласованность и масштабируемость.</span><span class="sxs-lookup"><span data-stu-id="c6a42-138">Service Fabric provides reliability, availability, consistency, and scalability.</span></span>

* <span data-ttu-id="c6a42-139">**Надежность** - вашей службы остается копирование даже в ненадежной средах, где компьютеры с ошибкой, или нажмите кнопку неполадок сети, или в случаях, где hello служб сами возникают ошибки и сбоя или вызвать сбой.</span><span class="sxs-lookup"><span data-stu-id="c6a42-139">**Reliability** - Your service stays up even in unreliable environments where your machines fail or hit network issues, or in cases where hello services themselves encounter errors and crash or fail.</span></span> <span data-ttu-id="c6a42-140">Для служб с отслеживанием состояния в состояние сохраняется даже при наличии hello сети и другие сбои.</span><span class="sxs-lookup"><span data-stu-id="c6a42-140">For stateful services, your state is preserved even in hello presence of network or other failures.</span></span>
* <span data-ttu-id="c6a42-141">**Доступность** — служба доступна и отвечает на запросы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-141">**Availability** - Your service is reachable and responsive.</span></span> <span data-ttu-id="c6a42-142">Платформа Service Fabric поддерживает нужное число запущенных копий.</span><span class="sxs-lookup"><span data-stu-id="c6a42-142">Service Fabric maintains your desired number of running copies.</span></span>
* <span data-ttu-id="c6a42-143">**Масштабируемость** - службы связаны с определенным оборудованием и увеличиваться или уменьшаться при необходимости через hello Добавление или удаление оборудования или других ресурсов.</span><span class="sxs-lookup"><span data-stu-id="c6a42-143">**Scalability** - Services are decoupled from specific hardware, and they can grow or shrink as necessary through hello addition or removal of hardware or other resources.</span></span> <span data-ttu-id="c6a42-144">Службы являются tooensure легко секционированных (особенно в случае с отслеживанием состояния hello), которую можно масштабировать службу hello и дескриптор частичных сбоев.</span><span class="sxs-lookup"><span data-stu-id="c6a42-144">Services are easily partitioned (especially in hello stateful case) tooensure that hello service can scale and handle partial failures.</span></span> <span data-ttu-id="c6a42-145">Службы могут создаваться и удаления динамически посредством кода, включение дополнительные toobe экземпляров зацикливается при необходимости прочитать в ответ toocustomer запросов.</span><span class="sxs-lookup"><span data-stu-id="c6a42-145">Services can be created and deleted dynamically via code, enabling more instances toobe spun up as necessary, say in response toocustomer requests.</span></span> <span data-ttu-id="c6a42-146">Наконец Service Fabric стимулирует облегченного toobe служб.</span><span class="sxs-lookup"><span data-stu-id="c6a42-146">Finally, Service Fabric encourages services toobe lightweight.</span></span> <span data-ttu-id="c6a42-147">Service Fabric позволяет тысячи служб toobe подготовкой внутри одного процесса, вместо необходимости или выделять все экземпляры операционной системы или процессы tooa один экземпляр службы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-147">Service Fabric allows thousands of services toobe provisioned within a single process, rather than requiring or dedicating entire OS instances or processes tooa single instance of a service.</span></span>
* <span data-ttu-id="c6a42-148">**Согласованность** -все данные, сохраненные в этой службе можно гарантировать toobe согласованной.</span><span class="sxs-lookup"><span data-stu-id="c6a42-148">**Consistency** - Any information stored in this service can be guaranteed toobe consistent.</span></span> <span data-ttu-id="c6a42-149">Это касается и согласованности между несколькими коллекциями Reliable Collections в пределах одной службы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-149">This is true even across multiple reliable collections within a service.</span></span> <span data-ttu-id="c6a42-150">Изменения в нескольких коллекциях в пределах службы можно выполнять путем атомарных транзакций.</span><span class="sxs-lookup"><span data-stu-id="c6a42-150">Changes across collections within a service can be made in a transactionally atomic manner.</span></span>

## <a name="service-lifecycle"></a><span data-ttu-id="c6a42-151">Жизненный цикл службы</span><span class="sxs-lookup"><span data-stu-id="c6a42-151">Service lifecycle</span></span>
<span data-ttu-id="c6a42-152">Независимо от того, какую службу вы используете (с отслеживанием или без отслеживания состояния), надежные службы обеспечивают простой жизненный цикл, позволяющий быстро подключить код и приступить к работе.</span><span class="sxs-lookup"><span data-stu-id="c6a42-152">Whether your service is stateful or stateless, Reliable Services provide a simple lifecycle that lets you quickly plug in your code and get started.</span></span>  <span data-ttu-id="c6a42-153">Существует всего один или два метода, необходимость tooimplement tooget службы запуска.</span><span class="sxs-lookup"><span data-stu-id="c6a42-153">There are just one or two methods that you need tooimplement tooget your service up and running.</span></span>

* <span data-ttu-id="c6a42-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** — этот метод является, где служба hello определяет stack(s) hello связи, что ему toouse.</span><span class="sxs-lookup"><span data-stu-id="c6a42-154">**CreateServiceReplicaListeners/CreateServiceInstanceListeners** - This method is where hello service defines hello communication stack(s) that it wants toouse.</span></span> <span data-ttu-id="c6a42-155">Здравствуйте стек связи, таких как [веб-API](service-fabric-reliable-services-communication-webapi.md), является то, что определяет hello прослушивания конечной точки или конечные точки для hello службы (как клиентам подключиться hello службы).</span><span class="sxs-lookup"><span data-stu-id="c6a42-155">hello communication stack, such as [Web API](service-fabric-reliable-services-communication-webapi.md), is what defines hello listening endpoint or endpoints for hello service (how clients reach hello service).</span></span> <span data-ttu-id="c6a42-156">Он также определяет, как подозрительные сообщения hello взаимодействовать с hello остальная часть кода службы hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-156">It also defines how hello messages that appear interact with hello rest of hello service code.</span></span>
* <span data-ttu-id="c6a42-157">**RunAsync** — этот метод является, где работает служба его бизнес-логики и где он начнем все фоновые задачи, которые должно выполняться на протяжении времени существования hello hello службы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-157">**RunAsync** - This method is where your service runs its business logic, and where it would kick off any background tasks that should run for hello lifetime of hello service.</span></span> <span data-ttu-id="c6a42-158">Hello токен отмены, который предоставляется сигнал для при следует остановить эту работу.</span><span class="sxs-lookup"><span data-stu-id="c6a42-158">hello cancellation token that is provided is a signal for when that work should stop.</span></span> <span data-ttu-id="c6a42-159">Например если служба hello должен toopull сообщений из очереди надежного и их обработки, это где происходит этой работы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-159">For example, if hello service needs toopull messages out of a Reliable Queue and process them, this is where that work happens.</span></span>

<span data-ttu-id="c6a42-160">Если о службах надежного hello изучении первый раз, читайте дальше!</span><span class="sxs-lookup"><span data-stu-id="c6a42-160">If you're learning about reliable services for hello first time, read on!</span></span> <span data-ttu-id="c6a42-161">Если вы ищете жизненного цикла hello надежных служб Подробное пошаговое руководство, вы может перейдите слишком[в этой статье](service-fabric-reliable-services-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="c6a42-161">If you're looking for a detailed walkthrough of hello lifecycle of reliable services, you can head over too[this article](service-fabric-reliable-services-lifecycle.md).</span></span>

## <a name="example-services"></a><span data-ttu-id="c6a42-162">Примеры служб</span><span class="sxs-lookup"><span data-stu-id="c6a42-162">Example services</span></span>
<span data-ttu-id="c6a42-163">Зная этой модели программирования, давайте кратко рассмотрим две разные службы toosee, как взаимодействуют эти элементы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-163">Knowing this programming model, let's take a quick look at two different services toosee how these pieces fit together.</span></span>

### <a name="stateless-reliable-services"></a><span data-ttu-id="c6a42-164">Надежные службы без отслеживания состояния</span><span class="sxs-lookup"><span data-stu-id="c6a42-164">Stateless Reliable Services</span></span>
<span data-ttu-id="c6a42-165">Служба без сохранения состояния — один where не поддерживается, если в службе hello вызовов состояние.</span><span class="sxs-lookup"><span data-stu-id="c6a42-165">A stateless service is one where there is no state maintained within hello service across calls.</span></span> <span data-ttu-id="c6a42-166">Любое имеющееся состояние является одноразовым и не требует синхронизации, репликации, постоянного сохранения или высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="c6a42-166">Any state that is present is entirely disposable and doesn't require synchronization, replication, persistence, or high availability.</span></span>

<span data-ttu-id="c6a42-167">Например рассмотрим калькулятора, который не хранит и получает все условия и операций tooperform за один раз.</span><span class="sxs-lookup"><span data-stu-id="c6a42-167">For example, consider a calculator that has no memory and receives all terms and operations tooperform at once.</span></span>

<span data-ttu-id="c6a42-168">В этом случае hello `RunAsync()` (C#) или `runAsync()` (Java) hello службы может быть пустым, так как она не фоновой задачи обработки этой службы hello должен toodo.</span><span class="sxs-lookup"><span data-stu-id="c6a42-168">In this case, hello `RunAsync()` (C#) or `runAsync()` (Java) of hello service can be empty, since there is no background task-processing that hello service needs toodo.</span></span> <span data-ttu-id="c6a42-169">При создании службы калькулятора hello возвращает `ICommunicationListener` (C#) или `CommunicationListener` (Java) (например [веб-API](service-fabric-reliable-services-communication-webapi.md)), которая будет открывать прослушивания конечной точки для этого же порта.</span><span class="sxs-lookup"><span data-stu-id="c6a42-169">When hello calculator service is created, it returns an `ICommunicationListener` (C#) or `CommunicationListener` (Java) (for example [Web API](service-fabric-reliable-services-communication-webapi.md)) that opens up a listening endpoint on some port.</span></span> <span data-ttu-id="c6a42-170">Этой конечной точке подключает toohello другое вычисление методов (пример: «Добавить (n1, n2)»), которые определяют открытый API hello калькулятора.</span><span class="sxs-lookup"><span data-stu-id="c6a42-170">This listening endpoint hooks up toohello different calculation methods (example: "Add(n1, n2)") that define hello calculator's public API.</span></span>

<span data-ttu-id="c6a42-171">При вызове из клиента, вызывается соответствующий метод hello, а служба калькулятора hello выполняет операции hello для hello данных предоставляются и возвращает результат hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-171">When a call is made from a client, hello appropriate method is invoked, and hello calculator service performs hello operations on hello data provided and returns hello result.</span></span> <span data-ttu-id="c6a42-172">Никакого состояния она не хранит.</span><span class="sxs-lookup"><span data-stu-id="c6a42-172">It doesn't store any state.</span></span>

<span data-ttu-id="c6a42-173">Это простой пример, так как в службе калькулятора внутреннее состояние не сохраняется.</span><span class="sxs-lookup"><span data-stu-id="c6a42-173">Not storing any internal state makes this example calculator simple.</span></span> <span data-ttu-id="c6a42-174">Большинство служб без отслеживания состояния не являются таковыми в полной мере,</span><span class="sxs-lookup"><span data-stu-id="c6a42-174">But most services aren't truly stateless.</span></span> <span data-ttu-id="c6a42-175">Вместо этого они прикрепить их состояние toosome другое хранилище.</span><span class="sxs-lookup"><span data-stu-id="c6a42-175">Instead, they externalize their state toosome other store.</span></span> <span data-ttu-id="c6a42-176">(например, веб-приложение, хранящее состояние сеанса в резервном хранилище или кэше, не является службой без отслеживания состояния).</span><span class="sxs-lookup"><span data-stu-id="c6a42-176">(For example, any web app that relies on keeping session state in a backing store or cache is not stateless.)</span></span>

<span data-ttu-id="c6a42-177">Распространенным примером службы без сохранения состояния в том, как используются в Service Fabric — как начальную, предоставляет hello публичный веб-API для веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="c6a42-177">A common example of how stateless services are used in Service Fabric is as a front-end that exposes hello public-facing API for a web application.</span></span> <span data-ttu-id="c6a42-178">Затем службы интерфейса Hello рассказывает toocomplete служб toostateful запрос пользователя.</span><span class="sxs-lookup"><span data-stu-id="c6a42-178">hello front-end service then talks toostateful services toocomplete a user request.</span></span> <span data-ttu-id="c6a42-179">В этом случае вызовы от клиентов, направленной tooa известен порт, например 80, где прослушивание службы без отслеживания состояния hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-179">In this case, calls from clients are directed tooa known port, such as 80, where hello stateless service is listening.</span></span> <span data-ttu-id="c6a42-180">Этой службы без отслеживания состояния, получает вызов hello и определяет ли hello вызовов из надежного источника, а какую службу оно предназначено.</span><span class="sxs-lookup"><span data-stu-id="c6a42-180">This stateless service receives hello call and determines whether hello call is from a trusted party and which service it's destined for.</span></span>  <span data-ttu-id="c6a42-181">Затем службы без отслеживания состояния hello пересылает hello вызовов toohello верная секция службы с отслеживанием состояния hello и ожидает ответа.</span><span class="sxs-lookup"><span data-stu-id="c6a42-181">Then, hello stateless service forwards hello call toohello correct partition of hello stateful service and waits for a response.</span></span> <span data-ttu-id="c6a42-182">Когда службы без отслеживания состояния hello получает ответ, он возвращает toohello исходного клиента.</span><span class="sxs-lookup"><span data-stu-id="c6a42-182">When hello stateless service receives a response, it replies toohello original client.</span></span> <span data-ttu-id="c6a42-183">Пример такой службы можно найти в образцах [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span><span class="sxs-lookup"><span data-stu-id="c6a42-183">An example of such a service is in our samples [C#](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started) / [Java](https://github.com/Azure-Samples/service-fabric-java-getting-started/tree/master/Actors/VisualObjectActor/VisualObjectWebService).</span></span> <span data-ttu-id="c6a42-184">Это лишь один пример этот шаблон в образцах hello, существуют и другие в других образцах также.</span><span class="sxs-lookup"><span data-stu-id="c6a42-184">This is only one example of this pattern in hello samples, there are others in other samples as well.</span></span>

### <a name="stateful-reliable-services"></a><span data-ttu-id="c6a42-185">Надежные службы с отслеживанием состояния</span><span class="sxs-lookup"><span data-stu-id="c6a42-185">Stateful Reliable Services</span></span>
<span data-ttu-id="c6a42-186">Службы с отслеживанием состояния —, должен иметь какой-либо части состояние, согласованное и присутствовать для службы toofunction hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-186">A stateful service is one that must have some portion of state kept consistent and present in order for hello service toofunction.</span></span> <span data-ttu-id="c6a42-187">Рассмотрим службу, которая постоянно вычисляет скользящее среднее некоторых значений на основе получаемых обновлений.</span><span class="sxs-lookup"><span data-stu-id="c6a42-187">Consider a service that constantly computes a rolling average of some value based on updates it receives.</span></span> <span data-ttu-id="c6a42-188">toodo, оно должно иметь hello текущий набор входящих запросов, он должен tooprocess и hello текущее среднее.</span><span class="sxs-lookup"><span data-stu-id="c6a42-188">toodo this, it must have hello current set of incoming requests it needs tooprocess and hello current average.</span></span> <span data-ttu-id="c6a42-189">Любая служба, которая получает, обрабатывает и сохраняет информацию во внешнем хранилище (как это сегодня делается в хранилище BLOB-объектов или табличном хранилище Azure), является службой с отслеживанием состояния —</span><span class="sxs-lookup"><span data-stu-id="c6a42-189">Any service that retrieves, processes, and stores information in an external store (such as an Azure blob or table store today) is stateful.</span></span> <span data-ttu-id="c6a42-190">Он просто сохраняет свое состояние в хранилище внешних состояний hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-190">It just keeps its state in hello external state store.</span></span>

<span data-ttu-id="c6a42-191">Большинство служб сегодня сохранять свое состояние во извне, поскольку внешнем хранилище hello именно это и обеспечивает надежность, доступность, масштабируемость и согласованности для этого состояния.</span><span class="sxs-lookup"><span data-stu-id="c6a42-191">Most services today store their state externally, since hello external store is what provides reliability, availability, scalability, and consistency for that state.</span></span> <span data-ttu-id="c6a42-192">В Service Fabric службы не требуется toostore их состояние на внешних ресурсах.</span><span class="sxs-lookup"><span data-stu-id="c6a42-192">In Service Fabric, services aren't required toostore their state externally.</span></span> <span data-ttu-id="c6a42-193">Эти требования для службы кода hello и состояние службы hello занимается Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="c6a42-193">Service Fabric takes care of these requirements for both hello service code and hello service state.</span></span>

> [!NOTE]
> <span data-ttu-id="c6a42-194">Поддержка надежных служб с отслеживанием состояния пока недоступна в Linux (для C# и Java).</span><span class="sxs-lookup"><span data-stu-id="c6a42-194">Support for Stateful Reliable Services is not available on Linux yet (for C# or Java).</span></span>
>

<span data-ttu-id="c6a42-195">Предположим, что мы хотим toowrite служба, обрабатывающая изображения.</span><span class="sxs-lookup"><span data-stu-id="c6a42-195">Let's say we want toowrite a service that processes images.</span></span> <span data-ttu-id="c6a42-196">toodo это принимает службы hello в образ и hello ряд tooperform преобразования на этот образ.</span><span class="sxs-lookup"><span data-stu-id="c6a42-196">toodo this, hello service takes in an image and hello series of conversions tooperform on that image.</span></span> <span data-ttu-id="c6a42-197">Эта служба возвращает прослушиватель связи (допустим, веб-API), который предоставляет такой API, как `ConvertImage(Image i, IList<Conversion> conversions)`.</span><span class="sxs-lookup"><span data-stu-id="c6a42-197">This service returns a communication listener (let's suppose it's a WebAPI) that exposes an API like `ConvertImage(Image i, IList<Conversion> conversions)`.</span></span> <span data-ttu-id="c6a42-198">При получении запроса, службы hello сохраняет его в `IReliableQueue`и возвращает toohello некоторые идентификатор клиента, поэтому он может отслеживать hello запроса.</span><span class="sxs-lookup"><span data-stu-id="c6a42-198">When it receives a request, hello service stores it in a `IReliableQueue`, and returns some id toohello client so it can track hello request.</span></span>

<span data-ttu-id="c6a42-199">В этой службе метод `RunAsync()` может быть более сложным.</span><span class="sxs-lookup"><span data-stu-id="c6a42-199">In this service, `RunAsync()` could be more complex.</span></span> <span data-ttu-id="c6a42-200">Служба Hello содержит цикл внутри его `RunAsync()` , извлекает запросы из `IReliableQueue` и выполняет преобразование hello запрошено.</span><span class="sxs-lookup"><span data-stu-id="c6a42-200">hello service has a loop inside its `RunAsync()` that pulls requests out of `IReliableQueue` and performs hello conversions requested.</span></span> <span data-ttu-id="c6a42-201">Hello результаты сохраняются в `IReliableDictionary` , чтобы при hello клиента возвращается быстро получать их преобразованные изображения.</span><span class="sxs-lookup"><span data-stu-id="c6a42-201">hello results get stored in an `IReliableDictionary` so that when hello client comes back they can get their converted images.</span></span> <span data-ttu-id="c6a42-202">tooensure, даже в том случае, если что-то происходит сбой hello образ не будет потерян, это надежной службы будет извлекать из очереди hello, выполняют преобразования hello и сохранения результата hello все в одной транзакции.</span><span class="sxs-lookup"><span data-stu-id="c6a42-202">tooensure that even if something fails hello image isn't lost, this Reliable Service would pull out of hello queue, perform hello conversions, and store hello result all in a single transaction.</span></span> <span data-ttu-id="c6a42-203">В этом случае приветственное сообщение удаляется из очереди hello и hello результаты хранятся в словаре результат hello, только после завершения преобразования hello.</span><span class="sxs-lookup"><span data-stu-id="c6a42-203">In this case, hello message is removed from hello queue and hello results are stored in hello result dictionary only when hello conversions are complete.</span></span> <span data-ttu-id="c6a42-204">Кроме того служба hello может по запросу hello изображения из очереди сообщений hello и немедленно сохранить его в удаленное хранилище.</span><span class="sxs-lookup"><span data-stu-id="c6a42-204">Alternatively, hello service could pull hello image out of hello queue and immediately store it in a remote store.</span></span> <span data-ttu-id="c6a42-205">Это уменьшает hello объем hello службы состояний имеет toomanage, но повышает сложность, так как служба hello tookeep hello необходимых метаданных toomanage hello удаленное хранилище.</span><span class="sxs-lookup"><span data-stu-id="c6a42-205">This reduces hello amount of state hello service has toomanage, but increases complexity since hello service has tookeep hello necessary metadata toomanage hello remote store.</span></span> <span data-ttu-id="c6a42-206">В обоих подходах Если что-то сбой в запрос средней hello hello остается в hello очереди ожидания toobe обработки.</span><span class="sxs-lookup"><span data-stu-id="c6a42-206">With either approach, if something failed in hello middle hello request remains in hello queue waiting toobe processed.</span></span>

<span data-ttu-id="c6a42-207">Один самое toonote об этой службе является своему названию обычной службы .NET!</span><span class="sxs-lookup"><span data-stu-id="c6a42-207">One thing toonote about this service is that it sounds like a normal .NET service!</span></span> <span data-ttu-id="c6a42-208">Hello единственное отличие заключается в том, что данные hello структуры используются (`IReliableQueue` и `IReliableDictionary`) предоставляются Service Fabric и высокой надежные, доступны и согласованность.</span><span class="sxs-lookup"><span data-stu-id="c6a42-208">hello only difference is that hello data structures being used (`IReliableQueue` and `IReliableDictionary`) are provided by Service Fabric, and are highly reliable, available, and consistent.</span></span>

## <a name="when-toouse-reliable-services-apis"></a><span data-ttu-id="c6a42-209">Когда toouse надежные API служб</span><span class="sxs-lookup"><span data-stu-id="c6a42-209">When toouse Reliable Services APIs</span></span>
<span data-ttu-id="c6a42-210">Если любой из следующих hello характеризующих потребностей приложения службы, затем следует надежные API служб:</span><span class="sxs-lookup"><span data-stu-id="c6a42-210">If any of hello following characterize your application service needs, then you should consider Reliable Services APIs:</span></span>

* <span data-ttu-id="c6a42-211">Код службы (и при необходимости состояния) toobe высокой доступности и надежности</span><span class="sxs-lookup"><span data-stu-id="c6a42-211">You want your service's code (and optionally state) toobe highly available and reliable</span></span>
* <span data-ttu-id="c6a42-212">Необходимы гарантии выполнения транзакций между несколькими единицами состояния (например, заказами и позициями строки заказа).</span><span class="sxs-lookup"><span data-stu-id="c6a42-212">You need transactional guarantees across multiple units of state (for example, orders and order line items).</span></span>
* <span data-ttu-id="c6a42-213">Состояние приложения можно естественным образом моделировать в виде надежных словарей и очередей.</span><span class="sxs-lookup"><span data-stu-id="c6a42-213">Your application’s state can be naturally modeled as Reliable Dictionaries and Queues.</span></span>
* <span data-ttu-id="c6a42-214">Код приложения или состояние должен toobe высокой надежности с небольшими задержками операций чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="c6a42-214">Your applications code or state needs toobe highly available with low latency reads and writes.</span></span>
* <span data-ttu-id="c6a42-215">Приложению параллелизма hello toocontrol или гранулярности транзакционных операций через одну или несколько коллекций надежным.</span><span class="sxs-lookup"><span data-stu-id="c6a42-215">Your application needs toocontrol hello concurrency or granularity of transacted operations across one or more Reliable Collections.</span></span>
* <span data-ttu-id="c6a42-216">Требуется сообщений hello toomanage или управления hello секционирование схемы для службы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-216">You want toomanage hello communications or control hello partitioning scheme for your service.</span></span>
* <span data-ttu-id="c6a42-217">Коду требуется среда выполнения, работающая в режиме свободного потока.</span><span class="sxs-lookup"><span data-stu-id="c6a42-217">Your code needs a free-threaded runtime environment.</span></span>
* <span data-ttu-id="c6a42-218">Приложение должно toodynamically создавать или удалять надежного словари или очередей или всей службы во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="c6a42-218">Your application needs toodynamically create or destroy Reliable Dictionaries or Queues or whole Services at runtime.</span></span>
* <span data-ttu-id="c6a42-219">Необходимо tooprogrammatically Service Fabric техники резервного копирования и восстановления возможности управления для состояния вашей службы.</span><span class="sxs-lookup"><span data-stu-id="c6a42-219">You need tooprogrammatically control Service Fabric-provided backup and restore features for your service’s state.</span></span>
* <span data-ttu-id="c6a42-220">Вашему приложению требуется toomaintain журнала изменений для его единиц измерения состояния.</span><span class="sxs-lookup"><span data-stu-id="c6a42-220">Your application needs toomaintain change history for its units of state.</span></span>
* <span data-ttu-id="c6a42-221">Требуется toodevelop, или использовать поставщики сторонних производителей разработаны, пользовательские состояния.</span><span class="sxs-lookup"><span data-stu-id="c6a42-221">You want toodevelop or consume third-party-developed, custom state providers.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c6a42-222">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="c6a42-222">Next steps</span></span>
* [<span data-ttu-id="c6a42-223">Краткое руководство по надежным службам Reliable Services</span><span class="sxs-lookup"><span data-stu-id="c6a42-223">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
* [<span data-ttu-id="c6a42-224">Продвинутое использование надежных служб</span><span class="sxs-lookup"><span data-stu-id="c6a42-224">Reliable Services advanced usage</span></span>](service-fabric-reliable-services-advanced-usage.md)
* [<span data-ttu-id="c6a42-225">модель программирования службы Reliable Actor Hello</span><span class="sxs-lookup"><span data-stu-id="c6a42-225">hello Reliable Actors programming model</span></span>](service-fabric-reliable-actors-introduction.md)
