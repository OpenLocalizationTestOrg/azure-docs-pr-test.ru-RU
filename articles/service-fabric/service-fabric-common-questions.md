---
title: "aaaCommon вопросы о Microsoft Azure Service Fabric | Документы Microsoft"
description: "Часто задаваемые вопросы о Service Fabric и ответы на них"
services: service-fabric
documentationcenter: .net
author: chackdan
manager: timlt
editor: 
ms.assetid: 5a179703-ff0c-4b8e-98cd-377253295d12
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/18/2017
ms.author: chackdan
ms.openlocfilehash: 4cbe92d2a03f7a1ea5d077807fdc982288220a7e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="commonly-asked-service-fabric-questions"></a><span data-ttu-id="fd8cf-103">Распространенные вопросы о Service Fabric</span><span class="sxs-lookup"><span data-stu-id="fd8cf-103">Commonly asked Service Fabric questions</span></span>

<span data-ttu-id="fd8cf-104">Пользователи задают множество схожих вопросов о возможностях и использовании Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-104">There are many commonly asked questions about what Service Fabric can do and how it should be used.</span></span> <span data-ttu-id="fd8cf-105">В этом документе приведены ответы на многие из этих вопросов.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-105">This document covers many of those common questions and their answers.</span></span>

## <a name="cluster-setup-and-management"></a><span data-ttu-id="fd8cf-106">Настройка кластера и управление им</span><span class="sxs-lookup"><span data-stu-id="fd8cf-106">Cluster setup and management</span></span>

### <a name="can-i-create-a-cluster-that-spans-multiple-azure-regions-or-my-own-datacenters"></a><span data-ttu-id="fd8cf-107">Можно ли создать кластер, охватывающий несколько регионов Azure или моих центров обработки данных?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-107">Can I create a cluster that spans multiple Azure regions or my own datacenters?</span></span>

<span data-ttu-id="fd8cf-108">Да.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-108">Yes.</span></span> 

<span data-ttu-id="fd8cf-109">Hello core Service Fabric Технология кластеризации может быть используется toocombine машины, работающие в любом месте в Здравствуй, мир, при условии, что они имеют сетевого подключения tooeach других.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-109">hello core Service Fabric clustering technology can be used toocombine machines running anywhere in hello world, so long as they have network connectivity tooeach other.</span></span> <span data-ttu-id="fd8cf-110">Однако создание и запуск такого кластера может оказаться сложной задачей.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-110">However, building and running such a cluster can be complicated.</span></span>

<span data-ttu-id="fd8cf-111">Если вы заинтересованы в этом сценарии, рекомендуем tooget контакта либо с помощью hello [списка проблем службы структуры Github](https://github.com/azure/service-fabric-issues) или с помощью представителю службы поддержки в порядке tooobtain Дополнительные рекомендации.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-111">If you are interested in this scenario, we encourage you tooget in contact either through hello [Service Fabric Github Issues List](https://github.com/azure/service-fabric-issues) or through your support representative in order tooobtain additional guidance.</span></span> <span data-ttu-id="fd8cf-112">группы Service Fabric Hello работает tooprovide ясности, руководство и рекомендации для этого сценария.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-112">hello Service Fabric team is working tooprovide additional clarity, guidance, and recommendations for this scenario.</span></span> 

<span data-ttu-id="fd8cf-113">Tooconsider некоторые вещи:</span><span class="sxs-lookup"><span data-stu-id="fd8cf-113">Some things tooconsider:</span></span> 

1. <span data-ttu-id="fd8cf-114">Hello ресурса кластера Service Fabric в Azure сегодня является региональным, как данный кластер hello наборов масштабирования виртуальных машин hello основана на.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-114">hello Service Fabric cluster resource in Azure is regional today, as are hello virtual machine scale sets that hello cluster is built on.</span></span> <span data-ttu-id="fd8cf-115">Это означает, что в событии hello региональные сбоя может потерять hello возможность toomanage hello кластера через hello Azure Resource Manager hello портала Azure.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-115">This means that in hello event of a regional failure you may lose hello ability toomanage hello cluster via hello Azure Resource Manager or hello Azure Portal.</span></span> <span data-ttu-id="fd8cf-116">Это может произойти, даже если hello кластер продолжает работать и будет toointeract может с ним напрямую.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-116">This can happen even though hello cluster remains running and you'd be able toointeract with it directly.</span></span> <span data-ttu-id="fd8cf-117">Кроме того Azure сегодня не предлагает возможность toohave hello одной виртуальной сети, которое можно использовать в разных регионах.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-117">In addition, Azure today does not offer hello ability toohave a single virtual network that is usable across regions.</span></span> <span data-ttu-id="fd8cf-118">Это означает, что в нескольких регионах кластере в Azure либо [общих IP-адресов для каждой виртуальной Машины в hello набора масштабирования виртуальных Машин](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) или [VPN-шлюзы Azure](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-118">This means that a multi-region cluster in Azure requires either [Public IP Addresses for each VM in hello VM Scale Sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-networking.md#public-ipv4-per-virtual-machine) or [Azure VPN Gateways](../vpn-gateway/vpn-gateway-about-vpngateways.md).</span></span> <span data-ttu-id="fd8cf-119">Эти сетевые параметры имеют влияние различных на затраты, производительности и toosome степень при разработке приложения, поэтому перед обеспечивает такой среде требуется тщательного анализа и планирования.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-119">These networking choices have different impacts on costs, performance, and toosome degree application design, so careful analysis and planning is required before standing up such an environment.</span></span>
2. <span data-ttu-id="fd8cf-120">Hello обслуживания, управление и мониторинг этих машин может стать сложной, особенно в том случае, если распределены по _типы_ сред, например между разных поставщиков облачных служб, а также между локальными ресурсами и Azure .</span><span class="sxs-lookup"><span data-stu-id="fd8cf-120">hello maintenance, management, and monitoring of these machines can become complicated, especially when spanned across _types_ of environments, such as between different cloud providers or between on-premises resources and Azure.</span></span> <span data-ttu-id="fd8cf-121">Следует соблюдать осторожность, обновляемый tooensure, мониторинга, управления и диагностики, применимые для кластера hello и приложения hello перед выполнением рабочих нагрузок в такой среде.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-121">Care must be taken tooensure that upgrades, monitoring, management, and diagnostics are understood for both hello cluster and hello applications before running production workloads in such an environment.</span></span> <span data-ttu-id="fd8cf-122">Если у вас уже имеется значительный опыт решения этих задач в Azure или в собственных центрах обработки данных, скорее всего, аналогичные решения можно будет применить для создания или выполнения кластера Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-122">If you already have lots of experience solving these problems in Azure or within your own datacenters, then it is likely that those same solutions can be applied when building out or running your Service Fabric cluster.</span></span> 

### <a name="do-service-fabric-nodes-automatically-receive-os-updates"></a><span data-ttu-id="fd8cf-123">Получают ли узлы Service Fabric обновления операционной системы автоматически?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-123">Do Service Fabric nodes automatically receive OS updates?</span></span>

<span data-ttu-id="fd8cf-124">Не в настоящее время, но это также распространенный тип запросов, Azure планирует toodeliver.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-124">Not today, but this is also a common request that Azure intends toodeliver.</span></span>

<span data-ttu-id="fd8cf-125">В промежуточном hello, у нас есть [предоставленный приложения](service-fabric-patch-orchestration-application.md) , hello операционных систем, под Service Fabric узлы остаются программного обеспечения, установленного и копирование toodate.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-125">In hello interim, we have [provided an application](service-fabric-patch-orchestration-application.md) that hello operating systems underneath your Service Fabric nodes stay patched and up toodate.</span></span>

<span data-ttu-id="fd8cf-126">Задача Hello с обновлениями операционной системы —, обычно требуется перезагрузка hello компьютере, что приводит к потере доступности временный.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-126">hello challenge with OS updates is that they typically require a reboot of hello machine, which results in temporary availability loss.</span></span> <span data-ttu-id="fd8cf-127">Сам по себе это не проблема, поскольку Service Fabric автоматически будет перенаправлять трафик для этих узлов tooother служб.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-127">By itself, that is not a problem, since Service Fabric will automatically redirect traffic for those services tooother nodes.</span></span> <span data-ttu-id="fd8cf-128">Тем не менее если обновления ОС не координируются кластеру hello, есть риск hello множество узлов одновременно прекращает работу.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-128">However, if OS updates are not coordinated across hello cluster, there is hello potential that many nodes go down at once.</span></span> <span data-ttu-id="fd8cf-129">Такие одновременные перезагрузки могут привести к полной потере доступности службы или как минимум определенного раздела (для службы с отслеживанием состояния).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-129">Such simultaneous reboots can cause complete availability loss for a service, or at least for a specific partition (for a stateful service).</span></span>

<span data-ttu-id="fd8cf-130">В будущем hello мы планируем toosupport ОС политики обновления, которое полностью автоматических и координация между доменами обновления, гарантируя, что доступность сохраняется несмотря на после перезагрузки и других непредвиденных сбоев.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-130">In hello future, we plan toosupport an OS update policy that is fully automated and coordinated across update domains, ensuring that availability is maintained despite reboots and other unexpected failures.</span></span>

### <a name="can-i-use-large-virtual-machine-scale-sets-in-my-sf-cluster"></a><span data-ttu-id="fd8cf-131">Можно ли использовать большие масштабируемые наборы виртуальных машин в кластере Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-131">Can I use Large Virtual Machine Scale Sets in my SF cluster?</span></span> 

<span data-ttu-id="fd8cf-132">**Краткий ответ**. Нет.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-132">**Short answer** - No.</span></span> 

<span data-ttu-id="fd8cf-133">**Время ответа на** — несмотря на то, что hello большие наборы масштабирования виртуальной машины позволяют tooscale набора масштабирования виртуальных машин, не более 1000 экземпляров виртуальных Машин, это делается путем использования hello размещение групп (PGs).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-133">**Long Answer** - Although hello Large Virtual Machine Scale Sets allow you tooscale a virtual machine scale set upto 1000 VM instances, it does so by hello use of Placement Groups (PGs).</span></span> <span data-ttu-id="fd8cf-134">Ошибки доменах отказоустойчивости и обновления доменах согласованы только в размещение группы структуры использует сбоя и доменам обновления toomake размещения решений, принятых экземпляров служб реплики или службы.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-134">Fault domains (FDs) and upgrade domains (UDs) are only consistent within a placement group Service fabric uses FDs and UDs toomake placement decisions of your service replicas/Service instances.</span></span> <span data-ttu-id="fd8cf-135">Поскольку сравнимы hello сбоя и доменам обновления только в пределах группы размещения SF его нельзя использовать.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-135">Since hello FDs  and UDs are comparable only within a placement group SF cannot use it.</span></span> <span data-ttu-id="fd8cf-136">Например, если VM1 в PG1 топологии FD = 0 и VM9 в PG2 имеет топологии FD = 4, это не значит, что VM1 и VM2 находятся на двух разных аппаратных стойках, таким образом SF нельзя использовать значения hello FD этого решения toomake вариантов размещения.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-136">For example, If VM1 in PG1 has a topology of FD=0 and VM9 in PG2 has a topology of FD=4 , it does not mean that VM1 and VM2 are on two different Hardware Racks, hence SF cannot use hello FD values in this case toomake placement decisions.</span></span>

<span data-ttu-id="fd8cf-137">Как поддержка балансировки нагрузки уровня 4 hello отсутствие в настоящее время существуют другие проблемы с большой виртуальной машины набора масштабирования.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-137">There are other issues with Large virtual machine scale sets currently, like hello lack of level-4 Load balancing support.</span></span> <span data-ttu-id="fd8cf-138">См. toofor [сведения о больших масштабировать наборов](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span><span class="sxs-lookup"><span data-stu-id="fd8cf-138">Refer toofor [details on Large scale sets](../virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups.md)</span></span>



### <a name="what-is-hello-minimum-size-of-a-service-fabric-cluster-why-cant-it-be-smaller"></a><span data-ttu-id="fd8cf-139">Что такое hello минимальный размер кластера Service Fabric</span><span class="sxs-lookup"><span data-stu-id="fd8cf-139">What is hello minimum size of a Service Fabric cluster?</span></span> <span data-ttu-id="fd8cf-140">Почему он не может быть меньше?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-140">Why can't it be smaller?</span></span>

<span data-ttu-id="fd8cf-141">Минимальный поддерживаемый размер Hello выполнение рабочих нагрузок кластера Service Fabric — пять узлов.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-141">hello minimum supported size for a Service Fabric cluster running production workloads is five nodes.</span></span> <span data-ttu-id="fd8cf-142">Для сценариев разработки и тестирования мы поддерживаем кластеры из трех узлов.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-142">For dev/test scenarios, we support three node clusters.</span></span>

<span data-ttu-id="fd8cf-143">Эти минимальные значения существуют, поскольку кластер Service Fabric hello выполняет набор служб с отслеживанием состояния системы, включая службы имен hello и диспетчера отказоустойчивости hello.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-143">These minimums exist because hello Service Fabric cluster runs a set of stateful system services, including hello naming service and hello failover manager.</span></span> <span data-ttu-id="fd8cf-144">Эти службы, которые следят за службы, которые были развернуты toohello кластера и там, где они в настоящее время размещены, зависят от строгая согласованность.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-144">These services, which track what services have been deployed toohello cluster and where they're currently hosted, depend on strong consistency.</span></span> <span data-ttu-id="fd8cf-145">В свою очередь, зависит от возможности tooacquire hello, строгая согласованность *кворума* для любого данного обновления службы состояние toohello те из них, где кворума представляет strict большинство hello реплик (N/2 + 1) для данной службы.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-145">That strong consistency, in turn, depends on hello ability tooacquire a *quorum* for any given update toohello state of those services, where a quorum represents a strict majority of hello replicas (N/2 +1) for a given service.</span></span>

<span data-ttu-id="fd8cf-146">С учетом этого давайте рассмотрим некоторые возможные конфигурации кластера.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-146">With that background, let's examine some possible cluster configurations:</span></span>

<span data-ttu-id="fd8cf-147">**Один узел**: этот параметр не обеспечения высокого уровня доступности, поскольку потеря hello hello один узел для какой-либо причине означает потерю hello hello всего кластера.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-147">**One node**: this option does not provide high availability since hello loss of hello single node for any reason means hello loss of hello entire cluster.</span></span>

<span data-ttu-id="fd8cf-148">**Два узла.** Кворум для службы, развернутой на двух узлах (N = 2), составляет 2 узла (2/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-148">**Two nodes**: a quorum for a service deployed across two nodes (N = 2) is 2 (2/2 + 1 = 2).</span></span> <span data-ttu-id="fd8cf-149">Когда одна реплика теряется, это невозможно toocreate кворума.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-149">When a single replica is lost, it is impossible toocreate a quorum.</span></span> <span data-ttu-id="fd8cf-150">Так как обновление службы требует временного отключения реплики, эта конфигурация бесполезна.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-150">Since performing a service upgrade requires temporarily taking down a replica, this is not a useful configuration.</span></span>

<span data-ttu-id="fd8cf-151">**Три узла**: с тремя узлами (N = 3) toocreate hello требование кворума по-прежнему два узла (3/2 + 1 = 2).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-151">**Three nodes**: with three nodes (N=3), hello requirement toocreate a quorum is still two nodes (3/2 + 1 = 2).</span></span> <span data-ttu-id="fd8cf-152">Это означает, что можно потерять один узел и по-прежнему сохранить кворум.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-152">This means that you can lose an individual node and still maintain quorum.</span></span>

<span data-ttu-id="fd8cf-153">Hello три узла кластера конфигурация поддерживается для разработки и тестирования так, как можно выполнять обновление и сбоев отдельных узлов, сохраняются до тех пор, пока они не осуществляется одновременно.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-153">hello three node cluster configuration is supported for dev/test because you can safely perform upgrades and survive individual node failures, as long as they don't happen simultaneously.</span></span> <span data-ttu-id="fd8cf-154">Для рабочих нагрузок должны быть устойчивыми toosuch одновременном сбое, поэтому требуются пять узлы.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-154">For production workloads, you must be resilient toosuch a simultaneous failure, so five nodes are required.</span></span>

### <a name="can-i-turn-off-my-cluster-at-nightweekends-toosave-costs"></a><span data-ttu-id="fd8cf-155">Можно ли отключить кластер по цене toosave ночи и выходные дни</span><span class="sxs-lookup"><span data-stu-id="fd8cf-155">Can I turn off my cluster at night/weekends toosave costs?</span></span>

<span data-ttu-id="fd8cf-156">Как правило, нет.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-156">In general, no.</span></span> <span data-ttu-id="fd8cf-157">Service Fabric сохраняет состояние на локальных дисках эфемерных, это означает, что если виртуальная машина hello перемещенный tooa другой узел, hello данные не перемещаются вместе с ним.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-157">Service Fabric stores state on local, ephemeral disks, meaning that if hello virtual machine is moved tooa different host, hello data does not move with it.</span></span> <span data-ttu-id="fd8cf-158">В нормальных условиях это не проблема как hello новый узел не станет активным toodate с другими узлами.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-158">In normal operation, that is not a problem as hello new node is brought up toodate by other nodes.</span></span> <span data-ttu-id="fd8cf-159">Тем не менее все узлы остановить и перезапустить их позже, существует ли значительные вероятность того, что большая часть узлов hello запустить на новые узлы и сделать не удается toorecover hello системы.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-159">However, if you stop all nodes and restart them later, there is a significant possibility that most of hello nodes start on new hosts and make hello system unable toorecover.</span></span>

<span data-ttu-id="fd8cf-160">При желании toocreate кластеры для тестирования приложения перед его развертыванием, мы рекомендуем динамически создавать эти кластеры как часть вашего [непрерывной интеграции и непрерывного развертывания конвейера](service-fabric-set-up-continuous-integration.md).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-160">If you would like toocreate clusters for testing your application before it is deployed, we recommend that you dynamically create those clusters as part of your [continuous integration/continuous deployment pipeline](service-fabric-set-up-continuous-integration.md).</span></span>


### <a name="how-do-i-upgrade-my-operating-system-for-example-from-windows-server-2012-toowindows-server-2016"></a><span data-ttu-id="fd8cf-161">Как обновить Мои операционной системы (например, из tooWindows Windows Server 2012 Server 2016)?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-161">How do I upgrade my Operating System (for example from Windows Server 2012 tooWindows Server 2016)?</span></span>

<span data-ttu-id="fd8cf-162">Хотя мы работаем над улучшенное взаимодействие, в настоящее время вы несете ответственность за hello обновления.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-162">While we're working on an improved experience, today, you are responsible for hello upgrade.</span></span> <span data-ttu-id="fd8cf-163">Необходимо обновить образ ОС hello на hello виртуальных машин из hello кластера одной виртуальной Машины одновременно.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-163">You must upgrade hello OS image on hello virtual machines of hello cluster one VM at a time.</span></span> 

## <a name="container-support"></a><span data-ttu-id="fd8cf-164">Поддержка контейнеров</span><span class="sxs-lookup"><span data-stu-id="fd8cf-164">Container Support</span></span>

### <a name="why-are-my-containers-that-are-deployed-toosf-unable-tooresolve-dns-addresses"></a><span data-ttu-id="fd8cf-165">Почему — это контейнеры, my, не удается tooresolve развернутой tooSF DNS адрес?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-165">Why are my containers that are deployed tooSF unable tooresolve DNS addresses?</span></span>

<span data-ttu-id="fd8cf-166">Эта проблема обнаружена в кластерах версии 5.6.204.9494.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-166">This issue has been reported on clusters that are on 5.6.204.9494 version</span></span> 

<span data-ttu-id="fd8cf-167">**Устранение рисков** : выполните [в этом документе](service-fabric-dnsservice.md) tooenable hello DNS службы service fabric в кластере.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-167">**Mitigation** :  Follow [this document](service-fabric-dnsservice.md) tooenable hello DNS service fabric service in your cluster.</span></span>

<span data-ttu-id="fd8cf-168">**Исправьте** : версия обновления tooa поддерживается кластера, больше, чем 5.6.204.9494, если оно доступно.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-168">**Fix** :  Upgrade tooa supported cluster version that is higher than 5.6.204.9494, when it is available.</span></span> <span data-ttu-id="fd8cf-169">Если кластер tooautomatic обновления, hello кластера автоматически обновит toohello версию, которая содержит эта проблема устранена.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-169">If your cluster is set tooautomatic upgrades, then hello cluster will automatically upgrade toohello version that has this issue fixed.</span></span>

  
## <a name="application-design"></a><span data-ttu-id="fd8cf-170">Проектирование приложений</span><span class="sxs-lookup"><span data-stu-id="fd8cf-170">Application Design</span></span>

### <a name="whats-hello-best-way-tooquery-data-across-partitions-of-a-reliable-collection"></a><span data-ttu-id="fd8cf-171">Что такое hello лучший способ tooquery данные в секциях надежного коллекции</span><span class="sxs-lookup"><span data-stu-id="fd8cf-171">What's hello best way tooquery data across partitions of a Reliable Collection?</span></span>

<span data-ttu-id="fd8cf-172">Надежные коллекции, обычно являются [секционированных](service-fabric-concepts-partitioning.md) tooenable горизонтального масштабирования для более высокую производительность и пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-172">Reliable collections are typically [partitioned](service-fabric-concepts-partitioning.md) tooenable scale out for greater performance and throughput.</span></span> <span data-ttu-id="fd8cf-173">Это означает, что состояние hello для данной службы могут быть распределены между десятках или сотнях компьютеров.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-173">That means that hello state for a given service may be spread across 10s or 100s of machines.</span></span> <span data-ttu-id="fd8cf-174">tooperform операций над полного набора данных, имеется несколько параметров.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-174">tooperform operations over that full data set, you have a few options:</span></span>

- <span data-ttu-id="fd8cf-175">Создайте службу, которая запрашивает все разделы из другой службы toopull hello необходимых данных.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-175">Create a service that queries all partitions of another service toopull in hello required data.</span></span>
- <span data-ttu-id="fd8cf-176">Создать службу, которая может получать данные из всех разделов другой службы.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-176">Create a service that can receive data from all partitions of another service.</span></span>
- <span data-ttu-id="fd8cf-177">Периодически отправлять данные из каждого внешнего хранилища tooan службы.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-177">Periodically push data from each service tooan external store.</span></span> <span data-ttu-id="fd8cf-178">Этот подход используется, только если для выполнения запросов hello не являются частью основной бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-178">This approach is only appropriate if hello queries you're performing are not part of your core business logic.</span></span>


### <a name="whats-hello-best-way-tooquery-data-across-my-actors"></a><span data-ttu-id="fd8cf-179">Что такое hello лучшим способом tooquery данные через my субъекты</span><span class="sxs-lookup"><span data-stu-id="fd8cf-179">What's hello best way tooquery data across my actors?</span></span>

<span data-ttu-id="fd8cf-180">Субъекты, спроектированный toobe независимые единицы состояния и вычислений, поэтому не рекомендуется tooperform общих запросов состояния субъекта во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-180">Actors are designed toobe independent units of state and compute, so it is not recommended tooperform broad queries of actor state at runtime.</span></span> <span data-ttu-id="fd8cf-181">При наличии tooquery необходимость во множестве hello полного состояния субъекта, следует либо:</span><span class="sxs-lookup"><span data-stu-id="fd8cf-181">If you have a need tooquery across hello full set of actor state, you should consider either:</span></span>

- <span data-ttu-id="fd8cf-182">Заменив субъекта служб с отслеживанием состояния надежные службы таким образом, что hello число сетевых запросов toogather все данные из числа hello субъекты toohello количество секций в службе.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-182">Replacing your actor services with stateful reliable services, such that hello number of network requests toogather all data from hello number of actors toohello number of partitions in your service.</span></span>
- <span data-ttu-id="fd8cf-183">Проектирование передачу tooperiodically субъекты их tooan внешнего хранилища состояний для упрощения выполнения запросов.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-183">Designing your actors tooperiodically push their state tooan external store for easier querying.</span></span> <span data-ttu-id="fd8cf-184">Как выше, этот подход работоспособно только при выполнении запросов hello не являются обязательными для вашей поведения во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-184">As above, this approach is only viable if hello queries you're performing are not required for your runtime behavior.</span></span>

### <a name="how-much-data-can-i-store-in-a-reliable-collection"></a><span data-ttu-id="fd8cf-185">Сколько данных можно сохранить в Reliable Collection?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-185">How much data can I store in a Reliable Collection?</span></span>

<span data-ttu-id="fd8cf-186">Надежные службы обычно секционирована, поэтому сумма hello, которые можно хранить ограничивается только hello количество машин в кластере hello и hello объем доступной памяти на этих компьютерах.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-186">Reliable services are typically partitioned, so hello amount you can store is only limited by hello number of machines you have in hello cluster, and hello amount of memory available on those machines.</span></span>

<span data-ttu-id="fd8cf-187">Например, предположим, что есть Reliable Collection в службе со 100 разделами и 3 репликами для хранения объектов со средним размером 1 КБ.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-187">As an example, suppose that you have a reliable collection in a service with 100 partitions and 3 replicas, storing objects that average 1kb in size.</span></span> <span data-ttu-id="fd8cf-188">Теперь предположим, что имеется кластер из 10 компьютеров с 16 ГБ памяти на каждом компьютере.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-188">Now suppose that you have a 10 machine cluster with 16gb of memory per machine.</span></span> <span data-ttu-id="fd8cf-189">Для простоты и очень консервативной toobe Предположим, что hello операционной системы и системные службы, среда выполнения Service Fabric hello и службам принимать 6 ГБ, оставляя 10 ГБ на один компьютер или 100 ГБ для hello кластера.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-189">For simplicity and toobe very conservative, assume that hello operating system and system services, hello Service Fabric runtime, and your services consume 6gb of that, leaving 10gb available per machine, or 100gb for hello cluster.</span></span>

<span data-ttu-id="fd8cf-190">Учитывая, что каждый объект должен быть сохранен трижды (основная копия и две реплики), памяти будет достаточно примерно для 35 миллионов объектов в коллекции при полной загрузке.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-190">Keeping in mind that each object must be stored three times (one primary and two replicas), you would have sufficient memory for approximately 35 million objects in your collection when operating at full capacity.</span></span> <span data-ttu-id="fd8cf-191">Тем не менее рекомендуется устойчивым toohello одновременных потери домена сбоя и домене обновления, представляющего примерно треть емкости и уменьшится hello номеров tooroughly 23 миллионов.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-191">However, we recommend being resilient toohello simultaneous loss of a failure domain and an upgrade domain, which represents about 1/3 of capacity, and would reduce hello number tooroughly 23 million.</span></span>

<span data-ttu-id="fd8cf-192">Обратите внимание, что в этой оценке также предполагается следующее.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-192">Note that this calculation also assumes:</span></span>

- <span data-ttu-id="fd8cf-193">Что hello распределение данных по секциям hello примерно универсальный или сообщении toohello метрики нагрузки диспетчер ресурсов кластера.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-193">That hello distribution of data across hello partitions is roughly uniform or that you're reporting load metrics toohello Cluster Resource Manager.</span></span> <span data-ttu-id="fd8cf-194">По умолчанию Service Fabric будет распределять нагрузку, исходя из числа реплик.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-194">By default, Service Fabric will load balance based on replica count.</span></span> <span data-ttu-id="fd8cf-195">В приведенном выше примере, поместить 10 первичных реплик и 20 вторичных реплик на каждом узле в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-195">In our example above, that would put 10 primary replicas and 20 secondary replicas on each node in hello cluster.</span></span> <span data-ttu-id="fd8cf-196">Хорошо подходит для нагрузки, который распределяется равномерно между hello секций.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-196">That works well for load that is evenly distributed across hello partitions.</span></span> <span data-ttu-id="fd8cf-197">Если загрузка не совпадает, вы сообщаете нагрузки, hello диспетчер ресурсов можно вместе с пакетом обновления меньшего размера реплики и предоставлении дополнительной памяти размером tooconsume реплик на отдельный узел.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-197">If load is not even, you must report load so that hello Resource Manager can pack smaller replicas together and allow larger replicas tooconsume more memory on an individual node.</span></span>

- <span data-ttu-id="fd8cf-198">Что hello надежной службы рассматриваемой — только один хранение состояние hello в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-198">That hello reliable service in question is hello only one storing state in hello cluster.</span></span> <span data-ttu-id="fd8cf-199">Так как можно развернуть несколько служб tooa кластера, необходимы toobe учитывать hello ресурсов, каждый будет необходима toorun и управлять его состояние.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-199">Since you can deploy multiple services tooa cluster, you need toobe mindful of hello resources that each will need toorun and manage its state.</span></span>

- <span data-ttu-id="fd8cf-200">Самого кластера, hello не увеличивается и уменьшается.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-200">That hello cluster itself is not growing or shrinking.</span></span> <span data-ttu-id="fd8cf-201">При добавлении нескольких компьютеров, Service Fabric будет балансирования вашей tooleverage реплик hello дополнительную емкость до hello число машин превосходит hello количество секций в службе, так как отдельные реплика не может охватывать машины.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-201">If you add more machines, Service Fabric will rebalance your replicas tooleverage hello additional capacity until hello number of machines surpasses hello number of partitions in your service, since an individual replica cannot span machines.</span></span> <span data-ttu-id="fd8cf-202">Напротив Если уменьшить размер hello hello кластера путем удаления машины, реплики будет более плотно и меньший объем общей памяти.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-202">By contrast, if you reduce hello size of hello cluster by removing machines, your replicas will be packed more tightly and have less overall capacity.</span></span>

### <a name="how-much-data-can-i-store-in-an-actor"></a><span data-ttu-id="fd8cf-203">Сколько данных можно хранить в субъекте?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-203">How much data can I store in an actor?</span></span>

<span data-ttu-id="fd8cf-204">С помощью надежного обмена hello объем данных, которые могут храниться в службу субъектов ограничивается только hello общего места на диске и памяти, доступной через hello узлов в кластере.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-204">As with reliable services, hello amount of data that you can store in an actor service is only limited by hello total disk space and memory available across hello nodes in your cluster.</span></span> <span data-ttu-id="fd8cf-205">Однако отдельные субъекты наиболее эффективны, по мере используется tooencapsulate небольшой объем состояния и связанные с бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-205">However, individual actors are most effective when they are used tooencapsulate a small amount of state and associated business logic.</span></span> <span data-ttu-id="fd8cf-206">Как правило, состояние отдельного субъекта должно измеряться в килобайтах.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-206">As a general rule, an individual actor should have state that is measured in kilobytes.</span></span>

## <a name="other-questions"></a><span data-ttu-id="fd8cf-207">Другие вопросы</span><span class="sxs-lookup"><span data-stu-id="fd8cf-207">Other questions</span></span>

### <a name="how-does-service-fabric-relate-toocontainers"></a><span data-ttu-id="fd8cf-208">Как Service Fabric связаны toocontainers</span><span class="sxs-lookup"><span data-stu-id="fd8cf-208">How does Service Fabric relate toocontainers?</span></span>

<span data-ttu-id="fd8cf-209">Контейнеры обеспечивают простой способ toopackage служб и их зависимости, таким образом, что они запуска согласованно во всех средах и могут работать в изолированном режиме на одном компьютере.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-209">Containers offer a simple way toopackage services and their dependencies such that they run consistently in all environments and can operate in an isolated fashion on a single machine.</span></span> <span data-ttu-id="fd8cf-210">Service Fabric предлагает toodeploy способом и управления службами, включая [, упакованные в контейнере службы](service-fabric-containers-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fd8cf-210">Service Fabric offers a way toodeploy and manage services, including [services that have been packaged in a container](service-fabric-containers-overview.md).</span></span>

### <a name="are-you-planning-tooopen-source-service-fabric"></a><span data-ttu-id="fd8cf-211">Планируется ли источник tooopen Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="fd8cf-211">Are you planning tooopen source Service Fabric?</span></span>

<span data-ttu-id="fd8cf-212">Мы планировалось tooopen источника hello надежные службы и службы reliable Actor платформы на GitHub и будет принимать проекты toothose вклады сообщества.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-212">We intend tooopen source hello reliable services and reliable actors frameworks on GitHub and will accept community contributions toothose projects.</span></span> <span data-ttu-id="fd8cf-213">Следуйте инструкциям hello [Service Fabric блог](https://blogs.msdn.microsoft.com/azureservicefabric/) для получения дополнительных сведений, как они все было объявлено.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-213">Please follow hello [Service Fabric blog](https://blogs.msdn.microsoft.com/azureservicefabric/) for more details as they're announced.</span></span>

<span data-ttu-id="fd8cf-214">Hello в данный момент нет планов tooopen источника hello среда выполнения Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="fd8cf-214">hello are currently no plans tooopen source hello Service Fabric runtime.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fd8cf-215">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="fd8cf-215">Next steps</span></span>

- [<span data-ttu-id="fd8cf-216">Дополнительные сведения об основных понятиях и рекомендациях Service Fabric</span><span class="sxs-lookup"><span data-stu-id="fd8cf-216">Learn about core Service Fabric concepts and best practices</span></span>](https://mva.microsoft.com/en-us/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965)
