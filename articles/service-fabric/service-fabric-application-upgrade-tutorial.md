---
title: "Учебник обновления приложения Fabric aaaService | Документы Microsoft"
description: "В этой статье рассматриваются возможности hello развертывания приложения Service Fabric, изменения кода hello и развертывание обновления с помощью Visual Studio."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: a3181a7a-9ab1-4216-b07a-05b79bd826a4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: d069ff0b291018dbac846e65cddff1e9d73d156c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-tutorial-using-visual-studio"></a><span data-ttu-id="e9f88-103">Учебник по обновлению приложений Service Fabric с помощью Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e9f88-103">Service Fabric application upgrade tutorial using Visual Studio</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="e9f88-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="e9f88-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="e9f88-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="e9f88-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="e9f88-106">Azure Service Fabric упрощает процесс обновления облачных приложений за счет того, что обновляются только измененные службы и о мониторинге работоспособности приложения на протяжении всего процесса обновления hello hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-106">Azure Service Fabric simplifies hello process of upgrading cloud applications by ensuring that only changed services are upgraded, and that application health is monitored throughout hello upgrade process.</span></span> <span data-ttu-id="e9f88-107">Он также автоматически выполняет откат hello приложения toohello предыдущей версии при возникновении проблем.</span><span class="sxs-lookup"><span data-stu-id="e9f88-107">It also automatically rolls back hello application toohello previous version upon encountering issues.</span></span> <span data-ttu-id="e9f88-108">Обновление приложения Service Fabric *время простоя ноль*, поскольку можно обновить приложение hello без простоев.</span><span class="sxs-lookup"><span data-stu-id="e9f88-108">Service Fabric application upgrades are *Zero Downtime*, since hello application can be upgraded with no downtime.</span></span> <span data-ttu-id="e9f88-109">В этом учебнике описано как toocomplete последовательного обновления из Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="e9f88-109">This tutorial covers how toocomplete a rolling upgrade from Visual Studio.</span></span>

## <a name="step-1-build-and-publish-hello-visual-objects-sample"></a><span data-ttu-id="e9f88-110">Шаг 1: Создавать и публиковать образец hello визуальных объектов</span><span class="sxs-lookup"><span data-stu-id="e9f88-110">Step 1: Build and publish hello Visual Objects sample</span></span>
<span data-ttu-id="e9f88-111">Сначала загрузите hello [визуальных объектов](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) приложений с сайта GitHub.</span><span class="sxs-lookup"><span data-stu-id="e9f88-111">First, download hello [Visual Objects](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started/tree/classic/Actors/VisualObjects) application from GitHub.</span></span> <span data-ttu-id="e9f88-112">Затем, сборка и публикация приложения hello, щелкнув правой кнопкой мыши проект приложения hello, **VisualObjects**и выбрав hello **публикации** команды в пункте меню Service Fabric hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-112">Then, build and publish hello application by right-clicking on hello application project, **VisualObjects**, and selecting hello **Publish** command in hello Service Fabric menu item.</span></span>

![Контекстное меню для приложения Service Fabric][image1]

<span data-ttu-id="e9f88-114">При выборе **публикации** появится всплывающее окно, и можно задать hello **использовать профиль** слишком**PublishProfiles\Local.xml**.</span><span class="sxs-lookup"><span data-stu-id="e9f88-114">Selecting **Publish** brings up a popup, and you can set hello **Target profile** too**PublishProfiles\Local.xml**.</span></span> <span data-ttu-id="e9f88-115">Hello должно выглядеть окно hello следующие, прежде чем нажимать кнопку **публикации**.</span><span class="sxs-lookup"><span data-stu-id="e9f88-115">hello window should look like hello following before you click **Publish**.</span></span>

![Публикация приложения Service Fabric][image2]

<span data-ttu-id="e9f88-117">Теперь можно выбрать **публикации** в диалоговое окно «hello».</span><span class="sxs-lookup"><span data-stu-id="e9f88-117">Now you can click **Publish** in hello dialog box.</span></span> <span data-ttu-id="e9f88-118">Можно использовать [Service Fabric Explorer tooview hello кластера и hello приложения](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="e9f88-118">You can use [Service Fabric Explorer tooview hello cluster and hello application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="e9f88-119">Hello визуальных объектов приложения имеет веб-службы, вы можете перейти ввода tooby [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) в адресной строке браузера hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-119">hello Visual Objects application has a web service that you can go tooby typing [http://localhost:8081/visualobjects/](http://localhost:8081/visualobjects/) in hello address bar of your browser.</span></span>  <span data-ttu-id="e9f88-120">Вы увидите 10 перемещаемые объекты visual, перемещение на экране приветствия.</span><span class="sxs-lookup"><span data-stu-id="e9f88-120">You should see 10 floating visual objects moving around on hello screen.</span></span>

<span data-ttu-id="e9f88-121">**Примечание:** Если развертывание слишком`Cloud.xml` профиля (Azure Service Fabric), приложение hello затем должны быть доступны в **http://{ServiceFabricName}. {} Region}.cloudapp.Azure.com:8081/visualobjects/**.</span><span class="sxs-lookup"><span data-stu-id="e9f88-121">**NOTE:** If deploying too`Cloud.xml` profile (Azure Service Fabric), hello application should then be available at **http://{ServiceFabricName}.{Region}.cloudapp.azure.com:8081/visualobjects/**.</span></span> <span data-ttu-id="e9f88-122">Убедитесь, что вы имеете `8081/TCP` настроен в hello балансировки нагрузки (найти hello балансировки нагрузки в hello же группе ресурсов экземпляра Service Fabric hello).</span><span class="sxs-lookup"><span data-stu-id="e9f88-122">Make sure you do have `8081/TCP` configured in hello Load Balancer (find hello Load Balancer in hello same resource group as hello Service Fabric instance).</span></span>

## <a name="step-2-update-hello-visual-objects-sample"></a><span data-ttu-id="e9f88-123">Шаг 2: Обновление визуальных объектов образец hello</span><span class="sxs-lookup"><span data-stu-id="e9f88-123">Step 2: Update hello Visual Objects sample</span></span>
<span data-ttu-id="e9f88-124">Можно заметить, что с версией hello, которое было развернуто на шаге 1, hello визуальных объектов не поворачиваются.</span><span class="sxs-lookup"><span data-stu-id="e9f88-124">You might notice that with hello version that was deployed in step 1, hello visual objects do not rotate.</span></span> <span data-ttu-id="e9f88-125">Давайте обновление tooone этого приложения, где также вращать hello визуальных объектов.</span><span class="sxs-lookup"><span data-stu-id="e9f88-125">Let's upgrade this application tooone where hello visual objects also rotate.</span></span>

<span data-ttu-id="e9f88-126">Выберите проект VisualObjects.ActorService hello в hello VisualObjects решение и открыть hello **VisualObjectActor.cs** файла.</span><span class="sxs-lookup"><span data-stu-id="e9f88-126">Select hello VisualObjects.ActorService project within hello VisualObjects solution, and open hello **VisualObjectActor.cs** file.</span></span> <span data-ttu-id="e9f88-127">В этом файле go метод toohello `MoveObject`, закомментируйте `visualObject.Move(false)`и раскомментируйте `visualObject.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="e9f88-127">Within that file, go toohello method `MoveObject`, comment out `visualObject.Move(false)`, and uncomment `visualObject.Move(true)`.</span></span> <span data-ttu-id="e9f88-128">Это изменение кода поворачивает hello объекты после обновления службы hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-128">This code change rotates hello objects after hello service is upgraded.</span></span>  <span data-ttu-id="e9f88-129">**Теперь можно построить (не перестроение) hello решения**, какие сборки hello изменения проектов.</span><span class="sxs-lookup"><span data-stu-id="e9f88-129">**Now you can build (not rebuild) hello solution**, which builds hello modified projects.</span></span> <span data-ttu-id="e9f88-130">При выборе *перестроить все*, у вас есть tooupdate hello версий для всех hello проектов.</span><span class="sxs-lookup"><span data-stu-id="e9f88-130">If you select *Rebuild all*, you have tooupdate hello versions for all hello projects.</span></span>

<span data-ttu-id="e9f88-131">Мы также должны tooversion нашего приложения.</span><span class="sxs-lookup"><span data-stu-id="e9f88-131">We also need tooversion our application.</span></span> <span data-ttu-id="e9f88-132">версия hello toomake меняется после правой кнопкой мыши на hello **VisualObjects** проекта, hello Visual Studio можно использовать **изменение версии манифеста** параметр.</span><span class="sxs-lookup"><span data-stu-id="e9f88-132">toomake hello version changes after you right-click on hello **VisualObjects** project, you can use hello Visual Studio **Edit Manifest Versions** option.</span></span> <span data-ttu-id="e9f88-133">При выборе этого параметра отображается hello диалоговое окно для выпуска версий следующим образом:</span><span class="sxs-lookup"><span data-stu-id="e9f88-133">Selecting this option brings up hello dialog box for edition versions as follows:</span></span>

![Диалоговое окно "Управление версиями"][image3]

<span data-ttu-id="e9f88-135">Hello версий обновления для hello изменить проекты и их пакеты кода вместе с tooversion приложения hello 2.0.0.</span><span class="sxs-lookup"><span data-stu-id="e9f88-135">Update hello versions for hello modified projects and their code packages, along with hello application tooversion 2.0.0.</span></span> <span data-ttu-id="e9f88-136">После внесения изменений hello, hello манифест должен выглядеть hello следующим образом (выделенным полужирным шрифтом частям Показать изменения hello):</span><span class="sxs-lookup"><span data-stu-id="e9f88-136">After hello changes are made, hello manifest should look like hello following (bold portions show hello changes):</span></span>

![Обновление версий][image4]

<span data-ttu-id="e9f88-138">Hello набора средств Visual Studio можно выполнить автоматическое накопительные пакеты обновления версий после выбора **автоматическое обновление версий приложения и службы**.</span><span class="sxs-lookup"><span data-stu-id="e9f88-138">hello Visual Studio tools can do automatic rollups of versions upon selecting **Automatically update application and service versions**.</span></span> <span data-ttu-id="e9f88-139">Если вы используете [SemVer](http://www.semver.org), требуется код tooupdate hello и/или конфигурации пакета версии только в том случае, если данный параметр выбран.</span><span class="sxs-lookup"><span data-stu-id="e9f88-139">If you use [SemVer](http://www.semver.org), you need tooupdate hello code and/or configuration package version alone if that option is selected.</span></span>

<span data-ttu-id="e9f88-140">Сохранить изменения hello и проверьте hello **обновления hello приложения** поле.</span><span class="sxs-lookup"><span data-stu-id="e9f88-140">Save hello changes, and now check hello **Upgrade hello Application** box.</span></span>

## <a name="step-3--upgrade-your-application"></a><span data-ttu-id="e9f88-141">Шаг 3. Обновление приложения</span><span class="sxs-lookup"><span data-stu-id="e9f88-141">Step 3:  Upgrade your application</span></span>
<span data-ttu-id="e9f88-142">Ознакомьтесь с hello [параметров обновления приложения](service-fabric-application-upgrade-parameters.md) и hello [процесс обновления](service-fabric-application-upgrade.md) tooget хорошо понимать hello различных обновить параметры, значения времени ожидания и работоспособности критерий, который можно применить.</span><span class="sxs-lookup"><span data-stu-id="e9f88-142">Familiarize yourself with hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and hello [upgrade process](service-fabric-application-upgrade.md) tooget a good understanding of hello various upgrade parameters, time-outs, and health criterion that can be applied.</span></span> <span data-ttu-id="e9f88-143">В этом пошаговом руководстве критерий оценки работоспособности службы hello имеет значение по умолчанию toohello (не отслеживается mode).</span><span class="sxs-lookup"><span data-stu-id="e9f88-143">For this walkthrough, hello service health evaluation criterion is set toohello default (unmonitored mode).</span></span> <span data-ttu-id="e9f88-144">Эти параметры можно настроить, выбрав **настроить параметры обновления** , а затем изменить параметры hello в случае необходимости.</span><span class="sxs-lookup"><span data-stu-id="e9f88-144">You can configure these settings by selecting **Configure Upgrade Settings** and then modifying hello parameters as desired.</span></span>

<span data-ttu-id="e9f88-145">Теперь мы все приложения hello toostart набор обновления, выбрав **публикации**.</span><span class="sxs-lookup"><span data-stu-id="e9f88-145">Now we are all set toostart hello application upgrade by selecting **Publish**.</span></span> <span data-ttu-id="e9f88-146">Эта функция обновляет вашего приложения tooversion 2.0.0, в котором поворот объектов hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-146">This option upgrades your application tooversion 2.0.0, in which hello objects rotate.</span></span> <span data-ttu-id="e9f88-147">Структура службы обновляет в одном домене обновления за раз (некоторые объекты обновляются во-первых, следуют другие) и службы hello остается доступным во время обновления hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-147">Service Fabric upgrades one update domain at a time (some objects are updated first, followed by others), and hello service remains accessible during hello upgrade.</span></span> <span data-ttu-id="e9f88-148">Служба доступа к toohello может проверяться через клиент (браузер).</span><span class="sxs-lookup"><span data-stu-id="e9f88-148">Access toohello service can be checked through your client (browser).</span></span>  

<span data-ttu-id="e9f88-149">Теперь, как hello продолжается обновления приложения, вы можете отслеживать ее с помощью Service Fabric Explorer с помощью hello **обновления выполняется** вкладка приложения hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-149">Now, as hello application upgrade proceeds, you can monitor it with Service Fabric Explorer, by using hello **Upgrades in Progress** tab under hello applications.</span></span>

<span data-ttu-id="e9f88-150">Через несколько минут все домены обновления должны быть обновлены (завершено), а hello окне вывода Visual Studio также должны указать завершение обновления hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-150">In a few minutes, all update domains should be upgraded (completed), and hello Visual Studio output window should also state that hello upgrade is completed.</span></span> <span data-ttu-id="e9f88-151">И вы должны найти, *все* теперь заменяемого hello визуальных объектов в окне обозревателя!</span><span class="sxs-lookup"><span data-stu-id="e9f88-151">And you should find that *all* hello visual objects in your browser window are now rotating!</span></span>

<span data-ttu-id="e9f88-152">Может требуется tootry изменение версий hello и переход с версии 2.0.0 tooversion 3.0.0 в качестве упражнения или даже от версии 2.0.0 резервное tooversion 1.0.0.</span><span class="sxs-lookup"><span data-stu-id="e9f88-152">You may want tootry changing hello versions, and moving from version 2.0.0 tooversion 3.0.0 as an exercise, or even from version 2.0.0 back tooversion 1.0.0.</span></span> <span data-ttu-id="e9f88-153">Работать с тайм-аутов и toomake политики работоспособности самостоятельно ознакомиться с ними.</span><span class="sxs-lookup"><span data-stu-id="e9f88-153">Play with time-outs and health policies toomake yourself familiar with them.</span></span> <span data-ttu-id="e9f88-154">При развертывании Azure кластера в качестве tooan отличие от локального кластера tooa, hello параметров, используемых может иметь toodiffer.</span><span class="sxs-lookup"><span data-stu-id="e9f88-154">When deploying tooan Azure cluster as opposed tooa local cluster, hello parameters used may have toodiffer.</span></span> <span data-ttu-id="e9f88-155">Рекомендуется достаточно экономно значение тайм-ауты hello.</span><span class="sxs-lookup"><span data-stu-id="e9f88-155">We recommend that you set hello time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e9f88-156">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="e9f88-156">Next steps</span></span>
<span data-ttu-id="e9f88-157">[Обновление приложения с помощью PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) поможет вам выполнить обновление приложения с помощью PowerShell.</span><span class="sxs-lookup"><span data-stu-id="e9f88-157">[Upgrading your application using PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="e9f88-158">Управление обновлениями приложения осуществляется с помощью [параметров обновления](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="e9f88-158">Control how your application is upgraded by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="e9f88-159">Обеспечить совместимость на обновление приложения путем изучения как toouse [сериализации данных](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="e9f88-159">Make your application upgrades compatible by learning how toouse [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="e9f88-160">Узнайте, как toouse расширенные функции при обновлении приложения с помощью ссылки слишком[дополнительные разделы](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="e9f88-160">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="e9f88-161">Исправьте распространенных проблем в обновлений приложений с помощью ссылки действия toohello в [Устранение неполадок обновлений приложений](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="e9f88-161">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image1]: media/service-fabric-application-upgrade-tutorial/upgrade7.png
[image2]: media/service-fabric-application-upgrade-tutorial/upgrade1.png
[image3]: media/service-fabric-application-upgrade-tutorial/upgrade5.png
[image4]: media/service-fabric-application-upgrade-tutorial/upgrade6.png
