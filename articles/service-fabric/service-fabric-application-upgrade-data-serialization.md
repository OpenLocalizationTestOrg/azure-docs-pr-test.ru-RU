---
title: "Обновление приложений: сериализация данных | Документация Майкрософт"
description: "Лучшие методики для сериализации данных и ее влияние на последовательные обновления приложений."
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a>Влияние сериализации данных на обновление приложений
В [пошаговое обновление приложения](service-fabric-application-upgrade.md), hello обновление будет применен tooa подмножество узлов, один домен обновления одновременно. Во время этого процесса являются некоторых доменов обновления в новой версии приложения hello и некоторых доменов обновления являются более старую версию приложения hello. Во время этого этапа hello hello новой версии приложения должен быть доступ tooread hello старой версии данных и hello старой версии приложения должен быть доступ tooread hello новая версия данных. Если формат данных hello не является несовместимым, hello обновлением вперед и назад может сбой, или в худшем случае данные могут теряются и поврежден. В этой статье обсуждаются составляющие формата данных, а также передовой опыт в обеспечении прямой и обратной совместимости данных.

## <a name="what-makes-up-your-data-format"></a>Что составляет ваш формат данных?
В Azure Service Fabric hello данные, которые сохраняются и реплицируются поступают из классов C#. Для приложений, использующих [надежного коллекции](service-fabric-reliable-services-reliable-collections.md), что данные, объекты hello надежного словари hello и очередей. Для приложений, использующих [службы Reliable Actor](service-fabric-reliable-actors-introduction.md), то есть hello резервном состоянии для субъекта hello. Эти классы C#, должны быть сериализуемыми toobe сохранение и репликацию. Таким образом hello формат данных определяется hello поля и свойства, которые сериализуются, а также как они сериализуются. Например, в `IReliableDictionary<int, MyClass>` hello данных является сериализованный `int` и сериализованный `MyClass`.

### <a name="code-changes-that-result-in-a-data-format-change"></a>Изменения кода, вызывающие изменение формата данных
Так как формат данных hello зависит от классов C#, классы toohello изменения может вызвать изменение формата данных. Следует соблюдать осторожность tooensure, который может обработать последовательного обновления измените формат данных hello. Примеры, которые могут вызвать изменения формата данных:

* Добавление или удаление полей или свойств
* Переименование полей или свойств
* Изменение типов полей или свойств hello
* Изменение hello имя класса или пространства имен

### <a name="data-contract-as-hello-default-serializer"></a>Контракт данных, как сериализатор по умолчанию hello
Hello сериализатор отвечает обычно для чтения данных hello и десериализации его в текущей версии hello, даже если данные hello в более старой версии или *новой* версии. Hello сериализатор по умолчанию — hello [сериализатор контрактов данных](https://msdn.microsoft.com/library/ms733127.aspx), имеющий управление версиями четко определенных правил. Надежные коллекции позволяют переопределить toobe сериализатор hello, а службы Reliable Actor в настоящее время нет. сериализатор данных Hello играет важную роль в обеспечении последовательное обновление. сериализатор контракта данных Hello — hello сериализатор, который рекомендуется использовать для приложения Service Fabric.

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a>Влияние формата данных hello последовательного обновления
Во время обновления существует два основных сценария, где могут возникнуть более старой версии сериализатор hello или *новой* версии данных:

1. После узла обновляется и начинает резервное копирование, новый сериализатор hello загрузит hello данные, которые были сохраненного toodisk hello старой версии.
2. Во время обновления hello hello кластера будут содержать как hello старых и новых версий кода. Поскольку реплик, которые могут быть помещены в разные домены обновления, а реплики отправляют данные tooeach других, hello новые и старые версии данных могли быть обнаружены hello новые и старые версии преобразователя.

> [!NOTE]
> Здравствуйте, «новая версия» и «старая версия» см. Здесь toohello версии кода, на котором выполняется. «новый сериализатор» Hello ссылается toohello сериализатор код, выполняемый в новой версии приложения hello. Hello «новые данные» обозначает toohello сериализации класса C# hello новой версии приложения.
> 
> 

две версии кода Hello и формат данных должен быть вперед и назад совместимы. Если они не совместимы, hello последовательное обновление может завершиться ошибкой или могут быть потеряны данные. Hello последовательное обновление может завершиться ошибкой, так как код hello или сериализатора может вызвать исключения или ошибки при обнаружении hello другие версии. Данные могут быть потеряны, если, например, было добавлено новое свойство, но старые сериализатор hello отвергает его во время десериализации.

Контракт данных — hello, рекомендуется использовать решение для обеспечения того, что данные будут совместимы. Он обладает строго заданными правилами управления версиями при добавлении, удалении или изменении полей. Имеется также поддержка работа с полями неизвестный, прикрепления процесс сериализации и десериализации hello и работе с наследованием класса. Дополнительные сведения см. в разделе [Использование контракта данных](https://msdn.microsoft.com/library/ms733127.aspx).

## <a name="next-steps"></a>Дальнейшие действия
[Руководство по обновлению приложений Service Fabric с помощью Visual Studio](service-fabric-application-upgrade-tutorial.md) поможет вам выполнить поэтапное обновление приложения с помощью Visual Studio.

[Обновление приложения с помощью PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) поможет вам выполнить обновление приложения с помощью PowerShell.

Управление обновлениями приложения осуществляется с помощью [параметров обновления](service-fabric-application-upgrade-parameters.md).

Узнайте, как toouse расширенные функции при обновлении приложения с помощью ссылки слишком[дополнительные разделы](service-fabric-application-upgrade-advanced.md).

Исправьте распространенных проблем в обновлений приложений с помощью ссылки действия toohello в [Устранение неполадок обновлений приложений ](service-fabric-application-upgrade-troubleshooting.md).

