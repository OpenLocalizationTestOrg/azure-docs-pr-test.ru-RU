---
title: "Подготовка к развертыванию кластера Service Fabric автономный aaaAzure | Документы Microsoft"
description: "Документация по toopreparing hello среды и создается конфигурация кластера hello, toobe считается предыдущих toodeploying кластера, предназначен для обработки рабочей нагрузки."
services: service-fabric
documentationcenter: .net
author: maburlik
manager: timlt
editor: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 1/17/2017
ms.author: maburlik;chackdan
ms.openlocfilehash: e503c61a64b408af3f22bd75ab02f1c34ac9f380
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
<a id="preparemachines"></a>

## <a name="plan-and-prepare-your-service-fabric-standalone-cluster-deployment"></a><span data-ttu-id="9c7ae-103">Планирование и подготовка развертывания изолированного кластера Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9c7ae-103">Plan and prepare your Service Fabric standalone cluster deployment</span></span>
<span data-ttu-id="9c7ae-104">Выполните следующие действия перед созданием кластера hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-104">Perform hello following steps before you create your cluster.</span></span>

### <a name="step-1-plan-your-cluster-infrastructure"></a><span data-ttu-id="9c7ae-105">Шаг 1. Планирование инфраструктуры кластера</span><span class="sxs-lookup"><span data-stu-id="9c7ae-105">Step 1: Plan your cluster infrastructure</span></span>
<span data-ttu-id="9c7ae-106">Вы собираетесь toocreate кластера Service Fabric на компьютерах, которыми вы владеете, чтобы можно было решить, определяет, какие типы сбоев, которые вы хотите hello toosurvive кластера.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-106">You are about toocreate a Service Fabric cluster on machines you own, so you can decide what kinds of failures you want hello cluster toosurvive.</span></span> <span data-ttu-id="9c7ae-107">Например требуются отдельные электросети или подключения к Интернету, предоставленных toothese машины?</span><span class="sxs-lookup"><span data-stu-id="9c7ae-107">For example, do you need separate power lines or Internet connections supplied toothese machines?</span></span> <span data-ttu-id="9c7ae-108">Кроме того рассмотрите возможность hello физическая безопасность этих компьютеров.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-108">In addition, consider hello physical security of these machines.</span></span> <span data-ttu-id="9c7ae-109">Где находятся компьютеры hello и лиц, которые должны toothem доступа?</span><span class="sxs-lookup"><span data-stu-id="9c7ae-109">Where are hello machines located and who needs access toothem?</span></span> <span data-ttu-id="9c7ae-110">После внесения этих решений, можно логически сопоставить hello машины toohello различных доменов сбоя (см. шаг 4).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-110">After you make these decisions, you can logically map hello machines toohello various fault domains (see Step 4).</span></span> <span data-ttu-id="9c7ae-111">Планирование для производственных кластеров инфраструктуры Hello сложнее, чем для тестовых кластеров.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-111">hello infrastructure planning for production clusters is more involved than for test clusters.</span></span>

### <a name="step-2-prepare-hello-machines-toomeet-hello-prerequisites"></a><span data-ttu-id="9c7ae-112">Шаг 2: Подготовка toomeet машины hello hello предварительные требования</span><span class="sxs-lookup"><span data-stu-id="9c7ae-112">Step 2: Prepare hello machines toomeet hello prerequisites</span></span>
<span data-ttu-id="9c7ae-113">Необходимые условия для каждого компьютера, которые должны tooadd toohello кластера:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-113">Prerequisites for each machine that you want tooadd toohello cluster:</span></span>

* <span data-ttu-id="9c7ae-114">Рекомендуется наличие не менее 16 ГБ памяти.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-114">A minimum of 16 GB of RAM is recommended.</span></span>
* <span data-ttu-id="9c7ae-115">Рекомендуется наличие не менее 40 ГБ свободного дискового пространства.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-115">A minimum of 40 of GB available disk space is recommended.</span></span>
* <span data-ttu-id="9c7ae-116">Рекомендуется наличие ЦП с 4 ядрами и более.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-116">A 4 core or greater CPU is recommended.</span></span>
* <span data-ttu-id="9c7ae-117">Безопасное сетевое подключение tooa или сети для всех компьютеров.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-117">Connectivity tooa secure network or networks for all machines.</span></span>
* <span data-ttu-id="9c7ae-118">Windows Server 2012 R2 или Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-118">Windows Server 2012 R2 or Windows Server 2016.</span></span> 
* <span data-ttu-id="9c7ae-119">Полностью установленная платформа [.NET Framework 4.5.1 или более поздней версии](https://www.microsoft.com/download/details.aspx?id=40773).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-119">[.NET Framework 4.5.1 or higher](https://www.microsoft.com/download/details.aspx?id=40773), full install.</span></span>
* <span data-ttu-id="9c7ae-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-120">[Windows PowerShell 3.0](https://msdn.microsoft.com/powershell/scripting/setup/installing-windows-powershell).</span></span>
* <span data-ttu-id="9c7ae-121">Hello [службу RemoteRegistry](https://technet.microsoft.com/library/cc754820) должна быть запущена на всех компьютерах hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-121">hello [RemoteRegistry service](https://technet.microsoft.com/library/cc754820) should be running on all hello machines.</span></span>

<span data-ttu-id="9c7ae-122">Hello администратор кластера, развертывания и настройки кластера hello должен иметь [правами администратора](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) на каждом из компьютеров hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-122">hello cluster administrator deploying and configuring hello cluster must have [administrator privileges](https://social.technet.microsoft.com/wiki/contents/articles/13436.windows-server-2012-how-to-add-an-account-to-a-local-administrator-group.aspx) on each of hello machines.</span></span> <span data-ttu-id="9c7ae-123">Пакет Service Fabric нельзя установить на контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-123">You cannot install Service Fabric on a domain controller.</span></span>

### <a name="step-3-determine-hello-initial-cluster-size"></a><span data-ttu-id="9c7ae-124">Шаг 3: Определение размера исходного кластера hello</span><span class="sxs-lookup"><span data-stu-id="9c7ae-124">Step 3: Determine hello initial cluster size</span></span>
<span data-ttu-id="9c7ae-125">Каждый узел кластера Service Fabric автономный имеет hello Service Fabric развертывания среды выполнения и является членом кластера hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-125">Each node in a standalone Service Fabric cluster has hello Service Fabric runtime deployed and is a member of hello cluster.</span></span> <span data-ttu-id="9c7ae-126">В типичном рабочем развертывании используется один узел на экземпляр ОС (физический или виртуальный).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-126">In a typical production deployment, there is one node per OS instance (physical or virtual).</span></span> <span data-ttu-id="9c7ae-127">размер кластера Hello определяется бизнес-потребностями.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-127">hello cluster size is determined by your business needs.</span></span> <span data-ttu-id="9c7ae-128">Тем не менее минимальная конфигурация кластера состоит из трех узлов (компьютеров или виртуальных машин).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-128">However, you must have a minimum cluster size of three nodes (machines or virtual machines).</span></span>
<span data-ttu-id="9c7ae-129">В целях разработки на одном компьютере можно настроить более одного узла.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-129">For development purposes, you can have more than one node on a given machine.</span></span> <span data-ttu-id="9c7ae-130">В рабочей среде Service Fabric поддерживает только один узел на физический компьютер или виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-130">In a production environment, Service Fabric supports only one node per physical or virtual machine.</span></span>

### <a name="step-4-determine-hello-number-of-fault-domains-and-upgrade-domains"></a><span data-ttu-id="9c7ae-131">Шаг 4: Определение hello количество доменов сбоя и доменах обновления</span><span class="sxs-lookup"><span data-stu-id="9c7ae-131">Step 4: Determine hello number of fault domains and upgrade domains</span></span>
<span data-ttu-id="9c7ae-132">Объект *домен сбоя* — физическую единицу сбоя (FD), а затем — непосредственно связанная toohello физической инфраструктурой в центрах обработки данных hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-132">A *fault domain* (FD) is a physical unit of failure and is directly related toohello physical infrastructure in hello data centers.</span></span> <span data-ttu-id="9c7ae-133">Домен сбоя состоит из аппаратных компонентов (компьютеры, коммутаторы, сеть и многое другое), совместно использующих единую точку отказа.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-133">A fault domain consists of hardware components (computers, switches, networks, and more) that share a single point of failure.</span></span> <span data-ttu-id="9c7ae-134">Хотя нет однозначного соответствия между доменами сбоя и стойками, грубо говоря, каждую стойку можно считать доменом сбоя.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-134">Although there is no 1:1 mapping between fault domains and racks, loosely speaking, each rack can be considered a fault domain.</span></span> <span data-ttu-id="9c7ae-135">При рассмотрении hello узлов в кластере, настоятельно рекомендуется, узлы hello распределено по крайней мере три домены сбоя.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-135">When considering hello nodes in your cluster, we strongly recommend that hello nodes be distributed among at least three fault domains.</span></span>

<span data-ttu-id="9c7ae-136">При указании сбоя в ClusterConfig.json можно выбрать имя каждого FD hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-136">When you specify FDs in ClusterConfig.json, you can choose hello name for each FD.</span></span> <span data-ttu-id="9c7ae-137">Service Fabric поддерживает иерархические домены сбоя, поэтому в них можно отразить имеющуюся топологию инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-137">Service Fabric supports hierarchical FDs, so you can reflect your infrastructure topology in them.</span></span>  <span data-ttu-id="9c7ae-138">Например после сбоя hello допустимы.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-138">For example, hello following FDs are valid:</span></span>

* <span data-ttu-id="9c7ae-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-139">"faultDomain": "fd:/Room1/Rack1/Machine1"</span></span>
* <span data-ttu-id="9c7ae-140">"faultDomain": "fd:/FD1"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-140">"faultDomain": "fd:/FD1"</span></span>
* <span data-ttu-id="9c7ae-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-141">"faultDomain": "fd:/Room1/Rack1/PDU1/M1"</span></span>

<span data-ttu-id="9c7ae-142">*Домен обновления* — это логическая единица узлов.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-142">An *upgrade domain* (UD) is a logical unit of nodes.</span></span> <span data-ttu-id="9c7ae-143">Во время обновления Service Fabric скомпонованы (обновление приложения или обновления кластера) все узлы в UD переводятся tooperform hello обновление пока узлы в других доменам обновления остаются доступными tooserve запросов.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-143">During Service Fabric orchestrated upgrades (either an application upgrade or a cluster upgrade), all nodes in a UD are taken down tooperform hello upgrade while nodes in other UDs remain available tooserve requests.</span></span> <span data-ttu-id="9c7ae-144">Hello обновления встроенного по, выполните на компьютерах, не учитывают доменам обновления, поэтому необходимо выполнить их машин одновременно.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-144">hello firmware upgrades you perform on your machines do not honor UDs, so you must do them one machine at a time.</span></span>

<span data-ttu-id="9c7ae-145">Hello простейший способ toothink об этих понятиях — tooconsider сбоя как hello единым целым незапланированного сбоя и доменам обновления как единица hello планового обслуживания.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-145">hello simplest way toothink about these concepts is tooconsider FDs as hello unit of unplanned failure and UDs as hello unit of planned maintenance.</span></span>

<span data-ttu-id="9c7ae-146">При указании доменам обновления в ClusterConfig.json можно выбрать имя каждого UD hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-146">When you specify UDs in ClusterConfig.json, you can choose hello name for each UD.</span></span> <span data-ttu-id="9c7ae-147">Например допустимыми являются следующие имена hello:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-147">For example, hello following names are valid:</span></span>

* <span data-ttu-id="9c7ae-148">"upgradeDomain": "UD0"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-148">"upgradeDomain": "UD0"</span></span>
* <span data-ttu-id="9c7ae-149">"upgradeDomain": "UD1A"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-149">"upgradeDomain": "UD1A"</span></span>
* <span data-ttu-id="9c7ae-150">"upgradeDomain": "DomainRed"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-150">"upgradeDomain": "DomainRed"</span></span>
* <span data-ttu-id="9c7ae-151">"upgradeDomain": "Blue"</span><span class="sxs-lookup"><span data-stu-id="9c7ae-151">"upgradeDomain": "Blue"</span></span>

<span data-ttu-id="9c7ae-152">Дополнительные сведения о доменах обновления и доменах сбоя см. в статье [Описание кластера Service Fabric](service-fabric-cluster-resource-manager-cluster-description.md).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-152">For more detailed information on upgrade domains and fault domains, see [Describing a Service Fabric cluster](service-fabric-cluster-resource-manager-cluster-description.md).</span></span>

### <a name="step-5-download-hello-service-fabric-standalone-package-for-windows-server"></a><span data-ttu-id="9c7ae-153">Шаг 5: Загрузите изолированный пакет Service Fabric hello для Windows Server</span><span class="sxs-lookup"><span data-stu-id="9c7ae-153">Step 5: Download hello Service Fabric standalone package for Windows Server</span></span>
<span data-ttu-id="9c7ae-154">[Загрузить связи - автономный пакет Service Fabric — Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) и распакуйте пакет hello, либо tooa развертывания, компьютер не является частью кластера hello или tooone hello машин, которые будут частью кластера.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-154">[Download Link - Service Fabric Standalone Package - Windows Server](http://go.microsoft.com/fwlink/?LinkId=730690) and unzip hello package, either tooa deployment machine that is not part of hello cluster, or tooone of hello machines that will be a part of your cluster.</span></span>

### <a name="step-6-modify-cluster-configuration"></a><span data-ttu-id="9c7ae-155">Шаг 6. Изменение конфигурации кластера</span><span class="sxs-lookup"><span data-stu-id="9c7ae-155">Step 6: Modify cluster configuration</span></span>
<span data-ttu-id="9c7ae-156">toocreate автономный кластера, имеют toocreate автономный кластера ClusterConfig.json файл конфигурации, который описывает спецификации hello hello кластера.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-156">toocreate a standalone cluster you have toocreate a standalone cluster configuration ClusterConfig.json file, which describes hello specification of hello cluster.</span></span> <span data-ttu-id="9c7ae-157">Можно создать файл конфигурации hello на шаблоны hello в hello приведенную ниже ссылку.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-157">You can base hello configuration file on hello templates found at hello below link.</span></span> <br><span data-ttu-id="9c7ae-158">
[Конфигурации изолированного кластера](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span><span class="sxs-lookup"><span data-stu-id="9c7ae-158">
[Standalone Cluster Configurations](https://github.com/Azure-Samples/service-fabric-dotnet-standalone-cluster-configuration/tree/master/Samples)</span></span>

<span data-ttu-id="9c7ae-159">Дополнительные сведения о разделах hello в этом файле см. в разделе [параметры конфигурации для кластера Windows автономный](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-159">For details on hello sections in this file, see [Configuration settings for standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span>

<span data-ttu-id="9c7ae-160">Откройте один из файлов ClusterConfig.json hello из загруженный пакет hello и изменения hello следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-160">Open one of hello ClusterConfig.json files from hello package you downloaded and modify hello following settings:</span></span>
| <span data-ttu-id="9c7ae-161">**Параметр конфигурации**</span><span class="sxs-lookup"><span data-stu-id="9c7ae-161">**Configuration Setting**</span></span> | <span data-ttu-id="9c7ae-162">**Описание**</span><span class="sxs-lookup"><span data-stu-id="9c7ae-162">**Description**</span></span> |
| --- | --- |
| <span data-ttu-id="9c7ae-163">**NodeTypes**</span><span class="sxs-lookup"><span data-stu-id="9c7ae-163">**NodeTypes**</span></span> |<span data-ttu-id="9c7ae-164">Типы узлов разрешить tooseparate узлы кластера в различных группах.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-164">Node types allow you tooseparate your cluster nodes into various groups.</span></span> <span data-ttu-id="9c7ae-165">У кластера должен быть по крайней мере один NodeType.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-165">A cluster must have at least one NodeType.</span></span> <span data-ttu-id="9c7ae-166">Все узлы в группе имеют следующие общие характеристики hello:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-166">All nodes in a group have hello following common characteristics:</span></span> <br> <span data-ttu-id="9c7ae-167">**Имя** -это имя типа узла hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-167">**Name** - This is hello node type name.</span></span> <br><span data-ttu-id="9c7ae-168">**Endpoint ports** — различные именованные конечные точки (порты), связанные с этим типом узла.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-168">**Endpoint Ports** - These are various named end points (ports) that are associated with this node type.</span></span> <span data-ttu-id="9c7ae-169">Можно использовать любой номер порта, который правильно, до тех пор, пока они не конфликтовали с других символов в данном манифесте и еще не используется другим приложением, работающих на Машины hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-169">You can use any port number that you wish, as long as they do not conflict with anything else in this manifest and are not already in use by any other application running on hello machine/VM.</span></span> <br> <span data-ttu-id="9c7ae-170">**Свойства размещения** -эти описания свойств для данного типа узла, который используется в качестве ограничений размещения для hello системных служб или служб.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-170">**Placement Properties** - These describe properties for this node type that you use as placement constraints for hello system services or your services.</span></span> <span data-ttu-id="9c7ae-171">Эти свойства представляют собой определяемые пользователем пары "ключ-значение", которые содержат дополнительные метаданные для заданного узла.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-171">These properties are user-defined key/value pairs that provide extra meta data for a given node.</span></span> <span data-ttu-id="9c7ae-172">Примеры свойств узла, будет ли узел hello имеется жесткий диск или видеокарте hello количество шпинделей в его жесткий диск, ядер и другие физические свойства.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-172">Examples of node properties would be whether hello node has a hard drive or graphics card, hello number of spindles in its hard drive, cores, and other physical properties.</span></span> <br> <span data-ttu-id="9c7ae-173">**Производственные мощности** -емкость узла определяется имя hello и объем определенного ресурса конкретный узел должен быть доступен для использования.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-173">**Capacities** - Node capacities define hello name and amount of a particular resource that a particular node has available for consumption.</span></span> <span data-ttu-id="9c7ae-174">Например, для узла может быть определена емкость для метрики MemoryInMb и выделено 2048 МБ памяти, доступной по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-174">For example, a node may define that it has capacity for a metric called “MemoryInMb” and that it has 2048 MB available by default.</span></span> <span data-ttu-id="9c7ae-175">Эти возможности используются на tooensure среды выполнения, службы, которым требуется определенный объем ресурсов находятся на узлах hello, эти ресурсы, доступные в hello потребовать суммы.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-175">These capacities are used at runtime tooensure that services that require particular amounts of resources are placed on hello nodes that have those resources available in hello required amounts.</span></span><br><span data-ttu-id="9c7ae-176">**IsPrimary** — при наличии более одного узла, определенного убедитесь, что только один tooprimary со значением hello *true*, являющееся где hello систему служб выполнения.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-176">**IsPrimary** - If you have more than one NodeType defined ensure that only one is set tooprimary with hello value *true*, which is where hello system services run.</span></span> <span data-ttu-id="9c7ae-177">Все остальные типы узлов должно быть установлено значение toohello *false*</span><span class="sxs-lookup"><span data-stu-id="9c7ae-177">All other node types should be set toohello value *false*</span></span> |
| <span data-ttu-id="9c7ae-178">**Nodes**</span><span class="sxs-lookup"><span data-stu-id="9c7ae-178">**Nodes**</span></span> |<span data-ttu-id="9c7ae-179">Это hello подробности для каждого из узлов hello, которые являются частью кластера hello (тип узла, имя узла, IP адрес, домен сбоя и домен обновления узла hello).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-179">These are hello details for each of hello nodes that are part of hello cluster (node type, node name, IP address, fault domain, and upgrade domain of hello node).</span></span> <span data-ttu-id="9c7ae-180">машины Hello требуется toobe кластера hello, созданные на необходимость toobe, перечислены ниже вместе с их IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-180">hello machines you want hello cluster toobe created on need toobe listed here with their IP addresses.</span></span> <br> <span data-ttu-id="9c7ae-181">При использовании hello же IP-адресов для всех узлов hello, а затем создать кластер одно поле, которое используется в целях тестирования.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-181">If you use hello same IP address for all hello nodes, then a one-box cluster is created, which you can use for testing purposes.</span></span> <span data-ttu-id="9c7ae-182">Не используйте универсальные кластеры для развертывания рабочих нагрузок в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-182">Do not use One-box clusters for deploying production workloads.</span></span> |

<span data-ttu-id="9c7ae-183">После конфигурации кластера hello имел все параметры, настроенные toohello среду, его можно проверены в кластерной среде hello (шаг 7).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-183">After hello cluster configuration has had all settings configured toohello environment, it can be tested against hello cluster environment (step 7).</span></span>

<a id="environmentsetup"></a>

### <a name="step-7-environment-setup"></a><span data-ttu-id="9c7ae-184">Шаг 7.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-184">Step 7.</span></span> <span data-ttu-id="9c7ae-185">Настройка среды</span><span class="sxs-lookup"><span data-stu-id="9c7ae-185">Environment setup</span></span>

<span data-ttu-id="9c7ae-186">Когда администратор кластера настраивает автономный кластера Service Fabric, среда hello нуждается — toobe настроены hello следующие условия:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-186">When a cluster administrator configures a Service Fabric standalone cluster, hello environment is needs toobe set up with hello following criteria:</span></span> <br>
1. <span data-ttu-id="9c7ae-187">Hello пользователь, создающий hello кластера должен иметь машины tooall привилегии безопасности на уровне администратора, перечисленных в файле конфигурации кластера hello как узлы.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-187">hello user creating hello cluster should have administrator-level security privileges tooall machines that are listed as nodes in hello cluster configuration file.</span></span>
2. <span data-ttu-id="9c7ae-188">Машины, из которых hello создания кластера, а также каждом компьютере узла кластера необходимо:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-188">Machine from which hello cluster is created, as well as each cluster node machine must:</span></span>
* <span data-ttu-id="9c7ae-189">Удалите пакет SDK для Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-189">Have Service Fabric SDK uninstalled</span></span>
* <span data-ttu-id="9c7ae-190">Удалите среду выполнения Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-190">Have Service Fabric runtime uninstalled</span></span> 
* <span data-ttu-id="9c7ae-191">Hello служба брандмауэра Windows (mpssvc) включена</span><span class="sxs-lookup"><span data-stu-id="9c7ae-191">Have hello Windows Firewall service (mpssvc) enabled</span></span>
* <span data-ttu-id="9c7ae-192">Включена ли служба удаленного реестра (remoteregistry) hello</span><span class="sxs-lookup"><span data-stu-id="9c7ae-192">Have hello Remote Registry Service (remoteregistry) enabled</span></span>
* <span data-ttu-id="9c7ae-193">Включите общий доступ к файлам (SMB).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-193">Have file sharing (SMB) enabled</span></span>
* <span data-ttu-id="9c7ae-194">Откройте необходимые порты в соответствии с конфигурацией портов кластера.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-194">Have necessary ports opened, based on cluster configuration ports</span></span>
* <span data-ttu-id="9c7ae-195">Откройте необходимые порты для Windows SMB и службы удаленного управления реестром: 135, 137, 138, 139 и 445.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-195">Have necessary ports opened for Windows SMB and Remote Registry service: 135, 137, 138, 139, and 445</span></span>
* <span data-ttu-id="9c7ae-196">У tooone сетевого подключения к другой</span><span class="sxs-lookup"><span data-stu-id="9c7ae-196">Have network connectivity tooone another</span></span>
3. <span data-ttu-id="9c7ae-197">Ни одна из машин узел кластера hello должен быть контроллером домена.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-197">None of hello cluster node machines should be a Domain Controller.</span></span>
4. <span data-ttu-id="9c7ae-198">Если развернуты toobe кластера hello безопасного кластера, проверьте hello необходимые безопасности, в предварительных требований, установите и правильно настроены для конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-198">If hello cluster toobe deployed is a secure cluster, validate hello necessary security prerequisites are in place, and are configured correctly against hello configuration.</span></span>
5. <span data-ttu-id="9c7ae-199">Hello машин кластера, не доступных из Интернета, следующий набор hello hello кластеров конфигурации:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-199">If hello cluster machines are not internet-accessible, set hello following in hello cluster configuration:</span></span>
* <span data-ttu-id="9c7ae-200">Отключите телеметрию: в разделе *properties* задайте параметр *"enableTelemetry": false*.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-200">Disable telemetry:   Under *properties* set   *"enableTelemetry": false*</span></span>
* <span data-ttu-id="9c7ae-201">Отключение автоматической загрузки версии структуры уведомления о прекращении поддержки приближается к этой версии hello текущего кластера: в разделе *свойства* задать *«fabricClusterAutoupgradeEnabled»: false*</span><span class="sxs-lookup"><span data-stu-id="9c7ae-201">Disable automatic Fabric version downloading & notifications that hello current cluster version is nearing end of support:   Under *properties* set   *"fabricClusterAutoupgradeEnabled": false*</span></span>
* <span data-ttu-id="9c7ae-202">Можно также доступ к сети Интернет — ограниченный toowhite перечислены домены, домены hello ниже, требуются ли для автоматического обновления: go.microsoft.com download.microsoft.com</span><span class="sxs-lookup"><span data-stu-id="9c7ae-202">Alternatively if network internet access is limited toowhite-listed domains, hello domains below are required for automatic upgrade:   go.microsoft.com   download.microsoft.com</span></span>

6. <span data-ttu-id="9c7ae-203">Установите соответствующие исключения при проверке антивирусной программой для Service Fabric:</span><span class="sxs-lookup"><span data-stu-id="9c7ae-203">Set appropriate Service Fabric antivirus exclusions:</span></span>

| <span data-ttu-id="9c7ae-204">**Исключаемые при проверке антивирусной программой каталоги**</span><span class="sxs-lookup"><span data-stu-id="9c7ae-204">**Antivirus Excluded directories**</span></span> |
| --- |
| <span data-ttu-id="9c7ae-205">Program Files\Microsoft Service Fabric</span><span class="sxs-lookup"><span data-stu-id="9c7ae-205">Program Files\Microsoft Service Fabric</span></span> |
| <span data-ttu-id="9c7ae-206">FabricDataRoot (из конфигурации кластера)</span><span class="sxs-lookup"><span data-stu-id="9c7ae-206">FabricDataRoot (from cluster configuration)</span></span> |
| <span data-ttu-id="9c7ae-207">FabricLogRoot (из конфигурации кластера)</span><span class="sxs-lookup"><span data-stu-id="9c7ae-207">FabricLogRoot (from cluster configuration)</span></span> |

| <span data-ttu-id="9c7ae-208">**Исключаемые при проверке антивирусной программой процессы**</span><span class="sxs-lookup"><span data-stu-id="9c7ae-208">**Antivirus Excluded processes**</span></span> |
| --- |
| <span data-ttu-id="9c7ae-209">Fabric.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-209">Fabric.exe</span></span> |
| <span data-ttu-id="9c7ae-210">FabricHost.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-210">FabricHost.exe</span></span> |
| <span data-ttu-id="9c7ae-211">FabricInstallerService.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-211">FabricInstallerService.exe</span></span> |
| <span data-ttu-id="9c7ae-212">FabricSetup.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-212">FabricSetup.exe</span></span> |
| <span data-ttu-id="9c7ae-213">FabricDeployer.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-213">FabricDeployer.exe</span></span> |
| <span data-ttu-id="9c7ae-214">ImageBuilder.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-214">ImageBuilder.exe</span></span> |
| <span data-ttu-id="9c7ae-215">FabricGateway.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-215">FabricGateway.exe</span></span> |
| <span data-ttu-id="9c7ae-216">FabricDCA.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-216">FabricDCA.exe</span></span> |
| <span data-ttu-id="9c7ae-217">FabricFAS.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-217">FabricFAS.exe</span></span> |
| <span data-ttu-id="9c7ae-218">FabricUOS.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-218">FabricUOS.exe</span></span> |
| <span data-ttu-id="9c7ae-219">FabricRM.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-219">FabricRM.exe</span></span> |
| <span data-ttu-id="9c7ae-220">FileStoreService.exe</span><span class="sxs-lookup"><span data-stu-id="9c7ae-220">FileStoreService.exe</span></span> |

### <a name="step-8-validate-environment-using-testconfiguration-script"></a><span data-ttu-id="9c7ae-221">Шаг 8.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-221">Step 8.</span></span> <span data-ttu-id="9c7ae-222">Проверка среды с помощью сценария TestConfiguration</span><span class="sxs-lookup"><span data-stu-id="9c7ae-222">Validate environment using TestConfiguration script</span></span>
<span data-ttu-id="9c7ae-223">Hello TestConfiguration.ps1 сценария можно найти в изолированный пакет hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-223">hello TestConfiguration.ps1 script can be found in hello standalone package.</span></span> <span data-ttu-id="9c7ae-224">Он используется как toovalidate анализатор соответствия рекомендациям некоторые выше условиям hello и должны использоваться как проверка работоспособности toovalidate ли кластер может быть развернут в данной среде.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-224">It is used as a Best Practices Analyzer toovalidate some of hello criteria above and should be used as a sanity check toovalidate whether a cluster can be deployed on a given environment.</span></span> <span data-ttu-id="9c7ae-225">В случае любого сбоя см. список toohello под [Настройка среды](service-fabric-cluster-standalone-deployment-preparation.md) для устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-225">If there is any failure, refer toohello list under [Environment Setup](service-fabric-cluster-standalone-deployment-preparation.md) for troubleshooting.</span></span> 

<span data-ttu-id="9c7ae-226">Этот сценарий может выполняться на любом компьютере с установленными машины hello tooall доступа администратора, перечисленных в файле конфигурации кластера hello как узлы.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-226">This script can be run on any machine that has administrator access tooall hello machines that are listed as nodes in hello cluster configuration file.</span></span> <span data-ttu-id="9c7ae-227">машина Hello, этот сценарий выполняется на имеет toobe частью кластера hello.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-227">hello machine that this script is run on does not have toobe part of hello cluster.</span></span>

```powershell
PS C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer> .\TestConfiguration.ps1 -ClusterConfigFilePath .\ClusterConfig.Unsecure.DevCluster.json
Trace folder already exists. Traces will be written tooexisting trace folder: C:\temp\Microsoft.Azure.ServiceFabric.WindowsServer\DeploymentTraces
Running Best Practices Analyzer...
Best Practices Analyzer completed successfully.


LocalAdminPrivilege        : True
IsJsonValid                : True
IsCabValid                 : True
RequiredPortsOpen          : True
RemoteRegistryAvailable    : True
FirewallAvailable          : True
RpcCheckPassed             : True
NoConflictingInstallations : True
FabricInstallable          : True
Passed                     : True
```

<span data-ttu-id="9c7ae-228">В настоящее время этот модуль тестирования конфигурации не проверяет hello конфигурация безопасности, поэтому это должен сделать независимо друг от друга toobe.</span><span class="sxs-lookup"><span data-stu-id="9c7ae-228">Currently this configuration testing module does not validate hello security configuration so this has toobe done independently.</span></span>  

> [!NOTE]
> <span data-ttu-id="9c7ae-229">Постоянно создадим усовершенствования toomake этот модуль более надежным, поэтому если неисправен или отсутствует case, который вы считаете не в настоящее время перехвачено TestConfiguration, сообщите нам через наших [поддерживает каналы](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span><span class="sxs-lookup"><span data-stu-id="9c7ae-229">We are continually making improvements toomake this module more robust, so if there is a faulty or missing case which you believe isn't currently caught by TestConfiguration, please let us know through our [support channels](https://docs.microsoft.com/en-us/azure/service-fabric/service-fabric-support).</span></span>   
> 
> 

## <a name="next-steps"></a><span data-ttu-id="9c7ae-230">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="9c7ae-230">Next steps</span></span>
* [<span data-ttu-id="9c7ae-231">Создание изолированного кластера под управлением Windows Server</span><span class="sxs-lookup"><span data-stu-id="9c7ae-231">Create a standalone cluster running on Windows Server</span></span>](service-fabric-cluster-creation-for-windows-server.md)
