---
title: "aaaAzure мониторинг структуры службы и общие сведения о диагностике | Документы Microsoft"
description: "Сведения о функциях мониторинга и диагностики для кластеров, приложений и служб Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 07/17/2017
ms.author: dekapur
ms.openlocfilehash: 1ef6419863b056b76d81e915ab78df4facae88bb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-and-diagnostics-for-azure-service-fabric"></a>Мониторинг и диагностика для Azure Service Fabric

Наблюдения и диагностики, критические toodeveloping, тестирования и развертывания приложений и служб в любой среде. Оптимальная работа решений Service Fabric зависит от эффективного планирования и реализации мониторинга и диагностики, которые помогают обеспечить правильную работу приложений и служб в локальной среде разработки или в производственной среде.

Здравствуйте, основных целей наблюдения и диагностики, чтобы:
* обнаружение и диагностика проблем с оборудованием и инфраструктурой;
* выявление проблем с программным обеспечением и приложениями, а также сокращение времени простоя служб;
* анализ потребления ресурсов и помощь в принятии решений, связанных с выполнением операций;
* оптимизация производительности приложений, служб и инфраструктуры;
* создание бизнес-аналитики и определение областей для оптимизации.


Здравствуйте общего процесса наблюдения и диагностики состоит из трех этапов:

1. **Генерирование событий**: Это включает в себя события (журналов, трассировок, пользовательские события) в инфраструктуре hello (кластер), платформы и уровень приложений / служба
2. **Статистическая обработка событий**: созданные события должны toobe собираются и статистически обрабатываются, прежде чем они могут быть показаны
3. **Анализ**: события должны toobe Визуализированный и доступен в некоторых формате, tooallow для анализа и отображения при необходимости

Несколько продуктов, которые доступны, которые охватывают следующие три области, и имеется свободное toochoose различных технологий для каждого. Это важные toomake убедиться, что, hello различные части рабочего вместе toodeliver решения сквозного мониторинга для кластера.

## <a name="event-generation"></a>Создание событий

Первым шагом Hello в рабочем процессе наблюдение и диагностику hello является создание hello и создание событий и журналов. Эти события, журналы и трассировки создаются на двух уровнях: hello уровень платформы (включая hello кластера, машины hello или действиям Service Fabric) или уровень приложения hello (любого инструментария добавляется tooapps и службы развернуты toohello кластера). События на каждом из этих уровней можно настраивать, хотя Service Fabric предоставляет некоторое инструментирование по умолчанию.

Дополнительные сведения о [событий на уровне платформы](service-fabric-diagnostics-event-generation-infra.md) и [события уровня приложения](service-fabric-diagnostics-event-generation-app.md) toounderstand предоставляемыми и как tooadd Далее инструментирования.

После принятия на ведение журнала поставщика хотелось бы toouse hello, необходимо убедиться, что они журналов toomake накапливаются и правильно сохранены.

## <a name="event-aggregation"></a>Агрегация событий

Для сбора журналов hello и событий, формируемых приложений и кластера, обычно рекомендуется использовать [диагностики Azure](service-fabric-diagnostics-event-aggregation-wad.md) (больше похож на основе tooagent сбора журналов) или [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md)(в процессе сбора журналов).

Сбор журналов приложений с помощью модуля диагностики Azure будет хорошим вариантом для служб Service Fabric, если hello набор источников журнала и назначения не часто изменяются и простой сопоставление между hello источников и их назначения. Причина Hello для этого является настройка диагностики Azure происходит на уровне диспетчера ресурсов hello, поэтому для внесения значительных изменений toohello конфигурации требуется обновление или повторное развертывание кластера hello. Кроме того, рекомендуется обеспечить хранение журналов в более постоянном расположении, к которому можно получить доступ из различных платформ аналитики. Таким образом, в конечном итоге этот вариант менее эффективен, чем использование EventFlow.

С помощью [EventFlow](https://github.com/Azure/diagnostics-eventflow) позволяет toohave службы отправки свои журналы непосредственно tooan анализа и визуализации платформы и/или toostorage. Другие библиотеки (ILogger, Serilog, т. д.) может использоваться для hello же цели, но EventFlow имеет преимущество hello была разработана специально для внутрипроцессного журнала сбора и toosupport служб Service Fabric. Это, как правило, toohave несколько потенциальных преимуществ:

* Простая настройка и развертывание
    * Конфигурация Hello сбора диагностических данных — просто частью конфигурации службы hello. Это легко tooalways оставить его «синхронизировано» с hello остальной части приложения hello
    * Настройка каждого приложения или службы также не представляет сложности.
    * Настройка назначения данных через EventFlow является лишь hello соответствующий пакет NuGet добавлению и изменению hello *eventFlowConfig.json* файла
* Гибкость
    * Hello приложение может отправлять данные hello везде, где он должен toogo, при условии, что имеется клиентская библиотека, которая поддерживает hello целевые системы хранения данных. При необходимости можно добавлять новые расположения.
    * Можно реализовать сложные правила сбора, фильтрации и статистической обработки данных.
* Доступ к данным приложения toointernal и контекстом
    * Hello диагностики подсистемы, выполняющиеся внутри процесса hello приложения или службы можно легко дополнить hello трассировок с помощью контекстных сведений

Один toonote вещь заключается в этих двух параметров не являются взаимоисключающими, а при возможных tooget аналогичные дело с помощью одного или других hello, оно может также смысла для вас tooset вверх и. В большинстве случаев объединения с коллекции в работе агента может привести tooa более надежным, рабочий процесс мониторинга. Hello расширения системы диагностики Azure (агент) может быть путь к выбранной для журналов уровня платформы при использовании EventFlow (в процессе сбора) для уровня журналы приложения. Как только вы разобрались наиболее подходящим для вас, это время toothink о способе вашей toobe данные отображения и анализа.

## <a name="event-analysis"></a>Анализ событий

Существует несколько отличный платформы, существующие в hello рынка, когда речь заходит toohello анализа и визуализации данных наблюдения и диагностики. Hello два, мы рекомендуем являются [OMS](service-fabric-diagnostics-event-analysis-oms.md) и [Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md) из-за tootheir лучше интегрирован с Service Fabric, но также должен выглядеть hello [эластичной стека](https://www.elastic.co/products) (особенно если вы собираетесь работу кластера в автономной среде), [Splunk](https://www.splunk.com/), или любую другую платформу предпочтения.

Hello ключевые моменты для любой платформы, выбрать должен включать все возможности как будут hello пользовательский интерфейс и запросы параметров, hello возможность toovisualize данных и создать легко читаемыми панели мониторинга и hello дополнительные средства предоставляют tooenhance вашей мониторинг, такие как автоматические предупреждений.

В дополнение к этому toohello платформы, при настройке кластера Service Fabric как ресурс Azure, можно также получить доступ tooAzure наблюдения за out of box для машин, которые можно использовать для связанных с производительностью и метрики мониторинга.

### <a name="azure-monitor"></a>Azure Monitor

Можно использовать [монитора Azure](../monitoring-and-diagnostics/monitoring-overview.md) toomonitor многие hello ресурсы Azure, на которых строится кластера Service Fabric. Набор показателей для hello [масштабный набор виртуальных машин](../monitoring-and-diagnostics/monitoring-supported-metrics.md#microsoftcomputevirtualmachinescalesets) и отдельных [виртуальные машины](../monitoring-and-diagnostics/monitoring-supported-metrics.md#microsoftcomputevirtualmachinescalesetsvirtualmachines) автоматически собираются и отображаются в hello портал Azure. tooview hello собранные сведения в hello портал Azure, выберите hello группы ресурсов, содержащий кластера Service Fabric hello. После этого набора масштабирования виртуальных машин select hello, которые должны tooview. В hello **мониторинг** выберите **метрики** tooview график hello значения.

![Представление собранных данных метрик на портале Azure](media/service-fabric-diagnostics-overview/azure-monitoring-metrics.png)

диаграммы toocustomize hello, следуйте инструкциям hello [метрики в Microsoft Azure](../monitoring-and-diagnostics/insights-how-to-customize-monitoring.md). Кроме того, на основе этих метрик можно создавать оповещения, как описано в статье [Создание оповещений в Azure Monitor для служб Azure с помощью портала Azure](../monitoring-and-diagnostics/insights-alerts-portal.md). Оповещения можно отправить tooa службы уведомлений с помощью веб-ловушки, как описано в [Настройка веб-обработчик в Azure метрики предупреждение](../monitoring-and-diagnostics/insights-webhooks-alerts.md). Azure Monitor поддерживает только одну подписку. Если вам требуется toomonitor несколько подписок или если необходимы дополнительные функции [анализа журналов](https://azure.microsoft.com/documentation/services/log-analytics/), часть из Microsoft Operations Management Suite обеспечивает целостное решение по управлению ИТ для локальных и облачных инфраструктура. Можно направить данные с помощью монитора Azure непосредственно tooLog Analytics, чтобы можно было видеть метрики и журналов для всей среды в одном месте.

## <a name="next-steps"></a>Дальнейшие действия

### <a name="watchdogs"></a>Модули наблюдения

Контрольный является отдельной службе, можно посмотреть работоспособности и загрузка различных служб и отчет о работоспособности для любого элемента в иерархии модели работоспособности hello. Это поможет предотвратить ошибки, которые не будут обнаружены на основе представления hello одной службы. Watchdogs также являются хорошая toohost код, который выполняет корректирующие действия без взаимодействия с пользователем (например, очистки файлов журнала в хранилище через определенные промежутки времени). Пример реализации службы наблюдения см. [здесь](https://github.com/Azure-Samples/service-fabric-watchdog-service).

Приступая к работе с понимания того, как события и журналы создаваться в hello [уровне платформы](service-fabric-diagnostics-event-generation-infra.md) и hello [уровне приложения](service-fabric-diagnostics-event-generation-app.md).
