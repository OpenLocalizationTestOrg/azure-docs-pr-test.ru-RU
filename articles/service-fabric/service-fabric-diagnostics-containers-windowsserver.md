---
title: "aaaAzure Service Fabric контейнеры наблюдение и диагностику | Документы Microsoft"
description: "Узнайте, как toomonitor и диагностики контейнеры, осуществлять управление ими в Microsoft Azure Service Fabric с контейнерами решения в OMS."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 05/10/2017
ms.author: dekapur
ms.openlocfilehash: cd79111cf78b9d76a60d489bb9953587aa06186d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="monitoring-windows-server-containers-with-oms"></a><span data-ttu-id="20738-103">Отслеживание контейнеров Windows Server с помощью OMS</span><span class="sxs-lookup"><span data-stu-id="20738-103">Monitoring Windows Server containers with OMS</span></span>

## <a name="oms-containers-solution"></a><span data-ttu-id="20738-104">Решение OMS "Контейнеры"</span><span class="sxs-lookup"><span data-stu-id="20738-104">OMS Containers Solution</span></span>

<span data-ttu-id="20738-105">команды Operations Management Suite (OMS) Hello опубликовала решения контейнеры для диагностики и мониторинга для контейнеров.</span><span class="sxs-lookup"><span data-stu-id="20738-105">hello Operations Management Suite (OMS) team has published a Containers solution for diagnostics and monitoring for containers.</span></span> <span data-ttu-id="20738-106">Вместе с их решения Service Fabric это решение является развертывания контейнера toomonitor мощный инструмент, управляемых в структуре службы.</span><span class="sxs-lookup"><span data-stu-id="20738-106">Alongside their Service Fabric solution, this solution is a great tool toomonitor container deployments orchestrated on Service Fabric.</span></span> <span data-ttu-id="20738-107">Ниже приведен простой пример hello панель мониторинга в решении hello выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="20738-107">Here's a simple example of what hello dashboard in hello solution looks like:</span></span>

![Основная панель мониторинга OMS](./media/service-fabric-diagnostics-containers-windowsserver/oms-containers-dashboard.png)

<span data-ttu-id="20738-109">Он также собирает различные журналы, которые могут быть запрошены в средстве анализа журналов OMS hello, и можно использовать toovisualize все метрики или событий.</span><span class="sxs-lookup"><span data-stu-id="20738-109">It also collects different kinds of logs that can be queried in hello OMS Log Analytics tool, and can be used toovisualize any metrics or events being generated.</span></span> <span data-ttu-id="20738-110">Ниже приведены типы Hello журнала собираются.</span><span class="sxs-lookup"><span data-stu-id="20738-110">hello log types that are collected are:</span></span>

1. <span data-ttu-id="20738-111">ContainerInventory — отображает информацию о местонахождении контейнера, имени и образах.</span><span class="sxs-lookup"><span data-stu-id="20738-111">ContainerInventory: shows information about container location, name, and images</span></span>
2. <span data-ttu-id="20738-112">ContainerImageInventory — информация о развернутых образах, в том числе их идентификаторы или размеры.</span><span class="sxs-lookup"><span data-stu-id="20738-112">ContainerImageInventory: information about deployed images, including IDs or sizes</span></span>
3. <span data-ttu-id="20738-113">ContainerLog — журналы конкретных ошибок, журналы Docker (StdOut и т. д.) и другие записи.</span><span class="sxs-lookup"><span data-stu-id="20738-113">ContainerLog: specific error logs, docker logs (stdout, etc.), and other entries</span></span>
4. <span data-ttu-id="20738-114">ContainerServiceLog — выполнявшиеся команды управляющей программы Docker.</span><span class="sxs-lookup"><span data-stu-id="20738-114">ContainerServiceLog: docker daemon commands that have been run</span></span>
5. <span data-ttu-id="20738-115">Производительность: счетчики производительности, включая контейнера ЦП, памяти, то сетевой трафик дискового ввода-вывода и настраиваемых метрик из hello размещения машин</span><span class="sxs-lookup"><span data-stu-id="20738-115">Perf: performance counters including container cpu, memory, network traffic, disk i/o, and custom metrics from hello host machines</span></span>

<span data-ttu-id="20738-116">В этой статье рассматриваются hello tooset необходимые шаги вверх контейнера мониторинга для кластера.</span><span class="sxs-lookup"><span data-stu-id="20738-116">This article covers hello steps required tooset up container monitoring for your cluster.</span></span> <span data-ttu-id="20738-117">Дополнительные сведения о решение OMS контейнеры, toolearn извлечь их [документации](../log-analytics/log-analytics-containers.md).</span><span class="sxs-lookup"><span data-stu-id="20738-117">toolearn more about OMS's Containers solution, check out their [documentation](../log-analytics/log-analytics-containers.md).</span></span>

## <a name="1-set-up-a-service-fabric-cluster"></a><span data-ttu-id="20738-118">1. Настройка кластера Service Fabric</span><span class="sxs-lookup"><span data-stu-id="20738-118">1. Set up a Service Fabric cluster</span></span>

<span data-ttu-id="20738-119">Создание кластера с помощью шаблона Azure Resource Manager hello найден [здесь](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span><span class="sxs-lookup"><span data-stu-id="20738-119">Create a cluster using hello Azure Resource Manager template found [here](https://github.com/dkkapur/Service-Fabric/tree/master/ARM%20Templates/SF%20OMS%20Sample).</span></span> <span data-ttu-id="20738-120">Убедитесь, что tooadd уникальное имя рабочей области OMS.</span><span class="sxs-lookup"><span data-stu-id="20738-120">Make sure tooadd a unique OMS workspace name.</span></span> <span data-ttu-id="20738-121">Этот шаблон также по умолчанию toodeploying Service Fabric (v255.255), что означает, что он не может использоваться в производственной среде и не может быть обновлен другая версия Service Fabric tooa создания кластера в режиме предварительного просмотра hello.</span><span class="sxs-lookup"><span data-stu-id="20738-121">This template also defaults toodeploying a cluster in hello preview build of Service Fabric (v255.255), which means that it cannot be used in production, and cannot be upgraded tooa different Service Fabric version.</span></span> <span data-ttu-id="20738-122">Если вы решите toouse этого шаблона для долгосрочного или производственного использования, измените номер стабильная версия tooa версии hello.</span><span class="sxs-lookup"><span data-stu-id="20738-122">If you decide toouse this template for long-term or production use, change hello version tooa stable version number.</span></span>

<span data-ttu-id="20738-123">После настройки кластера hello убедитесь, что установлен соответствующий сертификат hello и проверьте правильность может tooconnect toohello кластера.</span><span class="sxs-lookup"><span data-stu-id="20738-123">Once hello cluster is set up, confirm that you have installed hello appropriate certificate, and make sure you are able tooconnect toohello cluster.</span></span>

<span data-ttu-id="20738-124">Убедитесь, что группы ресурсов настроен правильно, заголовок toohello [портал Azure](https://portal.azure.com/) и поиск hello развертывания.</span><span class="sxs-lookup"><span data-stu-id="20738-124">Confirm that your Resource Group is set up correctly by heading toohello [Azure portal](https://portal.azure.com/) and finding hello deployment.</span></span> <span data-ttu-id="20738-125">Группа ресурсов Hello должен содержать все ресурсы Service Fabric hello и также имеют решении аналитики журналов, а также решения Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="20738-125">hello resource group should contain all hello Service Fabric resources, and also have a Log Analytics solution as well as a Service Fabric solution.</span></span>

<span data-ttu-id="20738-126">Вот как изменить существующий кластер Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="20738-126">For modifying an existing Service Fabric cluster:</span></span>
* <span data-ttu-id="20738-127">Убедитесь, что включена Диагностика (если это не так, включите его через [обновление набора масштабирования виртуальных машин hello](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span><span class="sxs-lookup"><span data-stu-id="20738-127">Confirm that Diagnostics is enabled (if not, enable it via [updating hello virtual machine scale set](/rest/api/virtualmachinescalesets/create-or-update-a-set))</span></span>
* <span data-ttu-id="20738-128">Добавление рабочей области OMS, создав решение «Аналитика структуры службы» через hello Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="20738-128">Add an OMS Workspace by creating a "Service Fabric Analytics" solution via hello Azure Marketplace</span></span>
* <span data-ttu-id="20738-129">Редактировать источники данных hello hello Service Fabric решения toopick данные из hello соответствующие таблицы хранилища Azure (Настройка по WAD) в hello группы ресурсов, hello кластера находится в</span><span class="sxs-lookup"><span data-stu-id="20738-129">Edit hello data sources of hello Service Fabric solution toopick up data from hello appropriate Azure Storage tables (set up by WAD) in hello Resource Group that hello cluster is in</span></span>
* <span data-ttu-id="20738-130">Добавление агента hello как [набора масштабирования виртуальных машин toohello расширения](/powershell/module/azurerm.compute/add-azurermvmssextension) через PowerShell или обновление набора масштабирования виртуальных машин hello (же ссылку, как описано выше, шаблона диспетчера ресурсов hello toomodify)</span><span class="sxs-lookup"><span data-stu-id="20738-130">Add hello agent as an [extension toohello virtual machine scale set](/powershell/module/azurerm.compute/add-azurermvmssextension) via PowerShell or through updating hello virtual machine scale set (same link as above, toomodify hello Resource Manager template)</span></span>

## <a name="2-deploy-a-container"></a><span data-ttu-id="20738-131">2. Развертывание контейнера</span><span class="sxs-lookup"><span data-stu-id="20738-131">2. Deploy a container</span></span>

<span data-ttu-id="20738-132">После готов кластера hello и подтверждения того, доступ к нему, разверните tooit контейнера.</span><span class="sxs-lookup"><span data-stu-id="20738-132">Once hello cluster is ready and you have confirmed that you can access it, deploy a container tooit.</span></span> <span data-ttu-id="20738-133">Если выбрана toouse hello предварительной версии как набор шаблоном hello, можно также изучить новые docker Service Fabric реализуют функциональность.</span><span class="sxs-lookup"><span data-stu-id="20738-133">If you chose toouse hello preview version as set by hello template, you can also explore Service Fabric's new docker compose functionality.</span></span> <span data-ttu-id="20738-134">Содержат помните, что hello первый раз образ контейнера развернутой tooa кластера, занимает несколько минут toodownload hello изображения в зависимости от его размера.</span><span class="sxs-lookup"><span data-stu-id="20738-134">Bear in mind that hello first time a container image is deployed tooa cluster, it takes several minutes toodownload hello image depending on its size.</span></span>

## <a name="3-add-hello-containers-solution"></a><span data-ttu-id="20738-135">3. Добавить решение контейнеры hello</span><span class="sxs-lookup"><span data-stu-id="20738-135">3. Add hello Containers solution</span></span>

<span data-ttu-id="20738-136">В hello портал Azure, создайте ресурс контейнеров (под hello мониторинг + управления категории) через Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="20738-136">In hello Azure portal, create a Containers resource (under hello Monitoring + Management category) through Azure Marketplace.</span></span> 

![Добавление решения "Контейнеры"](./media/service-fabric-diagnostics-containers-windowsserver/containers-solution.png)

<span data-ttu-id="20738-138">На этапе создания hello запросов рабочей области OMS.</span><span class="sxs-lookup"><span data-stu-id="20738-138">In hello creation step, it requests an OMS workspace.</span></span> <span data-ttu-id="20738-139">Выберите hello, созданный с помощью развертывания hello выше.</span><span class="sxs-lookup"><span data-stu-id="20738-139">Select hello one that was created with hello deployment above.</span></span> <span data-ttu-id="20738-140">Этот шаг добавляет контейнеры решения в рабочей области OMS и обнаруживается автоматически агентом OMS hello, предоставляемым hello шаблона.</span><span class="sxs-lookup"><span data-stu-id="20738-140">This step adds a Containers solution within your OMS workspace, and is automatically detected by hello OMS agent deployed by hello template.</span></span> <span data-ttu-id="20738-141">Hello агент начнет сбор данных на процессы контейнеры hello в кластере hello и около 10 – 15 минут, вы увидите, решение hello подсветка с данными, как изображения hello hello мониторинга выше.</span><span class="sxs-lookup"><span data-stu-id="20738-141">hello agent will start gathering data on hello containers processes in hello cluster, and in about 10-15 minutes, you should see hello solution light up with data as in hello image of hello dashboard above.</span></span>

## <a name="4-next-steps"></a><span data-ttu-id="20738-142">4. Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="20738-142">4. Next steps</span></span>

<span data-ttu-id="20738-143">OMS обеспечивает различные инструменты в рабочей области toomake hello Если более полезной для вас.</span><span class="sxs-lookup"><span data-stu-id="20738-143">OMS offers various tools in hello workspace toomake if more useful for you.</span></span> <span data-ttu-id="20738-144">Изучение hello следующие параметры toocustomize hello решения tooyour потребностей.</span><span class="sxs-lookup"><span data-stu-id="20738-144">Explore hello following options toocustomize hello solution tooyour needs:</span></span>
- <span data-ttu-id="20738-145">Получить для начала ознакомьтесь с hello [входа поиска и выполнения запросов](../log-analytics/log-analytics-log-searches.md) компоненты входят в состав службы анализа журналов</span><span class="sxs-lookup"><span data-stu-id="20738-145">Get familiarized with hello [log search and querying](../log-analytics/log-analytics-log-searches.md) features offered as part of Log Analytics</span></span>
- <span data-ttu-id="20738-146">Настройка toopick агента OMS hello копирование определенными счетчиками производительности (go toohello рабочей области домашней > Параметры > данных > счетчиков производительности Windows)</span><span class="sxs-lookup"><span data-stu-id="20738-146">Configure hello OMS agent toopick up specific performance counters (go toohello workspace Home > Settings > Data > Windows Performance Counters)</span></span>
- <span data-ttu-id="20738-147">Настроить OMS tooset [автоматических предупреждения](../log-analytics/log-analytics-alerts.md) tooaid правила в обнаружение и диагностика</span><span class="sxs-lookup"><span data-stu-id="20738-147">Configure OMS tooset up [automated alerting](../log-analytics/log-analytics-alerts.md) rules tooaid in detecting and diagnostics</span></span>
