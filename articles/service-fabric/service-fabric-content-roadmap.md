---
title: "Описание Azure Service Fabric | Документация Майкрософт"
description: "Основные понятия и аспекты Azure Service Fabric. Эта статья предоставляет расширенные сведения о Service Fabric и создании микрослужб."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/14/2017
ms.author: ryanwi
ms.openlocfilehash: 4a5ccfa671e6780a3d4305d4e3238c55de8e577c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="so-you-want-to-learn-about-service-fabric"></a><span data-ttu-id="1a6da-104">Что бы вы хотели узнать о Service Fabric?</span><span class="sxs-lookup"><span data-stu-id="1a6da-104">So you want to learn about Service Fabric?</span></span>
<span data-ttu-id="1a6da-105">Azure Service Fabric — это платформа распределенных систем, которая дает возможность не только легко упаковывать и развертывать масштабируемые и надежные микрослужбы, но и управлять ими.</span><span class="sxs-lookup"><span data-stu-id="1a6da-105">Azure Service Fabric is a distributed systems platform that makes it easy to package, deploy, and manage scalable and reliable microservices.</span></span>  <span data-ttu-id="1a6da-106">Service Fabric имеет большую контактную зону и вы можете многому научиться.</span><span class="sxs-lookup"><span data-stu-id="1a6da-106">Service Fabric has a large surface area, however, and there's a lot to learn.</span></span>  <span data-ttu-id="1a6da-107">Здесь представлен краткий обзор Service Fabric и описаны основные понятия, модели программирования, жизненный цикл приложения, тестирование, кластеры и мониторинг работоспособности.</span><span class="sxs-lookup"><span data-stu-id="1a6da-107">This article provides a synopsis of Service Fabric and describes the core concepts, programming models, application lifecycle, testing, clusters, and health monitoring.</span></span> <span data-ttu-id="1a6da-108">Обзор и сведения о том, как создавать микрослужбы с помощью Service Fabric, см. в статьях [Общие сведения о Service Fabric](service-fabric-overview.md) и [Разработка приложений с использованием микрослужб](service-fabric-overview-microservices.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-108">Read the [Overview](service-fabric-overview.md) and [What are microservices?](service-fabric-overview-microservices.md) for an introduction and how Service Fabric can be used to create microservices.</span></span> <span data-ttu-id="1a6da-109">Эта статья не содержит полный список связанной документации, но предоставляет ссылки на руководства по началу работы для каждой области Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-109">This article does not contain a comprehensive content list, but does link to overview and getting started articles for every area of Service Fabric.</span></span> 

## <a name="core-concepts"></a><span data-ttu-id="1a6da-110">Ключевые понятия</span><span class="sxs-lookup"><span data-stu-id="1a6da-110">Core concepts</span></span>
<span data-ttu-id="1a6da-111">Разделы [Терминология Service Fabric](service-fabric-technical-overview.md), [Модель приложения](service-fabric-application-model.md) и [Поддерживаемые модели программирования](service-fabric-choose-framework.md) содержат дополнительные понятия и их описание, но основы приведены в этой статье.</span><span class="sxs-lookup"><span data-stu-id="1a6da-111">[Service Fabric terminology](service-fabric-technical-overview.md), [Application model](service-fabric-application-model.md), and [Supported programming models](service-fabric-choose-framework.md) provide more concepts and descriptions, but here are the basics.</span></span>

<table><tr><th><span data-ttu-id="1a6da-112">Ключевые понятия</span><span class="sxs-lookup"><span data-stu-id="1a6da-112">Core concepts</span></span></th><th><span data-ttu-id="1a6da-113">Время разработки</span><span class="sxs-lookup"><span data-stu-id="1a6da-113">Design time</span></span></th><th><span data-ttu-id="1a6da-114">Во время выполнения</span><span class="sxs-lookup"><span data-stu-id="1a6da-114">Run time</span></span></th></tr>
<tr><td><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965">
<img src="./media/service-fabric-content-roadmap/CoreConceptsVid.png" WIDTH="240" HEIGHT="162"></a></td>
<td><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tlkI046yC_2906218965"><img src="./media/service-fabric-content-roadmap/RunTimeVid.png" WIDTH="240" HEIGHT="162"></a></td>
<td><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=x7CVH56yC_1406218965">
<img src="./media/service-fabric-content-roadmap/RunTimeVid.png" WIDTH="240" HEIGHT="162"></a></td></tr>
</table>

### <a name="design-time-application-type-service-type-application-package-and-manifest-service-package-and-manifest"></a><span data-ttu-id="1a6da-115">Время разработки: тип приложения, тип службы, пакет приложения и манифест, пакет службы и манифест</span><span class="sxs-lookup"><span data-stu-id="1a6da-115">Design time: application type, service type, application package and manifest, service package and manifest</span></span>
<span data-ttu-id="1a6da-116">Тип приложения — имя и версия, назначенные коллекции типов служб.</span><span class="sxs-lookup"><span data-stu-id="1a6da-116">An application type is the name/version assigned to a collection of service types.</span></span> <span data-ttu-id="1a6da-117">Это определяется в файле *ApplicationManifest.xml*, внедренном в каталог пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-117">This is defined in an *ApplicationManifest.xml* file, which is embedded in an application package directory.</span></span> <span data-ttu-id="1a6da-118">Затем пакет приложения копируется в хранилище образов кластера Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-118">The application package is then copied to the Service Fabric cluster's image store.</span></span> <span data-ttu-id="1a6da-119">Вы сможете создать именованное приложение этого типа для запуска в кластере.</span><span class="sxs-lookup"><span data-stu-id="1a6da-119">You can then create a named application from this application type, which then runs within the cluster.</span></span> 

<span data-ttu-id="1a6da-120">Тип службы — имя и версия, назначенные пакетам кода, пакетам данных и пакетам конфигурации службы.</span><span class="sxs-lookup"><span data-stu-id="1a6da-120">A service type is the name/version assigned to a service's code packages, data packages, and configuration packages.</span></span> <span data-ttu-id="1a6da-121">Это определяется в файле ServiceManifest.xml, внедренном в каталог пакета службы.</span><span class="sxs-lookup"><span data-stu-id="1a6da-121">This is defined in a ServiceManifest.xml file, which is embedded in a service package directory.</span></span> <span data-ttu-id="1a6da-122">Затем на каталог пакета службы ссылается файл *ApplicationManifest.xml* пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-122">The service package directory is then referenced by an application package's *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="1a6da-123">Создав именованное приложение, вы можете создать в кластере именованную службу, используя для этого один из типов служб соответствующего типа приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-123">Within the cluster, after creating a named application, you can create a named service from one of the application type's service types.</span></span> <span data-ttu-id="1a6da-124">Тип службы описывается в файле *ServiceManifest.xml*.</span><span class="sxs-lookup"><span data-stu-id="1a6da-124">A service type is described by its *ServiceManifest.xml* file.</span></span> <span data-ttu-id="1a6da-125">Он состоит из параметров конфигурации службы исполняемого кода, которые загружаются во время выполнения, и статических данных, которые используются этой службой.</span><span class="sxs-lookup"><span data-stu-id="1a6da-125">The service type is composed of executable code service configuration settings, which are loaded at run time, and static data that is consumed by the service.</span></span>

![Типы служб и типы приложений Service Fabric][cluster-imagestore-apptypes]

<span data-ttu-id="1a6da-127">Пакет приложения — это каталог на диске, содержащий файл *ApplicationManifest.xml* типа приложения, который ссылается на пакеты службы для каждого типа службы, входящего в тип приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-127">The application package is a disk directory containing the application type's *ApplicationManifest.xml* file, which references the service packages for each service type that makes up the application type.</span></span> <span data-ttu-id="1a6da-128">Например, пакет почтового приложения может содержать ссылки на пакет службы очередей, пакет службы внешнего интерфейса и пакет службы базы данных.</span><span class="sxs-lookup"><span data-stu-id="1a6da-128">For example, an application package for an email application type could contain references to a queue service package, a frontend service package, and a database service package.</span></span> <span data-ttu-id="1a6da-129">Файлы в каталоге пакета приложения копируются в хранилище образов кластера Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-129">The files in the application package directory are copied to the Service Fabric cluster's image store.</span></span> 

<span data-ttu-id="1a6da-130">Пакет службы — каталог на диске, содержащий файл *ServiceManifest.xml* типа службы, который ссылается на код, статические данные и пакеты конфигурации для типа службы.</span><span class="sxs-lookup"><span data-stu-id="1a6da-130">A service package is a disk directory containing the service type's *ServiceManifest.xml* file, which references the code, static data, and configuration packages for the service type.</span></span> <span data-ttu-id="1a6da-131">На файлы в каталоге пакета службы ссылается файл *ApplicationManifest.xml* для соответствующего типа приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-131">The files in the service package directory are referenced by the application type's *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="1a6da-132">Например, в пакете службы могут быть указаны ссылки на пакеты кода, статических данных и конфигураций, определяющие службу баз данных.</span><span class="sxs-lookup"><span data-stu-id="1a6da-132">For example, a service package could refer to the code, static data, and configuration packages that make up a database service.</span></span>

### <a name="run-time-clusters-and-nodes-named-applications-named-services-partitions-and-replicas"></a><span data-ttu-id="1a6da-133">Время выполнения: кластеры и узлы, именованные приложения, именованные службы, секции и реплики</span><span class="sxs-lookup"><span data-stu-id="1a6da-133">Run time: clusters and nodes, named applications, named services, partitions, and replicas</span></span>
<span data-ttu-id="1a6da-134">[Кластер Service Fabric](service-fabric-deploy-anywhere.md) — это подключенный к сети набор виртуальных машин или физических компьютеров, в котором вы развертываете микрослужбы и управляете ими.</span><span class="sxs-lookup"><span data-stu-id="1a6da-134">A [Service Fabric cluster](service-fabric-deploy-anywhere.md) is a network-connected set of virtual or physical machines into which your microservices are deployed and managed.</span></span> <span data-ttu-id="1a6da-135">Кластеры можно масштабировать до нескольких тысяч машин.</span><span class="sxs-lookup"><span data-stu-id="1a6da-135">Clusters can scale to thousands of machines.</span></span>

<span data-ttu-id="1a6da-136">Узлом называется компьютер или виртуальная машина, которая входит в состав кластера.</span><span class="sxs-lookup"><span data-stu-id="1a6da-136">A machine or VM that is part of a cluster is called a node.</span></span> <span data-ttu-id="1a6da-137">Каждому узлу назначается имя (строка).</span><span class="sxs-lookup"><span data-stu-id="1a6da-137">Each node is assigned a node name (a string).</span></span> <span data-ttu-id="1a6da-138">Узлы имеют свои характеристики, в частности свойства размещения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-138">Nodes have characteristics such as placement properties.</span></span> <span data-ttu-id="1a6da-139">Каждый компьютер или виртуальная машина имеет автоматически запускаемую службу Windows, `FabricHost.exe`. Она запускается после загрузки системы и запускает два исполняемых файла: `Fabric.exe` и `FabricGateway.exe`.</span><span class="sxs-lookup"><span data-stu-id="1a6da-139">Each machine or VM has an auto-start Windows service, `FabricHost.exe`, which starts running upon boot and then starts two executables: `Fabric.exe` and `FabricGateway.exe`.</span></span> <span data-ttu-id="1a6da-140">Эти два файла формируют узел.</span><span class="sxs-lookup"><span data-stu-id="1a6da-140">These two executables make up the node.</span></span> <span data-ttu-id="1a6da-141">В сценариях разработки или тестирования на одном компьютере или виртуальной машине можно разместить несколько узлов, запустив несколько экземпляров `Fabric.exe` и `FabricGateway.exe`.</span><span class="sxs-lookup"><span data-stu-id="1a6da-141">For development or testing scenarios, you can host multiple nodes on a single machine or VM by running multiple instances of `Fabric.exe` and `FabricGateway.exe`.</span></span>

<span data-ttu-id="1a6da-142">Именованное приложение представляет собой коллекцию составляющих его именованных служб, которые выполняют определенные функции.</span><span class="sxs-lookup"><span data-stu-id="1a6da-142">A named application is a collection of named services that performs a certain function or functions.</span></span> <span data-ttu-id="1a6da-143">Служба выполняет завершенную и отдельную функцию (она может запускаться и работать независимо от других служб) и состоит из кода, конфигурации и данных.</span><span class="sxs-lookup"><span data-stu-id="1a6da-143">A service performs a complete and standalone function (it can start and run independently of other services) and is composed of code, configuration, and data.</span></span> <span data-ttu-id="1a6da-144">Когда пакет приложения будет скопирован в хранилище образов, вы сможете создать в кластере экземпляр приложения. Для этого нужно указать тип приложения в пакете приложения (имя и версию).</span><span class="sxs-lookup"><span data-stu-id="1a6da-144">After an application package is copied to the image store, you create an instance of the application within the cluster by specifying the application package's application type (using its name/version).</span></span> <span data-ttu-id="1a6da-145">Каждому экземпляру приложения этого типа назначается универсальный код ресурса (URI), который выглядит следующим образом: *fabric:/MyNamedApp*.</span><span class="sxs-lookup"><span data-stu-id="1a6da-145">Each application type instance is assigned a URI name that looks like *fabric:/MyNamedApp*.</span></span> <span data-ttu-id="1a6da-146">Из одного типа приложения в кластере можно создать несколько именованных приложений.</span><span class="sxs-lookup"><span data-stu-id="1a6da-146">Within a cluster, you can create multiple named applications from a single application type.</span></span> <span data-ttu-id="1a6da-147">Именованные приложения можно также создавать из разных типов приложений.</span><span class="sxs-lookup"><span data-stu-id="1a6da-147">You can also create named applications from different application types.</span></span> <span data-ttu-id="1a6da-148">Для каждого именованного приложения управление и контроль версий выполняются отдельно.</span><span class="sxs-lookup"><span data-stu-id="1a6da-148">Each named application is managed and versioned independently.</span></span>

<span data-ttu-id="1a6da-149">Создав именованное приложение, вы можете создать в кластере экземпляр одной из его служб определенного типа (именованную службу), используя для этого соответствующий тип службы (имя и версию).</span><span class="sxs-lookup"><span data-stu-id="1a6da-149">After creating a named application, you can create an instance of one of its service types (a named service) within the cluster by specifying the service type (using its name/version).</span></span> <span data-ttu-id="1a6da-150">Каждому экземпляру службы определенного типа назначается код URI, частью которого будет URI именованного приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-150">Each service type instance is assigned a URI name scoped under its named application's URI.</span></span> <span data-ttu-id="1a6da-151">Например, если в именованном приложении MyNamedApp вы создадите именованную службу MyDatabase, ее универсальный код ресурса (URI) будет выглядеть так: *fabric:/MyNamedApp/MyDatabase*.</span><span class="sxs-lookup"><span data-stu-id="1a6da-151">For example, if you create a "MyDatabase" named service within a "MyNamedApp" named application, the URI looks like: *fabric:/MyNamedApp/MyDatabase*.</span></span> <span data-ttu-id="1a6da-152">В именованном приложении можно создать одну или несколько именованных служб.</span><span class="sxs-lookup"><span data-stu-id="1a6da-152">Within a named application, you can create one or more named services.</span></span> <span data-ttu-id="1a6da-153">У каждой именованной службы может быть своя схема секционирования и свое количество реплик и экземпляров.</span><span class="sxs-lookup"><span data-stu-id="1a6da-153">Each named service can have its own partition scheme and instance/replica counts.</span></span> 

<span data-ttu-id="1a6da-154">Существуют два типа службы: с отслеживанием состояния и без него.</span><span class="sxs-lookup"><span data-stu-id="1a6da-154">There are two types of services: stateless and stateful.</span></span> <span data-ttu-id="1a6da-155">Службы без отслеживания состояния могут сохранять устойчивое состояние во внешней службе хранилища, например в службе хранилища Azure, базе данных SQL Azure или Azure Cosmos DB.</span><span class="sxs-lookup"><span data-stu-id="1a6da-155">Stateless services can store persistent state in an external storage service such as Azure Storage, Azure SQL Database, or Azure Cosmos DB.</span></span> <span data-ttu-id="1a6da-156">Службу без отслеживания состояния следует использовать, когда у службы нет постоянного хранилища.</span><span class="sxs-lookup"><span data-stu-id="1a6da-156">Use a stateless service when the service has no persistent storage at all.</span></span> <span data-ttu-id="1a6da-157">Служба с отслеживанием состояния используется, когда нужно, чтобы платформа Service Fabric управляла состоянием службы через модели программирования Reliable Collections или Reliable Actors.</span><span class="sxs-lookup"><span data-stu-id="1a6da-157">A stateful service uses Service Fabric to manage your service's state via its Reliable Collections or Reliable Actors programming models.</span></span> 

<span data-ttu-id="1a6da-158">При создании именованной службы указывается схема секционирования.</span><span class="sxs-lookup"><span data-stu-id="1a6da-158">When creating a named service, you specify a partition scheme.</span></span> <span data-ttu-id="1a6da-159">Службы с большим количеством состояний разделяют данные по секциям.</span><span class="sxs-lookup"><span data-stu-id="1a6da-159">Services with large amounts of state split the data across partitions.</span></span> <span data-ttu-id="1a6da-160">Каждая секция отвечает за часть полного состояния службы. Эти секции распределены между узлами кластера.</span><span class="sxs-lookup"><span data-stu-id="1a6da-160">Each partition is responsible for a portion of the complete state of the service, which is spread across the cluster's nodes.</span></span> <span data-ttu-id="1a6da-161">В пределах одной секции именованные службы без отслеживания состояния хранят экземпляры, а именованные службы с отслеживанием состояния — реплики.</span><span class="sxs-lookup"><span data-stu-id="1a6da-161">Within a partition, stateless named services have instances while stateful named services have replicas.</span></span> <span data-ttu-id="1a6da-162">Как правило, именованные службы без отслеживания состояния используют только одну секцию, так как у них нет внутреннего состояния.</span><span class="sxs-lookup"><span data-stu-id="1a6da-162">Usually, stateless named services only ever have one partition since they have no internal state.</span></span> <span data-ttu-id="1a6da-163">Именованные службы с отслеживанием состояния хранят сведения о своем состоянии в репликах, и у каждой секции есть свой набор реплик.</span><span class="sxs-lookup"><span data-stu-id="1a6da-163">Stateful named services maintain their state within replicas and each partition has its own replica set.</span></span> <span data-ttu-id="1a6da-164">Операции чтения и записи выполняются в одной реплике (которая называется первичной).</span><span class="sxs-lookup"><span data-stu-id="1a6da-164">Read and write operations are performed at one replica (called the Primary).</span></span> <span data-ttu-id="1a6da-165">Изменения в состоянии, вызванные операциями записи, реплицируются на множество других реплик (которые называются активными вторичными репликами).</span><span class="sxs-lookup"><span data-stu-id="1a6da-165">Changes to state from write operations are replicated to multiple other replicas (called Active Secondaries).</span></span> 

<span data-ttu-id="1a6da-166">На следующей диаграмме отображается отношение между приложениями и экземплярами службы, разделами и репликами.</span><span class="sxs-lookup"><span data-stu-id="1a6da-166">The following diagram shows the relationship between applications and service instances, partitions, and replicas.</span></span>

![Разделы и реплики в службе][cluster-application-instances]

### <a name="partitioning-scaling-and-availability"></a><span data-ttu-id="1a6da-168">Секционирование, масштабирование и доступность</span><span class="sxs-lookup"><span data-stu-id="1a6da-168">Partitioning, scaling, and availability</span></span>
<span data-ttu-id="1a6da-169">[Секционирование](service-fabric-concepts-partitioning.md) не является уникальной особенностью Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-169">[Partitioning](service-fabric-concepts-partitioning.md) is not unique to Service Fabric.</span></span> <span data-ttu-id="1a6da-170">Распространенный пример секционирования — это секционирование данных или сегментирование.</span><span class="sxs-lookup"><span data-stu-id="1a6da-170">A well known form of partitioning is data partitioning, or sharding.</span></span> <span data-ttu-id="1a6da-171">Службы с отслеживанием состояния с большим количеством состояний разделяют данные по секциям.</span><span class="sxs-lookup"><span data-stu-id="1a6da-171">Stateful services with large amounts of state split the data across partitions.</span></span> <span data-ttu-id="1a6da-172">Каждая секция отвечает за часть полного состояния службы.</span><span class="sxs-lookup"><span data-stu-id="1a6da-172">Each partition is responsible for a portion of the complete state of the service.</span></span> 

<span data-ttu-id="1a6da-173">Реплики каждой секции распределяются по узлам в кластере. Это позволяет состоянию именованной службы [масштабироваться](service-fabric-concepts-scalability.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-173">The replicas of each partition are spread across the cluster's nodes, which allows your named service's state to [scale](service-fabric-concepts-scalability.md).</span></span> <span data-ttu-id="1a6da-174">По мере роста объема данных размер секций увеличивается, и Service Fabric перераспределяет секции между узлами для максимально эффективного использования аппаратных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="1a6da-174">As the data needs grow, partitions grow, and Service Fabric rebalances partitions across nodes to make efficient use of hardware resources.</span></span> <span data-ttu-id="1a6da-175">Если вы добавите новые узлы в кластер, реплики секции подвергнутся повторной балансировке с учетом этих узлов.</span><span class="sxs-lookup"><span data-stu-id="1a6da-175">If you add new nodes to the cluster, Service Fabric will rebalance the partition replicas across the increased number of nodes.</span></span> <span data-ttu-id="1a6da-176">Общая производительность приложения улучшится, а конфликт доступа к памяти уменьшится.</span><span class="sxs-lookup"><span data-stu-id="1a6da-176">Overall application performance improves and contention for access to memory decreases.</span></span> <span data-ttu-id="1a6da-177">При неэффективном использовании узлов в кластере вы можете уменьшить их количество.</span><span class="sxs-lookup"><span data-stu-id="1a6da-177">If the nodes in the cluster are not being used efficiently, you can decrease the number of nodes in the cluster.</span></span> <span data-ttu-id="1a6da-178">Service Fabric снова перераспределит реплики секции по меньшему количеству узлов, чтобы эффективно использовать оборудование на каждом узле.</span><span class="sxs-lookup"><span data-stu-id="1a6da-178">Service Fabric again rebalances the partition replicas across the decreased number of nodes to make better use of the hardware on each node.</span></span>

<span data-ttu-id="1a6da-179">В пределах одной секции именованные службы без отслеживания состояния хранят экземпляры, а именованные службы с отслеживанием состояния — реплики.</span><span class="sxs-lookup"><span data-stu-id="1a6da-179">Within a partition, stateless named services have instances while stateful named services have replicas.</span></span> <span data-ttu-id="1a6da-180">Как правило, именованные службы без отслеживания состояния используют только одну секцию, так как у них нет внутреннего состояния.</span><span class="sxs-lookup"><span data-stu-id="1a6da-180">Usually, stateless named services only ever have one partition since they have no internal state.</span></span> <span data-ttu-id="1a6da-181">Экземпляры в секциях обеспечивают [доступность](service-fabric-availability-services.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-181">The partition instances provide for [availability](service-fabric-availability-services.md).</span></span> <span data-ttu-id="1a6da-182">Если один экземпляр выходит из строя, другие продолжают работать обычным образом, а Service Fabric создает новый экземпляр.</span><span class="sxs-lookup"><span data-stu-id="1a6da-182">If one instance fails, other instances continue to operate normally and then Service Fabric creates a new instance.</span></span> <span data-ttu-id="1a6da-183">Именованные службы с отслеживанием состояния хранят сведения о своем состоянии в репликах, и у каждой секции есть свой набор реплик.</span><span class="sxs-lookup"><span data-stu-id="1a6da-183">Stateful named services maintain their state within replicas and each partition has its own replica set.</span></span> <span data-ttu-id="1a6da-184">Операции чтения и записи выполняются в одной реплике (которая называется первичной).</span><span class="sxs-lookup"><span data-stu-id="1a6da-184">Read and write operations are performed at one replica (called the Primary).</span></span> <span data-ttu-id="1a6da-185">Изменения в состоянии, вызванные операциями записи, реплицируются на множество других реплик (которые называются активными вторичными репликами).</span><span class="sxs-lookup"><span data-stu-id="1a6da-185">Changes to state from write operations are replicated to multiple other replicas (called Active Secondaries).</span></span> <span data-ttu-id="1a6da-186">Если в реплике возникает сбой, Service Fabric создает новую реплику из существующих.</span><span class="sxs-lookup"><span data-stu-id="1a6da-186">Should a replica fail, Service Fabric builds a new replica from the existing replicas.</span></span>

## <a name="stateless-and-stateful-microservices-for-service-fabric"></a><span data-ttu-id="1a6da-187">Микрослужбы Service Fabric с отслеживанием и без отслеживания состояния</span><span class="sxs-lookup"><span data-stu-id="1a6da-187">Stateless and stateful microservices for Service Fabric</span></span>
<span data-ttu-id="1a6da-188">Service Fabric позволяет создавать приложения, состоящие из микрослужб или контейнеров.</span><span class="sxs-lookup"><span data-stu-id="1a6da-188">Service Fabric enables you to build applications that consist of microservices or containers.</span></span> <span data-ttu-id="1a6da-189">Микрослужбы без отслеживания состояния (протоколы шлюзов, веб-прокси и т. д.) не поддерживают изменяемые состояния без обработки запроса службой.</span><span class="sxs-lookup"><span data-stu-id="1a6da-189">Stateless microservices (such as protocol gateways and web proxies) do not maintain a mutable state outside a request and its response from the service.</span></span> <span data-ttu-id="1a6da-190">К службам без отслеживания состояния можно отнести рабочие роли в облачных службах Azure.</span><span class="sxs-lookup"><span data-stu-id="1a6da-190">Azure Cloud Services worker roles are an example of a stateless service.</span></span> <span data-ttu-id="1a6da-191">Микрослужбы с отслеживанием состояния (учетные записи пользователей, базы данных, устройства, корзины интернет-магазинов, очереди и т. д.) поддерживают изменяемые достоверные состояния без обработки запроса службой.</span><span class="sxs-lookup"><span data-stu-id="1a6da-191">Stateful microservices (such as user accounts, databases, devices, shopping carts, and queues) maintain a mutable, authoritative state beyond the request and its response.</span></span> <span data-ttu-id="1a6da-192">Современные веб-приложения могут одновременно содержать микрослужбы с отслеживанием состояния и без него.</span><span class="sxs-lookup"><span data-stu-id="1a6da-192">Today's Internet-scale applications consist of a combination of stateless and stateful microservices.</span></span> 

<span data-ttu-id="1a6da-193">Ключевое отличие Service Fabric — активная ориентация на создание служб с отслеживанием состояния на основе [встроенных моделей программирования ](service-fabric-choose-framework.md) или контейнерных служб с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="1a6da-193">A key differentation with Service Fabric is its strong focus on building stateful services, either with the [built in programming models ](service-fabric-choose-framework.md) or with containerized stateful services.</span></span> <span data-ttu-id="1a6da-194">В [сценариях приложений](service-fabric-application-scenarios.md) описаны ситуации, в которых используются службы с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="1a6da-194">The [application scenarios](service-fabric-application-scenarios.md) describe the scenarios where stateful services are used.</span></span>

<span data-ttu-id="1a6da-195">Зачем существуют микрослужбы с отслеживанием состояния наряду с микрослужбами без отслеживания состояния?</span><span class="sxs-lookup"><span data-stu-id="1a6da-195">Why have stateful microservices along with stateless ones?</span></span> <span data-ttu-id="1a6da-196">Основных преимуществ два.</span><span class="sxs-lookup"><span data-stu-id="1a6da-196">The two main reasons are:</span></span>

* <span data-ttu-id="1a6da-197">Вы можете создавать службы оперативной обработки транзакций (OLTP) с высокой пропускной способностью, низкой задержкой и хорошей отказоустойчивостью, размещая программы и данные рядом на одной виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="1a6da-197">You can build high-throughput, low-latency, failure-tolerant online transaction processing (OLTP) services by keeping code and data close on the same machine.</span></span> <span data-ttu-id="1a6da-198">В качестве примеров таких служб можно привести онлайн-магазины, службы поиска, системы Интернета вещей, торговые системы, системы обработки кредитных карт и обнаружения мошенничества, а также службы управления персональными данными.</span><span class="sxs-lookup"><span data-stu-id="1a6da-198">Some examples are interactive storefronts, search, Internet of Things (IoT) systems, trading systems, credit card processing and fraud detection systems, and personal record management.</span></span>
* <span data-ttu-id="1a6da-199">Вы можете упростить разработку приложений.</span><span class="sxs-lookup"><span data-stu-id="1a6da-199">You can simplify application design.</span></span> <span data-ttu-id="1a6da-200">Микрослужбы с отслеживанием состояния устраняют необходимость в дополнительных очередях и кэшах, которые обычно требуются для обеспечения доступности и минимизации задержек в приложениях без отслеживания состояния.</span><span class="sxs-lookup"><span data-stu-id="1a6da-200">Stateful microservices remove the need for additional queues and caches, which are traditionally required to address the availability and latency requirements of a purely stateless application.</span></span> <span data-ttu-id="1a6da-201">Для служб с отслеживанием состояния изначально характерны высокая доступность и минимальные задержки, поэтому приложением в целом будет проще управлять.</span><span class="sxs-lookup"><span data-stu-id="1a6da-201">Stateful services are naturally high-availability and low-latency, which reduces the number of moving parts to manage in your application as a whole.</span></span>

## <a name="supported-programming-models"></a><span data-ttu-id="1a6da-202">Поддерживаемые модели программирования</span><span class="sxs-lookup"><span data-stu-id="1a6da-202">Supported programming models</span></span>
<span data-ttu-id="1a6da-203">Service Fabric предлагает несколько способов записи и управления службами.</span><span class="sxs-lookup"><span data-stu-id="1a6da-203">Service Fabric offers multiple ways to write and manage your services.</span></span> <span data-ttu-id="1a6da-204">Службы могут использовать API-интерфейсы платформы Service Fabric, чтобы в полной мере использовать компоненты платформы и платформы приложений.</span><span class="sxs-lookup"><span data-stu-id="1a6da-204">Services can use the Service Fabric APIs to take full advantage of the platform's features and application frameworks.</span></span> <span data-ttu-id="1a6da-205">Службы также могут представлять любую скомпилированную исполняемую программу, написанную на любом языке и размещенную в кластере Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-205">Services can also be any compiled executable program written in any language and hosted on a Service Fabric cluster.</span></span> <span data-ttu-id="1a6da-206">Дополнительные сведения см. в разделе [Поддерживаемые модели программирования](service-fabric-choose-framework.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-206">For more information, see [Supported programming models](service-fabric-choose-framework.md).</span></span>

### <a name="containers"></a><span data-ttu-id="1a6da-207">Контейнеры</span><span class="sxs-lookup"><span data-stu-id="1a6da-207">Containers</span></span>
<span data-ttu-id="1a6da-208">По умолчанию Service Fabric развертывает и активирует службы как процессы.</span><span class="sxs-lookup"><span data-stu-id="1a6da-208">By default, Service Fabric deploys and activates services as processes.</span></span> <span data-ttu-id="1a6da-209">Service Fabric также позволяет развертывать службы в [контейнерах](service-fabric-containers-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-209">Service Fabric can also deploy services in [containers](service-fabric-containers-overview.md).</span></span> <span data-ttu-id="1a6da-210">Главное, что вы можете объединять эти два подхода, используя в одном приложении службы с процессами и контейнерами.</span><span class="sxs-lookup"><span data-stu-id="1a6da-210">Importantly, you can mix services in processes and services in containers in the same application.</span></span> <span data-ttu-id="1a6da-211">Service Fabric поддерживает развертывание контейнеров Linux и контейнеров Windows на Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="1a6da-211">Service Fabric supports deployment of Linux containers  Windows containers on Windows Server 2016.</span></span> <span data-ttu-id="1a6da-212">В контейнерах можно развернуть имеющиеся приложения, службы без отслеживания состояния или службы с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="1a6da-212">You can deploy existing applications, stateless services, or stateful services in containers.</span></span> 

### <a name="reliable-services"></a><span data-ttu-id="1a6da-213">Надежные службы</span><span class="sxs-lookup"><span data-stu-id="1a6da-213">Reliable Services</span></span>
<span data-ttu-id="1a6da-214">[Reliable Services](service-fabric-reliable-services-introduction.md) — это облегченная платформа для записи служб, которые интегрируются с платформой Service Fabric и используют весь набор функций платформы.</span><span class="sxs-lookup"><span data-stu-id="1a6da-214">[Reliable Services](service-fabric-reliable-services-introduction.md) is a lightweight framework for writing services that integrate with the Service Fabric platform and benefit from the full set of platform features.</span></span> <span data-ttu-id="1a6da-215">Службы Reliable Services могут быть без отслеживания состояния, как и большинство платформ служб, таких как веб-серверы или рабочие роли в облачных службах Azure. При этом состояние сохраняется во внешнем решении, таком как база данных Azure или хранилище таблиц Azure.</span><span class="sxs-lookup"><span data-stu-id="1a6da-215">Reliable Services can be stateless (similar to most service platforms, such as web servers or Worker Roles in Azure Cloud Services), where state is persisted in an external solution, such as Azure DB or Azure Table Storage.</span></span> <span data-ttu-id="1a6da-216">Службы Reliable Services могут также быть с отслеживанием состояния. При этом состояние сохраняется прямо в службу с использованием Reliable Collections.</span><span class="sxs-lookup"><span data-stu-id="1a6da-216">Reliable Services can also be stateful, where state is persisted directly in the service itself using Reliable Collections.</span></span> <span data-ttu-id="1a6da-217">Состояние становится [высокодоступным](service-fabric-availability-services.md) за счет репликации и распределения путем [секционирования](service-fabric-concepts-partitioning.md), которыми автоматически управляет Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-217">State is made [highly available](service-fabric-availability-services.md) through replication and distributed through [partitioning](service-fabric-concepts-partitioning.md), all managed automatically by Service Fabric.</span></span>

### <a name="reliable-actors"></a><span data-ttu-id="1a6da-218">Надежные субъекты</span><span class="sxs-lookup"><span data-stu-id="1a6da-218">Reliable Actors</span></span>
<span data-ttu-id="1a6da-219">Платформа [Reliable Actor](service-fabric-reliable-actors-introduction.md), построенная на базе Reliable Services, представляет собой платформу приложений, реализующую модель Virtual Actor на основе шаблона проектирования субъектов.</span><span class="sxs-lookup"><span data-stu-id="1a6da-219">Built on top of Reliable Services, the [Reliable Actor](service-fabric-reliable-actors-introduction.md) framework is an application framework that implements the Virtual Actor pattern, based on the actor design pattern.</span></span> <span data-ttu-id="1a6da-220">Платформа надежных субъектов использует независимые единицы вычислений и состояний с однопоточным выполнением, которые называются субъектами.</span><span class="sxs-lookup"><span data-stu-id="1a6da-220">The Reliable Actor framework uses independent units of compute and state with single-threaded execution called actors.</span></span> <span data-ttu-id="1a6da-221">Платформа надежных субъектов обеспечивает встроенное взаимодействие для субъектов, а также предустановленное сохранение состояния и масштабируемые конфигурации.</span><span class="sxs-lookup"><span data-stu-id="1a6da-221">The Reliable Actor framework provides built in communication for actors and pre-set state persistence and scale-out configurations.</span></span>

### <a name="aspnet-core"></a><span data-ttu-id="1a6da-222">ASP.NET Core;</span><span class="sxs-lookup"><span data-stu-id="1a6da-222">ASP.NET Core</span></span>
<span data-ttu-id="1a6da-223">Service Fabric интегрируется с [ASP.NET Core](service-fabric-reliable-services-communication-aspnetcore.md) в качестве высококлассной модели программирования для создания веб-приложений и приложений API.</span><span class="sxs-lookup"><span data-stu-id="1a6da-223">Service Fabric integrates with [ASP.NET Core](service-fabric-reliable-services-communication-aspnetcore.md) as a first class programming model for building web and API applications</span></span>

### <a name="guest-executables"></a><span data-ttu-id="1a6da-224">Гостевые исполняемые файлы</span><span class="sxs-lookup"><span data-stu-id="1a6da-224">Guest executables</span></span>
<span data-ttu-id="1a6da-225">[Гостевой исполняемый файл](service-fabric-deploy-existing-app.md) — это произвольный существующий исполняемый файл (написанный на любом языке), который размещен в кластере Service Fabric среди других служб.</span><span class="sxs-lookup"><span data-stu-id="1a6da-225">A [guest executable](service-fabric-deploy-existing-app.md) is an existing, arbitrary executable (written in any language) hosted on a Service Fabric cluster alongside other services.</span></span> <span data-ttu-id="1a6da-226">Гостевые исполняемые файлы не интегрируются с интерфейсами API Service Fabric напрямую.</span><span class="sxs-lookup"><span data-stu-id="1a6da-226">Guest executables do not integrate directly with Service Fabric APIs.</span></span> <span data-ttu-id="1a6da-227">Однако они по-прежнему используют преимущества предлагаемых платформой функций, такие как настраиваемые отчеты о работоспособности и загрузке, а также возможности обнаружения службы путем вызова REST API.</span><span class="sxs-lookup"><span data-stu-id="1a6da-227">However they still benefit from features the platform offers, such as custom health and load reporting and service discoverability by calling REST APIs.</span></span> <span data-ttu-id="1a6da-228">Они также имеют поддержку полного жизненного цикла приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-228">They also have full application lifecycle support.</span></span> 

## <a name="application-lifecycle"></a><span data-ttu-id="1a6da-229">Жизненный цикл приложения</span><span class="sxs-lookup"><span data-stu-id="1a6da-229">Application lifecycle</span></span>
<span data-ttu-id="1a6da-230">Как и в случае с другими платформами, приложение в Service Fabric обычно проходит следующие фазы: проектирование, разработка, тестирование, развертывание, обновление, техническое обслуживание и удаление.</span><span class="sxs-lookup"><span data-stu-id="1a6da-230">As with other platforms, an application on Service Fabric usually goes through the following phases: design, development, testing, deployment, upgrade, maintenance, and removal.</span></span> <span data-ttu-id="1a6da-231">Service Fabric предоставляет первоклассную поддержку полного жизненного цикла приложений в облаке: от разработки, развертывания, ежедневного управления и технического обслуживания до вывода приложения из эксплуатации.</span><span class="sxs-lookup"><span data-stu-id="1a6da-231">Service Fabric provides first-class support for the full application lifecycle of cloud applications, from development through deployment, daily management, and maintenance to eventual decommissioning.</span></span> <span data-ttu-id="1a6da-232">Модель службы использует несколько различных ролей для независимого участия в жизненном цикле приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-232">The service model enables several different roles to participate independently in the application lifecycle.</span></span> <span data-ttu-id="1a6da-233">[Жизненный цикл приложения в Service Fabric](service-fabric-application-lifecycle.md) представляет обзор интерфейсов API, а также их использование различными ролями на протяжении всех фаз жизненного цикла приложения в Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-233">[Service Fabric application lifecycle](service-fabric-application-lifecycle.md) provides an overview of the APIs and how they are used by the different roles throughout the phases of the Service Fabric application lifecycle.</span></span> 

<span data-ttu-id="1a6da-234">Всем жизненным циклом приложения можно управлять с помощью [командлетов PowerShell](/powershell/module/ServiceFabric/), [интерфейсов API C#](/dotnet/api/system.fabric.fabricclient.applicationmanagementclient), [интерфейсов API Java](/java/api/system.fabric._application_management_client) и [интерфейсов REST API](/rest/api/servicefabric/).</span><span class="sxs-lookup"><span data-stu-id="1a6da-234">The entire app lifecycle can be managed using [PowerShell cmdlets](/powershell/module/ServiceFabric/), [C# APIs](/dotnet/api/system.fabric.fabricclient.applicationmanagementclient), [Java APIs](/java/api/system.fabric._application_management_client), and [REST APIs](/rest/api/servicefabric/).</span></span> <span data-ttu-id="1a6da-235">Вы также можете настроить конвейеры непрерывной интеграции и разработки с помощью средств [Visual Studio Team Services](service-fabric-set-up-continuous-integration.md) или [Jenkins](service-fabric-cicd-your-linux-java-application-with-jenkins.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-235">You can also set up continuous integration/continuous deployment pipelines using tools such as [Visual Studio Team Services](service-fabric-set-up-continuous-integration.md) or [Jenkins](service-fabric-cicd-your-linux-java-application-with-jenkins.md).</span></span>

<span data-ttu-id="1a6da-236">В следующем видео от Академии Microsoft Virtual Academy также описывается процесс управления жизненным циклом приложения: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=My3Ka56yC_6106218965">
<img src="./media/service-fabric-content-roadmap/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="1a6da-236">The following Microsoft Virtual Academy video describes how to manage your application lifecycle: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=My3Ka56yC_6106218965">
<img src="./media/service-fabric-content-roadmap/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="test-applications-and-services"></a><span data-ttu-id="1a6da-237">Тестирование приложений и служб</span><span class="sxs-lookup"><span data-stu-id="1a6da-237">Test applications and services</span></span>
<span data-ttu-id="1a6da-238">Чтобы создать службы именно в масштабах облака, очень важно, чтобы приложения и службы были устойчивы к реальным сбоям.</span><span class="sxs-lookup"><span data-stu-id="1a6da-238">To create truly cloud-scale services, it is critical to verify that your applications and services can withstand real-world failures.</span></span> <span data-ttu-id="1a6da-239">Служба анализа сбоев предназначена для проверки служб, созданных на платформе Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-239">The Fault Analysis Service is designed for testing services that are built on Service Fabric.</span></span> <span data-ttu-id="1a6da-240">Вместе с [Fault Analysis Service](service-fabric-testability-overview.md) она позволяет вызывать значимые ошибки и запускать в приложениях тестовые сценарии.</span><span class="sxs-lookup"><span data-stu-id="1a6da-240">With the [Fault Analysis Service](service-fabric-testability-overview.md), you can induce meaningful faults and run complete test scenarios against your applications.</span></span> <span data-ttu-id="1a6da-241">Вызываемые ошибки и сценарии позволяют воспроизвести и проверить в контролируемых, безопасных и согласованных условиях разные состояния и переходы, происходящие со службой в течение ее жизненного цикла.</span><span class="sxs-lookup"><span data-stu-id="1a6da-241">These faults and scenarios exercise and validate the numerous states and transitions that a service will experience throughout its lifetime, all in a controlled, safe, and consistent manner.</span></span>

<span data-ttu-id="1a6da-242">[Действия](service-fabric-testability-actions.md) выполняются в службе для ее тестирования с использованием отдельных ошибок.</span><span class="sxs-lookup"><span data-stu-id="1a6da-242">[Actions](service-fabric-testability-actions.md) target a service for testing using individual faults.</span></span> <span data-ttu-id="1a6da-243">Разработчик службы может использовать их в качестве стандартных блоков для создания сложных сценариев.</span><span class="sxs-lookup"><span data-stu-id="1a6da-243">A service developer can use these as building blocks to write complicated scenarios.</span></span> <span data-ttu-id="1a6da-244">Ниже приведены примеры моделирования ошибок.</span><span class="sxs-lookup"><span data-stu-id="1a6da-244">Examples of simulated faults are:</span></span>

* <span data-ttu-id="1a6da-245">Перезапустите узел для моделирования любого количества ситуаций, в которых выполняется перезагрузка компьютера или виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="1a6da-245">Restart a node to simulate any number of situations where a machine or VM is rebooted.</span></span>
* <span data-ttu-id="1a6da-246">Переместите реплики службы с отслеживанием состояния для имитации балансировки нагрузки, отработки отказа или обновления приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-246">Move a replica of your stateful service to simulate load balancing, failover, or application upgrade.</span></span>
* <span data-ttu-id="1a6da-247">Вызовите потерю кворума в службе с отслеживанием состояния, чтобы создать ситуацию, в которой операции записи невозможны, так как отсутствуют "резервные" или "вторичные" реплики, необходимые для приема новых данных.</span><span class="sxs-lookup"><span data-stu-id="1a6da-247">Invoke quorum loss on a stateful service to create a situation where write operations can't proceed because there aren't enough "back-up" or "secondary" replicas to accept new data.</span></span>
* <span data-ttu-id="1a6da-248">Вызовите потерю данных в службе с отслеживанием состояния, чтобы создать ситуацию, в которой все данные о состоянии в памяти полностью уничтожаются.</span><span class="sxs-lookup"><span data-stu-id="1a6da-248">Invoke data loss on a stateful service to create a situation where all in-memory state is completely wiped out.</span></span>

<span data-ttu-id="1a6da-249">[Сценарии](service-fabric-testability-scenarios.md) — это сложные операции, состоящие из одного или нескольких действий.</span><span class="sxs-lookup"><span data-stu-id="1a6da-249">[Scenarios](service-fabric-testability-scenarios.md) are complex operations composed of one or more actions.</span></span> <span data-ttu-id="1a6da-250">Служба анализа сбоев включает два полных встроенных сценария:</span><span class="sxs-lookup"><span data-stu-id="1a6da-250">The Fault Analysis Service provides two built-in complete scenarios:</span></span>

* <span data-ttu-id="1a6da-251">[Сценарий хаотического тестирования](service-fabric-controlled-chaos.md) моделирует в кластере непрерывные сбои, чередуя как нормальные, так и ненормальные ошибки, на протяжении долгого периода времени.</span><span class="sxs-lookup"><span data-stu-id="1a6da-251">[Chaos scenario](service-fabric-controlled-chaos.md)- simulates continuous, interleaved faults (both graceful and ungraceful) throughout the cluster over extended periods of time.</span></span>
* <span data-ttu-id="1a6da-252">[Сценарий отработки отказа](service-fabric-testability-scenarios.md#failover-test) — это версия сценария хаотического тестирования, предназначенная для конкретной секции службы, при котором другие службы не затрагиваются.</span><span class="sxs-lookup"><span data-stu-id="1a6da-252">[Failover scenario](service-fabric-testability-scenarios.md#failover-test)- a version of the chaos test scenario that targets a specific service partition while leaving other services unaffected.</span></span>

## <a name="clusters"></a><span data-ttu-id="1a6da-253">Кластеры</span><span class="sxs-lookup"><span data-stu-id="1a6da-253">Clusters</span></span>
<span data-ttu-id="1a6da-254">[Кластер Service Fabric](service-fabric-deploy-anywhere.md) — это подключенный к сети набор виртуальных машин или физических компьютеров, в котором вы развертываете микрослужбы и управляете ими.</span><span class="sxs-lookup"><span data-stu-id="1a6da-254">A [Service Fabric cluster](service-fabric-deploy-anywhere.md) is a network-connected set of virtual or physical machines into which your microservices are deployed and managed.</span></span> <span data-ttu-id="1a6da-255">Кластеры можно масштабировать до нескольких тысяч машин.</span><span class="sxs-lookup"><span data-stu-id="1a6da-255">Clusters can scale to thousands of machines.</span></span> <span data-ttu-id="1a6da-256">Узлом кластера называется компьютер или виртуальная машина, которая входит в состав кластера.</span><span class="sxs-lookup"><span data-stu-id="1a6da-256">A machine or VM that is part of a cluster is called a cluster node.</span></span> <span data-ttu-id="1a6da-257">Каждому узлу назначается имя (строка).</span><span class="sxs-lookup"><span data-stu-id="1a6da-257">Each node is assigned a node name (a string).</span></span> <span data-ttu-id="1a6da-258">Узлы имеют свои характеристики, в частности свойства размещения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-258">Nodes have characteristics such as placement properties.</span></span> <span data-ttu-id="1a6da-259">У каждого компьютера или виртуальной машины есть автоматически запускаемая служба `FabricHost.exe`. Она запускается после загрузки системы и запускает два исполняемых файла: Fabric.exe и FabricGateway.exe.</span><span class="sxs-lookup"><span data-stu-id="1a6da-259">Each machine or VM has an auto-start service, `FabricHost.exe`, which starts running upon boot and then starts two executables: Fabric.exe and FabricGateway.exe.</span></span> <span data-ttu-id="1a6da-260">Эти два файла формируют узел.</span><span class="sxs-lookup"><span data-stu-id="1a6da-260">These two executables make up the node.</span></span> <span data-ttu-id="1a6da-261">В целях тестирования на одном компьютере или виртуальной машине можно разместить несколько узлов, запустив несколько экземпляров `Fabric.exe` и `FabricGateway.exe`.</span><span class="sxs-lookup"><span data-stu-id="1a6da-261">For testing scenarios, you can host multiple nodes on a single machine or VM by running multiple instances of `Fabric.exe` and `FabricGateway.exe`.</span></span>

<span data-ttu-id="1a6da-262">Кластеры Service Fabric можно создать на виртуальных или физических компьютерах под управлением Windows Server или Linux.</span><span class="sxs-lookup"><span data-stu-id="1a6da-262">Service Fabric clusters can be created on virtual or physical machines running Windows Server or Linux.</span></span> <span data-ttu-id="1a6da-263">Вы можете развертывать и запускать приложения Service Fabric в любой среде с набором подключенных друг к другу компьютеров под управлением Windows Server или Linux как локально, так и в облаке Microsoft Azure или другого поставщика облачных служб.</span><span class="sxs-lookup"><span data-stu-id="1a6da-263">You are able to deploy and run Service Fabric applications in any environment where you have a set of Windows Server or Linux computers that are interconnected: on-premises, on Microsoft Azure, or on any cloud provider.</span></span>

<span data-ttu-id="1a6da-264">Кластеры Service Fabric представлены в следующем видео Microsoft Virtual Academy: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965">
<img src="./media/service-fabric-content-roadmap/ClusterOverview.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="1a6da-264">The following Microsoft Virtual Academy video describes Service Fabric clusters: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tbuZM46yC_5206218965">
<img src="./media/service-fabric-content-roadmap/ClusterOverview.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

### <a name="clusters-on-azure"></a><span data-ttu-id="1a6da-265">Кластеры в Azure</span><span class="sxs-lookup"><span data-stu-id="1a6da-265">Clusters on Azure</span></span>
<span data-ttu-id="1a6da-266">Выполнение кластеров Service Fabric в Azure обеспечивает интеграцию с другими функциями и службами Azure, благодаря чему эксплуатировать кластер и управлять им проще и надежнее.</span><span class="sxs-lookup"><span data-stu-id="1a6da-266">Running Service Fabric clusters on Azure provides integration with other Azure features and services, which makes operations and management of the cluster easier and more reliable.</span></span> <span data-ttu-id="1a6da-267">Так как кластер является ресурсом Azure Resource Manager, вы можете моделировать его, как и любой другой ресурс в Azure.</span><span class="sxs-lookup"><span data-stu-id="1a6da-267">A cluster is an Azure Resource Manager resource, so you can model clusters like any other resources in Azure.</span></span> <span data-ttu-id="1a6da-268">Resource Manager также предоставляет простое управление всеми ресурсами, которые кластер использует как единое целое.</span><span class="sxs-lookup"><span data-stu-id="1a6da-268">Resource Manager also provides easy management of all resources used by the cluster as a single unit.</span></span> <span data-ttu-id="1a6da-269">В Azure возможна интеграция кластеров с системой диагностики Azure и Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="1a6da-269">Clusters on Azure are integrated with Azure diagnostics and Log Analytics.</span></span> <span data-ttu-id="1a6da-270">Типы узлов кластера являются [масштабируемыми наборами виртуальных машин](/azure/virtual-machine-scale-sets/index), поэтому функция автомасштабирования является встроенной.</span><span class="sxs-lookup"><span data-stu-id="1a6da-270">Cluster node types are [virtual machine scale sets](/azure/virtual-machine-scale-sets/index), so autoscaling functionality is built in.</span></span>

<span data-ttu-id="1a6da-271">Вы можете создать кластер в Azure на [портале Azure](service-fabric-cluster-creation-via-portal.md) с помощью [шаблона](service-fabric-cluster-creation-via-arm.md) или [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-271">You can create a cluster on Azure through the [Azure portal](service-fabric-cluster-creation-via-portal.md), from a [template](service-fabric-cluster-creation-via-arm.md), or from [Visual Studio](service-fabric-cluster-creation-via-visual-studio.md).</span></span>

<span data-ttu-id="1a6da-272">Предварительная версия Service Fabric для Linux дает возможность создавать, развертывать высокодоступные приложения с высокой масштабируемостью и управлять ими в Linux так же, как и в Windows.</span><span class="sxs-lookup"><span data-stu-id="1a6da-272">The preview of Service Fabric on Linux enables you to build, deploy, and manage highly available, highly scalable applications on Linux just as you would on Windows.</span></span> <span data-ttu-id="1a6da-273">Платформы Service Fabric (Reliable Services и Reliable Actors) в Linux доступны для программирования на языках Java и C# (.NET Core).</span><span class="sxs-lookup"><span data-stu-id="1a6da-273">The Service Fabric frameworks (Reliable Services and Reliable Actors) are available in Java on Linux, in addition to C# (.NET Core).</span></span> <span data-ttu-id="1a6da-274">Также можно создавать [гостевые исполняемые службы](service-fabric-deploy-existing-app.md) , используя любой язык или платформу.</span><span class="sxs-lookup"><span data-stu-id="1a6da-274">You can also build [guest executable services](service-fabric-deploy-existing-app.md) with any language or framework.</span></span> <span data-ttu-id="1a6da-275">Кроме того, предварительная версия поддерживает оркестрацию контейнеров Docker.</span><span class="sxs-lookup"><span data-stu-id="1a6da-275">In addition, the preview also supports orchestrating Docker containers.</span></span> <span data-ttu-id="1a6da-276">В контейнерах Docker могут выполняться гостевые исполняемые файлы или собственные службы Service Fabric, использующие платформы Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-276">Docker containers can run guest executables or native Service Fabric services, which use the Service Fabric frameworks.</span></span> <span data-ttu-id="1a6da-277">Дополнительные сведения см. в статье [Service Fabric в Azure](service-fabric-linux-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-277">For more information, read [Service Fabric on Linux](service-fabric-linux-overview.md).</span></span>

<span data-ttu-id="1a6da-278">Так как платформа Service Fabric для Linux доступна в предварительной версии, некоторые ее функции поддерживаются в Windows, но не в Linux.</span><span class="sxs-lookup"><span data-stu-id="1a6da-278">Since Service Fabric on Linux is a preview, there are some features that are supported on Windows, but not on Linux.</span></span> <span data-ttu-id="1a6da-279">Дополнительные сведения см. в статье [Различия между Service Fabric для Linux (предварительная версия) и Windows (общедоступная версия)](service-fabric-linux-windows-differences.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-279">To learn more, read [Differences between Service Fabric on Linux and Windows](service-fabric-linux-windows-differences.md).</span></span>

### <a name="standalone-clusters"></a><span data-ttu-id="1a6da-280">Изолированные кластеры</span><span class="sxs-lookup"><span data-stu-id="1a6da-280">Standalone clusters</span></span>
<span data-ttu-id="1a6da-281">Для Service Fabric предусмотрен пакет установки, с помощью которого можно создать автономный кластер Service Fabric в локальной среде и у любого поставщика облачных служб.</span><span class="sxs-lookup"><span data-stu-id="1a6da-281">Service Fabric provides an installation package for you to create standalone Service Fabric clusters on-premises or on any cloud provider.</span></span> <span data-ttu-id="1a6da-282">Автономные кластеры можно размещать в любом расположении.</span><span class="sxs-lookup"><span data-stu-id="1a6da-282">Standalone clusters give you the freedom to host a cluster wherever you want.</span></span> <span data-ttu-id="1a6da-283">Если данные ограничены нормативными требованиями или вы хотите хранить их локально, вы можете разместить собственный кластер и приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-283">If your data is subject to compliance or regulatory constraints, or you want to keep your data local, you can host your own cluster and applications.</span></span> <span data-ttu-id="1a6da-284">Приложения Service Fabric можно запускать в различных средах размещения без изменений, так что знания о создании приложений сохраняют свою актуальность при переходе из одной среды размещения в другую.</span><span class="sxs-lookup"><span data-stu-id="1a6da-284">Service Fabric applications can run in multiple hosting environments with no changes, so your knowledge of building applications carries over from one hosting environment to another.</span></span> 

[<span data-ttu-id="1a6da-285">Создание первого изолированного кластера Service Fabric</span><span class="sxs-lookup"><span data-stu-id="1a6da-285">Create your first Service Fabric standalone cluster</span></span>](service-fabric-get-started-standalone-cluster.md)

<span data-ttu-id="1a6da-286">Автономные кластеры Linux пока не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="1a6da-286">Linux standalone clusters are not yet supported.</span></span>

### <a name="cluster-security"></a><span data-ttu-id="1a6da-287">Безопасность кластера</span><span class="sxs-lookup"><span data-stu-id="1a6da-287">Cluster security</span></span>
<span data-ttu-id="1a6da-288">Кластеры должны быть защищены для предотвращения подключения к ним неавторизованных пользователей, особенно в тех случаях, когда на кластере выполняются рабочие нагрузки в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="1a6da-288">Clusters must be secured to prevent unauthorized users from connecting to your cluster, especially when it has production workloads running on it.</span></span> <span data-ttu-id="1a6da-289">Существует возможность создания незащищенного кластера, однако стоит учитывать, что это позволит анонимным пользователям подключаться к нему, если конечные точки управления общедоступны через Интернет.</span><span class="sxs-lookup"><span data-stu-id="1a6da-289">Although it is possible to create an unsecured cluster, doing so allows anonymous users to connect to it if management endpoints are exposed to the public internet.</span></span> <span data-ttu-id="1a6da-290">Вы не сможете включить безопасность для незащищенного кластера через некоторое время, так как ее можно включить только в процессе создания кластера.</span><span class="sxs-lookup"><span data-stu-id="1a6da-290">It is not possible to later enable security on an unsecured cluster: cluster security is enabled at cluster creation time.</span></span>

<span data-ttu-id="1a6da-291">Сценарии обеспечения безопасности кластера:</span><span class="sxs-lookup"><span data-stu-id="1a6da-291">The cluster security scenarios are:</span></span>
* <span data-ttu-id="1a6da-292">безопасность обмена данными между узлами;</span><span class="sxs-lookup"><span data-stu-id="1a6da-292">Node-to-node security</span></span>
* <span data-ttu-id="1a6da-293">безопасность обмена данными между клиентами и узлами;</span><span class="sxs-lookup"><span data-stu-id="1a6da-293">Client-to-node security</span></span>
* <span data-ttu-id="1a6da-294">Управление доступом на основе ролей (RBAC)</span><span class="sxs-lookup"><span data-stu-id="1a6da-294">Role-based access control (RBAC)</span></span>

<span data-ttu-id="1a6da-295">Дополнительные сведения см. в статье [Сценарии защиты кластера Service Fabric](service-fabric-cluster-security.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-295">For more information, read [Secure a cluster](service-fabric-cluster-security.md).</span></span>

### <a name="scaling"></a><span data-ttu-id="1a6da-296">Масштабирование</span><span class="sxs-lookup"><span data-stu-id="1a6da-296">Scaling</span></span>
<span data-ttu-id="1a6da-297">Если вы добавите новые узлы в кластер, реплики секции подвергнутся повторной балансировке Service Fabric с учетом этих узлов.</span><span class="sxs-lookup"><span data-stu-id="1a6da-297">If you add new nodes to the cluster, Service Fabric rebalances the partition replicas and instances across the increased number of nodes.</span></span> <span data-ttu-id="1a6da-298">Общая производительность приложения улучшится, а конфликт доступа к памяти уменьшится.</span><span class="sxs-lookup"><span data-stu-id="1a6da-298">Overall application performance improves and contention for access to memory decreases.</span></span> <span data-ttu-id="1a6da-299">При неэффективном использовании узлов в кластере вы можете уменьшить их количество.</span><span class="sxs-lookup"><span data-stu-id="1a6da-299">If the nodes in the cluster are not being used efficiently, you can decrease the number of nodes in the cluster.</span></span> <span data-ttu-id="1a6da-300">Service Fabric снова перераспределит реплики и экземпляры секции по меньшему количеству узлов, чтобы эффективно использовать оборудование на каждом узле.</span><span class="sxs-lookup"><span data-stu-id="1a6da-300">Service Fabric again rebalances the partition replicas and instances across the decreased number of nodes to make better use of the hardware on each node.</span></span> <span data-ttu-id="1a6da-301">Кластеры в Azure можно масштабировать [вручную](service-fabric-cluster-scale-up-down.md) или [программным способом](service-fabric-cluster-programmatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-301">You can scale clusters on Azure either [manually](service-fabric-cluster-scale-up-down.md) or [programmatically](service-fabric-cluster-programmatic-scaling.md).</span></span> <span data-ttu-id="1a6da-302">Автономные кластеры можно масштабировать [вручную](service-fabric-cluster-windows-server-add-remove-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-302">Standalone clusters can be scaled [manually](service-fabric-cluster-windows-server-add-remove-nodes.md).</span></span>

### <a name="cluster-upgrades"></a><span data-ttu-id="1a6da-303">Обновления кластера</span><span class="sxs-lookup"><span data-stu-id="1a6da-303">Cluster upgrades</span></span>
<span data-ttu-id="1a6da-304">Периодически выпускаются новые версии среды выполнения Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-304">Periodically, new versions of the Service Fabric runtime are released.</span></span> <span data-ttu-id="1a6da-305">При запуске среды выполнения или Service Fabric кластер обновляется, так что вы всегда используете [поддерживаемую версию](service-fabric-support.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-305">Perform runtime, or fabric, upgrades on your cluster so that you are always running a [supported version](service-fabric-support.md).</span></span> <span data-ttu-id="1a6da-306">Кроме обновлений Service Fabric вы можете также обновить конфигурацию кластера, например сертификаты или порты приложения.</span><span class="sxs-lookup"><span data-stu-id="1a6da-306">In addition to fabric upgrades, you can also update cluster configuration such as certificates or application ports.</span></span>

<span data-ttu-id="1a6da-307">Кластер Service Fabric представляет собой ресурс, который принадлежит вам, но частично управляется корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="1a6da-307">A Service Fabric cluster is a resource that you own, but is partly managed by Microsoft.</span></span> <span data-ttu-id="1a6da-308">Корпорация Майкрософт отвечает за исправления базовой операционной системы и обновления Service Fabric в кластере.</span><span class="sxs-lookup"><span data-stu-id="1a6da-308">Microsoft is responsible for patching the underlying OS and performing fabric upgrades on your cluster.</span></span> <span data-ttu-id="1a6da-309">Вы можете настроить для кластера автоматическое обновление Service Fabric по мере выпуска новых версий корпорацией Майкрософт или же выбрать нужную версию в списке поддерживаемых.</span><span class="sxs-lookup"><span data-stu-id="1a6da-309">You can set your cluster to receive automatic fabric upgrades, when Microsoft releases a new version, or choose to select a supported fabric version that you want.</span></span> <span data-ttu-id="1a6da-310">Обновления Service Fabric и конфигурации можно настроить с помощью портала Azure или Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="1a6da-310">Fabric and configuration upgrades can be set through the Azure portal or through Resource Manager.</span></span> <span data-ttu-id="1a6da-311">Дополнительные сведения см. в статье [Обновление кластера Azure Service Fabric](service-fabric-cluster-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-311">For more information, read [Upgrade a Service Fabric cluster](service-fabric-cluster-upgrade.md).</span></span> 

<span data-ttu-id="1a6da-312">Автономный кластер является ресурсом, который полностью принадлежит вам.</span><span class="sxs-lookup"><span data-stu-id="1a6da-312">A standalone cluster is a resource that you entirely own.</span></span> <span data-ttu-id="1a6da-313">Вы отвечаете за исправления базовой операционной системы и запуск обновлений Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-313">You are responsible for patching the underlying OS and initiating fabric upgrades.</span></span> <span data-ttu-id="1a6da-314">Если кластер может подключиться к [https://www.microsoft.com/download](https://www.microsoft.com/download), вы можете настроить автоматическое скачивание и подготовку нового пакета среды выполнения Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-314">If your cluster can connect to [https://www.microsoft.com/download](https://www.microsoft.com/download), you can set your cluster to automatically download and provision the new Service Fabric runtime package.</span></span> <span data-ttu-id="1a6da-315">Затем можно инициировать само обновление.</span><span class="sxs-lookup"><span data-stu-id="1a6da-315">You would then initiate the upgrade.</span></span> <span data-ttu-id="1a6da-316">Если же кластер не может получить доступ к [https://www.microsoft.com/download](https://www.microsoft.com/download), вы можете вручную скачать новый пакет среды выполнения, используя компьютер с доступом к Интернету, а затем запустить обновление.</span><span class="sxs-lookup"><span data-stu-id="1a6da-316">If your cluster can't access [https://www.microsoft.com/download](https://www.microsoft.com/download), you can manually download the new runtime package from an internet connected machine and then initiate the upgrade.</span></span> <span data-ttu-id="1a6da-317">Дополнительные сведения см. в статье [Обновление автономного кластера Azure Service Fabric в Windows Server](service-fabric-cluster-upgrade-windows-server.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-317">For more information, read [Upgrade a standalone Service Fabric cluster](service-fabric-cluster-upgrade-windows-server.md).</span></span>

## <a name="health-monitoring"></a><span data-ttu-id="1a6da-318">Мониторинг работоспособности</span><span class="sxs-lookup"><span data-stu-id="1a6da-318">Health monitoring</span></span>
<span data-ttu-id="1a6da-319">В Service Fabric представлена [модель работоспособности](service-fabric-health-introduction.md), которая предназначена для обозначения условий неработоспособности кластеров или приложений в отдельных сущностях (например, узлах кластера и репликах служб).</span><span class="sxs-lookup"><span data-stu-id="1a6da-319">Service Fabric introduces a [health model](service-fabric-health-introduction.md) designed to flag unhealthy cluster and application conditions on specific entities (such as cluster nodes and service replicas).</span></span> <span data-ttu-id="1a6da-320">В этой модели используются информаторы о работоспособности (системные компоненты и устройства наблюдения).</span><span class="sxs-lookup"><span data-stu-id="1a6da-320">The health model uses health reporters (system components and watchdogs).</span></span> <span data-ttu-id="1a6da-321">Их целью является простая и быстрая диагностика и восстановление.</span><span class="sxs-lookup"><span data-stu-id="1a6da-321">The goal is easy and fast diagnosis and repair.</span></span> <span data-ttu-id="1a6da-322">Создатели службы должны предупреждать проблемы работоспособности и [создавать отчеты о состоянии](service-fabric-report-health.md#design-health-reporting).</span><span class="sxs-lookup"><span data-stu-id="1a6da-322">Service writers need to think upfront about health and how to [design health reporting](service-fabric-report-health.md#design-health-reporting).</span></span> <span data-ttu-id="1a6da-323">Любые условия, которые могут повлиять на работоспособность, должны регистрироваться, особенно в случаях, если это может помочь выяснить причину возникновения проблем.</span><span class="sxs-lookup"><span data-stu-id="1a6da-323">Any condition that can impact health should be reported on, especially if it can help flag problems close to the root.</span></span> <span data-ttu-id="1a6da-324">Когда система будет настроена и запущена в рабочей среде, получаемая информация о работоспособности позволит сэкономить время и усилия, требуемые для анализа и отладки.</span><span class="sxs-lookup"><span data-stu-id="1a6da-324">The health information can save time and effort on debugging and investigation once the service is up and running at scale in production.</span></span>

<span data-ttu-id="1a6da-325">Докладчики Service Fabric отслеживают определенные условия.</span><span class="sxs-lookup"><span data-stu-id="1a6da-325">The Service Fabric reporters monitor identified conditions of interest.</span></span> <span data-ttu-id="1a6da-326">Они сообщают об этих условиях на основе своего локального представления.</span><span class="sxs-lookup"><span data-stu-id="1a6da-326">They report on those conditions based on their local view.</span></span> <span data-ttu-id="1a6da-327">В [хранилище данных о работоспособности](service-fabric-health-introduction.md#health-store) собираются данные о работоспособности, отправленные всеми информаторами, что помогает определять глобальную работоспособность сущностей.</span><span class="sxs-lookup"><span data-stu-id="1a6da-327">The [health store](service-fabric-health-introduction.md#health-store) aggregates health data sent by all reporters to determine whether entities are globally healthy.</span></span> <span data-ttu-id="1a6da-328">Модель оптимизирована, она гибкая и простая в использовании.</span><span class="sxs-lookup"><span data-stu-id="1a6da-328">The model is intended to be rich, flexible, and easy to use.</span></span> <span data-ttu-id="1a6da-329">Качество отчетов о работоспособности определяет точность представления данных о работоспособности кластера.</span><span class="sxs-lookup"><span data-stu-id="1a6da-329">The quality of the health reports determines the accuracy of the health view of the cluster.</span></span> <span data-ttu-id="1a6da-330">Ложные положительные результаты, которые неправильно отображают проблемы работоспособности, могут отрицательно повлиять на обновления или другие службы, использующие данные о работоспособности.</span><span class="sxs-lookup"><span data-stu-id="1a6da-330">False positives that wrongly show unhealthy issues can negatively impact upgrades or other services that use health data.</span></span> <span data-ttu-id="1a6da-331">В качестве примеров можно вспомнить службы восстановления и механизмы предупреждений.</span><span class="sxs-lookup"><span data-stu-id="1a6da-331">Examples of such services are repair services and alerting mechanisms.</span></span> <span data-ttu-id="1a6da-332">Поэтому нужно тщательно обдумать, как получить отчеты с отображением только нужных условий.</span><span class="sxs-lookup"><span data-stu-id="1a6da-332">Therefore, some thought is needed to provide reports that capture conditions of interest in the best possible way.</span></span>

<span data-ttu-id="1a6da-333">Отчет можно создать с помощью приведенных ниже компонентов.</span><span class="sxs-lookup"><span data-stu-id="1a6da-333">Reporting can be done from:</span></span>
* <span data-ttu-id="1a6da-334">Отслеживаемая реплика службы Service Fabric или ее экземпляр.</span><span class="sxs-lookup"><span data-stu-id="1a6da-334">The monitored Service Fabric service replica or instance.</span></span>
* <span data-ttu-id="1a6da-335">Внутренние устройства наблюдения, развернутые как служба Service Fabric (например, служба без отслеживания состояния Service Fabric, которая проверяет условия и формирует отчеты).</span><span class="sxs-lookup"><span data-stu-id="1a6da-335">Internal watchdogs deployed as a Service Fabric service (for example, a Service Fabric stateless service that monitors conditions and issues reports).</span></span> <span data-ttu-id="1a6da-336">Модули наблюдения можно развернуть на всех узлах или сгруппировать с отслеживаемой службой.</span><span class="sxs-lookup"><span data-stu-id="1a6da-336">The watchdogs can be deployed on all nodes or can be affinitized to the monitored service.</span></span>
* <span data-ttu-id="1a6da-337">Внутренние устройства наблюдения, которые запускаются на узлах Service Fabric, но не реализованы как службы Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-337">Internal watchdogs that run on the Service Fabric nodes but are not implemented as Service Fabric services.</span></span>
* <span data-ttu-id="1a6da-338">Внешние устройства наблюдения, которые зондируют ресурс за пределами кластера Service Fabric (например, служба отслеживания Gomez и другие).</span><span class="sxs-lookup"><span data-stu-id="1a6da-338">External watchdogs that probe the resource from outside the Service Fabric cluster (for example, monitoring service like Gomez).</span></span>

<span data-ttu-id="1a6da-339">Готовые к использованию компоненты Service Fabric поддерживают создание отчетов о работоспособности по всем сущностям в кластере.</span><span class="sxs-lookup"><span data-stu-id="1a6da-339">Out of the box, Service Fabric components report health on all entities in the cluster.</span></span> <span data-ttu-id="1a6da-340">[В отчетах о работоспособности системы](service-fabric-understand-and-troubleshoot-with-system-health-reports.md) отражаются показатели функциональности кластеров и приложений, а также отмечаются проблемы с работоспособностью.</span><span class="sxs-lookup"><span data-stu-id="1a6da-340">[System health reports](service-fabric-understand-and-troubleshoot-with-system-health-reports.md) provide visibility into cluster and application functionality and flag issues through health.</span></span> <span data-ttu-id="1a6da-341">Что касается приложений и служб, отчеты о работоспособности системы проверяют правильность реализации и поведения сущностей на уровне среды выполнения Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="1a6da-341">For applications and services, system health reports verify that entities are implemented and are behaving correctly from the perspective of the Service Fabric runtime.</span></span> <span data-ttu-id="1a6da-342">Отчеты не обеспечивают отслеживание работоспособности бизнес-логики службы или обнаружение зависших процессов.</span><span class="sxs-lookup"><span data-stu-id="1a6da-342">The reports do not provide any health monitoring of the business logic of the service or detect hung processes.</span></span> <span data-ttu-id="1a6da-343">Чтобы добавить сведения о работоспособности конкретно для логики вашей службы, ознакомьтесь со статьей о [добавлении настраиваемых отчетов о работоспособности Service Fabric](service-fabric-report-health.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-343">To add health information specific to your service's logic, [implement custom health reporting](service-fabric-report-health.md) in your services.</span></span>

<span data-ttu-id="1a6da-344">Service Fabric предоставляет несколько способов [просмотра отчетов о работоспособности](service-fabric-view-entities-aggregated-health.md), объединенных в хранилище данных о работоспособности.</span><span class="sxs-lookup"><span data-stu-id="1a6da-344">Service Fabric provides multiple ways to [view health reports](service-fabric-view-entities-aggregated-health.md) aggregated in the health store:</span></span>
* <span data-ttu-id="1a6da-345">[Service Fabric Explorer](service-fabric-visualizing-your-cluster.md) или другие средства визуализации;</span><span class="sxs-lookup"><span data-stu-id="1a6da-345">[Service Fabric Explorer](service-fabric-visualizing-your-cluster.md) or other visualization tools.</span></span>
* <span data-ttu-id="1a6da-346">запросы о работоспособности (с помощью [PowerShell](/powershell/module/ServiceFabric/), [API-интерфейсов FabricClient C#](/api/system.fabric.fabricclient.healthclient), [API-интерфейсов FabricClient Java](/java/api/system.fabric._health_client) или [интерфейсов REST API](/rest/api/servicefabric));</span><span class="sxs-lookup"><span data-stu-id="1a6da-346">Health queries (through [PowerShell](/powershell/module/ServiceFabric/), the [C# FabricClient APIs](/api/system.fabric.fabricclient.healthclient) and [Java FabricClient APIs](/java/api/system.fabric._health_client), or [REST APIs](/rest/api/servicefabric)).</span></span>
* <span data-ttu-id="1a6da-347">общие запросы, возвращающие перечень сущностей, среди свойств которых есть работоспособность (с помощью PowerShell, API или REST).</span><span class="sxs-lookup"><span data-stu-id="1a6da-347">General queries that return a list of entities that have health as one of the properties (through PowerShell, the API, or REST).</span></span>

<span data-ttu-id="1a6da-348">В следующем видеоролике Microsoft Virtual Academy рассматривается модель работоспособности Service Fabric и принципы ее использования: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tevZw56yC_1906218965">
<img src="./media/service-fabric-content-roadmap/HealthIntroVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="1a6da-348">The following Microsoft Virtual Academy video describes the Service Fabric health model and how it's used: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=tevZw56yC_1906218965">
<img src="./media/service-fabric-content-roadmap/HealthIntroVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="next-steps"></a><span data-ttu-id="1a6da-349">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="1a6da-349">Next steps</span></span>
* <span data-ttu-id="1a6da-350">Узнайте, как создать [кластер в Azure](service-fabric-cluster-creation-via-portal.md) или [автономный кластер в Windows](service-fabric-cluster-creation-for-windows-server.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-350">Learn how to create a [cluster in Azure](service-fabric-cluster-creation-via-portal.md) or a [standalone cluster on Windows](service-fabric-cluster-creation-for-windows-server.md).</span></span>
* <span data-ttu-id="1a6da-351">Попробуйте создать службу с помощью модели программирования [Reliable Services](service-fabric-reliable-services-quick-start.md) или [Reliable Actors](service-fabric-reliable-actors-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-351">Try creating a service using the [Reliable Services](service-fabric-reliable-services-quick-start.md) or [Reliable Actors](service-fabric-reliable-actors-get-started.md) programming models.</span></span>
* <span data-ttu-id="1a6da-352">Узнайте, [как выполнять миграцию из облачных служб](service-fabric-cloud-services-migration-differences.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-352">Learn how to [migrate from Cloud Services](service-fabric-cloud-services-migration-differences.md).</span></span>
* <span data-ttu-id="1a6da-353">Научитесь [отслеживать и диагностировать состояние служб](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-353">Learn to [monitor and diagnose services](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md).</span></span> 
* <span data-ttu-id="1a6da-354">Узнайте [о тестировании приложений и служб](service-fabric-testability-overview.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-354">Learn to [test your apps and services](service-fabric-testability-overview.md).</span></span>
* <span data-ttu-id="1a6da-355">Ознакомьтесь со сведениями [об оркестрации ресурсов кластера и управлении ими](service-fabric-cluster-resource-manager-introduction.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-355">Learn to [manage and orchestrate cluster resources](service-fabric-cluster-resource-manager-introduction.md).</span></span>
* <span data-ttu-id="1a6da-356">Просмотрите [примеры кода для Service Fabric](http://aka.ms/servicefabricsamples).</span><span class="sxs-lookup"><span data-stu-id="1a6da-356">Look through the [Service Fabric samples](http://aka.ms/servicefabricsamples).</span></span>
* <span data-ttu-id="1a6da-357">Узнайте о [вариантах поддержки Service Fabric](service-fabric-support.md).</span><span class="sxs-lookup"><span data-stu-id="1a6da-357">Learn about [Service Fabric support options](service-fabric-support.md).</span></span>
* <span data-ttu-id="1a6da-358">Просматривайте статьи и обновления в [блоге группы разработчиков](https://blogs.msdn.microsoft.com/azureservicefabric/).</span><span class="sxs-lookup"><span data-stu-id="1a6da-358">Read the [team blog](https://blogs.msdn.microsoft.com/azureservicefabric/) for articles and announcements.</span></span>


[cluster-application-instances]: media/service-fabric-content-roadmap/cluster-application-instances.png
[cluster-imagestore-apptypes]: ./media/service-fabric-content-roadmap/cluster-imagestore-apptypes.png
