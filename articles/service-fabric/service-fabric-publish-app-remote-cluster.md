---
title: "Публикация приложения в удаленный кластер с Visual Studio | Документация Майкрософт"
description: "Узнайте, как опубликовать приложение в удаленный кластер Service Fabric с помощью Visual Studio."
services: service-fabric
documentationcenter: na
author: cawams
manager: timlt
editor: 
ms.assetid: faecd892-eb54-4d9c-8023-c67442afb8e8
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 07/29/2016
ms.author: cawa
ms.openlocfilehash: c440c520d84fc503ff9e705555449e92555d4721
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="deploy-and-remove-applications-using-visual-studio"></a>Развертывание и удаление приложений с помощью Visual Studio
> [!div class="op_single_selector"]
> * [PowerShell](service-fabric-deploy-remove-applications.md)
> * [Visual Studio](service-fabric-publish-app-remote-cluster.md)
> * [API-интерфейсы FabricClient](service-fabric-deploy-remove-applications-fabricclient.md)
> 
> 

<br/>

Расширение Azure Service Fabric для Visual Studio предоставляет простой, воспроизводимый и реализуемый с помощью сценария способ публикации приложения в кластер Service Fabric.

## <a name="the-artifacts-required-for-publishing"></a>Артефакты, необходимые для публикации
### <a name="deploy-fabricapplicationps1"></a>Deploy-FabricApplication.ps1
Это скрипт PowerShell, который использует путь к профилю публикации в качестве параметра для публикации приложений Service Fabric. Так как этот сценарий является частью приложения, в него можно вносить изменения, необходимые для приложения.

### <a name="publish-profiles"></a>Профили публикации
В папке **PublishProfiles** проекта приложения Service Fabric находятся файлы XML, содержащие важную информацию для публикации приложения, такую как:

* параметры подключения к кластеру Service Fabric;
* путь к файлу параметров приложения;
* параметры обновления.

По умолчанию приложение содержит три профиля публикации: Local.1Node.xml, Local.5Node.xml и Cloud.xml. Можно добавить дополнительные профили, скопировав и вставив один из файлов по умолчанию.

### <a name="application-parameter-files"></a>Файлы параметров приложений
Папка **ApplicationParameters** проекта приложения Service Fabric содержит XML-файлы с определяемыми пользователем значениями параметров манифеста приложения. Файлы манифеста приложения могут быть параметризованы, так что можно использовать различные значения для параметров развертывания. Дополнительные сведения о параметризации приложения см. в статье [Управление несколькими средами в Service Fabric](service-fabric-manage-multiple-environment-app-configuration.md).

> [!NOTE]
> Для служб субъектов перед внесением изменений в файл в редакторе или с помощью диалогового окна публикации проекта необходимо сначала выполнить сборку проекта. Это вызвано тем, что во время сборки будет создана часть файлов манифеста.

## <a name="to-publish-an-application-using-the-publish-service-fabric-application-dialog-box"></a>Публикация приложения с помощью диалогового окна "Публикация приложения Service Fabric"
Следующие шаги демонстрируют, как опубликовать приложение с помощью диалогового окна **Публикация приложения Service Fabric**, предоставляемого инструментами Service Fabric Visual Studio.

1. В контекстном меню проекта приложения Service Fabric выберите пункт **Опубликовать**, чтобы открыть диалоговое окно **Публикация приложения Service Fabric**.
   
    ![Диалоговое окно **Публикация приложения Service Fabric**][0]
   
    В файле, выбранном в раскрывающемся списке **Целевой профиль**, сохраняются все параметры, за исключением параметра **Версии манифеста**. Можно повторно использовать существующий профиль или создать новый, выбрав в раскрывающемся списке **Целевой профиль** пункт **<Управление профилями>**. При выборе профиля публикации его содержимое отображается в соответствующих полях диалогового окна. Чтобы сохранить изменения в любое время, щелкните ссылку **Сохранить профиль** .    
2. В разделе **Конечная точка подключения** можно указать локальную или удаленную конечную точку публикации кластера Service Fabric. Чтобы добавить или изменить конечную точку подключения, щелкните раскрывающийся список **Конечная точка подключения** . В списке будут показаны конечные точки подключения кластера Service Fabric, доступные для публикации в соответствии с вашими подписками Azure. Обратите внимание, что если вы еще не вошли в Visual Studio, вам будет предложено сделать это.
   
    В диалоговом окне выбора кластера можно выбрать одну из доступных подписок и один из доступных кластеров из набора.
   
    ![Диалоговое окно **Выбор кластера Service Fabric**][1]
   
   > [!NOTE]
   > Если требуется выполнить публикацию в произвольную конечную точку (например, в общий кластер), см. раздел **Публикация в конечную точку произвольного кластера** ниже.
   > 
   > 
   
    После выбора конечной точки Visual Studio проверит подключение к выбранному кластеру Service Fabric. Если кластер не защищен, Visual Studio можно подключиться к нему немедленно. Если же кластер защищен, для продолжения потребуется установить сертификат на локальном компьютере. Дополнительные сведения см. в статье о [настройке безопасных подключений](service-fabric-visualstudio-configure-secure-connections.md). Когда все будет готово, нажмите кнопку **ОК**. Выбранный кластер появится в диалоговом окне **Публикация приложения Service Fabric**.
3. Файл параметров приложения можно выбрать из раскрывающегося списка **Application Parameter File** (Файл параметров приложения). Файл параметров приложения содержит значения параметров, указанные пользователем в файле манифеста приложения. Чтобы добавить или изменить параметр, нажмите кнопку **Изменить** . Введите или измените значение параметра в сетке **Параметры** . Когда все будет готово, нажмите кнопку **Сохранить** .
   
    ![Диалоговое окно **Изменение параметров**][2]
4. Флажок **Обновить приложение** позволяет указать, подразумевает ли эта публикация обновление. Действия обновления отличаются от обыкновенных действий публикации. Список различий см. в статье [Обновление приложения Service Fabric](service-fabric-application-upgrade.md). Чтобы настроить параметры обновления, щелкните ссылку **Настроить параметры обновления**. Откроется редактор параметров обновления. Дополнительные сведения о параметрах обновления см. в статье [Настройка обновления приложения Service Fabric](service-fabric-visualstudio-configure-upgrade.md).
5. Нажмите кнопку **Версии манифеста**, чтобы открыть диалоговое окно **Изменение версий**. Чтобы обновление произошло, необходимо обновить версии приложения и службы. Чтобы узнать, как версии манифеста службы и приложения влияют на процесс обновления, см. [руководство по обновлению приложений Service Fabric](service-fabric-application-upgrade-tutorial.md).
   
    ![Диалоговое окно **Изменение версий**][3]
   
    Если версии приложения и службы используют семантическое управление версиями, например 1.0.0 или числовые значения в формате 1.0.0.0, выберите параметр **Автоматически обновлять версии приложения и службы** . При выборе этого параметра номера версий приложения и службы автоматически обновляются при каждом обновлении кода, конфигурации или версии пакета данных. При необходимости изменить версии вручную снимите этот флажок, чтобы отключить эту функцию.
   
   > [!NOTE]
   > Для всех элементов пакета, которые появляются в проекте субъекта, сначала необходимо собрать проект, чтобы создать записи в файлах манифеста службы.
   > 
   > 
6. Указав все необходимые параметры, нажмите кнопку **Опубликовать** , чтобы опубликовать приложение в выбранный кластер Service Fabric. Указанные параметры применяются к процессу публикации.

## <a name="publish-to-an-arbitrary-cluster-endpoint-including-party-clusters"></a>Публикация в конечную точку произвольного кластера (включая общие кластеры)
Возможности публикации Visual Studio оптимизированы для публикации в удаленные кластеры, связанные с одной из подписок Azure. Тем не менее можно выполнить публикацию в произвольную конечную точку (например, в общие кластеры Service Fabric). Для этого нужно напрямую внести изменения в файл XML профиля публикации. Как было сказано ранее, по умолчанию предоставляются три профиля публикации (**Local.1Node.xml**, **Local.5Node.xml** и **Cloud.xml**), но можно также создать дополнительные профили для различных сред. Например, может понадобиться создать профиль для публикации в общие кластеры, которые условно называются **Party.xml**.

При подключении к незащищенному кластеру все, что требуется, — это конечная точка подключения к кластеру, например `partycluster1.eastus.cloudapp.azure.com:19000`. В данном случае конечная точка подключения в профиле публикации будет выглядеть приблизительно так:

```XML
<ClusterConnectionParameters ConnectionEndpoint="partycluster1.eastus.cloudapp.azure.com:19000" />
```

  При подключении к защищенному кластеру потребуется также предоставить данные сертификата клиента из локального хранилища, которые используются для проверки подлинности. Дополнительные сведения см. в статье [Настройка безопасных подключений к кластеру Service Fabric из Visual Studio](service-fabric-visualstudio-configure-secure-connections.md).

  После настройки профиля публикации его можно указать в диалоговом окне публикации, как показано ниже.

  ![Новый профиль публикации в диалоговом окне публикации][4]

  Обратите внимание, что в этом случае новый профиль публикации указывает на один из файлов параметров приложения по умолчанию. Это целесообразно, если требуется опубликовать одно и то же приложение в нескольких средах. В то же время в случаях, когда нужны различные конфигурации для каждой среды публикации, имеет смысл создать соответствующий файл параметров приложения.

## <a name="next-steps"></a>Дальнейшие действия
Чтобы узнать, как автоматизировать процесс публикации в среде непрерывной интеграции, см. статью [Настройка непрерывной интеграции для приложения Service Fabric с использованием Visual Studio Team Services](service-fabric-set-up-continuous-integration.md).

[0]: ./media/service-fabric-publish-app-remote-cluster/PublishDialog.png
[1]: ./media/service-fabric-publish-app-remote-cluster/SelectCluster.png
[2]: ./media/service-fabric-publish-app-remote-cluster/EditParams.png
[3]: ./media/service-fabric-publish-app-remote-cluster/EditVersions.png
[4]: ./media/service-fabric-publish-app-remote-cluster/publish-to-party-cluster.png
