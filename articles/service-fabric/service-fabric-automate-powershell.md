---
title: "Управление приложениями Azure Service Fabric aaaAutomate | Документы Microsoft"
description: "Развертывание, обновление, тестирование и удаление приложений Service Fabric с помощью PowerShell."
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: a64a39dbee26be8ac15fee767a90fd06bfe4b896
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="automate-hello-application-lifecycle-using-powershell"></a><span data-ttu-id="ab870-103">Автоматизация жизненного цикла приложения hello, с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="ab870-103">Automate hello application lifecycle using PowerShell</span></span>
<span data-ttu-id="ab870-104">Многие аспекты hello [жизненный цикл приложений фабрики служб](service-fabric-application-lifecycle.md) можно автоматизировать.</span><span class="sxs-lookup"><span data-stu-id="ab870-104">Many aspects of hello [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="ab870-105">В этой статье показано, как toouse PowerShell tooautomate общие задачи для развертывания, обновления, удаления и тестирование приложений Azure Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ab870-105">This article shows how toouse PowerShell tooautomate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="ab870-106">Также доступны управляемые API и API HTTP для управления приложениями.</span><span class="sxs-lookup"><span data-stu-id="ab870-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="ab870-107">Дополнительные сведения см. в статье [Жизненный цикл приложения Service Fabric](service-fabric-application-lifecycle.md).</span><span class="sxs-lookup"><span data-stu-id="ab870-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="ab870-108">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="ab870-108">Prerequisites</span></span>
<span data-ttu-id="ab870-109">Прежде чем перемещать toohello задач в статье hello, нужно убедиться, что:</span><span class="sxs-lookup"><span data-stu-id="ab870-109">Before you move on toohello tasks in hello article, be sure to:</span></span>

* <span data-ttu-id="ab870-110">Ознакомьтесь с основными понятиями Service Fabric hello, описанной в [Технический обзор Service Fabric](service-fabric-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ab870-110">Get familiar with hello Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="ab870-111">[Установка среды выполнения hello, пакет SDK и средства](service-fabric-get-started.md), которая также устанавливается hello **ServiceFabric** модуля PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ab870-111">[Install hello runtime, SDK, and tools](service-fabric-get-started.md), which also installs hello **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="ab870-112">[Включение сценариев PowerShell](service-fabric-get-started.md#enable-powershell-script-execution)</span><span class="sxs-lookup"><span data-stu-id="ab870-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="ab870-113">Запустите локальный кластер.</span><span class="sxs-lookup"><span data-stu-id="ab870-113">Start a local cluster.</span></span>  <span data-ttu-id="ab870-114">Запустите нового окна PowerShell с правами администратора и запустите сценарий установки кластера hello в папки hello SDK:`& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="ab870-114">Launch a new PowerShell window as an administrator and then run hello cluster setup script from hello SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="ab870-115">Перед выполнением любых команд PowerShell в этой статье, сначала подключиться toohello локального кластера Service Fabric с помощью [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps):`Connect-ServiceFabricCluster localhost:19000`</span><span class="sxs-lookup"><span data-stu-id="ab870-115">Before you run any PowerShell commands in this article, first connect toohello local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="ab870-116">следующие задачи Hello требуют toodeploy пакета приложения v1 и v2 пакет приложения для обновления.</span><span class="sxs-lookup"><span data-stu-id="ab870-116">hello following tasks require a v1 application package toodeploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="ab870-117">Загрузите hello [ **WordCount** образец приложения](http://aka.ms/servicefabricsamples) (находится в образцы Приступая к работе hello).</span><span class="sxs-lookup"><span data-stu-id="ab870-117">Download hello [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in hello Getting Started samples).</span></span> <span data-ttu-id="ab870-118">Выполните сборку и упаковку приложения hello в Visual Studio (щелкните правой кнопкой мыши **WordCount** в обозревателе решений и выберите **пакета**).</span><span class="sxs-lookup"><span data-stu-id="ab870-118">Build and package hello application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="ab870-119">Копировать пакет v1 hello в `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` слишком`C:\Temp\WordCount`.</span><span class="sxs-lookup"><span data-stu-id="ab870-119">Copy hello v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` too`C:\Temp\WordCount`.</span></span> <span data-ttu-id="ab870-120">Копировать `C:\Temp\WordCount` слишком`C:\Temp\WordCountV2`, создание пакета приложения hello v2 для обновления.</span><span class="sxs-lookup"><span data-stu-id="ab870-120">Copy `C:\Temp\WordCount` too`C:\Temp\WordCountV2`, creating hello v2 application package for upgrade.</span></span> <span data-ttu-id="ab870-121">Откройте `C:\Temp\WordCountV2\ApplicationManifest.xml` в текстовом редакторе.</span><span class="sxs-lookup"><span data-stu-id="ab870-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="ab870-122">В hello **ApplicationManifest** элемент, изменение hello **ApplicationTypeVersion** слишком атрибут из «1.0.0» «2.0.0» номера версии приложения hello tooupdate.</span><span class="sxs-lookup"><span data-stu-id="ab870-122">In hello **ApplicationManifest** element, change hello **ApplicationTypeVersion** attribute from "1.0.0" too"2.0.0" tooupdate hello app version number.</span></span> <span data-ttu-id="ab870-123">Сохраните файл ApplicationManifest.xml hello изменен.</span><span class="sxs-lookup"><span data-stu-id="ab870-123">Save hello changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="ab870-124">Задача: развернуть приложение Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab870-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="ab870-125">После построения и упаковки приложения hello (или загружен пакет приложения hello), вы можете развернуть приложение hello в локальный кластер Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ab870-125">After you've built and packaged hello application (or downloaded hello application package), you can deploy hello application into a local Service Fabric cluster.</span></span> <span data-ttu-id="ab870-126">Развертывание производится отправка пакета приложения hello, регистрация типа приложения hello и создание экземпляра приложения hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-126">Deployment involves uploading hello application package, registering hello application type, and creating hello application instance.</span></span> <span data-ttu-id="ab870-127">Используйте инструкции hello в этот раздел toodeploy нового кластера tooa приложения.</span><span class="sxs-lookup"><span data-stu-id="ab870-127">Use hello instructions in this section toodeploy a new application tooa cluster.</span></span>

### <a name="step-1-upload-hello-application-package"></a><span data-ttu-id="ab870-128">Шаг 1: Отправка пакета приложения hello</span><span class="sxs-lookup"><span data-stu-id="ab870-128">Step 1: Upload hello application package</span></span>
<span data-ttu-id="ab870-129">Отправка toohello пакета приложения hello хранилища образов помещает его в расположение доступного toointernal Service Fabric компонентов.</span><span class="sxs-lookup"><span data-stu-id="ab870-129">Uploading hello application package toohello image store puts it in a location accessible toointernal Service Fabric components.</span></span>  <span data-ttu-id="ab870-130">пакет приложения Hello содержит hello необходимой манифест приложения, манифесты службы и кода, конфигурации и приложение hello toocreate пакетов данных и экземпляров службы.</span><span class="sxs-lookup"><span data-stu-id="ab870-130">hello application package contains hello necessary application manifest, service manifests, and code, configuration, and data package(s) toocreate hello application and service instances.</span></span> <span data-ttu-id="ab870-131">Пакет приложения hello tooverify локально, используйте hello [ServiceFabricApplicationPackage тест](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) командлета.</span><span class="sxs-lookup"><span data-stu-id="ab870-131">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="ab870-132">Hello [ServiceFabricApplicationPackage копирования](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) команда передачи hello пакета.</span><span class="sxs-lookup"><span data-stu-id="ab870-132">hello [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads hello package.</span></span> <span data-ttu-id="ab870-133">Например:</span><span class="sxs-lookup"><span data-stu-id="ab870-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-hello-application-type"></a><span data-ttu-id="ab870-134">Шаг 2: Регистрация типа приложения hello</span><span class="sxs-lookup"><span data-stu-id="ab870-134">Step 2: Register hello application type</span></span>
<span data-ttu-id="ab870-135">Регистрация пакета приложения hello делает тип приложения hello и версии, объявленные в манифесте приложения hello доступны для использования.</span><span class="sxs-lookup"><span data-stu-id="ab870-135">Registering hello application package makes hello application type and version declared in hello application manifest available for use.</span></span> <span data-ttu-id="ab870-136">Hello считыванием переданный на первом шаге hello пакет hello, проверьте пакет hello (эквивалент toorunning [ServiceFabricApplicationPackage тест](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) локально), обрабатывать hello содержимое пакета и скопируйте tooan hello обработки пакета расположение внутренней системы.</span><span class="sxs-lookup"><span data-stu-id="ab870-136">hello system reads hello package uploaded in hello step 1, verify hello package (equivalent toorunning [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process hello package contents, and copy hello processed package tooan internal system location.</span></span>  <span data-ttu-id="ab870-137">Запустите hello [ServiceFabricApplicationType регистра](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) командлета:</span><span class="sxs-lookup"><span data-stu-id="ab870-137">Run hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="ab870-138">все типы приложения hello, зарегистрированные в кластере hello, запустите hello toosee [Get ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) командлета:</span><span class="sxs-lookup"><span data-stu-id="ab870-138">toosee all hello application types registered in hello cluster, run hello [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-hello-application-instance"></a><span data-ttu-id="ab870-139">Шаг 3: Создание экземпляра приложения hello</span><span class="sxs-lookup"><span data-stu-id="ab870-139">Step 3: Create hello application instance</span></span>
<span data-ttu-id="ab870-140">Приложение может быть создан с помощью любой версии типа приложения, который успешно зарегистрирован с помощью hello [New ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) команды.</span><span class="sxs-lookup"><span data-stu-id="ab870-140">An application can be instantiated by using any application type version that has been registered successfully by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="ab870-141">Имя каждого приложения Hello объявляется во время развертывания и должно начинаться с hello **структуры:** схемы и быть уникальными для каждого экземпляра приложения.</span><span class="sxs-lookup"><span data-stu-id="ab870-141">hello name of each application is declared at deploy time and must start with hello **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="ab870-142">Hello имя типа приложения и версии типа приложения, объявляются в hello **ApplicationManifest.xml** файла пакета приложения hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-142">hello application type name and application type version are declared in hello **ApplicationManifest.xml** file of hello application package.</span></span> <span data-ttu-id="ab870-143">Если все службы по умолчанию были определены в манифесте приложения hello объекта тип целевого приложения hello, те, создаются в данный момент.</span><span class="sxs-lookup"><span data-stu-id="ab870-143">If any default services were defined in hello application manifest of hello target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="ab870-144">Hello [Get ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) команда перечисляет все экземпляры приложения, которые успешно созданы, а также их общее состояние.</span><span class="sxs-lookup"><span data-stu-id="ab870-144">hello [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="ab870-145">Hello [Get ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) команда выводит список всех экземпляров службы hello, которые успешно созданы в экземпляре данного приложения.</span><span class="sxs-lookup"><span data-stu-id="ab870-145">hello [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of hello service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="ab870-146">Этот список содержит службы по умолчанию (при наличии).</span><span class="sxs-lookup"><span data-stu-id="ab870-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="ab870-147">Задача: обновить приложение Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab870-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="ab870-148">Развернутое ранее приложение Service Fabric можно обновить с помощью обновленного пакета приложения.</span><span class="sxs-lookup"><span data-stu-id="ab870-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="ab870-149">Эта задача обновляет приложение hello WordCount, которое было развернуто в «задач: развертывание приложения Service Fabric.»</span><span class="sxs-lookup"><span data-stu-id="ab870-149">This task upgrades hello WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="ab870-150">Дополнительные сведения см. в статье [Обновление приложения Service Fabric](service-fabric-application-upgrade.md).</span><span class="sxs-lookup"><span data-stu-id="ab870-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="ab870-151">простой tookeep действия в этом примере только номер версии приложения hello был обновлен в пакете приложения hello WordCountV2, созданном в предварительных требованиях для hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-151">tookeep things simple for this example, only hello application version number was updated in hello WordCountV2 application package created in hello prerequisites.</span></span> <span data-ttu-id="ab870-152">Более реалистичном случае будет включать в себя обновление службы файлов кода, конфигурации и данных, а затем перестроения и упаковка приложения hello с номерами обновленной версии.</span><span class="sxs-lookup"><span data-stu-id="ab870-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging hello application with updated version numbers.</span></span>  

### <a name="step-1-upload-hello-updated-application-package"></a><span data-ttu-id="ab870-153">Шаг 1: Отправка пакета обновленное приложение hello</span><span class="sxs-lookup"><span data-stu-id="ab870-153">Step 1: Upload hello updated application package</span></span>
<span data-ttu-id="ab870-154">Hello приложения WordCount v1 — Готово toobe обновлены.</span><span class="sxs-lookup"><span data-stu-id="ab870-154">hello WordCount v1 application is ready toobe upgraded.</span></span> <span data-ttu-id="ab870-155">Если открыть окно PowerShell от имени администратора, а также введите [ **Get ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), вы видите развертывания этой версии 1.0.0 hello тип приложения WordCount.</span><span class="sxs-lookup"><span data-stu-id="ab870-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of hello WordCount application type is deployed.</span></span>  

<span data-ttu-id="ab870-156">Теперь hello копирования обновлен приложения пакета toohello Service Fabric образа хранилища (места хранения пакетов приложения hello, Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="ab870-156">Now copy hello updated application package toohello Service Fabric image store (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="ab870-157">Здравствуйте, параметр **ApplicationPackagePathInImageStore** информирует о том, где можно найти пакет приложения hello Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="ab870-157">hello parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="ab870-158">Здравствуйте, следующая команда копирует hello пакета приложения слишком**WordCountV2** в хранилище образов hello:</span><span class="sxs-lookup"><span data-stu-id="ab870-158">hello following command copies hello application package too**WordCountV2** in hello image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-hello-updated-application-type"></a><span data-ttu-id="ab870-159">Шаг 2: Регистрация hello обновить тип приложения</span><span class="sxs-lookup"><span data-stu-id="ab870-159">Step 2: Register hello updated application type</span></span>
<span data-ttu-id="ab870-160">Hello следующим шагом является tooregister hello новую версию приложения hello в Service Fabric, которое может выполняться с помощью hello [ServiceFabricApplicationType регистра](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) командлета:</span><span class="sxs-lookup"><span data-stu-id="ab870-160">hello next step is tooregister hello new version of hello application with Service Fabric, which can be performed by using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-hello-upgrade"></a><span data-ttu-id="ab870-161">Шаг 3: Запуск обновления hello</span><span class="sxs-lookup"><span data-stu-id="ab870-161">Step 3: Start hello upgrade</span></span>
<span data-ttu-id="ab870-162">Различные параметры обновления, время ожидания и критерия работоспособности может быть применен tooapplication обновления.</span><span class="sxs-lookup"><span data-stu-id="ab870-162">Various upgrade parameters, timeouts, and health criteria can be applied tooapplication upgrades.</span></span> <span data-ttu-id="ab870-163">Прочтите hello [параметров обновления приложения](service-fabric-application-upgrade-parameters.md) и [процесс обновления](service-fabric-application-upgrade.md) toolearn дополнительные документы.</span><span class="sxs-lookup"><span data-stu-id="ab870-163">Read through hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents toolearn more.</span></span> <span data-ttu-id="ab870-164">Все службы и экземпляры должны быть *работоспособное* после обновления hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-164">All services and instances should be *healthy* after hello upgrade.</span></span>  <span data-ttu-id="ab870-165">Набор hello **HealthCheckStableDuration** too60 секунд (что hello службы находятся в работоспособном состоянии для по крайней мере 20 секунд до toohello происходит обновление hello следующему домену обновления).</span><span class="sxs-lookup"><span data-stu-id="ab870-165">Set hello **HealthCheckStableDuration** too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next upgrade domain).</span></span>  <span data-ttu-id="ab870-166">Также набор hello **UpgradeDomainTimeout** too1200 секунд и hello **UpgradeTimeout** too3000 секунд.</span><span class="sxs-lookup"><span data-stu-id="ab870-166">Also set hello **UpgradeDomainTimeout** too1200 seconds and hello **UpgradeTimeout** too3000 seconds.</span></span> <span data-ttu-id="ab870-167">Задайте hello **UpgradeFailureAction** слишком**отката**, какие запросы, которые Service Fabric откат hello предыдущей версии приложения toohello при возникновении ошибок во время обновления.</span><span class="sxs-lookup"><span data-stu-id="ab870-167">Finally, set hello **UpgradeFailureAction** too**rollback**, which requests that Service Fabric rolls back hello application toohello previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="ab870-168">Теперь вы можете запустить обновление приложения hello, с помощью hello [ServiceFabricApplicationUpgrade начала](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) командлета:</span><span class="sxs-lookup"><span data-stu-id="ab870-168">You can now start hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="ab870-169">Обратите внимание, что имя приложения hello hello таким же как hello ранее развернутое имя приложения версии 1.0.0 (fabric: / WordCount).</span><span class="sxs-lookup"><span data-stu-id="ab870-169">Note that hello application name is hello same as hello previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="ab870-170">Service Fabric использует это имя tooidentify, какое приложение обновляется начало.</span><span class="sxs-lookup"><span data-stu-id="ab870-170">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="ab870-171">Если задать слишком короткий toobe тайм-ауты hello, могут возникать сообщение об ошибке времени ожидания hello, состояния проблемы.</span><span class="sxs-lookup"><span data-stu-id="ab870-171">If you set hello time-outs toobe too short, you might encounter a time-out failure message that states hello problem.</span></span> <span data-ttu-id="ab870-172">См. слишком[Устранение неполадок обновлений приложений](service-fabric-application-upgrade-troubleshooting.md), или увеличьте время ожидания hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-172">Refer too[Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase hello time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="ab870-173">Шаг 4. Проверка хода обновления</span><span class="sxs-lookup"><span data-stu-id="ab870-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="ab870-174">Можно отслеживать ход выполнения обновления приложения с помощью [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), или с помощью hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) командлета:</span><span class="sxs-lookup"><span data-stu-id="ab870-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="ab870-175">Через несколько минут hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) командлет показывает, что все домены обновления были обновлены («завершено»).</span><span class="sxs-lookup"><span data-stu-id="ab870-175">In a few minutes, hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="ab870-176">Задача: протестировать приложение Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab870-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="ab870-177">toowrite службы высокого качества, разработчики должны toobe может tooinduce ненадежной инфраструктуры ошибок tootest hello стабильность их службы.</span><span class="sxs-lookup"><span data-stu-id="ab870-177">toowrite high-quality services, developers need toobe able tooinduce unreliable infrastructure faults tootest hello stability of their services.</span></span> <span data-ttu-id="ab870-178">Service Fabric предоставляет разработчикам hello возможность tooinduce сбоя действия и проверки служб в присутствии hello сбоев с помощью hello сценариев тестирования хаоса и переход на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="ab870-178">Service Fabric gives developers hello ability tooinduce fault actions and test services in hello presence of failures by using hello chaos and failover test scenarios.</span></span>  <span data-ttu-id="ab870-179">Прочтите [toohello введение ошибки Analysis Service](service-fabric-testability-overview.md) для получения дополнительных сведений.</span><span class="sxs-lookup"><span data-stu-id="ab870-179">Read through [Introduction toohello Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-hello-chaos-test-scenario"></a><span data-ttu-id="ab870-180">Шаг 1: Запустите сценарий теста хаоса hello</span><span class="sxs-lookup"><span data-stu-id="ab870-180">Step 1: Run hello chaos test scenario</span></span>
<span data-ttu-id="ab870-181">сценарии теста хаоса Hello приводит к возникновению ошибки через весь кластер Service Fabric hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-181">hello chaos test scenario generates faults across hello entire Service Fabric cluster.</span></span> <span data-ttu-id="ab870-182">сценарий Hello сжимает сбои обычно по месяцам, годам tooa несколько часов.</span><span class="sxs-lookup"><span data-stu-id="ab870-182">hello scenario compresses faults generally seen over months or years tooa few hours.</span></span> <span data-ttu-id="ab870-183">сочетание Hello с чередованием ошибок с ошибки с высокой частотой находит случаи, в противном случае останется незамеченной.</span><span class="sxs-lookup"><span data-stu-id="ab870-183">hello combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="ab870-184">Hello следующий пример запускает сценарии теста хаоса hello в течение 60 минут.</span><span class="sxs-lookup"><span data-stu-id="ab870-184">hello following example runs hello chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-hello-failover-test-scenario"></a><span data-ttu-id="ab870-185">Шаг 2: Запуск сценария тестовой отработки отказа hello</span><span class="sxs-lookup"><span data-stu-id="ab870-185">Step 2: Run hello failover test scenario</span></span>
<span data-ttu-id="ab870-186">отработки отказа Hello тестирования цели сценария секцию определенной службы, а не весь кластер hello и других служб остается без изменений.</span><span class="sxs-lookup"><span data-stu-id="ab870-186">hello failover test scenario targets a specific service partition instead of hello entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="ab870-187">сценарий Hello итерацию последовательности имитацию ошибок при проверке службы во время выполнения бизнес-логики.</span><span class="sxs-lookup"><span data-stu-id="ab870-187">hello scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="ab870-188">Ошибка при проверке службы указывает на проблему, которую необходимо дополнительно изучить.</span><span class="sxs-lookup"><span data-stu-id="ab870-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="ab870-189">тест отработки отказа Hello вызывает только ошибок во время, в противоположность toohello хаоса тестового сценария, который можно вызвать несколько ошибок.</span><span class="sxs-lookup"><span data-stu-id="ab870-189">hello failover test induces only one fault at a time, as opposed toohello chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="ab870-190">Hello следующий пример запускает hello теста отработки отказа в течение 60 минут для hello fabric: / WordCount/WordCountService службы.</span><span class="sxs-lookup"><span data-stu-id="ab870-190">hello following example runs hello failover test for 60 minutes against hello fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="ab870-191">Задача: удалить приложение Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab870-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="ab870-192">Удаление экземпляра развернутого приложения, удалить тип приложения hello подготовить из кластера hello и удаление пакета приложения hello из hello ImageStore.</span><span class="sxs-lookup"><span data-stu-id="ab870-192">You can delete an instance of a deployed application, remove hello provisioned application type from hello cluster, and remove hello application package from hello ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="ab870-193">Шаг 1. Удаление экземпляра приложения</span><span class="sxs-lookup"><span data-stu-id="ab870-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="ab870-194">При экземпляр приложения больше не нужен, можно окончательно удалить его с помощью hello [ServiceFabricApplication удаление](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) командлета.</span><span class="sxs-lookup"><span data-stu-id="ab870-194">When an application instance is no longer needed, you can permanently remove it by using hello [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="ab870-195">Эта функция также автоматически удаляет все службы, принадлежащие toohello приложения, без возможности восстановления, удаляя все состояния службы.</span><span class="sxs-lookup"><span data-stu-id="ab870-195">This also automatically removes all services belonging toohello application, permanently removing all service state.</span></span> <span data-ttu-id="ab870-196">Эта операция необратима, и вы не сможете восстановить состояние приложения.</span><span class="sxs-lookup"><span data-stu-id="ab870-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-hello-application-type"></a><span data-ttu-id="ab870-197">Шаг 2: Отмена регистрации типа приложения hello</span><span class="sxs-lookup"><span data-stu-id="ab870-197">Step 2: Unregister hello application type</span></span>
<span data-ttu-id="ab870-198">Если вам больше не требуется определенной версии типа приложения, отменить его регистрацию с помощью hello [Unregister ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) командлета.</span><span class="sxs-lookup"><span data-stu-id="ab870-198">When you no longer need a particular version of an application type, unregister it by using hello [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="ab870-199">Отмена регистрации неиспользуемые типы выпуски пространства, используемого пакета приложения hello в хранилище образов hello.</span><span class="sxs-lookup"><span data-stu-id="ab870-199">Unregistering unused types releases storage space used by hello application package in hello image store.</span></span> <span data-ttu-id="ab870-200">Регистрацию типа приложения можно отменить в том случае, если на его основе не были созданы экземпляры приложений и нет ссылающихся на него незавершенных обновлений приложений.</span><span class="sxs-lookup"><span data-stu-id="ab870-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-hello-application-package"></a><span data-ttu-id="ab870-201">Шаг 3: Удаление пакета приложения hello</span><span class="sxs-lookup"><span data-stu-id="ab870-201">Step 3: Remove hello application package</span></span>
<span data-ttu-id="ab870-202">После типа приложения hello не зарегистрирован, пакет приложения hello можно удалить из хранилища образов hello с помощью hello [ServiceFabricApplicationPackage удаление](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) командлета.</span><span class="sxs-lookup"><span data-stu-id="ab870-202">After hello application type is unregistered, hello application package can be removed from hello image store by using hello [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="ab870-203">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="ab870-203">Next steps</span></span>
[<span data-ttu-id="ab870-204">Жизненный цикл приложения Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab870-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="ab870-205">Развертывание приложения</span><span class="sxs-lookup"><span data-stu-id="ab870-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="ab870-206">Обновление приложения</span><span class="sxs-lookup"><span data-stu-id="ab870-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="ab870-207">Командлеты Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="ab870-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

