---
title: "Мониторинг на уровне платформы службы Azure Service Fabric | Документы Майкрософт"
description: "Ознакомьтесь с событиями на уровне платформы и журналами, используемыми для мониторинга и диагностики кластеров Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/24/2017
ms.author: dekapur
ms.openlocfilehash: c5857515ae8357b003f0999c4b11bd666c32bbf9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="platform-level-event-and-log-generation"></a><span data-ttu-id="06d1a-103">Создание событий и журналов на уровне платформы</span><span class="sxs-lookup"><span data-stu-id="06d1a-103">Platform level event and log generation</span></span>

## <a name="monitoring-the-cluster"></a><span data-ttu-id="06d1a-104">Мониторинг кластера</span><span class="sxs-lookup"><span data-stu-id="06d1a-104">Monitoring the cluster</span></span>

<span data-ttu-id="06d1a-105">Мониторинг на уровне платформы важен для определения правильной работы оборудования и кластера.</span><span class="sxs-lookup"><span data-stu-id="06d1a-105">It is important to monitor at the platform level to determine whether or not your hardware and cluster are behaving as expected.</span></span> <span data-ttu-id="06d1a-106">Хотя Service Fabric может поддерживать работу приложений во время сбоя оборудования, важно понять, где произошел сбой: в самом приложении или в базовой инфраструктуре.</span><span class="sxs-lookup"><span data-stu-id="06d1a-106">Though Service Fabric can keep applications running during a hardware failure, but you still need to diagnose whether an error is occurring in an application or in the underlying infrastructure.</span></span> <span data-ttu-id="06d1a-107">Кроме того, необходимо наблюдать за своими кластерами, чтобы оптимально планировать производительность, что поможет принимать решение о добавлении или удалении оборудования.</span><span class="sxs-lookup"><span data-stu-id="06d1a-107">You also should monitor your clusters to better plan for capacity, helping in decisions about adding or removing hardware.</span></span>

<span data-ttu-id="06d1a-108">Service Fabric предоставляет 5 различных готовых каналов журнала, которые создают такие события:</span><span class="sxs-lookup"><span data-stu-id="06d1a-108">Service Fabric provides five different log channels out-of-the-box that generate the following events:</span></span>

* <span data-ttu-id="06d1a-109">Операционный канал: высокоуровневые операции, выполняемые Service Fabric и кластером; содержит ожидаемые события для узла, новое развертываемое приложение или откат обновления SF и т. д.</span><span class="sxs-lookup"><span data-stu-id="06d1a-109">Operational channel: high-level operations performed by Service Fabric and the cluster, including events for a node coming up, a new application being deployed, or a SF upgrade rollback, etc.</span></span>
* <span data-ttu-id="06d1a-110">Операционный канал (подробные сведения): отчеты о работоспособности и решения о балансировке нагрузки.</span><span class="sxs-lookup"><span data-stu-id="06d1a-110">Operational channel - detailed: health reports and load balancing decisions</span></span>
* <span data-ttu-id="06d1a-111">Канал данных и обмена сообщениями: критически важные журналы и события, создаваемые в нашей системе обмена сообщениями (сейчас только ReverseProxy) и пути к данным (модели Reliable Services).</span><span class="sxs-lookup"><span data-stu-id="06d1a-111">Data & Messaging channel: critical logs and events generated in our messaging (currently only the ReverseProxy) and data path (reliable services models)</span></span>
* <span data-ttu-id="06d1a-112">Канал данных и обмена сообщениями (подробные сведения): канал, который содержит некритические журналы с данными и сведениями системы обмена сообщениями в кластере (этот канал содержит очень большое число событий).</span><span class="sxs-lookup"><span data-stu-id="06d1a-112">Data & Messaging channel - detailed: verbose channel that contains all the non-critical logs from data and messaging in the cluster (this channel has a very high volume of events)</span></span>   
* <span data-ttu-id="06d1a-113">[События Reliable Services](service-fabric-reliable-services-diagnostics.md): определенные события модели программирования.</span><span class="sxs-lookup"><span data-stu-id="06d1a-113">[Reliable Services events](service-fabric-reliable-services-diagnostics.md): programming model specific events</span></span>
* <span data-ttu-id="06d1a-114">[События надежных субъектов](service-fabric-reliable-actors-diagnostics.md): определенные события модели программирования и счетчики производительности.</span><span class="sxs-lookup"><span data-stu-id="06d1a-114">[Reliable Actors events](service-fabric-reliable-actors-diagnostics.md): programming model specific events and performance counters</span></span>
* <span data-ttu-id="06d1a-115">Журналы поддержки: системные журналы, созданные Service Fabric только для использования нами при оказании поддержки.</span><span class="sxs-lookup"><span data-stu-id="06d1a-115">Support logs: system logs generated by Service Fabric only to be used by us when providing support</span></span>

<span data-ttu-id="06d1a-116">Эти различные каналы охватывают большую часть компонентов ведения журнала на уровне платформы, которое рекомендуется использовать.</span><span class="sxs-lookup"><span data-stu-id="06d1a-116">These various channels cover most of the platform level logging that is recommended.</span></span> <span data-ttu-id="06d1a-117">Чтобы оптимизировать ведение журнала на уровне платформы, важно разобраться с моделью работоспособности, добавить настраиваемые отчеты о работоспособности и настраиваемые **счетчики производительности**, чтобы в режиме реального времени отслеживать влияние служб и приложений на кластер.</span><span class="sxs-lookup"><span data-stu-id="06d1a-117">To improve platform level logging, consider investing in better understanding the health model and adding custom health reports, and adding custom **Performance Counters** to build a real-time understanding of the impact of your services and applications on the cluster.</span></span>

### <a name="azure-service-fabric-health-and-load-reporting"></a><span data-ttu-id="06d1a-118">Отчеты о работоспособности и нагрузке Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="06d1a-118">Azure Service Fabric health and load reporting</span></span>

<span data-ttu-id="06d1a-119">В Service Fabric используется собственная модель работоспособности, которая подробно описана в следующих статьях.</span><span class="sxs-lookup"><span data-stu-id="06d1a-119">Service Fabric has its own health model, which is described in detail in these articles:</span></span>
- [<span data-ttu-id="06d1a-120">Общие сведения о наблюдении за работоспособностью системы в Service Fabric</span><span class="sxs-lookup"><span data-stu-id="06d1a-120">Introduction to Service Fabric health monitoring</span></span>](service-fabric-health-introduction.md)
- [<span data-ttu-id="06d1a-121">Проверка работоспособности службы и оповещение о проблемах</span><span class="sxs-lookup"><span data-stu-id="06d1a-121">Report and check service health</span></span>](service-fabric-diagnostics-how-to-report-and-check-service-health.md)
- [<span data-ttu-id="06d1a-122">Добавление настраиваемых отчетов о работоспособности Service Fabric</span><span class="sxs-lookup"><span data-stu-id="06d1a-122">Add custom Service Fabric health reports</span></span>](service-fabric-report-health.md)
- [<span data-ttu-id="06d1a-123">Просмотр отчетов о работоспособности Service Fabric</span><span class="sxs-lookup"><span data-stu-id="06d1a-123">View Service Fabric health reports</span></span>](service-fabric-view-entities-aggregated-health.md)

<span data-ttu-id="06d1a-124">Мониторинг работоспособности крайне важен для многих аспектов работы службы.</span><span class="sxs-lookup"><span data-stu-id="06d1a-124">Health monitoring is critical to multiple aspects of operating a service.</span></span> <span data-ttu-id="06d1a-125">Отслеживать работоспособность особенно важно, когда Service Fabric выполняет обновление именованного приложения.</span><span class="sxs-lookup"><span data-stu-id="06d1a-125">Health monitoring is especially important when Service Fabric performs a named application upgrade.</span></span> <span data-ttu-id="06d1a-126">После того как каждый домен обновления службы обновляется и становится доступен клиентам, для него проводится проверка работоспособности. Только после этого можно переходить к развертыванию службы в следующем домене обновления.</span><span class="sxs-lookup"><span data-stu-id="06d1a-126">After each upgrade domain of the service is upgraded and is available to your customers, the upgrade domain must pass health checks before the deployment moves to the next upgrade domain.</span></span> <span data-ttu-id="06d1a-127">Если достичь работоспособности не удается, выполняется откат развернутой службы, и приложение возвращается в известное рабочее состояние.</span><span class="sxs-lookup"><span data-stu-id="06d1a-127">If good health status cannot be achieved, the deployment is rolled back, so that the application is in a known, good state.</span></span> <span data-ttu-id="06d1a-128">В этот период до отката службы некоторые клиенты могут столкнуться с проблемами, но для большинства из них процесс пройдет незаметно.</span><span class="sxs-lookup"><span data-stu-id="06d1a-128">Although some customers might be affected before the services are rolled back, most customers won't experience an issue.</span></span> <span data-ttu-id="06d1a-129">Устранение проблемы происходит довольно быстро и не требует вмешательства человека.</span><span class="sxs-lookup"><span data-stu-id="06d1a-129">Also, a resolution occurs relatively quickly, and without having to wait for action from a human operator.</span></span> <span data-ttu-id="06d1a-130">Чем больше проверок работоспособности внедрено в код, тем устойчивее служба к проблемам развертывания.</span><span class="sxs-lookup"><span data-stu-id="06d1a-130">The more health checks that are incorporated into your code, the more resilient your service is to deployment issues.</span></span>

<span data-ttu-id="06d1a-131">Еще один аспект работоспособности службы — передача метрик из службы.</span><span class="sxs-lookup"><span data-stu-id="06d1a-131">Another aspect of service health is reporting metrics from the service.</span></span> <span data-ttu-id="06d1a-132">Метрики очень важны в Service Fabric, так как они используются для балансировки использования ресурсов.</span><span class="sxs-lookup"><span data-stu-id="06d1a-132">Metrics are important in Service Fabric because they are used to balance resource usage.</span></span> <span data-ttu-id="06d1a-133">Метрики также служат признаком работоспособности системы.</span><span class="sxs-lookup"><span data-stu-id="06d1a-133">Metrics also can be an indicator of system health.</span></span> <span data-ttu-id="06d1a-134">Допустим, вы используете приложение с несколькими службами, в котором каждый экземпляр передает метрику количества запросов в секунду (RPS).</span><span class="sxs-lookup"><span data-stu-id="06d1a-134">For example, you might have an application that has many services, and each instance reports a requests per second (RPS) metric.</span></span> <span data-ttu-id="06d1a-135">Если одна из служб использует больше ресурсов, чем другая, Service Fabric перемещает экземпляры службы по кластеру, поддерживая равномерное использование ресурсов.</span><span class="sxs-lookup"><span data-stu-id="06d1a-135">If one service is using more resources than another service, Service Fabric moves service instances around the cluster, to try to maintain even resource utilization.</span></span> <span data-ttu-id="06d1a-136">Использование ресурсов подробно описано в статье [Управление потреблением ресурсов и нагрузкой в Service Fabric с помощью метрик](service-fabric-cluster-resource-manager-metrics.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-136">For a more detailed explanation of how resource utilization works, see [Manage resource consumption and load in Service Fabric with metrics](service-fabric-cluster-resource-manager-metrics.md).</span></span>

<span data-ttu-id="06d1a-137">Также метрики дают представление об эффективности службы.</span><span class="sxs-lookup"><span data-stu-id="06d1a-137">Metrics also can help give you insight into how your service is performing.</span></span> <span data-ttu-id="06d1a-138">С их помощью вы можете убедиться, что служба работает с соблюдением заданных параметров.</span><span class="sxs-lookup"><span data-stu-id="06d1a-138">Over time, you can use metrics to check that the service is operating within expected parameters.</span></span> <span data-ttu-id="06d1a-139">Например, если статистические данные показывают, что в 9:00 в понедельник выполняется в среднем 1000 запросов в секунду, вы можете настроить отчет о работоспособности, который оповестит о том, что число запросов в секунду оказалось больше 1500 или меньше 500.</span><span class="sxs-lookup"><span data-stu-id="06d1a-139">For example, if trends show that at 9 AM on Monday morning the average RPS is 1,000, then you might set up a health report that alerts you if the RPS is below 500 or above 1,500.</span></span> <span data-ttu-id="06d1a-140">Возможно, все работает нормально, но такие отклонения следует проверять дополнительно, чтобы гарантировать удобство работы для ваших клиентов.</span><span class="sxs-lookup"><span data-stu-id="06d1a-140">Everything might be perfectly fine, but it might be worth a look to be sure that your customers are having a great experience.</span></span> <span data-ttu-id="06d1a-141">Для службы можно определить набор метрик, которые будут информировать о работоспособности, но не будут использоваться для балансировки ресурсов кластера.</span><span class="sxs-lookup"><span data-stu-id="06d1a-141">Your service can define a set of metrics that can be reported for health check purposes, but that don't affect the resource balancing of the cluster.</span></span> <span data-ttu-id="06d1a-142">Для этого присвойте весу метрик нулевое значение.</span><span class="sxs-lookup"><span data-stu-id="06d1a-142">To do this, set the metric weight to zero.</span></span> <span data-ttu-id="06d1a-143">Мы рекомендуем изначально присваивать всем метрикам нулевой вес и не увеличивать его, пока вы не будете твердо уверены, как изменение веса повлияет на балансировку ресурсов кластера.</span><span class="sxs-lookup"><span data-stu-id="06d1a-143">We recommend that you start all metrics with a weight of zero, and not increase the weight  until you are sure that you understand how weighting the metrics affects resource balancing for your cluster.</span></span>

> [!TIP]
> <span data-ttu-id="06d1a-144">Не используйте много метрик с ненулевым весом.</span><span class="sxs-lookup"><span data-stu-id="06d1a-144">Don't use too many weighted metrics.</span></span> <span data-ttu-id="06d1a-145">Вам будет сложно понять, почему экземпляры службы перемещаются для балансировки.</span><span class="sxs-lookup"><span data-stu-id="06d1a-145">It can be difficult to understand why service instances are being moved around for balancing.</span></span> <span data-ttu-id="06d1a-146">Нескольких метрик вполне достаточно.</span><span class="sxs-lookup"><span data-stu-id="06d1a-146">A few metrics can go a long way!</span></span>

<span data-ttu-id="06d1a-147">Для метрик и отчетов о работоспособности подойдет любая информация, которая указывает на работоспособность и производительность приложения.</span><span class="sxs-lookup"><span data-stu-id="06d1a-147">Any information that can indicate the health and performance of your application is a candidate for metrics and health reports.</span></span> <span data-ttu-id="06d1a-148">Счетчик производительности ЦП может показать, как используется узел, но он не даст информации о работоспособности определенной службы, так как на одном узле может быть запущено несколько служб.</span><span class="sxs-lookup"><span data-stu-id="06d1a-148">A CPU performance counter can tell you how your node is utilized, but it doesn't tell you whether a particular service is healthy, because multiple services might be running on a single node.</span></span> <span data-ttu-id="06d1a-149">Для этих целей лучше подойдут такие метрики, как количество запросов в секунду, количество обработанных элементов или задержка выполнения запроса.</span><span class="sxs-lookup"><span data-stu-id="06d1a-149">But, metrics like RPS, items processed, and request latency all can indicate the health of a specific service.</span></span>

<span data-ttu-id="06d1a-150">Чтобы создать отчет о работоспособности, используйте примерно такой код:</span><span class="sxs-lookup"><span data-stu-id="06d1a-150">To report health, use code similar to this:</span></span>

  ```csharp
    if (!result.HasValue)
    {
        HealthInformation healthInformation = new HealthInformation("ServiceCode", "StateDictionary", HealthState.Error);
        this.Partition.ReportInstanceHealth(healthInformation);
    }
  ```

<span data-ttu-id="06d1a-151">Чтобы создать отчет о метрике, используйте примерно такой код:</span><span class="sxs-lookup"><span data-stu-id="06d1a-151">To report a metric, use code similar to this:</span></span>

  ```csharp
    this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("MemoryInMb", 1234), new LoadMetric("metric1", 42) });
  ```

### <a name="service-fabric-support-logs"></a><span data-ttu-id="06d1a-152">Журналы поддержки Service Fabric</span><span class="sxs-lookup"><span data-stu-id="06d1a-152">Service Fabric support logs</span></span>

<span data-ttu-id="06d1a-153">Если вы будете обращаться в службу поддержки корпорации Майкрософт с вопросами по управлению кластером Azure Service Fabric, вам почти наверняка потребуются журналы поддержки.</span><span class="sxs-lookup"><span data-stu-id="06d1a-153">If you need to contact Microsoft support for help with your Azure Service Fabric cluster, support logs are almost always required.</span></span> <span data-ttu-id="06d1a-154">Если кластер размещен в Azure, эти журналы автоматически настраиваются в процессе создания кластера, а затем собираются.</span><span class="sxs-lookup"><span data-stu-id="06d1a-154">If your cluster is hosted in Azure, support logs are automatically configured and collected as part of creating a cluster.</span></span> <span data-ttu-id="06d1a-155">Эти журналы хранятся в выделенной учетной записи хранения, размещенной в группе ресурсов вашего кластера.</span><span class="sxs-lookup"><span data-stu-id="06d1a-155">The logs are stored in a dedicated storage account in your cluster's resource group.</span></span> <span data-ttu-id="06d1a-156">У этой учетной записи хранения нет фиксированного имени, но ее можно опознать по наличию таблиц и контейнеров больших двоичных объектов, имена которых начинаются с префикса *fabric*.</span><span class="sxs-lookup"><span data-stu-id="06d1a-156">The storage account doesn't have a fixed name, but in the account, you see blob containers and tables with names that start with *fabric*.</span></span> <span data-ttu-id="06d1a-157">Сведения о настройке сбора журналов для автономного кластера см. в статьях [Создание изолированного кластера под управлением Windows Server](service-fabric-cluster-creation-for-windows-server.md) и [Параметры конфигурации для автономного кластера Windows](service-fabric-cluster-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-157">For information about setting up log collections for a standalone cluster, see [Create and manage a standalone Azure Service Fabric cluster](service-fabric-cluster-creation-for-windows-server.md) and [Configuration settings for a standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span> <span data-ttu-id="06d1a-158">Для автономных экземпляров Service Fabric журналы следует передавать в локальный файловый ресурс.</span><span class="sxs-lookup"><span data-stu-id="06d1a-158">For standalone Service Fabric instances, the logs should be sent to a local file share.</span></span> <span data-ttu-id="06d1a-159">Эти журналы **необходимы** для технической поддержки, но они не предназначены для использования кем-либо, кроме группы поддержки клиентов Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="06d1a-159">You are **required** to have these logs for support, but they are not intended to be usable by anyone outside of the Microsoft customer support team.</span></span>

## <a name="enabling-diagnostics-for-a-cluster"></a><span data-ttu-id="06d1a-160">Включение диагностики для кластера</span><span class="sxs-lookup"><span data-stu-id="06d1a-160">Enabling Diagnostics for a cluster</span></span>

<span data-ttu-id="06d1a-161">Чтобы воспользоваться преимуществами этих журналов, мы рекомендуем включать диагностику во время создания кластера.</span><span class="sxs-lookup"><span data-stu-id="06d1a-161">In order to take advantage of these logs, it is highly recommended that during cluster creation, "Diagnostics" is enabled.</span></span> <span data-ttu-id="06d1a-162">Если включить диагностику в развернутом кластере, система диагностики Microsoft Azure сможет распознавать операционный канал, каналы Reliable Services и Reliable Actors, а также хранить данные, как описано в инструкциях по [статистической обработке событий с помощью системы диагностики Azure](service-fabric-diagnostics-event-aggregation-wad.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-162">By turning on diagnostics, when the cluster is deployed, Windows Azure Diagnostics is able to acknowledge the Operational, Reliable Services, and Reliable actors channels, and store the data as explained further in [Aggregate events with Azure Diagnostics](service-fabric-diagnostics-event-aggregation-wad.md).</span></span>

<span data-ttu-id="06d1a-163">Как показано выше, есть также дополнительное поле для добавления ключа инструментирования Application Insights (AI).</span><span class="sxs-lookup"><span data-stu-id="06d1a-163">As seen above, there is also an optional field to add an Application Insights (AI) instrumentation key.</span></span> <span data-ttu-id="06d1a-164">Если вы решили использовать AI для анализа событий (дополнительные сведения об этом см. в инструкциях по [анализу событий с помощью Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), включите ключ инструментирования AppInsights (GUID) здесь.</span><span class="sxs-lookup"><span data-stu-id="06d1a-164">If you choose to use AI for any event analysis (read more about this in [Event Analysis with Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), include the AppInsights resource instrumentationKey (GUID) here.</span></span>


<span data-ttu-id="06d1a-165">Если планируется развернуть контейнеры в кластере, разрешите WAD получать статистику Docker, добавив в DiagnosticMonitorConfiguration > WadCfg следующий код:</span><span class="sxs-lookup"><span data-stu-id="06d1a-165">If you are going to deploy containers to your cluster, enable WAD to pick up docker stats by adding this to your "WadCfg > DiagnosticMonitorConfiguration":</span></span>

```json
"DockerSources": {
    "Stats": {
        "enabled": true,
        "sampleRate": "PT1M"
    }
},

```

## <a name="measuring-performance"></a><span data-ttu-id="06d1a-166">Измерение производительности</span><span class="sxs-lookup"><span data-stu-id="06d1a-166">Measuring performance</span></span>

<span data-ttu-id="06d1a-167">Измерение производительности кластера помогает понять, как обрабатывать нагрузку и принимать решения для масштабирования кластера. Дополнительные сведения о масштабировании кластера см. статьях [Масштабирование кластера Service Fabric с помощью правил автомасштабирования](service-fabric-cluster-scale-up-down.md) и [Добавление узлов в автономный кластер Service Fabric под управлением Windows Server или удаление узлов из него](service-fabric-cluster-windows-server-add-remove-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-167">Measure performance of your cluster will help you understand how it is able to handle load and drive decisions around scaling your cluster (see more about scaling a cluster [on Azure](service-fabric-cluster-scale-up-down.md), or [on-premises](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span></span> <span data-ttu-id="06d1a-168">Данные о производительности также полезны при сравнении с действиями, которые вы или ваши приложения и службы могли выполнить, для последующего анализа журналов.</span><span class="sxs-lookup"><span data-stu-id="06d1a-168">Performance data is also useful when compared to actions you or your applications and services may have taken, when analyzing logs in the future.</span></span> 

<span data-ttu-id="06d1a-169">Дополнительные сведения о списке счетчиков производительности, данные которых необходимо собрать при использовании Service Fabric, см. в [этой статье](service-fabric-diagnostics-event-generation-perf.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-169">For a list of performance counters to collect when using Service Fabric, see [Performance Counters in Service Fabric](service-fabric-diagnostics-event-generation-perf.md)</span></span>

<span data-ttu-id="06d1a-170">Ниже приведены два простых способа настройки сбора данных производительности для кластера:</span><span class="sxs-lookup"><span data-stu-id="06d1a-170">Here are two common ways in which you can set up collecting performance data for your cluster:</span></span>

* <span data-ttu-id="06d1a-171">С помощью агента. Это предпочтительный способ сбора данных производительности на компьютере. У агентов обычно есть список возможных метрик производительности, которые можно собрать. Процесс их выбора или изменения прост.</span><span class="sxs-lookup"><span data-stu-id="06d1a-171">Using an agent: this is the preferred way of collecting performance from a machine, since agents usually have a list of possible performance metrics that can be collected, and it is a relatively easy process to choose the metrics you want to collect or change them.</span></span> <span data-ttu-id="06d1a-172">Дополнительные сведения о настройке агента OMS (агент наблюдения, который может собирать данные производительности виртуальных машин кластера и контейнеров развертывания) см. в статье [Анализ событий и визуализация с помощью OMS](service-fabric-diagnostics-event-analysis-oms.md) и [Подключение компьютеров Windows к службе Log Analytics в Azure](../log-analytics/log-analytics-windows-agents.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-172">Read about [how to configure the OMS for Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) and [Setting up the OMS Windows Agent](../log-analytics/log-analytics-windows-agents.md) articles to learn more about the OMS agent, which is one such monitoring agent that is able to pick up performance data for cluster VMs and deployed containers.</span></span>

* <span data-ttu-id="06d1a-173">Настройка диагностики для записи счетчиков производительности в таблицу. Для кластеров Azure это означает изменение конфигурации системы диагностики Azure так, чтобы выполнить сбор соответствующих счетчиков производительности из виртуальных машин в кластере, и предоставление этой службе возможности получать статистику Docker при развертывании контейнеров.</span><span class="sxs-lookup"><span data-stu-id="06d1a-173">Configuring diagnostics to write performance counters to a table: for clusters on Azure, this means changing the Azure Diagnostics configuration to pick up the appropriate performance counters from the VMs in your cluster, and enabling it to pick up docker stats if you will be deploying any containers.</span></span> <span data-ttu-id="06d1a-174">Дополнительные сведения о настройке счетчиков производительности в WAD и Service Fabric для настройки их сбора см. в [этой статье](service-fabric-diagnostics-event-aggregation-wad.md).</span><span class="sxs-lookup"><span data-stu-id="06d1a-174">Read about configuring [Performance Counters in WAD](service-fabric-diagnostics-event-aggregation-wad.md) in Service Fabric to set up performance counter collection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="06d1a-175">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="06d1a-175">Next steps</span></span>

<span data-ttu-id="06d1a-176">Перед отправкой на платформу анализа журналы и события должны быть агрегированы.</span><span class="sxs-lookup"><span data-stu-id="06d1a-176">Your logs and events need to be aggregated before they can be sent to any analysis platform.</span></span> <span data-ttu-id="06d1a-177">Прочтите статьи о [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) и [WAD](service-fabric-diagnostics-event-aggregation-wad.md), чтобы лучше понять некоторые рекомендуемые параметры.</span><span class="sxs-lookup"><span data-stu-id="06d1a-177">Read about [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) and [WAD](service-fabric-diagnostics-event-aggregation-wad.md) to better understand some of the recommended options.</span></span>
