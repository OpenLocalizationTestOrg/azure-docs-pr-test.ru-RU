---
title: "Загрузка Azure микрослужбу aaaManage использования метрик | Документы Microsoft"
description: "Узнайте, как метрики tooconfigure и использования в Service Fabric toomanage службы потребления ресурсов."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 0d622ea6-a7c7-4bef-886b-06e6b85a97fb
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 592dc749ce30683a1e439a702b7d0dc0a638276f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="managing-resource-consumption-and-load-in-service-fabric-with-metrics"></a><span data-ttu-id="2a772-103">Управление потреблением ресурсов и нагрузкой в Service Fabric с помощью метрик</span><span class="sxs-lookup"><span data-stu-id="2a772-103">Managing resource consumption and load in Service Fabric with metrics</span></span>
<span data-ttu-id="2a772-104">*Метрики* hello ресурсов, предоставленные вашей службы важны и которые hello узлами в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-104">*Metrics* are hello resources that your services care about and which are provided by hello nodes in hello cluster.</span></span> <span data-ttu-id="2a772-105">Метрика никаких действий, которые должны toomanage в порядке tooimprove или монитора производительности hello служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-105">A metric is anything that you want toomanage in order tooimprove or monitor hello performance of your services.</span></span> <span data-ttu-id="2a772-106">Например может отслеживать tooknow потребления памяти, если служба перегружена.</span><span class="sxs-lookup"><span data-stu-id="2a772-106">For example, you might watch memory consumption tooknow if your service is overloaded.</span></span> <span data-ttu-id="2a772-107">Кроме того можно использовать toofigure out ли служба hello переместить в другом месте, где памяти — меньше ограниченного порядок tooget лучшую производительность.</span><span class="sxs-lookup"><span data-stu-id="2a772-107">Another use is toofigure out whether hello service could move elsewhere where memory is less constrained in order tooget better performance.</span></span>

<span data-ttu-id="2a772-108">Примерами метрик может служить использование памяти, дисков и ЦП.</span><span class="sxs-lookup"><span data-stu-id="2a772-108">Things like Memory, Disk, and CPU usage are examples of metrics.</span></span> <span data-ttu-id="2a772-109">Эти показатели представляют физические метрики, ресурсы, соответствующие toophysical ресурсы на узле hello, для которых требуются toobe управляемых.</span><span class="sxs-lookup"><span data-stu-id="2a772-109">These metrics are physical metrics, resources that correspond toophysical resources on hello node that need toobe managed.</span></span> <span data-ttu-id="2a772-110">Метрики также могут быть (и зачастую являются) логическими.</span><span class="sxs-lookup"><span data-stu-id="2a772-110">Metrics can also be (and commonly are) logical metrics.</span></span> <span data-ttu-id="2a772-111">Примерами логических метрик могут служить MyWorkQueueDepth, MessagesToProcess и TotalRecords.</span><span class="sxs-lookup"><span data-stu-id="2a772-111">Logical metrics are things like “MyWorkQueueDepth” or "MessagesToProcess" or "TotalRecords".</span></span> <span data-ttu-id="2a772-112">Логические показатели, определяемые приложением и косвенно соответствуют потребления toosome физических ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2a772-112">Logical metrics are application-defined and indirectly correspond toosome physical resource consumption.</span></span> <span data-ttu-id="2a772-113">Логический метрики являются общими, так как она может быть жестких toomeasure и потребление отчетов физических ресурсов на основе службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-113">Logical metrics are common because it can be hard toomeasure and report consumption of physical resources on a per-service basis.</span></span> <span data-ttu-id="2a772-114">сложность Hello измерения и физических показатели reporting — также почему Service Fabric предоставляет некоторые показатели по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2a772-114">hello complexity of measuring and reporting your own physical metrics is also why Service Fabric provides some default metrics.</span></span>

## <a name="default-metrics"></a><span data-ttu-id="2a772-115">Метрики по умолчанию</span><span class="sxs-lookup"><span data-stu-id="2a772-115">Default metrics</span></span>
<span data-ttu-id="2a772-116">Предположим, что требуется tooget работы запись и развертывание службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-116">Let’s say that you want tooget started writing and deploying your service.</span></span> <span data-ttu-id="2a772-117">На этом этапе вы не знаете, какие физические или логические ресурсы она будет использовать.</span><span class="sxs-lookup"><span data-stu-id="2a772-117">At this point you don’t know what physical or logical resources it consumes.</span></span> <span data-ttu-id="2a772-118">Все в порядке.</span><span class="sxs-lookup"><span data-stu-id="2a772-118">That’s fine!</span></span> <span data-ttu-id="2a772-119">Диспетчер ресурсов кластера Service Fabric Hello использует некоторые показатели по умолчанию при указании нет других метрик.</span><span class="sxs-lookup"><span data-stu-id="2a772-119">hello Service Fabric Cluster Resource Manager uses some default metrics when no other metrics are specified.</span></span> <span data-ttu-id="2a772-120">К ним относятся:</span><span class="sxs-lookup"><span data-stu-id="2a772-120">They are:</span></span>

  - <span data-ttu-id="2a772-121">PrimaryCount - число первичных реплик на узле hello</span><span class="sxs-lookup"><span data-stu-id="2a772-121">PrimaryCount - count of Primary replicas on hello node</span></span> 
  - <span data-ttu-id="2a772-122">ReplicaCount - количество полных реплик с отслеживанием состояния на узле hello</span><span class="sxs-lookup"><span data-stu-id="2a772-122">ReplicaCount - count of total stateful replicas on hello node</span></span>
  - <span data-ttu-id="2a772-123">Count - число всех объектов службы (без сохранения состояния и с отслеживанием состояния) на узле hello</span><span class="sxs-lookup"><span data-stu-id="2a772-123">Count - count of all service objects (stateless and stateful) on hello node</span></span>

| <span data-ttu-id="2a772-124">Метрика</span><span class="sxs-lookup"><span data-stu-id="2a772-124">Metric</span></span> | <span data-ttu-id="2a772-125">Нагрузка экземпляра без отслеживания состояния</span><span class="sxs-lookup"><span data-stu-id="2a772-125">Stateless Instance Load</span></span> | <span data-ttu-id="2a772-126">Вторичная нагрузка с отслеживанием состояния</span><span class="sxs-lookup"><span data-stu-id="2a772-126">Stateful Secondary Load</span></span> | <span data-ttu-id="2a772-127">Первичная нагрузка с отслеживанием состояния</span><span class="sxs-lookup"><span data-stu-id="2a772-127">Stateful Primary Load</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2a772-128">PrimaryCount</span><span class="sxs-lookup"><span data-stu-id="2a772-128">PrimaryCount</span></span> |<span data-ttu-id="2a772-129">0</span><span class="sxs-lookup"><span data-stu-id="2a772-129">0</span></span> |<span data-ttu-id="2a772-130">0</span><span class="sxs-lookup"><span data-stu-id="2a772-130">0</span></span> |<span data-ttu-id="2a772-131">1</span><span class="sxs-lookup"><span data-stu-id="2a772-131">1</span></span> |
| <span data-ttu-id="2a772-132">ReplicaCount</span><span class="sxs-lookup"><span data-stu-id="2a772-132">ReplicaCount</span></span> |<span data-ttu-id="2a772-133">0</span><span class="sxs-lookup"><span data-stu-id="2a772-133">0</span></span> |<span data-ttu-id="2a772-134">1</span><span class="sxs-lookup"><span data-stu-id="2a772-134">1</span></span> |<span data-ttu-id="2a772-135">1</span><span class="sxs-lookup"><span data-stu-id="2a772-135">1</span></span> |
| <span data-ttu-id="2a772-136">Count</span><span class="sxs-lookup"><span data-stu-id="2a772-136">Count</span></span> |<span data-ttu-id="2a772-137">1</span><span class="sxs-lookup"><span data-stu-id="2a772-137">1</span></span> |<span data-ttu-id="2a772-138">1</span><span class="sxs-lookup"><span data-stu-id="2a772-138">1</span></span> |<span data-ttu-id="2a772-139">1</span><span class="sxs-lookup"><span data-stu-id="2a772-139">1</span></span> |

<span data-ttu-id="2a772-140">Для основных рабочих нагрузок показатели по умолчанию hello предоставляют довольно распространения работы в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-140">For basic workloads, hello default metrics provide a decent distribution of work in hello cluster.</span></span> <span data-ttu-id="2a772-141">В следующем примере hello давайте посмотрим, что произойдет, если мы создание двух служб и полагаться на метрики по умолчанию hello балансировки.</span><span class="sxs-lookup"><span data-stu-id="2a772-141">In hello following example, let’s see what happens when we create two services and rely on hello default metrics for balancing.</span></span> <span data-ttu-id="2a772-142">службы с отслеживанием состояния с тремя секциями является первая служба Hello и целевой размер набора реплик из трех.</span><span class="sxs-lookup"><span data-stu-id="2a772-142">hello first service is a stateful service with three partitions and a target replica set size of three.</span></span> <span data-ttu-id="2a772-143">Вторая служба Hello — службы без отслеживания состояния с одним разделом и число экземпляров из трех.</span><span class="sxs-lookup"><span data-stu-id="2a772-143">hello second service is a stateless service with one partition and an instance count of three.</span></span>

<span data-ttu-id="2a772-144">Вот что получается в итоге.</span><span class="sxs-lookup"><span data-stu-id="2a772-144">Here's what you get:</span></span>

<span data-ttu-id="2a772-145"><center>
![Макет кластера с метриками по умолчанию][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="2a772-145"><center>
![Cluster Layout with Default Metrics][Image1]
</center></span></span>

<span data-ttu-id="2a772-146">Toonote некоторые вещи:</span><span class="sxs-lookup"><span data-stu-id="2a772-146">Some things toonote:</span></span>
  - <span data-ttu-id="2a772-147">Первичной реплики для службы с отслеживанием состояния hello распределены между несколькими узлами</span><span class="sxs-lookup"><span data-stu-id="2a772-147">Primary replicas for hello stateful service are distributed across several nodes</span></span>
  - <span data-ttu-id="2a772-148">Реплики для одной секции находятся на разных узлах hello</span><span class="sxs-lookup"><span data-stu-id="2a772-148">Replicas for hello same partition are on different nodes</span></span>
  - <span data-ttu-id="2a772-149">в кластере hello распространяется Hello общее число источников и баз данных-получателей</span><span class="sxs-lookup"><span data-stu-id="2a772-149">hello total number of primaries and secondaries is distributed in hello cluster</span></span>
  - <span data-ttu-id="2a772-150">Hello общее число объектов службы равномерно распределяются на каждом узле</span><span class="sxs-lookup"><span data-stu-id="2a772-150">hello total number of service objects are evenly allocated on each node</span></span>

<span data-ttu-id="2a772-151">Хорошо!</span><span class="sxs-lookup"><span data-stu-id="2a772-151">Good!</span></span>

<span data-ttu-id="2a772-152">Запуск по прекрасно работать метрики по умолчанию Hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-152">hello default metrics work great as a start.</span></span> <span data-ttu-id="2a772-153">Тем не менее метрики по умолчанию hello будет только разноситься вы к текущему моменту.</span><span class="sxs-lookup"><span data-stu-id="2a772-153">However, hello default metrics will only carry you so far.</span></span> <span data-ttu-id="2a772-154">Например: Какова вероятность hello, секционирование hello схема извлечь результаты вполне даже использования во всех секциях?</span><span class="sxs-lookup"><span data-stu-id="2a772-154">For example: What's hello likelihood that hello partitioning scheme you picked results in perfectly even utilization by all partitions?</span></span> <span data-ttu-id="2a772-155">Какова вероятность hello hello нагрузки для данной службы является константой во времени или даже просто hello же в разных секциях прямо сейчас?</span><span class="sxs-lookup"><span data-stu-id="2a772-155">What’s hello chance that hello load for a given service is constant over time, or even just hello same across multiple partitions right now?</span></span>

<span data-ttu-id="2a772-156">Можно выполнить с только что метрики по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-156">You could run with just hello default metrics.</span></span> <span data-ttu-id="2a772-157">Но, как правило, это означает, что использование вашего кластера ниже и неравномернее, чем хотелось бы.</span><span class="sxs-lookup"><span data-stu-id="2a772-157">However, doing so usually means that your cluster utilization is lower and more uneven than you’d like.</span></span> <span data-ttu-id="2a772-158">Это так, как метрики по умолчанию hello не адаптивной и предполагают, что все, что эквивалентно.</span><span class="sxs-lookup"><span data-stu-id="2a772-158">This is because hello default metrics aren't adaptive and presume everything is equivalent.</span></span> <span data-ttu-id="2a772-159">Например основной, занят и который не обоих contribute «1» toohello PrimaryCount метрику.</span><span class="sxs-lookup"><span data-stu-id="2a772-159">For example, a Primary that is busy and one that is not both contribute "1" toohello PrimaryCount metric.</span></span> <span data-ttu-id="2a772-160">В худшем случае hello с использованием только метрик по умолчанию hello может также привести к overscheduled узлов, что приводит к проблемам с производительностью.</span><span class="sxs-lookup"><span data-stu-id="2a772-160">In hello worst case, using only hello default metrics can also result in overscheduled nodes resulting in performance issues.</span></span> <span data-ttu-id="2a772-161">Если вы заинтересованы в получении hello большинство из кластера и как избежать проблем с производительностью, понадобится toouse настраиваемых метрик и динамическая загрузка отчетов.</span><span class="sxs-lookup"><span data-stu-id="2a772-161">If you're interested in getting hello most out of your cluster and avoiding performance issues, you need toouse custom metrics and dynamic load reporting.</span></span>

## <a name="custom-metrics"></a><span data-ttu-id="2a772-162">Настраиваемые метрики</span><span class="sxs-lookup"><span data-stu-id="2a772-162">Custom metrics</span></span>
<span data-ttu-id="2a772-163">Метрики настраиваются отдельно для каждого с именем service экземпляра при создании службы hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-163">Metrics are configured on a per-named-service-instance basis when you’re creating hello service.</span></span>

<span data-ttu-id="2a772-164">У любой метрики есть описывающие ее свойства: имя, вес и нагрузка по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2a772-164">Any metric has some properties that describe it: a name, a weight, and a default load.</span></span>

* <span data-ttu-id="2a772-165">Имя метрики: hello имя метрики hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-165">Metric Name: hello name of hello metric.</span></span> <span data-ttu-id="2a772-166">Имя метрики Hello имеет уникальный идентификатор для метрики hello в кластере hello с точки зрения диспетчера ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-166">hello metric name is a unique identifier for hello metric within hello cluster from hello Resource Manager’s perspective.</span></span>
* <span data-ttu-id="2a772-167">Вес: Вес метрики определяет важность эта метрика относительный toohello другие метрики для этой службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-167">Weight: Metric weight defines how important this metric is relative toohello other metrics for this service.</span></span>
* <span data-ttu-id="2a772-168">Загрузка по умолчанию: нагрузки по умолчанию hello представляется по-разному в зависимости от того, является ли hello службы без сохранения состояния или с отслеживанием состояния.</span><span class="sxs-lookup"><span data-stu-id="2a772-168">Default Load: hello default load is represented differently depending on whether hello service is stateless or stateful.</span></span>
  * <span data-ttu-id="2a772-169">Для служб без отслеживания состояния у каждой метрики есть одно свойство — DefaultLoad.</span><span class="sxs-lookup"><span data-stu-id="2a772-169">For stateless services, each metric has a single property named DefaultLoad</span></span>
  * <span data-ttu-id="2a772-170">Для служб с отслеживанием состояния можно определить следующие свойства:</span><span class="sxs-lookup"><span data-stu-id="2a772-170">For stateful services you define:</span></span>
    * <span data-ttu-id="2a772-171">PrimaryDefaultLoad: сумма hello по умолчанию, которые эта служба использует при основной метрики</span><span class="sxs-lookup"><span data-stu-id="2a772-171">PrimaryDefaultLoad: hello default amount of this metric this service consumes when it is a Primary</span></span>
    * <span data-ttu-id="2a772-172">SecondaryDefaultLoad: сумма по умолчанию hello метрики эта служба при потребляет получателя</span><span class="sxs-lookup"><span data-stu-id="2a772-172">SecondaryDefaultLoad: hello default amount of this metric this service consumes when it is a Secondary</span></span>

> [!NOTE]
> <span data-ttu-id="2a772-173">Если определение настраиваемых метрик и требуется too_also_ используйте hello по умолчанию метрики, необходимо too_explicitly_ добавить метрики по умолчанию hello резервное и определить для них весовые коэффициенты и значения.</span><span class="sxs-lookup"><span data-stu-id="2a772-173">If you define custom metrics and you want too_also_ use hello default metrics, you need too_explicitly_ add hello default metrics back and define weights and values for them.</span></span> <span data-ttu-id="2a772-174">Это так, как необходимо определить связь hello метрики по умолчанию hello и настраиваемые показатели.</span><span class="sxs-lookup"><span data-stu-id="2a772-174">This is because you must define hello relationship between hello default metrics and your custom metrics.</span></span> <span data-ttu-id="2a772-175">Например, вас больше интересуют метрика ConnectionCount или WorkQueueDepth, чем распределение первичных реплик.</span><span class="sxs-lookup"><span data-stu-id="2a772-175">For example, maybe you care about ConnectionCount or WorkQueueDepth more than Primary distribution.</span></span> <span data-ttu-id="2a772-176">С весом по умолчанию hello hello PrimaryCount метрика высокой, поэтому вы хотите tooreduce его tooMedium при добавлении на других метрик tooensure, они имеют более высокий приоритет.</span><span class="sxs-lookup"><span data-stu-id="2a772-176">By default hello weight of hello PrimaryCount metric is High, so you want tooreduce it tooMedium when you add your other metrics tooensure they take precedence.</span></span>
>

### <a name="defining-metrics-for-your-service---an-example"></a><span data-ttu-id="2a772-177">Определение метрик для службы (пример)</span><span class="sxs-lookup"><span data-stu-id="2a772-177">Defining metrics for your service - an example</span></span>
<span data-ttu-id="2a772-178">Предположим, требуется следующая конфигурация hello:</span><span class="sxs-lookup"><span data-stu-id="2a772-178">Let’s say you want hello following configuration:</span></span>

  - <span data-ttu-id="2a772-179">Служба сообщает о метрике ConnectionCount.</span><span class="sxs-lookup"><span data-stu-id="2a772-179">Your service reports a metric named "ConnectionCount”</span></span>
  - <span data-ttu-id="2a772-180">Также требуется показателей по умолчанию hello toouse</span><span class="sxs-lookup"><span data-stu-id="2a772-180">You also want toouse hello default metrics</span></span> 
  - <span data-ttu-id="2a772-181">Вы провели некоторые измерения и выяснили, что обычно первичная реплика этой службы может потреблять 20 единиц MemoryInMb,</span><span class="sxs-lookup"><span data-stu-id="2a772-181">You’ve done some measurements and know that normally a Primary replica of that service takes up 20 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="2a772-182">а вторичные реплики — 5 единиц.</span><span class="sxs-lookup"><span data-stu-id="2a772-182">Secondaries use 5 units of "ConnectionCount"</span></span>
  - <span data-ttu-id="2a772-183">Можно считать «ConnectionCount» hello наиболее важные метрики с точки зрения Управление производительностью hello этой конкретной службы</span><span class="sxs-lookup"><span data-stu-id="2a772-183">You know that "ConnectionCount" is hello most important metric in terms of managing hello performance of this particular service</span></span>
  - <span data-ttu-id="2a772-184">Но вы все равно хотите, чтобы первичные реплики были сбалансированы.</span><span class="sxs-lookup"><span data-stu-id="2a772-184">You still want Primary replicas balanced.</span></span> <span data-ttu-id="2a772-185">Балансировка первичных реплик обычно имеет смысл при любых обстоятельствах.</span><span class="sxs-lookup"><span data-stu-id="2a772-185">Balancing primary replicas is generally a good idea no matter what.</span></span> <span data-ttu-id="2a772-186">Это помогает избежать hello потери некоторых домена узла или fault, влияющие на большую часть первичные реплики вместе с ним.</span><span class="sxs-lookup"><span data-stu-id="2a772-186">This helps prevent hello loss of some node or fault domain from impacting a majority of primary replicas along with it.</span></span> 
  - <span data-ttu-id="2a772-187">В противном случае допустимы метрики по умолчанию hello</span><span class="sxs-lookup"><span data-stu-id="2a772-187">Otherwise, hello default metrics are fine</span></span>

<span data-ttu-id="2a772-188">Вот что можно написать toocreate службы с этой конфигурацией метрики кода hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-188">Here’s hello code that you would write toocreate a service with that metric configuration:</span></span>

<span data-ttu-id="2a772-189">Код:</span><span class="sxs-lookup"><span data-stu-id="2a772-189">Code:</span></span>

```csharp
StatefulServiceDescription serviceDescription = new StatefulServiceDescription();
StatefulServiceLoadMetricDescription connectionMetric = new StatefulServiceLoadMetricDescription();
connectionMetric.Name = "ConnectionCount";
connectionMetric.PrimaryDefaultLoad = 20;
connectionMetric.SecondaryDefaultLoad = 5;
connectionMetric.Weight = ServiceLoadMetricWeight.High;

StatefulServiceLoadMetricDescription primaryCountMetric = new StatefulServiceLoadMetricDescription();
primaryCountMetric.Name = "PrimaryCount";
primaryCountMetric.PrimaryDefaultLoad = 1;
primaryCountMetric.SecondaryDefaultLoad = 0;
primaryCountMetric.Weight = ServiceLoadMetricWeight.Medium;

StatefulServiceLoadMetricDescription replicaCountMetric = new StatefulServiceLoadMetricDescription();
replicaCountMetric.Name = "ReplicaCount";
replicaCountMetric.PrimaryDefaultLoad = 1;
replicaCountMetric.SecondaryDefaultLoad = 1;
replicaCountMetric.Weight = ServiceLoadMetricWeight.Low;

StatefulServiceLoadMetricDescription totalCountMetric = new StatefulServiceLoadMetricDescription();
totalCountMetric.Name = "Count";
totalCountMetric.PrimaryDefaultLoad = 1;
totalCountMetric.SecondaryDefaultLoad = 1;
totalCountMetric.Weight = ServiceLoadMetricWeight.Low;

serviceDescription.Metrics.Add(connectionMetric);
serviceDescription.Metrics.Add(primaryCountMetric);
serviceDescription.Metrics.Add(replicaCountMetric);
serviceDescription.Metrics.Add(totalCountMetric);

await fabricClient.ServiceManager.CreateServiceAsync(serviceDescription);
```

<span data-ttu-id="2a772-190">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="2a772-190">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("ConnectionCount,High,20,5”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

> [!NOTE]
> <span data-ttu-id="2a772-191">Здравствуйте выше примеры и hello остальной части этого документа описываются управление метрики на основе с именем службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-191">hello above examples and hello rest of this document describe managing metrics on a per-named-service basis.</span></span> <span data-ttu-id="2a772-192">Это также возможно toodefine метрики для служб в службе hello _тип_ уровне.</span><span class="sxs-lookup"><span data-stu-id="2a772-192">It is also possible toodefine metrics for your services at hello service _type_ level.</span></span> <span data-ttu-id="2a772-193">Для этого их нужно указать в манифестах служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-193">This is accomplished by specifying them in your service manifests.</span></span> <span data-ttu-id="2a772-194">Определение метрики уровня типа не рекомендуется по нескольким причинам.</span><span class="sxs-lookup"><span data-stu-id="2a772-194">Defining type level metrics is not recommended for several reasons.</span></span> <span data-ttu-id="2a772-195">Hello первый обусловлено тем, что имена метрик учитывают часто конкретной среды.</span><span class="sxs-lookup"><span data-stu-id="2a772-195">hello first reason is that metric names are frequently environment-specific.</span></span> <span data-ttu-id="2a772-196">При отсутствии утвержденный контракт на месте, невозможно убедитесь, что эта метрика hello «Ядра» в одной среде, не является «MiliCores» или «Ядра» в других.</span><span class="sxs-lookup"><span data-stu-id="2a772-196">Unless there is a firm contract in place, you cannot be sure that hello metric "Cores" in one environment isn't "MiliCores" or "CoReS" in others.</span></span> <span data-ttu-id="2a772-197">Если показатели определяются в манифесте необходимо toocreate новые манифесты для среды.</span><span class="sxs-lookup"><span data-stu-id="2a772-197">If your metrics are defined in your manifest you need toocreate new manifests per environment.</span></span> <span data-ttu-id="2a772-198">В связи с увеличением tooa разных манифестов с только незначительные различия, которые может вызвать трудности toomanagement.</span><span class="sxs-lookup"><span data-stu-id="2a772-198">This usually leads tooa proliferation of different manifests with only minor differences, which can lead toomanagement difficulties.</span></span>  
>
> <span data-ttu-id="2a772-199">Как правило, нагрузки метрик назначаются на уровне отдельных именованных экземпляров служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-199">Metric loads are commonly assigned on a per-named-service-instance basis.</span></span> <span data-ttu-id="2a772-200">Например, предположим, что можно создать один экземпляр hello service для CustomerA, кто планирует toouse его лишь в незначительной степени.</span><span class="sxs-lookup"><span data-stu-id="2a772-200">For example, let's say you create one instance of hello service for CustomerA who plans toouse it only lightly.</span></span> <span data-ttu-id="2a772-201">Также предположим, что вы создаете другую службу для клиента Б, рабочая нагрузка которого больше.</span><span class="sxs-lookup"><span data-stu-id="2a772-201">Let's also say you create another for CustomerB who has a larger workload.</span></span> <span data-ttu-id="2a772-202">В этом случае может потребоваться по умолчанию hello tootweak загружает для этих служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-202">In this case, you'd probably want tootweak hello default loads for those services.</span></span> <span data-ttu-id="2a772-203">При наличии метрик и загружает, определенное через манифесты и вы хотите toosupport этот сценарий, требуется другое приложение, а типы службы для каждого клиента.</span><span class="sxs-lookup"><span data-stu-id="2a772-203">If you have metrics and loads defined via manifests and you want toosupport this scenario, it requires different application and service types for each customer.</span></span> <span data-ttu-id="2a772-204">Hello значений, определенных во время создания службы переопределяют определен в манифесте hello, поэтому можно использовать, tooset hello значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2a772-204">hello values defined at service creation time override those defined in hello manifest, so you could use that tooset hello specific defaults.</span></span> <span data-ttu-id="2a772-205">Тем не менее это то hello значения объявлены в hello манифесты toonot совпадают, эти службы hello фактически выполняется с.</span><span class="sxs-lookup"><span data-stu-id="2a772-205">However, doing that causes hello values declared in hello manifests toonot match those hello service actually runs with.</span></span> <span data-ttu-id="2a772-206">Это может привести к tooconfusion.</span><span class="sxs-lookup"><span data-stu-id="2a772-206">This can lead tooconfusion.</span></span> 
>

<span data-ttu-id="2a772-207">Для напоминания: Если необходимо просто метрики по умолчанию hello toouse не нужна коллекция метрик hello tootouch во всех или выполнять никаких особых действий при создании службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-207">As a reminder: if you just want toouse hello default metrics, you don’t need tootouch hello metrics collection at all or do anything special when creating your service.</span></span> <span data-ttu-id="2a772-208">метрики по умолчанию Hello получить используется автоматически, когда другие не определены.</span><span class="sxs-lookup"><span data-stu-id="2a772-208">hello default metrics get used automatically when no others are defined.</span></span> 

<span data-ttu-id="2a772-209">Теперь разберем каждого из этих параметров более подробно и говорить о hello поведение, которое оно влияет.</span><span class="sxs-lookup"><span data-stu-id="2a772-209">Now, let's go through each of these settings in more detail and talk about hello behavior that it influences.</span></span>

## <a name="load"></a><span data-ttu-id="2a772-210">загрузить</span><span class="sxs-lookup"><span data-stu-id="2a772-210">Load</span></span>
<span data-ttu-id="2a772-211">Здравствуйте смысл определение метрики является toorepresent повышению нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2a772-211">hello whole point of defining metrics is toorepresent some load.</span></span> <span data-ttu-id="2a772-212">*Нагрузка* — это количество единиц определенной метрики, используемое экземпляром или репликой службы на заданном узле.</span><span class="sxs-lookup"><span data-stu-id="2a772-212">*Load* is how much of a given metric is consumed by some service instance or replica on a given node.</span></span> <span data-ttu-id="2a772-213">Нагрузку можно настроить практически в любой момент.</span><span class="sxs-lookup"><span data-stu-id="2a772-213">Load can be configured at almost any point.</span></span> <span data-ttu-id="2a772-214">Например:</span><span class="sxs-lookup"><span data-stu-id="2a772-214">For example:</span></span>

  - <span data-ttu-id="2a772-215">Можно определить нагрузку при создании службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-215">Load can be defined when a service is created.</span></span> <span data-ttu-id="2a772-216">Она называется _нагрузкой по умолчанию_.</span><span class="sxs-lookup"><span data-stu-id="2a772-216">This is called _default load_.</span></span>
  - <span data-ttu-id="2a772-217">загружает сведения метрики Hello, включая по умолчанию, для службы можно обновить после создания службы hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-217">hello metric information, including default loads, for a service can updated after hello service is created.</span></span> <span data-ttu-id="2a772-218">Это называется _обновлением службы_.</span><span class="sxs-lookup"><span data-stu-id="2a772-218">This is called _updating a service_.</span></span> 
  - <span data-ttu-id="2a772-219">Загружает Hello для данной секции может быть значения по умолчанию toohello сброса для этой службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-219">hello loads for a given partition can be reset toohello default values for that service.</span></span> <span data-ttu-id="2a772-220">Это называется _сбросом нагрузки секции_.</span><span class="sxs-lookup"><span data-stu-id="2a772-220">This is called _resetting partition load_.</span></span>
  - <span data-ttu-id="2a772-221">Можно создавать отчеты о динамической нагрузке каждого объекта службы во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="2a772-221">Load can be reported on a per service object basis dynamically during runtime.</span></span> <span data-ttu-id="2a772-222">Это называется _созданием отчетов о нагрузке_.</span><span class="sxs-lookup"><span data-stu-id="2a772-222">This is called _reporting load_.</span></span> 
  
<span data-ttu-id="2a772-223">Все эти стратегии можно использовать в hello же службы в течение времени существования.</span><span class="sxs-lookup"><span data-stu-id="2a772-223">All of these strategies can be used within hello same service over its lifetime.</span></span> 

## <a name="default-load"></a><span data-ttu-id="2a772-224">Нагрузка по умолчанию</span><span class="sxs-lookup"><span data-stu-id="2a772-224">Default load</span></span>
<span data-ttu-id="2a772-225">*По умолчанию нагрузки* — метрики hello потребляет каждый объект службы (без сохранения состояния экземпляра или реплики с отслеживанием состояния) этой службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-225">*Default load* is how much of hello metric each service object (stateless instance or stateful replica) of this service consumes.</span></span> <span data-ttu-id="2a772-226">Hello диспетчер ресурсов кластера использует это число для загрузки hello объекта службы hello, пока не получит другие сведения, такие как динамический загрузить отчет.</span><span class="sxs-lookup"><span data-stu-id="2a772-226">hello Cluster Resource Manager uses this number for hello load of hello service object until it receives other information, such as a dynamic load report.</span></span> <span data-ttu-id="2a772-227">Для более простой службы нагрузки по умолчанию hello представляет собой статический определение.</span><span class="sxs-lookup"><span data-stu-id="2a772-227">For simpler services, hello default load is a static definition.</span></span> <span data-ttu-id="2a772-228">загрузки по умолчанию Hello никогда не обновляется и используется для hello времени существования службы hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-228">hello default load is never updated and is used for hello lifetime of hello service.</span></span> <span data-ttu-id="2a772-229">По умолчанию загружает прекрасно работает для простых сценариях, где определенные периоды времени, выделенный toodifferent рабочих нагрузок и не изменяйте для оптимизации производительности.</span><span class="sxs-lookup"><span data-stu-id="2a772-229">Default loads works great for simple capacity planning scenarios where certain amounts of resources are dedicated toodifferent workloads and do not change.</span></span>

> [!NOTE]
> <span data-ttu-id="2a772-230">Дополнительные сведения о управление емкостью и определение емкости hello узлы в кластер см. в разделе [в этой статье](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span><span class="sxs-lookup"><span data-stu-id="2a772-230">For more information on capacity management and defining capacities for hello nodes in your cluster, please see [this article](service-fabric-cluster-resource-manager-cluster-description.md#capacity).</span></span>
> 

<span data-ttu-id="2a772-231">Hello диспетчер ресурсов кластера позволяет toospecify служб с отслеживанием состояния нагрузки по умолчанию для своих источников и баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="2a772-231">hello Cluster Resource Manager allows stateful services toospecify a different default load for their Primaries and Secondaries.</span></span> <span data-ttu-id="2a772-232">Службы без сохранения состояния можно указать только одно значение, которое применяет tooall экземпляры.</span><span class="sxs-lookup"><span data-stu-id="2a772-232">Stateless services can only specify one value that applies tooall instances.</span></span> <span data-ttu-id="2a772-233">Для служб с отслеживанием состояния hello нагрузки по умолчанию для первичной и вторичной реплик являются чаще всего отличаются, поскольку реплик выполнять различные виды работ в каждой роли.</span><span class="sxs-lookup"><span data-stu-id="2a772-233">For stateful services, hello default load for Primary and Secondary replicas are typically different since replicas do different kinds of work in each role.</span></span> <span data-ttu-id="2a772-234">Например в источниках обычно обслуживать операций чтения и записи и для выполнения большинства задач hello вычислительную нагрузку, а нет баз данных-получателей.</span><span class="sxs-lookup"><span data-stu-id="2a772-234">For example, Primaries usually serve both reads and writes, and handle most of hello computational burden, while secondaries do not.</span></span> <span data-ttu-id="2a772-235">Обычно hello нагрузки по умолчанию для первичной реплики больше, чем нагрузки по умолчанию hello для вторичных реплик.</span><span class="sxs-lookup"><span data-stu-id="2a772-235">Usually hello default load for a primary replica is higher than hello default load for secondary replicas.</span></span> <span data-ttu-id="2a772-236">Hello вещественных чисел, должны использовать размеры.</span><span class="sxs-lookup"><span data-stu-id="2a772-236">hello real numbers should depend on your own measurements.</span></span>

## <a name="dynamic-load"></a><span data-ttu-id="2a772-237">Динамическая нагрузка</span><span class="sxs-lookup"><span data-stu-id="2a772-237">Dynamic load</span></span>
<span data-ttu-id="2a772-238">Предположим, что ваша служба работает уже некоторое время.</span><span class="sxs-lookup"><span data-stu-id="2a772-238">Let’s say that you’ve been running your service for a while.</span></span> <span data-ttu-id="2a772-239">С помощью средств мониторинга вы определили, что:</span><span class="sxs-lookup"><span data-stu-id="2a772-239">With some monitoring, you’ve noticed that:</span></span>

1. <span data-ttu-id="2a772-240">некоторые разделы или экземпляры данной службы потребляют больше ресурсов, чем другие;</span><span class="sxs-lookup"><span data-stu-id="2a772-240">Some partitions or instances of a given service consume more resources than others</span></span>
2. <span data-ttu-id="2a772-241">нагрузки некоторых служб меняются с течением времени.</span><span class="sxs-lookup"><span data-stu-id="2a772-241">Some services have load that varies over time.</span></span>

<span data-ttu-id="2a772-242">Такого рода колебания нагрузки могут возникать по различным причинам.</span><span class="sxs-lookup"><span data-stu-id="2a772-242">There's lots of things that could cause these types of load fluctuations.</span></span> <span data-ttu-id="2a772-243">Например, разные службы или секции могут быть связаны с разными клиентами с отличающимися требованиями.</span><span class="sxs-lookup"><span data-stu-id="2a772-243">For example, different services or partitions are associated with different customers with different requirements.</span></span> <span data-ttu-id="2a772-244">Нагрузки можно также изменить, так как hello объем работы службы hello меняется в течение hello hello день.</span><span class="sxs-lookup"><span data-stu-id="2a772-244">Load could also change because hello amount of work hello service does varies over hello course of hello day.</span></span> <span data-ttu-id="2a772-245">Независимо от причины hello обычно отсутствует номер один, можно использовать по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="2a772-245">Regardless of hello reason, there’s usually no single number that you can use for default.</span></span> <span data-ttu-id="2a772-246">Это особенно важно, если требуется использование большинства из кластера hello tooget hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-246">This is especially true if you want tooget hello most utilization out of hello cluster.</span></span> <span data-ttu-id="2a772-247">Любое значение, выбранное для загрузки по умолчанию неверный часть времени hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-247">Any value you pick for default load is wrong some of hello time.</span></span> <span data-ttu-id="2a772-248">Неверный по умолчанию загружает результат в hello диспетчер ресурсов кластера над или под выделение ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2a772-248">Incorrect default loads result in hello Cluster Resource Manager either over or under allocating resources.</span></span> <span data-ttu-id="2a772-249">В результате имеется узлов, которые превышают используются несмотря на то, что диспетчер ресурсов кластера hello полагает, что hello кластера сбалансирован.</span><span class="sxs-lookup"><span data-stu-id="2a772-249">As a result, you have nodes that are over or under utilized even though hello Cluster Resource Manager thinks hello cluster is balanced.</span></span> <span data-ttu-id="2a772-250">И все же использовать нагрузки по умолчанию весьма удобно, так как они предоставляют определенные сведения для первоначального размещения, хотя и не отражают реальное состояние рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="2a772-250">Default loads are still good since they provide some information for initial placement, but they're not a complete story for real workloads.</span></span> <span data-ttu-id="2a772-251">Захват tooaccurately изменение требований к ресурсам, hello диспетчер ресурсов кластера позволяет tooupdate объекта каждой службы собственный нагрузки во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="2a772-251">tooaccurately capture changing resource requirements, hello Cluster Resource Manager allows each service object tooupdate its own load during runtime.</span></span> <span data-ttu-id="2a772-252">Это называется передачей данных о динамической нагрузке.</span><span class="sxs-lookup"><span data-stu-id="2a772-252">This is called dynamic load reporting.</span></span>

<span data-ttu-id="2a772-253">Динамическая загрузка отчетов разрешать реплики или экземпляров tooadjust их/сообщил распределения нагрузки метрик по времени их существования.</span><span class="sxs-lookup"><span data-stu-id="2a772-253">Dynamic load reports allow replicas or instances tooadjust their allocation/reported load of metrics over their lifetime.</span></span> <span data-ttu-id="2a772-254">Реплики или экземпляры службы, которые простаивали и не выполняли никакой работы, обычно сообщают, что они использовали меньшее количество заданной метрики.</span><span class="sxs-lookup"><span data-stu-id="2a772-254">A service replica or instance that was cold and not doing any work would usually report that it was using low amounts of a given metric.</span></span> <span data-ttu-id="2a772-255">В то же время загруженные реплики или экземпляры сообщают, что они используют больше ресурсов.</span><span class="sxs-lookup"><span data-stu-id="2a772-255">A busy replica or instance would report that they are using more.</span></span>

<span data-ttu-id="2a772-256">Reporting нагрузки на реплику или экземпляр позволяет объектам отдельной службе hello hello tooreorganize диспетчер ресурсов кластера в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-256">Reporting load per replica or instance allows hello Cluster Resource Manager tooreorganize hello individual service objects in hello cluster.</span></span> <span data-ttu-id="2a772-257">Реорганизация hello служб гарантирует получение hello ресурсы, которые необходимы.</span><span class="sxs-lookup"><span data-stu-id="2a772-257">Reorganizing hello services helps ensure that they get hello resources they require.</span></span> <span data-ttu-id="2a772-258">Занят services эффективно получить слишком «освободить» ресурсов из других реплик или экземпляры, которые в данный момент холодного или меньше работой.</span><span class="sxs-lookup"><span data-stu-id="2a772-258">Busy services effectively get too"reclaim" resources from other replicas or instances that are currently cold or doing less work.</span></span>

<span data-ttu-id="2a772-259">В надежных служб нагрузки tooreport кода hello динамически выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="2a772-259">Within Reliable Services, hello code tooreport load dynamically looks like this:</span></span>

<span data-ttu-id="2a772-260">Код:</span><span class="sxs-lookup"><span data-stu-id="2a772-260">Code:</span></span>

```csharp
this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("CurrentConnectionCount", 1234), new LoadMetric("metric1", 42) });
```

<span data-ttu-id="2a772-261">Служба может указывать на любой из метрик hello, определенные для нее во время создания.</span><span class="sxs-lookup"><span data-stu-id="2a772-261">A service can report on any of hello metrics defined for it at creation time.</span></span> <span data-ttu-id="2a772-262">Если службы отчетов нагрузки для показателя, который не настроен toouse, Service Fabric игнорирует этот отчет.</span><span class="sxs-lookup"><span data-stu-id="2a772-262">If a service reports load for a metric that it is not configured toouse, Service Fabric ignores that report.</span></span> <span data-ttu-id="2a772-263">Если существуют другие метрики на обнаружил hello же времени, которые являются допустимыми, эти отчеты принимаются.</span><span class="sxs-lookup"><span data-stu-id="2a772-263">If there are other metrics reported at hello same time that are valid, those reports are accepted.</span></span> <span data-ttu-id="2a772-264">Код службы можно измерять и отчетов все hello метрики, он знает, как и операторы могут указывать toouse hello метрики конфигурации без необходимости код службы toochange hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-264">Service code can measure and report all hello metrics it knows how to, and operators can specify hello metric configuration toouse without having toochange hello service code.</span></span> 

### <a name="updating-a-services-metric-configuration"></a><span data-ttu-id="2a772-265">Обновление конфигурации метрик службы</span><span class="sxs-lookup"><span data-stu-id="2a772-265">Updating a service's metric configuration</span></span>
<span data-ttu-id="2a772-266">Список Hello метрик, связанных с службы hello и hello свойства метрик могут обновляться динамически во время динамической hello службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-266">hello list of metrics associated with hello service, and hello properties of those metrics can be updated dynamically while hello service is live.</span></span> <span data-ttu-id="2a772-267">Это позволяет экспериментировать и обеспечивает гибкость.</span><span class="sxs-lookup"><span data-stu-id="2a772-267">This allows for experimentation and flexibility.</span></span> <span data-ttu-id="2a772-268">Ниже приведено несколько примеров, когда это удобно использовать:</span><span class="sxs-lookup"><span data-stu-id="2a772-268">Some examples of when this is useful are:</span></span>

  - <span data-ttu-id="2a772-269">отключение метрики с ошибками в отчете для определенной службы;</span><span class="sxs-lookup"><span data-stu-id="2a772-269">disabling a metric with a buggy report for a particular service</span></span>
  - <span data-ttu-id="2a772-270">Перенастройка весовые коэффициенты hello метрик, в зависимости от требуемого поведения</span><span class="sxs-lookup"><span data-stu-id="2a772-270">reconfiguring hello weights of metrics based on desired behavior</span></span>
  - <span data-ttu-id="2a772-271">Включение нового метрика только после кода hello уже развернуты и через другие механизмы проверки</span><span class="sxs-lookup"><span data-stu-id="2a772-271">enabling a new metric only after hello code has already been deployed and validated via other mechanisms</span></span>
  - <span data-ttu-id="2a772-272">Изменение hello нагрузки по умолчанию для служб, основываясь на поведение и потребление</span><span class="sxs-lookup"><span data-stu-id="2a772-272">changing hello default load for a service based on observed behavior and consumption</span></span>

<span data-ttu-id="2a772-273">Hello основной API для изменение метрические конфигурации являются `FabricClient.ServiceManagementClient.UpdateServiceAsync` в C# и `Update-ServiceFabricService` в PowerShell.</span><span class="sxs-lookup"><span data-stu-id="2a772-273">hello main APIs for changing metric configuration are `FabricClient.ServiceManagementClient.UpdateServiceAsync` in C# and `Update-ServiceFabricService` in PowerShell.</span></span> <span data-ttu-id="2a772-274">Сведения, указывается с помощью этих API заменяет hello существующие данные о метриках для службы hello немедленно.</span><span class="sxs-lookup"><span data-stu-id="2a772-274">Whatever information you specify with these APIs replaces hello existing metric information for hello service immediately.</span></span> 

## <a name="mixing-default-load-values-and-dynamic-load-reports"></a><span data-ttu-id="2a772-275">Совместное использование значений нагрузки по умолчанию и отчетов о динамической загрузке</span><span class="sxs-lookup"><span data-stu-id="2a772-275">Mixing default load values and dynamic load reports</span></span>
<span data-ttu-id="2a772-276">Загрузки по умолчанию и динамической загрузки может использоваться для hello одной службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-276">Default load and dynamic loads can be used for hello same service.</span></span> <span data-ttu-id="2a772-277">Если служба использует нагрузку по умолчанию и отчеты о динамической нагрузке, то нагрузка по умолчанию служит в качестве оценочного значения, пока не появятся отчеты о динамической нагрузке.</span><span class="sxs-lookup"><span data-stu-id="2a772-277">When a service utilizes both default load and dynamic load reports, default load serves as an estimate until dynamic reports show up.</span></span> <span data-ttu-id="2a772-278">Загрузки по умолчанию является хорошим, потому что он дает hello диспетчер ресурсов кластера что-нибудь toowork с.</span><span class="sxs-lookup"><span data-stu-id="2a772-278">Default load is good because it gives hello Cluster Resource Manager something toowork with.</span></span> <span data-ttu-id="2a772-279">нагрузки по умолчанию Hello позволяет hello tooplace диспетчер ресурсов кластера объектов службы hello в хорошо расположения при их создании.</span><span class="sxs-lookup"><span data-stu-id="2a772-279">hello default load allows hello Cluster Resource Manager tooplace hello service objects in good locations when they are created.</span></span> <span data-ttu-id="2a772-280">Если сведения по умолчанию не предоставляются, службы размещаются практически произвольно.</span><span class="sxs-lookup"><span data-stu-id="2a772-280">If no default load information is provided, placement of services is effectively random.</span></span> <span data-ttu-id="2a772-281">По прибытии нагрузки отчеты позже исходное размещение случайного hello часто неверное и hello диспетчер ресурсов кластера есть toomove службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-281">When load reports arrive later hello initial random placement is often wrong and hello Cluster Resource Manager has toomove services.</span></span>

<span data-ttu-id="2a772-282">Возьмем наш предыдущий пример и посмотрим, что произойдет, если мы добавим пользовательские метрики и будем динамически создавать отчеты о нагрузке.</span><span class="sxs-lookup"><span data-stu-id="2a772-282">Let’s take our previous example and see what happens when we add some custom metrics and dynamic load reporting.</span></span> <span data-ttu-id="2a772-283">В этом примере мы используем метрику MemoryInMb.</span><span class="sxs-lookup"><span data-stu-id="2a772-283">In this example, we use “MemoryInMb” as an example metric.</span></span>

> [!NOTE]
> <span data-ttu-id="2a772-284">Памяти является одним из метрик системы hello, Service Fabric можно [управляют ресурсов](service-fabric-resource-governance.md), и обычно трудно reporting самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="2a772-284">Memory is one of hello system metrics that Service Fabric can [resource govern](service-fabric-resource-governance.md), and reporting it yourself is typically difficult.</span></span> <span data-ttu-id="2a772-285">Не ожидается, что фактически вы tooreport потребление памяти; Память используется здесь как вспомогательное средство toolearning о возможностях hello hello диспетчер ресурсов кластера.</span><span class="sxs-lookup"><span data-stu-id="2a772-285">We don't actually expect you tooreport on Memory consumption; Memory is used here as an aid toolearning about hello capabilities of hello Cluster Resource Manager.</span></span>
>

<span data-ttu-id="2a772-286">Давайте предположим, изначально созданного hello службы с отслеживанием состояния с hello следующую команду:</span><span class="sxs-lookup"><span data-stu-id="2a772-286">Let’s presume that we initially created hello stateful service with hello following command:</span></span>

<span data-ttu-id="2a772-287">PowerShell:</span><span class="sxs-lookup"><span data-stu-id="2a772-287">Powershell:</span></span>

```posh
New-ServiceFabricService -ApplicationName $applicationName -ServiceName $serviceName -ServiceTypeName $serviceTypeName –Stateful -MinReplicaSetSize 3 -TargetReplicaSetSize 3 -PartitionSchemeSingleton –Metric @("MemoryInMb,High,21,11”,"PrimaryCount,Medium,1,0”,"ReplicaCount,Low,1,1”,"Count,Low,1,1”)
```

<span data-ttu-id="2a772-288">Напомним, что синтаксис выглядит следующим образом: ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span><span class="sxs-lookup"><span data-stu-id="2a772-288">As a reminder, this syntax is ("MetricName, MetricWeight, PrimaryDefaultLoad, SecondaryDefaultLoad").</span></span>

<span data-ttu-id="2a772-289">Один из возможных макетов кластера может выглядеть как:</span><span class="sxs-lookup"><span data-stu-id="2a772-289">Let's see what one possible cluster layout could look like:</span></span>

<span data-ttu-id="2a772-290"><center>
![Сбалансированный кластер с метриками по умолчанию и пользовательскими метриками][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="2a772-290"><center>
![Cluster Balanced with both Default and Custom metrics][Image2]
</center></span></span>

<span data-ttu-id="2a772-291">Обратите внимание на следующие факторы.</span><span class="sxs-lookup"><span data-stu-id="2a772-291">Some things that are worth noting:</span></span>

* <span data-ttu-id="2a772-292">Вторичные реплики в секции могут иметь собственные нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2a772-292">Secondary replicas within a partition can each have their own load</span></span>
* <span data-ttu-id="2a772-293">В целом показатели hello найдите балансировкой.</span><span class="sxs-lookup"><span data-stu-id="2a772-293">Overall hello metrics look balanced.</span></span> <span data-ttu-id="2a772-294">Объем памяти, hello соотношение между hello максимальное и минимальное нагрузки — 1,75 (hello узла с hello наибольшую нагрузку N3, hello бы N2 и 28/16 = 1,75).</span><span class="sxs-lookup"><span data-stu-id="2a772-294">For Memory, hello ratio between hello maximum and minimum load is 1.75 (hello node with hello most load is N3, hello least is N2, and 28/16 = 1.75).</span></span>

<span data-ttu-id="2a772-295">Существуют некоторые особенности, что мы по-прежнему должны tooexplain:</span><span class="sxs-lookup"><span data-stu-id="2a772-295">There are some things that we still need tooexplain:</span></span>

* <span data-ttu-id="2a772-296">Как определить, является ли соотношение 1,75 разумным?</span><span class="sxs-lookup"><span data-stu-id="2a772-296">What determined whether a ratio of 1.75 was reasonable or not?</span></span> <span data-ttu-id="2a772-297">Как узнает hello диспетчер ресурсов кластера в случае достаточно хорошо, или если существует несколько toodo рабочих?</span><span class="sxs-lookup"><span data-stu-id="2a772-297">How does hello Cluster Resource Manager know if that’s good enough or if there is more work toodo?</span></span>
* <span data-ttu-id="2a772-298">Когда происходит балансировка нагрузки?</span><span class="sxs-lookup"><span data-stu-id="2a772-298">When does balancing happen?</span></span>
* <span data-ttu-id="2a772-299">Что означает, если вес метрики "Память" определен как высокий?</span><span class="sxs-lookup"><span data-stu-id="2a772-299">What does it mean that Memory was weighted “High”?</span></span>

## <a name="metric-weights"></a><span data-ttu-id="2a772-300">Вес метрик</span><span class="sxs-lookup"><span data-stu-id="2a772-300">Metric weights</span></span>
<span data-ttu-id="2a772-301">Отслеживание hello же важные метрики в разных службах.</span><span class="sxs-lookup"><span data-stu-id="2a772-301">Tracking hello same metrics across different services is important.</span></span> <span data-ttu-id="2a772-302">Что глобальное представление является то, что позволяет hello потребления tootrack диспетчер ресурсов кластера в кластере hello, сальдо по узлам потребления и убедитесь, что узлы не выходят емкости.</span><span class="sxs-lookup"><span data-stu-id="2a772-302">That global view is what allows hello Cluster Resource Manager tootrack consumption in hello cluster, balance consumption across nodes, and ensure that nodes don’t go over capacity.</span></span> <span data-ttu-id="2a772-303">Тем не менее, службы могут иметь различные представления как toohello важность hello одинаковую метрику.</span><span class="sxs-lookup"><span data-stu-id="2a772-303">However, services may have different views as toohello importance of hello same metric.</span></span> <span data-ttu-id="2a772-304">Кроме того, в кластере с множеством метрик и большим количеством служб для некоторых метрик полностью сбалансированные решения могут и не существовать.</span><span class="sxs-lookup"><span data-stu-id="2a772-304">Also, in a cluster with many metrics and lots of services, perfectly balanced solutions may not exist for all metrics.</span></span> <span data-ttu-id="2a772-305">Как hello диспетчер ресурсов кластера должна обрабатывать такие ситуации?</span><span class="sxs-lookup"><span data-stu-id="2a772-305">How should hello Cluster Resource Manager handle these situations?</span></span>

<span data-ttu-id="2a772-306">Метрической системы весов разрешить hello toodecide диспетчер ресурсов кластера, как toobalance hello кластеру, когда точной ответа нет.</span><span class="sxs-lookup"><span data-stu-id="2a772-306">Metric weights allow hello Cluster Resource Manager toodecide how toobalance hello cluster when there’s no perfect answer.</span></span> <span data-ttu-id="2a772-307">Вес метрики также позволяют hello диспетчер ресурсов кластера toobalance определенных служб по-разному.</span><span class="sxs-lookup"><span data-stu-id="2a772-307">Metric weights also allow hello Cluster Resource Manager toobalance specific services differently.</span></span> <span data-ttu-id="2a772-308">Метрики могут иметь четыре разных уровня веса: нулевой, низкий, средний и высокий.</span><span class="sxs-lookup"><span data-stu-id="2a772-308">Metrics can have four different weight levels: Zero, Low, Medium, and High.</span></span> <span data-ttu-id="2a772-309">Метрика с нулевым весом не играет роли для балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="2a772-309">A metric with a weight of Zero contributes nothing when considering whether things are balanced or not.</span></span> <span data-ttu-id="2a772-310">Однако его нагрузки по-прежнему примененные toocapacity управления.</span><span class="sxs-lookup"><span data-stu-id="2a772-310">However, its load does still contribute toocapacity management.</span></span> <span data-ttu-id="2a772-311">Метрики с нулевым весом удобны и часто используются для настройки поведения службы и отслеживания производительности.</span><span class="sxs-lookup"><span data-stu-id="2a772-311">Metrics with Zero weight are still useful and are frequently used as a part of service behavior and performance monitoring.</span></span> <span data-ttu-id="2a772-312">[В этой статье](service-fabric-diagnostics-event-generation-infra.md) подробно описывает использование hello метрики для наблюдения и диагностики служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-312">[This article](service-fabric-diagnostics-event-generation-infra.md) provides more information on hello use of metrics for monitoring and diagnostics of your services.</span></span> 

<span data-ttu-id="2a772-313">Hello реальных последствий различных метрической системы весов в кластере hello — что hello диспетчер ресурсов кластера приводит к возникновению ошибки различные решения.</span><span class="sxs-lookup"><span data-stu-id="2a772-313">hello real impact of different metric weights in hello cluster is that hello Cluster Resource Manager generates different solutions.</span></span> <span data-ttu-id="2a772-314">Метрической системы весов сообщить hello диспетчер ресурсов кластера, что некоторые показатели, более важной, чем другие.</span><span class="sxs-lookup"><span data-stu-id="2a772-314">Metric weights tell hello Cluster Resource Manager that certain metrics are more important than others.</span></span> <span data-ttu-id="2a772-315">При наличии hello не идеальное решение диспетчер ресурсов кластера можно выбирать решений, выполняющие hello выше взвешенного метрики лучшую балансировку.</span><span class="sxs-lookup"><span data-stu-id="2a772-315">When there's no perfect solution hello Cluster Resource Manager can prefer solutions which balance hello higher weighted metrics better.</span></span> <span data-ttu-id="2a772-316">Если определенная метрика неважна для какой-либо службы, то с точки зрения диспетчера кластерных ресурсов ее использование может казаться несбалансированным.</span><span class="sxs-lookup"><span data-stu-id="2a772-316">If a service thinks a particular metric is unimportant, it may find their use of that metric imbalanced.</span></span> <span data-ttu-id="2a772-317">Это позволяет другим tooget службы равномерное распределение некоторые метрику, является важным tooit.</span><span class="sxs-lookup"><span data-stu-id="2a772-317">This allows another service tooget an even distribution of some metric that is important tooit.</span></span>

<span data-ttu-id="2a772-318">Давайте рассмотрим пример некоторые отчеты о загрузке и как различные метрики смещать баланс результатов в различных выделений в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-318">Let’s look at an example of some load reports and how different metric weights results in different allocations in hello cluster.</span></span> <span data-ttu-id="2a772-319">В этом примере мы видим, что переключение hello относительный вес метрики hello приводит hello диспетчер ресурсов кластера toocreate различных вариантов расположения служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-319">In this example, we see that switching hello relative weight of hello metrics causes hello Cluster Resource Manager toocreate different arrangements of services.</span></span>

<span data-ttu-id="2a772-320"><center>
![Пример веса метрики и его влияния на решения балансировки нагрузки][Image3]
</center></span><span class="sxs-lookup"><span data-stu-id="2a772-320"><center>
![Metric Weight Example and Its Impact on Balancing Solutions][Image3]
</center></span></span>

<span data-ttu-id="2a772-321">В этом примере используются четыре разные службы. Все они сообщают разные значения для двух метрик, MetricA и MetricB.</span><span class="sxs-lookup"><span data-stu-id="2a772-321">In this example, there are four different services, all reporting different values for two different metrics, MetricA and MetricB.</span></span> <span data-ttu-id="2a772-322">В первом случае все службы hello определяют MetricA — наиболее важной hello (вес = высокий) и MetricB как незначительной (вес = низкий).</span><span class="sxs-lookup"><span data-stu-id="2a772-322">In one case, all hello services define MetricA is hello most important one (Weight = High) and MetricB as unimportant (Weight = Low).</span></span> <span data-ttu-id="2a772-323">В результате мы увидим, что этой hello диспетчер ресурсов кластера помещает hello служб таким образом, чтобы лучше балансировкой чем MetricB MetricA.</span><span class="sxs-lookup"><span data-stu-id="2a772-323">As a result, we see that hello Cluster Resource Manager places hello services so that MetricA is better balanced than MetricB.</span></span> <span data-ttu-id="2a772-324">"Лучше сбалансирована" означает, что среднеквадратичное отклонение метрики MetricA меньше, чем среднеквадратичное отклонение метрики MetricB.</span><span class="sxs-lookup"><span data-stu-id="2a772-324">"Better balanced" means that MetricA has a lower has a lower standard deviation than MetricB.</span></span> <span data-ttu-id="2a772-325">В втором случае hello мы обратная метрической системы весов hello.</span><span class="sxs-lookup"><span data-stu-id="2a772-325">In hello second case, we reverse hello metric weights.</span></span> <span data-ttu-id="2a772-326">В результате hello диспетчер ресурсов кластера меняет службы A и B toocome копирование выделения памяти, где MetricB лучше чем MetricA балансировкой.</span><span class="sxs-lookup"><span data-stu-id="2a772-326">As a result, hello Cluster Resource Manager swaps services A and B toocome up with an allocation where MetricB is better balanced than MetricA.</span></span>

> [!NOTE]
> <span data-ttu-id="2a772-327">Метрической системы весов определяют, как следует сбалансировать hello диспетчер ресурсов кластера, но не когда балансировки должно выполняться.</span><span class="sxs-lookup"><span data-stu-id="2a772-327">Metric weights determine how hello Cluster Resource Manager should balance, but not when balancing should happen.</span></span> <span data-ttu-id="2a772-328">Дополнительные сведения о балансировке см. в [этой статье](service-fabric-cluster-resource-manager-balancing.md).</span><span class="sxs-lookup"><span data-stu-id="2a772-328">For more information on balancing, check out [this article](service-fabric-cluster-resource-manager-balancing.md)</span></span>
>

### <a name="global-metric-weights"></a><span data-ttu-id="2a772-329">Глобальный вес метрик</span><span class="sxs-lookup"><span data-stu-id="2a772-329">Global metric weights</span></span>
<span data-ttu-id="2a772-330">Предположим, что ServiceA определяет MetricA как вес высокой, а ServiceB задает вес hello для MetricA tooLow или ноль.</span><span class="sxs-lookup"><span data-stu-id="2a772-330">Let's say ServiceA defines MetricA as weight High, and ServiceB sets hello weight for MetricA tooLow or Zero.</span></span> <span data-ttu-id="2a772-331">Что такое hello фактическое вес, который заканчивается привыкли?</span><span class="sxs-lookup"><span data-stu-id="2a772-331">What’s hello actual weight that ends up getting used?</span></span>

<span data-ttu-id="2a772-332">Для каждой метрики отслеживаются несколько весов.</span><span class="sxs-lookup"><span data-stu-id="2a772-332">There are multiple weights that are tracked for every metric.</span></span> <span data-ttu-id="2a772-333">Вес первой Hello — hello, один для метрики hello определено при создании hello службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-333">hello first weight is hello one defined for hello metric when hello service is created.</span></span> <span data-ttu-id="2a772-334">Hello других веса является глобальной вес, который вычисляется автоматически.</span><span class="sxs-lookup"><span data-stu-id="2a772-334">hello other weight is a global weight, which is computed automatically.</span></span> <span data-ttu-id="2a772-335">Hello диспетчер ресурсов кластера использует оба этих весовых коэффициентов при оценке решения.</span><span class="sxs-lookup"><span data-stu-id="2a772-335">hello Cluster Resource Manager uses both these weights when scoring solutions.</span></span> <span data-ttu-id="2a772-336">Важно учитывать оба эти веса.</span><span class="sxs-lookup"><span data-stu-id="2a772-336">Taking both weights into account is important.</span></span> <span data-ttu-id="2a772-337">Это позволяет каждой службы соответствующим tooits собственному приоритеты и обеспечьте hello кластера как неправильное выделение всего hello toobalance диспетчер ресурсов кластера.</span><span class="sxs-lookup"><span data-stu-id="2a772-337">This allows hello Cluster Resource Manager toobalance each service according tooits own priorities, and also ensure that hello cluster as a whole is allocated correctly.</span></span>

<span data-ttu-id="2a772-338">Что произойдет, если диспетчер ресурсов кластера hello не интересует глобальные и локальные баланс?</span><span class="sxs-lookup"><span data-stu-id="2a772-338">What would happen if hello Cluster Resource Manager didn’t care about both global and local balance?</span></span> <span data-ttu-id="2a772-339">Также это легко tooconstruct решений, распределяются глобально, но что привести в балансе низкой ресурсов для отдельных служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-339">Well, it’s easy tooconstruct solutions that are globally balanced, but which result in poor resource balance for individual services.</span></span> <span data-ttu-id="2a772-340">В следующем примере hello рассмотрим службе, настроенной с только что метрики по умолчанию hello и увидеть, что произойдет, если только глобальные баланс считается:</span><span class="sxs-lookup"><span data-stu-id="2a772-340">In hello following example, let’s look at a service configured with just hello default metrics, and see what happens when only global balance is considered:</span></span>

<span data-ttu-id="2a772-341"><center>
![Влияние глобальное решение только Hello][Image4]
</center></span><span class="sxs-lookup"><span data-stu-id="2a772-341"><center>
![hello Impact of a Global Only Solution][Image4]
</center></span></span>

<span data-ttu-id="2a772-342">В примере top hello основываются только на глобальной балансировки на самом деле равномерно hello кластер в целом.</span><span class="sxs-lookup"><span data-stu-id="2a772-342">In hello top example based only on global balance, hello cluster as a whole is indeed balanced.</span></span> <span data-ttu-id="2a772-343">Все узлы имеют hello же число в источниках и hello же число полных реплик.</span><span class="sxs-lookup"><span data-stu-id="2a772-343">All nodes have hello same count of primaries and hello same number total replicas.</span></span> <span data-ttu-id="2a772-344">Однако если взглянуть на hello влияние данного выделения это не так хорошо: hello потери любого узла влияет на конкретной рабочей нагрузки без соблюдения пропорций, так как она использует все его в источниках.</span><span class="sxs-lookup"><span data-stu-id="2a772-344">However, if you look at hello actual impact of this allocation it’s not so good: hello loss of any node impacts a particular workload disproportionately, because it takes out all of its primaries.</span></span> <span data-ttu-id="2a772-345">Например первый узел hello в случае hello три основных цвета для трех разных секций hello hello круг службы все будут потеряны.</span><span class="sxs-lookup"><span data-stu-id="2a772-345">For example, if hello first node fails hello three primaries for hello three different partitions of hello Circle service would all be lost.</span></span> <span data-ttu-id="2a772-346">И наоборот hello треугольник и шестиугольник службы имеют их разделы потерять реплики.</span><span class="sxs-lookup"><span data-stu-id="2a772-346">Conversely, hello Triangle and Hexagon services have their partitions lose a replica.</span></span> <span data-ttu-id="2a772-347">В этом случае без разрыва, отличные от необходимости hello toorecover вниз реплики.</span><span class="sxs-lookup"><span data-stu-id="2a772-347">This causes no disruption, other than having toorecover hello down replica.</span></span>

<span data-ttu-id="2a772-348">В примере hello нижней hello диспетчер ресурсов кластера с распределенными реплики hello обоих баланс hello глобальный, так и службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-348">In hello bottom example, hello Cluster Resource Manager has distributed hello replicas based on both hello global and per-service balance.</span></span> <span data-ttu-id="2a772-349">При вычислении оценки hello hello решения он предоставляет большинство hello вес toohello глобальное решение и tooindividual (значение настраивается) часть службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-349">When calculating hello score of hello solution it gives most of hello weight toohello global solution, and a (configurable) portion tooindividual services.</span></span> <span data-ttu-id="2a772-350">Глобальные баланс для метрики, рассчитывается на основании среднего hello hello метрической системы весов из каждой службы.</span><span class="sxs-lookup"><span data-stu-id="2a772-350">Global balance for a metric is calculated based on hello average of hello metric weights from each service.</span></span> <span data-ttu-id="2a772-351">Каждой службы равномерно соответствующим tooits собственные определенных метрической системы весов.</span><span class="sxs-lookup"><span data-stu-id="2a772-351">Each service is balanced according tooits own defined metric weights.</span></span> <span data-ttu-id="2a772-352">Это гарантирует, что службы hello распределяются внутри себя в соответствии с tootheir собственных нужд.</span><span class="sxs-lookup"><span data-stu-id="2a772-352">This ensures that hello services are balanced within themselves according tootheir own needs.</span></span> <span data-ttu-id="2a772-353">В результате Если hello же первый узел, сбой hello распространяется во всех разделах всех служб.</span><span class="sxs-lookup"><span data-stu-id="2a772-353">As a result, if hello same first node fails hello failure is distributed across all partitions of all services.</span></span> <span data-ttu-id="2a772-354">Здравствуйте tooeach влияние Hello, одинаково.</span><span class="sxs-lookup"><span data-stu-id="2a772-354">hello impact tooeach is hello same.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2a772-355">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2a772-355">Next steps</span></span>
- <span data-ttu-id="2a772-356">Дополнительные сведения о настройке служб см. в разделе [Настройка параметров Cluster Resource Manager для служб Service Fabric](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span><span class="sxs-lookup"><span data-stu-id="2a772-356">For more information on configuring services, [Learn about configuring Services](service-fabric-cluster-resource-manager-configure-services.md)(service-fabric-cluster-resource-manager-configure-services.md)</span></span>
- <span data-ttu-id="2a772-357">Определение метрики дефрагментации является одним из способов tooconsolidate нагрузки на узлах, а не его рассредоточения. toolearn как tooconfigure дефрагментации см. в слишком[в данной статье](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span><span class="sxs-lookup"><span data-stu-id="2a772-357">Defining Defragmentation Metrics is one way tooconsolidate load on nodes instead of spreading it out. toolearn how tooconfigure defragmentation, refer too[this article](service-fabric-cluster-resource-manager-defragmentation-metrics.md)</span></span>
- <span data-ttu-id="2a772-358">toofind out о управляет hello диспетчер ресурсов кластера и балансировку нагрузки в кластере hello Извлеките hello статьи на [балансировки нагрузки](service-fabric-cluster-resource-manager-balancing.md)</span><span class="sxs-lookup"><span data-stu-id="2a772-358">toofind out about how hello Cluster Resource Manager manages and balances load in hello cluster, check out hello article on [balancing load](service-fabric-cluster-resource-manager-balancing.md)</span></span>
- <span data-ttu-id="2a772-359">Начать с начала hello и [получить введение toohello диспетчер ресурсов кластера Service Fabric](service-fabric-cluster-resource-manager-introduction.md)</span><span class="sxs-lookup"><span data-stu-id="2a772-359">Start from hello beginning and [get an Introduction toohello Service Fabric Cluster Resource Manager](service-fabric-cluster-resource-manager-introduction.md)</span></span>
- <span data-ttu-id="2a772-360">Стоимость перемещения — один из способов передачи сигналов toohello диспетчер ресурсов кластера, что некоторые службы являются toomove дороже, чем другие.</span><span class="sxs-lookup"><span data-stu-id="2a772-360">Movement Cost is one way of signaling toohello Cluster Resource Manager that certain services are more expensive toomove than others.</span></span> <span data-ttu-id="2a772-361">toolearn Дополнительные сведения о стоимость перемещения ссылаться слишком[в данной статье](service-fabric-cluster-resource-manager-movement-cost.md)</span><span class="sxs-lookup"><span data-stu-id="2a772-361">toolearn more about movement cost, refer too[this article](service-fabric-cluster-resource-manager-movement-cost.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-cluster-layout-with-default-metrics.png
[Image2]:./media/service-fabric-cluster-resource-manager-metrics/Service-Fabric-Resource-Manager-Dynamic-Load-Reports.png
[Image3]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-metric-weights-impact.png
[Image4]:./media/service-fabric-cluster-resource-manager-metrics/cluster-resource-manager-global-vs-local-balancing.png
