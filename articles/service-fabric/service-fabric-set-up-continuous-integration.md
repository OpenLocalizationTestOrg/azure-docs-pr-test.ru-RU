---
title: "aaaSet непрерывной интеграции для Azure микрослужбами | Документы Microsoft"
description: "Общие сведения о том, как получить tooset непрерывной интеграции и развертывания для приложения Service Fabric с помощью Visual Studio Team Services (VSTS)."
services: service-fabric
documentationcenter: na
author: mthalman-msft
manager: timlt
editor: 
ms.assetid: 3e8c2290-9e7a-456a-9b2c-db44d1b3988d
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 12/06/2016
ms.author: mthalman;mikhegn
ms.openlocfilehash: 041e081f4a42f379394f2d21f07db4f6de045b24
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="set-up-service-fabric-continuous-integration-and-deployment-with-visual-studio-team-services"></a>Настройка непрерывных интеграции и развертывания с помощью Visual Studio Team Services
С помощью Visual Studio Team Services (VSTS) в этой статье описываются hello tooset шаги непрерывной интеграции и развертывания для приложения Azure Service Fabric.

В этом документе отражает текущую процедуру hello и является ожидаемым toochange со временем.

## <a name="prerequisites"></a>Предварительные требования
tooget к работе, выполните следующие действия.

1. Убедитесь, что учетная запись Team Services tooa доступа или [создать](https://www.visualstudio.com/docs/setup-admin/team-services/sign-up-for-visual-studio-team-services) самостоятельно.
2. Убедитесь, что доступ tooa Team Services командного проекта или [создать](https://www.visualstudio.com/docs/setup-admin/create-team-project) самостоятельно.
3. Убедитесь, что toowhich кластера Service Fabric, можно развернуть приложение или сделать это с помощью hello [портал Azure](service-fabric-cluster-creation-via-portal.md), [шаблона Azure Resource Manager](service-fabric-cluster-creation-via-arm.md), или [Visual Studio ](service-fabric-cluster-creation-via-visual-studio.md).
4. Убедитесь, что проект приложения Service Fabric (SFPROJ-файл) уже создан. Необходимо иметь проект, была создана или обновлена с помощью Service Fabric SDK 2.1 или более поздней версии (hello .sfproj файл должен содержать значение свойства по ProjectVersion 1.1 или более поздней версии).

> [!NOTE]
> Пользовательские агенты сборки больше не требуются. Размещенные агенты Team Services теперь устанавливаются вместе с программным обеспечением для управления кластером Service Fabric, что позволяет развертывать приложения непосредственно из этих агентов.
> 
> 

## <a name="configure-and-share-your-source-files"></a>Настройка и совместное использование исходных файлов
Hello первое, что вы хотите toodo — Подготовьте профиля публикации для использования процессом развертывания hello, которая выполняется в Team Services.  Hello профиля публикации должно быть настроенный tootarget hello кластера, которые ранее подготовлены:

1. Выберите профиль публикации в проекте приложения, toouse для непрерывной интеграции рабочего процесса. Выполните hello [публикации инструкции](service-fabric-publish-app-remote-cluster.md) о том, как toopublish удаленного кластера tooa приложений. Вам не нужны toopublish приложения хотя. Можно щелкнуть hello **Сохранить** диалоговое окно публикации гиперссылки в hello после настройки действия соответствующим образом.
2. Вы хотите toobe вашего приложения, обновления для каждого развертывания, который находится в пределах Team Services, следует ли tooconfigure hello tooenable обновление профиля публикации. Hello диалоговое окно используется таким же публикации на шаге 1, убедитесь, что hello **обновления hello приложения** установлен флажок.  Вы можете узнать больше о [настройке дополнительных параметров обновления](service-fabric-visualstudio-configure-upgrade.md). Нажмите кнопку hello **Сохранить** hello параметры гиперссылки toosave toohello профиль публикации.
3. Убедитесь, что сохраненные изменения toohello опубликовать профиль и Отмена hello диалоговое окно публикации.
4. Теперь настало время слишком[совместно использовать файлы исходного проекта приложения](https://www.visualstudio.com/docs/setup-admin/team-services/connect-to-visual-studio-team-services#vs) с Team Services. Как только исходные файлы доступны в Team Services, теперь можно переходить на следующий шаг toohello создания сборки. 

## <a name="create-a-build-definition"></a>Создание определения сборки
Определение сборки Team Services описывает рабочий процесс, состоящий из набора шагов сборки, которые выполняются последовательно. Цель Hello hello определения построения, для которого создается — tooproduce пакет Service Fabric приложения и другие артефакты, которые можно использовать toodeploy приложения hello. Узнайте больше об [определениях сборок](https://www.visualstudio.com/docs/build/define/create)Team Services.

### <a name="create-a-definition-from-hello-build-template"></a>Создание определения на основе шаблона построения hello
1. Откройте командный проект в Visual Studio Team Services.
2. Выберите hello **построения** вкладки.
3. Выберите hello зеленый  **+**  входа toocreate новое определение сборки.
4. В диалоговом окне приветствия откроется, выберите **приложение Azure Service Fabric** внутри hello **построения** категории шаблонов.
5. Щелкните **Далее**.
6. Выберите репозиторий hello и ветвь, связанных с приложением Service Fabric.
7. Выберите очереди агента hello нужно toouse. Поддерживаются размещенные агенты.
8. Нажмите кнопку **Создать**.
9. Сохраните определение сборки hello и введите имя.
10. Hello следующий абзац представляет собой описание этапов построения hello, создаваемые шаблоном hello:

| Шаг сборки | Описание |
| --- | --- |
| Восстановление NuGet |Восстанавливает hello пакеты NuGet для решения hello. |
| Сборка решения \*.sln |Выполняет построение hello всего решения. |
| Сборка решения \*.sfproj |Создает пакет приложения Service Fabric hello, который является приложение hello используется toodeploy. расположение пакета приложения Hello — указанного toobe в каталоге артефактов сборки hello. |
| Обновление версий приложения Service Fabric |Обновляет значения версии hello, содержащихся в tooallow файлов манифеста пакета приложения hello для поддержки обновления. В разделе hello [страницы документации задач](https://go.microsoft.com/fwlink/?LinkId=820529) для получения дополнительной информации. |
| Копирование файлов. |Копирует hello публикации профиль и toobe артефакты файлы toohello приложения параметры построения, использованных для развертывания. |
| Публикация артефакта |Публикация артефактов сборки hello. Позволяет артефактов сборки hello tooconsume определения выпуска. |

### <a name="verify-hello-default-set-of-tasks"></a>Проверьте набор задач по умолчанию hello
1. Проверьте hello **решения** поле ввода для hello **восстановление NuGet** и **построения решения** шаги построения.  По умолчанию эти шаги построения выполнения после всех файлов решения, содержащиеся в репозитории связанные hello.  Если требуется только hello toooperate определения построения для одного из этих файлов решения, необходимо toothat путь к файлу для tooexplicitly обновления hello.
2. Проверьте hello **решения** поле ввода для hello **упаковать приложение** шаг сборки.  По умолчанию сборки предполагается, что существует только один проект приложения Fabric Application (.sfproj) в репозитории hello.  Если имеется несколько файлов в репозитории и должны tootarget только один из них для определения построения, необходимо toothat путь к файлу для tooexplicitly обновления hello.  Toopackage приложение нескольких проектов в репозитории, вы должны toocreate дополнительных **построения Visual Studio** шаги в определении сборки hello, у каждого целевого проекта приложения.  Затем необходимо также tooupdate hello **Аргументы MSBuild** поля для каждого из них шаги построения, чтобы расположение пакета hello уникален для каждого из них.
3. Проверить поведение управления версиями hello, определенные в hello **обновление версий приложения структуры** шаг сборки.  По умолчанию этот этап сборки добавляет hello построения tooall версии чисел в файлах манифеста пакета приложения hello. В разделе hello [страницы документации задач](https://go.microsoft.com/fwlink/?LinkId=820529) для получения дополнительной информации. Это полезно для поддержки обновления приложения, поскольку для каждого развертывания обновления требуется значения разных версий из предыдущего развертывания hello. Если вы являетесь вы не собираетесь toouse обновление приложения в рабочем процессе, можно отключить этот этап сборки. Необходимо отключить, если вы собираетесь tooproduce сборку, которая может быть toooverwrite используется существующее приложение Service Fabric. Hello развертывание завершается неудачей, если версия hello приложения hello, созданные сборкой hello не соответствует версии hello приложения hello в кластере hello.
4. Если решение содержит проект .NET Core, необходимо убедиться, что определение сборки содержит шаг построения, восстанавливает hello зависимости:
   1. Выберите **Добавить шаг сборки…**.
   2. Найдите hello **командной строки** за вкладку программа hello и его, нажмите кнопку Добавить.
   3. Для поля ввода задачу hello используйте hello следующие значения:
   4. Инструмент: dotnet
   5. Аргументы: restore
   6. Перетащите задачу hello сразу после hello **восстановление NuGet** шаг.
5. Сохраните все изменения вы внесли toohello определение сборки.

### <a name="try-it"></a>Попробовать
Выберите **поставить в очередь построение** toomanually начать сборку. Сборки также активируются после принудительного запуска или возврата. Проверив успешному выполнению сборки hello, теперь можно переходить на toodefining определения выпуска, которая развертывает приложение tooa кластера.

## <a name="create-a-release-definition"></a>Создание определения выпуска
Определение выпуска Team Services описывает рабочий процесс, состоящий из набора задач, которые выполняются последовательно. Цель Hello hello определения выпуска, для которого создается tootake пакета приложения и разверните его tooa кластера. При совместном использовании hello определение построения и определение выпуска можно выполнить весь рабочий процесс hello из начиная с источника tooending файлы с запущенным приложением в кластере. Узнайте больше об [определениях выпуска](https://www.visualstudio.com/docs/release/author-release-definition/more-release-definition)Team Services.

### <a name="create-a-definition-from-hello-release-template"></a>Создайте определение из шаблона выпуска hello
1. Откройте проект в Visual Studio Team Services.
2. Выберите hello **выпуска** вкладки.
3. Выберите hello зеленый  **+**  toocreate определение нового выпуска и выберите **создать определение выпуска** в меню hello.
4. В диалоговом окне приветствия откроется, выберите **развертывание структуры службы Azure** внутри hello **развертывания** категории шаблонов.
5. Щелкните **Далее**.
6. Выберите определение сборки hello требуемый toouse hello источник этого определения выпуска.  Hello выпуска определения ссылок hello артефактов, которые были созданы hello выбранного определения построения.
7. Проверьте hello **непрерывного развертывания** флажок, если вы хотите toohave Team Services автоматически создать выпуск и развертывание приложения Service Fabric hello всякий раз, когда построение завершается.
8. Выберите очереди агента hello нужно toouse. Поддерживаются размещенные агенты.
9. Нажмите кнопку **Создать**.
10. Измените имя определения hello, щелкнув значок карандаша hello вверху hello страницы приветствия.
11. Выберите toowhich hello кластера, необходимо развернуть приложение из hello **подключения кластера** поле ввода задачи «hello». подключение кластера Hello содержится вся необходимая информация hello, позволяющий hello развертывания задач tooconnect toohello кластера. Если вы еще не подключения кластера для кластера, выберите hello **управление** гиперссылки Далее toohello поле tooadd один. На открывшейся странице hello выполните следующие шаги hello.
    1. Выберите **новую конечную точку службы** , а затем выберите **Azure Service Fabric** меню "hello".
    2. Выберите тип проверки подлинности, используемого кластера hello распространяется на эту конечную точку hello.
    3. Определите имя для соединения в hello **имя подключения** поля.  Как правило используется имя кластера hello.
    4. Определение URL-адрес конечной точки подключения клиента hello в hello **конечную точку кластера** поля.  Пример: tcp://contoso.westus.cloudapp.azure.com:19000.
    5. Для учетных данных Azure Active Directory, укажите учетные данные hello, toouse tooconnect toohello кластеру в hello **Username** и **пароль** поля.
    6. Для проверки подлинности на основе сертификатов, определите кодировку hello Base64 hello файл сертификата клиента в hello **сертификат клиента** поля.  См. на этом поле, сведения о том, как всплывающее окно справки hello tooget это значение.  Если сертификат защищен паролем, определить пароль hello в hello **пароль** поля.
    7. Подтвердите изменения, нажав кнопку **ОК**. После перехода назад tooyour определение выпуска, щелкните значок обновления hello hello **подключения кластера** поле конечной точки hello toosee был только что добавлен.
12. Сохраните определение выпуска hello.

> [!NOTE]
> Учетные записи Майкрософт (например, @hotmail.com или @outlook.com) не поддерживаются для аутентификации Azure Active Directory.
> 
> 

Определение Hello, созданный состоит из одной задачи типа **развертывания приложения Service Fabric**. В разделе hello [страницы документации задач](https://go.microsoft.com/fwlink/?LinkId=820528) Дополнительные сведения об этой задаче.

### <a name="verify-hello-template-defaults"></a>Проверка шаблона по умолчанию hello
1. Проверьте hello **профиль публикации** поле ввода для hello **развернуть приложение Service Fabric** задачи. По умолчанию это поле ссылается на профиль публикации, с именем Cloud.xml, содержащихся в артефактов сборки hello. Если требуется tooreference другой профиль публикации или если hello сборка содержит несколько пакетов приложений в ее артефактов, tooupdate hello пути необходимо соответствующим образом.
2. Проверьте hello **пакета приложения** поле ввода для hello **развернуть приложение Service Fabric** задачи. По умолчанию это поле ссылается hello приложения по умолчанию пакет путь, используемый в шаблон определения сборки hello.  Если измененный путь к пакету приложения по умолчанию hello в hello определение сборки, необходимо tooupdate hello путь соответствующим образом здесь также.

### <a name="try-it"></a>Попробовать
Выберите **Создание выпуска** из hello **выпуска** toomanually меню кнопки Создать выпуск. В диалоговом окне приветствия откроется, выберите hello построения выпуска hello toobase на и нажмите кнопку **создать**. Если вы включили непрерывного развертывания, выпуски создается автоматически по завершении сборки hello связанное определение сборки.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о непрерывной интеграции с приложениями Service Fabric, чтение hello следующие статьи toolearn:

* [Домашняя страница документации по Team Services](https://www.visualstudio.com/docs/overview)
* [Управление сборками в Team Services](https://www.visualstudio.com/docs/build/overview)
* [Управление выпусками в Team Services](https://www.visualstudio.com/docs/release/overview)

