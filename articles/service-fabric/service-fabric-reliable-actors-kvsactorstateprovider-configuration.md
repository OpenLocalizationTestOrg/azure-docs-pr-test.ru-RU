---
title: "Параметры KVSActorStateProvider aaaChange в Azure микрослужбами | Документы Microsoft"
description: "Сведения о настройке субъектов Azure Service Fabric с отслеживанием состояния и типом KVSActorStateProvider."
services: Service-Fabric
documentationcenter: .net
author: sumukhs
manager: timlt
editor: 
ms.assetid: dbed72f4-dda5-4287-bd56-da492710cd96
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 6/29/2017
ms.author: sumukhs
ms.openlocfilehash: e003512678556e68a8926b1b9c6c28d9ae3979d2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="configuring-reliable-actors--kvsactorstateprovider"></a><span data-ttu-id="2a4f3-103">Настройка надежных субъектов — KVSActorStateProvider</span><span class="sxs-lookup"><span data-stu-id="2a4f3-103">Configuring Reliable Actors--KVSActorStateProvider</span></span>
<span data-ttu-id="2a4f3-104">Конфигурация по умолчанию hello KVSActorStateProvider можно изменить, изменив файл settings.xml hello, созданный в корневом каталоге пакета Microsoft Visual Studio hello в папке Config hello для указанного субъекта hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-104">You can modify hello default configuration of KVSActorStateProvider by changing hello settings.xml file that is generated in hello Microsoft Visual Studio package root under hello Config folder for hello specified actor.</span></span>

<span data-ttu-id="2a4f3-105">Среда выполнения Azure Service Fabric Hello ищет имена предопределенных разделов в файле settings.xml hello и использует значения конфигурации hello при создании hello базовые компоненты среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-105">hello Azure Service Fabric runtime looks for predefined section names in hello settings.xml file and consumes hello configuration values while creating hello underlying runtime components.</span></span>

> [!NOTE]
> <span data-ttu-id="2a4f3-106">Сделать **не** удалять или изменять имена hello раздела конфигурации в файле settings.xml hello, создаваемого в решение Visual Studio hello hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-106">Do **not** delete or modify hello section names of hello following configurations in hello settings.xml file that is generated in hello Visual Studio solution.</span></span>
> 
> 

## <a name="replicator-security-configuration"></a><span data-ttu-id="2a4f3-107">Конфигурация безопасности репликатора</span><span class="sxs-lookup"><span data-stu-id="2a4f3-107">Replicator security configuration</span></span>
<span data-ttu-id="2a4f3-108">Конфигурации безопасности репликации, используемых toosecure hello коммуникационный канал, используемый во время репликации.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-108">Replicator security configurations are used toosecure hello communication channel that is used during replication.</span></span> <span data-ttu-id="2a4f3-109">Это означает, что службы не может видеть друг друга трафик репликации, обеспечивая также безопасные данные hello, это обеспечит высокую доступность.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-109">This means that services cannot see each other's replication traffic, ensuring that hello data that is made highly available is also secure.</span></span>
<span data-ttu-id="2a4f3-110">По умолчанию пустой раздел конфигурации безопасности означает, что канал репликации не защищен.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-110">By default, an empty security configuration section prevents replication security.</span></span>

### <a name="section-name"></a><span data-ttu-id="2a4f3-111">Имя раздела</span><span class="sxs-lookup"><span data-stu-id="2a4f3-111">Section name</span></span>
<span data-ttu-id="2a4f3-112">&lt;имя_субъекта&gt;ServiceReplicatorSecurityConfig</span><span class="sxs-lookup"><span data-stu-id="2a4f3-112">&lt;ActorName&gt;ServiceReplicatorSecurityConfig</span></span>

## <a name="replicator-configuration"></a><span data-ttu-id="2a4f3-113">Конфигурация репликатора</span><span class="sxs-lookup"><span data-stu-id="2a4f3-113">Replicator configuration</span></span>
<span data-ttu-id="2a4f3-114">Конфигурации репликации настроить hello репликации, который отвечает за установку состояния поставщик состояния субъекта hello высокую степень доступности.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-114">Replicator configurations configure hello replicator that is responsible for making hello Actor State Provider state highly reliable.</span></span>
<span data-ttu-id="2a4f3-115">Конфигурация по умолчанию Hello создается шаблоном Visual Studio hello и должно быть достаточно.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-115">hello default configuration is generated by hello Visual Studio template and should suffice.</span></span> <span data-ttu-id="2a4f3-116">Этот раздел рассказывает о Дополнительные настройки, доступные tootune hello репликатора.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-116">This section talks about additional configurations that are available tootune hello replicator.</span></span>

### <a name="section-name"></a><span data-ttu-id="2a4f3-117">Имя раздела</span><span class="sxs-lookup"><span data-stu-id="2a4f3-117">Section name</span></span>
<span data-ttu-id="2a4f3-118">&lt;имя_субъекта&gt;ServiceReplicatorConfig</span><span class="sxs-lookup"><span data-stu-id="2a4f3-118">&lt;ActorName&gt;ServiceReplicatorConfig</span></span>

### <a name="configuration-names"></a><span data-ttu-id="2a4f3-119">Имена конфигураций</span><span class="sxs-lookup"><span data-stu-id="2a4f3-119">Configuration names</span></span>
| <span data-ttu-id="2a4f3-120">Имя</span><span class="sxs-lookup"><span data-stu-id="2a4f3-120">Name</span></span> | <span data-ttu-id="2a4f3-121">Единица измерения</span><span class="sxs-lookup"><span data-stu-id="2a4f3-121">Unit</span></span> | <span data-ttu-id="2a4f3-122">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="2a4f3-122">Default value</span></span> | <span data-ttu-id="2a4f3-123">Примечания</span><span class="sxs-lookup"><span data-stu-id="2a4f3-123">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2a4f3-124">BatchAcknowledgementInterval</span><span class="sxs-lookup"><span data-stu-id="2a4f3-124">BatchAcknowledgementInterval</span></span> |<span data-ttu-id="2a4f3-125">Секунды</span><span class="sxs-lookup"><span data-stu-id="2a4f3-125">Seconds</span></span> |<span data-ttu-id="2a4f3-126">0,015</span><span class="sxs-lookup"><span data-stu-id="2a4f3-126">0.015</span></span> |<span data-ttu-id="2a4f3-127">Период времени для репликатора какие hello во вторичной ожиданий hello после получения операции перед отправкой обратно подтверждения toohello первичного.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-127">Time period for which hello replicator at hello secondary waits after receiving an operation before sending back an acknowledgement toohello primary.</span></span> <span data-ttu-id="2a4f3-128">Другие toobe подтверждений, отправленных для операций, обработанных в течение этого интервала отправляются как один ответ.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-128">Any other acknowledgements toobe sent for operations processed within this interval are sent as one response.</span></span> |
| <span data-ttu-id="2a4f3-129">ReplicatorEndpoint</span><span class="sxs-lookup"><span data-stu-id="2a4f3-129">ReplicatorEndpoint</span></span> |<span data-ttu-id="2a4f3-130">Недоступно</span><span class="sxs-lookup"><span data-stu-id="2a4f3-130">N/A</span></span> |<span data-ttu-id="2a4f3-131">Значение по умолчанию не задано — обязательный параметр</span><span class="sxs-lookup"><span data-stu-id="2a4f3-131">No default--required parameter</span></span> |<span data-ttu-id="2a4f3-132">IP-адрес и порт, который hello первичный или вторичный репликации будет использовать toocommunicate других Репликаторы в наборе реплик hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-132">IP address and port that hello primary/secondary replicator will use toocommunicate with other replicators in hello replica set.</span></span> <span data-ttu-id="2a4f3-133">Это должно указывать конечную точку TCP ресурса в манифест службы hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-133">This should reference a TCP resource endpoint in hello service manifest.</span></span> <span data-ttu-id="2a4f3-134">См. слишком[ресурсов манифеста службы](service-fabric-service-manifest-resources.md) tooread Дополнительные об определении конечной точки ресурсы в манифест службы hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-134">Refer too[Service manifest resources](service-fabric-service-manifest-resources.md) tooread more about defining endpoint resources in hello service manifest.</span></span> |
| <span data-ttu-id="2a4f3-135">RetryInterval</span><span class="sxs-lookup"><span data-stu-id="2a4f3-135">RetryInterval</span></span> |<span data-ttu-id="2a4f3-136">Секунды</span><span class="sxs-lookup"><span data-stu-id="2a4f3-136">Seconds</span></span> |<span data-ttu-id="2a4f3-137">5</span><span class="sxs-lookup"><span data-stu-id="2a4f3-137">5</span></span> |<span data-ttu-id="2a4f3-138">Период времени, после которого hello replicator повторно передает сообщение, если он не получил подтверждения для операции.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-138">Time period after which hello replicator re-transmits a message if it does not receive an acknowledgement for an operation.</span></span> |
| <span data-ttu-id="2a4f3-139">MaxReplicationMessageSize</span><span class="sxs-lookup"><span data-stu-id="2a4f3-139">MaxReplicationMessageSize</span></span> |<span data-ttu-id="2a4f3-140">Байты</span><span class="sxs-lookup"><span data-stu-id="2a4f3-140">Bytes</span></span> |<span data-ttu-id="2a4f3-141">50 MB</span><span class="sxs-lookup"><span data-stu-id="2a4f3-141">50 MB</span></span> |<span data-ttu-id="2a4f3-142">Максимальный размер данных репликации, которые могут быть переданы в одном сообщении.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-142">Maximum size of replication data that can be transmitted in a single message.</span></span> |
| <span data-ttu-id="2a4f3-143">MaxPrimaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="2a4f3-143">MaxPrimaryReplicationQueueSize</span></span> |<span data-ttu-id="2a4f3-144">Количество операций</span><span class="sxs-lookup"><span data-stu-id="2a4f3-144">Number of operations</span></span> |<span data-ttu-id="2a4f3-145">1024</span><span class="sxs-lookup"><span data-stu-id="2a4f3-145">1024</span></span> |<span data-ttu-id="2a4f3-146">Максимальное количество операций в основную очередь hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-146">Maximum number of operations in hello primary queue.</span></span> <span data-ttu-id="2a4f3-147">Операция освобождается после первичной репликации hello не получит подтверждение от всех получателей Репликаторы hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-147">An operation is freed up after hello primary replicator receives an acknowledgement from all hello secondary replicators.</span></span> <span data-ttu-id="2a4f3-148">Это значение должно быть больше 64 и представлять собой степень числа 2.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-148">This value must be greater than 64 and a power of 2.</span></span> |
| <span data-ttu-id="2a4f3-149">MaxSecondaryReplicationQueueSize</span><span class="sxs-lookup"><span data-stu-id="2a4f3-149">MaxSecondaryReplicationQueueSize</span></span> |<span data-ttu-id="2a4f3-150">Количество операций</span><span class="sxs-lookup"><span data-stu-id="2a4f3-150">Number of operations</span></span> |<span data-ttu-id="2a4f3-151">2048</span><span class="sxs-lookup"><span data-stu-id="2a4f3-151">2048</span></span> |<span data-ttu-id="2a4f3-152">Максимальное количество операций в дополнительной очереди hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-152">Maximum number of operations in hello secondary queue.</span></span> <span data-ttu-id="2a4f3-153">Операция освобождается после того, как для ее состояния будет обеспечена высокая доступность посредством сохранения.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-153">An operation is freed up after making its state highly available through persistence.</span></span> <span data-ttu-id="2a4f3-154">Это значение должно быть больше 64 и представлять собой степень числа 2.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-154">This value must be greater than 64 and a power of 2.</span></span> |

## <a name="store-configuration"></a><span data-ttu-id="2a4f3-155">Конфигурация хранилища</span><span class="sxs-lookup"><span data-stu-id="2a4f3-155">Store configuration</span></span>
<span data-ttu-id="2a4f3-156">Хранилище конфигураций, используемых tooconfigure hello локальное хранилище находится в состоянии hello используется toopersist, которая реплицируется.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-156">Store configurations are used tooconfigure hello local store that is used toopersist hello state that is being replicated.</span></span>
<span data-ttu-id="2a4f3-157">Конфигурация по умолчанию Hello создается шаблоном Visual Studio hello и должно быть достаточно.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-157">hello default configuration is generated by hello Visual Studio template and should suffice.</span></span> <span data-ttu-id="2a4f3-158">Этот раздел рассказывает о Дополнительные настройки, доступные tootune hello локального хранилища.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-158">This section talks about additional configurations that are available tootune hello local store.</span></span>

### <a name="section-name"></a><span data-ttu-id="2a4f3-159">Имя раздела</span><span class="sxs-lookup"><span data-stu-id="2a4f3-159">Section name</span></span>
<span data-ttu-id="2a4f3-160">&lt;имя_субъекта&gt;ServiceLocalStoreConfig</span><span class="sxs-lookup"><span data-stu-id="2a4f3-160">&lt;ActorName&gt;ServiceLocalStoreConfig</span></span>

### <a name="configuration-names"></a><span data-ttu-id="2a4f3-161">Имена конфигураций</span><span class="sxs-lookup"><span data-stu-id="2a4f3-161">Configuration names</span></span>
| <span data-ttu-id="2a4f3-162">Имя</span><span class="sxs-lookup"><span data-stu-id="2a4f3-162">Name</span></span> | <span data-ttu-id="2a4f3-163">Единица измерения</span><span class="sxs-lookup"><span data-stu-id="2a4f3-163">Unit</span></span> | <span data-ttu-id="2a4f3-164">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="2a4f3-164">Default value</span></span> | <span data-ttu-id="2a4f3-165">Примечания</span><span class="sxs-lookup"><span data-stu-id="2a4f3-165">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2a4f3-166">MaxAsyncCommitDelayInMilliseconds</span><span class="sxs-lookup"><span data-stu-id="2a4f3-166">MaxAsyncCommitDelayInMilliseconds</span></span> |<span data-ttu-id="2a4f3-167">Миллисекунды</span><span class="sxs-lookup"><span data-stu-id="2a4f3-167">Milliseconds</span></span> |<span data-ttu-id="2a4f3-168">200</span><span class="sxs-lookup"><span data-stu-id="2a4f3-168">200</span></span> |<span data-ttu-id="2a4f3-169">Задает максимально hello интервал для фиксации устойчивых локальное хранилище пакетов.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-169">Sets hello maximum batching interval for durable local store commits.</span></span> |
| <span data-ttu-id="2a4f3-170">MaxVerPages</span><span class="sxs-lookup"><span data-stu-id="2a4f3-170">MaxVerPages</span></span> |<span data-ttu-id="2a4f3-171">Количество страниц</span><span class="sxs-lookup"><span data-stu-id="2a4f3-171">Number of pages</span></span> |<span data-ttu-id="2a4f3-172">16 384</span><span class="sxs-lookup"><span data-stu-id="2a4f3-172">16384</span></span> |<span data-ttu-id="2a4f3-173">Максимальное количество страниц версий в локальном hello Hello хранения базы данных.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-173">hello maximum number of version pages in hello local store database.</span></span> <span data-ttu-id="2a4f3-174">Он определяет максимальное число необработанных транзакций hello.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-174">It determines hello maximum number of outstanding transactions.</span></span> |

## <a name="sample-configuration-file"></a><span data-ttu-id="2a4f3-175">Образец файла конфигурации</span><span class="sxs-lookup"><span data-stu-id="2a4f3-175">Sample configuration file</span></span>
```xml
<?xml version="1.0" encoding="utf-8"?>
<Settings xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.microsoft.com/2011/01/fabric">
   <Section Name="MyActorServiceReplicatorConfig">
      <Parameter Name="ReplicatorEndpoint" Value="MyActorServiceReplicatorEndpoint" />
      <Parameter Name="BatchAcknowledgementInterval" Value="0.05"/>
   </Section>
   <Section Name="MyActorServiceLocalStoreConfig">
      <Parameter Name="MaxVerPages" Value="8192" />
   </Section>
   <Section Name="MyActorServiceReplicatorSecurityConfig">
      <Parameter Name="CredentialType" Value="X509" />
      <Parameter Name="FindType" Value="FindByThumbprint" />
      <Parameter Name="FindValue" Value="9d c9 06 b1 69 dc 4f af fd 16 97 ac 78 1e 80 67 90 74 9d 2f" />
      <Parameter Name="StoreLocation" Value="LocalMachine" />
      <Parameter Name="StoreName" Value="My" />
      <Parameter Name="ProtectionLevel" Value="EncryptAndSign" />
      <Parameter Name="AllowedCommonNames" Value="My-Test-SAN1-Alice,My-Test-SAN1-Bob" />
   </Section>
</Settings>
```
## <a name="remarks"></a><span data-ttu-id="2a4f3-176">Примечания</span><span class="sxs-lookup"><span data-stu-id="2a4f3-176">Remarks</span></span>
<span data-ttu-id="2a4f3-177">параметр BatchAcknowledgementInterval Hello управляет задержки репликации.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-177">hello BatchAcknowledgementInterval parameter controls replication latency.</span></span> <span data-ttu-id="2a4f3-178">Значение "0" приведет к hello самая низкая задержка, hello затрат пропускной способности (как дополнительные сообщения подтверждения должна отправляться и обработки, каждый из которых содержит меньшее число подтверждений).</span><span class="sxs-lookup"><span data-stu-id="2a4f3-178">A value of '0' results in hello lowest possible latency, at hello cost of throughput (as more acknowledgement messages must be sent and processed, each containing fewer acknowledgements).</span></span>
<span data-ttu-id="2a4f3-179">Hello BatchAcknowledgementInterval, увеличьте значение hello hello выше hello общую пропускную способность репликации платы "hello" Высокая задержка операции.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-179">hello larger hello value for BatchAcknowledgementInterval, hello higher hello overall replication throughput, at hello cost of higher operation latency.</span></span> <span data-ttu-id="2a4f3-180">Это напрямую преобразуется toohello задержки фиксации транзакций.</span><span class="sxs-lookup"><span data-stu-id="2a4f3-180">This directly translates toohello latency of transaction commits.</span></span>

