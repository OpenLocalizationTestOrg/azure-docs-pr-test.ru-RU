---
title: "Общие сведения о коллекциях Reliable Collections в службах с отслеживанием состояния Azure Service Fabric | Документация Майкрософт"
description: "Службы с отслеживанием состояния Service Fabric предоставляют надежные коллекции, которые позволяют создавать высокодоступные и масштабируемые облачные приложения с низкой задержкой."
services: service-fabric
documentationcenter: .net
author: mcoskun
manager: timlt
editor: masnider,rajak
ms.assetid: 62857523-604b-434e-bd1c-2141ea4b00d1
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: required
ms.date: 5/1/2017
ms.author: mcoskun
ms.openlocfilehash: d0247ba0242af05ca6dcd8049ff9116683538fa5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="introduction-to-reliable-collections-in-azure-service-fabric-stateful-services"></a><span data-ttu-id="0189a-103">Введение в надежные коллекции в службах с отслеживанием состояния Azure Service Fabric</span><span class="sxs-lookup"><span data-stu-id="0189a-103">Introduction to Reliable Collections in Azure Service Fabric stateful services</span></span>
<span data-ttu-id="0189a-104">Надежные коллекции позволяют создавать высокодоступные и масштабируемые облачные приложения с низкой задержкой точно так же, как приложения для одного компьютера.</span><span class="sxs-lookup"><span data-stu-id="0189a-104">Reliable Collections enable you to write highly available, scalable, and low-latency cloud applications as though you were writing single computer applications.</span></span> <span data-ttu-id="0189a-105">Классы в пространстве имен **Microsoft.ServiceFabric.Data.Collections** предоставляют набор коллекций, которые автоматически обеспечивают состояние высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="0189a-105">The classes in the **Microsoft.ServiceFabric.Data.Collections** namespace provide a set of collections that automatically make your state highly available.</span></span> <span data-ttu-id="0189a-106">Разработчикам нужно только создать интерфейсы API для надежных коллекций и разрешить надежным коллекциям управлять реплицированным и локальным состояниями.</span><span class="sxs-lookup"><span data-stu-id="0189a-106">Developers need to program only to the Reliable Collection APIs and let Reliable Collections manage the replicated and local state.</span></span>

<span data-ttu-id="0189a-107">Основное различие между надежными коллекциями и другими технологиями обеспечения высокой доступности (например, Redis, службы таблиц и очередей Azure) заключается в том, что состояние хранится локально в экземпляре службы и одновременно делается высокодоступным.</span><span class="sxs-lookup"><span data-stu-id="0189a-107">The key difference between Reliable Collections and other high-availability technologies (such as Redis, Azure Table service, and Azure Queue service) is that the state is kept locally in the service instance while also being made highly available.</span></span> <span data-ttu-id="0189a-108">Это означает следующее:</span><span class="sxs-lookup"><span data-stu-id="0189a-108">This means that:</span></span>

* <span data-ttu-id="0189a-109">Все операции чтения выполняются локально, что позволяет достичь низкой задержки и высокой пропускной способности при чтении.</span><span class="sxs-lookup"><span data-stu-id="0189a-109">All reads are local, which results in low latency and high-throughput reads.</span></span>
* <span data-ttu-id="0189a-110">Все операции записи создают минимальное количество сетевых операций ввода-вывода, что позволяет достичь низкой задержки и высокой пропускной способности при записи.</span><span class="sxs-lookup"><span data-stu-id="0189a-110">All writes incur the minimum number of network IOs, which results in low latency and high-throughput writes.</span></span>

![Изображение развития коллекций.](media/service-fabric-reliable-services-reliable-collections/ReliableCollectionsEvolution.png)

<span data-ttu-id="0189a-112">Надежные коллекции можно рассматривать как развитие классов **System.Collections**. Это новый набор удобных коллекций для разработчиков, предназначенных для облачных приложений и приложений для нескольких компьютеров.</span><span class="sxs-lookup"><span data-stu-id="0189a-112">Reliable Collections can be thought of as the natural evolution of the **System.Collections** classes: a new set of collections that are designed for the cloud and multi-computer applications without increasing complexity for the developer.</span></span> <span data-ttu-id="0189a-113">Таким образом, надежные коллекции являются:</span><span class="sxs-lookup"><span data-stu-id="0189a-113">As such, Reliable Collections are:</span></span>

* <span data-ttu-id="0189a-114">реплицируемыми (изменения состояния реплицируются для обеспечения высокой доступности);</span><span class="sxs-lookup"><span data-stu-id="0189a-114">Replicated: State changes are replicated for high availability.</span></span>
* <span data-ttu-id="0189a-115">сохраняемыми (данные сохраняются на диск для защиты от крупномасштабных перебоев, например отключения питания в центре обработки данных);</span><span class="sxs-lookup"><span data-stu-id="0189a-115">Persisted: Data is persisted to disk for durability against large-scale outages (for example, a datacenter power outage).</span></span>
* <span data-ttu-id="0189a-116">асинхронными (интерфейсы API работают асинхронно, что позволяет избежать блокировки потоков при операциях ввода-вывода);</span><span class="sxs-lookup"><span data-stu-id="0189a-116">Asynchronous: APIs are asynchronous to ensure that threads are not blocked when incurring IO.</span></span>
* <span data-ttu-id="0189a-117">транзакционными (интерфейсы API используют абстракцию транзакций, что позволяет легко управлять несколькими надежными коллекциями в службе).</span><span class="sxs-lookup"><span data-stu-id="0189a-117">Transactional: APIs utilize the abstraction of transactions so you can manage multiple Reliable Collections within a service easily.</span></span>

<span data-ttu-id="0189a-118">Коллекции Reliable Collections изначально гарантируют высокую целостность данных, благодаря чему вам будет легче анализировать состояние приложений.</span><span class="sxs-lookup"><span data-stu-id="0189a-118">Reliable Collections provide strong consistency guarantees out of the box to make reasoning about application state easier.</span></span>
<span data-ttu-id="0189a-119">Высокая целостность достигается за счет того, что фиксация транзакции завершается только после регистрации всей транзакции в большинстве кворума реплик (включая первичные реплики).</span><span class="sxs-lookup"><span data-stu-id="0189a-119">Strong consistency is achieved by ensuring transaction commits finish only after the entire transaction has been logged on a majority quorum of replicas, including the primary.</span></span>
<span data-ttu-id="0189a-120">Для достижения более низкой целостности приложения могут отправить подтверждение клиенту (или инициатору запроса) до того, как вернется асинхронная фиксация.</span><span class="sxs-lookup"><span data-stu-id="0189a-120">To achieve weaker consistency, applications can acknowledge back to the client/requester before the asynchronous commit returns.</span></span>

<span data-ttu-id="0189a-121">API надежных коллекций являются развитием API параллельных коллекций (находятся в пространстве имен **System.Collections.Concurrent** ):</span><span class="sxs-lookup"><span data-stu-id="0189a-121">The Reliable Collections APIs are an evolution of concurrent collections APIs (found in the **System.Collections.Concurrent** namespace):</span></span>

* <span data-ttu-id="0189a-122">работают асинхронно (возвращают задачи, потому что, в отличие от параллельных коллекций, операции реплицируются и сохраняются);</span><span class="sxs-lookup"><span data-stu-id="0189a-122">Asynchronous: Returns a task since, unlike concurrent collections, the operations are replicated and persisted.</span></span>
* <span data-ttu-id="0189a-123">нет выходных параметров, вместо них используется `ConditionalValue<T>` для возвращения логического типа и значения;</span><span class="sxs-lookup"><span data-stu-id="0189a-123">No out parameters: Uses `ConditionalValue<T>` to return a bool and a value instead of out parameters.</span></span> <span data-ttu-id="0189a-124">`ConditionalValue<T>` имеет сходство с `Nullable<T>`, но не требует, чтобы значение T было структурой.</span><span class="sxs-lookup"><span data-stu-id="0189a-124">`ConditionalValue<T>` is like `Nullable<T>` but does not require T to be a struct.</span></span>
* <span data-ttu-id="0189a-125">являются транзакционными (используется объект транзакции, благодаря чему пользователь может группировать действия с несколькими надежными коллекциями в одну транзакцию).</span><span class="sxs-lookup"><span data-stu-id="0189a-125">Transactions: Uses a transaction object to enable the user to group actions on multiple Reliable Collections in a transaction.</span></span>

<span data-ttu-id="0189a-126">Сейчас пространство имен **Microsoft.ServiceFabric.Data.Collections** содержит три коллекции:</span><span class="sxs-lookup"><span data-stu-id="0189a-126">Today, **Microsoft.ServiceFabric.Data.Collections** contains three collections:</span></span>

* <span data-ttu-id="0189a-127">[надежный словарь](https://msdn.microsoft.com/library/azure/dn971511.aspx) (реплицируемая, транзакционная и асинхронная коллекция пар "ключ-значение";</span><span class="sxs-lookup"><span data-stu-id="0189a-127">[Reliable Dictionary](https://msdn.microsoft.com/library/azure/dn971511.aspx): Represents a replicated, transactional, and asynchronous collection of key/value pairs.</span></span> <span data-ttu-id="0189a-128">как и в **ConcurrentDictionary**, ключ и значение могут быть любого типа);</span><span class="sxs-lookup"><span data-stu-id="0189a-128">Similar to **ConcurrentDictionary**, both the key and the value can be of any type.</span></span>
* <span data-ttu-id="0189a-129">[надежная очередь](https://msdn.microsoft.com/library/azure/dn971527.aspx) (реплицируемая, транзакционная и асинхронная очередь, функционирующая строго по методу FIFO;</span><span class="sxs-lookup"><span data-stu-id="0189a-129">[Reliable Queue](https://msdn.microsoft.com/library/azure/dn971527.aspx): Represents a replicated, transactional, and asynchronous strict first-in, first-out (FIFO) queue.</span></span> <span data-ttu-id="0189a-130">как и в **ConcurrentQueue**, значение может быть любого типа).</span><span class="sxs-lookup"><span data-stu-id="0189a-130">Similar to **ConcurrentQueue**, the value can be of any type.</span></span>
* <span data-ttu-id="0189a-131">[Надежная параллельная очередь](service-fabric-reliable-services-reliable-concurrent-queue.md) — реплицируемая, транзакционная и асинхронная упорядочивающая очередь для обеспечения высокой пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="0189a-131">[Reliable Concurrent Queue](service-fabric-reliable-services-reliable-concurrent-queue.md): Represents a replicated, transactional, and asynchronous best effort ordering queue for high throughput.</span></span> <span data-ttu-id="0189a-132">Как и в **ConcurrentQueue**, значение может быть любого типа.</span><span class="sxs-lookup"><span data-stu-id="0189a-132">Similar to the **ConcurrentQueue**, the value can be of any type.</span></span>

## <a name="next-steps"></a><span data-ttu-id="0189a-133">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="0189a-133">Next steps</span></span>
* [<span data-ttu-id="0189a-134">Reliable Collections: руководства и рекомендации</span><span class="sxs-lookup"><span data-stu-id="0189a-134">Reliable Collection Guidelines & Recommendations</span></span>](service-fabric-reliable-services-reliable-collections-guidelines.md)
* [<span data-ttu-id="0189a-135">Работа с Reliable Collections</span><span class="sxs-lookup"><span data-stu-id="0189a-135">Working with Reliable Collections</span></span>](service-fabric-work-with-reliable-collections.md)
* [<span data-ttu-id="0189a-136">Транзакции и блокировки</span><span class="sxs-lookup"><span data-stu-id="0189a-136">Transactions and Locks</span></span>](service-fabric-reliable-services-reliable-collections-transactions-locks.md)
* [<span data-ttu-id="0189a-137">Внутренние компоненты Reliable State Manager и Reliable Collections</span><span class="sxs-lookup"><span data-stu-id="0189a-137">Reliable State Manager and Collection Internals</span></span>](service-fabric-reliable-services-reliable-collections-internals.md)
* <span data-ttu-id="0189a-138">Управление данными</span><span class="sxs-lookup"><span data-stu-id="0189a-138">Managing Data</span></span>
  * [<span data-ttu-id="0189a-139">Резервное копирование и восстановление</span><span class="sxs-lookup"><span data-stu-id="0189a-139">Backup and Restore</span></span>](service-fabric-reliable-services-backup-restore.md)
  * [<span data-ttu-id="0189a-140">Notifications</span><span class="sxs-lookup"><span data-stu-id="0189a-140">Notifications</span></span>](service-fabric-reliable-services-notifications.md)
  * [<span data-ttu-id="0189a-141">Сериализация надежной коллекции</span><span class="sxs-lookup"><span data-stu-id="0189a-141">Reliable Collection serialization</span></span>](service-fabric-reliable-services-reliable-collections-serialization.md)
  * [<span data-ttu-id="0189a-142">Влияние сериализации данных на обновление приложений</span><span class="sxs-lookup"><span data-stu-id="0189a-142">Serialization and Upgrade</span></span>](service-fabric-application-upgrade-data-serialization.md)
  * [<span data-ttu-id="0189a-143">Конфигурация диспетчера надежных состояний</span><span class="sxs-lookup"><span data-stu-id="0189a-143">Reliable State Manager configuration</span></span>](service-fabric-reliable-services-configuration.md)
* <span data-ttu-id="0189a-144">Прочее</span><span class="sxs-lookup"><span data-stu-id="0189a-144">Others</span></span>
  * [<span data-ttu-id="0189a-145">Краткое руководство по надежным службам Reliable Services</span><span class="sxs-lookup"><span data-stu-id="0189a-145">Reliable Services quick start</span></span>](service-fabric-reliable-services-quick-start.md)
  * [<span data-ttu-id="0189a-146">Справочник разработчика по надежным коллекциям</span><span class="sxs-lookup"><span data-stu-id="0189a-146">Developer reference for Reliable Collections</span></span>](https://msdn.microsoft.com/library/azure/microsoft.servicefabric.data.collections.aspx)
