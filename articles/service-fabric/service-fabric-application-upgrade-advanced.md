---
title: "aaaAdvanced обновить разделы приложений | Документы Microsoft"
description: "В этой статье рассматриваются некоторые дополнительные разделы, касающиеся tooupgrading приложения Service Fabric."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: e29585ff-e96f-46f4-a07f-6682bbe63281
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar;chackdan
ms.openlocfilehash: bdaf3db6209c574d39f57e0bf9951fad5ad1cbec
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-advanced-topics"></a>Обновление приложений Service Fabric: дополнительные разделы
## <a name="adding-or-removing-services-during-an-application-upgrade"></a>Добавление или удаление служб во время обновления приложения
Если это новая служба добавляется tooan приложения, который должен быть развернут и опубликован как обновление, новую службу hello — добавлены toohello развертывания приложения.  Такие обновления не влияет на все hello служб, которые уже были частью приложения hello. Тем не менее, должен быть запущен экземпляр службы hello, который был добавлен для hello новой службы toobe active (с помощью hello `New-ServiceFabricService` командлет).

В процессе обновления службы также могут быть удалены из приложения. Тем не менее, все текущие экземпляры hello удален в предстоит службы должна быть остановлена перед тем как продолжить обновление hello (с помощью hello `Remove-ServiceFabricService` командлет).

## <a name="manual-upgrade-mode"></a>Ручной режим обновления
> [!NOTE]
> только для неудачных или ожидающего обновления должны быть рассмотрены Hello не отслеживается в ручном режиме. режим отслеживаемых Hello является hello рекомендуется режим обновления для приложения Service Fabric.
>
>

Azure Service Fabric предоставляет несколько режимов обновления кластеров toosupport разработки и эксплуатации. Выбранные варианты развертывания для разных сред могут отличаться.

последовательное обновление приложения Hello отслеживаемых является наиболее типичных обновления toouse hello в рабочей среде hello. При обновлении hello указана политика, Service Fabric гарантирует, что приложение hello работоспособное для продолжения обновления hello.

 Здравствуйте, администратор приложения можно использовать последовательное приложения режим обновления toohave полный контроль над ходом hello через hello различных доменов обновления вручную hello. Этот режим удобен при политики работоспособности специальную или сложных вычислений не требуется или не обычной обновление происходит (например, приложение hello уже потери данных).

Наконец hello автоматические обновления приложения полезен для разработки и тестирования среды tooprovide быстрого итерации цикла во время разработки службы.

## <a name="change-toomanual-upgrade-mode"></a>Режим обновления toomanual изменений
**Вручную**--обновление приложения hello Stop на hello UD и изменить текущий hello обновление tooUnmonitored режим вручную. Hello администратор должен вызов toomanually **MoveNextApplicationUpgradeDomainAsync** tooproceed с hello обновление или запускать команду rollback с началом нового обновления. После обновления hello вводит в ручном режиме hello, он остается в ручном режиме hello до запуска нового обновления. Hello **GetApplicationUpgradeProgressAsync** команда возвращает СТРУКТУРЫ\_приложения\_обновление\_состояние\_ЧЕРЕДУЮЩИМСЯ\_вперед\_ожидание.

## <a name="upgrade-with-a-diff-package"></a>Обновление при помощи пакета diff
Приложение структуры служб может обновляться путем подготовки полного самостоятельного пакета приложения. Также можно обновить приложения с помощью diff пакет, содержащий только файлы приложения hello обновлен, hello обновить манифест приложения, а файлы манифеста службы hello.

Полноценное приложение пакет содержит все необходимые toostart файлы hello и запускать приложения Service Fabric. Разница между пакет содержит только файлы hello, которые изменились в последней подготовки hello и текущее обновление hello, а также манифест полного приложения hello и hello службы файлов манифеста. Любая ссылка в манифесте приложения hello или манифест службы, который не удается найти в макете сборки hello поиск в хранилище образов hello.

Пакеты полной приложений являются обязательными для установки первой hello кластера toohello приложения. При последующих обновлениях может использоваться либо полный пакет обновлений, либо пакет diff.

Случаи, в которых использование пакета diff является оптимальным.

* Пакет diff предпочтительно применять тогда, когда используется объемный пакет приложения, который ссылается на несколько файлов манифеста службы или на несколько пакетов кода, пакетов конфигурации или пакетов данных.
* Разница между пакета является предпочтительным при наличии в системе развертывания, приводит к возникновению ошибки построения макета hello непосредственно из процесса построения приложения. Таким образом несмотря на то, что код hello не изменился, созданный сборки получают разные контрольные. С помощью пакета полного приложения потребуется вы tooupdate hello версии на все пакеты кода. С помощью пакета diff, можно указать только hello файлов, которые изменены и файлы манифеста hello с измененной версии hello.

При обновлении приложения с помощью Visual Studio, автоматически публикуется hello diff пакета. toocreate пакета diff hello вручную, манифест приложения и манифестов hello служб должны быть обновлены, но только hello изменены пакеты должны быть включены в пакет конечного приложения hello.

Например начнем с hello следующие приложения (для простоты понимания номера версий):

```text
app1           1.0.0
  service1     1.0.0
    code       1.0.0
    config     1.0.0
  service2     1.0.0
    code       1.0.0
    config     1.0.0
```

Теперь предположим, что требуется, чтобы tooupdate только hello пакет кода из service1 с помощью копирования пакета с помощью PowerShell. Теперь обновленные приложения имеет hello следующая структура папок:

```text
app1           2.0.0      <-- new version
  service1     2.0.0      <-- new version
    code       2.0.0      <-- new version
    config     1.0.0
  service2     1.0.0
    code       1.0.0
    config     1.0.0
```

В этом случае обновление too2.0.0 манифеста приложения hello и hello манифест службы для service1 tooreflect hello код пакета обновления. Hello папку для пакета приложения будет иметь hello следующие структуры:

```text
app1/
  service1/
    code/
```

## <a name="next-steps"></a>Дальнейшие действия
[Руководство по обновлению приложений Service Fabric с помощью Visual Studio](service-fabric-application-upgrade-tutorial.md) поможет вам выполнить поэтапное обновление приложения с помощью Visual Studio.

[Обновление приложения с помощью PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) поможет вам выполнить обновление приложения с помощью PowerShell.

Управление обновлениями приложения осуществляется с помощью [параметров обновления](service-fabric-application-upgrade-parameters.md).

Обеспечить совместимость на обновление приложения путем изучения как toouse [сериализации данных](service-fabric-application-upgrade-data-serialization.md).

Исправьте распространенных проблем в обновлений приложений с помощью ссылки действия toohello в [Устранение неполадок обновлений приложений](service-fabric-application-upgrade-troubleshooting.md).
