---
title: "обновление приложения Fabric aaaService с помощью PowerShell | Документы Microsoft"
description: "В этой статье рассматриваются возможности hello развертывания приложения Service Fabric, изменения кода hello и развертывание обновления с помощью PowerShell."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: f31212264de45c3b257a0efafb75c10c279b989f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="4a14d-103">Обновление приложения Service Fabric с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="4a14d-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="4a14d-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="4a14d-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="4a14d-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="4a14d-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="4a14d-106">наиболее часто используемые Hello и обновления рекомендуется отслеживать hello последовательного обновления.</span><span class="sxs-lookup"><span data-stu-id="4a14d-106">hello most frequently used and recommended upgrade approach is hello monitored rolling upgrade.</span></span>  <span data-ttu-id="4a14d-107">Azure Service Fabric отслеживает работоспособность hello приложения hello обновляется на основе набора политик работоспособности.</span><span class="sxs-lookup"><span data-stu-id="4a14d-107">Azure Service Fabric monitors hello health of hello application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="4a14d-108">После обновления домен обновления (UD) Service Fabric оценки работоспособности приложения hello и выполняется следующий домен обновления toohello либо происходит сбой обновления hello в зависимости от политик работоспособности hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-108">Once an update domain (UD) is upgraded, Service Fabric evaluates hello application health and either proceeds toohello next update domain or fails hello upgrade depending on hello health policies.</span></span>

<span data-ttu-id="4a14d-109">Обновление наблюдаемые приложения выполняются с помощью hello управляемые или собственные интерфейсы API, PowerShell или REST.</span><span class="sxs-lookup"><span data-stu-id="4a14d-109">A monitored application upgrade can be performed using hello managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="4a14d-110">Инструкции по обновлению с помощью Visual Studio см. в статье [Руководство по обновлению приложений Service Fabric с помощью Visual Studio](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="4a14d-111">Мониторинг Service Fabric последовательное обновление администратор приложения hello позволяет настроить политики оценки работоспособности hello, что Service Fabric использует toodetermine, если приложение hello находится в работоспособном состоянии.</span><span class="sxs-lookup"><span data-stu-id="4a14d-111">With Service Fabric monitored rolling upgrades, hello application administrator can configure hello health evaluation policy that Service Fabric uses toodetermine if hello application is healthy.</span></span> <span data-ttu-id="4a14d-112">Кроме того hello администратор может настроить toobe действие hello, выполняемое при сбое оценки работоспособности hello (например, выполнив к автоматическому откату.) В этом разделе рассматриваются отслеживаемых обновления для одного из образцов SDK hello, которые использует PowerShell.</span><span class="sxs-lookup"><span data-stu-id="4a14d-112">In addition, hello administrator can configure hello action toobe taken when hello health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of hello SDK samples that uses PowerShell.</span></span> <span data-ttu-id="4a14d-113">Hello следующее видео Microsoft Virtual Academy также поможет выполнить обновление приложения:<center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="4a14d-113">hello following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-hello-visual-objects-sample"></a><span data-ttu-id="4a14d-114">Шаг 1: Построение и развертывание образца hello визуальных объектов</span><span class="sxs-lookup"><span data-stu-id="4a14d-114">Step 1: Build and deploy hello Visual Objects sample</span></span>
<span data-ttu-id="4a14d-115">Создавать и публиковать приложения hello, щелкнув правой кнопкой мыши проект приложения hello, **VisualObjectsApplication,** и выбрав hello **публикации** команды.</span><span class="sxs-lookup"><span data-stu-id="4a14d-115">Build and publish hello application by right-clicking on hello application project, **VisualObjectsApplication,** and selecting hello **Publish** command.</span></span>  <span data-ttu-id="4a14d-116">Дополнительные сведения см. в [руководстве по обновлению приложений Service Fabric](service-fabric-application-upgrade-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="4a14d-117">Кроме того можно использовать PowerShell toodeploy приложения.</span><span class="sxs-lookup"><span data-stu-id="4a14d-117">Alternatively, you can use PowerShell toodeploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="4a14d-118">Прежде чем любые команды Service Fabric hello может использоваться в PowerShell, необходимо сначала tooconnect toohello кластера с помощью hello `Connect-ServiceFabricCluster` командлета.</span><span class="sxs-lookup"><span data-stu-id="4a14d-118">Before any of hello Service Fabric commands may be used in PowerShell, you first need tooconnect toohello cluster by using hello `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="4a14d-119">Аналогичным образом предполагается, что приветствия кластера уже настроена на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="4a14d-119">Similarly, it is assumed that hello Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="4a14d-120">См. в статье hello [Настройка среды разработки Service Fabric](service-fabric-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-120">See hello article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="4a14d-121">После построения проекта hello в Visual Studio, можно использовать команду PowerShell hello [ServiceFabricApplicationPackage копирования](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello приложения пакета toohello ImageStore.</span><span class="sxs-lookup"><span data-stu-id="4a14d-121">After building hello project in Visual Studio, you can use hello PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) toocopy hello application package toohello ImageStore.</span></span> <span data-ttu-id="4a14d-122">Пакет приложения hello tooverify локально, используйте hello [ServiceFabricApplicationPackage тест](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) командлета.</span><span class="sxs-lookup"><span data-stu-id="4a14d-122">If you want tooverify hello app package locally, use hello [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="4a14d-123">Hello следующим шагом является tooregister hello toohello Service Fabric среда выполнения приложения с помощью hello [ServiceFabricApplicationPackage регистра](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) командлета.</span><span class="sxs-lookup"><span data-stu-id="4a14d-123">hello next step is tooregister hello application toohello Service Fabric runtime using hello [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="4a14d-124">Hello последний шаг — toostart экземпляр приложения hello с помощью hello [New ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) командлета.</span><span class="sxs-lookup"><span data-stu-id="4a14d-124">hello final step is toostart an instance of hello application by using hello [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="4a14d-125">Эти три шага, hello аналогом toousing **развернуть** пункта меню в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4a14d-125">These three steps are analogous toousing hello **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="4a14d-126">Теперь вы можете использовать [Service Fabric Explorer tooview hello кластера и hello приложения](service-fabric-visualizing-your-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-126">Now, you can use [Service Fabric Explorer tooview hello cluster and hello application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="4a14d-127">Hello приложение имеет веб-службу, которая может быть навигацию tooin Internet Explorer, введя [http://localhost: 8081/visualobjects](http://localhost:8081/visualobjects) в адресную строку hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-127">hello application has a web service that can be navigated tooin Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in hello address bar.</span></span>  <span data-ttu-id="4a14d-128">Вы увидите некоторые плавающей визуальных объектов перемещения на экране приветствия.</span><span class="sxs-lookup"><span data-stu-id="4a14d-128">You should see some floating visual objects moving around in hello screen.</span></span>  <span data-ttu-id="4a14d-129">Кроме того, можно использовать [Get ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck состояние приложения hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) toocheck hello application status.</span></span>

## <a name="step-2-update-hello-visual-objects-sample"></a><span data-ttu-id="4a14d-130">Шаг 2: Обновление визуальных объектов образец hello</span><span class="sxs-lookup"><span data-stu-id="4a14d-130">Step 2: Update hello Visual Objects sample</span></span>
<span data-ttu-id="4a14d-131">Можно заметить, что с версией hello, которое было развернуто на шаге 1, hello визуальных объектов не поворачиваются.</span><span class="sxs-lookup"><span data-stu-id="4a14d-131">You might notice that with hello version that was deployed in Step 1, hello visual objects do not rotate.</span></span> <span data-ttu-id="4a14d-132">Давайте обновление tooone этого приложения, где также вращать hello визуальных объектов.</span><span class="sxs-lookup"><span data-stu-id="4a14d-132">Let's upgrade this application tooone where hello visual objects also rotate.</span></span>

<span data-ttu-id="4a14d-133">Выберите проект VisualObjects.ActorService hello в hello VisualObjects решения и откройте файл StatefulVisualObjectActor.cs hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-133">Select hello VisualObjects.ActorService project within hello VisualObjects solution, and open hello StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="4a14d-134">Переход в этот файл метод toohello `MoveObject`, закомментируйте `this.State.Move()`и раскомментируйте `this.State.Move(true)`.</span><span class="sxs-lookup"><span data-stu-id="4a14d-134">Within that file, navigate toohello method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="4a14d-135">Это изменение поворачивает hello объекты после обновления службы hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-135">This change rotates hello objects after hello service is upgraded.</span></span>

<span data-ttu-id="4a14d-136">Также нужны tooupdate hello *ServiceManifest.xml* файлу (в PackageRoot) для проекта hello **VisualObjects.ActorService**.</span><span class="sxs-lookup"><span data-stu-id="4a14d-136">We also need tooupdate hello *ServiceManifest.xml* file (under PackageRoot) of hello project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="4a14d-137">Обновление hello *CodePackage* hello too2.0 версии службы и hello соответствующие строки в hello *ServiceManifest.xml* файла.</span><span class="sxs-lookup"><span data-stu-id="4a14d-137">Update hello *CodePackage* and hello service version too2.0, and hello corresponding lines in hello *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="4a14d-138">Hello Visual Studio можно использовать *редактирование файлов манифеста* параметр после правой кнопкой мыши на изменения в файле манифеста hello toomake hello решения.</span><span class="sxs-lookup"><span data-stu-id="4a14d-138">You can use hello Visual Studio *Edit Manifest Files* option after you right-click on hello solution toomake hello manifest file changes.</span></span>

<span data-ttu-id="4a14d-139">После внесения изменений hello, hello манифест должен выглядеть hello следующим образом (выделенные фрагменты Показать изменения hello):</span><span class="sxs-lookup"><span data-stu-id="4a14d-139">After hello changes are made, hello manifest should look like hello following (highlighted portions show hello changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="4a14d-140">Теперь hello *ApplicationManifest.xml* файла (вложенной hello **VisualObjects** проекта под hello **VisualObjects** решения) — обновленных tooversion 2.0 hello  **VisualObjects.ActorService** проекта.</span><span class="sxs-lookup"><span data-stu-id="4a14d-140">Now hello *ApplicationManifest.xml* file (found under hello **VisualObjects** project under hello **VisualObjects** solution) is updated tooversion 2.0 of hello **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="4a14d-141">Кроме того версия приложения hello-обновленные too2.0.0.0 с 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="4a14d-141">In addition, hello Application version is updated too2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="4a14d-142">Hello *ApplicationManifest.xml* следует выглядят hello следующий фрагмент кода:</span><span class="sxs-lookup"><span data-stu-id="4a14d-142">hello *ApplicationManifest.xml* should look like hello following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="4a14d-143">Теперь построения проекта hello, выбрав только hello **ActorService** проект, щелкнув правой кнопкой мыши и выбрав hello **построения** в Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4a14d-143">Now, build hello project by selecting just hello **ActorService** project, and then right-clicking and selecting hello **Build** option in Visual Studio.</span></span> <span data-ttu-id="4a14d-144">При выборе **перестроить все**, необходимо обновить hello версий для всех проектов, так как код hello изменились.</span><span class="sxs-lookup"><span data-stu-id="4a14d-144">If you select **Rebuild all**, you should update hello versions for all projects, since hello code would have changed.</span></span> <span data-ttu-id="4a14d-145">Далее, давайте hello пакета обновленное приложение, щелкнув правой кнопкой мыши ***VisualObjectsApplication***, выбрав hello службы структуры меню и выбрав **пакета**.</span><span class="sxs-lookup"><span data-stu-id="4a14d-145">Next, let's package hello updated application by right-clicking on ***VisualObjectsApplication***, selecting hello Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="4a14d-146">При этом должен создаться пакет приложения, пригодный для развертывания.</span><span class="sxs-lookup"><span data-stu-id="4a14d-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="4a14d-147">Обновленные приложения в случае готовности toobe развертывания.</span><span class="sxs-lookup"><span data-stu-id="4a14d-147">Your updated application is ready toobe deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="4a14d-148">Шаг 3. Определение политик работоспособности и параметров обновления</span><span class="sxs-lookup"><span data-stu-id="4a14d-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="4a14d-149">Ознакомьтесь с hello [параметров обновления приложения](service-fabric-application-upgrade-parameters.md) и hello [процесс обновления](service-fabric-application-upgrade.md) tooget хорошо понимать различных обновить параметры, значения времени ожидания и применяется критерий работоспособности hello .</span><span class="sxs-lookup"><span data-stu-id="4a14d-149">Familiarize yourself with hello [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and hello [upgrade process](service-fabric-application-upgrade.md) tooget a good understanding of hello various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="4a14d-150">В этом пошаговом руководстве критерий оценки работоспособности службы hello toohello по умолчанию (и не рекомендуется) значения, которые означает, что все службы и экземпляры должны быть *работоспособное* после обновления hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-150">For this walkthrough, hello service health evaluation criterion is set toohello default (and recommended) values, which means that all services and instances should be *healthy* after hello upgrade.</span></span>  

<span data-ttu-id="4a14d-151">Тем не менее, давайте увеличить hello *HealthCheckStableDuration* too60 секунд (что hello службы находятся в работоспособном состоянии, по крайней мере 20 секунд до toohello происходит обновление hello Далее измените домена).</span><span class="sxs-lookup"><span data-stu-id="4a14d-151">However, let's increase hello *HealthCheckStableDuration* too60 seconds (so that hello services are healthy for at least 20 seconds before hello upgrade proceeds toohello next update domain).</span></span>  <span data-ttu-id="4a14d-152">Давайте также задать hello *UpgradeDomainTimeout* toobe 1200 секунд и hello *UpgradeTimeout* toobe 3000 секунд.</span><span class="sxs-lookup"><span data-stu-id="4a14d-152">Let's also set hello *UpgradeDomainTimeout* toobe 1200 seconds and hello *UpgradeTimeout* toobe 3000 seconds.</span></span>

<span data-ttu-id="4a14d-153">Наконец, давайте также задать hello *UpgradeFailureAction* toorollback.</span><span class="sxs-lookup"><span data-stu-id="4a14d-153">Finally, let's also set hello *UpgradeFailureAction* toorollback.</span></span> <span data-ttu-id="4a14d-154">Этот параметр требует Service Fabric tooroll назад hello приложения toohello предыдущей версии, при обнаружении проблем во время обновления hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-154">This option requires Service Fabric tooroll back hello application toohello previous version if it encounters any issues during hello upgrade.</span></span> <span data-ttu-id="4a14d-155">Таким образом при запуске обновления hello (на шаге 4), hello заданы следующие параметры являются:</span><span class="sxs-lookup"><span data-stu-id="4a14d-155">Thus, when starting hello upgrade (in Step 4), hello following parameters are specified:</span></span>

<span data-ttu-id="4a14d-156">FailureAction = Rollback</span><span class="sxs-lookup"><span data-stu-id="4a14d-156">FailureAction = Rollback</span></span>

<span data-ttu-id="4a14d-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="4a14d-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="4a14d-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="4a14d-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="4a14d-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="4a14d-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="4a14d-160">Шаг 4. Подготовка приложения к обновлению</span><span class="sxs-lookup"><span data-stu-id="4a14d-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="4a14d-161">Теперь приложение hello создается и готов toobe обновлена.</span><span class="sxs-lookup"><span data-stu-id="4a14d-161">Now hello application is built and ready toobe upgraded.</span></span> <span data-ttu-id="4a14d-162">Если открыть окно PowerShell с правами администратора и ввести команду [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), в нем отобразится информация о том, что вы развернули приложение типа **VisualObjects** версии 1.0.0.0.</span><span class="sxs-lookup"><span data-stu-id="4a14d-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="4a14d-163">Hello пакета приложения хранится в следующих hello относительный путь, где распакованные hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span><span class="sxs-lookup"><span data-stu-id="4a14d-163">hello application package is stored under hello following relative path where you uncompressed hello Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="4a14d-164">В этом каталоге, где хранится пакет приложения hello следует найти папку «Пакет».</span><span class="sxs-lookup"><span data-stu-id="4a14d-164">You should find a "Package" folder in that directory, where hello application package is stored.</span></span> <span data-ttu-id="4a14d-165">Проверьте tooensure hello отметки времени, что это последнюю сборку hello (возможно, потребуется соответствующим образом, а также пути hello toomodify).</span><span class="sxs-lookup"><span data-stu-id="4a14d-165">Check hello timestamps tooensure that it is hello latest build (you may need toomodify hello paths appropriately as well).</span></span>

<span data-ttu-id="4a14d-166">Теперь давайте hello копирования обновление пакета приложения toohello ImageStore структуры службы (места хранения пакетов приложения hello, Service Fabric).</span><span class="sxs-lookup"><span data-stu-id="4a14d-166">Now let's copy hello updated application package toohello Service Fabric ImageStore (where hello application packages are stored by Service Fabric).</span></span> <span data-ttu-id="4a14d-167">Здравствуйте, параметр *ApplicationPackagePathInImageStore* информирует о том, где можно найти пакет приложения hello Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="4a14d-167">hello parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find hello application package.</span></span> <span data-ttu-id="4a14d-168">Мы поместили приложения hello обновлен «VisualObjects\_V2» с hello следующую команду (возможно, потребуется пути toomodify снова соответствующим образом).</span><span class="sxs-lookup"><span data-stu-id="4a14d-168">We have put hello updated application in "VisualObjects\_V2" with hello following command (you may need toomodify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="4a14d-169">Hello следующим шагом является приложение, используя Service Fabric, которое может выполняться hello tooregister [ServiceFabricApplicationType регистра](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) команды:</span><span class="sxs-lookup"><span data-stu-id="4a14d-169">hello next step is tooregister this application with Service Fabric, which can be performed using hello [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="4a14d-170">Если hello предыдущая команда не работает, скорее всего, необходимо повторное построение всех служб.</span><span class="sxs-lookup"><span data-stu-id="4a14d-170">If hello preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="4a14d-171">Как указано в шаге 2, может иметь tooupdate вашей версии веб-службы.</span><span class="sxs-lookup"><span data-stu-id="4a14d-171">As mentioned in Step 2, you may have tooupdate your WebService version as well.</span></span>

## <a name="step-5-start-hello-application-upgrade"></a><span data-ttu-id="4a14d-172">Шаг 5: Запуск обновления приложения hello</span><span class="sxs-lookup"><span data-stu-id="4a14d-172">Step 5: Start hello application upgrade</span></span>
<span data-ttu-id="4a14d-173">Теперь мы все приложения hello toostart набор обновления с помощью hello [ServiceFabricApplicationUpgrade начала](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) команды:</span><span class="sxs-lookup"><span data-stu-id="4a14d-173">Now, we're all set toostart hello application upgrade by using hello [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="4a14d-174">Hello имя приложения hello же, как оно было описано в hello *ApplicationManifest.xml* файла.</span><span class="sxs-lookup"><span data-stu-id="4a14d-174">hello application name is hello same as it was described in hello *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="4a14d-175">Service Fabric использует это имя tooidentify, какое приложение обновляется начало.</span><span class="sxs-lookup"><span data-stu-id="4a14d-175">Service Fabric uses this name tooidentify which application is getting upgraded.</span></span> <span data-ttu-id="4a14d-176">Если задать слишком короткий toobe тайм-ауты hello, может появиться сообщение об ошибке, состояния hello проблему.</span><span class="sxs-lookup"><span data-stu-id="4a14d-176">If you set hello time-outs toobe too short, you may encounter a failure message that states hello problem.</span></span> <span data-ttu-id="4a14d-177">См. toohello при устранении неполадок или увеличить тайм-ауты hello.</span><span class="sxs-lookup"><span data-stu-id="4a14d-177">Refer toohello troubleshooting section, or increase hello time-outs.</span></span>

<span data-ttu-id="4a14d-178">Теперь, как hello продолжается обновления приложения, вы можете отслеживать ее с помощью Service Fabric Explorer или с помощью hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) команду PowerShell:</span><span class="sxs-lookup"><span data-stu-id="4a14d-178">Now, as hello application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using hello [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="4a14d-179">Через несколько минут, состояние hello, полученный с помощью hello, предшествующий команду PowerShell должна выглядеть следующим образом, все домены обновления были обновлены («завершено»).</span><span class="sxs-lookup"><span data-stu-id="4a14d-179">In a few minutes, hello status that you got by using hello preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="4a14d-180">И вы должны найти что запустили поворот hello визуальных объектов в окне обозревателя!</span><span class="sxs-lookup"><span data-stu-id="4a14d-180">And you should find that hello visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="4a14d-181">Обновление с версии 2 tooversion 3 или с версии 2 tooversion 1 в качестве упражнения можно попробовать.</span><span class="sxs-lookup"><span data-stu-id="4a14d-181">You can try upgrading from version 2 tooversion 3, or from version 2 tooversion 1 as an exercise.</span></span> <span data-ttu-id="4a14d-182">Переход с версии 2 tooversion 1 также считается обновления.</span><span class="sxs-lookup"><span data-stu-id="4a14d-182">Moving from version 2 tooversion 1 is also considered an upgrade.</span></span> <span data-ttu-id="4a14d-183">Работать с тайм-аутов и toomake политики работоспособности самостоятельно ознакомиться с ними.</span><span class="sxs-lookup"><span data-stu-id="4a14d-183">Play with time-outs and health policies toomake yourself familiar with them.</span></span> <span data-ttu-id="4a14d-184">При развертывании кластера Azure tooan hello набор toobe необходимость параметры соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="4a14d-184">When you are deploying tooan Azure cluster, hello parameters need toobe set appropriately.</span></span> <span data-ttu-id="4a14d-185">Это хороший tooset hello тайм-ауты достаточно экономно.</span><span class="sxs-lookup"><span data-stu-id="4a14d-185">It is good tooset hello time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="4a14d-186">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="4a14d-186">Next steps</span></span>
<span data-ttu-id="4a14d-187">[Руководство по обновлению приложений Service Fabric с помощью Visual Studio](service-fabric-application-upgrade-tutorial.md) поможет вам выполнить поэтапное обновление приложения с помощью Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="4a14d-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="4a14d-188">Управление обновлениями приложения осуществляется с помощью [параметров обновления](service-fabric-application-upgrade-parameters.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="4a14d-189">Обеспечить совместимость на обновление приложения путем изучения как toouse [сериализации данных](service-fabric-application-upgrade-data-serialization.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-189">Make your application upgrades compatible by learning how toouse [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="4a14d-190">Узнайте, как toouse расширенные функции при обновлении приложения с помощью ссылки слишком[дополнительные разделы](service-fabric-application-upgrade-advanced.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-190">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="4a14d-191">Исправьте распространенных проблем в обновлений приложений с помощью ссылки действия toohello в [Устранение неполадок обновлений приложений](service-fabric-application-upgrade-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="4a14d-191">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

