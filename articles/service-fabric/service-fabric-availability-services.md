---
title: "aaaAvailability служб Service Fabric | Документы Microsoft"
description: "Описание процессов обнаружения сбоев, отработки отказа, восстановления для служб"
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 279ba4a4-f2ef-4e4e-b164-daefd10582e4
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: c443aadfe31a1413359b08d34c4b7dd5db4edd16
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="availability-of-service-fabric-services"></a><span data-ttu-id="34bd0-103">Доступность служб структуры служб</span><span class="sxs-lookup"><span data-stu-id="34bd0-103">Availability of Service Fabric services</span></span>
<span data-ttu-id="34bd0-104">В этой статье представлен обзор способа, который используется в Service Fabric для поддержания доступности службы.</span><span class="sxs-lookup"><span data-stu-id="34bd0-104">This article gives an overview of how Service Fabric maintains availability of a service.</span></span>

## <a name="availability-of-service-fabric-stateless-services"></a><span data-ttu-id="34bd0-105">Доступность служб без отслеживания состояния в структуре служб</span><span class="sxs-lookup"><span data-stu-id="34bd0-105">Availability of Service Fabric stateless services</span></span>
<span data-ttu-id="34bd0-106">Службы Azure Service Fabric могут предусматривать или не предусматривать отслеживание состояния.</span><span class="sxs-lookup"><span data-stu-id="34bd0-106">Azure Service Fabric services can be either stateful or stateless.</span></span> <span data-ttu-id="34bd0-107">Службы без отслеживания состояния — это Прикладная служба, которая не имеет [локальное состояние](service-fabric-concepts-state.md) , требующий toobe высокодоступным и надежным.</span><span class="sxs-lookup"><span data-stu-id="34bd0-107">A stateless service is an application service that does not have any [local state](service-fabric-concepts-state.md) that needs toobe highly available or reliable.</span></span>

<span data-ttu-id="34bd0-108">При создании службы без отслеживания состояния требуется определить `InstanceCount`.</span><span class="sxs-lookup"><span data-stu-id="34bd0-108">Creating a stateless service requires defining an `InstanceCount`.</span></span> <span data-ttu-id="34bd0-109">число экземпляров Hello определяет hello число экземпляров логики приложения hello службы без отслеживания состояния, которая должна быть запущена в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="34bd0-109">hello instance count defines hello number of instances of hello stateless service's application logic that should be running in hello cluster.</span></span> <span data-ttu-id="34bd0-110">При увеличении числа экземпляров в hello — hello, рекомендуется использовать способ масштабирования службы без отслеживания состояния.</span><span class="sxs-lookup"><span data-stu-id="34bd0-110">Increasing hello number of instances is hello recommended way of scaling out a stateless service.</span></span>

<span data-ttu-id="34bd0-111">При отказе экземпляра без сохранения состояния с именем службы, новый экземпляр создается на некоторых соответствующего узла в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="34bd0-111">When an instance of a stateless named service fails, a new instance is created on some eligible node in hello cluster.</span></span> <span data-ttu-id="34bd0-112">Например, экземпляр службы без отслеживания состояния может завершиться с ошибкой на узле Node1 и быть создан заново на узле Node5.</span><span class="sxs-lookup"><span data-stu-id="34bd0-112">For example, a stateless service instance might fail on Node1 and be recreated on Node5.</span></span>

## <a name="availability-of-service-fabric-stateful-services"></a><span data-ttu-id="34bd0-113">Доступность служб с отслеживанием состояния в структуре служб</span><span class="sxs-lookup"><span data-stu-id="34bd0-113">Availability of Service Fabric stateful services</span></span>
<span data-ttu-id="34bd0-114">Служба с отслеживанием состояния обладает определенным состоянием, которое с ней связано.</span><span class="sxs-lookup"><span data-stu-id="34bd0-114">A stateful service has some state associated with it.</span></span> <span data-ttu-id="34bd0-115">В структуре служб служба с отслеживанием состояния моделируется в виде набора реплик.</span><span class="sxs-lookup"><span data-stu-id="34bd0-115">In Service Fabric, a stateful service is modeled as a set of replicas.</span></span> <span data-ttu-id="34bd0-116">Каждая реплика представляет собой запущенный экземпляр кода hello hello службы, которая также имеет копию hello состояние для этой службы.</span><span class="sxs-lookup"><span data-stu-id="34bd0-116">Each replica is a running instance of hello code of hello service that also has a copy of hello state for that service.</span></span> <span data-ttu-id="34bd0-117">Операций чтения и записи выполняются в одной реплике (называемые hello первичный).</span><span class="sxs-lookup"><span data-stu-id="34bd0-117">Read and write operations are performed at one replica (called hello Primary).</span></span> <span data-ttu-id="34bd0-118">Toostate изменения из операций записи, *репликации* toohello реплик из набора реплик hello (называемые активные вторичные реплики) и применяется.</span><span class="sxs-lookup"><span data-stu-id="34bd0-118">Changes toostate from write operations are *replicated* toohello other replicas in hello replica set (called Active Secondaries) and applied.</span></span> 

<span data-ttu-id="34bd0-119">Первичная реплика может быть только одна. Активных вторичных реплик может быть несколько.</span><span class="sxs-lookup"><span data-stu-id="34bd0-119">There can be only one Primary replica, but there can be multiple Active Secondary replicas.</span></span> <span data-ttu-id="34bd0-120">Hello число активных вторичных реплик настраивается и выше число реплик, которые допускают большего количества параллельных программах и сбоев оборудования.</span><span class="sxs-lookup"><span data-stu-id="34bd0-120">hello number of Active Secondary replicas is configurable, and a higher number of replicas can tolerate a greater number of concurrent software and hardware failures.</span></span>

<span data-ttu-id="34bd0-121">Если первичная реплика hello выходит из строя, Service Fabric делает один hello активной вторичной реплики hello новой первичной репликой.</span><span class="sxs-lookup"><span data-stu-id="34bd0-121">If hello Primary replica goes down, Service Fabric makes one of hello Active Secondary replicas hello new Primary replica.</span></span> <span data-ttu-id="34bd0-122">Данной активной вторичной реплики уже установлена версия hello обновить состояние hello (через *репликации*), и он может продолжить обработку дальнейших чтения и операций записи.</span><span class="sxs-lookup"><span data-stu-id="34bd0-122">This Active Secondary replica already has hello updated version of hello state (via *replication*), and it can continue processing further read and write operations.</span></span>

<span data-ttu-id="34bd0-123">Эта концепция — основной или активной вторичной реплики, называется hello роли реплики.</span><span class="sxs-lookup"><span data-stu-id="34bd0-123">This concept, of a replica being either a Primary or Active Secondary, is known as hello Replica Role.</span></span>

### <a name="replica-roles"></a><span data-ttu-id="34bd0-124">Роли реплик</span><span class="sxs-lookup"><span data-stu-id="34bd0-124">Replica roles</span></span>
<span data-ttu-id="34bd0-125">роль реплики Hello — используется toomanage hello жизненного цикла состояния hello под управлением этой реплики.</span><span class="sxs-lookup"><span data-stu-id="34bd0-125">hello role of a replica is used toomanage hello life cycle of hello state being managed by that replica.</span></span> <span data-ttu-id="34bd0-126">Реплика, роль которой определена как первичная, обслуживает запросы на чтение.</span><span class="sxs-lookup"><span data-stu-id="34bd0-126">A replica whose role is Primary services read requests.</span></span> <span data-ttu-id="34bd0-127">Hello основной также обрабатывает все запросы записи путем обновления состояния и репликация изменений hello.</span><span class="sxs-lookup"><span data-stu-id="34bd0-127">hello Primary also handles all write requests by updating its state and replicating hello changes.</span></span> <span data-ttu-id="34bd0-128">Эти изменения могут применяться toohello активные вторичные реплики в наборе реплик hello.</span><span class="sxs-lookup"><span data-stu-id="34bd0-128">These changes are applied toohello Active Secondaries in hello replica set.</span></span> <span data-ttu-id="34bd0-129">Задание Hello Active получателя — tooreceive изменений состояния, которые hello первичная реплика будет реплицирована и обновить представление этого состояния hello.</span><span class="sxs-lookup"><span data-stu-id="34bd0-129">hello job of an Active Secondary is tooreceive state changes that hello Primary replica has replicated and update its view of hello state.</span></span>

> [!NOTE]
> <span data-ttu-id="34bd0-130">Например моделей программирования высокого уровня [службы Reliable Actor](service-fabric-reliable-actors-introduction.md) и [надежного обмена](service-fabric-reliable-services-introduction.md) скрыть hello понятие роль реплики от разработчика hello.</span><span class="sxs-lookup"><span data-stu-id="34bd0-130">Higher-level programming models such as [Reliable Actors](service-fabric-reliable-actors-introduction.md) and [Reliable Services](service-fabric-reliable-services-introduction.md) hide hello concept of replica role from hello developer.</span></span> <span data-ttu-id="34bd0-131">В субъекты понятие hello роли необязателен, при в службах упрощено главным образом для большинства сценариев.</span><span class="sxs-lookup"><span data-stu-id="34bd0-131">In Actors, hello notion of role is unnecessary, while in Services it is largely simplified for most scenarios.</span></span>
>

## <a name="next-steps"></a><span data-ttu-id="34bd0-132">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="34bd0-132">Next steps</span></span>
<span data-ttu-id="34bd0-133">Дополнительные сведения о концепции Service Fabric см. следующие статьи hello:</span><span class="sxs-lookup"><span data-stu-id="34bd0-133">For more information on Service Fabric concepts, see hello following articles:</span></span>

- [<span data-ttu-id="34bd0-134">Масштабирование служб Service Fabric</span><span class="sxs-lookup"><span data-stu-id="34bd0-134">Scaling Service Fabric services</span></span>](service-fabric-concepts-scalability.md)
- [<span data-ttu-id="34bd0-135">Разделение служб Service Fabric</span><span class="sxs-lookup"><span data-stu-id="34bd0-135">Partitioning Service Fabric services</span></span>](service-fabric-concepts-partitioning.md)
- [<span data-ttu-id="34bd0-136">Определение состояния и управление им</span><span class="sxs-lookup"><span data-stu-id="34bd0-136">Defining and managing state</span></span>](service-fabric-concepts-state.md)
- [<span data-ttu-id="34bd0-137">Надежные службы</span><span class="sxs-lookup"><span data-stu-id="34bd0-137">Reliable Services</span></span>](service-fabric-reliable-services-introduction.md)
