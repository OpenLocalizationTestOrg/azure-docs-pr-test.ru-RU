---
title: "Нагрузочное тестирование приложения с помощью Visual Studio Team Services | Документация Майкрософт"
description: "Узнайте, как выполнить нагрузочное тестирование приложений Azure Service Fabric с помощью Visual Studio Team Services."
services: service-fabric
documentationcenter: na
author: cawams
manager: timlt
editor: 
ms.assetid: fc743585-0d1b-483f-981d-493f4552ac07
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/18/2016
ms.author: cawa
ms.openlocfilehash: e8e270ce865d4da3ee219958b308db2c1c89b11b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="load-test-your-application-by-using-visual-studio-team-services"></a>Нагрузочное тестирование приложения с помощью Visual Studio Team Services
В этой статье показано, как выполнить нагрузочное тестирование приложения с помощью функций нагрузочного тестирования Microsoft Visual Studio. В ней используются служба с отслеживанием состояния Azure Service Fabric в серверной части и служба без отслеживания состояния в клиентской части. Используемый здесь пример приложения представляет собой симулятор расположения самолета. Вы указываете идентификатор самолета, время вылета и место назначения. Серверная часть приложения обрабатывает запросы, а клиентская отображает на карте самолет в соответствии с заданными критериями.

Структура приложения Service Fabric, которое вы будете тестировать, показана на следующей схеме.

![Схема примера приложения, позволяющего определять местонахождение самолетов][0]

## <a name="prerequisites"></a>Предварительные требования
Перед началом работы необходимо сделать следующее:

* Получите учетную запись Visual Studio Team. Это можно сделать бесплатно на веб-сайте [Visual Studio Team Services](https://www.visualstudio.com).
* Загрузите и установите Visual Studio 2013 или Visual Studio 2015. В этой статье используется выпуск Visual Studio 2015 Enterprise, но Visual Studio 2013 и другие выпуски должны работать аналогичным образом.
* Разверните свое приложение в промежуточной среде. Сведения об этом см. в статье [Публикация приложения на удаленный кластер с помощью Visual Studio](service-fabric-publish-app-remote-cluster.md).
* Поймите схему использования вашего приложения. Эта информация используется для моделирования шаблона нагрузки.
* Поймите цель нагрузочного тестирования. Это помогает интерпретировать и анализировать результаты нагрузочного тестирования.

## <a name="create-and-run-the-web-performance-and-load-test-project"></a>Создание и запуск проекта веб-тестов производительности и нагрузочных тестов
### <a name="create-a-web-performance-and-load-test-project"></a>Создание проекта веб-тестов производительности и нагрузочных тестов
1. Откройте Visual Studio 2015. В строке меню выберите **Файл** > **Создать** > **Проект**. Откроется диалоговое окно **Создание проекта**.
2. Разверните узел **Visual C#** и выберите **Тест** > **Проект с веб-тестами производительности и нагрузочными тестами**. Укажите имя проекта и нажмите кнопку **ОК** .

    ![Снимок экрана: диалоговое окно "Новый проект"][1]

    На экране должен появиться новый проект веб-тестов производительности и нагрузочных тестов в обозревателе решений.

    ![Снимок экрана: новый проект в обозревателе решений][2]

### <a name="record-a-web-performance-test"></a>Запись веб-теста производительности
1. Откройте проект .webtest.
2. Щелкните значок **Добавить запись** для запуска сеанса записи в браузере.

    ![Снимок экрана: значок добавления записи в браузере][3]

    ![Снимок экрана: кнопка записи в браузере][4]
3. Перейдите к приложению Service Fabric. На панели записи должны отображаться веб-запросы.

    ![Снимок экрана: веб-запросы на панели записи][5]
4. Выполните последовательность действий, которую вы ожидаете от пользователя. Эти действия используются в качестве шаблона для создания нагрузки.
5. Когда закончите, нажмите кнопку **Остановить** , чтобы остановить запись.

    ![Снимок экрана: кнопка остановки][6]

    Проект .webtest в Visual Studio должен захватить последовательности запросов. Динамические параметры заменяются автоматически. На этом этапе можно удалить любые излишние и повторяющиеся зависимые запросы, которые не являются частью сценария тестирования.
6. Сохраните проект и выберите **Запустить тест** для запуска веб-теста производительности локально и убедитесь, что все работает правильно.

    ![Снимок экрана: команда запуска теста][7]

### <a name="parameterize-the-web-performance-test"></a>Параметризация веб-теста производительности
Веб-тест производительности можно параметризовать, преобразовав его в закодированный веб-тест производительности и внеся изменения в код. В качестве альтернативы можно привязать веб-тест производительности к списку данных, так чтобы тест перебирал эти данные. Сведения о преобразовании веб-теста производительности в закодированный тест см. в статье [Создание и запуск закодированного веб-теста производительности](https://msdn.microsoft.com/library/ms182552.aspx). в статье [Добавление источника данных к веб-тесту производительности](https://msdn.microsoft.com/library/ms243142.aspx) .

В этом примере мы преобразуем веб-тест производительности в закодированный тест, и вы сможете заменить идентификатор самолета созданным идентификатором GUID, а также добавить дополнительные запросы для отправки рейсов в другие места.

### <a name="create-a-load-test-project"></a>Создание проекта нагрузочного теста
Проект нагрузочного теста состоит из одного или нескольких сценариев, описываемых веб-тестом производительности и модульным тестом, и дополнительных параметров нагрузочного теста. Ниже показано, как создать проект нагрузочного теста:

1. В контекстном меню проекта веб-тестов производительности и нагрузочных тестов выберите **Добавить** > **Нагрузочный тест**. В мастере **тестовой нагрузки** нажмите кнопку **Далее**, чтобы настроить параметры теста.
2. В разделе **Шаблон нагрузки** выберите, хотите ли вы использовать постоянную пользовательскую нагрузку или пошаговую пользовательскую нагрузку, которая начинается с нескольких пользователей, и с течением времени их количество увеличивается.

    Если у вас хорошее представление об объеме пользовательской нагрузки и вы хотите посмотреть, как с ней справится текущая система, выберите **Постоянная нагрузка**. Если вы хотите узнать, будет ли система работать стабильно при различных объемах нагрузки, выберите **Пошаговая нагрузка**.
3. В разделе **Тестовый набор** нажмите кнопку **Добавить** и выберите тест, который хотите включить в нагрузочный тест. Для указания доли каждого теста в общем количестве запущенных тестов воспользуйтесь столбцом **Распределение** .
4. В разделе **Параметры запуска** укажите длительность нагрузочного теста.

   > [!NOTE]
   > Параметр **Итерации теста** доступен только при запуске нагрузочного теста локально с помощью Visual Studio.
   >
   >
5. В подразделе **Расположение** раздела **Параметры запуска** укажите расположение, в котором формируются запросы нагрузочного теста. Мастер может попросить вас войти в вашу учетную запись Team Services. Выполните вход и выберите географическое расположение. По завершении нажмите кнопку **Готово** .
6. После создания нагрузочного теста откройте проект .loadtest и выберите текущие параметры запуска, например: **Параметры запуска** > **Параметры запуска1 [Active]**. Параметры запуска откроются в окне **Свойства** .
7. В разделе **Результаты** окна **Параметры запуска** для параметра **Хранилище сведений о синхронизации** по умолчанию должно быть установлено значение **Нет**. Измените это значение на **Все индивидуальные сведения** для получения дополнительных сведений о результатах нагрузочного теста. Дополнительные сведения о том, как подключиться к Visual Studio Team Services и запустить нагрузочный тест, см. на [этой странице](https://www.visualstudio.com/load-testing.aspx).

### <a name="run-the-load-test-by-using-visual-studio-team-services"></a>Запуск нагрузочного теста с помощью Visual Studio Team Services
Для запуска теста выберите **Запустить нагрузочный тест** .

![Снимок экрана: команда запуска нагрузочного теста][8]

## <a name="view-and-analyze-the-load-test-results"></a>Просмотр и анализ результатов нагрузочного теста
По мере выполнения нагрузочного теста информация о производительности появляется на графике. У вас должен отобразиться примерно такой график.

![Снимок экрана: диаграмма производительности для результатов нагрузочного теста][9]

1. Выберите ссылку **Загрузить отчет** в верхней части страницы. После загрузки отчета нажмите кнопку **Просмотреть отчет** .

    На вкладке **График** можно увидеть графики для различных счетчиков производительности. На вкладке **Сводка** показываются общие результаты теста. На вкладке **Таблицы** отображается общее количество успешных и неудачных нагрузочных тестов.
2. Выберите ссылки с номерами в столбцах **Тест** > **Неудачные** и **Ошибки** > **Количество**, чтобы просмотреть подробные сведения об ошибке.

    На вкладке **Сведения** отображается информация о виртуальных пользователях и сценариях тестов для неудачных запросов. Эти данные могут быть полезными, если нагрузочный тест содержит несколько сценариев.

Дополнительные сведения о просмотре результатов нагрузочного тестирования см. на [этой странице](https://www.visualstudio.com/load-testing.aspx).

## <a name="automate-your-load-test"></a>Автоматизация нагрузочного тестирования
Нагрузочный тест Visual Studio Team Services предоставляет интерфейсы API, которые позволяют управлять нагрузочными тестами и анализировать результаты в учетной записи Team Services. Дополнительные сведения см. в записи блога об [интерфейсах REST API для нагрузочного тестирования в облаке](http://blogs.msdn.com/b/visualstudioalm/archive/2014/11/03/cloud-load-testing-rest-apis-are-here.aspx).

## <a name="next-steps"></a>Дальнейшие действия
* [Мониторинг и диагностика состояния служб в локальной среде разработки](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md)

[0]: ./media/service-fabric-vso-load-test/OverviewDiagram.png
[1]: ./media/service-fabric-vso-load-test/NewProjectDialog.png
[2]: ./media/service-fabric-vso-load-test/Project.png
[3]: ./media/service-fabric-vso-load-test/AddRecording.png
[4]: ./media/service-fabric-vso-load-test/AddRecording2.png
[5]: ./media/service-fabric-vso-load-test/ActionSequence.png
[6]: ./media/service-fabric-vso-load-test/StopRecording.png
[7]: ./media/service-fabric-vso-load-test/RunTest.png
[8]: ./media/service-fabric-vso-load-test/RunTest2.png
[9]: ./media/service-fabric-vso-load-test/Graph.png
