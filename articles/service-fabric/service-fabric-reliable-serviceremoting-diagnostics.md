---
title: "aaaAzure ServiceFabric диагностики и мониторинга | Документы Microsoft"
description: "В этой статье описаны функции мониторинга производительности hello в hello надежного ServiceRemoting структуры службы среды выполнения, как счетчики производительности, генерируемой его."
services: service-fabric
documentationcenter: .net
author: suchiagicha
manager: timlt
editor: suchiagicha
ms.assetid: 1c229923-670a-4634-ad59-468ff781ad18
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: suchiagicha
ms.openlocfilehash: 64db9a890bd59a1326e587d14b89c007b71a9059
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="diagnostics-and-performance-monitoring-for-reliable-service-remoting"></a><span data-ttu-id="cd848-103">Диагностика и мониторинг производительности в модели Reliable Service Remoting</span><span class="sxs-lookup"><span data-stu-id="cd848-103">Diagnostics and performance monitoring for Reliable Service Remoting</span></span>
<span data-ttu-id="cd848-104">Среда выполнения надежного ServiceRemoting Hello выдает [счетчики производительности](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.aspx).</span><span class="sxs-lookup"><span data-stu-id="cd848-104">hello Reliable ServiceRemoting runtime emits  [performance counters](https://msdn.microsoft.com/library/system.diagnostics.performancecounter.aspx).</span></span> <span data-ttu-id="cd848-105">Они предоставляют подробные сведения о том, как работает hello ServiceRemoting и помогают устранять неполадки и наблюдения за производительностью.</span><span class="sxs-lookup"><span data-stu-id="cd848-105">These provide insights into how hello ServiceRemoting is operating and help with troubleshooting and performance monitoring.</span></span>


## <a name="performance-counters"></a><span data-ttu-id="cd848-106">Счетчики производительности</span><span class="sxs-lookup"><span data-stu-id="cd848-106">Performance counters</span></span>
<span data-ttu-id="cd848-107">Среда выполнения надежного ServiceRemoting Hello определяет hello следующие категории счетчиков производительности:</span><span class="sxs-lookup"><span data-stu-id="cd848-107">hello Reliable ServiceRemoting runtime defines hello following performance counter categories:</span></span>

| <span data-ttu-id="cd848-108">Категория</span><span class="sxs-lookup"><span data-stu-id="cd848-108">Category</span></span> | <span data-ttu-id="cd848-109">Описание</span><span class="sxs-lookup"><span data-stu-id="cd848-109">Description</span></span> |
| --- | --- |
| <span data-ttu-id="cd848-110">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="cd848-110">Service Fabric Service</span></span> |<span data-ttu-id="cd848-111">Счетчики конкретных tooAzure удаленного взаимодействия службы структуры службы, к примеру, tooprocess среднее время запроса</span><span class="sxs-lookup"><span data-stu-id="cd848-111">Counters specific tooAzure Service Fabric Service Remoting , for example, average time taken tooprocess request</span></span> |
| <span data-ttu-id="cd848-112">Service Fabric Service Method</span><span class="sxs-lookup"><span data-stu-id="cd848-112">Service Fabric Service Method</span></span> |<span data-ttu-id="cd848-113">Toomethods определенных счетчиков реализуемый служба Service Fabric удаленного взаимодействия, например, как часто вызова метода службы</span><span class="sxs-lookup"><span data-stu-id="cd848-113">Counters specific toomethods implemented by Service Fabric Remoting Service, for example, how often a service method is invoked</span></span> |

<span data-ttu-id="cd848-114">Каждый из предыдущих категорий hello имеет один или несколько счетчиков.</span><span class="sxs-lookup"><span data-stu-id="cd848-114">Each of hello preceding categories has one or more counters.</span></span>

<span data-ttu-id="cd848-115">Hello [монитора производительности](https://technet.microsoft.com/library/cc749249.aspx) приложение, доступное в ОС Windows hello по умолчанию может быть используется toocollect и представление данных счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-115">hello [Windows Performance Monitor](https://technet.microsoft.com/library/cc749249.aspx) application that is available by default in hello Windows operating system can be used toocollect and view performance counter data.</span></span> <span data-ttu-id="cd848-116">[Диагностика Azure](../cloud-services/cloud-services-dotnet-diagnostics.md) — еще один параметр для сбора данных счетчиков производительности и передачи их tooAzure таблиц.</span><span class="sxs-lookup"><span data-stu-id="cd848-116">[Azure Diagnostics](../cloud-services/cloud-services-dotnet-diagnostics.md) is another option for collecting performance counter data and uploading it tooAzure tables.</span></span>

### <a name="performance-counter-instance-names"></a><span data-ttu-id="cd848-117">Имена экземпляров счетчиков производительности</span><span class="sxs-lookup"><span data-stu-id="cd848-117">Performance counter instance names</span></span>
<span data-ttu-id="cd848-118">В кластере, содержащем большое количество служб или секций ServiceRemoting, находится большое количество экземпляров счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-118">A cluster that has a large number of  ServiceRemoting services or partitions have a large number of  performance counter instances.</span></span> <span data-ttu-id="cd848-119">экземпляр счетчика производительности Hello имена могут помочь в идентификации определенной секции hello и метод службы (если применимо), с которым связан этот экземпляр счетчика производительности hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-119">hello performance counter instance names can help in identifying hello specific partition and Service method (if applicable) that hello performance counter instance is associated with.</span></span>

#### <a name="service-fabric-service-category"></a><span data-ttu-id="cd848-120">Категория Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="cd848-120">Service Fabric Service category</span></span>
<span data-ttu-id="cd848-121">Для категории hello `Service Fabric Service`, имена экземпляров счетчиков hello находятся в hello следующий формат:</span><span class="sxs-lookup"><span data-stu-id="cd848-121">For hello category `Service Fabric Service`, hello counter instance names are in hello following format:</span></span>

`ServiceFabricPartitionID_ServiceReplicaOrInstanceId_ServiceRuntimeInternalID`

<span data-ttu-id="cd848-122">*ServiceFabricPartitionID* является строковым представлением hello hello сопоставлен идентификатор секции Service Fabric, hello экземпляр счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-122">*ServiceFabricPartitionID* is hello string representation of hello Service Fabric partition ID that hello performance counter instance is associated with.</span></span> <span data-ttu-id="cd848-123">Идентификатор секции Hello является идентификатором GUID, и его строковое представление создается с помощью hello [ `Guid.ToString` ](https://msdn.microsoft.com/library/97af8hh4.aspx) метод с описатель формата «D».</span><span class="sxs-lookup"><span data-stu-id="cd848-123">hello partition ID is a GUID, and its string representation is generated through hello [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) method with format specifier "D".</span></span>

<span data-ttu-id="cd848-124">*ServiceReplicaOrInstanceId* является строковым представлением hello код реплику или экземпляр структуры службы, hello экземпляр счетчика производительности, связанные с hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-124">*ServiceReplicaOrInstanceId* is hello string representation of hello Service Fabric Replica/Instance ID that hello performance counter instance is associated with.</span></span>

<span data-ttu-id="cd848-125">*ServiceRuntimeInternalID* — hello строковое представление 64-разрядного целого числа, создаваемый средой выполнения Fabric Service hello для внутреннего использования.</span><span class="sxs-lookup"><span data-stu-id="cd848-125">*ServiceRuntimeInternalID* is hello string representation of a 64-bit integer that is generated by hello Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="cd848-126">Это включается в экземпляр счетчика производительности hello его уникальность имени tooensure и избежать конфликтов с другими имена экземпляров счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-126">This is included in hello performance counter instance name tooensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="cd848-127">Пользователи не пытайтесь выполнить toointerpret эту часть имени экземпляра счетчика производительности hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-127">Users should not try toointerpret this portion of hello performance counter instance name.</span></span>

<span data-ttu-id="cd848-128">Hello ниже приведен пример имя экземпляра счетчика для счетчика, который принадлежит toohello `Service Fabric Service` категории:</span><span class="sxs-lookup"><span data-stu-id="cd848-128">hello following is an example of a counter instance name for a counter that belongs toohello `Service Fabric Service` category:</span></span>

`2740af29-78aa-44bc-a20b-7e60fb783264_635650083799324046_5008379932`

<span data-ttu-id="cd848-129">В предыдущих примере hello `2740af29-78aa-44bc-a20b-7e60fb783264` — hello строковое представление идентификатора секции Service Fabric hello, `635650083799324046` является строковым представлением реплики/InstanceId и `5008379932` — hello 64-разрядных идентификатор, который создается для внутренней hello среды выполнения используете.</span><span class="sxs-lookup"><span data-stu-id="cd848-129">In hello preceding example, `2740af29-78aa-44bc-a20b-7e60fb783264` is hello string representation of hello Service Fabric partition ID, `635650083799324046` is string representation of Replica/InstanceId and `5008379932` is hello 64-bit ID that is generated for hello runtime's internal use.</span></span>

#### <a name="service-fabric-service-method-category"></a><span data-ttu-id="cd848-130">Категория Service Fabric Service Method</span><span class="sxs-lookup"><span data-stu-id="cd848-130">Service Fabric Service Method category</span></span>
<span data-ttu-id="cd848-131">Для категории hello `Service Fabric Service Method`, имена экземпляров счетчиков hello находятся в hello следующий формат:</span><span class="sxs-lookup"><span data-stu-id="cd848-131">For hello category `Service Fabric Service Method`, hello counter instance names are in hello following format:</span></span>

`MethodName_ServiceRuntimeMethodId_ServiceFabricPartitionID_ServiceReplicaOrInstanceId_ServiceRuntimeInternalID`

<span data-ttu-id="cd848-132">*Имя_метода* имя hello метод службы hello, hello экземпляр счетчика производительности, связан с.</span><span class="sxs-lookup"><span data-stu-id="cd848-132">*MethodName* is hello name of hello service method that hello performance counter instance is associated with.</span></span> <span data-ttu-id="cd848-133">Формат Hello hello имя метода определяется на основе некоторых логики в среде выполнения Fabric Service hello, распределяет удобочитаемость hello именем hello и ограничения на максимальную длину hello имена экземпляров счетчиков производительности hello в Windows.</span><span class="sxs-lookup"><span data-stu-id="cd848-133">hello format of hello method name is determined based on some logic in hello Fabric Service runtime that balances hello readability of hello name with constraints on hello maximum length of hello performance counter instance names on Windows.</span></span>

<span data-ttu-id="cd848-134">*ServiceRuntimeMethodId* — hello строковое представление 32-разрядное целое число, которое создается средой выполнения Fabric Service hello для внутреннего использования.</span><span class="sxs-lookup"><span data-stu-id="cd848-134">*ServiceRuntimeMethodId* is hello string representation of a 32-bit integer that is generated by hello Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="cd848-135">Это включается в экземпляр счетчика производительности hello его уникальность имени tooensure и избежать конфликтов с другими имена экземпляров счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-135">This is included in hello performance counter instance name tooensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="cd848-136">Пользователи не пытайтесь выполнить toointerpret эту часть имени экземпляра счетчика производительности hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-136">Users should not try toointerpret this portion of hello performance counter instance name.</span></span>

<span data-ttu-id="cd848-137">*ServiceFabricPartitionID* является строковым представлением hello hello сопоставлен идентификатор секции Service Fabric, hello экземпляр счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-137">*ServiceFabricPartitionID* is hello string representation of hello Service Fabric partition ID that hello performance counter instance is associated with.</span></span> <span data-ttu-id="cd848-138">Идентификатор секции Hello является идентификатором GUID, и его строковое представление создается с помощью hello [ `Guid.ToString` ](https://msdn.microsoft.com/library/97af8hh4.aspx) метод с описатель формата «D».</span><span class="sxs-lookup"><span data-stu-id="cd848-138">hello partition ID is a GUID, and its string representation is generated through hello [`Guid.ToString`](https://msdn.microsoft.com/library/97af8hh4.aspx) method with format specifier "D".</span></span>

<span data-ttu-id="cd848-139">*ServiceReplicaOrInstanceId* является строковым представлением hello код реплику или экземпляр структуры службы, hello экземпляр счетчика производительности, связанные с hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-139">*ServiceReplicaOrInstanceId* is hello string representation of hello Service Fabric Replica/Instance ID that hello performance counter instance is associated with.</span></span>

<span data-ttu-id="cd848-140">*ServiceRuntimeInternalID* — hello строковое представление 64-разрядного целого числа, создаваемый средой выполнения Fabric Service hello для внутреннего использования.</span><span class="sxs-lookup"><span data-stu-id="cd848-140">*ServiceRuntimeInternalID* is hello string representation of a 64-bit integer that is generated by hello Fabric Service runtime for its internal use.</span></span> <span data-ttu-id="cd848-141">Это включается в экземпляр счетчика производительности hello его уникальность имени tooensure и избежать конфликтов с другими имена экземпляров счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-141">This is included in hello performance counter instance name tooensure its uniqueness and avoid conflict with other performance counter instance names.</span></span> <span data-ttu-id="cd848-142">Пользователи не пытайтесь выполнить toointerpret эту часть имени экземпляра счетчика производительности hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-142">Users should not try toointerpret this portion of hello performance counter instance name.</span></span>

<span data-ttu-id="cd848-143">Hello ниже приведен пример имя экземпляра счетчика для счетчика, который принадлежит toohello `Service Fabric Service Method` категории:</span><span class="sxs-lookup"><span data-stu-id="cd848-143">hello following is an example of a counter instance name for a counter that belongs toohello `Service Fabric Service Method` category:</span></span>

`ivoicemailboxservice.leavemessageasync_2_89383d32-e57e-4a9b-a6ad-57c6792aa521_635650083804480486_5008380`

<span data-ttu-id="cd848-144">В предшествующих примере hello `ivoicemailboxservice.leavemessageasync` — имя метода hello, `2` — использовать 32-разрядных идентификатор, созданный для внутренней hello среды выполнения, hello `89383d32-e57e-4a9b-a6ad-57c6792aa521` — hello строковое представление идентификатора секции Service Fabric hello,`635650083804480486` является строка hello представление hello идентификатор реплику или экземпляр структуры службы и `5008380` — использовать идентификатор hello 64-разрядной, созданный для внутренней hello среды выполнения.</span><span class="sxs-lookup"><span data-stu-id="cd848-144">In hello preceding example, `ivoicemailboxservice.leavemessageasync` is hello method name, `2` is hello 32-bit ID generated for hello runtime's internal use, `89383d32-e57e-4a9b-a6ad-57c6792aa521` is hello string representation of hello Service Fabric partition ID,`635650083804480486` is hello string representation of hello Service Fabric Replica/Instance ID and `5008380` is hello 64-bit ID generated for hello runtime's internal use.</span></span>

## <a name="list-of-performance-counters"></a><span data-ttu-id="cd848-145">Список счетчиков производительности</span><span class="sxs-lookup"><span data-stu-id="cd848-145">List of Performance counters</span></span>
### <a name="service-method-performance-counters"></a><span data-ttu-id="cd848-146">Счетчики производительности метода службы</span><span class="sxs-lookup"><span data-stu-id="cd848-146">Service method performance counters</span></span>

<span data-ttu-id="cd848-147">Надежные службы среды выполнения Hello публикует hello следующих выполнение связанных toohello счетчики производительности службы методов.</span><span class="sxs-lookup"><span data-stu-id="cd848-147">hello Reliable Service runtime publishes hello following performance counters related toohello execution of service methods.</span></span>

| <span data-ttu-id="cd848-148">Имя категории</span><span class="sxs-lookup"><span data-stu-id="cd848-148">Category name</span></span> | <span data-ttu-id="cd848-149">Имя счетчика</span><span class="sxs-lookup"><span data-stu-id="cd848-149">Counter name</span></span> | <span data-ttu-id="cd848-150">Описание</span><span class="sxs-lookup"><span data-stu-id="cd848-150">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="cd848-151">Service Fabric Service Method</span><span class="sxs-lookup"><span data-stu-id="cd848-151">Service Fabric Service Method</span></span> |<span data-ttu-id="cd848-152">Вызовов в секунду</span><span class="sxs-lookup"><span data-stu-id="cd848-152">Invocations/Sec</span></span> |<span data-ttu-id="cd848-153">Количество попыток вызова метода службы hello в секунду</span><span class="sxs-lookup"><span data-stu-id="cd848-153">Number of times that hello  service method is invoked per second</span></span> |
| <span data-ttu-id="cd848-154">Service Fabric Service Method</span><span class="sxs-lookup"><span data-stu-id="cd848-154">Service Fabric Service Method</span></span> |<span data-ttu-id="cd848-155">Среднее время вызова (мс)</span><span class="sxs-lookup"><span data-stu-id="cd848-155">Average milliseconds per invocation</span></span> |<span data-ttu-id="cd848-156">Время метод службы tooexecute hello в миллисекундах</span><span class="sxs-lookup"><span data-stu-id="cd848-156">Time taken tooexecute hello service method in milliseconds</span></span> |
| <span data-ttu-id="cd848-157">Service Fabric Service Method</span><span class="sxs-lookup"><span data-stu-id="cd848-157">Service Fabric Service Method</span></span> |<span data-ttu-id="cd848-158">Исключений в секунду</span><span class="sxs-lookup"><span data-stu-id="cd848-158">Exceptions thrown/Sec</span></span> |<span data-ttu-id="cd848-159">Количество попыток hello метода службы произошло исключение в секунду</span><span class="sxs-lookup"><span data-stu-id="cd848-159">Number of times that hello service method threw an exception per second</span></span> |

### <a name="service-request-processing-performance-counters"></a><span data-ttu-id="cd848-160">Счетчики производительности обработки запросов службы</span><span class="sxs-lookup"><span data-stu-id="cd848-160">Service request processing performance counters</span></span>
<span data-ttu-id="cd848-161">Когда клиент вызывает метод через прокси-объект службы, в результате сообщение-запрос, отправляемых через службу удаленного взаимодействия toohello сети hello.</span><span class="sxs-lookup"><span data-stu-id="cd848-161">When a client invokes a method via a service proxy object, it results in a request message being sent over hello network toohello remoting service.</span></span> <span data-ttu-id="cd848-162">Служба Hello обрабатывает сообщение hello запрос и отправляет ответ назад toohello клиента.</span><span class="sxs-lookup"><span data-stu-id="cd848-162">hello service processes hello request message and sends a response back toohello client.</span></span> <span data-ttu-id="cd848-163">Среда выполнения надежного ServiceRemoting Hello публикует hello после обработки запроса tooservice связанных счетчиков производительности.</span><span class="sxs-lookup"><span data-stu-id="cd848-163">hello Reliable ServiceRemoting runtime publishes hello following performance counters related tooservice request processing.</span></span>

| <span data-ttu-id="cd848-164">Имя категории</span><span class="sxs-lookup"><span data-stu-id="cd848-164">Category name</span></span> | <span data-ttu-id="cd848-165">Имя счетчика</span><span class="sxs-lookup"><span data-stu-id="cd848-165">Counter name</span></span> | <span data-ttu-id="cd848-166">Описание</span><span class="sxs-lookup"><span data-stu-id="cd848-166">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="cd848-167">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="cd848-167">Service Fabric Service</span></span> |<span data-ttu-id="cd848-168">Число невыполненных запросов</span><span class="sxs-lookup"><span data-stu-id="cd848-168"># of outstanding requests</span></span> |<span data-ttu-id="cd848-169">Количество запросов, выполняемых в службе hello</span><span class="sxs-lookup"><span data-stu-id="cd848-169">Number of requests being processed in hello service</span></span> |
| <span data-ttu-id="cd848-170">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="cd848-170">Service Fabric Service</span></span> |<span data-ttu-id="cd848-171">Среднее время запроса (мс)</span><span class="sxs-lookup"><span data-stu-id="cd848-171">Average milliseconds per request</span></span> |<span data-ttu-id="cd848-172">Время выполнения (в миллисекундах) tooprocess службы hello запрос</span><span class="sxs-lookup"><span data-stu-id="cd848-172">Time taken (in milliseconds) by hello service tooprocess a request</span></span> |
| <span data-ttu-id="cd848-173">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="cd848-173">Service Fabric Service</span></span> |<span data-ttu-id="cd848-174">Среднее время десериализации запроса (мс)</span><span class="sxs-lookup"><span data-stu-id="cd848-174">Average milliseconds for request deserialization</span></span> |<span data-ttu-id="cd848-175">Сообщение запроса сделанной (в миллисекундах) toodeserialize службы времени при получении hello службы</span><span class="sxs-lookup"><span data-stu-id="cd848-175">Time taken (in milliseconds) toodeserialize service request message when it is received at hello service</span></span> |
| <span data-ttu-id="cd848-176">Service Fabric Service</span><span class="sxs-lookup"><span data-stu-id="cd848-176">Service Fabric Service</span></span> |<span data-ttu-id="cd848-177">Среднее время сериализации ответа (мс)</span><span class="sxs-lookup"><span data-stu-id="cd848-177">Average milliseconds for response serialization</span></span> |<span data-ttu-id="cd848-178">Время сделанной (в миллисекундах) tooserialize hello ответное сообщение hello служба перед отправкой ответа hello toohello клиента</span><span class="sxs-lookup"><span data-stu-id="cd848-178">Time taken (in milliseconds) tooserialize hello service response message at hello service before hello response is sent toohello client</span></span> |

## <a name="next-steps"></a><span data-ttu-id="cd848-179">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="cd848-179">Next steps</span></span>
* [<span data-ttu-id="cd848-180">Пример кода</span><span class="sxs-lookup"><span data-stu-id="cd848-180">Sample code</span></span>](https://github.com/Azure/servicefabric-samples)
* [<span data-ttu-id="cd848-181">Поставщики EventSource в PerfView</span><span class="sxs-lookup"><span data-stu-id="cd848-181">EventSource providers in PerfView</span></span>](https://blogs.msdn.microsoft.com/vancem/2012/07/09/introduction-tutorial-logging-etw-events-in-c-system-diagnostics-tracing-eventsource/)
