---
title: "aaaSecure кластера Service Fabric | Документы Microsoft"
description: "Описание сценариев безопасности hello Service Fabric кластера и hello различные технологии, используемые tooimplement этих сценариев."
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: 26b58724-6a43-4f20-b965-2da3f086cf8a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/28/2017
ms.author: chackdan
ms.openlocfilehash: 249a9e85b8fbe174e2accee85a94d95b2872a3af
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-cluster-security-scenarios"></a>Сценарии защиты кластера Service Fabric
Кластер Service Fabric — это ресурс, владельцем которого являетесь вы. Кластеры должны быть защищенным tooprevent несанкционированный пользователями подключение кластера tooyour, особенно в том случае, если он имеет рабочих нагрузок, запущенными на нем. Хотя это возможно toocreate небезопасные кластера, это позволит tooit tooconnect анонимных пользователей, если он предоставляет toohello конечные точки управления общедоступный Интернет. 

В этой статье содержится обзор hello сценариев обеспечения безопасности для кластеров под управлением Azure или на отдельном и hello tooimplement различные технологии, используемые в этих сценариях. Ниже перечислены сценарии безопасности кластера Hello.

* безопасность обмена данными между узлами;
* безопасность обмена данными между клиентами и узлами;
* Управление доступом на основе ролей (RBAC)

## <a name="node-to-node-security"></a>безопасность обмена данными между узлами;
Обеспечивает безопасность взаимодействия между hello виртуальных машин или машин в кластере hello. Это гарантирует, что только авторизованные toojoin hello кластера компьютерах могут участвовать в размещения приложений и служб в кластере hello.

![Схема обмена данными между узлами][Node-to-Node]

Кластеры, работающие в Azure, или автономные кластеры, работающие под управлением Windows, могут использовать [безопасность на основе сертификатов](https://msdn.microsoft.com/library/ff649801.aspx) или [безопасность Windows](https://msdn.microsoft.com/library/ff649396.aspx) для компьютеров Windows Server.

### <a name="node-to-node-certificate-security"></a>Безопасность обмена данными между узлами на основе сертификатов
Service Fabric используются сертификаты X.509 сервера, которые указываются как часть конфигурации hello тип узла, при создании кластера. В конце hello в этой статье предоставляется краткий обзор этих сертификатов, и как можно получить или создать их.

При создании кластера hello, или через портал Azure hello, шаблоны Azure Resource Manager или шаблон JSON автономный настройки параметров безопасности сертификата. Вы можете указать основной сертификат и необязательный дополнительный сертификат, который будет использоваться для смены сертификатов. Hello первичные и вторичные сертификаты указываются должна отличаться от клиента администрирования hello и сертификаты клиента только для чтения, укажите для [безопасности узла клиента](#client-to-node-security).

Для чтения, Azure [настроить кластер с помощью шаблона Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) toolearn как tooconfigure сертификат безопасности в кластере.

Сведения для автономного кластера Windows Server см. в статье [Защита автономного кластера под управлением Windows с помощью сертификатов X.509](service-fabric-windows-cluster-x509-security.md).

### <a name="node-to-node-windows-security"></a>Безопасность обмена данными между узлами Windows
Сведения для автономного кластера Windows Server см. в статье [Защита автономного кластера под управлением Windows с помощью системы безопасности Windows](service-fabric-windows-cluster-windows-security.md).

## <a name="client-to-node-security"></a>безопасность обмена данными между клиентами и узлами;
Проверяет подлинность клиентов, а также обеспечивает защиту обмена данными между клиентом и отдельные узлы в кластере hello. Этот тип безопасности проверяет подлинность и защищает связи клиента, который обеспечивает доступность только авторизованные пользователи кластера hello и hello приложений, развернутых на кластере hello. Клиенты однозначно определяются с помощью своих учетных данных системы безопасности Windows или учетных данных сертификата безопасности.

![Схема обмена данными между узлом и клиентом][Client-to-Node]

Кластеры, работающие в Azure, или автономные кластеры, работающие под управлением Windows, могут использовать [безопасность на основе сертификатов](https://msdn.microsoft.com/library/ff649801.aspx) или [безопасность Windows](https://msdn.microsoft.com/library/ff649396.aspx).

### <a name="client-to-node-certificate-security"></a>Безопасность обмена данными между клиентами и узлами на основе сертификатов
 При создании кластера hello либо с помощью портала Azure hello, шаблоны диспетчера ресурсов или автономного шаблона JSON, указав сертификат клиента администратора и/или сертификат клиента пользователя настроена защита с помощью сертификата клиента для узла.  Hello клиента и пользователя сертификаты клиента администратора указать должна отличаться от основной hello и вторичные сертификаты, укажите для [безопасности узла на узел](#node-to-node-security) рекомендуется. По умолчанию hello кластера сертификаты для безопасности узла на узел добавляются toohello допускается списке Admin сертификаты клиента.

Клиенты, подключающиеся с использованием сертификата hello администратора кластера toohello имеют полный доступ toomanagement возможности.  Клиенты, подключающиеся toohello кластера, с помощью сертификата клиента hello пользователя только для чтения имеют только возможности toomanagement доступ для чтения. Другими словами, эти сертификаты используются для hello роли баз ролей (RBAC) описано далее в этой статье.

Для чтения, Azure [настроить кластер с помощью шаблона Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) toolearn как tooconfigure сертификат безопасности в кластере.

Сведения для автономного кластера Windows Server см. в статье [Защита автономного кластера под управлением Windows с помощью сертификатов X.509](service-fabric-windows-cluster-x509-security.md).

### <a name="client-to-node-azure-active-directory-aad-security-on-azure"></a>Безопасность обмена данными между клиентами и узлами Azure Active Directory в Azure
Кластеров под управлением Azure для защиты доступа к toohello конечные точки управления с помощью Azure Active Directory (AAD). . В разделе [настроить кластер с помощью шаблона Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) сведения о как toocreate hello необходимые артефакты AAD как toopopulate их во время кластера Создание и как tooconnect toothose кластеры позже.

## <a name="security-recommendations"></a>Рекомендации по обеспечению безопасности
Кластеры Azure рекомендуется использовать клиенты tooauthenticate AAD безопасности и сертификаты для безопасности узла на узел.

Если в рамках автономных кластеров Windows Server используется Windows Server 2012 R2 и Active Directory, рекомендуется применять безопасность Windows с учетными записями, управляемыми группой. В противном случае используйте безопасность Windows с учетными записями Windows.

## <a name="role-based-access-control-rbac"></a>управление доступом на основе ролей (RBAC).
Контроль доступа позволяет hello кластера администратора toolimit доступа toocertain кластера операции для разных групп пользователей, повышение безопасности кластера hello. Для клиентов, подключающихся tooa кластера поддерживаются два типа элемента управления различный уровень доступа: роль администратора и роль пользователя.

Администраторы имеют полный доступ toomanagement возможности (включая возможности чтения и записи). Пользователи, по умолчанию имеют только доступ на чтение toomanagement возможности (например, возможности работы с запросами), hello возможность tooresolve, приложений и служб.

Можно указать hello администратора и пользователя клиента роли во время создания кластера hello, предоставляя удостоверения (сертификаты, AAD и т.д.) для каждого. Дополнительные сведения о параметры управления доступом по умолчанию hello и как toochange hello параметры по умолчанию см. в разделе [управления доступом на основе ролей для клиентов Service Fabric](service-fabric-cluster-security-roles.md).

## <a name="x509-certificates-and-service-fabric"></a>Сертификаты X.509 и Service Fabric
Цифровые сертификаты X.509 являются tooauthenticate часто используемые клиентами и серверами и tooencrypt и цифрового подписывания сообщений. Дополнительные сведения о таких сертификатов перейдите слишком[работа с сертификатами](http://msdn.microsoft.com/library/ms731899.aspx).

Некоторые важные моменты, о tooconsider:

* Сертификаты, которые используются в кластерах, выполняющих рабочие нагрузки в рабочей среде, следует создать с помощью правильно настроенной службы сертификации Windows Server или получить из утвержденного [центра сертификации](https://en.wikipedia.org/wiki/Certificate_authority).
* Никогда не используйте в рабочей среде какие-либо временные или тестовые сертификаты, созданные с помощью таких инструментов, как MakeCert.exe.
* Можно использовать самозаверяющий сертификат, но это следует делать только для тестовых кластеров, а не в рабочей среде.

### <a name="server-x509-certificates"></a>Сертификаты X.509
Сертификаты сервера имеют hello основная задача проверки подлинности tooclients сервер (узел) или проверки подлинности сервера (узла) tooa сервер (узел). Один из исходных проверок hello, когда клиент или узел выполняет проверку подлинности узла является значением hello toocheck hello общее имя в поле темы hello. Это общее имя или один из сертификатов hello альтернативные имена субъекта должно присутствовать в списке hello разрешенных общих имен.

Hello следующей статье описывается, как toogenerate сертификаты с альтернативными именами субъектов (SAN): [как tooadd tooa альтернативное имя субъекта защиты сертификата LDAP](http://support.microsoft.com/kb/931351).

поле темы Hello может содержать несколько значений, каждый префикс с типом значения инициализации tooindicate hello. Чаще всего hello инициализации — «CN» для общего имени; Например «CN = www.contoso.com». Можно также для hello toobe поле темы пустым. Если заполнен hello необязательное поле альтернативного имени субъекта, она должна содержать hello общее имя сертификата hello и одна запись на альтернативное имя субъекта. Эти имена вводятся как значения DNS-имени.

значение Hello поле назначения hello hello сертификата должно включать соответствующее значение, например «Server Authentication» или «Проверка подлинности клиента».

### <a name="client-x509-certificates"></a>Сертификаты X.509 клиентов
Как правило, сертификаты клиентов не выдаются сторонними центрами сертификации. Вместо этого hello личном хранилище текущего пользователя hello обычно содержит клиентские сертификаты, выданные корневым центром, с назначением «Проверка подлинности клиента». Hello клиент может использовать такой сертификат, когда требуется взаимная проверка подлинности.

> [!NOTE]
> Для выполнения всех операций управления в кластере Service Fabric необходимы сертификаты серверов. Для управления нельзя использовать сертификаты клиента.
> 
> 

<!--Every topic should have next steps and links toohello next logical set of content tookeep hello customer engaged-->


## <a name="next-steps"></a>Дальнейшие действия
В этой статье содержатся общие сведения о безопасности кластера. Теперь вы можете создать в Azure кластер Service Fabric, используя


1.  [шаблон Azure Resource Manager](service-fabric-cluster-creation-via-arm.md) или 
2.  [портал Azure](service-fabric-cluster-creation-via-portal.md).

<!--Image references-->
[Node-to-Node]: ./media/service-fabric-cluster-security/node-to-node.png
[Client-to-Node]: ./media/service-fabric-cluster-security/client-to-node.png
