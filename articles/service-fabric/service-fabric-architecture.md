---
title: "aaaArchitecture из Azure Service Fabric | Документы Microsoft"
description: "Service Fabric — это платформа распределенных систем используемых toobuild масштабируемые и надежные и легко управляемых приложений для облака hello. В этой статье показана архитектура hello Service Fabric."
services: service-fabric
documentationcenter: .net
author: rishirsinha
manager: timlt
editor: rishirsinha
ms.assetid: 6b554243-70cb-4c22-9b28-1a8b4703f45e
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/19/2017
ms.author: rsinha
ms.openlocfilehash: 0268578094ad1a0010ef44ed940f828b985f6c40
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-architecture"></a><span data-ttu-id="e676e-104">Архитектура Service Fabric</span><span class="sxs-lookup"><span data-stu-id="e676e-104">Service Fabric architecture</span></span>
<span data-ttu-id="e676e-105">Service Fabric имеет многоуровневые подсистемы.</span><span class="sxs-lookup"><span data-stu-id="e676e-105">Service Fabric is built with layered subsystems.</span></span> <span data-ttu-id="e676e-106">Эти подсистемы включить toowrite приложения, которые являются:</span><span class="sxs-lookup"><span data-stu-id="e676e-106">These subsystems enable you toowrite applications that are:</span></span>

* <span data-ttu-id="e676e-107">высокая доступность,</span><span class="sxs-lookup"><span data-stu-id="e676e-107">Highly available</span></span>
* <span data-ttu-id="e676e-108">масштабируемость,</span><span class="sxs-lookup"><span data-stu-id="e676e-108">Scalable</span></span>
* <span data-ttu-id="e676e-109">управляемость,</span><span class="sxs-lookup"><span data-stu-id="e676e-109">Manageable</span></span>
* <span data-ttu-id="e676e-110">тестируемость.</span><span class="sxs-lookup"><span data-stu-id="e676e-110">Testable</span></span>

<span data-ttu-id="e676e-111">Привет, следующая диаграмма показывает hello подсистем Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="e676e-111">hello following diagram shows hello major subsystems of Service Fabric.</span></span>

![Схема архитектуры Service Fabric](media/service-fabric-architecture/service-fabric-architecture.png)

<span data-ttu-id="e676e-113">В распределенной системе toosecurely hello возможность обмена данными между узлами в кластере критически важна.</span><span class="sxs-lookup"><span data-stu-id="e676e-113">In a distributed system, hello ability toosecurely communicate between nodes in a cluster is crucial.</span></span> <span data-ttu-id="e676e-114">Hello базы hello стека является hello транспорта подсистемы, которая предоставляет безопасное соединение между узлами.</span><span class="sxs-lookup"><span data-stu-id="e676e-114">At hello base of hello stack is hello transport subsystem, which provides secure communication between nodes.</span></span> <span data-ttu-id="e676e-115">Выше транспорта hello подсистемы находится в подсистеме федерации hello, какие кластеры hello разных узлах в единый объект (с именем кластеров), чтобы Service Fabric обнаружения сбоев, выполнять руководитель выборы и предоставление согласованного маршрутизации.</span><span class="sxs-lookup"><span data-stu-id="e676e-115">Above hello transport subsystem lies hello federation subsystem, which clusters hello different nodes into a single entity (named clusters) so that Service Fabric can detect failures, perform leader election, and provide consistent routing.</span></span> <span data-ttu-id="e676e-116">Hello надежность, уровень над подсистемы федерации hello, отвечает за hello надежности служб Service Fabric через механизмы, такие как репликация, управление ресурсами и перехода на другой ресурс.</span><span class="sxs-lookup"><span data-stu-id="e676e-116">hello reliability subsystem, layered on top of hello federation subsystem, is responsible for hello reliability of Service Fabric services through mechanisms such as replication, resource management, and failover.</span></span> <span data-ttu-id="e676e-117">Подсистема Hello федерации также лежащей в основе подсистемы hello размещение и активация, которая управляет hello жизненного цикла приложения на одном узле.</span><span class="sxs-lookup"><span data-stu-id="e676e-117">hello federation subsystem also underlies hello hosting and activation subsystem, which manages hello lifecycle of an application on a single node.</span></span> <span data-ttu-id="e676e-118">Подсистема управления Hello управляет hello жизненного цикла приложений и служб.</span><span class="sxs-lookup"><span data-stu-id="e676e-118">hello management subsystem manages hello lifecycle of applications and services.</span></span> <span data-ttu-id="e676e-119">Hello пригодности для тестирования подсистемы помогает разработчикам приложений тестирования служб через имитация ошибки до и после развертывания среды tooproduction приложений и служб.</span><span class="sxs-lookup"><span data-stu-id="e676e-119">hello testability subsystem helps application developers test their services through simulated faults before and after deploying applications and services tooproduction environments.</span></span> <span data-ttu-id="e676e-120">Service Fabric предоставляет возможность hello tooresolve расположения служб через его подсистемы связи.</span><span class="sxs-lookup"><span data-stu-id="e676e-120">Service Fabric provides hello ability tooresolve service locations through its communication subsystem.</span></span> <span data-ttu-id="e676e-121">Здравствуйте, предоставляемый toodevelopers состоят из уровней на основе этих подсистем вместе с инструментарием tooenable модели приложения hello моделей программирования приложений.</span><span class="sxs-lookup"><span data-stu-id="e676e-121">hello application programming models exposed toodevelopers are layered on top of these subsystems along with hello application model tooenable tooling.</span></span>

## <a name="transport-subsystem"></a><span data-ttu-id="e676e-122">Транспортная подсистема</span><span class="sxs-lookup"><span data-stu-id="e676e-122">Transport subsystem</span></span>
<span data-ttu-id="e676e-123">Подсистема транспорта Hello реализует канал связи между узлами датаграммы.</span><span class="sxs-lookup"><span data-stu-id="e676e-123">hello transport subsystem implements a point-to-point datagram communication channel.</span></span> <span data-ttu-id="e676e-124">Этот канал используется для взаимодействия между кластерами структуры службы и связи между кластера service fabric hello и клиентами.</span><span class="sxs-lookup"><span data-stu-id="e676e-124">This channel is used for communication within service fabric clusters and communication between hello service fabric cluster and clients.</span></span> <span data-ttu-id="e676e-125">Он поддерживает односторонние и шаблоны взаимодействия запрос ответ, которых предоставляет hello основы для реализации широковещательной и многоадресной рассылки в hello уровня федерации.</span><span class="sxs-lookup"><span data-stu-id="e676e-125">It supports one-way and request-reply communication patterns, which provides hello basis for implementing broadcast and multicast in hello Federation layer.</span></span> <span data-ttu-id="e676e-126">Подсистема Hello транспорта защищает обмен данными с помощью X509 сертификаты или безопасности Windows.</span><span class="sxs-lookup"><span data-stu-id="e676e-126">hello transport subsystem secures communication by using X509 certificates or Windows security.</span></span> <span data-ttu-id="e676e-127">Этой подсистемы используется внутри структуры службы и не доступны непосредственно toodevelopers для программирования приложений.</span><span class="sxs-lookup"><span data-stu-id="e676e-127">This subsystem is used internally by Service Fabric and is not directly accessible toodevelopers for application programming.</span></span>

## <a name="federation-subsystem"></a><span data-ttu-id="e676e-128">Подсистема федерации</span><span class="sxs-lookup"><span data-stu-id="e676e-128">Federation subsystem</span></span>
<span data-ttu-id="e676e-129">В порядке tooreason о набора узлов в распределенной системе необходимо toohave согласованное представление системы hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-129">In order tooreason about a set of nodes in a distributed system, you need toohave a consistent view of hello system.</span></span> <span data-ttu-id="e676e-130">примитивы связи hello, предоставляемые подсистеме hello транспорта используется подсистемой федерации Hello и stitches hello различных узлов в один кластер единой, можно обсуждения.</span><span class="sxs-lookup"><span data-stu-id="e676e-130">hello federation subsystem uses hello communication primitives provided by hello transport subsystem and stitches hello various nodes into a single unified cluster that it can reason about.</span></span> <span data-ttu-id="e676e-131">Он предоставляет примитивы hello распределенных систем необходимости, другие подсистемы - выявление отказов, руководитель выборов и согласованное маршрутизации hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-131">It provides hello distributed systems primitives needed by hello other subsystems - failure detection, leader election, and consistent routing.</span></span> <span data-ttu-id="e676e-132">Подсистема федерации Hello построено на основе распределенных хэш-таблицы с пробелом маркера 128-разрядный.</span><span class="sxs-lookup"><span data-stu-id="e676e-132">hello federation subsystem is built on top of distributed hash tables with a 128-bit token space.</span></span> <span data-ttu-id="e676e-133">Подсистема Hello создает кольцевая топология по узлам hello, с каждым узлом в кольцо hello подмножество hello маркера пространство выделяется для владельца.</span><span class="sxs-lookup"><span data-stu-id="e676e-133">hello subsystem creates a ring topology over hello nodes, with each node in hello ring being allocated a subset of hello token space for ownership.</span></span> <span data-ttu-id="e676e-134">Для обнаружения сбоя hello уровень использует механизм аренды на основе подавать победить и разрешения конфликтов.</span><span class="sxs-lookup"><span data-stu-id="e676e-134">For failure detection, hello layer uses a leasing mechanism based on heart beating and arbitration.</span></span> <span data-ttu-id="e676e-135">Подсистема Hello федерации также гарантирует через сложного соединения и отправления протоколов, существует только один владелец маркера в любое время.</span><span class="sxs-lookup"><span data-stu-id="e676e-135">hello federation subsystem also guarantees through intricate join and departure protocols that only a single owner of a token exists at any time.</span></span> <span data-ttu-id="e676e-136">Это позволяет выбирать лидера и обеспечивать согласованную маршрутизацию.</span><span class="sxs-lookup"><span data-stu-id="e676e-136">This provides leader election and consistent routing guarantees.</span></span>

## <a name="reliability-subsystem"></a><span data-ttu-id="e676e-137">Подсистема надежности</span><span class="sxs-lookup"><span data-stu-id="e676e-137">Reliability subsystem</span></span>
<span data-ttu-id="e676e-138">Hello надежность подсистема предоставляет hello toomake механизм hello состояния службы Service Fabric высокой надежности с помощью hello hello *Replicator*, *Диспетчер отказоустойчивости*, и  *Балансировщик ресурсов*.</span><span class="sxs-lookup"><span data-stu-id="e676e-138">hello reliability subsystem provides hello mechanism toomake hello state of a Service Fabric service highly available through hello use of hello *Replicator*, *Failover Manager*, and *Resource Balancer*.</span></span>

* <span data-ttu-id="e676e-139">Hello Replicator гарантирует, что изменения состояния в реплике hello основная служба будет автоматически реплицированных toosecondary реплик, поддержания согласованности между hello первичной и вторичной репликами в наборе реплик службы.</span><span class="sxs-lookup"><span data-stu-id="e676e-139">hello Replicator ensures that state changes in hello primary service replica will automatically be replicated toosecondary replicas, maintaining consistency between hello primary and secondary replicas in a service replica set.</span></span> <span data-ttu-id="e676e-140">Hello replicator отвечает за управление кворумом реплик hello в наборе реплик hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-140">hello replicator is responsible for quorum management among hello replicas in hello replica set.</span></span> <span data-ttu-id="e676e-141">Он взаимодействует с hello отработки отказа единицы tooget hello список операций tooreplicate и агент перенастройки hello предоставляет ему hello конфигурации набора репликации hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-141">It interacts with hello failover unit tooget hello list of operations tooreplicate, and hello reconfiguration agent provides it with hello configuration of hello replica set.</span></span> <span data-ttu-id="e676e-142">Эта конфигурация указывает, операции hello реплик, которые должны toobe репликации.</span><span class="sxs-lookup"><span data-stu-id="e676e-142">That configuration indicates which replicas hello operations need toobe replicated.</span></span> <span data-ttu-id="e676e-143">Service Fabric предоставляет репликации по умолчанию, именем структуры репликации, который может использоваться hello программирования модели API toomake hello состояния службы высокой доступности и надежности.</span><span class="sxs-lookup"><span data-stu-id="e676e-143">Service Fabric provides a default replicator called Fabric Replicator, which can be used by hello programming model API toomake hello service state highly available and reliable.</span></span>
* <span data-ttu-id="e676e-144">Hello Диспетчер отказоустойчивости гарантирует, что при добавлении узлов tooor удален из кластера hello, hello нагрузка автоматически перераспределяется между hello доступные узлы.</span><span class="sxs-lookup"><span data-stu-id="e676e-144">hello Failover Manager ensures that when nodes are added tooor removed from hello cluster, hello load is automatically redistributed across hello available nodes.</span></span> <span data-ttu-id="e676e-145">При сбое узла в кластере hello, hello кластера автоматически перенастраивает доступность toomaintain реплик службы hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-145">If a node in hello cluster fails, hello cluster will automatically reconfigure hello service replicas toomaintain availability.</span></span>
* <span data-ttu-id="e676e-146">Hello диспетчера ресурсов размещает реплик службы на всех компьютерах домена сбоя в кластере hello и гарантирует, что работают все единиц отработки отказа.</span><span class="sxs-lookup"><span data-stu-id="e676e-146">hello Resource Manager places service replicas across failure domain in hello cluster and ensures that all failover units are operational.</span></span> <span data-ttu-id="e676e-147">Hello диспетчера ресурсов также распределяет ресурсы службы между hello базовый общий пул распространения оптимальной универсальный нагрузки tooachieve узлов кластера.</span><span class="sxs-lookup"><span data-stu-id="e676e-147">hello Resource Manager also balances service resources across hello underlying shared pool of cluster nodes tooachieve optimal uniform load distribution.</span></span>

## <a name="management-subsystem"></a><span data-ttu-id="e676e-148">Подсистема управления</span><span class="sxs-lookup"><span data-stu-id="e676e-148">Management subsystem</span></span>
<span data-ttu-id="e676e-149">Подсистема управления Hello предоставляет служба начала до конца и управление жизненным циклом приложений.</span><span class="sxs-lookup"><span data-stu-id="e676e-149">hello management subsystem provides end-to-end service and application lifecycle management.</span></span> <span data-ttu-id="e676e-150">Командлеты PowerShell и API администратора позволяют tooprovision, развертывании, исправления, обновления и отменять подготовки приложений без потери доступности.</span><span class="sxs-lookup"><span data-stu-id="e676e-150">PowerShell cmdlets and administrative APIs enable you tooprovision, deploy, patch, upgrade, and de-provision applications without loss of availability.</span></span> <span data-ttu-id="e676e-151">Подсистема управления Hello выполняет это через hello следующие службы.</span><span class="sxs-lookup"><span data-stu-id="e676e-151">hello management subsystem performs this through hello following services.</span></span>

* <span data-ttu-id="e676e-152">**Диспетчер кластеров**: это hello основная служба, которая взаимодействует с hello Диспетчер отказоустойчивости от надежности tooplace hello приложений на hello узлов на основании hello ограничения размещения службы.</span><span class="sxs-lookup"><span data-stu-id="e676e-152">**Cluster Manager**: This is hello primary service that interacts with hello Failover Manager from reliability tooplace hello applications on hello nodes based on hello service placement constraints.</span></span> <span data-ttu-id="e676e-153">Hello диспетчера ресурсов в подсистеме перехода на другой ресурс обеспечивает ограничения hello никогда не нарушена.</span><span class="sxs-lookup"><span data-stu-id="e676e-153">hello Resource Manager in failover subsystem ensures that hello constraints are never broken.</span></span> <span data-ttu-id="e676e-154">Диспетчер кластеров Hello управляет hello жизненного цикла приложения hello от подготовки toode подготовку к работе.</span><span class="sxs-lookup"><span data-stu-id="e676e-154">hello cluster manager manages hello lifecycle of hello applications from provision toode-provision.</span></span> <span data-ttu-id="e676e-155">Она интегрируется с hello работоспособности manager tooensure доступности приложений не допустить потери с точки зрения семантики работоспособности во время обновления.</span><span class="sxs-lookup"><span data-stu-id="e676e-155">It integrates with hello health manager tooensure that application availability is not lost from a semantic health perspective during upgrades.</span></span>
* <span data-ttu-id="e676e-156">**Диспетчер работоспособности**активирует наблюдение за работоспособностью приложений, служб и сущностей кластеров.</span><span class="sxs-lookup"><span data-stu-id="e676e-156">**Health Manager**: This service enables health monitoring of applications, services, and cluster entities.</span></span> <span data-ttu-id="e676e-157">Сведения о работоспособности, которые затем объединяются в работоспособности централизованное хранилище hello может передавать данные кластера сущностей (например, узлы, служба разделы и реплики).</span><span class="sxs-lookup"><span data-stu-id="e676e-157">Cluster entities (such as nodes, service partitions, and replicas) can report health information, which is then aggregated into hello centralized health store.</span></span> <span data-ttu-id="e676e-158">Эта информация предоставляет моментальный снимок состояния в целом в момент служб hello и узлы, распределенные по нескольким узлам в кластере hello, позволяя tootake все необходимые действия по исправлению.</span><span class="sxs-lookup"><span data-stu-id="e676e-158">This health information provides an overall point-in-time health snapshot of hello services and nodes distributed across multiple nodes in hello cluster, enabling you tootake any needed corrective actions.</span></span> <span data-ttu-id="e676e-159">Запрос работоспособности API-интерфейсы позволяют события работоспособности hello tooquery сообщил toohello работоспособности подсистемы.</span><span class="sxs-lookup"><span data-stu-id="e676e-159">Health query APIs enable you tooquery hello health events reported toohello health subsystem.</span></span> <span data-ttu-id="e676e-160">запрос работоспособности Hello API-интерфейсы возвращать hello работоспособности необработанные данные, хранящиеся в работоспособности hello хранения или hello статистическая обработка, интерпретации данных о работоспособности для конкретного кластера сущности.</span><span class="sxs-lookup"><span data-stu-id="e676e-160">hello health query APIs return hello raw health data stored in hello health store or hello aggregated, interpreted health data for a specific cluster entity.</span></span>
* <span data-ttu-id="e676e-161">**Хранилище образов**: Эта служба обеспечивает хранение и распределение hello двоичные файлы приложения.</span><span class="sxs-lookup"><span data-stu-id="e676e-161">**Image Store**: This service provides storage and distribution of hello application binaries.</span></span> <span data-ttu-id="e676e-162">Эта служба предоставляет простой распределенной файловой хранилище, где приложения hello отправленного tooand, загруженные из.</span><span class="sxs-lookup"><span data-stu-id="e676e-162">This service provides a simple distributed file store where hello applications are uploaded tooand downloaded from.</span></span>

## <a name="hosting-subsystem"></a><span data-ttu-id="e676e-163">Подсистема хостинга</span><span class="sxs-lookup"><span data-stu-id="e676e-163">Hosting subsystem</span></span>
<span data-ttu-id="e676e-164">Диспетчер кластеров Hello информирует hello размещение подсистемы (запущен на каждом узле), который служб требуются toomanage для конкретного узла.</span><span class="sxs-lookup"><span data-stu-id="e676e-164">hello cluster manager informs hello hosting subsystem (running on each node) which services it needs toomanage for a particular node.</span></span> <span data-ttu-id="e676e-165">затем размещение подсистемы Hello управляет hello жизненного цикла приложения hello на этом узле.</span><span class="sxs-lookup"><span data-stu-id="e676e-165">hello hosting subsystem then manages hello lifecycle of hello application on that node.</span></span> <span data-ttu-id="e676e-166">Он взаимодействует с hello и стабильности работоспособности компонентов tooensure, в что hello реплики размещены и находятся в работоспособном состоянии.</span><span class="sxs-lookup"><span data-stu-id="e676e-166">It interacts with hello reliability and health components tooensure that hello replicas are properly placed and are healthy.</span></span>

## <a name="communication-subsystem"></a><span data-ttu-id="e676e-167">Подсистема связи</span><span class="sxs-lookup"><span data-stu-id="e676e-167">Communication subsystem</span></span>
<span data-ttu-id="e676e-168">В данной подсистеме имеются системы надежного обмена сообщениями в пределах hello кластеров и службы обнаружения через службу именование hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-168">This subsystem provides reliable messaging within hello cluster and service discovery through hello Naming service.</span></span> <span data-ttu-id="e676e-169">Hello службы именования разрешает расположение tooa имена службы в кластере hello и позволяет пользователям toomanage службы имена и свойства.</span><span class="sxs-lookup"><span data-stu-id="e676e-169">hello Naming service resolves service names tooa location in hello cluster and enables users toomanage service names and properties.</span></span> <span data-ttu-id="e676e-170">С помощью службы именования hello, клиенты безопасно обмениваться данными с любой узел в кластере tooresolve hello имя службы и получить метаданные службы.</span><span class="sxs-lookup"><span data-stu-id="e676e-170">Using hello Naming service, clients can securely communicate with any node in hello cluster tooresolve a service name and retrieve service metadata.</span></span> <span data-ttu-id="e676e-171">С помощью простого API клиента об именовании, можно разрабатывать пользователей Service Fabric службами и клиентами, может разрешить hello текущее расположение в сети даже динамичности узла или кластера hello изменению размера hello.</span><span class="sxs-lookup"><span data-stu-id="e676e-171">Using a simple Naming client API, users of Service Fabric can develop services and clients capable of resolving hello current network location despite node dynamism or hello re-sizing of hello cluster.</span></span>

## <a name="testability-subsystem"></a><span data-ttu-id="e676e-172">Подсистема тестирования</span><span class="sxs-lookup"><span data-stu-id="e676e-172">Testability subsystem</span></span>
<span data-ttu-id="e676e-173">Подсистема тестирования представляет собой набор инструментов, специально предназначенных для тестирования служб, созданных в структуре служб.</span><span class="sxs-lookup"><span data-stu-id="e676e-173">Testability is a suite of tools specifically designed for testing services built on Service Fabric.</span></span> <span data-ttu-id="e676e-174">Hello средства позволяют разработчику легко вызывать значимых ошибок и запуск tooexercise сценарии тестирования и проверки hello многочисленные состояния и переходы, которые службы могут возникнуть во время его существования в безопасном месте.</span><span class="sxs-lookup"><span data-stu-id="e676e-174">hello tools let a developer easily induce meaningful faults and run test scenarios tooexercise and validate hello numerous states and transitions that a service will experience throughout its lifetime, all in a controlled and safe manner.</span></span> <span data-ttu-id="e676e-175">Больше времени, тесты, которые может выполнять итерацию различных возможных сбоев без потери доступности toorun механизм также предоставляет возможности тестирования.</span><span class="sxs-lookup"><span data-stu-id="e676e-175">Testability also provides a mechanism toorun longer tests that can iterate through various possible failures without losing availability.</span></span> <span data-ttu-id="e676e-176">Это обеспечивает возможность тестирования в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="e676e-176">This provides you with a test-in-production environment.</span></span>

