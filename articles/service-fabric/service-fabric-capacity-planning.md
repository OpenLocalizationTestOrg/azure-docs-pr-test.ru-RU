---
title: "Планирование приложения Service Fabric aaaCapacity | Документы Microsoft"
description: "Описывает, каким образом tooidentify hello количество вычислительных узлов, необходимых для приложения Service Fabric"
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: markfuss
editor: 
ms.assetid: 9fa47be0-50a2-4a51-84a5-20992af94bea
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 44a69e9d8ec5efcc43122dc42e8f923ef37378f2
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="capacity-planning-for-service-fabric-applications"></a>Планирование емкости для приложений Service Fabric
В этом документе объясняется, как tooestimate hello объем ресурсов (ЦП, оперативной памяти, дискового хранилища) требуется toorun приложения Azure Service Fabric. Довольно часто toochange требования вашего ресурса со временем. Как правило, при разработке или тестировании службы требуется незначительное количество ресурсов. Но при переходе в рабочую среду и росте популярности приложения объем ресурсов возрастает. При разработке приложения следует продумать долгосрочные требования hello и выбрать параметры, позволяющие вашей службы tooscale toomeet высокий спрос.

 При создании кластера Service Fabric, необходимо решить, какие виды виртуальных машин (ВМ) составляют hello кластера. Каждая виртуальная машина поставляется с ограниченным объемом ресурсов в форме hello процессоров (ядра и скорости), пропускную способность сети, оперативной памяти и дискового хранилища. При увеличении службы со временем вы можете обновить tooVMs, которые обеспечивают больший объем ресурсов и добавить дополнительные виртуальные машины tooyour кластера. последний hello toodo, необходимо сконструировать службы изначально, он может использовать преимущества новых виртуальных машин, которые динамически Станьте toohello кластера.

Некоторые службы управления мало данных toono на hello виртуальные машины. Таким образом для этих служб следует обращать внимание в первую очередь на производительность, это означает выбор hello для оптимизации производительности соответствующие процессоров (ядра и скорость) hello виртуальных машин. Кроме того, также следует учесть пропускную способность сети, включая частоту передачи данных и объем передаваемых данных. Если службе нужна tooperform, а также увеличивается использование службы, можно добавить дополнительные виртуальные машины toohello кластера и запросы сети hello распределения нагрузки между всеми виртуальными машинами hello.

Для службы, которые управляют большими объемами данных hello виртуальных машин планирования загрузки должна быть направлена в основном на размер. Таким образом необходимо тщательно рассмотреть hello объем оперативной памяти и диска хранилища виртуальной Машины hello. Система управления Hello виртуальной памяти в системе Windows делает выглядеть код tooapplication оперативной памяти на диске. Кроме того среда выполнения Service Fabric hello предоставляет технология smart paging хранения только горячих данных в памяти и скользящего toodisk hello холодных данных. Таким образом, приложения могут использовать больше памяти, чем доступно физически на hello виртуальной Машины. ОЗУ просто увеличивает производительность, поскольку hello виртуальную Машину можно сохранить несколько дискового хранилища в оперативной памяти. Hello выбора виртуальной Машины должен иметь данные hello достаточно большой toostore диска, на hello виртуальной Машины. Аналогичным образом hello виртуальной Машины должен иметь достаточно tooprovide ОЗУ с hello производительности, которые необходимы. Если к службе данных растет со временем, можно добавить дополнительные виртуальные машины toohello кластером и секционирования hello данных между всеми виртуальными машинами hello.

## <a name="determine-how-many-nodes-you-need"></a>Определение количества необходимых узлов
Секционирование службы обеспечивает tooscale к службе данных. Дополнительные сведения о секционировании см. в статье [Секционирование служб Reliable Services в Service Fabric](service-fabric-concepts-partitioning.md). Каждая секция должна помещаться на одной виртуальной машине. Однако на одной виртуальной машине также можно разместить несколько небольших секций. Следовательно, наличие большего количества небольших секций обеспечивает большую гибкость, чем небольшое количество более крупных секций. компромисс Hello — много секций увеличивает нагрузку Service Fabric и нельзя выполнять операции с поддержкой транзакций в секциях. Имеется также несколько потенциальных сетевого трафика, если код службы часто требуется tooaccess, живущих в разных секций данных. При разработке службы, следует рассмотреть эти преимущества и недостатки tooarrive в эффективной стратегии секционирования.

Предположим, что приложение имеет единой службы с отслеживанием состояния, имеет размер хранилища, что предполагается toogrow tooDB_Size ГБ в год. Доступны пойти tooadd несколько приложений (и разделов) как возникают рост за этот год.  Hello репликации коэффициент (RF), который определяет hello число реплик, для вашей службы влияние hello общее DB_Size. Hello общее DB_Size во всех репликах — коэффициент репликации, умноженное на DB_Size hello.  Node_Size представляет hello дискового пространства и ОЗУ на каждом узле необходимо toouse для службы. Для наилучшей производительности hello DB_Size следует помещаются в памяти в кластере hello и Node_Size, вокруг hello ОЗУ из приветствия виртуальная машина должна быть указана. Выделяется Node_Size, размер которого превышает емкость ОЗУ hello, зависит от hello разбиения на страницы, предоставляемые средой выполнения Service Fabric hello. Таким образом производительность может оказаться оптимальна, если все данные считается toobe горячей (с момента затем приветствия данные выгружаются/out). Тем не менее для многих служб, где активна только часть данных hello, более экономичным.

Hello количество узлов, необходимое для достижения максимальной производительности, можно вычислить следующим образом:

```
Number of Nodes = (DB_Size * RF)/Node_Size

```


## <a name="account-for-growth"></a>Действия с учетом расширения службы
Вы можете toocompute hello число узлов на основании hello, предполагается, что toogrow вашей службы, кроме DB_Size toohello DB_Size, начинающийся с. Затем увеличиваться hello количество узлов, при увеличении службы, чтобы не являются избыточная Подготовка hello количество узлов. Но hello количество секций должен быть основан hello число узлов, которые необходимы при запуске службы на максимальное увеличение размера.

Он является хорошим toohave некоторых дополнительных машин, доступных в любое время, что может обрабатывать любой непредвиденными скачками или сбоя (например, если несколько виртуальных машин вышли из строя).  Хотя hello лишние емкости должно определяться с помощью вашей ожидаемый пики, отправной точкой является tooreserve несколько дополнительных виртуальных машин (5 – 10 процентов лишние).

Hello выше предполагается одной службы с отслеживанием состояния. При наличии нескольких служб с отслеживанием состояния, у вас есть hello tooadd DB_Size, связанный с hello других служб в уравнение hello. Кроме того можно вычислить hello количество узлов отдельно для каждой службы с отслеживанием состояния.  У службы могут быть реплики или секции, которые не сбалансированы. Имейте в виду, что одни секции также могут содержать больше данных, чем другие. Дополнительные сведения о секционировании см. в статье [Секционирование служб Reliable Services в Service Fabric](service-fabric-concepts-partitioning.md). Однако hello выше формула записана в секции и реплики важен, поскольку Service Fabric гарантирует, что реплики hello распределено между узлами hello с оптимизацией.

## <a name="use-a-spreadsheet-for-cost-calculation"></a>Использование таблицы для расчета стоимости
Теперь давайте поместить некоторые вещественных чисел в формуле hello. [Электронной таблицы примере](https://servicefabricsdkstorage.blob.core.windows.net/publicrelease/SF%20VM%20Cost%20calculator-NEW.xlsx) показано, как tooplan hello емкости для приложения, которое содержит три типа объектов данных. Для каждого объекта приблизительного размера и количества объектов, что ожидается, что toohave. Мы также выбираем требуемое количество реплик каждого типа объекта. Электронная таблица Hello вычисляет общий объем памяти toobe, хранящейся в кластере hello hello.

Затем мы вводим размер виртуальной машины и ежемесячные расходы. На основании hello размер виртуальной Машины, электронная таблица hello сообщает, что hello минимальное число секций, необходимо использовать toosplit вашей toophysically данные помещаются на узлах hello. Может требоваться больше tooaccommodate разделы, необходимые для вашего приложения конкретного вычислений и сетевого трафика. Электронная таблица Hello показывает hello количество секций, управляющих объектов профиля пользователя hello увеличилось из одного toosix.

Теперь на основе этой информации электронной таблицы hello показано получение всех данных hello с hello требуемого разделов и реплик на кластере узлов 26 физически. Тем не менее, этот кластер должен быть месте плотно упакованы, поэтому некоторые обновления и сбоев узлов tooaccommodate дополнительные узлы можно. Hello электронной таблицы также показывает, что более 57 узлов предоставляет без дополнительных значений так, как будет иметь пустые узлы. Опять же вы можете toogo выше 57 узлы все равно tooaccommodate сбоев узлов и обновления. Можно настроить электронную таблицу toomatch hello конкретных потребностей вашего приложения.   

![Таблица для расчета стоимости][Image1]

## <a name="next-steps"></a>Дальнейшие действия
Извлечение [служб Service Fabric секционирование] [ 10] toolearn Дополнительные общие сведения о секционировании службы.

<!--Image references-->
[Image1]: ./media/SF-Cost.png

<!--Link references--In actual articles, you only need a single period before hello slash-->
[10]: service-fabric-concepts-partitioning.md
