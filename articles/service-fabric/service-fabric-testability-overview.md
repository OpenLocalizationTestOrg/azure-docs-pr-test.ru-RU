---
title: "Общие сведения о службе Analysis aaaFault | Документы Microsoft"
description: "Инициирует ошибок и выполнения сценариев тестирования от служб в этой статье описываются hello службы анализа проблем в Service Fabric."
services: service-fabric
documentationcenter: .net
author: anmolah
manager: timlt
editor: vturecek
ms.assetid: 1f064276-293a-4989-a513-e0d0b9fdf703
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/15/2017
ms.author: anmola
ms.openlocfilehash: deac16ec830aa10d4e488e60691faa9ef2b6cd33
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="introduction-toohello-fault-analysis-service"></a>Введение toohello ошибки Analysis Service
Hello ошибки Analysis Service предназначен для тестирования служб, построенных на Microsoft Azure Service Fabric. С hello ошибки Analysis Service можно вызывать значимых ошибок и выполнение сценариев завершения тестирования приложений. Эти ошибки и сценариях использования и проверки hello многочисленные состояния и переходы, которые службы могут возникнуть во время его существования в управляемой, надежных и согласованных способом.

Действия представляют Привет отдельных ошибок целевая служба для ее проверки. Разработчик службы может использовать их в качестве стандартных блоков toowrite сложных сценариях. Например:

* Перезапустите toosimulate узел любое количество ситуаций, где перезагрузить компьютер или ВМ.
* Переместите реплику балансировки нагрузки toosimulate службы с отслеживанием состояния, перехода на другой ресурс, или обновление приложения.
* Вызовите потери кворума на службы с отслеживанием состояния toocreate ситуации, где операции записи не может продолжаться, поскольку отсутствуют достаточное количество реплик «резервного копирования» или «secondary» tooaccept новые данные.
* Вызовите потери данных в службы с отслеживанием состояния toocreate ситуации, где все в оперативной памяти уничтожаются.

Сценарии — это сложные операции, состоящие из одного или нескольких действий. Hello ошибки Analysis Service предоставляет две встроенные реализации сценариев:

* Сценарий хаотического тестирования
* Сценарий отработки отказа

## <a name="testing-as-a-service"></a>Тестирование как услуга
Hello ошибки анализа службы является системная служба Service Fabric, автоматически запускается с кластера Service Fabric. Эта служба выступает в качестве узла hello для внесения ошибок, выполнение тестов в сценарий и анализ состояния. 

![Служба анализа сбоев][0]

При инициации действия или тестового случае сбоя команды отправляется toohello ошибки Analysis Service toorun hello действие или тестирования случае сбоя. Hello службы анализа проблем с отслеживанием состояния, чтобы надежно можно запустить сбоев и сценариев и проверки результатов. Например длительные тестового сценария надежно выполняемые hello ошибки Analysis Service. И поскольку тесты выполняются внутри кластера hello, служба hello проверять hello состояния кластера hello и tooprovide вашей службы Дополнительные сведения о сбоях.

## <a name="testing-distributed-systems"></a>Тестирование распределенных систем
Service Fabric упрощает работу hello записи и управления значительно облегчают распределенных масштабируемых приложений. Hello ошибки Analysis Service облегчает проверку аналогично проще распределенного приложения. Существует три основных проблем, требующих toobe решена во время тестирования.

1. Имитация формирования сбоев, которые могут возникнуть в реальных сценариях: одним из важных аспектов hello Service Fabric — что он позволяет toorecover распределенные приложения при различных сбоях. Тем не менее tootest, Здравствуйте, приложения могут toorecover подобных сбоев, нам нужно механизм toosimulate формирования эти ошибки реальных в управляемой тестовой среде.
2. возможность toogenerate Hello коррелированных событий ошибок: основные сбои в hello системы, таких как сбои в сети и сбоев компьютера, легко tooproduce по отдельности. Создание значительное количество сценариев, которые могут выполняться в реальном мире hello в результате взаимодействия hello из таких сбоев отдельных является нетривиальной.
3. Унифицированные возможности для разных уровней разработки и развертывания. Существует множество систем внесения ошибок, которые позволяют моделировать сбои различных типов. Тем не менее качества hello во всех этих низка, при перемещении из сценариев разработки одно поле, приветствия toorunning же тесты в средах с большими тестовыми, toousing, их для тестов в рабочей среде.

Хотя существует много механизмов toosolve этих проблем в системе, hello же с необходимые гарантии--все способом hello в среде разработчика одно поле tootest в рабочие кластеры--отсутствует. Hello ошибки Analysis Service помогает hello разработчикам сосредоточиться на тестировании их бизнес-логике. Hello ошибки Analysis Service предоставляет все возможности hello требуется взаимодействие hello tootest hello службы с базовой распределенной системе hello.

### <a name="simulatinggenerating-real-world-failure-scenarios"></a>Моделирование и создание реальных сценариев возникновения ошибок
надежность hello tootest распределенной системы от сбоев, нам нужна механизм toogenerate ошибок. Хотя теоретически создания сбоя как узел вниз кажется простой начинается, попадание hello же набор проблем с согласованностью, Service Fabric пытается toosolve. Например если мы хотим tooshut работу узла, hello требуемое место рабочего процесса hello следующее:

1. От клиента hello выдавать запрос на завершение работы узла.
2. Отправьте hello запроса toohello нужный узел.
   
    а. Если узел hello не найден, он должен завершиться ошибкой.
   
    b. Если узел hello найден, он должен возвращать только если узел hello выключен.

Сбой hello tooverify с точки зрения тестирования, hello теста должен tooknow, если эта ошибка вызвана, hello фактически происходит сбой. Hello гарантии, что обеспечивает Service Fabric, что узел либо hello будет вышли из строя или уже был вниз по достижении узел hello команда hello. В обоих вариантов hello теста должен быть причина может toocorrectly о состоянии hello и выполнение или сбой правильно при его проверке. Системе, реализуемой за пределами hello toodo Service Fabric же набор сбоев может попадания, которые большого количества сетевых, оборудования и неполадок программного обеспечения, которые могли бы помешать от предоставления hello выше гарантии. В присутствии hello проблем hello отмечалось, Service Fabric перенастроить toowork состояние кластера hello проблем hello и поэтому hello сбоя службы Analysis по-прежнему может toogive hello правой задается гарантий.

### <a name="generating-required-events-and-scenarios"></a>Создание необходимых событий и сценариев
Во время имитации реальных сбоя постоянно прочного toostart с, hello возможность toogenerate коррелированных событий ошибок — еще более сложной. Например потери данных происходит в службы с отслеживанием состояния при возникновении hello, следующие действия:

1. Только кворума записи реплик hello отражены на репликацию. Все вторичные реплики hello отставать от основной hello.
2. кворум записи Hello перестает работать из-за выхода из строя (из-за tooa пакет кода или выхода из строя узла) реплик hello.
3. кворум записи Hello не может возвращаться к отсутствия hello данные для реплик hello (из-за повреждения toodisk или повторным созданием образа компьютера).

В реальном мире hello, но не так часто, как отдельные сбои все-таки эти связанные ошибки. Важно Hello tootest возможности в следующих случаях до их возникновения в рабочей среде. Еще более важным является toosimulate возможность hello эти сценарии с рабочих нагрузок в контролируемых условиях (в середине hello hello дня с всех инженеров колоде). Это гораздо лучше, чем его произойти по hello первый раз в рабочей среде, в 2:00.

### <a name="unified-experience-across-different-environments"></a>Единые возможности в различных средах
Рекомендуется Hello традиционно была toocreate три разные наборы взаимодействий, один для среды разработки hello, один для тестов и один для рабочей среды. Hello модель была:

1. В среде разработки hello создавать переходы между состояниями, позволяющие модульные тесты из отдельных методов.
2. В тестовой среде hello создают сбоев tooallow конца в конец тестов для различных сценариев сбоя.
3. Сохраните tooprevent чистую среду производственного hello любой без естественный сбоев и это крайне быстрый ответ человека toofailure tooensure.

В Service Fabric через hello сбоя службы анализа, мы предлагаем tooturn здесь и используйте hello же методологию из tooproduction среде разработчика. Существует два способа tooachieve это:

1. сбои tooinduce управляет использовать hello API-интерфейсы службы анализа ошибки из среды одно поле все tooproduction способом hello кластеров.
2. toogive hello кластера темпами, вызывающее автоматический индукционная сбоев toogenerate службы анализа проблем использования hello автоматического сбоев. Управляющий hello Частота сбоев через конфигурацию позволяет hello же toobe службы тестирования по-разному в разных средах.

В Service Fabric на то, что масштаб hello сбоев будет отличаться в различных средах hello, фактический механизмы hello будет совпадать. Это позволяет гораздо быстрее кода для развертывания конвейера и hello возможность tootest hello службы под реальных загрузок.

## <a name="using-hello-fault-analysis-service"></a>С помощью hello ошибки Analysis Service
**C#**

Функции служб Analysis Service сбоя — пространство имен System.Fabric hello в пакет Microsoft.ServiceFabric NuGet hello. toouse hello ошибки Analysis Service, входят пакет nuget hello как ссылку в проект.

**PowerShell**

toouse PowerShell, необходимо установить пакет Service Fabric SDK hello. После приветствия установлен пакет SDK, hello ServiceFabric PowerShell модуль является автоматически загружается для вас toouse.

## <a name="next-steps"></a>Дальнейшие действия
toocreate действительно масштаба облачной службы, это критическое tooensure до и после развертывания, что службы может сохраняться реальной жизни сбоев. В службы Привет сегодня hello tooinnovate возможность быстро и перемещения кода tooproduction быстро очень важен. Hello ошибки Analysis Service помогает toodo разработчики службы именно это.

Начать тестирование приложений и служб с помощью встроенных hello [сценарии тестирования](service-fabric-testability-scenarios.md), или создания собственных сценариев тестирования, с помощью hello [fault действия](service-fabric-testability-actions.md) предоставляемые hello ошибки Analysis Service.

<!--Image references-->
[0]: ./media/service-fabric-testability-overview/faultanalysisservice.png
