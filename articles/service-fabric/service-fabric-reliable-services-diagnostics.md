---
title: "Надежные службы диагностики aaaStateful | Документы Microsoft"
description: "Диагностические функции для надежных служб с отслеживанием состояния"
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: ae0e8f99-69ab-4d45-896d-1fa80ed45659
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/30/2017
ms.author: dekapur
ms.openlocfilehash: 6200800b858957c06039d9af062633b12a446318
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="diagnostic-functionality-for-stateful-reliable-services"></a><span data-ttu-id="2e058-103">Диагностические функции для надежных служб с отслеживанием состояния</span><span class="sxs-lookup"><span data-stu-id="2e058-103">Diagnostic functionality for Stateful Reliable Services</span></span>
<span data-ttu-id="2e058-104">выдает Hello надежного StatefulServiceBase служб с отслеживанием состояния класс [EventSource](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.aspx) события, которые можно использовать toodebug Здравствуйте службы, получить представление о как операционной среды выполнения hello и помочь в устранении неполадок.</span><span class="sxs-lookup"><span data-stu-id="2e058-104">hello Stateful Reliable Services StatefulServiceBase class emits [EventSource](https://msdn.microsoft.com/library/system.diagnostics.tracing.eventsource.aspx) events that can be used toodebug hello service, provide insights into how hello runtime is operating, and help with troubleshooting.</span></span>

## <a name="eventsource-events"></a><span data-ttu-id="2e058-105">События EventSource</span><span class="sxs-lookup"><span data-stu-id="2e058-105">EventSource events</span></span>
<span data-ttu-id="2e058-106">Hello EventSource hello надежного StatefulServiceBase служб с отслеживанием состояния класс называется «Microsoft ServiceFabric Services».</span><span class="sxs-lookup"><span data-stu-id="2e058-106">hello EventSource name for hello Stateful Reliable Services StatefulServiceBase class is "Microsoft-ServiceFabric-Services".</span></span> <span data-ttu-id="2e058-107">Из этого источника событий отображаются в [событий диагностики](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md#view-service-fabric-system-events-in-visual-studio) окно hello службы, который [отладки в Visual Studio](service-fabric-debugging-your-application.md).</span><span class="sxs-lookup"><span data-stu-id="2e058-107">Events from this event source appear in the [Diagnostics Events](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally.md#view-service-fabric-system-events-in-visual-studio) window when hello service is being [debugged in Visual Studio](service-fabric-debugging-your-application.md).</span></span>

<span data-ttu-id="2e058-108">Для сбора и просмотра событий EventSource вы можете использовать такие средства и технологии, как [PerfView](http://www.microsoft.com/download/details.aspx?id=28567), [система диагностики Microsoft Azure](../cloud-services/cloud-services-dotnet-diagnostics.md) и [библиотека Microsoft TraceEvent](http://www.nuget.org/packages/Microsoft.Diagnostics.Tracing.TraceEvent).</span><span class="sxs-lookup"><span data-stu-id="2e058-108">Examples of tools and technologies that help in collecting and/or viewing EventSource events are [PerfView](http://www.microsoft.com/download/details.aspx?id=28567), [Microsoft Azure Diagnostics](../cloud-services/cloud-services-dotnet-diagnostics.md), and the [Microsoft TraceEvent Library](http://www.nuget.org/packages/Microsoft.Diagnostics.Tracing.TraceEvent).</span></span>

## <a name="events"></a><span data-ttu-id="2e058-109">События</span><span class="sxs-lookup"><span data-stu-id="2e058-109">Events</span></span>
| <span data-ttu-id="2e058-110">Имя события</span><span class="sxs-lookup"><span data-stu-id="2e058-110">Event name</span></span> | <span data-ttu-id="2e058-111">Идентификатор события</span><span class="sxs-lookup"><span data-stu-id="2e058-111">Event ID</span></span> | <span data-ttu-id="2e058-112">Уровень</span><span class="sxs-lookup"><span data-stu-id="2e058-112">Level</span></span> | <span data-ttu-id="2e058-113">Описание события</span><span class="sxs-lookup"><span data-stu-id="2e058-113">Event description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="2e058-114">StatefulRunAsyncInvocation</span><span class="sxs-lookup"><span data-stu-id="2e058-114">StatefulRunAsyncInvocation</span></span> |<span data-ttu-id="2e058-115">1</span><span class="sxs-lookup"><span data-stu-id="2e058-115">1</span></span> |<span data-ttu-id="2e058-116">Информация</span><span class="sxs-lookup"><span data-stu-id="2e058-116">Informational</span></span> |<span data-ttu-id="2e058-117">Генерируется, когда запускается задача RunAsync службы.</span><span class="sxs-lookup"><span data-stu-id="2e058-117">Emitted when service RunAsync task is started</span></span> |
| <span data-ttu-id="2e058-118">StatefulRunAsyncCancellation</span><span class="sxs-lookup"><span data-stu-id="2e058-118">StatefulRunAsyncCancellation</span></span> |<span data-ttu-id="2e058-119">2</span><span class="sxs-lookup"><span data-stu-id="2e058-119">2</span></span> |<span data-ttu-id="2e058-120">Информация</span><span class="sxs-lookup"><span data-stu-id="2e058-120">Informational</span></span> |<span data-ttu-id="2e058-121">Генерируется, когда отменяется задача RunAsync службы.</span><span class="sxs-lookup"><span data-stu-id="2e058-121">Emitted when service RunAsync task is cancelled</span></span> |
| <span data-ttu-id="2e058-122">StatefulRunAsyncCompletion</span><span class="sxs-lookup"><span data-stu-id="2e058-122">StatefulRunAsyncCompletion</span></span> |<span data-ttu-id="2e058-123">3</span><span class="sxs-lookup"><span data-stu-id="2e058-123">3</span></span> |<span data-ttu-id="2e058-124">Информация</span><span class="sxs-lookup"><span data-stu-id="2e058-124">Informational</span></span> |<span data-ttu-id="2e058-125">Генерируется, когда завершается выполнение задачи RunAsync службы.</span><span class="sxs-lookup"><span data-stu-id="2e058-125">Emitted when service RunAsync task is completed</span></span> |
| <span data-ttu-id="2e058-126">StatefulRunAsyncSlowCancellation</span><span class="sxs-lookup"><span data-stu-id="2e058-126">StatefulRunAsyncSlowCancellation</span></span> |<span data-ttu-id="2e058-127">4.</span><span class="sxs-lookup"><span data-stu-id="2e058-127">4</span></span> |<span data-ttu-id="2e058-128">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="2e058-128">Warning</span></span> |<span data-ttu-id="2e058-129">Создается, когда службы RunAsync задачей занимает слишком много времени toocomplete отмены</span><span class="sxs-lookup"><span data-stu-id="2e058-129">Emitted when service RunAsync task takes too long toocomplete cancellation</span></span> |
| <span data-ttu-id="2e058-130">StatefulRunAsyncFailure</span><span class="sxs-lookup"><span data-stu-id="2e058-130">StatefulRunAsyncFailure</span></span> |<span data-ttu-id="2e058-131">5</span><span class="sxs-lookup"><span data-stu-id="2e058-131">5</span></span> |<span data-ttu-id="2e058-132">Ошибка</span><span class="sxs-lookup"><span data-stu-id="2e058-132">Error</span></span> |<span data-ttu-id="2e058-133">Генерируется, когда задача RunAsync службы вызывает исключение.</span><span class="sxs-lookup"><span data-stu-id="2e058-133">Emitted when service RunAsync task throws an exception</span></span> |

## <a name="interpret-events"></a><span data-ttu-id="2e058-134">Интерпретация событий</span><span class="sxs-lookup"><span data-stu-id="2e058-134">Interpret events</span></span>
<span data-ttu-id="2e058-135">События StatefulRunAsyncInvocation, StatefulRunAsyncCompletion и StatefulRunAsyncCancellation являются полезным toohello службы модуля записи toounderstand hello жизненный цикл службы--, а также время hello при запуске, отменено или завершено службы .</span><span class="sxs-lookup"><span data-stu-id="2e058-135">StatefulRunAsyncInvocation, StatefulRunAsyncCompletion, and StatefulRunAsyncCancellation events are useful toohello service writer toounderstand hello lifecycle of a service--as well as hello timing for when a service is started, cancelled, or completed.</span></span> <span data-ttu-id="2e058-136">Это может быть полезно при отладке проблем службы или основные сведения о жизненном цикле услуги hello.</span><span class="sxs-lookup"><span data-stu-id="2e058-136">This can be useful when debugging service issues or understanding hello service lifecycle.</span></span>

<span data-ttu-id="2e058-137">Записи с помощью службы следует уделять особое внимание tooStatefulRunAsyncSlowCancellation и StatefulRunAsyncFailure события, поскольку они указывают на проблемы со службой hello.</span><span class="sxs-lookup"><span data-stu-id="2e058-137">Service writers should pay close attention tooStatefulRunAsyncSlowCancellation and StatefulRunAsyncFailure events because they indicate issues with hello service.</span></span>

<span data-ttu-id="2e058-138">StatefulRunAsyncFailure создается каждый раз, когда задача RunAsync() hello службы создает исключение.</span><span class="sxs-lookup"><span data-stu-id="2e058-138">StatefulRunAsyncFailure is emitted whenever hello service RunAsync() task throws an exception.</span></span> <span data-ttu-id="2e058-139">Как правило исключение указывает на ошибку или ошибки в службе hello.</span><span class="sxs-lookup"><span data-stu-id="2e058-139">Typically, an exception thrown indicates an error or bug in hello service.</span></span> <span data-ttu-id="2e058-140">Кроме того hello исключение вызывает toofail службы hello, поэтому перемещенный tooa другой узел.</span><span class="sxs-lookup"><span data-stu-id="2e058-140">Additionally, hello exception causes hello service toofail, so it is moved tooa different node.</span></span> <span data-ttu-id="2e058-141">Это может быть ресурсоемкой операцией и может быть отложено входящие запросы, пока служба hello перемещается.</span><span class="sxs-lookup"><span data-stu-id="2e058-141">This can be an expensive operation and can delay incoming requests while hello service is moved.</span></span> <span data-ttu-id="2e058-142">Записи с помощью службы следует определить причину исключения hello hello и, если это возможно, устранить ее.</span><span class="sxs-lookup"><span data-stu-id="2e058-142">Service writers should determine hello cause of hello exception and, if possible, mitigate it.</span></span>

<span data-ttu-id="2e058-143">StatefulRunAsyncSlowCancellation создается каждый раз, когда запрос отмены для hello RunAsync задачи требуется больше времени чем четыре секунды.</span><span class="sxs-lookup"><span data-stu-id="2e058-143">StatefulRunAsyncSlowCancellation is emitted whenever a cancellation request for hello RunAsync task takes longer than four seconds.</span></span> <span data-ttu-id="2e058-144">Когда службы занимает слишком много времени toocomplete отмены, оно влияет на возможность hello toobe службы hello быстро перезапускается на другом узле.</span><span class="sxs-lookup"><span data-stu-id="2e058-144">When a service takes too long toocomplete cancellation, it impacts hello ability for hello service toobe quickly restarted on another node.</span></span> <span data-ttu-id="2e058-145">Это может повлиять на общую доступность службы hello hello.</span><span class="sxs-lookup"><span data-stu-id="2e058-145">This may impact hello overall availability of hello service.</span></span>

## <a name="next-steps"></a><span data-ttu-id="2e058-146">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2e058-146">Next steps</span></span>
* [<span data-ttu-id="2e058-147">Поставщики EventSource в PerfView</span><span class="sxs-lookup"><span data-stu-id="2e058-147">EventSource providers in PerfView</span></span>](https://blogs.msdn.microsoft.com/vancem/2012/07/09/introduction-tutorial-logging-etw-events-in-c-system-diagnostics-tracing-eventsource/)
