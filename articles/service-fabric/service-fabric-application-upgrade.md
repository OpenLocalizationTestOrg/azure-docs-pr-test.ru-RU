---
title: "обновление приложения Fabric aaaService | Документы Microsoft"
description: "Эта статья содержит общие сведения tooupgrading приложения Service Fabric, включая выбор режимов обновления и выполнение проверок работоспособности."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a>Обновление приложения Service Fabric
Приложение Azure Service Fabric представляет собой коллекцию служб. Во время обновления, Service Fabric сравнивает hello новый [манифест приложения](service-fabric-application-model.md#describe-an-application) с предыдущей версией hello и определяет, какие службы в приложение hello требуются обновления. Service Fabric сравнивает версию hello, номера в службе hello манифесты с номерами версий hello в предыдущей версии hello. Если служба не была изменена, эта служба не обновляется.

## <a name="rolling-upgrades-overview"></a>Обзор последовательных обновлений
В обновление приложения hello обновление выполняется поэтапно. На каждом этапе примененных tooa ограниченного набора узлов в кластере hello, называется домен обновления — обновление hello. В результате приложение hello остается доступным в ходе обновления hello. Во время обновления hello hello кластер может содержать сочетание hello старые и новые версии.

По этой причине hello двух версии должны быть прямую и обратную совместимость. Если они не совместимы, администратор приложения hello отвечает за промежуточных доступности многоэтапный обновления toomaintain. При обновлении многоэтапный hello первым шагом является обновление tooan промежуточной версией приложения hello, совместимую с предыдущей версии hello. второй шаг Hello-tooupgrade hello окончательного версия прерывается совместимости с версией hello перед обновлением, но совместима с версией промежуточного hello.

Домены обновления указаны в манифесте кластера hello при настройке кластера hello. Домены обновления не получают обновления в определенном порядке. Домен обновления представляет собой логическую единицу, в пределах которой развертывается то или иное приложение. Домены обновления допускает tooremain hello служб на высокий уровень доступности во время обновления.

Не чередующихся обновлений возможны, если обновление hello примененных tooall узлов в кластере hello, что случается hello, когда приложение hello имеет только один домен обновления. Такой подход не рекомендуется, так как служба hello выходит из строя и недоступен во время обновления hello. Кроме того, Azure не предоставляет никаких гарантий в случаях, когда кластер настраивается только с одним доменом обновления.

## <a name="health-checks-during-upgrades"></a>Проверки работоспособности во время обновления
Для обновления политики работоспособности toobe установить (или может использовать значения по умолчанию). Обновление называется успешно при обновлении версии всех доменов обновления в hello указанное время ожидания, и при обновлении все домены, считаются работоспособное.  Домен работоспособное обновления означает, что этот домен обновления hello передать все проверки работоспособности hello, указанным в политике работоспособности hello. Например, политика работоспособности может подразумевать обязательную *работоспособность*всех служб в экземпляре приложения, так как работоспособность определяется Service Fabric.

Политики работоспособности и проверки во время обновлений средствами Service Fabric не опираются на службы и приложения. Это означает, что проверок, зависящих от конкретных служб, не выполняется.  Например служба может иметь требование пропускной способности, но Service Fabric имеет пропускную способность toocheck сведения hello. См. toohello [работоспособности статьи](service-fabric-health-introduction.md) для выполняемые проверки hello. проверяет Hello, происходящие во время обновления include проверяет ли пакет приложения hello был скопирован правильно, является ли экземпляр hello был запущен и т. д.

работоспособность приложения Hello является сочетанием hello дочерних сущностей этого приложения hello. Иными словами Service Fabric оценивает работоспособность приложения hello через работоспособности hello, полученных с приложение hello hello. Он также проверяет hello работоспособности всех hello служб для приложения hello, таким образом. Service Fabric дальнейшей оценки работоспособности hello служб приложения hello, применяя статистическую обработку работоспособности hello дочерние объекты, такие как hello реплики службы. Политика работоспособности приложения hello удовлетворяется, откройте hello обновления. В случае нарушения политики работоспособности hello обновление приложения hello завершается ошибкой.

## <a name="upgrade-modes"></a>Режимы обновления
Привет, рекомендуется использовать для обновления приложения используется hello отслеживаемых режим hello обычно используется режим. Отслеживаемых режиме выполняется обновление hello на одно обновление домена и если проверяет работоспособность всех проход (согласно hello политике указан), перемещается на следующий домен обновления toohello автоматически.  Если проверок работоспособности и/или достижении значения времени ожидания, обновление hello либо откат для домена обновления hello или hello режим — измененные toounmonitored вручную. Вы можете настроить hello обновления toochoose одного из этих двух режимов сбоя обновления. 

Не отслеживается в ручном режиме необходимо вмешательство после каждого обновления на домен обновления, tookick off hello обновления на hello следующего домена обновления. Проверок работоспособности Service Fabric не выполняется. Здравствуйте, администратор выполняет проверку работоспособности или состояния hello, перед запуском обновления hello в следующий домен обновления hello.

## <a name="upgrade-default-services"></a>Обновление служб по умолчанию
По умолчанию служб внутри приложения Service Fabric могут быть обновлены во время обновления hello приложения. По умолчанию службы задаются в hello [манифест приложения](service-fabric-application-model.md#describe-an-application). используются стандартные правила Hello обновления службы по умолчанию.

1. По умолчанию службы в новый hello [манифест приложения](service-fabric-application-model.md#describe-an-application) , не существуют в кластере hello создаются.
> [!TIP]
> [EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) требуется toobe набор правил hello tooenable tootrue. Эта функция поддерживается, начиная с версии 5.5.

2. Службы по умолчанию, существующие в предыдущей и новой версиях [манифеста приложения](service-fabric-application-model.md#describe-an-application), обновляются. Описания службы в новой версии hello перезапишет уже в кластере hello. При сбое обновления служб по умолчанию автоматически выполняется откат обновления приложения.
3. По умолчанию службы в предыдущем hello [манифест приложения](service-fabric-application-model.md#describe-an-application) , но не в новой версии hello удаляются. **Обратите внимание, что это удаление служб по умолчанию невозможно отменить.**

В случае, если приложения обновления выполняется откат, службы по умолчанию, возвращенной toohello состояние до начала обновления. Но создать удаленные службы будет невозможно.

## <a name="application-upgrade-flowchart"></a>Блок-схема обновления приложения
Блок-схема Hello ниже поможет вам понять процесс обновления hello приложения Service Fabric. В частности, описывает hello потока как hello тайм-аутов, включая *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, и *UpgradeHealthCheckInterval*, помогают управлять тем, когда обновление hello в доменах одно обновление, считается успеха или сбоя.

![процесс обновления Hello для структуры приложения службы][image]

## <a name="next-steps"></a>Дальнейшие действия
[Руководство по обновлению приложений Service Fabric с помощью Visual Studio](service-fabric-application-upgrade-tutorial.md) поможет вам выполнить поэтапное обновление приложения с помощью Visual Studio.

[Обновление приложения с помощью PowerShell](service-fabric-application-upgrade-tutorial-powershell.md) поможет вам выполнить обновление приложения с помощью PowerShell.

Управление обновлениями приложения осуществляется с помощью [параметров обновления](service-fabric-application-upgrade-parameters.md).

Обеспечить совместимость на обновление приложения путем изучения как toouse [сериализации данных](service-fabric-application-upgrade-data-serialization.md).

Узнайте, как toouse расширенные функции при обновлении приложения с помощью ссылки слишком[дополнительные разделы](service-fabric-application-upgrade-advanced.md).

Исправьте распространенных проблем в обновлений приложений с помощью ссылки действия toohello в [Устранение неполадок обновлений приложений](service-fabric-application-upgrade-troubleshooting.md).

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
