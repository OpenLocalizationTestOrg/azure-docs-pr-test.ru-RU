---
title: "кластер Service Fabric aaaScale in или out | Документы Microsoft"
description: "Масштабирование кластера Service Fabric in или out запросу toomatch правилами автоматического масштабирования для каждого шкалы набор узлов типа или виртуальная машина. Добавление или удаление кластера Service Fabric tooa узлов"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: aeb76f63-7303-4753-9c64-46146340b83d
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/22/2017
ms.author: chackdan
ms.openlocfilehash: 37cfeaf80edc016cf6de017d1c2dc6fbcb8acc2a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="scale-a-service-fabric-cluster-in-or-out-using-auto-scale-rules"></a><span data-ttu-id="a6f7c-104">Масштабирование кластера Service Fabric с помощью правил автомасштабирования</span><span class="sxs-lookup"><span data-stu-id="a6f7c-104">Scale a Service Fabric cluster in or out using auto-scale rules</span></span>
<span data-ttu-id="a6f7c-105">Наборы масштабирования виртуальных машин являются ресурсом вычислений Azure можно использовать toodeploy и управлять коллекцией виртуальных машин как набор.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-105">Virtual machine scale sets are an Azure compute resource that you can use toodeploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="a6f7c-106">Каждый тип узла, определенный в кластере Service Fabric, настроен как отдельный масштабируемый набор виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-106">Every node type that is defined in a Service Fabric cluster is set up as a separate Virtual Machine scale set.</span></span> <span data-ttu-id="a6f7c-107">Каждый тип узла поддерживает возможность независимого масштабирования, имеет разные наборы открытых портов и собственные метрики емкости.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-107">Each node type can then be scaled in or out independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="a6f7c-108">Дополнительные сведения о нем в hello [nodetypes Service Fabric](service-fabric-cluster-nodetypes.md) документа.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-108">Read more about it in hello [Service Fabric nodetypes](service-fabric-cluster-nodetypes.md) document.</span></span> <span data-ttu-id="a6f7c-109">Так как типы узлов Service Fabric hello в кластере состоят из набора масштабирования виртуальной машины в серверной части hello, необходимы tooset автоматически масштабировать правила для каждого узла типа или виртуальная машины масштабного набора.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-109">Since hello Service Fabric node types in your cluster are made of Virtual Machine scale sets at hello backend, you need tooset up auto-scale rules for each node type/Virtual Machine scale set.</span></span>

> [!NOTE]
> <span data-ttu-id="a6f7c-110">Подписки должен иметь достаточно tooadd ядер hello новые виртуальные машины, входящие в состав этого кластера.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-110">Your subscription must have enough cores tooadd hello new VMs that make up this cluster.</span></span> <span data-ttu-id="a6f7c-111">Чтобы получить сбой время развертывания, если обнаруживаются любые hello квоты в настоящее время отсутствует проверка модели.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-111">There is no model validation currently, so you get a deployment time failure, if any of hello quota limits are hit.</span></span>
> 
> 

## <a name="choose-hello-node-typevirtual-machine-scale-set-tooscale"></a><span data-ttu-id="a6f7c-112">Выберите тип узла hello или виртуальная машина шкалы набора tooscale</span><span class="sxs-lookup"><span data-stu-id="a6f7c-112">Choose hello node type/Virtual Machine scale set tooscale</span></span>
<span data-ttu-id="a6f7c-113">В настоящее время вы не могли toospecify hello автоматически масштабировать правила для набора масштабирования виртуальной машины с помощью портала hello, таким образом сообщить нам использовать типы узлов hello toolist Azure PowerShell (1.0 +) и добавьте toothem правила автоматического масштабирования.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-113">Currently, you are not able toospecify hello auto-scale rules for Virtual Machine scale sets using hello portal, so let us use Azure PowerShell (1.0+) toolist hello node types and then add auto-scale rules toothem.</span></span>

<span data-ttu-id="a6f7c-114">Список hello tooget виртуальной машины в наборе, входящие в состав кластера, запустите следующие командлеты hello:</span><span class="sxs-lookup"><span data-stu-id="a6f7c-114">tooget hello list of Virtual Machine scale set that make up your cluster, run hello following cmdlets:</span></span>

```powershell
Get-AzureRmResource -ResourceGroupName <RGname> -ResourceType Microsoft.Compute/VirtualMachineScaleSets

Get-AzureRmVmss -ResourceGroupName <RGname> -VMScaleSetName <Virtual Machine scale set name>
```

## <a name="set-auto-scale-rules-for-hello-node-typevirtual-machine-scale-set"></a><span data-ttu-id="a6f7c-115">Задать правила автоматического масштабирования для набора масштабирования hello узел типа и виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="a6f7c-115">Set auto-scale rules for hello node type/Virtual Machine scale set</span></span>
<span data-ttu-id="a6f7c-116">Если кластер имеет несколько типов узлов, затем повторите это действие для каждого типы узел или виртуальная машина шкалы задает требуется tooscale (входящий или исходящий).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-116">If your cluster has multiple node types, then repeat this for each node types/Virtual Machine scale sets that you want tooscale (in or out).</span></span> <span data-ttu-id="a6f7c-117">Учитывает hello учетной записи, количество узлов, которые необходимы до настройки автоматического масштабирования.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-117">Take into account hello number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="a6f7c-118">Минимальное число узлов, которые необходимы для типа первичного узла hello Hello определяется уровень надежности hello выбрано.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-118">hello minimum number of nodes that you must have for hello primary node type is driven by hello reliability level you have chosen.</span></span> <span data-ttu-id="a6f7c-119">См. дополнительные сведения об [уровнях надежности](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-119">Read more about [reliability levels](service-fabric-cluster-capacity.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a6f7c-120">Масштабировании с уменьшением сборки типа hello основного узла, чем минимальное число hello сделать hello кластер работает нестабильно или переведите его в.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-120">Scaling down hello primary node type tooless than hello minimum number make hello cluster unstable or bring it down.</span></span> <span data-ttu-id="a6f7c-121">Это может привести к потере данных для приложений, а также для hello системных служб.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-121">This could result in data loss for your applications and for hello system services.</span></span>
> 
> 

<span data-ttu-id="a6f7c-122">В настоящее время функция автоматического масштабирования hello не определяется загружает hello, что приложения могут сообщать о tooService структуры.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-122">Currently hello auto-scale feature is not driven by hello loads that your applications may be reporting tooService Fabric.</span></span> <span data-ttu-id="a6f7c-123">Поэтому в это время hello автоматическое масштабирование, получаемых исключительно определяется hello счетчики производительности, создаваемых каждый из экземпляров набора масштабирования виртуальных машин hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-123">So at this time hello auto-scale you get is purely driven by hello performance counters that are emitted by each of hello Virtual Machine scale set instances.</span></span>  

<span data-ttu-id="a6f7c-124">Следуйте этим инструкциям [tooset копирование Автомасштабирование для каждого набора масштабирования виртуальных машин](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-124">Follow these instructions [tooset up auto-scale for each Virtual Machine scale set](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="a6f7c-125">На шкале работу сценария, если узел имеет свой уровень устойчивости Gold или Silver требуется toocall hello [командлет Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/azure/mt125993.aspx) с именем hello соответствующего узла.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-125">In a scale down scenario, unless your node type has a durability level of Gold or Silver you need toocall hello [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/azure/mt125993.aspx) with hello appropriate node name.</span></span>
> 
> 

## <a name="manually-add-vms-tooa-node-typevirtual-machine-scale-set"></a><span data-ttu-id="a6f7c-126">Вручную добавьте виртуальные машины tooa узел типа или виртуальная машина масштабного набора</span><span class="sxs-lookup"><span data-stu-id="a6f7c-126">Manually add VMs tooa node type/Virtual Machine scale set</span></span>
<span data-ttu-id="a6f7c-127">Выполните образец hello/инструкции hello [коллекции шаблонов краткого](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) toochange hello число виртуальных машин в каждом Nodetype.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-127">Follow hello sample/instructions in hello [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) toochange hello number of VMs in each Nodetype.</span></span> 

> [!NOTE]
> <span data-ttu-id="a6f7c-128">Добавление виртуальных машин занимает некоторое время, так не ожидается toobe дополнения hello мгновенно.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-128">Adding of VMs takes time, so do not expect hello additions toobe instantaneous.</span></span> <span data-ttu-id="a6f7c-129">Поэтому Планирование емкости tooadd также вовремя, tooallow более 10 минут перед hello емкость виртуальной Машины доступен для реплик hello / service разместить tooget экземпляров.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-129">So plan tooadd capacity well in time, tooallow for over 10 minutes before hello VM capacity is available for hello replicas/ service instances tooget placed.</span></span>
> 
> 

## <a name="manually-remove-vms-from-hello-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="a6f7c-130">Вручную удалите виртуальные машины из набор масштабирования hello основного узла типа или виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="a6f7c-130">Manually remove VMs from hello primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="a6f7c-131">Hello service fabric системные службы выполняются в hello тип основного узла кластера.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-131">hello service fabric system services run in hello Primary node type in your cluster.</span></span> <span data-ttu-id="a6f7c-132">Меньше, чем уровень надежности какие hello гарантирует так, чтобы никогда не завершена или масштабировать hello число экземпляров в, типы узлов.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-132">So should never shut down or scale down hello number of instances in that node types less than what hello reliability tier warrants.</span></span> <span data-ttu-id="a6f7c-133">См. слишком[hello сведения о надежности уровней здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-133">Refer too[hello details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 
> 
> 

<span data-ttu-id="a6f7c-134">Требуется tooexecute hello следующие шаги один экземпляр виртуальной Машины одновременно.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-134">You need tooexecute hello following steps one VM instance at a time.</span></span> <span data-ttu-id="a6f7c-135">Это позволяет для hello системных служб (и служб с отслеживанием состояния) toobe Мягкое отключение экземпляра виртуальной Машины hello, удалении и новых реплик, созданные на других узлах.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-135">This allows for hello system services (and your stateful services) toobe shut down gracefully on hello VM instance you are removing and new replicas created on other nodes.</span></span>

1. <span data-ttu-id="a6f7c-136">Запустите [Disable ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) с намерением «RemoveNode» toodisable hello узлом ты tooremove (hello наибольший экземпляр в этом типе узла).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-136">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ toodisable hello node you’re going tooremove (hello highest instance in that node type).</span></span>
2. <span data-ttu-id="a6f7c-137">Запустите [Get ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) toomake убедиться, что этот узел hello перешло на самом деле toodisabled.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-137">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) toomake sure that hello node has indeed transitioned toodisabled.</span></span> <span data-ttu-id="a6f7c-138">Если нет, подождите, пока узел hello отключен.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-138">If not, wait until hello node is disabled.</span></span> <span data-ttu-id="a6f7c-139">Эту операцию невозможно ускорить.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-139">You cannot hurry this step.</span></span>
3. <span data-ttu-id="a6f7c-140">Выполните образец hello/инструкции hello [коллекции шаблонов краткого](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) toochange hello число виртуальных машин на единицу при этом Nodetype.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-140">Follow hello sample/instructions in hello [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) toochange hello number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="a6f7c-141">удалить экземпляр Hello имеет наивысший ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-141">hello instance removed is hello highest VM instance.</span></span> 
4. <span data-ttu-id="a6f7c-142">Повторите шаги 1 – 3, при необходимости, но никогда не масштабировать hello число экземпляров в hello основного узла типы меньше, чем гарантирует, что какой уровень надежности hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-142">Repeat steps 1 through 3 as needed, but never scale down hello number of instances in hello primary node types less than what hello reliability tier warrants.</span></span> <span data-ttu-id="a6f7c-143">См. слишком[hello сведения о надежности уровней здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-143">Refer too[hello details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 

## <a name="manually-remove-vms-from-hello-non-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="a6f7c-144">Вручную удалите данные из hello дополнительный узел типа или виртуальная машина масштабный набор виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="a6f7c-144">Manually remove VMs from hello non-primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="a6f7c-145">Для службы с отслеживанием состояния требуется определенное количество узлов toobe всегда toomaintain доступности и сохранение состояния службы.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-145">For a stateful service, you need a certain number of nodes toobe always up toomaintain availability and preserve state of your service.</span></span> <span data-ttu-id="a6f7c-146">По крайней мере hello необходимо hello числом узлов равно toohello целевой реплики набора hello секции или службы.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-146">At hello very minimum, you need hello number of nodes equal toohello target replica set count of hello partition/service.</span></span> 
> 
> 

<span data-ttu-id="a6f7c-147">Требуется hello выполните следующие шаги один экземпляр виртуальной Машины одновременно hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-147">You need hello execute hello following steps one VM instance at a time.</span></span> <span data-ttu-id="a6f7c-148">Это обеспечивает hello системных служб (и служб с отслеживанием состояния) toobe надлежащего прекращения работы на hello экземпляра виртуальной Машины, которые удаляются и else where создания новых реплик.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-148">This allows for hello system services (and your stateful services) toobe shut down gracefully on hello VM instance you are removing and new replicas created else where.</span></span>

1. <span data-ttu-id="a6f7c-149">Запустите [Disable ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) с намерением «RemoveNode» toodisable hello узлом ты tooremove (hello наибольший экземпляр в этом типе узла).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-149">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ toodisable hello node you’re going tooremove (hello highest instance in that node type).</span></span>
2. <span data-ttu-id="a6f7c-150">Запустите [Get ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) toomake убедиться, что этот узел hello перешло на самом деле toodisabled.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-150">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) toomake sure that hello node has indeed transitioned toodisabled.</span></span> <span data-ttu-id="a6f7c-151">В противном случае дождитесь hello узлов отключено.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-151">If not wait till hello node is disabled.</span></span> <span data-ttu-id="a6f7c-152">Эту операцию невозможно ускорить.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-152">You cannot hurry this step.</span></span>
3. <span data-ttu-id="a6f7c-153">Выполните образец hello/инструкции hello [коллекции шаблонов краткого](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) toochange hello число виртуальных машин на единицу при этом Nodetype.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-153">Follow hello sample/instructions in hello [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) toochange hello number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="a6f7c-154">Сейчас будут удалены hello наибольший экземпляр виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-154">This will now remove hello highest VM instance.</span></span> 
4. <span data-ttu-id="a6f7c-155">Повторите шаги 1 – 3, при необходимости, но никогда не масштабировать hello число экземпляров в hello основного узла типы меньше, чем гарантирует, что какой уровень надежности hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-155">Repeat steps 1 through 3 as needed, but never scale down hello number of instances in hello primary node types less than what hello reliability tier warrants.</span></span> <span data-ttu-id="a6f7c-156">См. слишком[hello сведения о надежности уровней здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-156">Refer too[hello details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span>

## <a name="behaviors-you-may-observe-in-service-fabric-explorer"></a><span data-ttu-id="a6f7c-157">Возможные варианты поведения в обозревателе Service Fabric</span><span class="sxs-lookup"><span data-stu-id="a6f7c-157">Behaviors you may observe in Service Fabric Explorer</span></span>
<span data-ttu-id="a6f7c-158">При вертикальном масштабировании hello кластера Service Fabric Explorer отразят hello количество узлов (экземпляров набора масштабирования виртуальных машин), которые являются частью кластера hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-158">When you scale up a cluster hello Service Fabric Explorer will reflect hello number of nodes (Virtual Machine scale set instances) that are part of hello cluster.</span></span>  <span data-ttu-id="a6f7c-159">Тем не менее, при масштабировании кластера вниз вы увидите hello удалены узла или виртуальной Машины, отображаемый в неработоспособное состояние только при вызове [Remove ServiceFabricNodeState cmd](https://msdn.microsoft.com/library/mt125993.aspx) с именем hello соответствующего узла.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-159">However, when you scale a cluster down you will see hello removed node/VM instance displayed in an unhealthy state unless you call [Remove-ServiceFabricNodeState cmd](https://msdn.microsoft.com/library/mt125993.aspx) with hello appropriate node name.</span></span>   

<span data-ttu-id="a6f7c-160">Ниже приводится объяснение hello такого поведения.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-160">Here is hello explanation for this behavior.</span></span>

<span data-ttu-id="a6f7c-161">Hello узлов, упомянутых в обозреватель Service Fabric — это отражение какие hello Service Fabric системных служб (FM специально) знает о числе узлов hello кластера имели имеет hello.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-161">hello nodes listed in Service Fabric Explorer are a reflection of what hello Service Fabric system services (FM specifically) knows about hello number of nodes hello cluster had/has.</span></span> <span data-ttu-id="a6f7c-162">При масштабировании hello набор масштабирования виртуальных машин hello виртуальной Машины была удалена, но FM Системная служба по-прежнему полагает, что этот узел hello (которая была сопоставленных toohello виртуальной Машины, которая была удалена) будут возвращены.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-162">When you scale hello Virtual Machine scale set down, hello VM was deleted but FM system service still thinks that hello node (that was mapped toohello VM that was deleted) will come back.</span></span> <span data-ttu-id="a6f7c-163">Поэтому Service Fabric Explorer продолжается toodisplay этого узла (хотя hello состояние работоспособности может быть ошибка или unknown).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-163">So Service Fabric Explorer continues toodisplay that node (though hello health state may be error or unknown).</span></span>

<span data-ttu-id="a6f7c-164">В порядке toomake том, что узел удаляется при удалении виртуальной Машины у вас есть два варианта:</span><span class="sxs-lookup"><span data-stu-id="a6f7c-164">In order toomake sure that a node is removed when a VM is removed, you have two options:</span></span>

1) <span data-ttu-id="a6f7c-165">Выберите уровень устойчивости Gold или серебряный (доступных скоро) для hello типов узлов в кластере, которое позволяет hello интеграции инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-165">Choose a durability level of Gold or Silver (available soon) for hello node types in your cluster, which gives you hello infrastructure integration.</span></span> <span data-ttu-id="a6f7c-166">Которой затем автоматически удалит hello узлы из нашей службы (FM) состояние системы при уменьшать масштаб.</span><span class="sxs-lookup"><span data-stu-id="a6f7c-166">Which will then automatically remove hello nodes from our system services (FM) state when you scale down.</span></span>
<span data-ttu-id="a6f7c-167">См. слишком[hello сведения об уровнях устойчивость здесь](service-fabric-cluster-capacity.md)</span><span class="sxs-lookup"><span data-stu-id="a6f7c-167">Refer too[hello details on durability levels here](service-fabric-cluster-capacity.md)</span></span>

2) <span data-ttu-id="a6f7c-168">После усеченная hello экземпляр виртуальной Машины вам потребуется toocall hello [командлет Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-168">Once hello VM instance has been scaled down, you need toocall hello [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/mt125993.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="a6f7c-169">Службы структуры кластеры требуют определенного числа узлов toobe вверх на все время hello в порядке toomaintain доступности и сохранение состояния — ссылка tooas «поддержания кворума».</span><span class="sxs-lookup"><span data-stu-id="a6f7c-169">Service Fabric clusters require a certain number of nodes toobe up at all hello time in order toomaintain availability and preserve state - referred tooas "maintaining quorum."</span></span> <span data-ttu-id="a6f7c-170">Таким образом, она будет обычно небезопасных tooshut работу всех машин hello в кластере hello, пока вы выполнили сначала [полного резервного копирования состояния](service-fabric-reliable-services-backup-restore.md).</span><span class="sxs-lookup"><span data-stu-id="a6f7c-170">So, it is typically unsafe tooshut down all hello machines in hello cluster unless you have first performed a [full backup of your state](service-fabric-reliable-services-backup-restore.md).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="a6f7c-171">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a6f7c-171">Next steps</span></span>
<span data-ttu-id="a6f7c-172">После tooalso hello чтения сведения о планирование емкости кластера, обновлением кластера и секций служб:</span><span class="sxs-lookup"><span data-stu-id="a6f7c-172">Read hello following tooalso learn about planning cluster capacity, upgrading a cluster, and partitioning services:</span></span>

* [<span data-ttu-id="a6f7c-173">Планирование емкости кластера</span><span class="sxs-lookup"><span data-stu-id="a6f7c-173">Plan your cluster capacity</span></span>](service-fabric-cluster-capacity.md)
* [<span data-ttu-id="a6f7c-174">Обновления кластера</span><span class="sxs-lookup"><span data-stu-id="a6f7c-174">Cluster upgrades</span></span>](service-fabric-cluster-upgrade.md)
* [<span data-ttu-id="a6f7c-175">Секционирование служб с отслеживанием состояния для максимального масштабирования</span><span class="sxs-lookup"><span data-stu-id="a6f7c-175">Partition stateful services for maximum scale</span></span>](service-fabric-concepts-partitioning.md)

<!--Image references-->
[BrowseServiceFabricClusterResource]: ./media/service-fabric-cluster-scale-up-down/BrowseServiceFabricClusterResource.png
[ClusterResources]: ./media/service-fabric-cluster-scale-up-down/ClusterResources.png
