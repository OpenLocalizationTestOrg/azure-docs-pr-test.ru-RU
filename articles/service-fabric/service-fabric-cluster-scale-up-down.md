---
title: "Масштабирование кластера Service Fabric | Документация Майкрософт"
description: "Масштабирование кластера Service Fabric путем настройки правил автомасштабирования для каждого типа узла или масштабируемого набора виртуальных машин. Добавление узлов в кластер Service Fabric"
services: service-fabric
documentationcenter: .net
author: ChackDan
manager: timlt
editor: 
ms.assetid: aeb76f63-7303-4753-9c64-46146340b83d
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 06/22/2017
ms.author: chackdan
ms.openlocfilehash: 32d8fca81c20e77db4ed3aae05d017ccc2ce1be3
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="scale-a-service-fabric-cluster-in-or-out-using-auto-scale-rules"></a><span data-ttu-id="36a28-104">Масштабирование кластера Service Fabric с помощью правил автомасштабирования</span><span class="sxs-lookup"><span data-stu-id="36a28-104">Scale a Service Fabric cluster in or out using auto-scale rules</span></span>
<span data-ttu-id="36a28-105">Наборы масштабирования виртуальных машин относятся к вычислительным ресурсам Azure. Их можно использовать для развертывания коллекции виртуальных машин и управления ею как набором.</span><span class="sxs-lookup"><span data-stu-id="36a28-105">Virtual machine scale sets are an Azure compute resource that you can use to deploy and manage a collection of virtual machines as a set.</span></span> <span data-ttu-id="36a28-106">Каждый тип узла, определенный в кластере Service Fabric, настроен как отдельный масштабируемый набор виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="36a28-106">Every node type that is defined in a Service Fabric cluster is set up as a separate Virtual Machine scale set.</span></span> <span data-ttu-id="36a28-107">Каждый тип узла поддерживает возможность независимого масштабирования, имеет разные наборы открытых портов и собственные метрики емкости.</span><span class="sxs-lookup"><span data-stu-id="36a28-107">Each node type can then be scaled in or out independently, have different sets of ports open, and can have different capacity metrics.</span></span> <span data-ttu-id="36a28-108">Дополнительные сведения о типах узлов Service Fabric см. в этом [документе](service-fabric-cluster-nodetypes.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-108">Read more about it in the [Service Fabric nodetypes](service-fabric-cluster-nodetypes.md) document.</span></span> <span data-ttu-id="36a28-109">Так как типы узлов Service Fabric в вашем кластере состоят из масштабируемых наборов виртуальных машин на сервере, для каждого типа узлов или масштабируемого набора необходимо настроить правила автомасштабирования.</span><span class="sxs-lookup"><span data-stu-id="36a28-109">Since the Service Fabric node types in your cluster are made of Virtual Machine scale sets at the backend, you need to set up auto-scale rules for each node type/Virtual Machine scale set.</span></span>

> [!NOTE]
> <span data-ttu-id="36a28-110">Ваша подписка должна включать в себя достаточное количество ядер для добавления виртуальных машин IaaS, которые войдут в состав этого кластера.</span><span class="sxs-lookup"><span data-stu-id="36a28-110">Your subscription must have enough cores to add the new VMs that make up this cluster.</span></span> <span data-ttu-id="36a28-111">В настоящее время проверка модели не предусмотрена, поэтому в случае, если лимиты квоты будут нарушены, во время развертывания произойдет сбой.</span><span class="sxs-lookup"><span data-stu-id="36a28-111">There is no model validation currently, so you get a deployment time failure, if any of the quota limits are hit.</span></span>
> 
> 

## <a name="choose-the-node-typevirtual-machine-scale-set-to-scale"></a><span data-ttu-id="36a28-112">Выбор типа узла или масштабируемого набора виртуальных машин для масштабирования</span><span class="sxs-lookup"><span data-stu-id="36a28-112">Choose the node type/Virtual Machine scale set to scale</span></span>
<span data-ttu-id="36a28-113">В настоящее время настроить правила автомасштабирования для масштабируемых наборов виртуальных машин с помощью портала нельзя, поэтому мы используем Azure PowerShell (версии 1.0 или более поздней), чтобы получить список типов узлов и добавить к ним правила автомасштабирования.</span><span class="sxs-lookup"><span data-stu-id="36a28-113">Currently, you are not able to specify the auto-scale rules for Virtual Machine scale sets using the portal, so let us use Azure PowerShell (1.0+) to list the node types and then add auto-scale rules to them.</span></span>

<span data-ttu-id="36a28-114">Чтобы получить список масштабируемых наборов виртуальных машин в составе кластера, выполните следующие командлеты:</span><span class="sxs-lookup"><span data-stu-id="36a28-114">To get the list of Virtual Machine scale set that make up your cluster, run the following cmdlets:</span></span>

```powershell
Get-AzureRmResource -ResourceGroupName <RGname> -ResourceType Microsoft.Compute/VirtualMachineScaleSets

Get-AzureRmVmss -ResourceGroupName <RGname> -VMScaleSetName <Virtual Machine scale set name>
```

## <a name="set-auto-scale-rules-for-the-node-typevirtual-machine-scale-set"></a><span data-ttu-id="36a28-115">Настройка правил автомасштабирования для типа узлов или масштабируемого набора виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="36a28-115">Set auto-scale rules for the node type/Virtual Machine scale set</span></span>
<span data-ttu-id="36a28-116">Если кластер содержит несколько типов узлов, то эту процедуру необходимо выполнить для каждого типа узла или масштабируемого набора виртуальных машин, который нужно масштабировать.</span><span class="sxs-lookup"><span data-stu-id="36a28-116">If your cluster has multiple node types, then repeat this for each node types/Virtual Machine scale sets that you want to scale (in or out).</span></span> <span data-ttu-id="36a28-117">Перед настройкой автомасштабирования обратите внимание на необходимое количество узлов.</span><span class="sxs-lookup"><span data-stu-id="36a28-117">Take into account the number of nodes that you must have before you set up auto-scaling.</span></span> <span data-ttu-id="36a28-118">Минимальное количество узлов, необходимое для основного типа узлов, зависит от выбранного уровня надежности.</span><span class="sxs-lookup"><span data-stu-id="36a28-118">The minimum number of nodes that you must have for the primary node type is driven by the reliability level you have chosen.</span></span> <span data-ttu-id="36a28-119">См. дополнительные сведения об [уровнях надежности](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-119">Read more about [reliability levels](service-fabric-cluster-capacity.md).</span></span>

> [!NOTE]
> <span data-ttu-id="36a28-120">Уменьшение масштаба типа первичного узла до уровня ниже минимального приведет к нестабильности или сбою кластера.</span><span class="sxs-lookup"><span data-stu-id="36a28-120">Scaling down the primary node type to less than the minimum number make the cluster unstable or bring it down.</span></span> <span data-ttu-id="36a28-121">Это может вызвать потерю данных в приложениях или системных службах.</span><span class="sxs-lookup"><span data-stu-id="36a28-121">This could result in data loss for your applications and for the system services.</span></span>
> 
> 

<span data-ttu-id="36a28-122">В настоящее время функция автомасштабирования не зависит от уровня нагрузки, который приложения сообщают Service Fabric.</span><span class="sxs-lookup"><span data-stu-id="36a28-122">Currently the auto-scale feature is not driven by the loads that your applications may be reporting to Service Fabric.</span></span> <span data-ttu-id="36a28-123">В связи с этим автомасштабирование регулируется исключительно счетчиками производительности, которые отправляются каждым экземпляром масштабируемых наборов виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="36a28-123">So at this time the auto-scale you get is purely driven by the performance counters that are emitted by each of the Virtual Machine scale set instances.</span></span>  

<span data-ttu-id="36a28-124">Настройте автомасштабирование для каждого масштабируемого набора виртуальных машин согласно [этим инструкциям](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-124">Follow these instructions [to set up auto-scale for each Virtual Machine scale set](../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="36a28-125">Если тип узла имеет уровень надежности Gold или Silver, то в сценарии уменьшения масштаба необходимо вызывать [командлет Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/azure/mt125993.aspx) с именем соответствующего узла.</span><span class="sxs-lookup"><span data-stu-id="36a28-125">In a scale down scenario, unless your node type has a durability level of Gold or Silver you need to call the [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/azure/mt125993.aspx) with the appropriate node name.</span></span>
> 
> 

## <a name="manually-add-vms-to-a-node-typevirtual-machine-scale-set"></a><span data-ttu-id="36a28-126">Добавление виртуальных машин к типу узла или в масштабируемый набор виртуальных машин вручную</span><span class="sxs-lookup"><span data-stu-id="36a28-126">Manually add VMs to a node type/Virtual Machine scale set</span></span>
<span data-ttu-id="36a28-127">Выберите пример из [коллекции шаблонов быстрого запуска](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) и следуйте прилагающимся инструкциям, чтобы изменить число виртуальных машин в каждом типе узла.</span><span class="sxs-lookup"><span data-stu-id="36a28-127">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs in each Nodetype.</span></span> 

> [!NOTE]
> <span data-ttu-id="36a28-128">Добавление виртуальных машин занимает некоторое время, поэтому не ожидайте, что они будут добавлены мгновенно.</span><span class="sxs-lookup"><span data-stu-id="36a28-128">Adding of VMs takes time, so do not expect the additions to be instantaneous.</span></span> <span data-ttu-id="36a28-129">Поэтому правильно планируйте временные рамки добавления емкости и учитывайте, что прежде чем емкость виртуальной машины станет доступна для размещения реплик или экземпляров службы, пройдет не меньше 10 минут.</span><span class="sxs-lookup"><span data-stu-id="36a28-129">So plan to add capacity well in time, to allow for over 10 minutes before the VM capacity is available for the replicas/ service instances to get placed.</span></span>
> 
> 

## <a name="manually-remove-vms-from-the-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="36a28-130">Удаление виртуальных машин из основного типа узла или масштабируемого набора виртуальных машин вручную</span><span class="sxs-lookup"><span data-stu-id="36a28-130">Manually remove VMs from the primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="36a28-131">Системные службы Service Fabric запускаются в кластере на узле первичного типа.</span><span class="sxs-lookup"><span data-stu-id="36a28-131">The service fabric system services run in the Primary node type in your cluster.</span></span> <span data-ttu-id="36a28-132">Поэтому никогда не следует уменьшать число экземпляров узлов этих типов до значения меньше гарантируемого уровнем надежности, завершая работу этих узлов или уменьшая масштаб кластера.</span><span class="sxs-lookup"><span data-stu-id="36a28-132">So should never shut down or scale down the number of instances in that node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="36a28-133">Ознакомьтесь с дополнительными сведениями об уровнях надежности [здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-133">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 
> 
> 

<span data-ttu-id="36a28-134">Необходимо выполнить следующие шаги с одним экземпляром виртуальной машины за раз.</span><span class="sxs-lookup"><span data-stu-id="36a28-134">You need to execute the following steps one VM instance at a time.</span></span> <span data-ttu-id="36a28-135">Это позволит корректно завершить работу системных служб (и ваших служб с отслеживанием состояния) на удаляемом экземпляре виртуальной машины и создать новые реплики на других узлах.</span><span class="sxs-lookup"><span data-stu-id="36a28-135">This allows for the system services (and your stateful services) to be shut down gracefully on the VM instance you are removing and new replicas created on other nodes.</span></span>

1. <span data-ttu-id="36a28-136">Выполните [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) с намерением RemoveNode для отключения узла, который вы собираетесь удалить (самый верхний экземпляр в этом типе узла).</span><span class="sxs-lookup"><span data-stu-id="36a28-136">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ to disable the node you’re going to remove (the highest instance in that node type).</span></span>
2. <span data-ttu-id="36a28-137">Выполните [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) , чтобы убедиться в том, что узел действительно перешел в отключенное состояние.</span><span class="sxs-lookup"><span data-stu-id="36a28-137">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) to make sure that the node has indeed transitioned to disabled.</span></span> <span data-ttu-id="36a28-138">Если это не так, подождите, пока узел не будет отключен.</span><span class="sxs-lookup"><span data-stu-id="36a28-138">If not, wait until the node is disabled.</span></span> <span data-ttu-id="36a28-139">Эту операцию невозможно ускорить.</span><span class="sxs-lookup"><span data-stu-id="36a28-139">You cannot hurry this step.</span></span>
3. <span data-ttu-id="36a28-140">Выберите пример из [коллекции шаблонов быстрого запуска](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) и следуйте прилагающимся инструкциям, чтобы изменить число виртуальных машин на одну в этом типе узла.</span><span class="sxs-lookup"><span data-stu-id="36a28-140">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="36a28-141">Удаляется самый верхний экземпляр виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="36a28-141">The instance removed is the highest VM instance.</span></span> 
4. <span data-ttu-id="36a28-142">При необходимости повторите шаги 1–3, но никогда не следует уменьшать число экземпляров в типах первичных узлов до значения меньше гарантируемого уровнем надежности.</span><span class="sxs-lookup"><span data-stu-id="36a28-142">Repeat steps 1 through 3 as needed, but never scale down the number of instances in the primary node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="36a28-143">Ознакомьтесь с дополнительными сведениями об уровнях надежности [здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-143">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span> 

## <a name="manually-remove-vms-from-the-non-primary-node-typevirtual-machine-scale-set"></a><span data-ttu-id="36a28-144">Удаление виртуальных машин из неосновного типа узла или масштабируемого набора виртуальных машин вручную</span><span class="sxs-lookup"><span data-stu-id="36a28-144">Manually remove VMs from the non-primary node type/Virtual Machine scale set</span></span>
> [!NOTE]
> <span data-ttu-id="36a28-145">Для службы с отслеживанием состояния необходимо определенное количество узлов, которые постоянно доступны и работают, чтобы поддерживать доступность этой службы и сохранять ее состояние.</span><span class="sxs-lookup"><span data-stu-id="36a28-145">For a stateful service, you need a certain number of nodes to be always up to maintain availability and preserve state of your service.</span></span> <span data-ttu-id="36a28-146">Требуется как минимум количество узлов, равное количеству целевых наборов реплик секции или службы.</span><span class="sxs-lookup"><span data-stu-id="36a28-146">At the very minimum, you need the number of nodes equal to the target replica set count of the partition/service.</span></span> 
> 
> 

<span data-ttu-id="36a28-147">Необходимо выполнить следующие шаги с одним экземпляром виртуальной машины за раз.</span><span class="sxs-lookup"><span data-stu-id="36a28-147">You need the execute the following steps one VM instance at a time.</span></span> <span data-ttu-id="36a28-148">Это позволит корректно завершить работу системных служб (и ваших служб с отслеживанием состояния) на удаляемом экземпляре виртуальной машины и создать новые реплики в других расположениях.</span><span class="sxs-lookup"><span data-stu-id="36a28-148">This allows for the system services (and your stateful services) to be shut down gracefully on the VM instance you are removing and new replicas created else where.</span></span>

1. <span data-ttu-id="36a28-149">Выполните [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) с намерением RemoveNode для отключения узла, который вы собираетесь удалить (самый верхний экземпляр в этом типе узла).</span><span class="sxs-lookup"><span data-stu-id="36a28-149">Run [Disable-ServiceFabricNode](https://msdn.microsoft.com/library/mt125852.aspx) with intent ‘RemoveNode’ to disable the node you’re going to remove (the highest instance in that node type).</span></span>
2. <span data-ttu-id="36a28-150">Выполните [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) , чтобы убедиться в том, что узел действительно перешел в отключенное состояние.</span><span class="sxs-lookup"><span data-stu-id="36a28-150">Run [Get-ServiceFabricNode](https://msdn.microsoft.com/library/mt125856.aspx) to make sure that the node has indeed transitioned to disabled.</span></span> <span data-ttu-id="36a28-151">Если это не так, подождите, пока узел не отключится.</span><span class="sxs-lookup"><span data-stu-id="36a28-151">If not wait till the node is disabled.</span></span> <span data-ttu-id="36a28-152">Эту операцию невозможно ускорить.</span><span class="sxs-lookup"><span data-stu-id="36a28-152">You cannot hurry this step.</span></span>
3. <span data-ttu-id="36a28-153">Выберите пример из [коллекции шаблонов быстрого запуска](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) и следуйте прилагающимся инструкциям, чтобы изменить число виртуальных машин на одну в этом типе узла.</span><span class="sxs-lookup"><span data-stu-id="36a28-153">Follow the sample/instructions in the [quick start template gallery](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vmss-scale-existing) to change the number of VMs by one in that Nodetype.</span></span> <span data-ttu-id="36a28-154">Будет удален самый верхний экземпляр виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="36a28-154">This will now remove the highest VM instance.</span></span> 
4. <span data-ttu-id="36a28-155">При необходимости повторите шаги 1–3, но никогда не следует уменьшать число экземпляров в типах первичных узлов до значения меньше гарантируемого уровнем надежности.</span><span class="sxs-lookup"><span data-stu-id="36a28-155">Repeat steps 1 through 3 as needed, but never scale down the number of instances in the primary node types less than what the reliability tier warrants.</span></span> <span data-ttu-id="36a28-156">Ознакомьтесь с дополнительными сведениями об уровнях надежности [здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-156">Refer to [the details on reliability tiers here](service-fabric-cluster-capacity.md).</span></span>

## <a name="behaviors-you-may-observe-in-service-fabric-explorer"></a><span data-ttu-id="36a28-157">Возможные варианты поведения в обозревателе Service Fabric</span><span class="sxs-lookup"><span data-stu-id="36a28-157">Behaviors you may observe in Service Fabric Explorer</span></span>
<span data-ttu-id="36a28-158">При вертикальном масштабировании кластера в Service Fabric Explorer отражается число узлов (экземпляров масштабируемых наборов виртуальных машин), которые входят в кластер.</span><span class="sxs-lookup"><span data-stu-id="36a28-158">When you scale up a cluster the Service Fabric Explorer will reflect the number of nodes (Virtual Machine scale set instances) that are part of the cluster.</span></span>  <span data-ttu-id="36a28-159">Тем не менее при уменьшении масштаба кластера удаленный узел или экземпляр виртуальной машины будет отображаться как неработоспособный, если не вызвать [командлет Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx) с именем соответствующего узла.</span><span class="sxs-lookup"><span data-stu-id="36a28-159">However, when you scale a cluster down you will see the removed node/VM instance displayed in an unhealthy state unless you call [Remove-ServiceFabricNodeState cmd](https://msdn.microsoft.com/library/mt125993.aspx) with the appropriate node name.</span></span>   

<span data-ttu-id="36a28-160">Вот как объясняется это поведение.</span><span class="sxs-lookup"><span data-stu-id="36a28-160">Here is the explanation for this behavior.</span></span>

<span data-ttu-id="36a28-161">Узлы, перечисленные в Service Fabric Explorer, отражают то, что системным службам Service Fabric (в частности FM) известно о числе узлов в кластере.</span><span class="sxs-lookup"><span data-stu-id="36a28-161">The nodes listed in Service Fabric Explorer are a reflection of what the Service Fabric system services (FM specifically) knows about the number of nodes the cluster had/has.</span></span> <span data-ttu-id="36a28-162">При уменьшении масштабируемого набора виртуальных машин виртуальная машина удаляется, но системная служба FM по-прежнему считает, что узел (который был сопоставлен с удаленной виртуальной машиной) вернется.</span><span class="sxs-lookup"><span data-stu-id="36a28-162">When you scale the Virtual Machine scale set down, the VM was deleted but FM system service still thinks that the node (that was mapped to the VM that was deleted) will come back.</span></span> <span data-ttu-id="36a28-163">В связи с этим Service Fabric Explorer продолжает отображать этот узел (хотя состояние работоспособности может быть ошибочным или неизвестным).</span><span class="sxs-lookup"><span data-stu-id="36a28-163">So Service Fabric Explorer continues to display that node (though the health state may be error or unknown).</span></span>

<span data-ttu-id="36a28-164">Проверить удаление узла при удалении виртуальной машины можно двумя способами:</span><span class="sxs-lookup"><span data-stu-id="36a28-164">In order to make sure that a node is removed when a VM is removed, you have two options:</span></span>

1) <span data-ttu-id="36a28-165">Выбрать уровень надежности Gold или Silver (будет доступно в ближайшее время) для типов узлов в кластере — это обеспечит интеграцию инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="36a28-165">Choose a durability level of Gold or Silver (available soon) for the node types in your cluster, which gives you the infrastructure integration.</span></span> <span data-ttu-id="36a28-166">При уменьшении масштаба узлы будут удаляться из состояния системных служб (FM) автоматически.</span><span class="sxs-lookup"><span data-stu-id="36a28-166">Which will then automatically remove the nodes from our system services (FM) state when you scale down.</span></span>
<span data-ttu-id="36a28-167">Дополнительные сведения об уровнях надежности см. [здесь](service-fabric-cluster-capacity.md).</span><span class="sxs-lookup"><span data-stu-id="36a28-167">Refer to [the details on durability levels here](service-fabric-cluster-capacity.md)</span></span>

2) <span data-ttu-id="36a28-168">После уменьшения масштаба экземпляра виртуальной машины необходимо вызвать [командлет Remove-ServiceFabricNodeState](https://msdn.microsoft.com/library/mt125993.aspx).</span><span class="sxs-lookup"><span data-stu-id="36a28-168">Once the VM instance has been scaled down, you need to call the [Remove-ServiceFabricNodeState cmdlet](https://msdn.microsoft.com/library/mt125993.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="36a28-169">Для постоянной работы кластеров Service Fabric требуется определенное количество узлов, чтобы все время поддерживать доступность и сохранять состояние, которое называется "поддержание кворума".</span><span class="sxs-lookup"><span data-stu-id="36a28-169">Service Fabric clusters require a certain number of nodes to be up at all the time in order to maintain availability and preserve state - referred to as "maintaining quorum."</span></span> <span data-ttu-id="36a28-170">Поэтому обычно не рекомендуется завершать работу всех компьютеров в кластере, пока не будет выполнена [полная архивация состояния](service-fabric-reliable-services-backup-restore.md), так как это может быть небезопасно.</span><span class="sxs-lookup"><span data-stu-id="36a28-170">So, it is typically unsafe to shut down all the machines in the cluster unless you have first performed a [full backup of your state](service-fabric-reliable-services-backup-restore.md).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="36a28-171">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="36a28-171">Next steps</span></span>
<span data-ttu-id="36a28-172">Дополнительные сведения о планировании емкости кластера, обновлении кластера и секционировании служб см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="36a28-172">Read the following to also learn about planning cluster capacity, upgrading a cluster, and partitioning services:</span></span>

* [<span data-ttu-id="36a28-173">Планирование емкости кластера</span><span class="sxs-lookup"><span data-stu-id="36a28-173">Plan your cluster capacity</span></span>](service-fabric-cluster-capacity.md)
* [<span data-ttu-id="36a28-174">Обновления кластера</span><span class="sxs-lookup"><span data-stu-id="36a28-174">Cluster upgrades</span></span>](service-fabric-cluster-upgrade.md)
* [<span data-ttu-id="36a28-175">Секционирование служб с отслеживанием состояния для максимального масштабирования</span><span class="sxs-lookup"><span data-stu-id="36a28-175">Partition stateful services for maximum scale</span></span>](service-fabric-concepts-partitioning.md)

<!--Image references-->
[BrowseServiceFabricClusterResource]: ./media/service-fabric-cluster-scale-up-down/BrowseServiceFabricClusterResource.png
[ClusterResources]: ./media/service-fabric-cluster-scale-up-down/ClusterResources.png
