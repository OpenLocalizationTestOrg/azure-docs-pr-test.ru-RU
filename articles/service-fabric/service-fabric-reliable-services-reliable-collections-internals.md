---
title: "внутренние компоненты диспетчер состояния надежного структуры службы и надежного коллекции aaaAzure | Документы Microsoft"
description: "Углубленное рассмотрение концепции и проектирования надежных коллекций в Azure Service Fabric."
services: service-fabric
documentationcenter: .net
author: mcoskun
manager: timlt
editor: rajak
ms.assetid: 62857523-604b-434e-bd1c-2141ea4b00d1
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: required
ms.date: 5/1/2017
ms.author: mcoskun
ms.openlocfilehash: 651bfb52785a2475e4840cd471e87220d1936391
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-service-fabric-reliable-state-manager-and-reliable-collection-internals"></a>Внутренние компоненты диспетчера надежных состояний и надежных коллекций Azure Service Fabric
В этом документе углубляется внутри надежного диспетчер состояния и надежного коллекции toosee как основные компоненты работают в фоновом hello.

> [!NOTE]
> Этот документ находится на стадии разработки. Добавьте комментарии toothis статью tootell нам теме хотелось бы Дополнительные сведения о toolearn.
>

##  <a name="local-persistence-model-log-and-checkpoint"></a>Модель локальной сохраняемости: журнал и контрольная точка
Hello надежного диспетчер состояния и надежного коллекций следуйте сохраняемости модель, которая называется журналов и контрольных точек.
В этой модели каждое изменение состояния сначала регистрируется на диске, а затем применяется в памяти.
Hello завершения самого сохраняется состояние лишь время от времени (так) контрольная точка).
Hello преимущество в том, что дельты, преобразуются в дополняющие записи на диск для повышения производительности.

toobetter понять hello журнала и модели контрольная точка, давайте сначала посмотрим сценарий бесконечный дисков hello.
Прежде чем они реплицируются Hello надежного диспетчер состояния заносит в журнал каждой операции.
Ведение журнала позволяет hello надежного коллекций tooapply hello операцию только в памяти.
Поскольку журналы, сохраняются, и даже в том случае, когда hello реплики завершается ошибкой и перезапуска toobe hello надежного диспетчер состояний имеет достаточно сведений в его tooreplay журнала всех операций hello, потерял hello реплики.
Как диск hello является бесконечным, записи журнала не требуется удалить toobe и hello надежного коллекции должен toomanage только hello в оперативной памяти.

Теперь давайте рассмотрим сценарий конечное дисков hello.
Записи журнала накапливаются, hello надежного диспетчер состояния запустите как недостаточно места на диске.
Прежде чем это произойдет, hello надежного диспетчер состояния должен tootruncate комнаты toomake журнала для новых записей hello.
Запросы диспетчера состояний надежное hello надежного коллекций toocheckpoint toodisk их состояние в памяти.
На этом этапе hello надежного коллекций будет сохранять свое состояние в памяти.
После завершения их контрольные точки надежного коллекций hello hello надежного диспетчер состояния можно усечь toofree журнала hello места на диске.
Когда hello реплике потребуется перезапустить toobe, надежные коллекций восстановить свое состояние контрольными точками и hello надежного диспетчер состояния восстанавливает воспроизводит все изменения состояния hello, произошедших с момента последней контрольной точки hello.

Еще одно преимущество создания контрольных точек состоит в том, что в типичных сценариях они сокращают время восстановления. Журнал содержит все операции, которые произошли с момента последней контрольной точки hello.
Поэтому он может включать несколько версий элемента, например несколько значений для конкретной строки в надежном словаре.
Напротив контрольные точки надежного коллекции hello только последнюю версию каждого значения для ключа.

## <a name="next-steps"></a>Дальнейшие действия
* [Транзакции и блокировки](service-fabric-reliable-services-reliable-collections-transactions-locks.md)

