---
title: "Архитектура диспетчера aaaResource | Документы Microsoft"
description: "Общие сведения об архитектуре диспетчера кластерных ресурсов Service Fabric."
services: service-fabric
documentationcenter: .net
author: masnider
manager: timlt
editor: 
ms.assetid: 6c4421f9-834b-450c-939f-1cb4ff456b9b
ms.service: Service-Fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/18/2017
ms.author: masnider
ms.openlocfilehash: 9ea80273d0566a2ac25143ada3662875656b57b8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="cluster-resource-manager-architecture-overview"></a><span data-ttu-id="ebec0-103">Общие сведения об архитектуре диспетчера кластерных ресурсов</span><span class="sxs-lookup"><span data-stu-id="ebec0-103">Cluster resource manager architecture overview</span></span>
<span data-ttu-id="ebec0-104">Диспетчер ресурсов кластера Service Fabric Hello является центральной службы, которая запущена на кластере hello.</span><span class="sxs-lookup"><span data-stu-id="ebec0-104">hello Service Fabric Cluster Resource Manager is a central service that runs in hello cluster.</span></span> <span data-ttu-id="ebec0-105">Он управляет hello требуемого состояния служб hello в кластере hello, особенно в отношении tooresource потребления и какие-либо правила размещения.</span><span class="sxs-lookup"><span data-stu-id="ebec0-105">It manages hello desired state of hello services in hello cluster, particularly with respect tooresource consumption and any placement rules.</span></span> 

<span data-ttu-id="ebec0-106">toomanage hello ресурсы кластера, диспетчер ресурсов кластера Service Fabric hello должен иметь несколько видов информации:</span><span class="sxs-lookup"><span data-stu-id="ebec0-106">toomanage hello resources in your cluster, hello Service Fabric Cluster Resource Manager must have several pieces of information:</span></span>

- <span data-ttu-id="ebec0-107">какие службы в настоящее время существуют;</span><span class="sxs-lookup"><span data-stu-id="ebec0-107">Which services currently exist</span></span>
- <span data-ttu-id="ebec0-108">текущее (или стандартное) потребление ресурсов каждой службой;</span><span class="sxs-lookup"><span data-stu-id="ebec0-108">Each service's current (or default) resource consumption</span></span> 
- <span data-ttu-id="ebec0-109">Оставшаяся емкость кластера Hello</span><span class="sxs-lookup"><span data-stu-id="ebec0-109">hello remaining cluster capacity</span></span> 
- <span data-ttu-id="ebec0-110">емкость Hello hello узлов в кластере hello</span><span class="sxs-lookup"><span data-stu-id="ebec0-110">hello capacity of hello nodes in hello cluster</span></span> 
- <span data-ttu-id="ebec0-111">Hello объем ресурсов, потребляемых на каждом узле</span><span class="sxs-lookup"><span data-stu-id="ebec0-111">hello amount of resources consumed on each node</span></span>

<span data-ttu-id="ebec0-112">потребления ресурсов Hello данной службе могут со временем измениться, а службы обычно важна более чем один тип ресурса.</span><span class="sxs-lookup"><span data-stu-id="ebec0-112">hello resource consumption of a given service can change over time, and services usually care about more than one type of resource.</span></span> <span data-ttu-id="ebec0-113">В разных службах могут учитываться как реальные физические, так и логические ресурсы.</span><span class="sxs-lookup"><span data-stu-id="ebec0-113">Across different services, there may be both real physical and physical resources being measured.</span></span> <span data-ttu-id="ebec0-114">Например, службы контролируют такие физические показатели, как потребление памяти и места на диске.</span><span class="sxs-lookup"><span data-stu-id="ebec0-114">Services may track physical metrics like memory and disk consumption.</span></span> <span data-ttu-id="ebec0-115">Но еще чаще их интересуют логические метрики, например WorkQueueDepth (Длина очереди заданий) или TotalRequests (Общее количество запросов).</span><span class="sxs-lookup"><span data-stu-id="ebec0-115">More commonly, services may care about logical metrics - things like "WorkQueueDepth" or "TotalRequests".</span></span> <span data-ttu-id="ebec0-116">Логический и физический метрики, которые могут использоваться в hello одного кластера.</span><span class="sxs-lookup"><span data-stu-id="ebec0-116">Both logical and physical metrics can be used in hello same cluster.</span></span> <span data-ttu-id="ebec0-117">Метрики могут совместно использоваться различными службами или быть конкретных tooa конкретной службы.</span><span class="sxs-lookup"><span data-stu-id="ebec0-117">Metrics can be shared across many services or be specific tooa particular service.</span></span>

## <a name="other-considerations"></a><span data-ttu-id="ebec0-118">Дополнительные рекомендации</span><span class="sxs-lookup"><span data-stu-id="ebec0-118">Other considerations</span></span>
<span data-ttu-id="ebec0-119">Hello владельцев и операторы hello кластера может отличаться от hello авторы службы и приложения, или на минимальное являются hello же носить ролей пользователей.</span><span class="sxs-lookup"><span data-stu-id="ebec0-119">hello owners and operators of hello cluster can be different from hello service and application authors, or at a minimum are hello same people wearing different hats.</span></span> <span data-ttu-id="ebec0-120">При разработке приложения вам известно, что для него требуется.</span><span class="sxs-lookup"><span data-stu-id="ebec0-120">When you develop your application you know a few things about what it requires.</span></span> <span data-ttu-id="ebec0-121">У вас есть оценки из hello следует развертывать ресурсы, будет использована и как разные службы.</span><span class="sxs-lookup"><span data-stu-id="ebec0-121">You have an estimate of hello resources it will consume and how different services should be deployed.</span></span> <span data-ttu-id="ebec0-122">Например hello веб-уровень должен toorun на узлы, которые предоставляются toohello Интернета, пока не должны hello базы данных служб.</span><span class="sxs-lookup"><span data-stu-id="ebec0-122">For example, hello web tier needs toorun on nodes exposed toohello Internet, while hello database services should not.</span></span> <span data-ttu-id="ebec0-123">Другой пример: hello веб-службы, возможно, ограничены ЦП и сети, при hello данных уровня службы заниматься более потребление памяти и диска.</span><span class="sxs-lookup"><span data-stu-id="ebec0-123">As another example, hello web services are probably constrained by CPU and network, while hello data tier services care more about memory and disk consumption.</span></span> <span data-ttu-id="ebec0-124">Однако обработка инцидента live сайта для этой службы в производственной среде или службой обновления toohello кто управляет пользователь hello toodo другое задание, а требует различных средств.</span><span class="sxs-lookup"><span data-stu-id="ebec0-124">However, hello person handling a live-site incident for that service in production, or who is managing an upgrade toohello service has a different job toodo, and requires different tools.</span></span> 

<span data-ttu-id="ebec0-125">Hello кластеров и службы являются динамическими:</span><span class="sxs-lookup"><span data-stu-id="ebec0-125">Both hello cluster and services are dynamic:</span></span>

- <span data-ttu-id="ebec0-126">может увеличиваться или уменьшаться Hello количество узлов в кластере hello</span><span class="sxs-lookup"><span data-stu-id="ebec0-126">hello number of nodes in hello cluster can grow and shrink</span></span>
- <span data-ttu-id="ebec0-127">могут добавляться и исчезать узлы различных размеров и типов;</span><span class="sxs-lookup"><span data-stu-id="ebec0-127">Nodes of different sizes and types can come and go</span></span>
- <span data-ttu-id="ebec0-128">службы могут создаваться и перемещаться, а также для них могут меняться потребности в выделяемых ресурсах и правила размещения;</span><span class="sxs-lookup"><span data-stu-id="ebec0-128">Services can be created, removed, and change their desired resource allocations and placement rules</span></span>
- <span data-ttu-id="ebec0-129">Обновление или другие операции управления выполнить откат через hello кластер приложения hello на уровнях инфраструктуры</span><span class="sxs-lookup"><span data-stu-id="ebec0-129">Upgrades or other management operations can roll through hello cluster at hello application on infrastructure levels</span></span>
- <span data-ttu-id="ebec0-130">Сбои могут происходить в любое время.</span><span class="sxs-lookup"><span data-stu-id="ebec0-130">Failures can happen at any time.</span></span>

## <a name="cluster-resource-manager-components-and-data-flow"></a><span data-ttu-id="ebec0-131">Компоненты и поток данных диспетчера кластерных ресурсов</span><span class="sxs-lookup"><span data-stu-id="ebec0-131">Cluster resource manager components and data flow</span></span>
<span data-ttu-id="ebec0-132">Hello диспетчер ресурсов кластера имеет требования hello tootrack каждой службы и hello потребления ресурсов, каждый объект службы в пределах этих служб.</span><span class="sxs-lookup"><span data-stu-id="ebec0-132">hello Cluster Resource Manager has tootrack hello requirements of each service and hello consumption of resources by each service object within those services.</span></span> <span data-ttu-id="ebec0-133">Hello диспетчер ресурсов кластера имеет две основные части: агентов, работающих на каждом узле и отказоустойчивой службы.</span><span class="sxs-lookup"><span data-stu-id="ebec0-133">hello Cluster Resource Manager has two conceptual parts: agents that run on each node and a fault-tolerant service.</span></span> <span data-ttu-id="ebec0-134">агенты Hello при каждой загрузке отслеживания узел сообщает из служб, статистические и периодически сообщает о них.</span><span class="sxs-lookup"><span data-stu-id="ebec0-134">hello agents on each node track load reports from services, aggregate them, and periodically report them.</span></span> <span data-ttu-id="ebec0-135">Hello диспетчер ресурсов кластера службы сбора всех данных hello из локального агенты hello и реагирует на основании текущей конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ebec0-135">hello Cluster Resource Manager service aggregates all hello information from hello local agents and reacts based on its current configuration.</span></span>

<span data-ttu-id="ebec0-136">Рассмотрим следующие схемы hello.</span><span class="sxs-lookup"><span data-stu-id="ebec0-136">Let’s look at hello following diagram:</span></span>

<span data-ttu-id="ebec0-137"><center>
![Архитектура балансировщика ресурсов][Image1]
</center></span><span class="sxs-lookup"><span data-stu-id="ebec0-137"><center>
![Resource Balancer Architecture][Image1]
</center></span></span>

<span data-ttu-id="ebec0-138">Во время выполнения могут произойти разные изменения.</span><span class="sxs-lookup"><span data-stu-id="ebec0-138">During runtime, there are many changes that could happen.</span></span> <span data-ttu-id="ebec0-139">Например, предположим, что сумма hello ресурсов некоторые службы обрабатывает изменения, некоторых ошибок служб, и некоторые узлы, подключении и отключении hello кластера.</span><span class="sxs-lookup"><span data-stu-id="ebec0-139">For example, let’s say hello amount of resources some services consume changes, some services fail, and some nodes join and leave hello cluster.</span></span> <span data-ttu-id="ebec0-140">Все изменения hello на узле производятся статистические вычисления и периодически отправляются службы диспетчера ресурсов кластера toohello (1,2) где они снова статистическую обработку, анализируются и хранятся.</span><span class="sxs-lookup"><span data-stu-id="ebec0-140">All hello changes on a node are aggregated and periodically sent toohello Cluster Resource Manager service (1,2) where they are aggregated again, analyzed, and stored.</span></span> <span data-ttu-id="ebec0-141">Каждые несколько секунд, которые служба просматривает изменения hello и определяет, требуется ли каких-либо действий (3).</span><span class="sxs-lookup"><span data-stu-id="ebec0-141">Every few seconds that service looks at hello changes and determines if any actions are necessary (3).</span></span> <span data-ttu-id="ebec0-142">Например могут заметить, что некоторые пустые узлы были добавлены toohello кластера.</span><span class="sxs-lookup"><span data-stu-id="ebec0-142">For example, it could notice that some empty nodes have been added toohello cluster.</span></span> <span data-ttu-id="ebec0-143">В результате решает toomove некоторые узлы toothose служб.</span><span class="sxs-lookup"><span data-stu-id="ebec0-143">As a result, it decides toomove some services toothose nodes.</span></span> <span data-ttu-id="ebec0-144">Hello диспетчер ресурсов кластера может также Обратите внимание, что конкретный узел перегружен или сбой или был удален, определенных служб, освобождая ресурсы в другом месте.</span><span class="sxs-lookup"><span data-stu-id="ebec0-144">hello Cluster Resource Manager could also notice that a particular node is overloaded, or that certain services have failed or been deleted, freeing up resources elsewhere.</span></span>

<span data-ttu-id="ebec0-145">Рассмотрим следующие схемы hello и посмотрим, что произойдет рядом.</span><span class="sxs-lookup"><span data-stu-id="ebec0-145">Let’s look at hello following diagram and see what happens next.</span></span> <span data-ttu-id="ebec0-146">Давайте предположим, диспетчер ресурсов кластера hello определяет изменения не требуются.</span><span class="sxs-lookup"><span data-stu-id="ebec0-146">Let’s say that hello Cluster Resource Manager determines that changes are necessary.</span></span> <span data-ttu-id="ebec0-147">Он координирует с других системных служб (в определенной hello Диспетчер отказоустойчивости) toomake hello необходимые изменения.</span><span class="sxs-lookup"><span data-stu-id="ebec0-147">It coordinates with other system services (in particular hello Failover Manager) toomake hello necessary changes.</span></span> <span data-ttu-id="ebec0-148">Затем hello необходимые команды отправляются toohello соответствующих узлах (4).</span><span class="sxs-lookup"><span data-stu-id="ebec0-148">Then hello necessary commands are sent toohello appropriate nodes (4).</span></span> <span data-ttu-id="ebec0-149">Например предположим, что диспетчер ресурсов заметили перегружено Node5 и поэтому принимается решение toomove службы B из Node5 tooNode4 приветствия.</span><span class="sxs-lookup"><span data-stu-id="ebec0-149">For example, let's say hello Resource Manager noticed that Node5 was overloaded, and so decided toomove service B from Node5 tooNode4.</span></span> <span data-ttu-id="ebec0-150">В конце hello перенастройки hello (5) кластер hello выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ebec0-150">At hello end of hello reconfiguration (5), hello cluster looks like this:</span></span>

<span data-ttu-id="ebec0-151"><center>
![Архитектура балансировщика ресурсов][Image2]
</center></span><span class="sxs-lookup"><span data-stu-id="ebec0-151"><center>
![Resource Balancer Architecture][Image2]
</center></span></span>

## <a name="next-steps"></a><span data-ttu-id="ebec0-152">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="ebec0-152">Next steps</span></span>
- <span data-ttu-id="ebec0-153">Hello диспетчер ресурсов кластера позволяет настраивать различные параметры для описания кластера hello.</span><span class="sxs-lookup"><span data-stu-id="ebec0-153">hello Cluster Resource Manager has many options for describing hello cluster.</span></span> <span data-ttu-id="ebec0-154">toofind подробные сведения о них, извлеките в этой статье на [описания кластера Service Fabric](./service-fabric-cluster-resource-manager-cluster-description.md)</span><span class="sxs-lookup"><span data-stu-id="ebec0-154">toofind out more about them, check out this article on [describing a Service Fabric cluster](./service-fabric-cluster-resource-manager-cluster-description.md)</span></span>
- <span data-ttu-id="ebec0-155">основной обязанностей Hello диспетчер ресурсов кластера являются перераспределения кластера hello и применения правила размещения.</span><span class="sxs-lookup"><span data-stu-id="ebec0-155">hello Cluster Resource Manager's primary duties are rebalancing hello cluster and enforcing placement rules.</span></span> <span data-ttu-id="ebec0-156">Дополнительные сведения о настройке этих функций см. в разделе [Балансировка кластера Service Fabric](./service-fabric-cluster-resource-manager-balancing.md).</span><span class="sxs-lookup"><span data-stu-id="ebec0-156">For more information on configuring these behaviors, see [balancing your Service Fabric cluster](./service-fabric-cluster-resource-manager-balancing.md)</span></span>

[Image1]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-1.png
[Image2]:./media/service-fabric-cluster-resource-manager-architecture/Service-Fabric-Resource-Manager-Architecture-Activity-2.png
