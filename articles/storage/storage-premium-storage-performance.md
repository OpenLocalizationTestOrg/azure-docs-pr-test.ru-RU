---
title: "Хранилище Azure уровня \"Премиум\": проектирование для обеспечения высокой производительности | Документация Майкрософт"
description: "Разработка высокопроизводительных приложений с использованием хранилища Azure класса «Премиум». Хранилище Premium обеспечивает поддержку дисков с высокой производительностью и малой задержкой для интенсивных рабочих нагрузок ввода-вывода на виртуальных машинах Azure."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: e6a409c3-d31a-4704-a93c-0a04fdc95960
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: aungoo
ms.openlocfilehash: 75845eb4707e8e5606153a5e1a7c10b4113ee121
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-premium-storage-design-for-high-performance"></a><span data-ttu-id="622fe-104">Хранилище Azure класса «Премиум»: разработка, обеспечивающая повышенную производительность</span><span class="sxs-lookup"><span data-stu-id="622fe-104">Azure Premium Storage: Design for High Performance</span></span>
## <a name="overview"></a><span data-ttu-id="622fe-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="622fe-105">Overview</span></span>
<span data-ttu-id="622fe-106">В этой статье приведены рекомендации по разработке высокопроизводительных приложений с использованием хранилища Azure класса «Премиум».</span><span class="sxs-lookup"><span data-stu-id="622fe-106">This article provides guidelines for building high performance applications using Azure Premium Storage.</span></span> <span data-ttu-id="622fe-107">Можно использовать hello инструкции, приведенные в этом документе, в сочетании с производительности лучшие методики применимо tootechnologies, используемого приложением.</span><span class="sxs-lookup"><span data-stu-id="622fe-107">You can use hello instructions provided in this document combined with performance best practices applicable tootechnologies used by your application.</span></span> <span data-ttu-id="622fe-108">рекомендации по tooillustrate hello, мы использовали SQL Server на хранилище Premium в качестве примера в этом документе.</span><span class="sxs-lookup"><span data-stu-id="622fe-108">tooillustrate hello guidelines, we have used SQL Server running on Premium Storage as an example throughout this document.</span></span>

<span data-ttu-id="622fe-109">Хотя мы сценариев производительность для уровня хранилища hello в этой статье, необходимо будет toooptimize уровня приложения hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-109">While we address performance scenarios for hello Storage layer in this article, you will need toooptimize hello application layer.</span></span> <span data-ttu-id="622fe-110">Например при размещении фермы SharePoint в хранилище Azure класса Premium, можно использовать hello примеры SQL Server с этого сервера базы данных hello toooptimize статьи.</span><span class="sxs-lookup"><span data-stu-id="622fe-110">For example, if you are hosting a SharePoint Farm on Azure Premium Storage, you can use hello SQL Server examples from this article toooptimize hello database server.</span></span> <span data-ttu-id="622fe-111">Кроме того Оптимизируйте веб-сервере фермы SharePoint hello и приложения сервера tooget hello максимальной производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-111">Additionally, optimize hello SharePoint Farm's Web server and Application server tooget hello most performance.</span></span>

<span data-ttu-id="622fe-112">В этой статье содержатся ответы на следующие распространенные вопросы об оптимизации производительности приложений в хранилище Azure класса «Премиум».</span><span class="sxs-lookup"><span data-stu-id="622fe-112">This article will help answer following common questions about optimizing application performance on Azure Premium Storage,</span></span>

* <span data-ttu-id="622fe-113">Как toomeasure производительность приложений?</span><span class="sxs-lookup"><span data-stu-id="622fe-113">How toomeasure your application performance?</span></span>  
* <span data-ttu-id="622fe-114">Почему не наблюдается ожидаемая высокая производительность?</span><span class="sxs-lookup"><span data-stu-id="622fe-114">Why are you not seeing expected high performance?</span></span>  
* <span data-ttu-id="622fe-115">Какие факторы влияют на производительность приложения в хранилище класса «Премиум»?</span><span class="sxs-lookup"><span data-stu-id="622fe-115">Which factors influence your application performance on Premium Storage?</span></span>  
* <span data-ttu-id="622fe-116">Как эти факторы влияют на производительность приложения в хранилище класса «Премиум»?</span><span class="sxs-lookup"><span data-stu-id="622fe-116">How do these factors influence performance of your application on Premium Storage?</span></span>  
* <span data-ttu-id="622fe-117">Как можно оптимизировать операции ввода-вывода, пропускную способность и задержку?</span><span class="sxs-lookup"><span data-stu-id="622fe-117">How can you optimize for IOPS, Bandwidth and Latency?</span></span>  

<span data-ttu-id="622fe-118">Рекомендации в этой статье предназначены специально для хранилища класса «Премиум», так как рабочие нагрузки в этом хранилище очень чувствительны к уровню производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-118">We have provided these guidelines specifically for Premium Storage because workloads running on Premium Storage are highly performance sensitive.</span></span> <span data-ttu-id="622fe-119">В соответствующих случаях приведены наглядные примеры.</span><span class="sxs-lookup"><span data-stu-id="622fe-119">We have provided examples where appropriate.</span></span> <span data-ttu-id="622fe-120">Можно также применить некоторые из этих tooapplications рекомендации, выполняющимся как виртуальные машины IaaS с дисками стандартное хранилище.</span><span class="sxs-lookup"><span data-stu-id="622fe-120">You can also apply some of these guidelines tooapplications running on IaaS VMs with Standard Storage disks.</span></span>

<span data-ttu-id="622fe-121">Прежде чем начать, при наличии нового tooPremium хранилища, сначала прочтите hello [хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальных машин Azure](storage-premium-storage.md) и [целевыепоказателипопроизводительностиимасштабируемостихранилищаAzure](storage-scalability-targets.md)статей.</span><span class="sxs-lookup"><span data-stu-id="622fe-121">Before you begin, if you are new tooPremium Storage, first read hello [Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads](storage-premium-storage.md) and [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) articles.</span></span>

## <a name="application-performance-indicators"></a><span data-ttu-id="622fe-122">Показатели производительности приложения</span><span class="sxs-lookup"><span data-stu-id="622fe-122">Application Performance Indicators</span></span>
<span data-ttu-id="622fe-123">Мы определения соответствия приложения работает хорошо или не используя угодно индикаторы производительности, как быстро приложение обрабатывает запрос пользователя, какой объем данных, приложение обрабатывает каждого запроса, сколько запросов обрабатывается в определенном приложении период времени, сколько времени у пользователя есть toowait tooget ответ после отправки свой запрос.</span><span class="sxs-lookup"><span data-stu-id="622fe-123">We assess whether an application is performing well or not using performance indicators like, how fast an application is processing a user request, how much data an application is processing per request, how many requests is an application processing in a specific period of time, how long a user has toowait tooget a response after submitting their request.</span></span> <span data-ttu-id="622fe-124">Hello технические термины для этих показателей эффективности, операций ввода-ВЫВОДА, пропускная способность или пропускной способности и задержки.</span><span class="sxs-lookup"><span data-stu-id="622fe-124">hello technical terms for these performance indicators are, IOPS, Throughput or Bandwidth, and Latency.</span></span>

<span data-ttu-id="622fe-125">В этом разделе обсуждаются общие показатели эффективности hello в контексте hello хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-125">In this section, we will discuss hello common performance indicators in hello context of Premium Storage.</span></span> <span data-ttu-id="622fe-126">В hello в следующем разделе, сбор требований приложения, вы узнаете, как toomeasure эти индикаторы производительности для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-126">In hello following section, Gathering Application Requirements, you will learn how toomeasure these performance indicators for your application.</span></span> <span data-ttu-id="622fe-127">Далее в оптимизация производительности приложений, вы узнаете о hello факторов, влияющих на эти индикаторы и рекомендации toooptimize производительности их.</span><span class="sxs-lookup"><span data-stu-id="622fe-127">Later in Optimizing Application Performance, you will learn about hello factors affecting these performance indicators and recommendations toooptimize them.</span></span>

## <a name="iops"></a><span data-ttu-id="622fe-128">ОПЕРАЦИЙ ВВОДА-ВЫВОДА</span><span class="sxs-lookup"><span data-stu-id="622fe-128">IOPS</span></span>
<span data-ttu-id="622fe-129">Операций ввода-ВЫВОДА — количество запросов, что приложение отправляет toohello дисков за одну секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-129">IOPS is number of requests that your application is sending toohello storage disks in one second.</span></span> <span data-ttu-id="622fe-130">Существуют такие типы операций ввода-вывода: операции чтения и записи, последовательные или случайные.</span><span class="sxs-lookup"><span data-stu-id="622fe-130">An input/output operation could be read or write, sequential or random.</span></span> <span data-ttu-id="622fe-131">OLTP-приложений как на веб-сайт в сети розничной торговли должны tooprocess много одновременных пользователь запрашивает немедленно.</span><span class="sxs-lookup"><span data-stu-id="622fe-131">OLTP applications like an online retail website need tooprocess many concurrent user requests immediately.</span></span> <span data-ttu-id="622fe-132">вставки и обновления баз данных с интенсивным операций, какое приложение hello необходимо обработать быстро Hello пользователь запросов.</span><span class="sxs-lookup"><span data-stu-id="622fe-132">hello user requests are insert and update intensive database transactions, which hello application must process quickly.</span></span> <span data-ttu-id="622fe-133">Поэтому приложениям OLTP необходима очень высокая скорость выполнения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-133">Therefore, OLTP applications require very high IOPS.</span></span> <span data-ttu-id="622fe-134">Такие приложения обрабатывают миллионы небольших случайных запросов ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-134">Such applications handle millions of small and random IO requests.</span></span> <span data-ttu-id="622fe-135">При наличии такого приложения необходимо разработать toooptimize инфраструктуры приложения hello для операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-135">If you have such an application, you must design hello application infrastructure toooptimize for IOPS.</span></span> <span data-ttu-id="622fe-136">В hello позже статьи, *оптимизация производительности приложений*, мы подробно все факторы hello, которые необходимо учитывать tooget высокий уровень операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-136">In hello later section, *Optimizing Application Performance*, we discuss in detail all hello factors that you must consider tooget high IOPS.</span></span>

<span data-ttu-id="622fe-137">При подключении premium хранения диска tooyour масштабных ВМ, Azure настраивает автоматически гарантированную число операций ввода-ВЫВОДА, согласно спецификации диска hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-137">When you attach a premium storage disk tooyour high scale VM, Azure provisions for you a guaranteed number of IOPS as per hello disk specification.</span></span> <span data-ttu-id="622fe-138">Например, диск P50 позволяет подготовить 7500 операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-138">For example, a P50 disk provisions 7500 IOPS.</span></span> <span data-ttu-id="622fe-139">Для каждого размера высокомасштабируемой виртуальной машины также установлено ограничение на количество выполняемых операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-139">Each high scale VM size also has a specific IOPS limit that it can sustain.</span></span> <span data-ttu-id="622fe-140">Например, для виртуальной машины серии GS5 класса «Стандартный» установлено ограничение в 80 000 операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-140">For example, a Standard GS5 VM has 80,000 IOPS limit.</span></span>

## <a name="throughput"></a><span data-ttu-id="622fe-141">Пропускная способность</span><span class="sxs-lookup"><span data-stu-id="622fe-141">Throughput</span></span>
<span data-ttu-id="622fe-142">Производительности или пропускной способности — hello объем данных, что приложение отправляет toohello дисков в течение заданного интервала.</span><span class="sxs-lookup"><span data-stu-id="622fe-142">Throughput or Bandwidth is hello amount of data that your application is sending toohello storage disks in a specified interval.</span></span> <span data-ttu-id="622fe-143">Если приложение выполняет операции ввода-вывода большого объема, ему требуется высокая пропускная способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-143">If your application is performing input/output operations with large IO unit sizes, it requires high Throughput.</span></span> <span data-ttu-id="622fe-144">Приложений с хранилищами данных, как правило, tooissue проверки операций с большим объемом, доступ к большей части данных за раз и обычно выполнения массовых операций.</span><span class="sxs-lookup"><span data-stu-id="622fe-144">Data warehouse applications tend tooissue scan intensive operations that access large portions of data at a time and commonly perform bulk operations.</span></span> <span data-ttu-id="622fe-145">Поэтому таким приложениям требуется более высокая пропускная способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-145">In other words, such applications require higher Throughput.</span></span> <span data-ttu-id="622fe-146">При наличии такого приложения необходимо разработать его toooptimize инфраструктуры для пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-146">If you have such an application, you must design its infrastructure toooptimize for Throughput.</span></span> <span data-ttu-id="622fe-147">В следующем разделе hello, мы обсудим факторов hello сведений необходимо настроить tooachieve это.</span><span class="sxs-lookup"><span data-stu-id="622fe-147">In hello next section, we discuss in detail hello factors you must tune tooachieve this.</span></span>

<span data-ttu-id="622fe-148">При подключении premium хранения диска tooa масштабных ВМ, Azure настраивает пропускной способности согласно спецификации этого диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-148">When you attach a premium storage disk tooa high scale VM, Azure provisions Throughput as per that disk specification.</span></span> <span data-ttu-id="622fe-149">Например, диск P50 позволяет подготовить пропускную способность диска в 250 МБ в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-149">For example, a P50 disk provisions 250 MB per second disk Throughput.</span></span> <span data-ttu-id="622fe-150">Каждая высокомасштабируемая виртуальная машина имеет установленное ограничение по пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-150">Each high scale VM size also has as specific Throughput limit that it can sustain.</span></span> <span data-ttu-id="622fe-151">Например, максимальная пропускная способность виртуальной машины серии GS5 класса «Стандартный» составляет 2000 МБ в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-151">For example, Standard GS5 VM has a maximum throughput of 2,000 MB per second.</span></span> 

<span data-ttu-id="622fe-152">Отсутствует отношение между пропускной способности и операций, как показано в следующей формуле hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-152">There is a relation between Throughput and IOPS as shown in hello formula below.</span></span>

![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="622fe-153">Таким образом это важно toodetermine hello оптимальной пропускной способности и операций ввода-ВЫВОДА значений нужны вашему приложению.</span><span class="sxs-lookup"><span data-stu-id="622fe-153">Therefore, it is important toodetermine hello optimal Throughput and IOPS values that your application requires.</span></span> <span data-ttu-id="622fe-154">При попытке toooptimize один hello других возвращает воздействует на.</span><span class="sxs-lookup"><span data-stu-id="622fe-154">As you try toooptimize one, hello other also gets affected.</span></span> <span data-ttu-id="622fe-155">В разделе *Оптимизация производительности приложения*более подробно рассмотрена оптимизация операций ввода-вывода и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-155">In a later section, *Optimizing Application Performance*, we will discuss in more details about optimizing IOPS and Throughput.</span></span>

## <a name="latency"></a><span data-ttu-id="622fe-156">Задержка</span><span class="sxs-lookup"><span data-stu-id="622fe-156">Latency</span></span>
<span data-ttu-id="622fe-157">Задержка — hello время, затрачиваемое приложением tooreceive одного запроса, отправить его toohello дисков и отправьте hello ответа toohello клиента.</span><span class="sxs-lookup"><span data-stu-id="622fe-157">Latency is hello time it takes an application tooreceive a single request, send it toohello storage disks and send hello response toohello client.</span></span> <span data-ttu-id="622fe-158">Это критическое показателем производительности приложения в tooIOPS сложения и пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-158">This is a critical measure of an application's performance in addition tooIOPS and Throughput.</span></span> <span data-ttu-id="622fe-159">Hello задержки диска хранилище premium — время hello им tooretrieve hello информацию для запроса и взаимодействия ее снова tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-159">hello Latency of a premium storage disk is hello time it takes tooretrieve hello information for a request and communicate it back tooyour application.</span></span> <span data-ttu-id="622fe-160">Хранилище класса «Премиум» обеспечивает постоянно низкую задержку.</span><span class="sxs-lookup"><span data-stu-id="622fe-160">Premium Storage provides consistent low latencies.</span></span> <span data-ttu-id="622fe-161">Если включить кэширование узлов со значением ReadOnly на дисках хранилища класса «Премиум», это позволит сократить время задержки чтения.</span><span class="sxs-lookup"><span data-stu-id="622fe-161">If you enable ReadOnly host caching on premium storage disks, you can get much lower read latency.</span></span> <span data-ttu-id="622fe-162">Более подробно кэширование дисков рассмотрено в разделе *Оптимизация производительности приложения*.</span><span class="sxs-lookup"><span data-stu-id="622fe-162">We will discuss Disk Caching in more detail in later section on *Optimizing Application Performance*.</span></span>

<span data-ttu-id="622fe-163">При оптимизации вашего приложения tooget выше операций ввода-ВЫВОДА и пропускной способности, влияет на задержку приложения hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-163">When you are optimizing your application tooget higher IOPS and Throughput, it will affect hello Latency of your application.</span></span> <span data-ttu-id="622fe-164">После настройки производительности приложения hello, всегда возвращают hello задержка tooavoid приложения hello поведение Непредвиденная высокой задержкой.</span><span class="sxs-lookup"><span data-stu-id="622fe-164">After tuning hello application performance, always evaluate hello Latency of hello application tooavoid unexpected high latency behavior.</span></span>

## <a name="gather-application-performance-requirements"></a><span data-ttu-id="622fe-165">Сбор требований к производительности приложения</span><span class="sxs-lookup"><span data-stu-id="622fe-165">Gather Application Performance Requirements</span></span>
<span data-ttu-id="622fe-166">Hello первым шагом при разработке высокопроизводительных приложений, выполняющихся на хранилище Azure класса Premium является toounderstand hello требований к производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-166">hello first step in designing high performance applications running on Azure Premium Storage is, toounderstand hello performance requirements of your application.</span></span> <span data-ttu-id="622fe-167">После сбора требований к производительности, можно оптимизировать наиболее оптимальную производительность hello tooachieve приложений.</span><span class="sxs-lookup"><span data-stu-id="622fe-167">After you gather performance requirements, you can optimize your application tooachieve hello most optimal performance.</span></span>

<span data-ttu-id="622fe-168">В предыдущем разделе hello мы описано hello общие показатели эффективности, операций ввода-ВЫВОДА, пропускной способности и задержки.</span><span class="sxs-lookup"><span data-stu-id="622fe-168">In hello previous section, we explained hello common performance indicators, IOPS, Throughput and Latency.</span></span> <span data-ttu-id="622fe-169">Необходимо определить, какие из этих индикаторов производительности имеют критическое tooyour toodeliver hello требуемого работу пользователей.</span><span class="sxs-lookup"><span data-stu-id="622fe-169">You must identify which of these performance indicators are critical tooyour application toodeliver hello desired user experience.</span></span> <span data-ttu-id="622fe-170">Например высокий уровень операций ввода-ВЫВОДА, имеет значение большинство приложений tooOLTP обработки миллиона транзакций в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-170">For example, high IOPS matters most tooOLTP applications processing millions of transactions in a second.</span></span> <span data-ttu-id="622fe-171">Высокая пропускная способность, в свою очередь, критически важна для приложений хранилища данных, обрабатывающих большие объемы данных в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-171">Whereas, high Throughput is critical for Data Warehouse applications processing large amounts of data in a second.</span></span> <span data-ttu-id="622fe-172">Очень низкая задержка имеет решающее значение для приложений, выполняющихся в реальном времени, например веб-сайтов потоковой передачи видео.</span><span class="sxs-lookup"><span data-stu-id="622fe-172">Extremely low Latency is crucial for real-time applications like live video streaming websites.</span></span>

<span data-ttu-id="622fe-173">Далее мер hello требованиям максимальную производительность приложения во время его существования.</span><span class="sxs-lookup"><span data-stu-id="622fe-173">Next, measure hello maximum performance requirements of your application throughout its lifetime.</span></span> <span data-ttu-id="622fe-174">Используйте контрольный список образец hello ниже запуск по.</span><span class="sxs-lookup"><span data-stu-id="622fe-174">Use hello sample checklist below as a start.</span></span> <span data-ttu-id="622fe-175">Записи hello максимальное требований к производительности во время normal, рабочая нагрузка периоды пиковых и нерабочие часы.</span><span class="sxs-lookup"><span data-stu-id="622fe-175">Record hello maximum performance requirements during normal, peak and off-hours workload periods.</span></span> <span data-ttu-id="622fe-176">По определению требований для всех уровней рабочих нагрузок, будет может toodetermine hello общих требований производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-176">By identifying requirements for all workloads levels, you will be able toodetermine hello overall performance requirement of your application.</span></span> <span data-ttu-id="622fe-177">Например hello нормальной рабочей нагрузкой веб-сайта электронной коммерции будет hello операциями, он выполняет большинство дней в году.</span><span class="sxs-lookup"><span data-stu-id="622fe-177">For example, hello normal workload of an e-commerce website will be hello transactions it serves during most days in a year.</span></span> <span data-ttu-id="622fe-178">Hello пиковой рабочей нагрузки hello веб-сайта будет hello операциями, он выполняет во время праздников или специальные продажи событий.</span><span class="sxs-lookup"><span data-stu-id="622fe-178">hello peak workload of hello website will be hello transactions it serves during holiday season or special sale events.</span></span> <span data-ttu-id="622fe-179">Hello пиковой рабочей нагрузки обычно опытным в течение ограниченного времени, но может потребовать вашего приложения tooscale два или более раз работу в обычном режиме.</span><span class="sxs-lookup"><span data-stu-id="622fe-179">hello peak workload is typically experienced for a limited period, but can require your application tooscale two or more times its normal operation.</span></span> <span data-ttu-id="622fe-180">Узнайте, 99 требования процентиль, процентилей 90 и 50 процентиля hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-180">Find out hello 50 percentile, 90 percentile and 99 percentile requirements.</span></span> <span data-ttu-id="622fe-181">Это помогает отфильтровать все выбросы в требования к производительности hello и вы можете сосредоточиться на оптимизации для hello правильные значения.</span><span class="sxs-lookup"><span data-stu-id="622fe-181">This helps filter out any outliers in hello performance requirements and you can focus your efforts on optimizing for hello right values.</span></span>

<span data-ttu-id="622fe-182">**Контрольный список требований к производительности приложения**</span><span class="sxs-lookup"><span data-stu-id="622fe-182">**Application Performance Requirements Checklist**</span></span>

| <span data-ttu-id="622fe-183">**Требования к производительности**</span><span class="sxs-lookup"><span data-stu-id="622fe-183">**Performance requirements**</span></span> | <span data-ttu-id="622fe-184">**50-й процентиль**</span><span class="sxs-lookup"><span data-stu-id="622fe-184">**50 Percentile**</span></span> | <span data-ttu-id="622fe-185">**90-й процентиль**</span><span class="sxs-lookup"><span data-stu-id="622fe-185">**90 Percentile**</span></span> | <span data-ttu-id="622fe-186">**99-й процентиль**</span><span class="sxs-lookup"><span data-stu-id="622fe-186">**99  Percentile**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-187">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-187">Max.</span></span> <span data-ttu-id="622fe-188">Транзакций в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-188">Transactions per second</span></span> | | | |
| <span data-ttu-id="622fe-189">Операции чтения, %</span><span class="sxs-lookup"><span data-stu-id="622fe-189">% Read operations</span></span> | | | |
| <span data-ttu-id="622fe-190">Операции записи, %</span><span class="sxs-lookup"><span data-stu-id="622fe-190">% Write operations</span></span> | | | |
| <span data-ttu-id="622fe-191">Случайные операции, %</span><span class="sxs-lookup"><span data-stu-id="622fe-191">% Random operations</span></span> | | | |
| <span data-ttu-id="622fe-192">Последовательные операции, %</span><span class="sxs-lookup"><span data-stu-id="622fe-192">% Sequential operations</span></span> | | | |
| <span data-ttu-id="622fe-193">Размер запроса ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="622fe-193">IO request size</span></span> | | | |
| <span data-ttu-id="622fe-194">Средняя пропускная способность</span><span class="sxs-lookup"><span data-stu-id="622fe-194">Average Throughput</span></span> | | | |
| <span data-ttu-id="622fe-195">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-195">Max.</span></span> <span data-ttu-id="622fe-196">Пропускная способность</span><span class="sxs-lookup"><span data-stu-id="622fe-196">Throughput</span></span> | | | |
| <span data-ttu-id="622fe-197">Мин.</span><span class="sxs-lookup"><span data-stu-id="622fe-197">Min.</span></span> <span data-ttu-id="622fe-198">Задержка</span><span class="sxs-lookup"><span data-stu-id="622fe-198">Latency</span></span> | | | |
| <span data-ttu-id="622fe-199">Среднее время задержки</span><span class="sxs-lookup"><span data-stu-id="622fe-199">Average Latency</span></span> | | | |
| <span data-ttu-id="622fe-200">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-200">Max.</span></span> <span data-ttu-id="622fe-201">ЦП</span><span class="sxs-lookup"><span data-stu-id="622fe-201">CPU</span></span> | | | |
| <span data-ttu-id="622fe-202">Средняя загрузка ЦП</span><span class="sxs-lookup"><span data-stu-id="622fe-202">Average CPU</span></span> | | | |
| <span data-ttu-id="622fe-203">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-203">Max.</span></span> <span data-ttu-id="622fe-204">Память</span><span class="sxs-lookup"><span data-stu-id="622fe-204">Memory</span></span> | | | |
| <span data-ttu-id="622fe-205">Среднее использование памяти</span><span class="sxs-lookup"><span data-stu-id="622fe-205">Average Memory</span></span> | | | |
| <span data-ttu-id="622fe-206">Длина очереди</span><span class="sxs-lookup"><span data-stu-id="622fe-206">Queue Depth</span></span> | | | |

> [!NOTE]
> <span data-ttu-id="622fe-207">Эти показатели следует регулировать в зависимости от ожидаемого в будущем роста приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-207">You should consider scaling these numbers based on expected future growth of your application.</span></span> <span data-ttu-id="622fe-208">Это tooplan хорошей идеей для увеличения размера заранее, поскольку он может быть сложнее инфраструктуры hello toochange по повышению производительности в более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="622fe-208">It is a good idea tooplan for growth ahead of time, because it could be harder toochange hello infrastructure for improving performance later.</span></span>
>
>

<span data-ttu-id="622fe-209">Если у существующего приложения и требуется toomove tooPremium хранилища, необходимо вначале построить hello контрольный список выше для существующего приложения hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-209">If you have an existing application and want toomove tooPremium Storage, first build hello checklist above for hello existing application.</span></span> <span data-ttu-id="622fe-210">Затем построение прототипа приложения на Premium хранилища и проектированием приложения hello, основанного на рекомендации, приведенные в *оптимизация производительности приложений* в следующем разделе этого документа.</span><span class="sxs-lookup"><span data-stu-id="622fe-210">Then, build a prototype of your application on Premium Storage and design hello application based on guidelines described in *Optimizing Application Performance* in a later section of this document.</span></span> <span data-ttu-id="622fe-211">Следующий раздел Hello описание средств hello, можно использовать измерения производительности toogather hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-211">hello next section describes hello tools you can use toogather hello performance measurements.</span></span>

<span data-ttu-id="622fe-212">Создание контрольный список аналогичные tooyour существующие приложения для hello прототипа.</span><span class="sxs-lookup"><span data-stu-id="622fe-212">Create a checklist similar tooyour existing application for hello prototype.</span></span> <span data-ttu-id="622fe-213">С помощью средства Benchmarking можно имитации рабочей нагрузки hello и измерять производительность приложения hello прототипа.</span><span class="sxs-lookup"><span data-stu-id="622fe-213">Using Benchmarking tools you can simulate hello workloads and measure performance on hello prototype application.</span></span> <span data-ttu-id="622fe-214">См. в разделе hello [Benchmarking](#benchmarking) toolearn дополнительные.</span><span class="sxs-lookup"><span data-stu-id="622fe-214">See hello section on [Benchmarking](#benchmarking) toolearn more.</span></span> <span data-ttu-id="622fe-215">В результате вы сможете определить, может ли хранилище класса «Премиум» соответствовать требованиям к производительности приложения или превзойти их.</span><span class="sxs-lookup"><span data-stu-id="622fe-215">By doing so you can determine whether Premium Storage can match or surpass your application performance requirements.</span></span> <span data-ttu-id="622fe-216">Затем можно реализовать hello же правила для производственного приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-216">Then you can implement hello same guidelines for your production application.</span></span>

### <a name="counters-toomeasure-application-performance-requirements"></a><span data-ttu-id="622fe-217">Счетчики toomeasure требований к производительности приложения</span><span class="sxs-lookup"><span data-stu-id="622fe-217">Counters toomeasure application performance requirements</span></span>
<span data-ttu-id="622fe-218">Здравствуйте, лучшим способом toomeasure требований к производительности приложения, средства наблюдения за производительностью toouse, предоставляемые hello операционной системы сервера hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-218">hello best way toomeasure performance requirements of your application, is toouse performance-monitoring tools provided by hello operating system of hello server.</span></span> <span data-ttu-id="622fe-219">Можно использовать PerfMon для Windows и iostat для Linux.</span><span class="sxs-lookup"><span data-stu-id="622fe-219">You can use PerfMon for Windows and iostat for Linux.</span></span> <span data-ttu-id="622fe-220">Эти средства отслеживания счетчиков, соответствующую меру tooeach подробно описан hello над разделом.</span><span class="sxs-lookup"><span data-stu-id="622fe-220">These tools capture counters corresponding tooeach measure explained in hello above section.</span></span> <span data-ttu-id="622fe-221">Когда приложение запущено, его normal, пиковые и нерабочие часы рабочих нагрузок необходимо сохранить hello значения этих счетчиков.</span><span class="sxs-lookup"><span data-stu-id="622fe-221">You must capture hello values of these counters when your application is running its normal, peak and off-hours workloads.</span></span>

<span data-ttu-id="622fe-222">счетчики системного монитора Hello доступны для процессора, памяти и каждый логический диск и физического диска сервера.</span><span class="sxs-lookup"><span data-stu-id="622fe-222">hello PerfMon counters are available for processor, memory and, each logical disk and physical disk of your server.</span></span> <span data-ttu-id="622fe-223">При использовании дисков хранилища premium с виртуальной Машиной hello счетчики физического диска, для каждого диска хранения premium и счетчиками логических дисков, для каждого тома, созданные на дисках хранилища premium hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-223">When you use premium storage disks with a VM, hello physical disk counters are for each premium storage disk, and logical disk counters are for each volume created on hello premium storage disks.</span></span> <span data-ttu-id="622fe-224">Необходимо сохранить значения hello hello дисков, содержащих рабочей нагрузки приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-224">You must capture hello values for hello disks that host your application workload.</span></span> <span data-ttu-id="622fe-225">Если имеется один tooone сопоставление логических и физических дисков, могут ссылаться счетчики toophysical диска; см. в противном случае toohello счетчиками логических дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-225">If there is a one tooone mapping between logical and physical disks, you can refer toophysical disk counters; otherwise refer toohello logical disk counters.</span></span> <span data-ttu-id="622fe-226">В Linux hello iostat команда создает отчет об использовании ЦП и диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-226">On Linux, hello iostat command generates a CPU and disk utilization report.</span></span> <span data-ttu-id="622fe-227">отчет об использовании диска Hello предоставляет статистику по физическим устройством или секции.</span><span class="sxs-lookup"><span data-stu-id="622fe-227">hello disk utilization report provides statistics per physical device or partition.</span></span> <span data-ttu-id="622fe-228">Если данные и журнал сервера базы данных расположены на разных дисках, нужно собрать данные для обоих дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-228">If you have a database server with its data and log on separate disks, collect this data for both disks.</span></span> <span data-ttu-id="622fe-229">В таблице ниже приведены счетчики для дисков, процессора и памяти.</span><span class="sxs-lookup"><span data-stu-id="622fe-229">Below table describes counters for disks, processor and memory:</span></span>

| <span data-ttu-id="622fe-230">Счетчик</span><span class="sxs-lookup"><span data-stu-id="622fe-230">Counter</span></span> | <span data-ttu-id="622fe-231">Описание</span><span class="sxs-lookup"><span data-stu-id="622fe-231">Description</span></span> | <span data-ttu-id="622fe-232">PerfMon</span><span class="sxs-lookup"><span data-stu-id="622fe-232">PerfMon</span></span> | <span data-ttu-id="622fe-233">iostat</span><span class="sxs-lookup"><span data-stu-id="622fe-233">Iostat</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-234">**Количество операций ввода-вывода или транзакций в секунду**</span><span class="sxs-lookup"><span data-stu-id="622fe-234">**IOPS or Transactions per second**</span></span> |<span data-ttu-id="622fe-235">Количество запросов ввода-вывода выдан toohello диска хранилища в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-235">Number of I/O requests issued toohello storage disk per second.</span></span> |<span data-ttu-id="622fe-236">Операций чтения с диска в секунду </span><span class="sxs-lookup"><span data-stu-id="622fe-236">Disk Reads/sec</span></span> <br> <span data-ttu-id="622fe-237">Операций записи на диск в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-237">Disk Writes/sec</span></span> |<span data-ttu-id="622fe-238">tps </span><span class="sxs-lookup"><span data-stu-id="622fe-238">tps</span></span> <br> <span data-ttu-id="622fe-239">r/s </span><span class="sxs-lookup"><span data-stu-id="622fe-239">r/s</span></span> <br> <span data-ttu-id="622fe-240">w/s</span><span class="sxs-lookup"><span data-stu-id="622fe-240">w/s</span></span> |
| <span data-ttu-id="622fe-241">**Количество операций чтения и записи на диске**</span><span class="sxs-lookup"><span data-stu-id="622fe-241">**Disk Reads and Writes**</span></span> |<span data-ttu-id="622fe-242">% операций чтения и записи операций, выполняемых на диске hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-242">% of Reads and Write operations performed on hello disk.</span></span> |<span data-ttu-id="622fe-243">Процент активности диска при чтении </span><span class="sxs-lookup"><span data-stu-id="622fe-243">% Disk Read Time</span></span> <br> <span data-ttu-id="622fe-244">Процент активности диска при записи</span><span class="sxs-lookup"><span data-stu-id="622fe-244">% Disk Write Time</span></span> |<span data-ttu-id="622fe-245">r/s </span><span class="sxs-lookup"><span data-stu-id="622fe-245">r/s</span></span> <br> <span data-ttu-id="622fe-246">w/s</span><span class="sxs-lookup"><span data-stu-id="622fe-246">w/s</span></span> |
| <span data-ttu-id="622fe-247">**Пропускная способность**</span><span class="sxs-lookup"><span data-stu-id="622fe-247">**Throughput**</span></span> |<span data-ttu-id="622fe-248">Объем данных считывается или записывается toohello диск за одну секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-248">Amount of data read from or written toohello disk per second.</span></span> |<span data-ttu-id="622fe-249">Скорость чтения с диска (байт/с) </span><span class="sxs-lookup"><span data-stu-id="622fe-249">Disk Read Bytes/sec</span></span> <br> <span data-ttu-id="622fe-250">Скорость записи на диск (байт/с)</span><span class="sxs-lookup"><span data-stu-id="622fe-250">Disk Write Bytes/sec</span></span> |<span data-ttu-id="622fe-251">КБ/с прочитано</span><span class="sxs-lookup"><span data-stu-id="622fe-251">kB_read/s</span></span> <br> <span data-ttu-id="622fe-252">КБ/с записано</span><span class="sxs-lookup"><span data-stu-id="622fe-252">kB_wrtn/s</span></span> |
| <span data-ttu-id="622fe-253">**Задержка**</span><span class="sxs-lookup"><span data-stu-id="622fe-253">**Latency**</span></span> |<span data-ttu-id="622fe-254">Общее время toocomplete запрос ввода-ВЫВОДА на диск.</span><span class="sxs-lookup"><span data-stu-id="622fe-254">Total time toocomplete a disk IO request.</span></span> |<span data-ttu-id="622fe-255">Средняя скорость чтения с диска в секунду </span><span class="sxs-lookup"><span data-stu-id="622fe-255">Average Disk sec/Read</span></span> <br> <span data-ttu-id="622fe-256">Средняя скорость записи на диск в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-256">Average disk sec/Write</span></span> |<span data-ttu-id="622fe-257">await </span><span class="sxs-lookup"><span data-stu-id="622fe-257">await</span></span> <br> <span data-ttu-id="622fe-258">svctm</span><span class="sxs-lookup"><span data-stu-id="622fe-258">svctm</span></span> |
| <span data-ttu-id="622fe-259">**Объем ввода-вывода**</span><span class="sxs-lookup"><span data-stu-id="622fe-259">**IO size**</span></span> |<span data-ttu-id="622fe-260">размер Hello запросов ввода-вывода выдает toohello дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-260">hello size of I/O requests issues toohello storage disks.</span></span> |<span data-ttu-id="622fe-261">Средняя скорость чтения с диска (байт/с) </span><span class="sxs-lookup"><span data-stu-id="622fe-261">Average Disk Bytes/Read</span></span> <br> <span data-ttu-id="622fe-262">Средняя скорость записи на диск (байт/с)</span><span class="sxs-lookup"><span data-stu-id="622fe-262">Average Disk Bytes/Write</span></span> |<span data-ttu-id="622fe-263">avgrq-sz</span><span class="sxs-lookup"><span data-stu-id="622fe-263">avgrq-sz</span></span> |
| <span data-ttu-id="622fe-264">**Длина очереди**</span><span class="sxs-lookup"><span data-stu-id="622fe-264">**Queue Depth**</span></span> |<span data-ttu-id="622fe-265">Число ожидающих операций ввода-вывода запросов toobe ожидания формы чтения или записи toohello места на диске.</span><span class="sxs-lookup"><span data-stu-id="622fe-265">Number of outstanding I/O requests waiting toobe read form or written toohello storage disk.</span></span> |<span data-ttu-id="622fe-266">Текущая длина очереди диска</span><span class="sxs-lookup"><span data-stu-id="622fe-266">Current Disk Queue Length</span></span> |<span data-ttu-id="622fe-267">avgqu-sz</span><span class="sxs-lookup"><span data-stu-id="622fe-267">avgqu-sz</span></span> |
| <span data-ttu-id="622fe-268">**Макс. Память**</span><span class="sxs-lookup"><span data-stu-id="622fe-268">**Max. Memory**</span></span> |<span data-ttu-id="622fe-269">Объем памяти, необходимые приложения toorun плавно</span><span class="sxs-lookup"><span data-stu-id="622fe-269">Amount of memory required toorun application smoothly</span></span> |<span data-ttu-id="622fe-270">Использование выделенной памяти (в байтах), %</span><span class="sxs-lookup"><span data-stu-id="622fe-270">% Committed Bytes in Use</span></span> |<span data-ttu-id="622fe-271">Использование vmstat</span><span class="sxs-lookup"><span data-stu-id="622fe-271">Use vmstat</span></span> |
| <span data-ttu-id="622fe-272">**Макс. ЦП**</span><span class="sxs-lookup"><span data-stu-id="622fe-272">**Max. CPU**</span></span> |<span data-ttu-id="622fe-273">Сумма ЦП плавно необходимые toorun приложения</span><span class="sxs-lookup"><span data-stu-id="622fe-273">Amount CPU required toorun application smoothly</span></span> |<span data-ttu-id="622fe-274">Загруженность процессора, %</span><span class="sxs-lookup"><span data-stu-id="622fe-274">% Processor time</span></span> |<span data-ttu-id="622fe-275">%util</span><span class="sxs-lookup"><span data-stu-id="622fe-275">%util</span></span> |

<span data-ttu-id="622fe-276">См. дополнительные сведения об [iostat](http://linuxcommand.org/man_pages/iostat1.html) и [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span><span class="sxs-lookup"><span data-stu-id="622fe-276">Learn more about [iostat](http://linuxcommand.org/man_pages/iostat1.html) and [PerfMon](https://msdn.microsoft.com/library/aa645516.aspx).</span></span>

## <a name="optimizing-application-performance"></a><span data-ttu-id="622fe-277">Оптимизация производительности приложения</span><span class="sxs-lookup"><span data-stu-id="622fe-277">Optimizing Application Performance</span></span>
<span data-ttu-id="622fe-278">Hello основные факторы, влияющие на производительность приложения, работающего в хранилище Premium — характер из запросы ввода-ВЫВОДА, размер виртуальной Машины, размер диска, количество дисков, кэширование, многопоточность и длину очереди.</span><span class="sxs-lookup"><span data-stu-id="622fe-278">hello main factors that influence performance of an application running on Premium Storage are Nature of IO Requests, VM size, Disk size, Number of disks, Disk Caching, Multithreading and Queue Depth.</span></span> <span data-ttu-id="622fe-279">Некоторые из этих причин можно управлять с помощью элементы, предоставляемые системой hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-279">You can control some of these factors with knobs provided by hello system.</span></span> <span data-ttu-id="622fe-280">Большинство приложений может не предоставить вам hello tooalter параметр размер ввода-ВЫВОДА и глубина очереди напрямую.</span><span class="sxs-lookup"><span data-stu-id="622fe-280">Most applications may not give you an option tooalter hello IO size and Queue Depth directly.</span></span> <span data-ttu-id="622fe-281">Например при использовании SQL Server, нельзя выбрать размер и очереди глубина hello операции ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-281">For example, if you are using SQL Server, you cannot choose hello IO size and queue depth.</span></span> <span data-ttu-id="622fe-282">SQL Server выбирает hello оптимальной операции ввода-ВЫВОДА размером и очереди глубина значения tooget hello максимальной производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-282">SQL Server chooses hello optimal IO size and queue depth values tooget hello most performance.</span></span> <span data-ttu-id="622fe-283">Это влияние hello важные toounderstand обоих типов факторов на производительность приложений можно предоставить соответствующие ресурсы toomeet требованиям к производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-283">It is important toounderstand hello effects of both types of factors on your application performance, so that you can provision appropriate resources toomeet performance needs.</span></span>

<span data-ttu-id="622fe-284">В этом разделе ссылки toohello приложения контрольный список требований, созданному tooidentify сколько требуется toooptimize производительность приложений.</span><span class="sxs-lookup"><span data-stu-id="622fe-284">Throughout this section, refer toohello application requirements checklist that you created, tooidentify how much you need toooptimize your application performance.</span></span> <span data-ttu-id="622fe-285">На основе, что можно будет toodetermine которого факторы из этого раздела потребуется tootune.</span><span class="sxs-lookup"><span data-stu-id="622fe-285">Based on that, you will be able toodetermine which factors from this section you will need tootune.</span></span> <span data-ttu-id="622fe-286">toowitness hello влияние на производительность приложений, запустите средства настройки приложения по измерению производительности каждого фактора.</span><span class="sxs-lookup"><span data-stu-id="622fe-286">toowitness hello effects of each factor on your application performance, run benchmarking tools on your application setup.</span></span> <span data-ttu-id="622fe-287">См. toohello [Benchmarking](#Benchmarking) раздел в конце этой статьи приведены общие средства в Windows и виртуальных машин Linux по измерению производительности toorun действия в hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-287">Refer toohello [Benchmarking](#Benchmarking) section at hello end of this article for steps toorun common benchmarking tools on Windows and Linux VMs.</span></span>

### <a name="optimizing-iops-throughput-and-latency-at-a-glance"></a><span data-ttu-id="622fe-288">Краткий обзор оптимизации выполнения операций ввода-вывода, пропускной способности и задержки</span><span class="sxs-lookup"><span data-stu-id="622fe-288">Optimizing IOPS, Throughput and Latency at a glance</span></span>
<span data-ttu-id="622fe-289">в следующей таблице Hello содержит сводку всех факторы производительности hello и toooptimize действия hello операций ввода-ВЫВОДА, пропускной способности и задержки.</span><span class="sxs-lookup"><span data-stu-id="622fe-289">hello table below summarizes all hello performance factors and hello steps toooptimize IOPS, Throughput and Latency.</span></span> <span data-ttu-id="622fe-290">Hello после этой сводке описано каждого фактором является намного более подробно.</span><span class="sxs-lookup"><span data-stu-id="622fe-290">hello sections following this summary will describe each factor is much more depth.</span></span>

| &nbsp; | <span data-ttu-id="622fe-291">**ОПЕРАЦИЙ ВВОДА-ВЫВОДА**</span><span class="sxs-lookup"><span data-stu-id="622fe-291">**IOPS**</span></span> | <span data-ttu-id="622fe-292">**Пропускная способность**</span><span class="sxs-lookup"><span data-stu-id="622fe-292">**Throughput**</span></span> | <span data-ttu-id="622fe-293">**Задержка**</span><span class="sxs-lookup"><span data-stu-id="622fe-293">**Latency**</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-294">**Пример сценария**</span><span class="sxs-lookup"><span data-stu-id="622fe-294">**Example Scenario**</span></span> |<span data-ttu-id="622fe-295">Корпоративное приложение OLTP, которому требуется высокая скорость выполнения транзакций в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-295">Enterprise OLTP application requiring very high transactions per second rate.</span></span> |<span data-ttu-id="622fe-296">Корпоративное приложение хранилища данных, обрабатывающее большие объемы данных.</span><span class="sxs-lookup"><span data-stu-id="622fe-296">Enterprise Data warehousing application processing large amounts of data.</span></span> |<span data-ttu-id="622fe-297">Почти в реальном времени приложений, требующих запросов, toouser мгновенных ответов, например для интерактивных игр.</span><span class="sxs-lookup"><span data-stu-id="622fe-297">Near real-time applications requiring instant responses toouser requests, like online gaming.</span></span> |
| <span data-ttu-id="622fe-298">Факторы производительности</span><span class="sxs-lookup"><span data-stu-id="622fe-298">Performance factors</span></span> | &nbsp; | &nbsp; | &nbsp; |
| <span data-ttu-id="622fe-299">**Объем ввода-вывода**</span><span class="sxs-lookup"><span data-stu-id="622fe-299">**IO size**</span></span> |<span data-ttu-id="622fe-300">Меньший объем ввода-вывода обеспечивает более высокую скорость выполнения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-300">Smaller IO size yields higher IOPS.</span></span> |<span data-ttu-id="622fe-301">Tooyields размер больше операций ввода-ВЫВОДА более высокую пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-301">Larger IO size tooyields higher Throughput.</span></span> | &nbsp;|
| <span data-ttu-id="622fe-302">**Размер виртуальной машины**</span><span class="sxs-lookup"><span data-stu-id="622fe-302">**VM size**</span></span> |<span data-ttu-id="622fe-303">Используйте размер виртуальной машины, который обеспечивает более высокую скорость выполнения операций ввода-вывода, чем указано в требованиях приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-303">Use a VM size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="622fe-304">См. размеры виртуальных машин и их ограничения скорости выполнения операций ввода-вывода здесь.</span><span class="sxs-lookup"><span data-stu-id="622fe-304">See VM sizes and their IOPS limits here.</span></span> |<span data-ttu-id="622fe-305">Используйте размер виртуальной машины с большей пропускной способностью, чем требует приложение.</span><span class="sxs-lookup"><span data-stu-id="622fe-305">Use a VM size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="622fe-306">См. размеры виртуальных машин и их ограничения пропускной способности здесь.</span><span class="sxs-lookup"><span data-stu-id="622fe-306">See VM sizes and their Throughput limits here.</span></span> |<span data-ttu-id="622fe-307">Используйте размер виртуальной машины с более широкими пределами масштабируемости, чем требует приложение.</span><span class="sxs-lookup"><span data-stu-id="622fe-307">Use a VM size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="622fe-308">См. размеры виртуальных машин и их ограничения здесь.</span><span class="sxs-lookup"><span data-stu-id="622fe-308">See VM sizes and their limits here.</span></span> |
| <span data-ttu-id="622fe-309">**Размер диска**</span><span class="sxs-lookup"><span data-stu-id="622fe-309">**Disk size**</span></span> |<span data-ttu-id="622fe-310">Используйте размер диска, который обеспечивает более высокую скорость выполнения операций ввода-вывода, чем требует приложение.</span><span class="sxs-lookup"><span data-stu-id="622fe-310">Use a disk size that offers IOPS greater than your application requirement.</span></span> <span data-ttu-id="622fe-311">См. размеры дисков и их ограничения скорости выполнения операций ввода-вывода здесь.</span><span class="sxs-lookup"><span data-stu-id="622fe-311">See disk sizes and their IOPS limits here.</span></span> |<span data-ttu-id="622fe-312">Используйте размер диска с более высокой пропускной способностью, чем требует приложение.</span><span class="sxs-lookup"><span data-stu-id="622fe-312">Use a disk size with Throughput limit greater than your application requirement.</span></span> <span data-ttu-id="622fe-313">См. размеры дисков и их ограничения пропускной способности здесь.</span><span class="sxs-lookup"><span data-stu-id="622fe-313">See disk sizes and their Throughput limits here.</span></span> |<span data-ttu-id="622fe-314">Используйте размер диска с более широкими пределами масштабируемости, чем требует приложение.</span><span class="sxs-lookup"><span data-stu-id="622fe-314">Use a disk size that offers scale limits greater than your application requirement.</span></span> <span data-ttu-id="622fe-315">См. размеры дисков и их ограничения здесь.</span><span class="sxs-lookup"><span data-stu-id="622fe-315">See disk sizes and their limits here.</span></span> |
| <span data-ttu-id="622fe-316">**Ограничения масштабируемости виртуальной машины и диска**</span><span class="sxs-lookup"><span data-stu-id="622fe-316">**VM and Disk Scale Limits**</span></span> |<span data-ttu-id="622fe-317">Ограничение операций ввода-ВЫВОДА в зависимости от выбранного размера виртуальной Машины hello должна быть больше всего операций ввода-ВЫВОДА, обусловленных диски premium присоединенного tooit.</span><span class="sxs-lookup"><span data-stu-id="622fe-317">IOPS limit of hello VM size chosen should be greater than total IOPS driven by premium storage disks attached tooit.</span></span> |<span data-ttu-id="622fe-318">Предел пропускной способности в зависимости от выбранного размера виртуальной Машины hello должна быть больше tooit присоединенного общая пропускная способность, обусловленных диски premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-318">Throughput limit of hello VM size chosen should be greater than total Throughput driven by premium storage disks attached tooit.</span></span> |<span data-ttu-id="622fe-319">Выбранный размер виртуальной Машины hello границы шкалы должно быть больше ограничения масштабирования общее premium присоединенных дисков хранилища.</span><span class="sxs-lookup"><span data-stu-id="622fe-319">Scale limits of hello VM size chosen must be greater than total scale limits of attached premium storage disks.</span></span> |
| <span data-ttu-id="622fe-320">**Кэширование диска**</span><span class="sxs-lookup"><span data-stu-id="622fe-320">**Disk Caching**</span></span> |<span data-ttu-id="622fe-321">Включить кэш только для чтения на дисках хранилища premium с tooget масштабных операций чтения выше операций чтения ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-321">Enable ReadOnly Cache on premium storage disks with Read heavy operations tooget higher Read IOPS.</span></span> | &nbsp; |<span data-ttu-id="622fe-322">Включите кэш только для чтения на дисках хранилища premium с задержкой чтения очень мало tooget готовности масштабных операций.</span><span class="sxs-lookup"><span data-stu-id="622fe-322">Enable ReadOnly Cache on premium storage disks with Ready heavy operations tooget very low Read latencies.</span></span> |
| <span data-ttu-id="622fe-323">**Чередование дисков**</span><span class="sxs-lookup"><span data-stu-id="622fe-323">**Disk Striping**</span></span> |<span data-ttu-id="622fe-324">Использовать несколько дисков и томов их вместе tooget объединенный выше операций ввода-ВЫВОДА и ограничение пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-324">Use multiple disks and stripe them together tooget a combined higher IOPS and Throughput limit.</span></span> <span data-ttu-id="622fe-325">Обратите внимание, что hello объединенный предел каждой виртуальной Машины должно быть больше, чем hello объединенный ограничения premium присоединенные диски.</span><span class="sxs-lookup"><span data-stu-id="622fe-325">Note that hello combined limit per VM should be higher than hello combined limits of attached premium disks.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="622fe-326">**Размер блока чередования**</span><span class="sxs-lookup"><span data-stu-id="622fe-326">**Stripe Size**</span></span> |<span data-ttu-id="622fe-327">Меньший размер блока чередования для случайных небольших запросов ввода-вывода в приложениях OLTP.</span><span class="sxs-lookup"><span data-stu-id="622fe-327">Smaller stripe size for random small IO pattern seen in OLTP applications.</span></span> <span data-ttu-id="622fe-328">Например, для приложения OLTP SQL Server можно использовать блок чередования на 64 КБ.</span><span class="sxs-lookup"><span data-stu-id="622fe-328">E.g., use stripe size of 64KB for SQL Server OLTP application.</span></span> |<span data-ttu-id="622fe-329">Больший размер блока чередования для последовательных объемных запросов ввода-вывода в приложениях хранилища данных.</span><span class="sxs-lookup"><span data-stu-id="622fe-329">Larger stripe size for sequential large IO pattern seen in Data Warehouse applications.</span></span> <span data-ttu-id="622fe-330">Например, для приложения хранилища данных SQL Server можно использовать блок чередования на 256 КБ.</span><span class="sxs-lookup"><span data-stu-id="622fe-330">E.g., use 256KB stripe size for SQL Server Data warehouse application.</span></span> | &nbsp; |
| <span data-ttu-id="622fe-331">**Многопоточность**</span><span class="sxs-lookup"><span data-stu-id="622fe-331">**Multithreading**</span></span> |<span data-ttu-id="622fe-332">Используйте многопоточность toopush большое число запросов tooPremium хранилище, могут стать причиной toohigher операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-332">Use multithreading toopush higher number of requests tooPremium Storage that will lead toohigher IOPS and Throughput.</span></span> <span data-ttu-id="622fe-333">Например на сервере SQL Server установить высокой tooallocate значение MAXDOP tooSQL дополнительных процессоров сервера.</span><span class="sxs-lookup"><span data-stu-id="622fe-333">For example, on SQL Server set a high MAXDOP value tooallocate more CPUs tooSQL Server.</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="622fe-334">**Длина очереди**</span><span class="sxs-lookup"><span data-stu-id="622fe-334">**Queue Depth**</span></span> |<span data-ttu-id="622fe-335">Более длинная очередь обеспечивает более высокую скорость выполнения операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-335">Larger Queue Depth yields higher IOPS.</span></span> |<span data-ttu-id="622fe-336">Более длинная очередь обеспечивает более высокую пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-336">Larger Queue Depth yields higher Throughput.</span></span> |<span data-ttu-id="622fe-337">Более короткая очередь сокращает время задержки.</span><span class="sxs-lookup"><span data-stu-id="622fe-337">Smaller Queue Depth yields lower latencies.</span></span> |

## <a name="nature-of-io-requests"></a><span data-ttu-id="622fe-338">Характер запросов ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="622fe-338">Nature of IO Requests</span></span>
<span data-ttu-id="622fe-339">Запрос ввода-вывода — это единица операции ввода-вывода, которую будет выполнять приложение.</span><span class="sxs-lookup"><span data-stu-id="622fe-339">An IO request is a unit of input/output operation that your application will be performing.</span></span> <span data-ttu-id="622fe-340">Определение характера hello запросы ввода-ВЫВОДА, произвольных и последовательных, чтения или записи крупных или мелких, помогут вам определить требования к производительности hello приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-340">Identifying hello nature of IO requests, random or sequential, read or write, small or large, will help you determine hello performance requirements of your application.</span></span> <span data-ttu-id="622fe-341">Это очень важно toounderstand характер hello запросы ввода-ВЫВОДА, toomake hello правильных решений при разработке инфраструктуры приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-341">It is very important toounderstand hello nature of IO requests, toomake hello right decisions when designing your application infrastructure.</span></span>

<span data-ttu-id="622fe-342">Размер операции ввода-ВЫВОДА является одним из hello более важных факторов.</span><span class="sxs-lookup"><span data-stu-id="622fe-342">IO size is one of hello more important factors.</span></span> <span data-ttu-id="622fe-343">Hello размер ввода-ВЫВОДА, имеет размер hello hello запроса операции ввода вывода, созданные приложением.</span><span class="sxs-lookup"><span data-stu-id="622fe-343">hello IO size is hello size of hello input/output operation request generated by your application.</span></span> <span data-ttu-id="622fe-344">Hello размер ввода-ВЫВОДА имеет значительное влияние на производительность, особенно на hello операций ввода-ВЫВОДА и пропускной способности, hello приложения является может tooachieve.</span><span class="sxs-lookup"><span data-stu-id="622fe-344">hello IO size has a significant impact on performance especially on hello IOPS and Bandwidth that hello application is able tooachieve.</span></span> <span data-ttu-id="622fe-345">Hello следующей формуле показан hello связь между операций ввода-ВЫВОДА, размер ввода-ВЫВОДА и пропускной способности и пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-345">hello following formula shows hello relationship between IOPS, IO size and Bandwidth/Throughput.</span></span>  
    ![](media/storage-premium-storage-performance/image1.png)

<span data-ttu-id="622fe-346">Некоторые приложения позволяют tooalter размер их ввода-ВЫВОДА для некоторых приложений это недопустимо.</span><span class="sxs-lookup"><span data-stu-id="622fe-346">Some applications allow you tooalter their IO size, while some applications do not.</span></span> <span data-ttu-id="622fe-347">Например, SQL Server определяет hello операции ввода-ВЫВОДА оптимальным сам и не предоставлять пользователям любые элементы toochange его.</span><span class="sxs-lookup"><span data-stu-id="622fe-347">For example, SQL Server determines hello optimal IO size itself, and does not provide users with any knobs toochange it.</span></span> <span data-ttu-id="622fe-348">На Здравствуйте другой стороны, Oracle предоставляет параметр с именем [DB\_блокировать\_размер](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) с помощью которого можно настроить размер запроса ввода-вывода базы данных hello "hello".</span><span class="sxs-lookup"><span data-stu-id="622fe-348">On hello other hand, Oracle provides a parameter called [DB\_BLOCK\_SIZE](https://docs.oracle.com/cd/B19306_01/server.102/b14211/iodesign.htm#i28815) using which you can configure hello I/O request size of hello database.</span></span>

<span data-ttu-id="622fe-349">При использовании приложения, который не допускает вы toochange hello размер ввода-ВЫВОДА, следуйте рекомендациям hello toooptimize производительности hello Эффективности, который наиболее важные приложения tooyour этой статьи.</span><span class="sxs-lookup"><span data-stu-id="622fe-349">If you are using an application, which does not allow you toochange hello IO size, use hello guidelines in this article toooptimize hello performance KPI that is most relevant tooyour application.</span></span> <span data-ttu-id="622fe-350">Например,</span><span class="sxs-lookup"><span data-stu-id="622fe-350">For example,</span></span>

* <span data-ttu-id="622fe-351">Приложения OLTP генерируют миллионы небольших случайных запросов ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-351">An OLTP application generates millions of small and random IO requests.</span></span> <span data-ttu-id="622fe-352">запрашивает toohandle их тип операции ввода-ВЫВОДА, необходимо разработать tooget инфраструктуры вашего приложения выше операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-352">toohandle these type of IO requests, you must design your application infrastructure tooget higher IOPS.</span></span>  
* <span data-ttu-id="622fe-353">Приложения хранилища данных генерируют крупные последовательные запросы ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-353">A data warehousing application generates large and sequential IO requests.</span></span> <span data-ttu-id="622fe-354">toohandle эти тип запросы ввода-ВЫВОДА, необходимо разработать вашей инфраструктуры tooget приложения более высокой пропускной способностью или пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-354">toohandle these type of IO requests, you must design your application infrastructure tooget higher Bandwidth or Throughput.</span></span>

<span data-ttu-id="622fe-355">При использовании приложения, который позволяет размер ввода-ВЫВОДА toochange hello, используйте это правило для hello операции ввода-ВЫВОДА, кроме размер tooother рекомендации по производительности,</span><span class="sxs-lookup"><span data-stu-id="622fe-355">If you are using an application, which allows you toochange hello IO size, use this rule of thumb for hello IO size in addition tooother performance guidelines,</span></span>

* <span data-ttu-id="622fe-356">Tooget размер меньше операций ввода-ВЫВОДА выше операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-356">Smaller IO size tooget higher IOPS.</span></span> <span data-ttu-id="622fe-357">Например, 8 КБ для приложения OLTP.</span><span class="sxs-lookup"><span data-stu-id="622fe-357">For example, 8 KB for an OLTP application.</span></span>  
* <span data-ttu-id="622fe-358">Tooget размер больше операций ввода-ВЫВОДА более высокую пропускную способность и пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-358">Larger IO size tooget higher Bandwidth/Throughput.</span></span> <span data-ttu-id="622fe-359">Например, 1024 КБ для приложения хранилища данных.</span><span class="sxs-lookup"><span data-stu-id="622fe-359">For example, 1024 KB for a data warehouse application.</span></span>

<span data-ttu-id="622fe-360">Ниже приведен пример на вычисление hello операций ввода-ВЫВОДА и пропускной способности и пропускной способности для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-360">Here is an example on how you can calculate hello IOPS and Throughput/Bandwidth for your application.</span></span> <span data-ttu-id="622fe-361">Рассмотрим приложение, использующее диск P30.</span><span class="sxs-lookup"><span data-stu-id="622fe-361">Consider an application using a P30 disk.</span></span> <span data-ttu-id="622fe-362">Hello Максимума и пропускной способности и пропускной способности диска P30 можно добиться — 5000 операций ввода-ВЫВОДА и 200 МБ в секунду соответственно.</span><span class="sxs-lookup"><span data-stu-id="622fe-362">hello maximum IOPS and Throughput/Bandwidth a P30 disk can achieve is 5000 IOPS and 200 MB per second respectively.</span></span> <span data-ttu-id="622fe-363">Если приложение требует hello Максимума из hello P30 диск и использовать меньший размер операции ввода-ВЫВОДА, например 8 КБ hello возникающие пропускную способность, можно будет tooget является 40 МБ в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-363">Now, if your application requires hello maximum IOPS from hello P30 disk and you use a smaller IO size like 8 KB, hello resulting Bandwidth you will be able tooget is 40 MB per second.</span></span> <span data-ttu-id="622fe-364">Тем не менее, если приложению требуется максимальная пропускная способность и пропускной способности с диска P30 hello и использовать больший размер операции ввода-ВЫВОДА, например 1024 КБ, hello полученный операций ввода-ВЫВОДА может быть меньше 200 операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-364">However, if your application requires hello maximum Throughput/Bandwidth from P30 disk, and you use a larger IO size like 1024 KB, hello resulting IOPS will be less, 200 IOPS.</span></span> <span data-ttu-id="622fe-365">Таким образом настройте размер hello ввода-ВЫВОДА, таким образом, что он удовлетворяет требованиям оба приложения операций ввода-ВЫВОДА и пропускной способности и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-365">Therefore, tune hello IO size such that it meets both your application's IOPS and Throughput/Bandwidth requirement.</span></span> <span data-ttu-id="622fe-366">Для диска P30 в таблице ниже приведены различные размеры операции ввода-ВЫВОДА hello и соответствующие операции ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-366">Table below summarizes hello different IO sizes and their corresponding IOPS and Throughput for a P30 disk.</span></span>

| <span data-ttu-id="622fe-367">Требование к приложению</span><span class="sxs-lookup"><span data-stu-id="622fe-367">Application Requirement</span></span> | <span data-ttu-id="622fe-368">Объем ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="622fe-368">I/O size</span></span> | <span data-ttu-id="622fe-369">ОПЕРАЦИЙ ВВОДА-ВЫВОДА</span><span class="sxs-lookup"><span data-stu-id="622fe-369">IOPS</span></span> | <span data-ttu-id="622fe-370">Пропускная способность</span><span class="sxs-lookup"><span data-stu-id="622fe-370">Throughput/Bandwidth</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-371">Maкс. количество операций ввода-вывода в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-371">Max IOPS</span></span> |<span data-ttu-id="622fe-372">8 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-372">8 KB</span></span> |<span data-ttu-id="622fe-373">5 000</span><span class="sxs-lookup"><span data-stu-id="622fe-373">5,000</span></span> |<span data-ttu-id="622fe-374">40 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-374">40 MB per second</span></span> |
| <span data-ttu-id="622fe-375">Макс. пропускная способность</span><span class="sxs-lookup"><span data-stu-id="622fe-375">Max Throughput</span></span> |<span data-ttu-id="622fe-376">1024 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-376">1024 KB</span></span> |<span data-ttu-id="622fe-377">200</span><span class="sxs-lookup"><span data-stu-id="622fe-377">200</span></span> |<span data-ttu-id="622fe-378">200 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-378">200 MB per second</span></span> |
| <span data-ttu-id="622fe-379">Макс. пропускная способность и высокая скорость выполнения операций ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="622fe-379">Max Throughput + high IOPS</span></span> |<span data-ttu-id="622fe-380">64 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-380">64 KB</span></span> |<span data-ttu-id="622fe-381">3200</span><span class="sxs-lookup"><span data-stu-id="622fe-381">3,200</span></span> |<span data-ttu-id="622fe-382">200 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-382">200 MB per second</span></span> |
| <span data-ttu-id="622fe-383">Макс. скорость выполнения операций ввода-вывода и высокая пропускная способность</span><span class="sxs-lookup"><span data-stu-id="622fe-383">Max IOPS + high Throughput</span></span> |<span data-ttu-id="622fe-384">32 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-384">32 KB</span></span> |<span data-ttu-id="622fe-385">5 000</span><span class="sxs-lookup"><span data-stu-id="622fe-385">5,000</span></span> |<span data-ttu-id="622fe-386">160 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-386">160 MB per second</span></span> |

<span data-ttu-id="622fe-387">tooget операций ввода-ВЫВОДА и пропускную способность выше, чем максимальное значение hello диска хранения одного premium, использовать несколько дисков "премиум", чередуются друг с другом.</span><span class="sxs-lookup"><span data-stu-id="622fe-387">tooget IOPS and Bandwidth higher than hello maximum value of a single premium storage disk, use multiple premium disks striped together.</span></span> <span data-ttu-id="622fe-388">Например рекомендуется распределить два tooget дисков P30 объединенный операций ввода-ВЫВОДА из 10 000 операций ввода-ВЫВОДА или объединенных пропускной способности 400 МБ в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-388">For example, stripe two P30 disks tooget a combined IOPS of 10,000 IOPS or a combined Throughput of 400 MB per second.</span></span> <span data-ttu-id="622fe-389">Как описано в следующем разделе hello, необходимо использовать размер виртуальной Машины, поддерживающем hello вместе с диска операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-389">As explained in hello next section, you must use a VM size that supports hello combined disk IOPS and Throughput.</span></span>

> [!NOTE]
> <span data-ttu-id="622fe-390">Как увеличить либо операций ввода-ВЫВОДА или также увеличивает пропускную способность hello других, убедитесь, что вы не сталкиваются с пропускной способности или ограничения операций ввода-ВЫВОДА диска hello, или виртуальных Машин при увеличении какой-либо.</span><span class="sxs-lookup"><span data-stu-id="622fe-390">As you increase either IOPS or Throughput hello other also increases, make sure you do not hit throughput or IOPS limits of hello disk or VM when increasing either one.</span></span>
>
>

<span data-ttu-id="622fe-391">toowitness Здравствуйте эффекты объема операций ввода-ВЫВОДА на производительность приложения, оценки эффективности инструменты можно использовать на виртуальной Машине и дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-391">toowitness hello effects of IO size on application performance, you can run benchmarking tools on your VM and disks.</span></span> <span data-ttu-id="622fe-392">Создайте несколько тестовых запусков и использовать другой размер операции ввода-ВЫВОДА для каждого выполнения toosee hello влияние.</span><span class="sxs-lookup"><span data-stu-id="622fe-392">Create multiple test runs and use different IO size for each run toosee hello impact.</span></span> <span data-ttu-id="622fe-393">См. toohello [Benchmarking](#Benchmarking) раздел в конце hello в этой статье для получения дополнительных сведений.</span><span class="sxs-lookup"><span data-stu-id="622fe-393">Refer toohello [Benchmarking](#Benchmarking) section at hello end of this article for more details.</span></span>

## <a name="high-scale-vm-sizes"></a><span data-ttu-id="622fe-394">Размеры высокомасштабируемых виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="622fe-394">High Scale VM Sizes</span></span>
<span data-ttu-id="622fe-395">Когда вы приступите к разработке приложения, одним из первого действия toodo hello является, выберите приложение toohost виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-395">When you start designing an application, one of hello first things toodo is, choose a VM toohost your application.</span></span> <span data-ttu-id="622fe-396">Хранилище класса «Премиум» предусматривает использование высокомасштабируемых виртуальных машин, на которых могут выполняться приложения, требующие высокой вычислительной мощности и повышенной производительности операций ввода-вывода локального диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-396">Premium Storage comes with High Scale VM sizes that can run applications requiring higher compute power and a high local disk I/O performance.</span></span> <span data-ttu-id="622fe-397">Виртуальные машины предоставляют более быстрые процессоры, более высокий коэффициент памяти для ядра и Solid-State накопитель (SSD) на локальном диске hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-397">These VMs provide faster processors, a higher memory-to-core ratio, and a Solid-State Drive (SSD) for hello local disk.</span></span> <span data-ttu-id="622fe-398">Примеры высокий уровень масштабирования виртуальных машин, поддерживающие хранилище Premium: hello DS, серии DSv2 и GS ВМ серии.</span><span class="sxs-lookup"><span data-stu-id="622fe-398">Examples of High Scale VMs supporting Premium Storage are hello DS, DSv2 and GS series VMs.</span></span>

<span data-ttu-id="622fe-399">Доступны высокомасштабируемые виртуальные машины различных размеров с разным количеством ядер ЦП, объемом памяти, операционными системами и размером временного диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-399">High Scale VMs are available in different sizes with a different number of CPU cores, memory, OS and temporary disk size.</span></span> <span data-ttu-id="622fe-400">Размер каждой виртуальной Машины также имеет максимальное число дисков данных, которые можно присоединить toohello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-400">Each VM size also has maximum number of data disks that you can attach toohello VM.</span></span> <span data-ttu-id="622fe-401">Таким образом hello выбранный размер виртуальной Машины повлияет на какой объем обработки, памяти и хранения ресурсов доступна для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-401">Therefore, hello chosen VM size will affect how much processing, memory, and storage capacity is available for your application.</span></span> <span data-ttu-id="622fe-402">Он также влияет на hello вычислений и затраты на хранение.</span><span class="sxs-lookup"><span data-stu-id="622fe-402">It also affects hello Compute and Storage cost.</span></span> <span data-ttu-id="622fe-403">Например ниже приведены спецификации hello hello наибольший размер виртуальной Машины в серии DS, серии DSv2 рядов и ряды GS.</span><span class="sxs-lookup"><span data-stu-id="622fe-403">For example, below are hello specifications of hello largest VM size in a DS series, DSv2 series and a GS series:</span></span>

| <span data-ttu-id="622fe-404">Размер виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="622fe-404">VM size</span></span> | <span data-ttu-id="622fe-405">Ядра ЦП</span><span class="sxs-lookup"><span data-stu-id="622fe-405">CPU cores</span></span> | <span data-ttu-id="622fe-406">Память</span><span class="sxs-lookup"><span data-stu-id="622fe-406">Memory</span></span> | <span data-ttu-id="622fe-407">Размеры диска виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="622fe-407">VM disk sizes</span></span> | <span data-ttu-id="622fe-408">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-408">Max.</span></span> <span data-ttu-id="622fe-409">количество дисков данных</span><span class="sxs-lookup"><span data-stu-id="622fe-409">data disks</span></span> | <span data-ttu-id="622fe-410">Объем кэша</span><span class="sxs-lookup"><span data-stu-id="622fe-410">Cache size</span></span> | <span data-ttu-id="622fe-411">ОПЕРАЦИЙ ВВОДА-ВЫВОДА</span><span class="sxs-lookup"><span data-stu-id="622fe-411">IOPS</span></span> | <span data-ttu-id="622fe-412">Ограничения количества операций ввода-вывода в секунду и пропускной способности кэша</span><span class="sxs-lookup"><span data-stu-id="622fe-412">Bandwidth Cache IO limits</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="622fe-413">Standard_DS14</span><span class="sxs-lookup"><span data-stu-id="622fe-413">Standard_DS14</span></span> |<span data-ttu-id="622fe-414">16</span><span class="sxs-lookup"><span data-stu-id="622fe-414">16</span></span> |<span data-ttu-id="622fe-415">112 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-415">112 GB</span></span> |<span data-ttu-id="622fe-416">ОС = 1023 ГБ </span><span class="sxs-lookup"><span data-stu-id="622fe-416">OS = 1023 GB</span></span> <br> <span data-ttu-id="622fe-417">Локальный SSD = 224 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-417">Local SSD = 224 GB</span></span> |<span data-ttu-id="622fe-418">32</span><span class="sxs-lookup"><span data-stu-id="622fe-418">32</span></span> |<span data-ttu-id="622fe-419">576 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-419">576 GB</span></span> |<span data-ttu-id="622fe-420">50 000 операций ввода-вывода в секунду </span><span class="sxs-lookup"><span data-stu-id="622fe-420">50,000 IOPS</span></span> <br> <span data-ttu-id="622fe-421">512 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-421">512 MB per second</span></span> |<span data-ttu-id="622fe-422">4000 операций ввода-вывода в секунду и 33 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-422">4,000 IOPS and 33 MB per second</span></span> |
| <span data-ttu-id="622fe-423">Standard_GS5</span><span class="sxs-lookup"><span data-stu-id="622fe-423">Standard_GS5</span></span> |<span data-ttu-id="622fe-424">32</span><span class="sxs-lookup"><span data-stu-id="622fe-424">32</span></span> |<span data-ttu-id="622fe-425">448 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-425">448 GB</span></span> |<span data-ttu-id="622fe-426">ОС = 1023 ГБ </span><span class="sxs-lookup"><span data-stu-id="622fe-426">OS = 1023 GB</span></span> <br> <span data-ttu-id="622fe-427">Локальный SSD = 896 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-427">Local SSD = 896 GB</span></span> |<span data-ttu-id="622fe-428">64</span><span class="sxs-lookup"><span data-stu-id="622fe-428">64</span></span> |<span data-ttu-id="622fe-429">4224 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-429">4224 GB</span></span> |<span data-ttu-id="622fe-430">80 000 операций ввода-вывода в секунду </span><span class="sxs-lookup"><span data-stu-id="622fe-430">80,000 IOPS</span></span> <br> <span data-ttu-id="622fe-431">2000 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-431">2,000 MB per second</span></span> |<span data-ttu-id="622fe-432">5000 операций ввода-вывода в секунду и 50 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-432">5,000 IOPS and 50 MB per second</span></span> |

<span data-ttu-id="622fe-433">см. Полный список всех доступных размеров ВМ Azure tooview слишком[размеры виртуальных Машин Windows](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) или [размеры виртуальных Машин Linux](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="622fe-433">tooview a complete list of all available Azure VM sizes, refer too[Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="622fe-434">Выберите размер виртуальной Машины, который может соответствовать и масштабировать требуемого tooyour требований к производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-434">Choose a VM size that can meet and scale tooyour desired application performance requirements.</span></span> <span data-ttu-id="622fe-435">Кроме toothis, принимать во внимание следующие важные вопросы при выборе размеров виртуальных Машин.</span><span class="sxs-lookup"><span data-stu-id="622fe-435">In addition toothis, take into account following important considerations when choosing VM sizes.</span></span>

<span data-ttu-id="622fe-436">*Ограничения масштабирования*</span><span class="sxs-lookup"><span data-stu-id="622fe-436">*Scale Limits*</span></span>  
<span data-ttu-id="622fe-437">Hello IOPS ограничений на виртуальную Машину и на каждом диске различен и независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="622fe-437">hello maximum IOPS limits per VM and per disk are different and independent of each other.</span></span> <span data-ttu-id="622fe-438">Убедитесь, что приложение hello влияющие операций ввода-ВЫВОДА в пределах hello hello виртуальной Машины, а также tooit присоединенные диски premium hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-438">Make sure that hello application is driving IOPS within hello limits of hello VM as well as hello premium disks attached tooit.</span></span> <span data-ttu-id="622fe-439">В противном случае производительность приложения нужно будет отрегулировать.</span><span class="sxs-lookup"><span data-stu-id="622fe-439">Otherwise, application performance will experience throttling.</span></span>

<span data-ttu-id="622fe-440">В качестве примера предположим, что максимальное количество операций ввода-вывода в секунду для приложения составляет 4000.</span><span class="sxs-lookup"><span data-stu-id="622fe-440">As an example, suppose an application requirement is a maximum of 4,000 IOPS.</span></span> <span data-ttu-id="622fe-441">tooachieve этого, можно подготовить диск P30 на виртуальной Машине DS1.</span><span class="sxs-lookup"><span data-stu-id="622fe-441">tooachieve this, you provision a P30 disk on a DS1 VM.</span></span> <span data-ttu-id="622fe-442">Hello P30 диска можно передавать too5 000 операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-442">hello P30 disk can deliver up too5,000 IOPS.</span></span> <span data-ttu-id="622fe-443">Тем не менее hello DS1 ВМ — ограниченный too3, 200 операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-443">However, hello DS1 VM is limited too3,200 IOPS.</span></span> <span data-ttu-id="622fe-444">Следовательно hello производительности приложения будет ограничен hello ограничение виртуальной Машины на 3,200 операций ввода-ВЫВОДА и будет снижение производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-444">Consequently, hello application performance will be constrained by hello VM limit at 3,200 IOPS and there will be degraded performance.</span></span> <span data-ttu-id="622fe-445">tooprevent этой ситуации выберите виртуальную Машину и место на диске, будет обоих требования соответствия приложений.</span><span class="sxs-lookup"><span data-stu-id="622fe-445">tooprevent this situation, choose a VM and disk size that will both meet application requirements.</span></span>

<span data-ttu-id="622fe-446">*Стоимость выполнения операций*</span><span class="sxs-lookup"><span data-stu-id="622fe-446">*Cost of Operation*</span></span>  
<span data-ttu-id="622fe-447">Во многих случаях общая стоимость выполнения операций с использованием хранилища класса «Премиум» может быть меньше, чем при использовании хранилища класса «Стандартный».</span><span class="sxs-lookup"><span data-stu-id="622fe-447">In many cases, it is possible that your overall cost of operation using Premium Storage is lower than using Standard Storage.</span></span>

<span data-ttu-id="622fe-448">В качестве примера рассмотрим приложение, требующее выполнения 16 000 операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-448">For example, consider an application requiring 16,000 IOPS.</span></span> <span data-ttu-id="622fe-449">tooachieve это производительности требуется стандартный\_ВМ IaaS Azure D14, который может предоставить Максимума 16000 с помощью 32 дисков стандартное хранилище 1 ТБ.</span><span class="sxs-lookup"><span data-stu-id="622fe-449">tooachieve this performance, you will need a Standard\_D14 Azure IaaS VM, which can give a maximum IOPS of 16,000 using 32 standard storage 1TB disks.</span></span> <span data-ttu-id="622fe-450">Каждый диск хранилища класса «Стандартный» емкостью 1 ТБ может выполнить до 500 операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-450">Each 1TB standard storage disk can achieve a maximum of 500 IOPS.</span></span> <span data-ttu-id="622fe-451">Hello расчетные затраты на этой виртуальной машины в месяц, могут быть 1,570 $.</span><span class="sxs-lookup"><span data-stu-id="622fe-451">hello estimated cost of this VM per month will be $1,570.</span></span> <span data-ttu-id="622fe-452">Ежемесячная стоимость Hello 32 дисков стандартное хранилище будет 1,638 $.</span><span class="sxs-lookup"><span data-stu-id="622fe-452">hello monthly cost of 32 standard storage disks will be $1,638.</span></span> <span data-ttu-id="622fe-453">Hello предполагаемое Общие ежемесячные затраты будут 3,208 $.</span><span class="sxs-lookup"><span data-stu-id="622fe-453">hello estimated total monthly cost will be $3,208.</span></span>

<span data-ttu-id="622fe-454">Тем не менее, если вы hello же приложения в хранилище класса Premium, потребуются меньшего размера виртуальной Машины и меньшее количество дисков хранилища premium, что уменьшает общую стоимость hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-454">However, if you hosted hello same application on Premium Storage, you will need a smaller VM size and fewer premium storage disks, thus reducing hello overall cost.</span></span> <span data-ttu-id="622fe-455">Стандартный\_DS13 ВМ можно требованиям hello 16 000 операций ввода-ВЫВОДА с помощью четырех P30 дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-455">A Standard\_DS13 VM can meet hello 16,000 IOPS requirement using four P30 disks.</span></span> <span data-ttu-id="622fe-456">Hello DS13 ВМ имеет Максимума 25,600 и каждого диска P30 имеет Максимума 5000.</span><span class="sxs-lookup"><span data-stu-id="622fe-456">hello DS13 VM has a maximum IOPS of 25,600 and each P30 disk has a maximum IOPS of 5,000.</span></span> <span data-ttu-id="622fe-457">В целом, при такой конфигурации можно добиться 20 000 операций ввода-вывода в секунду (5000 x 4).</span><span class="sxs-lookup"><span data-stu-id="622fe-457">Overall, this configuration can achieve 5,000 x 4 = 20,000 IOPS.</span></span> <span data-ttu-id="622fe-458">Hello расчетные затраты на этой виртуальной машины в месяц, могут быть 1,003 $.</span><span class="sxs-lookup"><span data-stu-id="622fe-458">hello estimated cost of this VM per month will be $1,003.</span></span> <span data-ttu-id="622fe-459">Ежемесячная стоимость Hello четыре жестких диска хранения premium P30 будет 544.34 $.</span><span class="sxs-lookup"><span data-stu-id="622fe-459">hello monthly cost of four P30 premium storage disks will be $544.34.</span></span> <span data-ttu-id="622fe-460">Hello предполагаемое Общие ежемесячные затраты будут 1,544 $.</span><span class="sxs-lookup"><span data-stu-id="622fe-460">hello estimated total monthly cost will be $1,544.</span></span>

<span data-ttu-id="622fe-461">В следующей таблице представлены детализация затрат hello этого сценария Standard и Premium хранилища.</span><span class="sxs-lookup"><span data-stu-id="622fe-461">Table below summarizes hello cost breakdown of this scenario for Standard and Premium Storage.</span></span>

| &nbsp; | <span data-ttu-id="622fe-462">**Стандартный**</span><span class="sxs-lookup"><span data-stu-id="622fe-462">**Standard**</span></span> | <span data-ttu-id="622fe-463">**Премиальный**</span><span class="sxs-lookup"><span data-stu-id="622fe-463">**Premium**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="622fe-464">**Стоимость виртуальной машины в месяц**</span><span class="sxs-lookup"><span data-stu-id="622fe-464">**Cost of VM per month**</span></span> |<span data-ttu-id="622fe-465">1570,58 долл. США (Standard\_D14)</span><span class="sxs-lookup"><span data-stu-id="622fe-465">$1,570.58 (Standard\_D14)</span></span> |<span data-ttu-id="622fe-466">1003,66 долл. США (Standard\_DS13)</span><span class="sxs-lookup"><span data-stu-id="622fe-466">$1,003.66 (Standard\_DS13)</span></span> |
| <span data-ttu-id="622fe-467">**Стоимость дисков в месяц**</span><span class="sxs-lookup"><span data-stu-id="622fe-467">**Cost of Disks per month**</span></span> |<span data-ttu-id="622fe-468">1638,40 долл. США (32 диска емкостью 1 ТБ)</span><span class="sxs-lookup"><span data-stu-id="622fe-468">$1,638.40 (32 x 1 TB disks)</span></span> |<span data-ttu-id="622fe-469">544,34 долл. США (4 диска P30)</span><span class="sxs-lookup"><span data-stu-id="622fe-469">$544.34 (4 x P30 disks)</span></span> |
| <span data-ttu-id="622fe-470">**Общая стоимость в месяц**</span><span class="sxs-lookup"><span data-stu-id="622fe-470">**Overall Cost per month**</span></span> |<span data-ttu-id="622fe-471">3208,98 долл. США</span><span class="sxs-lookup"><span data-stu-id="622fe-471">$3,208.98</span></span> |<span data-ttu-id="622fe-472">1544,34 долл. США</span><span class="sxs-lookup"><span data-stu-id="622fe-472">$1,544.34</span></span> |

<span data-ttu-id="622fe-473">*Дистрибутивы Linux*</span><span class="sxs-lookup"><span data-stu-id="622fe-473">*Linux Distros*</span></span>  

<span data-ttu-id="622fe-474">Хранилище Azure класса Premium, вы получаете hello того же уровня производительности для виртуальных машин под управлением Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="622fe-474">With Azure Premium Storage, you get hello same level of Performance for VMs running Windows and Linux.</span></span> <span data-ttu-id="622fe-475">Корпорация Майкрософт поддерживает множество видов дистрибутивы Linux, и можно вывести полный список hello [здесь](../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="622fe-475">We support many flavors of Linux distros, and you can see hello complete list [here](../virtual-machines/linux/endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span> <span data-ttu-id="622fe-476">Очень важно, что различные дистрибутивы предпочтительнее toonote, подходящих для различных типов рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="622fe-476">It is important toonote that different distros are better suited for different types of workloads.</span></span> <span data-ttu-id="622fe-477">Вы увидите различные уровни производительности в зависимости от дистрибутив hello рабочей нагрузки, на котором запущена.</span><span class="sxs-lookup"><span data-stu-id="622fe-477">You will see different levels of performance depending on hello distro your workload is running on.</span></span> <span data-ttu-id="622fe-478">Теста дистрибутивы Linux hello вместе с приложением и выберите тот, который лучше всего работает hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-478">Test hello Linux distros with your application and choose hello one that works best.</span></span>

<span data-ttu-id="622fe-479">При выполнении Linux на хранилище Premium, проверьте последние обновления hello о высокой производительности tooensure требуемые драйверы.</span><span class="sxs-lookup"><span data-stu-id="622fe-479">When running Linux with Premium Storage, check hello latest updates about required drivers tooensure high performance.</span></span>

## <a name="premium-storage-disk-sizes"></a><span data-ttu-id="622fe-480">Размеры диска хранилища класса «Премиум»</span><span class="sxs-lookup"><span data-stu-id="622fe-480">Premium Storage Disk Sizes</span></span>
<span data-ttu-id="622fe-481">В настоящее время хранилище уровня "Премиум" Azure предлагается с дисками семи размеров.</span><span class="sxs-lookup"><span data-stu-id="622fe-481">Azure Premium Storage offers seven disk sizes currently.</span></span> <span data-ttu-id="622fe-482">Для диска каждого размера установлены различные ограничения масштабирования для операций ввода-вывода в секунду, пропускной способности и хранилища.</span><span class="sxs-lookup"><span data-stu-id="622fe-482">Each disk size has a different scale limit for IOPS, Bandwidth and Storage.</span></span> <span data-ttu-id="622fe-483">Выберите hello неправильный размер диска хранилища Premium, в зависимости от требований приложения hello и hello масштабных размер виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-483">Choose hello right Premium Storage Disk size depending on hello application requirements and hello high scale VM size.</span></span> <span data-ttu-id="622fe-484">в следующей таблице Hello представлены размеры hello семь дисков и их возможности.</span><span class="sxs-lookup"><span data-stu-id="622fe-484">hello table below shows hello seven disks sizes and their capabilities.</span></span> <span data-ttu-id="622fe-485">Размеры P4 и P6 в настоящее время поддерживаются только для службы "Управляемые диски".</span><span class="sxs-lookup"><span data-stu-id="622fe-485">P4 and P6 sizes are currently only supported for Managed Disks.</span></span>

| <span data-ttu-id="622fe-486">Диски уровня "Премиум"</span><span class="sxs-lookup"><span data-stu-id="622fe-486">Premium Disks Type</span></span>  | <span data-ttu-id="622fe-487">P4</span><span class="sxs-lookup"><span data-stu-id="622fe-487">P4</span></span>    | <span data-ttu-id="622fe-488">P6</span><span class="sxs-lookup"><span data-stu-id="622fe-488">P6</span></span>    | <span data-ttu-id="622fe-489">P10</span><span class="sxs-lookup"><span data-stu-id="622fe-489">P10</span></span>   | <span data-ttu-id="622fe-490">P20</span><span class="sxs-lookup"><span data-stu-id="622fe-490">P20</span></span>   | <span data-ttu-id="622fe-491">P30</span><span class="sxs-lookup"><span data-stu-id="622fe-491">P30</span></span>   | <span data-ttu-id="622fe-492">P40</span><span class="sxs-lookup"><span data-stu-id="622fe-492">P40</span></span>   | <span data-ttu-id="622fe-493">P50</span><span class="sxs-lookup"><span data-stu-id="622fe-493">P50</span></span>   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| <span data-ttu-id="622fe-494">Размер диска</span><span class="sxs-lookup"><span data-stu-id="622fe-494">Disk size</span></span>           | <span data-ttu-id="622fe-495">32 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-495">32 GB</span></span> | <span data-ttu-id="622fe-496">64 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-496">64 GB</span></span> | <span data-ttu-id="622fe-497">128 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-497">128 GB</span></span>| <span data-ttu-id="622fe-498">512 ГБ</span><span class="sxs-lookup"><span data-stu-id="622fe-498">512 GB</span></span>            | <span data-ttu-id="622fe-499">1024 ГБ (1 ТБ)</span><span class="sxs-lookup"><span data-stu-id="622fe-499">1024 GB (1 TB)</span></span>    | <span data-ttu-id="622fe-500">2048 ГБ (2 ТБ)</span><span class="sxs-lookup"><span data-stu-id="622fe-500">2048 GB (2 TB)</span></span>    | <span data-ttu-id="622fe-501">4095 ГБ (4 ТБ)</span><span class="sxs-lookup"><span data-stu-id="622fe-501">4095 GB (4 TB)</span></span>    | 
| <span data-ttu-id="622fe-502">Количество операций ввода-вывода в секунду на диск</span><span class="sxs-lookup"><span data-stu-id="622fe-502">IOPS per disk</span></span>       | <span data-ttu-id="622fe-503">120</span><span class="sxs-lookup"><span data-stu-id="622fe-503">120</span></span>   | <span data-ttu-id="622fe-504">240</span><span class="sxs-lookup"><span data-stu-id="622fe-504">240</span></span>   | <span data-ttu-id="622fe-505">500</span><span class="sxs-lookup"><span data-stu-id="622fe-505">500</span></span>   | <span data-ttu-id="622fe-506">2300</span><span class="sxs-lookup"><span data-stu-id="622fe-506">2300</span></span>              | <span data-ttu-id="622fe-507">5000</span><span class="sxs-lookup"><span data-stu-id="622fe-507">5000</span></span>              | <span data-ttu-id="622fe-508">7500</span><span class="sxs-lookup"><span data-stu-id="622fe-508">7500</span></span>              | <span data-ttu-id="622fe-509">7500</span><span class="sxs-lookup"><span data-stu-id="622fe-509">7500</span></span>              | 
| <span data-ttu-id="622fe-510">Пропускная способность на диск</span><span class="sxs-lookup"><span data-stu-id="622fe-510">Throughput per disk</span></span> | <span data-ttu-id="622fe-511">25 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-511">25 MB per second</span></span>  | <span data-ttu-id="622fe-512">50 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-512">50 MB per second</span></span>  | <span data-ttu-id="622fe-513">100 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-513">100 MB per second</span></span> | <span data-ttu-id="622fe-514">150 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-514">150 MB per second</span></span> | <span data-ttu-id="622fe-515">200 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-515">200 MB per second</span></span> | <span data-ttu-id="622fe-516">250 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-516">250 MB per second</span></span> | <span data-ttu-id="622fe-517">250 МБ в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-517">250 MB per second</span></span> | 


<span data-ttu-id="622fe-518">Количество дисков, зависит от дисков hello выбранного размера.</span><span class="sxs-lookup"><span data-stu-id="622fe-518">How many disks you choose depends on hello disk size chosen.</span></span> <span data-ttu-id="622fe-519">Можно использовать один диск P50 один или несколько toomeet дисков P10 ваших требований приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-519">You could use a single P50 disk or multiple P10 disks toomeet your application requirement.</span></span> <span data-ttu-id="622fe-520">Учитывать рекомендации по учетным записям, перечисленные ниже, когда выбор hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-520">Take into account considerations listed below when making hello choice.</span></span>

<span data-ttu-id="622fe-521">*Ограничения масштабирования (на количество операций ввода-вывода в секунду и пропускную способность)*</span><span class="sxs-lookup"><span data-stu-id="622fe-521">*Scale Limits (IOPS and Throughput)*</span></span>  
<span data-ttu-id="622fe-522">Hello операций ввода-ВЫВОДА и пропускной способности границы каждого размера диска Premium разных и не зависят от hello пределы масштабирования виртуальных Машин.</span><span class="sxs-lookup"><span data-stu-id="622fe-522">hello IOPS and Throughput limits of each Premium disk size is different and independent from hello VM scale limits.</span></span> <span data-ttu-id="622fe-523">Убедитесь, что hello всего операций ввода-ВЫВОДА и пропускную способность между дисками hello предельным "масштаб" hello выбираются размер виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-523">Make sure that hello total IOPS and Throughput from hello disks are within scale limits of hello chosen VM size.</span></span>

<span data-ttu-id="622fe-524">Например, рассмотрим, как следует поступить, если используется виртуальная машина DS4 с одним диском P30, а максимальная пропускная способность приложения составляет не более 250 МБ/с.</span><span class="sxs-lookup"><span data-stu-id="622fe-524">For example, if an application requirement is a maximum of 250 MB/sec Throughput and you are using a DS4 VM with a single P30 disk.</span></span> <span data-ttu-id="622fe-525">Hello DS4 ВМ можно освобождать пропускная способность too256 МБ/с.</span><span class="sxs-lookup"><span data-stu-id="622fe-525">hello DS4 VM can give up too256 MB/sec Throughput.</span></span> <span data-ttu-id="622fe-526">Тем не менее одного диска P30 установлено ограничение пропускной способности 200 МБ в секунду. Следовательно приложение hello будет ограничен в 200 МБ/сек, из-за toohello предельной.</span><span class="sxs-lookup"><span data-stu-id="622fe-526">However, a single P30 disk has Throughput limit of 200 MB/sec. Consequently, hello application will be constrained at 200 MB/sec due toohello disk limit.</span></span> <span data-ttu-id="622fe-527">tooovercome этот предел, подготовить несколько toohello дисков данных виртуальной Машины или измените размер вашей tooP40 дисков или P50.</span><span class="sxs-lookup"><span data-stu-id="622fe-527">tooovercome this limit, provision more than one data disks toohello VM or resize your disks tooP40 or P50.</span></span>

> [!NOTE]
> <span data-ttu-id="622fe-528">Операций чтения, выполненных hello кэша не включаются в диск hello операций ввода-ВЫВОДА и пропускной способности, таким образом не регулируется toodisk ограничения.</span><span class="sxs-lookup"><span data-stu-id="622fe-528">Reads served by hello cache are not included in hello disk IOPS and Throughput, hence not subject toodisk limits.</span></span> <span data-ttu-id="622fe-529">Для кэша существует отдельное ограничение на количество операций ввода-вывода в секунду и пропускную способность для каждой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-529">Cache has its separate IOPS and Throughput limit per VM.</span></span>
>
> <span data-ttu-id="622fe-530">Например, изначально пропускная способность операций чтения и записи составляет 60 МБ/с и 40 МБ/с соответственно.</span><span class="sxs-lookup"><span data-stu-id="622fe-530">For example, initially your reads and writes are 60MB/sec and 40MB/sec respectively.</span></span> <span data-ttu-id="622fe-531">Со временем кэша hello нагревается и обслуживает все больше hello операций чтения из кэша hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-531">Over time, hello cache warms up and serves more and more of hello reads from hello cache.</span></span> <span data-ttu-id="622fe-532">Затем можно получить выше записи пропускная способность с диска hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-532">Then, you can get higher write Throughput from hello disk.</span></span>
>
>

<span data-ttu-id="622fe-533">*Количество дисков*</span><span class="sxs-lookup"><span data-stu-id="622fe-533">*Number of Disks*</span></span>  
<span data-ttu-id="622fe-534">Определите hello количество дисков, вам необходимо по оценке требований приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-534">Determine hello number of disks you will need by assessing application requirements.</span></span> <span data-ttu-id="622fe-535">Размер каждой виртуальной Машины также имеет ограничение на hello количество дисков, которые можно присоединить toohello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-535">Each VM size also has a limit on hello number of disks that you can attach toohello VM.</span></span> <span data-ttu-id="622fe-536">Как правило это дважды hello число ядер.</span><span class="sxs-lookup"><span data-stu-id="622fe-536">Typically, this is twice hello number of cores.</span></span> <span data-ttu-id="622fe-537">Убедитесь, что hello размер виртуальной Машины может поддерживать hello количество дисков, необходимо выбрать.</span><span class="sxs-lookup"><span data-stu-id="622fe-537">Ensure that hello VM size you choose can support hello number of disks needed.</span></span>

<span data-ttu-id="622fe-538">Помните, что дисках хранилища Premium hello иметь высокий дисков tooStandard возможности по сравнению производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-538">Remember, hello Premium Storage disks have higher performance capabilities compared tooStandard Storage disks.</span></span> <span data-ttu-id="622fe-539">Таким образом, при переносе приложения из виртуальной Машины Azure IaaS с помощью стандартного хранилища tooPremium хранилища вы скорее всего, потребуется меньшее количество дисков "премиум" tooachieve hello же или более высокой производительности для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-539">Therefore, if you are migrating your application from Azure IaaS VM using Standard Storage tooPremium Storage, you will likely need fewer premium disks tooachieve hello same or higher performance for your application.</span></span>

## <a name="disk-caching"></a><span data-ttu-id="622fe-540">Кэширование диска</span><span class="sxs-lookup"><span data-stu-id="622fe-540">Disk Caching</span></span>
<span data-ttu-id="622fe-541">В высокомасштабируемых виртуальных машинах, которые используют хранилище Azure класса «Премиум», применяется технология многоуровневого кэширования под названием BlobCache.</span><span class="sxs-lookup"><span data-stu-id="622fe-541">High Scale VMs that leverage Azure Premium Storage have a multi-tier caching technology called BlobCache.</span></span> <span data-ttu-id="622fe-542">BlobCache использует сочетание hello ОЗУ виртуальной машины и локальный SSD для кэширования.</span><span class="sxs-lookup"><span data-stu-id="622fe-542">BlobCache uses a combination of hello Virtual Machine RAM and local SSD for caching.</span></span> <span data-ttu-id="622fe-543">Этот кэш доступен для постоянного дисках хранилища Premium hello и локальными дисками ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-543">This cache is available for hello Premium Storage persistent disks and hello VM local disks.</span></span> <span data-ttu-id="622fe-544">По умолчанию кэш задается tooRead и записи для дисков операционной системы и ReadOnly для дисков данных, размещенные в хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-544">By default, this cache setting is set tooRead/Write for OS disks and ReadOnly for data disks hosted on Premium Storage.</span></span> <span data-ttu-id="622fe-545">При использовании кэширования диска включен на дисках хранилища Premium hello hello высокий уровень масштабирования виртуальных машин можно добиться очень высокий уровень производительности, превышающие hello базового диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-545">With disk caching enabled on hello Premium Storage disks, hello high scale VMs can achieve extremely high levels of performance that exceed hello underlying disk performance.</span></span>

> [!WARNING]
> <span data-ttu-id="622fe-546">Изменение приветствия кэша диска Azure отсоединяется и присоединяется hello целевого диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-546">Changing hello cache setting of an Azure disk detaches and re-attaches hello target disk.</span></span> <span data-ttu-id="622fe-547">Если диск операционной системы hello, hello ВМ перезапускается.</span><span class="sxs-lookup"><span data-stu-id="622fe-547">If it is hello operating system disk, hello VM is restarted.</span></span> <span data-ttu-id="622fe-548">Остановка всех приложений и служб, которые могут быть затронуты это прерывание, прежде чем изменять параметр кэша диска hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-548">Stop all applications/services that might be affected by this disruption before changing hello disk cache setting.</span></span>
>
>

<span data-ttu-id="622fe-549">toolearn Дополнительные сведения о работе BlobCache ссылаться toohello внутри [хранилища Azure Premium](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) записи блога.</span><span class="sxs-lookup"><span data-stu-id="622fe-549">toolearn more about how BlobCache works, refer toohello Inside [Azure Premium Storage](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) blog post.</span></span>

<span data-ttu-id="622fe-550">Это важные tooenable кэша на hello правильный набор дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-550">It is important tooenable cache on hello right set of disks.</span></span> <span data-ttu-id="622fe-551">Вы следует включить кэширование на диске premium или не будет зависеть от шаблон рабочей нагрузки hello этот диск будет обработки.</span><span class="sxs-lookup"><span data-stu-id="622fe-551">Whether you should enable disk caching on a premium disk or not will depend on hello workload pattern that disk will be handling.</span></span> <span data-ttu-id="622fe-552">В следующей таблице приведены параметры кэша для дисков операционной системы и данных по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-552">Table below shows hello default cache settings for OS and Data disks.</span></span>

| <span data-ttu-id="622fe-553">**Тип диска**</span><span class="sxs-lookup"><span data-stu-id="622fe-553">**Disk Type**</span></span> | <span data-ttu-id="622fe-554">**Параметр кэширования по умолчанию**</span><span class="sxs-lookup"><span data-stu-id="622fe-554">**Default Cache Setting**</span></span> |
| --- | --- |
| <span data-ttu-id="622fe-555">Диск ОС</span><span class="sxs-lookup"><span data-stu-id="622fe-555">OS disk</span></span> |<span data-ttu-id="622fe-556">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="622fe-556">ReadWrite</span></span> |
| <span data-ttu-id="622fe-557">Диск данных</span><span class="sxs-lookup"><span data-stu-id="622fe-557">Data disk</span></span> |<span data-ttu-id="622fe-558">None</span><span class="sxs-lookup"><span data-stu-id="622fe-558">None</span></span> |

<span data-ttu-id="622fe-559">Следующие являются hello параметры кэша рекомендуемые диска для дисков с данными</span><span class="sxs-lookup"><span data-stu-id="622fe-559">Following are hello recommended disk cache settings for data disks,</span></span>

| <span data-ttu-id="622fe-560">**Параметр кэширования диска**</span><span class="sxs-lookup"><span data-stu-id="622fe-560">**Disk Caching Setting**</span></span> | <span data-ttu-id="622fe-561">**Рекомендации о том, когда toouse этот параметр**</span><span class="sxs-lookup"><span data-stu-id="622fe-561">**Recommendation on when toouse this setting**</span></span> |
| --- | --- |
| <span data-ttu-id="622fe-562">None</span><span class="sxs-lookup"><span data-stu-id="622fe-562">None</span></span> |<span data-ttu-id="622fe-563">Задайте для кэша узла значение None для дисков с высокой интенсивностью операций записи и дисков только для записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-563">Configure host-cache as None for write-only and write-heavy disks.</span></span> |
| <span data-ttu-id="622fe-564">ReadOnly</span><span class="sxs-lookup"><span data-stu-id="622fe-564">ReadOnly</span></span> |<span data-ttu-id="622fe-565">Задайте для кэша узла значение ReadOnly для дисков, которые используются для чтения и записи или только для чтения.</span><span class="sxs-lookup"><span data-stu-id="622fe-565">Configure host-cache as ReadOnly for read-only and read-write disks.</span></span> |
| <span data-ttu-id="622fe-566">ReadWrite</span><span class="sxs-lookup"><span data-stu-id="622fe-566">ReadWrite</span></span> |<span data-ttu-id="622fe-567">Настройка кэша узла как ReadWrite только в том случае, если приложения правильно обрабатывает записи в кэше toopersistent диски с данными, если это требуется.</span><span class="sxs-lookup"><span data-stu-id="622fe-567">Configure host-cache as ReadWrite only if your application properly  handles writing cached data toopersistent disks when needed.</span></span> |

<span data-ttu-id="622fe-568">*ReadOnly*</span><span class="sxs-lookup"><span data-stu-id="622fe-568">*ReadOnly*</span></span>  
<span data-ttu-id="622fe-569">Задав для кэширования значение ReadOnly для дисков данных хранилища класса «Премиум», можно достичь низкой задержки операций чтения и очень высокой скорости выполнения операций ввода-вывода и пропускной способности при чтении для приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-569">By configuring ReadOnly caching on Premium Storage data disks, you can achieve low Read latency and get very high Read IOPS and Throughput for your application.</span></span> <span data-ttu-id="622fe-570">Это происходит по двум причинам.</span><span class="sxs-lookup"><span data-stu-id="622fe-570">This is due two reasons,</span></span>

1. <span data-ttu-id="622fe-571">Операции чтения выполнена из кэша, который находится на hello памяти виртуальной Машины, а локальный SSD, намного быстрее, чем операций чтения с диска данных hello, расположенного на hello хранилище больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="622fe-571">Reads performed from cache, which is on hello VM memory and local SSD, are much faster than reads from hello data disk, which is on hello Azure blob storage.</span></span>  
2. <span data-ttu-id="622fe-572">Хранилище Premium не учитывает приветствия выполненных операций чтения из кэша на диске hello операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-572">Premium Storage does not count hello Reads served from cache, towards hello disk IOPS and Throughput.</span></span> <span data-ttu-id="622fe-573">Таким образом, оно может tooachieve выше общее число операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-573">Therefore, your application is able tooachieve higher total IOPS and Throughput.</span></span>

<span data-ttu-id="622fe-574">*ReadWrite*</span><span class="sxs-lookup"><span data-stu-id="622fe-574">*ReadWrite*</span></span>  
<span data-ttu-id="622fe-575">По умолчанию hello диски ОС ReadWrite включено кэширование.</span><span class="sxs-lookup"><span data-stu-id="622fe-575">By default, hello OS disks have ReadWrite caching enabled.</span></span> <span data-ttu-id="622fe-576">Более того, с недавнего времени значение кэширования ReadWrite можно задать и для дисков данных.</span><span class="sxs-lookup"><span data-stu-id="622fe-576">We have recently added support for ReadWrite caching on data disks as well.</span></span> <span data-ttu-id="622fe-577">При использовании кэширования ReadWrite, необходимо иметь надлежащей toowrite hello данных из кэша toopersistent дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-577">If you are using ReadWrite caching, you must have a proper way toowrite hello data from cache toopersistent disks.</span></span> <span data-ttu-id="622fe-578">Например SQL Server обрабатывает записи в кэше дисков постоянное хранилище данных toohello сам по себе.</span><span class="sxs-lookup"><span data-stu-id="622fe-578">For example, SQL Server handles writing cached data toohello persistent storage disks on its own.</span></span> <span data-ttu-id="622fe-579">Использование кэша ReadWrite с приложением, не может обрабатывать сохранения hello обязательных данных может привести к потере toodata в случае отказа hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-579">Using ReadWrite cache with an application that does not handle persisting hello required data can lead toodata loss, if hello VM crashes.</span></span>

<span data-ttu-id="622fe-580">Например, можно применить эти рекомендации tooSQL сервера под управлением в хранилище класса Premium, выполнив следующие hello</span><span class="sxs-lookup"><span data-stu-id="622fe-580">As an example, you can apply these guidelines tooSQL Server running on Premium Storage by doing hello following,</span></span>

1. <span data-ttu-id="622fe-581">Задайте для кэша значение ReadOnly для дисков хранилища уровня "Премиум", на которых размещены файлы данных.</span><span class="sxs-lookup"><span data-stu-id="622fe-581">Configure "ReadOnly" cache on premium storage disks hosting data files.</span></span>  
   <span data-ttu-id="622fe-582">а.</span><span class="sxs-lookup"><span data-stu-id="622fe-582">a.</span></span>  <span data-ttu-id="622fe-583">Hello быстрого чтения из кэша нижней hello время запроса для SQL Server, с момента страниц данных извлекаются из toodirectly hello кэша по сравнению с дисками данных hello гораздо быстрее.</span><span class="sxs-lookup"><span data-stu-id="622fe-583">hello fast reads from cache lower hello SQL Server query time since data pages are retrieved much faster from hello cache compared toodirectly from hello data disks.</span></span>  
   <span data-ttu-id="622fe-584">b.</span><span class="sxs-lookup"><span data-stu-id="622fe-584">b.</span></span>  <span data-ttu-id="622fe-585">Если операции чтения выполняются из кэша, это означает, что диски с данными класса «Премиум» дают дополнительную пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="622fe-585">Serving reads from cache, means there is additional Throughput available from premium data disks.</span></span> <span data-ttu-id="622fe-586">Ее можно использовать на SQL Server для извлечения большего количества страниц данных и выполнения других операций, таких как резервное копирование и восстановление, пакетные загрузки и перестройки индекса.</span><span class="sxs-lookup"><span data-stu-id="622fe-586">SQL Server can use this additional Throughput towards retrieving more data pages and other operations like backup/restore, batch loads, and index rebuilds.</span></span>  
2. <span data-ttu-id="622fe-587">«None» настройки кэша в хранилище класса premium диски размещения файлов журнала hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-587">Configure "None" cache on premium storage disks hosting hello log files.</span></span>  
   <span data-ttu-id="622fe-588">а.</span><span class="sxs-lookup"><span data-stu-id="622fe-588">a.</span></span>  <span data-ttu-id="622fe-589">В файлах журнала преимущественно содержатся данные операций с высокой интенсивностью записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-589">Log files have primarily write-heavy operations.</span></span> <span data-ttu-id="622fe-590">Таким образом они не преимущества hello кэша только для чтения.</span><span class="sxs-lookup"><span data-stu-id="622fe-590">Therefore, they do not benefit from hello ReadOnly cache.</span></span>

## <a name="disk-striping"></a><span data-ttu-id="622fe-591">Чередование дисков</span><span class="sxs-lookup"><span data-stu-id="622fe-591">Disk Striping</span></span>
<span data-ttu-id="622fe-592">Может ли быть масштабных, виртуальная машина присоединена с несколькими premium хранения постоянных, диски hello чередуются вместе tooaggregate их операций ввода-вывода, пропускной способности и емкость хранилища.</span><span class="sxs-lookup"><span data-stu-id="622fe-592">When a high scale VM is attached with several premium storage persistent disks, hello disks can be striped together tooaggregate their IOPs, bandwidth, and storage capacity.</span></span>

<span data-ttu-id="622fe-593">В Windows можно использовать вместе toostripe диски дисковых пространств.</span><span class="sxs-lookup"><span data-stu-id="622fe-593">On Windows, you can use Storage Spaces toostripe disks together.</span></span> <span data-ttu-id="622fe-594">Для каждого диска в пуле необходимо настроить один столбец.</span><span class="sxs-lookup"><span data-stu-id="622fe-594">You must configure one column for each disk in a pool.</span></span> <span data-ttu-id="622fe-595">В противном случае hello общую производительность чередующийся том может быть ниже, чем ожидается, из-за toouneven распределение трафика между дисками hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-595">Otherwise, hello overall performance of striped volume can be lower than expected, due toouneven distribution of traffic across hello disks.</span></span>

<span data-ttu-id="622fe-596">Внимание: С помощью пользовательского интерфейса диспетчера серверов, можно задать hello общее количество столбцов вверх too8 для чередующийся том.</span><span class="sxs-lookup"><span data-stu-id="622fe-596">Important: Using Server Manager UI, you can set hello total number of columns up too8 for a striped volume.</span></span> <span data-ttu-id="622fe-597">При присоединении более 8 дисков, используйте PowerShell toocreate hello тома.</span><span class="sxs-lookup"><span data-stu-id="622fe-597">When attaching more than 8 disks, use PowerShell toocreate hello volume.</span></span> <span data-ttu-id="622fe-598">С помощью PowerShell, можно задать число столбцов в hello равно toohello число дисков.</span><span class="sxs-lookup"><span data-stu-id="622fe-598">Using PowerShell, you can set hello number of columns equal toohello number of disks.</span></span> <span data-ttu-id="622fe-599">Например, в случае 16 дисков в одном чередующемся наборе; Укажите 16 столбцов в hello *NumberOfColumns* параметр hello *New-VirtualDisk* командлета PowerShell.</span><span class="sxs-lookup"><span data-stu-id="622fe-599">For example, if there are 16 disks in a single stripe set; specify 16 columns in hello *NumberOfColumns* parameter of hello *New-VirtualDisk* PowerShell cmdlet.</span></span>

<span data-ttu-id="622fe-600">В Linux используйте hello MDADM программа toostripe диски друг с другом.</span><span class="sxs-lookup"><span data-stu-id="622fe-600">On Linux, use hello MDADM utility toostripe disks together.</span></span> <span data-ttu-id="622fe-601">Подробные инструкции по чередование дисков в Linux см. в слишком[Настройка программного RAID на платформе Linux](../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="622fe-601">For detailed steps on striping disks on Linux refer too[Configure Software RAID on Linux](../virtual-machines/linux/configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="622fe-602">*Размер блока чередования*</span><span class="sxs-lookup"><span data-stu-id="622fe-602">*Stripe Size*</span></span>  
<span data-ttu-id="622fe-603">Важные настройки в чередование дисков — размер чередования hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-603">An important configuration in disk striping is hello stripe size.</span></span> <span data-ttu-id="622fe-604">размер чередования Hello или размер блока — hello наименьшее блоков данных, приложение можно обращаться в чередующемся томе.</span><span class="sxs-lookup"><span data-stu-id="622fe-604">hello stripe size or block size is hello smallest chunk of data that application can address on a striped volume.</span></span> <span data-ttu-id="622fe-605">размер чередования Hello настроенному зависит от типа hello приложения и его шаблоном запроса.</span><span class="sxs-lookup"><span data-stu-id="622fe-605">hello stripe size you configure depends on hello type of application and its request pattern.</span></span> <span data-ttu-id="622fe-606">Если размер неправильный чередования hello, он может привести рассогласование tooIO, что приводит toodegraded производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-606">If you choose hello wrong stripe size, it could lead tooIO misalignment, which leads toodegraded performance of your application.</span></span>

<span data-ttu-id="622fe-607">Например если запрос ввода-ВЫВОДА, создаваемые приложения больше, чем размер чередования дисков hello, системы хранения hello записывает его через stripe единицы границы на нескольких дисках.</span><span class="sxs-lookup"><span data-stu-id="622fe-607">For example, if an IO request generated by your application is bigger than hello disk stripe size, hello storage system writes it across stripe unit boundaries on more than one disk.</span></span> <span data-ttu-id="622fe-608">При его время tooaccess эти данные, он получит tooseek через несколько запросов hello toocomplete stripe единицы.</span><span class="sxs-lookup"><span data-stu-id="622fe-608">When it is time tooaccess that data, it will have tooseek across more than one stripe units toocomplete hello request.</span></span> <span data-ttu-id="622fe-609">Hello воздействие такого поведения можно привести toosubstantial снижение производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-609">hello cumulative effect of such behavior can lead toosubstantial performance degradation.</span></span> <span data-ttu-id="622fe-610">На hello другой стороны, если размер запроса ввода-ВЫВОДА hello меньше, чем размер чередования и если случайный характер, hello запросы ввода-ВЫВОДА может сложить на hello же диск является узким и в конечном счете ухудшения производительности операций ввода-ВЫВОДА hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-610">On hello other hand, if hello IO request size is smaller than stripe size, and if it is random in nature, hello IO requests may add up on hello same disk causing a bottleneck and ultimately degrading hello IO performance.</span></span>

<span data-ttu-id="622fe-611">В зависимости от типа hello рабочую нагрузку, которую использует приложение выберите соответствующий stripe размер.</span><span class="sxs-lookup"><span data-stu-id="622fe-611">Depending on hello type of workload your application is running, choose an appropriate stripe size.</span></span> <span data-ttu-id="622fe-612">Для случайных небольших запросов ввода-вывода следует использовать меньший размер блока чередования,</span><span class="sxs-lookup"><span data-stu-id="622fe-612">For random small IO requests, use a smaller stripe size.</span></span> <span data-ttu-id="622fe-613">а для больших последовательных запросов ввода-вывода — более крупный размер блока чередования.</span><span class="sxs-lookup"><span data-stu-id="622fe-613">Whereas, for large sequential IO requests use a larger stripe size.</span></span> <span data-ttu-id="622fe-614">Узнайте hello stripe размер рекомендаций для приложения hello, приложение будет выполняться в хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-614">Find out hello stripe size recommendations for hello application you will be running on Premium Storage.</span></span> <span data-ttu-id="622fe-615">Дополнительную информацию см.</span><span class="sxs-lookup"><span data-stu-id="622fe-615">For SQL Server, configure stripe size of 64KB for OLTP workloads and 256KB for data warehousing workloads.</span></span> <span data-ttu-id="622fe-616">В разделе [рекомендации по производительности для SQL Server на виртуальных машинах Azure](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) toolearn дополнительные.</span><span class="sxs-lookup"><span data-stu-id="622fe-616">See [Performance best practices for SQL Server on Azure VMs](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md#disks-guidance) toolearn more.</span></span>

> [!NOTE]
> <span data-ttu-id="622fe-617">На виртуальной машине серии DS можно чередовать до 32 дисков хранилища класса «Премиум», а на виртуальной машине серии GS — до 64 дисков хранилища класса «Премиум».</span><span class="sxs-lookup"><span data-stu-id="622fe-617">You can stripe together a maximum of 32 premium storage disks on a DS series VM and 64 premium storage disks on a GS series VM.</span></span>
>
>

## <a name="multi-threading"></a><span data-ttu-id="622fe-618">Многопоточность</span><span class="sxs-lookup"><span data-stu-id="622fe-618">Multi-threading</span></span>
<span data-ttu-id="622fe-619">Azure разработала расширенной параллельной toobe платформы хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-619">Azure has designed Premium Storage platform toobe massively parallel.</span></span> <span data-ttu-id="622fe-620">Так, многопоточное приложение обеспечивает более высокую производительность по сравнению с однопоточным приложением.</span><span class="sxs-lookup"><span data-stu-id="622fe-620">Therefore, a multi-threaded application achieves much higher performance than a single-threaded application.</span></span> <span data-ttu-id="622fe-621">Многопоточное приложение разделяет его задач в нескольких потоках и повышает эффективность своей работы, используя hello виртуальной Машины и максимальное toohello ресурсы диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-621">A multi-threaded application splits up its tasks across multiple threads and increases efficiency of its execution by utilizing hello VM and disk resources toohello maximum.</span></span>

<span data-ttu-id="622fe-622">Например если приложение выполняется на одном ядре виртуальную Машину с помощью двух потоков, hello ЦП можно переключаться между эффективность tooachieve hello два потока.</span><span class="sxs-lookup"><span data-stu-id="622fe-622">For example, if your application is running on a single core VM using two threads, hello CPU can switch between hello two threads tooachieve efficiency.</span></span> <span data-ttu-id="622fe-623">Пока один поток ожидает toocomplete операции ввода-ВЫВОДА диска, hello ЦП можно переключить toohello другого потока.</span><span class="sxs-lookup"><span data-stu-id="622fe-623">While one thread is waiting on a disk IO toocomplete, hello CPU can switch toohello other thread.</span></span> <span data-ttu-id="622fe-624">Таким образом, используя два потока, можно выполнить намного больше задач, чем с использованием одного.</span><span class="sxs-lookup"><span data-stu-id="622fe-624">In this way, two threads can accomplish more than a single thread would.</span></span> <span data-ttu-id="622fe-625">Если hello виртуальная машина имеет более одного ядра, дальнейшей приводит к снижению уровня времени выполнения, так как каждое ядро может выполняться задачи параллельно.</span><span class="sxs-lookup"><span data-stu-id="622fe-625">If hello VM has more than one core, it further decreases running time since each core can execute tasks in parallel.</span></span>

<span data-ttu-id="622fe-626">Не может быть готовое приложение реализует один способ hello может toochange потоков или многопоточность.</span><span class="sxs-lookup"><span data-stu-id="622fe-626">You may not be able toochange hello way an off-the-shelf application implements single threading or multi-threading.</span></span> <span data-ttu-id="622fe-627">Например, SQL Server может выполнять задачи, используя несколько процессоров и ядер.</span><span class="sxs-lookup"><span data-stu-id="622fe-627">For example, SQL Server is capable of handling multi-CPU and multi-core.</span></span> <span data-ttu-id="622fe-628">Однако SQL Server определяет, при каких условиях будет использовать один или несколько потоков tooprocess запроса.</span><span class="sxs-lookup"><span data-stu-id="622fe-628">However, SQL Server decides under what conditions it will leverage one or more threads tooprocess a query.</span></span> <span data-ttu-id="622fe-629">С использованием многопоточности на этом сервере можно выполнять запросы и создавать индексы.</span><span class="sxs-lookup"><span data-stu-id="622fe-629">It can run queries and build indexes using multi-threading.</span></span> <span data-ttu-id="622fe-630">Для запроса, который включает в себя соединения больших таблиц и сортировка данных перед возвратом toohello пользователя SQL Server, скорее всего будет использовать несколько потоков.</span><span class="sxs-lookup"><span data-stu-id="622fe-630">For a query that involves joining large tables and sorting data before returning toohello user, SQL Server will likely use multiple threads.</span></span> <span data-ttu-id="622fe-631">Пользователь не может управлять тем, каким образом SQL Server будет обрабатывать запрос — с использованием одного потока или нескольких.</span><span class="sxs-lookup"><span data-stu-id="622fe-631">However, a user cannot control whether SQL Server executes a query using a single thread or multiple threads.</span></span>

<span data-ttu-id="622fe-632">Параметры конфигурации, его можно изменить tooinfluence данный многопоточность или параллельной обработки приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-632">There are configuration settings that you can alter tooinfluence this multi-threading or parallel processing of an application.</span></span> <span data-ttu-id="622fe-633">Например в случае SQL Server это hello максимальной степени параллелизма конфигурации.</span><span class="sxs-lookup"><span data-stu-id="622fe-633">For example, in case of SQL Server it is hello maximum Degree of Parallelism configuration.</span></span> <span data-ttu-id="622fe-634">Этот параметр MAXDOP, позволяет tooconfigure hello максимальное число процессоров, которые можно использовать SQL Server, при параллельной обработки.</span><span class="sxs-lookup"><span data-stu-id="622fe-634">This setting called MAXDOP, allows you tooconfigure hello maximum number of processors SQL Server can use when parallel processing.</span></span> <span data-ttu-id="622fe-635">Этот параметр можно настроить для отдельных запросов и операций с индексами.</span><span class="sxs-lookup"><span data-stu-id="622fe-635">You can configure MAXDOP for individual queries or index operations.</span></span> <span data-ttu-id="622fe-636">Это полезно в тех случаях, когда требуется toobalance ресурсы системы для критических производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-636">This is beneficial when you want toobalance resources of your system for a performance critical application.</span></span>

<span data-ttu-id="622fe-637">Предположим, например, приложение с помощью SQL Server выполняется большого запроса и операции с индексами в hello то же время.</span><span class="sxs-lookup"><span data-stu-id="622fe-637">For example, say your application using SQL Server is executing a large query and an index operation at hello same time.</span></span> <span data-ttu-id="622fe-638">Предположим, было toobe операции индекса hello большого запроса toohello более высокой производительностью по сравнению.</span><span class="sxs-lookup"><span data-stu-id="622fe-638">Let us assume that you wanted hello index operation toobe more performant compared toohello large query.</span></span> <span data-ttu-id="622fe-639">В этом случае можно задать значение MAXDOP hello toobe операции индекса выше, чем значение MAXDOP для запроса hello hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-639">In such a case, you can set MAXDOP value of hello index operation toobe higher than hello MAXDOP value for hello query.</span></span> <span data-ttu-id="622fe-640">В этом случае SQL Server имеет большее количество процессоров, которые может использовать для hello индекс операции по сравнению toohello число процессоров, он может выделить toohello запроса имеет большой размер.</span><span class="sxs-lookup"><span data-stu-id="622fe-640">This way, SQL Server has more number of processors that it can leverage for hello index operation compared toohello number of processors it can dedicate toohello large query.</span></span> <span data-ttu-id="622fe-641">Помните, что вы не управляете hello числа потоков, SQL Server будет использовать для каждой операции.</span><span class="sxs-lookup"><span data-stu-id="622fe-641">Remember, you do not control hello number of threads SQL Server will use for each operation.</span></span> <span data-ttu-id="622fe-642">Позволяет задать максимальное число процессоров выделенных для hello многопоточность.</span><span class="sxs-lookup"><span data-stu-id="622fe-642">You can control hello maximum number of processors being dedicated for multi-threading.</span></span>

<span data-ttu-id="622fe-643">Дополнительные сведения см. в статье [Степень параллелизма](https://technet.microsoft.com/library/ms188611.aspx) в документации по SQL Server.</span><span class="sxs-lookup"><span data-stu-id="622fe-643">Learn more about [Degrees of Parallelism](https://technet.microsoft.com/library/ms188611.aspx) in SQL Server.</span></span> <span data-ttu-id="622fe-644">Определить такие параметры, влияющие на многопоточность в приложении и их производительности toooptimize конфигурации.</span><span class="sxs-lookup"><span data-stu-id="622fe-644">Find out such settings that influence multi-threading in your application and their configurations toooptimize performance.</span></span>

## <a name="queue-depth"></a><span data-ttu-id="622fe-645">Длина очереди</span><span class="sxs-lookup"><span data-stu-id="622fe-645">Queue Depth</span></span>
<span data-ttu-id="622fe-646">Здравствуйте, глубина очереди или длина очереди или размер очереди — hello, количество ожидающих запросов ввода-ВЫВОДА в системе hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-646">hello Queue Depth or Queue Length or Queue Size is hello number of pending IO requests in hello system.</span></span> <span data-ttu-id="622fe-647">Hello значение длины очереди определяет, сколько операций ввода-ВЫВОДА приложения можно выравнивать, какие диски хранилища hello будет обрабатывать.</span><span class="sxs-lookup"><span data-stu-id="622fe-647">hello value of Queue Depth determines how many IO operations your application can line up, which hello storage disks will be processing.</span></span> <span data-ttu-id="622fe-648">Он влияет на все hello три приложения индикаторов производительности, мы уже в этой статье viz. операций ввода-ВЫВОДА, пропускной способности и задержки.</span><span class="sxs-lookup"><span data-stu-id="622fe-648">It affects all hello three application performance indicators that we discussed in this article viz., IOPS, Throughput and Latency.</span></span>

<span data-ttu-id="622fe-649">Длина очереди и многопоточность тесно связаны.</span><span class="sxs-lookup"><span data-stu-id="622fe-649">Queue Depth and multi-threading are closely related.</span></span> <span data-ttu-id="622fe-650">значение длины очереди Hello указывает, сколько Многопоточность может осуществляться через приложение hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-650">hello Queue Depth value indicates how much multi-threading can be achieved by hello application.</span></span> <span data-ttu-id="622fe-651">Если hello глубина очереди имеет большой размер, приложение может выполнить дополнительные операции параллельно, другими словами, более многопоточность.</span><span class="sxs-lookup"><span data-stu-id="622fe-651">If hello Queue Depth is large, application can execute more operations concurrently, in other words, more multi-threading.</span></span> <span data-ttu-id="622fe-652">Если глубина очереди hello мал, несмотря на то, что приложения является многопотоковым, не будет иметь достаточное количество запросов, разместить для параллельного выполнения.</span><span class="sxs-lookup"><span data-stu-id="622fe-652">If hello Queue Depth is small, even though application is multi-threaded, it will not have enough requests lined up for concurrent execution.</span></span>

<span data-ttu-id="622fe-653">Как правило, выключение hello Полка приложений не позволяют глубина очереди toochange hello, поскольку если задано неправильно, он будет выполнять больше вреда, чем пользы.</span><span class="sxs-lookup"><span data-stu-id="622fe-653">Typically, off hello shelf applications do not allow you toochange hello queue depth, because if set incorrectly it will do more harm than good.</span></span> <span data-ttu-id="622fe-654">Приложения будут значение hello правой очереди глубина tooget hello оптимальной производительности.</span><span class="sxs-lookup"><span data-stu-id="622fe-654">Applications will set hello right value of queue depth tooget hello optimal performance.</span></span> <span data-ttu-id="622fe-655">Тем не менее он является важным toounderstand эту концепцию, чтобы устранения проблем с производительностью в приложении.</span><span class="sxs-lookup"><span data-stu-id="622fe-655">However, it is important toounderstand this concept so that you can troubleshoot performance issues with your application.</span></span> <span data-ttu-id="622fe-656">Также вы можете увидеть эффекты hello длину очереди путем запуска средства оценки эффективности в системе.</span><span class="sxs-lookup"><span data-stu-id="622fe-656">You can also observe hello effects of queue depth by running benchmarking tools on your system.</span></span>

<span data-ttu-id="622fe-657">Для некоторых приложений предоставляют параметры tooinfluence hello глубина очереди.</span><span class="sxs-lookup"><span data-stu-id="622fe-657">Some applications provide settings tooinfluence hello Queue Depth.</span></span> <span data-ttu-id="622fe-658">Например параметр MAXDOP (максимальная степень параллелизма) hello в SQL Server описано в предыдущем разделе.</span><span class="sxs-lookup"><span data-stu-id="622fe-658">For example, hello MAXDOP (maximum degree of parallelism) setting in SQL Server explained in previous section.</span></span> <span data-ttu-id="622fe-659">MAXDOP является способом tooinfluence длину очереди и многопоточность, несмотря на то, что он не изменяет непосредственно hello значение длины очереди SQL Server.</span><span class="sxs-lookup"><span data-stu-id="622fe-659">MAXDOP is a way tooinfluence Queue Depth and multi-threading, although it does not directly change hello Queue Depth value of SQL Server.</span></span>

<span data-ttu-id="622fe-660">*Высокое значение длины очереди*</span><span class="sxs-lookup"><span data-stu-id="622fe-660">*High Queue Depth*</span></span>  
<span data-ttu-id="622fe-661">Глубина очереди высокой выравнивался больше операций на диске hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-661">A high queue depth lines up more operations on hello disk.</span></span> <span data-ttu-id="622fe-662">диск Hello знает hello следующего запроса в его очереди заранее.</span><span class="sxs-lookup"><span data-stu-id="622fe-662">hello disk knows hello next request in its queue ahead of time.</span></span> <span data-ttu-id="622fe-663">Следовательно диск hello можно запланировать операции заранее и их обработки в оптимальной последовательности.</span><span class="sxs-lookup"><span data-stu-id="622fe-663">Consequently, hello disk can schedule operations ahead of time and process them in an optimal sequence.</span></span> <span data-ttu-id="622fe-664">Поскольку приложения hello отправляет дополнительные запросы toohello диск, диск hello может обрабатывать несколько параллельных операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-664">Since hello application is sending more requests toohello disk, hello disk can process more parallel IOs.</span></span> <span data-ttu-id="622fe-665">В конечном счете, приложение hello будет может tooachieve выше операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-665">Ultimately, hello application will be able tooachieve higher IOPS.</span></span> <span data-ttu-id="622fe-666">Так как приложение обрабатывает больше запросов, hello общая пропускная способность приложения hello также увеличивается.</span><span class="sxs-lookup"><span data-stu-id="622fe-666">Since application is processing more requests, hello total Throughput of hello application also increases.</span></span>

<span data-ttu-id="622fe-667">Как правило, приложение может достигать максимальной пропускной способности при наличии 8–16 и более ожидающих выполнения операций ввода-вывода на подключенный диск.</span><span class="sxs-lookup"><span data-stu-id="622fe-667">Typically, an application can achieve maximum Throughput with 8-16+ outstanding IOs per attached disk.</span></span> <span data-ttu-id="622fe-668">Если длина очереди, приложения не внедряет достаточно toohello системы IOs, и он обрабатывал меньше объема, в течение указанного периода.</span><span class="sxs-lookup"><span data-stu-id="622fe-668">If a Queue Depth is one, application is not pushing enough IOs toohello system, and it will process less amount of in a given period.</span></span> <span data-ttu-id="622fe-669">Другими словами, пропускная способность будет меньше.</span><span class="sxs-lookup"><span data-stu-id="622fe-669">In other words, less Throughput.</span></span>

<span data-ttu-id="622fe-670">Например, в SQL Server hello параметр MAXDOP значение для запроса слишком «4» сообщает SQL Server, его можно использовать toofour ядер tooexecute hello запрос.</span><span class="sxs-lookup"><span data-stu-id="622fe-670">For example, in SQL Server, setting hello MAXDOP value for a query too"4" informs SQL Server that it can use up toofour cores tooexecute hello query.</span></span> <span data-ttu-id="622fe-671">SQL Server определяют, что наилучшее очереди глубина значение и hello количество ядер для выполнения запроса hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-671">SQL Server will determine what is best queue depth value and hello number of cores for hello query execution.</span></span>

<span data-ttu-id="622fe-672">*Оптимальная длина очереди*</span><span class="sxs-lookup"><span data-stu-id="622fe-672">*Optimal Queue Depth*</span></span>  
<span data-ttu-id="622fe-673">Использование очень высокого значения длины очереди также имеет свои недостатки.</span><span class="sxs-lookup"><span data-stu-id="622fe-673">Very high queue depth value also has its drawbacks.</span></span> <span data-ttu-id="622fe-674">Если значение глубины очереди является слишком большим, приложение hello будет предпринята попытка toodrive очень высокий уровень операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-674">If queue depth value is too high, hello application will try toodrive very high IOPS.</span></span> <span data-ttu-id="622fe-675">Если приложение использует непостоянные диски с недостаточным количеством подготовленных операций ввода-вывода в секунду, это может отрицательно повлиять на задержку.</span><span class="sxs-lookup"><span data-stu-id="622fe-675">Unless application has persistent disks with sufficient provisioned IOPS, this can negatively affect application latencies.</span></span> <span data-ttu-id="622fe-676">Следующая формула показаны hello отношения между операций ввода-ВЫВОДА, задержки и длину очереди.</span><span class="sxs-lookup"><span data-stu-id="622fe-676">Following formula shows hello relationship between IOPS, Latency and Queue Depth.</span></span>  
    ![](media/storage-premium-storage-performance/image6.png)

<span data-ttu-id="622fe-677">Не следует настраивать высокое значение длины очереди tooany, но tooan оптимальное значение, которое может обеспечить достаточное количество операций ввода-ВЫВОДА для приложения hello, не влияя на задержку.</span><span class="sxs-lookup"><span data-stu-id="622fe-677">You should not configure Queue Depth tooany high value, but tooan optimal value, which can deliver enough IOPS for hello application without affecting latencies.</span></span> <span data-ttu-id="622fe-678">Например, если задержка приложения hello должен toobe 1 миллисекунды, hello глубина очереди необходима tooachieve имеет 5 000 операций ввода-ВЫВОДА, длина Очереди = 5000 x 0,001 = 5.</span><span class="sxs-lookup"><span data-stu-id="622fe-678">For example, if hello application latency needs toobe 1 millisecond, hello Queue Depth required tooachieve 5,000 IOPS is, QD = 5000 x 0.001 = 5.</span></span>

<span data-ttu-id="622fe-679">*Длина очереди чередующегося тома*</span><span class="sxs-lookup"><span data-stu-id="622fe-679">*Queue Depth for Striped Volume*</span></span>  
<span data-ttu-id="622fe-680">Для чередующегося тома следует использовать достаточно высокое значение длины очереди, чтобы у каждого диска было отдельное значение максимальной длины очереди.</span><span class="sxs-lookup"><span data-stu-id="622fe-680">For a striped volume, maintain a high enough queue depth such that, every disk has a peak queue depth individually.</span></span> <span data-ttu-id="622fe-681">Например, рассмотрим приложение, которое помещает длине очереди 2 и в hello stripe 4 диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-681">For example, consider an application that pushes a queue depth of 2 and there are 4 disks in hello stripe.</span></span> <span data-ttu-id="622fe-682">Hello два запроса ввода-ВЫВОДА переходит tootwo дисков, а оставшиеся два диска будут простаивать.</span><span class="sxs-lookup"><span data-stu-id="622fe-682">hello two IO requests will go tootwo disks and remaining two disks will be idle.</span></span> <span data-ttu-id="622fe-683">Таким образом можно настройте длину очереди hello, таким образом, что все диски hello может быть занят.</span><span class="sxs-lookup"><span data-stu-id="622fe-683">Therefore, configure hello queue depth such that all hello disks can be busy.</span></span> <span data-ttu-id="622fe-684">Формула ниже показано, как toodetermine hello длине очереди чередующиеся тома.</span><span class="sxs-lookup"><span data-stu-id="622fe-684">Formula below shows how toodetermine hello queue depth of striped volumes.</span></span>  
    ![](media/storage-premium-storage-performance/image7.png)

## <a name="throttling"></a><span data-ttu-id="622fe-685">Регулирование</span><span class="sxs-lookup"><span data-stu-id="622fe-685">Throttling</span></span>
<span data-ttu-id="622fe-686">Azure подготавливает хранилище Premium заданное число операций ввода-ВЫВОДА и пропускной способности в зависимости от размеров виртуальных Машин hello и размеры дисков, выбранный.</span><span class="sxs-lookup"><span data-stu-id="622fe-686">Azure Premium Storage provisions specified number of IOPS and Throughput depending on hello VM sizes and disk sizes you choose.</span></span> <span data-ttu-id="622fe-687">Каждый раз, когда приложение пытается toodrive операций ввода-ВЫВОДА или пропускную способность выше эти ограничения могут обрабатывать какие hello виртуальной Машины и диска, хранилище Premium регулирование его.</span><span class="sxs-lookup"><span data-stu-id="622fe-687">Anytime your application tries toodrive IOPS or Throughput above these limits of what hello VM or disk can handle, Premium Storage will throttle it.</span></span> <span data-ttu-id="622fe-688">Это проявляется в виде hello снижение производительности в приложении.</span><span class="sxs-lookup"><span data-stu-id="622fe-688">This manifests in hello form of degraded performance in your application.</span></span> <span data-ttu-id="622fe-689">что выражается в повышенной задержке, низкой пропускной способности или меньшем количестве операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="622fe-689">This can mean higher latency, lower Throughput or lower IOPS.</span></span> <span data-ttu-id="622fe-690">Если хранилище класса «Премиум» не выполнит регулировку, может произойти сбой всего приложения, так как оно превысит максимальные значения, которых могут достичь его ресурсы.</span><span class="sxs-lookup"><span data-stu-id="622fe-690">If Premium Storage does not throttle, your application could completely fail by exceeding what its resources are capable of achieving.</span></span> <span data-ttu-id="622fe-691">Таким образом, из-за проблемы производительности tooavoid toothrottling всегда подготовки достаточные ресурсы для приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-691">So, tooavoid performance issues due toothrottling, always provision sufficient resources for your application.</span></span> <span data-ttu-id="622fe-692">Имейте в виду, рассматриваются в hello размеры виртуальных Машин и диск размеры разделах выше.</span><span class="sxs-lookup"><span data-stu-id="622fe-692">Take into consideration what we discussed in hello VM sizes and Disk sizes sections above.</span></span> <span data-ttu-id="622fe-693">По измерению производительности является лучшим способом toofigure hello какие ресурсы необходимо будет toohost приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-693">Benchmarking is hello best way toofigure out what resources you will need toohost your application.</span></span>

## <a name="benchmarking"></a><span data-ttu-id="622fe-694">Тестирование производительности</span><span class="sxs-lookup"><span data-stu-id="622fe-694">Benchmarking</span></span>
<span data-ttu-id="622fe-695">По измерению производительности — процесс hello имитация разную рабочую нагрузку на приложение и измерения производительности приложения hello для каждой рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="622fe-695">Benchmarking is hello process of simulating different workloads on your application and measuring hello application performance for each workload.</span></span> <span data-ttu-id="622fe-696">С помощью hello действия, описанные в предыдущем разделе, где собраны hello требований к производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-696">Using hello steps described in an earlier section, you have gathered hello application performance requirements.</span></span> <span data-ttu-id="622fe-697">Путем запуска средства на виртуальных машинах hello, где размещено приложение hello по измерению производительности, можно определить уровни производительности hello, приложения можно добиться с помощью хранилища Premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-697">By running benchmarking tools on hello VMs hosting hello application, you can determine hello performance levels that your application can achieve with Premium Storage.</span></span> <span data-ttu-id="622fe-698">В этом разделе приведены примеры тестирования производительности виртуальной машины серии DS14 класса «Стандартный», для которой подготовлены диски хранилища класса «Премиум».</span><span class="sxs-lookup"><span data-stu-id="622fe-698">In this section, we provide you examples of benchmarking a Standard DS14 VM provisioned with Azure Premium Storage disks.</span></span>

<span data-ttu-id="622fe-699">Мы использовали стандартные инструменты тестирования производительности Iometer для Windows и FIO для Linux.</span><span class="sxs-lookup"><span data-stu-id="622fe-699">We have used common benchmarking tools Iometer and FIO, for Windows and Linux respectively.</span></span> <span data-ttu-id="622fe-700">Эти средства породить имитации рабочей нагрузки и производительности системы hello мер, аналогичной рабочей нескольких потоков.</span><span class="sxs-lookup"><span data-stu-id="622fe-700">These tools spawn multiple threads simulating a production like workload, and measure hello system performance.</span></span> <span data-ttu-id="622fe-701">С помощью средств hello можно также настроить параметры, как Глубина блока размером и очереди, который обычно нельзя изменить для приложения.</span><span class="sxs-lookup"><span data-stu-id="622fe-701">Using hello tools you can also configure parameters like block size and queue depth, which you normally cannot change for an application.</span></span> <span data-ttu-id="622fe-702">Это дает больше гибкости toodrive hello максимальную производительность на высокий уровень масштабирования виртуальных Машин, предоставлен дисков "премиум" для различных типов рабочих нагрузок приложений.</span><span class="sxs-lookup"><span data-stu-id="622fe-702">This gives you more flexibility toodrive hello maximum performance on a high scale VM provisioned with premium disks for different types of application workloads.</span></span> <span data-ttu-id="622fe-703">Дополнительные сведения о каждой средство сравнения эффективности посетите toolearn [Iometer](http://www.iometer.org/) и [FIO](http://freecode.com/projects/fio).</span><span class="sxs-lookup"><span data-stu-id="622fe-703">toolearn more about each benchmarking tool visit [Iometer](http://www.iometer.org/) and [FIO](http://freecode.com/projects/fio).</span></span>

<span data-ttu-id="622fe-704">toofollow hello примерах ниже, создайте Стандартная виртуальная машина DS14 и вложите 11 toohello диски Premium хранилища виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-704">toofollow hello examples below, create a Standard DS14 VM and attach 11 Premium Storage disks toohello VM.</span></span> <span data-ttu-id="622fe-705">Hello 11 дисков настройте 10 дисков с узлом, кэширование как «Нет» и чередовать их в том, называется NoCacheWrites.</span><span class="sxs-lookup"><span data-stu-id="622fe-705">Of hello 11 disks, configure 10 disks with host caching as "None" and stripe them into a volume called NoCacheWrites.</span></span> <span data-ttu-id="622fe-706">Настройка кэширования «Только для чтения» на диске, оставшиеся hello узла и создайте том вызове CacheReads с этого диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-706">Configure host caching as "ReadOnly" on hello remaining disk and create a volume called CacheReads with this disk.</span></span> <span data-ttu-id="622fe-707">С помощью этой программы установки, можно будет toosee hello максимальной Read и Write производительности Стандартная виртуальная машина DS14.</span><span class="sxs-lookup"><span data-stu-id="622fe-707">Using this setup, you will be able toosee hello maximum Read and Write performance from a Standard DS14 VM.</span></span> <span data-ttu-id="622fe-708">Дополнительные сведения о создании виртуальной Машины DS14 с дисков "премиум" go слишком[Создание и использование учетной записи хранения Premium для диска данных виртуальной машины](storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="622fe-708">For detailed steps about creating a DS14 VM with premium disks, go too[Create and use a Premium Storage account for a virtual machine data disk](storage-premium-storage.md).</span></span>

<span data-ttu-id="622fe-709">*Прогрев hello кэша*</span><span class="sxs-lookup"><span data-stu-id="622fe-709">*Warming up hello Cache*</span></span>  
<span data-ttu-id="622fe-710">Hello диск с кэширование узла ReadOnly будет может toogive выше операций ввода-ВЫВОДА превышает лимит hello диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-710">hello disk with ReadOnly host caching will be able toogive higher IOPS than hello disk limit.</span></span> <span data-ttu-id="622fe-711">tooget максимального производительность чтения из кэша узла hello, сначала необходимо прогрева hello кэша диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-711">tooget this maximum read performance from hello host cache, first you must warm up hello cache of this disk.</span></span> <span data-ttu-id="622fe-712">Это гарантирует, что напрямую, hello операций ввода-вывода чтения какие средство сравнения эффективности повлекут на томе CacheReads фактически достигает hello кэша и не hello диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-712">This ensures that hello Read IOs which benchmarking tool will drive on CacheReads volume actually hits hello cache and not hello disk directly.</span></span> <span data-ttu-id="622fe-713">результат попаданий в кэш Hello в дополнительных операций ввода-ВЫВОДА из одиночного кэша hello включена диска.</span><span class="sxs-lookup"><span data-stu-id="622fe-713">hello cache hits result in additional IOPS from hello single cache enabled disk.</span></span>

> <span data-ttu-id="622fe-714">**Важно!**</span><span class="sxs-lookup"><span data-stu-id="622fe-714">**Important:**</span></span>  
> <span data-ttu-id="622fe-715">Необходимо прогрева hello кэш до запуска тестирования производительности, каждый раз при перезагрузке ВМ.</span><span class="sxs-lookup"><span data-stu-id="622fe-715">You must warm up hello cache before running benchmarking, every time VM is rebooted.</span></span>
>
>

#### <a name="iometer"></a><span data-ttu-id="622fe-716">Iometer</span><span class="sxs-lookup"><span data-stu-id="622fe-716">Iometer</span></span>
<span data-ttu-id="622fe-717">[Загрузите средство Iometer hello](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) на hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="622fe-717">[Download hello Iometer tool](http://sourceforge.net/projects/iometer/files/iometer-stable/2006-07-27/iometer-2006.07.27.win32.i386-setup.exe/download) on hello VM.</span></span>

<span data-ttu-id="622fe-718">*Тестовый файл*</span><span class="sxs-lookup"><span data-stu-id="622fe-718">*Test file*</span></span>  
<span data-ttu-id="622fe-719">Iometer использует файл теста, хранящиеся на томе hello, на котором будут выполняться по измерению производительности теста hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-719">Iometer uses a test file that is stored on hello volume on which you will run hello benchmarking test.</span></span> <span data-ttu-id="622fe-720">Движущей операций чтения и записи в данном тестов файл toomeasure hello диск операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-720">It drives Reads and Writes on this test file toomeasure hello disk IOPS and Throughput.</span></span> <span data-ttu-id="622fe-721">Если этот файл не указан, Iometer создаст его.</span><span class="sxs-lookup"><span data-stu-id="622fe-721">Iometer creates this test file if you have not provided one.</span></span> <span data-ttu-id="622fe-722">Создайте файл теста 200 ГБ с именем iobw.tst на томах CacheReads и NoCacheWrites hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-722">Create a 200GB test file called iobw.tst on hello CacheReads and NoCacheWrites volumes.</span></span>

<span data-ttu-id="622fe-723">*Спецификации доступа*</span><span class="sxs-lookup"><span data-stu-id="622fe-723">*Access Specifications*</span></span>  
<span data-ttu-id="622fe-724">Hello спецификации, запросить размер ввода-ВЫВОДА, % чтения и записи, % произвольных и последовательных настраиваются с помощью вкладки «Спецификации доступа» hello в Iometer.</span><span class="sxs-lookup"><span data-stu-id="622fe-724">hello specifications, request IO size, % read/write, % random/sequential are configured using hello "Access Specifications" tab in Iometer.</span></span> <span data-ttu-id="622fe-725">Создайте спецификацию доступа для каждого из описанных ниже сценариях hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-725">Create an access specification for each of hello scenarios described below.</span></span> <span data-ttu-id="622fe-726">Создайте спецификации hello доступа с «Сохранить» с соответствующим именем как — RandomWrites\_8 КБ, RandomReads\_8 КБ.</span><span class="sxs-lookup"><span data-stu-id="622fe-726">Create hello access specifications and "Save" with an appropriate name like – RandomWrites\_8K, RandomReads\_8K.</span></span> <span data-ttu-id="622fe-727">Выберите соответствующий спецификации hello при выполнении сценария тестовой hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-727">Select hello corresponding specification when running hello test scenario.</span></span>

<span data-ttu-id="622fe-728">Ниже приведен пример спецификаций доступа для сценария с максимальным количеством операций ввода-вывода в секунду при записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-728">An example of access specifications for maximum Write IOPS scenario is shown below,</span></span>  
    ![](media/storage-premium-storage-performance/image8.png)

<span data-ttu-id="622fe-729">*Спецификации тестирования при максимальном количестве операций ввода-вывода в секунду*</span><span class="sxs-lookup"><span data-stu-id="622fe-729">*Maximum IOPS Test Specifications*</span></span>  
<span data-ttu-id="622fe-730">Максимальная toodemonstrate операций ввода-вывода, использование меньшего размера запроса.</span><span class="sxs-lookup"><span data-stu-id="622fe-730">toodemonstrate maximum IOPs, use smaller request size.</span></span> <span data-ttu-id="622fe-731">Используйте запрос размером 8 КБ и создайте спецификации для случайных операций записи и чтения.</span><span class="sxs-lookup"><span data-stu-id="622fe-731">Use 8K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="622fe-732">Спецификация доступа</span><span class="sxs-lookup"><span data-stu-id="622fe-732">Access Specification</span></span> | <span data-ttu-id="622fe-733">Размер запроса</span><span class="sxs-lookup"><span data-stu-id="622fe-733">Request size</span></span> | <span data-ttu-id="622fe-734">Случайные, %</span><span class="sxs-lookup"><span data-stu-id="622fe-734">Random %</span></span> | <span data-ttu-id="622fe-735">Чтение, %</span><span class="sxs-lookup"><span data-stu-id="622fe-735">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-736">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="622fe-736">RandomWrites\_8K</span></span> |<span data-ttu-id="622fe-737">8 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-737">8K</span></span> |<span data-ttu-id="622fe-738">100</span><span class="sxs-lookup"><span data-stu-id="622fe-738">100</span></span> |<span data-ttu-id="622fe-739">0</span><span class="sxs-lookup"><span data-stu-id="622fe-739">0</span></span> |
| <span data-ttu-id="622fe-740">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="622fe-740">RandomReads\_8K</span></span> |<span data-ttu-id="622fe-741">8 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-741">8K</span></span> |<span data-ttu-id="622fe-742">100</span><span class="sxs-lookup"><span data-stu-id="622fe-742">100</span></span> |<span data-ttu-id="622fe-743">100</span><span class="sxs-lookup"><span data-stu-id="622fe-743">100</span></span> |

<span data-ttu-id="622fe-744">*Спецификации тестирования максимальной пропускной способности*</span><span class="sxs-lookup"><span data-stu-id="622fe-744">*Maximum Throughput Test Specifications*</span></span>  
<span data-ttu-id="622fe-745">toodemonstrate максимальная пропускная способность и использование большего размера запроса.</span><span class="sxs-lookup"><span data-stu-id="622fe-745">toodemonstrate maximum Throughput, use larger request size.</span></span> <span data-ttu-id="622fe-746">Используйте запрос размером 64 КБ и создайте спецификации для случайных операций записи и чтения.</span><span class="sxs-lookup"><span data-stu-id="622fe-746">Use 64K request size and create specifications for Random Writes and Reads.</span></span>

| <span data-ttu-id="622fe-747">Спецификация доступа</span><span class="sxs-lookup"><span data-stu-id="622fe-747">Access Specification</span></span> | <span data-ttu-id="622fe-748">Размер запроса</span><span class="sxs-lookup"><span data-stu-id="622fe-748">Request size</span></span> | <span data-ttu-id="622fe-749">Случайные, %</span><span class="sxs-lookup"><span data-stu-id="622fe-749">Random %</span></span> | <span data-ttu-id="622fe-750">Чтение, %</span><span class="sxs-lookup"><span data-stu-id="622fe-750">Read %</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-751">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="622fe-751">RandomWrites\_64K</span></span> |<span data-ttu-id="622fe-752">64 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-752">64K</span></span> |<span data-ttu-id="622fe-753">100</span><span class="sxs-lookup"><span data-stu-id="622fe-753">100</span></span> |<span data-ttu-id="622fe-754">0</span><span class="sxs-lookup"><span data-stu-id="622fe-754">0</span></span> |
| <span data-ttu-id="622fe-755">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="622fe-755">RandomReads\_64K</span></span> |<span data-ttu-id="622fe-756">64 КБ</span><span class="sxs-lookup"><span data-stu-id="622fe-756">64K</span></span> |<span data-ttu-id="622fe-757">100</span><span class="sxs-lookup"><span data-stu-id="622fe-757">100</span></span> |<span data-ttu-id="622fe-758">100</span><span class="sxs-lookup"><span data-stu-id="622fe-758">100</span></span> |

<span data-ttu-id="622fe-759">*Выполнение теста Iometer hello*</span><span class="sxs-lookup"><span data-stu-id="622fe-759">*Running hello Iometer Test*</span></span>  
<span data-ttu-id="622fe-760">Выполните действия hello ниже toowarm кэш</span><span class="sxs-lookup"><span data-stu-id="622fe-760">Perform hello steps below toowarm up cache</span></span>

1. <span data-ttu-id="622fe-761">Создайте две спецификации доступа со значениями, указанными ниже.</span><span class="sxs-lookup"><span data-stu-id="622fe-761">Create two access specifications with values shown below,</span></span>

   | <span data-ttu-id="622fe-762">Имя</span><span class="sxs-lookup"><span data-stu-id="622fe-762">Name</span></span> | <span data-ttu-id="622fe-763">Размер запроса</span><span class="sxs-lookup"><span data-stu-id="622fe-763">Request size</span></span> | <span data-ttu-id="622fe-764">Случайные, %</span><span class="sxs-lookup"><span data-stu-id="622fe-764">Random %</span></span> | <span data-ttu-id="622fe-765">Чтение, %</span><span class="sxs-lookup"><span data-stu-id="622fe-765">Read %</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="622fe-766">RandomWrites\_1MB</span><span class="sxs-lookup"><span data-stu-id="622fe-766">RandomWrites\_1MB</span></span> |<span data-ttu-id="622fe-767">1MB</span><span class="sxs-lookup"><span data-stu-id="622fe-767">1MB</span></span> |<span data-ttu-id="622fe-768">100</span><span class="sxs-lookup"><span data-stu-id="622fe-768">100</span></span> |<span data-ttu-id="622fe-769">0</span><span class="sxs-lookup"><span data-stu-id="622fe-769">0</span></span> |
   | <span data-ttu-id="622fe-770">RandomReads\_1MB</span><span class="sxs-lookup"><span data-stu-id="622fe-770">RandomReads\_1MB</span></span> |<span data-ttu-id="622fe-771">1MB</span><span class="sxs-lookup"><span data-stu-id="622fe-771">1MB</span></span> |<span data-ttu-id="622fe-772">100</span><span class="sxs-lookup"><span data-stu-id="622fe-772">100</span></span> |<span data-ttu-id="622fe-773">100</span><span class="sxs-lookup"><span data-stu-id="622fe-773">100</span></span> |
2. <span data-ttu-id="622fe-774">Запустите тест Iometer hello для инициализации кэша на диске со следующими параметрами.</span><span class="sxs-lookup"><span data-stu-id="622fe-774">Run hello Iometer test for initializing cache disk with following parameters.</span></span> <span data-ttu-id="622fe-775">Используйте три рабочих потоков для целевой том hello и очереди глубину 128.</span><span class="sxs-lookup"><span data-stu-id="622fe-775">Use three worker threads for hello target volume and a queue depth of 128.</span></span> <span data-ttu-id="622fe-776">Задать Здравствуйте, «Время выполнения» длительность hello too2hrs теста на вкладке «Тестирование установки» hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-776">Set hello "Run time" duration of hello test too2hrs on hello "Test Setup" tab.</span></span>

   | <span data-ttu-id="622fe-777">Сценарий</span><span class="sxs-lookup"><span data-stu-id="622fe-777">Scenario</span></span> | <span data-ttu-id="622fe-778">Целевой том</span><span class="sxs-lookup"><span data-stu-id="622fe-778">Target Volume</span></span> | <span data-ttu-id="622fe-779">Имя</span><span class="sxs-lookup"><span data-stu-id="622fe-779">Name</span></span> | <span data-ttu-id="622fe-780">Длительность</span><span class="sxs-lookup"><span data-stu-id="622fe-780">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="622fe-781">Инициализация диска с кэшем</span><span class="sxs-lookup"><span data-stu-id="622fe-781">Initialize Cache Disk</span></span> |<span data-ttu-id="622fe-782">CacheReads</span><span class="sxs-lookup"><span data-stu-id="622fe-782">CacheReads</span></span> |<span data-ttu-id="622fe-783">RandomWrites\_1MB</span><span class="sxs-lookup"><span data-stu-id="622fe-783">RandomWrites\_1MB</span></span> |<span data-ttu-id="622fe-784">2 ч</span><span class="sxs-lookup"><span data-stu-id="622fe-784">2hrs</span></span> |
3. <span data-ttu-id="622fe-785">Запустите тест Iometer hello для прогрев кэша на диске со следующими параметрами.</span><span class="sxs-lookup"><span data-stu-id="622fe-785">Run hello Iometer test for warming up cache disk with following parameters.</span></span> <span data-ttu-id="622fe-786">Используйте три рабочих потоков для целевой том hello и очереди глубину 128.</span><span class="sxs-lookup"><span data-stu-id="622fe-786">Use three worker threads for hello target volume and a queue depth of 128.</span></span> <span data-ttu-id="622fe-787">Задать Здравствуйте, «Время выполнения» длительность hello too2hrs теста на вкладке «Тестирование установки» hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-787">Set hello "Run time" duration of hello test too2hrs on hello "Test Setup" tab.</span></span>

   | <span data-ttu-id="622fe-788">Сценарий</span><span class="sxs-lookup"><span data-stu-id="622fe-788">Scenario</span></span> | <span data-ttu-id="622fe-789">Целевой том</span><span class="sxs-lookup"><span data-stu-id="622fe-789">Target Volume</span></span> | <span data-ttu-id="622fe-790">Имя</span><span class="sxs-lookup"><span data-stu-id="622fe-790">Name</span></span> | <span data-ttu-id="622fe-791">Длительность</span><span class="sxs-lookup"><span data-stu-id="622fe-791">Duration</span></span> |
   | --- | --- | --- | --- |
   | <span data-ttu-id="622fe-792">Подготовка диска с кэшем</span><span class="sxs-lookup"><span data-stu-id="622fe-792">Warm up Cache Disk</span></span> |<span data-ttu-id="622fe-793">CacheReads</span><span class="sxs-lookup"><span data-stu-id="622fe-793">CacheReads</span></span> |<span data-ttu-id="622fe-794">RandomReads\_1MB</span><span class="sxs-lookup"><span data-stu-id="622fe-794">RandomReads\_1MB</span></span> |<span data-ttu-id="622fe-795">2 ч</span><span class="sxs-lookup"><span data-stu-id="622fe-795">2hrs</span></span> |

<span data-ttu-id="622fe-796">После активированию кэша на диске, продолжите hello сценариев тестирования, перечисленные ниже.</span><span class="sxs-lookup"><span data-stu-id="622fe-796">After cache disk is warmed up, proceed with hello test scenarios listed below.</span></span> <span data-ttu-id="622fe-797">hello toorun Iometer тестирования, используйте по крайней мере три рабочих потоков для **каждого** целевые тома.</span><span class="sxs-lookup"><span data-stu-id="622fe-797">toorun hello Iometer test, use at least three worker threads for **each** target volume.</span></span> <span data-ttu-id="622fe-798">Для каждого рабочего потока выберите конечный том hello, задайте длину очереди и выберите один из спецификаций теста сохранены hello, как показано в таблице hello ниже toorun hello соответствующего тестового сценария.</span><span class="sxs-lookup"><span data-stu-id="622fe-798">For each worker thread, select hello target volume, set queue depth and select one of hello saved test specifications, as shown in hello table below, toorun hello corresponding test scenario.</span></span> <span data-ttu-id="622fe-799">Hello таблице также показаны ожидаемые результаты для операций ввода-ВЫВОДА и пропускной способности, во время выполнения этих тестов.</span><span class="sxs-lookup"><span data-stu-id="622fe-799">hello table also shows expected results for IOPS and Throughput when running these tests.</span></span> <span data-ttu-id="622fe-800">Во всех сценариях используется небольшой объем ввода-вывода, 8 КБ, и высокое значение длины очереди, «128».</span><span class="sxs-lookup"><span data-stu-id="622fe-800">For all scenarios, a small IO size of 8KB and a high queue depth of 128 is used.</span></span>

| <span data-ttu-id="622fe-801">Сценарий тестирования</span><span class="sxs-lookup"><span data-stu-id="622fe-801">Test Scenario</span></span> | <span data-ttu-id="622fe-802">Целевой том</span><span class="sxs-lookup"><span data-stu-id="622fe-802">Target Volume</span></span> | <span data-ttu-id="622fe-803">Имя</span><span class="sxs-lookup"><span data-stu-id="622fe-803">Name</span></span> | <span data-ttu-id="622fe-804">Результат</span><span class="sxs-lookup"><span data-stu-id="622fe-804">Result</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="622fe-805">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-805">Max.</span></span> <span data-ttu-id="622fe-806">количество операций вода-вывода в секунду при чтении</span><span class="sxs-lookup"><span data-stu-id="622fe-806">Read IOPS</span></span> |<span data-ttu-id="622fe-807">CacheReads</span><span class="sxs-lookup"><span data-stu-id="622fe-807">CacheReads</span></span> |<span data-ttu-id="622fe-808">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="622fe-808">RandomWrites\_8K</span></span> |<span data-ttu-id="622fe-809">50 000 операций ввода-вывода в секунду </span><span class="sxs-lookup"><span data-stu-id="622fe-809">50,000 IOPS</span></span> |
| <span data-ttu-id="622fe-810">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-810">Max.</span></span> <span data-ttu-id="622fe-811">количество операций вода-вывода в секунду при записи</span><span class="sxs-lookup"><span data-stu-id="622fe-811">Write IOPS</span></span> |<span data-ttu-id="622fe-812">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="622fe-812">NoCacheWrites</span></span> |<span data-ttu-id="622fe-813">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="622fe-813">RandomReads\_8K</span></span> |<span data-ttu-id="622fe-814">64 000 операций ввода-вывода в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-814">64,000 IOPS</span></span> |
| <span data-ttu-id="622fe-815">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-815">Max.</span></span> <span data-ttu-id="622fe-816">количество объединенных операций ввода-вывода в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-816">Combined IOPS</span></span> |<span data-ttu-id="622fe-817">CacheReads</span><span class="sxs-lookup"><span data-stu-id="622fe-817">CacheReads</span></span> |<span data-ttu-id="622fe-818">RandomWrites\_8K</span><span class="sxs-lookup"><span data-stu-id="622fe-818">RandomWrites\_8K</span></span> |<span data-ttu-id="622fe-819">100 000 операций ввода-вывода в секунду</span><span class="sxs-lookup"><span data-stu-id="622fe-819">100,000 IOPS</span></span> |
| <span data-ttu-id="622fe-820">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="622fe-820">NoCacheWrites</span></span> |<span data-ttu-id="622fe-821">RandomReads\_8K</span><span class="sxs-lookup"><span data-stu-id="622fe-821">RandomReads\_8K</span></span> | &nbsp; | &nbsp; |
| <span data-ttu-id="622fe-822">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-822">Max.</span></span> <span data-ttu-id="622fe-823">скорость чтения, МБ/с</span><span class="sxs-lookup"><span data-stu-id="622fe-823">Read MB/sec</span></span> |<span data-ttu-id="622fe-824">CacheReads</span><span class="sxs-lookup"><span data-stu-id="622fe-824">CacheReads</span></span> |<span data-ttu-id="622fe-825">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="622fe-825">RandomWrites\_64K</span></span> |<span data-ttu-id="622fe-826">524 МБ/с</span><span class="sxs-lookup"><span data-stu-id="622fe-826">524 MB/sec</span></span> |
| <span data-ttu-id="622fe-827">Макс.</span><span class="sxs-lookup"><span data-stu-id="622fe-827">Max.</span></span> <span data-ttu-id="622fe-828">скорость записи, МБ/с</span><span class="sxs-lookup"><span data-stu-id="622fe-828">Write MB/sec</span></span> |<span data-ttu-id="622fe-829">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="622fe-829">NoCacheWrites</span></span> |<span data-ttu-id="622fe-830">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="622fe-830">RandomReads\_64K</span></span> |<span data-ttu-id="622fe-831">524 МБ/с</span><span class="sxs-lookup"><span data-stu-id="622fe-831">524 MB/sec</span></span> |
| <span data-ttu-id="622fe-832">Скорость объединенных операций, МБ/с</span><span class="sxs-lookup"><span data-stu-id="622fe-832">Combined MB/sec</span></span> |<span data-ttu-id="622fe-833">CacheReads</span><span class="sxs-lookup"><span data-stu-id="622fe-833">CacheReads</span></span> |<span data-ttu-id="622fe-834">RandomWrites\_64K</span><span class="sxs-lookup"><span data-stu-id="622fe-834">RandomWrites\_64K</span></span> |<span data-ttu-id="622fe-835">1000 МБ/с</span><span class="sxs-lookup"><span data-stu-id="622fe-835">1000 MB/sec</span></span> |
| <span data-ttu-id="622fe-836">NoCacheWrites</span><span class="sxs-lookup"><span data-stu-id="622fe-836">NoCacheWrites</span></span> |<span data-ttu-id="622fe-837">RandomReads\_64K</span><span class="sxs-lookup"><span data-stu-id="622fe-837">RandomReads\_64K</span></span> | &nbsp; | &nbsp; |

<span data-ttu-id="622fe-838">Ниже приведены снимки экрана приветствия Iometer результаты теста для объединенных сценариев операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="622fe-838">Below are screenshots of hello Iometer test results for combined IOPS and Throughput scenarios.</span></span>

<span data-ttu-id="622fe-839">*Максимальное количество операций ввода-вывода в секунду при объединенных операциях чтения и записи*</span><span class="sxs-lookup"><span data-stu-id="622fe-839">*Combined Reads and Writes Maximum IOPS*</span></span>  
![](media/storage-premium-storage-performance/image9.png)

<span data-ttu-id="622fe-840">*Максимальная пропускная способность при объединенных операциях чтения и записи*</span><span class="sxs-lookup"><span data-stu-id="622fe-840">*Combined Reads and Writes Maximum Throughput*</span></span>  
![](media/storage-premium-storage-performance/image10.png)

### <a name="fio"></a><span data-ttu-id="622fe-841">FIO</span><span class="sxs-lookup"><span data-stu-id="622fe-841">FIO</span></span>
<span data-ttu-id="622fe-842">FIO — это хранилище toobenchmark популярным средством на hello виртуальных машин Linux.</span><span class="sxs-lookup"><span data-stu-id="622fe-842">FIO is a popular tool toobenchmark storage on hello Linux VMs.</span></span> <span data-ttu-id="622fe-843">Он имеет hello гибкость tooselect разного размера, операции ввода-ВЫВОДА, последовательные или случайных операций чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-843">It has hello flexibility tooselect different IO sizes, sequential or random reads and writes.</span></span> <span data-ttu-id="622fe-844">Оно создает рабочих потоков или процессов tooperform hello указанных операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-844">It spawns worker threads or processes tooperform hello specified I/O operations.</span></span> <span data-ttu-id="622fe-845">Можно указать тип hello каждого рабочего потока необходимо выполнить с помощью файлов задания операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="622fe-845">You can specify hello type of I/O operations each worker thread must perform using job files.</span></span> <span data-ttu-id="622fe-846">Мы создали один файл задания для каждого сценария в приведенных ниже примерах hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-846">We created one job file per scenario illustrated in hello examples below.</span></span> <span data-ttu-id="622fe-847">Вы можете изменить спецификации hello в эти задания файлы toobenchmark разных рабочих нагрузок на хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="622fe-847">You can change hello specifications in these job files toobenchmark different workloads running on Premium Storage.</span></span> <span data-ttu-id="622fe-848">В примерах hello, мы используем Стандартная виртуальная машина 14 доменных служб Active Directory промежуточных **Ubuntu**.</span><span class="sxs-lookup"><span data-stu-id="622fe-848">In hello examples, we are using a Standard DS 14 VM running **Ubuntu**.</span></span> <span data-ttu-id="622fe-849">Используйте hello одинаковую настройку, описанные в начале hello hello [раздел по измерению производительности](#Benchmarking) и нагревается hello кэш, прежде чем запускать тесты по измерению производительности hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-849">Use hello same setup described in hello beginning of hello [Benchmarking section](#Benchmarking) and warm up hello cache before running hello benchmarking tests.</span></span>

<span data-ttu-id="622fe-850">Прежде чем начать, [скачайте FIO](https://github.com/axboe/fio) и установите его на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="622fe-850">Before you begin, [download FIO](https://github.com/axboe/fio) and install it on your virtual machine.</span></span>

<span data-ttu-id="622fe-851">Запустите следующую команду для Ubuntu, hello</span><span class="sxs-lookup"><span data-stu-id="622fe-851">Run hello following command for Ubuntu,</span></span>

```
apt-get install fio
```

<span data-ttu-id="622fe-852">Мы будем использовать четыре рабочих потоков для поездки на машине операций записи и четырех рабочих потоков для каких операций чтения на дисках hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-852">We will use four worker threads for driving Write operations and four worker threads for driving Read operations on hello disks.</span></span> <span data-ttu-id="622fe-853">Hello работников записи будет пешком трафика на nocache «Привет» том, который содержит 10 дисков с кэшем, задайте слишком «None».</span><span class="sxs-lookup"><span data-stu-id="622fe-853">hello Write workers will be driving traffic on hello "nocache" volume, which has 10 disks with cache set too"None".</span></span> <span data-ttu-id="622fe-854">Hello работников чтения будет пешком трафика на томе readcache «hello», имеющая 1 диска с набором кэша слишком «ReadOnly».</span><span class="sxs-lookup"><span data-stu-id="622fe-854">hello Read workers will be driving traffic on hello "readcache" volume, which has 1 disk with cache set too"ReadOnly".</span></span>

<span data-ttu-id="622fe-855">*Максимальное количество операций ввода-вывода в секунду при записи*</span><span class="sxs-lookup"><span data-stu-id="622fe-855">*Maximum Write IOPS*</span></span>  
<span data-ttu-id="622fe-856">Создайте файл hello задания с помощью следующей спецификации tooget Максимума записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-856">Create hello job file with following specifications tooget maximum Write IOPS.</span></span> <span data-ttu-id="622fe-857">Назовите файл fiowrite.ini.</span><span class="sxs-lookup"><span data-stu-id="622fe-857">Name it "fiowrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[writer1]
rw=randwrite
directory=/mnt/nocache
[writer2]
rw=randwrite
directory=/mnt/nocache
[writer3]
rw=randwrite
directory=/mnt/nocache
[writer4]
rw=randwrite
directory=/mnt/nocache
```

<span data-ttu-id="622fe-858">Примечание hello выполните важнейших действий, которые соответствуют правилам разработки hello, описанные в предыдущих разделах.</span><span class="sxs-lookup"><span data-stu-id="622fe-858">Note hello follow key things that are in line with hello design guidelines discussed in previous sections.</span></span> <span data-ttu-id="622fe-859">Эти спецификации, основные toodrive Максимума,</span><span class="sxs-lookup"><span data-stu-id="622fe-859">These specifications are essential toodrive maximum IOPS,</span></span>  

* <span data-ttu-id="622fe-860">высокое значение длины очереди: 256;</span><span class="sxs-lookup"><span data-stu-id="622fe-860">A high queue depth of 256.</span></span>  
* <span data-ttu-id="622fe-861">небольшой размер блока: 8 КБ;</span><span class="sxs-lookup"><span data-stu-id="622fe-861">A small block size of 8KB.</span></span>  
* <span data-ttu-id="622fe-862">несколько потоков, выполняющих случайные операции записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-862">Multiple threads performing random writes.</span></span>

<span data-ttu-id="622fe-863">Запустите hello, следующая команда tookick off hello FIO проверки на 30 секунд</span><span class="sxs-lookup"><span data-stu-id="622fe-863">Run hello following command tookick off hello FIO test for 30 seconds,</span></span>  

```
sudo fio --runtime 30 fiowrite.ini
```

<span data-ttu-id="622fe-864">Пока hello тест, можно будет toosee hello число записи, которые создали дисков виртуальной Машины и Premium hello операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-864">While hello test runs, you will be able toosee hello number of write IOPS hello VM and Premium disks are delivering.</span></span> <span data-ttu-id="622fe-865">Как показано в следующем примере hello hello ВМ DS14 разрабатывает его максимальный записи операций ввода-ВЫВОДА ограничение в 50 000 операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-865">As shown in hello sample below, hello DS14 VM is delivering its maximum write IOPS limit of 50,000 IOPS.</span></span>  
    ![](media/storage-premium-storage-performance/image11.png)

<span data-ttu-id="622fe-866">*Максимальное количество операций ввода-вывода при чтении*</span><span class="sxs-lookup"><span data-stu-id="622fe-866">*Maximum Read IOPS*</span></span>  
<span data-ttu-id="622fe-867">Создайте файл hello задания с помощью следующей спецификации tooget чтения Максимума.</span><span class="sxs-lookup"><span data-stu-id="622fe-867">Create hello job file with following specifications tooget maximum Read IOPS.</span></span> <span data-ttu-id="622fe-868">Назовите файл fioread.ini.</span><span class="sxs-lookup"><span data-stu-id="622fe-868">Name it "fioread.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=256
ioengine=libaio
bs=8k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache
```

<span data-ttu-id="622fe-869">Примечание hello выполните важнейших действий, которые соответствуют правилам разработки hello, описанные в предыдущих разделах.</span><span class="sxs-lookup"><span data-stu-id="622fe-869">Note hello follow key things that are in line with hello design guidelines discussed in previous sections.</span></span> <span data-ttu-id="622fe-870">Эти спецификации, основные toodrive Максимума,</span><span class="sxs-lookup"><span data-stu-id="622fe-870">These specifications are essential toodrive maximum IOPS,</span></span>

* <span data-ttu-id="622fe-871">высокое значение длины очереди: 256;</span><span class="sxs-lookup"><span data-stu-id="622fe-871">A high queue depth of 256.</span></span>  
* <span data-ttu-id="622fe-872">небольшой размер блока: 8 КБ;</span><span class="sxs-lookup"><span data-stu-id="622fe-872">A small block size of 8KB.</span></span>  
* <span data-ttu-id="622fe-873">несколько потоков, выполняющих случайные операции записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-873">Multiple threads performing random writes.</span></span>

<span data-ttu-id="622fe-874">Запустите hello, следующая команда tookick off hello FIO проверки на 30 секунд</span><span class="sxs-lookup"><span data-stu-id="622fe-874">Run hello following command tookick off hello FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioread.ini
```

<span data-ttu-id="622fe-875">Пока hello тест, можно будет toosee hello число чтения hello операций ввода-ВЫВОДА виртуальной Машины и доставке дисков "премиум".</span><span class="sxs-lookup"><span data-stu-id="622fe-875">While hello test runs, you will be able toosee hello number of read IOPS hello VM and Premium disks are delivering.</span></span> <span data-ttu-id="622fe-876">Как показано в следующем примере hello hello ВМ DS14 разрабатывает более 64 000 операций чтения ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-876">As shown in hello sample below, hello DS14 VM is delivering more than 64,000 Read IOPS.</span></span> <span data-ttu-id="622fe-877">Это сочетание диска hello и производительность кэша hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-877">This is a combination of hello disk and hello cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image12.png)

<span data-ttu-id="622fe-878">*Максимальное количество операций ввода-вывода в секунду при чтении и записи*</span><span class="sxs-lookup"><span data-stu-id="622fe-878">*Maximum Read and Write IOPS*</span></span>  
<span data-ttu-id="622fe-879">Создание файла hello задания с помощью следующей спецификации tooget максимальное сочетании чтения и записи операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-879">Create hello job file with following specifications tooget maximum combined Read and Write IOPS.</span></span> <span data-ttu-id="622fe-880">Назовите файл fioreadwrite.ini.</span><span class="sxs-lookup"><span data-stu-id="622fe-880">Name it "fioreadwrite.ini".</span></span>

```
[global]
size=30g
direct=1
iodepth=128
ioengine=libaio
bs=4k

[reader1]
rw=randread
directory=/mnt/readcache
[reader2]
rw=randread
directory=/mnt/readcache
[reader3]
rw=randread
directory=/mnt/readcache
[reader4]
rw=randread
directory=/mnt/readcache

[writer1]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer2]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer3]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
[writer4]
rw=randwrite
directory=/mnt/nocache
rate_iops=12500
```

<span data-ttu-id="622fe-881">Примечание hello выполните важнейших действий, которые соответствуют правилам разработки hello, описанные в предыдущих разделах.</span><span class="sxs-lookup"><span data-stu-id="622fe-881">Note hello follow key things that are in line with hello design guidelines discussed in previous sections.</span></span> <span data-ttu-id="622fe-882">Эти спецификации, основные toodrive Максимума,</span><span class="sxs-lookup"><span data-stu-id="622fe-882">These specifications are essential toodrive maximum IOPS,</span></span>

* <span data-ttu-id="622fe-883">высокое значение длины очереди: 128;</span><span class="sxs-lookup"><span data-stu-id="622fe-883">A high queue depth of 128.</span></span>  
* <span data-ttu-id="622fe-884">небольшой размер блока: 4 КБ;</span><span class="sxs-lookup"><span data-stu-id="622fe-884">A small block size of 4KB.</span></span>  
* <span data-ttu-id="622fe-885">несколько потоков, выполняющих случайные операции чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-885">Multiple threads performing random reads and writes.</span></span>

<span data-ttu-id="622fe-886">Запустите hello, следующая команда tookick off hello FIO проверки на 30 секунд</span><span class="sxs-lookup"><span data-stu-id="622fe-886">Run hello following command tookick off hello FIO test for 30 seconds,</span></span>

```
sudo fio --runtime 30 fioreadwrite.ini
```

<span data-ttu-id="622fe-887">Пока hello тест, необходимо может toosee hello число объединенных чтения и записи операций ввода-ВЫВОДА hello ВМ и дисков "премиум" выполняется за.</span><span class="sxs-lookup"><span data-stu-id="622fe-887">While hello test runs, you will be able toosee hello number of combined read and write IOPS hello VM and Premium disks are delivering.</span></span> <span data-ttu-id="622fe-888">Как показано в следующем примере hello hello ВМ DS14 разрабатывает более чем 100 000 объединенный чтения и записи операций ввода-ВЫВОДА.</span><span class="sxs-lookup"><span data-stu-id="622fe-888">As shown in hello sample below, hello DS14 VM is delivering more than 100,000 combined Read and Write IOPS.</span></span> <span data-ttu-id="622fe-889">Это сочетание диска hello и производительность кэша hello.</span><span class="sxs-lookup"><span data-stu-id="622fe-889">This is a combination of hello disk and hello cache performance.</span></span>  
    ![](media/storage-premium-storage-performance/image13.png)

<span data-ttu-id="622fe-890">*Максимальное значение объединенной пропускной способности*</span><span class="sxs-lookup"><span data-stu-id="622fe-890">*Maximum Combined Throughput*</span></span>  
<span data-ttu-id="622fe-891">Максимальное hello tooget совместно чтения и записи пропускную способность, использовать больший размер блока и глубина большой размер очереди с несколькими потоками при выполнении операций чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="622fe-891">tooget hello maximum combined Read and Write Throughput, use a larger block size and large queue depth with multiple threads performing reads and writes.</span></span> <span data-ttu-id="622fe-892">Можно использовать блоки размером 64 КБ и длину очереди со значением «128».</span><span class="sxs-lookup"><span data-stu-id="622fe-892">You can use a block size of 64KB and queue depth of 128.</span></span>

## <a name="next-steps"></a><span data-ttu-id="622fe-893">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="622fe-893">Next Steps</span></span>
<span data-ttu-id="622fe-894">Дополнительная информация о хранилище Azure класса «Премиум»:</span><span class="sxs-lookup"><span data-stu-id="622fe-894">Learn more about Azure Premium Storage:</span></span>

* [<span data-ttu-id="622fe-895">Хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="622fe-895">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](storage-premium-storage.md)  

<span data-ttu-id="622fe-896">Если вы пользователь SQL Server, см. статьи с рекомендациями по оптимизации производительности SQL Server:</span><span class="sxs-lookup"><span data-stu-id="622fe-896">For SQL Server users, read articles on Performance Best Practices for SQL Server:</span></span>

* [<span data-ttu-id="622fe-897">Рекомендации по оптимизации производительности SQL Server в виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="622fe-897">Performance Best Practices for SQL Server in Azure Virtual Machines</span></span>](../virtual-machines/windows/sql/virtual-machines-windows-sql-performance.md)
* [<span data-ttu-id="622fe-898">Хранилище Azure класса «Премиум» обеспечивает максимальную производительность SQL Server в виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="622fe-898">Azure Premium Storage provides highest performance for SQL Server in Azure VM</span></span>](http://blogs.technet.com/b/dataplatforminsider/archive/2015/04/23/azure-premium-storage-provides-highest-performance-for-sql-server-in-azure-vm.aspx)
