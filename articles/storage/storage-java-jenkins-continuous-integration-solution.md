---
title: "Хранилище Azure с решением непрерывной интеграции Jenkins aaaUsing | Документы Microsoft"
description: "Этот учебник показывают, как toouse hello Azure служба BLOB-объектов как репозиторий для построения артефакты, созданные с помощью решения непрерывной интеграции Jenkins."
services: storage
documentationcenter: java
author: seguler
manager: jahogg
editor: tysonn
ms.assetid: f4e5ca75-f6cb-4f74-981b-2aa06bb8de45
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: Java
ms.topic: article
ms.date: 02/28/2017
ms.author: seguler
ms.openlocfilehash: a8a8c6f3b03cf61d7ad98f0b38e9421dd0b47bfd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="using-azure-storage-with-a-jenkins-continuous-integration-solution"></a>Использование хранилища Azure с решением непрерывной интеграции Jenkins
## <a name="overview"></a>Обзор
Hello следующие сведения показано, как хранилище больших двоичных объектов toouse как хранилище артефактов сборки, созданные с помощью решения Jenkins непрерывной интеграции (CI) или как источник toobe загружаемые файлы использовать в процессе построения. Один из сценариев hello, где это может оказаться полезным при разработки в среде гибкой разработки (с использованием Java и других языков), на непрерывной интеграции будут выполняться на основе сборки и требуется хранилище для вашего артефактов сборки, чтобы можно было бы , например, использовать их совместно с другими членами организации, ваши клиенты или ведите архив. Другой случай — когда работа построения сам требует от других файлов, например, зависимости toodownload как часть hello построения входных данных.

В этом учебнике будет использоваться hello подключаемый модуль хранилища Azure для непрерывной Интеграции Jenkins, предоставляемых Майкрософт.

## <a name="overview-of-jenkins"></a>Общая информация о Jenkins
Непрерывная интеграция Jenkins включает проекта программного обеспечения, позволяя разработчикам tooeasily интеграции их изменений кода и имеют создает созданного автоматически и часто, тем самым увеличивая hello производительности разработчиков hello. Сборки, управляются и артефактов сборки может быть загруженного toovarious репозиториев. В этом разделе будет показано, как toouse Azure хранилище BLOB-объектов как hello хранилище артефактов сборки hello. Он также будет показано, как toodownload зависимости от Azure хранилище больших двоичных объектов.

Дополнительные сведения о Jenkins см. в разделе [Знакомство с Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins).

## <a name="benefits-of-using-hello-blob-service"></a>Преимущества использования службы BLOB-объектов hello
Преимущества использования toohost службы BLOB-объектов hello артефактов сборки на гибкой разработки:

* Высокая доступность артефактов построения и (или) загружаемых зависимостей.
* Производительность при отправке артефактов построения решением Jenkins CI.
* Производительность при загрузке артефактов построения клиентами и партнерами.
* Контроль политики доступа пользователей с возможностью выбора между анонимным доступом, общим доступом на основе срока действия, доступом по подписи, закрытым доступом и т. п.

## <a name="prerequisites"></a>Предварительные требования
Вам будет необходимо hello следующие toouse hello службы BLOB-объектов вместе с решением непрерывной Интеграции Jenkins:

* Решение непрерывной интеграции Jenkins.
  
    Если сервер Jenkins CI решения в настоящее время нет, можно запустить сервер Jenkins CI решения с использованием hello следующий метод:
  
  1. На компьютере с поддержкой Java загрузите файл jenkins.war из <http://jenkins-ci.org>.
  2. В командной строке, opened toohello папку, содержащую jenkins.war выполните следующую команду:
     
      `java -jar jenkins.war`

  3. Откройте в браузере `http://localhost:8080/`. Откроется панель hello Jenkins, в которой вы будете использовать tooinstall и настроить подключаемый модуль hello хранилища Azure.
     
      При выполнении стандартного решения Jenkins CI нужно настроить toorun как служба, запустившего hello Jenkins war hello командной строки будет достаточно для этого учебника.
* Учетная запись Azure. Зарегистрироваться для получения учетной записи Azure можно по адресу <http://www.windowsazure.com>.
* Учетная запись хранения Azure. Если еще нет учетной записи хранилища, ее можно создать с помощью действия hello в [создать учетную запись хранилища](storage-create-storage-account.md#create-a-storage-account).
* Знакомство с решением непрерывной Интеграции Jenkins hello рекомендуется, но не является обязательным, как hello следующее содержимое будет использовать простой пример tooshow, hello шаги, необходимые при использовании hello BLOB-объектов в качестве репозитория для непрерывной Интеграции Jenkins сборки артефактов.

## <a name="how-toouse-hello-blob-service-with-jenkins-ci"></a>Как toouse hello BLOB-объектов с Jenkins CI
toouse hello BLOB-объектов с Jenkins, вам потребуется tooinstall hello подключаемого модуля хранилища Azure, настройте подключаемый модуль toouse hello вашей учетной записи хранилища и создайте действие после сборки, передающий вашей учетной записи хранилища сборки артефактов tooyour. Эти действия описаны в следующих разделах hello.

## <a name="how-tooinstall-hello-azure-storage-plugin"></a>Как tooinstall hello подключаемого модуля хранилища Azure
1. Панели мониторинга Jenkins hello, нажмите кнопку **управления Jenkins**.
2. В hello **управления Jenkins** щелкните **управление подключаемыми модулями**.
3. Нажмите кнопку hello **доступно** вкладки.
4. В hello **Uploaders артефакта** установите флажок **подключаемый модуль хранилища Microsoft Azure**.
5. Щелкните **Install without restart** (Установить без перезагрузки) или **Download now and install after restart** (Загрузить сейчас и установить позднее).
6. Перезапустите Jenkins.

## <a name="how-tooconfigure-hello-azure-storage-plugin-toouse-your-storage-account"></a>Как tooconfigure hello toouse подключаемый модуль хранилища Azure вашей учетной записи хранения
1. Панели мониторинга Jenkins hello, нажмите кнопку **управления Jenkins**.
2. В hello **управления Jenkins** щелкните **Настройка системы**.
3. В hello **настройки учетной записи хранилища Microsoft Azure** раздела:
   1. Введите имя учетной записи хранилища, который можно получить из hello [портала Azure](https://portal.azure.com).
   2. Введите ключ учетной записи хранилища, также доступен из hello [портала Azure](https://portal.azure.com).
   3. Используйте значение по умолчанию hello **URL-адрес конечной точки службы BLOB-объект** при использовании общедоступных облаков Azure hello. При использовании другой Azure облачной использовать конечную точку hello как указано в hello [портала Azure](https://portal.azure.com) для вашей учетной записи. 
   4. Нажмите кнопку **проверки учетных данных хранилища** toovalidate вашей учетной записи хранилища. 
   5. [Необязательно] Если у вас есть дополнительные учетные записи хранения, которые должны делать доступными tooyour Jenkins CI, нажмите кнопку **добавить дополнительные учетные записи хранения**.
   6. Нажмите кнопку **Сохранить** toosave параметры.

## <a name="how-toocreate-a-post-build-action-that-uploads-your-build-artifacts-tooyour-storage-account"></a>Как toocreate действие после сборки, которое передает вашей учетной записи хранилища сборки артефактов tooyour
В целях инструкция сначала нам потребуется toocreate задание, которое создаст несколько файлов и затем добавить в hello действия после построения tooupload hello файлы tooyour учетной записи хранения.

1. Панели мониторинга Jenkins hello, нажмите кнопку **новый элемент**.
2. Имя задания hello **MyJob**, нажмите кнопку **построения проекта программного обеспечения освободить стиль**и нажмите кнопку **ОК**.
3. В hello **построения** раздела конфигурации задания hello, нажмите кнопку **добавить шаг сборки** и выберите **Windows выполнения пакетной команды**.
4. В **команда**, использовать hello, следующие команды:

    ```   
    md text
    cd text
    echo Hello Azure Storage from Jenkins > hello.txt
    date /t > date.txt
    time /t >> date.txt
    ```

5. В hello **действия после построения** раздела конфигурации задания hello, нажмите кнопку **добавить действие после сборки** и выберите **передать артефакты хранилища больших двоичных объектов tooAzure**.
6. Для **имя учетной записи хранения**, выберите hello toouse учетной записи хранилища.
7. Для **имя контейнера**, укажите имя контейнера hello. (будет создан контейнер hello, если он еще не существует при передаче артефактов сборки hello.) Можно использовать переменные среды, поэтому в данном примере введите **${JOB_NAME}** имени контейнера hello.
   
    **Подсказка**
   
    Ниже hello **команда** раздел, где вы ввели скрипт для **Windows выполнения пакетной команды** является ссылкой toohello переменные среды, распознаваемые Jenkins. Щелкните связанный имена переменных среды toolearn hello и описания. Обратите внимание, что среда переменных, которые содержат специальные символы, такие как hello **BUILD_URL** переменной среды, не разрешены в качестве имени контейнера или общий виртуальный путь.
8. Щелкните **Сделать новый контейнер открытым по умолчанию** для этого примера. (Если вы хотите toouse закрытый контейнер, вам нужно toocreate доступа tooallow подпись общего доступа. Выходит за рамки этого раздела hello. Дополнительные сведения о подписанных URL-адресах см. в статье [Использование подписанных URL-адресов (SAS)](storage-dotnet-shared-access-signature-part-1.md)).
9. [Необязательно] Нажмите кнопку **чистой контейнера перед отправкой** Если hello контейнера toobe очищен содержимого перед отправкой артефактов сборки (не ее флажок, если не нужно, чтобы содержимое hello tooclean hello контейнера).
10. Для **tooupload список артефактов**, введите  **текст /*.txt**.
11. Для параметра **Common virtual path for uploaded artifacts** (Общий виртуальный путь для отправленных артефактов) введите значение **${BUILD\_ID}/${BUILD\_NUMBER}**, в целях данного учебника.
12. Нажмите кнопку **Сохранить** toosave параметры.
13. В панели мониторинга Jenkins hello, щелкните **сборки теперь** toorun **MyJob**. Изучите выходные данные консоли hello для состояния. Сообщения о состоянии для хранилища Azure будут включены в вывод на консоль hello в начале артефактов сборки tooupload hello действия после построения.
14. После успешного завершения задания hello можно проверить, открыв hello большой двоичный объект открытого артефактов сборки hello.
    1. Имя входа toohello [портала Azure](https://portal.azure.com).
    2. Щелкните **Хранилище**.
    3. Щелкните имя учетной записи хранения hello, который использовался для Jenkins.
    4. Щелкните **Контейнеры**.
    5. Щелкните контейнер hello **myjob**, который является строчной версией hello hello имя задания, назначенный при создании задания Jenkins hello. Имена контейнеров и BLOB-объектов в хранилище Azure отображаются строчными буквами (и с учетом регистра). В пределах списка hello больших двоичных объектов для hello контейнер с именем **myjob** вы увидите **hello.txt** и **date.txt**. Скопируйте URL-адрес hello для любой из этих элементов и откройте его в браузере. Вы увидите hello текстовый файл, который был загружен в качестве артефакта для сборки.

Можно создать только одно действие после сборки, передающий хранилища больших двоичных объектов tooAzure артефакты одного задания. Обратите внимание, что хранилище больших двоичных объектов tooAzure артефакты tooupload hello одно действие после сборки можно различные файлы (включая подстановочные знаки) и toofiles путей в пределах **tooupload список артефактов** через точку с запятой в качестве разделителя. Например, если ваш Jenkins сборку создает JAR-файла и TXT-файлов в рабочую область **построения** папку, вы tooupload оба tooAzure хранилища больших двоичных объектов, необходимо использовать следующие hello для hello **список артефактов tooupload** значение: **построения /\*.jar; сборка /\*.txt**. Также можно использовать синтаксис с двойным двоеточием toospecify toouse путь внутри имени большого двоичного объекта hello. Например, если вы хотите tooget hello JAR-файлов, переданных с использованием **двоичные файлы** в пути больших двоичных объектов hello и tooget файлы TXT hello загружаются с помощью **уведомления** hello пути больших двоичных объектов, используйте hello ниже для hello  **Список артефактов tooupload** значение: **построения /\*. jar::binaries; сборка /\*. txt::notices**.

## <a name="how-toocreate-a-build-step-that-downloads-from-azure-blob-storage"></a>Как toocreate действие сборки для загрузки из хранилища BLOB-объектов Azure
Здравствуй, следующие шаги показывают, как tooconfigure построения шаг toodownload элементов из хранилища BLOB-объектов Azure. Он может оказаться полезным, если требуется tooinclude элементы сборки, например, JAR-файлов, хранящихся в Azure хранилище больших двоичных объектов.

1. В hello **построения** раздела конфигурации задания hello, нажмите кнопку **добавить шаг сборки** и выберите **загружают из хранилища больших двоичных объектов Azure**.
2. Для **имя учетной записи хранения**, выберите hello toouse учетной записи хранилища.
3. Для **имя контейнера**, укажите имя hello hello контейнера, который содержит hello BLOB-объектов требуется toodownload. Можно использовать переменные среды.
4. Для **имя большого двоичного объекта**, укажите имя большого двоичного объекта hello. Можно использовать переменные среды. Кроме того можно использовать символ звездочки в качестве подстановочного знака после указания начального буквами hello hello имени большого двоичного объекта. Например, имя **project\*** будет определять все BLOB-объекты, имя которых начинается с **project**.
5. [Необязательно] Для **путь загрузки**, укажите путь к hello на hello Jenkins компьютер, где toodownload файлы из хранилища BLOB-объектов Azure. Переменные среды также могут использоваться. (Если не указано значение для **путь загрузки**, hello файлы из хранилища BLOB-объектов Azure будут загруженный toohello задания рабочей области.)

Если у вас есть дополнительные элементы, которые необходимо toodownload из хранилища BLOB-объектов Azure, можно создать дополнительные сборки шаги.

После выполнения сборки, можно проверить выходные данные консоли журнал сборки hello, или просмотрите место для загрузки, toosee ли hello больших двоичных объектов, которые должны были успешно загружены.  

## <a name="components-used-by-hello-blob-service"></a>Компоненты, используемые hello службы BLOB-объектов
Hello следующие общие компоненты службы hello больших двоичных объектов.

* **Учетная запись хранения**: обращаться к tooAzure хранилища осуществляется через учетную запись хранилища. Это наивысший уровень hello hello пространство имен для доступа к большим двоичным объектам. Учетная запись может содержать неограниченное число контейнеров при условии, что их общий размер не достигает 100 ТБ.
* **Контейнер**. Контейнер обеспечивает группировку набора BLOB-объектов. Все BLOB-объекты должны содержаться в контейнере. Учетная запись может содержать неограниченное число контейнеров. Контейнер может хранить неограниченное количество больших двоичных объектов.
* **BLOB-объект**. Файл любого типа и размера. Существует два типа BLOB-объектов, которые могут храниться в хранилище Azure: блоки и страницы. Большинство файлов являются BLOB-блоками. Копирование too200GB размер может быть одного большого двоичного объекта. В этом учебнике используются BLOB-блоки. Страничных BLOB-объектов другого типа больших двоичных объектов может быть вверх too1TB размер и являются более эффективным, когда диапазоны байтов в файле часто изменяются. Дополнительные сведения о BLOB-объектах см. в разделе [Основные сведения о блочных, добавочных и страничных BLOB-объектах](http://msdn.microsoft.com/library/azure/ee691964.aspx).
* **Формат URL-адреса**: BLOB-объектов можно с помощью hello следующий формат URL-адреса:
  
    `http://storageaccount.blob.core.windows.net/container_name/blob_name`
  
    (выше формат hello применяется toohello общедоступных облаков Azure. При использовании другой Azure облачной используется конечная точка hello в hello [портала Azure](https://portal.azure.com) toodetermine URL-адрес конечной точки.)
  
    В формате hello выше `storageaccount` представляет hello имя учетной записи `container_name` представляет hello именем своего контейнера и `blob_name` представляет hello имя большого двоичного объекта, соответственно. В имени контейнера hello, может иметь несколько путей, разделенных косой чертой,  **/** . Имя контейнера пример Hello в этом учебнике было **MyJob**, и **${ПОСТРОЕНИЯ\_идентификатор} / ${ПОСТРОЕНИЯ\_номер}** был использован для hello общих виртуального пути, что приводит к необходимости hello больших двоичных объектов URL-адрес hello следующие формы:
  
    `http://example.blob.core.windows.net/myjob/2014-04-14_23-57-00/1/hello.txt`

## <a name="next-steps"></a>Дальнейшие действия
* [Знакомство с Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)
* [Пакет SDK для службы хранилища Azure для Java](https://github.com/azure/azure-storage-java)
* [справочнике по пакету SDK для клиента службы хранилища Azure](http://dl.windowsazure.com/storage/javadoc/)
* [API-интерфейс REST служб хранилища Azure](https://msdn.microsoft.com/library/azure/dd179355.aspx)
* [Блог рабочей группы службы хранилища Azure](http://blogs.msdn.com/b/windowsazurestorage/)

Дополнительные сведения см. также hello [центра разработчиков Java](https://azure.microsoft.com/develop/java/).
