---
title: "Использование службы хранилища Azure с решением непрерывной интеграции Jenkins | Документация Майкрософт"
description: "В этом уроке вы научитесь использовать службы BLOB-объектов Azure в качестве репозитория для артефактов построения, созданных решением непрерывной интеграции Jenkins."
services: storage
documentationcenter: java
author: seguler
manager: jahogg
editor: tysonn
ms.assetid: f4e5ca75-f6cb-4f74-981b-2aa06bb8de45
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: Java
ms.topic: article
ms.date: 02/28/2017
ms.author: seguler
ms.openlocfilehash: 72cf98289102f64f82bbac6e43b48339db8681b4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="using-azure-storage-with-a-jenkins-continuous-integration-solution"></a><span data-ttu-id="a7826-103">Использование хранилища Azure с решением непрерывной интеграции Jenkins</span><span class="sxs-lookup"><span data-stu-id="a7826-103">Using Azure Storage with a Jenkins Continuous Integration solution</span></span>
## <a name="overview"></a><span data-ttu-id="a7826-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="a7826-104">Overview</span></span>
<span data-ttu-id="a7826-105">Приведенные ниже сведения демонстрируют использование хранилища BLOB-объектов в качестве репозитория для артефактов построения, созданных решением непрерывной интеграции Jenkins, или в качестве источника загружаемых файлов для процесса построения.</span><span class="sxs-lookup"><span data-stu-id="a7826-105">The following information shows how to use Blob storage as a repository of build artifacts created by a Jenkins Continuous Integration (CI) solution, or as a source of downloadable files to be used in a build process.</span></span> <span data-ttu-id="a7826-106">Одним из сценариев, где это может оказаться полезным, является программирование в гибкой среде разработки (с помощью Java или других языков), построения выполняются на основе непрерывной интеграции, и вам требуется репозиторий для артефактов построения, чтобы можно было, например, использовать их совместно с другими членами организации, вашими клиентами или вести архив.</span><span class="sxs-lookup"><span data-stu-id="a7826-106">One of the scenarios where you would find this useful is when you're coding in an agile development environment (using Java or other languages), builds are running based on continuous integration, and you need a repository for your build artifacts, so that you could, for example, share them with other organization members, your customers, or maintain an archive.</span></span> <span data-ttu-id="a7826-107">Еще один сценарий связан с ситуацией, когда задание построения само требует других файлов, например, зависимостей для загрузки в качестве входа построения.</span><span class="sxs-lookup"><span data-stu-id="a7826-107">Another scenario is when your build job itself requires other files, for example, dependencies to download as part of the build input.</span></span>

<span data-ttu-id="a7826-108">В этом учебнике будет использоваться подключаемый модуль службы хранилища Azure для решения Jenkins CI, предоставляемый корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="a7826-108">In this tutorial you will be using the Azure Storage Plugin for Jenkins CI made available by Microsoft.</span></span>

## <a name="overview-of-jenkins"></a><span data-ttu-id="a7826-109">Общая информация о Jenkins</span><span class="sxs-lookup"><span data-stu-id="a7826-109">Overview of Jenkins</span></span>
<span data-ttu-id="a7826-110">Jenkins обеспечивает непрерывную интеграцию программного проекта, позволяя разработчикам легко интегрировать свои изменения кода и автоматизировать процесс построения сборок, что повышает производительность их труда.</span><span class="sxs-lookup"><span data-stu-id="a7826-110">Jenkins enables continuous integration of a software project by allowing developers to easily integrate their code changes and have builds produced automatically and frequently, thereby increasing the productivity of the developers.</span></span> <span data-ttu-id="a7826-111">Для построений осуществляется контроль версий, а артефакты построения можно загрузить в разные репозитории.</span><span class="sxs-lookup"><span data-stu-id="a7826-111">Builds are versioned, and build artifacts can be uploaded to various repositories.</span></span> <span data-ttu-id="a7826-112">В этом разделе демонстрируется использование хранилища BLOB-объектов Azure в качестве репозитория артефактов сборки.</span><span class="sxs-lookup"><span data-stu-id="a7826-112">This topic will show how to use Azure blob storage as the repository of the build artifacts.</span></span> <span data-ttu-id="a7826-113">Здесь также рассматривается загрузка зависимостей из хранилища blob-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-113">It will also show how to download dependencies from Azure blob storage.</span></span>

<span data-ttu-id="a7826-114">Дополнительные сведения о Jenkins см. в разделе [Знакомство с Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins).</span><span class="sxs-lookup"><span data-stu-id="a7826-114">More information about Jenkins can be found at [Meet Jenkins](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins).</span></span>

## <a name="benefits-of-using-the-blob-service"></a><span data-ttu-id="a7826-115">Преимущества использования службы BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="a7826-115">Benefits of using the Blob service</span></span>
<span data-ttu-id="a7826-116">Преимущества использования службы BLOB-объектов для размещения артефактов построения при гибкой разработке включают в себя следующее:</span><span class="sxs-lookup"><span data-stu-id="a7826-116">Benefits of using the Blob service to host your agile development build artifacts include:</span></span>

* <span data-ttu-id="a7826-117">Высокая доступность артефактов построения и (или) загружаемых зависимостей.</span><span class="sxs-lookup"><span data-stu-id="a7826-117">High availability of your build artifacts and/or downloadable dependencies.</span></span>
* <span data-ttu-id="a7826-118">Производительность при отправке артефактов построения решением Jenkins CI.</span><span class="sxs-lookup"><span data-stu-id="a7826-118">Performance when your Jenkins CI solution uploads your build artifacts.</span></span>
* <span data-ttu-id="a7826-119">Производительность при загрузке артефактов построения клиентами и партнерами.</span><span class="sxs-lookup"><span data-stu-id="a7826-119">Performance when your customers and partners download your build artifacts.</span></span>
* <span data-ttu-id="a7826-120">Контроль политики доступа пользователей с возможностью выбора между анонимным доступом, общим доступом на основе срока действия, доступом по подписи, закрытым доступом и т. п.</span><span class="sxs-lookup"><span data-stu-id="a7826-120">Control over user access policies, with a choice between anonymous access, expiration-based shared access signature access, private access, etc.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="a7826-121">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="a7826-121">Prerequisites</span></span>
<span data-ttu-id="a7826-122">Чтобы использовать службу BLOB-объектов с решением Jenkins, необходимо следующее:</span><span class="sxs-lookup"><span data-stu-id="a7826-122">You will need the following to use the Blob service with your Jenkins CI solution:</span></span>

* <span data-ttu-id="a7826-123">Решение непрерывной интеграции Jenkins.</span><span class="sxs-lookup"><span data-stu-id="a7826-123">A Jenkins Continuous Integration solution.</span></span>
  
    <span data-ttu-id="a7826-124">Если у вас нет решения Jenkins, его можно запустить следующим образом:</span><span class="sxs-lookup"><span data-stu-id="a7826-124">If you currently don't have a Jenkins CI solution, you can run a Jenkins CI solution using the following technique:</span></span>
  
  1. <span data-ttu-id="a7826-125">На компьютере с поддержкой Java загрузите файл jenkins.war из <http://jenkins-ci.org>.</span><span class="sxs-lookup"><span data-stu-id="a7826-125">On a Java-enabled machine, download jenkins.war from <http://jenkins-ci.org>.</span></span>
  2. <span data-ttu-id="a7826-126">В командной строке, открытой на папке с файлом jenkins.war, выполните следующую команду:</span><span class="sxs-lookup"><span data-stu-id="a7826-126">At a command prompt that is opened to the folder that contains jenkins.war, run:</span></span>
     
      `java -jar jenkins.war`

  3. <span data-ttu-id="a7826-127">Откройте в браузере `http://localhost:8080/`.</span><span class="sxs-lookup"><span data-stu-id="a7826-127">In your browser, open `http://localhost:8080/`.</span></span> <span data-ttu-id="a7826-128">Открывается панель мониторинга Jenkins, которую вы будете использовать для установки и настройки подключаемого модуля хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-128">This will open the Jenkins dashboard, which you will use to install and configure the Azure Storage plugin.</span></span>
     
      <span data-ttu-id="a7826-129">Хотя обычно решение Jenkins настраивается на запуск в качестве службы, в рамках данного учебника будет достаточно запуска WAR-файла Jenkins в командной строке.</span><span class="sxs-lookup"><span data-stu-id="a7826-129">While a typical Jenkins CI solution would be set up to run as a service, running the Jenkins war at the command line will be sufficient for this tutorial.</span></span>
* <span data-ttu-id="a7826-130">Учетная запись Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-130">An Azure account.</span></span> <span data-ttu-id="a7826-131">Зарегистрироваться для получения учетной записи Azure можно по адресу <http://www.windowsazure.com>.</span><span class="sxs-lookup"><span data-stu-id="a7826-131">You can sign up for an Azure account at <http://www.azure.com>.</span></span>
* <span data-ttu-id="a7826-132">Учетная запись хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-132">An Azure storage account.</span></span> <span data-ttu-id="a7826-133">Если у вас еще нет учетной записи хранения, ее можно создать с помощью процедуры [Создание учетной записи хранения](storage-create-storage-account.md#create-a-storage-account).</span><span class="sxs-lookup"><span data-stu-id="a7826-133">If you don't already have a storage account, you can create one using the steps at [Create a Storage Account](storage-create-storage-account.md#create-a-storage-account).</span></span>
* <span data-ttu-id="a7826-134">Знакомство с решением Jenkins CI рекомендуется, но не является обязательным, поскольку ниже будет приведен простой пример, показывающий этапы использования службы BLOB-объектов в качестве репозитория для артефактов построения решения Jenkins CI.</span><span class="sxs-lookup"><span data-stu-id="a7826-134">Familiarity with the Jenkins CI solution is recommended but not required, as the following content will use a basic example to show you the steps needed when using the Blob service as a repository for Jenkins CI build artifacts.</span></span>

## <a name="how-to-use-the-blob-service-with-jenkins-ci"></a><span data-ttu-id="a7826-135">Как использовать службу больших двоичных объектов с решением непрерывной интеграции Jenkins</span><span class="sxs-lookup"><span data-stu-id="a7826-135">How to use the Blob service with Jenkins CI</span></span>
<span data-ttu-id="a7826-136">Чтобы использовать службу BLOB-объектов с решением Jenkins, необходимо установить подключаемый модуль хранилища Azure, настроить этот модуль на использование учетной записи хранения, а затем создать действие, выполняемое после построения и отправляющее артефакты построения в вашу учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="a7826-136">To use the Blob service with Jenkins, you'll need to install the Azure Storage plugin, configure the plugin to use your storage account, and then create a post-build action that uploads your build artifacts to your storage account.</span></span> <span data-ttu-id="a7826-137">Эти действия описаны в следующих разделах.</span><span class="sxs-lookup"><span data-stu-id="a7826-137">These steps are described in the following sections.</span></span>

## <a name="how-to-install-the-azure-storage-plugin"></a><span data-ttu-id="a7826-138">Как установить подключаемый модуль службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="a7826-138">How to install the Azure Storage plugin</span></span>
1. <span data-ttu-id="a7826-139">На панели мониторинга Jenkins щелкните элемент **Manage Jenkins**(Управление Jenkins).</span><span class="sxs-lookup"><span data-stu-id="a7826-139">Within the Jenkins dashboard, click **Manage Jenkins**.</span></span>
2. <span data-ttu-id="a7826-140">На странице **Manage Jenkins** щелкните **Manage Plugins** (Управление подключаемыми модулями).</span><span class="sxs-lookup"><span data-stu-id="a7826-140">In the **Manage Jenkins** page, click **Manage Plugins**.</span></span>
3. <span data-ttu-id="a7826-141">Перейдите на вкладку **Available** (Доступный).</span><span class="sxs-lookup"><span data-stu-id="a7826-141">Click the **Available** tab.</span></span>
4. <span data-ttu-id="a7826-142">В разделе **Artifact Uploaders** (Средство отправки артефактов) установите флажок **Microsoft Azure Storage plugin** (Подключаемый модуль хранилища Azure).</span><span class="sxs-lookup"><span data-stu-id="a7826-142">In the **Artifact Uploaders** section, check **Microsoft Azure Storage plugin**.</span></span>
5. <span data-ttu-id="a7826-143">Щелкните **Install without restart** (Установить без перезагрузки) или **Download now and install after restart** (Загрузить сейчас и установить позднее).</span><span class="sxs-lookup"><span data-stu-id="a7826-143">Click either **Install without restart** or **Download now and install after restart**.</span></span>
6. <span data-ttu-id="a7826-144">Перезапустите Jenkins.</span><span class="sxs-lookup"><span data-stu-id="a7826-144">Restart Jenkins.</span></span>

## <a name="how-to-configure-the-azure-storage-plugin-to-use-your-storage-account"></a><span data-ttu-id="a7826-145">Как настроить подключаемый модуль службы хранилища Azure для использования своей учетной записи хранения</span><span class="sxs-lookup"><span data-stu-id="a7826-145">How to configure the Azure Storage plugin to use your storage account</span></span>
1. <span data-ttu-id="a7826-146">На панели мониторинга Jenkins щелкните элемент **Manage Jenkins**(Управление Jenkins).</span><span class="sxs-lookup"><span data-stu-id="a7826-146">Within the Jenkins dashboard, click **Manage Jenkins**.</span></span>
2. <span data-ttu-id="a7826-147">На странице **Manage Jenkins** щелкните **Configure System** (Настройка системы).</span><span class="sxs-lookup"><span data-stu-id="a7826-147">In the **Manage Jenkins** page, click **Configure System**.</span></span>
3. <span data-ttu-id="a7826-148">В разделе **Microsoft Azure Storage Account Configuration** (Настройка учетной записи хранения Azure):</span><span class="sxs-lookup"><span data-stu-id="a7826-148">In the **Microsoft Azure Storage Account Configuration** section:</span></span>
   1. <span data-ttu-id="a7826-149">Введите имя своей учетной записи хранения, которое можно получить на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a7826-149">Enter your storage account name, which you can obtain from the [Azure Portal](https://portal.azure.com).</span></span>
   2. <span data-ttu-id="a7826-150">Введите ключ учетной записи хранения, который также можно получить через [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a7826-150">Enter your storage account key, also obtainable from the [Azure Portal](https://portal.azure.com).</span></span>
   3. <span data-ttu-id="a7826-151">Используйте значение по умолчанию для параметра **Blob Service Endpoint URL** (URL-адрес конечной точки службы BLOB-объектов) при использовании общедоступного облака Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-151">Use the default value for **Blob Service Endpoint URL** if you are using the public Azure cloud.</span></span> <span data-ttu-id="a7826-152">При использовании другого облака Azure используйте конечную точку, указанную для вашей учетной записи хранения на [портале Azure](https://portal.azure.com) .</span><span class="sxs-lookup"><span data-stu-id="a7826-152">If you are using a different Azure cloud, use the endpoint as specified in the [Azure Portal](https://portal.azure.com) for your storage account.</span></span> 
   4. <span data-ttu-id="a7826-153">Щелкните **Validate storage credentials** (Проверить учетные данные хранилища) для проверки вашей учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="a7826-153">Click **Validate storage credentials** to validate your storage account.</span></span> 
   5. <span data-ttu-id="a7826-154">[Необязательно] Если у вас есть дополнительные учетные записи хранения, которые требуется сделать доступными для решения Jenkins CI, щелкните **Add more Storage Accounts**(Добавить дополнительные учетные записи хранения).</span><span class="sxs-lookup"><span data-stu-id="a7826-154">[Optional] If you have additional storage accounts that you want made available to your Jenkins CI, click **Add more Storage Accounts**.</span></span>
   6. <span data-ttu-id="a7826-155">Нажмите кнопку **Save** (Сохранить), чтобы сохранить настройки.</span><span class="sxs-lookup"><span data-stu-id="a7826-155">Click **Save** to save your settings.</span></span>

## <a name="how-to-create-a-post-build-action-that-uploads-your-build-artifacts-to-your-storage-account"></a><span data-ttu-id="a7826-156">Создание действия, выполняемого после построения и отправляющего артефакты построения в вашу учетную запись хранения</span><span class="sxs-lookup"><span data-stu-id="a7826-156">How to create a post-build action that uploads your build artifacts to your storage account</span></span>
<span data-ttu-id="a7826-157">В учебных целях сначала необходимо создать задание, которое создаст несколько файлов, а затем добавить выполняемое после построения действие для отправки этих файлов в вашу учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="a7826-157">For instruction purposes, first we'll need to create a job that will create several files, and then add in the post-build action to upload the files to your storage account.</span></span>

1. <span data-ttu-id="a7826-158">На панели мониторинга Jenkins щелкните элемент **New Item**(Создать элемент).</span><span class="sxs-lookup"><span data-stu-id="a7826-158">Within the Jenkins dashboard, click **New Item**.</span></span>
2. <span data-ttu-id="a7826-159">Назовите задание **MyJob**, щелкните **Build a free-style software project** (Построение программного проекта в свободном стиле) и нажмите кнопку **OK**.</span><span class="sxs-lookup"><span data-stu-id="a7826-159">Name the job **MyJob**, click **Build a free-style software project**, and then click **OK**.</span></span>
3. <span data-ttu-id="a7826-160">В разделе **Построение** конфигурации задания щелкните **Добавить шаг построения** и выберите пункт **Выполнить пакетную команду Windows**.</span><span class="sxs-lookup"><span data-stu-id="a7826-160">In the **Build** section of the job configuration, click **Add build step** and choose **Execute Windows batch command**.</span></span>
4. <span data-ttu-id="a7826-161">В поле **Command**(Команда) используйте следующие команды:</span><span class="sxs-lookup"><span data-stu-id="a7826-161">In **Command**, use the following commands:</span></span>

    ```   
    md text
    cd text
    echo Hello Azure Storage from Jenkins > hello.txt
    date /t > date.txt
    time /t >> date.txt
    ```

5. <span data-ttu-id="a7826-162">В разделе конфигурации задания **Post-build Actions** (Действия после построения) щелкните **Add post-build action** (Добавить действие после построения) и выберите **Upload artifacts to Azure Blob storage** (Передать артефакты в хранилище BLOB-объектов Azure).</span><span class="sxs-lookup"><span data-stu-id="a7826-162">In the **Post-build Actions** section of the job configuration, click **Add post-build action** and choose **Upload artifacts to Azure Blob storage**.</span></span>
6. <span data-ttu-id="a7826-163">В поле **Storage Account Name**(Имя учетной записи хранения) выберите используемую учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="a7826-163">For **Storage account name**, select the storage account to use.</span></span>
7. <span data-ttu-id="a7826-164">Для поля **Container name** задайте имя контейнера.</span><span class="sxs-lookup"><span data-stu-id="a7826-164">For **Container name**, specify the container name.</span></span> <span data-ttu-id="a7826-165">(Если этот контейнер не существует, он будет создан при передаче артефактов построения.) Вы можете использовать переменные среды, поэтому для данного примера введите имя контейнера **${JOB_NAME}**.</span><span class="sxs-lookup"><span data-stu-id="a7826-165">(The container will be created if it does not already exist when the build artifacts are uploaded.) You can use environment variables, so for this example enter **${JOB_NAME}** as the container name.</span></span>
   
    <span data-ttu-id="a7826-166">**Подсказка**</span><span class="sxs-lookup"><span data-stu-id="a7826-166">**Tip**</span></span>
   
    <span data-ttu-id="a7826-167">Под разделом **Command** (Команда), где вы указали скрипт в поле **Execute Windows batch command** (Выполнить пакетную команду Windows), находится ссылка на переменные среды, которые распознаются в решении Jenkins.</span><span class="sxs-lookup"><span data-stu-id="a7826-167">Below the **Command** section where you entered a script for **Execute Windows batch command** is a link to the environment variables recognized by Jenkins.</span></span> <span data-ttu-id="a7826-168">Выберите эту ссылку, чтобы узнать имена и описания переменных среды.</span><span class="sxs-lookup"><span data-stu-id="a7826-168">Click that link to learn the environment variable names and descriptions.</span></span> <span data-ttu-id="a7826-169">Обратите внимание, что переменные среды, которые содержат специальные символы, такие как переменная среды **BUILD_URL**, нельзя использовать в качестве имени контейнера или общего виртуального пути.</span><span class="sxs-lookup"><span data-stu-id="a7826-169">Note that environment variables that contain special characters, such as the **BUILD_URL** environment variable, are not allowed as a container name or common virtual path.</span></span>
8. <span data-ttu-id="a7826-170">Щелкните **Сделать новый контейнер открытым по умолчанию** для этого примера.</span><span class="sxs-lookup"><span data-stu-id="a7826-170">Click **Make new container public by default** for this example.</span></span> <span data-ttu-id="a7826-171">(Если вы хотите использовать закрытый контейнер, необходимо создать подпись общего доступа.</span><span class="sxs-lookup"><span data-stu-id="a7826-171">(If you want to use a private container, you'll need to create a shared access signature to allow access.</span></span> <span data-ttu-id="a7826-172">Это выходит за рамки данного раздела.</span><span class="sxs-lookup"><span data-stu-id="a7826-172">That is beyond the scope of this topic.</span></span> <span data-ttu-id="a7826-173">Дополнительные сведения о подписанных URL-адресах см. в статье [Использование подписанных URL-адресов (SAS)](storage-dotnet-shared-access-signature-part-1.md)).</span><span class="sxs-lookup"><span data-stu-id="a7826-173">You can learn more about shared access signatures at [Using Shared Access Signatures (SAS)](storage-dotnet-shared-access-signature-part-1.md).)</span></span>
9. <span data-ttu-id="a7826-174">[Необязательно] Щелкните **Clean container before uploading** (Очистить контейнер перед отправкой), если хотите, чтобы контейнер был перед отправкой артефактов построения (не устанавливайте этот флажок, если не хотите очищать содержимое контейнера).</span><span class="sxs-lookup"><span data-stu-id="a7826-174">[Optional] Click **Clean container before uploading** if you want the container to be cleared of contents before build artifacts are uploaded (leave it unchecked if you do not want to clean the contents of the container).</span></span>
10. <span data-ttu-id="a7826-175">В поле **Список отправляемых артефактов** введите значение **text/*.txt**.</span><span class="sxs-lookup"><span data-stu-id="a7826-175">For **List of Artifacts to upload**, enter **text/*.txt**.</span></span>
11. <span data-ttu-id="a7826-176">Для параметра **Common virtual path for uploaded artifacts** (Общий виртуальный путь для отправленных артефактов) введите значение **${BUILD\_ID}/${BUILD\_NUMBER}**, в целях данного учебника.</span><span class="sxs-lookup"><span data-stu-id="a7826-176">For **Common virtual path for uploaded artifacts**, for purposes of this tutorial, enter **${BUILD\_ID}/${BUILD\_NUMBER}**.</span></span>
12. <span data-ttu-id="a7826-177">Нажмите кнопку **Save** (Сохранить), чтобы сохранить настройки.</span><span class="sxs-lookup"><span data-stu-id="a7826-177">Click **Save** to save your settings.</span></span>
13. <span data-ttu-id="a7826-178">На панели мониторинга Jenkins щелкните **Build Now** (Построение), чтобы запустить **MyJob**.</span><span class="sxs-lookup"><span data-stu-id="a7826-178">In the Jenkins dashboard, click **Build Now** to run **MyJob**.</span></span> <span data-ttu-id="a7826-179">Изучите выходные данные в консоли для определения состояния.</span><span class="sxs-lookup"><span data-stu-id="a7826-179">Examine the console output for status.</span></span> <span data-ttu-id="a7826-180">Сообщения о состоянии для хранилища Azure будут включены в выходные данные консоли, когда действие после построения начнет передавать артефакты построения.</span><span class="sxs-lookup"><span data-stu-id="a7826-180">Status messages for Azure storage will be included in the console output when the post-build action starts to upload build artifacts.</span></span>
14. <span data-ttu-id="a7826-181">После успешного завершения задания можно просмотреть артефакты построения, открыв общедоступный BLOB-объект.</span><span class="sxs-lookup"><span data-stu-id="a7826-181">Upon successful completion of the job, you can examine the build artifacts by opening the public blob.</span></span>
    1. <span data-ttu-id="a7826-182">Войдите на [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="a7826-182">Login to the [Azure Portal](https://portal.azure.com).</span></span>
    2. <span data-ttu-id="a7826-183">Щелкните **Хранилище**.</span><span class="sxs-lookup"><span data-stu-id="a7826-183">Click **Storage**.</span></span>
    3. <span data-ttu-id="a7826-184">Щелкните имя учетной записи хранения, используемой для решения Jenkins.</span><span class="sxs-lookup"><span data-stu-id="a7826-184">Click the storage account name that you used for Jenkins.</span></span>
    4. <span data-ttu-id="a7826-185">Щелкните **Контейнеры**.</span><span class="sxs-lookup"><span data-stu-id="a7826-185">Click **Containers**.</span></span>
    5. <span data-ttu-id="a7826-186">Выберите контейнер с именем **myjob**, которое является копией имени задания Jenkins, написанного в нижнем регистре.</span><span class="sxs-lookup"><span data-stu-id="a7826-186">Click the container named **myjob**, which is the lowercase version of the job name that you assigned when you created the Jenkins job.</span></span> <span data-ttu-id="a7826-187">Имена контейнеров и BLOB-объектов в хранилище Azure отображаются строчными буквами (и с учетом регистра).</span><span class="sxs-lookup"><span data-stu-id="a7826-187">Container names and blob names are lowercase (and case-sensitive) in Azure storage.</span></span> <span data-ttu-id="a7826-188">В списке BLOB-объектов для контейнера с именем **myjob** вы увидите **hello.txt** и **date.txt**.</span><span class="sxs-lookup"><span data-stu-id="a7826-188">Within the list of blobs for the container named **myjob** you should see **hello.txt** and **date.txt**.</span></span> <span data-ttu-id="a7826-189">Скопируйте URL-адрес любого из этих элементов и откройте его в браузере.</span><span class="sxs-lookup"><span data-stu-id="a7826-189">Copy the URL for either of these items and open it in your browser.</span></span> <span data-ttu-id="a7826-190">Вы увидите текстовый файл, который был загружен в качестве артефакта построения.</span><span class="sxs-lookup"><span data-stu-id="a7826-190">You will see the text file that was uploaded as a build artifact.</span></span>

<span data-ttu-id="a7826-191">На каждое задание может быть создано только одно действие после построения, которое отправляет артефакты в хранилище blob-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-191">Only one post-build action that uploads artifacts to Azure blob storage can be created per job.</span></span> <span data-ttu-id="a7826-192">Обратите внимание, что одно действие после построения по загрузке артефактов в хранилище blob-объектов Azure может определять различные файлы (в том числе подстановочные знаки) и пути для файлов в **List of Artifacts to upload** (Список артефактов для отправки) с использованием точки с запятой в качестве разделителя.</span><span class="sxs-lookup"><span data-stu-id="a7826-192">Note that the single post-build action to upload artifacts to Azure blob storage can specify different files (including wildcards) and paths to files within **List of Artifacts to upload** using a semi-colon as a separator.</span></span> <span data-ttu-id="a7826-193">Например, если операция сборки Jenkins создает JAR-файлы и TXT-файлы в папке **build** рабочей области, при этом их нужно отправить в хранилище BLOB-объектов Azure, укажите в поле **Список отправляемых артефактов** следующее значение: **build/\*.jar;build/\*.txt**.</span><span class="sxs-lookup"><span data-stu-id="a7826-193">For example, if your Jenkins build produces JAR files and TXT files in your workspace's **build** folder, and you want to upload both to Azure blob storage, use the following for the **List of Artifacts to upload** value: **build/\*.jar;build/\*.txt**.</span></span> <span data-ttu-id="a7826-194">Чтобы задать путь для использования в имени blob-объекта, можно также использовать синтаксис с двойным двоеточием.</span><span class="sxs-lookup"><span data-stu-id="a7826-194">You can also use double-colon syntax to specify a path to use within the blob name.</span></span> <span data-ttu-id="a7826-195">Например, если необходимо отправить JAR-файлы с использованием **двоичных файлов** в пути BLOB-объекта, а TXT-файлы — с использованием **уведомлений** в пути BLOB-объекта, используйте для параметра **Список отправляемых артефактов** следующее значение: **build/\*.jar::binaries;build/\*.txt::notices**.</span><span class="sxs-lookup"><span data-stu-id="a7826-195">For example, if you want the JARs to get uploaded using **binaries** in the blob path and the TXT files to get uploaded using **notices** in the blob path, use the following for the **List of Artifacts to upload** value: **build/\*.jar::binaries;build/\*.txt::notices**.</span></span>

## <a name="how-to-create-a-build-step-that-downloads-from-azure-blob-storage"></a><span data-ttu-id="a7826-196">Создание шага построения для загрузки blob-объектов из хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="a7826-196">How to create a build step that downloads from Azure blob storage</span></span>
<span data-ttu-id="a7826-197">В последующих шагах показана настройка шага построения для загрузки blob-объектов из хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-197">The following steps show how to configure a build step to download items from Azure blob storage.</span></span> <span data-ttu-id="a7826-198">Это может оказаться полезным при необходимости включить элементы в построение, например, JAR-файлы, которые хранятся в хранилище blob-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-198">This would be useful if you want to include items in your build, for example, JARs that you keep in Azure blob storage.</span></span>

1. <span data-ttu-id="a7826-199">В разделе **Построение** конфигурации задания щелкните **Добавить шаг построения** и выберите пункт **Загрузить из хранилища BLOB-объектов Azure**.</span><span class="sxs-lookup"><span data-stu-id="a7826-199">In the **Build** section of the job configuration, click **Add build step** and choose **Download from Azure Blob storage**.</span></span>
2. <span data-ttu-id="a7826-200">В поле **Storage Account Name**(Имя учетной записи хранения) выберите используемую учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="a7826-200">For **Storage account name**, select the storage account to use.</span></span>
3. <span data-ttu-id="a7826-201">Для поля **Container name**(Имя контейнера) задайте имя контейнера с blob-объектами, которое нужно загрузить.</span><span class="sxs-lookup"><span data-stu-id="a7826-201">For **Container name**, specify the name of the container that has the blobs you want to download.</span></span> <span data-ttu-id="a7826-202">Можно использовать переменные среды.</span><span class="sxs-lookup"><span data-stu-id="a7826-202">You can use environment variables.</span></span>
4. <span data-ttu-id="a7826-203">Для поля **Blob name**задайте имя blob-объекта.</span><span class="sxs-lookup"><span data-stu-id="a7826-203">For **Blob name**, specify the blob name.</span></span> <span data-ttu-id="a7826-204">Можно использовать переменные среды.</span><span class="sxs-lookup"><span data-stu-id="a7826-204">You can use environment variables.</span></span> <span data-ttu-id="a7826-205">В то же время можно использовать звездочку как подстановочный символ после задания начальной буквы (букв) имени blob-объекта.</span><span class="sxs-lookup"><span data-stu-id="a7826-205">Also, you can use an asterisk, as a wildcard after you specify the initial letter(s) of the blob name.</span></span> <span data-ttu-id="a7826-206">Например, имя **project\*** будет определять все BLOB-объекты, имя которых начинается с **project**.</span><span class="sxs-lookup"><span data-stu-id="a7826-206">For example, **project\*** would specify all blobs whose names start with **project**.</span></span>
5. <span data-ttu-id="a7826-207">[Необязательно] Для поля **Download path**(Путь загрузки) задайте путь компьютера с Jenkins, на который вы хотите загрузить файлы из хранилища blob-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-207">[Optional] For **Download path**, specify the path on the Jenkins machine where you want to download files from Azure blob storage.</span></span> <span data-ttu-id="a7826-208">Переменные среды также могут использоваться.</span><span class="sxs-lookup"><span data-stu-id="a7826-208">Environment variables can also be used.</span></span> <span data-ttu-id="a7826-209">(Если не задать значения для поля **Download path**, файлы из хранилища blob-объектов Azure будут загружаться в рабочую область задания.)</span><span class="sxs-lookup"><span data-stu-id="a7826-209">(If you do not provide a value for **Download path**, the files from Azure blob storage will be downloaded to the job's workspace.)</span></span>

<span data-ttu-id="a7826-210">При наличии дополнительных элементов, которые нужно загрузить из хранилища blob-объектов Azure можно создать дополнительные шаги построения.</span><span class="sxs-lookup"><span data-stu-id="a7826-210">If you have additional items you want to download from Azure blob storage, you can create additional build steps.</span></span>

<span data-ttu-id="a7826-211">После выполнения построения можно проверить выход консоли истории построения или взглянуть на местоположение для загрузки и удостовериться, успешно ли загрузились необходимы blob-объекты.</span><span class="sxs-lookup"><span data-stu-id="a7826-211">After you run a build, you can check the build history console output, or look at your download location, to see whether the blobs you expected were successfully downloaded.</span></span>  

## <a name="components-used-by-the-blob-service"></a><span data-ttu-id="a7826-212">Компоненты, используемые службой BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="a7826-212">Components used by the Blob service</span></span>
<span data-ttu-id="a7826-213">Ниже приведен обзор компонентов службы BLOB-объектов:</span><span class="sxs-lookup"><span data-stu-id="a7826-213">The following provides an overview of the Blob service components.</span></span>

* <span data-ttu-id="a7826-214">**Учетная запись хранения**. Весь доступ к хранилищу Azure осуществляется с помощью учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="a7826-214">**Storage Account**: All access to Azure Storage is done through a storage account.</span></span> <span data-ttu-id="a7826-215">Это самое высокоуровневое пространство имен для доступа к BLOB-объектам.</span><span class="sxs-lookup"><span data-stu-id="a7826-215">This is the highest level of the namespace for accessing blobs.</span></span> <span data-ttu-id="a7826-216">Учетная запись может содержать неограниченное число контейнеров при условии, что их общий размер не достигает 100 ТБ.</span><span class="sxs-lookup"><span data-stu-id="a7826-216">An account can contain an unlimited number of containers, as long as their total size is under 100TB.</span></span>
* <span data-ttu-id="a7826-217">**Контейнер**. Контейнер обеспечивает группировку набора BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="a7826-217">**Container**: A container provides a grouping of a set of blobs.</span></span> <span data-ttu-id="a7826-218">Все BLOB-объекты должны содержаться в контейнере.</span><span class="sxs-lookup"><span data-stu-id="a7826-218">All blobs must be in a container.</span></span> <span data-ttu-id="a7826-219">Учетная запись может содержать неограниченное число контейнеров.</span><span class="sxs-lookup"><span data-stu-id="a7826-219">An account can contain an unlimited number of containers.</span></span> <span data-ttu-id="a7826-220">Контейнер может хранить неограниченное количество больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="a7826-220">A container can store an unlimited number of blobs.</span></span>
* <span data-ttu-id="a7826-221">**BLOB-объект**. Файл любого типа и размера.</span><span class="sxs-lookup"><span data-stu-id="a7826-221">**Blob**: A file of any type and size.</span></span> <span data-ttu-id="a7826-222">Существует два типа BLOB-объектов, которые могут храниться в хранилище Azure: блоки и страницы.</span><span class="sxs-lookup"><span data-stu-id="a7826-222">There are two types of blobs that can be stored in Azure Storage: block and page blobs.</span></span> <span data-ttu-id="a7826-223">Большинство файлов являются BLOB-блоками.</span><span class="sxs-lookup"><span data-stu-id="a7826-223">Most files are block blobs.</span></span> <span data-ttu-id="a7826-224">Единичный BLOB-блок может иметь размер до 200 ГБ.</span><span class="sxs-lookup"><span data-stu-id="a7826-224">A single block blob can be up to 200GB in size.</span></span> <span data-ttu-id="a7826-225">В этом учебнике используются BLOB-блоки.</span><span class="sxs-lookup"><span data-stu-id="a7826-225">This tutorial uses block blobs.</span></span> <span data-ttu-id="a7826-226">Страницы больших двоичных объектов являются другим типом больших двоичных объектов и могут иметь размер до 1 ТБ. Они более эффективны, когда диапазоны байтов в файле часто изменяются.</span><span class="sxs-lookup"><span data-stu-id="a7826-226">Page blobs, another blob type, can be up to 1TB in size, and are more efficient when ranges of bytes in a file are modified frequently.</span></span> <span data-ttu-id="a7826-227">Дополнительные сведения о BLOB-объектах см. в разделе [Основные сведения о блочных, добавочных и страничных BLOB-объектах](http://msdn.microsoft.com/library/azure/ee691964.aspx).</span><span class="sxs-lookup"><span data-stu-id="a7826-227">For more information about blobs, see [Understanding Block Blobs, Append Blobs, and Page Blobs](http://msdn.microsoft.com/library/azure/ee691964.aspx).</span></span>
* <span data-ttu-id="a7826-228">**Формат URL-адреса**. К BLOB-объектам можно обратиться, используя следующий формат URL-адреса:</span><span class="sxs-lookup"><span data-stu-id="a7826-228">**URL format**: Blobs are addressable using the following URL format:</span></span>
  
    `http://storageaccount.blob.core.windows.net/container_name/blob_name`
  
    <span data-ttu-id="a7826-229">(Приведенный выше формат применяется для общедоступного облака Azure.</span><span class="sxs-lookup"><span data-stu-id="a7826-229">(The format above applies to the public Azure cloud.</span></span> <span data-ttu-id="a7826-230">При использовании другого облака Azure используйте конечную точку на [портале Azure](https://portal.azure.com) , чтобы определить конечную точку URL-адреса.)</span><span class="sxs-lookup"><span data-stu-id="a7826-230">If you are using a different Azure cloud, use the endpoint within the [Azure Portal](https://portal.azure.com) to determine your URL endpoint.)</span></span>
  
    <span data-ttu-id="a7826-231">В указанном выше формате `storageaccount` представляет имя вашей учетной записи хранения, `container_name` представляет имя контейнера, а `blob_name` представляет имя BLOB-объекта соответственно.</span><span class="sxs-lookup"><span data-stu-id="a7826-231">In the format above, `storageaccount` represents the name of your storage account, `container_name` represents the name of your container, and `blob_name` represents the name of your blob, respectively.</span></span> <span data-ttu-id="a7826-232">В имени контейнера может использовать несколько путей, разделенных косой чертой — **/**.</span><span class="sxs-lookup"><span data-stu-id="a7826-232">Within the container name, you can have multiple paths, separated by a forward slash, **/**.</span></span> <span data-ttu-id="a7826-233">Примером имени контейнера в данном учебнике было имя **MyJob**, а имя **${BUILD\_ID}/${BUILD\_NUMBER}** использовалось в качестве общего виртуального пути, в результате чего BLOB-объект имеет следующий URL-адрес:</span><span class="sxs-lookup"><span data-stu-id="a7826-233">The example container name in this tutorial was **MyJob**, and **${BUILD\_ID}/${BUILD\_NUMBER}** was used for the common virtual path, resulting in the blob having a URL of the following form:</span></span>
  
    `http://example.blob.core.windows.net/myjob/2014-04-14_23-57-00/1/hello.txt`

## <a name="next-steps"></a><span data-ttu-id="a7826-234">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="a7826-234">Next steps</span></span>
* [<span data-ttu-id="a7826-235">Знакомство с Jenkins</span><span class="sxs-lookup"><span data-stu-id="a7826-235">Meet Jenkins</span></span>](https://wiki.jenkins-ci.org/display/JENKINS/Meet+Jenkins)
* [<span data-ttu-id="a7826-236">Пакет SDK для службы хранилища Azure для Java</span><span class="sxs-lookup"><span data-stu-id="a7826-236">Azure Storage SDK for Java</span></span>](https://github.com/azure/azure-storage-java)
* [<span data-ttu-id="a7826-237">справочнике по пакету SDK для клиента службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="a7826-237">Azure Storage Client SDK Reference</span></span>](http://dl.windowsazure.com/storage/javadoc/)
* [<span data-ttu-id="a7826-238">API-интерфейс REST служб хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="a7826-238">Azure Storage Services REST API</span></span>](https://msdn.microsoft.com/library/azure/dd179355.aspx)
* [<span data-ttu-id="a7826-239">Блог рабочей группы службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="a7826-239">Azure Storage Team Blog</span></span>](http://blogs.msdn.com/b/windowsazurestorage/)

<span data-ttu-id="a7826-240">Дополнительные сведения см. также в [Центре разработчика Java](https://azure.microsoft.com/develop/java/).</span><span class="sxs-lookup"><span data-stu-id="a7826-240">For more information, also see the [Java Developer Center](https://azure.microsoft.com/develop/java/).</span></span>