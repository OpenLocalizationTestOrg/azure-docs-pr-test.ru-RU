---
title: "Контрольный список производительности и масштабируемости хранилища aaaAzure | Документы Microsoft"
description: "Контрольный список проверенных методов для использования с хранилищем Azure при разработке приложений с высокой производительностью."
services: storage
documentationcenter: 
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 959d831b-a4fd-4634-a646-0d2c0c462ef8
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: c0cd77da4a1abda42c018255ed93215b71f4fad8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="microsoft-azure-storage-performance-and-scalability-checklist"></a><span data-ttu-id="be4e7-103">Производительность хранилища Microsoft Azure и контрольный список масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-103">Microsoft Azure Storage Performance and Scalability Checklist</span></span>
## <a name="overview"></a><span data-ttu-id="be4e7-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="be4e7-104">Overview</span></span>
<span data-ttu-id="be4e7-105">С момента выпуска hello hello службы хранилища Microsoft Azure Корпорация Майкрософт разработала количество проверенных методах использования этих служб производительным образом и в этой статье служит tooconsolidate hello наиболее важные из них в список стилей контрольный список.</span><span class="sxs-lookup"><span data-stu-id="be4e7-105">Since hello release of hello Microsoft Azure Storage services, Microsoft has developed a number of proven practices for using these services in a performant manner, and this article serves tooconsolidate hello most important of them into a checklist-style list.</span></span> <span data-ttu-id="be4e7-106">toohelp разработчикам приложений убедитесь, что они используют проверенные хранилища Azure и их определения другие методики они полезно придерживаться toohelp — намерение Hello данной статьи.</span><span class="sxs-lookup"><span data-stu-id="be4e7-106">hello intention of this article is toohelp application developers verify they are using proven practices with Azure Storage and toohelp them identify other proven practices they should consider adopting.</span></span> <span data-ttu-id="be4e7-107">В этой статье не пытаться toocover каждой возможности оптимизации производительности и масштабируемости — те, которые мало в их влияние или не широкой областью применения исключаются.</span><span class="sxs-lookup"><span data-stu-id="be4e7-107">This article does not attempt toocover every possible performance and scalability optimization — it excludes those that are small in their impact or not broadly applicable.</span></span> <span data-ttu-id="be4e7-108">toohello экстент, hello поведение приложения может быть спрогнозирован во время разработки бывает полезно tookeep их в виду на раннем этапе tooavoid схем, которые сталкиваются с проблемами производительности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-108">toohello extent that hello application's behavior can be predicted during design, it's useful tookeep these in mind early on tooavoid designs that will run into performance problems.</span></span>  

<span data-ttu-id="be4e7-109">Каждый разработчик приложения с помощью хранилища Azure должен занять tooread время hello в этой статье, а также убедитесь, что свои приложения использует каждого hello проверенные методики, перечисленные ниже.</span><span class="sxs-lookup"><span data-stu-id="be4e7-109">Every application developer using Azure Storage should take hello time tooread this article, and check that his or her application follows each of hello proven practices listed below.</span></span>  

## <a name="checklist"></a><span data-ttu-id="be4e7-110">Контрольный список</span><span class="sxs-lookup"><span data-stu-id="be4e7-110">Checklist</span></span>
<span data-ttu-id="be4e7-111">В этой статье hello проверенные методики организованы в следующие группы hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-111">This article organizes hello proven practices into hello following groups.</span></span> <span data-ttu-id="be4e7-112">Методики, применимые в отношении:</span><span class="sxs-lookup"><span data-stu-id="be4e7-112">Proven practices applicable to:</span></span>  

* <span data-ttu-id="be4e7-113">всех служб хранилища Azure (BLOB-объектов, таблиц, очередей и файлов);</span><span class="sxs-lookup"><span data-stu-id="be4e7-113">All Azure Storage services (blobs, tables, queues, and files)</span></span>
* <span data-ttu-id="be4e7-114">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-114">Blobs</span></span>
* <span data-ttu-id="be4e7-115">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-115">Tables</span></span>
* <span data-ttu-id="be4e7-116">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-116">Queues</span></span>  

| <span data-ttu-id="be4e7-117">Готово</span><span class="sxs-lookup"><span data-stu-id="be4e7-117">Done</span></span> | <span data-ttu-id="be4e7-118">Область</span><span class="sxs-lookup"><span data-stu-id="be4e7-118">Area</span></span> | <span data-ttu-id="be4e7-119">Категория</span><span class="sxs-lookup"><span data-stu-id="be4e7-119">Category</span></span> | <span data-ttu-id="be4e7-120">Вопрос</span><span class="sxs-lookup"><span data-stu-id="be4e7-120">Question</span></span> |
| --- | --- | --- | --- |
| &nbsp; | <span data-ttu-id="be4e7-121">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-121">All Services</span></span> |<span data-ttu-id="be4e7-122">Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-122">Scalability Targets</span></span> |[<span data-ttu-id="be4e7-123">Приближается к tooavoid приложение, разработанное целевые показатели масштабируемости hello</span><span class="sxs-lookup"><span data-stu-id="be4e7-123">Is your application designed tooavoid approaching hello scalability targets?</span></span>](#subheading1) |
| &nbsp; | <span data-ttu-id="be4e7-124">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-124">All Services</span></span> |<span data-ttu-id="be4e7-125">Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-125">Scalability Targets</span></span> |[<span data-ttu-id="be4e7-126">Лучше вашей именования tooenable соглашение предназначены балансировки нагрузки?</span><span class="sxs-lookup"><span data-stu-id="be4e7-126">Is your naming convention designed tooenable better load-balancing?</span></span>](#subheading47) |
| &nbsp; | <span data-ttu-id="be4e7-127">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-127">All Services</span></span> |<span data-ttu-id="be4e7-128">Сеть</span><span class="sxs-lookup"><span data-stu-id="be4e7-128">Networking</span></span> |[<span data-ttu-id="be4e7-129">У части клиентских устройств достаточно высокой пропускной способностью и малой задержкой tooachieve hello производительности требуется?</span><span class="sxs-lookup"><span data-stu-id="be4e7-129">Do client side devices have sufficiently high bandwidth and low latency tooachieve hello performance needed?</span></span>](#subheading2) |
| &nbsp; | <span data-ttu-id="be4e7-130">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-130">All Services</span></span> |<span data-ttu-id="be4e7-131">Сеть</span><span class="sxs-lookup"><span data-stu-id="be4e7-131">Networking</span></span> |[<span data-ttu-id="be4e7-132">Имеют ли клиентские устройства достаточно высокое качество связи?</span><span class="sxs-lookup"><span data-stu-id="be4e7-132">Do client side devices have a high enough quality link?</span></span>](#subheading3) |
| &nbsp; | <span data-ttu-id="be4e7-133">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-133">All Services</span></span> |<span data-ttu-id="be4e7-134">Сеть</span><span class="sxs-lookup"><span data-stu-id="be4e7-134">Networking</span></span> |[<span data-ttu-id="be4e7-135">Находится ли клиентское приложение hello «рядом с» hello учетной записи хранилища?</span><span class="sxs-lookup"><span data-stu-id="be4e7-135">Is hello client application located "near" hello storage account?</span></span>](#subheading4) |
| &nbsp; | <span data-ttu-id="be4e7-136">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-136">All Services</span></span> |<span data-ttu-id="be4e7-137">Распространение содержимого</span><span class="sxs-lookup"><span data-stu-id="be4e7-137">Content Distribution</span></span> |[<span data-ttu-id="be4e7-138">Используете ли вы CDN для распределения содержимого?</span><span class="sxs-lookup"><span data-stu-id="be4e7-138">Are you using a CDN for content distribution?</span></span>](#subheading5) |
| &nbsp; | <span data-ttu-id="be4e7-139">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-139">All Services</span></span> |<span data-ttu-id="be4e7-140">Прямой клиентский доступ</span><span class="sxs-lookup"><span data-stu-id="be4e7-140">Direct Client Access</span></span> |[<span data-ttu-id="be4e7-141">Вы используете SAS и CORS toostorage tooallow прямой доступ вместо прокси?</span><span class="sxs-lookup"><span data-stu-id="be4e7-141">Are you using SAS and CORS tooallow direct access toostorage instead of proxy?</span></span>](#subheading6) |
| &nbsp; | <span data-ttu-id="be4e7-142">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-142">All Services</span></span> |<span data-ttu-id="be4e7-143">Caching</span><span class="sxs-lookup"><span data-stu-id="be4e7-143">Caching</span></span> |[<span data-ttu-id="be4e7-144">Данные кэширования приложений используются постоянно и изменяются редко?</span><span class="sxs-lookup"><span data-stu-id="be4e7-144">Is your application caching data that is repeatedly used and changes rarely?</span></span>](#subheading7) |
| &nbsp; | <span data-ttu-id="be4e7-145">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-145">All Services</span></span> |<span data-ttu-id="be4e7-146">Caching</span><span class="sxs-lookup"><span data-stu-id="be4e7-146">Caching</span></span> |[<span data-ttu-id="be4e7-147">Ваше приложение группирует обновления (кэширует на стороне клиента, а затем загружает в виде большого массива)?</span><span class="sxs-lookup"><span data-stu-id="be4e7-147">Is your application batching updates (caching them client side and then uploading in larger sets)?</span></span>](#subheading8) |
| &nbsp; | <span data-ttu-id="be4e7-148">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-148">All Services</span></span> |<span data-ttu-id="be4e7-149">Конфигурация .NET</span><span class="sxs-lookup"><span data-stu-id="be4e7-149">.NET Configuration</span></span> |[<span data-ttu-id="be4e7-150">Вы настроили ваш клиент toouse достаточное количество одновременных подключений?</span><span class="sxs-lookup"><span data-stu-id="be4e7-150">Have you configured your client toouse a sufficient number of concurrent connections?</span></span>](#subheading9) |
| &nbsp; | <span data-ttu-id="be4e7-151">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-151">All Services</span></span> |<span data-ttu-id="be4e7-152">Конфигурация .NET</span><span class="sxs-lookup"><span data-stu-id="be4e7-152">.NET Configuration</span></span> |[<span data-ttu-id="be4e7-153">Вы настроили .NET toouse достаточное количество потоков?</span><span class="sxs-lookup"><span data-stu-id="be4e7-153">Have you configured .NET toouse a sufficient number of threads?</span></span>](#subheading10) |
| &nbsp; | <span data-ttu-id="be4e7-154">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-154">All Services</span></span> |<span data-ttu-id="be4e7-155">Конфигурация .NET</span><span class="sxs-lookup"><span data-stu-id="be4e7-155">.NET Configuration</span></span> |[<span data-ttu-id="be4e7-156">Используете ли вы .NET 4.5 или более позднюю версию, в которой улучшена функция сборки мусора?</span><span class="sxs-lookup"><span data-stu-id="be4e7-156">Are you using .NET 4.5 or later, which has improved garbage collection?</span></span>](#subheading11) |
| &nbsp; | <span data-ttu-id="be4e7-157">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-157">All Services</span></span> |<span data-ttu-id="be4e7-158">Parallelism</span><span class="sxs-lookup"><span data-stu-id="be4e7-158">Parallelism</span></span> |[<span data-ttu-id="be4e7-159">Вы убедились в ограниченных, параллелизма соответствующим образом, чтобы не перегружать целевые показатели масштабируемости hello или клиентских возможностей?</span><span class="sxs-lookup"><span data-stu-id="be4e7-159">Have you ensured that parallelism is bounded appropriately so that you don't overload either your client capabilities or hello scalability targets?</span></span>](#subheading12) |
| &nbsp; | <span data-ttu-id="be4e7-160">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-160">All Services</span></span> |<span data-ttu-id="be4e7-161">Средства</span><span class="sxs-lookup"><span data-stu-id="be4e7-161">Tools</span></span> |[<span data-ttu-id="be4e7-162">Вы используете последнюю версию Microsoft hello предоставляются клиентские библиотеки и средства?</span><span class="sxs-lookup"><span data-stu-id="be4e7-162">Are you using hello latest version of Microsoft provided client libraries and tools?</span></span>](#subheading13) |
| &nbsp; | <span data-ttu-id="be4e7-163">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-163">All Services</span></span> |<span data-ttu-id="be4e7-164">Повторы</span><span class="sxs-lookup"><span data-stu-id="be4e7-164">Retries</span></span> |[<span data-ttu-id="be4e7-165">Вы используете политику повтора экспоненциального откладывания для регулирования ошибок и времени ожидания?</span><span class="sxs-lookup"><span data-stu-id="be4e7-165">Are you using an exponential backoff retry policy for throttling errors and timeouts?</span></span>](#subheading14) |
| &nbsp; | <span data-ttu-id="be4e7-166">Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-166">All Services</span></span> |<span data-ttu-id="be4e7-167">Повторы</span><span class="sxs-lookup"><span data-stu-id="be4e7-167">Retries</span></span> |[<span data-ttu-id="be4e7-168">Ваше приложение избегает повторов неповторяемых ошибок?</span><span class="sxs-lookup"><span data-stu-id="be4e7-168">Is your application avoiding retries for non-retryable errors?</span></span>](#subheading15) |
| &nbsp; | <span data-ttu-id="be4e7-169">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-169">Blobs</span></span> |<span data-ttu-id="be4e7-170">Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-170">Scalability Targets</span></span> |[<span data-ttu-id="be4e7-171">Имеется большое число клиентов, одновременно обращающихся к одному объекту?</span><span class="sxs-lookup"><span data-stu-id="be4e7-171">Do you have a large number of clients accessing a single object concurrently?</span></span>](#subheading46) |
| &nbsp; | <span data-ttu-id="be4e7-172">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-172">Blobs</span></span> |<span data-ttu-id="be4e7-173">Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-173">Scalability Targets</span></span> |[<span data-ttu-id="be4e7-174">Приложения должны оставаться в пределах hello пропускной способности или операций цель масштабируемости для большого двоичного объекта?</span><span class="sxs-lookup"><span data-stu-id="be4e7-174">Is your application staying within hello bandwidth or operations scalability target for a single blob?</span></span>](#subheading16) |
| &nbsp; | <span data-ttu-id="be4e7-175">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-175">Blobs</span></span> |<span data-ttu-id="be4e7-176">Копирование BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="be4e7-176">Copying Blobs</span></span> |[<span data-ttu-id="be4e7-177">Вы копируете BLOB-объекты эффективным способом?</span><span class="sxs-lookup"><span data-stu-id="be4e7-177">Are you copying blobs in an efficient manner?</span></span>](#subheading17) |
| &nbsp; | <span data-ttu-id="be4e7-178">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-178">Blobs</span></span> |<span data-ttu-id="be4e7-179">Копирование BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="be4e7-179">Copying Blobs</span></span> |[<span data-ttu-id="be4e7-180">Используете ли вы AzCopy для массового копирования BLOB-объектов?</span><span class="sxs-lookup"><span data-stu-id="be4e7-180">Are you using AzCopy for bulk copies of blobs?</span></span>](#subheading18) |
| &nbsp; | <span data-ttu-id="be4e7-181">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-181">Blobs</span></span> |<span data-ttu-id="be4e7-182">Копирование BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="be4e7-182">Copying Blobs</span></span> |[<span data-ttu-id="be4e7-183">Вы используете импорта и экспорта Azure tootransfer очень больших объемов данных?</span><span class="sxs-lookup"><span data-stu-id="be4e7-183">Are you using Azure Import/Export tootransfer very large volumes of data?</span></span>](#subheading19) |
| &nbsp; | <span data-ttu-id="be4e7-184">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-184">Blobs</span></span> |<span data-ttu-id="be4e7-185">Использование метаданных</span><span class="sxs-lookup"><span data-stu-id="be4e7-185">Use Metadata</span></span> |[<span data-ttu-id="be4e7-186">Вы храните часто используемые метаданные, касающиеся BLOB-объектов, в их метаданных?</span><span class="sxs-lookup"><span data-stu-id="be4e7-186">Are you storing frequently used metadata about blobs in their metadata?</span></span>](#subheading20) |
| &nbsp; | <span data-ttu-id="be4e7-187">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-187">Blobs</span></span> |<span data-ttu-id="be4e7-188">Быстрая отправка</span><span class="sxs-lookup"><span data-stu-id="be4e7-188">Uploading Fast</span></span> |[<span data-ttu-id="be4e7-189">При попытке быстро tooupload одного большого двоичного объекта, вы отправляете блоков одновременно?</span><span class="sxs-lookup"><span data-stu-id="be4e7-189">When trying tooupload one blob quickly, are you uploading blocks in parallel?</span></span>](#subheading21) |
| &nbsp; | <span data-ttu-id="be4e7-190">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-190">Blobs</span></span> |<span data-ttu-id="be4e7-191">Быстрая отправка</span><span class="sxs-lookup"><span data-stu-id="be4e7-191">Uploading Fast</span></span> |[<span data-ttu-id="be4e7-192">При попытке tooupload много BLOB-объектов быстро, вы отправляете больших двоичных объектов в параллельном режиме?</span><span class="sxs-lookup"><span data-stu-id="be4e7-192">When trying tooupload many blobs quickly, are you uploading blobs in parallel?</span></span>](#subheading22) |
| &nbsp; | <span data-ttu-id="be4e7-193">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-193">Blobs</span></span> |<span data-ttu-id="be4e7-194">Правильный тип BLOB-объекта</span><span class="sxs-lookup"><span data-stu-id="be4e7-194">Correct Blob Type</span></span> |[<span data-ttu-id="be4e7-195">Используете ли вы при необходимости страничные BLOB-объекты или блочные BLOB-объекты?</span><span class="sxs-lookup"><span data-stu-id="be4e7-195">Are you using page blobs or block blobs when appropriate?</span></span>](#subheading23) |
| &nbsp; | <span data-ttu-id="be4e7-196">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-196">Tables</span></span> |<span data-ttu-id="be4e7-197">Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-197">Scalability Targets</span></span> |[<span data-ttu-id="be4e7-198">Такое вы около hello целевые показатели масштабируемости для сущностей в секунду</span><span class="sxs-lookup"><span data-stu-id="be4e7-198">Are you approaching hello scalability targets for entities per second?</span></span>](#subheading24) |
| &nbsp; | <span data-ttu-id="be4e7-199">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-199">Tables</span></span> |<span data-ttu-id="be4e7-200">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="be4e7-200">Configuration</span></span> |[<span data-ttu-id="be4e7-201">Используете ли вы JSON в запросах таблиц?</span><span class="sxs-lookup"><span data-stu-id="be4e7-201">Are you using JSON for your table requests?</span></span>](#subheading25) |
| &nbsp; | <span data-ttu-id="be4e7-202">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-202">Tables</span></span> |<span data-ttu-id="be4e7-203">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="be4e7-203">Configuration</span></span> |[<span data-ttu-id="be4e7-204">Вы отключили Nagle производительности hello tooimprove небольших запросов?</span><span class="sxs-lookup"><span data-stu-id="be4e7-204">Have you turned Nagle off tooimprove hello performance of small requests?</span></span>](#subheading26) |
| &nbsp; | <span data-ttu-id="be4e7-205">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-205">Tables</span></span> |<span data-ttu-id="be4e7-206">Таблицы и разделы</span><span class="sxs-lookup"><span data-stu-id="be4e7-206">Tables and Partitions</span></span> |[<span data-ttu-id="be4e7-207">Вы правильно разделили свои данные?</span><span class="sxs-lookup"><span data-stu-id="be4e7-207">Have you properly partitioned your data?</span></span>](#subheading27) |
| &nbsp; | <span data-ttu-id="be4e7-208">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-208">Tables</span></span> |<span data-ttu-id="be4e7-209">Горячие разделы</span><span class="sxs-lookup"><span data-stu-id="be4e7-209">Hot Partitions</span></span> |[<span data-ttu-id="be4e7-210">Вы избегаете использования инкрементируемых и декрементируемых шаблонов?</span><span class="sxs-lookup"><span data-stu-id="be4e7-210">Are you avoiding append-only and prepend-only patterns?</span></span>](#subheading28) |
| &nbsp; | <span data-ttu-id="be4e7-211">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-211">Tables</span></span> |<span data-ttu-id="be4e7-212">Горячие разделы</span><span class="sxs-lookup"><span data-stu-id="be4e7-212">Hot Partitions</span></span> |[<span data-ttu-id="be4e7-213">Вы распределяете свои вставки и обновления по нескольким разделам?</span><span class="sxs-lookup"><span data-stu-id="be4e7-213">Are your inserts/updates spread across many partitions?</span></span>](#subheading29) |
| &nbsp; | <span data-ttu-id="be4e7-214">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-214">Tables</span></span> |<span data-ttu-id="be4e7-215">Область запроса</span><span class="sxs-lookup"><span data-stu-id="be4e7-215">Query Scope</span></span> |[<span data-ttu-id="be4e7-216">Предусмотрели tooallow вашей схемы для toobe запросов точки используются в большинстве случаев и toobe таблицы запросов, используется только в случае необходимости?</span><span class="sxs-lookup"><span data-stu-id="be4e7-216">Have you designed your schema tooallow for point queries toobe used in most cases, and table queries toobe used sparingly?</span></span>](#subheading30) |
| &nbsp; | <span data-ttu-id="be4e7-217">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-217">Tables</span></span> |<span data-ttu-id="be4e7-218">Плотность запроса</span><span class="sxs-lookup"><span data-stu-id="be4e7-218">Query Density</span></span> |[<span data-ttu-id="be4e7-219">Ваши запросы обычно только сканируют и возвращают строки, которые будет использовать приложение?</span><span class="sxs-lookup"><span data-stu-id="be4e7-219">Do your queries typically only scan and return rows that your application will use?</span></span>](#subheading31) |
| &nbsp; | <span data-ttu-id="be4e7-220">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-220">Tables</span></span> |<span data-ttu-id="be4e7-221">Ограничение возвращаемых данных</span><span class="sxs-lookup"><span data-stu-id="be4e7-221">Limiting Returned Data</span></span> |[<span data-ttu-id="be4e7-222">Вы используете фильтрации tooavoid возвращение сущностей, которые не требуются?</span><span class="sxs-lookup"><span data-stu-id="be4e7-222">Are you using filtering tooavoid returning entities that are not needed?</span></span>](#subheading32) |
| &nbsp; | <span data-ttu-id="be4e7-223">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-223">Tables</span></span> |<span data-ttu-id="be4e7-224">Ограничение возвращаемых данных</span><span class="sxs-lookup"><span data-stu-id="be4e7-224">Limiting Returned Data</span></span> |[<span data-ttu-id="be4e7-225">Используется проекция tooavoid возврат свойств, которые больше не нужны?</span><span class="sxs-lookup"><span data-stu-id="be4e7-225">Are you using projection tooavoid returning properties that are not needed?</span></span>](#subheading33) |
| &nbsp; | <span data-ttu-id="be4e7-226">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-226">Tables</span></span> |<span data-ttu-id="be4e7-227">Денормализация</span><span class="sxs-lookup"><span data-stu-id="be4e7-227">Denormalization</span></span> |[<span data-ttu-id="be4e7-228">Денормализованное данных таким образом, чтобы избежать неэффективные запросы или несколько запросов чтения при попытке tooget данных?</span><span class="sxs-lookup"><span data-stu-id="be4e7-228">Have you denormalized your data such that you avoid inefficient queries or multiple read requests when trying tooget data?</span></span>](#subheading34) |
| &nbsp; | <span data-ttu-id="be4e7-229">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-229">Tables</span></span> |<span data-ttu-id="be4e7-230">Вставить, обновить, удалить</span><span class="sxs-lookup"><span data-stu-id="be4e7-230">Insert/Update/Delete</span></span> |[<span data-ttu-id="be4e7-231">Вы пакетной обработки запросов, которые требуется toobe транзакций или можно выполнить на hello же время циклов приема-передачи tooreduce?</span><span class="sxs-lookup"><span data-stu-id="be4e7-231">Are you batching requests that need toobe transactional or can be done at hello same time tooreduce round-trips?</span></span>](#subheading35) |
| &nbsp; | <span data-ttu-id="be4e7-232">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-232">Tables</span></span> |<span data-ttu-id="be4e7-233">Вставить, обновить, удалить</span><span class="sxs-lookup"><span data-stu-id="be4e7-233">Insert/Update/Delete</span></span> |[<span data-ttu-id="be4e7-234">Вы Предотвращение извлечение сущности просто toodetermine ли toocall вставки или обновления?</span><span class="sxs-lookup"><span data-stu-id="be4e7-234">Are you avoiding retrieving an entity just toodetermine whether toocall insert or update?</span></span>](#subheading36) |
| &nbsp; | <span data-ttu-id="be4e7-235">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-235">Tables</span></span> |<span data-ttu-id="be4e7-236">Вставить, обновить, удалить</span><span class="sxs-lookup"><span data-stu-id="be4e7-236">Insert/Update/Delete</span></span> |[<span data-ttu-id="be4e7-237">Рассматривали ли вы возможность хранения ряда данных, которые будут часто извлекаться в качестве свойств вместе с единственной сущностью, а не в виде множества сущностей?</span><span class="sxs-lookup"><span data-stu-id="be4e7-237">Have you considered storing series of data that will frequently be retrieved together in a single entity as properties instead of multiple entities?</span></span>](#subheading37) |
| &nbsp; | <span data-ttu-id="be4e7-238">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-238">Tables</span></span> |<span data-ttu-id="be4e7-239">Вставить, обновить, удалить</span><span class="sxs-lookup"><span data-stu-id="be4e7-239">Insert/Update/Delete</span></span> |[<span data-ttu-id="be4e7-240">Для сущностей, которые всегда будут извлекаться вместе и могут быть записаны в пакеты (например, данные временных рядов), рассматривали ли вы возможность использования BLOB-объектов вместо таблиц?</span><span class="sxs-lookup"><span data-stu-id="be4e7-240">For entities that will always be retrieved together and can be written in batches (e.g. time series data), have you considered using blobs instead of tables?</span></span>](#subheading38) |
| &nbsp; | <span data-ttu-id="be4e7-241">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-241">Queues</span></span> |<span data-ttu-id="be4e7-242">Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-242">Scalability Targets</span></span> |[<span data-ttu-id="be4e7-243">Такое вы около hello целевые показатели масштабируемости для сообщений в секунду</span><span class="sxs-lookup"><span data-stu-id="be4e7-243">Are you approaching hello scalability targets for messages per second?</span></span>](#subheading39) |
| &nbsp; | <span data-ttu-id="be4e7-244">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-244">Queues</span></span> |<span data-ttu-id="be4e7-245">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="be4e7-245">Configuration</span></span> |[<span data-ttu-id="be4e7-246">Вы отключили Nagle производительности hello tooimprove небольших запросов?</span><span class="sxs-lookup"><span data-stu-id="be4e7-246">Have you turned Nagle off tooimprove hello performance of small requests?</span></span>](#subheading40) |
| &nbsp; | <span data-ttu-id="be4e7-247">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-247">Queues</span></span> |<span data-ttu-id="be4e7-248">Размер сообщения</span><span class="sxs-lookup"><span data-stu-id="be4e7-248">Message Size</span></span> |[<span data-ttu-id="be4e7-249">— Сообщения производительности hello compact tooimprove hello очереди?</span><span class="sxs-lookup"><span data-stu-id="be4e7-249">Are your messages compact tooimprove hello performance of hello queue?</span></span>](#subheading41) |
| &nbsp; | <span data-ttu-id="be4e7-250">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-250">Queues</span></span> |<span data-ttu-id="be4e7-251">Массовое получение</span><span class="sxs-lookup"><span data-stu-id="be4e7-251">Bulk Retrieve</span></span> |[<span data-ttu-id="be4e7-252">Вы получаете множество сообщений при выполнении одной операции "Получить"?</span><span class="sxs-lookup"><span data-stu-id="be4e7-252">Are you retrieving multiple messages in a single "Get" operation?</span></span>](#subheading42) |
| &nbsp; | <span data-ttu-id="be4e7-253">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-253">Queues</span></span> |<span data-ttu-id="be4e7-254">Частота опроса</span><span class="sxs-lookup"><span data-stu-id="be4e7-254">Polling Frequency</span></span> |[<span data-ttu-id="be4e7-255">Ли опроса часто достаточно hello tooreduce воспринимаемой задержка приложения?</span><span class="sxs-lookup"><span data-stu-id="be4e7-255">Are you polling frequently enough tooreduce hello perceived latency of your application?</span></span>](#subheading43) |
| &nbsp; | <span data-ttu-id="be4e7-256">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-256">Queues</span></span> |<span data-ttu-id="be4e7-257">Сообщение об обновлении</span><span class="sxs-lookup"><span data-stu-id="be4e7-257">Update Message</span></span> |[<span data-ttu-id="be4e7-258">Вы используете UpdateMessage toostore ход обработки сообщений, как избежать необходимости все сообщение hello tooreprocess при возникновении ошибки?</span><span class="sxs-lookup"><span data-stu-id="be4e7-258">Are you using UpdateMessage toostore progress in processing messages, avoiding having tooreprocess hello entire message if an error occurs?</span></span>](#subheading44) |
| &nbsp; | <span data-ttu-id="be4e7-259">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-259">Queues</span></span> |<span data-ttu-id="be4e7-260">Архитектура</span><span class="sxs-lookup"><span data-stu-id="be4e7-260">Architecture</span></span> |[<span data-ttu-id="be4e7-261">Вы используете toomake очереди масштабируемое приложение, оставив установленным долго выполняющихся рабочих нагрузок за пределы критический путь hello и масштаб затем независимо друг от друга?</span><span class="sxs-lookup"><span data-stu-id="be4e7-261">Are you using queues toomake your entire application more scalable by keeping long-running workloads out of hello critical path and scale then independently?</span></span>](#subheading45) |

## <span data-ttu-id="be4e7-262"><a name="allservices"></a>Все службы</span><span class="sxs-lookup"><span data-stu-id="be4e7-262"><a name="allservices"></a>All Services</span></span>
<span data-ttu-id="be4e7-263">В этом разделе перечислены методики, применяемые применимо toohello любого hello службы хранилища Azure (большие двоичные объекты, таблицы, очереди или файлы).</span><span class="sxs-lookup"><span data-stu-id="be4e7-263">This section lists proven practices that are applicable toohello use of any of hello Azure Storage services (blobs, tables, queues, or files).</span></span>  

### <span data-ttu-id="be4e7-264"><a name="subheading1"></a>Целевые показатели масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-264"><a name="subheading1"></a>Scalability Targets</span></span>
<span data-ttu-id="be4e7-265">Каждый из службы хранилища Azure hello содержит целевые показатели масштабируемости для емкость (ГБ), скорость выполнения транзакций и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-265">Each of hello Azure Storage services has scalability targets for capacity (GB), transaction rate, and bandwidth.</span></span> <span data-ttu-id="be4e7-266">Если приложение достигает или превышает целевые показатели масштабируемости hello, могут возникнуть задержки транзакции или регулирования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-266">If your application approaches or exceeds any of hello scalability targets, it may encounter increased transaction latencies or throttling.</span></span> <span data-ttu-id="be4e7-267">При службы хранилища регулирует приложения, службы hello начинает tooreturn «503. сервер занят» или «500 истекло время ожидания операции» коды ошибок для некоторых транзакций в хранилище.</span><span class="sxs-lookup"><span data-stu-id="be4e7-267">When a Storage service throttles your application, hello service begins tooreturn "503 Server busy" or "500 Operation timeout" error codes for some storage transactions.</span></span> <span data-ttu-id="be4e7-268">В этом разделе рассматриваются оба toodealing общий подход hello целевые показатели масштабируемости и пропускной способности целевые показатели масштабируемости, в частности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-268">This section discusses both hello general approach toodealing with scalability targets and bandwidth scalability targets in particular.</span></span> <span data-ttu-id="be4e7-269">Более поздние версии, связанные со службами хранилища в отдельных разделах целевые показатели масштабируемости в контексте этой конкретной службы hello:</span><span class="sxs-lookup"><span data-stu-id="be4e7-269">Later sections that deal with individual storage services discuss scalability targets in hello context of that specific service:</span></span>  

* [<span data-ttu-id="be4e7-270">Пропускная способность больших двоичных объектов и количество запросов в секунду</span><span class="sxs-lookup"><span data-stu-id="be4e7-270">Blob bandwidth and requests per second</span></span>](#subheading16)
* [<span data-ttu-id="be4e7-271">Сущности таблицы в секунду</span><span class="sxs-lookup"><span data-stu-id="be4e7-271">Table entities per second</span></span>](#subheading24)
* [<span data-ttu-id="be4e7-272">Сообщения очереди в секунду</span><span class="sxs-lookup"><span data-stu-id="be4e7-272">Queue messages per second</span></span>](#subheading39)  

#### <span data-ttu-id="be4e7-273"><a name="sub1bandwidth"></a>Целевой показатель масштабируемости пропускной способности для всех служб</span><span class="sxs-lookup"><span data-stu-id="be4e7-273"><a name="sub1bandwidth"></a>Bandwidth Scalability Target for All Services</span></span>
<span data-ttu-id="be4e7-274">На момент написания статьи hello, целевые объекты пропускной способности hello в учетной записи hello США для географически избыточное хранилище (GRS): 10 Гигабит в секунду (Гбит/с) для входящих сообщений (данные отправляются учетной записи хранилища toohello) и 20 Гбит/с для исходящего трафика (данные, отправленные из учетной записи хранилища hello).</span><span class="sxs-lookup"><span data-stu-id="be4e7-274">At hello time of writing, hello bandwidth targets in hello US for a geo-redundant storage (GRS) account are 10 gigabits per second (Gbps) for ingress (data sent toohello storage account) and 20 Gbps for egress (data sent from hello storage account).</span></span> <span data-ttu-id="be4e7-275">Для учетной записи локально избыточное хранилище (LRS), превышают ограничения hello — 20 Гбит/с для входящих сообщений и 30 Гбит/с для исходящего трафика.</span><span class="sxs-lookup"><span data-stu-id="be4e7-275">For a locally redundant storage (LRS) account, hello limits are higher – 20 Gbps for ingress and 30 Gbps for egress.</span></span>  <span data-ttu-id="be4e7-276">Международные ограничения пропускной способности могут быть ниже. О них можно узнать на [странице целевых показателей масштабируемости](http://msdn.microsoft.com/library/azure/dn249410.aspx).</span><span class="sxs-lookup"><span data-stu-id="be4e7-276">International bandwidth limits may be lower and can be found on our [scalability targets page](http://msdn.microsoft.com/library/azure/dn249410.aspx).</span></span>  <span data-ttu-id="be4e7-277">Дополнительные сведения о параметры избыточности хранилища hello воспользуйтесь ссылками hello в [полезные ресурсы](#sub1useful) ниже.</span><span class="sxs-lookup"><span data-stu-id="be4e7-277">For more information on hello storage redundancy options, see hello links in [Useful Resources](#sub1useful) below.</span></span>  

#### <a name="what-toodo-when-approaching-a-scalability-target"></a><span data-ttu-id="be4e7-278">Какие toodo при приближении к целевой показатель масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-278">What toodo when approaching a scalability target</span></span>
<span data-ttu-id="be4e7-279">Если приложение приближается hello целевые показатели масштабируемости для одной учетной записи хранения, необходимо учитывайте внедрение один hello следующие подходы:</span><span class="sxs-lookup"><span data-stu-id="be4e7-279">If your application is approaching hello scalability targets for a single storage account, consider adopting one of hello following approaches:</span></span>  

* <span data-ttu-id="be4e7-280">Пересмотреть hello рабочую нагрузку, приводящую к tooapproach приложения или превышать целевой показатель масштабируемости hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-280">Reconsider hello workload that causes your application tooapproach or exceed hello scalability target.</span></span> <span data-ttu-id="be4e7-281">Можно его проектировании по-разному toouse меньше пропускной способности или емкости или меньшее число транзакций?</span><span class="sxs-lookup"><span data-stu-id="be4e7-281">Can you design it differently toouse less bandwidth or capacity, or fewer transactions?</span></span>
* <span data-ttu-id="be4e7-282">Если приложение должно превышать одну целевые показатели масштабируемости hello, необходимо создать несколько учетных записей хранения и секции данных приложения этих нескольких учетных записях хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-282">If an application must exceed one of hello scalability targets, you should create multiple storage accounts and partition your application data across those multiple storage accounts.</span></span> <span data-ttu-id="be4e7-283">Если вы используете этот шаблон, затем быть toodesign убедиться, что приложения, чтобы hello будущих для балансировки нагрузки можно добавить дополнительные учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-283">If you use this pattern, then be sure toodesign your application so that you can add more storage accounts in hello future for load balancing.</span></span> <span data-ttu-id="be4e7-284">На момент написания статьи каждая подписка Azure может содержать до too100 учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-284">At time of writing, each Azure subscription can have up too100 storage accounts.</span></span>  <span data-ttu-id="be4e7-285">Кроме случаев использования с целью хранения данных, совершения транзакций или передачи данных плата за учетные записи хранения не взимается.</span><span class="sxs-lookup"><span data-stu-id="be4e7-285">Storage accounts also have no cost other than your usage in terms of data stored, transactions made, or data transferred.</span></span>
* <span data-ttu-id="be4e7-286">Если приложение hello цели пропускной способности, выполнить сжатие данных в hello клиента tooreduce hello пропускной способности, необходимой toosend hello toohello службой хранения данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-286">If your application hits hello bandwidth targets, consider compressing data in hello client tooreduce hello bandwidth required toosend hello data toohello storage service.</span></span>  <span data-ttu-id="be4e7-287">Обратите внимание, этот способ может как сэкономить полосу пропускания и повысить производительность сети, так и иметь некоторые негативные последствия.</span><span class="sxs-lookup"><span data-stu-id="be4e7-287">Note that while this may save bandwidth and improve network performance, it can also have some negative impacts.</span></span>  <span data-ttu-id="be4e7-288">Следует оценить hello воздействие на производительность это из-за toohello Дополнительные требования к обработке для сжатия и распаковки данных в клиенте hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-288">You should evaluate hello performance impact of this due toohello additional processing requirements for compressing and decompressing data in hello client.</span></span> <span data-ttu-id="be4e7-289">Кроме того хранение сжатых данных может сделать его более сложных проблем tootroubleshoot так, как это может быть более сложной tooview хранимых данных, с помощью стандартных средств.</span><span class="sxs-lookup"><span data-stu-id="be4e7-289">In addition, storing compressed data can make it more difficult tootroubleshoot issues since it could be more difficult tooview stored data using standard tools.</span></span>
* <span data-ttu-id="be4e7-290">Если приложение обратится целевые показатели масштабируемости hello, убедитесь, что вы используете экспоненциальную отсрочку для повторных попыток (см. [попыток](#subheading14)).</span><span class="sxs-lookup"><span data-stu-id="be4e7-290">If your application hits hello scalability targets, then ensure that you are using an exponential backoff for retries (see [Retries](#subheading14)).</span></span>  <span data-ttu-id="be4e7-291">Его лучше toomake никогда не подход целевые показатели масштабируемости hello (с помощью одного из hello выше методов), но это гарантирует приложения не будет хранить только быстро повторять, что делает hello регулирования хуже.</span><span class="sxs-lookup"><span data-stu-id="be4e7-291">It's better toomake sure you never approach hello scalability targets (by using one of hello above methods), but this will ensure your application won't just keep retrying rapidly, making hello throttling worse.</span></span>  

#### <a name="useful-resources"></a><span data-ttu-id="be4e7-292">Полезные ресурсы</span><span class="sxs-lookup"><span data-stu-id="be4e7-292">Useful Resources</span></span>
<span data-ttu-id="be4e7-293">Hello ссылкам содержатся дополнительные сведения о целевые показатели масштабируемости.</span><span class="sxs-lookup"><span data-stu-id="be4e7-293">hello following links provide additional detail on scalability targets:</span></span>

* <span data-ttu-id="be4e7-294">Дополнительные сведения о целевых показателях масштабируемости см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-294">See [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md) for information about scalability targets.</span></span>
* <span data-ttu-id="be4e7-295">В разделе [репликацию хранилища Azure](storage-redundancy.md) и hello блога [параметры избыточности хранилища Azure и доступ для чтения Geo Redundant Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx) сведения о параметры избыточности хранилища.</span><span class="sxs-lookup"><span data-stu-id="be4e7-295">See [Azure Storage replication](storage-redundancy.md) and hello blog post [Azure Storage Redundancy Options and Read Access Geo Redundant Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx) for information about storage redundancy options.</span></span>
* <span data-ttu-id="be4e7-296">Для получения актуальной информации о ценах за использование служб Azure см. страницу [Цены Azure](https://azure.microsoft.com/pricing/overview/).</span><span class="sxs-lookup"><span data-stu-id="be4e7-296">For current information about pricing for Azure services, see [Azure pricing](https://azure.microsoft.com/pricing/overview/).</span></span>  

### <span data-ttu-id="be4e7-297"><a name="subheading47"></a>Соглашение об именовании секций</span><span class="sxs-lookup"><span data-stu-id="be4e7-297"><a name="subheading47"></a>Partition Naming Convention</span></span>
<span data-ttu-id="be4e7-298">Хранилище Azure использует на основе диапазонов секционирования схемы tooscale и загрузка баланс hello систему.</span><span class="sxs-lookup"><span data-stu-id="be4e7-298">Azure Storage uses a range-based partitioning scheme tooscale and load balance hello system.</span></span> <span data-ttu-id="be4e7-299">ключ раздела Hello данным используется toopartition разбиваются на диапазоны, а эти диапазоны балансировки нагрузки во всей системе hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-299">hello partition key is used toopartition data into ranges and these ranges are load-balanced across hello system.</span></span> <span data-ttu-id="be4e7-300">Это означает, что соглашения об именовании лексической сортировки (например, msftpayroll, msftperformance, msftemployees, и т. д) или с помощью метки времени (log20160101, log20160102, log20160102 и т. д) выполняется по тому toohello секций потенциально, совместно размещенную на hello одном сервере разделов, пока операции с балансировкой нагрузки разбивает их на более мелкие диапазоны.</span><span class="sxs-lookup"><span data-stu-id="be4e7-300">This means naming conventions such as lexical ordering (e.g. msftpayroll, msftperformance, msftemployees, etc) or using time-stamps (log20160101, log20160102, log20160102, etc) will lend itself toohello partitions being potentially co-located on hello same partition server, until a load balancing operation splits them out into smaller ranges.</span></span> <span data-ttu-id="be4e7-301">Например все большие двоичные объекты в контейнере может быть предоставлен на одном сервере, пока hello нагрузка на эти большие двоичные объекты требует дальнейшего перераспределения hello секции диапазонов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-301">For example, all blobs within a container can be served by a single server until hello load on these blobs requires further rebalancing of hello partition ranges.</span></span> <span data-ttu-id="be4e7-302">Аналогичным образом, группа со слабой загрузкой учетных записей с распределены по именам в лексическом порядке может обслуживаться одного сервера до hello нагрузки на одном или всех этих учетных записей требуют их toobe разбиение по нескольким серверам секций.</span><span class="sxs-lookup"><span data-stu-id="be4e7-302">Similarly, a group of lightly loaded accounts with their names arranged in lexical order may be served by a single server until hello load on one or all of these accounts require them toobe split across multiple partitions servers.</span></span> <span data-ttu-id="be4e7-303">Каждого операции подсистемы балансировки нагрузки может повлиять на задержку hello вызовов хранилища во время операции hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-303">Each load balancing operation may impact hello latency of storage calls during hello operation.</span></span> <span data-ttu-id="be4e7-304">toohandle возможности системы Hello, внезапное большого количества трафика tooa секции ограничивается hello масштабируемость одного сервера секционирования до hello балансировки операции запускается в и балансировку hello диапазона ключей секций.</span><span class="sxs-lookup"><span data-stu-id="be4e7-304">hello system's ability toohandle a sudden burst of traffic tooa partition is limited by hello scalability of a single partition server until hello load balancing operation kicks-in and rebalances hello partition key range.</span></span>  

<span data-ttu-id="be4e7-305">Вы можете использовать некоторые лучшие рекомендации tooreduce hello частоту таких операций.</span><span class="sxs-lookup"><span data-stu-id="be4e7-305">You can follow some best practices tooreduce hello frequency of such operations.</span></span>  

* <span data-ttu-id="be4e7-306">Изучите hello соглашение об именовании, используемое для учетных записей, контейнеров, больших двоичных объектов, таблиц и очередей, точно.</span><span class="sxs-lookup"><span data-stu-id="be4e7-306">Examine hello naming convention you use for accounts, containers, blobs, tables and queues, closely.</span></span> <span data-ttu-id="be4e7-307">К именам учетных записей можно добавить трехзначный хэш в виде префикса, используя функцию хэширования, наиболее соответствующую вашим задачам.</span><span class="sxs-lookup"><span data-stu-id="be4e7-307">Consider prefixing account names with a 3-digit hash using a hashing function that best suits your needs.</span></span>  
* <span data-ttu-id="be4e7-308">Можно организовывать данные с помощью метки времени или числовые идентификаторы, наличие tooensure, вы не используете трафик только для добавления (или только добавить).</span><span class="sxs-lookup"><span data-stu-id="be4e7-308">If you organize your data using timestamps or numerical identifiers, you have tooensure you are not using an append-only (or prepend-only) traffic patterns.</span></span> <span data-ttu-id="be4e7-309">Эти шаблоны не подходят для диапазона-на основе секционирование системы, и может интереса tooall hello трафик будет tooa одной секции и ограничивающую система hello из эффективной балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="be4e7-309">These patterns are not suitable for a range -based partitioning system, and could lead tooall hello traffic going tooa single partition and limiting hello system from effectively load balancing.</span></span> <span data-ttu-id="be4e7-310">Например при наличии ежедневно операции, которые используют большой двоичный объект с меткой времени, такие как ГГГГММДД, затем hello трафик для ежедневной работы, направляются tooa один объект, который обслуживается с одного сервера секционирования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-310">For instance, if you have daily operations that use a blob object with a timestamp such as yyyymmdd, then all hello traffic for that daily operation is directed tooa single object which is served by a single partition server.</span></span> <span data-ttu-id="be4e7-311">Рассмотрим ли ограничивает hello на BLOB-объект и каждой секции ограничения потребностей и попробуйте разорвать эту операцию в несколько больших двоичных объектов, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="be4e7-311">Look at whether hello per blob limits and per partition limits meet your needs, and consider breaking this operation into multiple blobs if needed.</span></span> <span data-ttu-id="be4e7-312">Аналогично, если временного ряда данных хранятся в таблицах, весь трафик hello может быть направлены toohello последнюю часть ключа hello пространства имен.</span><span class="sxs-lookup"><span data-stu-id="be4e7-312">Similarly, if you store time series data in your tables, all hello traffic could be directed toohello last part of hello key namespace.</span></span> <span data-ttu-id="be4e7-313">Если необходимо использовать метки времени или числовые идентификаторы, префикс идентификатора hello с хэшем из 3 цифр, или в случае hello части секунд hello префикс отметки времени hello времени, например ssyyyymmdd.</span><span class="sxs-lookup"><span data-stu-id="be4e7-313">If you must use timestamps or numerical IDs, prefix hello id with a 3-digit hash, or in hello case of timestamps prefix hello seconds part of hello time such as ssyyyymmdd.</span></span> <span data-ttu-id="be4e7-314">Если операции перечисления и запросов выполняются регулярно, выберите функцию хэширования, ограничивающую число запросов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-314">If listing and querying operations are routinely performed, choose a hashing function that will limit your number of queries.</span></span> <span data-ttu-id="be4e7-315">В других случаях может быть достаточно случайного префикса.</span><span class="sxs-lookup"><span data-stu-id="be4e7-315">In other cases, a random prefix may be sufficient.</span></span>  
* <span data-ttu-id="be4e7-316">Дополнительные сведения о hello, используемое в хранилище Azure схему секционирования, читать документ sosp о hello [здесь](http://sigops.org/sosp/sosp11/current/2011-Cascais/printable/11-calder.pdf).</span><span class="sxs-lookup"><span data-stu-id="be4e7-316">For additional information on hello partitioning scheme used in Azure Storage, read hello SOSP paper [here](http://sigops.org/sosp/sosp11/current/2011-Cascais/printable/11-calder.pdf).</span></span>

### <a name="networking"></a><span data-ttu-id="be4e7-317">Сеть</span><span class="sxs-lookup"><span data-stu-id="be4e7-317">Networking</span></span>
<span data-ttu-id="be4e7-318">Хотя hello API вызывает независимо от того, часто hello физической сети ограничения приложения hello имеют значительное влияние на производительность.</span><span class="sxs-lookup"><span data-stu-id="be4e7-318">While hello API calls matter, often hello physical network constraints of hello application have a significant impact on performance.</span></span> <span data-ttu-id="be4e7-319">Hello ниже описываются некоторые ограничения, которые могут столкнуться.</span><span class="sxs-lookup"><span data-stu-id="be4e7-319">hello following describe some of limitations users may encounter.</span></span>  

#### <a name="client-network-capability"></a><span data-ttu-id="be4e7-320">Возможность клиентской сети</span><span class="sxs-lookup"><span data-stu-id="be4e7-320">Client Network Capability</span></span>
##### <span data-ttu-id="be4e7-321"><a name="subheading2"></a>Пропускная способность</span><span class="sxs-lookup"><span data-stu-id="be4e7-321"><a name="subheading2"></a>Throughput</span></span>
<span data-ttu-id="be4e7-322">Пропускная способность проблема hello часто является hello возможности клиента hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-322">For bandwidth, hello problem is often hello capabilities of hello client.</span></span> <span data-ttu-id="be4e7-323">Например, во время одной учетной записи хранения может обрабатывать количество входящих сообщений или 10 Гбит/с (см. [целевые показатели масштабируемости пропускной способности](#sub1bandwidth)), скорость сети hello в «Small» рабочей роли Azure только способен приблизительно 100 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="be4e7-323">For example, while a single storage account can handle 10 Gbps or more of ingress (see [bandwidth scalability targets](#sub1bandwidth)), hello network speed in a "Small" Azure Worker Role instance is only capable of approximately 100 Mbps.</span></span> <span data-ttu-id="be4e7-324">Очень крупные экземпляры Azure имеют сетевые карты, обладающие большими возможностями, поэтому если необходимы более высокие сетевые ограничения от одной машины, следует рассмотреть возможность использования более крупного экземпляра или большего количества виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="be4e7-324">Larger Azure instances have NICs with greater capacity, so you should consider using a larger instance or more VM's if you need higher network limits from a single machine.</span></span> <span data-ttu-id="be4e7-325">Если вы обращаетесь в службу хранилища в локальном приложении, то hello же правило применяется: понять возможности сетевого hello hello клиентского устройства и toohello подключения к сети hello расположение хранилища Azure и повышают их при необходимости или Проектирование toowork вашего приложения в пределах их возможности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-325">If you are accessing a Storage service from an on premises application, then hello same rule applies: understand hello network capabilities of hello client device and hello network connectivity toohello Azure Storage location and either improve them as needed or design your application toowork within their capabilities.</span></span>  

##### <span data-ttu-id="be4e7-326"><a name="subheading3"></a>Качество связи</span><span class="sxs-lookup"><span data-stu-id="be4e7-326"><a name="subheading3"></a>Link Quality</span></span>
<span data-ttu-id="be4e7-327">Как и при любом использовании сети, имейте в виду, что состояние сети, приводящее к ошибкам и потере пакетов, снижает эффективную пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="be4e7-327">As with any network usage, be aware that network conditions resulting in errors and packet loss will slow effective throughput.</span></span>  <span data-ttu-id="be4e7-328">Использование инструмента WireShark или NetMon может помочь в диагностике этой проблемы.</span><span class="sxs-lookup"><span data-stu-id="be4e7-328">Using WireShark or NetMon may help in diagnosing this issue.</span></span>  

##### <a name="useful-resources"></a><span data-ttu-id="be4e7-329">Полезные ресурсы</span><span class="sxs-lookup"><span data-stu-id="be4e7-329">Useful Resources</span></span>
<span data-ttu-id="be4e7-330">Дополнительные сведения о размерах виртуальной машины и выделенной пропускной способности см. в статье [Размеры виртуальных машин в Azure](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) (Windows) или [Размеры виртуальных машин в Azure](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (Linux).</span><span class="sxs-lookup"><span data-stu-id="be4e7-330">For more information about virtual machine sizes and allocated bandwidth, see [Windows VM sizes](../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) or [Linux VM sizes](../virtual-machines/linux/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

#### <span data-ttu-id="be4e7-331"><a name="subheading4"></a>Расположение</span><span class="sxs-lookup"><span data-stu-id="be4e7-331"><a name="subheading4"></a>Location</span></span>
<span data-ttu-id="be4e7-332">В любой распределенной среде размещения клиента hello рядом toohello сервера обеспечивает наилучшую производительность hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-332">In any distributed environment, placing hello client near toohello server delivers in hello best performance.</span></span> <span data-ttu-id="be4e7-333">Для доступа к службе хранилища Azure с минимальной задержкой hello, hello лучшее расположение клиента находится в пределах hello же регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="be4e7-333">For accessing Azure Storage with hello lowest latency, hello best location for your client is within hello same Azure region.</span></span> <span data-ttu-id="be4e7-334">Например, при наличии веб-сайта Azure, который использует хранилище Azure, оба следует разместить внутри одного региона (например, на Западе США или в Юго-Восточной Азии).</span><span class="sxs-lookup"><span data-stu-id="be4e7-334">For example, if you have an Azure Web Site that uses Azure Storage, you should locate them both within a single region (for example, US West or Asia Southeast).</span></span> <span data-ttu-id="be4e7-335">Это сокращает задержки hello и стоимости hello — на момент написания статьи hello, использование пропускной способности в одном регионе предоставляется бесплатно.</span><span class="sxs-lookup"><span data-stu-id="be4e7-335">This reduces hello latency and hello cost — at hello time of writing, bandwidth usage within a single region is free.</span></span>  

<span data-ttu-id="be4e7-336">Если клиент, приложения не размещаются в Azure (например, приложений для мобильных устройств или на локальные службы enterprise), а затем снова размещение учетной записи хранилища hello в области рядом с toohello устройств, которые будут пользоваться ими, обычно уменьшит задержки.</span><span class="sxs-lookup"><span data-stu-id="be4e7-336">If your client applications are not hosted within Azure (such as mobile device apps or on premises enterprise services), then again placing hello storage account in a region near toohello devices that will access it, will generally reduce latency.</span></span> <span data-ttu-id="be4e7-337">Если клиенты разбросаны по всему миру (например, одни находятся в Северной Америке, другие — в Европе), следует рассмотреть возможность использования нескольких учетных записей хранения: одна размещенная в североамериканском регионе и одна — в европейском.</span><span class="sxs-lookup"><span data-stu-id="be4e7-337">If your clients are broadly distributed (for example, some in North America, and some in Europe), then you should consider using multiple storage accounts: one located in a North American region and one in a European region.</span></span> <span data-ttu-id="be4e7-338">Это поможет tooreduce задержки для пользователей в обоих регионах.</span><span class="sxs-lookup"><span data-stu-id="be4e7-338">This will help tooreduce latency for users in both regions.</span></span> <span data-ttu-id="be4e7-339">Этот подход является tooimplement обычно проще, если hello hello приложения и хранилищ данных — tooindividual конкретных пользователей, не требуется репликация данных между учетными записями хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-339">This approach is usually easier tooimplement if hello data hello application stores is specific tooindividual users, and does not require replicating data between storage accounts.</span></span>  <span data-ttu-id="be4e7-340">Для широкого распространения содержимого рекомендуется использовать CDN – hello следующего раздела приведены дополнительные сведения см. в разделе.</span><span class="sxs-lookup"><span data-stu-id="be4e7-340">For broad content distribution, a CDN is recommended – see hello next section for more details.</span></span>  

### <span data-ttu-id="be4e7-341"><a name="subheading5"></a>Распространение содержимого</span><span class="sxs-lookup"><span data-stu-id="be4e7-341"><a name="subheading5"></a>Content Distribution</span></span>
<span data-ttu-id="be4e7-342">В некоторых случаях hello tooserve потребностей приложения и те же пользователи toomany содержимого (например продукта демонстрационных видео, используемых в hello домашнюю страницу веб-сайта), расположенный в либо hello таким же или из нескольких областей.</span><span class="sxs-lookup"><span data-stu-id="be4e7-342">Sometimes, an application needs tooserve hello same content toomany users (e.g. a product demo video used in hello home page of a website), located in either hello same or multiple regions.</span></span> <span data-ttu-id="be4e7-343">В этом случае следует использовать доставки содержимого сети (CDN) как Azure CDN и hello CDN используется хранилища Azure в качестве источника данных hello hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-343">In this scenario, you should use a Content Delivery Network (CDN) such as Azure CDN, and hello CDN would use Azure storage as hello origin of hello data.</span></span> <span data-ttu-id="be4e7-344">В отличие от учетная запись хранилища Azure, хранящиеся в одном регионе и, не может доставлять содержимое с низкой задержкой tooother областей Azure CDN использует серверы в нескольких центрах обработки данных вокруг Здравствуй, мир.</span><span class="sxs-lookup"><span data-stu-id="be4e7-344">Unlike an Azure Storage account that exists in a single region and that cannot deliver content with low latency tooother regions, Azure CDN uses servers in multiple data centers around hello world.</span></span> <span data-ttu-id="be4e7-345">Кроме того, сеть CDN обычно поддерживает гораздо более высокие ограничения на выходе, чем одна учетная запись хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-345">Additionally, a CDN can typically support much higher egress limits than a single storage account.</span></span>  

<span data-ttu-id="be4e7-346">Для получения дополнительной информации о сети Azure CDN см. статью [Сеть кэширующих серверов](https://azure.microsoft.com/services/cdn/).</span><span class="sxs-lookup"><span data-stu-id="be4e7-346">For more information about Azure CDN, see [Azure CDN](https://azure.microsoft.com/services/cdn/).</span></span>  

### <span data-ttu-id="be4e7-347"><a name="subheading6"></a>Использование SAS и CORS</span><span class="sxs-lookup"><span data-stu-id="be4e7-347"><a name="subheading6"></a>Using SAS and CORS</span></span>
<span data-ttu-id="be4e7-348">Если вам требуется tooauthorize код JavaScript в веб-браузере пользователя или данных tooaccess приложения мобильного телефона в хранилище Azure, одним из подходов является toouse приложения в веб-роли прокси-сервером: hello пользователя на устройство с проверкой подлинности hello веб-роли, который в свою очередь выполняет проверку подлинности с помощью службы хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-348">When you need tooauthorize code such as JavaScript in a user's web browser or a mobile phone app tooaccess data in Azure Storage, one approach is toouse an application in web role as a proxy: hello user's device authenticates with hello web role, which in turn authenticates with hello storage service.</span></span> <span data-ttu-id="be4e7-349">Таким образом, на небезопасных устройствах можно не сообщать ключи своей учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-349">In this way, you can avoid exposing your storage account keys on insecure devices.</span></span> <span data-ttu-id="be4e7-350">Однако в этом случае влечет большие накладные расходы на hello веб-роли, так как все hello данные, передаваемые между устройством пользователя hello и hello службы хранилища должно пройти через hello веб-роли.</span><span class="sxs-lookup"><span data-stu-id="be4e7-350">However, this places a big overhead on hello web role because all hello data transferred between hello user's device and hello storage service must pass through hello web role.</span></span> <span data-ttu-id="be4e7-351">Можно избежать, используя веб-роли как прокси для службы хранилища hello общего доступа подписи (SAS), иногда в сочетании с заголовками, общий доступ к ресурсам независимо от источника (CORS).</span><span class="sxs-lookup"><span data-stu-id="be4e7-351">You can avoid using a web role as a proxy for hello storage service by using Shared Access Signatures (SAS), sometimes in conjunction with Cross-Origin Resource Sharing headers (CORS).</span></span> <span data-ttu-id="be4e7-352">Используя SAS, вы можете разрешить запросы toomake устройство пользователя напрямую tooa хранилища службы с помощью маркером ограниченного доступа.</span><span class="sxs-lookup"><span data-stu-id="be4e7-352">Using SAS, you can allow your user's device toomake requests directly tooa storage service by means of a limited access token.</span></span> <span data-ttu-id="be4e7-353">Например если пользователю tooupload приложении tooyour фотографий, веб-роли можно создавать и отправлять устройство пользователя toohello маркер SAS, которая предоставляет разрешение toowrite tooa определенного большого двоичного объекта или контейнера для hello Далее 30 минут (после чего hello маркер SAS истечения срока действия).</span><span class="sxs-lookup"><span data-stu-id="be4e7-353">For example, if a user wants tooupload a photo tooyour application, your web role can generate and send toohello user's device a SAS token that grants permission toowrite tooa specific blob or container for hello next 30 minutes (after which hello SAS token expires).</span></span>

<span data-ttu-id="be4e7-354">Как правило браузер не позволит JavaScript на странице, размещенной на веб-сайте на один домен tooperform определенных операциях домена tooanother «PUT».</span><span class="sxs-lookup"><span data-stu-id="be4e7-354">Normally, a browser will not allow JavaScript in a page hosted by a website on one domain tooperform specific operations such as a "PUT" tooanother domain.</span></span> <span data-ttu-id="be4e7-355">Например, если размещать веб-роли на «contosomarketing.cloudapp.net» и требуется toouse клиента стороне JavaScript tooupload учетной записи хранилища больших двоичных объектов tooyour в «contosoproducts.blob.core.windows.net» hello браузера «политика одного источника» не будет запрещать это операция.</span><span class="sxs-lookup"><span data-stu-id="be4e7-355">For example, if you host a web role at "contosomarketing.cloudapp.net," and want toouse client side JavaScript tooupload a blob tooyour storage account at "contosoproducts.blob.core.windows.net," hello browser's "same origin policy" will forbid this operation.</span></span> <span data-ttu-id="be4e7-356">CORS является функцией браузера, которая позволяет hello целевого домена (в этой учетной записи хранения вариантов hello) toocommunicate toohello обозревателя, которому доверяет исходящие запросы hello исходного домена (в веб-роли этого варианта hello).</span><span class="sxs-lookup"><span data-stu-id="be4e7-356">CORS is a browser feature that allows hello target domain (in this case hello storage account) toocommunicate toohello browser that it trusts requests originating in hello source domain (in this case hello web role).</span></span>  

<span data-ttu-id="be4e7-357">Обе эти технологии могут помочь избежать излишней нагрузки (и узких мест) веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-357">Both of these technologies can help you avoid unnecessary load (and bottlenecks) on your web application.</span></span>  

#### <a name="useful-resources"></a><span data-ttu-id="be4e7-358">Полезные ресурсы</span><span class="sxs-lookup"><span data-stu-id="be4e7-358">Useful Resources</span></span>
<span data-ttu-id="be4e7-359">Дополнительные сведения о SAS см. в разделе [Shared Access Signatures, Part 1: hello основные сведения о модели SAS](storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-359">For more information about SAS, see [Shared Access Signatures, Part 1: Understanding hello SAS Model](storage-dotnet-shared-access-signature-part-1.md).</span></span>  

<span data-ttu-id="be4e7-360">Дополнительные сведения о CORS см. в разделе [Поддержка общего доступа к ресурсам независимо от источника (CORS) для hello служб хранилища Azure](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span><span class="sxs-lookup"><span data-stu-id="be4e7-360">For more information about CORS, see [Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services](http://msdn.microsoft.com/library/azure/dn535601.aspx).</span></span>  

### <a name="caching"></a><span data-ttu-id="be4e7-361">Caching</span><span class="sxs-lookup"><span data-stu-id="be4e7-361">Caching</span></span>
#### <span data-ttu-id="be4e7-362"><a name="subheading7"></a>Получение данных</span><span class="sxs-lookup"><span data-stu-id="be4e7-362"><a name="subheading7"></a>Getting Data</span></span>
<span data-ttu-id="be4e7-363">В большинстве случаев получение данных из службы с одной попытки лучше, чем с двух.</span><span class="sxs-lookup"><span data-stu-id="be4e7-363">In general, getting data from a service once is better than getting it twice.</span></span> <span data-ttu-id="be4e7-364">Рассмотрим пример hello веб-приложение MVC, работающих в веб-роли, который уже загружен из hello tooserve службы хранения имени пользователя tooa содержимого большого двоичного объекта 50 МБ.</span><span class="sxs-lookup"><span data-stu-id="be4e7-364">Consider hello example of an MVC web application running in a web role that has already retrieved a 50MB blob from hello storage service tooserve as content tooa user.</span></span> <span data-ttu-id="be4e7-365">приложение Hello может затем извлечь, один большой двоичный объект каждый раз пользователь запрашивает он или она может кэшировать локально toodisk и повторное использование hello кэшированная версия для последующих пользовательских запросов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-365">hello application could then retrieve that same blob every time a user requests it, or it could cache it locally toodisk and reuse hello cached version for subsequent user requests.</span></span> <span data-ttu-id="be4e7-366">Кроме того каждый раз, когда пользователь запрашивает данные hello, hello приложения проблема ДАВАЛО с условный заголовок для изменения времени, которое бы не начало hello весь большой двоичный объект, если он еще не был изменен.</span><span class="sxs-lookup"><span data-stu-id="be4e7-366">Furthermore, whenever a user requests hello data, hello application could issue GET with a conditional header for modification time, which would avoid getting hello entire blob if it hasn't been modified.</span></span> <span data-ttu-id="be4e7-367">Можно применять этот же шаблон tooworking с сущностями в таблице.</span><span class="sxs-lookup"><span data-stu-id="be4e7-367">You can apply this same pattern tooworking with table entities.</span></span>  

<span data-ttu-id="be4e7-368">В некоторых случаях вы можете решить, что приложение можно предположить, что hello большого двоичного объекта остается действительным, на короткий промежуток времени после получения и что во время этого периода hello приложение не требует toocheck Если hello большой двоичный объект был изменен.</span><span class="sxs-lookup"><span data-stu-id="be4e7-368">In some cases, you may decide that your application can assume that hello blob remains valid for a short period after retrieving it, and that during this period hello application does not need toocheck if hello blob was modified.</span></span>

<span data-ttu-id="be4e7-369">Конфигурации, поиска и другие данные, которые используются приложением hello всегда являются идеальные кандидаты для кэширования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-369">Configuration, lookup, and other data that are always used by hello application are great candidates for caching.</span></span>  

<span data-ttu-id="be4e7-370">Например, как tooget hello toodiscover свойства большого двоичного объекта даты последнего изменения с помощью .NET, см. [набор получить свойства и метаданные](storage-properties-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-370">For an example of how tooget a blob's properties toodiscover hello last modified date using .NET, see [Set and Retrieve Properties and Metadata](storage-properties-metadata.md).</span></span> <span data-ttu-id="be4e7-371">Дополнительные сведения об условных загрузках см. в статье [Specifying Conditional Headers for Blob Service Operations](http://msdn.microsoft.com/library/azure/dd179371.aspx) (Указание условных заголовков для операций службы BLOB-объектов).</span><span class="sxs-lookup"><span data-stu-id="be4e7-371">For more information about conditional downloads, see [Conditionally Refresh a Local Copy of a Blob](http://msdn.microsoft.com/library/azure/dd179371.aspx).</span></span>  

#### <span data-ttu-id="be4e7-372"><a name="subheading8"></a>Передача данных в пакетах</span><span class="sxs-lookup"><span data-stu-id="be4e7-372"><a name="subheading8"></a>Uploading Data in Batches</span></span>
<span data-ttu-id="be4e7-373">В некоторых случаях приложения могут объединять данные локально, а затем периодически отправлять их в пакете вместо немедленной отправки каждого фрагмента данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-373">In some application scenarios, you can aggregate data locally, and then periodically upload it in a batch instead of uploading each piece of data immediately.</span></span> <span data-ttu-id="be4e7-374">Например, веб-приложение может хранить файл журнала действий: hello приложение может либо отправить подробные сведения о каждом действии как он выполняется в сущности таблицы (для которого требуется много операций хранилища), либо его удалось сохранить сведения о tooa локальный файл журнала действий, а затем периодически передать все сведения о действии, как большой двоичный объект tooa файла с разделителями.</span><span class="sxs-lookup"><span data-stu-id="be4e7-374">For example, a web application might keep a log file of activities: hello application could either upload details of every activity as it happens as a table entity (which requires many storage operations), or it could save activity details tooa local log file, and then periodically upload all activity details as a delimited file tooa blob.</span></span> <span data-ttu-id="be4e7-375">Если каждая запись журнала имеет размер 1 КБ, можно передать тысяч в одной транзакции «Put BLOB-объект» (вы можете отправить большой двоичный объект из копии too64MB размер в рамках одной транзакции).</span><span class="sxs-lookup"><span data-stu-id="be4e7-375">If each log entry is 1KB in size, you can upload thousands in a single "Put Blob" transaction (you can upload a blob of up too64MB in size in a single transaction).</span></span> <span data-ttu-id="be4e7-376">Конечно, при сбое передачи предыдущих toohello локального компьютера hello потенциально данные будут потеряны некоторые журнала: hello разработчику приложения необходимо разработать hello возможности клиентского устройства или передать сбоев.</span><span class="sxs-lookup"><span data-stu-id="be4e7-376">Of course, if hello local machine crashes prior toohello upload, you will potentially lose some log data: hello application developer must design for hello possibility of client device or upload failures.</span></span>  <span data-ttu-id="be4e7-377">Если данные о действиях hello должен toobe загружаться интервалы (не только одно действие), с помощью таблицы рекомендуются больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-377">If hello activity data needs toobe downloaded for timespans (not just single activity), then blobs are recommended over tables.</span></span>

### <a name="net-configuration"></a><span data-ttu-id="be4e7-378">Конфигурация .NET</span><span class="sxs-lookup"><span data-stu-id="be4e7-378">.NET Configuration</span></span>
<span data-ttu-id="be4e7-379">Если с помощью hello .NET Framework, в этом разделе перечислены некоторые параметры быстрой настройки, которые можно использовать toomake значительное повышение производительности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-379">If using hello .NET Framework, this section lists several quick configuration settings that you can use toomake significant performance improvements.</span></span>  <span data-ttu-id="be4e7-380">При использовании других языков, проверьте toosee, если одинаковые принципы применяются в выбранный язык.</span><span class="sxs-lookup"><span data-stu-id="be4e7-380">If using other languages, check toosee if similar concepts apply in your chosen language.</span></span>  

#### <span data-ttu-id="be4e7-381"><a name="subheading9"></a>Увеличение ограничения числа подключений по умолчанию</span><span class="sxs-lookup"><span data-stu-id="be4e7-381"><a name="subheading9"></a>Increase default connection limit</span></span>
<span data-ttu-id="be4e7-382">В .NET, после кода hello увеличивает число подключений по умолчанию hello (которая обычно является 2 в среде клиента или 10 в серверной среде) too100.</span><span class="sxs-lookup"><span data-stu-id="be4e7-382">In .NET, hello following code increases hello default connection limit (which is usually 2 in a client environment or 10 in a server environment) too100.</span></span> <span data-ttu-id="be4e7-383">Как правило следует задать hello значение tooapproximately hello количество потоков, используемых приложением.</span><span class="sxs-lookup"><span data-stu-id="be4e7-383">Typically, you should set hello value tooapproximately hello number of threads used by your application.</span></span>  

```csharp
ServicePointManager.DefaultConnectionLimit = 100; //(Or More)  
```

<span data-ttu-id="be4e7-384">Необходимо задать предел для числа подключений hello перед открытием все подключения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-384">You must set hello connection limit before opening any connections.</span></span>  

<span data-ttu-id="be4e7-385">Для других языков программирования см. как ограничить подключения hello tooset toodetermine документации этого языка.</span><span class="sxs-lookup"><span data-stu-id="be4e7-385">For other programming languages, see that language's documentation toodetermine how tooset hello connection limit.</span></span>  

<span data-ttu-id="be4e7-386">Дополнительные сведения см. в разделе блога hello [веб-служб: одновременных подключений](http://blogs.msdn.com/b/darrenj/archive/2005/03/07/386655.aspx).</span><span class="sxs-lookup"><span data-stu-id="be4e7-386">For additional information, see hello blog post [Web Services: Concurrent Connections](http://blogs.msdn.com/b/darrenj/archive/2005/03/07/386655.aspx).</span></span>  

#### <span data-ttu-id="be4e7-387"><a name="subheading10"></a></span><span class="sxs-lookup"><span data-stu-id="be4e7-387"><a name="subheading10"></a>Increase ThreadPool Min Threads if using synchronous code with Async Tasks</span></span>
<span data-ttu-id="be4e7-388">Этот код приведет к увеличению min hello потоков пула:</span><span class="sxs-lookup"><span data-stu-id="be4e7-388">This code will increase hello thread pool min threads:</span></span>  

```csharp
ThreadPool.SetMinThreads(100,100); //(Determine hello right number for your application)  
```

<span data-ttu-id="be4e7-389">Дополнительные сведения см. в статье [ThreadPool.SetMinThreads Method (Int32, Int32)](http://msdn.microsoft.com/library/system.threading.threadpool.setminthreads%28v=vs.110%29.aspx) (Метод ThreadPool.SetMinThreads (Int32, Int32)).</span><span class="sxs-lookup"><span data-stu-id="be4e7-389">For more information, see [ThreadPool.SetMinThreads Method](http://msdn.microsoft.com/library/system.threading.threadpool.setminthreads%28v=vs.110%29.aspx).</span></span>  

#### <span data-ttu-id="be4e7-390"><a name="subheading11"></a></span><span class="sxs-lookup"><span data-stu-id="be4e7-390"><a name="subheading11"></a>Take advantage of .NET 4.5 Garbage Collection</span></span>
<span data-ttu-id="be4e7-391">Используйте .NET 4.5 или более поздней версии для hello клиентского приложения tootake преимуществами увеличение производительности сборка мусора сервера.</span><span class="sxs-lookup"><span data-stu-id="be4e7-391">Use .NET 4.5 or later for hello client application tootake advantage of performance improvements in server garbage collection.</span></span>

<span data-ttu-id="be4e7-392">Дополнительные сведения см. в статье hello [Общие сведения для улучшения производительности в .NET 4.5](http://msdn.microsoft.com/magazine/hh882452.aspx).</span><span class="sxs-lookup"><span data-stu-id="be4e7-392">For more information, see hello article [An Overview of Performance Improvements in .NET 4.5](http://msdn.microsoft.com/magazine/hh882452.aspx).</span></span>  

### <span data-ttu-id="be4e7-393"><a name="subheading12"></a>Неограниченный параллелизм</span><span class="sxs-lookup"><span data-stu-id="be4e7-393"><a name="subheading12"></a>Unbounded Parallelism</span></span>
<span data-ttu-id="be4e7-394">Параллелизм может быть удобно для производительности, следует быть осторожным при unbounded параллелизма (без ограничений на число потоков и/или параллельных запросов hello) tooupload или загрузки данных с помощью нескольких работников tooaccess несколько секций (контейнеры, очереди, или Таблица разделов) в hello одной учетной записи хранилища или tooaccess нескольких элементов в hello одной секции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-394">While parallelism can be great for performance, be careful about using unbounded parallelism (no limit on hello number of threads and/or parallel requests) tooupload or download data, using multiple workers tooaccess multiple partitions (containers, queues, or table partitions) in hello same storage account or tooaccess multiple items in hello same partition.</span></span> <span data-ttu-id="be4e7-395">Если unbounded hello параллелизма, приложение может превосходить возможности hello клиентского устройства и hello целевые показатели масштабируемости учетной записи хранилища приведет к более продолжительные задержки и регулирования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-395">If hello parallelism is unbounded, your application can exceed hello client device's capabilities or hello storage account's scalability targets resulting in longer latencies and throttling.</span></span>  

### <span data-ttu-id="be4e7-396"><a name="subheading13"></a>Клиентские библиотеки и средства хранилища</span><span class="sxs-lookup"><span data-stu-id="be4e7-396"><a name="subheading13"></a>Storage Client Libraries and Tools</span></span>
<span data-ttu-id="be4e7-397">Всегда используйте hello последнюю предоставленный Майкрософт клиентских библиотек и средств.</span><span class="sxs-lookup"><span data-stu-id="be4e7-397">Always use hello latest Microsoft provided client libraries and tools.</span></span> <span data-ttu-id="be4e7-398">На момент написания статьи hello являются клиентские библиотеки для .NET, Windows Phone, среды выполнения Windows, Java и C++, а также предварительного просмотра библиотек для других языков.</span><span class="sxs-lookup"><span data-stu-id="be4e7-398">At hello time of writing, there are client libraries available for .NET, Windows Phone, Windows Runtime, Java, and C++, as well as preview libraries for other languages.</span></span> <span data-ttu-id="be4e7-399">Кроме того, корпорация Майкрософт выпустила командлеты PowerShell и команды CLI Azure для работы с хранилищем Azure.</span><span class="sxs-lookup"><span data-stu-id="be4e7-399">In addition, Microsoft has released PowerShell cmdlets and Azure CLI commands for working with Azure Storage.</span></span> <span data-ttu-id="be4e7-400">Корпорация Майкрософт активно разрабатывает эти средства повышения производительности, сохраняет их копию toodate с hello последние версии службы и гарантирует, что они обрабатывают многие hello внутренне доказано производительности и рекомендации.</span><span class="sxs-lookup"><span data-stu-id="be4e7-400">Microsoft actively develops these tools with performance in mind, keeps them up toodate with hello latest service versions, and ensures they handle many of hello proven performance practices internally.</span></span>  

### <a name="retries"></a><span data-ttu-id="be4e7-401">Повторы</span><span class="sxs-lookup"><span data-stu-id="be4e7-401">Retries</span></span>
#### <span data-ttu-id="be4e7-402"><a name="subheading14"></a>Регулирование количества запросов и состояние "Сервер занят"</span><span class="sxs-lookup"><span data-stu-id="be4e7-402"><a name="subheading14"></a>Throttling/ServerBusy</span></span>
<span data-ttu-id="be4e7-403">В некоторых случаях служба хранилища hello может регулировать приложения может просто невозможно tooserve hello запрос из-за временного состояния toosome и быть возвращать сообщение «503. сервер занят» или «500 Timeout».</span><span class="sxs-lookup"><span data-stu-id="be4e7-403">In some cases, hello storage service may throttle your application or may simply be unable tooserve hello request due toosome transient condition and return a "503 Server busy" message or "500 Timeout".</span></span>  <span data-ttu-id="be4e7-404">Это может произойти, если приложение приближается к любой цели масштабирования hello, или если hello системы перераспределения вашей tooallow секционированных данных более высокую пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="be4e7-404">This can happen if your application is approaching any of hello scalability targets, or if hello system is rebalancing your partitioned data tooallow for higher throughput.</span></span>  <span data-ttu-id="be4e7-405">клиентское приложение Hello обычно следует повторить hello операция, вызывающая такой ошибки: попытка hello же запрос позже может быть успешным.</span><span class="sxs-lookup"><span data-stu-id="be4e7-405">hello client application should typically retry hello operation that causes such an error: attempting hello same request later can succeed.</span></span> <span data-ttu-id="be4e7-406">Тем не менее если служба хранилища hello регулирует приложения, так как он является превышение целей масштабирования или даже если служба hello не удается tooserve hello запроса по другой причине, агрессивной попыток обычно усугубляет hello проблему.</span><span class="sxs-lookup"><span data-stu-id="be4e7-406">However, if hello storage service is throttling your application because it is exceeding scalability targets, or even if hello service was unable tooserve hello request for some other reason, aggressive retries usually make hello problem worse.</span></span> <span data-ttu-id="be4e7-407">По этой причине следует использовать экспоненциальное в пассивном режиме (hello клиентских библиотек toothis по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="be4e7-407">For this reason, you should use an exponential back off (hello client libraries default toothis behavior).</span></span> <span data-ttu-id="be4e7-408">Например, приложение может повторить действие через 2 секунды, затем через 4 секунды, затем через 10 секунд, затем через 30 секунд, а затем полностью отказаться от повторения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-408">For example, your application may retry after 2 seconds, then 4 seconds, then 10 seconds, then 30 seconds, and then give up completely.</span></span> <span data-ttu-id="be4e7-409">Это поведение результатов в приложении, значительно уменьшая его нагрузку на службу hello, а не exacerbating проблемы.</span><span class="sxs-lookup"><span data-stu-id="be4e7-409">This behavior results in your application significantly reducing its load on hello service rather than exacerbating any problems.</span></span>  

<span data-ttu-id="be4e7-410">Обратите внимание, что ошибок подключения могут быть повторены немедленно, из-за не hello вследствие регулирования количества запросов их ожидаемый toobe временной.</span><span class="sxs-lookup"><span data-stu-id="be4e7-410">Note that connectivity errors can be retried immediately, because they are not hello result of throttling and are expected toobe transient.</span></span>  

#### <span data-ttu-id="be4e7-411"><a name="subheading15"></a>Ошибки без повторов</span><span class="sxs-lookup"><span data-stu-id="be4e7-411"><a name="subheading15"></a>Non-Retryable Errors</span></span>
<span data-ttu-id="be4e7-412">клиентские библиотеки Hello известно какие ошибки являются возможностью повторной попытки, а какие — нет.</span><span class="sxs-lookup"><span data-stu-id="be4e7-412">hello client libraries are aware of which errors are retry-able and which are not.</span></span> <span data-ttu-id="be4e7-413">При написании кода с хранилищами, hello REST API, обратите внимание на некоторые ошибки, которые не следует повторить: например, 400 (неправильный запрос), ответ означает, что клиентское приложение hello отправил запрос, который не может быть обработан, так как он не в форме ожидаемым.</span><span class="sxs-lookup"><span data-stu-id="be4e7-413">However, if you are writing your own code against hello storage REST API, remember there are some errors that you should not retry: for example, a 400 (Bad Request) response indicates that hello client application sent a request that could not be processed because it was not in an expected form.</span></span> <span data-ttu-id="be4e7-414">Повторная отправка запроса приведет к hello же ответе каждый раз, поэтому нет смысла повторять его.</span><span class="sxs-lookup"><span data-stu-id="be4e7-414">Resending this request will result hello same response every time, so there is no point in retrying it.</span></span> <span data-ttu-id="be4e7-415">При написании кода с хранилищами, hello REST API, следует учитывать какие hello коды ошибок tooretry надлежащей среднее и hello (или не) для каждого из них.</span><span class="sxs-lookup"><span data-stu-id="be4e7-415">If you are writing your own code against hello storage REST API, be aware of what hello error codes mean and hello proper way tooretry (or not) for each of them.</span></span>  

#### <a name="useful-resources"></a><span data-ttu-id="be4e7-416">Полезные ресурсы</span><span class="sxs-lookup"><span data-stu-id="be4e7-416">Useful Resources</span></span>
<span data-ttu-id="be4e7-417">Дополнительные сведения о кодах ошибок носителей см. в разделе [коды состояний и ошибок](http://msdn.microsoft.com/library/azure/dd179382.aspx) на веб-сайте Microsoft Azure hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-417">For more information about storage error codes, see [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) on hello Microsoft Azure web site.</span></span>  

## <a name="blobs"></a><span data-ttu-id="be4e7-418">BLOB-объекты</span><span class="sxs-lookup"><span data-stu-id="be4e7-418">Blobs</span></span>
<span data-ttu-id="be4e7-419">В добавление toohello проверенные методики [все службы](#allservices) было описано выше, применяются следующие hello проверенные методики специально toohello BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-419">In addition toohello proven practices for [All Services](#allservices) described previously, hello following proven practices apply specifically toohello blob service.</span></span>  

### <a name="blob-specific-scalability-targets"></a><span data-ttu-id="be4e7-420">Целевые показатели масштабируемости, характерные для BLOB-объекта</span><span class="sxs-lookup"><span data-stu-id="be4e7-420">Blob-Specific Scalability Targets</span></span>
#### <span data-ttu-id="be4e7-421"><a name="subheading46"></a>Несколько клиентов, одновременно обращающихся к одному объекту</span><span class="sxs-lookup"><span data-stu-id="be4e7-421"><a name="subheading46"></a>Multiple clients accessing a single object concurrently</span></span>
<span data-ttu-id="be4e7-422">При наличии большого числа клиентов, параллельный доступ к один объект потребуется tooconsider каждого объекта и хранения целевые показатели масштабируемости учетной записи.</span><span class="sxs-lookup"><span data-stu-id="be4e7-422">If you have a large number of clients accessing a single object concurrently you will need tooconsider per object and storage account scalability targets.</span></span> <span data-ttu-id="be4e7-423">Hello точное число клиентов, которые могут обращаться к один объект будет различаться в зависимости от таких факторов, как hello несколько клиентов одновременно, запрашивающих hello объекта размер hello объекта hello, сети условий и т. д.</span><span class="sxs-lookup"><span data-stu-id="be4e7-423">hello exact number of clients that can access a single object will vary depending on factors such as hello number of clients requesting hello object simultaneously, hello size of hello object, network conditions etc.</span></span>

<span data-ttu-id="be4e7-424">Если hello объекта могут быть распространены с помощью обслуживаться CDN, такие как изображения или видео с веб-сайта, то следует использовать CDN.</span><span class="sxs-lookup"><span data-stu-id="be4e7-424">If hello object can be distributed through a CDN such as images or videos served from a website then you should use a CDN.</span></span> <span data-ttu-id="be4e7-425">Дополнительные сведения см. [здесь](#subheading5).</span><span class="sxs-lookup"><span data-stu-id="be4e7-425">See [here](#subheading5).</span></span>

<span data-ttu-id="be4e7-426">В других сценариях, например научных моделирования, где hello данные являются конфиденциальными имеются две возможности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-426">In other scenarios such as scientific simulations where hello data is confidential you have two options.</span></span> <span data-ttu-id="be4e7-427">Во-первых, Hello является toostagger обращения за определенный период времени vs, к которому выполняется доступ одновременно к рабочей нагрузке доступ, в частности, hello объекта.</span><span class="sxs-lookup"><span data-stu-id="be4e7-427">hello first is toostagger your workload's access such that hello object is accessed over a period of time vs being accessed simultaneously.</span></span> <span data-ttu-id="be4e7-428">Кроме того можно скопировать временно hello учетные записи для хранения объекта toomultiple тем самым повышая hello всего операций ввода-ВЫВОДА на объект и нескольких учетных записей хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-428">Alternatively, you can temporarily copy hello object toomultiple storage accounts thus increasing hello total IOPS per object and across storage accounts.</span></span> <span data-ttu-id="be4e7-429">В ограниченное тестирование мы обнаружили, что около 25 виртуальных машин может одновременно загружать большой двоичный объект 100 ГБ в параллельном режиме (каждая виртуальная машина параллелизации hello загрузки с помощью 32 потока).</span><span class="sxs-lookup"><span data-stu-id="be4e7-429">In limited testing we found that around 25 VMs could simultaneously download a 100GB blob in parallel (each VM was parallelizing hello download using 32 threads).</span></span> <span data-ttu-id="be4e7-430">Если у вас есть 100 клиентов необходимости tooaccess hello объекта, сначала скопируйте его tooa вторую учетную запись хранилища имеют hello первые 50 виртуальных машин доступа hello первый BLOB-объект и hello второй 50 виртуальных машин доступа hello второй большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="be4e7-430">If you had 100 clients needing tooaccess hello object, first copy it tooa second storage account and then have hello first 50 VMs access hello first blob and hello second 50 VMs access hello second blob.</span></span> <span data-ttu-id="be4e7-431">Результаты будут зависеть от поведения приложений, поэтому это следует проверить во время разработки.</span><span class="sxs-lookup"><span data-stu-id="be4e7-431">Results will vary depending on your applications behavior so you should test this during design.</span></span> 

#### <span data-ttu-id="be4e7-432"><a name="subheading16"></a>Пропускная способность и операции с BLOB-объектом</span><span class="sxs-lookup"><span data-stu-id="be4e7-432"><a name="subheading16"></a>Bandwidth and operations per Blob</span></span>
<span data-ttu-id="be4e7-433">Вы могли читать или записывать tooa один большой двоичный объект в копии tooa более 60 МБ в секунду (это приблизительно 480 Мбит/с превышает возможности hello несколько сетей стороны клиента (включая hello физический сетевой Адаптер на клиентском устройстве hello).</span><span class="sxs-lookup"><span data-stu-id="be4e7-433">You can read or write tooa single blob at up tooa maximum of 60 MB/second (this is approximately 480 Mbps which exceeds hello capabilities of many client side networks (including hello physical NIC on hello client device).</span></span> <span data-ttu-id="be4e7-434">Кроме того один большой двоичный объект поддерживает запросы too500 в секунду.</span><span class="sxs-lookup"><span data-stu-id="be4e7-434">In addition, a single blob supports up too500 requests per second.</span></span> <span data-ttu-id="be4e7-435">При наличии нескольких клиентов, которым требуется tooread hello же больших двоичных объектов и может превысить эти ограничения, можно использовать в сети доставки Содержимого для распространения hello большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="be4e7-435">If you have multiple clients that need tooread hello same blob and you might exceed these limits, you should consider using a CDN for distributing hello blob.</span></span>  

<span data-ttu-id="be4e7-436">Дополнительные сведения о целевой пропускной способности для больших двоичных объектов см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-436">For more information about target throughput for blobs, see [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>  

### <a name="copying-and-moving-blobs"></a><span data-ttu-id="be4e7-437">Копирование и перемещение BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="be4e7-437">Copying and Moving Blobs</span></span>
#### <span data-ttu-id="be4e7-438"><a name="subheading17"></a>Копирование BLOB-объекта</span><span class="sxs-lookup"><span data-stu-id="be4e7-438"><a name="subheading17"></a>Copy Blob</span></span>
<span data-ttu-id="be4e7-439">Hello хранилища версии 2012-02-12 API-интерфейса REST появился hello полезные возможности toocopy BLOB-объектов в учетных записях: клиентское приложение может указать toocopy службы hello хранения большого двоичного объекта из другого источника (возможно, в другую учетную запись хранения) и подождите, пока hello Служба асинхронного выполнения копирования hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-439">hello storage REST API version 2012-02-12 introduced hello useful ability toocopy blobs across accounts: a client application can instruct hello storage service toocopy a blob from another source (possibly in a different storage account), and then let hello service perform hello copy asynchronously.</span></span> <span data-ttu-id="be4e7-440">Это может значительно снизить пропускную способность hello, необходимые для приложения hello, при переносе данных из других учетных записей хранилища, так как не требуется toodownload и передача данных hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-440">This can significantly reduce hello bandwidth needed for hello application when you are migrating data from other storage accounts because you do not need toodownload and upload hello data.</span></span>  

<span data-ttu-id="be4e7-441">Во-первых, то, что при копировании между учетными записями хранения, нет гарантии времени по завершении копирования hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-441">One consideration, however, is that, when copying between storage accounts, there is no time guarantee on when hello copy will complete.</span></span> <span data-ttu-id="be4e7-442">Если приложению toocomplete большой двоичный объект быстро скопировать под вашим управлением, загрузив его tooa виртуальной Машины и затем загрузить toohello назначения может лучше toocopy hello большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="be4e7-442">If your application needs toocomplete a blob copy quickly under your control, it may be better toocopy hello blob by downloading it tooa VM and then uploading it toohello destination.</span></span>  <span data-ttu-id="be4e7-443">Для полного предсказуемость в этом случае убедитесь, что выполняется копирование hello, виртуальная машина, работающая в hello же регионе Azure, в противном случае условий сети между возможно (и, возможно, будет) повлиять на производительность копирования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-443">For full predictability in that situation, ensure that hello copy is performed by a VM running in hello same Azure region, or else network conditions may (and probably will) affect your copy performance.</span></span>  <span data-ttu-id="be4e7-444">Кроме того вы можете отслеживать ход выполнения hello асинхронную копию программными средствами.</span><span class="sxs-lookup"><span data-stu-id="be4e7-444">In addition, you can monitor hello progress of an asynchronous copy programmatically.</span></span>  

<span data-ttu-id="be4e7-445">Обратите внимание, что копирование в пределах одной учетной записи хранения, сам обычно выполняются быстро hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-445">Note that copies within hello same storage account itself are generally completed quickly.</span></span>  

<span data-ttu-id="be4e7-446">Дополнительную информацию см. в статье [Copy Blob](http://msdn.microsoft.com/library/azure/dd894037.aspx) (Копирование большого двоичного объекта).</span><span class="sxs-lookup"><span data-stu-id="be4e7-446">For more information, see [Copy Blob](http://msdn.microsoft.com/library/azure/dd894037.aspx).</span></span>  

#### <span data-ttu-id="be4e7-447"><a name="subheading18"></a>Использование программы AzCopy</span><span class="sxs-lookup"><span data-stu-id="be4e7-447"><a name="subheading18"></a>Use AzCopy</span></span>
<span data-ttu-id="be4e7-448">Группа разработчиков хранилища Azure Hello выпустила средство командной строки «AzCopy», предназначены toohelp при массовой передаче много BLOB-объектов для из и в учетных записях хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-448">hello Azure Storage team has released a command-line tool "AzCopy" that is meant toohelp with bulk transferring many blobs to, from, and across storage accounts.</span></span>  <span data-ttu-id="be4e7-449">Этот инструмент оптимизирован специально для такого случая и может достигать высоких скоростей передачи данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-449">This tool is optimized for this scenario, and can achieve high transfer rates.</span></span>  <span data-ttu-id="be4e7-450">Его использование рекомендуется для случаев массовой отправки, загрузки и копирования данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-450">Its use is encouraged for bulk upload, download, and copy scenarios.</span></span> <span data-ttu-id="be4e7-451">Дополнительные сведения о его toolearn и загрузить его см. в разделе [перенесите данные с помощью служебной программы командной строки AzCopy hello](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-451">toolearn more about it and download it, see [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>  

#### <span data-ttu-id="be4e7-452"><a name="subheading19"></a>Служба импорта и экспорта Azure</span><span class="sxs-lookup"><span data-stu-id="be4e7-452"><a name="subheading19"></a>Azure Import/Export Service</span></span>
<span data-ttu-id="be4e7-453">Для очень больших объемов данных (более 1 ТБ) hello хранилища Azure предлагает hello службы импорта и экспорта, позволяющую для выгрузки и загрузки из хранилища больших двоичных объектов по доставке жестких дисков.</span><span class="sxs-lookup"><span data-stu-id="be4e7-453">For very large volumes of data (more than 1TB), hello Azure Storage offers hello Import/Export service, which allows for uploading and downloading from blob storage by shipping hard drives.</span></span>  <span data-ttu-id="be4e7-454">Можно разбить данные на жестком диске и отправить его tooMicrosoft для передачи или toodownload отправку tooMicrosoft пустой жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="be4e7-454">You can put your data on a hard drive and send it tooMicrosoft for upload, or send a blank hard drive tooMicrosoft toodownload data.</span></span>  <span data-ttu-id="be4e7-455">Дополнительные сведения см. в разделе [использовать hello службы импорта и экспорта Microsoft Azure tooTransfer данных tooBlob хранения](storage-import-export-service.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-455">For more information, see [Use hello Microsoft Azure Import/Export Service tooTransfer Data tooBlob Storage](storage-import-export-service.md).</span></span>  <span data-ttu-id="be4e7-456">Это может быть более эффективным, чем передаче или загрузке этого тома данных по сети hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-456">This can be much more efficient than uploading/downloading this volume of data over hello network.</span></span>  

### <span data-ttu-id="be4e7-457"><a name="subheading20"></a>Использование метаданных</span><span class="sxs-lookup"><span data-stu-id="be4e7-457"><a name="subheading20"></a>Use metadata</span></span>
<span data-ttu-id="be4e7-458">Служба BLOB-объектов Hello поддерживает головного запросы, которые могут включать метаданные о больших двоичных объектов hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-458">hello blob service supports head requests, which can include metadata about hello blob.</span></span> <span data-ttu-id="be4e7-459">Например при необходимости приложение hello EXIF данных из фотографию он может получить фото hello и извлеките его.</span><span class="sxs-lookup"><span data-stu-id="be4e7-459">For example, if your application needed hello EXIF data out of a photo, it could retrieve hello photo and extract it.</span></span> <span data-ttu-id="be4e7-460">toosave пропускной способности и повышения производительности, приложение может сохранять данные EXIF hello в метаданных hello большого двоичного объекта, отправке приложения hello фото hello: после этого можно получать данные EXIF hello в метаданных с использованием только проверки ПОДЛИННОСТИ, экономя пропускную способность значительные и время обработки hello tooextract hello EXIF данные каждый раз hello BLOB-объект доступен для чтения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-460">toosave bandwidth and improve performance, your application could store hello EXIF data in hello blob's metadata when hello application uploaded hello photo: you can then retrieve hello EXIF data in metadata using only a HEAD request, saving significant bandwidth and hello processing time needed tooextract hello EXIF data each time hello blob is read.</span></span> <span data-ttu-id="be4e7-461">Это будет полезно в сценариях, где требуется только метаданные hello и hello не полное содержимое большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="be4e7-461">This would be useful in scenarios where you only need hello metadata, and not hello full content of a blob.</span></span>  <span data-ttu-id="be4e7-462">Обратите внимание, что только 8 КБ метаданные могут храниться на BLOB-объект (hello служба не будет принимать toostore запроса, больше указанного,), поэтому если hello данные не помещаются в этот размер, вы не имеете права быть этот подход может toouse.</span><span class="sxs-lookup"><span data-stu-id="be4e7-462">Note that only 8 KB of metadata can be stored per blob (hello service will not accept a request toostore more than that), so if hello data does not fit in that size, you may not be able toouse this approach.</span></span>  

<span data-ttu-id="be4e7-463">Пример того, как tooget метаданные большого двоичного объекта, с помощью .NET, в разделе [набор получить свойства и метаданные](storage-properties-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-463">For an example of how tooget a blob's metadata using .NET, see [Set and Retrieve Properties and Metadata](storage-properties-metadata.md).</span></span>  

### <a name="uploading-fast"></a><span data-ttu-id="be4e7-464">Быстрая отправка</span><span class="sxs-lookup"><span data-stu-id="be4e7-464">Uploading Fast</span></span>
<span data-ttu-id="be4e7-465">— Первый вопрос tooanswer hello tooupload BLOB-объектов быстрого: вы Отправка одного большого двоичного объекта» или «много?</span><span class="sxs-lookup"><span data-stu-id="be4e7-465">tooupload blobs fast, hello first question tooanswer is: are you uploading one blob or many?</span></span>  <span data-ttu-id="be4e7-466">Используйте hello ниже рекомендации toodetermine hello правильный метод toouse в зависимости от вашего сценария.</span><span class="sxs-lookup"><span data-stu-id="be4e7-466">Use hello below guidance toodetermine hello correct method toouse depending on your scenario.</span></span>  

#### <span data-ttu-id="be4e7-467"><a name="subheading21"></a>Быстрая отправка одного BLOB-объекта</span><span class="sxs-lookup"><span data-stu-id="be4e7-467"><a name="subheading21"></a>Uploading one large blob quickly</span></span>
<span data-ttu-id="be4e7-468">tooupload одной большой больших двоичных объектов быстро, клиентского приложения должен передавать его блокировки или страницы в параллельном режиме (будет учитывать hello целевые показатели масштабируемости для отдельных больших двоичных объектов и hello учетной записи хранения в целом).</span><span class="sxs-lookup"><span data-stu-id="be4e7-468">tooupload a single large blob quickly, your client application should upload its blocks or pages in parallel (being mindful of hello scalability targets for individual blobs and hello storage account as a whole).</span></span>  <span data-ttu-id="be4e7-469">Обратите внимание, что hello официальный предоставленный корпорацией Майкрософт RTM хранилища клиентские библиотеки (.NET, Java) hello возможность toodo это.</span><span class="sxs-lookup"><span data-stu-id="be4e7-469">Note that hello official Microsoft-provided RTM Storage Client libraries (.NET, Java) have hello ability toodo this.</span></span>  <span data-ttu-id="be4e7-470">Для каждой из библиотек hello используйте hello ниже указанного объекта tooset hello уровень параллелизма:</span><span class="sxs-lookup"><span data-stu-id="be4e7-470">For each of hello libraries, use hello below specified object/property tooset hello level of concurrency:</span></span>  

* <span data-ttu-id="be4e7-471">.NET: Набор ParallelOperationThreadCount на toobe объекта BlobRequestOptions используется.</span><span class="sxs-lookup"><span data-stu-id="be4e7-471">.NET: Set ParallelOperationThreadCount on a BlobRequestOptions object toobe used.</span></span>
* <span data-ttu-id="be4e7-472">Java/Android: используйте функцию BlobRequestOptions.setConcurrentRequestCount()</span><span class="sxs-lookup"><span data-stu-id="be4e7-472">Java/Android: Use BlobRequestOptions.setConcurrentRequestCount()</span></span>
* <span data-ttu-id="be4e7-473">Node.js: Для использования parallelOperationThreadCount параметры запроса либо hello и hello BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-473">Node.js: Use parallelOperationThreadCount on either hello request options or on hello blob service.</span></span>
* <span data-ttu-id="be4e7-474">C++: Метод blob_request_options::set_parallelism_factor hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-474">C++: Use hello blob_request_options::set_parallelism_factor method.</span></span>

#### <span data-ttu-id="be4e7-475"><a name="subheading22"></a>Быстрая отправка множества BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="be4e7-475"><a name="subheading22"></a>Uploading many blobs quickly</span></span>
<span data-ttu-id="be4e7-476">Многие быстро, большие двоичные объекты tooupload Отправка BLOB-объектов в параллельном режиме.</span><span class="sxs-lookup"><span data-stu-id="be4e7-476">tooupload many blobs quickly, upload blobs in parallel.</span></span> <span data-ttu-id="be4e7-477">Это быстрее, чем отправка одного больших двоичных объектов одновременно с параллельного блока передачи, так как она распространяется hello передачи по нескольким секциям hello службы хранилища.</span><span class="sxs-lookup"><span data-stu-id="be4e7-477">This is faster than uploading single blobs at a time with parallel block uploads because it spreads hello upload across multiple partitions of hello storage service.</span></span> <span data-ttu-id="be4e7-478">Один BLOB-объект поддерживает пропускную способность не более 60 МБ/с (около 480 Мбит/с).</span><span class="sxs-lookup"><span data-stu-id="be4e7-478">A single blob only supports a throughput of 60 MB/second (approximately 480 Mbps).</span></span> <span data-ttu-id="be4e7-479">На момент написания статьи hello учетной записи на основе США LRS поддерживает до too20 входящих Гбит/с, являющийся гораздо более чем пропускная способность hello поддерживается отдельные BLOB-объект.</span><span class="sxs-lookup"><span data-stu-id="be4e7-479">At hello time of writing, a US-based LRS account supports up too20 Gbps ingress which is far more than hello throughput supported by an individual blob.</span></span>  <span data-ttu-id="be4e7-480">[AzCopy](#subheading18) выполняет параллельную отправку по умолчанию, как и рекомендуется для данного случая.</span><span class="sxs-lookup"><span data-stu-id="be4e7-480">[AzCopy](#subheading18) performs uploads in parallel by default, and is recommended for this scenario.</span></span>  

### <span data-ttu-id="be4e7-481"><a name="subheading23"></a>Выбор правильного типа hello большого двоичного объекта</span><span class="sxs-lookup"><span data-stu-id="be4e7-481"><a name="subheading23"></a>Choosing hello correct type of blob</span></span>
<span data-ttu-id="be4e7-482">Служба хранилища Azure поддерживает два типа больших двоичных объектов: *страничные* BLOB-объекты и *блочные* BLOB-объекты.</span><span class="sxs-lookup"><span data-stu-id="be4e7-482">Azure Storage supports two types of blob: *page* blobs and *block* blobs.</span></span> <span data-ttu-id="be4e7-483">Для использования данного сценария Выбор типа blob повлияет hello производительности и масштабируемости решения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-483">For a given usage scenario, your choice of blob type will affect hello performance and scalability of your solution.</span></span> <span data-ttu-id="be4e7-484">При необходимости tooupload больших объемов данных, эффективно подходят блочных больших двоичных объектов: например, клиентское приложение может потребоваться tooupload фото или видео tooblob хранилища.</span><span class="sxs-lookup"><span data-stu-id="be4e7-484">Block blobs are appropriate when you want tooupload large amounts of data efficiently: for example, a client application may need tooupload photos or video tooblob storage.</span></span> <span data-ttu-id="be4e7-485">Страничные большие двоичные объекты подходят, если приложение hello должно tooperform произвольные операции записи данных hello: например, Azure виртуальные жесткие диски хранятся в виде страничных больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="be4e7-485">Page blobs are appropriate if hello application needs tooperform random writes on hello data: for example, Azure VHDs are stored as page blobs.</span></span>  

<span data-ttu-id="be4e7-486">Дополнительные сведения см. в статье [Understanding Block Blobs, Append Blobs, and Page Blobs](http://msdn.microsoft.com/library/azure/ee691964.aspx) (Основные сведения о блочных, добавочных и страничных BLOB-объектах).</span><span class="sxs-lookup"><span data-stu-id="be4e7-486">For more information, see [Understanding Block Blobs, Append Blobs, and Page Blobs](http://msdn.microsoft.com/library/azure/ee691964.aspx).</span></span>  

## <a name="tables"></a><span data-ttu-id="be4e7-487">Таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-487">Tables</span></span>
<span data-ttu-id="be4e7-488">В добавление toohello проверенные методики [все службы](#allservices) было описано выше, применяются следующие hello проверенные методики специально toohello службы таблиц.</span><span class="sxs-lookup"><span data-stu-id="be4e7-488">In addition toohello proven practices for [All Services](#allservices) described previously, hello following proven practices apply specifically toohello table service.</span></span>  

### <span data-ttu-id="be4e7-489"><a name="subheading24"></a>Целевые показатели масштабирования для таблицы</span><span class="sxs-lookup"><span data-stu-id="be4e7-489"><a name="subheading24"></a>Table-Specific Scalability Targets</span></span>
<span data-ttu-id="be4e7-490">В добавление ограничения пропускной способности toohello всего хранилища учетной записи таблицы имеют следующие предел конкретных масштабируемости hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-490">In addition toohello bandwidth limitations of an entire storage account, tables have hello following specific scalability limit.</span></span>  <span data-ttu-id="be4e7-491">Обратите внимание, что система hello загружает баланс при увеличении вашего трафика, но если резкому увеличению трафика, вы не имеете права сразу стать может tooget этот объем пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="be4e7-491">Note that hello system will load balance as your traffic increases, but if your traffic has sudden bursts, you may not be able tooget this volume of throughput immediately.</span></span>  <span data-ttu-id="be4e7-492">Если ваш шаблон имеет пакетами, следует ожидать, что регулирование toosee и/или время ожидания во время hello пакетов как служба хранилища hello, автоматически равномерно распределяется из таблицы.</span><span class="sxs-lookup"><span data-stu-id="be4e7-492">If your pattern has bursts, you should expect toosee throttling and/or timeouts during hello burst as hello storage service automatically load balances out your table.</span></span>  <span data-ttu-id="be4e7-493">Увеличивать медленно обычно имеет лучшие результаты, как он обеспечивает баланс tooload hello системы времени соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="be4e7-493">Ramping up slowly generally has better results as it gives hello system time tooload balance appropriately.</span></span>  

#### <a name="entities-per-second-account"></a><span data-ttu-id="be4e7-494">Сущностей в секунду (учетная запись)</span><span class="sxs-lookup"><span data-stu-id="be4e7-494">Entities per Second (Account)</span></span>
<span data-ttu-id="be4e7-495">предел масштабируемости Hello для доступа к таблицам работает too20 000 сущностей (1 КБ) в секунду для учетной записи.</span><span class="sxs-lookup"><span data-stu-id="be4e7-495">hello scalability limit for accessing tables is up too20,000 entities (1KB each) per second for an account.</span></span>  <span data-ttu-id="be4e7-496">Обычно каждая сущность, которая вставляется, обновляется, удаляется или сканируется, идет в счет этой цели.</span><span class="sxs-lookup"><span data-stu-id="be4e7-496">In general, each entity that is inserted, updated, deleted, or scanned counts toward this target.</span></span>  <span data-ttu-id="be4e7-497">Так, пакетная вставка, которая содержит 100 сущностей, будет считаться за 100 сущностей.</span><span class="sxs-lookup"><span data-stu-id="be4e7-497">So a batch insert that contains 100 entities would count as 100 entities.</span></span>  <span data-ttu-id="be4e7-498">Запрос, который сканирует 1000 сущностей и возвращает 5 из них, будет считаться за 1000 сущностей.</span><span class="sxs-lookup"><span data-stu-id="be4e7-498">A query that scans 1000 entities and returns 5 would count as 1000 entities.</span></span>  

#### <a name="entities-per-second-partition"></a><span data-ttu-id="be4e7-499">Сущностей в секунду (раздел)</span><span class="sxs-lookup"><span data-stu-id="be4e7-499">Entities per Second (Partition)</span></span>
<span data-ttu-id="be4e7-500">Здравствуйте, целевой показатель масштабируемости в одной секции, доступ к таблицам — 2 000 сущностей (1 КБ) в секунду, с помощью hello же инвентаризации как описано в предыдущем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-500">Within a single partition, hello scalability target for accessing tables is 2,000 entities (1KB each) per second, using hello same counting as described in hello previous section.</span></span>  

### <a name="configuration"></a><span data-ttu-id="be4e7-501">Конфигурация</span><span class="sxs-lookup"><span data-stu-id="be4e7-501">Configuration</span></span>
<span data-ttu-id="be4e7-502">В этом разделе перечислены некоторые параметры быстрой настройки, toomake значительное повышение производительности можно использовать в службе таблиц hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-502">This section lists several quick configuration settings that you can use toomake significant performance improvements in hello table service:</span></span>  

#### <span data-ttu-id="be4e7-503"><a name="subheading25"></a>Использование JSON</span><span class="sxs-lookup"><span data-stu-id="be4e7-503"><a name="subheading25"></a>Use JSON</span></span>
<span data-ttu-id="be4e7-504">Начиная с версии службы хранилища 2013-08-15, hello служба таблиц поддерживает JSON вместо формата hello AtomPub на основе XML для передачи данных в таблице.</span><span class="sxs-lookup"><span data-stu-id="be4e7-504">Beginning with storage service version 2013-08-15, hello table service supports using JSON instead of hello XML-based AtomPub format for transferring table data.</span></span> <span data-ttu-id="be4e7-505">Это число можно уменьшить размер полезных данных, до 75% и может значительно повысить производительность приложения hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-505">This can reduce payload sizes by as much as 75% and can significantly improve hello performance of your application.</span></span>

<span data-ttu-id="be4e7-506">Дополнительные сведения см. в статье блога hello [таблиц Microsoft Azure: введение в JSON](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/05/windows-azure-tables-introducing-json.aspx) и [формат полезных данных для операций службы таблиц](http://msdn.microsoft.com/library/azure/dn535600.aspx).</span><span class="sxs-lookup"><span data-stu-id="be4e7-506">For more information, see hello post [Microsoft Azure Tables: Introducing JSON](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/05/windows-azure-tables-introducing-json.aspx) and [Payload Format for Table Service Operations](http://msdn.microsoft.com/library/azure/dn535600.aspx).</span></span>

#### <span data-ttu-id="be4e7-507"><a name="subheading26"></a>Отключение алгоритма Nagle</span><span class="sxs-lookup"><span data-stu-id="be4e7-507"><a name="subheading26"></a>Nagle Off</span></span>
<span data-ttu-id="be4e7-508">Алгоритм Nagle широко применяется в сетях TCP/IP в производительности означает tooimprove сети.</span><span class="sxs-lookup"><span data-stu-id="be4e7-508">Nagle's algorithm is widely implemented across TCP/IP networks as a means tooimprove network performance.</span></span> <span data-ttu-id="be4e7-509">Тем не менее он не является оптимальным во всех случаях (включая высокоинтерактивные среды).</span><span class="sxs-lookup"><span data-stu-id="be4e7-509">However, it is not optimal in all circumstances (such as highly interactive environments).</span></span> <span data-ttu-id="be4e7-510">Алгоритм Nagle оказывает негативное влияние на производительность hello toohello запросы таблиц и очередей служб для хранилища Azure, и необходимо отключить их, если это возможно.</span><span class="sxs-lookup"><span data-stu-id="be4e7-510">For Azure Storage, Nagle's algorithm has a negative impact on hello performance of requests toohello table and queue services, and you should disable it if possible.</span></span>  

<span data-ttu-id="be4e7-511">Дополнительные сведения см. наш блога [алгоритм Nagle является не понятным для небольших запросов](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx), которой объясняется, почему алгоритм Nagle плохо взаимодействует с запросами, таблиц и очередей и показано, как toodisable его в клиентском приложении приложение.</span><span class="sxs-lookup"><span data-stu-id="be4e7-511">For more information, see our blog post [Nagle's Algorithm is Not Friendly towards Small Requests](http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx), which explains why Nagle's algorithm interacts poorly with table and queue requests, and shows how toodisable it in your client application.</span></span>  

### <a name="schema"></a><span data-ttu-id="be4e7-512">Схема</span><span class="sxs-lookup"><span data-stu-id="be4e7-512">Schema</span></span>
<span data-ttu-id="be4e7-513">Как представления и запроса данных — главное hello один фактор, который влияет на производительность hello hello службы таблиц.</span><span class="sxs-lookup"><span data-stu-id="be4e7-513">How you represent and query your data is hello biggest single factor that affects hello performance of hello table service.</span></span> <span data-ttu-id="be4e7-514">Поскольку приложения отличаются друг от друга, в данном разделе излагаются некоторые общие проверенные подходы, которые относятся к:</span><span class="sxs-lookup"><span data-stu-id="be4e7-514">While every application is different, this section outlines some general proven practices that relate to:</span></span>  

* <span data-ttu-id="be4e7-515">конструктору таблиц;</span><span class="sxs-lookup"><span data-stu-id="be4e7-515">Table design</span></span>
* <span data-ttu-id="be4e7-516">эффективным запросам;</span><span class="sxs-lookup"><span data-stu-id="be4e7-516">Efficient queries</span></span>
* <span data-ttu-id="be4e7-517">эффективным обновлениям данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-517">Efficient data updates</span></span>  

#### <span data-ttu-id="be4e7-518"><a name="subheading27"></a>Таблицы и секции</span><span class="sxs-lookup"><span data-stu-id="be4e7-518"><a name="subheading27"></a>Tables and partitions</span></span>
<span data-ttu-id="be4e7-519">Таблицы разделены на разделы.</span><span class="sxs-lookup"><span data-stu-id="be4e7-519">Tables are divided into partitions.</span></span> <span data-ttu-id="be4e7-520">Каждая сущность хранятся в разделе общих ресурсов hello одинаковым ключом секции и имеет уникальную строку ключа tooidentify его в этой секции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-520">Every entity stored in a partition shares hello same partition key and has a unique row key tooidentify it within that partition.</span></span> <span data-ttu-id="be4e7-521">Разделы предоставляют преимущества, но также вводят ограничения по масштабируемости.</span><span class="sxs-lookup"><span data-stu-id="be4e7-521">Partitions provide benefits but also introduce scalability limits.</span></span>  

* <span data-ttu-id="be4e7-522">Преимущества: Вы можете обновить сущностей в hello же секции в пакете одинарные, атомарные, транзакции, которая содержит копии too100 хранить операций (ограничение на общий размер 4 МБ).</span><span class="sxs-lookup"><span data-stu-id="be4e7-522">Benefits: You can update entities in hello same partition in a single, atomic, batch transaction that contains up too100 separate storage operations (limit of 4MB total size).</span></span> <span data-ttu-id="be4e7-523">При условии, что hello одинаковый номер из сущности toobe получены, можно также выполнить запрос данных в одной секции более эффективно, чем данных, охватывающих несколько секций (хотя для чтения на дополнительные рекомендации по запросу данных таблицы).</span><span class="sxs-lookup"><span data-stu-id="be4e7-523">Assuming hello same number of entities toobe retrieved, you can also query data within a single partition more efficiently than data that spans partitions (though read on for further recommendations on querying table data).</span></span>
* <span data-ttu-id="be4e7-524">Предел масштабируемости: tooentities доступа хранятся в одной секции не может быть балансировкой нагрузки секций поддерживает атомарные пакетные транзакции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-524">Scalability limit: Access tooentities stored in a single partition cannot be load-balanced because partitions support atomic batch transactions.</span></span> <span data-ttu-id="be4e7-525">По этой причине hello цель масштабируемости для отдельной таблицы разделов ниже, чем для службы таблиц hello в целом.</span><span class="sxs-lookup"><span data-stu-id="be4e7-525">For this reason, hello scalability target for an individual table partition is lower than for hello table service as a whole.</span></span>  

<span data-ttu-id="be4e7-526">Из-за эти характеристики таблиц и секций необходимо принимать hello следующие принципы разработки:</span><span class="sxs-lookup"><span data-stu-id="be4e7-526">Because of these characteristics of tables and partitions, you should adopt hello following design principles:</span></span>  

* <span data-ttu-id="be4e7-527">Данные, которые клиентское приложение обновляется или часто запрашиваемых в hello же логическая единица работы должна находиться в hello одной секции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-527">Data that your client application frequently updated or queried in hello same logical unit of work should be located in hello same partition.</span></span>  <span data-ttu-id="be4e7-528">Возможно, поскольку приложение выполняет статистическую обработку операций записи или вы хотите tootake преимуществами атомарные пакетные операции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-528">This may be because your application is aggregating writes, or because you want tootake advantage of atomic batch operations.</span></span>  <span data-ttu-id="be4e7-529">Кроме того, данные, находящиеся в одном разделе, могут быть с большим успехом запрошены в одном обращении, чем данные, которые находятся в разных разделах.</span><span class="sxs-lookup"><span data-stu-id="be4e7-529">Also, data in a single partition can be more efficiently queried in a single query than data across partitions.</span></span>
* <span data-ttu-id="be4e7-530">Данные, которые клиентское приложение не вставки или обновления или запроса в hello же логическая единица работы (одного запроса или пакета обновления) должен находиться в отдельные разделы.</span><span class="sxs-lookup"><span data-stu-id="be4e7-530">Data that your client application does not insert/update or query in hello same logical unit of work (single query or batch update) should be located in separate partitions.</span></span>  <span data-ttu-id="be4e7-531">Одно важное замечание то, что не toohello ограничить количество разделов в одной таблице, поэтому наличие миллионы ключи разделов не вызывает проблем и не влияют на производительность.</span><span class="sxs-lookup"><span data-stu-id="be4e7-531">One important note is that there is no limit toohello number of partition keys in a single table, so having millions of partition keys is not a problem and will not impact performance.</span></span>  <span data-ttu-id="be4e7-532">Например если приложение является популярных веб-сайт с именем входа пользователя, с помощью hello идентификатор пользователя в качестве ключа секции hello может быть хорошим выбором.</span><span class="sxs-lookup"><span data-stu-id="be4e7-532">For example, if your application is a popular website with user login, using hello User Id as hello partition key could be a good choice.</span></span>  

#### <a name="hot-partitions"></a><span data-ttu-id="be4e7-533">Горячие разделы</span><span class="sxs-lookup"><span data-stu-id="be4e7-533">Hot Partitions</span></span>
<span data-ttu-id="be4e7-534">Горячий секции то, которое получает непропорционального процент от учетной записи tooan трафика hello и не может обеспечить балансировку нагрузки, так как это один раздел.</span><span class="sxs-lookup"><span data-stu-id="be4e7-534">A hot partition is one that is receiving a disproportionate percentage of hello traffic tooan account, and cannot be load balanced because it is a single partition.</span></span>  <span data-ttu-id="be4e7-535">Обычно горячие разделы создаются одним из двух способов:</span><span class="sxs-lookup"><span data-stu-id="be4e7-535">In general, hot partitions are created one of two ways:</span></span>  

##### <span data-ttu-id="be4e7-536"><a name="subheading28"></a>Инкрементируемые и декрементируемые шаблоны</span><span class="sxs-lookup"><span data-stu-id="be4e7-536"><a name="subheading28"></a>Append Only and Prepend Only patterns</span></span>
<span data-ttu-id="be4e7-537">шаблон «Добавление только» Hello является одним где все или почти все tooa трафика hello заданному PK увеличивается и уменьшается соответствующим toohello текущее время.</span><span class="sxs-lookup"><span data-stu-id="be4e7-537">hello "Append Only" pattern is one where all (or nearly all) of hello traffic tooa given PK increases and decreases according toohello current time.</span></span>  <span data-ttu-id="be4e7-538">Например, если приложение используется hello текущую дату в качестве ключа секции для данных журнала.</span><span class="sxs-lookup"><span data-stu-id="be4e7-538">An example is if your application used hello current date as a partition key for log data.</span></span>  <span data-ttu-id="be4e7-539">Это приведет к всех вставок hello переходом toohello последнюю секцию в таблице и hello система не может загрузить баланс, поскольку все операции записи hello не конец toohello постоянной таблицы.</span><span class="sxs-lookup"><span data-stu-id="be4e7-539">This results in all of hello inserts going toohello last partition in your table, and hello system cannot load balance because all of hello writes are going toohello end of your table.</span></span>  <span data-ttu-id="be4e7-540">Если hello объем трафика toothat раздела превышает целевой показатель масштабируемости уровне секции hello, это приведет регулирования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-540">If hello volume of traffic toothat partition exceeds hello partition-level scalability target, then it will result in throttling.</span></span>  <span data-ttu-id="be4e7-541">Это лучше tooensure, трафик секций toomultiple hello балансировки нагрузки tooenable запрашивает по таблице.</span><span class="sxs-lookup"><span data-stu-id="be4e7-541">It's better tooensure that traffic is sent toomultiple partitions, tooenable load balance hello requests across your table.</span></span>  

##### <span data-ttu-id="be4e7-542"><a name="subheading29"></a>Данные с интенсивным трафиком</span><span class="sxs-lookup"><span data-stu-id="be4e7-542"><a name="subheading29"></a>High-Traffic Data</span></span>
<span data-ttu-id="be4e7-543">Если результаты схему секционирования в одной секции, содержит только данные, которые используются гораздо более чем в других секциях, также возможны регулирования как hello цель масштабируемости для одной секции, приближается к этой секции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-543">If your partitioning scheme results in a single partition that just has data that is far more used than other partitions, you may also see throttling as that partition approaches hello scalability target for a single partition.</span></span>  <span data-ttu-id="be4e7-544">Это лучше toomake в том, что результаты схему секционирования в нет единственного секции около целевые показатели масштабируемости hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-544">It's better toomake sure that your partition scheme results in no single partition approaching hello scalability targets.</span></span>  

#### <a name="querying"></a><span data-ttu-id="be4e7-545">Выполнение запроса</span><span class="sxs-lookup"><span data-stu-id="be4e7-545">Querying</span></span>
<span data-ttu-id="be4e7-546">В этом разделе описываются проверенные методики для выполнения запросов к службе таблиц hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-546">This section describes proven practices for querying hello table service.</span></span>  

##### <span data-ttu-id="be4e7-547"><a name="subheading30"></a>Область запроса</span><span class="sxs-lookup"><span data-stu-id="be4e7-547"><a name="subheading30"></a>Query Scope</span></span>
<span data-ttu-id="be4e7-548">Существует несколько способов toospecify hello спектр tooquery сущностей.</span><span class="sxs-lookup"><span data-stu-id="be4e7-548">There are several ways toospecify hello range of entities tooquery.</span></span>  <span data-ttu-id="be4e7-549">Hello ниже приводится описание использует hello каждого.</span><span class="sxs-lookup"><span data-stu-id="be4e7-549">hello following is a discussion of hello uses of each.</span></span>  

<span data-ttu-id="be4e7-550">Как правило избежать проверок (запросов больше, чем одной сущности), но если необходимо проверить, попробуйте tooorganize данных, чтобы ваш просмотров извлекать hello данных без сканирования или возвращение значительное количество сущностей, которые не требуются.</span><span class="sxs-lookup"><span data-stu-id="be4e7-550">In general, avoid scans (queries larger than a single entity), but if you must scan, try tooorganize your data so that your scans retrieve hello data you need without scanning or returning significant amounts of entities you don't need.</span></span>  

###### <a name="point-queries"></a><span data-ttu-id="be4e7-551">Точечные запросы</span><span class="sxs-lookup"><span data-stu-id="be4e7-551">Point Queries</span></span>
<span data-ttu-id="be4e7-552">Точечный запрос извлекает ровно одну сущность.</span><span class="sxs-lookup"><span data-stu-id="be4e7-552">A point query retrieves exactly one entity.</span></span> <span data-ttu-id="be4e7-553">Это делается путем указания hello ключ раздела и ключ строки сущности tooretrieve hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-553">It does this by specifying both hello partition key and row key of hello entity tooretrieve.</span></span> <span data-ttu-id="be4e7-554">Эти запросы являются очень эффективными, и их следует использовать везде, где это возможно.</span><span class="sxs-lookup"><span data-stu-id="be4e7-554">These queries are very efficient, and you should use them wherever possible.</span></span>  

###### <a name="partition-queries"></a><span data-ttu-id="be4e7-555">Запросы разделов</span><span class="sxs-lookup"><span data-stu-id="be4e7-555">Partition Queries</span></span>
<span data-ttu-id="be4e7-556">Запрос раздела — это запрос, который извлекает набор данных, совместно использующих общий ключ раздела.</span><span class="sxs-lookup"><span data-stu-id="be4e7-556">A partition query is a query that retrieves a set of data that shares a common partition key.</span></span> <span data-ttu-id="be4e7-557">Как правило запрос hello указывает диапазон значений ключа строки или диапазон значений для некоторых свойств сущности в ключ раздела tooa сложения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-557">Typically, hello query specifies a range of row key values or a range of values for some entity property in addition tooa partition key.</span></span> <span data-ttu-id="be4e7-558">Они менее эффективны, чем точечные запросы, и их следует использовать с осторожностью.</span><span class="sxs-lookup"><span data-stu-id="be4e7-558">These are less efficient than point queries, and should be used sparingly.</span></span>  

###### <a name="table-queries"></a><span data-ttu-id="be4e7-559">Табличные запросы</span><span class="sxs-lookup"><span data-stu-id="be4e7-559">Table Queries</span></span>
<span data-ttu-id="be4e7-560">Табличный запрос — это запрос, который извлекает набор сущностей, не использующих совместно общий ключ раздела.</span><span class="sxs-lookup"><span data-stu-id="be4e7-560">A table query is a query that retrieves a set of entities that does not share a common partition key.</span></span> <span data-ttu-id="be4e7-561">Эти запросы не являются эффективными, и, если это возможно, следует избегать их использования.</span><span class="sxs-lookup"><span data-stu-id="be4e7-561">These queries are not efficient and you should avoid them if possible.</span></span>  

##### <span data-ttu-id="be4e7-562"><a name="subheading31"></a>Плотность запроса</span><span class="sxs-lookup"><span data-stu-id="be4e7-562"><a name="subheading31"></a>Query Density</span></span>
<span data-ttu-id="be4e7-563">Другим ключевым фактором эффективность запросов: hello число сущностей, возвращаемых как сравниваемых toohello возвращаемого количества сущностей hello отсканированные toofind задано.</span><span class="sxs-lookup"><span data-stu-id="be4e7-563">Another key factor in query efficiency is hello number of entities returned as compared toohello number of entities scanned toofind hello returned set.</span></span> <span data-ttu-id="be4e7-564">Если приложение выполняет запрос таблицы с фильтром для значения свойства, что только 1% общих ресурсов данных hello, hello запрос будет сканировать 100 сущностей для каждого одной сущности, он возвращает.</span><span class="sxs-lookup"><span data-stu-id="be4e7-564">If your application performs a table query with a filter for a property value that only 1% of hello data shares, hello query will scan 100 entities for every one entity it returns.</span></span> <span data-ttu-id="be4e7-565">Hello целевые показатели масштабируемости таблице описано ранее, все связанные toohello количество сущностей, проверенных и не hello возвращаемого количества сущностей: плотность низкий запроса может легко привести к toothrottle службы таблицы hello приложения так, как должно проверять так много hello сущность tooretrieve сущности, которую вы ищете.</span><span class="sxs-lookup"><span data-stu-id="be4e7-565">hello table scalability targets discussed previously all relate toohello number of entities scanned, and not hello number of entities returned: a low query density can easily cause hello table service toothrottle your application because it must scan so many entities tooretrieve hello entity you are looking for.</span></span>  <span data-ttu-id="be4e7-566">В разделе hello ниже на [денормализации](#subheading34) Дополнительные сведения о том, как tooavoid это.</span><span class="sxs-lookup"><span data-stu-id="be4e7-566">See hello section below on [denormalization](#subheading34) for more information on how tooavoid this.</span></span>  

##### <a name="limiting-hello-amount-of-data-returned"></a><span data-ttu-id="be4e7-567">Ограничение сумма данные возвращаются hello</span><span class="sxs-lookup"><span data-stu-id="be4e7-567">Limiting hello Amount of Data Returned</span></span>
###### <span data-ttu-id="be4e7-568"><a name="subheading32"></a>Фильтрация</span><span class="sxs-lookup"><span data-stu-id="be4e7-568"><a name="subheading32"></a>Filtering</span></span>
<span data-ttu-id="be4e7-569">Когда вы знаете, что запрос возвращает сущности, которые не требуется в клиентском приложении hello, рассмотрите возможность использования размером hello tooreduce фильтр вернул набор hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-569">Where you know that a query will return entities that you don't need in hello client application, consider using a filter tooreduce hello size of hello returned set.</span></span> <span data-ttu-id="be4e7-570">При передаче hello сущностей не toohello клиент по-прежнему учитываются hello ограничения масштабирования, производительность приложений будет повышения из-за размер полезных данных сетевого ограниченной hello и уменьшению числа сущностей, которые необходимо обработать клиентское приложение hello .</span><span class="sxs-lookup"><span data-stu-id="be4e7-570">While hello entities not returned toohello client still count toward hello scalability limits, your application performance will improve because of hello reduced network payload size and hello reduced number of entities that your client application must process.</span></span>  <span data-ttu-id="be4e7-571">См. выше Обратите внимание на [плотность запроса](#subheading31), однако — целевые показатели масштабируемости hello связаны toohello количество сущностей, которые проверяются, поэтому запрос, который отфильтровывает большого количества объектов может по-прежнему привести регулирования, даже если возвращается несколько сущностей.</span><span class="sxs-lookup"><span data-stu-id="be4e7-571">See above note on [Query Density](#subheading31), however – hello scalability targets relate toohello number of entities scanned, so a query that filters out many entities may still result in throttling, even if few entities are returned.</span></span>  

###### <span data-ttu-id="be4e7-572"><a name="subheading33"></a>Проекция</span><span class="sxs-lookup"><span data-stu-id="be4e7-572"><a name="subheading33"></a>Projection</span></span>
<span data-ttu-id="be4e7-573">Если клиентское приложение должно только ограниченный набор свойств из hello сущностей в таблице, можно использовать размер hello toolimit проекции hello возвращаемого набора данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-573">If your client application needs only a limited set of properties from hello entities in your table, you can use projection toolimit hello size of hello returned data set.</span></span> <span data-ttu-id="be4e7-574">При фильтрации это помогает tooreduce сетевой нагрузки и обработка на клиенте.</span><span class="sxs-lookup"><span data-stu-id="be4e7-574">As with filtering, this helps tooreduce network load and client processing.</span></span>  

##### <span data-ttu-id="be4e7-575"><a name="subheading34"></a>Денормализация</span><span class="sxs-lookup"><span data-stu-id="be4e7-575"><a name="subheading34"></a>Denormalization</span></span>
<span data-ttu-id="be4e7-576">В отличие от работы с реляционными базами данных hello методики для эффективного выполнения запросов данных таблицы привести toodenormalizing данных.</span><span class="sxs-lookup"><span data-stu-id="be4e7-576">Unlike working with relational databases, hello proven practices for efficiently querying table data lead toodenormalizing your data.</span></span> <span data-ttu-id="be4e7-577">То есть, дублирование hello и тех же данных в нескольких сущностях (одно для каждого ключа может использовать данные hello toofind) toominimize hello количество сущностей, что запрос должен сканировать потребности toofind hello данных hello клиента, а не tooscan большое число toofind сущностей Hello данные приложению.</span><span class="sxs-lookup"><span data-stu-id="be4e7-577">That is, duplicating hello same data in multiple entities (one for each key you may use toofind hello data) toominimize hello number of entities that a query must scan toofind hello data hello client needs, rather than having tooscan large numbers of entities toofind hello data your application needs.</span></span>  <span data-ttu-id="be4e7-578">Например, в веб-сайт электронной коммерции, может потребоваться toofind заказ обоих по Идентификатору клиента hello (приведите заказов этого клиента) и по дате hello (приведите заказы в день).</span><span class="sxs-lookup"><span data-stu-id="be4e7-578">For example, in an e-commerce website, you may want toofind an order both by hello customer ID (give me this customer's orders) and by hello date (give me orders on a date).</span></span>  <span data-ttu-id="be4e7-579">В хранилище таблиц, это лучший сущности toostore hello (или tooit ссылку) дважды: один раз с именем таблицы, PK и RK toofacilitate поиск по Идентификатору клиента, один раз toofacilitate его поиск по дате hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-579">In Table Storage, it is best toostore hello entity (or a reference tooit) twice – once with Table Name, PK, and RK toofacilitate finding by customer ID, once toofacilitate finding it by hello date.</span></span>  

#### <a name="insertupdatedelete"></a><span data-ttu-id="be4e7-580">Вставить, обновить, удалить</span><span class="sxs-lookup"><span data-stu-id="be4e7-580">Insert/Update/Delete</span></span>
<span data-ttu-id="be4e7-581">В этом разделе описываются проверенные методы изменения сущностей, хранящихся в службе таблиц hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-581">This section describes proven practices for modifying entities stored in hello table service.</span></span>  

##### <span data-ttu-id="be4e7-582"><a name="subheading35"></a>Пакетная обработка</span><span class="sxs-lookup"><span data-stu-id="be4e7-582"><a name="subheading35"></a>Batching</span></span>
<span data-ttu-id="be4e7-583">Пакетные транзакции известны как транзакции группы сущностей (ETG) в хранилище Azure; все операции hello в ETG должны быть в одной секции в одной таблице.</span><span class="sxs-lookup"><span data-stu-id="be4e7-583">Batch transactions are known as Entity Group Transactions (ETG) in Azure Storage; all hello operations within an ETG must be on a single partition in a single table.</span></span> <span data-ttu-id="be4e7-584">По возможности используйте ETGs tooperform вставок, обновлений и удалений в пакетах.</span><span class="sxs-lookup"><span data-stu-id="be4e7-584">Where possible, use ETGs tooperform inserts, updates, and deletes in batches.</span></span> <span data-ttu-id="be4e7-585">Это уменьшает hello количество циклов приема-передачи от сервера toohello клиентских приложений, уменьшает hello количество оплачиваемых транзакции (ETG считается как одна транзакция выставления и может содержать копирование операций сохранения too100), позволяет atomic обновления (успешного выполнения всех операций или все завершиться сбоем в ETG).</span><span class="sxs-lookup"><span data-stu-id="be4e7-585">This reduces hello number of round trips from your client application toohello server, reduces hello number of billable transactions (an ETG counts as a single transaction for billing purposes and can contain up too100 storage operations), and enables atomic updates (all operations succeed or all fail within an ETG).</span></span> <span data-ttu-id="be4e7-586">Среды с большими задержками, такие как мобильные устройства, в результате использования транзакций групп сущностей получают большие преимущества.</span><span class="sxs-lookup"><span data-stu-id="be4e7-586">Environments with high latencies such as mobile devices will benefit greatly from using ETGs.</span></span>  

##### <span data-ttu-id="be4e7-587"><a name="subheading36"></a>Операция Upsert</span><span class="sxs-lookup"><span data-stu-id="be4e7-587"><a name="subheading36"></a>Upsert</span></span>
<span data-ttu-id="be4e7-588">Используйте табличные операции **Upsert** как можно чаще.</span><span class="sxs-lookup"><span data-stu-id="be4e7-588">Use table **Upsert** operations wherever possible.</span></span> <span data-ttu-id="be4e7-589">Существует два типа операций **Upsert**. Оба они могут быть более эффективными, чем обычные операции **Insert** и **Update**:</span><span class="sxs-lookup"><span data-stu-id="be4e7-589">There are two types of **Upsert**, both of which can be more efficient than a traditional **Insert** and **Update** operations:</span></span>  

* <span data-ttu-id="be4e7-590">**InsertOrMerge**: следует использовать, если вы хотите tooupload подмножество свойств сущности hello, но не уверены ли hello сущность уже существует.</span><span class="sxs-lookup"><span data-stu-id="be4e7-590">**InsertOrMerge**: Use this when you want tooupload a subset of hello entity's properties, but aren't sure whether hello entity already exists.</span></span> <span data-ttu-id="be4e7-591">Если существует hello объекта, этот вызов обновляет свойства hello, включенных в hello **Upsert** операции и оставляет все существующие свойства, как они являются, если hello сущность не существует, он вставляет новую сущность hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-591">If hello entity exists, this call updates hello properties included in hello **Upsert** operation, and leaves all existing properties as they are, if hello entity does not exist, it inserts hello new entity.</span></span> <span data-ttu-id="be4e7-592">Это аналогично toousing проекции в запросе, в том, что требуется только tooupload hello свойства, которые изменяются.</span><span class="sxs-lookup"><span data-stu-id="be4e7-592">This is similar toousing projection in a query, in that you only need tooupload hello properties that are changing.</span></span>
* <span data-ttu-id="be4e7-593">**InsertOrReplace**: следует использовать, если требуется tooupload совершенно новые сущности, но вы не уверены, является ли он уже существует.</span><span class="sxs-lookup"><span data-stu-id="be4e7-593">**InsertOrReplace**: Use this when you want tooupload an entirely new entity, but you aren't sure whether it already exists.</span></span> <span data-ttu-id="be4e7-594">Вам следует использовать только если известно, что hello вновь отправлен сущности является полностью ошибкой, поскольку он полностью переписывает hello старая сущность.</span><span class="sxs-lookup"><span data-stu-id="be4e7-594">You should only use this when you know that hello newly uploaded entity is entirely correct because it completely overwrites hello old entity.</span></span> <span data-ttu-id="be4e7-595">Например можно tooupdate hello сущность, которая хранит текущее расположение пользователя независимо от того, является ли приложение hello ранее сохраненные данные расположение для пользователя hello. Новая сущность расположение Hello завершена, и все сведения из любой предыдущей сущности не требуется.</span><span class="sxs-lookup"><span data-stu-id="be4e7-595">For example, you want tooupdate hello entity that stores a user's current location regardless of whether or not hello application has previously stored location data for hello user; hello new location entity is complete, and you do not need any information from any previous entity.</span></span>

##### <span data-ttu-id="be4e7-596"><a name="subheading37"></a>Хранение ряда данных в одной сущности</span><span class="sxs-lookup"><span data-stu-id="be4e7-596"><a name="subheading37"></a>Storing Data Series in a Single Entity</span></span>
<span data-ttu-id="be4e7-597">В некоторых случаях приложение сохраняет ряд данных, что часто требуется tooretrieve за один раз: например, приложение может отслеживать использование ЦП по времени в порядке tooplot последовательного плана данных hello из hello последние 24 часа.</span><span class="sxs-lookup"><span data-stu-id="be4e7-597">Sometimes, an application stores a series of data that it frequently needs tooretrieve all at once: for example, an application might track CPU usage over time in order tooplot a rolling chart of hello data from hello last 24 hours.</span></span> <span data-ttu-id="be4e7-598">Один из подходов заключается сущность toohave одной таблицы в час, с каждой сущности, представляющий конкретный час и хранения hello ЦП в течение этого часа.</span><span class="sxs-lookup"><span data-stu-id="be4e7-598">One approach is toohave one table entity per hour, with each entity representing a specific hour and storing hello CPU usage for that hour.</span></span> <span data-ttu-id="be4e7-599">tooplot эти данные приложения hello должен tooretrieve hello сущностей хранения данных hello из hello 24 часа, последние.</span><span class="sxs-lookup"><span data-stu-id="be4e7-599">tooplot this data, hello application needs tooretrieve hello entities holding hello data from hello 24 most recent hours.</span></span>  

<span data-ttu-id="be4e7-600">Кроме того, приложение может хранить использования hello ЦП за каждый час как отдельные свойства одной сущности: tooupdate каждый час, приложение может использовать отдельный **InsertOrMerge Upsert** вызова tooupdate hello значение для hello самые последние час.</span><span class="sxs-lookup"><span data-stu-id="be4e7-600">Alternatively, your application could store hello CPU usage for each hour as a separate property of a single entity: tooupdate each hour, your application can use a single **InsertOrMerge Upsert** call tooupdate hello value for hello most recent hour.</span></span> <span data-ttu-id="be4e7-601">данные tooplot hello, hello приложению требуются только одной сущности вместо 24, выполняющего запрос очень эффективен tooretrieve (см. выше обсуждения на [область запроса](#subheading30)).</span><span class="sxs-lookup"><span data-stu-id="be4e7-601">tooplot hello data, hello application only needs tooretrieve a single entity instead of 24, making for a very efficient query (see above discussion on [query scope](#subheading30)).</span></span>

##### <span data-ttu-id="be4e7-602"><a name="subheading38"></a>Хранение структурированных данных в BLOB-объектах</span><span class="sxs-lookup"><span data-stu-id="be4e7-602"><a name="subheading38"></a>Storing structured data in blobs</span></span>
<span data-ttu-id="be4e7-603">Иногда кажется, что структурированные данные должны попадать в таблицы, но диапазоны сущностей всегда извлекаются вместе и могут быть вставлены пакетным образом.</span><span class="sxs-lookup"><span data-stu-id="be4e7-603">Sometimes structured data feels like it should go in tables, but ranges of entities are always retrieved together and can be batch inserted.</span></span>  <span data-ttu-id="be4e7-604">Хорошим примером такой ситуации является файл журнала.</span><span class="sxs-lookup"><span data-stu-id="be4e7-604">A good example of this is a log file.</span></span>  <span data-ttu-id="be4e7-605">В этом случае несколько минут из журнала можно укомплектовать в пакет, затем произвести их вставку и потом, с тем же успехом, извлекать несколько минут журнала за раз.</span><span class="sxs-lookup"><span data-stu-id="be4e7-605">In this case, you can batch several minutes of logs, insert them, and then you are always retrieving several minutes of logs at a time as well.</span></span>  <span data-ttu-id="be4e7-606">В этом случае для повышения производительности, это лучше toouse больших двоичных объектов, а не таблиц, так как вы может значительно снизить количество hello записи/возвращаемые объекты, а также обычно hello число запросов, требующих.</span><span class="sxs-lookup"><span data-stu-id="be4e7-606">In this case, for performance, it's better toouse blobs instead of tables, since you can significantly reduce hello number of objects written/returned, as well as usually hello number of requests that need made.</span></span>  

## <a name="queues"></a><span data-ttu-id="be4e7-607">Очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-607">Queues</span></span>
<span data-ttu-id="be4e7-608">В добавление toohello проверенные методики [все службы](#allservices) было описано выше, применяются следующие hello проверенные методики специально toohello службы очередей.</span><span class="sxs-lookup"><span data-stu-id="be4e7-608">In addition toohello proven practices for [All Services](#allservices) described previously, hello following proven practices apply specifically toohello queue service.</span></span>  

### <span data-ttu-id="be4e7-609"><a name="subheading39"></a>Ограничения масштабируемости</span><span class="sxs-lookup"><span data-stu-id="be4e7-609"><a name="subheading39"></a>Scalability Limits</span></span>
<span data-ttu-id="be4e7-610">Одна очередь может обрабатывать около 2000 сообщений (размером 1 КБ каждое) в секунду (здесь каждая операция AddMessage, GetMessage и DeleteMessage считается сообщением).</span><span class="sxs-lookup"><span data-stu-id="be4e7-610">A single queue can process approximately 2,000 messages (1KB each) per second (each AddMessage, GetMessage, and DeleteMessage count as a message here).</span></span> <span data-ttu-id="be4e7-611">Если этого недостаточно для вашего приложения, необходимо использовать несколько очередей и распределяться сообщений hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-611">If this is insufficient for your application, you should use multiple queues and spread hello messages across them.</span></span>  

<span data-ttu-id="be4e7-612">Текущие целевые показатели масштабируемости можно посмотреть на странице [Цели масштабируемости хранилища и производительности Azure](storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="be4e7-612">View current scalability targets at [Azure Storage Scalability and Performance Targets](storage-scalability-targets.md).</span></span>  

### <span data-ttu-id="be4e7-613"><a name="subheading40"></a>Отключение алгоритма Nagle</span><span class="sxs-lookup"><span data-stu-id="be4e7-613"><a name="subheading40"></a>Nagle Off</span></span>
<span data-ttu-id="be4e7-614">Разделе hello таблицы конфигурацию, которая описывает алгоритм Nagle hello — алгоритм Nagle hello обычно плохо сказывается на производительности hello очереди запросов, и оно должно быть отключено.</span><span class="sxs-lookup"><span data-stu-id="be4e7-614">See hello section on table configuration that discusses hello Nagle algorithm — hello Nagle algorithm is generally bad for hello performance of queue requests, and you should disable it.</span></span>  

### <span data-ttu-id="be4e7-615"><a name="subheading41"></a>Размер сообщения</span><span class="sxs-lookup"><span data-stu-id="be4e7-615"><a name="subheading41"></a>Message Size</span></span>
<span data-ttu-id="be4e7-616">Производительность и масштабируемость очередей уменьшается по мере увеличения размера сообщения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-616">Queue performance and scalability decreases as message size increases.</span></span> <span data-ttu-id="be4e7-617">Необходимо поместить только hello hello приемника потребности в сообщении.</span><span class="sxs-lookup"><span data-stu-id="be4e7-617">You should place only hello information hello receiver needs in a message.</span></span>  

### <span data-ttu-id="be4e7-618"><a name="subheading42"></a>Пакетное извлечение</span><span class="sxs-lookup"><span data-stu-id="be4e7-618"><a name="subheading42"></a>Batch Retrieval</span></span>
<span data-ttu-id="be4e7-619">Вы можете получать too32 сообщений из очереди в рамках одной операции.</span><span class="sxs-lookup"><span data-stu-id="be4e7-619">You can retrieve up too32 messages from a queue in a single operation.</span></span> <span data-ttu-id="be4e7-620">Это позволяет сократить hello количество обращений из клиентского приложения hello, что особенно полезно в средах, таких как мобильные устройства с большой задержкой.</span><span class="sxs-lookup"><span data-stu-id="be4e7-620">This can reduce hello number of roundtrips from hello client application, which is especially useful for environments, such as mobile devices, with high latency.</span></span>  

### <span data-ttu-id="be4e7-621"><a name="subheading43"></a>Интервал опроса очереди</span><span class="sxs-lookup"><span data-stu-id="be4e7-621"><a name="subheading43"></a>Queue Polling Interval</span></span>
<span data-ttu-id="be4e7-622">Большинство приложений извлекать сообщения из очереди, который может быть одним из источников наибольшее hello транзакций для этого приложения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-622">Most applications poll for messages from a queue, which can be one of hello largest sources of transactions for that application.</span></span> <span data-ttu-id="be4e7-623">Выберите интервал опроса рационально: опроса слишком часто может привести к tooapproach вашего приложения hello целевые показатели масштабируемости для очереди hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-623">Select your polling interval wisely: polling too frequently could cause your application tooapproach hello scalability targets for hello queue.</span></span> <span data-ttu-id="be4e7-624">Тем не менее на 200 000 транзакций для 0,01 $ (во время hello написания) опроса после каждую секунду в течение месяца будет стоить меньше 15 центам стоимости т один процессор не обычно коэффициент, на который влияет на Выбор интервала опроса.</span><span class="sxs-lookup"><span data-stu-id="be4e7-624">However, at 200,000 transactions for $0.01 (at hello time of writing), a single processor polling once every second for a month would cost less than 15 cents so cost is not typically a factor that affects your choice of polling interval.</span></span>  

<span data-ttu-id="be4e7-625">Актуальные сведения о стоимости см. на странице [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/).</span><span class="sxs-lookup"><span data-stu-id="be4e7-625">For up-to-date cost information, see [Azure Storage Pricing](https://azure.microsoft.com/pricing/details/storage/).</span></span>  

### <span data-ttu-id="be4e7-626"><a name="subheading44"></a>UpdateMessage</span><span class="sxs-lookup"><span data-stu-id="be4e7-626"><a name="subheading44"></a>UpdateMessage</span></span>
<span data-ttu-id="be4e7-627">Можно использовать **UpdateMessage** tooincrease hello невидимости истечения времени ожидания или tooupdate сведения о состоянии сообщения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-627">You can use **UpdateMessage** tooincrease hello invisibility timeout or tooupdate state information of a message.</span></span> <span data-ttu-id="be4e7-628">Это мощный, помните, что каждый **UpdateMessage** операции учитывается при подсчете целевой показатель масштабируемости hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-628">While this is powerful, remember that each **UpdateMessage** operation counts towards hello scalability target.</span></span> <span data-ttu-id="be4e7-629">Тем не менее это может быть намного более эффективным подходом чем рабочий процесс, который передает задания из очереди toohello Далее при завершении каждого шага задания hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-629">However, this can be a much more efficient approach than having a workflow that passes a job from one queue toohello next, as each step of hello job is completed.</span></span> <span data-ttu-id="be4e7-630">С помощью hello **UpdateMessage** операция позволяет вашего приложения toosave hello задания toohello сообщение о состоянии и затем продолжить работу, вместо повторного очереди приветственное сообщение для следующего шага задания hello каждый раз при завершении шага hello.</span><span class="sxs-lookup"><span data-stu-id="be4e7-630">Using hello **UpdateMessage** operation allows your application toosave hello job state toohello message and then continue working, instead of re-queuing hello message for hello next step of hello job every time a step completes.</span></span>  

<span data-ttu-id="be4e7-631">Дополнительные сведения см. в статье hello [как: изменить содержимое hello сообщение из очереди](storage-dotnet-how-to-use-queues.md#change-the-contents-of-a-queued-message).</span><span class="sxs-lookup"><span data-stu-id="be4e7-631">For more information, see hello article [How to: Change hello contents of a queued message](storage-dotnet-how-to-use-queues.md#change-the-contents-of-a-queued-message).</span></span>  

### <span data-ttu-id="be4e7-632"><a name="subheading45"></a>Архитектура приложения</span><span class="sxs-lookup"><span data-stu-id="be4e7-632"><a name="subheading45"></a>Application architecture</span></span>
<span data-ttu-id="be4e7-633">Масштабируемая архитектура приложения следует использовать toomake очереди.</span><span class="sxs-lookup"><span data-stu-id="be4e7-633">You should use queues toomake your application architecture scalable.</span></span> <span data-ttu-id="be4e7-634">Hello ниже приведены некоторые способы использования очередей toomake масштабируемое приложения:</span><span class="sxs-lookup"><span data-stu-id="be4e7-634">hello following lists some ways you can use queues toomake your application more scalable:</span></span>  

* <span data-ttu-id="be4e7-635">Можно использовать для обработки очередей toocreate невыполненной работы и сглаживают рабочих нагрузок в приложении.</span><span class="sxs-lookup"><span data-stu-id="be4e7-635">You can use queues toocreate backlogs of work for processing and smooth out workloads in your application.</span></span> <span data-ttu-id="be4e7-636">Например можно поставить в очередь запросы от пользователей tooperform процессора вычислительных операций, например изменение размера переданные изображения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-636">For example, you could queue up requests from users tooperform processor intensive work such as resizing uploaded images.</span></span>
* <span data-ttu-id="be4e7-637">Можно использовать очереди toodecouple части приложения, чтобы масштабировать их независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="be4e7-637">You can use queues toodecouple parts of your application so that you can scale them independently.</span></span> <span data-ttu-id="be4e7-638">Например, клиент веб-интерфейса может разместить результаты опроса пользователей в очередь для последующего анализа и хранения.</span><span class="sxs-lookup"><span data-stu-id="be4e7-638">For example, a web front-end could place survey results from users into a queue for later analysis and storage.</span></span> <span data-ttu-id="be4e7-639">Вы может добавить дополнительные рабочей роли экземпляров tooprocess hello данных очередь при необходимости.</span><span class="sxs-lookup"><span data-stu-id="be4e7-639">You could add more worker role instances tooprocess hello queue data as required.</span></span>  

## <a name="conclusion"></a><span data-ttu-id="be4e7-640">Заключение</span><span class="sxs-lookup"><span data-stu-id="be4e7-640">Conclusion</span></span>
<span data-ttu-id="be4e7-641">В этой статье рассматриваются некоторые из наиболее распространенных hello проверенных и рекомендации по оптимизации производительности при использовании хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="be4e7-641">This article discussed some of hello most common, proven practices for optimizing performance when using Azure Storage.</span></span> <span data-ttu-id="be4e7-642">Мы стимулировать каждый tooassess разработчика приложения свои приложения для каждой hello выше рекомендациям и примите к сведению действуя hello рекомендации tooget высокую производительность для приложений, использующих хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="be4e7-642">We encourage every application developer tooassess their application against each of hello above practices and consider acting on hello recommendations tooget great performance for their applications that use Azure Storage.</span></span>
