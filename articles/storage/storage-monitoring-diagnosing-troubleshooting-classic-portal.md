---
title: "aaaMonitor, диагностика и устранение неполадок хранилища | Документы Microsoft"
description: "Используйте функции, такие как аналитики хранилища, ведение журнала на стороне клиента и другие tooidentify сторонних средств диагностики и устранения проблем, связанных с хранилищем Azure."
services: storage
documentationcenter: 
author: fhryo-msft
manager: jahogg
editor: tysonn
ms.assetid: da57e844-705d-449d-8ed5-5607d2a6170b
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/28/2017
ms.author: fhryo-msft
ms.openlocfilehash: 294a0bd27bd03913e01a719c0175cab827d58225
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-diagnose-and-troubleshoot-microsoft-azure-storage"></a><span data-ttu-id="8c9ce-103">Мониторинг, диагностика и устранение неисправностей службы хранилища Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="8c9ce-103">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>
[!INCLUDE [storage-selector-portal-monitoring-diagnosing-troubleshooting](../../includes/storage-selector-portal-monitoring-diagnosing-troubleshooting.md)]

## <a name="overview"></a><span data-ttu-id="8c9ce-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="8c9ce-104">Overview</span></span>
<span data-ttu-id="8c9ce-105">Диагностика и устранение неисправностей в распределенном приложении, размещенном в облачной среде, может представлять большую сложность в сравнении с традиционными средами.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-105">Diagnosing and troubleshooting issues in a distributed application hosted in a cloud environment can be more complex than in traditional environments.</span></span> <span data-ttu-id="8c9ce-106">Развертывание приложений можно выполнять в инфраструктуре PaaS или IaaS, на площадке заказчика, на мобильном устройстве или в среде, в которой имеется произвольное сочетание таких устройств.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-106">Applications can be deployed in a PaaS or IaaS infrastructure, on premises, on a mobile device, or in some combination of these.</span></span> <span data-ttu-id="8c9ce-107">Как правило, приложения сетевой трафик может проходить общедоступных и частных сетях и ваше приложение может использовать несколько технологий хранения данных, таких как таблиц хранилища Microsoft Azure, большие двоичные объекты, очереди или хранит файлы в данных tooother Добавление таких как реляционные и баз данных документов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-107">Typically, your application's network traffic may traverse public and private networks and your application may use multiple storage technologies such as Microsoft Azure Storage Tables, Blobs, Queues, or Files in addition tooother data stores such as relational and document databases.</span></span>

<span data-ttu-id="8c9ce-108">toomanage такие приложения успешно необходимо отслеживать их заранее и понять, каким образом toodiagnose и устранения неполадок любого рода их и их зависимые технологии.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-108">toomanage such applications successfully you should monitor them proactively and understand how toodiagnose and troubleshoot all aspects of them and their dependent technologies.</span></span> <span data-ttu-id="8c9ce-109">Имени пользователя служб хранилища Azure, необходимо постоянно отслеживать hello служб хранилища, в приложении используется любой непредвиденных изменений в поведение (например, медленнее, чем обычные отклика) и использовать ведение журнала toocollect более подробные данные и tooanalyze Ошибка в глубину.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-109">As a user of Azure Storage services, you should continuously monitor hello Storage services your application uses for any unexpected changes in behavior (such as slower than usual response times), and use logging toocollect more detailed data and tooanalyze a problem in depth.</span></span> <span data-ttu-id="8c9ce-110">Hello диагностики, приобретаемых мониторинга и ведения журнала сведения вы toodetermine hello первопричину hello выдачи обнаружил приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-110">hello diagnostics information you obtain from both monitoring and logging will help you toodetermine hello root cause of hello issue your application encountered.</span></span> <span data-ttu-id="8c9ce-111">Вы можете устранить проблему hello и определить hello соответствующие действия может занять tooremediate его.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-111">Then you can troubleshoot hello issue and determine hello appropriate steps you can take tooremediate it.</span></span> <span data-ttu-id="8c9ce-112">Хранилища Azure — это основное службы Azure и формирует важной частью hello большинство решений, что клиенты развернуть toohello инфраструктуры Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-112">Azure Storage is a core Azure service, and forms an important part of hello majority of solutions that customers deploy toohello Azure infrastructure.</span></span> <span data-ttu-id="8c9ce-113">Хранилище Azure включает в себя возможности toosimplify мониторинг, диагностика и устранение неполадок хранилища в приложениях на основе облака.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-113">Azure Storage includes capabilities toosimplify monitoring, diagnosing, and troubleshooting storage issues in your cloud-based applications.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-114">Учетные записи хранилища с типом репликации из зоны избыточности хранилища (ZRS) имеют hello показателей или возможность ведения журнала, которые включены в данный момент.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-114">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have hello metrics or logging capability enabled at this time.</span></span> 
> 
> 

<span data-ttu-id="8c9ce-115">Практическое руководство tooend процесс устранения неполадок в приложениях хранилища Azure, в разделе [End-to-End Устранение неполадок с помощью метрик хранилища Azure и ведение журнала, AzCopy и анализатор сообщений](storage-e2e-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-115">For a hands-on guide tooend-to-end troubleshooting in Azure Storage applications, see [End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer](storage-e2e-troubleshooting.md).</span></span>

* <span data-ttu-id="8c9ce-116">[Введение]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-116">[Introduction]</span></span>
  * <span data-ttu-id="8c9ce-117">[Структура руководства]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-117">[How this guide is organized]</span></span>
* <span data-ttu-id="8c9ce-118">[мониторинга службы хранения]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-118">[Monitoring your storage service]</span></span>
  * <span data-ttu-id="8c9ce-119">[Мониторинг работоспособности службы]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-119">[Monitoring service health]</span></span>
  * <span data-ttu-id="8c9ce-120">[Мониторинг мощностей]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-120">[Monitoring capacity]</span></span>
  * <span data-ttu-id="8c9ce-121">[Мониторинг доступности]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-121">[Monitoring availability]</span></span>
  * <span data-ttu-id="8c9ce-122">[Мониторинг производительности]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-122">[Monitoring performance]</span></span>
* <span data-ttu-id="8c9ce-123">[Диагностика неполадок хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-123">[Diagnosing storage issues]</span></span>
  * <span data-ttu-id="8c9ce-124">[Проблемы с работоспособностью службы]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-124">[Service health issues]</span></span>
  * <span data-ttu-id="8c9ce-125">[Проблемы с производительностью]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-125">[Performance issues]</span></span>
  * <span data-ttu-id="8c9ce-126">[Диагностика ошибок]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-126">[Diagnosing errors]</span></span>
  * <span data-ttu-id="8c9ce-127">[Проблемы с эмулятором хранения]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-127">[Storage emulator issues]</span></span>
  * <span data-ttu-id="8c9ce-128">[Инструменты для ведения журналов хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-128">[Storage logging tools]</span></span>
  * <span data-ttu-id="8c9ce-129">[Использование инструментов для ведения сетевого журнала]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-129">[Using network logging tools]</span></span>
* <span data-ttu-id="8c9ce-130">[конца в конец трассировки]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-130">[End-to-end tracing]</span></span>
  * <span data-ttu-id="8c9ce-131">[Сопоставление данных журналов]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-131">[Correlating log data]</span></span>
  * <span data-ttu-id="8c9ce-132">[Идентификатор запроса клиента]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-132">[Client request ID]</span></span>
  * <span data-ttu-id="8c9ce-133">[код запроса сервера]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-133">[Server request ID]</span></span>
  * <span data-ttu-id="8c9ce-134">[Метки времени]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-134">[Timestamps]</span></span>
* <span data-ttu-id="8c9ce-135">[рекомендации по ее устранению]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-135">[Troubleshooting guidance]</span></span>
  * <span data-ttu-id="8c9ce-136">[метрики показывают AverageE2ELatency высокой и низкой AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-136">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
  * <span data-ttu-id="8c9ce-137">[Метрики показывают низкое AverageE2ELatency и низким AverageServerLatency, но клиент hello наблюдается большая задержка]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-137">[Metrics show low AverageE2ELatency and low AverageServerLatency but hello client is experiencing high latency]</span></span>
  * <span data-ttu-id="8c9ce-138">[Метрики содержат высокие значения AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-138">[Metrics show high AverageServerLatency]</span></span>
  * <span data-ttu-id="8c9ce-139">[При доставке сообщений в очередь возникают неожиданные задержки]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-139">[You are experiencing unexpected delays in message delivery on a queue]</span></span>
  * <span data-ttu-id="8c9ce-140">[Метрики указывают на увеличение значения PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-140">[Metrics show an increase in PercentThrottlingError]</span></span>
  * <span data-ttu-id="8c9ce-141">[метрики увеличить PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-141">[Metrics show an increase in PercentTimeoutError]</span></span>
  * <span data-ttu-id="8c9ce-142">[Метрики показывают увеличение значения PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-142">[Metrics show an increase in PercentNetworkError]</span></span>
  * <span data-ttu-id="8c9ce-143">[Hello клиент получает сообщения HTTP 403 (запрещено)]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-143">[hello client is receiving HTTP 403 (Forbidden) messages]</span></span>
  * <span data-ttu-id="8c9ce-144">[Получает ошибки HTTP 404 (не найдено) сообщения приветствия клиента]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-144">[hello client is receiving HTTP 404 (Not found) messages]</span></span>
  * <span data-ttu-id="8c9ce-145">[Получает HTTP 409 (конфликт) сообщения приветствия клиента]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-145">[hello client is receiving HTTP 409 (Conflict) messages]</span></span>
  * <span data-ttu-id="8c9ce-146">[метрики низкий PercentSuccess или аналитика записи журнала операций с состояние транзакции ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-146">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>
  * <span data-ttu-id="8c9ce-147">[Метрики объема показывают неожиданное увеличение использования объема хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-147">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>
  * <span data-ttu-id="8c9ce-148">[Происходит неожиданный перезапуск виртуальных машин, имеющих большое количество виртуальных жестких дисков]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-148">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>
  * <span data-ttu-id="8c9ce-149">[Проблемы возникают из-за использование эмулятора хранилища hello для разработки или тестирования]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-149">[Your issue arises from using hello storage emulator for development or test]</span></span>
  * <span data-ttu-id="8c9ce-150">[Возникающие проблемы с установкой hello Azure SDK для .NET]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-150">[You are encountering problems installing hello Azure SDK for .NET]</span></span>
  * <span data-ttu-id="8c9ce-151">[Возникла другая проблема со службой хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-151">[You have a different issue with a storage service]</span></span>
* <span data-ttu-id="8c9ce-152">[приложения]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-152">[Appendices]</span></span>
  * <span data-ttu-id="8c9ce-153">[приложении 1: с помощью Fiddler toocapture HTTP и HTTPS-трафика]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-153">[Appendix 1: Using Fiddler toocapture HTTP and HTTPS traffic]</span></span>
  * <span data-ttu-id="8c9ce-154">[приложении 2: сетевого трафика с помощью Wireshark toocapture]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-154">[Appendix 2: Using Wireshark toocapture network traffic]</span></span>
  * <span data-ttu-id="8c9ce-155">[приложении 3: сетевого трафика с помощью Microsoft Message Analyzer toocapture]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-155">[Appendix 3: Using Microsoft Message Analyzer toocapture network traffic]</span></span>
  * <span data-ttu-id="8c9ce-156">[Приложение 4: С помощью tooview метрики и журнала данных Excel]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-156">[Appendix 4: Using Excel tooview metrics and log data]</span></span>
  * <span data-ttu-id="8c9ce-157">[приложение 5: отслеживание с помощью Application Insights для Visual Studio Team Services]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-157">[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]</span></span>

## <span data-ttu-id="8c9ce-158"><a name="introduction"></a>Введение</span><span class="sxs-lookup"><span data-stu-id="8c9ce-158"><a name="introduction"></a>Introduction</span></span>
<span data-ttu-id="8c9ce-159">Проблемы, связанные с этого руководства показано вы как toouse функции например аналитики хранилища Azure, ведение журнала на стороне клиента в hello клиентская библиотека хранилища Azure и других tooidentify сторонних средств диагностики и устранения хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-159">This guide shows you how toouse features such as Azure Storage Analytics, client-side logging in hello Azure Storage Client Library, and other third-party tools tooidentify, diagnose, and troubleshoot Azure Storage related issues.</span></span>

![][1]

<span data-ttu-id="8c9ce-160">*Рис. 1. Мониторинг, диагностика и устранение неполадок*</span><span class="sxs-lookup"><span data-stu-id="8c9ce-160">*Figure 1 Monitoring, Diagnostics, and Troubleshooting*</span></span>

<span data-ttu-id="8c9ce-161">Это руководство предназначено предполагаемого toobe чтения преимущественно разработчиками Интернет-служб, использующих службы хранилища Azure и ИТ-специалистов, ответственных за управление таких Интернет-служб.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-161">This guide is intended toobe read primarily by developers of online services that use Azure Storage Services and IT Pros responsible for managing such online services.</span></span> <span data-ttu-id="8c9ce-162">Цель данного руководства Hello являются:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-162">hello goals of this guide are:</span></span>

* <span data-ttu-id="8c9ce-163">toohelp Ведение hello работоспособности и производительности учетных записей хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-163">toohelp you maintain hello health and performance of your Azure Storage accounts.</span></span>
* <span data-ttu-id="8c9ce-164">tooprovide вы с процессами необходимые hello и решить, если проблема или проблема в приложении относится tooAzure хранения toohelp средства.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-164">tooprovide you with hello necessary processes and tools toohelp you decide if an issue or problem in an application relates tooAzure Storage.</span></span>
* <span data-ttu-id="8c9ce-165">с функциональной рекомендации по решению проблем, связанных с tooAzure хранилища tooprovide.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-165">tooprovide you with actionable guidance for resolving problems related tooAzure Storage.</span></span>

### <span data-ttu-id="8c9ce-166"><a name="how-this-guide-is-organized"></a>Структура руководства</span><span class="sxs-lookup"><span data-stu-id="8c9ce-166"><a name="how-this-guide-is-organized"></a>How this guide is organized</span></span>
<span data-ttu-id="8c9ce-167">Здравствуйте, раздел «[мониторинга службы хранения]» описывает, каким образом toomonitor hello работоспособность и производительность служб хранения Azure с помощью метрики аналитики хранилища Azure (метрик хранилища).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-167">hello section "[Monitoring your storage service]" describes how toomonitor hello health and performance of your Azure Storage services using Azure Storage Analytics Metrics (Storage Metrics).</span></span>

<span data-ttu-id="8c9ce-168">Здравствуйте, раздел "[Диагностика неполадок хранилища]» описывает, каким образом toodiagnose проблемы с помощью Azure журнала службы аналитики хранилища (ведения журнала хранилища).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-168">hello section "[Diagnosing storage issues]" describes how toodiagnose issues using Azure Storage Analytics Logging (Storage Logging).</span></span> <span data-ttu-id="8c9ce-169">Он также описывает, как tooenable ведение журнала на стороне клиента с помощью hello средства в одном hello клиентские библиотеки, такие как hello клиентской библиотеки хранилища для .NET или hello Azure SDK для Java.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-169">It also describes how tooenable client-side logging using hello facilities in one of hello client libraries such as hello Storage Client Library for .NET or hello Azure SDK for Java.</span></span>

<span data-ttu-id="8c9ce-170">Здравствуйте, раздел «[конца в конец трассировки]» описывает, каким образом вы можете соотнести hello сведения, содержащиеся в различные файлы журналов и данных метрик.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-170">hello section "[End-to-end tracing]" describes how you can correlate hello information contained in various log files and metrics data.</span></span>

<span data-ttu-id="8c9ce-171">Здравствуйте, раздел «[рекомендации по ее устранению]» предоставляет рекомендации по устранению неполадок для некоторых hello общих хранилищах проблемы могут возникнуть.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-171">hello section "[Troubleshooting guidance]" provides troubleshooting guidance for some of hello common storage-related issues you might encounter.</span></span>

<span data-ttu-id="8c9ce-172">Hello»[приложения]» включают сведения об использовании других средств, таких как Wireshark и сетевой монитор для анализа сетевых пакетов данных, Fiddler для анализа сообщения HTTP или HTTPS и Microsoft Message Analyzer для корреляции данных журнала.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-172">hello "[Appendices]" include information about using other tools such as Wireshark and Netmon for analyzing network packet data, Fiddler for analyzing HTTP/HTTPS messages, and Microsoft Message Analyzer for correlating log data.</span></span>

## <span data-ttu-id="8c9ce-173"><a name="monitoring-your-storage-service"></a>Мониторинг службы хранилища</span><span class="sxs-lookup"><span data-stu-id="8c9ce-173"><a name="monitoring-your-storage-service"></a>Monitoring your storage service</span></span>
<span data-ttu-id="8c9ce-174">Если вы знакомы с системным монитором Windows, то можете считать, что метрики хранилища — эквивалент счетчиков службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-174">If you are familiar with Windows performance monitoring, you can think of Storage Metrics as being an Azure Storage equivalent of Windows Performance Monitor counters.</span></span> <span data-ttu-id="8c9ce-175">В метрик хранилища для можно найти полный набор показателей (счетчики монитора производительности терминологию), например доступность службы, общее число запросов tooservice или процент успешных запросов tooservice (полный список hello Доступные метрики в разделе <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">схема таблицы метрик аналитики хранилища</a> в библиотеке MSDN).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-175">In Storage Metrics you will find a comprehensive set of metrics (counters in Windows Performance Monitor terminology) such as service availability, total number of requests tooservice, or percentage of successful requests tooservice (for a full list of hello available metrics, see <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Storage Analytics Metrics Table Schema</a> on MSDN).</span></span> <span data-ttu-id="8c9ce-176">Можно указать, хотите ли вы toocollect службы хранилища hello и статистические показатели, каждый час или каждую минуту.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-176">You can specify whether you want hello storage service toocollect and aggregate metrics every hour or every minute.</span></span> <span data-ttu-id="8c9ce-177">Дополнительные сведения о tooenable метрики и монитор учетных записей хранилища. в статье <a href="http://go.microsoft.com/fwlink/?LinkId=510865" target="_blank">Включение метрик хранилища</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-177">For more information about how tooenable metrics and monitor your storage accounts, see <a href="http://go.microsoft.com/fwlink/?LinkId=510865" target="_blank">Enabling storage metrics</a> on MSDN.</span></span>

<span data-ttu-id="8c9ce-178">Можно выбрать, какие часовых метрик требуется toodisplay в hello классический портал Azure и настройка правил, уведомлять администраторов по электронной почте каждый раз, когда почасовые метрики превышает определенный порог (Дополнительные сведения см. в разделе страницы приветствия <a href="http://msdn.microsoft.com/library/azure/dn306638.aspx" target="_blank">как: Получение уведомлений об оповещениях и управление правилами генерации оповещений в Azure</a>).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-178">You can choose which hourly metrics you want toodisplay in hello Azure Classic Portal and configure rules that notify administrators by email whenever an hourly metric exceeds a particular threshold (for more information, see hello page <a href="http://msdn.microsoft.com/library/azure/dn306638.aspx" target="_blank">How to: Receive Alert Notifications and Manage Alert Rules in Azure</a>).</span></span> <span data-ttu-id="8c9ce-179">Служба хранилища Hello собирает метрики, используя максимум усилий, но не может быть записано каждой операции хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-179">hello storage service collects metrics using a best effort, but may not record every storage operation.</span></span>

<span data-ttu-id="8c9ce-180">Рис. 2 ниже показана страница монитор hello в hello классический портал Azure, где можно просмотреть метрик, таких как доступность, общее количество запросов и среднее время задержки чисел для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-180">Figure 2 below shows hello Monitor page in hello Azure Classic Portal where you can view metrics such as availability, total requests, and average latency numbers for a storage account.</span></span> <span data-ttu-id="8c9ce-181">Правила уведомления также настроен tooalert администратора при доступности падает ниже определенного уровня.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-181">A notification rule has also been set up tooalert an administrator if availability drops below a certain level.</span></span> <span data-ttu-id="8c9ce-182">Просматривать эти данные, одна область, возможных для изучения — hello таблицы службы успешно значение в процентах, менее 100% (Дополнительные сведения см в разделе hello»[метрики низкий PercentSuccess или аналитика записи журнала операций с состояние транзакции ClientOtherErrors]»).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-182">From viewing this data, one possible area for investigation is hello table service success percentage being below 100% (for more information, see hello section "[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]").</span></span>

![][2]

<span data-ttu-id="8c9ce-183">*На рисунке 2, просмотр метрик хранилища в hello классический портал Azure*</span><span class="sxs-lookup"><span data-stu-id="8c9ce-183">*Figure 2 Viewing storage metrics in hello Azure Classic Portal*</span></span>

<span data-ttu-id="8c9ce-184">Необходимо постоянно отслеживать tooensure вашего приложения Azure, они являются работоспособными и выполнение, как ожидалось:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-184">You should continuously monitor your Azure applications tooensure they are healthy and performing as expected by:</span></span>

* <span data-ttu-id="8c9ce-185">Установление некоторые базовые показатели для приложения, включает вы toocompare текущих данных и идентификации никаких значительных изменений в поведение hello хранилища Azure и приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-185">Establishing some baseline metrics for application that will enable you toocompare current data and identify any significant changes in hello behavior of Azure storage and your application.</span></span> <span data-ttu-id="8c9ce-186">Hello значениями базовые показатели во многих случаях будут в зависимости от приложения и при работе приложения, тестирующего производительность, их необходимо установить.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-186">hello values of your baseline metrics will, in many cases, be application specific and you should establish them when you are performance testing your application.</span></span>
* <span data-ttu-id="8c9ce-187">Запись минутных метрик и их использованием toomonitor активно для непредвиденных ошибок и аномалии, например всплески подсчеты количества ошибок или частоты запросов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-187">Recording minute metrics and using them toomonitor actively for unexpected errors and anomalies such as spikes in error counts or request rates.</span></span>
* <span data-ttu-id="8c9ce-188">Запись часовых метрик и их использование toomonitor средние значения таких как среднее значение количества ошибок и частоты запросов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-188">Recording hourly metrics and using them toomonitor average values such as average error counts and request rates.</span></span>
* <span data-ttu-id="8c9ce-189">Анализ потенциальных проблем, с помощью средств диагностики, как описано далее в разделе hello»[Диагностика неполадок хранилища].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-189">Investigating potential issues using diagnostics tools as discussed later in hello section "[Diagnosing storage issues]."</span></span>

<span data-ttu-id="8c9ce-190">Hello диаграммы на рис. 3 ниже иллюстрируют, как hello вычисление среднего значения, выполняемое для почасовых метрик можно скрыть пики в действии.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-190">hello charts in Figure 3 below illustrate how hello averaging that occurs for hourly metrics can hide spikes in activity.</span></span> <span data-ttu-id="8c9ce-191">часовые показатели Hello отображать tooshow постоянной скоростью запросов, при метрики выявить колебания hello, встречаются действительно минуту hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-191">hello hourly metrics appear tooshow a steady rate of requests, while hello minute metrics reveal hello fluctuations that are really taking place.</span></span>

![][3]

<span data-ttu-id="8c9ce-192">Hello в этом разделе описываются метриках, необходимо отслеживать и почему.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-192">hello remainder of this section describes what metrics you should monitor and why.</span></span>

### <span data-ttu-id="8c9ce-193"><a name="monitoring-service-health"></a>Мониторинг работоспособности службы</span><span class="sxs-lookup"><span data-stu-id="8c9ce-193"><a name="monitoring-service-health"></a>Monitoring service health</span></span>
<span data-ttu-id="8c9ce-194">Можно использовать hello [классический портал Azure](https://manage.windowsazure.com) tooview hello работоспособности службы хранилища hello (и другие службы Azure) во всех hello Azure регионах по всему Здравствуй, мир.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-194">You can use hello [Azure Classic Portal](https://manage.windowsazure.com) tooview hello health of hello Storage service (and other Azure services) in all hello Azure regions around hello world.</span></span> <span data-ttu-id="8c9ce-195">Это позволяет toosee немедленно Если проблемы за пределами вашего элемента управления влияет hello службы хранения в регионе hello, используемого для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-195">This enables you toosee immediately if an issue outside of your control is affecting hello Storage service in hello region you use for your application.</span></span>

<span data-ttu-id="8c9ce-196">Hello классический портал Azure можно также предоставить уведомления для инцидентов, затрагивающих hello различных служб Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-196">hello Azure Classic Portal can also provide with notifications of incidents that affect hello various Azure services.</span></span>
<span data-ttu-id="8c9ce-197">Примечание: Эти сведения были доступны ранее вместе с данными журнала, на hello панель мониторинга службы Azure в <a href="http://status.azure.com" target="_blank">http://status.azure.com</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-197">Note: This information was previously available, along with historical data, on hello Azure Service Dashboard at <a href="http://status.azure.com" target="_blank">http://status.azure.com</a>.</span></span>

<span data-ttu-id="8c9ce-198">Как hello классический портал Azure собирает сведения о работоспособности из внутри hello центрами обработки данных Azure (мониторинг внутри out), кроме того, можно внедрение за пределами подход toogenerate искусственных транзакций, которые периодически доступ к вашей размещенной в Azure веб-приложения в разных местах.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-198">While hello Azure Classic Portal collects health information from inside hello Azure datacenters (inside-out monitoring), you could also consider adopting an outside-in approach toogenerate synthetic transactions that periodically access your Azure-hosted web application from multiple locations.</span></span> <span data-ttu-id="8c9ce-199">Здравствуйте, услугах, предлагаемых <a href="http://www.keynote.com/solutions/monitoring/web-monitoring" target="_blank">Keynote</a>, <a href="https://www.gomeznetworks.com/?g=1" target="_blank">Gomez</a>, и Application Insights для Visual Studio Team Services являются примерами такого подхода в за пределами.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-199">hello services offered by <a href="http://www.keynote.com/solutions/monitoring/web-monitoring" target="_blank">Keynote</a>, <a href="https://www.gomeznetworks.com/?g=1" target="_blank">Gomez</a>, and Application Insights for Visual Studio Team Services are examples of this outside-in approach.</span></span> <span data-ttu-id="8c9ce-200">Дополнительные сведения об Application Insights для Visual Studio Team Services см. в разделе приложение hello»[приложение 5: отслеживание с помощью Application Insights для Visual Studio Team Services].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-200">For more information about Application Insights for Visual Studio Team Services, see hello appendix "[Appendix 5: Monitoring with Application Insights for Visual Studio Team Services]."</span></span>

### <span data-ttu-id="8c9ce-201"><a name="monitoring-capacity"></a>Мониторинг мощностей</span><span class="sxs-lookup"><span data-stu-id="8c9ce-201"><a name="monitoring-capacity"></a>Monitoring capacity</span></span>
<span data-ttu-id="8c9ce-202">Метрики хранилища хранит только метрики емкости для службы BLOB-объектов hello потому что BLOB-объекты обычно учитывает hello наибольшее долю сохраненных данных (на момент написания статьи hello, оно не возможные toouse метрик хранилища toomonitor hello емкость таблицы и очереди) .</span><span class="sxs-lookup"><span data-stu-id="8c9ce-202">Storage Metrics only stores capacity metrics for hello blob service because blobs typically account for hello largest proportion of stored data (at hello time of writing, it is not possible toouse Storage Metrics toomonitor hello capacity of your tables and queues).</span></span> <span data-ttu-id="8c9ce-203">Эти данные можно найти в hello **$MetricsCapacityBlob** таблицы при включении мониторинга для hello службы BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-203">You can find this data in hello **$MetricsCapacityBlob** table if you have enabled monitoring for hello Blob service.</span></span> <span data-ttu-id="8c9ce-204">Метрики хранилища записывает следующие данные один раз в день, а также можно использовать значение hello hello **RowKey** toodetermine ли строка hello содержит сущность, которая связывает toouser данных (значение **данных**) или данные (аналитика значение **analytics**).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-204">Storage Metrics records this data once per day, and you can use hello value of hello **RowKey** toodetermine whether hello row contains an entity that relates toouser data (value **data**) or analytics data (value **analytics**).</span></span> <span data-ttu-id="8c9ce-205">Каждая сущность хранимых содержит сведения о hello объем используемого хранилища (**емкость** в байтах) и hello текущее число контейнеров (**ContainerCount**) и больших двоичных объектов ( **ObjectCount**) используется в учетной записи хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-205">Each stored entity contains information about hello amount of storage used (**Capacity** measured in bytes) and hello current number of containers (**ContainerCount**) and blobs (**ObjectCount**) in use in hello storage account.</span></span> <span data-ttu-id="8c9ce-206">Дополнительные сведения о метриках емкости hello, хранящихся в hello **$MetricsCapacityBlob** таблицы см. в разделе <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">схема таблицы метрик аналитики хранилища</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-206">For more information about hello capacity metrics stored in hello **$MetricsCapacityBlob** table, see <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Storage Analytics Metrics Table Schema</a> on MSDN.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-207">Эти значения для ранним предупреждением приближении hello ограничения емкости вашей учетной записи хранилища, необходимо отслеживать.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-207">You should monitor these values for an early warning that you are approaching hello capacity limits of your storage account.</span></span> <span data-ttu-id="8c9ce-208">В hello классический портал Azure, на hello **монитор** страницы для вашей учетной записи, можно добавить оповещение правил toonotify, если использование статистических хранилища превышает или ниже заданных пороговых значений.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-208">In hello Azure Classic Portal, on hello **Monitor** page for your storage account, you can add alert rules toonotify you if aggregate storage use exceeds or falls below thresholds that you specify.</span></span>
> 
> 

<span data-ttu-id="8c9ce-209">Дополнительные сведения о предполагаемый размер hello различные хранилища объектов, таких как большие двоичные объекты см hello записи блога <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx" target="_blank">основные сведения о хранилище выставления счетов Azure — пропускная способность, транзакции и емкость</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-209">For help estimating hello size of various storage objects such as blobs, see hello blog post <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/07/09/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity.aspx" target="_blank">Understanding Azure Storage Billing – Bandwidth, Transactions, and Capacity</a>.</span></span>

### <span data-ttu-id="8c9ce-210"><a name="monitoring-availability"></a>Мониторинг доступности</span><span class="sxs-lookup"><span data-stu-id="8c9ce-210"><a name="monitoring-availability"></a>Monitoring availability</span></span>
<span data-ttu-id="8c9ce-211">Необходимо отслеживать hello доступности служб хранилища hello в вашей учетной записи хранилища наблюдая за значение hello в hello **доступности** столбца в hello таблицах метрик каждый час или раз в минуту — **$ MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$ MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$ MetricsCapacityBlob**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-211">You should monitor hello availability of hello storage services in your storage account by monitoring hello value in hello **Availability** column in hello hourly or minute metrics tables — **$MetricsHourPrimaryTransactionsBlob**, **$MetricsHourPrimaryTransactionsTable**, **$MetricsHourPrimaryTransactionsQueue**, **$MetricsMinutePrimaryTransactionsBlob**, **$MetricsMinutePrimaryTransactionsTable**, **$MetricsMinutePrimaryTransactionsQueue**, **$MetricsCapacityBlob**.</span></span> <span data-ttu-id="8c9ce-212">Hello **доступности** столбец содержит процентное значение, указывающее доступность hello hello службы или операции hello API, представляемого строкой hello (hello **RowKey** показывает, содержит ли строка hello метрики для службы hello в целом или для определенной операции API).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-212">hello **Availability** column contains a percentage value that indicates hello availability of hello service or hello API operation represented by hello row (hello **RowKey** shows if hello row contains metrics for hello service as a whole or for a specific API operation).</span></span>

<span data-ttu-id="8c9ce-213">Если значение меньше 100 %, это означает, что некоторые запросы к хранилищу не были выполнены.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-213">Any value less than 100% indicates that some storage requests are failing.</span></span> <span data-ttu-id="8c9ce-214">Можно увидеть, почему сбой изучив hello других столбцов в данных метрик hello, отображение номеров hello запросов с различные типы ошибок, такие как **ServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-214">You can see why they are failing by examining hello other columns in hello metrics data that show hello numbers of requests with different error types such as **ServerTimeoutError**.</span></span> <span data-ttu-id="8c9ce-215">Следует ожидать toosee **доступности** Осень временно менее 100%, по причинам, например время ожидания временного сервера службы hello перемещает запрос балансировать секции toobetter; hello логику в клиентском приложении повторных попыток должен обрабатывать такие временные условия.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-215">You should expect toosee **Availability** fall temporarily below 100% for reasons such as transient server timeouts while hello service moves partitions toobetter load-balance request; hello retry logic in your client application should handle such intermittent conditions.</span></span> <span data-ttu-id="8c9ce-216">Страница приветствия <a href="http://msdn.microsoft.com/library/azure/hh343260.aspx" target="_blank"> </a> списки hello типы транзакций, которые метрик хранилища включает в его **доступности** вычисления.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-216">hello page <a href="http://msdn.microsoft.com/library/azure/hh343260.aspx" target="_blank"></a> lists hello transaction types that Storage Metrics includes in its **Availability** calculation.</span></span>

<span data-ttu-id="8c9ce-217">В hello классический портал Azure, на hello **монитор** страницы для вашей учетной записи, можно добавить правила оповещения toonotify вы Если **доступности** для службы падает ниже порогового значения, которое можно указать.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-217">In hello Azure Classic Portal, on hello **Monitor** page for your storage account, you can add alert rules toonotify you if **Availability** for a service falls below a threshold that you specify.</span></span>

<span data-ttu-id="8c9ce-218">Hello»[рекомендации по ее устранению]"данного руководства описываются некоторые общие хранилища службы проблемы связанные tooavailability.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-218">hello "[Troubleshooting guidance]" section of this guide describes some common storage service issues related tooavailability.</span></span>

### <span data-ttu-id="8c9ce-219"><a name="monitoring-performance"></a>Мониторинг производительности</span><span class="sxs-lookup"><span data-stu-id="8c9ce-219"><a name="monitoring-performance"></a>Monitoring performance</span></span>
<span data-ttu-id="8c9ce-220">производительность hello toomonitor hello служб хранилища, можно использовать hello следующую метрики из hello каждый час и минуты таблицах метрик.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-220">toomonitor hello performance of hello storage services, you can use hello following metrics from hello hourly and minute metrics tables.</span></span>

* <span data-ttu-id="8c9ce-221">Здравствуйте, значения в hello **AverageE2ELatency** и **AverageServerLatency** Показать hello среднее время hello хранилища службы или тип операции API занимает tooprocess запросов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-221">hello values in hello **AverageE2ELatency** and **AverageServerLatency** show hello average time hello storage service or API operation type is taking tooprocess requests.</span></span> <span data-ttu-id="8c9ce-222">**AverageE2ELatency** — это мера задержка начала до конца, включающий hello время tooread hello запроса и отправка ответа hello в запросе hello tooprocess на время, затраченное toohello сложения (поэтому включает задержки в сети после запроса hello Служба хранилища hello достигает); **AverageServerLatency** — это мера только время обработки hello и поэтому исключает любые связанные задержки в сети toocommunicating с клиентом hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-222">**AverageE2ELatency** is a measure of end-to-end latency that includes hello time taken tooread hello request and send hello response in addition toohello time taken tooprocess hello request (therefore includes network latency once hello request reaches hello storage service); **AverageServerLatency** is a measure of just hello processing time and therefore excludes any network latency related toocommunicating with hello client.</span></span> <span data-ttu-id="8c9ce-223">Hello в разделе «[метрики показывают AverageE2ELatency высокой и низкой AverageServerLatency]» далее в этом руководстве, сведения о том, почему могут существовать значительные различия между этими двумя значениями.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-223">See hello section "[Metrics show high AverageE2ELatency and low AverageServerLatency]" later in this guide for a discussion of why there might be a significant difference between these two values.</span></span>
* <span data-ttu-id="8c9ce-224">Здравствуйте, значения в hello **TotalIngress** и **TotalEgress** столбцы показывают hello общий объем данных, в байтах, поступающих в tooand переходом из службы хранилища или с помощью определенного типа операции API.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-224">hello values in hello **TotalIngress** and **TotalEgress** columns show hello total amount of data, in bytes, coming in tooand going out of your storage service or through a specific API operation type.</span></span>
* <span data-ttu-id="8c9ce-225">Здравствуйте, значения в hello **TotalRequests** получения столбца Показать hello общее число запросов, которые hello службы хранилища из API-операции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-225">hello values in hello **TotalRequests** column show hello total number of requests that hello storage service of API operation is receiving.</span></span> <span data-ttu-id="8c9ce-226">**TotalRequests** — общее количество запросов, получаемых службой хранилища hello hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-226">**TotalRequests** is hello total number of requests that hello storage service receives.</span></span>

<span data-ttu-id="8c9ce-227">Обычно выполняется мониторинг неожиданных изменений каждого из этих значений, так как это говорит о том, что возникла проблема, требующая внимания.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-227">Typically, you will monitor for unexpected changes in any of these values as an indicator that you have an issue that requires investigation.</span></span>

<span data-ttu-id="8c9ce-228">В hello классический портал Azure, на hello **монитор** страницы для вашей учетной записи, можно добавить правила оповещения toonotify вас, если любой из метрик производительности hello для этой службы падают ниже или превышает пороговое значение, указываемое.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-228">In hello Azure Classic Portal, on hello **Monitor** page for your storage account, you can add alert rules toonotify you if any of hello performance metrics for this service fall below or exceed a threshold that you specify.</span></span>

<span data-ttu-id="8c9ce-229">Hello»[рекомендации по ее устранению]"данного руководства описываются некоторые общие хранилища службы проблемы связанные tooperformance.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-229">hello "[Troubleshooting guidance]" section of this guide describes some common storage service issues related tooperformance.</span></span>

## <span data-ttu-id="8c9ce-230"><a name="diagnosing-storage-issues"></a>Диагностика неполадок с хранилищем</span><span class="sxs-lookup"><span data-stu-id="8c9ce-230"><a name="diagnosing-storage-issues"></a>Diagnosing storage issues</span></span>
<span data-ttu-id="8c9ce-231">Понять, что в приложении возникла проблема или неполадка, можно по нескольким признакам. Вот некоторые из них:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-231">There are a number of ways that you might become aware of a problem or issue in your application, these include:</span></span>

* <span data-ttu-id="8c9ce-232">Основные сбой, в результате работы toocrash или toostop приложения hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-232">A major failure that causes hello application toocrash or toostop working.</span></span>
* <span data-ttu-id="8c9ce-233">Значительные изменения от базовые показатели hello метрик вы наблюдаете, как описано в предыдущем разделе hello»[мониторинга службы хранения].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-233">Significant changes from baseline values in hello metrics you are monitoring as described in hello previous section "[Monitoring your storage service]."</span></span>
* <span data-ttu-id="8c9ce-234">сообщения от пользователей приложения, в которых сказано, что определенная операция не выполнена должным образом или что какая-то функция не работает;</span><span class="sxs-lookup"><span data-stu-id="8c9ce-234">Reports from users of your application that some particular operation didn't complete as expected or that some feature is not working.</span></span>
* <span data-ttu-id="8c9ce-235">ошибки, сгенерированные приложением, о которых вы узнали из файлов журналов или благодаря полученным уведомлениям.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-235">Errors generated within your application that appear in log files or through some other notification method.</span></span>

<span data-ttu-id="8c9ce-236">Как правило службы хранения связанных tooAzure проблемы подразделяются на четыре основных категории:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-236">Typically, issues related tooAzure storage services fall into one of four broad categories:</span></span>

* <span data-ttu-id="8c9ce-237">Ваше приложение имеет проблемы с производительностью, о которых сообщает пользователям, либо выявленных при изменениях в метриках производительности hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-237">Your application has a performance issue, either reported by your users, or revealed by changes in hello performance metrics.</span></span>
* <span data-ttu-id="8c9ce-238">Существует проблема с инфраструктурой хранилища Azure hello в одну или несколько областей.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-238">There is a problem with hello Azure Storage infrastructure in one or more regions.</span></span>
* <span data-ttu-id="8c9ce-239">Приложение возникли ошибки, выданные пользователям или выявленных при увеличенном одним hello ошибки счетчик показатели будут отслеживаться.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-239">Your application is encountering an error, either reported by your users, or revealed by an increase in one of hello error count metrics you monitor.</span></span>
* <span data-ttu-id="8c9ce-240">Во время разработки и тестирования может потребоваться использовать hello локального эмулятора хранения; могут возникнуть некоторые проблемы, связанные специально toousage hello эмулятор хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-240">During development and test, you may be using hello local storage emulator; you may encounter some issues that relate specifically toousage of hello storage emulator.</span></span>

<span data-ttu-id="8c9ce-241">Hello предполагает следующие шаги hello должен следовать toodiagnose и об устранении неполадок в каждой из этих четырех категорий.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-241">hello following sections outline hello steps you should follow toodiagnose and troubleshoot issues in each of these four categories.</span></span> <span data-ttu-id="8c9ce-242">Здравствуйте, раздел «[рекомендации по ее устранению]» далее в этом руководстве приводятся подробные сведения для некоторых распространенных проблем, которые могут возникнуть.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-242">hello section "[Troubleshooting guidance]" later in this guide provides more detail for some common issues you may encounter.</span></span>

### <span data-ttu-id="8c9ce-243"><a name="service-health-issues"></a>Проблемы с работоспособностью службы</span><span class="sxs-lookup"><span data-stu-id="8c9ce-243"><a name="service-health-issues"></a>Service health issues</span></span>
<span data-ttu-id="8c9ce-244">Чаще всего проблемы с работоспособностью службы находятся вне вашего контроля.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-244">Service health issues are typically outside of your control.</span></span> <span data-ttu-id="8c9ce-245">Hello классический портал Azure сведения о любые текущие проблемы со службами Azure, включая службы хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-245">hello Azure Classic Portal provides information about any ongoing issues with Azure services including storage services.</span></span> <span data-ttu-id="8c9ce-246">Если вы выбрали для географически избыточное хранилище с доступом для чтения, при создании учетной записи хранилища, затем в событии hello данных станет недоступной в основное расположение hello, приложение может временно переключиться toohello только для чтения копию в дополнительное расположение hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-246">If you opted for Read-Access Geo-Redundant Storage when you created your storage account, then in hello event of your data being unavailable in hello primary location, your application could switch temporarily toohello read-only copy in hello secondary location.</span></span> <span data-ttu-id="8c9ce-247">toodo этого приложения должен быть доступ tooswitch между использованием места хранения первичного и вторичного hello и быть может toowork в режиме ограниченной функциональности с данных только для чтения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-247">toodo this, your application must be able tooswitch between using hello primary and secondary storage locations, and be able toowork in a reduced functionality mode with read-only data.</span></span> <span data-ttu-id="8c9ce-248">библиотеки Azure Storage Client Hello позволяют toodefine политику повтора, который может читать из вторичного хранилища в случае сбоя чтения из основного хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-248">hello Azure Storage Client libraries allow you toodefine a retry policy that can read from secondary storage in case a read from primary storage fails.</span></span> <span data-ttu-id="8c9ce-249">Также приложению toobe знает, что данные hello в дополнительное расположение hello согласованным.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-249">Your application also needs toobe aware that hello data in hello secondary location is eventually consistent.</span></span> <span data-ttu-id="8c9ce-250">Дополнительные сведения см. в статье блога hello <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx" target="_blank">параметры избыточности хранилища Azure и доступ для чтения Geo Redundant Storage</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-250">For more information, see hello blog post <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/04/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx" target="_blank">Azure Storage Redundancy Options and Read Access Geo Redundant Storage</a>.</span></span>

### <span data-ttu-id="8c9ce-251"><a name="performance-issues"></a>Проблемы с производительностью</span><span class="sxs-lookup"><span data-stu-id="8c9ce-251"><a name="performance-issues"></a>Performance issues</span></span>
<span data-ttu-id="8c9ce-252">Hello производительность приложения может быть Субъективная, особенно с точки зрения пользователя.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-252">hello performance of an application can be subjective, especially from a user perspective.</span></span> <span data-ttu-id="8c9ce-253">Поэтому очень важно toohave базовые метрики доступных toohelp необходимо указать там, где возможны проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-253">Therefore, it is important toohave baseline metrics available toohelp you identify where there might be a performance issue.</span></span> <span data-ttu-id="8c9ce-254">Множество факторов может повлиять на производительность hello службой хранилища Azure с точки зрения приложения клиента hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-254">Many factors might affect hello performance of an Azure storage service from hello client application perspective.</span></span> <span data-ttu-id="8c9ce-255">Эти факторы могут работать в службе хранилища hello, hello клиента или hello сетевой инфраструктуре; Поэтому очень важно toohave стратегии для определения источника проблемы производительности hello hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-255">These factors might operate in hello storage service, in hello client, or in hello network infrastructure; therefore it is important toohave a strategy for identifying hello origin of hello performance issue.</span></span>

<span data-ttu-id="8c9ce-256">После идентификации hello скорее всего, расположение hello причина проблем с производительностью hello из hello метрики можно toofind файлы журнала hello используйте подробные сведения о toodiagnose и устранение проблемы hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-256">After you have identified hello likely location of hello cause of hello performance issue from hello metrics, you can then use hello log files toofind detailed information toodiagnose and troubleshoot hello problem further.</span></span>

<span data-ttu-id="8c9ce-257">Здравствуйте, раздел "[рекомендации по ее устранению]» далее в этом руководстве предоставляет дополнительные сведения о некоторых общих производительности связанных проблем, которые могут возникнуть.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-257">hello section "[Troubleshooting guidance]" later in this guide provides more information about some common performance related issues you may encounter.</span></span>

### <span data-ttu-id="8c9ce-258"><a name="diagnosing-errors"></a>Диагностика ошибок</span><span class="sxs-lookup"><span data-stu-id="8c9ce-258"><a name="diagnosing-errors"></a>Diagnosing errors</span></span>
<span data-ttu-id="8c9ce-259">Пользователи приложения может уведомлять ошибок, клиентское приложение hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-259">Users of your application may notify you of errors reported by hello client application.</span></span> <span data-ttu-id="8c9ce-260">Система метрик хранилища также фиксирует количество ошибок разных типов, связанных со службами хранилища, в том числе **NetworkError** (Ошибка сети), **ClientTimeoutError** (Ошибка времени ожидания клиента) и **AuthorizationError** (Ошибка авторизации).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-260">Storage Metrics also records counts of different error types from your storage services such as **NetworkError**, **ClientTimeoutError**, or **AuthorizationError**.</span></span> <span data-ttu-id="8c9ce-261">В метриках хранилища фиксируется только количество ошибок каждого типа, но вы можете получить больше данных об отдельных запросах, просмотрев журналы на стороне сервера и клиента, а также сетевой журнал.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-261">While Storage Metrics only records counts of different error types, you can obtain more detail about individual requests by examining server-side, client-side, and network logs.</span></span> <span data-ttu-id="8c9ce-262">Как правило код состояния HTTP hello, возвращенный службой хранения hello дадут представление о причинах сбоя запроса hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-262">Typically, hello HTTP status code returned by hello storage service will give an indication of why hello request failed.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-263">Помните, что следует ожидать toosee некоторых ошибок: например, ошибки из-за состояния сети tootransient или ошибок приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-263">Remember that you should expect toosee some intermittent errors: for example, errors due tootransient network conditions, or application errors.</span></span>
> 
> 

<span data-ttu-id="8c9ce-264">Hello следующие ресурсы в библиотеке MSDN полезны для понимания того, коды состояний и ошибок, связанных с хранилищем:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-264">hello following resources on MSDN are useful for understanding storage-related status and error codes:</span></span>

* <span data-ttu-id="8c9ce-265"><a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Общие коды ошибок API-интерфейса REST</a></span><span class="sxs-lookup"><span data-stu-id="8c9ce-265"><a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Common REST API Error Codes</a></span></span>
* <span data-ttu-id="8c9ce-266"><a href="http://msdn.microsoft.com/library/azure/dd179439.aspx" target="_blank">Коды ошибок службы BLOB-объектов</a></span><span class="sxs-lookup"><span data-stu-id="8c9ce-266"><a href="http://msdn.microsoft.com/library/azure/dd179439.aspx" target="_blank">Blob Service Error Codes</a></span></span>
* <span data-ttu-id="8c9ce-267"><a href="http://msdn.microsoft.com/library/azure/dd179446.aspx" target="_blank">Коды ошибок службы очередей</a></span><span class="sxs-lookup"><span data-stu-id="8c9ce-267"><a href="http://msdn.microsoft.com/library/azure/dd179446.aspx" target="_blank">Queue Service Error Codes</a></span></span>
* <span data-ttu-id="8c9ce-268"><a href="http://msdn.microsoft.com/library/azure/dd179438.aspx" target="_blank">Коды ошибок для службы таблиц</a></span><span class="sxs-lookup"><span data-stu-id="8c9ce-268"><a href="http://msdn.microsoft.com/library/azure/dd179438.aspx" target="_blank">Table Service Error Codes</a></span></span>

### <span data-ttu-id="8c9ce-269"><a name="storage-emulator-issues"></a>Проблемы с эмулятором хранения</span><span class="sxs-lookup"><span data-stu-id="8c9ce-269"><a name="storage-emulator-issues"></a>Storage emulator issues</span></span>
<span data-ttu-id="8c9ce-270">Hello Azure SDK включает эмулятор хранилища, которые можно запустить на рабочей станции разработки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-270">hello Azure SDK includes a storage emulator you can run on a development workstation.</span></span> <span data-ttu-id="8c9ce-271">Этот эмулятор имитирует большинство hello поведение служб хранилища Azure hello и используется во время разработки и тестирования, позволяя toorun приложениям, использующим службы хранилища Azure без hello, требуется подписка Azure и учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-271">This emulator simulates most of hello behavior of hello Azure storage services and is useful during development and test, enabling you toorun applications that use Azure storage services without hello need for an Azure subscription and an Azure storage account.</span></span>

<span data-ttu-id="8c9ce-272">Hello»[рекомендации по ее устранению]"данного руководства описаны некоторые типичные проблемы, возникающие с помощью эмулятора хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-272">hello "[Troubleshooting guidance]" section of this guide describes some common issues encountered using hello storage emulator.</span></span>

### <span data-ttu-id="8c9ce-273"><a name="storage-logging-tools"></a>Инструменты для ведения журналов хранилища</span><span class="sxs-lookup"><span data-stu-id="8c9ce-273"><a name="storage-logging-tools"></a>Storage logging tools</span></span>
<span data-ttu-id="8c9ce-274">Ведение журналов хранилища подразумевает запись в журнал на стороне сервера запросов к хранилищу в вашей учетной записи хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-274">Storage Logging provides server-side logging of storage requests in your Azure storage account.</span></span> <span data-ttu-id="8c9ce-275">Дополнительные сведения о том, как ведение журнала на стороне сервера tooenable и доступа hello журнала данных см. в разделе <a href="http://go.microsoft.com/fwlink/?LinkId=510867" target="_blank">ведение журнала на стороне сервера с помощью</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-275">For more information about how tooenable server-side logging and access hello log data, see <a href="http://go.microsoft.com/fwlink/?LinkId=510867" target="_blank">Using server-side logging</a> on MSDN.</span></span>

<span data-ttu-id="8c9ce-276">Hello клиентская библиотека хранилища для .NET включает данные журнала клиента toocollect, связывающий toostorage операций, выполняемых приложением.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-276">hello Storage Client Library for .NET enables you toocollect client-side log data that relates toostorage operations performed by your application.</span></span> <span data-ttu-id="8c9ce-277">Дополнительные сведения о том, как ведение журнала на стороне клиента tooenable и доступа hello журнала данных см. в разделе <a href="http://go.microsoft.com/fwlink/?LinkId=510868" target="_blank">ведении журнала с помощью клиентского hello клиентской библиотеки хранилища</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-277">For more information about how tooenable client-side logging and access hello log data, see <a href="http://go.microsoft.com/fwlink/?LinkId=510868" target="_blank">Client-side logging using hello Storage Client Library</a> on MSDN.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-278">В некоторых случаях (например, ошибки авторизации SAS) пользователь может сообщать об ошибках, для которого можно найти нет данные запроса в hello серверные хранилища журналов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-278">In some circumstances (such as SAS authorization failures), a user may report an error for which you can find no request data in hello server-side Storage logs.</span></span> <span data-ttu-id="8c9ce-279">Можно использовать hello ведения журнала клиентской библиотеки хранилища tooinvestigate hello hello причиной проблемы hello в случае на клиенте hello или использования сети hello tooinvestigate средства мониторинга сети.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-279">You can use hello logging capabilities of hello Storage Client Library tooinvestigate if hello cause of hello issue is on hello client or use network monitoring tools tooinvestigate hello network.</span></span>
> 
> 

### <span data-ttu-id="8c9ce-280"><a name="using-network-logging-tools"></a>Использование инструментов для ведения сетевого журнала</span><span class="sxs-lookup"><span data-stu-id="8c9ce-280"><a name="using-network-logging-tools"></a>Using network logging tools</span></span>
<span data-ttu-id="8c9ce-281">Можно фиксировать трафик hello между hello клиентских и серверных tooprovide подробные сведения о hello данных hello клиента и сервера, обмена и hello базового состояния сети.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-281">You can capture hello traffic between hello client and server tooprovide detailed information about hello data hello client and server are exchanging and hello underlying network conditions.</span></span> <span data-ttu-id="8c9ce-282">Ниже перечислены некоторые полезные инструменты для ведения сетевого журнала.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-282">Useful network logging tools include:</span></span>

* <span data-ttu-id="8c9ce-283">Fiddler (<a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>) — это бесплатные веб-отладка прокси-сервера, позволяющая tooexamine hello заголовки и полезные данные сообщения запроса и ответа HTTP и HTTPS.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-283">Fiddler (<a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>) is a free web debugging proxy that enables you tooexamine hello headers and payload data of HTTP and HTTPS request and response messages.</span></span> <span data-ttu-id="8c9ce-284">Дополнительные сведения см. в разделе «[приложении 1: с помощью Fiddler toocapture HTTP и HTTPS-трафика]».</span><span class="sxs-lookup"><span data-stu-id="8c9ce-284">For more information, see "[Appendix 1: Using Fiddler toocapture HTTP and HTTPS traffic]".</span></span>
* <span data-ttu-id="8c9ce-285">Microsoft сетевого монитора (Netmon) (<a href="http://www.microsoft.com/download/details.aspx?id=4865" target="_blank">http://www.microsoft.com/download/details.aspx?id=4865</a>) и Wireshark (<a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>), свободных сетевых анализаторов протоколов, позволяющих Вы tooview подробные сведения пакетов для широкого диапазона сетевых протоколов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-285">Microsoft Network Monitor (Netmon) (<a href="http://www.microsoft.com/download/details.aspx?id=4865" target="_blank">http://www.microsoft.com/download/details.aspx?id=4865</a>) and Wireshark (<a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>) are free network protocol analyzers that enable you tooview detailed packet information for a wide range of network protocols.</span></span> <span data-ttu-id="8c9ce-286">Дополнительные сведения о Wireshark см. в разделе «[приложении 2: сетевого трафика с помощью Wireshark toocapture]».</span><span class="sxs-lookup"><span data-stu-id="8c9ce-286">For more information about Wireshark, see "[Appendix 2: Using Wireshark toocapture network traffic]".</span></span>
* <span data-ttu-id="8c9ce-287">Microsoft Message Analyzer — приложение от Майкрософт, заменяет Netmon и, кроме toocapturing сетевую пакетов данных, помогает tooview и анализировать данные журнала hello, полученные из других средств.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-287">Microsoft Message Analyzer is a tool from Microsoft that supersedes Netmon and that in addition toocapturing network packet data, helps you tooview and analyze hello log data captured from other tools.</span></span> <span data-ttu-id="8c9ce-288">Дополнительные сведения см. в разделе «[приложении 3: сетевого трафика с помощью Microsoft Message Analyzer toocapture]».</span><span class="sxs-lookup"><span data-stu-id="8c9ce-288">For more information, see "[Appendix 3: Using Microsoft Message Analyzer toocapture network traffic]".</span></span>
* <span data-ttu-id="8c9ce-289">Следует tooperform toocheck теста связности, что ваш клиентский компьютер может подключаться toohello службой хранилища Azure hello сети не поддерживается стандартном hello **ping** средства на приветствия клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-289">If you want tooperform a basic connectivity test toocheck that your client machine can connect toohello Azure storage service over hello network, you cannot do this using hello standard **ping** tool on hello client.</span></span> <span data-ttu-id="8c9ce-290">Тем не менее, можно использовать hello **tcping** средства toocheck подключения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-290">However, you can use hello **tcping** tool toocheck connectivity.</span></span> <span data-ttu-id="8c9ce-291">**Tcping** можно скачать на странице <a href="http://www.elifulkerson.com/projects/tcping.php" target="_blank">http://www.elifulkerson.com/projects/tcping.php</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-291">**Tcping** is available for download at <a href="http://www.elifulkerson.com/projects/tcping.php" target="_blank">http://www.elifulkerson.com/projects/tcping.php</a>.</span></span>

<span data-ttu-id="8c9ce-292">Во многих случаях данные журнала hello ведения журнала хранилища и hello клиентской библиотеки хранилища будет достаточно toodiagnose проблему, но в некоторых сценариях может потребоваться более подробные сведения, которые может предоставить эти инструменты ведения сетевых hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-292">In many cases, hello log data from Storage Logging and hello Storage Client Library will be sufficient toodiagnose an issue, but in some scenarios, you may need hello more detailed information that these network logging tools can provide.</span></span> <span data-ttu-id="8c9ce-293">Например с помощью Fiddler tooview включает сообщения HTTP и HTTPS, заголовка и полезных данных tooview отправленных tooand hello служб хранилища, к которым позволило бы tooexamine как клиентское приложение пытается выполнить операций сохранения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-293">For example, using Fiddler tooview HTTP and HTTPS messages enables you tooview header and payload data sent tooand from hello storage services, which would enable you tooexamine how a client application retries storage operations.</span></span> <span data-ttu-id="8c9ce-294">Анализаторами протоколов, таких как Wireshark работают на уровне пакетов hello, позволяя tooview TCP данные, что позволит tootroubleshoot потерянных пакетов и проблемы с подключением.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-294">Protocol analyzers such as Wireshark operate at hello packet level enabling you tooview TCP data, which would enable you tootroubleshoot lost packets and connectivity issues.</span></span> <span data-ttu-id="8c9ce-295">Message Analyzer может работать как на уровне HTTP, так и на уровне TCP.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-295">Message Analyzer can operate at both HTTP and TCP layers.</span></span>

## <span data-ttu-id="8c9ce-296"><a name="end-to-end-tracing"></a>Комплексная трассировка</span><span class="sxs-lookup"><span data-stu-id="8c9ce-296"><a name="end-to-end-tracing"></a>End-to-end tracing</span></span>
<span data-ttu-id="8c9ce-297">Комплексная трассировка с использованием разнообразных файлов журналов — это полезный метод выявления потенциальных проблем.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-297">End-to-end tracing using a variety of log files is a useful technique for investigating potential issues.</span></span> <span data-ttu-id="8c9ce-298">Сведения даты и времени hello из данных метрик, можно использовать как значение, указывающее, где в файлах журнала hello hello toostart подробные сведения, которые помогут устранить проблему hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-298">You can use hello date/time information from your metrics data as an indication of where toostart looking in hello log files for hello detailed information that will help you troubleshoot hello issue.</span></span>

### <span data-ttu-id="8c9ce-299"><a name="correlating-log-data"></a>Сопоставление данных журналов</span><span class="sxs-lookup"><span data-stu-id="8c9ce-299"><a name="correlating-log-data"></a>Correlating log data</span></span>
<span data-ttu-id="8c9ce-300">При просмотре журналов из клиентских приложений, отслеживает сети и серверные ведения журнала, он является запросов может toocorrelate критические toobe через hello различных файлах журналов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-300">When viewing logs from client applications, network traces, and server-side storage logging it is critical toobe able toocorrelate requests across hello different log files.</span></span> <span data-ttu-id="8c9ce-301">Hello журналы содержат ряд различных полей, которые используются как идентификаторы корреляции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-301">hello log files include a number of different fields that are useful as correlation identifiers.</span></span> <span data-ttu-id="8c9ce-302">ИД запроса клиента Hello: hello чаще toouse toocorrelate записи полей в различных журналах hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-302">hello client request id is hello most useful field toouse toocorrelate entries in hello different logs.</span></span> <span data-ttu-id="8c9ce-303">Однако иногда бывает полезным toouse код запроса сервера hello или отметки времени.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-303">However sometimes, it can be useful toouse either hello server request id or timestamps.</span></span> <span data-ttu-id="8c9ce-304">Hello следующие разделы содержат дополнительные сведения об этих параметрах.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-304">hello following sections provide more details about these options.</span></span>

### <span data-ttu-id="8c9ce-305"><a name="client-request-id"></a>Идентификатор запроса клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-305"><a name="client-request-id"></a>Client request ID</span></span>
<span data-ttu-id="8c9ce-306">Клиентская библиотека хранилища Hello автоматически создает идентификатор запроса клиента, уникальный для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-306">hello Storage Client Library automatically generates a unique client request id for every request.</span></span>

* <span data-ttu-id="8c9ce-307">Hello журнала клиентской части, клиентская библиотека хранилища hello создает, появится идентификатор запроса клиента hello в hello **идентификатор запроса клиента** поле все записи журнала, связанные toohello запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-307">In hello client-side log that hello Storage Client Library creates, hello client request id appears in hello **Client Request ID** field of every log entry relating toohello request.</span></span>
* <span data-ttu-id="8c9ce-308">В сетевой трассировки, например захвачено Fiddler, идентификатор запроса клиента hello отображается в сообщения запроса как hello **x-ms клиент request-id** значение заголовка HTTP.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-308">In a network trace such as one captured by Fiddler, hello client request id is visible in request messages as hello **x-ms-client-request-id** HTTP header value.</span></span>
* <span data-ttu-id="8c9ce-309">В журнале ведения журнала хранилища серверных hello hello идентификатор запроса клиента отображается в столбец идентификатора запроса клиента hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-309">In hello server-side Storage Logging log, hello client request id appears in hello Client request ID column.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-310">Это возможно, для нескольких запросов tooshare hello же идентификатор запроса клиента, поскольку hello клиента можно присвоить это значение (несмотря на то, что клиентская библиотека хранилища hello автоматически назначается новое значение).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-310">It is possible for multiple requests tooshare hello same client request id because hello client can assign this value (although hello Storage Client Library assigns a new value automatically).</span></span> <span data-ttu-id="8c9ce-311">В случае hello повторных попыток от клиента hello, все попытки используют hello же идентификатор запроса клиента. В случае hello пакета, отправляемых с клиента hello hello пакете содержится код запроса клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-311">In hello case of retries from hello client, all attempts share hello same client request id. In hello case of a batch sent from hello client, hello batch has a single client request id.</span></span>
> 
> 

### <span data-ttu-id="8c9ce-312"><a name="server-request-id"></a>Идентификатор запроса сервера</span><span class="sxs-lookup"><span data-stu-id="8c9ce-312"><a name="server-request-id"></a>Server request ID</span></span>
<span data-ttu-id="8c9ce-313">Служба хранилища Hello автоматически создает идентификаторы запроса сервера.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-313">hello storage service automatically generates server request ids.</span></span>

* <span data-ttu-id="8c9ce-314">В журнале ведения журнала хранилища серверных hello, код запроса сервера hello отображается hello **заголовок идентификатора запроса** столбца.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-314">In hello server-side Storage Logging log, hello server request id appears hello **Request ID header** column.</span></span>
* <span data-ttu-id="8c9ce-315">В сетевой трассировки, например захвачено Fiddler, код запроса сервера hello представляется в ответных сообщений hello **x-ms-request-id** значение заголовка HTTP.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-315">In a network trace such as one captured by Fiddler, hello server request id appears in response messages as hello **x-ms-request-id** HTTP header value.</span></span>
* <span data-ttu-id="8c9ce-316">Hello журнала клиентской части, клиентская библиотека хранилища hello создает, появится код запроса сервера hello в hello **текст операции** столбца для записи журнала hello подробными сведениями о hello ответ сервера.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-316">In hello client-side log that hello Storage Client Library creates, hello server request id appears in hello **Operation Text** column for hello log entry showing details of hello server response.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-317">службы хранилища Hello всегда назначает уникальный сервер запрос идентификатор tooevery запросу получаемые им, поэтому каждой повторной попытке от клиента hello и каждой операции, включенной в пакет имеет уникальный идентификатор запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-317">hello storage service always assigns a unique server request id tooevery request it receives, so every retry attempt from hello client and every operation included in a batch has a unique server request id.</span></span>
> 
> 

<span data-ttu-id="8c9ce-318">Если hello клиентской библиотеки хранилища вызывает **StorageException** в клиенте hello hello **RequestInformation** свойство содержит **RequestResult** объект, который содержит **ServiceRequestID** свойство.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-318">If hello Storage Client Library throws a **StorageException** in hello client, hello **RequestInformation** property contains a **RequestResult** object that includes a **ServiceRequestID** property.</span></span> <span data-ttu-id="8c9ce-319">Объект **RequestResult** также доступен в экземпляре **OperationContext**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-319">You can also access a **RequestResult** object from an **OperationContext** instance.</span></span>

<span data-ttu-id="8c9ce-320">Hello в следующем примере показано как tooset пользовательского **ClientRequestId** значение путем присоединения **OperationContext** службы хранилища toohello запрос hello объекта.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-320">hello code sample below demonstrates how tooset a custom **ClientRequestId** value by attaching an **OperationContext** object hello request toohello storage service.</span></span> <span data-ttu-id="8c9ce-321">Здесь также показано, как tooretrieve hello **ServerRequestId** значение из ответное сообщение hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-321">It also shows how tooretrieve hello **ServerRequestId** value from hello response message.</span></span>

```csharp
//Parse hello connection string for hello storage account.
const string ConnectionString = "DefaultEndpointsProtocol=https;AccountName=account-name;AccountKey=account-key";
CloudStorageAccount storageAccount = CloudStorageAccount.Parse(ConnectionString);
CloudBlobClient blobClient = storageAccount.CreateCloudBlobClient();

// Create an Operation Context that includes custom ClientRequestId string based on constants defined within hello application along with a Guid.
OperationContext oc = new OperationContext();
oc.ClientRequestID = String.Format("{0} {1} {2} {3}", HOSTNAME, APPNAME, USERID, Guid.NewGuid().ToString());

try
{
    CloudBlobContainer container = blobClient.GetContainerReference("democontainer");
    ICloudBlob blob = container.GetBlobReferenceFromServer("testImage.jpg", null, null, oc);  
    var downloadToPath = string.Format("./{0}", blob.Name);
    using (var fs = File.OpenWrite(downloadToPath))
    {
        blob.DownloadToStream(fs, null, null, oc);
        Console.WriteLine("\t Blob downloaded toofile: {0}", downloadToPath);
    }
}
catch (StorageException storageException)
{
    Console.WriteLine("Storage exception {0} occurred", storageException.Message);
    // Multiple results may exist due tooclient side retry logic - each retried operation will have a unique ServiceRequestId
    foreach (var result in oc.RequestResults)
    {
            Console.WriteLine("HttpStatus: {0}, ServiceRequestId {1}", result.HttpStatusCode, result.ServiceRequestID);
    }
}
```

### <span data-ttu-id="8c9ce-322"><a name="timestamps"></a>Метки времени</span><span class="sxs-lookup"><span data-stu-id="8c9ce-322"><a name="timestamps"></a>Timestamps</span></span>
<span data-ttu-id="8c9ce-323">Также можно использовать метки времени toolocate записи журнала, связанные с, но при этом следует соблюдать осторожность, любые рассогласования между hello клиентом и сервером, который может существовать часов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-323">You can also use timestamps toolocate related log entries, but be careful of any clock skew between hello client and server that may exist.</span></span> <span data-ttu-id="8c9ce-324">Необходимо найти плюс или минус 15 минут в течение совпадающих записей серверное по меткам времени hello на приветствия клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-324">You should search plus or minus 15 minutes for matching server-side entries based on hello timestamp on hello client.</span></span> <span data-ttu-id="8c9ce-325">Помните, что метаданные большого двоичного объекта hello hello больших двоичных объектов, содержащий показатели указывает диапазон времени hello для метрик hello, хранимых в большом двоичном объекте hello; Это полезно, если имеется много больших двоичных объектов метрики для hello одной минуты или час.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-325">Remember that hello blob metadata for hello blobs containing metrics indicates hello time range for hello metrics stored in hello blob; this is useful if you have many metrics blobs for hello same minute or hour.</span></span>

## <span data-ttu-id="8c9ce-326"><a name="troubleshooting-guidance"></a>Рекомендации по устранению неполадок</span><span class="sxs-lookup"><span data-stu-id="8c9ce-326"><a name="troubleshooting-guidance"></a>Troubleshooting guidance</span></span>
<span data-ttu-id="8c9ce-327">Этот раздел поможет вам с hello диагностики и устранения неполадок с некоторых распространенных проблем hello приложения могут возникнуть при использовании служб хранилища Azure hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-327">This section will help you with hello diagnosis and troubleshooting of some of hello common issues your application may encounter when using hello Azure storage services.</span></span> <span data-ttu-id="8c9ce-328">Используйте список hello ниже toolocate hello соответствующие tooyour сведения о конкретной проблеме.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-328">Use hello list below toolocate hello information relevant tooyour specific issue.</span></span>

<span data-ttu-id="8c9ce-329">**Дерево решений по устранению неполадок**</span><span class="sxs-lookup"><span data-stu-id="8c9ce-329">**Troubleshooting Decision Tree**</span></span>

- - -
<span data-ttu-id="8c9ce-330">Связана ли проблема производительности toohello одну из служб хранения hello?</span><span class="sxs-lookup"><span data-stu-id="8c9ce-330">Does your issue relate toohello performance of one of hello storage services?</span></span>

* <span data-ttu-id="8c9ce-331">[метрики показывают AverageE2ELatency высокой и низкой AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-331">[Metrics show high AverageE2ELatency and low AverageServerLatency]</span></span>
* <span data-ttu-id="8c9ce-332">[Метрики показывают низкое AverageE2ELatency и низким AverageServerLatency, но клиент hello наблюдается большая задержка]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-332">[Metrics show low AverageE2ELatency and low AverageServerLatency but hello client is experiencing high latency]</span></span>
* <span data-ttu-id="8c9ce-333">[Метрики содержат высокие значения AverageServerLatency]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-333">[Metrics show high AverageServerLatency]</span></span>
* <span data-ttu-id="8c9ce-334">[При доставке сообщений в очередь возникают неожиданные задержки]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-334">[You are experiencing unexpected delays in message delivery on a queue]</span></span>

- - -
<span data-ttu-id="8c9ce-335">Связана ли проблема toohello доступность одной из служб хранения hello?</span><span class="sxs-lookup"><span data-stu-id="8c9ce-335">Does your issue relate toohello availability of one of hello storage services?</span></span>

* <span data-ttu-id="8c9ce-336">[Метрики указывают на увеличение значения PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-336">[Metrics show an increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="8c9ce-337">[метрики увеличить PercentTimeoutError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-337">[Metrics show an increase in PercentTimeoutError]</span></span>
* <span data-ttu-id="8c9ce-338">[Метрики показывают увеличение значения PercentNetworkError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-338">[Metrics show an increase in PercentNetworkError]</span></span>

- - -
<span data-ttu-id="8c9ce-339">Получает ли клиентское приложение ответ HTTP 4XX (например, с кодом 404) от службы хранилища?</span><span class="sxs-lookup"><span data-stu-id="8c9ce-339">Is your client application receiving an HTTP 4XX (such as 404) response from a storage service?</span></span>

* <span data-ttu-id="8c9ce-340">[Hello клиент получает сообщения HTTP 403 (запрещено)]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-340">[hello client is receiving HTTP 403 (Forbidden) messages]</span></span>
* <span data-ttu-id="8c9ce-341">[Получает ошибки HTTP 404 (не найдено) сообщения приветствия клиента]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-341">[hello client is receiving HTTP 404 (Not found) messages]</span></span>
* <span data-ttu-id="8c9ce-342">[Получает HTTP 409 (конфликт) сообщения приветствия клиента]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-342">[hello client is receiving HTTP 409 (Conflict) messages]</span></span>

- - -
<span data-ttu-id="8c9ce-343">[метрики низкий PercentSuccess или аналитика записи журнала операций с состояние транзакции ClientOtherErrors]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-343">[Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors]</span></span>

- - -
<span data-ttu-id="8c9ce-344">[Метрики объема показывают неожиданное увеличение использования объема хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-344">[Capacity metrics show an unexpected increase in storage capacity usage]</span></span>

- - -
<span data-ttu-id="8c9ce-345">[Происходит неожиданный перезапуск виртуальных машин, имеющих большое количество виртуальных жестких дисков]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-345">[You are experiencing unexpected reboots of Virtual Machines that have a large number of attached VHDs]</span></span>

- - -
<span data-ttu-id="8c9ce-346">[Проблемы возникают из-за использование эмулятора хранилища hello для разработки или тестирования]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-346">[Your issue arises from using hello storage emulator for development or test]</span></span>

- - -
<span data-ttu-id="8c9ce-347">[Возникающие проблемы с установкой hello Azure SDK для .NET]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-347">[You are encountering problems installing hello Azure SDK for .NET]</span></span>

- - -
<span data-ttu-id="8c9ce-348">[Возникла другая проблема со службой хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-348">[You have a different issue with a storage service]</span></span>

- - -
### <span data-ttu-id="8c9ce-349"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Метрики содержат высокие значения AverageE2ELatency и низкие значения AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="8c9ce-349"><a name="metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show high AverageE2ELatency and low AverageServerLatency</span></span>
<span data-ttu-id="8c9ce-350">Hello сгорания иллюстрации из средства мониторинга hello классический портал Azure показан пример там, где hello **AverageE2ELatency** значительно больше, чем hello **AverageServerLatency**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-350">hello illustration blow from hello Azure Classic Portal monitoring tool shows an example where hello **AverageE2ELatency** is significantly higher than hello **AverageServerLatency**.</span></span>

![][4]

<span data-ttu-id="8c9ce-351">Примечание, служба хранилища hello вычисляет только метрики hello **AverageE2ELatency** для успешных запросов и, в отличие от **AverageServerLatency**, включает время hello hello-клиент выполняет toosend hello данные и получать подтверждения от службы хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-351">Note that hello storage service only calculates hello metric **AverageE2ELatency** for successful requests and, unlike **AverageServerLatency**, includes hello time hello client takes toosend hello data and receive acknowledgement from hello storage service.</span></span> <span data-ttu-id="8c9ce-352">Таким образом, разница между **AverageE2ELatency** и **AverageServerLatency** может быть либо из-за toohello клиентских приложений, медленный toorespond или из-за tooconditions сети hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-352">Therefore, a difference between **AverageE2ELatency** and **AverageServerLatency** could be either due toohello client application being slow toorespond, or due tooconditions on hello network.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-353">Можно также просмотреть **E2ELatency** и **ServerLatency** для отдельных операций сохранения в hello ведения журнала хранилища данных журналов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-353">You can also view **E2ELatency** and **ServerLatency** for individual storage operations in hello Storage Logging log data.</span></span>
> 
> 

#### <a name="investigating-client-performance-issues"></a><span data-ttu-id="8c9ce-354">Изучение проблем с производительностью клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-354">Investigating client performance issues</span></span>
<span data-ttu-id="8c9ce-355">Возможные причины медленно отвечать на запросы клиента hello включает в себя ограниченное число доступных подключений или потоков.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-355">Possible reasons for hello client responding slowly include having a limited number of available connections or threads.</span></span> <span data-ttu-id="8c9ce-356">Может быть проблема может tooresolve hello, изменив toobe кода hello клиента более эффективно (например с помощью службы хранилища toohello асинхронных вызовов), либо с помощью большего размера виртуальной машины (с нескольких ядер и объем памяти).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-356">You may be able tooresolve hello issue by modifying hello client code toobe more efficient (for example by using asynchronous calls toohello storage service), or by using a larger Virtual Machine (with more cores and more memory).</span></span>

<span data-ttu-id="8c9ce-357">Для служб таблиц и очередей hello, алгоритм Nagle hello также может привести к высокой **AverageE2ELatency** при сравнении слишком**AverageServerLatency**: Дополнительные сведения в разделе блога hello <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx" target="_blank">Nagle Алгоритм — не понятное для небольших запросов</a> на hello блоге разработчиков хранилища Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-357">For hello table and queue services, hello Nagle algorithm can also cause high **AverageE2ELatency** as compared too**AverageServerLatency**: for more information see hello post <a href="http://blogs.msdn.com/b/windowsazurestorage/archive/2010/06/25/nagle-s-algorithm-is-not-friendly-towards-small-requests.aspx" target="_blank">Nagle's Algorithm is Not Friendly towards Small Requests</a> on hello Microsoft Azure Storage Team Blog.</span></span> <span data-ttu-id="8c9ce-358">Можно отключить алгоритм Nagle hello в коде с помощью hello **ServicePointManager** класса в hello **System.Net** пространства имен.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-358">You can disable hello Nagle algorithm in code by using hello **ServicePointManager** class in hello **System.Net** namespace.</span></span> <span data-ttu-id="8c9ce-359">Это следует сделать до любой таблицы toohello вызовы или откройте службы очередей в приложении, так как это не влияет на подключения, которые уже.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-359">You should do this before you make any calls toohello table or queue services in your application since this does not affect connections that are already open.</span></span> <span data-ttu-id="8c9ce-360">Hello в примере берется из hello **Application_Start** метод в рабочей роли.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-360">hello following example comes from hello **Application_Start** method in a worker role.</span></span>

```csharp
var storageAccount = CloudStorageAccount.Parse(connStr);
ServicePoint tableServicePoint = ServicePointManager.FindServicePoint(storageAccount.TableEndpoint);
tableServicePoint.UseNagleAlgorithm = false;
ServicePoint queueServicePoint = ServicePointManager.FindServicePoint(storageAccount.QueueEndpoint);
queueServicePoint.UseNagleAlgorithm = false;
```

<span data-ttu-id="8c9ce-361">Вы должны проверить toosee hello журналы на стороне клиента сколько запросов отправки клиентского приложения и поиск Общие .NET, связанные с узкие места производительности в клиентском приложении, такие как ЦП, сборщик мусора .NET, использование сети или памяти (в качестве начальной Укажите сведения об устранении неполадок клиентских приложений .NET см. в разделе <a href="http://msdn.microsoft.com/library/7fe0dd2y(v=vs.110).aspx" target="_blank">отладка, трассировка и профилирование</a> в библиотеке MSDN).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-361">You should check hello client-side logs toosee how many requests your client application is submitting, and check for general .NET related performance bottlenecks in your client such as CPU, .NET garbage collection, network utilization, or memory (as a starting point for troubleshooting .NET client applications, see <a href="http://msdn.microsoft.com/library/7fe0dd2y(v=vs.110).aspx" target="_blank">Debugging, Tracing, and Profiling</a> on MSDN).</span></span>

#### <a name="investigating-network-latency-issues"></a><span data-ttu-id="8c9ce-362">Изучение проблем, связанных с задержками в сети</span><span class="sxs-lookup"><span data-stu-id="8c9ce-362">Investigating network latency issues</span></span>
<span data-ttu-id="8c9ce-363">Как правило большая задержка начала до конца, вызванные hello сети — из-за tootransient условия.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-363">Typically, high end-to-end latency caused by hello network is due tootransient conditions.</span></span> <span data-ttu-id="8c9ce-364">Изучить временные и постоянные неполадки сети, например потерю пакетов, можно с помощью таких средств, как Wireshark или анализатор сообщений Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-364">You can investigate both transient and persistent network issues such as dropped packets by using tools such as Wireshark or Microsoft Message Analyzer.</span></span>

<span data-ttu-id="8c9ce-365">Дополнительные сведения об использовании Wireshark tootroubleshoot сетевых проблем см. в разделе «[приложении 2: сетевого трафика с помощью Wireshark toocapture].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-365">For more information about using Wireshark tootroubleshoot network issues, see "[Appendix 2: Using Wireshark toocapture network traffic]."</span></span>

<span data-ttu-id="8c9ce-366">Дополнительные сведения об использовании Microsoft Message Analyzer tootroubleshoot сетевых проблем см. в разделе «[приложении 3: сетевого трафика с помощью Microsoft Message Analyzer toocapture].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-366">For more information about using Microsoft Message Analyzer tootroubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer toocapture network traffic]."</span></span>

### <span data-ttu-id="8c9ce-367"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Метрики показывают низкое AverageE2ELatency и низким AverageServerLatency, но клиент hello наблюдается большая задержка</span><span class="sxs-lookup"><span data-stu-id="8c9ce-367"><a name="metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency"></a>Metrics show low AverageE2ELatency and low AverageServerLatency but hello client is experiencing high latency</span></span>
<span data-ttu-id="8c9ce-368">В этом сценарии hello наиболее вероятная причина-задержка запросов к хранилищу hello достижение hello службы хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-368">In this scenario, hello most likely cause is a delay in hello storage requests reaching hello storage service.</span></span> <span data-ttu-id="8c9ce-369">Следует изучить, почему запросы от клиента hello не выполняют его через toohello BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-369">You should investigate why requests from hello client are not making it through toohello blob service.</span></span>

<span data-ttu-id="8c9ce-370">Возможные причины возникновения задержки при отправке запросов клиента hello включает в себя ограниченное число доступных подключений или потоков.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-370">Possible reasons for hello client delaying sending requests include having a limited number of available connections or threads.</span></span> <span data-ttu-id="8c9ce-371">Следует также установите флажок, если клиент hello выполняет несколько попыток и исследовать причины hello случае hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-371">You should also check if hello client is performing multiple retries, and investigate hello reason if this is hello case.</span></span> <span data-ttu-id="8c9ce-372">Это можно сделать программно, проверив hello **OperationContext** объект, связанный с запросом hello и получении hello **ServerRequestId** значение.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-372">You can do this programmatically by looking in hello **OperationContext** object associated with hello request and retrieving hello **ServerRequestId** value.</span></span> <span data-ttu-id="8c9ce-373">Дополнительные сведения см. образец кода hello в разделе hello»[код запроса сервера].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-373">For more information, see hello code sample in hello section "[Server request ID]."</span></span>

<span data-ttu-id="8c9ce-374">Если нет никаких проблем в клиенте hello, необходимо проверить потенциальных проблемах сети, например потеря пакетов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-374">If there are no issues in hello client, you should investigate potential network issues such as packet loss.</span></span> <span data-ttu-id="8c9ce-375">Можно использовать средства, такие как проблемы с сетевым tooinvestigate Wireshark или Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-375">You can use tools such as Wireshark or Microsoft Message Analyzer tooinvestigate network issues.</span></span>

<span data-ttu-id="8c9ce-376">Дополнительные сведения об использовании Wireshark tootroubleshoot сетевых проблем см. в разделе «[приложении 2: сетевого трафика с помощью Wireshark toocapture].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-376">For more information about using Wireshark tootroubleshoot network issues, see "[Appendix 2: Using Wireshark toocapture network traffic]."</span></span>

<span data-ttu-id="8c9ce-377">Дополнительные сведения об использовании Microsoft Message Analyzer tootroubleshoot сетевых проблем см. в разделе «[приложении 3: сетевого трафика с помощью Microsoft Message Analyzer toocapture].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-377">For more information about using Microsoft Message Analyzer tootroubleshoot network issues, see "[Appendix 3: Using Microsoft Message Analyzer toocapture network traffic]."</span></span>

### <span data-ttu-id="8c9ce-378"><a name="metrics-show-high-AverageServerLatency"></a>Метрики содержат высокие значения AverageServerLatency</span><span class="sxs-lookup"><span data-stu-id="8c9ce-378"><a name="metrics-show-high-AverageServerLatency"></a>Metrics show high AverageServerLatency</span></span>
<span data-ttu-id="8c9ce-379">В случае hello высокий **AverageServerLatency** для запросов на загрузку большого двоичного объекта, следует использовать hello ведения журнала хранилища регистрирует toosee, если имеются повторяющиеся запросы для hello же больших двоичных объектов (или набор больших двоичных объектов).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-379">In hello case of high **AverageServerLatency** for blob download requests, you should use hello Storage Logging logs toosee if there are repeated requests for hello same blob (or set of blobs).</span></span> <span data-ttu-id="8c9ce-380">Для большого двоичного объекта передавать запросы, следует проверить, какой блок размер hello клиентом (например, меньше 64 КБ в размере может привести к накладных расходов, если считывает hello также присутствуют в блоках меньше 64 КБ фрагментов данных), и если несколько клиентов отправляете блокирует toohello же BLOB-объектов в параллельном режиме.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-380">For blob upload requests, you should investigate what block size hello client is using (for example, blocks less than 64K in size can result in overheads unless hello reads are also in less than 64K chunks), and if multiple clients are uploading blocks toohello same blob in parallel.</span></span> <span data-ttu-id="8c9ce-381">Необходимо также проверить показатели hello / мин для всплески hello число запросов, которые приводят к превышению hello на второй целевые показатели масштабируемости: см. также "[метрики увеличить PercentTimeoutError].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-381">You should also check hello per-minute metrics for spikes in hello number of requests that result in exceeding hello per second scalability targets: also see "[Metrics show an increase in PercentTimeoutError]."</span></span>

<span data-ttu-id="8c9ce-382">Если вы видите большое **AverageServerLatency** запросов на загрузку большого двоичного объекта при будут повторяться запросы hello же большой двоичный объект или набор больших двоичных объектов, затем следует предусмотреть кэширование этих больших двоичных объектов с помощью кэша Azure или hello доставки содержимого Azure Сети (CDN).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-382">If you are seeing high **AverageServerLatency** for blob download requests when there are repeated requests hello same blob or set of blobs, then you should consider caching these blobs using Azure Cache or hello Azure Content Delivery Network (CDN).</span></span> <span data-ttu-id="8c9ce-383">Для отправки запросов может повысить пропускную способность hello с помощью больший размер блока.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-383">For upload requests, you can improve hello throughput by using a larger block size.</span></span> <span data-ttu-id="8c9ce-384">Для запросов tootables, это также возможно tooimplement клиентским кэшированием на клиенты, выполняющие hello операций запросов и где hello данные изменяются редко.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-384">For queries tootables, it is also possible tooimplement client-side caching on clients that perform hello same query operations and where hello data doesn't change frequently.</span></span>

<span data-ttu-id="8c9ce-385">Высокий уровень **AverageServerLatency** значения также может быть признаком плохо спроектированные таблиц или в запросы, что приведет к операции сканирования или, выполните hello append и начале антишаблон.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-385">High **AverageServerLatency** values can also be a symptom of poorly designed tables or queries that result in scan operations or that follow hello append/prepend anti-pattern.</span></span> <span data-ttu-id="8c9ce-386">Дополнительные сведения см. в разделе [Метрики указывают на увеличение значения PercentThrottlingError].</span><span class="sxs-lookup"><span data-stu-id="8c9ce-386">See "[Metrics show an increase in PercentThrottlingError]" for more information.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-387">Подробный контрольный список обеспечения производительности можно найти в статье [Производительность хранилища Microsoft Azure и контрольный список масштабируемости](storage-performance-checklist.md).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-387">You can find a comprehensive checklist performance checklist here: [Microsoft Azure Storage Performance and Scalability Checklist](storage-performance-checklist.md).</span></span>
> 
> 

### <span data-ttu-id="8c9ce-388"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>При доставке сообщений в очередь возникают неожиданные задержки</span><span class="sxs-lookup"><span data-stu-id="8c9ce-388"><a name="you-are-experiencing-unexpected-delays-in-message-delivery"></a>You are experiencing unexpected delays in message delivery on a queue</span></span>
<span data-ttu-id="8c9ce-389">При наличии задержки между моментом hello приложение добавляет сообщение tooa очереди и hello времена, когда она станет доступной tooread из очереди hello, а затем необходимо выполнить следующие шаги toodiagnose hello проблема hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-389">If you are experiencing a delay between hello time an application adds a message tooa queue and hello time it becomes available tooread from hello queue, then you should take hello following steps toodiagnose hello issue:</span></span>

* <span data-ttu-id="8c9ce-390">Убедитесь, что приложение hello успешно состоит в добавлении очереди toohello сообщения hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-390">Verify hello application is successfully adding hello messages toohello queue.</span></span> <span data-ttu-id="8c9ce-391">Проверьте, что приложение hello не восстанавливается hello **AddMessage** метода несколько раз, прежде чем следующему.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-391">Check that hello application is not retrying hello **AddMessage** method several times before succeeding.</span></span> <span data-ttu-id="8c9ce-392">Клиентская библиотека хранилища журналов Hello покажет повторные попытки повторных операций хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-392">hello Storage Client Library logs will show any repeated retries of storage operations.</span></span>
* <span data-ttu-id="8c9ce-393">Убедитесь, что отсутствуют координации hello рабочая роль, добавляет в очередь toohello сообщений hello и hello рабочей роли, считывающий приветственное сообщение из очереди hello, делающую отображаются, как если бы во время обработки возникает задержка.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-393">Verify there is no clock skew between hello worker role that adds hello message toohello queue and hello worker role that reads hello message from hello queue that makes it appear as if there is a delay in processing.</span></span>
* <span data-ttu-id="8c9ce-394">Проверьте, если происходит сбой hello рабочей роли, которая считывает из очереди hello сообщений hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-394">Check if hello worker role that reads hello messages from hello queue is failing.</span></span> <span data-ttu-id="8c9ce-395">Если клиент очереди вызывает hello **GetMessage** но сбой метода toorespond с подтверждением, приветственное сообщение останется невидимыми для hello очереди до hello **invisibilityTimeout** этого срока.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-395">If a queue client calls hello **GetMessage** method but fails toorespond with an acknowledgement, hello message will remain invisible on hello queue until hello **invisibilityTimeout** period expires.</span></span> <span data-ttu-id="8c9ce-396">На этом этапе приветственное сообщение становится доступным для обработки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-396">At this point, hello message becomes available for processing again.</span></span>
* <span data-ttu-id="8c9ce-397">Проверьте, если длина очереди hello растет со временем.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-397">Check if hello queue length is growing over time.</span></span> <span data-ttu-id="8c9ce-398">Это может произойти, если у вас недостаточно доступных tooprocess работников все hello сообщений, что другим работникам оказывает на очереди hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-398">This can occur if you do not have sufficient workers available tooprocess all of hello messages that other workers are placing on hello queue.</span></span> <span data-ttu-id="8c9ce-399">Также следует проверять toosee hello метрики, если удалить запросов завершается ошибкой и hello dequeue счетчик на сообщения, которые могут указывать повторно сообщение hello toodelete неудачных попыток входа.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-399">You should also check hello metrics toosee if delete requests are failing and hello dequeue count on messages, which might indicate repeated failed attempts toodelete hello message.</span></span>
* <span data-ttu-id="8c9ce-400">В журналах hello ведения журнала хранилища для любой операции с очередью, имеющих более поздней версии, чем ожидалось **E2ELatency** и **ServerLatency** значения за более длительный период времени, чем обычно.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-400">Examine hello Storage Logging logs for any queue operations that have higher than expected **E2ELatency** and **ServerLatency** values over a longer period of time than usual.</span></span>

### <span data-ttu-id="8c9ce-401"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Метрики показывают увеличение значения PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="8c9ce-401"><a name="metrics-show-an-increase-in-PercentThrottlingError"></a>Metrics show an increase in PercentThrottlingError</span></span>
<span data-ttu-id="8c9ce-402">Ошибки регулирования возникают в случае превышения hello целевые показатели масштабируемости службы хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-402">Throttling errors occur when you exceed hello scalability targets of a storage service.</span></span> <span data-ttu-id="8c9ce-403">Служба хранилища Hello делает это tooensure это ни один клиент не может использовать службу hello за счет hello других пользователей.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-403">hello storage service does this tooensure that no single client or tenant can use hello service at hello expense of others.</span></span> <span data-ttu-id="8c9ce-404">Дополнительные сведения о целевых показателях масштабируемости для учетных записей хранения и целевых показателях производительности для секций внутри учетных записей хранения см. в разделе <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Целевые показатели по производительности и масштабируемости для хранилища Azure</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-404">For more information, see <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Azure Storage Scalability and Performance Targets</a> for details on scalability targets for storage accounts and performance targets for partitions within storage accounts.</span></span>

<span data-ttu-id="8c9ce-405">Если hello **PercentThrottlingError** метрика увеличить процент запросов, которые завершились с ошибкой регулирования hello, вы должны tooinvestigate одного из двух сценариев:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-405">If hello **PercentThrottlingError** metric show an increase in hello percentage of requests that are failing with a throttling error, you need tooinvestigate one of two scenarios:</span></span>

* <span data-ttu-id="8c9ce-406">[Временное увеличение метрики PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-406">[Transient increase in PercentThrottlingError]</span></span>
* <span data-ttu-id="8c9ce-407">[Постоянное увеличение метрики PercentThrottlingError]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-407">[Permanent increase in PercentThrottlingError error]</span></span>

<span data-ttu-id="8c9ce-408">Увеличение **PercentThrottlingError** часто возникает в hello же временем, определяемыми увеличение hello число запросов к хранилищу, или при первоначальном нагрузочное тестирование приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-408">An increase in **PercentThrottlingError** often occurs at hello same time as an increase in hello number of storage requests, or when you are initially load testing your application.</span></span> <span data-ttu-id="8c9ce-409">Это также может проявляться в клиенте hello как «503 занято сервера» или «500 истекло время ожидания операции» HTTP сообщения о состоянии от операций сохранения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-409">This may also manifest itself in hello client as "503 Server Busy" or "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

#### <span data-ttu-id="8c9ce-410"><a name="transient-increase-in-PercentThrottlingError"></a>Временное увеличение метрики PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="8c9ce-410"><a name="transient-increase-in-PercentThrottlingError"></a>Transient increase in PercentThrottlingError</span></span>
<span data-ttu-id="8c9ce-411">Если вы видите всплески значение hello **PercentThrottlingError** , совпадающие во времени с помощью периодов высокой активности для приложения hello, следует реализовать в клиентском приложении (не линейной) экспоненциальной стратегию повторных попыток: это будет уменьшить hello немедленно нагрузку на раздел hello и помогают вашего приложения toosmooth пиковых уровней трафика.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-411">If you are seeing spikes in hello value of **PercentThrottlingError** that coincide with periods of high activity for hello application, you should implement an exponential (not linear) back off strategy for retries in your client: this will reduce hello immediate load on hello partition and help your application toosmooth out spikes in traffic.</span></span> <span data-ttu-id="8c9ce-412">Дополнительные сведения о том, как с помощью политик повторных попыток tooimplement hello клиентской библиотеки хранилища см. в разделе <a href="http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx" target="_blank">Microsoft.WindowsAzure.Storage.RetryPolicies имен</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-412">For more information about how tooimplement retry policies using hello Storage Client Library, see <a href="http://msdn.microsoft.com/library/azure/microsoft.windowsazure.storage.retrypolicies.aspx" target="_blank">Microsoft.WindowsAzure.Storage.RetryPolicies Namespace</a> on MSDN.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-413">Можно также увидеть всплески значение hello **PercentThrottlingError** , не совпадают с периодов высокой активности для приложения hello: hello здесь наиболее вероятной причиной является перемещение секций tooimprove нагрузки службы хранилища hello балансировки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-413">You may also see spikes in hello value of **PercentThrottlingError** that do not coincide with periods of high activity for hello application: hello most likely cause here is hello storage service moving partitions tooimprove load balancing.</span></span>
> 
> 

#### <span data-ttu-id="8c9ce-414"><a name="permanent-increase-in-PercentThrottlingError"></a>Постоянное увеличение метрики PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="8c9ce-414"><a name="permanent-increase-in-PercentThrottlingError"></a>Permanent increase in PercentThrottlingError error</span></span>
<span data-ttu-id="8c9ce-415">Если вы видите стабильно высокое значение для **PercentThrottlingError** следующие постоянное увеличение, томов, транзакции, или при выполнении вашей начальной загрузки тестов для приложения, то нужно tooevaluate как приложение использует хранилища секций и ли приближается hello целевые показатели масштабируемости для учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-415">If you are seeing a consistently high value for **PercentThrottlingError** following a permanent increase in your transaction volumes, or when you are performing your initial load tests on your application, then you need tooevaluate how your application is using storage partitions and whether it is approaching hello scalability targets for a storage account.</span></span> <span data-ttu-id="8c9ce-416">Например если вы видите регулирования ошибок в очереди (который также считается одной секции), затем можно использовать дополнительные очереди toospread hello транзакции по нескольким секциям.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-416">For example, if you are seeing throttling errors on a queue (which counts as a single partition), then you should consider using additional queues toospread hello transactions across multiple partitions.</span></span> <span data-ttu-id="8c9ce-417">Появление ошибки в таблице регулирования, необходимо tooconsider, с помощью различных toospread схему секционирования в транзакциях по нескольким секциям с помощью широкий диапазон значений ключа секции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-417">If you are seeing throttling errors on a table, you need tooconsider using a different partitioning scheme toospread your transactions across multiple partitions by using a wider range of partition key values.</span></span> <span data-ttu-id="8c9ce-418">Распространенная причина возникновения этой проблемы является hello начале append антишаблон где выберите дату hello в качестве ключа секции hello и все данные на определенный день записывается tooone секции: под нагрузкой, это может привести к образованию записи.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-418">One common cause of this issue is hello prepend/append anti-pattern where you select hello date as hello partition key and then all data on a particular day is written tooone partition: under load, this can result in a write bottleneck.</span></span> <span data-ttu-id="8c9ce-419">Рекомендуем изменить схему секционирования или оценить возможность использования хранилища BLOB-объектов как более оптимального решения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-419">You should either consider a different partitioning design or evaluate whether using blob storage might be a better solution.</span></span> <span data-ttu-id="8c9ce-420">Необходимо также проверить, если hello регулирование происходит в результате пики трафика и изучения способов сглаживания ваш шаблон обработки запросов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-420">You should also check if hello throttling is occurring as a result of spikes in your traffic and investigate ways of smoothing your pattern of requests.</span></span>

<span data-ttu-id="8c9ce-421">При распространении транзакций по нескольким секциям, по-прежнему необходимо учитывать hello масштабируемость ограничений, заданных для учетной записи хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-421">If you distribute your transactions across multiple partitions, you must still be aware of hello scalability limits set for hello storage account.</span></span> <span data-ttu-id="8c9ce-422">Например, если используется десять очереди каждого hello обработки не более 2 000 сообщений размером 1 КБ в секунду, можно в hello общее ограничение в 20 000 сообщений в секунду для учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-422">For example, if you used ten queues each processing hello maximum of 2,000 1KB messages per second, you will be at hello overall limit of 20,000 messages per second for hello storage account.</span></span> <span data-ttu-id="8c9ce-423">Если вам требуется tooprocess более 20 000 сущностей в секунду, можно использовать несколько учетных записей хранения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-423">If you need tooprocess more than 20,000 entities per second, you should consider using multiple storage accounts.</span></span> <span data-ttu-id="8c9ce-424">Следует также иметь в виду такой hello размер запросов и сущностей оказывает влияние на когда служба хранилища hello регулирует клиентов: при наличии больших запросов и сущностей, то может регулироваться быстрее.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-424">You should also bear in mind that hello size of your requests and entities has an impact on when hello storage service throttles your clients: if you have larger requests and entities, you may be throttled sooner.</span></span>

<span data-ttu-id="8c9ce-425">Конструктор запросов неэффективным может быть причиной ограничения масштабируемости hello toohit для секционированных таблиц.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-425">Inefficient query design can also cause you toohit hello scalability limits for table partitions.</span></span> <span data-ttu-id="8c9ce-426">Например запрос с фильтром, выбирает только один процент hello сущностей в секции, но, просматривает все сущности hello в секции потребуется tooaccess каждой сущности.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-426">For example, a query with a filter that only selects one percent of hello entities in a partition but that scans all hello entities in a partition will need tooaccess each entity.</span></span> <span data-ttu-id="8c9ce-427">Каждая сущность чтения будут приниматься hello общее число транзакций в этой секции; Таким образом легко может достичь целей масштабирования hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-427">Every entity read will count towards hello total number of transactions in that partition; therefore, you can easily reach hello scalability targets.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-428">Неэффективная структура запросов должна выявляться при тестировании производительности приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-428">Your performance testing should reveal any inefficient query designs in your application.</span></span>
> 
> 

### <span data-ttu-id="8c9ce-429"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Метрики показывают увеличение значения PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="8c9ce-429"><a name="metrics-show-an-increase-in-PercentTimeoutError"></a>Metrics show an increase in PercentTimeoutError</span></span>
<span data-ttu-id="8c9ce-430">Вы можете наблюдать увеличение метрики **PercentTimeoutError** для одной из служб хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-430">Your metrics show an increase in **PercentTimeoutError** for one of your storage services.</span></span> <span data-ttu-id="8c9ce-431">В hello же время hello клиент получает слишком большое количество сообщений о состоянии HTTP «500 истекло время ожидания операции» от операций сохранения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-431">At hello same time, hello client receives a high volume of "500 Operation Timeout" HTTP status messages from storage operations.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-432">Могут возникнуть ошибки времени ожидания временно как служба хранилища hello нагрузки запросов баланс, перемещая секции tooa нового сервера.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-432">You may see timeout errors temporarily as hello storage service load balances requests by moving a partition tooa new server.</span></span>
> 
> 

<span data-ttu-id="8c9ce-433">Hello **PercentTimeoutError** метрика агрегат hello следующие метрики: **ClientTimeoutError**, **AnonymousClientTimeoutError**,  **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError**, и **SASServerTimeoutError**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-433">hello **PercentTimeoutError** metric is an aggregation of hello following metrics: **ClientTimeoutError**, **AnonymousClientTimeoutError**, **SASClientTimeoutError**, **ServerTimeoutError**, **AnonymousServerTimeoutError**, and **SASServerTimeoutError**.</span></span>

<span data-ttu-id="8c9ce-434">время ожидания сервера Hello возникают из-за ошибки на сервере hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-434">hello server timeouts are caused by an error on hello server.</span></span> <span data-ttu-id="8c9ce-435">время ожидания клиента Hello происходить, когда операция на сервере hello было превышено время ожидания hello, указанный клиентом hello; Например, клиент, использующий hello клиентской библиотеки хранилища можно задать время ожидания для операции с помощью hello **ServerTimeout** свойство hello **QueueRequestOptions** класса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-435">hello client timeouts happen because an operation on hello server has exceeded hello timeout specified by hello client; for example, a client using hello Storage Client Library can set a timeout for an operation by using hello **ServerTimeout** property of hello **QueueRequestOptions** class.</span></span>

<span data-ttu-id="8c9ce-436">Время ожидания сервера указывает на проблему с помощью службы хранилища hello, требуется дополнительный анализ.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-436">Server timeouts indicate a problem with hello storage service that requires further investigation.</span></span> <span data-ttu-id="8c9ce-437">Метрики toosee можно использовать, если предназначаются hello ограничения масштабируемости для службы hello и tooidentify какие-либо пики трафика, который может причиной проблемы.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-437">You can use metrics toosee if you are hitting hello scalability limits for hello service and tooidentify any spikes in traffic that might be causing this problem.</span></span> <span data-ttu-id="8c9ce-438">Если hello проблема временная, возможно, из-за балансировки tooload действия в службе hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-438">If hello problem is intermittent, it may be due tooload-balancing activity in hello service.</span></span> <span data-ttu-id="8c9ce-439">Если проблема hello является постоянным и не вызвана попадание ограничения масштабируемости hello hello службы приложения, необходимо вызвать возникшей проблемы.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-439">If hello problem is persistent and is not caused by your application hitting hello scalability limits of hello service, you should raise a support issue.</span></span> <span data-ttu-id="8c9ce-440">Для времени ожидания клиента необходимо решить, если время ожидания hello задано tooan соответствующее значение в клиенте hello и либо значение времени ожидания изменений hello задаются в клиенте hello или исследовать, как можно улучшить производительность hello операций hello в службе хранилища hello, для Пример, оптимизация запросов таблицы или уменьшив размер сообщений hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-440">For client timeouts, you must decide if hello timeout is set tooan appropriate value in hello client and either change hello timeout value set in hello client or investigate how you can improve hello performance of hello operations in hello storage service, for example by optimizing your table queries or reducing hello size of your messages.</span></span>

### <span data-ttu-id="8c9ce-441"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Метрики показывают увеличение значения PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="8c9ce-441"><a name="metrics-show-an-increase-in-PercentNetworkError"></a>Metrics show an increase in PercentNetworkError</span></span>
<span data-ttu-id="8c9ce-442">Вы можете наблюдать увеличение метрики **PercentNetworkError** для одной из служб хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-442">Your metrics show an increase in **PercentNetworkError** for one of your storage services.</span></span> <span data-ttu-id="8c9ce-443">Hello **PercentNetworkError** метрика агрегат hello следующие метрики: **NetworkError**, **AnonymousNetworkError**, и  **SASNetworkError**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-443">hello **PercentNetworkError** metric is an aggregation of hello following metrics: **NetworkError**, **AnonymousNetworkError**, and **SASNetworkError**.</span></span> <span data-ttu-id="8c9ce-444">Это происходит при службы хранилища hello обнаруживает ошибку сети, когда hello клиент делает запрос хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-444">These occur when hello storage service detects a network error when hello client makes a storage request.</span></span>

<span data-ttu-id="8c9ce-445">Hello наиболее распространенной причиной этой ошибки является клиентом отключения до истечения времени ожидания в службе хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-445">hello most common cause of this error is a client disconnecting before a timeout expires in hello storage service.</span></span> <span data-ttu-id="8c9ce-446">Необходимо проверить код hello в вашей toounderstand клиента, когда и почему hello отключится от службы хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-446">You should investigate hello code in your client toounderstand why and when hello client disconnects from hello storage service.</span></span> <span data-ttu-id="8c9ce-447">Можно также использовать Wireshark, Microsoft Message Analyzer или Tcping tooinvestigate проблемы с сетевым соединением с клиента hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-447">You can also use Wireshark, Microsoft Message Analyzer, or Tcping tooinvestigate network connectivity issues from hello client.</span></span> <span data-ttu-id="8c9ce-448">Эти средства, описанные в hello [приложения].</span><span class="sxs-lookup"><span data-stu-id="8c9ce-448">These tools are described in hello [Appendices].</span></span>

### <span data-ttu-id="8c9ce-449"><a name="the-client-is-receiving-403-messages"></a>Hello клиент получает сообщения HTTP 403 (запрещено)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-449"><a name="the-client-is-receiving-403-messages"></a>hello client is receiving HTTP 403 (Forbidden) messages</span></span>
<span data-ttu-id="8c9ce-450">Если клиентское приложение создает ошибки HTTP 403 (запрещено), вероятной причиной является, hello клиентом просроченных общих подписи доступа (SAS) при отправке запроса хранилища (хотя ключами часов наклона, недопустимый другие возможные причины и пустым заголовки).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-450">If your client application is throwing HTTP 403 (Forbidden) errors, a likely cause is that hello client is using an expired Shared Access Signature (SAS) when it sends a storage request (although other possible causes include clock skew, invalid keys, and empty headers).</span></span> <span data-ttu-id="8c9ce-451">Ключ SAS истекшим сроком действия является причиной hello, не увидят все записи в hello серверных данных журнала хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-451">If an expired SAS key is hello cause, you will not see any entries in hello server-side Storage Logging log data.</span></span> <span data-ttu-id="8c9ce-452">Hello следующей таблице показан пример из журнала клиентские hello, созданные hello клиентской библиотеки хранилища, который иллюстрирует появление этой проблемы:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-452">hello following table shows a sample from hello client-side log generated by hello Storage Client Library that illustrates this issue occurring:</span></span>

| <span data-ttu-id="8c9ce-453">Источник</span><span class="sxs-lookup"><span data-stu-id="8c9ce-453">Source</span></span> | <span data-ttu-id="8c9ce-454">Уровень детализации</span><span class="sxs-lookup"><span data-stu-id="8c9ce-454">Verbosity</span></span> | <span data-ttu-id="8c9ce-455">Уровень детализации</span><span class="sxs-lookup"><span data-stu-id="8c9ce-455">Verbosity</span></span> | <span data-ttu-id="8c9ce-456">Идентификатор запроса клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-456">Client request id</span></span> | <span data-ttu-id="8c9ce-457">Operation Text</span><span class="sxs-lookup"><span data-stu-id="8c9ce-457">Operation text</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="8c9ce-458">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-458">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-459">Информация</span><span class="sxs-lookup"><span data-stu-id="8c9ce-459">Information</span></span> |<span data-ttu-id="8c9ce-460">3</span><span class="sxs-lookup"><span data-stu-id="8c9ce-460">3</span></span> |<span data-ttu-id="8c9ce-461">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-461">85d077ab-…</span></span> |<span data-ttu-id="8c9ce-462">Начинается выполнение операции с расположением «Основное» в режиме расположения PrimaryOnly.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-462">Starting operation with location Primary per location mode PrimaryOnly.</span></span> |
| <span data-ttu-id="8c9ce-463">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-463">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-464">Информация</span><span class="sxs-lookup"><span data-stu-id="8c9ce-464">Information</span></span> |<span data-ttu-id="8c9ce-465">3</span><span class="sxs-lookup"><span data-stu-id="8c9ce-465">3</span></span> |<span data-ttu-id="8c9ce-466">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-466">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-467">Запуск синхронный запрос toohttps://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr = c&amp;si = mypolicy&amp;sig = OFnd4Rd7z01fIvh % 2BmcR6zbudIH2F5Ikm % 2FyhNYZEmJNQ % 3D&amp;api-version = 2014-02-14.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-467">Starting synchronous request toohttps://domemaildist.blob.core.windows.netazureimblobcontainer/blobCreatedViaSAS.txt?sv=2014-02-14&amp;sr=c&amp;si=mypolicy&amp;sig=OFnd4Rd7z01fIvh%2BmcR6zbudIH2F5Ikm%2FyhNYZEmJNQ%3D&amp;api-version=2014-02-14.</span></span> |
| <span data-ttu-id="8c9ce-468">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-468">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-469">Информация</span><span class="sxs-lookup"><span data-stu-id="8c9ce-469">Information</span></span> |<span data-ttu-id="8c9ce-470">3</span><span class="sxs-lookup"><span data-stu-id="8c9ce-470">3</span></span> |<span data-ttu-id="8c9ce-471">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-471">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-472">Waiting for response (Ожидание ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-472">Waiting for response.</span></span> |
| <span data-ttu-id="8c9ce-473">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-473">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-474">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="8c9ce-474">Warning</span></span> |<span data-ttu-id="8c9ce-475">2</span><span class="sxs-lookup"><span data-stu-id="8c9ce-475">2</span></span> |<span data-ttu-id="8c9ce-476">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-476">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-477">Исключение, которое выдается при ожидании ответа: hello удаленный сервер вернул ошибку: (403) запрещено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-477">Exception thrown while waiting for response: hello remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="8c9ce-478">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-478">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-479">Информация</span><span class="sxs-lookup"><span data-stu-id="8c9ce-479">Information</span></span> |<span data-ttu-id="8c9ce-480">3</span><span class="sxs-lookup"><span data-stu-id="8c9ce-480">3</span></span> |<span data-ttu-id="8c9ce-481">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-481">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-482">Response received.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-482">Response received.</span></span> <span data-ttu-id="8c9ce-483">Код состояния = 403; идентификатор запроса = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d; Content-MD5 = ; ETag = .</span><span class="sxs-lookup"><span data-stu-id="8c9ce-483">Status code = 403, Request ID = 9d67c64a-64ed-4b0d-9515-3b14bbcdc63d, Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="8c9ce-484">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-484">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-485">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="8c9ce-485">Warning</span></span> |<span data-ttu-id="8c9ce-486">2</span><span class="sxs-lookup"><span data-stu-id="8c9ce-486">2</span></span> |<span data-ttu-id="8c9ce-487">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-487">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-488">Исключение, возникшее во время операции hello: hello удаленный сервер вернул ошибку: (403) запрещено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-488">Exception thrown during hello operation: hello remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="8c9ce-489">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-489">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-490">Информация</span><span class="sxs-lookup"><span data-stu-id="8c9ce-490">Information</span></span> |<span data-ttu-id="8c9ce-491">3</span><span class="sxs-lookup"><span data-stu-id="8c9ce-491">3</span></span> |<span data-ttu-id="8c9ce-492">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-492">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-493">Проверка, если следует повторить операцию hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-493">Checking if hello operation should be retried.</span></span> <span data-ttu-id="8c9ce-494">Число повторных попыток = 0, код состояния HTTP 403, исключение = = hello удаленный сервер вернул ошибку: (403) запрещено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-494">Retry count = 0, HTTP status code = 403, Exception = hello remote server returned an error: (403) Forbidden..</span></span> |
| <span data-ttu-id="8c9ce-495">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-495">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-496">Информация</span><span class="sxs-lookup"><span data-stu-id="8c9ce-496">Information</span></span> |<span data-ttu-id="8c9ce-497">3</span><span class="sxs-lookup"><span data-stu-id="8c9ce-497">3</span></span> |<span data-ttu-id="8c9ce-498">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-498">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-499">следующее расположение Hello задал tooPrimary, в зависимости от режима расположение hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-499">hello next location has been set tooPrimary, based on hello location mode.</span></span> |
| <span data-ttu-id="8c9ce-500">Microsoft.WindowsAzure.Storage</span><span class="sxs-lookup"><span data-stu-id="8c9ce-500">Microsoft.WindowsAzure.Storage</span></span> |<span data-ttu-id="8c9ce-501">Ошибка</span><span class="sxs-lookup"><span data-stu-id="8c9ce-501">Error</span></span> |<span data-ttu-id="8c9ce-502">1</span><span class="sxs-lookup"><span data-stu-id="8c9ce-502">1</span></span> |<span data-ttu-id="8c9ce-503">85d077ab -…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-503">85d077ab -…</span></span> |<span data-ttu-id="8c9ce-504">Retry policy did not allow for a retry.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-504">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="8c9ce-505">Появления hello удаленный сервер вернул ошибку: (403) запрещено.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-505">Failing with hello remote server returned an error: (403) Forbidden.</span></span> |

<span data-ttu-id="8c9ce-506">В этом случае следует проверить, почему срок действия маркера SAS hello перед hello клиент отправляет серверу маркера toohello hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-506">In this scenario, you should investigate why hello SAS token is expiring before hello client sends hello token toohello server:</span></span>

* <span data-ttu-id="8c9ce-507">Обычно не следует задавать время начала, при создании SAS для toouse клиент немедленно.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-507">Typically, you should not set a start time when you create a SAS for a client toouse immediately.</span></span> <span data-ttu-id="8c9ce-508">При наличии небольшого часов различия между узла hello создания с помощью SAS hello hello текущего времени и службы хранилища hello, то tooreceive службы hello хранения SAS, который еще не действителен.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-508">If there are small clock differences between hello host generating hello SAS using hello current time and hello storage service, then it is possible for hello storage service tooreceive a SAS that is not yet valid.</span></span>
* <span data-ttu-id="8c9ce-509">Не задавайте для SAS слишком короткий срок действия.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-509">You should not set a very short expiry time on a SAS.</span></span> <span data-ttu-id="8c9ce-510">Опять же, часов различия между узлом hello создания hello SAS и службы хранилища hello может привести tooa SAS внешне истекает раньше, чем ожидалось.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-510">Again, small clock differences between hello host generating hello SAS and hello storage service can lead tooa SAS apparently expiring earlier than anticipated.</span></span>
* <span data-ttu-id="8c9ce-511">Здравствуйте, параметр version в ключе SAS hello (например **sv = 2012-02-12**) соответствие версии hello hello использовании клиентской библиотеки хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-511">Does hello version parameter in hello SAS key (for example **sv=2012-02-12**) match hello version of hello Storage Client Library you are using.</span></span> <span data-ttu-id="8c9ce-512">Следует всегда использовать последнюю версию клиентской библиотеки хранилища hello hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-512">You should always use hello latest version of hello Storage Client Library.</span></span> <span data-ttu-id="8c9ce-513">Дополнительные сведения об управлении версиями маркеров SAS см. в статье [Новые возможности службы хранилища Microsoft Azure на TechEd 2014](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/14/what-s-new-for-microsoft-azure-storage-at-teched-2014.aspx).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-513">For more information about SAS token versioning, see [What's new for Microsoft Azure Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/05/14/what-s-new-for-microsoft-azure-storage-at-teched-2014.aspx).</span></span>
* * <span data-ttu-id="8c9ce-514">При повторном создании ключей доступа к хранилищу (щелкните **управление ключами доступа** на любой странице вашей учетной записи хранилища в hello классический портал Azure) это может сделать недействительными все существующие токены SAS.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-514">If you regenerate your storage access keys (click **Manage Access Keys** on any page in your storage account in hello Azure Classic Portal) this can invalidate any existing SAS tokens.</span></span> <span data-ttu-id="8c9ce-515">Это может быть проблемой при создании маркера SAS с длинный срок для клиентских приложений toocache.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-515">This may be an issue if you generate SAS tokens with a long expiry time for client applications toocache.</span></span>

<span data-ttu-id="8c9ce-516">При использовании токенов SAS toogenerate hello клиентской библиотеки хранилища является просто toobuild допустимый токен.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-516">If you are using hello Storage Client Library toogenerate SAS tokens, then it is easy toobuild a valid token.</span></span> <span data-ttu-id="8c9ce-517">Тем не менее, если вручную создав маркеры SAS hello и использование интерфейса API REST хранилища hello следует внимательно прочитайте раздел hello <a href="http://msdn.microsoft.com/library/azure/ee395415.aspx" target="_blank">Делегирование доступа с подписью общего доступа</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-517">However, if you are using hello Storage REST API and constructing hello SAS tokens by hand you should carefully read hello topic <a href="http://msdn.microsoft.com/library/azure/ee395415.aspx" target="_blank">Delegating Access with a Shared Access Signature</a> on MSDN.</span></span>

### <span data-ttu-id="8c9ce-518"><a name="the-client-is-receiving-404-messages"></a>Получает ошибки HTTP 404 (не найдено) сообщения приветствия клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-518"><a name="the-client-is-receiving-404-messages"></a>hello client is receiving HTTP 404 (Not found) messages</span></span>
<span data-ttu-id="8c9ce-519">Если клиентское приложение hello получает сообщение HTTP 404 (не найдено) с сервера hello, это означает, этот клиент hello hello объекта попытка toouse (например, сущность, таблицы, BLOB-объекта, контейнера или очереди) не существует в службе хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-519">If hello client application receives an HTTP 404 (Not found) message from hello server, this implies that hello object hello client was attempting toouse (such as an entity, table, blob, container, or queue) does not exist in hello storage service.</span></span> <span data-ttu-id="8c9ce-520">Это может быть вызвано несколькими причинами, включая перечисленные ниже.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-520">There are a number of possible reasons for this, such as:</span></span>

* <span data-ttu-id="8c9ce-521">[Hello клиента или другой процесс удален ранее hello объекта]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-521">[hello client or another process previously deleted hello object]</span></span>
* <span data-ttu-id="8c9ce-522">[Проблема с авторизацией подписанного URL-адреса (SAS)]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-522">[A Shared Access Signature (SAS) authorization issue]</span></span>
* <span data-ttu-id="8c9ce-523">[Код JavaScript на стороне клиента не имеет разрешений tooaccess hello объекта]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-523">[Client-side JavaScript code does not have permission tooaccess hello object]</span></span>
* <span data-ttu-id="8c9ce-524">[Сбой сети]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-524">[Network failure]</span></span>

#### <span data-ttu-id="8c9ce-525"><a name="client-previously-deleted-the-object"></a>Hello клиента или другой процесс удален ранее hello объекта</span><span class="sxs-lookup"><span data-stu-id="8c9ce-525"><a name="client-previously-deleted-the-object"></a>hello client or another process previously deleted hello object</span></span>
<span data-ttu-id="8c9ce-526">В сценариях, где hello клиент пытается tooread, обновления или удаления данных в службе хранилища, обычно легко tooidentify на стороне сервера hello записывает предыдущей операции, которые удалены из службы хранилища hello hello объекта.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-526">In scenarios where hello client is attempting tooread, update, or delete data in a storage service it is usually easy tooidentify in hello server-side logs a previous operation that deleted hello object in question from hello storage service.</span></span> <span data-ttu-id="8c9ce-527">Очень часто данные журнала hello показывают, другого объекта удаленного hello пользователем или процессом.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-527">Very often, hello log data shows that another user or process deleted hello object.</span></span> <span data-ttu-id="8c9ce-528">В журнале ведения журнала хранилища серверных hello hello тип операции и запрошенный объект ключа-столбцы показывают удаления объекта клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-528">In hello server-side Storage Logging log, hello operation-type and requested-object-key columns show when a client deleted an object.</span></span>

<span data-ttu-id="8c9ce-529">В сценарии hello, где клиент пытается tooinsert объекта может оказаться неочевидным почему это приводит в ответе HTTP 404 (не найдено), учитывая, что hello клиента создается новый объект.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-529">In hello scenario where a client is attempting tooinsert an object, it may not be immediately obvious why this results in an HTTP 404 (Not found) response given that hello client is creating a new object.</span></span> <span data-ttu-id="8c9ce-530">Однако hello клиента при создании большого двоичного объекта, он должен быть контейнер больших двоичных объектов может toofind hello, hello клиента при создании сообщения, он должен быть доступ toofind очереди и добавляя строку hello клиента должен быть таблицы может toofind hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-530">However, if hello client is creating a blob it must be able toofind hello blob container, if hello client is creating a message it must be able toofind a queue, and if hello client is adding a row it must be able toofind hello table.</span></span>

<span data-ttu-id="8c9ce-531">Можно использовать hello журнала клиентской части из toogain клиентской библиотеки хранилища hello, который возвращает более подробное представление о когда hello клиент отправляет определенные запросы toohello службы хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-531">You can use hello client-side log from hello Storage Client Library toogain a more detailed understanding of when hello client sends specific requests toohello storage service.</span></span>

<span data-ttu-id="8c9ce-532">Hello следующий журнал клиентские библиотеки Storage Client hello иллюстрирует проблему hello hello клиенту не удается найти контейнер hello для hello большого двоичного объекта, который создается.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-532">hello following client-side log generated by hello Storage Client library illustrates hello problem when hello client cannot find hello container for hello blob it is creating.</span></span> <span data-ttu-id="8c9ce-533">Этот журнал содержит сведения о следующих операций сохранения hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-533">This log includes details of hello following storage operations:</span></span>

| <span data-ttu-id="8c9ce-534">Request ID (ИД запроса)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-534">Request ID</span></span> | <span data-ttu-id="8c9ce-535">Операция</span><span class="sxs-lookup"><span data-stu-id="8c9ce-535">Operation</span></span> |
| --- | --- |
| <span data-ttu-id="8c9ce-536">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-536">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-537">**DeleteIfExists** контейнер больших двоичных объектов метод toodelete hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-537">**DeleteIfExists** method toodelete hello blob container.</span></span> <span data-ttu-id="8c9ce-538">Обратите внимание, что эта операция включает **HEAD** запроса toocheck наличие hello hello контейнера.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-538">Note that this operation includes a **HEAD** request toocheck for hello existence of hello container.</span></span> |
| <span data-ttu-id="8c9ce-539">e2d06d78-…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-539">e2d06d78…</span></span> |<span data-ttu-id="8c9ce-540">**CreateIfNotExists** контейнер больших двоичных объектов метод toocreate hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-540">**CreateIfNotExists** method toocreate hello blob container.</span></span> <span data-ttu-id="8c9ce-541">Обратите внимание, что эта операция включает **HEAD** запрос, который проверяет наличие hello hello контейнера.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-541">Note that this operation includes a **HEAD** request that checks for hello existence of hello container.</span></span> <span data-ttu-id="8c9ce-542">Hello **HEAD** возвращает сообщение, 404, но будет продолжена.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-542">hello **HEAD** returns a 404 message but continues.</span></span> |
| <span data-ttu-id="8c9ce-543">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-543">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-544">**UploadFromStream** метод toocreate hello и больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-544">**UploadFromStream** method toocreate hello blob.</span></span> <span data-ttu-id="8c9ce-545">Hello **ПОМЕСТИТЬ** запрос завершится ошибкой с сообщением 404</span><span class="sxs-lookup"><span data-stu-id="8c9ce-545">hello **PUT** request fails with a 404 message</span></span> |

<span data-ttu-id="8c9ce-546">Записи журнала:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-546">Log entries:</span></span>

| <span data-ttu-id="8c9ce-547">Request ID (ИД запроса)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-547">Request ID</span></span> | <span data-ttu-id="8c9ce-548">Operation Text</span><span class="sxs-lookup"><span data-stu-id="8c9ce-548">Operation Text</span></span> |
| --- | --- |
| <span data-ttu-id="8c9ce-549">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-549">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-550">Запуск toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer синхронный запрос.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-550">Starting synchronous request toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="8c9ce-551">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-551">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-552">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-552">StringToSign = HEAD............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:11 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="8c9ce-553">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-553">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-554">Waiting for response (Ожидание ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-554">Waiting for response.</span></span> |
| <span data-ttu-id="8c9ce-555">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-555">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-556">Response received.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-556">Response received.</span></span> <span data-ttu-id="8c9ce-557">Status code = 200, Request ID = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-557">Status code = 200, Request ID = eeead849-...Content-MD5 = , ETag =    &quot;0x8D14D2DC63D059B&quot;.</span></span> |
| <span data-ttu-id="8c9ce-558">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-558">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-559">Заголовки ответа были обработаны успешно, по rest hello hello операции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-559">Response headers were processed successfully, proceeding with hello rest of hello operation.</span></span> |
| <span data-ttu-id="8c9ce-560">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-560">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-561">Downloading response body (Загружается тело ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-561">Downloading response body.</span></span> |
| <span data-ttu-id="8c9ce-562">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-562">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-563">Operation completed successfully (Операция выполнена успешно).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-563">Operation completed successfully.</span></span> |
| <span data-ttu-id="8c9ce-564">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-564">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-565">Запуск toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer синхронный запрос.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-565">Starting synchronous request toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="8c9ce-566">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-566">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-567">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-567">StringToSign = DELETE............x-ms-client-request-id:07b26a5d-....x-ms-date:Tue, 03 Jun 2014 10:33:12    GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="8c9ce-568">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-568">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-569">Waiting for response (Ожидание ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-569">Waiting for response.</span></span> |
| <span data-ttu-id="8c9ce-570">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-570">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-571">Response received.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-571">Response received.</span></span> <span data-ttu-id="8c9ce-572">Status code = 202, Request ID = eeead849-...Content-MD5 = , ETag = . (Ответ получен. Код состояния = 202, ИД запроса = eeead849-...Content-MD5 = , ETag = .)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-572">Status code = 202, Request ID = 6ab2a4cf-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="8c9ce-573">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-573">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-574">Заголовки ответа были обработаны успешно, по rest hello hello операции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-574">Response headers were processed successfully, proceeding with hello rest of hello operation.</span></span> |
| <span data-ttu-id="8c9ce-575">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-575">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-576">Downloading response body (Загружается тело ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-576">Downloading response body.</span></span> |
| <span data-ttu-id="8c9ce-577">07b26a5d-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-577">07b26a5d-...</span></span> |<span data-ttu-id="8c9ce-578">Operation completed successfully (Операция выполнена успешно).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-578">Operation completed successfully.</span></span> |
| <span data-ttu-id="8c9ce-579">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-579">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-580">Запуск toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer асинхронного запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-580">Starting asynchronous request toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span></td> |
| <span data-ttu-id="8c9ce-581">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-581">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-582">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-582">StringToSign = HEAD............x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="8c9ce-583">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-583">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-584">Waiting for response (Ожидание ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-584">Waiting for response.</span></span> |
| <span data-ttu-id="8c9ce-585">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-585">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-586">Запуск toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt синхронный запрос.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-586">Starting synchronous request toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="8c9ce-587">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-587">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-588">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-588">StringToSign = PUT...64.qCmF+TQLPhq/YYK50mP9ZQ==........x-ms-blob-type:BlockBlob.x-ms-client-request-id:de8b1c3c-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer/blobCreated.txt.</span></span> |
| <span data-ttu-id="8c9ce-589">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-589">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-590">Подготовка данных toowrite запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-590">Preparing toowrite request data.</span></span> |
| <span data-ttu-id="8c9ce-591">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-591">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-592">Исключение, которое выдается при ожидании ответа: hello удаленный сервер вернул ошибку: (404) не найдено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-592">Exception thrown while waiting for response: hello remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="8c9ce-593">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-593">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-594">Response received.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-594">Response received.</span></span> <span data-ttu-id="8c9ce-595">Status code = 404, Request ID = 353ae3bc-..., Content-MD5 = , ETag = . (Ответ получен. Код состояния = 404, ИД запроса = 353ae3bc-..., Content-MD5 = , ETag = .)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-595">Status code = 404, Request ID = 353ae3bc-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="8c9ce-596">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-596">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-597">Заголовки ответа были обработаны успешно, по rest hello hello операции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-597">Response headers were processed successfully, proceeding with hello rest of hello operation.</span></span> |
| <span data-ttu-id="8c9ce-598">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-598">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-599">Downloading response body (Загружается тело ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-599">Downloading response body.</span></span> |
| <span data-ttu-id="8c9ce-600">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-600">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-601">Operation completed successfully (Операция выполнена успешно).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-601">Operation completed successfully.</span></span> |
| <span data-ttu-id="8c9ce-602">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-602">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-603">Запуск toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer асинхронного запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-603">Starting asynchronous request toohttps://domemaildist.blob.core.windows.net/azuremmblobcontainer.</span></span> |
| <span data-ttu-id="8c9ce-604">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-604">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-605">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-605">StringToSign = PUT...0.........x-ms-client-request-id:e2d06d78-....x-ms-date:Tue, 03 Jun 2014 10:33:12 GMT.x-ms-version:2014-02-14./domemaildist/azuremmblobcontainer.restype:container.</span></span> |
| <span data-ttu-id="8c9ce-606">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-606">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-607">Waiting for response (Ожидание ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-607">Waiting for response.</span></span> |
| <span data-ttu-id="8c9ce-608">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-608">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-609">Writing request data (Запись данных запроса).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-609">Writing request data.</span></span> |
| <span data-ttu-id="8c9ce-610">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-610">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-611">Waiting for response (Ожидание ответа).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-611">Waiting for response.</span></span> |
| <span data-ttu-id="8c9ce-612">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-612">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-613">Исключение, которое выдается при ожидании ответа: hello удаленный сервер вернул ошибку: (409) конфликт...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-613">Exception thrown while waiting for response: hello remote server returned an error: (409) Conflict..</span></span> |
| <span data-ttu-id="8c9ce-614">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-614">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-615">Response received.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-615">Response received.</span></span> <span data-ttu-id="8c9ce-616">Status code = 409, Request ID = c27da20e-..., Content-MD5 = , ETag = . (Ответ получен. Код состояния = 409, ИД запроса = c27da20e-..., Content-MD5 = , ETag = .)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-616">Status code = 409, Request ID = c27da20e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="8c9ce-617">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-617">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-618">Downloading error response body (Загружается тело ответа с ошибкой).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-618">Downloading error response body.</span></span> |
| <span data-ttu-id="8c9ce-619">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-619">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-620">Исключение, которое выдается при ожидании ответа: hello удаленный сервер вернул ошибку: (404) не найдено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-620">Exception thrown while waiting for response: hello remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="8c9ce-621">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-621">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-622">Response received.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-622">Response received.</span></span> <span data-ttu-id="8c9ce-623">Status code = 404, Request ID = 0eaeab3e-..., Content-MD5 = , ETag = . (Ответ получен. Код состояния = 404, ИД запроса = 0eaeab3e-..., Content-MD5 = , ETag = .)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-623">Status code = 404, Request ID = 0eaeab3e-..., Content-MD5 = , ETag = .</span></span> |
| <span data-ttu-id="8c9ce-624">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-624">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-625">Исключение, возникшее во время операции hello: hello удаленный сервер вернул ошибку: (404) не найдено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-625">Exception thrown during hello operation: hello remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="8c9ce-626">de8b1c3c-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-626">de8b1c3c-...</span></span> |<span data-ttu-id="8c9ce-627">Retry policy did not allow for a retry.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-627">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="8c9ce-628">Появления hello удаленный сервер вернул ошибку: (404) не найдено...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-628">Failing with hello remote server returned an error: (404) Not Found..</span></span> |
| <span data-ttu-id="8c9ce-629">e2d06d78-...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-629">e2d06d78-...</span></span> |<span data-ttu-id="8c9ce-630">Retry policy did not allow for a retry.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-630">Retry policy did not allow for a retry.</span></span> <span data-ttu-id="8c9ce-631">Появления hello удаленный сервер вернул ошибку: (409) конфликт...</span><span class="sxs-lookup"><span data-stu-id="8c9ce-631">Failing with hello remote server returned an error: (409) Conflict..</span></span> |

<span data-ttu-id="8c9ce-632">В этом примере hello журнала видно, что этот клиент hello чередованием запросы от hello **CreateIfNotExists** метод (запрос идентификатор e2d06d78...) с hello запросы от hello **UploadFromStream** метод () de8b1c3c-...); Это происходит потому, что клиентское приложение hello асинхронном вызове этих методов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-632">In this example, hello log shows that hello client is interleaving requests from hello **CreateIfNotExists** method (request id e2d06d78…) with hello requests from hello **UploadFromStream** method (de8b1c3c-...); this is happening because hello client application is invoking these methods asynchronously.</span></span> <span data-ttu-id="8c9ce-633">Следует изменить асинхронного кода hello в tooensure hello клиента, что он создает контейнер hello перед выполнением tooupload любого большого двоичного объекта данных tooa в этом контейнере.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-633">You should modify hello asynchronous code in hello client tooensure that it creates hello container before attempting tooupload any data tooa blob in that container.</span></span> <span data-ttu-id="8c9ce-634">В идеале нужно создавать все контейнеры заранее.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-634">Ideally, you should create all your containers in advance.</span></span>

#### <span data-ttu-id="8c9ce-635"><a name="SAS-authorization-issue"></a>Проблема с авторизацией подписанного URL-адреса (SAS)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-635"><a name="SAS-authorization-issue"></a>A Shared Access Signature (SAS) authorization issue</span></span>
<span data-ttu-id="8c9ce-636">Клиентское приложение hello toouse ключ SAS, который не поддерживает hello необходимые разрешения для операции hello, если служба хранилища hello возвращает клиент toohello сообщения HTTP 404 (не найдено).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-636">If hello client application attempts toouse a SAS key that does not include hello necessary permissions for hello operation, hello storage service returns an HTTP 404 (Not found) message toohello client.</span></span> <span data-ttu-id="8c9ce-637">В hello же время, вы также увидите ненулевое значение для **SASAuthorizationError** hello метрик.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-637">At hello same time, you will also see a non-zero value for **SASAuthorizationError** in hello metrics.</span></span>

<span data-ttu-id="8c9ce-638">Hello в следующей таблице показан пример журнала серверной части сообщения из файла журнала ведения журнала хранилища hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-638">hello following table shows a sample server-side log message from hello Storage Logging log file:</span></span>

| <span data-ttu-id="8c9ce-639">Имя</span><span class="sxs-lookup"><span data-stu-id="8c9ce-639">Name</span></span> | <span data-ttu-id="8c9ce-640">Значение</span><span class="sxs-lookup"><span data-stu-id="8c9ce-640">Value</span></span> |
| --- | --- |
| <span data-ttu-id="8c9ce-641">Request start time (Время начала запроса)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-641">Request start time</span></span> | <span data-ttu-id="8c9ce-642">2014-05-30T06:17:48.4473697Z</span><span class="sxs-lookup"><span data-stu-id="8c9ce-642">2014-05-30T06:17:48.4473697Z</span></span> |
| <span data-ttu-id="8c9ce-643">Operation type (Тип операции)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-643">Operation type</span></span>     | <span data-ttu-id="8c9ce-644">GetBlobProperties</span><span class="sxs-lookup"><span data-stu-id="8c9ce-644">GetBlobProperties</span></span>            |
| <span data-ttu-id="8c9ce-645">Request status (Состояние запроса)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-645">Request status</span></span>     | <span data-ttu-id="8c9ce-646">SASAuthorizationError</span><span class="sxs-lookup"><span data-stu-id="8c9ce-646">SASAuthorizationError</span></span>        |
| <span data-ttu-id="8c9ce-647">HTTP status code (Код состояния HTTP)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-647">HTTP status code</span></span>   | <span data-ttu-id="8c9ce-648">404</span><span class="sxs-lookup"><span data-stu-id="8c9ce-648">404</span></span>                          |
| <span data-ttu-id="8c9ce-649">Authentication type (Тип проверки подлинности)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-649">Authentication type</span></span>| <span data-ttu-id="8c9ce-650">SAS</span><span class="sxs-lookup"><span data-stu-id="8c9ce-650">Sas</span></span>                          |
| <span data-ttu-id="8c9ce-651">Service type (Тип службы)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-651">Service type</span></span>       | <span data-ttu-id="8c9ce-652">BLOB-объект</span><span class="sxs-lookup"><span data-stu-id="8c9ce-652">Blob</span></span>                         |
| <span data-ttu-id="8c9ce-653">Request URL (URL-адрес запроса)</span><span class="sxs-lookup"><span data-stu-id="8c9ce-653">Request URL</span></span>        | <span data-ttu-id="8c9ce-654">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span><span class="sxs-lookup"><span data-stu-id="8c9ce-654">https://domemaildist.blob.core.windows.net/azureimblobcontainer/blobCreatedViaSAS.txt</span></span> |
| <span data-ttu-id="8c9ce-655">nbsp;</span><span class="sxs-lookup"><span data-stu-id="8c9ce-655">nbsp;</span></span>              |   <span data-ttu-id="8c9ce-656">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span><span class="sxs-lookup"><span data-stu-id="8c9ce-656">?sv=2014-02-14&sr=c&si=mypolicy&sig=XXXXX&;api-version=2014-02-14</span></span> |
| <span data-ttu-id="8c9ce-657">Request ID header</span><span class="sxs-lookup"><span data-stu-id="8c9ce-657">Request id header</span></span>  | <span data-ttu-id="8c9ce-658">a1f348d5-8032-4912-93ef-b393e5252a3b</span><span class="sxs-lookup"><span data-stu-id="8c9ce-658">a1f348d5-8032-4912-93ef-b393e5252a3b</span></span> |
| <span data-ttu-id="8c9ce-659">Идентификатор запроса клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-659">Client request ID</span></span>  | <span data-ttu-id="8c9ce-660">2d064953-8436-4ee0-aa0c-65cb874f7929</span><span class="sxs-lookup"><span data-stu-id="8c9ce-660">2d064953-8436-4ee0-aa0c-65cb874f7929</span></span> |

<span data-ttu-id="8c9ce-661">Следует изучить, почему клиентское приложение пытается tooperform, он не имеет разрешения для операции.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-661">You should investigate why your client application is attempting tooperform an operation it has not been granted permissions for.</span></span>

#### <span data-ttu-id="8c9ce-662"><a name="JavaScript-code-does-not-have-permission"></a>Код JavaScript на стороне клиента не имеет разрешений tooaccess hello объекта</span><span class="sxs-lookup"><span data-stu-id="8c9ce-662"><a name="JavaScript-code-does-not-have-permission"></a>Client-side JavaScript code does not have permission tooaccess hello object</span></span>
<span data-ttu-id="8c9ce-663">Если вы используете клиент JavaScript и служб хранилища hello возвращает сообщения HTTP 404, необходимо проверить следующие ошибки JavaScript в браузере hello hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-663">If you are using a JavaScript client and hello storage service is returning HTTP 404 messages, you check for hello following JavaScript errors in hello browser:</span></span>

```
SEC7120: Origin http://localhost:56309 not found in Access-Control-Allow-Origin header.
SCRIPT7002: XMLHttpRequest: Network Error 0x80070005, Access is denied.
```

> [!NOTE]
> <span data-ttu-id="8c9ce-664">Можно использовать инструменты разработчика F12 hello в Internet Explorer tootrace hello сообщений, передаваемых между браузером hello и службы хранилища hello, при диагностике проблем JavaScript на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-664">You can use hello F12 Developer Tools in Internet Explorer tootrace hello messages exchanged between hello browser and hello storage service when you are troubleshooting client-side JavaScript issues.</span></span>
> 
> 

<span data-ttu-id="8c9ce-665">Эти ошибки вызваны, так как веб-браузер hello реализует hello <a href="http://www.w3.org/Security/wiki/Same_Origin_Policy" target="_blank">политика одного источника</a> обусловлены ограничения безопасности, который предотвращает вызова интерфейса API в другом домене со страницы приветствия hello домена на веб-странице.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-665">These errors occur because hello web browser implements hello <a href="http://www.w3.org/Security/wiki/Same_Origin_Policy" target="_blank">same-origin policy</a> security restriction that prevents a web page from calling an API in a different domain from hello domain hello page comes from.</span></span>

<span data-ttu-id="8c9ce-666">toowork вокруг hello проблема JavaScript вы можете настроить Cross источника ресурсов для управления доступом (CORS) для службы hello hello хранилища клиент обращается к.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-666">toowork around hello JavaScript issue, you can configure Cross Origin Resource Sharing (CORS) for hello storage service hello client is accessing.</span></span> <span data-ttu-id="8c9ce-667">Дополнительные сведения см. в статье <a href="http://msdn.microsoft.com/library/azure/dn535601.aspx" target="_blank">Поддержка общего доступа к ресурсам независимо от источника (CORS) для служб хранилища Azure</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-667">For more information, see <a href="http://msdn.microsoft.com/library/azure/dn535601.aspx" target="_blank">Cross-Origin Resource Sharing (CORS) Support for Azure Storage Services</a> on MSDN.</span></span>

<span data-ttu-id="8c9ce-668">Hello, следующий пример кода показывает, как tooconfigure вашей службы BLOB-объектов tooallow JavaScript, которые выполняются в hello tooaccess домена Contoso большой двоичный объект в службе хранилища BLOB-объектов:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-668">hello following code sample shows how tooconfigure your blob service tooallow JavaScript running in hello Contoso domain tooaccess a blob in your blob storage service:</span></span>

```csharp
CloudBlobClient client = new CloudBlobClient(blobEndpoint, new StorageCredentials(accountName, accountKey));
// Set hello service properties.
ServiceProperties sp = client.GetServiceProperties();
sp.DefaultServiceVersion = "2013-08-15";
CorsRule cr = new CorsRule();
cr.AllowedHeaders.Add("*");
cr.AllowedMethods = CorsHttpMethods.Get | CorsHttpMethods.Put;
cr.AllowedOrigins.Add("http://www.contoso.com");
cr.ExposedHeaders.Add("x-ms-*");
cr.MaxAgeInSeconds = 5;
sp.Cors.CorsRules.Clear();
sp.Cors.CorsRules.Add(cr);
client.SetServiceProperties(sp);
```

#### <span data-ttu-id="8c9ce-669"><a name="network-failure"></a>Сбой сети</span><span class="sxs-lookup"><span data-stu-id="8c9ce-669"><a name="network-failure"></a>Network Failure</span></span>
<span data-ttu-id="8c9ce-670">В некоторых случаях потеряны сетевых пакетов может привести службы хранилища toohello возврат клиента toohello сообщения HTTP 404.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-670">In some circumstances, lost network packets can lead toohello storage service returning HTTP 404 messages toohello client.</span></span> <span data-ttu-id="8c9ce-671">Например, если клиентское приложение удаляет сущность из службы таблиц hello см hello клиента вызывать исключение отчетов хранилища «HTTP 404 (не найдено)» сообщение о состоянии от службы таблиц hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-671">For example, when your client application is deleting an entity from hello table service you see hello client throw a storage exception reporting an "HTTP 404 (Not Found)" status message from hello table service.</span></span> <span data-ttu-id="8c9ce-672">При исследовании таблицы hello в службы хранилища таблиц hello вы видите, что hello службы был удален hello сущности по запросу.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-672">When you investigate hello table in hello table storage service, you see that hello service did delete hello entity as requested.</span></span>

<span data-ttu-id="8c9ce-673">сведения об исключении Hello в клиенте hello включают идентификатор запроса hello (7e84f12d), назначенный службой таблиц hello для запроса hello: можно использовать этот запрос сведения о toolocate hello в журналах hello хранилища на стороне сервера, выполняя поиск в hello  **заголовок запроса идентификатор** столбца в файле журнала hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-673">hello exception details in hello client include hello request id (7e84f12d…) assigned by hello table service for hello request: you can use this information toolocate hello request details in hello server-side storage logs by searching in hello **request-id-header** column in hello log file.</span></span> <span data-ttu-id="8c9ce-674">Можно также использовать tooidentify метрики hello при сбоев, такие как это возникают и выполните поиск по метрикам hello hello времени файлов журнала hello записываются ошибки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-674">You could also use hello metrics tooidentify when failures such as this occur and then search hello log files based on hello time hello metrics recorded this error.</span></span> <span data-ttu-id="8c9ce-675">Это показывает запись журнала, hello delete завершилась сообщение о состоянии «Клиент HTTP (404) другая ошибка».</span><span class="sxs-lookup"><span data-stu-id="8c9ce-675">This log entry shows that hello delete failed with an "HTTP (404) Client Other Error" status message.</span></span> <span data-ttu-id="8c9ce-676">Hello же записи журнала также включает идентификатор запроса hello, созданных клиентом hello в hello **client-request-id** столбца (813ea74f).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-676">hello same log entry also includes hello request id generated by hello client in hello **client-request-id** column (813ea74f…).</span></span>

<span data-ttu-id="8c9ce-677">Журнал серверные Hello также включает в себя операции с hello же **client-request-id** значение (813ea74f) для успешной операции для удаления hello одной сущности и из hello же клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-677">hello server-side log also includes another entry with hello same **client-request-id** value (813ea74f…) for a successful delete operation for hello same entity, and from hello same client.</span></span> <span data-ttu-id="8c9ce-678">Эта операция успешно delete были внесены непосредственно перед hello не удалось удалить запрос.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-678">This successful delete operation took place very shortly before hello failed delete request.</span></span>

<span data-ttu-id="8c9ce-679">Наиболее вероятной причиной Hello этот сценарий является этот hello клиент отправил запрос delete для hello сущности toohello таблицы службы, которая будет выполнена успешно, но не получил подтверждения с сервера hello (возможно из-за tooa временных проблем с сетью).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-679">hello most likely cause of this scenario is that hello client sent a delete request for hello entity toohello table service, which succeeded, but did not receive an acknowledgement from hello server (perhaps due tooa temporary network issue).</span></span> <span data-ttu-id="8c9ce-680">Hello клиент затем повторная автоматическая попытка добавления hello операции (с помощью hello же **client-request-id**), и эта повторная попытка не удалась, поскольку hello сущность уже была удалена.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-680">hello client then automatically retried hello operation (using hello same **client-request-id**), and this retry failed because hello entity had already been deleted.</span></span>

<span data-ttu-id="8c9ce-681">При частом возникновении этой проблемы следует изучить, почему клиент hello неудачной tooreceive подтверждения от службы таблиц hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-681">If this problem occurs frequently, you should investigate why hello client is failing tooreceive acknowledgements from hello table service.</span></span> <span data-ttu-id="8c9ce-682">Если hello проблема временная, следует перехватывать ошибки «HTTP (404) не найден» hello и вход hello клиента, но разрешить hello toocontinue клиента.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-682">If hello problem is intermittent, you should trap hello "HTTP (404) Not Found" error and log it in hello client, but allow hello client toocontinue.</span></span>

### <span data-ttu-id="8c9ce-683"><a name="the-client-is-receiving-409-messages"></a>Получает HTTP 409 (конфликт) сообщения приветствия клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-683"><a name="the-client-is-receiving-409-messages"></a>hello client is receiving HTTP 409 (Conflict) messages</span></span>
<span data-ttu-id="8c9ce-684">Hello следующей таблице показаны извлечения из журнала hello серверной части для двух операций клиента: **DeleteIfExists** немедленно, а затем **CreateIfNotExists** с помощью hello тем же именем контейнера больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-684">hello following table shows an extract from hello server-side log for two client operations: **DeleteIfExists** followed immediately by **CreateIfNotExists** using hello same blob container name.</span></span> <span data-ttu-id="8c9ce-685">Обратите внимание, что каждой операции клиента приводит к двух запросов, отправленных toohello сервера, сначала **GetContainerProperties** toocheck запрос если hello контейнер существует, за которыми следует hello **DeleteContainer** или  **CreateContainer** запроса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-685">Note that each client operation results in two requests sent toohello server, first a **GetContainerProperties** request toocheck if hello container exists, followed by hello **DeleteContainer** or **CreateContainer** request.</span></span>

| <span data-ttu-id="8c9ce-686">Timestamp</span><span class="sxs-lookup"><span data-stu-id="8c9ce-686">Timestamp</span></span> | <span data-ttu-id="8c9ce-687">Операция</span><span class="sxs-lookup"><span data-stu-id="8c9ce-687">Operation</span></span> | <span data-ttu-id="8c9ce-688">Результат</span><span class="sxs-lookup"><span data-stu-id="8c9ce-688">Result</span></span> | <span data-ttu-id="8c9ce-689">Имя контейнера</span><span class="sxs-lookup"><span data-stu-id="8c9ce-689">Container name</span></span> | <span data-ttu-id="8c9ce-690">Идентификатор запроса клиента</span><span class="sxs-lookup"><span data-stu-id="8c9ce-690">Client request id</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="8c9ce-691">05:10:13.7167225</span><span class="sxs-lookup"><span data-stu-id="8c9ce-691">05:10:13.7167225</span></span> |<span data-ttu-id="8c9ce-692">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="8c9ce-692">GetContainerProperties</span></span> |<span data-ttu-id="8c9ce-693">200</span><span class="sxs-lookup"><span data-stu-id="8c9ce-693">200</span></span> |<span data-ttu-id="8c9ce-694">mmcont</span><span class="sxs-lookup"><span data-stu-id="8c9ce-694">mmcont</span></span> |<span data-ttu-id="8c9ce-695">c9f52c89-…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-695">c9f52c89-…</span></span> |
| <span data-ttu-id="8c9ce-696">05:10:13.8167325</span><span class="sxs-lookup"><span data-stu-id="8c9ce-696">05:10:13.8167325</span></span> |<span data-ttu-id="8c9ce-697">DeleteContainer</span><span class="sxs-lookup"><span data-stu-id="8c9ce-697">DeleteContainer</span></span> |<span data-ttu-id="8c9ce-698">202</span><span class="sxs-lookup"><span data-stu-id="8c9ce-698">202</span></span> |<span data-ttu-id="8c9ce-699">mmcont</span><span class="sxs-lookup"><span data-stu-id="8c9ce-699">mmcont</span></span> |<span data-ttu-id="8c9ce-700">c9f52c89-…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-700">c9f52c89-…</span></span> |
| <span data-ttu-id="8c9ce-701">05:10:13.8987407</span><span class="sxs-lookup"><span data-stu-id="8c9ce-701">05:10:13.8987407</span></span> |<span data-ttu-id="8c9ce-702">GetContainerProperties</span><span class="sxs-lookup"><span data-stu-id="8c9ce-702">GetContainerProperties</span></span> |<span data-ttu-id="8c9ce-703">404</span><span class="sxs-lookup"><span data-stu-id="8c9ce-703">404</span></span> |<span data-ttu-id="8c9ce-704">mmcont</span><span class="sxs-lookup"><span data-stu-id="8c9ce-704">mmcont</span></span> |<span data-ttu-id="8c9ce-705">bc881924-…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-705">bc881924-…</span></span> |
| <span data-ttu-id="8c9ce-706">5:10:14.2147723</span><span class="sxs-lookup"><span data-stu-id="8c9ce-706">05:10:14.2147723</span></span> |<span data-ttu-id="8c9ce-707">CreateContainer</span><span class="sxs-lookup"><span data-stu-id="8c9ce-707">CreateContainer</span></span> |<span data-ttu-id="8c9ce-708">409</span><span class="sxs-lookup"><span data-stu-id="8c9ce-708">409</span></span> |<span data-ttu-id="8c9ce-709">mmcont</span><span class="sxs-lookup"><span data-stu-id="8c9ce-709">mmcont</span></span> |<span data-ttu-id="8c9ce-710">bc881924-…</span><span class="sxs-lookup"><span data-stu-id="8c9ce-710">bc881924-…</span></span> |

<span data-ttu-id="8c9ce-711">Hello код в клиентском приложении hello удаляет и немедленно повторно создает контейнер больших двоичных объектов с помощью hello таким же именем: hello **CreateIfNotExists** метод (запрос клиента идентификатор bc881924-...) в конечном итоге завершается hello HTTP 409 (конфликт) Произошла ошибка.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-711">hello code in hello client application deletes and then immediately recreates a blob container using hello same name: hello **CreateIfNotExists** method (Client request ID bc881924-…) eventually fails with hello HTTP 409 (Conflict) error.</span></span> <span data-ttu-id="8c9ce-712">Когда клиент удаляет контейнеров больших двоичных объектов, таблиц или очередей имеется короткий период перед именем hello снова становится доступной.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-712">When a client deletes blob containers, tables, or queues there is a brief period before hello name becomes available again.</span></span>

<span data-ttu-id="8c9ce-713">Hello клиентское приложение должно использовать контейнер уникальные имена, каждый раз при создании новых контейнеров, если hello удалите и снова создайте шаблон является общим.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-713">hello client application should use unique container names whenever it creates new containers if hello delete/recreate pattern is common.</span></span>

### <span data-ttu-id="8c9ce-714"><a name="metrics-show-low-percent-success"></a>Метрики содержат низкие значения PercentSuccess, или в записях журналов аналитики присутствуют операции с состоянием транзакции ClientOtherErrors</span><span class="sxs-lookup"><span data-stu-id="8c9ce-714"><a name="metrics-show-low-percent-success"></a>Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors</span></span>
<span data-ttu-id="8c9ce-715">Hello **PercentSuccess** метрика захватывает hello процентная доля операций, которые были выполнены на основе их кода состояния HTTP.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-715">hello **PercentSuccess** metric captures hello percent of operations that were successful based on their HTTP Status Code.</span></span> <span data-ttu-id="8c9ce-716">Операции с кодом состояния 2XX подсчета успешно, в то время как операции с кодом состояния в диапазонах 3XX и 4XX или 5XX считаются неудачно и нижней hello **PercentSucess** значение метрики.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-716">Operations with status codes of 2XX count as successful, whereas operations with status codes in 3XX, 4XX and 5XX ranges are counted as unsuccessful and lower hello **PercentSucess** metric value.</span></span> <span data-ttu-id="8c9ce-717">В файлах журнала хранилища на стороне сервера hello, эти операции записываются с состоянием транзакции **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-717">In hello server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span>

<span data-ttu-id="8c9ce-718">Это важные toonote, что эти операции были завершены успешно и таким образом, не влияют на другие показатели, например доступность.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-718">It is important toonote that these operations have completed successfully and therefore do not affect other metrics such as availability.</span></span> <span data-ttu-id="8c9ce-719">Вот несколько примеров операций, которые при успешном выполнении могут сопровождаться кодами состояния HTTP, свидетельствующими о неудаче:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-719">Some examples of operations that execute successfully but that can result in unsuccessful HTTP status codes include:</span></span>

* <span data-ttu-id="8c9ce-720">**ResourceNotFound** (не найдено 404), например из GET запрос tooa больших двоичных объектов, не существует.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-720">**ResourceNotFound** (Not Found 404), for example from a GET request tooa blob that does not exist.</span></span>
* <span data-ttu-id="8c9ce-721">**ResouceAlreadyExists** (409 конфликт), например из **CreateIfNotExist** операции, где hello ресурс уже существует.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-721">**ResouceAlreadyExists** (Conflict 409), for example from a **CreateIfNotExist** operation where hello resource already exists.</span></span>
* <span data-ttu-id="8c9ce-722">**ConditionNotMet** (не изменено 304), например из условной операции, например, если клиент отправляет **ETag** значение и HTTP **If-None-Match** toorequest заголовок тот образ, только если она была обновлена со времени последней операции hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-722">**ConditionNotMet** (Not Modified 304), for example from a conditional operation such as when a client sends an **ETag** value and an HTTP **If-None-Match** header toorequest an image only if it has been updated since hello last operation.</span></span>

<span data-ttu-id="8c9ce-723">Можно найти список распространенные коды ошибок API-Интерфейс REST, возвращающие hello служб хранилища на странице приветствия <a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">распространенные коды ошибок REST API</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-723">You can find a list of common REST API error codes that hello storage services return on hello page <a href="http://msdn.microsoft.com/library/azure/dd179357.aspx" target="_blank">Common REST API Error Codes</a>.</span></span>

### <span data-ttu-id="8c9ce-724"><a name="capacity-metrics-show-an-unexpected-increase"></a>Метрики объема показывают неожиданное увеличение использования объема хранилища</span><span class="sxs-lookup"><span data-stu-id="8c9ce-724"><a name="capacity-metrics-show-an-unexpected-increase"></a>Capacity metrics show an unexpected increase in storage capacity usage</span></span>
<span data-ttu-id="8c9ce-725">Если вы видите резким, непредвиденные изменения в использовании емкости вашей учетной записи хранилища можно исследовать hello причин при первом просмотре показатели доступности; Например увеличение hello количество неудачных запросов на удаление может привести tooan увеличение hello объем хранилища больших двоичных объектов, используемой как приложения определенные завершающие операции, которые можно было бы ожидать, что toobe освобождение пространства может не работать должным образом ( Пример, так как истек срок действия токенов SAS hello, используемых для освобождения места).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-725">If you see sudden, unexpected changes in capacity usage in your storage account, you can investigate hello reasons by first looking at your availability metrics; for example, an increase in hello number of failed delete requests might lead tooan increase in hello amount of blob storage you are using as application specific cleanup operations you might have expected toobe freeing up space may not be working as expected (for example, because hello SAS tokens used for freeing up space have expired).</span></span>

### <span data-ttu-id="8c9ce-726"><a name="you-are-experiencing-unexpected-reboots"></a>Происходит неожиданный перезапуск виртуальных машин Azure, имеющих большое количество виртуальных жестких дисков</span><span class="sxs-lookup"><span data-stu-id="8c9ce-726"><a name="you-are-experiencing-unexpected-reboots"></a>You are experiencing unexpected reboots of Azure Virtual Machines that have a large number of attached VHDs</span></span>
<span data-ttu-id="8c9ce-727">Если виртуальной машины (ВМ) Azure имеет большое количество подключенных виртуальных жестких дисков, hello учетную запись хранения, может превысить hello целевые показатели масштабируемости для отдельной учетной записи хранения вызывает toofail hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-727">If an Azure Virtual Machine (VM) has a large number of attached VHDs that are in hello same storage account, you could exceed hello scalability targets for an individual storage account causing hello VM toofail.</span></span> <span data-ttu-id="8c9ce-728">Вы должны проверить hello минутных метрик для учетной записи хранения hello (**TotalRequests**/**TotalIngress**/**TotalEgress**) для пиков длина которых превышает hello целевые показатели масштабируемости для учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-728">You should check hello minute metrics for hello storage account (**TotalRequests**/**TotalIngress**/**TotalEgress**) for spikes that exceed hello scalability targets for a storage account.</span></span> <span data-ttu-id="8c9ce-729">Hello в разделе «[Метрики указывают на увеличение значения PercentThrottlingError]» для помощи в определении регулирования в вашей учетной записи хранилища произошла.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-729">See hello section "[Metrics show an increase in PercentThrottlingError]" for assistance in determining if throttling has occurred on your storage account.</span></span>

<span data-ttu-id="8c9ce-730">Как правило, каждой операции вывода виртуальный жесткий ДИСК из виртуальной машины или отдельных входных данных преобразует слишком**получить страницы** или **вставки страницы** операции над hello базовый страничного большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-730">In general, each individual input or output operation on a VHD from a Virtual Machine translates too**Get Page** or **Put Page** operations on hello underlying page blob.</span></span> <span data-ttu-id="8c9ce-731">Таким образом, можно использовать hello оценка операций ввода-ВЫВОДА для вашей среды tootune сколько виртуальные жесткие диски могут в одной учетной записи хранения на основе определенного поведения приложения hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-731">Therefore, you can use hello estimated IOPS for your environment tootune how many VHDs you can have in a single storage account based on hello specific behavior of your application.</span></span> <span data-ttu-id="8c9ce-732">Мы не рекомендуем использовать в одной учетной записи более 40 дисков.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-732">We do not recommend having more than 40 disks in a single storage account.</span></span> <span data-ttu-id="8c9ce-733">В разделе <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">целевые показатели производительности и масштабируемости хранилища Azure</a> сведения hello текущего целевые показатели масштабируемости для учетных записей хранилища, в частности hello всего запроса скорость и общая пропускная способность для hello тип учетной записи хранения вы используете .</span><span class="sxs-lookup"><span data-stu-id="8c9ce-733">See <a href="http://msdn.microsoft.com/library/azure/dn249410.aspx" target="_blank">Azure Storage Scalability and Performance Targets</a> for details of hello current scalability targets for storage accounts, in particular hello total request rate and total bandwidth for hello type of storage account you are using.</span></span>
<span data-ttu-id="8c9ce-734">Если превышено hello целевые показатели масштабируемости для вашей учетной записи, необходимо поместить виртуальные жесткие диски несколько hello действия tooreduce другое хранилище учетных записей в каждом отдельную учетную запись.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-734">If you are exceeding hello scalability targets for your storage account, you should place your VHDs in multiple different storage accounts tooreduce hello activity in each individual account.</span></span>

### <span data-ttu-id="8c9ce-735"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Проблемы возникают из-за использование эмулятора хранилища hello для разработки или тестирования</span><span class="sxs-lookup"><span data-stu-id="8c9ce-735"><a name="your-issue-arises-from-using-the-storage-emulator"></a>Your issue arises from using hello storage emulator for development or test</span></span>
<span data-ttu-id="8c9ce-736">Обычно использовать эмулятор хранилища hello во время разработки и тестирования tooavoid hello требования для учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-736">You typically use hello storage emulator during development and test tooavoid hello requirement for an Azure storage account.</span></span> <span data-ttu-id="8c9ce-737">Hello распространенных проблем, которые могут возникнуть при использовании эмулятора хранилища hello являются:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-737">hello common issues that can occur when you are using hello storage emulator are:</span></span>

* <span data-ttu-id="8c9ce-738">[Функция «X» не работает в эмуляторе хранилища hello]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-738">[Feature "X" is not working in hello storage emulator]</span></span>
* <span data-ttu-id="8c9ce-739">[Ошибка «hello значение одного из заголовков hello HTTP не правильный формат hello» при hello с помощью эмулятора хранилища]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-739">[Error "hello value for one of hello HTTP headers is not in hello correct format" when using hello storage emulator]</span></span>
* <span data-ttu-id="8c9ce-740">[Запущенный эмулятор хранилища hello требуются права администратора]</span><span class="sxs-lookup"><span data-stu-id="8c9ce-740">[Running hello storage emulator requires administrative privileges]</span></span>

#### <span data-ttu-id="8c9ce-741"><a name="feature-X-is-not-working"></a>Функция «X» не работает в эмуляторе хранилища hello</span><span class="sxs-lookup"><span data-stu-id="8c9ce-741"><a name="feature-X-is-not-working"></a>Feature "X" is not working in hello storage emulator</span></span>
<span data-ttu-id="8c9ce-742">Эмулятор хранилища Hello не поддерживает все функции hello hello служб хранилища Azure, такие как службы файлов hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-742">hello storage emulator does not support all of hello features of hello Azure storage services such as hello file service.</span></span> <span data-ttu-id="8c9ce-743">Дополнительные сведения см. в разделе <a href="http://msdn.microsoft.com/library/azure/gg433135.aspx" target="_blank">различия между hello эмулятора хранилища и служб хранилища Azure</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-743">For more information, see <a href="http://msdn.microsoft.com/library/azure/gg433135.aspx" target="_blank">Differences Between hello Storage Emulator and Azure Storage Services</a> on MSDN.</span></span>

<span data-ttu-id="8c9ce-744">Для этих компонентов, которые hello хранилища эмулятор не поддерживает, использование службы хранилища Azure hello в облаке hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-744">For those features that hello storage emulator does not support, use hello Azure storage service in hello cloud.</span></span>

#### <span data-ttu-id="8c9ce-745"><a name="error-HTTP-header-not-correct-format"></a>Ошибка «hello значение одного из заголовков hello HTTP не правильный формат hello» при hello с помощью эмулятора хранилища</span><span class="sxs-lookup"><span data-stu-id="8c9ce-745"><a name="error-HTTP-header-not-correct-format"></a>Error "hello value for one of hello HTTP headers is not in hello correct format" when using hello storage emulator</span></span>
<span data-ttu-id="8c9ce-746">Тестировании приложения, такие как использовать hello клиентской библиотеки хранилища для hello локального хранилища эмулятора и вызов метода **CreateIfNotExists** сбой с ошибкой hello сообщение «hello значение одного из заголовков hello HTTP не находится в правильный формат Hello.»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-746">You are testing your application that use hello Storage Client Library against hello local storage emulator and method calls such as **CreateIfNotExists** fail with hello error message "hello value for one of hello HTTP headers is not in hello correct format."</span></span> <span data-ttu-id="8c9ce-747">Это означает, что hello версию вы используете эмулятор хранилища hello не поддерживает версию hello использовании клиентской библиотеки хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-747">This indicates that hello version of hello storage emulator you are using does not support hello version of hello storage client library you are using.</span></span> <span data-ttu-id="8c9ce-748">Клиентская библиотека хранилища Hello добавляет заголовок hello **x-ms-version** tooall hello запросы с ней.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-748">hello Storage Client Library adds hello header **x-ms-version** tooall hello requests it makes.</span></span> <span data-ttu-id="8c9ce-749">Если эмулятор хранения hello не распознает значение hello в hello **x-ms-version** заголовка, он отклоняет запрос hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-749">If hello storage emulator does not recognize hello value in hello **x-ms-version** header, it rejects hello request.</span></span>

<span data-ttu-id="8c9ce-750">Можно использовать hello библиотеки клиента хранения журналов toosee hello значение hello **заголовка x-ms-version** отправляет.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-750">You can use hello Storage Library Client logs toosee hello value of hello **x-ms-version header** it is sending.</span></span> <span data-ttu-id="8c9ce-751">Также можно увидеть значение hello объекта hello **заголовка x-ms-version** при использовании Fiddler tootrace hello запросы из клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-751">You can also see hello value of hello **x-ms-version header** if you use Fiddler tootrace hello requests from your client application.</span></span>

<span data-ttu-id="8c9ce-752">Этот сценарий обычно возникает в том случае, если установить и использовать последнюю версию клиентской библиотеки хранилища hello hello без обновления hello эмулятор хранилища.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-752">This scenario typically occurs if you install and use hello latest version of hello Storage Client Library without updating hello storage emulator.</span></span> <span data-ttu-id="8c9ce-753">Необходимо установить последнюю версию эмулятора хранилища hello hello или использовать облачного хранилища вместо hello эмулятор для разработки и тестирования.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-753">You should either install hello latest version of hello storage emulator, or use cloud storage instead of hello emulator for development and test.</span></span>

#### <span data-ttu-id="8c9ce-754"><a name="storage-emulator-requires-administrative-privileges"></a>Запущенный эмулятор хранилища hello требуются права администратора</span><span class="sxs-lookup"><span data-stu-id="8c9ce-754"><a name="storage-emulator-requires-administrative-privileges"></a>Running hello storage emulator requires administrative privileges</span></span>
<span data-ttu-id="8c9ce-755">Запрашиваются учетные данные администратора, при запуске эмулятора хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-755">You are prompted for administrator credentials when you run hello storage emulator.</span></span> <span data-ttu-id="8c9ce-756">Это происходит только при инициализации эмулятора хранения hello для hello первый раз.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-756">This only occurs when you are initializing hello storage emulator for hello first time.</span></span> <span data-ttu-id="8c9ce-757">После инициализации эмулятора хранилища hello toorun правами администратора не требуется его еще раз.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-757">After you have initialized hello storage emulator, you do not need administrative privileges toorun it again.</span></span>

<span data-ttu-id="8c9ce-758">Дополнительные сведения см. в разделе <a href="http://msdn.microsoft.com/library/azure/gg433132.aspx" target="_blank">hello инициализации эмулятора хранилища с hello с помощью средства командной строки</a> в библиотеке MSDN (можно инициализировать эмулятор хранилища hello в Visual Studio, которая будет также требуют прав администратора).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-758">For more information, see <a href="http://msdn.microsoft.com/library/azure/gg433132.aspx" target="_blank">Initialize hello Storage Emulator by Using hello Command-Line Tool</a> on MSDN (you can also initialize hello storage emulator in Visual Studio, which will also require administrative privileges).</span></span>

### <span data-ttu-id="8c9ce-759"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>Возникающие проблемы с установкой hello Azure SDK для .NET</span><span class="sxs-lookup"><span data-stu-id="8c9ce-759"><a name="you-are-encountering-problems-installing-the-Windows-Azure-SDK"></a>You are encountering problems installing hello Azure SDK for .NET</span></span>
<span data-ttu-id="8c9ce-760">При попытке tooinstall hello SDK, происходит сбой при эмулятор хранилища hello tooinstall на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-760">When you try tooinstall hello SDK, it fails trying tooinstall hello storage emulator on your local machine.</span></span> <span data-ttu-id="8c9ce-761">журнал установки Hello содержит одно из следующих сообщений hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-761">hello installation log contains one of hello following messages:</span></span>

* <span data-ttu-id="8c9ce-762">CAQuietExec: Ошибка: не удается tooaccess экземпляр SQL</span><span class="sxs-lookup"><span data-stu-id="8c9ce-762">CAQuietExec:  Error: Unable tooaccess SQL instance</span></span>
* <span data-ttu-id="8c9ce-763">CAQuietExec: Ошибка: не удается toocreate базы данных</span><span class="sxs-lookup"><span data-stu-id="8c9ce-763">CAQuietExec:  Error: Unable toocreate database</span></span>

<span data-ttu-id="8c9ce-764">Причина Hello проблема с существующим экземпляром LocalDB.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-764">hello cause is an issue with existing LocalDB installation.</span></span> <span data-ttu-id="8c9ce-765">По умолчанию hello эмулятор хранилища использует LocalDB toopersist данных при его моделирует службы хранилища Azure hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-765">By default, hello storage emulator uses LocalDB toopersist data when it simulates hello Azure storage services.</span></span> <span data-ttu-id="8c9ce-766">Экземпляре LocalDB можно сбросить, выполнив следующие команды в окно командной строки перед попыткой tooinstall hello SDK hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-766">You can reset your LocalDB instance by running hello following commands in a command-prompt window before trying tooinstall hello SDK.</span></span>

```
sqllocaldb stop v11.0
sqllocaldb delete v11.0
delete %USERPROFILE%\WAStorageEmulatorDb3*.*
sqllocaldb create v11.0
```

<span data-ttu-id="8c9ce-767">Hello **удалить** команда удаляет все старые файлы базы данных из предыдущей установки эмулятора хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-767">hello **delete** command removes any old database files from previous installations of hello storage emulator.</span></span>

### <span data-ttu-id="8c9ce-768"><a name="you-have-a-different-issue-with-a-storage-service"></a>Возникла другая проблема со службой хранилища</span><span class="sxs-lookup"><span data-stu-id="8c9ce-768"><a name="you-have-a-different-issue-with-a-storage-service"></a>You have a different issue with a storage service</span></span>
<span data-ttu-id="8c9ce-769">Если предыдущие разделы по устранению неполадок hello не включают hello проблемы, которые возникают в службе хранилища, необходимо принимать hello, следуя toodiagnosing подход и устранении неполадок.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-769">If hello previous troubleshooting sections do not include hello issue you are having with a storage service, you should adopt hello following approach toodiagnosing and troubleshooting your issue.</span></span>

* <span data-ttu-id="8c9ce-770">Проверьте вашей toosee метрики, если изменения из вашего ожидаемое поведение базовой линией.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-770">Check your metrics toosee if there is any change from your expected base-line behavior.</span></span> <span data-ttu-id="8c9ce-771">От метрики hello может быть может toodetermine ли проблема hello временных или постоянных и какие операции хранилища hello проблема влияет на работу.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-771">From hello metrics, you may be able toodetermine whether hello issue is transient or permanent, and which storage operations hello issue is affecting.</span></span>
* <span data-ttu-id="8c9ce-772">Можно использовать toohelp поиска данных журнала серверные более подробные сведения об ошибках, возникающих информации метрик hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-772">You can use hello metrics information toohelp you search your server-side log data for more detailed information about any errors that are occurring.</span></span> <span data-ttu-id="8c9ce-773">Эти сведения могут помочь определить и устранить проблему hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-773">This information may help you troubleshoot and resolve hello issue.</span></span>
* <span data-ttu-id="8c9ce-774">Если hello сведения в журналах серверные hello не является достаточно проблема hello tootroubleshoot успешно, можно использовать hello клиентской библиотеки хранилища журналов на стороне клиента tooinvestigate hello поведение клиентского приложения и средства, такие как Fiddler, Wireshark, и Microsoft Message Analyzer tooinvestigate вашей сети.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-774">If hello information in hello server-side logs is not sufficient tootroubleshoot hello issue successfully, you can use hello Storage Client Library client-side logs tooinvestigate hello behavior of your client application, and tools such as Fiddler, Wireshark, and Microsoft Message Analyzer tooinvestigate your network.</span></span>

<span data-ttu-id="8c9ce-775">Дополнительные сведения об использовании Fiddler см. в разделе «[приложении 1: с помощью Fiddler toocapture HTTP и HTTPS-трафика].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-775">For more information about using Fiddler, see "[Appendix 1: Using Fiddler toocapture HTTP and HTTPS traffic]."</span></span>

<span data-ttu-id="8c9ce-776">Дополнительные сведения об использовании Wireshark см. в разделе «[приложении 2: сетевого трафика с помощью Wireshark toocapture].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-776">For more information about using Wireshark, see "[Appendix 2: Using Wireshark toocapture network traffic]."</span></span>

<span data-ttu-id="8c9ce-777">Дополнительные сведения об использовании Microsoft Message Analyzer см. в разделе «[приложении 3: сетевого трафика с помощью Microsoft Message Analyzer toocapture].»</span><span class="sxs-lookup"><span data-stu-id="8c9ce-777">For more information about using Microsoft Message Analyzer, see "[Appendix 3: Using Microsoft Message Analyzer toocapture network traffic]."</span></span>

## <span data-ttu-id="8c9ce-778"><a name="appendices"></a>Приложения</span><span class="sxs-lookup"><span data-stu-id="8c9ce-778"><a name="appendices"></a>Appendices</span></span>
<span data-ttu-id="8c9ce-779">приложения Hello описаны несколько средств, которые могут оказаться полезными при Диагностика и устранение неполадок в хранилище Azure (и другие службы).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-779">hello appendices describe several tools that you may find useful when you are diagnosing and troubleshooting issues with Azure Storage (and other services).</span></span> <span data-ttu-id="8c9ce-780">Эти средства не входят в состав службы хранилища Azure, а некоторые из них предоставляются сторонними разработчиками.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-780">These tools are not part of Azure Storage and some are third-party products.</span></span> <span data-ttu-id="8c9ce-781">Таким образом hello средства, описанные в этих приложениях не затрагиваются в каких-либо поддержки соглашений, которые может иметь с Microsoft Azure или хранилище Azure, и таким образом в процессе оценки следует изучить hello лицензирования и варианты поддержки доступны из Поставщики Hello этих средств.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-781">As such, hello tools discussed in these appendices are not covered by any support agreement you may have with Microsoft Azure or Azure Storage, and therefore as part of your evaluation process you should examine hello licensing and support options available from hello providers of these tools.</span></span>

### <span data-ttu-id="8c9ce-782"><a name="appendix-1"></a>Приложение 1: С помощью Fiddler toocapture HTTP и HTTPS-трафика</span><span class="sxs-lookup"><span data-stu-id="8c9ce-782"><a name="appendix-1"></a>Appendix 1: Using Fiddler toocapture HTTP and HTTPS traffic</span></span>
<span data-ttu-id="8c9ce-783">Fiddler — это эффективное средство для анализа hello HTTP и HTTPS-трафика между клиентским приложением и службой хранилища Azure, которую вы используете hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-783">Fiddler is a useful tool for analyzing hello HTTP and HTTPS traffic between your client application and hello Azure storage service you are using.</span></span> <span data-ttu-id="8c9ce-784">Скачать Fiddler можно на странице <a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-784">You can download Fiddler from <a href="http://www.telerik.com/fiddler" target="_blank">http://www.telerik.com/fiddler</a>.</span></span>

> [!NOTE]
> <span data-ttu-id="8c9ce-785">Fiddler может декодировать трафика HTTPS; следует внимательно прочтите документацию Fiddler hello toounderstand как это делается и последствия для безопасности toounderstand hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-785">Fiddler can decode HTTPS traffic; you should read hello Fiddler documentation carefully toounderstand how it does this, and toounderstand hello security implications.</span></span>
> 
> 

<span data-ttu-id="8c9ce-786">В этом приложении предоставляет краткий пример как tooconfigure Fiddler toocapture трафик между hello локального компьютера, где вы установили Fiddler и hello служб хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-786">This appendix provides a brief walkthrough of how tooconfigure Fiddler toocapture traffic between hello local machine where you have installed Fiddler and hello Azure storage services.</span></span>

<span data-ttu-id="8c9ce-787">После запуска средства Fiddler оно начинает захват трафика HTTP и HTTPS на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-787">After you have launched Fiddler, it will begin capturing HTTP and HTTPS traffic on your local machine.</span></span> <span data-ttu-id="8c9ce-788">Hello ниже приведены некоторые полезные команды для управления Fiddler.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-788">hello following are some useful commands for controlling Fiddler:</span></span>

* <span data-ttu-id="8c9ce-789">Остановка и запуск захвата трафика.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-789">Stop and start capturing traffic.</span></span> <span data-ttu-id="8c9ce-790">Hello главного меню, go слишком**файл** и нажмите кнопку **запись трафика** tootoggle захват и отключать.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-790">On hello main menu, go too**File** and then click **Capture Traffic** tootoggle capturing on and off.</span></span>
* <span data-ttu-id="8c9ce-791">Сохранение захваченных данных трафика.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-791">Save captured traffic data.</span></span> <span data-ttu-id="8c9ce-792">Hello главного меню, go слишком**файл**, нажмите кнопку **Сохранить**и нажмите кнопку **все сеансы**: Это позволит вам toosave hello трафика в файл архива сеанса.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-792">On hello main menu, go too**File**, click **Save**, and then click **All Sessions**: this enables you toosave hello traffic in a Session Archive file.</span></span> <span data-ttu-id="8c9ce-793">Можно повторно загрузить в архиве сеанса позже для анализа или отправить его, если необходима поддержка tooMicrosoft.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-793">You can reload a Session Archive later for analysis, or send it if requested tooMicrosoft support.</span></span>

<span data-ttu-id="8c9ce-794">toolimit hello объем трафика, который фиксирует Fiddler, можно использовать фильтры, настроенные в hello **фильтры** вкладку hello следующий снимок экрана показан фильтр, который перехватывает только трафик, отправленный toohello  **contosoemaildist.Table.Core.Windows.NET** конечную точку:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-794">toolimit hello amount of traffic that Fiddler captures, you can use filters that you configure in hello **Filters** tab. hello following screenshot shows a filter that captures only traffic sent toohello **contosoemaildist.table.core.windows.net** storage endpoint:</span></span>

![][5]

### <span data-ttu-id="8c9ce-795"><a name="appendix-2"></a>Приложение 2: С помощью Wireshark toocapture сетевого трафика</span><span class="sxs-lookup"><span data-stu-id="8c9ce-795"><a name="appendix-2"></a>Appendix 2: Using Wireshark toocapture network traffic</span></span>
<span data-ttu-id="8c9ce-796">Анализатор сетевого протокола, который позволяет tooview является Wireshark подробную информацию о пакетов для разнообразных сетевых протоколов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-796">Wireshark is a network protocol analyzer that enables you tooview detailed packet information for a wide range of network protocols.</span></span> <span data-ttu-id="8c9ce-797">Скачать Wireshark можно на веб-сайте <a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-797">You can download Wireshark from <a href="http://www.wireshark.org/" target="_blank">http://www.wireshark.org/</a>.</span></span>

<span data-ttu-id="8c9ce-798">Hello ниже показано, как toocapture подробные сведения о пакете для входящего трафика с локального компьютера hello которой установлена служба таблицы toohello Wireshark в вашей учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-798">hello following procedure shows you how toocapture detailed packet information for traffic from hello local machine where you installed Wireshark toohello table service in your Azure storage account.</span></span>

1. <span data-ttu-id="8c9ce-799">Запустите Wireshark на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-799">Launch Wireshark on your local machine.</span></span>
2. <span data-ttu-id="8c9ce-800">В hello **запустить** раздел, выберите hello интерфейса локальной сети или интерфейсы, которые являются подключенных toohello Интернета.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-800">In hello **Start** section, select hello local network interface or interfaces that are connected toohello internet.</span></span>
3. <span data-ttu-id="8c9ce-801">Щелкните **Capture Options**(Параметры захвата).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-801">Click **Capture Options**.</span></span>
4. <span data-ttu-id="8c9ce-802">Добавление фильтра toohello **фильтр записи** текстового поля.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-802">Add a filter toohello **Capture Filter** textbox.</span></span> <span data-ttu-id="8c9ce-803">Например **размещения contosoemaildist.table.core.windows.net** настроит Wireshark toocapture только для пакетов, отправляемых с hello конечную точку службы таблиц в hello tooor **contosoemaildist** хранилища Учетная запись.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-803">For example, **host contosoemaildist.table.core.windows.net** will configure Wireshark toocapture only packets sent tooor from hello table service endpoint in hello **contosoemaildist** storage account.</span></span> <span data-ttu-id="8c9ce-804">Полный список фильтров захвата см. на странице <a href="http://wiki.wireshark.org/CaptureFilters" target="_blank">http://wiki.wireshark.org/CaptureFilters</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-804">For a complete list of Capture Filters see <a href="http://wiki.wireshark.org/CaptureFilters" target="_blank">http://wiki.wireshark.org/CaptureFilters</a>.</span></span>
   
   ![][6]
5. <span data-ttu-id="8c9ce-805">Нажмите **Запуск**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-805">Click **Start**.</span></span> <span data-ttu-id="8c9ce-806">При использовании клиентского приложения на локальном компьютере, Wireshark теперь соберет все hello tooor отправки пакетов из hello конечную точку службы таблиц.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-806">Wireshark will now capture all hello packets send tooor from hello table service endpoint as you use your client application on your local machine.</span></span>
6. <span data-ttu-id="8c9ce-807">После завершения, в главном меню выберите команду hello **захвата** и затем **остановить**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-807">When you have finished, on hello main menu click **Capture** and then **Stop**.</span></span>
7. <span data-ttu-id="8c9ce-808">toosave hello собранные данные в файле записи Wireshark, в главном меню выберите команду hello **файл** и затем **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-808">toosave hello captured data in a Wireshark Capture File, on hello main menu click **File** and then **Save**.</span></span>

<span data-ttu-id="8c9ce-809">WireShark будут выделены все ошибки, которые существуют в hello **packetlist** окна.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-809">WireShark will highlight any errors that exist in hello **packetlist** window.</span></span> <span data-ttu-id="8c9ce-810">Можно также использовать hello **Expert сведения** окна (щелкните **анализ**, затем **Expert сведения**) tooview сводку ошибок и предупреждений.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-810">You can also use hello **Expert Info** window (click **Analyze**, then **Expert Info**) tooview a summary of errors and warnings.</span></span>

![][7]

<span data-ttu-id="8c9ce-811">Также можно выбрать tooview hello TCP данных, как на уровне приложения hello видит его, щелкнув hello данных TCP и при выборе **поток TCP, выполните**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-811">You can also chose tooview hello TCP data as hello application layer sees it by right-clicking on hello TCP data and selecting **Follow TCP Stream**.</span></span> <span data-ttu-id="8c9ce-812">Это особенно полезно в том случае, если дамп был получен без использования фильтра захвата.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-812">This is particularly useful if you captured your dump without a capture filter.</span></span> <span data-ttu-id="8c9ce-813">Подробнее см. <a href="http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html" target="_blank">здесь</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-813">See <a href="http://www.wireshark.org/docs/wsug_html_chunked/ChAdvFollowTCPSection.html" target="_blank">here</a> for more information.</span></span>

![][8]

> [!NOTE]
> <span data-ttu-id="8c9ce-814">Дополнительные сведения об использовании Wireshark см. в разделе hello <a href="http://www.wireshark.org/docs/wsug_html_chunked/" target="_blank">руководстве пользователя Wireshark</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-814">For more information about using Wireshark, see hello <a href="http://www.wireshark.org/docs/wsug_html_chunked/" target="_blank">Wireshark Users Guide</a>.</span></span>
> 
> 

### <span data-ttu-id="8c9ce-815"><a name="appendix-3"></a>Приложение 3: С помощью Microsoft Message Analyzer toocapture сетевого трафика</span><span class="sxs-lookup"><span data-stu-id="8c9ce-815"><a name="appendix-3"></a>Appendix 3: Using Microsoft Message Analyzer toocapture network traffic</span></span>
<span data-ttu-id="8c9ce-816">Можно использовать Microsoft Message Analyzer toocapture HTTP и HTTPS-трафика в аналогичные tooFiddler способом и записи сетевого трафика в аналогичные tooWireshark способом.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-816">You can use Microsoft Message Analyzer toocapture HTTP and HTTPS traffic in a similar way tooFiddler, and capture network traffic in a similar way tooWireshark.</span></span>

#### <a name="configure-a-web-tracing-session-using-microsoft-message-analyzer"></a><span data-ttu-id="8c9ce-817">Настройка сеанса трассировки веб-трафика с помощью анализатора сообщений Майкрософт</span><span class="sxs-lookup"><span data-stu-id="8c9ce-817">Configure a web tracing session using Microsoft Message Analyzer</span></span>
<span data-ttu-id="8c9ce-818">tooconfigure web сеанс трассировки для трафика HTTP и HTTPS, с помощью Microsoft Message Analyzer, запустите приложение Microsoft Message Analyzer hello, а затем на hello **файл** меню, нажмите кнопку **трассировкизаписи/**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-818">tooconfigure a web tracing session for HTTP and HTTPS traffic using Microsoft Message Analyzer, run hello Microsoft Message Analyzer application and then on hello **File** menu, click **Capture/Trace**.</span></span> <span data-ttu-id="8c9ce-819">В списке доступных трассировки сценариев hello выберите **веб-прокси**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-819">In hello list of available trace scenarios, select **Web Proxy**.</span></span> <span data-ttu-id="8c9ce-820">Затем в hello **сценарий конфигурации трассировки** панели в hello **HostnameFilter** текстовое поле, добавьте имена hello конечные точки хранилища (можно найти эти имена в hello классический портал Azure).</span><span class="sxs-lookup"><span data-stu-id="8c9ce-820">Then in hello **Trace Scenario Configuration** panel, in hello **HostnameFilter** textbox, add hello names of your storage endpoints (you can look up these names in hello Azure Classic Portal).</span></span> <span data-ttu-id="8c9ce-821">Например, если hello имя вашей учетной записи хранилища Azure — **contosodata**, следует добавить следующие toohello hello **HostnameFilter** текстового поля:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-821">For example, if hello name of your Azure storage account is **contosodata**, you should add hello following toohello **HostnameFilter** textbox:</span></span>

```
contosodata.blob.core.windows.net contosodata.table.core.windows.net contosodata.queue.core.windows.net
```

> [!NOTE]
> <span data-ttu-id="8c9ce-822">Пробел отделяет приветствия имен узлов.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-822">A space character separates hello hostnames.</span></span>
> 
> 

<span data-ttu-id="8c9ce-823">Когда вы будете готовы toostart собранные данные, нажмите кнопку hello **Start With** кнопки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-823">When you are ready toostart collecting trace data, click hello **Start With** button.</span></span>

<span data-ttu-id="8c9ce-824">Дополнительные сведения о Microsoft Message Analyzer hello **веб-прокси** трассировки см. в разделе <a href="http://technet.microsoft.com/library/jj674814.aspx" target="_blank">PEF WebProxy поставщика</a> на сайте TechNet.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-824">For more information about hello Microsoft Message Analyzer **Web Proxy** trace, see <a href="http://technet.microsoft.com/library/jj674814.aspx" target="_blank">PEF-WebProxy Provider</a> on TechNet.</span></span>

<span data-ttu-id="8c9ce-825">встроенные Hello **веб-прокси** трассировки в Microsoft Message Analyzer основан на Fiddler; его можно записать трафика HTTPS на стороне клиента и Показать незашифрованные сообщения по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-825">hello built-in **Web Proxy** trace in Microsoft Message Analyzer is based on Fiddler; it can capture client-side HTTPS traffic and display unencrypted HTTPS messages.</span></span> <span data-ttu-id="8c9ce-826">Hello **веб-прокси** трассировка работает, настроив локальный прокси для всего трафика HTTP и HTTPS, предоставляющий доступ toounencrypted сообщений.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-826">hello **Web Proxy** trace works by configuring a local proxy for all HTTP and HTTPS traffic that gives it access toounencrypted messages.</span></span>

#### <a name="diagnosing-network-issues-using-microsoft-message-analyzer"></a><span data-ttu-id="8c9ce-827">Диагностика неполадок сети с помощью анализатора сообщений Майкрософт</span><span class="sxs-lookup"><span data-stu-id="8c9ce-827">Diagnosing network issues using Microsoft Message Analyzer</span></span>
<span data-ttu-id="8c9ce-828">Кроме того, toousing hello Microsoft Message Analyzer **веб-прокси** toocapture сведений трассировки из Здравствуйте трафик HTTP/HTTPs между hello клиентского приложения и службы хранилища hello, можно также использовать встроенные hello  **Локальный канального** toocapture сетевых пакетов данные трассировки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-828">In addition toousing hello Microsoft Message Analyzer **Web Proxy** trace toocapture details of hello HTTP/HTTPs traffic between hello client application and hello storage service, you can also use hello built-in **Local Link Layer** trace toocapture network packet information.</span></span> <span data-ttu-id="8c9ce-829">Это позволяет, например, вы toocapture данных аналогично toothat захвата с Wireshark и диагностировать неполадки сетевого пропущенные пакеты.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-829">This enables you toocapture data similar toothat which you can capture with Wireshark, and diagnose network issues such as dropped packets.</span></span>

<span data-ttu-id="8c9ce-830">Hello следующем снимке экрана показан пример **локального канального** трассировки с некоторыми **Информационное** сообщений hello **DiagnosisTypes** столбца.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-830">hello following screenshot shows an example **Local Link Layer** trace with some **informational** messages in hello **DiagnosisTypes** column.</span></span> <span data-ttu-id="8c9ce-831">Щелкнув значок в hello **DiagnosisTypes** столбца отображаются подробные сведения об hello приветственное сообщение.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-831">Clicking on an icon in hello **DiagnosisTypes** column shows hello details of hello message.</span></span> <span data-ttu-id="8c9ce-832">В этом примере hello server повторно сообщение #305, так как не получено подтверждение от клиента hello:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-832">In this example, hello server retransmitted message #305 because it did not receive an acknowledgement from hello client:</span></span>

![][9]

<span data-ttu-id="8c9ce-833">При создании сеанса трассировки hello в Microsoft Message Analyzer можно указать фильтры tooreduce hello количество шума в трассировке hello.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-833">When you create hello trace session in Microsoft Message Analyzer, you can specify filters tooreduce hello amount of noise in hello trace.</span></span> <span data-ttu-id="8c9ce-834">На hello **записи / Trace** определение трассировки hello, нажмите на hello **Настройка** ссылку рядом слишком**Microsoft-Windows-NDIS-PacketCapture**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-834">On hello **Capture / Trace** page where you define hello trace, click on hello **Configure** link next too**Microsoft-Windows-NDIS-PacketCapture**.</span></span> <span data-ttu-id="8c9ce-835">Следующий снимок экрана приветствия показана конфигурация, которая фильтрует трафик TCP для IP-адресов hello три служб хранилища:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-835">hello following screenshot shows a configuration that filters TCP traffic for hello IP addresses of three storage services:</span></span>

![][10]

<span data-ttu-id="8c9ce-836">Дополнительные сведения о hello трассировки Microsoft сообщение анализатора локального канального см <a href="http://technet.microsoft.com/library/jj659264.aspx" target="_blank">PEF NDIS-PacketCapture поставщика</a> на сайте TechNet.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-836">For more information about hello Microsoft Message Analyzer Local Link Layer trace, see <a href="http://technet.microsoft.com/library/jj659264.aspx" target="_blank">PEF-NDIS-PacketCapture Provider</a> on TechNet.</span></span>

### <span data-ttu-id="8c9ce-837"><a name="appendix-4"></a>Приложение 4: С помощью tooview метрики и журнала данных Excel</span><span class="sxs-lookup"><span data-stu-id="8c9ce-837"><a name="appendix-4"></a>Appendix 4: Using Excel tooview metrics and log data</span></span>
<span data-ttu-id="8c9ce-838">Многие средства позволяют toodownload hello метрик хранилища данных из хранилища Azure таблицы в формате с разделителями, он просто tooload hello данные в Excel для просмотра и анализа.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-838">Many tools enable you toodownload hello Storage Metrics data from Azure table storage in a delimited format that makes it easy tooload hello data into Excel for viewing and analysis.</span></span> <span data-ttu-id="8c9ce-839">Данные журналов хранилища, полученные из хранилища BLOB-объектов Azure, уже имеют формат с разделителями, и их можно загрузить в Excel.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-839">Storage Logging data from Azure blob storage is already in a delimited format that you can load into Excel.</span></span> <span data-ttu-id="8c9ce-840">Тем не менее, потребуется tooadd соответствующие заголовки столбцов на основе сведений о hello в <a href="http://msdn.microsoft.com/library/azure/hh343259.aspx" target="_blank">формат журнала аналитики хранилища</a> и <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">схема таблицы метрик аналитики хранилища</a>.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-840">However, you will need tooadd appropriate column headings based in hello information at <a href="http://msdn.microsoft.com/library/azure/hh343259.aspx" target="_blank">Storage Analytics Log Format</a> and <a href="http://msdn.microsoft.com/library/azure/hh343264.aspx" target="_blank">Storage Analytics Metrics Table Schema</a>.</span></span>

<span data-ttu-id="8c9ce-841">tooimport ведения журнала хранилища данных в Excel после можно загрузить из хранилища больших двоичных объектов:</span><span class="sxs-lookup"><span data-stu-id="8c9ce-841">tooimport your Storage Logging data into Excel after you download it from blob storage:</span></span>

* <span data-ttu-id="8c9ce-842">На hello **данные** меню, нажмите кнопку **из текста**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-842">On hello **Data** menu, click **From Text**.</span></span>
* <span data-ttu-id="8c9ce-843">Файл журнала обзора toohello tooview и нажмите кнопку **импорта**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-843">Browse toohello log file you want tooview and click **Import**.</span></span>
* <span data-ttu-id="8c9ce-844">На первом шаге из hello **мастер импорта текста**выберите **Delimited**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-844">On step 1 of hello **Text Import Wizard**, select **Delimited**.</span></span>

<span data-ttu-id="8c9ce-845">На первом шаге из hello **мастер импорта текста**выберите **запятой** как hello только разделитель и выберите двойных кавычек, как hello **ограничитель текста**.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-845">On step 1 of hello **Text Import Wizard**, select **Semicolon** as hello only delimiter and choose double-quote as hello **Text qualifier**.</span></span> <span data-ttu-id="8c9ce-846">Нажмите кнопку **Готово** и выберите, где tooplace hello данных в книге.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-846">Then click **Finish** and choose where tooplace hello data in your workbook.</span></span>

### <span data-ttu-id="8c9ce-847"><a name="appendix-5"></a>Приложение 5. Мониторинг с использованием Application Insights для Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="8c9ce-847"><a name="appendix-5"></a>Appendix 5: Monitoring with Application Insights for Visual Studio Team Services</span></span>
<span data-ttu-id="8c9ce-848">Также можно использовать функции hello Application Insights для Visual Studio Team Services как часть вашего мониторинг производительности и доступности.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-848">You can also use hello Application Insights feature for Visual Studio Team Services as part of your performance and availability monitoring.</span></span> <span data-ttu-id="8c9ce-849">Это средство предоставляет указанные ниже возможности.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-849">This tool can:</span></span>

* <span data-ttu-id="8c9ce-850">Проверка того, что веб-служба доступна и отвечает на запросы.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-850">Make sure your web service is available and responsive.</span></span> <span data-ttu-id="8c9ce-851">Является ли приложение веб-сайт или приложение на устройстве, с использованием веб-службы, его тестирование можно URL-адрес, каждые несколько минут из расположений вокруг Здравствуй, мир!, а позволяют понять, если не удается.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-851">Whether your app is a web site or a device app that uses a web service, it can test your URL every few minutes from locations around hello world, and let you know if there's a problem.</span></span>
* <span data-ttu-id="8c9ce-852">Быстрая диагностика любых проблем с производительностью или исключений в веб-службе.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-852">Quickly diagnose any performance issues or exceptions in your web service.</span></span> <span data-ttu-id="8c9ce-853">Определяйте, не исчерпаны ли ресурсы ЦП и другие ресурсы, получайте данные трассировки стека исключений и легко выполняйте поиск по журналам трассировки.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-853">Find out if CPU or other resources are being stretched, get stack traces from exceptions, and easily search through log traces.</span></span> <span data-ttu-id="8c9ce-854">Если hello падения производительности приложения под допустимых ограничений, мы отправим вам сообщение электронной почты.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-854">If hello app's performance drops below acceptable limits, we can send you an email.</span></span> <span data-ttu-id="8c9ce-855">Вы можете отслеживать веб-службы .NET и Java.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-855">You can monitor both .NET and Java web services.</span></span>

<span data-ttu-id="8c9ce-856">В hello времени написания Application Insights находится в режиме предварительного просмотра.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-856">At hello time of writing Application Insights is in preview.</span></span> <span data-ttu-id="8c9ce-857">Дополнительные сведения см. в разделе <a href="http://msdn.microsoft.com/library/azure/dn481095.aspx" target="_blank">Application Insights для Visual Studio Team Services</a> на сайте MSDN.</span><span class="sxs-lookup"><span data-stu-id="8c9ce-857">You can find more information at <a href="http://msdn.microsoft.com/library/azure/dn481095.aspx" target="_blank">Application Insights for Visual Studio Team Services on MSDN</a>.</span></span>

<!--Anchors-->
[Введение]: #introduction
[Структура руководства]: #how-this-guide-is-organized

[мониторинга службы хранения]: #monitoring-your-storage-service
[Мониторинг работоспособности службы]: #monitoring-service-health
[Мониторинг мощностей]: #monitoring-capacity
[Мониторинг доступности]: #monitoring-availability
[Мониторинг производительности]: #monitoring-performance

[Диагностика неполадок хранилища]: #diagnosing-storage-issues
[Проблемы с работоспособностью службы]: #service-health-issues
[Проблемы с производительностью]: #performance-issues
[Диагностика ошибок]: #diagnosing-errors
[Проблемы с эмулятором хранения]: #storage-emulator-issues
[Инструменты для ведения журналов хранилища]: #storage-logging-tools
[Использование инструментов для ведения сетевого журнала]: #using-network-logging-tools

[конца в конец трассировки]: #end-to-end-tracing
[Сопоставление данных журналов]: #correlating-log-data
[Идентификатор запроса клиента]: #client-request-id
[код запроса сервера]: #server-request-id
[Метки времени]: #timestamps

[рекомендации по ее устранению]: #troubleshooting-guidance
[метрики показывают AverageE2ELatency высокой и низкой AverageServerLatency]: #metrics-show-high-AverageE2ELatency-and-low-AverageServerLatency
[Метрики показывают низкое AverageE2ELatency и низким AverageServerLatency, но клиент hello наблюдается большая задержка]: #metrics-show-low-AverageE2ELatency-and-low-AverageServerLatency
[Метрики содержат высокие значения AverageServerLatency]: #metrics-show-high-AverageServerLatency
[При доставке сообщений в очередь возникают неожиданные задержки]: #you-are-experiencing-unexpected-delays-in-message-delivery

[Метрики указывают на увеличение значения PercentThrottlingError]: #metrics-show-an-increase-in-PercentThrottlingError
[Временное увеличение метрики PercentThrottlingError]: #transient-increase-in-PercentThrottlingError
[Постоянное увеличение метрики PercentThrottlingError]: #permanent-increase-in-PercentThrottlingError
[метрики увеличить PercentTimeoutError]: #metrics-show-an-increase-in-PercentTimeoutError
[Метрики показывают увеличение значения PercentNetworkError]: #metrics-show-an-increase-in-PercentNetworkError

[Hello клиент получает сообщения HTTP 403 (запрещено)]: #the-client-is-receiving-403-messages
[Получает ошибки HTTP 404 (не найдено) сообщения приветствия клиента]: #the-client-is-receiving-404-messages
[Hello клиента или другой процесс удален ранее hello объекта]: #client-previously-deleted-the-object
[Проблема с авторизацией подписанного URL-адреса (SAS)]: #SAS-authorization-issue
[Код JavaScript на стороне клиента не имеет разрешений tooaccess hello объекта]: #JavaScript-code-does-not-have-permission
[Сбой сети]: #network-failure
[Получает HTTP 409 (конфликт) сообщения приветствия клиента]: #the-client-is-receiving-409-messages

[метрики низкий PercentSuccess или аналитика записи журнала операций с состояние транзакции ClientOtherErrors]: #metrics-show-low-percent-success
[Метрики объема показывают неожиданное увеличение использования объема хранилища]: #capacity-metrics-show-an-unexpected-increase
[Происходит неожиданный перезапуск виртуальных машин, имеющих большое количество виртуальных жестких дисков]: #you-are-experiencing-unexpected-reboots
[Проблемы возникают из-за использование эмулятора хранилища hello для разработки или тестирования]: #your-issue-arises-from-using-the-storage-emulator
[Функция «X» не работает в эмуляторе хранилища hello]: #feature-X-is-not-working
[Ошибка «hello значение одного из заголовков hello HTTP не правильный формат hello» при hello с помощью эмулятора хранилища]: #error-HTTP-header-not-correct-format
[Запущенный эмулятор хранилища hello требуются права администратора]: #storage-emulator-requires-administrative-privileges
[Возникающие проблемы с установкой hello Azure SDK для .NET]: #you-are-encountering-problems-installing-the-Windows-Azure-SDK
[Возникла другая проблема со службой хранилища]: #you-have-a-different-issue-with-a-storage-service

[приложения]: #appendices
[приложении 1: с помощью Fiddler toocapture HTTP и HTTPS-трафика]: #appendix-1
[приложении 2: сетевого трафика с помощью Wireshark toocapture]: #appendix-2
[приложении 3: сетевого трафика с помощью Microsoft Message Analyzer toocapture]: #appendix-3
[Приложение 4: С помощью tooview метрики и журнала данных Excel]: #appendix-4
[приложение 5: отслеживание с помощью Application Insights для Visual Studio Team Services]: #appendix-5

<!--Image references-->
[1]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/overview.png
[2]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/portal-screenshot.png
[3]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/hour-minute-metrics.png
[4]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/high-e2e-latency.png
[5]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/fiddler-screenshot.png
[6]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/wireshark-screenshot-1.png
[7]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/wireshark-screenshot-2.png
[8]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/wireshark-screenshot-3.png
[9]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/mma-screenshot-1.png
[10]: ./media/storage-monitoring-diagnosing-troubleshooting-classic-portal/mma-screenshot-2.png
