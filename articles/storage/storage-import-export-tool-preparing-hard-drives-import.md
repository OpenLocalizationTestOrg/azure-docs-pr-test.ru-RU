---
title: "Подготовка жестких дисков к заданию импорта службы импорта и экспорта Azure | Документация Майкрософт"
description: "Сведения о подготовке жестких дисков с помощью средства WAImportExport перед созданием задания импорта в службе импорта и экспорта Azure."
author: muralikk
manager: syadav
editor: tysonn
services: storage
documentationcenter: 
ms.assetid: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/29/2017
ms.author: muralikk
ms.openlocfilehash: 5b894dac8fdc26999b6f3cbffaf7e6a98e68d000
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="preparing-hard-drives-for-an-import-job"></a><span data-ttu-id="598a0-103">Подготовка жестких дисков к заданию импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-103">Preparing hard drives for an Import Job</span></span>

<span data-ttu-id="598a0-104">WAImportExport — это средство подготовки и исправления дисков, которое можно использовать в [службе импорта и экспорта Microsoft Azure](storage-import-export-service.md).</span><span class="sxs-lookup"><span data-stu-id="598a0-104">The WAImportExport tool is the drive preparation and repair tool that you can use with the [Microsoft Azure Import/Export service](storage-import-export-service.md).</span></span> <span data-ttu-id="598a0-105">Оно позволяет копировать данные на жесткие диски перед отправкой их в центр обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="598a0-105">You can use this tool to copy data to the hard drives you are going to ship to an Azure datacenter.</span></span> <span data-ttu-id="598a0-106">После завершения задания импорта это средство можно использовать для восстановления поврежденных, отсутствующих или конфликтных больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-106">After an import job has completed, you can use this tool to repair any blobs that were corrupted, were missing, or conflicted with other blobs.</span></span> <span data-ttu-id="598a0-107">Это средство также позволяет восстанавливать на дисках поврежденные или отсутствующие файлы после завершения задания экспорта.</span><span class="sxs-lookup"><span data-stu-id="598a0-107">After you receive the drives from a completed export job, you can use this tool to repair any files that were corrupted or missing on the drives.</span></span> <span data-ttu-id="598a0-108">В этой статье рассматривается работа с данным инструментом.</span><span class="sxs-lookup"><span data-stu-id="598a0-108">In this article, we go over the use of this tool.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="598a0-109">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="598a0-109">Prerequisites</span></span>

### <a name="requirements-for-waimportexportexe"></a><span data-ttu-id="598a0-110">Требования к WAImportExport.exe</span><span class="sxs-lookup"><span data-stu-id="598a0-110">Requirements for WAImportExport.exe</span></span>

- <span data-ttu-id="598a0-111">**Конфигурация компьютера**</span><span class="sxs-lookup"><span data-stu-id="598a0-111">**Machine configuration**</span></span>
  - <span data-ttu-id="598a0-112">Windows 7, Windows Server 2008 R2 или операционная система Windows более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="598a0-112">Windows 7, Windows Server 2008 R2, or a newer Windows operating system</span></span>
  - <span data-ttu-id="598a0-113">На компьютере должна быть установлена платформа .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="598a0-113">.NET Framework 4 must be installed.</span></span> <span data-ttu-id="598a0-114">Дополнительные сведения о том, как проверить, установлена ли на компьютере платформа .NET Framework, см. в [часто задаваемых вопросах](#faq).</span><span class="sxs-lookup"><span data-stu-id="598a0-114">See [FAQ](#faq) on how to check if .Net Framework is installed on the machine.</span></span>
- <span data-ttu-id="598a0-115">**Ключ учетной записи хранения.** Вам потребуется по крайней мере один ключ учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-115">**Storage account key** - You need at least one of the account keys for the storage account.</span></span>

### <a name="preparing-disk-for-import-job"></a><span data-ttu-id="598a0-116">Подготовка диска к заданию импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-116">Preparing disk for import job</span></span>

- <span data-ttu-id="598a0-117">**BitLocker.** На компьютере, где запущен инструмент WAImportExport, необходимо включить BitLocker.</span><span class="sxs-lookup"><span data-stu-id="598a0-117">**BitLocker -** BitLocker must be enabled on the machine running the WAImportExport tool.</span></span> <span data-ttu-id="598a0-118">Дополнительные сведения о включении BitLocker см. в разделе [часто задаваемых вопросов](#faq).</span><span class="sxs-lookup"><span data-stu-id="598a0-118">See the [FAQ](#faq) for how to enable BitLocker.</span></span>
- <span data-ttu-id="598a0-119">**Диски** должны быть доступными на компьютере, где запущено средство WAImportExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-119">**Disks** accessible from machine on which WAImportExport Tool is run.</span></span> <span data-ttu-id="598a0-120">Спецификацию дисков см. в [часто задаваемых вопросах](#faq).</span><span class="sxs-lookup"><span data-stu-id="598a0-120">See [FAQ](#faq) for disk specification.</span></span>
- <span data-ttu-id="598a0-121">**Исходные файлы.** Файлы, которые нужно импортировать, должны быть доступными на целевом компьютере, независимо от того, где они сохранены: в сетевой папке или на локальном жестком диске.</span><span class="sxs-lookup"><span data-stu-id="598a0-121">**Source files** - The files you plan to import must be accessible from the copy machine, whether they are on a network share or a local hard drive.</span></span>

### <a name="repairing-a-partially-failed-import-job"></a><span data-ttu-id="598a0-122">Восстановление задания импорта, частично завершившегося сбоем</span><span class="sxs-lookup"><span data-stu-id="598a0-122">Repairing a partially failed import job</span></span>

- <span data-ttu-id="598a0-123">**Файл журнала копирования**, созданный во время копирования службой импорта и экспорта Azure данных между учетной записью хранения и диском.</span><span class="sxs-lookup"><span data-stu-id="598a0-123">**Copy log file** that is generated when Azure Import/Export service copies data between Storage Account and Disk.</span></span> <span data-ttu-id="598a0-124">Он находится в целевой учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-124">It is located in your target storage account.</span></span>

### <a name="repairing-a-partially-failed-export-job"></a><span data-ttu-id="598a0-125">Восстановление задания экспорта, частично завершившегося сбоем</span><span class="sxs-lookup"><span data-stu-id="598a0-125">Repairing a partially failed export job</span></span>

- <span data-ttu-id="598a0-126">**Файл журнала копирования**, созданный во время копирования службой импорта и экспорта Azure данных между учетной записью хранения и диском.</span><span class="sxs-lookup"><span data-stu-id="598a0-126">**Copy log file** that is generated when Azure Import/Export service copies data between Storage Account and Disk.</span></span> <span data-ttu-id="598a0-127">Он находится в исходной учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-127">It is located in your source storage account.</span></span>
- <span data-ttu-id="598a0-128">**Файл манифеста.** Он находится на экспортированном диске, возвращенном корпорацией Майкрософт (необязательно).</span><span class="sxs-lookup"><span data-stu-id="598a0-128">**Manifest file** - [Optional] Located on exported drive that was returned by Microsoft.</span></span>

## <a name="download-and-install-waimportexport"></a><span data-ttu-id="598a0-129">Скачивание и установка средства WAImportExport</span><span class="sxs-lookup"><span data-stu-id="598a0-129">Download and install WAImportExport</span></span>

<span data-ttu-id="598a0-130">Скачайте [последнюю версию WAImportExport.exe](https://www.microsoft.com/download/details.aspx?id=55280).</span><span class="sxs-lookup"><span data-stu-id="598a0-130">Download the [latest version of WAImportExport.exe](https://www.microsoft.com/download/details.aspx?id=55280).</span></span> <span data-ttu-id="598a0-131">Распакуйте содержимое в каталог на своем компьютере.</span><span class="sxs-lookup"><span data-stu-id="598a0-131">Extract the zipped content to a directory on your computer.</span></span>

<span data-ttu-id="598a0-132">Затем создайте CSV-файлы.</span><span class="sxs-lookup"><span data-stu-id="598a0-132">Your next task is to create CSV files.</span></span>

## <a name="prepare-the-dataset-csv-file"></a><span data-ttu-id="598a0-133">Подготовка CSV-файла набора данных</span><span class="sxs-lookup"><span data-stu-id="598a0-133">Prepare the dataset CSV file</span></span>

### <a name="what-is-dataset-csv"></a><span data-ttu-id="598a0-134">Что такое CSV-файл набора данных</span><span class="sxs-lookup"><span data-stu-id="598a0-134">What is dataset CSV</span></span>

<span data-ttu-id="598a0-135">CSV-файл набора данных — это значение флага /dataset, т. е. CSV-файл, содержащий список каталогов и (или) файлов, которые нужно копировать на целевые диски.</span><span class="sxs-lookup"><span data-stu-id="598a0-135">Dataset CSV file is the value of /dataset flag is a CSV file that contains a list of directories and/or a list of files to be copied to target drives.</span></span> <span data-ttu-id="598a0-136">Чтобы создать задание импорта, прежде всего нужно указать, какие каталоги и файлы будут импортированы.</span><span class="sxs-lookup"><span data-stu-id="598a0-136">The first step to creating an import job is to determine which directories and files you are going to import.</span></span> <span data-ttu-id="598a0-137">Это может быть список каталогов, список уникальных файлов или оба списка.</span><span class="sxs-lookup"><span data-stu-id="598a0-137">This can be a list of directories, a list of unique files, or a combination of those two.</span></span> <span data-ttu-id="598a0-138">После добавления каталога все файлы и подкаталоги, содержащиеся в нем, также будут добавлены в задание импорта.</span><span class="sxs-lookup"><span data-stu-id="598a0-138">When a directory is included, all files in the directory and its subdirectories will be part of the import job.</span></span>

<span data-ttu-id="598a0-139">Для каждого импортируемого каталога или файла нужно указать целевой виртуальный каталог или большой двоичный объект в службе BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="598a0-139">For each directory or file to be imported, you must identify a destination virtual directory or blob in the Azure Blob service.</span></span> <span data-ttu-id="598a0-140">Эти целевые объекты будут использоваться в качестве входных данных для средства WAImportExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-140">You will use these targets as inputs to the WAImportExport tool.</span></span> <span data-ttu-id="598a0-141">Каталоги должны быть разделены знаком косой черты "/".</span><span class="sxs-lookup"><span data-stu-id="598a0-141">Directories should be delimited with the forward slash character "/".</span></span>

<span data-ttu-id="598a0-142">В следующей таблице приведены примеры целевых больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-142">The following table shows some examples of blob targets:</span></span>

| <span data-ttu-id="598a0-143">Исходный файл или каталог</span><span class="sxs-lookup"><span data-stu-id="598a0-143">Source file or directory</span></span> | <span data-ttu-id="598a0-144">Целевой большой двоичный объект или виртуальный каталог</span><span class="sxs-lookup"><span data-stu-id="598a0-144">Destination blob or virtual directory</span></span> |
| --- | --- |
| <span data-ttu-id="598a0-145">H:\Video</span><span class="sxs-lookup"><span data-stu-id="598a0-145">H:\Video</span></span> | <span data-ttu-id="598a0-146">https://mystorageaccount.blob.core.windows.net/video</span><span class="sxs-lookup"><span data-stu-id="598a0-146">https://mystorageaccount.blob.core.windows.net/video</span></span> |
| <span data-ttu-id="598a0-147">H:\Photo</span><span class="sxs-lookup"><span data-stu-id="598a0-147">H:\Photo</span></span> | <span data-ttu-id="598a0-148">https://mystorageaccount.blob.core.windows.net/photo</span><span class="sxs-lookup"><span data-stu-id="598a0-148">https://mystorageaccount.blob.core.windows.net/photo</span></span> |
| <span data-ttu-id="598a0-149">K:\Temp\FavoriteVideo.ISO</span><span class="sxs-lookup"><span data-stu-id="598a0-149">K:\Temp\FavoriteVideo.ISO</span></span> | <span data-ttu-id="598a0-150">https://mystorageaccount.blob.core.windows.net/favorite/FavoriteVideo.ISO</span><span class="sxs-lookup"><span data-stu-id="598a0-150">https://mystorageaccount.blob.core.windows.net/favorite/FavoriteVideo.ISO</span></span> |
| <span data-ttu-id="598a0-151">\\myshare\john\music</span><span class="sxs-lookup"><span data-stu-id="598a0-151">\\myshare\john\music</span></span> | <span data-ttu-id="598a0-152">https://mystorageaccount.blob.core.windows.net/music</span><span class="sxs-lookup"><span data-stu-id="598a0-152">https://mystorageaccount.blob.core.windows.net/music</span></span> |

### <a name="sample-datasetcsv"></a><span data-ttu-id="598a0-153">Пример файла dataset.csv</span><span class="sxs-lookup"><span data-stu-id="598a0-153">Sample dataset.csv</span></span>

```
BasePath,DstBlobPathOrPrefix,BlobType,Disposition,MetadataFile,PropertiesFile
"F:\50M_original\100M_1.csv.txt","containername/100M_1.csv.txt",BlockBlob,rename,"None",None
"F:\50M_original\","containername/",BlockBlob,rename,"None",None
```

### <a name="dataset-csv-file-fields"></a><span data-ttu-id="598a0-154">Поля CSV-файла набора данных</span><span class="sxs-lookup"><span data-stu-id="598a0-154">Dataset CSV file fields</span></span>

| <span data-ttu-id="598a0-155">Поле</span><span class="sxs-lookup"><span data-stu-id="598a0-155">Field</span></span> | <span data-ttu-id="598a0-156">Описание</span><span class="sxs-lookup"><span data-stu-id="598a0-156">Description</span></span> |
| --- | --- |
| <span data-ttu-id="598a0-157">BasePath</span><span class="sxs-lookup"><span data-stu-id="598a0-157">BasePath</span></span> | <span data-ttu-id="598a0-158">**[Обязательный параметр]**</span><span class="sxs-lookup"><span data-stu-id="598a0-158">**[Required]**</span></span><br/><span data-ttu-id="598a0-159">Значение этого параметра представляет источник, в котором хранятся импортируемые данные.</span><span class="sxs-lookup"><span data-stu-id="598a0-159">The value of this parameter represents the source where the data to be imported is located.</span></span> <span data-ttu-id="598a0-160">Инструмент рекурсивно скопирует все данные, расположенные по этому пути.</span><span class="sxs-lookup"><span data-stu-id="598a0-160">The tool will recursively copy all data located under this path.</span></span><br><br/><span data-ttu-id="598a0-161">**Допустимые значения:** допустимый путь на локальном компьютере или допустимый путь к общей папке (доступный для пользователя).</span><span class="sxs-lookup"><span data-stu-id="598a0-161">**Allowed Values**: This has to be a valid path on local computer or a valid share path and should be accessible by the user.</span></span> <span data-ttu-id="598a0-162">Путь к каталогу должен быть абсолютным (не относительным).</span><span class="sxs-lookup"><span data-stu-id="598a0-162">The directory path must be an absolute path (not a relative path).</span></span> <span data-ttu-id="598a0-163">Если путь заканчивается на \\, то он представляет каталог, если же конец пути не содержит \\, то он указывает на файл.</span><span class="sxs-lookup"><span data-stu-id="598a0-163">If the path ends with "\\", it represents a directory else a path ending without "\\" represents a file.</span></span><br/><span data-ttu-id="598a0-164">В этом поле запрещается использовать регулярные выражения.</span><span class="sxs-lookup"><span data-stu-id="598a0-164">No regex is allowed in this field.</span></span> <span data-ttu-id="598a0-165">Если в пути содержатся пробелы, заключите их в кавычки ("").</span><span class="sxs-lookup"><span data-stu-id="598a0-165">If the path contains spaces, put it in "".</span></span><br><br/><span data-ttu-id="598a0-166">**Пример:** c:\Directory\c\Directory\File.txt,</span><span class="sxs-lookup"><span data-stu-id="598a0-166">**Example**: "c:\Directory\c\Directory\File.txt"</span></span><br><span data-ttu-id="598a0-167">"\\\\FBaseFilesharePath.domain.net\sharename\directory\"</span><span class="sxs-lookup"><span data-stu-id="598a0-167">"\\\\FBaseFilesharePath.domain.net\sharename\directory\"</span></span>  |
| <span data-ttu-id="598a0-168">DstBlobPathOrPrefix</span><span class="sxs-lookup"><span data-stu-id="598a0-168">DstBlobPathOrPrefix</span></span> | <span data-ttu-id="598a0-169">**[Обязательный параметр]**</span><span class="sxs-lookup"><span data-stu-id="598a0-169">**[Required]**</span></span><br/> <span data-ttu-id="598a0-170">Путь к целевому виртуальному каталогу в учетной записи хранения Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="598a0-170">The path to the destination virtual directory in your Windows Azure storage account.</span></span> <span data-ttu-id="598a0-171">Виртуальный каталог может уже существовать.</span><span class="sxs-lookup"><span data-stu-id="598a0-171">The virtual directory may or may not already exist.</span></span> <span data-ttu-id="598a0-172">Если он отсутствует, служба импорта и экспорта создаст его.</span><span class="sxs-lookup"><span data-stu-id="598a0-172">If it does not exist, Import/Export service will create one.</span></span><br/><br/><span data-ttu-id="598a0-173">Указывая целевые виртуальные каталоги и BLOB-объекты, используйте правильные имена контейнеров.</span><span class="sxs-lookup"><span data-stu-id="598a0-173">Be sure to use valid container names when specifying destination virtual directories or blobs.</span></span> <span data-ttu-id="598a0-174">Обратите внимание, что имена каталогов пишутся строчными буквами.</span><span class="sxs-lookup"><span data-stu-id="598a0-174">Keep in mind that container names must be lowercase.</span></span> <span data-ttu-id="598a0-175">Правила именования контейнеров см. в статье [Именование контейнеров, больших двоичных объектов и метаданных и ссылка на них](/rest/api/storageservices/naming-and-referencing-containers--blobs--and-metadata).</span><span class="sxs-lookup"><span data-stu-id="598a0-175">For container naming rules, see [Naming and Referencing Containers, Blobs, and Metadata](/rest/api/storageservices/naming-and-referencing-containers--blobs--and-metadata).</span></span> <span data-ttu-id="598a0-176">Если указан только корень, то структура каталогов источника реплицируется в целевой контейнер больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-176">If only root is specified, the directory structure of the source is replicated in the destination blob container.</span></span> <span data-ttu-id="598a0-177">Если требуется структура каталогов, отличная от источника, то в CSV-файле можно указать несколько строк для сопоставления.</span><span class="sxs-lookup"><span data-stu-id="598a0-177">If a different directory structure is desired than the one in source, multiple rows of mapping in CSV</span></span><br/><br/><span data-ttu-id="598a0-178">Контейнер или префикс большого двоичного объекта можно указать следующим образом: music/70s/.</span><span class="sxs-lookup"><span data-stu-id="598a0-178">You can specify a container, or a blob prefix like music/70s/.</span></span> <span data-ttu-id="598a0-179">Путь к целевому каталогу должен начинаться с имени контейнера, после которого ставится знак косой черты. При необходимости вы можете добавить виртуальный каталог больших двоичных объектов, который заканчивается знаком косой черты.</span><span class="sxs-lookup"><span data-stu-id="598a0-179">The destination directory must begin with the container name, followed by a forward slash "/", and optionally may include a virtual blob directory that ends with "/".</span></span><br/><br/><span data-ttu-id="598a0-180">Если в качестве целевого контейнера используется корневой контейнер, его (и знак косой черты) необходимо явно указать как $root/.</span><span class="sxs-lookup"><span data-stu-id="598a0-180">When the destination container is the root container, you must explicitly specify the root container, including the forward slash, as $root/.</span></span> <span data-ttu-id="598a0-181">Имена больших двоичных объектов в корневом контейнере не могут содержать знак косой черты. По этой причине, если в качестве целевого контейнера используется корневой контейнер, подкаталоги в исходном каталоге не будут скопированы.</span><span class="sxs-lookup"><span data-stu-id="598a0-181">Since blobs under the root container cannot include "/" in their names, any subdirectories in the source directory will not be copied when the destination directory is the root container.</span></span><br/><br/><span data-ttu-id="598a0-182">**Пример**</span><span class="sxs-lookup"><span data-stu-id="598a0-182">**Example**</span></span><br/><span data-ttu-id="598a0-183">Если путь к целевому большому двоичному объекту имеет формат https://mystorageaccount.blob.core.windows.net/video, в качестве значения этого поля можно использовать video/.</span><span class="sxs-lookup"><span data-stu-id="598a0-183">If the destination blob path is https://mystorageaccount.blob.core.windows.net/video, the value of this field can be video/</span></span>  |
| <span data-ttu-id="598a0-184">BlobType</span><span class="sxs-lookup"><span data-stu-id="598a0-184">BlobType</span></span> | <span data-ttu-id="598a0-185">**[Необязательный параметр]** block &#124; page</span><span class="sxs-lookup"><span data-stu-id="598a0-185">**[Optional]** block &#124; page</span></span><br/><span data-ttu-id="598a0-186">В настоящее время служба импорта и экспорта поддерживает 2 вида больших двоичных объектов:</span><span class="sxs-lookup"><span data-stu-id="598a0-186">Currently Import/Export service supports 2 kinds of Blobs.</span></span> <span data-ttu-id="598a0-187">страничные BLOB-объекты и блочные BLOB-объекты. По умолчанию все файлы импортируются как блочные BLOB-объекты.</span><span class="sxs-lookup"><span data-stu-id="598a0-187">Page blobs and Block BlobsBy default all files will be imported as Block Blobs.</span></span> <span data-ttu-id="598a0-188">Файлы \*.vhd и \*.vhdx импортируются как страничные BLOB-объекты. Максимальный размер этих видов больших двоичных объектов ограничен.</span><span class="sxs-lookup"><span data-stu-id="598a0-188">And \*.vhd and \*.vhdx will be imported as Page BlobsThere is a limit on the block-blob and page-blob allowed size.</span></span> <span data-ttu-id="598a0-189">Дополнительные сведения см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](storage-scalability-targets.md#scalability-targets-for-blobs-queues-tables-and-files).</span><span class="sxs-lookup"><span data-stu-id="598a0-189">See [Storage scalability targets](storage-scalability-targets.md#scalability-targets-for-blobs-queues-tables-and-files) for more information.</span></span>  |
| <span data-ttu-id="598a0-190">Disposition</span><span class="sxs-lookup"><span data-stu-id="598a0-190">Disposition</span></span> | <span data-ttu-id="598a0-191">**[Необязательный параметр]** rename &#124; no-overwrite &#124; overwrite</span><span class="sxs-lookup"><span data-stu-id="598a0-191">**[Optional]** rename &#124; no-overwrite &#124; overwrite</span></span> <br/> <span data-ttu-id="598a0-192">Это поле определяет поведение копирования во время импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-192">This field specifies the copy-behavior during import i.e</span></span> <span data-ttu-id="598a0-193">при передаче данных с диска в учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-193">when data is being uploaded to the storage account from the disk.</span></span> <span data-ttu-id="598a0-194">Доступные параметры: rename, overwite, no-overwrite. Если ничего не указано, то по умолчанию используется параметр overwite.</span><span class="sxs-lookup"><span data-stu-id="598a0-194">Available options are: rename&#124;overwite&#124;no-overwrite.Defaults to "rename" if nothing specified.</span></span> <br/><br/><span data-ttu-id="598a0-195">**rename** — при наличии двух объектов с одинаковым именем создает копию в целевом расположении.</span><span class="sxs-lookup"><span data-stu-id="598a0-195">**Rename**: If an object with same name is present, creates a copy in destination.</span></span><br/><span data-ttu-id="598a0-196">overwrite — заменяет более старый файл новым.</span><span class="sxs-lookup"><span data-stu-id="598a0-196">Overwrite: overwrites the file with newer file.</span></span> <span data-ttu-id="598a0-197">Приоритет имеет последний измененный файл.</span><span class="sxs-lookup"><span data-stu-id="598a0-197">The file with last-modified wins.</span></span><br/><span data-ttu-id="598a0-198">**no-overwrite** — пропускает запись имеющегося файла.</span><span class="sxs-lookup"><span data-stu-id="598a0-198">**No-overwrite**: Skips writing the file if already present.</span></span>|
| <span data-ttu-id="598a0-199">MetadataFile</span><span class="sxs-lookup"><span data-stu-id="598a0-199">MetadataFile</span></span> | <span data-ttu-id="598a0-200">**[Необязательный параметр]**</span><span class="sxs-lookup"><span data-stu-id="598a0-200">**[Optional]**</span></span> <br/><span data-ttu-id="598a0-201">Значение этого поля — файл метаданных с сохраненными или пользовательскими метаданными объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-201">The value to this field is the metadata file which can be provided if the one needs to preserve the metadata of the objects or provide custom metadata.</span></span> <span data-ttu-id="598a0-202">Путь к файлу метаданных для целевых больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-202">Path to the metadata file for the destination blobs.</span></span> <span data-ttu-id="598a0-203">Дополнительные сведения см. в статье [Формат файла свойств и метаданных службы импорта и экспорта](storage-import-export-file-format-metadata-and-properties.md).</span><span class="sxs-lookup"><span data-stu-id="598a0-203">See [Import/Export service Metadata and Properties File Format](storage-import-export-file-format-metadata-and-properties.md) for more information</span></span> |
| <span data-ttu-id="598a0-204">PropertiesFile</span><span class="sxs-lookup"><span data-stu-id="598a0-204">PropertiesFile</span></span> | <span data-ttu-id="598a0-205">**[Необязательный параметр]**</span><span class="sxs-lookup"><span data-stu-id="598a0-205">**[Optional]**</span></span> <br/><span data-ttu-id="598a0-206">Путь к файлу свойств для целевых больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-206">Path to the property file for the destination blobs.</span></span> <span data-ttu-id="598a0-207">Дополнительные сведения см. в статье [Формат файла свойств и метаданных службы импорта и экспорта](storage-import-export-file-format-metadata-and-properties.md).</span><span class="sxs-lookup"><span data-stu-id="598a0-207">See [Import/Export service Metadata and Properties File Format](storage-import-export-file-format-metadata-and-properties.md) for more information.</span></span> |

## <a name="prepare-initialdriveset-or-additionaldriveset-csv-file"></a><span data-ttu-id="598a0-208">Подготовка CSV-файла InitialDriveSet или AdditionalDriveSet</span><span class="sxs-lookup"><span data-stu-id="598a0-208">Prepare InitialDriveSet or AdditionalDriveSet CSV file</span></span>

### <a name="what-is-driveset-csv"></a><span data-ttu-id="598a0-209">Что такое CSV-файл набора дисков</span><span class="sxs-lookup"><span data-stu-id="598a0-209">What is driveset CSV</span></span>

<span data-ttu-id="598a0-210">Значение флага /InitialDriveSet или /AdditionalDriveSet — это CSV-файл, содержащий список дисков, с которыми сопоставлены буквы дисков, в результате чего инструмент может правильно выбрать список дисков для подготовки.</span><span class="sxs-lookup"><span data-stu-id="598a0-210">The value of the /InitialDriveSet or /AdditionalDriveSet flag is a CSV file that contains the list of disks to which the drive letters are mapped so that the tool can correctly pick the list of disks to be prepared.</span></span> <span data-ttu-id="598a0-211">Если размер данных превышает размер диска, средство WAImportExport оптимальным образом распределяет данные между несколькими дисками, указанными в этом CSV-файле.</span><span class="sxs-lookup"><span data-stu-id="598a0-211">If the data size is greater than a single disk size, the WAImportExport tool will distribute the data across multiple disks enlisted in this CSV file in an optimized way.</span></span>

<span data-ttu-id="598a0-212">В рамках одного сеанса данные можно записывать на неограниченное количество дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-212">There is no limit on the number of disks the data can be written to in a single session.</span></span> <span data-ttu-id="598a0-213">Средство распределяет данные на основе размера диска и папки.</span><span class="sxs-lookup"><span data-stu-id="598a0-213">The tool will distribute data based on disk size and folder size.</span></span> <span data-ttu-id="598a0-214">Выбор наиболее подходящего диска зависит от размера объекта.</span><span class="sxs-lookup"><span data-stu-id="598a0-214">It will select the disk that is most optimized for the object-size.</span></span> <span data-ttu-id="598a0-215">Данные, переданные в учетную запись хранения, принимают структуру каталогов, указанную в файле набора данных.</span><span class="sxs-lookup"><span data-stu-id="598a0-215">The data when uploaded to the storage account will be converged back to the directory structure that was specified in dataset file.</span></span> <span data-ttu-id="598a0-216">Чтобы создать CSV-файл набора дисков, выполните описанные ниже действия.</span><span class="sxs-lookup"><span data-stu-id="598a0-216">In order to create a driveset CSV, follow the steps below.</span></span>

### <a name="create-basic-volume-and-assign-drive-letter"></a><span data-ttu-id="598a0-217">Создание базового тома и назначение буквы диска</span><span class="sxs-lookup"><span data-stu-id="598a0-217">Create basic volume and assign drive letter</span></span>

<span data-ttu-id="598a0-218">Чтобы создать базовый том и назначить букву диска, выполните инструкции по созданию раздела, описанные в статье с [общими сведениями об управлении дисками](https://technet.microsoft.com/library/cc754936.aspx).</span><span class="sxs-lookup"><span data-stu-id="598a0-218">In order to create a basic volume and assign a drive letter, by following the instructions for "Simpler partition creation" given at [Overview of Disk Management](https://technet.microsoft.com/library/cc754936.aspx).</span></span>

### <a name="sample-initialdriveset-and-additionaldriveset-csv-file"></a><span data-ttu-id="598a0-219">Пример CSV-файла InitialDriveSet и AdditionalDriveSet</span><span class="sxs-lookup"><span data-stu-id="598a0-219">Sample InitialDriveSet and AdditionalDriveSet CSV file</span></span>

```
DriveLetter,FormatOption,SilentOrPromptOnFormat,Encryption,ExistingBitLockerKey
G,AlreadyFormatted,SilentMode,AlreadyEncrypted,060456-014509-132033-080300-252615-584177-672089-411631
H,Format,SilentMode,Encrypt,
```

### <a name="driveset-csv-file-fields"></a><span data-ttu-id="598a0-220">Поля CSV-файла набора дисков</span><span class="sxs-lookup"><span data-stu-id="598a0-220">Driveset CSV file fields</span></span>

| <span data-ttu-id="598a0-221">Поля</span><span class="sxs-lookup"><span data-stu-id="598a0-221">Fields</span></span> | <span data-ttu-id="598a0-222">Значение</span><span class="sxs-lookup"><span data-stu-id="598a0-222">Value</span></span> |
| --- | --- |
| <span data-ttu-id="598a0-223">DriveLetter</span><span class="sxs-lookup"><span data-stu-id="598a0-223">DriveLetter</span></span> | <span data-ttu-id="598a0-224">**[Обязательный параметр]**</span><span class="sxs-lookup"><span data-stu-id="598a0-224">**[Required]**</span></span><br/> <span data-ttu-id="598a0-225">Каждый диск, указанный в средстве как целевой, должен иметь простой том NTFS и назначенную букву.</span><span class="sxs-lookup"><span data-stu-id="598a0-225">Each drive that is being provided to the tool as the destination needs have a simple NTFS volume on it and a drive letter assigned to it.</span></span><br/> <br/><span data-ttu-id="598a0-226">**Пример:** R или r.</span><span class="sxs-lookup"><span data-stu-id="598a0-226">**Example**: R or r</span></span> |
| <span data-ttu-id="598a0-227">FormatOption</span><span class="sxs-lookup"><span data-stu-id="598a0-227">FormatOption</span></span> | <span data-ttu-id="598a0-228">**[Обязательный параметр]** Format &#124; AlreadyFormatted</span><span class="sxs-lookup"><span data-stu-id="598a0-228">**[Required]** Format &#124; AlreadyFormatted</span></span><br/><br/> <span data-ttu-id="598a0-229">**Format.** Включает форматирование всех данных на диске.</span><span class="sxs-lookup"><span data-stu-id="598a0-229">**Format**: Specifying this will format all the data on the disk.</span></span> <br/><span data-ttu-id="598a0-230">**AlreadyFormatted.** Если указано это значение, средство пропускает форматирование.</span><span class="sxs-lookup"><span data-stu-id="598a0-230">**AlreadyFormatted**: The tool will skip formatting when this value is specified.</span></span> |
| <span data-ttu-id="598a0-231">SilentOrPromptOnFormat</span><span class="sxs-lookup"><span data-stu-id="598a0-231">SilentOrPromptOnFormat</span></span> | <span data-ttu-id="598a0-232">**[Обязательный параметр]** SilentMode &#124; PromptOnFormat</span><span class="sxs-lookup"><span data-stu-id="598a0-232">**[Required]** SilentMode &#124; PromptOnFormat</span></span><br/><br/><span data-ttu-id="598a0-233">**SilentMode.** Укажите это значение, чтобы запустить средство в автоматическом режиме.</span><span class="sxs-lookup"><span data-stu-id="598a0-233">**SilentMode**: Providing this value will enable user to run the tool in Silent Mode.</span></span> <br/><span data-ttu-id="598a0-234">**PromptOnFormat.** Указав это значение, средство будет запрашивать подтверждение действия при каждом форматировании.</span><span class="sxs-lookup"><span data-stu-id="598a0-234">**PromptOnFormat**: The tool will prompt the user to confirm whether the action is really intended at every format.</span></span><br/><br/><span data-ttu-id="598a0-235">Если не задать его, выполнение команды прервется и отобразится сообщение "Неправильное значение для свойства SilentOrPromptOnFormat: none".</span><span class="sxs-lookup"><span data-stu-id="598a0-235">If not set, command will abort and display error message: "Incorrect value for SilentOrPromptOnFormat: none"</span></span> |
| <span data-ttu-id="598a0-236">Шифрование</span><span class="sxs-lookup"><span data-stu-id="598a0-236">Encryption</span></span> | <span data-ttu-id="598a0-237">**[Обязательный параметр]**  Encrypt &#124; AlreadyEncrypted</span><span class="sxs-lookup"><span data-stu-id="598a0-237">**[Required]** Encrypt &#124; AlreadyEncrypted</span></span><br/> <span data-ttu-id="598a0-238">Значение этого поля определяет, какие диски следует шифровать, а какие нет.</span><span class="sxs-lookup"><span data-stu-id="598a0-238">The value of this field decides which disk to encrypt and which not to.</span></span> <br/><br/><span data-ttu-id="598a0-239">**Encrypt.** Инструмент отформатирует диск.</span><span class="sxs-lookup"><span data-stu-id="598a0-239">**Encrypt**: Tool will format the drive.</span></span> <span data-ttu-id="598a0-240">Если для поля FormatOption задано значение Format, то в этом поле следует задать значение Encrypt.</span><span class="sxs-lookup"><span data-stu-id="598a0-240">If value of "FormatOption" field is "Format" then this value is required to be "Encrypt".</span></span> <span data-ttu-id="598a0-241">Если в этом случае задать значение AlreadyEncrypted, отобразится следующее сообщение об ошибке: When Format is specified, Encrypt must also be specified (Если задано значение Format, то также необходимо задать значение Encrypt).</span><span class="sxs-lookup"><span data-stu-id="598a0-241">If "AlreadyEncrypted" is specified in this case, it will result into an error "When Format is specified, Encrypt must also be specified".</span></span><br/><span data-ttu-id="598a0-242">**AlreadyEncrypted.** Если указать это значение, инструмент расшифрует диск, используя ключ BitLocker, указанный в поле ExistingBitLockerKey.</span><span class="sxs-lookup"><span data-stu-id="598a0-242">**AlreadyEncrypted**: Tool will decrypt the drive using the BitLockerKey provided in "ExistingBitLockerKey" Field.</span></span> <span data-ttu-id="598a0-243">Если для поля FormatOption задано значение AlreadyFormatted, то в этом поле можно задать как значение Encrypt, так и AlreadyEncrypted.</span><span class="sxs-lookup"><span data-stu-id="598a0-243">If value of "FormatOption" field is "AlreadyFormatted", then this value can be either "Encrypt" or "AlreadyEncrypted"</span></span> |
| <span data-ttu-id="598a0-244">ExistingBitLockerKey</span><span class="sxs-lookup"><span data-stu-id="598a0-244">ExistingBitLockerKey</span></span> | <span data-ttu-id="598a0-245">**[Обязательный параметр]**, если в поле Encryption задано значение AlreadyEncrypted</span><span class="sxs-lookup"><span data-stu-id="598a0-245">**[Required]** If value of "Encryption" field is "AlreadyEncrypted"</span></span><br/> <span data-ttu-id="598a0-246">Значение этого поля — ключ BitLocker, связанный с определенным диском.</span><span class="sxs-lookup"><span data-stu-id="598a0-246">The value of this field is the BitLocker key that is associated with the particular disk.</span></span> <br/><br/><span data-ttu-id="598a0-247">Если в поле Encryption указано значение Encrypt, то это поле следует оставить пустым.</span><span class="sxs-lookup"><span data-stu-id="598a0-247">This field should be left blank if the value of "Encryption" field is "Encrypt".</span></span>  <span data-ttu-id="598a0-248">Если в этом случае указать ключ BitLocker, отобразится следующее сообщение об ошибке: Bitlocker Key should not be specified (Не следует указывать ключ BitLocker).</span><span class="sxs-lookup"><span data-stu-id="598a0-248">If BitLocker Key is specified in this case, it will result into an error "Bitlocker Key should not be specified".</span></span><br/>  <span data-ttu-id="598a0-249">**Пример**: 060456-014509-132033-080300-252615-584177-672089-411631.</span><span class="sxs-lookup"><span data-stu-id="598a0-249">**Example**: 060456-014509-132033-080300-252615-584177-672089-411631</span></span>|

##  <a name="preparing-disk-for-import-job"></a><span data-ttu-id="598a0-250">Подготовка диска к заданию импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-250">Preparing disk for import job</span></span>

<span data-ttu-id="598a0-251">Чтобы подготовить диски к заданию импорта, вызовите средство WAImportExport с помощью команды **PrepImport**.</span><span class="sxs-lookup"><span data-stu-id="598a0-251">To prepare drives for an import job, call the WAImportExport tool with the **PrepImport** command.</span></span> <span data-ttu-id="598a0-252">Используемые параметры зависят от того, какой это сеанс копирования: первый или последующий.</span><span class="sxs-lookup"><span data-stu-id="598a0-252">Which parameters you include depends on whether this is the first copy session, or a subsequent copy session.</span></span>

### <a name="first-session"></a><span data-ttu-id="598a0-253">Первый сеанс</span><span class="sxs-lookup"><span data-stu-id="598a0-253">First session</span></span>

<span data-ttu-id="598a0-254">Во время первого сеанса выполняется копирование одного или нескольких каталогов на один или несколько дисков (в зависимости от параметров, указанных в CSV-файле). Команда PrepImport в средстве WAImportExport, используемая для первого сеанса копирования каталогов и (или) файлов в рамках нового сеанса, выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="598a0-254">First Copy Session to Copy a Single/Multiple Directory to a single/multiple Disk (depending on what is specified in CSV file) WAImportExport tool PrepImport command for the first copy session to copy directories and/or files with a new copy session:</span></span>

```
WAImportExport.exe PrepImport /j:<JournalFile> /id:<SessionId> [/logdir:<LogDirectory>] [/sk:<StorageAccountKey>] [/silentmode] [/InitialDriveSet:<driveset.csv>] DataSet:<dataset.csv>
```

<span data-ttu-id="598a0-255">**Пример**</span><span class="sxs-lookup"><span data-stu-id="598a0-255">**Example:**</span></span>

```
WAImportExport.exe PrepImport /j:JournalTest.jrn /id:session#1  /sk:\*\*\*\*\*\*\*\*\*\*\*\*\* /InitialDriveSet:driveset-1.csv /DataSet:dataset-1.csv /logdir:F:\logs
```

### <a name="add-data-in-subsequent-session"></a><span data-ttu-id="598a0-256">Добавление данных в последующем сеансе</span><span class="sxs-lookup"><span data-stu-id="598a0-256">Add data in subsequent session</span></span>

<span data-ttu-id="598a0-257">Для последующих сеансов копирования начальные параметры задавать не нужно.</span><span class="sxs-lookup"><span data-stu-id="598a0-257">In subsequent copy sessions, you do not need to specify the initial parameters.</span></span> <span data-ttu-id="598a0-258">Вы должны использовать тот же файл журнала, чтобы продолжить последующий сеанс с места остановки предыдущего.</span><span class="sxs-lookup"><span data-stu-id="598a0-258">You need to use the same journal file in order for the tool to remember where it left in the previous session.</span></span> <span data-ttu-id="598a0-259">Состояние сеанса копирования записывается в файл журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-259">The state of the copy session is written to the journal file.</span></span> <span data-ttu-id="598a0-260">Ниже приведен синтаксис для последующего сеанса копирования дополнительных каталогов или файлов.</span><span class="sxs-lookup"><span data-stu-id="598a0-260">Here is the syntax for a subsequent copy session to copy additional directories and or files:</span></span>

```
WAImportExport.exe PrepImport /j:<SameJournalFile> /id:<DifferentSessionId>  [DataSet:<differentdataset.csv>]
```

<span data-ttu-id="598a0-261">**Пример**</span><span class="sxs-lookup"><span data-stu-id="598a0-261">**Example:**</span></span>

```
WAImportExport.exe PrepImport /j:JournalTest.jrn /id:session#2  /DataSet:dataset-2.csv
```

### <a name="add-drives-to-latest-session"></a><span data-ttu-id="598a0-262">Добавление дисков к последнему сеансу</span><span class="sxs-lookup"><span data-stu-id="598a0-262">Add drives to latest session</span></span>

<span data-ttu-id="598a0-263">Если данные не поместились на указанных в файле InitialDriveset дисках, с помощью этого средства вы можете добавить дополнительные диски к тому же сеансу копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-263">If the data did not fit in specified drives in InitialDriveset, one can use the tool to add additional drives to same copy session.</span></span> 

>[!NOTE] 
><span data-ttu-id="598a0-264">Идентификатор этого сеанса должен совпадать с идентификатором предыдущего сеанса.</span><span class="sxs-lookup"><span data-stu-id="598a0-264">The session id should match the previous session id.</span></span> <span data-ttu-id="598a0-265">В обоих сеансах следует использовать тот же файл журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-265">Journal file should match the one specified in previous session.</span></span>
>
```
WAImportExport.exe PrepImport /j:<SameJournalFile> /id:<SameSessionId> /AdditionalDriveSet:<newdriveset.csv>
```

<span data-ttu-id="598a0-266">**Пример**</span><span class="sxs-lookup"><span data-stu-id="598a0-266">**Example:**</span></span>

```
WAImportExport.exe PrepImport /j:SameJournalTest.jrn /id:session#2  /AdditionalDriveSet:driveset-2.csv
```

### <a name="abort-the-latest-session"></a><span data-ttu-id="598a0-267">Прерывание последнего сеанса</span><span class="sxs-lookup"><span data-stu-id="598a0-267">Abort the latest session:</span></span>

<span data-ttu-id="598a0-268">Если сеанс копирования был прерван и его невозможно восстановить (например, если исходный каталог стал недоступным), текущий сеанс необходимо прервать. Это позволит выполнить откат этого сеанса копирования и запустить новый.</span><span class="sxs-lookup"><span data-stu-id="598a0-268">If a copy session is interrupted and it is not possible to resume (for example, if a source directory proved inaccessible), you must abort the current session so that it can be rolled back and new copy sessions can be started:</span></span>

```
WAImportExport.exe PrepImport /j:<SameJournalFile> /id:<SameSessionId> /AbortSession
```

<span data-ttu-id="598a0-269">**Пример**</span><span class="sxs-lookup"><span data-stu-id="598a0-269">**Example:**</span></span>

```
WAImportExport.exe PrepImport /j:JournalTest.jrn /id:session#2  /AbortSession
```

<span data-ttu-id="598a0-270">Вы можете прервать только последний завершившийся сбоем сеанс.</span><span class="sxs-lookup"><span data-stu-id="598a0-270">Only the last copy session, if terminated abnormally, can be aborted.</span></span> <span data-ttu-id="598a0-271">Обратите внимание, что первый сеанс копирования для диска прервать невозможно.</span><span class="sxs-lookup"><span data-stu-id="598a0-271">Note that you cannot abort the first copy session for a drive.</span></span> <span data-ttu-id="598a0-272">В этом случае нужно перезапустить сеанс копирования, используя новый файл журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-272">Instead you must restart the copy session with a new journal file.</span></span>

### <a name="resume-a-latest-interrupted-session"></a><span data-ttu-id="598a0-273">Возобновление последнего прерванного сеанса</span><span class="sxs-lookup"><span data-stu-id="598a0-273">Resume a latest interrupted session</span></span>

<span data-ttu-id="598a0-274">Если сеанс копирования по какой-либо причине был прерван, вы можете возобновить его. Для этого запустите средство, указав только определенный файл журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-274">If a copy session is interrupted for any reason, you can resume it by running the tool with only the journal file specified:</span></span>

```
WAImportExport.exe PrepImport /j:<SameJournalFile> /id:<SameSessionId> /ResumeSession
```

<span data-ttu-id="598a0-275">**Пример**</span><span class="sxs-lookup"><span data-stu-id="598a0-275">**Example:**</span></span>

```
WAImportExport.exe PrepImport /j:JournalTest.jrn /id:session#2 /ResumeSession
```

> [!IMPORTANT] 
> <span data-ttu-id="598a0-276">При возобновлении сеанса копирования не добавляйте дополнительные или не удаляйте исходные файлы данных и каталоги.</span><span class="sxs-lookup"><span data-stu-id="598a0-276">When you resume a copy session, do not modify the source data files and directories by adding or removing files.</span></span>

## <a name="waimportexport-parameters"></a><span data-ttu-id="598a0-277">Параметры WAImportExport</span><span class="sxs-lookup"><span data-stu-id="598a0-277">WAImportExport parameters</span></span>

| <span data-ttu-id="598a0-278">Параметры</span><span class="sxs-lookup"><span data-stu-id="598a0-278">Parameters</span></span> | <span data-ttu-id="598a0-279">Описание</span><span class="sxs-lookup"><span data-stu-id="598a0-279">Description</span></span> |
| --- | --- |
|     <span data-ttu-id="598a0-280">/j:&lt;JournalFile&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-280">/j:&lt;JournalFile&gt;</span></span>  | <span data-ttu-id="598a0-281">**Обязательный**</span><span class="sxs-lookup"><span data-stu-id="598a0-281">**Required**</span></span><br/> <span data-ttu-id="598a0-282">Путь к файлу журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-282">Path to the journal file.</span></span> <span data-ttu-id="598a0-283">Файл журнала отслеживает набор дисков и записывает ход выполнения их подготовки.</span><span class="sxs-lookup"><span data-stu-id="598a0-283">A journal file tracks a set of drives and records the progress in preparing these drives.</span></span> <span data-ttu-id="598a0-284">Его необходимо всегда указывать.</span><span class="sxs-lookup"><span data-stu-id="598a0-284">The journal file must always be specified.</span></span>  |
|     <span data-ttu-id="598a0-285">/logdir:&lt;LogDirectory&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-285">/logdir:&lt;LogDirectory&gt;</span></span>  | <span data-ttu-id="598a0-286">**Необязательно**.</span><span class="sxs-lookup"><span data-stu-id="598a0-286">**Optional**.</span></span> <span data-ttu-id="598a0-287">Каталог журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-287">The log directory.</span></span><br/> <span data-ttu-id="598a0-288">В этот каталог записываются файлы подробного журнала и некоторые временные файлы.</span><span class="sxs-lookup"><span data-stu-id="598a0-288">Verbose log files as well as some temporary files will be written to this directory.</span></span> <span data-ttu-id="598a0-289">Если каталог не указан, вместо него будет использоваться текущий каталог.</span><span class="sxs-lookup"><span data-stu-id="598a0-289">If not specified, current directory will be used as the log directory.</span></span> <span data-ttu-id="598a0-290">Для одного файла журнала можно указать только один каталог журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-290">The log directory can be specified only once for the same journal file.</span></span>  |
|     <span data-ttu-id="598a0-291">/id:&lt;SessionId&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-291">/id:&lt;SessionId&gt;</span></span>  | <span data-ttu-id="598a0-292">**Обязательный**</span><span class="sxs-lookup"><span data-stu-id="598a0-292">**Required**</span></span><br/> <span data-ttu-id="598a0-293">Идентификатор сеанса, используемый для определения сеанса копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-293">The session Id is used to identify a copy session.</span></span> <span data-ttu-id="598a0-294">и используется для обеспечения точного восстановления прерванного сеанса копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-294">It is used to ensure accurate recovery of an interrupted copy session.</span></span>  |
|     <span data-ttu-id="598a0-295">/ResumeSession</span><span class="sxs-lookup"><span data-stu-id="598a0-295">/ResumeSession</span></span>  | <span data-ttu-id="598a0-296">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="598a0-296">Optional.</span></span> <span data-ttu-id="598a0-297">Если последний сеанс копирования завершился сбоем, этот параметр позволяет возобновить сеанс.</span><span class="sxs-lookup"><span data-stu-id="598a0-297">If the last copy session was terminated abnormally, this parameter can be specified to resume the session.</span></span>   |
|     <span data-ttu-id="598a0-298">/AbortSession</span><span class="sxs-lookup"><span data-stu-id="598a0-298">/AbortSession</span></span>  | <span data-ttu-id="598a0-299">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="598a0-299">Optional.</span></span> <span data-ttu-id="598a0-300">Если последний сеанс копирования завершился сбоем, этот параметр позволяет прервать сеанс.</span><span class="sxs-lookup"><span data-stu-id="598a0-300">If the last copy session was terminated abnormally, this parameter can be specified to abort the session.</span></span>  |
|     <span data-ttu-id="598a0-301">/sn:&lt;StorageAccountName&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-301">/sn:&lt;StorageAccountName&gt;</span></span>  | <span data-ttu-id="598a0-302">**Обязательный**</span><span class="sxs-lookup"><span data-stu-id="598a0-302">**Required**</span></span><br/> <span data-ttu-id="598a0-303">Применяется только для команд RepairImport и RepairExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-303">Only applicable for RepairImport and RepairExport.</span></span> <span data-ttu-id="598a0-304">Имя учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-304">The name of the storage account.</span></span>  |
|     <span data-ttu-id="598a0-305">/sk:&lt;StorageAccountKey&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-305">/sk:&lt;StorageAccountKey&gt;</span></span>  | <span data-ttu-id="598a0-306">**Обязательный**</span><span class="sxs-lookup"><span data-stu-id="598a0-306">**Required**</span></span><br/> <span data-ttu-id="598a0-307">Ключ учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-307">The key of the storage account.</span></span> |
|     <span data-ttu-id="598a0-308">/InitialDriveSet:&lt;driveset.csv&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-308">/InitialDriveSet:&lt;driveset.csv&gt;</span></span>  | <span data-ttu-id="598a0-309">**Обязательный параметр.** При выполнении первого сеанса копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-309">**Required** When running the first copy session</span></span><br/> <span data-ttu-id="598a0-310">CSV-файл, содержащий список дисков для подготовки.</span><span class="sxs-lookup"><span data-stu-id="598a0-310">A CSV file that contains a list of drives to prepare.</span></span>  |
|     <span data-ttu-id="598a0-311">/AdditionalDriveSet:&lt;driveset.csv&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-311">/AdditionalDriveSet:&lt;driveset.csv&gt;</span></span> | <span data-ttu-id="598a0-312">**Обязательный**.</span><span class="sxs-lookup"><span data-stu-id="598a0-312">**Required**.</span></span> <span data-ttu-id="598a0-313">При добавлении дисков к текущему сеансу копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-313">When adding drives to current copy session.</span></span> <br/> <span data-ttu-id="598a0-314">CSV-файл, содержащий список дополнительных дисков, которые нужно добавить.</span><span class="sxs-lookup"><span data-stu-id="598a0-314">A CSV file that contains a list of additional drives to be added.</span></span>  |
|      <span data-ttu-id="598a0-315">/r:&lt;RepairFile&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-315">/r:&lt;RepairFile&gt;</span></span> | <span data-ttu-id="598a0-316">**Обязательный параметр.** Применяется только для команд RepairImport и RepairExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-316">**Required** Only applicable for RepairImport and RepairExport.</span></span><br/> <span data-ttu-id="598a0-317">Путь к файлу для отслеживания хода выполнения восстановления.</span><span class="sxs-lookup"><span data-stu-id="598a0-317">Path to the file for tracking repair progress.</span></span> <span data-ttu-id="598a0-318">Каждый диск должен быть связан с одним и только одним файлом восстановления.</span><span class="sxs-lookup"><span data-stu-id="598a0-318">Each drive must have one and only one repair file.</span></span>  |
|     <span data-ttu-id="598a0-319">/d:&lt;TargetDirectories&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-319">/d:&lt;TargetDirectories&gt;</span></span> | <span data-ttu-id="598a0-320">**Обязательный**.</span><span class="sxs-lookup"><span data-stu-id="598a0-320">**Required**.</span></span> <span data-ttu-id="598a0-321">Применяется только для команд RepairImport и RepairExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-321">Only applicable for RepairImport and RepairExport.</span></span> <span data-ttu-id="598a0-322">В команде RepairImport можно указать один или несколько каталогов для восстановления (в качестве разделителя используется точка с запятой), а в команде RepairExport — один каталог, т. е. корневой каталог диска.</span><span class="sxs-lookup"><span data-stu-id="598a0-322">For RepairImport, one or more semicolon-separated directories to repair; For RepairExport, one directory to repair, e.g. root directory of the drive.</span></span>  |
|     <span data-ttu-id="598a0-323">/CopyLogFile:&lt;DriveCopyLogFile&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-323">/CopyLogFile:&lt;DriveCopyLogFile&gt;</span></span> | <span data-ttu-id="598a0-324">**Обязательный параметр.** Применяется только для команд RepairImport и RepairExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-324">**Required** Only applicable for RepairImport and RepairExport.</span></span> <span data-ttu-id="598a0-325">Путь к файлу журнала копирования диска (подробного журнала или журнала ошибок).</span><span class="sxs-lookup"><span data-stu-id="598a0-325">Path to the  drive copy log file (verbose or error).</span></span>  |
|     <span data-ttu-id="598a0-326">/ManifestFile:&lt;DriveManifestFile&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-326">/ManifestFile:&lt;DriveManifestFile&gt;</span></span> | <span data-ttu-id="598a0-327">**Обязательный параметр.** Применяется только для команды RepairExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-327">**Required** Only applicable for RepairExport.</span></span><br/> <span data-ttu-id="598a0-328">Путь к файлу манифеста диска.</span><span class="sxs-lookup"><span data-stu-id="598a0-328">Path to the drive manifest file.</span></span>  |
|     <span data-ttu-id="598a0-329">/PathMapFile:&lt;DrivePathMapFile&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-329">/PathMapFile:&lt;DrivePathMapFile&gt;</span></span> | <span data-ttu-id="598a0-330">**Необязательно**.</span><span class="sxs-lookup"><span data-stu-id="598a0-330">**Optional**.</span></span> <span data-ttu-id="598a0-331">Применяется только для команды RepairImport.</span><span class="sxs-lookup"><span data-stu-id="598a0-331">Only applicable for RepairImport.</span></span><br/> <span data-ttu-id="598a0-332">Путь к файлу, содержащему сопоставления путей к файлам корневого каталога диска с расположениями фактических файлов (с разделителями-знаками табуляции).</span><span class="sxs-lookup"><span data-stu-id="598a0-332">Path to the file containing mappings of file paths relative to the drive root to locations of actual files (tab-delimited).</span></span> <span data-ttu-id="598a0-333">При первом указании он заполняется пустыми путями. Это означает, что эти файлы отсутствуют в целевых каталогах, доступ к ним запрещен, они имеют недопустимое имя или находятся в нескольких каталогах.</span><span class="sxs-lookup"><span data-stu-id="598a0-333">When first specified, it will be populated with file paths with empty targets, which means either they are not found in TargetDirectories, access denied, with invalid name, or they exist in multiple directories.</span></span> <span data-ttu-id="598a0-334">Файл сопоставления пути можно изменить вручную, добавив в него правильные целевые пути. Затем его можно заново задать в средстве. Это позволит устранить проблему с путями к файлам.</span><span class="sxs-lookup"><span data-stu-id="598a0-334">The path map file can be manually edited to include the correct target paths and  specified again for the tool to resolve the file paths correctly.</span></span>  |
|     <span data-ttu-id="598a0-335">/ExportBlobListFile:&lt;ExportBlobListFile&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-335">/ExportBlobListFile:&lt;ExportBlobListFile&gt;</span></span> | <span data-ttu-id="598a0-336">**Обязательный**.</span><span class="sxs-lookup"><span data-stu-id="598a0-336">**Required**.</span></span> <span data-ttu-id="598a0-337">Применяется только для команды PreviewExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-337">Only applicable for PreviewExport.</span></span><br/> <span data-ttu-id="598a0-338">Путь к XML-файлу, содержащему список путей к большим двоичным объектам или префиксов путей экспортируемых больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-338">Path to the XML file containing list of blob paths or blob path prefixes for the blobs to be exported.</span></span> <span data-ttu-id="598a0-339">Формат файла совпадает с форматом большого двоичного объекта списка больших двоичных объектов в операции Put Job интерфейса REST API службы импорта и экспорта.</span><span class="sxs-lookup"><span data-stu-id="598a0-339">The file format is the same as the blob list blob format in the Put Job operation of the Import/Export service REST API.</span></span>  |
|     <span data-ttu-id="598a0-340">/DriveSize:&lt;DriveSize&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-340">/DriveSize:&lt;DriveSize&gt;</span></span> | <span data-ttu-id="598a0-341">**Обязательный**.</span><span class="sxs-lookup"><span data-stu-id="598a0-341">**Required**.</span></span> <span data-ttu-id="598a0-342">Применяется только для команды PreviewExport.</span><span class="sxs-lookup"><span data-stu-id="598a0-342">Only applicable for PreviewExport.</span></span><br/>  <span data-ttu-id="598a0-343">Размер экспортируемых дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-343">Size of drives to be used for export.</span></span> <span data-ttu-id="598a0-344">Пример: 500 ГБ, 1,5 ТБ.</span><span class="sxs-lookup"><span data-stu-id="598a0-344">For example, 500 GB, 1.5 TB.</span></span> <span data-ttu-id="598a0-345">Примечание: 1 ГБ = 1 000 000 000 байтов, 1 ТБ = 1 000 000 000 000 байтов.</span><span class="sxs-lookup"><span data-stu-id="598a0-345">Note: 1 GB = 1,000,000,000 bytes1 TB = 1,000,000,000,000 bytes</span></span>  |
|     <span data-ttu-id="598a0-346">/DataSet:&lt;dataset.csv&gt;</span><span class="sxs-lookup"><span data-stu-id="598a0-346">/DataSet:&lt;dataset.csv&gt;</span></span> | <span data-ttu-id="598a0-347">**Обязательный**</span><span class="sxs-lookup"><span data-stu-id="598a0-347">**Required**</span></span><br/> <span data-ttu-id="598a0-348">CSV-файл, содержащий список каталогов и (или) файлов, которые нужно копировать на целевые диски.</span><span class="sxs-lookup"><span data-stu-id="598a0-348">A CSV file that contains a list of directories and/or a list of files to be copied to target drives.</span></span>  |
|     <span data-ttu-id="598a0-349">/silentmode</span><span class="sxs-lookup"><span data-stu-id="598a0-349">/silentmode</span></span>  | <span data-ttu-id="598a0-350">**Необязательно**.</span><span class="sxs-lookup"><span data-stu-id="598a0-350">**Optional**.</span></span><br/> <span data-ttu-id="598a0-351">Если этот параметр не указан, отобразятся требования дисков и запрос на подтверждение.</span><span class="sxs-lookup"><span data-stu-id="598a0-351">If not specified, it will remind you the requirement of drives and need your confirmation to continue.</span></span>  |

## <a name="tool-output"></a><span data-ttu-id="598a0-352">Выходные данные инструмента</span><span class="sxs-lookup"><span data-stu-id="598a0-352">Tool output</span></span>

### <a name="sample-drive-manifest-file"></a><span data-ttu-id="598a0-353">Пример файла манифеста диска</span><span class="sxs-lookup"><span data-stu-id="598a0-353">Sample drive manifest file</span></span>

```xml
<?xml version="1.0" encoding="UTF-8"?>
<DriveManifest Version="2011-MM-DD">
   <Drive>
      <DriveId>drive-id</DriveId>
      <StorageAccountKey>storage-account-key</StorageAccountKey>
      <ClientCreator>client-creator</ClientCreator>
      <!-- First Blob List -->
      <BlobList Id="session#1-0">
         <!-- Global properties and metadata that applies to all blobs -->
         <MetadataPath Hash="md5-hash">global-metadata-file-path</MetadataPath>
         <PropertiesPath Hash="md5-hash">global-properties-file-path</PropertiesPath>
         <!-- First Blob -->
         <Blob>
            <BlobPath>blob-path-relative-to-account</BlobPath>
            <FilePath>file-path-relative-to-transfer-disk</FilePath>
            <ClientData>client-data</ClientData>
            <Length>content-length</Length>
            <ImportDisposition>import-disposition</ImportDisposition>
            <!-- page-range-list-or-block-list -->
            <!-- page-range-list -->
            <PageRangeList>
               <PageRange Offset="1073741824" Length="512" Hash="md5-hash" />
               <PageRange Offset="1073741824" Length="512" Hash="md5-hash" />
            </PageRangeList>
            <!-- block-list -->
            <BlockList>
               <Block Offset="1073741824" Length="4194304" Id="block-id" Hash="md5-hash" />
               <Block Offset="1073741824" Length="4194304" Id="block-id" Hash="md5-hash" />
            </BlockList>
            <MetadataPath Hash="md5-hash">metadata-file-path</MetadataPath>
            <PropertiesPath Hash="md5-hash">properties-file-path</PropertiesPath>
         </Blob>
      </BlobList>
   </Drive>
</DriveManifest>
```

### <a name="sample-journal-file-xml-for-each-drive"></a><span data-ttu-id="598a0-354">Пример файла журнала для каждого диска (XML-файл)</span><span class="sxs-lookup"><span data-stu-id="598a0-354">Sample journal file (XML) for each drive</span></span>

```xml
[BeginUpdateRecord][2016/11/01 21:22:25.379][Type:ActivityRecord]
ActivityId: DriveInfo
DriveState: [BeginValue]
<?xml version="1.0" encoding="UTF-8"?>
<Drive>
   <DriveId>drive-id</DriveId>
   <BitLockerKey>*******</BitLockerKey>
   <ManifestFile>\DriveManifest.xml</ManifestFile>
   <ManifestHash>D863FE44F861AE0DA4DCEAEEFFCCCE68</ManifestHash> </Drive>
[EndValue]
SaveCommandOutput: Completed
[EndUpdateRecord]
```

### <a name="sample-journal-file-jrn-for-session-that-records-the-trail-of-sessions"></a><span data-ttu-id="598a0-355">Пример файла журнала для сеанса (JRN-файл) со сведениями о состоянии сеансов</span><span class="sxs-lookup"><span data-stu-id="598a0-355">Sample journal file (JRN) for session that records the trail of sessions</span></span>

```
[BeginUpdateRecord][2016/11/02 18:24:14.735][Type:NewJournalFile]
VocabularyVersion: 2013-02-01
[EndUpdateRecord]
[BeginUpdateRecord][2016/11/02 18:24:14.749][Type:ActivityRecord]
ActivityId: PrepImportDriveCommandContext
LogDirectory: F:\logs
[EndUpdateRecord]
[BeginUpdateRecord][2016/11/02 18:24:14.754][Type:ActivityRecord]
ActivityId: PrepImportDriveCommandContext
StorageAccountKey: *******
[EndUpdateRecord]
```

## <a name="faq"></a><span data-ttu-id="598a0-356">Часто задаваемые вопросы</span><span class="sxs-lookup"><span data-stu-id="598a0-356">FAQ</span></span>

### <a name="general"></a><span data-ttu-id="598a0-357">Общие сведения</span><span class="sxs-lookup"><span data-stu-id="598a0-357">General</span></span>

#### <a name="what-is-waimportexport-tool"></a><span data-ttu-id="598a0-358">Что такое средство WAImportExport?</span><span class="sxs-lookup"><span data-stu-id="598a0-358">What is WAImportExport tool?</span></span>

<span data-ttu-id="598a0-359">WAImportExport — это инструмент подготовки и исправления дисков, который можно использовать в службе импорта и экспорта Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="598a0-359">The WAImportExport tool is the drive preparation and repair tool that you can use with the Microsoft Azure Import/Export service.</span></span> <span data-ttu-id="598a0-360">Оно позволяет копировать данные на жесткие диски перед отправкой их в центр обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="598a0-360">You can use this tool to copy data to the hard drives you are going to ship to an Azure data center.</span></span> <span data-ttu-id="598a0-361">После завершения задания импорта это средство можно использовать для восстановления поврежденных, отсутствующих или конфликтных больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="598a0-361">After an import job has completed, you can use this tool to repair any blobs that were corrupted, were missing, or conflicted with other blobs.</span></span> <span data-ttu-id="598a0-362">Это средство также позволяет восстанавливать на дисках поврежденные или отсутствующие файлы после завершения задания экспорта.</span><span class="sxs-lookup"><span data-stu-id="598a0-362">After you receive the drives from a completed export job, you can use this tool to repair any files that were corrupted or missing on the drives.</span></span>

#### <a name="how-does-the-waimportexport-tool-work-on-multiple-source-dir-and-disks"></a><span data-ttu-id="598a0-363">Как инструмент WAImportExport работает с несколькими исходными каталогами и дисками?</span><span class="sxs-lookup"><span data-stu-id="598a0-363">How does the WAImportExport tool work on multiple source dir and disks?</span></span>

<span data-ttu-id="598a0-364">Если размер данных превышает размер диска, средство WAImportExport оптимальным образом распределяет данные между несколькими дисками.</span><span class="sxs-lookup"><span data-stu-id="598a0-364">If the data size is greater than the disk size, the WAImportExport tool will distribute the data across the disks in an optimized way.</span></span> <span data-ttu-id="598a0-365">Копирование данных на несколько дисков может выполняться параллельно или последовательно.</span><span class="sxs-lookup"><span data-stu-id="598a0-365">The data copy to multiple disks can be done in parallel or sequentially.</span></span> <span data-ttu-id="598a0-366">Одновременно данные можно записывать на неограниченное количество дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-366">There is no limit on the number of disks the data can be written to simultaneously.</span></span> <span data-ttu-id="598a0-367">Средство распределяет данные на основе размера диска и папки.</span><span class="sxs-lookup"><span data-stu-id="598a0-367">The tool will distribute data based on disk size and folder size.</span></span> <span data-ttu-id="598a0-368">Выбор наиболее подходящего диска зависит от размера объекта.</span><span class="sxs-lookup"><span data-stu-id="598a0-368">It will select the disk that is most optimized for the object-size.</span></span> <span data-ttu-id="598a0-369">Данные, отправленные в учетную запись хранения, принимают указанную структуру каталогов.</span><span class="sxs-lookup"><span data-stu-id="598a0-369">The data when uploaded to the storage account will be converged back to the specified directory structure.</span></span>

#### <a name="where-can-i-find-previous-version-of-waimportexport-tool"></a><span data-ttu-id="598a0-370">Где можно найти предыдущую версию средства WAImportExport?</span><span class="sxs-lookup"><span data-stu-id="598a0-370">Where can I find previous version of WAImportExport tool?</span></span>

<span data-ttu-id="598a0-371">Средство WAImportExport поддерживает все те же функции, что и его первая версия.</span><span class="sxs-lookup"><span data-stu-id="598a0-371">WAImportExport tool has all functionalities that WAImportExport V1 tool had.</span></span> <span data-ttu-id="598a0-372">Оно позволяет пользователям указывать несколько источников и записывать данные на несколько дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-372">WAImportExport tool allows users to specify multiple sources and write to multiple drives.</span></span> <span data-ttu-id="598a0-373">Кроме того, это средство позволяет легко управлять несколькими расположениями источников данных, из которых данные копируются в один CSV-файл.</span><span class="sxs-lookup"><span data-stu-id="598a0-373">Additionally, one can easily manage multiple source locations from which the data needs to be copied in a single CSV file.</span></span> <span data-ttu-id="598a0-374">Тем не менее, если нужно добавить поддержку SAS или копировать на диск отдельный источник данных, вы можете [скачать средство WAImportExport версии 1] (http://go.microsoft.com/fwlink/?LinkID=301900&amp;clcid=0x409), а также ознакомиться со [справочными материалами по работе с ним](storage-import-export-tool-how-to-v1.md).</span><span class="sxs-lookup"><span data-stu-id="598a0-374">However, in case you need SAS support or want to copy single source to single disk, you can [download WAImportExport V1 Tool] (http://go.microsoft.com/fwlink/?LinkID=301900&amp;clcid=0x409) and refer to [WAImportExport V1 Reference](storage-import-export-tool-how-to-v1.md) for help with WAImportExport V1 usage.</span></span>

#### <a name="what-is-a-session-id"></a><span data-ttu-id="598a0-375">Что такое идентификатор сеанса?</span><span class="sxs-lookup"><span data-stu-id="598a0-375">What is a session ID?</span></span>

<span data-ttu-id="598a0-376">Если данные необходимо распределить между несколькими дисками, в средстве следует указать одинаковый идентификатор сеанса копирования (параметр /id).</span><span class="sxs-lookup"><span data-stu-id="598a0-376">The tool expects the copy session (/id) parameter to be the same if the intent is to spread the data across multiple disks.</span></span> <span data-ttu-id="598a0-377">Настроив одинаковое имя сеанса копирования, пользователь сможет копировать данные из одного или нескольких расположений источника данных на один или несколько целевых дисков (в один или несколько целевых каталогов).</span><span class="sxs-lookup"><span data-stu-id="598a0-377">Maintaining the same name of the copy session will enable user to copy data from one or multiple source locations into one or multiple destination disks/directories.</span></span> <span data-ttu-id="598a0-378">При настройке одинакового идентификатора сеанса средство сможет получить копии файлов из их последнего расположения.</span><span class="sxs-lookup"><span data-stu-id="598a0-378">Maintaining same session id enables the tool to pick up the copy of files from where it was left the last time.</span></span>

<span data-ttu-id="598a0-379">Однако в рамках одного сеанса копирования нельзя импортировать данные в разные учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-379">However, same copy session cannot be used to import data to different storage accounts.</span></span>

<span data-ttu-id="598a0-380">Если при нескольких запусках средства использовалось то же самое имя сеанса копирования, файл журнала (/logdir) и ключ учетной записи хранения (/sk) также будут совпадать.</span><span class="sxs-lookup"><span data-stu-id="598a0-380">When copy-session name is same across multiple runs of the tool, the logfile (/logdir) and storage account key (/sk) is also expected to be the same.</span></span>

<span data-ttu-id="598a0-381">Идентификатор сеанса может содержать буквы, цифры от 0 до 9, а также символ подчеркивания (\_), тире (-) или хэш (#). Его длина должна быть от 3 до 30 символов.</span><span class="sxs-lookup"><span data-stu-id="598a0-381">SessionId can consist of letters, 0~9, understore (\_), dash (-) or hash (#), and its length must be 3~30.</span></span>

<span data-ttu-id="598a0-382">Например, session-1, session#1 или session\_1.</span><span class="sxs-lookup"><span data-stu-id="598a0-382">e.g. session-1 or session#1 or session\_1</span></span>

#### <a name="what-is-a-journal-file"></a><span data-ttu-id="598a0-383">Что такое файл журнала?</span><span class="sxs-lookup"><span data-stu-id="598a0-383">What is a journal file?</span></span>

<span data-ttu-id="598a0-384">При каждом запуске средства WAImportExport для копирования файлов на жесткий диск создается сеанс копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-384">Each time you run the WAImportExport tool to copy files to the hard drive, the tool creates a copy session.</span></span> <span data-ttu-id="598a0-385">Состояние сеанса копирования записывается в файл журнала.</span><span class="sxs-lookup"><span data-stu-id="598a0-385">The state of the copy session is written to the journal file.</span></span> <span data-ttu-id="598a0-386">Если сеанс копирования прерывается (например, из-за отключения питания системы), его можно возобновить. Для этого повторно запустите средство и укажите файл журнала в командной строке.</span><span class="sxs-lookup"><span data-stu-id="598a0-386">If a copy session is interrupted (for example, due to a system power loss), it can be resumed by running the tool again and specifying the journal file on the command line.</span></span>

<span data-ttu-id="598a0-387">Для каждого подготавливаемого жесткого диска инструмент импорта и экспорта Azure создает отдельный файл журнала &lt;ИД_диска&gt;.xml, где идентификатор диска — это связанный с диском серийный номер, полученный инструментом с диска.</span><span class="sxs-lookup"><span data-stu-id="598a0-387">For each hard drive that you prepare with the Azure Import/Export Tool, the tool will create a single journal file with name "&lt;DriveID&gt;.xml" where drive Id is the serial number associated to the drive that the tool reads from the disk.</span></span> <span data-ttu-id="598a0-388">Чтобы создать задание импорта, вам потребуются файлы журналов со всех ваших дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-388">You will need the journal files from all of your drives to create the import job.</span></span> <span data-ttu-id="598a0-389">Файл журнала также можно использовать для возобновления подготовки диска, если работа средства прервана.</span><span class="sxs-lookup"><span data-stu-id="598a0-389">The journal file can also be used to resume drive preparation if the tool is interrupted.</span></span>

#### <a name="what-is-a-log-directory"></a><span data-ttu-id="598a0-390">Что такое каталог журнала?</span><span class="sxs-lookup"><span data-stu-id="598a0-390">What is a log directory?</span></span>

<span data-ttu-id="598a0-391">Каталог журнала определяет каталог, используемый для хранения файлов подробного журнала и некоторых временных файлов манифеста.</span><span class="sxs-lookup"><span data-stu-id="598a0-391">The log directory specifies a directory to be used to store verbose logs as well as temporary manifest files.</span></span> <span data-ttu-id="598a0-392">Если каталог не указан, вместо него будет использоваться текущий каталог.</span><span class="sxs-lookup"><span data-stu-id="598a0-392">If not specified, the current directory will be used as the log directory.</span></span> <span data-ttu-id="598a0-393">В этот каталог записываются подробные журналы.</span><span class="sxs-lookup"><span data-stu-id="598a0-393">The logs are verbose logs.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="598a0-394">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="598a0-394">Prerequisites</span></span>

#### <a name="what-are-the-specifications-of-my-disk"></a><span data-ttu-id="598a0-395">Какие спецификации моего диска?</span><span class="sxs-lookup"><span data-stu-id="598a0-395">What are the specifications of my disk?</span></span>

<span data-ttu-id="598a0-396">Один или несколько пустых 2,5- или 3,5-дюймовых дисков SATA II или SATA III либо твердотельные накопители, подключенные к целевому компьютеру.</span><span class="sxs-lookup"><span data-stu-id="598a0-396">One or more empty 2.5-inch or 3.5-inch SATAII or III or SSD hard drives connected to the copy machine.</span></span>

#### <a name="how-can-i-enable-bitlocker-on-my-machine"></a><span data-ttu-id="598a0-397">Как включить BitLocker на моем компьютере?</span><span class="sxs-lookup"><span data-stu-id="598a0-397">How can I enable BitLocker on my machine?</span></span>

<span data-ttu-id="598a0-398">Щелкните системный диск правой кнопкой мыши.</span><span class="sxs-lookup"><span data-stu-id="598a0-398">Simple way to check is by right-clicking on System drive.</span></span> <span data-ttu-id="598a0-399">Если технология BitLocker включена, вы увидите соответствующие параметры,</span><span class="sxs-lookup"><span data-stu-id="598a0-399">It will show you options for Bitlocker if the capability is turned on.</span></span> <span data-ttu-id="598a0-400">а если нет, эти параметры отображаться не будут.</span><span class="sxs-lookup"><span data-stu-id="598a0-400">If it is off, you won't see it.</span></span>

![Проверка BitLocker](./media/storage-import-export-tool-preparing-hard-drives-import/BitLocker.png)

<span data-ttu-id="598a0-402">Дополнительные сведения о включении BitLocker см. в [этой статье](https://technet.microsoft.com/library/cc766295.aspx).</span><span class="sxs-lookup"><span data-stu-id="598a0-402">Here is an article on [how to enable BitLocker](https://technet.microsoft.com/library/cc766295.aspx)</span></span>

<span data-ttu-id="598a0-403">На вашем компьютере может отсутствовать микросхема доверенного платформенного модуля (TPM).</span><span class="sxs-lookup"><span data-stu-id="598a0-403">It is possible that your machine does not have TPM chip.</span></span> <span data-ttu-id="598a0-404">Если после выполнения команды tpm.msc не возвращаются выходные данные, см. следующий часто задаваемый вопрос.</span><span class="sxs-lookup"><span data-stu-id="598a0-404">If you do not get an output using tpm.msc, look at the next FAQ.</span></span>

#### <a name="how-to-disable-trusted-platform-module-tpm-in-bitlocker"></a><span data-ttu-id="598a0-405">Как отключить доверенный платформенный модуль (TPM) в BitLocker?</span><span class="sxs-lookup"><span data-stu-id="598a0-405">How to disable Trusted Platform Module (TPM) in BitLocker?</span></span>
> [!NOTE]
> <span data-ttu-id="598a0-406">Только в том случае, если в серверах отсутствует доверенный платформенный модуль (TPM), необходимо отключить политику доверенного платформенного модуля.</span><span class="sxs-lookup"><span data-stu-id="598a0-406">Only if there is no TPM in their servers, you need to disable TPM policy.</span></span> <span data-ttu-id="598a0-407">Если в сервере пользователя есть доверенный платформенный модуль, то делать это не обязательно.</span><span class="sxs-lookup"><span data-stu-id="598a0-407">It is not necessary to disable TPM if there is a trusted TPM in user's server.</span></span> 
> 

<span data-ttu-id="598a0-408">Чтобы отключить модуль TPM в BitLocker, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="598a0-408">In order to disable TPM in BitLocker, go through the following steps:</span></span><br/>
1. <span data-ttu-id="598a0-409">Запустите **редактор групповых политик**. Для этого в окне командной строки введите команду gpedit.msc.</span><span class="sxs-lookup"><span data-stu-id="598a0-409">Launch **Group Policy Editor** by typing gpedit.msc on a command prompt.</span></span> <span data-ttu-id="598a0-410">Если **редактор групповых политик** недоступен, сначала включите BitLocker.</span><span class="sxs-lookup"><span data-stu-id="598a0-410">If **Group Policy Editor** appears to be unavailable, for enabling BitLocker first.</span></span> <span data-ttu-id="598a0-411">См. предыдущий часто задаваемый вопрос.</span><span class="sxs-lookup"><span data-stu-id="598a0-411">See previous FAQ.</span></span>
2. <span data-ttu-id="598a0-412">Выберите **Политика локального компьютера &gt; Конфигурация компьютера &gt; Административные шаблоны &gt; Компоненты Windows &gt; Шифрование диска BitLocker &gt; Диски операционной системы**.</span><span class="sxs-lookup"><span data-stu-id="598a0-412">Open **Local Computer Policy &gt; Computer Configuration &gt; Administrative Templates &gt; Windows Components&gt; BitLocker Drive Encryption &gt; Operating System Drives**.</span></span>
3. <span data-ttu-id="598a0-413">Измените политику **Обязательная дополнительная проверка подлинности при запуске**.</span><span class="sxs-lookup"><span data-stu-id="598a0-413">Edit **Require additional authentication at startup** policy.</span></span>
4. <span data-ttu-id="598a0-414">**Включите** эту политику и установите флажок **Разрешить использование BitLocker без совместимого TPM**.</span><span class="sxs-lookup"><span data-stu-id="598a0-414">Set the policy to **Enabled** and make sure **Allow BitLocker without a compatible TPM** is checked.</span></span>

####  <a name="how-to-check-if-net-4-or-higher-version-is-installed-on-my-machine"></a><span data-ttu-id="598a0-415">Как проверить, установлена ли на компьютере платформа .NET 4?</span><span class="sxs-lookup"><span data-stu-id="598a0-415">How to check if .NET 4 or higher version is installed on my machine?</span></span>

<span data-ttu-id="598a0-416">Все версии Microsoft .NET Framework устанавливаются в следующем каталоге: %windir%\Microsoft.NET\Framework\.</span><span class="sxs-lookup"><span data-stu-id="598a0-416">All Microsoft .NET Framework versions are installed in following directory: %windir%\Microsoft.NET\Framework\\</span></span>

<span data-ttu-id="598a0-417">Перейдите к упомянутому выше каталогу на своем целевом компьютере, где нужно запустить средство.</span><span class="sxs-lookup"><span data-stu-id="598a0-417">Navigate to the above mentioned part on your target machine where the tool needs to run.</span></span> <span data-ttu-id="598a0-418">Найдите папку, имя которой начинается с v4.</span><span class="sxs-lookup"><span data-stu-id="598a0-418">Look for folder name starting with "v4".</span></span> <span data-ttu-id="598a0-419">Если эта папка отсутствует, это означает, что на компьютере не установлена платформа .NET 4.</span><span class="sxs-lookup"><span data-stu-id="598a0-419">Absence of such a directory means .NET 4 is not installed on your machine.</span></span> <span data-ttu-id="598a0-420">Ее можно скачать с сайта [Microsoft .NET Framework 4 (веб-установщик)](https://www.microsoft.com/download/details.aspx?id=17851).</span><span class="sxs-lookup"><span data-stu-id="598a0-420">You can download .Net 4 on your machine using [Microsoft .NET Framework 4 (Web Installer)](https://www.microsoft.com/download/details.aspx?id=17851).</span></span>

### <a name="limits"></a><span data-ttu-id="598a0-421">Ограничения</span><span class="sxs-lookup"><span data-stu-id="598a0-421">Limits</span></span>

#### <a name="how-many-drives-can-i-preparesend-at-the-same-time"></a><span data-ttu-id="598a0-422">Сколько дисков можно одновременно подготовить или отправить?</span><span class="sxs-lookup"><span data-stu-id="598a0-422">How many drives can I prepare/send at the same time?</span></span>

<span data-ttu-id="598a0-423">Ограничений на количество дисков, которое можно подготовить с помощью средства, нет.</span><span class="sxs-lookup"><span data-stu-id="598a0-423">There is no limit on the number of disks that the tool can prepare.</span></span> <span data-ttu-id="598a0-424">Тем не менее перед подготовкой вам потребуется ввести буквы дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-424">However, the tool expects drive letters as inputs.</span></span> <span data-ttu-id="598a0-425">Это значит, что с помощью средства одновременно можно подготовить не более 25 дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-425">That limits it to 25 simultaneous disk preparation.</span></span> <span data-ttu-id="598a0-426">В рамках одного задания одновременно можно обрабатывать не более 10 дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-426">A single job can handle maximum of 10 disks at a time.</span></span> <span data-ttu-id="598a0-427">При подготовке более 10 дисков для одной и той же учетной записи хранения они могут распределяться между несколькими заданиями.</span><span class="sxs-lookup"><span data-stu-id="598a0-427">If you prepare more than 10 disks targeting the same storage account, the disks can be distributed across multiple jobs.</span></span>

#### <a name="can-i-target-more-than-one-storage-account"></a><span data-ttu-id="598a0-428">Можно ли назначить более одной учетной записи хранения?</span><span class="sxs-lookup"><span data-stu-id="598a0-428">Can I target more than one storage account?</span></span>

<span data-ttu-id="598a0-429">В рамках одного задания и одного сеанса копирования можно отправить только одну учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="598a0-429">Only one storage account can be submitted per job and in single copy session.</span></span>

### <a name="capabilities"></a><span data-ttu-id="598a0-430">Возможности</span><span class="sxs-lookup"><span data-stu-id="598a0-430">Capabilities</span></span>

#### <a name="does-waimportexportexe-encrypt-my-data"></a><span data-ttu-id="598a0-431">Шифрует ли средство WAImportExport.exe данные?</span><span class="sxs-lookup"><span data-stu-id="598a0-431">Does WAImportExport.exe encrypt my data?</span></span>

<span data-ttu-id="598a0-432">Да.</span><span class="sxs-lookup"><span data-stu-id="598a0-432">Yes.</span></span> <span data-ttu-id="598a0-433">Для этого процесса требуется шифрование, поэтому это средство выполняет шифрование на основе технологии BitLocker.</span><span class="sxs-lookup"><span data-stu-id="598a0-433">BitLocker encryption is enabled and required for this process.</span></span>

#### <a name="what-will-be-the-hierarchy-of-my-data-when-it-appears-in-the-storage-account"></a><span data-ttu-id="598a0-434">Какова иерархия данных после добавления их в учетную запись хранения?</span><span class="sxs-lookup"><span data-stu-id="598a0-434">What will be the hierarchy of my data when it appears in the storage account?</span></span>

<span data-ttu-id="598a0-435">Несмотря на то что данные распределены между несколькими дисками, после отправки в учетную запись хранения они принимают структуру каталогов, указанную в CSV-файле набора данных.</span><span class="sxs-lookup"><span data-stu-id="598a0-435">Although data is distributed across disks, the data when uploaded to the storage account will be converged back to the directory structure specified in the dataset CSV file.</span></span>

#### <a name="how-many-of-the-input-disks-will-have-active-io-in-parallel-when-copy-is-in-progress"></a><span data-ttu-id="598a0-436">На скольких дисках будут одновременно выполняться операции ввода-вывода в ходе выполнения копирования?</span><span class="sxs-lookup"><span data-stu-id="598a0-436">How many of the input disks will have active IO in parallel, when copy is in progress?</span></span>

<span data-ttu-id="598a0-437">Средство распределяет данные между дисками на основе размера входных файлов.</span><span class="sxs-lookup"><span data-stu-id="598a0-437">The tool distributes data across the input disks based on the size of the input files.</span></span> <span data-ttu-id="598a0-438">При этом количество одновременно активных дисков полностью зависит от входных данных.</span><span class="sxs-lookup"><span data-stu-id="598a0-438">That said, the number of active disks in parallel completely delends on the nature of the input data.</span></span> <span data-ttu-id="598a0-439">В зависимости от размера отдельных файлов во входном наборе данных в активном состоянии могут одновременно находиться один или несколько дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-439">Depending on the size of individual files in the input dataset, one or more disks may show active IO in parallel.</span></span> <span data-ttu-id="598a0-440">Чтобы получить дополнительные сведения, ознакомьтесь со следующим вопросом.</span><span class="sxs-lookup"><span data-stu-id="598a0-440">See next question for more details.</span></span>

#### <a name="how-does-the-tool-distribute-the-files-across-the-disks"></a><span data-ttu-id="598a0-441">Как средство распределяет файлы между дисками?</span><span class="sxs-lookup"><span data-stu-id="598a0-441">How does the tool distribute the files across the disks?</span></span>

<span data-ttu-id="598a0-442">Средство WAImportExport выполняет операции чтения и записи файлов пакет за пакетом. Каждый пакет содержит не более 100 000 файлов.</span><span class="sxs-lookup"><span data-stu-id="598a0-442">WAImportExport Tool reads and writes files batch by batch, one batch contains max of 100000 files.</span></span> <span data-ttu-id="598a0-443">Это означает, что одновременно средство может записать не более 100 000 файлов.</span><span class="sxs-lookup"><span data-stu-id="598a0-443">This means that max 100000 files can be written parallel.</span></span> <span data-ttu-id="598a0-444">Если эти файлы распределены между несколькими дисками, то они записываются одновременно.</span><span class="sxs-lookup"><span data-stu-id="598a0-444">Multiple disks are written to simultaneously if these 100000 files are distributed to multi drives.</span></span> <span data-ttu-id="598a0-445">Однако записывает ли инструмент файлы одновременно на несколько дисков или на один, зависит от совокупного размера пакета.</span><span class="sxs-lookup"><span data-stu-id="598a0-445">However whether the tool writes to multiple disks simultaneously or a single disk depends on the cumulative size of the batch.</span></span> <span data-ttu-id="598a0-446">Например, если файлы небольшие и все 100 000 файлов помещаются на один диск, при обработке этого пакета средство записывает их только на один диск.</span><span class="sxs-lookup"><span data-stu-id="598a0-446">For instance, in case of smaller files, if all of 10,0000 files are able to fit in a single drive, tool will write to only one disk during the processing of this batch.</span></span>

### <a name="waimportexport-output"></a><span data-ttu-id="598a0-447">Выходные данные WAImportExport</span><span class="sxs-lookup"><span data-stu-id="598a0-447">WAImportExport output</span></span>

#### <a name="there-are-two-journal-files-which-one-should-i-upload-to-azure-portal"></a><span data-ttu-id="598a0-448">Какой из двух файлов журнала следует передать на портал Azure?</span><span class="sxs-lookup"><span data-stu-id="598a0-448">There are two journal files, which one should I upload to Azure portal?</span></span>

<span data-ttu-id="598a0-449">**XML-файл.** Для каждого подготавливаемого жесткого диска инструмент WAImportExport создает отдельный файл журнала `<DriveID>.xml`, где DriveID — это связанный с диском серийный номер, полученный инструментом с диска.</span><span class="sxs-lookup"><span data-stu-id="598a0-449">**.xml** - For each hard drive that you prepare with the WAImportExport tool, the tool will create a single journal file with name `<DriveID>.xml` where DriveID is the serial number associated to the drive that the tool reads from the disk.</span></span> <span data-ttu-id="598a0-450">Чтобы создать задание импорта на портале Azure, вам потребуются файлы журналов со всех ваших дисков.</span><span class="sxs-lookup"><span data-stu-id="598a0-450">You will need the journal files from all of your drives to create the import job in the Azure portal.</span></span> <span data-ttu-id="598a0-451">Этот файл журнала также можно использовать для возобновления подготовки диска, если работа средства прервана.</span><span class="sxs-lookup"><span data-stu-id="598a0-451">This journal file can also be used to resume drive preparation if the tool is interrupted.</span></span>

<span data-ttu-id="598a0-452">**JRN-файл.** Файл журнала с суффиксом `.jrn` содержит данные о состояниях всех сеансов копирования на жесткий диск.</span><span class="sxs-lookup"><span data-stu-id="598a0-452">**.jrn** - The journal file with suffix `.jrn` contains the status for all copy sessions for a hard drive.</span></span> <span data-ttu-id="598a0-453">Он также содержит сведения, необходимые для создания задания импорта.</span><span class="sxs-lookup"><span data-stu-id="598a0-453">It also contains the information needed to create the import job.</span></span> <span data-ttu-id="598a0-454">При запуске средства WAImportExport необходимо всегда указывать файл журнала и идентификатор сеанса копирования.</span><span class="sxs-lookup"><span data-stu-id="598a0-454">You must always specify a journal file when running the WAImportExport tool, as well as a copy session ID.</span></span>

## <a name="next-steps"></a><span data-ttu-id="598a0-455">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="598a0-455">Next steps</span></span>

* [<span data-ttu-id="598a0-456">Настройка средства импорта и экспорта Azure</span><span class="sxs-lookup"><span data-stu-id="598a0-456">Setting Up the Azure Import/Export Tool</span></span>](storage-import-export-tool-setup.md)
* [<span data-ttu-id="598a0-457">Настройка свойств и метаданных во время импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-457">Setting properties and metadata during the import process</span></span>](storage-import-export-tool-setting-properties-metadata-import.md)
* [<span data-ttu-id="598a0-458">Пример рабочего процесса по подготовке жестких дисков для задания импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-458">Sample workflow to prepare hard drives for an import job</span></span>](storage-import-export-tool-sample-preparing-hard-drives-import-job-workflow.md)
* [<span data-ttu-id="598a0-459">Краткий справочник по часто используемым командам</span><span class="sxs-lookup"><span data-stu-id="598a0-459">Quick reference for frequently used commands</span></span>](storage-import-export-tool-quick-reference.md) 
* [<span data-ttu-id="598a0-460">Просмотр состояния задания с помощью файлов журнала копирования</span><span class="sxs-lookup"><span data-stu-id="598a0-460">Reviewing job status with copy log files</span></span>](storage-import-export-tool-reviewing-job-status-v1.md)
* [<span data-ttu-id="598a0-461">Подготовка задания импорта</span><span class="sxs-lookup"><span data-stu-id="598a0-461">Repairing an import job</span></span>](storage-import-export-tool-repairing-an-import-job-v1.md)
* [<span data-ttu-id="598a0-462">Подготовка задания экспорта</span><span class="sxs-lookup"><span data-stu-id="598a0-462">Repairing an export job</span></span>](storage-import-export-tool-repairing-an-export-job-v1.md)
* [<span data-ttu-id="598a0-463">Устранение неполадок со средством импорта и экспорта Azure</span><span class="sxs-lookup"><span data-stu-id="598a0-463">Troubleshooting the Azure Import/Export Tool</span></span>](storage-import-export-tool-troubleshooting-v1.md)
