---
title: "aaaTroubleshooting хранилища Azure с помощью диагностики и анализатор сообщений | Документы Microsoft"
description: "Учебник, демонстрирующий комплексное устранение неполадок с помощью аналитики хранилища Azure, AzCopy и анализатора сообщений Майкрософт"
services: storage
documentationcenter: dotnet
author: robinsh
manager: timlt
ms.assetid: 6b23cba5-0d53-439e-870b-de8e406107d8
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 01/23/2017
ms.author: robinsh
ms.openlocfilehash: 74ee126bab30b9a45f4904a065b6fe3006f76101
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="end-to-end-troubleshooting-using-azure-storage-metrics-and-logging-azcopy-and-message-analyzer"></a><span data-ttu-id="6d9f1-103">Комплексный поиск и устранение неполадок с помощью метрик хранилища Azure и ведения журнала, AzCopy и анализатора сообщений</span><span class="sxs-lookup"><span data-stu-id="6d9f1-103">End-to-End Troubleshooting using Azure Storage metrics and logging, AzCopy, and Message Analyzer</span></span>
[!INCLUDE [storage-selector-portal-e2e-troubleshooting](../../includes/storage-selector-portal-e2e-troubleshooting.md)]

## <a name="overview"></a><span data-ttu-id="6d9f1-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="6d9f1-104">Overview</span></span>
<span data-ttu-id="6d9f1-105">Диагностика и устранение неполадок является ключевым навыком, необходимым для создания и поддержки клиентских приложений с хранилищем Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-105">Diagnosing and troubleshooting is a key skill for building and supporting client applications with Microsoft Azure Storage.</span></span> <span data-ttu-id="6d9f1-106">Из-за особенностей toohello распределенного приложения Azure Диагностика и устранение ошибок и проблем с производительностью может быть сложнее, чем в традиционных сред.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-106">Due toohello distributed nature of an Azure application, diagnosing and troubleshooting errors and performance issues may be more complex than in traditional environments.</span></span>

<span data-ttu-id="6d9f1-107">В этом учебнике мы покажем, как клиент tooidentify определенные ошибки, которые могут повлиять на производительность и устраните эти ошибки от начала до конца с помощью средств, предоставляемых корпорацией Майкрософт и хранилища Azure, в порядке toooptimize hello клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-107">In this tutorial, we will demonstrate how tooidentify client certain errors that may affect performance, and troubleshoot those errors from end-to-end using tools provided by Microsoft and Azure Storage, in order toooptimize hello client application.</span></span>

<span data-ttu-id="6d9f1-108">В этом учебнике содержатся практические исследования сквозного сценария устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-108">This tutorial provides a hands-on exploration of an end-to-end troubleshooting scenario.</span></span> <span data-ttu-id="6d9f1-109">Подробное руководство концептуальной tootroubleshooting хранилища Azure, см [монитора, диагностики и устранения неполадок хранилища Microsoft Azure](storage-monitoring-diagnosing-troubleshooting.md).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-109">For an in-depth conceptual guide tootroubleshooting Azure storage applications, see [Monitor, diagnose, and troubleshoot Microsoft Azure Storage](storage-monitoring-diagnosing-troubleshooting.md).</span></span>

## <a name="tools-for-troubleshooting-azure-storage-applications"></a><span data-ttu-id="6d9f1-110">Средства для устранения неполадок приложений хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="6d9f1-110">Tools for troubleshooting Azure Storage applications</span></span>
<span data-ttu-id="6d9f1-111">tootroubleshoot клиентских приложений, использующих хранилище Microsoft Azure, можно использовать сочетание toodetermine средств, когда возникла проблема и может быть причиной проблемы hello какие hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-111">tootroubleshoot client applications using Microsoft Azure Storage, you can use a combination of tools toodetermine when an issue has occurred and what hello cause of hello problem may be.</span></span> <span data-ttu-id="6d9f1-112">Вот эти средства.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-112">These tools include:</span></span>

* <span data-ttu-id="6d9f1-113">**Аналитика службы хранилища Azure**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-113">**Azure Storage Analytics**.</span></span> <span data-ttu-id="6d9f1-114">[Аналитика службы хранилища Azure](http://msdn.microsoft.com/library/azure/hh343270.aspx) обеспечивает метрики и ведение журнала для службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-114">[Azure Storage Analytics](http://msdn.microsoft.com/library/azure/hh343270.aspx) provides metrics and logging for Azure Storage.</span></span>

  * <span data-ttu-id="6d9f1-115">**Метрики службы хранилища** отслеживают метрики транзакций и метрики емкости для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-115">**Storage metrics** tracks transaction metrics and capacity metrics for your storage account.</span></span> <span data-ttu-id="6d9f1-116">С помощью метрик, можно определить, как приложение выполняет соответствующим tooa множество различных мер.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-116">Using metrics, you can determine how your application is performing according tooa variety of different measures.</span></span> <span data-ttu-id="6d9f1-117">В разделе [схема таблицы метрик аналитики хранилища](http://msdn.microsoft.com/library/azure/hh343264.aspx) Дополнительные сведения о типах hello метрик под контролем аналитики хранилища.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-117">See [Storage Analytics Metrics Table Schema](http://msdn.microsoft.com/library/azure/hh343264.aspx) for more information about hello types of metrics tracked by Storage Analytics.</span></span>
  * <span data-ttu-id="6d9f1-118">**Ведение журнала хранилища** регистрирует каждый журнал toohello хранилища Azure службы tooa серверных запросов.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-118">**Storage logging** logs each request toohello Azure Storage services tooa server-side log.</span></span> <span data-ttu-id="6d9f1-119">выполнить Hello журнала отслеживает подробные данные для каждого запроса, включая операции hello hello состояние операции hello и сведения о задержке.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-119">hello log tracks detailed data for each request, including hello operation performed, hello status of hello operation, and latency information.</span></span> <span data-ttu-id="6d9f1-120">В разделе [формат журнала аналитики хранилища](http://msdn.microsoft.com/library/azure/hh343259.aspx) Дополнительные сведения о hello данные запросов и ответов, которые записываются журналы toohello аналитикой хранилища.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-120">See [Storage Analytics Log Format](http://msdn.microsoft.com/library/azure/hh343259.aspx) for more information about hello request and response data that is written toohello logs by Storage Analytics.</span></span>

> [!NOTE]
> <span data-ttu-id="6d9f1-121">Учетные записи хранилища с типом репликации из зоны избыточности хранилища (ZRS) имеют hello показателей или возможность ведения журнала, которые включены в данный момент.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-121">Storage accounts with a replication type of Zone-Redundant Storage (ZRS) do not have hello metrics or logging capability enabled at this time.</span></span>
>
>

* <span data-ttu-id="6d9f1-122">**Классический портал Azure**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-122">**Azure Classic Portal**.</span></span> <span data-ttu-id="6d9f1-123">Можно настроить метрик и ведения журнала для вашей учетной записи в hello [классический портал Azure](https://manage.windowsazure.com).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-123">You can configure metrics and logging for your storage account in hello [Azure Classic Portal](https://manage.windowsazure.com).</span></span> <span data-ttu-id="6d9f1-124">Можно также просматривать диаграммы и графики, показывающие, как приложение работает со временем и настроить toonotify предупреждения, если приложение выполняет иначе, чем ожидаемым для указанной метрики.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-124">You can also view charts and graphs that show how your application is performing over time, and configure alerts toonotify you if your application performs differently than expected for a specified metric.</span></span>

    <span data-ttu-id="6d9f1-125">В разделе [отслеживание учетной записи хранения в портале Azure hello](storage-monitor-storage-account.md) сведения о настройке мониторинга в hello классический портал Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-125">See [Monitor a storage account in hello Azure Portal](storage-monitor-storage-account.md) for information about configuring monitoring in hello Azure Classic Portal.</span></span>
* <span data-ttu-id="6d9f1-126">**AzCopy**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-126">**AzCopy**.</span></span> <span data-ttu-id="6d9f1-127">Журналы сервера для хранилища Azure хранятся в виде больших двоичных объектов, поэтому AzCopy toocopy hello большие двоичные объекты tooa локальный каталог журнала можно использовать для анализа с помощью Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-127">Server logs for Azure Storage are stored as blobs, so you can use AzCopy toocopy hello log blobs tooa local directory for analysis using Microsoft Message Analyzer.</span></span> <span data-ttu-id="6d9f1-128">В разделе [перенесите данные с помощью служебной программы командной строки AzCopy hello](storage-use-azcopy.md) Дополнительные сведения о AzCopy.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-128">See [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md) for more information about AzCopy.</span></span>
* <span data-ttu-id="6d9f1-129">**Анализатор сообщений (Майкрософт)**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-129">**Microsoft Message Analyzer**.</span></span> <span data-ttu-id="6d9f1-130">Анализатор сообщений — это средство, который использует файлы журналов и отображает данные журнала в визуальном формате, который позволяет легко toofilter, поиск и группы, которые записываются в журнал в полезные наборы можно использовать tooanalyze ошибок и проблем с производительностью.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-130">Message Analyzer is a tool that consumes log files and displays log data in a visual format that makes it easy toofilter, search, and group log data into useful sets that you can use tooanalyze errors and performance issues.</span></span> <span data-ttu-id="6d9f1-131">См. [Руководство по работе с анализатором сообщений (Майкрософт)](http://technet.microsoft.com/library/jj649776.aspx) для получения дополнительных сведений об анализаторе сообщений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-131">See [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx) for more information about Message Analyzer.</span></span>

## <a name="about-hello-sample-scenario"></a><span data-ttu-id="6d9f1-132">О hello образец сценария</span><span class="sxs-lookup"><span data-stu-id="6d9f1-132">About hello sample scenario</span></span>
<span data-ttu-id="6d9f1-133">В этом учебнике мы рассмотрим сценарий, где метрики службы хранилища Azure указывают на низкий процент успешных операций для приложения, выполняющего обращения к службе хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-133">For this tutorial, we'll examine a scenario where Azure Storage metrics indicates a low percent success rate for an application that calls Azure storage.</span></span> <span data-ttu-id="6d9f1-134">Здравствуйте, метрику скорости низкий процент успешных операций (показано как **PercentSuccess** в hello классический портал Azure и в таблицах метрик hello) отслеживает операции, выполнено успешно, но которые возвращают код состояния HTTP, который больше 299.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-134">hello low percent success rate metric (shown as **PercentSuccess** in hello Azure Classic Portal and in hello metrics tables) tracks operations that succeed, but that return an HTTP status code that is greater than 299.</span></span> <span data-ttu-id="6d9f1-135">В файлах журнала хранилища на стороне сервера hello, эти операции записываются с состоянием транзакции **ClientOtherErrors**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-135">In hello server-side storage log files, these operations are recorded with a transaction status of **ClientOtherErrors**.</span></span> <span data-ttu-id="6d9f1-136">Дополнительные сведения о метрика низкий процент успешных операций hello. в разделе [метрики низкий PercentSuccess или аналитика записи журнала операций с состоянием транзакции ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-136">For more details about hello low percent success metric, see [Metrics show low PercentSuccess or analytics log entries have operations with transaction status of ClientOtherErrors](storage-monitoring-diagnosing-troubleshooting.md#metrics-show-low-percent-success).</span></span>

<span data-ttu-id="6d9f1-137">Операции службы хранилища Azure могут возвращать коды состояния HTTP, большие 299 в ходе обычной работы.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-137">Azure Storage operations may return HTTP status codes greater than 299 as part of their normal functionality.</span></span> <span data-ttu-id="6d9f1-138">Но в некоторых случаях эти ошибки указывает, что может быть toooptimize доступ клиентского приложения для более высокую производительность.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-138">But these errors in some cases indicate that you may be able toooptimize your client application for improved performance.</span></span>

<span data-ttu-id="6d9f1-139">В этом сценарии мы обсудим toobe скорость низкий процент успешных операций ничего менее 100%.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-139">In this scenario, we'll consider a low percent success rate toobe anything below 100%.</span></span> <span data-ttu-id="6d9f1-140">Можно выбрать другой метрики уровень, тем не менее, в соответствии с потребностями tooyour.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-140">You can choose a different metric level, however, according tooyour needs.</span></span> <span data-ttu-id="6d9f1-141">Рекомендуется во время тестирования приложения установить допуск базовых показателей для ключевых метрик производительности.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-141">We recommend that during testing of your application, you establish a baseline tolerance for your key performance metrics.</span></span> <span data-ttu-id="6d9f1-142">Например, на основе тестирования может быть определено, что приложение должно иметь согласованный процент успешных операций, равный 90 % или 85 %.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-142">For example, you might determine, based on testing, that your application should have a consistent percent success rate of 90%, or 85%.</span></span> <span data-ttu-id="6d9f1-143">Если данные метрик показывает, что приложение hello уклониться от этого числа, можно выяснить, что могут быть причиной увеличения hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-143">If your metrics data shows that hello application is deviating from that number, then you can investigate what may be causing hello increase.</span></span>

<span data-ttu-id="6d9f1-144">Для нашего примера сценария после мы определили, что метрику скорости hello процент успешных операций меньше 100%, мы проверки на наличие ошибок hello hello журналы toofind, вычисляющие корреляцию toohello метрики и использовать их toofigure, что приводит к низкой скоростью процент успешных операций hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-144">For our sample scenario, once we've established that hello percent success rate metric is below 100%, we will examine hello logs toofind hello errors that correlate toohello metrics, and use them toofigure out what is causing hello lower percent success rate.</span></span> <span data-ttu-id="6d9f1-145">Мы рассмотрим специально ошибки в диапазоне 400 hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-145">We'll look specifically at errors in hello 400 range.</span></span> <span data-ttu-id="6d9f1-146">Затем мы подробнее исследуем ошибку 404 (Не найден).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-146">Then we'll more closely investigate 404 (Not Found) errors.</span></span>

### <a name="some-causes-of-400-range-errors"></a><span data-ttu-id="6d9f1-147">Некоторые причины ошибок диапазона 400</span><span class="sxs-lookup"><span data-stu-id="6d9f1-147">Some causes of 400-range errors</span></span>
<span data-ttu-id="6d9f1-148">Hello приведенных ниже примерах показано примерное некоторые ошибки 400 диапазона для запросов в службу хранилища больших двоичных объектов Azure, а также их возможные причины ее возникновения.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-148">hello examples below shows a sampling of some 400-range errors for requests against Azure Blob Storage, and their possible causes.</span></span> <span data-ttu-id="6d9f1-149">Любой из этих ошибок, а также ошибки в диапазоне 300 hello и hello 500 диапазон, могут участвовать tooa низкий процент успешных операций.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-149">Any of these errors, as well as errors in hello 300 range and hello 500 range, can contribute tooa low percent success rate.</span></span>

<span data-ttu-id="6d9f1-150">Обратите внимание, что ниже списки hello далеко не завершена.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-150">Note that hello lists below are far from complete.</span></span> <span data-ttu-id="6d9f1-151">В разделе [коды состояний и ошибок](http://msdn.microsoft.com/library/azure/dd179382.aspx) подробные сведения об общих ошибках хранилища Azure, а также о конкретных tooeach ошибки служб хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-151">See [Status and Error Codes](http://msdn.microsoft.com/library/azure/dd179382.aspx) for details about general Azure Storage errors and about errors specific tooeach of hello storage services.</span></span>

<span data-ttu-id="6d9f1-152">**Примеры кода состояния 404 (не найдено)**</span><span class="sxs-lookup"><span data-stu-id="6d9f1-152">**Status Code 404 (Not Found) Examples**</span></span>

<span data-ttu-id="6d9f1-153">Происходит при сбое операции чтения для контейнера или большого двоичного объекта, так как не найдено hello большого двоичного объекта или контейнера.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-153">Occurs when a read operation against a container or blob fails because hello blob or container is not found.</span></span>

* <span data-ttu-id="6d9f1-154">Возникает, если контейнер или BLOB-объект был удален другим клиентом до этого запроса.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-154">Occurs if a container or blob has been deleted by another client before this request.</span></span>
* <span data-ttu-id="6d9f1-155">Происходит при использовании вызова API, который создает hello контейнера или большого двоичного объекта после проверки того, существует ли.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-155">Occurs if you are using an API call that creates hello container or blob after checking whether it exists.</span></span> <span data-ttu-id="6d9f1-156">Hello API-интерфейсы CreateIfNotExists сделать HEAD вызовите первый toocheck наличие hello hello контейнера или большого двоичного объекта; Если не существует, возвращается сообщение об ошибке 404 и затем второй PUT вызове toowrite hello контейнера или большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-156">hello CreateIfNotExists APIs make a HEAD call first toocheck for hello existence of hello container or blob; if it does not exist, a 404 error is returned, and then a second PUT call is made toowrite hello container or blob.</span></span>

<span data-ttu-id="6d9f1-157">**Примеры кода состояния 409 (конфликт)**</span><span class="sxs-lookup"><span data-stu-id="6d9f1-157">**Status Code 409 (Conflict) Examples**</span></span>

* <span data-ttu-id="6d9f1-158">Возникает, если вы используете toocreate API для создания нового контейнера или большого двоичного объекта, не проверяя наличие и контейнера или BLOB-объект с таким именем уже существует.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-158">Occurs if you use a Create API toocreate a new container or blob, without checking for existence first, and a container or blob with that name already exists.</span></span>
* <span data-ttu-id="6d9f1-159">Возникает, если контейнер удаляется, и попытке toocreate новый контейнер с hello одинаковые имена, до завершения операции удаления hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-159">Occurs if a container is being deleted, and you attempt toocreate a new container with hello same name before hello deletion operation is complete.</span></span>
* <span data-ttu-id="6d9f1-160">Возникает, если указать аренду контейнера или BLOB-объекта при ее наличии.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-160">Occurs if you specify a lease on a container or blob, and there is already a lease present.</span></span>

<span data-ttu-id="6d9f1-161">**Примеры кода состояния 412 (необходимое условие не выполнено)**</span><span class="sxs-lookup"><span data-stu-id="6d9f1-161">**Status Code 412 (Precondition Failed) Examples**</span></span>

* <span data-ttu-id="6d9f1-162">Происходит, когда не было выполнено hello условию, указанному предикатом условный заголовок.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-162">Occurs when hello condition specified by a conditional header has not been met.</span></span>
* <span data-ttu-id="6d9f1-163">Происходит, когда указанный идентификатор аренды hello не соответствует Идентификатору аренды hello hello контейнера или большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-163">Occurs when hello lease ID specified does not match hello lease ID on hello container or blob.</span></span>

## <a name="generate-log-files-for-analysis"></a><span data-ttu-id="6d9f1-164">Создание файлов журналов для анализа</span><span class="sxs-lookup"><span data-stu-id="6d9f1-164">Generate log files for analysis</span></span>
<span data-ttu-id="6d9f1-165">В этом учебнике мы будем использовать анализатор сообщений toowork с тремя разными типами файлов журнала, несмотря на то, что можно выбрать toowork с одной из них:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-165">In this tutorial, we'll use Message Analyzer toowork with three different types of log files, although you could choose toowork with any one of these:</span></span>

* <span data-ttu-id="6d9f1-166">Hello **журнал сервера**, который создается при включении ведения журнала хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-166">hello **server log**, which is created when you enable Azure Storage logging.</span></span> <span data-ttu-id="6d9f1-167">Журнал сервера Hello содержит данные о каждой операции при вызове для одной из служб хранилища Azure hello - больших двоичных объектов, очередей, таблицы и файла.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-167">hello server log contains data about each operation called against one of hello Azure Storage services - blob, queue, table, and file.</span></span> <span data-ttu-id="6d9f1-168">Журнал сервера Hello указывает, какая операция была вызвана и какой код состояния: возвращенный, а также другие сведения о hello запроса и ответа.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-168">hello server log indicates which operation was called and what status code was returned, as well as other details about hello request and response.</span></span>
* <span data-ttu-id="6d9f1-169">Hello **журнала клиента .NET**, который создается при включении ведение журнала на стороне клиента из приложения .NET.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-169">hello **.NET client log**, which is created when you enable client-side logging from within your .NET application.</span></span> <span data-ttu-id="6d9f1-170">Hello клиента журнала содержит подробные сведения о как hello клиент подготавливает hello запрос и получает и обрабатывает ответ hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-170">hello client log includes detailed information about how hello client prepares hello request and receives and processes hello response.</span></span>
* <span data-ttu-id="6d9f1-171">Hello **журнал трассировки сети HTTP**, который собирает данные о HTTP/HTTPS запроса и ответа данные, включая для операций в службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-171">hello **HTTP network trace log**, which collects data on HTTP/HTTPS request and response data, including for operations against Azure Storage.</span></span> <span data-ttu-id="6d9f1-172">В этом учебнике мы создать сетевую трассировку hello через анализатор сообщений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-172">In this tutorial, we'll generate hello network trace via Message Analyzer.</span></span>

### <a name="configure-server-side-logging-and-metrics"></a><span data-ttu-id="6d9f1-173">Настройка серверных журналов и метрик</span><span class="sxs-lookup"><span data-stu-id="6d9f1-173">Configure server-side logging and metrics</span></span>
<span data-ttu-id="6d9f1-174">Во-первых мы потребуется tooconfigure хранилища Azure журналов и показателей, таким образом, что мы данные из tooanalyze приложения hello клиента.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-174">First, we'll need tooconfigure Azure Storage logging and metrics, so that we have data from hello client application tooanalyze.</span></span> <span data-ttu-id="6d9f1-175">Можно настроить ведение журнала и метрик в различными способами — через hello [классический портал Azure](https://manage.windowsazure.com), с помощью PowerShell или программно.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-175">You can configure logging and metrics in a variety of ways - via hello [Azure Classic Portal](https://manage.windowsazure.com), by using PowerShell, or programmatically.</span></span> <span data-ttu-id="6d9f1-176">Подробные сведения о настройке ведения журнала и метрик см. в разделах [Включение метрик хранилища и просмотр данных метрик](http://msdn.microsoft.com/library/azure/dn782843.aspx) и [Включение ведения журнала хранилища и доступ к данным журнала](http://msdn.microsoft.com/library/azure/dn782840.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-176">See [Enabling Storage Metrics and Viewing Metrics Data](http://msdn.microsoft.com/library/azure/dn782843.aspx) and [Enabling Storage Logging and Accessing Log Data](http://msdn.microsoft.com/library/azure/dn782840.aspx) for details about configuring logging and metrics.</span></span>

<span data-ttu-id="6d9f1-177">**Через hello классический портал Azure**</span><span class="sxs-lookup"><span data-stu-id="6d9f1-177">**Via hello Azure Classic Portal**</span></span>

<span data-ttu-id="6d9f1-178">tooconfigure журналов и показателей для учетной записи хранилища с помощью портала hello, следуйте инструкциям hello в [отслеживание учетной записи хранения в портале Azure hello](storage-monitor-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-178">tooconfigure logging and metrics for your storage account using hello portal, follow hello instructions at [Monitor a storage account in hello Azure Portal](storage-monitor-storage-account.md).</span></span>

> [!NOTE]
> <span data-ttu-id="6d9f1-179">Это не возможные tooset минутных метрик с помощью hello классический портал Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-179">It's not possible tooset minute metrics using hello Azure Classic Portal.</span></span> <span data-ttu-id="6d9f1-180">Тем не менее рекомендуется установить их для hello целей этого учебника и для диагностики проблем производительности с приложением.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-180">However, we recommend that you do set them for hello purposes of this tutorial, and for investigating performance issues with your application.</span></span> <span data-ttu-id="6d9f1-181">Можно задать минутные показатели, как показано ниже, или программно, с помощью PowerShell или через hello классический портал Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-181">You can set minute metrics using PowerShell as shown below, or programmatically, or via hello Azure Classic Portal.</span></span>
>
> <span data-ttu-id="6d9f1-182">Обратите внимание, что hello классический портал Azure не удается отобразить минутные показатели, только для почасовых метрик.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-182">Note that hello Azure Classic Portal cannot display minute metrics, only hourly metrics.</span></span>
>
>

<span data-ttu-id="6d9f1-183">**Через PowerShell**</span><span class="sxs-lookup"><span data-stu-id="6d9f1-183">**Via PowerShell**</span></span>

<span data-ttu-id="6d9f1-184">tooget работы с PowerShell для Azure, в разделе [как tooinstall и настройка Azure PowerShell](/powershell/azure/overview).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-184">tooget started with PowerShell for Azure, see [How tooinstall and configure Azure PowerShell](/powershell/azure/overview).</span></span>

1. <span data-ttu-id="6d9f1-185">Используйте hello [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) tooadd командлет окно PowerShell toohello учетной записи пользователя Azure:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-185">Use hello [Add-AzureAccount](/powershell/module/azure/add-azureaccount?view=azuresmps-3.7.0) cmdlet tooadd your Azure user account toohello PowerShell window:</span></span>

    ```powershell
     Add-AzureAccount
    ```

2. <span data-ttu-id="6d9f1-186">В hello **входа в tooMicrosoft Azure** окно, введите адрес электронной почты hello и пароль, связанный с вашей учетной записью.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-186">In hello **Sign in tooMicrosoft Azure** window, type hello email address and password associated with your account.</span></span> <span data-ttu-id="6d9f1-187">Azure выполняет проверку подлинности и сохраняет hello учетные данные и затем закрывает окно приветствия.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-187">Azure authenticates and saves hello credential information, and then closes hello window.</span></span>
3. <span data-ttu-id="6d9f1-188">Задать hello по умолчанию учетная запись toohello хранилища учетную запись хранилища, используется в учебнике hello путем выполнения этих команд в окне PowerShell hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-188">Set hello default storage account toohello storage account you are using for hello tutorial by executing these commands in hello PowerShell window:</span></span>

    ```powershell
    $SubscriptionName = 'Your subscription name'
    $StorageAccountName = 'yourstorageaccount'
    Set-AzureSubscription -CurrentStorageAccountName $StorageAccountName -SubscriptionName $SubscriptionName
    ```

4. <span data-ttu-id="6d9f1-189">Включите ведение журнала для hello службы BLOB-объектов хранилища.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-189">Enable storage logging for hello Blob service:</span></span>

    ```powershell
    Set-AzureStorageServiceLoggingProperty -ServiceType Blob -LoggingOperations Read,Write,Delete -PassThru -RetentionDays 7 -Version 1.0
    ```

5. <span data-ttu-id="6d9f1-190">Включение метрик хранилища для службы BLOB-объектов, чтобы убедиться, что tooset hello **- MetricsType** слишком`Minute`:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-190">Enable storage metrics for hello Blob service, making sure tooset **-MetricsType** too`Minute`:</span></span>

    ```powershell
    Set-AzureStorageServiceMetricsProperty -ServiceType Blob -MetricsType Minute -MetricsLevel ServiceAndApi -PassThru -RetentionDays 7 -Version 1.0
    ```

### <a name="configure-net-client-side-logging"></a><span data-ttu-id="6d9f1-191">Настройка ведения журнала на стороне клиента .NET</span><span class="sxs-lookup"><span data-stu-id="6d9f1-191">Configure .NET client-side logging</span></span>
<span data-ttu-id="6d9f1-192">tooconfigure клиентский ведение журналов для приложений .NET, включение диагностики .NET в файле конфигурации приложения hello (web.config или app.config).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-192">tooconfigure client-side logging for a .NET application, enable .NET diagnostics in hello application's configuration file (web.config or app.config).</span></span> <span data-ttu-id="6d9f1-193">В разделе [ведение журнала, используя hello клиентской библиотеки хранилища .NET на стороне клиента](http://msdn.microsoft.com/library/azure/dn782839.aspx) и [ведение журнала, используя пакет SDK хранилища Microsoft Azure для Java hello на стороне клиента](http://msdn.microsoft.com/library/azure/dn782844.aspx) подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-193">See [Client-side Logging with hello .NET Storage Client Library](http://msdn.microsoft.com/library/azure/dn782839.aspx) and [Client-side Logging with hello Microsoft Azure Storage SDK for Java](http://msdn.microsoft.com/library/azure/dn782844.aspx) for details.</span></span>

<span data-ttu-id="6d9f1-194">журнала клиентской части Hello содержит подробные сведения о клиентских hello подготавливает hello запрос и получает и обрабатывает ответ hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-194">hello client-side log includes detailed information about how hello client prepares hello request and receives and processes hello response.</span></span>

<span data-ttu-id="6d9f1-195">Hello клиентской библиотеки хранилища сохраняет данные журнала для клиента в hello местоположения, указанного в файле конфигурации приложения hello (web.config или app.config).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-195">hello Storage Client Library stores client-side log data in hello location specified in hello application's configuration file (web.config or app.config).</span></span>

### <a name="collect-a-network-trace"></a><span data-ttu-id="6d9f1-196">Сбор данных трассировки сети</span><span class="sxs-lookup"><span data-stu-id="6d9f1-196">Collect a network trace</span></span>
<span data-ttu-id="6d9f1-197">Во время выполнения клиентского приложения можно использовать анализатор сообщений toocollect трассировку сети HTTP или HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-197">You can use Message Analyzer toocollect an HTTP/HTTPS network trace while your client application is running.</span></span> <span data-ttu-id="6d9f1-198">Использует анализатор сообщений [Fiddler](http://www.telerik.com/fiddler) на hello серверной части.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-198">Message Analyzer uses [Fiddler](http://www.telerik.com/fiddler) on hello back end.</span></span> <span data-ttu-id="6d9f1-199">Перед тем как вы соберете hello сетевой трассировки, рекомендуется настроить трафика HTTPS без шифрования toorecord Fiddler.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-199">Before you collect hello network trace, we recommend that you configure Fiddler toorecord unencrypted HTTPS traffic:</span></span>

1. <span data-ttu-id="6d9f1-200">Установите [Fiddler](http://www.telerik.com/download/fiddler).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-200">Install [Fiddler](http://www.telerik.com/download/fiddler).</span></span>
2. <span data-ttu-id="6d9f1-201">Запустите Fiddler.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-201">Launch Fiddler.</span></span>
3. <span data-ttu-id="6d9f1-202">Выберите **Инструменты | Параметры Fiddler**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-202">Select **Tools | Fiddler Options**.</span></span>
4. <span data-ttu-id="6d9f1-203">Убедитесь, что в диалоговом окне приветствия **захвата подключение HTTPS** и **расшифровать HTTPS-трафика** активированы, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-203">In hello Options dialog, ensure that **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** are both selected, as shown below.</span></span>

![Настройка параметров Fiddler](./media/storage-e2e-troubleshooting-classic-portal/fiddler-options-1.png)

<span data-ttu-id="6d9f1-205">Учебник hello собирать и сначала сохранить трассировку в сети в анализатор сообщений, создать трассировку служб analysis tooanalyze сеанса hello и hello журналы.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-205">For hello tutorial, collect and save a network trace first in Message Analyzer, then create an analysis session tooanalyze hello trace and hello logs.</span></span> <span data-ttu-id="6d9f1-206">toocollect сетевой трассировки в анализатор сообщений:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-206">toocollect a network trace in Message Analyzer:</span></span>

1. <span data-ttu-id="6d9f1-207">В анализаторе сообщений выберите **Файл | Быстрая трассировка | HTTPS в незашифрованном виде**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-207">In Message Analyzer, select **File | Quick Trace | Unencrypted HTTPS**.</span></span>
2. <span data-ttu-id="6d9f1-208">Hello трассировка начнется немедленно.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-208">hello trace will begin immediately.</span></span> <span data-ttu-id="6d9f1-209">Выберите **остановить** toostop hello трассировки, чтобы мы можно настроить только tootrace трафика хранилища.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-209">Select **Stop** toostop hello trace so that we can configure it tootrace storage traffic only.</span></span>
3. <span data-ttu-id="6d9f1-210">Выберите **изменить** tooedit hello трассировки сеанса.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-210">Select **Edit** tooedit hello tracing session.</span></span>
4. <span data-ttu-id="6d9f1-211">Выберите hello **Настройка** связать toohello справа от приветствия **Microsoft Pef-WebProxy** поставщика трассировки событий Windows.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-211">Select hello **Configure** link toohello right of hello **Microsoft-Pef-WebProxy** ETW provider.</span></span>
5. <span data-ttu-id="6d9f1-212">В hello **Дополнительные параметры** диалоговое окно, нажмите кнопку hello **поставщика** вкладки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-212">In hello **Advanced Settings** dialog, click hello **Provider** tab.</span></span>
6. <span data-ttu-id="6d9f1-213">В hello **фильтра Hostname** укажите хранения конечных точек, разделяя их пробелами.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-213">In hello **Hostname Filter** field, specify your storage endpoints, separated by spaces.</span></span> <span data-ttu-id="6d9f1-214">Например можно указать конечные точки следующим образом: изменить `storagesample` toohello имя учетной записи:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-214">For example, you can specify your endpoints as follows; change `storagesample` toohello name of your storage account:</span></span>

    ```   
    storagesample.blob.core.windows.net storagesample.queue.core.windows.net storagesample.table.core.windows.net
    ```

7. <span data-ttu-id="6d9f1-215">Закройте диалоговое окно приветствия и нажмите кнопку **перезапустите** toobegin сбор трассировки для hello с фильтром hostname hello в месте, так что в hello трассировку включается только сетевой трафик хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-215">Exit hello dialog, and click **Restart** toobegin collecting hello trace with hello hostname filter in place, so that only Azure Storage network traffic is included in hello trace.</span></span>

> [!NOTE]
> <span data-ttu-id="6d9f1-216">После завершения сбора трассировки сети настоятельно рекомендуется восстанавливать hello параметры, которые изменились в Fiddler toodecrypt HTTPS-трафика.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-216">After you have finished collecting your network trace, we strongly recommend that you revert hello settings that you may have changed in Fiddler toodecrypt HTTPS traffic.</span></span> <span data-ttu-id="6d9f1-217">В диалоговом окне Параметры Fiddler hello, отмените выделение hello **захвата подключение HTTPS** и **расшифровать HTTPS-трафика** флажки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-217">In hello Fiddler Options dialog, deselect hello **Capture HTTPS CONNECTs** and **Decrypt HTTPS Traffic** checkboxes.</span></span>
>
>

<span data-ttu-id="6d9f1-218">В разделе [с помощью функции трассировки сети hello](http://technet.microsoft.com/library/jj674819.aspx) в библиотеке Technet для получения дополнительных сведений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-218">See [Using hello Network Tracing Features](http://technet.microsoft.com/library/jj674819.aspx) on Technet for more details.</span></span>

## <a name="review-metrics-data-in-hello-azure-classic-portal"></a><span data-ttu-id="6d9f1-219">Просмотрите данные показателей в hello классический портал Azure</span><span class="sxs-lookup"><span data-stu-id="6d9f1-219">Review metrics data in hello Azure Classic Portal</span></span>
<span data-ttu-id="6d9f1-220">После выполнения приложения в течение определенного периода времени, можно просмотреть hello диаграммы метрик, которые отображаются в классический портал Azure tooobserve hello как операции службы.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-220">Once your application has been running for a period of time, you can review hello metrics charts that appear in hello Azure Classic Portal tooobserve how your service has been performing.</span></span> <span data-ttu-id="6d9f1-221">Во-первых, мы добавим hello **процент успешных** метрики toohello мониторинг страницы:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-221">First, we'll add hello **Success Percentage** metric toohello Monitoring page:</span></span>

1. <span data-ttu-id="6d9f1-222">Перейдите toohello панель мониторинга для вашей учетной записи в hello [классический портал Azure](https://manage.windowsazure.com), а затем выберите **монитор** tooview hello мониторинга страницы.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-222">Navigate toohello Dashboard for your storage account in hello [Azure Classic Portal](https://manage.windowsazure.com), then select **Monitor** tooview hello monitoring page.</span></span>
2. <span data-ttu-id="6d9f1-223">Нажмите кнопку **добавить метрики** toodisplay hello **Выбор метрики** диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-223">Click **Add Metrics** toodisplay hello **Choose Metrics** dialog.</span></span>
3. <span data-ttu-id="6d9f1-224">Прокрутите вниз toofind hello **процент успешных** группы, разверните его, а затем выберите **статистические**, как показано на рисунке hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-224">Scroll down toofind hello **Success Percentage** group, expand it, then select **Aggregate**, as shown in hello picture below.</span></span> <span data-ttu-id="6d9f1-225">Эта метрика собирает данные о проценте успешно выполненных из всех операций BLOB-объекта.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-225">This metric aggregates success percentage data from all Blob operations.</span></span>

![Выбор метрик](./media/storage-e2e-troubleshooting-classic-portal/choose-metrics-portal-1.png)

<span data-ttu-id="6d9f1-227">В hello классический портал Azure, вы увидите теперь **процент успешных** в hello диаграмма мониторинга, а также любые другие показатели, возможно, были добавлены (копирование toosix могут отображаться на диаграмме hello за один раз).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-227">In hello Azure Classic Portal, you'll now see **Success Percentage** in hello monitoring chart, along with any other metrics you may have added (up toosix can be displayed on hello chart at once).</span></span> <span data-ttu-id="6d9f1-228">Hello рисунке ниже можно увидеть, Процент успешных hello имеет несколько ниже 100%, что сценарий hello изучаться мы будем рядом, проанализировав журналы hello в анализатор сообщений:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-228">In hello picture below, you can see that hello percent success rate is somewhat below 100%, which is hello scenario we'll investigate next by analyzing hello logs in Message Analyzer:</span></span>

![Диаграмма метрик на портале](./media/storage-e2e-troubleshooting-classic-portal/portal-metrics-chart-1.png)

<span data-ttu-id="6d9f1-230">Дополнительные сведения о добавлении метрики toohello мониторинг страницы в разделе [как: Добавление таблицы метрик метрики toohello](storage-monitor-storage-account.md#add-metrics-charts-to-the-portal-dashboard).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-230">For more details on adding metrics toohello Monitoring page, see [How to: Add metrics toohello metrics table](storage-monitor-storage-account.md#add-metrics-charts-to-the-portal-dashboard).</span></span>

> [!NOTE]
> <span data-ttu-id="6d9f1-231">После включения метрик хранилища, он может занять некоторое время для вашей tooappear данные метрик в hello классический портал Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-231">It may take some time for your metrics data tooappear in hello Azure Classic Portal after you enable storage metrics.</span></span> <span data-ttu-id="6d9f1-232">Это происходит потому часовых метрик для hello предыдущий час не отображаются в hello классический портал Azure, пока не истечет hello текущий час.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-232">This is because hourly metrics for hello previous hour are not displayed in hello Azure Classic Portal until hello current hour has elapsed.</span></span> <span data-ttu-id="6d9f1-233">Кроме того ежеминутных метрик не отображаются в hello классический портал Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-233">Also, minute metrics are not displayed in hello Azure Classic Portal.</span></span> <span data-ttu-id="6d9f1-234">Поэтому в зависимости от того, при включении метрик, может потребоваться копирование данных метрик toosee tootwo часов.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-234">So depending on when you enable metrics, it may take up tootwo hours toosee metrics data.</span></span>
>
>

## <a name="use-azcopy-toocopy-server-logs-tooa-local-directory"></a><span data-ttu-id="6d9f1-235">Использовать AzCopy toocopy сервер регистрирует tooa локальный каталог</span><span class="sxs-lookup"><span data-stu-id="6d9f1-235">Use AzCopy toocopy server logs tooa local directory</span></span>
<span data-ttu-id="6d9f1-236">Хранилище Azure записывает tooblobs данных журнала сервера, метрики записываются tootables.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-236">Azure Storage writes server log data tooblobs, while metrics are written tootables.</span></span> <span data-ttu-id="6d9f1-237">BLOB-объекты журнала доступны в хорошо известных hello `$logs` контейнер для вашей учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-237">Log blobs are available in hello well-known `$logs` container for your storage account.</span></span> <span data-ttu-id="6d9f1-238">BLOB-объекты журнала обозначаются иерархически года, месяца, дня и часа, образом, можно упростить поиск hello диапазон времени, в течение которого нужно tooinvestigate.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-238">Log blobs are named hierarchically by year, month, day, and hour, so that you can easily locate hello range of time you wish tooinvestigate.</span></span> <span data-ttu-id="6d9f1-239">Например, в hello `storagesample` учетная запись, hello контейнер больших двоичных объектов журнала hello для 01/02/2015 из 8-9: 00, `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-239">For example, in hello `storagesample` account, hello container for hello log blobs for 01/02/2015, from 8-9 am, is `https://storagesample.blob.core.windows.net/$logs/blob/2015/01/08/0800`.</span></span> <span data-ttu-id="6d9f1-240">Hello отдельные большие двоичные объекты в этом контейнере именуются последовательно, начиная с версии `000000.log`.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-240">hello individual blobs in this container are named sequentially, beginning with `000000.log`.</span></span>

<span data-ttu-id="6d9f1-241">Можно использовать эти серверные файлы tooa журнала по своему усмотрению hello AzCopy средство командной строки toodownload на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-241">You can use hello AzCopy command-line tool toodownload these server-side log files tooa location of your choice on your local machine.</span></span> <span data-ttu-id="6d9f1-242">Например, можно использовать следующие файлы журнала hello toodownload команду для размещения операции BLOB-объекта, которое ушло на hello папку toohello 2 января 2015 г. `C:\Temp\Logs\Server`; замените `<storageaccountname>` с именем hello вашей учетной записи хранилища и `<storageaccountkey>` с вашей ключ доступа учетной записи:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-242">For example, you can use hello following command toodownload hello log files for blob operations that took place on January 2, 2015 toohello folder `C:\Temp\Logs\Server`; replace `<storageaccountname>` with hello name of your storage account, and `<storageaccountkey>` with your account access key:</span></span>

```azcopy
AzCopy.exe /Source:http://<storageaccountname>.blob.core.windows.net/$logs /Dest:C:\Temp\Logs\Server /Pattern:"blob/2015/01/02" /SourceKey:<storageaccountkey> /S /V
```

<span data-ttu-id="6d9f1-243">AzCopy можно загрузить на hello [загрузки Azure](https://azure.microsoft.com/downloads/) страницы.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-243">AzCopy is available for download on hello [Azure Downloads](https://azure.microsoft.com/downloads/) page.</span></span> <span data-ttu-id="6d9f1-244">Дополнительные сведения об использовании AzCopy см. в разделе [перенесите данные с помощью служебной программы командной строки AzCopy hello](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-244">For details about using AzCopy, see [Transfer data with hello AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

<span data-ttu-id="6d9f1-245">Дополнительные сведения о скачивании серверных журналов см. в разделе [Скачивание данных журнала хранилища](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-245">For additional information about downloading server-side logs, see [Downloading Storage Logging log data](http://msdn.microsoft.com/library/azure/dn782840.aspx#DownloadingStorageLogginglogdata).</span></span>

## <a name="use-microsoft-message-analyzer-tooanalyze-log-data"></a><span data-ttu-id="6d9f1-246">Использовать данные журналов tooanalyze Microsoft Message Analyzer</span><span class="sxs-lookup"><span data-stu-id="6d9f1-246">Use Microsoft Message Analyzer tooanalyze log data</span></span>
<span data-ttu-id="6d9f1-247">Анализатор сообщений (Майкрософт) — это средство для записи, отображения и анализа протокола обмена сообщениями трафика, событий и других сообщений системы или приложений в сценариях устранения неполадок и диагностики.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-247">Microsoft Message Analyzer is a tool for capturing, displaying, and analyzing protocol messaging traffic, events, and other system or application messages in troubleshooting and diagnostic scenarios.</span></span> <span data-ttu-id="6d9f1-248">Анализатор сообщений также позволяет tooload, aggregate и анализа данных из журнала и сохранить файлы трассировки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-248">Message Analyzer also enables you tooload, aggregate, and analyze data from log and saved trace files.</span></span> <span data-ttu-id="6d9f1-249">Для получения дополнительных сведений об анализаторе сообщений см. [Руководство по работе с анализатором сообщений (Майкрософт)](http://technet.microsoft.com/library/jj649776.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-249">For more information about Message Analyzer, see [Microsoft Message Analyzer Operating Guide](http://technet.microsoft.com/library/jj649776.aspx).</span></span>

<span data-ttu-id="6d9f1-250">Анализатор сообщений включает ресурсы для хранилища Azure, которые помогут tooanalyze сервера, клиента и журналы сети.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-250">Message Analyzer includes assets for Azure Storage that help you tooanalyze server, client, and network logs.</span></span> <span data-ttu-id="6d9f1-251">В этом разделе мы обсудим, как toouse tooaddress этих средств hello низкий процент успешных операций в выпуске hello хранения журналов.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-251">In this section, we'll discuss how toouse those tools tooaddress hello issue of low percent success in hello storage logs.</span></span>

### <a name="download-and-install-message-analyzer-and-hello-azure-storage-assets"></a><span data-ttu-id="6d9f1-252">Загрузите и установите анализатор сообщений и hello активов хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="6d9f1-252">Download and install Message Analyzer and hello Azure Storage Assets</span></span>
1. <span data-ttu-id="6d9f1-253">Загрузить [анализатор сообщений](http://www.microsoft.com/download/details.aspx?id=44226) из hello центра загрузки Майкрософт и запустите установщик hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-253">Download [Message Analyzer](http://www.microsoft.com/download/details.aspx?id=44226) from hello Microsoft Download Center, and run hello installer.</span></span>
2. <span data-ttu-id="6d9f1-254">Запустите анализатор сообщений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-254">Launch Message Analyzer.</span></span>
3. <span data-ttu-id="6d9f1-255">Из hello **средства** последовательно выберите пункты **менеджера по активам**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-255">From hello **Tools** menu, select **Asset Manager**.</span></span> <span data-ttu-id="6d9f1-256">В hello **менеджера по активам** диалогового окна выберите **загружает**, установите фильтр на **хранилища Azure**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-256">In hello **Asset Manager** dialog, select **Downloads**, then filter on **Azure Storage**.</span></span> <span data-ttu-id="6d9f1-257">Вы увидите активы хранилища Azure hello, как показано на рисунке hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-257">You will see hello Azure Storage Assets, as shown in hello picture below.</span></span>
4. <span data-ttu-id="6d9f1-258">Нажмите кнопку **синхронизации все элементы отображаются** tooinstall hello активов хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-258">Click **Sync All Displayed Items** tooinstall hello Azure Storage Assets.</span></span> <span data-ttu-id="6d9f1-259">Доступные ресурсы Hello включают:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-259">hello available assets include:</span></span>
   * <span data-ttu-id="6d9f1-260">**Правила цвета Azure хранилища:** правила цвета хранилища Azure позволяют toodefine специальные фильтры, использующие цвет текста, и начертания toohighlight сообщений, содержащих конкретные сведения в трассировке.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-260">**Azure Storage Color Rules:** Azure Storage color rules enable you toodefine special filters that use color, text, and font styles toohighlight messages that contain specific information in a trace.</span></span>
   * <span data-ttu-id="6d9f1-261">**Диаграммы хранилища Azure.** Диаграммы хранилища Azure — стандартные диаграммы, отображающие данные журнала сервера.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-261">**Azure Storage Charts:** Azure Storage charts are predefined charts that graph server log data.</span></span> <span data-ttu-id="6d9f1-262">Обратите внимание, что toouse хранилища Azure диаграммы в данный момент возможно только загрузить журнал сервера hello в hello анализа сетки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-262">Note that toouse Azure Storage charts at this time, you may only load hello server log into hello Analysis Grid.</span></span>
   * <span data-ttu-id="6d9f1-263">**Синтаксического анализа хранилища Azure:** hello хранилища Azure анализаторы синтаксического анализа hello хранилища Azure клиента, сервера и HTTP регистрирует в порядке toodisplay их в hello анализа сетки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-263">**Azure Storage Parsers:** hello Azure Storage parsers parse hello Azure Storage client, server, and HTTP logs in order toodisplay them in hello Analysis Grid.</span></span>
   * <span data-ttu-id="6d9f1-264">**Фильтры Azure хранилища:** хранилища Azure фильтры, которые являются предопределенными критериями, tooquery можно использовать данные в hello анализа сетки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-264">**Azure Storage Filters:** Azure Storage filters are predefined criteria that you can use tooquery your data in hello Analysis Grid.</span></span>
   * <span data-ttu-id="6d9f1-265">**Azure представление структуры хранилища:** макеты хранилища Azure, макеты предопределенных столбцов и группирований в hello анализа сетки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-265">**Azure Storage View Layouts:** Azure Storage view layouts are predefined column layouts and groupings in hello Analysis Grid.</span></span>
5. <span data-ttu-id="6d9f1-266">После установки средств hello, перезапустите анализатор сообщений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-266">Restart Message Analyzer after you've installed hello assets.</span></span>

![Диспетчер ресурсов в анализаторе сообщений](./media/storage-e2e-troubleshooting-classic-portal/mma-start-page-1.png)

> [!NOTE]
> <span data-ttu-id="6d9f1-268">Установите все активы хранилища Azure hello, показанный для целей данного учебника hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-268">Install all of hello Azure Storage assets shown for hello purposes of this tutorial.</span></span>
>
>

### <a name="import-your-log-files-into-message-analyzer"></a><span data-ttu-id="6d9f1-269">Импорт файлов журнала в анализатор сообщений</span><span class="sxs-lookup"><span data-stu-id="6d9f1-269">Import your log files into Message Analyzer</span></span>
<span data-ttu-id="6d9f1-270">Все сохраненные файлы журнала (серверного, клиентского и сетевого) можно импортировать в один сеанс анализатора сообщений (Майкрософт) для проведения анализа.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-270">You can import all of your saved log files (server-side, client-side, and network) into a single session in Microsoft Message Analyzer for analysis.</span></span>

1. <span data-ttu-id="6d9f1-271">На hello **файл** в Microsoft Message Analyzer, выберите пункт **новый сеанс**, а затем нажмите кнопку **пустого сеанса**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-271">On hello **File** menu in Microsoft Message Analyzer, click **New Session**, and then click **Blank Session**.</span></span> <span data-ttu-id="6d9f1-272">В hello **новый сеанс** диалоговое окно, введите имя для сеанса анализа.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-272">In hello **New Session** dialog, enter a name for your analysis session.</span></span> <span data-ttu-id="6d9f1-273">В hello **подробные сведения о сеансе** панели можно, щелкнув hello **файлы** кнопки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-273">In hello **Session Details** panel, click on hello **Files** button.</span></span>
2. <span data-ttu-id="6d9f1-274">Щелкните tooload hello сетевой трассировки данных, создаваемых анализатор сообщений **добавить файлы**, поиск toohello расположения, где был сохранен файл .matp из сеанса трассировки web, выберите hello .matp файл, и нажмите кнопку **откройте**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-274">tooload hello network trace data generated by Message Analyzer, click on **Add Files**, browse toohello location where you saved your .matp file from your web tracing session, select hello .matp file, and click **Open**.</span></span>
3. <span data-ttu-id="6d9f1-275">данные журнала серверной части tooload hello, щелкните на **добавить файлы**найдите toohello расположение, куда вы загрузили серверных журналов, выберите файлы журнала hello hello временном диапазоне tooanalyze и нажмите кнопку **откройте**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-275">tooload hello server-side log data, click on **Add Files**, browse toohello location where you downloaded your server-side logs, select hello log files for hello time range you want tooanalyze, and click **Open**.</span></span> <span data-ttu-id="6d9f1-276">Затем в hello **подробные сведения о сеансе** панель, набор hello **текст журнала конфигурации** раскрывающегося списка для каждого файла журнала на стороне сервера слишком**AzureStorageLog** tooensure Microsoft Анализатор сообщений можно выполнить синтаксический анализ файла журнала hello правильно.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-276">Then, in hello **Session Details** panel, set hello **Text Log Configuration** drop-down for each server-side log file too**AzureStorageLog** tooensure that Microsoft Message Analyzer can parse hello log file correctly.</span></span>
4. <span data-ttu-id="6d9f1-277">данные журнала клиентской части tooload hello, щелкните **добавить файлы**найдите расположение toohello для сохранения журналов клиентские, выберите файлы журнала hello tooanalyze и нажмите кнопку **откройте**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-277">tooload hello client-side log data, click on **Add Files**, browse toohello location where you saved your client-side logs, select hello log files you want tooanalyze, and click **Open**.</span></span> <span data-ttu-id="6d9f1-278">Затем в hello **подробные сведения о сеансе** панель, набор hello **текст журнала конфигурации** раскрывающегося списка для каждого файла журнала на стороне клиента слишком**AzureStorageClientDotNetV4** tooensure, Microsoft Message Analyzer можно выполнить синтаксический анализ файла журнала hello правильно.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-278">Then, in hello **Session Details** panel, set hello **Text Log Configuration** drop-down for each client-side log file too**AzureStorageClientDotNetV4** tooensure that Microsoft Message Analyzer can parse hello log file correctly.</span></span>
5. <span data-ttu-id="6d9f1-279">Нажмите кнопку **запустить** в hello **новый сеанс** диалоговое окно tooload и синтаксический анализ hello данные журнала.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-279">Click **Start** in hello **New Session** dialog tooload and parse hello log data.</span></span> <span data-ttu-id="6d9f1-280">данные журнала Hello отображаются в сетке анализа анализатора сообщений hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-280">hello log data displays in hello Message Analyzer Analysis Grid.</span></span>

<span data-ttu-id="6d9f1-281">Hello рисунке показан пример сеанса настраивается с сервера, клиента и файлы журнала трассировки сети.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-281">hello picture below shows an example session configured with server, client, and network trace log files.</span></span>

![Настройка сеанса анализатора сообщений](./media/storage-e2e-troubleshooting-classic-portal/configure-mma-session-1.png)

<span data-ttu-id="6d9f1-283">Обратите внимание, что анализатор сообщений загружает файлы журнала в память.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-283">Note that Message Analyzer loads log files into memory.</span></span> <span data-ttu-id="6d9f1-284">При наличии большого набора данных журнала, вы будете toofilter в порядке tooget hello наилучшей производительности анализатор сообщений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-284">If you have a large set of log data, you will want toofilter it in order tooget hello best performance from Message Analyzer.</span></span>

<span data-ttu-id="6d9f1-285">Во-первых определите hello промежуток времени, который вы заинтересованы в просмотре и небольшие этот промежуток времени.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-285">First, determine hello time frame that you are interested in reviewing, and keep this time frame as small as possible.</span></span> <span data-ttu-id="6d9f1-286">Во многих случаях требуется tooreview период минут или часов в большинстве случаев.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-286">In many cases you will want tooreview a period of minutes or hours at most.</span></span> <span data-ttu-id="6d9f1-287">Импорт hello наименьший набор журналы, которые могут соответствовать вашим потребностям.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-287">Import hello smallest set of logs that can meet your needs.</span></span>

<span data-ttu-id="6d9f1-288">Если по-прежнему имеется большой объем данных журнала, затем можно toospecify toofilter сеанса фильтра данных журнала перед их загрузкой.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-288">If you still have a large amount of log data, then you may want toospecify a session filter toofilter your log data before you load it.</span></span> <span data-ttu-id="6d9f1-289">В hello **сеанса фильтра** поле, выберите hello **библиотеки** кнопку toochoose стандартный фильтр, например, выбрать **глобального времени фильтра I** из хранилища Azure фильтрует hello toofilter в течение промежутка времени.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-289">In hello **Session Filter** box, select hello **Library** button toochoose a predefined filter; for example, choose **Global Time Filter I** from hello Azure Storage filters toofilter on a time interval.</span></span> <span data-ttu-id="6d9f1-290">Можно редактировать hello критериев фильтра toospecify hello начала и конца отметки времени для интервала hello необходимо toosee.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-290">You can then edit hello filter criteria toospecify hello starting and ending timestamp for hello interval you want toosee.</span></span> <span data-ttu-id="6d9f1-291">Можно также осуществлять фильтрацию по коду определенного состояния; Например вы можете tooload где hello код состояния 404 только записи журнала.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-291">You can also filter on a particular status code; for example, you can choose tooload only log entries where hello status code is 404.</span></span>

<span data-ttu-id="6d9f1-292">Дополнительные сведения об импорте данных журнала в анализатор сообщений (Майкрософт) см. в разделе [Получение данных сообщений](http://technet.microsoft.com/library/dn772437.aspx) на сайте TechNet.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-292">For more information about importing log data into Microsoft Message Analyzer, see [Retrieving Message Data](http://technet.microsoft.com/library/dn772437.aspx) on TechNet.</span></span>

### <a name="use-hello-client-request-id-toocorrelate-log-file-data"></a><span data-ttu-id="6d9f1-293">Используйте hello идентификатор запроса клиента toocorrelate данных файла журнала</span><span class="sxs-lookup"><span data-stu-id="6d9f1-293">Use hello client request ID toocorrelate log file data</span></span>
<span data-ttu-id="6d9f1-294">Hello клиентская библиотека хранилища Azure автоматически создает идентификатор запроса клиента, уникальный для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-294">hello Azure Storage Client Library automatically generates a unique client request ID for every request.</span></span> <span data-ttu-id="6d9f1-295">Данное значение записывается журнал toohello клиентов, журнал сервера hello и hello сетевой трассировки, воспользуйтесь его toocorrelate данных для всех трех журналов в анализатор сообщений.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-295">This value is written toohello client log, hello server log, and hello network trace, so you can use it toocorrelate data across all three logs within Message Analyzer.</span></span> <span data-ttu-id="6d9f1-296">В разделе [идентификатор запроса клиента](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) Дополнительные сведения о клиенте hello идентификатор запроса.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-296">See [Client request ID](storage-monitoring-diagnosing-troubleshooting.md#client-request-id) for additional information about hello client request ID.</span></span>

<span data-ttu-id="6d9f1-297">Hello следующих разделах описываются как готовые toouse и пользовательский макет представления, toocorrelate и как группировать данные, основанные на запрос клиента hello идентификатор.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-297">hello sections below describe how toouse pre-configured and custom layout views toocorrelate and group data based on hello client request ID.</span></span>

### <a name="select-a-view-layout-toodisplay-in-hello-analysis-grid"></a><span data-ttu-id="6d9f1-298">Выберите представление макета toodisplay в hello анализа сетки</span><span class="sxs-lookup"><span data-stu-id="6d9f1-298">Select a view layout toodisplay in hello Analysis Grid</span></span>
<span data-ttu-id="6d9f1-299">Активы хранилища Hello для анализатор сообщений включают структуры представления хранилища Azure, которые являются предварительно настроенные представления, можно использовать toodisplay данных со столбцами и столбцами группирования полезно для различных сценариев.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-299">hello Storage Assets for Message Analyzer include Azure Storage View Layouts, which are pre-configured views that you can use toodisplay your data with useful groupings and columns for different scenarios.</span></span> <span data-ttu-id="6d9f1-300">Также можно создавать пользовательские макеты и сохранять их для повторного использования.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-300">You can also create custom view layouts and save them for reuse.</span></span>

<span data-ttu-id="6d9f1-301">Hello рисунке показано hello **разметки представления** меню, выбрав **разметки представления** hello ленте инструментов.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-301">hello picture below shows hello **View Layout** menu, available by selecting **View Layout** from hello toolbar ribbon.</span></span> <span data-ttu-id="6d9f1-302">Hello макеты для хранилища Azure сгруппированы под hello **хранилища Azure** узла в меню hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-302">hello view layouts for Azure Storage are grouped under hello **Azure Storage** node in hello menu.</span></span> <span data-ttu-id="6d9f1-303">Можно выполнить поиск `Azure Storage` просмотрите макеты только в hello toofilter поле поиска в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-303">You can search for `Azure Storage` in hello search box toofilter on Azure Storage view layouts only.</span></span> <span data-ttu-id="6d9f1-304">Можно также выбрать hello звезда Далее tooa представление макета toomake ему Избранное и вывести ее в верхней hello меню «hello».</span><span class="sxs-lookup"><span data-stu-id="6d9f1-304">You can also select hello star next tooa view layout toomake it a favorite and display it at hello top of hello menu.</span></span>

![Меню макета представления](./media/storage-e2e-troubleshooting-classic-portal/view-layout-menu.png)

<span data-ttu-id="6d9f1-306">toobegin с помощью select **группируются по ClientRequestID и модуль**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-306">toobegin with, select **Grouped by ClientRequestID and Module**.</span></span> <span data-ttu-id="6d9f1-307">Этот макет представления группирует данные журналов из всех трех журналов сначала по идентификатору запроса клиента, а затем по исходному файлу журнала (или **модулю** в анализаторе сообщений).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-307">This view layout groups log data from all three logs first by client request ID, then by source log file (or **Module** in Message Analyzer).</span></span> <span data-ttu-id="6d9f1-308">В этом представлении можно детализировать укрупнением идентификатор запроса конкретного клиента и просматривать данные из всех трех журналов для запроса клиента по идентификатору.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-308">With this view, you can drill down into a particular client request ID, and see data from all three log files for that client request ID.</span></span>

<span data-ttu-id="6d9f1-309">Приведенный далее рисунок Hello эти данные отображаются для макета применено представление toohello образец журнала, с подмножеством столбцов, отображаемых.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-309">hello picture below shows this layout view applied toohello sample log data, with a subset of columns displayed.</span></span> <span data-ttu-id="6d9f1-310">Вы увидите, что для ИД запроса конкретного клиента, hello анализа сетки отображаются данные из журнала клиента hello, журнал сервера и сетевой трассировки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-310">You can see that for a particular client request ID, hello Analysis Grid displays data from hello client log, server log, and network trace.</span></span>

![Макет представления хранилища Azure](./media/storage-e2e-troubleshooting-classic-portal/view-layout-client-request-id-module.png)

> [!NOTE]
> <span data-ttu-id="6d9f1-312">Файлы журналов имеют разные столбцы, поэтому при отображении данных из нескольких файлов журналов в hello сетки анализ, некоторые столбцы не может содержать любые данные для строки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-312">Different log files have different columns, so when data from multiple log files is displayed in hello Analysis Grid, some columns may not contain any data for a given row.</span></span> <span data-ttu-id="6d9f1-313">Например, на приведенном выше рисунке hello, строк журнала клиента больше не показывать все данные для hello **Timestamp**, **TimeElapsed**, **источника**, и **назначения** столбцов, так как эти столбцы не существуют в журнал клиента hello, однако существуют в hello сетевой трассировки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-313">For example, in hello picture above, the client log rows do not show any data for hello **Timestamp**, **TimeElapsed**, **Source**, and **Destination** columns, because these columns do not exist in hello client log, but do exist in hello network trace.</span></span> <span data-ttu-id="6d9f1-314">Аналогичным образом hello **Timestamp** столбец отображает данные отметки времени из журнала сервера hello, но данные не отображаются для hello **TimeElapsed**, **источника**, и  **Назначение** столбцы, которые не являются частью журнала сервера hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-314">Similarly, hello **Timestamp** column displays timestamp data from hello server log, but no data is displayed for hello **TimeElapsed**, **Source**, and **Destination** columns, which are not part of hello server log.</span></span>
>
>

<span data-ttu-id="6d9f1-315">В дополнение к этому toousing hello Azure представление структуры хранилища, можно также определить и сохранить представление макеты.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-315">In addition toousing hello Azure Storage view layouts, you can also define and save your own view layouts.</span></span> <span data-ttu-id="6d9f1-316">Можно выбрать другие нужные поля для группирования данных и сохранять как часть пользовательский макет hello группирования.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-316">You can select other desired fields for grouping data and save hello grouping as part of your custom layout as well.</span></span>

### <a name="apply-color-rules-toohello-analysis-grid"></a><span data-ttu-id="6d9f1-317">Применяются правила цвета toohello анализа сетки</span><span class="sxs-lookup"><span data-stu-id="6d9f1-317">Apply color rules toohello Analysis Grid</span></span>
<span data-ttu-id="6d9f1-318">Активы хранилища Hello включают также правила цвета, которые предоставляют визуальный означает tooidentify ошибок в hello сетки анализа различных типов.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-318">hello Storage Assets also include color rules, which offer a visual means tooidentify different types of errors in hello Analysis Grid.</span></span> <span data-ttu-id="6d9f1-319">Hello предопределенные правила цвета применяются tooHTTP ошибки, могут быть отображены только для сервера hello журнала и сетевой трассировки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-319">hello predefined color rules apply tooHTTP errors, so they appear only for hello server log and network trace.</span></span>

<span data-ttu-id="6d9f1-320">Выберите правила цвета tooapply, **правила цвета** hello ленте инструментов.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-320">tooapply color rules, select **Color Rules** from hello toolbar ribbon.</span></span> <span data-ttu-id="6d9f1-321">Вы увидите правила цвета hello хранилища Azure в меню hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-321">You'll see hello Azure Storage color rules in hello menu.</span></span> <span data-ttu-id="6d9f1-322">В учебнике hello выберите **ошибки клиента (StatusCode от 400 до 499)**, как показано на рисунке hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-322">For hello tutorial, select **Client Errors (StatusCode between 400 and 499)**, as shown in hello picture below.</span></span>

![Макет представления хранилища Azure](./media/storage-e2e-troubleshooting-classic-portal/color-rules-menu.png)

<span data-ttu-id="6d9f1-324">В дополнение к этому toousing hello хранилища Azure цветовые правила, можно определить и сохранить правила цвета.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-324">In addition toousing hello Azure Storage color rules, you can also define and save your own color rules.</span></span>

### <a name="group-and-filter-log-data-toofind-400-range-errors"></a><span data-ttu-id="6d9f1-325">Группы и фильтровать ошибки 400 диапазон журнала данных toofind</span><span class="sxs-lookup"><span data-stu-id="6d9f1-325">Group and filter log data toofind 400-range errors</span></span>
<span data-ttu-id="6d9f1-326">Затем мы группы и фильтровать toofind данных журнала hello все ошибки в диапазоне hello 400.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-326">Next, we'll group and filter hello log data toofind all errors in hello 400 range.</span></span>

1. <span data-ttu-id="6d9f1-327">Найдите hello **StatusCode** столбца в hello анализа сетки, щелкните правой кнопкой мыши столбец hello заголовка и выберите **группы**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-327">Locate hello **StatusCode** column in hello Analysis Grid, right-click hello column heading, and select **Group**.</span></span>
2. <span data-ttu-id="6d9f1-328">Далее группировать по hello **ClientRequestId** столбца.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-328">Next, group on hello **ClientRequestId** column.</span></span> <span data-ttu-id="6d9f1-329">Вы увидите что hello данные в сетки анализа теперь организованы по состоянию приветствия кода и запросом клиента по идентификатору.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-329">You'll see that hello data in hello Analysis Grid is now organized by status code and by client request ID.</span></span>
3. <span data-ttu-id="6d9f1-330">Отображается окно инструментов hello фильтр представления, если не отображается.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-330">Display hello View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="6d9f1-331">Выберите на ленте инструментов hello **окна инструментов**, затем **фильтр представления**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-331">On hello toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
4. <span data-ttu-id="6d9f1-332">toofilter hello журнала toodisplay только 400 диапазон ошибки данных, добавить hello, следуя toohello критерии фильтра **фильтр представления** и выберите **применить**:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-332">toofilter hello log data toodisplay only 400-range errors, add hello following filter criteria toohello **View Filter** window, and click **Apply**:</span></span>

    ```   
    (AzureStorageLog.StatusCode >= 400 && AzureStorageLog.StatusCode <=499) || (HTTP.StatusCode >= 400 && HTTP.StatusCode <= 499)
    ```

<span data-ttu-id="6d9f1-333">Hello рисунке ниже показаны результаты hello данного группирования и фильтра.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-333">hello picture below shows hello results of this grouping and filter.</span></span> <span data-ttu-id="6d9f1-334">Расширяемые hello **ClientRequestID** поле под hello группирования для, например, код состояния 409, показана операция, которая привела к указанный код состояния.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-334">Expanding hello **ClientRequestID** field beneath hello grouping for status code 409, for example, shows an operation that resulted in that status code.</span></span>

![Макет представления хранилища Azure](./media/storage-e2e-troubleshooting-classic-portal/400-range-errors1.png)

<span data-ttu-id="6d9f1-336">После применения фильтра, вы увидите, что исключаются строки из журнала клиента hello, как hello журнала клиента не включает **StatusCode** столбца.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-336">After applying this filter, you'll see that rows from hello client log are excluded, as hello client log does not include a **StatusCode** column.</span></span> <span data-ttu-id="6d9f1-337">Затем мы вернемся toohello журнала tooexamine hello клиентских операций клиента, ставших toothem toobegin с мы изучим приветствия сервера и ошибки 404 toolocate журналы трассировки сети</span><span class="sxs-lookup"><span data-stu-id="6d9f1-337">toobegin with, we'll review hello server and network trace logs toolocate 404 errors, and then we'll return toohello client log tooexamine hello client operations that led toothem.</span></span>

> [!NOTE]
> <span data-ttu-id="6d9f1-338">Можно выполнить фильтрацию по hello **StatusCode** столбец и по-прежнему отображать данные из всех трех журналов, включая hello журнала клиента при добавлении фильтр toohello выражения, содержит записи журнала, где hello код состояния имеет значение null.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-338">You can filter on hello **StatusCode** column and still display data from all three logs, including hello client log, if you add an expression toohello filter that includes log entries where hello status code is null.</span></span> <span data-ttu-id="6d9f1-339">tooconstruct этот критерий фильтра, используйте:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-339">tooconstruct this filter expression, use:</span></span>
>
> <code>&#42;StatusCode >= 400 or !&#42;StatusCode</code>
>
> <span data-ttu-id="6d9f1-340">Этот фильтр возвращает все строки из клиента hello журнала и только строки из hello server и журналах HTTP которых код состояния hello больше 400.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-340">This filter returns all rows from hello client log and only rows from hello server log and HTTP log where hello status code is greater than 400.</span></span> <span data-ttu-id="6d9f1-341">Если применить его toohello представление макета, сгруппированных по ИД запроса клиента и модуль, можно выполнить поиск или войдите в прокрутите hello toofind записи историй, где представлены все три журнала.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-341">If you apply it toohello view layout grouped by client request ID and module, you can search or scroll through hello log entries toofind ones where all three logs are represented.</span></span>   
>
>

### <a name="filter-log-data-toofind-404-errors"></a><span data-ttu-id="6d9f1-342">Отфильтровать ошибки 404 toofind данных журнала</span><span class="sxs-lookup"><span data-stu-id="6d9f1-342">Filter log data toofind 404 errors</span></span>
<span data-ttu-id="6d9f1-343">Активы хранилища Hello включают встроенные фильтры, которые можно использовать toonarrow журнала toofind hello ошибки данных или тенденций, которую вы ищете.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-343">hello Storage Assets include predefined filters that you can use toonarrow log data toofind hello errors or trends you are looking for.</span></span> <span data-ttu-id="6d9f1-344">Далее мы будем применить два фильтра предопределенных:, который фильтрует hello server и журналы трассировки сети для ошибки 404 и которая фильтрует данные hello указанный временной диапазон.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-344">Next, we'll apply two predefined filters: one that filters hello server and network trace logs for 404 errors, and one that filters hello data on a specified time range.</span></span>

1. <span data-ttu-id="6d9f1-345">Отображается окно инструментов hello фильтр представления, если не отображается.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-345">Display hello View Filter tool window if it is not already displayed.</span></span> <span data-ttu-id="6d9f1-346">Выберите на ленте инструментов hello **окна инструментов**, затем **фильтр представления**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-346">On hello toolbar ribbon, select **Tool Windows**, then **View Filter**.</span></span>
2. <span data-ttu-id="6d9f1-347">Выберите в окне фильтра представления hello **библиотеки**и поиска `Azure Storage` toofind hello фильтрует хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-347">In hello View Filter window, select **Library**, and search on `Azure Storage` toofind hello Azure Storage filters.</span></span> <span data-ttu-id="6d9f1-348">Выберите hello фильтр для **404 (не найдено) сообщения из всех журналов**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-348">Select hello filter for **404 (Not Found) messages in all logs**.</span></span>
3. <span data-ttu-id="6d9f1-349">Экран приветствия **библиотеки** меню еще раз, найдите и выделите hello **глобальный фильтр времени**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-349">Display hello **Library** menu again, and locate and select hello **Global Time Filter**.</span></span>
4. <span data-ttu-id="6d9f1-350">Измените hello отметки времени, чтобы отобразить в диапазоне toohello hello фильтра нужно tooview.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-350">Edit hello timestamps shown in hello filter toohello range you wish tooview.</span></span> <span data-ttu-id="6d9f1-351">Это поможет toonarrow hello диапазон tooanalyze данных.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-351">This will help toonarrow hello range of data tooanalyze.</span></span>
5. <span data-ttu-id="6d9f1-352">Фильтр должен появиться примерно toohello приведенном ниже примере.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-352">Your filter should appear similar toohello example below.</span></span> <span data-ttu-id="6d9f1-353">Нажмите кнопку **применить** tooapply hello фильтра toohello анализа сетки.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-353">Click **Apply** tooapply hello filter toohello Analysis Grid.</span></span>

    ```   
    ((AzureStorageLog.StatusCode == 404 || HTTP.StatusCode == 404)) And
    (#Timestamp >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39)
    ```

![Макет представления хранилища Azure](./media/storage-e2e-troubleshooting-classic-portal/404-filtered-errors1.png)

### <a name="analyze-your-log-data"></a><span data-ttu-id="6d9f1-355">Анализ данных журнала</span><span class="sxs-lookup"><span data-stu-id="6d9f1-355">Analyze your log data</span></span>
<span data-ttu-id="6d9f1-356">Теперь, после группировки и фильтрации данных, можно проверить сведения hello отдельных запросов, которые создали ошибки 404.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-356">Now that you have grouped and filtered your data, you can examine hello details of individual requests that generated 404 errors.</span></span> <span data-ttu-id="6d9f1-357">В макете текущее представление hello hello данные группируются по ИД запроса клиента, затем по источник журнала.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-357">In hello current view layout, hello data is grouped by client request ID, then by log source.</span></span> <span data-ttu-id="6d9f1-358">Поскольку мы фильтруется в запросах, где поле StatusCode hello содержит 404, мы рассмотрим только hello сервера и данные трассировки сети, не hello данные журнала клиента.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-358">Since we are filtering on requests where hello StatusCode field contains 404, we'll see only hello server and network trace data, not hello client log data.</span></span>

<span data-ttu-id="6d9f1-359">Приведенный далее рисунок Hello показано конкретный запрос, где операция Get Blob дали 404, поскольку hello большого двоичного объекта не существует.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-359">hello picture below shows a specific request where a Get Blob operation yielded a 404 because hello blob did not exist.</span></span> <span data-ttu-id="6d9f1-360">Обратите внимание, что некоторые столбцы были удалены из hello стандартные представления в порядке toodisplay hello важные данные.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-360">Note that some columns have been removed from hello standard view in order toodisplay hello relevant data.</span></span>

![Отфильтрованные журналы трассировки сети и сервера](./media/storage-e2e-troubleshooting-classic-portal/server-filtered-404-error.png)

<span data-ttu-id="6d9f1-362">Далее мы будем корреляции идентификатор запроса клиента с toosee данных журнала клиента hello какой клиент hello действия заняла, когда произошла ошибка hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-362">Next, we'll correlate this client request ID with hello client log data toosee what actions hello client was taking when hello error happened.</span></span> <span data-ttu-id="6d9f1-363">Можно отобразить новое представление сетки анализ для этого сеанса tooview hello клиента журнала данных, которые откроется на второй вкладке:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-363">You can display a new Analysis Grid view for this session tooview hello client log data, which opens in a second tab:</span></span>

1. <span data-ttu-id="6d9f1-364">Во-первых, скопируйте значение hello hello **ClientRequestId** буфер обмена toohello поля.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-364">First, copy hello value of hello **ClientRequestId** field toohello clipboard.</span></span> <span data-ttu-id="6d9f1-365">Это можно сделать, выбрав либо строки поиска hello **ClientRequestId** поля, щелкните правой кнопкой мыши на значение данных hello и выбрав **копирования «ClientRequestId»**.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-365">You can do this by selecting either row, locating hello **ClientRequestId** field, right-clicking on hello data value, and choosing **Copy 'ClientRequestId'**.</span></span>
2. <span data-ttu-id="6d9f1-366">Выберите на ленте инструментов hello **новое средство просмотра**, а затем выберите **сетки анализа** tooopen вкладку hello новой вкладки отображает все данные в файлы журнала без группирования, фильтрации или правила цвета.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-366">On hello toolbar ribbon, select **New Viewer**, then select **Analysis Grid** tooopen a new tab. hello new tab shows all data in your log files, without grouping, filtering, or color rules.</span></span>
3. <span data-ttu-id="6d9f1-367">Выберите на ленте инструментов hello **разметки представления**, а затем выберите **все столбцы клиента .NET** под hello **хранилища Azure** раздела.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-367">On hello toolbar ribbon, select **View Layout**, then select **All .NET Client Columns** under hello **Azure Storage** section.</span></span> <span data-ttu-id="6d9f1-368">Этот макет в представлении отображаются данные на приветствия клиента журнала, а также hello журналов трассировки сервера и сети.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-368">This view layout shows data from hello client log as well as hello server and network trace logs.</span></span> <span data-ttu-id="6d9f1-369">По умолчанию он отсортирован по hello **MessageNumber** столбца.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-369">By default it is sorted on hello **MessageNumber** column.</span></span>
4. <span data-ttu-id="6d9f1-370">Теперь выполните поиск журнала клиента hello hello клиента, код запроса.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-370">Next, search hello client log for hello client request ID.</span></span> <span data-ttu-id="6d9f1-371">Выберите на ленте инструментов hello **найти сообщения**, затем указать настраиваемый фильтр на идентификатор запроса клиента hello в hello **найти** поля.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-371">On hello toolbar ribbon, select **Find Messages**, then specify a custom filter on hello client request ID in hello **Find** field.</span></span> <span data-ttu-id="6d9f1-372">Используйте следующий синтаксис для hello фильтр, указав собственный идентификатор запроса клиента:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-372">Use this syntax for hello filter, specifying your own client request ID:</span></span>

    ```  
    *ClientRequestId == "398bac41-7725-484b-8a69-2a9e48fc669a"
    ```

<span data-ttu-id="6d9f1-373">Анализатор сообщений находит и выделяет hello первая запись в журнал где условия поиска hello соответствует идентификатору hello клиентского запроса.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-373">Message Analyzer locates and selects hello first log entry where hello search criteria matches hello client request ID.</span></span> <span data-ttu-id="6d9f1-374">В журнале клиента hello, существует несколько записей для каждого идентификатора клиентского запроса, поэтому можно toogroup их на hello **ClientRequestId** toomake поля его проще toosee их все вместе.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-374">In hello client log, there are several entries for each client request ID, so you may want toogroup them on hello **ClientRequestId** field toomake it easier toosee them all together.</span></span> <span data-ttu-id="6d9f1-375">Рисунок Hello ниже показан журнал все сообщения hello в клиенте hello для hello указан идентификатор запроса клиента.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-375">hello picture below shows all of hello messages in hello client log for hello specified client request ID.</span></span>

![Ошибки 404 в журнале клиента](./media/storage-e2e-troubleshooting-classic-portal/client-log-analysis-grid1.png)

<span data-ttu-id="6d9f1-377">С помощью hello данные, отображенные в макеты hello в эти две вкладки, можно анализировать hello запрос данных toodetermine возможной причине ошибки hello.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-377">Using hello data shown in hello view layouts in these two tabs, you can analyze hello request data toodetermine what may have caused hello error.</span></span> <span data-ttu-id="6d9f1-378">Можно также просмотреть запросы, предшествующие этой один toosee, если предыдущее событие могли привести toohello сообщение об ошибке 404.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-378">You can also look at requests that preceded this one toosee if a previous event may have led toohello 404 error.</span></span> <span data-ttu-id="6d9f1-379">Например можно просмотреть записи журнала клиента hello, предшествующие этой toodetermine идентификатор запроса клиента ли hello большой двоичный объект был удален или hello произошла ошибка из-за toohello клиентское приложение вызова CreateIfNotExists API контейнера или большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-379">For example, you can review hello client log entries preceding this client request ID toodetermine whether hello blob may have been deleted, or if hello error was due toohello client application calling a CreateIfNotExists API on a container or blob.</span></span> <span data-ttu-id="6d9f1-380">В журнале клиента hello, можно найти адрес hello большого двоичного объекта в hello **описание** поле; в журнале трассировки сети и сервера hello, эта информация отображается в hello **Сводка** поля.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-380">In hello client log, you can find hello blob's address in hello **Description** field; in hello server and network trace logs, this information appears in hello **Summary** field.</span></span>

<span data-ttu-id="6d9f1-381">Зная hello адрес hello BLOB-объект, который выдавал ошибки hello 404, вы дальнейшего исследования проблемы.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-381">Once you know hello address of hello blob that yielded hello 404 error, you can investigate further.</span></span> <span data-ttu-id="6d9f1-382">Если поиск записи в журнале hello для других сообщений, связанных с операций над hello же больших двоичных объектов, можно проверить, удален ли ранее клиент hello hello сущности.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-382">If you search hello log entries for other messages associated with operations on hello same blob, you can check whether hello client previously deleted hello entity.</span></span>

## <a name="analyze-other-types-of-storage-errors"></a><span data-ttu-id="6d9f1-383">Анализ других типов ошибок хранилища</span><span class="sxs-lookup"><span data-stu-id="6d9f1-383">Analyze other types of storage errors</span></span>
<span data-ttu-id="6d9f1-384">Теперь, когда вы знакомы с данными журнала с помощью tooanalyze анализатор сообщений, можно анализировать другие типы ошибок с помощью представления макеты, правила цвета и поиска и фильтрации.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-384">Now that you are familiar with using Message Analyzer tooanalyze your log data, you can analyze other types of errors using view layouts, color rules, and searching/filtering.</span></span> <span data-ttu-id="6d9f1-385">Hello таблицы ниже перечислены некоторые проблемы могут возникнуть и hello условия фильтра можно использовать toolocate их.</span><span class="sxs-lookup"><span data-stu-id="6d9f1-385">hello tables below lists some issues you may encounter and hello filter criteria you can use toolocate them.</span></span> <span data-ttu-id="6d9f1-386">Дополнительные сведения о создании фильтров и анализатор сообщений hello. Фильтрация языка, в разделе [фильтрации данных сообщения](http://technet.microsoft.com/library/jj819365.aspx).</span><span class="sxs-lookup"><span data-stu-id="6d9f1-386">For more information on constructing filters and hello Message Analyzer filtering language, see [Filtering Message Data](http://technet.microsoft.com/library/jj819365.aspx).</span></span>

| <span data-ttu-id="6d9f1-387">tooInvestigate...</span><span class="sxs-lookup"><span data-stu-id="6d9f1-387">tooInvestigate…</span></span> | <span data-ttu-id="6d9f1-388">Использование выражения фильтра</span><span class="sxs-lookup"><span data-stu-id="6d9f1-388">Use Filter Expression…</span></span> | <span data-ttu-id="6d9f1-389">Выражение применяется tooLog (клиента, сервера и сети, все)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-389">Expression Applies tooLog (Client, Server,   Network, All)</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6d9f1-390">Непредвиденные задержки при доставке сообщений в очередь</span><span class="sxs-lookup"><span data-stu-id="6d9f1-390">Unexpected delays in message delivery on a queue</span></span> |<span data-ttu-id="6d9f1-391">AzureStorageClientDotNetV4.Description содержит "Повторное выполнение неудавшейся операции".</span><span class="sxs-lookup"><span data-stu-id="6d9f1-391">AzureStorageClientDotNetV4.Description   contains "Retrying failed operation."</span></span> |<span data-ttu-id="6d9f1-392">Клиент</span><span class="sxs-lookup"><span data-stu-id="6d9f1-392">Client</span></span> |
| <span data-ttu-id="6d9f1-393">Увеличение HTTP в PercentThrottlingError</span><span class="sxs-lookup"><span data-stu-id="6d9f1-393">HTTP Increase in PercentThrottlingError</span></span> |<span data-ttu-id="6d9f1-394">HTTP.Response.StatusCode == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span><span class="sxs-lookup"><span data-stu-id="6d9f1-394">HTTP.Response.StatusCode   == 500 &#124;&#124; HTTP.Response.StatusCode == 503</span></span> |<span data-ttu-id="6d9f1-395">Сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-395">Network</span></span> |
| <span data-ttu-id="6d9f1-396">Увеличение PercentTimeoutError</span><span class="sxs-lookup"><span data-stu-id="6d9f1-396">Increase in PercentTimeoutError</span></span> |<span data-ttu-id="6d9f1-397">HTTP.Response.StatusCode == 500</span><span class="sxs-lookup"><span data-stu-id="6d9f1-397">HTTP.Response.StatusCode   == 500</span></span> |<span data-ttu-id="6d9f1-398">Сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-398">Network</span></span> |
| <span data-ttu-id="6d9f1-399">Увеличение PercentTimeoutError (все)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-399">Increase in PercentTimeoutError (all)</span></span> |<span data-ttu-id="6d9f1-400">*StatusCode == 500</span><span class="sxs-lookup"><span data-stu-id="6d9f1-400">*StatusCode   == 500</span></span> |<span data-ttu-id="6d9f1-401">Все</span><span class="sxs-lookup"><span data-stu-id="6d9f1-401">All</span></span> |
| <span data-ttu-id="6d9f1-402">Увеличение PercentNetworkError</span><span class="sxs-lookup"><span data-stu-id="6d9f1-402">Increase in PercentNetworkError</span></span> |<span data-ttu-id="6d9f1-403">AzureStorageClientDotNetV4.EventLogEntry.Level < 2</span><span class="sxs-lookup"><span data-stu-id="6d9f1-403">AzureStorageClientDotNetV4.EventLogEntry.Level   < 2</span></span> |<span data-ttu-id="6d9f1-404">Клиент</span><span class="sxs-lookup"><span data-stu-id="6d9f1-404">Client</span></span> |
| <span data-ttu-id="6d9f1-405">Сообщения HTTP 403 (запрещено)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-405">HTTP 403 (Forbidden) messages</span></span> |<span data-ttu-id="6d9f1-406">HTTP.Response.StatusCode == 403</span><span class="sxs-lookup"><span data-stu-id="6d9f1-406">HTTP.Response.StatusCode   == 403</span></span> |<span data-ttu-id="6d9f1-407">Сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-407">Network</span></span> |
| <span data-ttu-id="6d9f1-408">Сообщения HTTP 404 (не найдено)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-408">HTTP 404 (Not found) messages</span></span> |<span data-ttu-id="6d9f1-409">HTTP.Response.StatusCode == 404</span><span class="sxs-lookup"><span data-stu-id="6d9f1-409">HTTP.Response.StatusCode   == 404</span></span> |<span data-ttu-id="6d9f1-410">Сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-410">Network</span></span> |
| <span data-ttu-id="6d9f1-411">404 (все)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-411">404 (all)</span></span> |<span data-ttu-id="6d9f1-412">*StatusCode == 404</span><span class="sxs-lookup"><span data-stu-id="6d9f1-412">*StatusCode   == 404</span></span> |<span data-ttu-id="6d9f1-413">Все</span><span class="sxs-lookup"><span data-stu-id="6d9f1-413">All</span></span> |
| <span data-ttu-id="6d9f1-414">Общие проблемы авторизации подписи доступа (SAS)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-414">Shared Access Signature (SAS) authorization issue</span></span> |<span data-ttu-id="6d9f1-415">AzureStorageLog.RequestStatus == "SASAuthorizationError"</span><span class="sxs-lookup"><span data-stu-id="6d9f1-415">AzureStorageLog.RequestStatus ==  "SASAuthorizationError"</span></span> |<span data-ttu-id="6d9f1-416">Сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-416">Network</span></span> |
| <span data-ttu-id="6d9f1-417">Сообщения HTTP 409 (конфликт)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-417">HTTP 409 (Conflict) messages</span></span> |<span data-ttu-id="6d9f1-418">HTTP.Response.StatusCode == 409</span><span class="sxs-lookup"><span data-stu-id="6d9f1-418">HTTP.Response.StatusCode   == 409</span></span> |<span data-ttu-id="6d9f1-419">Сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-419">Network</span></span> |
| <span data-ttu-id="6d9f1-420">409 (все)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-420">409 (all)</span></span> |<span data-ttu-id="6d9f1-421">*StatusCode == 409</span><span class="sxs-lookup"><span data-stu-id="6d9f1-421">*StatusCode   == 409</span></span> |<span data-ttu-id="6d9f1-422">Все</span><span class="sxs-lookup"><span data-stu-id="6d9f1-422">All</span></span> |
| <span data-ttu-id="6d9f1-423">Низкие значения PercentSuccess или присутствие операций с состоянием транзакции ClientOtherErrors в записях журналов аналитики</span><span class="sxs-lookup"><span data-stu-id="6d9f1-423">Low PercentSuccess or analytics log entries have   operations with transaction status of ClientOtherErrors</span></span> |<span data-ttu-id="6d9f1-424">AzureStorageLog.RequestStatus == "ClientOtherError"</span><span class="sxs-lookup"><span data-stu-id="6d9f1-424">AzureStorageLog.RequestStatus ==   "ClientOtherError"</span></span> |<span data-ttu-id="6d9f1-425">сервер;</span><span class="sxs-lookup"><span data-stu-id="6d9f1-425">Server</span></span> |
| <span data-ttu-id="6d9f1-426">Предупреждение Nagle</span><span class="sxs-lookup"><span data-stu-id="6d9f1-426">Nagle   Warning</span></span> |<span data-ttu-id="6d9f1-427">((AzureStorageLog.EndToEndLatencyMS - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS * 1.5)) and (AzureStorageLog.RequestPacketSize <1460) and (AzureStorageLog.EndToEndLatencyMS - AzureStorageLog.ServerLatencyMS >= 200)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-427">((AzureStorageLog.EndToEndLatencyMS   - AzureStorageLog.ServerLatencyMS) > (AzureStorageLog.ServerLatencyMS *   1.5)) and (AzureStorageLog.RequestPacketSize <1460) and (AzureStorageLog.EndToEndLatencyMS -   AzureStorageLog.ServerLatencyMS >= 200)</span></span> |<span data-ttu-id="6d9f1-428">сервер;</span><span class="sxs-lookup"><span data-stu-id="6d9f1-428">Server</span></span> |
| <span data-ttu-id="6d9f1-429">Диапазон времени в журналах сервера и сети</span><span class="sxs-lookup"><span data-stu-id="6d9f1-429">Range of   time in Server and Network logs</span></span> |<span data-ttu-id="6d9f1-430">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="6d9f1-430">#Timestamp   >= 2014-10-20T16:36:38 and #Timestamp <= 2014-10-20T16:36:39</span></span> |<span data-ttu-id="6d9f1-431">Сервер, сеть</span><span class="sxs-lookup"><span data-stu-id="6d9f1-431">Server, Network</span></span> |
| <span data-ttu-id="6d9f1-432">Диапазон времени в журналах сервера</span><span class="sxs-lookup"><span data-stu-id="6d9f1-432">Range of   time in Server logs</span></span> |<span data-ttu-id="6d9f1-433">AzureStorageLog.Timestamp >= 2014-10-20T16:36:38 and AzureStorageLog.Timestamp <= 2014-10-20T16:36:39</span><span class="sxs-lookup"><span data-stu-id="6d9f1-433">AzureStorageLog.Timestamp   >= 2014-10-20T16:36:38 and AzureStorageLog.Timestamp <=   2014-10-20T16:36:39</span></span> |<span data-ttu-id="6d9f1-434">сервер;</span><span class="sxs-lookup"><span data-stu-id="6d9f1-434">Server</span></span> |

## <a name="next-steps"></a><span data-ttu-id="6d9f1-435">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="6d9f1-435">Next steps</span></span>
<span data-ttu-id="6d9f1-436">Дополнительные сведения о сквозных сценариях устранения ошибок в службы хранилище Azure см. следующие ресурсы:</span><span class="sxs-lookup"><span data-stu-id="6d9f1-436">For more information about troubleshooting end-to-end scenarios in Azure Storage, see these resources:</span></span>

* [<span data-ttu-id="6d9f1-437">Наблюдение, диагностика и устранение неисправностей хранилища Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="6d9f1-437">Monitor, diagnose, and troubleshoot Microsoft Azure Storage</span></span>](storage-monitoring-diagnosing-troubleshooting.md)
* [<span data-ttu-id="6d9f1-438">Аналитика службы хранилища</span><span class="sxs-lookup"><span data-stu-id="6d9f1-438">Storage Analytics</span></span>](http://msdn.microsoft.com/library/azure/hh343270.aspx)
* [<span data-ttu-id="6d9f1-439">Монитор учетной записи хранения в портале Azure hello</span><span class="sxs-lookup"><span data-stu-id="6d9f1-439">Monitor a storage account in hello Azure Portal</span></span>](storage-monitor-storage-account.md)
* [<span data-ttu-id="6d9f1-440">Перенесите данные с помощью командной строки программу AzCopy hello</span><span class="sxs-lookup"><span data-stu-id="6d9f1-440">Transfer data with hello AzCopy command-line utility</span></span>](storage-use-azcopy.md)
* [<span data-ttu-id="6d9f1-441">Руководство по работе с анализатором сообщений (Майкрософт)</span><span class="sxs-lookup"><span data-stu-id="6d9f1-441">Microsoft Message Analyzer Operating Guide</span></span>](http://technet.microsoft.com/library/jj649776.aspx)
