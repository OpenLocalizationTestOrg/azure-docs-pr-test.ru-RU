---
title: "Настройка имени личного домена для конечной точки хранилища BLOB-объектов Azure | Документация Майкрософт"
description: "С помощью портала Azure сопоставьте собственное каноническое имя (CNAME) с конечной точкой хранилища BLOB-объектов в учетной записи хранения Azure."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: aaafd8c5-eacb-49dc-8c8b-3f7011ad5e92
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/25/2017
ms.author: marsma
ms.openlocfilehash: 69e0713ab4221c51b89ec0f1ffedba8b6deea88c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="configure-a-custom-domain-name-for-your-blob-storage-endpoint"></a><span data-ttu-id="2cd33-103">Настройка пользовательского доменного имени для конечной точки хранилища BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="2cd33-103">Configure a custom domain name for your Blob storage endpoint</span></span>

<span data-ttu-id="2cd33-104">Можно настроить пользовательский домен для доступа к BLOB-данным в учетной записи хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="2cd33-104">You can configure a custom domain for accessing blob data in your Azure storage account.</span></span> <span data-ttu-id="2cd33-105">Конечной точкой по умолчанию для хранилища BLOB-объектов является `<storage-account-name>.blob.core.windows.net`.</span><span class="sxs-lookup"><span data-stu-id="2cd33-105">The default endpoint for Blob storage is `<storage-account-name>.blob.core.windows.net`.</span></span> <span data-ttu-id="2cd33-106">После сопоставления личного домена и поддомена, например **www.contoso.com**, с конечной точкой больших двоичных объектов для вашей учетной записи хранения пользователи также смогут, используя этот домен, получать доступ к данным больших двоичных объектов в учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="2cd33-106">If you map a custom domain and subdomain like **www.contoso.com** to the blob endpoint for your storage account, your users can then access blob data in your storage account using that domain.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="2cd33-107">Служба хранилища Azure пока не поддерживает протокол HTTPS для личных доменов.</span><span class="sxs-lookup"><span data-stu-id="2cd33-107">Azure Storage does not yet natively support HTTPS with custom domains.</span></span> <span data-ttu-id="2cd33-108">Тем временем вы можете [использовать Azure CDN для доступа к BLOB-объектам с помощью личных доменов по протоколу HTTPS](./storage-https-custom-domain-cdn.md).</span><span class="sxs-lookup"><span data-stu-id="2cd33-108">You can currently [Use the Azure CDN to access blobs with custom domains over HTTPS](./storage-https-custom-domain-cdn.md).</span></span>
>

<span data-ttu-id="2cd33-109">В следующей таблице приведено несколько примеров URL-адресов для данных больших двоичных объектов, расположенных в учетной записи хранения с именем **mystorageaccount**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-109">The following table shows a few sample URLs for blob data located in a storage account named **mystorageaccount**.</span></span> <span data-ttu-id="2cd33-110">Пользовательский домен, зарегистрированный для этой учетной записи хранения: **www.contoso.com**</span><span class="sxs-lookup"><span data-stu-id="2cd33-110">The custom domain registered for the storage account is **www.contoso.com**:</span></span>

| <span data-ttu-id="2cd33-111">Тип ресурса</span><span class="sxs-lookup"><span data-stu-id="2cd33-111">Resource Type</span></span> | <span data-ttu-id="2cd33-112">URL-адрес по умолчанию</span><span class="sxs-lookup"><span data-stu-id="2cd33-112">Default URL</span></span> | <span data-ttu-id="2cd33-113">URL-адрес личного домена</span><span class="sxs-lookup"><span data-stu-id="2cd33-113">Custom domain URL</span></span> |
| --- | --- | --- |
| <span data-ttu-id="2cd33-114">Учетная запись хранения</span><span class="sxs-lookup"><span data-stu-id="2cd33-114">Storage account</span></span> | <span data-ttu-id="2cd33-115">http://mystorageaccount.blob.core.windows.net</span><span class="sxs-lookup"><span data-stu-id="2cd33-115">http://mystorageaccount.blob.core.windows.net</span></span> | <span data-ttu-id="2cd33-116">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="2cd33-116">http://www.contoso.com</span></span> |
| <span data-ttu-id="2cd33-117">BLOB-объект</span><span class="sxs-lookup"><span data-stu-id="2cd33-117">Blob</span></span> |<span data-ttu-id="2cd33-118">http://mystorageaccount.blob.core.windows.net/mycontainer/myblob</span><span class="sxs-lookup"><span data-stu-id="2cd33-118">http://mystorageaccount.blob.core.windows.net/mycontainer/myblob</span></span> | <span data-ttu-id="2cd33-119">http://www.contoso.com/mycontainer/myblob</span><span class="sxs-lookup"><span data-stu-id="2cd33-119">http://www.contoso.com/mycontainer/myblob</span></span> |
| <span data-ttu-id="2cd33-120">Корневой контейнер</span><span class="sxs-lookup"><span data-stu-id="2cd33-120">Root container</span></span> | <span data-ttu-id="2cd33-121">http://mystorageaccount.blob.core.windows.net/myblob или http://mystorageaccount.blob.core.windows.net/$root/myblob</span><span class="sxs-lookup"><span data-stu-id="2cd33-121">http://mystorageaccount.blob.core.windows.net/myblob or http://mystorageaccount.blob.core.windows.net/$root/myblob</span></span>| <span data-ttu-id="2cd33-122">http://www.contoso.com/myblob или http://www.contoso.com/$root/myblob</span><span class="sxs-lookup"><span data-stu-id="2cd33-122">http://www.contoso.com/myblob or http://www.contoso.com/$root/myblob</span></span> |

## <a name="direct-vs-intermediary-domain-mapping"></a><span data-ttu-id="2cd33-123">Прямое и промежуточное сопоставление доменов</span><span class="sxs-lookup"><span data-stu-id="2cd33-123">Direct vs. intermediary domain mapping</span></span>

<span data-ttu-id="2cd33-124">Вы можете указать личный домен для конечной точки большого двоичного объекта в учетной записи хранения двумя способами: прямое сопоставление CNAME и с помощью промежуточного поддомена *asverify*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-124">There are two ways to point your custom domain to the blob endpoint for your storage account: direct CNAME mapping, and using the *asverify* intermediary subdomain.</span></span>

### <a name="direct-cname-mapping"></a><span data-ttu-id="2cd33-125">Прямое сопоставление CNAME</span><span class="sxs-lookup"><span data-stu-id="2cd33-125">Direct CNAME mapping</span></span>

<span data-ttu-id="2cd33-126">Первым и самым простым методом является создание записи канонического имени (CNAME), сопоставляющей личный домен и поддомен непосредственно с конечной точкой больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="2cd33-126">The first, and simplest, method is to create a canonical name (CNAME) record that maps your custom domain and subdomain directly to the blob endpoint.</span></span> <span data-ttu-id="2cd33-127">Запись CNAME — это компонент службы доменных имен (DNS), позволяющий сопоставить исходный и конечный домены.</span><span class="sxs-lookup"><span data-stu-id="2cd33-127">A CNAME record is a domain name system (DNS) feature that maps a source domain to a destination domain.</span></span> <span data-ttu-id="2cd33-128">В этом случае исходным доменом является ваш личный домен и поддомен, например *www.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-128">In this case, the source domain is your own custom domain and subdomain, for example *www.contoso.com*.</span></span> <span data-ttu-id="2cd33-129">Конечный домен является конечной точкой службы BLOB-объектов, например *mystorageaccount.blob.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-129">The destination domain is your Blob service endpoint, for example *mystorageaccount.blob.core.windows.net*.</span></span>

<span data-ttu-id="2cd33-130">Прямой метод рассматривается в разделе [Регистрация личного домена](#register-a-custom-domain).</span><span class="sxs-lookup"><span data-stu-id="2cd33-130">The direct method is covered in [Register a custom domain](#register-a-custom-domain).</span></span>

### <a name="intermediary-mapping-with-asverify"></a><span data-ttu-id="2cd33-131">Промежуточное сопоставление с помощью *asverify*</span><span class="sxs-lookup"><span data-stu-id="2cd33-131">Intermediary mapping with *asverify*</span></span>

<span data-ttu-id="2cd33-132">Во втором методе также применяются записи CNAME, но сначала используется специальный поддомен **asverify**, распознаваемый Azure, который позволяет избежать простоя.</span><span class="sxs-lookup"><span data-stu-id="2cd33-132">The second method also uses CNAME records, but first employs a special subdomain recognized by Azure to avoid downtime: **asverify**.</span></span>

<span data-ttu-id="2cd33-133">Однако процесс сопоставления личного домена с конечной точкой большого двоичного объекта приводит к краткому периоду простоя домена на время его регистрации на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2cd33-133">The process of mapping your custom domain to a blob endpoint can result in a brief period of downtime for the domain while you are registering it in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="2cd33-134">Если личный домен в это время поддерживает приложение с Соглашением об уровне обслуживания (SLA), не допускающим простоя, то в качестве промежуточного этапа регистрации можно использовать поддомен Azure *asverify*,</span><span class="sxs-lookup"><span data-stu-id="2cd33-134">If your custom domain is currently supporting an application with a service-level agreement (SLA) that requires zero downtime, then you can use the Azure *asverify* subdomain as an intermediate registration step.</span></span> <span data-ttu-id="2cd33-135">обеспечивающий доступ пользователей к вашему домену во время сопоставления DNS.</span><span class="sxs-lookup"><span data-stu-id="2cd33-135">This intermediate step ensures users are able to access your domain while the DNS mapping takes place.</span></span>

<span data-ttu-id="2cd33-136">Промежуточный метод рассматривается в разделе [Регистрация личного домена для учетной записи хранения с помощью промежуточного поддомена *asverify*](#register-a-custom-domain-using-the-asverify-subdomain).</span><span class="sxs-lookup"><span data-stu-id="2cd33-136">The intermediary method is covered in [Register a custom domain using the *asverify* subdomain](#register-a-custom-domain-using-the-asverify-subdomain).</span></span>

## <a name="register-a-custom-domain"></a><span data-ttu-id="2cd33-137">Регистрация личного домена</span><span class="sxs-lookup"><span data-stu-id="2cd33-137">Register a custom domain</span></span>
<span data-ttu-id="2cd33-138">Эта процедура используется для регистрации личного домена, если допускается кратковременная недоступность домена для пользователей домена или если на личном домене в данный момент не размещается никакое приложение.</span><span class="sxs-lookup"><span data-stu-id="2cd33-138">Use this procedure to register your custom domain if you have no concerns about the domain being briefly unavailable to your users, or if your custom domain is not currently hosting an application.</span></span>

<span data-ttu-id="2cd33-139">Если личный домен поддерживает приложение, не допускающее простоя, то следует использовать процедуру, описанную в разделе [Регистрация личного домена для учетной записи хранения с помощью промежуточного поддомена *asverify*](#register-a-custom-domain-using-the-asverify-subdomain).</span><span class="sxs-lookup"><span data-stu-id="2cd33-139">If your custom domain is currently supporting an application that cannot have any downtime, follow the procedure outlined in [Register a custom domain using the *asverify* subdomain](#register-a-custom-domain-using-the-asverify-subdomain).</span></span>

<span data-ttu-id="2cd33-140">Чтобы настроить имя личного домена, необходимо создать запись CNAME в DNS.</span><span class="sxs-lookup"><span data-stu-id="2cd33-140">To configure a custom domain name, you must create a new CNAME record in DNS.</span></span> <span data-ttu-id="2cd33-141">Запись CNAME определяет псевдоним для имени домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-141">The CNAME record specifies an alias for a domain name.</span></span> <span data-ttu-id="2cd33-142">В этом случае она сопоставляет адрес личного домена с конечной точкой хранилища BLOB-объектов для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="2cd33-142">In this case, it maps the address of your custom domain to the Blob storage endpoint for your storage account.</span></span>

<span data-ttu-id="2cd33-143">Как правило, можно управлять параметрами DNS домена на веб-сайте регистратора домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-143">Typically, you can manage your domain's DNS settings on your domain registrar's website.</span></span> <span data-ttu-id="2cd33-144">Каждый регистратор имеет похожий, но немного отличный способ указания записи CNAME, хотя используется одна и та же концепция.</span><span class="sxs-lookup"><span data-stu-id="2cd33-144">Each registrar has a similar but slightly different method of specifying a CNAME record, but the concept is the same.</span></span> <span data-ttu-id="2cd33-145">Некоторые базовые пакеты регистрации домена не предлагают настройки DNS, поэтому может потребоваться обновить пакет регистрации домена, прежде чем создавать запись CNAME.</span><span class="sxs-lookup"><span data-stu-id="2cd33-145">Some basic domain registration packages do not offer DNS configuration, so you may need to upgrade your domain registration package before you can create the CNAME record.</span></span>

1. <span data-ttu-id="2cd33-146">Войдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2cd33-146">Navigate to your storage account in the [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="2cd33-147">В колонке меню в разделе **Служба BLOB-объектов** выберите **Личный домен**, чтобы открыть колонку *Личный домен*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-147">Under **BLOB SERVICE** on the menu blade, select **Custom domain** to open the *Custom domain* blade.</span></span>
1. <span data-ttu-id="2cd33-148">Войдите на веб-сайт своего регистратора и перейдите на страницу управления DNS.</span><span class="sxs-lookup"><span data-stu-id="2cd33-148">Log on to your domain registrar's website and go to the page for managing DNS.</span></span> <span data-ttu-id="2cd33-149">Это может быть такой раздел, как **Доменное имя**, **DNS** или **Управление сервером доменных имен**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-149">You might find this in a section such as **Domain Name**, **DNS**, or **Name Server Management**.</span></span>
1. <span data-ttu-id="2cd33-150">Найдите раздел управления записями CNAME.</span><span class="sxs-lookup"><span data-stu-id="2cd33-150">Find the section for managing CNAMEs.</span></span> <span data-ttu-id="2cd33-151">Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-151">You may have to go to an advanced settings page and look for the words **CNAME**, **Alias**, or **Subdomains**.</span></span>
1. <span data-ttu-id="2cd33-152">Создайте запись CNAME и укажите псевдоним поддомена, например **www** или **photos**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-152">Create a new CNAME record and provide a subdomain alias such as **www** or **photos**.</span></span> <span data-ttu-id="2cd33-153">Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **mystorageaccount.blob.core.windows.net** (где *mystorageaccount* — имя вашей учетной записи хранения).</span><span class="sxs-lookup"><span data-stu-id="2cd33-153">Then provide a host name, which is your Blob service endpoint, in the format **mystorageaccount.blob.core.windows.net** (where *mystorageaccount* is the name of your storage account).</span></span> <span data-ttu-id="2cd33-154">Имя узла отображается в первом элементе колонки *Личный домен* на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2cd33-154">The host name to use appears in item #1 of the *Custom domain* blade in the [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="2cd33-155">На [портале Azure](https://portal.azure.com) в колонке *Личный домен* в текстовом поле введите имя личного домена, включая поддомен.</span><span class="sxs-lookup"><span data-stu-id="2cd33-155">In the text box on the *Custom domain* blade in the [Azure portal](https://portal.azure.com), enter the name of your custom domain, including the subdomain.</span></span> <span data-ttu-id="2cd33-156">Например, если домен — **contoso.com** и ваш псевдоним поддомена — **www**, введите **www.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-156">For example, if your domain is **contoso.com** and your subdomain alias is **www**, enter **www.contoso.com**.</span></span> <span data-ttu-id="2cd33-157">Если используется поддомен **photos**, введите **photos.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-157">If your subdomain is **photos**, enter **photos.contoso.com**.</span></span> <span data-ttu-id="2cd33-158">Поддомен является *обязательным*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-158">The subdomain is *required*.</span></span>
1. <span data-ttu-id="2cd33-159">В колонке **Личный домен** выберите *Сохранить*, чтобы зарегистрировать личный домен.</span><span class="sxs-lookup"><span data-stu-id="2cd33-159">Select **Save** on the *Custom domain* blade to register your custom domain.</span></span> <span data-ttu-id="2cd33-160">Если регистрация прошла успешно, появится уведомление портала о том, что учетная запись хранения успешно обновлена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-160">If the registration is successful, you will see a portal notification that your storage account was successfully updated.</span></span>

<span data-ttu-id="2cd33-161">Как только ваша новая запись CNAME распространится через DNS, пользователи смогут просматривать данные больших двоичных объектов с помощью личного домена при наличии соответствующих разрешений.</span><span class="sxs-lookup"><span data-stu-id="2cd33-161">Once your new CNAME record has propagated through DNS, your users can view blob data by using your custom domain, so long as they have the appropriate permissions.</span></span>

## <a name="register-a-custom-domain-using-the-asverify-subdomain"></a><span data-ttu-id="2cd33-162">Регистрация личного домена с помощью поддомена *asverify*</span><span class="sxs-lookup"><span data-stu-id="2cd33-162">Register a custom domain using the *asverify* subdomain</span></span>
<span data-ttu-id="2cd33-163">Эта процедура используется для регистрации пользовательского домена, который в данное время поддерживает приложения с соглашением об уровне обслуживания, запрещающим простои.</span><span class="sxs-lookup"><span data-stu-id="2cd33-163">Use this procedure to register your custom domain if your custom domain is currently supporting an application with an SLA that requires that there be no downtime.</span></span> <span data-ttu-id="2cd33-164">Создав запись CNAME, указывающую с `asverify.<subdomain>.<customdomain>` на `asverify.<storageaccount>.blob.core.windows.net`, можно выполнить предварительную регистрацию домена в Azure.</span><span class="sxs-lookup"><span data-stu-id="2cd33-164">By creating a CNAME that points from `asverify.<subdomain>.<customdomain>` to `asverify.<storageaccount>.blob.core.windows.net`, you can pre-register your domain with Azure.</span></span> <span data-ttu-id="2cd33-165">Затем можно создать вторую запись CNAME, указывающую c `<subdomain>.<customdomain>` на `<storageaccount>.blob.core.windows.net`. С этого момента трафик для личного домена будет направляться в конечную точку большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="2cd33-165">You can then create a second CNAME that points from `<subdomain>.<customdomain>` to `<storageaccount>.blob.core.windows.net`, at which point traffic to your custom domain will be directed to your blob endpoint.</span></span>

<span data-ttu-id="2cd33-166">Поддомен **asverify** представляет собой специальный поддомен, распознаваемый Azure.</span><span class="sxs-lookup"><span data-stu-id="2cd33-166">The **asverify** subdomain is a special subdomain recognized by Azure.</span></span> <span data-ttu-id="2cd33-167">Добавляя `asverify` в свой поддомен, вы разрешаете Azure распознавать ваш пользовательский домен без изменения DNS-записи для этого домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-167">By prepending `asverify` to your own subdomain, you permit Azure to recognize your custom domain without modifying the DNS record for the domain.</span></span> <span data-ttu-id="2cd33-168">После изменения записи DNS для домена она будет без простоя сопоставлена с конечной точкой большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="2cd33-168">When you do modify the DNS record for the domain, it will be mapped to the blob endpoint with no downtime.</span></span>

1. <span data-ttu-id="2cd33-169">Войдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2cd33-169">Navigate to your storage account in the [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="2cd33-170">В колонке меню в разделе **Служба BLOB-объектов** выберите **Личный домен**, чтобы открыть колонку *Личный домен*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-170">Under **BLOB SERVICE** on the menu blade, select **Custom domain** to open the *Custom domain* blade.</span></span>
1. <span data-ttu-id="2cd33-171">Войдите на веб-сайт своего поставщика DNS и перейдите на страницу управления DNS.</span><span class="sxs-lookup"><span data-stu-id="2cd33-171">Log on to your DNS provider's website and go to the page for managing DNS.</span></span> <span data-ttu-id="2cd33-172">Это может быть такой раздел, как **Доменное имя**, **DNS** или **Управление сервером доменных имен**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-172">You might find this in a section such as **Domain Name**, **DNS**, or **Name Server Management**.</span></span>
1. <span data-ttu-id="2cd33-173">Найдите раздел управления записями CNAME.</span><span class="sxs-lookup"><span data-stu-id="2cd33-173">Find the section for managing CNAMEs.</span></span> <span data-ttu-id="2cd33-174">Может понадобиться перейти на страницу дополнительных параметров и найти слова **CNAME**, **Псевдоним** или **Поддомены**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-174">You may have to go to an advanced settings page and look for the words **CNAME**, **Alias**, or **Subdomains**.</span></span>
1. <span data-ttu-id="2cd33-175">Создайте запись CNAME и укажите псевдоним поддомена, который содержит поддомен *asverify*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-175">Create a new CNAME record, and provide a subdomain alias that includes the *asverify* subdomain.</span></span> <span data-ttu-id="2cd33-176">Например, **asverify.www** или **asverify.photos**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-176">For example, **asverify.www** or **asverify.photos**.</span></span> <span data-ttu-id="2cd33-177">Введите имя узла, являющегося конечной точкой службы BLOB-объектов, в формате **asverify.mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения).</span><span class="sxs-lookup"><span data-stu-id="2cd33-177">Then provide a host name, which is your Blob service endpoint, in the format **asverify.mystorageaccount.blob.core.windows.net** (where **mystorageaccount** is the name of your storage account).</span></span> <span data-ttu-id="2cd33-178">Имя узла отображается во втором элементе колонки *Личный домен* на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2cd33-178">The host name to use appears in item #2 of the *Custom domain* blade in the [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="2cd33-179">На [портале Azure](https://portal.azure.com) в колонке *Личный домен* в текстовом поле введите имя личного домена, включая поддомен.</span><span class="sxs-lookup"><span data-stu-id="2cd33-179">In the text box on the *Custom domain* blade in the [Azure portal](https://portal.azure.com), enter the name of your custom domain, including the subdomain.</span></span> <span data-ttu-id="2cd33-180">Не включайте *asverify*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-180">Do not include *asverify*.</span></span> <span data-ttu-id="2cd33-181">Например, если домен — **contoso.com** и ваш псевдоним поддомена — **www**, введите **www.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-181">For example, if your domain is **contoso.com** and your subdomain alias is **www**, enter **www.contoso.com**.</span></span> <span data-ttu-id="2cd33-182">Если используется поддомен **photos**, введите **photos.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-182">If your subdomain is **photos**, enter **photos.contoso.com**.</span></span> <span data-ttu-id="2cd33-183">Поддомен является обязательным.</span><span class="sxs-lookup"><span data-stu-id="2cd33-183">The subdomain is required.</span></span>
1. <span data-ttu-id="2cd33-184">Выберите флажок **Использовать непрямую проверку CNAME**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-184">Select the **Use indirect CNAME validation** checkbox.</span></span>
1. <span data-ttu-id="2cd33-185">В колонке **Личный домен** выберите *Сохранить*, чтобы зарегистрировать личный домен.</span><span class="sxs-lookup"><span data-stu-id="2cd33-185">Select **Save** on the *Custom domain* blade to register your custom domain.</span></span> <span data-ttu-id="2cd33-186">Если регистрация прошла успешно, появится уведомление портала о том, что учетная запись хранения успешно обновлена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-186">If the registration is successful, you will see a portal notification stating that your storage account was successfully updated.</span></span> <span data-ttu-id="2cd33-187">На этом этапе ваш пользовательский домен был проверен Azure, но трафик, идущий в ваш домен, еще не маршрутизирован в вашу учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="2cd33-187">At this point, your custom domain has been verified by Azure, but traffic to your domain is not yet being routed to your storage account.</span></span>
1. <span data-ttu-id="2cd33-188">Вернитесь на веб-сайт поставщика DNS и создайте другую запись CNAME, сопоставляющую поддомен с конечной точкой службы BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="2cd33-188">Return to your DNS provider's website, and create another CNAME record that maps your subdomain to your Blob service endpoint.</span></span> <span data-ttu-id="2cd33-189">Например, можно указать дочерний домен как **www** или **photos** (без *asverify*), а имя узла как **mystorageaccount.blob.core.windows.net** (где **mystorageaccount** — имя вашей учетной записи хранения).</span><span class="sxs-lookup"><span data-stu-id="2cd33-189">For example, specify the subdomain as **www** or **photos** (without the *asverify*), and the hostname as **mystorageaccount.blob.core.windows.net** (where **mystorageaccount** is the name of your storage account).</span></span> <span data-ttu-id="2cd33-190">Это действие завершает регистрацию пользовательского домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-190">With this step, the registration of your custom domain is complete.</span></span>
1. <span data-ttu-id="2cd33-191">Наконец, можно удалить запись CNAME, содержащую поддомен **asverify**, так как она была необходима только в качестве промежуточного шага.</span><span class="sxs-lookup"><span data-stu-id="2cd33-191">Finally, you can delete the CNAME record you created containing the **asverify** subdomain, as it was necessary only as an intermediary step.</span></span>

<span data-ttu-id="2cd33-192">Как только ваша новая запись CNAME распространится через DNS, пользователи смогут просматривать данные больших двоичных объектов с помощью личного домена при наличии соответствующих разрешений.</span><span class="sxs-lookup"><span data-stu-id="2cd33-192">Once your new CNAME record has propagated through DNS, your users can view blob data by using your custom domain, so long as they have the appropriate permissions.</span></span>

## <a name="test-your-custom-domain"></a><span data-ttu-id="2cd33-193">Проверка личного домена</span><span class="sxs-lookup"><span data-stu-id="2cd33-193">Test your custom domain</span></span>

<span data-ttu-id="2cd33-194">Чтобы подтвердить, что личный домен действительно сопоставлен с конечной точкой службы BLOB-объектов, создайте большой двоичный объект в общедоступном контейнере учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="2cd33-194">To confirm your custom domain is indeed mapped to your Blob service endpoint, create a blob in a public container within your storage account.</span></span> <span data-ttu-id="2cd33-195">Затем, чтобы получить доступ к этому BLOB-объекту, используйте в веб-браузере URI следующего формата:</span><span class="sxs-lookup"><span data-stu-id="2cd33-195">Then, in a web browser, use a URI in the following format to access the blob:</span></span>

`http://<subdomain.customdomain>/<mycontainer>/<myblob>`

<span data-ttu-id="2cd33-196">Например, можно использовать следующий URI для доступа к веб-форме в контейнере **myforms** на личном поддомене **photos.contoso.com**:</span><span class="sxs-lookup"><span data-stu-id="2cd33-196">For example, you might use the following URI to access a web form in the **myforms** container in the **photos.contoso.com** custom subdomain:</span></span>

`http://photos.contoso.com/myforms/applicationform.htm`

## <a name="deregister-a-custom-domain"></a><span data-ttu-id="2cd33-197">Отмена регистрации личного домена</span><span class="sxs-lookup"><span data-stu-id="2cd33-197">Deregister a custom domain</span></span>

<span data-ttu-id="2cd33-198">Чтобы отменить регистрацию личного домена для конечной точки хранилища BLOB-объектов, воспользуйтесь одной из следующих процедур.</span><span class="sxs-lookup"><span data-stu-id="2cd33-198">To deregister a custom domain for your Blob storage endpoint, use one of the following procedures.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="2cd33-199">Портал Azure</span><span class="sxs-lookup"><span data-stu-id="2cd33-199">Azure portal</span></span>

<span data-ttu-id="2cd33-200">Выполните следующие действия на портале Azure, чтобы удалить настройку личного домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-200">Perform the following in the Azure portal to remove the custom domain setting:</span></span>

1. <span data-ttu-id="2cd33-201">Войдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="2cd33-201">Navigate to your storage account in the [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="2cd33-202">В колонке меню в разделе **Служба BLOB-объектов** выберите **Личный домен**, чтобы открыть колонку *Личный домен*.</span><span class="sxs-lookup"><span data-stu-id="2cd33-202">Under **BLOB SERVICE** on the menu blade, select **Custom domain** to open the *Custom domain* blade.</span></span>
1. <span data-ttu-id="2cd33-203">Очистите содержимое текстового поля, в котором указано имя вашего личного домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-203">Clear the contents of the text box containing your custom domain name.</span></span>
1. <span data-ttu-id="2cd33-204">Нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="2cd33-204">Select the **Save** button.</span></span>

<span data-ttu-id="2cd33-205">После успешного удаления личного домена появится уведомление портала о том, что ваша учетная запись хранения успешно обновлена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-205">When the custom domain has been removed successfully, you will see a portal notification stating that your storage account was successfully updated.</span></span>

### <a name="azure-cli-20"></a><span data-ttu-id="2cd33-206">Azure CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="2cd33-206">Azure CLI 2.0</span></span>

<span data-ttu-id="2cd33-207">Воспользуйтесь командой интерфейса командной строки [az storage account update](https://docs.microsoft.com/cli/azure/storage/account#update) и укажите пустую строку (`""`) в качестве значения аргумента `--custom-domain`, чтобы отменить регистрацию личного домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-207">Use the [az storage account update](https://docs.microsoft.com/cli/azure/storage/account#update) CLI command and specify an empty string (`""`) for the `--custom-domain` argument value to remove a custom domain registration.</span></span>

* <span data-ttu-id="2cd33-208">Формат команды:</span><span class="sxs-lookup"><span data-stu-id="2cd33-208">Command format:</span></span>

  ```azurecli
  az storage account update \
      --name <storage-account-name> \
      --resource-group <resource-group-name> \
      --custom-domain ""
  ```

* <span data-ttu-id="2cd33-209">Пример команды:</span><span class="sxs-lookup"><span data-stu-id="2cd33-209">Command example:</span></span>

  ```azurecli
  az storage account update \
      --name mystorageaccount \
      --resource-group myresourcegroup \
      --custom-domain ""
  ```

### <a name="powershell"></a><span data-ttu-id="2cd33-210">PowerShell</span><span class="sxs-lookup"><span data-stu-id="2cd33-210">PowerShell</span></span>

<span data-ttu-id="2cd33-211">Воспользуйтесь командлетом PowerShell [Set-AzureRmStorageAccount](/powershell/module/azurerm.storage/set-azurermstorageaccount) и укажите пустую строку (`""`) для значения аргумента `-CustomDomainName`, чтобы отменить регистрацию личного домена.</span><span class="sxs-lookup"><span data-stu-id="2cd33-211">Use the [Set-AzureRmStorageAccount](/powershell/module/azurerm.storage/set-azurermstorageaccount) PowerShell cmdlet and specify an empty string (`""`) for the `-CustomDomainName` argument value to remove a custom domain registration.</span></span>

* <span data-ttu-id="2cd33-212">Формат команды:</span><span class="sxs-lookup"><span data-stu-id="2cd33-212">Command format:</span></span>

  ```powershell
  Set-AzureRmStorageAccount `
      -ResourceGroupName "<resource-group-name>" `
      -AccountName "<storage-account-name>" `
      -CustomDomainName ""
  ```

* <span data-ttu-id="2cd33-213">Пример команды:</span><span class="sxs-lookup"><span data-stu-id="2cd33-213">Command example:</span></span>

  ```powershell
  Set-AzureRmStorageAccount `
      -ResourceGroupName "myresourcegroup" `
      -AccountName "mystorageaccount" `
      -CustomDomainName ""
  ```

## <a name="next-steps"></a><span data-ttu-id="2cd33-214">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="2cd33-214">Next steps</span></span>
* [<span data-ttu-id="2cd33-215">Сопоставление содержимого Azure CDN с пользовательским доменом</span><span class="sxs-lookup"><span data-stu-id="2cd33-215">Map a custom domain to an Azure Content Delivery Network (CDN) endpoint</span></span>](../cdn/cdn-map-content-to-custom-domain.md)
* [<span data-ttu-id="2cd33-216">Использование Azure CDN для доступа к BLOB-объектам с помощью личных доменов по протоколу HTTPS</span><span class="sxs-lookup"><span data-stu-id="2cd33-216">Using the Azure CDN to access blobs with custom domains over HTTPS</span></span>](./storage-https-custom-domain-cdn.md)
