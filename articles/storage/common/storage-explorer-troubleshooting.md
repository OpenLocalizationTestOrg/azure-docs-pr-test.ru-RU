---
title: "Руководство по устранению неполадок в обозревателе хранилищ Azure | Документы Майкрософт"
description: "Обзор двух функций отладки Azure"
services: virtual-machines
documentationcenter: 
author: Deland-Han
manager: cshepard
editor: 
ms.assetid: 
ms.service: virtual-machines
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: troubleshooting
ms.date: 09/08/2017
ms.author: delhan
ms.openlocfilehash: 3187939fa813f941c2fe12a359df474a6c487c71
ms.sourcegitcommit: b854df4fc66c73ba1dd141740a2b348de3e1e028
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/04/2017
---
# <a name="azure-storage-explorer-troubleshooting-guide"></a>Руководство по устранению неполадок в обозревателе хранилищ Azure

Microsoft Azure Storage Explorer (предварительная версия) — это автономное приложение, позволяющее легко работать с данными из службы хранилища Azure на платформе Windows, macOS и Linux. Приложение может подключаться к учетным записям хранения, размещенным в Azure, Sovereign Clouds и Azure Stack.

В этом руководстве приведены решения для распространенных проблем, возникающих с обозревателем хранилищ.

## <a name="sign-in-issues"></a>Проблемы входа

Поддерживаются только учетные записи Azure Active Directory (AAD). При использовании учетной записи ADFS предполагается, что вход в обозреватель хранилища не будет работать. Прежде всего, попытайтесь перезапустить приложение: возможно, это поможет решить проблему.

### <a name="error-self-signed-certificate-in-certificate-chain"></a>Ошибка "Самозаверяющий сертификат в цепочке сертификатов"

Существует несколько причин возникновения этой ошибки, однако наиболее распространены две причины.

1. Приложение подключается с помощью "прозрачного прокси-сервера". Это означает, что сервер (например, сервер вашей компании) перехватывает трафик HTTPS, расшифровывает его, а затем шифрует с помощью самозаверяющего сертификата.

2. Работающее приложение, такое как антивирусная программа, вставляет самозаверяющий сертификат SSL в получаемые сообщения HTTPS.

Когда обозреватель хранилищ обнаруживает один из выпусков, он уже не может определить, изменено ли полученное сообщение HTTPS. Если у вас есть копия самозаверяющего сертификата, вы можете настроить доверие к нему в обозревателе хранилищ. Если вы не знаете, какой из компонентов вставляет сертификат, выполните следующие действия, чтобы найти его.

1. Установите Open SSL.

    - [Windows](https://slproweb.com/products/Win32OpenSSL.html) (любой из облегченных версий должно быть достаточно)

    - MAC и Linux: этот компонент должен быть включен в операционную систему

2. Запустите Open SSL.

    - Windows: откройте каталог установки, щелкните **/bin/**, а затем дважды щелкните **openssl.exe**.
    - MAC и Linux: запустите **openssl** из терминала.

3. Выполните команду s_client -showcerts -connect microsoft.com:443

4. Найдите самозаверяющие сертификаты. Если вы не знаете, какие из сертификатов являются самозаверяющими, найдите сертификаты, в которых субъект ("s:") и издатель ("i:") совпадают.

5. Когда вы найдете самозаверяющие сертификаты, для каждого из них скопируйте и вставьте все содержимое от **---BEGIN CERTIFICATE---** до **---END CERTIFICATE---** включительно в новый CER-файл.

6. Откройте обозреватель хранилищ, щелкните **Изменить** > **SSL-сертификаты** > **Импорт сертификатов**, а затем с помощью средства выбора файлов найдите, выберите и откройте созданные CER-файлы.

Если вам не удалось найти самозаверяющие сертификаты, используя приведенные выше действия, свяжитесь с нами через средство обратной связи для получения дополнительных сведений.

### <a name="unable-to-retrieve-subscriptions"></a>Не удается получить подписки

Если не удается получить подписки после успешного входа, выполните следующие действия для устранения этой проблемы.

- Убедитесь, что учетная запись имеет доступ к подпискам, выполнив вход на портал Azure.

- Убедитесь, что вы выполнили вход в правильную среду (Azure, Azure для Китая, Azure для Германии, Azure для государственных организаций США, пользовательскую среду или Azure Stack).

- При подключении через прокси-сервер убедитесь, что прокси-сервер обозревателя хранилищ настроен правильно.

- Попробуйте удалить и снова добавить учетную запись.

- Попробуйте удалить следующие файлы из корневого каталога (то есть C:\Users\ContosoUser), а затем снова добавить учетную запись:

    - adalcache-файл;

    - devaccounts-файл;

    - extaccounts-файл.

- При выполнении входа проверьте наличие сообщений об ошибках в консоли средств разработчика (нажав клавишу F12):

![средства разработчика](./media/storage-explorer-troubleshooting/4022501_en_2.png)

### <a name="unable-to-see-the-authentication-page"></a>Не отображается страница аутентификации

Если страница аутентификации не отображается, выполните следующие действия для устранения этой проблемы.

- В зависимости от скорости подключения загрузка страницы входа может занять некоторое время. Подождите по крайней мере одну минуту, прежде чем закрывать диалоговое окно аутентификации.

- При подключении через прокси-сервер убедитесь, что прокси-сервер обозревателя хранилищ настроен правильно.

- Просмотрите консоль разработчика, нажав клавишу F12. Просмотрите ответы от консоли разработчика: возможно, вам удастся понять, почему страница аутентификации не работает.

### <a name="cannot-remove-account"></a>Невозможно удалить учетную запись

Если не удается удалить учетную запись или при щелчке по ссылке повторной аутентификации ничего не происходит, выполните следующие действия для устранения этой проблемы.

- Попробуйте удалить следующие файлы из корневого каталога, а затем снова добавить учетную запись:

    - adalcache-файл;

    - devaccounts-файл;

    - extaccounts-файл.

- Если вы хотите удалить подключенные ресурсы хранилища SAS, удалите следующие файлы:

    - папку %AppData%/StorageExplorer в Windows;

    - /Users/<ваше_имя>/Library/Applicaiton SUpport/StorageExplorer в Mac;

    - ~/.config/StorageExplorer в Linux.

> [!NOTE]
>  Если вы удалите эти файлы, вам потребуется повторно ввести все учетные данные.

## <a name="proxy-issues"></a>Проблемы с прокси-сервером

Во-первых, убедитесь, что вы правильно указали следующие сведения:

- URL-адрес прокси-сервера и номер порта;

- имя пользователя и пароль, если этого требует прокси-сервер.

### <a name="common-solutions"></a>Распространенные решения

Если у вас по-прежнему возникают проблемы, выполните следующие действия для их устранения.

- Если можно подключиться к Интернету без использования прокси-сервера, проверьте, будет ли обозреватель хранилищ работать с отключенными параметрами прокси-сервера. Если это так, возможно, проблема связана с параметрами прокси-сервера. Обратитесь к администратору прокси-сервера, чтобы определить проблему.

- Убедитесь, что другие приложения, использующие прокси-сервер, работают корректно.

- Проверьте, можно ли подключиться к порталу Microsoft Azure с помощью веб-браузера.

- Убедитесь, что вы можете получать ответы от конечных точек службы. Введите один из URL-адресов конечной точки в браузере. Если вам удается подключиться, вы должны получить ответ InvalidQueryParameterValue или аналогичный XML-ответ.

- Если другие пользователи также используют обозреватель хранилищ с вашим прокси-сервером, проверьте, могут ли они подключаться. Если у них не возникает проблем с подключением, возможно, вам потребуется обратиться к администратору прокси-сервера.

### <a name="tools-for-diagnosing-issues"></a>Инструменты для выявления проблем

Если вы используете средства работы с сетью, такие как Fiddler для Windows, можно попробовать диагностировать проблемы следующим образом.

- Если вам необходимо подключаться через прокси-сервер, может потребоваться настроить сетевые средства для подключения через прокси-сервер.

- Проверьте номер порта, используемый средством для работы с сетью.

- Введите URL-адрес локального узла и номер порта сетевого средства как параметры прокси-сервера в обозревателе хранилищ. Если выполнить эту процедуру правильно, средство для работы с сетью начнет регистрировать сетевые запросы, отправляемые обозревателем хранилищ в конечные точки управления и служб. Например, введите адрес https://cawablobgrs.blob.core.windows.net/ для конечной точки хранилища BLOB-объектов в браузере и вы получите примерно следующий ответ, который предполагает, что ресурс существует, несмотря на то, что к нему нет доступа.

![пример кода](./media/storage-explorer-troubleshooting/4022502_en_2.png)

### <a name="contact-proxy-server-admin"></a>Обратитесь к администратору прокси-сервера

Если параметры прокси-сервера настроены правильно, обратитесь к администратору прокси-сервера и

- убедитесь, что прокси-сервер не блокирует трафик к конечным точкам управления или ресурсов Azure.

- Проверьте протокол аутентификации, используемый прокси-сервером. Обозреватель хранилищ пока не поддерживает прокси-серверы NTLM.

## <a name="unable-to-retrieve-children-error-message"></a>Сообщение об ошибке "Не удается получить дочерние элементы"

Если вы подключаетесь к Azure через прокси-сервер, убедитесь, что его параметры настроены правильно. Если доступ к ресурсу предоставлен вам владельцем подписки или учетной записи, убедитесь, что у вас есть разрешения на чтение или перечисление для этого ресурса.

### <a name="issues-with-sas-url"></a>Проблемы с URL-адресом SAS
Если вы подключаетесь к службе с помощью URL-адреса SAS и возникает эта ошибка:

- убедитесь, что URL-адрес предоставляет необходимые разрешения на чтение или перечисление ресурсов.

- Убедитесь, что срок действия URL-адреса не истек.

- Если URL-адрес основан на политике доступа, убедитесь, что политика доступа не была отозвана.

Если вы случайно присоединили недопустимый URL-адрес SAS и не смогли его отсоединить, выполните следующие действия:
1.  Если запущен обозреватель хранилища, нажмите клавишу F12, чтобы открыть окно средств для разработчиков.
2.  Щелкните вкладку "Приложение" и выберите "Локальное хранилище > file://" в дереве слева.
3.  Найти ключ, связанный с типом службы для проблемного URI SAS. Например, если неверный URI SAS относится к контейнеру больших двоичных объектов, найдите раздел с именем StorageExplorer_AddStorageServiceSAS_v1_blob.
4.  Значение ключа должно быть массивом JSON. Найдите объект, связанный с неправильным URI, и удалите его.
5.  Нажмите клавиши CTRL+R, чтобы перезагрузить обозреватель хранилища.


## <a name="next-steps"></a>Дальнейшие действия

Если ни одно из этих решений не помогло, воспользуйтесь средством обратной связи, чтобы отправить сообщение о проблеме через электронную почту. Укажите как можно больше сведений о проблеме, чтобы мы могли связаться с вами и помочь устранить ее.

Для этого перейдите в меню **Справка** и щелкните пункт **Отправить отзыв**.

![Отзыв](./media/storage-explorer-troubleshooting/4022503_en_1.png)
