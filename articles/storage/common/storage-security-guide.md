---
title: "руководство по безопасности хранилища aaaAzure | Документы Microsoft"
description: "Сведения о hello многие методы обеспечения безопасности хранилища Azure, включая, помимо прочего tooRBAC, шифрование службы хранилища, шифрования на стороне клиента, SMB 3.0 и шифрование диска Azure."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 6f931d94-ef5a-44c6-b1d9-8a3c9c327fb2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 12/08/2016
ms.author: robinsh
ms.openlocfilehash: 1f5a4e724e00ea6d16f5511b9120154f89441758
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-security-guide"></a><span data-ttu-id="3cca8-103">Руководство по безопасности службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-103">Azure Storage security guide</span></span>
## <a name="overview"></a><span data-ttu-id="3cca8-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="3cca8-104">Overview</span></span>
<span data-ttu-id="3cca8-105">Хранилище Azure предоставляет широкий набор возможностей безопасности, которые вместе позволяют разработчикам toobuild безопасных приложений.</span><span class="sxs-lookup"><span data-stu-id="3cca8-105">Azure Storage provides a comprehensive set of security capabilities which together enable developers toobuild secure applications.</span></span> <span data-ttu-id="3cca8-106">Учетная запись хранения Hello сам могут быть защищены с помощью управления доступом на основе ролей и Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3cca8-106">hello storage account itself can be secured using Role-Based Access Control and Azure Active Directory.</span></span> <span data-ttu-id="3cca8-107">Защитить данные, передаваемые между приложением и Azure, можно с помощью [шифрования на стороне клиента](../storage-client-side-encryption.md), HTTPS или SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="3cca8-107">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPS, or SMB 3.0.</span></span> <span data-ttu-id="3cca8-108">Данные могут быть определены toobe, автоматически шифруются при записи хранилища с помощью tooAzure [шифрование службы хранилища (SSE)](storage-service-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="3cca8-108">Data can be set toobe automatically encrypted when written tooAzure Storage using [Storage Service Encryption (SSE)](storage-service-encryption.md).</span></span> <span data-ttu-id="3cca8-109">Диски операционной системы и данных, используемым виртуальными машинами можно задать toobe, зашифрованные с помощью [шифрование диска Azure](../../security/azure-security-disk-encryption.md).</span><span class="sxs-lookup"><span data-stu-id="3cca8-109">OS and Data disks used by virtual machines can be set toobe encrypted using [Azure Disk Encryption](../../security/azure-security-disk-encryption.md).</span></span> <span data-ttu-id="3cca8-110">Объекты данных toohello делегированный доступ в хранилище Azure можно предоставить с помощью [подписей общего доступа](../storage-dotnet-shared-access-signature-part-1.md).</span><span class="sxs-lookup"><span data-stu-id="3cca8-110">Delegated access toohello data objects in Azure Storage can be granted using [Shared Access Signatures](../storage-dotnet-shared-access-signature-part-1.md).</span></span>

<span data-ttu-id="3cca8-111">В этой статье содержатся общие сведения о функциях безопасности, которые можно использовать в службе хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-111">This article will provide an overview of each of these security features that can be used with Azure Storage.</span></span> <span data-ttu-id="3cca8-112">Tooarticles, вы получите подробные сведения каждого компонента, можно легко сделать, приводятся соответствующие ссылки Дальнейшее изучение проблемы на каждый раздел.</span><span class="sxs-lookup"><span data-stu-id="3cca8-112">Links are provided tooarticles that will give details of each feature so you can easily do further investigation on each topic.</span></span>

<span data-ttu-id="3cca8-113">Ниже приведены hello toobe разделы, описанные в данной статье.</span><span class="sxs-lookup"><span data-stu-id="3cca8-113">Here are hello topics toobe covered in this article:</span></span>

* <span data-ttu-id="3cca8-114">[Безопасность плоскости управления](#management-plane-security) — защита учетной записи хранения</span><span class="sxs-lookup"><span data-stu-id="3cca8-114">[Management Plane Security](#management-plane-security) – Securing your Storage Account</span></span>

  <span data-ttu-id="3cca8-115">Hello плоскости управления состоит из toomanage hello ресурсы, используемые вашей учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-115">hello management plane consists of hello resources used toomanage your storage account.</span></span> <span data-ttu-id="3cca8-116">В этом разделе будет рассказано о модели развертывания диспетчера ресурсов Azure hello и доступом учетных записей хранения tooyour toocontrol toouse управление доступом на основе ролей (RBAC).</span><span class="sxs-lookup"><span data-stu-id="3cca8-116">In this section, we'll talk about hello Azure Resource Manager deployment model and how toouse Role-Based Access Control (RBAC) toocontrol access tooyour storage accounts.</span></span> <span data-ttu-id="3cca8-117">Также мы поговорим об управлении ключами вашей учетной записи хранилища и как tooregenerate их.</span><span class="sxs-lookup"><span data-stu-id="3cca8-117">We will also talk about managing your storage account keys and how tooregenerate them.</span></span>
* <span data-ttu-id="3cca8-118">[Безопасность данных плоскости](#data-plane-security) — tooYour безопасность доступа к данным</span><span class="sxs-lookup"><span data-stu-id="3cca8-118">[Data Plane Security](#data-plane-security) – Securing Access tooYour Data</span></span>

  <span data-ttu-id="3cca8-119">В этом разделе мы рассмотрим доступ toohello фактические данные объектов в вашей учетной записи хранилища больших двоичных объектов, файлов, очередей и таблиц, с помощью подписей общего доступа и хранимые политики доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-119">In this section, we'll look at allowing access toohello actual data objects in your Storage account, such as blobs, files, queues, and tables, using Shared Access Signatures and Stored Access Policies.</span></span> <span data-ttu-id="3cca8-120">Будут рассмотрены подписанные URL-адреса как уровня службы, так и уровня учетной записи.</span><span class="sxs-lookup"><span data-stu-id="3cca8-120">We will cover both service-level SAS and account-level SAS.</span></span> <span data-ttu-id="3cca8-121">Мы также отображаются как toolimit доступ к tooa определенный IP-адрес (или диапазон IP-адресов), как использовать протокол hello toolimit tooHTTPS и как toorevoke a подписи общего доступа, не ожидая его tooexpire.</span><span class="sxs-lookup"><span data-stu-id="3cca8-121">We'll also see how toolimit access tooa specific IP address (or range of IP addresses), how toolimit hello protocol used tooHTTPS, and how toorevoke a Shared Access Signature without waiting for it tooexpire.</span></span>
* [<span data-ttu-id="3cca8-122">Шифрование при передаче</span><span class="sxs-lookup"><span data-stu-id="3cca8-122">Encryption in Transit</span></span>](#encryption-in-transit)

  <span data-ttu-id="3cca8-123">В этом разделе рассматриваются как toosecure данных при передаче в или из хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-123">This section discusses how toosecure data when you transfer it into or out of Azure Storage.</span></span> <span data-ttu-id="3cca8-124">Мы рассмотрим hello, рекомендуется использовать HTTPS и hello шифрования SMB 3.0 для общих ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-124">We'll talk about hello recommended use of HTTPS and hello encryption used by SMB 3.0 for Azure File shares.</span></span> <span data-ttu-id="3cca8-125">Мы будет также рассмотрим шифрования на стороне клиента, включающий tooencrypt hello данные перед передачей в хранилище в клиентском приложении и данные hello toodecrypt после передачи из хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-125">We will also take a look at Client-side Encryption, which enables you tooencrypt hello data before it is transferred into Storage in a client application, and toodecrypt hello data after it is transferred out of Storage.</span></span>
* [<span data-ttu-id="3cca8-126">Шифрование при хранении</span><span class="sxs-lookup"><span data-stu-id="3cca8-126">Encryption at Rest</span></span>](#encryption-at-rest)

  <span data-ttu-id="3cca8-127">Мы поговорим о шифрование службы хранилища (SSE), и как можно включить для учетной записи хранения, приведет к блочные, страничные большие двоичные объекты и добавление большие двоичные объекты автоматически шифруются при записи tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-127">We will talk about Storage Service Encryption (SSE), and how you can enable it for a storage account, resulting in your block blobs, page blobs, and append blobs being automatically encrypted when written tooAzure Storage.</span></span> <span data-ttu-id="3cca8-128">Мы также рассмотрим как можно использовать шифрование диска Azure и изучите основные различия hello и варианты шифрования диска и SSE и шифрования на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="3cca8-128">We will also look at how you can use Azure Disk Encryption and explore hello basic differences and cases of Disk Encryption versus SSE versus Client-Side Encryption.</span></span> <span data-ttu-id="3cca8-129">Вкратце будут рассмотрены вопросы обеспечения соответствия FIPS на компьютерах, используемых в государственных учреждениях США.</span><span class="sxs-lookup"><span data-stu-id="3cca8-129">We will briefly look at FIPS compliance for U.S. Government computers.</span></span>
* <span data-ttu-id="3cca8-130">С помощью [аналитики хранилища](#storage-analytics) tooaudit доступа хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-130">Using [Storage Analytics](#storage-analytics) tooaudit access of Azure Storage</span></span>

  <span data-ttu-id="3cca8-131">В этом разделе рассматриваются как toofind сведения в hello аналитики хранилища журналов для запроса.</span><span class="sxs-lookup"><span data-stu-id="3cca8-131">This section discusses how toofind information in hello storage analytics logs for a request.</span></span> <span data-ttu-id="3cca8-132">Мы рассмотрим аналитики хранилища реальные данные журнала и в разделе как toodiscern ли запрос сделан с hello хранилища ключ, с подписью общего доступа, учетной записи или анонимно и является ли она успешно или с ошибкой.</span><span class="sxs-lookup"><span data-stu-id="3cca8-132">We'll take a look at real storage analytics log data and see how toodiscern whether a request is made with hello Storage account key, with a Shared Access signature, or anonymously, and whether it succeeded or failed.</span></span>
* [<span data-ttu-id="3cca8-133">Поддержка браузерных клиентов с помощью CORS</span><span class="sxs-lookup"><span data-stu-id="3cca8-133">Enabling Browser-Based Clients using CORS</span></span>](#Cross-Origin-Resource-Sharing-CORS)

  <span data-ttu-id="3cca8-134">В этом разделе рассказывается о том, как tooallow ресурсов (CORS) для управления доступом.</span><span class="sxs-lookup"><span data-stu-id="3cca8-134">This section talks about how tooallow cross-origin resource sharing (CORS).</span></span> <span data-ttu-id="3cca8-135">Мы рассмотрим междоменный доступ и как toohandle его с возможностями CORS hello построен в службе хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-135">We'll talk about cross-domain access, and how toohandle it with hello CORS capabilities built into Azure Storage.</span></span>

## <a name="management-plane-security"></a><span data-ttu-id="3cca8-136">Безопасность плоскости управления</span><span class="sxs-lookup"><span data-stu-id="3cca8-136">Management Plane Security</span></span>
<span data-ttu-id="3cca8-137">Hello плоскости управления состоит из операций, которые влияют на учетную запись хранения hello сам.</span><span class="sxs-lookup"><span data-stu-id="3cca8-137">hello management plane consists of operations that affect hello storage account itself.</span></span> <span data-ttu-id="3cca8-138">Например можно создать или удалить учетную запись хранения, получения списка учетных записей хранения в подписке, получения ключей учетной записи хранения hello или повторно создать ключи учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-138">For example, you can create or delete a storage account, get a list of storage accounts in a subscription, retrieve hello storage account keys, or regenerate hello storage account keys.</span></span>

<span data-ttu-id="3cca8-139">При создании учетной записи хранения необходимо выбрать модель развертывания: классическую или на основе Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="3cca8-139">When you create a new storage account, you select a deployment model of Classic or Resource Manager.</span></span> <span data-ttu-id="3cca8-140">Hello классической модели во время создания ресурсов Azure допускает только доступа отдельных toohello подписки и в свою очередь, hello учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-140">hello Classic model of creating resources in Azure only allows all-or-nothing access toohello subscription, and in turn, hello storage account.</span></span>

<span data-ttu-id="3cca8-141">Это руководство посвящено модель диспетчера ресурсов hello hello, рекомендуется использовать средства создания учетных записей хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-141">This guide focuses on hello Resource Manager model which is hello recommended means for creating storage accounts.</span></span> <span data-ttu-id="3cca8-142">С помощью учетных записей хранения Resource Manager hello, а не всей подписки toohello Отмена доступа можно управлять доступом на более конечного уровня toohello плоскости управления с помощью управления доступом на основе ролей (RBAC).</span><span class="sxs-lookup"><span data-stu-id="3cca8-142">With hello Resource Manager storage accounts, rather than giving access toohello entire subscription, you can control access on a more finite level toohello management plane using Role-Based Access Control (RBAC).</span></span>

### <a name="how-toosecure-your-storage-account-with-role-based-access-control-rbac"></a><span data-ttu-id="3cca8-143">Как toosecure вашей учетной записи хранилища с помощью управления доступом на основе ролей (RBAC)</span><span class="sxs-lookup"><span data-stu-id="3cca8-143">How toosecure your storage account with Role-Based Access Control (RBAC)</span></span>
<span data-ttu-id="3cca8-144">Рассмотрим систему управления доступом на основе ролей и способы ее использования.</span><span class="sxs-lookup"><span data-stu-id="3cca8-144">Let's talk about what RBAC is, and how you can use it.</span></span> <span data-ttu-id="3cca8-145">Каждая подписка Azure имеет каталог Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3cca8-145">Each Azure subscription has an Azure Active Directory.</span></span> <span data-ttu-id="3cca8-146">Пользователи, группы и приложения из этого каталога можно предоставить доступ toomanage ресурсы hello подписки Azure, использующие модель развертывания диспетчера ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-146">Users, groups, and applications from that directory can be granted access toomanage resources in hello Azure subscription that use hello Resource Manager deployment model.</span></span> <span data-ttu-id="3cca8-147">Это ссылка tooas управление доступом на основе ролей (RBAC).</span><span class="sxs-lookup"><span data-stu-id="3cca8-147">This is referred tooas Role-Based Access Control (RBAC).</span></span> <span data-ttu-id="3cca8-148">toomanage этот доступ, можно использовать hello [портал Azure](https://portal.azure.com/), hello [средства Azure CLI](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), или hello [API REST поставщика ресурсов хранилища Azure ](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span><span class="sxs-lookup"><span data-stu-id="3cca8-148">toomanage this access, you can use hello [Azure portal](https://portal.azure.com/), hello [Azure CLI tools](../../cli-install-nodejs.md), [PowerShell](/powershell/azureps-cmdlets-docs), or hello [Azure Storage Resource Provider REST APIs](https://msdn.microsoft.com/library/azure/mt163683.aspx).</span></span>

<span data-ttu-id="3cca8-149">С моделью hello диспетчера ресурсов поместите hello учетной записи хранилища в ресурсов группы и контроль доступа toohello управления плоскости из этой конкретной учетной записи хранения с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3cca8-149">With hello Resource Manager model, you put hello storage account in a resource group and control access toohello management plane of that specific storage account using Azure Active Directory.</span></span> <span data-ttu-id="3cca8-150">Например можно предоставить определенным пользователям hello возможность tooaccess hello ключи учетной записи хранения, другим пользователям можно просмотреть сведения об учетной записи хранилища hello, но не может получить доступ к hello ключи учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-150">For example, you can give specific users hello ability tooaccess hello storage account keys, while other users can view information about hello storage account, but cannot access hello storage account keys.</span></span>

#### <a name="granting-access"></a><span data-ttu-id="3cca8-151">Предоставление доступа</span><span class="sxs-lookup"><span data-stu-id="3cca8-151">Granting Access</span></span>
<span data-ttu-id="3cca8-152">Доступ предоставляется путем назначения hello соответствующие RBAC роли toousers, группы и приложения, в правой области hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-152">Access is granted by assigning hello appropriate RBAC role toousers, groups, and applications, at hello right scope.</span></span> <span data-ttu-id="3cca8-153">toogrant доступа toohello всей подписки, при назначении роли на уровне подписки hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-153">toogrant access toohello entire subscription, you assign a role at hello subscription level.</span></span> <span data-ttu-id="3cca8-154">Посредством предоставления разрешений toohello ресурсов самой группе можно предоставить доступ tooall hello ресурсов в группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-154">You can grant access tooall of hello resources in a resource group by granting permissions toohello resource group itself.</span></span> <span data-ttu-id="3cca8-155">Можно также назначить конкретным ролям toospecific ресурсы, такие как учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-155">You can also assign specific roles toospecific resources, such as storage accounts.</span></span>

<span data-ttu-id="3cca8-156">Ниже приведены основные аспекты hello необходимые tooknow об использовании операций управления hello RBAC tooaccess учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-156">Here are hello main points that you need tooknow about using RBAC tooaccess hello management operations of an Azure Storage account:</span></span>

* <span data-ttu-id="3cca8-157">При назначении доступ, по сути назначении роли toohello учетной записью, которую toohave доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-157">When you assign access, you basically assign a role toohello account that you want toohave access.</span></span> <span data-ttu-id="3cca8-158">Можно управлять toomanage операции, используемые toohello доступ этой учетной записи хранения, но не данные toohello объекты в учетной записи hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-158">You can control access toohello operations used toomanage that storage account, but not toohello data objects in hello account.</span></span> <span data-ttu-id="3cca8-159">Например можно предоставить разрешение свойства hello tooretrieve hello учетной записи хранилища (например, резервирования), но не tooa контейнера и данных внутри контейнера в хранилище больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-159">For example, you can grant permission tooretrieve hello properties of hello storage account (such as redundancy), but not tooa container or data within a container inside Blob Storage.</span></span>
* <span data-ttu-id="3cca8-160">Для кого-либо разрешение tooaccess toohave hello объекты данных в учетной записи хранения hello, вы даете им ключи учетной записи разрешение tooread hello и, пользователь может использовать эти ключи tooaccess hello BLOB-объектов, очередей, таблиц и файлов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-160">For someone toohave permission tooaccess hello data objects in hello storage account, you can give them permission tooread hello storage account keys, and that user can then use those keys tooaccess hello blobs, queues, tables, and files.</span></span>
* <span data-ttu-id="3cca8-161">Роли могут назначаться tooa определенной учетной записи пользователя, группы пользователей или tooa конкретного приложения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-161">Roles can be assigned tooa specific user account, a group of users, or tooa specific application.</span></span>
* <span data-ttu-id="3cca8-162">Каждая роль имеет список разрешенных и запрещенных действий.</span><span class="sxs-lookup"><span data-stu-id="3cca8-162">Each role has a list of Actions and Not Actions.</span></span> <span data-ttu-id="3cca8-163">Например, роль виртуальной машины участника hello имеет действие «listKeys», позволяющее считывать toobe ключи учетной записи хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-163">For example, hello Virtual Machine Contributor role has an Action of "listKeys" that allows hello storage account keys toobe read.</span></span> <span data-ttu-id="3cca8-164">Hello участник имеет «Не действия» как обновление hello доступ для пользователей в Active Directory hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-164">hello Contributor has "Not Actions" such as updating hello access for users in hello Active Directory.</span></span>
* <span data-ttu-id="3cca8-165">Роли для хранения причинами (но не ограничиваются) hello следующее:</span><span class="sxs-lookup"><span data-stu-id="3cca8-165">Roles for storage include (but are not limited to) hello following:</span></span>

  * <span data-ttu-id="3cca8-166">"Владелец" — может управлять всем, включая доступ.</span><span class="sxs-lookup"><span data-stu-id="3cca8-166">Owner – They can manage everything, including access.</span></span>
  * <span data-ttu-id="3cca8-167">Участник — это можно сделать что-либо владелец hello можно, за исключением назначение доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-167">Contributor – They can do anything hello owner can do except assign access.</span></span> <span data-ttu-id="3cca8-168">Пользователь с этой ролью можно просматривать и повторно создать ключи учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-168">Someone with this role can view and regenerate hello storage account keys.</span></span> <span data-ttu-id="3cca8-169">С помощью ключей учетной записи хранилища hello они обращаются к hello объектов данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-169">With hello storage account keys, they can access hello data objects.</span></span>
  * <span data-ttu-id="3cca8-170">Модуль чтения — они могут просматривать сведения об учетной записи хранилища hello, за исключением секретные данные.</span><span class="sxs-lookup"><span data-stu-id="3cca8-170">Reader – They can view information about hello storage account, except secrets.</span></span> <span data-ttu-id="3cca8-171">Например при назначении роли с разрешениями чтения на toosomeone учетной записи хранилища hello, они могут просматривать свойства hello hello учетной записи хранилища, но они не могут вносить изменения в свойства toohello или просмотреть ключи учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-171">For example, if you assign a role with reader permissions on hello storage account toosomeone, they can view hello properties of hello storage account, but they can't make any changes toohello properties or view hello storage account keys.</span></span>
  * <span data-ttu-id="3cca8-172">Участник учетной записи хранилища — они могут управлять hello учетной записи хранилища — они смогут прочесть hello подписки и групп ресурсов и создавать и управлять развертывания группы ресурсов подписки.</span><span class="sxs-lookup"><span data-stu-id="3cca8-172">Storage Account Contributor – They can manage hello storage account – they can read hello subscription's resource groups and resources, and create and manage subscription resource group deployments.</span></span> <span data-ttu-id="3cca8-173">Они также могут получить hello ключи учетной записи хранилища, которые в свою очередь означает, что можно получить доступ к информационной панели hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-173">They can also access hello storage account keys, which in turn means they can access hello data plane.</span></span>
  * <span data-ttu-id="3cca8-174">Администратор доступа пользователя — они управляют учетная запись хранения toohello доступа пользователя.</span><span class="sxs-lookup"><span data-stu-id="3cca8-174">User Access Administrator – They can manage user access toohello storage account.</span></span> <span data-ttu-id="3cca8-175">Например они могут предоставлять чтения доступа tooa конкретного пользователя.</span><span class="sxs-lookup"><span data-stu-id="3cca8-175">For example, they can grant Reader access tooa specific user.</span></span>
  * <span data-ttu-id="3cca8-176">Участник виртуальной машины — они могут управлять виртуальными машинами, но не hello хранилища учетной записи toowhich которому они подключены.</span><span class="sxs-lookup"><span data-stu-id="3cca8-176">Virtual Machine Contributor – They can manage virtual machines but not hello storage account toowhich they are connected.</span></span> <span data-ttu-id="3cca8-177">Эту роль можно перечислить ключи учетной записи хранения hello, это означает, что hello toowhom пользователя, назначить эту роль можно обновить hello информационной панели.</span><span class="sxs-lookup"><span data-stu-id="3cca8-177">This role can list hello storage account keys, which means that hello user toowhom you assign this role can update hello data plane.</span></span>

    <span data-ttu-id="3cca8-178">Чтобы пользователь toocreate виртуальной машины они имеют toobe может toocreate hello соответствующие VHD-файл в учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-178">In order for a user toocreate a virtual machine, they have toobe able toocreate hello corresponding VHD file in a storage account.</span></span> <span data-ttu-id="3cca8-179">toodo, что они нуждаются в хранилища hello может tooretrieve toobe ключ учетной записи и передать его API toohello Создание hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3cca8-179">toodo that, they need toobe able tooretrieve hello storage account key and pass it toohello API creating hello VM.</span></span> <span data-ttu-id="3cca8-180">Таким образом они должны обладать этим разрешением, поэтому их можно перечислить ключи учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-180">Therefore, they must have this permission so they can list hello storage account keys.</span></span>
* <span data-ttu-id="3cca8-181">Hello возможность toodefine пользовательские роли — это функция, позволяющая toocompose набор действий из списка доступных действий, которые могут быть выполнены в ресурсах Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-181">hello ability toodefine custom roles is a feature that allows you toocompose a set of actions from a list of available actions that can be performed on Azure resources.</span></span>
* <span data-ttu-id="3cca8-182">Hello пользователем toobe, Настройка в Azure Active Directory, перед тем как назначать toothem роли.</span><span class="sxs-lookup"><span data-stu-id="3cca8-182">hello user has toobe set up in your Azure Active Directory before you can assign a role toothem.</span></span>
* <span data-ttu-id="3cca8-183">Можно создать отчет, предоставлено или отменено какой доступ или из которого и в какой области, с помощью PowerShell или Azure CLI hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-183">You can create a report of who granted/revoked what kind of access to/from whom and on what scope using PowerShell or hello Azure CLI.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-184">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-184">Resources</span></span>
* [<span data-ttu-id="3cca8-185">Контроль доступа на основе ролей Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="3cca8-185">Azure Active Directory Role-based Access Control</span></span>](../../active-directory/role-based-access-control-configure.md)

  <span data-ttu-id="3cca8-186">В этой статье описываются hello управления доступом на основе роли Azure Active Directory и как он работает.</span><span class="sxs-lookup"><span data-stu-id="3cca8-186">This article explains hello Azure Active Directory Role-based Access Control and how it works.</span></span>
* [<span data-ttu-id="3cca8-187">RBAC: встроенные роли</span><span class="sxs-lookup"><span data-stu-id="3cca8-187">RBAC: Built in Roles</span></span>](../../active-directory/role-based-access-built-in-roles.md)

  <span data-ttu-id="3cca8-188">В этой статье подробно описываются hello встроенные роли, имеющиеся в RBAC.</span><span class="sxs-lookup"><span data-stu-id="3cca8-188">This article details all of hello built-in roles available in RBAC.</span></span>
* [<span data-ttu-id="3cca8-189">Общие сведения о развертывании диспетчера ресурсов и классическом развертывании</span><span class="sxs-lookup"><span data-stu-id="3cca8-189">Understanding Resource Manager deployment and classic deployment</span></span>](../../azure-resource-manager/resource-manager-deployment-model.md)

  <span data-ttu-id="3cca8-190">В этой статье объясняется развертывания диспетчера ресурсов hello и классическое развертывание модели и объясняет преимущества hello hello группы диспетчера ресурсов и ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-190">This article explains hello Resource Manager deployment and classic deployment models, and explains hello benefits of using hello Resource Manager and resource groups.</span></span> <span data-ttu-id="3cca8-191">Он объясняется работа hello вычислений Azure, поставщиков хранилища и сети в рамках модели hello диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-191">It explains how hello Azure Compute, Network, and Storage Providers work under hello Resource Manager model.</span></span>
* [<span data-ttu-id="3cca8-192">Управление на основе ролей управления доступом с помощью API-интерфейса REST hello</span><span class="sxs-lookup"><span data-stu-id="3cca8-192">Managing Role-Based Access Control with hello REST API</span></span>](../../active-directory/role-based-access-control-manage-access-rest.md)

  <span data-ttu-id="3cca8-193">В этой статье показано, как toouse hello toomanage API-интерфейса REST RBAC.</span><span class="sxs-lookup"><span data-stu-id="3cca8-193">This article shows how toouse hello REST API toomanage RBAC.</span></span>
* [<span data-ttu-id="3cca8-194">Справочник по API REST поставщика ресурсов службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-194">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/azure/mt163683.aspx)

  <span data-ttu-id="3cca8-195">Это ссылка hello для hello API-интерфейсы, можно использовать toomanage учетную запись хранилища программным образом.</span><span class="sxs-lookup"><span data-stu-id="3cca8-195">This is hello reference for hello APIs you can use toomanage your storage account programmatically.</span></span>
* [<span data-ttu-id="3cca8-196">Tooauth руководство разработчика с API диспетчера ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-196">Developer's guide tooauth with Azure Resource Manager API</span></span>](http://www.dushyantgill.com/blog/2015/05/23/developers-guide-to-auth-with-azure-resource-manager-api/)

  <span data-ttu-id="3cca8-197">В этой статье показано, как с помощью tooauthenticate hello API диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-197">This article shows how tooauthenticate using hello Resource Manager APIs.</span></span>
* [<span data-ttu-id="3cca8-198">Конференция Ignite: управление доступом на основе ролей в Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-198">Role-Based Access Control for Microsoft Azure from Ignite</span></span>](https://channel9.msdn.com/events/Ignite/2015/BRK2707)

  <span data-ttu-id="3cca8-199">Это tooa ссылку, с конференции Ignite 2015 MS hello видео на канале 9.</span><span class="sxs-lookup"><span data-stu-id="3cca8-199">This is a link tooa video on Channel 9 from hello 2015 MS Ignite conference.</span></span> <span data-ttu-id="3cca8-200">В этом сеансе говорить о доступа, управления и работы с отчетами Azure и рекомендации по защите доступа tooAzure подписки с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3cca8-200">In this session, they talk about access management and reporting capabilities in Azure, and explore best practices around securing access tooAzure subscriptions using Azure Active Directory.</span></span>

### <a name="managing-your-storage-account-keys"></a><span data-ttu-id="3cca8-201">Управление ключами учетной записи хранения</span><span class="sxs-lookup"><span data-stu-id="3cca8-201">Managing Your Storage Account Keys</span></span>
<span data-ttu-id="3cca8-202">Учетной записи хранения, ключи представляют собой 512-разрядный строки, созданные Azure, наряду с hello хранилища учетная запись, имя, можно использовать tooaccess hello данных объектов, хранящихся в учетной записи хранилища hello, например большие двоичные объекты, объекты в пределах таблицы, очереди сообщений и файлов в папке файлов Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-202">Storage account keys are 512-bit strings created by Azure that, along with hello storage account name, can be used tooaccess hello data objects stored in hello storage account, e.g. blobs, entities within a table, queue messages, and files on an Azure File share.</span></span> <span data-ttu-id="3cca8-203">Управление доступа toohello хранилища учетной записи ключей управляет доступом toohello информационной панели для этой учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-203">Controlling access toohello storage account keys controls access toohello data plane for that storage account.</span></span>

<span data-ttu-id="3cca8-204">Каждая учетная запись хранилища имеет два ключа называется tooas «Ключ 1» и «Ключа 2» в hello [портал Azure](http://portal.azure.com/) и в hello командлеты PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3cca8-204">Each storage account has two keys referred tooas "Key 1" and "Key 2" in hello [Azure portal](http://portal.azure.com/) and in hello PowerShell cmdlets.</span></span> <span data-ttu-id="3cca8-205">Они могут быть повторно созданы вручную, используя один из нескольких методов, включая, но не только toousing hello [портал Azure](https://portal.azure.com/), hello клиентской библиотеки хранилища .NET или hello Azure PowerShell, hello Azure CLI или программным путем с помощью REST API служб хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-205">These can be regenerated manually using one of several methods, including, but not limited toousing hello [Azure portal](https://portal.azure.com/), PowerShell, hello Azure CLI, or programmatically using hello .NET Storage Client Library or hello Azure Storage Services REST API.</span></span>

<span data-ttu-id="3cca8-206">Существуют любое количество tooregenerate причинам ключи учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-206">There are any number of reasons tooregenerate your storage account keys.</span></span>

* <span data-ttu-id="3cca8-207">Вы можете регулярно создавать новые ключи в целях безопасности.</span><span class="sxs-lookup"><span data-stu-id="3cca8-207">You might regenerate them on a regular basis for security reasons.</span></span>
* <span data-ttu-id="3cca8-208">Будет повторно создать ключи учетной записи хранилища, если кто-то управляемые toohack в приложения и получить ключ hello, жестко закодировано или сохранен в файле конфигурации, предоставляя им полный доступ к учетной записи хранилища tooyour.</span><span class="sxs-lookup"><span data-stu-id="3cca8-208">You would regenerate your storage account keys if someone managed toohack into an application and retrieve hello key that was hardcoded or saved in a configuration file, giving them full access tooyour storage account.</span></span>
* <span data-ttu-id="3cca8-209">Другой случай для повторного создания ключа, если команда использует обозреватель хранилищ приложение, которое сохраняет ключ учетной записи хранения hello и оставляет один из членов команды hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-209">Another case for key regeneration is if your team is using a Storage Explorer application that retains hello storage account key, and one of hello team members leaves.</span></span> <span data-ttu-id="3cca8-210">приложение Hello по-прежнему toowork, предоставляя им доступа к учетной записи хранилища tooyour после они удалены.</span><span class="sxs-lookup"><span data-stu-id="3cca8-210">hello application would continue toowork, giving them access tooyour storage account after they're gone.</span></span> <span data-ttu-id="3cca8-211">Это фактически hello основная причина созданные ими подписей общего доступа уровня учетной записи-SAS на уровне учетной записи можно использовать вместо сохранения hello клавиши доступа в файле конфигурации.</span><span class="sxs-lookup"><span data-stu-id="3cca8-211">This is actually hello primary reason they created account-level Shared Access Signatures – you can use an account-level SAS instead of storing hello access keys in a configuration file.</span></span>

#### <a name="key-regeneration-plan"></a><span data-ttu-id="3cca8-212">План повторного создания ключей</span><span class="sxs-lookup"><span data-stu-id="3cca8-212">Key regeneration plan</span></span>
<span data-ttu-id="3cca8-213">Вы не хотите toojust заново hello ключ, который вы используете без некоторых планирования.</span><span class="sxs-lookup"><span data-stu-id="3cca8-213">You don't want toojust regenerate hello key you are using without some planning.</span></span> <span data-ttu-id="3cca8-214">Если это сделать, может обрезана все доступа toothat учетной записи хранилища, что может привести к основной перебоев в работе.</span><span class="sxs-lookup"><span data-stu-id="3cca8-214">If you do that, you could cut off all access toothat storage account, which can cause major disruption.</span></span> <span data-ttu-id="3cca8-215">Именно поэтому используются два ключа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-215">This is why there are two keys.</span></span> <span data-ttu-id="3cca8-216">Повторно создавать ключи следует только по одному.</span><span class="sxs-lookup"><span data-stu-id="3cca8-216">You should regenerate one key at a time.</span></span>

<span data-ttu-id="3cca8-217">Прежде чем повторное создание ключей, убедитесь, что у вас есть список всех приложений, зависящих от hello учетной записи хранилища, а также любые другие службы, которую вы используете в Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-217">Before you regenerate your keys, be sure you have a list of all of your applications that are dependent on hello storage account, as well as any other services you are using in Azure.</span></span> <span data-ttu-id="3cca8-218">Например при использовании служб мультимедиа Azure, которые зависят от учетной записи хранилища, необходимо повторно синхронизировать ключи доступа hello с вашей службой носителей после повторного создания ключа hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-218">For example, if you are using Azure Media Services that are dependent on your storage account, you must re-sync hello access keys with your media service after you regenerate hello key.</span></span> <span data-ttu-id="3cca8-219">При использовании любого приложения, такие как обозреватель хранилищ потребуется tooprovide hello новые ключи toothose приложения также.</span><span class="sxs-lookup"><span data-stu-id="3cca8-219">If you are using any applications such as a storage explorer, you will need tooprovide hello new keys toothose applications as well.</span></span> <span data-ttu-id="3cca8-220">Обратите внимание, что при наличии виртуальных машин, чьи файлы виртуального жесткого диска хранятся в учетной записи хранения hello, они не затрагиваются, повторное создание ключей учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-220">Note that if you have VMs whose VHD files are stored in hello storage account, they will not be affected by regenerating hello storage account keys.</span></span>

<span data-ttu-id="3cca8-221">Можно создать повторно ключи в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-221">You can regenerate your keys in hello Azure portal.</span></span> <span data-ttu-id="3cca8-222">Если повторно создаются ключи они занимают too10 toobe минут синхронизировать во всех служб хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-222">Once keys are regenerated they can take up too10 minutes toobe synchronized across Storage Services.</span></span>

<span data-ttu-id="3cca8-223">Когда вы будете готовы, ниже приведен общий процесс hello с подробными сведениями о том, как следует изменить ключ.</span><span class="sxs-lookup"><span data-stu-id="3cca8-223">When you're ready, here's hello general process detailing how you should change your key.</span></span> <span data-ttu-id="3cca8-224">В этом случае hello подразумевается, что вы используете раздел 1 и будет toochange все toouse вместо ключа 2.</span><span class="sxs-lookup"><span data-stu-id="3cca8-224">In this case, hello assumption is that you are currently using Key 1 and you are going toochange everything toouse Key 2 instead.</span></span>

1. <span data-ttu-id="3cca8-225">Повторное создание ключа 2 tooensure, что он является безопасным.</span><span class="sxs-lookup"><span data-stu-id="3cca8-225">Regenerate Key 2 tooensure that it is secure.</span></span> <span data-ttu-id="3cca8-226">Это можно сделать в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-226">You can do this in hello Azure portal.</span></span>
2. <span data-ttu-id="3cca8-227">В все приложения hello, где хранится ключ хранилища hello измените значение нового ключа toouse ключ hello хранилище 2.</span><span class="sxs-lookup"><span data-stu-id="3cca8-227">In all of hello applications where hello storage key is stored, change hello storage key toouse Key 2's new value.</span></span> <span data-ttu-id="3cca8-228">Тестирование и публикация приложения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-228">Test and publish hello application.</span></span>
3. <span data-ttu-id="3cca8-229">После того как все hello приложения и службы работают и запущена успешно, повторное создание ключа 1.</span><span class="sxs-lookup"><span data-stu-id="3cca8-229">After all of hello applications and services are up and running successfully, regenerate Key 1.</span></span> <span data-ttu-id="3cca8-230">Это гарантирует, что любой пользователь явно не предоставлены hello новый ключ toowhom больше не будут иметь доступ к учетной записи хранилища toohello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-230">This ensures that anybody toowhom you have not expressly given hello new key will no longer have access toohello storage account.</span></span>

<span data-ttu-id="3cca8-231">Если вы используете ключ 2, можно использовать же процесс, но имена ключей обратного hello hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-231">If you are currently using Key 2, you can use hello same process, but reverse hello key names.</span></span>

<span data-ttu-id="3cca8-232">За несколько дней, можно перенести изменения каждого toouse приложения hello новый ключ и его публикации.</span><span class="sxs-lookup"><span data-stu-id="3cca8-232">You can migrate over a couple of days, changing each application toouse hello new key and publishing it.</span></span> <span data-ttu-id="3cca8-233">После завершения всех из них должен вернуться назад и повторно создать ключ старого hello, поэтому больше не работает.</span><span class="sxs-lookup"><span data-stu-id="3cca8-233">After all of them are done, you should then go back and regenerate hello old key so it no longer works.</span></span>

<span data-ttu-id="3cca8-234">Другой вариант — ключ учетной записи хранения tooput hello в [хранилище ключей Azure](https://azure.microsoft.com/services/key-vault/) как секрет и располагать собственным ключом hello приложений извлекать из него.</span><span class="sxs-lookup"><span data-stu-id="3cca8-234">Another option is tooput hello storage account key in an [Azure Key Vault](https://azure.microsoft.com/services/key-vault/) as a secret and have your applications retrieve hello key from there.</span></span> <span data-ttu-id="3cca8-235">Затем повторно создать ключ hello и обновить hello хранилище ключей Azure, приложения hello нет необходимости повторного развертывания, так как они получат hello новый ключ из хранилища ключей Azure hello автоматически toobe.</span><span class="sxs-lookup"><span data-stu-id="3cca8-235">Then when you regenerate hello key and update hello Azure Key Vault, hello applications will not need toobe redeployed because they will pick up hello new key from hello Azure Key Vault automatically.</span></span> <span data-ttu-id="3cca8-236">Заметьте, что вы можете прочитать раздел hello каждый раз при необходимости приложения hello, или можно кэшировать его в памяти и при невозможности использования, извлечь ключ hello снова из хранилища ключей Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-236">Note that you can have hello application read hello key each time you need it, or you can cache it in memory and if it fails when using it, retrieve hello key again from hello Azure Key Vault.</span></span>

<span data-ttu-id="3cca8-237">Хранилище ключей Azure обеспечивает еще один уровень безопасности для ключей к хранилищу данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-237">Using Azure Key Vault also adds another level of security for your storage keys.</span></span> <span data-ttu-id="3cca8-238">При использовании этого метода вы никогда не будет hello, ключа хранилища жестко задано в файле конфигурации, удаляющий пути, кто-то получение ключей toohello без определенного разрешения доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-238">If you use this method, you will never have hello storage key hardcoded in a configuration file, which removes that avenue of somebody getting access toohello keys without specific permission.</span></span>

<span data-ttu-id="3cca8-239">Другое преимущество использования хранилища ключей Azure — также можно управлять tooyour клавиши доступа, с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3cca8-239">Another advantage of using Azure Key Vault is you can also control access tooyour keys using Azure Active Directory.</span></span> <span data-ttu-id="3cca8-240">Это означает, что вы можете предоставить доступ toohello несколько приложений, которым требуется tooretrieve hello ключи из хранилища ключей Azure и известно, что другие приложения не будут может tooaccess hello ключи, не предоставляя им разрешений специально.</span><span class="sxs-lookup"><span data-stu-id="3cca8-240">This means you can grant access toohello handful of applications that need tooretrieve hello keys from Azure Key Vault, and know that other applications will not be able tooaccess hello keys without granting them permission specifically.</span></span>

<span data-ttu-id="3cca8-241">Примечание: рекомендуется toouse только один hello ключей во всех приложениях в hello, же время.</span><span class="sxs-lookup"><span data-stu-id="3cca8-241">Note: it is recommended toouse only one of hello keys in all of your applications at hello same time.</span></span> <span data-ttu-id="3cca8-242">При использовании ключа 1 в некоторых местах и 2 ключ в других, то не сможете быть ключей без потери доступа другим приложением, может toorotate.</span><span class="sxs-lookup"><span data-stu-id="3cca8-242">If you use Key 1 in some places and Key 2 in others, you will not be able toorotate your keys without some application losing access.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-243">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-243">Resources</span></span>
* [<span data-ttu-id="3cca8-244">Об учетных записях хранения Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-244">About Azure Storage Accounts</span></span>](storage-create-storage-account.md#regenerate-storage-access-keys)

  <span data-ttu-id="3cca8-245">В этой статье приводятся общие сведения об учетных записях хранения и рассматривается просмотр, копирование и повторное создание ключей доступа к хранилищу.</span><span class="sxs-lookup"><span data-stu-id="3cca8-245">This article gives an overview of storage accounts and discusses viewing, copying, and regenerating storage access keys.</span></span>
* [<span data-ttu-id="3cca8-246">Справочник по API REST поставщика ресурсов службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-246">Azure Storage Resource Provider REST API Reference</span></span>](https://msdn.microsoft.com/library/mt163683.aspx)

  <span data-ttu-id="3cca8-247">Эта статья содержит ссылки toospecific статьи о получении ключей учетной записи хранения hello и идет повторное создание ключей учетной записи хранения hello для учетной записи Azure, с помощью API-интерфейса REST hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-247">This article contains links toospecific articles about retrieving hello storage account keys and regenerating hello storage account keys for an Azure Account using hello REST API.</span></span> <span data-ttu-id="3cca8-248">Примечание. Это относится к учетным записям хранения Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="3cca8-248">Note: This is for  Resource Manager storage accounts.</span></span>
* [<span data-ttu-id="3cca8-249">Операции с учетными записями хранения</span><span class="sxs-lookup"><span data-stu-id="3cca8-249">Operations on storage accounts</span></span>](https://msdn.microsoft.com/library/ee460790.aspx)

  <span data-ttu-id="3cca8-250">В этой статье в hello Справочник по API REST хранилища Service Manager содержит статьи toospecific ссылки на получение и повторное создание ключей учетной записи хранения hello, с помощью API-интерфейса REST hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-250">This article in hello Storage Service Manager REST API Reference contains links toospecific articles on retrieving and regenerating hello storage account keys using hello REST API.</span></span> <span data-ttu-id="3cca8-251">Примечание: Это для учетных записей хранения классический hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-251">Note: This is for hello Classic storage accounts.</span></span>
* [<span data-ttu-id="3cca8-252">Произнесите goodbye tookey управления — Управление доступом tooAzure хранилища данных с помощью Azure AD</span><span class="sxs-lookup"><span data-stu-id="3cca8-252">Say goodbye tookey management – manage access tooAzure Storage data using Azure AD</span></span>](http://www.dushyantgill.com/blog/2015/04/26/say-goodbye-to-key-management-manage-access-to-azure-storage-data-using-azure-ad/)

  <span data-ttu-id="3cca8-253">В этой статье показано, как toocontrol toouse Active Directory доступ к tooyour ключей хранилища Azure в хранилище ключей Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-253">This article shows how toouse Active Directory toocontrol access tooyour Azure Storage keys in Azure Key Vault.</span></span> <span data-ttu-id="3cca8-254">Здесь также показано, как toouse автоматизации Azure задания tooregenerate hello ключи на почасовой основе.</span><span class="sxs-lookup"><span data-stu-id="3cca8-254">It also shows how toouse an Azure Automation job tooregenerate hello keys on an hourly basis.</span></span>

## <a name="data-plane-security"></a><span data-ttu-id="3cca8-255">Безопасность плоскости данных</span><span class="sxs-lookup"><span data-stu-id="3cca8-255">Data Plane Security</span></span>
<span data-ttu-id="3cca8-256">Безопасность данных плоскости ссылается toohello методы, используемые toosecure hello данных объекты хранятся в хранилище Azure — hello больших двоичных объектов, очередей, таблиц и файлов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-256">Data Plane Security refers toohello methods used toosecure hello data objects stored in Azure Storage – hello blobs, queues, tables, and files.</span></span> <span data-ttu-id="3cca8-257">Мы рассмотрели hello данных методам tooencrypt и безопасность во время передачи данных hello, но как выполнить о разрешении доступа toohello объектов?</span><span class="sxs-lookup"><span data-stu-id="3cca8-257">We've seen methods tooencrypt hello data and security during transit of hello data, but how do you go about allowing access toohello objects?</span></span>

<span data-ttu-id="3cca8-258">По сути, существует два способа для управления доступом toohello данных сами объекты.</span><span class="sxs-lookup"><span data-stu-id="3cca8-258">There are basically two methods for controlling access toohello data objects themselves.</span></span> <span data-ttu-id="3cca8-259">Hello сначала предусмотрено управление доступом toohello ключи учетной записи и hello второй использует объекты данных toospecific доступа toogrant подписей общего доступа на определенное время.</span><span class="sxs-lookup"><span data-stu-id="3cca8-259">hello first is by controlling access toohello storage account keys, and hello second is using Shared Access Signatures toogrant access toospecific data objects for a specific amount of time.</span></span>

<span data-ttu-id="3cca8-260">Один toonote исключение — разрешить общий доступ tooyour большие двоичные объекты, задав hello уровень доступа для hello контейнер, который содержит большие двоичные объекты hello соответствующим образом.</span><span class="sxs-lookup"><span data-stu-id="3cca8-260">One exception toonote is that you can allow public access tooyour blobs by setting hello access level for hello container that holds hello blobs accordingly.</span></span> <span data-ttu-id="3cca8-261">Если задать доступ tooBlob контейнер или контейнер, он позволяет общий доступ на чтение для больших двоичных объектов hello в этом контейнере.</span><span class="sxs-lookup"><span data-stu-id="3cca8-261">If you set access for a container tooBlob or Container, it will allow public read access for hello blobs in that container.</span></span> <span data-ttu-id="3cca8-262">Это означает, что любой пользователь, URL-адрес tooa больших двоичных объектов в этом контейнере можно открыть в браузере без с помощью подписи общего доступа или having hello ключи учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-262">This means anyone with a URL pointing tooa blob in that container can open it in a browser without using a Shared Access Signature or having hello storage account keys.</span></span>

### <a name="storage-account-keys"></a><span data-ttu-id="3cca8-263">Ключи учетной записи хранения</span><span class="sxs-lookup"><span data-stu-id="3cca8-263">Storage Account Keys</span></span>
<span data-ttu-id="3cca8-264">Ключи учетной записи хранения — это 512-разрядный строки, созданные Azure, наряду с именем учетной записи хранилища hello, может быть используется tooaccess hello данных, хранящихся в учетной записи хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-264">Storage account keys are 512-bit strings created by Azure that, along with hello storage account name, can be used tooaccess hello data objects stored in hello storage account.</span></span>

<span data-ttu-id="3cca8-265">Например можно чтения больших двоичных объектов, записи tooqueues, создайте таблицы и изменять файлы.</span><span class="sxs-lookup"><span data-stu-id="3cca8-265">For example, you can read blobs, write tooqueues, create tables, and modify files.</span></span> <span data-ttu-id="3cca8-266">Многие из этих действий может быть выполнено с помощью hello Azure портала или с помощью одного из многих приложений обозреватель хранилищ.</span><span class="sxs-lookup"><span data-stu-id="3cca8-266">Many of these actions can be performed through hello Azure portal, or using one of many Storage Explorer applications.</span></span> <span data-ttu-id="3cca8-267">Также можно написать код toouse hello API-интерфейса REST или один из tooperform клиентских библиотек хранилища hello этих операций.</span><span class="sxs-lookup"><span data-stu-id="3cca8-267">You can also write code toouse hello REST API or one of hello Storage Client Libraries tooperform these operations.</span></span>

<span data-ttu-id="3cca8-268">Как это описано в разделе "hello" на hello [безопасности плоскости управления](#management-plane-security), иметь доступ к toohello хранилища ключей для учетной записи хранения классический могут предоставляться, предоставляя toohello полного доступа к подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-268">As discussed in hello section on hello [Management Plane Security](#management-plane-security), access toohello storage keys for a Classic storage account can be granted by giving full access toohello Azure subscription.</span></span> <span data-ttu-id="3cca8-269">Ключи хранилища toohello доступа для учетной записи хранилища с помощью модели hello диспетчера ресурсов Azure можно управлять через управление доступом на основе ролей (RBAC).</span><span class="sxs-lookup"><span data-stu-id="3cca8-269">Access toohello storage keys for a storage account using hello Azure Resource Manager model can be controlled through Role-Based Access Control (RBAC).</span></span>

### <a name="how-toodelegate-access-tooobjects-in-your-account-using-shared-access-signatures-and-stored-access-policies"></a><span data-ttu-id="3cca8-270">Как toodelegate доступ к tooobjects в вашей учетной записи, с помощью подписей общего доступа и хранимые политики доступа</span><span class="sxs-lookup"><span data-stu-id="3cca8-270">How toodelegate access tooobjects in your account using Shared Access Signatures and Stored Access Policies</span></span>
<span data-ttu-id="3cca8-271">Подпись коллективного доступа является строка, содержащая маркер безопасности, который может быть присоединен tooa URI, который позволяет вам объектов toostorage toodelegate доступа и указать ограничения, такие как разрешения hello и hello диапазон даты и времени доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-271">A Shared Access Signature is a string containing a security token that can be attached tooa URI that allows you toodelegate access toostorage objects and specify constraints such as hello permissions and hello date/time range of access.</span></span>

<span data-ttu-id="3cca8-272">Вы можете предоставить доступ tooblobs, контейнеры, очереди сообщений, файлов и таблиц.</span><span class="sxs-lookup"><span data-stu-id="3cca8-272">You can grant access tooblobs, containers, queue messages, files, and tables.</span></span> <span data-ttu-id="3cca8-273">С таблицами вы можете фактически предоставлять разрешение tooaccess диапазон сущностей в таблице hello, указав hello секций и строк диапазонов ключей toowhich вы хотите получить доступ toohave пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-273">With tables, you can actually grant permission tooaccess a range of entities in hello table by specifying hello partition and row key ranges toowhich you want hello user toohave access.</span></span> <span data-ttu-id="3cca8-274">Например если у вас есть данные, хранящиеся с ключом раздела географических состояния, вы можете предоставить кто-то hello toojust доступа к данным в Калифорнии.</span><span class="sxs-lookup"><span data-stu-id="3cca8-274">For example, if you have data stored with a partition key of geographical state, you could give someone access toojust hello data for California.</span></span>

<span data-ttu-id="3cca8-275">В другом примере может предоставить маркер SAS, который позволяет ему очереди tooa toowrite записи веб-приложения и дать исполнитель роли приложения сообщений tooget маркера SAS из hello, очереди и обрабатывать их.</span><span class="sxs-lookup"><span data-stu-id="3cca8-275">In another example, you might give a web application a SAS token that enables it toowrite entries tooa queue, and give a worker role application a SAS token tooget messages from hello queue and process them.</span></span> <span data-ttu-id="3cca8-276">Или может предоставить одному клиенту маркер SAS, их можно использовать контейнер tooa tooupload изображений в хранилище больших двоичных объектов и предоставить tooread разрешений приложения web этих изображений.</span><span class="sxs-lookup"><span data-stu-id="3cca8-276">Or you could give one customer a SAS token they can use tooupload pictures tooa container in Blob Storage, and give a web application permission tooread those pictures.</span></span> <span data-ttu-id="3cca8-277">В обоих случаях является разделение областей ответственности — каждое приложение может быть предоставлен доступ к просто hello, требуемого в заказ tooperform своих задач.</span><span class="sxs-lookup"><span data-stu-id="3cca8-277">In both cases, there is a separation of concerns – each application can be given just hello access that they require in order tooperform their task.</span></span> <span data-ttu-id="3cca8-278">Это возможно благодаря использованию hello подписей общего доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-278">This is possible through hello use of Shared Access Signatures.</span></span>

#### <a name="why-you-want-toouse-shared-access-signatures"></a><span data-ttu-id="3cca8-279">Почему нужно toouse подписей общего доступа</span><span class="sxs-lookup"><span data-stu-id="3cca8-279">Why you want toouse Shared Access Signatures</span></span>
<span data-ttu-id="3cca8-280">Для чего нужна toouse SAS вместо просто размещайте ключ учетной записи хранилища намного проще?</span><span class="sxs-lookup"><span data-stu-id="3cca8-280">Why would you want toouse an SAS instead of just giving out your storage account key, which is so much easier?</span></span> <span data-ttu-id="3cca8-281">Размещайте ключ учетной записи хранилища — такими как совместное использование ключей hello Королевство вашего хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-281">Giving out your storage account key is like sharing hello keys of your storage kingdom.</span></span> <span data-ttu-id="3cca8-282">без каких-либо ограничений.</span><span class="sxs-lookup"><span data-stu-id="3cca8-282">It grants complete access.</span></span> <span data-ttu-id="3cca8-283">Кто-то может использовать ключи и отправить их учетной записи хранения музыкальной библиотеки tooyour.</span><span class="sxs-lookup"><span data-stu-id="3cca8-283">Someone could use your keys and upload their entire music library tooyour storage account.</span></span> <span data-ttu-id="3cca8-284">Он также может заменить ваши файлы на версии, зараженные вирусами, или украсть ваши данные.</span><span class="sxs-lookup"><span data-stu-id="3cca8-284">They could also replace your files with virus-infected versions, or steal your data.</span></span> <span data-ttu-id="3cca8-285">Передача учетной записи хранилища tooyour неограниченный доступ — это то, которое не должно быть выполнено в незначительной степени.</span><span class="sxs-lookup"><span data-stu-id="3cca8-285">Giving away unlimited access tooyour storage account is something that should not be taken lightly.</span></span>

<span data-ttu-id="3cca8-286">С подписями коллективного доступа клиента можно присвоить только hello разрешения, необходимые для ограниченного промежутка времени.</span><span class="sxs-lookup"><span data-stu-id="3cca8-286">With Shared Access Signatures, you can give a client just hello permissions required for a limited amount of time.</span></span> <span data-ttu-id="3cca8-287">Например если кто-то отправляет tooyour учетную запись больших двоичных объектов, можно предоставить их доступ на запись для ровно столько времени tooupload hello большого двоичного объекта (в зависимости от размера hello hello большого двоичного объекта, конечно).</span><span class="sxs-lookup"><span data-stu-id="3cca8-287">For example, if someone is uploading a blob tooyour account, you can grant them write access for just enough time tooupload hello blob (depending on hello size of hello blob, of course).</span></span> <span data-ttu-id="3cca8-288">Если вы изменили решение, то можете отозвать доступ.</span><span class="sxs-lookup"><span data-stu-id="3cca8-288">And if you change your mind, you can revoke that access.</span></span>

<span data-ttu-id="3cca8-289">Кроме того можно указать, что запросов, выполненных с помощью SAS ограниченных tooa определенных IP-адрес или IP-адрес внешнего tooAzure диапазона.</span><span class="sxs-lookup"><span data-stu-id="3cca8-289">Additionally, you can specify that requests made using a SAS are restricted tooa certain IP address or IP address range external tooAzure.</span></span> <span data-ttu-id="3cca8-290">Вы также можете указать, что запросы должны выполняться по определенному протоколу (HTTPS или HTTP/HTTPS).</span><span class="sxs-lookup"><span data-stu-id="3cca8-290">You can also require that requests are made using a specific protocol (HTTPS or HTTP/HTTPS).</span></span> <span data-ttu-id="3cca8-291">Это означает, что если требуется только tooallow HTTPS-трафика, можно задать только tooHTTPS протокола hello необходимые и HTTP-трафик будет заблокирован.</span><span class="sxs-lookup"><span data-stu-id="3cca8-291">This means if you only want tooallow HTTPS traffic, you can set hello required protocol tooHTTPS only, and HTTP traffic will be blocked.</span></span>

#### <a name="definition-of-a-shared-access-signature"></a><span data-ttu-id="3cca8-292">Определение подписанного URL-адреса</span><span class="sxs-lookup"><span data-stu-id="3cca8-292">Definition of a Shared Access Signature</span></span>
<span data-ttu-id="3cca8-293">Подпись коллективного доступа является набор параметров запроса добавляется toohello URL-адрес, указывающий на ресурс hello</span><span class="sxs-lookup"><span data-stu-id="3cca8-293">A Shared Access Signature is a set of query parameters appended toohello URL pointing at hello resource</span></span>

<span data-ttu-id="3cca8-294">предоставляющий сведения о доступе к hello разрешено и hello продолжительность времени, для которого hello разрешен доступ.</span><span class="sxs-lookup"><span data-stu-id="3cca8-294">that provides information about hello access allowed and hello length of time for which hello access is permitted.</span></span> <span data-ttu-id="3cca8-295">Ниже приведен пример; Этот URI предоставляет доступ на чтение tooa больших двоичных объектов на пять минут.</span><span class="sxs-lookup"><span data-stu-id="3cca8-295">Here is an example; this URI provides read access tooa blob for five minutes.</span></span> <span data-ttu-id="3cca8-296">Обратите внимание на то, что параметры запроса SAS должны иметь кодировку URL, например, двоеточие (:) должно обозначаться как %3A, а пробел — %20.</span><span class="sxs-lookup"><span data-stu-id="3cca8-296">Note that SAS query parameters must be URL Encoded, such as %3A for colon (:) or %20 for a space.</span></span>

```
http://mystorage.blob.core.windows.net/mycontainer/myblob.txt (URL toohello blob)
?sv=2015-04-05 (storage service version)
&st=2015-12-10T22%3A18%3A26Z (start time, in UTC time and URL encoded)
&se=2015-12-10T22%3A23%3A26Z (end time, in UTC time and URL encoded)
&sr=b (resource is a blob)
&sp=r (read access)
&sip=168.1.5.60-168.1.5.70 (requests can only come from this range of IP addresses)
&spr=https (only allow HTTPS requests)
&sig=Z%2FRHIX5Xcg0Mq2rqI3OlWTjEg2tYkboXr1P9ZUXDtkk%3D (signature used for hello authentication of hello SAS)
```

#### <a name="how-hello-shared-access-signature-is-authenticated-by-hello-azure-storage-service"></a><span data-ttu-id="3cca8-297">Как hello проверку подписи общего доступа hello службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-297">How hello Shared Access Signature is authenticated by hello Azure Storage Service</span></span>
<span data-ttu-id="3cca8-298">Когда служба хранилища hello получает запрос hello, принимает параметры hello входного запроса и создает подпись с помощью hello того же метода, как hello вызывающей программе.</span><span class="sxs-lookup"><span data-stu-id="3cca8-298">When hello storage service receives hello request, it takes hello input query parameters and creates a signature using hello same method as hello calling program.</span></span> <span data-ttu-id="3cca8-299">Затем он сравнивает две сигнатуры hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-299">It then compares hello two signatures.</span></span> <span data-ttu-id="3cca8-300">Если они согласны, тогда hello службы хранилища можно проверить hello хранилища службы версии toomake том, что он является допустимым, убедитесь, что hello текущую дату и время находятся в указанном окне приветствия, убедитесь, что hello доступа запрошенный соответствует toohello запрос и т. д.</span><span class="sxs-lookup"><span data-stu-id="3cca8-300">If they agree, then hello storage service can check hello storage service version toomake sure it's valid, verify that hello current date and time are within hello specified window, make sure hello access requested corresponds toohello request made, etc.</span></span>

<span data-ttu-id="3cca8-301">Например с нашей URL-адрес выше, если hello URL-адрес указывает файл tooa вместо большого двоичного объекта, этот запрос завершится сбоем, так как он указывает, что hello подписи общего доступа, предназначен для большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="3cca8-301">For example, with our URL above, if hello URL was pointing tooa file instead of a blob, this request would fail because it specifies that hello Shared Access Signature is for a blob.</span></span> <span data-ttu-id="3cca8-302">Если вызывается команда REST hello tooupdate большого двоичного объекта, он бы оказался неудачным hello подписи общего доступа указывает, что разрешен доступ только для чтения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-302">If hello REST command being called was tooupdate a blob, it would fail because hello Shared Access Signature specifies that only read access is permitted.</span></span>

#### <a name="types-of-shared-access-signatures"></a><span data-ttu-id="3cca8-303">Типы подписанных URL-адресов</span><span class="sxs-lookup"><span data-stu-id="3cca8-303">Types of Shared Access Signatures</span></span>
* <span data-ttu-id="3cca8-304">SAS уровня службы может быть используется tooaccess конкретных ресурсов в учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-304">A service-level SAS can be used tooaccess specific resources in a storage account.</span></span> <span data-ttu-id="3cca8-305">Некоторые примеры получение списка больших двоичных объектов в контейнере, загрузка большого двоичного объекта, обновление сущности в таблице, добавление tooa сообщений в очереди и передача файла tooa общую папку.</span><span class="sxs-lookup"><span data-stu-id="3cca8-305">Some examples of this are retrieving a list of blobs in a container, downloading a blob, updating an entity in a table, adding messages tooa queue or uploading a file tooa file share.</span></span>
* <span data-ttu-id="3cca8-306">SAS на уровне учетной записи может быть используется tooaccess все, что подписанный URL-адрес уровня службы может использоваться для.</span><span class="sxs-lookup"><span data-stu-id="3cca8-306">An account-level SAS can be used tooaccess anything that a service-level SAS can be used for.</span></span> <span data-ttu-id="3cca8-307">Кроме того он может предоставить tooresources параметры, не допускается в отношении SAS уровня службы, такие как hello возможность toocreate контейнеров, таблиц, очередей и общих папок.</span><span class="sxs-lookup"><span data-stu-id="3cca8-307">Additionally, it can give options tooresources that are not permitted with a service-level SAS, such as hello ability toocreate containers, tables, queues, and file shares.</span></span> <span data-ttu-id="3cca8-308">Можно также указать доступа к службам toomultiple за один раз.</span><span class="sxs-lookup"><span data-stu-id="3cca8-308">You can also specify access toomultiple services at once.</span></span> <span data-ttu-id="3cca8-309">Например можно дать кто-то доступа tooboth больших двоичных объектов и файлов в вашей учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-309">For example, you might give someone access tooboth blobs and files in your storage account.</span></span>

#### <a name="creating-an-sas-uri"></a><span data-ttu-id="3cca8-310">Создание универсального кода ресурса (URI) SAS</span><span class="sxs-lookup"><span data-stu-id="3cca8-310">Creating an SAS URI</span></span>
1. <span data-ttu-id="3cca8-311">По требованию, определения всех параметров запроса hello каждый раз, можно создать нерегламентированный URI.</span><span class="sxs-lookup"><span data-stu-id="3cca8-311">You can create an ad hoc URI on demand, defining all of hello query parameters each time.</span></span>

   <span data-ttu-id="3cca8-312">Это обеспечивает гибкость, но если у вас есть логически связанный и относительно постоянный набор параметров, лучше использовать хранимую политику доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-312">This is really flexible, but if you have a logical set of parameters that are similar each time, using a Stored Access Policy is a better idea.</span></span>
2. <span data-ttu-id="3cca8-313">Хранимую политику доступа можно создать для всего контейнера, общей папки, таблицы или очереди.</span><span class="sxs-lookup"><span data-stu-id="3cca8-313">You can create a Stored Access Policy for an entire container, file share, table, or queue.</span></span> <span data-ttu-id="3cca8-314">Затем его можно использовать в качестве основы hello для hello идентификаторы URI SAS, вы создаете.</span><span class="sxs-lookup"><span data-stu-id="3cca8-314">Then you can use this as hello basis for hello SAS URIs you create.</span></span> <span data-ttu-id="3cca8-315">Разрешения на основе хранимых политик доступа можно легко отзывать.</span><span class="sxs-lookup"><span data-stu-id="3cca8-315">Permissions based on Stored Access Policies can be easily revoked.</span></span> <span data-ttu-id="3cca8-316">Может иметь копию too5 политик, определенных для каждого контейнера, очереди, таблицы или общей папки.</span><span class="sxs-lookup"><span data-stu-id="3cca8-316">You can have up too5 policies defined on each container, queue, table, or file share.</span></span>

   <span data-ttu-id="3cca8-317">Например если предполагается toohave многие пользователи считывать большие двоичные объекты hello в определенном контейнере, можно создать хранимой политикой доступа с надписью «предоставить доступ для чтения» и другие параметры, которые будут hello же каждый раз.</span><span class="sxs-lookup"><span data-stu-id="3cca8-317">For example, if you were going toohave many people read hello blobs in a specific container, you could create a Stored Access Policy that says "give read access" and any other settings that will be hello same each time.</span></span> <span data-ttu-id="3cca8-318">Затем можно создать универсальный код Ресурса SAS с использованием параметров hello hello хранимые политики доступа и указав hello даты и времени.</span><span class="sxs-lookup"><span data-stu-id="3cca8-318">Then you can create an SAS URI using hello settings of hello Stored Access Policy and specifying hello expiration date/time.</span></span> <span data-ttu-id="3cca8-319">Hello этой возможности является отсутствие необходимости toospecify все hello параметров запроса, каждый раз.</span><span class="sxs-lookup"><span data-stu-id="3cca8-319">hello advantage of this is that you don't have toospecify all of hello query parameters every time.</span></span>

#### <a name="revocation"></a><span data-ttu-id="3cca8-320">Запрет доступа</span><span class="sxs-lookup"><span data-stu-id="3cca8-320">Revocation</span></span>
<span data-ttu-id="3cca8-321">Предположим, что ваш SAS был скомпрометирован, либо требуется toochange его из-за безопасности организации или нормативных требований.</span><span class="sxs-lookup"><span data-stu-id="3cca8-321">Suppose your SAS has been compromised, or you want toochange it because of corporate security or regulatory compliance requirements.</span></span> <span data-ttu-id="3cca8-322">Как Вы отзываете доступа tooa ресурсов с помощью этого SAS</span><span class="sxs-lookup"><span data-stu-id="3cca8-322">How do you revoke access tooa resource using that SAS?</span></span> <span data-ttu-id="3cca8-323">Он зависит от способа создания hello универсальный код Ресурса SAS.</span><span class="sxs-lookup"><span data-stu-id="3cca8-323">It depends on how you created hello SAS URI.</span></span>

<span data-ttu-id="3cca8-324">В случае с нерегламентированным кодом URI есть три варианта.</span><span class="sxs-lookup"><span data-stu-id="3cca8-324">If you are using ad hoc URI's, you have three options.</span></span> <span data-ttu-id="3cca8-325">Можно выдавать маркеры SAS с политиками срока действия короткий и просто ожидать hello SAS tooexpire.</span><span class="sxs-lookup"><span data-stu-id="3cca8-325">You can issue SAS tokens with short expiration policies and simply wait for hello SAS tooexpire.</span></span> <span data-ttu-id="3cca8-326">Можно переименовать или удалить ресурс hello (при условии, что маркер hello был один объект с областью tooa).</span><span class="sxs-lookup"><span data-stu-id="3cca8-326">You can rename or delete hello resource (assuming hello token was scoped tooa single object).</span></span> <span data-ttu-id="3cca8-327">Вы можете изменить hello ключи учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-327">You can change hello storage account keys.</span></span> <span data-ttu-id="3cca8-328">Последний вариант может иметь большое влияние, в зависимости от того, сколько служб с помощью этой учетной записи хранения и, скорее всего, проблема не возникает необходимости toodo без некоторых планирования.</span><span class="sxs-lookup"><span data-stu-id="3cca8-328">This last option can have a big impact, depending on how many services are using that storage account, and probably isn't something you want toodo without some planning.</span></span>

<span data-ttu-id="3cca8-329">При использовании SAS, производным от хранимой политикой доступа, можно удалить доступ, отменив hello хранимые политики доступа — можно просто изменить его, уже истек, или полностью удалите его.</span><span class="sxs-lookup"><span data-stu-id="3cca8-329">If you are using a SAS derived from a Stored Access Policy, you can remove access by revoking hello Stored Access Policy – you can just change it so it has already expired, or you can remove it altogether.</span></span> <span data-ttu-id="3cca8-330">Это изменение вступает в силу немедленно и делает недействительными все подписанные URL-адреса, использующие эту хранимую политику доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-330">This takes effect immediately, and invalidates every SAS created using that Stored Access Policy.</span></span> <span data-ttu-id="3cca8-331">Обновление или удаление hello хранимой политикой доступа может повлиять на пользователей, доступ к этой конкретному контейнеру, общую папку, таблицы или очереди через SAS, но если hello клиентов записываются, поэтому они запрашивают новый SAS, когда hello старого становится недействительным, это будет работать.</span><span class="sxs-lookup"><span data-stu-id="3cca8-331">Updating or removing hello Stored Access Policy may impact people accessing that specific container, file share, table, or queue via SAS, but if hello clients are written so they request a new SAS when hello old one becomes invalid, this will work fine.</span></span>

<span data-ttu-id="3cca8-332">Так как использование SAS, производным от хранимой политикой доступа позволяет hello toorevoke возможность, что SAS немедленно, он является hello рекомендуется tooalways лучший подход использовать политики доступа хранятся по возможности.</span><span class="sxs-lookup"><span data-stu-id="3cca8-332">Because using a SAS derived from a Stored Access Policy gives you hello ability toorevoke that SAS immediately, it is hello recommended best practice tooalways use Stored Access Policies when possible.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-333">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-333">Resources</span></span>
<span data-ttu-id="3cca8-334">Более подробные сведения об использовании подписей общего доступа и хранимые политики доступа, дополненный примерами см. следующие статьи toohello:</span><span class="sxs-lookup"><span data-stu-id="3cca8-334">For more detailed information on using Shared Access Signatures and Stored Access Policies, complete with examples, please refer toohello following articles:</span></span>

* <span data-ttu-id="3cca8-335">Ниже приведены справочные статьи по hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-335">These are hello reference articles.</span></span>

  * [<span data-ttu-id="3cca8-336">Подписанный URL-адрес уровня службы</span><span class="sxs-lookup"><span data-stu-id="3cca8-336">Service SAS</span></span>](https://msdn.microsoft.com/library/dn140256.aspx)

    <span data-ttu-id="3cca8-337">В этой статье приводятся примеры использования подписанного URL-адреса уровня службы с BLOB-объектами, сообщениями в очереди, диапазонами в таблице и файлами.</span><span class="sxs-lookup"><span data-stu-id="3cca8-337">This article provides examples of using a service-level SAS with blobs, queue messages, table ranges, and files.</span></span>
  * [<span data-ttu-id="3cca8-338">Создание подписанного URL-адреса уровня службы</span><span class="sxs-lookup"><span data-stu-id="3cca8-338">Constructing a service SAS</span></span>](https://msdn.microsoft.com/library/dn140255.aspx)
  * [<span data-ttu-id="3cca8-339">Создание подписанного URL-адреса уровня учетной записи</span><span class="sxs-lookup"><span data-stu-id="3cca8-339">Constructing an account SAS</span></span>](https://msdn.microsoft.com/library/mt584140.aspx)
* <span data-ttu-id="3cca8-340">Это учебники по использованию библиотеки клиента toocreate подписей общего доступа для hello .NET и хранимые политики доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-340">These are tutorials for using hello .NET client library toocreate Shared Access Signatures and Stored Access Policies.</span></span>

  * [<span data-ttu-id="3cca8-341">Использование подписанных URL-адресов (SAS)</span><span class="sxs-lookup"><span data-stu-id="3cca8-341">Using Shared Access Signatures (SAS)</span></span>](../storage-dotnet-shared-access-signature-part-1.md)
  * [<span data-ttu-id="3cca8-342">Подписи коллективного доступа, часть 2: Создание и использование SAS с hello службы BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="3cca8-342">Shared Access Signatures, Part 2: Create and Use a SAS with hello Blob Service</span></span>](../blobs/storage-dotnet-shared-access-signature-part-2.md)

    <span data-ttu-id="3cca8-343">Эта статья содержит описание модели SAS hello, примеры подписей общего доступа и рекомендации для hello рекомендуется использовать SAS.</span><span class="sxs-lookup"><span data-stu-id="3cca8-343">This article includes an explanation of hello SAS model, examples of Shared Access Signatures, and recommendations for hello best practice use of SAS.</span></span> <span data-ttu-id="3cca8-344">Также рассматривается — отзыв hello hello данного разрешения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-344">Also discussed is hello revocation of hello permission granted.</span></span>
* <span data-ttu-id="3cca8-345">Ограничение доступа по IP-адресу (список управления доступом по IP-адресам)</span><span class="sxs-lookup"><span data-stu-id="3cca8-345">Limiting access by IP Address (IP ACLs)</span></span>

  * [<span data-ttu-id="3cca8-346">Список управления доступом (ACL) конечной точки</span><span class="sxs-lookup"><span data-stu-id="3cca8-346">What is an endpoint Access Control List (ACLs)?</span></span>](../../virtual-network/virtual-networks-acl.md)
  * [<span data-ttu-id="3cca8-347">Создание подписанного URL-адреса уровня службы</span><span class="sxs-lookup"><span data-stu-id="3cca8-347">Constructing a Service SAS</span></span>](https://msdn.microsoft.com/library/azure/dn140255.aspx)

    <span data-ttu-id="3cca8-348">Это статье hello для SAS уровня обслуживания; он включает пример управления доступом к IP.</span><span class="sxs-lookup"><span data-stu-id="3cca8-348">This is hello reference article for service-level SAS; it includes an example of IP ACLing.</span></span>
  * [<span data-ttu-id="3cca8-349">Создание подписанного URL-адреса уровня учетной записи</span><span class="sxs-lookup"><span data-stu-id="3cca8-349">Constructing an Account SAS</span></span>](https://msdn.microsoft.com/library/azure/mt584140.aspx)

    <span data-ttu-id="3cca8-350">Это статье hello для SAS на уровне учетной записи; он включает пример управления доступом к IP.</span><span class="sxs-lookup"><span data-stu-id="3cca8-350">This is hello reference article for account-level SAS; it includes an example of IP ACLing.</span></span>
* <span data-ttu-id="3cca8-351">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="3cca8-351">Authentication</span></span>

  * [<span data-ttu-id="3cca8-352">Проверка подлинности для служб хранилища Azure hello</span><span class="sxs-lookup"><span data-stu-id="3cca8-352">Authentication for hello Azure Storage Services</span></span>](https://msdn.microsoft.com/library/azure/dd179428.aspx)
* <span data-ttu-id="3cca8-353">Учебник по началу работы с подписанными URL-адресами</span><span class="sxs-lookup"><span data-stu-id="3cca8-353">Shared Access Signatures Getting Started Tutorial</span></span>

  * [<span data-ttu-id="3cca8-354">Учебник по началу работы с подписанными URL-адресами</span><span class="sxs-lookup"><span data-stu-id="3cca8-354">SAS Getting Started Tutorial</span></span>](https://github.com/Azure-Samples/storage-dotnet-sas-getting-started)

## <a name="encryption-in-transit"></a><span data-ttu-id="3cca8-355">Шифрование при передаче</span><span class="sxs-lookup"><span data-stu-id="3cca8-355">Encryption in Transit</span></span>
### <a name="transport-level-encryption--using-https"></a><span data-ttu-id="3cca8-356">Шифрование на уровне транспорта с помощью протокола HTTPS</span><span class="sxs-lookup"><span data-stu-id="3cca8-356">Transport-Level Encryption – Using HTTPS</span></span>
<span data-ttu-id="3cca8-357">Еще один шаг займет tooensure hello безопасностью данных в хранилище Azure — данные hello tooencrypt между клиентом hello и хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-357">Another step you should take tooensure hello security of your Azure Storage data is tooencrypt hello data between hello client and Azure Storage.</span></span> <span data-ttu-id="3cca8-358">Первая рекомендация Hello является tooalways использовать hello [HTTPS](https://en.wikipedia.org/wiki/HTTPS) Здравствуйте, протокола, который обеспечивает безопасный обмен данными через общедоступный Интернет.</span><span class="sxs-lookup"><span data-stu-id="3cca8-358">hello first recommendation is tooalways use hello [HTTPS](https://en.wikipedia.org/wiki/HTTPS) protocol, which ensures secure communication over hello public Internet.</span></span>

<span data-ttu-id="3cca8-359">toohave безопасного канала связи, следует всегда использовать HTTPS при вызове hello API-интерфейс REST или обращении к объектов в хранилище.</span><span class="sxs-lookup"><span data-stu-id="3cca8-359">toohave a secure communication channel, you should always use HTTPS when calling hello REST APIs or accessing objects in storage.</span></span> <span data-ttu-id="3cca8-360">Кроме того **подписей общего доступа**, которую можно использовать toodelegate доступ к объектам хранилища tooAzure, включите параметр toospecify, только hello, можно использовать протокол HTTPS, при использовании подписей общего доступа, что позволит любому пользователю отправкой статьях с токенами SAS будет использовать правильный тип протокола hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-360">Also, **Shared Access Signatures**, which can be used toodelegate access tooAzure Storage objects, include an option toospecify that only hello HTTPS protocol can be used when using Shared Access Signatures, ensuring that anybody sending out links with SAS tokens will use hello proper protocol.</span></span>

<span data-ttu-id="3cca8-361">Можно принудительно задать hello использование протокола HTTPS во время вызова объектов tooaccess API-интерфейс REST hello в учетных записях хранения, позволяя [Безопасная передача необходимые](../storage-require-secure-transfer.md) для учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-361">You can enforce hello use of HTTPS when calling hello REST APIs tooaccess objects in storage accounts by enabling [Secure transfer required](../storage-require-secure-transfer.md) for hello storage account.</span></span> <span data-ttu-id="3cca8-362">После этого подключения по протоколу HTTP будут отклоняться.</span><span class="sxs-lookup"><span data-stu-id="3cca8-362">Connections using HTTP will be refused once this is enabled.</span></span>

### <a name="using-encryption-during-transit-with-azure-file-shares"></a><span data-ttu-id="3cca8-363">Использование шифрования при обмене данными с общими папками Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-363">Using encryption during transit with Azure File shares</span></span>
<span data-ttu-id="3cca8-364">Хранилище файлов Azure поддерживает протокол HTTPS при использовании REST API hello, но наиболее часто используемых как файловый ресурс SMB подключенные tooa виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3cca8-364">Azure File storage supports HTTPS when using hello REST API, but is more commonly used as an SMB file share attached tooa VM.</span></span> <span data-ttu-id="3cca8-365">SMB 2.1 не поддерживает шифрование, поэтому соединения разрешены только в пределах hello же область в Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-365">SMB 2.1 does not support encryption, so connections are only allowed within hello same region in Azure.</span></span> <span data-ttu-id="3cca8-366">Тем не менее SMB 3.0 поддерживает шифрование и оно станет доступно в Windows Server 2012 R2, Windows 8, Windows 8.1 и Windows 10, позволяя различных регионах доступ и даже доступа на рабочем столе hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-366">However, SMB 3.0 supports encryption, and it's available in Windows Server 2012 R2, Windows 8, Windows 8.1, and Windows 10, allowing cross-region access and even access on hello desktop.</span></span>

<span data-ttu-id="3cca8-367">Обратите внимание, что общих ресурсов Azure можно использовать с Unix, hello клиент Linux SMB пока не поддерживает шифрования, поэтому доступ разрешен только в пределах региона Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-367">Note that while Azure File shares can be used with Unix, hello Linux SMB client does not yet support encryption, so access is only allowed within an Azure region.</span></span> <span data-ttu-id="3cca8-368">Поддержка шифрования для Linux находится на стратегия hello разработчиков Linux выполняют SMB.</span><span class="sxs-lookup"><span data-stu-id="3cca8-368">Encryption support for Linux is on hello roadmap of Linux developers responsible for SMB functionality.</span></span> <span data-ttu-id="3cca8-369">При добавлении шифрования, будет иметь такие же возможности для доступа к общей папке файлов Azure для Linux, как и для Windows hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-369">When they add encryption, you will have hello same ability for accessing an Azure File share on Linux as you do for Windows.</span></span>

<span data-ttu-id="3cca8-370">Можно принудительно задать hello использование шифрования с hello службы файлов Azure, позволяя [Безопасная передача необходимые](../storage-require-secure-transfer.md) для учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-370">You can enforce hello use of encryption with hello Azure Files service by enabling [Secure transfer required](../storage-require-secure-transfer.md) for hello storage account.</span></span> <span data-ttu-id="3cca8-371">Если с помощью hello API-интерфейс REST, HTTPs не требуется.</span><span class="sxs-lookup"><span data-stu-id="3cca8-371">If using hello REST APIs, HTTPs is required.</span></span> <span data-ttu-id="3cca8-372">При использовании протокола SMB будут успешно устанавливаться только подключения, поддерживающие шифрование.</span><span class="sxs-lookup"><span data-stu-id="3cca8-372">For SMB, only SMB connections that support encryption will connect successfully.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-373">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-373">Resources</span></span>
* [<span data-ttu-id="3cca8-374">Как toouse хранилища Azure File с Linux</span><span class="sxs-lookup"><span data-stu-id="3cca8-374">How toouse Azure File storage with Linux</span></span>](../storage-how-to-use-files-linux.md)

  <span data-ttu-id="3cca8-375">В этой статье показано, как предоставить доступ toomount файл Azure для Linux системы и отправки или скачивания файлов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-375">This article shows how toomount an Azure File share on a Linux system and upload/download files.</span></span>
* [<span data-ttu-id="3cca8-376">Приступая к работе с хранилищем файлов Azure в Windows</span><span class="sxs-lookup"><span data-stu-id="3cca8-376">Get started with Azure File storage on Windows</span></span>](../storage-dotnet-how-to-use-files.md)

  <span data-ttu-id="3cca8-377">В данной статье приводится обзор общих ресурсов Azure и как toomount и использовать их с помощью PowerShell и .NET.</span><span class="sxs-lookup"><span data-stu-id="3cca8-377">This article gives an overview of Azure File shares and how toomount and use them using PowerShell and .NET.</span></span>
* <span data-ttu-id="3cca8-378">[Inside Azure File Storage](https://azure.microsoft.com/blog/inside-azure-file-storage/) (Хранилище файлов Azure: взгляд изнутри)</span><span class="sxs-lookup"><span data-stu-id="3cca8-378">[Inside Azure File storage](https://azure.microsoft.com/blog/inside-azure-file-storage/)</span></span>

  <span data-ttu-id="3cca8-379">В этой статье объявляет hello общей доступности хранилища Azure File и технические сведения о шифровании hello SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="3cca8-379">This article announces hello general availability of Azure File storage and provides technical details about hello SMB 3.0 encryption.</span></span>

### <a name="using-client-side-encryption-toosecure-data-that-you-send-toostorage"></a><span data-ttu-id="3cca8-380">С помощью данных toosecure шифрования на стороне клиента отправки toostorage</span><span class="sxs-lookup"><span data-stu-id="3cca8-380">Using Client-side encryption toosecure data that you send toostorage</span></span>
<span data-ttu-id="3cca8-381">Еще одним средством обеспечения безопасности данных в процессе передачи между клиентским приложением и хранилищем является шифрование на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="3cca8-381">Another option that helps you ensure that your data is secure while being transferred between a client application and Storage is Client-side Encryption.</span></span> <span data-ttu-id="3cca8-382">Hello данные шифруются перед передачей в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-382">hello data is encrypted before being transferred into Azure Storage.</span></span> <span data-ttu-id="3cca8-383">При получении данных hello из хранилища Azure hello расшифровка данных происходит после получения hello клиентской стороны.</span><span class="sxs-lookup"><span data-stu-id="3cca8-383">When retrieving hello data from Azure Storage, hello data is decrypted after it is received on hello client side.</span></span> <span data-ttu-id="3cca8-384">Несмотря на то, что hello данные шифруются, перейдя по линии hello, рекомендуется использовать протокол HTTPS, как он содержит проверку целостности данных, встроенных в которой снижения влияния на целостность данных hello hello сетевых ошибок.</span><span class="sxs-lookup"><span data-stu-id="3cca8-384">Even though hello data is encrypted going across hello wire, we recommend that you also use HTTPS, as it has data integrity checks built in which help mitigate network errors affecting hello integrity of hello data.</span></span>

<span data-ttu-id="3cca8-385">Шифрование на стороне клиента также является способ шифрования данных при хранении как hello данные хранятся в зашифрованном виде.</span><span class="sxs-lookup"><span data-stu-id="3cca8-385">Client-side encryption is also a method for encrypting your data at rest, as hello data is stored in its encrypted form.</span></span> <span data-ttu-id="3cca8-386">Мы рассмотрим это более подробно в разделе "hello" на [шифрование неактивных](#encryption-at-rest).</span><span class="sxs-lookup"><span data-stu-id="3cca8-386">We'll talk about this in more detail in hello section on [Encryption at Rest](#encryption-at-rest).</span></span>

## <a name="encryption-at-rest"></a><span data-ttu-id="3cca8-387">Шифрование при хранении</span><span class="sxs-lookup"><span data-stu-id="3cca8-387">Encryption at Rest</span></span>
<span data-ttu-id="3cca8-388">В Azure есть три функции, обеспечивающие шифрование при хранении.</span><span class="sxs-lookup"><span data-stu-id="3cca8-388">There are three Azure features that provide encryption at rest.</span></span> <span data-ttu-id="3cca8-389">Azure шифрование диска — используется tooencrypt hello ОС и диски с данными в виртуальных машинах IaaS.</span><span class="sxs-lookup"><span data-stu-id="3cca8-389">Azure Disk Encryption is used tooencrypt hello OS and data disks in IaaS Virtual Machines.</span></span> <span data-ttu-id="3cca8-390">Здравствуйте, другие два — шифрования на стороне клиента и SSE — работают как данные, используемые tooencrypt в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-390">hello other two – Client-side Encryption and SSE – are both used tooencrypt data in Azure Storage.</span></span> <span data-ttu-id="3cca8-391">Рассмотрим каждую из этих функций, а затем сравним их и посмотрим, в каких случаях их можно использовать.</span><span class="sxs-lookup"><span data-stu-id="3cca8-391">Let's look at each of these, and then do a comparison and see when each one can be used.</span></span>

<span data-ttu-id="3cca8-392">При использовании данных hello tooencrypt шифрования на стороне клиента во время передачи (который также хранится в зашифрованном виде в хранилище) может предпочитают использовать toosimply HTTPS во время передачи hello и определить, какой метод для hello toobe данных, автоматически шифруются, если он является сохраняются.</span><span class="sxs-lookup"><span data-stu-id="3cca8-392">While you can use Client-side Encryption tooencrypt hello data in transit (which is also stored in its encrypted form in Storage), you may prefer toosimply use HTTPS during hello transfer, and have some way for hello data toobe automatically encrypted when it is stored.</span></span> <span data-ttu-id="3cca8-393">Существует два способа toodo это — шифрование диска Azure и SSE.</span><span class="sxs-lookup"><span data-stu-id="3cca8-393">There are two ways toodo this -- Azure Disk Encryption and SSE.</span></span> <span data-ttu-id="3cca8-394">Один используется toodirectly шифрования hello данных на дисках операционной системы и данных, используемых виртуальными машинами и hello других — используется tooencrypt данные, записанные tooAzure хранилища больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-394">One is used toodirectly encrypt hello data on OS and data disks used by VMs, and hello other is used tooencrypt data written tooAzure Blob Storage.</span></span>

### <a name="storage-service-encryption-sse"></a><span data-ttu-id="3cca8-395">шифрования службы хранилища (SSE)</span><span class="sxs-lookup"><span data-stu-id="3cca8-395">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="3cca8-396">SSE позволяет toorequest, службы хранилища hello автоматического шифрования hello данных при записи его tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-396">SSE allows you toorequest that hello storage service automatically encrypt hello data when writing it tooAzure Storage.</span></span> <span data-ttu-id="3cca8-397">При чтении данных hello из хранилища Azure, он будет расшифрован службой хранения hello перед возвращением.</span><span class="sxs-lookup"><span data-stu-id="3cca8-397">When you read hello data from Azure Storage, it will be decrypted by hello storage service before being returned.</span></span> <span data-ttu-id="3cca8-398">Это позволяет toosecure данных без необходимости toomodify кода или добавить приложения tooany кода.</span><span class="sxs-lookup"><span data-stu-id="3cca8-398">This enables you toosecure your data without having toomodify code or add code tooany applications.</span></span>

<span data-ttu-id="3cca8-399">Это является параметром, который применяется учетная запись toohello всего хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-399">This is a setting that applies toohello whole storage account.</span></span> <span data-ttu-id="3cca8-400">Можно включить и отключить эту функцию, изменив значение hello приветствия.</span><span class="sxs-lookup"><span data-stu-id="3cca8-400">You can enable and disable this feature by changing hello value of hello setting.</span></span> <span data-ttu-id="3cca8-401">toodo это, можно использовать портал Azure, PowerShell, hello hello Azure CLI, hello API-интерфейса REST поставщика ресурсов хранилища или hello клиентской библиотеки хранилища .NET.</span><span class="sxs-lookup"><span data-stu-id="3cca8-401">toodo this, you can use hello Azure portal, PowerShell, hello Azure CLI, hello Storage Resource Provider REST API, or hello .NET Storage Client Library.</span></span> <span data-ttu-id="3cca8-402">По умолчанию шифрование службы хранилища отключено.</span><span class="sxs-lookup"><span data-stu-id="3cca8-402">By default, SSE is turned off.</span></span>

<span data-ttu-id="3cca8-403">В настоящее время hello ключи, используемые для шифрования hello осуществляется корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="3cca8-403">At this time, hello keys used for hello encryption are managed by Microsoft.</span></span> <span data-ttu-id="3cca8-404">Мы изначально создавать ключи hello и управление hello безопасного хранения hello ключи, а также обычных поворота hello в соответствии с определением внутренней политики Microsoft.</span><span class="sxs-lookup"><span data-stu-id="3cca8-404">We generate hello keys originally, and manage hello secure storage of hello keys as well as hello regular rotation as defined by internal Microsoft policy.</span></span> <span data-ttu-id="3cca8-405">В будущем hello получить возможность toomanage hello ключей шифрования и предоставляют пути миграции из ключей, управляемых Microsoft ключей, управляемых toocustomer.</span><span class="sxs-lookup"><span data-stu-id="3cca8-405">In hello future, you will get hello ability toomanage your own encryption keys, and provide a migration path from Microsoft-managed keys toocustomer-managed keys.</span></span>

<span data-ttu-id="3cca8-406">Эта функция доступна для Standard и Premium хранилища учетных записей, созданных с помощью модели развертывания диспетчера ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-406">This feature is available for Standard and Premium Storage accounts created using hello Resource Manager deployment model.</span></span> <span data-ttu-id="3cca8-407">SSE применяется только tooblock больших двоичных объектов, страничные большие двоичные объекты и добавьте больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-407">SSE applies only tooblock blobs, page blobs, and append blobs.</span></span> <span data-ttu-id="3cca8-408">Hello других типов данных, включая таблицы, очереди и файлы, не будут зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="3cca8-408">hello other types of data, including tables, queues, and files, will not be encrypted.</span></span>

<span data-ttu-id="3cca8-409">Данные шифруются только при включенном SSE и записи данных hello tooBlob хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-409">Data is only encrypted when SSE is enabled and hello data is written tooBlob Storage.</span></span> <span data-ttu-id="3cca8-410">Включение или отключение шифрования службы хранилища не влияет на существующие данные.</span><span class="sxs-lookup"><span data-stu-id="3cca8-410">Enabling or disabling SSE does not impact existing data.</span></span> <span data-ttu-id="3cca8-411">Другими словами при включении шифрования, он будет не вернуться назад и шифрования данных, которые уже существует. и не будет расшифровывать данные hello, уже существует, при отключении SSE.</span><span class="sxs-lookup"><span data-stu-id="3cca8-411">In other words, when you enable this encryption, it will not go back and encrypt data that already exists; nor will it decrypt hello data that already exists when you disable SSE.</span></span>

<span data-ttu-id="3cca8-412">Следует toouse этой функции в классическом учетная запись хранения можно создать новую учетную запись хранения диспетчера ресурсов и использовать AzCopy toocopy hello данных toohello новой учетной записи.</span><span class="sxs-lookup"><span data-stu-id="3cca8-412">If you want toouse this feature with a Classic storage account, you can create a new Resource Manager storage account and use AzCopy toocopy hello data toohello new account.</span></span>

### <a name="client-side-encryption"></a><span data-ttu-id="3cca8-413">шифрования на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="3cca8-413">Client-side Encryption</span></span>
<span data-ttu-id="3cca8-414">Мы уже упоминали шифрования на стороне клиента при обсуждении шифрования hello hello данных во время передачи.</span><span class="sxs-lookup"><span data-stu-id="3cca8-414">We mentioned client-side encryption when discussing hello encryption of hello data in transit.</span></span> <span data-ttu-id="3cca8-415">Эта функция позволяет tooprogrammatically можно шифровать данные в клиентском приложении перед его отправкой по записи tooAzure хранения toobe передачи hello и tooprogrammatically расшифровки данных после их извлечения из хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-415">This feature allows you tooprogrammatically encrypt your data in a client application before sending it across hello wire toobe written tooAzure Storage, and tooprogrammatically decrypt your data after retrieving it from Azure Storage.</span></span>

<span data-ttu-id="3cca8-416">Это обеспечивает шифрование во время передачи, но он также обеспечивает возможность hello шифрования при хранении.</span><span class="sxs-lookup"><span data-stu-id="3cca8-416">This does provide encryption in transit, but it also provides hello feature of Encryption at Rest.</span></span> <span data-ttu-id="3cca8-417">Обратите внимание, что несмотря на то, что hello данные шифруются во время передачи, по-прежнему рекомендуется использовать HTTPS tootake преимуществами проверки целостности данных hello которых снижения влияния на целостность данных hello hello сетевых ошибок.</span><span class="sxs-lookup"><span data-stu-id="3cca8-417">Note that although hello data is encrypted in transit, we still recommend using HTTPS tootake advantage of hello built-in data integrity checks which help mitigate network errors affecting hello integrity of hello data.</span></span>

<span data-ttu-id="3cca8-418">Где его можно использовать пример — Если у вас есть веб-приложения, который хранит большие двоичные объекты и извлекает большие двоичные объекты, и требуется приложение hello и toobe данных защищено настолько, насколько это возможно.</span><span class="sxs-lookup"><span data-stu-id="3cca8-418">An example of where you might use this is if you have a web application that stores blobs and retrieves blobs, and you want hello application and data toobe as secure as possible.</span></span> <span data-ttu-id="3cca8-419">В этом случае следует применять шифрование на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="3cca8-419">In that case, you would use client-side encryption.</span></span> <span data-ttu-id="3cca8-420">Hello трафика между клиентом hello и hello больших двоичных объектов Azure содержит зашифрованные hello ресурсов, и никто не может интерпретировать hello данных во время передачи и восстановить его в частной BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-420">hello traffic between hello client and hello Azure Blob Service contains hello encrypted resource, and nobody can interpret hello data in transit and reconstitute it into your private blobs.</span></span>

<span data-ttu-id="3cca8-421">Шифрование на стороне клиента встроено в hello Java и hello .NET клиентских библиотек хранилища, которые в свою очередь используют ключ хранилища Azure API, довольно упрощая вы tooimplement hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-421">Client-side encryption is built into hello Java and hello .NET storage client libraries, which in turn use hello Azure Key Vault APIs, making it pretty easy for you tooimplement.</span></span> <span data-ttu-id="3cca8-422">процесс шифрования и расшифровки данных hello Hello использует метод конверт hello и сохраняет метаданные, используемые с помощью шифрования hello в каждом объекте хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-422">hello process of encrypting and decrypting hello data uses hello envelope technique, and stores metadata used by hello encryption in each storage object.</span></span> <span data-ttu-id="3cca8-423">Например, для больших двоичных объектов, сохраняет его в метаданных большого двоичного объекта hello, то время как для очереди, этот элемент добавляется tooeach сообщения в очереди.</span><span class="sxs-lookup"><span data-stu-id="3cca8-423">For example, for blobs, it stores it in hello blob metadata, while for queues, it adds it tooeach queue message.</span></span>

<span data-ttu-id="3cca8-424">Для шифрования hello сам можно создавать и управлять ключей шифрования.</span><span class="sxs-lookup"><span data-stu-id="3cca8-424">For hello encryption itself, you can generate and manage your own encryption keys.</span></span> <span data-ttu-id="3cca8-425">Можно также использовать ключи, создаваемые hello клиентская библиотека хранилища Azure, или может иметь hello хранилище ключей Azure создания ключей hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-425">You can also use keys generated by hello Azure Storage Client Library, or you can have hello Azure Key Vault generate hello keys.</span></span> <span data-ttu-id="3cca8-426">Ключи шифрования можно хранить в локальном хранилище ключей или в хранилище ключей Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-426">You can store your encryption keys in your on-premises key storage, or you can store them in an Azure Key Vault.</span></span> <span data-ttu-id="3cca8-427">Хранилище ключей Azure позволяет toogrant доступа toohello секреты в хранилище ключей Azure toospecific пользователей с помощью Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3cca8-427">Azure Key Vault allows you toogrant access toohello secrets in Azure Key Vault toospecific users using Azure Active Directory.</span></span> <span data-ttu-id="3cca8-428">Это означает, что не просто любой пользователь читает hello хранилище ключей Azure и получить ключи hello, используемого для шифрования на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="3cca8-428">This means that not just anybody can read hello Azure Key Vault and retrieve hello keys you're using for client-side encryption.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-429">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-429">Resources</span></span>
* [<span data-ttu-id="3cca8-430">Шифрование и расшифровка BLOB-объектов в хранилище Microsoft Azure с помощью хранилища ключей Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-430">Encrypt and decrypt blobs in Microsoft Azure Storage using Azure Key Vault</span></span>](../blobs/storage-encrypt-decrypt-blobs-key-vault.md)

  <span data-ttu-id="3cca8-431">В этой статье показано, как toouse шифрования на стороне клиента с хранилищем ключей Azure, включая toocreate hello ключа обмена Ключами и сохранить его в хранилище hello, с помощью PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3cca8-431">This article shows how toouse client-side encryption with Azure Key Vault, including how toocreate hello KEK and store it in hello vault using PowerShell.</span></span>
* [<span data-ttu-id="3cca8-432">Шифрование на стороне клиента для службы хранилища Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-432">Client-Side Encryption and Azure Key Vault for Microsoft Azure Storage</span></span>](../storage-client-side-encryption.md)

  <span data-ttu-id="3cca8-433">В этой статье объясняется, шифрования на стороне клиента и содержит примеры использования hello клиента библиотеки tooencrypt и расшифровки ресурсов хранилища из четырех служб хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-433">This article gives an explanation of client-side encryption, and provides examples of using hello storage client library tooencrypt and decrypt resources from hello four storage services.</span></span> <span data-ttu-id="3cca8-434">В ней также рассматривается хранилище ключей Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-434">It also talks about Azure Key Vault.</span></span>

### <a name="using-azure-disk-encryption-tooencrypt-disks-used-by-your-virtual-machines"></a><span data-ttu-id="3cca8-435">С помощью шифрования диска Azure tooencrypt диски, используемые виртуальными машинами</span><span class="sxs-lookup"><span data-stu-id="3cca8-435">Using Azure Disk Encryption tooencrypt disks used by your virtual machines</span></span>
<span data-ttu-id="3cca8-436">Шифрование дисков Azure — это новая функция.</span><span class="sxs-lookup"><span data-stu-id="3cca8-436">Azure Disk Encryption is a new feature.</span></span> <span data-ttu-id="3cca8-437">Эта функция позволяет вам tooencrypt hello ОС дисков и дисков данных, используемые в виртуальной машине IaaS.</span><span class="sxs-lookup"><span data-stu-id="3cca8-437">This feature allows you tooencrypt hello OS disks and Data disks used by an IaaS Virtual Machine.</span></span> <span data-ttu-id="3cca8-438">Для Windows hello диски шифруются с помощью технологии шифрования BitLocker отраслевым стандартам.</span><span class="sxs-lookup"><span data-stu-id="3cca8-438">For Windows, hello drives are encrypted using industry-standard BitLocker encryption technology.</span></span> <span data-ttu-id="3cca8-439">Для Linux диски hello шифруются с помощью технологии hello Crypt интеллектуального анализа данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-439">For Linux, hello disks are encrypted using hello DM-Crypt technology.</span></span> <span data-ttu-id="3cca8-440">Это интегрирован с хранилищем ключей Azure tooallow вы toocontrol и управления ключами шифрования диска hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-440">This is integrated with Azure Key Vault tooallow you toocontrol and manage hello disk encryption keys.</span></span>

<span data-ttu-id="3cca8-441">решение Hello поддерживает следующие сценарии для ВМ IaaS, если они включены в Microsoft Azure hello:</span><span class="sxs-lookup"><span data-stu-id="3cca8-441">hello solution supports hello following scenarios for IaaS VMs when they are enabled in Microsoft Azure:</span></span>

* <span data-ttu-id="3cca8-442">интеграция с хранилищем ключей Azure;</span><span class="sxs-lookup"><span data-stu-id="3cca8-442">Integration with Azure Key Vault</span></span>
* <span data-ttu-id="3cca8-443">виртуальные машины IaaS серий [A, D, DS, G, GS и т. д.](https://azure.microsoft.com/pricing/details/virtual-machines/) уровня "Стандартный";</span><span class="sxs-lookup"><span data-stu-id="3cca8-443">Standard tier VMs: [A, D, DS, G, GS, and so forth series IaaS VMs](https://azure.microsoft.com/pricing/details/virtual-machines/)</span></span>
* <span data-ttu-id="3cca8-444">включение шифрования для виртуальных машин IaaS под управлением Windows и Linux;</span><span class="sxs-lookup"><span data-stu-id="3cca8-444">Enabling encryption on Windows and Linux IaaS VMs</span></span>
* <span data-ttu-id="3cca8-445">отключение шифрования дисков данных и дисков операционной системы виртуальных машин IaaS под управлением Windows;</span><span class="sxs-lookup"><span data-stu-id="3cca8-445">Disabling encryption on OS and data drives for Windows IaaS VMs</span></span>
* <span data-ttu-id="3cca8-446">отключение шифрования дисков данных виртуальных машин IaaS под управлением Linux;</span><span class="sxs-lookup"><span data-stu-id="3cca8-446">Disabling encryption on data drives for Linux IaaS VMs</span></span>
* <span data-ttu-id="3cca8-447">включение шифрования для виртуальных машин IaaS под управлением клиентской ОС Windows;</span><span class="sxs-lookup"><span data-stu-id="3cca8-447">Enabling encryption on IaaS VMs that are running Windows client OS</span></span>
* <span data-ttu-id="3cca8-448">включение шифрования томов с путями подключения;</span><span class="sxs-lookup"><span data-stu-id="3cca8-448">Enabling encryption on volumes with mount paths</span></span>
* <span data-ttu-id="3cca8-449">включение шифрования для виртуальных машин Linux с чередованием дисков (RAID) с помощью программы mdadm;</span><span class="sxs-lookup"><span data-stu-id="3cca8-449">Enabling encryption on Linux VMs that are configured with disk striping (RAID) by using mdadm</span></span>
* <span data-ttu-id="3cca8-450">включение шифрования для виртуальных машин Linux с использованием диспетчера логических томов (LVM) для дисков данных;</span><span class="sxs-lookup"><span data-stu-id="3cca8-450">Enabling encryption on Linux VMs by using LVM for data disks</span></span>
* <span data-ttu-id="3cca8-451">включение шифрования для виртуальных машин Windows, использующих дисковые пространства.</span><span class="sxs-lookup"><span data-stu-id="3cca8-451">Enabling encryption on Windows VMs that are configured by using storage spaces</span></span>
* <span data-ttu-id="3cca8-452">поддерживаются все общедоступные регионы Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-452">All Azure public regions are supported</span></span>

<span data-ttu-id="3cca8-453">решение Hello не поддерживает следующие сценарии, функции и технологии в выпуске hello hello:</span><span class="sxs-lookup"><span data-stu-id="3cca8-453">hello solution does not support hello following scenarios, features, and technology in hello release:</span></span>

* <span data-ttu-id="3cca8-454">виртуальные машины уровня "Базовый";</span><span class="sxs-lookup"><span data-stu-id="3cca8-454">Basic tier IaaS VMs</span></span>
* <span data-ttu-id="3cca8-455">отключение шифрования диска ОС виртуальных машин IaaS под управлением Linux;</span><span class="sxs-lookup"><span data-stu-id="3cca8-455">Disabling encryption on an OS drive for Linux IaaS VMs</span></span>
* <span data-ttu-id="3cca8-456">Виртуальные машины IaaS, созданных с помощью метода создания виртуальной Машины классический hello</span><span class="sxs-lookup"><span data-stu-id="3cca8-456">IaaS VMs that are created by using hello classic VM creation method</span></span>
* <span data-ttu-id="3cca8-457">интеграция с локальной службой управления ключами;</span><span class="sxs-lookup"><span data-stu-id="3cca8-457">Integration with your on-premises Key Management Service</span></span>
* <span data-ttu-id="3cca8-458">хранилище файлов Azure (файловый ресурс Azure), NFS, динамические тома, виртуальные машины Windows с программными системами RAID.</span><span class="sxs-lookup"><span data-stu-id="3cca8-458">Azure File storage (shared file system), Network File System (NFS), dynamic volumes, and Windows VMs that are configured with software-based RAID systems</span></span>


> [!NOTE]
> <span data-ttu-id="3cca8-459">Шифрование диска операционной системы Linux в настоящее время поддерживается на hello следующие дистрибутивы Linux: RHEL 7.2, CentOS 7.2n и Ubuntu 16.04.</span><span class="sxs-lookup"><span data-stu-id="3cca8-459">Linux OS disk encryption is currently supported on hello following Linux distributions: RHEL 7.2, CentOS 7.2n, and Ubuntu 16.04.</span></span>
>
>

<span data-ttu-id="3cca8-460">Эта функция гарантирует, что все данные на дисках виртуальной машины шифруются при хранении в службе хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-460">This feature ensures that all data on your virtual machine disks is encrypted at rest in Azure Storage.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-461">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-461">Resources</span></span>
* [<span data-ttu-id="3cca8-462">Дисковое шифрование Azure для виртуальных машин IaaS под управлением Windows и Linux</span><span class="sxs-lookup"><span data-stu-id="3cca8-462">Azure Disk Encryption for Windows and Linux IaaS VMs</span></span>](https://docs.microsoft.com/en-us/azure/security/azure-security-disk-encryption)

### <a name="comparison-of-azure-disk-encryption-sse-and-client-side-encryption"></a><span data-ttu-id="3cca8-463">Сравнение шифрования дисков Azure, шифрования службы хранилища и шифрования на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="3cca8-463">Comparison of Azure Disk Encryption, SSE, and Client-Side Encryption</span></span>
#### <a name="iaas-vms-and-their-vhd-files"></a><span data-ttu-id="3cca8-464">Виртуальные машины IaaS и их файлы VHD</span><span class="sxs-lookup"><span data-stu-id="3cca8-464">IaaS VMs and their VHD files</span></span>
<span data-ttu-id="3cca8-465">Для дисков, используемых виртуальными машинами IaaS, мы рекомендуем шифрование дисков Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-465">For disks used by IaaS VMs, we recommend using Azure Disk Encryption.</span></span> <span data-ttu-id="3cca8-466">Можно включить SSE hello tooencrypt VHD-файлы, используемые tooback этих дисков в хранилище Azure, но он вновь создаваемых данные шифруются только.</span><span class="sxs-lookup"><span data-stu-id="3cca8-466">You can turn on SSE tooencrypt hello VHD files that are used tooback those disks in Azure Storage, but it only encrypts newly written data.</span></span> <span data-ttu-id="3cca8-467">Это означает, что при создании виртуальной Машины и затем включите SSE hello учетной записи хранения, содержащий hello VHD-файл, будут зашифрованы только hello изменения, не hello исходный файл виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="3cca8-467">This means if you create a VM and then enable SSE on hello storage account that holds hello VHD file, only hello changes will be encrypted, not hello original VHD file.</span></span>

<span data-ttu-id="3cca8-468">При создании виртуальной Машины с помощью образа из hello Azure Marketplace, Azure выполняет [shallow копирования](https://en.wikipedia.org/wiki/Object_copying) из tooyour hello изображения учетной записи хранения в хранилище Azure и не шифруются, даже при наличии SSE включена.</span><span class="sxs-lookup"><span data-stu-id="3cca8-468">If you create a VM using an image from hello Azure Marketplace, Azure performs a [shallow copy](https://en.wikipedia.org/wiki/Object_copying) of hello image tooyour storage account in Azure Storage, and it is not encrypted even if you have SSE enabled.</span></span> <span data-ttu-id="3cca8-469">После его hello ВМ создает и запускает обновление образа hello, SSE начнется шифрование данных hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-469">After it creates hello VM and starts updating hello image, SSE will start encrypting hello data.</span></span> <span data-ttu-id="3cca8-470">По этой причине это лучший toouse шифрование диска Azure на виртуальных машинах, созданные на основе изображений в hello Azure Marketplace, если их полностью зашифрован.</span><span class="sxs-lookup"><span data-stu-id="3cca8-470">For this reason, it's best toouse Azure Disk Encryption on VMs created from images in hello Azure Marketplace if you want them fully encrypted.</span></span>

<span data-ttu-id="3cca8-471">Вставленные предварительно зашифрованный ВМ в Azure из локального будет быть ключи шифрования tooAzure хранилища ключей для возможности tooupload hello и продолжить использование hello шифрования для этой виртуальной Машины, что использовались в локальной.</span><span class="sxs-lookup"><span data-stu-id="3cca8-471">If you bring a pre-encrypted VM into Azure from on-premises, you will be able tooupload hello encryption keys tooAzure Key Vault, and continue using hello encryption for that VM that you were using on-premises.</span></span> <span data-ttu-id="3cca8-472">Azure шифрование диска этот сценарий не включен toohandle.</span><span class="sxs-lookup"><span data-stu-id="3cca8-472">Azure Disk Encryption is enabled toohandle this scenario.</span></span>

<span data-ttu-id="3cca8-473">При наличии без шифрования VHD из локальной можно передать его в коллекцию hello как пользовательского образа и подготовить виртуальную Машину из него.</span><span class="sxs-lookup"><span data-stu-id="3cca8-473">If you have non-encrypted VHD from on-premises, you can upload it into hello gallery as a custom image and provision a VM from it.</span></span> <span data-ttu-id="3cca8-474">Если это делается с помощью шаблонов диспетчера ресурсов hello, вы можете запросить его tooturn на шифрование диска Azure при его загрузке hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3cca8-474">If you do this using hello Resource Manager templates, you can ask it tooturn on Azure Disk Encryption when it boots up hello VM.</span></span>

<span data-ttu-id="3cca8-475">При добавлении диска данных и присоединить ее на hello виртуальной Машины, можно включить шифрование диска Azure на этом диске данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-475">When you add a data disk and mount it on hello VM, you can turn on Azure Disk Encryption on that data disk.</span></span> <span data-ttu-id="3cca8-476">Сначала будет шифрование диска данных локально, а затем hello уровень управления службы будет выполните отложенной записи с хранилищами, поэтому содержимое хранилища hello шифруется.</span><span class="sxs-lookup"><span data-stu-id="3cca8-476">It will encrypt that data disk locally first, and then hello service management layer will do a lazy write against storage so hello storage content is encrypted.</span></span>

#### <a name="client-side-encryption"></a><span data-ttu-id="3cca8-477">шифрования на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="3cca8-477">Client-side encryption</span></span>
<span data-ttu-id="3cca8-478">Шифрование на стороне клиента — наиболее безопасный метод hello шифрования данных, так как он шифрует его до передачи и шифрует hello статических данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-478">Client-side encryption is hello most secure method of encrypting your data, because it encrypts it before transit, and encrypts hello data at rest.</span></span> <span data-ttu-id="3cca8-479">Однако он требует добавления кода tooyour приложений с помощью хранилища, который может потребоваться не toodo.</span><span class="sxs-lookup"><span data-stu-id="3cca8-479">However, it does require that you add code tooyour applications using storage, which you may not want toodo.</span></span> <span data-ttu-id="3cca8-480">В таких случаях можно было использовать HTTPs для данных во время передачи и статических данных hello tooencrypt SSE.</span><span class="sxs-lookup"><span data-stu-id="3cca8-480">In those cases, you can use HTTPs for your data in transit, and SSE tooencrypt hello data at rest.</span></span>

<span data-ttu-id="3cca8-481">С помощью шифрования на стороне клиента можно шифровать сущности в таблицах, сообщения в очередях и BLOB-объекты.</span><span class="sxs-lookup"><span data-stu-id="3cca8-481">With client-side encryption, you can encrypt table entities, queue messages, and blobs.</span></span> <span data-ttu-id="3cca8-482">С помощью шифрования службы хранилища можно шифровать только большие двоичные объекты.</span><span class="sxs-lookup"><span data-stu-id="3cca8-482">With SSE, you can only encrypt blobs.</span></span> <span data-ttu-id="3cca8-483">Если вам требуется таблиц и очередей toobe данные зашифрованы, следует использовать шифрования на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="3cca8-483">If you need table and queue data toobe encrypted, you should use client-side encryption.</span></span>

<span data-ttu-id="3cca8-484">Шифрование на стороне клиента полностью управляется приложения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-484">Client-side encryption is managed entirely by hello application.</span></span> <span data-ttu-id="3cca8-485">Это наиболее безопасный подход hello, но требуют toomake программного изменения tooyour приложения и поместить процессы управления ключами на месте.</span><span class="sxs-lookup"><span data-stu-id="3cca8-485">This is hello most secure approach, but does require you toomake programmatic changes tooyour application and put key management processes in place.</span></span> <span data-ttu-id="3cca8-486">Вы бы использовать при необходимости hello дополнительную безопасность во время передачи и хотите вашей toobe хранимые данные шифруются.</span><span class="sxs-lookup"><span data-stu-id="3cca8-486">You would use this when you want hello extra security during transit, and you want your stored data toobe encrypted.</span></span>

<span data-ttu-id="3cca8-487">Шифрования на стороне клиента является большей нагрузки на приветствия клиента, и имеется tooaccount для этого в планах масштабируемости, особенно в том случае, если вы используете шифрования и передачи большого объема данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-487">Client-side encryption is more load on hello client, and you have tooaccount for this in your scalability plans, especially if you are encrypting and transferring a lot of data.</span></span>

#### <a name="storage-service-encryption-sse"></a><span data-ttu-id="3cca8-488">шифрования службы хранилища (SSE)</span><span class="sxs-lookup"><span data-stu-id="3cca8-488">Storage Service Encryption (SSE)</span></span>
<span data-ttu-id="3cca8-489">SSE управляется службой хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-489">SSE is managed by Azure Storage.</span></span> <span data-ttu-id="3cca8-490">Использование инструкций SSE не обеспечивает безопасность hello hello данных во время передачи, но он производит шифрование данных hello, как написано tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-490">Using SSE does not provide for hello security of hello data in transit, but it does encrypt hello data as it is written tooAzure Storage.</span></span> <span data-ttu-id="3cca8-491">Нет никакого воздействия на производительность hello при использовании этой функции.</span><span class="sxs-lookup"><span data-stu-id="3cca8-491">There is no impact on hello performance when using this feature.</span></span>

<span data-ttu-id="3cca8-492">С помощью шифрования службы хранилища можно шифровать только блочные, добавочные и страничные BLOB-объекты.</span><span class="sxs-lookup"><span data-stu-id="3cca8-492">You can only encrypt block blobs, append blobs, and page blobs using SSE.</span></span> <span data-ttu-id="3cca8-493">Если требуется tooencrypt табличные данные или данные очереди, следует с помощью шифрования на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="3cca8-493">If you need tooencrypt table data or queue data, you should consider using client-side encryption.</span></span>

<span data-ttu-id="3cca8-494">При наличии архив или библиотеки VHD-файлов, которые можно использовать в качестве основы для создания новых виртуальных машин, можно создать новую учетную запись хранения, включить SSE и затем передать hello файлы виртуального жесткого диска toothat, учетной записи.</span><span class="sxs-lookup"><span data-stu-id="3cca8-494">If you have an archive or library of VHD files that you use as a basis for creating new virtual machines, you can create a new storage account, enable SSE, and then upload hello VHD files toothat account.</span></span> <span data-ttu-id="3cca8-495">Эти файлы VHD будут шифроваться службой хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-495">Those VHD files will be encrypted by Azure Storage.</span></span>

<span data-ttu-id="3cca8-496">Если включено для дисков hello в виртуальной Машине и SSE, включены в учетной записи хранения hello, удерживающие файлы VHD hello шифрование диска Azure, он будет исправно; приведет все данные о только что написанный шифрования дважды.</span><span class="sxs-lookup"><span data-stu-id="3cca8-496">If you have Azure Disk Encryption enabled for hello disks in a VM and SSE enabled on hello storage account holding hello VHD files, it will work fine; it will result in any newly-written data being encrypted twice.</span></span>

## <a name="storage-analytics"></a><span data-ttu-id="3cca8-497">аналитики хранилища</span><span class="sxs-lookup"><span data-stu-id="3cca8-497">Storage Analytics</span></span>
### <a name="using-storage-analytics-toomonitor-authorization-type"></a><span data-ttu-id="3cca8-498">С помощью типа авторизации toomonitor аналитики хранилища</span><span class="sxs-lookup"><span data-stu-id="3cca8-498">Using Storage Analytics toomonitor authorization type</span></span>
<span data-ttu-id="3cca8-499">Для каждой учетной записи хранения можно включить ведение журнала tooperform аналитики хранилища Azure и хранения данных метрик.</span><span class="sxs-lookup"><span data-stu-id="3cca8-499">For each storage account, you can enable Azure Storage Analytics tooperform logging and store metrics data.</span></span> <span data-ttu-id="3cca8-500">Это toouse мощный инструмент для метрики производительности hello toocheck учетной записи хранения, или tootroubleshoot учетной записи хранилища, так как возникли проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="3cca8-500">This is a great tool toouse when you want toocheck hello performance metrics of a storage account, or need tootroubleshoot a storage account because you are having performance problems.</span></span>

<span data-ttu-id="3cca8-501">Другой фрагмент данных, отображаемые в журналы аналитики хранилища hello способ hello проверки подлинности используется другим при доступе к хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-501">Another piece of data you can see in hello storage analytics logs is hello authentication method used by someone when they access storage.</span></span> <span data-ttu-id="3cca8-502">Например с хранилищем больших двоичных объектов, вы увидите их использовать подпись общего доступа или ключи учетной записи хранения hello ли доступ к blob hello был открытый.</span><span class="sxs-lookup"><span data-stu-id="3cca8-502">For example, with Blob Storage, you can see if they used a Shared Access Signature or hello storage account keys, or if hello blob accessed was public.</span></span>

<span data-ttu-id="3cca8-503">Это может быть весьма полезно в том случае, если тесно защищая toostorage доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-503">This can be really helpful if you are tightly guarding access toostorage.</span></span> <span data-ttu-id="3cca8-504">Например в хранилище больших двоичных объектов можно задать все контейнеры tooprivate hello и реализован hello используйте службы SAS в приложениях.</span><span class="sxs-lookup"><span data-stu-id="3cca8-504">For example, in Blob Storage you can set all of hello containers tooprivate and implement hello use of an SAS service throughout your applications.</span></span> <span data-ttu-id="3cca8-505">Затем можно проверить журналы hello регулярно toosee Если BLOB-объектов осуществляется с помощью hello ключи учетной записи хранения, которые могут указывать на нарушение безопасности, или если hello большие двоичные объекты являются открытыми, но они не должны быть.</span><span class="sxs-lookup"><span data-stu-id="3cca8-505">Then you can check hello logs regularly toosee if your blobs are accessed using hello storage account keys, which may indicate a breach of security, or if hello blobs are public but they shouldn't be.</span></span>

#### <a name="what-do-hello-logs-look-like"></a><span data-ttu-id="3cca8-506">Как hello журналы выглядят?</span><span class="sxs-lookup"><span data-stu-id="3cca8-506">What do hello logs look like?</span></span>
<span data-ttu-id="3cca8-507">После включения hello метрики учетной записи хранения и ведения журнала через портал Azure hello, аналитические данные будут tooaccumulate быстрого запуска.</span><span class="sxs-lookup"><span data-stu-id="3cca8-507">After you enable hello storage account metrics and logging through hello Azure portal, analytics data will start tooaccumulate quickly.</span></span> <span data-ttu-id="3cca8-508">Ведение журнала Hello и метрики для каждой службы раздельно. Ведение журнала Hello записывается только в том случае, когда активность в этой учетной записи хранилища, пока hello показатели будут регистрироваться каждую минуту, каждый час или каждый день, в зависимости от способа настройки.</span><span class="sxs-lookup"><span data-stu-id="3cca8-508">hello logging and metrics for each service is separate; hello logging is only written when there is activity in that storage account, while hello metrics will be logged every minute, every hour, or every day, depending on how you configure it.</span></span>

<span data-ttu-id="3cca8-509">Hello журналы хранятся в блочных больших двоичных объектов в контейнере, который называется $logs в учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-509">hello logs are stored in block blobs in a container named $logs in hello storage account.</span></span> <span data-ttu-id="3cca8-510">Этот контейнер создается автоматически при включении аналитики хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-510">This container is automatically created when Storage Analytics is enabled.</span></span> <span data-ttu-id="3cca8-511">После того как этот контейнер создан, удалить его нельзя, но можно очистить его содержимое.</span><span class="sxs-lookup"><span data-stu-id="3cca8-511">Once this container is created, you can't delete it, although you can delete its contents.</span></span>

<span data-ttu-id="3cca8-512">В контейнере hello $logs папка для каждой службы, и затем существуют вложенные папки для hello год/месяц/день/часа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-512">Under hello $logs container, there is a folder for each service, and then there are subfolders for hello year/month/day/hour.</span></span> <span data-ttu-id="3cca8-513">В час просто нумеруются журналы hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-513">Under hour, hello logs are simply numbered.</span></span> <span data-ttu-id="3cca8-514">Это связано с какой hello будет выглядеть структуру каталогов:</span><span class="sxs-lookup"><span data-stu-id="3cca8-514">This is what hello directory structure will look like:</span></span>

![Просмотр файлов журнала](./media/storage-security-guide/image1.png)

<span data-ttu-id="3cca8-516">Войти в каждый запрос tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-516">Every request tooAzure Storage is logged.</span></span> <span data-ttu-id="3cca8-517">Ниже приведен снимок файла журнала, показывающая hello первый несколько полей.</span><span class="sxs-lookup"><span data-stu-id="3cca8-517">Here's a snapshot of a log file, showing hello first few fields.</span></span>

![Моментальный снимок файла журнала](./media/storage-security-guide/image2.png)

<span data-ttu-id="3cca8-519">Вы увидите, которые можно использовать журналы tootrack hello любого типа учетной записи хранилища tooa вызовов.</span><span class="sxs-lookup"><span data-stu-id="3cca8-519">You can see that you can use hello logs tootrack any kind of calls tooa storage account.</span></span>

#### <a name="what-are-all-of-those-fields-for"></a><span data-ttu-id="3cca8-520">Для чего нужны все эти поля?</span><span class="sxs-lookup"><span data-stu-id="3cca8-520">What are all of those fields for?</span></span>
<span data-ttu-id="3cca8-521">Нет перечисленные ниже ресурсы hello статьи, которая содержит список hello hello много полей в журналы hello и их назначение.</span><span class="sxs-lookup"><span data-stu-id="3cca8-521">There is an article listed in hello resources below that provides hello list of hello many fields in hello logs and what they are used for.</span></span> <span data-ttu-id="3cca8-522">Ниже приведен список hello по порядку:</span><span class="sxs-lookup"><span data-stu-id="3cca8-522">Here is hello list of fields in order:</span></span>

![Моментальный снимок полей в файле журнала](./media/storage-security-guide/image3.png)

<span data-ttu-id="3cca8-524">Нас интересует hello записи для GetBlob и о том, как они проходят проверку подлинности, поэтому нам нужна toolook для операций с типом операции «Get-BLOB-объект» и проверьте состояние запроса hello (4<sup>й</sup> столбца) и тип авторизации hello (8<sup>й</sup> столбца).</span><span class="sxs-lookup"><span data-stu-id="3cca8-524">We're interested in hello entries for GetBlob, and how they are authenticated, so we need toolook for entries with operation-type "Get-Blob", and check hello request-status (4<sup>th</sup> column) and hello authorization-type (8<sup>th</sup> column).</span></span>

<span data-ttu-id="3cca8-525">Например, в hello первые несколько строк, в приведенном выше списке hello, состояние запроса hello является «Успешно» и тип авторизации hello» проверки подлинности».</span><span class="sxs-lookup"><span data-stu-id="3cca8-525">For example, in hello first few rows in hello listing above, hello request-status is "Success" and hello authorization-type is "authenticated".</span></span> <span data-ttu-id="3cca8-526">Это означает, что запрос hello был проверен с помощью ключа учетной записи хранения hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-526">This means hello request was validated using hello storage account key.</span></span>

#### <a name="how-are-my-blobs-being-authenticated"></a><span data-ttu-id="3cca8-527">Как производится проверка подлинности BLOB-объектов?</span><span class="sxs-lookup"><span data-stu-id="3cca8-527">How are my blobs being authenticated?</span></span>
<span data-ttu-id="3cca8-528">Нас интересуют три случая.</span><span class="sxs-lookup"><span data-stu-id="3cca8-528">We have three cases that we are interested in.</span></span>

1. <span data-ttu-id="3cca8-529">Hello большой двоичный объект является открытым и осуществляется с помощью URL-адреса без подписи общего доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-529">hello blob is public and it is accessed using a URL without a Shared Access Signature.</span></span> <span data-ttu-id="3cca8-530">В этом случае состояние запроса hello является «AnonymousSuccess» и тип авторизации hello «anonymous».</span><span class="sxs-lookup"><span data-stu-id="3cca8-530">In this case, hello request-status is "AnonymousSuccess" and hello authorization-type is "anonymous".</span></span>

   <span data-ttu-id="3cca8-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span><span class="sxs-lookup"><span data-stu-id="3cca8-531">1.0;2015-11-17T02:01:29.0488963Z;GetBlob;**AnonymousSuccess**;200;124;37;**anonymous**;;mystorage…</span></span>
2. <span data-ttu-id="3cca8-532">Hello большой двоичный объект является закрытым и используется подпись общего доступа.</span><span class="sxs-lookup"><span data-stu-id="3cca8-532">hello blob is private and was used with a Shared Access Signature.</span></span> <span data-ttu-id="3cca8-533">В этом случае состояние запроса hello является «SASSuccess» и hello авторизации тип «sas».</span><span class="sxs-lookup"><span data-stu-id="3cca8-533">In this case, hello request-status is "SASSuccess" and hello authorization-type is "sas".</span></span>

   <span data-ttu-id="3cca8-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span><span class="sxs-lookup"><span data-stu-id="3cca8-534">1.0;2015-11-16T18:30:05.6556115Z;GetBlob;**SASSuccess**;200;416;64;**sas**;;mystorage…</span></span>
3. <span data-ttu-id="3cca8-535">Hello большой двоичный объект является закрытым и ключ хранилища hello был используется tooaccess его.</span><span class="sxs-lookup"><span data-stu-id="3cca8-535">hello blob is private and hello storage key was used tooaccess it.</span></span> <span data-ttu-id="3cca8-536">В этом случае состояние запроса hello является «**успех**«и имеет тип авторизации hello»**с проверкой подлинности**».</span><span class="sxs-lookup"><span data-stu-id="3cca8-536">In this case, hello request-status is "**Success**" and hello authorization-type is "**authenticated**".</span></span>

   <span data-ttu-id="3cca8-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span><span class="sxs-lookup"><span data-stu-id="3cca8-537">1.0;2015-11-16T18:32:24.3174537Z;GetBlob;**Success**;206;59;22;**authenticated**;mystorage…</span></span>

<span data-ttu-id="3cca8-538">Можно использовать Microsoft Message Analyzer tooview hello и анализировать эти журналы.</span><span class="sxs-lookup"><span data-stu-id="3cca8-538">You can use hello Microsoft Message Analyzer tooview and analyze these logs.</span></span> <span data-ttu-id="3cca8-539">В нем есть функции поиска и фильтрации.</span><span class="sxs-lookup"><span data-stu-id="3cca8-539">It includes search and filter capabilities.</span></span> <span data-ttu-id="3cca8-540">Например, может потребоваться toosearch для экземпляров toosee GetBlob в случае использования hello ожидаемому результату, т. е. toomake убедиться, что кто-то не имеет доступа к вашей учетной записи хранилища неправильно.</span><span class="sxs-lookup"><span data-stu-id="3cca8-540">For example, you might want toosearch for instances of GetBlob toosee if hello usage is what you expect, i.e. toomake sure someone is not accessing your storage account inappropriately.</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-541">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-541">Resources</span></span>
* [<span data-ttu-id="3cca8-542">Аналитика службы хранилища</span><span class="sxs-lookup"><span data-stu-id="3cca8-542">Storage Analytics</span></span>](../storage-analytics.md)

  <span data-ttu-id="3cca8-543">В этой статье приведен обзор аналитики хранилища и как tooenable их.</span><span class="sxs-lookup"><span data-stu-id="3cca8-543">This article is an overview of storage analytics and how tooenable them.</span></span>
* [<span data-ttu-id="3cca8-544">Формат журналов аналитик хранилища</span><span class="sxs-lookup"><span data-stu-id="3cca8-544">Storage Analytics Log Format</span></span>](https://msdn.microsoft.com/library/azure/hh343259.aspx)

  <span data-ttu-id="3cca8-545">В этой статье рассмотрены hello формат журнала аналитики хранилища и подробности hello поля, доступные в этом документе, включая проверку подлинности тип, который указывает тип проверки подлинности, используемый для запроса hello hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-545">This article illustrates hello Storage Analytics Log Format, and details hello fields available therein, including authentication-type, which indicates hello type of authentication used for hello request.</span></span>
* [<span data-ttu-id="3cca8-546">Отслеживание учетной записи хранилища в hello портал Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-546">Monitor a Storage Account in hello Azure portal</span></span>](../storage-monitor-storage-account.md)

  <span data-ttu-id="3cca8-547">В этой статье показано, как tooconfigure мониторинг метрик и ведения журнала для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-547">This article shows how tooconfigure monitoring of metrics and logging for a storage account.</span></span>
* [<span data-ttu-id="3cca8-548">Комплексный поиск и устранение неполадок с помощью метрик хранилища Azure и ведения журнала, AzCopy и анализатора сообщений</span><span class="sxs-lookup"><span data-stu-id="3cca8-548">End-to-End Troubleshooting using Azure Storage Metrics and Logging, AzCopy, and Message Analyzer</span></span>](../storage-e2e-troubleshooting.md)

  <span data-ttu-id="3cca8-549">В этой статье рассказывается об устранении неполадок с помощью hello аналитики хранилища и показывает, как toouse hello Microsoft Message Analyzer.</span><span class="sxs-lookup"><span data-stu-id="3cca8-549">This article talks about troubleshooting using hello Storage Analytics and shows how toouse hello Microsoft Message Analyzer.</span></span>
* [<span data-ttu-id="3cca8-550">Руководство по работе с анализатором сообщений (Майкрософт)</span><span class="sxs-lookup"><span data-stu-id="3cca8-550">Microsoft Message Analyzer Operating Guide</span></span>](https://technet.microsoft.com/library/jj649776.aspx)

  <span data-ttu-id="3cca8-551">В этой статье — hello Справочник по Microsoft Message Analyzer hello и включает учебника tooa ссылки, краткое и Сводка функций.</span><span class="sxs-lookup"><span data-stu-id="3cca8-551">This article is hello reference for hello Microsoft Message Analyzer and includes links tooa tutorial, quick start, and feature summary.</span></span>

## <a name="cross-origin-resource-sharing-cors"></a><span data-ttu-id="3cca8-552">Общий доступ к ресурсам независимо от источника (CORS)</span><span class="sxs-lookup"><span data-stu-id="3cca8-552">Cross-Origin Resource Sharing (CORS)</span></span>
### <a name="cross-domain-access-of-resources"></a><span data-ttu-id="3cca8-553">Междоменный доступ к ресурсам</span><span class="sxs-lookup"><span data-stu-id="3cca8-553">Cross-domain access of resources</span></span>
<span data-ttu-id="3cca8-554">Когда из веб-браузера, работающего в одном домене, отправляется HTTP-запрос на получение ресурса из другого домена, такой запрос называется HTTP-запросом, не зависящим от источника.</span><span class="sxs-lookup"><span data-stu-id="3cca8-554">When a web browser running in one domain makes an HTTP request for a resource from a different domain, this is called a cross-origin HTTP request.</span></span> <span data-ttu-id="3cca8-555">Например, с HTML-страницы, предоставляемой из домена contoso.com, выполняется запрос на получение JPEG-файла, размещенного в домене fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="3cca8-555">For example, an HTML page served from contoso.com makes a request for a jpeg hosted on fabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="3cca8-556">В целях безопасности браузеры блокируют не зависящие от источника HTTP-запросы, инициированные из скриптов, например на языке JavaScript.</span><span class="sxs-lookup"><span data-stu-id="3cca8-556">For security reasons, browsers restrict cross-origin HTTP requests initiated from within scripts, such as JavaScript.</span></span> <span data-ttu-id="3cca8-557">Это означает, что запросу кода JavaScript на веб-странице для contoso.com, jpeg на fabrikam.blob.core.windows.net hello браузера не позволит hello запросу.</span><span class="sxs-lookup"><span data-stu-id="3cca8-557">This means that when some JavaScript code on a web page on contoso.com requests that jpeg on fabrikam.blob.core.windows.net, hello browser will not allow hello request.</span></span>

<span data-ttu-id="3cca8-558">Что делает это имеют toodo со службой хранилища Azure?</span><span class="sxs-lookup"><span data-stu-id="3cca8-558">What does this have toodo with Azure Storage?</span></span> <span data-ttu-id="3cca8-559">Также, при сохранении статических ресурсов, таких как файлы данных JSON или XML в хранилище больших двоичных объектов с помощью учетной записи хранилища с именем Fabrikam hello домена для средств hello будет fabrikam.blob.core.windows.net и hello contoso.com веб-приложение не будет возможности tooaccess их с помощью JavaScript, так как hello домены различны.</span><span class="sxs-lookup"><span data-stu-id="3cca8-559">Well, if you are storing static assets such as JSON or XML data files in Blob Storage using a storage account called Fabrikam, hello domain for hello assets will be fabrikam.blob.core.windows.net, and hello contoso.com web application will not be able tooaccess them using JavaScript because hello domains are different.</span></span> <span data-ttu-id="3cca8-560">Это значение true, если вы пытаетесь toocall один из служб хранилища Azure — например, хранилище таблиц — hello, возвращающих toobe данные JSON, обрабатываемых hello клиента JavaScript.</span><span class="sxs-lookup"><span data-stu-id="3cca8-560">This is also true if you're trying toocall one of hello Azure Storage Services – such as Table Storage – that return JSON data toobe processed by hello JavaScript client.</span></span>

#### <a name="possible-solutions"></a><span data-ttu-id="3cca8-561">Возможные решения</span><span class="sxs-lookup"><span data-stu-id="3cca8-561">Possible solutions</span></span>
<span data-ttu-id="3cca8-562">Одним из способов tooresolve это tooassign пользовательский домен, как toofabrikam.blob.core.windows.net «storage.contoso.com».</span><span class="sxs-lookup"><span data-stu-id="3cca8-562">One way tooresolve this is tooassign a custom domain like "storage.contoso.com" toofabrikam.blob.core.windows.net.</span></span> <span data-ttu-id="3cca8-563">Hello проблема заключается в, можно назначить только этой учетной записи хранения tooone пользовательского домена.</span><span class="sxs-lookup"><span data-stu-id="3cca8-563">hello problem is that you can only assign that custom domain tooone storage account.</span></span> <span data-ttu-id="3cca8-564">Что делать, если hello ресурсы хранятся в нескольких учетных записей хранения?</span><span class="sxs-lookup"><span data-stu-id="3cca8-564">What if hello assets are stored in multiple storage accounts?</span></span>

<span data-ttu-id="3cca8-565">Другой способ tooresolve это toohave hello web приложения act как прокси для hello вызовов хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-565">Another way tooresolve this is toohave hello web application act as a proxy for hello storage calls.</span></span> <span data-ttu-id="3cca8-566">Это означает, что при отправке файла tooBlob хранилища hello веб-приложения будет либо записать их локально и скопировать его tooBlob хранилища, или будет считывать все его в память и записать их tooBlob хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-566">This means if you are uploading a file tooBlob Storage, hello web application would either write it locally and then copy it tooBlob Storage, or it would read all of it into memory and then write it tooBlob Storage.</span></span> <span data-ttu-id="3cca8-567">Кроме того можно написать выделенный веб-приложения (например, веб-API), отправляет hello файлы локально и записывает их tooBlob хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-567">Alternately, you could write a dedicated web application (such as a Web API) that uploads hello files locally and writes them tooBlob Storage.</span></span> <span data-ttu-id="3cca8-568">В любом случае имеются tooaccount для этой функции требуется определение hello масштабируемости.</span><span class="sxs-lookup"><span data-stu-id="3cca8-568">Either way, you have tooaccount for that function when determining hello scalability needs.</span></span>

#### <a name="how-can-cors-help"></a><span data-ttu-id="3cca8-569">Как может помочь CORS?</span><span class="sxs-lookup"><span data-stu-id="3cca8-569">How can CORS help?</span></span>
<span data-ttu-id="3cca8-570">Хранилище Azure позволяет tooenable CORS — Cross источника общий доступ к ресурсам.</span><span class="sxs-lookup"><span data-stu-id="3cca8-570">Azure Storage allows you tooenable CORS – Cross Origin Resource Sharing.</span></span> <span data-ttu-id="3cca8-571">Для каждой учетной записи хранения можно указать домены, которые могут обращаться к ресурсам hello этой учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-571">For each storage account, you can specify domains that can access hello resources in that storage account.</span></span> <span data-ttu-id="3cca8-572">Например в нашем случае выше мы можно включить CORS в учетной записи хранения fabrikam.blob.core.windows.net hello и настроить его toocontoso.com tooallow доступа. Затем contoso.com приложения hello web могут напрямую обращаться к ресурсам hello fabrikam.blob.core.windows.net.</span><span class="sxs-lookup"><span data-stu-id="3cca8-572">For example, in our case outlined above, we can enable CORS on hello fabrikam.blob.core.windows.net storage account and configure it tooallow access toocontoso.com. Then hello web application contoso.com can directly access hello resources in fabrikam.blob.core.windows.net.</span></span>

<span data-ttu-id="3cca8-573">Один toonote вещь — CORS разрешает доступ, что он не поддерживает проверку подлинности, которая является обязательным для всех доступа, кроме public ресурсов хранилища.</span><span class="sxs-lookup"><span data-stu-id="3cca8-573">One thing toonote is that CORS allows access, but it does not provide authentication, which is required for all non-public access of storage resources.</span></span> <span data-ttu-id="3cca8-574">Это означает, что доступны только большие двоичные объекты, если они являются открытыми и включает подпись общего доступа предоставляя hello соответствующее разрешение.</span><span class="sxs-lookup"><span data-stu-id="3cca8-574">This means you can only access blobs if they are public or you include a Shared Access Signature giving you hello appropriate permission.</span></span> <span data-ttu-id="3cca8-575">Таблицы, очереди и файлы не могут быть общедоступными и требуют подписанного URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="3cca8-575">Tables, queues, and files have no public access, and require a SAS.</span></span>

<span data-ttu-id="3cca8-576">По умолчанию механизм CORS отключен для всех служб.</span><span class="sxs-lookup"><span data-stu-id="3cca8-576">By default, CORS is disabled on all services.</span></span> <span data-ttu-id="3cca8-577">CORS можно включить с помощью hello API-интерфейса REST или hello хранилища клиента библиотеки toocall один из политики службы hello tooset методы hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-577">You can enable CORS by using hello REST API or hello storage client library toocall one of hello methods tooset hello service policies.</span></span> <span data-ttu-id="3cca8-578">При этом необходимо включить правило CORS в формате XML.</span><span class="sxs-lookup"><span data-stu-id="3cca8-578">When you do that, you include a CORS rule, which is in XML.</span></span> <span data-ttu-id="3cca8-579">Ниже приведен пример правила CORS, которое было задано с помощью операции Set Service Properties hello для hello службы BLOB-объектов для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-579">Here's an example of a CORS rule that has been set using hello Set Service Properties operation for hello Blob Service for a storage account.</span></span> <span data-ttu-id="3cca8-580">Можно выполнять операции с помощью клиентской библиотеки хранилища hello или hello API-интерфейс REST для службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3cca8-580">You can perform that operation using hello storage client library or hello REST APIs for Azure Storage.</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="3cca8-581">Вот что означает каждая строка:</span><span class="sxs-lookup"><span data-stu-id="3cca8-581">Here's what each row means:</span></span>

* <span data-ttu-id="3cca8-582">**AllowedOrigins** это показывает, какие домены несоответствующий можно запрашивать и получать данные из службы хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-582">**AllowedOrigins** This tells which non-matching domains can request and receive data from hello storage service.</span></span> <span data-ttu-id="3cca8-583">В этом примере указано, что и домен contoso.com, и домен fabrikam.com могут запрашивать данные из хранилища BLOB-объектов для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3cca8-583">This says that both contoso.com and fabrikam.com can request data from Blob Storage for a specific storage account.</span></span> <span data-ttu-id="3cca8-584">Можно также задать этот шаблон tooa (\*) запрашивает все домены tooaccess tooallow.</span><span class="sxs-lookup"><span data-stu-id="3cca8-584">You can also set this tooa wildcard (\*) tooallow all domains tooaccess requests.</span></span>
* <span data-ttu-id="3cca8-585">**AllowedMethods** это список hello методы (команды HTTP-запросов), которые могут использоваться при выполнении запроса hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-585">**AllowedMethods** This is hello list of methods (HTTP request verbs) that can be used when making hello request.</span></span> <span data-ttu-id="3cca8-586">В этом примере разрешены только методы PUT и GET.</span><span class="sxs-lookup"><span data-stu-id="3cca8-586">In this example, only PUT and GET are allowed.</span></span> <span data-ttu-id="3cca8-587">Можно задать этот шаблон tooa (\*) использовать все методы toobe tooallow.</span><span class="sxs-lookup"><span data-stu-id="3cca8-587">You can set this tooa wildcard (\*) tooallow all methods toobe used.</span></span>
* <span data-ttu-id="3cca8-588">**AllowedHeaders** запроса hello, заголовки, которые hello исходный домен можно указать при выполнении запроса hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-588">**AllowedHeaders** This is hello request headers that hello origin domain can specify when making hello request.</span></span> <span data-ttu-id="3cca8-589">В этом примере разрешены все заголовки метаданных, которые начинаются с x-ms-meta-data, x-ms-meta-target и x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="3cca8-589">In this example, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="3cca8-590">Здравствуйте, подстановочный знак (\*) указывает, что все заголовки, начинающиеся со слова hello указан префикс допускается.</span><span class="sxs-lookup"><span data-stu-id="3cca8-590">hello wildcard character (\*) indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="3cca8-591">**ExposedHeaders** сообщает, какие заголовки ответа должен быть предоставлен поставщиком запрос toohello браузера hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-591">**ExposedHeaders** This tells which response headers should be exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="3cca8-592">В этом примере это любые заголовки, начинающиеся с "x-ms-meta-".</span><span class="sxs-lookup"><span data-stu-id="3cca8-592">In this example, any header starting with "x-ms-meta-" will be exposed.</span></span>
* <span data-ttu-id="3cca8-593">**MaxAgeInSeconds** это максимальный период времени, что браузер будет кэшировать Предварительный запрос OPTIONS hello hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-593">**MaxAgeInSeconds** This is hello maximum amount of time that a browser will cache hello preflight OPTIONS request.</span></span> <span data-ttu-id="3cca8-594">(Дополнительные сведения о hello Предварительный запрос проверьте hello первой статье ниже).</span><span class="sxs-lookup"><span data-stu-id="3cca8-594">(For more information about hello preflight request, check hello first article below.)</span></span>

#### <a name="resources"></a><span data-ttu-id="3cca8-595">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3cca8-595">Resources</span></span>
<span data-ttu-id="3cca8-596">Дополнительные сведения о CORS и как tooenable, проверьте перечисленные ниже ресурсы.</span><span class="sxs-lookup"><span data-stu-id="3cca8-596">For more information about CORS and how tooenable it, please check out these resources.</span></span>

* [<span data-ttu-id="3cca8-597">Поддержка общего доступа к ресурсам независимо от источника (CORS) для служб хранилища Azure на Azure.com hello</span><span class="sxs-lookup"><span data-stu-id="3cca8-597">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services on Azure.com</span></span>](../storage-cors-support.md)

  <span data-ttu-id="3cca8-598">Приводятся общие сведения о CORS и работе tooset hello правил для служб хранилища различных hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-598">This article provides an overview of CORS and how tooset hello rules for hello different storage services.</span></span>
* [<span data-ttu-id="3cca8-599">Поддержка общего доступа к ресурсам независимо от источника (CORS) для hello служб хранилища Azure на MSDN</span><span class="sxs-lookup"><span data-stu-id="3cca8-599">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services on MSDN</span></span>](https://msdn.microsoft.com/library/azure/dn535601.aspx)

  <span data-ttu-id="3cca8-600">Это hello справочную документацию по поддержка CORS для служб хранилища Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-600">This is hello reference documentation for CORS support for hello Azure Storage Services.</span></span> <span data-ttu-id="3cca8-601">Это tooarticles ссылок, применения tooeach службы хранилища и показан пример и описание каждого элемента в файле CORS hello.</span><span class="sxs-lookup"><span data-stu-id="3cca8-601">This has links tooarticles applying tooeach storage service, and shows an example and explains each element in hello CORS file.</span></span>
* [<span data-ttu-id="3cca8-602">Служба хранилища Microsoft Azure: знакомство с CORS</span><span class="sxs-lookup"><span data-stu-id="3cca8-602">Microsoft Azure Storage: Introducing CORS</span></span>](http://blogs.msdn.com/b/windowsazurestorage/archive/2014/02/03/windows-azure-storage-introducing-cors.aspx)

  <span data-ttu-id="3cca8-603">Это статье ссылку toohello начальной блог объявляет о CORS и отображение как toouse его.</span><span class="sxs-lookup"><span data-stu-id="3cca8-603">This is a link toohello initial blog article announcing CORS and showing how toouse it.</span></span>

## <a name="frequently-asked-questions-about-azure-storage-security"></a><span data-ttu-id="3cca8-604">Часто задаваемые вопросы о безопасности службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3cca8-604">Frequently asked questions about Azure Storage security</span></span>
1. <span data-ttu-id="3cca8-605">**Как проверять целостность hello hello больших двоичных объектов, который я передачи в или из хранилища Azure, использования протокола HTTPS hello**</span><span class="sxs-lookup"><span data-stu-id="3cca8-605">**How can I verify hello integrity of hello blobs I'm transferring into or out of Azure Storage if I can't use hello HTTPS protocol?**</span></span>

   <span data-ttu-id="3cca8-606">Если для какой-либо причине требуется toouse HTTP вместо HTTPS и вы работаете с блочных больших двоичных объектов может использовать проверка MD5 toohelp проверки целостности hello hello BLOB-объектов, передаваемых.</span><span class="sxs-lookup"><span data-stu-id="3cca8-606">If for any reason you need toouse HTTP instead of HTTPS and you are working with block blobs, you can use MD5 checking toohelp verify hello integrity of hello blobs being transferred.</span></span> <span data-ttu-id="3cca8-607">Это поможет защититься от ошибок транспортного и сетевого уровня, но не обязательно предотвратит атаки промежуточного уровня.</span><span class="sxs-lookup"><span data-stu-id="3cca8-607">This will help with protection from network/transport layer errors, but not necessarily with intermediary attacks.</span></span>

   <span data-ttu-id="3cca8-608">Если можно использовать протокол HTTPS, который обеспечивает безопасность на транспортном уровне, то применение проверки MD5 является избыточным и ненужным.</span><span class="sxs-lookup"><span data-stu-id="3cca8-608">If you can use HTTPS, which provides transport level security, then using MD5 checking is redundant and unnecessary.</span></span>

   <span data-ttu-id="3cca8-609">Дополнительные сведения можно найти hello [обзоре MD5 подписей больших двоичных объектов Azure](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span><span class="sxs-lookup"><span data-stu-id="3cca8-609">For more information, please check out hello [Azure Blob MD5 Overview](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/02/18/windows-azure-blob-md5-overview.aspx).</span></span>
2. <span data-ttu-id="3cca8-610">**Как насчет соответствия FIPS для США hello США?**</span><span class="sxs-lookup"><span data-stu-id="3cca8-610">**What about FIPS-Compliance for hello U.S. Government?**</span></span>

   <span data-ttu-id="3cca8-611">Hello США федеральным сведения обработки Standard (FIPS) определяет алгоритмы шифрования, утвержденные для использования в США Федеральным правительством компьютерах hello защиты конфиденциальных данных.</span><span class="sxs-lookup"><span data-stu-id="3cca8-611">hello United States Federal Information Processing Standard (FIPS) defines cryptographic algorithms approved for use by U.S. Federal government computer systems for hello protection of sensitive data.</span></span> <span data-ttu-id="3cca8-612">Включение FIPS режима в Windows server или рабочего стола сообщает hello ОС, должны использоваться только проверка FIPS алгоритмы шифрования.</span><span class="sxs-lookup"><span data-stu-id="3cca8-612">Enabling FIPS mode on a Windows server or desktop tells hello OS that only FIPS-validated cryptographic algorithms should be used.</span></span> <span data-ttu-id="3cca8-613">Если приложение использует-совместимые алгоритмы, hello приложения будет приостановлено.</span><span class="sxs-lookup"><span data-stu-id="3cca8-613">If an application uses non-compliant algorithms, hello applications will break.</span></span> <span data-ttu-id="3cca8-614">Построенной при помощи.NET Framework версии 4.5.2 или более поздней версии, приложение hello автоматически переключается алгоритмы toouse FIPS-совместимые алгоритмы шифрования hello при hello компьютер находится в режиме FIPS.</span><span class="sxs-lookup"><span data-stu-id="3cca8-614">With.NET Framework versions 4.5.2 or higher, hello application automatically switches hello cryptography algorithms toouse FIPS-compliant algorithms when hello computer is in FIPS mode.</span></span>

   <span data-ttu-id="3cca8-615">Корпорация Майкрософт оставляет ее вверх toodecide клиента tooeach ли tooenable режиме FIPS.</span><span class="sxs-lookup"><span data-stu-id="3cca8-615">Microsoft leaves it up tooeach customer toodecide whether tooenable FIPS mode.</span></span> <span data-ttu-id="3cca8-616">Мы надеемся, что нет никаких веских причин для клиентов, которые не являются режим FIPS tooenable нормам toogovernment тема по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3cca8-616">We believe there is no compelling reason for customers who are not subject toogovernment regulations tooenable FIPS mode by default.</span></span>

   <span data-ttu-id="3cca8-617">**Ресурсы**</span><span class="sxs-lookup"><span data-stu-id="3cca8-617">**Resources**</span></span>

* [<span data-ttu-id="3cca8-618">Почему мы больше не рекомендуем использовать режим FIPS</span><span class="sxs-lookup"><span data-stu-id="3cca8-618">Why We're Not Recommending "FIPS Mode" Anymore</span></span>](http://blogs.technet.com/b/secguide/archive/2014/04/07/why-we-re-not-recommending-fips-mode-anymore.aspx)

  <span data-ttu-id="3cca8-619">В этой записи блога приводятся общие сведения о FIPS и объясняется, почему режим FIPS не включен по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3cca8-619">This blog article gives an overview of FIPS and explains why they don't enable FIPS mode by default.</span></span>
* [<span data-ttu-id="3cca8-620">Проверка на соответствие стандарту FIPS 140</span><span class="sxs-lookup"><span data-stu-id="3cca8-620">FIPS 140 Validation</span></span>](https://technet.microsoft.com/library/cc750357.aspx)

  <span data-ttu-id="3cca8-621">Эта статья содержит сведения о как продукты корпорации Майкрософт и криптографических модулей соответствует стандарту FIPS hello для США hello правительства США.</span><span class="sxs-lookup"><span data-stu-id="3cca8-621">This article provides information on how Microsoft products and cryptographic modules comply with hello FIPS standard for hello U.S. Federal government.</span></span>
* <span data-ttu-id="3cca8-622">["System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows](https://support.microsoft.com/kb/811833) (Влияние параметров безопасности "Системная криптография: использовать FIPS-совместимые алгоритмы для шифрования, хэширования и подписывания" в Windows XP и более поздних версиях Windows)</span><span class="sxs-lookup"><span data-stu-id="3cca8-622">["System cryptography: Use FIPS compliant algorithms for encryption, hashing, and signing" security settings effects in Windows XP and in later versions of Windows](https://support.microsoft.com/kb/811833)</span></span>

  <span data-ttu-id="3cca8-623">В этой статье рассказывается о hello использовать режим FIPS в более старых компьютерах Windows.</span><span class="sxs-lookup"><span data-stu-id="3cca8-623">This article talks about hello use of FIPS mode in older Windows computers.</span></span>
