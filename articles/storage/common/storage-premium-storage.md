---
title: "Хранилище Premium aaaHigh производительности и Azure управляемых диски для виртуальных машин | Документы Microsoft"
description: "Рекомендации по высокопроизводительному хранилищу класса Premium и управляемым дискам для виртуальных машин Azure. Виртуальные машины Azure серий DS, DSv2, GS и Fs поддерживают хранилище класса Premium."
services: storage
documentationcenter: 
author: ramankumarlive
manager: aungoo-msft
editor: tysonn
ms.assetid: e2a20625-6224-4187-8401-abadc8f1de91
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/27/2017
ms.author: ramankum
ms.openlocfilehash: 5f08e615869ed59a9d80d798ec191dd4d3abc3e0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="high-performance-premium-storage-and-managed-disks-for-vms"></a>Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин Azure
Хранилище Azure класса Premium обеспечивает поддержку дисков с высокой производительностью и малой задержкой для виртуальных машин с интенсивной рабочей нагрузкой ввода-вывода. Диски виртуальной машины, использующие хранилище класса Premium, хранят данные на твердотельных накопителях. преимущества tootake hello скорости и производительность дисков хранилища premium, можно перенести существующие tooPremium дисков виртуальной Машины хранилища.

В Azure вы можете присоединить несколько tooa дисков хранилища premium виртуальной Машины. Использование нескольких дисков дает приложений вверх too256 ТБ хранилища каждой виртуальной Машины. С хранилищем класса Premium приложения можно добиться 80 000 операций ввода-вывода в секунду (IOPS) на виртуальную Машину и пропускной способностью диска вверх too2 000 МБ в секунду (МБИТ/с) каждой виртуальной Машины. с очень низкой задержкой при операциях чтения.

С хранилищем класса Premium Azure предлагает возможность hello tootruly точности прогнозов и shift ресурсоемких корпоративных приложений, таких как облака toohello ферм Dynamics AX, Dynamics CRM, Exchange Server, SAP Business Suite и SharePoint. Вы можете запускать интенсивные рабочие нагрузки баз данных в таких приложениях, как SQL Server, Oracle, MongoDB, MySQL и Redis, которым требуется согласованная высокая производительность и небольшая задержка.

> [!NOTE]
> Для наилучшей производительности hello для вашего приложения рекомендуется перейти любой диск виртуальной Машины, который требует высокой tooPremium операций ввода-ВЫВОДА хранилища. Если диску не требуется обеспечивать большое число операций ввода-вывода в секунду, можно ограничить затраты, оставив его в хранилище Azure класса Standard. В хранилище класса Standard данные дисков виртуальных машин хранятся на жестких дисках, а не на твердотельных дисках.
> 

Azure предлагает два способа toocreate premium диски для виртуальных машин.

* **Неуправляемые диски**

    Hello исходного метода является неуправляемым toouse дисков. К неуправляемой диска управлять hello учетных записей хранения использовать toostore hello виртуального жесткого диска (VHD) файлы, соответствующие tooyour дисков виртуальной Машины. VHD-файлы хранятся в учетных записях хранения Azure как страничные BLOB-объекты. 

* **Управляемые диски**

    При выборе [управляемых дисков Azure](../../virtual-machines/windows/managed-disks-overview.md), Azure управляет hello учетных записей хранилища, используемого для дисков виртуальной Машины. Укажите тип диска hello (Premium или Standard) и размер hello hello диска, который требуется. Azure создает и управляет hello диска. У вас нет tooworry о размещении hello дисков в нескольких tooensure учетных записей хранилища, для соблюдения ограничения масштабируемости для учетных записей хранилища. Azure берет это на себя.

Рекомендуется выбрать управляемый диски, tootake преимуществами их множество функций.

к работе с хранилищем класса Premium, tooget [создать бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial/). 

Сведения о миграции на существующие виртуальные машины tooPremium хранилища см. в разделе [преобразование виртуальной Машины Windows с неуправляемой дисков toomanaged дисков](../../virtual-machines/windows/convert-unmanaged-to-managed-disks.md) или [преобразование виртуальной Машины Linux с неуправляемой дисков toomanaged дисков](../../virtual-machines/linux/convert-unmanaged-to-managed-disks.md).

> [!NOTE]
> Хранилище класса Premium доступно в большинстве регионов. Список доступных регионов hello в [служб Azure по регионам](https://azure.microsoft.com/regions/#services), рассмотрим hello областей, в котором поддерживаются виртуальные машины серии размер расширенной поддержки (серии DS, серии DSV2 серии серии GS и виртуальные машины серии Fs) поддерживаются.
> 

## <a name="features"></a>Функции

Ниже приведены некоторые функции hello хранилища Premium.

* **Диски хранилища класса Premium.**

    Размер серии toospecific присоединенного Premium поддерживает VM диски, которые могут быть виртуальными машинами. Хранилище уровня "Премиум" поддерживает виртуальные машины серий DS, DSv2, GS, Ls и Fs. Доступно семь размеров дисков: P4 (32 ГБ), P6 (64 ГБ), P10 (128 ГБ), P20 (512 ГБ), P30 (1024 ГБ), P40 (2048 ГБ) и P50 (4095 ГБ). Размеры дисков P4 и P6 в пока что поддерживаются только для службы "Управляемые диски". Каждый из них имеет свои собственные характеристики производительности. В зависимости от требований приложения можно добавить один или несколько tooyour дисков виртуальной Машины. Чтобы описать спецификации hello более подробно в [целей производительности и масштабируемости хранилища Premium](#scalability-and-performance-targets).

* **Страничные BLOB-объекты класса Premium.**

    Хранилище класса Premium поддерживает страничные BLOB-объекты, Используйте страницу большие двоичные объекты toostore постоянное и неуправляемые диски для виртуальных машин в хранилище Premium. В отличие от хранилища Azure класса Standard, хранилище класса Premium не поддерживает блочные BLOB-объекты, добавочные BLOB-объекты, файлы, таблицы и очереди. Premium страничные большие двоичные объекты поддерживает шесть размеры P10 tooP50 и P60 (8191GiB). P60 Premium страничного большого двоичного объекта не поддерживается toobe подключаться как диски виртуальной Машины. 

    Любой объект, помещенный в учетную запись хранения класса Premium, будет страничным BLOB-объектом, большой двоичный объект страницы приветствия привязывает tooone из hello поддерживается подготовленных размеры. Именно поэтому toobe используемых toostore очень мала BLOB-объектов учетной записи хранения premium не предназначен.

* **Учетная запись хранилища класса Premium.**

    toostart с помощью хранилища Premium, создать учетную запись хранилища premium для неуправляемых дисков. В hello [портал Azure](https://portal.azure.com), toocreate учетной записи хранения premium выберите hello **Premium** уровня производительности. Выберите hello **локально избыточное хранилище (LRS)** параметр репликации. Учетная запись хранения premium можно создать, задав тип hello слишком**Premium_LRS** в одном из следующих элементов hello:
    * [REST API хранилища](https://docs.microsoft.com/rest/api/storageservices/Azure-Storage-Services-REST-API-Reference) (версии 2014-02-14 или более поздней);
    * [REST API управления службами](http://msdn.microsoft.com/library/azure/ee460799.aspx) (версии 2014-10-01 или более поздней; для классического развертывания Azure);
    * [REST API поставщика ресурсов службы хранилища Azure](https://docs.microsoft.com/rest/api/storagerp) (для развернутых служб Resource Manager);
    * [Azure PowerShell](/powershell/azureps-cmdlets-docs.md) (версии 0.8.10 или более поздней).

    toolearn об ограничениях учетной записи хранения premium, в разделе [целей производительности и масштабируемости хранилища Premium](#premium-storage-scalability-and-performance-targets).

* **Локально избыточное хранилище класса Premium.**

    Учетной записи хранения premium поддерживает только локально избыточное хранилище в качестве параметра replication hello. Локально избыточное хранилище поддерживает три копии данных hello в одном регионе. Для регионального аварийного восстановления необходимо создать резервную копию дисков виртуальной машины в другом регионе с использованием [службы архивации Azure](../../backup/backup-introduction-to-azure-backup.md). Также необходимо использовать учетную запись географически избыточное хранилище (GRS) в качестве резервного хранилища hello. 

    Azure использует учетную запись хранилища как контейнер для неуправляемых дисков. В том случае, если вы создаете виртуальную машину Azure серий DS, DSv2, GS или Fs с помощью неуправляемых дисков и выбираете учетную запись хранилища класса Premium, ваша операционная система и диски данных хранятся в этой учетной записи.

## <a name="supported-vms"></a>Поддерживаемые виртуальные машины
Хранилище уровня "Премиум" поддерживает виртуальные машины серий DS, DSv2, GS, Ls и Fs. С этими виртуальными машинами можно использовать диски хранилищ класса Standard и Premium. Однако нельзя использовать диски хранилища класса Premium с серией виртуальных машин, не совместимой с хранилищем этого класса.

Сведения о доступных в Azure типах и размерах для виртуальных машин Windows см. [здесь](../../virtual-machines/virtual-machines-windows-sizes-storage.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json). Сведения о доступных в Azure типах и размерах для виртуальных машин Linux см. [здесь](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

Вот некоторые распространенные функции hello hello серии DS, серии DSv2 серии GS-series Ls рядов, а виртуальные машины серии Fs:

* **Облачная служба.**

    Можно добавить виртуальные машины серии DS tooa облачная служба, которая содержит только виртуальные машины серии DS. Не следует добавлять виртуальные машины серии DS tooan существующую облачную службу с любой тип, отличный от виртуальных машин серии DS. Можно перенести существующие виртуальные жесткие диски tooa новой облачной службы, работающей только виртуальные машины серии DS. Если вы хотите toouse hello же виртуальный IP-адрес для hello новой облачной службы, на котором размещены виртуальные машины серии DS, используйте [зарезервированные IP-адреса](../../virtual-network/virtual-networks-instance-level-public-ip.md). Виртуальные машины серии GS можно добавить tooan существующей облачной службы, который содержит только виртуальные машины серии GS.

* **Диск операционной системы.**

    Можно настроить toouse вашей виртуальной Машины хранилища Premium расширенной или диск стандартной операционной системе. Для получения наилучших результатов hello рекомендуется использовать диск операционной системы на основе хранилища Premium.

* **Диски данных**

    Можно использовать premium и standard дисков в hello одной виртуальной Машины хранилища Premium. Хранилище Premium позволяет подготовить виртуальную Машину и присоединения дисков toohello несколько постоянных данных виртуальной Машины. При необходимости tooincrease hello емкости и производительности hello тома, вы можете создать чередующийся между дисками.

    > [!NOTE]
    > Если вы создаете чередующийся том на дисках данных хранилища класса Premium с помощью [дисковых пространств](http://technet.microsoft.com/library/hh831739.aspx), то необходимо настроить по одному столбцу для каждого используемого диска. В противном случае общую производительность hello чередующемся томе может быть ниже, чем ожидается, из-за неравномерное распределение трафика между дисками hello. По умолчанию в диспетчере сервера можно настроить столбцы для too8 диски. При наличии более чем 8 дисков, используйте PowerShell toocreate hello тома. Укажите номер hello столбцов вручную. В противном случае hello пользовательского интерфейса диспетчера серверов продолжается toouse 8 столбцы, даже при наличии дополнительных дисков. Например, если у вас есть 32 диска в одном чередующемся наборе, необходимо указать 32 столбца. число столбцов hello toospecify hello использует виртуальный диск, в hello [New-VirtualDisk](http://technet.microsoft.com/library/hh848643.aspx) командлет PowerShell, используйте hello *NumberOfColumns* параметра. Дополнительные сведения см. в статьях [Обзор дисковых пространств](http://technet.microsoft.com/library/hh831739.aspx) и [Storage Spaces Frequently Asked Questions](http://social.technet.microsoft.com/wiki/contents/articles/11382.storage-spaces-frequently-asked-questions-faq.aspx) (Часто задаваемые вопросы о дисковых пространствах).
    >
    > 

* **Кэш.**

    Виртуальные машины в ряду размер hello и поддерживают хранилище класса Premium иметь уникальные возможности кэширования для высокого уровня пропускной способности и задержки. кэширование возможностей Hello превышает базовой производительности диска хранения premium. Можно задать диск hello политика кэширования на дисках хранилища premium слишком**ReadOnly**, **ReadWrite**, или **нет**. политика кэширования диска по умолчанию Hello **ReadOnly** для всех дисков данных premium, и **ReadWrite** для дисков операционной системы. Для достижения оптимальной производительности приложения hello используйте правильный параметр кэша. Например, для дисков, высокая интенсивность чтения или только для чтения данных, такие как файлы данных SQL Server, установить слишком политика кэширования диска hello**ReadOnly**. Для дисков тяжелой записи или только для записи данных, такие как файлы журнала SQL Server, установите слишком политика кэширования диска hello**нет**. toolearn более об оптимизации макета с хранилищем класса Premium, в разделе [разработка для производительности с хранилище Premium](storage-premium-storage-performance.md).

* **Аналитика**

    tooanalyze производительности виртуальных Машин путем использования дисков в хранилище Premium включить диагностику виртуальных Машин в hello [портал Azure](https://portal.azure.com). Дополнительные сведения см. в записи блога [Microsoft Azure Virtual Machine Monitoring with Azure Diagnostics Extension](https://azure.microsoft.com/blog/2014/09/02/windows-azure-virtual-machine-monitoring-with-wad-extension/) (Мониторинг виртуальной машины Microsoft Azure с помощью расширения диагностики Azure). 

    производительность диска toosee, использования средств операционной системы, например [монитора производительности](https://technet.microsoft.com/library/cc749249.aspx) для виртуальных машин Windows и hello [iostat](http://linux.die.net/man/1/iostat) команду для виртуальных машин Linux.

* **Производительность и пределы масштабирования виртуальной машины.**

    Каждого размера виртуальной Машины поддерживается хранилище Premium имеет ограничения масштабирования и производительности спецификации для операций ввода-ВЫВОДА, пропускной способности и hello количество дисков, которые можно подключить виртуальную машину. При использовании дисков хранилища premium с виртуальными машинами, убедитесь, что имеется достаточно операций ввода-ВЫВОДА и пропускную способность трафика toodrive диска виртуальной Машины.

    Например, для виртуальной машины STANDARD_DS1 выделенная пропускная способность для обмена данными с дисками хранилища класса Premium составляет 32 МБ в секунду. Диск P10 хранилища класса Premium может обеспечивать пропускную способность 100 МБ в секунду. Если диск хранилища premium P10 toothis подключенных виртуальных Машин, он может только перейти вверх too32 МБ/с. Его нельзя использовать hello, предоставляемых максимальное 100 МБИТ/с этого диска P10 hello.

    В настоящее время hello наибольшее виртуальной Машины в серии DS hello — hello Standard_DS15_v2. Hello Standard_DS15_v2 может достигнуть too960 МБ/с на всех дисках. Hello наибольшее виртуальной Машины в hello серии GS — hello Standard_GS5. Hello Standard_GS5 может достигнуть too2 000 МБ/с на всех дисках.

    Обратите внимание, что эти ограничения действуют только в отношении трафика диска без учета данных, извлекаемых из кэша, и сетевого трафика. Для сетевого трафика виртуальных машин предназначен отдельный канал, Пропускной способности для сетевого трафика, отличается от выделенного hello пропускная способность дисков "премиум".

    Hello самые последние сведения о максимальное операций ввода-ВЫВОДА и пропускной способности (пропускная способность) для хранения Premium поддерживаются виртуальные машины, в разделе [размеры виртуальных Машин Windows](/azure/virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) или [размеры виртуальных Машин Linux](../../virtual-machines/windows/sizes.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

    Дополнительные сведения о дисках хранилища premium и их ограничения операций ввода-ВЫВОДА и пропускной способности см. в таблице hello в следующем разделе hello.

## <a name="scalability-and-performance-targets"></a>Целевые показатели масштабируемости и производительности хранилища
В этом разделе описывается hello tooconsider целей производительности и масштабируемости при использовании хранилища Premium.

Учетные записи хранения Premium имеют следующие целевые показатели масштабируемости hello.

| Общая емкость учетной записи | Общая пропускная способность для учетной записи локально избыточного хранилища |
| --- | --- | 
| Емкость диска: 35 ТБ <br>Емкость для моментальных снимков: 10 ТБ | Копирование too50 гигабит в секунду для входящих подключений<sup>1</sup> + исходящие<sup>2</sup> |

<sup>1</sup> все данные (запросы), отправляемые учетной записи хранилища tooa

<sup>2</sup> Все данные (отклики), получаемые из учетной записи хранения.

Дополнительные сведения см. в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](storage-scalability-targets.md).

Если вы используете учетные записи хранения premium для неуправляемых дисков и приложения превышает hello целевые показатели масштабируемости для одной учетной записи хранения, может потребоваться toomigrate toomanaged дисков. Если вы не хотите toomigrate toomanaged дисков, построение нескольких учетных записей хранения toouse вашего приложения. и распределите данные между этими учетными записями. Например если вы хотите tooattach 51 ТБ дисков между несколькими виртуальными машинами, распределите их по две учетные записи хранения. 35 ТБ не должен превышать hello учетной записи хранения premium один. Объем подготовленных к работе дисков в одной учетной записи хранилища класса Premium должен составлять не более 35 ТБ.

### <a name="premium-storage-disk-limits"></a>Пределы для дисков хранилища класса Premium
После подготовки диска хранилища premium, hello размер диска hello определяет hello максимальное операций ввода-ВЫВОДА и пропускной способности (пропускная способность). Azure предлагает семь типов дисков для хранилища уровня "Премиум": P4 и P6 (только для службы "Управляемые диски"), а также P10, P20, P30, P40 и P50. Каждый из них отличается определенными ограничениями относительно количества операций ввода-вывода в секунду и пропускной способности, Ограничения для типов диска hello описаны в следующей таблице hello:

| Диски уровня "Премиум"  | P4    | P6    | P10   | P20   | P30   | P40   | P50   | 
|---------------------|-------|-------|-------|-------|-------|-------|-------|
| Размер диска           | 32 ГБ| 64 ГБ| 128 ГБ| 512 ГБ            | 1024 ГБ (1 ТБ)    | 2048 ГБ (2 ТБ)    | 4095 ГБ (4 ТБ)    | 
| Количество операций ввода-вывода в секунду на диск       | 120   | 240   | 500   | 2300              | 5000              | 7500              | 7500              | 
| Пропускная способность на диск | 25 МБ в секунду  | 50 МБ в секунду  | 100 МБ в секунду | 150 МБ в секунду | 200 МБ в секунду | 250 МБ в секунду | 250 МБ в секунду | 

> [!NOTE]
> Убедитесь, что достаточная пропускная способность доступна на toodrive диска трафик виртуальной Машины, как описано в [хранилище Premium поддерживаются виртуальные машины](#premium-storage-supported-vms). В противном случае пропускной способности диска и IOPS является ограничением toolower значения. Максимальная пропускная способность и операций ввода-ВЫВОДА основаны на пределы hello виртуальной Машины, не на диске ограничения hello, указанные в предшествующей таблице hello.  
> 
> 

Ниже приведены некоторые важные моменты, о tooknow о целей производительности и масштабируемости хранилища Premium.

* **Подготовленная емкость и производительность.**

    При подготовке дисков хранилища premium, в отличие от стандартного хранилища гарантируется емкости hello, операций ввода-ВЫВОДА и пропускную способность диска. Например, при создании диска P50 Azure подготавливает для него 4095 ГБ емкости хранилища, а также пропускную способность 250 МБ в секунду и 7500 операций ввода-вывода в секунду. Приложение может использовать все или часть hello емкости и производительности.

* **Размер диска**

    Azure maps hello toohello (с округлением) размер диска ближайшего вариант диска хранилища premium, как указано в таблице hello в предшествующих раздел hello. Например, диск размером 100 ГБ классифицируется как диск P10 Он может выполнять копирование too500 операций ввода-ВЫВОДА с копирование пропускной способности too100 МБ/с. Аналогичным образом диск размером 400 ГБ классифицируется как диск P20 Он может выполнять копирование too2 300 операций ввода-ВЫВОДА, с 150 МБ/с пропускной способностью.
    
    > [!NOTE]
    > Вы можете легко увеличить hello существующих дисков. Например может потребоваться tooincrease hello размером 30 ГБ дискового too128 ГБ или ТБ даже too1. Или может потребоваться tooconvert на диске tooa P30 P20 диск, так как требуется дополнительная емкость или несколько операций ввода-ВЫВОДА и пропускной способности. 
    > 
 
* **Объем ввода-вывода**

    размер Hello операций ввода-вывода — 256 КБ. Если передаваемые данные hello меньше 256 КБ, он считается 1 единица ввода-вывода. Данные большего размера подсчитываются путем сложения размеров нескольких единиц операций ввода-вывода по 256 КБ. Например, данные операции ввода-вывода размером 1100 КБ считаются пятью единицами операций ввода-вывода.

* **Пропускная способность**

    Ограничение пропускной способности Hello включает записи toohello диск, а также операций чтения диска, не выполненных из кэша hello. Например, каждый диск P10 имеет пропускную способность 100 МБ в секунду. Некоторые примеры допустимых пропускную способность диска P10 показаны в следующей таблице hello:

    | Макс. пропускная способность на диск P10 | Операции чтения с диска без кэширования | Операции записи кэша не toodisk |
    | --- | --- | --- |
    | 100 МБ/с | 100 МБ/с | 0 |
    | 100 МБ/с | 0 | 100 МБ/с |
    | 100 МБ/с | 60 МБ/с | 40 МБ/с |

* **Попаданий в кэш.**

    Попаданий в кэш не ограничивается hello распределения операций ввода-ВЫВОДА или пропускная способность диска hello. Например, при использовании диска с данными с **ReadOnly** кэша, заданного для виртуальной Машины, которая поддерживается в хранилище класса Premium, операций чтения, которые обслуживаются из кэша hello не субъекта toohello операций ввода-ВЫВОДА и режим caps пропускную способность диска hello. Если рабочая нагрузка hello диска — преимущественно считывает, можно получить очень высокой пропускной способностью. кэш Hello — тема tooseparate операций ввода-ВЫВОДА и ограничения пропускной способности на основании hello размер виртуальной Машины hello уровня виртуальной Машины. Для машин серии DS они составляют приблизительно 4000 операций ввода-вывода в секунду и 33 МБ в секунду на ядро для кэша и для операций с локальным SSD-накопителем. Для машин серии GS ограничения составляют 5000 операций ввода-вывода в секунду и 50 МБ в секунду на ядро для кэша и для операций с локальным SSD-накопителем. 

## <a name="throttling"></a>Регулирование
Регулирование может произойти, если приложение операций ввода-ВЫВОДА или пропускная способность превышает пределы hello выделенных для диска хранилища premium. Также регулирования может произойти, если общий объем дискового трафика на всех дисках на hello виртуальной Машины превышает ограничение пропускной способности hello диска для виртуальной Машины hello. Регулирование tooavoid, рекомендуется ограничить количество hello ожидающих запросов ввода-вывода для диска hello. Используйте ограничение на основании целевые показатели производительности и масштабируемости для hello диск, который вы подготовили и hello диска пропускной способности доступны toohello виртуальной Машины.  

Приложения можно добиться hello наименьшую задержку, когда оно разработано tooavoid регулирования. Однако если hello количество ожидающих запросов ввода-вывода для диска hello слишком мал, приложение не может воспользоваться преимуществами hello максимального уровня операций ввода-ВЫВОДА и пропускной способности, доступных toohello диска.

Привет, следующие примеры демонстрируют, как уровни регулирования toocalculate. Все расчеты основаны на размере единицы операции ввода-вывода в 256 КБ.

### <a name="example-1"></a>Пример 1
Приложение выполнило 495 операций ввода-вывода данных размером 16 КБ в секунду на диске P10. Hello ввода-вывода единиц, считаются 495 операций ввода-ВЫВОДА. При попытке операций ввода-вывода 2 МБ в hello же, во-вторых, hello общее количество операций ввода-вывода единиц равно too495 + 8 операций ввода-ВЫВОДА. Это из-за ввода-вывода 2 МБ = единицы 2048 КБ или 256 КБ = 8 ввода-вывода при hello размер блока ввода-вывода — 256 КБ. Так как сумма hello 495 + 8 превышает hello 500 операций ввода-ВЫВОДА для диска hello, регулирование происходит.

### <a name="example-2"></a>Пример 2
Приложение выполнило 400 операций ввода-вывода данных размером 256 КБ на диске P10. — Общая потребляемая пропускная способность Hello (400 &#215; 256) или 1024 КБ = 100 МБИТ/с. Предельное значение пропускной способности для диска P10 составляет 100 МБ/с. Если приложение пытается tooperform дополнительные операции ввода-вывода в секунду, снижается из-за превышения лимита выделенной hello.

### <a name="example-3"></a>Пример 3
У вас виртуальная машина DS4, к которой подключены два диска P30. Каждый диск P30 рассчитан на пропускную способность до 200 МБ в секунду. Однако общая пропускная способность виртуальной машины DS4 составляет 256 МБ в секунду. Не удается диска обоих присоединенные диски toohello максимальной пропускной способности на этой виртуальной Машины DS4 на hello то же время. tooresolve, может выдержать трафик, 200 МБ/s на одном диске и 56 МБ/с на hello другой диск. Если сумма hello трафика диска превышает 256 МБ в секунду, регулируется трафика диска.

> [!NOTE]
> Если диск трафика главным образом состоит из небольшие размеры ввода-вывода, скорее всего приложения столкнутся ограничения IOP hello перед hello ограничение пропускной способности. Тем не менее если диск трафика hello главным образом состоит из больших размеров ввода-вывода, скорее всего приложения столкнутся hello ограничение пропускной способности во-первых, вместо ограничения IOP hello. Вы можете максимально увеличить количество операций ввода-вывода в секунду, выполняемых приложением, и его пропускную способность, выполняя операции ввода-вывода данных оптимальных размеров, Кроме того можно ограничить количество hello ожидающих запросов ввода-вывода для диска.
> 

toolearn Дополнительные сведения о разработке для высокого уровня производительности с помощью хранилища Premium. в разделе [разработка для производительности с хранилище Premium](storage-premium-storage-performance.md).

## <a name="snapshots-and-copy-blob"></a>Моментальные снимки и копирование BLOB-объектов

toohello службы хранилища, hello VHD-файл является большой двоичный объект страницы. Можно делать моментальные снимки больших двоичных объектов страницы и скопируйте их tooanother расположение, например tooa другую учетную запись хранения.

### <a name="unmanaged-disks"></a>Неуправляемые диски

Создание [добавочных моментальных снимков](../../virtual-machines/windows/incremental-snapshots.md) для дисков неуправляемые premium hello таким же, как моментальные снимки с помощью стандартного хранилища. Хранилище Premium поддерживает только локально избыточное хранилище в качестве параметра replication hello. Рекомендуется создавать моментальные снимки и затем скопировать hello моментальные снимки tooa географически избыточная Стандартная учетная запись хранения. Дополнительные сведения см. в статье [Репликация службы хранилища Azure](storage-redundancy.md).

Если диск tooa подключенных виртуальных Машин, некоторые операции API на диске hello не допускаются. Например, нельзя выполнить [копирования BLOB-объекта](/rest/api/storageservices/Copy-Blob) операции с этим большим двоичным объектом, если диск hello присоединенного tooa виртуальной Машины. Сначала создайте моментальный снимок большого двоичного объекта с помощью hello [моментального снимка большого двоичного объекта](/rest/api/storageservices/Snapshot-Blob) API-интерфейса REST. Затем выполните hello [копирования BLOB-объекта](/rest/api/storageservices/Copy-Blob) диск подключен hello toocopy hello моментального снимка. Кроме того можно отсоединить диск hello и выполните все необходимые операции.

Hello следующие ограничения применяются моментальные снимки toopremium хранилища больших двоичных объектов.

| Ограничение хранилища класса Premium | Значение |
| --- | --- |
| Максимальное число моментальных снимков на большой двоичный объект | 100 |
| Емкость учетной записи хранения для моментальных снимков<br>(Содержит данные только в моментальных снимках. Не содержит данные в базовом большом двоичном объекте.) | 10 ТБ |
| Минимальное время между последовательными моментальными снимками | 10 минут |

toomaintain географически избыточной копии вашего моментальных снимков, можно скопировать моментальные снимки из premium учетной записи tooa географически избыточное хранилище стандартной учетной записи хранилища с помощью AzCopy или копирования BLOB-объекта. Дополнительные сведения см. в разделе [передачи данных с помощью программы командной строки, AzCopy hello](storage-use-azcopy.md) и [копирования BLOB-объекта](/rest/api/storageservices/Copy-Blob).

Подробные сведения о выполнении операций REST со страничными BLOB-объектами в учетных записях хранения класса Premium см. в статье [Использование операций службы BLOB-объектов с хранилищем Azure Premium](http://go.microsoft.com/fwlink/?LinkId=521969).

### <a name="managed-disks"></a>Управляемые диски

Моментальный снимок для управляемого диска — только для чтения копия hello управляемого диска. Hello моментального снимка хранится в виде стандартного управляемого диска. В настоящее время [добавочные моментальные снимки](../../virtual-machines/windows/incremental-snapshots.md) для управляемых дисков не поддерживаются. toolearn tootake моментальный снимок для управляемого диска. в статье [создать копию VHD, хранящиеся в виде управляемых Azure диска с помощью управляемых моментальные снимки в Windows](../../virtual-machines/windows/snapshot-copy-managed-disk.md) или [создать копию VHD, хранящиеся в виде управляемых Azure диска с помощью управляемых моментальные снимки в Linux](../../virtual-machines/linux/snapshot-copy-managed-disk.md).

Если управляемого диска tooa подключенных виртуальных Машин, некоторые операции API на диске hello не допускаются. Например не удается создать tooperform адреса (SAS) для общего доступа операции копирования время диска hello tooa подключенных виртуальных Машин. Вместо этого сначала создать моментальный снимок hello диска, а затем выполните hello копии моментальных снимков hello. Кроме того можно отсоединить диск hello и затем создать операцию копирования hello tooperform SAS.


## <a name="premium-storage-for-linux-vms"></a>Хранилище класса Premium для виртуальных машин Linux
Можно использовать следующие toohelp сведения, которые вы настроили виртуальных машин Linux в хранилище Premium hello:

масштабируемость tooachieve обращается в хранилище Premium для всех дисков хранилища premium с кэшировать набор слишком**ReadOnly** или **нет**, необходимо отключить «барьеры» при подключении hello файловой системы. Барьеры в этом сценарии не требуется, поскольку hello записывает toopremium дисков являются устойчивыми для этих параметров кэша. По завершении запроса на запись hello успешно записи данных toohello постоянное хранилище. toodisable «барьеры», воспользуйтесь одним из hello следующие методы. Выберите один hello для файловой системы:
  
* Для **reiserFS**, барьеры toodisable использовать hello `barrier=none` подключения параметр. (используйте барьеры tooenable `barrier=flush`.)
* Для **ext3/ext4**, барьеры toodisable использовать hello `barrier=0` подключения параметр. (используйте барьеры tooenable `barrier=1`.)
* Для **XFS**, барьеры toodisable использовать hello `nobarrier` подключения параметр. (используйте барьеры tooenable `barrier`.)
* Для дисков "премиум" с кэшем, задайте слишком**ReadWrite**, включите барьеры для обеспечения надежности записи.
* Для toopersist метки тома после перезагрузки hello виртуальной Машины, необходимо обновить/etc/fstab с дисками toohello ссылки универсальный уникальный идентификатор UUID hello. Дополнительные сведения см. в разделе [добавить tooa управляемого диска ВМ Linux](../../virtual-machines/linux/add-disk.md).

следующие версии ОС Linux Hello были проверены для хранилища Azure Premium. Для повышения производительности и стабильности с помощью хранилища Premium, рекомендуется обновить ваш tooone виртуальных машин из этих версий, по крайней мере (или tooa более поздней версии). Некоторые версии требуют приветствия hello последние службы интеграции Linux (LIS), версии 4.0, для Azure. toodownload и установите распространения, перейдите по ссылке hello, перечисленные в следующей таблице hello. Мы добавляем toohello списка изображений, выполнив проверку. Обратите внимание, что наши проверки этих образов продемонстрировали колебания показателей производительности, которые также зависят от особенностей рабочей нагрузки и параметров образов. Различные образы лучше подходят для разных типов рабочей нагрузки.

| Дистрибутив | Версия | Поддерживаемое ядро | Сведения |
| --- | --- | --- | --- |
| Ubuntu | 12.04 | 3.2.0-75.110 или более поздней версии | Ubuntu-12_04_5-LTS-amd64-server-20150119-en-us-30GB |
| Ubuntu | 14.04 | 3.13.0-44.73 или более поздней версии | Ubuntu-14_04_1-LTS-amd64-server-20150123-en-us-30GB |
| Debian | 7.x, 8.x | 3.16.7-ckt4-1 или более поздней версии | &nbsp; |
| SUSE | SLES 12| 3.12.36-38.1 или более поздней версии| suse-sles-12-priority-v20150213 <br> suse-sles-12-v20150213 |
| SUSE | SLES 11 SP4 или более поздней версии | 3.0.101-0.63.1 или более поздней версии | &nbsp; |
| CoreOS | 584.0.0 или более поздней версии| 3.18.4 или более поздней версии | CoreOS 584.0.0 |
| CentOS | 6.5, 6.6, 6.7, 7.0 | &nbsp; | [Требуется LIS4](http://go.microsoft.com/fwlink/?LinkID=403033&clcid=0x409) <br> *См. Примечание в следующем разделе hello* |
| CentOS | 7.1 или более поздней версии | 3.10.0-229.1.2.el7 или более поздней версии | [Рекомендуется LIS4](http://go.microsoft.com/fwlink/?LinkID=403033&clcid=0x409) <br> *См. Примечание в следующем разделе hello* |
| Red Hat Enterprise Linux (RHEL) | 6.8 или более поздней версии, 7.2 или более поздней версии | &nbsp; | &nbsp; |
| Oracle | 6.0+, 7.2+ | &nbsp; | UEK4 или RHCK |
| Oracle | 7.0–7.1 | &nbsp; | UEK4 или RHCK с [LIS 4.1 или более поздней версии](http://go.microsoft.com/fwlink/?LinkID=403033&clcid=0x409) |
| Oracle | 6.4–6.7 | &nbsp; | UEK4 или RHCK с [LIS 4.1 или более поздней версии](http://go.microsoft.com/fwlink/?LinkID=403033&clcid=0x409) |


### <a name="lis-drivers-for-openlogic-centos"></a>Драйверы LIS для Openlogic CentOS

Если вы используете виртуальные машины CentOS OpenLogic, запустите следующие команды tooinstall hello последние версии драйверов hello:

```
sudo rpm -e hypervkvpd  ## (Might return an error if not installed. That's OK.)
sudo yum install microsoft-hyper-v
```

tooactivate hello новые драйверы, перезагрузите компьютер hello.

## <a name="pricing-and-billing"></a>Цены и выставление счетов

При использовании хранилища Premium применяются следующие вопросы выставления счетов hello.

* **Размеры диска хранилища класса Premium и большого двоичного объекта.**

    Выставление счетов для диска хранилища premium или большого двоичного объекта зависит от размера hello подготовить hello диска или большого двоичного объекта. Azure maps hello подготовленного размера (с округлением) toohello ближайшего параметр диска для хранения premium. Дополнительные сведения см. таблицу hello в [целей производительности и масштабируемости хранилища Premium](#premium-storage-scalability-and-performance-targets). Поддерживается maps tooa каждого диска система подготовить размер диска и оплачивается соответствующим образом. Выставления счетов для любого подготовленного диска определяется пропорционально ежечасно с помощью ежемесячной цене hello для предложения hello хранилище Premium. Например если подготовить диск P10 и он будет удален после 20 часов, взимается плата за hello P10 предложения пропорциональная too20 часов. Это происходит независимо от объема hello фактических данных, записанных на диск toohello или hello операций ввода-ВЫВОДА и использовать пропускную способность.

* **Моментальные снимки неуправляемых дисков класса Premium.**

    Моментальные снимки на диски premium неуправляемого взимается плата за дополнительную емкость hello, используются моментальными снимками hello. Сведения о моментальных снимках см. в статье [Создание моментального снимка большого двоичного объекта](/rest/api/storageservices/Snapshot-Blob).

* **Моментальные снимки управляемых дисков класса Premium.**

    Моментальный снимок управляемого диска — только для чтения копии диска hello. Hello диска хранится в виде стандартного управляемого диска. Затраты моментального снимка hello таким же, как стандартного управляемого диска. Например создания снимка управляемого диска 128 ГБ premium, hello моментального снимка hello обходится эквивалентные tooa 128 ГБ стандартного управляемого диска.  

* **Передача исходящих данных**

    [Передача исходящих данных](https://azure.microsoft.com/pricing/details/data-transfers/) (данных, передаваемых из центров обработки данных Azure) учитывается при определении платы за используемую пропускную способность.

Дополнительные сведения о ценах на хранилище класса Premium и поддерживаемые им виртуальные машины см. по следующим ссылкам.

* [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/)
* [Виртуальные машины: цены](https://azure.microsoft.com/pricing/details/virtual-machines/)
* [Цены на управляемые диски](https://azure.microsoft.com/pricing/details/managed-disks/)

## <a name="azure-backup-support"></a>Поддержка резервного копирования Azure 

Для регионального аварийного восстановления необходимо создать резервную копию дисков виртуальной машины в другом регионе с использованием [службы архивации Azure](../../backup/backup-introduction-to-azure-backup.md) и учетной записи хранения GRS в качестве хранилища архивации.

toocreate задание резервного копирования с резервного копирования на основе времени, простого восстановления виртуальной Машины и политики хранения резервных копий используйте резервного копирования Azure. Резервное копирование можно использовать с управляемыми и неуправляемыми дисками. Дополнительные сведения см. в статье [Архивация виртуальных машин Azure в хранилище служб восстановления](../../backup/backup-azure-vms-first-look-arm.md) и разделе [Использование службы архивации Azure для виртуальных машин, запущенных на управляемых дисках](../../backup/backup-introduction-to-azure-backup.md#using-managed-disk-vms-with-azure-backup). 

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о хранилище класса Premium см. следующие статьи hello.

### <a name="design-and-implement-with-premium-storage"></a>Проектирование и внедрение с использованием хранилища класса Premium
* [Проектирование для повышения производительности с хранилищем класса Premium](storage-premium-storage-performance.md)
* [Using Blob Service Operations with Azure Premium Storage](http://go.microsoft.com/fwlink/?LinkId=521969) (Использование операций службы BLOB-объектов в хранилище Azure класса Premium)

### <a name="operational-guidance"></a>Операционное руководство
* [Перенос tooAzure хранилища Premium](../common/storage-migration-to-premium-storage.md)

### <a name="blog-posts"></a>Записи блога
* [Azure Premium Storage, now generally available](https://azure.microsoft.com/blog/azure-premium-storage-now-generally-available-2/) (Хранилище Azure класса Premium общедоступно)
* [Объявляет о hello серии GS: Добавление наибольшее toohello поддержки хранилище Premium hello виртуальных машин в общедоступном облаке](https://azure.microsoft.com/blog/azure-has-the-most-powerful-vms-in-the-public-cloud/)
