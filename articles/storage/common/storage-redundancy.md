---
title: "aaaData репликации в хранилище Azure | Документы Microsoft"
description: "Данные в учетной записи хранения Microsoft Azure реплицируются для обеспечения устойчивости и высокого уровня доступности. Варианты репликации включают локально избыточное хранилище (LRS), хранилище, избыточное в пределах зоны (ZRS), геоизбыточное хранилище (GRS) и геоизбыточное хранилище с доступом для чтения (RA-GRS)."
services: storage
documentationcenter: 
author: mmacy
manager: timlt
editor: tysonn
ms.assetid: 86bdb6d4-da59-4337-8375-2527b6bdf73f
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/15/2017
ms.author: marsma
ms.openlocfilehash: ce48d1992fec7bd5ed32feb96b86bef88ca759df
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-replication"></a>Репликация службы хранилища Azure

данные Hello в Microsoft Azure всегда является учетная запись хранения реплицируются tooensure устойчивость и высокий уровень доступности. Репликация копирует hello данных, либо в одном центре обработки данных или tooa второй центр обработки данных, в зависимости от того, какой вариант репликации выберите. Репликация позволяет защитить данные и сохраняет вашего приложения времени для события hello временных сбоях оборудования. Если данные хранятся реплицированные tooa второй центр обработки данных, он защищен после разрушительного сбоя в основное расположение hello.

Репликация обеспечивает соответствие вашей учетной записи хранилища hello [соглашения уровня обслуживания (SLA) для хранения](https://azure.microsoft.com/support/legal/sla/storage/) даже шрифтом hello сбоев. Увидите, что гарантирует hello соглашения об уровне ОБСЛУЖИВАНИЯ, сведения о хранилище Azure для обеспечения устойчивости и доступности.

При создании учетной записи хранилища, можно выбрать один из hello следующие параметры репликации:

* [Локально избыточное хранилище (LRS)](#locally-redundant-storage)
* [Хранилище, избыточное в пределах зоны (ZRS)](#zone-redundant-storage)
* [Геоизбыточное хранилище (GRS)](#geo-redundant-storage)
* [Геоизбыточное хранилище с доступом для чтения (RA-GRS)](#read-access-geo-redundant-storage)

Геоизбыточное хранилище доступ для чтения (RA-GRS) — параметр по умолчанию hello при создании учетной записи хранилища.

Привет, в следующей таблице предоставляет краткий обзор hello различия между LRS, ZRS, GRS и RA-GRS, а в последующих разделах каждый тип репликации, более подробно.

| Стратегия репликации | LRS | ZRS | GRS | RA-GRS |
|:--- |:--- |:--- |:--- |:--- |
| Данные реплицируются в нескольких центрах обработки данных. |Нет |Да |Да |Да |
| Данные могут считываться из вторичного расположения, а также первичного расположения hello. |Нет |Нет |Нет |Да |
| Количество обслуживаемых копий данных на отдельных узлах. |3 |3 |6 |6 |

В разделе [цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/) цены для hello избыточности различные параметры.

> [!NOTE]
> Хранилище класса Premium поддерживает только локально избыточное хранилище (LRS). Сведения о хранилище класса "Премиум" см. в статье [Хранилище класса "Премиум": высокопроизводительное хранилище для рабочих нагрузок виртуальных машин Azure](../storage-premium-storage.md).
>

## <a name="locally-redundant-storage"></a>Локально избыточное хранилище
Локально избыточное хранилище (LRS) реплицирует ваши данные три раза в единицы масштабирования хранилища, которая размещается в центре обработки данных в регионе hello, в котором была создана учетная запись хранения. Записи запрос успешно возвращается только в том случае, если он был письменного tooall три реплики. Эти три реплики хранятся в отдельных доменах сбоя и доменах обновления в рамках одной единицы масштабирования хранилища.

Единица масштабирования хранилища — это набор стоек с узлами хранилища. Домен сбоя (FD) — это группа узлов, которые представляют физическую единицу сбоя и можно рассматривать как узлы, относящиеся toohello одной физической стойке. Домен обновления (UD) — это группа узлов, которые обновляются вместе во время процесса hello обновления службы (развертывания). Hello три реплики распределены по доменам обновления и сбоя в пределах одного хранилища шкалы единицы tooensure данные недоступны, даже если сбой оборудования строя одну стойку, или при обновлении узлов во время развертывания.

LRS вариант hello наименьшее затрат и предлагает варианты tooother наименьших надежность по сравнению. В событие hello уровня сбоя центра обработки данных (пожар, перегрузки, т. д.) все три реплики могут быть потеряны или невозможности восстановления. Географически избыточное хранилище (GRS) toomitigate этот риск, рекомендуется для большинства приложений.

В определенных сценариях следует использовать локально избыточное хранилище:

* Оно обеспечивает самую высокую пропускную способность среди решений для репликации службы хранилища Azure.
* Если в вашем приложении хранятся данные, которые можно легко воссоздать, можно выбрать LRS.
* Некоторые приложения, ограниченные tooreplicating данных только в пределах страны из-за toodata нормативные требования. Парный регион может находиться в другой стране. Дополнительные сведения см. на странице [Регионы Azure](https://azure.microsoft.com/regions/).

## <a name="zone-redundant-storage"></a>Хранилище, избыточное в пределах зоны
Хранилище, избыточное в пределах зоны (ZRS) асинхронно реплицирует данные в центрах обработки данных в пределах одного или двух областей в сложения toostoring трех реплик аналогичные tooLRS, что обеспечивает большую степень устойчивости, чем LRS. Данные, хранящиеся в ZRS является устойчивой, даже если hello основного центра обработки данных недоступен или невозможности восстановления.
Планирование toouse ZRS пользователи должны иметь в виду, что:

* ZRS доступно только для больших двоичных объектов в учетных записях хранения общего назначения и поддерживается только в версии службы хранилища от 14.02.2014 и более поздних версиях.
* Так как асинхронная репликация подразумевает задержку, в событии hello локальной аварии, возможно, это возможно, что изменения, которые еще не были реплицированы toohello получателей теряются при hello данные невозможно восстановить из основного hello.
* пока Microsoft инициирует toohello отработки отказа вторичная реплика Hello не могут быть доступны.
* Не удается преобразовать ZRS учетные записи, tooLRS или GRS в будущем. Аналогичным образом, учетная запись LRS и GRS не может быть преобразован учетной записи ZRS tooa.
* Для учетных записей ZRS не доступны метрики и возможность ведения журнала.

## <a name="geo-redundant-storage"></a>Геоизбыточное хранилище
Географически избыточное хранилище (GRS) реплицируется на данных tooa дополнительный регион, который находится в сотнях километров от основного региона hello. Если учетной записи хранилища включена функция GRS, данные будут доступны даже в случае, когда hello полном региональном сбое или аварии, в которой hello первичного региона не может быть восстановлен.

Для учетной записи хранения с включенной функцией GRS обновление является первой зафиксированных toohello основной регион, где оно реплицируется три раза. Затем hello обновление асинхронно реплицируется toohello вторичный регион, где оно также реплицируется три раза.

При использовании GRS hello основным и дополнительным регионами управлять реплик в отдельных доменах сбоя и доменам обновления в единицы масштабирования хранилища, как описано с LRS.

Рекомендации:

* Так как асинхронная репликация подразумевает задержку, в событии hello региональной аварии, возможно, что изменения, еще не были реплицированы toohello дополнительный регион будут потеряны, если hello данные невозможно восстановить из основного региона hello.
* Hello реплика недоступна, если Microsoft инициирует переход на другой ресурс toohello дополнительный регион. Если Microsoft инициировать во вторичный регион toohello перехода на другой ресурс, необходимо будет чтение и запись данных toothat после завершения отработки отказа hello. Дополнительные сведения см. в [руководстве по аварийному восстановлению](../storage-disaster-recovery-guidance.md). 
* Если приложению требуется tooread из вторичного региона hello, hello пользователя следует включить RA-GRS.

При создании учетной записи хранилища, выбирается основной регион hello hello учетной записи. Hello дополнительный регион определяется исходя из основного региона hello и не может быть изменено. Привет, в следующей таблице показаны пары первичного и вторичного региона hello.

| Первичная | Вторичная |
| --- | --- |
| Северо-центральный регион США |Южно-центральный регион США |
| Южно-центральный регион США |Северо-центральный регион США |
| Восток США |Запад США |
| Запад США |Восток США |
| Восточная часть США 2 |Центральный регион США |
| Центральный регион США |Восточная часть США 2 |
| Северная Европа |Западная Европа |
| Западная Европа |Северная Европа |
| Юго-Восточная Азия |Восточная Азия |
| Восточная Азия |Юго-Восточная Азия |
| Восточный Китай |Северный Китай |
| Северный Китай |Восточный Китай |
| Восточная часть Японии |Западная часть Японии |
| Западная часть Японии |Восточная часть Японии |
| Южная часть Бразилии |Южно-центральный регион США |
| Восточная часть Австралии |Юго-Восточная часть Австралии |
| Юго-Восточная часть Австралии |Восточная часть Австралии |
| Южная Индия |Центральная Индия |
| Центральная Индия |Южная Индия |
| Западная Индия |Южная Индия |
| Правительство штата Айова |Правительство штата Вирджиния |
| Правительство штата Вирджиния |Техас (для обслуживания государственных организаций США) |
| Техас (для обслуживания государственных организаций США) |Аризона (для обслуживания государственных организаций США) |
| Аризона (для обслуживания государственных организаций США) |Техас (для обслуживания государственных организаций США) |
| Центральная Канада |Восточная Канада |
| Восточная Канада |Центральная Канада |
| Западная часть Великобритании |Южная часть Великобритании |
| Южная часть Великобритании |Западная часть Великобритании |
| Центральная Германия |Северо-восточная Германия |
| Северо-восточная Германия |Центральная Германия |
| Западный регион США 2 |Западно-центральная часть США |
| Западно-центральная часть США |Западный регион США 2 |

Последние сведения о регионах, поддерживаемых Azure, см. на странице [Регионы Azure](https://azure.microsoft.com/regions/).

>[!NOTE]  
> Дополнительным регионом для региона Виргиния (для обслуживания государственных организаций США) является регион Техас (для обслуживания государственных организаций США). Ранее дополнительным регионом для региона Виргиния (для обслуживания государственных организаций США) был регион Айова (для обслуживания государственных организаций США). Учетные записи хранения, по-прежнему использовать штата США для государственных организаций Айова как дополнительный регион выполняется миграция tooUS Техас для государственных организаций как дополнительного область. 
> 
> 

## <a name="read-access-geo-redundant-storage"></a>Геоизбыточное хранилище с доступом для чтения
Геоизбыточное хранилище доступ для чтения (RA-GRS) повышает доступность для вашей учетной записи, предоставляя доступ только для чтения данных toohello в дополнительное расположение hello, кроме toohello репликации двух регионах, предоставляемые GRS.

При включении доступа только для чтения tooyour данные в дополнительный регион hello данных можно найти в вторичной конечной точки, в добавление toohello основную конечную точку для вашей учетной записи. Вторичная конечная точка Hello является аналогичные toohello основную конечную точку, но добавляет суффикс hello `–secondary` toohello имя учетной записи. Например, если первичная конечная точка для hello службы BLOB-объектов — `myaccount.blob.core.windows.net`, то вторичной конечной точкой — `myaccount-secondary.blob.core.windows.net`. Hello ключи доступа для учетной записи хранилища hello же для обоих hello первичные и вторичные конечные точки.

Рекомендации:

* Приложение должно toomanage конечной точки, которая взаимодействует с при использовании RA-GRS.
* Так как асинхронная репликация подразумевает задержку, в событии hello региональной аварии, возможно, что изменения, еще не были реплицированы toohello дополнительный регион будут потеряны, если hello данные невозможно восстановить из основного региона hello.
* Если Microsoft инициирует переход на другой ресурс toohello дополнительный регион, вы получите чтение и запись данных toothat после завершения отработки отказа hello. Дополнительные сведения см. в [руководстве по аварийному восстановлению](../storage-disaster-recovery-guidance.md). 
* RA-GRS предназначено для обеспечения высокой доступности. Рекомендации по масштабируемости, см. в статье hello [контрольный список производительности](../storage-performance-checklist.md).

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

<a id="howtochange"></a>
#### <a name="1-how-can-i-change-hello-geo-replication-type-of-my-storage-account"></a>1. Как изменить тип репликации geo hello моей учетной записи хранения?

   Можно изменить тип репликации geo hello вашей учетной записи хранилища между LRS, GRS, и с помощью RA-GRS hello [портал Azure](https://portal.azure.com/), [Azure Powershell](storage-powershell-guide-full.md) или программным путем с помощью одного из многих клиента хранилища Библиотеки. Имейте ввиду, что учетные записи ZRS невозможно преобразовать в LRS или GRS. Аналогичным образом, учетная запись LRS и GRS не может быть преобразован учетной записи ZRS tooa.

<a id="changedowntime"></a>
#### <a name="2-will-there-be-any-down-time-if-i-change-hello-replication-type-of-my-storage-account"></a>2. Будет ли любое время простоя при изменении типа репликации hello моей учетной записи хранения?

   Нет, не никакого простоя не будет.

<a id="changecost"></a>
#### <a name="3-will-there-be-any-additional-cost-if-i-change-hello-replication-type-of-my-storage-account"></a>3. Будет ли никаких дополнительных затрат при изменении типа репликации hello моей учетной записи хранения?

   Да. При переходе от LRS tooGRS (или RA-GRS) для вашей учетной записи его будет взиматься дополнительная плата за исходящие данные, участвующие в копирование существующих данных из дополнительного расположения toohello первичного расположения. После копирования hello исходные данные больше не осталось дополнительных исходящих плата географическая репликация данных hello из hello toosecondary первичного расположения. Hello сведения о стоимости пропускной способности можно найти на hello [цены на хранилища Azure страницы](https://azure.microsoft.com/pricing/details/storage/blobs/). Если вы изменяете из GRS tooLRS, без дополнительных затрат, но данные будут удалены из дополнительного расположения hello.

<a id="ragrsbenefits"></a>
#### <a name="4-how-can-ra-grs-help-me"></a>4. Чем мне поможет RA-GRS?
   
   Хранилище GRS обеспечивает репликацию данных от первичной tooa дополнительный регион, который находится в сотнях километров от основного региона hello. В этом случае данные будут доступны даже в случае, когда hello полном региональном сбое или аварии, в которой hello первичного региона не может быть восстановлен. Включает этот идентификатор хранилища RA-GRS, а также он добавляет hello возможность tooread hello данные из дополнительного расположения hello. Некоторые рекомендации о том, как tooleverage эта возможность, можно найти слишком[проектирование высокой доступных приложений с помощью хранилища RA-GRS](../storage-designing-ha-apps-with-ragrs.md). 

<a id="lastsynctime"></a>
#### <a name="5-is-there-a-way-for-me-toofigure-out-how-long-it-takes-tooreplicate-my-data-from-hello-primary-toohello-secondary-region"></a>5. Можно ли для меня toofigure out длительности tooreplicate Мои данные из вторичного региона hello основной toohello?
   
   Если вы используете хранилище RA-GRS, можно проверить hello время последней синхронизации учетной записи. Время последней синхронизации имеет значение даты и времени по Гринвичу; Все первичные операции записи до hello время последней синхронизации успешно записаны toohello вторичного расположения, которые означают, что они будут доступны toobe чтение из дополнительного расположения hello. Основной записывает после hello время последней синхронизации может или может оказаться недоступным для операций чтения еще. Вы можете запросить это значение с помощью hello [портал Azure](https://portal.azure.com/), [Azure PowerShell](storage-powershell-guide-full.md), или программно с помощью hello API-интерфейса REST или один из hello клиентских библиотек хранилища. 

<a id="outage"></a>
#### <a name="6-how-can-i-switch-toohello-secondary-region-if-there-is-an-outage-in-hello-primary-region"></a>6. Как переключаться toohello дополнительный регион в случае сбоя в основном регионе hello?
   
   См. в статье toohello [какие toodo в случае сбоя хранилища Azure](../storage-disaster-recovery-guidance.md) для получения дополнительных сведений.

<a id="rpo-rto"></a>
#### <a name="7-what-is-hello-rpo-and-rto-with-grs"></a>7. Что Здравствуйте, RPO и RTO с GRS?
   
   Целевую точку восстановления (RPO): В GRS и RA-GRS, hello хранилища службы асинхронно географическая репликация hello данные из дополнительного расположения основной toohello hello. При основной региональной аварии и отработки отказа имеет toobe выполнить, последних изменений, не имеющих географической репликации могут быть утеряны. Hello количество минут для потенциальной потери данных — hello ссылка tooas RPO (что означает hello моменту времени toowhich данные могут быть восстановлены). Обычно RPO не превышает 15 минут, хотя на данный момент нет какого-либо соглашения об уровне обслуживания, регулирующего длительность георепликации.

   Цель времени восстановления (RTO): Это мера продолжительность отсылает hello toodo перехода на другой ресурс и вернуть учетной записи хранилища hello сети у мы toodo отработки отказа. toodo hello Hello время перехода на другой ресурс включает в себя следующие hello:
    * время Hello отсылает tooinvestigate и ли мы можно восстановить данные hello основного расположения hello или нам нужно toodo отработки отказа.
    * Учетная запись hello отработки отказа, изменив hello основного DNS записи toopoint toohello вторичного расположения.

   Мы используем hello несет ответственность за сохранение данных очень серьезно, поэтому когда возможность восстановления данных hello, мы не торопитесь выполнением отработки отказа hello и сосредоточиться на восстановление данных hello в основное расположение hello. В будущем hello, мы планируем tooallow tooprovide API tootrigger отработки отказа на уровне учетной записи которого позволит вам toocontrol hello RTO самостоятельно, но это еще не доступны.
   
## <a name="next-steps"></a>Дальнейшие действия
* [Проектирование высокодоступных приложений с использованием RA-GRS](../storage-designing-ha-apps-with-ragrs.md)
* [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage/)
* [Об учетных записях хранения Azure](../storage-create-storage-account.md)
* [Целевые показатели масштабируемости и производительности службы хранилища Azure](storage-scalability-targets.md)
* [Windows Azure Storage Redundancy Options and Read Access Geo Redundant Storage](http://blogs.msdn.com/b/windowsazurestorage/archive/2013/12/11/introducing-read-access-geo-replicated-storage-ra-grs-for-windows-azure-storage.aspx) (Варианты избыточности и геоизбыточное хранилище с доступом для чтения службы хранилища Microsoft Azure)
* [Документ SOSP — служба хранилища Azure: высокодоступная облачная служба хранилища со строгой согласованностью](http://blogs.msdn.com/b/windowsazurestorage/archive/2011/11/20/windows-azure-storage-a-highly-available-cloud-storage-service-with-strong-consistency.aspx)

