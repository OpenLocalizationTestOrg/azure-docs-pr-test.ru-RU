---
title: "toodo aaaWhat hello для события сбоя хранилища Azure | Документы Microsoft"
description: "Какие toodo hello для события сбоя хранилища Azure"
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: 8f040b0f-8926-4831-ac07-79f646f31926
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 1/19/2017
ms.author: robinsh
ms.openlocfilehash: 93e1e831c35b96b8bf190fa2b56ab89350bbac13
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="what-toodo-if-an-azure-storage-outage-occurs"></a><span data-ttu-id="de27c-103">Какие toodo в случае сбоя хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="de27c-103">What toodo if an Azure Storage outage occurs</span></span>
<span data-ttu-id="de27c-104">В корпорации Майкрософт мы работать жестких toomake в том, что наши службы всегда доступны.</span><span class="sxs-lookup"><span data-stu-id="de27c-104">At Microsoft, we work hard toomake sure our services are always available.</span></span> <span data-ttu-id="de27c-105">Иногда по независящим от нас обстоятельствам происходят незапланированные простои служб в одном или нескольких регионах.</span><span class="sxs-lookup"><span data-stu-id="de27c-105">Sometimes, forces beyond our control impact us in ways that cause unplanned service outages in one or more regions.</span></span> <span data-ttu-id="de27c-106">toohelp обработки таких редких случаев, мы предоставляем hello следующие общие рекомендации для служб хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="de27c-106">toohelp you handle these rare occurrences, we provide hello following high-level guidance for Azure Storage services.</span></span>

## <a name="how-tooprepare"></a><span data-ttu-id="de27c-107">Как tooprepare</span><span class="sxs-lookup"><span data-stu-id="de27c-107">How tooprepare</span></span>
<span data-ttu-id="de27c-108">Очень важно для каждого клиента tooprepare собственные плана аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="de27c-108">It is critical for every customer tooprepare their own disaster recovery plan.</span></span> <span data-ttu-id="de27c-109">toorecover усилий Hello из доступа к хранилищу обычно включает в себя сотрудников отдела эксплуатации и автоматизированные процедуры в порядке tooreactivate вашего приложения в состоянии работает.</span><span class="sxs-lookup"><span data-stu-id="de27c-109">hello effort toorecover from a storage outage typically involves both operations personnel and automated procedures in order tooreactivate your applications in a functioning state.</span></span> <span data-ttu-id="de27c-110">См. документации по Azure ниже toobuild toohello собственного плана аварийного восстановления:</span><span class="sxs-lookup"><span data-stu-id="de27c-110">Please refer toohello Azure documentation below toobuild your own disaster recovery plan:</span></span>

* [<span data-ttu-id="de27c-111">Аварийное восстановление и высокий уровень доступности для приложений Azure</span><span class="sxs-lookup"><span data-stu-id="de27c-111">Disaster recovery and high availability for Azure applications</span></span>](/azure/architecture/resiliency/disaster-recovery-high-availability-azure-applications.md)
* [<span data-ttu-id="de27c-112">Техническое руководство по обеспечению устойчивости в Azure</span><span class="sxs-lookup"><span data-stu-id="de27c-112">Azure resiliency technical guidance</span></span>](/azure/architecture/resiliency.md)
* [<span data-ttu-id="de27c-113">Служба Azure Site Recovery</span><span class="sxs-lookup"><span data-stu-id="de27c-113">Azure Site Recovery service</span></span>](https://azure.microsoft.com/services/site-recovery/)
* [<span data-ttu-id="de27c-114">Репликация службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="de27c-114">Azure Storage replication</span></span>](storage-redundancy.md)
* [<span data-ttu-id="de27c-115">Служба архивации Azure</span><span class="sxs-lookup"><span data-stu-id="de27c-115">Azure Backup service</span></span>](https://azure.microsoft.com/services/backup/)

## <a name="how-toodetect"></a><span data-ttu-id="de27c-116">Как toodetect</span><span class="sxs-lookup"><span data-stu-id="de27c-116">How toodetect</span></span>
<span data-ttu-id="de27c-117">Hello рекомендованные способом toodetermine hello Azure состояние toosubscribe toohello [панель мониторинга работоспособности службы Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="de27c-117">hello recommended way toodetermine hello Azure service status is toosubscribe toohello [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

## <a name="what-toodo-if-a-storage-outage-occurs"></a><span data-ttu-id="de27c-118">Какие toodo в случае сбоя хранилища</span><span class="sxs-lookup"><span data-stu-id="de27c-118">What toodo if a Storage outage occurs</span></span>
<span data-ttu-id="de27c-119">Если один или несколько служб хранилища временно недоступны в одну или несколько областей, существует два варианта для вас tooconsider.</span><span class="sxs-lookup"><span data-stu-id="de27c-119">If one or more Storage services are temporarily unavailable at one or more regions, there are two options for you tooconsider.</span></span> <span data-ttu-id="de27c-120">Если нужен непосредственный доступ к данным tooyour рассмотрите вариант 2.</span><span class="sxs-lookup"><span data-stu-id="de27c-120">If you desire immediate access tooyour data, please consider Option 2.</span></span>

### <a name="option-1-wait-for-recovery"></a><span data-ttu-id="de27c-121">Вариант 1. ожидание восстановления</span><span class="sxs-lookup"><span data-stu-id="de27c-121">Option 1: Wait for recovery</span></span>
<span data-ttu-id="de27c-122">В этом случае вам не нужно предпринимать какие-либо действия.</span><span class="sxs-lookup"><span data-stu-id="de27c-122">In this case, no action on your part is required.</span></span> <span data-ttu-id="de27c-123">Мы работаем тщательно доступности службы Azure toorestore hello.</span><span class="sxs-lookup"><span data-stu-id="de27c-123">We are working diligently toorestore hello Azure service availability.</span></span> <span data-ttu-id="de27c-124">Можно отслеживать состояние службы hello на hello [панель мониторинга работоспособности службы Azure](https://azure.microsoft.com/status/).</span><span class="sxs-lookup"><span data-stu-id="de27c-124">You can monitor hello service status on hello [Azure Service Health Dashboard](https://azure.microsoft.com/status/).</span></span>

### <a name="option-2-copy-data-from-secondary"></a><span data-ttu-id="de27c-125">Вариант 2. Копирование данных из дополнительного региона</span><span class="sxs-lookup"><span data-stu-id="de27c-125">Option 2: Copy data from secondary</span></span>
<span data-ttu-id="de27c-126">Если вы выбрали [геоизбыточное хранилище доступ для чтения (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (рекомендуется) для учетных записей хранилища, будет иметь доступ на чтение данных tooyour из вторичного региона hello.</span><span class="sxs-lookup"><span data-stu-id="de27c-126">If you chose [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended) for your storage accounts, you will have read access tooyour data from hello secondary region.</span></span> <span data-ttu-id="de27c-127">Можно использовать средства, такие как [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md)и hello [перемещение данных Azure библиотеки](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) toocopy данные из вторичного региона hello в другую учетную запись в unimpacted регион, а затем учетной записи хранилища toothat приложения для чтения и записи, доступности.</span><span class="sxs-lookup"><span data-stu-id="de27c-127">You can use tools such as [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), and hello [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/) toocopy data from hello secondary region into another storage account in an unimpacted region, and then point your applications toothat storage account for both read and write availability.</span></span>

## <a name="what-tooexpect-if-a-storage-failover-occurs"></a><span data-ttu-id="de27c-128">Какие tooexpect в случае отработки отказа хранилища</span><span class="sxs-lookup"><span data-stu-id="de27c-128">What tooexpect if a Storage failover occurs</span></span>
<span data-ttu-id="de27c-129">Если вы выбрали [Геоизбыточное хранилище](storage-redundancy.md#geo-redundant-storage) или [Доступ к геоизбыточному хранилищу для чтения](storage-redundancy.md#read-access-geo-redundant-storage) (рекомендуется), служба хранилища Azure будет хранить данные устойчиво в двух регионах (основном и дополнительном).</span><span class="sxs-lookup"><span data-stu-id="de27c-129">If you chose [Geo-redundant storage (GRS)](storage-redundancy.md#geo-redundant-storage) or [Read-access geo-redundant storage (RA-GRS)](storage-redundancy.md#read-access-geo-redundant-storage) (recommended), Azure Storage will keep your data durable in two regions (primary and secondary).</span></span> <span data-ttu-id="de27c-130">В обоих регионах служба хранилища Azure постоянно поддерживает несколько реплик ваших данных.</span><span class="sxs-lookup"><span data-stu-id="de27c-130">In both regions, Azure Storage constantly maintains multiple replicas of your data.</span></span>

<span data-ttu-id="de27c-131">Когда региональной аварии влияет на ваш основной регион, мы сначала будет предпринята попытка service toorestore hello в этом регионе.</span><span class="sxs-lookup"><span data-stu-id="de27c-131">When a regional disaster affects your primary region, we will first try toorestore hello service in that region.</span></span> <span data-ttu-id="de27c-132">Зависит от природы hello аварийного hello и его влияние, в некоторых редких случаях мы может быть основной регион может toorestore hello.</span><span class="sxs-lookup"><span data-stu-id="de27c-132">Dependent upon hello nature of hello disaster and its impacts, in some rare occasions we may not be able toorestore hello primary region.</span></span> <span data-ttu-id="de27c-133">В этом случае мы выполняем географическую отработку отказа.</span><span class="sxs-lookup"><span data-stu-id="de27c-133">At that point, we will perform a geo-failover.</span></span> <span data-ttu-id="de27c-134">Репликация данных в различных регионах Hello является асинхронного процесса, что может включать задержки, поэтому возможно, что изменения, которые еще не были реплицированы дополнительный регион toohello могут быть потеряны.</span><span class="sxs-lookup"><span data-stu-id="de27c-134">hello cross-region data replication is an asynchronous process which can involve a delay, so it is possible that changes that have not yet been replicated toohello secondary region may be lost.</span></span> <span data-ttu-id="de27c-135">Вы можете запрашивать hello [«Время последней синхронизации» вашей учетной записи хранилища](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) tooget сведения о состоянии репликации hello.</span><span class="sxs-lookup"><span data-stu-id="de27c-135">You can query hello ["Last Sync Time" of your storage account](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/) tooget details on hello replication status.</span></span>

<span data-ttu-id="de27c-136">Существует ряд аспектов возможности географическая отработка отказа hello хранилища:</span><span class="sxs-lookup"><span data-stu-id="de27c-136">A couple of points regarding hello storage geo-failover experience:</span></span>

* <span data-ttu-id="de27c-137">Географическая хранилища отработка отказа будет запускаться только hello группой хранилища Azure — нет действий клиента не требуется.</span><span class="sxs-lookup"><span data-stu-id="de27c-137">Storage geo-failover will only be triggered by hello Azure Storage team – there is no customer action required.</span></span>
* <span data-ttu-id="de27c-138">Существующие службы хранения конечных точек для больших двоичных объектов, таблиц, очередей и файлы останутся hello же после отработки отказа hello; Hello запись DNS потребуется обновить toobe tooswitch из вторичного региона hello основной регион toohello.</span><span class="sxs-lookup"><span data-stu-id="de27c-138">Your existing storage service endpoints for blobs, tables, queues, and files will remain hello same after hello failover; hello DNS entry will need toobe updated tooswitch from hello primary region toohello secondary region.</span></span>
* <span data-ttu-id="de27c-139">До и во время географическая hello отработка отказа вы не будете иметь доступ на запись tooyour учетной записи хранилища из-за влияния toohello аварийного hello, но можно по-прежнему считывать из вторичного hello Если вашей учетной записи хранилища была настроена в качестве RA-GRS.</span><span class="sxs-lookup"><span data-stu-id="de27c-139">Before and during hello geo-failover, you won't have write access tooyour storage account due toohello impact of hello disaster but you can still read from hello secondary if your storage account has been configured as RA-GRS.</span></span>
* <span data-ttu-id="de27c-140">Если hello распространяют изменения DNS географическая hello отработка отказа завершена, будет продолжена учетной записи хранилища tooyour чтение и запись; Этот атрибут указывает toobe toowhat используется вашей дополнительной конечной точки.</span><span class="sxs-lookup"><span data-stu-id="de27c-140">When hello geo-failover has been completed and hello DNS changes propagated, read and write access tooyour storage account will be resumed; this points toowhat used toobe your secondary endpoint.</span></span> 
* <span data-ttu-id="de27c-141">Обратите внимание, если у вас есть GRS или RA-GRS настроен для учетной записи хранилища hello разрешен доступ для записи.</span><span class="sxs-lookup"><span data-stu-id="de27c-141">Note that you will have write access if you have GRS or RA-GRS configured for hello storage account.</span></span> 
* <span data-ttu-id="de27c-142">Вы можете запрашивать [«Geo перехода на другой ресурс время последнего» вашей учетной записи хранилища](https://msdn.microsoft.com/library/azure/ee460802.aspx) tooget более подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="de27c-142">You can query ["Last Geo Failover Time" of your storage account](https://msdn.microsoft.com/library/azure/ee460802.aspx) tooget more details.</span></span>
* <span data-ttu-id="de27c-143">После отработки отказа hello вашей учетной записи хранения будут задействованы, но в состоянии «Деградация», как он фактически размещается в область автономного с нет возможности географической репликации.</span><span class="sxs-lookup"><span data-stu-id="de27c-143">After hello failover, your storage account will be fully functioning, but in a "degraded" status, as it is actually hosted in a standalone region with no geo-replication possible.</span></span> <span data-ttu-id="de27c-144">toomitigate этого риска, мы восстановит hello исходной основной регион, а затем выполните восстановление размещения географически toorestore hello исходное состояние.</span><span class="sxs-lookup"><span data-stu-id="de27c-144">toomitigate this risk, we will restore hello original primary region and then do a geo-failback toorestore hello original state.</span></span> <span data-ttu-id="de27c-145">Если исходный основной регион hello является неисправимой, мы приведет к выделению другого дополнительный регион.</span><span class="sxs-lookup"><span data-stu-id="de27c-145">If hello original primary region is unrecoverable, we will allocate another secondary region.</span></span>
  <span data-ttu-id="de27c-146">Дополнительные сведения о hello инфраструктуры георепликацию хранилища Azure см. статьи toohello блоге группы хранилища hello о [параметры избыточности и RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span><span class="sxs-lookup"><span data-stu-id="de27c-146">For more details on hello infrastructure of Azure Storage geo replication, please refer toohello article on hello Storage team blog about [Redundancy Options and RA-GRS](https://blogs.msdn.microsoft.com/windowsazurestorage/2013/12/11/windows-azure-storage-redundancy-options-and-read-access-geo-redundant-storage/).</span></span>

## <a name="best-practices-for-protecting-your-data"></a><span data-ttu-id="de27c-147">Советы и рекомендации по защите данных</span><span class="sxs-lookup"><span data-stu-id="de27c-147">Best Practices for protecting your data</span></span>
<span data-ttu-id="de27c-148">Существуют некоторые рекомендуемые подходы tooback копии хранилища данных на регулярной основе.</span><span class="sxs-lookup"><span data-stu-id="de27c-148">There are some recommended approaches tooback up your storage data on a regular basis.</span></span>

* <span data-ttu-id="de27c-149">Диски ВМ — использование hello [службы архивации Azure](https://azure.microsoft.com/services/backup/) tooback hello диски виртуальных Машин, используемых виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="de27c-149">VM Disks – Use hello [Azure Backup service](https://azure.microsoft.com/services/backup/) tooback up hello VM disks used by your Azure virtual machines.</span></span>
* <span data-ttu-id="de27c-150">Блочных BLOB-объектов — создать [моментального снимка](https://msdn.microsoft.com/library/azure/hh488361.aspx) каждого блока больших двоичных объектов или скопировать в другой области с помощью учетной записи хранилища tooanother большие двоичные объекты hello [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), или hello [ Библиотека Azure перемещения данных](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span><span class="sxs-lookup"><span data-stu-id="de27c-150">Block blobs –Create a [snapshot](https://msdn.microsoft.com/library/azure/hh488361.aspx) of each block blob, or copy hello blobs tooanother storage account in another region using [AzCopy](storage-use-azcopy.md), [Azure PowerShell](storage-powershell-guide-full.md), or hello [Azure Data Movement library](https://azure.microsoft.com/blog/introducing-azure-storage-data-movement-library-preview-2/).</span></span>
* <span data-ttu-id="de27c-151">Использование таблиц — [AzCopy](storage-use-azcopy.md) tooexport hello таблицы данных в другой учетной записи хранилища в другом регионе.</span><span class="sxs-lookup"><span data-stu-id="de27c-151">Tables – use [AzCopy](storage-use-azcopy.md) tooexport hello table data into another storage account in another region.</span></span>
* <span data-ttu-id="de27c-152">Использовать файлы — [AzCopy](storage-use-azcopy.md) или [Azure PowerShell](storage-powershell-guide-full.md) toocopy учетной записи хранилища tooanother файлы в другую область.</span><span class="sxs-lookup"><span data-stu-id="de27c-152">Files – use [AzCopy](storage-use-azcopy.md) or [Azure PowerShell](storage-powershell-guide-full.md) toocopy your files tooanother storage account in another region.</span></span>

<span data-ttu-id="de27c-153">Сведения о создании приложений, которые полностью используют функции hello RA-GRS, можно найти [проектирование высокой доступных приложений с помощью RA-GRS хранилища](../storage-designing-ha-apps-with-ragrs.md)</span><span class="sxs-lookup"><span data-stu-id="de27c-153">For information about creating applications that take full advantage of hello RA-GRS feature, please check out [Designing Highly Available Applications using RA-GRS Storage](../storage-designing-ha-apps-with-ragrs.md)</span></span>

