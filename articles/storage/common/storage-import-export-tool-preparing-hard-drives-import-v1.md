---
title: "Задание - v1 импорта aaaPreparing жестких дисков для импорта и экспорта Azure | Документы Microsoft"
description: "Узнайте, как tooprepare жесткие диски с помощью hello toocreate средство WAImportExport v1 задания импорта службы импорта и экспорта Azure hello."
author: muralikk
manager: syadav
editor: tysonn
services: storage
documentationcenter: 
ms.assetid: 3d818245-8b1b-4435-a41f-8e5ec1f194b2
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/15/2017
ms.author: muralikk
ms.openlocfilehash: 1eb0c3c51e984e2869b5268254f468d4b43e9d85
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="preparing-hard-drives-for-an-import-job"></a>Подготовка жестких дисков для задания импорта
tooprepare один или несколько жестких дисков для задания импорта, выполните следующие действия:

-   Определение данных tooimport hello в hello службы BLOB-объектов

-   Определите целевые виртуальные каталоги и большие двоичные объекты в hello службы BLOB-объектов

-   укажите количество необходимых дисков;

-   Скопируйте tooeach данных hello жесткие диски

 Образец рабочего процесса см. в разделе [tooPrepare образец рабочего процесса, жесткие диски для задания импорта](storage-import-export-tool-sample-preparing-hard-drives-import-job-workflow-v1.md).

## <a name="identify-hello-data-toobe-imported"></a>Определите toobe данных hello импортирован
 Hello toocreating первый шаг задания импорта является toodetermine какие каталоги и файлы будут tooimport. Это может быть список каталогов, список уникальных файлов или оба списка. Если каталог включен, все файлы в каталоге hello и его подкаталогах будет частью задания импорта hello.

> [!NOTE]
>  Поскольку подкаталоги включаются рекурсивно при родительский каталог, укажите только родительский каталог hello. Не указывайте подкаталоги дополнительно.
>
>  В настоящее время hello средство импорта и экспорта Microsoft Azure имеет следующие ограничения hello: Если каталог содержит больше данных, чем может содержать жесткого диска, затем каталог hello должен toobe разбиваются на более мелкие каталоги. Например если каталог содержит 2,5 ТБ данных и hello емкость жесткого диска — всего 2 ТБ, то нужно toobreak hello каталог на более мелкие каталоги. Это ограничение будет устранено в более поздней версии средства hello.

## <a name="identify-hello-destination-locations-in-hello-blob-service"></a>Определить расположение назначения hello в BLOB-объектов hello
 Для каждого каталога или файла, который будет импортирован необходимо tooidentify целевой виртуальный каталог или большой двоичный объект в hello службы больших двоичных объектов. Эти целевые объекты будет использовать в качестве входных данных toohello средство импорта и экспорта Azure. Обратите внимание, что каталоги следует разделять символом косой черты hello «/».

 Привет, в следующей таблице приведены некоторые примеры целевых больших двоичных объектов.

|Исходный файл или каталог|Целевой большой двоичный объект или виртуальный каталог|
|------------------------------|-------------------------------------------|
|H:\Video|https://mystorageaccount.blob.core.windows.net/video|
|H:\Photo|https://mystorageaccount.blob.core.windows.net/photo|
|K:\Temp\FavoriteVideo.ISO|https://mystorageaccount.blob.core.windows.net/favorite/FavoriteVideo.ISO|
|\\\myshare\john\music|https://mystorageaccount.blob.core.windows.net/music|

## <a name="determine-how-many-drives-are-needed"></a>Указание необходимого количества дисков
 Далее необходимо toodetermine:

-   Hello число жестких дисков требуется toostore hello данных.

-   Hello каталоги и автономные файлы, скопированные tooeach жестком диске.

 Убедитесь, что hello число жестких дисков, вам потребуется toostore hello данных, передаваемых.

## <a name="copy-data-tooyour-hard-drive"></a>Копирование данных tooyour жесткого диска
 В этом разделе описывается, как toocall hello toocopy средство импорта и экспорта Azure вашей tooone данных или несколько жестких дисков. Каждый раз вызвать hello средство импорта и экспорта Azure, вы создаете новый *скопировать сеанс*. Создайте по крайней мере один сеанс копирования для каждого диска toowhich при копировании данных; в некоторых случаях может потребоваться более одного toocopy сеанса копирования всех toosingle дисков данных. Ниже приведены некоторые причины, по которым может потребоваться несколько сеансов копирования.

-   Необходимо создать отдельный сеанс копирования для каждого диска, на который будут копироваться данные.

-   Сеанс копирования можно скопировать один каталог или диск toohello один большой двоичный объект. Если вы копируете несколько каталогов, несколько больших двоичных объектов или их сочетание, потребуется toocreate несколько сеансов копирования.

-   Можно указать свойства и метаданные, которые будут установлены для больших двоичных объектов hello, импортируются как частью задания импорта. Hello свойства или метаданные, указанные для сеанса копирования применяются tooall большие двоичные объекты, указанное этим сеансом копирования. Если требуется toospecify другие свойства или метаданные для некоторых больших двоичных объектов, вам потребуется toocreate отдельную скопируйте сеанса. В разделе [Настройка свойств и метаданных во время процесса импорта hello](storage-import-export-tool-setting-properties-metadata-import-v1.md)для получения дополнительной информации.

> [!NOTE]
>  При наличии нескольких компьютеров, которые удовлетворяют требованиям hello, приведенным в [hello Установка средства импорта и экспорта Azure](storage-import-export-tool-setup-v1.md), можно скопировать данные toomultiple жестких дисков параллельно, запустив экземпляр этого средства на каждом компьютере.

 Для каждого жесткого диска, который вы подготавливаете с hello средство импорта и экспорта Azure hello средство создает один файл журнала. Вам потребуется hello файлы журнала из всех задания импорта hello toocreate дисков. Hello файл журнала также может быть подготовки диска используется tooresume, если средство hello прерывается.

### <a name="azure-importexport-tool-syntax-for-an-import-job"></a>Синтаксис инструмента импорта и экспорта Azure для задания импорта
 tooprepare дисков для задания импорта, вызовите hello средство импорта и экспорта Azure с hello **PrepImport** команды. Используемые параметры зависит от того, является ли это является hello первого сеанса копирования или последующего сеанса.

 Hello первого сеанса копирования для диска требуются некоторые дополнительные параметры toospecify hello ключ учетной записи хранения; Hello букву целевого диска; должен быть отформатирован hello диска; ли hello диск должен быть зашифрован и если да, hello ключ BitLocker; и каталог журнала hello. Ниже приведен синтаксис hello toocopy сеанса начальной копии каталога или отдельного файла.

 **Сначала скопируйте toocopy сеанса одного каталога**

 `WAImportExport PrepImport /sk:<StorageAccountKey> /csas:<ContainerSas> /t: <TargetDriveLetter> [/format] [/silentmode] [/encrypt] [/bk:<BitLockerKey>] [/logdir:<LogDirectory>] /j:<JournalFile> /id:<SessionId> /srcdir:<SourceDirectory> /dstdir:<DestinationBlobVirtualDirectory> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]`

 **Сначала скопируйте toocopy сеанса одного файла**

 `WAImportExport PrepImport /sk:<StorageAccountKey> /csas:<ContainerSas> /t: <TargetDriveLetter> [/format] [/silentmode] [/encrypt] [/bk:<BitLockerKey>] [/logdir:<LogDirectory>] /j:<JournalFile> /id:<SessionId> /srcfile:<SourceFile> /dstblob:<DestinationBlobPath> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]`

 В последующих сеансах копирования не обязательно toospecify hello исходные параметры. Ниже приведен синтаксис hello toocopy сеанса последующие копии каталога или отдельного файла.

 **Последующие сеансы toocopy одного каталога**

 `WAImportExport PrepImport /j:<JournalFile> /id:<SessionId> /srcdir:<SourceDirectory> /dstdir:<DestinationBlobVirtualDirectory> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]`

 **Последующие сеансы toocopy одного файла**

 `WAImportExport PrepImport /j:<JournalFile> /id:<SessionId> /srcfile:<SourceFile> /dstblob:<DestinationBlobPath> [/Disposition:<Disposition>] [/BlobType:<BlockBlob|PageBlob>] [/PropertyFile:<PropertyFile>] [/MetadataFile:<MetadataFile>]`

### <a name="parameters-for-hello-first-copy-session-for-a-hard-drive"></a>Параметры для hello сначала скопировать сеанс для жесткого диска
 Каждый раз при выполнении toohello жесткого диска, файлов toocopy средства импорта и экспорта Azure hello hello средство создает сеанс копирования. Каждый сеанс копирует один каталог или отдельного файла tooa жесткий диск. состояние сеанса копирования hello Hello записывается toohello файла журнала. Если сеанс копирования прерывается (например, из-за потери питания системы tooa), его можно возобновить, запустив средство hello повторно и указывая файл журнала hello в командной строке hello.

> [!WARNING]
>  При указании hello **/формате** параметр для первого сеанса копирования hello hello диск будет отформатирован и будут удалены все данные на диске hello. Рекомендуем использовать для сеанса копирования только пустые диски.

 Hello команда, используемая для hello первого сеанса копирования для каждого диска, требует различных параметров, чем hello команды для последующих сеансов копирования. Hello следующей таблице перечислены hello Дополнительные параметры, доступные для hello первого сеанса копирования.

|Параметр командной строки|Описание|
|-----------------------------|-----------------|
|**/sk:**<ключ_учетной_записи_хранения\>|`Optional.`будут импортированы Hello ключ учетной записи хранилища для данных hello toowhich учетной записи хранилища hello. Необходимо включить **/sk:**< StorageAccountKey\> или **/csas:**< ContainerSas\> в команде hello.|
|**/csas:**<SAS_контейнера\>|`Optional`. Hello контейнер SAS toouse tooimport данные toohello хранилища учетной записи. Необходимо включить **/sk:**< StorageAccountKey\> или **/csas:**< ContainerSas\> в команде hello.<br /><br /> Hello значение этого параметра должно начинаться с имени контейнера hello, за которым следует знак вопроса (?) и маркер SAS hello. Например:<br /><br /> `mycontainer?sv=2014-02-14&sr=c&si=abcde&sig=LiqEmV%2Fs1LF4loC%2FJs9ZM91%2FkqfqHKhnz0JM6bqIqN0%3D&se=2014-11-20T23%3A54%3A14Z&sp=rwdl`<br /><br /> разрешения Hello ли указывать в URL-АДРЕСЕ hello, или в хранимой политики доступа, должен включать чтение, запись и удаление для заданий импорта и чтение, запись и списка для заданий экспорта.<br /><br /> Если этот параметр указан, все большие двоичные объекты toobe импорта и экспорта должна находиться в hello контейнере, указанном в hello подписанного URL-адреса.|
|**/t:**<буква_целевого_диска\>|`Required.`буква диска Hello hello целевого жесткого диска для hello текущего сеанса копирования без двоеточия в конце hello.|
|**/format**|`Optional.`Укажите этот параметр, когда диск hello должен toobe форматирования. в противном случае опустите его. Прежде чем hello средство отформатирует диск hello, выдаст запрос на подтверждение с консоли. toosuppress hello подтверждения, укажите параметр/silentmode hello.|
|**/silentmode**|`Optional.`Укажите этот параметр toosuppress hello и подтверждение форматирование целевого диска hello.|
|**/encrypt**|`Optional.`Укажите этот параметр, если hello диск еще не зашифрован с помощью BitLocker и потребностей toobe шифруются средством hello. Если hello диск уже зашифрован BitLocker, опустите этот параметр и указать hello `/bk` параметра, указав существующий ключ BitLocker hello.<br /><br /> При указании hello `/format` параметр, то необходимо также указать hello `/encrypt` параметра.|
|**/bk:**<ключ_BitLocker\>|`Optional.` Не используйте этот параметр, если задан параметр `/encrypt`. Если `/encrypt` — этот параметр опущен, необходимо toohave уже зашифрованный диск hello с помощью BitLocker. Используйте этот ключ BitLocker hello toospecify параметра. Шифрование BitLocker требуется для всех жестких дисков задания импорта.|
|**/logdir:**<каталог_журнала\>|`Optional.`каталог журнала Hello указывает directory toobe toostore подробных журналов, а также временных файлов манифеста. Если не указан, текущий каталог hello будет использоваться как каталог журнала hello.|

### <a name="parameters-required-for-all-copy-sessions"></a>Параметры, необходимые для всех сеансов копирования
 файл журнала Hello содержит hello состояния для всех сеансов копирования для жесткого диска. Он также содержит сведения hello необходимости toocreate hello задания импорта. Всегда следует указывать файл журнала, когда запущена hello средство импорта и экспорта Azure, а также идентификатор сеанса копирования:

|||
|-|-|
|Параметр командной строки|Описание|
|**/j:**<файл_журнала\>|`Required.`файл журнала toohello путь Hello. У каждого диска должен быть только один файл журнала. Обратите внимание, что этот файл журнала hello не должен находиться на целевом диске hello. расширение файла журнала Hello `.jrn`.|
|**/id:**<ИД_сеанса\>|`Required.`Идентификатор сеанса Hello определяет сеанс копирования. Это используется tooensure точного восстановления прерванного сеанса копирования. Файлы, которые были скопированы в рамках сеанса копирования, хранятся в каталоге с именем hello идентификатор сеанса на целевом диске hello.|

### <a name="parameters-for-copying-a-single-directory"></a>Параметры для копирования одного каталога
 При копировании одного каталога, относятся следующие hello необходимые и необязательные параметры:

|Параметр командной строки|Описание|
|----------------------------|-----------------|
|**/srcdir:**<исходный_каталог\>|`Required.`Hello исходный каталог, содержащий toobe файлы скопированы toohello целевой диск. путь к каталогу Hello должен быть абсолютным (не относительный путь).|
|**/dstdir:**<целевой_виртуальный_каталог_больших_двоичных_объектов\>|`Required.`Hello путь toohello целевой виртуальный каталог в учетной записи хранилища Windows Azure. виртуальный каталог Hello может или уже не существует.<br /><br /> Контейнер или префикс большого двоичного объекта можно указать следующим образом: `music/70s/`. Hello целевой каталог должен начинаться с имени контейнера hello, следуют косой черты «/» и при необходимости может включаться каталога виртуального большого двоичного объекта, заканчивающееся на «/».<br /><br /> Если hello целевой контейнер — это корневой контейнер hello, необходимо явно указать корневой контейнер hello, включая косую черту hello, как `$root/`. Так как не может включать большие двоичные объекты в корневом контейнере hello «/» в именах, все подкаталоги в исходном каталоге hello не будут скопированы, если каталог назначения hello — hello корневой контейнер.<br /><br /> Быть убедиться, что toouse допустимые имена контейнеров, при указании целевых виртуальных каталогов или больших двоичных объектов. Обратите внимание, что имена каталогов пишутся строчными буквами. Правила именования контейнеров см. в статье [Именование контейнеров, больших двоичных объектов и метаданных и ссылка на них](/rest/api/storageservices/naming-and-referencing-containers--blobs--and-metadata).|
|**/Disposition:**<rename&#124;no-overwrite&#124;overwrite>|`Optional.`Определяет поведение hello при большой двоичный объект с hello указанный адрес уже существует. Допустимые значения для этого параметра: `rename`, `no-overwrite` и `overwrite`. Обратите внимание, что в этих значениях учитывается регистр. Если значение не указано, по умолчанию hello — `rename`.<br /><br /> Здравствуйте, значение, заданное для этого параметра влияет на все файлы hello в hello каталог, заданный параметром hello `/srcdir` параметра.|
|**/BlobType:**<BlockBlob&#124;PageBlob>|`Optional.`Указывает тип hello больших двоичных объектов для hello целевых больших двоичных объектов. Допустимые значения: `BlockBlob` и `PageBlob`. Обратите внимание, что в этих значениях учитывается регистр. Если значение не указано, по умолчанию hello — `BlockBlob`.<br /><br /> В большинстве случаев рекомендуем использовать значение `BlockBlob`. При указании `PageBlob`, длина каждого файла в каталоге hello hello должна быть кратной 512, hello размер страницы для страничных больших двоичных объектов.|
|**/PropertyFile:**<файл_свойств\>|`Optional.`Путь к файлу свойств toohello для hello целевых больших двоичных объектов. Дополнительные сведения см. в статье [Формат файла свойств и метаданных службы импорта и экспорта](../storage-import-export-file-format-metadata-and-properties.md).|
|**/MetadataFile:**<файл_метаданных\>|`Optional.`Файл метаданных toohello путь для hello целевых больших двоичных объектов. Дополнительные сведения см. в статье [Формат файла свойств и метаданных службы импорта и экспорта](../storage-import-export-file-format-metadata-and-properties.md).|

### <a name="parameters-for-copying-a-single-file"></a>Параметры для копирования одного файла
 При копировании одного файла, hello следующие обязательные и необязательные параметры.

|Параметр командной строки|Описание|
|----------------------------|-----------------|
|**/srcfile:**<исходный_файл\>|`Required.`скопировать файл toohello toobe для Hello полный путь. путь к каталогу Hello должен быть абсолютным (не относительный путь).|
|**/dstblob:**<путь_к_целевому_большому_двоичному_объекту\>|`Required.`Hello путь toohello BLOB-объект назначения в вашей учетной записи хранилища Windows Azure. Hello больших двоичных объектов может или уже не существует.<br /><br /> Укажите имя которого начинается hello большого двоичного объекта с именем контейнера hello. Имя BLOB-объекта Hello не может начинаться с «/» или имя учетной записи хранения hello. Правила именования больших двоичных объектов см. в статье [Именование контейнеров, больших двоичных объектов и метаданных и ссылка на них](/rest/api/storageservices/naming-and-referencing-containers--blobs--and-metadata).<br /><br /> Если целевой контейнер hello — hello корневой контейнер, необходимо явно указать `$root` как hello контейнера, например `$root/sample.txt`. Обратите внимание, что большие двоичные объекты в корневом контейнере hello не может содержать «/» в их именах.|
|**/Disposition:**<rename&#124;no-overwrite&#124;overwrite>|`Optional.`Определяет поведение hello при большой двоичный объект с hello указанный адрес уже существует. Допустимые значения для этого параметра: `rename`, `no-overwrite` и `overwrite`. Обратите внимание, что в этих значениях учитывается регистр. Если значение не указано, по умолчанию hello — `rename`.|
|**/BlobType:**<BlockBlob&#124;PageBlob>|`Optional.`Указывает тип hello больших двоичных объектов для hello целевых больших двоичных объектов. Допустимые значения: `BlockBlob` и `PageBlob`. Обратите внимание, что в этих значениях учитывается регистр. Если значение не указано, по умолчанию hello — `BlockBlob`.<br /><br /> В большинстве случаев рекомендуем использовать значение `BlockBlob`. При указании `PageBlob`, длина каждого файла в каталоге hello hello должна быть кратной 512, hello размер страницы для страничных больших двоичных объектов.|
|**/PropertyFile:**<файл_свойств\>|`Optional.`Путь к файлу свойств toohello для hello целевых больших двоичных объектов. Дополнительные сведения см. в статье [Формат файла свойств и метаданных службы импорта и экспорта](../storage-import-export-file-format-metadata-and-properties.md).|
|**/MetadataFile:**<файл_метаданных\>|`Optional.`Файл метаданных toohello путь для hello целевых больших двоичных объектов. Дополнительные сведения см. в статье [Формат файла свойств и метаданных службы импорта и экспорта](../storage-import-export-file-format-metadata-and-properties.md).|

### <a name="resuming-an-interrupted-copy-session"></a>Возобновление прерванного сеанса копирования
 Если сеанс копирования прерван по какой-либо причине, его можно возобновить, запустив программу hello только файл журнала hello указанных:

```
WAImportExport.exe PrepImport /j:<JournalFile> /id:<SessionId> /ResumeSession
```

 Только hello самый последний сеанс копирования, был завершен аварийно можно возобновить.

> [!IMPORTANT]
>  При возобновлении сеанса копирования не изменяйте hello источника файлы и папки данных путем добавления или удаления файлов.

### <a name="aborting-an-interrupted-copy-session"></a>Прерывание прерванного сеанса копирования
 Если сеанс копирования прерывается и не является возможные tooresume (например, если исходный каталог недоступен), то необходимо прервать hello текущего сеанса, чтобы его можно откатить назад» и «новые сеансы копирования можно запустить:

```
WAImportExport.exe PrepImport /j:<JournalFile> /id:<SessionId> /AbortSession
```

 Только hello последний сеанс копирования был завершен аварийно, может быть прервана. Обратите внимание, что нельзя отменить hello первого сеанса копирования для диска. Вместо этого необходимо перезапустить сеанс копирования hello с новым файлом журнала.

## <a name="next-steps"></a>Дальнейшие действия

* [Установка hello средство импорта и экспорта Azure](storage-import-export-tool-setup-v1.md)
* [Настройка свойств и метаданных во время hello процессе импорта](storage-import-export-tool-setting-properties-metadata-import-v1.md)
* [Образец рабочего процесса tooprepare жесткие диски для задания импорта](storage-import-export-tool-sample-preparing-hard-drives-import-job-workflow-v1.md)
* [Краткий справочник по часто используемым командам](storage-import-export-tool-quick-reference-v1.md) 
* [Просмотр состояния задания с помощью файлов журнала копирования](storage-import-export-tool-reviewing-job-status-v1.md)
* [Подготовка задания импорта](storage-import-export-tool-repairing-an-import-job-v1.md)
* [Подготовка задания экспорта](storage-import-export-tool-repairing-an-export-job-v1.md)
* [Устранение неполадок средства импорта и экспорта Azure hello](storage-import-export-tool-troubleshooting-v1.md)
