---
title: "Шифрование неактивных данных в службе хранилища Azure | Документация Майкрософт"
description: "Используйте функцию шифрования службы хранилища Azure для шифрования хранилища BLOB-объектов Azure на стороне службы при сохранении данных и его расшифровки при извлечении данных."
services: storage
documentationcenter: .net
author: robinsh
manager: timlt
editor: tysonn
ms.assetid: edabe3ee-688b-41e0-b34f-613ac9c3fdfd
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/09/2017
ms.author: robinsh
ms.openlocfilehash: bac7b3292f21aa97d02a18dd58f79a4f10485b7d
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="azure-storage-service-encryption-for-data-at-rest"></a><span data-ttu-id="41239-103">Шифрование службы хранилища Azure для неактивных данных (предварительная версия)</span><span class="sxs-lookup"><span data-stu-id="41239-103">Azure Storage Service Encryption for Data at Rest</span></span>
<span data-ttu-id="41239-104">Шифрование службы хранилища Azure (SSE) для неактивных данных помогает защитить данные в соответствии с предложениями по безопасности и соответствию вашей организации.</span><span class="sxs-lookup"><span data-stu-id="41239-104">Azure Storage Service Encryption (SSE) for Data at Rest helps you protect and safeguard your data to meet your organizational security and compliance commitments.</span></span> <span data-ttu-id="41239-105">С помощью этой функции служба хранилища Azure автоматически шифрует данные перед сохранением в хранилище и расшифровывает их перед извлечением.</span><span class="sxs-lookup"><span data-stu-id="41239-105">With this feature, Azure Storage automatically encrypts your data prior to persisting to storage and decrypts prior to retrieval.</span></span> <span data-ttu-id="41239-106">Шифрование, расшифровка и управление ключами полностью прозрачны для пользователей.</span><span class="sxs-lookup"><span data-stu-id="41239-106">The encryption, decryption, and key management are totally transparent to users.</span></span>

<span data-ttu-id="41239-107">В следующих разделах приведены подробные инструкции по использованию функции шифрования для службы хранилища, а также описаны поддерживаемые сценарии и взаимодействие с пользователем.</span><span class="sxs-lookup"><span data-stu-id="41239-107">The following sections provide detailed guidance on how to use the Storage Service Encryption features as well as the supported scenarios and user experiences.</span></span>

## <a name="overview"></a><span data-ttu-id="41239-108">Обзор</span><span class="sxs-lookup"><span data-stu-id="41239-108">Overview</span></span>
<span data-ttu-id="41239-109">Служба хранилища Azure предоставляет полный набор возможностей обеспечения безопасности, которые в совокупности позволяют разработчикам создавать защищенные приложения.</span><span class="sxs-lookup"><span data-stu-id="41239-109">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="41239-110">Защитить данные в процессе передачи между приложением и Azure можно с помощью [шифрования на стороне клиента](../storage-client-side-encryption.md), HTTPS или SMB 3.0.</span><span class="sxs-lookup"><span data-stu-id="41239-110">Data can be secured in transit between an application and Azure by using [Client-Side Encryption](../storage-client-side-encryption.md), HTTPs, or SMB 3.0.</span></span> <span data-ttu-id="41239-111">Шифрование службы хранилища обеспечивает шифрование при хранении, а также полностью прозрачное шифрование, расшифровку и управление ключами.</span><span class="sxs-lookup"><span data-stu-id="41239-111">Storage Service Encryption provides encryption at rest, handling encryption, decryption, and key management in a totally transparent fashion.</span></span> <span data-ttu-id="41239-112">Используется 256-битное [шифрование AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), самая надежная технология блочного шифрования на сегодняшний день.</span><span class="sxs-lookup"><span data-stu-id="41239-112">All data is encrypted using 256-bit [AES encryption](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), one of the strongest block ciphers available.</span></span>

<span data-ttu-id="41239-113">Функция SSE шифрует данные при их записи в хранилище Azure. Ее можно использовать для хранилища BLOB-объектов Azure и для хранилища файлов.</span><span class="sxs-lookup"><span data-stu-id="41239-113">SSE works by encrypting the data when it is written to Azure Storage, and can be used for Azure Blob Storage and File Storage.</span></span> <span data-ttu-id="41239-114">Вот что поддерживает служба:</span><span class="sxs-lookup"><span data-stu-id="41239-114">It works for the following:</span></span>

* <span data-ttu-id="41239-115">стандартное хранилище: учетные записи хранения общего назначения для хранилища BLOB-объектов и хранилища файлов, а также учетные записи хранения больших двоичных объектов;</span><span class="sxs-lookup"><span data-stu-id="41239-115">Standard Storage: General purpose storage accounts for Blobs and File storage and Blob storage accounts</span></span>
* <span data-ttu-id="41239-116">Хранилище уровня "Премиум"</span><span class="sxs-lookup"><span data-stu-id="41239-116">Premium storage</span></span> 
* <span data-ttu-id="41239-117">все уровни избыточности (LRS, ZRS, GRS и RA-GRS);</span><span class="sxs-lookup"><span data-stu-id="41239-117">All redundancy levels (LRS, ZRS, GRS, RA-GRS)</span></span>
* <span data-ttu-id="41239-118">учетные записи хранения Azure Resource Manager (но не классические учетные записи хранения);</span><span class="sxs-lookup"><span data-stu-id="41239-118">Azure Resource Manager storage accounts (but not classic)</span></span> 
* <span data-ttu-id="41239-119">все регионы.</span><span class="sxs-lookup"><span data-stu-id="41239-119">All regions.</span></span>

<span data-ttu-id="41239-120">Дополнительные сведения см. в разделе вопросов и ответов.</span><span class="sxs-lookup"><span data-stu-id="41239-120">To learn more, please refer to the FAQ.</span></span>

<span data-ttu-id="41239-121">Чтобы включить или отключить шифрование службы хранилища для учетной записи хранения, войдите на [портал Azure](https://portal.azure.com) и выберите нужную учетную запись.</span><span class="sxs-lookup"><span data-stu-id="41239-121">To enable or disable Storage Service Encryption for a storage account, log into the [Azure portal](https://portal.azure.com) and select a storage account.</span></span> <span data-ttu-id="41239-122">В колонке "Параметры" найдите раздел "Служба BLOB-объектов", как показано на следующем снимке экрана, и щелкните "Шифрование".</span><span class="sxs-lookup"><span data-stu-id="41239-122">On the Settings blade, look for the Blob Service section as shown in this screenshot and click Encryption.</span></span>

<span data-ttu-id="41239-123">![Снимок экрана портала с параметром шифрования](./media/storage-service-encryption/image1.png)
</span><span class="sxs-lookup"><span data-stu-id="41239-123">![Portal Screenshot showing Encryption option](./media/storage-service-encryption/image1.png)
</span></span><br/><span data-ttu-id="41239-124">*Рис. 1. Включение SSE для службы BLOB-объектов (шаг 1)*</span><span class="sxs-lookup"><span data-stu-id="41239-124">*Figure 1: Enable SSE for Blob Service (Step1)*</span></span>

<span data-ttu-id="41239-125">![Снимок экрана портала с параметром шифрования](./media/storage-service-encryption/image3.png)
</span><span class="sxs-lookup"><span data-stu-id="41239-125">![Portal Screenshot showing Encryption option](./media/storage-service-encryption/image3.png)
</span></span><br/><span data-ttu-id="41239-126">*Рис. 2. Включение SSE для службы файлов (шаг 1)*</span><span class="sxs-lookup"><span data-stu-id="41239-126">*Figure 2: Enable SSE for File Service (Step1)*</span></span>

<span data-ttu-id="41239-127">После выбора параметра шифрования можно включить или отключить шифрование службы хранилища.</span><span class="sxs-lookup"><span data-stu-id="41239-127">After you click the Encryption setting, you can enable or disable Storage Service Encryption.</span></span>

<span data-ttu-id="41239-128">![Снимок экрана портала со свойствами шифрования](./media/storage-service-encryption/image2.png)
</span><span class="sxs-lookup"><span data-stu-id="41239-128">![Portal Screenshot showing Encryption properties](./media/storage-service-encryption/image2.png)
</span></span><br/><span data-ttu-id="41239-129">*Рис. 3. Включение SSE для службы BLOB-объектов и службы файлов (шаг 2)*</span><span class="sxs-lookup"><span data-stu-id="41239-129">*Figure 3: Enable SSE for Blob and File Service (Step2)*</span></span>

## <a name="encryption-scenarios"></a><span data-ttu-id="41239-130">Сценарии шифрования</span><span class="sxs-lookup"><span data-stu-id="41239-130">Encryption Scenarios</span></span>
<span data-ttu-id="41239-131">Шифрование службы хранилища можно включить на уровне учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="41239-131">Storage Service Encryption can be enabled at a storage account level.</span></span> <span data-ttu-id="41239-132">После включения клиенты выберут, какие службы необходимо зашифровать.</span><span class="sxs-lookup"><span data-stu-id="41239-132">Once enabled, customers will choose which services to encrypt.</span></span> <span data-ttu-id="41239-133">Оно поддерживает следующие сценарии клиентов:</span><span class="sxs-lookup"><span data-stu-id="41239-133">It supports the following customer scenarios:</span></span>

* <span data-ttu-id="41239-134">шифрование хранилища BLOB-объектов и хранилища файлов в учетных записях Resource Manager;</span><span class="sxs-lookup"><span data-stu-id="41239-134">Encryption of Blob Storage and File Storage in Resource Manager accounts.</span></span>
* <span data-ttu-id="41239-135">шифрование службы BLOB-объектов и файлов в классических учетных записях хранения после миграции в учетные записи хранения Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="41239-135">Encryption of Blob and File Service in classic storage accounts once migrated to Resource Manager storage accounts.</span></span>

<span data-ttu-id="41239-136">SSE имеет такие ограничения:</span><span class="sxs-lookup"><span data-stu-id="41239-136">SSE has the following limitations:</span></span>

* <span data-ttu-id="41239-137">Шифрование классических учетных записей хранения не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="41239-137">Encryption of classic storage accounts is not supported.</span></span>
* <span data-ttu-id="41239-138">Существующие данные — SSE шифрует вновь созданные данные только после включения шифрования.</span><span class="sxs-lookup"><span data-stu-id="41239-138">Existing Data - SSE only encrypts newly created data after the encryption is enabled.</span></span> <span data-ttu-id="41239-139">Например, если вы создадите учетную запись хранения Resource Manager, не включив шифрование, передадите в нее большие двоичные объекты или архивные виртуальные жесткие диски, а затем включите SSE, то эти большие двоичные объекты будут шифроваться только после их перезаписи или копирования.</span><span class="sxs-lookup"><span data-stu-id="41239-139">If for example you create a new Resource Manager storage account but don't turn on encryption, and then you upload blobs or archived VHDs to that storage account and then turn on SSE, those blobs will not be encrypted unless they are rewritten or copied.</span></span>
* <span data-ttu-id="41239-140">Поддержка Marketplace — включите шифрование виртуальных машин, созданных из Marketplace, с помощью [портала Azure](https://portal.azure.com), PowerShell или интерфейса командной строки Azure (Azure CLI).</span><span class="sxs-lookup"><span data-stu-id="41239-140">Marketplace Support - Enable encryption of VMs created from the Marketplace using the [Azure portal](https://portal.azure.com), PowerShell, and Azure CLI.</span></span> <span data-ttu-id="41239-141">Базовый образ виртуального жесткого диска остается незашифрованным, однако все операции записи, производимые после развертывания виртуальной машины, шифруются.</span><span class="sxs-lookup"><span data-stu-id="41239-141">The VHD base image will remain unencrypted; however, any writes done after the VM has spun up will be encrypted.</span></span>
* <span data-ttu-id="41239-142">Таблицы и файлы не шифруются.</span><span class="sxs-lookup"><span data-stu-id="41239-142">Table and Queues data will not be encrypted.</span></span>

## <a name="getting-started"></a><span data-ttu-id="41239-143">Приступая к работе</span><span class="sxs-lookup"><span data-stu-id="41239-143">Getting Started</span></span>
### <a name="step-1-create-a-new-storage-accountstorage-create-storage-accountmd"></a><span data-ttu-id="41239-144">Этап 1. [Создание учетной записи хранения](../storage-create-storage-account.md)</span><span class="sxs-lookup"><span data-stu-id="41239-144">Step 1: [Create a new storage account](../storage-create-storage-account.md).</span></span>
### <a name="step-2-enable-encryption"></a><span data-ttu-id="41239-145">Этап 2. Включение шифрования</span><span class="sxs-lookup"><span data-stu-id="41239-145">Step 2: Enable encryption.</span></span>
<span data-ttu-id="41239-146">Шифрование можно включить с помощью [портала Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="41239-146">You can enable encryption using the [Azure portal](https://portal.azure.com).</span></span>

> [!NOTE]
> <span data-ttu-id="41239-147">Если вы хотите включить или отключить шифрование службы хранилища для учетной записи хранения с помощью программных средств, вы можете использовать [REST API поставщика ресурсов службы хранилища Azure](https://msdn.microsoft.com/library/azure/mt163683.aspx), [клиентскую библиотеку поставщика ресурсов хранилища для .NET](https://msdn.microsoft.com/library/azure/mt131037.aspx), [Azure PowerShell](/powershell/azureps-cmdlets-docs) или [Azure CLI](../storage-azure-cli.md).</span><span class="sxs-lookup"><span data-stu-id="41239-147">If you want to programmatically enable or disable the Storage Service Encryption on a storage account, you can use the [Azure Storage Resource Provider REST API](https://msdn.microsoft.com/library/azure/mt163683.aspx), the [Storage Resource Provider Client Library for .NET](https://msdn.microsoft.com/library/azure/mt131037.aspx), [Azure PowerShell](/powershell/azureps-cmdlets-docs), or the [Azure CLI](../storage-azure-cli.md).</span></span>
> 
> 

### <a name="step-3-copy-data-to-storage-account"></a><span data-ttu-id="41239-148">Этап 3. Копирование данных в учетную запись хранения</span><span class="sxs-lookup"><span data-stu-id="41239-148">Step 3: Copy data to storage account</span></span>
<span data-ttu-id="41239-149">Если вы включите SSE для службы BLOB-объектов, будут зашифрованы все большие двоичные объекты, сохраненные в этой учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="41239-149">If you enable SSE for the Blob service, any blobs written to that storage account will be encrypted.</span></span> <span data-ttu-id="41239-150">Большие двоичные объекты, которые уже находятся в этой учетной записи не будут зашифрованы, если их не перезаписать.</span><span class="sxs-lookup"><span data-stu-id="41239-150">Any blobs already located in that storage account will not be encrypted until they are rewritten.</span></span> <span data-ttu-id="41239-151">Можно скопировать данные из одной учетной записи хранения в другую, для которой включено шифрование SSE, или даже включить SSE и скопировать большие двоичные объекты из одного контейнера в другой, чтобы убедиться, что записанные ранее данные зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="41239-151">You can copy the data from one storage account to one with SSE encrypted, or even enable SSE and copy the blobs from one container to another to sure that previous data is encrypted.</span></span> <span data-ttu-id="41239-152">Для этого можно использовать любой из перечисленных далее инструментов.</span><span class="sxs-lookup"><span data-stu-id="41239-152">You can use any of the following tools to accomplish this.</span></span> <span data-ttu-id="41239-153">Для хранилища файлов используется такая же схема работы.</span><span class="sxs-lookup"><span data-stu-id="41239-153">This is the same behavior for File Storage as well.</span></span>

#### <a name="using-azcopy"></a><span data-ttu-id="41239-154">Использование AzCopy</span><span class="sxs-lookup"><span data-stu-id="41239-154">Using AzCopy</span></span>
<span data-ttu-id="41239-155">AzCopy — это служебная программа командной строки для Windows. Она разработана для копирования данных из хранилища больших двоичных объектов, файлов и табличного хранилища Microsoft Azure (и обратно) с помощью простых команд, обеспечивающих максимальную производительность.</span><span class="sxs-lookup"><span data-stu-id="41239-155">AzCopy is a Windows command-line utility designed for copying data to and from Microsoft Azure Blob, File, and Table storage using simple commands with optimal performance.</span></span> <span data-ttu-id="41239-156">С помощью этой программы можно копировать большие двоичные объекты или файлы из одной учетной записи хранения в другую, для которой также включено шифрование SSE.</span><span class="sxs-lookup"><span data-stu-id="41239-156">You can use this to copy your blobs or files from one storage account to another one that has SSE enabled.</span></span> 

<span data-ttu-id="41239-157">Дополнительные сведения см. в статье [Передача данных с помощью служебной программы командной строки AzCopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="41239-157">To learn more, please visit [Transfer data with the AzCopy Command-Line Utility](storage-use-azcopy.md).</span></span>

#### <a name="using-smb"></a><span data-ttu-id="41239-158">Использование SMB</span><span class="sxs-lookup"><span data-stu-id="41239-158">Using SMB</span></span>
<span data-ttu-id="41239-159">Хранилище файлов Azure предоставляет общие папки в облаке с доступом по стандартному протоколу SMB.</span><span class="sxs-lookup"><span data-stu-id="41239-159">Azure File storage offers file shares in the cloud using the standard SMB protocol.</span></span> <span data-ttu-id="41239-160">Общую папку можно подключить через клиент на локальном компьютере или в Azure.</span><span class="sxs-lookup"><span data-stu-id="41239-160">You can mount a file share from a client on premises or in Azure.</span></span> <span data-ttu-id="41239-161">После подключения можно копировать файлы в общие папки Azure с помощью таких инструментов, как Robocopy.</span><span class="sxs-lookup"><span data-stu-id="41239-161">Once mounted, tools such as Robocopy can be used to copy files over to Azure File shares.</span></span> <span data-ttu-id="41239-162">Дополнительные сведения см. в статьях [Подключение общей папки Azure и получение доступа к этой папке в Windows](../files/storage-how-to-use-files-windows.md) и [Использование хранилища файлов Azure в Linux](../storage-how-to-use-files-linux.md).</span><span class="sxs-lookup"><span data-stu-id="41239-162">For more information, see [how to mount Azure File Share on Windows](../files/storage-how-to-use-files-windows.md) and [how to mount Azure File share on Linux](../storage-how-to-use-files-linux.md).</span></span>


#### <a name="using-the-storage-client-libraries"></a><span data-ttu-id="41239-163">Использование клиентских библиотек хранилища</span><span class="sxs-lookup"><span data-stu-id="41239-163">Using the Storage Client Libraries</span></span>
<span data-ttu-id="41239-164">Чтобы скопировать большие двоичные объекты или файлы из одного хранилища BLOB-объектов в другое или из одной учетной записи хранения в другую, вы можете использовать обширный набор клиентских библиотек хранилища, в том числе для .NET, C++, Java, Android, Node.js, PHP, Python и Ruby.</span><span class="sxs-lookup"><span data-stu-id="41239-164">You can copy blob or file data to and from blob storage or between storage accounts using our rich set of Storage Client Libraries including .NET, C++, Java, Android, Node.js, PHP, Python, and Ruby.</span></span>

<span data-ttu-id="41239-165">Дополнительные сведения см. в статье [Приступая к работе с хранилищем BLOB-объектов Azure с помощью .NET](../blobs/storage-dotnet-how-to-use-blobs.md).</span><span class="sxs-lookup"><span data-stu-id="41239-165">To learn more, please visit our [Get started with Azure Blob storage using .NET](../blobs/storage-dotnet-how-to-use-blobs.md).</span></span>

#### <a name="using-a-storage-explorer"></a><span data-ttu-id="41239-166">Использование обозревателя хранилищ</span><span class="sxs-lookup"><span data-stu-id="41239-166">Using a Storage Explorer</span></span>
<span data-ttu-id="41239-167">Вы можете использовать обозреватель хранилищ для создания учетных записей хранения, отправки и скачивания данных, просмотра содержимого больших двоичных объектов и перехода по каталогам.</span><span class="sxs-lookup"><span data-stu-id="41239-167">You can use a Storage explorer to create storage accounts, upload and download data, view contents of blobs, and navigate through directories.</span></span> <span data-ttu-id="41239-168">Один из них можно использовать для отправки BLOB-объектов в учетную запись хранения с включенным шифрованием.</span><span class="sxs-lookup"><span data-stu-id="41239-168">You can use one of these to upload blobs to your storage account with encryption enabled.</span></span> <span data-ttu-id="41239-169">При помощи некоторых обозревателей хранилищ также можно копировать данные из существующего хранилища BLOB-объектов в другой контейнер учетной записи хранения или в новую учетную запись хранения с включенным SSE.</span><span class="sxs-lookup"><span data-stu-id="41239-169">With some storage explorers, you can also copy data from existing blob storage to a different container in the storage account or a new storage account that has SSE enabled.</span></span>

<span data-ttu-id="41239-170">Дополнительные сведения см. в статье [Обучающие ресурсы для хранилища Azure](../storage-explorers.md).</span><span class="sxs-lookup"><span data-stu-id="41239-170">To learn more, please visit [Azure Storage Explorers](../storage-explorers.md).</span></span>

### <a name="step-4-query-the-status-of-the-encrypted-data"></a><span data-ttu-id="41239-171">Шаг 4. Запрос состояния зашифрованных данных</span><span class="sxs-lookup"><span data-stu-id="41239-171">Step 4: Query the status of the encrypted data</span></span>
<span data-ttu-id="41239-172">Развернута обновленная версия клиентской библиотеки хранилища, позволяющая запрашивать состояние объекта, чтобы определить, зашифрован ли он.</span><span class="sxs-lookup"><span data-stu-id="41239-172">An updated version of the Storage Client libraries has been deployed that allows you to query the state of an object to determine if it is encrypted or not.</span></span> <span data-ttu-id="41239-173">Сейчас эта функция поддерживается только для хранилища BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="41239-173">This is currently only available for Blob storage.</span></span> <span data-ttu-id="41239-174">Мы планируем реализовать поддержку и для хранилища файлов.</span><span class="sxs-lookup"><span data-stu-id="41239-174">Support for File storage is on the roadmap.</span></span> 

<span data-ttu-id="41239-175">В то же время можно вызвать операцию [получения свойств учетной записи](https://msdn.microsoft.com/library/azure/mt163553.aspx) , чтобы убедиться, что для учетной записи включено шифрование, или просмотреть свойства учетной записи хранения на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="41239-175">In the meantime, you can call [Get Account Properties](https://msdn.microsoft.com/library/azure/mt163553.aspx) to verify that the storage account has encryption enabled or view the storage account properties in the Azure portal.</span></span>

## <a name="encryption-and-decryption-workflow"></a><span data-ttu-id="41239-176">Рабочий процесс шифрования и расшифровки</span><span class="sxs-lookup"><span data-stu-id="41239-176">Encryption and Decryption Workflow</span></span>
<span data-ttu-id="41239-177">Ниже приведено краткое описание того, как работает шифрование и расшифровка:</span><span class="sxs-lookup"><span data-stu-id="41239-177">Here is a brief description of the encryption/decryption workflow:</span></span>

* <span data-ttu-id="41239-178">Клиент включает шифрование в учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="41239-178">The customer enables encryption on the storage account.</span></span>
* <span data-ttu-id="41239-179">Когда клиент записывает новые данные (выполняя операции PUT Blob, PUT Block, PUT Page, PUT File и т. п.) в хранилище BLOB-объектов или в хранилище файлов, к каждой операции записи применяется 256-разрядное [шифрование AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard). Это одна из самых надежных технологий блочного шифрования на сегодняшний день.</span><span class="sxs-lookup"><span data-stu-id="41239-179">When the customer writes new data (PUT Blob, PUT Block, PUT Page, PUT File etc.) to Blob or File storage; every write is encrypted using 256-bit [AES encryption](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), one of the strongest block ciphers available.</span></span>
* <span data-ttu-id="41239-180">Когда клиенту требуется получить доступ к данным (например GET Blob и т. п.), они автоматически расшифровываются перед возвратом пользователю.</span><span class="sxs-lookup"><span data-stu-id="41239-180">When the customer needs to access data (GET Blob, etc.), data is automatically decrypted before returning to the user.</span></span>
* <span data-ttu-id="41239-181">Если шифрование отключено, новые операции записи не шифруются, а уже зашифрованные данные остаются в таком состоянии, пока не будут перезаписаны пользователем.</span><span class="sxs-lookup"><span data-stu-id="41239-181">If encryption is disabled, new writes are no longer encrypted and existing encrypted data remains encrypted until rewritten by the user.</span></span> <span data-ttu-id="41239-182">После включения шифрования шифруются все последующие операции записи в хранилище BLOB-объектов или в хранилище файлов.</span><span class="sxs-lookup"><span data-stu-id="41239-182">While encryption is enabled, writes to Blob or File storage will be encrypted.</span></span> <span data-ttu-id="41239-183">Состояние данных не изменяется, когда пользователь переключается между включенным и отключенным шифрованием для учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="41239-183">The state of data does not change with the user toggling between enabling/disabling encryption for the storage account.</span></span>
* <span data-ttu-id="41239-184">Все ключи шифрования хранятся в зашифрованном виде и управляются корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="41239-184">All encryption keys are stored, encrypted, and managed by Microsoft.</span></span>

## <a name="frequently-asked-questions-about-storage-service-encryption-for-data-at-rest"></a><span data-ttu-id="41239-185">Часто задаваемые вопросы о шифровании службы хранилища для неактивных данных</span><span class="sxs-lookup"><span data-stu-id="41239-185">Frequently asked questions about Storage Service Encryption for Data at Rest</span></span>
<span data-ttu-id="41239-186">**Вопрос. У меня есть классическая учетная запись хранения. Можно включить в ней SSE?**</span><span class="sxs-lookup"><span data-stu-id="41239-186">**Q: I have an existing classic storage account. Can I enable SSE on it?**</span></span>

<span data-ttu-id="41239-187">Ответ. Нет, SSE поддерживается только для учетных записей хранения Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="41239-187">A: No, SSE is only supported on Resource Manager storage accounts.</span></span>

<span data-ttu-id="41239-188">**Вопрос. Каким образом можно зашифровать данные в классической учетной записи хранения?**</span><span class="sxs-lookup"><span data-stu-id="41239-188">**Q: How can I encrypt data in my classic storage account?**</span></span>

<span data-ttu-id="41239-189">Ответ. Можно создать новую учетную запись хранения Resource Manager и скопировать в нее данные из классической учетной записи с помощью [AzCopy](storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="41239-189">A: You can create a new Resource Manager storage account and copy your data using [AzCopy](storage-use-azcopy.md) from your existing classic storage account to your newly created Resource Manager storage account.</span></span> 

<span data-ttu-id="41239-190">Перенос классической учетной записи хранения в учетную запись хранения Resource Manager выполняется мгновенно. При этом изменяется тип учетной записи, а имеющиеся данные не затрагиваются.</span><span class="sxs-lookup"><span data-stu-id="41239-190">If you migrate your classic storage account to a Resource Manager storage account, this operation is instantaneous, it changes the type of your account but does not effect your existing data.</span></span> <span data-ttu-id="41239-191">Все новые записанные данные будут шифроваться только после включения шифрования.</span><span class="sxs-lookup"><span data-stu-id="41239-191">Any new data written will be encrypted only after enabling encryption.</span></span> <span data-ttu-id="41239-192">Дополнительные сведения см. в статье [Поддерживаемый платформой перенос ресурсов IaaS из классической модели в модель Azure Resource Manager](https://azure.microsoft.com/blog/iaas-migration-classic-resource-manager/).</span><span class="sxs-lookup"><span data-stu-id="41239-192">For more information, see [Platform Supported Migration of IaaS Resources from Classic to Resource Manager](https://azure.microsoft.com/blog/iaas-migration-classic-resource-manager/).</span></span> <span data-ttu-id="41239-193">Обратите внимание, что эта функция поддерживается только для служб BLOB-объектов и служб файлов.</span><span class="sxs-lookup"><span data-stu-id="41239-193">Please note that this is supported only for Blob and File services.</span></span>

<span data-ttu-id="41239-194">**Вопрос. У меня есть учетная запись хранения Resource Manager. Можно включить в ней SSE?**</span><span class="sxs-lookup"><span data-stu-id="41239-194">**Q: I have an existing Resource Manager storage account. Can I enable SSE on it?**</span></span>

<span data-ttu-id="41239-195">Ответ. Да, но шифрование будет применяться только к тем данным, которые будут записываться после включения SSE.</span><span class="sxs-lookup"><span data-stu-id="41239-195">A: Yes, but only newly written data will be encrypted.</span></span> <span data-ttu-id="41239-196">Данные, сохраненные до этого, шифроваться не будут.</span><span class="sxs-lookup"><span data-stu-id="41239-196">It does not go back and encrypt data that was already present.</span></span> <span data-ttu-id="41239-197">Эта функция пока не поддерживается в предварительной версии хранилища файлов.</span><span class="sxs-lookup"><span data-stu-id="41239-197">This is not yet supported for the File Storage Preview.</span></span>

<span data-ttu-id="41239-198">**Вопрос. Мне бы хотелось зашифровать текущие данные в существующей учетной записи хранения Resource Manager.**</span><span class="sxs-lookup"><span data-stu-id="41239-198">**Q: I would like to encrypt the current data in an existing Resource Manager storage account?**</span></span>

<span data-ttu-id="41239-199">Ответ. Вы можете включить SSE в учетной записи Resource Manager в любое время.</span><span class="sxs-lookup"><span data-stu-id="41239-199">A: You can enable SSE at any time in a Resource Manager storage account.</span></span> <span data-ttu-id="41239-200">Однако данные, которые существовали до этого, не будут зашифрованы.</span><span class="sxs-lookup"><span data-stu-id="41239-200">However, data that were already present will not be encrypted.</span></span> <span data-ttu-id="41239-201">Чтобы зашифровать имеющиеся данные, их можно скопировать в другое имя или другой контейнер и удалить их незашифрованные версии.</span><span class="sxs-lookup"><span data-stu-id="41239-201">To encrypt existing data, you can copy them to another name or another container and then remove the unencrypted versions.</span></span>

<span data-ttu-id="41239-202">**Вопрос. Я использую хранилище класса "Премиум"; доступна ли мне функция SSE?**</span><span class="sxs-lookup"><span data-stu-id="41239-202">**Q: I'm using Premium storage; can I use SSE?**</span></span>

<span data-ttu-id="41239-203">Ответ. Да, функция SSE поддерживается для хранилища класса как "Стандартный", так и "Премиум".</span><span class="sxs-lookup"><span data-stu-id="41239-203">A: Yes, SSE is supported on both Standard Storage and Premium Storage.</span></span>  <span data-ttu-id="41239-204">Служба файлов не поддерживает хранилище класса Premium.</span><span class="sxs-lookup"><span data-stu-id="41239-204">Premium Storage is not supported for the File Service.</span></span>

<span data-ttu-id="41239-205">**Вопрос. Если я создаю учетную запись хранения, включив SSE, а затем создаю с ее помощью новую виртуальную машину, означает ли это, что виртуальная машина зашифрована?**</span><span class="sxs-lookup"><span data-stu-id="41239-205">**Q: If I create a new storage account and enable SSE, then create a new VM using that storage account, does that mean my VM is encrypted?**</span></span>

<span data-ttu-id="41239-206">Ответ. Да.</span><span class="sxs-lookup"><span data-stu-id="41239-206">A: Yes.</span></span> <span data-ttu-id="41239-207">Все новые диски, которые используют новую учетную запись хранения, будут зашифрованы при условии, что они созданы после включения SSE.</span><span class="sxs-lookup"><span data-stu-id="41239-207">Any disks created that use the new storage account will be encrypted, as long as they are created after SSE is enabled.</span></span> <span data-ttu-id="41239-208">Если виртуальная машина создана с помощью Azure Marketplace, базовый образ виртуального жесткого диска остается незашифрованным, однако все операции записи, производимые после развертывания виртуальной машины, шифруются.</span><span class="sxs-lookup"><span data-stu-id="41239-208">If the VM was created using Azure Market Place, the VHD base image will remain unencrypted; however, any writes done after the VM has spun up will be encrypted.</span></span>

<span data-ttu-id="41239-209">**Вопрос. Можно ли создавать учетные записи хранения с включенной функцией SSE с помощью интерфейса командной строки Azure и Azure PowerShell?**</span><span class="sxs-lookup"><span data-stu-id="41239-209">**Q: Can I create new storage accounts with SSE enabled using Azure PowerShell and Azure CLI?**</span></span>

<span data-ttu-id="41239-210">Ответ. Да.</span><span class="sxs-lookup"><span data-stu-id="41239-210">A: Yes.</span></span>

<span data-ttu-id="41239-211">**Вопрос. Насколько дороже обходится служба хранилища Azure с включенным SSE?**</span><span class="sxs-lookup"><span data-stu-id="41239-211">**Q: How much more does Azure Storage cost if SSE is enabled?**</span></span>

<span data-ttu-id="41239-212">Ответ. Дополнительные затраты не требуются.</span><span class="sxs-lookup"><span data-stu-id="41239-212">A: There is no additional cost.</span></span>

<span data-ttu-id="41239-213">**Вопрос. Кто управляет ключами шифрования?**</span><span class="sxs-lookup"><span data-stu-id="41239-213">**Q: Who manages the encryption keys?**</span></span>

<span data-ttu-id="41239-214">Ответ. Ключами управляет корпорация Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="41239-214">A: The keys are managed by Microsoft.</span></span>

<span data-ttu-id="41239-215">**Вопрос. Можно ли использовать собственные ключи шифрования?**</span><span class="sxs-lookup"><span data-stu-id="41239-215">**Q: Can I use my own encryption keys?**</span></span>

<span data-ttu-id="41239-216">Ответ. Мы работаем над тем, чтобы дать клиентам возможность использовать собственные ключи шифрования.</span><span class="sxs-lookup"><span data-stu-id="41239-216">A: We are working on providing capabilities for customers to bring their own encryption keys.</span></span>

<span data-ttu-id="41239-217">**Вопрос. Можно ли отменить доступ к ключам шифрования?**</span><span class="sxs-lookup"><span data-stu-id="41239-217">**Q: Can I revoke access to the encryption keys?**</span></span>

<span data-ttu-id="41239-218">Ответ. Сейчас нет, так как ключи полностью управляются корпорацией Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="41239-218">A: Not at this time; the keys are fully managed by Microsoft.</span></span>

<span data-ttu-id="41239-219">**Вопрос. Включается ли SSE по умолчанию при создании учетной записи хранения?**</span><span class="sxs-lookup"><span data-stu-id="41239-219">**Q: Is SSE enabled by default when I create a new storage account?**</span></span>

<span data-ttu-id="41239-220">Ответ. SSE включается по умолчанию. Для включения можно использовать портал Azure.</span><span class="sxs-lookup"><span data-stu-id="41239-220">A: SSE is not enabled by default; you can use the Azure portal to enable it.</span></span> <span data-ttu-id="41239-221">Можно также включить эту функцию программно с помощью REST API поставщика ресурсов хранилища.</span><span class="sxs-lookup"><span data-stu-id="41239-221">You can also programmatically enable this feature using the Storage Resource Provider REST API.</span></span>

<span data-ttu-id="41239-222">**Вопрос. Чем это отличается от шифрования дисков Azure?**</span><span class="sxs-lookup"><span data-stu-id="41239-222">**Q: How is this different from Azure Disk Encryption?**</span></span>

<span data-ttu-id="41239-223">Ответ. Эта функция используется для шифрования данных в хранилище BLOB-объектов Azure.</span><span class="sxs-lookup"><span data-stu-id="41239-223">A: This feature is used to encrypt data in Azure Blob storage.</span></span> <span data-ttu-id="41239-224">Шифрование дисков Azure применяется для шифрования дисков операционной системы и данных в виртуальных машинах IaaS.</span><span class="sxs-lookup"><span data-stu-id="41239-224">The Azure Disk Encryption is used to encrypt OS and Data disks in IaaS VMs.</span></span> <span data-ttu-id="41239-225">Дополнительные сведения см. в [руководстве по безопасности службы хранилища](../storage-security-guide.md).</span><span class="sxs-lookup"><span data-stu-id="41239-225">For more details, please visit our [Storage Security Guide](../storage-security-guide.md).</span></span>

<span data-ttu-id="41239-226">**Вопрос. Что будет, если включить SSE, а затем выполнить вход и включить шифрование дисков Azure для этих дисков?**</span><span class="sxs-lookup"><span data-stu-id="41239-226">**Q: What if I enable SSE, and then go in and enable Azure Disk Encryption on the disks?**</span></span>

<span data-ttu-id="41239-227">Ответ. Это поддерживаемый режим работы.</span><span class="sxs-lookup"><span data-stu-id="41239-227">A: This will work seamlessly.</span></span> <span data-ttu-id="41239-228">Данные будут шифроваться с помощью обоих методов.</span><span class="sxs-lookup"><span data-stu-id="41239-228">Your data will be encrypted by both methods.</span></span>

<span data-ttu-id="41239-229">**Вопрос. Для моей учетной записи хранения настроена геоизбыточная репликация. Если включить SSE, будет зашифрована и избыточная копия?**</span><span class="sxs-lookup"><span data-stu-id="41239-229">**Q: My storage account is set up to be replicated geo-redundantly. If I enable SSE, will my redundant copy also be encrypted?**</span></span>

<span data-ttu-id="41239-230">Ответ. Да, шифрованию подлежат все копии учетной записи хранения, при этом поддерживаются все варианты избыточности — локально избыточное хранилище (LRS), хранилище, избыточное в пределах зоны (ZRS), геоизбыточное хранилище (GRS) и геоизбыточное хранилище с доступом на чтение (RA-GRS).</span><span class="sxs-lookup"><span data-stu-id="41239-230">A: Yes, all copies of the storage account are encrypted, and all redundancy options – Locally Redundant Storage (LRS), Zone-Redundant Storage (ZRS), Geo-Redundant Storage (GRS), and Read Access Geo-Redundant Storage (RA-GRS) – are supported.</span></span>

<span data-ttu-id="41239-231">**Вопрос. Не удается включить шифрование для учетной записи хранения.**</span><span class="sxs-lookup"><span data-stu-id="41239-231">**Q: I can't enable encryption on my storage account.**</span></span>

<span data-ttu-id="41239-232">Ответ. Это учетная запись Resource Manager?</span><span class="sxs-lookup"><span data-stu-id="41239-232">A: Is it a Resource Manager storage account?</span></span> <span data-ttu-id="41239-233">Классические учетные записи хранения не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="41239-233">Classic storage accounts are not supported.</span></span> 

<span data-ttu-id="41239-234">**Вопрос. Услуга SSE доступна только в некоторых регионах?**</span><span class="sxs-lookup"><span data-stu-id="41239-234">**Q: Is SSE only permitted in specific regions?**</span></span>

<span data-ttu-id="41239-235">Ответ. Функция SSE доступна для хранилища BLOB-объектов во всех регионах.</span><span class="sxs-lookup"><span data-stu-id="41239-235">A: The SSE is available in all regions for Blob storage.</span></span> <span data-ttu-id="41239-236">Сведения о хранилище файлов см. в разделе, посвященном доступности.</span><span class="sxs-lookup"><span data-stu-id="41239-236">Please check the Availability Section for File storage.</span></span> 

<span data-ttu-id="41239-237">**Вопрос. Куда обратиться, чтобы задать вопрос или оставить отзыв?**</span><span class="sxs-lookup"><span data-stu-id="41239-237">**Q: How do I contact someone if I have any issues or want to provide feedback?**</span></span>

<span data-ttu-id="41239-238">Ответ. По любым вопросам, связанным с шифрованием службы хранилища, обращайтесь по адресу [ssediscussions@microsoft.com](mailto:ssediscussions@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="41239-238">A: Please contact [ssediscussions@microsoft.com](mailto:ssediscussions@microsoft.com) for any issues related to Storage Service Encryption.</span></span>

## <a name="next-steps"></a><span data-ttu-id="41239-239">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="41239-239">Next Steps</span></span>
<span data-ttu-id="41239-240">Служба хранилища Azure предоставляет полный набор возможностей обеспечения безопасности, которые в совокупности позволяют разработчикам создавать защищенные приложения.</span><span class="sxs-lookup"><span data-stu-id="41239-240">Azure Storage provides a comprehensive set of security capabilities which together enable developers to build secure applications.</span></span> <span data-ttu-id="41239-241">Дополнительные сведения см. в [руководстве по безопасности службы хранилища](../storage-security-guide.md).</span><span class="sxs-lookup"><span data-stu-id="41239-241">For more details, visit the [Storage Security Guide](../storage-security-guide.md).</span></span>

