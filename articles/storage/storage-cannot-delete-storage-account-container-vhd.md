---
title: "удаление учетных записей хранилища Azure, контейнера или виртуальные жесткие диски в классическом развертывании aaaTroubleshoot | Документы Microsoft"
description: "Устранение неполадок при удалении учетных записей хранения Azure, контейнеров или виртуальных жестких дисков в классической модели развертывания"
services: storage
documentationcenter: 
author: genlin
manager: felixwu
editor: tysonn
tags: storage
ms.assetid: 0f7a8243-d8dc-432a-9d37-1272a0cb3a5c
ms.service: storage
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/13/2017
ms.author: genli
ms.openlocfilehash: 6bbfa032e1968718c623227bb426d553e2951075
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="troubleshoot-deleting-azure-storage-accounts-containers-or-vhds-in-a-classic-deployment"></a>Устранение неполадок при удалении учетных записей хранения Azure, контейнеров или виртуальных жестких дисков в классической модели развертывания
[!INCLUDE [storage-selector-cannot-delete-storage-account-container-vhd](../../includes/storage-selector-cannot-delete-storage-account-container-vhd.md)]

Возможно возникновение ряда ошибок при попытке учетной записи хранилища Azure toodelete hello, контейнера или виртуального жесткого диска в hello [портал Azure](https://portal.azure.com/) или hello [классический портал Azure](https://manage.windowsazure.com/). Hello проблемы может быть вызвано hello при следующих обстоятельствах:

* При удалении виртуальной Машины диск hello и виртуального жесткого диска не удаляются автоматически. Это может быть hello причину сбоя на удаление учетной записи хранилища. Мы не удаляйте hello диска, чтобы toomount hello диск можно использовать другой виртуальной Машиной.
* По-прежнему на диске или hello большой двоичный объект, связанный с диском hello аренды.
* Остался образ виртуальной машины, который использует большой двоичный объект, контейнер или учетную запись хранения.

Если ваш Azure проблемы отсутствует в этой статье, посетите hello форумы Azure на [MSDN и hello переполнения стека](https://azure.microsoft.com/support/forums/). Проблему можно опубликовать на следующих форумах или too@AzureSupport в Twitter. Кроме того, можно зарегистрировать запрос поддержки Azure, выбрав **получение поддержки** на hello [поддержки Azure](https://azure.microsoft.com/support/options/) сайта.

## <a name="symptoms"></a>Симптомы
Hello в следующем разделе приведены распространенные ошибки, которые могут появляться при попытке учетных записей хранилища Azure hello toodelete контейнеров и виртуальных жестких дисков.

### <a name="scenario-1-unable-toodelete-a-storage-account"></a>Сценарий 1: Не удается toodelete учетной записи хранения
При включении учетной записи хранилища классический toohello в hello [портал Azure](https://portal.azure.com/) и выберите **удалить**, может появиться окно со списком объектов, которые препятствуют удалению учетной записи хранения hello:

  ![Изображение ошибки при удалить учетную запись хранения hello](./media/storage-cannot-delete-storage-account-container-vhd/newerror.png)

При включении учетной записи хранилища toohello в hello [классический портал Azure](https://manage.windowsazure.com/) и выберите **удалить**, может появиться одно из hello следующие ошибки:

- *Учетная запись хранения "имя_учетной_записи_хранения" содержит образы виртуальных машин. Убедитесь, что эти образы будут удалены перед удалением этой учетной записи хранения.*

- *Не удалось выполнить учетной записи хранилища toodelete < vm хранилище account-name >. Учетная запись хранения невозможно toodelete < vm хранилище account-name >: "учетная запись хранения < vm хранилище account-name > содержит несколько активных образов или дисков. Убедитесь, что эти образы или диски удалены, перед тем как удалять эту учетную запись хранения".*

- *В учетной записи хранения <учетная_запись_хранения_ВМ> есть несколько активных образов или дисков, например xxxxxxxxx- xxxxxxxxx-O-209490240936090599. Убедитесь, что эти образы или диски удалены, перед тем как удалять эту учетную запись хранения.*

- *Учетная запись хранения <учетная_запись_хранения_ВМ> содержит 1 контейнер с активными артефактами образа или диска. Удалить эти артефакты из репозитория образов hello перед удалением этой учетной записи хранения*.

- *Не удалось выполнить отправку. Учетная запись хранения <учетная_запись_хранения_ВМ> содержит 1 контейнер с активными артефактами образа или диска. Убедитесь, что эти артефакты удаляются из репозитория образов hello перед удалением этой учетной записи хранения. При попытке toodelete учетной записи хранения, все еще активна дисков, связанных с ним, появится сообщение о том, существуют активные дисков, которые требуется удалить toobe*.

### <a name="scenario-2-unable-toodelete-a-container"></a>Сценарий 2: Не удается toodelete контейнера
При запуске контейнера хранилища toodelete hello, может появиться следующая ошибка hello:

*Контейнер хранения невыполненных toodelete <container name>. Ошибка: "сейчас аренду для контейнера hello и идентификатор аренды не был указан в запросе hello*.

Или

*большие двоичные объекты в этом контейнере с использованием Hello следующие диски виртуальной машины, поэтому невозможно удалить контейнер hello: VirtualMachineDiskName1, VirtualMachineDiskName2,...*

### <a name="scenario-3-unable-toodelete-a-vhd"></a>Сценарий 3: Не удается toodelete виртуального жесткого диска
После удаления виртуальной Машины и затем повторите toodelete hello BLOB-объектов для hello соответствующих виртуальных жестких дисков, может появиться следующая сообщение hello.

*Сбой toodelete BLOB-объектов "путь/XXXXXX-XXXXXX-os-1447379084699.vhd'. Ошибка: "сейчас аренду на большой двоичный объект hello и идентификатор аренды не был указан в запросе hello.*

Или

*BLOB-объект «BlobName.vhd» используется в качестве диска виртуальной машины «VirtualMachineDiskName», hello большого двоичного объекта не может быть удалена.*

## <a name="solution"></a>Решение
tooresolve hello наиболее распространенные проблемы, попробуйте hello следующий метод:

### <a name="step-1-delete-any-disks-that-are-preventing-deletion-of-hello-storage-account-container-or-vhd"></a>Шаг 1: Удалите все диски, которые препятствуют удалению hello учетной записи хранилища, контейнера или виртуального жесткого диска
1. Переключение toohello [классический портал Azure](https://manage.windowsazure.com/).
2. Выберите **ВИРТУАЛЬНАЯ МАШИНА** > **ДИСКИ**.

    ![Изображение дисков на виртуальных машинах на классическом портале Azure.](./media/storage-cannot-delete-storage-account-container-vhd/VMUI.png)
3. Найдите hello диски, связанные с hello учетной записи хранилища, контейнера или виртуального жесткого диска, что требуется toodelete. При возвращении hello расположение диска hello, вы обнаружите hello связанную учетную запись хранилища, контейнера или виртуального жесткого диска.

    ![Рисунок, демонстрирующий сведения о расположении для дисков на классическом портале Azure](./media/storage-cannot-delete-storage-account-container-vhd/DiskLocation.png)
4. Удаление hello дисков с помощью одного из следующих методов hello:

  - При наличии не виртуальная машина в списке на hello **присоединено к** поле hello диска, можно удалить диск hello напрямую.

  - Если диск hello диск данных, выполните следующие действия.

    1. Проверьте имя виртуальной Машины, hello диск, подключенный к hello hello.
    2. Go слишком**виртуальные машины** > **экземпляров**и найдите hello виртуальной Машины.
    3. Убедитесь, что ничего не активно использует диск hello.
    4. Выберите **отсоединить диск** внизу hello hello портала toodetach hello диска.
    5. Go слишком**виртуальные машины** > **дисков**и дождитесь hello **присоединено к** tooturn поле пустым. Это означает, что диск hello успешно был отсоединен от виртуальной Машины hello.
    6. Выберите **удаление** внизу hello **виртуальные машины** > **дисков** toodelete hello диска.

  - Если диск hello диска ОС (hello **ОС содержит** поле имеет значение, например, Windows) и вложенные tooa виртуальной Машины, выполните следующие действия toodelete hello виртуальной Машины. не удается отсоединить диск ОС Hello, у нас есть toodelete hello ВМ toorelease hello аренды.

    1. Проверьте имя виртуальной машины hello hello, диск данных, подключенный к hello.  
    2. Go слишком**виртуальные машины** > **экземпляров**, а затем выберите hello виртуальной Машины, hello диск подключен к.
    3. Убедитесь, что ничего не активно использует hello виртуальной машины, и что больше не нужна hello виртуальной машины.
    4. Выберите hello ВМ hello диск подключен к, затем выберите **удаление** > **hello удаления присоединенных дисков**.
    5. Go слишком**виртуальные машины** > **дисков**и дождитесь hello toodisappear диска.  Может потребоваться несколько минут для этого toooccur, и вам может потребоваться toorefresh страницы приветствия.
    6. Если диск hello не исчезнет, дождитесь hello **присоединено к** tooturn поле пустым. Это означает, что диск hello полностью был отсоединен от виртуальной Машины hello.  Диск hello затем установите **удалить** внизу hello диска hello toodelete страницы приветствия.


   > [!NOTE]
   > Если диск tooa подключенных виртуальных Машин, нельзя будет toodelete его. Диски отключаются от удаленной виртуальной машины асинхронно. Он может занять несколько минут, после удаления hello виртуальной Машины для этого поля tooclear вверх.
   >
   >


### <a name="step-2-delete-any-vm-images-that-are-preventing-deletion-of-hello-storage-account-or-container"></a>Шаг 2: Удалите все образы виртуальных Машин, не позволяют удаления учетной записи хранилища hello или контейнера
1. Переключение toohello [классический портал Azure](https://manage.windowsazure.com/).
2. Выберите **ВИРТУАЛЬНОЙ МАШИНЫ** > **ИЗОБРАЖЕНИЯ**, а затем удалите hello образы, которые связаны с hello учетной записи хранилища, контейнера или виртуального жесткого диска.

    После этого повторите toodelete hello хранилища учетной записи, контейнера или виртуального жесткого диска.

> [!WARNING]
> Быть tooback убедиться, что копирование всего требуется toosave перед удалением учетной записи hello. Восстановить удаленный виртуальный жесткий диск, большой двоичный объект, таблицу, очередь и файл невозможно. Убедитесь, что ресурс hello не используется.
>
>

## <a name="about-hello-stopped-deallocated-status"></a>О hello состоянии Stopped (освобождена)
Виртуальные машины, созданные в hello классической модели развертывания и которые были сохранены будет иметь hello **остановлена (освобождена)** состояния на любом hello [портал Azure](https://portal.azure.com/) или [классический портал Azure ](https://manage.windowsazure.com/).

**Классический портал Azure**:

![Состояние "Остановлено (освобождено)" виртуальных машин на портале Azure.](./media/storage-cannot-delete-storage-account-container-vhd/moreinfo2.png)

**Портал Azure**:

![Состояние "Остановлено (освобождено)" виртуальных машин на классическом портале Azure.](./media/storage-cannot-delete-storage-account-container-vhd/moreinfo1.png)

Состояние «Остановлена (освобождена)» освобождает hello ресурсов компьютера, например hello ЦП, памяти и сети. диски Hello, однако по-прежнему сохраняются так, что можно быстро создать повторно hello виртуальной Машины при необходимости. Эти диски создаются на основе виртуальных жестких дисков, поддерживаемых службой хранилища Azure. Учетная запись хранения Hello содержит эти виртуальные жесткие диски и hello диски имеют аренды для этих виртуальных жестких дисков.

## <a name="next-steps"></a>Дальнейшие действия
* [Удаление учетной записи хранения](storage-create-storage-account.md#delete-a-storage-account)
