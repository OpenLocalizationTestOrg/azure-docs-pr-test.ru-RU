---
title: "Поддержка доступ (CORS) aaaCross от источника ресурсов | Документы Microsoft"
description: "Дополнительные сведения о том, как tooenable поддержка CORS для службы хранилища Microsoft Azure hello."
services: storage
documentationcenter: .net
author: cbrooksmsft
manager: carmonm
editor: tysonn
ms.assetid: a0229595-5b64-4898-b8d6-fa2625ea6887
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 2/22/2017
ms.author: cbrooks
ms.openlocfilehash: 0a6ec3bf6999c5faa7f0912dc2a47921aa01d3d4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="cross-origin-resource-sharing-cors-support-for-hello-azure-storage-services"></a><span data-ttu-id="ef34c-103">Поддержка общего доступа к ресурсам независимо от источника (CORS) для hello служб хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="ef34c-103">Cross-Origin Resource Sharing (CORS) Support for hello Azure Storage Services</span></span>
<span data-ttu-id="ef34c-104">Начиная с версии 2013-08-15, hello служб хранилища Azure поддерживают общий доступ к ресурсам независимо от источника (CORS) для службы BLOB-объекта, таблицы, очереди и файла hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-104">Beginning with version 2013-08-15, hello Azure storage services support Cross-Origin Resource Sharing (CORS) for hello Blob, Table, Queue, and File services.</span></span> <span data-ttu-id="ef34c-105">CORS является функцией HTTP, который позволяет веб-приложение в пределах одного домена tooaccess ресурсы в другом домене.</span><span class="sxs-lookup"><span data-stu-id="ef34c-105">CORS is an HTTP feature that enables a web application running under one domain tooaccess resources in another domain.</span></span> <span data-ttu-id="ef34c-106">Веб-браузеры имеют ограничение безопасности называется [политика одного источника](http://www.w3.org/Security/wiki/Same_Origin_Policy) , препятствующая веб-страницы из вызова API в других доменах. CORS обеспечивают безопасный способ tooallow одного домена (hello исходный домен) toocall API в другом домене.</span><span class="sxs-lookup"><span data-stu-id="ef34c-106">Web browsers implement a security restriction known as [same-origin policy](http://www.w3.org/Security/wiki/Same_Origin_Policy) that prevents a web page from calling APIs in a different domain; CORS provides a secure way tooallow one domain (hello origin domain) toocall APIs in another domain.</span></span> <span data-ttu-id="ef34c-107">В разделе hello [спецификация CORS](http://www.w3.org/TR/cors/) Дополнительные сведения о CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-107">See hello [CORS specification](http://www.w3.org/TR/cors/) for details on CORS.</span></span>

<span data-ttu-id="ef34c-108">Можно задать правила CORS отдельно для каждого hello службы хранилища путем вызова [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [набор свойств службы очередей](https://msdn.microsoft.com/library/hh452232.aspx), и [установки таблицы свойств службы](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef34c-108">You can set CORS rules individually for each of hello storage services, by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span> <span data-ttu-id="ef34c-109">После задания hello правил CORS для службы hello, прошедший проверку подлинности запроса к службе hello из другого домена будет вычисленное toodetermine toohello правила, заданные в соответствии с разрешена ли.</span><span class="sxs-lookup"><span data-stu-id="ef34c-109">Once you set hello CORS rules for hello service, then a properly authenticated request made against hello service from a different domain will be evaluated toodetermine whether it is allowed according toohello rules you have specified.</span></span>

> [!NOTE]
> <span data-ttu-id="ef34c-110">Обратите внимание, что CORS не является механизмом аутентификации.</span><span class="sxs-lookup"><span data-stu-id="ef34c-110">Note that CORS is not an authentication mechanism.</span></span> <span data-ttu-id="ef34c-111">Любой запрос к ресурсу хранилища, в котором включен механизм CORS, должен иметь правильную подпись аутентификации или быть направлен к открытому ресурсу.</span><span class="sxs-lookup"><span data-stu-id="ef34c-111">Any request made against a storage resource when CORS is enabled must either have a proper authentication signature, or must be made against a public resource.</span></span>
> 
> 

## <a name="understanding-cors-requests"></a><span data-ttu-id="ef34c-112">Общие сведения о запросах CORS</span><span class="sxs-lookup"><span data-stu-id="ef34c-112">Understanding CORS requests</span></span>
<span data-ttu-id="ef34c-113">Запрос CORS из исходного домена может состоять из двух отдельных запросов:</span><span class="sxs-lookup"><span data-stu-id="ef34c-113">A CORS request from an origin domain may consist of two separate requests:</span></span>

* <span data-ttu-id="ef34c-114">Предварительный запрос, который запрашивает ограничения CORS hello, наложенные службой hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-114">A preflight request, which queries hello CORS restrictions imposed by hello service.</span></span> <span data-ttu-id="ef34c-115">Hello Предварительный запрос является обязательным, если метод запроса hello [простой метод](http://www.w3.org/TR/cors/), то есть GET, HEAD или POST.</span><span class="sxs-lookup"><span data-stu-id="ef34c-115">hello preflight request is required unless hello request method is a [simple method](http://www.w3.org/TR/cors/), meaning GET, HEAD, or POST.</span></span>
* <span data-ttu-id="ef34c-116">Hello фактический запрос, к hello требуемого ресурса.</span><span class="sxs-lookup"><span data-stu-id="ef34c-116">hello actual request, made against hello desired resource.</span></span>

### <a name="preflight-request"></a><span data-ttu-id="ef34c-117">Предварительный запрос</span><span class="sxs-lookup"><span data-stu-id="ef34c-117">Preflight request</span></span>
<span data-ttu-id="ef34c-118">Предварительный запрос Hello hello ограничения CORS, которые были установлены для hello службы хранилища владельцем учетной записи hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-118">hello preflight request queries hello CORS restrictions that have been established for hello storage service by hello account owner.</span></span> <span data-ttu-id="ef34c-119">Hello веб-браузер (или другой агент пользователя) отправляет запрос OPTIONS, включает заголовки запроса hello, метод и домен-источник.</span><span class="sxs-lookup"><span data-stu-id="ef34c-119">hello web browser (or other user agent) sends an OPTIONS request that includes hello request headers, method and origin domain.</span></span> <span data-ttu-id="ef34c-120">Hello служба хранилища оценивает hello предназначен операции на основе набора предварительно настроенных правил CORS, указывающие, какие домены-источники, методы запроса и заголовки запроса может быть указан в фактических запросах к ресурсу хранилища.</span><span class="sxs-lookup"><span data-stu-id="ef34c-120">hello storage service evaluates hello intended operation based on a pre-configured set of CORS rules that specify which origin domains, request methods, and request headers may be specified on an actual request against a storage resource.</span></span>

<span data-ttu-id="ef34c-121">Если hello службе включен CORS и есть правило CORS, которому соответствует Предварительный запрос hello, hello служба отправляет код состояния 200 (ОК) и включает заголовки Access-Control требуется hello в ответ hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-121">If CORS is enabled for hello service and there is a CORS rule that matches hello preflight request, hello service responds with status code 200 (OK), and includes hello required Access-Control headers in hello response.</span></span>

<span data-ttu-id="ef34c-122">Если CORS не включен для службы hello или нет правила CORS соответствует Предварительный запрос hello, hello служба передаст код состояния 403 (запрещено).</span><span class="sxs-lookup"><span data-stu-id="ef34c-122">If CORS is not enabled for hello service or no CORS rule matches hello preflight request, hello service will respond with status code 403 (Forbidden).</span></span>

<span data-ttu-id="ef34c-123">Если запрос OPTIONS не содержит hello hello необходимые заголовки CORS (hello источника и заголовки Access-Control-Request-Method), hello служба передаст код состояния 400 (неправильный запрос).</span><span class="sxs-lookup"><span data-stu-id="ef34c-123">If hello OPTIONS request doesn't contain hello required CORS headers (hello Origin and Access-Control-Request-Method headers), hello service will respond with status code 400 (Bad request).</span></span>

<span data-ttu-id="ef34c-124">Обратите внимание, что Предварительный запрос оценивается hello службы (больших двоичных объектов, очередей и таблиц), а не для hello запрашиваемый ресурс.</span><span class="sxs-lookup"><span data-stu-id="ef34c-124">Note that a preflight request is evaluated against hello service (Blob, Queue, and Table) and not against hello requested resource.</span></span> <span data-ttu-id="ef34c-125">Владелец учетной записи Hello необходимо включить механизм CORS при задании свойств службы учетных записей hello в порядке для запроса toosucceed hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-125">hello account owner must have enabled CORS as part of hello account service properties in order for hello request toosucceed.</span></span>

### <a name="actual-request"></a><span data-ttu-id="ef34c-126">Фактический запрос</span><span class="sxs-lookup"><span data-stu-id="ef34c-126">Actual request</span></span>
<span data-ttu-id="ef34c-127">После принятия предварительного запросов hello и возвращается ответ hello, hello браузер отправляет сам запрос hello к ресурсу хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-127">Once hello preflight request is accepted and hello response is returned, hello browser will dispatch hello actual request against hello storage resource.</span></span> <span data-ttu-id="ef34c-128">браузер Hello запретит фактический запрос hello сразу же если hello Предварительный запрос отклоняется.</span><span class="sxs-lookup"><span data-stu-id="ef34c-128">hello browser will deny hello actual request immediately if hello preflight request is rejected.</span></span>

<span data-ttu-id="ef34c-129">Hello фактический запрос считается обычным запросом к службе хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-129">hello actual request is treated as normal request against hello storage service.</span></span> <span data-ttu-id="ef34c-130">Hello присутствие заголовка Origin hello указывает, что hello запрос является запросом CORS и hello служба будет проверять hello соответствия правилам CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-130">hello presence of hello Origin header indicates that hello request is a CORS request and hello service will check hello matching CORS rules.</span></span> <span data-ttu-id="ef34c-131">Если соответствие найдено, заголовки hello управления доступом будут добавлены toohello ответа и отправляются назад toohello клиента.</span><span class="sxs-lookup"><span data-stu-id="ef34c-131">If a match is found, hello Access-Control headers are added toohello response and sent back toohello client.</span></span> <span data-ttu-id="ef34c-132">Если совпадение не найдено, hello заголовки CORS Access-Control не возвращаются.</span><span class="sxs-lookup"><span data-stu-id="ef34c-132">If a match is not found, hello CORS Access-Control headers are not returned.</span></span>

## <a name="enabling-cors-for-hello-azure-storage-services"></a><span data-ttu-id="ef34c-133">Включение CORS для служб хранилища Azure hello</span><span class="sxs-lookup"><span data-stu-id="ef34c-133">Enabling CORS for hello Azure Storage services</span></span>
<span data-ttu-id="ef34c-134">Правила CORS задаются на уровне службы hello, поэтому требуется tooenable или отключить CORS для каждой службы (больших двоичных объектов, очередей и таблиц) отдельно.</span><span class="sxs-lookup"><span data-stu-id="ef34c-134">CORS rules are set at hello service level, so you need tooenable or disable CORS for each service (Blob, Queue and Table) separately.</span></span> <span data-ttu-id="ef34c-135">По умолчанию механизм CORS отключен для всех служб.</span><span class="sxs-lookup"><span data-stu-id="ef34c-135">By default, CORS is disabled for each service.</span></span> <span data-ttu-id="ef34c-136">tooenable CORS необходимо tooset hello соответствующие свойства службы с помощью версии 2013-08-15 или более поздней версии и добавить правила CORS toohello свойств службы.</span><span class="sxs-lookup"><span data-stu-id="ef34c-136">tooenable CORS, you need tooset hello appropriate service properties using version 2013-08-15 or later, and add CORS rules toohello service properties.</span></span> <span data-ttu-id="ef34c-137">Дополнительные сведения о том, как tooenable или отключать CORS для службы и работе правил tooset CORS, пожалуйста ссылаться слишком[Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [набор свойств службы очередей](https://msdn.microsoft.com/library/hh452232.aspx), и [в таблице Свойств службы](https://msdn.microsoft.com/library/hh452240.aspx).</span><span class="sxs-lookup"><span data-stu-id="ef34c-137">For details about how tooenable or disable CORS for a service and how tooset CORS rules, please refer too[Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx).</span></span>

<span data-ttu-id="ef34c-138">Далее приведен образец одного правила CORS, заданного с помощью операции Set Service Properties.</span><span class="sxs-lookup"><span data-stu-id="ef34c-138">Here is a sample of a single CORS rule, specified via a Set Service Properties operation:</span></span>

```xml
<Cors>    
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com, http://www.fabrikam.com</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <AllowedHeaders>x-ms-meta-data*,x-ms-meta-target*,x-ms-meta-abc</AllowedHeaders>
        <ExposedHeaders>x-ms-meta-*</ExposedHeaders>
        <MaxAgeInSeconds>200</MaxAgeInSeconds>
    </CorsRule>
<Cors>
```

<span data-ttu-id="ef34c-139">Все элементы, включаемые в правиле CORS hello описан ниже.</span><span class="sxs-lookup"><span data-stu-id="ef34c-139">Each element included in hello CORS rule is described below:</span></span>

* <span data-ttu-id="ef34c-140">**AllowedOrigins**: hello домены-источники, разрешенные toomake запроса к hello хранилища службы через CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-140">**AllowedOrigins**: hello origin domains that are permitted toomake a request against hello storage service via CORS.</span></span> <span data-ttu-id="ef34c-141">Hello исходный домен является доменом hello, из какой hello поступил запрос.</span><span class="sxs-lookup"><span data-stu-id="ef34c-141">hello origin domain is hello domain from which hello request originates.</span></span> <span data-ttu-id="ef34c-142">Обратите внимание, что hello origin должен быть в точности совпадать с учетом регистра, с источника hello, что возраст пользователя hello отправляет toohello службы.</span><span class="sxs-lookup"><span data-stu-id="ef34c-142">Note that hello origin must be an exact case-sensitive match with hello origin that hello user age sends toohello service.</span></span> <span data-ttu-id="ef34c-143">Можно также использовать hello подстановочный знак "*" tooallow все запросы toomake источника доменов через CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-143">You can also use hello wildcard character '*' tooallow all origin domains toomake requests via CORS.</span></span> <span data-ttu-id="ef34c-144">В приведенном выше примере hello, hello домены [http://www.contoso.com](http://www.contoso.com) и [http://www.fabrikam.com](http://www.fabrikam.com) могут делать запросы к службе hello посредством CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-144">In hello example above, hello domains [http://www.contoso.com](http://www.contoso.com) and [http://www.fabrikam.com](http://www.fabrikam.com) can make requests against hello service using CORS.</span></span>
* <span data-ttu-id="ef34c-145">**AllowedMethods**: hello методы (команды HTTP-запросов), hello исходный домен может использовать для выполнения запроса CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-145">**AllowedMethods**: hello methods (HTTP request verbs) that hello origin domain may use for a CORS request.</span></span> <span data-ttu-id="ef34c-146">В приведенном выше примере hello разрешены только запросы PUT и GET.</span><span class="sxs-lookup"><span data-stu-id="ef34c-146">In hello example above, only PUT and GET requests are permitted.</span></span>
* <span data-ttu-id="ef34c-147">**AllowedHeaders**: hello заголовки запроса, hello исходный домен может указывать на запрос CORS hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-147">**AllowedHeaders**: hello request headers that hello origin domain may specify on hello CORS request.</span></span> <span data-ttu-id="ef34c-148">В приведенном выше примере hello разрешены все заголовки метаданных, начиная с x-ms-meta-data, x-ms-meta цели и x-ms-meta-abc.</span><span class="sxs-lookup"><span data-stu-id="ef34c-148">In hello example above, all metadata headers starting with x-ms-meta-data, x-ms-meta-target, and x-ms-meta-abc are permitted.</span></span> <span data-ttu-id="ef34c-149">Обратите внимание, что hello подстановочный знак "*" Указывает, что все заголовки, начинающиеся со слова hello указан префикс допускается.</span><span class="sxs-lookup"><span data-stu-id="ef34c-149">Note that hello wildcard character '*' indicates that any header beginning with hello specified prefix is allowed.</span></span>
* <span data-ttu-id="ef34c-150">**ExposedHeaders**: hello заголовки ответа, которые могут отправлен в запрос CORS toohello ответа hello и предоставляемые hello браузера toohello запрос издателя.</span><span class="sxs-lookup"><span data-stu-id="ef34c-150">**ExposedHeaders**: hello response headers that may be sent in hello response toohello CORS request and exposed by hello browser toohello request issuer.</span></span> <span data-ttu-id="ef34c-151">В примере hello выше hello браузера является соответствии tooexpose все заголовки, начинающиеся с x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="ef34c-151">In hello example above, hello browser is instructed tooexpose any header beginning with x-ms-meta.</span></span>
* <span data-ttu-id="ef34c-152">**MaxAgeInSeconds**: hello максимальное количество времени, что браузер должен кэшировать Предварительный запрос OPTIONS hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-152">**MaxAgeInSeconds**: hello maximum amount time that a browser should cache hello preflight OPTIONS request.</span></span>

<span data-ttu-id="ef34c-153">Hello службы хранилища Azure поддерживают Указание заголовков с префиксами для обоих hello **AllowedHeaders** и **ExposedHeaders** элементов.</span><span class="sxs-lookup"><span data-stu-id="ef34c-153">hello Azure storage services support specifying prefixed headers for both hello **AllowedHeaders** and **ExposedHeaders** elements.</span></span> <span data-ttu-id="ef34c-154">tooallow категорию заголовков, можно указать категорию toothat Общий префикс.</span><span class="sxs-lookup"><span data-stu-id="ef34c-154">tooallow a category of headers, you can specify a common prefix toothat category.</span></span> <span data-ttu-id="ef34c-155">Например, указав *x-ms-meta** в качестве заголовка с префиксом, вы тем самым устанавливаете правило, соответствующее всем заголовкам, начинающимся с x-ms-meta.</span><span class="sxs-lookup"><span data-stu-id="ef34c-155">For example, specifying *x-ms-meta** as a prefixed header establishes a rule that will match all headers that begin with x-ms-meta.</span></span>

<span data-ttu-id="ef34c-156">Hello следующие ограничения применяются правила tooCORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-156">hello following limitations apply tooCORS rules:</span></span>

* <span data-ttu-id="ef34c-157">Можно указать вверх toofive правил CORS для службы хранилища (больших двоичных объектов, таблиц и очередей).</span><span class="sxs-lookup"><span data-stu-id="ef34c-157">You can specify up toofive CORS rules per storage service (Blob, Table, and Queue).</span></span>
* <span data-ttu-id="ef34c-158">Максимальный размер всех параметров правил CORS в запросе hello, за исключением XML-теги Hello не должен превышать 2 КБ.</span><span class="sxs-lookup"><span data-stu-id="ef34c-158">hello maximum size of all CORS rules settings on hello request, excluding XML tags, should not exceed 2 KB.</span></span>
* <span data-ttu-id="ef34c-159">Hello длина разрешенного заголовка, представленного заголовка или разрешенного источника не должна превышать 256 символов.</span><span class="sxs-lookup"><span data-stu-id="ef34c-159">hello length of an allowed header, exposed header, or allowed origin should not exceed 256 characters.</span></span>
* <span data-ttu-id="ef34c-160">Разрешенные и представленные заголовки могут быть следующими:</span><span class="sxs-lookup"><span data-stu-id="ef34c-160">Allowed headers and exposed headers may be either:</span></span>
  * <span data-ttu-id="ef34c-161">Литеральные заголовки, где hello точное имя заголовка предоставляется, таких как **x-ms-meta-processed**.</span><span class="sxs-lookup"><span data-stu-id="ef34c-161">Literal headers, where hello exact header name is provided, such as **x-ms-meta-processed**.</span></span> <span data-ttu-id="ef34c-162">При запросе hello можно указать не более 64 литеральных заголовков.</span><span class="sxs-lookup"><span data-stu-id="ef34c-162">A maximum of 64 literal headers may be specified on hello request.</span></span>
  * <span data-ttu-id="ef34c-163">Заголовки с префиксом, где указан префикс заголовка hello, таких как **x-ms-meta-data***.</span><span class="sxs-lookup"><span data-stu-id="ef34c-163">Prefixed headers, where a prefix of hello header is provided, such as **x-ms-meta-data***.</span></span> <span data-ttu-id="ef34c-164">Этот способ задания префикс разрешает или предоставляет любой заголовок, который начинается с префиксом hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-164">Specifying a prefix in this manner allows or exposes any header that begins with hello given prefix.</span></span> <span data-ttu-id="ef34c-165">При запросе hello можно указать не более 2 заголовков с префиксами.</span><span class="sxs-lookup"><span data-stu-id="ef34c-165">A maximum of two prefixed headers may be specified on hello request.</span></span>
* <span data-ttu-id="ef34c-166">Hello методы (или HTTP-команды) указан в hello **AllowedMethods** элемент должен соответствовать toohello методам, поддерживаемым API службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="ef34c-166">hello methods (or HTTP verbs) specified in hello **AllowedMethods** element must conform toohello methods supported by Azure storage service APIs.</span></span> <span data-ttu-id="ef34c-167">Поддерживаемые методы: DELETE, GET, HEAD, MERGE, POST, OPTIONS и PUT.</span><span class="sxs-lookup"><span data-stu-id="ef34c-167">Supported methods are DELETE, GET, HEAD, MERGE, POST, OPTIONS and PUT.</span></span>

## <a name="understanding-cors-rule-evaluation-logic"></a><span data-ttu-id="ef34c-168">Общие сведения о логике оценки правил CORS</span><span class="sxs-lookup"><span data-stu-id="ef34c-168">Understanding CORS rule evaluation logic</span></span>
<span data-ttu-id="ef34c-169">Когда служба хранилища получает предварительный или фактический запрос, она оценивает этот запрос, на основе правил CORS hello, заданным для hello службы через hello соответствующие операции Set Service Properties.</span><span class="sxs-lookup"><span data-stu-id="ef34c-169">When a storage service receives a preflight or actual request, it evaluates that request based on hello CORS rules you have established for hello service via hello appropriate Set Service Properties operation.</span></span> <span data-ttu-id="ef34c-170">Правила CORS оцениваются в порядке hello, в котором они были заданы в тексте запроса hello hello операции Set Service Properties.</span><span class="sxs-lookup"><span data-stu-id="ef34c-170">CORS rules are evaluated in hello order in which they were set in hello request body of hello Set Service Properties operation.</span></span>

<span data-ttu-id="ef34c-171">Правила CORS оцениваются следующим образом:</span><span class="sxs-lookup"><span data-stu-id="ef34c-171">CORS rules are evaluated as follows:</span></span>

1. <span data-ttu-id="ef34c-172">Во-первых, исходный домен hello hello запроса проверяется по hello доменов, указанных для hello **AllowedOrigins** элемента.</span><span class="sxs-lookup"><span data-stu-id="ef34c-172">First, hello origin domain of hello request is checked against hello domains listed for hello **AllowedOrigins** element.</span></span> <span data-ttu-id="ef34c-173">Если исходный домен hello включается в список hello, или с символом-шаблоном hello разрешены все домены "*", то оценка правил продолжится.</span><span class="sxs-lookup"><span data-stu-id="ef34c-173">If hello origin domain is included in hello list, or all domains are allowed with hello wildcard character '*', then rules evaluation proceeds.</span></span> <span data-ttu-id="ef34c-174">Если hello исходный домен не указан, hello запрос завершается ошибкой.</span><span class="sxs-lookup"><span data-stu-id="ef34c-174">If hello origin domain is not included, then hello request fails.</span></span>
2. <span data-ttu-id="ef34c-175">Затем метод hello (или HTTP-команды) hello запроса проверяется по hello методов, перечисленных в hello **AllowedMethods** элемента.</span><span class="sxs-lookup"><span data-stu-id="ef34c-175">Next, hello method (or HTTP verb) of hello request is checked against hello methods listed in hello **AllowedMethods** element.</span></span> <span data-ttu-id="ef34c-176">Если метод hello включен в список hello, оценка правил продолжится. в противном случае происходит сбой запроса hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-176">If hello method is included in hello list, then rules evaluation proceeds; if not, then hello request fails.</span></span>
3. <span data-ttu-id="ef34c-177">Если hello запрос соответствует правилу по своему домену-источнику и его метода, этого правила является запросом выбранного tooprocess hello и другим правилам вычисляются.</span><span class="sxs-lookup"><span data-stu-id="ef34c-177">If hello request matches a rule in its origin domain and its method, that rule is selected tooprocess hello request and no further rules are evaluated.</span></span> <span data-ttu-id="ef34c-178">Перед hello запрос завершится успешно, однако все заголовки, заданные в запросе hello проверяются hello заголовки, перечисленные в hello **AllowedHeaders** элемента.</span><span class="sxs-lookup"><span data-stu-id="ef34c-178">Before hello request can succeed, however, any headers specified on hello request are checked against hello headers listed in hello **AllowedHeaders** element.</span></span> <span data-ttu-id="ef34c-179">Если переданные заголовки hello hello допустимые заголовки не совпадают, происходит сбой запроса hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-179">If hello headers sent do not match hello allowed headers, hello request fails.</span></span>

<span data-ttu-id="ef34c-180">Поскольку hello правила обрабатываются в порядке hello они идут в тексте запроса hello, рекомендуется указать что hello наиболее строгие правила с учитывают tooorigins сначала в списке hello, чтобы они вычисляются первыми.</span><span class="sxs-lookup"><span data-stu-id="ef34c-180">Since hello rules are processed in hello order they are present in hello request body, best practices recommend that you specify hello most restrictive rules with respect tooorigins first in hello list, so that these are evaluated first.</span></span> <span data-ttu-id="ef34c-181">Укажите правила, которые менее строгие например, правило tooallow все источники, указывайте в конце списка hello в hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-181">Specify rules that are less restrictive – for example, a rule tooallow all origins – at hello end of hello list.</span></span>

### <a name="example--cors-rules-evaluation"></a><span data-ttu-id="ef34c-182">Пример: проверка соответствия правилам CORS</span><span class="sxs-lookup"><span data-stu-id="ef34c-182">Example – CORS rules evaluation</span></span>
<span data-ttu-id="ef34c-183">Hello примере показан частичный текст запроса для операции правила CORS tooset для служб хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-183">hello following example shows a partial request body for an operation tooset CORS rules for hello storage services.</span></span> <span data-ttu-id="ef34c-184">В разделе [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [набор свойств службы очередей](https://msdn.microsoft.com/library/hh452232.aspx), и [набор свойств службы таблиц](https://msdn.microsoft.com/library/hh452240.aspx) подробные сведения о построении запроса hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-184">See [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), and [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx) for details on constructing hello request.</span></span>

```xml
<Cors>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>PUT,HEAD</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>*</AllowedOrigins>
        <AllowedMethods>PUT,GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-blob-content-type, x-ms-blob-content-disposition</AllowedHeaders>
    </CorsRule>
    <CorsRule>
        <AllowedOrigins>http://www.contoso.com</AllowedOrigins>
        <AllowedMethods>GET</AllowedMethods>
        <MaxAgeInSeconds>5</MaxAgeInSeconds>
        <ExposedHeaders>x-ms-*</ExposedHeaders>
        <AllowedHeaders>x-ms-client-request-id</AllowedHeaders>
    </CorsRule>
</Cors>
```

<span data-ttu-id="ef34c-185">Теперь рассмотрим следующие запросы CORS hello:</span><span class="sxs-lookup"><span data-stu-id="ef34c-185">Next, consider hello following CORS requests:</span></span>

| <span data-ttu-id="ef34c-186">Запрос</span><span class="sxs-lookup"><span data-stu-id="ef34c-186">Request</span></span> |  |  | <span data-ttu-id="ef34c-187">Ответ</span><span class="sxs-lookup"><span data-stu-id="ef34c-187">Response</span></span> |  |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="ef34c-188">**Метод**</span><span class="sxs-lookup"><span data-stu-id="ef34c-188">**Method**</span></span> |<span data-ttu-id="ef34c-189">**Исходный домен**</span><span class="sxs-lookup"><span data-stu-id="ef34c-189">**Origin**</span></span> |<span data-ttu-id="ef34c-190">**Заголовки запроса**</span><span class="sxs-lookup"><span data-stu-id="ef34c-190">**Request Headers**</span></span> |<span data-ttu-id="ef34c-191">**Проверяемое правило**</span><span class="sxs-lookup"><span data-stu-id="ef34c-191">**Rule Match**</span></span> |<span data-ttu-id="ef34c-192">**Результат**</span><span class="sxs-lookup"><span data-stu-id="ef34c-192">**Result**</span></span> |
| <span data-ttu-id="ef34c-193">**PUT**</span><span class="sxs-lookup"><span data-stu-id="ef34c-193">**PUT**</span></span> |<span data-ttu-id="ef34c-194">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="ef34c-194">http://www.contoso.com</span></span> |<span data-ttu-id="ef34c-195">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="ef34c-195">x-ms-blob-content-type</span></span> |<span data-ttu-id="ef34c-196">Первое правило</span><span class="sxs-lookup"><span data-stu-id="ef34c-196">First rule</span></span> |<span data-ttu-id="ef34c-197">Успешно</span><span class="sxs-lookup"><span data-stu-id="ef34c-197">Success</span></span> |
| <span data-ttu-id="ef34c-198">**GET**</span><span class="sxs-lookup"><span data-stu-id="ef34c-198">**GET**</span></span> |<span data-ttu-id="ef34c-199">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="ef34c-199">http://www.contoso.com</span></span> |<span data-ttu-id="ef34c-200">x-ms-blob-content-type</span><span class="sxs-lookup"><span data-stu-id="ef34c-200">x-ms-blob-content-type</span></span> |<span data-ttu-id="ef34c-201">Второе правило</span><span class="sxs-lookup"><span data-stu-id="ef34c-201">Second rule</span></span> |<span data-ttu-id="ef34c-202">Успешно</span><span class="sxs-lookup"><span data-stu-id="ef34c-202">Success</span></span> |
| <span data-ttu-id="ef34c-203">**GET**</span><span class="sxs-lookup"><span data-stu-id="ef34c-203">**GET**</span></span> |<span data-ttu-id="ef34c-204">http://www.contoso.com</span><span class="sxs-lookup"><span data-stu-id="ef34c-204">http://www.contoso.com</span></span> |<span data-ttu-id="ef34c-205">x-ms-client-request-id</span><span class="sxs-lookup"><span data-stu-id="ef34c-205">x-ms-client-request-id</span></span> |<span data-ttu-id="ef34c-206">Второе правило</span><span class="sxs-lookup"><span data-stu-id="ef34c-206">Second rule</span></span> |<span data-ttu-id="ef34c-207">Сбой</span><span class="sxs-lookup"><span data-stu-id="ef34c-207">Failure</span></span> |

<span data-ttu-id="ef34c-208">Hello первый запрос соответствует первому правилу hello — hello исходный домен соответствует hello допускается источников, метод hello соответствует допускается методы hello и hello заголовок соответствует допустимые заголовки — hello и поэтому завершается успешно.</span><span class="sxs-lookup"><span data-stu-id="ef34c-208">hello first request matches hello first rule – hello origin domain matches hello allowed origins, hello method matches hello allowed methods, and hello header matches hello allowed headers – and so succeeds.</span></span>

<span data-ttu-id="ef34c-209">второй запрос Hello не соответствует первое правило hello несовпадения метод hello hello допускается методы.</span><span class="sxs-lookup"><span data-stu-id="ef34c-209">hello second request does not match hello first rule because hello method does not match hello allowed methods.</span></span> <span data-ttu-id="ef34c-210">Тем не менее, соответствие hello второе правило, поэтому она успешно.</span><span class="sxs-lookup"><span data-stu-id="ef34c-210">It does, however, match hello second rule, so it succeeds.</span></span>

<span data-ttu-id="ef34c-211">Hello третьего запроса соответствует второму правилу hello исходный домен и метод, поэтому вычисляются другим правилам.</span><span class="sxs-lookup"><span data-stu-id="ef34c-211">hello third request matches hello second rule in its origin domain and method, so no further rules are evaluated.</span></span> <span data-ttu-id="ef34c-212">Здравствуйте, однако *заголовок x-ms клиент request-id* не разрешается в hello второе правило, поэтому hello запрос завершается ошибкой, несмотря на то что семантика hello hello третьего правила позволила бы ему toosucceed фактов hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-212">However, hello *x-ms-client-request-id header* is not allowed by hello second rule, so hello request fails, despite hello fact that hello semantics of hello third rule would have allowed it toosucceed.</span></span>

> [!NOTE]
> <span data-ttu-id="ef34c-213">Несмотря на то, что в этом примере показано менее строгое правило стоит перед более строгим, в целом hello рекомендуется наиболее строгие правила hello toolist сначала.</span><span class="sxs-lookup"><span data-stu-id="ef34c-213">Although this example shows a less restrictive rule before a more restrictive one, in general hello best practice is toolist hello most restrictive rules first.</span></span>
> 
> 

## <a name="understanding-how-hello-vary-header-is-set"></a><span data-ttu-id="ef34c-214">Понимание того, как задать Заголовок Vary hello</span><span class="sxs-lookup"><span data-stu-id="ef34c-214">Understanding how hello Vary header is set</span></span>
<span data-ttu-id="ef34c-215">Hello *Vary* заголовок является стандартный заголовок HTTP/1.1, состоящая из набора полей заголовка запроса, которые сообщают hello браузеру или агенту пользователя о критериях hello, выбранные запросом hello tooprocess сервера hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-215">hello *Vary* header is a standard HTTP/1.1 header consisting of a set of request header fields that advise hello browser or user agent about hello criteria that were selected by hello server tooprocess hello request.</span></span> <span data-ttu-id="ef34c-216">Hello *Vary* заголовок используется главным образом для кэширования, учетные записи-посредники, браузеры и CDN, которые используют его toodetermine кэширования ответа hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-216">hello *Vary* header is mainly used for caching by proxies, browsers, and CDNs, which use it toodetermine how hello response should be cached.</span></span> <span data-ttu-id="ef34c-217">Дополнительные сведения см. спецификацию hello для hello [заголовка Vary](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span><span class="sxs-lookup"><span data-stu-id="ef34c-217">For details, see hello specification for hello [Vary header](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).</span></span>

<span data-ttu-id="ef34c-218">Когда hello браузер или другой агент пользователя кэширует hello ответ на запрос CORS, hello исходный домен кэшируется как hello допускается источника.</span><span class="sxs-lookup"><span data-stu-id="ef34c-218">When hello browser or another user agent caches hello response from a CORS request, hello origin domain is cached as hello allowed origin.</span></span> <span data-ttu-id="ef34c-219">Когда второй проблемы домена Здравствуйте же запрос ресурса хранилища, когда hello кэш активен, hello агент пользователя Получает кэшированный исходный домен hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-219">When a second domain issues hello same request for a storage resource while hello cache is active, hello user agent retrieves hello cached origin domain.</span></span> <span data-ttu-id="ef34c-220">второй домен Hello не соответствует кэшированному домену hello, поэтому hello запрос завершается ошибкой, он бы в противном случае успешно.</span><span class="sxs-lookup"><span data-stu-id="ef34c-220">hello second domain does not match hello cached domain, so hello request fails when it would otherwise succeed.</span></span> <span data-ttu-id="ef34c-221">В некоторых случаях хранилище Azure задает заголовок Vary hello, слишком**источника** tooinstruct hello пользователя агента toosend hello последующих CORS запроса toohello службы при запросе домена отличается от hello hello кэшировании источника.</span><span class="sxs-lookup"><span data-stu-id="ef34c-221">In certain cases, Azure Storage sets hello Vary header too**Origin** tooinstruct hello user agent toosend hello subsequent CORS request toohello service when hello requesting domain differs from hello cached origin.</span></span>

<span data-ttu-id="ef34c-222">Хранилище Azure задает hello *Vary* заголовок слишком**источника** для фактических запросов GET/HEAD в следующих случаях hello:</span><span class="sxs-lookup"><span data-stu-id="ef34c-222">Azure Storage sets hello *Vary* header too**Origin** for actual GET/HEAD requests in hello following cases:</span></span>

* <span data-ttu-id="ef34c-223">Когда запрос hello источника точно соответствует hello может источника определяется правилом CORS.</span><span class="sxs-lookup"><span data-stu-id="ef34c-223">When hello request origin exactly matches hello allowed origin defined by a CORS rule.</span></span> <span data-ttu-id="ef34c-224">toobe точное соответствие правилу CORS hello не может содержать подстановочные знаки "*" символов.</span><span class="sxs-lookup"><span data-stu-id="ef34c-224">toobe an exact match, hello CORS rule may not include a wildcard ' * ' character.</span></span>
* <span data-ttu-id="ef34c-225">Нет не источник запроса hello соответствующие правила, но включен CORS для службы хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="ef34c-225">There is no rule matching hello request origin, but CORS is enabled for hello storage service.</span></span>

<span data-ttu-id="ef34c-226">В случае hello, где запрос GET/HEAD соответствует правилу CORS, которое допускает все источники ответ hello указывает, что все источники разрешены и hello кэш агента пользователя будет разрешать последующие запросы из любого домена-источника, когда hello кэш активен.</span><span class="sxs-lookup"><span data-stu-id="ef34c-226">In hello case where a GET/HEAD request matches a CORS rule that allows all origins, hello response indicates that all origins are allowed, and hello user agent cache will allow subsequent requests from any origin domain while hello cache is active.</span></span>

<span data-ttu-id="ef34c-227">Обратите внимание, что для запросов, использующих методы, отличные от GET или HEAD, hello службы хранилища не будет устанавливать Заголовок Vary hello, так как методы toothese ответы не кэшируются агентами пользователя.</span><span class="sxs-lookup"><span data-stu-id="ef34c-227">Note that for requests using methods other than GET/HEAD, hello storage services will not set hello Vary header, since responses toothese methods are not cached by user agents.</span></span>

<span data-ttu-id="ef34c-228">Hello в этой таблице перечислены как хранилище Azure будет отвечать tooGET-запросы HEAD в hello ранее упомянутых случаях:</span><span class="sxs-lookup"><span data-stu-id="ef34c-228">hello following table indicates how Azure storage will respond tooGET/HEAD requests based on hello previously mentioned cases:</span></span>

| <span data-ttu-id="ef34c-229">Запрос</span><span class="sxs-lookup"><span data-stu-id="ef34c-229">Request</span></span> | <span data-ttu-id="ef34c-230">Настройка учетной записи и результат проверки соответствия правилу</span><span class="sxs-lookup"><span data-stu-id="ef34c-230">Account setting and result of rule evaluation</span></span> |  |  | <span data-ttu-id="ef34c-231">Ответ</span><span class="sxs-lookup"><span data-stu-id="ef34c-231">Response</span></span> |  |  |
| --- | --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="ef34c-232">**Заголовок исходного домена есть в запросе**</span><span class="sxs-lookup"><span data-stu-id="ef34c-232">**Origin header present on request**</span></span> |<span data-ttu-id="ef34c-233">**Правила CORS, заданные для этой службы**</span><span class="sxs-lookup"><span data-stu-id="ef34c-233">**CORS rule(s) specified for this service**</span></span> |<span data-ttu-id="ef34c-234">**Существует соответствующее правило, которое допускает все исходные домены(*)**</span><span class="sxs-lookup"><span data-stu-id="ef34c-234">**Matching rule exists that allows all origins(*)**</span></span> |<span data-ttu-id="ef34c-235">**Существует соответствующее правило для точно совпадающего исходного домена**</span><span class="sxs-lookup"><span data-stu-id="ef34c-235">**Matching rule exists for exact origin match**</span></span> |<span data-ttu-id="ef34c-236">**Ответ включает tooOrigin набор заголовка Vary**</span><span class="sxs-lookup"><span data-stu-id="ef34c-236">**Response includes Vary header set tooOrigin**</span></span> |<span data-ttu-id="ef34c-237">**Ответ содержит Access-Control-Allowed-Origin: "*"**</span><span class="sxs-lookup"><span data-stu-id="ef34c-237">**Response includes Access-Control-Allowed-Origin: "*"**</span></span> |<span data-ttu-id="ef34c-238">**Ответ содержит Access-Control-Exposed-Headers**</span><span class="sxs-lookup"><span data-stu-id="ef34c-238">**Response includes Access-Control-Exposed-Headers**</span></span> |
| <span data-ttu-id="ef34c-239">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-239">No</span></span> |<span data-ttu-id="ef34c-240">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-240">No</span></span> |<span data-ttu-id="ef34c-241">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-241">No</span></span> |<span data-ttu-id="ef34c-242">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-242">No</span></span> |<span data-ttu-id="ef34c-243">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-243">No</span></span> |<span data-ttu-id="ef34c-244">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-244">No</span></span> |<span data-ttu-id="ef34c-245">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-245">No</span></span> |
| <span data-ttu-id="ef34c-246">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-246">No</span></span> |<span data-ttu-id="ef34c-247">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-247">Yes</span></span> |<span data-ttu-id="ef34c-248">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-248">No</span></span> |<span data-ttu-id="ef34c-249">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-249">No</span></span> |<span data-ttu-id="ef34c-250">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-250">Yes</span></span> |<span data-ttu-id="ef34c-251">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-251">No</span></span> |<span data-ttu-id="ef34c-252">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-252">No</span></span> |
| <span data-ttu-id="ef34c-253">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-253">No</span></span> |<span data-ttu-id="ef34c-254">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-254">Yes</span></span> |<span data-ttu-id="ef34c-255">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-255">Yes</span></span> |<span data-ttu-id="ef34c-256">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-256">No</span></span> |<span data-ttu-id="ef34c-257">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-257">No</span></span> |<span data-ttu-id="ef34c-258">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-258">Yes</span></span> |<span data-ttu-id="ef34c-259">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-259">Yes</span></span> |
| <span data-ttu-id="ef34c-260">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-260">Yes</span></span> |<span data-ttu-id="ef34c-261">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-261">No</span></span> |<span data-ttu-id="ef34c-262">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-262">No</span></span> |<span data-ttu-id="ef34c-263">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-263">No</span></span> |<span data-ttu-id="ef34c-264">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-264">No</span></span> |<span data-ttu-id="ef34c-265">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-265">No</span></span> |<span data-ttu-id="ef34c-266">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-266">No</span></span> |
| <span data-ttu-id="ef34c-267">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-267">Yes</span></span> |<span data-ttu-id="ef34c-268">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-268">Yes</span></span> |<span data-ttu-id="ef34c-269">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-269">No</span></span> |<span data-ttu-id="ef34c-270">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-270">Yes</span></span> |<span data-ttu-id="ef34c-271">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-271">Yes</span></span> |<span data-ttu-id="ef34c-272">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-272">No</span></span> |<span data-ttu-id="ef34c-273">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-273">Yes</span></span> |
| <span data-ttu-id="ef34c-274">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-274">Yes</span></span> |<span data-ttu-id="ef34c-275">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-275">Yes</span></span> |<span data-ttu-id="ef34c-276">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-276">No</span></span> |<span data-ttu-id="ef34c-277">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-277">No</span></span> |<span data-ttu-id="ef34c-278">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-278">Yes</span></span> |<span data-ttu-id="ef34c-279">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-279">No</span></span> |<span data-ttu-id="ef34c-280">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-280">No</span></span> |
| <span data-ttu-id="ef34c-281">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-281">Yes</span></span> |<span data-ttu-id="ef34c-282">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-282">Yes</span></span> |<span data-ttu-id="ef34c-283">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-283">Yes</span></span> |<span data-ttu-id="ef34c-284">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-284">No</span></span> |<span data-ttu-id="ef34c-285">Нет</span><span class="sxs-lookup"><span data-stu-id="ef34c-285">No</span></span> |<span data-ttu-id="ef34c-286">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-286">Yes</span></span> |<span data-ttu-id="ef34c-287">Да</span><span class="sxs-lookup"><span data-stu-id="ef34c-287">Yes</span></span> |

## <a name="billing-for-cors-requests"></a><span data-ttu-id="ef34c-288">Выставление счетов за запросы CORS</span><span class="sxs-lookup"><span data-stu-id="ef34c-288">Billing for CORS requests</span></span>
<span data-ttu-id="ef34c-289">Успешные предварительные запросы взимается плата, если вы включили CORS для любых служб хранилища hello для вашей учетной записи (вызвав [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [набор свойств службы очередей](https://msdn.microsoft.com/library/hh452232.aspx), или [ Задание свойств службы таблиц](https://msdn.microsoft.com/library/hh452240.aspx)).</span><span class="sxs-lookup"><span data-stu-id="ef34c-289">Successful preflight requests are billed if you have enabled CORS for any of hello storage services for your account (by calling [Set Blob Service Properties](https://msdn.microsoft.com/library/hh452235.aspx), [Set Queue Service Properties](https://msdn.microsoft.com/library/hh452232.aspx), or [Set Table Service Properties](https://msdn.microsoft.com/library/hh452240.aspx)).</span></span> <span data-ttu-id="ef34c-290">toominimize издержки, следует рассмотреть возможность установки hello **MaxAgeInSeconds** элемент в CORS правила tooa больших значений, чтобы hello агент пользователя кэширует hello запроса.</span><span class="sxs-lookup"><span data-stu-id="ef34c-290">toominimize charges, consider setting hello **MaxAgeInSeconds** element in your CORS rules tooa large value so that hello user agent caches hello request.</span></span>

<span data-ttu-id="ef34c-291">За невыполненные предварительные запросы плата не взимается.</span><span class="sxs-lookup"><span data-stu-id="ef34c-291">Unsuccessful preflight requests will not be billed.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ef34c-292">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="ef34c-292">Next steps</span></span>
[<span data-ttu-id="ef34c-293">Задание свойств службы BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="ef34c-293">Set Blob Service Properties</span></span>](https://msdn.microsoft.com/library/hh452235.aspx)

[<span data-ttu-id="ef34c-294">Задание свойств службы очередей</span><span class="sxs-lookup"><span data-stu-id="ef34c-294">Set Queue Service Properties</span></span>](https://msdn.microsoft.com/library/hh452232.aspx)

[<span data-ttu-id="ef34c-295">Задание свойств службы таблиц</span><span class="sxs-lookup"><span data-stu-id="ef34c-295">Set Table Service Properties</span></span>](https://msdn.microsoft.com/library/hh452240.aspx)

[<span data-ttu-id="ef34c-296">Спецификация общего доступа к ресурсам, независимо от источника W3C</span><span class="sxs-lookup"><span data-stu-id="ef34c-296">W3C Cross-Origin Resource Sharing Specification</span></span>](http://www.w3.org/TR/cors/)

