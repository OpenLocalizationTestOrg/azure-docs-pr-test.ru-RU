---
title: "Использование Azure CDN для доступа к BLOB-объектам с помощью личных доменов по протоколу HTTPS"
description: "Сведения об интеграции Azure CDN с хранилищем BLOB-объектов для доступа к BLOB-объектам с помощью личных доменов по протоколу HTTPS"
services: storage
documentationcenter: 
author: michaelhauss
manager: vamshik
editor: tysonn
ms.assetid: 
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/04/2017
ms.author: mihauss
ms.openlocfilehash: 6bad04df324a374f6e8473890345cf516322abd6
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="using-the-azure-cdn-to-access-blobs-with-custom-domains-over-https"></a><span data-ttu-id="d16d2-103">Использование Azure CDN для доступа к BLOB-объектам с помощью личных доменов по протоколу HTTPS</span><span class="sxs-lookup"><span data-stu-id="d16d2-103">Using the Azure CDN to access blobs with custom domains over HTTPS</span></span>

<span data-ttu-id="d16d2-104">Сеть доставки содержимого (CDN) Azure теперь поддерживает HTTPS для имен личных доменов.</span><span class="sxs-lookup"><span data-stu-id="d16d2-104">Azure Content Delivery Network (CDN) now supports HTTPS for custom domain names.</span></span>
<span data-ttu-id="d16d2-105">Вы можете использовать эту функцию, чтобы получить доступ к BLOB-объектам в хранилище с помощью личного домена по протоколу HTTPS.</span><span class="sxs-lookup"><span data-stu-id="d16d2-105">You can leverage this feature to access storage blobs using your custom domain over HTTPS.</span></span> <span data-ttu-id="d16d2-106">Для этого сначала необходимо включить Azure CDN для конечной точки BLOB-объектов и сопоставить сеть доставки содержимого с именем личного домена.</span><span class="sxs-lookup"><span data-stu-id="d16d2-106">To do so, you’ll first need to enable Azure CDN on your blob endpoint and map the CDN to a custom domain name.</span></span> <span data-ttu-id="d16d2-107">После выполнения этих действий включение поддержки протокола HTTPS для личного домена значительно упрощается благодаря включению одним щелчком, комплексному управлению сертификатами в рамках обычных расценок Azure CDN без дополнительных затрат.</span><span class="sxs-lookup"><span data-stu-id="d16d2-107">Once you take these steps, enabling HTTPS for your custom domain is simplified via one-click enablement, complete certificate management, and all with no additional cost to normal CDN pricing.</span></span>

<span data-ttu-id="d16d2-108">Эта возможность важна, так как позволяет защитить конфиденциальность и целостность данных веб-приложений в процессе их передачи.</span><span class="sxs-lookup"><span data-stu-id="d16d2-108">This ability is important because it enables you to protect the privacy and data integrity of your sensitive web application data while in transit.</span></span> <span data-ttu-id="d16d2-109">Использование протокола SSL для обслуживания трафика по HTTPS обеспечивает шифрование данных при их передаче через Интернет.</span><span class="sxs-lookup"><span data-stu-id="d16d2-109">Using the SSL protocol to serve traffic via HTTPS ensures that data is encrypted when it is sent across the internet.</span></span> <span data-ttu-id="d16d2-110">Протокол HTTPS обеспечивает доверие, аутентификацию и защиту веб-приложений от атак.</span><span class="sxs-lookup"><span data-stu-id="d16d2-110">HTTPS provides trust and authentication, and protects your web applications from attacks.</span></span>

> [!NOTE]
> <span data-ttu-id="d16d2-111">Помимо поддержки SSL для имен личных доменов, Azure CDN помогает масштабировать приложение для быстрой доставки содержимого по всему миру.</span><span class="sxs-lookup"><span data-stu-id="d16d2-111">In addition to providing SSL support for custom domain names, the Azure CDN can help you scale your application to deliver high-bandwidth content around the world.</span></span>
> <span data-ttu-id="d16d2-112">Для получения дополнительных сведений ознакомьтесь с [обзором Azure CDN](../../cdn/cdn-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-112">To learn more, check out [Overview of the Azure CDN](../../cdn/cdn-overview.md).</span></span>
>
>

## <a name="quick-start"></a><span data-ttu-id="d16d2-113">Быстрый запуск</span><span class="sxs-lookup"><span data-stu-id="d16d2-113">Quick start</span></span>

<span data-ttu-id="d16d2-114">В следующих статьях приведены шаги, необходимые для включения протокола HTTPS для конечной точки вашего собственного хранилища BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="d16d2-114">These are the steps required to enable HTTPS for your custom blob storage endpoint:</span></span>

1.  <span data-ttu-id="d16d2-115">[Интеграция учетной записи хранения Azure с Azure CDN](../../cdn/cdn-create-a-storage-account-with-cdn.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-115">[Integrate an Azure storage account with Azure CDN](../../cdn/cdn-create-a-storage-account-with-cdn.md).</span></span>
    <span data-ttu-id="d16d2-116">В этой статье приводится пошаговая процедура создания учетной записи хранения на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="d16d2-116">This article walks you through creating a storage account in the Azure Portal if you have not done so already.</span></span>
2.  <span data-ttu-id="d16d2-117">[Сопоставление содержимого Azure CDN с личным доменом](../../cdn/cdn-map-content-to-custom-domain.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-117">[Map Azure CDN content to a custom domain](../../cdn/cdn-map-content-to-custom-domain.md).</span></span>
3.  <span data-ttu-id="d16d2-118">[Включение протокола HTTPS для личного домена Azure CDN](../../cdn/cdn-custom-ssl.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-118">[Enable HTTPS on an Azure CDN custom domain](../../cdn/cdn-custom-ssl.md).</span></span>

## <a name="shared-access-signatures"></a><span data-ttu-id="d16d2-119">Подписи коллективного доступа</span><span class="sxs-lookup"><span data-stu-id="d16d2-119">Shared Access Signatures</span></span>

<span data-ttu-id="d16d2-120">Если для конечной точки хранилища BLOB-объектов настроен запрет анонимного доступа для чтения, необходимо предоставить токен [подписанного URL-адреса (SAS)](../common/storage-dotnet-shared-access-signature-part-1.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) в каждом запросе к личному домену.</span><span class="sxs-lookup"><span data-stu-id="d16d2-120">If your blob storage endpoint is configured to disallow anonymous read access, you will need to provide a [Shared Access Signature (SAS)](../common/storage-dotnet-shared-access-signature-part-1.md?toc=%2fazure%2fstorage%2fblobs%2ftoc.json) token in each request you make to your custom domain.</span></span> <span data-ttu-id="d16d2-121">По умолчанию конечные точки хранилища BLOB-объектов запрещают анонимный доступ для чтения.</span><span class="sxs-lookup"><span data-stu-id="d16d2-121">By default, blob storage endpoints disallow anonymous read access.</span></span> <span data-ttu-id="d16d2-122">Дополнительные сведения о подписанных URL-адресах см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](storage-manage-access-to-resources.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-122">See [Managing anonymous read access to containers and blobs](storage-manage-access-to-resources.md) for more information on shared access signatures.</span></span>

<span data-ttu-id="d16d2-123">Azure CDN не учитывает ограничения, добавленные в токен SAS.</span><span class="sxs-lookup"><span data-stu-id="d16d2-123">Azure CDN does not respect any restrictions added to the SAS token.</span></span> <span data-ttu-id="d16d2-124">Например, все токены SAS имеют срок действия.</span><span class="sxs-lookup"><span data-stu-id="d16d2-124">For example, all SAS tokens have an expiration time.</span></span> <span data-ttu-id="d16d2-125">Это означает, что доступ к содержимому по-прежнему может осуществляться с помощью SAS с истекшим сроком действия, пока это содержимое не будет удалено с граничных узлов сети доставки содержимого.</span><span class="sxs-lookup"><span data-stu-id="d16d2-125">This means that content can still be accessed with an expired SAS until that content is purged from the CDN edge nodes.</span></span> <span data-ttu-id="d16d2-126">Вы можете контролировать срок кэширования данных в сети CDN, задав заголовок ответа кэша.</span><span class="sxs-lookup"><span data-stu-id="d16d2-126">You can control how long data is cached on the CDN by setting the cache response header.</span></span> <span data-ttu-id="d16d2-127">См. статью [Управление сроком действия больших двоичных объектов службы хранилища Azure в Azure CDN](../../cdn/cdn-manage-expiration-of-blob-content.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-127">See [Managing expiration of Azure Storage blobs in Azure CDN](../../cdn/cdn-manage-expiration-of-blob-content.md) for instructions.</span></span>

<span data-ttu-id="d16d2-128">При создании нескольких подписанных URL-адресов для одной и той же конечной точки BLOB-объектов рекомендуется включить кэширование строк запросов для Azure CDN.</span><span class="sxs-lookup"><span data-stu-id="d16d2-128">If you create multiple SAS URLs for the same blob endpoint, we recommend turning on query string caching for your Azure CDN.</span></span> <span data-ttu-id="d16d2-129">Это гарантирует, что каждый URL-адрес будет рассматриваться как уникальная сущность.</span><span class="sxs-lookup"><span data-stu-id="d16d2-129">This is to ensure that each URL is treated as a unique entity.</span></span> <span data-ttu-id="d16d2-130">Дополнительные сведения см. в статье [Управление режимом кэширования Azure CDN с помощью строк запросов](../../cdn/cdn-query-string.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-130">See [Controlling Azure CDN caching behavior with query strings](../../cdn/cdn-query-string.md) for more information.</span></span>

## <a name="http-to-https-redirection"></a><span data-ttu-id="d16d2-131">Перенаправление трафика HTTP в HTTPS</span><span class="sxs-lookup"><span data-stu-id="d16d2-131">HTTP to HTTPS redirection</span></span>

<span data-ttu-id="d16d2-132">Вы можете настроить перенаправление трафика HTTP в HTTPS.</span><span class="sxs-lookup"><span data-stu-id="d16d2-132">You can elect to redirect HTTP traffic to HTTPS.</span></span> <span data-ttu-id="d16d2-133">Это потребует использования предложения Azure CDN Premium от компании Verizon.</span><span class="sxs-lookup"><span data-stu-id="d16d2-133">This requires use of the Azure CDN premium offering from Verizon.</span></span> <span data-ttu-id="d16d2-134">Вам потребуется [переопределить режим HTTP с помощью обработчика правил Azure CDN](../../cdn/cdn-rules-engine.md), используя следующее правило:</span><span class="sxs-lookup"><span data-stu-id="d16d2-134">You need to [Override HTTP behavior using the Azure CDN rules engine](../../cdn/cdn-rules-engine.md) with the following rule:</span></span>

![](./media/storage-https-custom-domain-cdn/redirect-to-https.png)

<span data-ttu-id="d16d2-135">Cdn-endpoint-name относится к имени, настроенному для конечной точки CDN.</span><span class="sxs-lookup"><span data-stu-id="d16d2-135">“Cdn-endpoint-name” refers to the name that you configured for your CDN endpoint.</span></span> <span data-ttu-id="d16d2-136">Это значение можно выбрать в раскрывающемся списке.</span><span class="sxs-lookup"><span data-stu-id="d16d2-136">You can select this value from the dropdown.</span></span> <span data-ttu-id="d16d2-137">Origin-path относится к пути в вашей учетной записи хранения-источнике, в которой размещается статическое содержимое.</span><span class="sxs-lookup"><span data-stu-id="d16d2-137">“Origin-path” refers to the path within your origin storage account where your static content resides.</span></span>
<span data-ttu-id="d16d2-138">Если все статическое содержимое размещается в одном контейнере, замените origin-path именем этого контейнера.</span><span class="sxs-lookup"><span data-stu-id="d16d2-138">If you are hosting all static content in a single container, replace “origin-path” with the name of that container.</span></span>

<span data-ttu-id="d16d2-139">Более подробно правила рассматриваются в статье [Функции обработчика правил Azure CDN](../../cdn/cdn-rules-engine-reference-features.md).</span><span class="sxs-lookup"><span data-stu-id="d16d2-139">For a deeper dive into rules, please see the [Azure CDN rules engine features](../../cdn/cdn-rules-engine-reference-features.md).</span></span>

## <a name="pricing-and-billing"></a><span data-ttu-id="d16d2-140">Цены и выставление счетов</span><span class="sxs-lookup"><span data-stu-id="d16d2-140">Pricing and billing</span></span>

<span data-ttu-id="d16d2-141">При доступе к BLOB-объектам через Azure CDN вы оплачиваете трафик между граничными узлами и источником по [расценкам хранилища BLOB-объектов](https://azure.microsoft.com/pricing/details/storage/blobs/), а данные, доступ к которым получаете из граничных узлов, — по [расценкам CDN](https://azure.microsoft.com/pricing/details/cdn/).</span><span class="sxs-lookup"><span data-stu-id="d16d2-141">When you access blobs through an Azure CDN, you pay [Blob storage prices](https://azure.microsoft.com/pricing/details/storage/blobs/) for traffic between the edge nodes and the origin (Blob storage), and [CDN prices](https://azure.microsoft.com/pricing/details/cdn/) for data accessed from the edge nodes.</span></span>

<span data-ttu-id="d16d2-142">Например, предположим, что у вас есть учетная запись хранения в регионе "Западная часть США", доступ к которой осуществляется с помощью Azure CDN.</span><span class="sxs-lookup"><span data-stu-id="d16d2-142">For example, say you have a storage account in West US that is being accessed using an Azure CDN.</span></span> <span data-ttu-id="d16d2-143">Если пользователь в Великобритании пытается получить доступ к одному из BLOB-объектов в этой учетной записи хранения через сеть CDN, Azure сначала пытается найти граничный узел для этого BLOB-объекта, ближайший к Великобритании.</span><span class="sxs-lookup"><span data-stu-id="d16d2-143">If someone in the UK tries to access one of the blobs in that storage account via the CDN, Azure first checks the edge node closest to the UK for that blob.</span></span> <span data-ttu-id="d16d2-144">Если он найден, система обращается к этой копии большого двоичного объекта и будет использовать расценки CDN, так как доступ к нему осуществляется через сеть CDN.</span><span class="sxs-lookup"><span data-stu-id="d16d2-144">If found, it accesses that copy of the blob and will use CDN pricing, because it is being accessed on the CDN.</span></span> <span data-ttu-id="d16d2-145">В противном случае Azure скопирует большой двоичный объект на граничный узел, что повлечет за собой начисление платы за транзакции и исходящий трафик (как указано в расценках хранилища BLOB-объектов), а затем обратится к файлу на граничном узле, за что будет начислена плата по расценкам CDN.</span><span class="sxs-lookup"><span data-stu-id="d16d2-145">If not found, Azure will copy the blob to the edge node, which will result in egress and transaction charges as specified in the Blob storage pricing, and then access the file on the edge node, which will result in CDN billing.</span></span>

<span data-ttu-id="d16d2-146">При изучении [страницы расценок CDN](https://azure.microsoft.com/pricing/details/cdn/) обратите внимание, что поддержка HTTPS для имен личных доменов доступна только для продуктов Azure CDN от Verizon (Standard и Premium).</span><span class="sxs-lookup"><span data-stu-id="d16d2-146">When looking at the [CDN pricing page](https://azure.microsoft.com/pricing/details/cdn/), note that HTTPS support for custom domain names is only available for Azure CDN from Verizon products (Standard and Premium).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d16d2-147">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d16d2-147">Next steps</span></span>

[<span data-ttu-id="d16d2-148">Настройка имени личного домена для конечной точки хранилища BLOB-объектов</span><span class="sxs-lookup"><span data-stu-id="d16d2-148">Configure a custom domain name for your Blob storage endpoint</span></span>](storage-custom-domain-name.md)
