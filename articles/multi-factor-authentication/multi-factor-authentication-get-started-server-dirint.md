---
title: "Интеграция каталогов между сервером Azure Multi-Factor Authentication и Active Directory"
description: "На этой странице описана процедура интеграции сервера Azure Multi-Factor Authentication c Active Directory для синхронизации каталогов."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: def7a534-cfb2-492a-9124-87fb1148ab1f
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: it-pro
ms.openlocfilehash: c469dfaccf515bcd1ced43279decfefe6be8375b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="directory-integration-between-azure-mfa-server-and-active-directory"></a><span data-ttu-id="8ebcb-103">Интеграция каталогов между сервером Azure Multi-Factor Authentication и Active Directory</span><span class="sxs-lookup"><span data-stu-id="8ebcb-103">Directory integration between Azure MFA Server and Active Directory</span></span>
<span data-ttu-id="8ebcb-104">Воспользуйтесь разделом "Интеграция каталогов" сервера Многофакторной идентификации Azure для интеграции с Active Directory или другим каталогом LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-104">Use the Directory Integration section of the Azure MFA Server to integrate with Active Directory or another LDAP directory.</span></span> <span data-ttu-id="8ebcb-105">Вы сможете настроить атрибуты в соответствии со схемой каталога и автоматическую синхронизацию пользователей.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-105">You can configure attributes to match the directory schema and set up automatic user synchronization.</span></span>

## <a name="settings"></a><span data-ttu-id="8ebcb-106">Параметры</span><span class="sxs-lookup"><span data-stu-id="8ebcb-106">Settings</span></span>
<span data-ttu-id="8ebcb-107">По умолчанию на сервере Многофакторной идентификации Azure настроен импорт или синхронизация пользователей из Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-107">By default, the Azure Multi-Factor Authentication (MFA) Server is configured to import or synchronize users from Active Directory.</span></span>  <span data-ttu-id="8ebcb-108">На вкладке "Интеграция каталогов" можно переопределить поведение по умолчанию и выполнить привязку к другому каталогу LDAP, каталогу ADAM или конкретному контроллеру домена Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-108">The Directory Integration tab allows you to override the default behavior and to bind to a different LDAP directory, an ADAM directory, or specific Active Directory domain controller.</span></span>  <span data-ttu-id="8ebcb-109">На ней также можно настроить проверку подлинности LDAP для прокси-сервера LDAP или привязку LDAP в качестве целевого объекта RADIUS, а также настроить предварительную проверку подлинности для IIS и основную проверку подлинности для пользовательского портала.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-109">It also provides for the use of LDAP Authentication to proxy LDAP or for LDAP Bind as a RADIUS target, pre-authentication for IIS Authentication, or primary authentication for User Portal.</span></span>  <span data-ttu-id="8ebcb-110">В следующей таблице описаны отдельные параметры.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-110">The following table describes the individual settings.</span></span>

![Параметры](./media/multi-factor-authentication-get-started-server-dirint/dirint.png)

| <span data-ttu-id="8ebcb-112">Функция</span><span class="sxs-lookup"><span data-stu-id="8ebcb-112">Feature</span></span> | <span data-ttu-id="8ebcb-113">Описание</span><span class="sxs-lookup"><span data-stu-id="8ebcb-113">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8ebcb-114">Использовать Active Directory</span><span class="sxs-lookup"><span data-stu-id="8ebcb-114">Use Active Directory</span></span> |<span data-ttu-id="8ebcb-115">Выберите этот параметр для использования Active Directory для импорта и синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-115">Select the Use Active Directory option to use Active Directory for importing and synchronization.</span></span>  <span data-ttu-id="8ebcb-116">Это значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-116">This is the default setting.</span></span> <br><span data-ttu-id="8ebcb-117">Примечание. Для правильной интеграции с Active Directory компьютер должен быть присоединен к домену, а вы должны войти с помощью учетной записи домена.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-117">Note: For Active Directory integration to work properly,join the computer to a domain and sign in with a domain account.</span></span> |
| <span data-ttu-id="8ebcb-118">Включить доверенные домены</span><span class="sxs-lookup"><span data-stu-id="8ebcb-118">Include trusted domains</span></span> |<span data-ttu-id="8ebcb-119">Установите флажок **Включить доверенные домены**, чтобы агент пытался подключаться к доменам, которым доверяет текущий домен, другой домен в лесу или к доменам, включенным в доверие леса.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-119">Check **Include Trusted Domains** to have the agent attempt to connect to domains trusted by the current domain, another domain in the forest, or domains involved in a forest trust.</span></span>  <span data-ttu-id="8ebcb-120">Если импорт и синхронизация пользователей из доверенных доменов не используются, снимите этот флажок для повышения производительности.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-120">When not importing or synchronizing users from any of the trusted domains, uncheck the checkbox to improve performance.</span></span>  <span data-ttu-id="8ebcb-121">По умолчанию флажок установлен.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-121">The default is checked.</span></span> |
| <span data-ttu-id="8ebcb-122">Использовать заданную конфигурацию LDAP</span><span class="sxs-lookup"><span data-stu-id="8ebcb-122">Use specific LDAP configuration</span></span> |<span data-ttu-id="8ebcb-123">Выберите параметр «Использовать заданную конфигурацию LDAP» для использования заданных настроек LDAP для импорта и синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-123">Select the Use LDAP option to use the LDAP settings specified for importing and synchronization.</span></span> <span data-ttu-id="8ebcb-124">Примечание. Если выбран параметр «Использовать LDAP», пользовательский интерфейс меняет ссылки с Active Directory на LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-124">Note: When Use LDAP is selected, the user interface changes references from Active Directory to LDAP.</span></span> |
| <span data-ttu-id="8ebcb-125">Кнопка «Изменить»</span><span class="sxs-lookup"><span data-stu-id="8ebcb-125">Edit button</span></span> |<span data-ttu-id="8ebcb-126">Кнопка «Изменить» позволяет изменить текущие параметры конфигурации LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-126">The Edit button allows the current LDAP configuration settings to modified.</span></span> |
| <span data-ttu-id="8ebcb-127">Использовать запросы области атрибута</span><span class="sxs-lookup"><span data-stu-id="8ebcb-127">Use attribute scope queries</span></span> |<span data-ttu-id="8ebcb-128">Указывает, следует ли использовать запросы области атрибута.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-128">Indicates whether attribute scope queries should be used.</span></span>  <span data-ttu-id="8ebcb-129">Запросы области атрибута позволяют выполнять эффективный поиск записей в каталоге на основе записей в атрибуте другой записи.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-129">Attribute scope queries allow for efficient directory searches qualifying records based on the entries in another record's attribute.</span></span>  <span data-ttu-id="8ebcb-130">С помощью запросов области атрибута сервер Azure Multi-Factor Authentication эффективно определяет пользователей, которые являются членами группы безопасности.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-130">The Azure Multi-Factor Authentication Server uses attribute scope queries to efficiently query the users that are a member of a security group.</span></span>   <br><span data-ttu-id="8ebcb-131">Примечание. Существуют ситуации, когда запросы области атрибутов поддерживаются, но не должны использоваться.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-131">Note:  There are some cases where attribute scope queries are supported, but shouldn't be used.</span></span>  <span data-ttu-id="8ebcb-132">Например, если группа безопасности содержит пользователей из разных доменов, то в Active Directory могут возникнуть проблемы с запросами области атрибута.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-132">For example, Active Directory can have issues with attribute scope queries when a security group contains members from more than one domain.</span></span> <span data-ttu-id="8ebcb-133">В этом случае нужно снять флажок.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-133">In this case, unselect the checkbox.</span></span> |

<span data-ttu-id="8ebcb-134">В следующей таблице описаны параметры конфигурации LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-134">The following table describes the LDAP configuration settings.</span></span>

| <span data-ttu-id="8ebcb-135">Функция</span><span class="sxs-lookup"><span data-stu-id="8ebcb-135">Feature</span></span> | <span data-ttu-id="8ebcb-136">Описание</span><span class="sxs-lookup"><span data-stu-id="8ebcb-136">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8ebcb-137">сервер;</span><span class="sxs-lookup"><span data-stu-id="8ebcb-137">Server</span></span> |<span data-ttu-id="8ebcb-138">Укажите имя узла или IP-адрес сервера, содержащего каталог LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-138">Enter the hostname or IP address of the server running the LDAP directory.</span></span>  <span data-ttu-id="8ebcb-139">Также можно указать резервный сервер через точку с запятой.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-139">A backup server may also be specified separated by a semi-colon.</span></span> <br><span data-ttu-id="8ebcb-140">Примечание. Если задан тип привязки SSL, требуется указать полное имя узла.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-140">Note: When Bind Type is SSL, a fully qualified hostname is required.</span></span> |
| <span data-ttu-id="8ebcb-141">Базовое DN</span><span class="sxs-lookup"><span data-stu-id="8ebcb-141">Base DN</span></span> |<span data-ttu-id="8ebcb-142">Введите различающееся имя объекта базового каталога, с которого начинается выполнение всех запросов по каталогу.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-142">Enter the distinguished name of the base directory object from which all directory queries start.</span></span>  <span data-ttu-id="8ebcb-143">Например, dc=abc,dc=com.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-143">For example, dc=abc,dc=com.</span></span> |
| <span data-ttu-id="8ebcb-144">Тип привязки — запросы</span><span class="sxs-lookup"><span data-stu-id="8ebcb-144">Bind type - Queries</span></span> |<span data-ttu-id="8ebcb-145">Выберите тип привязки, подходящий для поиска в каталоге LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-145">Select the appropriate bind type for use when binding to search the LDAP directory.</span></span>  <span data-ttu-id="8ebcb-146">Используется для импорта, синхронизации и разрешения имен пользователей.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-146">This is used for imports, synchronization, and username resolution.</span></span> <br><br>  <span data-ttu-id="8ebcb-147">Анонимная — выполняется анонимная привязка.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-147">Anonymous - An anonymous bind is performed.</span></span>  <span data-ttu-id="8ebcb-148">Привязка DN и привязка пароля не используются.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-148">Bind DN and Bind Password are not used.</span></span>  <span data-ttu-id="8ebcb-149">Возможна, только если каталог LDAP допускает анонимную привязку и права доступа позволяют запрашивать соответствующие записи и атрибуты.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-149">This only works if the LDAP directory allows anonymous binding and permissions allow the querying of the appropriate records and attributes.</span></span>  <br><br> <span data-ttu-id="8ebcb-150">Простая — для привязки к каталогу LDAP различающееся имя привязки и пароль привязки будут передаваться обычным текстом.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-150">Simple - Bind DN and Bind Password are passed as plain text to bind to the LDAP directory.</span></span>  <span data-ttu-id="8ebcb-151">Этот вариант используется, когда нужно проверить, есть ли связь с сервером и есть ли у учетной записи привязки соответствующий доступ.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-151">This is for testing purposes, to verify that the server can be reached and that the bind account has the appropriate access.</span></span> <span data-ttu-id="8ebcb-152">Вместо этого варианта привязки следует использовать SSL после установки соответствующего сертификата.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-152">After the appropriate cert has been installed, use SSL instead.</span></span>  <br><br> <span data-ttu-id="8ebcb-153">SSL — для привязки к каталогу LDAP различающееся имя привязки и пароль привязки будут зашифрованы с помощью SSL.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-153">SSL - Bind DN and Bind Password are encrypted using SSL to bind to the LDAP directory.</span></span>  <span data-ttu-id="8ebcb-154">Выполните локальную установку сертификата, которому доверяет каталог LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-154">Install a cert locally that the LDAP directory trusts.</span></span>  <br><br> <span data-ttu-id="8ebcb-155">Windows — для безопасного подключения к контроллеру домена Active Directory или к каталогу ADAM будут использоваться имя пользователя и пароль привязки.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-155">Windows - Bind Username and Bind Password are used to securely connect to an Active Directory domain controller or ADAM directory.</span></span>  <span data-ttu-id="8ebcb-156">Если поле "Привязка имени пользователя" остается пустым, то для привязки используется учетная запись пользователя, вошедшего в систему.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-156">If Bind Username is left blank, the logged-on user's account is used to bind.</span></span> |
| <span data-ttu-id="8ebcb-157">Тип привязки — проверка подлинности</span><span class="sxs-lookup"><span data-stu-id="8ebcb-157">Bind type - Authentications</span></span> |<span data-ttu-id="8ebcb-158">Выберите соответствующий тип привязки для использования при проверке подлинности привязки LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-158">Select the appropriate bind type for use when performing LDAP bind authentication.</span></span>  <span data-ttu-id="8ebcb-159">См. описания типов привязки в разделе «Тип привязки — запросы».</span><span class="sxs-lookup"><span data-stu-id="8ebcb-159">See the bind type descriptions under Bind type - Queries.</span></span>  <span data-ttu-id="8ebcb-160">Например, так можно настроить анонимную привязку для запросов и привязку SSL для проверки подлинности привязки LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-160">For example, this allows for Anonymous bind to be used for queries while SSL bind is used to secure LDAP bind authentications.</span></span> |
| <span data-ttu-id="8ebcb-161">Различающееся имя привязки или имя пользователя привязки</span><span class="sxs-lookup"><span data-stu-id="8ebcb-161">Bind DN or Bind username</span></span> |<span data-ttu-id="8ebcb-162">Введите различающееся имя записи пользователя для учетной записи, используемой при привязке к каталогу LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-162">Enter the distinguished name of the user record for the account to use when binding to the LDAP directory.</span></span><br><br><span data-ttu-id="8ebcb-163">Различающееся имя привязки используется только для простой привязки и для привязки SSL.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-163">The bind distinguished name is only used when Bind Type is Simple or SSL.</span></span>  <br><br><span data-ttu-id="8ebcb-164">Введите имя пользователя учетной записи Windows для привязки к каталогу LDAP, если тип привязки — Windows.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-164">Enter the username of the Windows account to use when binding to the LDAP directory when Bind Type is Windows.</span></span>  <span data-ttu-id="8ebcb-165">Если оставить поле пустым, будет использована учетная запись пользователя, вошедшего в систему.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-165">If left blank, the logged-on user's account is used to bind.</span></span> |
| <span data-ttu-id="8ebcb-166">Пароль привязки</span><span class="sxs-lookup"><span data-stu-id="8ebcb-166">Bind Password</span></span> |<span data-ttu-id="8ebcb-167">Введите пароль для DN или имени пользователя, которые используются для привязки к каталогу LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-167">Enter the bind password for the Bind DN or username being used to bind to the LDAP directory.</span></span>  <span data-ttu-id="8ebcb-168">Чтобы настроить пароль для службы AdSync сервера Многофакторной идентификации, нужно включить синхронизацию и запустить службу на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-168">To configure the password for the Multi-Factor Auth Server AdSync Service, enable synchronization and ensure that the service is running on the local machine.</span></span>  <span data-ttu-id="8ebcb-169">Пароль сохраняется в списке хранимых имен пользователей и паролей Windows под учетной записью, от имени которой запускается служба AdSync сервера Многофакторной идентификации Azure.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-169">The password is saved in the Windows Stored Usernames and Passwords under the account the Multi-Factor Auth Server AdSync Service is running as.</span></span>  <span data-ttu-id="8ebcb-170">Пароль также сохраняется под учетной записью, от имени которой запускаются пользовательский интерфейс и служба сервера Многофакторной идентификации Azure.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-170">The password is also saved under the account the Multi-Factor Auth Server user interface is running as and under the account the Multi-Factor Auth Server Service is running as.</span></span>  <br><br><span data-ttu-id="8ebcb-171">Так как пароль хранится только в списке хранимых имен пользователей и паролей Windows, который находится на локальном сервере, описываемое здесь действие нужно выполнить для каждого сервера Многофакторной идентификации, которому нужен доступ к паролю.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-171">Since the password is only stored in the local server's Windows Stored Usernames and Passwords, repeat this step on each Multi-Factor Auth Server that needs access to the password.</span></span> |
| <span data-ttu-id="8ebcb-172">Предельный размер запроса</span><span class="sxs-lookup"><span data-stu-id="8ebcb-172">Query size limit</span></span> |<span data-ttu-id="8ebcb-173">Укажите предельный размер, то есть максимальное число пользователей, которое отображается как результат после поиска по каталогу.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-173">Specify the size limit for the maximum number of users that a directory search returns.</span></span>  <span data-ttu-id="8ebcb-174">Это ограничение должно соответствовать конфигурации в каталоге LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-174">This limit should match the configuration on the LDAP directory.</span></span>  <span data-ttu-id="8ebcb-175">Если выполняется масштабный поиск, для которого не поддерживается подкачка, процессы импорта и синхронизации пытаются получить пользователей в пакетах.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-175">For large searches where paging is not supported, import and synchronization attempts to retrieve users in batches.</span></span>  <span data-ttu-id="8ebcb-176">Если указанный предельный размер превышает ограничение, заданное в каталоге LDAP, некоторые пользователи могут быть пропущены.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-176">If the size limit specified here is larger than the limit configured on the LDAP directory, some users may be missed.</span></span> |
| <span data-ttu-id="8ebcb-177">Кнопка тестирования</span><span class="sxs-lookup"><span data-stu-id="8ebcb-177">Test button</span></span> |<span data-ttu-id="8ebcb-178">Нажмите кнопку **Проверка** для проверки привязки к серверу LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-178">Click **Test** to test binding to the LDAP server.</span></span>  <br><br><span data-ttu-id="8ebcb-179">При этой проверке не следует выбирать параметр **Use LDAP** (Использовать LDAP).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-179">You don't need to select the **Use LDAP** option to test binding.</span></span> <span data-ttu-id="8ebcb-180">Это позволяет проверить привязку перед использованием конфигурации LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-180">This allows the binding to be tested before you use the LDAP configuration.</span></span> |

## <a name="filters"></a><span data-ttu-id="8ebcb-181">Фильтры</span><span class="sxs-lookup"><span data-stu-id="8ebcb-181">Filters</span></span>
<span data-ttu-id="8ebcb-182">Фильтры позволяют задать условие ограничения записей при выполнении поиска в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-182">Filters allow you to set criteria to qualify records when performing a directory search.</span></span>  <span data-ttu-id="8ebcb-183">Задавая фильтр, можно ограничить область объектов, которые требуется синхронизировать.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-183">By setting the filter, you can scope the objects you want to synchronize.</span></span>  

![Фильтры](./media/multi-factor-authentication-get-started-server-dirint/dirint2.png)

<span data-ttu-id="8ebcb-185">Для Многофакторной идентификации Azure может использоваться три следующих варианта фильтров.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-185">Azure Multi-Factor Authentication has the following three filter options:</span></span>

* <span data-ttu-id="8ebcb-186">**Фильтр контейнера** задает критерии фильтра для ограничения записей контейнера при выполнении поиска в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-186">**Container filter** - Specify the filter criteria used to qualify container records when performing a directory search.</span></span>  <span data-ttu-id="8ebcb-187">Для Active Directory и ADAM обычно используется (|(objectClass=organizationalUnit)(objectClass=container)).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-187">For Active Directory and ADAM, (|(objectClass=organizationalUnit)(objectClass=container)) is commonly used.</span></span>  <span data-ttu-id="8ebcb-188">Для других каталогов LDAP используйте критерии фильтрации, соответствующие каждому типу объекта контейнера в зависимости от схемы каталога.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-188">For other LDAP directories, use filter criteria that qualifies each type of container object, depending on the directory schema.</span></span>  <br><span data-ttu-id="8ebcb-189">Примечание. Если оставить это поле пустым, по умолчанию используется ((objectClass=organizationalUnit)(objectClass=container)).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-189">Note:  If left blank, ((objectClass=organizationalUnit)(objectClass=container)) is used by default.</span></span>
* <span data-ttu-id="8ebcb-190">**Фильтр группы безопасности** задает критерии фильтра для ограничения записей групп безопасности при выполнении поиска в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-190">**Security group filter** - Specify the filter criteria used to qualify security group records when performing a directory search.</span></span>  <span data-ttu-id="8ebcb-191">Для Active Directory и ADAM обычно используется (&(objectCategory=group)(groupType:1.2.840.113556.1.4.804:=-2147483648)).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-191">For Active Directory and ADAM, (&(objectCategory=group)(groupType:1.2.840.113556.1.4.804:=-2147483648)) is commonly used.</span></span>  <span data-ttu-id="8ebcb-192">Для других каталогов LDAP используйте критерии фильтрации, соответствующие каждому типу объекта группы безопасности в зависимости от схемы каталога.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-192">For other LDAP directories, use filter criteria that qualifies each type of security group object, depending on the directory schema.</span></span>  <br><span data-ttu-id="8ebcb-193">Примечание. Если оставить это поле пустым, по умолчанию используется (&(objectCategory=group)(groupType:1.2.840.113556.1.4.804:=-2147483648)).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-193">Note:  If left blank, (&(objectCategory=group)(groupType:1.2.840.113556.1.4.804:=-2147483648)) is used by default.</span></span>
* <span data-ttu-id="8ebcb-194">**Фильтр пользователей** задает критерии фильтра для ограничения записей пользователей при выполнении поиска в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-194">**User filter** - Specify the filter criteria used to qualify user records when performing a directory search.</span></span>  <span data-ttu-id="8ebcb-195">Для Active Directory и ADAM обычно используется (&(objectClass=user)(objectCategory=person)).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-195">For Active Directory and ADAM, (&(objectClass=user)(objectCategory=person)) is commonly used.</span></span>  <span data-ttu-id="8ebcb-196">Для других каталогов LDAP используйте (objectClass = inetOrgPerson) или что-либо подобное в зависимости от схемы каталога.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-196">For other LDAP directories, use (objectClass=inetOrgPerson) or something similar, depending on the directory schema.</span></span> <br><span data-ttu-id="8ebcb-197">Примечание. Если оставить это поле пустым, по умолчанию используется (&(objectCategory=person)(objectClass=user)).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-197">Note:  If left blank, (&(objectCategory=person)(objectClass=user)) is used by default.</span></span>

## <a name="attributes"></a><span data-ttu-id="8ebcb-198">Атрибуты</span><span class="sxs-lookup"><span data-stu-id="8ebcb-198">Attributes</span></span>
<span data-ttu-id="8ebcb-199">Атрибуты для каталога при необходимости можно изменить.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-199">You can customize attributes as necessary for a specific directory.</span></span>  <span data-ttu-id="8ebcb-200">Это позволит добавлять настраиваемые атрибуты и выполнять тонкую настройку синхронизации, оставляя только те атрибуты, которые необходимы.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-200">This allows you to add custom attributes and fine-tune the synchronization to only the attributes that you need.</span></span> <span data-ttu-id="8ebcb-201">Значением каждого поля атрибута должно быть имя атрибута, как определено в схеме каталога.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-201">Use the name of the attricute as defined in the directory schema for the value of each attribute field.</span></span> <span data-ttu-id="8ebcb-202">В таблице ниже приведены дополнительные сведения о каждой функции.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-202">The following table provides additional information about each feature.</span></span>

<span data-ttu-id="8ebcb-203">Атрибуты можно вводить вручную и не обязательно выбирать из списка.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-203">Attributes may be entered manually and are not required to match an attribute in the attribute list.</span></span>

![Атрибуты](./media/multi-factor-authentication-get-started-server-dirint/dirint3.png)

| <span data-ttu-id="8ebcb-205">Функция</span><span class="sxs-lookup"><span data-stu-id="8ebcb-205">Feature</span></span> | <span data-ttu-id="8ebcb-206">Описание</span><span class="sxs-lookup"><span data-stu-id="8ebcb-206">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8ebcb-207">Уникальный идентификатор</span><span class="sxs-lookup"><span data-stu-id="8ebcb-207">Unique identifier</span></span> |<span data-ttu-id="8ebcb-208">Введите имя атрибута, который служит в качестве уникального идентификатора контейнера, группы безопасности и записей пользователей.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-208">Enter the attribute name of the attribute that serves as the unique identifier of container, security group, and user records.</span></span>  <span data-ttu-id="8ebcb-209">В Active Directory это обычно objectGUID.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-209">In Active Directory, this is usually objectGUID.</span></span> <span data-ttu-id="8ebcb-210">В других реализациях LDAP может использоваться entryUUID или подобный атрибут.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-210">Other LDAP implementations may use entryUUID or something similar.</span></span>  <span data-ttu-id="8ebcb-211">По умолчанию используется objectGUID.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-211">The default is objectGUID.</span></span> |
| <span data-ttu-id="8ebcb-212">Тип уникального идентификатора</span><span class="sxs-lookup"><span data-stu-id="8ebcb-212">Unique identifier type</span></span> |<span data-ttu-id="8ebcb-213">Выберите тип уникального идентификатора атрибута.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-213">Select the type of the unique identifier attribute.</span></span>  <span data-ttu-id="8ebcb-214">В Active Directory атрибут objectGUID имеет тип GUID.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-214">In Active Directory, the objectGUID attribute is of type GUID.</span></span> <span data-ttu-id="8ebcb-215">В других реализациях LDAP может использоваться ASCII Byte Array или String.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-215">Other LDAP implementations may use type ASCII Byte Array or String.</span></span>  <span data-ttu-id="8ebcb-216">По умолчанию используется GUID.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-216">The default is GUID.</span></span> <br><br><span data-ttu-id="8ebcb-217">Очень важно правильно задать тип, так как элементы синхронизации определяются их уникальными идентификаторами.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-217">It is important to set this type correctly since Synchronization Items are referenced by their Unique Identifier.</span></span> <span data-ttu-id="8ebcb-218">Для прямого поиска объекта в каталоге используется тип уникального идентификатора.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-218">The Unique Identifier Type is used to directly find the object in the directory.</span></span>  <span data-ttu-id="8ebcb-219">Если установить тип String, тогда как фактически значение хранится в виде байтового массива символов ASCII, синхронизация будет работать неправильно.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-219">Setting this type to String when the directory actually stores the value as a byte array of ASCII characters prevents synchronization from functioning properly.</span></span> |
| <span data-ttu-id="8ebcb-220">Различающееся имя</span><span class="sxs-lookup"><span data-stu-id="8ebcb-220">Distinguished name</span></span> |<span data-ttu-id="8ebcb-221">Введите имя атрибута, который содержит различающееся имя для каждой записи.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-221">Enter the attribute name of the attribute that contains the distinguished name for each record.</span></span>  <span data-ttu-id="8ebcb-222">В Active Directory это обычно distinguishedName.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-222">In Active Directory, this is usually distinguishedName.</span></span> <span data-ttu-id="8ebcb-223">В других реализациях LDAP может использоваться entryDN или что-либо подобное.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-223">Other LDAP implementations may use entryDN or something similar.</span></span>  <span data-ttu-id="8ebcb-224">По умолчанию используется distinguishedName.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-224">The default is distinguishedName.</span></span> <br><br><span data-ttu-id="8ebcb-225">Если не существует атрибута, содержащего только различающееся имя, можно использовать атрибут adspath.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-225">If an attribute containing just the distinguished name doesn't exist, the adspath attribute may be used.</span></span>  <span data-ttu-id="8ebcb-226">Фрагмент пути LDAP://\<сервер\>/ будет автоматически удален, и останется только различающееся имя объекта.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-226">The "LDAP://\<server\>/" portion of the path is automatically stripped off, leaving just the distinguished name of the object.</span></span> |
| <span data-ttu-id="8ebcb-227">Имя контейнера</span><span class="sxs-lookup"><span data-stu-id="8ebcb-227">Container name</span></span> |<span data-ttu-id="8ebcb-228">Введите имя атрибута, который содержит имя в записи контейнера.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-228">Enter the attribute name of the attribute that contains the name in a container record.</span></span>  <span data-ttu-id="8ebcb-229">Значение этого атрибута отображается в иерархии контейнеров при импорте из Active Directory или при добавлении элементов синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-229">The value of this attribute is displayed in the Container Hierarchy when importing from Active Directory or adding synchronization items.</span></span>  <span data-ttu-id="8ebcb-230">По умолчанию используется name.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-230">The default is name.</span></span> <br><br><span data-ttu-id="8ebcb-231">Если в различных контейнерах для имен используются различные атрибуты, используйте точку с запятой, чтобы разделить несколько атрибутов имен контейнеров.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-231">If different containers use different attributes for their names, use semi-colons to separate multiple container name attributes.</span></span>  <span data-ttu-id="8ebcb-232">Для отображения имени контейнера используется первый атрибут имени контейнера, найденный в объекте контейнера.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-232">The first container name attribute found on a container object is used to display its name.</span></span> |
| <span data-ttu-id="8ebcb-233">Имя группы безопасности</span><span class="sxs-lookup"><span data-stu-id="8ebcb-233">Security group name</span></span> |<span data-ttu-id="8ebcb-234">Введите имя атрибута, который содержит имя в записи группы безопасности.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-234">Enter the attribute name of the attribute that contains the name in a security group record.</span></span>  <span data-ttu-id="8ebcb-235">Значение этого атрибута отображается в списке групп безопасности при импорте из Active Directory или при добавлении элементов синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-235">The value of this attribute is displayed in the Security Group list when importing from Active Directory or adding synchronization items.</span></span>  <span data-ttu-id="8ebcb-236">По умолчанию используется name.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-236">The default is name.</span></span> |
| <span data-ttu-id="8ebcb-237">Имя пользователя</span><span class="sxs-lookup"><span data-stu-id="8ebcb-237">Username</span></span> |<span data-ttu-id="8ebcb-238">Введите имя атрибута, который содержит имя пользователя в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-238">Enter the attribute name of the attribute that contains the username in a user record.</span></span>  <span data-ttu-id="8ebcb-239">Значение этого атрибута используется в качестве имени пользователя сервера Многофакторной идентификации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-239">The value of this attribute is used as the Multi-Factor Auth Server username.</span></span>  <span data-ttu-id="8ebcb-240">В дополнение к первому можно указать второй атрибут.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-240">A second attribute may be specified as a backup to the first.</span></span>  <span data-ttu-id="8ebcb-241">Второй атрибут используется только в тех случаях, когда первый атрибут не содержит значения для пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-241">The second attribute is only used if the first attribute does not contain a value for the user.</span></span>  <span data-ttu-id="8ebcb-242">Значения по умолчанию: userPrincipalName и sAMAccountName.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-242">The defaults are userPrincipalName and sAMAccountName.</span></span> |
| <span data-ttu-id="8ebcb-243">Имя</span><span class="sxs-lookup"><span data-stu-id="8ebcb-243">First name</span></span> |<span data-ttu-id="8ebcb-244">Введите имя атрибута, который содержит имя в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-244">Enter the attribute name of the attribute that contains the first name in a user record.</span></span>  <span data-ttu-id="8ebcb-245">Значение по умолчанию — givenName.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-245">The default is givenName.</span></span> |
| <span data-ttu-id="8ebcb-246">Фамилия</span><span class="sxs-lookup"><span data-stu-id="8ebcb-246">Last name</span></span> |<span data-ttu-id="8ebcb-247">Введите имя атрибута, который содержит фамилию в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-247">Enter the attribute name of the attribute that contains the last name in a user record.</span></span>  <span data-ttu-id="8ebcb-248">Значение по умолчанию — sn.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-248">The default is sn.</span></span> |
| <span data-ttu-id="8ebcb-249">Адрес электронной почты</span><span class="sxs-lookup"><span data-stu-id="8ebcb-249">Email address</span></span> |<span data-ttu-id="8ebcb-250">Введите имя атрибута, который содержит адрес электронной почты в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-250">Enter the attribute name of the attribute that contains the email address in a user record.</span></span>  <span data-ttu-id="8ebcb-251">Адрес электронной почты используется для отправки пользователю приветствия и сообщений об обновлении.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-251">Email address is used to send welcome and update emails to the user.</span></span>  <span data-ttu-id="8ebcb-252">Значение по умолчанию — mail.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-252">The default is mail.</span></span> |
| <span data-ttu-id="8ebcb-253">Группа пользователя</span><span class="sxs-lookup"><span data-stu-id="8ebcb-253">User group</span></span> |<span data-ttu-id="8ebcb-254">Введите имя атрибута, который содержит группу пользователя в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-254">Enter the attribute name of the attribute that contains the user group in a user record.</span></span>  <span data-ttu-id="8ebcb-255">Группа пользователей может использоваться для фильтрации пользователей в агенте и в отчетах портала управления сервера Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-255">User group can be used to filter users in the agent and on reports in the Multi-Factor Auth Server Management Portal.</span></span> |
| <span data-ttu-id="8ebcb-256">Описание</span><span class="sxs-lookup"><span data-stu-id="8ebcb-256">Description</span></span> |<span data-ttu-id="8ebcb-257">Введите имя атрибута, который содержит описание в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-257">Enter the attribute name of the attribute that contains the description in a user record.</span></span>  <span data-ttu-id="8ebcb-258">Описание используется только для поиска.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-258">Description is only used for searching.</span></span>  <span data-ttu-id="8ebcb-259">Значение по умолчанию — description.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-259">The default is description.</span></span> |
| <span data-ttu-id="8ebcb-260">Язык телефонного звонка</span><span class="sxs-lookup"><span data-stu-id="8ebcb-260">Phone call language</span></span> |<span data-ttu-id="8ebcb-261">Введите имя атрибута, содержащего короткое название языка голосовых вызовов для пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-261">Enter the attribute name of the attribute that contains the short name of the language to use for voice calls for the user.</span></span> |
| <span data-ttu-id="8ebcb-262">Язык текстового сообщения</span><span class="sxs-lookup"><span data-stu-id="8ebcb-262">Text message language</span></span> |<span data-ttu-id="8ebcb-263">Введите имя атрибута, содержащего короткое название языка для отправки SMS-сообщений для пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-263">Enter the attribute name of the attribute that contains the short name of the language to use for SMS text messages for the user.</span></span> |
| <span data-ttu-id="8ebcb-264">Язык мобильного приложения</span><span class="sxs-lookup"><span data-stu-id="8ebcb-264">Mobile app language</span></span> |<span data-ttu-id="8ebcb-265">Введите имя атрибута, содержащего короткое название языка для отправки текстовых сообщений для пользователя через мобильное приложение.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-265">Enter the attribute name of the attribute that contains the short name of the language to use for phone app text messages for the user.</span></span> |
| <span data-ttu-id="8ebcb-266">Язык OATH-токена</span><span class="sxs-lookup"><span data-stu-id="8ebcb-266">OATH token language</span></span> |<span data-ttu-id="8ebcb-267">Введите имя атрибута, содержащего короткое название языка текстовых сообщений OATH-токена для пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-267">Enter the attribute name of the attribute that contains the short name of the language to use for OATH token text messages for the user.</span></span> |
| <span data-ttu-id="8ebcb-268">Рабочий телефон</span><span class="sxs-lookup"><span data-stu-id="8ebcb-268">Business phone</span></span> |<span data-ttu-id="8ebcb-269">Введите имя атрибута, который содержит номер рабочего телефона в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-269">Enter the attribute name of the attribute that contains the business phone number in a user record.</span></span>  <span data-ttu-id="8ebcb-270">Значение по умолчанию — telephoneNumber.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-270">The default is telephoneNumber.</span></span> |
| <span data-ttu-id="8ebcb-271">Домашний телефон</span><span class="sxs-lookup"><span data-stu-id="8ebcb-271">Home phone</span></span> |<span data-ttu-id="8ebcb-272">Введите имя атрибута, который содержит номер домашнего телефона в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-272">Enter the attribute name of the attribute that contains the home phone number in a user record.</span></span>  <span data-ttu-id="8ebcb-273">Значение по умолчанию — homePhone.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-273">The default is homePhone.</span></span> |
| <span data-ttu-id="8ebcb-274">Пейджер</span><span class="sxs-lookup"><span data-stu-id="8ebcb-274">Pager</span></span> |<span data-ttu-id="8ebcb-275">Введите имя атрибута, который содержит номер пейджера в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-275">Enter the attribute name of the attribute that contains the pager number in a user record.</span></span>  <span data-ttu-id="8ebcb-276">Значение по умолчанию — pager.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-276">The default is pager.</span></span> |
| <span data-ttu-id="8ebcb-277">Мобильный телефон</span><span class="sxs-lookup"><span data-stu-id="8ebcb-277">Mobile phone</span></span> |<span data-ttu-id="8ebcb-278">Введите имя атрибута, который содержит номер мобильного телефона в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-278">Enter the attribute name of the attribute that contains the mobile phone number in a user record.</span></span>  <span data-ttu-id="8ebcb-279">Значение по умолчанию — mobile.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-279">The default is mobile.</span></span> |
| <span data-ttu-id="8ebcb-280">Факс</span><span class="sxs-lookup"><span data-stu-id="8ebcb-280">Fax</span></span> |<span data-ttu-id="8ebcb-281">Введите имя атрибута, который содержит номер факса в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-281">Enter the attribute name of the attribute that contains the fax number in a user record.</span></span>  <span data-ttu-id="8ebcb-282">Значение по умолчанию — facsimileTelephoneNumber.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-282">The default is facsimileTelephoneNumber.</span></span> |
| <span data-ttu-id="8ebcb-283">IP-телефон</span><span class="sxs-lookup"><span data-stu-id="8ebcb-283">IP phone</span></span> |<span data-ttu-id="8ebcb-284">Введите имя атрибута, который содержит номер IP-телефона в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-284">Enter the attribute name of the attribute that contains the IP phone number in a user record.</span></span>  <span data-ttu-id="8ebcb-285">Значение по умолчанию — ipPhone.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-285">The default is ipPhone.</span></span> |
| <span data-ttu-id="8ebcb-286">Пользовательская</span><span class="sxs-lookup"><span data-stu-id="8ebcb-286">Custom</span></span> |<span data-ttu-id="8ebcb-287">Введите имя атрибута, который содержит номер другого телефона в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-287">Enter the attribute name of the attribute that contains a custom phone number in a user record.</span></span>  <span data-ttu-id="8ebcb-288">Значение по умолчанию — пусто.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-288">The default is blank.</span></span> |
| <span data-ttu-id="8ebcb-289">Добавочный номер</span><span class="sxs-lookup"><span data-stu-id="8ebcb-289">Extension</span></span> |<span data-ttu-id="8ebcb-290">Введите имя атрибута, который содержит добавочный номер телефона в записи пользователя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-290">Enter the attribute name of the attribute that contains the phone number extension in a user record.</span></span>  <span data-ttu-id="8ebcb-291">Добавочный номер используется только для основного номера телефона.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-291">The value of the extension field is used as the extension to the primary phone number only.</span></span>  <span data-ttu-id="8ebcb-292">Значение по умолчанию — пусто.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-292">The default is blank.</span></span> <br><br><span data-ttu-id="8ebcb-293">Если атрибут добавочного номера не указан, добавочный номер можно включить в атрибут телефона.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-293">If the Extension attribute is not specified, extensions can be included as part of the phone attribute.</span></span> <span data-ttu-id="8ebcb-294">В этом случае перед добавочным номером нужно указать символ "x", чтобы добавочный номер можно было правильно определить.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-294">In this case, precede the extension with an 'x' so that it gets parsed correctly.</span></span>  <span data-ttu-id="8ebcb-295">Например, для атрибута 555-123-4567 x890 будут определены основной номер 555-123-4567 и добавочный номер 890.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-295">For example, 555-123-4567 x890 would result in 555-123-4567 as the phone number and 890 as the extension.</span></span> |
| <span data-ttu-id="8ebcb-296">Кнопка «Восстановить значения по умолчанию»</span><span class="sxs-lookup"><span data-stu-id="8ebcb-296">Restore Defaults button</span></span> |<span data-ttu-id="8ebcb-297">Для возврата всех атрибутов в значения по умолчанию нажмите кнопку **Восстановить значения по умолчанию**.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-297">Click **Restore Defaults** to return all attributes back to their default value.</span></span>  <span data-ttu-id="8ebcb-298">Значения по умолчанию подходят для Active Directory или ADAM.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-298">The defaults should work properly with the normal Active Directory or ADAM schema.</span></span> |

<span data-ttu-id="8ebcb-299">Чтобы изменить атрибуты, нажмите кнопку **Изменить** на вкладке "Атрибуты".</span><span class="sxs-lookup"><span data-stu-id="8ebcb-299">To edit attributes, click **Edit** on the Attributes tab.</span></span>  <span data-ttu-id="8ebcb-300">Откроется окно, в котором можно изменить атрибуты.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-300">This brings up a window where you can edit the attributes.</span></span> <span data-ttu-id="8ebcb-301">Щелкните **...** рядом с любым атрибутом, чтобы открыть окно, в котором можно выбрать, какие атрибуты следует отобразить.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-301">Select the **...** next to any attribute to open a window where you can choose which attributes to display.</span></span>

![Изменить атрибуты](./media/multi-factor-authentication-get-started-server-dirint/dirint4.png)

## <a name="synchronization"></a><span data-ttu-id="8ebcb-303">Синхронизация</span><span class="sxs-lookup"><span data-stu-id="8ebcb-303">Synchronization</span></span>
<span data-ttu-id="8ebcb-304">Функция синхронизации позволяет поддерживать синхронизацию базы данных пользователей Многофакторной идентификации Azure с пользователями Active Directory или другого каталога LDAP.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-304">Synchronization keeps the Azure MFA user database synchronized with the users in Active Directory or another Lightweight Directory Access Protocol (LDAP) directory.</span></span> <span data-ttu-id="8ebcb-305">Процесс синхронизации аналогичен импорту пользователей из Active Directory вручную, но при этом группы пользователей Active Directory и группы безопасности периодически опрашиваются на наличие изменений.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-305">The process is similar to importing users manually from Active Directory, but periodically polls for Active Directory user and security group changes to process.</span></span>  <span data-ttu-id="8ebcb-306">Он также отключает или удаляет пользователей, которые были удалены из контейнера, группы безопасности или Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-306">It also disables or removes users that were removed from a container, security group, or Active Directory.</span></span>

<span data-ttu-id="8ebcb-307">Служба ADSync сервера Azure Multi-Factor Authentication — это служба Windows, которая периодически опрашивает Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-307">The Multi-Factor Auth ADSync service is a Windows service that performs the periodic polling of Active Directory.</span></span>  <span data-ttu-id="8ebcb-308">Ее не следует путать с Azure AD Sync или Azure AD Connect.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-308">This is not to be confused with Azure AD Sync or Azure AD Connect.</span></span>  <span data-ttu-id="8ebcb-309">Хотя служба ADSync сервера Azure Multi-Factor Authentication использует в своей основе аналогичный код, она используется только на сервере Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-309">the Multi-Factor Auth ADSync, although built on a similar code base, is specific to the Azure Multi-Factor Authentication Server.</span></span>  <span data-ttu-id="8ebcb-310">После установки служба находится в остановленном состоянии и запускается службой сервера Azure Multi-Factor Authentication при настройке запуска.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-310">It is installed in a Stopped state and is started by the Multi-Factor Auth Server service when configured to run.</span></span>  <span data-ttu-id="8ebcb-311">При наличии многосерверной конфигурации сервера Azure Multi-Factor Authentication служба ADSync может быть запущена только на одном сервере.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-311">If you have a multi-server Multi-Factor Auth Server configuration, the Multi-Factor Auth ADSync may only be run on a single server.</span></span>

<span data-ttu-id="8ebcb-312">Служба ADSync сервера Azure Multi-Factor Authentication использует серверное расширение DirSync LDAP, предоставляемое Microsoft, для эффективного опроса изменений.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-312">The Multi-Factor Auth ADSync service uses the DirSync LDAP server extension provided by Microsoft to efficiently poll for changes.</span></span>  <span data-ttu-id="8ebcb-313">У вызывающего объекта DirSync должны быть право доступа directory get changes и расширенное право управления доступом DS-Replication-Get-Changes.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-313">This DirSync control caller must have the "directory get changes" right and DS-Replication-Get-Changes extended control access right.</span></span>  <span data-ttu-id="8ebcb-314">По умолчанию эти права назначаются учетным записям Administrator и LocalSystem на контроллерах домена.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-314">By default, these rights are assigned to the Administrator and LocalSystem accounts on domain controllers.</span></span>  <span data-ttu-id="8ebcb-315">По умолчанию служба AdSync запускается от имени учетной записи LocalSystem.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-315">The Multi-Factor Auth AdSync service is configured to run as LocalSystem by default.</span></span>  <span data-ttu-id="8ebcb-316">Поэтому проще всего запустить службу на контроллере домена.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-316">Therefore it is simplest to run the service on a domain controller.</span></span>  <span data-ttu-id="8ebcb-317">Служба может работать с учетной записью с меньшими разрешениями, если настроить ее так, чтобы она всегда выполняла полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-317">If you configure the service to always perform a full synchronization, it can run as an account with lesser permissions.</span></span>  <span data-ttu-id="8ebcb-318">Это менее эффективно, но требует меньших привилегий учетной записи.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-318">This is less efficient, but requires fewer account privileges.</span></span>

<span data-ttu-id="8ebcb-319">Если каталог LDAP настроен для использования DirSync и поддерживает его, то опрос изменений пользователей и группы безопасности будет выполняться точно так же, как в случае с Active Directory.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-319">If the LDAP directory supports and is configured for DirSync, then polling for user and security group changes will work the same as it does with Active Directory.</span></span>  <span data-ttu-id="8ebcb-320">Если каталог LDAP не поддерживает DirSync, то во время каждого цикла будет выполняться полная синхронизация.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-320">If the LDAP directory does not support the DirSync control, then a full synchronization is performed during each cycle.</span></span>

![Синхронизация](./media/multi-factor-authentication-get-started-server-dirint/dirint5.png)

<span data-ttu-id="8ebcb-322">Следующая таблица содержит дополнительные сведения о каждом параметре на вкладке "Синхронизация".</span><span class="sxs-lookup"><span data-stu-id="8ebcb-322">The following table contains additional information on each of the Synchronization tab settings.</span></span>

| <span data-ttu-id="8ebcb-323">Функция</span><span class="sxs-lookup"><span data-stu-id="8ebcb-323">Feature</span></span> | <span data-ttu-id="8ebcb-324">Описание</span><span class="sxs-lookup"><span data-stu-id="8ebcb-324">Description</span></span> |
| --- | --- |
| <span data-ttu-id="8ebcb-325">Включить синхронизацию с Active Directory</span><span class="sxs-lookup"><span data-stu-id="8ebcb-325">Enable synchronization with Active Directory</span></span> |<span data-ttu-id="8ebcb-326">Если флажок установлен, служба сервера Многофакторной идентификации периодически опрашивает Active Directory на наличие изменений.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-326">When checked, the Multi-Factor Auth Server service periodically polls Active Directory for changes.</span></span> <br><br><span data-ttu-id="8ebcb-327">Примечание. Перед тем как служба сервера Многофакторной идентификации Azure начнет обрабатывать изменения, необходимо добавить по крайней мере один элемент синхронизации и нажать кнопку "Синхронизировать".</span><span class="sxs-lookup"><span data-stu-id="8ebcb-327">Note: At least one Synchronization Item must be added and a Synchronize Now must be performed before the Multi-Factor Auth Server service will start processing changes.</span></span> |
| <span data-ttu-id="8ebcb-328">Синхронизировать каждые...</span><span class="sxs-lookup"><span data-stu-id="8ebcb-328">Synchronize every</span></span> |<span data-ttu-id="8ebcb-329">Задает интервал времени ожидания между опросом и обработкой изменений службы сервера Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-329">Specify the time interval the Multi-Factor Auth Server service will wait between polling and processing changes.</span></span> <br><br> <span data-ttu-id="8ebcb-330">Примечание. Указанный интервал равен интервалу времени между началом каждого цикла.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-330">Note: The interval specified is the time between the beginning of each cycle.</span></span>  <span data-ttu-id="8ebcb-331">Если время обработки изменений превысит этот интервал, повторный опрос изменений будет выполнен незамедлительно.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-331">If the time processing changes exceed the interval, the service will poll again immediately.</span></span> |
| <span data-ttu-id="8ebcb-332">Удалять пользователей, которых больше нет в Active Directory</span><span class="sxs-lookup"><span data-stu-id="8ebcb-332">Remove users no longer in Active Directory</span></span> |<span data-ttu-id="8ebcb-333">Если флажок установлен, служба сервера Azure Multi-Factor Authentication будет обрабатывать записи об удалении пользователей Active Directory и удалять соответствующих пользователей сервера Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-333">When checked, the Multi-Factor Auth Server service will process Active Directory deleted user tombstones and remove the related Multi-Factor Auth Server user.</span></span> |
| <span data-ttu-id="8ebcb-334">Всегда выполнять полную синхронизацию</span><span class="sxs-lookup"><span data-stu-id="8ebcb-334">Always perform a full synchronization</span></span> |<span data-ttu-id="8ebcb-335">Если флажок установлен, служба сервера Azure Multi-Factor Authentication всегда будет выполнять полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-335">When checked, the Multi-Factor Auth Server service will always perform a full synchronization.</span></span>  <span data-ttu-id="8ebcb-336">Если флажок снят, служба сервера Multi-Factor Authentication будет выполнять добавочную синхронизацию только для тех пользователей, которые были изменены.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-336">When unchecked, the Multi-Factor Auth Server service will perform an incremental synchronization by only querying users that have changed.</span></span>  <span data-ttu-id="8ebcb-337">По умолчанию флажок снят.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-337">The default is unchecked.</span></span> <br><br><span data-ttu-id="8ebcb-338">Если флажок снят, сервер Многофакторной идентификации Azure выполняет добавочную синхронизацию только в том случае, если каталог поддерживает DirSync и учетная запись (с привязкой к каталогу) имеет разрешения для выполнения добавочных запросов DirSync.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-338">When unchecked, Azure MFA Server performs incremental synchronization only when the directory supports the DirSync control and the account binding to the directory has permissions to perform DirSync incremental queries.</span></span>  <span data-ttu-id="8ebcb-339">Если учетная запись не имеет соответствующих разрешений или в синхронизации участвуют несколько доменов, сервер Многофакторной идентификации Azure выполняет полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-339">If the account does not have the appropriate permissions or multiple domains are involved in the synchronization, Azure MFA Server performs a full synchronization.</span></span> |
| <span data-ttu-id="8ebcb-340">Требовать подтверждения администратора при удалении или отключении более X пользователей</span><span class="sxs-lookup"><span data-stu-id="8ebcb-340">Require administrator approval when more than X users will be disabled or removed</span></span> |<span data-ttu-id="8ebcb-341">Элементы синхронизации можно настроить для отключения или удаления пользователей, которые больше не являются членом контейнера элемента или группы безопасности.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-341">Synchronization items can be configured to disable or remove users who are no longer a member of the item's container or security group.</span></span>  <span data-ttu-id="8ebcb-342">В качестве защитной меры можно использовать подтверждение администратора при превышении количеством пользователей для отключения или удаления порогового значения.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-342">As a safeguard, administrator approval can be required when the number of users to disable or remove exceeds a threshold.</span></span>  <span data-ttu-id="8ebcb-343">Если флажок установлен, то требуется утверждение для заданного порогового значения.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-343">When checked, approval is required for specified threshold.</span></span>  <span data-ttu-id="8ebcb-344">Значение по умолчанию — 5, диапазон — от 1 до 999.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-344">The default is 5 and the range is 1 to 999.</span></span> <br><br> <span data-ttu-id="8ebcb-345">Для облегчения процедуры подтверждения администраторам отправляется уведомление по электронной почте.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-345">Approval is facilitated by first sending an email notification to administrators.</span></span> <span data-ttu-id="8ebcb-346">Это уведомление содержит инструкции по просмотру и подтверждению отключения и удаления пользователей.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-346">The email notification gives instructions for reviewing and approving the disabling and removal of users.</span></span>  <span data-ttu-id="8ebcb-347">При запуске пользовательского интерфейса сервера Azure Multi-Factor Authentication будет выдан запрос на подтверждение.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-347">When the Multi-Factor Auth Server user interface is launched, it will prompt for approval.</span></span> |

<span data-ttu-id="8ebcb-348">Кнопка **Синхронизировать** позволяет выполнить полную синхронизацию для указанных элементов синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-348">The **Synchronize Now** button allows you to run a full synchronization for the synchronization items specified.</span></span>  <span data-ttu-id="8ebcb-349">Полная синхронизация требуется каждый раз при добавлении, изменении, удалении или изменении порядка элементов синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-349">A full synchronization is required whenever synchronization items are added, modified, removed, or reordered.</span></span>  <span data-ttu-id="8ebcb-350">Она также необходима перед первым запуском службы AdSync сервера Многофакторной идентификации Azure, так как задает начальную точку, для которой служба будет опрашивать добавочные изменения.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-350">It is also required before the Multi-Factor Auth AdSync service is operational since it sets the starting point from which the service will poll for incremental changes.</span></span>  <span data-ttu-id="8ebcb-351">Если в элементы синхронизации были внесены изменения, но полная синхронизация не выполнена, вам будет предложено нажать кнопку "Синхронизировать".</span><span class="sxs-lookup"><span data-stu-id="8ebcb-351">If changes have been made to synchronization items but a full synchronization hasn't been performed, you will be prompted to Synchronize Now.</span></span>

<span data-ttu-id="8ebcb-352">Кнопка **Удаление** позволяет администратору удалить один или несколько элементов синхронизации из списка элементов синхронизации сервера Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-352">The **Remove** button allows the administrator to delete one or more synchronization items from the Multi-Factor Auth Server synchronization item list.</span></span>

> [!WARNING]
> <span data-ttu-id="8ebcb-353">После удаления элемента синхронизации восстановить его нельзя.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-353">Once a synchronization item record has been removed, it cannot be recovered.</span></span> <span data-ttu-id="8ebcb-354">Если элементы синхронизации были удалены по ошибке, необходимо добавить их снова.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-354">You will need to add the synchronization item record again if you deleted it by mistake.</span></span>

<span data-ttu-id="8ebcb-355">Элемент синхронизации или элементы синхронизации были удалены из сервера Azure Multi-Factor Authentication.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-355">The synchronization item or synchronization items have been removed from Multi-Factor Auth Server.</span></span>  <span data-ttu-id="8ebcb-356">Служба сервера Azure Multi-Factor Authentication больше не будет обрабатывать элементы синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-356">The Multi-Factor Auth Server service will no longer process the synchronization items.</span></span>

<span data-ttu-id="8ebcb-357">Кнопки перемещения вверх и вниз позволяют администратору изменить порядок элементов синхронизации.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-357">The Move Up and Move Down buttons allow the administrator to change the order of the synchronization items.</span></span>  <span data-ttu-id="8ebcb-358">Порядок имеет значение, поскольку один и тот же пользователь может входить в несколько элементов синхронизации (например, в контейнер и в группу безопасности).</span><span class="sxs-lookup"><span data-stu-id="8ebcb-358">The order is important since the same user may be a member of more than one synchronization item (e.g. a container and a security group).</span></span>  <span data-ttu-id="8ebcb-359">Параметры, применяемые к пользователю в процессе синхронизации, будут поступать из первого элемента синхронизации в списке, с которым связан пользователь.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-359">The settings applied to the user during synchronization will come from the first synchronization item in the list to which the user is associated.</span></span>  <span data-ttu-id="8ebcb-360">Поэтому элементы синхронизации должны быть помещены в порядке приоритета.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-360">Therefore, the synchronization items should be put in priority order.</span></span>

> [!TIP]
> <span data-ttu-id="8ebcb-361">После удаления элементов синхронизации следует выполнить полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-361">A full synchronization should be performed after removing synchronization items.</span></span>  <span data-ttu-id="8ebcb-362">После упорядочения элементов синхронизации следует выполнить полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-362">A full synchronization should be performed after ordering synchronization items.</span></span>  <span data-ttu-id="8ebcb-363">Нажмите кнопку **Синхронизировать**, чтобы выполнить полную синхронизацию.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-363">Click **Synchronize Now** to perform a full synchronization.</span></span>

## <a name="multi-factor-auth-servers"></a><span data-ttu-id="8ebcb-364">Серверы Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="8ebcb-364">Multi-Factor Auth Servers</span></span>
<span data-ttu-id="8ebcb-365">Можно настроить дополнительные серверы Multi-Factor Authentication, которые могут использоваться в качестве резервного прокси-сервера RADIUS, прокси-сервера LDAP или для проверки подлинности IIS.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-365">Additional Multi-Factor Auth Servers may be set up to serve as a backup RADIUS proxy, LDAP proxy, or for IIS Authentication.</span></span> <span data-ttu-id="8ebcb-366">Настройки синхронизации доступны всем агентам.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-366">The Synchronization configuration is shared among all the agents.</span></span> <span data-ttu-id="8ebcb-367">Однако служба сервера Multi-Factor Authentication может быть запущена только для одного из этих агентов.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-367">However, only one of these agents may have the Multi-Factor Auth Server service running.</span></span> <span data-ttu-id="8ebcb-368">На этой вкладе можно выбрать сервер Multi-Factor Authentication, для которого должна быть включена синхронизация.</span><span class="sxs-lookup"><span data-stu-id="8ebcb-368">This tab allows you to select the Multi-Factor Auth Server that should be enabled for synchronization.</span></span>

![Серверы Azure Multi-Factor Authentication](./media/multi-factor-authentication-get-started-server-dirint/dirint6.png)
