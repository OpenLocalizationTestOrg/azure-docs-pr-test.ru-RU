---
title: "aaaIIS проверки подлинности и сервера Azure MFA | Документы Microsoft"
description: "Это является hello Azure многофакторной проверки подлинности, будет полезен при развертывании проверки подлинности служб IIS и сервера Azure Multi-factor Authentication."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: d1bf1c8a-2c10-4ae6-9f4b-75f0c3df43eb
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: H1Hack27Feb2017,it-pro
ms.openlocfilehash: 74bd39c2644e2bca0880baea3824cad4c9215111
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="configure-azure-multi-factor-authentication-server-for-iis-web-apps"></a><span data-ttu-id="9af5d-103">Настройка Многофакторной идентификации Azure для веб-приложений IIS</span><span class="sxs-lookup"><span data-stu-id="9af5d-103">Configure Azure Multi-Factor Authentication Server for IIS web apps</span></span>

<span data-ttu-id="9af5d-104">Воспользуйтесь разделом hello проверки подлинности IIS сервера Azure Multi-factor Authentication (MFA) tooenable hello и настроить проверку подлинности IIS для интеграции с веб-приложениями Microsoft IIS.</span><span class="sxs-lookup"><span data-stu-id="9af5d-104">Use hello IIS Authentication section of hello Azure Multi-Factor Authentication (MFA) Server tooenable and configure IIS authentication for integration with Microsoft IIS web applications.</span></span> <span data-ttu-id="9af5d-105">Hello многофакторной проверки Подлинности сервера Azure устанавливает подключаемый модуль, который может фильтровать запросы, выполняемые toohello IIS web server tooadd многофакторной проверки подлинности Azure.</span><span class="sxs-lookup"><span data-stu-id="9af5d-105">hello Azure MFA Server installs a plug-in that can filter requests being made toohello IIS web server tooadd Azure Multi-Factor Authentication.</span></span> <span data-ttu-id="9af5d-106">Hello подключаемый модуль IIS обеспечивает поддержку проверки подлинности на основе форм и встроенной проверки подлинности HTTP Windows.</span><span class="sxs-lookup"><span data-stu-id="9af5d-106">hello IIS plug-in provides support for Form-Based Authentication and Integrated Windows HTTP Authentication.</span></span> <span data-ttu-id="9af5d-107">Надежные IP-адресов также может быть настроенный tooexempt внутренние IP-адреса из двухфакторной проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="9af5d-107">Trusted IPs can also be configured tooexempt internal IP addresses from two-factor authentication.</span></span>

![Проверка подлинности IIS](./media/multi-factor-authentication-get-started-server-iis/iis.png)

## <a name="using-form-based-iis-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="9af5d-109">Использование проверки подлинности IIS на основе форм с сервером Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="9af5d-109">Using Form-Based IIS Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="9af5d-110">toosecure IIS веб-приложение, использующее проверку подлинности на основе форм, установите hello Azure многофакторной проверки подлинности сервера на веб-сервере IIS hello и настройка сервера hello каждого hello после процедуры:</span><span class="sxs-lookup"><span data-stu-id="9af5d-110">toosecure an IIS web application that uses form-based authentication, install hello Azure Multi-Factor Authentication Server on hello IIS web server and configure hello Server per hello following procedure:</span></span>

1. <span data-ttu-id="9af5d-111">В hello Azure многофакторной проверки подлинности сервера щелкните значок проверки подлинности IIS hello в левом меню hello.</span><span class="sxs-lookup"><span data-stu-id="9af5d-111">In hello Azure Multi-Factor Authentication Server, click hello IIS Authentication icon in hello left menu.</span></span>
2. <span data-ttu-id="9af5d-112">Нажмите кнопку hello **форм** вкладки.</span><span class="sxs-lookup"><span data-stu-id="9af5d-112">Click hello **Form-Based** tab.</span></span>
3. <span data-ttu-id="9af5d-113">Щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-113">Click **Add**.</span></span>
4. <span data-ttu-id="9af5d-114">имя пользователя, пароль и домен переменные toodetect автоматически, введите hello URL-адрес входа (например, https://localhost/contoso/auth/login.aspx) в диалоговом окне приветствия Автонастройка веб-сайта и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-114">toodetect username, password and domain variables automatically, enter hello Login URL (like https://localhost/contoso/auth/login.aspx) within hello Auto-Configure Form-Based Website dialog box and click **OK**.</span></span>
5. <span data-ttu-id="9af5d-115">Проверьте hello **сопоставление требовать многофакторную проверку подлинности пользователей** поле, если все пользователи были или будут импортированы в сервер hello и toomulti двухфакторной проверки подлинности субъекта.</span><span class="sxs-lookup"><span data-stu-id="9af5d-115">Check hello **Require Multi-Factor Authentication user match** box if all users have been or will be imported into hello Server and subject toomulti-factor authentication.</span></span> <span data-ttu-id="9af5d-116">Если значительное число пользователей еще не были импортированы в сервер hello или будет исключено из многофакторной проверки подлинности, не hello флажок.</span><span class="sxs-lookup"><span data-stu-id="9af5d-116">If a significant number of users have not yet been imported into hello Server and/or will be exempt from multi-factor authentication, leave hello box unchecked.</span></span>
6. <span data-ttu-id="9af5d-117">Если переменные страницы приветствия не определяются автоматически, нажмите кнопку **вручную указать** в диалоговом окне приветствия Автонастройка веб-сайта.</span><span class="sxs-lookup"><span data-stu-id="9af5d-117">If hello page variables cannot be detected automatically, click **Specify Manually** in hello Auto-Configure Form-Based Website dialog box.</span></span>
7. <span data-ttu-id="9af5d-118">В основе форм веб-сайт диалоговое окно «hello» введите в поле URL-адреса отправки hello toohello входа hello URL-адрес страницы и введите имя приложения (необязательно).</span><span class="sxs-lookup"><span data-stu-id="9af5d-118">In hello Add Form-Based Website dialog box, enter hello URL toohello login page in hello Submit URL field and enter an Application name (optional).</span></span> <span data-ttu-id="9af5d-119">Имя приложения Hello отображается в отчетах Azure Multi-factor Authentication и может отображаться в SMS или мобильное приложение проверки подлинности сообщений.</span><span class="sxs-lookup"><span data-stu-id="9af5d-119">hello Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
8. <span data-ttu-id="9af5d-120">Выберите правильный формат запроса hello.</span><span class="sxs-lookup"><span data-stu-id="9af5d-120">Select hello correct Request format.</span></span> <span data-ttu-id="9af5d-121">Задано слишком**POST или GET** для большинства веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="9af5d-121">This is set too**POST or GET** for most web applications.</span></span>
9. <span data-ttu-id="9af5d-122">Введите переменные hello имя пользователя, пароль и переменной домена (если он отображается на странице входа hello).</span><span class="sxs-lookup"><span data-stu-id="9af5d-122">Enter hello Username variable, Password variable, and Domain variable (if it appears on hello login page).</span></span> <span data-ttu-id="9af5d-123">имена hello toofind hello ввода поля перейдите toohello страницы входа в веб-браузере, щелкните правой кнопкой мыши на странице приветствия и выберите **Просмотр исходного кода**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-123">toofind hello names of hello input boxes, navigate toohello login page in a web browser, right-click on hello page, and select **View Source**.</span></span>
10. <span data-ttu-id="9af5d-124">Проверьте hello **сопоставление пользователей требуется многофакторная проверка подлинности Azure** поле, если все пользователи были или будут импортированы в сервер hello и toomulti двухфакторной проверки подлинности субъекта.</span><span class="sxs-lookup"><span data-stu-id="9af5d-124">Check hello **Require Azure Multi-Factor Authentication user match** box if all users have been or will be imported into hello Server and subject toomulti-factor authentication.</span></span> <span data-ttu-id="9af5d-125">Если значительное число пользователей еще не были импортированы в сервер hello или будет исключено из многофакторной проверки подлинности, не hello флажок.</span><span class="sxs-lookup"><span data-stu-id="9af5d-125">If a significant number of users have not yet been imported into hello Server and/or will be exempt from multi-factor authentication, leave hello box unchecked.</span></span>
11. <span data-ttu-id="9af5d-126">Нажмите кнопку **Дополнительно** tooreview Дополнительные параметры, включая:</span><span class="sxs-lookup"><span data-stu-id="9af5d-126">Click **Advanced** tooreview advanced settings, including:</span></span>

  - <span data-ttu-id="9af5d-127">выбрать специальный файл страницы отказа;</span><span class="sxs-lookup"><span data-stu-id="9af5d-127">Select a custom denial page file</span></span>
  - <span data-ttu-id="9af5d-128">Веб-сайт toohello успешных проверок подлинности кэша в течение заданного времени, с помощью файлов cookie</span><span class="sxs-lookup"><span data-stu-id="9af5d-128">Cache successful authentications toohello website for a period of time using cookies</span></span>
  - <span data-ttu-id="9af5d-129">Выберите, будут ли учетные данные источника hello tooauthenticate относительно домена Windows, каталогу LDAP.</span><span class="sxs-lookup"><span data-stu-id="9af5d-129">Select whether tooauthenticate hello primary credentials against a Windows Domain, LDAP directory.</span></span> <span data-ttu-id="9af5d-130">или сервере RADIUS.</span><span class="sxs-lookup"><span data-stu-id="9af5d-130">or RADIUS server.</span></span>

12. <span data-ttu-id="9af5d-131">Нажмите кнопку **ОК** tooreturn toohello основе форм веб-сайт диалоговое окно «».</span><span class="sxs-lookup"><span data-stu-id="9af5d-131">Click **OK** tooreturn toohello Add Form-Based Website dialog box.</span></span>
13. <span data-ttu-id="9af5d-132">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-132">Click **OK**.</span></span>
14. <span data-ttu-id="9af5d-133">Один раз hello URL-адрес и обнаружения или ввода переменные страницы, данные hello веб-сайта отображается в hello панели на основе форм.</span><span class="sxs-lookup"><span data-stu-id="9af5d-133">Once hello URL and page variables have been detected or entered, hello website data displays in hello Form-Based panel.</span></span>

## <a name="using-integrated-windows-authentication-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="9af5d-134">Использование встроенной проверки подлинности Windows с сервером Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="9af5d-134">Using Integrated Windows Authentication with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="9af5d-135">toosecure IIS веб-приложение, использующее встроенную Windows проверку подлинности HTTP, установите hello Azure многофакторной проверки Подлинности сервера на веб-сервере IIS hello, а затем настроить hello Server с hello следующие шаги:</span><span class="sxs-lookup"><span data-stu-id="9af5d-135">toosecure an IIS web application that uses Integrated Windows HTTP authentication, install hello Azure MFA Server on hello IIS web server, then configure hello Server with hello following steps:</span></span>

1. <span data-ttu-id="9af5d-136">В hello Azure многофакторной проверки подлинности сервера щелкните значок проверки подлинности IIS hello в левом меню hello.</span><span class="sxs-lookup"><span data-stu-id="9af5d-136">In hello Azure Multi-Factor Authentication Server, click hello IIS Authentication icon in hello left menu.</span></span>
2. <span data-ttu-id="9af5d-137">Нажмите кнопку hello **HTTP** вкладки.</span><span class="sxs-lookup"><span data-stu-id="9af5d-137">Click hello **HTTP** tab.</span></span>
3. <span data-ttu-id="9af5d-138">Щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-138">Click **Add**.</span></span>
4. <span data-ttu-id="9af5d-139">В диалоговое окно приветствия добавить базовый URL-адрес введите URL-адрес hello hello веб-сайта, где выполняется проверка подлинности HTTP (например, http://localhost/owa) и укажите имя приложения (необязательно).</span><span class="sxs-lookup"><span data-stu-id="9af5d-139">In hello Add Base URL dialogue box, enter hello URL for hello website where HTTP authentication is performed (like http://localhost/owa) and provide an Application name (optional).</span></span> <span data-ttu-id="9af5d-140">Имя приложения Hello отображается в отчетах Azure Multi-factor Authentication и может отображаться в SMS или мобильное приложение проверки подлинности сообщений.</span><span class="sxs-lookup"><span data-stu-id="9af5d-140">hello Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
5. <span data-ttu-id="9af5d-141">Задайте время ожидания простоя hello и максимальное время сеанса Если hello по умолчанию недостаточно.</span><span class="sxs-lookup"><span data-stu-id="9af5d-141">Adjust hello Idle timeout and Maximum session times if hello default is not sufficient.</span></span>
6. <span data-ttu-id="9af5d-142">Проверьте hello **сопоставление требовать многофакторную проверку подлинности пользователей** поле, если все пользователи были или будут импортированы в сервер hello и toomulti двухфакторной проверки подлинности субъекта.</span><span class="sxs-lookup"><span data-stu-id="9af5d-142">Check hello **Require Multi-Factor Authentication user match** box if all users have been or will be imported into hello Server and subject toomulti-factor authentication.</span></span> <span data-ttu-id="9af5d-143">Если значительное число пользователей еще не были импортированы в сервер hello или будет исключено из многофакторной проверки подлинности, не hello флажок.</span><span class="sxs-lookup"><span data-stu-id="9af5d-143">If a significant number of users have not yet been imported into hello Server and/or will be exempt from multi-factor authentication, leave hello box unchecked.</span></span>
7. <span data-ttu-id="9af5d-144">Проверьте hello **кэша Cookie** поле при необходимости.</span><span class="sxs-lookup"><span data-stu-id="9af5d-144">Check hello **Cookie cache** box if desired.</span></span>
8. <span data-ttu-id="9af5d-145">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-145">Click **OK**.</span></span>

## <a name="enable-iis-plug-ins-for-azure-multi-factor-authentication-server"></a><span data-ttu-id="9af5d-146">Включение подключаемых модулей IIS для сервера Azure Multi-Factor Authentication</span><span class="sxs-lookup"><span data-stu-id="9af5d-146">Enable IIS Plug-ins for Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="9af5d-147">После настройки hello форм или URL-адреса для проверки подлинности HTTP и параметры, выберите hello места, откуда hello подключаемые модули IIS Azure Multi-factor Authentication необходимо загрузить и включена в службах IIS.</span><span class="sxs-lookup"><span data-stu-id="9af5d-147">After configuring hello Form-Based or HTTP authentication URLs and settings, select hello locations where hello Azure Multi-Factor Authentication IIS plug-ins should be loaded and enabled in IIS.</span></span> <span data-ttu-id="9af5d-148">Hello используйте следующие процедуры:</span><span class="sxs-lookup"><span data-stu-id="9af5d-148">Use hello following procedure:</span></span>

1. <span data-ttu-id="9af5d-149">При работе в IIS 6 щелкните hello **ISAPI** вкладки. Выберите hello веб-сайт, который hello веб-приложение работает (например Default Web Site) tooenable hello Azure многофакторной проверки подлинности подключаемый модуль фильтра ISAPI для этого сайта.</span><span class="sxs-lookup"><span data-stu-id="9af5d-149">If running on IIS 6, click hello **ISAPI** tab. Select hello website that hello web application is running under (e.g. Default Web Site) tooenable hello Azure Multi-Factor Authentication ISAPI filter plug-in for that site.</span></span>
2. <span data-ttu-id="9af5d-150">Если запущен в службах IIS 7 или более поздней версии, щелкните hello **собственный модуль** вкладки. Выберите сервер hello, веб-сайтов или приложений tooenable hello подключаемый модуль IIS на уровнях требуемого hello.</span><span class="sxs-lookup"><span data-stu-id="9af5d-150">If running on IIS 7 or higher, click hello **Native Module** tab. Select hello server, websites, or applications tooenable hello IIS plug-in at hello desired levels.</span></span>
3. <span data-ttu-id="9af5d-151">Нажмите кнопку hello **проверки подлинности IIS включить** поле вверху hello экран приветствия.</span><span class="sxs-lookup"><span data-stu-id="9af5d-151">Click hello **Enable IIS authentication** box at hello top of hello screen.</span></span> <span data-ttu-id="9af5d-152">Azure Multi-factor Authentication теперь обеспечивает безопасность hello выбранного приложения служб IIS.</span><span class="sxs-lookup"><span data-stu-id="9af5d-152">Azure Multi-Factor Authentication is now securing hello selected IIS application.</span></span> <span data-ttu-id="9af5d-153">Убедитесь, что пользователи были импортированы в сервер hello.</span><span class="sxs-lookup"><span data-stu-id="9af5d-153">Ensure that users have been imported into hello Server.</span></span>

## <a name="trusted-ips"></a><span data-ttu-id="9af5d-154">Надежные IP-адреса</span><span class="sxs-lookup"><span data-stu-id="9af5d-154">Trusted IPs</span></span>
<span data-ttu-id="9af5d-155">Hello надежных IP-адресов позволяет пользователям toobypass Azure Multi-factor Authentication для запросов веб-сайтов, исходящих от определенных IP-адресов или подсетей.</span><span class="sxs-lookup"><span data-stu-id="9af5d-155">hello Trusted IPs allows users toobypass Azure Multi-Factor Authentication for website requests originating from specific IP addresses or subnets.</span></span> <span data-ttu-id="9af5d-156">Например может потребоваться tooexempt пользователей из Azure многофакторной проверки подлинности при входе из офиса hello.</span><span class="sxs-lookup"><span data-stu-id="9af5d-156">For example, you may want tooexempt users from Azure Multi-Factor Authentication while logging in from hello office.</span></span> <span data-ttu-id="9af5d-157">Для этого следует указать подсети hello office как запись надежных IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="9af5d-157">For this, you would specify hello office subnet as a Trusted IPs entry.</span></span> <span data-ttu-id="9af5d-158">tooconfigure надежных IP-адресов, используйте процедуры hello:</span><span class="sxs-lookup"><span data-stu-id="9af5d-158">tooconfigure Trusted IPs, use hello following procedure:</span></span>

1. <span data-ttu-id="9af5d-159">В hello разделе проверки подлинности IIS, выберите hello **надежных IP-адресов** вкладки.</span><span class="sxs-lookup"><span data-stu-id="9af5d-159">In hello IIS Authentication section, click hello **Trusted IPs** tab.</span></span>
2. <span data-ttu-id="9af5d-160">Щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-160">Click **Add**.</span></span>
3. <span data-ttu-id="9af5d-161">Когда появится диалоговое окно Добавить надежных IP-адресов hello, выберите hello **один IP-адрес**, **диапазон IP-адресов**, или **подсети** переключатель.</span><span class="sxs-lookup"><span data-stu-id="9af5d-161">When hello Add Trusted IPs dialog box appears, select hello **Single IP**, **IP range**, or **Subnet** radio button.</span></span>
4. <span data-ttu-id="9af5d-162">Введите hello IP-адрес, диапазон IP-адреса или подсети, следует включить в список разрешенных.</span><span class="sxs-lookup"><span data-stu-id="9af5d-162">Enter hello IP address, range of IP addresses or subnet that should be whitelisted.</span></span> <span data-ttu-id="9af5d-163">При вводе подсети, выберите hello соответствующими маска подсети и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9af5d-163">If entering a subnet, select hello appropriate Netmask and click **OK**.</span></span> <span data-ttu-id="9af5d-164">белый список Hello добавлена.</span><span class="sxs-lookup"><span data-stu-id="9af5d-164">hello whitelist has now been added.</span></span>
