---
title: "Условия соответствия для обработчика правил Azure CDN | Документация Майкрософт"
description: "Справочная документация по условиям соответствия и функциям обработчика правил Azure CDN."
services: cdn
documentationcenter: 
author: Lichard
manager: akucer
editor: 
ms.assetid: 669ef140-a6dd-4b62-9b9d-3f375a14215e
ms.service: cdn
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: rli
ms.openlocfilehash: f4886b1d78dfa87cf25737fb46c12b5963034f27
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-cdn-rules-engine-match-conditions"></a>Условия соответствия обработчика правил Azure CDN
В этом разделе подробно описаны доступные условия соответствия для [обработчика правил](cdn-rules-engine.md) сети доставки содержимого (CDN) Azure.

Вторая часть правила — это условие соответствия. Условие соответствия определяет различные типы запросов, для которых будет выполнен ряд функций.

Например, оно может использоваться для фильтрации запросов к содержимому в определенном расположении, фильтрации запросов, поступающих из определенной страны или с определенного IP-адреса, или для фильтрации по сведениям о заголовке.

## <a name="always"></a>Всегда

Условие соответствия "Всегда" предназначено для применения набора функций по умолчанию ко всем запросам.

## <a name="device"></a>Устройство

Условие соответствия "Устройство" определяет запросы, поступающие с мобильного устройства, на основе его свойств.  Мобильные устройства обнаруживаются с помощью [WURFL](http://wurfl.sourceforge.net/).  Ниже перечислены возможности WURFL и связанные с ними переменные обработчика правил CDN.

> [!NOTE] 
> Следующие переменные поддерживаются в возможностях **Заголовок запроса Modify Client** и **Заголовок ответа Modify Client**.

Функция | Переменная | Описание | Пример значений
-----------|----------|-------------|----------------
Название торговой марки | %{wurfl_cap_brand_name} | Строка, указывающая название торговой марки устройства. | Samsung
ОС устройства | %{wurfl_cap_device_os} | Строка, указывающая операционную систему, установленную на устройстве. | iOS
Версия ОС устройства | %{wurfl_cap_device_os_version} | Строка, указывающая номер версии операционной системы, установленной на устройстве. | 1.0.1
Двойная ориентация | %{wurfl_cap_dual_orientation} | Логическое значение, указывающее на то, поддерживает ли устройство двойную ориентацию. | Да
Предпочитаемое DTD для HTML | %{wurfl_cap_html_preferred_dtd} | Строка, указывающая предпочитаемое определение типа документа (DTD) для HTML-содержимого для мобильного устройства. | Нет<br/>xhtml_basic<br/>html5
Встраивание изображения | %{wurfl_cap_image_inlining} | Логическое значение, указывающее на то, поддерживает ли устройство изображения в кодировке Base64. | нет
Используется ОС Android | %{wurfl_vcap_is_android} | Логическое значение, указывающее на то, использует ли устройство ОС Android. | Да
Используется ОС iOS | %{wurfl_vcap_is_ios} | Логическое значение, указывающее на то, использует ли устройство ОС iOS. | нет
Является устройством типа Smart TV | %{wurfl_cap_is_smarttv} | Логическое значение, указывающее на то, является ли устройство устройством типа Smart TV. | нет
Является смартфоном | %{wurfl_vcap_is_smartphone} | Логическое значение, указывающее на то, является ли устройство смартфоном. | Да
Является планшетом | %{wurfl_cap_is_tablet} | Логическое значение, указывающее на то, является ли устройство планшетом. Это описание не зависит от операционной системы. | Да
Является беспроводным устройством | %{wurfl_cap_is_wireless_device} | Логическое значение, указывающее на то, является ли устройство беспроводным. | Да
Маркетинговое имя | %{wurfl_cap_marketing_name} | Строка, указывающая маркетинговое имя устройства. | BlackBerry 8100 Pearl
Браузер мобильного устройства | %{wurfl_cap_mobile_browser} | Строка, указывающая браузер, используемый для запроса содержимого на устройстве. | Chrome
Версия браузера мобильного устройства | %{wurfl_cap_mobile_browser_version} | Строка, указывающая версию браузера, используемого для запроса содержимого на устройстве. | 31
Имя модели | %{wurfl_cap_model_name} | Строка, указывающая имя модели устройства. | s3
Прогрессивное скачивание | %{wurfl_cap_progressive_download} | Логическое значение, указывающее на то, поддерживает ли устройство воспроизведение аудио- и видеофайлов во время скачивания. | Да
Дата выпуска | %{wurfl_cap_release_date} | Строка, указывающая год и месяц добавления устройства в базу данных WURFL.<br/><br/>Формат: `yyyy_mm` | 2013_december
Высота в разрешении | %{wurfl_cap_resolution_height} | Целое число, указывающее высоту устройства в пикселях. | 768
Ширина в разрешении | %{wurfl_cap_resolution_width} | Целое число, указывающее ширину устройства в пикселях. | 1024


## <a name="location"></a>Расположение

Эти условия соответствия предназначены для определения запросов на основе расположения запрашивающей стороны.

Имя | Назначение
-----|--------
Номер AS | Определяет запросы, поступающие из конкретной сети.
Страна | Определяет запросы, поступающие из указанных стран.


## <a name="origin"></a>Исходный домен

Эти условия соответствия предназначены для определения запросов, которые указывают на хранилище CDN или сервер-источник клиента.

Имя | Назначение
-----|--------
Источник CDN | Определяет запросы к содержимому в хранилище CDN.
Источник клиента | Определяет запросы к содержимому, хранящемуся на конкретном сервере-источнике клиента.


## <a name="request"></a>Запрос

Эти условия соответствия предназначены для определения запросов на основе их свойств.

Имя | Назначение
-----|--------
IP-адрес клиента | Определяет запросы, поступающие с конкретного IP-адреса.
Параметр файла cookie | Проверяет файлы cookie, связанные с каждым запросом, на наличие указанного значения.
Регулярное выражение параметра файла cookie | Проверяет файлы cookie, связанные с каждым запросом, на наличие указанного регулярного выражения.
Граничная запись Cname | Определяет запрос, который указывает на конкретную граничную запись CNAME.
Домен источников ссылок | Определяет запросы, на которые давались ссылки с указанного имени узла.
Литерал заголовка запроса | Определяет запросы, содержащие указанный заголовок, для которого задано указанное значение.
Регулярное выражение заголовка запроса | Определяет запросы, содержащие указанный заголовок, для которого задано значение, соответствующее указанному регулярному выражению.
Шаблон заголовка запроса | Определяет запросы, содержащие указанный заголовок, для которого задано значение, соответствующее указанному шаблону.
Метод запроса | Определяет запросы по их HTTP-методу.
Схема запроса | Определяет запросы по их HTTP-протоколу.

## <a name="url"></a>URL-адрес

Эти условия соответствия предназначены для определения запросов на основе их URL-адресов.

Имя | Назначение
-----|--------
Каталог URL-пути | Определяет запросы по относительному пути.
Расширение URL-пути | Определяет запросы по их расширению имени файла.
Имя файла URL-пути | Определяет запросы по их имени файла.
Литерал URL-пути | Сравнивает относительный путь запроса с указанным значением.
Регулярное выражение URL-пути | Сравнивает относительный путь запроса с указанным регулярным выражением.
Шаблон URL-пути | Сравнивает относительный путь запроса с указанным шаблоном.
Литерал запроса URL-адреса | Сравнивает строку запроса с указанным значением.
Параметр запроса URL-адреса | Определяет запросы, содержащие указанный параметр строки запроса, для которого задано значение, соответствующее указанному шаблону.
Регулярное выражение запроса URL-адреса | Определяет запросы, содержащие указанный параметр строки запроса, для которого задано значение, соответствующее указанному регулярному выражению.
Шаблон запроса URL-адреса | Сравнивает указанное значение со строкой запроса.


## <a name="next-steps"></a>Дальнейшие действия
* [Обзор Azure CDN](cdn-overview.md)
* [Справочник по обработчику правил](cdn-rules-engine-reference.md)
* [Условные выражения обработчика правил](cdn-rules-engine-reference-conditional-expressions.md)
* [Функции обработчика правил](cdn-rules-engine-reference-features.md)
* [Переопределение стандартного поведения через HTTP с помощью обработчика правил](cdn-rules-engine.md)

