---
title: "Оповещения в режиме реального времени в Azure CDN | Документация Майкрософт"
description: "Оповещения в режиме реального времени в сети CDN Microsoft Azure. Оповещения в режиме реального времени позволяют получать уведомления о производительности конечных точек в профиле CDN."
services: cdn
documentationcenter: 
author: zhangmanling
manager: erikre
editor: 
ms.assetid: 1e85b809-e1a9-4473-b835-69d1b4ed3393
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: mazha
ms.openlocfilehash: 51dce1680be5f5f4387c2ba02827195bcdbe9b48
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="real-time-alerts-in-microsoft-azure-cdn"></a>Оповещения в режиме реального времени в сети CDN Microsoft Azure
[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="overview"></a>Обзор
В этом документе содержатся сведения об оповещениях в режиме реального времени в сети CDN Microsoft Azure. Эта функция предоставляет актуальные уведомления о производительности конечных точек в профиле CDN.  Вы можете настроить сообщения с оповещением или оповещения HTTP на основе:

* Пропускная способность
* Коды состояний
* Состояния кэша
* Подключения

## <a name="creating-a-real-time-alert"></a>Создание оповещения в режиме реального времени
1. На [портале Azure](https://portal.azure.com) перейдите к профилю CDN.
   
    ![Профиль сети CDN](./media/cdn-real-time-alerts/cdn-profile-blade.png)
1. В колонке профиля сети CDN нажмите кнопку **Управление** .
   
    ![Кнопка управления для профиля CDN](./media/cdn-real-time-alerts/cdn-manage-btn.png)
   
    Откроется портал управления CDN.
3. Наведите указатель на вкладку **Аналитика**, а затем на всплывающее окно **Real-Time Stats** (Статистика в реальном времени).  Щелкните **Real-Time Alerts**(Оповещения в реальном времени).
   
    ![Портал управления CDN](./media/cdn-real-time-alerts/cdn-premium-portal.png)
   
    Отобразится список имеющихся конфигураций оповещений (при их наличии).
4. Нажмите кнопку **Добавить оповещение** .
   
    ![Кнопка "Добавить оповещение"](./media/cdn-real-time-alerts/cdn-add-alert.png)
   
    Откроется форма для создания оповещения.
   
    ![Форма нового оповещения](./media/cdn-real-time-alerts/cdn-new-alert.png)
5. Если вы хотите, чтобы оповещение становилось активным после нажатия кнопки **Сохранить**, установите флажок **Alert Enabled** (Оповещение включено).
6. В поле **Имя** введите описательное имя для оповещения.
7. В раскрывающемся списке **Media Type** (Тип носителя) выберите **HTTP Large Object** (Большой объект HTTP).
   
    ![Параметр Media Type (Тип носителя) с выбранным значением HTTP Large Object (Большой объект HTTP)](./media/cdn-real-time-alerts/cdn-http-large.png)
   
   > [!IMPORTANT]
   > В качестве **типа носителя** нужно выбрать **HTTP Large Object** (Большой объект HTTP).  **Azure CDN от Verizon**не поддерживает другие типы.  Если не выбрать тип **Большой объект HTTP**, оповещения не будут активироваться.
   > 
   > 
8. Создайте **выражение** для мониторинга, выбрав значения параметров **Метрика**, **Оператор** и **Триггер**.
   
   * Для параметра **Метрика** выберите тип условия, по которому следует осуществлять мониторинг.  **Bandwidth Mbps** (Пропускная способность в Мбит/с) — это объем использования пропускной способности в мегабитах в секунду.  **Всего подключений** — число одновременных подключений HTTP к нашим пограничным серверам.  Определения различных состояний кэша и кодов состояния см. в разделах [Azure CDN Cache Status Codes](https://msdn.microsoft.com/library/mt759237.aspx) (Коды состояния кэша в сети Azure CDN) и [Azure CDN HTTP Status Codes](https://msdn.microsoft.com/library/mt759238.aspx) (Коды состояний HTTP в сети Azure CDN).
   * **Оператор** — математический оператор, который устанавливает связь между метрикой и значением триггера.
   * **Значение триггера** — пороговое значение, которое должно быть достигнуто для отправки уведомления.
     
     В следующем примере созданное выражение указывает на то, что уведомление отправляется, когда число кодов состояния 404 превышает 25.
     
     ![Пример выражения для оповещения в режиме реального времени](./media/cdn-real-time-alerts/cdn-expression.png)
9. Для параметра **Интервал**укажите, как часто следует проверять выражение.
10. В раскрывающемся списке **Notify on** (Когда уведомлять) выберите, когда вы хотите получать уведомления, если выражение совпадает.
    
    * **Начало условия** — уведомление будет отправлено при обнаружении указанного условия.
    * **Конец условия** — уведомление будет отправлено, если указанное условие больше не выполняется. Это уведомление будет активировано, только когда система мониторинга сети обнаружит, что заданное условие выполнено.
    * **Непрерывно** — уведомление будет отправляться каждый раз, когда система мониторинга сети обнаруживает указанное условие. Учтите, что система мониторинга сети проверяет выполнение заданного условия только один раз в рамках интервала.
    * **Начало и конец условия** — уведомления будут отправляться сразу после обнаружения заданного условия и еще раз, когда условие больше не будет выполняться.
1. Если вы хотите получать уведомления по электронной почте, установите флажок **Notify by Email** (Уведомлять по электронной почте).  
    
    ![Форма уведомления по электронной почте](./media/cdn-real-time-alerts/cdn-notify-email.png)
    
    В поле **Кому** введите адрес электронной почты для отправки уведомлений. В полях **Тема** и **Текст** можно оставить значения по умолчанию либо можно настроить сообщение с помощью списка **Available keywords** (Доступные ключевые слова), чтобы динамически вставлять данные оповещения при отправке сообщения.
    
    > [!NOTE]
    > Вы можете проверить уведомление по электронной почте. Для этого после сохранения конфигурации оповещений нажмите кнопку **Test Notification** (Проверить уведомление).
    > 
    > 
12. Чтобы публиковать уведомления на веб-сервере, установите флажок **Notify by HTTP Post** (Уведомлять с помощью HTTP Post).
    
    ![Форма уведомления HTTP Post](./media/cdn-real-time-alerts/cdn-notify-http.png)
    
    В поле **URL-адрес** введите URL-адрес для публикации HTTP-сообщения. В текстовом поле **Заголовки** введите заголовки HTTP, отправляемые в запросе.  В поле **Текст** можно настроить сообщение с помощью списка **Доступные ключевые слова**, чтобы динамически вставлять данные оповещения при отправке сообщения.  По умолчанию в полях **Заголовки** и **Текст** содержатся полезные данные XML, как в примере ниже:
    
    ```
    <string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
        <![CDATA[Expression=Status Code : 404 per second > 25&Metric=Status Code : 404 per second&CurrentValue=[CurrentValue]&NotificationCondition=Condition Start]]>
    </string>
    ```
    
    > [!NOTE]
    > Вы можете проверить уведомление HTTP Post. Для этого после сохранения конфигурации оповещений нажмите кнопку **Test Notification** (Проверить уведомление).
    > 
    > 
13. Нажмите кнопку **Сохранить** , чтобы сохранить конфигурацию оповещений.  Если вы установили флажок **Alert Enabled** (Оповещение включено) на шаге 5, оповещение активно.

## <a name="next-steps"></a>Дальнейшие действия
* Ознакомьтесь со статьей [Статистика в реальном времени в сети CDN Microsoft Azure](cdn-real-time-stats.md).
* Дополнительные сведения о [расширенных HTTP-отчетах](cdn-advanced-http-reports.md).
* [Анализ вариантов использования CDN Azure](cdn-analyze-usage-patterns.md).

