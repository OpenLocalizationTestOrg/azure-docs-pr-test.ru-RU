---
title: "Интеграция учетной записи хранения Azure с Azure CDN | Документация Майкрософт"
description: "Узнайте, как использовать сеть доставки содержимого (CDN) Azure для доставки больших объемов контента с помощью кэширования BLOB-объектов в службе хранилища Azure."
services: cdn
documentationcenter: 
author: zhangmanling
manager: erikre
editor: 
ms.assetid: cbc2ff98-916d-4339-8959-622823c5b772
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: mazha
ms.openlocfilehash: 511076935d06ed0908341044e37069e74530be49
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="integrate-an-azure-storage-account-with-azure-cdn"></a>Интеграция учетной записи хранения Azure с Azure CDN
CDN можно включить для кэширования содержимого из хранилища Azure. Она предоставляет разработчикам глобальное решение для доставки большого объема содержимого с возможностью кэширования больших двоичных объектов и статического содержимого на физических узлах в США, Европе, Азии, Австралии и Южной Америке.

## <a name="step-1-create-a-storage-account"></a>Шаг 1. Создание учетной записи хранения
Чтобы создать новую учетную запись хранения для подписки Azure, воспользуйтесь следующей процедурой. Учетная запись хранения предоставляет доступ к службам хранилища Azure. Учетная запись хранения представляет собой высший уровень пространства имен для доступа ко всем компонентам службы хранения Azure: службам BLOB-объектов, службам очередей и службам таблиц. Дополнительные сведения см. в статье [Введение в хранилище Microsoft Azure](../storage/common/storage-introduction.md).

Чтобы создать учетную запись хранения, вы должны быть администратором службы или соадминистратором для связанной подписки.

> [!NOTE]
> Существует несколько способов, которые можно использовать для создания учетной записи хранения. В их число входят портал Azure и Powershell.  В этом учебнике мы будем использовать портал Azure.  
> 
> 

**Создание учетной записи хранения для подписки Azure**

1. Войдите на [портал Azure](https://portal.azure.com).
2. В нижнем левом углу щелкните **Создать**. В диалоговом окне **Создать** выберите **Данные + хранилище**, затем щелкните **Учетная запись хранения**.
    
    Появится колонка **Учетная запись хранения** .   

    ![Учетная запись хранения][create-new-storage-account]  

3. В поле **Имя** введите имя поддомена. Запись может содержать от 3 до 24 строчных букв и цифр.
   
    Это значение станет именем узла в URI, который используется для адресации ресурсов большого двоичного объекта, очереди и таблицы в подписке. Чтобы обратиться по адресу ресурса контейнера в службе BLOB-объектов, следует использовать URI в следующем формате, где *&lt;StorageAccountLabel&gt;* указывает значение, которое вы ввели в поле **Введите URL-адрес**:
   
    http://*&lt;StorageAcountLabel&gt;*.blob.core.windows.net/*&lt;мой_контейнер&gt;*
   
    **Важно!** Метка URL-адреса образует поддомен URI учетной записи хранения и должна быть уникальной на уровне всех размещенных служб в Azure.
   
    Это значение также используется как имя этой учетной записи хранения на портале или при доступе к данной учетной записи программным способом.
4. Оставьте значения по умолчанию для **модели развертывания**, **типа учетной записи**, **производительности** и **репликации**. 
5. Выберите **подписку** , с которой будет использоваться данная учетная запись хранения.
6. Выберите или создайте **группу ресурсов**.  Дополнительные сведения о группах ресурсов см. в статье [Общие сведения об Azure Resource Manager](../azure-resource-manager/resource-group-overview.md#resource-groups).
7. Выберите расположение для вашей учетной записи хранения.
8. Щелкните **Создать**. Процесс создания учетной записи хранения может занять несколько минут.

## <a name="step-2-enable-cdn-for-the-storage-account"></a>Шаг 2. Включение CDN для учетной записи хранения

Благодаря последней интеграции теперь можно включать CDN для вашей учетной записи хранения, не выходя из расширения портала хранилища. 

1. Выберите учетную запись хранения, выполните поиск по запросу "CDN" или прокрутите меню навигации слева и щелкните Azure CDN.
    
    Откроется колонка **Azure CDN**.

    ![Навигация для включения CDN][cdn-enable-navigation]
    
2. Создайте новую конечную точку, указав необходимые сведения.
    - **Профиль CDN**. Вы можете создать новый профиль или использовать существующий.
    - **Ценовая категория**. Ценовую категорию необходимо выбрать, только если вы создаете новый профиль CDN.
    - **Имя конечной точки CDN**. Введите имя конечной точки.

    > [!TIP]
    > Созданная конечная точка CDN использует имя узла учетной записи хранения как источник по умолчанию.

    ![cdn new endpoint creation][cdn-new-endpoint-creation]

3. После создания новая конечная точка отобразится в списке конечных точек.

    ![Новая конечная точка хранилища CDN][cdn-storage-new-endpoint]

> [!NOTE]
> Также для включения CDN можно перейти к расширению Azure CDN. [Руководство](#Tutorial-cdn-create-profile).
> 
> 

[!INCLUDE [cdn-create-profile](../../includes/cdn-create-profile.md)]  

## <a name="step-3-enable-additional-cdn-features"></a>Шаг 3. Включение дополнительных функций CDN

В колонке Azure CDN учетной записи хранения щелкните в списке конечную точку CDN, чтобы открыть колонку конфигурации CDN. Можно включить дополнительные функции CDN, например сжатие, строку запроса, геофильтрацию. Можно также добавить сопоставление личного домена для конечной точки CDN и включить личный домен HTTPS.
    
![Конфигурация CDN хранилища CDN][cdn-storage-cdn-configuration]

## <a name="step-4-access-cdn-content"></a>Шаг 4. Доступ к содержимому CDN
Для доступа к кэшированному содержимому в сети CDN воспользуйтесь URL-адресом CDN, отображаемым в портале. Адрес для кэшированного BLOB-объекта будет иметь следующий вид:

http://<*имя_конечной_точки*\>.azureedge.net/<*общедоступный_контейнер*\>/<*имя_большого_двоичного_объекта*\>

> [!NOTE]
> После включения доступа CDN к учетной записи хранения все общедоступные объекты будут пригодны для пограничного кэширования CDN. Если изменить объект, находящийся в данный момент в кэше сети CDN, новое содержимое будет недоступно через сеть CDN до обновления содержимого CDN по истечении срока действия кэшированного содержимого.
> 
> 

## <a name="step-5-remove-content-from-the-cdn"></a>Шаг 5. Удаление содержимого из сети CDN
Если кэширование объекта в сети CDN Azure больше не требуется, можно выполнить одно из следующих действий.

* Можно сделать контейнер закрытым, а не общедоступным. Дополнительные сведения см. в статье [Управление анонимным доступом на чтение к контейнерам и большим двоичным объектам](../storage/blobs/storage-manage-access-to-resources.md).
* Вы можете отключить или удалить конечную точку CDN на портале управления.
* Вы можете изменить размещенную службу, чтобы она перестала отвечать на запросы объекта.

Объект, уже кэшированный в сети CDN, останется в кэше до истечения срока действия этого объекта или до удаления конечной точки. По истечении срока действия CDN выполнит проверку конечной точки CDN, чтобы выяснить, что она еще действует и объект по-прежнему находится в анонимном доступе. Если это не так, объект больше не будет кэшироваться.

## <a name="additional-resources"></a>Дополнительные ресурсы
* [Сопоставление содержимого CDN с пользовательским доменом](cdn-map-content-to-custom-domain.md)
* [Включение протокола HTTPS для личного домена Azure CDN](cdn-custom-ssl.md)

[create-new-storage-account]: ./media/cdn-create-a-storage-account-with-cdn/CDN_CreateNewStorageAcct.png
[cdn-enable-navigation]: ./media/cdn-create-a-storage-account-with-cdn/cdn-storage-new-endpoint-creation.png
[cdn-storage-new-endpoint]: ./media/cdn-create-a-storage-account-with-cdn/cdn-storage-new-endpoint-list.png
[cdn-storage-cdn-configuration]: ./media/cdn-create-a-storage-account-with-cdn/cdn-storage-endpoint-configuration.png 
