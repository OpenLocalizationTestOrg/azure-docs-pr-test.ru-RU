---
title: "Управление политикой кэширования Azure CDN в службах мультимедиа Azure | Документация Майкрософт"
description: "Узнайте, как управлять политикой кэширования Azure CDN в службах мультимедиа Azure."
services: media-services,cdn
documentationcenter: .NET
author: juliako
manager: erikre
editor: 
ms.assetid: be33aecc-6dbe-43d7-a056-10ba911e0e94
ms.service: media-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 02/04/2017
ms.author: juliako
ms.openlocfilehash: bcb5a6e118c779e7e13ba8472d5bba510cddeb12
ms.sourcegitcommit: 719dd33d18cc25c719572cd67e4e6bce29b1d6e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2018
---
# <a name="manage-azure-cdn-caching-policy-in-azure-media-services"></a>Управление политикой кэширования Azure CDN в службах мультимедиа Azure
Службы мультимедиа Azure предоставляют адаптивную потоковую передачу и прогрессивное скачивание на основе протокола HTTP. На основе HTTP потоковой передачи имеет высокую степень масштабируемости с преимущества кэширования в прокси-сервера и слои CDN, а также кэширование на стороне клиента. Функция конечных точек потоковой передачи предоставляет общие возможности потоковой передачи, а также конфигурацию для заголовков кэша HTTP. Она также задает заголовки HTTP Cache-Control: max-age и Expires. Узнать больше о заголовках кэша HTTP можно на веб-сайте [W3.org](http://www.w3.org/Protocols/rfc2616/rfc2616-sec13.html).

## <a name="default-caching-headers"></a>Заголовки кэша по умолчанию
Конечные точки потоковой передачи по умолчанию используют 3-дневные заголовки кэша для потоковой передачи данных по требованию (собственно мультимедийных фрагментов/блоков) и манифеста (списка воспроизведения). Для динамической потоковой передачи конечные точки потоковой передачи используют 3-дневные заголовки кэша для данных (собственно мультимедийных фрагментов/блоков) и 2-секундный заголовок для запросов манифеста (списка воспроизведения). При динамической программа становится по запросу (динамического архива), применяются кэша заголовки по требованию для потоковой передачи.

## <a name="azure-cdn-integration"></a>Интеграция Azure CDN
Службы мультимедиа Azure обеспечивают [интегрированную сеть CDN](https://azure.microsoft.com/updates/azure-media-services-now-fully-integrated-with-azure-cdn/) для конечных точек потоковой передачи. Заголовки Cache-control применяются таким же образом, как и конечные точки потоковой передачи для таких же точек с поддержкой CDN. В сетях CDN Azure значения кэша, настроенные для конечных точек потоковой передачи, используются, чтобы определить жизненный цикл внутренне кэшированных объектов и задать заголовки кэша доставки. При использовании конечных точек потоковой передачи с поддержкой CDN не рекомендуется устанавливать небольшие значения кэша. Малые значения параметра приведет к снижению производительности и снижения преимуществом CDN. Задать заголовки кэша менее 600 секунд для конечных точек потоковой передачи с поддержкой CDN невозможно.

> [!IMPORTANT]
>Службы мультимедиа Azure полностью интегрированы с Azure CDN. Одним щелчком можно интегрировать всех доступных Azure CDN поставщиков (Akamai и Verizon) для вашей конечной точки потоковой передачи, включая продукты CDN Standard и Premium. Дополнительные сведения см. в [этом объявлении](https://azure.microsoft.com/blog/standardstreamingendpoint/).
> 
> Данные расходы на потоковой передачи конечной точки CDN только возвращает отключен, если CDN включена через API-интерфейсы конечной точки потоковой передачи или с помощью портала Azure потоковой передачи конечной точки раздела. Интеграция вручную или непосредственное создание конечной точки CDN, с помощью API-интерфейсов CDN или портала раздела не отключить затратами на обмен данными.

## <a name="configuring-cache-headers-with-azure-media-services"></a>Настройка заголовков кэша с помощью служб мультимедиа Azure
Портал Azure или API служб мультимедиа Azure можно использовать для настройки значений заголовков кэша.

1. Для настройки заголовков кэша, с помощью портала Azure, см. [конечных точек потоковой передачи управления](../media-services/media-services-portal-manage-streaming-endpoints.md) статьи Настройка конечной точки потоковой передачи.
2. Интерфейс REST API служб мультимедиа Azure, [StreamingEndpoint](https://msdn.microsoft.com/library/azure/dn783468.aspx#StreamingEndpointCacheControl).
3. Пакет SDK для служб мультимедиа Azure для .NET, [свойства StreamingEndpointCacheControl](http://go.microsoft.com/fwlink/?LinkId=615302).

## <a name="cache-configuration-precedence-order"></a>Порядок приоритета конфигурации кэша
1. Настроенные значения кэша служб мультимедиа Azure переопределяют значение по умолчанию.
2. Если нет никакой дополнительной настройки, применяются значения по умолчанию.
3. По умолчанию для манифеста динамической потоковой передачи (списка воспроизведения) используются 2-секундные заголовки кэша независимо от конфигурации мультимедиа Azure или службы хранилища Azure, и переопределить это значение невозможно.

