---
title: "функции ядра СУБД правила aaaAzure CDN | Документы Microsoft"
description: "Справочная документация по условиям соответствия и функциям обработчика правил Azure CDN."
services: cdn
documentationcenter: 
author: Lichard
manager: akucer
editor: 
ms.assetid: 669ef140-a6dd-4b62-9b9d-3f375a14215e
ms.service: cdn
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: rli
ms.openlocfilehash: c10b8ef58e3d209b12fbb0ac2173e1ca51ff7538
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-cdn-rules-engine-features"></a>Функции обработчика правил Azure CDN
В этом разделе перечислены подробные описания доступных функций hello для Azure доставки содержимого сети (CDN) [обработчик правил](cdn-rules-engine.md).

Третья часть Hello правила — функция hello. Функция определяет hello тип действия, который будет применен toohello тип запроса определяется набор условий соответствия.

## <a name="access"></a>Access

Эти компоненты, разработанные toocontrol toocontent доступа.


Имя | Назначение
-----|--------
Запрет доступа | Определяет, отклоняются ли все запросы с ответом 403 (запрещено).
Проверка подлинности на основе маркеров | Определяет ли токены проверки подлинности применяются tooa запроса.
Код отказа при проверки подлинности на основе маркеров | Определяет тип ответа, будут возвращаться tooa пользователя, когда запрос отклоняется из-за проверку подлинности на основе tooToken hello.
Не учитывать регистр URL-адреса при проверке подлинности на основе маркеров | Определяет, будет ли учитываться регистр в сравнениях URL-адресов, выполненных с помощью проверки подлинности на основе маркеров.
Параметр маркера проверки подлинности | Определяет, следует ли переименование параметра строки запроса проверки подлинности на основе маркеров hello.

### <a name="deny-access"></a>Запрет доступа
**Назначение.** Определяет, отклоняются ли все запросы с ответом 403 (запрещено).

Значение | Результат
------|-------
Включено| В результате все запросы, удовлетворяющие условиям сопоставления критериев toobe hello отклонено 403 запрещено ответ.
Отключено| Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello — tooallow hello исходного сервера toodetermine hello тип ответа, который будет возвращен.

**Поведение по умолчанию.** Отключено.

> [!TIP]
   > Один из возможных способов использования этой функции является tooassociate его с заголовком запроса соответствует условие доступа tooblock tooHTTP источники, использующих встроенное содержимое tooyour ссылки.

### <a name="token-auth"></a>Проверка подлинности на основе маркеров
**Назначение:** определяет, будет ли токены проверки подлинности применяются tooa запрос.

Если включена проверка подлинности на основе маркеров, будет учитываться только запросы, которые предоставляют зашифрованный маркер и соответствовать требованиям к toohello, указанным в этот токен.

Hello ключ шифрования, который будет использовать значения по tooencrypt и расшифровки маркера определяется первичный ключ и параметры резервного копирования ключа на странице проверки подлинности маркера. Имейте в виду, что ключи шифрования специфичны для конкретной платформы.

Значение | Результат
------|---------
Включено | Защищает hello запрошенного содержимого с помощью проверки подлинности на основе маркеров. Принимаются запросы только от тех клиентов, которые предоставляют допустимый маркер и соответствуют требованиям. На транзакции FTP проверка подлинности на основе маркеров не распространяется.
Отключено| Восстанавливает поведение по умолчанию hello. Здравствуйте, поведение по умолчанию является tooallow вашей toodetermine конфигурации проверки подлинности на основе маркеров ли запрос, который будет защищен.

**Поведение по умолчанию.** Отключено.

###<a name="token-auth-denial-code"></a>Код отказа при проверки подлинности на основе маркеров
**Назначение:** определяет тип ответа, будут возвращаться tooa пользователя, когда запрос отклоняется из-за проверку подлинности на основе tooToken hello.

Ниже перечислены коды Hello доступных ответа.

Код ответа|Имя ответа|Описание
----------------|-----------|--------
301|Перемещено навсегда|Этот код состояния перенаправляет toohello неправомочным пользователям URL-адрес, указанный в заголовке Location.
302|Найдено|Этот код состояния перенаправляет toohello неправомочным пользователям URL-адрес, указанный в заголовке Location. Этот код состояния: hello общепризнанную стандартную технологию выполнения перенаправления.
307|Временное перенаправление|Этот код состояния перенаправляет toohello неправомочным пользователям URL-адрес, указанный в заголовке Location.
401|Не авторизовано|Одновременное использование этот код состояния и заголовок WWW-Authenticate ответа позволяет tooprompt пользователя для проверки подлинности.
403|Запрещено|Это hello Стандартная 403 запрещено состояние сообщение, которое неавторизованный пользователь будет видеть при попытке tooaccess защищенного содержимого.
404|Файл не найден|Этот код состояния указывает, что клиенту hello HTTP не может toocommunicate с сервером hello, но hello запросил содержимое не найдено.

#### <a name="url-redirection"></a>Перенаправление URL-адреса

Эта функция поддерживает определяемые пользователем URL-АДРЕСЕ перенаправления tooa при настроенных tooreturn 3xx код состояния. Этот URL-адрес определяемого пользователем можно задать, выполнив следующие шаги hello.

1. Выберите код ответа 3xx для функции hello отказ код маркера проверки подлинности.
2. Выберите Location из параметра необязательного имени заголовка.
3. Задайте URL-адрес toohello требуемого параметра необязательное значение заголовка.

Если URL-адрес для 3xx код состояния не определено, hello стандартный ответ, посвященных 3xx код состояния будет возвращен toohello пользователя.

Перенаправление URL-адреса применимо только для кодов ответов 3xx.

Параметр Optional Header Value (Необязательное значение заголовка) поддерживает буквенно-цифровые символы, кавычки и пробелы.

#### <a name="authentication"></a>Аутентификация

Эта функция поддерживает заголовок WWW-Authenticate tooinclude возможность hello при ответе tooan запрос не авторизован для содержимого, защищенного проверкой подлинности на основе маркеров. Если заголовок WWW-Authenticate задана слишком «basic» в конфигурации, затем hello неавторизованному пользователю будут запрашиваться учетные данные учетной записи.

Hello выше конфигурации можно добиться, выполнив следующие шаги hello:

1. Выберите «401» в качестве hello код ответа для функции hello отказ код маркера проверки подлинности.
2. Выберите WWW-Authenticate из параметра Optional Header Name.
3. Для параметра необязательное значение заголовка слишком «основные.»

Заголовок WWW-Authenticate применим только для кодов ответов 401.

### <a name="token-auth-ignore-url-case"></a>Не учитывать регистр URL-адреса при проверке подлинности на основе маркеров
**Назначение.** Определяет, будет ли учитываться регистр в сравнениях URL-адресов, выполненных с помощью проверки подлинности на основе маркеров.

используются следующие параметры Hello, затронутых этой функции.

- ec_url_allow
- ec_ref_allow
- ec_ref_deny

Допустимые значения:

Значение|Результат
---|----
Включено|Вызывает нашей пограничный сервер tooignore регистр при сравнении URL-адреса для проверки подлинности на основе маркеров параметров.
Отключено|Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello предназначен для сравнения URL-адрес для проверки подлинности маркера toobe с учетом регистра.

**Поведение по умолчанию.** Отключено.
 
### <a name="token-auth-parameter"></a>Параметр маркера проверки подлинности
**Назначение:** определяет, следует ли переименование параметра строки запроса проверки подлинности на основе маркеров hello.

Основные сведения

- Значение параметра определяет hello имя параметра строки запроса через который может быть указан маркер.
- Параметр значение не может быть установлен слишком «ec_token».
- Убедитесь, что определение в параметре значение только этого имени hello 
- содержатся только допустимые символы URL-адреса.

Значение|Результат
----|----
Включено|Значение параметра определяет hello имя параметра строки запроса через который должен быть определен маркеры.
Отключено|Маркер может быть указан как параметр строки запроса не определено в URL-адрес запроса hello.

**Поведение по умолчанию.** Отключено. Маркер может быть указан как параметр строки запроса не определено в URL-адрес запроса hello.

## <a name="caching"></a>Caching

Эти компоненты, разработанные toocustomize когда и каким образом содержимое кэшируется.

Имя | Назначение
-----|--------
Параметры пропускной способности | Определяет, будут ли активны параметры регулирования пропускной способности (т. е. ec_rate и ec_prebuf).
Регулирование пропускной способности | Регулирует пропускную способность hello для hello ответ, предоставляемый наших пограничных серверов.
Отключение кэша | Определяет ли hello запроса можно использовать наши кэширования технологии.
Обработка заголовка Cache-Control | Элементы управления hello создания заголовков Cache-Control, hello пограничного сервера при активном компонентов внешних Max-Age.
Строка запроса ключа кэша | Определяет, будет ли ключ кэша hello включить или исключить параметров строки запроса, связанный с запросом.
Перезапись ключа кэша | Перезаписывает ключ кэша hello, связанный с запросом.
Завершение заполнения кэша | Определяет, что происходит, когда результаты запроса в частичном кэше отсутствуют на пограничном сервере.
Сжатие типов файлов | Определяет hello форматы файлов, которые будут сжаты на сервере hello.
Внутренний максимальный срок по умолчанию | Определяет интервал max-age hello по умолчанию для повторная проверка кэша сервера tooorigin пограничного сервера.
Обработка заголовка Expires | Элементы управления hello создания заголовков Expires, пограничного сервера при активном функции hello внешних Max-Age.
Внешний максимальный срок | Определяет интервал max-age hello для повторной проверки подлинности сервера tooedge кэш браузера.
Принудительное использование внутреннего максимального срока | Определяет интервал max-age hello повторная проверка кэша сервера tooorigin пограничного сервера.
Поддержка H.264 (Прогрессивное скачивание через HTTP) | Определяет типы hello H.264 форматы файлов, которые могут быть используется toostream содержимого.
Учитывать запрос без кэша | Определяет, нет-cache запросы HTTP-клиента, будет ли перенаправляться toohello исходного сервера.
Не учитывать источник без кэша | Определяет, будет ли сеть CDN игнорировать некоторые директивы, полученные с сервера-источника.
Игнорировать неподходящие диапазоны | Определяет hello ответ, который будет возвращен tooclients при запросе приводит к возникновению ошибки 416 запрошенный диапазон невыполним код состояния.
Внутреннее максимальное значение устаревания | Определяет, как долго за hello обычного истечения срока действия кэшированного ресурса может быть выдана из пограничного сервера при hello пограничный сервер не удается toorevalidate hello кэшированного ресурса с исходного сервера hello.
Совместное использование частичного кэширования | Определяет, может ли запрос создавать частично кэшированное содержимое.
Предварительная проверка кэшированного содержимого | Определяет, подойдет ли кэшированное содержимое для ранней повторной сверки до истечения его срока действия.
Обновление файлов кэша нулевой длины | Определяет способ обработки запроса HTTP-клиента к ресурсу кэша нулевой длины пограничными серверами.
Набор кодов состояния кэшированного содержимого | Определяет набор hello коды состояния, которые могут привести к кэшированное содержимое.
Доставка устаревшего содержимого при ошибке | Определяет ли истек срок действия кэшированного содержимого будет доставлена при возникновении ошибки во время повторной проверки кэша или при получении hello запрашиваемых содержимое hello клиента исходного сервера.
Устаревший клиент при повторной сверке | Повышает производительность, позволяя запрашивающей стороне toohello устаревших клиентов tooserve наших пограничных серверов, пока выполняется повторная проверка.
Комментарий | функция комментарий Hello позволяет toobe примечание, добавлены в правиле.

###<a name="bandwidth-parameters"></a>Параметры пропускной способности
**Назначение.** Определяет, будут ли активны параметры регулирования пропускной способности (т. е. ec_rate и ec_prebuf).

Параметры регулирования пропускной способности определяют ли hello скорость передачи данных для запроса клиента ограниченный tooa пользовательские скорость.

Значение|Результат
--|--
Включено|Позволяет наших пограничных серверов toohonor полосы пропускания запросов.
Отключено|В результате наших пограничных серверов tooignore полосы пропускания параметров. Hello указанного содержимого будет обрабатываться обычно (т. е. без регулирование полосы пропускания).

**Поведение по умолчанию.** Включено.

###<a name="bandwidth-throttling"></a>Регулирование пропускной способности
**Назначение:** ограничителей hello пропускной способности для hello ответ, предоставляемый наших пограничных серверов.

Оба hello следующие параметры должны иметь определенный tooproperly настроить регулирование полосы пропускания.

Параметр|Описание
--|--
Кбайт запросов в секунду|Задайте этот параметр toohello максимальная пропускная способность (КБ в секунду), возможно, используется toodeliver hello ответа.
Секунды Prebuf|Задайте этот параметр toohello число секунд, наши серверы edge период ожидания регулирования полосы пропускания. Hello этот период времени, ограничено пропускной способности предназначен tooprevent проигрыватель из причиной задержки или проблемы из-за регулирования toobandwidth буферизации.

**Поведение по умолчанию.** Отключено.

###<a name="bypass-cache"></a>Отключение кэша
**Назначение:** определяет ли hello запроса можно использовать наши кэширования технологии.

Значение|Результат
--|--
Включено|Приводит все запросы toofall через toohello исходного сервера, даже если содержимое hello была ранее кэширована на пограничных серверов.
Отключено|В результате пограничных серверов toocache активы, в соответствии с toohello кэша политики, определенные в его заголовки ответа.

**Поведение по умолчанию:**

- **Большой HTTP-объект.** Отключено.

<!---
- **ADN:** Enabled
--->

###<a name="cache-control-header-treatment"></a>Обработка заголовка управления кэшем
**Назначение:** управляет hello создания заголовков Cache-Control, hello пограничного сервера при активном внешней функции Max-Age.

Здравствуйте, наиболее простым способом tooachieve, этот тип конфигурации — tooplace hello внешних Max-Age и возможности обработки заголовок Cache-Control hello в hello одной инструкции.

Значение|Результат
--|--
Перезаписать|Гарантирует, что будет иметь место, что hello, следующие действия:<br/> -Перезаписывает заголовок Cache-Control, созданные hello исходного сервера. <br/>— Добавляет заголовок Cache-Control, созданные hello внешних Max-Age функция toohello ответа.
Пропустить|Гарантирует, что toohello ответ никогда не добавляется заголовок Cache-Control, созданные функцией внешнего Max-Age hello. <br/> Если исходный сервер hello создает заголовок Cache-Control, он будет проходить toohello для конечных пользователей. <br/> Если заголовок Cache-Control, то этот параметр не дает hello исходного сервера toonot заголовок ответа hello причина может содержать заголовок Cache-Control.
Добавить при отсутствии|Если заголовок Cache-Control не было получено из hello исходного сервера, этот параметр добавляет заголовок Cache-Control, созданные функцией внешнего Max-Age hello. Этот параметр полезен для обеспечения назначения заголовка Cache-Control всем ресурсам.
Удалить| Этот параметр гарантирует, что заголовок Cache-Control не входят в состав hello заголовок ответа. Если заголовок Cache-Control уже назначен, он будет вырезаны из hello заголовок ответа.

**Поведение по умолчанию.** Перезаписать.

###<a name="cache-key-query-string"></a>Строка запроса ключа кэша
**Назначение.** Определяет, будет ли ключ кэша включать или исключать параметры строки запроса, связанные с запросом.

Основные сведения

- Укажите одно или несколько имен параметров строки запроса. Все имена параметров должны быть разделены одним пробелом.
- Эта функция определяет, будут ли включены или исключены из ключа кэша hello параметры строки запроса. Ниже приведены дополнительные сведения о каждом параметре.

Тип|Описание
--|--
 Включить|  Указывает, что каждый указанный параметр должен включаться в ключ кэша hello. Для каждого запроса, содержащего уникальное значение для параметра строки запроса, определенного в этой функции, будет создан уникальный ключ кэша. 
 Включить все  |Указывает, что уникальный ключ кэша будет создавать для каждого ресурса tooan запроса, содержащего строку уникальных запросов. Этот тип конфигурации обычно не рекомендуется, поскольку это может привести к tooa небольшой процент попаданий в кэш. Это увеличит hello нагрузки на исходном сервере hello, так как он будет иметь tooserve больше запросов. Эта конфигурация дублирует hello, кэширование, известные как «уникальный cache» на странице кэширования строки запроса. 
 Исключить | Указывает, что этой только hello указанных параметров, которые будут исключены из ключа кэша hello. Все другие параметры строки запроса будут включены в ключ кэша hello. 
 Исключить все  |Указывает, что все параметры строки запроса будут исключены из ключа кэша hello. Эта конфигурация дублирует поведение, которое называется «standard-cache» на странице кэширования строки запроса в кэше по умолчанию hello. 

Hello мощь обработчика правил HTTP позволяет toocustomize hello способом реализации кэширование строки запроса. Например, можно указать, что кэширование строк запроса будет выполняться только в определенных расположениях или типах файлов.

Если требуется режим, известные как «no-cache» на странице кэширования строки запроса кэширования строк запросов hello tooduplicate потребуется toocreate правило, которое содержит условие соответствия шаблон URL-адрес запроса и возможность пропуска кэша. Hello условие соответствия шаблон URL-адрес запроса должен быть установлен tooan звездочка (*).

#### <a name="sample-scenarios"></a>Примеры сценариев

В этом разделе содержатся примеры использования этой функции. Образец запроса и hello ключ кэша по умолчанию приведены ниже.

- **Пример запроса:** http://wpc.0001.&lt;Домен&gt;/800001/Origin/folder/asset.htm?sessionid=1234&language=EN&userid=01
- **Ключ кэша по умолчанию:** /800001/Origin/folder/asset.htm

##### <a name="include"></a>Включить

Образец конфигурации:

- **Тип:** включить.
- **Параметры:** язык.

Конфигурация данного типа приведет к возникновению hello, следуя кэша ключа параметра строки запроса:

    /800001/Origin/folder/asset.htm?language=EN

##### <a name="include-all"></a>Включить все

Образец конфигурации:

- **Тип:** включить все.

Конфигурация данного типа приведет к возникновению hello, следуя кэша ключа параметра строки запроса:

    /800001/Origin/folder/asset.htm?sessionid=1234&language=EN&userid=01

##### <a name="exclude"></a>Исключить

Образец конфигурации:

- **Тип:** исключить.
- **Параметры:** sessionid userid.

Конфигурация данного типа приведет к возникновению hello, следуя кэша ключа параметра строки запроса:

    /800001/Origin/folder/asset.htm?language=EN

##### <a name="exclude-all"></a>Исключить все

Образец конфигурации:

- **Тип:** исключить все.

Конфигурация данного типа приведет к возникновению hello, следуя кэша ключа параметра строки запроса:

    /800001/Origin/folder/asset.htm

###<a name="cache-key-rewrite"></a>Перезапись ключа кэша
**Назначение:** излишнего копирования hello ключ кэша, связанный с запросом.

Ключ кэша — hello относительного пути, который идентифицирует ресурс в целях hello кэширования. Другими словами наши серверы будет проверять наличие кэшированная версия актива в соответствии с tooits путь в соответствии с определением его ключ кэша.

Настройте эту функцию, определив оба hello следующие параметры:

Параметр|Описание
--|--
Исходный путь| Определите hello относительный путь toohello типы запросов, ключ которого кэша будет переписан. Относительный путь можно задать, выбрав базовый исходный путь, а затем определив шаблон регулярного выражения.
Новый путь|Определите hello относительный путь для нового кэша hello-ключа. Относительный путь можно задать, выбрав базовый исходный путь, а затем определив шаблон регулярного выражения. Это относительный путь может создаваться динамически с помощью hello переменных HTTP
**Поведение по умолчанию:** ключ кэша запроса определяется hello URI запроса.

###<a name="complete-cache-fill"></a>Завершение заполнения кэша
**Назначение.** Определяет, что происходит, когда запрос завершается частичным промахом кэша на пограничном сервере.

Промах кэша частичное описание hello состояние кэша для активов, который не был полностью загруженный tooan пограничный сервер. Если ресурс лишь частично кэширован на пограничном сервере, затем hello следующего запроса для этого ресурса, будет отправлен снова toohello исходного сервера.
<!---
This feature is not available for hello ADN platform. hello typical traffic on this platform consists of relatively small assets. hello size of hello assets served through these platforms helps mitigate hello effects of partial cache misses, since hello next request will typically result in hello asset being cached on that POP.
--->
Частичный промах кэша обычно возникает после того, как пользователь прерывает процесс скачивания, или в ресурсах, которые запрашиваются только с помощью запросов в диапазоне HTTP. Эта функция полезна для больших ресурсов где пользователи не будут загружаться обычно их из начала toofinish (например, видео). Как следствие эта функция включена по умолчанию на платформе HTTP больших hello. На всех остальных платформах она отключена.

Рекомендуется конфигурация по умолчанию hello tooleave для hello HTTP больших платформы, так как он будет Снизьте загрузку hello на исходный сервер клиента и увеличить скорость hello, по которому ваши клиенты загрузить содержимое.

Из-за toohello способом, в какой кэш отслеживаются параметров, эта функция не может быть связан с hello следующие условия совпадения: Edge Cname, литерал заголовок запроса, запрос заголовок шаблон, URL-адрес запроса литерала и шаблон запроса URL-адрес.

Значение|Результат
--|--
Включено|Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello — tooforce hello пограничного сервера tooinitiate получение фона hello средства из hello исходного сервера. После чего активов hello будет в локальном кэше hello пограничный сервер.
Отключено|Запрещает выполнять выборку в фоновом режиме для средства hello пограничного сервера. Это означает, что hello следующего запроса для этого ресурса из этого региона вызовет toorequest пограничного сервера с исходного сервера hello клиента.

**Поведение по умолчанию.** Включено.

###<a name="compress-file-types"></a>Сжатие типов файлов
**Назначение:** определяет hello форматы файлов, которые будут сжаты на сервере hello.

Формат файла можно указать с помощью его типа мультимедиа для Интернета (т. е. тип содержимого). Тип носителя Интернета — метаданные независимая от платформы, которые позволяют наши серверы tooidentify hello формат конкретного средства. Ниже приведен список распространенных типов мультимедиа для Интернета.

Тип мультимедиа для Интернета|Описание
--|--
text/plain|Обычные текстовые файлы
text/html| HTML-файлы
text/css|Каскадные таблицы стилей (CSS)
application/x-javascript|JavaScript
application/javascript|JavaScript
Основные сведения

- Указывайте несколько типов мультимедиа для Интернета, разделяя их одним пробелом. 
- Эта функция будет сжимать только те ресурсы, размер которых меньше 1 МБ. Наши серверы не будут сжимать ресурсы большего размера.
- Некоторые типы содержимого, такие как мультимедийные файлы изображений, видео и аудио (например, JPG, MP3, MP4 и т. д.), уже сжаты. Дополнительное сжатие этих типов ресурсов не приведет к значительному уменьшению размера файла. Поэтому мы рекомендуем не включать сжатие для этих типов ресурсов.
- Подстановочные знаки, например звездочки, не поддерживаются.
- Прежде чем добавить правило tooa этого компонента, сделать tooset убедиться, что параметр сжатия отключено на странице сжатия toowhich платформы hello, который будет применяться это правило.

###<a name="default-internal-max-age"></a>Внутренний максимальный срок по умолчанию
**Назначение:** определяет по умолчанию hello max-age интервал повторная проверка кэша сервера tooorigin пограничного сервера. Другими словами hello количество времени, которое пройдет до пограничный сервер проверит, совпадает ли кэшированные активов активов hello, хранящиеся на исходном сервере hello.

Основные сведения

- Это действие выполняется только для ответов с сервера-источника, который не присвоил указание максимального срока в заголовке Cache-Control и Expires.
- Это действие не будет выполняться для ресурсов, которые невозможно кэшировать.
- Это действие не влияет на достоверности браузера tooedge сервера кэша просмотра. Эти типы достоверности просмотра определяются Cache-Control или заголовки Expires отправлены toohello браузера, которое может быть настроено с помощью функции внешних Max-Age.
- Hello результат этого действия нет наблюдаемый влияют на содержимое hello, возвращенное пограничные серверы содержимого и заголовки ответов hello, но он может оказывать влияние на hello объем трафика повторной проверки подлинности, отправленные edge серверов tooyour исходного сервера.
- Настройте эту функцию, сделав следующее:
    - При выборе hello код состояния, для которой может применяться по умолчанию внутренние max возраста.
    - Здравствуйте, указав целочисленное значение, а затем выбрав нужное время единицы (т. е. секунды, минуты, часы, и т. д.). Это значение определяет интервал внутренней max-age hello по умолчанию.

- Единица времени hello параметр слишком «Off» назначит интервал по умолчанию внутренние max-age 7 дней для запросов, которые не были назначены индикатором max-age в их Cache-Control и заголовок Expires.
- Из-за toohello способом, в какой кэш отслеживаются параметров эта функция не может быть связан с hello следующие условия совпадения: 
    - Edge 
    - Cname;
    - Литерал заголовка запроса
    - Шаблон заголовка запроса
    - Метод запроса
    - Литерал запроса URL-адреса
    - Шаблон запроса URL-адреса

**Значение по умолчанию:** 7 дней

###<a name="expires-header-treatment"></a>Обработка заголовка Expires
**Назначение:** управляет поколения hello Expires заголовков, активен ли компонент внешнего Max-Age, путем пограничного сервера.

Здравствуйте, наиболее простым способом tooachieve, этот тип конфигурации — tooplace hello внешних Max-Age и hello истечения срока действия обработки заголовка функции в одной инструкции hello.

Значение|Результат
--|--
Перезаписать|Гарантирует, что будет иметь место, что hello, следующие действия:<br/>-Перезаписывает заголовок Expires, созданные hello исходного сервера.<br/>— Добавляет заголовок Expires, созданные функции toohello hello внешних Max-Age ответов.
Пропустить|Обеспечивает заголовок Expires, полученных компонентом внешнего Max-Age hello никогда не добавляется toohello ответа. <br/> Если исходный сервер hello создает заголовок Expires, он будет проходить toohello для конечных пользователей. <br/>Если заголовок Expires, то этот параметр не дает hello исходного сервера toonot заголовок ответа hello причина может содержать заголовок Expires.
Добавить при отсутствии| Если заголовок Expires не было получено из hello исходного сервера, этот параметр добавляет заголовок Expires, полученных компонентом внешнего Max-Age hello. Этот параметр полезен для обеспечения назначения заголовка Expires всем ресурсам.
Удалить| Гарантирует, что заголовок Expires не входят в состав hello заголовок ответа. Если заголовок Expires уже назначен, он будет вырезаны из hello заголовок ответа.

**Поведение по умолчанию.** Перезаписать.

###<a name="external-max-age"></a>Внешний максимальный срок
**Назначение:** определяет интервал max-age приветствия для повторной проверки подлинности сервера tooedge кэш браузера. Другими словами hello количество времени, которое пройдет до браузера можно проверить наличие новых версий актив из пограничного сервера.

Включение этой функции будет создавать кэш-элемент управления: max-age и истечения срока действия заголовки из наших пограничных серверов и их отправки toohello HTTP клиента. По умолчанию эти заголовки будут перезаписаны созданные hello исходного сервера. Однако обработка заголовок Cache-Control и компонентах истечения срока действия обработки заголовка может быть используется tooalter это поведение.

Основные сведения

- Это действие не влияет на достоверности пограничного сервера tooorigin server кэш для просмотра. Эти типы достоверности просмотра определяются заголовков кэша-элемент управления и Expires, полученные от исходного сервера hello и могут настраиваться с помощью по умолчанию внутренние Max-Age и компонентах Force внутренней Max-Age.
- Настройте эту функцию, указав целочисленное значение и выбрав hello единицы времени (т. е. секунды, минуты, часы, и т. д.).
- Этот компонент tooa отрицательное значение при задании нашей toosend edge серверов кэша-элемента управления: no-кэша и время истекает, заданную в hello прошлом со всеми браузерами, toohello ответа. Несмотря на то, что HTTP-клиент не будет кэшировать ответ hello, этот параметр не повлияет на наших пограничных серверов возможность toocache hello отклик hello исходного сервера.
- Единица времени hello параметр слишком «Off» будет отключить эту функцию. Кэш-элемент управления и Expires заголовки кэшированный ответ hello hello исходного сервера будет передавать toohello браузера.

**Поведение по умолчанию.** Выключено.

###<a name="force-internal-max-age"></a>Принудительное использование внутреннего максимального срока
**Назначение:** определяет интервал max-age hello повторная проверка кэша сервера tooorigin пограничного сервера. Другими словами hello количество времени, которое пройдет до пограничного сервера можно проверить, соответствует ли кэшированные активов активов hello, хранящиеся на исходном сервере hello.

Основные сведения

- Этот компонент будет переопределить интервал max-age hello, определенные в Cache-Control и Expires заголовки, созданные из исходного сервера.
- Эта функция не влияет на достоверности браузера tooedge сервера кэша просмотра. Эти типы достоверности просмотра определяются Cache-Control или заголовки Expires отправлены toohello браузера.
- Эта функция не имеет заметный эффект доставлено запрашивающей стороне пограничного сервера toohello ответе hello. Тем не менее он может оказывать влияние на объем hello повторная проверка трафик, отправленный из исходного сервера toohello наши серверы edge.
- Настройте эту функцию, сделав следующее:
    - При выборе hello код состояния, для которой будет применяться внутренний max-age.
    - Здравствуйте, указав целочисленное значение и выбрав единицу времени (т. е. секунды, минуты, часы, и т. д.). Это значение определяет интервал запроса hello max-age.

- Единица времени hello параметр слишком «Off» отключает эту функцию. Внутренний интервал max-age не будет назначено toorequested активы. Если исходный заголовок hello не содержит инструкции для кэширования, затем активов hello будет кэшироваться toohello активного параметра в функцию по умолчанию внутренние Max-Age в соответствии с.
- Из-за toohello способом, в какой кэш отслеживаются параметров эта функция не может быть связан с hello следующие условия совпадения: 
    - Edge 
    - Cname;
    - Литерал заголовка запроса
    - Шаблон заголовка запроса
    - Метод запроса
    - Литерал запроса URL-адреса
    - Шаблон запроса URL-адреса

**Поведение по умолчанию.** Выключено.

###<a name="h264-support-http-progressive-download"></a>Поддержка H.264 (Прогрессивное скачивание через HTTP)
**Назначение:** определяет типы hello H.264 форматы файлов, которые могут быть используется toostream содержимого.

Основные сведения

- Определите ряд разделенных пробелом допустимых расширений имен файлов H.264 в параметре "Расширения файлов". Расширения файлов параметр переопределяет поведение по умолчанию hello. Настраивая этот параметр, включите эти расширения имен файлов, чтобы обеспечить поддержку MP4 и F4V. 
- Убедитесь, что tooinclude период при указании каждого расширение имени файла (например, .mp4 .f4v).

**Поведение по умолчанию.** Поэтапная загрузка HTTP поддерживает мультимедиа в формате MP4 и F4V по умолчанию.

###<a name="honor-no-cache-request"></a>Учитывать запрос без кэша
**Назначение:** определяет нет-cache запросы HTTP-клиента, будет ли перенаправляться toohello исходного сервера.

Запрос кэша не происходит, когда hello HTTP-клиент отправляет кэш-элемент управления: no-кэша и/или Pragma:no-кэша в заголовках hello HTTP запросов.

Значение|Результат
--|--
Включено|Позволяет HTTP-клиента нет-cache запрашивает toobe перенаправленных toohello исходного сервера и исходного сервера hello вернет hello заголовки ответа и текст hello через пограничный сервер hello задней toohello HTTP клиента.
Отключено|Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello — запросы нет-cache tooprevent toohello исходного сервера пересылки.

Для производственных трафика имеет высокую степень рекомендуется tooleave этот компонент в состоянии по умолчанию отключена. В противном случае исходные серверы не быть изолирована от конечных пользователей, случайно может возникнуть большое число запросов кэша нет, при обновлении веб-страницы, или из hello многие популярные универсальные проигрыватели, которые являются закодированные toosend заголовок нет-cache с каждым запросом видео. Тем не менее эта функция может быть полезно tooapply toocertain нерабочей промежуточной или тестирование каталоги, в порядке tooallow свежей содержимого toobe получения по запросу с исходного сервера hello.

состояние кэша Hello, который выводится запрос, который является разрешено перенаправленных toobe tooan исходного сервера из-за toothis функция TCP_Client_Refresh_Miss. Отчет состояния кэша, который доступен в модуль создания отчетов Core hello, предоставляет статистические данные по состоянию кэша. Это позволяет вам tootrack hello число и процент запросов, перенаправляются tooan исходного сервера из-за toothis компонентов.

**Поведение по умолчанию.** Отключено.

###<a name="ignore-origin-no-cache"></a>Не учитывать источник без кэша
**Назначение:** определяет ли нашей CDN будет игнорировать hello следующие директивы предоставлен из исходного сервера:

- Cache-Control: private;
- Cache-Control: no-store;
- Cache-Control: no-cache;
- Pragma: no-cache.

Основные сведения

- Настройте эту функцию, определив перечень коды состояния, для которых будут игнорироваться hello выше директивы.
- Hello набор допустимых кодах состояния для этой функции,: 200, 203, 300, 301, 302, 305, 307, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 500, 501, 502, 503, 504 и 505.
- Эту функцию можно отключите, установив его tooa пустое значение.
- Из-за toohello способом, в какой кэш отслеживаются параметров эта функция не может быть связан с hello следующие условия совпадения: 
    - Edge 
    - Cname;
    - Литерал заголовка запроса
    - Шаблон заголовка запроса
    - Метод запроса
    - Литерал запроса URL-адреса
    - Шаблон запроса URL-адреса

**Поведение по умолчанию:** поведение по умолчанию — hello toohonor выше директивы.

###<a name="ignore-unsatisfiable-ranges"></a>Игнорировать неподходящие диапазоны 
**Назначение:** определяет hello ответ, который будет возвращен tooclients при запросе приводит к возникновению ошибки 416 запрошенный диапазон невыполним код состояния.

По умолчанию этот код состояния возвращается при hello указанный запрос диапазона байтов не могут быть удовлетворены пограничного сервера и поля заголовка запроса If-Range не указан.

Значение|Результат
-|-
Включено|Предотвращает наших пограничных серверов из отвечает запроса tooan недопустимый диапазон байтов 416 запрошенный диапазон невыполним код состояния. Вместо этого наши серверы доставки активов запрошенного hello и вернуть ответ 200 OK клиенту hello.
Отключено|Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello — toohonor запрошенный диапазон невыполним 416 код состояния.

**Поведение по умолчанию.** Отключено.

###<a name="internal-max-stale"></a>Внутреннее максимальное значение устаревания
**Назначение:** определяет время хранения в кэше актив с исходного сервера hello последние hello обычный срок действия кэшированных ОС может быть предоставлен из пограничного сервера при hello пограничный сервер — не удается toorevalidate hello.

Как правило по истечении времени max-age активов hello пограничный сервер отправит повторной проверки подлинности запроса toohello исходного сервера. Hello исходного сервера будет отправлять в ответ либо 304 нужно присвоить hello пограничный сервер новой аренды в активе кэшированных hello, либо с 200 ОК предоставить обновленную версию средства кэшированных hello hello пограничный сервер не изменяется.

Если hello пограничный сервер не может tooestablish соединение с исходного сервера hello при попытке выполнить это повторной проверки подлинности, этот компонент внутренней Max-устаревшая определяет, ли и как долго hello пограничный сервер может продолжить tooserve hello теперь устарело активов.

Обратите внимание, что данного интервала времени начинается по истечении hello активов max-age не случае hello сбой повторной проверки подлинности. Таким образом hello максимальный период, во время которого актива могут обрабатываться без успешной повторной проверки подлинности — hello объем времени, заданного параметром сочетание hello max-age плюс max устарело. Например если актива кэширована в 9:00 с max-age 30 минут и max устаревшей 15 минутам, то попытка сбой повторной проверки подлинности при 9:44 приведет к конечным пользователем принимающей hello устаревших кэшированных актива, во время попытки сбой повторной проверки подлинности в 15:04 приведет к конечный пользователь Hello, принимающий 504 истекло время ожидания шлюза.

Любое значение, настроенное для этого компонент заменен кэша-элемент управления: только-повторной проверки или кэшировать-прокси-сервер управления:-повторной проверки заголовков, полученные от исходного сервера hello. Если любой из этих заголовков получено из исходного сервера hello актива изначально кэшируется, hello пограничный сервер не обслуживает устаревших кэшированных активов. В таком случае если hello пограничный сервер не удается toorevalidate с источником hello по истечении интервала max-age hello активов то hello пограничный сервер возвратит 504 истекло время ожидания шлюза.

Основные сведения

- Настройте эту функцию, сделав следующее:
    - При выборе hello код состояния, для которой будет применен max устаревшей.
    - Здравствуйте, указав целочисленное значение, а затем выбрав нужное время единицы (т. е. секунды, минуты, часы, и т. д.). Это значение определяет hello внутренней max устарело, будут применены.

- Единица времени hello параметр слишком «Off» будет отключить эту функцию. Кэшированный ресурс не будет обслуживаться по истечении обычного срока действия.
- Из-за toohello способом, в какой кэш отслеживаются параметров эта функция не может быть связан с hello следующие условия совпадения: 
    - Edge 
    - Cname;
    - Литерал заголовка запроса
    - Шаблон заголовка запроса
    - Метод запроса
    - Литерал запроса URL-адреса
    - Шаблон запроса URL-адреса

**Поведение по умолчанию.** 2 минуты.

###<a name="partial-cache-sharing"></a>Совместное использование частичного кэширования
**Назначение.** Определяет, может ли запрос создавать частично кэшированное содержимое.

Это частичное кэширование затем может быть используется toofulfill новые запросы для этого содержимого, пока hello запросил полностью кэш содержимого.

Значение|Результат
-|-
Включено|Запросы могут создавать частично кэшированное содержимое.
Отключено|Запросы можно создавать только полностью кэшированная версия hello запрошенного содержимого.

**Поведение по умолчанию.** Отключено.

###<a name="prevalidate-cached-content"></a>Предварительная проверка кэшированного содержимого
**Назначение.** Определяет, подойдет ли кэшированное содержимое для ранней повторной сверки до истечения его срока действия.

Определите объем hello время истечения срока действия предыдущего toohello hello запроса содержимого TTL, во время которого будет иметь право на ранних повторной проверки подлинности.

Основные сведения

- При выборе «Off» единицы времени hello требуется повторная проверка tootake месте после истечения срока ЖИЗНИ hello кэширования содержимого. Не указывайте время, и это будет проигнорировано.

**Поведение по умолчанию.** Выключено. Повторная проверка может выполняться только после hello, истек срок ЖИЗНИ кэшированного содержимого.

###<a name="refresh-zero-byte-cache-files"></a>Обновление файлов кэша нулевой длины
**Назначение.** Определяет способ обработки запроса HTTP-клиента к ресурсу кэша нулевой длины пограничными серверами.

Допустимые значения:

Значение|Результат
--|--
Включено|Вызывает нашей пограничного сервера toore выборки hello активов из hello исходного сервера.
Отключено|Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello — tooserve копирование допустимое значение в кэше активы по запросу.
Эта функция не является обязательной для надлежащего кэширования и доставки содержимого, но может использоваться в качестве обходного решения. Например динамического содержимого генераторы на исходные серверы может привести к случайному в ответах 0 байт, отправляемых toohello пограничные серверы. Эти типы ответов, как правило, кэшируются нашими пограничными серверами. Если вам известно, что ответ нулевой длины является недопустимым ответом 

для такого содержимого затем эта функция позволяет предотвратить эти типы средств обрабатывается tooyour клиентов.

**Поведение по умолчанию.** Отключено.

###<a name="set-cacheable-status-codes"></a>Набор кодов состояния кэшированного содержимого
**Назначение:** определяет набор hello коды состояния, которые могут привести к кэшированное содержимое.

По умолчанию кэширование включено только для ответов 200 ОК.

Определите ряд коды hello требуемого состояния.

Основные сведения

- Включите также функцию Ignore Origin No-Cache. Если эта функция не включена, ответы 200 ОК не будут кэшироваться.
- Hello набор допустимых кодах состояния для этой функции,: 203, 300, 301, 302, 305, 307, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 500, 501, 502, 503, 504 и 505.
- Эта функция не может быть используется toodisable кэширование ответов, создающих код 200 ОК состояния.

**Поведение по умолчанию.** Кэширование включено только для ответов, создающих код состояния 200 ОК.
###<a name="stale-content-delivery-on-error"></a>Доставка устаревшего содержимого при ошибке
**Назначение.** 

Определяет ли истек срок действия кэшированного содержимого будет доставлена при возникновении ошибки во время повторной проверки кэша или при получении hello запрашиваемых содержимое hello клиента исходного сервера.

Значение|Результат
-|-
Включено|Устаревшие будет предоставляться содержимое toohello инициатора запроса при возникновении ошибки во время подключения tooan исходного сервера.
Отключено|Ошибка Hello исходного сервера, будет отправлен toohello инициатора запроса.

**Поведение по умолчанию.** Отключено.

###<a name="stale-while-revalidate"></a>Устаревший клиент при повторной сверке
**Назначение:** повышает производительность, позволяя запрашивающей стороне устаревших содержимого toohello tooserve наших пограничных серверов, пока выполняется повторная проверка.

Основные сведения

- Поведение этой функции Hello зависит соответствующим единицы toohello выбранный период времени.
    - **Единицы времени:** указать период времени, а затем выберите время единицы (например, секунды, минуты, часы, т. д.) tooallow устаревших доставки содержимого. Этот тип установки позволяет hello CDN tooextend hello количество времени, он может доставить содержимое перед требующем проверки в соответствии с toohello следующую формулу:**TTL** + **во время повторной проверки времени устарели** 
    - **OFF:** выберите «Off» повторная проверка toorequire перед запросом для устаревших содержимое может быть отображена.
        - Не указывайте промежуток времени, так как он неприменим и будет игнорироваться.

**Поведение по умолчанию.** Выключено. Повторная проверка должна быть выполнена перед отправкой запроса hello, что содержимое может быть предоставлен.

###<a name="comment"></a>Комментарий
**Назначение:** позволяет toobe примечание, добавлены в правиле.

Эта возможность применяется tooprovide дополнительную информацию о hello общего назначения, правила или почему конкретного соответствует условию, или функция была добавлена toohello правило.

Основные сведения

- Можно указать до 150 символов.
- Убедитесь, что tooonly использовать буквенно-цифровые символы.
- Эта функция не влияет на поведение hello hello правила. Он просто должен tooprovide область, где можно ввести сведения для дальнейшего использования или, может помочь при устранении неполадок hello правило.
 
## <a name="headers"></a>Заголовки

Эти компоненты, разработанные tooadd, изменить или удалить заголовки из hello запроса или ответа.

Имя | Назначение
-----|--------
Заголовок ответа Age | Определяет, включения заголовка ответа возраст в отправленный запрашивающей стороне toohello ответ hello.
Заголовки ответа Debug Cache | Определяет, может ли ответ включать заголовок ответа X-EC-Debug hello, предоставляющий сведения о hello политику кэширования для hello запрошенного ресурса.
Заголовок запроса Modify Client | Перезаписывает, добавляет или удаляет заголовок из запроса.
Заголовок ответа Modify Client | Перезаписывает, добавляет или удаляет заголовок из ответа.
Настраиваемый заголовок Set Client IP | Позволяет запросу добавлены toohello toobe hello IP-адрес клиента, отправившего запрос hello как заголовок пользовательского запроса.

###<a name="age-response-header"></a>Заголовок ответа Age
**Назначение**: Определяет, будет ли включаться возраст заголовок ответа запрашивающей стороне toohello ответом, отправляемым hello.
Значение|Результат
--|--
Включено | Заголовок ответа возраст Hello будут включены в отправленный запрашивающей стороне toohello ответ hello.
Отключено | Заголовок ответа возраст Hello будут исключены из hello ответом, отправляемым toohello инициатора запроса.

**Поведение по умолчанию.** Отключено.

###<a name="debug-cache-response-headers"></a>Заголовки ответа Debug Cache
**Назначение:** определяет, может ли ответ включать заголовок ответа X-EC-Debug, предоставляющий сведения о hello политику кэширования для hello запрошенного ресурса.

Отладка заголовки будут включены в ответ hello, если выполняются оба следующих hello ответ из кэша.

- Hello отладки функцию заголовки ответа кэш включен на нужный запрос hello.
- Hello выше запрос определяет набор заголовков ответа кэша отладки, которые будут включены в ответ hello hello.

Отладка заголовки могут запрашиваться, включая следующий заголовок hello и hello требуемой директивы в запросе hello ответ из кэша.

X-EC-Debug: _Directive1_,_Directive2_,_DirectiveN_

**Пример**

X-EC-Debug: x-ec-cache,x-ec-check-cacheable,x-ec-cache-key,x-ec-cache-state

Значение|Результат
-|-
Включено|Запросы для заголовков ответа Debug Cache возвратят ответ, который включает заголовок X-EC-Debug.
Отключено|Заголовок ответа X-EC-Debug будут исключены из ответа hello.

**Поведение по умолчанию.** Отключено.

###<a name="modify-client-response-header"></a>Заголовок ответа Modify Client
**Назначение.** Каждый запрос содержит набор [заголовков запроса](), описывающих его. Эта функция может выполнять одно из следующих действий:

- В конце или перезаписать значение hello, назначенное tooa заголовка запроса. Если hello указанный заголовок запроса не существует, то этот компонент добавляет его toohello запроса.
- Удалите заголовок запроса из запроса hello.

Запросы, которые пересылаются tooan исходного сервера будет отражать hello изменения, внесенные с помощью этой функции.

Один из hello следующие действия можно выполнить в заголовке запроса.

Параметр|Описание|Пример
-|-|-
Добавить|Hello указанное значение будет добавлено toend hello существующие значения заголовка запроса.|**Значение заголовка запроса (клиент):** значение1. <br/> **Значение заголовка запроса (обработчик правил HTTP):** значение2. <br/>**Новое значение заголовка запроса:** значение1значение2.
Перезаписать|запрос Hello значение заголовка будет набор toohello заданного значения.|**Значение заголовка запроса (клиент):** значение1. <br/>**Значение заголовка запроса (обработчик правил HTTP):** значение2. <br/>**Новое значение заголовка запроса:** значение2. <br/>
Удалить|Удаляет hello указанный заголовок запроса.|**Значение заголовка запроса (клиент):** значение1. <br/> **Изменение конфигурации заголовка запроса клиента:** заголовок запроса Delete hello в вопросе. <br/>**Результат:** hello указанный заголовок запроса не будут перенаправляться toohello исходного сервера.

Основные сведения

- Убедитесь в том, что hello значение, указанное в параметре Name является точным соответствием для заголовка запроса требуемой hello.
- Регистр не учитывается для цели hello идентификации заголовок. Например, любой из hello следующие виды имя заголовка Cache-Control быть используется tooidentify его:
    - cache-control;
    - CACHE-CONTROL;
    - cachE-Control.
- Убедитесь, что tooonly использовать буквы, цифры, дефисы и символы подчеркивания, при указании имени заголовка.
- Удаление заголовка будет запретить его пересылку исходного сервера tooan наши серверы edge.
- Hello следующие заголовки являются зарезервированными и не может изменяться с помощью этой функции:
    - forwarded;
    - host
    - via;
    - Предупреждение
    - x-forwarded-for.
    - Все имена заголовков, начинающиеся с "x-ec", защищены.

###<a name="modify-client-response-header"></a>Заголовок ответа Modify Client
Каждый ответ содержит набор [заголовков ответа](), описывающих его. Эта функция может выполнять одно из следующих действий:

- В конце или перезаписать значение hello, назначенное tooa заголовок ответа. Если hello указанный заголовок запроса не существует, то этот компонент добавляет его toohello ответа.
- Удалите заголовок ответа из ответа hello.

По умолчанию значения заголовков ответа определяются сервером-источником и нашими пограничными серверами.

Одно из hello, следующие действия могут выполняться над заголовок ответа:

Параметр|Описание|Пример
-|-|-
Добавить|Hello указанное значение будет добавлено toend hello существующие значения заголовка запроса.|**Значение заголовка ответа (клиент):** значение1. <br/> **Значение заголовка ответа (обработчик правил HTTP):** значение2. <br/>**Новое значение заголовка ответа:** значение1значение2.
Перезаписать|запрос Hello значение заголовка будет набор toohello заданного значения.|**Значение заголовка ответа (клиент):** значение1. <br/>**Значение заголовка ответа (обработчик правил HTTP):** значение2. <br/>**Новое значение заголовка ответа:** значение2. <br/>
Удалить|Удаляет hello указанный заголовок запроса.|**Значение заголовка запроса (клиент):** значение1. <br/> **Изменение конфигурации заголовок запроса клиента:** заголовок ответа Delete hello в вопросе. <br/>**Результат:** hello указанный заголовок ответа не будут перенаправляться toohello инициатора запроса.

Основные сведения

- Убедитесь, что hello в имя параметра указано значение является точным соответствием для hello нужный ответ заголовок. 
- Регистр не учитывается для цели hello идентификации заголовок. Например, любой из hello следующие виды имя заголовка Cache-Control быть используется tooidentify его:
    - cache-control;
    - CACHE-CONTROL;
    - cachE-Control.
- Удаление заголовка будет запретить его пересылку toohello инициатора запроса.
- Hello следующие заголовки являются зарезервированными и не может изменяться с помощью этой функции:
    - accept-encoding;
    - age;
    - connection;
    - content-encoding
    - content-length;
    - content-range;
    - дата
    - имя сервера
    - trailer;
    - transfer-encoding;
    - upgrade
    - vary;
    - via;
    - Предупреждение
    - Все имена заголовков, начинающиеся с "x-ec", защищены.

###<a name="set-client-ip-custom-header"></a>Настраиваемый заголовок Set Client IP
**Назначение:** добавляет пользовательский заголовок, который идентифицирует hello запрашивающему клиенту, запрос toohello адрес IP-адреса.

Параметр имя заголовка определяет hello имя заголовка hello пользовательского запроса, где будет храниться hello клиентского IP-адреса.

Эта функция позволяет клиента toofind сервера источника исходящий IP-адреса клиента посредством заголовок пользовательского запроса. Если hello запрос будет обработан из кэша, затем hello исходного сервера будет сообщено не hello клиентского IP-адреса. Таким образом, мы рекомендуем использовать эту функцию с ADN или ресурсами, которые не будут кэшироваться.

Чтобы убедиться, что это имя указанного заголовка hello не соответствует hello следующее:

- Стандартные имена заголовков запросов. Список стандартных имен заголовков можно найти в статье о [RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).
- Имена защищенных заголовков:
    - forwarded-for;
    - host
    - vary;
    - via;
    - Предупреждение
    - x-forwarded-for.
    - Все имена заголовков, начинающиеся с "x-ec", защищены.
 
## <a name="logs"></a>Журналы

Эти компоненты, разработанные toocustomize hello данных сохраняются в файлах журналов необработанные.

Имя | Назначение
-----|--------
Поле 1 пользовательского журнала | Определяет формат hello и содержимое hello, который будет назначен toohello поля пользовательского журнала в файл журнала необработанных.
Регистрация строки запроса | Определяет, сохраняются ли строки запроса URL-адресом hello в журналы событий.

###<a name="custom-log-field-1"></a>Поле 1 пользовательского журнала
**Назначение:** определяет hello формат и содержимое hello, который будет назначен toohello поля пользовательского журнала в файл журнала необработанных.

Основным предназначением Hello за это поле является tooallow toodetermine какие значения заголовка запроса и ответа сохраняются в файлы журнала.

По умолчанию поле пользовательского журнала hello, называется «x-ec_custom-1». Тем не менее, можно настроить hello имя этого поля в [страницы необработанные параметры журнала]().

Привет, форматирование, которые необходимо использовать заголовки запросов и ответов toospecify определен ниже.

Тип заголовка|Формат|Примеры
-|-|-
Заголовок запроса|%{[RequestHeader]()}[i]() | %{Accept-Encoding}i <br/> {Referer}i <br/> %{Authorization}i
Заголовок ответа|%{[ResponseHeader]()}[o]()| %{Age}o <br/> %{Content-Type}o <br/> %{Cookie}o

Основные сведения

- Поле пользовательского журнала может содержать любое сочетание полей заголовка и обычного текста.
- Допустимые символы для этого поля включают следующее hello: буквенно-цифровых (т. е. 0-9, a-z и A-Z), дефисы, двоеточия, точками с запятой, апострофы, запятые, точки, символы подчеркивания, знак равенства, круглые скобки, квадратные скобки и пробелы. Hello символ процента и фигурные скобки допустимы только если используется toospecify поле заголовка.
- Hello орфографии для каждого указанного заголовка поля должно соответствовать имени заголовка hello нужный запрос ответ.
- Если вы хотите toospecify несколько заголовков, то рекомендуется использовать tooindicate разделитель каждый заголовок. Например, можно использовать сокращение для каждого заголовка. Пример синтаксиса приведен ниже.
    - AE: %{Accept-Encoding}i A: %{Authorization}i CT: %{Content-Type}o 

**Значение по умолчанию:** -

###<a name="log-query-string"></a>Регистрация строки запроса
**Назначение:** определяет, сохраняются ли строки запроса URL-адресом hello в журналы событий.

Значение|Результат
-|-
Включено|Позволяет hello хранилища строк запроса, при записи в журнал доступа URL-адреса. Если URL-адрес не содержит строку запроса, этот параметр не будет иметь влияния.
Отключено|Восстанавливает поведение по умолчанию hello. поведение по умолчанию Hello — tooignore строки запросов при записи в журнал доступа URL-адреса.

**Поведение по умолчанию.** Отключено.

<!---
## Optimize

These features determine whether a request will undergo hello optimizations provided by Edge Optimizer.

Name | Purpose
-----|--------
Edge Optimizer | Determines whether Edge Optimizer can be applied tooa request.
Edge Optimizer – Instantiate Configuration | Instantiates or activates hello Edge Optimizer configuration associated with a site.

###Edge Optimizer
**Purpose:** Determines whether Edge Optimizer can be applied tooa request.

If this feature has been enabled, then hello following criteria must also be met before hello request will be processed by Edge Optimizer:

- hello requested content must use an edge CNAME URL.
- hello edge CNAME referenced in hello URL must correspond tooa site whose configuration has been activated in a rule.

This feature requires the ADN platform and hello Edge Optimizer feature.

Value|Result
-|-
Enabled|Indicates that hello request is eligible for Edge Optimizer processing.
Disabled|Restores hello default behavior. hello default behavior is toodeliver content over the ADN platform without any additional processing.

**Default Behavior:** Disabled
 

###Edge Optimizer - Instantiate Configuration
**Purpose:** Instantiates or activates hello Edge Optimizer configuration associated with a site.

This feature requires the ADN platform and hello Edge Optimizer feature.

Key information:

- Instantiation of a site configuration is required before requests toohello corresponding edge CNAME can be processed by Edge Optimizer.
- This instantiation only needs toobe performed a single time per site configuration. A site configuration that has been instantiated will remain in that state until hello Edge Optimizer – Instantiate Configuration feature that references it is removed from hello rule.
- hello instantiation of a site configuration does not mean that all requests toohello corresponding edge CNAME will automatically be processed by Edge Optimizer. The Edge Optimizer feature determines whether an individual request will be processed.

If hello desired site does not appear in hello list, then you should edit its configuration and verify that the Active option has been marked.

**Default Behavior:** Site configurations are inactive by default.
--->

## <a name="origin"></a>Исходный домен

Эти компоненты, разработанные toocontrol как hello CDN взаимодействует с исходного сервера.

Имя | Назначение
-----|--------
Максимальное количество запросов для проверки активности | Определяет максимальное число запросов для поддержания активности соединения для hello до его закрытия.
Специальные заголовки прокси-сервера | Определяет hello набор заголовков запроса конкретного CDN, которые будут перенаправлены из пограничного сервера tooan исходного сервера.


###<a name="maximum-keep-alive-requests"></a>Максимальное количество запросов для проверки активности
**Назначение:** определяет максимальное число запросов для поддержания активности соединения для hello до его закрытия.

Задание максимального числа запросов tooa низкое значение hello настоятельно не рекомендуется и может привести к снижению производительности.

Основные сведения

- Укажите в качестве значения целое число.
- Не включайте запятые и точки в hello указано значение.

**Значение по умолчанию:** 10 000 запросов.

###<a name="proxy-special-headers"></a>Специальные заголовки прокси-сервера
**Назначение:** определяет набор hello [CDN-заголовков запроса]() , будут перенаправлены из пограничного сервера tooan исходного сервера.

Основные сведения

- Каждый заголовок запроса конкретного CDN, определенные в этой функции будет перенаправляться tooan исходного сервера.
- Запретить пересылку tooan исходного сервера, удалив его из этого списка в заголовке запроса конкретного CDN.

**Поведение по умолчанию:** все [CDN-заголовков запроса]() будут пересылаться toohello исходного сервера.

## <a name="specialty"></a>Специальные

Эти функции обеспечивают дополнительные функциональные возможности, которые следует использовать только опытным пользователям.

Имя | Назначение
-----|--------
Кэшируемые методы HTTP | Определяет набор hello дополнительные методы HTTP, которые могут быть кэшированы в сети.
Размер текста кэшируемого запроса | Определяет порог hello для определения того, можно ли кэшировать ответ POST.

###<a name="cacheable-http-methods"></a>Кэшируемые методы HTTP
**Назначение:** определяет набор hello дополнительные методы HTTP, которые могут быть кэшированы в сети.

Основные сведения

- Эта функция предполагает, что все ответы GET всегда кэшируются. В результате hello HTTP-метод GET не будут включены после установки этой функции.
- Эта функция поддерживает только hello HTTP-метод POST. Включите кэширование ответов POST, задав для этой функции значение: POST. 
- По умолчанию будут кэшироваться только запросы, размер которых меньше 14 КБ. Функция кэшируемый запрос текста размер позволяет задать размер текста hello максимального запроса.

**Поведение по умолчанию.** Будут кэшироваться только ответы GET.

###<a name="cacheable-request-body-size"></a>Размер текста кэшируемого запроса

**Назначение:** определяет hello порог для определения того, можно ли кэшировать ответ POST.

Чтобы определить это пороговое значение, укажите максимальный размер текста запроса. Запросы, содержащие текст запроса большего размера, не будут кэшироваться.

Основные сведения

- Эта функция применяется, только если ответы POST будут пригодны для кэширования. Используйте hello кэшируемый функция методов HTTP для включения кэширования запроса POST.
- текст запроса Hello учитывается для:
    - значения x-www-form-urlencode;
    - обеспечение уникального ключа кэша.
- Задание большого максимального размера текста запроса может повлиять на производительность доставки данных.
    - **Рекомендуемое значение:** 14 КБ.
    - **Минимальное значение:** 1 КБ.

**По умолчанию:** 14 КБ.
 
## <a name="url"></a>URL-адрес

Эти функции позволяют toobe запрос перенаправлен или переписать tooa другой URL-адрес.

Имя | Назначение
-----|--------
Поддержка перенаправлений | Определяет, можно ли запросы перенаправленный toohello имя узла, определенного в заголовок расположения hello, возвращенные сервером источника клиента.
URL Redirect | Перенаправляет запросы через заголовок расположения hello.
Переопределение URL-адреса  | Перезаписывает URL-адрес запроса hello.

###<a name="follow-redirects"></a>Поддержка перенаправлений
**Назначение:** определяет ли имя узла перенаправленный toohello, определенных в заголовке Location, возвращенные сервером источника клиента запросы.

Основные сведения

- Запросы можно только перенаправленный tooedge записей CNAME, которые соответствуют toohello одной платформе.

Значение|Результат
-|-
Включено|Запросы можно перенаправлять.
Отключено|Запросы не будут перенаправляться.

**Поведение по умолчанию.** Отключено.
###<a name="url-redirect"></a>URL Redirect
**Назначение.** Перенаправляет запросы через заголовок Location.

Конфигурация Hello этой функции необходимо задать hello следующие параметры:

Параметр|Описание
-|-
Код|Выберите код ответа hello, будет возвращено toohello инициатора запроса.
Источник и шаблон| Эти параметры определяют шаблон URI запроса, который определяет тип hello запросов, может быть перенаправлен. Будут перенаправляться только запросы, URL-адрес, она удовлетворяет обоим hello следующие условия: <br/> <br/> **Источник** (или точка доступа к содержимому): выберите относительный путь, который определяет сервер-источник. Это раздел «/XXXX/» hello "и" имя конечной точки. <br/> **Источник (шаблон):** необходимо указать шаблон, который определяет запросы по относительному пути. Этот шаблон регулярного выражения необходимо указать путь, который запускается непосредственно после hello ранее выбранные точки доступа к содержимому (см. выше). <br/> -Убедитесь, что что hello запрос URI (т. е. источник & шаблон) критериям определенного выше не противоречит любое соответствие условиям, определенным для этой функции. <br/> -Убедитесь, что toospecify шаблон. Используя пустое значение в качестве шаблона hello будут соответствовать только запросы toohello корневую папку hello выбранного исходного сервера (например, http://cdn.mydomain.com/).
Место назначения| Определения URL-адреса hello hello toowhich выше запросы будут перенаправляться. <br/> Создайте этот URL-адрес динамически с помощью следующих компонентов: <br/> — шаблон регулярного выражения; <br/>— переменные HTTP. <br/> Заменить значения hello, захваченного при hello исходный шаблон назначения шаблону hello $ _n_  где  _n_  определяет значение hello порядок, в котором он был записан. Например $1 представляет первое значение hello захвачен при hello исходный шаблон, а второе значение hello $2. <br/> 
Это настоятельно рекомендуется toouse абсолютный URL-адрес. Использование Hello относительный URL-адрес может перенаправить tooan CDN URL-адреса: недопустимый путь.

**Пример сценария**

В этом примере мы покажем, как tooredirect ребром CNAME URL-адрес, который разрешает toothis базовый URL-адрес CDN: http://marketing.azureedge.net/brochures

Уточнение запросов будет перенаправленный toothis edge базовый URL-адрес CNAME: http://cdn.mydomain.com/resources

Это перенаправление URL-адреса могут быть реализованы через hello следующая конфигурация:![](./media/cdn-rules-engine-reference/cdn-rules-engine-redirect.png)

**Основные моменты:**

- функция перенаправления URL-адреса Hello определяет hello URL-адресов, которые будут перенаправляться запроса. В результате дополнительные условия соответствия не являются обязательными. Несмотря на то, что условие соответствия hello был определен как «Always», только запросы, toohello точки «брошюр» будут перенаправляться папку hello, «маркетинг» исходной конфигурации клиента. 
- Все соответствующие запросы будут перенаправленный toohello edge CNAME URL-адреса, определенные для параметра «назначение». 
    - Пример сценария №1: 
        - Пример запроса (URL-адрес CDN): http://marketing.azureedge.net/brochures/widgets.pdf. 
        - URL-адрес запроса (после перенаправления): http://cdn.mydomain.com/resources/widgets.pdf.  
    - Пример сценария №2: 
        - Пример запроса (URL-адрес граничной записи): http://marketing.mydomain.com/brochures/widgets.pdf. 
        - URL-адрес запроса (после перенаправления): http://cdn.mydomain.com/resources/widgets.pdf. Пример сценария
    - Пример сценария №3: 
        - Пример запроса (URL-адрес граничной записи CNAME): http://brochures.mydomain.com/campaignA/final/productC.ppt. 
        - URL-адрес запроса (после перенаправления): http://cdn.mydomain.com/resources/campaignA/final/productC.ppt.  
- Hello переменной запроса схемы (% {схема}) был используется для параметра «назначение». Это гарантирует, что этот запрос hello схема остается неизменным после перенаправления.
- Hello сегменты URL-адреса, которые были собраны из запроса hello, добавленных toohello новый URL-адрес через «$1».
 
###<a name="url-rewrite"></a>Переопределение URL-адреса
**Назначение:** перезаписывает URL-адрес запроса hello.

Основные сведения

- Конфигурация Hello этой функции необходимо задать hello следующие параметры:

Параметр|Описание
-|-
 Источник и шаблон | Эти параметры определяют шаблон URI запроса, который определяет тип запросов, которые могут быть переписаны hello. Будут переписаны только запросы, URL-адрес, она удовлетворяет обоим hello следующие условия: <br/>     - **Источник (или точка доступа к содержимому):** выберите относительный путь, который определяет сервер-источник. Это раздел «/XXXX/» hello "и" имя конечной точки. <br/> - **Источник (шаблон):** необходимо указать шаблон, который определяет запросы по относительному пути. Этот шаблон регулярного выражения необходимо указать путь, который запускается непосредственно после hello ранее выбранные точки доступа к содержимому (см. выше). <br/> Убедитесь, что hello запроса URI критериев (т. е. источник & шаблон) определенного выше не конфликтует с любым hello соответствия условиям, определенным для этой функции. Убедитесь, что toospecify шаблон. Используя пустое значение в качестве шаблона hello будут соответствовать только запросы toohello корневую папку hello выбранного исходного сервера (например, http://cdn.mydomain.com/). 
 Место назначения  |Определение hello относительный URL-адрес будет переписана hello toowhich выше запросов: <br/>    1. Выбор точки доступа к содержимому, определяющей сервер-источник. <br/>    2) Определение относительного пути с помощью следующих компонентов: <br/>        — шаблон регулярного выражения; <br/>        — переменные HTTP. <br/> <br/> Заменить значения hello, захваченного при hello исходный шаблон назначения шаблону hello $ _n_  где  _n_  определяет значение hello порядок, в котором он был записан. Например $1 представляет первое значение hello захвачен при hello исходный шаблон, а второе значение hello $2. 
 Эта функция позволяет наших пограничных серверов toorewrite hello URL-адрес без выполнения традиционных перенаправления. Это означает, что инициатор запроса, hello получит hello же ответе код, как если бы был запрошен hello переписать URL-адрес.

**Пример сценария 1**

В этом примере мы покажем, как tooredirect ребром CNAME URL-адрес, который разрешает toothis базовый URL-адрес CDN: http://marketing.azureedge.net/brochures/

Уточнение запросов будет перенаправленный toothis edge базовый URL-адрес CNAME: http://MyOrigin.azureedge.net/resources/

Это перенаправление URL-адреса могут быть реализованы через hello следующая конфигурация:![](./media/cdn-rules-engine-reference/cdn-rules-engine-rewrite.png)

**Пример сценария 2**

В этом примере мы покажем, как tooredirect ребром CNAME URL-адрес из toolowercase верхнего РЕГИСТРА, с помощью регулярных выражений.

Это перенаправление URL-адреса могут быть реализованы через hello следующая конфигурация:![](./media/cdn-rules-engine-reference/cdn-rules-engine-to-lowercase.png)


**Основные моменты:**

- возможность переопределения URL-адресов Hello определяет hello URL-адресов, которые будут переписаны запроса. В результате дополнительные условия соответствия не являются обязательными. Несмотря на то, что условие соответствия hello был определен как «Always», только запросы, toohello точки «брошюр» будут переписаны папку hello, «маркетинг» исходной конфигурации клиента.

- Hello сегменты URL-адреса, которые были собраны из запроса hello, добавленных toohello новый URL-адрес через «$1».



###<a name="compatibility"></a>Совместимость

Эта функция включает условие соответствия процессов, которые должны быть выполнены, прежде чем он может быть применен tooa запроса. В порядке настройки tooprevent конфликтующие критериев соответствия, этот компонент несовместим с hello следующие условия совпадения:

- Номер AS
- Источник CDN
- IP-адрес клиента
- Источник клиента
- Схема запроса
- Каталог URL-пути
- Расширение URL-пути
- Имя файла URL-пути
- Литерал URL-пути
- Регулярное выражение URL-пути
- Шаблон URL-пути
- Литерал запроса URL-адреса
- Параметр запроса URL-адреса
- Регулярное выражение запроса URL-адреса
- Шаблон запроса URL-адреса


## <a name="next-steps"></a>Дальнейшие действия
* [Azure Content Delivery Network Rules Engine](cdn-rules-engine-reference.md) (Обработчик правил сети доставки содержимого Azure)
* [Conditional Expressions for Azure Content Delivery Network (CDN) Rules Engine](cdn-rules-engine-reference-conditional-expressions.md) (Условные выражения для обработчика правил сети доставки содержимого (CDN) Azure)
* [Match Conditions for Azure Content Delivery Network (CDN) Rules Engine](cdn-rules-engine-reference-match-conditions.md) (Условия соответствия для обработчика правил сети доставки содержимого (CDN) Azure)
* [Переопределение поведения по умолчанию HTTP с помощью модуля правил hello](cdn-rules-engine.md)
* [Обзор Azure CDN](cdn-overview.md)
