---
title: "Оптимизация загрузки файлов aaaLarge через hello сети доставки содержимого Azure"
description: "Подробное объяснение оптимизации скачивания больших файлов"
services: cdn
documentationcenter: 
author: smcevoy
manager: erikre
editor: 
ms.assetid: 
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: v-semcev
ms.openlocfilehash: 2646979bfb38e997037bcff5b1cdda34e22c394a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="large-file-download-optimization-via-hello-azure-content-delivery-network"></a>Оптимизация загрузки больших файлов через сеть доставки содержимого Azure hello

Размеры файлов содержимого, доставленных за hello Интернет по-прежнему toogrow оплаты tooenhanced функциональные возможности, улучшенные рисунки и мультимедийного содержимого. На этот рост влияют множество факторов: распространение высокоскоростного доступа к Интернету, устройства хранения большего размера по меньшей цене, широкое распространение видео с высоким разрешением и устройства, подключенные к Интернету (IoT). Для больших файлов быстрого и эффективного механизма — критический tooensure smooth и гибких пользователем.

С доставкой больших файлов связано несколько трудностей. Во-первых среднее время hello toodownload больших файлов может оказаться значительным так, как приложения, не может загружать все данные последовательно. В некоторых случаях приложения, может загружать последнюю часть файла перед первой части hello hello. При запросе небольшой объем файла или задержать загрузку, возможен сбой загрузки hello. Hello загрузки также может быть отложен до после hello сети доставки содержимого (CDN) возвращает весь файл hello из hello исходного сервера. 

Во-вторых hello задержки между компьютером пользователя и файл hello определяет hello скорость, с которой можно просмотреть содержимое. Кроме того, на пропускную способность также могут повлиять перегрузка сети и проблемы, связанные с емкостью сети. Больше расстояния между серверами и пользователей создавать дополнительные возможности для toooccur потери пакетов, что снижает качество. ухудшение Hello причиной ограниченная пропускная способность, потери Повышенная пакета может увеличить время ожидания загрузки файла toofinish hello. 

В-третьих, многие файлы большого размера не доставляются полностью. Пользователи могут отменить загрузку в середине или контрольных hello только первые несколько минут long видео MP4. Таким образом программного обеспечения и мультимедиа доставки компании хотят toodeliver только hello часть файла, который запрашивается. Эффективное распределение hello запрошенные частей снижает hello исходящий трафик с исходного сервера hello. Эффективного распространения также уменьшает памяти hello и нагрузку ввода-вывода на исходном сервере hello. 

Hello сети доставки содержимого Azure из Akamai теперь предоставляет возможность, обеспечивающая больших файлов эффективно toousers всех земной шар hello в масштабе. функция Hello сокращает задержки, так как это снижает нагрузку hello на исходные серверы hello. Этот компонент доступен в ценовой категории Standard Akamai hello.

## <a name="configure-a-cdn-endpoint-toooptimize-delivery-of-large-files"></a>Настройка доставки toooptimize конечной точки CDN в больших файлов.

Можно настроить на доставку toooptimize CDN конечную точку для больших файлов через портал Azure hello. Можно также использовать нашими API REST или любой из hello клиента SDK toodo это. Hello следующие шаги показывают процесс hello через портал Azure hello.

1. tooadd новую конечную точку на hello **профиля CDN** выберите **конечная точка**.

    ![Новая конечная точка](./media/cdn-large-file-optimization/01_Adding.png)  
 
2. В hello **оптимизирован для** раскрывающемся списке выберите **загрузка больших файлов**.

    ![Выбрана оптимизация скачивания больших файлов](./media/cdn-large-file-optimization/02_Creating.png)


После создания конечной точки CDN hello, оно применяется оптимизация hello больших файлов для всех файлов, соответствующих определенным условиям. Этот процесс описан в следующем разделе Hello.

## <a name="optimize-for-delivery-of-large-files-with-hello-azure-content-delivery-network-from-akamai"></a>Оптимизировать для доставки больших файлов с hello сети доставки содержимого Azure от Akamai

функция тип оптимизации Hello большого файла включает сетевой оптимизации и конфигурации toodeliver больших файлов быстрее и более responsively. Общие web доставки с Akamai кэширует файлы только ниже 1,8 ГБ и может туннеля (а не кэш) файлы too150 Гбайт. Оптимизация больших файлов кэширует файлы too150 Гбайт.

Для эффективной оптимизации больших файлов необходимо соблюдение определенных условий. Условия включают работой hello исходного сервера и hello размеры и типы файлов hello, которые запрашиваются. Перед тем как перейти к подробным сведениям по этим вопросам, следует понять, как работает hello оптимизации. 

### <a name="object-chunking"></a>Фрагментирование объекта 

Hello сети доставки содержимого Azure из Akamai использует существует метод, называемый объектом фрагментации. При запросе большого файла hello CDN извлекает более мелкие части файла hello от начала координат hello. После hello CDN edge или POP-сервер получает файл запрос full или диапазон байтов, проверяет, поддерживается ли тип файла hello для этой оптимизации. Он также проверяет, соответствует ли тип файла hello hello требования к размеру файла. Если hello размер файла превышает 10 МБ, hello CDN пограничный сервер запрашивает hello файл из исходной hello фрагментами 2 МБ. 

После блока hello достигает hello CDN edge, кэшируются и немедленно обслуживаться toohello пользователя. Hello CDN затем hello упреждающе выбирает следующий фрагмент в параллельном режиме. Это предварительную загрузку гарантирует, что контент hello остается опережает hello пользователя, что сокращает задержки по одному фрагменту данных. Этот процесс продолжается до hello весь файл загружается (если запрошено), все диапазоны байтов доступны (при запросе), или клиент hello разрывает подключение hello. 

Дополнительные сведения о запрос диапазона байтов hello. в разделе [RFC 7233](https://tools.ietf.org/html/rfc7233).

Hello CDN кэширует все блоки по мере их получения. весь файл Hello не кэшируются на кэша CDN hello toobe. Последующие запросы на диапазоны файла или байт hello обслуживаются из кэша CDN hello. Если не все фрагменты данных hello кэшируются на hello CDN, предварительная загрузка — используется toorequest фрагменты данных из исходной hello. Эта оптимизация зависит от способности hello запросы байтового диапазона toosupport сервера источника hello. _Эта оптимизация не подходит, если hello исходный сервер не поддерживает запросы байтового диапазона._ 

### <a name="caching"></a>Caching
При оптимизации скачивания больших файлов используется другое время истечения срока действия кэша по умолчанию по сравнению с общей веб-доставкой. Существует разница между положительным и отрицательным кэшированием на основе кодов ответов HTTP. Если hello исходного сервера задает время истечения срока действия через cache-control или истечения срока действия в ответ hello заголовок, hello CDN принимает это значение. Если файл hello соответствует условиям hello тип и размер для этого типа оптимизации hello источника не указывает, hello CDN использует значения по умолчанию hello для оптимизации большого файла. В противном случае hello CDN использует значения по умолчанию для доставки в общие web.


|    | Общая веб-доставка | Оптимизация больших файлов 
--- | --- | --- 
Кэширование: положительное <br> HTTP 200, 203, 300, <br> 301, 302 и 410 | 7 дней |1 день  
Кэширование: отрицательное <br> HTTP 204, 305, 404 <br> и 405 | None | 1 с 

### <a name="deal-with-origin-failure"></a>Устранение сбоев источника

Длина времени ожидания чтения источника Hello увеличивает с двух секунд общие web доставки tootwo минут для оптимизации типа hello большого файла. Это увеличение учетных записей для hello большего размера файла размеры tooavoid преждевременное время ожидания соединения.

После истечения времени ожидания соединения hello CDN повторяет несколько раз перед отправкой «504 - истекло время ожидания шлюза» ошибка toohello клиента. 

### <a name="conditions-for-large-file-optimization"></a>Условия для оптимизации больших файлов

Привет, в следующей таблице перечислены hello toobe условия удовлетворены оптимизации большого файла:

Условие | Значения 
--- | --- 
Поддерживаемые типы файлов | 3g2, 3gp, asf, avi, bz2, dmg, exe, f4v, flv, <br> gz, hdp, iso, jxr, m4v, mkv, mov, mp4, <br> mpeg, mpg, mts, pkg, qt, rm, swf, tar, <br> tgz, wdp, webm, webp, wma, wmv, zip  
Минимальный размер файла | 10 МБ 
Максимальный размер файла | 150 ГБ 
Характеристики сервера-источника | Должен поддерживать запросы диапазонов байт 

## <a name="optimize-for-delivery-of-large-files-with-hello-azure-content-delivery-network-from-verizon"></a>Оптимизировать для доставки из Verizon больших файлов с hello сети доставки содержимого Azure

Hello сети доставки содержимого Azure из Verizon доставляет больших файлов без ограничения на размер файла. Дополнительные компоненты включены по доставки по умолчанию toomake больших файлов быстрее.

### <a name="complete-cache-fill"></a>Завершение заполнения кэша

Функция заполнения заполненный кэш по умолчанию Hello включает hello CDN toopull файл в кэш hello при начального запроса прервана или потеряна. 

Функция завершения заполнения кэша особенно полезна для больших ресурсов. Как правило пользователи не загружать их из начала toofinish. Они используют поэтапную загрузку. поведение по умолчанию Hello принудительно hello пограничного сервера tooinitiate получение фона hello средства из hello исходного сервера. После этого актива hello — в локальном кэше hello пограничный сервер. После полного объекта hello в кэше hello, hello пограничный сервер выполняет запросы байтового диапазона toohello CDN для hello кэшированного объекта.

поведение по умолчанию Hello можно отключить с помощью hello обработчик правил в hello Verizon повышенного уровня.

### <a name="peer-cache-fill-hot-filing"></a>Заполнение однорангового кэша "горячими" данными

возможность хранения-сообщений заполнения кэша одноранговых Hello по умолчанию использует сложный собственный алгоритм. Он использует Дополнительные edge, серверы, в зависимости от пропускной способности кэширования и статистической функции запросы метрик toofulfill клиента для популярных больших объектов. Эта функция предотвращает ситуацию, в которой множество дополнительных запросов отправляются tooa пользователя исходного сервера. 

### <a name="conditions-for-large-file-optimization"></a>Условия для оптимизации больших файлов

функции Hello оптимизации для Verizon включены по умолчанию. Ограничения на максимальный размер файла отсутствуют. 

## <a name="additional-considerations"></a>Дополнительные замечания

Рассмотрим следующие дополнительные аспекты для этого типа оптимизации hello.
 
### <a name="azure-content-delivery-network-from-akamai"></a>Сеть доставки содержимого Azure от Akamai

- Hello фрагментации процесс создает дополнительные запросы toohello исходного сервера. Тем не менее hello общий объем данных, отправляемых от начала координат hello намного меньше. Фрагментации результатов в более высокий уровень кэширования характеристиками в hello CDN.

- Памяти и нагрузка операций ввода-вывода уменьшается в начала координат hello поскольку доставляются более мелкие части файла hello.

- Для блоков, кэшированный на hello CDN нет дополнительных запросов toohello источника до истечения срока действия контента hello, или он удаляется из кэша hello.

- Пользователи могут выполнять диапазона запрашивает toohello CDN, а доказывает как любой обычный файл. Оптимизация применяется только в том случае, если он имеет недопустимый тип файла и hello байтовый диапазон — от 10 МБ до 150 ГБ. Если запрошенный размер файла среднее hello меньше 10 МБ, вы можете toouse общие web доставки.

### <a name="azure-content-delivery-network-from-verizon"></a>Сеть доставки содержимого Azure от Verizon

Тип оптимизации Hello общие web доставки можно доставлять больших файлов.
