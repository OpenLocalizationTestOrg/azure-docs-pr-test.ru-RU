---
title: "Переопределение режима HTTP с помощью обработчика правил Azure CDN | Документация Майкрософт"
description: "Обработчик правил помогает настраивать способ обработки HTTP-запросов в Azure CDN, включая блокировку доставки определенных типов содержимого, определение политики кэширования и изменение заголовков HTTP."
services: cdn
documentationcenter: 
author: zhangmanling
manager: erikre
editor: 
ms.assetid: 625a912b-91f2-485d-8991-128cc194ee71
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: mazha
ms.openlocfilehash: abfe283476206b181018d187675b47112dc5ad2f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="override-http-behavior-using-the-azure-cdn-rules-engine"></a>Переопределение режима HTTP с помощью обработчика правил Azure CDN
[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="overview"></a>Обзор
Обработчик правил позволяет настроить способ обработки HTTP-запросов, например блокировку доставки определенных типов содержимого, определение политики кэширования и изменение заголовков HTTP.  В этом руководстве описано, как создать правило, которое изменит схему кэширования ресурсов CDN.  В разделе[См. также](#see-also)находятся соответствующие видеоматериалы.

   > [!TIP] 
   > Подробные сведения о синтаксисе см. в [справочнике по обработчику правил](cdn-rules-engine-reference.md).
   > 


## <a name="tutorial"></a>Учебник
1. В колонке профиля сети CDN нажмите кнопку **Управление** .
   
    ![Кнопка управления в колонке профиля CDN](./media/cdn-rules-engine/cdn-manage-btn.png)
   
    Откроется портал управления CDN.
2. Щелкните вкладку **HTTP Large** (Большая HTTP-платформа), а затем вкладку **Подсистема правил**.
   
    Появятся параметры для нового правила.
   
    ![Параметры нового правила CDN](./media/cdn-rules-engine/cdn-new-rule.png)
   
   > [!IMPORTANT]
   > Порядок перечисления правил влияет на способ их обработки. Последующее правило может переопределить действия, заданные предыдущим правилом.
   > 
   > 
3. В поле **Имя и описание** введите имя.
4. Укажите тип запросов, к которым будет применяться правило.  По умолчанию выбрано условие соответствия **Всегда** .  В этом учебнике будет использоваться условие **Всегда** , поэтому не изменяйте его.
   
   ![Условие соответствия CDN](./media/cdn-rules-engine/cdn-request-type.png)
   
   > [!TIP]
   > В раскрывающемся списке доступно много типов условий соответствия.  Щелкнув синий информационный значок слева от условия соответствия, вы сможете получить подробные сведения о выбранном условии.
   > 
   >  Полный список условных выражений обработчика правил см. в [этой статье](cdn-rules-engine-reference-match-conditions.md).
   >  
   > Полный список условий соответствия обработчика правил см. в [этой статье](cdn-rules-engine-reference-match-conditions.md).
   > 
   > 
5. Нажмите кнопку **+** рядом с пунктом **Функции**, чтобы добавить новую функцию.  В раскрывающемся списке в левой части выберите **Принудительно извлечь внутренний максимальный возраст**.  В появившемся текстовом поле введите **300**.  Оставьте остальные значения по умолчанию.
   
   ![Функция CDN](./media/cdn-rules-engine/cdn-new-feature.png)
   
   > [!NOTE]
   > Как и в случае с условиями соответствия, при щелчке синего информационного значка слева от новой функции будут отображены подробные сведения об этой функции.  При использовании параметра **Force Internal Max-Age** (Принудительно извлечь внутренний максимальный возраст) мы переопределяем заголовки ресурса **Cache-Control** и **Expires** для управления моментом обновления граничным узлом CDN ресурса из источника.  В нашем примере 300 секунд означает, что граничный узел CDN будет кэшировать ресурс в течение 5 минут перед его обновлением из источника.
   > 
   > Полный список функций обработчика правил см. в [этой статье](cdn-rules-engine-reference-features.md).
   > 
   > 
6. Нажмите кнопку **Добавить** , чтобы сохранить новое правило.  Теперь новое правило ожидает утверждения. После утверждения состояние правила изменится с **Pending XML** (XML в ожидании) на **Active XML** (Активный XML).
   
   > [!IMPORTANT]
   > Распространение изменений правил по сети CDN может занять до 90 минут.
   > 
   > 

## <a name="see-also"></a>Дополнительные материалы
* [Обзор Azure CDN](cdn-overview.md)
* [Справочник по обработчику правил](cdn-rules-engine-reference.md)
* [Условия соответствия обработчика правил](cdn-rules-engine-reference-match-conditions.md)
* [Условные выражения обработчика правил](cdn-rules-engine-reference-conditional-expressions.md)
* [Функции обработчика правил](cdn-rules-engine-reference-features.md)
* [Переопределение стандартного поведения через HTTP с помощью обработчика правил](cdn-rules-engine.md)
* [Пятничный видеоролик об Azure. Azure CDN's powerful new Premium Features](https://azure.microsoft.com/documentation/videos/azure-cdns-powerful-new-premium-features/) (Новые возможности Azure CDN уровня "Премиум")