---
title: "aaaDesign и реализуйте Oracle базы данных в Azure | Документы Microsoft"
description: "Разработка базы данных Oracle и ее реализация в среду Azure."
services: virtual-machines-linux
documentationcenter: virtual-machines
author: v-shiuma
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure
ms.date: 6/22/2017
ms.author: rclaus
ms.openlocfilehash: 8fa1207458695df1c7330ec626888b1b6b8d8939
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="design-and-implement-an-oracle-database-in-azure"></a><span data-ttu-id="dc932-103">Разработка базы данных Oracle и ее реализация в Azure</span><span class="sxs-lookup"><span data-stu-id="dc932-103">Design and implement an Oracle database in Azure</span></span>

## <a name="assumptions"></a><span data-ttu-id="dc932-104">Предположения</span><span class="sxs-lookup"><span data-stu-id="dc932-104">Assumptions</span></span>

- <span data-ttu-id="dc932-105">Вы планируете toomigrate из tooAzure локальной базы данных Oracle.</span><span class="sxs-lookup"><span data-stu-id="dc932-105">You're planning toomigrate an Oracle database from on-premises tooAzure.</span></span>
- <span data-ttu-id="dc932-106">В отчетах Гарантийных Oracle различные метрики получить представление об hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-106">You have an understanding of hello various metrics in Oracle AWR reports.</span></span>
- <span data-ttu-id="dc932-107">У вас есть базовое представление о производительности приложения и использовании платформы.</span><span class="sxs-lookup"><span data-stu-id="dc932-107">You have a baseline understanding of application performance and platform utilization.</span></span>

## <a name="goals"></a><span data-ttu-id="dc932-108">Цели</span><span class="sxs-lookup"><span data-stu-id="dc932-108">Goals</span></span>

- <span data-ttu-id="dc932-109">Понять, каким образом toooptimize Oracle развертывания в Azure.</span><span class="sxs-lookup"><span data-stu-id="dc932-109">Understand how toooptimize your Oracle deployment in Azure.</span></span>
- <span data-ttu-id="dc932-110">Изучить параметры настройки производительности для базы данных Oracle в среде Azure.</span><span class="sxs-lookup"><span data-stu-id="dc932-110">Explore performance tuning options for an Oracle database in an Azure environment.</span></span>

## <a name="hello-differences-between-an-on-premises-and-azure-implementation"></a><span data-ttu-id="dc932-111">Здравствуйте, различия между локальной и реализации Azure</span><span class="sxs-lookup"><span data-stu-id="dc932-111">hello differences between an on-premises and Azure implementation</span></span> 

<span data-ttu-id="dc932-112">Ниже приведены некоторые важные tookeep действия в виду при миграции локальных приложений tooAzure.</span><span class="sxs-lookup"><span data-stu-id="dc932-112">Following are some important things tookeep in mind when you're migrating on-premises applications tooAzure.</span></span> 

<span data-ttu-id="dc932-113">Важным отличием является то, что при реализации в Azure ресурсы (например, виртуальные машины, диски и виртуальные сети) можно совместно использовать с другими клиентами.</span><span class="sxs-lookup"><span data-stu-id="dc932-113">One important difference is that in an Azure implementation, resources such as VMs, disks, and virtual networks are shared among other clients.</span></span> <span data-ttu-id="dc932-114">Кроме того ресурсы можно регулировать, в соответствии с требованиями hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-114">In addition, resources can be throttled based on hello requirements.</span></span> <span data-ttu-id="dc932-115">Вместо фокусирования на предотвращение сбоем (MTBF), Azure больше сосредоточен на оставшихся hello сбоя (MTTR).</span><span class="sxs-lookup"><span data-stu-id="dc932-115">Instead of focusing on avoiding failing (MTBF), Azure is more focused on surviving hello failure (MTTR).</span></span>

<span data-ttu-id="dc932-116">Hello следующей таблице перечислены некоторые различия hello реализацию в локальной среде и Azure реализация базы данных Oracle.</span><span class="sxs-lookup"><span data-stu-id="dc932-116">hello following table lists some of hello differences between an on-premises implementation and an Azure implementation of an Oracle database.</span></span>

> 
> |  | <span data-ttu-id="dc932-117">**Реализация в локальной среде**</span><span class="sxs-lookup"><span data-stu-id="dc932-117">**On-premises implementation**</span></span> | <span data-ttu-id="dc932-118">**Реализация в Azure**</span><span class="sxs-lookup"><span data-stu-id="dc932-118">**Azure implementation**</span></span> |
> | --- | --- | --- |
> | <span data-ttu-id="dc932-119">**Сеть**</span><span class="sxs-lookup"><span data-stu-id="dc932-119">**Networking**</span></span> |<span data-ttu-id="dc932-120">Локальная или глобальная сеть</span><span class="sxs-lookup"><span data-stu-id="dc932-120">LAN/WAN</span></span>  |<span data-ttu-id="dc932-121">SDN (программно-конфигурируемая сеть)</span><span class="sxs-lookup"><span data-stu-id="dc932-121">SDN (software-defined networking)</span></span>|
> | <span data-ttu-id="dc932-122">**Группа безопасности**</span><span class="sxs-lookup"><span data-stu-id="dc932-122">**Security group**</span></span> |<span data-ttu-id="dc932-123">Средства ограничения портов и IP-адресов</span><span class="sxs-lookup"><span data-stu-id="dc932-123">IP/port restriction tools</span></span> |[<span data-ttu-id="dc932-124">Группа безопасности сети</span><span class="sxs-lookup"><span data-stu-id="dc932-124">Network Security Group (NSG)</span></span>](https://azure.microsoft.com/blog/network-security-groups) |
> | <span data-ttu-id="dc932-125">**Устойчивость**</span><span class="sxs-lookup"><span data-stu-id="dc932-125">**Resilience**</span></span> |<span data-ttu-id="dc932-126">MTBF (среднее время безотказной работы)</span><span class="sxs-lookup"><span data-stu-id="dc932-126">MTBF (mean time between failures)</span></span> |<span data-ttu-id="dc932-127">MTTR (среднее время toorecovery)</span><span class="sxs-lookup"><span data-stu-id="dc932-127">MTTR (mean time toorecovery)</span></span>|
> | <span data-ttu-id="dc932-128">**Плановое техническое обслуживание**</span><span class="sxs-lookup"><span data-stu-id="dc932-128">**Planned maintenance**</span></span> |<span data-ttu-id="dc932-129">Установка исправлений и обновлений</span><span class="sxs-lookup"><span data-stu-id="dc932-129">Patching/upgrades</span></span>|<span data-ttu-id="dc932-130">[Группы доступности](https://docs.microsoft.com/azure/virtual-machines/windows/infrastructure-availability-sets-guidelines) (установка исправлений и обновлений, управляемая Azure)</span><span class="sxs-lookup"><span data-stu-id="dc932-130">[Availability sets](https://docs.microsoft.com/azure/virtual-machines/windows/infrastructure-availability-sets-guidelines) (patching/upgrades managed by Azure)</span></span> |
> | <span data-ttu-id="dc932-131">**Ресурс**</span><span class="sxs-lookup"><span data-stu-id="dc932-131">**Resource**</span></span> |<span data-ttu-id="dc932-132">Выделенные</span><span class="sxs-lookup"><span data-stu-id="dc932-132">Dedicated</span></span>  |<span data-ttu-id="dc932-133">Совместное использование с другими клиентами</span><span class="sxs-lookup"><span data-stu-id="dc932-133">Shared with other clients</span></span>|
> | <span data-ttu-id="dc932-134">**Регионы**</span><span class="sxs-lookup"><span data-stu-id="dc932-134">**Regions**</span></span> |<span data-ttu-id="dc932-135">Центры обработки данных</span><span class="sxs-lookup"><span data-stu-id="dc932-135">Datacenters</span></span> |[<span data-ttu-id="dc932-136">Пары регионов</span><span class="sxs-lookup"><span data-stu-id="dc932-136">Region pairs</span></span>](https://docs.microsoft.com/azure/virtual-machines/windows/regions-and-availability)|
> | <span data-ttu-id="dc932-137">**Хранилище**</span><span class="sxs-lookup"><span data-stu-id="dc932-137">**Storage**</span></span> |<span data-ttu-id="dc932-138">Сеть SAN и физические диски</span><span class="sxs-lookup"><span data-stu-id="dc932-138">SAN/physical disks</span></span> |[<span data-ttu-id="dc932-139">Хранилище под управлением Azure</span><span class="sxs-lookup"><span data-stu-id="dc932-139">Azure-managed storage</span></span>](https://azure.microsoft.com/pricing/details/managed-disks/?v=17.23h)|
> | <span data-ttu-id="dc932-140">**Масштабирование**</span><span class="sxs-lookup"><span data-stu-id="dc932-140">**Scale**</span></span> |<span data-ttu-id="dc932-141">Вертикальное масштабирование</span><span class="sxs-lookup"><span data-stu-id="dc932-141">Vertical scale</span></span> |<span data-ttu-id="dc932-142">Горизонтальное масштабирование</span><span class="sxs-lookup"><span data-stu-id="dc932-142">Horizontal scale</span></span>|


### <a name="requirements"></a><span data-ttu-id="dc932-143">Требования</span><span class="sxs-lookup"><span data-stu-id="dc932-143">Requirements</span></span>

- <span data-ttu-id="dc932-144">Определите hello базы данных размера и темпов роста.</span><span class="sxs-lookup"><span data-stu-id="dc932-144">Determine hello database size and growth rate.</span></span>
- <span data-ttu-id="dc932-145">Определите требования hello операций ввода-ВЫВОДА, которые можно оценить на основе Oracle Гарантийных отчеты или другие средства сетевого мониторинга.</span><span class="sxs-lookup"><span data-stu-id="dc932-145">Determine hello IOPS requirements, which you can estimate based on Oracle AWR reports or other network monitoring tools.</span></span>

## <a name="configuration-options"></a><span data-ttu-id="dc932-146">Варианты настройки</span><span class="sxs-lookup"><span data-stu-id="dc932-146">Configuration options</span></span>

<span data-ttu-id="dc932-147">Существует четыре возможных области, можно настроить производительность tooimprove в среду Azure:</span><span class="sxs-lookup"><span data-stu-id="dc932-147">There are four potential areas that you can tune tooimprove performance in an Azure environment:</span></span>

- <span data-ttu-id="dc932-148">размер виртуальной машины;</span><span class="sxs-lookup"><span data-stu-id="dc932-148">Virtual machine size</span></span>
- <span data-ttu-id="dc932-149">Пропускная способность сети</span><span class="sxs-lookup"><span data-stu-id="dc932-149">Network throughput</span></span>
- <span data-ttu-id="dc932-150">Типы дисков и их конфигурации</span><span class="sxs-lookup"><span data-stu-id="dc932-150">Disk types and configurations</span></span>
- <span data-ttu-id="dc932-151">Настройки кэша дисков.</span><span class="sxs-lookup"><span data-stu-id="dc932-151">Disk cache settings</span></span>

### <a name="generate-an-awr-report"></a><span data-ttu-id="dc932-152">Создание отчета AWR</span><span class="sxs-lookup"><span data-stu-id="dc932-152">Generate an AWR report</span></span>

<span data-ttu-id="dc932-153">Если есть существующий базы данных Oracle и планировании toomigrate tooAzure, есть несколько вариантов.</span><span class="sxs-lookup"><span data-stu-id="dc932-153">If you have an existing an Oracle database and are planning toomigrate tooAzure, you have several options.</span></span> <span data-ttu-id="dc932-154">Можно запустить hello Гарантийных Oracle отчетов tooget hello метрики (операции ввода-ВЫВОДА, Мбит/с, GiBs и т. д.).</span><span class="sxs-lookup"><span data-stu-id="dc932-154">You can run hello Oracle AWR report tooget hello metrics (IOPS, Mbps, GiBs, and so on).</span></span> <span data-ttu-id="dc932-155">Затем выберите ВМ на основе hello собранными приветствия.</span><span class="sxs-lookup"><span data-stu-id="dc932-155">Then choose hello VM based on hello metrics that you collected.</span></span> <span data-ttu-id="dc932-156">Или вы можете связаться с вашей команды инфраструктуры tooget аналогичные сведения.</span><span class="sxs-lookup"><span data-stu-id="dc932-156">Or you can contact your infrastructure team tooget similar information.</span></span>

<span data-ttu-id="dc932-157">Вы можете запустить отчет AWR во время обычной и пиковой рабочей нагрузки, чтобы сравнить результаты.</span><span class="sxs-lookup"><span data-stu-id="dc932-157">You might consider running your AWR report during both regular and peak workloads, so you can compare.</span></span> <span data-ttu-id="dc932-158">На основе этих отчетов, можно изменить размеры hello виртуальных машин на основании среднего hello рабочей нагрузки или hello максимальной рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="dc932-158">Based on these reports, you can size hello VMs based on either hello average workload or hello maximum workload.</span></span>

<span data-ttu-id="dc932-159">Ниже приведен пример того, как toogenerate гарантийные отчета:</span><span class="sxs-lookup"><span data-stu-id="dc932-159">Following is an example of how toogenerate an AWR report:</span></span>

```bash
$ sqlplus / as sysdba
SQL> EXEC DBMS_WORKLOAD_REPOSITORY.CREATE_SNAPSHOT;
SQL> @?/rdbms/admin/awrrpt.sql
```

### <a name="key-metrics"></a><span data-ttu-id="dc932-160">Ключевые метрики</span><span class="sxs-lookup"><span data-stu-id="dc932-160">Key metrics</span></span>

<span data-ttu-id="dc932-161">Ниже приведены hello метрик, которые можно получить из hello Гарантийных отчета:</span><span class="sxs-lookup"><span data-stu-id="dc932-161">Following are hello metrics that you can obtain from hello AWR report:</span></span>

- <span data-ttu-id="dc932-162">общее число ядер;</span><span class="sxs-lookup"><span data-stu-id="dc932-162">Total number of cores</span></span>
- <span data-ttu-id="dc932-163">тактовая частота процессора;</span><span class="sxs-lookup"><span data-stu-id="dc932-163">CPU clock speed</span></span>
- <span data-ttu-id="dc932-164">общий объем памяти в ГБ;</span><span class="sxs-lookup"><span data-stu-id="dc932-164">Total memory in GB</span></span>
- <span data-ttu-id="dc932-165">загрузка ЦП;</span><span class="sxs-lookup"><span data-stu-id="dc932-165">CPU utilization</span></span>
- <span data-ttu-id="dc932-166">пиковая частота передачи данных;</span><span class="sxs-lookup"><span data-stu-id="dc932-166">Peak data transfer rate</span></span>
- <span data-ttu-id="dc932-167">частота изменения числа операций ввода-вывода (чтение и запись);</span><span class="sxs-lookup"><span data-stu-id="dc932-167">Rate of I/O changes (read/write)</span></span>
- <span data-ttu-id="dc932-168">скорость записи в журнал повторяемых операций (Мбит/с);</span><span class="sxs-lookup"><span data-stu-id="dc932-168">Redo log rate (MBPs)</span></span>
- <span data-ttu-id="dc932-169">Пропускная способность сети</span><span class="sxs-lookup"><span data-stu-id="dc932-169">Network throughput</span></span>
- <span data-ttu-id="dc932-170">показатель задержек сети (низкий и высокий уровень);</span><span class="sxs-lookup"><span data-stu-id="dc932-170">Network latency rate (low/high)</span></span>
- <span data-ttu-id="dc932-171">размер базы данных (в ГБ);</span><span class="sxs-lookup"><span data-stu-id="dc932-171">Database size in GB</span></span>
- <span data-ttu-id="dc932-172">Байт, полученных через SQL * Net из / tooclient</span><span class="sxs-lookup"><span data-stu-id="dc932-172">Bytes received via SQL*Net from/tooclient</span></span>

### <a name="virtual-machine-size"></a><span data-ttu-id="dc932-173">размер виртуальной машины;</span><span class="sxs-lookup"><span data-stu-id="dc932-173">Virtual machine size</span></span>

#### <a name="1-estimate-vm-size-based-on-cpu-memory-and-io-usage-from-hello-awr-report"></a><span data-ttu-id="dc932-174">1. Оценка размера виртуальной Машины на основе использования ЦП, памяти и ввода-вывода из hello Гарантийных отчета</span><span class="sxs-lookup"><span data-stu-id="dc932-174">1. Estimate VM size based on CPU, memory, and I/O usage from hello AWR report</span></span>

<span data-ttu-id="dc932-175">Единственное, обратите внимание на — hello пять верхних синхронизированного переднего плана событий, указывающие, где находятся узкие места системы hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-175">One thing you might look at is hello top five timed foreground events that indicate where hello system bottlenecks are.</span></span>

<span data-ttu-id="dc932-176">Например следующая схема hello, hello синхронизации файлов журнала при вверху hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-176">For example, in hello following diagram, hello log file sync is at hello top.</span></span> <span data-ttu-id="dc932-177">Он указывает hello число ожиданий, необходимые перед hello LGWR записывает повтора hello журнала буфера toohello файл журнала.</span><span class="sxs-lookup"><span data-stu-id="dc932-177">It indicates hello number of waits that are required before hello LGWR writes hello log buffer toohello redo log file.</span></span> <span data-ttu-id="dc932-178">Эти результаты указывают на то, что требуются более производительные диски или хранилище.</span><span class="sxs-lookup"><span data-stu-id="dc932-178">These results indicate that better performing storage or disks are required.</span></span> <span data-ttu-id="dc932-179">Кроме того hello также показан hello количество ЦП (ядра) и hello объем памяти.</span><span class="sxs-lookup"><span data-stu-id="dc932-179">In addition, hello diagram also shows hello number of CPU (cores) and hello amount of memory.</span></span>

![Снимок экрана со страницей отчетов Гарантийных hello](./media/oracle-design/cpu_memory_info.png)

<span data-ttu-id="dc932-181">Hello следующая диаграмма показывает hello всего операций ввода-вывода чтения и записи.</span><span class="sxs-lookup"><span data-stu-id="dc932-181">hello following diagram shows hello total I/O of read and write.</span></span> <span data-ttu-id="dc932-182">Было 59 чтения и 247.3 ГБ записи во время hello hello отчета.</span><span class="sxs-lookup"><span data-stu-id="dc932-182">There were 59 GB read and 247.3 GB written during hello time of hello report.</span></span>

![Снимок экрана со страницей отчетов Гарантийных hello](./media/oracle-design/io_info.png)

#### <a name="2-choose-a-vm"></a><span data-ttu-id="dc932-184">2. Выбор виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="dc932-184">2. Choose a VM</span></span>

<span data-ttu-id="dc932-185">На основе hello сведений, собираемых с hello Гарантийных отчета, hello следующим шагом является toochoose ВМ одинаковый размер, который соответствует вашим требованиям.</span><span class="sxs-lookup"><span data-stu-id="dc932-185">Based on hello information that you collected from hello AWR report, hello next step is toochoose a VM of a similar size that meets your requirements.</span></span> <span data-ttu-id="dc932-186">Список доступных виртуальных машин можно найти в статье hello [оптимизированные для памяти](https://docs.microsoft.com/azure/virtual-machinFine tune es/virtual-machines-windows-sizes-memory).</span><span class="sxs-lookup"><span data-stu-id="dc932-186">You can find a list of available VMs in hello article [Memory optimized](https://docs.microsoft.com/azure/virtual-machinFine tune es/virtual-machines-windows-sizes-memory).</span></span>

#### <a name="3-fine-tune-hello-vm-sizing-with-a-similar-vm-series-based-on-hello-acu"></a><span data-ttu-id="dc932-187">3. Оптимизировать hello размера виртуальной Машины с аналогичные Серия виртуальных Машин с учетом hello ACU</span><span class="sxs-lookup"><span data-stu-id="dc932-187">3. Fine-tune hello VM sizing with a similar VM series based on hello ACU</span></span>

<span data-ttu-id="dc932-188">Сразу после выбора hello виртуальной Машины, обратите внимание toohello ACU для hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="dc932-188">After you've chosen hello VM, pay attention toohello ACU for hello VM.</span></span> <span data-ttu-id="dc932-189">Можно выбрать другой виртуальной Машины основании hello значение ACU, которая соответствует вашим требованиям.</span><span class="sxs-lookup"><span data-stu-id="dc932-189">You might choose a different VM based on hello ACU value that better suits your requirements.</span></span> <span data-ttu-id="dc932-190">Дополнительные сведения см. в статье [Единицы вычислений Azure (ACU)](https://docs.microsoft.com/azure/virtual-machines/windows/acu).</span><span class="sxs-lookup"><span data-stu-id="dc932-190">For more information, see [Azure compute unit](https://docs.microsoft.com/azure/virtual-machines/windows/acu).</span></span>

![Снимок экрана со страницей единицы ACU hello](./media/oracle-design/acu_units.png)

### <a name="network-throughput"></a><span data-ttu-id="dc932-192">Пропускная способность сети</span><span class="sxs-lookup"><span data-stu-id="dc932-192">Network throughput</span></span>

<span data-ttu-id="dc932-193">Привет, следующая схема показывает hello отношение между пропускной способности и операций ввода-ВЫВОДА:</span><span class="sxs-lookup"><span data-stu-id="dc932-193">hello following diagram shows hello relation between throughput and IOPS:</span></span>

![Снимок экрана с показателями пропускной способности](./media/oracle-design/throughput.png)

<span data-ttu-id="dc932-195">пропускная способность сети общее Hello оценивается основании hello следующую информацию:</span><span class="sxs-lookup"><span data-stu-id="dc932-195">hello total network throughput is estimated based on hello following information:</span></span>
- <span data-ttu-id="dc932-196">объем трафика SQL*Net;</span><span class="sxs-lookup"><span data-stu-id="dc932-196">SQL*Net traffic</span></span>
- <span data-ttu-id="dc932-197">Мбит/с x число серверов (исходящий поток, например Oracle Data Guard);</span><span class="sxs-lookup"><span data-stu-id="dc932-197">MBps x number of servers (outbound stream such as Oracle Data Guard)</span></span>
- <span data-ttu-id="dc932-198">другие факторы, такие как репликация приложений.</span><span class="sxs-lookup"><span data-stu-id="dc932-198">Other factors, such as application replication</span></span>

![Снимок экрана: hello SQL * Net пропускной способности](./media/oracle-design/sqlnet_info.png)

<span data-ttu-id="dc932-200">Зависимости от требований к пропускной способности сети, существуют различные типы шлюза для toochoose из.</span><span class="sxs-lookup"><span data-stu-id="dc932-200">Based on your network bandwidth requirements, there are various gateway types for you toochoose from.</span></span> <span data-ttu-id="dc932-201">К ним относятся шлюзы категории "Базовый", VpnGw и Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="dc932-201">These include basic, VpnGw, and Azure ExpressRoute.</span></span> <span data-ttu-id="dc932-202">Дополнительные сведения см. в разделе hello [VPN-шлюз странице цен](https://azure.microsoft.com/en-us/pricing/details/vpn-gateway/?v=17.23h).</span><span class="sxs-lookup"><span data-stu-id="dc932-202">For more information, see hello [VPN gateway pricing page](https://azure.microsoft.com/en-us/pricing/details/vpn-gateway/?v=17.23h).</span></span>

<span data-ttu-id="dc932-203">**рекомендации**;</span><span class="sxs-lookup"><span data-stu-id="dc932-203">**Recommendations**</span></span>

- <span data-ttu-id="dc932-204">Задержки в сети находится выше по сравнению tooan локального развертывания.</span><span class="sxs-lookup"><span data-stu-id="dc932-204">Network latency is higher compared tooan on-premises deployment.</span></span> <span data-ttu-id="dc932-205">Сокращение круговых путей по сети существенно влияет на производительность.</span><span class="sxs-lookup"><span data-stu-id="dc932-205">Reducing network round trips can greatly improve performance.</span></span>
- <span data-ttu-id="dc932-206">tooreduce циклов приема-передачи, консолидации приложений, которые имеют высокий уровень транзакции «нестабильной» приложений на hello одной виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="dc932-206">tooreduce round-trips, consolidate applications that have high transactions or “chatty” apps on hello same virtual machine.</span></span>

### <a name="disk-types-and-configurations"></a><span data-ttu-id="dc932-207">Типы дисков и их конфигурации</span><span class="sxs-lookup"><span data-stu-id="dc932-207">Disk types and configurations</span></span>

- <span data-ttu-id="dc932-208">*Диски ОС по умолчанию.* Диски этого типа обеспечивают хранение постоянных данных и кэширование.</span><span class="sxs-lookup"><span data-stu-id="dc932-208">*Default OS disks*: These disk types offer persistent data and caching.</span></span> <span data-ttu-id="dc932-209">Они оптимизированы для доступа к ОС при запуске и не предназначены для транзакционных рабочих нагрузок или рабочих нагрузок хранилищ данных (аналитических нагрузок).</span><span class="sxs-lookup"><span data-stu-id="dc932-209">They are optimized for OS access at startup, and aren't designed for either transactional or data warehouse (analytical) workloads.</span></span>

- <span data-ttu-id="dc932-210">*Неуправляемые дисков*: В этих типов дисков, управление hello учетных записей хранилища, где хранятся файлы виртуального жесткого диска (VHD) hello, соответствующие tooyour дисков виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="dc932-210">*Unmanaged disks*: With these disk types, you manage hello storage accounts that store hello virtual hard disk (VHD) files that correspond tooyour VM disks.</span></span> <span data-ttu-id="dc932-211">VHD-файлы хранятся в учетных записях хранения Azure как страничные BLOB-объекты.</span><span class="sxs-lookup"><span data-stu-id="dc932-211">VHD files are stored as page blobs in Azure storage accounts.</span></span>

- <span data-ttu-id="dc932-212">*Управлять дисками*: Azure управляет hello учетных записей хранилища, используемого для дисков виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="dc932-212">*Managed disks*: Azure manages hello storage accounts that you use for your VM disks.</span></span> <span data-ttu-id="dc932-213">Укажите тип диска hello (premium или standard) и размер hello hello диска, который требуется.</span><span class="sxs-lookup"><span data-stu-id="dc932-213">You specify hello disk type (premium or standard) and hello size of hello disk that you need.</span></span> <span data-ttu-id="dc932-214">Azure создает и управляет hello диска.</span><span class="sxs-lookup"><span data-stu-id="dc932-214">Azure creates and manages hello disk for you.</span></span>

- <span data-ttu-id="dc932-215">*Диски хранилища класса Premium.* Диски этого типа лучше всего подходят для производственных рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="dc932-215">*Premium storage disks*: These disk types are best suited for production workloads.</span></span> <span data-ttu-id="dc932-216">Размер серии toospecific присоединенного Premium поддерживает VM диски, которые могут быть виртуальными машинами, такие как ВМ серии DS, серии DSv2, GS и F.</span><span class="sxs-lookup"><span data-stu-id="dc932-216">Premium storage supports VM disks that can be attached toospecific size-series VMs, such as DS, DSv2, GS, and F series VMs.</span></span> <span data-ttu-id="dc932-217">диск premium Hello поставляется с разными размерами, и можно выбрать между дисками, начиная от too4 32 ГБ, 096 ГБ.</span><span class="sxs-lookup"><span data-stu-id="dc932-217">hello premium disk comes with different sizes, and you can choose between disks ranging from 32 GB too4,096 GB.</span></span> <span data-ttu-id="dc932-218">Каждый из них имеет свои собственные характеристики производительности.</span><span class="sxs-lookup"><span data-stu-id="dc932-218">Each disk size has its own performance specifications.</span></span> <span data-ttu-id="dc932-219">В зависимости от требований приложения можно добавить один или несколько tooyour дисков виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="dc932-219">Depending on your application requirements, you can attach one or more disks tooyour VM.</span></span>

<span data-ttu-id="dc932-220">При создании нового управляемого диска с портала hello, вы можете hello **тип счета** hello типу диска необходимо toouse.</span><span class="sxs-lookup"><span data-stu-id="dc932-220">When you create a new managed disk from hello portal, you can choose hello **Account type** for hello type of disk you want toouse.</span></span> <span data-ttu-id="dc932-221">Имейте в виду, что не все доступные диски отображаются в раскрывающемся меню hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-221">Keep in mind that not all available disks are shown in hello drop-down menu.</span></span> <span data-ttu-id="dc932-222">После выбора определенного размера виртуальной Машины, меню hello отображение только hello доступной расширенной хранилища конфигураций, основанных на размер этой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="dc932-222">After you choose a particular VM size, hello menu shows only hello available premium storage SKUs that are based on that VM size.</span></span>

![Снимок экрана со страницей hello управляемого диска](./media/oracle-design/premium_disk01.png)

<span data-ttu-id="dc932-224">Дополнительные сведения см. в статье [High-performance Premium Storage and managed disks for VMs](https://docs.microsoft.com/azure/storage/storage-premium-storage) (Высокопроизводительное хранилище класса Premium и управляемые диски для виртуальных машин).</span><span class="sxs-lookup"><span data-stu-id="dc932-224">For more information, see [High-performance Premium Storage and managed disks for VMs](https://docs.microsoft.com/azure/storage/storage-premium-storage).</span></span>

<span data-ttu-id="dc932-225">После настройки хранилища на виртуальной Машине, перед созданием базы данных может потребоваться tooload теста hello дисков.</span><span class="sxs-lookup"><span data-stu-id="dc932-225">After you configure your storage on a VM, you might want tooload test hello disks before creating a database.</span></span> <span data-ttu-id="dc932-226">Зная, что hello скорость ввода-вывода с точки зрения задержки и пропускной способности может помочь определить, если виртуальные машины hello поддерживает hello ожидается пропускной способности с задержкой целевых объектов.</span><span class="sxs-lookup"><span data-stu-id="dc932-226">Knowing hello I/O rate in terms of both latency and throughput can help you determine if hello VMs support hello expected throughput with latency targets.</span></span>

<span data-ttu-id="dc932-227">Есть несколько средств для нагрузочного тестирования приложения, например Oracle Orion, Sysbench и Fio.</span><span class="sxs-lookup"><span data-stu-id="dc932-227">There are a number of tools for application load testing, such as Oracle Orion, Sysbench, and Fio.</span></span>

<span data-ttu-id="dc932-228">Снова запустите hello нагрузочного теста после развертывания базы данных Oracle.</span><span class="sxs-lookup"><span data-stu-id="dc932-228">Run hello load test again after you've deployed an Oracle database.</span></span> <span data-ttu-id="dc932-229">Запустите обычных и пиковых рабочих нагрузок и hello результаты показывают hello базовой среды.</span><span class="sxs-lookup"><span data-stu-id="dc932-229">Start your regular and peak workloads, and hello results show you hello baseline of your environment.</span></span>

<span data-ttu-id="dc932-230">Это может быть более важным хранилище hello toosize на основании hello скорость операций ввода-ВЫВОДА, а не размер хранилища hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-230">It might be more important toosize hello storage based on hello IOPS rate rather than hello storage size.</span></span> <span data-ttu-id="dc932-231">Например при необходимости hello операций ввода-ВЫВОДА — 5000, но требуется только 200 ГБ вы по-прежнему получить hello P30 класса premium диска несмотря на то, что он поступает с более чем 200 ГБ хранилища.</span><span class="sxs-lookup"><span data-stu-id="dc932-231">For example, if hello required IOPS is 5,000, but you only need 200 GB, you might still get hello P30 class premium disk even though it comes with more than 200 GB of storage.</span></span>

<span data-ttu-id="dc932-232">скорость операций ввода-ВЫВОДА Hello можно получить из отчетов Гарантийных hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-232">hello IOPS rate can be obtained from hello AWR report.</span></span> <span data-ttu-id="dc932-233">Определяется журнала повторяемых операций hello, физических операций чтения и записи степень.</span><span class="sxs-lookup"><span data-stu-id="dc932-233">It's determined by hello redo log, physical reads, and writes rate.</span></span>

![Снимок экрана со страницей отчетов Гарантийных hello](./media/oracle-design/awr_report.png)

<span data-ttu-id="dc932-235">Например hello повтора составляет 12,200,000 байт в секунду, что равно too11.63 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="dc932-235">For example, hello redo size is 12,200,000 bytes per second, which is equal too11.63 MBPs.</span></span>
<span data-ttu-id="dc932-236">Hello операций ввода-ВЫВОДА — 12,200,000 / 2,358 = 5,174.</span><span class="sxs-lookup"><span data-stu-id="dc932-236">hello IOPS is 12,200,000 / 2,358 = 5,174.</span></span>

<span data-ttu-id="dc932-237">После того как вы четкое представление о hello требования ввода-вывода, можно выбрать сочетание дисков, которые являются наилучшим образом подходит toomeet этим требованиям.</span><span class="sxs-lookup"><span data-stu-id="dc932-237">After you have a clear picture of hello I/O requirements, you can choose a combination of drives that are best suited toomeet those requirements.</span></span>

<span data-ttu-id="dc932-238">**рекомендации**;</span><span class="sxs-lookup"><span data-stu-id="dc932-238">**Recommendations**</span></span>

- <span data-ttu-id="dc932-239">Для табличного пространства данных распределены рабочей нагрузки ввода-вывода hello число дисков с помощью управляемого хранилища или Oracle ASM.</span><span class="sxs-lookup"><span data-stu-id="dc932-239">For data tablespace, spread hello I/O workload across a number of disks by using managed storage or Oracle ASM.</span></span>
- <span data-ttu-id="dc932-240">С увеличением размера блока hello ввода-вывода для операций с высокой интенсивностью чтения и записи интенсивно, добавьте дополнительные диски с данными.</span><span class="sxs-lookup"><span data-stu-id="dc932-240">As hello I/O block size increases for read-intensive and write-intensive operations, add more data disks.</span></span>
- <span data-ttu-id="dc932-241">Увеличьте размер блока hello для больших последовательных процессов.</span><span class="sxs-lookup"><span data-stu-id="dc932-241">Increase hello block size for large sequential processes.</span></span>
- <span data-ttu-id="dc932-242">Используйте ввод-вывод tooreduce сжатия данных (данные и индексы).</span><span class="sxs-lookup"><span data-stu-id="dc932-242">Use data compression tooreduce I/O (for both data and indexes).</span></span>
- <span data-ttu-id="dc932-243">Используйте отдельные диски данных для журналов повторяемых операций, а также табличного пространства system, temp и undo.</span><span class="sxs-lookup"><span data-stu-id="dc932-243">Separate redo logs, system, and temps, and undo TS on separate data disks.</span></span>
- <span data-ttu-id="dc932-244">Не размещайте файлы приложений на дисках операционной системы по умолчанию (/dev/sda).</span><span class="sxs-lookup"><span data-stu-id="dc932-244">Don't put any application files on default OS disks (/dev/sda).</span></span> <span data-ttu-id="dc932-245">Эти диски не оптимизированы для быстрой загрузки виртуальной машины и не могут обеспечить высокую производительность приложений.</span><span class="sxs-lookup"><span data-stu-id="dc932-245">These disks aren't optimized for fast VM boot times, and they might not provide good performance for your application.</span></span>

### <a name="disk-cache-settings"></a><span data-ttu-id="dc932-246">Настройки кэша дисков.</span><span class="sxs-lookup"><span data-stu-id="dc932-246">Disk cache settings</span></span>

<span data-ttu-id="dc932-247">Существует три варианта кэширования узла:</span><span class="sxs-lookup"><span data-stu-id="dc932-247">There are three options for host caching:</span></span>

- <span data-ttu-id="dc932-248">*Только для чтения:* все запросы кэшируются для операций чтения в будущем.</span><span class="sxs-lookup"><span data-stu-id="dc932-248">*Read-only*: All requests are cached for future reads.</span></span> <span data-ttu-id="dc932-249">Все операции записи сохраняются непосредственно tooAzure хранилища больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="dc932-249">All writes are persisted directly tooAzure Blob storage.</span></span>

- <span data-ttu-id="dc932-250">*Чтение и запись:* это алгоритм упреждающего чтения.</span><span class="sxs-lookup"><span data-stu-id="dc932-250">*Read-write*: This is a “read-ahead” algorithm.</span></span> <span data-ttu-id="dc932-251">Hello считывает и записывает находятся в кэше для будущих операций чтения.</span><span class="sxs-lookup"><span data-stu-id="dc932-251">hello reads and writes are cached for future reads.</span></span> <span data-ttu-id="dc932-252">Операции записи не записи через сохранить toohello локального кэша.</span><span class="sxs-lookup"><span data-stu-id="dc932-252">Non-write-through writes are persisted toohello local cache first.</span></span> <span data-ttu-id="dc932-253">Для SQL Server записывает не сохраненного tooAzure хранилища, поскольку она использует сквозной записи.</span><span class="sxs-lookup"><span data-stu-id="dc932-253">For SQL Server, writes are persisted tooAzure Storage because it uses write-through.</span></span> <span data-ttu-id="dc932-254">Он также предоставляет hello Наименьшая задержка диска светлой рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="dc932-254">It also provides hello lowest disk latency for light workloads.</span></span>

- <span data-ttu-id="dc932-255">*Нет* (отключено): С помощью этого параметра, вы можете обойти hello кэша.</span><span class="sxs-lookup"><span data-stu-id="dc932-255">*None* (disabled): By using this option, you can bypass hello cache.</span></span> <span data-ttu-id="dc932-256">Все данные hello переносятся toodisk и сохраняется tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="dc932-256">All hello data is transferred toodisk and persisted tooAzure Storage.</span></span> <span data-ttu-id="dc932-257">Это метод дает hello место интенсивности ввода-вывода для рабочих нагрузок с большим объемом операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="dc932-257">This method gives you hello highest I/O rate for I/O intensive workloads.</span></span> <span data-ttu-id="dc932-258">Необходимо также tootake «стоимость транзакции» в расчет.</span><span class="sxs-lookup"><span data-stu-id="dc932-258">You also need tootake “transaction cost” into consideration.</span></span>

<span data-ttu-id="dc932-259">**рекомендации**;</span><span class="sxs-lookup"><span data-stu-id="dc932-259">**Recommendations**</span></span>

<span data-ttu-id="dc932-260">пропускная способность hello toomaximize, мы рекомендуем начать работу с **нет** для кэширования узла.</span><span class="sxs-lookup"><span data-stu-id="dc932-260">toomaximize hello throughput, we recommend that you  start with **None** for host caching.</span></span> <span data-ttu-id="dc932-261">Для хранения Premium, следует учитывать, необходимо отключить барьеры «hello» при подключении hello файловой системы с hello **ReadOnly** или **нет** параметры.</span><span class="sxs-lookup"><span data-stu-id="dc932-261">For Premium Storage, keep in mind that you must disable hello "barriers" when you mount hello file system with hello **ReadOnly** or **None** options.</span></span> <span data-ttu-id="dc932-262">Измените файл/etc/fstab hello hello UUID toohello дисков.</span><span class="sxs-lookup"><span data-stu-id="dc932-262">Update hello /etc/fstab file with hello UUID toohello disks.</span></span>

<span data-ttu-id="dc932-263">Дополнительные сведения см. в разделе [Хранилище класса Premium для виртуальных машин Linux](https://docs.microsoft.com/azure/storage/storage-premium-storage#premium-storage-for-linux-vms).</span><span class="sxs-lookup"><span data-stu-id="dc932-263">For more information, see [Premium Storage for Linux VMs](https://docs.microsoft.com/azure/storage/storage-premium-storage#premium-storage-for-linux-vms).</span></span>

![Снимок экрана со страницей hello управляемого диска](./media/oracle-design/premium_disk02.png)

- <span data-ttu-id="dc932-265">Для дисков операционной системы используйте кэширование **Чтение и запись** по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="dc932-265">For OS disks, use default **Read/Write** caching.</span></span>
- <span data-ttu-id="dc932-266">Для кэширования SYSTEM, TEMP и UNDO используйте параметр **Нет**.</span><span class="sxs-lookup"><span data-stu-id="dc932-266">For SYSTEM, TEMP, and UNDO use **None** for caching.</span></span>
- <span data-ttu-id="dc932-267">Для кэширования DATA используйте параметр **Нет**.</span><span class="sxs-lookup"><span data-stu-id="dc932-267">For DATA, use **None** for caching.</span></span> <span data-ttu-id="dc932-268">Но если база данных предназначена только для чтения или интенсивного чтения, используйте кэширование **Только для чтения**.</span><span class="sxs-lookup"><span data-stu-id="dc932-268">But if your database is read-only or read-intensive, use **Read-only** caching.</span></span>

<span data-ttu-id="dc932-269">После сохранения настроек диск данных выбрать параметр кэширования узла hello отключить диск hello на уровне ОС hello и затем снова подключить после внесения изменения hello.</span><span class="sxs-lookup"><span data-stu-id="dc932-269">After your data disk setting is saved, you can't change hello host cache setting unless you unmount hello drive at hello OS level and then remount it after you've made hello change.</span></span>


## <a name="security"></a><span data-ttu-id="dc932-270">Безопасность</span><span class="sxs-lookup"><span data-stu-id="dc932-270">Security</span></span>

<span data-ttu-id="dc932-271">После установки и настройки среды Azure hello следующим шагом является toosecure вашей сети.</span><span class="sxs-lookup"><span data-stu-id="dc932-271">After you have set up and configured your Azure environment, hello next step is toosecure your network.</span></span> <span data-ttu-id="dc932-272">Вот несколько рекомендаций.</span><span class="sxs-lookup"><span data-stu-id="dc932-272">Here are some recommendations:</span></span>

- <span data-ttu-id="dc932-273">*Политика NSG:* NSG можно определить для подсети или сетевого адаптера.</span><span class="sxs-lookup"><span data-stu-id="dc932-273">*NSG policy*: NSG can be defined by a subnet or NIC.</span></span> <span data-ttu-id="dc932-274">Это более простой toocontrol доступ на уровне подсети hello для безопасности и маршрутизации force для таких вещей, как приложение брандмауэры.</span><span class="sxs-lookup"><span data-stu-id="dc932-274">It's simpler toocontrol access at hello subnet level both for security and force routing for things like application firewalls.</span></span>

- <span data-ttu-id="dc932-275">*Jumpbox*: для более безопасного доступа, администраторы не должна подключаться напрямую toohello приложения службы или базы данных.</span><span class="sxs-lookup"><span data-stu-id="dc932-275">*Jumpbox*: For more secure access, administrators should not directly connect toohello application service or database.</span></span> <span data-ttu-id="dc932-276">Jumpbox используется в качестве носителя между hello администратор компьютера и ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="dc932-276">A jumpbox is used as a media between hello administrator machine and Azure resources.</span></span>
<span data-ttu-id="dc932-277">![Снимок экрана со страницей топологии Jumpbox hello](./media/oracle-design/jumpbox.png)</span><span class="sxs-lookup"><span data-stu-id="dc932-277">![Screenshot of hello Jumpbox topology page](./media/oracle-design/jumpbox.png)</span></span>

    <span data-ttu-id="dc932-278">Hello администратора машины должны обеспечивать только jumpbox toohello IP ограниченного доступа.</span><span class="sxs-lookup"><span data-stu-id="dc932-278">hello administrator machine should offer IP-restricted access toohello jumpbox only.</span></span> <span data-ttu-id="dc932-279">Hello jumpbox должна иметь доступ toohello приложения и базы данных.</span><span class="sxs-lookup"><span data-stu-id="dc932-279">hello jumpbox should have access toohello application and database.</span></span>

- <span data-ttu-id="dc932-280">*Частная сеть* (подсети): рекомендуется наличие службы приложения hello и базы данных в разных подсетях, чтобы можно было задать улучшенное управление политикой NSG.</span><span class="sxs-lookup"><span data-stu-id="dc932-280">*Private network* (subnets): We recommend that you have hello application service and database on separate subnets, so better control can be set by NSG policy.</span></span>


## <a name="additional-reading"></a><span data-ttu-id="dc932-281">Дополнительные материалы</span><span class="sxs-lookup"><span data-stu-id="dc932-281">Additional reading</span></span>

- [<span data-ttu-id="dc932-282">Настройка Oracle ASM</span><span class="sxs-lookup"><span data-stu-id="dc932-282">Configure Oracle ASM</span></span>](configure-oracle-asm.md)
- [<span data-ttu-id="dc932-283">Реализация Oracle Data Guard на виртуальной машине Azure под управлением Linux</span><span class="sxs-lookup"><span data-stu-id="dc932-283">Configure Oracle Data Guard</span></span>](configure-oracle-dataguard.md)
- [<span data-ttu-id="dc932-284">Реализация Oracle Golden Gate на виртуальной машине Azure под управлением Linux</span><span class="sxs-lookup"><span data-stu-id="dc932-284">Configure Oracle Golden Gate</span></span>](configure-oracle-golden-gate.md)
- [<span data-ttu-id="dc932-285">Создание резервных копий и восстановление базы данных Oracle Database 12c на виртуальной машине Linux в Azure</span><span class="sxs-lookup"><span data-stu-id="dc932-285">Oracle backup and recovery</span></span>](oracle-backup-recovery.md)

## <a name="next-steps"></a><span data-ttu-id="dc932-286">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="dc932-286">Next steps</span></span>

- <span data-ttu-id="dc932-287">Изучите [руководство по созданию высокодоступных виртуальных машин](../../linux/create-cli-complete.md).</span><span class="sxs-lookup"><span data-stu-id="dc932-287">[Tutorial: Create highly available VMs](../../linux/create-cli-complete.md)</span></span>
- <span data-ttu-id="dc932-288">[Изучите примеры развертывания виртуальных машин с помощью интерфейса командной строки](../../linux/cli-samples.md).</span><span class="sxs-lookup"><span data-stu-id="dc932-288">[Explore VM deployment Azure CLI samples](../../linux/cli-samples.md)</span></span>
