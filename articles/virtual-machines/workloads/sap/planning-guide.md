---
title: "Виртуальные машины aaaAzure планированию и реализации для SAP NetWeaver | Документы Microsoft"
description: "SAP NetWeaver на виртуальных машинах Windows. Руководство по планированию и внедрению"
services: virtual-machines-linux,virtual-machines-windows
documentationcenter: 
author: MSSedusch
manager: timlt
editor: 
tags: azure-resource-manager
keywords: 
ms.assetid: d7c59cc1-b2d0-4d90-9126-628f9c7a5538
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 11/08/2016
ms.author: sedusch
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 0d1e9fa13d847e4d8abb3c34fd352d1f4ece3717
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-virtual-machines-planning-and-implementation-for-sap-netweaver"></a><span data-ttu-id="3be31-103">SAP NetWeaver на виртуальных машинах Windows. Руководство по планированию и внедрению</span><span class="sxs-lookup"><span data-stu-id="3be31-103">Azure Virtual Machines planning and implementation for SAP NetWeaver</span></span>
[767598]:https://launchpad.support.sap.com/#/notes/767598
[773830]:https://launchpad.support.sap.com/#/notes/773830
[826037]:https://launchpad.support.sap.com/#/notes/826037
[965908]:https://launchpad.support.sap.com/#/notes/965908
[1031096]:https://launchpad.support.sap.com/#/notes/1031096
[1139904]:https://launchpad.support.sap.com/#/notes/1139904
[1173395]:https://launchpad.support.sap.com/#/notes/1173395
[1245200]:https://launchpad.support.sap.com/#/notes/1245200
[1409604]:https://launchpad.support.sap.com/#/notes/1409604
[1558958]:https://launchpad.support.sap.com/#/notes/1558958
[1585981]:https://launchpad.support.sap.com/#/notes/1585981
[1588316]:https://launchpad.support.sap.com/#/notes/1588316
[1590719]:https://launchpad.support.sap.com/#/notes/1590719
[1597355]:https://launchpad.support.sap.com/#/notes/1597355
[1605680]:https://launchpad.support.sap.com/#/notes/1605680
[1619720]:https://launchpad.support.sap.com/#/notes/1619720
[1619726]:https://launchpad.support.sap.com/#/notes/1619726
[1619967]:https://launchpad.support.sap.com/#/notes/1619967
[1750510]:https://launchpad.support.sap.com/#/notes/1750510
[1752266]:https://launchpad.support.sap.com/#/notes/1752266
[1757924]:https://launchpad.support.sap.com/#/notes/1757924
[1757928]:https://launchpad.support.sap.com/#/notes/1757928
[1758182]:https://launchpad.support.sap.com/#/notes/1758182
[1758496]:https://launchpad.support.sap.com/#/notes/1758496
[1772688]:https://launchpad.support.sap.com/#/notes/1772688
[1814258]:https://launchpad.support.sap.com/#/notes/1814258
[1882376]:https://launchpad.support.sap.com/#/notes/1882376
[1909114]:https://launchpad.support.sap.com/#/notes/1909114
[1922555]:https://launchpad.support.sap.com/#/notes/1922555
[1928533]:https://launchpad.support.sap.com/#/notes/1928533
[1941500]:https://launchpad.support.sap.com/#/notes/1941500
[1956005]:https://launchpad.support.sap.com/#/notes/1956005
[1973241]:https://launchpad.support.sap.com/#/notes/1973241
[1984787]:https://launchpad.support.sap.com/#/notes/1984787
[1999351]:https://launchpad.support.sap.com/#/notes/1999351
[2002167]:https://launchpad.support.sap.com/#/notes/2002167
[2015553]:https://launchpad.support.sap.com/#/notes/2015553
[2039619]:https://launchpad.support.sap.com/#/notes/2039619
[2069760]:https://launchpad.support.sap.com/#/notes/2069760
[2121797]:https://launchpad.support.sap.com/#/notes/2121797
[2134316]:https://launchpad.support.sap.com/#/notes/2134316
[2178632]:https://launchpad.support.sap.com/#/notes/2178632
[2191498]:https://launchpad.support.sap.com/#/notes/2191498
[2233094]:https://launchpad.support.sap.com/#/notes/2233094
[2243692]:https://launchpad.support.sap.com/#/notes/2243692

[azure-cli]:../../../cli-install-nodejs.md
[azure-portal]:https://portal.azure.com
[azure-ps]:/powershell/azureps-cmdlets-docs
[azure-quickstart-templates-github]:https://github.com/Azure/azure-quickstart-templates
[azure-script-ps]:https://go.microsoft.com/fwlink/p/?LinkID=395017
[azure-subscription-service-limits]:../../../azure-subscription-service-limits.md
[azure-subscription-service-limits-subscription]:../../../azure-subscription-service-limits.md#subscription-limits

[dbms-guide]:dbms-guide.md
[dbms-guide-2.1]:dbms-guide.md#c7abf1f0-c927-4a7c-9c1d-c7b5b3b7212f
[dbms-guide-2.2]:dbms-guide.md#c8e566f9-21b7-4457-9f7f-126036971a91
[dbms-guide-2.3]:dbms-guide.md#10b041ef-c177-498a-93ed-44b3441ab152
[dbms-guide-2]:dbms-guide.md#65fa79d6-a85f-47ee-890b-22e794f51a64
[dbms-guide-3]:dbms-guide.md#871dfc27-e509-4222-9370-ab1de77021c3
[dbms-guide-5.5.1]:dbms-guide.md#0fef0e79-d3fe-4ae2-85af-73666a6f7268
[dbms-guide-5.5.2]:dbms-guide.md#f9071eff-9d72-4f47-9da4-1852d782087b
[dbms-guide-5.6]:dbms-guide.md#1b353e38-21b3-4310-aeb6-a77e7c8e81c8
[dbms-guide-5.8]:dbms-guide.md#9053f720-6f3b-4483-904d-15dc54141e30
[dbms-guide-5]:dbms-guide.md#3264829e-075e-4d25-966e-a49dad878737
[dbms-guide-8.4.1]:dbms-guide.md#b48cfe3b-48e9-4f5b-a783-1d29155bd573
[dbms-guide-8.4.2]:dbms-guide.md#23c78d3b-ca5a-4e72-8a24-645d141a3f5d
[dbms-guide-8.4.3]:dbms-guide.md#77cd2fbb-307e-4cbf-a65f-745553f72d2c
[dbms-guide-8.4.4]:dbms-guide.md#f77c1436-9ad8-44fb-a331-8671342de818
[dbms-guide-900-sap-cache-server-on-premises]:dbms-guide.md#642f746c-e4d4-489d-bf63-73e80177a0a8

[dbms-guide-figure-100]:media/virtual-machines-shared-sap-dbms-guide/100_storage_account_types.png
[dbms-guide-figure-200]:media/virtual-machines-shared-sap-dbms-guide/200-ha-set-for-dbms-ha.png
[dbms-guide-figure-300]:media/virtual-machines-shared-sap-dbms-guide/300-reference-config-iaas.png
[dbms-guide-figure-400]:media/virtual-machines-shared-sap-dbms-guide/400-sql-2012-backup-to-blob-storage.png
[dbms-guide-figure-500]:media/virtual-machines-shared-sap-dbms-guide/500-sql-2012-backup-to-blob-storage-different-containers.png
[dbms-guide-figure-600]:media/virtual-machines-shared-sap-dbms-guide/600-iaas-maxdb.png
[dbms-guide-figure-700]:media/virtual-machines-shared-sap-dbms-guide/700-livecach-prod.png
[dbms-guide-figure-800]:media/virtual-machines-shared-sap-dbms-guide/800-azure-vm-sap-content-server.png
[dbms-guide-figure-900]:media/virtual-machines-shared-sap-dbms-guide/900-sap-cache-server-on-premises.png

[deployment-guide]:deployment-guide.md
[deployment-guide-2.2]:deployment-guide.md#42ee2bdb-1efc-4ec7-ab31-fe4c22769b94
[deployment-guide-3.1.2]:deployment-guide.md#3688666f-281f-425b-a312-a77e7db2dfab
[deployment-guide-3.2]:deployment-guide.md#db477013-9060-4602-9ad4-b0316f8bb281
[deployment-guide-3.3]:deployment-guide.md#54a1fc6d-24fd-4feb-9c57-ac588a55dff2
[deployment-guide-3.4]:deployment-guide.md#a9a60133-a763-4de8-8986-ac0fa33aa8c1
[deployment-guide-3]:deployment-guide.md#b3253ee3-d63b-4d74-a49b-185e76c4088e
[deployment-guide-4.1]:deployment-guide.md#604bcec2-8b6e-48d2-a944-61b0f5dee2f7
[deployment-guide-4.2]:deployment-guide.md#7ccf6c3e-97ae-4a7a-9c75-e82c37beb18e
[deployment-guide-4.3]:deployment-guide.md#31d9ecd6-b136-4c73-b61e-da4a29bbc9cc
[deployment-guide-4.4.2]:deployment-guide.md#6889ff12-eaaf-4f3c-97e1-7c9edc7f7542
[deployment-guide-4.4]:deployment-guide.md#c7cbb0dc-52a4-49db-8e03-83e7edc2927d
[deployment-guide-4.5.1]:deployment-guide.md#987cf279-d713-4b4c-8143-6b11589bb9d4
[deployment-guide-4.5.2]:deployment-guide.md#408f3779-f422-4413-82f8-c57a23b4fc2f
[deployment-guide-4.5]:deployment-guide.md#d98edcd3-f2a1-49f7-b26a-07448ceb60ca
[deployment-guide-5.1]:deployment-guide.md#bb61ce92-8c5c-461f-8c53-39f5e5ed91f2
[deployment-guide-5.2]:deployment-guide.md#e2d592ff-b4ea-4a53-a91a-e5521edb6cd1
[deployment-guide-5.3]:deployment-guide.md#fe25a7da-4e4e-4388-8907-8abc2d33cfd8

[deployment-guide-configure-monitoring-scenario-1]:deployment-guide.md#ec323ac3-1de9-4c3a-b770-4ff701def65b
[deployment-guide-configure-proxy]:deployment-guide.md#baccae00-6f79-4307-ade4-40292ce4e02d
[deployment-guide-figure-100]:media/virtual-machines-shared-sap-deployment-guide/100-deploy-vm-image.png
[deployment-guide-figure-1000]:media/virtual-machines-shared-sap-deployment-guide/1000-service-properties.png
[deployment-guide-figure-11]:deployment-guide.md#figure-11
[deployment-guide-figure-1100]:media/virtual-machines-shared-sap-deployment-guide/1100-azperflib.png
[deployment-guide-figure-1200]:media/virtual-machines-shared-sap-deployment-guide/1200-cmd-test-login.png
[deployment-guide-figure-1300]:media/virtual-machines-shared-sap-deployment-guide/1300-cmd-test-executed.png
[deployment-guide-figure-14]:deployment-guide.md#figure-14
[deployment-guide-figure-1400]:media/virtual-machines-shared-sap-deployment-guide/1400-azperflib-error-servicenotstarted.png
[deployment-guide-figure-300]:media/virtual-machines-shared-sap-deployment-guide/300-deploy-private-image.png
[deployment-guide-figure-400]:media/virtual-machines-shared-sap-deployment-guide/400-deploy-using-disk.png
[deployment-guide-figure-5]:deployment-guide.md#figure-5
[deployment-guide-figure-50]:media/virtual-machines-shared-sap-deployment-guide/50-forced-tunneling-suse.png
[deployment-guide-figure-500]:media/virtual-machines-shared-sap-deployment-guide/500-install-powershell.png
[deployment-guide-figure-6]:deployment-guide.md#figure-6
[deployment-guide-figure-600]:media/virtual-machines-shared-sap-deployment-guide/600-powershell-version.png
[deployment-guide-figure-7]:deployment-guide.md#figure-7
[deployment-guide-figure-700]:media/virtual-machines-shared-sap-deployment-guide/700-install-powershell-installed.png
[deployment-guide-figure-760]:media/virtual-machines-shared-sap-deployment-guide/760-azure-cli-version.png
[deployment-guide-figure-900]:media/virtual-machines-shared-sap-deployment-guide/900-cmd-update-executed.png
[deployment-guide-figure-azure-cli-installed]:deployment-guide.md#402488e5-f9bb-4b29-8063-1c5f52a892d0
[deployment-guide-figure-azure-cli-version]:deployment-guide.md#0ad010e6-f9b5-4c21-9c09-bb2e5efb3fda
[deployment-guide-install-vm-agent-windows]:deployment-guide.md#b2db5c9a-a076-42c6-9835-16945868e866
[deployment-guide-troubleshooting-chapter]:deployment-guide.md#564adb4f-5c95-4041-9616-6635e83a810b

[deploy-template-cli]:../../../resource-group-template-deploy-cli.md
[deploy-template-portal]:../../../resource-group-template-deploy-portal.md
[deploy-template-powershell]:../../../resource-group-template-deploy.md

[dr-guide-classic]:http://go.microsoft.com/fwlink/?LinkID=521971

[getting-started]:get-started.md
[getting-started-dbms]:get-started.md#1343ffe1-8021-4ce6-a08d-3a1553a4db82
[getting-started-deployment]:get-started.md#6aadadd2-76b5-46d8-8713-e8d63630e955
[getting-started-planning]:get-started.md#3da0389e-708b-4e82-b2a2-e92f132df89c

[getting-started-windows-classic]:../../virtual-machines-windows-classic-sap-get-started.md
[getting-started-windows-classic-dbms]:../../virtual-machines-windows-classic-sap-get-started.md#c5b77a14-f6b4-44e9-acab-4d28ff72a930
[getting-started-windows-classic-deployment]:../../virtual-machines-windows-classic-sap-get-started.md#f84ea6ce-bbb4-41f7-9965-34d31b0098ea
[getting-started-windows-classic-dr]:../../virtual-machines-windows-classic-sap-get-started.md#cff10b4a-01a5-4dc3-94b6-afb8e55757d3
[getting-started-windows-classic-ha-sios]:../../virtual-machines-windows-classic-sap-get-started.md#4bb7512c-0fa0-4227-9853-4004281b1037
[getting-started-windows-classic-planning]:../../virtual-machines-windows-classic-sap-get-started.md#f2a5e9d8-49e4-419e-9900-af783173481c

[ha-guide-classic]:http://go.microsoft.com/fwlink/?LinkId=613056

[install-extension-cli]:virtual-machines-linux-enable-aem.md

[Logo_Linux]:media/virtual-machines-shared-sap-shared/Linux.png
[Logo_Windows]:media/virtual-machines-shared-sap-shared/Windows.png

[msdn-set-azurermvmaemextension]:https://msdn.microsoft.com/library/azure/mt670598.aspx

[planning-guide]:planning-guide.md  
[planning-guide-1.2]:planning-guide.md#e55d1e22-c2c8-460b-9897-64622a34fdff
[planning-guide-11]:planning-guide.md#7cf991a1-badd-40a9-944e-7baae842a058
[planning-guide-11.4.1]:planning-guide.md#5d9d36f9-9058-435d-8367-5ad05f00de77
[planning-guide-11.5]:planning-guide.md#4e165b58-74ca-474f-a7f4-5e695a93204f
[planning-guide-2.1]:planning-guide.md#1625df66-4cc6-4d60-9202-de8a0b77f803
[planning-guide-2.2]:planning-guide.md#f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10
[planning-guide-3.1]:planning-guide.md#be80d1b9-a463-4845-bd35-f4cebdb5424a
[planning-guide-3.2.1]:planning-guide.md#df49dc09-141b-4f34-a4a2-990913b30358
[planning-guide-3.2.2]:planning-guide.md#fc1ac8b2-e54a-487c-8581-d3cc6625e560
[planning-guide-3.2.3]:planning-guide.md#18810088-f9be-4c97-958a-27996255c665
[planning-guide-3.2]:planning-guide.md#8d8ad4b8-6093-4b91-ac36-ea56d80dbf77
[planning-guide-3.3.2]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92
[planning-guide-5.1.1]:planning-guide.md#4d175f1b-7353-4137-9d2f-817683c26e53
[planning-guide-5.1.2]:planning-guide.md#e18f7839-c0e2-4385-b1e6-4538453a285c
[planning-guide-5.2.1]:planning-guide.md#1b287330-944b-495d-9ea7-94b83aff73ef
[planning-guide-5.2.2]:planning-guide.md#57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3
[planning-guide-5.2]:planning-guide.md#6ffb9f41-a292-40bf-9e70-8204448559e7
[planning-guide-5.3.1]:planning-guide.md#6e835de8-40b1-4b71-9f18-d45b20959b79
[planning-guide-5.3.2]:planning-guide.md#a43e40e6-1acc-4633-9816-8f095d5a7b6a
[planning-guide-5.4.2]:planning-guide.md#9789b076-2011-4afa-b2fe-b07a8aba58a1
[planning-guide-5.5.1]:planning-guide.md#4efec401-91e0-40c0-8e64-f2dceadff646
[planning-guide-5.5.3]:planning-guide.md#17e0d543-7e8c-4160-a7da-dd7117a1ad9d
[planning-guide-7.1]:planning-guide.md#3e9c3690-da67-421a-bc3f-12c520d99a30
[planning-guide-7]:planning-guide.md#96a77628-a05e-475d-9df3-fb82217e8f14
[planning-guide-9.1]:planning-guide.md#6f0a47f3-a289-4090-a053-2521618a28c3
[planning-guide-azure-premium-storage]:planning-guide.md#ff5ad0f9-f7f4-4022-9102-af07aef3bc92

[planning-guide-figure-100]:media/virtual-machines-shared-sap-planning-guide/100-single-vm-in-azure.png
[planning-guide-figure-1300]:media/virtual-machines-shared-sap-planning-guide/1300-ref-config-iaas-for-sap.png
[planning-guide-figure-1400]:media/virtual-machines-shared-sap-planning-guide/1400-attach-detach-disks.png
[planning-guide-figure-1600]:media/virtual-machines-shared-sap-planning-guide/1600-firewall-port-rule.png
[planning-guide-figure-1700]:media/virtual-machines-shared-sap-planning-guide/1700-single-vm-demo.png
[planning-guide-figure-1900]:media/virtual-machines-shared-sap-planning-guide/1900-vm-set-vnet.png
[planning-guide-figure-200]:media/virtual-machines-shared-sap-planning-guide/200-multiple-vms-in-azure.png
[planning-guide-figure-2100]:media/virtual-machines-shared-sap-planning-guide/2100-s2s.png
[planning-guide-figure-2200]:media/virtual-machines-shared-sap-planning-guide/2200-network-printing.png
[planning-guide-figure-2300]:media/virtual-machines-shared-sap-planning-guide/2300-sapgui-stms.png
[planning-guide-figure-2400]:media/virtual-machines-shared-sap-planning-guide/2400-vm-extension-overview.png
[planning-guide-figure-2500]:media/virtual-machines-shared-sap-planning-guide/planning-monitoring-overview-2502.png
[planning-guide-figure-2600]:media/virtual-machines-shared-sap-planning-guide/2600-sap-router-connection.png
[planning-guide-figure-2700]:media/virtual-machines-shared-sap-planning-guide/2700-exposed-sap-portal.png
[planning-guide-figure-2800]:media/virtual-machines-shared-sap-planning-guide/2800-endpoint-config.png
[planning-guide-figure-2900]:media/virtual-machines-shared-sap-planning-guide/2900-azure-ha-sap-ha.png
[planning-guide-figure-2901]:media/virtual-machines-shared-sap-planning-guide/2901-azure-ha-sap-ha-md.png
[planning-guide-figure-300]:media/virtual-machines-shared-sap-planning-guide/300-vpn-s2s.png
[planning-guide-figure-3000]:media/virtual-machines-shared-sap-planning-guide/3000-sap-ha-on-azure.png
[planning-guide-figure-3200]:media/virtual-machines-shared-sap-planning-guide/3200-sap-ha-with-sql.png
[planning-guide-figure-3201]:media/virtual-machines-shared-sap-planning-guide/3201-sap-ha-with-sql-md.png
[planning-guide-figure-400]:media/virtual-machines-shared-sap-planning-guide/400-vm-services.png
[planning-guide-figure-600]:media/virtual-machines-shared-sap-planning-guide/600-s2s-details.png
[planning-guide-figure-700]:media/virtual-machines-shared-sap-planning-guide/700-decision-tree-deploy-to-azure.png
[planning-guide-figure-800]:media/virtual-machines-shared-sap-planning-guide/800-portal-vm-overview.png
[planning-guide-microsoft-azure-networking]:planning-guide.md#61678387-8868-435d-9f8c-450b2424f5bd
[planning-guide-storage-microsoft-azure-storage-and-data-disks]:planning-guide.md#a72afa26-4bf4-4a25-8cf7-855d6032157f

[powershell-install-configure]:https://docs.microsoft.com/powershell/azure/install-azurerm-ps
[resource-group-authoring-templates]:../../../resource-group-authoring-templates.md
[resource-group-overview]:../../../azure-resource-manager/resource-group-overview.md
[resource-groups-networking]:../../../virtual-network/resource-groups-networking.md
[sap-pam]:https://support.sap.com/pam
[sap-templates-2-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-2-tier-os-disk]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-disk%2Fazuredeploy.json
[sap-templates-2-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-2-tier-user-image%2Fazuredeploy.json
[sap-templates-3-tier-marketplace-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-marketplace-image%2Fazuredeploy.json
[sap-templates-3-tier-user-image]:https://portal.azure.com/#create/Microsoft.Template/uri/https%3A%2F%2Fraw.githubusercontent.com%2FAzure%2Fazure-quickstart-templates%2Fmaster%2Fsap-3-tier-user-image%2Fazuredeploy.json
[storage-azure-cli]:../../../storage/common/storage-azure-cli.md
[storage-azure-cli-copy-blobs]:../../../storage/common/storage-azure-cli.md#copy-blobs
[storage-introduction]:../../../storage/common/storage-introduction.md
[storage-powershell-guide-full-copy-vhd]:../../../storage/common/storage-powershell-guide-full.md#how-to-copy-blobs-from-one-storage-container-to-another
[storage-premium-storage-preview-portal]:../../../storage/common/storage-premium-storage.md
[storage-redundancy]:../../../storage/common/storage-redundancy.md
[storage-scalability-targets]:../../../storage/common/storage-scalability-targets.md
[storage-use-azcopy]:../../../storage/common/storage-use-azcopy.md
[template-201-vm-from-specialized-vhd]:https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-from-specialized-vhd
[templates-101-simple-windows-vm]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-simple-windows-vm
[templates-101-vm-from-user-image]:https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image
[virtual-machines-linux-attach-disk-portal]:../../linux/attach-disk-portal.md
[virtual-machines-azure-resource-manager-architecture]:../../../resource-manager-deployment-model.md
[virtual-machines-azurerm-versus-azuresm]:virtual-machines-linux-compare-deployment-models.md
[virtual-machines-windows-classic-configure-oracle-data-guard]:../../virtual-machines-windows-classic-configure-oracle-data-guard.md
[virtual-machines-linux-cli-deploy-templates]:../../linux/cli-deploy-templates.md
[virtual-machines-deploy-rmtemplates-powershell]:../../virtual-machines-windows-ps-manage.md
[virtual-machines-linux-agent-user-guide]:../../linux/agent-user-guide.md
[virtual-machines-linux-agent-user-guide-command-line-options]:../../linux/agent-user-guide.md#command-line-options
[virtual-machines-linux-capture-image]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager]:../../linux/capture-image.md
[virtual-machines-linux-capture-image-resource-manager-capture]:../../linux/capture-image.md#step-2-capture-the-vm
[virtual-machines-windows-capture-image-resource-manager]:../../windows/capture-image.md
[virtual-machines-windows-capture-image]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-windows-capture-image-prepare-the-vm-for-image-capture]:../../virtual-machines-windows-generalize-vhd.md
[virtual-machines-linux-configure-raid]:../../linux/configure-raid.md
[virtual-machines-linux-configure-lvm]:../../linux/configure-lvm.md
[virtual-machines-linux-classic-create-upload-vhd-step-1]:../../virtual-machines-linux-classic-create-upload-vhd.md#step-1-prepare-the-image-to-be-uploaded
[virtual-machines-linux-create-upload-vhd-suse]:../../linux/suse-create-upload-vhd.md
[virtual-machines-linux-create-upload-vhd-oracle]:../../linux/oracle-create-upload-vhd.md
[virtual-machines-linux-redhat-create-upload-vhd]:../../linux/redhat-create-upload-vhd.md
[virtual-machines-linux-how-to-attach-disk]:../../linux/add-disk.md
[virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]:../../linux/add-disk.md#connect-to-the-linux-vm-to-mount-the-new-disk
[virtual-machines-linux-tutorial]:../../linux/quick-create-cli.md
[virtual-machines-linux-update-agent]:../../linux/update-agent.md
[virtual-machines-manage-availability]:../../linux/manage-availability.md
[virtual-machines-ps-create-preconfigure-windows-resource-manager-vms]:virtual-machines-windows-create-powershell.md
[virtual-machines-sizes-linux]:../../linux/sizes.md
[virtual-machines-sizes-windows]:../../windows/sizes.md
[virtual-machines-windows-classic-ps-sql-alwayson-availability-groups]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-alwayson-availability-groups.md
[virtual-machines-windows-classic-ps-sql-int-listener]:./../../windows/sqlclassic/virtual-machines-windows-classic-ps-sql-int-listener.md
[virtual-machines-sql-server-high-availability-and-disaster-recovery-solutions]:./../../windows/sql/virtual-machines-windows-sql-high-availability-dr.md
[virtual-machines-sql-server-infrastructure-services]:./../../windows/sql/virtual-machines-windows-sql-server-iaas-overview.md
[virtual-machines-sql-server-performance-best-practices]:./../../windows/sql/virtual-machines-windows-sql-performance.md
[virtual-machines-upload-image-windows-resource-manager]:../../virtual-machines-windows-upload-image.md
[virtual-machines-windows-tutorial]:../../virtual-machines-windows-hero-tutorial.md
[virtual-machines-workload-template-sql-alwayson]:https://azure.microsoft.com/documentation/templates/sql-server-2014-alwayson-dsc/
[virtual-network-deploy-multinic-arm-cli]:../../../virtual-network/virtual-network-deploy-multinic-arm-cli.md
[virtual-network-deploy-multinic-arm-ps]:../../../virtual-network/virtual-network-deploy-multinic-arm-ps.md
[virtual-network-deploy-multinic-arm-template]:../../../virtual-network/virtual-network-deploy-multinic-arm-template.md
[virtual-networks-configure-vnet-to-vnet-connection]:../../../vpn-gateway/vpn-gateway-vnet-vnet-rm-ps.md
[virtual-networks-create-vnet-arm-pportal]:../../../virtual-network/virtual-networks-create-vnet-arm-pportal.md
[virtual-networks-manage-dns-in-vnet]:../../../virtual-network/virtual-networks-name-resolution-for-vms-and-role-instances.md
[virtual-networks-multiple-nics-windows]:../../windows/multiple-nics.md
[virtual-networks-multiple-nics-linux]:../../linux/multiple-nics.md
[virtual-networks-nsg]:../../../virtual-network/virtual-networks-nsg.md
[virtual-networks-reserved-private-ip]:../../../virtual-network/virtual-networks-static-private-ip-arm-ps.md
[virtual-networks-static-private-ip-arm-pportal]:../../../virtual-network/virtual-networks-static-private-ip-arm-pportal.md
[virtual-networks-udr-overview]:../../../virtual-network/virtual-networks-udr-overview.md
[vpn-gateway-about-vpn-devices]:../../../vpn-gateway/vpn-gateway-about-vpn-devices.md
[vpn-gateway-create-site-to-site-rm-powershell]:../../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md
[vpn-gateway-cross-premises-options]:../../../vpn-gateway/vpn-gateway-plan-design.md
[vpn-gateway-site-to-site-create]:../../../vpn-gateway/vpn-gateway-site-to-site-create.md
[vpn-gateway-vpn-faq]:../../../vpn-gateway/vpn-gateway-vpn-faq.md
[xplat-cli]:../../../cli-install-nodejs.md
[xplat-cli-azure-resource-manager]:../../../xplat-cli-azure-resource-manager.md
[capture-image-linux-step-2-create-vm-image]:../../linux/capture-image.md#step-2-create-vm-image

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

<span data-ttu-id="3be31-117">Microsoft Azure позволяет компаниям tooacquire вычислительные ресурсы и хранилища в минимальными затратами времени без длительных процессов поставки.</span><span class="sxs-lookup"><span data-stu-id="3be31-117">Microsoft Azure enables companies tooacquire compute and storage resources in minimal time without lengthy procurement cycles.</span></span> <span data-ttu-id="3be31-118">Виртуальные машины Azure позволяют компаниям toodeploy Классические приложения, как приложения в Azure на основе SAP NetWeaver и повышать их надежность и доступность, не привлекая дополнительные ресурсы доступны в локальной.</span><span class="sxs-lookup"><span data-stu-id="3be31-118">Azure Virtual Machines allow companies toodeploy classical applications, like SAP NetWeaver based applications into Azure and extend their reliability and availability without having further resources available on-premises.</span></span> <span data-ttu-id="3be31-119">Службы виртуальных машин Azure также поддерживает подключения между организациями, какие tooactively компаний позволяет интегрировать виртуальные машины Azure в свои локальные домены их частных облаков и свой ландшафт системы SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-119">Azure Virtual Machine Services also supports cross-premises connectivity, which enables companies tooactively integrate Azure Virtual Machines into their on-premises domains, their Private Clouds and their SAP System Landscape.</span></span>
<span data-ttu-id="3be31-120">В этом техническом документе описываются принципы работы hello из виртуальной машины Microsoft Azure и предоставляет подробно обсуждаются вопросы планирования и реализации для установок SAP NetWeaver в Azure и таким образом должен быть tooread hello документа перед началом фактическим развертываниям SAP NetWeaver в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-120">This white paper describes hello fundamentals of Microsoft Azure Virtual Machine and provides a walk-through of planning and implementation considerations for SAP NetWeaver installations in Azure and as such should be hello document tooread before starting actual deployments of SAP NetWeaver on Azure.</span></span>
<span data-ttu-id="3be31-121">Hello документ дополняет hello документацию по установке SAP и примечания по SAP, которые представляют Привет основные ресурсы для установки и развертывания программного обеспечения SAP в заданный платформы.</span><span class="sxs-lookup"><span data-stu-id="3be31-121">hello paper complements hello SAP Installation Documentation and SAP Notes, which represent hello primary resources for installations and deployments of SAP software on given platforms.</span></span>

## <a name="summary"></a><span data-ttu-id="3be31-122">Сводка</span><span class="sxs-lookup"><span data-stu-id="3be31-122">Summary</span></span>
<span data-ttu-id="3be31-123">Облачные вычисления — это широко используемый термин, который приобретает все большее значение в пределах hello ИТ-индустрии, от малых компаний вверх toolarge транснациональных корпораций.</span><span class="sxs-lookup"><span data-stu-id="3be31-123">Cloud Computing is a widely used term, which is gaining more and more importance within hello IT industry, from small companies up toolarge and multinational corporations.</span></span>

<span data-ttu-id="3be31-124">Microsoft Azure — hello платформа облачных служб Майкрософт, которая предлагает широкий спектр новых возможностей.</span><span class="sxs-lookup"><span data-stu-id="3be31-124">Microsoft Azure is hello Cloud Services Platform from Microsoft, which offers a wide spectrum of new possibilities.</span></span> <span data-ttu-id="3be31-125">Теперь клиенты — может toorapidly подготовки и Отмена подготовки приложения как служба в облаке hello так, чтобы они не только tootechnical или бюджетные ограничения.</span><span class="sxs-lookup"><span data-stu-id="3be31-125">Now customers are able toorapidly provision and de-provision applications as a service in hello cloud, so they are not limited tootechnical or budgeting restrictions.</span></span> <span data-ttu-id="3be31-126">Вместо того чтобы тратить время и бюджет на аппаратную инфраструктуру, компании могут сосредоточить внимание на приложения hello, бизнес-процессов и его преимущества для клиентов и пользователей.</span><span class="sxs-lookup"><span data-stu-id="3be31-126">Instead of investing time and budget into hardware infrastructure, companies can focus on hello application, business processes, and its benefits for customers and users.</span></span>

<span data-ttu-id="3be31-127">Корпорация Майкрософт предоставляет службы виртуальных машин Microsoft Azure как комплексную платформу «инфраструктура как услуга» (IaaS).</span><span class="sxs-lookup"><span data-stu-id="3be31-127">With Microsoft Azure Virtual Machine Services, Microsoft offers a comprehensive Infrastructure as a Service (IaaS) platform.</span></span> <span data-ttu-id="3be31-128">Виртуальные машины Azure (IaaS) поддерживают приложения на основе SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="3be31-128">SAP NetWeaver based applications are supported on Azure Virtual Machines (IaaS).</span></span> <span data-ttu-id="3be31-129">В этом документе описывается, как tooplan и реализуйте SAP NetWeaver на основе приложений в Microsoft Azure как платформу hello по выбору.</span><span class="sxs-lookup"><span data-stu-id="3be31-129">This whitepaper describes how tooplan and implement SAP NetWeaver based applications within Microsoft Azure as hello platform of choice.</span></span>

<span data-ttu-id="3be31-130">Hello этом документе основное внимание уделяется два основных аспекта:</span><span class="sxs-lookup"><span data-stu-id="3be31-130">hello paper itself focuses on two main aspects:</span></span>

* <span data-ttu-id="3be31-131">Первая часть Hello описывает две модели развертывания для приложений на основе SAP NetWeaver в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-131">hello first part describes two supported deployment patterns for SAP NetWeaver based applications on Azure.</span></span> <span data-ttu-id="3be31-132">Также в ней описываются общие процессы управления Azure и их специфика для развертываний SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-132">It also describes general handling of Azure with SAP deployments in mind.</span></span>
* <span data-ttu-id="3be31-133">Hello второй части Подробные сведения о реализации hello два разных сценария, описанных в первой части hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-133">hello second part details implementing hello two different scenarios described in hello first part.</span></span>

<span data-ttu-id="3be31-134">Дополнительные ресурсы перечислены в этой статье в разделе [Ресурсы][planning-guide-1.2].</span><span class="sxs-lookup"><span data-stu-id="3be31-134">For additional resources see chapter [Resources][planning-guide-1.2] in this document.</span></span>

### <a name="definitions-upfront"></a><span data-ttu-id="3be31-135">Определения</span><span class="sxs-lookup"><span data-stu-id="3be31-135">Definitions upfront</span></span>
<span data-ttu-id="3be31-136">В документе hello мы используем hello следующими условиями:</span><span class="sxs-lookup"><span data-stu-id="3be31-136">Throughout hello document, we use hello following terms:</span></span>

* <span data-ttu-id="3be31-137">IaaS: инфраструктура как услуга.</span><span class="sxs-lookup"><span data-stu-id="3be31-137">IaaS: Infrastructure as a Service</span></span>
* <span data-ttu-id="3be31-138">PaaS: платформа как услуга.</span><span class="sxs-lookup"><span data-stu-id="3be31-138">PaaS: Platform as a Service</span></span>
* <span data-ttu-id="3be31-139">SaaS: программное обеспечение как услуга.</span><span class="sxs-lookup"><span data-stu-id="3be31-139">SaaS: Software as a Service</span></span>
* <span data-ttu-id="3be31-140">ARM: Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="3be31-140">ARM: Azure Resource Manager</span></span>
* <span data-ttu-id="3be31-141">Компонент SAP: отдельное приложение SAP, например ECC, BW, Solution Manager или EP.</span><span class="sxs-lookup"><span data-stu-id="3be31-141">SAP Component: an individual SAP application such as ECC, BW, Solution Manager, or EP.</span></span>  <span data-ttu-id="3be31-142">Компоненты SAP могут основываться на традиционной технологии ABAP или Java или быть приложениями не на основе NetWeaver, например бизнес-объектами.</span><span class="sxs-lookup"><span data-stu-id="3be31-142">SAP components can be based on traditional ABAP or Java technologies or a non-NetWeaver based application such as Business Objects.</span></span>
* <span data-ttu-id="3be31-143">Среда SAP: один или несколько компонентов SAP логически сгруппированы tooperform бизнес-функцию, например разработки, QAS, обучение, DR или производства.</span><span class="sxs-lookup"><span data-stu-id="3be31-143">SAP Environment: one or more SAP components logically grouped tooperform a business function such as Development, QAS, Training, DR, or Production.</span></span>
* <span data-ttu-id="3be31-144">Ландшафт SAP: Ссылается toohello все ресурсы SAP в клиента ИТ-инфраструктуре.</span><span class="sxs-lookup"><span data-stu-id="3be31-144">SAP Landscape: This refers toohello entire SAP assets in a customer’s IT landscape.</span></span> <span data-ttu-id="3be31-145">Hello ландшафт SAP включает все рабочие и непроизводственных средах.</span><span class="sxs-lookup"><span data-stu-id="3be31-145">hello SAP landscape includes all production and non-production environments.</span></span>
* <span data-ttu-id="3be31-146">Система SAP: hello сочетание уровень СУБД и уровня приложений, например, система разработки SAP ERP, тестовая система SAP BW, производственная система SAP CRM и т. д.</span><span class="sxs-lookup"><span data-stu-id="3be31-146">SAP System: hello combination of DBMS layer and application layer of, for example, an SAP ERP development system, SAP BW test system, SAP CRM production system, etc..</span></span> <span data-ttu-id="3be31-147">В развертываниях Azure, не поддерживаемые toodivide этих двух уровней между локальной средой и Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-147">In Azure deployments, it is not supported toodivide these two layers between on-premises and Azure.</span></span> <span data-ttu-id="3be31-148">Таким образом, система SAP должна быть развернута полностью в локальной среде или полностью в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-148">This means an SAP system is either deployed on-premises or it is deployed in Azure.</span></span> <span data-ttu-id="3be31-149">Тем не менее можно развернуть hello различных системах ландшафта SAP в Azure или локально.</span><span class="sxs-lookup"><span data-stu-id="3be31-149">However, you can deploy hello different systems of an SAP landscape into either Azure or on-premises.</span></span> <span data-ttu-id="3be31-150">Например вы развертывание hello SAP CRM разработки и тестирования системы в Azure, но hello SAP CRM рабочей системы в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-150">For example, you could deploy hello SAP CRM development and test systems in Azure but hello SAP CRM production system on-premises.</span></span>
* <span data-ttu-id="3be31-151">Развертывание только в облаке: развертывания, где hello подписка Azure не подключен через сайт сайт или ExpressRoute подключения toohello локальной сетевой инфраструктуре.</span><span class="sxs-lookup"><span data-stu-id="3be31-151">Cloud-Only deployment: A deployment where hello Azure subscription is not connected via a site-to-site or ExpressRoute connection toohello on-premises network infrastructure.</span></span> <span data-ttu-id="3be31-152">В документации Azure развертывания такого рода традиционно называются полностью облачными.</span><span class="sxs-lookup"><span data-stu-id="3be31-152">In common Azure documentation these kinds of deployments are also described as ‘Cloud-Only’ deployments.</span></span> <span data-ttu-id="3be31-153">Виртуальные машины, развернутые с помощью этого метода осуществляется через Интернет hello и общедоступный IP-адрес и/или публичного DNS-сервера имя назначенного toohello ВМ в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-153">Virtual Machines deployed with this method are accessed through hello internet and a public IP address and/or a public DNS name assigned toohello VMs in Azure.</span></span> <span data-ttu-id="3be31-154">Для Microsoft Windows hello в локальной среде Active Directory (AD) и DNS не будет продлен tooAzure в этих типах развертываний.</span><span class="sxs-lookup"><span data-stu-id="3be31-154">For Microsoft Windows hello on-premises Active Directory (AD) and DNS is not extended tooAzure in these types of deployments.</span></span> <span data-ttu-id="3be31-155">Поэтому виртуальные машины hello не являются частью hello в локальной Active Directory.</span><span class="sxs-lookup"><span data-stu-id="3be31-155">Hence hello VMs are not part of hello on-premises Active Directory.</span></span> <span data-ttu-id="3be31-156">Это же справедливо и для реализаций Linux с использованием OpenLDAP + Kerberos и т. п.</span><span class="sxs-lookup"><span data-stu-id="3be31-156">Same is true for Linux implementations using, for example, OpenLDAP + Kerberos.</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-157">В этом документе под полностью облачным развертыванием понимается полный ландшафт SAP. Такое развертывание работает только в Azure без распространения службы Active Directory (OpenLDAP) или службы разрешения имен из локальной сети в общедоступное облако.</span><span class="sxs-lookup"><span data-stu-id="3be31-157">Cloud-Only deployment in this document is defined as complete SAP landscapes are running exclusively in Azure without extension of Active Directory / OpenLDAP  or name resolution from on-premises into public cloud.</span></span> <span data-ttu-id="3be31-158">Только для облака конфигурации не поддерживаются для производственных систем SAP или где SAP STMS или других локальных ресурсов должны toobe обмена данными между систем SAP, размещенных в Azure и ресурсам, расположенным в локальной конфигурации.</span><span class="sxs-lookup"><span data-stu-id="3be31-158">Cloud-Only configurations are not supported for production SAP systems or configurations where SAP STMS or other on-premises resources need toobe used between SAP systems hosted on Azure and resources residing on-premises.</span></span>
>
>

* <span data-ttu-id="3be31-159">Между организациями: Описан сценарий, где виртуальные машины, развернутой tooan подписке Azure с сайт сайт, несколькими сайтами или подключение ExpressRoute между центрами обработки данных в локальной среде hello и Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-159">Cross-premises: Describes a scenario where VMs are deployed tooan Azure subscription that has site-to-site, multi-site, or ExpressRoute connectivity between hello on-premises datacenter(s) and Azure.</span></span> <span data-ttu-id="3be31-160">В документации Azure развертывания такого рода также называются распределенными развертываниями.</span><span class="sxs-lookup"><span data-stu-id="3be31-160">In common Azure documentation, these kinds of deployments are also described as cross-premises scenarios.</span></span> <span data-ttu-id="3be31-161">Hello подключения hello обусловлено tooextend локальным доменам в локальной среде Active Directory или OpenLDAP и локальных DNS в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-161">hello reason for hello connection is tooextend on-premises domains, on-premises Active Directory/OpenLDAP, and on-premises DNS into Azure.</span></span> <span data-ttu-id="3be31-162">Hello локальной альбомная — расширенные toohello активов Azure hello подписки.</span><span class="sxs-lookup"><span data-stu-id="3be31-162">hello on-premises landscape is extended toohello Azure assets of hello subscription.</span></span> <span data-ttu-id="3be31-163">При таком расширении hello виртуальных машин может быть частью локального домена hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-163">Having this extension, hello VMs can be part of hello on-premises domain.</span></span> <span data-ttu-id="3be31-164">Пользователи домена hello локального домена имеют доступ к серверам hello и могут запускать службы на их виртуальных машин (как службы СУБД).</span><span class="sxs-lookup"><span data-stu-id="3be31-164">Domain users of hello on-premises domain can access hello servers and can run services on those VMs (like DBMS services).</span></span> <span data-ttu-id="3be31-165">Возможно взаимодействие и разрешение имен между виртуальными машинами, развернутыми в локальной сети и в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-165">Communication and name resolution between VMs deployed on-premises and Azure deployed VMs is possible.</span></span> <span data-ttu-id="3be31-166">Это сценарий hello, предполагается, что большинство toobe активы SAP развернутых в.</span><span class="sxs-lookup"><span data-stu-id="3be31-166">This is hello scenario we expect most SAP assets toobe deployed in.</span></span> <span data-ttu-id="3be31-167">Дополнительные сведения см. в [этой][vpn-gateway-cross-premises-options] и [этой][vpn-gateway-site-to-site-create] статьях.</span><span class="sxs-lookup"><span data-stu-id="3be31-167">For more information, see [this][vpn-gateway-cross-premises-options] article and [this][vpn-gateway-site-to-site-create].</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-168">Для рабочих систем SAP поддерживаются распределенные развертывания систем SAP, в которых системы SAP выполняются на виртуальных машинах Azure, являющихся членами локального домена.</span><span class="sxs-lookup"><span data-stu-id="3be31-168">Cross-premises deployments of SAP systems where Azure Virtual Machines running SAP systems are members of an on-premises domain are supported for production SAP systems.</span></span> <span data-ttu-id="3be31-169">Распределенная конфигурация предполагает развертывание в Azure полного ландшафта SAP или его частей.</span><span class="sxs-lookup"><span data-stu-id="3be31-169">Cross-premises configurations are supported for deploying parts or complete SAP landscapes into Azure.</span></span> <span data-ttu-id="3be31-170">Даже выполнение hello завершения ландшафт SAP в Azure, необходимо иметь этих виртуальных машин, не входит в состав локальному домену и РЕКЛАМЫ и OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-170">Even running hello complete SAP landscape in Azure requires having those VMs being part of on-premises domain and ADS/OpenLDAP.</span></span> <span data-ttu-id="3be31-171">Прежние версии документации hello мы говорили о сценариях гибридной ИТ-корневым hello термин «Гибридный» hello факт, что между сетями, между локальными и Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-171">In former versions of hello documentation, we talked about Hybrid-IT scenarios, where hello term ‘Hybrid’ is rooted in hello fact that there is a cross-premises connectivity between on-premises and Azure.</span></span> <span data-ttu-id="3be31-172">Кроме того, hello факт, что hello ВМ в Azure являются частью hello в локальной Active Directory или OpenLDAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-172">Plus, hello fact that hello VMs in Azure are part of hello on-premises Active Directory / OpenLDAP.</span></span>
>
>

<span data-ttu-id="3be31-173">В некоторой документации Майкрософт сценарии распределенного подключения описываются иначе. В частности, это касается высокодоступных конфигураций СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-173">Some Microsoft documentation describes cross-premises scenarios a bit differently, especially for DBMS HA configurations.</span></span> <span data-ttu-id="3be31-174">В случае hello документов, связанных с SAP hello hello межсетевых локальных ресурсах просто сводится toohaving сайт сайт или private (ExpressRoute) подключения и hello факт что hello ландшафт SAP распределяется между локальной средой и Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-174">In hello case of hello SAP-related documents, hello cross-premises scenario just boils down toohaving a site-to-site or private (ExpressRoute) connectivity and hello fact that hello SAP landscape is distributed between on-premises and Azure.</span></span>  

### <span data-ttu-id="3be31-175"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Ресурсы</span><span class="sxs-lookup"><span data-stu-id="3be31-175"><a name="e55d1e22-c2c8-460b-9897-64622a34fdff"></a>Resources</span></span>
<span data-ttu-id="3be31-176">Hello следующих дополнительных руководствах рассматриваются темы hello развертываний SAP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-176">hello following additional guides are available for hello topic of SAP deployments on Azure:</span></span>

* <span data-ttu-id="3be31-177">[SAP NetWeaver на виртуальных машинах Windows. Руководство по планированию и внедрению (этот документ)][planning-guide]</span><span class="sxs-lookup"><span data-stu-id="3be31-177">[Azure Virtual Machines planning and implementation for SAP NetWeaver (this document)][planning-guide]</span></span>
* <span data-ttu-id="3be31-178">[SAP NetWeaver на виртуальных машинах Windows. Руководство по развертыванию][deployment-guide]</span><span class="sxs-lookup"><span data-stu-id="3be31-178">[Azure Virtual Machines deployment for SAP NetWeaver][deployment-guide]</span></span>
* <span data-ttu-id="3be31-179">[SAP NetWeaver на виртуальных машинах Windows. Руководство по развертыванию СУБД][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="3be31-179">[Azure Virtual Machines DBMS deployment for SAP NetWeaver][dbms-guide]</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3be31-180">Везде, где применяется возможные toohello связи, ссылающиеся на руководство по установке SAP (Reference InstGuide-01, в разделе <http://service.sap.com/instguides>).</span><span class="sxs-lookup"><span data-stu-id="3be31-180">Wherever possible a link toohello referring SAP Installation Guide is used (Reference InstGuide-01, see <http://service.sap.com/instguides>).</span></span> <span data-ttu-id="3be31-181">Когда дело доходит toohello предварительные требования и процесс установки, руководства по установке NetWeaver SAP hello следует всегда внимательно читайте, как в этом документе рассматриваются только особые задачи для системы SAP NetWeaver, установленные на виртуальной машине Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-181">When it comes toohello prerequisites and installation process, hello SAP NetWeaver Installation Guides should always be read carefully, as this document only covers specific tasks for SAP NetWeaver systems installed in a Microsoft Azure Virtual Machine.</span></span>
>
>

<span data-ttu-id="3be31-182">следующие примечания по SAP Hello приведены связанные toohello тема SAP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-182">hello following SAP Notes are related toohello topic of SAP on Azure:</span></span>

| <span data-ttu-id="3be31-183">Номер примечания</span><span class="sxs-lookup"><span data-stu-id="3be31-183">Note number</span></span> | <span data-ttu-id="3be31-184">Название</span><span class="sxs-lookup"><span data-stu-id="3be31-184">Title</span></span> |
| --- | --- |
| <span data-ttu-id="3be31-185">[1928533]</span><span class="sxs-lookup"><span data-stu-id="3be31-185">[1928533]</span></span> |<span data-ttu-id="3be31-186">Приложения SAP в Azure: поддерживаемые продукты и размеры</span><span class="sxs-lookup"><span data-stu-id="3be31-186">SAP Applications on Azure: Supported Products and Sizing</span></span> |
| <span data-ttu-id="3be31-187">[2015553]</span><span class="sxs-lookup"><span data-stu-id="3be31-187">[2015553]</span></span> |<span data-ttu-id="3be31-188">SAP в Microsoft Azure: требования</span><span class="sxs-lookup"><span data-stu-id="3be31-188">SAP on Microsoft Azure: Support Prerequisites</span></span> |
| <span data-ttu-id="3be31-189">[1999351]</span><span class="sxs-lookup"><span data-stu-id="3be31-189">[1999351]</span></span> |<span data-ttu-id="3be31-190">Устранение неполадок, связанных с расширенным мониторингом Azure для SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-190">Troubleshooting Enhanced Azure Monitoring for SAP</span></span> |
| <span data-ttu-id="3be31-191">[2178632]</span><span class="sxs-lookup"><span data-stu-id="3be31-191">[2178632]</span></span> |<span data-ttu-id="3be31-192">Ключевые метрики мониторинга для SAP в Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-192">Key Monitoring Metrics for SAP on Microsoft Azure</span></span> |
| <span data-ttu-id="3be31-193">[1409604]</span><span class="sxs-lookup"><span data-stu-id="3be31-193">[1409604]</span></span> |<span data-ttu-id="3be31-194">Виртуализация в Windows: расширенный мониторинг</span><span class="sxs-lookup"><span data-stu-id="3be31-194">Virtualization on Windows: Enhanced Monitoring</span></span> |
| <span data-ttu-id="3be31-195">[2191498]</span><span class="sxs-lookup"><span data-stu-id="3be31-195">[2191498]</span></span> |<span data-ttu-id="3be31-196">SAP на платформе Linux в Azure: расширенный мониторинг</span><span class="sxs-lookup"><span data-stu-id="3be31-196">SAP on Linux with Azure: Enhanced Monitoring</span></span> |
| <span data-ttu-id="3be31-197">[2243692]</span><span class="sxs-lookup"><span data-stu-id="3be31-197">[2243692]</span></span> |<span data-ttu-id="3be31-198">Linux на виртуальной машине Microsoft Azure (IaaS): проблемы с лицензированием SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-198">Linux on Microsoft Azure (IaaS) VM: SAP license issues</span></span> |
| <span data-ttu-id="3be31-199">[1984787]</span><span class="sxs-lookup"><span data-stu-id="3be31-199">[1984787]</span></span> |<span data-ttu-id="3be31-200">SUSE LINUX Enterprise Server 12: примечания к установке</span><span class="sxs-lookup"><span data-stu-id="3be31-200">SUSE LINUX Enterprise Server 12: Installation notes</span></span> |
| <span data-ttu-id="3be31-201">[2002167]</span><span class="sxs-lookup"><span data-stu-id="3be31-201">[2002167]</span></span> |<span data-ttu-id="3be31-202">Red Hat Enterprise Linux 7.x: установка и обновление</span><span class="sxs-lookup"><span data-stu-id="3be31-202">Red Hat Enterprise Linux 7.x: Installation and Upgrade</span></span> |
| <span data-ttu-id="3be31-203">[2069760]</span><span class="sxs-lookup"><span data-stu-id="3be31-203">[2069760]</span></span> |<span data-ttu-id="3be31-204">Установка и обновление Oracle Linux 7.x SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-204">Oracle Linux 7.x SAP Installation and Upgrade</span></span> |
| <span data-ttu-id="3be31-205">[1597355]</span><span class="sxs-lookup"><span data-stu-id="3be31-205">[1597355]</span></span> |<span data-ttu-id="3be31-206">Рекомендация по области буфера для Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-206">Swap-space recommendation for Linux</span></span> |

<span data-ttu-id="3be31-207">Также считывать hello [SCN вики-сайте](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) , содержащий все примечания SAP для Linux.</span><span class="sxs-lookup"><span data-stu-id="3be31-207">Also read hello [SCN Wiki](https://wiki.scn.sap.com/wiki/display/HOME/SAPonLinuxNotes) that contains all SAP Notes for Linux.</span></span>

<span data-ttu-id="3be31-208">Общие ограничения по умолчанию и максимальные ограничения для подписок Azure можно найти в [этой статье][azure-subscription-service-limits-subscription].</span><span class="sxs-lookup"><span data-stu-id="3be31-208">General default limitations and maximum limitations of Azure subscriptions can be found in [this article][azure-subscription-service-limits-subscription].</span></span>

## <a name="possible-scenarios"></a><span data-ttu-id="3be31-209">Возможные сценарии</span><span class="sxs-lookup"><span data-stu-id="3be31-209">Possible Scenarios</span></span>
<span data-ttu-id="3be31-210">SAP часто рассматривается как один из hello критически важных приложений в предприятиях.</span><span class="sxs-lookup"><span data-stu-id="3be31-210">SAP is often seen as one of hello most mission-critical applications within enterprises.</span></span> <span data-ttu-id="3be31-211">Архитектура Hello и операции таких приложений чаще всего являются очень сложными и гарантирует, что требования к доступности и производительности важна.</span><span class="sxs-lookup"><span data-stu-id="3be31-211">hello architecture and operations of these applications is mostly very complex and ensuring that you meet requirements on availability and performance is important.</span></span>

<span data-ttu-id="3be31-212">Таким образом, предприятия имеют toothink тщательно о том, какие приложения могут выполняться в среде общедоступного облака, независимо от выбранного hello поставщика облачных.</span><span class="sxs-lookup"><span data-stu-id="3be31-212">Thus enterprises have toothink carefully about which applications can be run in a public cloud environment, independent of hello chosen cloud provider.</span></span>

<span data-ttu-id="3be31-213">Ниже перечислены возможные типы систем для развертывания приложений на основе SAP NetWeaver в среде общедоступного облака.</span><span class="sxs-lookup"><span data-stu-id="3be31-213">Possible system types for deploying SAP NetWeaver based applications within public cloud environments are listed below:</span></span>

1. <span data-ttu-id="3be31-214">Рабочие системы среднего размера.</span><span class="sxs-lookup"><span data-stu-id="3be31-214">Medium-sized production systems</span></span>
2. <span data-ttu-id="3be31-215">Системы для разработки.</span><span class="sxs-lookup"><span data-stu-id="3be31-215">Development systems</span></span>
3. <span data-ttu-id="3be31-216">Тестовые системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-216">Testing systems</span></span>
4. <span data-ttu-id="3be31-217">Системы-прототипы.</span><span class="sxs-lookup"><span data-stu-id="3be31-217">Prototype systems</span></span>
5. <span data-ttu-id="3be31-218">Обучающие и демонстрационные системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-218">Learning / Demonstration systems</span></span>

<span data-ttu-id="3be31-219">В порядке toosuccessfully развертывания систем SAP в Azure IaaS или IaaS в целом, очень важно toounderstand hello значительные различия hello предложения из обычных аутсорсеров или хостеров и предложениями IaaS.</span><span class="sxs-lookup"><span data-stu-id="3be31-219">In order toosuccessfully deploy SAP systems into either Azure IaaS or IaaS in general, it is important toounderstand hello significant differences between hello offerings of traditional outsourcers or hosters and IaaS offerings.</span></span> <span data-ttu-id="3be31-220">В то время как hello обычный хостер или аутсорсер адаптирует рабочей нагрузки toohello (тип сети, хранилища и сервер) инфраструктуры клиенту toohost, вместо этого клиента hello ответственности toochoose hello правильной рабочей нагрузки развертываниях IaaS.</span><span class="sxs-lookup"><span data-stu-id="3be31-220">Whereas hello traditional hoster or outsourcer adapts infrastructure (network, storage and server type) toohello workload a customer wants toohost, it is instead hello customer’s responsibility toochoose hello right workload for IaaS deployments.</span></span>

<span data-ttu-id="3be31-221">В качестве первого шага клиенты должны hello tooverify следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="3be31-221">As a first step, customers need tooverify hello following items:</span></span>

* <span data-ttu-id="3be31-222">Hello SAP поддерживаемые типы ВМ</span><span class="sxs-lookup"><span data-stu-id="3be31-222">hello SAP supported VM types of Azure</span></span>
* <span data-ttu-id="3be31-223">Hello SAP продукты или выпуски поддерживается в Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-223">hello SAP supported products/releases on Azure</span></span>
* <span data-ttu-id="3be31-224">Hello поддерживаемые выпуски ОС и СУБД для конкретных выпусков SAP в Azure приветствия</span><span class="sxs-lookup"><span data-stu-id="3be31-224">hello supported OS and DBMS releases for hello specific SAP releases in Azure</span></span>
* <span data-ttu-id="3be31-225">пропускная способность SAP, предоставляемая разными SKU Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-225">SAPS throughput provided by different Azure SKUs</span></span>

<span data-ttu-id="3be31-226">Hello ответы toothese вопросы можно прочитать в примечании SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="3be31-226">hello answers toothese questions can be read in SAP Note [1928533].</span></span>

<span data-ttu-id="3be31-227">В качестве второго шага Azure ограничения ресурсов и пропускной способности должны потребления ресурсов по сравнению toobe tooactual локальных систем.</span><span class="sxs-lookup"><span data-stu-id="3be31-227">As a second step, Azure resource and bandwidth limitations need toobe compared tooactual resource consumption of on-premises systems.</span></span> <span data-ttu-id="3be31-228">Таким образом клиенты необходимость toobe представление hello различных возможностях hello Azure типы с поддержкой SAP hello области:</span><span class="sxs-lookup"><span data-stu-id="3be31-228">Therefore, customers need toobe familiar with hello different capabilities of hello Azure types supported with SAP in hello area of:</span></span>

* <span data-ttu-id="3be31-229">ресурсы ЦП и памяти для разных типов виртуальных машин;</span><span class="sxs-lookup"><span data-stu-id="3be31-229">CPU and memory resources of different VM types and</span></span>
* <span data-ttu-id="3be31-230">пропускная способность операций ввода-вывода для разных типов виртуальных машин;</span><span class="sxs-lookup"><span data-stu-id="3be31-230">IOPS bandwidth of different VM types and</span></span>
* <span data-ttu-id="3be31-231">сетевые возможности для разных типов виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-231">Network capabilities of different VM types.</span></span>

<span data-ttu-id="3be31-232">Большую часть этих данных можно найти [здесь (Linux)][virtual-machines-sizes-linux] и [здесь (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="3be31-232">Most of that data can be found [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="3be31-233">Имейте в виду, что hello ограничениями, перечисленными в hello ссылку выше, верхних пределов.</span><span class="sxs-lookup"><span data-stu-id="3be31-233">Keep in mind that hello limits listed in hello link above are upper limits.</span></span> <span data-ttu-id="3be31-234">Это означает, что hello ограничения для hello ресурсам, например операций ввода-ВЫВОДА могут быть предоставлены ни при каких обстоятельствах.</span><span class="sxs-lookup"><span data-stu-id="3be31-234">It does not mean that hello limits for any of hello resources, for example IOPS can be provided under all circumstances.</span></span> <span data-ttu-id="3be31-235">Хотя исключения Hello эти ресурсы ЦП и памяти hello типа выбранной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-235">hello exceptions though are hello CPU and memory resources of a chosen VM type.</span></span> <span data-ttu-id="3be31-236">Hello типов ВМ, поддерживаемых SAP ресурсы ЦП и памяти hello: зарезервированные и таким образом, доступные в любой момент времени для потребления в ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-236">For hello VM types supported by SAP, hello CPU and memory resources are reserved and as such available at any point in time for consumption within hello VM.</span></span>

<span data-ttu-id="3be31-237">Hello платформы Microsoft Azure, как другие платформы IaaS — это платформа для нескольких клиентов.</span><span class="sxs-lookup"><span data-stu-id="3be31-237">hello Microsoft Azure platform like other IaaS platforms is a multi-tenant platform.</span></span> <span data-ttu-id="3be31-238">Это означает, что хранилище, сеть и другие ресурсы совместно используются несколькими клиентами.</span><span class="sxs-lookup"><span data-stu-id="3be31-238">This means that storage, network, and other resources are shared between tenants.</span></span> <span data-ttu-id="3be31-239">Интеллектуальная регулирование и логика — клиент tooprevent используется один из в квотирования, влияющие на производительность другого клиента (шумный сосед) hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-239">Intelligent throttling and quota logic is used tooprevent one tenant from impacting hello performance of another tenant (noisy neighbor) in a drastic way.</span></span> <span data-ttu-id="3be31-240">Хотя логика в Azure пытается tookeep отклонения пропускной маленькие, высокой общей платформы, как правило, toointroduce больших отклонений в доступности ресурсов и пропускной способности, чем многие клиенты являются используется tooin их развертывания в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-240">Though logic in Azure tries tookeep variances in bandwidth experienced small, highly shared platforms tend toointroduce larger variances in resource/bandwidth availability than many customers are used tooin their on-premises deployments.</span></span> <span data-ttu-id="3be31-241">В результате могут наблюдаться разные уровни пропускной способности по сети или ввода-вывода (hello тома а также задержка) хранилища из toominute минуты.</span><span class="sxs-lookup"><span data-stu-id="3be31-241">As a result, you might experience different levels of bandwidth regarding networking or storage I/O (hello volume as well as latency) from minute toominute.</span></span> <span data-ttu-id="3be31-242">Hello вероятность, что система SAP в Azure может испытывать большие отклонения, чем в локальной системе необходимо принимать во внимание toobe.</span><span class="sxs-lookup"><span data-stu-id="3be31-242">hello probability that an SAP system on Azure could experience larger variances than in an on-premises system needs toobe taken into account.</span></span>

<span data-ttu-id="3be31-243">Последний шаг — tooevaluate требования к доступности.</span><span class="sxs-lookup"><span data-stu-id="3be31-243">A last step is tooevaluate availability requirements.</span></span> <span data-ttu-id="3be31-244">Это может произойти, hello базовой инфраструктуры Azure tooget обновлены и узлы hello выполнение перезагрузки toobe виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-244">It can happen, that hello underlying Azure infrastructure needs tooget updated and requires hello hosts running VMs toobe rebooted.</span></span> <span data-ttu-id="3be31-245">В этих случаях виртуальные машины, размещенные на этих узлах, также завершают работу и перезапускаются.</span><span class="sxs-lookup"><span data-stu-id="3be31-245">In these cases, VMs running on those hosts would be shut down and restarted as well.</span></span> <span data-ttu-id="3be31-246">Hello времени такое обслуживание выполняется в рабочее время вспомогательные для конкретного региона, но потенциальное окно hello в несколько часов в течение которого происходит перезапуск, довольно велико.</span><span class="sxs-lookup"><span data-stu-id="3be31-246">hello timing of such maintenance is done during non-core business hours for a particular region but hello potential window of a few hours during which a restart will occur is relatively wide.</span></span> <span data-ttu-id="3be31-247">Существуют различные технологии в hello платформы Azure, который может быть настроен toomitigate некоторые или все hello влияние таких обновлений.</span><span class="sxs-lookup"><span data-stu-id="3be31-247">There are various technologies within hello Azure platform that can be configured toomitigate some or all of hello impact of such updates.</span></span> <span data-ttu-id="3be31-248">Будущих улучшений hello платформы Azure, СУБД и приложения SAP, разработанные toominimize hello влияние таких перезагрузок.</span><span class="sxs-lookup"><span data-stu-id="3be31-248">Future enhancements of hello Azure platform, DBMS, and SAP application are designed toominimize hello impact of such restarts.</span></span>

<span data-ttu-id="3be31-249">В порядке toosuccessfully развертывания системы SAP в Azure, hello локальной системы SAP операционной системы базы данных, и приложения SAP должны располагаться на hello Azure SAP может предоставить Матрица поддержки, размерам hello hello ресурсы инфраструктуры Azure и что можно работать с доступности соглашения об уровне обслуживания Microsoft Azure предлагает приветствия.</span><span class="sxs-lookup"><span data-stu-id="3be31-249">In order toosuccessfully deploy an SAP system onto Azure, hello on-premises SAP system(s) Operating System, Database, and SAP applications must appear on hello SAP Azure support matrix, fit within hello resources hello Azure infrastructure can provide and which can work with hello Availability SLAs Microsoft Azure offers.</span></span> <span data-ttu-id="3be31-250">Определения этих систем необходимо toodecide на одном из следующих двух сценариях развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-250">As those systems are identified, you need toodecide on one of hello following two deployment scenarios.</span></span>

### <span data-ttu-id="3be31-251"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Только для облака — развертывания виртуальных машин в Azure без зависимостей от hello в локальной сети клиента</span><span class="sxs-lookup"><span data-stu-id="3be31-251"><a name="1625df66-4cc6-4d60-9202-de8a0b77f803"></a>Cloud-Only - Virtual Machine deployments into Azure without dependencies on hello on-premises customer network</span></span>
![Одна виртуальная машина с демонстрационной версией SAP или обучающим сценарием, развернутая в Azure][planning-guide-figure-100]

<span data-ttu-id="3be31-253">Этот сценарий является типичным для обучающих или демонстрационных систем, где все компоненты hello SAP и прочее по устанавливаются в одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-253">This scenario is typical for trainings or demo systems, where all hello components of SAP and non-SAP software are installed within a single VM.</span></span> <span data-ttu-id="3be31-254">В этом сценарии развертывания не поддерживаются производственные системы SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-254">Production SAP systems are not supported in this deployment scenario.</span></span> <span data-ttu-id="3be31-255">Как правило этот сценарий соответствует hello следующие требования:</span><span class="sxs-lookup"><span data-stu-id="3be31-255">In general, this scenario meets hello following requirements:</span></span>

* <span data-ttu-id="3be31-256">виртуальные машины Hello сами доступны по публичной сети hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-256">hello VMs themselves are accessible over hello public network.</span></span> <span data-ttu-id="3be31-257">Прямое сетевое соединение hello приложения, запущенные в toohello hello виртуальными машинами в локальной сети либо hello компании, которой принадлежит hello демонстрации или обучения содержимого или hello клиента не требуется.</span><span class="sxs-lookup"><span data-stu-id="3be31-257">Direct network connectivity for hello applications running within hello VMs toohello on-premises network of either hello company owning hello demos or trainings content or hello customer is not necessary.</span></span>
* <span data-ttu-id="3be31-258">В случае нескольких виртуальных машин, представляющий сценарий hello обучения или демонстрации сетевого подключения и разрешение имен должен toowork между виртуальными машинами hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-258">In case of multiple VMs representing hello trainings or demo scenario, network communications and name resolution needs toowork between hello VMs.</span></span> <span data-ttu-id="3be31-259">Но обмена данными между hello набор виртуальных машин должны toobe изолированной, чтобы несколько наборов ВМ можно развернуть рядом друг с другом без помех.</span><span class="sxs-lookup"><span data-stu-id="3be31-259">But communications between hello set of VMs need toobe isolated so that several sets of VMs can be deployed side by side without interference.</span></span>  
* <span data-ttu-id="3be31-260">Подключение к Интернету является обязательным для hello конечного пользователя tooremote входа в toohello, размещенных виртуальных машин в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-260">Internet connectivity is required for hello end user tooremote login into toohello VMs hosted in Azure.</span></span> <span data-ttu-id="3be31-261">В зависимости от hello гостевой ОС, используется служб терминалов и RDS или VNC/ssh tooeither ВМ hello tooaccess выполнения задач обучения hello или выполнять демонстрации hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-261">Depending on hello guest OS, Terminal Services/RDS or VNC/ssh is used tooaccess hello VM tooeither fulfill hello training tasks or perform hello demos.</span></span> <span data-ttu-id="3be31-262">Если порты SAP, например 3200 3300 & 3600 также hello экземпляр приложения SAP может осуществляться из любого подключенного рабочего Интернета.</span><span class="sxs-lookup"><span data-stu-id="3be31-262">If SAP ports such as 3200, 3300 & 3600 can also be exposed hello SAP application instance can be accessed from any Internet connected desktop.</span></span>
* <span data-ttu-id="3be31-263">Здравствуйте, системы SAP (и VM(s)) представляют изолированный сценарий в Azure, который только требует открытого подключения к Интернету для доступа к конечным пользователем и не требует tooother подключение виртуальных машин в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-263">hello SAP system(s) (and VM(s)) represent a standalone scenario in Azure, which only requires public internet connectivity for end-user access and does not require a connection tooother VMs in Azure.</span></span>
* <span data-ttu-id="3be31-264">SAPGUI и браузер устанавливаются и работают непосредственно на hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-264">SAPGUI and a browser are installed and run directly on hello VM.</span></span>
* <span data-ttu-id="3be31-265">Требуется быстрого сброса ВМ toohello исходное состояние и нового развертывания этого исходного состояния еще раз.</span><span class="sxs-lookup"><span data-stu-id="3be31-265">A fast reset of a VM toohello original state and new deployment of that original state again is required.</span></span>
* <span data-ttu-id="3be31-266">В случае hello Демонстрация и сценариев обучения, который реализуются в нескольких виртуальных машин, Active Directory / OpenLDAP/или служба DNS является обязательным для каждого набора виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-266">In hello case of demo and training scenarios, which are realized in multiple VMs, an Active Directory / OpenLDAP and/or DNS service is required for each set of VMs.</span></span>

![Группа виртуальных машин в облачной службе Azure для демонстрационных или обучающих целей][planning-guide-figure-200]

<span data-ttu-id="3be31-268">Очень важно tookeep помните, что hello виртуальные машины в каждом hello наборы toobe необходимости разворачивать параллельно, где приветствия имен виртуальных Машин в каждом наборе hello являются одинаковыми hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-268">It is important tookeep in mind that hello VM(s) in each of hello sets need toobe deployed in parallel, where hello VM names in each of hello set are hello same.</span></span>

### <span data-ttu-id="3be31-269"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>Между организациями - развертывание одной или нескольких ВМ SAP в Azure с требованием hello полной интеграции с локальной сетью hello</span><span class="sxs-lookup"><span data-stu-id="3be31-269"><a name="f5b3b18c-302c-4bd8-9ab2-c388f1ab3d10"></a>Cross-Premises - Deployment of single or multiple SAP VMs into Azure with hello requirement of being fully integrated into hello on-premises network</span></span>
![VPN-подключение типа "сеть — сеть" (распределенное подключение)][planning-guide-figure-300]

<span data-ttu-id="3be31-271">Этот сценарий является распределенным и допускает множество моделей развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-271">This scenario is a cross-premises scenario with many possible deployment patterns.</span></span> <span data-ttu-id="3be31-272">Это может быть просто описано, как при запуске некоторые части hello SAP альбомная локальной и другие части hello ландшафт SAP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-272">It can be described as simply as running some parts of hello SAP landscape on-premises and other parts of hello SAP landscape on Azure.</span></span> <span data-ttu-id="3be31-273">Все аспекты hello факт, что часть компонентов SAP hello работает в Azure должны быть прозрачными для конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="3be31-273">All aspects of hello fact that part of hello SAP components are running on Azure should be transparent for end users.</span></span> <span data-ttu-id="3be31-274">Поэтому Здравствуйте SAP транспорта Correction System (STMS), взаимодействие с RFC, печать, безопасность (например SSO), т. д. без проблем работать для hello систем SAP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-274">Hence hello SAP Transport Correction System (STMS), RFC Communication, Printing, Security (like SSO), etc. work seamlessly for hello SAP systems running on Azure.</span></span> <span data-ttu-id="3be31-275">Но hello межсетевых локальных ресурсах также описан сценарий, где работает hello завершения ландшафт SAP в Azure с доменом клиента hello и DNS расширяются до Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-275">But hello cross-premises scenario also describes a scenario where hello complete SAP landscape runs in Azure with hello customer’s domain and DNS extended into Azure.</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-276">Это сценарий развертывания hello, поддерживаемый для производственных систем SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-276">This is hello deployment scenario, which is supported for running productive SAP systems.</span></span>
>
>

<span data-ttu-id="3be31-277">Чтение [в этой статье] [ vpn-gateway-create-site-to-site-rm-powershell] Дополнительные сведения о том, как tooconnect в локальной сети tooMicrosoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-277">Read [this article][vpn-gateway-create-site-to-site-rm-powershell] for more information on how tooconnect your on-premises network tooMicrosoft Azure</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3be31-278">Когда мы говорим о сценариях распределенной между Azure и локальных клиентских развертываний, мы ищем hello гранулярность системы SAP в целом.</span><span class="sxs-lookup"><span data-stu-id="3be31-278">When we are talking about cross-premises scenarios between Azure and on-premises customer deployments, we are looking at hello granularity of whole SAP systems.</span></span> <span data-ttu-id="3be31-279">Ниже перечислены сценарии, которые *не поддерживаются* для распределенного развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-279">Scenarios which are *not supported* for cross-premises scenarios are:</span></span>
>
> * <span data-ttu-id="3be31-280">Выполнение различных уровней приложений SAP с помощью различных методов развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-280">Running different layers of SAP applications in different deployment methods.</span></span> <span data-ttu-id="3be31-281">Например выполнение hello СУБД слоя в локальной среде, но hello уровня приложения SAP в виртуальных машин, развернутых как ВМ Azure, или наоборот.</span><span class="sxs-lookup"><span data-stu-id="3be31-281">For example running hello DBMS layer on-premises, but hello SAP application layer in VMs deployed as Azure VMs or vice versa.</span></span>
> * <span data-ttu-id="3be31-282">Размещение некоторых компонентов одного уровня SAP в Azure, а других — в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-282">Some components of an SAP layer in Azure and some on-premises.</span></span> <span data-ttu-id="3be31-283">Например, разделение экземпляров уровня приложения hello SAP между локальной и виртуальных машинах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-283">For example splitting Instances of hello SAP application layer between on-premises and Azure VMs.</span></span>
> * <span data-ttu-id="3be31-284">Не поддерживается распределение виртуальных машин, выполняющих экземпляры одной системы SAP, на несколько регионов Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-284">Distribution of VMs running SAP instances of one system over multiple Azure Regions is not supported.</span></span>
>
> <span data-ttu-id="3be31-285">Причиной этих ограничений Hello — требование hello очень низкой задержкой сети высокой производительности в одной системе, особенно между экземплярами приложений hello и hello уровнем СУБД системы SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-285">hello reason for these restrictions is hello requirement for a very low latency high-performance network within one SAP system, especially between hello application instances and hello DBMS layer of an SAP system.</span></span>
>
>

### <a name="supported-os-and-database-releases"></a><span data-ttu-id="3be31-286">Поддерживаемые ОС и версии базы данных</span><span class="sxs-lookup"><span data-stu-id="3be31-286">Supported OS and Database Releases</span></span>
* <span data-ttu-id="3be31-287">Серверное программное обеспечение Майкрософт, которое поддерживается для служб виртуальных машин Azure, перечислено в этой статье: <http://support.microsoft.com/kb/2721672>.</span><span class="sxs-lookup"><span data-stu-id="3be31-287">Microsoft server software supported for Azure Virtual Machine Services is listed in this article: <http://support.microsoft.com/kb/2721672>.</span></span>
* <span data-ttu-id="3be31-288">Выпуски операционной системы и системы баз данных, которые поддерживаются службами виртуальных машин Azure в сочетании с программным обеспечением SAP, описаны в примечании к SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="3be31-288">Supported operating system releases, database system releases supported on Azure Virtual Machine Services in conjunction with SAP software are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="3be31-289">Приложения и выпуски SAP, поддерживаемые службами виртуальных машин Azure, описаны в примечании к SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="3be31-289">SAP applications and releases supported on Azure Virtual Machine Services are documented in SAP Note [1928533].</span></span>
* <span data-ttu-id="3be31-290">Только 64-разрядные образы, которые являются toorun поддерживаемые гостевые виртуальные машины в Azure для сценариев SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-290">Only 64Bit images are supported toorun as Guest VMs in Azure for SAP scenarios.</span></span> <span data-ttu-id="3be31-291">Это также означает, что поддерживаются только 64-разрядные приложения SAP и базы данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-291">This also means that only 64-bit SAP applications and databases are supported.</span></span>

## <a name="microsoft-azure-virtual-machine-services"></a><span data-ttu-id="3be31-292">Службы виртуальных машин Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-292">Microsoft Azure Virtual Machine Services</span></span>
<span data-ttu-id="3be31-293">Платформа Microsoft Azure Hello — в облаке масштабируемая Интернет-платформа служб размещается и функционирует в Microsoft данные центров.</span><span class="sxs-lookup"><span data-stu-id="3be31-293">hello Microsoft Azure platform is an internet-scale cloud services platform hosted and operated in Microsoft data centers.</span></span> <span data-ttu-id="3be31-294">Hello платформа включает службы виртуальных машин Microsoft Azure hello (инфраструктуру как услугу или IaaS) и набор многофункциональную платформу как возможности службы (PaaS).</span><span class="sxs-lookup"><span data-stu-id="3be31-294">hello platform includes hello Microsoft Azure Virtual Machine Services (Infrastructure as a Service, or IaaS) and a set of rich Platform as a Service (PaaS) capabilities.</span></span>

<span data-ttu-id="3be31-295">Hello платформы Azure уменьшает hello потребность в предварительных закупках технологий и инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="3be31-295">hello Azure platform reduces hello need for up-front technology and infrastructure purchases.</span></span> <span data-ttu-id="3be31-296">Оно упрощает обслуживание и эксплуатацию приложений, предоставляя toohost вычислений и хранения по требованию, масштабирование и управление веб-приложения и подключенных приложений.</span><span class="sxs-lookup"><span data-stu-id="3be31-296">It simplifies maintaining and operating applications by providing on-demand compute and storage toohost, scale, and manage web application and connected applications.</span></span> <span data-ttu-id="3be31-297">Управление инфраструктурой автоматизировано, и платформа, которая предназначена для обеспечения высокой доступности и динамического масштабирования toomatch с потребностями hello вариант оплаты по мере использования модель ценообразования.</span><span class="sxs-lookup"><span data-stu-id="3be31-297">Infrastructure management is automated with a platform that is designed for high availability and dynamic scaling toomatch usage needs with hello option of a pay-as-you-go pricing model.</span></span>

![Позиционирование служб виртуальных машин Microsoft Azure][planning-guide-figure-400]

<span data-ttu-id="3be31-299">Службах виртуальной машины Azure Майкрософт позволяет вы tooAzure изображения toodeploy пользовательского сервера как экземпляры IaaS (см. рис. 4).</span><span class="sxs-lookup"><span data-stu-id="3be31-299">With Azure Virtual Machine Services, Microsoft is enabling you toodeploy custom server images tooAzure as IaaS instances (see Figure 4).</span></span> <span data-ttu-id="3be31-300">Hello виртуальных машин в Azure основаны на виртуальные жесткие диски Hyper-V (VHD) и не может toorun разных операционных систем в качестве гостевой ОС.</span><span class="sxs-lookup"><span data-stu-id="3be31-300">hello Virtual Machines in Azure are based on Hyper-V virtual hard drives (VHD) and are able toorun different operating systems as Guest OS.</span></span>

<span data-ttu-id="3be31-301">С точки зрения эксплуатации службы виртуальных машин Azure предоставляет аналогичные приветствия возникает как виртуальных машин, развернутых на локальном компьютере.</span><span class="sxs-lookup"><span data-stu-id="3be31-301">From an operational perspective, hello Azure Virtual Machine Service offers similar experiences as virtual machines deployed on premises.</span></span> <span data-ttu-id="3be31-302">Однако он имеет значительное преимущество hello ненужные tooprocure, администрирования и управления инфраструктурой hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-302">However, it has hello significant advantage that you don’t need tooprocure, administer, and manage hello infrastructure.</span></span> <span data-ttu-id="3be31-303">Разработчики и Администраторы имеют полный контроль над hello образ операционной системы в течение этих виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-303">Developers and Administrators have full control of hello operating system image within these virtual machines.</span></span> <span data-ttu-id="3be31-304">Администраторы могут войти на удаленный toothose виртуальные машины tooperform обслуживание и устранение неполадок задач, а также задачи по развертыванию программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="3be31-304">Administrators can log on remotely in toothose virtual machines tooperform maintenance and troubleshooting tasks as well as software deployment tasks.</span></span> <span data-ttu-id="3be31-305">В toodeployment учета hello ограничиваются только размеры hello и возможности ВМ Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-305">In regard toodeployment, hello only restrictions are hello sizes and capabilities of Azure VMs.</span></span> <span data-ttu-id="3be31-306">Но эти ограничения не всегда можно будет настроить так же точно, как в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-306">These may not be as fine granular in configuration as this could be done on premises.</span></span> <span data-ttu-id="3be31-307">Есть несколько типов виртуальных машин, каждый из которых имеет определенное сочетание следующих параметров:</span><span class="sxs-lookup"><span data-stu-id="3be31-307">There is a choice of VM types that represent a combination of:</span></span>

* <span data-ttu-id="3be31-308">количество виртуальных ЦП;</span><span class="sxs-lookup"><span data-stu-id="3be31-308">Number of vCPUs,</span></span>
* <span data-ttu-id="3be31-309">память;</span><span class="sxs-lookup"><span data-stu-id="3be31-309">Memory,</span></span>
* <span data-ttu-id="3be31-310">количество подключаемых виртуальных жестких дисков;</span><span class="sxs-lookup"><span data-stu-id="3be31-310">Number of VHDs that can be attached,</span></span>
* <span data-ttu-id="3be31-311">пропускная способность сети и хранилища.</span><span class="sxs-lookup"><span data-stu-id="3be31-311">Network and Storage bandwidths.</span></span>

<span data-ttu-id="3be31-312">размер Hello и ограничения различных размеров разных виртуальных машин предлагаемых можно увидеть в таблице в [в этой статье (Linux)] [ virtual-machines-sizes-linux] и [в этой статье (Windows)] [ virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="3be31-312">hello size and limitations of various different virtual machines sizes offered can be seen in a table in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="3be31-313">Как вы можете заметить, есть несколько семейств (серий) виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-313">As you realize, there are different families or series of virtual machines.</span></span> <span data-ttu-id="3be31-314">Позволяет отличать hello следующие семейства виртуальных машин:</span><span class="sxs-lookup"><span data-stu-id="3be31-314">You can distinguish hello following families of VMs:</span></span>

* <span data-ttu-id="3be31-315">Типы виртуальных машин A0–A7: не все из них сертифицированы для использования с SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-315">A0-A7 VM types: Not all of those are certified for SAP.</span></span> <span data-ttu-id="3be31-316">Это первая серия виртуальных машин, представленная при появлении Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="3be31-316">First VM series that Azure IaaS got introduced with.</span></span>
* <span data-ttu-id="3be31-317">Типы виртуальных машин A8–A11: высокопроизводительные вычислительные экземпляры.</span><span class="sxs-lookup"><span data-stu-id="3be31-317">A8-A11 VM types: High Performance computing instances.</span></span> <span data-ttu-id="3be31-318">Они выполняются на более мощных вычислительных узлах, чем другие виртуальные машины серии A.</span><span class="sxs-lookup"><span data-stu-id="3be31-318">Running on different better performing compute hosts than other A-series VMs.</span></span>
* <span data-ttu-id="3be31-319">Типы виртуальных машин серии D/Dv2D: производительность выше, чем у серии A0-A7.</span><span class="sxs-lookup"><span data-stu-id="3be31-319">D/Dv2-Series VM types: Better performing than A0-A7.</span></span> <span data-ttu-id="3be31-320">Не все типы ВМ hello сертифицированные с SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-320">Not all of hello VM types are certified with SAP.</span></span>
* <span data-ttu-id="3be31-321">Типов ВМ серии DS и серии DSv2: аналогичные tooD/Dv2-series, возникают возможности tooconnect tooAzure хранилище Premium (в главе [хранилища Azure Premium] [ planning-guide-3.3.2] этого документа).</span><span class="sxs-lookup"><span data-stu-id="3be31-321">DS/DSv2-Series VM types: Similar tooD/Dv2-series, but are able tooconnect tooAzure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="3be31-322">Также не все типы сертифицированы для использования с SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-322">Again not all VM types are certified with SAP.</span></span>
* <span data-ttu-id="3be31-323">Типы виртуальных машин серии G: это типы виртуальных машин с большим объемом памяти.</span><span class="sxs-lookup"><span data-stu-id="3be31-323">G-Series VM types: High memory VM types.</span></span>
* <span data-ttu-id="3be31-324">Типов ВМ серии GS: как серия G, но включая toouse параметр hello хранилища Azure Premium (в главе [хранилища Azure Premium] [ planning-guide-3.3.2] этого документа).</span><span class="sxs-lookup"><span data-stu-id="3be31-324">GS-Series VM types: like G-Series but including hello option toouse Azure Premium Storage (see chapter [Azure Premium Storage][planning-guide-3.3.2] of this document).</span></span> <span data-ttu-id="3be31-325">При использовании виртуальных машин серии GS как серверы баз данных, он является обязательным toouse хранилище Premium для DB данных и файлы журнала транзакций</span><span class="sxs-lookup"><span data-stu-id="3be31-325">When using GS-Series VMs as database servers, it's mandatory toouse Premium Storage for DB data and transaction log files</span></span>

<span data-ttu-id="3be31-326">Может оказаться hello и те же конфигурации ЦП и памяти, в другую серию виртуальных Машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-326">You may find hello same CPU and memory configurations in different VM series.</span></span> <span data-ttu-id="3be31-327">Тем не менее при поиске производительность и пропускную способность hello этих виртуальных машин из разных рядов hello может существенно отличаются.</span><span class="sxs-lookup"><span data-stu-id="3be31-327">Nevertheless, when you look up hello throughput performance of these VMs out of hello different series they might differ significantly.</span></span> <span data-ttu-id="3be31-328">Здравствуйте, одинаково вне зависимости от конфигурации ЦП и памяти.</span><span class="sxs-lookup"><span data-stu-id="3be31-328">Despite having hello same CPU and memory configuration.</span></span> <span data-ttu-id="3be31-329">Причиной является то, что базовое оборудование сервера узла hello во введении hello hello разных типов ВМ имели характеристики разных пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-329">Reason is that hello underlying host server hardware at hello introduction of hello different VM types had different throughput characteristics.</span></span>  <span data-ttu-id="3be31-330">Обычно различие hello, показанный на производительность и пропускную способность также отражаются в цены hello hello разных ВМ.</span><span class="sxs-lookup"><span data-stu-id="3be31-330">Usually hello difference shown in throughput performance also is reflected in hello price of hello different VMs.</span></span>

<span data-ttu-id="3be31-331">Не все другую серию виртуальных Машин могут быть предложены в каждом из них hello регионов Azure (для следующей главе регионы Azure см. в разделе).</span><span class="sxs-lookup"><span data-stu-id="3be31-331">Not all different VM series might be offered in each one of hello Azure Regions (for Azure Regions see next chapter).</span></span> <span data-ttu-id="3be31-332">Также не забывайте, что не все виртуальные машины и не все серии виртуальных машин сертифицированы для использования с SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-332">Also be aware that not all VMs or VM-Series are certified for SAP.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3be31-333">Для использования hello приложений на основе SAP NetWeaver, только hello подмножество типов виртуальных Машин и конфигураций, перечисленные в примечании SAP [1928533] поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="3be31-333">For hello use of SAP NetWeaver based applications, only hello subset of VM types and configurations listed in SAP Note [1928533] are supported.</span></span>
>
>

### <span data-ttu-id="3be31-334"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Регионы Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-334"><a name="be80d1b9-a463-4845-bd35-f4cebdb5424a"></a>Azure Regions</span></span>
<span data-ttu-id="3be31-335">Корпорация Майкрософт разрешает toodeploy виртуальных машин в так называемых «регионы Azure».</span><span class="sxs-lookup"><span data-stu-id="3be31-335">Microsoft allows toodeploy Virtual Machines into so called ‘Azure Regions’.</span></span> <span data-ttu-id="3be31-336">Регион Azure включает один или несколько близко расположенных центров обработки данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-336">An Azure Region may be one or multiple data centers that are located in close proximity.</span></span> <span data-ttu-id="3be31-337">Для большинства hello геополитических регионов в Здравствуй, мир Microsoft имеет по крайней мере двух регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-337">For most of hello geopolitical regions in hello world Microsoft has at least two Azure Regions.</span></span> <span data-ttu-id="3be31-338">К примеру, в Европе есть регионы Azure "Северная Европа" и "Западная Европа".</span><span class="sxs-lookup"><span data-stu-id="3be31-338">For example, in Europe there is an Azure Region of ‘North Europe’ and one of ‘West Europe’.</span></span> <span data-ttu-id="3be31-339">Такие двух регионах Azure в области геополитические разделяются достаточной расстояние, естественных или технических аварий не влияет на обе области Azure в hello геополитические совпадают.</span><span class="sxs-lookup"><span data-stu-id="3be31-339">Such two Azure Regions within a geopolitical region are separated by significant enough distance so that natural or technical disasters do not affect both Azure Regions in hello same geopolitical region.</span></span> <span data-ttu-id="3be31-340">Поскольку Microsoft стабильно создает новый Azure областей в разных регионах геополитические глобально, hello числа этих регионов неуклонно растет и на момент декабря 2015 достигнуто hello число 20 регионы Azure с помощью дополнительных областей уже было объявлено.</span><span class="sxs-lookup"><span data-stu-id="3be31-340">Since Microsoft is steadily building out new Azure Regions in different geopolitical regions globally, hello number of these regions is steadily growing and as of Dec 2015 reached hello number of 20 Azure Regions with additional Regions announced already.</span></span> <span data-ttu-id="3be31-341">Как клиент можно развернуть систем SAP в этих областях, включая hello двух регионов Azure в Китае.</span><span class="sxs-lookup"><span data-stu-id="3be31-341">You as a customer can deploy SAP systems into all these regions, including hello two Azure Regions in China.</span></span> <span data-ttu-id="3be31-342">Актуальные сведения о регионах Azure доступны на этом веб-сайте: <https://azure.microsoft.com/regions/>.</span><span class="sxs-lookup"><span data-stu-id="3be31-342">For current up-to-date information about Azure regions see this website: <https://azure.microsoft.com/regions/></span></span>

### <span data-ttu-id="3be31-343"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>Hello понятие виртуальной машины Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-343"><a name="8d8ad4b8-6093-4b91-ac36-ea56d80dbf77"></a>hello Microsoft Azure Virtual Machine Concept</span></span>
<span data-ttu-id="3be31-344">Microsoft Azure предлагает инфраструктуры как услуги (IaaS) решения toohost виртуальные машины с той же функциональностью в качестве локального решения виртуализации.</span><span class="sxs-lookup"><span data-stu-id="3be31-344">Microsoft Azure offers an Infrastructure as a Service (IaaS) solution toohost Virtual Machines with similar functionalities as an on-premises virtualization solution.</span></span> <span data-ttu-id="3be31-345">Возможности виртуальных машин из toocreate внутри hello портал Azure, PowerShell или интерфейс командной строки, которые также предоставляют возможности управления и развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-345">You are able toocreate Virtual Machines from within hello Azure portal, PowerShell or CLI, which also offer deployment and management capabilities.</span></span>

<span data-ttu-id="3be31-346">Диспетчер ресурсов Azure можно tooprovision приложений с помощью декларативного шаблона.</span><span class="sxs-lookup"><span data-stu-id="3be31-346">Azure Resource Manager allows you tooprovision your applications using a declarative template.</span></span> <span data-ttu-id="3be31-347">В одном шаблоне можно развернуть несколько служб и их зависимые компоненты.</span><span class="sxs-lookup"><span data-stu-id="3be31-347">In a single template, you can deploy multiple services along with their dependencies.</span></span> <span data-ttu-id="3be31-348">Использовать hello же toorepeatedly шаблона развертывания приложения на каждом этапе жизненного цикла приложения hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-348">You use hello same template toorepeatedly deploy your application during every stage of hello application life cycle.</span></span>

<span data-ttu-id="3be31-349">Дополнительные сведения об использовании шаблонов Resource Manager см. здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-349">More information about using Resource Manager templates can be found here:</span></span>

* <span data-ttu-id="3be31-350">[Развертывание и управление виртуальными машинами с помощью шаблонов диспетчера ресурсов Azure и Azure CLI hello] [.. /.. / linux/create-ssh-secured-vm-from-template.md]</span><span class="sxs-lookup"><span data-stu-id="3be31-350">[Deploy and manage virtual machines by using Azure Resource Manager templates and hello Azure CLI][../../linux/create-ssh-secured-vm-from-template.md]</span></span>
* <span data-ttu-id="3be31-351">[Управление виртуальными машинами с помощью Azure Resource Manager и PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span><span class="sxs-lookup"><span data-stu-id="3be31-351">[Manage virtual machines using Azure Resource Manager and PowerShell][virtual-machines-deploy-rmtemplates-powershell]</span></span>
* <span data-ttu-id="3be31-352"><https://azure.microsoft.com/documentation/templates/></span><span class="sxs-lookup"><span data-stu-id="3be31-352"><https://azure.microsoft.com/documentation/templates/></span></span>

<span data-ttu-id="3be31-353">Другой интересной функцией является hello возможность toocreate образов из виртуальных машин, что позволяет tooprepare определенные репозитории, из которых являются может tooquickly развертывание экземпляров виртуальных машин, которые соответствуют вашим требованиям.</span><span class="sxs-lookup"><span data-stu-id="3be31-353">Another interesting feature is hello ability toocreate images from Virtual Machines, which allows you tooprepare certain repositories from which you are able tooquickly deploy Virtual machine instances, which meet your requirements.</span></span>

<span data-ttu-id="3be31-354">Дополнительные сведения о создании образов виртуальных машин можно найти в [этой][virtual-machines-linux-capture-image-resource-manager] (Linux) или [этой статье][virtual-machines-windows-capture-image-resource-manager] (Windows).</span><span class="sxs-lookup"><span data-stu-id="3be31-354">More information about creating images from Virtual Machines can be found in [this article (Linux)][virtual-machines-linux-capture-image-resource-manager] and [this article (Windows)][virtual-machines-windows-capture-image-resource-manager].</span></span>

#### <span data-ttu-id="3be31-355"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Домены сбоя</span><span class="sxs-lookup"><span data-stu-id="3be31-355"><a name="df49dc09-141b-4f34-a4a2-990913b30358"></a>Fault Domains</span></span>
<span data-ttu-id="3be31-356">Домены сбоя представляют физическую единицу сбоя, очень близкие toohello физической инфраструктурой в центрах обработки данных, и хотя физически блок или плата может считаться доменом сбоя, имеется нет прямого однозначного соответствия между двумя hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-356">Fault Domains represent a physical unit of failure, very closely related toohello physical infrastructure contained in data centers, and while a physical blade or rack can be considered a Fault Domain, there is no direct one-to-one mapping between hello two.</span></span>

<span data-ttu-id="3be31-357">При развертывании нескольких виртуальных машин в рамках одной системы SAP в службах виртуальных машин Microsoft Azure, вы можете влиять hello Azure Fabric Controller toodeploy приложения в других доменах сбоя, удовлетворяя требованиям hello hello Соглашения об уровне ОБСЛУЖИВАНИЯ Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-357">When you deploy multiple Virtual Machines as part of one SAP system in Microsoft Azure Virtual Machine Services, you can influence hello Azure Fabric Controller toodeploy your application into different Fault Domains, thereby meeting hello requirements of hello Microsoft Azure SLA.</span></span> <span data-ttu-id="3be31-358">Однако hello распределение доменов сбоя по единице масштабирования Azure (коллекция сотни вычислительные узлы или узлы хранилища и сети) или назначение hello tooa ВМ конкретному домену сбоя стоит по которому у вас прямого управления.</span><span class="sxs-lookup"><span data-stu-id="3be31-358">However, hello distribution of Fault Domains over an Azure Scale Unit (collection of hundreds of Compute nodes or Storage nodes and networking) or hello assignment of VMs tooa specific Fault Domain is something over which you do not have direct control.</span></span> <span data-ttu-id="3be31-359">Контроллер структуры Azure toodeploy набор виртуальных машин по разным доменам сбоя порядок toodirect hello нужен tooassign toohello группе доступности Azure виртуальные машины во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-359">In order toodirect hello Azure fabric controller toodeploy a set of VMs over different Fault Domains, you need tooassign an Azure Availability Set toohello VMs at deployment time.</span></span> <span data-ttu-id="3be31-360">Дополнительные сведения о группах доступности Azure содержатся в разделе этого документа о [группах доступности Azure][planning-guide-3.2.3].</span><span class="sxs-lookup"><span data-stu-id="3be31-360">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] in this document.</span></span>

#### <span data-ttu-id="3be31-361"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Домены обновления</span><span class="sxs-lookup"><span data-stu-id="3be31-361"><a name="fc1ac8b2-e54a-487c-8581-d3cc6625e560"></a>Upgrade Domains</span></span>
<span data-ttu-id="3be31-362">Домены обновления представляют логическую единицу, помогающую обновление виртуальной Машины в систему SAP, которая состоит из экземпляров SAP, работающих в несколько виртуальных машин, toodetermine.</span><span class="sxs-lookup"><span data-stu-id="3be31-362">Upgrade Domains represent a logical unit that help toodetermine how a VM within an SAP system, that consists of SAP instances running in multiple VMs, is updated.</span></span> <span data-ttu-id="3be31-363">Когда происходит обновление, Microsoft Azure проходит через hello процесс обновления этих доменов последовательно один за другим.</span><span class="sxs-lookup"><span data-stu-id="3be31-363">When an upgrade occurs, Microsoft Azure goes through hello process of updating these Upgrade Domains one by one.</span></span> <span data-ttu-id="3be31-364">Если вы во время развертывания распределите виртуальные машины по разным доменам обновления, это частично защитит систему SAP от потенциального простоя.</span><span class="sxs-lookup"><span data-stu-id="3be31-364">By spreading VMs at deployment time over different Upgrade Domains, you can protect your SAP system partly from potential downtime.</span></span> <span data-ttu-id="3be31-365">В заказ tooforce Azure toodeploy hello ВМ системы SAP по разным доменам обновления, необходимо tooset конкретного атрибута во время развертывания каждой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-365">In order tooforce Azure toodeploy hello VMs of an SAP system spread over different Upgrade Domains, you need tooset a specific attribute at deployment time of each VM.</span></span> <span data-ttu-id="3be31-366">Аналогичные tooFault домены, в единицу масштабирования Azure состоит из нескольких доменов обновления.</span><span class="sxs-lookup"><span data-stu-id="3be31-366">Similar tooFault Domains, an Azure Scale Unit is divided into multiple Upgrade Domains.</span></span> <span data-ttu-id="3be31-367">Контроллер структуры Azure toodeploy набор виртуальных машин по разным доменам обновления заказа toodirect hello нужен tooassign toohello группе доступности Azure виртуальные машины во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-367">In order toodirect hello Azure fabric controller toodeploy a set of VMs over different Upgrade Domains, you need tooassign an Azure Availability Set toohello VMs at deployment time.</span></span> <span data-ttu-id="3be31-368">Дополнительные сведения о группах доступности Azure содержатся ниже в разделе о [группах доступности Azure][planning-guide-3.2.3].</span><span class="sxs-lookup"><span data-stu-id="3be31-368">For more information on Azure Availability Sets, see chapter [Azure Availability Sets][planning-guide-3.2.3] below.</span></span>

#### <span data-ttu-id="3be31-369"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Группы доступности Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-369"><a name="18810088-f9be-4c97-958a-27996255c665"></a>Azure Availability Sets</span></span>
<span data-ttu-id="3be31-370">Виртуальные машины Azure в одной группе доступности Azure распространяются с hello Azure Fabric Controller по разным сбоя и домены обновления.</span><span class="sxs-lookup"><span data-stu-id="3be31-370">Azure Virtual Machines within one Azure Availability Set are distributed by hello Azure Fabric Controller over different Fault and Upgrade Domains.</span></span> <span data-ttu-id="3be31-371">Hello hello распределения по разным сбоя и домены обновления служит tooprevent всех ВМ системы SAP из процесса завершения работы в случае hello обслуживания инфраструктуры или сбоя в одном домене сбоя.</span><span class="sxs-lookup"><span data-stu-id="3be31-371">hello purpose of hello distribution over different Fault and Upgrade Domains is tooprevent all VMs of an SAP system from being shut down in hello case of infrastructure maintenance or a failure within one Fault Domain.</span></span> <span data-ttu-id="3be31-372">По умолчанию виртуальные машины не входят в группу доступности.</span><span class="sxs-lookup"><span data-stu-id="3be31-372">By default, VMs are not part of an Availability Set.</span></span> <span data-ttu-id="3be31-373">Hello участие ВМ в группе доступности определяется во время развертывания или позднее, путем перенастройки и повторного развертывания виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-373">hello participation of a VM in an Availability Set is defined at deployment time or later on by a reconfiguration and re-deployment of a VM.</span></span>

<span data-ttu-id="3be31-374">Концепция hello toounderstand группы доступности Azure и hello, группы доступности связаны tooFault и домены обновления, как прочитать [в данной статье][virtual-machines-manage-availability]</span><span class="sxs-lookup"><span data-stu-id="3be31-374">toounderstand hello concept of Azure Availability Sets and hello way Availability Sets relate tooFault and Upgrade Domains, read [this article][virtual-machines-manage-availability]</span></span>

<span data-ttu-id="3be31-375">Задает доступность toodefine для ARM через шаблон json см. раздел [hello спецификации rest api](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) и выполните поиск «доступности».</span><span class="sxs-lookup"><span data-stu-id="3be31-375">toodefine availability sets for ARM via a json template see [hello rest-api specs](https://github.com/Azure/azure-rest-api-specs/blob/master/arm-compute/2015-06-15/swagger/compute.json) and search for "availability".</span></span>

### <span data-ttu-id="3be31-376"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Хранилище. Служба хранилища Microsoft Azure и диски данных</span><span class="sxs-lookup"><span data-stu-id="3be31-376"><a name="a72afa26-4bf4-4a25-8cf7-855d6032157f"></a>Storage: Microsoft Azure Storage and Data Disks</span></span>
<span data-ttu-id="3be31-377">Виртуальные машины Microsoft Azure используют хранилища разных типов.</span><span class="sxs-lookup"><span data-stu-id="3be31-377">Microsoft Azure Virtual Machines utilize different storage types.</span></span> <span data-ttu-id="3be31-378">При реализации SAP в службах виртуальных машин Azure, очень важно toounderstand hello различия между двумя основными типами хранилища:</span><span class="sxs-lookup"><span data-stu-id="3be31-378">When implementing SAP on Azure Virtual Machine Services, it is important toounderstand hello differences between these two main types of storage:</span></span>

* <span data-ttu-id="3be31-379">непостоянное (временное) хранилище;</span><span class="sxs-lookup"><span data-stu-id="3be31-379">Non-Persistent, volatile storage.</span></span>
* <span data-ttu-id="3be31-380">постоянное хранилище.</span><span class="sxs-lookup"><span data-stu-id="3be31-380">Persistent storage.</span></span>

<span data-ttu-id="3be31-381">хранилище непостоянные Hello непосредственно подключенного toohello работающих виртуальных машин и находится на hello самих вычислительных узлах — хранилище локального экземпляра hello (временные хранилища).</span><span class="sxs-lookup"><span data-stu-id="3be31-381">hello non-persistent storage is directly attached toohello running Virtual Machines and resides on hello compute nodes themselves – hello local instance storage (temporary storage).</span></span> <span data-ttu-id="3be31-382">размер Hello зависит от размера виртуальной машины, выбранной при запуске развертывания hello hello hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-382">hello size depends on hello size of hello Virtual Machine chosen when hello deployment started.</span></span> <span data-ttu-id="3be31-383">Этот тип хранилища является временным и поэтому hello диск инициализируется при перезапуске экземпляра виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-383">This storage type is volatile and therefore hello disk is initialized when a Virtual Machine instance is restarted.</span></span> <span data-ttu-id="3be31-384">Как правило файл подкачки hello hello операционной системы находится на этом временном диске.</span><span class="sxs-lookup"><span data-stu-id="3be31-384">Typically, hello pagefile for hello operating system is located on this temporary disk.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-386">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-386">Windows</span></span>
>
> <span data-ttu-id="3be31-387">На виртуальных машинах Windows hello временный диск подключается как диск D:\ в развернутой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-387">On Windows VMs hello temp drive is mounted as drive D:\ in a deployed VM.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-389">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-389">Linux</span></span>
>
> <span data-ttu-id="3be31-390">На виртуальных машинах Linux диск подключается как /mnt/resource или /mnt.</span><span class="sxs-lookup"><span data-stu-id="3be31-390">On Linux VMs, it's mounted as /mnt/resource or /mnt.</span></span> <span data-ttu-id="3be31-391">Дополнительные сведения см. здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-391">See more details here:</span></span>
>
> * <span data-ttu-id="3be31-392">[Как tooAttach tooa диска данных виртуальной машины Linux][virtual-machines-linux-how-to-attach-disk]</span><span class="sxs-lookup"><span data-stu-id="3be31-392">[How tooAttach a Data Disk tooa Linux Virtual Machine][virtual-machines-linux-how-to-attach-disk]</span></span>
> * <span data-ttu-id="3be31-393"><https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux#temporary-disk></span><span class="sxs-lookup"><span data-stu-id="3be31-393"><https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux#temporary-disk></span></span>
>
>

- - -
<span data-ttu-id="3be31-394">Hello фактический диск является энергозависимым, поскольку оно хранится на самом сервере узла hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-394">hello actual drive is volatile because it is getting stored on hello host server itself.</span></span> <span data-ttu-id="3be31-395">Если hello ВМ направляется на повторное развертывание (например из-за toomaintenance на узле hello или выключение и перезагрузка) содержимое hello hello диска теряется.</span><span class="sxs-lookup"><span data-stu-id="3be31-395">If hello VM moved in a redeployment (for example due toomaintenance on hello host or shutdown and restart) hello content of hello drive is lost.</span></span> <span data-ttu-id="3be31-396">Таким образом, это не параметр toostore всех важных данных на этом диске.</span><span class="sxs-lookup"><span data-stu-id="3be31-396">Therefore, it is not an option toostore any important data on this drive.</span></span> <span data-ttu-id="3be31-397">Hello используемого носителя для этого типа хранилища отличается от другую серию виртуальных Машин с очень разными характеристиками производительности которых начиная с июня 2015 выглядеть следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3be31-397">hello type of media used for this type of storage differs between different VM series with very different performance characteristics which as of June 2015 look like:</span></span>

* <span data-ttu-id="3be31-398">A5–A7: крайне ограниченная производительность.</span><span class="sxs-lookup"><span data-stu-id="3be31-398">A5-A7: Very limited performance.</span></span> <span data-ttu-id="3be31-399">Не рекомендуется использовать для любых целей, кроме файла подкачки.</span><span class="sxs-lookup"><span data-stu-id="3be31-399">Not recommended for anything beyond page file</span></span>
* <span data-ttu-id="3be31-400">A8–A11: очень хорошая производительность на уровне 10 тыс. операций ввода-вывода в секунду и более 1 ГБ/с пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-400">A8-A11: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="3be31-401">Серия D: очень хорошая производительность на уровне 10 тыс. операций ввода-вывода в секунду и более 1 ГБ/с пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-401">D-Series: Very good performance characteristics with some then thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="3be31-402">Серия DS: очень хорошая производительность на уровне 10 тыс. операций ввода-вывода в секунду и более 1 ГБ/с пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-402">DS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="3be31-403">Серия G: очень хорошая производительность на уровне 10 тыс. операций ввода-вывода в секунду и более 1 ГБ/с пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-403">G-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>
* <span data-ttu-id="3be31-404">Серия GS: очень хорошая производительность на уровне 10 тыс. операций ввода-вывода в секунду и более 1 ГБ/с пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-404">GS-Series: Very good performance characteristics with some ten thousand IOPS and >1GB/sec throughput.</span></span>

<span data-ttu-id="3be31-405">Выше инструкции применяются toohello типов ВМ, сертифицированные с SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-405">Statements above are applying toohello VM types that are certified with SAP.</span></span> <span data-ttu-id="3be31-406">для некоторых компонентов СУБД используйте подлежат Hello Серия виртуальных Машин с отличным операций ввода-ВЫВОДА и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-406">hello VM-series with excellent IOPS and throughput qualify for leverage by some DBMS features.</span></span> <span data-ttu-id="3be31-407">Дополнительные сведения см. в разделе hello [руководство по развертыванию СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-407">For more information, see hello [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="3be31-408">Хранилище Microsoft Azure предоставляет материализованного хранилища и hello типичные уровни защиты и избыточности видеть в хранилище SAN.</span><span class="sxs-lookup"><span data-stu-id="3be31-408">Microsoft Azure Storage provides persisted storage and hello typical levels of protection and redundancy seen on SAN storage.</span></span> <span data-ttu-id="3be31-409">Диски, на основе хранилища Azure — это виртуальный жесткий диск (VHD) в службах хранилища Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-409">Disks based on Azure Storage are virtual hard disk (VHDs) located in hello Azure Storage Services.</span></span> <span data-ttu-id="3be31-410">Hello локальный диск ОС (Windows C:\, Linux/dev/sda1) хранится на hello хранилища Azure и дополнительные тома/диски, подключенные toohello виртуальная машина получить, тоже хранятся там.</span><span class="sxs-lookup"><span data-stu-id="3be31-410">hello local OS-Disk (Windows C:\, Linux /dev/sda1) is stored on hello Azure Storage, and additional Volumes/Disks mounted toohello VM get stored there, too.</span></span>

<span data-ttu-id="3be31-411">Он возможных tooupload существующий VHD из локальной или создать пустые контейнеры в Azure и присоединения этих toodeployed виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-411">It is possible tooupload an existing VHD from on-premises or create empty ones from within Azure and attach those toodeployed VMs.</span></span>

<span data-ttu-id="3be31-412">После создания или отправки виртуального жесткого диска в хранилище Azure, она возможных toomount и присоединить эти tooan существующей виртуальной машины и toocopy существующий VHD (отключены).</span><span class="sxs-lookup"><span data-stu-id="3be31-412">After creating or uploading a VHD into Azure Storage, it is possible toomount and attach those tooan existing Virtual Machine and toocopy existing (unmounted) VHD.</span></span>

<span data-ttu-id="3be31-413">Эти виртуальные жесткие диски являются постоянными, то есть данные и изменения на них безопасно сохраняются при повторных загрузке и создании экземпляра виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-413">As those VHDs are persisted, data and changes within those are safe when rebooting and recreating a Virtual Machine instance.</span></span> <span data-ttu-id="3be31-414">Даже при удалении экземпляра эти VHD остаются в безопасности и могут быть повторно развернуты в случае диски без операционной системы можно также tooother подключенных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-414">Even if an instance is deleted, these VHDs stay safe and can be redeployed or in case of non-OS disks can be mounted tooother VMs.</span></span>

<span data-ttu-id="3be31-415">В рамках hello настройки сети уровней различных избыточности хранилища Azure:</span><span class="sxs-lookup"><span data-stu-id="3be31-415">Within hello network of Azure Storage different redundancy levels can be configured:</span></span>

* <span data-ttu-id="3be31-416">Минимальный уровень, который может быть выбран имеет значение «локальный избыточность» это эквивалент toothree реплики данных hello в hello одного центра обработки данных региона Azure (в главе [регионы Azure][planning-guide-3.1]).</span><span class="sxs-lookup"><span data-stu-id="3be31-416">Minimum level that can be selected is ‘local redundancy’, which is equivalent toothree-replica of hello data within hello same data center of an Azure Region (see chapter [Azure Regions][planning-guide-3.1]).</span></span>
* <span data-ttu-id="3be31-417">Зоны избыточное хранилище, изображения, hello трех распространяются через разных центрах обработки данных в пределах hello же регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-417">Zone redundant storage, which spreads hello three images over different data centers within hello same Azure Region.</span></span>
* <span data-ttu-id="3be31-418">Уровень избыточности по умолчанию — географическую избыточность, которая асинхронно реплицирует hello содержимое в другой три изображения hello данных в другой регион Azure, которая размещается в hello геополитические совпадают.</span><span class="sxs-lookup"><span data-stu-id="3be31-418">Default redundancy level is geographic redundancy, which asynchronously replicates hello content into another three images of hello data into another Azure Region, which is hosted in hello same geopolitical region.</span></span>

<span data-ttu-id="3be31-419">См. также hello таблицу поверх относительно hello избыточности различные параметры в этой статье: <https://azure.microsoft.com/pricing/details/storage/></span><span class="sxs-lookup"><span data-stu-id="3be31-419">Also see hello table on top of this article regarding hello different redundancy options: <https://azure.microsoft.com/pricing/details/storage/></span></span>

<span data-ttu-id="3be31-420">Дополнительные сведения о службе хранилища Azure:</span><span class="sxs-lookup"><span data-stu-id="3be31-420">More information about Azure Storage can be found here:</span></span>

* <span data-ttu-id="3be31-421"><https://azure.microsoft.com/documentation/services/storage/></span><span class="sxs-lookup"><span data-stu-id="3be31-421"><https://azure.microsoft.com/documentation/services/storage/></span></span>
* <span data-ttu-id="3be31-422"><https://azure.microsoft.com/services/site-recovery></span><span class="sxs-lookup"><span data-stu-id="3be31-422"><https://azure.microsoft.com/services/site-recovery></span></span>
* <span data-ttu-id="3be31-423"><https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs></span><span class="sxs-lookup"><span data-stu-id="3be31-423"><https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs></span></span>
* <span data-ttu-id="3be31-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span><span class="sxs-lookup"><span data-stu-id="3be31-424"><https://blogs.msdn.com/b/azuresecurity/archive/2015/11/17/azure-disk-encryption-for-linux-and-windows-virtual-machines-public-preview.aspx></span></span>

#### <a name="azure-standard-storage"></a><span data-ttu-id="3be31-425">Служба хранилища Azure класса Standard</span><span class="sxs-lookup"><span data-stu-id="3be31-425">Azure Standard Storage</span></span>
<span data-ttu-id="3be31-426">Стандартная хранилища Azure была hello тип хранилища, доступный во время выпуска Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="3be31-426">Azure Standard storage was hello type of storage available when Azure IaaS was released.</span></span> <span data-ttu-id="3be31-427">Для каждого диска применялись квоты на число операций ввода-вывода в секунду.</span><span class="sxs-lookup"><span data-stu-id="3be31-427">There were IOPS quotas enforced per single disk.</span></span> <span data-ttu-id="3be31-428">Задержка возникла не hello же класс как SAN и NAS-устройства обычно развертывается для мощных систем SAP размещается локально.</span><span class="sxs-lookup"><span data-stu-id="3be31-428">Latency experienced was not in hello same class as SAN/NAS devices typically deployed for high-end SAP systems hosted on-premises.</span></span> <span data-ttu-id="3be31-429">Тем не менее, hello оказался достаточно для сотен стандартное хранилище Azure систем SAP, в то же время развертывания в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-429">Nevertheless, hello Azure Standard Storage proved sufficient for many hundreds SAP systems meanwhile deployed in Azure.</span></span>

<span data-ttu-id="3be31-430">Диски, которые хранятся на стандартных учетных записей хранилища Azure взимается основании hello фактические данные, хранящиеся, тома hello транзакции с хранилищем, исходящую передачу данных и избыточности с параметром, выбранным.</span><span class="sxs-lookup"><span data-stu-id="3be31-430">Disks that are stored on Azure Standard Storage Accounts are charged based on hello actual data that is stored, hello volume of storage transactions, outbound data transfers, and redundancy option chosen.</span></span> <span data-ttu-id="3be31-431">Много дисков могут быть созданы на hello максимум 1 ТБ, но при условии, что эти оставаться пустым является бесплатной.</span><span class="sxs-lookup"><span data-stu-id="3be31-431">Many disks can be created at hello maximum 1TB in size, but as long as those remain empty there is no charge.</span></span> <span data-ttu-id="3be31-432">Если затем вы указываете один виртуальный жесткий ДИСК с 100 ГБ, взимается плата для хранения 100 ГБ, а не для hello номинальный размер приветствия создан VHD с.</span><span class="sxs-lookup"><span data-stu-id="3be31-432">If you then fill one VHD with 100GB each, you are charged for storing 100GB and not for hello nominal size hello VHD got created with.</span></span>

#### <span data-ttu-id="3be31-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Хранилище Azure уровня "Премиум"</span><span class="sxs-lookup"><span data-stu-id="3be31-433"><a name="ff5ad0f9-f7f4-4022-9102-af07aef3bc92"></a>Azure Premium Storage</span></span>
<span data-ttu-id="3be31-434">В апреле 2015 г. корпорация Майкрософт представила службу хранилища Azure класса Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-434">In April 2015, Microsoft introduced Azure Premium Storage.</span></span> <span data-ttu-id="3be31-435">Хранилище Premium появилась с целью tooprovide hello:</span><span class="sxs-lookup"><span data-stu-id="3be31-435">Premium Storage got introduced with hello goal tooprovide:</span></span>

* <span data-ttu-id="3be31-436">снижение задержки при операциях ввода-вывода;</span><span class="sxs-lookup"><span data-stu-id="3be31-436">Better I/O latency.</span></span>
* <span data-ttu-id="3be31-437">более высокую пропускную способность;</span><span class="sxs-lookup"><span data-stu-id="3be31-437">Better throughput.</span></span>
* <span data-ttu-id="3be31-438">меньший разброс значений задержки при операциях ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="3be31-438">Less variability in I/O latency.</span></span>

<span data-ttu-id="3be31-439">Для этой цели ряд изменений какие hello две наиболее значимые являются:</span><span class="sxs-lookup"><span data-stu-id="3be31-439">For that purpose, many changes were introduced of which hello two most significant are:</span></span>

* <span data-ttu-id="3be31-440">Использование дисков SSD в узлах службы хранилища Azure hello</span><span class="sxs-lookup"><span data-stu-id="3be31-440">Usage of SSD disks in hello Azure Storage nodes</span></span>
* <span data-ttu-id="3be31-441">Новый кэша чтения, поддерживаемый hello локальный SSD вычислительный узел Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-441">A new read cache that is backed by hello local SSD of an Azure compute node</span></span>

<span data-ttu-id="3be31-442">В обратном tooStandard хранилище, где не изменился, возможности зависят от размера hello hello диск (или VHD), хранилище Premium в настоящее время имеет три категории другой диск, которые отображаются в этой статье: <https://azure.microsoft.com/ цены и сведения / / неуправляемого дисков или></span><span class="sxs-lookup"><span data-stu-id="3be31-442">In opposite tooStandard storage where capabilities did not change dependent on hello size of hello disk (or VHD), Premium Storage currently has three different disk categories, which are shown in this article: <https://azure.microsoft.com/pricing/details/storage/unmanaged-disks/></span></span>

<span data-ttu-id="3be31-443">Вы видите, зависят от категории hello размера дисков hello пропускная способность операций ввода-ВЫВОДА или диска и диска или диск</span><span class="sxs-lookup"><span data-stu-id="3be31-443">You see that IOPS/disk and disk throughput/disk are dependent on hello size category of hello disks</span></span>

<span data-ttu-id="3be31-444">Базовая себестоимость в случае hello хранилища Premium не hello фактические данные тома, хранящегося в таких дисков, но категорию размера hello такого диска, независимо от объема hello hello данные, хранящиеся в пределах hello диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-444">Cost basis in hello case of Premium Storage is not hello actual data volume stored in such disks, but hello size category of such a disk, independent of hello amount of hello data that is stored within hello disk.</span></span>

<span data-ttu-id="3be31-445">Можно также создавать диски хранилища Premium, сопоставление не производится непосредственно на категории размер hello показано.</span><span class="sxs-lookup"><span data-stu-id="3be31-445">You also can create disks on Premium Storage that are not directly mapping into hello size categories shown.</span></span> <span data-ttu-id="3be31-446">Это может быть случай hello, особенно в том случае, если копирование дисков из стандартного хранилища в хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-446">This may be hello case, especially when copying disks from Standard Storage into Premium Storage.</span></span> <span data-ttu-id="3be31-447">В таких случаях сопоставления toohello следующего наибольшего хранилище Premium диска параметра выполняется.</span><span class="sxs-lookup"><span data-stu-id="3be31-447">In such cases a mapping toohello next largest Premium Storage disk option is performed.</span></span>

<span data-ttu-id="3be31-448">Имейте в виду, что только определенные Серия виртуальных Машин можно воспользоваться преимуществами hello хранилища Azure Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-448">Be aware that only certain VM series can benefit from hello Azure Premium Storage.</span></span> <span data-ttu-id="3be31-449">Начиная с декабря 2015 г. это hello и GS-серии DS.</span><span class="sxs-lookup"><span data-stu-id="3be31-449">As of Dec 2015, these are hello DS- and GS-series.</span></span> <span data-ttu-id="3be31-450">Hello серии DS является по сути hello же, как серии D с исключением hello, что серии DS имеет возможность hello toomount хранилище Premium на основе виртуальных машин Дополнительно toodisks, которые размещаются в стандартном хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-450">hello DS-series is basically hello same as D-series with hello exception that DS-series has hello ability toomount Premium Storage based VMs additionally toodisks that are hosted on Azure Standard Storage.</span></span> <span data-ttu-id="3be31-451">Же является допустимым для серии tooGS серии G по сравнению.</span><span class="sxs-lookup"><span data-stu-id="3be31-451">Same thing is valid for G-series compared tooGS-series.</span></span>

<span data-ttu-id="3be31-452">Если вы извлекаете hello часть ВМ серии DS hello в [в этой статье (Linux)] [ virtual-machines-sizes-linux] и [в этой статье (Windows)][virtual-machines-sizes-windows], вы поймете, Нет тома ограничения tooPremium хранения диски с данными hello гранулярность hello уровня виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-452">If you are checking out hello part of hello DS-series VMs in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows], you realize that there are data volume limitations tooPremium Storage disks on hello granularity of hello VM level.</span></span> <span data-ttu-id="3be31-453">Разные серии DS или виртуальные машины серии GS также имеют различные ограничения в отношении toohello число дисков данных, которые могут быть подключены.</span><span class="sxs-lookup"><span data-stu-id="3be31-453">Different DS-series or GS-series VMs also have different limitations in regards toohello number of data disks that can be mounted.</span></span> <span data-ttu-id="3be31-454">Эти ограничения описаны в статье hello, упомянутых выше, а также.</span><span class="sxs-lookup"><span data-stu-id="3be31-454">These limits are documented in hello article mentioned above as well.</span></span> <span data-ttu-id="3be31-455">Но по сути это означает, что если, например, подключить 32 tooa x P30 дисков одной виртуальной Машины DS14 можно не получить 32 x hello максимальной пропускной способности диска P30.</span><span class="sxs-lookup"><span data-stu-id="3be31-455">But in essence it means that if you, for example, mount 32 x P30 disks tooa single DS14 VM you can NOT get 32 x hello maximum throughput of a P30 disk.</span></span> <span data-ttu-id="3be31-456">Вместо этого hello максимальной пропускной способности на уровне ВМ задокументированного hello статьи ограничения пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="3be31-456">Instead hello maximum throughput on VM level as documented in hello article limits data throughput.</span></span>

<span data-ttu-id="3be31-457">Дополнительные сведения о хранилище класса Premium можно найти здесь: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span><span class="sxs-lookup"><span data-stu-id="3be31-457">More information on Premium Storage can be found here: <http://azure.microsoft.com/blog/2015/04/16/azure-premium-storage-now-generally-available-2></span></span>

#### <span data-ttu-id="3be31-458"><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Управляемые диски</span><span class="sxs-lookup"><span data-stu-id="3be31-458"><a name="c55b2c6e-3ca1-4476-be16-16c81927550f"></a>Managed Disks</span></span>
<span data-ttu-id="3be31-459">Управляемые диски — это ресурс нового типа в Azure Resource Manager, который можно использовать вместо виртуальных жестких дисков, хранимых в учетных записях хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-459">Managed Disks are a new resource type in Azure Resource Manager that can be used instead of VHDs that are stored in Azure Storage Accounts.</span></span> <span data-ttu-id="3be31-460">Управляемый диски автоматически соответствовать hello, группа доступности hello виртуальной машины, которые могут им присоединенного tooand таким образом увеличение hello доступности виртуальных машин и служб hello, выполняющихся на виртуальной машине hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-460">Managed Disks automatically align with hello Availability Set of hello virtual machine they are attached tooand therefore increase hello availability of your virtual machine and hello services that are running on hello virtual machine.</span></span> <span data-ttu-id="3be31-461">Дополнительные сведения см. в статье hello [обзорную статью](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span><span class="sxs-lookup"><span data-stu-id="3be31-461">For more information, read hello [overview article](https://docs.microsoft.com/azure/storage/storage-managed-disks-overview).</span></span>

<span data-ttu-id="3be31-462">Рекомендуется использовать tooyou диска управляемый, так как они упрощают развертывание hello и управление виртуальными машинами.</span><span class="sxs-lookup"><span data-stu-id="3be31-462">We recommend tooyou use Managed disk, because they simplify hello deployment and management of your virtual machines.</span></span>
<span data-ttu-id="3be31-463">Сейчас SAP поддерживает только управляемые диски уровня "Премиум".</span><span class="sxs-lookup"><span data-stu-id="3be31-463">SAP currently only supports Premium Managed Disks.</span></span> <span data-ttu-id="3be31-464">Дополнительные сведения см. в примечании SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="3be31-464">For more information, read SAP Note [1928533].</span></span>

#### <a name="azure-storage-accounts"></a><span data-ttu-id="3be31-465">Учетные записи службы хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-465">Azure Storage Accounts</span></span>
<span data-ttu-id="3be31-466">При развертывании служб или виртуальных машин в Azure развертывание виртуальных жестких дисков и образов виртуальных машин можно организовать в группы, которые называются учетными записями службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-466">When deploying services or VMs in Azure, deployment of VHDs and VM Images can be organized in units called Azure Storage Accounts.</span></span> <span data-ttu-id="3be31-467">При планировании развертывания Azure, необходимо toocarefully учитывать ограничения hello в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-467">When planning an Azure deployment, you need toocarefully consider hello restrictions of Azure.</span></span> <span data-ttu-id="3be31-468">На одной стороне hello имеется ограниченное число учетных записей хранения на подписку Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-468">On hello one side, there is a limited number of Storage Accounts per Azure subscription.</span></span> <span data-ttu-id="3be31-469">Хотя каждая учетная запись хранилища Azure может содержать большое количество VHD-файлы, есть фиксированное ограничение на hello общее число операций ввода-ВЫВОДА на учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-469">Although each Azure Storage Account can hold a large number of VHD files, there is a fixed limit on hello total IOPS per Storage Account.</span></span> <span data-ttu-id="3be31-470">При развертывании сотен ВМ SAP с системами СУБД, создающими значительное вызовов операций ввода-ВЫВОДА, рекомендуется toodistribute высокой ВМ СУБД операций ввода-ВЫВОДА между несколькими учетными записями хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-470">When deploying hundreds of SAP VMs with DBMS systems creating significant IO calls, it is recommended toodistribute high IOPS DBMS VMs between multiple Azure Storage Accounts.</span></span> <span data-ttu-id="3be31-471">Следует соблюдать осторожность не tooexceed hello текущее ограничение учетных записей хранилища Azure на подписку.</span><span class="sxs-lookup"><span data-stu-id="3be31-471">Care must be taken not tooexceed hello current limit of Azure Storage Accounts per subscription.</span></span> <span data-ttu-id="3be31-472">Поскольку хранилище является жизненно важной частью развертывания базы данных hello для системы SAP, эта концепция рассматривается более подробно в уже существует ссылка hello [руководство по развертыванию СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-472">Because storage is a vital part of hello database deployment for an SAP system, this concept is discussed in more detail in hello already referenced [DBMS Deployment Guide][dbms-guide].</span></span>

<span data-ttu-id="3be31-473">Дополнительные сведения об учетных записях хранения Azure см. в [этой статье][storage-scalability-targets].</span><span class="sxs-lookup"><span data-stu-id="3be31-473">More information about Azure Storage Accounts can be found in [this article][storage-scalability-targets].</span></span> <span data-ttu-id="3be31-474">Чтение в этой статье, выясняется, что существуют отличия в ограничения hello стандартных учетных записей хранилища Azure и учетные записи хранения Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-474">Reading this article, you realize that there are differences in hello limitations between Azure Standard Storage Accounts and Premium Storage Accounts.</span></span> <span data-ttu-id="3be31-475">Основные различия — hello объем данных, которые могут быть сохранены в такой учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="3be31-475">Major differences are hello volume of data that can be stored within such a Storage Account.</span></span> <span data-ttu-id="3be31-476">В стандартном хранилище hello том величиной больше, чем с хранилище Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-476">In Standard Storage hello volume is a magnitude larger than with Premium Storage.</span></span> <span data-ttu-id="3be31-477">На hello другой стороне hello стандартной учетной записи хранилища важности ограничен операций ввода-ВЫВОДА (см. столбец «Общая частота запросов»), а данное ограничение не имеет учетной записи хранилища Azure Premium hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-477">On hello other side, hello Standard Storage Account is severely limited in IOPS (see column ‘Total Request Rate’), whereas hello Azure Premium Storage Account has no such limitation.</span></span> <span data-ttu-id="3be31-478">Мы рассмотрим сведения и результаты этих различий при обсуждении hello развертывания систем SAP, в особенности это касается серверов СУБД hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-478">We will discuss details and results of these differences when discussing hello deployments of SAP systems, especially hello DBMS servers.</span></span>

<span data-ttu-id="3be31-479">В учетной записи хранилища у вас hello вероятность toocreate различные контейнеры для hello цели организации и категоризация различных виртуальных жестких дисков.</span><span class="sxs-lookup"><span data-stu-id="3be31-479">Within a Storage Account, you have hello possibility toocreate different containers for hello purpose of organizing and categorizing different VHDs.</span></span> <span data-ttu-id="3be31-480">Эти контейнеры используются, например, для разделения виртуальных жестких дисков разных виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-480">These containers are usually used to, for example, separate VHDs of different VMs.</span></span> <span data-ttu-id="3be31-481">Производительность системы не зависит от того, сколько контейнеров находится в учетной записи службы хранилища Azure — один или несколько.</span><span class="sxs-lookup"><span data-stu-id="3be31-481">There are no performance implications in using just one container or multiple containers underneath a single Azure Storage Account.</span></span>

<span data-ttu-id="3be31-482">В пределах Azure имени виртуального жесткого диска ниже hello после именования подключение, которое должно tooprovide уникальное имя для hello VHD в Azure:</span><span class="sxs-lookup"><span data-stu-id="3be31-482">Within Azure a VHD name follows hello following naming connection that needs tooprovide a unique name for hello VHD within Azure:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="3be31-483">Как строка hello упомянутых выше должен toouniquely идентификации hello виртуального жесткого диска, который хранится в хранилище Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-483">As mentioned hello string above needs toouniquely identify hello VHD that is stored on Azure Storage.</span></span>

### <span data-ttu-id="3be31-484"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Сеть Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-484"><a name="61678387-8868-435d-9f8c-450b2424f5bd"></a>Microsoft Azure Networking</span></span>
<span data-ttu-id="3be31-485">Microsoft Azure предоставляет сетевую инфраструктуру, позволяющую hello сопоставление всех сценариев, что мы хотим toorealize с программным обеспечением SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-485">Microsoft Azure provides a network infrastructure, which allows hello mapping of all scenarios, which we want toorealize with SAP software.</span></span> <span data-ttu-id="3be31-486">Ниже приведены возможности Hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-486">hello capabilities are:</span></span>

* <span data-ttu-id="3be31-487">Доступ из hello за пределами непосредственно toohello виртуальных машин с помощью служб терминалов Windows или ssh/VNC</span><span class="sxs-lookup"><span data-stu-id="3be31-487">Access from hello outside, directly toohello VMs via Windows Terminal Services or ssh/VNC</span></span>
* <span data-ttu-id="3be31-488">Tooservices доступа и определенные порты, используемые приложениями в пределах hello виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="3be31-488">Access tooservices and specific ports used by applications within hello VMs</span></span>
* <span data-ttu-id="3be31-489">внутреннее взаимодействие и разрешение имен между группами виртуальных машин, развернутых в Azure;</span><span class="sxs-lookup"><span data-stu-id="3be31-489">Internal Communication and Name Resolution between a group of VMs deployed as Azure VMs</span></span>
* <span data-ttu-id="3be31-490">Подключения между организациями между локальной сетью клиента и hello сети Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-490">Cross-premises Connectivity between a customer’s on-premises network and hello Azure network</span></span>
* <span data-ttu-id="3be31-491">подключения между сайтами Azure в разных регионах Azure или в разных центрах обработки данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-491">Cross Azure Region or data center connectivity between Azure sites</span></span>

<span data-ttu-id="3be31-492">Дополнительные сведения см. здесь: <https://azure.microsoft.com/documentation/services/virtual-network/></span><span class="sxs-lookup"><span data-stu-id="3be31-492">More information can be found here: <https://azure.microsoft.com/documentation/services/virtual-network/></span></span>

<span data-ttu-id="3be31-493">Существует много разных возможностей tooconfigure имя и разрешение IP-адресов в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-493">There are many different possibilities tooconfigure name and IP resolution in Azure.</span></span> <span data-ttu-id="3be31-494">В этом документе только для облака сценарии используют по умолчанию hello использовании Azure DNS (в отличие от toodefining создания собственной службы DNS).</span><span class="sxs-lookup"><span data-stu-id="3be31-494">In this document, Cloud-Only scenarios rely on hello default of using Azure DNS (in contrast toodefining an own DNS service).</span></span> <span data-ttu-id="3be31-495">Есть также возможность использовать новую службу Azure DNS вместо собственного DNS-сервера.</span><span class="sxs-lookup"><span data-stu-id="3be31-495">There is also a new Azure DNS service, which can be used instead of setting up your own DNS server.</span></span> <span data-ttu-id="3be31-496">Дополнительные сведения см. в [этой статье][virtual-networks-manage-dns-in-vnet] и на [этой странице](https://azure.microsoft.com/services/dns/).</span><span class="sxs-lookup"><span data-stu-id="3be31-496">More information can be found in [this article][virtual-networks-manage-dns-in-vnet] and on [this page](https://azure.microsoft.com/services/dns/).</span></span>

<span data-ttu-id="3be31-497">Для сценариев между организациями, мы полагаемся на факт hello, hello локальной OpenLDAP/AD/DNS посредством VPN или частного подключения tooAzure была расширена.</span><span class="sxs-lookup"><span data-stu-id="3be31-497">For cross-premises scenarios, we are relying on hello fact that hello on-premises AD/OpenLDAP/DNS has been extended via VPN or private connection tooAzure.</span></span> <span data-ttu-id="3be31-498">В некоторых сценариях, показанных здесь, может быть необходимые toohave реплику AD/OpenLDAP, установленная в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-498">For certain scenarios as documented here, it might be necessary toohave an AD/OpenLDAP replica installed in Azure.</span></span>

<span data-ttu-id="3be31-499">Поскольку сеть и разрешение имен является жизненно важной частью развертывания базы данных hello для системы SAP, эта концепция рассматривается более подробно в hello [руководство по развертыванию СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-499">Because networking and name resolution is a vital part of hello database deployment for an SAP system, this concept is discussed in more detail in hello [DBMS Deployment Guide][dbms-guide].</span></span>

##### <a name="azure-virtual-networks"></a><span data-ttu-id="3be31-500">Виртуальные сети Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-500">Azure Virtual Networks</span></span>
<span data-ttu-id="3be31-501">При построении виртуальной сети Azure, можно определить диапазон адресов hello частных IP-адресов hello занимаемый функциональные возможности DHCP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-501">By building up an Azure Virtual Network, you can define hello address range of hello private IP addresses allocated by Azure DHCP functionality.</span></span> <span data-ttu-id="3be31-502">В сценариях между организациями hello определенный диапазон IP-адресов по-прежнему назначается через DHCP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-502">In cross-premises scenarios, hello IP address range defined is still allocated using DHCP by Azure.</span></span> <span data-ttu-id="3be31-503">Однако разрешение доменных имен выполняется в локальной среде (при условии, что виртуальные машины hello являются частью локального домена) и таким образом, можно разрешить адреса за пределами разных облачных службах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-503">However, Domain Name resolution is done on-premises (assuming that hello VMs are a part of an on-premises domain) and hence can resolve addresses beyond different Azure Cloud Services.</span></span>

<span data-ttu-id="3be31-504">Все виртуальные машины в Azure требованиям toobe подключен tooa виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="3be31-504">Every Virtual Machine in Azure needs toobe connected tooa Virtual Network.</span></span>

<span data-ttu-id="3be31-505">Дополнительные сведения см. в [этой статье][resource-groups-networking] и на [этой странице](https://azure.microsoft.com/documentation/services/virtual-network/).</span><span class="sxs-lookup"><span data-stu-id="3be31-505">More details can be found in [this article][resource-groups-networking] and on [this page](https://azure.microsoft.com/documentation/services/virtual-network/).</span></span>

[comment]: <> (MShermannd TODO не удалось найти статьи, включая раздел OpenLDAP hello + ARM;)
[comment]: <> (MSSedusch: <https://channel9.msdn.com/Blogs/Open/Load-balancing-highly-available-Linux-services-on-Windows-Azure-OpenLDAP-and-MySQL>)

> [!NOTE]
> <span data-ttu-id="3be31-508">По умолчанию после развертывания виртуальной Машины невозможно изменить конфигурацию виртуальной сети hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-508">By default, once a VM is deployed you cannot change hello Virtual Network configuration.</span></span> <span data-ttu-id="3be31-509">параметры TCP/IP Hello должно остаться toohello Azure DHCP-сервера.</span><span class="sxs-lookup"><span data-stu-id="3be31-509">hello TCP/IP settings must be left toohello Azure DHCP server.</span></span> <span data-ttu-id="3be31-510">Поведение по умолчанию — назначение динамических IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="3be31-510">Default behavior is Dynamic IP assignment.</span></span>
>
>

<span data-ttu-id="3be31-511">Hello MAC-адрес виртуального сетевого адаптера hello может изменяться, например после изменения размера и hello Windows или Linux гостевой ОС hello новую сетевую карту и автоматически в этом случае использование DHCP tooassign hello адресов IP и DNS.</span><span class="sxs-lookup"><span data-stu-id="3be31-511">hello MAC address of hello virtual network card may change, for example after resize and hello Windows or Linux guest OS picks up hello new network card and automatically uses DHCP tooassign hello IP and DNS addresses in this case.</span></span>

##### <a name="static-ip-assignment"></a><span data-ttu-id="3be31-512">Назначение статического IP-адреса</span><span class="sxs-lookup"><span data-stu-id="3be31-512">Static IP Assignment</span></span>
<span data-ttu-id="3be31-513">Это возможно tooassign фиксированной или зарезервированные IP-адреса tooVMs в виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-513">It is possible tooassign fixed or reserved IP addresses tooVMs within an Azure Virtual Network.</span></span> <span data-ttu-id="3be31-514">Работающих виртуальных машин hello в виртуальной сети Azure открывает tooleverage значительные возможности этой функции, если это необходимо или требуется в некоторых сценариях.</span><span class="sxs-lookup"><span data-stu-id="3be31-514">Running hello VMs in an Azure Virtual Network opens a great possibility tooleverage this functionality if needed or required for some scenarios.</span></span> <span data-ttu-id="3be31-515">Назначение IP-адресов Hello остается действительными на протяжении всего существования hello hello ВМ, независимо от работает ли hello виртуальной Машины или завершение работы.</span><span class="sxs-lookup"><span data-stu-id="3be31-515">hello IP assignment remains valid throughout hello existence of hello VM, independent of whether hello VM is running or shutdown.</span></span> <span data-ttu-id="3be31-516">В результате необходимо tootake hello общее число ВМ (работающих и остановленных виртуальных МАШИН) в учетную запись, при определении hello диапазон IP-адресов для hello виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="3be31-516">As a result, you need tootake hello overall number of VMs (running and stopped VMS) into account when defining hello range of IP addresses for hello Virtual Network.</span></span> <span data-ttu-id="3be31-517">Назначение Hello IP-адрес сохраняется, пока hello ВМ и его сетевого интерфейса не будет удален или пока hello IP-адрес его назначение отменяется еще раз.</span><span class="sxs-lookup"><span data-stu-id="3be31-517">hello IP address remains assigned either until hello VM and its Network Interface is deleted or until hello IP address gets de-assigned again.</span></span> <span data-ttu-id="3be31-518">Дополнительные сведения см. в [этой статье][virtual-networks-static-private-ip-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="3be31-518">For more information, read [this article][virtual-networks-static-private-ip-arm-pportal].</span></span>

##### <a name="multiple-nics-per-vm"></a><span data-ttu-id="3be31-519">Несколько сетевых адаптеров на виртуальной машине</span><span class="sxs-lookup"><span data-stu-id="3be31-519">Multiple NICs per VM</span></span>
<span data-ttu-id="3be31-520">Для виртуальной машины Azure вы можете определить несколько виртуальных сетевых адаптеров (vNIC).</span><span class="sxs-lookup"><span data-stu-id="3be31-520">You can define multiple virtual network interface cards (vNIC) for an Azure Virtual Machine.</span></span> <span data-ttu-id="3be31-521">С возможностью toohave hello несколько vNICs запуском tooset копирование разделение трафика сети where, например, клиентский трафик направляется через один виртуальный сетевой адаптер и серверная часть трафика направляется через второй виртуального сетевого адаптера.</span><span class="sxs-lookup"><span data-stu-id="3be31-521">With hello ability toohave multiple vNICs you can start tooset up network traffic separation where, for example, client traffic is routed through one vNIC and backend traffic is routed through a second vNIC.</span></span> <span data-ttu-id="3be31-522">В зависимости от типа hello виртуальной машины имеются различные ограничения в считает количество toohello vNICs.</span><span class="sxs-lookup"><span data-stu-id="3be31-522">Dependent on hello type of VM there are different limitations in regards toohello number of vNICs.</span></span> <span data-ttu-id="3be31-523">Подробные сведения о параметрах, функциональных возможностях и ограничениях см. в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="3be31-523">Exact details, functionality, and restrictions can be found in these articles:</span></span>

* <span data-ttu-id="3be31-524">[Создание виртуальной машины Windows, использующей несколько сетевых адаптеров, и управление ею][virtual-networks-multiple-nics-windows]</span><span class="sxs-lookup"><span data-stu-id="3be31-524">[Create a Windows VM with multiple NICs][virtual-networks-multiple-nics-windows]</span></span>
* <span data-ttu-id="3be31-525">[Как создать виртуальную машину Linux в Azure с несколькими сетевыми картами][virtual-networks-multiple-nics-linux]</span><span class="sxs-lookup"><span data-stu-id="3be31-525">[Create a Linux VM with multiple NICs][virtual-networks-multiple-nics-linux]</span></span>
* <span data-ttu-id="3be31-526">[Развертывание виртуальных машин с несколькими сетевыми адаптерами с помощью шаблона][virtual-network-deploy-multinic-arm-template]</span><span class="sxs-lookup"><span data-stu-id="3be31-526">[Deploy multi NIC VMs using a template][virtual-network-deploy-multinic-arm-template]</span></span>
* <span data-ttu-id="3be31-527">[Создание виртуальной машины с несколькими сетевыми интерфейсами с помощью PowerShell][virtual-network-deploy-multinic-arm-ps]</span><span class="sxs-lookup"><span data-stu-id="3be31-527">[Deploy multi NIC VMs using PowerShell][virtual-network-deploy-multinic-arm-ps]</span></span>
* <span data-ttu-id="3be31-528">[Развертывание виртуальных машин multi сетевого Адаптера, с помощью hello Azure CLI][virtual-network-deploy-multinic-arm-cli]</span><span class="sxs-lookup"><span data-stu-id="3be31-528">[Deploy multi NIC VMs using hello Azure CLI][virtual-network-deploy-multinic-arm-cli]</span></span>

#### <a name="site-to-site-connectivity"></a><span data-ttu-id="3be31-529">Подключение типа "сеть — сеть"</span><span class="sxs-lookup"><span data-stu-id="3be31-529">Site-to-Site Connectivity</span></span>
<span data-ttu-id="3be31-530">Распределенное развертывание — это виртуальные машины Azure, подключенные к локальной сети с использованием прозрачного и постоянного VPN-подключения.</span><span class="sxs-lookup"><span data-stu-id="3be31-530">Cross-premises is Azure VMs and On-Premises linked with a transparent and permanent VPN connection.</span></span> <span data-ttu-id="3be31-531">Это ожидаемое toobecome hello наиболее SAP шаблон общего развертывания в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-531">It is expected toobecome hello most common SAP deployment pattern in Azure.</span></span> <span data-ttu-id="3be31-532">Hello предполагается, что операционные процедуры и процессы с экземплярами SAP в Azure должны работать прозрачно.</span><span class="sxs-lookup"><span data-stu-id="3be31-532">hello assumption is that operational procedures and processes with SAP instances in Azure should work transparently.</span></span> <span data-ttu-id="3be31-533">Это означает, что вы должны быть может tooprint из этих систем, а также использовать hello SAP Transport Management System (TMS) tootransport изменения из системы разработки в Azure tooa тестовой системы развернутых локально.</span><span class="sxs-lookup"><span data-stu-id="3be31-533">This means you should be able tooprint out of these systems as well as use hello SAP Transport Management System (TMS) tootransport changes from a development system in Azure tooa test system, which is deployed on-premises.</span></span> <span data-ttu-id="3be31-534">Дополнительную документацию по подключениям типа "сеть — сеть" можно найти в [этой статье][vpn-gateway-create-site-to-site-rm-powershell].</span><span class="sxs-lookup"><span data-stu-id="3be31-534">More documentation around site-to-site can be found in [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

##### <a name="vpn-tunnel-device"></a><span data-ttu-id="3be31-535">Устройство для VPN-туннеля</span><span class="sxs-lookup"><span data-stu-id="3be31-535">VPN Tunnel Device</span></span>
<span data-ttu-id="3be31-536">В заказ toocreate подключения сеть сеть (локального центра tooAzure данных центра обработки данных), необходимо tooeither получить и настроить VPN-устройство или использовать маршрутизации и удаленного доступа (RRAS) которая появилась как программный компонент с Windows Server 2012.</span><span class="sxs-lookup"><span data-stu-id="3be31-536">In order toocreate a site-to-site connection (on-premises data center tooAzure data center), you need tooeither obtain and configure a VPN device, or use Routing and Remote Access Service (RRAS) which was introduced as a software component with Windows Server 2012.</span></span>

* <span data-ttu-id="3be31-537">[Создание виртуальной сети с VPN-подключением типа "сеть — сеть" с помощью PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span><span class="sxs-lookup"><span data-stu-id="3be31-537">[Create a virtual network with a site-to-site VPN connection using PowerShell][vpn-gateway-create-site-to-site-rm-powershell]</span></span>
* <span data-ttu-id="3be31-538">[О VPN-устройствах для подключений VPN-шлюзов типа "сеть — сеть"][vpn-gateway-about-vpn-devices]</span><span class="sxs-lookup"><span data-stu-id="3be31-538">[About VPN devices for Site-to-Site VPN Gateway connections][vpn-gateway-about-vpn-devices]</span></span>
* <span data-ttu-id="3be31-539">[VPN-шлюз: вопросы и ответы][vpn-gateway-vpn-faq]</span><span class="sxs-lookup"><span data-stu-id="3be31-539">[VPN Gateway FAQ][vpn-gateway-vpn-faq]</span></span>

![Подключение типа "сеть — сеть" между локальной средой и Azure][planning-guide-figure-600]

<span data-ttu-id="3be31-541">Hello выше рисунке показаны две подписки Azure имеют поддиапазоны IP-адресов, зарезервированных для использования в виртуальных сетях в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-541">hello Figure above shows two Azure subscriptions have IP address subranges reserved for usage in Virtual Networks in Azure.</span></span> <span data-ttu-id="3be31-542">hello Hello подключения из локального tooAzure сети устанавливается посредством VPN.</span><span class="sxs-lookup"><span data-stu-id="3be31-542">hello connectivity from hello on-premises network tooAzure is established via VPN.</span></span>

#### <a name="point-to-site-vpn"></a><span data-ttu-id="3be31-543">VPN-подключение типа "точка — сеть"</span><span class="sxs-lookup"><span data-stu-id="3be31-543">Point-to-Site VPN</span></span>
<span data-ttu-id="3be31-544">Точка сеть VPN требуется tooconnect машины каждого клиента с помощью свой собственный VPN в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-544">Point-to-site VPN requires every client machine tooconnect with its own VPN into Azure.</span></span> <span data-ttu-id="3be31-545">Для сценариев SAP hello, которую мы ищем подключение точка сайт не имеет смысла.</span><span class="sxs-lookup"><span data-stu-id="3be31-545">For hello SAP scenarios we are looking at, point-to-site connectivity is not practical.</span></span> <span data-ttu-id="3be31-546">Таким образом нет дальнейшие ссылки предоставляют toopoint сеть VPN-подключение.</span><span class="sxs-lookup"><span data-stu-id="3be31-546">Therefore, no further references are given toopoint-to-site VPN connectivity.</span></span>

<span data-ttu-id="3be31-547">Дополнительные сведения см. здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-547">More information can be found here</span></span>
* [<span data-ttu-id="3be31-548">Настройка tooa подключение точка-сайт виртуальной сети с помощью hello портал Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-548">Configure a Point-to-Site connection tooa VNet using hello Azure portal</span></span>](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal)
* [<span data-ttu-id="3be31-549">Настройка tooa подключение точка-сайт виртуальной сети с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-549">Configure a Point-to-Site connection tooa VNet using PowerShell</span></span>](https://docs.microsoft.com/azure/vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps)

#### <a name="multi-site-vpn"></a><span data-ttu-id="3be31-550">Многосайтовая VPN</span><span class="sxs-lookup"><span data-stu-id="3be31-550">Multi-Site VPN</span></span>
<span data-ttu-id="3be31-551">Azure предлагает также сегодня подключения VPN с несколькими сайтами toocreate hello вероятность для одной подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-551">Azure also nowadays offers hello possibility toocreate Multi-Site VPN connectivity for one Azure subscription.</span></span> <span data-ttu-id="3be31-552">Ранее одна подписка была ограниченный tooone сеть сеть VPN-подключения.</span><span class="sxs-lookup"><span data-stu-id="3be31-552">Previously a single subscription was limited tooone site-to-site VPN connection.</span></span> <span data-ttu-id="3be31-553">Теперь это ограничение снято — многосайтовые VPN-подключения поддерживаются и для отдельных подписок.</span><span class="sxs-lookup"><span data-stu-id="3be31-553">This limitation went away with Multi-Site VPN connections for a single subscription.</span></span> <span data-ttu-id="3be31-554">В результате возможно tooleverage более одного региона Azure для конкретной подписки посредством конфигурациях между организациями.</span><span class="sxs-lookup"><span data-stu-id="3be31-554">This makes it possible tooleverage more than one Azure Region for a specific subscription through cross-premises configurations.</span></span>

<span data-ttu-id="3be31-555">Дополнительную документацию можно найти в [этой статье][vpn-gateway-create-site-to-site-rm-powershell].</span><span class="sxs-lookup"><span data-stu-id="3be31-555">For more documentation, please see [this article][vpn-gateway-create-site-to-site-rm-powershell]</span></span>

[comment]: <> (MShermannd: нет ссылки на документацию по ARM)

#### <a name="vnet-toovnet-connection"></a><span data-ttu-id="3be31-557">Виртуальная сеть tooVNet подключения</span><span class="sxs-lookup"><span data-stu-id="3be31-557">VNet tooVNet Connection</span></span>
<span data-ttu-id="3be31-558">С помощью VPN с несколькими сайтами, необходимо, чтобы tooconfigure отдельной виртуальной сети Azure, в каждой из областей hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-558">Using Multi-Site VPN, you need tooconfigure a separate Azure Virtual Network in each of hello regions.</span></span> <span data-ttu-id="3be31-559">Тем не менее очень часто имеется требование hello, hello программных компонентов в различных регионах hello должны взаимодействовать друг с другом.</span><span class="sxs-lookup"><span data-stu-id="3be31-559">However very often you have hello requirement that hello software components in hello different regions should communicate with each other.</span></span> <span data-ttu-id="3be31-560">В идеальном случае такая связь не должны маршрутизироваться из одного региона Azure tooon организациями и отсутствует toohello другой регион Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-560">Ideally this communication should not be routed from one Azure Region tooon-premises and from there toohello other Azure Region.</span></span> <span data-ttu-id="3be31-561">tooshortcut, Azure предлагает возможность tooconfigure hello подключения из одной виртуальной сети Azure в одной области tooanother виртуальной сети Azure размещено в другом регионе.</span><span class="sxs-lookup"><span data-stu-id="3be31-561">tooshortcut, Azure offers hello possibility tooconfigure a connection from one Azure Virtual Network in one region tooanother Azure Virtual Network hosted in another region.</span></span> <span data-ttu-id="3be31-562">Такая конфигурация называется подключением типа "виртуальная сеть — виртуальная сеть".</span><span class="sxs-lookup"><span data-stu-id="3be31-562">This functionality is called VNet-to-VNet connection.</span></span> <span data-ttu-id="3be31-563">Дополнительные сведения об этих функциях см. здесь: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span><span class="sxs-lookup"><span data-stu-id="3be31-563">More details on this functionality can be found here: <https://azure.microsoft.com/documentation/articles/vpn-gateway-vnet-vnet-rm-ps/>.</span></span>

#### <a name="private-connection-tooazure--expressroute"></a><span data-ttu-id="3be31-564">TooAzure частного подключения — ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="3be31-564">Private Connection tooAzure – ExpressRoute</span></span>
<span data-ttu-id="3be31-565">Microsoft Azure ExpressRoute позволяет создавать частные подключения между центрами обработки данных Azure и локальной инфраструктуры либо hello клиента или в среде совместного размещения hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-565">Microsoft Azure ExpressRoute allows hello creation of private connections between Azure data centers and either hello customer's on-premises infrastructure or in a co-location environment.</span></span> <span data-ttu-id="3be31-566">ExpressRoute предоставляется различными поставщиками MPLS VPN (с пакетной коммутацией) или другими поставщиками сетевых услуг.</span><span class="sxs-lookup"><span data-stu-id="3be31-566">ExpressRoute is offered by various MPLS (packet switched) VPN providers or other Network Service Providers.</span></span> <span data-ttu-id="3be31-567">Подключения ExpressRoute не выходят hello общедоступный Интернет.</span><span class="sxs-lookup"><span data-stu-id="3be31-567">ExpressRoute connections do not go over hello public Internet.</span></span> <span data-ttu-id="3be31-568">Подключения ExpressRoute обеспечивают более высокую защищенность, большую надежность через несколько параллельных соединений, высокую скорость и меньшую задержку по сравнению с обычными подключениями через Интернет hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-568">ExpressRoute connections offer higher security, more reliability through multiple parallel circuits, faster speeds, and lower latencies than typical connections over hello Internet.</span></span>

<span data-ttu-id="3be31-569">Дополнительные сведения об Azure ExpressRoute и доступных предложениях см. здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-569">Find more details on Azure ExpressRoute and offerings here:</span></span>

* <span data-ttu-id="3be31-570"><https://azure.microsoft.com/documentation/services/expressroute/></span><span class="sxs-lookup"><span data-stu-id="3be31-570"><https://azure.microsoft.com/documentation/services/expressroute/></span></span>
* <span data-ttu-id="3be31-571"><https://azure.microsoft.com/pricing/details/expressroute/></span><span class="sxs-lookup"><span data-stu-id="3be31-571"><https://azure.microsoft.com/pricing/details/expressroute/></span></span>
* <span data-ttu-id="3be31-572"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span><span class="sxs-lookup"><span data-stu-id="3be31-572"><https://azure.microsoft.com/documentation/articles/expressroute-faqs/></span></span>

<span data-ttu-id="3be31-573">ExpressRoute позволяет подключать несколько подписок Azure через один канал ExpressRoute, как описано здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-573">Express Route enables multiple Azure subscriptions through one ExpressRoute circuit as documented here</span></span>

* <span data-ttu-id="3be31-574"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span><span class="sxs-lookup"><span data-stu-id="3be31-574"><https://azure.microsoft.com/documentation/articles/expressroute-howto-linkvnet-arm/></span></span>
* <span data-ttu-id="3be31-575"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span><span class="sxs-lookup"><span data-stu-id="3be31-575"><https://azure.microsoft.com/documentation/articles/expressroute-howto-circuit-arm/></span></span>

#### <a name="forced-tunneling-in-case-of-cross-premises"></a><span data-ttu-id="3be31-576">Принудительное туннелирование для распределенного развертывания</span><span class="sxs-lookup"><span data-stu-id="3be31-576">Forced tunneling in case of cross-premises</span></span>
<span data-ttu-id="3be31-577">Для виртуальных машин, присоединение к доменам локальной через сеть сеть "," точка сеть "или" ExpressRoute необходимо убедиться, что hello параметров Интернет-прокси развернуты для всех пользователей hello в этих виртуальных машин toomake.</span><span class="sxs-lookup"><span data-stu-id="3be31-577">For VMs joining on-premises domains through site-to-site, point-to-site or ExpressRoute, you need toomake sure that hello Internet proxy settings are getting deployed for all hello users in those VMs as well.</span></span> <span data-ttu-id="3be31-578">По умолчанию, программное обеспечение, работающее в этих виртуальных машин или пользователей с помощью обозревателя tooaccess hello Интернета, не будут проходить через прокси-сервер организации hello, а будут подключаться прямо через Azure toohello Интернета.</span><span class="sxs-lookup"><span data-stu-id="3be31-578">By default, software running in those VMs or users using a browser tooaccess hello internet would not go through hello company proxy, but would connect straight through Azure toohello internet.</span></span> <span data-ttu-id="3be31-579">Однако параметры прокси-сервера даже hello не через прокси-сервер организации hello hello трафика toodirect 100% решением, так как отвечает toocheck программного обеспечения и служб для hello прокси-сервера.</span><span class="sxs-lookup"><span data-stu-id="3be31-579">But even hello proxy setting is not a 100% solution toodirect hello traffic through hello company proxy since it is responsibility of software and services toocheck for hello proxy.</span></span> <span data-ttu-id="3be31-580">Если программное обеспечение, работающее в hello виртуальной Машины не выполняется, или если администратор регулирует параметры hello, toohello трафика Интернет быть направлен непосредственно с помощью Azure toohello Интернета.</span><span class="sxs-lookup"><span data-stu-id="3be31-580">If software running in hello VM is not doing that or an administrator manipulates hello settings, traffic toohello Internet can be detoured again directly through Azure toohello Internet.</span></span>

<span data-ttu-id="3be31-581">Порядок tooavoid это, можно настроить Принудительное туннелирование с подключением сайт сайт в локальной среде и Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-581">In order tooavoid this, you can configure Forced Tunneling with site-to-site connectivity between on-premises and Azure.</span></span> <span data-ttu-id="3be31-582">Hello подробное описание функции Принудительное туннелирование hello публикуется здесь <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span><span class="sxs-lookup"><span data-stu-id="3be31-582">hello detailed description of hello Forced Tunneling feature is published here <https://azure.microsoft.com/documentation/articles/vpn-gateway-forced-tunneling-rm/></span></span>

<span data-ttu-id="3be31-583">Объявление маршрута по умолчанию через hello ExpressRoute BGP клиентами включено Принудительное туннелирование с ExpressRoute сеансы пиринга.</span><span class="sxs-lookup"><span data-stu-id="3be31-583">Forced Tunneling with ExpressRoute is enabled by customers advertising a default route via hello ExpressRoute BGP peering sessions.</span></span>

#### <a name="summary-of-azure-networking"></a><span data-ttu-id="3be31-584">Обзор сетевых возможностей Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-584">Summary of Azure Networking</span></span>
<span data-ttu-id="3be31-585">В этом разделе собраны ключевые замечания о сетевых возможностях Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-585">This chapter contained many important points about Azure Networking.</span></span> <span data-ttu-id="3be31-586">Здесь приводится сводка основных точек hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-586">Here is a summary of hello main points:</span></span>

* <span data-ttu-id="3be31-587">Виртуальные сети Azure позволяет tooset hello сети, в соответствии с tooyour собственных нужд</span><span class="sxs-lookup"><span data-stu-id="3be31-587">Azure Virtual Networks allows tooset up hello network according tooyour own needs</span></span>
* <span data-ttu-id="3be31-588">Виртуальные сети Azure можно использовать tooassign IP адрес диапазоны tooVMs или назначить фиксированный tooVMs IP-адресов</span><span class="sxs-lookup"><span data-stu-id="3be31-588">Azure Virtual Networks can be leveraged tooassign IP address ranges tooVMs or assign fixed IP addresses tooVMs</span></span>
* <span data-ttu-id="3be31-589">tooset сеть-сеть или подключение точка-сеть toocreate виртуальной сети Azure необходимо сначала</span><span class="sxs-lookup"><span data-stu-id="3be31-589">tooset up a Site-To-Site or Point-To-Site connection you need toocreate an Azure Virtual Network first</span></span>
* <span data-ttu-id="3be31-590">После развертывания виртуальной машины она больше не hello toochange можно назначать toohello виртуальной Машины в виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="3be31-590">Once a virtual machine has been deployed, it is no longer possible toochange hello Virtual Network assigned toohello VM</span></span>

### <a name="quotas-in-azure-virtual-machine-services"></a><span data-ttu-id="3be31-591">Квоты в службах виртуальных машин Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-591">Quotas in Azure Virtual Machine Services</span></span>
<span data-ttu-id="3be31-592">Мы должны toobe снимите о hello фактов, hello хранилища и сетевой инфраструктуры является общим для виртуальных машин, работающих в инфраструктуре Azure hello различных служб.</span><span class="sxs-lookup"><span data-stu-id="3be31-592">We need toobe clear about hello fact that hello storage and network infrastructure is shared between VMs running a variety of services in hello Azure infrastructure.</span></span> <span data-ttu-id="3be31-593">И, как и центрах обработки данных клиента собственные hello избыточная Подготовка некоторые ресурсы инфраструктуры hello степень tooa месте.</span><span class="sxs-lookup"><span data-stu-id="3be31-593">And just as in hello customer’s own data centers, over-provisioning of some of hello infrastructure resources does take place tooa degree.</span></span> <span data-ttu-id="3be31-594">Hello платформе Microsoft Azure использует диска, ЦП, сети и другие потребления ресурсов квоты toolimit hello и toopreserve постоянной и определенной производительности.</span><span class="sxs-lookup"><span data-stu-id="3be31-594">hello Microsoft Azure Platform uses disk, CPU, network, and other quotas toolimit hello resource consumption and toopreserve consistent and deterministic performance.</span></span>  <span data-ttu-id="3be31-595">Hello разных типов ВМ (A5, A6, т. д.) имеют разные квоты hello количество дисков, ЦП, оперативной памяти и сети.</span><span class="sxs-lookup"><span data-stu-id="3be31-595">hello different VM types (A5, A6, etc.) have different quotas for hello number of disks, CPU, RAM, and Network.</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-596">Ресурсы ЦП и памяти hello типов ВМ, поддерживаемых SAP, предварительно выделяются в узлах hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-596">CPU and memory resources of hello VM types supported by SAP are pre-allocated on hello host nodes.</span></span> <span data-ttu-id="3be31-597">Это означает, что после развертывания виртуальной Машины hello hello на узле hello доступных ресурсов в соответствии с определением hello типа ВМ.</span><span class="sxs-lookup"><span data-stu-id="3be31-597">This means that once hello VM is deployed, hello resources on hello host are available as defined by hello VM type.</span></span>
>
>

<span data-ttu-id="3be31-598">Необходимо учитывать при планировании и определении размеров SAP в решениях Azure hello квоты для размера виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-598">When planning and sizing SAP on Azure solutions hello quotas for each virtual machine size must be considered.</span></span> <span data-ttu-id="3be31-599">описываются квот для VM Hello [здесь (Linux)] [ virtual-machines-sizes-linux] и [здесь (Windows)][virtual-machines-sizes-windows].</span><span class="sxs-lookup"><span data-stu-id="3be31-599">hello VM quotas are described [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="3be31-600">Hello квоты представляют теоретические максимальные значения hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-600">hello quotas described represent hello theoretical maximum values.</span></span>  <span data-ttu-id="3be31-601">Hello ограничение операций ввода-ВЫВОДА на диске могут быть реализованы с небольшими операциями (8 КБ), но возможно не могут быть реализованы с большими операциями (1 МБ).</span><span class="sxs-lookup"><span data-stu-id="3be31-601">hello limit of IOPS per disk may be achieved with small IOs (8kb) but possibly may not be achieved with large IOs (1Mb).</span></span>  <span data-ttu-id="3be31-602">ограничения IOP Hello обеспечивается при детализации hello одного диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-602">hello IOPS limit is enforced on hello granularity of single disk.</span></span>

<span data-ttu-id="3be31-603">Toodecide дерева грубого принятия решений ли система SAP размещается в службах виртуальных машин Azure и ее возможностях или существующей системы должен toobe настроены по-разному в системе hello toodeploy заказа в Azure, дерево принятия решений hello может использоваться как:</span><span class="sxs-lookup"><span data-stu-id="3be31-603">As a rough decision tree toodecide whether an SAP system fits into Azure Virtual Machine Services and its capabilities or whether an existing system needs toobe configured differently in order toodeploy hello system on Azure, hello decision tree below can be used:</span></span>

![Возможность toodecide toodeploy SAP в Azure для принятия решений дерева][planning-guide-figure-700]

<span data-ttu-id="3be31-605">**Шаг 1**: hello наиболее важные сведения toostart с является hello требования SAP для конкретной системы SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-605">**Step 1**: hello most important information toostart with is hello SAPS requirement for a given SAP system.</span></span> <span data-ttu-id="3be31-606">Hello SAPS требования к необходимости toobe выделены в СУБД hello и части приложения SAP hello, даже если hello система SAP уже развернута локально в двухуровневой конфигурации.</span><span class="sxs-lookup"><span data-stu-id="3be31-606">hello SAPS requirements need toobe separated out into hello DBMS part and hello SAP application part, even if hello SAP system is already deployed on-premises in a 2-tier configuration.</span></span> <span data-ttu-id="3be31-607">Для существующих систем hello, SAPS связанные toohello оборудование часто можно определить или оценка на основании имеющихся измерений производительности SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-607">For existing systems, hello SAPS related toohello hardware in use often can be determined or estimated based on existing SAP benchmarks.</span></span> <span data-ttu-id="3be31-608">Hello результаты можно найти здесь: <http://global.sap.com/campaigns/benchmark/index.epx>.</span><span class="sxs-lookup"><span data-stu-id="3be31-608">hello results can be found here: <http://global.sap.com/campaigns/benchmark/index.epx>.</span></span>
<span data-ttu-id="3be31-609">Для новых разворачиваемых систем SAP следует проверены задачу определения размеров, которую следует определить требования hello SAP к системе hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-609">For newly deployed SAP systems, you should have gone through a sizing exercise, which should determine hello SAPS requirements of hello system.</span></span>
<span data-ttu-id="3be31-610">См. также этот блог и вложенный документ по размерам SAP в Azure: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx>.</span><span class="sxs-lookup"><span data-stu-id="3be31-610">See also this blog and attached document for SAP sizing on Azure: <http://blogs.msdn.com/b/saponsqlserver/archive/2015/12/01/new-white-paper-on-sizing-sap-solutions-on-azure-public-cloud.aspx></span></span>

<span data-ttu-id="3be31-611">**Шаг 2**: для существующих систем hello операций ввода-вывода и операций ввода-вывода в секунду на сервере СУБД hello должна измеряться.</span><span class="sxs-lookup"><span data-stu-id="3be31-611">**Step 2**: For existing systems, hello I/O volume and I/O operations per second on hello DBMS server should be measured.</span></span> <span data-ttu-id="3be31-612">Для только планируемых систем hello, изменение размера упражнения для hello новой системы также должна дать общее представление о hello требования ввода-вывода на стороне СУБД hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-612">For newly planned systems, hello sizing exercise for hello new system also should give rough ideas of hello I/O requirements on hello DBMS side.</span></span> <span data-ttu-id="3be31-613">Если нет уверенности, рано или поздно tooconduct экспериментальную.</span><span class="sxs-lookup"><span data-stu-id="3be31-613">If unsure, you eventually need tooconduct a Proof of Concept.</span></span>

<span data-ttu-id="3be31-614">**Шаг 3**: требования SAP hello сравнения для сервера СУБД с hello SAPS hello разные типы ВМ можно предоставить hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-614">**Step 3**: Compare hello SAPS requirement for hello DBMS server with hello SAPS hello different VM types of Azure can provide.</span></span> <span data-ttu-id="3be31-615">Hello сведения по системам SAP hello разных типах ВМ Azure, задокументированы в примечании SAP [1928533].</span><span class="sxs-lookup"><span data-stu-id="3be31-615">hello information on SAPS of hello different Azure VM types is documented in SAP Note [1928533].</span></span> <span data-ttu-id="3be31-616">Hello необходимо уделить внимание ВМ СУБД hello сначала, так как уровень hello базы данных — hello слоев в системе SAP NetWeaver, который не масштабируется в большинстве развертываний hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-616">hello focus should be on hello DBMS VM first since hello database layer is hello layer in an SAP NetWeaver system that does not scale out in hello majority of deployments.</span></span> <span data-ttu-id="3be31-617">Напротив hello уровня приложения SAP может масштабироваться. Если ни один из hello SAP поддерживается типах ВМ Azure может обеспечить SAPS необходимые hello, hello рабочую нагрузку системы SAP запланированный hello не может выполняться в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-617">In contrast, hello SAP application layer can be scaled out. If none of hello SAP supported Azure VM types can deliver hello required SAPS, hello workload of hello planned SAP system can’t be run on Azure.</span></span> <span data-ttu-id="3be31-618">Вы должны либо toodeploy hello системы в локальной или требуется объем рабочей нагрузки hello toochange для hello системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-618">You either need toodeploy hello system on-premises or you need toochange hello workload volume for hello system.</span></span>

<span data-ttu-id="3be31-619">**Шаг 4**. Как описано [здесь (Linux)][virtual-machines-sizes-linux] и [здесь (Windows)][virtual-machines-sizes-windows], Azure применяет квоту на количество операций ввода-вывода в секунду для каждого диска как в хранилище уровня Standard, так и в хранилище уровня Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-619">**Step 4**: As documented [here (Linux)][virtual-machines-sizes-linux] and [here (Windows)][virtual-machines-sizes-windows], Azure enforces an IOPS quota per disk independent whether you use Standard Storage or Premium Storage.</span></span> <span data-ttu-id="3be31-620">Зависит от типа ВМ hello, hello количество дисков данных, которые могут быть подключены зависит.</span><span class="sxs-lookup"><span data-stu-id="3be31-620">Dependent on hello VM type, hello number of data disks, which can be mounted varies.</span></span> <span data-ttu-id="3be31-621">В результате можно вычислить максимальное число операций ввода-ВЫВОДА, которую можно достичь с каждым из типов ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-621">As a result, you can calculate a maximum IOPS number that can be achieved with each of hello different VM types.</span></span> <span data-ttu-id="3be31-622">Зависит от структуры файлов базы данных hello, вы можете создать чередующийся дисков toobecome один том в hello гостевой ОС.</span><span class="sxs-lookup"><span data-stu-id="3be31-622">Dependent on hello database file layout, you can stripe disks toobecome one volume in hello guest OS.</span></span> <span data-ttu-id="3be31-623">Однако если hello текущего операций ввода-ВЫВОДА тома в развернутой системе SAP превышает ограничения hello вычисляется hello крупного типа ВМ в Azure и не toocompensate вероятность с большим объемом памяти, рабочей нагрузки hello hello системы SAP может серьезно повлиять.</span><span class="sxs-lookup"><span data-stu-id="3be31-623">However, if hello current IOPS volume of a deployed SAP system exceeds hello calculated limits of hello largest VM type of Azure and if there is no chance toocompensate with more memory, hello workload of hello SAP system can be impacted severely.</span></span> <span data-ttu-id="3be31-624">В таких случаях можно нажать точки, где не следует развертывать hello системы в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-624">In such cases, you can hit a point where you should not deploy hello system on Azure.</span></span>

<span data-ttu-id="3be31-625">**Шаг 5**: особенно в системах SAP, который локально в двухуровневой конфигурации развертываются, hello скорее всего, что hello системы может потребоваться toobe, настроенный в Azure в трехуровневую конфигурацию.</span><span class="sxs-lookup"><span data-stu-id="3be31-625">**Step 5**: Especially in SAP systems, which are deployed on-premises in 2-Tier configurations, hello chances are that hello system might need toobe configured on Azure in a 3-Tier configuration.</span></span> <span data-ttu-id="3be31-626">На этом шаге необходимо toocheck есть ли компонент в уровне приложения hello SAP, который нельзя масштабировать и который не может поместиться в hello ЦП и памяти, что ресурсы hello другое предложение типов ВМ Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-626">In this step, you need toocheck whether there is a component in hello SAP application layer, which can’t be scaled out and which would not fit into hello CPU and memory resources hello different Azure VM types offer.</span></span> <span data-ttu-id="3be31-627">Если на самом деле такой компонент, hello системы SAP и ее рабочей нагрузки нельзя развернуть в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-627">If there indeed is such a component, hello SAP system and its workload can’t be deployed into Azure.</span></span> <span data-ttu-id="3be31-628">Но если компоненты приложения SAP hello можно масштабировать по нескольким ВМ Azure, hello систему можно развернуть в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-628">But if you can scale out hello SAP application components into multiple Azure VMs, hello system can be deployed into Azure.</span></span>

<span data-ttu-id="3be31-629">**Шаг 6**: Если hello СУБД и компоненты уровня приложения SAP может работать на виртуальных машинах Azure, hello конфигурации необходимы определенные относится к toobe:</span><span class="sxs-lookup"><span data-stu-id="3be31-629">**Step 6**: If hello DBMS and SAP application layer components can be run in Azure VMs, hello configuration needs toobe defined with regard to:</span></span>

* <span data-ttu-id="3be31-630">количество виртуальных машин Azure;</span><span class="sxs-lookup"><span data-stu-id="3be31-630">Number of Azure VMs</span></span>
* <span data-ttu-id="3be31-631">Типов ВМ для отдельных компонентов hello</span><span class="sxs-lookup"><span data-stu-id="3be31-631">VM types for hello individual components</span></span>
* <span data-ttu-id="3be31-632">Число VHD в ВМ СУБД tooprovide достаточное количество операций ввода-ВЫВОДА</span><span class="sxs-lookup"><span data-stu-id="3be31-632">Number of VHDs in DBMS VM tooprovide enough IOPS</span></span>

## <a name="managing-azure-assets"></a><span data-ttu-id="3be31-633">Управление ресурсами Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-633">Managing Azure Assets</span></span>
### <a name="azure-portal"></a><span data-ttu-id="3be31-634">Портал Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-634">Azure Portal</span></span>
<span data-ttu-id="3be31-635">Hello портал Azure является одним из трех развертывания ВМ Azure toomanage интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="3be31-635">hello Azure portal is one of three interfaces toomanage Azure VM deployments.</span></span> <span data-ttu-id="3be31-636">Hello базовые задачи управления, такие как развертывание ВМ из образов, можно сделать с помощью портала Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-636">hello basic management tasks, like deploying VMs from images, can be done through hello Azure portal.</span></span> <span data-ttu-id="3be31-637">Кроме того, hello создания учетных записей хранения, виртуальных сетей, и других компонентах Azure также также может обрабатывать задачи hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-637">In addition, hello creation of Storage Accounts, Virtual Networks, and other Azure components are also tasks hello Azure portal can handle very well.</span></span> <span data-ttu-id="3be31-638">Тем не менее функции, как отправка VHD из локальной tooAzure или копирование VHD в Azure — задачи, которые требуют сторонних средств или администрирование с помощью PowerShell или интерфейс командной строки.</span><span class="sxs-lookup"><span data-stu-id="3be31-638">However, functionality like uploading VHDs from on-premises tooAzure or copying a VHD within Azure are tasks, which require either third-party tools or administration through PowerShell or CLI.</span></span>

![Портал Microsoft Azure, обзор виртуальных машин][planning-guide-figure-800]

[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-networks-create-vnet-arm-pportal/>)
[comment]: <> (MSSedusch * <https://azure.microsoft.com/documentation/articles/virtual-machines-windows-tutorial/>)

<span data-ttu-id="3be31-642">Задачи администрирования и конфигурации для экземпляра виртуальной машины hello возможны в пределах hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-642">Administration and configuration tasks for hello Virtual Machine instance are possible from within hello Azure portal.</span></span>

<span data-ttu-id="3be31-643">Помимо перезапуска и завершения работы виртуальной машины можно также присоединить, отсоединить и создавать диски данных для экземпляра виртуальной машины hello, toocapture hello экземпляр для подготовки образа и настройте размер hello hello экземпляр виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-643">Besides restarting and shutting down a Virtual Machine you can also attach, detach, and create data disks for hello Virtual Machine instance, toocapture hello instance for image preparation and configure hello size of hello Virtual Machine instance.</span></span>

<span data-ttu-id="3be31-644">Hello портал Azure предоставляет базовые функциональные возможности toodeploy и настройка виртуальных машин и многих других служб Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-644">hello Azure portal provides basic functionality toodeploy and configure VMs and many other Azure services.</span></span> <span data-ttu-id="3be31-645">Однако не вся доступная функциональность охватывается hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-645">However not all available functionality is covered by hello Azure portal.</span></span> <span data-ttu-id="3be31-646">В hello портал Azure нет возможности tooperform задачи, такие как:</span><span class="sxs-lookup"><span data-stu-id="3be31-646">In hello Azure portal, it’s not possible tooperform tasks like:</span></span>

* <span data-ttu-id="3be31-647">Отправка tooAzure виртуальных жестких дисков</span><span class="sxs-lookup"><span data-stu-id="3be31-647">Uploading VHDs tooAzure</span></span>
* <span data-ttu-id="3be31-648">копирование виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-648">Copying VMs</span></span>

[comment]: <> (MShermannd, TODO: как насчет службы автоматизации для виртуальных машин SAP? )
[comment]: <> (MSSedusch: пока что можно развернуть виртуальные машины с несколькими ОС)
[comment]: <> (Также MSSedusch автоматизация относительно развертывания не поддерживается с hello портал Azure. Задачи, такие как развертыванию нескольких виртуальных машин не поддерживается через портал Azure hello.)

### <a name="management-via-microsoft-azure-powershell-cmdlets"></a><span data-ttu-id="3be31-652">Управление с помощью командлетов Microsoft Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-652">Management via Microsoft Azure PowerShell cmdlets</span></span>
<span data-ttu-id="3be31-653">Windows PowerShell — это мощная и расширяемая платформа, широко используемая клиентами для большого количества систем, развернутых в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-653">Windows PowerShell is a powerful and extensible framework that has been widely adopted by customers deploying larger numbers of systems in Azure.</span></span> <span data-ttu-id="3be31-654">После установки hello командлетов PowerShell на компьютер, ноутбук или выделенную станцию управления командлеты PowerShell hello может выполняться удаленно.</span><span class="sxs-lookup"><span data-stu-id="3be31-654">After hello installation of PowerShell cmdlets on a desktop, laptop or dedicated management station, hello PowerShell cmdlets can be run remotely.</span></span>

<span data-ttu-id="3be31-655">Здравствуйте tooenable процесса локальном компьютере или ноутбуке hello использования командлетов Azure PowerShell и tooconfigure Здравствуйте, для использования с hello Azure подписок — это описано в разделе [в этой статье][powershell-install-configure].</span><span class="sxs-lookup"><span data-stu-id="3be31-655">hello process tooenable a local desktop/laptop for hello usage of Azure PowerShell cmdlets and how tooconfigure those for hello usage with hello Azure subscription(s) is described in [this article][powershell-install-configure].</span></span>

<span data-ttu-id="3be31-656">Более подробное описание действий, как tooinstall, обновления и настроить hello командлетов Azure PowerShell можно найти также в [в этой главе hello руководство по развертыванию][deployment-guide-4.1].</span><span class="sxs-lookup"><span data-stu-id="3be31-656">More detailed steps on how tooinstall, update, and configure hello Azure PowerShell cmdlets can also be found in [this chapter of hello Deployment Guide][deployment-guide-4.1].</span></span>

<span data-ttu-id="3be31-657">Клиент до сих опыту, PowerShell (PS) безусловно является hello более мощные средства toodeploy виртуальных машин и toocreate пользовательские шаги в hello развертывания виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-657">Customer experience so far has been that PowerShell (PS) is certainly hello more powerful tool toodeploy VMs and toocreate custom steps in hello deployment of VMs.</span></span> <span data-ttu-id="3be31-658">Toosupplement управления командлеты PS задачи, они в hello портал Azure или даже использовали командлеты PS всех клиентов hello работающих экземпляров SAP в Azure используются исключительно toomanage их развертывания в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-658">All of hello customers running SAP instances in Azure are using PS cmdlets toosupplement management tasks they do in hello Azure portal or are even using PS cmdlets exclusively toomanage their deployments in Azure.</span></span> <span data-ttu-id="3be31-659">Так как общий ресурс командлеты Azure конкретных hello hello же соглашение об именовании как hello более 2000 командлетов для Windows, это простая задача для администраторов tooleverage Windows эти командлеты.</span><span class="sxs-lookup"><span data-stu-id="3be31-659">Since hello Azure-specific cmdlets share hello same naming convention as hello more than 2000 Windows-related cmdlets, it is an easy task for Windows administrators tooleverage those cmdlets.</span></span>

<span data-ttu-id="3be31-660">См. пример: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span><span class="sxs-lookup"><span data-stu-id="3be31-660">See example here: <http://blogs.technet.com/b/keithmayer/archive/2015/07/07/18-steps-for-end-to-end-iaas-provisioning-in-the-cloud-with-azure-resource-manager-arm-powershell-and-desired-state-configuration-dsc.aspx></span></span>

[comment]: <> (MShermannd, TODO: описывайте новые команды интерфейса командной строки при тестировании )
<span data-ttu-id="3be31-662">Развертывание расширения мониторинга Azure для SAP hello (в главе [решение мониторинга Azure для SAP] [ planning-guide-9.1] в этом документе) возможен только через PowerShell или интерфейс командной строки.</span><span class="sxs-lookup"><span data-stu-id="3be31-662">Deployment of hello Azure Monitoring Extension for SAP (see chapter [Azure Monitoring Solution for SAP][planning-guide-9.1] in this document) is only possible via PowerShell or CLI.</span></span> <span data-ttu-id="3be31-663">Таким образом работает обязательные tooset и настроить PowerShell или интерфейс командной строки при развертывании или администрировании системы SAP NetWeaver в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-663">Therefore it is mandatory tooset up and configure PowerShell or CLI when deploying or administering an SAP NetWeaver system in Azure.</span></span>  

<span data-ttu-id="3be31-664">Как Azure предоставляет дополнительные функциональные возможности, новые командлеты PS реально добавленными toobe, что требует обновления командлетов hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-664">As Azure provides more functionality, new PS cmdlets are going toobe added that requires an update of hello cmdlets.</span></span> <span data-ttu-id="3be31-665">Таким образом он делает hello toocheck смысле веб-сайте загрузки Azure по крайней мере один раз в месяц hello <https://azure.microsoft.com/downloads/> для новой версии hello командлетов.</span><span class="sxs-lookup"><span data-stu-id="3be31-665">Therefore it makes sense toocheck hello Azure Download site at least once hello month <https://azure.microsoft.com/downloads/> for a new version of hello cmdlets.</span></span> <span data-ttu-id="3be31-666">Hello новая версия устанавливается поверх старой версии hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-666">hello new version is installed on top of hello older version.</span></span>

<span data-ttu-id="3be31-667">Общий список команд PowerShell, связанных с Azure, см. здесь: <https://docs.microsoft.com/powershell/azure/overview>.</span><span class="sxs-lookup"><span data-stu-id="3be31-667">For a general list of Azure-related PowerShell commands check here: <https://docs.microsoft.com/powershell/azure/overview>.</span></span>

### <a name="management-via-microsoft-azure-cli-commands"></a><span data-ttu-id="3be31-668">Управление с помощью интерфейса командной строки Microsoft Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-668">Management via Microsoft Azure CLI commands</span></span>
<span data-ttu-id="3be31-669">Для клиентов, Linux и данные toomanage Azure Powershell ресурсов может оказаться параметр.</span><span class="sxs-lookup"><span data-stu-id="3be31-669">For customers who use Linux and want toomanage Azure resources Powershell might not be an option.</span></span> <span data-ttu-id="3be31-670">Корпорация Майкрософт предлагает в качестве альтернативы интерфейс командной строки Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-670">Microsoft offers Azure CLI as an alternative.</span></span>
<span data-ttu-id="3be31-671">Hello Azure CLI предоставляет набор с открытым исходным кодом кросс платформенных команды для работы с hello платформы Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-671">hello Azure CLI provides a set of open source, cross-platform commands for working with hello Azure Platform.</span></span> <span data-ttu-id="3be31-672">Hello Azure CLI предоставляет большую часть hello же функциональные возможности, найденные в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-672">hello Azure CLI provides much of hello same functionality found in hello Azure portal.</span></span>

<span data-ttu-id="3be31-673">Сведения об установке, настройке и как toouse CLI команды tooaccomplish Azure задания см.</span><span class="sxs-lookup"><span data-stu-id="3be31-673">For information about installation, configuration and how toouse CLI commands tooaccomplish Azure tasks see</span></span>

* <span data-ttu-id="3be31-674">[Установка hello Azure CLI][xplat-cli]</span><span class="sxs-lookup"><span data-stu-id="3be31-674">[Install hello Azure CLI][xplat-cli]</span></span>
* <span data-ttu-id="3be31-675">[Развертывание и управление виртуальными машинами с помощью шаблонов диспетчера ресурсов Azure и Azure CLI hello] [.. /.. / linux/create-ssh-secured-vm-from-template.md]</span><span class="sxs-lookup"><span data-stu-id="3be31-675">[Deploy and manage virtual machines by using Azure Resource Manager templates and hello Azure CLI][../../linux/create-ssh-secured-vm-from-template.md]</span></span>
* <span data-ttu-id="3be31-676">[Использовать hello Azure CLI для Mac, Linux и Windows с помощью диспетчера ресурсов Azure][xplat-cli-azure-resource-manager]</span><span class="sxs-lookup"><span data-stu-id="3be31-676">[Use hello Azure CLI for Mac, Linux, and Windows with Azure Resource Manager][xplat-cli-azure-resource-manager]</span></span>

<span data-ttu-id="3be31-677">Также ознакомьтесь с главой [Azure CLI для виртуальных машин Linux] [ deployment-guide-4.5.2] в hello [руководство по развертыванию] [ planning-guide] на как toodeploy toouse Azure CLI hello мониторинга Azure Расширение для SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-677">Also read chapter [Azure CLI for Linux VMs][deployment-guide-4.5.2] in hello [Deployment Guide][planning-guide] on how toouse Azure CLI toodeploy hello Azure Monitoring Extension for SAP.</span></span>

## <a name="different-ways-toodeploy-vms-for-sap-in-azure"></a><span data-ttu-id="3be31-678">Различные способы toodeploy ВМ для SAP в Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-678">Different ways toodeploy VMs for SAP in Azure</span></span>
<span data-ttu-id="3be31-679">В этой главе сведения различными способами hello toodeploy ВМ в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-679">In this chapter, you learn hello different ways toodeploy a VM in Azure.</span></span> <span data-ttu-id="3be31-680">Также здесь рассматриваются дополнительные процедуры подготовки и процессы управления виртуальными жесткими дисками и виртуальными машинами в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-680">Additional preparation procedures, as well as handling of VHDs and VMs in Azure are covered in this chapter.</span></span>

### <a name="deployment-of-vms-for-sap"></a><span data-ttu-id="3be31-681">Развертывание виртуальных машин для SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-681">Deployment of VMs for SAP</span></span>
<span data-ttu-id="3be31-682">Microsoft Azure предлагает несколько способов toodeploy ВМ и связанные диски.</span><span class="sxs-lookup"><span data-stu-id="3be31-682">Microsoft Azure offers multiple ways toodeploy VMs and associated disks.</span></span> <span data-ttu-id="3be31-683">Таким образом будет различия hello toounderstand очень важен, так как действия по подготовке виртуальных машин hello могут отличаться в зависимости от метода развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-683">Thus it is very important toounderstand hello differences since preparations of hello VMs might differ depending on hello method of deployment.</span></span> <span data-ttu-id="3be31-684">Как правило мы рассмотрим hello следующие сценарии:</span><span class="sxs-lookup"><span data-stu-id="3be31-684">In general, we take a look at hello following scenarios:</span></span>

#### <span data-ttu-id="3be31-685"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Перемещение ВМ из локальной tooAzure с помощью специализированного диска</span><span class="sxs-lookup"><span data-stu-id="3be31-685"><a name="4d175f1b-7353-4137-9d2f-817683c26e53"></a>Moving a VM from on-premises tooAzure with a non-generalized disk</span></span>
<span data-ttu-id="3be31-686">При планировании toomove определенную систему SAP из локальной tooAzure.</span><span class="sxs-lookup"><span data-stu-id="3be31-686">You plan toomove a specific SAP system from on-premises tooAzure.</span></span> <span data-ttu-id="3be31-687">Это можно сделать путем отправки hello виртуальный жесткий ДИСК, содержащий hello ОС, hello двоичные файлы SAP и двоичные файлы СУБД и hello виртуальные жесткие диски с файлами данных и журналов hello объекта tooAzure СУБД hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-687">This can be done by uploading hello VHD, which contains hello OS, hello SAP Binaries, and DBMS binaries plus hello VHDs with hello data and log files of hello DBMS tooAzure.</span></span> <span data-ttu-id="3be31-688">В отличие от слишком[сценария #2 ниже][planning-guide-5.1.2]оставьте имя узла hello, ИД безопасности SAP, а SAP учетные записи пользователей в виртуальной Машине Azure hello как они были настроены в локальной среде hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-688">In contrast too[scenario #2 below][planning-guide-5.1.2], you keep hello hostname, SAP SID, and SAP user accounts in hello Azure VM as they were configured in hello on-premises environment.</span></span> <span data-ttu-id="3be31-689">Таким образом обобщение hello образ не является обязательным.</span><span class="sxs-lookup"><span data-stu-id="3be31-689">Therefore, generalizing hello image is not necessary.</span></span> <span data-ttu-id="3be31-690">В разделе главы [подготовки к перемещению ВМ из локальной tooAzure с помощью специализированного диска] [ planning-guide-5.2.1] этого документа в локальной среде действий по подготовке и отправке специализированного tooAzure виртуальных машин или виртуальные жесткие диски.</span><span class="sxs-lookup"><span data-stu-id="3be31-690">See chapters [Preparation for moving a VM from on-premises tooAzure with a non-generalized disk][planning-guide-5.2.1] of this document for on-premises preparation steps and upload of non-generalized VMs or VHDs tooAzure.</span></span> <span data-ttu-id="3be31-691">Глава чтения [сценарий 3: перемещение ВМ из локально с помощью специализированного VHD Azure с SAP] [ deployment-guide-3.4] в hello [руководство по развертыванию] [ deployment-guide] Подробные инструкции по развертыванию такого образа в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-691">Read chapter [Scenario 3: Moving a VM from on-premises using a non-generalized Azure VHD with SAP][deployment-guide-3.4] in hello [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <span data-ttu-id="3be31-692"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Развертывание виртуальной машины с помощью пользовательского образа</span><span class="sxs-lookup"><span data-stu-id="3be31-692"><a name="e18f7839-c0e2-4385-b1e6-4538453a285c"></a>Deploying a VM with a customer-specific image</span></span>
<span data-ttu-id="3be31-693">Из-за требований исправлениям toospecific вашей версии ОС или СУБД образы предоставленный hello в hello Azure Marketplace могут не соответствовать вашим потребностям.</span><span class="sxs-lookup"><span data-stu-id="3be31-693">Due toospecific patch requirements of your OS or DBMS version, hello provided images in hello Azure Marketplace might not fit your needs.</span></span> <span data-ttu-id="3be31-694">Таким образом может потребоваться toocreate ВМ с помощью собственного «private» образа ОС или СУБД виртуальной Машины, который можно разворачивать многократно.</span><span class="sxs-lookup"><span data-stu-id="3be31-694">Therefore, you might need toocreate a VM using your own ‘private’ OS/DBMS VM image, which can be deployed several times afterwards.</span></span> <span data-ttu-id="3be31-695">tooprepare такой «свой» образ для дублирования hello следующих элементов имеют считается toobe:</span><span class="sxs-lookup"><span data-stu-id="3be31-695">tooprepare such a ‘private’ image for duplication, hello following items have toobe considered:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-697">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-697">Windows</span></span>
>
> <span data-ttu-id="3be31-698">Здесь Дополнительные сведения см. в разделе: <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> параметры Windows hello (такие как идентификатор безопасности Windows и имя узла) необходимо задать абстрагированные/универсальные на hello локально Виртуальная машина с помощью команды sysprep hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-698">See more details here: <https://docs.microsoft.com/azure/virtual-machines/windows/upload-generalized-managed> hello Windows settings (like Windows SID and hostname) must be abstracted/generalized on hello on-premises VM via hello sysprep command.</span></span>
>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-700">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-700">Linux</span></span>
>
> <span data-ttu-id="3be31-701">Выполните hello действия, описанные в следующих статьях для [SUSE][virtual-machines-linux-create-upload-vhd-suse], [Red Hat][virtual-machines-linux-redhat-create-upload-vhd], или [Oracle Linux] [ virtual-machines-linux-create-upload-vhd-oracle], tooprepare toobe виртуальный жесткий ДИСК отправлен tooAzure.</span><span class="sxs-lookup"><span data-stu-id="3be31-701">Follow hello steps described in these articles for [SUSE][virtual-machines-linux-create-upload-vhd-suse], [Red Hat][virtual-machines-linux-redhat-create-upload-vhd], or [Oracle Linux][virtual-machines-linux-create-upload-vhd-oracle], tooprepare a VHD toobe uploaded tooAzure.</span></span>
>
>

- - -
<span data-ttu-id="3be31-702">Если вы уже установили содержимое SAP в локальной виртуальной Машины (особенно для двухуровневых систем), hello параметры системы SAP можно адаптировать после развертывания hello hello виртуальной Машине Azure через экземпляр hello переименовать процедуру, поддерживаемых hello подготовки программного обеспечения SAP Диспетчер (Примечание SAP [1619720]).</span><span class="sxs-lookup"><span data-stu-id="3be31-702">If you have already installed SAP content in your on-premises VM (especially for 2-Tier systems), you can adapt hello SAP system settings after hello deployment of hello Azure VM through hello instance rename procedure supported by hello SAP Software Provisioning Manager (SAP Note [1619720]).</span></span> <span data-ttu-id="3be31-703">В разделе главы [Подготовка развертывания ВМ с определенным пользователем образа для SAP] [ planning-guide-5.2.2] и [Отправка VHD из локальной tooAzure] [ planning-guide-5.3.2]этого документа локальной действия по подготовке и процесса отправки обобщенный tooAzure виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-703">See chapters [Preparation for deploying a VM with a customer-specific image for SAP][planning-guide-5.2.2] and [Uploading a VHD from on-premises tooAzure][planning-guide-5.3.2] of this document for on-premises preparation steps and upload of a generalized VM tooAzure.</span></span> <span data-ttu-id="3be31-704">Глава чтения [сценарий 2: развертывание ВМ с помощью пользовательского образа для SAP] [ deployment-guide-3.3] в hello [руководство по развертыванию] [ deployment-guide] подробное описание шагов развертывания SAP NetWeaver в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-704">Read chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] in hello [Deployment Guide][deployment-guide] for detailed steps of deploying such an image in Azure.</span></span>

#### <a name="deploying-a-vm-out-of-hello-azure-marketplace"></a><span data-ttu-id="3be31-705">Развертывание ВМ из Azure Marketplace hello</span><span class="sxs-lookup"><span data-stu-id="3be31-705">Deploying a VM out of hello Azure Marketplace</span></span>
<span data-ttu-id="3be31-706">Вы хотели бы toouse корпорации Майкрософт или сторонних указанный образ ВМ из Azure Marketplace toodeploy hello ВМ.</span><span class="sxs-lookup"><span data-stu-id="3be31-706">You would like toouse a Microsoft or third-party provided VM image from hello Azure Marketplace toodeploy your VM.</span></span> <span data-ttu-id="3be31-707">После развертывания ВМ в Azure вы выполните hello же рекомендации и средства tooinstall hello программное обеспечение SAP или СУБД как это делается в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-707">After you deployed your VM in Azure, you follow hello same guidelines and tools tooinstall hello SAP software and/or DBMS inside your VM as you would do in an on-premises environment.</span></span> <span data-ttu-id="3be31-708">Более подробные описания развертывания, см. в разделе главы [сценария 1: развертывание ВМ из Azure Marketplace для SAP hello] [ deployment-guide-3.2] в hello [руководство по развертыванию] [ deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-708">For more detailed deployment description, please see chapter [Scenario 1: Deploying a VM out of hello Azure Marketplace for SAP][deployment-guide-3.2] in hello [Deployment Guide][deployment-guide].</span></span>

### <span data-ttu-id="3be31-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Подготовка виртуальных машин с SAP для Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-709"><a name="6ffb9f41-a292-40bf-9e70-8204448559e7"></a>Preparing VMs with SAP for Azure</span></span>
<span data-ttu-id="3be31-710">Перед отправкой виртуальных машин в Azure необходимо toomake том, что hello ВМ и VHD выполнить определенные требования.</span><span class="sxs-lookup"><span data-stu-id="3be31-710">Before uploading VMs into Azure you need toomake sure hello VMs and VHDs fulfill certain requirements.</span></span> <span data-ttu-id="3be31-711">Существуют небольшие различия в зависимости от используемого способа развертывания hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-711">There are small differences depending on hello deployment method that is used.</span></span>

#### <span data-ttu-id="3be31-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Подготовка к перемещению ВМ из локальной tooAzure с помощью специализированного диска</span><span class="sxs-lookup"><span data-stu-id="3be31-712"><a name="1b287330-944b-495d-9ea7-94b83aff73ef"></a>Preparation for moving a VM from on-premises tooAzure with a non-generalized disk</span></span>
<span data-ttu-id="3be31-713">Распространенный способ развертывания — toomove существующей виртуальной Машины, который запускается из tooAzure в локальной системе SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-713">A common deployment method is toomove an existing VM which runs an SAP system from on-premises tooAzure.</span></span> <span data-ttu-id="3be31-714">Здравствуйте того же имени узла виртуальной Машины и hello системы SAP в ВМ должны просто запускаться в Azure с помощью hello и скорее hello же ИД безопасности SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-714">That VM and hello SAP system in hello VM just should run in Azure using hello same hostname and very likely hello same SAP SID.</span></span> <span data-ttu-id="3be31-715">В этом случае hello гостевой операционной системы виртуальной Машины не быть обобщена для нескольких развертываний.</span><span class="sxs-lookup"><span data-stu-id="3be31-715">In this case hello guest OS of VM should not be generalized for multiple deployments.</span></span> <span data-ttu-id="3be31-716">Если hello локальная сеть расширяется до Azure (в главе [между организациями - развертывание одной или нескольких ВМ SAP в Azure с требованием hello полной интеграции с локальной сетью hello] [ planning-guide-2.2] в этом документе), затем даже hello учетные записи домена можно использовать в hello виртуальной Машины, которые использовались до локальной.</span><span class="sxs-lookup"><span data-stu-id="3be31-716">If hello on-premises network got extended into Azure (see chapter [cross-premises - Deployment of single or multiple SAP VMs into Azure with hello requirement of being fully integrated into hello on-premises network][planning-guide-2.2] in this document), then even hello same domain accounts can be used within hello VM as those were used before on-premises.</span></span>

<span data-ttu-id="3be31-717">Ниже перечислены требования для подготовки собственного диска виртуальной машины Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-717">Requirements when preparing your own Azure VM Disk are:</span></span>

* <span data-ttu-id="3be31-718">Первоначально hello VHD содержащей hello операционной системы может иметь максимальный размер 127 ГБ.</span><span class="sxs-lookup"><span data-stu-id="3be31-718">Originally hello VHD containing hello operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="3be31-719">Это ограничение получен исключено в конце hello марта 2015 г.</span><span class="sxs-lookup"><span data-stu-id="3be31-719">This limitation got eliminated at hello end of March 2015.</span></span> <span data-ttu-id="3be31-720">Теперь hello виртуальный жесткий ДИСК, содержащий hello операционной системы может быть вверх too1TB в размере, любые другие хранилища Azure также размещенного виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-720">Now hello VHD containing hello operating system can be up too1TB in size as any other Azure Storage hosted VHD as well.</span></span>
* <span data-ttu-id="3be31-721">Он должен toobe в фиксированный формат VHD hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-721">It needs toobe in hello fixed VHD format.</span></span> <span data-ttu-id="3be31-722">Динамические виртуальные жесткие диски и виртуальные жесткие диски в формате VHDx пока не поддерживаются в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-722">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="3be31-723">Динамические виртуальные жесткие диски будут преобразованный toostatic виртуальных жестких дисков при передаче hello виртуального жесткого диска с командлеты PowerShell или интерфейс командной строки</span><span class="sxs-lookup"><span data-stu-id="3be31-723">Dynamic VHDs will be converted toostatic VHDs when you upload hello VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="3be31-724">Виртуальные жесткие диски, которые toohello подключенных виртуальных Машин и должен устанавливаться в Azure toohello toobe необходимость виртуальной Машины в фиксированном формате VHD также.</span><span class="sxs-lookup"><span data-stu-id="3be31-724">VHDs which are mounted toohello VM and should be mounted again in Azure toohello VM need toobe in a fixed VHD format as well.</span></span> <span data-ttu-id="3be31-725">Сведения об ограничениях размеров дисков данных см. [в этой](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) (Linux) и [этой статье](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) (Windows).</span><span class="sxs-lookup"><span data-stu-id="3be31-725">Please read [this article (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) and [this article (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) for size limits of data disks.</span></span> <span data-ttu-id="3be31-726">Динамические виртуальные жесткие диски будут преобразованный toostatic виртуальных жестких дисков при передаче hello виртуального жесткого диска с командлеты PowerShell или интерфейс командной строки</span><span class="sxs-lookup"><span data-stu-id="3be31-726">Dynamic VHDs will be converted toostatic VHDs when you upload hello VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="3be31-727">Добавьте другую локальную учетную запись с правами администратора, которые могут использоваться службой поддержки Майкрософт или назначаться в качестве контекста для toorun служб и приложений в до hello, в котором развернута виртуальная машина и более подходящих пользователей можно использовать.</span><span class="sxs-lookup"><span data-stu-id="3be31-727">Add another local account with administrator privileges which can be used by Microsoft support or which can be assigned as context for services and applications toorun in until hello VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="3be31-728">Hello в случае использования сценария развертывания только для облака (в главе [только для облака — развертывания виртуальных машин в Azure без зависимостей от hello в локальной сети клиента] [ planning-guide-2.1] данного объекта документ) в сочетании с такого метода развертывания домену, учетные записи могут не работать после развертывания диска Azure hello в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-728">For hello case of using a Cloud-Only deployment scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on hello on-premises customer network][planning-guide-2.1] of this document) in combination with this deployment method, domain accounts might not work once hello Azure Disk is deployed in Azure.</span></span> <span data-ttu-id="3be31-729">Это особенно важно для учетных записей, используемых toorun служб, таких как приложения hello СУБД или SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-729">This is especially true for accounts which are used toorun services like hello DBMS or SAP applications.</span></span> <span data-ttu-id="3be31-730">Поэтому требуется tooreplace эти учетные записи домена, локальные учетные записи ВМ и удалить hello локальными учетными записями домена hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-730">Therefore you need tooreplace such domain accounts with VM local accounts and delete hello on-premises domain accounts in hello VM.</span></span> <span data-ttu-id="3be31-731">Сохранение локальных пользователей домена в образе виртуальной Машины hello не является проблемой при hello ВМ разворачивается в hello межсетевых локальных ресурсах, приведенные в главе [между организациями - развертывание одной или нескольких ВМ SAP в Azure с требованием hello, полностью интегрированы в локальную сеть hello] [ planning-guide-2.2] в настоящем документе.</span><span class="sxs-lookup"><span data-stu-id="3be31-731">Keeping on-premises domain users in hello VM image is not an issue when hello VM is deployed in hello cross-premises scenario as described in chapter [Cross-Premises - Deployment of single or multiple SAP VMs into Azure with hello requirement of being fully integrated into hello on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="3be31-732">Если учетные записи домена использовались в качестве имен входа СУБД или пользователям при выполнении hello системы в локальной среде и эти виртуальные машины должны toobe, развернутых в сценариях только для облака, пользователи домена hello должны toobe удалены.</span><span class="sxs-lookup"><span data-stu-id="3be31-732">If domain accounts were used as DBMS logins or users when running hello system on-premises and those VMs are supposed toobe deployed in Cloud-Only scenarios, hello domain users need toobe deleted.</span></span> <span data-ttu-id="3be31-733">Необходимо убедиться, что что hello локального администратора, а также другого локального пользователя ВМ добавляется в качестве имени входа или пользователя в СУБД как администраторов hello toomake.</span><span class="sxs-lookup"><span data-stu-id="3be31-733">You need toomake sure that hello local administrator plus another VM local user is added as a login/user into hello DBMS as administrators.</span></span>
* <span data-ttu-id="3be31-734">Добавьте другие локальные учетные записи, которые могут потребоваться для hello выбранного варианта развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-734">Add other local accounts as those might be needed for hello specific deployment scenario.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-736">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-736">Windows</span></span>
>
> <span data-ttu-id="3be31-737">В этом случае никакая универсализация (sysprep) ВМ hello необходимые tooupload и разверните hello ВМ в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-737">In this scenario no generalization (sysprep) of hello VM is required tooupload and deploy hello VM on Azure.</span></span>
> <span data-ttu-id="3be31-738">Убедитесь, что диск D:\ не используется.</span><span class="sxs-lookup"><span data-stu-id="3be31-738">Make sure that drive D:\ is not used.</span></span>
> <span data-ttu-id="3be31-739">Настройте автоподключение для подключенных дисков, как описано в разделе этого документа [Настройка автоподключения для подключенных дисков][planning-guide-5.5.3].</span><span class="sxs-lookup"><span data-stu-id="3be31-739">Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-741">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-741">Linux</span></span>
>
> <span data-ttu-id="3be31-742">В этом случае никакая универсализация (waagent-deprovision) является обязательным tooupload ВМ hello и развертывание hello ВМ в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-742">In this scenario no generalization (waagent -deprovision) of hello VM is required tooupload and deploy hello VM on Azure.</span></span>
> <span data-ttu-id="3be31-743">Убедитесь, что /mnt/resource не используется, и что все диски подключены через uuid.</span><span class="sxs-lookup"><span data-stu-id="3be31-743">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="3be31-744">Для диска ОС hello убедитесь, что запись hello также отражает подключения на основе uuid hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-744">For hello OS disk, make sure that hello bootloader entry also reflects hello uuid-based mount.</span></span>
>
>

- - -
#### <span data-ttu-id="3be31-745"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Подготовка виртуальной машины к развертыванию с помощью пользовательского образа для SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-745"><a name="57f32b1c-0cba-4e57-ab6e-c39fe22b6ec3"></a>Preparation for deploying a VM with a customer-specific image for SAP</span></span>
<span data-ttu-id="3be31-746">Файлы на виртуальном жестком диске, содержащие обобщенную ОС, также хранятся в контейнерах учетных записей хранения Azure или как образы управляемых дисков.</span><span class="sxs-lookup"><span data-stu-id="3be31-746">VHD files that contain a generalized OS are stored in containers on Azure Storage Accounts or as Managed Disk images.</span></span> <span data-ttu-id="3be31-747">Можно развернуть новую виртуальную Машину из такого образа с помощью ссылки на hello образа виртуального жесткого диска или дисков, управляемых как источник в файлах шаблона развертывания, как описано в главе [сценарий 2: развертывание ВМ с помощью пользовательского образа для SAP] [ deployment-guide-3.3]из hello [руководство по развертыванию][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-747">You can deploy a new VM from such an image by referencing hello VHD or Managed Disk image as a source in your deployment template files as described in chapter [Scenario 2: Deploying a VM with a custom image for SAP][deployment-guide-3.3] of hello [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="3be31-748">Ниже перечислены требования для подготовки собственного образа виртуальной машины Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-748">Requirements when preparing your own Azure VM Image are:</span></span>

* <span data-ttu-id="3be31-749">Первоначально hello VHD содержащей hello операционной системы может иметь максимальный размер 127 ГБ.</span><span class="sxs-lookup"><span data-stu-id="3be31-749">Originally hello VHD containing hello operating system could have a maximum size of 127GB only.</span></span> <span data-ttu-id="3be31-750">Это ограничение получен исключено в конце hello марта 2015 г.</span><span class="sxs-lookup"><span data-stu-id="3be31-750">This limitation got eliminated at hello end of March 2015.</span></span> <span data-ttu-id="3be31-751">Теперь hello виртуальный жесткий ДИСК, содержащий hello операционной системы может быть вверх too1TB в размере, любые другие хранилища Azure также размещенного виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-751">Now hello VHD containing hello operating system can be up too1TB in size as any other Azure Storage hosted VHD as well.</span></span>
* <span data-ttu-id="3be31-752">Он должен toobe в фиксированный формат VHD hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-752">It needs toobe in hello fixed VHD format.</span></span> <span data-ttu-id="3be31-753">Динамические виртуальные жесткие диски и виртуальные жесткие диски в формате VHDx пока не поддерживаются в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-753">Dynamic VHDs or VHDs in VHDx format are not yet supported on Azure.</span></span> <span data-ttu-id="3be31-754">Динамические виртуальные жесткие диски будут преобразованный toostatic виртуальных жестких дисков при передаче hello виртуального жесткого диска с командлеты PowerShell или интерфейс командной строки</span><span class="sxs-lookup"><span data-stu-id="3be31-754">Dynamic VHDs will be converted toostatic VHDs when you upload hello VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="3be31-755">Виртуальные жесткие диски, которые toohello подключенных виртуальных Машин и должен устанавливаться в Azure toohello toobe необходимость виртуальной Машины в фиксированном формате VHD также.</span><span class="sxs-lookup"><span data-stu-id="3be31-755">VHDs which are mounted toohello VM and should be mounted again in Azure toohello VM need toobe in a fixed VHD format as well.</span></span> <span data-ttu-id="3be31-756">Сведения об ограничениях размеров дисков данных см. [в этой](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) (Linux) и [этой статье](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) (Windows).</span><span class="sxs-lookup"><span data-stu-id="3be31-756">Please read [this article (Linux)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-linux) and [this article (Windows)](https://docs.microsoft.com/azure/storage/storage-about-disks-and-vhds-windows) for size limits of data disks.</span></span> <span data-ttu-id="3be31-757">Динамические виртуальные жесткие диски будут преобразованный toostatic виртуальных жестких дисков при передаче hello виртуального жесткого диска с командлеты PowerShell или интерфейс командной строки</span><span class="sxs-lookup"><span data-stu-id="3be31-757">Dynamic VHDs will be converted toostatic VHDs when you upload hello VHD with PowerShell commandlets or CLI</span></span>
* <span data-ttu-id="3be31-758">Поскольку все hello пользователей домена, зарегистрированную в качестве пользователей в hello виртуальной Машины не существует в сценарии только для облака (в главе [только для облака — развертывания виртуальных машин в Azure без зависимостей от hello в локальной сети клиента] [ planning-guide-2.1] этого документа), службы, с помощью такого домена, учетные записи могут не работать после развертывания hello образа в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-758">Since all hello Domain users registered as users in hello VM will not exist in a Cloud-Only scenario (see chapter [Cloud-Only - Virtual Machine deployments into Azure without dependencies on hello on-premises customer network][planning-guide-2.1] of this document), services using such domain accounts might not work once hello Image is deployed in Azure.</span></span> <span data-ttu-id="3be31-759">Это особенно важно для учетных записей, используемых toorun служб, таких как СУБД или приложений SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-759">This is especially true for accounts which are used toorun services like DBMS or SAP applications.</span></span> <span data-ttu-id="3be31-760">Поэтому требуется tooreplace эти учетные записи домена, локальные учетные записи ВМ и удалить hello локальными учетными записями домена hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-760">Therefore you need tooreplace such domain accounts with VM local accounts and delete hello on-premises domain accounts in hello VM.</span></span> <span data-ttu-id="3be31-761">Сохранение локальных пользователей домена в образе виртуальной Машины hello может не возникнуть проблемы, если ВМ разворачивается в hello hello межсетевых локальных ресурсах, приведенные в главе [между организациями - развертывание одной или нескольких ВМ SAP в Azure с требованием hello полной интеграции с локальной сетью hello] [ planning-guide-2.2] в настоящем документе.</span><span class="sxs-lookup"><span data-stu-id="3be31-761">Keeping on-premises domain users in hello VM image might not be an issue when hello VM is deployed in hello cross-premises scenario as described in chapter [Cross-Premises - Deployment of single or multiple SAP VMs into Azure with hello requirement of being fully integrated into hello on-premises network][planning-guide-2.2] in this document.</span></span>
* <span data-ttu-id="3be31-762">Добавьте другую локальную учетную запись с правами администратора, которые могут использоваться службой поддержки Майкрософт при исследовании проблем или назначаться в качестве контекста для toorun служб и приложений в до hello, в котором развернута виртуальная машина и более подходящих пользователей можно использовать.</span><span class="sxs-lookup"><span data-stu-id="3be31-762">Add another local account with administrator privileges which can be used by Microsoft support in problem investigations or which can be assigned as context for services and applications toorun in until hello VM is deployed and more appropriate users can be used.</span></span>
* <span data-ttu-id="3be31-763">В развертываний только в облаке и где учетные записи домена использовались в качестве имен входа СУБД или пользователей при запуске hello системы в локальной среде следует удалить пользователей домена hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-763">In Cloud-Only deployments and where domain accounts were used as DBMS logins or users when running hello system on-premises, hello domain users should be deleted.</span></span> <span data-ttu-id="3be31-764">Необходимо toomake убедитесь, что имя входа или учетных данных пользователя hello СУБД как администраторов добавлен hello локального администратора, а также другого локального пользователя ВМ.</span><span class="sxs-lookup"><span data-stu-id="3be31-764">You need toomake sure that hello local administrator plus another VM local user is added as a login/user of hello DBMS as administrators.</span></span>
* <span data-ttu-id="3be31-765">Добавьте другие локальные учетные записи, которые могут потребоваться для hello выбранного варианта развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-765">Add other local accounts as those might be needed for hello specific deployment scenario.</span></span>
* <span data-ttu-id="3be31-766">Если изображение hello содержит установку SAP NetWeaver и переименование hello имя узла из исходного имени hello точке "hello" hello развертывания Azure, вероятнее всего, это рекомендуемый toocopy hello последние версии DVD Manager hello подготовки программного обеспечения SAP в шаблон Hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-766">If hello image contains an installation of SAP NetWeaver and renaming of hello host name from hello original name at hello point of hello Azure deployment is likely, it is recommended toocopy hello latest versions of hello SAP Software Provisioning Manager DVD into hello template.</span></span> <span data-ttu-id="3be31-767">Это позволит вам использовать tooeasily hello SAP предоставляемых переименования функции tooadapt hello изменить имя узла или изменение hello SID hello системы SAP в hello развернут образ виртуальной Машины, сразу после запуска новой копии.</span><span class="sxs-lookup"><span data-stu-id="3be31-767">This will enable you tooeasily use hello SAP provided rename functionality tooadapt hello changed hostname and/or change hello SID of hello SAP system within hello deployed VM image as soon as a new copy is started.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-769">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-769">Windows</span></span>
>
> <span data-ttu-id="3be31-770">Убедитесь, что диск D:\ не используется. Настройте автоподключение для подключенных дисков, как описано в разделе этого документа [Настройка автоподключения для подключенных дисков][planning-guide-5.5.3].</span><span class="sxs-lookup"><span data-stu-id="3be31-770">Make sure that drive D:\ is not used Set disk automount for attached disks as described in chapter [Setting automount for attached disks][planning-guide-5.5.3] in this document.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-772">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-772">Linux</span></span>
>
> <span data-ttu-id="3be31-773">Убедитесь, что /mnt/resource не используется, и что все диски подключены через uuid.</span><span class="sxs-lookup"><span data-stu-id="3be31-773">Make sure that /mnt/resource is not used and that ALL disks are mounted via uuid.</span></span> <span data-ttu-id="3be31-774">Для диска ОС hello убедитесь, что запись hello также отражает подключения на основе uuid hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-774">For hello OS disk, make sure hello bootloader entry also reflects hello uuid-based mount.</span></span>
>
>

- - -
* <span data-ttu-id="3be31-775">В такой шаблон можно также заранее установить графический интерфейс SAP (для администрирования и настройки).</span><span class="sxs-lookup"><span data-stu-id="3be31-775">SAP GUI (for administrative and setup purposes) can be pre-installed in such a template.</span></span>
* <span data-ttu-id="3be31-776">Другое программное обеспечение, переименование hello toorun необходимые виртуальные машины успешно в сценариях между организациями, которые могут быть установлены до тех пор, пока это программное обеспечение может работать с hello hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-776">Other software necessary toorun hello VMs successfully in cross-premises scenarios can be installed as long as this software can work with hello rename of hello VM.</span></span>

<span data-ttu-id="3be31-777">Если hello ВМ, достаточно подготовленная toobe универсальных и в конечном счете зависит от учетных записей и пользователей не доступно в hello целевые сценарии развертывания Azure, ведется hello последнее действие по универсализации такого образа.</span><span class="sxs-lookup"><span data-stu-id="3be31-777">If hello VM is prepared sufficiently toobe generic and eventually independent of accounts/users not available in hello targeted Azure deployment scenario, hello last preparation step of generalizing such an image is conducted.</span></span>

##### <a name="generalizing-a-vm"></a><span data-ttu-id="3be31-778">Обобщение виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="3be31-778">Generalizing a VM</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-780">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-780">Windows</span></span>
>
> <span data-ttu-id="3be31-781">Последний шаг Hello — toolog в tooa ВМ с учетной записью администратора.</span><span class="sxs-lookup"><span data-stu-id="3be31-781">hello last step is toolog in tooa VM with an Administrator account.</span></span> <span data-ttu-id="3be31-782">Откройте окно командной строки Windows с правами администратора.</span><span class="sxs-lookup"><span data-stu-id="3be31-782">Open a Windows command window as ‘administrator’.</span></span> <span data-ttu-id="3be31-783">Go too%windir%\windows\system32\sysprep и запустите программу sysprep.exe.</span><span class="sxs-lookup"><span data-stu-id="3be31-783">Go too%windir%\windows\system32\sysprep and execute sysprep.exe.</span></span>
> <span data-ttu-id="3be31-784">Откроется небольшое окно.</span><span class="sxs-lookup"><span data-stu-id="3be31-784">A small window will appear.</span></span> <span data-ttu-id="3be31-785">Это вариант «Generalize» hello важные toocheck (по умолчанию hello он снят) и измените параметр завершения hello со значения по умолчанию «Перезагрузить» too'Shutdown ".</span><span class="sxs-lookup"><span data-stu-id="3be31-785">It is important toocheck hello ‘Generalize’ option (hello default is un-checked) and change hello Shutdown Option from its default of ‘Reboot’ too‘Shutdown’.</span></span> <span data-ttu-id="3be31-786">Эта процедура предполагает, процесс выполнения sysprep hello выполненного локально в hello гостевой ОС виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-786">This procedure assumes that hello sysprep process is executed on-premises in hello Guest OS of a VM.</span></span>
> <span data-ttu-id="3be31-787">Процедура hello tooperform виртуальная машина уже запущена в Azure, выполните hello действия, описанные в [в этой статье](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/capture-image-resource).</span><span class="sxs-lookup"><span data-stu-id="3be31-787">If you want tooperform hello procedure with a VM already running in Azure, follow hello steps described in [this article](https://docs.microsoft.com/en-us/azure/virtual-machines/windows/capture-image-resource).</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-789">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-789">Linux</span></span>
>
> <span data-ttu-id="3be31-790">[Как toocapture toouse виртуальных машин Linux в качестве шаблона диспетчера ресурсов][capture-image-linux-step-2-create-vm-image]</span><span class="sxs-lookup"><span data-stu-id="3be31-790">[How toocapture a Linux virtual machine toouse as a Resource Manager template][capture-image-linux-step-2-create-vm-image]</span></span>
>
>

- - -
### <a name="transferring-vms-and-vhds-between-on-premises-tooazure"></a><span data-ttu-id="3be31-791">Передача ВМ и VHD между локальной tooAzure</span><span class="sxs-lookup"><span data-stu-id="3be31-791">Transferring VMs and VHDs between on-premises tooAzure</span></span>
<span data-ttu-id="3be31-792">Так как отправка tooAzure образы и диски виртуальной Машины не поддерживается через портал Azure hello, необходимы toouse командлетов Azure PowerShell или интерфейс командной строки.</span><span class="sxs-lookup"><span data-stu-id="3be31-792">Since uploading VM images and disks tooAzure is not possible via hello Azure portal, you need toouse Azure PowerShell cmdlets or CLI.</span></span> <span data-ttu-id="3be31-793">Другой вариант — использование hello hello средство «AzCopy».</span><span class="sxs-lookup"><span data-stu-id="3be31-793">Another possibility is hello use of hello tool ‘AzCopy’.</span></span> <span data-ttu-id="3be31-794">Hello средство можно скопировать VHD между локальной средой и Azure (в обоих направлениях).</span><span class="sxs-lookup"><span data-stu-id="3be31-794">hello tool can copy VHDs between on-premises and Azure (in both directions).</span></span> <span data-ttu-id="3be31-795">Также она позволяет копировать виртуальные жесткие диски между регионами Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-795">It also can copy VHDs between Azure Regions.</span></span> <span data-ttu-id="3be31-796">Скачивание и использование AzCopy описывается в [этой документации][storage-use-azcopy].</span><span class="sxs-lookup"><span data-stu-id="3be31-796">Please consult [this documentation][storage-use-azcopy] for download and usage of AzCopy.</span></span>

<span data-ttu-id="3be31-797">Третий альтернативный бы toouse различных сторонних средств, ориентированных графического пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="3be31-797">A third alternative would be toouse various third-party GUI-oriented tools.</span></span> <span data-ttu-id="3be31-798">Но перед этим убедитесь, что эти средства поддерживают страничные BLOB-объекты Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-798">However, please make sure that these tools are supporting Azure Page Blobs.</span></span> <span data-ttu-id="3be31-799">Для наших целей мы должны toouse Azure страничный большой двоичный объект хранения (Здесь описываются различия hello: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>).</span><span class="sxs-lookup"><span data-stu-id="3be31-799">For our purposes we need toouse Azure Page Blob store (hello differences are described here: <https://docs.microsoft.com/rest/api/storageservices/Understanding-Block-Blobs--Append-Blobs--and-Page-Blobs>).</span></span> <span data-ttu-id="3be31-800">Также hello средств, предоставляемых Azure очень эффективно сжимать ВМ hello и виртуальные жесткие диски, для которых требуется загрузить toobe.</span><span class="sxs-lookup"><span data-stu-id="3be31-800">Also hello tools provided by Azure are very efficient in compressing hello VMs and VHDs which need toobe uploaded.</span></span> <span data-ttu-id="3be31-801">Это важно, поскольку эффективное сжатие сокращает время передачи hello (который зависит от все равно hello передачи ссылки toohello целевые Интернет с помещение локальной hello и региона развертывания Azure hello).</span><span class="sxs-lookup"><span data-stu-id="3be31-801">This is important because this efficiency in compression reduces hello upload time (which varies anyway depending on hello upload link toohello internet from hello on-premises facility and hello Azure deployment region targeted).</span></span> <span data-ttu-id="3be31-802">Это справедливо предположить, что отправка ВМ или VHD из Европейского расположения toohello США Azure данных на основе центры займет больше времени, чем отправка hello же ВМ или VHD toohello европейских центрах обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-802">It is a fair assumption that uploading a VM or VHD from European location toohello U.S.-based Azure data centers will take longer than uploading hello same VMs/VHDs toohello European Azure data centers.</span></span>

#### <span data-ttu-id="3be31-803"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Отправка VHD из локальной tooAzure</span><span class="sxs-lookup"><span data-stu-id="3be31-803"><a name="a43e40e6-1acc-4633-9816-8f095d5a7b6a"></a>Uploading a VHD from on-premises tooAzure</span></span>
<span data-ttu-id="3be31-804">tooupload существующей ВМ или VHD из hello в локальной сети ВМ или VHD должен toomeet hello требования, перечисленные в главе [подготовки к перемещению ВМ из локальной tooAzure с помощью специализированного диска] [ planning-guide-5.2.1] этого документа.</span><span class="sxs-lookup"><span data-stu-id="3be31-804">tooupload an existing VM or VHD from hello on-premises network such a VM or VHD needs toomeet hello requirements as listed in chapter [Preparation for moving a VM from on-premises tooAzure with a non-generalized disk][planning-guide-5.2.1] of this document.</span></span>

<span data-ttu-id="3be31-805">Такую ВМ необходимо обобщить toobe и могут быть отправлены в состоянии hello и форме, имеющиеся в ней после завершения работы на hello локальной стороне.</span><span class="sxs-lookup"><span data-stu-id="3be31-805">Such a VM does NOT need toobe generalized and can be uploaded in hello state and shape it has after shutdown on hello on-premises side.</span></span> <span data-ttu-id="3be31-806">Hello относится к дополнительным VHD, не могут содержать любой операционной системе.</span><span class="sxs-lookup"><span data-stu-id="3be31-806">hello same is true for additional VHDs which don’t contain any operating system.</span></span>

##### <a name="uploading-a-vhd-and-making-it-an-azure-disk"></a><span data-ttu-id="3be31-807">Отправка виртуального жесткого диска и его преобразование в диск Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-807">Uploading a VHD and making it an Azure Disk</span></span>
<span data-ttu-id="3be31-808">В этом случае мы tooupload виртуального жесткого диска, с указанием или без ОС в нем, а подключить ее tooa виртуальную Машину в качестве диска данных или использовать его в качестве диска ОС.</span><span class="sxs-lookup"><span data-stu-id="3be31-808">In this case we want tooupload a VHD, either with or without an OS in it, and mount it tooa VM as a data disk or use it as OS disk.</span></span> <span data-ttu-id="3be31-809">Этот процесс состоит из нескольких этапов.</span><span class="sxs-lookup"><span data-stu-id="3be31-809">This is a multi-step process</span></span>

<span data-ttu-id="3be31-810">**PowerShell**</span><span class="sxs-lookup"><span data-stu-id="3be31-810">**Powershell**</span></span>

* <span data-ttu-id="3be31-811">Войдите в подписке tooyour с *AzureRmAccount входа*</span><span class="sxs-lookup"><span data-stu-id="3be31-811">Log in tooyour subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="3be31-812">Задать подписки hello контекста с *набор AzureRmContext* и параметр SubscriptionId или Имя_подписки - статье <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span><span class="sxs-lookup"><span data-stu-id="3be31-812">Set hello subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span></span>
* <span data-ttu-id="3be31-813">Отправка hello VHD с *добавить AzureRmVhd* tooan учетной записи хранилища Azure — в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span><span class="sxs-lookup"><span data-stu-id="3be31-813">Upload hello VHD with *Add-AzureRmVhd* tooan Azure Storage Account - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span></span>
* <span data-ttu-id="3be31-814">(Необязательно) Создать диск управляемых из hello виртуального жесткого диска с *New AzureRmDisk* -в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermdisk></span><span class="sxs-lookup"><span data-stu-id="3be31-814">(Optional) Create a Managed Disk from hello VHD with *New-AzureRmDisk*  - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermdisk></span></span>
* <span data-ttu-id="3be31-815">Задать hello ОС из нового toohello конфигурации виртуальной Машины виртуальный жесткий ДИСК или диск управляемых с помощью *AzureRmVMOSDisk набор* -в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span><span class="sxs-lookup"><span data-stu-id="3be31-815">Set hello OS disk of a new VM config toohello VHD or Managed Disk with *Set-AzureRmVMOSDisk* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span></span>
* <span data-ttu-id="3be31-816">Создание новой виртуальной Машины из hello конфигурации виртуальной Машины с *New AzureRmVM* -в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span><span class="sxs-lookup"><span data-stu-id="3be31-816">Create a new VM from hello VM config with *New-AzureRmVM* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span></span>
* <span data-ttu-id="3be31-817">Добавьте диск данных tooa новой виртуальной Машины с *добавить AzureRmVMDataDisk* -в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvmdatadisk></span><span class="sxs-lookup"><span data-stu-id="3be31-817">Add a data disk tooa new VM with *Add-AzureRmVMDataDisk* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvmdatadisk></span></span>

<span data-ttu-id="3be31-818">**Azure CLI 2.0**</span><span class="sxs-lookup"><span data-stu-id="3be31-818">**Azure CLI 2.0**</span></span>

* <span data-ttu-id="3be31-819">Войдите в подписке tooyour с *входа az*</span><span class="sxs-lookup"><span data-stu-id="3be31-819">Log in tooyour subscription with *az login*</span></span>
* <span data-ttu-id="3be31-820">Выберите подписку с помощью команды *az account set --subscription `<subscription name or id`>*.</span><span class="sxs-lookup"><span data-stu-id="3be31-820">Select your subscription with *az account set --subscription `<subscription name or id`>*</span></span>
* <span data-ttu-id="3be31-821">Отправить hello VHD с *az хранилища больших двоичных объектов передачи* -в разделе [hello с помощью Azure CLI со службой хранилища Azure][storage-azure-cli]</span><span class="sxs-lookup"><span data-stu-id="3be31-821">Upload hello VHD with *az storage blob upload* - see [Using hello Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="3be31-822">(Необязательно) Создать диск управляемых из hello виртуального жесткого диска с *создать диск az* -https://docs.microsoft.com/cli/azure/disk#create см.</span><span class="sxs-lookup"><span data-stu-id="3be31-822">(Optional) Create a Managed Disk from hello VHD with *az disk create* - see https://docs.microsoft.com/cli/azure/disk#create</span></span>
* <span data-ttu-id="3be31-823">Создание новой виртуальной Машины указание hello передать виртуальный жесткий ДИСК или диск, управляемых как диска ОС с *создания виртуальной машины az* и параметр *--присоединить os диск*</span><span class="sxs-lookup"><span data-stu-id="3be31-823">Create a new VM specifying hello uploaded VHD or Managed Disk as OS disk with *az vm create* and parameter *--attach-os-disk*</span></span>
* <span data-ttu-id="3be31-824">Добавьте диск данных tooa новой виртуальной Машины с *присоединить диск виртуальной машины az* и параметр *--new*</span><span class="sxs-lookup"><span data-stu-id="3be31-824">Add a data disk tooa new VM with *az vm disk attach* and parameter *--new*</span></span>

<span data-ttu-id="3be31-825">**Шаблон**</span><span class="sxs-lookup"><span data-stu-id="3be31-825">**Template**</span></span>

* <span data-ttu-id="3be31-826">Отправить VHD с помощью Powershell или Azure CLI hello</span><span class="sxs-lookup"><span data-stu-id="3be31-826">Upload hello VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="3be31-827">(Необязательно) Создать диск управляемых из hello виртуального жесткого диска с помощью Powershell, Azure CLI или hello портал Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-827">(Optional) Create a Managed Disk from hello VHD with Powershell, Azure CLI or hello Azure portal</span></span>
* <span data-ttu-id="3be31-828">Развертывание hello виртуальной Машины с помощью шаблона JSON, ссылающиеся на hello виртуального жесткого диска, как показано в [этот пример шаблона JSON](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-specialized-vhd/azuredeploy.json) или с помощью управляемых дисков, как показано в [этот пример шаблона JSON](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-disk-md/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="3be31-828">Deploy hello VM with a JSON template referencing hello VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/201-vm-specialized-vhd/azuredeploy.json) or using Managed Disks as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-disk-md/azuredeploy.json).</span></span>

#### <a name="deployment-of-a-vm-image"></a><span data-ttu-id="3be31-829">Развертывание образа виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="3be31-829">Deployment of a VM Image</span></span>
<span data-ttu-id="3be31-830">tooupload существующей ВМ или VHD из hello в локальной сети в порядке toouse ее как образ виртуальной Машины Azure ВМ или VHD должны toomeet hello требования, перечисленные в главе [Подготовка развертывания ВМ с определенным пользователем образа для SAP] [ planning-guide-5.2.2] этого документа.</span><span class="sxs-lookup"><span data-stu-id="3be31-830">tooupload an existing VM or VHD from hello on-premises network in order toouse it as an Azure VM image such a VM or VHD need toomeet hello requirements listed in chapter [Preparation for deploying a VM with a customer-specific image for SAP][planning-guide-5.2.2] of this document.</span></span>

* <span data-ttu-id="3be31-831">Используйте *sysprep* в Windows или *waagent-deprovision* на Linux toogeneralize ВМ -. в разделе [технического справочника по Sysprep](https://technet.microsoft.com/library/cc766049.aspx) для Windows или [как toocapture Toouse виртуальных машин Linux в качестве шаблона диспетчера ресурсов] [ capture-image-linux-step-2-create-vm-image] для Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-831">Use *sysprep* on Windows or *waagent -deprovision* on Linux toogeneralize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How toocapture a Linux virtual machine toouse as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="3be31-832">Войдите в подписке tooyour с *AzureRmAccount входа*</span><span class="sxs-lookup"><span data-stu-id="3be31-832">Log in tooyour subscription with *Login-AzureRmAccount*</span></span>
* <span data-ttu-id="3be31-833">Задать подписки hello контекста с *набор AzureRmContext* и параметр SubscriptionId или Имя_подписки - статье <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span><span class="sxs-lookup"><span data-stu-id="3be31-833">Set hello subscription of your context with *Set-AzureRmContext* and parameter SubscriptionId or SubscriptionName - see <https://docs.microsoft.com/powershell/module/azurerm.profile/set-azurermcontext></span></span>
* <span data-ttu-id="3be31-834">Отправка hello VHD с *добавить AzureRmVhd* tooan учетной записи хранилища Azure — в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span><span class="sxs-lookup"><span data-stu-id="3be31-834">Upload hello VHD with *Add-AzureRmVhd* tooan Azure Storage Account - see <https://docs.microsoft.com/powershell/module/azurerm.compute/add-azurermvhd></span></span>
* <span data-ttu-id="3be31-835">(Необязательно) Создание управляемых образа диска из hello виртуального жесткого диска с *New AzureRmImage* -в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermimage></span><span class="sxs-lookup"><span data-stu-id="3be31-835">(Optional) Create a Managed Disk Image from hello VHD with *New-AzureRmImage*  - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermimage></span></span>
* <span data-ttu-id="3be31-836">Диск ОС hello набор новых toothe конфигурации виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="3be31-836">Set hello OS disk of a new VM config toothe</span></span>
  * <span data-ttu-id="3be31-837">виртуальный жесткий диск с помощью командлета *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage* (дополнительные сведения см. по адресу: <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk>);</span><span class="sxs-lookup"><span data-stu-id="3be31-837">VHD with *Set-AzureRmVMOSDisk -SourceImageUri -CreateOption fromImage* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmosdisk></span></span>
  * <span data-ttu-id="3be31-838">образ управляемого диска с помощью командлета *Set-AzureRmVMSourceImage* (дополнительные сведения см. по адресу: <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmsourceimage>).</span><span class="sxs-lookup"><span data-stu-id="3be31-838">Managed Disk Image *Set-AzureRmVMSourceImage* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/set-azurermvmsourceimage></span></span>
* <span data-ttu-id="3be31-839">Создание новой виртуальной Машины из hello конфигурации виртуальной Машины с *New AzureRmVM* -в разделе <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span><span class="sxs-lookup"><span data-stu-id="3be31-839">Create a new VM from hello VM config with *New-AzureRmVM* - see <https://docs.microsoft.com/powershell/module/azurerm.compute/new-azurermvm></span></span>

<span data-ttu-id="3be31-840">**Azure CLI 2.0**</span><span class="sxs-lookup"><span data-stu-id="3be31-840">**Azure CLI 2.0**</span></span>

* <span data-ttu-id="3be31-841">Используйте *sysprep* в Windows или *waagent-deprovision* на Linux toogeneralize ВМ -. в разделе [технического справочника по Sysprep](https://technet.microsoft.com/library/cc766049.aspx) для Windows или [как toocapture Toouse виртуальных машин Linux в качестве шаблона диспетчера ресурсов] [ capture-image-linux-step-2-create-vm-image] для Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-841">Use *sysprep* on Windows or *waagent -deprovision* on Linux toogeneralize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How toocapture a Linux virtual machine toouse as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="3be31-842">Войдите в подписке tooyour с *входа az*</span><span class="sxs-lookup"><span data-stu-id="3be31-842">Log in tooyour subscription with *az login*</span></span>
* <span data-ttu-id="3be31-843">Выберите подписку с помощью команды *az account set --subscription `<subscription name or id`>*.</span><span class="sxs-lookup"><span data-stu-id="3be31-843">Select your subscription with *az account set --subscription `<subscription name or id`>*</span></span>
* <span data-ttu-id="3be31-844">Отправить hello VHD с *az хранилища больших двоичных объектов передачи* -в разделе [hello с помощью Azure CLI со службой хранилища Azure][storage-azure-cli]</span><span class="sxs-lookup"><span data-stu-id="3be31-844">Upload hello VHD with *az storage blob upload* - see [Using hello Azure CLI with Azure Storage][storage-azure-cli]</span></span>
* <span data-ttu-id="3be31-845">(Необязательно) Создание управляемых образа диска из hello виртуального жесткого диска с *создать образ az* -https://docs.microsoft.com/cli/azure/image#create см.</span><span class="sxs-lookup"><span data-stu-id="3be31-845">(Optional) Create a Managed Disk Image from hello VHD with *az image create* - see https://docs.microsoft.com/cli/azure/image#create</span></span>
* <span data-ttu-id="3be31-846">Создание новой виртуальной Машины указание hello передать виртуальный жесткий ДИСК или образ диска, управляемых как диска ОС с *создания виртуальной машины az* и параметр *--изображения*</span><span class="sxs-lookup"><span data-stu-id="3be31-846">Create a new VM specifying hello uploaded VHD or Managed Disk Image as OS disk with *az vm create* and parameter *--image*</span></span>

<span data-ttu-id="3be31-847">**Шаблон**</span><span class="sxs-lookup"><span data-stu-id="3be31-847">**Template**</span></span>

* <span data-ttu-id="3be31-848">Используйте *sysprep* в Windows или *waagent-deprovision* на Linux toogeneralize ВМ -. в разделе [технического справочника по Sysprep](https://technet.microsoft.com/library/cc766049.aspx) для Windows или [как toocapture Toouse виртуальных машин Linux в качестве шаблона диспетчера ресурсов] [ capture-image-linux-step-2-create-vm-image] для Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-848">Use *sysprep* on Windows or *waagent -deprovision* on Linux toogeneralize your VM - see [Sysprep Technical Reference](https://technet.microsoft.com/library/cc766049.aspx) for Windows or [How toocapture a Linux virtual machine toouse as a Resource Manager template][capture-image-linux-step-2-create-vm-image] for Linux</span></span>
* <span data-ttu-id="3be31-849">Отправить VHD с помощью Powershell или Azure CLI hello</span><span class="sxs-lookup"><span data-stu-id="3be31-849">Upload hello VHD with Powershell or Azure CLI</span></span>
* <span data-ttu-id="3be31-850">(Необязательно) Создание управляемых образа диска из hello виртуального жесткого диска с помощью Powershell, Azure CLI или hello портал Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-850">(Optional) Create a Managed Disk Image from hello VHD with Powershell, Azure CLI or hello Azure portal</span></span>
* <span data-ttu-id="3be31-851">Развертывание hello виртуальной Машины с помощью шаблона JSON, ссылающиеся на hello образа виртуального жесткого диска, как показано в [этот пример шаблона JSON](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-image/azuredeploy.json) или с помощью hello управляемый образ диска, как показано в [этот пример шаблона JSON](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span><span class="sxs-lookup"><span data-stu-id="3be31-851">Deploy hello VM with a JSON template referencing hello image VHD as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/sap-2-tier-user-image/azuredeploy.json) or using hello Managed Disk Image as shown in [this example JSON template](https://raw.githubusercontent.com/Azure/azure-quickstart-templates/master/101-vm-from-user-image/azuredeploy.json).</span></span>

#### <a name="downloading-vhds-or-managed-disks-tooon-premises"></a><span data-ttu-id="3be31-852">Загрузка виртуальных жестких дисков или дисков, управляемых tooon организациями</span><span class="sxs-lookup"><span data-stu-id="3be31-852">Downloading VHDs or Managed Disks tooon-premises</span></span>
<span data-ttu-id="3be31-853">Azure инфраструктура как услуга не является односторонней street того, что только могут tooupload виртуальные жесткие диски и систем SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-853">Azure Infrastructure as a Service is not a one-way street of only being able tooupload VHDs and SAP systems.</span></span> <span data-ttu-id="3be31-854">Можно переместить SAP систем из Azure обратно в локальный Привет также.</span><span class="sxs-lookup"><span data-stu-id="3be31-854">You can move SAP systems from Azure back into hello on-premises world as well.</span></span>

<span data-ttu-id="3be31-855">Во время hello hello hello загрузки виртуальных жестких дисков или дисков, управляемых не может быть активной.</span><span class="sxs-lookup"><span data-stu-id="3be31-855">During hello time of hello download hello VHDs or Managed Disks can’t be active.</span></span> <span data-ttu-id="3be31-856">Даже при загрузке дисков, подключенных tooVMs, hello toobe потребностей виртуальной Машины завершена и освобождается.</span><span class="sxs-lookup"><span data-stu-id="3be31-856">Even when downloading disks which are mounted tooVMs, hello VM needs toobe shut down and deallocated.</span></span> <span data-ttu-id="3be31-857">Если требуется только базы данных hello toodownload содержимого, которые затем должны быть используется tooset новой системы локально. Если и допустима, время "hello" hello загрузить hello установки новой системы hello, hello системы в Azure можно по-прежнему работать , можно исключить длинное простои, выполняя сжатой базы данных резервной копии в виде диска и просто загрузить этот диск вместо загрузки также hello ВМ на основе ОС.</span><span class="sxs-lookup"><span data-stu-id="3be31-857">If you only want toodownload hello database content which then should be used tooset up a new system on-premises and if it is acceptable that during hello time of hello download and hello setup of hello new system that hello system in Azure can still be operational, you could avoid a long downtime by performing a compressed database backup into a disk and just download that disk instead of also downloading hello OS base VM.</span></span>

#### <a name="powershell"></a><span data-ttu-id="3be31-858">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-858">Powershell</span></span>

  * <span data-ttu-id="3be31-859">Загрузка управляемого диска</span><span class="sxs-lookup"><span data-stu-id="3be31-859">Downloading a Managed Disk</span></span>  
  <span data-ttu-id="3be31-860">Необходимо сначала toohello доступа tooget базовый большой двоичный объект hello управляемого диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-860">You first need tooget access toohello underlying blob of hello Managed Disk.</span></span> <span data-ttu-id="3be31-861">Затем можно скопировать hello базового большого двоичного объекта tooa новой учетной записи хранения и загрузить hello BLOB-объектов из этой учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-861">Then you can copy hello underlying blob tooa new storage account and download hello blob from this storage account.</span></span>

  ```powershell
  $access = Grant-AzureRmDiskAccess -ResourceGroupName <resource group> -DiskName <disk name> -Access Read -DurationInSecond 3600
  $key = (Get-AzureRmStorageAccountKey -ResourceGroupName <resource group> -Name <storage account name>)[0].Value
  $destContext = (New-AzureStorageContext -StorageAccountName <storage account name -StorageAccountKey $key)
  Start-AzureStorageBlobCopy -AbsoluteUri $access.AccessSAS -DestContainer <container name> -DestBlob <blob name> -DestContext $destContext
  # Wait for blob copy toofinish
  Get-AzureStorageBlobCopyState -Container <container name> -Blob <blob name> -Context $destContext
  Save-AzureRmVhd -SourceUri <blob in new storage account> -LocalFilePath <local file path> -StorageKey $key
  # Wait for download toofinish
  Revoke-AzureRmDiskAccess -ResourceGroupName <resource group> -DiskName <disk name>
  ```

  * <span data-ttu-id="3be31-862">Загрузка виртуального жесткого диска</span><span class="sxs-lookup"><span data-stu-id="3be31-862">Downloading a VHD</span></span>  
  <span data-ttu-id="3be31-863">После остановки системы SAP hello и hello виртуальная машина завершает работу, можно использовать командлет PowerShell hello AzureRmVhd сохранить на hello локальной целевые диски VHD hello toodownload обратно toohello локальной системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-863">Once hello SAP system is stopped and hello VM is shut down, you can use hello PowerShell cmdlet Save-AzureRmVhd on hello on-premises target toodownload hello VHD disks back toohello on-premises world.</span></span> <span data-ttu-id="3be31-864">В порядке toodo потребуется URL-адрес hello hello виртуальный жесткий ДИСК, который можно найти в разделе «Storage hello объекта hello портал Azure (необходимость toonavigate toohello учетной записи хранилища и hello контейнер хранилища которой hello виртуальный жесткий ДИСК был создан) и вам нужен tooknow, где hello виртуальный жесткий ДИСК должен быть скопировать.</span><span class="sxs-lookup"><span data-stu-id="3be31-864">In order toodo that, you need hello URL of hello VHD which you can find in hello ‘Storage Section’ of hello Azure portal (need toonavigate toohello Storage Account and hello storage container where hello VHD was created) and you need tooknow where hello VHD should be copied to.</span></span>

  <span data-ttu-id="3be31-865">Затем можно использовать команду hello, просто определяет параметр hello SourceUri как hello URL-адрес виртуального жесткого диска toodownload hello и hello LocalFilePath как физическое расположение hello hello виртуального жесткого диска (включая его имя).</span><span class="sxs-lookup"><span data-stu-id="3be31-865">Then you can leverage hello command by simply defining hello parameter SourceUri as hello URL of hello VHD toodownload and hello LocalFilePath as hello physical location of hello VHD (including its name).</span></span> <span data-ttu-id="3be31-866">Команда Hello может выглядеть так:</span><span class="sxs-lookup"><span data-stu-id="3be31-866">hello command could look like:</span></span>

  ```powerhell
  Save-AzureRmVhd -ResourceGroupName <resource group name of storage account> -SourceUri http://<storage account name>.blob.core.windows.net/<container name>/sapidedata.vhd -LocalFilePath E:\Azure_downloads\sapidesdata.vhd
  ```

  <span data-ttu-id="3be31-867">Дополнительные сведения о командлете Save AzureRmVhd hello см. Здесь <https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvhd>.</span><span class="sxs-lookup"><span data-stu-id="3be31-867">For more details of hello Save-AzureRmVhd cmdlet, please check here <https://docs.microsoft.com/powershell/module/azurerm.compute/save-azurermvhd>.</span></span>

#### <a name="cli-20"></a><span data-ttu-id="3be31-868">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="3be31-868">CLI 2.0</span></span>
  * <span data-ttu-id="3be31-869">Загрузка управляемого диска</span><span class="sxs-lookup"><span data-stu-id="3be31-869">Downloading a Managed Disk</span></span>  
  <span data-ttu-id="3be31-870">Необходимо сначала toohello доступа tooget базовый большой двоичный объект hello управляемого диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-870">You first need tooget access toohello underlying blob of hello Managed Disk.</span></span> <span data-ttu-id="3be31-871">Затем можно скопировать hello базового большого двоичного объекта tooa новой учетной записи хранения и загрузить hello BLOB-объектов из этой учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-871">Then you can copy hello underlying blob tooa new storage account and download hello blob from this storage account.</span></span>
  ```
  az disk grant-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --duration-in-seconds 3600
  az storage blob download --sas-token "<sas token>" --account-name <account name> --container-name <container name> --name <blob name> --file <local file>
  az disk revoke-access --ids "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>"
  ```

  * <span data-ttu-id="3be31-872">Загрузка виртуального жесткого диска</span><span class="sxs-lookup"><span data-stu-id="3be31-872">Downloading a VHD</span></span>   
  <span data-ttu-id="3be31-873">После остановки системы SAP hello hello виртуальная машина завершает работу, можно использовать команду hello Azure CLI _загрузку большого двоичного объекта хранилища azure_ на целевом сервере локальной hello toodownload hello VHD диски world локальной серверной toohello.</span><span class="sxs-lookup"><span data-stu-id="3be31-873">Once hello SAP system is stopped and hello VM is shut down, you can use hello Azure CLI command _azure storage blob download_ on hello on-premises target toodownload hello VHD disks back toohello on-premises world.</span></span> <span data-ttu-id="3be31-874">В порядке toodo потребуется имя hello и контейнером hello hello виртуальный жесткий ДИСК, который можно найти в разделе «Storage hello объекта hello портал Azure (необходимость toonavigate toohello учетной записи хранилища и hello контейнер хранилища которой hello виртуальный жесткий ДИСК был создан) и вы должны tooknow где Hello виртуального жесткого диска должны быть скопированы.</span><span class="sxs-lookup"><span data-stu-id="3be31-874">In order toodo that, you need hello name and hello container of hello VHD which you can find in hello ‘Storage Section’ of hello Azure portal (need toonavigate toohello Storage Account and hello storage container where hello VHD was created) and you need tooknow where hello VHD should be copied to.</span></span>

  <span data-ttu-id="3be31-875">Затем можно использовать команду hello, просто определяя hello параметров большого двоичного объекта и контейнера hello VHD toodownload и назначения hello как физический целевое расположение hello hello виртуального жесткого диска (включая его имя).</span><span class="sxs-lookup"><span data-stu-id="3be31-875">Then you can leverage hello command by simply defining hello parameters blob and container of hello VHD toodownload and hello destination as hello physical target location of hello VHD (including its name).</span></span> <span data-ttu-id="3be31-876">Команда Hello может выглядеть так:</span><span class="sxs-lookup"><span data-stu-id="3be31-876">hello command could look like:</span></span>

  ```
  az storage blob download --name <name of hello VHD toodownload> --container-name <container of hello VHD toodownload> --account-name <storage account name of hello VHD toodownload> --account-key <storage account key> --file <destination of hello VHD toodownload>
  ```

### <a name="transferring-vms-and-disks-within-azure"></a><span data-ttu-id="3be31-877">Передача виртуальных машин и дисков в пределах Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-877">Transferring VMs and disks within Azure</span></span>
#### <a name="copying-sap-systems-within-azure"></a><span data-ttu-id="3be31-878">Копирование систем SAP в пределах Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-878">Copying SAP systems within Azure</span></span>
<span data-ttu-id="3be31-879">Система SAP или даже выделенный сервер СУБД, поддерживающий уровень приложения SAP, могут состоять из нескольких дисков, которые содержат либо hello ОС с двоичными файлами hello или hello данных и файлы базы данных SAP hello журналов.</span><span class="sxs-lookup"><span data-stu-id="3be31-879">An SAP system or even a dedicated DBMS server supporting an SAP application layer will likely consist of several disks which contain either hello OS with hello binaries or hello data and log file(s) of hello SAP database.</span></span> <span data-ttu-id="3be31-880">Здравствуйте, функциональность Azure копирования дисков, ни hello функциональность Azure сохранения дисков tooa локальный диск имеет механизм синхронизации, который бы синхронно снимок несколько дисков.</span><span class="sxs-lookup"><span data-stu-id="3be31-880">Neither hello Azure functionality of copying disks nor hello Azure functionality of saving disks tooa local disk has a synchronization mechanism, which would snapshot multiple disks synchronously.</span></span> <span data-ttu-id="3be31-881">Таким образом, состояние hello hello копировании или при сохранении дисков даже при их подключении к hello одной виртуальной Машины будет отличаться.</span><span class="sxs-lookup"><span data-stu-id="3be31-881">Therefore, hello state of hello copied or saved disks even if those are mounted against hello same VM would be different.</span></span> <span data-ttu-id="3be31-882">Это означает, что в hello конкретную ситуацию с различными данными, а также виду в разных дисках hello, hello базы данных в конец hello будет несогласованной.</span><span class="sxs-lookup"><span data-stu-id="3be31-882">This means that in hello concrete case of having different data and logfile(s) contained in hello different disks, hello database in hello end would be inconsistent.</span></span>

<span data-ttu-id="3be31-883">**Заключение: Порядок toocopy или сохранить диски, которые являются частью конфигурации системы SAP требуется система SAP toostop hello и потребовать tooshut вниз hello развертывания ВМ. Только в том случае, то можно скопировать или загрузить набор hello tooeither дисков создайте копию hello системы SAP в Azure или локально.**</span><span class="sxs-lookup"><span data-stu-id="3be31-883">**Conclusion: In order toocopy or save disks which are part of an SAP system configuration you need toostop hello SAP system and also need tooshut down hello deployed VM. Only then you can copy or download hello set of disks tooeither create a copy of hello SAP system in Azure or on-premises.**</span></span>

<span data-ttu-id="3be31-884">Диски с данными можно сохранить в качестве VHD-файлы в учетную запись хранилища Azure и может быть непосредственно подключенного tooa виртуальной машине или использоваться в качестве изображения.</span><span class="sxs-lookup"><span data-stu-id="3be31-884">Data disks can be stored as VHD files in an Azure Storage Account and can be directly attached tooa virtual machine or be used as an image.</span></span> <span data-ttu-id="3be31-885">В этом случае hello VHD указывает расположение скопированный tooanother до выполнения вложенного toohello виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-885">In this case, hello VHD is copied tooanother location before being attached toohello virtual machine.</span></span> <span data-ttu-id="3be31-886">Полное имя Hello hello VHD-файл в Azure должно быть уникальным в пределах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-886">hello full name of hello VHD file in Azure must be unique within Azure.</span></span> <span data-ttu-id="3be31-887">Как упоминалось ранее, уже, hello имя имеет вид трехкомпонентным именем, выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3be31-887">As mentioned earlier already, hello name is kind of a three-part name that looks like:</span></span>

    http(s)://<storage account name>.blob.core.windows.net/<container name>/<vhd name>

<span data-ttu-id="3be31-888">Для дисков данных также можно использовать управляемые диски.</span><span class="sxs-lookup"><span data-stu-id="3be31-888">Data disks can also be Managed Disks.</span></span> <span data-ttu-id="3be31-889">В этом случае hello управляемый диск — используется toocreate новый управляемый диск, прежде чем вложенного toohello виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-889">In this case, hello Managed Disk is used toocreate a new Managed Disk before being attached toohello virtual machine.</span></span> <span data-ttu-id="3be31-890">Имя Hello hello управляемого диска должно быть уникальным в пределах группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3be31-890">hello name of hello Managed Disk must be unique within a resource group.</span></span>

##### <a name="powershell"></a><span data-ttu-id="3be31-891">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-891">Powershell</span></span>
<span data-ttu-id="3be31-892">Можно использовать командлеты Azure PowerShell toocopy виртуального жесткого диска, как показано в [в этой статье][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="3be31-892">You can use Azure PowerShell cmdlets toocopy a VHD as shown in [this article][storage-powershell-guide-full-copy-vhd].</span></span> <span data-ttu-id="3be31-893">toocreate новый диск управляемый код, используйте New AzureRmDiskConfig и создать AzureRmDisk, как показано в следующий пример hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-893">toocreate a new Managed Disk, use New-AzureRmDiskConfig and New-AzureRmDisk as shown in hello following example.</span></span>

```powershell
$config = New-AzureRmDiskConfig -CreateOption Copy -SourceUri "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" -Location <location>
New-AzureRmDisk -ResourceGroupName <resource group name> -DiskName <disk name> -Disk $config
```

##### <a name="cli-20"></a><span data-ttu-id="3be31-894">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="3be31-894">CLI 2.0</span></span>
<span data-ttu-id="3be31-895">Можно использовать Azure CLI toocopy виртуального жесткого диска, как показано в [в этой статье][storage-azure-cli-copy-blobs].</span><span class="sxs-lookup"><span data-stu-id="3be31-895">You can use Azure CLI toocopy a VHD as shown in [this article][storage-azure-cli-copy-blobs].</span></span> <span data-ttu-id="3be31-896">использовать toocreate на новый диск управляемый *создать диск az* как показано в следующий пример hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-896">toocreate a new Managed Disk, use *az disk create* as shown in hello following example.</span></span>

```
az disk create --source "/subscriptions/<subscription id>/resourceGroups/<resource group>/providers/Microsoft.Compute/disks/<disk name>" --name <disk name> --resource-group <resource group name> --location <location>
```

##### <a name="azure-storage-tools"></a><span data-ttu-id="3be31-897">Средства хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-897">Azure Storage tools</span></span>
* <span data-ttu-id="3be31-898"><http://storageexplorer.com/></span><span class="sxs-lookup"><span data-stu-id="3be31-898"><http://storageexplorer.com/></span></span>

<span data-ttu-id="3be31-899">Профессиональные выпуски обозревателей службы хранилища Azure можно найти по следующим ссылкам.</span><span class="sxs-lookup"><span data-stu-id="3be31-899">Professional editions of Azure Storage Explorers can be found here:</span></span>

* <span data-ttu-id="3be31-900"><http://www.cerebrata.com/></span><span class="sxs-lookup"><span data-stu-id="3be31-900"><http://www.cerebrata.com/></span></span>
* <span data-ttu-id="3be31-901"><http://clumsyleaf.com/products/cloudxplorer></span><span class="sxs-lookup"><span data-stu-id="3be31-901"><http://clumsyleaf.com/products/cloudxplorer></span></span>

<span data-ttu-id="3be31-902">Hello копия самого VHD в учетной записи хранения является занимает всего несколько секунд (создание моментальных снимков с отложенным копированием или копированием при записи аналогичном оборудовании tooSAN).</span><span class="sxs-lookup"><span data-stu-id="3be31-902">hello copy of a VHD itself within a storage account is a process which takes only a few seconds (similar tooSAN hardware creating snapshots with lazy copy and copy on write).</span></span> <span data-ttu-id="3be31-903">После того как вы копию hello VHD-файл можно прикрепить tooa виртуальной машины или используйте его как изображение tooattach копирует машин toovirtual hello виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-903">After you have a copy of hello VHD file you can attach it tooa virtual machine or use it as an image tooattach copies of hello VHD toovirtual machines.</span></span>

##### <a name="powershell"></a><span data-ttu-id="3be31-904">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-904">Powershell</span></span>
```powershell
# attach a vhd tooa vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -VhdUri <path toovhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a managed disk tooa vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name newdatadisk -ManagedDiskId <managed disk id> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption attach
$vm | Update-AzureRmVM

# attach a copy of hello vhd tooa vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Name <disk name> -VhdUri <new path of vhd> -SourceImageUri <path tooimage vhd> -Caching <caching option> -DiskSizeInGB $null -Lun <lun, for example 0> -CreateOption fromImage
$vm | Update-AzureRmVM

# attach a copy of hello managed disk tooa vm
$vm = Get-AzureRmVM -ResourceGroupName <resource group name> -Name <vm name>
$diskConfig = New-AzureRmDiskConfig -Location $vm.Location -CreateOption Copy -SourceUri <source managed disk id>
$disk = New-AzureRmDisk -DiskName <disk name> -Disk $diskConfig -ResourceGroupName <resource group name>
$vm = Add-AzureRmVMDataDisk -VM $vm -Caching <caching option> -Lun <lun, for example 0> -CreateOption attach -ManagedDiskId $disk.Id
$vm | Update-AzureRmVM
```
##### <a name="cli-20"></a><span data-ttu-id="3be31-905">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="3be31-905">CLI 2.0</span></span>
```

# attach a vhd tooa vm
az vm unmanaged-disk attach --resource-group <resource group name> --vm-name <vm name> --vhd-uri <path toovhd>

# attach a managed disk tooa vm
az vm disk attach --resource-group <resource group name> --vm-name <vm name> --disk <managed disk id>

# attach a copy of hello vhd tooa vm
# this scenario is currently not possible with Azure CLI. A workaround is toomanually copy hello vhd toohello destination.

# attach a copy of a managed disk tooa vm
az disk create --name <new disk name> --resource-group <resource group name> --location <location of target virtual machine> --source <source managed disk id>
az vm disk attach --disk <new disk name or managed disk id> --resource-group <resource group name> --vm-name <vm name> --caching <caching option> --lun <lun, for example 0>
```

#### <span data-ttu-id="3be31-906"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Копирование дисков между учетными записями хранения Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-906"><a name="9789b076-2011-4afa-b2fe-b07a8aba58a1"></a>Copying disks between Azure Storage Accounts</span></span>
<span data-ttu-id="3be31-907">Эта задача не может выполняться на hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-907">This task cannot be performed on hello Azure portal.</span></span> <span data-ttu-id="3be31-908">Используйте командлеты Azure PowerShell, интерфейс командной строки Azure или обозреватель хранилища стороннего поставщика.</span><span class="sxs-lookup"><span data-stu-id="3be31-908">You can use Azure PowerShell cmdlets, Azure CLI or a third-party storage browser.</span></span> <span data-ttu-id="3be31-909">Здравствуйте, командлеты PowerShell или команды CLI можно создавать и управлять больших двоичных объектов, среди которых hello возможность tooasynchronously копирования BLOB-объектов в учетных записях хранения и по регионам в рамках подписки Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-909">hello PowerShell cmdlets or CLI commands can create and manage blobs, which include hello ability tooasynchronously copy blobs across Storage Accounts and across regions within hello Azure subscription.</span></span>

##### <a name="powershell"></a><span data-ttu-id="3be31-910">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-910">Powershell</span></span>
<span data-ttu-id="3be31-911">Вы также можете копировать виртуальные жесткие диски между подписками.</span><span class="sxs-lookup"><span data-stu-id="3be31-911">You can also copy VHDs between subscriptions.</span></span> <span data-ttu-id="3be31-912">Дополнительные сведения см. в [этой статье][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="3be31-912">For more information read [this article][storage-powershell-guide-full-copy-vhd].</span></span>

<span data-ttu-id="3be31-913">базовый поток логики командлета PS hello Hello выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3be31-913">hello basic flow of hello PS cmdlet logic looks like this:</span></span>

* <span data-ttu-id="3be31-914">Создать контекст учетной записи хранилища для hello **источника** учетной записи хранилища с *New AzureStorageContext* -в разделе <https://msdn.microsoft.com/library/dn806380.aspx></span><span class="sxs-lookup"><span data-stu-id="3be31-914">Create a storage account context for hello **source** storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="3be31-915">Создать контекст учетной записи хранилища для hello **целевой** учетной записи хранилища с *New AzureStorageContext* -в разделе <https://msdn.microsoft.com/library/dn806380.aspx></span><span class="sxs-lookup"><span data-stu-id="3be31-915">Create a storage account context for hello **target** storage account with *New-AzureStorageContext* - see <https://msdn.microsoft.com/library/dn806380.aspx></span></span>
* <span data-ttu-id="3be31-916">Запустить копию hello с</span><span class="sxs-lookup"><span data-stu-id="3be31-916">Start hello copy with</span></span>

```powershell
Start-AzureStorageBlobCopy -SrcBlob <source blob name> -SrcContainer <source container name> -SrcContext <variable containing context of source storage account> -DestBlob <target blob name> -DestContainer <target container name> -DestContext <variable containing context of target storage account>
```

* <span data-ttu-id="3be31-917">Проверить состояние копии hello в цикле с hello</span><span class="sxs-lookup"><span data-stu-id="3be31-917">Check hello status of hello copy in a loop with</span></span>

```powershell
Get-AzureStorageBlobCopyState -Blob <target blob name> -Container <target container name> -Context <variable containing context of target storage account>
```

* <span data-ttu-id="3be31-918">Подключите hello новый виртуальный жесткий ДИСК tooa виртуальной машине, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="3be31-918">Attach hello new VHD tooa virtual machine as described above.</span></span>

<span data-ttu-id="3be31-919">Примеры можно найти в [этой статье][storage-powershell-guide-full-copy-vhd].</span><span class="sxs-lookup"><span data-stu-id="3be31-919">For examples see [this article][storage-powershell-guide-full-copy-vhd].</span></span>

##### <a name="cli-20"></a><span data-ttu-id="3be31-920">CLI 2.0</span><span class="sxs-lookup"><span data-stu-id="3be31-920">CLI 2.0</span></span>
* <span data-ttu-id="3be31-921">Запустить копию hello с</span><span class="sxs-lookup"><span data-stu-id="3be31-921">Start hello copy with</span></span>

```
az storage blob copy start --source-blob <source blob name> --source-container <source container name> --source-account-name <source storage account name> --source-account-key <source storage account key> --destination-container <target container name> --destination-blob <target blob name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="3be31-922">Проверьте состояние hello в том случае, если hello копии в цикле с</span><span class="sxs-lookup"><span data-stu-id="3be31-922">Check hello status if hello copy in a loop with</span></span>

```
az storage blob show --name <target blob name> --container <target container name> --account-name <target storage account name> --account-key <target storage account name>
```

* <span data-ttu-id="3be31-923">Подключите hello новый виртуальный жесткий ДИСК tooa виртуальной машине, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="3be31-923">Attach hello new VHD tooa virtual machine as described above.</span></span>

<span data-ttu-id="3be31-924">Примеры можно найти в [этой статье][storage-azure-cli-copy-blobs].</span><span class="sxs-lookup"><span data-stu-id="3be31-924">For examples see [this article][storage-azure-cli-copy-blobs].</span></span>

### <a name="disk-handling"></a><span data-ttu-id="3be31-925">Управление дисками</span><span class="sxs-lookup"><span data-stu-id="3be31-925">Disk Handling</span></span>
#### <span data-ttu-id="3be31-926"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>Структура виртуальной машины и диска для развертываний SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-926"><a name="4efec401-91e0-40c0-8e64-f2dceadff646"></a>VM/disk structure for SAP deployments</span></span>
<span data-ttu-id="3be31-927">В идеале hello Обработка структуры hello виртуальной машины и связанных hello диски должны быть очень простыми.</span><span class="sxs-lookup"><span data-stu-id="3be31-927">Ideally hello handling of hello structure of a VM and hello associated disks should be very simple.</span></span> <span data-ttu-id="3be31-928">Для локальных установок клиенты разработали много способов структурирования серверной установки.</span><span class="sxs-lookup"><span data-stu-id="3be31-928">In on-premises installations, customers developed many ways of structuring a server installation.</span></span>

* <span data-ttu-id="3be31-929">Один базовый диск, содержащий hello ОС и все двоичные файлы hello объекта hello СУБД и SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-929">One base disk which contains hello OS and all hello binaries of hello DBMS and/or SAP.</span></span> <span data-ttu-id="3be31-930">С марта 2015 г. Этот диск можно вверх too1TB размер вместо более ранней ограничения, которые ограничены его too127GB.</span><span class="sxs-lookup"><span data-stu-id="3be31-930">Since March 2015, this disk can be up too1TB in size instead of earlier restrictions that limited it too127GB.</span></span>
* <span data-ttu-id="3be31-931">Один или несколько дисков, содержащих hello СУБД журнала файла базы данных SAP hello и файлов журналов hello hello временной области хранения СУБД (если hello СУБД это поддерживает).</span><span class="sxs-lookup"><span data-stu-id="3be31-931">One or multiple disks which contains hello DBMS log file of hello SAP database and hello log file of hello DBMS temp storage area (if hello DBMS supports this).</span></span> <span data-ttu-id="3be31-932">Если требования к операций ввода-ВЫВОДА журнала базы данных hello высоки, toostripe необходимо несколько дисков в порядке tooreach hello операций ввода-ВЫВОДА тома требуется.</span><span class="sxs-lookup"><span data-stu-id="3be31-932">If hello database log IOPS requirements are high, you need toostripe multiple disks in order tooreach hello IOPS volume required.</span></span>
* <span data-ttu-id="3be31-933">Количество дисков, содержащих один или два файла базы данных из базы данных SAP hello и hello временные файлы данных СУБД также (если hello СУБД это поддерживает).</span><span class="sxs-lookup"><span data-stu-id="3be31-933">A number of disks containing one or two database files of hello SAP database and hello DBMS temp data files as well (if hello DBMS supports this).</span></span>

![Эталонная конфигурация виртуальной машины Azure IaaS для SAP][planning-guide-figure-1300]

[comment]: <> (MShermannd, TODO: опишите структуру Linux )

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-937">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-937">Windows</span></span>
>
> <span data-ttu-id="3be31-938">У многих клиентов мы видели конфигурации, where, например, двоичные файлы SAP и СУБД не были установлены на диске c:\ hello, где hello установлена ОС.</span><span class="sxs-lookup"><span data-stu-id="3be31-938">With many customers we saw configurations where, for example, SAP and DBMS binaries were not installed on hello c:\ drive where hello OS was installed.</span></span> <span data-ttu-id="3be31-939">Обнаружены различные причины, но когда мы вернемся корневой toohello, обычно оказывалось, что hello диски были слишком малы, и обновлениям ОС требовалось дополнительное пространство 10 – 15 лет назад.</span><span class="sxs-lookup"><span data-stu-id="3be31-939">There were various reasons for this, but when we went back toohello root, it usually was that hello drives were small and OS upgrades needed additional space 10-15 years ago.</span></span> <span data-ttu-id="3be31-940">Оба этих условия в наши дни встречаются редко.</span><span class="sxs-lookup"><span data-stu-id="3be31-940">Both conditions do not apply these days too often anymore.</span></span> <span data-ttu-id="3be31-941">Сегодня диск c:\ hello могут быть сопоставлены большого тома дисков или на виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="3be31-941">Today hello c:\ drive can be mapped on large volume disks or VMs.</span></span> <span data-ttu-id="3be31-942">Это простоту структуры развертываний tookeep заказа, рекомендуется toofollow следующий шаблон развертывания для систем SAP NetWeaver в Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-942">In order tookeep deployments simple in their structure, it is recommended toofollow the following deployment pattern for SAP NetWeaver systems in Azure</span></span>
>
> <span data-ttu-id="3be31-943">файл подкачки операционной системы Windows Hello должен находиться на hello диск D: (временном диске)</span><span class="sxs-lookup"><span data-stu-id="3be31-943">hello Windows operating system pagefile should be on hello D: drive (non-persistent disk)</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-945">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-945">Linux</span></span>
>
> <span data-ttu-id="3be31-946">Поместите swapfile Linux hello в/mnt/mnt/resource в Linux, как описано в [в этой статье][virtual-machines-linux-agent-user-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-946">Place hello Linux swapfile under /mnt /mnt/resource on Linux as described in [this article][virtual-machines-linux-agent-user-guide].</span></span> <span data-ttu-id="3be31-947">файл подкачки Hello можно настроить в файле конфигурации hello hello /etc/waagent.conf агент для Linux.</span><span class="sxs-lookup"><span data-stu-id="3be31-947">hello swap file can be configured in hello configuration file of hello Linux Agent /etc/waagent.conf.</span></span> <span data-ttu-id="3be31-948">Добавить или изменить hello следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="3be31-948">Add or change hello following settings:</span></span>
>
>

```
ResourceDisk.EnableSwap=y
ResourceDisk.SwapSizeMB=30720
```

<span data-ttu-id="3be31-949">tooactivate hello изменения, необходимо toorestart hello агент Linux с</span><span class="sxs-lookup"><span data-stu-id="3be31-949">tooactivate hello changes, you need toorestart hello Linux Agent with</span></span>

```
sudo service waagent restart
```

<span data-ttu-id="3be31-950">Прочтите Примечание SAP [1597355] для получения дополнительных сведений о hello рекомендуется использовать размер файла подкачки</span><span class="sxs-lookup"><span data-stu-id="3be31-950">Please read SAP Note [1597355] for more details on hello recommended swap file size</span></span>

- - -
<span data-ttu-id="3be31-951">Hello количество дисков, используемых для файлов данных СУБД hello и hello тип хранилища Azure, размещенных на этих дисках должно определяться hello IOPS требования и необходимые задержки hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-951">hello number of disks used for hello DBMS data files and hello type of Azure Storage these disks are hosted on should be determined by hello IOPS requirements and hello latency required.</span></span> <span data-ttu-id="3be31-952">Точные квоты описаны в [этой][virtual-machines-sizes-linux] (Linux) и [этой статье][virtual-machines-sizes-windows] (Windows).</span><span class="sxs-lookup"><span data-stu-id="3be31-952">Exact quotas are described in [this article (Linux)][virtual-machines-sizes-linux] and [this article (Windows)][virtual-machines-sizes-windows].</span></span>

<span data-ttu-id="3be31-953">Взаимодействие с SAP развертываний через hello последние два года при изучении нам некоторых уроках, которые можно описать как:</span><span class="sxs-lookup"><span data-stu-id="3be31-953">Experience of SAP deployments over hello last 2 years taught us some lessons which can be summarized as:</span></span>

* <span data-ttu-id="3be31-954">Файлы данных toodifferent трафика операций ввода-ВЫВОДА не всегда hello же, поскольку существующие системы клиента может по-разному размера данных файлов, представляющих их баз данных SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-954">IOPS traffic toodifferent data files is not always hello same since existing customer systems might have differently sized data files representing their SAP database(s).</span></span> <span data-ttu-id="3be31-955">В результате оказалось лучше использовать конфигурацию RAID через несколько дисков tooplace hello файлов данных, LUN вырезано из тех, toobe.</span><span class="sxs-lookup"><span data-stu-id="3be31-955">As a result it turned out toobe better using a RAID configuration over multiple disks tooplace hello data files LUNs carved out of those.</span></span> <span data-ttu-id="3be31-956">Обнаружены ситуациях, особенно в случае стандартного хранилища Azure, где скорость операций ввода-ВЫВОДА попаданий hello Квота один диск для журнала транзакций СУБД hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-956">There were situations, especially with Azure Standard Storage where an IOPS rate hit hello quota of a single disk against hello DBMS transaction log.</span></span> <span data-ttu-id="3be31-957">В таких случаях рекомендуется использовать хранилище Premium hello, или в качестве альтернативы статистической обработки нескольких стандартное хранилище дисков с программным RAID.</span><span class="sxs-lookup"><span data-stu-id="3be31-957">In such scenarios hello use of Premium Storage is recommended or alternatively aggregating multiple Standard Storage disks with a software RAID.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-959">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-959">Windows</span></span>
>
> * <span data-ttu-id="3be31-960">[Рекомендации по оптимизации производительности SQL Server на виртуальных машинах Azure][virtual-machines-sql-server-performance-best-practices]</span><span class="sxs-lookup"><span data-stu-id="3be31-960">[Performance best practices for SQL Server in Azure Virtual Machines][virtual-machines-sql-server-performance-best-practices]</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-962">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-962">Linux</span></span>
>
> * <span data-ttu-id="3be31-963">[Настройка программного RAID-массива в Linux][virtual-machines-linux-configure-raid]</span><span class="sxs-lookup"><span data-stu-id="3be31-963">[Configure Software RAID on Linux][virtual-machines-linux-configure-raid]</span></span>
> * <span data-ttu-id="3be31-964">[Настройка диспетчера логических томов на виртуальной машине Linux в Azure][virtual-machines-linux-configure-lvm]</span><span class="sxs-lookup"><span data-stu-id="3be31-964">[Configure LVM on a Linux VM in Azure][virtual-machines-linux-configure-lvm]</span></span>
> * [<span data-ttu-id="3be31-965">Секреты хранилища Azure и оптимизация ввода-вывода для Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-965">Azure Storage secrets and Linux I/O optimizations</span></span>](http://blogs.msdn.com/b/igorpag/archive/2014/10/23/azure-storage-secrets-and-linux-i-o-optimizations.aspx)
>
>

- - -
* <span data-ttu-id="3be31-966">Хранилище класса Premium демонстрирует значительно более высокую производительность, особенно по критически важному параметру записи журналов транзакций.</span><span class="sxs-lookup"><span data-stu-id="3be31-966">Premium Storage is showing significant better performance, especially for critical transaction log writes.</span></span> <span data-ttu-id="3be31-967">Для сценариев SAP, произведенным ожидаемый toodeliver как производительности настоятельно рекомендуется toouse Серия виртуальных Машин, которое можно использовать хранилище Azure класса Premium.</span><span class="sxs-lookup"><span data-stu-id="3be31-967">For SAP scenarios that are expected toodeliver production like performance, it is highly recommended toouse VM-Series that can leverage Azure Premium Storage.</span></span>

<span data-ttu-id="3be31-968">Учитывайте этот диск hello, содержащий hello ОС, и как мы рекомендуем hello двоичные файлы SAP и hello базы данных (базовой ВМ), больше не ограниченной too127GB.</span><span class="sxs-lookup"><span data-stu-id="3be31-968">Keep in mind that hello disk which contains hello OS, and as we recommend, hello binaries of SAP and hello database (base VM) as well, is not anymore limited too127GB.</span></span> <span data-ttu-id="3be31-969">Он теперь может содержать до too1TB в размере.</span><span class="sxs-lookup"><span data-stu-id="3be31-969">It now can have up too1TB in size.</span></span> <span data-ttu-id="3be31-970">Это должно быть достаточно места tookeep, все hello, включая необходимый файл, например, журналы пакетных заданий SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-970">This should be enough space tookeep all hello necessary file including, for example, SAP batch job logs.</span></span>

<span data-ttu-id="3be31-971">Для Дополнительные рекомендации и Дополнительные сведения, особенно для ВМ СУБД, обратитесь к hello [руководство по развертыванию СУБД][dbms-guide]</span><span class="sxs-lookup"><span data-stu-id="3be31-971">For more suggestions and more details, specifically for DBMS VMs, please consult hello [DBMS Deployment Guide][dbms-guide]</span></span>

#### <a name="disk-handling"></a><span data-ttu-id="3be31-972">Управление дисками</span><span class="sxs-lookup"><span data-stu-id="3be31-972">Disk Handling</span></span>
<span data-ttu-id="3be31-973">В большинстве случаев необходимо toocreate дополнительные диски в базы данных SAP hello toodeploy заказа в hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-973">In most scenarios you need toocreate additional disks in order toodeploy hello SAP database into hello VM.</span></span> <span data-ttu-id="3be31-974">Мы говорили о вопросах hello на количество дисков в главе [структуры ВМ/диска для развертываний SAP] [ planning-guide-5.5.1] этого документа.</span><span class="sxs-lookup"><span data-stu-id="3be31-974">We talked about hello considerations on number of disks in chapter [VM/disk structure for SAP deployments][planning-guide-5.5.1] of this document.</span></span> <span data-ttu-id="3be31-975">Hello Azure портал позволяет tooattach и отключать диски после развертывания базовой ВМ.</span><span class="sxs-lookup"><span data-stu-id="3be31-975">hello Azure portal allows tooattach and detach disks once a base VM is deployed.</span></span> <span data-ttu-id="3be31-976">Hello диски можно подключать и отключать, если hello виртуальная машина работает и запущены, а также при остановке.</span><span class="sxs-lookup"><span data-stu-id="3be31-976">hello disks can be attached/detached when hello VM is up and running as well as when it is stopped.</span></span> <span data-ttu-id="3be31-977">При подключении диска, hello портал Azure предлагает tooattach пустой диск или существующий диск, который на данный момент времени не присоединен tooanother виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-977">When attaching a disk, hello Azure portal offers tooattach an empty disk or an existing disk which at this point in time is not attached tooanother VM.</span></span>

<span data-ttu-id="3be31-978">**Примечание**: вложенные tooone ВМ диски можно только в любой момент времени.</span><span class="sxs-lookup"><span data-stu-id="3be31-978">**Note**: Disks can only be attached tooone VM at any given time.</span></span>

![Подключение и отключение дисков: служба хранилища Azure класса "Стандартный"][planning-guide-figure-1400]

<span data-ttu-id="3be31-980">Во время развертывания hello новой виртуальной машины можно ли вы, чтобы toouse управляемых дисков или разместить на дисках на учетных записях хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-980">During hello deployment of a new virtual machine, you can decide whether you want toouse Managed Disks or place your disks on Azure Storage Accounts.</span></span> <span data-ttu-id="3be31-981">Если вы хотите toouse хранилище Premium, рекомендуется использовать управляемых дисков.</span><span class="sxs-lookup"><span data-stu-id="3be31-981">If you want toouse Premium Storage, we recommend using Managed Disks.</span></span>

<span data-ttu-id="3be31-982">Далее необходимо toodecide ли при необходимости, tooselect существующий диск, который был отправлен ранее и должен быть подключен toohello ВМ теперь или требуется toocreate новый и пустой диск.</span><span class="sxs-lookup"><span data-stu-id="3be31-982">Next, you need toodecide whether you want toocreate a new and empty disk or whether you want tooselect an existing disk that was uploaded earlier and should be attached toohello VM now.</span></span>

<span data-ttu-id="3be31-983">**ВАЖНЫЕ**: вы **не** требуется toouse кэширование узла с помощью стандартного хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-983">**IMPORTANT**: You **DO NOT** want toouse Host Caching with Azure Standard Storage.</span></span> <span data-ttu-id="3be31-984">Настройки кэша узла hello следует оставить в hello значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3be31-984">You should leave hello Host Cache preference at hello default of NONE.</span></span> <span data-ttu-id="3be31-985">С помощью хранилища Azure Premium следует включить кэширование чтения если характеристик ввода-вывода hello основном чтения как типичные трафик ввода-вывода в файлах данных базы данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-985">With Azure Premium Storage you should enable Read Caching if hello I/O characteristic is mostly read like typical I/O traffic against database data files.</span></span> <span data-ttu-id="3be31-986">Для файла журнала транзакций базы данных мы рекомендуем не использовать кэширование.</span><span class="sxs-lookup"><span data-stu-id="3be31-986">In case of database transaction log file no caching is recommended.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-988">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-988">Windows</span></span>
>
> <span data-ttu-id="3be31-989">[Tooattach данных места на диске в hello портал Azure][virtual-machines-linux-attach-disk-portal]</span><span class="sxs-lookup"><span data-stu-id="3be31-989">[How tooattach a data disk in hello Azure portal][virtual-machines-linux-attach-disk-portal]</span></span>
>
> <span data-ttu-id="3be31-990">Если диски подключены, то необходимо toolog в toohello ВМ tooopen hello диспетчера дисков Windows.</span><span class="sxs-lookup"><span data-stu-id="3be31-990">If disks are attached, you need toolog in toohello VM tooopen hello Windows Disk Manager.</span></span> <span data-ttu-id="3be31-991">Если automount не включена, согласно рекомендациям в главе [Установка параметра automount для присоединенных дисков][planning-guide-5.5.3], hello новый подключенный том должен toobe выполнены через Интернет и инициализирована.</span><span class="sxs-lookup"><span data-stu-id="3be31-991">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3], hello newly attached volume needs toobe taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-993">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-993">Linux</span></span>
>
> <span data-ttu-id="3be31-994">Если диски подключены, нужно toolog в toohello ВМ и инициализировать диски hello, как описано в [в данной статье][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span><span class="sxs-lookup"><span data-stu-id="3be31-994">If disks are attached, you need toolog in toohello VM and initialize hello disks as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux]</span></span>
>
>

- - -
<span data-ttu-id="3be31-995">Если новый диск hello пустой диск, потребуется также диск hello tooformat.</span><span class="sxs-lookup"><span data-stu-id="3be31-995">If hello new disk is an empty disk, you need tooformat hello disk as well.</span></span> <span data-ttu-id="3be31-996">Для форматирования, особенно для СУБД файлов данных и журналов hello такие же требования для развертывания ОС hello распространяются СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-996">For formatting, especially for DBMS data and log files hello same recommendations as for bare-metal deployments of hello DBMS apply.</span></span>

<span data-ttu-id="3be31-997">Как уже упоминалось в главе [hello понятие виртуальной машины Microsoft Azure][planning-guide-3.2], учетная запись хранения Azure не предоставляет неограниченные ресурсы в отношении объем операций ввода-вывода, операций ввода-ВЫВОДА и данных тома.</span><span class="sxs-lookup"><span data-stu-id="3be31-997">As already mentioned in chapter [hello Microsoft Azure Virtual Machine Concept][planning-guide-3.2], an Azure Storage account does not provide infinite resources in terms of I/O volume, IOPS and data volume.</span></span> <span data-ttu-id="3be31-998">Такие ограничения наиболее критичны для виртуальных машин с СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-998">Usually DBMS VMs are most affected by this.</span></span> <span data-ttu-id="3be31-999">Может быть лучшим toouse отдельную учетную запись хранилища для каждой виртуальной Машины, если у вас есть несколько высокой toodeploy виртуальных машин для ввода-вывода тома в toostay порядке в пределах "hello" hello тома учетной записи хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-999">It might be best toouse a separate Storage Account for each VM if you have few high I/O volume VMs toodeploy in order toostay within hello limit of hello Azure Storage Account volume.</span></span> <span data-ttu-id="3be31-1000">В противном случае необходимо toosee как можно сбалансировать эти ВМ между разными учетными записями хранения без прерывания в ограничение hello в каждой отдельной учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1000">Otherwise, you need toosee how you can balance these VMs between different Storage accounts without hitting hello limit of each single Storage Account.</span></span> <span data-ttu-id="3be31-1001">Дополнительные сведения см. в hello [руководство по развертыванию СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1001">More details are discussed in hello [DBMS Deployment Guide][dbms-guide].</span></span> <span data-ttu-id="3be31-1002">Эти ограничения должны учитываться и для виртуальных машин, на которых работают только серверы приложения SAP, или других виртуальных машин, для которых позднее могут потребоваться дополнительные виртуальные жесткие диски.</span><span class="sxs-lookup"><span data-stu-id="3be31-1002">You should also keep these limitations in mind for pure SAP application server VMs or other VMs which eventually might require additional VHDs.</span></span> <span data-ttu-id="3be31-1003">Эти ограничения не применяются при использовании управляемого диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-1003">These restrictions do not apply if you use Managed Disk.</span></span> <span data-ttu-id="3be31-1004">Если планируется toouse хранилище Premium, рекомендуется использовать управляемые диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-1004">If you plan toouse Premium Storage, we recommend using Managed Disk.</span></span>

<span data-ttu-id="3be31-1005">Другой раздел, который используется для учетных записей хранения является ли hello VHD в учетной записи хранилища георепликации.</span><span class="sxs-lookup"><span data-stu-id="3be31-1005">Another topic which is relevant for Storage Accounts is whether hello VHDs in a Storage Account are getting Geo-replicated.</span></span> <span data-ttu-id="3be31-1006">Георепликация включена или отключена на hello уровне учетной записи хранения, а не на hello уровня виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1006">Geo-replication is enabled or disabled on hello Storage Account level and not on hello VM level.</span></span> <span data-ttu-id="3be31-1007">Если географическая репликация включена, hello VHD в учетной записи хранения будут реплицироваться в другой центр обработки данных Azure в течение приветствия hello одного региона.</span><span class="sxs-lookup"><span data-stu-id="3be31-1007">If geo-replication is enabled, hello VHDs within hello Storage Account would be replicated into another Azure data center within hello same region.</span></span> <span data-ttu-id="3be31-1008">Прежде чем производить на это, следует подумать о hello следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="3be31-1008">Before deciding on this, you should think about hello following restriction:</span></span>

<span data-ttu-id="3be31-1009">Георепликация Azure работает локально в каждый виртуальный жесткий ДИСК на виртуальной машине и не реплицируется IOs hello в хронологическом порядке по нескольким VHD на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="3be31-1009">Azure Geo-replication works locally on each VHD in a VM and does not replicate hello IOs in chronological order across multiple VHDs in a VM.</span></span> <span data-ttu-id="3be31-1010">Таким образом hello виртуального жесткого диска, что представляет hello базовой ВМ, а также любые дополнительные VHD, подключенные toohello ВМ, реплицируются независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="3be31-1010">Therefore, hello VHD that represents hello base VM as well as any additional VHDs attached toohello VM are replicated independent of each other.</span></span> <span data-ttu-id="3be31-1011">Это означает, что синхронизация между изменениями hello в hello не разным VHD.</span><span class="sxs-lookup"><span data-stu-id="3be31-1011">This means there is no synchronization between hello changes in hello different VHDs.</span></span> <span data-ttu-id="3be31-1012">Hello факт, что hello операций ввода-вывода реплицируются независимо от порядка hello, в котором они написаны означает, что георепликация значения для серверов баз данных с базами данных, распределенными по нескольким VHD.</span><span class="sxs-lookup"><span data-stu-id="3be31-1012">hello fact that hello IOs are replicated independently of hello order in which they are written means that geo-replication is not of value for database servers that have their databases distributed over multiple VHDs.</span></span> <span data-ttu-id="3be31-1013">В дополнение toohello СУБД также могут существовать другие приложения, где процессы запись или изменение данных в разных VHD, и там, где это порядок hello tookeep важных изменений.</span><span class="sxs-lookup"><span data-stu-id="3be31-1013">In addition toohello DBMS, there also might be other applications where processes write or manipulate data in different VHDs and where it is important tookeep hello order of changes.</span></span> <span data-ttu-id="3be31-1014">Если у вас есть такие приложения, не следует включать георепликацию в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1014">If that is a requirement, geo-replication in Azure should not be enabled.</span></span> <span data-ttu-id="3be31-1015">Если в вашей среде нужна георепликация для одного набора виртуальных машин, но не нужна для другого набора, вы можете распределить виртуальные машины и подключенные к ним виртуальные жесткие диски между несколькими учетными записями хранения, для которых георепликация будет включена или отключена.</span><span class="sxs-lookup"><span data-stu-id="3be31-1015">Dependent on whether you need or want geo-replication for a set of VMs, but not for another set, you can already categorize VMs and their related VHDs into different Storage Accounts that have geo-replication enabled or disabled.</span></span>

#### <span data-ttu-id="3be31-1016"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Настройка автоподключения для подключенных дисков</span><span class="sxs-lookup"><span data-stu-id="3be31-1016"><a name="17e0d543-7e8c-4160-a7da-dd7117a1ad9d"></a>Setting automount for attached disks</span></span>
- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-1018">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1018">Windows</span></span>
>
> <span data-ttu-id="3be31-1019">Для виртуальных машин, которые создаются из собственных образов или дисков, это необходимые toocheck и возможно установить параметр automount hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1019">For VMs which are created from own Images or Disks, it is necessary toocheck and possibly set hello automount parameter.</span></span> <span data-ttu-id="3be31-1020">Установка этого параметра позволит hello виртуальной Машины, после перезагрузки или повторного развертывания в Azure toomount hello подключаемые/монтируемые диски автоматически.</span><span class="sxs-lookup"><span data-stu-id="3be31-1020">Setting this parameter will allow hello VM after a restart or redeployment in Azure toomount hello attached/mounted drives again automatically.</span></span>
> <span data-ttu-id="3be31-1021">имеет параметр для hello образов, предоставляемых корпорацией Майкрософт в Azure Marketplace hello Hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1021">hello parameter is set for hello images provided by Microsoft in hello Azure Marketplace.</span></span>
>
> <span data-ttu-id="3be31-1022">В порядке tooset hello automount Проверьте документацию hello hello командной строки исполняемому diskpart.exe здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-1022">In order tooset hello automount, please check hello documentation of hello command-line executable diskpart.exe here:</span></span>
>
> * [<span data-ttu-id="3be31-1023">Параметры командной строки служебной программы DiskPart</span><span class="sxs-lookup"><span data-stu-id="3be31-1023">DiskPart Command-Line Options</span></span>](https://technet.microsoft.com/library/bb490893.aspx)
> * [<span data-ttu-id="3be31-1024">Автоподключение</span><span class="sxs-lookup"><span data-stu-id="3be31-1024">Automount</span></span>](http://technet.microsoft.com/library/cc753703.aspx)
>
> <span data-ttu-id="3be31-1025">окно командной строки Windows Hello следует открывать от имени администратора.</span><span class="sxs-lookup"><span data-stu-id="3be31-1025">hello Windows command-line window should be opened as administrator.</span></span>
>
> <span data-ttu-id="3be31-1026">Если диски подключены, то необходимо toolog в toohello ВМ tooopen hello диспетчера дисков Windows.</span><span class="sxs-lookup"><span data-stu-id="3be31-1026">If disks are attached, you need toolog in toohello VM tooopen hello Windows Disk Manager.</span></span> <span data-ttu-id="3be31-1027">Если automount не включена, согласно рекомендациям в главе [Установка параметра automount для присоединенных дисков][planning-guide-5.5.3], hello новые подключенные тома > должен toobe выполнены через Интернет и инициализирована.</span><span class="sxs-lookup"><span data-stu-id="3be31-1027">If automount is not enabled as recommended in chapter [Setting automount for attached disks][planning-guide-5.5.3],  hello newly attached volume >needs toobe taken online and initialized.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-1029">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1029">Linux</span></span>
>
> <span data-ttu-id="3be31-1030">Необходимо tooinitialize присоединенную пустой диск, как описано в [в этой статье][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span><span class="sxs-lookup"><span data-stu-id="3be31-1030">You need tooinitialize a newly attached empty disk as described in [this article][virtual-machines-linux-how-to-attach-disk-how-to-initialize-a-new-data-disk-in-linux].</span></span>
> <span data-ttu-id="3be31-1031">Необходимо также tooadd новые диски toohello/etc/fstab.</span><span class="sxs-lookup"><span data-stu-id="3be31-1031">You also need tooadd new disks toohello /etc/fstab.</span></span>
>
>

- - -
### <a name="final-deployment"></a><span data-ttu-id="3be31-1032">Окончательное развертывание</span><span class="sxs-lookup"><span data-stu-id="3be31-1032">Final Deployment</span></span>
<span data-ttu-id="3be31-1033">Hello окончательного развертывания и точные действия, особенно в отношении toohello развертывания расширенного мониторинга SAP, см. toohello [руководство по развертыванию][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1033">For hello final deployment and exact steps, especially with regards toohello deployment of SAP Extended Monitoring, please refer toohello [Deployment Guide][deployment-guide].</span></span>

## <a name="accessing-sap-systems-running-within-azure-vms"></a><span data-ttu-id="3be31-1034">Доступ к системам SAP, работающим на виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1034">Accessing SAP systems running within Azure VMs</span></span>
<span data-ttu-id="3be31-1035">При использовании только для облака может потребоваться систем SAP toothose tooconnect через hello общедоступный Интернет с помощью графического интерфейса SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1035">For Cloud-Only scenarios, you might want tooconnect toothose SAP systems across hello public internet using SAP GUI.</span></span> <span data-ttu-id="3be31-1036">В этих случаях hello следующие процедуры должны toobe применения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1036">For these cases, hello following procedures need toobe applied.</span></span>

<span data-ttu-id="3be31-1037">Далее в документе hello, мы обсудим hello другие основные сценарии, подключающегося систем tooSAP в конфигурациях между организациями, имеющие подключения сеть сеть (VPN-туннель) или соединение Azure ExpressRoute между локальными hello и системами Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1037">Later in hello document we will discuss hello other major scenario, connecting tooSAP systems in cross-premises deployments which have a site-to-site connection (VPN tunnel) or Azure ExpressRoute connection between hello on-premises systems and Azure systems.</span></span>

### <a name="remote-access-toosap-systems"></a><span data-ttu-id="3be31-1038">Систем tooSAP удаленного доступа</span><span class="sxs-lookup"><span data-stu-id="3be31-1038">Remote Access tooSAP systems</span></span>
<span data-ttu-id="3be31-1039">С помощью диспетчера ресурсов Azure по умолчанию конечные точки не больше как в нет hello бывшая классической модели.</span><span class="sxs-lookup"><span data-stu-id="3be31-1039">With Azure Resource Manager there are no default endpoints anymore like in hello former classic model.</span></span> <span data-ttu-id="3be31-1040">При соблюдении следующих условий открыты все порты виртуальной машины Azure ARM.</span><span class="sxs-lookup"><span data-stu-id="3be31-1040">All ports of an Azure ARM VM are open as long as:</span></span>

1. <span data-ttu-id="3be31-1041">Нет группы безопасности сети определяется для hello подсети или сетевого интерфейса hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1041">No Network Security Group is defined for hello subnet or hello network interface.</span></span> <span data-ttu-id="3be31-1042">TooAzure сетевой трафик виртуальных машин может быть защищен с помощью так называемых «Сетевые группы безопасности».</span><span class="sxs-lookup"><span data-stu-id="3be31-1042">Network traffic tooAzure VMs can be secured via so-called "Network Security Groups".</span></span> <span data-ttu-id="3be31-1043">Дополнительные сведения см. в статье [Группа безопасности сети][virtual-networks-nsg].</span><span class="sxs-lookup"><span data-stu-id="3be31-1043">For more information see [What is a Network Security Group (NSG)?][virtual-networks-nsg]</span></span>
2. <span data-ttu-id="3be31-1044">Для сетевого интерфейса hello определен без подсистемы балансировки нагрузки Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1044">No Azure Load Balancer is defined for hello network interface</span></span>   

<span data-ttu-id="3be31-1045">Просмотреть hello архитектуры отличаются классической модели и ARM, как описано в [в этой статье][virtual-machines-azure-resource-manager-architecture].</span><span class="sxs-lookup"><span data-stu-id="3be31-1045">See hello architecture difference between classic model and ARM as described in [this article][virtual-machines-azure-resource-manager-architecture].</span></span>

#### <a name="configuration-of-hello-sap-system-and-sap-gui-connectivity-for-cloud-only-scenario"></a><span data-ttu-id="3be31-1046">Настройка подключения к системе SAP и графического интерфейса SAP для сценария только для облака hello</span><span class="sxs-lookup"><span data-stu-id="3be31-1046">Configuration of hello SAP System and SAP GUI connectivity for Cloud-Only scenario</span></span>
<span data-ttu-id="3be31-1047">См. в этой статье, описывающий сведения о разделе toothis: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span><span class="sxs-lookup"><span data-stu-id="3be31-1047">Please see this article which describes details toothis topic: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/06/24/sap-gui-connection-closed-when-connecting-to-sap-system-in-azure.aspx></span></span>

#### <a name="changing-firewall-settings-within-vm"></a><span data-ttu-id="3be31-1048">Изменение параметров брандмауэра на виртуальной машине</span><span class="sxs-lookup"><span data-stu-id="3be31-1048">Changing Firewall Settings within VM</span></span>
<span data-ttu-id="3be31-1049">Может быть необходимости tooconfigure hello брандмауэр на вашей виртуальной машины tooallow внешней системы SAP tooyour трафика.</span><span class="sxs-lookup"><span data-stu-id="3be31-1049">It might be necessary tooconfigure hello firewall on your virtual machines tooallow inbound traffic tooyour SAP system.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-1051">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1051">Windows</span></span>
>
> <span data-ttu-id="3be31-1052">По умолчанию hello брандмауэра Windows в Azure развернутой виртуальной Машины включена.</span><span class="sxs-lookup"><span data-stu-id="3be31-1052">By default, hello Windows Firewall within an Azure deployed VM is turned on.</span></span> <span data-ttu-id="3be31-1053">Теперь требуется tooallow hello порта SAP toobe открыт, в противном случае hello SAP GUI не будет возможности tooconnect.</span><span class="sxs-lookup"><span data-stu-id="3be31-1053">You now need tooallow hello SAP Port toobe opened, otherwise hello SAP GUI will not be able tooconnect.</span></span>
> <span data-ttu-id="3be31-1054">toodo это:</span><span class="sxs-lookup"><span data-stu-id="3be31-1054">toodo this:</span></span>
>
> * <span data-ttu-id="3be31-1055">Откройте панель управления управления\система и Безопасность\брандмауэр too'Advanced параметры.</span><span class="sxs-lookup"><span data-stu-id="3be31-1055">Open Control Panel\System and Security\Windows Firewall too‘Advanced Settings’.</span></span>
> * <span data-ttu-id="3be31-1056">Щелкните правой кнопкой мыши "Правила для входящих подключений" и выберите "Новое правило".</span><span class="sxs-lookup"><span data-stu-id="3be31-1056">Now right-click on Inbound Rules and chose ‘New Rule’.</span></span>
> * <span data-ttu-id="3be31-1057">В hello следующие мастера выбрали toocreate нового правила «Порт».</span><span class="sxs-lookup"><span data-stu-id="3be31-1057">In hello following Wizard chose toocreate a new ‘Port’ rule.</span></span>
> * <span data-ttu-id="3be31-1058">Hello следующем шаге мастера hello оставьте параметр hello TCP и введите в нужный номер порта hello tooopen.</span><span class="sxs-lookup"><span data-stu-id="3be31-1058">In hello next step of hello wizard, leave hello setting at TCP and type in hello port number you want tooopen.</span></span> <span data-ttu-id="3be31-1059">Наш экземпляр SAP имеет идентификатор 00, поэтому мы выбрали номер порта 3200.</span><span class="sxs-lookup"><span data-stu-id="3be31-1059">Since our SAP instance ID is 00, we took 3200.</span></span> <span data-ttu-id="3be31-1060">Если экземпляр имеет другой номер, должен быть открыт порт hello, заданные ранее зависимости от числа экземпляр hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1060">If your instance has a different instance number, hello port you defined earlier based on hello instance number should be opened.</span></span>
> * <span data-ttu-id="3be31-1061">В следующей части мастера hello hello необходим tooleave hello элемент «Разрешить подключение» установлен.</span><span class="sxs-lookup"><span data-stu-id="3be31-1061">In hello next part of hello wizard, you need tooleave hello item ‘Allow Connection’ checked.</span></span>
> * <span data-ttu-id="3be31-1062">Hello на следующем шаге мастера hello необходимо toodefine ли hello правило применяется для домена, общедоступной и частной сети.</span><span class="sxs-lookup"><span data-stu-id="3be31-1062">In hello next step of hello wizard you need toodefine whether hello rule applies for Domain, Private and Public network.</span></span> <span data-ttu-id="3be31-1063">Настройте это необходимые tooyour требуется.</span><span class="sxs-lookup"><span data-stu-id="3be31-1063">Please adjust it if necessary tooyour needs.</span></span> <span data-ttu-id="3be31-1064">Однако подключение с помощью графического интерфейса SAP из hello за пределами через hello общедоступной сети, необходимо toohave hello правило применяется toohello общедоступной сети.</span><span class="sxs-lookup"><span data-stu-id="3be31-1064">However, connecting with SAP GUI from hello outside through hello public network, you need toohave hello rule applied toohello public network.</span></span>
> * <span data-ttu-id="3be31-1065">В hello последний шаг мастера hello имя правила hello и сохраните изменения, нажав «Готово»</span><span class="sxs-lookup"><span data-stu-id="3be31-1065">In hello last step of hello wizard, name hello rule and save by pressing ‘Finish’</span></span>
>
> <span data-ttu-id="3be31-1066">правило Hello вступает в силу немедленно.</span><span class="sxs-lookup"><span data-stu-id="3be31-1066">hello rule becomes effective immediately.</span></span>
>
> ![Определение правила для порта][planning-guide-figure-1600]
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-1069">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1069">Linux</span></span>
>
> <span data-ttu-id="3be31-1070">Hello изображений Linux в Azure Marketplace hello не включайте hello утилита iptables брандмауэра по умолчанию, которое можно использовать системы SAP tooyour подключения hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1070">hello Linux images in hello Azure Marketplace do not enable hello iptables firewall by default and hello connection tooyour SAP system should work.</span></span> <span data-ttu-id="3be31-1071">Если включена утилита iptables или другой брандмауэр, см. в документации toohello утилита iptables или hello используется брандмауэр tooallow слишком входящий трафик tcp через порт 32xx (где xx — номер системы hello системы SAP).</span><span class="sxs-lookup"><span data-stu-id="3be31-1071">If you enabled iptables or another firewall, please refer toohello documentation of iptables or hello used firewall tooallow inbound tcp traffic too port 32xx (where xx is hello system number of your SAP system).</span></span>
>
>

- - -
#### <a name="security-recommendations"></a><span data-ttu-id="3be31-1072">Рекомендации по обеспечению безопасности</span><span class="sxs-lookup"><span data-stu-id="3be31-1072">Security recommendations</span></span>
<span data-ttu-id="3be31-1073">Hello SAP GUI не подключается сразу tooany экземпляров hello SAP (через порт 32xx), которые выполняются, но сначала он подключается через Привет открыть порт toohello процесса сервера сообщений SAP (порт 36xx).</span><span class="sxs-lookup"><span data-stu-id="3be31-1073">hello SAP GUI does not connect immediately tooany of hello SAP instances (port 32xx) which are running, but first connects via hello port opened toohello SAP message server process (port 36xx).</span></span> <span data-ttu-id="3be31-1074">В hello за hello тот же порт использовался сервером сообщений hello для экземпляров приложения toohello hello внутреннего взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="3be31-1074">In hello past hello very same port was used by hello message server for hello internal communication toohello application instances.</span></span> <span data-ttu-id="3be31-1075">tooprevent локальные серверы приложений случайно взаимодействие с сервером сообщений в Azure hello внутренние порты связи можно изменить.</span><span class="sxs-lookup"><span data-stu-id="3be31-1075">tooprevent on-premises application servers from inadvertently communicating with a message server in Azure hello internal communication ports can be changed.</span></span> <span data-ttu-id="3be31-1076">Настоятельно рекомендуется toochange hello внутренний обмен данными между сервером сообщений SAP hello и его приложения экземпляров tooa другой номер порта в системах, которые были клонированы из локальных систем, таких как клоны системы разработки для тестирования проекта и т. д. Это можно сделать с помощью параметра профиля по умолчанию hello:</span><span class="sxs-lookup"><span data-stu-id="3be31-1076">It is highly recommended toochange hello internal communication between hello SAP message server and its application instances tooa different port number on systems that have been cloned from on-premises systems, such as a clone of development for project testing etc. This can be done with hello default profile parameter:</span></span>

> <span data-ttu-id="3be31-1077">rdisp/msserv_internal</span><span class="sxs-lookup"><span data-stu-id="3be31-1077">rdisp/msserv_internal</span></span>
>
>

<span data-ttu-id="3be31-1078">как описано в документе [параметры безопасности для hello сервером сообщений SAP](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm)</span><span class="sxs-lookup"><span data-stu-id="3be31-1078">as documented in [Security Settings for hello SAP Message Server ](https://help.sap.com/saphelp_nwpi71/helpdata/en/47/c56a6938fb2d65e10000000a42189c/content.htm)</span></span>

## <span data-ttu-id="3be31-1079"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Концепция полностью облачного развертывания экземпляров SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1079"><a name="96a77628-a05e-475d-9df3-fb82217e8f14"></a>Concepts of Cloud-Only deployment of SAP instances</span></span>
### <span data-ttu-id="3be31-1080"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Обучающий сценарий с демонстрацией одной виртуальной машины с SAP NetWeaver</span><span class="sxs-lookup"><span data-stu-id="3be31-1080"><a name="3e9c3690-da67-421a-bc3f-12c520d99a30"></a>Single VM with SAP NetWeaver demo/training scenario</span></span>
![Под управлением одной ВМ SAP демонстрационных систем с hello одинаковыми именами ВМ, изолированных в облачных службах Azure][planning-guide-figure-1700]

<span data-ttu-id="3be31-1082">В этом сценарии (см главу [только для облака] [ planning-guide-2.1] этого документа) будет реализована типичная обучающая или демонстрационная сценарий системы, где содержится сценарий завершения обучения или демонстрации hello в одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1082">In this scenario (see chapter [Cloud-Only][planning-guide-2.1] of this document) we are implementing a typical training/demo system scenario where hello complete training/demo scenario is contained in a single VM.</span></span> <span data-ttu-id="3be31-1083">Мы предполагаем, что hello развертывания выполняется с помощью шаблонов образа ВМ.</span><span class="sxs-lookup"><span data-stu-id="3be31-1083">We assume that hello deployment is done through VM image templates.</span></span> <span data-ttu-id="3be31-1084">Также предполагается, что несколько развернутых с помощью виртуальных машин с hello hello эти необходимость toobe демонстрационных/обучающих ВМ же имя.</span><span class="sxs-lookup"><span data-stu-id="3be31-1084">We also assume that multiple of these demo/trainings VMs need toobe deployed with hello VMs having hello same name.</span></span>

<span data-ttu-id="3be31-1085">Hello предполагается создан образ виртуальной Машины, как описано в некоторых разделах главе [Подготовка ВМ с SAP для Azure] [ planning-guide-5.2] в настоящем документе.</span><span class="sxs-lookup"><span data-stu-id="3be31-1085">hello assumption is that you created a VM Image as described in some sections of chapter [Preparing VMs with SAP for Azure][planning-guide-5.2] in this document.</span></span>

<span data-ttu-id="3be31-1086">Hello последовательности событий tooimplement hello сценария выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3be31-1086">hello sequence of events tooimplement hello scenario looks like this:</span></span>

##### <a name="powershell"></a><span data-ttu-id="3be31-1087">PowerShell</span><span class="sxs-lookup"><span data-stu-id="3be31-1087">Powershell</span></span>
* <span data-ttu-id="3be31-1088">Создайте группу ресурсов для каждого обучающего или демонстрационного ландшафта.</span><span class="sxs-lookup"><span data-stu-id="3be31-1088">Create a new resource group for every training/demo landscape</span></span>

```powershell
$rgName = "SAPERPDemo1"
New-AzureRmResourceGroup -Name $rgName -Location "North Europe"
```
* <span data-ttu-id="3be31-1089">Создание учетной записи хранилища, если вы не хотите toouse управляемых дисков</span><span class="sxs-lookup"><span data-stu-id="3be31-1089">Create a new storage account if you don't want toouse Managed Disks</span></span>

```powershell
$suffix = Get-Random -Minimum 100000 -Maximum 999999
$account = New-AzureRmStorageAccount -ResourceGroupName $rgName -Name "saperpdemo$suffix" -SkuName Standard_LRS -Kind "Storage" -Location "North Europe"
```

* <span data-ttu-id="3be31-1090">Создайте новую виртуальную сеть каждое обучения или демонстрации tooenable альбомная hello использование hello того же имени узла и IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="3be31-1090">Create a new virtual network for every training/demo landscape tooenable hello usage of hello same hostname and IP addresses.</span></span> <span data-ttu-id="3be31-1091">Виртуальная сеть Hello защищен сетевой группы безопасности, которая позволяет выполнять только трафик tooport 3389 tooenable удаленного рабочего стола доступа и порт 22 SSH.</span><span class="sxs-lookup"><span data-stu-id="3be31-1091">hello virtual network is protected by a Network Security Group that only allows traffic tooport 3389 tooenable Remote Desktop access and port 22 for SSH.</span></span>

```powershell
# Create a new Virtual Network
$rdpRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGRDP -Protocol * -SourcePortRange * -DestinationPortRange 3389 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 100
$sshRule = New-AzureRmNetworkSecurityRuleConfig -Name SAPERPDemoNSGSSH -Protocol * -SourcePortRange * -DestinationPortRange 22 -Access Allow -Direction Inbound -SourceAddressPrefix * -DestinationAddressPrefix * -Priority 101
$nsg = New-AzureRmNetworkSecurityGroup -Name SAPERPDemoNSG -ResourceGroupName $rgName -Location  "North Europe" -SecurityRules $rdpRule,$sshRule

$subnetConfig = New-AzureRmVirtualNetworkSubnetConfig -Name Subnet1 -AddressPrefix  10.0.1.0/24 -NetworkSecurityGroup $nsg
$vnet = New-AzureRmVirtualNetwork -Name SAPERPDemoVNet -ResourceGroupName $rgName -Location "North Europe"  -AddressPrefix 10.0.1.0/24 -Subnet $subnetConfig
```

* <span data-ttu-id="3be31-1092">Создать новый общедоступный IP-адрес, который можно использовать tooaccess hello виртуальную машину из hello Интернета</span><span class="sxs-lookup"><span data-stu-id="3be31-1092">Create a new public IP address that can be used tooaccess hello virtual machine from hello internet</span></span>

```powershell
# Create a public IP address with a DNS name
$pip = New-AzureRmPublicIpAddress -Name SAPERPDemoPIP -ResourceGroupName $rgName -Location "North Europe" -DomainNameLabel $rgName.ToLower() -AllocationMethod Dynamic
```

* <span data-ttu-id="3be31-1093">Создание нового сетевого интерфейса для hello виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="3be31-1093">Create a new network interface for hello virtual machine</span></span>

```powershell
# Create a new Network Interface
$nic = New-AzureRmNetworkInterface -Name SAPERPDemoNIC -ResourceGroupName $rgName -Location "North Europe" -Subnet $vnet.Subnets[0] -PublicIpAddress $pip
```

* <span data-ttu-id="3be31-1094">Создайте виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="3be31-1094">Create a virtual machine.</span></span> <span data-ttu-id="3be31-1095">Для сценария hello только для облака все ВМ будут иметь hello таким же именем.</span><span class="sxs-lookup"><span data-stu-id="3be31-1095">For hello Cloud-Only scenario every VM will have hello same name.</span></span> <span data-ttu-id="3be31-1096">Hello ИД безопасности SAP hello SAP NetWeaver, экземпляры этих ВМ будут также hello таким же.</span><span class="sxs-lookup"><span data-stu-id="3be31-1096">hello SAP SID of hello SAP NetWeaver instances in those VMs will be hello same as well.</span></span> <span data-ttu-id="3be31-1097">В рамках hello группы ресурсов Azure, имя hello hello виртуальной Машины требуется уникальный toobe, но в разных группах ресурсов Azure можно запускать ВМ с hello таким же именем.</span><span class="sxs-lookup"><span data-stu-id="3be31-1097">Within hello Azure Resource Group, hello name of hello VM needs toobe unique, but in different Azure Resource Groups you can run VMs with hello same name.</span></span> <span data-ttu-id="3be31-1098">Здравствуйте, «Администратор» по умолчанию учетная запись Windows или 'root' для Linux не допускаются.</span><span class="sxs-lookup"><span data-stu-id="3be31-1098">hello default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="3be31-1099">Таким образом имя пользователя администратора должен toobe определен и пароль.</span><span class="sxs-lookup"><span data-stu-id="3be31-1099">Therefore, a new administrator user name needs toobe defined together with a password.</span></span> <span data-ttu-id="3be31-1100">размер Hello hello виртуальной Машины также должен toobe определен.</span><span class="sxs-lookup"><span data-stu-id="3be31-1100">hello size of hello VM also needs toobe defined.</span></span>

```powershell
#####
# Create a new virtual machine with an official image from hello Azure Marketplace
#####
$cred=Get-Credential -Message "Type hello name and password of hello local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

# select image
$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "MicrosoftWindowsServer" -Offer "WindowsServer" -Skus "2012-R2-Datacenter" -Version "latest"
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred -ProvisionVMAgent -EnableAutoUpdate
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "SUSE" -Offer "SLES-SAP" -Skus "12-SP1" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "RedHat" -Offer "RHEL" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -PublisherName "Oracle" -Offer "Oracle-Linux" -Skus "7.2" -Version "latest"
# $vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a VHD that contains hello private image that you want toouse
#####
$cred=Get-Credential -Message "Type hello name and password of hello local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$diskName="osfromimage"
$osDiskUri=$account.PrimaryEndpoints.Blob.ToString() + "vhds/" + $diskName  + ".vhd"

$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path tooVHD that contains hello OS image> -Windows
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOSDisk -VM $vmconfig -Name $diskName -VhdUri $osDiskUri -CreateOption fromImage -SourceImageUri <path tooVHD that contains hello OS image> -Linux
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

```powershell
#####
# Create a new virtual machine with a Managed Disk Image
#####
$cred=Get-Credential -Message "Type hello name and password of hello local administrator account."
$vmconfig = New-AzureRmVMConfig -VMName SAPERPDemo -VMSize Standard_D11

$vmconfig = Add-AzureRmVMNetworkInterface -VM $vmconfig -Id $nic.Id

$vmconfig = Set-AzureRmVMSourceImage -VM $vmconfig -Id <Id of Managed Disk Image>
$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Windows -ComputerName "SAPERPDemo" -Credential $cred
#$vmconfig = Set-AzureRmVMOperatingSystem -VM $vmconfig -Linux -ComputerName "SAPERPDemo" -Credential $cred

$vmconfig = Set-AzureRmVMBootDiagnostics -Disable -VM $vmconfig
$vm = New-AzureRmVM -ResourceGroupName $rgName -Location "North Europe" -VM $vmconfig
```

* <span data-ttu-id="3be31-1101">По желанию вы можете добавить дополнительные диски и восстановить необходимое содержимое.</span><span class="sxs-lookup"><span data-stu-id="3be31-1101">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="3be31-1102">Имейте в виду, что все имена больших двоичных объектов (BLOB toohello URL-адреса) должно быть уникальным в пределах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1102">Be aware that all blob names (URLs toohello blobs) must be unique within Azure.</span></span>

```powershell
# Optional: Attach additional VHD data disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
$dataDiskUri = $account.PrimaryEndpoints.Blob.ToString() + "vhds/datadisk.vhd"
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -VhdUri $dataDiskUri -DiskSizeInGB 1023 -CreateOption empty | Update-AzureRmVM

# Optional: Attach additional Managed Disks
$vm = Get-AzureRmVM -ResourceGroupName $rgName -Name SAPERPDemo
Add-AzureRmVMDataDisk -VM $vm -Name datadisk -DiskSizeInGB 1023 -CreateOption empty -Lun 0 | Update-AzureRmVM
```

##### <a name="cli"></a><span data-ttu-id="3be31-1103">Интерфейс командной строки</span><span class="sxs-lookup"><span data-stu-id="3be31-1103">CLI</span></span>
<span data-ttu-id="3be31-1104">можно использовать следующий пример кода Hello в Linux.</span><span class="sxs-lookup"><span data-stu-id="3be31-1104">hello following example code can be used on Linux.</span></span> <span data-ttu-id="3be31-1105">Для Windows, либо используйте PowerShell описанное выше или адаптировать hello пример toouse % rgName % вместо $rgName и задайте переменную среды hello, с помощью команды Windows hello *задать*.</span><span class="sxs-lookup"><span data-stu-id="3be31-1105">For Windows, please either use PowerShell as described above or adapt hello example toouse %rgName% instead of $rgName and set hello environment variable using hello Windows command *set*.</span></span>

* <span data-ttu-id="3be31-1106">Создайте группу ресурсов для каждого обучающего или демонстрационного ландшафта.</span><span class="sxs-lookup"><span data-stu-id="3be31-1106">Create a new resource group for every training/demo landscape</span></span>

```
rgName=SAPERPDemo1
rgNameLower=saperpdemo1
az group create --name $rgName --location "North Europe"
```

* <span data-ttu-id="3be31-1107">Создание новой учетной записи хранения</span><span class="sxs-lookup"><span data-stu-id="3be31-1107">Create a new storage account</span></span>

```
az storage account create --resource-group $rgName --location "North Europe" --kind Storage --sku Standard_LRS --name $rgNameLower
```

* <span data-ttu-id="3be31-1108">Создайте новую виртуальную сеть каждое обучения или демонстрации tooenable альбомная hello использование hello того же имени узла и IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="3be31-1108">Create a new virtual network for every training/demo landscape tooenable hello usage of hello same hostname and IP addresses.</span></span> <span data-ttu-id="3be31-1109">Виртуальная сеть Hello защищен сетевой группы безопасности, которая позволяет выполнять только трафик tooport 3389 tooenable удаленного рабочего стола доступа и порт 22 SSH.</span><span class="sxs-lookup"><span data-stu-id="3be31-1109">hello virtual network is protected by a Network Security Group that only allows traffic tooport 3389 tooenable Remote Desktop access and port 22 for SSH.</span></span>

```
az network nsg create --resource-group $rgName --location "North Europe" --name SAPERPDemoNSG
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGRDP --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 3389 --access Allow --priority 100 --direction Inbound
az network nsg rule create --resource-group $rgName --nsg-name SAPERPDemoNSG --name SAPERPDemoNSGSSH --protocol \* --source-address-prefix \* --source-port-range \* --destination-address-prefix \* --destination-port-range 22 --access Allow --priority 101 --direction Inbound

az network vnet create --resource-group $rgName --name SAPERPDemoVNet --location "North Europe" --address-prefixes 10.0.1.0/24
az network vnet subnet create --resource-group $rgName --vnet-name SAPERPDemoVNet --name Subnet1 --address-prefix 10.0.1.0/24 --network-security-group SAPERPDemoNSG
```

* <span data-ttu-id="3be31-1110">Создать новый общедоступный IP-адрес, который можно использовать tooaccess hello виртуальную машину из hello Интернета</span><span class="sxs-lookup"><span data-stu-id="3be31-1110">Create a new public IP address that can be used tooaccess hello virtual machine from hello internet</span></span>

```
az network public-ip create --resource-group $rgName --name SAPERPDemoPIP --location "North Europe" --dns-name $rgNameLower --allocation-method Dynamic
```

* <span data-ttu-id="3be31-1111">Создание нового сетевого интерфейса для hello виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="3be31-1111">Create a new network interface for hello virtual machine</span></span>

```
az network nic create --resource-group $rgName --location "North Europe" --name SAPERPDemoNIC --public-ip-address SAPERPDemoPIP --subnet Subnet1 --vnet-name SAPERPDemoVNet
```

* <span data-ttu-id="3be31-1112">Создайте виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="3be31-1112">Create a virtual machine.</span></span> <span data-ttu-id="3be31-1113">Для сценария hello только для облака все ВМ будут иметь hello таким же именем.</span><span class="sxs-lookup"><span data-stu-id="3be31-1113">For hello Cloud-Only scenario every VM will have hello same name.</span></span> <span data-ttu-id="3be31-1114">Hello ИД безопасности SAP hello SAP NetWeaver, экземпляры этих ВМ будут также hello таким же.</span><span class="sxs-lookup"><span data-stu-id="3be31-1114">hello SAP SID of hello SAP NetWeaver instances in those VMs will be hello same as well.</span></span> <span data-ttu-id="3be31-1115">В рамках hello группы ресурсов Azure, имя hello hello виртуальной Машины требуется уникальный toobe, но в разных группах ресурсов Azure можно запускать ВМ с hello таким же именем.</span><span class="sxs-lookup"><span data-stu-id="3be31-1115">Within hello Azure Resource Group, hello name of hello VM needs toobe unique, but in different Azure Resource Groups you can run VMs with hello same name.</span></span> <span data-ttu-id="3be31-1116">Здравствуйте, «Администратор» по умолчанию учетная запись Windows или 'root' для Linux не допускаются.</span><span class="sxs-lookup"><span data-stu-id="3be31-1116">hello default 'Administrator' account of Windows or 'root' for Linux are not valid.</span></span> <span data-ttu-id="3be31-1117">Таким образом имя пользователя администратора должен toobe определен и пароль.</span><span class="sxs-lookup"><span data-stu-id="3be31-1117">Therefore, a new administrator user name needs toobe defined together with a password.</span></span> <span data-ttu-id="3be31-1118">размер Hello hello виртуальной Машины также должен toobe определен.</span><span class="sxs-lookup"><span data-stu-id="3be31-1118">hello size of hello VM also needs toobe defined.</span></span>

```
#####
# Create virtual machines using storage accounts
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --authentication-type password

#####
# Create virtual machines using Managed Disks
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image MicrosoftWindowsServer:WindowsServer:2012-R2-Datacenter:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image SUSE:SLES-SAP:12-SP1:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image RedHat:RHEL:7.2:latest --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --image "Oracle:Oracle-Linux:7.2:latest" --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --authentication-type password
```

```
#####
# Create a new virtual machine with a VHD that contains hello private image that you want toouse
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Windows --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path tooimage vhd>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --os-type Linux --admin-username <username> --admin-password <password> --size Standard_D11 --use-unmanaged-disk --storage-account $rgNameLower --storage-container-name vhds --os-disk-name os --image <path tooimage vhd> --authentication-type password

#####
# Create a new virtual machine with a Managed Disk Image
#####
az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id>
#az vm create --resource-group $rgName --location "North Europe" --name SAPERPDemo --nics SAPERPDemoNIC --admin-username <username> --admin-password <password> --size Standard_DS11_v2 --os-disk-name os --image <managed disk image id> --authentication-type password
```

* <span data-ttu-id="3be31-1119">По желанию вы можете добавить дополнительные диски и восстановить необходимое содержимое.</span><span class="sxs-lookup"><span data-stu-id="3be31-1119">Optionally add additional disks and restore necessary content.</span></span> <span data-ttu-id="3be31-1120">Имейте в виду, что все имена больших двоичных объектов (BLOB toohello URL-адреса) должно быть уникальным в пределах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1120">Be aware that all blob names (URLs toohello blobs) must be unique within Azure.</span></span>

```
# Optional: Attach additional VHD data disks
az vm unmanaged-disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --vhd-uri https://$rgNameLower.blob.core.windows.net/vhds/data.vhd  --new

# Optional: Attach additional Managed Disks
az vm disk attach --resource-group $rgName --vm-name SAPERPDemo --size-gb 1023 --disk datadisk --new
```

##### <a name="template"></a><span data-ttu-id="3be31-1121">Шаблон</span><span class="sxs-lookup"><span data-stu-id="3be31-1121">Template</span></span>
<span data-ttu-id="3be31-1122">Можно использовать шаблоны образец hello на hello azure — начало работы — шаблоны репозитория в github.</span><span class="sxs-lookup"><span data-stu-id="3be31-1122">You can use hello sample templates on hello azure-quickstart-templates repository on github.</span></span>

* [<span data-ttu-id="3be31-1123">Простая виртуальная машина Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1123">Simple Linux VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-linux)
* [<span data-ttu-id="3be31-1124">Простая виртуальная машина Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1124">Simple Windows VM</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-simple-windows)
* [<span data-ttu-id="3be31-1125">Виртуальная машина из образа</span><span class="sxs-lookup"><span data-stu-id="3be31-1125">VM from image</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/101-vm-from-user-image)

### <a name="implement-a-set-of-vms-which-need-toocommunicate-within-azure"></a><span data-ttu-id="3be31-1126">Реализовать набор виртуальных машин, которым требуется toocommunicate в Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1126">Implement a set of VMs which need toocommunicate within Azure</span></span>
<span data-ttu-id="3be31-1127">Этот сценарий только для облака имеет типичный сценарий для целей обучения или демонстрации, где hello программное обеспечение, представляющее hello обучения или демонстрации сценария распространяется на несколько виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-1127">This Cloud-Only scenario is a typical scenario for training and demo purposes where hello software representing hello demo/training scenario is spread over multiple VMs.</span></span> <span data-ttu-id="3be31-1128">Hello разные компоненты, установленные в разных toocommunicate необходимость виртуальных машин hello друг с другом.</span><span class="sxs-lookup"><span data-stu-id="3be31-1128">hello different components installed in hello different VMs need toocommunicate with each other.</span></span> <span data-ttu-id="3be31-1129">В этом сценарии не требуется взаимодействие с локальной сетью или использование распределенного подключения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1129">Again, in this scenario no on-premises network communication or cross-premises scenario is needed.</span></span>

<span data-ttu-id="3be31-1130">Этот сценарий является расширением hello установки, описанные в главах [одной ВМ с SAP NetWeaver обучения или демонстрации сценария] [ planning-guide-7.1] этого документа.</span><span class="sxs-lookup"><span data-stu-id="3be31-1130">This scenario is an extension of hello installation described in chapter [Single VM with SAP NetWeaver demo/training scenario][planning-guide-7.1] of this document.</span></span> <span data-ttu-id="3be31-1131">В этом случае другие виртуальные машины будут добавлены tooan существующую группу ресурсов.</span><span class="sxs-lookup"><span data-stu-id="3be31-1131">In this case more virtual machines will be added tooan existing resource group.</span></span> <span data-ttu-id="3be31-1132">Следующий пример hello обучения альбомная hello состоит из ВМ ASCS/SCS SAP виртуальная машина, работающая СУБД и экземпляр сервера приложений SAP виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1132">In hello following example hello training landscape consists of an SAP ASCS/SCS VM, a VM running a DBMS and an SAP Application Server instance VM.</span></span>

<span data-ttu-id="3be31-1133">Перед построением этого сценария необходимо toothink об основных параметров, которые уже были обработаны в сценарии hello до.</span><span class="sxs-lookup"><span data-stu-id="3be31-1133">Before you build this scenario you need toothink about basic settings as already exercised in hello scenario before.</span></span>

#### <a name="resource-group-and-virtual-machine-naming"></a><span data-ttu-id="3be31-1134">Имена группы ресурсов и виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="3be31-1134">Resource Group and Virtual Machine naming</span></span>
<span data-ttu-id="3be31-1135">Все группы ресурсов должны иметь уникальные имена.</span><span class="sxs-lookup"><span data-stu-id="3be31-1135">All resource group names must be unique.</span></span> <span data-ttu-id="3be31-1136">Создайте собственную схему именования ресурсов, например `<rg-name`>-суффикс.</span><span class="sxs-lookup"><span data-stu-id="3be31-1136">Develop your own naming scheme of your resources, such as `<rg-name`>-suffix.</span></span>

<span data-ttu-id="3be31-1137">имя виртуальной машины Hello имеет toobe уникальным в пределах группы ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1137">hello virtual machine name has toobe unique within hello resource group.</span></span>

#### <a name="set-up-network-for-communication-between-hello-different-vms"></a><span data-ttu-id="3be31-1138">Настройка сети для обмена данными между разными ВМ hello</span><span class="sxs-lookup"><span data-stu-id="3be31-1138">Set up Network for communication between hello different VMs</span></span>
![Набор виртуальных машин в виртуальной сети Azure][planning-guide-figure-1900]

<span data-ttu-id="3be31-1140">tooprevent коллизий с клонов из hello же ландшафтов обучения или демонстрации, требуется toocreate виртуальную сеть Azure для каждой альбомной ориентации.</span><span class="sxs-lookup"><span data-stu-id="3be31-1140">tooprevent naming collisions with clones of hello same training/demo landscapes, you need toocreate an Azure Virtual Network for every landscape.</span></span> <span data-ttu-id="3be31-1141">Разрешение имен DNS будет предоставлено Azure, или можно настроить собственный DNS-сервер за пределами Azure (не toobe подробнее рассматривается ниже).</span><span class="sxs-lookup"><span data-stu-id="3be31-1141">DNS name resolution will be provided by Azure or you can configure your own DNS server outside Azure (not toobe further discussed here).</span></span> <span data-ttu-id="3be31-1142">В нашем сценарии мы не создаем собственную службу DNS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1142">In this scenario we do not configure our own DNS.</span></span> <span data-ttu-id="3be31-1143">Для всех виртуальных машин в одной виртуальной сети Azure возможно взаимодействие с использованием имен узлов.</span><span class="sxs-lookup"><span data-stu-id="3be31-1143">For all virtual machines inside one Azure Virtual Network, communication via hostnames will be enabled.</span></span>

<span data-ttu-id="3be31-1144">Hello причин, по которым ландшафтов обучения или демонстрации tooseparate виртуальных сетей и не только ресурсом группы может быть:</span><span class="sxs-lookup"><span data-stu-id="3be31-1144">hello reasons tooseparate training or demo landscapes by virtual networks and not only resource groups could be:</span></span>

* <span data-ttu-id="3be31-1145">Hello SAP альбомную в соответствии с потребностями собственный AD/OpenLDAP и сервер домена потребностей toobe часть каждого из ландшафтов hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1145">hello SAP landscape as set up needs its own AD/OpenLDAP and a Domain Server needs toobe part of each of hello landscapes.</span></span>  
* <span data-ttu-id="3be31-1146">Здравствуйте ландшафт SAP, как настроить состоит из компонентов, необходимость toowork с фиксированными IP-адресами.</span><span class="sxs-lookup"><span data-stu-id="3be31-1146">hello SAP landscape as set up has components that need toowork with fixed IP addresses.</span></span>

<span data-ttu-id="3be31-1147">Дополнительные сведения о виртуальных сетях Azure и как toodefine их можно найти в [в этой статье][virtual-networks-create-vnet-arm-pportal].</span><span class="sxs-lookup"><span data-stu-id="3be31-1147">More details about Azure Virtual Networks and how toodefine them can be found in [this article][virtual-networks-create-vnet-arm-pportal].</span></span>

## <a name="deploying-sap-vms-with-corporate-network-connectivity-cross-premises"></a><span data-ttu-id="3be31-1148">Развертывание виртуальных машин SAP с подключением к корпоративной сети (распределенное развертывание)</span><span class="sxs-lookup"><span data-stu-id="3be31-1148">Deploying SAP VMs with Corporate Network Connectivity (Cross-Premises)</span></span>
<span data-ttu-id="3be31-1149">Запускается ландшафт SAP и развертывание hello toodivide между ОС для высокопроизводительных серверов СУБД, локальных виртуализированных сред для уровней приложений и небольших двухуровневых настроенных систем SAP и Azure IaaS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1149">You run an SAP landscape and want toodivide hello deployment between bare-metal for high-end DBMS servers, on-premises virtualized environments for application layers and smaller 2-Tier configured SAP systems and Azure IaaS.</span></span> <span data-ttu-id="3be31-1150">Hello базовое предположение заключается в том, что системы SAP в одном ландшафте SAP требуется toocommunicate друг с другом и с многих других компонентов программного обеспечения, развернутые в компании hello, независимо от формы развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-1150">hello base assumption is that SAP systems within one SAP landscape need toocommunicate with each other and with many other software components deployed in hello company, independent of their deployment form.</span></span> <span data-ttu-id="3be31-1151">Также должно быть различий hello формы развертывания для hello конечного пользователя при соединении с SAP GUI или других интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="3be31-1151">There also should be no differences introduced by hello deployment form for hello end user connecting with SAP GUI or other interfaces.</span></span> <span data-ttu-id="3be31-1152">Эти условия можно выполнить только, у нас есть hello в локальной среде Active Directory или OpenLDAP и службы DNS расширенные toohello системы Azure с помощью сайта в узла / /-site подключения или частных соединений, таких как Azure ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3be31-1152">These conditions can only be met when we have hello on-premises Active Directory/OpenLDAP and DNS services extended toohello Azure systems through site-to-site/multi-site connectivity or private connections like Azure ExpressRoute.</span></span>

<span data-ttu-id="3be31-1153">В порядке tooget несколько фоновых hello сведений по реализации SAP в Azure, мы рекомендуем вам главе tooread [понятия только развертывание экземпляров SAP] [ planning-guide-7] этого документа, в котором указано, Некоторые принципов hello конструкции Azure и как их использовать с приложениями SAP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1153">In order tooget more background on hello implementation details of SAP on Azure, we encourage you tooread chapter [Concepts of Cloud-Only deployment of SAP instances][planning-guide-7] of this document which explains some of hello basics constructs of Azure and how these should be used with SAP applications in Azure.</span></span>

### <a name="scenario-of-an-sap-landscape"></a><span data-ttu-id="3be31-1154">Сценарий ландшафта SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1154">Scenario of an SAP landscape</span></span>
<span data-ttu-id="3be31-1155">Hello межсетевых локальных ресурсах могут быть примерно описаны как в графики hello ниже:</span><span class="sxs-lookup"><span data-stu-id="3be31-1155">hello cross-premises scenario can be roughly described like in hello graphics below:</span></span>

![Подключение типа "сеть — сеть" между ресурсами в локальной среде и Azure][planning-guide-figure-2100]

<span data-ttu-id="3be31-1157">Hello сценарий, показанный выше описывает сценарий, где hello в локальной среде AD и OpenLDAP и расширены tooAzure DNS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1157">hello scenario shown above describes a scenario where hello on-premises AD/OpenLDAP and DNS are extended tooAzure.</span></span> <span data-ttu-id="3be31-1158">На стороне локальной hello определенный диапазон IP-адрес зарезервирован на подписку Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1158">On hello on-premises side, a certain IP address range is reserved per Azure subscription.</span></span> <span data-ttu-id="3be31-1159">диапазон IP-адресов Hello будет назначен tooan виртуальной сети Azure на стороне Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1159">hello IP address range will be assigned tooan Azure Virtual Network on hello Azure side.</span></span>

#### <a name="security-considerations"></a><span data-ttu-id="3be31-1160">Вопросы безопасности</span><span class="sxs-lookup"><span data-stu-id="3be31-1160">Security considerations</span></span>
<span data-ttu-id="3be31-1161">Hello минимальные требования составляют hello использование протокола защищенной связи, например SSL/TLS для доступа через браузер или VPN-подключений для системы, получить доступ к toohello Azure службы.</span><span class="sxs-lookup"><span data-stu-id="3be31-1161">hello minimum requirement is hello use of secure communication protocols such as SSL/TLS for browser access or VPN-based connections for system access toohello Azure services.</span></span> <span data-ttu-id="3be31-1162">Hello предполагается, что компании обрабатывают hello VPN-подключение между своей корпоративной сетью и Azure очень по-разному.</span><span class="sxs-lookup"><span data-stu-id="3be31-1162">hello assumption is that companies handle hello VPN connection between their corporate network and Azure very differently.</span></span> <span data-ttu-id="3be31-1163">Некоторые компании могут полностью открыть все порты hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1163">Some companies might blankly open all hello ports.</span></span> <span data-ttu-id="3be31-1164">Другие компании может потребоваться toobe очень точный какие порты необходимы tooopen и т. д.</span><span class="sxs-lookup"><span data-stu-id="3be31-1164">Some other companies might want toobe very precise in which ports they need tooopen, etc.</span></span>

<span data-ttu-id="3be31-1165">В таблице hello ниже типичные SAP перечислены порты связи.</span><span class="sxs-lookup"><span data-stu-id="3be31-1165">In hello table below typical SAP communication ports are listed.</span></span> <span data-ttu-id="3be31-1166">По сути это достаточно tooopen hello порт шлюза SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1166">Basically it is sufficient tooopen hello SAP gateway port.</span></span>

| <span data-ttu-id="3be31-1167">служба</span><span class="sxs-lookup"><span data-stu-id="3be31-1167">Service</span></span> | <span data-ttu-id="3be31-1168">Имя порта</span><span class="sxs-lookup"><span data-stu-id="3be31-1168">Port Name</span></span> | <span data-ttu-id="3be31-1169">Пример: `<nn`> = 01</span><span class="sxs-lookup"><span data-stu-id="3be31-1169">Example `<nn`> = 01</span></span> | <span data-ttu-id="3be31-1170">Диапазон по умолчанию (мин — макс)</span><span class="sxs-lookup"><span data-stu-id="3be31-1170">Default Range (min-max)</span></span> | <span data-ttu-id="3be31-1171">Комментарий</span><span class="sxs-lookup"><span data-stu-id="3be31-1171">Comment</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="3be31-1172">Диспетчер</span><span class="sxs-lookup"><span data-stu-id="3be31-1172">Dispatcher</span></span> |<span data-ttu-id="3be31-1173">sapdp`<nn>` см. *</span><span class="sxs-lookup"><span data-stu-id="3be31-1173">sapdp`<nn>` see *</span></span> |<span data-ttu-id="3be31-1174">3201</span><span class="sxs-lookup"><span data-stu-id="3be31-1174">3201</span></span> |<span data-ttu-id="3be31-1175">3200–3299</span><span class="sxs-lookup"><span data-stu-id="3be31-1175">3200 – 3299</span></span> |<span data-ttu-id="3be31-1176">Диспетчер SAP, который используется графическим пользовательским интерфейсом SAP для Windows и Java</span><span class="sxs-lookup"><span data-stu-id="3be31-1176">SAP Dispatcher, used by SAP GUI for Windows and Java</span></span> |
| <span data-ttu-id="3be31-1177">Сервер сообщений</span><span class="sxs-lookup"><span data-stu-id="3be31-1177">Message server</span></span> |<span data-ttu-id="3be31-1178">sapms`<sid`> см. **</span><span class="sxs-lookup"><span data-stu-id="3be31-1178">sapms`<sid`> see **</span></span> |<span data-ttu-id="3be31-1179">3600</span><span class="sxs-lookup"><span data-stu-id="3be31-1179">3600</span></span> |<span data-ttu-id="3be31-1180">свободный sapms`<anySID`></span><span class="sxs-lookup"><span data-stu-id="3be31-1180">free sapms`<anySID`></span></span> |<span data-ttu-id="3be31-1181">sid = идентификатор SAP-System-ID</span><span class="sxs-lookup"><span data-stu-id="3be31-1181">sid = SAP-System-ID</span></span> |
| <span data-ttu-id="3be31-1182">Шлюз</span><span class="sxs-lookup"><span data-stu-id="3be31-1182">Gateway</span></span> |<span data-ttu-id="3be31-1183">sapgw`<nn`> см. *</span><span class="sxs-lookup"><span data-stu-id="3be31-1183">sapgw`<nn`> see *</span></span> |<span data-ttu-id="3be31-1184">3301</span><span class="sxs-lookup"><span data-stu-id="3be31-1184">3301</span></span> |<span data-ttu-id="3be31-1185">свободный</span><span class="sxs-lookup"><span data-stu-id="3be31-1185">free</span></span> |<span data-ttu-id="3be31-1186">Шлюз SAP, используемый для взаимодействия CPIC и RFC</span><span class="sxs-lookup"><span data-stu-id="3be31-1186">SAP gateway, used for CPIC and RFC communication</span></span> |
| <span data-ttu-id="3be31-1187">Маршрутизатор SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1187">SAP router</span></span> |<span data-ttu-id="3be31-1188">sapdp99</span><span class="sxs-lookup"><span data-stu-id="3be31-1188">sapdp99</span></span> |<span data-ttu-id="3be31-1189">3299</span><span class="sxs-lookup"><span data-stu-id="3be31-1189">3299</span></span> |<span data-ttu-id="3be31-1190">свободный</span><span class="sxs-lookup"><span data-stu-id="3be31-1190">free</span></span> |<span data-ttu-id="3be31-1191">Только имена CI (Центральный экземпляр) служб могут переназначаться в/etc/Services tooan произвольное значение после установки.</span><span class="sxs-lookup"><span data-stu-id="3be31-1191">Only CI (central instance) Service names can be reassigned in /etc/services tooan arbitrary value after installation.</span></span> |

<span data-ttu-id="3be31-1192">*) nn = номер экземпляра SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1192">*) nn = SAP Instance Number</span></span>

<span data-ttu-id="3be31-1193">**) sid = идентификатор SAP-System-ID</span><span class="sxs-lookup"><span data-stu-id="3be31-1193">**) sid = SAP-System-ID</span></span>

<span data-ttu-id="3be31-1194">Дополнительные сведения о том, какие порты нужны для различных продуктов и служб SAP, сгруппированные по продуктам SAP, см. здесь: <http://scn.sap.com/docs/DOC-17124>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1194">More detailed information on ports required for different SAP products or services by SAP products can be found here <http://scn.sap.com/docs/DOC-17124>.</span></span>
<span data-ttu-id="3be31-1195">В этом документе следует может tooopen выделенной порты в VPN-устройства hello, необходимые для определенных продуктов SAP и сценариев.</span><span class="sxs-lookup"><span data-stu-id="3be31-1195">With this document you should be able tooopen dedicated ports in hello VPN device necessary for specific SAP products and scenarios.</span></span>

<span data-ttu-id="3be31-1196">Меры безопасности при развертывании виртуальных машин в этом случае может быть toocreate [сетевой группы безопасности] [ virtual-networks-nsg] toodefine правила доступа.</span><span class="sxs-lookup"><span data-stu-id="3be31-1196">Other security measures when deploying VMs in such a scenario could be toocreate a [Network Security Group][virtual-networks-nsg] toodefine access rules.</span></span>

### <a name="dealing-with-different-virtual-machine-series"></a><span data-ttu-id="3be31-1197">Работа с виртуальными машинами разных серий</span><span class="sxs-lookup"><span data-stu-id="3be31-1197">Dealing with different Virtual Machine Series</span></span>
<span data-ttu-id="3be31-1198">В ходе hello последние 12 месяцев Майкрософт добавила гораздо больше типов ВМ, отличающихся в числа ЦП, памяти или более важными оборудования выполняется на.</span><span class="sxs-lookup"><span data-stu-id="3be31-1198">In hello course of last 12 months Microsoft added many more VM types that differ either in number of vCPUs, memory or more important on hardware it is running on.</span></span> <span data-ttu-id="3be31-1199">Не все эти виртуальные машины поддерживаются SAP (поддерживаемые типы виртуальных машин см. в примечании к SAP [1928533]).</span><span class="sxs-lookup"><span data-stu-id="3be31-1199">Not all those VMs are supported with SAP (see supported VM types in SAP Note [1928533]).</span></span> <span data-ttu-id="3be31-1200">Некоторые виртуальные машины работают на базовом оборудовании разных поколений.</span><span class="sxs-lookup"><span data-stu-id="3be31-1200">Some of those VMs run on different host hardware generations.</span></span> <span data-ttu-id="3be31-1201">Эти поколения оборудования узла начало развертываются в гранулярности hello объекта Azure единица масштабирования.</span><span class="sxs-lookup"><span data-stu-id="3be31-1201">These host hardware generations are getting deployed in hello granularity of an Azure Scale-Unit.</span></span> <span data-ttu-id="3be31-1202">Означает случаях могут возникнуть где hello вы выбрали не может выполняться на различных размеров виртуальных Машин hello же единице измерения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1202">Means cases may arise where hello different VM sizes you chose can’t be run on hello same Scale-Unit.</span></span> <span data-ttu-id="3be31-1203">Группа доступности имеет ограничения по toospan возможность hello, единицы масштабирования на основе оборудования.</span><span class="sxs-lookup"><span data-stu-id="3be31-1203">An Availability Set is limited in hello ability toospan Scale-Units based of different hardware.</span></span>  <span data-ttu-id="3be31-1204">Для одной системы SAP или разных систем SAP в разных наборах доступности, например, если вы хотите toorun hello СУБД на виртуальных машинах A5 A11 hello уровня приложения SAP на виртуальных машинах серии G, то вам будет принудительного toodeploy.</span><span class="sxs-lookup"><span data-stu-id="3be31-1204">For example if you want toorun hello DBMS on A5-A11 VMs and hello SAP application layer on G-Series VMs, you would be forced toodeploy a single SAP system or different SAP systems within different Availability Sets.</span></span>

#### <a name="printing-on-a-local-network-printer-from-sap-instance-in-azure"></a><span data-ttu-id="3be31-1205">Печать на принтере локальной сети из экземпляра SAP в Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1205">Printing on a local network printer from SAP instance in Azure</span></span>
##### <a name="printing-over-tcpip-in-cross-premises-scenario"></a><span data-ttu-id="3be31-1206">Печать по протоколу TCP/IP в распределенном сценарии</span><span class="sxs-lookup"><span data-stu-id="3be31-1206">Printing over TCP/IP in Cross-Premises scenario</span></span>
<span data-ttu-id="3be31-1207">Настройка сетевые принтеры на основе TCP/IP в локальной среде на виртуальной Машине Azure является общей hello таким же, как в корпоративной сети, при условии, что имеется туннель VPN-сайтами или установленное соединение ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="3be31-1207">Setting up your on-premises TCP/IP based network printers in an Azure VM is overall hello same as in your corporate network, assuming you do have a VPN Site-To-Site tunnel or ExpressRoute connection established.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-1209">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1209">Windows</span></span>
>
> <span data-ttu-id="3be31-1210">toodo это:</span><span class="sxs-lookup"><span data-stu-id="3be31-1210">toodo this:</span></span>
>
> * <span data-ttu-id="3be31-1211">Некоторые сетевые принтеры поставляются с мастером настройки, который позволяет легко tooset принтера на виртуальной Машине Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1211">Some network printers come with a configuration wizard which makes it easy tooset up your printer in an Azure VM.</span></span> <span data-ttu-id="3be31-1212">Если ни одна из программ мастера были переданы с принтера hello «manual» способ tooset hello принтера является toocreate новый порт принтера TCP/IP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1212">If no wizard software has been distributed with the printer hello “manual” way tooset up hello printer is toocreate a new TCP/IP printer port.</span></span>
> * <span data-ttu-id="3be31-1213">Откройте "Панель управления", затем "Устройства и принтеры" -> "Установка принтера".</span><span class="sxs-lookup"><span data-stu-id="3be31-1213">Open Control Panel -> Devices and Printers -> Add a printer</span></span>
> * <span data-ttu-id="3be31-1214">Выберите "Добавить принтер с использованием TCP/IP-адреса или имени узла".</span><span class="sxs-lookup"><span data-stu-id="3be31-1214">Choose Add a printer using a TCP/IP address or hostname</span></span>
> * <span data-ttu-id="3be31-1215">Введите IP-адрес принтера hello hello</span><span class="sxs-lookup"><span data-stu-id="3be31-1215">Type in hello IP address of hello printer</span></span>
> * <span data-ttu-id="3be31-1216">Стандартный порт принтера — 9100.</span><span class="sxs-lookup"><span data-stu-id="3be31-1216">Printer Port standard 9100</span></span>
> * <span data-ttu-id="3be31-1217">При необходимости вручную установите hello соответствующий драйвер принтера.</span><span class="sxs-lookup"><span data-stu-id="3be31-1217">If necessary install hello appropriate printer driver manually.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-1219">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1219">Linux</span></span>
>
> * <span data-ttu-id="3be31-1220">как и для Windows просто следуйте стандартной процедуре hello tooinstall сетевого принтера</span><span class="sxs-lookup"><span data-stu-id="3be31-1220">like for Windows just follow hello standard procedure tooinstall a network printer</span></span>
> * <span data-ttu-id="3be31-1221">просто выполните hello открытый руководства по Linux для [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) или [Red Hat и Oracle Linux](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) о том, как tooadd принтера.</span><span class="sxs-lookup"><span data-stu-id="3be31-1221">just follow hello public Linux guides for [SUSE](https://www.suse.com/documentation/sles-12/book_sle_deployment/data/sec_y2_hw_print.html) or [Red Hat and Oracle Linux](https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/6/html/Deployment_Guide/sec-Printer_Configuration.html) on how tooadd a printer.</span></span>
>
>

- - -
![Сетевая печать][planning-guide-figure-2200]

##### <a name="host-based-printer-over-smb-shared-printer-in-cross-premises-scenario"></a><span data-ttu-id="3be31-1223">Доступ по протоколу SMB к принтеру на основе узла (общему принтеру) в распределенном сценарии</span><span class="sxs-lookup"><span data-stu-id="3be31-1223">Host-based printer over SMB (shared printer) in Cross-Premises scenario</span></span>
<span data-ttu-id="3be31-1224">Принтеры на основе узла нарочно не являются сетевыми.</span><span class="sxs-lookup"><span data-stu-id="3be31-1224">Host-based printers are not network-compatible by design.</span></span> <span data-ttu-id="3be31-1225">Но принтер на основе узла могут использоваться совместно компьютеров в сети, пока принтер hello подключенных tooa включении компьютера.</span><span class="sxs-lookup"><span data-stu-id="3be31-1225">But a host-based printer can be shared among computers on a network as long as hello printer is connected tooa powered-on computer.</span></span> <span data-ttu-id="3be31-1226">Подключитесь к корпоративной сети с помощью подключения "сеть — сеть" или ExpressRoute, и вы сможете совместно использовать локальный принтер.</span><span class="sxs-lookup"><span data-stu-id="3be31-1226">Connect your corporate network either Site-To-Site or ExpressRoute and share your local printer.</span></span> <span data-ttu-id="3be31-1227">Hello протокол SMB использует NetBIOS вместо DNS в качестве службы имен.</span><span class="sxs-lookup"><span data-stu-id="3be31-1227">hello SMB protocol uses NetBIOS instead of DNS as name service.</span></span> <span data-ttu-id="3be31-1228">Hello NetBIOS-имя узла может отличаться от hello DNS-имя узла.</span><span class="sxs-lookup"><span data-stu-id="3be31-1228">hello NetBIOS host name can be different from hello DNS host name.</span></span> <span data-ttu-id="3be31-1229">Hello обычно являются идентичными hello NetBIOS-имя узла и имя узла DNS hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1229">hello standard case is that hello NetBIOS host name and hello DNS host name are identical.</span></span> <span data-ttu-id="3be31-1230">Hello DNS-домена не имеет смысла в пространстве имен NetBIOS hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1230">hello DNS domain does not make sense in hello NetBIOS name space.</span></span> <span data-ttu-id="3be31-1231">Здравствуйте, соответственно, полное имя узла DNS, состоящее из имени узла DNS hello и DNS-домена не должен использоваться в пространстве имен NetBIOS hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1231">Accordingly, hello fully qualified DNS host name consisting of hello DNS host name and DNS domain must not be used in hello NetBIOS name space.</span></span>

<span data-ttu-id="3be31-1232">общий ресурс печати Hello идентифицируется по уникальному имени в сети hello:</span><span class="sxs-lookup"><span data-stu-id="3be31-1232">hello printer share is identified by a unique name in hello network:</span></span>

* <span data-ttu-id="3be31-1233">Имя сервера SMB hello (всегда требуется).</span><span class="sxs-lookup"><span data-stu-id="3be31-1233">Host name of hello SMB host (always needed).</span></span>
* <span data-ttu-id="3be31-1234">Имя общего ресурса hello (всегда требуется).</span><span class="sxs-lookup"><span data-stu-id="3be31-1234">Name of hello share (always needed).</span></span>
* <span data-ttu-id="3be31-1235">Имя домена hello, если общий принтер не hello домену, в системе SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1235">Name of hello domain if printer share is not in hello same domain as SAP system.</span></span>
* <span data-ttu-id="3be31-1236">Кроме того имя пользователя и пароль может быть обязательным tooaccess общего принтера hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1236">Additionally, a user name and a password may be required tooaccess hello printer share.</span></span>

<span data-ttu-id="3be31-1237">Практическое руководство:</span><span class="sxs-lookup"><span data-stu-id="3be31-1237">How to:</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-1239">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1239">Windows</span></span>
>
> <span data-ttu-id="3be31-1240">Включите общий доступ к локальному принтеру.</span><span class="sxs-lookup"><span data-stu-id="3be31-1240">Share your local printer.</span></span>
> <span data-ttu-id="3be31-1241">В hello виртуальной Машине Azure откройте проводник Windows hello и введите имя общего ресурса hello hello принтера.</span><span class="sxs-lookup"><span data-stu-id="3be31-1241">In hello Azure VM, open hello Windows Explorer and type in hello share name of hello printer.</span></span>
> <span data-ttu-id="3be31-1242">Мастер установки принтера проведет через процесс установки hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1242">A printer installation wizard will guide you through hello installation process.</span></span>
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-1244">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1244">Linux</span></span>
>
> <span data-ttu-id="3be31-1245">Ниже приведены некоторые примеры документации, посвященной настройке сетевых принтеров в Linux или содержащей разделы о печати в Linux.</span><span class="sxs-lookup"><span data-stu-id="3be31-1245">Here are some examples of documentation about configuring network printers in Linux or including a chapter regarding printing in Linux.</span></span> <span data-ttu-id="3be31-1246">Он будет работать hello одинаково на виртуальной Машине Linux Azure, при условии, что hello виртуальная машина является частью виртуальной частной сети:</span><span class="sxs-lookup"><span data-stu-id="3be31-1246">It will work hello same way in an Azure Linux VM as long as hello VM is part of a VPN:</span></span>
>
> * <span data-ttu-id="3be31-1247">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span><span class="sxs-lookup"><span data-stu-id="3be31-1247">SLES <https://en.opensuse.org/SDB:Printing_via_SMB_(Samba)_Share_or_Windows_Share></span></span>
> * <span data-ttu-id="3be31-1248">RHEL или Oracle Linux <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer></span><span class="sxs-lookup"><span data-stu-id="3be31-1248">RHEL or Oracle Linux <https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sec-Printer_Configuration.html#s1-printing-smb-printer></span></span>
>
>

- - -
##### <a name="usb-printer-printer-forwarding"></a><span data-ttu-id="3be31-1249">USB-принтер (переадресация принтеров)</span><span class="sxs-lookup"><span data-stu-id="3be31-1249">USB Printer (printer forwarding)</span></span>
<span data-ttu-id="3be31-1250">В Azure hello возможность пользователям доступ hello служб удаленных рабочих столов tooprovide hello tootheir локальным устройствам печати в удаленном сеансе не доступна.</span><span class="sxs-lookup"><span data-stu-id="3be31-1250">In Azure hello ability of hello Remote Desktop Services tooprovide users hello access tootheir local printer devices in a remote session is not available.</span></span>

- - -
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-1252">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1252">Windows</span></span>
>
> <span data-ttu-id="3be31-1253">Дополнительные сведения о печати в Windows можно найти здесь: <http://technet.microsoft.com/library/jj590748.aspx>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1253">More details on printing with Windows can be found here: <http://technet.microsoft.com/library/jj590748.aspx>.</span></span>
>
>

- - -
#### <a name="integration-of-sap-azure-systems-into-correction-and-transport-system-tms-in-cross-premises"></a><span data-ttu-id="3be31-1254">Интеграция систем SAP Azure в систему исправлений и транспортировки (TMS) при распределенном развертывании</span><span class="sxs-lookup"><span data-stu-id="3be31-1254">Integration of SAP Azure Systems into Correction and Transport System (TMS) in Cross-Premises</span></span>
<span data-ttu-id="3be31-1255">Здравствуйте SAP Change and Transport System (TMS) tooexport toobe настроен потребностей и импорта транспортных запросов в системах в альбомной ориентации hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1255">hello SAP Change and Transport System (TMS) needs toobe configured tooexport and import transport request across systems in hello landscape.</span></span> <span data-ttu-id="3be31-1256">Мы предполагаем, что hello экземпляры разработки системы SAP (DEV) расположены в Azure, в то время как hello качества (QA) и производственные системы (PRD) являются локальными.</span><span class="sxs-lookup"><span data-stu-id="3be31-1256">We assume that hello development instances of an SAP system (DEV) are located in Azure whereas hello quality assurance (QA) and productive systems (PRD) are on-premises.</span></span> <span data-ttu-id="3be31-1257">Кроме того, мы предполагаем, что существует централизованный транспортный каталог.</span><span class="sxs-lookup"><span data-stu-id="3be31-1257">Furthermore, we assume that there is a central transport directory.</span></span>

##### <a name="configuring-hello-transport-domain"></a><span data-ttu-id="3be31-1258">Настройка транспортного домена hello</span><span class="sxs-lookup"><span data-stu-id="3be31-1258">Configuring hello Transport Domain</span></span>
<span data-ttu-id="3be31-1259">Настройте транспортный домен в качестве hello контроллера транспортного домена, как описано в системе hello [hello Настройка контроллера домена транспорта](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span><span class="sxs-lookup"><span data-stu-id="3be31-1259">Configure your Transport Domain on hello system you designated as hello Transport Domain Controller as described in [Configuring hello Transport Domain Controller](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm).</span></span> <span data-ttu-id="3be31-1260">Пользователь системы TMSADM будет создана и hello обязательные назначения RFC будет создан.</span><span class="sxs-lookup"><span data-stu-id="3be31-1260">A system user TMSADM will be created and hello required RFC destination will be generated.</span></span> <span data-ttu-id="3be31-1261">Можно проверить эти подключения RFC с помощью hello транзакции SM59.</span><span class="sxs-lookup"><span data-stu-id="3be31-1261">You may check these RFC connections using hello transaction SM59.</span></span> <span data-ttu-id="3be31-1262">Для вашего транспортного домена должно быть включено разрешение имен узлов.</span><span class="sxs-lookup"><span data-stu-id="3be31-1262">Hostname resolution must be enabled across your transport domain.</span></span>

<span data-ttu-id="3be31-1263">Практическое руководство:</span><span class="sxs-lookup"><span data-stu-id="3be31-1263">How to:</span></span>

* <span data-ttu-id="3be31-1264">В нашем сценарии мы решили hello в локальной системе QAS будет контроллера домена CTS hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1264">In our scenario we decided hello on-premises QAS system will be hello CTS domain controller.</span></span> <span data-ttu-id="3be31-1265">Выполните транзакцию STMS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1265">Call transaction STMS.</span></span> <span data-ttu-id="3be31-1266">Откроется диалоговое окно TMS Hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1266">hello TMS dialog box appears.</span></span> <span data-ttu-id="3be31-1267">Откроется диалоговое окно "Настройка транспортного домена".</span><span class="sxs-lookup"><span data-stu-id="3be31-1267">A Configure Transport Domain dialog box is displayed.</span></span> <span data-ttu-id="3be31-1268">(Это диалоговое окно отображается только в том случае, если транспортный домен еще не настроен).</span><span class="sxs-lookup"><span data-stu-id="3be31-1268">(This dialog box only appears if you have not yet configured a transport domain.)</span></span>
* <span data-ttu-id="3be31-1269">Убедитесь, что этот пользователь автоматически создается hello TMSADM авторизован (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> сведения -> Utilities(M) -> Authorization Test).</span><span class="sxs-lookup"><span data-stu-id="3be31-1269">Make sure that hello automatically created user TMSADM is authorized (SM59 -> ABAP Connection -> TMSADM@E61.DOMAIN_E61 -> Details -> Utilities(M) -> Authorization Test).</span></span> <span data-ttu-id="3be31-1270">Hello начальный экран транзакции STMS должен показывать, что эта система SAP теперь функционирует hello контроллером домена транспорта hello, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="3be31-1270">hello initial screen of transaction STMS should show that this SAP System is now functioning as hello controller of hello transport domain as shown here:</span></span>

![Начальный экран транзакции STMS в контроллере домена hello][planning-guide-figure-2300]

#### <a name="including-sap-systems-in-hello-transport-domain"></a><span data-ttu-id="3be31-1272">Включение систем SAP в транспортный домен hello</span><span class="sxs-lookup"><span data-stu-id="3be31-1272">Including SAP Systems in hello Transport Domain</span></span>
<span data-ttu-id="3be31-1273">Hello последовательность включения системы SAP в транспортный домен выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3be31-1273">hello sequence of including an SAP system in a transport domain looks as follows:</span></span>

* <span data-ttu-id="3be31-1274">На hello системе DEV в Azure перейдите toohello транспортную систему (клиент 000) и вызовите транзакцию STMS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1274">On hello DEV system in Azure, go toohello transport system (Client 000) and call transaction STMS.</span></span> <span data-ttu-id="3be31-1275">Выберите другие конфигурацию в диалоговое окно «hello» и продолжите Include System in Domain.</span><span class="sxs-lookup"><span data-stu-id="3be31-1275">Choose Other Configuration from hello dialog box and continue with Include System in Domain.</span></span> <span data-ttu-id="3be31-1276">Укажите hello контроллера домена в качестве конечного узла ([включая систем SAP в транспортный домен hello](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span><span class="sxs-lookup"><span data-stu-id="3be31-1276">Specify hello Domain Controller as target host ([Including SAP Systems in hello Transport Domain](http://help.sap.com/erp2005_ehp_04/helpdata/en/44/b4a0c17acc11d1899e0000e829fbbd/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm)).</span></span> <span data-ttu-id="3be31-1277">Hello система больше не включены в транспортный домен hello toobe ожидания.</span><span class="sxs-lookup"><span data-stu-id="3be31-1277">hello system is now waiting toobe included in hello transport domain.</span></span>
* <span data-ttu-id="3be31-1278">По соображениям безопасности имеется tooconfirm контроллера домена назад toohello toogo ваш запрос.</span><span class="sxs-lookup"><span data-stu-id="3be31-1278">For security reasons, you then have toogo back toohello domain controller tooconfirm your request.</span></span> <span data-ttu-id="3be31-1279">Нажмите кнопку Обзор системы и утвердить hello ожидания системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-1279">Choose System Overview and Approve of hello waiting system.</span></span> <span data-ttu-id="3be31-1280">Затем убедитесь, что будут распространяться настройки строки и hello hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1280">Then confirm hello prompt and hello configuration will be distributed.</span></span>

<span data-ttu-id="3be31-1281">Эта система SAP теперь содержит hello необходимых сведений о hello всех прочих системах SAP в транспортный домен hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1281">This SAP system now contains hello necessary information about all hello other SAP systems in hello transport domain.</span></span> <span data-ttu-id="3be31-1282">В hello же время hello адрес отправки данных новой системы SAP hello tooall hello других систем SAP и ввода hello системы SAP в транспортный профиль программы управления транспортом hello hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1282">At hello same time, hello address data of hello new SAP system is sent tooall hello other SAP systems, and hello SAP system is entered in hello transport profile of hello transport control program.</span></span> <span data-ttu-id="3be31-1283">Проверьте, работают ли RFC и доступ к каталогу транспорта toohello hello домена.</span><span class="sxs-lookup"><span data-stu-id="3be31-1283">Check whether RFCs and access toohello transport directory of hello domain work.</span></span>

<span data-ttu-id="3be31-1284">Продолжить настройку hello транспортной системы как обычно, как описано в документации hello [Change and Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span><span class="sxs-lookup"><span data-stu-id="3be31-1284">Continue with hello configuration of your transport system as usual as described in hello documentation [Change and Transport System](http://help.sap.com/saphelp_nw70ehp3/helpdata/en/48/c4300fca5d581ce10000000a42189c/content.htm?frameset=/en/44/b4a0b47acc11d1899e0000e829fbbd/frameset.htm).</span></span>

<span data-ttu-id="3be31-1285">Практическое руководство:</span><span class="sxs-lookup"><span data-stu-id="3be31-1285">How to:</span></span>

* <span data-ttu-id="3be31-1286">Убедитесь, что локальная система STMS настроена правильно.</span><span class="sxs-lookup"><span data-stu-id="3be31-1286">Make sure your STMS on premises is configured correctly.</span></span>
* <span data-ttu-id="3be31-1287">Убедитесь, что имя узла hello hello Transport Domain Controller можно решить с виртуальной машиной в Azure и наоборот.</span><span class="sxs-lookup"><span data-stu-id="3be31-1287">Make sure hello hostname of hello Transport Domain Controller can be resolved by your virtual machine on Azure and vice visa.</span></span>
* <span data-ttu-id="3be31-1288">Call transaction STMS (Вызов транзакции STMS) -> Other Configuration (Другие настройки) -> Include System in Domain (Включить систему в домен).</span><span class="sxs-lookup"><span data-stu-id="3be31-1288">Call transaction STMS -> Other Configuration -> Include System in Domain.</span></span>
* <span data-ttu-id="3be31-1289">Подтверждение соединения hello в hello в локальную систему TMS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1289">Confirm hello connection in hello on premises TMS system.</span></span>
* <span data-ttu-id="3be31-1290">Настройте транспортные маршруты, группы и уровни как обычно.</span><span class="sxs-lookup"><span data-stu-id="3be31-1290">Configure transport routes, groups and layers as usual.</span></span>

<span data-ttu-id="3be31-1291">В сеть сеть подключенных между организациями сценариев, hello задержки между локальной средой и Azure по-прежнему может быть значительной.</span><span class="sxs-lookup"><span data-stu-id="3be31-1291">In site-to-site connected cross-premises scenarios, hello latency between on-premises and Azure still can be substantial.</span></span> <span data-ttu-id="3be31-1292">Если мы выполните hello последовательность транспортировки объектов tooproduction систем разработки и тестирования или думаем о применении транспорта или поддержки пакетов toohello различных систем, вам следует учесть, что, зависимые от расположения главного транспортного hello hello каталог, некоторые из систем hello столкнутся большое значение задержки чтения или записи данных в главном транспортном каталоге hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1292">If we follow hello sequence of transporting objects through development and test systems tooproduction or think about applying transports or support packages toohello different systems, you realize that, dependent on hello location of hello central transport directory, some of hello systems will encounter high latency reading or writing data in hello central transport directory.</span></span> <span data-ttu-id="3be31-1293">Hello ситуация — конфигурациями альбомная tooSAP, где hello разные системы распределяются по разных центрах обработки данных со значительной расстояние между центрами обработки данных hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1293">hello situation is similar tooSAP landscape configurations where hello different systems are spread through different data centers with substantial distance between hello data centers.</span></span>

<span data-ttu-id="3be31-1294">В порядок toowork вокруг такую задержку и систем hello работать быстро в чтением или записью tooor в транспортном каталоге hello, можно настроить два домена STMS транспорта (для локальных. и с системами hello в доменах транспорта hello Azure и ссылка</span><span class="sxs-lookup"><span data-stu-id="3be31-1294">In order toowork around such latency and have hello systems work fast in reading or writing tooor from hello transport directory, you can set up two STMS transport domains (one for on-premises and one with hello systems in Azure and link hello transport domains.</span></span> <span data-ttu-id="3be31-1295">В следующей документации с объяснением hello принципы этой концепции в SAP TMS hello: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/ 38dd924eb711d182bf0000e829fbfe/FRAMESET.htm>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1295">Please check this documentation which explains hello principles behind this concept in hello SAP TMS: <http://help.sap.com/saphelp_me60/helpdata/en/c4/6045377b52253de10000009b38f889/content.htm?frameset=/en/57/38dd924eb711d182bf0000e829fbfe/frameset.htm>.</span></span>

<span data-ttu-id="3be31-1296">Практическое руководство:</span><span class="sxs-lookup"><span data-stu-id="3be31-1296">How to:</span></span>

* <span data-ttu-id="3be31-1297">Настройте транспортный домен в каждом расположении (локально и в Azure) с использованием транзакции STMS <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span><span class="sxs-lookup"><span data-stu-id="3be31-1297">Set up a transport domain on each location (on-premises and Azure) using transaction STMS <http://help.sap.com/saphelp_nw70ehp3/helpdata/en/44/b4a0b47acc11d1899e0000e829fbbd/content.htm></span></span>
* <span data-ttu-id="3be31-1298">Связать hello домена с помощью связи доменов и подтвердите hello связь между двумя доменами hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1298">Link hello domains with a domain link and confirm hello link between hello two domains.</span></span>
  <span data-ttu-id="3be31-1299"><http://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm></span><span class="sxs-lookup"><span data-stu-id="3be31-1299"><http://help.sap.com/saphelp_nw73ehp1/helpdata/en/a3/139838280c4f18e10000009b38f8cf/content.htm></span></span>
* <span data-ttu-id="3be31-1300">Распространите hello конфигурации связанного toohello систему.</span><span class="sxs-lookup"><span data-stu-id="3be31-1300">Distribute hello configuration toohello linked system.</span></span>

#### <a name="rfc-traffic-between-sap-instances-located-in-azure-and-on-premises-cross-premises"></a><span data-ttu-id="3be31-1301">Трафик RFC между экземплярами SAP в Azure и в локальной среде (распределенное развертывание)</span><span class="sxs-lookup"><span data-stu-id="3be31-1301">RFC traffic between SAP instances located in Azure and on-premises (Cross-Premises)</span></span>
<span data-ttu-id="3be31-1302">Трафик RFC между системами, которые являются локальными, так и в Azure должен toowork.</span><span class="sxs-lookup"><span data-stu-id="3be31-1302">RFC traffic between systems which are on-premises and in Azure needs toowork.</span></span> <span data-ttu-id="3be31-1303">tooset соединение вызовите транзакцию SM59 в исходной системе которых требуется toodefine соединение RFC hello целевой системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-1303">tooset up a connection call transaction SM59 in a source system where you need toodefine an RFC connection towards hello target system.</span></span> <span data-ttu-id="3be31-1304">Конфигурация Hello — примерно toohello стандартной установки соединения RFC.</span><span class="sxs-lookup"><span data-stu-id="3be31-1304">hello configuration is similar toohello standard setup of an RFC Connection.</span></span>

<span data-ttu-id="3be31-1305">Мы предполагаем, что в сценарии между организациями hello hello виртуальные машины принадлежат какие выполнения систем SAP, которым требуется toocommunicate друг с другом hello того же домена.</span><span class="sxs-lookup"><span data-stu-id="3be31-1305">We assume that in hello cross-premises scenario, hello VMs which run SAP systems that need toocommunicate with each other are in hello same domain.</span></span> <span data-ttu-id="3be31-1306">Поэтому hello установки соединения RFC между системами SAP не отличаются от действий по настройке hello и входных данных в локальных сценариев.</span><span class="sxs-lookup"><span data-stu-id="3be31-1306">Therefore hello setup of an RFC connection between SAP systems does not differ from hello setup steps and inputs in on-premises scenarios.</span></span>

#### <a name="accessing-local-fileshares-from-sap-instances-located-in-azure-or-vice-versa"></a><span data-ttu-id="3be31-1307">Доступ к локальным общим папкам из экземпляров SAP, размещенных в Azure, и наоборот</span><span class="sxs-lookup"><span data-stu-id="3be31-1307">Accessing ‘local’ fileshares from SAP instances located in Azure or vice versa</span></span>
<span data-ttu-id="3be31-1308">Экземплярам SAP, размещенным в Azure должны tooaccess файловые ресурсы, которые находятся в пределах корпоративной локальной среде hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1308">SAP instances located in Azure need tooaccess file shares which are within hello corporate premises.</span></span> <span data-ttu-id="3be31-1309">Кроме того на локальных экземплярах SAP должны tooaccess общих папок, расположенных в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1309">In addition, on-premises SAP instances need tooaccess file shares which are located in Azure.</span></span> <span data-ttu-id="3be31-1310">tooenable hello общие файловые ресурсы необходимо настроить разрешения hello и параметров общего доступа в локальной системе hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1310">tooenable hello file shares you must configure hello permissions and sharing options on hello local system.</span></span> <span data-ttu-id="3be31-1311">Убедитесь, что порты hello tooopen на hello VPN или подключение ExpressRoute между Azure и центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-1311">Make sure tooopen hello ports on hello VPN or ExpressRoute connection between Azure and your datacenter.</span></span>

## <a name="supportability"></a><span data-ttu-id="3be31-1312">Возможности поддержки</span><span class="sxs-lookup"><span data-stu-id="3be31-1312">Supportability</span></span>
### <span data-ttu-id="3be31-1313"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Решение мониторинга Azure для SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1313"><a name="6f0a47f3-a289-4090-a053-2521618a28c3"></a>Azure Monitoring Solution for SAP</span></span>
<span data-ttu-id="3be31-1314">В порядке tooenable hello мониторинг критически важных систем SAP в Azure hello SAP средств мониторинга SAPOSCOL или SAP Host Agent получают данные из hello узла службы виртуальной машины Azure с помощью расширения мониторинга Azure для SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1314">In order tooenable hello monitoring of mission critical SAP systems on Azure hello SAP monitoring tools SAPOSCOL or SAP Host Agent get data off hello Azure Virtual Machine Service host via an Azure Monitoring Extension for SAP.</span></span> <span data-ttu-id="3be31-1315">Поскольку hello требования по SAP были tooSAP конкретных приложений, корпорация Майкрософт решила не toogenerically реализуйте hello необходимые функциональные возможности в Azure, но оставить его для клиентов toodeploy hello необходимые мониторинга компонентов и конфигураций tootheir Виртуальные машины в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1315">Since hello demands by SAP were very specific tooSAP applications, Microsoft decided not toogenerically implement hello required functionality into Azure, but leave it for customers toodeploy hello necessary monitoring components and configurations tootheir Virtual Machines running in Azure.</span></span> <span data-ttu-id="3be31-1316">Тем не менее развертывание и управление жизненным циклом компонентов мониторинга hello будет в значительной степени автоматизировано Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1316">However, deployment and lifecycle management of hello monitoring components will be mostly automated by Azure.</span></span>

#### <a name="solution-design"></a><span data-ttu-id="3be31-1317">Архитектура решения</span><span class="sxs-lookup"><span data-stu-id="3be31-1317">Solution design</span></span>
<span data-ttu-id="3be31-1318">решение Hello разработала tooenable мониторинга SAP основана на архитектуре агента ВМ Azure и инфраструктуры расширений hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1318">hello solution developed tooenable SAP Monitoring is based on hello architecture of Azure VM Agent and Extension framework.</span></span> <span data-ttu-id="3be31-1319">Идея Hello hello агента ВМ Azure и инфраструктуры расширений представляет tooallow установку программного обеспечения приложения hello галереи расширений ВМ Azure в виртуальной Машине.</span><span class="sxs-lookup"><span data-stu-id="3be31-1319">hello idea of hello Azure VM Agent and Extension framework is tooallow installation of software application(s) available in hello Azure VM Extension gallery within a VM.</span></span> <span data-ttu-id="3be31-1320">Здравствуйте, принцип идея этой концепции является tooallow (в случаях, таких как hello расширения мониторинга Azure для SAP), hello развертывание специальной функциональности в ВМ и hello конфигурации такого программного обеспечения во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-1320">hello principle idea behind this concept is tooallow (in cases like hello Azure Monitoring Extension for SAP), hello deployment of special functionality into a VM and hello configuration of such software at deployment time.</span></span>

<span data-ttu-id="3be31-1321">Здравствуйте, «Агента ВМ Azure», позволяющий обработку специальных расширений ВМ Azure в рамках ВМ встраивается в ВМ Windows по умолчанию для создания виртуальной Машины hello портал Azure приветствия.</span><span class="sxs-lookup"><span data-stu-id="3be31-1321">hello 'Azure VM Agent' that enables handling of specific Azure VM Extensions within hello VM is injected into Windows VMs by default on VM creation in hello Azure portal.</span></span> <span data-ttu-id="3be31-1322">В случае SUSE, Red Hat или Oracle Linux агент виртуальной Машины hello уже образ Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="3be31-1322">In case of SUSE, Red Hat or Oracle Linux, hello VM agent is already part of the Azure Marketplace image.</span></span> <span data-ttu-id="3be31-1323">В случае, если один будет передать виртуальную Машину Linux агента ВМ локально tooAzure hello имеет toobe установлен вручную.</span><span class="sxs-lookup"><span data-stu-id="3be31-1323">In case one would upload a Linux VM from on-premises tooAzure hello VM agent has toobe installed manually.</span></span>

<span data-ttu-id="3be31-1324">Здравствуйте базовые структурные элементы решения мониторинг hello в Azure для SAP выглядит следующим образом:</span><span class="sxs-lookup"><span data-stu-id="3be31-1324">hello basic building blocks of hello Monitoring solution in Azure for SAP looks like this:</span></span>

![Компоненты расширения Microsoft Azure][planning-guide-figure-2400]

<span data-ttu-id="3be31-1326">Как показано в hello блок-схема выше одной части hello решение по мониторингу для SAP размещается в hello образа виртуальной Машины Azure и Azure галереи расширений, который является глобально реплицируемым репозиторием, управляемым операциями Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1326">As shown in hello block diagram above, one part of hello monitoring solution for SAP is hosted in hello Azure VM Image and Azure Extension Gallery which is a globally replicated repository that is managed by Azure Operations.</span></span> <span data-ttu-id="3be31-1327">Он несет hello hello совместные SAP/MS, занимающейся hello Azure реализацию SAP toowork с операциями Azure toopublish новых версий расширения мониторинга Azure для SAP hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1327">It is hello responsibility of hello joint SAP/MS team working on hello Azure implementation of SAP toowork with Azure Operations toopublish new versions of hello Azure Monitoring Extension for SAP.</span></span>

<span data-ttu-id="3be31-1328">При развертывании новой виртуальной Машины Windows hello «Агента ВМ Azure» автоматически добавляется в hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1328">When you deploy a new Windows VM, hello ‘Azure VM Agent’ is automatically added into hello VM.</span></span> <span data-ttu-id="3be31-1329">функция Hello этого агента — toocoordinate hello Загрузка и настройка hello расширений Azure для мониторинга систем SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="3be31-1329">hello function of this agent is toocoordinate hello loading and configuration of hello Azure Extensions for monitoring of SAP NetWeaver Systems.</span></span> <span data-ttu-id="3be31-1330">Для виртуальных машин Linux hello агента ВМ Azure уже hello образ ОС Azure Marketplace.</span><span class="sxs-lookup"><span data-stu-id="3be31-1330">For Linux VMs hello Azure VM Agent is already part of hello Azure Marketplace OS image.</span></span>

<span data-ttu-id="3be31-1331">Однако имеется шаг, который все еще требуется toobe исполнен hello клиента.</span><span class="sxs-lookup"><span data-stu-id="3be31-1331">However, there is a step that still needs toobe executed by hello customer.</span></span> <span data-ttu-id="3be31-1332">Это hello включения и настройки сбора данных о производительности hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1332">This is hello enablement and configuration of hello performance collection.</span></span> <span data-ttu-id="3be31-1333">Hello процесс, связанный с toohello «конфигурация» выполняется автоматически CLI команд или сценария PowerShell.</span><span class="sxs-lookup"><span data-stu-id="3be31-1333">hello process related toohello ‘configuration’ is automated by a PowerShell script or CLI command.</span></span> <span data-ttu-id="3be31-1334">Hello сценарий PowerShell можно загрузить в центре скриптов Microsoft Azure hello согласно инструкциям hello [руководство по развертыванию][deployment-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1334">hello PowerShell script can be downloaded in hello Microsoft Azure Script Center as described in hello [Deployment Guide][deployment-guide].</span></span>

<span data-ttu-id="3be31-1335">Hello общая архитектура hello Azure решение по мониторингу для SAP выглядит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="3be31-1335">hello overall Architecture of hello Azure monitoring solution for SAP looks like:</span></span>

![Решение мониторинга Azure для SAP NetWeaver][planning-guide-figure-2500]

<span data-ttu-id="3be31-1337">**Для hello точное как tooand подробное описание процедуры использования этих командлетов PowerShell или интерфейса командной во время развертывания, выполните hello инструкциями, приведенными в hello [руководство по развертыванию][deployment-guide].**</span><span class="sxs-lookup"><span data-stu-id="3be31-1337">**For hello exact how-tooand for detailed steps of using these PowerShell cmdlets or CLI command during deployments, follow hello instructions given in hello [Deployment Guide][deployment-guide].**</span></span>

### <a name="integration-of-azure-located-sap-instance-into-saprouter"></a><span data-ttu-id="3be31-1338">Интеграция в SAProuter экземпляра SAP, размещенного в Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1338">Integration of Azure located SAP instance into SAProuter</span></span>
<span data-ttu-id="3be31-1339">Экземпляры SAP, работающие в Azure должны toobe доступен из SAProuter также.</span><span class="sxs-lookup"><span data-stu-id="3be31-1339">SAP instances running in Azure need toobe accessible from SAProuter as well.</span></span>

![Сетевое подключение с помощью SAP-Router][planning-guide-figure-2600]

<span data-ttu-id="3be31-1341">SAProuter позволяет hello взаимодействие по протоколу TCP/IP между участвующими системами, если отсутствует прямое соединение IP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1341">A SAProuter enables hello TCP/IP communication between participating systems if there is no direct IP connection.</span></span> <span data-ttu-id="3be31-1342">Это обеспечивает преимущество hello, что на уровне сети нет конца в конец соединения между участниками обмена данными hello не требуется.</span><span class="sxs-lookup"><span data-stu-id="3be31-1342">This provides hello advantage that no end-to-end connection between hello communication partners is necessary on network level.</span></span> <span data-ttu-id="3be31-1343">Hello SAProuter прослушивает порт 3299 по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="3be31-1343">hello SAProuter is listening on port 3299 by default.</span></span>
<span data-ttu-id="3be31-1344">экземпляры tooconnect SAP через SAProuter требуется hello toogive строка SAProuter и имя узла с любой tooconnect попытки.</span><span class="sxs-lookup"><span data-stu-id="3be31-1344">tooconnect SAP instances through a SAProuter you need toogive hello SAProuter string and host name with any attempt tooconnect.</span></span>

## <a name="sap-netweaver-as-java"></a><span data-ttu-id="3be31-1345">SAP NetWeaver AS Java</span><span class="sxs-lookup"><span data-stu-id="3be31-1345">SAP NetWeaver AS Java</span></span>
<span data-ttu-id="3be31-1346">Пока hello фокус hello документ был SAP NetWeaver в целом или hello стек SAP NetWeaver ABAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1346">So far hello focus of hello document has been SAP NetWeaver in general or hello SAP NetWeaver ABAP stack.</span></span> <span data-ttu-id="3be31-1347">В этом небольшом разделе перечислены специальные рекомендации для стека SAP Java hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1347">In this small section, specific considerations for hello SAP Java stack are listed.</span></span> <span data-ttu-id="3be31-1348">Одно из наиболее важные SAP NetWeaver Java исключительно на основе приложения hello — hello корпоративный портал SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1348">One of hello most important SAP NetWeaver Java exclusively based applications is hello SAP Enterprise Portal.</span></span> <span data-ttu-id="3be31-1349">На основе других SAP NetWeaver приложений, как если бы SAP PI и SAP Solution Manager hello SAP NetWeaver ABAP и Java стеки.</span><span class="sxs-lookup"><span data-stu-id="3be31-1349">Other SAP NetWeaver based applications like SAP PI and SAP Solution Manager use both hello SAP NetWeaver ABAP and Java stacks.</span></span> <span data-ttu-id="3be31-1350">Таким образом определенно нет необходимости tooconsider определенные аспекты связанных toohello стеком Java SAP NetWeaver также.</span><span class="sxs-lookup"><span data-stu-id="3be31-1350">Therefore, there certainly is a need tooconsider specific aspects related toohello SAP NetWeaver Java stack as well.</span></span>

### <a name="sap-enterprise-portal"></a><span data-ttu-id="3be31-1351">Корпоративный портал SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1351">SAP Enterprise Portal</span></span>
<span data-ttu-id="3be31-1352">Hello Установка портала SAP в виртуальных машинах Azure не отличается от на локальные установки при развертывании в сценариях между организациями.</span><span class="sxs-lookup"><span data-stu-id="3be31-1352">hello setup of an SAP Portal in an Azure Virtual Machine does not differ from an on premises installation if you are deploying in cross-premises scenarios.</span></span> <span data-ttu-id="3be31-1353">С момента приветствия DNS выполняется локально можно сделать hello параметры порта отдельных экземпляров hello как настроенные в локальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-1353">Since hello DNS is done by on-premises, hello port settings of hello individual instances can be done as configured on-premises.</span></span> <span data-ttu-id="3be31-1354">Hello рекомендации и ограничения, описанные в этом документе, пока относятся к приложениям как корпоративный портал SAP или hello стека SAP NetWeaver Java в целом.</span><span class="sxs-lookup"><span data-stu-id="3be31-1354">hello recommendations and restrictions described in this document so far apply for an application like SAP Enterprise Portal or hello SAP NetWeaver Java stack in general.</span></span>

![Портал SAP][planning-guide-figure-2700]

<span data-ttu-id="3be31-1356">Сценарий развертывания, некоторые клиенты — hello прямой раскрытия toohello корпоративный портал SAP hello Интернета, а hello узла виртуальной машины — подключенных toohello корпоративной сети через туннель VPN или ExpressRoute сайт сайт.</span><span class="sxs-lookup"><span data-stu-id="3be31-1356">A special deployment scenario by some customers is hello direct exposure of hello SAP Enterprise Portal toohello Internet while hello virtual machine host is connected toohello company network via site-to-site VPN tunnel or ExpressRoute.</span></span> <span data-ttu-id="3be31-1357">Такой сценарий у вас есть toomake том, что определенные порты, открытые и не заблокирован брандмауэром или сетевой группы безопасности.</span><span class="sxs-lookup"><span data-stu-id="3be31-1357">For such a scenario, you have toomake sure that specific ports are open and not blocked by firewall or network security group.</span></span> <span data-ttu-id="3be31-1358">Hello же механизм необходимо toobe применяется, когда требуется экземпляр SAP Java tooan tooconnect из локального в сценарии только для облака.</span><span class="sxs-lookup"><span data-stu-id="3be31-1358">hello same mechanics would need toobe applied when you want tooconnect tooan SAP Java instance from on-premises in a Cloud-Only scenario.</span></span>

<span data-ttu-id="3be31-1359">Hello исходный URI портала — HTTP (s):`<Portalserver`>: 5XX00/irj, где порт hello сформированное 50000 плюс (Номер_системы × 100).</span><span class="sxs-lookup"><span data-stu-id="3be31-1359">hello initial portal URI is http(s):`<Portalserver`>:5XX00/irj where hello port is formed by 50000 plus (Systemnumber × 100).</span></span> <span data-ttu-id="3be31-1360">Hello по умолчанию портала URI для системы SAP 00 — `<dns name`>.`<azure region` >.Cloudapp.azure.com:PublicPort/irj.</span><span class="sxs-lookup"><span data-stu-id="3be31-1360">hello default portal URI of SAP system 00 is `<dns name`>.`<azure region`>.Cloudapp.azure.com:PublicPort/irj.</span></span> <span data-ttu-id="3be31-1361">Дополнительные сведения см. здесь: <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1361">For more details, have a look at <http://help.sap.com/saphelp_nw70ehp1/helpdata/de/a2/f9d7fed2adc340ab462ae159d19509/frameset.htm>.</span></span>

![Настройка конечной точки][planning-guide-figure-2800]

<span data-ttu-id="3be31-1363">Если вы хотите toocustomize hello URL-адрес или порты корпоративного портала SAP, см. в этой документации:</span><span class="sxs-lookup"><span data-stu-id="3be31-1363">If you want toocustomize hello URL and/or ports of your SAP Enterprise Portal, please check this documentation:</span></span>

* [<span data-ttu-id="3be31-1364">Change Portal URL (Изменение URL-адреса портала)</span><span class="sxs-lookup"><span data-stu-id="3be31-1364">Change Portal URL</span></span>](http://wiki.scn.sap.com/wiki/display/EP/Change+Portal+URL)
* [<span data-ttu-id="3be31-1365">Change Default port numbers, Portal port numbers (Изменение номеров портов по умолчанию и номеров портов портала)</span><span class="sxs-lookup"><span data-stu-id="3be31-1365">Change Default port numbers, Portal port numbers</span></span>](http://wiki.scn.sap.com/wiki/display/NWTech/Change+Default++port+numbers%2C+Portal+port+numbers)

## <a name="high-availability-ha-and-disaster-recovery-dr-for-sap-netweaver-running-on-azure-virtual-machines"></a><span data-ttu-id="3be31-1366">Высокая доступность и аварийное восстановление для SAP NetWeaver на виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1366">High Availability (HA) and Disaster Recovery (DR) for SAP NetWeaver running on Azure Virtual Machines</span></span>
### <a name="definition-of-terminologies"></a><span data-ttu-id="3be31-1367">Определение терминов</span><span class="sxs-lookup"><span data-stu-id="3be31-1367">Definition of terminologies</span></span>
<span data-ttu-id="3be31-1368">Термин Hello **высокий уровень доступности (HA)** обычно связанные tooa задано технологий, которая сводит к минимуму перерывы в ИТ, предоставляя непрерывности ИТ-услуг через избыточности, отказоустойчивый или отработки отказа защищенные компоненты внутри hello **же** центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-1368">hello term **high availability (HA)** is generally related tooa set of technologies that minimizes IT disruptions by providing business continuity of IT services through redundant, fault-tolerant or failover protected components inside hello **same** data center.</span></span> <span data-ttu-id="3be31-1369">(в нашем случае — в одном регионе Azure).</span><span class="sxs-lookup"><span data-stu-id="3be31-1369">In our case, within one Azure Region.</span></span>

<span data-ttu-id="3be31-1370">**Аварийное восстановление** также предназначено для минимизации перебоев в работе ИТ-служб и их восстановления, но в **разных** центрах обработки данных, которые обычно находятся за сотни километров друг от друга.</span><span class="sxs-lookup"><span data-stu-id="3be31-1370">**Disaster recovery (DR)** is also targeting minimizing IT services disruption, and their recovery but across **different** data centers, that are usually located hundreds of kilometers away.</span></span> <span data-ttu-id="3be31-1371">В нашем случае обычно от разных регионах Azure в течение hello же геополитические регионе или в соответствии с параметром вас как клиента.</span><span class="sxs-lookup"><span data-stu-id="3be31-1371">In our case usually between different Azure Regions within hello same geopolitical region or as established by you as a customer.</span></span>

### <a name="overview-of-high-availability"></a><span data-ttu-id="3be31-1372">Общие сведения о высокой доступности</span><span class="sxs-lookup"><span data-stu-id="3be31-1372">Overview of High Availability</span></span>
<span data-ttu-id="3be31-1373">Можно разделить hello обсуждение высокого уровня доступности SAP в Azure на две части:</span><span class="sxs-lookup"><span data-stu-id="3be31-1373">We can separate hello discussion about SAP high availability in Azure into two parts:</span></span>

* <span data-ttu-id="3be31-1374">**Высокая доступность инфраструктуры Azure**, например высокая доступность вычислений (на виртуальных машинах), сети, хранилища и т. д. и ее преимущества для увеличения доступности приложений SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1374">**Azure infrastructure high availability**, for example HA of compute (VMs), network, storage etc. and its benefits for increasing SAP application availability.</span></span>
* <span data-ttu-id="3be31-1375">**Высокая доступность приложений SAP**, например высокая доступность программных компонентов SAP:</span><span class="sxs-lookup"><span data-stu-id="3be31-1375">**SAP application high availability**, for example HA of SAP software components:</span></span>
  * <span data-ttu-id="3be31-1376">серверов приложений SAP,</span><span class="sxs-lookup"><span data-stu-id="3be31-1376">SAP application servers</span></span>
  * <span data-ttu-id="3be31-1377">экземпляров ASCS/SCS SAP,</span><span class="sxs-lookup"><span data-stu-id="3be31-1377">SAP ASCS/SCS instance</span></span>
  * <span data-ttu-id="3be31-1378">сервера базы данных,</span><span class="sxs-lookup"><span data-stu-id="3be31-1378">DB server</span></span>

<span data-ttu-id="3be31-1379">а также ее совместное использование с высокой доступностью инфраструктуры Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1379">and how it can be combined with Azure infrastructure HA.</span></span>

<span data-ttu-id="3be31-1380">Высокого уровня доступности SAP в Azure есть некоторые различия по сравнению tooSAP высокого уровня доступности, в локальной физической или виртуальной среде.</span><span class="sxs-lookup"><span data-stu-id="3be31-1380">SAP High Availability in Azure has some differences compared tooSAP High Availability in an on-premises physical or virtual environment.</span></span> <span data-ttu-id="3be31-1381">Hello следующие документе SAP описываются стандартные конфигурации высокого уровня доступности SAP в виртуализированных средах Windows: <http://scn.sap.com/docs/DOC-44415>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1381">hello following paper from SAP describes standard SAP High Availability configurations in virtualized environments on Windows: <http://scn.sap.com/docs/DOC-44415>.</span></span> <span data-ttu-id="3be31-1382">Конфигурации высокой доступности SAP, интегрированной с SAPinst, для Linux (такой же, как для Windows) не существует.</span><span class="sxs-lookup"><span data-stu-id="3be31-1382">There is no sapinst-integrated SAP-HA configuration for Linux like it exists for Windows.</span></span> <span data-ttu-id="3be31-1383">Сведения о высокой доступности SAP в локальной среде Linux см. здесь: <http://scn.sap.com/docs/DOC-8541>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1383">Regarding SAP HA on-premises for Linux find more information here: <http://scn.sap.com/docs/DOC-8541>.</span></span>

### <a name="azure-infrastructure-high-availability"></a><span data-ttu-id="3be31-1384">Высокая доступность инфраструктуры Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1384">Azure Infrastructure High Availability</span></span>
<span data-ttu-id="3be31-1385">В настоящее время предоставляется соглашение SLA для одной ВМ с временем бесперебойной работы на уровне 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="3be31-1385">There is currently a single-VM SLA of 99.9%.</span></span> <span data-ttu-id="3be31-1386">представление tooget hello доступность одной виртуальной Машины выглядит так, можно просто построить произведение hello hello разные доступные SLA Azure: <https://azure.microsoft.com/support/legal/sla/>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1386">tooget an idea how hello availability of a single VM might look like you can simply build hello product of hello different available Azure SLAs: <https://azure.microsoft.com/support/legal/sla/>.</span></span>

<span data-ttu-id="3be31-1387">Hello основа для расчета hello — 30 дней в месяц или 43200 минут.</span><span class="sxs-lookup"><span data-stu-id="3be31-1387">hello basis for hello calculation is 30 days per month, or 43200 minutes.</span></span> <span data-ttu-id="3be31-1388">Таким образом, время простоя 0,05% соответствует too21.6 минут.</span><span class="sxs-lookup"><span data-stu-id="3be31-1388">Therefore, 0.05% downtime corresponds too21.6 minutes.</span></span> <span data-ttu-id="3be31-1389">Как обычно доступности hello hello различных служб будет умножить в hello следующими способами:</span><span class="sxs-lookup"><span data-stu-id="3be31-1389">As usual, hello availability of hello different services will multiply in hello following way:</span></span>

<span data-ttu-id="3be31-1390">(Доступность службы 1 / 100) * (доступность службы 2 / 100) * (доступность службы 3 / 100) *…</span><span class="sxs-lookup"><span data-stu-id="3be31-1390">(Availability Service #1/100) * (Availability Service #2/100) * (Availability Service #3/100) *…</span></span>

<span data-ttu-id="3be31-1391">Например:</span><span class="sxs-lookup"><span data-stu-id="3be31-1391">Like:</span></span>

<span data-ttu-id="3be31-1392">(99,95 / 100) * (99,9 / 100) * (99,9 / 100) = 0,9975, или общая доступность 99,75 %.</span><span class="sxs-lookup"><span data-stu-id="3be31-1392">(99.95/100) * (99.9/100) * (99.9/100) = 0.9975 or an overall availability of 99.75%.</span></span>

#### <a name="virtual-machine-vm-high-availability"></a><span data-ttu-id="3be31-1393">Высокая доступность виртуальных машин (ВМ)</span><span class="sxs-lookup"><span data-stu-id="3be31-1393">Virtual Machine (VM) High Availability</span></span>
<span data-ttu-id="3be31-1394">Существует два типа событий платформы Azure, которые могут повлиять на доступность виртуальных машин hello: планового обслуживания и незапланированных обслуживания.</span><span class="sxs-lookup"><span data-stu-id="3be31-1394">There are two types of Azure platform events that can affect hello availability of your virtual machines: planned maintenance and unplanned maintenance.</span></span>

* <span data-ttu-id="3be31-1395">События планового обслуживания, периодические обновления, внесенные программой Microsoft toohello базовой платформы Azure tooimprove общую надежность, производительность и безопасность инфраструктуры платформы hello, работать виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1395">Planned maintenance events are periodic updates made by Microsoft toohello underlying Azure platform tooimprove overall reliability, performance, and security of hello platform infrastructure that your virtual machines run on.</span></span>
* <span data-ttu-id="3be31-1396">Происходить случаи внепланового обслуживания при сбое оборудования hello или основной виртуальной машины физической инфраструктуры иным образом.</span><span class="sxs-lookup"><span data-stu-id="3be31-1396">Unplanned maintenance events occur when hello hardware or physical infrastructure underlying your virtual machine has faulted in some way.</span></span> <span data-ttu-id="3be31-1397">Это могут быть сбои локальной сети или локальных жестких дисков, а также другие ошибки на уровне стойки.</span><span class="sxs-lookup"><span data-stu-id="3be31-1397">This may include local network failures, local disk failures, or other rack level failures.</span></span> <span data-ttu-id="3be31-1398">При обнаружении такой сбой hello платформы Azure автоматически перенести виртуальную машину из hello неработоспособный физический сервер размещения виртуальной машины tooa работоспособности физического сервера.</span><span class="sxs-lookup"><span data-stu-id="3be31-1398">When such a failure is detected, hello Azure platform will automatically migrate your virtual machine from hello unhealthy physical server hosting your virtual machine tooa healthy physical server.</span></span> <span data-ttu-id="3be31-1399">Такие события происходят редко, но также может привести к tooreboot виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1399">Such events are rare, but may also cause your virtual machine tooreboot.</span></span>

<span data-ttu-id="3be31-1400">Дополнительные сведения можно найти в этой документации: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span><span class="sxs-lookup"><span data-stu-id="3be31-1400">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="azure-storage-redundancy"></a><span data-ttu-id="3be31-1401">Избыточность хранилища Azure</span><span class="sxs-lookup"><span data-stu-id="3be31-1401">Azure Storage Redundancy</span></span>
<span data-ttu-id="3be31-1402">Hello данных вашей учетной записи хранилища Microsoft Azure всегда является реплицированной tooensure устойчивость и высокого уровня доступности и следовании hello об уровне ОБСЛУЖИВАНИЯ хранилища Azure, даже при временных сбоях оборудования лицо hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1402">hello data in your Microsoft Azure Storage Account is always replicated tooensure durability and high availability, meeting hello Azure Storage SLA even in hello face of transient hardware failures.</span></span>

<span data-ttu-id="3be31-1403">Так как хранилище Azure сохраняет три изображения hello данных по умолчанию, RAID5 или RAID1 на нескольких дисках Azure не обязательны.</span><span class="sxs-lookup"><span data-stu-id="3be31-1403">Since Azure Storage is keeping three images of hello data by default, RAID5 or RAID1 across multiple Azure disks are not necessary.</span></span>

<span data-ttu-id="3be31-1404">Дополнительные сведения найти в этой документации: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span><span class="sxs-lookup"><span data-stu-id="3be31-1404">More details can be found in this article: <http://azure.microsoft.com/documentation/articles/storage-redundancy/></span></span>

#### <a name="utilizing-azure-infrastructure-vm-restart-tooachieve-higher-availability-of-sap-applications"></a><span data-ttu-id="3be31-1405">Использование инфраструктуры Azure ВМ перезапускается tooAchieve «высокий» доступности приложений SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1405">Utilizing Azure Infrastructure VM Restart tooAchieve “Higher Availability” of SAP Applications</span></span>
<span data-ttu-id="3be31-1406">Если вы решите не toouse функции например Server отказоустойчивой кластеризации Windows (WSFC) или Pacemaker в Linux (в настоящее время поддерживается только для SLES 12 и более поздней версии), перезапустите виртуальную Машину Azure — загруженные tooprotect систему SAP от запланированных и незапланированных простоев hello Инфраструктура Azure физического сервера и общей базовой платформы Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1406">If you decide not toouse functionalities like Windows Server Failover Clustering (WSFC) or Pacemaker on Linux (currently only supported for SLES 12 and higher), Azure VM Restart is utilized tooprotect an SAP System against planned and unplanned downtime of hello Azure physical server infrastructure and overall underlying Azure platform.</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-1407">Это важные toomention, что перезапуск виртуальной Машины Azure в основном защищает виртуальные машины и не приложения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1407">It is important toomention that Azure VM Restart primarily protects VMs and NOT applications.</span></span> <span data-ttu-id="3be31-1408">Перезапуск виртуальной машины не гарантирует высокую доступность приложений SAP, но обеспечивает определенный уровень доступности инфраструктуры, а значит — опосредованно — и более высокую доступность систем SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1408">VM Restart does not offer high availability for SAP applications, but it does offer a certain level of infrastructure availability and therefore indirectly “higher availability” of SAP systems.</span></span> <span data-ttu-id="3be31-1409">Имеется также нет соглашения об уровне ОБСЛУЖИВАНИЯ для hello времени toorestart виртуальной Машины после сбоя узла плановой или незапланированной.</span><span class="sxs-lookup"><span data-stu-id="3be31-1409">There is also no SLA for hello time it will take toorestart a VM after a planned or unplanned host outage.</span></span> <span data-ttu-id="3be31-1410">Таким образом, этот метод обеспечения высокой доступности не подходит для критически важных компонентов системы SAP, таких как (A)SCS или СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-1410">Therefore, this method of ‘high availability’ is not suitable for critical components of an SAP system like (A)SCS or DBMS.</span></span>
>
>

<span data-ttu-id="3be31-1411">Другой элемент инфраструктуры, важный для обеспечения высокой доступности, — хранилище.</span><span class="sxs-lookup"><span data-stu-id="3be31-1411">Another important infrastructure element for high availability is storage.</span></span> <span data-ttu-id="3be31-1412">Например, в соглашении об уровне обслуживания хранилища Azure указана доступность 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="3be31-1412">For example Azure Storage SLA is 99,9 % availability.</span></span> <span data-ttu-id="3be31-1413">Если пользователь развернет все виртуальные машины с содержащимися на них дисками в одной учетной записи хранения Azure, потенциальная недоступность хранилища Azure приведет к недоступности всех виртуальных машин, размещенных в этой учетной записи хранения Azure, а также всех компонентов SAP, выполняющихся на этих виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="3be31-1413">If one deploys all VMs with its disks into a single Azure Storage Account, potential Azure Storage unavailability will cause unavailability of all VMs that are placed in that Azure Storage Account, and also all SAP components running inside of those VMs.</span></span>  

<span data-ttu-id="3be31-1414">Вместо размещения всех виртуальных машин в одной учетной записи хранения Azure можно также использовать выделенные учетные записи хранения для каждой виртуальной машины и таким образом повысить общую доступность виртуальных машин и приложения SAP с помощью нескольких независимых учетных записей хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1414">Instead of putting all VMs into one single Azure Storage Account, you can also use dedicated storage accounts for each VM, and in this way increase overall VM and SAP application availability by using multiple independent Azure Storage Accounts.</span></span>

<span data-ttu-id="3be31-1415">Диски Azure управляемых автоматически помещаются в hello домен сбоя hello виртуальной машины, к которым они присоединены.</span><span class="sxs-lookup"><span data-stu-id="3be31-1415">Azure Managed Disks are automatically placed in hello Fault Domain of hello virtual machine they are attached to.</span></span> <span data-ttu-id="3be31-1416">При наличии двух виртуальных машин в группе доступности задать и использовать управляемые диски, hello платформы берет на себя распространение hello управляемых дисков в других доменах сбоя также.</span><span class="sxs-lookup"><span data-stu-id="3be31-1416">If you place two virtual machines in an availability set and use Managed Disks, hello platform will take care of distributing hello Managed Disks into different Fault Domains as well.</span></span> <span data-ttu-id="3be31-1417">Если планируется toouse хранилище Premium, настоятельно рекомендуется использовать Управление дисками также.</span><span class="sxs-lookup"><span data-stu-id="3be31-1417">If you plan toouse Premium Storage, we highly recommend using Manage Disks as well.</span></span>

<span data-ttu-id="3be31-1418">Пример архитектуры системы SAP NetWeaver, в которой используется высокая доступность инфраструктуры Azure и учетные записи хранения:</span><span class="sxs-lookup"><span data-stu-id="3be31-1418">A sample architecture of an SAP NetWeaver system that uses Azure infrastructure HA and storage accounts could look like this:</span></span>

![Использование инфраструктуры Azure «выше» доступности SAP tooachieve приложений высокого уровня ДОСТУПНОСТИ][planning-guide-figure-2900]

<span data-ttu-id="3be31-1420">Пример архитектуры системы SAP NetWeaver, в которой используется высокая доступность инфраструктуры Azure и управляемые диски:</span><span class="sxs-lookup"><span data-stu-id="3be31-1420">A sample architecture of an SAP NetWeaver system that uses Azure infrastructure HA and Managed Disks could look like this:</span></span>

![Использование инфраструктуры Azure «выше» доступности SAP tooachieve приложений высокого уровня ДОСТУПНОСТИ][planning-guide-figure-2901]

<span data-ttu-id="3be31-1422">Для важных компонентов SAP добиться hello пока следующие:</span><span class="sxs-lookup"><span data-stu-id="3be31-1422">For critical SAP components we achieved hello following so far:</span></span>

* <span data-ttu-id="3be31-1423">Высокая доступность серверов приложений (AS) SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1423">High Availability of SAP Application Servers (AS)</span></span>

  <span data-ttu-id="3be31-1424">Экземпляры серверов приложений SAP являются избыточными компонентами.</span><span class="sxs-lookup"><span data-stu-id="3be31-1424">SAP application server instances are redundant components.</span></span> <span data-ttu-id="3be31-1425">Каждый экземпляр SAP AS развертывается на отдельной виртуальной машине, которая работает в отдельных домене сбоя и домене обновления Azure (см. разделы [Домены сбоя][planning-guide-3.2.1] и [Домены обновления][planning-guide-3.2.2]).</span><span class="sxs-lookup"><span data-stu-id="3be31-1425">Each SAP AS instance is deployed on its own VM, that is running in a different Azure Fault and Upgrade Domain (see chapters [Fault Domains][planning-guide-3.2.1] and [Upgrade Domains][planning-guide-3.2.2]).</span></span> <span data-ttu-id="3be31-1426">Это обеспечивается за счет групп доступности Azure (см. раздел [Группы доступности Azure][planning-guide-3.2.3]).</span><span class="sxs-lookup"><span data-stu-id="3be31-1426">This is ensured by using Azure Availability Sets (see chapter [Azure Availability Sets][planning-guide-3.2.3]).</span></span> <span data-ttu-id="3be31-1427">Потенциальная недоступность домена сбоя или обновления Azure (запланированная или незапланированная) приведет к недоступности ограниченного количества виртуальных машин и их экземпляров SAP AS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1427">Potential planned or unplanned unavailability of an Azure Fault or Upgrade Domain will cause unavailability of a restricted number of VMs with their SAP AS instances.</span></span>

  <span data-ttu-id="3be31-1428">Если каждый экземпляр SAP AS помещается в отдельную учетную запись хранения Azure, потенциальная недоступность одной учетной записи хранения Azure приведет к недоступности только одной виртуальной машины и соответствующего экземпляра SAP AS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1428">Each SAP AS instance is placed in its own Azure Storage account – potential unavailability of one Azure Storage Account will cause unavailability of only one VM with its SAP AS instance.</span></span> <span data-ttu-id="3be31-1429">Однако учтите, что существует ограничение на число учетных записей хранения Azure в рамках одной подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1429">However, be aware that there is a limit of Azure Storage Accounts within one Azure subscription.</span></span> <span data-ttu-id="3be31-1430">автоматический запуск tooensure (A) SCS экземпляра после перезагрузки hello виртуальной Машины, убедитесь, что tooset Autostart, параметр hello в экземпляре (A) SCS запускаете профиля, описанные в главах [использование автозапуска экземпляров SAP] [ planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="3be31-1430">tooensure automatic start of (A)SCS instance after hello VM reboot, make sure tooset hello Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span>
  <span data-ttu-id="3be31-1431">Дополнительные сведения см. в разделе [Высокая доступность серверов приложений SAP][planning-guide-11.4.1].</span><span class="sxs-lookup"><span data-stu-id="3be31-1431">Please also read chapter [High Availability for SAP Application Servers][planning-guide-11.4.1] for more details.</span></span>

  <span data-ttu-id="3be31-1432">Даже при использовании управляемых дисков эти диски также сохраняются в учетной записи хранения Azure и могут быть недоступны в случае сбоя хранилища.</span><span class="sxs-lookup"><span data-stu-id="3be31-1432">Even if you use Managed Disks, those disks are also stored in an Azure Storage Account and can be unavailable in an event of a storage outage.</span></span>

* <span data-ttu-id="3be31-1433">*Повышение* доступности экземпляра SAP (A)SCS</span><span class="sxs-lookup"><span data-stu-id="3be31-1433">*Higher* Availability of SAP (A)SCS instance</span></span>

  <span data-ttu-id="3be31-1434">Здесь мы используем hello Azure ВМ перезапускается tooprotect виртуальной Машины с помощью установленного экземпляра SAP (A) SCS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1434">Here we utilize Azure VM Restart tooprotect hello VM with installed SAP (A)SCS instance.</span></span> <span data-ttu-id="3be31-1435">В hello случай запланированных и незапланированных простоев Azure серверов, виртуальных машин будет перезапущена на другой доступный сервер.</span><span class="sxs-lookup"><span data-stu-id="3be31-1435">In hello case of planned or unplanned downtime of Azure severs, VMs will be restarted on another available server.</span></span> <span data-ttu-id="3be31-1436">Как упоминалось ранее, в первую очередь перезапуск виртуальной Машины Azure защищает виртуальные машины и не приложений, в данном случае hello (A) SCS экземпляра.</span><span class="sxs-lookup"><span data-stu-id="3be31-1436">As mentioned earlier, Azure VM Restart primarily protects VMs and NOT applications, in this case hello (A)SCS instance.</span></span> <span data-ttu-id="3be31-1437">Через hello ВМ перезапускается мы свяжемся косвенно «высокий» доступности экземпляра SAP (A) SCS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1437">Through hello VM Restart we’ll reach indirectly “higher availability” of SAP (A)SCS instance.</span></span> <span data-ttu-id="3be31-1438">автоматический запуск tooinsure (A) SCS экземпляра после перезагрузки hello виртуальной Машины, убедитесь, что tooset Autostart, параметр экземпляра (A) SCS запускаете профиля, описанные в главах [использование автозапуска экземпляров SAP][planning-guide-11.5].</span><span class="sxs-lookup"><span data-stu-id="3be31-1438">tooinsure automatic start of (A)SCS instance after hello VM reboot, make sure tooset Autostart parameter in (A)SCS instance start profile described in chapter [Using Autostart for SAP instances][planning-guide-11.5].</span></span> <span data-ttu-id="3be31-1439">Это означает, что hello (A) SCS, работающий как единственная точка отказа (SPOF) в одной виртуальной Машины будет определяющим фактором доступности всего ландшафта SAP hello hello hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1439">This means hello (A)SCS instance as a Single Point of Failure (SPOF) running in a single VM will be hello determinative factor for hello availability of hello whole SAP landscape.</span></span>

* <span data-ttu-id="3be31-1440">*Повышение* доступности сервера СУБД</span><span class="sxs-lookup"><span data-stu-id="3be31-1440">*Higher* Availability of DBMS Server</span></span>

  <span data-ttu-id="3be31-1441">Здесь аналогичный экземпляр SAP (A) SCS toohello вариант использования, мы используем перезапуск виртуальной Машины Azure tooprotect hello виртуальной Машины с программным обеспечением СУБД и мы более «высокая доступность» СУБД программного обеспечения посредством перезапуск виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1441">Here, similar toohello SAP (A)SCS instance use case, we utilize Azure VM Restart tooprotect hello VM with installed DBMS software, and we achieve “higher availability” of DBMS software through VM Restart.</span></span>
  <span data-ttu-id="3be31-1442">СУБД, работающих в одной виртуальной Машины также SPOF и является определяющим фактором доступности всего ландшафта SAP hello hello hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1442">DBMS running in a single VM is also a SPOF, and it is hello determinative factor for hello availability of hello whole SAP landscape.</span></span>

### <a name="sap-application-high-availability-on-azure-iaas"></a><span data-ttu-id="3be31-1443">Высокая доступность приложений SAP в Azure IaaS</span><span class="sxs-lookup"><span data-stu-id="3be31-1443">SAP Application High Availability on Azure IaaS</span></span>
<span data-ttu-id="3be31-1444">tooachieve полного SAP системы высокого уровня доступности, мы должны tooprotect все важные компоненты системы SAP для примера избыточных серверов приложений SAP, а уникальные компоненты (например единственная точка отказа), например экземпляра SAP (A) SCS и СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-1444">tooachieve full SAP system high availability, we need tooprotect all critical SAP system components, for example redundant SAP application servers, and unique components (for example Single Point of Failure) like SAP (A)SCS instance and DBMS.</span></span>

#### <span data-ttu-id="3be31-1445"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>Высокая доступность серверов приложений SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1445"><a name="5d9d36f9-9058-435d-8367-5ad05f00de77"></a>High Availability for SAP Application Servers</span></span>
<span data-ttu-id="3be31-1446">Для экземпляров серверов-диалоговое окно приложения hello SAP не требуется toothink о конкретных высокого уровня доступности.</span><span class="sxs-lookup"><span data-stu-id="3be31-1446">For hello SAP application servers/dialog instances it’s not necessary toothink about a specific high availability solution.</span></span> <span data-ttu-id="3be31-1447">Высокая доступность достигается за счет простой избыточности и, как следствие, достаточного количества серверов на разных виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="3be31-1447">High availability is simply achieved by redundancy and thereby having enough of them in different virtual machines.</span></span> <span data-ttu-id="3be31-1448">Они должна быть размещена в одной группе доступности Azure tooavoid, hello виртуальные машины могут обновляться на hello hello одновременно во время планового обслуживания.</span><span class="sxs-lookup"><span data-stu-id="3be31-1448">They should all be placed in hello same Azure Availability Set tooavoid that hello VMs might be updated at hello same time during planned maintenance downtime.</span></span> <span data-ttu-id="3be31-1449">Hello базовую функциональность, построенная на различные обновления и домены отказоустойчивости в единице масштабирования Azure уже был введен в главе [домены обновления][planning-guide-3.2.2].</span><span class="sxs-lookup"><span data-stu-id="3be31-1449">hello basic functionality which builds on different Upgrade and Fault Domains within an Azure Scale Unit was already introduced in chapter [Upgrade Domains][planning-guide-3.2.2].</span></span> <span data-ttu-id="3be31-1450">Группы доступности Azure были описаны в разделе этого документа [Группы доступности Azure][planning-guide-3.2.3].</span><span class="sxs-lookup"><span data-stu-id="3be31-1450">Azure Availability Sets were presented in chapter [Azure Availability Sets][planning-guide-3.2.3] of this document.</span></span>

<span data-ttu-id="3be31-1451">Количество доменов сбоя и обновления, которые можно использовать в группе доступности Azure в единице масштабирования Azure, не бесконечно.</span><span class="sxs-lookup"><span data-stu-id="3be31-1451">There is no infinite number of Fault and Upgrade Domains that can be used by an Azure Availability Set within an Azure Scale Unit.</span></span> <span data-ttu-id="3be31-1452">Это означает, что помещается число виртуальных машин в одной группе доступности, рано или поздно более одной виртуальной Машины в конце hello же сбоя или обновление домена.</span><span class="sxs-lookup"><span data-stu-id="3be31-1452">This means that putting a number of VMs into one Availability Set, sooner or later more than one VM ends up in hello same Fault or Upgrade Domain.</span></span>

<span data-ttu-id="3be31-1453">Развертывание нескольких сервера приложений SAP экземпляров в их выделенные виртуальные машины, и при условии, что мы получили 5 доменами обновления, hello следующий рисунок появляется в конце hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1453">Deploying a few SAP application server instances in their dedicated VMs and assuming that we got five Upgrade Domains, hello following picture emerges at hello end.</span></span> <span data-ttu-id="3be31-1454">Hello фактическое максимальное число доменов сбоя и обновления в наборе доступности может измениться в будущих hello:</span><span class="sxs-lookup"><span data-stu-id="3be31-1454">hello actual max number of fault and update domains within an availability set might change in hello future:</span></span>

![Высокая доступность серверов приложений SAP в Azure][planning-guide-figure-3000]

<span data-ttu-id="3be31-1456">Дополнительные сведения можно найти в этой документации: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span><span class="sxs-lookup"><span data-stu-id="3be31-1456">More details can be found in this documentation: <http://azure.microsoft.com/documentation/articles/virtual-machines-manage-availability></span></span>

#### <a name="high-availability-for-hello-sap-ascs-instance-on-windows"></a><span data-ttu-id="3be31-1457">Высокий уровень доступности для экземпляра SAP (A) SCS hello в Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1457">High Availability for hello SAP (A)SCS instance on Windows</span></span>
<span data-ttu-id="3be31-1458">Отказоустойчивого кластера (WSFC) является экземпляром SAP (A) SCS hello tooprotect часто используемых решений.</span><span class="sxs-lookup"><span data-stu-id="3be31-1458">Windows Server Failover Cluster (WSFC) is a frequently used solution tooprotect hello SAP (A)SCS instance.</span></span> <span data-ttu-id="3be31-1459">Он также интегрируется в SAPinst в форме "установки с высокой доступностью".</span><span class="sxs-lookup"><span data-stu-id="3be31-1459">It is also integrated into sapinst in form of an "HA installation".</span></span> <span data-ttu-id="3be31-1460">На данный момент времени hello инфраструктуры Azure не может tooprovide hello функциональные возможности tooset копирование hello hello необходимые отказоустойчивого кластера Windows Server так же, как это можно сделать локально.</span><span class="sxs-lookup"><span data-stu-id="3be31-1460">At this point in time hello Azure infrastructure is not able tooprovide hello functionality tooset up hello required Windows Server Failover Cluster hello same way as it's done on-premises.</span></span>

<span data-ttu-id="3be31-1461">По состоянию на январь 2016 г. hello Azure облачной платформы операционной системы Windows hello не предоставляет возможность использования в общий том кластера на диске, совместно используется двумя виртуальными машинами Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1461">As of January 2016 hello Azure cloud platform running hello Windows operating system does not provide hello possibility of using a cluster shared volume on a disk shared between two Azure VMs.</span></span>

<span data-ttu-id="3be31-1462">Хотя приемлемым решением является hello об использовании программного обеспечения сторонних поставщиков, предоставляющий общего тома репликацией синхронной, так и прозрачный диска, которая может быть интегрирован в WSFC.</span><span class="sxs-lookup"><span data-stu-id="3be31-1462">A valid solution though is hello usage of 3rd-party software which provides a shared volume by synchronous and transparent disk replication which can be integrated into WSFC.</span></span> <span data-ttu-id="3be31-1463">Этот подход неявно подразумевает, что этой только hello активный узел кластера может tooaccess копирует один диск hello в момент времени.</span><span class="sxs-lookup"><span data-stu-id="3be31-1463">This approach implies that only hello active cluster node is able tooaccess one of hello disk copies at a point in time.</span></span> <span data-ttu-id="3be31-1464">По состоянию на январь 2016 г. Этот высокого уровня ДОСТУПНОСТИ конфигурации является экземпляром SAP (A) SCS hello поддерживается tooprotect на гостевую ОС Windows на виртуальных машинах Azure в сочетании с программным обеспечением сторонних поставщиков SIOS DataKeeper.</span><span class="sxs-lookup"><span data-stu-id="3be31-1464">As of January 2016 this HA configuration is supported tooprotect hello SAP (A)SCS instance on Windows guest OS on Azure VMs in combination with 3rd-party software SIOS DataKeeper.</span></span>

<span data-ttu-id="3be31-1465">Hello SIOS DataKeeper решение предоставляет tooWindows ресурса кластера общего диска отказоустойчивых кластеров, задав:</span><span class="sxs-lookup"><span data-stu-id="3be31-1465">hello SIOS DataKeeper solution provides a shared disk cluster resource tooWindows Failover Clusters by having:</span></span>

* <span data-ttu-id="3be31-1466">Дополнительный виртуальный жесткий ДИСК Azure присоединенного tooeach hello виртуальных машин (ВМ), в конфигурации кластера Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1466">An additional Azure VHD attached tooeach of hello virtual machines (VMs) that are in a Windows Cluster configuration</span></span>
* <span data-ttu-id="3be31-1467">SIOS DataKeeper Cluster Edition работает на обоих узлах виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="3be31-1467">SIOS DataKeeper Cluster Edition running on both VM nodes</span></span>
* <span data-ttu-id="3be31-1468">Наличие SIOS DataKeeper Cluster Edition настроен таким образом, она отражает синхронно hello содержимое hello дополнительные VHD, подключенный том с источника tooadditional виртуальных машин подключен виртуальный жесткий ДИСК тома целевой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1468">Having SIOS DataKeeper Cluster Edition configured in a way that it synchronously mirrors hello content of hello additional VHD attached volume from source VMs tooadditional VHD attached volume of target VM.</span></span>
* <span data-ttu-id="3be31-1469">SIOS DataKeeper абстрагирования hello исходных и целевых локальных томов и презентация их tooWindows отказоустойчивого кластера как один общий диск.</span><span class="sxs-lookup"><span data-stu-id="3be31-1469">SIOS DataKeeper is abstracting hello source and target local volumes and presenting them tooWindows Failover Cluster as a single shared disk.</span></span>

<span data-ttu-id="3be31-1470">Можно найти все сведения о том, как tooinstall отказоустойчивого кластера Windows с помощью SIOS DataKeeper и SAP в hello [кластеризация экземпляра SAP ASCS с использованием отказоустойчивых кластеров Windows Server в Azure с помощью sios DataKeeper] [ ha-guide-classic]Технический документ.</span><span class="sxs-lookup"><span data-stu-id="3be31-1470">You can find all details on how tooinstall a Windows Failover Cluster with SIOS DataKeeper and SAP in hello [Clustering SAP ASCS Instance using Windows Server Failover Cluster on Azure with SIOS DataKeeper][ha-guide-classic] white paper.</span></span>

#### <a name="high-availability-for-hello-sap-ascs-instance-on-linux"></a><span data-ttu-id="3be31-1471">Высокий уровень доступности для экземпляра SAP (A) SCS hello в Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1471">High Availability for hello SAP (A)SCS instance on Linux</span></span>
<span data-ttu-id="3be31-1472">Начиная с декабря 2015 также отсутствует диск эквивалентные tooshared WSFC для виртуальных машин Linux в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1472">As of Dec 2015 there is also no equivalent tooshared disk WSFC for Linux VMs on Azure.</span></span> <span data-ttu-id="3be31-1473">Альтернативные решения, использующие стороннее программное обеспечение, например SIOS для Windows, для работы с SAP на платформе Linux в Azure еще не проверены.</span><span class="sxs-lookup"><span data-stu-id="3be31-1473">Alternative solutions using 3rd-party software like SIOS for Windows are not validated yet for running SAP on Linux on Azure.</span></span>

#### <a name="high-availability-for-hello-sap-database-instance"></a><span data-ttu-id="3be31-1474">Высокий уровень доступности для экземпляра базы данных SAP hello</span><span class="sxs-lookup"><span data-stu-id="3be31-1474">High Availability for hello SAP database instance</span></span>
<span data-ttu-id="3be31-1475">Hello СУБД HA SAP установки Обычная основана на двух ВМ СУБД, где используются функциональные возможности высокого уровня доступности СУБД tooreplicate данные из hello active СУБД экземпляр toohello второй виртуальной Машины в пассивный экземпляр СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-1475">hello typical SAP DBMS HA setup is based on two DBMS VMs where DBMS high-availability functionality is used tooreplicate data from hello active DBMS instance toohello second VM into a passive DBMS instance.</span></span>

<span data-ttu-id="3be31-1476">Высокий уровень доступности и аварийного восстановления функциональные возможности для СУБД в СУБД общего, а также определенные описаны в hello [руководство по развертыванию СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1476">High Availability and Disaster recovery functionality for DBMS in general as well as specific DBMS are described in hello [DBMS Deployment Guide][dbms-guide].</span></span>

#### <a name="end-to-end-high-availability-for-hello-complete-sap-system"></a><span data-ttu-id="3be31-1477">Здравствуйте, конца в конец высокий уровень доступности для всей системы SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1477">End-to-End High Availability for hello Complete SAP System</span></span>
<span data-ttu-id="3be31-1478">Ниже приведены два примера полной высокодоступной архитектуры SAP NetWeaver в Azure: по одному для Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="3be31-1478">Here are two examples of a complete SAP NetWeaver HA architecture in Azure - one for Windows and one for Linux.</span></span>

<span data-ttu-id="3be31-1479">Неуправляемые только диски: hello основные понятия, описанные ниже может потребоваться toobe скомпрометированы немного при развертывании многие системы SAP и количество виртуальных машин, развернутых в hello превышением hello максимальное количество учетных записей хранения на подписку.</span><span class="sxs-lookup"><span data-stu-id="3be31-1479">Unmanaged disks only: hello concepts as explained below may need toobe compromised a bit when you deploy many SAP systems and hello number of VMs deployed are exceeding hello maximum limit of Storage Accounts per subscription.</span></span> <span data-ttu-id="3be31-1480">В таких случаях виртуальных жестких дисков виртуальных машин должны toobe объединены в одну учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1480">In such cases, VHDs of VMs need toobe combined within one Storage Account.</span></span> <span data-ttu-id="3be31-1481">В таких случаях VHD-диски виртуальных машин нужно объединить в одной учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1481">Usually you would do so by combining VHDs of SAP application layer VMs of different SAP systems.</span></span>  <span data-ttu-id="3be31-1482">Обычно объединяются VHD-диски виртуальных машин уровня приложений SAP из разных систем SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1482">We also combined different VHDs of different DBMS VMs of different SAP systems in one Azure Storage Account.</span></span> <span data-ttu-id="3be31-1483">Тем самым учитывая ограничения операций ввода-ВЫВОДА hello учетных записей хранилища Azure (<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>)</span><span class="sxs-lookup"><span data-stu-id="3be31-1483">Thereby keeping hello IOPS limits of Azure Storage Accounts in mind (<https://azure.microsoft.com/documentation/articles/storage-scalability-targets>)</span></span>


##### <a name="windowslogowindows-ha-on-windows"></a>![Windows][Logo_Windows] <span data-ttu-id="3be31-1485">Высокая доступность в Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1485">HA on Windows</span></span>
![Высокодоступная архитектура приложений SAP NetWeaver с сервером SQL Server в Azure IaaS][planning-guide-figure-3200]

<span data-ttu-id="3be31-1487">для системы SAP NetWeaver hello, toominimize воздействие проблем инфраструктуры и установку обновлений на узлы используются следующие конструкции Azure Hello:</span><span class="sxs-lookup"><span data-stu-id="3be31-1487">hello following Azure constructs are used for hello SAP NetWeaver system, toominimize impact by infrastructure issues and host patching:</span></span>

* <span data-ttu-id="3be31-1488">Hello вся система развернута в Azure (это обязательно — уровень СУБД, (A) SCS экземпляра и toorun требуется полное приложение слоя в hello местоположения).</span><span class="sxs-lookup"><span data-stu-id="3be31-1488">hello complete system is deployed on Azure (required - DBMS layer, (A)SCS instance and complete application layer need toorun in hello same location).</span></span>
* <span data-ttu-id="3be31-1489">Hello вся система работает в одной подписки Azure (обязательно).</span><span class="sxs-lookup"><span data-stu-id="3be31-1489">hello complete system runs within one Azure subscription (required).</span></span>
* <span data-ttu-id="3be31-1490">Hello вся система работает в одной виртуальной сети Azure (обязательно).</span><span class="sxs-lookup"><span data-stu-id="3be31-1490">hello complete system runs within one Azure Virtual Network (required).</span></span>
* <span data-ttu-id="3be31-1491">разделить Hello hello виртуальные машины из одной системы SAP на три группы доступности возможно даже со всех виртуальных машин hello, принадлежащий toohello одной виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="3be31-1491">hello separation of hello VMs of one SAP system into three Availability Sets is possible even with all hello VMs belonging toohello same Virtual Network.</span></span>
* <span data-ttu-id="3be31-1492">Все виртуальные машины с экземплярами СУБД из одной системы SAP находятся в одной группе доступности.</span><span class="sxs-lookup"><span data-stu-id="3be31-1492">All VMs running DBMS instances of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="3be31-1493">Мы предполагаем, что используется несколько ВМ с экземплярами СУБД на систему, так как используются встроенные функции высокой доступности СУБД (например, SQL Server AlwaysOn или Oracle Data Guard).</span><span class="sxs-lookup"><span data-stu-id="3be31-1493">We assume that there is more than one VM running DBMS instances per system since native DBMS high availability features are used, like SQL Server AlwaysOn or Oracle Data Guard.</span></span>
* <span data-ttu-id="3be31-1494">Все виртуальные машины с экземплярами СУБД используют собственную учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1494">All VMs running DBMS instances use their own storage account.</span></span> <span data-ttu-id="3be31-1495">Файлы данных и журналов СУБД реплицируются из одной учетной записи tooanother хранилища учетной записи хранилища с помощью функций высокого уровня доступности СУБД, которые синхронизируют данные hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1495">DBMS data and log files are replicated from one storage account tooanother storage account using DBMS high availability functions that synchronize hello data.</span></span> <span data-ttu-id="3be31-1496">Недоступность одну учетную запись хранилища приведет к недоступности одного узла кластера SQL Server в Windows, но не hello всей службы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="3be31-1496">Unavailability of one storage account will cause unavailability of one SQL Windows cluster node, but not hello whole SQL Server service.</span></span>
* <span data-ttu-id="3be31-1497">Все виртуальные машины с экземпляром (A)SCS из одной системы SAP находятся в одной группе доступности.</span><span class="sxs-lookup"><span data-stu-id="3be31-1497">All VMs running (A)SCS instance of one SAP system are in one Availability Set.</span></span> <span data-ttu-id="3be31-1498">Внутри этих виртуальных машин tooprotect hello (A) SCS экземпляр настраивается отказоустойчивого кластера Windows Server (WSFC).</span><span class="sxs-lookup"><span data-stu-id="3be31-1498">A Windows Server Failover Cluster (WSFC) is configured inside of those VMs tooprotect hello (A)SCS instance.</span></span>
* <span data-ttu-id="3be31-1499">Все виртуальные машины с экземплярами (A)SCS используют собственную учетную запись хранения.</span><span class="sxs-lookup"><span data-stu-id="3be31-1499">All VMs running (A)SCS instances use their own storage account.</span></span> <span data-ttu-id="3be31-1500">(A) SCS экземпляр файлы и папки глобальных SAP, реплицируются из одной учетной записи tooanother хранилища учетной записи хранилища с помощью SIOS DataKeeper репликации.</span><span class="sxs-lookup"><span data-stu-id="3be31-1500">(A)SCS instance files and SAP global folder are replicated from one storage account tooanother storage account using SIOS DataKeeper replication.</span></span> <span data-ttu-id="3be31-1501">Недоступность одну учетную запись хранилища приведет к недоступности одной (A) SCS Windows узле кластера, но не весь hello (A) SCS службы.</span><span class="sxs-lookup"><span data-stu-id="3be31-1501">Unavailability of one storage account will cause unavailability of one (A)SCS Windows cluster node, but not hello whole (A)SCS service.</span></span>
* <span data-ttu-id="3be31-1502">ВСЕ виртуальные машины hello, представляющий уровень сервера приложений SAP hello, третья группа доступности.</span><span class="sxs-lookup"><span data-stu-id="3be31-1502">ALL hello VMs representing hello SAP application server layer are in a third Availability Set.</span></span>
* <span data-ttu-id="3be31-1503">ВСЕ виртуальные машины hello, использующие серверы приложений SAP использовать свои собственные учетную запись.</span><span class="sxs-lookup"><span data-stu-id="3be31-1503">ALL hello VMs running SAP application servers use their own storage account.</span></span> <span data-ttu-id="3be31-1504">Недоступность одну учетную запись хранилища приведет к недоступности одного сервера приложений SAP, где другие AS SAP продолжить toorun.</span><span class="sxs-lookup"><span data-stu-id="3be31-1504">Unavailability of one storage account will cause unavailability of one SAP application server, where other SAP AS continue toorun.</span></span>

<span data-ttu-id="3be31-1505">Hello следующем рисунке показано приветствия же альбомную с помощью управляемых дисков.</span><span class="sxs-lookup"><span data-stu-id="3be31-1505">hello following figure illustrated hello same landscape using Managed Disks.</span></span>

![Высокодоступная архитектура приложений SAP NetWeaver с сервером SQL Server в Azure IaaS][planning-guide-figure-3201]

##### <a name="linuxlogolinux-ha-on-linux"></a>![Linux][Logo_Linux] <span data-ttu-id="3be31-1508">Высокая доступность в Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1508">HA on Linux</span></span>
<span data-ttu-id="3be31-1509">Архитектура Hello для HA SAP в Linux в Azure, по сути, представляет hello так же, как Windows, как описано выше.</span><span class="sxs-lookup"><span data-stu-id="3be31-1509">hello architecture for SAP HA on Linux on Azure is basically hello same as for Windows as described above.</span></span> <span data-ttu-id="3be31-1510">Начиная с января 2016 года для Linux в Azure сейчас нет доступных решений для обеспечения высокой доступности SAP (A)SCS.</span><span class="sxs-lookup"><span data-stu-id="3be31-1510">As of Jan 2016 there is no SAP (A)SCS HA solution supported yet on Linux on Azure</span></span>

<span data-ttu-id="3be31-1511">Как следствие как января 2016 систему SAP Linux Azure не могут быть достигнуты hello же доступности в качестве системы SAP Windows Azure из-за отсутствия высокого уровня ДОСТУПНОСТИ для экземпляра hello (A) SCS и hello базы данных SAP ASE одного экземпляра.</span><span class="sxs-lookup"><span data-stu-id="3be31-1511">As a consequence as of January 2016 an SAP-Linux-Azure system cannot achieve hello same availability as an SAP-Windows-Azure system because of missing HA for hello (A)SCS instance and hello single-instance SAP ASE database.</span></span>

### <span data-ttu-id="3be31-1512"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Использование автозапуска для экземпляров SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1512"><a name="4e165b58-74ca-474f-a7f4-5e695a93204f"></a>Using Autostart for SAP instances</span></span>
<span data-ttu-id="3be31-1513">SAP предлагаемых функции hello экземпляров SAP toostart сразу же после начала hello hello ОС в ВМ hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1513">SAP offered hello functionality toostart SAP instances immediately after hello start of hello OS within hello VM.</span></span> <span data-ttu-id="3be31-1514">конкретные шаги Hello задокументированные в статье базы знаний SAP [1909114].</span><span class="sxs-lookup"><span data-stu-id="3be31-1514">hello exact steps were documented in SAP Knowledge Base Article [1909114].</span></span> <span data-ttu-id="3be31-1515">Однако SAP не рекомендует toouse hello параметру больше так как отсутствует контроль в порядке hello перезапуска экземпляра, при условии, что есть влияют несколько виртуальных Машин или запуска нескольких экземпляров каждой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1515">However, SAP is not recommending toouse hello setting anymore because there is no control in hello order of instance restarts, assuming more than one VM got affected or multiple instances ran per VM.</span></span> <span data-ttu-id="3be31-1516">При условии, что типичный сценарий Azure из одного экземпляра сервера приложений SAP в случае одной виртуальной Машины со временем получения перезапуска виртуальной Машины и hello, hello автозапуска является не очень важным, их можно включить путем добавления этого параметра:</span><span class="sxs-lookup"><span data-stu-id="3be31-1516">Assuming a typical Azure scenario of one SAP application server instance in a VM and hello case of a single VM eventually getting restarted, hello Autostart is not really critical and can be enabled by adding this parameter:</span></span>

    Autostart = 1

<span data-ttu-id="3be31-1517">В hello запуск профиля hello экземпляра SAP ABAP или Java.</span><span class="sxs-lookup"><span data-stu-id="3be31-1517">Into hello start profile of hello SAP ABAP and/or Java instance.</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-1518">Hello Autostart, параметр может иметь некоторые также недостатков.</span><span class="sxs-lookup"><span data-stu-id="3be31-1518">hello Autostart parameter can have some downfalls as well.</span></span> <span data-ttu-id="3be31-1519">Более подробно триггеры параметр hello hello запуска экземпляра SAP ABAP или Java hello связаны, что запущена служба Windows, Linux hello экземпляра.</span><span class="sxs-lookup"><span data-stu-id="3be31-1519">In more detail, hello parameter triggers hello start of an SAP ABAP or Java instance when hello related Windows/Linux service of hello instance is started.</span></span> <span data-ttu-id="3be31-1520">Конечно это hello так при загрузке hello операционной системы.</span><span class="sxs-lookup"><span data-stu-id="3be31-1520">That certainly is hello case when hello operating system boots up.</span></span> <span data-ttu-id="3be31-1521">Кроме того, перезапуск служб SAP также обычно происходит при управлении жизненным циклом программного обеспечения SAP (например, SUM или другие обновления).</span><span class="sxs-lookup"><span data-stu-id="3be31-1521">However, restarts of SAP services are also a common thing for SAP Software Lifecycle Management functionality like SUM or other updates or upgrades.</span></span> <span data-ttu-id="3be31-1522">Эти функциональные возможности больше не ожидаются toobe экземпляр автоматически перезагружается вообще.</span><span class="sxs-lookup"><span data-stu-id="3be31-1522">These functionalities are not expecting an instance toobe restarted automatically at all.</span></span> <span data-ttu-id="3be31-1523">Таким образом hello Autostart, параметр должен быть отключен перед запуском таких задач.</span><span class="sxs-lookup"><span data-stu-id="3be31-1523">Therefore, hello Autostart parameter should be disabled before running such tasks.</span></span> <span data-ttu-id="3be31-1524">Autostart, параметр Hello также следует не использоваться для экземпляров SAP, в кластер, подобно ASCS/SCS/CI.</span><span class="sxs-lookup"><span data-stu-id="3be31-1524">hello Autostart parameter also should not be used for SAP instances that are clustered, like ASCS/SCS/CI.</span></span>
>
>

<span data-ttu-id="3be31-1525">Дополнительные сведения об автозапуске экземпляров SAP см. здесь:</span><span class="sxs-lookup"><span data-stu-id="3be31-1525">See additional information regarding autostart for SAP instances here:</span></span>

* [<span data-ttu-id="3be31-1526">Start/Stop SAP along with your Unix Server Start/Stop (Запуск и остановка SAP одновременно с запуском и остановкой Unix-сервера).</span><span class="sxs-lookup"><span data-stu-id="3be31-1526">Start/Stop SAP along with your Unix Server Start/Stop</span></span>](http://scn.sap.com/community/unix/blog/2012/08/07/startstop-sap-along-with-your-unix-server-startstop)
* [<span data-ttu-id="3be31-1527">Starting and Stopping SAP NetWeaver Management Agents (Запуск и остановка агентов управления SAP NetWeaver).</span><span class="sxs-lookup"><span data-stu-id="3be31-1527">Starting and Stopping SAP NetWeaver Management Agents</span></span>](https://help.sap.com/saphelp_nwpi711/helpdata/en/49/9a15525b20423ee10000000a421938/content.htm)
* [<span data-ttu-id="3be31-1528">Как tooenable автоматического запуска из базы данных HANA</span><span class="sxs-lookup"><span data-stu-id="3be31-1528">How tooenable auto Start of HANA Database</span></span>](http://www.freehanatutorials.com/2012/10/how-to-enable-auto-start-of-hana.html)

### <a name="larger-3-tier-sap-systems"></a><span data-ttu-id="3be31-1529">Более крупные трехуровневые системы SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1529">Larger 3-Tier SAP systems</span></span>
<span data-ttu-id="3be31-1530">Аспекты высокой доступности трехуровневых конфигураций SAP рассмотрены в предыдущих разделах.</span><span class="sxs-lookup"><span data-stu-id="3be31-1530">High-Availability aspects of 3-Tier SAP configurations got discussed in earlier sections already.</span></span> <span data-ttu-id="3be31-1531">Что касается системах, где требования к серверу hello СУБД слишком велики toohave, расположенные в Azure, но может развернуть hello уровня приложения SAP в Azure?</span><span class="sxs-lookup"><span data-stu-id="3be31-1531">But what about systems where hello DBMS server requirements are too large toohave it located in Azure, but hello SAP application layer could be deployed into Azure?</span></span>

#### <a name="location-of-3-tier-sap-configurations"></a><span data-ttu-id="3be31-1532">Расположение трехуровневых конфигураций SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1532">Location of 3-Tier SAP configurations</span></span>
<span data-ttu-id="3be31-1533">Это не уровней приложения hello поддерживаемых toosplit сам или приложения hello и СУБД между локальной средой и Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1533">It is not supported toosplit hello application tier itself or hello application and DBMS tier between on-premises and Azure.</span></span> <span data-ttu-id="3be31-1534">Система SAP полностью развертывается либо локально, либо в среде Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1534">An SAP system is either completely deployed on-premises OR in Azure.</span></span> <span data-ttu-id="3be31-1535">Это также не поддерживается toohave некоторые из серверов приложений hello запуска в Azure в локальной среде и некоторые другие.</span><span class="sxs-lookup"><span data-stu-id="3be31-1535">It is also not supported toohave some of hello application servers run on-premises and some others in Azure.</span></span> <span data-ttu-id="3be31-1536">Это hello, начальная точка hello-обсуждений.</span><span class="sxs-lookup"><span data-stu-id="3be31-1536">That is hello starting point of hello discussion.</span></span> <span data-ttu-id="3be31-1537">Также не поддерживают toohave hello СУБД компоненты системы SAP и hello уровень сервера приложений SAP, развернутых в двух разных регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1537">We also are not supporting toohave hello DBMS components of an SAP system and hello SAP application server layer deployed in two different Azure Regions.</span></span> <span data-ttu-id="3be31-1538">Например, СУБД в западной части США, а уровень приложений SAP в центральной части США.</span><span class="sxs-lookup"><span data-stu-id="3be31-1538">For example DBMS in West US and SAP application layer in Central US.</span></span> <span data-ttu-id="3be31-1539">Не поддерживает такие конфигурации обусловлено чувствительность задержки hello hello архитектура SAP NetWeaver.</span><span class="sxs-lookup"><span data-stu-id="3be31-1539">Reason for not supporting such configurations is hello latency sensitivity of hello SAP NetWeaver architecture.</span></span>

<span data-ttu-id="3be31-1540">Тем не менее продолжался hello данные за прошлый год партнерами разработала совместного расположения tooAzure областей.</span><span class="sxs-lookup"><span data-stu-id="3be31-1540">However, over hello course of last year data center partners developed co-locations tooAzure Regions.</span></span> <span data-ttu-id="3be31-1541">Эти расположения сопутствующего часто находятся в данных физического Azure toohello очень близости центрах обработки внутри области Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1541">These co-locations often are in very close proximity toohello physical Azure data centers within an Azure Region.</span></span> <span data-ttu-id="3be31-1542">короткое расстояние Hello и подключение средств в совместное размещение hello через ExpressRoute в Azure может привести к задержкой, меньше 2 мс.</span><span class="sxs-lookup"><span data-stu-id="3be31-1542">hello short distance and connection of assets in hello co-location through ExpressRoute into Azure can result in a latency that is less than 2ms.</span></span> <span data-ttu-id="3be31-1543">В таких случаях возможна toolocate hello уровня СУБД (включая хранилище SAN и NAS) в выравнивании и hello уровня приложения SAP в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1543">In such cases, toolocate hello DBMS layer (including storage SAN/NAS) in such a co-location and hello SAP application layer in Azure is possible.</span></span> <span data-ttu-id="3be31-1544">По состоянию на декабрь 2015 г.</span><span class="sxs-lookup"><span data-stu-id="3be31-1544">As of Dec 2015, we don’t have any deployments like that.</span></span> <span data-ttu-id="3be31-1545">таких развертываний не было, но многие клиенты, использующие развертывания приложений, отличных от SAP, уже используются такой подход.</span><span class="sxs-lookup"><span data-stu-id="3be31-1545">But different customers with non-SAP application deployments are using such approaches already.</span></span>

### <a name="offline-backup-of-sap-systems"></a><span data-ttu-id="3be31-1546">Автономное резервное копирование систем SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1546">Offline Backup of SAP systems</span></span>
<span data-ttu-id="3be31-1547">Зависимость от hello выбранной (2-уровневой или 3-уровневой) существует конфигурации SAP может быть tooback необходимость копирования.</span><span class="sxs-lookup"><span data-stu-id="3be31-1547">Dependent on hello SAP configuration chosen (2-Tier or 3-Tier) there could be a need tooback up.</span></span> <span data-ttu-id="3be31-1548">содержимое Hello hello самой ВМ, а также toohave резервная копия базы данных hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1548">hello content of hello VM itself plus toohave a backup of hello database.</span></span> <span data-ttu-id="3be31-1549">резервные копии, связанные с СУБД Hello, ожидаемый toobe выполняться средствами базы данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-1549">hello DBMS-related backups are expected toobe done with database methods.</span></span> <span data-ttu-id="3be31-1550">Подробное описание hello различных баз данных, можно найти в [руководство по СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1550">A detailed description for hello different databases, can be found in [DBMS Guide][dbms-guide].</span></span> <span data-ttu-id="3be31-1551">На Здравствуйте другой стороны, hello данных SAP можно архивировать автономно (включая также содержимое базы данных hello) как описано в этом разделе или оперативно, как описано в следующем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1551">On hello other hand, hello SAP data can be backed up in an offline manner (including hello database content as well) as described in this section or online as described in hello next section.</span></span>

<span data-ttu-id="3be31-1552">автономное резервное копирование Hello потребуется по сути выключение виртуальной Машины через портал Azure hello hello и копия базового диска ВМ hello, а также все присоединенные диски toohello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3be31-1552">hello offline backup would basically require a shutdown of hello VM through hello Azure portal and a copy of hello base VM disk plus all attached disks toohello VM.</span></span> <span data-ttu-id="3be31-1553">Это сохранит точка изображения времени hello ВМ и соответствующий диск.</span><span class="sxs-lookup"><span data-stu-id="3be31-1553">This would preserve a point in time image of hello VM and its associated disk.</span></span> <span data-ttu-id="3be31-1554">Рекомендуется toocopy hello «резервное копирование», в другую учетную запись хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1554">It is recommended toocopy hello ‘backups’ into a different Azure Storage Account.</span></span> <span data-ttu-id="3be31-1555">Поэтому hello процедуры, описанные в главах [копирование дисков между учетными записями хранения Azure] [ planning-guide-5.4.2] применит этого документа.</span><span class="sxs-lookup"><span data-stu-id="3be31-1555">Hence hello procedure described in chapter [Copying disks between Azure Storage Accounts][planning-guide-5.4.2] of this document would apply.</span></span>
<span data-ttu-id="3be31-1556">Помимо отключение hello, с помощью hello Azure один портал можно также сделать через Powershell или интерфейс командной строки как описанные здесь: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span><span class="sxs-lookup"><span data-stu-id="3be31-1556">Besides hello shutdown using hello Azure portal one can also do it via Powershell or CLI as described here: <https://azure.microsoft.com/documentation/articles/virtual-machines-deploy-rmtemplates-powershell/></span></span>

<span data-ttu-id="3be31-1557">Включает восстановление этого состояния удаления hello базовой ВМ также как hello исходных дисков hello базовый виртуальной Машины и подключенные диски, резервное копирование hello сохраненного дисков toohello исходной учетной записи хранилища или группа ресурсов для управляемого дисков и затем повторное развертывание системы hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1557">A restore of that state would consist of deleting hello base VM as well as hello original disks of hello base VM and mounted disks, copying back hello saved disks toohello original Storage Account or resource group for managed disks and then redeploying hello system.</span></span>
<span data-ttu-id="3be31-1558">В этой статье приведен пример, в том, как tooscript этот процесс в Powershell: <http://www.westerndevs.com/azure-snapshots/></span><span class="sxs-lookup"><span data-stu-id="3be31-1558">This article shows an example how tooscript this process in Powershell: <http://www.westerndevs.com/azure-snapshots/></span></span>

<span data-ttu-id="3be31-1559">Убедитесь, что tooinstall новая лицензия SAP с момента восстановления резервной копии виртуальной Машины, как описано выше создает новый ключ оборудования.</span><span class="sxs-lookup"><span data-stu-id="3be31-1559">Please make sure tooinstall a new SAP license since restoring a VM backup as described above creates a new hardware key.</span></span>

### <a name="online-backup-of-an-sap-system"></a><span data-ttu-id="3be31-1560">Оперативное резервное копирование системы SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1560">Online backup of an SAP system</span></span>
<span data-ttu-id="3be31-1561">Резервное копирование СУБД выполняется с СУБД специальные методы, как описано в hello hello [руководство по СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1561">Backup of hello DBMS is performed with DBMS-specific methods as described in hello [DBMS Guide][dbms-guide].</span></span>

<span data-ttu-id="3be31-1562">Другие виртуальные машины в системе SAP hello резервное копирование с помощью функции резервного копирования виртуальной машины Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1562">Other VMs within hello SAP system can be backed up using Azure Virtual Machine Backup functionality.</span></span> <span data-ttu-id="3be31-1563">Резервное копирование виртуальной машины в Azure появилась в начале 2015 г. и в то же время является стандартным tooback завершения ВМ в Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1563">Azure Virtual Machine Backup got introduced early in 2015 and meanwhile is a standard method tooback up a complete VM in Azure.</span></span> <span data-ttu-id="3be31-1564">Служба архивации Azure хранятся резервные копии hello в Azure и позволяет восстановление виртуальной Машины, еще раз.</span><span class="sxs-lookup"><span data-stu-id="3be31-1564">Azure Backup stores hello backups in Azure and allows a restore of a VM again.</span></span>

> [!NOTE]
> <span data-ttu-id="3be31-1565">Начиная с декабря 2015 г. с помощью резервной копии виртуальной Машины не сохранять ИД виртуальной Машины уникальный hello, который используется для SAP лицензирования.</span><span class="sxs-lookup"><span data-stu-id="3be31-1565">As of Dec 2015 using VM Backup does NOT keep hello unique VM ID which is used for SAP licensing.</span></span> <span data-ttu-id="3be31-1566">Это означает, что восстановление из резервной копии виртуальной Машины установки SAP лицензионный ключ как hello восстановленная виртуальная машина считается toobe новой виртуальной Машины и не является заменой бывшая один, который был сохранен.</span><span class="sxs-lookup"><span data-stu-id="3be31-1566">This means that a restore from a VM backup requires installation of a new SAP license key as hello restored VM is considered toobe a new VM and not a replacement of the former one which was saved.</span></span>
>
> ![Windows][Logo_Windows] <span data-ttu-id="3be31-1568">Windows</span><span class="sxs-lookup"><span data-stu-id="3be31-1568">Windows</span></span>
>
> <span data-ttu-id="3be31-1569">Теоретически, виртуальные машины, которые выполнения может быть резервное копирование баз данных также согласованного Если hello СУБД поддерживает hello Windows VSS (служба теневого копирования томов <https://msdn.microsoft.com/library/windows/desktop/bb968832 (v=vs.85).aspx >) как, например, SQL Server выполняет.</span><span class="sxs-lookup"><span data-stu-id="3be31-1569">Theoretically, VMs that run databases can be backed up in a consistent manner as well if hello DBMS system supports hello Windows VSS (Volume Shadow Copy Service <https://msdn.microsoft.com/library/windows/desktop/bb968832(v=vs.85).aspx>) as, for example, SQL Server does.</span></span>
> <span data-ttu-id="3be31-1570">Но следует помнить, что восстановление состояния базы данных на определенный момент времени невозможно, если резервная копия была создана с помощью функции резервного копирования ВМ Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1570">However, be aware that based on Azure VM backups point-in-time restores of databases are not possible.</span></span> <span data-ttu-id="3be31-1571">Таким образом рекомендуется tooperform резервные копии баз данных с функциональность СУБД, не полагаясь на резервное копирование виртуальной Машины Azure.</span><span class="sxs-lookup"><span data-stu-id="3be31-1571">Therefore, the recommendation is tooperform backups of databases with DBMS functionality instead of relying on Azure VM Backup.</span></span>
>
> <span data-ttu-id="3be31-1572">tooget знакомы с резервное копирование виртуальных машин Azure, начните здесь: <https://docs.microsoft.com/azure/backup/backup-azure-vms>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1572">tooget familiar with Azure Virtual Machine Backup please start here: <https://docs.microsoft.com/azure/backup/backup-azure-vms>.</span></span>
>
> <span data-ttu-id="3be31-1573">Другие возможные значения — toouse сочетания Microsoft Data Protection Manager, установленные в виртуальной Машине Azure и Azure Backup для резервного копирования и восстановления баз данных.</span><span class="sxs-lookup"><span data-stu-id="3be31-1573">Other possibilities are toouse a combination of Microsoft Data Protection Manager installed in an Azure VM and Azure Backup to backup/restore databases.</span></span> <span data-ttu-id="3be31-1574">Дополнительные сведения см. здесь: <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1574">More information can be found here: <https://docs.microsoft.com/azure/backup/backup-azure-dpm-introduction>.</span></span>  
>
> ![Linux][Logo_Linux] <span data-ttu-id="3be31-1576">Linux</span><span class="sxs-lookup"><span data-stu-id="3be31-1576">Linux</span></span>
>
> <span data-ttu-id="3be31-1577">Нет эквивалент tooWindows VSS в Linux, не существует.</span><span class="sxs-lookup"><span data-stu-id="3be31-1577">There is no equivalent tooWindows VSS in Linux.</span></span> <span data-ttu-id="3be31-1578">Резервное копирование СУБД SAP должно выполняться средствами СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-1578">Therefore only file-consistent backups are possible but not application-consistent backups.</span></span> <span data-ttu-id="3be31-1579">Hello СУБД SAP резервное копирование должно выполняться с помощью функциональность СУБД.</span><span class="sxs-lookup"><span data-stu-id="3be31-1579">hello SAP DBMS backup should be done using DBMS functionality.</span></span> <span data-ttu-id="3be31-1580">Hello файловой системы, которая включает данные, связанные с SAP hello могут сохраняться, например, используя tar, как описано здесь: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span><span class="sxs-lookup"><span data-stu-id="3be31-1580">hello file system which includes hello SAP-related data can be saved, for example, using tar as described here: <http://help.sap.com/saphelp_nw70ehp2/helpdata/en/d3/c0da3ccbb04d35b186041ba6ac301f/content.htm></span></span>
>
>

### <a name="azure-as-dr-site-for-production-sap-landscapes"></a><span data-ttu-id="3be31-1581">Azure как сайт аварийного восстановления для производственных ландшафтов SAP</span><span class="sxs-lookup"><span data-stu-id="3be31-1581">Azure as DR site for production SAP landscapes</span></span>
<span data-ttu-id="3be31-1582">С момента Mid 2014 расширений компонентов toovarious вокруг Hyper-V, System Center и Azure включите hello использование Azure в качестве сайта аварийного восстановления для виртуальных машин, работающих в локальной среде на базе Hyper-v.</span><span class="sxs-lookup"><span data-stu-id="3be31-1582">Since Mid 2014, extensions toovarious components around Hyper-V, System Center and Azure enable hello usage of Azure as DR site for VMs running on-premises based on Hyper-V.</span></span>

<span data-ttu-id="3be31-1583">Блог, с подробными сведениями о том, как toodeploy это решение работает описанным здесь: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>.</span><span class="sxs-lookup"><span data-stu-id="3be31-1583">A blog detailing how toodeploy this solution is documented here: <http://blogs.msdn.com/b/saponsqlserver/archive/2014/11/19/protecting-sap-solutions-with-azure-site-recovery.aspx>.</span></span>

## <a name="summary"></a><span data-ttu-id="3be31-1584">Сводка</span><span class="sxs-lookup"><span data-stu-id="3be31-1584">Summary</span></span>
<span data-ttu-id="3be31-1585">перечисляются ключевые моменты Hello высокого уровня доступности систем SAP в Azure:</span><span class="sxs-lookup"><span data-stu-id="3be31-1585">hello key points of High Availability for SAP systems in Azure are:</span></span>

* <span data-ttu-id="3be31-1586">На данный момент времени, hello единая точка отказа SAP не может быть защищена точно hello таким же, как это можно сделать в случае локального развертывания.</span><span class="sxs-lookup"><span data-stu-id="3be31-1586">At this point in time, hello SAP single point of failure cannot be secured exactly hello same way as it can be done in on-premises deployments.</span></span> <span data-ttu-id="3be31-1587">Hello объясняется, что кластеры общих дисков не еще построить в Azure без использования hello программном обеспечении сторонних производителей.</span><span class="sxs-lookup"><span data-stu-id="3be31-1587">hello reason is that Shared Disk clusters can’t yet be built in Azure without hello use of 3rd party software.</span></span>
* <span data-ttu-id="3be31-1588">Для уровня СУБД hello необходимо toouse функциональность СУБД, которая не зависит от технологии кластера общего диска.</span><span class="sxs-lookup"><span data-stu-id="3be31-1588">For hello DBMS layer you need toouse DBMS functionality that does not rely on shared disk cluster technology.</span></span> <span data-ttu-id="3be31-1589">Подробные сведения описаны в hello [руководство по СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1589">Details are documented in hello [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="3be31-1590">влияние hello toominimize проблемы в доменах сбоя в hello Azure инфраструктуры или обслуживание узлов, следует использовать группы доступности Azure:</span><span class="sxs-lookup"><span data-stu-id="3be31-1590">toominimize hello impact of problems within Fault Domains in hello Azure infrastructure or host maintenance, you should use Azure Availability Sets:</span></span>
  * <span data-ttu-id="3be31-1591">Рекомендуется toohave один набор доступности для уровня приложения SAP hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1591">It is recommended toohave one Availability Set for hello SAP application layer.</span></span>
  * <span data-ttu-id="3be31-1592">Рекомендуется toohave набор отдельных доступности для уровня СУБД SAP hello.</span><span class="sxs-lookup"><span data-stu-id="3be31-1592">It is recommended toohave a separate Availability Set for hello SAP DBMS layer.</span></span>
  * <span data-ttu-id="3be31-1593">НЕ рекомендуется приветствия tooapply набор же доступности для ВМ разных систем SAP.</span><span class="sxs-lookup"><span data-stu-id="3be31-1593">It is NOT recommended tooapply hello same Availability set for VMs of different SAP systems.</span></span>
  * <span data-ttu-id="3be31-1594">Рекомендуется toouse Premium управляемых дисков.</span><span class="sxs-lookup"><span data-stu-id="3be31-1594">It is recommended toouse Premium Managed Disks.</span></span>
* <span data-ttu-id="3be31-1595">В целях резервного копирования для уровня СУБД SAP hello проверьте hello [руководство по СУБД][dbms-guide].</span><span class="sxs-lookup"><span data-stu-id="3be31-1595">For Backup purposes of hello SAP DBMS layer, please check hello [DBMS Guide][dbms-guide].</span></span>
* <span data-ttu-id="3be31-1596">Резервное копирование экземпляров диалога SAP делает не имеет особого значения, так как это обычно происходит быстрее, экземпляры tooredeploy простого диалогового окна.</span><span class="sxs-lookup"><span data-stu-id="3be31-1596">Backing up SAP Dialog instances makes little sense since it is usually faster tooredeploy simple dialog instances.</span></span>
* <span data-ttu-id="3be31-1597">Резервное копирование hello ВМ, содержащей глобальный каталог hello hello системы SAP, используя его все профили hello различных экземпляров hello, смысла и должно выполняться с помощью системы архивации данных Windows и, например tar в Linux.</span><span class="sxs-lookup"><span data-stu-id="3be31-1597">Backing up hello VM which contains hello global directory of hello SAP system and with it all hello profiles of hello different instances, does make sense and should be performed with Windows Backup or, for example, tar on Linux.</span></span> <span data-ttu-id="3be31-1598">Так как существуют различия между Windows Server 2008 (R2) и Windows Server 2012 (R2), что позволяет проще tooback с помощью hello Недавние Windows Server, рекомендуется toorun Windows Server 2012 (R2) операционной системой Windows виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="3be31-1598">Since there are differences between Windows Server 2008 (R2) and Windows Server 2012 (R2), which make it easier tooback up using hello more recent Windows Server releases, we recommend toorun Windows Server 2012 (R2) as Windows guest operating system.</span></span>
