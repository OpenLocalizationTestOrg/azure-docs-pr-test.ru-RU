---
title: "aaaAzure сетевые инфраструктуры рекомендации - Windows | Документы Microsoft"
description: "Дополнительные сведения о hello ключа проектирования и реализации руководства по развертыванию виртуальных сетей в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: e2d45973-5eba-4904-8ba0-1821f64feed7
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 64c288957e7c7b89578d871a74ff45ce470ed922
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-networking-infrastructure-guidelines-for-windows-vms"></a>Рекомендации по сетевой инфраструктуре Azure для виртуальных машин Windows 

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

Эта статья посвящена hello понимание необходимые шаги для подключения к виртуальной сети в Azure и между локальной среды.

## <a name="implementation-guidelines-for-virtual-networks"></a>Рекомендации по реализации виртуальных сетей
Решения

* Какой тип виртуальной сети требуется toohost рабочей нагрузки ИТ или инфраструктуры (только для облака или между организациями)?
* Для виртуальных сетей между организациями, сколько пространства адресов нужна toohost hello подсети и виртуальные машины теперь и разумного расширения в hello будущих?
* Являются стартовые toocreate централизованное виртуальных сетей, или создать отдельные виртуальные сети для каждой группы ресурсов?

Задачи

* Определите hello адресного пространства для создания toobe виртуальных сетей hello.
* Определите набор hello подсетей и hello адресное пространство для каждого.
* Для виртуальных сетей между организациями определяют набор hello адресных пространств локальной сети для местоположений в локальной среде hello, hello в tooreach необходимость hello виртуальной сети виртуальных машин.
* Работа с локальной сети team tooensure hello подходящей маршрутизации настроена при создании между организациями виртуальных сетей.
* Создайте виртуальную сеть hello, с помощью имен.

## <a name="virtual-networks"></a>виртуальные сети;
Виртуальные сети, необходимые toosupport связь между виртуальными машинами (ВМ). Как и в физических сетях, для них можно определить подсети, пользовательский IP-адрес, параметры DNS, фильтры безопасности и балансировку нагрузки. С помощью [VPN-шлюз](../../vpn-gateway/vpn-gateway-about-vpngateways.md) или [цепь Express Route](../../expressroute/expressroute-introduction.md), можно соединить виртуальные сети Azure tooyour в локальной сети. Вы можете больше узнать о [виртуальных сетях и их компонентах](../../virtual-network/virtual-networks-overview.md).

Используя группы ресурсов, вы получаете возможность гибкой разработки компонентов виртуальной сети. Виртуальные машины можно соединить toovirtual сети за пределами собственные группы ресурсов. Наиболее распространенный подход к конструктора будет toocreate централизованное групп ресурсов, которые содержат ваш основной инфраструктуре сети, могут управляться распространенные команды, а затем виртуальные машины и свои приложения развертывается tooseparate групп ресурсов. Такой подход позволяет владельцам приложений доступ toohello группы ресурсов, содержащей их виртуальные машины, не открывая настройки доступа toohello hello широко виртуальных сетевых ресурсов.

## <a name="site-connectivity"></a>Подключение сайтов
### <a name="cloud-only-virtual-networks"></a>Облачные виртуальные сети
Если локальные пользователи и компьютеры, не требуют tooVMs текущего подключения в виртуальной сети Azure, конфигурации виртуальной сети прост:

![Схема виртуальной сети только для облака](./media/infrastructure-networking-guidelines/vnet01.png)

Как правило, этот подход практикуется в рабочих нагрузках, в которых требуется подключение к Интернету, например при использовании веб-сервера. Вы можете управлять этими виртуальными машинами с помощью подключений по протоколу RDP или подключений VPN типа "точка — сеть".

Так как они не подключаются tooyour локальной сети, только в Azure виртуальные сети можно использовать какой-либо части пространства hello частных IP-адресов, даже если hello же закрытое пространство не используется в локальной.

### <a name="cross-premises-virtual-networks"></a>Распределенные виртуальные сети
Если локальные пользователи и компьютеры требуют tooVMs текущего подключения в виртуальной сети Azure, создайте виртуальную сеть между организациями.  Подключите его tooyour локальной сети с ExpressRoute или VPN-подключения сеть сеть.

![Схема распределенной виртуальной сети](./media/infrastructure-networking-guidelines/vnet02.png)

В этой конфигурации hello виртуальная сеть Azure — по существу, расширение облачных в локальной сети.

Так как они подключаются tooyour локальной сети, распределенную виртуальные сети должны использовать часть hello адресного пространства, используемый в вашей организации, которое является уникальным. В hello таким же способом, разных корпоративных местоположениях назначена определенная подсеть IP, Azure становится другое расположение, как расширить схему локальной сети.

hello набор префиксов адресов соответствующих локальных tooallow tootravel пакеты из локальной сети tooyour виртуальной сети между организациями, необходимо настроить как часть определения hello локальной сети для виртуальной сети hello. В зависимости от адреса hello пространства hello виртуальной сети и hello набора соответствующих локального расположения, в локальной сети hello может быть много префиксов адресов.

Можно преобразовать виртуальной сети между организациями tooa виртуальной сети только для облака, но скорее всего, требует вы toore IP адресное пространство виртуальной сети и ресурсах Azure. Таким образом рекомендуется рассмотрите Если виртуальной сети должен toobe подключенных tooyour локальной сети, при назначении IP-подсеть.

## <a name="subnets"></a>Подсети
Подсети позволяют tooorganize ресурсы, которые связаны с другими, либо логически (например, одну подсеть для виртуальных машин, связанные toohello одного приложения), или физически (например, для каждой группы ресурсов в одной подсети). Кроме того, чтобы обеспечить дополнительную безопасность, можно использовать методы изоляции подсетей.

Для виртуальных сетей между организациями, следует разрабатывать подсетей с hello теми же соглашениями, используемых для локальных ресурсов. **Azure всегда использует hello первые три hello адресное пространство для каждой подсети IP-адреса**. Номер hello toodetermine адресов для подсети hello, начните с инвентаризации hello число виртуальных машин, которые теперь необходимо. Оценка роста в будущем, а затем используйте следующие таблицы toodetermine hello размер подсети hello hello.

| Необходимое количество виртуальных машин | Необходимое количество битов узла | Размер подсети hello |
| --- | --- | --- |
| 1–3 |3 |/29 |
| 4–11 |4 |/28 |
| 12–27 |5 |/27 |
| 28–59 |6 |/26 |
| 60–123 |7 |/25 |

> [!NOTE]
> Для обычных в локальной подсети, hello адреса узлов для подсети с битами n узла не более 2<sup> n </sup> — 2. Для подсети Azure hello адреса узлов для подсети с битами n узла не более 2<sup> n </sup> – 5 (2 и 3 для hello адреса, используемые Azure для каждой подсети).
> 
> 

Если выбрать размер подсети, слишком мал, toore IP и повторно развернуть виртуальные машины hello в подсети hello.

## <a name="network-security-groups"></a>группы сетевой безопасности;
Можно применить фильтрации трафика toohello правила, проходящего через виртуальные сети с помощью групп безопасности сети. Можно создавать детализированные фильтрации toosecure правила виртуальной сети среды, управление входящий и исходящий трафик, исходный и конечный диапазоны IP-, допускается порты и т. д. Сетевые группы безопасности может быть применен toosubnets внутри виртуальной сети или напрямую tooa заданному виртуального сетевого интерфейса. Это рекомендуется toohave некоторый уровень сетевой группы безопасности, фильтрации трафика в виртуальных сетях. Вы можете больше узнать о [группы сетевой безопасности;](../../virtual-network/virtual-networks-nsg.md).

## <a name="additional-network-components"></a>Дополнительные сетевые компоненты
Как и сети в локальной физической сетевой инфраструктуре, виртуальные сети Azure могут содержать не только подсети и IP-адреса. При разработке инфраструктуры приложения, вы можете tooincorporate некоторые из этих дополнительных компонентов:

* [VPN-шлюзов](../../vpn-gateway/vpn-gateway-about-vpngateways.md) -подключения tooother виртуальные сети Azure виртуальные сети или подключиться через подключение через виртуальную Частную сеть для tooon локальные сети. Кроме того, они дают возможность реализовывать каналы ExpressRoute для выделенных безопасных подключений и предоставлять пользователям прямой доступ через VPN-подключения типа "точка — сеть".
* [Балансировщик нагрузки](../../load-balancer/load-balancer-overview.md) обеспечивает балансировку нагрузки внешнего и внутреннего трафика, если это требуется.
* [Шлюз приложений](../../application-gateway/application-gateway-introduction.md) — HTTP балансировки нагрузки на уровне приложения hello, предоставляя некоторые дополнительные преимущества для веб-приложений, а не развертывание балансировки нагрузки Azure hello.
* [Диспетчер трафика](../../traffic-manager/traffic-manager-overview.md) — на основе DNS трафик распространения toodirect конечным пользователям toohello ближайшей доступных приложений. конечной точки, позволяя toohost вы приложения за пределы центров обработки данных Azure в разных регионах.

## <a name="next-steps"></a>Дальнейшие действия
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]

