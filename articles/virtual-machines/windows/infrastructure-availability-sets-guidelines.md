---
title: "Задает aaaAvailability для виртуальных машин Windows в Azure | Документы Microsoft"
description: "Дополнительные сведения о hello ключа проектирования и реализации руководства по развертыванию наборов доступности в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: f9449f58-664b-4d5d-82f6-84c5d083047f
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: cc35fd1e913434d9facb94116edb1b1c30447c71
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-availability-sets-guidelines-for-windows-vms"></a><span data-ttu-id="d9c16-103">Рекомендации по группам доступности Azure для виртуальных машин Windows</span><span class="sxs-lookup"><span data-stu-id="d9c16-103">Azure availability sets guidelines for Windows VMs</span></span>

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

<span data-ttu-id="d9c16-104">Эта статья посвящена hello основные сведения о необходимых этапов планирования для группы доступности tooensure приложений будут оставаться доступными во время запланированного или незапланированного события.</span><span class="sxs-lookup"><span data-stu-id="d9c16-104">This article focuses on understanding hello required planning steps for availability sets tooensure your applications remains accessible during planned or unplanned events.</span></span>

## <a name="implementation-guidelines-for-availability-sets"></a><span data-ttu-id="d9c16-105">Рекомендации по реализации групп доступности</span><span class="sxs-lookup"><span data-stu-id="d9c16-105">Implementation guidelines for availability sets</span></span>
<span data-ttu-id="d9c16-106">Решения</span><span class="sxs-lookup"><span data-stu-id="d9c16-106">Decisions:</span></span>

* <span data-ttu-id="d9c16-107">Количество наборов доступности требуются для hello различных ролей и уровни в инфраструктуру приложения?</span><span class="sxs-lookup"><span data-stu-id="d9c16-107">How many availability sets do you need for hello various roles and tiers in your application infrastructure?</span></span>

<span data-ttu-id="d9c16-108">Задачи</span><span class="sxs-lookup"><span data-stu-id="d9c16-108">Tasks:</span></span>

* <span data-ttu-id="d9c16-109">Определите hello число виртуальных машин на каждом уровне приложения, которое требуется.</span><span class="sxs-lookup"><span data-stu-id="d9c16-109">Define hello number of VMs in each application tier you require.</span></span>
* <span data-ttu-id="d9c16-110">Определение необходимости tooadjust hello число сбоя или обновление toobe домены, используемые для вашего приложения.</span><span class="sxs-lookup"><span data-stu-id="d9c16-110">Determine if you need tooadjust hello number of fault or update domains toobe used for your application.</span></span>
* <span data-ttu-id="d9c16-111">Определите необходимые hello группы доступности, используя соглашение об именовании и что виртуальные машины находятся в них.</span><span class="sxs-lookup"><span data-stu-id="d9c16-111">Define hello required availability sets using your naming convention and what VMs reside in them.</span></span> <span data-ttu-id="d9c16-112">Виртуальная машина может находиться только в одной группе доступности.</span><span class="sxs-lookup"><span data-stu-id="d9c16-112">A VM can only reside in one availability set.</span></span>

## <a name="availability-sets"></a><span data-ttu-id="d9c16-113">Группы доступности</span><span class="sxs-lookup"><span data-stu-id="d9c16-113">Availability sets</span></span>
<span data-ttu-id="d9c16-114">В Azure виртуальных машин (ВМ) может быть помещен в tooa логическое группирование, называемую группой доступности.</span><span class="sxs-lookup"><span data-stu-id="d9c16-114">In Azure, virtual machines (VMs) can be placed in tooa logical grouping called an availability set.</span></span> <span data-ttu-id="d9c16-115">При создании виртуальных машин в группе доступности hello платформы Azure распределяет hello базовой инфраструктуры hello размещение этих виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="d9c16-115">When you create VMs within an availability set, hello Azure platform distributes hello placement of those VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="d9c16-116">Должно быть toohello событий планового обслуживания платформы Azure или аппаратным обеспечением и ошибки инфраструктуры, используйте hello наборов доступности гарантирует, что по крайней мере одна виртуальная машина продолжает работать.</span><span class="sxs-lookup"><span data-stu-id="d9c16-116">Should there be a planned maintenance event toohello Azure platform or an underlying hardware / infrastructure fault, hello use of availability sets ensures that at least one VM remains running.</span></span>

<span data-ttu-id="d9c16-117">Не рекомендуется размещать приложения на одной виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="d9c16-117">As a best practice, applications should not reside on a single VM.</span></span> <span data-ttu-id="d9c16-118">Группа доступности содержит одну виртуальную Машину не получить какой-либо защиты от запланированного или незапланированного события в hello платформы Azure.</span><span class="sxs-lookup"><span data-stu-id="d9c16-118">An availability set that contains a single VM doesn't gain any protection from planned or unplanned events within hello Azure platform.</span></span> <span data-ttu-id="d9c16-119">Hello [соглашения об уровне ОБСЛУЖИВАНИЯ Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines) требует два или более виртуальных машин в пределах доступности набора tooallow hello распределение виртуальных машин между hello базовой инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="d9c16-119">hello [Azure SLA](https://azure.microsoft.com/support/legal/sla/virtual-machines) requires two or more VMs within an availability set tooallow hello distribution of VMs across hello underlying infrastructure.</span></span> <span data-ttu-id="d9c16-120">Если вы используете [хранилища Azure Premium](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello соглашения об уровне ОБСЛУЖИВАНИЯ Azure применяется tooa одной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="d9c16-120">If you are using [Azure Premium Storage](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), hello Azure SLA applies tooa single VM.</span></span>

<span data-ttu-id="d9c16-121">в кластерах оборудования toomultiple состоит из базовой инфраструктурой Hello в Azure.</span><span class="sxs-lookup"><span data-stu-id="d9c16-121">hello underlying infrastructure in Azure is divided in toomultiple hardware clusters.</span></span> <span data-ttu-id="d9c16-122">Каждый аппаратный кластер может поддерживать определенный диапазон размеров виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="d9c16-122">Each hardware cluster can support a range of VM sizes.</span></span> <span data-ttu-id="d9c16-123">В любой момент времени группа доступности может размещаться только в одном аппаратном кластере.</span><span class="sxs-lookup"><span data-stu-id="d9c16-123">An availability set can only be hosted on a single hardware cluster at any point in time.</span></span> <span data-ttu-id="d9c16-124">Таким образом размеры hello диапазон виртуальной Машины, которые могут существовать в одну группу доступности — toohello ограниченный диапазон ВМ размеры, поддерживаемые hello оборудования кластера.</span><span class="sxs-lookup"><span data-stu-id="d9c16-124">Therefore, hello range of VM sizes that can exist in a single availability set is limited toohello range of VM sizes supported by hello hardware cluster.</span></span> <span data-ttu-id="d9c16-125">Hello оборудования кластера для группы доступности hello выбирается при hello первая виртуальная машина в наборе доступности hello развертывания или при запуске hello первая виртуальная машина в наборе доступности, где все виртуальные машины в настоящее время находятся в состоянии остановки освобождения hello.</span><span class="sxs-lookup"><span data-stu-id="d9c16-125">hello hardware cluster for hello availability set is selected when hello first VM in hello availability set is deployed or when starting hello first VM in an availability set where all VMs are currently in hello stopped-deallocated state.</span></span> <span data-ttu-id="d9c16-126">Hello следующую команду PowerShell может быть используется toodetermine hello диапазон из размеров виртуальных Машин для группы доступности: «Get-AzureRmVMSize - ResourceGroupName \<строка\> - AvailabilitySetName \<строка\> "</span><span class="sxs-lookup"><span data-stu-id="d9c16-126">hello following PowerShell command can be used toodetermine hello range of VM sizes available for an availability set: "Get-AzureRmVMSize -ResourceGroupName \<string\> -AvailabilitySetName \<string\>"</span></span>

<span data-ttu-id="d9c16-127">Каждый кластер оборудования делится на toomultiple домены обновления и домены отказоустойчивости.</span><span class="sxs-lookup"><span data-stu-id="d9c16-127">Each hardware cluster is divided in toomultiple update domains and fault domains.</span></span> <span data-ttu-id="d9c16-128">Эти домены определяются узлами с общим циклом обновления или с общей физической инфраструктурой, например источником питания и сетью.</span><span class="sxs-lookup"><span data-stu-id="d9c16-128">These domains are defined by what hosts share a common update cycle, or share similar physical infrastructure such as power and networking.</span></span> <span data-ttu-id="d9c16-129">Azure автоматически распределяет виртуальные машины в группу доступности между доменами toomaintain доступности и отказоустойчивости.</span><span class="sxs-lookup"><span data-stu-id="d9c16-129">Azure automatically distributes your VMs within an availability set across domains toomaintain availability and fault tolerance.</span></span> <span data-ttu-id="d9c16-130">В зависимости от размера hello приложения и hello число виртуальных машин в группе доступности, можно настроить число hello доменов требуется toouse.</span><span class="sxs-lookup"><span data-stu-id="d9c16-130">Depending on hello size of your application and hello number of VMs within an availability set, you can adjust hello number of domains you wish toouse.</span></span> <span data-ttu-id="d9c16-131">Вы можете больше узнать об [управлении доступностью и использовании доменов обновления и доменов сбоя](manage-availability.md).</span><span class="sxs-lookup"><span data-stu-id="d9c16-131">You can read more about [managing availability and use of update and fault domains](manage-availability.md).</span></span>

<span data-ttu-id="d9c16-132">При разработке инфраструктуры приложения, планирование уровни приложения hello, которые можно использовать.</span><span class="sxs-lookup"><span data-stu-id="d9c16-132">When designing your application infrastructure, plan hello application tiers that you use.</span></span> <span data-ttu-id="d9c16-133">Группа виртуальных машин, обслуживающих hello же цели в наборах tooavailability, такие как набор доступности для виртуальных машин переднего плана под управлением служб IIS.</span><span class="sxs-lookup"><span data-stu-id="d9c16-133">Group VMs that serve hello same purpose in tooavailability sets, such as an availability set for your front-end VMs running IIS.</span></span> <span data-ttu-id="d9c16-134">Создайте отдельную группу доступности для серверных виртуальных машин, на которых работает решение SQL Server.</span><span class="sxs-lookup"><span data-stu-id="d9c16-134">Create a separate availability set for your back-end VMs running SQL Server.</span></span> <span data-ttu-id="d9c16-135">Задача Hello — tooensure, что группа доступности защищен каждого компонента приложения и по крайней мере один раз экземпляр всегда будет работать.</span><span class="sxs-lookup"><span data-stu-id="d9c16-135">hello goal is tooensure that each component of your application is protected by an availability set and at least once instance always remains running.</span></span>

<span data-ttu-id="d9c16-136">Подсистемы балансировки нагрузки может быть использована перед каждой toowork уровня приложения вместе с группу доступности и убедитесь, что трафик всегда может быть перенаправленное tooa запущен экземпляр.</span><span class="sxs-lookup"><span data-stu-id="d9c16-136">Load balancers can be utilized in front of each application tier toowork alongside an availability set and ensure traffic can always be routed tooa running instance.</span></span> <span data-ttu-id="d9c16-137">Без подсистемы балансировки нагрузки виртуальные машины могут работать под управлением во всей обслуживания запланированных и незапланированных событий, но может оказаться конечные пользователи могли tooresolve их, если hello недоступен основной виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="d9c16-137">Without a load balancer, your VMs may continue running throughout planned and unplanned maintenance events, but your end user may not be able tooresolve them if hello primary VM is unavailable.</span></span>

<span data-ttu-id="d9c16-138">Обеспечение высокого уровня доступности приложения следует проектировать на уровне хранилища.</span><span class="sxs-lookup"><span data-stu-id="d9c16-138">Design your application for high availability at storage layer.</span></span> <span data-ttu-id="d9c16-139">Hello рекомендуется слишком[использовать управляемые диски для виртуальных машин в группе доступности](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="d9c16-139">hello best practice is too[use Managed Disks for VMs in an Availability Set](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set).</span></span> <span data-ttu-id="d9c16-140">При использовании в данный момент диски неуправляемые, рекомендуется слишком[преобразования виртуальных машин в набор доступности дисков управляемых toouse](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span><span class="sxs-lookup"><span data-stu-id="d9c16-140">If you are currently using unmanaged disks, we highly recommend you too[convert VMs in Availability Set toouse Managed Disks](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d9c16-141">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d9c16-141">Next steps</span></span>
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]
