---
title: "Добавление расширительных узлов в кластер пакета HPC | Документация Майкрософт"
description: "Узнайте, как расширить кластер пакета HPC в Azure по запросу, добавляя экземпляры рабочих ролей, выполняемых в облачной службе."
services: virtual-machines-windows
documentationcenter: 
author: dlepow
manager: timlt
editor: 
tags: azure-service-management,hpc-pack
ms.assetid: 24b79a8a-24ad-4002-ae76-75abc9b28c83
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-multiple
ms.workload: big-compute
ms.date: 10/14/2016
ms.author: danlep
ms.openlocfilehash: 9336743b92130e37b1df2992aab806696f8276aa
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="add-on-demand-burst-nodes-to-an-hpc-pack-cluster-in-azure"></a><span data-ttu-id="b7e5a-103">Добавление "расширительных" узлов по запросу в кластер пакета HPC в Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-103">Add on-demand "burst" nodes to an HPC Pack cluster in Azure</span></span>
<span data-ttu-id="b7e5a-104">Если вы настроили кластер [пакета Microsoft HPC](https://technet.microsoft.com/library/cc514029) в Azure, то вам может понадобиться способ быстро масштабировать емкость кластера, не обслуживая набор предварительно настроенных вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-104">If you set up a [Microsoft HPC Pack](https://technet.microsoft.com/library/cc514029) cluster in Azure, you might want a way to quickly scale the cluster capacity up or down, without maintaining a set of preconfigured compute node VMs.</span></span> <span data-ttu-id="b7e5a-105">В этой статье показано, как добавить расширительные узлы по запросу (экземпляры рабочей роли, запущенные в облачной службе) в качестве вычислительных ресурсов на головной узел в Azure.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-105">This article shows you how to add on-demand "burst" nodes (worker role instances running in a cloud service) as compute resources to a head node in Azure.</span></span> 

> [!IMPORTANT] 
> <span data-ttu-id="b7e5a-106">В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель диспетчера ресурсов и классическая модель](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-106">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="b7e5a-107">В этой статье рассматривается использование классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-107">This article covers using the Classic deployment model.</span></span> <span data-ttu-id="b7e5a-108">Для большинства новых развертываний Майкрософт рекомендует использовать модель диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-108">Microsoft recommends that most new deployments use the Resource Manager model.</span></span>

![Расширительные узлы][burst]

<span data-ttu-id="b7e5a-110">Действия, описанные в этой статье, помогут быстро добавить узлы Azure на облачную виртуальную машину головного узла пакета HPC для тестовых и подтверждающих концепцию развертываний.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-110">The steps in this article help you add Azure nodes quickly to a cloud-based HPC Pack head node VM for a test or proof-of-concept deployment.</span></span> <span data-ttu-id="b7e5a-111">Общая процедура аналогична процедуре "ускорения в Azure" и заключается в добавлении вычислительной мощности облака в локальный кластер пакета HPC.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-111">The high-level steps are the same as the steps to “burst to Azure” to add cloud compute capacity to an on-premises HPC Pack cluster.</span></span> <span data-ttu-id="b7e5a-112">Руководство см. в разделе [Установка гибридного вычислительного кластера с помощью пакета Microsoft HPC](../../../cloud-services/cloud-services-setup-hybrid-hpcpack-cluster.md).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-112">For a tutorial, see [Set up a hybrid compute cluster with Microsoft HPC Pack](../../../cloud-services/cloud-services-setup-hybrid-hpcpack-cluster.md).</span></span> <span data-ttu-id="b7e5a-113">Подробные инструкции и рекомендации для рабочих развертываний см. в разделе [Ускорение в Azure с помощью пакета Microsoft HPC](https://technet.microsoft.com/library/gg481749.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-113">For detailed guidance and considerations for production deployments, see [Burst to Azure with Microsoft HPC Pack](https://technet.microsoft.com/library/gg481749.aspx).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="b7e5a-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="b7e5a-114">Prerequisites</span></span>
* <span data-ttu-id="b7e5a-115">**Головной узел пакета HPC развернут на виртуальной машине Azure**. Можно использовать изолированную или входящую в состав большого кластера виртуальную машину головного узла.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-115">**HPC Pack head node deployed in an Azure VM** - You can use a stand-alone head node VM or one that is part of a larger cluster.</span></span> <span data-ttu-id="b7e5a-116">Чтобы создать изолированный головной узел, ознакомьтесь со статьей [Развертывание головного узла пакета HPC на виртуальной машине Azure](../../virtual-machines-windows-hpcpack-cluster-headnode.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-116">To create a stand-alone head node, see [Deploy an HPC Pack Head Node in an Azure VM](../../virtual-machines-windows-hpcpack-cluster-headnode.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="b7e5a-117">Чтобы ознакомиться с вариантами автоматизированного развертывания кластеров пакета HPC, прочитайте раздел [Варианты создания кластера высокопроизводительных вычислительных систем (HPC) на основе Windows и управления им в Azure с помощью пакета Microsoft HPC](../../virtual-machines-windows-hpcpack-cluster-options.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-117">For automated HPC Pack cluster deployment options, see [Options to create and manage a Windows HPC cluster in Azure with Microsoft HPC Pack](../../virtual-machines-windows-hpcpack-cluster-options.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
  
  > [!TIP]
  > <span data-ttu-id="b7e5a-118">Если для создания кластера в Azure используется [сценарий развертывания IaaS пакета HPC](hpcpack-cluster-powershell-script.md), можно включить расширительные узлы Azure в свое автоматическое развертывание.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-118">If you use the [HPC Pack IaaS deployment script](hpcpack-cluster-powershell-script.md) to create the cluster in Azure, you can include Azure burst nodes in your automated deployment.</span></span> <span data-ttu-id="b7e5a-119">См. примеры в этой статье.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-119">See the examples in that article.</span></span>
  > 
  > 
* <span data-ttu-id="b7e5a-120">**Подписка Azure** — для добавления узлов Azure вы можете же выбрать ту же подписку, которая применялась для развертывания виртуальной машины головного узла, либо другую подписку (или подписки).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-120">**Azure subscription** - To add Azure nodes, you can choose the same subscription used to deploy the head node VM, or a different subscription (or subscriptions).</span></span>
* <span data-ttu-id="b7e5a-121">**Квота ядер** — может потребоваться увеличить квоту ядер, особенно если вы решите развернуть несколько многоядерных узлов Azure.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-121">**Cores quota** - You might need to increase the quota of cores, especially if you choose to deploy several Azure nodes with multicore sizes.</span></span> <span data-ttu-id="b7e5a-122">Чтобы увеличить квоту, бесплатно [отправьте запрос в службу поддержки](https://azure.microsoft.com/blog/2014/06/04/azure-limits-quotas-increase-requests/) .</span><span class="sxs-lookup"><span data-stu-id="b7e5a-122">To increase a quota, [open an online customer support request](https://azure.microsoft.com/blog/2014/06/04/azure-limits-quotas-increase-requests/) at no charge.</span></span>

## <a name="step-1-create-a-cloud-service-and-a-storage-account-for-the-azure-nodes"></a><span data-ttu-id="b7e5a-123">Шаг 1. Создание облачной службы и учетной записи хранения для узлов Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-123">Step 1: Create a cloud service and a storage account for the Azure nodes</span></span>
<span data-ttu-id="b7e5a-124">Используйте классический портал Azure или эквивалентные инструменты для настройки следующих ресурсов, необходимых для развертывания узлов Azure.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-124">Use the Azure classic portal or equivalent tools to configure the following resources that are needed to deploy your Azure nodes:</span></span>

* <span data-ttu-id="b7e5a-125">Новая облачная служба Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-125">A new Azure cloud service</span></span>
* <span data-ttu-id="b7e5a-126">Новая учетная запись хранения Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-126">A new Azure storage account</span></span>

> [!NOTE]
> <span data-ttu-id="b7e5a-127">Не используйте повторно уже существующую облачную службу в подписке.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-127">Don't reuse an existing cloud service in your subscription.</span></span> 
> 
> 

<span data-ttu-id="b7e5a-128">**Рекомендации**</span><span class="sxs-lookup"><span data-stu-id="b7e5a-128">**Considerations**</span></span>

* <span data-ttu-id="b7e5a-129">Настройте отдельную облачную службу для каждого шаблона узла Azure, который планируется создать.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-129">Configure a separate cloud service for each Azure node template that you plan to create.</span></span> <span data-ttu-id="b7e5a-130">Однако можно использовать одну и ту же учетную запись для нескольких шаблонов узла.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-130">However, you can use the same storage account for multiple node templates.</span></span>
* <span data-ttu-id="b7e5a-131">Облачную службу и учетную запись хранения для развертывания рекомендуется размещать в одном регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-131">We recommend that you locate the cloud service and the storage account for the deployment in the same Azure region.</span></span>

## <a name="step-2-configure-an-azure-management-certificate"></a><span data-ttu-id="b7e5a-132">Шаг 2. Настройка сертификата управления Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-132">Step 2: Configure an Azure management certificate</span></span>
<span data-ttu-id="b7e5a-133">Для добавления узлов Azure в качестве вычислительных ресурсов необходимо иметь сертификат управления на головном узле и загрузить соответствующий сертификат в подписку Azure, используемую для развертывания.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-133">To add Azure nodes as compute resources, you need a management certificate on the head node and upload a corresponding certificate to the Azure subscription used for the deployment.</span></span>

<span data-ttu-id="b7e5a-134">В этом сценарии вы можете выбрать **сертификат управления HPC Azure по умолчанию** , который пакет HPC автоматически устанавливает и настраивает на головном узле.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-134">For this scenario, you can choose the **Default HPC Azure Management Certificate** that HPC Pack installs and configures automatically on the head node.</span></span> <span data-ttu-id="b7e5a-135">Этот сертификат удобен для тестирования и экспериментальных развертываний.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-135">This certificate is useful for testing purposes and proof-of-concept deployments.</span></span> <span data-ttu-id="b7e5a-136">Чтобы использовать этот сертификат, передайте в подписку файл C:\Program Files\Microsoft HPC Pack 2012\Bin\hpccert.cer с виртуальной машины головного узла.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-136">To use this certificate, upload the file C:\Program Files\Microsoft HPC Pack 2012\Bin\hpccert.cer from the head node VM to the subscription.</span></span> <span data-ttu-id="b7e5a-137">Чтобы отправить сертификат с помощью [классического портала Azure](https://manage.windowsazure.com), щелкните **Параметры** > **Сертификаты управления**.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-137">To upload the certificate in the [Azure classic portal](https://manage.windowsazure.com), click **Settings** > **Management Certificates**.</span></span>

<span data-ttu-id="b7e5a-138">Сведения о дополнительных параметрах настройки сертификата управления см. в разделе [Сценарии настройки сертификата управления Azure для расширения развертывания Azure](http://technet.microsoft.com/library/gg481759.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-138">For additional options to configure the management certificate, see [Scenarios to Configure the Azure Management Certificate for Azure Burst Deployments](http://technet.microsoft.com/library/gg481759.aspx).</span></span>

## <a name="step-3-deploy-azure-nodes-to-the-cluster"></a><span data-ttu-id="b7e5a-139">Шаг 3. Развертывание узлов Azure в кластере</span><span class="sxs-lookup"><span data-stu-id="b7e5a-139">Step 3: Deploy Azure nodes to the cluster</span></span>
<span data-ttu-id="b7e5a-140">Действия по добавлению и запуску узлов Azure в этом сценарии аналогичны действиям для локального головного узла.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-140">The steps to add and start Azure nodes in this scenario are generally the same as the steps with an on-premises head node.</span></span> <span data-ttu-id="b7e5a-141">Дополнительные сведения см. в следующих разделах статьи [Шаги по развертыванию узлов Azure с помощью пакета Microsoft HPC](https://technet.microsoft.com/library/gg481758.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-141">For more information, see the following sections in [Steps to Deploy Azure Nodes with Microsoft HPC Pack](https://technet.microsoft.com/library/gg481758.aspx):</span></span>

* <span data-ttu-id="b7e5a-142">Создание шаблона узла Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-142">Create an Azure node template</span></span>
* <span data-ttu-id="b7e5a-143">Добавление узлов Azure в кластер HPC Windows</span><span class="sxs-lookup"><span data-stu-id="b7e5a-143">Add Azure nodes to the Windows HPC cluster</span></span>
* <span data-ttu-id="b7e5a-144">Запуск (подготовка) узлов Azure</span><span class="sxs-lookup"><span data-stu-id="b7e5a-144">Start (provision) the Azure nodes</span></span>

<span data-ttu-id="b7e5a-145">После добавления и запуска узлов их можно использовать для выполнения заданий кластера.</span><span class="sxs-lookup"><span data-stu-id="b7e5a-145">After you add and start the nodes, they are ready for you to use to run cluster jobs.</span></span>

<span data-ttu-id="b7e5a-146">Если при развертывании узлов Azure возникли проблемы, ознакомьтесь со статьей [Устранение неполадок развертываний узлов Azure с помощью пакета Microsoft HPC](http://technet.microsoft.com/library/jj159097.aspx).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-146">If you encounter problems when deploying Azure nodes, see [Troubleshoot Deployments of Azure Nodes with Microsoft HPC Pack](http://technet.microsoft.com/library/jj159097.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b7e5a-147">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="b7e5a-147">Next steps</span></span>
* <span data-ttu-id="b7e5a-148">Рекомендации по использованию размеров экземпляров для ресурсоемких вычислений для расширительных узлов см. в статье [Размеры виртуальных машин, оптимизированных для высокопроизводительных вычислений](../sizes-hpc.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-148">To use a compute-intensive instance size for the burst nodes, see the considerations in [High performance compute VM sizes](../sizes-hpc.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>
* <span data-ttu-id="b7e5a-149">Если вам требуется возможность автоматического увеличения или уменьшения вычислительных ресурсов Azure в соответствии с текущей рабочей нагрузкой, ознакомьтесь со статьей [Автоматическое изменение размера ресурсов кластера пакета HPC в Azure в соответствии с рабочей нагрузкой кластера](hpcpack-cluster-node-autogrowshrink.md).</span><span class="sxs-lookup"><span data-stu-id="b7e5a-149">If you want to automatically grow or shrink the Azure computing resources according to the cluster workload, see [Automatically grow and shrink Azure compute resources in an HPC Pack cluster](hpcpack-cluster-node-autogrowshrink.md).</span></span>

<!--Image references-->
[burst]: ./media/hpcpack-cluster-node-burst/burst.png
