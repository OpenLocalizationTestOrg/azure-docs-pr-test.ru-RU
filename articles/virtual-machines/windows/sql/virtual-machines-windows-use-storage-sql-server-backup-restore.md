---
title: "aaaHow toouse хранилища Azure для SQL Server резервного копирования и восстановления | Документы Microsoft"
description: "Узнайте, как tooback копии SQL Server tooAzure хранилища. Объясняет преимущества hello резервного копирования баз данных SQL tooAzure хранилища."
services: virtual-machines-windows
documentationcenter: 
author: MikeRayMSFT
manager: jhubbard
tags: azure-service-management
ms.assetid: 0db7667d-ef63-4e2b-bd4d-574802090f8b
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 01/31/2017
ms.author: mikeray
ms.openlocfilehash: 67ebe8377be97df1312f8c1345e23576aabe0c4c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="use-azure-storage-for-sql-server-backup-and-restore"></a>Использование службы хранилища Azure для архивации и восстановления SQL Server
## <a name="overview"></a>Обзор
Начиная с SQL Server 2012 SP1 CU2, теперь можно написать резервные копии SQL Server непосредственно toohello службы хранилища больших двоичных объектов Azure. Можно использовать этот tooback функциональные возможности копирования, восстановления tooand из службы больших двоичных объектов hello с локальной базы данных SQL Server или базы данных SQL Server в виртуальной машине Azure. Toocloud резервного копирования обеспечивает преимущества неограниченное внешнее хранилище, географически реплицированный и простота миграции данных tooand доступности из облака hello. Для выполнения операторов BACKUP и RESTORE можно использовать Transact-SQL или SMO.

SQL Server 2016 представлены новые возможности; можно использовать [резервного копирования моментальных снимков файлов](http://msdn.microsoft.com/library/mt169363.aspx) tooperform практически мгновенного создания резервных копий и очень быстрое восстановление.

В этом разделе объясняется, почему может выбрать toouse хранилища Azure для резервных копий SQL, а затем описываются компоненты hello, участвующие. Можно использовать hello ресурсов, предоставленных в конце hello пошаговые руководства tooaccess статье hello и toostart Дополнительные сведения, с помощью этой службы с резервными копиями SQL Server.

## <a name="benefits-of-using-hello-azure-blob-service-for-sql-server-backups"></a>Преимущества hello использование больших двоичных объектов Azure для резервного копирования SQL Server
Есть несколько задач, которые нужно решить при архивации SQL Server. Эти задачи включают управление хранилищем, риск сбоя хранилища, доступа к toooff узла хранения и конфигурации оборудования. Многие из этих проблем адресуются с помощью службы хранилища больших двоичных объектов Azure hello для резервного копирования SQL Server. Рассмотрим hello следующие преимущества:

* **Простота использования**: хранение резервных копий в Azure BLOB-объектов может быть удобным, гибкие и легко tooaccess надежном. Создания удаленного хранилища для резервных копий SQL Server может быть достаточно внести изменения в существующие скрипты и задания toouse hello **tooURL резервного КОПИРОВАНИЯ** синтаксиса. Удаленное хранилище обычно должно быть достаточное количество от hello рабочей базы данных расположение tooprevent один сбой, который может повлиять на другой площадке hello и расположение рабочей базы данных. Выбрав слишком[репликации больших двоичных объектов Azure](../../../storage/common/storage-redundancy.md), имеют дополнительный уровень защиты в событии hello аварии регионального hello целиком.
* **Архив резервных**: hello службы хранилища больших двоичных объектов обеспечивает лучшую ленты альтернативных toohello часто используется резервные копии tooarchive параметр. Лента может потребоваться физически транспортировать накопители tooan удаленное помещение и принимать меры tooprotect hello носителя. Хранение резервных копий в хранилище BLOB-объектов Azure предоставляет возможность мгновенного и долговременного архивирования с высокой доступностью.
* **Управляемое оборудование**. При использовании служб Azure отсутствуют накладные расходы на управление оборудованием. Управление оборудованием hello служб Azure и обеспечивают георепликацию для избыточности и защиты от сбоев оборудования.
* **Неограниченное хранение**: Включение прямого резервного копирования tooAzure больших двоичных объектов, у вас есть доступ toovirtually неограниченное хранение. Кроме того резервное копирование диска tooan виртуальной машины Azure имеет ограничения в зависимости от размера машины. Отсутствует toohello предельное число дисков можно присоединить tooan виртуальной машины Azure для резервных копий. Оно равно 16 для очень крупного экземпляра и меньше этого значения для экземпляров меньшего размера.
* **Резервное копирование доступности**: резервных копий, хранящихся в больших двоичных объектов Azure доступны в любом месте и в любое время и может быть легко получить доступ к для tooeither восстановление в локальной среде SQL Server или другой экземпляр SQL Server в виртуальной машине Azure, без необходимости hello Присоединение и отсоединение базы данных или загрузки и присоединение hello виртуального жесткого диска.
* **Стоимость**: платить только за hello служба, которая используется. Может быть экономичным вариантом внешнего архива и архива резервных копий. Разделе hello [калькулятор цен Azure](http://go.microsoft.com/fwlink/?LinkId=277060 "калькулятор цен")и hello [цены Azure статьи](http://go.microsoft.com/fwlink/?LinkId=277059 "цены статьи") для получения дополнительных сведений сведения.
* **Моментальные снимки хранилища**: Если вы используете SQL Server 2016 в большом двоичном объекте Azure хранятся файлы базы данных, можно использовать [резервного копирования моментальных снимков файлов](http://msdn.microsoft.com/library/mt169363.aspx) tooperform практически мгновенного создания резервных копий и очень быстрое восстановление.

Дополнительные сведения см. в статье [Резервное копирование и восстановление SQL Server с помощью службы хранилища BLOB-объектов Microsoft Azure](http://go.microsoft.com/fwlink/?LinkId=271617).

Hello следующих двух разделах представлены службы хранилища больших двоичных объектов hello, включая hello необходимые компоненты SQL Server. Это важные toounderstand hello компонентов, их взаимодействие toosuccessfully использования, резервное копирование и восстановление из службы хранилища больших двоичных объектов Azure hello.

## <a name="azure-blob-storage-service-components"></a>Компоненты службы хранилища BLOB-объектов Azure
Hello следующие компоненты Azure используются при резервном копировании toohello службы хранилища больших двоичных объектов.

| Компонент | Описание |
| --- | --- |
| **Учетная запись хранения** |Учетная запись хранения Hello — hello, начальная точка для всех служб хранилища. tooaccess в службу хранилища больших двоичных объектов, сначала создайте учетную запись хранилища Azure. Дополнительные сведения о службе хранилища больших двоичных объектов Azure см. в разделе [как toouse hello Azure Blob Storage Service](https://azure.microsoft.com/develop/net/how-to-guides/blob-storage/) |
| **Контейнер** |Контейнер позволяет сгруппировать набор больших двоичных объектов и может содержать неограниченное количество больших двоичных объектов. toowrite tooan резервного копирования SQL Server службы BLOB-объектов Azure, вы должны иметь как минимум создать корневой контейнер hello. |
| **Большой двоичный объект** |файл любого типа и размера. Большие двоичные объекты можно с помощью hello следующий формат URL-адреса: **https://[storage account].blob.core.windows.net/[container]/[blob]**. Дополнительные сведения о страничных BLOB-объектах см. в статье [Understanding Block and Page Blobs](http://msdn.microsoft.com/library/azure/ee691964.aspx) (Основные сведения о блочных, добавочных и страничных BLOB-объектах). |

## <a name="sql-server-components"></a>Компоненты SQL Server
Hello следующие компоненты SQL Server используются при резервном копировании toohello службы хранилища больших двоичных объектов.

| Компонент | Описание |
| --- | --- |
| **URL-адрес** |URL-адрес указывает универсальный код ресурса (URI) tooa уникального файла резервной копии. URL-адрес Hello — используется tooprovide hello расположение и имя файла резервной копии SQL Server hello. Hello URL-адрес должен указывать tooan фактический большой двоичный объект, не просто контейнер. Если hello большой двоичный объект не существует, он создается. Если существующий большой двоичный объект указан, резервное копирование завершается ошибкой, если не hello > указан параметр WITH FORMAT. Hello ниже приведен пример hello URL-адреса, следует указать в hello команда BACKUP: **http[s]://[storageaccount].blob.core.windows.net/[container]/[FILENAME.bak]**. Использование HTTPS рекомендуется, но не является обязательным. |
| **Учетные данные** |Hello сведения, необходимые tooconnect и проверки подлинности службы хранилища больших двоичных объектов tooAzure хранится в виде учетных данных.  Чтобы SQL Server toowrite tooan больших двоичных объектов Azure для резервного копирования или восстановления из него необходимо создать учетные данные SQL Server. Дополнительные сведения см. в статье [SQL Server Credential](https://msdn.microsoft.com/library/ms189522.aspx) (Учетные данные SQL Server). |

> [!NOTE]
> Если вы выберите toocopy и загрузите файл резервной копии toohello службы хранилища больших двоичных объектов, необходимо использовать большого двоичного объекта типа страницы в качестве дополнения хранилища при планировании toouse этот файл для выполнения операций восстановления. Восстановление (RESTORE) из BLOB-объекта блочного типа завершится ошибкой.
> 
> 

## <a name="next-steps"></a>Дальнейшие действия
1. Если у вас ее еще нет, создайте учетную запись Azure. Если при оценке Azure, следует рассмотреть возможность hello [бесплатной пробной версии](https://azure.microsoft.com/free/).
2. Затем перейдите по одной из hello следующие учебники с пошаговыми руководствами по созданию учетной записи хранилища и выполнить восстановление.
   
   * **SQL Server 2014**: [учебника: SQL Server 2014 резервного копирования и восстановления tooMicrosoft Azure Blob Storage Service](https://msdn.microsoft.com/library/jj720558\(v=sql.120\).aspx).
   * **SQL Server 2016**: [учебника: использование службы хранилища больших двоичных объектов Microsoft Azure hello с базами данных SQL Server 2016](https://msdn.microsoft.com/library/dn466438.aspx)
3. Просмотрите дополнительную документацию, начиная со статьи [Архивация и восстановление SQL Server с помощью службы хранилища BLOB-объектов Microsoft Azure](https://msdn.microsoft.com/library/jj919148.aspx).

Если у вас возникнут проблемы, ознакомьтесь с разделом hello [резервного копирования SQL Server tooURL Best Practices and Troubleshooting](https://msdn.microsoft.com/library/jj919149.aspx).

С другими вариантами архивации и восстановления SQL Server ознакомьтесь в статье [Резервное копирование и восстановление SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-backup-recovery.md).

