---
title: "Эффективное управление затратами на SQL Server в Виртуальных машинах Azure | Документация Майкрософт"
description: "Рекомендации по выбору подходящей модели ценообразования для виртуальны машин SQL Server."
services: virtual-machines-windows
documentationcenter: na
author: luisherring
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 04/18/2017
ms.author: jroth
ms.openlocfilehash: 29a92f0c70bffedeb75c50b7fc3b687ee5ee227d
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="pricing-guidance-for-sql-server-azure-vms"></a>Руководство по выбору ценовой категории для виртуальных машин SQL Server в Azure

В этом разделе приводятся рекомендации по выбору ценовой категории для виртуальных машин SQL Server в Azure. На затраты влияет несколько параметров, поэтому важно выбрать соответствующий образ, чтобы затраты были соизмеримы с потребностями организации.

## <a name="free-licensed-sql-server-editions"></a>Выпуски SQL Server с бесплатными лицензиями

Если требуется разработать, протестировать или создать подтверждение концепции, используйте выпуск **SQL Server Developer** с бесплатными лицензиями. Этот выпуск содержит все компоненты выпуска SQL Server Enterprise, поэтому его можно использовать для создания любого приложения. Единственное ограничение — его нельзя использовать в рабочей среде. При использовании виртуальной машины SQL Server Developer плата будет взиматься только за виртуальную машину, но не за лицензии SQL Server.

Если вы хотите выполнять упрощенную рабочую нагрузку в рабочей среде (меньше 4 ядер, меньше 1 ГБ памяти и меньше 10 ГБ на базу данных), то используйте **выпуск SQL Server Express** с бесплатными лицензиями. При использовании виртуальной машины SQL Server Express плата будет взиматься только за виртуальную машину, но не за лицензии SQL Server.

Кроме того, вы можете сэкономить средства на этих рабочих нагрузках разработки и тестирования или упрощенных рабочих нагрузках, выбрав меньший размер виртуальной машины, который для них подходит. Хорошим выбором для этих рабочих нагрузок может быть DS1v2.

Чтобы создать виртуальную машину Azure SQL Server 2016 на основе одного из этих образов, перейдите по следующим ссылкам:

- [Виртуальная машина SQL Server 2016 Developer в Azure](https://ms.portal.azure.com/#create/Microsoft.FreeLicenseSQLServer2016SP1DeveloperWindowsServer2016-ARM)
- [Виртуальная машина SQL Server 2016 Express в Azure](https://ms.portal.azure.com/#create/Microsoft.FreeLicenseSQLServer2016SP1ExpressWindowsServer2016-ARM)

## <a name="paid-sql-server-editions"></a>Платные выпуски SQL Server

Для обычной производственной рабочей нагрузки используйте один из следующих выпусков SQL Server.

| Выпуск SQL Server | Рабочая нагрузка |
|-----|-----|
| Web | Небольшие веб-сайты |
| Стандартная | Небольшие и средние рабочие нагрузки |
| Enterprise | Большие и критически важные рабочие нагрузки|

Существуют два варианта оплаты лицензий для этих выпусков SQL Server: *оплата за использование* или *использование собственных лицензий*.

### <a name="pay-per-usage"></a>Оплата за использование

**Оплата за использование лицензий SQL Server** означает, что стоимость минуты выполнения виртуальной машины Azure включает в себя стоимость лицензии SQL Server. Цены на разные выпуски SQL Server (Web, Standard, Enterprise) можно узнать на [странице цен на виртуальные машины Azure](https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-standard). Стоимость одинакова для всех версий SQL Server (с SQL Server 2008 R2 до SQL Server 2016). Как и стоимость лицензий SQL Server в общем случае, стоимость минуты лицензии зависит от числа ядер виртуальной машины.

Оплата за использование лицензий SQL Server рекомендуется в следующих случаях.

- Временные или периодические рабочие нагрузки. Например, это может быть приложение, которое должно поддерживать какое-либо событие в течение пары месяцев каждый год или выполнять бизнес-анализ по понедельникам.
- Рабочие нагрузки с неизвестным временем существования или масштабом. Например, это может быть приложение, не востребованное в течение нескольких месяцев, или приложение, которое может требовать больше или меньше вычислительной мощности в зависимости от потребностей.

Чтобы создать виртуальную машину SQL Server 2016 в Azure на основе одного из этих образов с оплатой за использование, перейдите по следующим ссылкам:

- [Виртуальная машина SQL Server 2016 Web в Azure](https://ms.portal.azure.com/#create/Microsoft.SQLServer2016SP1WebWindowsServer2016)
- [Виртуальная машина SQL Server 2016 Standard в Azure](https://ms.portal.azure.com/#create/Microsoft.SQLServer2016SP1StandardWindowsServer2016)
- [Виртуальная машина SQL Server 2016 Enterprise в Azure](https://ms.portal.azure.com/#create/Microsoft.SQLServer2016SP1EnterpriseWindowsServer2016)

> [!IMPORTANT]
> При создании виртуальной машины на портале Azure в расчетную ежемесячную стоимость, указанную в колонке **Выбор размера**, не включена стоимость лицензии SQL Server. Это только стоимость виртуальной машины.
>
> ![Колонка выбора размера виртуальной машины](./media/virtual-machines-windows-sql-server-pricing-guidance/sql-vm-choose-size-pricing-estimate.png)
>
>Для выпусков SQL Server Express и Developer с бесплатными лицензиями указана итоговая расчетная стоимость. Но для выпусков Web, Standard и Enterprise следует учесть дополнительные затраты на лицензии SQL Server, приведенные на [странице цен на виртуальные машины Windows](https://azure.microsoft.com/pricing/details/virtual-machines/windows/). На странице цен выберите нужный выпуск SQL Server.

### <a name="bring-your-own-license-byol"></a>Использование собственных лицензий (BYOL)

**Использование собственной лицензии SQL Server посредством License Mobility** (**BYOL**) означает использование на виртуальной машине Azure существующей корпоративной лицензии SQL Server в рамках программы Software Assurance. При использовании виртуальной машины SQL Server с BYOL будет взиматься только плата за выполнение виртуальной машины, но не за лицензию SQL Server, так как вы уже приобрели лицензии и участвуете в программе Software Assurance в рамках программы корпоративного лицензирования.

Использование собственных лицензий SQL посредством License Mobility рекомендуется для следующих ситуаций.

- Непрерывные рабочие нагрузки. Например, это может быть приложение, которое требуется для круглосуточной поддержки бизнес-операций.
- Рабочие нагрузки с известным временем существования и масштабом. Например, это может быть приложение, которое будет востребовано на протяжении всего года и потребности которого спрогнозированы.

Чтобы использовать BYOL с виртуальной машиной SQL Server, необходимо иметь лицензию на SQL Server Standard или SQL Server Enterprise и участвовать в программе [Software Assurance](https://www.microsoft.com/en-us/licensing/licensing-programs/software-assurance-default.aspx#tab=1). Это обязательный компонент в некоторых программах [корпоративного лицензирования](https://www.microsoft.com/en-us/download/details.aspx?id=10585) и необязательная покупка — в других программах.  Уровни ценообразования, предоставляемые в рамках программ корпоративного лицензирования, могут различаться в зависимости от типа соглашения и количества лицензий и (или) обязательств по SQL Server. Как правило, использование собственных лицензий для непрерывных рабочих нагрузок дает следующие преимущества.

| Преимущество BYOL | Описание |
|-----|-----|
| **Уменьшение затрат** | Использовать собственную лицензию SQL Server выгоднее, чем платить за ее использование, если рабочая нагрузка на SQL Server Standard или SQL Server Enterprise будет выполняться непрерывно *более 10 месяцев*. |
| **Долгосрочная экономия** | В течение первых 3 лет приобрести или обновить лицензию SQL Server в среднем *дешевле на 30 % в год*. Более того, по прошествии 3 лет лицензию больше не нужно обновлять, нужно лишь платить за участие в программе Software Assurance. Это *удешевляет использование на 200 %*. |
| **Бесплатная пассивная вторичная реплика** | Еще одно преимущество использования собственной лицензии — [бесплатная лицензия на одну пассивную вторичную реплику](https://azure.microsoft.com/pricing/licensing-faq/) на каждый сервер SQL Server, предназначенную обеспечить высокий уровень доступности. Это наполовину снижает стоимость лицензии на высокодоступное развертывание SQL Server (например, с использованием групп доступности AlwaysOn). Права на запуск пассивной вторичной реплики предоставляются посредством серверов отработки отказа (преимущество Software Assurance). |

Чтобы создать виртуальную машину SQL Server 2016 в Azure с одним из этих образов с использованием собственной лицензии, ищите виртуальные компьютеры с префиксом {BYOL}:

- [Виртуальная машина SQL Server 2016 Enterprise в Azure](https://ms.portal.azure.com/#create/Microsoft.BYOLSQLServer2016SP1EnterpriseWindowsServer2016)
- [Виртуальная машина SQL Server 2016 Standard в Azure](https://ms.portal.azure.com/#create/Microsoft.BYOLSQLServer2016SP1StandardWindowsServer2016)

> [!NOTE]
> Сообщите нам в течение 10 дней количество лицензий на SQL Server, которые вы будете использовать в Azure. По ссылкам на предыдущие образы доступны инструкции о том, как это сделать.

## <a name="avoid-unecessary-costs"></a>Устранение лишних затрат

При наличии любых непостоянных рабочих нагрузок рассмотрите возможность завершения работы виртуальной машины в периоды простоя. Вы платите только за то, что используете.

Например, если вы просто изучаете работу SQL Server на виртуальной машине Azure, то не захотите получить приличный счет, случайно оставив ее работать в течение нескольких недель. Одним из решений является использование [функции автоматического завершения работы](https://azure.microsoft.com/blog/announcing-auto-shutdown-for-vms-using-azure-resource-manager/).

![Автоматическое завершение работы виртуальной машины SQL](./media/virtual-machines-windows-sql-server-pricing-guidance/sql-vm-auto-shutdown.png)

Автоматическое завершение работы — лишь одна функция из большого набора аналогичных функциональных возможностей, предоставляемых [DevTest Azure Labs](https://azure.microsoft.com/services/devtest-lab).

Для других рабочих процессов рассмотрите возможность автоматического завершения работы и перезапуска виртуальных машин Azure с помощью решения на основе сценариев, например [службы автоматизации Azure](https://azure.microsoft.com/services/automation/).

> [!IMPORTANT]
> Завершение работы и освобождение виртуальной машины — единственный способ избежать ненужных расходов. Если просто остановить или завершить работу виртуальной машины с помощью параметров включения, то за ее использование все равно будет взиматься плата.

## <a name="next-steps"></a>Дальнейшие действия

Общие рекомендации по ценам Azure приведены в статье [Предотвращение непредвиденных расходов с помощью функции выставления счетов и управления затратами в Azure](../../../billing/billing-getting-started.md).

Последние цены на виртуальные машины, включая лицензии SQL Server, доступны на [странице цен на виртуальные машины Azure](https://azure.microsoft.com/pricing/details/virtual-machines/sql-server-standard).

Просмотрите другие разделы, посвященные виртуальным машинам SQL Server, в статье [Приступая к работе с SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-overview.md).
