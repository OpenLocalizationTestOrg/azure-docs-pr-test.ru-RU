---
title: "Подготовка виртуальной машины SQL Server | Документация Майкрософт"
description: "Создание и подключение к виртуальной машине SQL Server с помощью портала Azure. В этом руководстве используется модель Resource Manager."
services: virtual-machines-windows
documentationcenter: na
author: rothja
editor: 
manager: jhubbard
tags: azure-resource-manager
ms.assetid: 1aff691f-a40a-4de2-b6a0-def1384e086e
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: infrastructure-services
ms.date: 04/03/2017
ms.author: jroth
experimental_id: a641df96-f27d-40
ms.openlocfilehash: c51908058bb785cb33da21de76ba3c956b6b9f1f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="provision-a-sql-server-virtual-machine-in-the-azure-portal"></a><span data-ttu-id="c9a04-104">Подготовка виртуальной машины SQL Server на портале Azure</span><span class="sxs-lookup"><span data-stu-id="c9a04-104">Provision a SQL Server virtual machine in the Azure Portal</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="c9a04-105">Портал</span><span class="sxs-lookup"><span data-stu-id="c9a04-105">Portal</span></span>](virtual-machines-windows-portal-sql-server-provision.md)
> * [<span data-ttu-id="c9a04-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c9a04-106">PowerShell</span></span>](virtual-machines-windows-ps-sql-create.md)
> 
> 

<span data-ttu-id="c9a04-107">В этом комплексном руководстве показано, как подготовить виртуальную машину SQL Server на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="c9a04-107">This end-to-end tutorial shows you how to use the Azure Portal to provision a virtual machine running SQL Server.</span></span>

<span data-ttu-id="c9a04-108">Коллекция виртуальных машин (VM) в Azure включает в себя несколько образов, содержащих Microsoft SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-108">The Azure virtual machine (VM) gallery includes several images that contain Microsoft SQL Server.</span></span> <span data-ttu-id="c9a04-109">Всего за несколько действий вы можете выбрать один из образов виртуальной машины SQL из коллекции и подготовить ее в среде Azure.</span><span class="sxs-lookup"><span data-stu-id="c9a04-109">With a few clicks, you can select one of the SQL VM images from the gallery and provision it in your Azure environment.</span></span>

<span data-ttu-id="c9a04-110">Изучив данный учебник, вы научитесь:</span><span class="sxs-lookup"><span data-stu-id="c9a04-110">In this tutorial, you will:</span></span>

* [<span data-ttu-id="c9a04-111">выбирать образ виртуальной машины из коллекции;</span><span class="sxs-lookup"><span data-stu-id="c9a04-111">Select a SQL VM image from the gallery</span></span>](#select-a-sql-vm-image-from-the-gallery)
* [<span data-ttu-id="c9a04-112">настраивать и создавать виртуальные машины;</span><span class="sxs-lookup"><span data-stu-id="c9a04-112">Configure and create the VM</span></span>](#configure-the-vm)
* [<span data-ttu-id="c9a04-113">открывать виртуальные машины с помощью удаленного рабочего стола;</span><span class="sxs-lookup"><span data-stu-id="c9a04-113">Open the VM with Remote Desktop</span></span>](#open-the-vm-with-remote-desktop)
* [<span data-ttu-id="c9a04-114">удаленно подключаться к SQL Server;</span><span class="sxs-lookup"><span data-stu-id="c9a04-114">Connect to SQL Server remotely</span></span>](#connect-to-sql-server-remotely)

## <a name="select-a-sql-vm-image-from-the-gallery"></a><span data-ttu-id="c9a04-115">выбирать образ виртуальной машины из коллекции;</span><span class="sxs-lookup"><span data-stu-id="c9a04-115">Select a SQL VM image from the gallery</span></span>
1. <span data-ttu-id="c9a04-116">Войдите на [портал Azure](https://portal.azure.com) , используя свою учетную запись.</span><span class="sxs-lookup"><span data-stu-id="c9a04-116">Log in to the [Azure portal](https://portal.azure.com) using your account.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c9a04-117">Если у вас нет учетной записи Azure, используйте [бесплатную пробную версию Azure](https://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="c9a04-117">If you do not have an Azure account, visit [Azure free trial](https://azure.microsoft.com/pricing/free-trial/).</span></span>

2. <span data-ttu-id="c9a04-118">На портале Azure нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-118">On the Azure portal, click **New**.</span></span> <span data-ttu-id="c9a04-119">На портале откроется колонка **Создать** .</span><span class="sxs-lookup"><span data-stu-id="c9a04-119">The portal opens the **New** blade.</span></span> <span data-ttu-id="c9a04-120">Ресурсы виртуальных машин SQL Server находятся на Marketplace в группе **Вычисления**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-120">The SQL Server VM resources are in the **Compute** group of the Marketplace.</span></span>
3. <span data-ttu-id="c9a04-121">В колонке **Создать** щелкните **Вычисления** и выберите **See all** (Показать все).</span><span class="sxs-lookup"><span data-stu-id="c9a04-121">In the **New** blade, click **Compute** and then click **See all**.</span></span>
4. <span data-ttu-id="c9a04-122">В текстовом поле **Фильтр** введите SQL Server и нажмите клавишу ВВОД.</span><span class="sxs-lookup"><span data-stu-id="c9a04-122">In the **Filter** text box type SQL Server, and press the ENTER key.</span></span>

   ![Колонка "Виртуальные машины Azure"](./media/virtual-machines-windows-portal-sql-server-provision/azure-compute-blade2.png)

5. <span data-ttu-id="c9a04-124">Просмотрите доступные образы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-124">Review the available SQL Server images.</span></span> <span data-ttu-id="c9a04-125">Каждый образ определяет версию SQL Server и операционную систему.</span><span class="sxs-lookup"><span data-stu-id="c9a04-125">Each image identifies a SQL Server version and an operating system.</span></span> 
6. <span data-ttu-id="c9a04-126">Выберите образ SQL Server 2016 SP1 Developer на платформе Windows Server 2016.</span><span class="sxs-lookup"><span data-stu-id="c9a04-126">Select the image for SQL Server 2016 SP1 Developer on Windows Server 2016.</span></span>

   > [!TIP]
   > <span data-ttu-id="c9a04-127">В этом руководстве используется выпуск Developer, так как это полнофункциональный выпуск SQL Server, предоставляемый бесплатно для тестирования в процессе разработки.</span><span class="sxs-lookup"><span data-stu-id="c9a04-127">The Developer edition is used in this tutorial because it is a full-featured edition of SQL Server that is free for development testing purposes.</span></span> <span data-ttu-id="c9a04-128">Вы оплачиваете только стоимость выполнения виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-128">You pay only for the cost of running the VM.</span></span>

   > [!NOTE]
   > <span data-ttu-id="c9a04-129">В поминутную тарификацию использования виртуальных машин SQL, создаваемых из образов, включена стоимость лицензий на SQL Server (за исключением выпусков Developer и Express).</span><span class="sxs-lookup"><span data-stu-id="c9a04-129">SQL VM images include the licensing costs for SQL Server into the per-minute pricing of the VM you create (except for the Developer and Express editions).</span></span> <span data-ttu-id="c9a04-130">Выпуск SQL Server Developer предоставляется бесплатно для разработки и тестирования (не для рабочей среды), а выпуск SQL Express предоставляется бесплатно для упрощенных рабочих нагрузок (требующих менее 1 ГБ памяти и 10 ГБ хранилища).</span><span class="sxs-lookup"><span data-stu-id="c9a04-130">SQL Server Developer is free for development/testing (not production) and SQL Express is free for lightweight workloads (less than 1 GB memory, less than 10-GB storage).</span></span>
   > <span data-ttu-id="c9a04-131">Есть еще один вариант — использовать собственную лицензию (BYOL) и платить только за виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="c9a04-131">There is another option to bring-your-own-license (BYOL) and pay only for the VM.</span></span> <span data-ttu-id="c9a04-132">Имена таких образов содержат префикс {BYOL}.</span><span class="sxs-lookup"><span data-stu-id="c9a04-132">Those image names are prefixed with {BYOL}.</span></span> <span data-ttu-id="c9a04-133">Дополнительные сведения об этих параметрах см. в [руководстве по выбору ценовой категории для виртуальных машин Azure SQL Server](virtual-machines-windows-sql-server-pricing-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-133">For more information on these options, see [Pricing guidance for SQL Server Azure VMs](virtual-machines-windows-sql-server-pricing-guidance.md).</span></span>

7. <span data-ttu-id="c9a04-134">В разделе **Выбор модели развертывания** выберите **Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-134">Under **Select a deployment model**, verify that **Resource Manager** is selected.</span></span> <span data-ttu-id="c9a04-135">Для новых виртуальных машин рекомендуется использовать модель развертывания Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="c9a04-135">Resource Manager is the recommended deployment model for new virtual machines.</span></span> <span data-ttu-id="c9a04-136">Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-136">Click **Create**.</span></span>

    ![Создание виртуальной машины SQL с помощью Resource Manager](./media/virtual-machines-windows-portal-sql-server-provision/azure-compute-sql-deployment-model.png)

## <a name="configure-the-vm"></a><span data-ttu-id="c9a04-138">Настройка виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="c9a04-138">Configure the VM</span></span>
<span data-ttu-id="c9a04-139">Есть пять колонок для настройки виртуальной машины SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-139">There are five blades for configuring a SQL Server virtual machine.</span></span>

| <span data-ttu-id="c9a04-140">Шаг</span><span class="sxs-lookup"><span data-stu-id="c9a04-140">Step</span></span> | <span data-ttu-id="c9a04-141">Описание</span><span class="sxs-lookup"><span data-stu-id="c9a04-141">Description</span></span> |
| --- | --- |
| <span data-ttu-id="c9a04-142">**Основы**</span><span class="sxs-lookup"><span data-stu-id="c9a04-142">**Basics**</span></span> |[<span data-ttu-id="c9a04-143">Настройка основных параметров</span><span class="sxs-lookup"><span data-stu-id="c9a04-143">Configure basic settings</span></span>](#1-configure-basic-settings) |
| <span data-ttu-id="c9a04-144">**Размер**</span><span class="sxs-lookup"><span data-stu-id="c9a04-144">**Size**</span></span> |[<span data-ttu-id="c9a04-145">Выбор размера виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="c9a04-145">Choose virtual machine size</span></span>](#2-choose-virtual-machine-size) |
| <span data-ttu-id="c9a04-146">**Параметры**</span><span class="sxs-lookup"><span data-stu-id="c9a04-146">**Settings**</span></span> |[<span data-ttu-id="c9a04-147">Настройка дополнительных возможностей</span><span class="sxs-lookup"><span data-stu-id="c9a04-147">Configure optional features</span></span>](#3-configure-optional-features) |
| <span data-ttu-id="c9a04-148">**Параметры SQL Server**</span><span class="sxs-lookup"><span data-stu-id="c9a04-148">**SQL Server settings**</span></span> |[<span data-ttu-id="c9a04-149">Настройка параметров SQL Server</span><span class="sxs-lookup"><span data-stu-id="c9a04-149">Configure SQL server settings</span></span>](#4-configure-sql-server-settings) |
| <span data-ttu-id="c9a04-150">**Сводка**</span><span class="sxs-lookup"><span data-stu-id="c9a04-150">**Summary**</span></span> |[<span data-ttu-id="c9a04-151">Просмотр сводки.</span><span class="sxs-lookup"><span data-stu-id="c9a04-151">Review the summary</span></span>](#5-review-the-summary) |

## <a name="1-configure-basic-settings"></a><span data-ttu-id="c9a04-152">1. Настройка основных параметров.</span><span class="sxs-lookup"><span data-stu-id="c9a04-152">1. Configure basic settings</span></span>
<span data-ttu-id="c9a04-153">В колонке **Основные сведения** укажите следующую информацию.</span><span class="sxs-lookup"><span data-stu-id="c9a04-153">On the **Basics** blade, provide the following information:</span></span>

* <span data-ttu-id="c9a04-154">Введите уникальное **имя**виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-154">Enter a unique virtual machine **Name**.</span></span>
* <span data-ttu-id="c9a04-155">Укажите **имя пользователя** для учетной записи локального администратора виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-155">Specify a **User name** for the local administrator account on the VM.</span></span> <span data-ttu-id="c9a04-156">Эта учетная запись также добавляется к фиксированной серверной роли **sysadmin** SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-156">This account is also added to the SQL Server **sysadmin** fixed server role.</span></span>
* <span data-ttu-id="c9a04-157">Введите надежный **пароль**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-157">Provide a strong **Password**.</span></span>
* <span data-ttu-id="c9a04-158">Если у вас несколько подписок, проверьте, правильно ли выбрана подписка для новой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-158">If you have multiple subscriptions, verify that the subscription is correct for the new VM.</span></span>
* <span data-ttu-id="c9a04-159">В поле **Группа ресурсов** введите имя новой группы ресурсов.</span><span class="sxs-lookup"><span data-stu-id="c9a04-159">In the **Resource group** box, type a name for a new resource group.</span></span> <span data-ttu-id="c9a04-160">Кроме того, можно использовать существующую группу ресурсов, щелкнув параметр **Использовать существующую**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-160">Alternatively, to use an existing resource group click **Use existing**.</span></span> <span data-ttu-id="c9a04-161">Группа ресурсов — это коллекция связанных ресурсов в Azure (виртуальные машины, учетные записи хранения, виртуальные сети и т. д.).</span><span class="sxs-lookup"><span data-stu-id="c9a04-161">A resource group is a collection of related resources in Azure (virtual machines, storage accounts, virtual networks, etc.).</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="c9a04-162">Рекомендуется использовать новую группу ресурсов для тестирования или изучения процесса развертывания SQL Server в Azure.</span><span class="sxs-lookup"><span data-stu-id="c9a04-162">Using a new resource group is helpful if you are just testing or learning about SQL Server deployments in Azure.</span></span> <span data-ttu-id="c9a04-163">После завершения теста удалите группу ресурсов, чтобы автоматически удалить виртуальную машину и все ресурсы, связанные с этой группой ресурсов.</span><span class="sxs-lookup"><span data-stu-id="c9a04-163">After you finish with your test, delete the resource group to automatically delete the VM and all resources associated with that resource group.</span></span> <span data-ttu-id="c9a04-164">Дополнительные сведения о группах ресурсов см. в статье [Общие сведения об Azure Resource Manager](../../../azure-resource-manager/resource-group-overview.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-164">For more information about resource groups, see [Azure Resource Manager Overview](../../../azure-resource-manager/resource-group-overview.md).</span></span>
  > 
  > 
* <span data-ttu-id="c9a04-165">Выберите **расположение** для развертывания.</span><span class="sxs-lookup"><span data-stu-id="c9a04-165">Select a **Location** for this deployment.</span></span>
* <span data-ttu-id="c9a04-166">Нажмите кнопку **ОК** , чтобы сохранить настройки.</span><span class="sxs-lookup"><span data-stu-id="c9a04-166">Click **OK** to save the settings.</span></span>
  
    ![Колонка "Основные" в SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-basic.png)

## <a name="2-choose-virtual-machine-size"></a><span data-ttu-id="c9a04-168">2) Выбор размера виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-168">2. Choose virtual machine size</span></span>
<span data-ttu-id="c9a04-169">Чтобы изменить **размер** виртуальной машины, выберите нужное значение в колонке **Выбор размера**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-169">On the **Size** step, choose a virtual machine size in the **Choose a size** blade.</span></span> <span data-ttu-id="c9a04-170">В колонке изначально отображаются рекомендуемые размеры виртуальных машин в зависимости от выбранного образа.</span><span class="sxs-lookup"><span data-stu-id="c9a04-170">The blade initially displays recommended machine sizes based on the image you selected.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c9a04-171">В расчетную ежемесячную стоимость, указанную в колонке **Выбор размера**, не включена стоимость лицензирования SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-171">The estimated monthly cost displayed on the **Choose a size** blade does not include SQL Server licensing costs.</span></span> <span data-ttu-id="c9a04-172">Это расчетная ежемесячная стоимость виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-172">This estimated monthly cost is the cost of the VM alone.</span></span> <span data-ttu-id="c9a04-173">Для выпусков SQL Server Express и Developer указана итоговая расчетная стоимость.</span><span class="sxs-lookup"><span data-stu-id="c9a04-173">For the Express and Developer editions of SQL Server, this is the total estimated cost.</span></span> <span data-ttu-id="c9a04-174">Получить сведения о других выпусках можно на странице [цен на виртуальные машины Windows](https://azure.microsoft.com/pricing/details/virtual-machines/windows/), где вы можете выбрать целевой выпуск SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-174">For other editions, see the [Windows Virtual Machines pricing page](https://azure.microsoft.com/pricing/details/virtual-machines/windows/) and select your target edition of SQL Server.</span></span> <span data-ttu-id="c9a04-175">См. также [руководство по выбору ценовой категории для виртуальных машин Azure SQL Server](virtual-machines-windows-sql-server-pricing-guidance.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-175">Also see the [Pricing guidance for SQL Server Azure VMs](virtual-machines-windows-sql-server-pricing-guidance.md).</span></span>

![Варианты размеров виртуальной машины SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-vm-choose-a-size.png)

<span data-ttu-id="c9a04-177">Для рабочих нагрузок рекомендуется выбрать размер виртуальной машины, который поддерживает [хранилище класса Premium](../../../storage/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-177">For production workloads, we recommend selecting a virtual machine size that supports [Premium Storage](../../../storage/storage-premium-storage.md).</span></span> <span data-ttu-id="c9a04-178">Если этот уровень производительности не требуется, нажмите кнопку **Просмотреть все** , чтобы просмотреть все доступные размеры машин.</span><span class="sxs-lookup"><span data-stu-id="c9a04-178">If you do not require that level of performance, use the **View all** button, which shows all machine size options.</span></span> <span data-ttu-id="c9a04-179">Например, для среды разработки и тестирования можно использовать виртуальную машину меньшего размера.</span><span class="sxs-lookup"><span data-stu-id="c9a04-179">For example, you might use a smaller machine size for a development or test environment.</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-180">Дополнительные сведения о размерах виртуальных машин см. в [этой статье](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c9a04-180">For more information about virtual machine sizes, [Sizes for virtual machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="c9a04-181">Описание размеров виртуальных машин SQL Server см. в статье [Рекомендации по оптимизации производительности SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-181">For considerations about SQL Server VM sizes, see [Performance best practices for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-performance.md).</span></span>

<span data-ttu-id="c9a04-182">Укажите размер машины и нажмите кнопку **Выбрать**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-182">Choose your machine size, and then click **Select**.</span></span>

## <a name="3-configure-optional-features"></a><span data-ttu-id="c9a04-183">3. Настройка дополнительных возможностей</span><span class="sxs-lookup"><span data-stu-id="c9a04-183">3. Configure optional features</span></span>
<span data-ttu-id="c9a04-184">В колонке **Параметры** настройте для виртуальной машины параметры службы хранилища Azure, сети и мониторинга.</span><span class="sxs-lookup"><span data-stu-id="c9a04-184">On the **Settings** blade, configure Azure storage, networking, and monitoring for the virtual machine.</span></span>

* <span data-ttu-id="c9a04-185">В разделе **Хранилище** укажите значение в поле **Тип диска**: Standard или Premium (SSD).</span><span class="sxs-lookup"><span data-stu-id="c9a04-185">Under **Storage**, specify a **Disk type** of either Standard or Premium (SSD).</span></span> <span data-ttu-id="c9a04-186">Для производственных рабочих нагрузок рекомендуется хранилище класса Premium.</span><span class="sxs-lookup"><span data-stu-id="c9a04-186">Premium storage is recommended for production workloads.</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-187">Если выбрать тип диска Премиум (SSD) для размера виртуальной машины, в котором не поддерживается хранилище класса Premium, размер ВМ будет изменен автоматически.</span><span class="sxs-lookup"><span data-stu-id="c9a04-187">If you select Premium (SSD) for a machine size that does not support Premium Storage, your machine size changes automatically.</span></span>  
> 
> 

* <span data-ttu-id="c9a04-188">В разделе **Учетная запись хранения** вы можете принять автоматически подготовленное имя учетной записи хранения.</span><span class="sxs-lookup"><span data-stu-id="c9a04-188">Under **Storage account**, you can accept the automatically provisioned storage account name.</span></span> <span data-ttu-id="c9a04-189">Также можно щелкнуть пункт **Учетная запись хранения**, чтобы выбрать существующую учетную запись и настроить ее тип.</span><span class="sxs-lookup"><span data-stu-id="c9a04-189">You can also click on **Storage account** to choose an existing account and configure the storage account type.</span></span> <span data-ttu-id="c9a04-190">По умолчанию Azure создает новую учетную запись хранения с локально избыточным хранилищем.</span><span class="sxs-lookup"><span data-stu-id="c9a04-190">By default, Azure creates a new storage account with locally redundant storage.</span></span> <span data-ttu-id="c9a04-191">Дополнительные сведения о вариантах хранилища см. в статье [Репликация службы хранилища Azure](../../../storage/storage-redundancy.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-191">For more information about storage options, see [Azure Storage replication](../../../storage/storage-redundancy.md).</span></span>
* <span data-ttu-id="c9a04-192">В разделе **Сеть**вы можете принять автоматически заполненные значения.</span><span class="sxs-lookup"><span data-stu-id="c9a04-192">Under **Network**, you can accept the automatically populated values.</span></span> <span data-ttu-id="c9a04-193">Можно также щелкнуть каждый компонент, чтобы вручную настроить **виртуальную сеть**, **подсеть**, **общедоступный IP-адрес** и **группу безопасности сети**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-193">You can also click on each feature to manually configure the **Virtual network**, **Subnet**, **Public IP address**, and **Network Security Group**.</span></span> <span data-ttu-id="c9a04-194">В рамках этого руководства можно использовать значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c9a04-194">For the purposes of this tutorial, keep the default values.</span></span>
* <span data-ttu-id="c9a04-195">Azure по умолчанию включает **мониторинг** в учетной записи хранения, которая будет использоваться для виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-195">Azure enables **Monitoring** by default with the same storage account designated for the VM.</span></span> <span data-ttu-id="c9a04-196">Эти параметры можно изменить.</span><span class="sxs-lookup"><span data-stu-id="c9a04-196">You can change these settings here.</span></span>
* <span data-ttu-id="c9a04-197">В поле **Группа доступности** укажите группу доступности.</span><span class="sxs-lookup"><span data-stu-id="c9a04-197">Under **Availability set**, specify an availability set.</span></span> <span data-ttu-id="c9a04-198">В рамках этого руководства можно выбрать значение **Нет**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-198">For the purposes of this tutorial, you can select **none**.</span></span> <span data-ttu-id="c9a04-199">Если вы планируете настроить группы доступности AlwaysOn SQL, настройте доступность, чтобы не создавать виртуальную машину повторно.</span><span class="sxs-lookup"><span data-stu-id="c9a04-199">If you plan to set up SQL AlwaysOn Availability Groups, configure the availability to avoid recreating the virtual machine.</span></span>  <span data-ttu-id="c9a04-200">Дополнительные сведения см. в статье [Управление доступностью виртуальных машин](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="c9a04-200">For more information, see [Manage the Availability of Virtual Machines](../manage-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

<span data-ttu-id="c9a04-201">Завершив настройку параметров, нажмите кнопку **OК**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-201">When you are done configuring these settings, click **OK**.</span></span>

## <a name="4-configure-sql-server-settings"></a><span data-ttu-id="c9a04-202">4. Настройка параметров SQL Server</span><span class="sxs-lookup"><span data-stu-id="c9a04-202">4. Configure SQL server settings</span></span>
<span data-ttu-id="c9a04-203">В колонке **Настройки SQL Server** укажите нужные параметры и настройте оптимизацию для SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-203">On the **SQL Server settings** blade, configure specific settings and optimizations for SQL Server.</span></span> <span data-ttu-id="c9a04-204">Для SQL Server можно настроить следующие параметры.</span><span class="sxs-lookup"><span data-stu-id="c9a04-204">The settings that you can configure for SQL Server include the following settings.</span></span>

| <span data-ttu-id="c9a04-205">Настройка</span><span class="sxs-lookup"><span data-stu-id="c9a04-205">Setting</span></span> |
| --- |
| [<span data-ttu-id="c9a04-206">Соединение</span><span class="sxs-lookup"><span data-stu-id="c9a04-206">Connectivity</span></span>](#connectivity) |
| [<span data-ttu-id="c9a04-207">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="c9a04-207">Authentication</span></span>](#authentication) |
| [<span data-ttu-id="c9a04-208">Конфигурация хранилища</span><span class="sxs-lookup"><span data-stu-id="c9a04-208">Storage configuration</span></span>](#storage-configuration) |
| [<span data-ttu-id="c9a04-209">Автоматическое исправление</span><span class="sxs-lookup"><span data-stu-id="c9a04-209">Automated Patching</span></span>](#automated-patching) |
| [<span data-ttu-id="c9a04-210">Автоматическая архивация</span><span class="sxs-lookup"><span data-stu-id="c9a04-210">Automated Backup</span></span>](#automated-backup) |
| [<span data-ttu-id="c9a04-211">Интеграция с хранилищем ключей Azure</span><span class="sxs-lookup"><span data-stu-id="c9a04-211">Azure Key Vault Integration</span></span>](#azure-key-vault-integration) |
| [<span data-ttu-id="c9a04-212">Службы R</span><span class="sxs-lookup"><span data-stu-id="c9a04-212">R Services</span></span>](#r-services) |

### <a name="connectivity"></a><span data-ttu-id="c9a04-213">Соединение</span><span class="sxs-lookup"><span data-stu-id="c9a04-213">Connectivity</span></span>
<span data-ttu-id="c9a04-214">В разделе **Подключение SQL**укажите необходимый тип доступа к экземпляру SQL Server на этой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="c9a04-214">Under **SQL connectivity**, specify the type of access you want to the SQL Server instance on this VM.</span></span> <span data-ttu-id="c9a04-215">В рамках этого руководства выберите пункт **Общедоступное (в Интернете)** для подключения к SQL Server с компьютеров или из служб в Интернете.</span><span class="sxs-lookup"><span data-stu-id="c9a04-215">For the purposes of this tutorial, select **Public (internet)** to allow connections to SQL Server from machines or services on the internet.</span></span> <span data-ttu-id="c9a04-216">Если этот параметр выбран, Azure автоматически настраивает брандмауэр и группу безопасности сети, чтобы разрешить трафик через порт 1433.</span><span class="sxs-lookup"><span data-stu-id="c9a04-216">With this option selected, Azure automatically configures the firewall and the network security group to allow traffic on port 1433.</span></span>  

![Варианты подключений SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-arm-connectivity-alt.png)

<span data-ttu-id="c9a04-218">Чтобы подключиться к SQL Server через Интернет, также необходимо включить проверку подлинности SQL Server, как описано в следующем разделе.</span><span class="sxs-lookup"><span data-stu-id="c9a04-218">To connect to SQL Server via the internet, you also must enable SQL Server Authentication, which is described in the next section.</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-219">Можно добавить дополнительные ограничения для сетевых подключений к виртуальной машине SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-219">It is possible to add more restrictions for the network communications to your SQL Server VM.</span></span> <span data-ttu-id="c9a04-220">Для этого после создания виртуальной машины необходимо изменить группу безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="c9a04-220">You can add more restrictions by editing the Network Security Group after the VM is created.</span></span> <span data-ttu-id="c9a04-221">Дополнительные сведения см. в статье [Группа безопасности сети](../../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-221">For more information, see [What is a Network Security Group (NSG)?](../../../virtual-network/virtual-networks-nsg.md)</span></span>
> 
> 

<span data-ttu-id="c9a04-222">Если вы не хотите включать подключения к ядру СУБД через Интернет, выберите один из следующих вариантов:</span><span class="sxs-lookup"><span data-stu-id="c9a04-222">If you would prefer to not enable connections to the Database Engine via the internet, choose one of the following options:</span></span>

* <span data-ttu-id="c9a04-223">**Локальное (только в виртуальной машине)** — для подключения к SQL Server только в пределах самой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-223">**Local (inside VM only)** to allow connections to SQL Server only from within the VM.</span></span>
* <span data-ttu-id="c9a04-224">**Частное (в виртуальной сети)** — для подключения к SQL Server с машин или из служб в той же виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="c9a04-224">**Private (within Virtual Network)** to allow connections to SQL Server from machines or services in the same virtual network.</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-225">Образ виртуальной машины выпуска SQL Server Express не включает протокол TCP/IP автоматически,</span><span class="sxs-lookup"><span data-stu-id="c9a04-225">The virtual machine image for SQL Server Express edition does not automatically enable the TCP/IP protocol.</span></span> <span data-ttu-id="c9a04-226">даже если выбрано общедоступное и частное подключение.</span><span class="sxs-lookup"><span data-stu-id="c9a04-226">This is true even for the Public and  Private connectivity options.</span></span> <span data-ttu-id="c9a04-227">Для выпуска Express необходимо [включить протокол TCP/IP вручную](#configure-sql-server-to-listen-on-the-tcp-protocol) в диспетчере конфигурации SQL Server после создания виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-227">For Express edition, you must use SQL Server Configuration Manager to [manually enable the TCP/IP protocol](#configure-sql-server-to-listen-on-the-tcp-protocol) after creating the VM.</span></span>
> 
> 

<span data-ttu-id="c9a04-228">Как правило, чтобы повысить уровень безопасности, необходимо выбрать наиболее подходящий тип подключения для выполнения вашего сценария.</span><span class="sxs-lookup"><span data-stu-id="c9a04-228">In general, improve security by choosing the most restrictive connectivity that your scenario allows.</span></span> <span data-ttu-id="c9a04-229">Но все параметры можно защитить с помощью правил группы безопасности сети и проверки подлинности Windows или SQL.</span><span class="sxs-lookup"><span data-stu-id="c9a04-229">But all the options are securable through Network Security Group rules and SQL/Windows Authentication.</span></span>

<span data-ttu-id="c9a04-230">Значение **порта** по умолчанию — 1433.</span><span class="sxs-lookup"><span data-stu-id="c9a04-230">**Port** defaults to 1433.</span></span> <span data-ttu-id="c9a04-231">Вы можете указать другой номер порта.</span><span class="sxs-lookup"><span data-stu-id="c9a04-231">You can specify a different port number.</span></span>
<span data-ttu-id="c9a04-232">Дополнительные сведения см. в статье [Подключение к виртуальной машине SQL Server в Azure (Resource Manager) | Microsoft Azure](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-232">For more information, see [Connect to a SQL Server Virtual Machine (Resource Manager) | Microsoft Azure](virtual-machines-windows-sql-connect.md).</span></span>

### <a name="authentication"></a><span data-ttu-id="c9a04-233">Аутентификация</span><span class="sxs-lookup"><span data-stu-id="c9a04-233">Authentication</span></span>
<span data-ttu-id="c9a04-234">Если требуется проверка подлинности SQL Server, выберите для параметра **Включить** under **Включить**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-234">If you require SQL Server Authentication, click **Enable** under **SQL authentication**.</span></span>

![проверка подлинности SQL Server](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-arm-authentication.png)

> [!NOTE]
> <span data-ttu-id="c9a04-236">Если вы планируете предоставить доступ к SQL Server через Интернет (то есть включаете параметр общедоступного подключения), включите проверку подлинности SQL здесь.</span><span class="sxs-lookup"><span data-stu-id="c9a04-236">If you plan to access SQL Server over the internet (that is, the Public connectivity option), you must enable SQL authentication here.</span></span> <span data-ttu-id="c9a04-237">Для общего доступа к SQL Server необходимо использовать проверку подлинности SQL.</span><span class="sxs-lookup"><span data-stu-id="c9a04-237">Public access to the SQL Server requires the use of SQL Authentication.</span></span>
> 
> 

<span data-ttu-id="c9a04-238">Если вы включаете проверку подлинности SQL Server, укажите **имя для входа** и **пароль**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-238">If you enable SQL Server Authentication, specify a **Login name** and **Password**.</span></span> <span data-ttu-id="c9a04-239">Это имя пользователя настраивается в качестве имени для входа во время проверки подлинности SQL Server и имени участника фиксированной серверной роли **sysadmin**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-239">This user name is configured as a SQL Server Authentication login and member of the **sysadmin** fixed server role.</span></span> <span data-ttu-id="c9a04-240">Дополнительные сведения о режимах проверки подлинности см. в [этой статье](http://msdn.microsoft.com/library/ms144284.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9a04-240">For more information about Authentication Modes, see [Choose an Authentication Mode](http://msdn.microsoft.com/library/ms144284.aspx).</span></span>

<span data-ttu-id="c9a04-241">Если проверка подлинности SQL Server не включена, подключиться к экземпляру SQL Server можно с помощью локальной учетной записи администратора на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="c9a04-241">If you do not enable SQL Server Authentication, then you can use the local Administrator account on the VM to connect to the SQL Server instance.</span></span>

### <a name="storage-configuration"></a><span data-ttu-id="c9a04-242">Конфигурация хранилища</span><span class="sxs-lookup"><span data-stu-id="c9a04-242">Storage configuration</span></span>
<span data-ttu-id="c9a04-243">Щелкните **Конфигурация хранилища** , чтобы указать требования к хранилищу.</span><span class="sxs-lookup"><span data-stu-id="c9a04-243">Click **Storage configuration** to specify the storage requirements.</span></span>

![Конфигурация хранилища SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-arm-storage.png)

> [!NOTE]
> <span data-ttu-id="c9a04-245">Этот параметр недоступен при выборе стандартного хранилища.</span><span class="sxs-lookup"><span data-stu-id="c9a04-245">If you select Standard storage, this option is not available.</span></span> <span data-ttu-id="c9a04-246">Автоматическая оптимизация доступна только для хранилища класса Premium.</span><span class="sxs-lookup"><span data-stu-id="c9a04-246">Automatic storage optimization is available only for Premium Storage.</span></span>
> 
> 

<span data-ttu-id="c9a04-247">Вы можете указать такие требования, как количество операций ввода-вывода в секунду (IOPs), пропускная способность в МБ/с и общий размер хранилища.</span><span class="sxs-lookup"><span data-stu-id="c9a04-247">You can specify requirements as input/output operations per second (IOPs), throughput in MB/s, and total storage size.</span></span> <span data-ttu-id="c9a04-248">Настройте эти значения на скользящих шкалах.</span><span class="sxs-lookup"><span data-stu-id="c9a04-248">Configure these values by using the sliding scales.</span></span> <span data-ttu-id="c9a04-249">Портал автоматически вычисляет количество дисков на основании этих требований.</span><span class="sxs-lookup"><span data-stu-id="c9a04-249">The portal automatically calculates the number of disks based on these requirements.</span></span>

<span data-ttu-id="c9a04-250">По умолчанию Azure оптимизирует хранилище для 5000 операций ввода-вывода, 200 МБ/с и 1 ТБ дискового пространства.</span><span class="sxs-lookup"><span data-stu-id="c9a04-250">By default, Azure optimizes the storage for 5000 IOPs, 200 MBs, and 1 TB of storage space.</span></span> <span data-ttu-id="c9a04-251">Вы можете изменить эти параметры хранилища в зависимости от рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="c9a04-251">You can change these storage settings based on workload.</span></span> <span data-ttu-id="c9a04-252">В разделе **Storage optimized for**(Оптимизация хранилища) выберите один из следующих вариантов.</span><span class="sxs-lookup"><span data-stu-id="c9a04-252">Under **Storage optimized for**, select one of the following options:</span></span>

* <span data-ttu-id="c9a04-253">**Общая** — это значение по умолчанию, которое поддерживает большинство рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="c9a04-253">**General** is the default setting and supports most workloads.</span></span>
* <span data-ttu-id="c9a04-254">**Транзакционная** обработка оптимизирует хранилище для рабочих нагрузок OLTP в традиционных базах данных.</span><span class="sxs-lookup"><span data-stu-id="c9a04-254">**Transactional** processing optimizes the storage for traditional database OLTP workloads.</span></span>
* <span data-ttu-id="c9a04-255">**Хранилище данных** оптимизирует хранилище для рабочих нагрузок аналитики и отчетов.</span><span class="sxs-lookup"><span data-stu-id="c9a04-255">**Data warehousing** optimizes the storage for analytic and reporting workloads.</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-256">Ограничения, указанные с помощью ползунков, зависят от размера виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-256">The upper limits on the sliders vary depending on your selected virtual machine size.</span></span>
> 
> 

### <a name="automated-patching"></a><span data-ttu-id="c9a04-257">Автоматическое исправление</span><span class="sxs-lookup"><span data-stu-id="c9a04-257">Automated patching</span></span>
<span data-ttu-id="c9a04-258">**Automated patching** включен по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c9a04-258">**Automated patching** is enabled by default.</span></span> <span data-ttu-id="c9a04-259">Автоматическая установка исправлений позволяет Azure автоматически исправлять SQL Server и операционную систему.</span><span class="sxs-lookup"><span data-stu-id="c9a04-259">Automated patching allows Azure to automatically patch SQL Server and the operating system.</span></span> <span data-ttu-id="c9a04-260">Укажите день недели, время и длительность периода обслуживания.</span><span class="sxs-lookup"><span data-stu-id="c9a04-260">Specify a day of the week, time, and duration for a maintenance window.</span></span> <span data-ttu-id="c9a04-261">Azure устанавливает исправления в период обслуживания.</span><span class="sxs-lookup"><span data-stu-id="c9a04-261">Azure performs patching in this maintenance window.</span></span> <span data-ttu-id="c9a04-262">Расписание периода обслуживания использует для определения времени региональные параметры VM.</span><span class="sxs-lookup"><span data-stu-id="c9a04-262">The maintenance window schedule uses the VM locale for time.</span></span> <span data-ttu-id="c9a04-263">Если вы не хотите, чтобы платформа Azure автоматически устанавливала исправления для SQL Server и операционной системы, выберите вариант **Отключить**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-263">If you do not want Azure to automatically patch SQL Server and the operating system, click **Disable**.</span></span>  

![Автоматическая установка исправлений SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-arm-patching.png)

<span data-ttu-id="c9a04-265">Дополнительные сведения см. в статье [Автоматическая установка исправлений SQL Server на виртуальных машинах Azure (Resource Manager)](virtual-machines-windows-sql-automated-patching.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-265">For more information, see [Automated Patching for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-patching.md).</span></span>

### <a name="automated-backup"></a><span data-ttu-id="c9a04-266">Автоматическая архивация</span><span class="sxs-lookup"><span data-stu-id="c9a04-266">Automated backup</span></span>
<span data-ttu-id="c9a04-267">Включите автоматическую архивацию для всех баз данных в разделе **Автоматическая архивация**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-267">Enable automatic database backups for all databases under **Automated backup**.</span></span> <span data-ttu-id="c9a04-268">По умолчанию автоматическая архивация отключена.</span><span class="sxs-lookup"><span data-stu-id="c9a04-268">Automated backup is disabled by default.</span></span>

<span data-ttu-id="c9a04-269">Во время включения автоматического резервного копирования SQL можно настроить следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="c9a04-269">When you enable SQL automated backup, you can configure the following settings:</span></span>

* <span data-ttu-id="c9a04-270">срок хранения (в днях) для резервных копий;</span><span class="sxs-lookup"><span data-stu-id="c9a04-270">Retention period (days) for backups</span></span>
* <span data-ttu-id="c9a04-271">учетная запись хранения, используемая для резервных копий;</span><span class="sxs-lookup"><span data-stu-id="c9a04-271">Storage account to use for backups</span></span>
* <span data-ttu-id="c9a04-272">параметр шифрования и пароль для резервных копий.</span><span class="sxs-lookup"><span data-stu-id="c9a04-272">Encryption option and password for backups</span></span>
* <span data-ttu-id="c9a04-273">архивация системных баз данных;</span><span class="sxs-lookup"><span data-stu-id="c9a04-273">Backup system databases</span></span>
* <span data-ttu-id="c9a04-274">настройка расписания архивации баз данных.</span><span class="sxs-lookup"><span data-stu-id="c9a04-274">Configure backup schedule</span></span>

<span data-ttu-id="c9a04-275">Для шифрования резервной копии щелкните **Включить**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-275">To encrypt the backup, click **Enable**.</span></span> <span data-ttu-id="c9a04-276">Затем введите **пароль**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-276">Then specify the **Password**.</span></span> <span data-ttu-id="c9a04-277">Azure создает сертификат для шифрования резервных копий и использует указанный пароль для защиты этого сертификата.</span><span class="sxs-lookup"><span data-stu-id="c9a04-277">Azure creates a certificate to encrypt the backups and uses the specified password to protect that certificate.</span></span>

![Автоматическая архивация SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-arm-autobackup2.png)

 <span data-ttu-id="c9a04-279">Дополнительную информацию см. в статье [Автоматическая архивация SQL Server на виртуальных машинах Azure (Resource Manager)](virtual-machines-windows-sql-automated-backup.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-279">For more information, see [Automated Backup for SQL Server in Azure Virtual Machines](virtual-machines-windows-sql-automated-backup.md).</span></span>

### <a name="azure-key-vault-integration"></a><span data-ttu-id="c9a04-280">Интеграция с хранилищем ключей Azure</span><span class="sxs-lookup"><span data-stu-id="c9a04-280">Azure Key Vault integration</span></span>
<span data-ttu-id="c9a04-281">Чтобы хранить в Azure секреты безопасности для шифрования, щелкните **Интеграция хранилища ключей Azure** и выберите значение **Включить**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-281">To store security secrets in Azure for encryption, click **Azure key vault integration** and click **Enable**.</span></span>

![Интеграция SQL с хранилищем ключей Azure](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-arm-akv.png)

<span data-ttu-id="c9a04-283">В следующей таблице перечислены параметры, необходимые для настройки интеграции с хранилищем ключей Azure.</span><span class="sxs-lookup"><span data-stu-id="c9a04-283">The following table lists the parameters required to configure Azure Key Vault Integration.</span></span>

| <span data-ttu-id="c9a04-284">ПАРАМЕТР</span><span class="sxs-lookup"><span data-stu-id="c9a04-284">PARAMETER</span></span> | <span data-ttu-id="c9a04-285">Описание</span><span class="sxs-lookup"><span data-stu-id="c9a04-285">DESCRIPTION</span></span> | <span data-ttu-id="c9a04-286">ПРИМЕР</span><span class="sxs-lookup"><span data-stu-id="c9a04-286">EXAMPLE</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c9a04-287">**URL-адрес хранилища ключей**</span><span class="sxs-lookup"><span data-stu-id="c9a04-287">**Key Vault URL**</span></span> |<span data-ttu-id="c9a04-288">Расположение хранилища ключей.</span><span class="sxs-lookup"><span data-stu-id="c9a04-288">The location of the key vault.</span></span> |<span data-ttu-id="c9a04-289">https://contosokeyvault.vault.azure.net/</span><span class="sxs-lookup"><span data-stu-id="c9a04-289">https://contosokeyvault.vault.azure.net/</span></span> |
| <span data-ttu-id="c9a04-290">**Имя субъекта**</span><span class="sxs-lookup"><span data-stu-id="c9a04-290">**Principal name**</span></span> |<span data-ttu-id="c9a04-291">Имя субъекта-службы Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c9a04-291">Azure Active Directory service principal name.</span></span> <span data-ttu-id="c9a04-292">Этот имя также называется идентификатором клиента.</span><span class="sxs-lookup"><span data-stu-id="c9a04-292">This name is also referred to as the Client ID.</span></span> |<span data-ttu-id="c9a04-293">fde2b411-33d5-4e11-af04eb07b669ccf2</span><span class="sxs-lookup"><span data-stu-id="c9a04-293">fde2b411-33d5-4e11-af04eb07b669ccf2</span></span> |
| <span data-ttu-id="c9a04-294">**Секрет субъекта**</span><span class="sxs-lookup"><span data-stu-id="c9a04-294">**Principal secret**</span></span> |<span data-ttu-id="c9a04-295">Секрет субъекта-службы Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c9a04-295">Azure Active Directory service principal secret.</span></span> <span data-ttu-id="c9a04-296">Этот секрет также называется секретом клиента.</span><span class="sxs-lookup"><span data-stu-id="c9a04-296">This secret is also referred to as the Client Secret.</span></span> |<span data-ttu-id="c9a04-297">9VTJSQwzlFepD8XODnzy8n2V01Jd8dAjwm/azF1XDKM=</span><span class="sxs-lookup"><span data-stu-id="c9a04-297">9VTJSQwzlFepD8XODnzy8n2V01Jd8dAjwm/azF1XDKM=</span></span> |
| <span data-ttu-id="c9a04-298">**Имя учетных данных**</span><span class="sxs-lookup"><span data-stu-id="c9a04-298">**Credential name**</span></span> |<span data-ttu-id="c9a04-299">**Учетное имя**: интеграция AKV создает учетные данные в рамках SQL Server, позволяя виртуальной машине иметь доступ к хранилищу ключей.</span><span class="sxs-lookup"><span data-stu-id="c9a04-299">**Credential name**: AKV Integration creates a credential within SQL Server, allowing the VM to have access to the key vault.</span></span> <span data-ttu-id="c9a04-300">Выберите имя для этих учетных данных.</span><span class="sxs-lookup"><span data-stu-id="c9a04-300">Choose a name for this credential.</span></span> |<span data-ttu-id="c9a04-301">mycred1</span><span class="sxs-lookup"><span data-stu-id="c9a04-301">mycred1</span></span> |

<span data-ttu-id="c9a04-302">Дополнительные сведения см. в статье [Настройка интеграции хранилища ключей Azure для SQL Server на виртуальных машинах Azure (Resource Manager)](virtual-machines-windows-ps-sql-keyvault.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-302">For more information, see [Configure Azure Key Vault Integration for SQL Server on Azure VMs](virtual-machines-windows-ps-sql-keyvault.md).</span></span>

<span data-ttu-id="c9a04-303">Настроив параметры SQL Server, нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-303">When you are finished configuring SQL Server settings, click **OK**.</span></span>

### <a name="r-services"></a><span data-ttu-id="c9a04-304">Службы R</span><span class="sxs-lookup"><span data-stu-id="c9a04-304">R services</span></span>
<span data-ttu-id="c9a04-305">Вы можете включить [службы R SQL Server](https://msdn.microsoft.com/library/mt604845.aspx).</span><span class="sxs-lookup"><span data-stu-id="c9a04-305">You can enable [SQL Server R Services](https://msdn.microsoft.com/library/mt604845.aspx).</span></span> <span data-ttu-id="c9a04-306">Службы R SQL Server позволяют вам использовать расширенные средства аналитики в SQL Server 2016.</span><span class="sxs-lookup"><span data-stu-id="c9a04-306">SQL Server R Services enables you to use advanced analytics with SQL Server 2016.</span></span> <span data-ttu-id="c9a04-307">Щелкните **Включить** on the **SQL Server Settings** .</span><span class="sxs-lookup"><span data-stu-id="c9a04-307">Click **Enable** on the **SQL Server Settings** blade.</span></span>

![Включение служб R SQL Server](./media/virtual-machines-windows-portal-sql-server-provision/azure-vm-sql-server-r-services.png)


## <a name="5-review-the-summary"></a><span data-ttu-id="c9a04-309">5. Просмотр сводки.</span><span class="sxs-lookup"><span data-stu-id="c9a04-309">5. Review the summary</span></span>
<span data-ttu-id="c9a04-310">В колонке **Сводка** просмотрите сводные данные и нажмите кнопку **ОК**, чтобы создать SQL Server, группу ресурсов и ресурсы, указанные для этой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-310">On the **Summary** blade, review the summary and click **OK** to create SQL Server, resource group, and resources specified for this VM.</span></span>

<span data-ttu-id="c9a04-311">Развертывание можно отслеживать на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="c9a04-311">You can monitor the deployment from the azure portal.</span></span> <span data-ttu-id="c9a04-312">Если нажать кнопку **Уведомления** в верхней части окна, будут показаны основные сведения о состоянии развертывания.</span><span class="sxs-lookup"><span data-stu-id="c9a04-312">The **Notifications** button at the top of the screen shows basic status of the deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-313">Чтобы предоставить вам сведения о времени, необходимом для выполнения развертывания, в нашем сценарии виртуальная машина SQL была развернута в восточной части США с параметрами по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="c9a04-313">To provide you with an idea on deployment times, I deployed a SQL VM to the East US region with default settings.</span></span> <span data-ttu-id="c9a04-314">На выполнение тестового развертывания понадобилось 26 минут.</span><span class="sxs-lookup"><span data-stu-id="c9a04-314">This test deployment took a total of 26 minutes to complete.</span></span> <span data-ttu-id="c9a04-315">Время развертывания зависит от региона и выбранных параметров.</span><span class="sxs-lookup"><span data-stu-id="c9a04-315">But you might experience a faster or slower deployment time based on your region and selected settings.</span></span>
> 
> 

## <a name="open-the-vm-with-remote-desktop"></a><span data-ttu-id="c9a04-316">открывать виртуальные машины с помощью удаленного рабочего стола;</span><span class="sxs-lookup"><span data-stu-id="c9a04-316">Open the VM with Remote Desktop</span></span>
<span data-ttu-id="c9a04-317">Выполните следующие действия, чтобы подключиться к виртуальной машине через удаленный рабочий стол.</span><span class="sxs-lookup"><span data-stu-id="c9a04-317">Use the following steps to connect to the virtual machine with Remote Desktop:</span></span>

1. <span data-ttu-id="c9a04-318">После создания виртуальной машины Azure на панели мониторинга Azure отобразится значок виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-318">After the Azure VM is built, the icon for the VM appears on your Azure dashboard.</span></span> <span data-ttu-id="c9a04-319">Его также можно найти, открыв список существующих виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="c9a04-319">You can also find it by browsing your existing virtual machines.</span></span> <span data-ttu-id="c9a04-320">Щелкните имя новой виртуальной машины SQL.</span><span class="sxs-lookup"><span data-stu-id="c9a04-320">Click on your new SQL virtual machine.</span></span> <span data-ttu-id="c9a04-321">В колонке **Виртуальная машина** отобразятся сведения о виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="c9a04-321">A **Virtual machine** blade displays your virtual machine details.</span></span>
2. <span data-ttu-id="c9a04-322">В верхней части колонки **Виртуальная машина** нажмите кнопку **Подключиться**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-322">At the top of the **Virtual machine** blade, click **Connect**.</span></span>
3. <span data-ttu-id="c9a04-323">Браузер загрузит RDP-файл для ВМ.</span><span class="sxs-lookup"><span data-stu-id="c9a04-323">The browser downloads an RDP file for the VM.</span></span> <span data-ttu-id="c9a04-324">Откройте RDP-файл.</span><span class="sxs-lookup"><span data-stu-id="c9a04-324">Open the RDP file.</span></span>
    <span data-ttu-id="c9a04-325">![Подключение удаленного рабочего стола к виртуальной машине SQL](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-vm-remote-desktop.png)</span><span class="sxs-lookup"><span data-stu-id="c9a04-325">![Remote Desktop to SQL VM](./media/virtual-machines-windows-portal-sql-server-provision/azure-sql-vm-remote-desktop.png)</span></span>
4. <span data-ttu-id="c9a04-326">В ходе подключения к удаленному рабочему столу может появиться предупреждение о том, что издателя этого удаленного подключения невозможно определить.</span><span class="sxs-lookup"><span data-stu-id="c9a04-326">The Remote Desktop Connection notifies you that the publisher of this remote connection cannot be identified.</span></span> <span data-ttu-id="c9a04-327">Чтобы продолжить, щелкните **Подключить** .</span><span class="sxs-lookup"><span data-stu-id="c9a04-327">Click **Connect** to continue.</span></span>
5. <span data-ttu-id="c9a04-328">В диалоговом окне **Безопасность Windows** выберите **Использовать другую учетную запись**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-328">In the **Windows Security** dialog, click **Use another account**.</span></span>
6. <span data-ttu-id="c9a04-329">В поле **Имя пользователя** введите **\<имя_пользователя>**<user name>, указанное вами во время настройки виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="c9a04-329">For **User name** type **\<user name>**, where <user name> is the user name that you specified when you configured the VM.</span></span> <span data-ttu-id="c9a04-330">Перед именем необходимо добавить обратную косую черту.</span><span class="sxs-lookup"><span data-stu-id="c9a04-330">You have to add an initial backslash before the name.</span></span>
7. <span data-ttu-id="c9a04-331">Введите **пароль**, ранее настроенный для этой виртуальной машины, и нажмите кнопку **ОК**, чтобы подключиться.</span><span class="sxs-lookup"><span data-stu-id="c9a04-331">Type the **Password** that you previously configured for this VM, and then click **OK** to connect.</span></span>
8. <span data-ttu-id="c9a04-332">Если появится еще одно диалоговое окно **Подключение к удаленному рабочему столу** с запросом на подключение, нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-332">If another **Remote Desktop Connection** dialog asks you whether to connect, click **Yes**.</span></span>

<span data-ttu-id="c9a04-333">После подключения к виртуальной машине SQL Server вы можете запустить SQL Server Management Studio и подключиться с проверкой подлинности Windows, используя свои учетные данные локального администратора.</span><span class="sxs-lookup"><span data-stu-id="c9a04-333">After you connect to the SQL Server virtual machine, you can launch SQL Server Management Studio and connect with Windows Authentication using your local administrator credentials.</span></span> <span data-ttu-id="c9a04-334">Если включена проверка подлинности SQL Server, можно также подключиться с проверкой подлинности SQL, используя имя пользователя и пароль SQL, настроенные во время подготовки.</span><span class="sxs-lookup"><span data-stu-id="c9a04-334">If you enabled SQL Server Authentication, you can also connect with SQL Authentication using the SQL login and password you configured during provisioning.</span></span>

<span data-ttu-id="c9a04-335">Доступ к машине позволяет напрямую изменять настройки компьютера и SQL Server в зависимости от ваших требований.</span><span class="sxs-lookup"><span data-stu-id="c9a04-335">Access to the machine enables you to directly change machine and SQL Server settings based on your requirements.</span></span> <span data-ttu-id="c9a04-336">Например, можно настроить параметры брандмауэра или изменить параметры конфигурации SQL Server.</span><span class="sxs-lookup"><span data-stu-id="c9a04-336">For example, you could configure the firewall settings or change SQL Server configuration settings.</span></span>

## <a name="connect-to-sql-server-remotely"></a><span data-ttu-id="c9a04-337">удаленно подключаться к SQL Server;</span><span class="sxs-lookup"><span data-stu-id="c9a04-337">Connect to SQL Server remotely</span></span>
<span data-ttu-id="c9a04-338">В рамках этого руководства для виртуальной машины используется **открытый** доступ и **проверка подлинности SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="c9a04-338">In this tutorial, we selected **Public** access for the virtual machine and **SQL Server Authentication**.</span></span> <span data-ttu-id="c9a04-339">Эти параметры позволяют автоматически настроить виртуальную машину для получения доступа к экземпляру SQL Server из любого клиента через Интернет (при условии, что будет использоваться правильное имя пользователя SQL).</span><span class="sxs-lookup"><span data-stu-id="c9a04-339">These settings automatically configured the virtual machine to allow SQL Server connections from any client over the internet (assuming they have the correct SQL login).</span></span>

> [!NOTE]
> <span data-ttu-id="c9a04-340">Если вы не выбрали параметр "Общедоступное" во время подготовки, для доступа к экземпляру SQL Server через Интернет потребуется выполнить дополнительные действия.</span><span class="sxs-lookup"><span data-stu-id="c9a04-340">If you did not select Public during provisioning, then extra steps are required to access your SQL Server instance over the internet.</span></span> <span data-ttu-id="c9a04-341">Дополнительные сведения см. в статье [Подключение к виртуальной машине SQL Server в Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-341">For more information, see  [Connect to a SQL Server Virtual Machine](virtual-machines-windows-sql-connect.md).</span></span>
> 
> 

<span data-ttu-id="c9a04-342">В следующих разделах описано, как подключиться к экземпляру SQL Server на виртуальной машине с другого компьютера через Интернет.</span><span class="sxs-lookup"><span data-stu-id="c9a04-342">The following sections show how to connect to your SQL Server instance on your VM from a different computer over the internet.</span></span>

> [!INCLUDE [Connect to SQL Server in a VM Resource Manager](../../../../includes/virtual-machines-sql-server-connection-steps-resource-manager.md)]
> 
> 

## <a name="next-steps"></a><span data-ttu-id="c9a04-343">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="c9a04-343">Next Steps</span></span>
<span data-ttu-id="c9a04-344">Дополнительные сведения об использовании SQL Server в Azure см. в статье [Приступая к работе с SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-overview.md) и [Часто задаваемые вопросы об SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-faq.md).</span><span class="sxs-lookup"><span data-stu-id="c9a04-344">For other information about using SQL Server in Azure, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md) and the [Frequently Asked Questions](virtual-machines-windows-sql-server-iaas-faq.md).</span></span>

<span data-ttu-id="c9a04-345">Чтобы получить общие сведения об SQL Server на виртуальных машинах Azure, просмотрите видео [Azure VM is the best platform for SQL Server 2016](https://channel9.msdn.com/Events/DataDriven/SQLServer2016/Azure-VM-is-the-best-platform-for-SQL-Server-2016)(Виртуальные машины Azure — лучшая платформа для SQL Server 2016).</span><span class="sxs-lookup"><span data-stu-id="c9a04-345">For a video overview of SQL Server on Azure Virtual Machines, watch [Azure VM is the best platform for SQL Server 2016](https://channel9.msdn.com/Events/DataDriven/SQLServer2016/Azure-VM-is-the-best-platform-for-SQL-Server-2016).</span></span>

<span data-ttu-id="c9a04-346">[Ознакомьтесь со схемой обучения](https://azure.microsoft.com/documentation/learning-paths/sql-azure-vm/) по использованию SQL Server в виртуальных машинах Azure.</span><span class="sxs-lookup"><span data-stu-id="c9a04-346">[Explore the Learning Path](https://azure.microsoft.com/documentation/learning-paths/sql-azure-vm/) for SQL Server on Azure virtual machines.</span></span>

