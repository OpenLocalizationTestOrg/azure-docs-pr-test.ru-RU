---
title: "aaaMigrate tooSQL базы данных сервера SQL Server на виртуальной Машине | Документы Microsoft"
description: "Узнайте, как toomigrate пользователя локальной базы данных tooSQL Server в виртуальной машине Azure."
services: virtual-machines-windows
documentationcenter: 
author: sabotta
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 00fd08c6-98fa-4d62-a3b8-ca20aa5246b1
ms.service: virtual-machines-sql
ms.workload: iaas-sql-server
ms.tgt_pltfrm: vm-windows-sql-server
ms.devlang: na
ms.topic: article
ms.date: 07/17/2017
ms.author: carlasab
ms.openlocfilehash: 9c7aba30304ea40796412d2ddc885f6d4a58be2a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-a-sql-server-database-toosql-server-in-an-azure-vm"></a><span data-ttu-id="7f7e9-103">Перенос tooSQL базы данных сервера SQL Server на виртуальной Машине Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-103">Migrate a SQL Server database tooSQL Server in an Azure VM</span></span>

<span data-ttu-id="7f7e9-104">Существует ряд методов toomigrate пользователя базы данных локального SQL Server tooSQL Server на виртуальной Машине Azure.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-104">There are a number of methods toomigrate an on-premises SQL Server user database tooSQL Server in an Azure VM.</span></span> <span data-ttu-id="7f7e9-105">В этой статье будет кратко рассматриваются различные методы и рекомендуем hello наилучший способ для различных сценариев.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-105">This article will briefly discuss various methods and recommend hello best method for various scenarios.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="what-are-hello-primary-migration-methods"></a><span data-ttu-id="7f7e9-106">Что такое первичный методов hello</span><span class="sxs-lookup"><span data-stu-id="7f7e9-106">What are hello primary migration methods?</span></span>
<span data-ttu-id="7f7e9-107">доступны следующие методы Hello основной миграции:</span><span class="sxs-lookup"><span data-stu-id="7f7e9-107">hello primary migration methods are:</span></span>

* <span data-ttu-id="7f7e9-108">Выполните резервное копирование локально с помощью сжатия и вручную копирование hello резервного копирования файла в hello виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-108">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>
* <span data-ttu-id="7f7e9-109">TooURL резервного копирования и восстановления в виртуальной машине Azure с URL-адреса hello hello</span><span class="sxs-lookup"><span data-stu-id="7f7e9-109">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>
* <span data-ttu-id="7f7e9-110">Отсоединение, затем скопируйте hello данных и журнала файлов tooAzure хранилища больших двоичных объектов и затем присоединить tooSQL Server на виртуальной Машине Azure с URL-адреса</span><span class="sxs-lookup"><span data-stu-id="7f7e9-110">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure VM from URL</span></span>
* <span data-ttu-id="7f7e9-111">Преобразование локального физического компьютера tooHyper-V VHD отправьте tooAzure хранилища больших двоичных объектов, а затем развернуть новую виртуальную Машину с помощью отправки виртуального жесткого диска</span><span class="sxs-lookup"><span data-stu-id="7f7e9-111">Convert on-premises physical machine tooHyper-V VHD, upload tooAzure Blob storage, and then deploy as new VM using uploaded VHD</span></span>
* <span data-ttu-id="7f7e9-112">Доставка жесткого диска в службу импорта и экспорта Windows.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-112">Ship hard drive using Windows Import/Export Service</span></span>
* <span data-ttu-id="7f7e9-113">Если у вас есть AlwaysOn локального развертывания, используйте hello [мастер добавления реплики Azure](../classic/sql-onprem-availability.md) toocreate реплики в Azure, а затем перехода на другой ресурс, указывающий экземпляр базы данных SQL Azure toohello пользователей</span><span class="sxs-lookup"><span data-stu-id="7f7e9-113">If you have an AlwaysOn deployment on-premises, use hello [Add Azure Replica Wizard](../classic/sql-onprem-availability.md) toocreate a replica in Azure and then failover, pointing users toohello Azure database instance</span></span>
* <span data-ttu-id="7f7e9-114">Используйте SQL Server [репликации транзакций](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server в качестве подписчика, а затем отключить репликации, указывающий экземпляр базы данных SQL Azure toohello пользователей</span><span class="sxs-lookup"><span data-stu-id="7f7e9-114">Use SQL Server [transactional replication](https://msdn.microsoft.com/library/ms151176.aspx) tooconfigure hello Azure SQL Server instance as a subscriber and then disable replication, pointing users toohello Azure database instance</span></span>

> [!TIP]
> <span data-ttu-id="7f7e9-115">Также можно использовать эти же методы между VM SQL Server в Azure toomove базы данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-115">You can also use these same techniques toomove databases between SQL Server VMs in Azure.</span></span> <span data-ttu-id="7f7e9-116">Например имеется не поддерживает выполнение tooupgrade коллекции образов виртуальной Машины SQL Server из одного tooanother версия или выпуск.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-116">For example, there is no supported way tooupgrade a SQL Server gallery-image VM from one version/edition tooanother.</span></span> <span data-ttu-id="7f7e9-117">В этом случае следует создать новую виртуальную Машину SQL Server с hello выпуска новой версии или и использовать один из методов переноса hello в этой статье toomove баз данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-117">In this case, you should create a new SQL Server VM with hello new version/edition, and then use one of hello migration techniques in this article toomove your databases.</span></span> 

## <a name="choosing-your-migration-method"></a><span data-ttu-id="7f7e9-118">Выбор метода миграции</span><span class="sxs-lookup"><span data-stu-id="7f7e9-118">Choosing your migration method</span></span>
<span data-ttu-id="7f7e9-119">Для повышения производительности передачи данных оптимальный перенести файлы базы данных hello в hello виртуальной Машины Azure с использованием сжатого файла резервной копии.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-119">For optimum data transfer performance, migrate hello database files into hello Azure VM using a compressed backup file.</span></span>

<span data-ttu-id="7f7e9-120">toominimize время простоя во время процесса миграции hello базы данных, используйте параметр AlwaysOn hello или репликации транзакций параметр hello.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-120">toominimize downtime during hello database migration process, use either hello AlwaysOn option or hello transactional replication option.</span></span>

<span data-ttu-id="7f7e9-121">Если это не hello возможных toouse выше методов, вручную перенести базу данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-121">If it is not possible toouse hello above methods, manually migrate your database.</span></span> <span data-ttu-id="7f7e9-122">При использовании этого метода будет обычно начинают с резервной копии базы данных следуют копию hello резервной копии базы данных в Azure и затем выполните восстановление базы данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-122">Using this method, you will generally start with a database backup followed by a copy of hello database backup into Azure and then perform a database restore.</span></span> <span data-ttu-id="7f7e9-123">Можно также скопировать hello сами файлы базы данных в Azure, а затем подключите их.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-123">You can also copy hello database files themselves into Azure and then attach them.</span></span> <span data-ttu-id="7f7e9-124">Существует несколько методов, с помощью которых можно выполнить ручной перенос базы данных на виртуальную машину Azure.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-124">There are several methods by which you can accomplish this manual process of migrating a database into an Azure VM.</span></span>

> [!NOTE]
> <span data-ttu-id="7f7e9-125">При обновлении с предыдущих версий SQL Server tooSQL Server 2014 или SQL Server 2016 необходимо учитывать, нужны ли изменения.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-125">When you upgrade tooSQL Server 2014 or SQL Server 2016 from older versions of SQL Server, you should consider whether changes are needed.</span></span> <span data-ttu-id="7f7e9-126">Рекомендуется учесть все зависимости функций, не поддерживается hello новой версией SQL Server в рамках проекта миграции.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-126">We recommend that you address all dependencies on features not supported by hello new version of SQL Server as part of your migration project.</span></span> <span data-ttu-id="7f7e9-127">Дополнительные сведения о поддерживаемых hello выпусках и сценариях см. в разделе [обновление tooSQL сервера](https://msdn.microsoft.com/library/bb677622.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-127">For more information on hello supported editions and scenarios, see [Upgrade tooSQL Server](https://msdn.microsoft.com/library/bb677622.aspx).</span></span>

<span data-ttu-id="7f7e9-128">Hello в следующей таблице отображается список всех методов основной hello и обсуждается, когда лучше всего подходит hello использования каждого метода.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-128">hello following table lists each of hello primary migration methods and discusses when hello use of each method is most appropriate.</span></span>

| <span data-ttu-id="7f7e9-129">Метод</span><span class="sxs-lookup"><span data-stu-id="7f7e9-129">Method</span></span> | <span data-ttu-id="7f7e9-130">Версия исходной базы данных</span><span class="sxs-lookup"><span data-stu-id="7f7e9-130">Source database version</span></span> | <span data-ttu-id="7f7e9-131">Версия базы данных назначения</span><span class="sxs-lookup"><span data-stu-id="7f7e9-131">Destination database version</span></span> | <span data-ttu-id="7f7e9-132">Ограничение на размер файла резервной копии исходной базы данных</span><span class="sxs-lookup"><span data-stu-id="7f7e9-132">Source database backup size constraint</span></span> | <span data-ttu-id="7f7e9-133">Примечания</span><span class="sxs-lookup"><span data-stu-id="7f7e9-133">Notes</span></span> |
| --- | --- | --- | --- | --- |
| [<span data-ttu-id="7f7e9-134">Выполните резервное копирование локально с помощью сжатия и вручную копирование hello резервного копирования файла в hello виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-134">Perform on-premises backup using compression and manually copy hello backup file into hello Azure virtual machine</span></span>](#backup-and-restore) |<span data-ttu-id="7f7e9-135">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-135">SQL Server 2005 or greater</span></span> |<span data-ttu-id="7f7e9-136">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-136">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="7f7e9-137">Ограничение на размер хранилища виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-137">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) | <span data-ttu-id="7f7e9-138">Это очень простая и проверенная методика перемещения баз данных между компьютерами.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-138">This is a very simple and well-tested technique for moving databases across machines.</span></span> |
| [<span data-ttu-id="7f7e9-139">TooURL резервного копирования и восстановления в виртуальной машине Azure с URL-адреса hello hello</span><span class="sxs-lookup"><span data-stu-id="7f7e9-139">Perform a backup tooURL and restore into hello Azure virtual machine from hello URL</span></span>](#backup-to-url-and-restore) |<span data-ttu-id="7f7e9-140">SQL Server 2012 SP1 CU2 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-140">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="7f7e9-141">SQL Server 2012 SP1 CU2 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-141">SQL Server 2012 SP1 CU2 or greater</span></span> |<span data-ttu-id="7f7e9-142">Менее 12,8 ТБ для SQL Server 2016, в противном случае менее 1 ТБ</span><span class="sxs-lookup"><span data-stu-id="7f7e9-142">< 12.8 TB for SQL Server 2016, otherwise < 1 TB</span></span> | <span data-ttu-id="7f7e9-143">Этот метод является hello toomove еще одно способом – toohello файл резервной копии виртуальной Машины с помощью хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-143">This method is just another way toomove hello backup file toohello VM using Azure storage.</span></span> |
| [<span data-ttu-id="7f7e9-144">Отсоединение, затем скопируйте hello данных и журнала файлов tooAzure хранилища больших двоичных объектов и затем присоединить tooSQL Server на виртуальной машине Azure с URL-адреса</span><span class="sxs-lookup"><span data-stu-id="7f7e9-144">Detach and then copy hello data and log files tooAzure blob storage and then attach tooSQL Server in Azure virtual machine from URL</span></span>](#detach-and-attach-from-url) |<span data-ttu-id="7f7e9-145">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-145">SQL Server 2005 or greater</span></span> |<span data-ttu-id="7f7e9-146">SQL Server 2014 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-146">SQL Server 2014 or greater</span></span> |[<span data-ttu-id="7f7e9-147">Ограничение на размер хранилища виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-147">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="7f7e9-148">Используйте этот метод при планировании слишком[хранить эти файлы с помощью службы хранилища больших двоичных объектов Azure hello](https://msdn.microsoft.com/library/dn385720.aspx) и присоединить их tooSQL сервер запущен на виртуальной Машине Azure, особенно в очень больших баз данных</span><span class="sxs-lookup"><span data-stu-id="7f7e9-148">Use this method when you plan too[store these files using hello Azure Blob storage service](https://msdn.microsoft.com/library/dn385720.aspx) and attach them tooSQL Server running in an Azure VM, particularly with very large databases</span></span> |
| [<span data-ttu-id="7f7e9-149">Преобразование локального компьютера tooHyper-V VHD отправьте tooAzure хранилища больших двоичных объектов, а затем развернуть новую виртуальную машину с помощью загруженного VHD-файла</span><span class="sxs-lookup"><span data-stu-id="7f7e9-149">Convert on-premises machine tooHyper-V VHDs, upload tooAzure Blob storage, and then deploy a new virtual machine using uploaded VHD</span></span>](#convert-to-vm-and-upload-to-url-and-deploy-as-new-vm) |<span data-ttu-id="7f7e9-150">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-150">SQL Server 2005 or greater</span></span> |<span data-ttu-id="7f7e9-151">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-151">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="7f7e9-152">Ограничение на размер хранилища виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-152">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="7f7e9-153">Используется, когда [перевод собственную лицензию SQL Server](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), при переносе базы данных, которая будет выполняться на более старой версии SQL Server или перенос системных и пользовательских баз данных вместе как часть hello миграции базы данных, зависят от друга пользовательских баз данных и/или системных баз данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-153">Use when [bringing your own SQL Server license](../../../sql-database/sql-database-paas-vs-sql-server-iaas.md), when migrating a database that you will run on an older version of SQL Server, or when migrating system and user databases together as part of hello migration of database dependent on other user databases and/or system databases.</span></span> |
| [<span data-ttu-id="7f7e9-154">Доставка жестких дисков в службу импорта и экспорта Windows.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-154">Ship hard drive using Windows Import/Export Service</span></span>](#ship-hard-drive) |<span data-ttu-id="7f7e9-155">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-155">SQL Server 2005 or greater</span></span> |<span data-ttu-id="7f7e9-156">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-156">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="7f7e9-157">Ограничение на размер хранилища виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-157">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="7f7e9-158">Используйте hello [службы импорта и экспорта Windows](../../../storage/common/storage-import-export-service.md) при метод ручного копирования становится слишком низкой, такие как с очень больших баз данных</span><span class="sxs-lookup"><span data-stu-id="7f7e9-158">Use hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) when manual copy method is too slow, such as with very large databases</span></span> |
| [<span data-ttu-id="7f7e9-159">Здравствуйте, используйте мастер добавления реплики Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-159">Use hello Add Azure Replica Wizard</span></span>](../classic/sql-onprem-availability.md) |<span data-ttu-id="7f7e9-160">SQL Server 2012 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-160">SQL Server 2012 or greater</span></span> |<span data-ttu-id="7f7e9-161">SQL Server 2012 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-161">SQL Server 2012 or greater</span></span> |[<span data-ttu-id="7f7e9-162">Ограничение на размер хранилища виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-162">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="7f7e9-163">Сокращает время простоя, используется при наличии локального развертывания AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-163">Minimizes downtime, use when you have an AlwaysOn on-premises deployment</span></span> |
| [<span data-ttu-id="7f7e9-164">Использование репликации транзакций SQL Server</span><span class="sxs-lookup"><span data-stu-id="7f7e9-164">Use SQL Server transactional replication</span></span>](https://msdn.microsoft.com/library/ms151176.aspx) |<span data-ttu-id="7f7e9-165">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-165">SQL Server 2005 or greater</span></span> |<span data-ttu-id="7f7e9-166">SQL Server 2005 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="7f7e9-166">SQL Server 2005 or greater</span></span> |[<span data-ttu-id="7f7e9-167">Ограничение на размер хранилища виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="7f7e9-167">Azure VM storage limit</span></span>](https://azure.microsoft.com/documentation/articles/azure-subscription-service-limits/) |<span data-ttu-id="7f7e9-168">Следует использовать, когда требуется время простоя toominimize и не имеют AlwaysOn локального развертывания</span><span class="sxs-lookup"><span data-stu-id="7f7e9-168">Use when you need toominimize downtime and do not have an AlwaysOn on-premises deployment</span></span> |

## <a name="backup-and-restore"></a><span data-ttu-id="7f7e9-169">Архивация и восстановление</span><span class="sxs-lookup"><span data-stu-id="7f7e9-169">Backup and restore</span></span>
<span data-ttu-id="7f7e9-170">Резервное копирование базы данных с использованием сжатия скопируйте hello резервного копирования toohello виртуальной Машины, а затем восстановите hello базы данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-170">Back up your database with compression, copy hello backup toohello VM, and then restore hello database.</span></span> <span data-ttu-id="7f7e9-171">Если файл резервной копии превышает 1 ТБ, необходимо чередовать его так, как максимальный размер диска ВМ hello составляет 1 ТБ.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-171">If your backup file is larger than 1 TB, you must stripe it because hello maximum size of a VM disk is 1 TB.</span></span> <span data-ttu-id="7f7e9-172">Используйте следующие общие шаги toomigrate пользовательской базы данных с помощью этого метода вручную hello.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-172">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="7f7e9-173">Выполните расположение локальной tooan резервной копии всей базы данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-173">Perform a full database backup tooan on-premises location.</span></span>
2. <span data-ttu-id="7f7e9-174">Создание и передать виртуальную машину с SQL Server требуемой версии hello.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-174">Create or upload a virtual machine with hello version of SQL Server desired.</span></span>
3. <span data-ttu-id="7f7e9-175">Настройте подключения в соответствии со своими требованиями.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-175">Setup connectivity based on your requirements.</span></span> <span data-ttu-id="7f7e9-176">В разделе [подключения виртуальной машины SQL Server в Azure (диспетчера ресурсов) tooa](virtual-machines-windows-sql-connect.md).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-176">See [Connect tooa SQL Server Virtual Machine on Azure (Resource Manager)](virtual-machines-windows-sql-connect.md).</span></span>
4. <span data-ttu-id="7f7e9-177">Скопируйте вашей tooyour резервного копирования файлов виртуальных Машин с помощью удаленного рабочего стола, проводника Windows или hello команды копирования из командной строки.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-177">Copy your backup file(s) tooyour VM using remote desktop, Windows Explorer or hello copy command from a command prompt.</span></span>

## <a name="backup-toourl-and-restore"></a><span data-ttu-id="7f7e9-178">TooURL резервного копирования и восстановления</span><span class="sxs-lookup"><span data-stu-id="7f7e9-178">Backup tooURL and restore</span></span>
<span data-ttu-id="7f7e9-179">Вместо создания резервной копии tooa локальный файл, можно использовать hello [резервного копирования tooURL](https://msdn.microsoft.com/library/dn435916.aspx) и восстанавливать toohello URL-адрес виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-179">Instead of backing up tooa local file, you can use hello [backup tooURL](https://msdn.microsoft.com/library/dn435916.aspx) and then restore from URL toohello VM.</span></span> <span data-ttu-id="7f7e9-180">С SQL Server 2016 чередующиеся резервные наборы данных, поддерживаются, рекомендуется для повышения производительности и необходимые tooexceed hello ограничения на размер каждого большого двоичного объекта.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-180">With SQL Server 2016, striped backup sets are supported, are recommended for performance, and required tooexceed hello size limits per blob.</span></span> <span data-ttu-id="7f7e9-181">Для очень больших баз данных hello использование hello [службы импорта и экспорта Windows](../../../storage/common/storage-import-export-service.md) рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-181">For very large databases, hello use of hello [Windows Import/Export Service](../../../storage/common/storage-import-export-service.md) is recommended.</span></span>

## <a name="detach-and-attach-from-url"></a><span data-ttu-id="7f7e9-182">Отключение и подключение с использованием URL-адреса</span><span class="sxs-lookup"><span data-stu-id="7f7e9-182">Detach and attach from URL</span></span>
<span data-ttu-id="7f7e9-183">Отсоединение базы данных и журнала файлов и передает их слишком[хранилища больших двоичных объектов Azure](https://msdn.microsoft.com/library/dn385720.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-183">Detach your database and log files and transfer them too[Azure Blob storage](https://msdn.microsoft.com/library/dn385720.aspx).</span></span> <span data-ttu-id="7f7e9-184">Затем присоедините базу данных hello из hello URL-адрес своей ВМ Azure.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-184">Then attach hello database from hello URL on your Azure VM.</span></span> <span data-ttu-id="7f7e9-185">Применяется, если вы хотите tooreside файлы hello физической базы данных в хранилище больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-185">Use this if you want hello physical database files tooreside in Blob storage.</span></span> <span data-ttu-id="7f7e9-186">Это может быть удобно для очень больших баз данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-186">This might be useful for very large databases.</span></span> <span data-ttu-id="7f7e9-187">Используйте следующие общие шаги toomigrate пользовательской базы данных с помощью этого метода вручную hello.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-187">Use hello following general steps toomigrate a user database using this manual method:</span></span>

1. <span data-ttu-id="7f7e9-188">Отключите файлы базы данных hello от hello в локальный экземпляр базы данных.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-188">Detach hello database files from hello on-premises database instance.</span></span>
2. <span data-ttu-id="7f7e9-189">Скопируйте файлы базы данных hello отсоединена в хранилище больших двоичных объектов с помощью hello [командной строки программу AZCopy](../../../storage/common/storage-use-azcopy.md).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-189">Copy hello detached database files into Azure blob storage using hello [AZCopy command-line utility](../../../storage/common/storage-use-azcopy.md).</span></span>
3. <span data-ttu-id="7f7e9-190">Присоединение файлов базы данных hello из экземпляра SQL Server toohello hello URL-адрес Azure в виртуальной Машине Azure hello.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-190">Attach hello database files from hello Azure URL toohello SQL Server instance in hello Azure VM.</span></span>

## <a name="convert-toovm-and-upload-toourl-and-deploy-as-new-vm"></a><span data-ttu-id="7f7e9-191">Преобразовать tooVM и отправка tooURL и развернуть в качестве новой виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="7f7e9-191">Convert tooVM and upload tooURL and deploy as new VM</span></span>
<span data-ttu-id="7f7e9-192">Используйте этот метод toomigrate все системные и пользовательские базы данных на виртуальной машине tooAzure экземпляра локального SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-192">Use this method toomigrate all system and user databases in an on-premises SQL Server instance tooAzure virtual machine.</span></span> <span data-ttu-id="7f7e9-193">Используйте следующие общие шаги toomigrate всего экземпляра SQL Server с помощью этого метода вручную hello.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-193">Use hello following general steps toomigrate an entire SQL Server instance using this manual method:</span></span>

1. <span data-ttu-id="7f7e9-194">Преобразование физических или виртуальных машин tooHyper-V VHD с помощью [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-194">Convert physical or virtual machines tooHyper-V VHDs by using [Microsoft Virtual Machine Converter](https://technet.microsoft.com/library/dn874008(v=ws.11).aspx).</span></span>
2. <span data-ttu-id="7f7e9-195">Отправить файлы виртуального жесткого диска tooAzure хранилища с помощью hello [командлета Add-AzureVHD](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-195">Upload VHD files tooAzure Storage by using hello [Add-AzureVHD cmdlet](https://msdn.microsoft.com/library/windowsazure/dn495173.aspx).</span></span>
3. <span data-ttu-id="7f7e9-196">Развертывание новой виртуальной машины с помощью hello отправки виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-196">Deploy a new virtual machine by using hello uploaded VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="7f7e9-197">toomigrate всего приложения, рассмотрите возможность использования [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span><span class="sxs-lookup"><span data-stu-id="7f7e9-197">toomigrate an entire application, consider using [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md)].</span></span>

## <a name="ship-hard-drive"></a><span data-ttu-id="7f7e9-198">Отправка жестких дисков</span><span class="sxs-lookup"><span data-stu-id="7f7e9-198">Ship hard drive</span></span>
<span data-ttu-id="7f7e9-199">Используйте hello [метода службы импорта и экспорта Windows](../../../storage/common/storage-import-export-service.md) tootransfer больших объемов данных файла tooAzure хранилища больших двоичных объектов в ситуациях, когда передача по сети hello дорого стоит или не представляется возможной.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-199">Use hello [Windows Import/Export Service method](../../../storage/common/storage-import-export-service.md) tootransfer large amounts of file data tooAzure Blob storage in situations where uploading over hello network is prohibitively expensive or not feasible.</span></span> <span data-ttu-id="7f7e9-200">С этой службой отправлять одну или несколько жестких дисков, содержащий этот данных tooan центр обработки данных Azure, где данные будут отправлены tooyour учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-200">With this service, you send one or more hard drives containing that data tooan Azure data center, where your data will be uploaded tooyour storage account.</span></span>

## <a name="next-steps"></a><span data-ttu-id="7f7e9-201">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="7f7e9-201">Next Steps</span></span>
<span data-ttu-id="7f7e9-202">Подробные сведения о работе SQL Server на виртуальных машинах Azure см. в разделе [Общие сведения об SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="7f7e9-202">For more information about running SQL Server on Azure Virtual Machines, see [SQL Server on Azure Virtual Machines overview](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

<span data-ttu-id="7f7e9-203">Инструкции по созданию образ виртуальной машины Azure SQL Server см. в разделе [советы и рекомендации для клонирования виртуальных машин Azure SQL из записанных образов](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) на hello блог инженеров CSS SQL Server.</span><span class="sxs-lookup"><span data-stu-id="7f7e9-203">For instructions on creating an Azure SQL Server Virtual Machine from a captured image, see [Tips & Tricks on ‘cloning’ Azure SQL virtual machines from captured images](https://blogs.msdn.microsoft.com/psssql/2016/07/06/tips-tricks-on-cloning-azure-sql-virtual-machines-from-captured-images/) on hello CSS SQL Server Engineers blog.</span></span>

