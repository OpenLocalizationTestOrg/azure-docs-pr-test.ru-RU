---
title: "Настройка высокого уровня доступности виртуальных машин Azure Resource Manager | Документация Майкрософт"
description: "В этом руководстве показано, как создать группу доступности AlwaysOn на виртуальных машинах Azure в режиме Azure Resource Manager."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-resource-manager
ms.assetid: 64e85527-d5c8-40d9-bbe2-13045d25fc68
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 03/17/2017
ms.author: mikeray
ms.openlocfilehash: d430febee23081b26eee0a68d4beb43228549f52
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="configure-always-on-availability-groups-in-azure-virtual-machines-automatically-resource-manager"></a><span data-ttu-id="9b4ab-103">Автоматическая настройка групп доступности AlwaysOn на виртуальных машинах Azure с использованием Resource Manager</span><span class="sxs-lookup"><span data-stu-id="9b4ab-103">Configure Always On availability groups in Azure Virtual Machines automatically: Resource Manager</span></span>

<span data-ttu-id="9b4ab-104">В этом руководстве показано, как создать группу доступности SQL Server, в которую входят виртуальные машины Azure Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-104">This tutorial shows you how to create a SQL Server availability group that uses Azure Resource Manager virtual machines.</span></span> <span data-ttu-id="9b4ab-105">Для настройки шаблона мы воспользуемся колонками на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-105">The tutorial uses Azure blades to configure a template.</span></span> <span data-ttu-id="9b4ab-106">В ходе работы в сможете проверить параметры по умолчанию, ввести необходимые параметры, а затем обновить колонки на портале.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-106">You can review the default settings, type required settings, and update the blades in the portal as you walk through this tutorial.</span></span>

<span data-ttu-id="9b4ab-107">Полное руководство позволяет создать группу доступности SQL Server на виртуальных машинах Azure, включая создание следующих элементов:</span><span class="sxs-lookup"><span data-stu-id="9b4ab-107">The complete tutorial creates a SQL Server availability group on Azure Virtual Machines that include the following elements:</span></span>

* <span data-ttu-id="9b4ab-108">виртуальная сеть с несколькими подсетями, в том числе для интерфейса и внутренних серверов;</span><span class="sxs-lookup"><span data-stu-id="9b4ab-108">A virtual network that has multiple subnets, including a frontend and a backend subnet</span></span>
* <span data-ttu-id="9b4ab-109">два контроллера домена, поддерживающих домен Active Directory (AD);</span><span class="sxs-lookup"><span data-stu-id="9b4ab-109">Two domain controllers that have an Active Directory domain</span></span>
* <span data-ttu-id="9b4ab-110">две виртуальные машины, на которых работает SQL Server, развернутые во внутренней подсети и присоединенные к домену Active Directory;</span><span class="sxs-lookup"><span data-stu-id="9b4ab-110">Two virtual machines that run SQL Server and are deployed to the backend subnet and joined to the Active Directory domain</span></span>
* <span data-ttu-id="9b4ab-111">отказоустойчивый кластер из трех узлов с моделью кворума "Большинство узлов";</span><span class="sxs-lookup"><span data-stu-id="9b4ab-111">A three-node failover cluster with the Node Majority quorum model</span></span>
* <span data-ttu-id="9b4ab-112">группа доступности с двумя репликами базы данных доступности с синхронной фиксацией.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-112">An availability group that has two synchronous-commit replicas of an availability database</span></span>

<span data-ttu-id="9b4ab-113">На следующем рисунке представлено полное решение.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-113">The following illustration represents the complete solution.</span></span>

![Тестовая архитектура для групп доступности в Azure](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/0-EndstateSample.png)

<span data-ttu-id="9b4ab-115">Все ресурсы в этом решении принадлежат к одной группе ресурсов.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-115">All resources in this solution belong to a single resource group.</span></span>

<span data-ttu-id="9b4ab-116">Прежде чем начать работу с руководством, проверьте следующее.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-116">Before you start this tutorial, confirm the following:</span></span>

* <span data-ttu-id="9b4ab-117">У вас уже есть учетная запись Azure.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-117">You already have an Azure account.</span></span> <span data-ttu-id="9b4ab-118">Если у вас ее нет, [зарегистрируйтесь, чтобы воспользоваться пробной учетной записью](http://azure.microsoft.com/pricing/free-trial/).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-118">If you don't have one, [sign up for a trial account](http://azure.microsoft.com/pricing/free-trial/).</span></span>
* <span data-ttu-id="9b4ab-119">Вы уже умеете подготавливать виртуальную машину SQL Server из коллекции виртуальных машин через графический интерфейс пользователя.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-119">You already know how to use the GUI to provision a SQL Server virtual machine from the virtual machine gallery.</span></span> <span data-ttu-id="9b4ab-120">Дополнительные сведения см. в разделе [Подготовка виртуальной машины SQL Server на портале Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-120">For more information, see [Provisioning a SQL Server virtual machine on Azure](virtual-machines-windows-portal-sql-server-provision.md).</span></span>
* <span data-ttu-id="9b4ab-121">Теперь вы хорошо понимаете принцип работы групп доступности.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-121">You already have a solid understanding of availability groups.</span></span> <span data-ttu-id="9b4ab-122">Дополнительные сведения см. в разделе [Группы доступности AlwaysOn (SQL Server)](http://msdn.microsoft.com/library/hh510230.aspx).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-122">For more information, see [Always On availability groups (SQL Server)](http://msdn.microsoft.com/library/hh510230.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="9b4ab-123">Если вы планируете использовать группы доступности с SharePoint, ознакомьтесь со статьей [Configure SQL Server 2012 Always On availability groups for SharePoint 2013](http://technet.microsoft.com/library/jj715261.aspx)(Настройка групп доступности AlwaysOn SQL Server 2012 для SharePoint 2013).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-123">If you are interested in using availability groups with SharePoint, also see [Configure SQL Server 2012 Always On availability groups for SharePoint 2013](http://technet.microsoft.com/library/jj715261.aspx).</span></span>
>
>

<span data-ttu-id="9b4ab-124">В этом руководстве портал Azure используется для таких целей:</span><span class="sxs-lookup"><span data-stu-id="9b4ab-124">In this tutorial, use the Azure portal to:</span></span>

* <span data-ttu-id="9b4ab-125">выбор шаблона AlwaysOn на портале;</span><span class="sxs-lookup"><span data-stu-id="9b4ab-125">Choose the Always On template from the portal.</span></span>
* <span data-ttu-id="9b4ab-126">проверка настроек шаблона и обновление некоторых параметров конфигурации с учетом используемой среды;</span><span class="sxs-lookup"><span data-stu-id="9b4ab-126">Review the template settings and update a few configuration settings for your environment.</span></span>
* <span data-ttu-id="9b4ab-127">контроль действий Azure по созданию тестовой среды;</span><span class="sxs-lookup"><span data-stu-id="9b4ab-127">Monitor Azure as it creates the entire environment.</span></span>
* <span data-ttu-id="9b4ab-128">подключение к контроллеру домена и к серверу, на котором выполняется SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-128">Connect to a domain controller and then to a server that runs SQL Server.</span></span>

[!INCLUDE [availability-group-template](../../../../includes/virtual-machines-windows-portal-sql-alwayson-ag-template.md)]

## <a name="provision-the-cluster-from-the-gallery"></a><span data-ttu-id="9b4ab-129">Подготовка кластера из коллекции</span><span class="sxs-lookup"><span data-stu-id="9b4ab-129">Provision the cluster from the gallery</span></span>
<span data-ttu-id="9b4ab-130">В Azure есть коллекция образов для всего решения.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-130">Azure provides a gallery image for the entire solution.</span></span> <span data-ttu-id="9b4ab-131">Найти шаблон можно так:</span><span class="sxs-lookup"><span data-stu-id="9b4ab-131">To locate the template:</span></span>

1. <span data-ttu-id="9b4ab-132">Войдите на портал Azure, используя свои учетные данные.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-132">Sign in to the Azure portal by using your account.</span></span>
2. <span data-ttu-id="9b4ab-133">На портале Azure щелкните **+Создать**, чтобы открыть колонку**Создать**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-133">In the Azure portal, click **+New** to open the **New** blade.</span></span>
3. <span data-ttu-id="9b4ab-134">В колонке **Создать** выполните поиск по строке **AlwaysOn**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-134">On the **New** blade, search for **AlwaysOn**.</span></span>
   <span data-ttu-id="9b4ab-135">![Поиск шаблона AlwaysOn](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/16-findalwayson.png)</span><span class="sxs-lookup"><span data-stu-id="9b4ab-135">![Find AlwaysOn Template](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/16-findalwayson.png)</span></span>
4. <span data-ttu-id="9b4ab-136">В результатах поиска найдите **SQL Server AlwaysOn Cluster**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-136">In the search results, locate **SQL Server AlwaysOn Cluster**.</span></span>
   <span data-ttu-id="9b4ab-137">![Шаблон AlwaysOn](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/17-alwaysontemplate.png)</span><span class="sxs-lookup"><span data-stu-id="9b4ab-137">![AlwaysOn Template](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/17-alwaysontemplate.png)</span></span>
5. <span data-ttu-id="9b4ab-138">В разделе **Выберите модель развертывания** щелкните **Resource Manager**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-138">On **Select a deployment model**, choose **Resource Manager**.</span></span>

### <a name="basics"></a><span data-ttu-id="9b4ab-139">Основы</span><span class="sxs-lookup"><span data-stu-id="9b4ab-139">Basics</span></span>
<span data-ttu-id="9b4ab-140">Щелкните **Базовые** и настройте указанные ниже параметры.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-140">Click **Basics** and configure the following settings:</span></span>

* <span data-ttu-id="9b4ab-141">**Имя администратора.** Укажите здесь учетную запись пользователя с правами администратора домена, входящую в предопределенную роль системного администратора (sysadmin) для сервера SQL Server на обоих экземплярах SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-141">**Administrator user name** is a user account that has domain administrator permissions and is a member of the SQL Server sysadmin fixed server role on both instances of SQL Server.</span></span> <span data-ttu-id="9b4ab-142">В этом руководстве мы будем использовать имя **DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-142">For this tutorial, use **DomainAdmin**.</span></span>
* <span data-ttu-id="9b4ab-143">**Пароль** — пароль к учетной записи администратора домена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-143">**Password** is the password for the domain administrator account.</span></span> <span data-ttu-id="9b4ab-144">Следует использовать сложный пароль.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-144">Use a complex password.</span></span> <span data-ttu-id="9b4ab-145">Подтвердите пароль.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-145">Confirm the password.</span></span>
* <span data-ttu-id="9b4ab-146">**Подписка.** Это подписка Azure, через которую оплачивается использование всех ресурсов, развернутых для нашей группы доступности.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-146">**Subscription** is the subscription that Azure bills to run all deployed resources for the availability group.</span></span> <span data-ttu-id="9b4ab-147">Если в вашей учетной записи есть несколько подписок, можно указать любую из них.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-147">If your account has multiple subscriptions, you can specify a different subscription.</span></span>
* <span data-ttu-id="9b4ab-148">**Группа ресурсов**. Это имя группы, в которую входят все ресурсы Azure, созданные нашим шаблоном.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-148">**Resource group** is the name for the group to which all Azure resources that are created by this template belong.</span></span> <span data-ttu-id="9b4ab-149">В этом руководстве мы будем использовать имя **SQL-HA-RG**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-149">For this tutorial, use **SQL-HA-RG**.</span></span> <span data-ttu-id="9b4ab-150">Дополнительные сведения см. в [обзоре Azure Resource Manager](../../../azure-resource-manager/resource-group-overview.md#resource-groups).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-150">For more information, see [Azure Resource Manager overview](../../../azure-resource-manager/resource-group-overview.md#resource-groups).</span></span>
* <span data-ttu-id="9b4ab-151">**Расположение** — регион Azure, где будут созданы ресурсы для этого руководства.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-151">**Location** is the Azure region where the tutorial creates the resources.</span></span> <span data-ttu-id="9b4ab-152">Выберите регион Azure.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-152">Choose an Azure region.</span></span>

<span data-ttu-id="9b4ab-153">На следующем снимке экрана показана заполненная колонка **Базовые**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-153">The following screenshot is a completed **Basics** blade:</span></span>

![Основы](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/1-basics.png)

<span data-ttu-id="9b4ab-155">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-155">Click **OK**.</span></span>

### <a name="domain-and-network-settings"></a><span data-ttu-id="9b4ab-156">Параметры домена и сети</span><span class="sxs-lookup"><span data-stu-id="9b4ab-156">Domain and network settings</span></span>
<span data-ttu-id="9b4ab-157">Этот шаблон из коллекции Azure создает домен и контроллеры домена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-157">This Azure gallery template creates a domain and domain controllers.</span></span> <span data-ttu-id="9b4ab-158">Он также создает сеть c двумя подсетями.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-158">It also creates a network and two subnets.</span></span> <span data-ttu-id="9b4ab-159">Шаблон не может создавать серверы в существующем домене или виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-159">The template cannot create servers in an existing domain or virtual network.</span></span> <span data-ttu-id="9b4ab-160">На следующем шаге мы настроим параметры домена и сети.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-160">The next step configures the domain and network settings.</span></span>

<span data-ttu-id="9b4ab-161">В колонке **Параметры домена и сети** просмотрите предлагаемые значения для параметров домена и сети.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-161">On the **Domain and network settings** blade, review the preset values for the domain and network settings:</span></span>

* <span data-ttu-id="9b4ab-162">**Доменное имя корня леса**. Это имя домена Active Directory, в котором будет размещаться наш кластер.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-162">**Forest root domain name** is the domain name for the Active Directory domain that hosts the cluster.</span></span> <span data-ttu-id="9b4ab-163">Мы будем использовать имя **contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-163">For the tutorial, use **contoso.com**.</span></span>
* <span data-ttu-id="9b4ab-164">**Имя виртуальной сети** — сетевое имя виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-164">**Virtual Network name** is the network name for the Azure virtual network.</span></span> <span data-ttu-id="9b4ab-165">Мы будем использовать имя **autohaVNET**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-165">For the tutorial, use **autohaVNET**.</span></span>
* <span data-ttu-id="9b4ab-166">**Domain Controller subnet name** (Имя подсети контроллера домена) — имя части виртуальной сети, в которой размещен контроллер домена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-166">**Domain Controller subnet name** is the name of a portion of the virtual network that hosts the domain controller.</span></span> <span data-ttu-id="9b4ab-167">Используйте **subnet-1**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-167">Use **subnet-1**.</span></span> <span data-ttu-id="9b4ab-168">Эта подсеть использует префикс адреса **10.0.0.0/24**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-168">This subnet uses address prefix **10.0.0.0/24**.</span></span>
* <span data-ttu-id="9b4ab-169">**Имя подсети SQL Server.** Это имя того сегмента виртуальной сети, в котором размещаются серверы SQL Server и файловый ресурс-свидетель.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-169">**SQL Server subnet name** is the name of a portion of the virtual network that hosts the servers that run SQL Server and the file share witness.</span></span> <span data-ttu-id="9b4ab-170">Используйте **subnet-2**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-170">Use **subnet-2**.</span></span> <span data-ttu-id="9b4ab-171">Эта подсеть использует префикс адреса **10.0.1.0/26**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-171">This subnet uses address prefix **10.0.1.0/26**.</span></span>

<span data-ttu-id="9b4ab-172">Дополнительные сведения о виртуальных сетях Azure см. в статье [Виртуальная сеть Azure](../../../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-172">To learn more about virtual networks in Azure, see [Virtual network overview](../../../virtual-network/virtual-networks-overview.md).</span></span>  

<span data-ttu-id="9b4ab-173">В итоге раздел **Параметры домена и сети** должен выглядеть так, как показано на следующем снимке экрана.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-173">The **Domain and network settings** should look like the following screenshot:</span></span>

![Параметры домена и сети](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/2-domain.png)

<span data-ttu-id="9b4ab-175">При необходимости эти значения можно изменить.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-175">If necessary, you can change these values.</span></span> <span data-ttu-id="9b4ab-176">В этом руководстве используются предустановленные значения.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-176">For this tutorial, use the preset values.</span></span>

<span data-ttu-id="9b4ab-177">Проверьте значения параметров и щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-177">Review the settings, and then click **OK**.</span></span>

### <a name="availability-group-settings"></a><span data-ttu-id="9b4ab-178">Параметры группы доступности</span><span class="sxs-lookup"><span data-stu-id="9b4ab-178">Availability group settings</span></span>
<span data-ttu-id="9b4ab-179">В разделе **Availability group settings** (Параметры группы доступности) просмотрите предустановленные значения для группы доступности и прослушивателя.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-179">On **Availability group settings**, review the preset values for the availability group and the listener.</span></span>

* <span data-ttu-id="9b4ab-180">**Имя группы доступности** — имя кластеризованного ресурса для группы доступности.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-180">**Availability group name** is the clustered resource name for the availability group.</span></span> <span data-ttu-id="9b4ab-181">Мы будем использовать имя **Contoso-ag**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-181">For this tutorial, use **Contoso-ag**.</span></span>
* <span data-ttu-id="9b4ab-182">**Имя прослушивателя группы доступности** используется кластером и внутренней подсистемой балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-182">**Availability group listener name** is used by the cluster and the internal load balancer.</span></span> <span data-ttu-id="9b4ab-183">Клиенты, которые подключаются к серверу SQL Server, могут использовать это имя для подключения к нужной реплике базы данных.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-183">Clients that connect to SQL Server can use this name to connect to the appropriate replica of the database.</span></span> <span data-ttu-id="9b4ab-184">Мы будем использовать имя **Contoso-listener**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-184">For this tutorial, use **Contoso-listener**.</span></span>
* <span data-ttu-id="9b4ab-185">**Порт прослушивателя группы доступности.** Это TCP-порт, на котором работает прослушиватель SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-185">**Availability group listener port** specifies the TCP port of the SQL Server listener.</span></span> <span data-ttu-id="9b4ab-186">В этом руководстве мы используем порт по умолчанию (**1433**).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-186">For this tutorial, use the default port, **1433**.</span></span>

<span data-ttu-id="9b4ab-187">При необходимости эти значения можно изменить.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-187">If necessary, you can change these values.</span></span> <span data-ttu-id="9b4ab-188">В этом руководстве используются предустановленные значения.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-188">For this tutorial, use the preset values.</span></span>  

![Параметры группы доступности](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/3-availabilitygroup.png)

<span data-ttu-id="9b4ab-190">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-190">Click **OK**.</span></span>

### <a name="virtual-machine-size-storage-settings"></a><span data-ttu-id="9b4ab-191">Размер виртуальной машины и параметры хранилища</span><span class="sxs-lookup"><span data-stu-id="9b4ab-191">Virtual machine size, storage settings</span></span>
<span data-ttu-id="9b4ab-192">В разделе **Размер виртуальной машины и параметры хранилища** выберите размер виртуальной машины SQL Server и проверьте другие параметры.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-192">On **VM size, storage settings**, choose a SQL Server virtual machine size, and review the other settings.</span></span>

* <span data-ttu-id="9b4ab-193">**Размер виртуальной машины SQL Server.** Это размер обеих виртуальных машин, на которых выполняется SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-193">**SQL Server virtual machine size** is the size for both virtual machines that run SQL Server.</span></span> <span data-ttu-id="9b4ab-194">Выберите такой размер, который соответствует вашей рабочей нагрузке.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-194">Choose an appropriate virtual machine size for your workload.</span></span> <span data-ttu-id="9b4ab-195">Если вы создаете среду, описанную в этом руководстве, используйте размер **DS2**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-195">If you are building this environment for the tutorial, use **DS2**.</span></span> <span data-ttu-id="9b4ab-196">Для производственных рабочих нагрузок следует выбрать такой размер виртуальной машины, который сможет поддерживать рабочую нагрузку.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-196">For production workloads, choose a virtual machine size that can support the workload.</span></span> <span data-ttu-id="9b4ab-197">Для многих производственных рабочих нагрузок нужна виртуальная машина **DS4** или большего размера.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-197">Many production workloads require **DS4** or larger.</span></span> <span data-ttu-id="9b4ab-198">Шаблон создает две виртуальные машины такого размера и устанавливает SQL Server на каждую из них.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-198">The template builds two virtual machines of this size and installs SQL Server on each one.</span></span> <span data-ttu-id="9b4ab-199">Дополнительные сведения см. в разделе [Размеры виртуальных машин](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-199">For more information, see [Sizes for virtual machines](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span>

> [!NOTE]
> <span data-ttu-id="9b4ab-200">Azure устанавливает выпуск SQL Server Enterprise Edition.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-200">Azure installs the Enterprise Edition of SQL Server.</span></span> <span data-ttu-id="9b4ab-201">Стоимость ПО зависит от выпуска и размера виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-201">The cost depends on the edition and the virtual machine size.</span></span> <span data-ttu-id="9b4ab-202">Подробные сведения о текущих ценах см. на странице [цен на виртуальные машины](http://azure.microsoft.com/pricing/details/virtual-machines/#Sql).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-202">For detailed information about current costs, see [virtual machines pricing](http://azure.microsoft.com/pricing/details/virtual-machines/#Sql).</span></span>
>
>

* <span data-ttu-id="9b4ab-203">**Domain controller virtual machine size** (Размер виртуальной машины контроллера домена) — размер виртуальной машины для контроллеров домена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-203">**Domain controller virtual machine size** is the virtual machine size for the domain controllers.</span></span> <span data-ttu-id="9b4ab-204">Мы будем использовать размер **D2**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-204">For this tutorial use **D2**.</span></span>
* <span data-ttu-id="9b4ab-205">**File Share Witness virtual machine size** (Размер виртуальной машины файлового ресурса-свидетеля) — размер виртуальной машины для файлового ресурса-свидетеля.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-205">**File Share Witness virtual machine size** is the virtual machine size for the file share witness.</span></span> <span data-ttu-id="9b4ab-206">Мы будем использовать размер **A1**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-206">For this tutorial, use **A1**.</span></span>
* <span data-ttu-id="9b4ab-207">**SQL Storage account** (Учетная запись хранения SQL) — имя учетной записи хранения для данных SQL Server и дисков операционной системы.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-207">**SQL Storage account** is the name of the storage account that holds the SQL Server data and operating system disks.</span></span> <span data-ttu-id="9b4ab-208">Мы будем использовать имя **alwaysonsql01**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-208">For this tutorial, use **alwaysonsql01**.</span></span>
* <span data-ttu-id="9b4ab-209">**DC Storage account** (Учетная запись хранения контроллера домена) — имя учетной записи хранения для контроллеров домена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-209">**DC Storage account** is the name of the storage account for the domain controllers.</span></span> <span data-ttu-id="9b4ab-210">Мы будем использовать имя **alwaysondc01**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-210">For this tutorial, use **alwaysondc01**.</span></span>
* <span data-ttu-id="9b4ab-211">**SQL Server data disk size** (Размер диска данных SQL Server) — размер диска данных SQL Server в ТБ.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-211">**SQL Server data disk size** in TB is the size of the SQL Server data disk in TB.</span></span> <span data-ttu-id="9b4ab-212">Введите число от 1 до 4.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-212">Specify a number from 1 through 4.</span></span> <span data-ttu-id="9b4ab-213">Мы будем использовать размер **1**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-213">For this tutorial, use **1**.</span></span>
* <span data-ttu-id="9b4ab-214">**Оптимизация хранилища** — параметры конфигурации хранилища для виртуальных машин SQL Server на основе типа рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-214">**Storage optimization** sets specific storage configuration settings for the SQL Server virtual machines based on the workload type.</span></span> <span data-ttu-id="9b4ab-215">В нашем примере все виртуальные машины с SQL Server используют хранилище класса Premium, а для диска Azure задан режим кэширования узла "Только для чтения".</span><span class="sxs-lookup"><span data-stu-id="9b4ab-215">All SQL Server virtual machines in this scenario use premium storage with Azure disk host cache set to read-only.</span></span> <span data-ttu-id="9b4ab-216">Кроме того, параметры SQL Server для рабочей нагрузки можно оптимизировать, выбрав один из трех таких параметров:</span><span class="sxs-lookup"><span data-stu-id="9b4ab-216">In addition, you can optimize SQL Server settings for the workload by choosing one of these three settings:</span></span>

  * <span data-ttu-id="9b4ab-217">**General workload** (Общая рабочая нагрузка) — без особых параметров конфигурации.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-217">**General workload** sets no specific configuration settings.</span></span>
  * <span data-ttu-id="9b4ab-218">**Обработка транзакций** — устанавливаются флаги трассировки 1117 и 1118.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-218">**Transactional processing** sets trace flag 1117 and 1118.</span></span>
  * <span data-ttu-id="9b4ab-219">**Хранилище данных** — устанавливаются флаги трассировки 1117 и 610.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-219">**Data warehousing** sets trace flag 1117 and 610.</span></span>

<span data-ttu-id="9b4ab-220">Мы будем использовать параметр **General workload**(Общая рабочая нагрузка).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-220">For this tutorial, use **General workload**.</span></span>

![Размер виртуальной машины и параметры хранилища](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/4-vm.png)

<span data-ttu-id="9b4ab-222">Проверьте значения параметров и щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-222">Review the settings, and then click **OK**.</span></span>

#### <a name="a-note-about-storage"></a><span data-ttu-id="9b4ab-223">Примечание о хранилище</span><span class="sxs-lookup"><span data-stu-id="9b4ab-223">A note about storage</span></span>
<span data-ttu-id="9b4ab-224">Дополнительная оптимизация зависит от размера дисков данных SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-224">Additional optimizations depend on the size of the SQL Server data disks.</span></span> <span data-ttu-id="9b4ab-225">Azure добавляет дополнительное хранилище класса Premium размером 1 ТБ для каждого терабайта данных на диске.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-225">For each terabyte of data disk, Azure adds an additional 1 TB premium storage.</span></span> <span data-ttu-id="9b4ab-226">Если для сервера требуется 2 ТБ или больше, шаблон создает пул носителей для каждой виртуальной машины SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-226">When a server requires 2 TB or more, the template creates a storage pool on each SQL Server virtual machine.</span></span> <span data-ttu-id="9b4ab-227">Пул носителей — это виртуализация хранилища, при которой настраиваются несколько дисков для обеспечения большей емкости, гибкости и производительности.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-227">A storage pool is a form of storage virtualization where multiple discs are configured to provide higher capacity, resiliency, and performance.</span></span>  <span data-ttu-id="9b4ab-228">Шаблон создает в пуле носителей дисковое пространство и предоставляет операционной системе как отдельный диск данных,</span><span class="sxs-lookup"><span data-stu-id="9b4ab-228">The template then creates a storage space on the storage pool and presents a single data disk to the operating system.</span></span> <span data-ttu-id="9b4ab-229">а затем назначает его как диск данных для SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-229">The template designates this disk as the data disk for SQL Server.</span></span> <span data-ttu-id="9b4ab-230">Шаблон настраивает пул носителей для SQL Server со следующими параметрами:</span><span class="sxs-lookup"><span data-stu-id="9b4ab-230">The template tunes the storage pool for SQL Server by using the following settings:</span></span>

* <span data-ttu-id="9b4ab-231">Размер полосы — это настройка блока чередования для виртуального диска.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-231">Stripe size is the interleave setting for the virtual disk.</span></span> <span data-ttu-id="9b4ab-232">Для транзакционных рабочих нагрузок используйте размер в 64 КБ.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-232">Transactional workloads use 64 KB.</span></span> <span data-ttu-id="9b4ab-233">Для рабочих нагрузок хранилища данных используйте размер в 256 КБ.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-233">Data warehousing workloads use 256 KB.</span></span>
* <span data-ttu-id="9b4ab-234">Для типа устойчивости выбирается параметр "Простой (без устойчивости)".</span><span class="sxs-lookup"><span data-stu-id="9b4ab-234">Resiliency is simple (no resiliency).</span></span>

> [!NOTE]
> <span data-ttu-id="9b4ab-235">Хранилище Azure класса Premium является локально избыточным хранилищем, которое хранит три копии данных в одном регионе. Поэтому для пула носителей дополнительная устойчивость не требуется.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-235">Azure premium storage is locally redundant and keeps three copies of the data within a single region, so additional resiliency at the storage pool is not required.</span></span>
>
>

* <span data-ttu-id="9b4ab-236">Количество столбцов равно количеству дисков в пуле носителей.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-236">Column count equals the number of disks in the storage pool.</span></span>

<span data-ttu-id="9b4ab-237">Дополнительные сведения о дисковом пространстве и пулах носителей:</span><span class="sxs-lookup"><span data-stu-id="9b4ab-237">For additional information about storage space and storage pools, see:</span></span>

* <span data-ttu-id="9b4ab-238">[Обзор дисковых пространств](http://technet.microsoft.com/library/hh831739.aspx);</span><span class="sxs-lookup"><span data-stu-id="9b4ab-238">[Storage Spaces Overview](http://technet.microsoft.com/library/hh831739.aspx)</span></span>
* [<span data-ttu-id="9b4ab-239">Windows Server Backup and Storage Pools (Резервное копирование данных Windows Server и пулы носителей)</span><span class="sxs-lookup"><span data-stu-id="9b4ab-239">Windows Server Backup and Storage Pools</span></span>](http://technet.microsoft.com/library/dn390929.aspx)

<span data-ttu-id="9b4ab-240">Дополнительные рекомендации по настройке SQL Server см. в статье [Рекомендации по оптимизации производительности SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-performance.md).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-240">For more information about SQL Server configuration best practices, see [Performance best practices for SQL Server in Azure virtual machines](virtual-machines-windows-sql-performance.md).</span></span>

### <a name="sql-server-settings"></a><span data-ttu-id="9b4ab-241">Параметры SQL Server</span><span class="sxs-lookup"><span data-stu-id="9b4ab-241">SQL Server settings</span></span>
<span data-ttu-id="9b4ab-242">В разделе **Настройки SQL Server** проверьте и при необходимости измените префикс имени виртуальной машины SQL Server, версию SQL Server, учетную запись и пароль для службы SQL Server, а также расписание автоматической установки исправлений на серверы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-242">On **SQL Server settings**, review and modify the SQL Server virtual machine name prefix, SQL Server version, SQL Server service account and password, and the SQL auto-patching maintenance schedule.</span></span>

* <span data-ttu-id="9b4ab-243">**SQL Server Name Prefix** (Префикс имени SQL Server) — используется для создания имен виртуальных машин SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-243">**SQL Server Name Prefix** is used to create a name for each SQL Server virtual machine.</span></span> <span data-ttu-id="9b4ab-244">Мы будем использовать префикс **sqlserver**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-244">For this tutorial, use **sqlserver**.</span></span> <span data-ttu-id="9b4ab-245">Имена шаблонов для виртуальных машин SQL Server: *sqlserver-0* и *sqlserver-1*.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-245">The template names the SQL Server virtual machines *sqlserver-0* and *sqlserver-1*.</span></span>
* <span data-ttu-id="9b4ab-246">**Версия SQL Server** — используемая версия SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-246">**SQL Server version** is the version of SQL Server.</span></span> <span data-ttu-id="9b4ab-247">Мы будем использовать версию **SQL Server 2014**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-247">For this tutorial use **SQL Server 2014**.</span></span> <span data-ttu-id="9b4ab-248">Можно также выбрать **SQL Server 2012** или **SQL Server 2016**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-248">You can also choose **SQL Server 2012** or **SQL Server 2016**.</span></span>
* <span data-ttu-id="9b4ab-249">**SQL Server service account user name** (Имя пользователя учетной записи службы SQL Server) — имя учетной записи домена для службы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-249">**SQL Server service account user name** is the domain account name for the SQL Server service.</span></span> <span data-ttu-id="9b4ab-250">Мы будем использовать **sqlservice**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-250">For this tutorial, use **sqlservice**.</span></span>
* <span data-ttu-id="9b4ab-251">**Пароль** — пароль к учетной записи службы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-251">**Password** is the password for the SQL Server service account.</span></span>  <span data-ttu-id="9b4ab-252">Следует использовать сложный пароль.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-252">Use a complex password.</span></span> <span data-ttu-id="9b4ab-253">Подтвердите пароль.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-253">Confirm the password.</span></span>
* <span data-ttu-id="9b4ab-254">**SQL Auto Patching maintenance schedule** (Расписание автоматической установки исправлений на серверы SQL Server) — здесь указывается день недели, в который Azure будет автоматически устанавливать исправления на серверы SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-254">**SQL Auto Patching maintenance schedule** identifies the day of the week that Azure automatically patches the SQL Servers.</span></span> <span data-ttu-id="9b4ab-255">Мы будем использовать значение **воскресенье**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-255">For this tutorial, type **Sunday**.</span></span>
* <span data-ttu-id="9b4ab-256">**SQL Auto Patching maintenance start hour** (Время запуска автоматической установки исправлений на серверы SQL) — время суток в соответствующем регионе Azure, в которое будет запущена автоматическая установка исправлений.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-256">**SQL Auto Patching maintenance start hour** is the time of day for the Azure region when automatic patching begins.</span></span>

> [!NOTE]
> <span data-ttu-id="9b4ab-257">Операции по установке исправлений для каждой виртуальной машины выполняются поочередно, со сдвигом в один час.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-257">The patching window for each virtual machine is staggered by one hour.</span></span> <span data-ttu-id="9b4ab-258">Чтобы избежать перебоев в работе служб, исправления устанавливаются только на одну виртуальную машину в любой момент времени.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-258">Only one virtual machine is patched at a time to prevent disruption of services.</span></span>
>
>

![Параметры SQL Server](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/5-sql.png)

<span data-ttu-id="9b4ab-260">Проверьте значения параметров и щелкните **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-260">Review the settings, and then click **OK**.</span></span>

### <a name="summary"></a><span data-ttu-id="9b4ab-261">Сводка</span><span class="sxs-lookup"><span data-stu-id="9b4ab-261">Summary</span></span>
<span data-ttu-id="9b4ab-262">На странице сводных данных можно просмотреть параметры Azure,</span><span class="sxs-lookup"><span data-stu-id="9b4ab-262">On the summary page, Azure validates the settings.</span></span> <span data-ttu-id="9b4ab-263">а также загрузить шаблон.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-263">You can also download the template.</span></span> <span data-ttu-id="9b4ab-264">Проверьте сводные данные.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-264">Review the summary.</span></span> <span data-ttu-id="9b4ab-265">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-265">Click **OK**.</span></span>

### <a name="buy"></a><span data-ttu-id="9b4ab-266">Купить</span><span class="sxs-lookup"><span data-stu-id="9b4ab-266">Buy</span></span>
<span data-ttu-id="9b4ab-267">Эта последняя колонка содержит **условия использования** и **политику конфиденциальности**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-267">This final blade contains **terms of use**, and **privacy policy**.</span></span> <span data-ttu-id="9b4ab-268">Просмотрите эту информацию.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-268">Review this information.</span></span> <span data-ttu-id="9b4ab-269">Когда вы подготовите все необходимое для создания виртуальных машин в Azure, в том числе ресурсы для группы доступности, щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-269">When you are ready for Azure to start to create the virtual machines and all the other required resources for the availability group, click **Create**.</span></span>

<span data-ttu-id="9b4ab-270">На портале Azure будет создана группа ресурсов и все необходимые ресурсы.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-270">The Azure portal creates the resource group and all the resources.</span></span>

## <a name="monitor-deployment"></a><span data-ttu-id="9b4ab-271">Мониторинг развертывания</span><span class="sxs-lookup"><span data-stu-id="9b4ab-271">Monitor deployment</span></span>
<span data-ttu-id="9b4ab-272">На портале Azure можно следить за ходом развертывания.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-272">Monitor the deployment progress from the Azure portal.</span></span> <span data-ttu-id="9b4ab-273">Значок, представляющий развертывание, автоматически закрепляется на панели мониторинга портала Azure.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-273">An icon that represents the deployment is automatically pinned to the Azure portal dashboard.</span></span>

![Панель мониторинга Azure](./media/virtual-machines-windows-portal-sql-alwayson-availability-groups/11-deploydashboard.png)

## <a name="connect-to-sql-server"></a><span data-ttu-id="9b4ab-275">Подключение к SQL Server</span><span class="sxs-lookup"><span data-stu-id="9b4ab-275">Connect to SQL Server</span></span>
<span data-ttu-id="9b4ab-276">Новые экземпляры SQL Server выполняются на виртуальных машинах с IP-адресами, подключенных к Интернету.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-276">The new instances of SQL Server are running on virtual machines that have internet-connected IP addresses.</span></span> <span data-ttu-id="9b4ab-277">Вы можете напрямую подключиться к каждой виртуальной машине SQL Server по протоколу удаленного рабочего стола (RDP).</span><span class="sxs-lookup"><span data-stu-id="9b4ab-277">You can remote desktop (RDP) directly to each SQL Server virtual machine.</span></span>

<span data-ttu-id="9b4ab-278">Подключиться к SQL Server по протоколу RDP можно следующим образом.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-278">To RDP to a SQL Server, follow these steps:</span></span>

1. <span data-ttu-id="9b4ab-279">На панели мониторинга портала Azure убедитесь, что развертывание выполнено успешно.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-279">From the Azure portal dashboard, verify that the deployment has succeeded.</span></span>
2. <span data-ttu-id="9b4ab-280">Щелкните **Ресурсы**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-280">Click **Resources**.</span></span>
3. <span data-ttu-id="9b4ab-281">В колонке **Ресурсы** щелкните **sqlserver-0**. Это имя одной из виртуальных машин, на которых выполняется SQL Server.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-281">In the **Resources** blade, click **sqlserver-0**, which is the computer name of one of the virtual machines that's running SQL Server.</span></span>
4. <span data-ttu-id="9b4ab-282">В колонке **sqlserver-0** щелкните **Подключиться**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-282">On the blade for **sqlserver-0**, click **Connect**.</span></span> <span data-ttu-id="9b4ab-283">В браузере отобразится сообщение с предложением открыть или сохранить объект удаленного подключения.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-283">Your browser asks if you want to open or save the remote connection object.</span></span> <span data-ttu-id="9b4ab-284">Щелкните **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-284">Click **Open**.</span></span>
5. <span data-ttu-id="9b4ab-285">В окне **Подключение к удаленному рабочему столу** может появиться предупреждение о том, что издателя этого удаленного подключения невозможно определить.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-285">**Remote desktop connection** might warn you that the publisher of this remote connection can’t be identified.</span></span> <span data-ttu-id="9b4ab-286">Щелкните **Подключить**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-286">Click **Connect**.</span></span>
6. <span data-ttu-id="9b4ab-287">Служба безопасности Windows предложит вам ввести учетные данные для подключения к IP-адресу основного контроллера домена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-287">Windows security prompts you to enter your credentials to connect to the IP address of the primary domain controller.</span></span> <span data-ttu-id="9b4ab-288">Щелкните **Использовать другую учетную запись**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-288">Click **Use another account**.</span></span> <span data-ttu-id="9b4ab-289">В поле **Имя пользователя** введите **contoso\DomainAdmin**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-289">For **User name**, type **contoso\DomainAdmin**.</span></span> <span data-ttu-id="9b4ab-290">Эта учетная запись была настроена при указании имени администратора в шаблоне.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-290">You configured this account when you set the administrator user name in the template.</span></span> <span data-ttu-id="9b4ab-291">Используйте сложный пароль, введенный во время настройки шаблона.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-291">Use the complex password that you chose when you configured the template.</span></span>
7. <span data-ttu-id="9b4ab-292">В окне **удаленного рабочего стола** может появиться предупреждение о том, что проверка подлинности удаленного компьютера не может быть выполнена из-за проблем с сертификатом безопасности.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-292">**Remote desktop** might warn you that the remote computer could not be authenticated due to problems with its security certificate.</span></span> <span data-ttu-id="9b4ab-293">В нем будет отображено имя сертификата безопасности.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-293">It shows you the security certificate name.</span></span> <span data-ttu-id="9b4ab-294">Если вы следовали инструкциям в руководстве, здесь указано значение **sqlserver-0.contoso.com**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-294">If you followed the tutorial, the name is **sqlserver-0.contoso.com**.</span></span> <span data-ttu-id="9b4ab-295">Щелкните **Да**.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-295">Click **Yes**.</span></span>

<span data-ttu-id="9b4ab-296">Теперь вы подключены к виртуальной машине SQL Server по протоколу RDP.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-296">You are now connected with RDP to the SQL Server virtual machine.</span></span> <span data-ttu-id="9b4ab-297">Откройте SQL Server Management Studio, подключитесь к экземпляру SQL Server по умолчанию и убедитесь, что группа доступности настроена.</span><span class="sxs-lookup"><span data-stu-id="9b4ab-297">You can open SQL Server Management Studio, connect to the default instance of SQL Server, and verify that the availability group is configured.</span></span>
