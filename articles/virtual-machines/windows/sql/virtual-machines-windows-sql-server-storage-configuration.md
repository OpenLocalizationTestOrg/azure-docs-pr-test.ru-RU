---
title: "Настройка хранилища для виртуальных машин SQL Server | Документация Майкрософт"
description: "В этой статье описывается процесс настройки хранилища для виртуальных машин SQL Server на портале Azure во время подготовки (модель развертывания с помощью Resource Manager). Здесь также описывается настройка хранилища для имеющихся виртуальных машин SQL Server."
services: virtual-machines-windows
documentationcenter: na
author: ninarn
manager: jhubbard
tags: azure-resource-manager
ms.assetid: 169fc765-3269-48fa-83f1-9fe3e4e40947
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 01/31/2017
ms.author: ninarn
ms.openlocfilehash: f10bac1189c94a581487d19fc0cc129acec6a636
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="storage-configuration-for-sql-server-vms"></a><span data-ttu-id="b4efa-104">Настройка хранилища для виртуальных машин SQL Server</span><span class="sxs-lookup"><span data-stu-id="b4efa-104">Storage configuration for SQL Server VMs</span></span>
<span data-ttu-id="b4efa-105">При настройке образа виртуальной машины SQL Server на портале Azure некоторые процессы конфигурации хранилища выполняются автоматически.</span><span class="sxs-lookup"><span data-stu-id="b4efa-105">When you configure a SQL Server virtual machine image in Azure, the Portal helps to automate your storage configuration.</span></span> <span data-ttu-id="b4efa-106">К этим процессам относится подключение хранилища к виртуальной машине, предоставление SQL Server доступа к нему и настройка параметров, которые позволяют оптимизировать производительность хранилища.</span><span class="sxs-lookup"><span data-stu-id="b4efa-106">This includes attaching storage to the VM, making that storage accessible to SQL Server, and configuring it to optimize for your specific performance requirements.</span></span>

<span data-ttu-id="b4efa-107">В этой статье описывается процесс настройки хранилища для подготавливаемых и уже имеющихся виртуальных машин SQL Server на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="b4efa-107">This topic explains how Azure configures storage for your SQL Server VMs both during provisioning and for existing VMs.</span></span> <span data-ttu-id="b4efa-108">Эта конфигурация основана на [рекомендациях по оптимизации производительности](virtual-machines-windows-sql-performance.md) для виртуальных машин Azure с SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b4efa-108">This configuration is based on the [performance best practices](virtual-machines-windows-sql-performance.md) for Azure VMs running SQL Server.</span></span>

[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-rm-include.md)]

## <a name="prerequisites"></a><span data-ttu-id="b4efa-109">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="b4efa-109">Prerequisites</span></span>
<span data-ttu-id="b4efa-110">Для поддержки параметров автоматической настройки хранилища виртуальная машина должна:</span><span class="sxs-lookup"><span data-stu-id="b4efa-110">To use the automated storage configuration settings, your virtual machine requires the following characteristics:</span></span>

* <span data-ttu-id="b4efa-111">быть подготовлена с помощью [коллекции образов SQL Server](virtual-machines-windows-sql-server-iaas-overview.md#option-1-create-a-sql-vm-with-per-minute-licensing);</span><span class="sxs-lookup"><span data-stu-id="b4efa-111">Provisioned with a [SQL Server gallery image](virtual-machines-windows-sql-server-iaas-overview.md#option-1-create-a-sql-vm-with-per-minute-licensing).</span></span>
* <span data-ttu-id="b4efa-112">использовать [модель развертывания с помощью Resource Manager](../../../azure-resource-manager/resource-manager-deployment-model.md);</span><span class="sxs-lookup"><span data-stu-id="b4efa-112">Uses the [Resource Manager deployment model](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span>
* <span data-ttu-id="b4efa-113">использовать [хранилище класса Premium](../../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="b4efa-113">Uses [Premium Storage](../../../storage/common/storage-premium-storage.md).</span></span>

## <a name="new-vms"></a><span data-ttu-id="b4efa-114">Новые виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="b4efa-114">New VMs</span></span>
<span data-ttu-id="b4efa-115">В следующих разделах описаны действия по настройке хранилища для новых виртуальных машин SQL Server.</span><span class="sxs-lookup"><span data-stu-id="b4efa-115">The following sections describe how to configure storage for new SQL Server virtual machines.</span></span>

### <a name="azure-portal"></a><span data-ttu-id="b4efa-116">Портал Azure</span><span class="sxs-lookup"><span data-stu-id="b4efa-116">Azure Portal</span></span>
<span data-ttu-id="b4efa-117">При подготовке виртуальной машины Azure с помощью образа SQL Server из коллекции хранилище для нее можно настроить автоматически.</span><span class="sxs-lookup"><span data-stu-id="b4efa-117">When provisioning an Azure VM using a SQL Server gallery image, you can choose to automatically configure the storage for your new VM.</span></span> <span data-ttu-id="b4efa-118">Можно указать размер хранилища, а также определить ограничения производительности и тип рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="b4efa-118">You specify the storage size, performance limits, and workload type.</span></span> <span data-ttu-id="b4efa-119">На следующем снимке экрана показана колонка "Конфигурация хранилища", используемая при подготовке виртуальной машины SQL.</span><span class="sxs-lookup"><span data-stu-id="b4efa-119">The following screenshot shows the Storage configuration blade used during SQL VM provisioning.</span></span>

![Настройка хранилища для виртуальной машины SQL Server во время подготовки](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-provisioning.png)

<span data-ttu-id="b4efa-121">После создания виртуальной машины в зависимости от вашего выбора Azure выполняет следующие задачи по настройке хранилища:</span><span class="sxs-lookup"><span data-stu-id="b4efa-121">Based on your choices, Azure performs the following storage configuration tasks after creating the VM:</span></span>

* <span data-ttu-id="b4efa-122">создает и присоединяет к виртуальной машине диски данных хранилища класса Premium;</span><span class="sxs-lookup"><span data-stu-id="b4efa-122">Creates and attaches premium storage data disks to the virtual machine.</span></span>
* <span data-ttu-id="b4efa-123">настраивает доступность дисков данных для SQL Server;</span><span class="sxs-lookup"><span data-stu-id="b4efa-123">Configures the data disks to be accessible to SQL Server.</span></span>
* <span data-ttu-id="b4efa-124">настраивает диски данных в пуле носителей в зависимости от указанных требований к размеру и производительности (операции ввода-вывода в секунду и пропускная способность);</span><span class="sxs-lookup"><span data-stu-id="b4efa-124">Configures the data disks into a storage pool based on the specified size and performance (IOPS and throughput) requirements.</span></span>
* <span data-ttu-id="b4efa-125">связывает пул носителей с новым диском на виртуальной машине;</span><span class="sxs-lookup"><span data-stu-id="b4efa-125">Associates the storage pool with a new drive on the virtual machine.</span></span>
* <span data-ttu-id="b4efa-126">оптимизирует этот диск в зависимости от указанного типа рабочей нагрузки ("Хранилище данных", "Обработка транзакций" или "Общая").</span><span class="sxs-lookup"><span data-stu-id="b4efa-126">Optimizes this new drive based on your specified workload type (Data warehousing, Transactional processing, or General).</span></span>

<span data-ttu-id="b4efa-127">Дополнительные сведения о настройке параметров хранилища в Azure см. в разделе [Конфигурация хранилища](#storage-configuration).</span><span class="sxs-lookup"><span data-stu-id="b4efa-127">For further details on how Azure configures storage settings, see the [Storage configuration section](#storage-configuration).</span></span> <span data-ttu-id="b4efa-128">Полное пошаговое руководство по созданию виртуальной машины SQL Server на портале Azure см. в статье [Подготовка виртуальной машины SQL Server на портале Azure](virtual-machines-windows-portal-sql-server-provision.md).</span><span class="sxs-lookup"><span data-stu-id="b4efa-128">For a full walkthrough of how to create a SQL Server VM in the Azure Portal, see [the provisioning tutorial](virtual-machines-windows-portal-sql-server-provision.md).</span></span>

### <a name="resource-manage-templates"></a><span data-ttu-id="b4efa-129">Шаблоны Resource Manager</span><span class="sxs-lookup"><span data-stu-id="b4efa-129">Resource Manage templates</span></span>
<span data-ttu-id="b4efa-130">При использовании следующих шаблонов Resource Manager по умолчанию к виртуальной машине присоединяются два диска данных класса Premium. В этом случае пул носителей не настраивается.</span><span class="sxs-lookup"><span data-stu-id="b4efa-130">If you use the following Resource Manager templates, two premium data disks are attached by default, with no storage pool configuration.</span></span> <span data-ttu-id="b4efa-131">Однако эти шаблоны можно настроить, чтобы изменить количество дисков данных класса Premium, присоединенных к виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="b4efa-131">However, you can customize these templates to change the number of premium data disks that are attached to the virtual machine.</span></span>

* [<span data-ttu-id="b4efa-132">Создание виртуальной машины с поддержкой автоматической архивации</span><span class="sxs-lookup"><span data-stu-id="b4efa-132">Create VM with Automated Backup</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-autobackup)
* [<span data-ttu-id="b4efa-133">Создание виртуальной машины с автоматической установкой исправлений</span><span class="sxs-lookup"><span data-stu-id="b4efa-133">Create VM with Automated Patching</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-autopatching)
* [<span data-ttu-id="b4efa-134">Создание виртуальной машины с интеграцией AKV</span><span class="sxs-lookup"><span data-stu-id="b4efa-134">Create VM with AKV Integration</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/201-vm-sql-full-keyvault)

## <a name="existing-vms"></a><span data-ttu-id="b4efa-135">Существующие виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="b4efa-135">Existing VMs</span></span>
<span data-ttu-id="b4efa-136">Для имеющихся виртуальных машин SQL Server на портале Azure можно изменить некоторые параметры хранилища.</span><span class="sxs-lookup"><span data-stu-id="b4efa-136">For existing SQL Server VMs, you can modify some storage settings in the Azure portal.</span></span> <span data-ttu-id="b4efa-137">Выберите виртуальную машину, перейдите в область "Параметры" и выберите "Конфигурация SQL Server".</span><span class="sxs-lookup"><span data-stu-id="b4efa-137">Select your VM, go to the Settings area, and then select SQL Server Configuration.</span></span> <span data-ttu-id="b4efa-138">В колонке "Конфигурация SQL Server" отображаются сведения о текущем использовании хранилища вашей виртуальной машиной.</span><span class="sxs-lookup"><span data-stu-id="b4efa-138">The SQL Server Configuration blade shows the current storage usage of your VM.</span></span> <span data-ttu-id="b4efa-139">На этой диаграмме отображаются все диски, подключенные к виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="b4efa-139">All drives that exist on your VM are displayed in this chart.</span></span> <span data-ttu-id="b4efa-140">Дисковое пространство для каждого диска разбито на 4 раздела:</span><span class="sxs-lookup"><span data-stu-id="b4efa-140">For each drive, the storage space displays in four sections:</span></span>

* <span data-ttu-id="b4efa-141">данные SQL;</span><span class="sxs-lookup"><span data-stu-id="b4efa-141">SQL data</span></span>
* <span data-ttu-id="b4efa-142">журнал SQL;</span><span class="sxs-lookup"><span data-stu-id="b4efa-142">SQL log</span></span>
* <span data-ttu-id="b4efa-143">прочее (не хранилище SQL);</span><span class="sxs-lookup"><span data-stu-id="b4efa-143">Other (non-SQL storage)</span></span>
* <span data-ttu-id="b4efa-144">Доступна</span><span class="sxs-lookup"><span data-stu-id="b4efa-144">Available</span></span>

![Настройка хранилища для имеющейся виртуальной машины SQL Server](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-existing.png)

<span data-ttu-id="b4efa-146">Чтобы настроить хранилище для добавления нового диска или расширения имеющегося, щелкните над диаграммой ссылку "Изменить".</span><span class="sxs-lookup"><span data-stu-id="b4efa-146">To configure the storage to add a new drive or extend an existing drive, click the Edit link above the chart.</span></span>

<span data-ttu-id="b4efa-147">Отображаемые параметры настройки зависят от того, использовали ли вы эту возможность раньше.</span><span class="sxs-lookup"><span data-stu-id="b4efa-147">The configuration options that you see varies depending on whether you have used this feature before.</span></span> <span data-ttu-id="b4efa-148">При первом использовании можно указать собственные требования к хранилищу для нового диска.</span><span class="sxs-lookup"><span data-stu-id="b4efa-148">When using for the first time, you can specify your storage requirements for a new drive.</span></span> <span data-ttu-id="b4efa-149">Если вы ранее использовали эту возможность для создания диска, его объем можно расширить.</span><span class="sxs-lookup"><span data-stu-id="b4efa-149">If you previously used this feature to create a drive, you can choose to extend that drive’s storage.</span></span>

### <a name="use-for-the-first-time"></a><span data-ttu-id="b4efa-150">Первое использование</span><span class="sxs-lookup"><span data-stu-id="b4efa-150">Use for the first time</span></span>
<span data-ttu-id="b4efa-151">При первом использовании этой возможности можно указать размер хранилища и определить ограничения производительности для нового диска.</span><span class="sxs-lookup"><span data-stu-id="b4efa-151">If it is your first time using this feature, you can specify the storage size and performance limits for a new drive.</span></span> <span data-ttu-id="b4efa-152">В целом этот процесс аналогичен настройке в ходе подготовки,</span><span class="sxs-lookup"><span data-stu-id="b4efa-152">This experience is similar to what you would see at provisioning time.</span></span> <span data-ttu-id="b4efa-153">а основное различие заключается в том, что вы не можете указать тип рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="b4efa-153">The main difference is that you are not permitted to specify the workload type.</span></span> <span data-ttu-id="b4efa-154">Это ограничение позволяет предотвратить нарушение имеющихся конфигураций SQL Server на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="b4efa-154">This restriction prevents disrupting any existing SQL Server configurations on the virtual machine.</span></span>

![Ползунки настройки хранилища для SQL Server](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-usage-sliders.png)

<span data-ttu-id="b4efa-156">Azure создает диск на основе ваших параметров.</span><span class="sxs-lookup"><span data-stu-id="b4efa-156">Azure creates a new drive based on your specifications.</span></span> <span data-ttu-id="b4efa-157">В этом сценарии Azure выполняет следующие задачи по настройке хранилища:</span><span class="sxs-lookup"><span data-stu-id="b4efa-157">In this scenario, Azure performs the following storage configuration tasks:</span></span>

* <span data-ttu-id="b4efa-158">создает и присоединяет к виртуальной машине диски данных хранилища класса Premium;</span><span class="sxs-lookup"><span data-stu-id="b4efa-158">Creates and attaches premium storage data disks to the virtual machine.</span></span>
* <span data-ttu-id="b4efa-159">настраивает доступность дисков данных для SQL Server;</span><span class="sxs-lookup"><span data-stu-id="b4efa-159">Configures the data disks to be accessible to SQL Server.</span></span>
* <span data-ttu-id="b4efa-160">настраивает диски данных в пуле носителей в зависимости от указанных требований к размеру и производительности (операции ввода-вывода в секунду и пропускная способность);</span><span class="sxs-lookup"><span data-stu-id="b4efa-160">Configures the data disks into a storage pool based on the specified size and performance (IOPS and throughput) requirements.</span></span>
* <span data-ttu-id="b4efa-161">связывает пул носителей с новым диском на виртуальной машине;</span><span class="sxs-lookup"><span data-stu-id="b4efa-161">Associates the storage pool with a new drive on the virtual machine.</span></span>

<span data-ttu-id="b4efa-162">Дополнительные сведения о настройке параметров хранилища в Azure см. в разделе [Конфигурация хранилища](#storage-configuration).</span><span class="sxs-lookup"><span data-stu-id="b4efa-162">For further details on how Azure configures storage settings, see the [Storage configuration section](#storage-configuration).</span></span>

### <a name="add-a-new-drive"></a><span data-ttu-id="b4efa-163">Добавление нового диска</span><span class="sxs-lookup"><span data-stu-id="b4efa-163">Add a new drive</span></span>
<span data-ttu-id="b4efa-164">Если хранилище на виртуальной машине SQL Server уже настроено, появится два параметра, позволяющие его расширить.</span><span class="sxs-lookup"><span data-stu-id="b4efa-164">If you have already configured storage on your SQL Server VM, expanding storage brings up two new options.</span></span> <span data-ttu-id="b4efa-165">Первый параметр позволяет добавить новый диск, чтобы повысить уровень производительности виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="b4efa-165">The first option is to add a new drive, which can increase the performance level of your VM.</span></span>

![Добавление нового диска к виртуальной машине SQL](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-configuration-add-new-drive.png)

<span data-ttu-id="b4efa-167">Однако после добавления диска для оптимизации производительности понадобится выполнить некоторые дополнительные настройки вручную.</span><span class="sxs-lookup"><span data-stu-id="b4efa-167">However, after adding the drive, you must perform some extra manual configuration to achieve the performance increase.</span></span>

### <a name="extend-the-drive"></a><span data-ttu-id="b4efa-168">Расширение диска</span><span class="sxs-lookup"><span data-stu-id="b4efa-168">Extend the drive</span></span>
<span data-ttu-id="b4efa-169">Другой параметр позволяет увеличить размер имеющегося диска.</span><span class="sxs-lookup"><span data-stu-id="b4efa-169">The other option for expanding storage is to extend the existing drive.</span></span> <span data-ttu-id="b4efa-170">Он увеличивает количество доступной для хранения памяти, но не повышает производительность.</span><span class="sxs-lookup"><span data-stu-id="b4efa-170">This option increases the available storage for your drive, but it does not increase performance.</span></span> <span data-ttu-id="b4efa-171">После создания пула носителей вы не сможете изменить количество столбцов.</span><span class="sxs-lookup"><span data-stu-id="b4efa-171">With storage pools, you cannot alter the number of columns after the storage pool is created.</span></span> <span data-ttu-id="b4efa-172">Количество столбцов определяет число параллельных операций записи, которые могут распределяться по дискам данных.</span><span class="sxs-lookup"><span data-stu-id="b4efa-172">The number of columns determines the number of parallel writes, which can be striped across the data disks.</span></span> <span data-ttu-id="b4efa-173">Поэтому добавление дисков данных не поможет вам повысить производительность.</span><span class="sxs-lookup"><span data-stu-id="b4efa-173">Therefore, any added data disks cannot increase performance.</span></span> <span data-ttu-id="b4efa-174">Они просто предоставляют дополнительное хранилище для записи данных.</span><span class="sxs-lookup"><span data-stu-id="b4efa-174">They can only provide more storage for the data being written.</span></span> <span data-ttu-id="b4efa-175">Это ограничение также означает, что при расширении диска количество столбцов определяет минимальное число дисков данных, которые можно добавить.</span><span class="sxs-lookup"><span data-stu-id="b4efa-175">This limitation also means that, when extending the drive, the number of columns determines the minimum number of data disks that you can add.</span></span> <span data-ttu-id="b4efa-176">Таким образом, если вы создаете пул носителей с четырьмя дисками, столбцов также будет четыре.</span><span class="sxs-lookup"><span data-stu-id="b4efa-176">So if you create a storage pool with four data disks, the number of columns is also four.</span></span> <span data-ttu-id="b4efa-177">Каждый раз при расширении хранилища необходимо добавлять по крайней мере четыре диска данных.</span><span class="sxs-lookup"><span data-stu-id="b4efa-177">Any time you extend the storage, you must add at least four data disks.</span></span>

![Расширения диска для виртуальной машины SQL](./media/virtual-machines-windows-sql-storage-configuration/sql-vm-storage-extend-a-drive.png)

## <a name="storage-configuration"></a><span data-ttu-id="b4efa-179">Конфигурация хранилища</span><span class="sxs-lookup"><span data-stu-id="b4efa-179">Storage configuration</span></span>
<span data-ttu-id="b4efa-180">В этом разделе приведена справочная информация по изменениям конфигурации хранилища, которые Azure выполняет автоматически во время подготовки или настройки виртуальной машины SQL на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="b4efa-180">This section provides a reference for the storage configuration changes that Azure automatically performs during SQL VM provisioning or configuration in the Azure Portal.</span></span>

* <span data-ttu-id="b4efa-181">Если для виртуальной машины выбрано хранилище объемом менее 2 ТБ, Azure не создает пул носителей,</span><span class="sxs-lookup"><span data-stu-id="b4efa-181">If you have selected fewer than two TBs of storage for your VM, Azure does not create a storage pool.</span></span>
* <span data-ttu-id="b4efa-182">а если 2 ТБ или больше — пул носителей создается.</span><span class="sxs-lookup"><span data-stu-id="b4efa-182">If you have selected at least two TBs of storage for your VM, Azure configures a storage pool.</span></span> <span data-ttu-id="b4efa-183">В следующем разделе этой статьи приведены сведения о конфигурации пула носителей.</span><span class="sxs-lookup"><span data-stu-id="b4efa-183">The next section of this topic provides the details of the storage pool configuration.</span></span>
* <span data-ttu-id="b4efa-184">При автоматической настройке хранилища всегда используются диски данных P30 [хранилища класса Premium](../../../storage/common/storage-premium-storage.md) .</span><span class="sxs-lookup"><span data-stu-id="b4efa-184">Automatic storage configuration always uses [premium storage](../../../storage/common/storage-premium-storage.md) P30 data disks.</span></span> <span data-ttu-id="b4efa-185">Следовательно, между выбранным числом терабайт и количеством дисков, прикрепленных к виртуальной машине, существует полноценное сопоставление.</span><span class="sxs-lookup"><span data-stu-id="b4efa-185">Consequently, there is a 1:1 mapping between your selected number of Terabytes and the number of data disks attached to your VM.</span></span>

<span data-ttu-id="b4efa-186">Сведения о ценах см. на странице [Цены на хранилища Azure](https://azure.microsoft.com/pricing/details/storage) на вкладке **Хранилище дисков**.</span><span class="sxs-lookup"><span data-stu-id="b4efa-186">For pricing information, see the [Storage pricing](https://azure.microsoft.com/pricing/details/storage) page on the **Disk Storage** tab.</span></span>

### <a name="creation-of-the-storage-pool"></a><span data-ttu-id="b4efa-187">Создание пула носителей</span><span class="sxs-lookup"><span data-stu-id="b4efa-187">Creation of the storage pool</span></span>
<span data-ttu-id="b4efa-188">Для создания пула носителей на виртуальных машинах SQL Server Azure использует следующие параметры.</span><span class="sxs-lookup"><span data-stu-id="b4efa-188">Azure uses the following settings to create the storage pool on SQL Server VMs.</span></span>

| <span data-ttu-id="b4efa-189">Настройка</span><span class="sxs-lookup"><span data-stu-id="b4efa-189">Setting</span></span> | <span data-ttu-id="b4efa-190">Значение</span><span class="sxs-lookup"><span data-stu-id="b4efa-190">Value</span></span> |
| --- | --- |
| <span data-ttu-id="b4efa-191">Размер полосы</span><span class="sxs-lookup"><span data-stu-id="b4efa-191">Stripe size</span></span> |<span data-ttu-id="b4efa-192">256 КБ (хранение данных), 64 КБ (обработка транзакций)</span><span class="sxs-lookup"><span data-stu-id="b4efa-192">256 KB (Data warehousing); 64 KB (Transactional)</span></span> |
| <span data-ttu-id="b4efa-193">Размеры диска</span><span class="sxs-lookup"><span data-stu-id="b4efa-193">Disk sizes</span></span> |<span data-ttu-id="b4efa-194">1 ТБ каждый</span><span class="sxs-lookup"><span data-stu-id="b4efa-194">1 TB each</span></span> |
| <span data-ttu-id="b4efa-195">Кэш</span><span class="sxs-lookup"><span data-stu-id="b4efa-195">Cache</span></span> |<span data-ttu-id="b4efa-196">чтение</span><span class="sxs-lookup"><span data-stu-id="b4efa-196">Read</span></span> |
| <span data-ttu-id="b4efa-197">Размер выделения</span><span class="sxs-lookup"><span data-stu-id="b4efa-197">Allocation size</span></span> |<span data-ttu-id="b4efa-198">Размер единицы выделения NTFS — 64 КБ</span><span class="sxs-lookup"><span data-stu-id="b4efa-198">64 KB NTFS allocation unit size</span></span> |
| <span data-ttu-id="b4efa-199">Мгновенная инициализация файлов</span><span class="sxs-lookup"><span data-stu-id="b4efa-199">Instant file initialization</span></span> |<span data-ttu-id="b4efa-200">Включено</span><span class="sxs-lookup"><span data-stu-id="b4efa-200">Enabled</span></span> |
| <span data-ttu-id="b4efa-201">Блокировка страниц в памяти</span><span class="sxs-lookup"><span data-stu-id="b4efa-201">Lock pages in memory</span></span> |<span data-ttu-id="b4efa-202">Включено</span><span class="sxs-lookup"><span data-stu-id="b4efa-202">Enabled</span></span> |
| <span data-ttu-id="b4efa-203">Восстановление</span><span class="sxs-lookup"><span data-stu-id="b4efa-203">Recovery</span></span> |<span data-ttu-id="b4efa-204">Простая модель восстановления (без устойчивости)</span><span class="sxs-lookup"><span data-stu-id="b4efa-204">Simple recovery (no resiliency)</span></span> |
| <span data-ttu-id="b4efa-205">Количество столбцов</span><span class="sxs-lookup"><span data-stu-id="b4efa-205">Number of columns</span></span> |<span data-ttu-id="b4efa-206">Количество дисков данных<sup>1</sup></span><span class="sxs-lookup"><span data-stu-id="b4efa-206">Number of data disks<sup>1</sup></span></span> |
| <span data-ttu-id="b4efa-207">Расположение временной базы данных</span><span class="sxs-lookup"><span data-stu-id="b4efa-207">TempDB location</span></span> |<span data-ttu-id="b4efa-208">Хранится на дисках данных<sup>2</sup></span><span class="sxs-lookup"><span data-stu-id="b4efa-208">Stored on data disks<sup>2</sup></span></span> |

<span data-ttu-id="b4efa-209"><sup>1</sup> После создания пула носителей вы не сможете изменить в нем количество столбцов.</span><span class="sxs-lookup"><span data-stu-id="b4efa-209"><sup>1</sup> After the storage pool is created, you cannot alter the number of columns in the storage pool.</span></span>

<span data-ttu-id="b4efa-210"><sup>2</sup> Этот параметр применяется только для первого диска, созданного с помощью функции конфигурации хранилища.</span><span class="sxs-lookup"><span data-stu-id="b4efa-210"><sup>2</sup> This setting only applies to the first drive you create using the storage configuration feature.</span></span>

## <a name="workload-optimization-settings"></a><span data-ttu-id="b4efa-211">Параметры оптимизации рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="b4efa-211">Workload optimization settings</span></span>
<span data-ttu-id="b4efa-212">В следующей таблице описаны три доступных типа рабочей нагрузки и соответствующие оптимизации для каждого из них.</span><span class="sxs-lookup"><span data-stu-id="b4efa-212">The following table describes the three workload type options available and their corresponding optimizations:</span></span>

| <span data-ttu-id="b4efa-213">Тип рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="b4efa-213">Workload type</span></span> | <span data-ttu-id="b4efa-214">Описание</span><span class="sxs-lookup"><span data-stu-id="b4efa-214">Description</span></span> | <span data-ttu-id="b4efa-215">Оптимизация</span><span class="sxs-lookup"><span data-stu-id="b4efa-215">Optimizations</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b4efa-216">**Общие сведения**</span><span class="sxs-lookup"><span data-stu-id="b4efa-216">**General**</span></span> |<span data-ttu-id="b4efa-217">Значение по умолчанию, поддерживающее большинство рабочих нагрузок</span><span class="sxs-lookup"><span data-stu-id="b4efa-217">Default setting that supports most workloads</span></span> |<span data-ttu-id="b4efa-218">None</span><span class="sxs-lookup"><span data-stu-id="b4efa-218">None</span></span> |
| <span data-ttu-id="b4efa-219">**Обработка транзакций**</span><span class="sxs-lookup"><span data-stu-id="b4efa-219">**Transactional processing**</span></span> |<span data-ttu-id="b4efa-220">Оптимизирует хранилище для рабочих нагрузок OLTP в традиционных базах данных</span><span class="sxs-lookup"><span data-stu-id="b4efa-220">Optimizes the storage for traditional database OLTP workloads</span></span> |<span data-ttu-id="b4efa-221">Флаг трассировки 1117</span><span class="sxs-lookup"><span data-stu-id="b4efa-221">Trace Flag 1117</span></span><br/><span data-ttu-id="b4efa-222">Флаг трассировки 1118</span><span class="sxs-lookup"><span data-stu-id="b4efa-222">Trace Flag 1118</span></span> |
| <span data-ttu-id="b4efa-223">**Хранение данных**</span><span class="sxs-lookup"><span data-stu-id="b4efa-223">**Data warehousing**</span></span> |<span data-ttu-id="b4efa-224">Оптимизирует хранилище для рабочих нагрузок аналитики и отчетов</span><span class="sxs-lookup"><span data-stu-id="b4efa-224">Optimizes the storage for analytic and reporting workloads</span></span> |<span data-ttu-id="b4efa-225">Флаг трассировки 610</span><span class="sxs-lookup"><span data-stu-id="b4efa-225">Trace Flag 610</span></span><br/><span data-ttu-id="b4efa-226">Флаг трассировки 1117</span><span class="sxs-lookup"><span data-stu-id="b4efa-226">Trace Flag 1117</span></span> |

> [!NOTE]
> <span data-ttu-id="b4efa-227">Тип рабочей нагрузки можно указать только во время подготовки виртуальной машины SQL на этапе настройки хранилища.</span><span class="sxs-lookup"><span data-stu-id="b4efa-227">You can only specify the workload type when you provision a SQL virtual machine by selecting it in the storage configuration step.</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="b4efa-228">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="b4efa-228">Next steps</span></span>
<span data-ttu-id="b4efa-229">Другие темы, связанные с запуском SQL Server на виртуальных машинах Azure, рассматриваются в статье [SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-overview.md).</span><span class="sxs-lookup"><span data-stu-id="b4efa-229">For other topics related to running SQL Server in Azure VMs, see [SQL Server on Azure Virtual Machines](virtual-machines-windows-sql-server-iaas-overview.md).</span></span>
