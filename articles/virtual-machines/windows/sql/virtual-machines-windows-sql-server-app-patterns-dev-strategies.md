---
title: "Шаблоны приложений сервера на виртуальных машинах aaaSQL | Документы Microsoft"
description: "В этой статье описаны шаблоны приложений для SQL Server в виртуальных машинах Azure. Статья предоставляет архитекторам и разработчикам решений основу для создания правильных архитектуры и конструкции."
services: virtual-machines-windows
documentationcenter: na
author: ninarn
manager: jhubbard
editor: 
tags: azure-service-management,azure-resource-manager
ms.assetid: 41863c8d-f3a3-4584-ad86-b95094365e05
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 05/31/2017
ms.author: ninarn
ms.openlocfilehash: e18597598fdf9fe534ed07331d6f531d4dca0601
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="application-patterns-and-development-strategies-for-sql-server-in-azure-virtual-machines"></a>Шаблоны приложений и стратегии разработки для SQL Server на виртуальных машинах Azure
[!INCLUDE [learn-about-deployment-models](../../../../includes/learn-about-deployment-models-both-include.md)]

## <a name="summary"></a>Сводка:
Определение того, какой шаблон приложения и toouse шаблонов для приложений на основе SQL Server в Azure среда — это важное Проектное решение и его требуется основательное понимание принципов SQL Server и каждого компонента инфраструктуры Azure совместной работы . С SQL Server в службах инфраструктуры Azure можно легко перенести, поддерживать и отслеживать существующие SQL Server приложения построенных на Windows Server toovirtual машины в Azure.

Hello цель этой статьи — tooprovide архитекторов решений и разработчики в основу для хорошей архитектуры и приложений проектирования, которые они могут быть при переносе существующего приложения tooAzure как также в разработке новых приложений в Azure.

Для каждого шаблона приложения можно найти локальный сценарий его соответствующее решение облаком, и hello связанные Технические рекомендации. Кроме того hello рассмотрены стратегии разработки конкретного Azure, чтобы правильно проектировать свои приложения. Из-за toohello многих шаблонов приложений, рекомендуется архитекторам и разработчикам следует выбирать hello наиболее подходящий шаблон для своих приложений и пользователей.

**Технические соавторы:** Луис Карлос Варгас Херринг (Luis Carlos Vargas Herring), Мадхан Арумугам Рамакришнан (Madhan Arumugam Ramakrishnan)

**Технические рецензенты:** Кори Сэндерс (Corey Sanders), Дрю МакДэниэл (Drew McDaniel), Нараян Аннамалай (Narayan Annamalai), Нир Машковски (Nir Mashkowski), Санджей Мишра (Sanjay Mishra), Сильвано Кориани (Silvano Coriani), Стефан Шакоу (Stefan Schackow), Тим Хики (Tim Hickey), Тим Виман (Tim Wieman), Синь Цзинь (Xin Jin).

## <a name="introduction"></a>Введение
Можно разрабатывать множество типов многоуровневых приложений, разделяя hello компоненты hello разных уровней приложения на разных компьютерах, а также в разных компонентах. Например можно разместить клиентское приложение hello и бизнес-правила компонентов на одной машине, интерфейсный веб-компонент и компоненты уровня доступа к данным на другом компьютере и уровня серверную базу данных на другом компьютере. Такой способ структурирования позволяет изолировать уровни друг от друга. При изменении источника данных, не обязательно toochange hello клиента или веб-приложения, но только hello компоненты уровня доступа к данным.

Типичный *n уровневые* приложение включает уровень представления hello, hello бизнес-уровень и уровень данных hello:

| Уровень | Описание |
| --- | --- |
| **Уровень представления** |Hello *уровень представления* (веб-уровень, интерфейсный уровень) — hello слой, на котором пользователи взаимодействуют с приложением. |
| **Рабочий телефон** |Hello *бизнес-уровня* (средний уровень) — уровень hello, hello презентации hello и уровня данных уровня использования toocommunicate друг с другом и содержит основные возможности hello hello системы. |
| **Данные** |Hello *уровень данных* по сути является hello сервера, который хранит данные приложения (например, сервер SQL Server). |

Слои приложений описывают логические группы hello hello функций и компонентов в приложении; уровни же описывают физическое распределение hello hello функциональных возможностей и компонентов на отдельных физических серверов, компьютеров, сетей или удаленных расположений. Hello слои приложения могут размещаться на hello же физического компьютера (hello того же уровня) или могут быть распределены по разным отдельным компьютерам (n уровневого) и hello компоненты в каждом слое взаимодействуют с компонентами в других слоях с помощью четко определенных интерфейсов. Можно представить hello термин "уровень" как ссылки toophysical распространения шаблоны, например двухуровневая трехуровневой и n уровневые. **Модель двухуровневого приложения** содержит два уровня приложений: сервер приложений и сервер базы данных. между сервером приложения hello и hello сервера базы данных происходит прямое взаимодействие Hello. сервер приложений Hello содержит компоненты веб уровня и бизнес уровня. В **модель трехуровневого приложения**, существует три уровня приложения: веб-сервер, сервер приложений, который содержит hello уровня бизнес-логики или компоненты доступа к бизнес-уровня данных и сервер базы данных hello. взаимодействие Hello hello веб-сервера и сервера базы данных hello происходит через сервер приложений hello. Подробные сведения о слоях и уровнях приложений см. в статье [Microsoft Application Architecture Guide](https://msdn.microsoft.com/library/ff650706.aspx) (Руководство по архитектуре приложений Майкрософт).

Перед началом этой статьи, следует ознакомиться hello основные понятия SQL Server и Azure. Дополнительные сведения см. в статьях [Microsoft SQL Server](https://msdn.microsoft.com/library/bb545450.aspx) и [Приступая к работе с SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-overview.md), а также на веб-сайте [Azure.com](https://azure.microsoft.com/).

В этой статье описывается несколько моделей приложений, которые могут подходить для простых приложений, а также hello очень сложных корпоративных приложений. Прежде чем с подробным описанием каждого шаблона, мы рекомендуем, следует ознакомиться со службами хранилища hello доступные данные в Azure, такие как [хранилища Azure](../../../storage/common/storage-introduction.md), [базы данных SQL Azure](../../../sql-database/sql-database-technical-overview.md), и [ SQL Server в виртуальной машине Azure](virtual-machines-windows-sql-server-iaas-overview.md). toomake hello наилучшие решения по конструкции приложения, понять, когда хранилище данных службы четко toouse.

### <a name="choose-sql-server-in-an-azure-virtual-machine-when"></a>Выбирайте SQL Server на виртуальной машине Azure в указанных ниже случаях.
* Вам необходим контроль над SQL Server и Windows. Например это может включать версии SQL Server hello специальные исправления, производительности, конфигурации и т. д.
* Требуется полная совместимость с SQL Server в локальной и хотите toomove существующих приложений tooAzure как-является.
* Требуется tooleverage возможности hello hello среды Azure, но база данных SQL Azure не поддерживает все функции hello, которые требуются приложению. Это может включать в себя hello в следующих областях:
  
  * **Размер базы данных**: во время hello обновления этой статьи база данных SQL поддерживает базы данных из копии too1 ТБ данных. Если приложение требует более 1 ТБ данных, и вы не хотите tooimplement собственные решения для сегментирования, рекомендуется использовать SQL Server в виртуальной машине Azure. Hello актуальные сведения см. в разделе [масштабирование Out баз данных SQL Azure](https://msdn.microsoft.com/library/azure/dn495641.aspx) и [уровни служб базы данных SQL Azure и уровни производительности](../../../sql-database/sql-database-service-tiers.md).
  * **Соответствие требованиям HIPAA**. Клиенты из сферы здравоохранения и независимые поставщики программного обеспечения могут предпочесть [SQL Server на виртуальной машине Azure](virtual-machines-windows-sql-server-iaas-overview.md) вместо [базы данных SQL Azure](../../../sql-database/sql-database-technical-overview.md), так как вариант с SQL Server на виртуальной машине Azure оговорен в соглашении с бизнес-партнерами HIPAA. Сведения о соответствии требованиям см. в [центре управления безопасностью Microsoft Azure](https://azure.microsoft.com/support/trust-center/compliance/) — раздел "Compliance" (Соответствие требованиям).
  * **Функции на уровне экземпляра**: В настоящее время база данных SQL не поддерживает функции, находящихся за пределами базы данных hello (например на связанных серверах задания агента, FileStream, компонент Service Broker, и т. д.). Дополнительные сведения см. в статье [Общие ограничения и рекомендации для базы данных SQL Azure](https://msdn.microsoft.com/library/azure/ff394102.aspx).

## <a name="1-tier-simple-single-virtual-machine"></a>Модель простого одноуровневого приложения: одна виртуальная машина
В этой модели приложения развертывание приложения SQL Server и базы данных tooa автономной виртуальной машины в Azure. Hello же виртуальная машина содержит клиентское или веб-приложения, бизнес-компоненты, доступа к данным и hello сервера базы данных. Hello презентации, business и код доступа к данным логически разделены, но физически расположены на одном сервере машине. Большинство клиентов начинает с этой модели приложения и затем они масштабного развертывания, добавив дополнительные веб-ролей или виртуальных машин системы tootheir.

Эту модель приложения удобно использовать в указанных ниже случаях.

* Требуется tooperform tooevaluate платформы tooAzure простую миграцию ли платформа hello отвечает требованиям приложения или нет.
* Требуется tookeep все hello уровни приложения размещенного в hello же виртуальные машины в hello же tooreduce hello задержка между уровнями центра обработки данных Azure.
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Вы хотите tooperform нагрузочное тестирование для различных уровней рабочей нагрузки, но на приветствия же время вы не хотите tooown и обслуживать много физических компьютеров все время hello.

Hello следующей схеме показывается простой локальный сценарий и как можно развернуть его Облачное решение в одной виртуальной машины в Azure.

![Модель одноуровневого приложения](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728008.png)

Развертывание бизнес-уровне hello (бизнес-логики и компоненты доступа к данным) на hello одном физическом уровне hello уровня представления можно добиться максимальной производительности приложения, если необходимо использовать отдельный уровень из-за проблем с tooscalability или безопасности.

Так как это очень распространенный шаблон toostart с, может оказаться hello следующей статьей миграции удобен для перемещения вашей tooyour данных виртуальной Машины SQL Server: [миграция tooSQL базы данных сервера на Виртуальной машине Azure](virtual-machines-windows-migrate-sql.md).

## <a name="3-tier-simple-multiple-virtual-machines"></a>Модель простого трехуровневого приложения: несколько виртуальных машин
При использовании этой модели приложения выполняется развертывание трехуровневого приложения в Azure. При этом каждый уровень приложения размещается на отдельной виртуальной машине. Это обеспечивает гибкую среду, в которой можно легко выполнить вертикальное и горизонтальное масштабирование. Если одна виртуальная машина содержит клиентское или веб-приложения, hello другой размещает бизнес-компоненты и hello другой сервер базы данных один узлов hello.

Эту модель приложения удобно использовать в указанных ниже случаях.

* Вы хотите tooperform миграцию приложений сложная база данных tooAzure виртуальных машин.
* Вы хотите toobe уровней другого приложения, размещенные в разных регионах. Например имеются общие базы данных, которые являются областями развернутой toomultiple для целей отчетности.
* Вы хотите toomove корпоративные приложения из локальных виртуализированных tooAzure платформ виртуальные машины. Подробные сведения о корпоративных приложениях см. в статье [What is an Enterprise Application?](https://msdn.microsoft.com/library/aa267045.aspx) (Основные сведения о корпоративных приложениях).
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Вы хотите tooperform нагрузочное тестирование для различных уровней рабочей нагрузки, но на приветствия же время вы не хотите tooown и обслуживать много физических компьютеров все время hello.

Hello следующей схеме показано, как разместить простое трехуровневое приложение в Azure путем размещения каждого уровня приложения в другую виртуальную машину.

![Модель трехуровневого приложения](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728009.png)

В этой модели приложения на каждом уровне используется только одна виртуальная машина. Если у вас есть несколько виртуальных машин в Azure, мы рекомендуем настроить виртуальную сеть. [Виртуальная сеть Azure](../../../virtual-network/virtual-networks-overview.md) создает надежный периметр безопасности, а также позволяет toocommunicate виртуальных машин друг с другом посредством частного IP-адреса hello. Кроме того всегда проверяйте, что все подключения к Интернету, идут только toohello уровня представления. При использовании данной модели приложения, управляйте toocontrol hello сетевой безопасности группы правил доступа. Дополнительные сведения см. в разделе [разрешить внешний доступ tooyour виртуальной Машины с помощью портала Azure "hello"](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

В диаграмме hello протоколы Интернета можно TCP, UDP, HTTP или HTTPS.

> [!NOTE]
> Настройка виртуальной сети в Azure выполняется бесплатно. Тем не менее взимается плата для шлюза VPN hello, соединяющей tooon организациями. Размер платы зависит hello количество времени, которое это соединение предоставляется и доступно.
> 
> 

## <a name="2-tier-and-3-tier-with-presentation-tier-scale-out"></a>Модель двух- и трехуровневого приложений с горизонтальным масштабированием уровня представления
В этой модели приложения развертывание базы данных уровня 2 или 3-уровневое приложение tooAzure виртуальных машин путем размещения каждого уровня приложения в другой виртуальной машины. Кроме того можно масштабировать hello уровень представления из-за tooincreased объема входящих клиентских запросов.

Эту модель приложения удобно использовать в указанных ниже случаях.

* Вы хотите toomove корпоративные приложения из локальных виртуализированных tooAzure платформ виртуальные машины.
* Вы хотите tooscale out hello уровень представления из-за tooincreased объема входящих клиентских запросов.
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Вы хотите tooperform нагрузочное тестирование для различных уровней рабочей нагрузки, но на приветствия же время вы не хотите tooown и обслуживать много физических компьютеров все время hello.
* Вы хотите tooown среду инфраструктуры, которую можно масштабировать вверх и вниз по требованию.

Hello следующей схеме показано, как можно разместить уровни приложения hello в нескольких виртуальных машин в Azure с расширением уровня представления hello из-за tooincreased объема входящих клиентских запросов. Как показано на схеме hello, подсистемы балансировки нагрузки Azure отвечает за распределение трафика по нескольким виртуальным машинам, а также определяет, какие tooconnect server web для. Наличие нескольких экземпляров веб-серверов hello в подсистему балансировки нагрузки обеспечивает высокий уровень доступности уровня представления hello hello.

![Модель приложения: горизонтальное масштабирование уровня представления](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728010.png)

### <a name="best-practices-for-2-tier-3-tier-or-n-tier-patterns-that-have-multiple-vms-in-one-tier"></a>Рекомендации для моделей двух-, трех- и n-уровневых приложений с несколькими виртуальными машинами на одном уровне
Рекомендуется размещать hello виртуальных машин, которые принадлежат toohello же уровня в hello же облачной службе и в hello же hello группы доступности. Например, вы можете поместить набор веб-серверов в облачную службу **CloudService1** и группу доступности **AvailabilitySet1**, а набор серверов баз данных — в облачную службу **CloudService2** и группу доступности **AvailabilitySet2**. Группа доступности в Azure позволяет узлы высокой доступности tooplace hello в отдельных доменах сбоя и доменах обновления.

tooleverage несколько экземпляров виртуальных Машин уровня необходимо tooconfigure подсистемы балансировки нагрузки Azure между уровнями приложения. tooconfigure подсистемы балансировки нагрузки на каждом уровне создать конечную точку с балансировкой нагрузки на VM каждого уровня отдельно. Для конкретного уровня сначала создайте виртуальные машины в hello же облачной службе. Это гарантирует, что они имеют hello же общедоступный виртуальный IP-адрес. Создайте конечную точку на одной из виртуальных машин hello на этом уровне. Затем назначьте hello одной конечной точки toohello других виртуальных машин данного уровня для балансировки нагрузки. Создав набор с балансировкой нагрузки, распределение трафика между несколькими виртуальными машинами и также позволяют toodetermine hello подсистемы балансировки нагрузки какой tooconnect узел при сбое внутреннего узла ВМ. Например наличие нескольких экземпляров веб-серверы hello в подсистему балансировки нагрузки обеспечивает высокий уровень доступности уровня представления hello hello.

Рекомендуется всегда проверяйте, что все Интернет-подключения приходят toohello уровня представления. уровень представления Hello обращается к hello бизнес-уровня и затем hello бизнес-уровень обращается к уровню данных hello. Дополнительные сведения о как tooallow доступ к toohello уровня представления. в разделе [разрешить внешний доступ tooyour виртуальной Машины с помощью портала Azure "hello"](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

Обратите внимание, что hello подсистемы балансировки нагрузки в Azure работает аналогично tooload балансировки нагрузки в локальной среде. Дополнительные сведения см. в статье [Балансировка нагрузки для служб инфраструктуры Azure](../tutorial-load-balancer.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).

Кроме того, мы рекомендуем настроить частную сеть для ваших виртуальных машин с помощью виртуальной сети Azure. Это позволяет им toocommunicate друг с другом посредством частного IP-адреса hello. Дополнительные сведения см. в статье [Обзор виртуальной сети](../../../virtual-network/virtual-networks-overview.md).

## <a name="2-tier-and-3-tier-with-business-tier-scale-out"></a>Модель двух- и трехуровневых приложений с горизонтальным масштабированием бизнес-уровня
В этой модели приложения развертывание базы данных уровня 2 или 3-уровневое приложение tooAzure виртуальных машин путем размещения каждого уровня приложения в другой виртуальной машины. Кроме того может потребоваться toodistribute hello приложения сервера компонентов toomultiple виртуальных машин из-за сложности toohello приложения.

Эту модель приложения удобно использовать в указанных ниже случаях.

* Вы хотите toomove корпоративные приложения из локальных виртуализированных tooAzure платформ виртуальные машины.
* Вы хотите toodistribute hello приложения сервера компонентов toomultiple виртуальных машин из-за сложности toohello приложения.
* Вы хотите toomove бизнес логики интенсивной локальных приложений LOB (бизнес) tooAzure виртуальных машин. Бизнес-приложений — это ряд важных компьютерных приложений, которые являются жизненно важных toorunning предприятия, например учета, отдела кадров, заработной платы, управления логистическими цепочками и планирования приложений ресурсов.
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Вы хотите tooperform нагрузочное тестирование для различных уровней рабочей нагрузки, но на приветствия же время вы не хотите tooown и обслуживать много физических компьютеров все время hello.
* Вы хотите tooown среду инфраструктуры, которую можно масштабировать вверх и вниз по требованию.

Привет, следующая диаграмма демонстрирует локальный сценарий и его Облачное решение. В этом сценарии установите уровни приложения hello в нескольких виртуальных машин в Azure, горизонтальное масштабирование hello бизнес-уровень содержит hello бизнес-логики и компоненты доступа к данным. Как показано на схеме hello, подсистемы балансировки нагрузки Azure отвечает за распределение трафика по нескольким виртуальным машинам, а также определяет, какие tooconnect server web для. Наличие нескольких экземпляров серверов приложений hello в подсистему балансировки нагрузки гарантирует высокий уровень доступности hello hello бизнес-уровня. Дополнительные сведения см. в разделе [Рекомендации для моделей двух-, трех- и n-уровневых приложений с несколькими виртуальными машинами на одном уровне](#best-practices-for-2-tier-3-tier-or-n-tier-patterns-that-have-multiple-vms-in-one-tier).

![Модель приложения с горизонтальным масштабированием бизнес-уровня](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728011.png)

## <a name="2-tier-and-3-tier-with-presentation-and-business-tiers-scale-out-and-hadr"></a>Модель двух- и трехуровневых приложений с горизонтальным масштабированием уровня представления и бизнес-уровня и HADR
В этой модели приложения развертывание базы данных уровня 2 или 3-уровневое приложение tooAzure виртуальные машины, распределяя hello уровень представления (веб-сервера) и hello виртуальных машинах toomultiple компоненты бизнес уровня (сервера приложений). Кроме того, вы можете реализовать решения для обеспечения высокого уровня доступности и аварийного восстановления баз данных на виртуальных машинах Azure.

Эту модель приложения удобно использовать в указанных ниже случаях.

* Вы хотите toomove корпоративные приложения из tooAzure локальных виртуализированных платформ путем реализации возможностей SQL Server высокой доступности и аварийного восстановления.
* Вы хотите tooscale hello уровня представления и бизнес-уровня hello из-за tooincreased объема входящих клиентских запросов и сложности приложения hello.
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Вы хотите tooperform нагрузочное тестирование для различных уровней рабочей нагрузки, но на приветствия же время вы не хотите tooown и обслуживать много физических компьютеров все время hello.
* Вы хотите tooown среду инфраструктуры, которую можно масштабировать вверх и вниз по требованию.

Привет, следующая диаграмма демонстрирует локальный сценарий и его Облачное решение. В этом сценарии горизонтальное масштабирование уровня представления hello и компоненты бизнес-уровня hello в нескольких виртуальных машин в Azure. Кроме того, вы можете реализовать методы высокого уровня доступности и аварийного восстановления (HADR) для баз данных SQL Server в Azure.

Если несколько копий приложения работают на разных виртуальных машинах, то для них выполняется балансировка нагрузки по обработке запросов. При наличии нескольких виртуальных машин, необходимо убедиться, что все виртуальные машины доступны и работают в один момент времени toomake. При настройке балансировки нагрузки подсистемы балансировки нагрузки Azure отслеживает hello работоспособность виртуальных машин и направляет входящие вызовы toohello полноценно функционирующие узлы ВМ должным образом. Сведения о том, как tooset копирование балансировки нагрузки hello виртуальных машин, в разделе [балансировки нагрузки для служб инфраструктуры Azure](../tutorial-load-balancer.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json). При наличии нескольких экземпляров приложений и веб-серверов за балансировщиком нагрузки гарантирует высокий уровень доступности hello hello представления и бизнес-уровни.

![Горизонтальное масштабирование и высокий уровень доступности](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728012.png)

### <a name="best-practices-for-application-patterns-requiring-sql-hadr"></a>Рекомендации для моделей приложений, требующих HADR SQL
Если вы устанавливаете решения по обеспечению высокого уровня доступности и аварийного восстановления SQL Server на виртуальных машинах Azure, то вам также необходимо настроить виртуальную сеть для ваших виртуальных машин с помощью [виртуальной сети Azure](../../../virtual-network/virtual-networks-overview.md).  Виртуальные машины в виртуальной сети будут иметь стабильный частный IP-адрес даже после простоя службы, таким образом можно избежать времени обновления hello, необходимого для разрешения имен DNS. Кроме того, виртуальная сеть hello позволяет tooextend в локальной сети tooAzure и создает надежный периметр безопасности. Например, если для приложения действуют ограничения корпоративного домена (такие как аутентификация Windows или Active Directory), то необходимо настроить [виртуальную сеть Azure](../../../virtual-network/virtual-networks-overview.md).

Большинство клиентов, выполняющих рабочий код в Azure, хранят и основную, и дополнительную реплики в Azure.

Подробные сведения и учебники по обеспечению высокого уровня доступности и аварийного восстановления см. в статье [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-high-availability-dr.md).

## <a name="2-tier-and-3-tier-using-azure-vms-and-cloud-services"></a>Модель двух- и трехуровневых приложений, использующих виртуальные машины Azure и облачные службы
В этой модели приложения развертывание двухуровневого или трехуровневого приложения tooAzure с использованием [облачных служб Azure](../../../cloud-services/cloud-services-choose-me.md#tellmecs) (рабочих и веб-роли — платформа как услуга (PaaS)) и [виртуальных машинах Azure](../overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) () Инфраструктура как услуга (IaaS)). С помощью [облачных служб Azure](https://azure.microsoft.com/documentation/services/cloud-services/) hello презентации уровня или бизнес-уровня и SQL Server в [виртуальных машинах Azure](../overview.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) данных hello уровень является полезным для большинства приложений, работающих в Azure. Причина Hello в том, что наличие вычислительной работающего в облачных службах предоставляет удобные возможности для управления, развертывания, наблюдения и масштабирования.

С облачными службами Azure поддерживает hello инфраструктуры для вас, выполняет плановое обслуживание, исправления hello операционные системы и пытается toorecover от сбоев служб и оборудования. Когда приложению масштабирования автоматическое и ручное масштабирование доступны для проекта облачной службы, увеличивая или уменьшая количество hello экземпляров или виртуальных машин, которые используются в приложении. Кроме того использовании локальных toodeploy Visual Studio проекта приложения tooa облачной службы в Azure.

Таким образом Если вы не хотите tooown административные задачи для представления или бизнес-уровня hello и приложения не требуется сложная конфигурация программного обеспечения или hello операционной системы, используйте облачных служб Azure. Если база данных SQL Azure не поддерживает все функции hello, которую вы ищете, используйте SQL Server в виртуальных машинах Azure для hello уровня данных. Запуск приложения в облачных службах Azure и хранении данных в виртуальных машинах Azure объединяет hello преимущества обеих служб. Более подробное сравнение подразделе hello в этом разделе о [сравнение стратегии разработки в Azure](#comparing-web-development-strategies-in-azure).

В этой модели приложения hello уровень представления включает веб-роли, который работает в среде выполнения Azure hello компонентом облачных служб и настроена для программирования веб-приложений с поддержкой служб IIS и ASP.NET. Hello бизнеса или внутренний уровень включает рабочей роли, который работает в среде выполнения Azure hello компонентом облачных служб и его упрощающая обобщенную разработку и позволяющая выполнять фоновую обработку для веб-роли. Hello уровня базы данных находится на виртуальной машине SQL Server в Azure. Hello взаимодействие между уровнем представления hello и hello уровня базы данных происходит напрямую или через hello бизнес-уровень — компоненты рабочей роли.

Эту модель приложения удобно использовать в указанных ниже случаях.

* Вы хотите toomove корпоративные приложения из tooAzure локальных виртуализированных платформ путем реализации возможностей SQL Server высокой доступности и аварийного восстановления.
* Вы хотите tooown среду инфраструктуры, которую можно масштабировать вверх и вниз по требованию.
* База данных SQL Azure не поддерживает все функции hello, приложению или базе данных.
* Вы хотите tooperform нагрузочное тестирование для различных уровней рабочей нагрузки, но на приветствия же время вы не хотите tooown и обслуживать много физических компьютеров все время hello.

Привет, следующая диаграмма демонстрирует локальный сценарий и его Облачное решение. В этом сценарии установите уровень представления hello в веб-роли, бизнес-уровня hello в рабочих ролях, но уровень данных hello на виртуальных машинах в Azure. Запуск нескольких копий уровня представления hello в разных веб-ролях обеспечивает tooload балансировать нагрузку по запросам между ними. При совместном использовании облачных служб Azure с виртуальными машинами Azure рекомендуется также настроить [виртуальную сеть Azure](../../../virtual-network/virtual-networks-overview.md). С [виртуальной сети Azure](../../../virtual-network/virtual-networks-overview.md), у вас есть стабильная и постоянные частные IP-адреса в пределах hello же облачную службу в hello облака. После определения виртуальной сети для виртуальных машин и облачных служб, они могли начать взаимодействовать между собой посредством частных IP-адреса hello. Кроме того, если виртуальные машины и Azure веб-ролей в hello же [виртуальной сети Azure](../../../virtual-network/virtual-networks-overview.md) низкой задержкой и обеспечивается более безопасное подключение. Дополнительные сведения см. в статье [Стоит ли сделать выбор в пользу облачных служб или чего-то другого?](../../../cloud-services/cloud-services-choose-me.md)

Как показано на схеме hello, подсистемы балансировки нагрузки Azure распределяет трафик по нескольким виртуальным машинам, а также определяет, какие веб-сервера или сервера приложений tooconnect для. Наличие нескольких экземпляров hello в подсистему балансировки нагрузки приложения и веб-серверов обеспечивает высокий уровень доступности уровня представления hello и бизнес-уровня hello hello. Дополнительные сведения см. в разделе [Рекомендации для моделей приложений, требующих HADR SQL](#best-practices-for-application-patterns-requiring-sql-hadr).

![Модели приложений с использованием облачных служб](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728013.png)

Другой подход tooimplement эта модель приложения является toouse объединенной веб-роли, которая содержит уровень представления и компоненты бизнес-уровня, как показано в следующих hello схемы. Эта модель приложения подходит для приложений, которым требуется конструкция с отслеживанием состояния. Поскольку Azure предоставляет вычислительные узлы без состояния для рабочих и веб-ролей, рекомендуется реализовать логику состояние toostore сеанса, с помощью одного из следующих технологий hello: [Azure Caching](https://azure.microsoft.com/documentation/services/redis-cache/), [табличного хранилища Azure](../../../cosmos-db/table-storage-how-to-use-dotnet.md) или [база данных Azure SQL](../../../sql-database/sql-database-technical-overview.md).

![Модели приложений с использованием облачных служб](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728014.png)

## <a name="pattern-with-azure-vms-azure-sql-database-and-azure-app-service-web-apps"></a>Модель с виртуальными машинами Azure, базой данных SQL Azure и службой приложений Azure (веб-приложениями Azure)
Основная цель этой модели приложения Hello — tooshow вы как toocombine инфраструктуры Azure, что компоненты службы (IaaS), с компонентами Azure платформа как услуга (PaaS) в решении. Эта модель предназначена для Базы данных SQL Azure, хранящей реляционные данные. Не включает SQL Server на виртуальной машине Azure, которая является частью hello Azure инфраструктуры как услуги.

В этой модели приложения развертывание tooAzure приложения базы данных путем размещения hello презентации и hello бизнес-уровнями в одной виртуальной машины и доступ к базе данных, на серверах баз данных SQL Azure (база данных SQL). Уровень представления hello можно реализовать с помощью традиционных IIS веб-решений. Кроме того, вы можете объединить уровень представления и бизнес-уровень, используя [веб-приложения Azure](https://azure.microsoft.com/documentation/services/app-service/web/).

Эту модель приложения удобно использовать в указанных ниже случаях.

* Уже имеется существующий сервер базы данных SQL в Azure и хотите tootest приложение быстро.
* Вы хотите tootest hello возможности среды Azure.
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Компоненты бизнес-логики и доступа к данным могут быть автономными и размещаться в веб-приложении.

Привет, следующая диаграмма демонстрирует локальный сценарий и его Облачное решение. В этом сценарии установите уровни приложения hello в одной виртуальной машины в Azure и просматривать данные в базе данных SQL Azure.

![Модель смешанного приложения](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728015.png)

При выборе tooimplement приложения и объединенные веб-уровня с помощью веб-приложения Azure, рекомендуется сохранять hello средний уровень или уровень приложения в виде библиотеки динамической компоновки (DLL) в контексте hello веб-приложения.

Кроме того, просмотрите hello рекомендации, приведенные в hello [сравнение веб-разработки стратегии в Azure](#comparing-web-development-strategies-in-azure) раздел в конце hello в этой статье toolearn Дополнительные сведения о методах программирования.

## <a name="n-tier-hybrid-application-pattern"></a>Модель n-уровневого гибридного приложения
В модели n-уровневого гибридного приложения выполняется реализация приложения на нескольких уровнях, распределенных между локальной средой и Azure. Таким образом создается гибкая и многократно используемая Гибридная система, которой можно изменить или добавить другие уровни hello определенного уровня без изменения. облако tooextend toohello вашей корпоративной сети, использовать [виртуальной сети Azure](../../../virtual-network/virtual-networks-overview.md) службы.

Эту модель гибридных приложений удобно использовать в указанных ниже случаях.

* Вы хотите toobuild приложений, которые работают частично в облаке hello и частично в локальной среде.
* Вы хотите toomigrate некоторых или всех элементов существующих локальных облака toohello приложения.
* Вы хотите toomove корпоративные приложения из локальных виртуализированных платформ tooAzure.
* Вы хотите tooown среду инфраструктуры, которую можно масштабировать вверх и вниз по требованию.
* Необходимо tooquickly подготовки разработки и тестовую среду на короткий период времени.
* Требуется более резервную tootake и экономичный способ для корпоративных приложений базы данных.

Привет, следующая диаграмма демонстрирует модели многоуровневого гибридного приложения, разделенного между локальной и Azure. Как показано на схеме hello локальной инфраструктура включает [доменных служб Active Directory](https://technet.microsoft.com/library/hh831484.aspx) проверки подлинности пользователя toosupport контроллера домена. Обратите внимание, что hello схеме показан сценарий, некоторые компоненты уровня данных hello проживания в центре обработки данных в локальной среде, тогда как некоторые компоненты уровня данных hello live в Azure. В зависимости от потребностей вашего приложения можно реализовать несколько других гибридных сценариев. Например можно сохранять уровень представления hello и бизнес-уровня hello в локальной среде, но hello уровня данных в Azure.

![Модель n-уровневого приложения](./media/virtual-machines-windows-sql-server-app-patterns-dev-strategies/IC728016.png)

В Azure можно использовать Active Directory как изолированный облачный каталог для вашей организации. Кроме того, можно интегрировать существующий локальный каталог Active Directory с [Azure Active Directory](https://azure.microsoft.com/documentation/services/active-directory/). Как показано на схеме hello, компоненты бизнес-уровня hello можно получить доступ к toomultiple источники данных, такие как слишком[SQL Server в Azure](virtual-machines-windows-sql-server-iaas-overview.md) через закрытый внутренний IP-адрес, tooon локальный SQL Server через [виртуальнойсетиAzure](../../../virtual-network/virtual-networks-overview.md), или слишком[базы данных SQL](../../../sql-database/sql-database-technical-overview.md) с помощью технологий поставщика данных .NET Framework hello. На этой схеме База данных SQL Azure представляет собой дополнительную службу хранилища данных.

В модели многоуровневого гибридного приложения можно реализовать следующий рабочий процесс в указанном порядке hello hello.

1. Определите корпоративные приложения базы данных, которым требуется переместить вверх toocloud с помощью hello toobe [Microsoft Assessment and Planning Toolkit (MAP)](http://microsoft.com/map). Hello набор средств MAP собирает данные инвентаризации и производительности с компьютеров, вы принимаете решение для виртуализации и предоставляет рекомендации по емкости и планированию.
2. Планирование ресурсов hello и настройки, необходимые в hello платформы Azure, такие как учетные записи хранилища и виртуальных машин.
3. Настройте сетевое соединение между hello корпоративной локальной сетью и [виртуальной сети Azure](../../../virtual-network/virtual-networks-overview.md). tooset hello подключение между hello корпоративной локальной сетью и виртуальной машины в Azure, используйте один из следующих двух методов hello.
   
   1. Установите соединение между локальной сетью и Azure посредством общедоступных конечных точек на виртуальной машине в Azure. Этот метод обеспечивает простую настройку и позволяет toouse проверку подлинности SQL Server на виртуальной машине. Кроме того настройте вашей сетевой безопасности группы правил toocontrol общего трафика toohello виртуальной Машины. Дополнительные сведения см. в разделе [разрешить внешний доступ tooyour виртуальной Машины с помощью портала Azure "hello"](../nsg-quickstart-portal.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).
   2. Установите соединение между локальной сетью и Azure с помощью туннеля виртуальной частной сети (VPN). Этот метод позволяет tooextend домена политики tooa виртуальной машины в Azure. Кроме того, можно настроить правила брандмауэра и использовать проверку подлинности Windows на виртуальной машине. Сейчас Azure поддерживает безопасные подключения VPN типа "сеть-сеть" и VPN типа "точка-сеть".
      
      * С помощью защищенного подключения типа "сеть-сеть" можно установить сетевое соединение между локальной сетью и виртуальной сетью в Azure. Рекомендуется для подключения вашей tooAzure среды центра данных в локальной среде.
      * С помощью защищенного подключения типа "точка-сеть" можно установить сетевое соединение между виртуальной сетью в Azure и отдельными компьютерами, работающими в любом месте. Такой вариант рекомендуется, главным образом, для целей разработки и тестирования.
      
      Сведения о том, как tooconnect tooSQL Server в Azure, в разделе [подключения tooa виртуальной машины SQL Server в Azure](virtual-machines-windows-sql-connect.md).
4. Настройте запланированные задания и предупреждения, которые создают резервные копии локальных данных на диске виртуальной машины в Azure. Дополнительные сведения см. в статьях [Резервное копирование и восстановление SQL Server с помощью службы хранилища BLOB-объектов Microsoft Azure](https://msdn.microsoft.com/library/jj919148.aspx) и [Резервное копирование и восстановление SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-backup-recovery.md).
5. В зависимости от потребностей вашего приложения может реализовать один из hello следующие три типичных сценария:
   
   1. Ваш веб-сервера, сервера приложений и неконфиденциальные данные можно сохранить в сервер базы данных в Azure, тогда как хранить hello конфиденциальные данные в локальной.
   2. Можно хранить веб-сервер и сервер приложений локально, а hello сервера базы данных на виртуальной машине в Azure.
   3. Можно хранить сервер базы данных, веб-сервер и сервер приложений локально, а сохранить hello реплик базы данных на виртуальных машинах в Azure. Этот параметр позволяет hello локального веб-серверы или отчетов tooaccess приложения hello реплик базы данных в Azure. Таким образом можно добиться рабочей нагрузки hello toolower в локальной базе данных. Мы рекомендуем использовать этот сценарий для серьезных рабочих нагрузок и целей разработки. Дополнительные сведения о создании реплик баз данных в Azure см. в описании групп доступности AlwaysOn в статье [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-high-availability-dr.md).

## <a name="comparing-web-development-strategies-in-azure"></a>Сравнение стратегий веб-разработки в Azure
tooimplement и развертывать многоуровневые приложения на основе SQL Server в Azure, можно использовать один из следующих двух программных способов hello:

* Настройте традиционный веб-сервер (IIS) в Azure и доступ к базам данных в SQL Server на виртуальных машинах Azure.
* Реализуйте и разверните tooAzure облачной службы. Затем убедитесь, что эта облачная служба имеет доступ к базам данных в SQL Server на виртуальных машинах Azure. Облачная служба может включать несколько веб- и рабочих ролей.

Привет, в следующей таблице представлено сравнение традиционной веб-разработки с облачными службами и веб-приложениях Azure с учетом tooSQL Server в виртуальных машинах Azure. Таблица Hello включает веб-приложения Azure, как возможные toouse SQL Server в виртуальной Машине Azure и как источник данных для веб-приложения Azure через его общедоступный виртуальный IP-адрес или DNS-имя.

|  | Традиционная веб-разработка в виртуальных машинах Azure | Облачные службы в Azure | Веб-размещение с помощью веб-приложений Azure |
| --- | --- | --- | --- |
| **Миграция приложений из локальных систем** |Существующие приложения как есть. |Приложениям необходимы веб-роли и рабочие роли. |Вариант "Существующие приложения как есть" подходит для независимых веб-приложений и веб-служб, которым требуется быстрая масштабируемость. |
| **Разработка и развертывание** |Visual Studio, WebMatrix, Visual Web Developer, WebDeploy, FTP, TFS, диспетчер IIS, PowerShell. |Visual Studio Azure SDK, TFS, PowerShell. Каждая облачная служба имеет два toowhich средах можно развернуть пакет службы и конфигурации: промежуточной и производственной сред. Можно развернуть toohello облачной службы, промежуточной среды tootest его перед продвижением tooproduction. |Visual Studio, WebMatrix, Visual Web Developer, FTP, GIT, BitBucket, CodePlex, DropBox, GitHub, Mercurial, TFS, веб-развертывание, PowerShell. |
| **Администрирование и настройка** |Вы несете ответственность за выполнение административных задач на приложения hello, данные, правила брандмауэра, виртуальной сети и операционной системы. |Вы несете ответственность за выполнение административных задач на приложения hello, данные, правила брандмауэра и виртуальной сети. |Вы несете ответственность за выполнение административных задач в приложение hello и только данные. |
| **Высокая доступность и аварийное восстановление** |Рекомендуется размещать виртуальные машины в hello же доступности задать и в hello же облачной службе. Сохранение виртуальных машин hello же группе доступности позволяет Azure tooplace hello узлы высокой доступности в отдельные домены сбоя и доменах обновления. Аналогично Сохранение виртуальных машин в hello позволяет одной облачной службе балансировки нагрузки и виртуальные машины могут взаимодействовать напрямую друг с другом по локальной сети hello в центре обработки данных Azure.<br/><br/>Вы отвечаете за реализации решения высокого уровня доступности и аварийного восстановления для SQL Server в виртуальных машинах Azure tooavoid простоев. Сведения о поддерживаемых технологиях HADR см. в статье [Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure](virtual-machines-windows-sql-high-availability-dr.md).<br/><br/>Вы отвечаете за архивацию своих данных и приложения.<br/><br/>Azure можно перемещать виртуальные машины, если hello хост-компьютера в центре обработки данных hello завершается сбоем из-за проблем с toohardware. Кроме того, существует может быть запланирован простой вашей виртуальной машины при обновлении hello хост-компьютера для программного обеспечения безопасности и обновления. Таким образом рекомендуется поддерживать по крайней мере две виртуальные машины, в каждый уровень tooensure hello непрерывной доступности приложений. Azure не обеспечивает выполнение соглашений об уровне обслуживания при использовании одной виртуальной машины. Дополнительные сведения см. в [техническом руководстве по обеспечению устойчивости в Azure](../../../resiliency/resiliency-technical-guidance.md). |Azure управляет hello сбои, возникающие в результате hello базового оборудования или операционной системы программного обеспечения. Рекомендуется реализовать несколько экземпляров веб- или рабочей роли tooensure hello высокой доступности приложения. Дополнительные сведения см. в статьях [Соглашение об уровне обслуживания для облачных служб, виртуальных машин и виртуальной сети](http://www.microsoft.com/download/details.aspx?id=38427) и [Аварийное восстановление и высокая доступность для приложений на платформе Azure](../../../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md)<br/><br/>Вы отвечаете за архивацию своих данных и приложения.<br/><br/>Для баз данных, находящихся в базе данных SQL Server на виртуальной Машине Azure вы отвечаете за реализации высокого уровня доступности и аварийного восстановления решения tooavoid простоев. Сведения о поддерживаемых технологиях HADR см. в статье "Высокий уровень доступности и аварийное восстановление для SQL Server на виртуальных машинах Azure".<br/><br/>**Зеркальное отображение базы данных SQL Server**: используйте с облачными службами Azure (веб-роли и рабочие роли). Виртуальные машины SQL Server и проект облачной службы может быть в hello одной виртуальной сети Azure. Если виртуальная машина SQL Server не находится в hello одной виртуальной сети, вы должны toocreate псевдонима SQL Server связи tooroute toohello экземпляра SQL Server. Кроме того имя псевдонима hello должно соответствовать имени сервера SQL hello. |Высокий уровень доступности наследуется от рабочих ролей Azure, хранилища BLOB-объектов Azure и базы данных SQL Azure. Например, служба хранилища Azure поддерживает три реплики для всех данных больших двоичных объектов, таблиц и очереди. В любой момент времени База данных SQL Azure хранит три реплики рабочих данных: одну основную и две дополнительных. Дополнительные сведения см. в статьях [Документация по хранилищу](https://azure.microsoft.com/documentation/services/storage/) и [Что такое база данных SQL? Введение в базы данных SQL](../../../sql-database/sql-database-technical-overview.md).<br/><br/>При использовании SQL Server на виртуальной машине Azure в качестве источника данных для веб-приложений Azure следует иметь в виду, что веб-приложения Azure не поддерживают виртуальную сеть Azure. Другими словами все подключения от tooSQL веб-приложениях Azure VM Server в Azure должны проходить через общедоступные конечные точки виртуальных машин. Это может привести к некоторым ограничениям для сценариев обеспечения высокого уровня доступности и аварийного восстановления. Например hello клиентского приложения на веб-приложениях Azure подключение tooSQL виртуальной Машины сервера с зеркальным отображением базы данных не будет возможности tooconnect toohello нового основного сервера зеркальное отображение базы данных требуется настроить виртуальную сеть Azure между VM SQL Server в Azure. Таким образом, использование **зеркального отображения базы данных SQL Server** совместно с веб-приложениями Azure не поддерживается.<br/><br/>**Группы доступности AlwaysOn SQL Server**: вы можете настроить группы доступности AlwaysOn при использовании веб-приложений Azure совместно с виртуальными машинами SQL Server в Azure. Но tooconfigure прослушивателя группы доступности AlwaysOn tooroute hello связи toohello основной реплике через общедоступные конечные точки балансировки нагрузки. |
| **Возможности распределенного подключения** |Можно использовать tooon локальный tooconnect виртуальной сети Azure. |Можно использовать tooon локальный tooconnect виртуальной сети Azure. |Виртуальная сеть Azure поддерживается. Дополнительные сведения см. в публикации блога [Web Apps Virtual Network Integration](https://azure.microsoft.com/blog/2014/09/15/azure-websites-virtual-network-integration/) (Интеграция виртуальной сети веб-приложений). |
| **Масштабируемость** |Вертикальное масштабирование доступен путем увеличения размеров виртуальных машин hello или добавления дополнительных дисков. Дополнительные сведения о размерах виртуальных машин см. в разделе [Размеры виртуальных машин в Azure](../sizes.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).<br/><br/>**Для сервера базы данных**: горизонтальное масштабирование можно выполнить с помощью методов секционирования базы данных и групп доступности AlwaysOn в SQL Server.<br/><br/>Для серьезных рабочих нагрузок чтения можно использовать [группы доступности AlwaysOn](https://msdn.microsoft.com/library/hh510230.aspx) на нескольких дополнительных узлах, а также репликацию SQL Server.<br/><br/>Для рабочих нагрузок с интенсивной записи можно реализовать горизонтальное секционирование данных на нескольких физических серверов tooprovide приложения масштабирования.<br/><br/>Кроме того, можно реализовать горизонтальное масштабирование, используя [SQL Server с маршрутизацией, зависящей от данных](https://technet.microsoft.com/library/cc966448.aspx). С помощью данных зависимых маршрутизацией (DDR), необходим механизм hello клиентского приложения, обычно в слое бизнес-уровня hello секционирования hello tooimplement, базы данных tooroute hello запросы toomultiple узлов SQL Server. Hello бизнес-уровень содержит сопоставления toohow hello данные секционированы и какой узел содержит данные hello.<br/><br/>Вы можете масштабировать приложения, запускающие виртуальные машины. Дополнительные сведения см. в разделе [как tooScale приложения](../../../cloud-services/cloud-services-how-to-scale.md).<br/><br/>**Важное примечание**: hello **автомасштабирования** компонента в Azure позволяет tooautomatically увеличение или уменьшение hello виртуальные машины, используемые вашим приложением. Эта функция гарантирует, что взаимодействие с конечным пользователем hello влияния не оказывается отрицательно периоды пиковой нагрузки, и виртуальные машины, завершают работу, если hello потребность низкая. Рекомендуется не установить hello автомасштабирования параметр для облачной службы содержит виртуальные машины SQL Server. Hello причина-выполнение этой функции hello автоматического масштабирования позволяет Azure tooturn на виртуальной машине при hello ЦП на этой ВМ превышает некоторое пороговое значение и tooturn виртуальной машины при hello ЦП становится ниже этого значения. функция автоматического масштабирования Hello подходит для приложений без отслеживания состояния, например веб-серверы, где все виртуальные Машины можно управлять рабочей нагрузкой hello без ссылки tooany предыдущее состояние. Однако функция автоматического масштабирования hello не полезна для приложений с отслеживанием состояния, таких как SQL Server, где только один экземпляр позволяет записи toohello базы данных. |Разворачивание можно выполнять с помощью нескольких веб-ролей и рабочих ролей. Дополнительные сведения о размерах виртуальных машин для веб-ролей и рабочих ролей см. в статье [Размеры для облачных служб](../../../cloud-services/cloud-services-sizes-specs.md).<br/><br/>При использовании **облачные службы**, можно определить несколько ролей toodistribute обработки, а также добиться гибкого масштабирования приложения. Все облачные службы включают одну или несколько веб-ролей или рабочих ролей, каждая из которых имеет собственные файлы и конфигурацию приложения. Можно вертикального масштабирования облачной службы, увеличив hello число экземпляров роли (виртуальных машин), развернутых для роли и вниз облачной службы за счет уменьшения hello число экземпляров роли. Дополнительные сведения см. в статье [Стоит ли сделать выбор в пользу облачных служб или чего-то другого?](../../../cloud-services/cloud-services-choose-me.md)<br/><br/>Вы можете выполнять горизонтальное масштабирование благодаря встроенной поддержке высокого уровня доступности Azure в соответствии с [соглашением об уровне обслуживания для облачных служб, виртуальных машин и виртуальной сети](http://www.microsoft.com/download/details.aspx?id=38427) и балансировщика нагрузки.<br/><br/>Для многоуровневого приложения рекомендуется подключения сервера toodatabase приложений рабочих и веб-ролей виртуальных машин с помощью виртуальной сети Azure. Кроме того, Azure обеспечивает балансировку нагрузки для виртуальных машин в hello же облачной службе, распределяя по ним запросы пользователей. Виртуальные машины, соединенные таким образом могут взаимодействовать напрямую друг с другом по локальной сети hello в центре обработки данных Azure.<br/><br/>Можно настроить **автомасштабирования** hello портал Azure, а также hello расписания. Дополнительные сведения см. в разделе [как tooconfigure автоматическое масштабирование для облачной службы в портале hello](../../../cloud-services/cloud-services-how-to-scale-portal.md). |**Увеличение и уменьшение масштаба**: вы можно увеличивать или уменьшать размер hello hello экземпляра (ВМ), зарезервированный для веб-сайта.<br/><br/>Горизонтальное масштабирование: вы можете добавить дополнительные зарезервированные экземпляры (виртуальные машины) для своего веб-сайта.<br/><br/>Можно настроить **автомасштабирования** hello портала, а также hello расписания. Дополнительные сведения см. в разделе [как tooScale веб-приложений](../../../app-service-web/web-sites-scale.md). |

Дополнительные сведения о выборе между этими программными методами см. в разделе [веб-приложения Azure, облачных служб и виртуальных машин: при toouse которого](../../../app-service-web/choose-web-site-cloud-service-vm.md).

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о работе SQL Server на виртуальных машинах Azure см. в статье [Приступая к работе с SQL Server в виртуальных машинах Azure](virtual-machines-windows-sql-server-iaas-overview.md).

