---
title: "aaaStorage решений для виртуальных машин Windows в Azure | Документы Microsoft"
description: "Дополнительные сведения о hello ключевые проектирования и реализации рекомендации по развертыванию решений для хранения данных в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-windows
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 4ceb7d32-7a0d-4004-b701-c2bbcaff6b0b
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 57c27a7305964a56e6b2d1e73dee8e7da19fa8f8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-windows-vms"></a>Рекомендации по службе хранилища Azure для виртуальных машин Windows

[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-intro](../../../includes/virtual-machines-windows-infrastructure-guidelines-intro.md)]

Эта статья посвящена требованиям к хранилищу и вопросам проектирования, связанным с обеспечением оптимальной производительности виртуальных машин.

## <a name="implementation-guidelines-for-storage"></a>Рекомендации по реализации хранилища
Решения

* Будут ли toouse Azure диски управляемого или неуправляемого дисков?
* Требуется хранилище toouse Standard или Premium для рабочей нагрузки?
* Требуется дисков toocreate чередование дисков размером более 4 ТБ?
* Требуется оптимальной производительности операций ввода-вывода диска чередование tooachieve для рабочей нагрузки?
* Какой набор учетных записей хранения нужна toohost рабочей нагрузки ИТ или инфраструктуры?

Задачи

* Просмотрите требования ввода-вывода приложений hello, развертывании и планирование hello нужное число и тип учетных записей хранения.
* Создайте набор hello с помощью имен учетных записей хранения. Можно использовать Azure PowerShell или портала hello.

## <a name="storage"></a>Хранилище
Служба хранилища Azure — ключевая составляющая в развертывании виртуальных машин и приложений и управлении ими. Хранилища Azure предоставляет службы для хранения файлов данных, неструктурированные данные и сообщения, и он также является частью инфраструктуры hello, поддержка виртуальных машин.

[Диски Azure управляемых](../../storage/storage-managed-disks-overview.md) обрабатывает хранилища для вас фоновом hello. В неуправляемой дисков создать учетные записи хранения toohold hello дисков (VHD-файлы) для виртуальных машин Azure. При масштабировании должен убедитесь, что вы создали дополнительные учетные записи хранения, не превышает ограничение hello операций ввода-ВЫВОДА хранилища с любым диски. С дисками, управляемых обработки хранилища, вы больше не ограничены hello ограничения учетной записи хранения (например, 20 000 операций ввода-ВЫВОДА / учетной записи). Вы больше не имеют toocopy учетные записи хранения toomultiple пользовательских образов (VHD-файлы). Можно управлять ими в одном месте — одну учетную запись хранения в одном регионе Azure и использовать их toocreate сотен ВМ в подписке. Мы рекомендуем использовать Управляемые диски для новых развертываний.

Для обслуживания виртуальных машин доступны учетные записи хранения двух типов.

* Стандартное хранилище учетные записи предоставляют доступ tooblob хранилища (используется для хранения дисков виртуальной Машины Azure), хранилище, хранилище очередей, таблиц и хранилище файлов.
* [хранения уровня "Премиум"](../../storage/storage-premium-storage.md) обеспечивают высокопроизводительные диски с малой задержкой для рабочих нагрузок с интенсивным вводом-выводом, например для рабочих нагрузок в сегментированных кластерах MongoDB. В настоящее время хранилище уровня "Премиум" поддерживает только диски виртуальных машин Azure.

Azure создает виртуальные машины с диском операционной системы, временным диском и любым количеством дополнительных дисков данных (которые могут и отсутствовать). Hello диск операционной системы и дисков данных — Azure страничных BLOB-объектов, а временный диск hello хранится локально на узле hello, где находятся машины hello. Будьте внимательны при разработке приложений, tooonly служит этом временном диске для временных данных hello между узлами во время события обслуживания может выполнить миграцию виртуальной Машины. Данные, хранящиеся на временном диске hello, будут потеряны.

Устойчивость и высокий уровень доступности обеспечивается hello базового хранилища Azure среды tooensure сохранение данные защищены от незапланированных сбоев оборудования или обслуживания. При разработке среды хранилища Azure, вы можете tooreplicate хранилище виртуальных Машин:

* локально в пределах заданного центра обработки данных Azure;
* между центрами обработки данных Azure в пределах заданного региона;
* между центрами обработки данных Azure в разных регионах.

Можно прочитать [Дополнительные сведения о параметрах репликации hello для обеспечения высокой доступности](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).

Максимальный размер дисков операционной системы и дисков данных составляет 4 ГБ. Это ограничение дисковых пространств в Windows Server 2012 или более поздней версии toosurpass можно использовать объединение дисков toopresent логических томов данных размером более 4 ТБ tooyour виртуальных Машин друг с другом.

Существуют некоторые ограничения масштабируемости, накладываемые при проектировании развертываний службы хранилища Azure. Дополнительные сведения об этом см. в статье [Подписка Azure, границы, квоты и ограничения службы](../../azure-subscription-service-limits.md#storage-limits). Ознакомьтесь также со статьей [Целевые показатели масштабируемости и производительности хранилища Azure](../../storage/storage-scalability-targets.md).

Что касается хранилища приложений, можно хранить неструктурированные данные объектов, таких как документы, изображения, резервные копии, данные конфигурации, журналы и т. д., используя хранилище BLOB-объектов. Вместо того чтобы приложения записи toohello tooa виртуальный диск виртуальной Машины приложение hello сможет выполнять непосредственную запись tooAzure хранилища больших двоичных объектов. Хранилище больших двоичных объектов также предоставляет возможность hello [горячей и охлаждение уровни хранилища](../../storage/storage-blob-storage-tiers.md) в зависимости от того, требованиями и ограничениями расходов на доступность.

## <a name="striped-disks"></a>Диски с чередованием
Помимо возможности toocreate диски размером более 4 ТБ во многих случаях, с помощью чередование дисков данных повышает производительность, позволяя несколько больших двоичных объектов хранилища hello tooback для одного тома. Используя чередование, toowrite необходимые hello ввода-вывода и чтения данных из одного логического диска выполняется параллельно.

Azure налагает ограничения на hello количество дисков данных и объем пропускной способности, в зависимости от размера виртуальной Машины hello. Дополнительную информацию см. в статье [Размеры виртуальных машин](sizes.md).

При использовании чередования дисков для дисков данных Azure рекомендуется следовать рекомендациям hello:

* Присоединение дисков hello максимальный объем данных, допустимых для hello размер виртуальной Машины.
* Используйте дисковые пространства.
* Избегайте использовать параметры кэширования дисков данных Azure (для политики кэширования нужно выбрать параметр "Нет").

Дополнительные сведения см. в статье [Дисковые пространства: повышение производительности](http://social.technet.microsoft.com/wiki/contents/articles/15200.storage-spaces-designing-for-performance.aspx).

## <a name="multiple-storage-accounts"></a>Несколько учетных записей хранения
В этом разделе не применяется слишком[управляемых дисков Azure](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), как не следует создавать отдельные учетные записи хранения. 

При проектировании среды хранилища Azure для неуправляемых диски, можно использовать несколько учетных записей хранения согласно hello число виртуальных машин, развертываемых увеличивается. Такой подход помогает распределять out hello ввода-вывода между hello базового хранилища Azure инфраструктуры toomaintain оптимальной производительности для виртуальных машин и приложений. При разработке приложения hello, развертывании, учитывайте требования ввода-вывода hello, у каждой виртуальной Машины и баланс out этих виртуальных машин в учетных записях хранения Azure. Попробуйте tooavoid Группирование всех hello высокой ввода-вывода ресурсоемких виртуальных машин в учетных записях хранения toojust одной или двумя.

Дополнительные сведения о возможностях hello ввода-вывода hello различных вариантов хранилища Azure, а также некоторые рекомендации максимальные ограничения, см. в разделе [целей производительности и масштабируемости хранилища Azure](../../storage/storage-scalability-targets.md).

## <a name="next-steps"></a>Дальнейшие действия
[!INCLUDE [virtual-machines-windows-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-windows-infrastructure-guidelines-next-steps.md)]

