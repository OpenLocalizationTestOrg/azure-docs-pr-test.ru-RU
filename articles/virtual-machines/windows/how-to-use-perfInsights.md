---
title: "Как использовать PerfInsights в Microsoft Azure | Документация Майкрософт"
description: "Использование PerfInsights для устранения проблем производительности на виртуальных машинах Windows."
services: virtual-machines-windows'
documentationcenter: 
author: genlin
manager: cshepard
editor: na
tags: 
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.devlang: na
ms.topic: article
ms.date: 07/18/2017
ms.author: genli
ms.openlocfilehash: f22bd42302b96118dba0d4e5e387c6798a0b8777
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="how-to-use-perfinsights"></a><span data-ttu-id="4d7e5-103">Как использовать PerfInsights</span><span class="sxs-lookup"><span data-stu-id="4d7e5-103">How to use PerfInsights</span></span> 

<span data-ttu-id="4d7e5-104">[PerfInsights](http://aka.ms/perfinsightsdownload) — это автоматический скрипт, который собирает полезные диагностические данные, выполняет стрессовые нагрузки ввода-вывода и предоставляет отчеты об анализе для устранения проблем производительности на виртуальных машинах Windows в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-104">[PerfInsights](http://aka.ms/perfinsightsdownload) is an automated script that collects useful diagnostic information, runs I/O stress loads, and provides an analysis report to help troubleshoot Windows VM performance problems in Microsoft Azure.</span></span> 

<span data-ttu-id="4d7e5-105">Мы советуем запускать этот скрипт, прежде чем отправлять запрос в службу поддержки Майкрософт на устранение проблем производительности на виртуальных машинах.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-105">We recommend that you run this script before you open a Support ticket with Microsoft for VM performance issues.</span></span>

## <a name="supported-troubleshooting-scenarios"></a><span data-ttu-id="4d7e5-106">Поддерживаемые сценарии устранения неисправностей</span><span class="sxs-lookup"><span data-stu-id="4d7e5-106">Supported troubleshooting scenarios</span></span>

<span data-ttu-id="4d7e5-107">PerfInsights может собирать и анализировать несколько типов данных, которые группируются в уникальные сценарии.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-107">PerfInsights can collect and analyze several kinds of information that are grouped into unique scenarios.</span></span>

### <a name="collect-disk-configuration"></a><span data-ttu-id="4d7e5-108">Сбор данных конфигурации дисков</span><span class="sxs-lookup"><span data-stu-id="4d7e5-108">Collect disk configuration</span></span> 

<span data-ttu-id="4d7e5-109">Этот сценарий собирает данные конфигурации дисков и другие важные сведения,в том числе:</span><span class="sxs-lookup"><span data-stu-id="4d7e5-109">This scenario collects the disk configuration and other important information, including the following items:</span></span>

-   <span data-ttu-id="4d7e5-110">Журналы событий</span><span class="sxs-lookup"><span data-stu-id="4d7e5-110">Event logs</span></span>

-   <span data-ttu-id="4d7e5-111">состояние всех входящих и исходящих сетевых подключений;</span><span class="sxs-lookup"><span data-stu-id="4d7e5-111">Network status for all incoming and outgoing connections</span></span>

-   <span data-ttu-id="4d7e5-112">параметры конфигурации сети и брандмауэра;</span><span class="sxs-lookup"><span data-stu-id="4d7e5-112">Network and firewall configuration settings</span></span>

-   <span data-ttu-id="4d7e5-113">список задач всех приложений, запущенных в системе;</span><span class="sxs-lookup"><span data-stu-id="4d7e5-113">Task list for all applications that are currently running on the system</span></span>

-   <span data-ttu-id="4d7e5-114">файл со сведениями, созданный для виртуальной машины с помощью msinfo32;</span><span class="sxs-lookup"><span data-stu-id="4d7e5-114">Information file created by msinfo32 for the virtual machine (VM)</span></span>

-   <span data-ttu-id="4d7e5-115">параметры конфигурации базы данных Microsoft SQL Server (если виртуальная машина определяется как сервер, на котором выполняется SQL Server);</span><span class="sxs-lookup"><span data-stu-id="4d7e5-115">Microsoft SQL Server database configuration settings (if the VM is identified as a server that is running SQL Server)</span></span>

-   <span data-ttu-id="4d7e5-116">счетчики надежности хранилища;</span><span class="sxs-lookup"><span data-stu-id="4d7e5-116">Storage reliability counters</span></span>

-   <span data-ttu-id="4d7e5-117">важные исправления Windows;</span><span class="sxs-lookup"><span data-stu-id="4d7e5-117">Important Windows hotfixes</span></span>

-   <span data-ttu-id="4d7e5-118">установленные драйверы фильтра.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-118">Installed filter drivers</span></span>

<span data-ttu-id="4d7e5-119">Это пассивный сбор данных, который не должен повлиять на систему.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-119">This is a passive collection of information that shouldn't affect the system.</span></span> 

>[!Note]
><span data-ttu-id="4d7e5-120">Этот сценарий автоматически включен в каждый из следующих сценариев.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-120">This scenario is automatically included in each of the following scenarios.</span></span>

### <a name="benchmarkstorage-performance-test"></a><span data-ttu-id="4d7e5-121">Тест производительности хранилища</span><span class="sxs-lookup"><span data-stu-id="4d7e5-121">Benchmark/Storage Performance Test</span></span>

<span data-ttu-id="4d7e5-122">Этот сценарий запускает тест производительности [diskspd](https://github.com/Microsoft/diskspd) (операции ввода-вывода в Мбит/с) всех дисков, подключенных к виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-122">This scenario runs the [diskspd](https://github.com/Microsoft/diskspd) benchmark test (IOPS and MBPS) for all drives that are attached to the VM.</span></span> 

> [!Note]
> <span data-ttu-id="4d7e5-123">Данный сценарий не рекомендуется запускать в рабочей системе, так как он может повлиять на систему.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-123">This scenario can affect the system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="4d7e5-124">При необходимости запустите этот сценарий во время выделенного периода обслуживания, чтобы избежать проблем.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-124">If necessary, run this scenario in a dedicated maintenance window to avoid any problems.</span></span> <span data-ttu-id="4d7e5-125">Увеличение рабочей нагрузки, вызванное тестом производительности или трассировкой, может негативно повлиять на производительность виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-125">An increased workload that is caused by a trace or benchmark test could adversely affect the performance of your VM.</span></span>
>

### <a name="general-vm-slow-analysis"></a><span data-ttu-id="4d7e5-126">Общий анализ понижения производительности виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="4d7e5-126">General VM Slow analysis</span></span> 

<span data-ttu-id="4d7e5-127">Этот сценарий запускает трассировку [счетчиков производительности](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx), которые указаны в файле Generalcounters.txt.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-127">This scenario runs a [performance counter](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) trace by using the counters that are specified in the Generalcounters.txt file.</span></span> <span data-ttu-id="4d7e5-128">Если виртуальная машина определяется как сервер, на котором работает SQL Server, сценарий выполняет трассировку счетчиков производительности, которые указаны в файле Generalcounters.txt.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-128">If the VM is identified as a server that is running SQL Server, it runs a performance counter trace by using the counters that are found in the Sqlcounters.txt file.</span></span> <span data-ttu-id="4d7e5-129">Он также содержит данные диагностики производительности.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-129">It also includes Performance Diagnostics data.</span></span>

### <a name="vm-slow-analysis-and-benchmark"></a><span data-ttu-id="4d7e5-130">Тест и анализ понижения производительности виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="4d7e5-130">VM Slow analysis and benchmark</span></span>

<span data-ttu-id="4d7e5-131">Этот сценарий запускает трассировку [счетчиков производительности](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx), за которой следует тест производительности [diskspd](https://github.com/Microsoft/diskspd).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-131">This scenario runs a [performance counter](https://msdn.microsoft.com/library/windows/desktop/aa373083(v=vs.85).aspx) trace that is followed by a [diskspd](https://github.com/Microsoft/diskspd) benchmark test.</span></span> 

> [!Note]
> <span data-ttu-id="4d7e5-132">Данный сценарий не рекомендуется запускать в рабочей системе, так как он может повлиять на систему.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-132">This scenario can affect the system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="4d7e5-133">При необходимости запустите этот сценарий во время выделенного периода обслуживания, чтобы избежать проблем.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-133">If necessary, run this scenario in a dedicated maintenance window to avoid any problems.</span></span> <span data-ttu-id="4d7e5-134">Увеличение рабочей нагрузки, вызванное тестом производительности или трассировкой, может негативно повлиять на производительность виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-134">An increased workload that is caused by a trace or benchmark test could adversely affect the performance of your VM.</span></span>
>

### <a name="azure-files-analysis"></a><span data-ttu-id="4d7e5-135">Анализ файлов Azure</span><span class="sxs-lookup"><span data-stu-id="4d7e5-135">Azure Files analysis</span></span> 

<span data-ttu-id="4d7e5-136">Этот сценарий запускает специальную запись счетчиков производительности вместе с функцией сетевой трассировки.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-136">This scenario runs a special performance counter capture together with a network trace.</span></span> <span data-ttu-id="4d7e5-137">Запись включает в себя все счетчики "Общие ресурсы SMB-клиента".</span><span class="sxs-lookup"><span data-stu-id="4d7e5-137">The capture includes all the "SMB Client Shares" counters.</span></span> <span data-ttu-id="4d7e5-138">Ниже приведены некоторые ключевые счетчики производительности общих ресурсов SMB-клиента, которые являются частью записи.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-138">The following are some key SMB client share performance counters that are part of the capture:</span></span>

| <span data-ttu-id="4d7e5-139">**Тип**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-139">**Type**</span></span>     | <span data-ttu-id="4d7e5-140">**Общие ресурсы SMB-клиента**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-140">**SMB client shares counter**</span></span> |
|--------------|-------------------------------|
| <span data-ttu-id="4d7e5-141">ОПЕРАЦИЙ ВВОДА-ВЫВОДА</span><span class="sxs-lookup"><span data-stu-id="4d7e5-141">IOPS</span></span>         | <span data-ttu-id="4d7e5-142">Запросов данных в секунду</span><span class="sxs-lookup"><span data-stu-id="4d7e5-142">Data Requests/sec</span></span>             |
|              | <span data-ttu-id="4d7e5-143">Запросов на чтение в секунду</span><span class="sxs-lookup"><span data-stu-id="4d7e5-143">Read Requests/sec</span></span>             |
|              | <span data-ttu-id="4d7e5-144">Запросов на запись в секунду</span><span class="sxs-lookup"><span data-stu-id="4d7e5-144">Write Requests/sec</span></span>            |
| <span data-ttu-id="4d7e5-145">Задержка</span><span class="sxs-lookup"><span data-stu-id="4d7e5-145">Latency</span></span>      | <span data-ttu-id="4d7e5-146">Средняя запроса данные/сек</span><span class="sxs-lookup"><span data-stu-id="4d7e5-146">Avg. sec/Data Request</span></span>         |
|              | <span data-ttu-id="4d7e5-147">Среднее время чтения с</span><span class="sxs-lookup"><span data-stu-id="4d7e5-147">Avg. sec/Read</span></span>                 |
|              | <span data-ttu-id="4d7e5-148">Среднее время записи сек</span><span class="sxs-lookup"><span data-stu-id="4d7e5-148">Avg. sec/Write</span></span>                |
| <span data-ttu-id="4d7e5-149">Размер ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="4d7e5-149">IO Size</span></span>      | <span data-ttu-id="4d7e5-150">Среднее число байтов в запросе</span><span class="sxs-lookup"><span data-stu-id="4d7e5-150">Avg. Bytes/Data Request</span></span>       |
|              | <span data-ttu-id="4d7e5-151">Среднее число байтов в запросе на чтение</span><span class="sxs-lookup"><span data-stu-id="4d7e5-151">Avg. Bytes/Read</span></span>               |
|              | <span data-ttu-id="4d7e5-152">Среднее число байтов в запросе на запись</span><span class="sxs-lookup"><span data-stu-id="4d7e5-152">Avg. Bytes/Write</span></span>              |
| <span data-ttu-id="4d7e5-153">Пропускная способность</span><span class="sxs-lookup"><span data-stu-id="4d7e5-153">Throughput</span></span>   | <span data-ttu-id="4d7e5-154">Байтов в секунду</span><span class="sxs-lookup"><span data-stu-id="4d7e5-154">Data Bytes/sec</span></span>                |
|              | <span data-ttu-id="4d7e5-155">Прочитано байтов в секунду</span><span class="sxs-lookup"><span data-stu-id="4d7e5-155">Read Bytes/sec</span></span>                |
|              | <span data-ttu-id="4d7e5-156">Записано байтов в секунду</span><span class="sxs-lookup"><span data-stu-id="4d7e5-156">Write Bytes/sec</span></span>               |
| <span data-ttu-id="4d7e5-157">Длина очереди</span><span class="sxs-lookup"><span data-stu-id="4d7e5-157">Queue Length</span></span> | <span data-ttu-id="4d7e5-158">Среднее Длина очереди чтения</span><span class="sxs-lookup"><span data-stu-id="4d7e5-158">Avg. Read Queue Length</span></span>        |
|              | <span data-ttu-id="4d7e5-159">Среднее Длина очереди записи</span><span class="sxs-lookup"><span data-stu-id="4d7e5-159">Avg. Write Queue Length</span></span>       |
|              | <span data-ttu-id="4d7e5-160">Среднее Длина очереди данных</span><span class="sxs-lookup"><span data-stu-id="4d7e5-160">Avg. Data Queue Length</span></span>        |

### <a name="custom-configuration"></a><span data-ttu-id="4d7e5-161">Настраиваемая конфигурация</span><span class="sxs-lookup"><span data-stu-id="4d7e5-161">Custom configuration</span></span> 

<span data-ttu-id="4d7e5-162">При запуске пользовательской конфигурации все трассировки выполняются в параллельном режиме (диагностика производительности, счетчик производительности, xperf, сеть, storport), в зависимости от того, сколько различных трассировок выбрано.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-162">When you run a custom configuration, you are running all traces (performance diagnostics, performance counter, xperf, network, storport) in parallel, depending how many different traces are selected.</span></span> <span data-ttu-id="4d7e5-163">После завершения трассировки средство выполняет тест производительности diskspd, если он выбран.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-163">After tracing is completed, the tool runs the diskspd benchmark, if it is selected.</span></span> 

> [!Note]
> <span data-ttu-id="4d7e5-164">Данный сценарий не рекомендуется запускать в рабочей системе, так как он может повлиять на систему.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-164">This scenario can affect the system and shouldn’t be run on a live production system.</span></span> <span data-ttu-id="4d7e5-165">При необходимости запустите этот сценарий во время выделенного периода обслуживания, чтобы избежать проблем.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-165">If necessary, run this scenario in a dedicated maintenance window to avoid any problems.</span></span> <span data-ttu-id="4d7e5-166">Увеличение рабочей нагрузки, вызванное тестом производительности или трассировкой, может негативно повлиять на производительность виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-166">An increased workload that is caused by a trace or benchmark test could adversely affect the performance of your VM.</span></span>
>

## <a name="what-kind-of-information-is-collected-by-the-script"></a><span data-ttu-id="4d7e5-167">Сведения, которые собираются с помощью скрипта</span><span class="sxs-lookup"><span data-stu-id="4d7e5-167">What kind of information is collected by the script?</span></span>

<span data-ttu-id="4d7e5-168">В зависимости от используемого сценария тестирования производительности собираются сведения о виртуальных машинах Windows, конфигурацию дисков или пулов хранения, счетчики производительности, журналы и различные трассировки.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-168">Information about Windows VM, disks or storage pools configuration, performance counters, logs and various traces are collected depending on the performance scenario used:</span></span>

|<span data-ttu-id="4d7e5-169">Собираемые данные</span><span class="sxs-lookup"><span data-stu-id="4d7e5-169">Data collected</span></span>                              |  |  | <span data-ttu-id="4d7e5-170">Сценарии тестирования производительности</span><span class="sxs-lookup"><span data-stu-id="4d7e5-170">Performance Scenarios</span></span> |  |  | |
|----------------------------------|----------------------------|------------------------------------|--------------------------|--------------------------------|----------------------|----------------------|
|                              | <span data-ttu-id="4d7e5-171">Сбор данных конфигурации дисков</span><span class="sxs-lookup"><span data-stu-id="4d7e5-171">Collect disk Configuration</span></span> | <span data-ttu-id="4d7e5-172">Тест производительности хранилища.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-172">Benchmark/Storage Performance test</span></span> | <span data-ttu-id="4d7e5-173">Общий анализ понижения производительности виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="4d7e5-173">General VM Slow analysis</span></span> | <span data-ttu-id="4d7e5-174">Тест и анализ понижения производительности виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="4d7e5-174">VM Slow analysis and benchmark</span></span> | <span data-ttu-id="4d7e5-175">Анализ файлов Azure</span><span class="sxs-lookup"><span data-stu-id="4d7e5-175">Azure Files analysis</span></span> | <span data-ttu-id="4d7e5-176">Настраиваемая конфигурация</span><span class="sxs-lookup"><span data-stu-id="4d7e5-176">Custom configuration</span></span> |
| <span data-ttu-id="4d7e5-177">Сведения из журналов событий</span><span class="sxs-lookup"><span data-stu-id="4d7e5-177">Information from Event logs</span></span>      | <span data-ttu-id="4d7e5-178">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-178">Yes</span></span>                        | <span data-ttu-id="4d7e5-179">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-179">Yes</span></span>                                | <span data-ttu-id="4d7e5-180">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-180">Yes</span></span>                      | <span data-ttu-id="4d7e5-181">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-181">Yes</span></span>                            | <span data-ttu-id="4d7e5-182">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-182">Yes</span></span>                  | <span data-ttu-id="4d7e5-183">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-183">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-184">Сведения о системе</span><span class="sxs-lookup"><span data-stu-id="4d7e5-184">System information</span></span>               | <span data-ttu-id="4d7e5-185">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-185">Yes</span></span>                        | <span data-ttu-id="4d7e5-186">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-186">Yes</span></span>                                | <span data-ttu-id="4d7e5-187">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-187">Yes</span></span>                      | <span data-ttu-id="4d7e5-188">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-188">Yes</span></span>                            | <span data-ttu-id="4d7e5-189">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-189">Yes</span></span>                  | <span data-ttu-id="4d7e5-190">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-190">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-191">Сопоставление томов</span><span class="sxs-lookup"><span data-stu-id="4d7e5-191">Volume Map</span></span>                       | <span data-ttu-id="4d7e5-192">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-192">Yes</span></span>                        | <span data-ttu-id="4d7e5-193">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-193">Yes</span></span>                                | <span data-ttu-id="4d7e5-194">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-194">Yes</span></span>                      | <span data-ttu-id="4d7e5-195">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-195">Yes</span></span>                            | <span data-ttu-id="4d7e5-196">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-196">Yes</span></span>                  | <span data-ttu-id="4d7e5-197">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-197">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-198">Сопоставление дисков</span><span class="sxs-lookup"><span data-stu-id="4d7e5-198">Disk Map</span></span>                         | <span data-ttu-id="4d7e5-199">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-199">Yes</span></span>                        | <span data-ttu-id="4d7e5-200">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-200">Yes</span></span>                                | <span data-ttu-id="4d7e5-201">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-201">Yes</span></span>                      | <span data-ttu-id="4d7e5-202">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-202">Yes</span></span>                            | <span data-ttu-id="4d7e5-203">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-203">Yes</span></span>                  | <span data-ttu-id="4d7e5-204">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-204">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-205">Выполняемые задачи</span><span class="sxs-lookup"><span data-stu-id="4d7e5-205">Running Tasks</span></span>                    | <span data-ttu-id="4d7e5-206">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-206">Yes</span></span>                        | <span data-ttu-id="4d7e5-207">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-207">Yes</span></span>                                | <span data-ttu-id="4d7e5-208">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-208">Yes</span></span>                      | <span data-ttu-id="4d7e5-209">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-209">Yes</span></span>                            | <span data-ttu-id="4d7e5-210">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-210">Yes</span></span>                  | <span data-ttu-id="4d7e5-211">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-211">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-212">Счетчики надежности хранилища</span><span class="sxs-lookup"><span data-stu-id="4d7e5-212">Storage Reliability Counters</span></span>     | <span data-ttu-id="4d7e5-213">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-213">Yes</span></span>                        | <span data-ttu-id="4d7e5-214">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-214">Yes</span></span>                                | <span data-ttu-id="4d7e5-215">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-215">Yes</span></span>                      | <span data-ttu-id="4d7e5-216">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-216">Yes</span></span>                            | <span data-ttu-id="4d7e5-217">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-217">Yes</span></span>                  | <span data-ttu-id="4d7e5-218">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-218">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-219">Сведения о хранилище</span><span class="sxs-lookup"><span data-stu-id="4d7e5-219">Storage information</span></span>              | <span data-ttu-id="4d7e5-220">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-220">Yes</span></span>                        | <span data-ttu-id="4d7e5-221">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-221">Yes</span></span>                                | <span data-ttu-id="4d7e5-222">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-222">Yes</span></span>                      | <span data-ttu-id="4d7e5-223">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-223">Yes</span></span>                            | <span data-ttu-id="4d7e5-224">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-224">Yes</span></span>                  | <span data-ttu-id="4d7e5-225">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-225">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-226">Выходные данные fsutil</span><span class="sxs-lookup"><span data-stu-id="4d7e5-226">Fsutil output</span></span>                    | <span data-ttu-id="4d7e5-227">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-227">Yes</span></span>                        | <span data-ttu-id="4d7e5-228">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-228">Yes</span></span>                                | <span data-ttu-id="4d7e5-229">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-229">Yes</span></span>                      | <span data-ttu-id="4d7e5-230">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-230">Yes</span></span>                            | <span data-ttu-id="4d7e5-231">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-231">Yes</span></span>                  | <span data-ttu-id="4d7e5-232">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-232">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-233">Сведения о драйвере фильтра</span><span class="sxs-lookup"><span data-stu-id="4d7e5-233">Filter Driver info</span></span>               | <span data-ttu-id="4d7e5-234">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-234">Yes</span></span>                        | <span data-ttu-id="4d7e5-235">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-235">Yes</span></span>                                | <span data-ttu-id="4d7e5-236">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-236">Yes</span></span>                      | <span data-ttu-id="4d7e5-237">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-237">Yes</span></span>                            | <span data-ttu-id="4d7e5-238">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-238">Yes</span></span>                  | <span data-ttu-id="4d7e5-239">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-239">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-240">Выходные данные netstat</span><span class="sxs-lookup"><span data-stu-id="4d7e5-240">Netstat output</span></span>                   | <span data-ttu-id="4d7e5-241">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-241">Yes</span></span>                        | <span data-ttu-id="4d7e5-242">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-242">Yes</span></span>                                | <span data-ttu-id="4d7e5-243">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-243">Yes</span></span>                      | <span data-ttu-id="4d7e5-244">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-244">Yes</span></span>                            | <span data-ttu-id="4d7e5-245">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-245">Yes</span></span>                  | <span data-ttu-id="4d7e5-246">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-246">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-247">Конфигурация сети</span><span class="sxs-lookup"><span data-stu-id="4d7e5-247">Network configuration</span></span>            | <span data-ttu-id="4d7e5-248">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-248">Yes</span></span>                        | <span data-ttu-id="4d7e5-249">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-249">Yes</span></span>                                | <span data-ttu-id="4d7e5-250">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-250">Yes</span></span>                      | <span data-ttu-id="4d7e5-251">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-251">Yes</span></span>                            | <span data-ttu-id="4d7e5-252">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-252">Yes</span></span>                  | <span data-ttu-id="4d7e5-253">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-253">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-254">Настройка брандмауэра</span><span class="sxs-lookup"><span data-stu-id="4d7e5-254">Firewall configuration</span></span>           | <span data-ttu-id="4d7e5-255">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-255">Yes</span></span>                        | <span data-ttu-id="4d7e5-256">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-256">Yes</span></span>                                | <span data-ttu-id="4d7e5-257">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-257">Yes</span></span>                      | <span data-ttu-id="4d7e5-258">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-258">Yes</span></span>                            | <span data-ttu-id="4d7e5-259">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-259">Yes</span></span>                  | <span data-ttu-id="4d7e5-260">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-260">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-261">Конфигурация SQL Server</span><span class="sxs-lookup"><span data-stu-id="4d7e5-261">SQL Server configuration</span></span>         | <span data-ttu-id="4d7e5-262">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-262">Yes</span></span>                        | <span data-ttu-id="4d7e5-263">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-263">Yes</span></span>                                | <span data-ttu-id="4d7e5-264">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-264">Yes</span></span>                      | <span data-ttu-id="4d7e5-265">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-265">Yes</span></span>                            | <span data-ttu-id="4d7e5-266">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-266">Yes</span></span>                  | <span data-ttu-id="4d7e5-267">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-267">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-268">Трассировки диагностики производительности*</span><span class="sxs-lookup"><span data-stu-id="4d7e5-268">Performance Diagnostics Traces *</span></span> |                            |                                    | <span data-ttu-id="4d7e5-269">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-269">Yes</span></span>                      |                                |                      | <span data-ttu-id="4d7e5-270">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-270">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-271">Трассировка счетчиков производительности**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-271">Performance counter Trace **</span></span>     |                            |                                    |                          |                                |                      | <span data-ttu-id="4d7e5-272">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-272">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-273">Трассировка счетчиков SMB**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-273">SMB counter Trace **</span></span>             |                            |                                    |                          |                                | <span data-ttu-id="4d7e5-274">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-274">Yes</span></span>                  |                      |
| <span data-ttu-id="4d7e5-275">Трассировка счетчиков SQL Server**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-275">SQL Server counter Trace **</span></span>      |                            |                                    |                          |                                |                      | <span data-ttu-id="4d7e5-276">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-276">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-277">Трассировка XPerf</span><span class="sxs-lookup"><span data-stu-id="4d7e5-277">XPerf Trace</span></span>                      |                            |                                    |                          |                                |                      | <span data-ttu-id="4d7e5-278">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-278">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-279">Трассировка StorPort</span><span class="sxs-lookup"><span data-stu-id="4d7e5-279">StorPort Trace</span></span>                   |                            |                                    |                          |                                |                      | <span data-ttu-id="4d7e5-280">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-280">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-281">Трассировка сети</span><span class="sxs-lookup"><span data-stu-id="4d7e5-281">Network Trace</span></span>                    |                            |                                    |                          |                                | <span data-ttu-id="4d7e5-282">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-282">Yes</span></span>                  | <span data-ttu-id="4d7e5-283">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-283">Yes</span></span>                  |
| <span data-ttu-id="4d7e5-284">Трассировка теста производительности Diskspd***</span><span class="sxs-lookup"><span data-stu-id="4d7e5-284">Diskspd Benchmark trace ***</span></span>      |                            | <span data-ttu-id="4d7e5-285">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-285">Yes</span></span>                                |                          | <span data-ttu-id="4d7e5-286">Да</span><span class="sxs-lookup"><span data-stu-id="4d7e5-286">Yes</span></span>                            |                      |                      |
|       |                            |                         |                                                   |                      |                      |

### <a name="performance-diagnostics-trace-"></a><span data-ttu-id="4d7e5-287">Трассировка диагностики производительности (*)</span><span class="sxs-lookup"><span data-stu-id="4d7e5-287">Performance Diagnostics trace (*)</span></span>

<span data-ttu-id="4d7e5-288">Запускает в фоновом режиме модуль на основе правила для сбора данных и диагностики проблем с производительностью системы.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-288">Runs a rule-based engine in the background to collect data and diagnose ongoing performance issues.</span></span> <span data-ttu-id="4d7e5-289">В настоящее время поддерживаются следующие правила:</span><span class="sxs-lookup"><span data-stu-id="4d7e5-289">The following rules are currently supported:</span></span>

- <span data-ttu-id="4d7e5-290">Правило HighCpuUsage. Определяет периоды высокой загрузки ЦП и показывает основных потребителей ресурсов ЦП в эти периоды.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-290">HighCpuUsage rule: Detects high CPU usage periods and shows the top CPU usage consumers during those periods.</span></span>
- <span data-ttu-id="4d7e5-291">Правило HighDiskUsage. Определяет периоды высокой загрузки физического диска и показывает основных потребителей диска в эти периоды.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-291">HighDiskUsage rule: Detects high disk usage periods on physical disks and shows the top disk usage consumers during those periods.</span></span>
- <span data-ttu-id="4d7e5-292">Правило HighResolutionDiskMetric. Показывает метрики операций ввода-вывода, пропускной способности и задержки операций ввода-вывода за 50 мс для каждого физического диска.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-292">HighResolutionDiskMetric rule: Shows IOPS, throughput and IO latency metrics per 50 milliseconds for each physical disk.</span></span> <span data-ttu-id="4d7e5-293">Это позволяет быстро найти периоды регулирования диска.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-293">It helps to quickly identify disk throttling periods.</span></span>
- <span data-ttu-id="4d7e5-294">Правило HighMemoryUsage. Определяет периоды высокой загрузки памяти и показывает основных потребителей памяти в эти периоды.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-294">HighMemoryUsage rule: Detects high memory usage periods, and shows the top memory usage consumers during those periods.</span></span>

> [!NOTE] 
> <span data-ttu-id="4d7e5-295">В настоящее время поддерживаются версии Windows, которые содержат .NET Framework 3.5 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-295">Currently, Windows versions that include the .NET Framework 3.5 or later versions are supported.</span></span>

### <a name="performance-counter-trace-"></a><span data-ttu-id="4d7e5-296">Трассировка счетчиков производительности (**)</span><span class="sxs-lookup"><span data-stu-id="4d7e5-296">Performance Counter trace (**)</span></span>

<span data-ttu-id="4d7e5-297">Собирает следующие счетчики производительности.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-297">Collects the following Performance Counters:</span></span>

- <span data-ttu-id="4d7e5-298">\Процесс, \Процессор, \Память, \Поток, \Физический диск, \Логический диск</span><span class="sxs-lookup"><span data-stu-id="4d7e5-298">\Process, \Processor, \Memory, \Thread, \PhysicalDisk, \LogicalDisk</span></span>
- <span data-ttu-id="4d7e5-299">\Кэш\" Грязные" страницы, \Кэш\Сбросов ленивой записи/с, \Сервер\Невыгружаемый пул, ошибки, \Сервер\Отказов выгружаемого страничного пула</span><span class="sxs-lookup"><span data-stu-id="4d7e5-299">\Cache\Dirty Pages, \Cache\Lazy Write Flushes/sec, \Server\Pool Nonpaged, Failures, \Server\Pool Paged Failures</span></span>
- <span data-ttu-id="4d7e5-300">Выбранные счетчики в категориях \Сетевой интерфейс \IPv4\Датаграммы, \IPv6\Датаграммы, \TCPv4\Сегменты, \TCPv6\Сегменты, \Сетевой адаптер, \WFPv4\Пакеты, \WFPv6\Пакеты, \UDPv4\Датаграммы, \UDPv6\Датаграммы, \TCPv4\Подключение, \TCPv6\Подключение, \Политика качества обслуживания сети\Пакеты, \Активность сетевой карты для каждого процессора, \Microsoft Winsock BSP</span><span class="sxs-lookup"><span data-stu-id="4d7e5-300">Selected counters under \Network Interface, \IPv4\Datagrams, \IPv6\Datagrams, \TCPv4\Segments, \TCPv6\Segments,  \Network Adapter, \WFPv4\Packets, \WFPv6\Packets, \UDPv4\Datagrams, \UDPv6\Datagrams, \TCPv4\Connection, \TCPv6\Connection, \Network QoS Policy\Packets, \Per Processor Network Interface Card Activity, \Microsoft Winsock BSP</span></span>

#### <a name="for-sql-server-instances"></a><span data-ttu-id="4d7e5-301">Для экземпляров SQL Server</span><span class="sxs-lookup"><span data-stu-id="4d7e5-301">For SQL Server instances</span></span>
- <span data-ttu-id="4d7e5-302">\SQL Server:Buffer Manager, \SQLServer:Resource Pool Stats, \SQLServer: статистика SQL\\</span><span class="sxs-lookup"><span data-stu-id="4d7e5-302">\SQL Server:Buffer Manager, \SQLServer:Resource Pool Stats, \SQLServer:SQL Statistics\\</span></span>
- <span data-ttu-id="4d7e5-303">\SQLServer: блокировки, \SQLServer: общая статистика</span><span class="sxs-lookup"><span data-stu-id="4d7e5-303">\SQLServer:Locks, \SQLServer:General, Statistics</span></span>
- <span data-ttu-id="4d7e5-304">\SQLServer: способы доступа</span><span class="sxs-lookup"><span data-stu-id="4d7e5-304">\SQLServer:Access Methods</span></span>

#### <a name="for-azure-files"></a><span data-ttu-id="4d7e5-305">Для файлов Azure</span><span class="sxs-lookup"><span data-stu-id="4d7e5-305">For Azure Files</span></span>
<span data-ttu-id="4d7e5-306">\Общие ресурсы SMB-клиента</span><span class="sxs-lookup"><span data-stu-id="4d7e5-306">\SMB Client Shares</span></span>

### <a name="diskspd-benchmark-trace-"></a><span data-ttu-id="4d7e5-307">Трассировка теста производительности Diskspd (***)</span><span class="sxs-lookup"><span data-stu-id="4d7e5-307">Diskspd Benchmark trace (***)</span></span>
<span data-ttu-id="4d7e5-308">Тестирование рабочей нагрузки операций ввода-вывода Diskspd [диск операционной системы (запись) и диски пула (чтение и запись)]</span><span class="sxs-lookup"><span data-stu-id="4d7e5-308">Diskspd IO workload tests [OS Disk (write) and pool drives (read/write)]</span></span>

## <a name="run-the-perfinsights-on-your-vm"></a><span data-ttu-id="4d7e5-309">Выполнение PerfInsights на виртуальной машине</span><span class="sxs-lookup"><span data-stu-id="4d7e5-309">Run the PerfInsights on your VM</span></span>

### <a name="what-do-i-have-to-know-before-i-run-the-script"></a><span data-ttu-id="4d7e5-310">Что нужно знать, прежде чем запускать скрипт</span><span class="sxs-lookup"><span data-stu-id="4d7e5-310">What do I have to know before I run the script?</span></span> 

<span data-ttu-id="4d7e5-311">**Требования скрипта**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-311">**Script requirements**</span></span>

1.  <span data-ttu-id="4d7e5-312">Этот скрипт следует выполнять на виртуальных машинах с проблемами производительности.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-312">This script must be run on the VM that has the performance issue.</span></span> 

2.  <span data-ttu-id="4d7e5-313">Поддерживаются следующие операционные системы: Windows Server 2008 R2, 2012, 2012 R2, 2016; Windows 8.1 и Windows 10.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-313">The following OSes are supported: Windows Server 2008 R2, 2012, 2012 R2, 2016; Windows 8.1 and Windows 10.</span></span>

<span data-ttu-id="4d7e5-314">**Возможные проблемы при запуске сценария на рабочих виртуальных машинах:**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-314">**Possible issues when you run the script on production VMs:**</span></span>

1.  <span data-ttu-id="4d7e5-315">Скрипт может неблагоприятно повлиять на производительность виртуальной машины, если он используется вместе со сценариями "Тест производительности" или "Пользовательский", настроенными с помощью XPerf или DiskSpd.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-315">The script might adversely affect the performance of the VM when it is used together with the "Benchmark" or "Custom" scenario that is configured by using XPerf or DiskSpd.</span></span> <span data-ttu-id="4d7e5-316">Будьте внимательны при запуске сценария в рабочей среде.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-316">Be careful when you run the script in a production environment.</span></span>

2.  <span data-ttu-id="4d7e5-317">При использовании скрипта вместе со сценариями "Тест производительности" или "Пользовательский", настроенными с помощью DiskSpd, убедитесь, что никакие другие фоновые действия не мешают рабочей нагрузке ввода-вывода на тестируемых дисках.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-317">When you use the script together with the "Benchmark" or "Custom" scenario that is configured by using DiskSpd, make sure that no other background activity interferes with the I/O workload on the tested disks.</span></span>

3.  <span data-ttu-id="4d7e5-318">По умолчанию для сбора данных скрипт использует диск временного хранилища.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-318">By default, the script uses the temporary storage drive to collect data.</span></span> <span data-ttu-id="4d7e5-319">Если трассировка остается включенной длительное время, объем собираемых данных может увеличится соответственно.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-319">If tracing stays enabled for a longer time, the amount of data that is collected might be relevant.</span></span> <span data-ttu-id="4d7e5-320">Это может сократить доступное пространство на временном диске, что повлияет на все приложения, которые используют этот диск.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-320">This can reduce the availability of space on the temporary disk, therefore affecting any application that relies on this drive.</span></span>

### <a name="how-do-i-run-perfinsights"></a><span data-ttu-id="4d7e5-321">Способ запуска PerfInsights</span><span class="sxs-lookup"><span data-stu-id="4d7e5-321">How do I run PerfInsights?</span></span> 

<span data-ttu-id="4d7e5-322">Чтобы запустить скрипт, выполните следующее.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-322">To run the script, follow these steps:</span></span>

1. <span data-ttu-id="4d7e5-323">Скачайте [PerfInsights.zip](http://aka.ms/perfinsightsdownload).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-323">Download [PerfInsights.zip](http://aka.ms/perfinsightsdownload).</span></span>

2. <span data-ttu-id="4d7e5-324">Разблокируйте файл PerfInsights.zip.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-324">Unblock the PerfInsights.zip file.</span></span> <span data-ttu-id="4d7e5-325">Чтобы сделать это, щелкните правой кнопкой мыши файл PerfInsights.zip и выберите **Свойства**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-325">To do this, right-click the PerfInsights.zip file, select **Properties**.</span></span> <span data-ttu-id="4d7e5-326">На вкладке **Общие** выберите **Разблокировать** и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-326">In the **General** tab, select **Unblock** and then select **OK**.</span></span> <span data-ttu-id="4d7e5-327">После этого скрип запустится без дополнительных запросов безопасности.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-327">This will make sure that the script runs without any additional security prompts.</span></span>  

    ![Разблокирование ZIP-файла](media/how-to-use-perfInsights/unlock-file.png)

3.  <span data-ttu-id="4d7e5-329">Разверните сжатый файл PerfInsights.zip на временный диск (по умолчанию обычно это диск D).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-329">Expand the compressed PerfInsights.zip file into your temporary drive (by default, usually the D drive).</span></span> <span data-ttu-id="4d7e5-330">Сжатый файл должен содержать следующие файлы и папки:</span><span class="sxs-lookup"><span data-stu-id="4d7e5-330">The compressed file should contain the following files and folders:</span></span>

    ![файлы в ZIP-папке](media/how-to-use-perfInsights/file-folder.png)

4.  <span data-ttu-id="4d7e5-332">Откройте Windows PowerShell с правами администратора и запустите скрипт PerfInsights.ps1.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-332">Open Windows PowerShell as an administrator, and then run the PerfInsights.ps1 script.</span></span>

    ```
    cd <the path of PerfInsights folder >
    Powershell.exe -ExecutionPolicy UnRestricted -NoProfile -File .\\PerfInsights.ps1
    ```

    <span data-ttu-id="4d7e5-333">Может потребоваться ввести"y", если будет предложено подтвердить изменение политики выполнения.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-333">You might have to enter "y" to if you are asked to confirm that you want to change the execution policy.</span></span>

    <span data-ttu-id="4d7e5-334">В диалоговом окне "Отказ от ответственности" можно выбрать вариант предоставления сведений диагностики в службу технической поддержки Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-334">In the Disclaimer dialog box, you are given the option to share diagnostic information with Microsoft Support.</span></span> <span data-ttu-id="4d7e5-335">Также необходимо принять лицензионное соглашение, чтобы продолжить.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-335">You must also consent to the license agreement to continue.</span></span> <span data-ttu-id="4d7e5-336">Выберите нужные параметры и нажмите кнопку **Выполнить скрипт**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-336">Make your selections, and then click **Run Script**.</span></span>

    ![Диалоговое окно "Отказ от ответственности"](media/how-to-use-perfInsights/disclaimer.png)

5.  <span data-ttu-id="4d7e5-338">При запуске скрипта отправьте номер обращения, если он доступен (он нужен для нашей статистики).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-338">Submit the case number, if it is available, when you run the script (This is for our statistics).</span></span> <span data-ttu-id="4d7e5-339">Затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-339">Then, click **OK**.</span></span>
    
    ![Ввод идентификатора поддержки](media/how-to-use-perfInsights/enter-support-number.png)

6.  <span data-ttu-id="4d7e5-341">Выберите диск временного хранилища.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-341">Select your temporary storage drive.</span></span> <span data-ttu-id="4d7e5-342">Скрипт может автоматически обнаружить букву диска.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-342">The Script can auto-detect the drive letter of the drive.</span></span> <span data-ttu-id="4d7e5-343">При возникновении каких-либо проблем на этом этапе вам может быть предложено выбрать диск (по умолчанию это диск D).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-343">If any problems occur in this stage, you might be prompted to select the drive (the default drive is D).</span></span> <span data-ttu-id="4d7e5-344">Созданные журналы хранятся в папке log\_collection.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-344">Generated logs are stored here in the log\_collection folder.</span></span> <span data-ttu-id="4d7e5-345">Введите или выберите букву диска и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-345">After you enter or accept the drive letter, click **OK**.</span></span>

    ![Выбор буквы диска](media/how-to-use-perfInsights/enter-drive.png)

7.  <span data-ttu-id="4d7e5-347">Выберите сценарий устранения неполадок в предоставленном списке.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-347">Select a troubleshooting scenario from the provided list.</span></span>

       ![Выбор сценария поддержки](media/how-to-use-perfInsights/select-scenarios.png)

8.  <span data-ttu-id="4d7e5-349">Также вы можете запустить PerfInsights без пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-349">You can also run PerfInsights without UI.</span></span>

    <span data-ttu-id="4d7e5-350">Следующая команда запустит сценарий устранения неполадок "Общий анализ понижения производительности виртуальной машины" без запросов пользовательского интерфейса и сохранения данных в течение 30 секунд.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-350">The following command runs the "General VM Slow analysis" troubleshooting scenario without a UI prompt or capture data for 30 seconds.</span></span> <span data-ttu-id="4d7e5-351">Вам будет предложено принять то же заявление об отказе и лицензионное соглашение, указанные на шаге 4.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-351">It prompts you to consent to the same disclaimer and EULA that  are mentioned in step 4.</span></span>

        powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -NoGui -Scenario vmslow -TracingDuration 30"

    <span data-ttu-id="4d7e5-352">Для запуска PerfInsights в автоматическом режиме используйте параметр **-AcceptDisclaimerAndShareDiagnostics**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-352">If you want PerfInsights to run in silent mode, use the **-AcceptDisclaimerAndShareDiagnostics** parameter.</span></span> <span data-ttu-id="4d7e5-353">Например, используйте следующую команду:</span><span class="sxs-lookup"><span data-stu-id="4d7e5-353">For example, use the following command:</span></span>

        powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -NoGui -Scenario vmslow -TracingDuration 30 -AcceptDisclaimerAndShareDiagnostics"

### <a name="how-do-i-troubleshoot-issues-while-running-the-script"></a><span data-ttu-id="4d7e5-354">Устранение проблем во время выполнении скрипта</span><span class="sxs-lookup"><span data-stu-id="4d7e5-354">How do I troubleshoot issues while running the script?</span></span>

<span data-ttu-id="4d7e5-355">При аварийном завершении скрипта несогласованное состояние можно очистить, запустив скрипт с параметром -Cleanup, следующим образом:</span><span class="sxs-lookup"><span data-stu-id="4d7e5-355">If the script terminates abnormally, you can clean up an inconsistent state by running the script together with the -Cleanup switch, as follows:</span></span>

    powershell.exe -ExecutionPolicy UnRestricted -NoProfile -Command ".\\PerfInsights.ps1 -Cleanup"

<span data-ttu-id="4d7e5-356">При возникновении каких-либо проблем во время автоматического обнаружения временного диска вам может быть предложено выбрать диск (по умолчанию это диск D).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-356">If any problems occur during the automatic detection of the temporary drive, you might be prompted to select the drive (the default drive is D).</span></span>

![ввод буквы диска](media/how-to-use-perfInsights/enter-drive.png)

<span data-ttu-id="4d7e5-358">Этот скрипт удаляет средства служебной программы и временные папки.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-358">The script uninstalls the utility tools and removes temporary folders.</span></span>

### <a name="troubleshooting-other-script-issues"></a><span data-ttu-id="4d7e5-359">Устранение неполадок, связанных с запуском скриптов</span><span class="sxs-lookup"><span data-stu-id="4d7e5-359">Troubleshooting other script issues</span></span> 

<span data-ttu-id="4d7e5-360">При возникновении проблем при выполнении скрипта нажмите CTRL+C, чтобы прервать его выполнение.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-360">If any problems occur when you run the script, press Ctrl+C to interrupt the script execution.</span></span> <span data-ttu-id="4d7e5-361">Как удалить временные объекты см. в разделе "Очистка после аварийного завершения".</span><span class="sxs-lookup"><span data-stu-id="4d7e5-361">To remove temporary objects, see the "Clean up after abnormal termination" section.</span></span>

<span data-ttu-id="4d7e5-362">При возникновении сбоя скрипта даже после нескольких попыток рекомендуется запустить скрипт в режиме отладки с помощью параметра -Debug.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-362">If you continue to experience script failure even after several attempts, we recommend that you run the script in "debug mode" by using the "-Debug" parameter option on startup.</span></span>

<span data-ttu-id="4d7e5-363">После возникновения сбоя скопируйте все выходные данные в консоли PowerShell и отправьте их представителю службы поддержки Майкрософт, который поможет устранить проблему.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-363">After the failure occurs, copy the full output of the PowerShell console, and send it to the Microsoft Support agent who is assisting you to help troubleshoot the problem.</span></span>

### <a name="how-do-i-run-the-script-in-custom-configuration-mode"></a><span data-ttu-id="4d7e5-364">Запуск скрипта в режиме настраиваемой конфигурации</span><span class="sxs-lookup"><span data-stu-id="4d7e5-364">How do I run the script in custom configuration mode?</span></span>

<span data-ttu-id="4d7e5-365">Если выбрать **настраиваемую** конфигурацию, можно включить несколько трассировок в параллельном режиме (используйте клавишу SHIFT для множественного выбора).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-365">By selecting the **Custom** configuration, you can enable several traces in parallel (use Shift to multi-select):</span></span>

![выбор сценариев](media/how-to-use-perfInsights/select-scenario.png)

<span data-ttu-id="4d7e5-367">При выборе диагностики производительности, трассировки счетчиков производительности, трассировки XPerf, сетевой трассировки или сценариев трассировки Storport следуйте инструкциям в диалоговых окнах и попробуйте воспроизвести проблему снижения производительности после начала трассировки.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-367">When you select the Performance Diagnostics, Performance Counter Trace, XPerf Trace, Network Trace, or Storport Trace scenarios, follow the instructions in the dialog boxes, and try to reproduce the slow performance issue after you start the traces.</span></span>

<span data-ttu-id="4d7e5-368">Следующее диалоговое окно позволяет запустить трассировку.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-368">The following dialog box lets you start a trace:</span></span>

![запуск трассировки](media/how-to-use-perfInsights/start-trace-message.png)

<span data-ttu-id="4d7e5-370">Чтобы остановить трассировку, необходимо подтвердить выполнение команды во втором диалоговом окне.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-370">To stop the traces, you have to confirm the command in a second dialog box.</span></span>

<span data-ttu-id="4d7e5-371">![stop-trace](media/how-to-use-perfInsights/stop-trace-message.png)
![stop-trace](media/how-to-use-perfInsights/ok-trace-message.png)</span><span class="sxs-lookup"><span data-stu-id="4d7e5-371">![stop-trace](media/how-to-use-perfInsights/stop-trace-message.png)
![stop-trace](media/how-to-use-perfInsights/ok-trace-message.png)</span></span>

<span data-ttu-id="4d7e5-372">После завершения трассировок или операций создается новый файл в папке D:\\log\_collection (или на временном диске) с именем **CollectedData\_ГГГГ-ММ-ДД\_ЧЧ\_ММ\_ss.zip.**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-372">When the traces or operations are completed, a new file is generated in D:\\log\_collection (or the temporary drive) that is named **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip.**</span></span> <span data-ttu-id="4d7e5-373">Этот файл можно отправить представителю службы поддержки для анализа.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-373">You can send this file to the Support agent for analysis.</span></span>

## <a name="review-the-diagnostics-report-created-by-perfinsights"></a><span data-ttu-id="4d7e5-374">Просмотр отчета PerfInsights о диагностике</span><span class="sxs-lookup"><span data-stu-id="4d7e5-374">Review the diagnostics report created by PerfInsights</span></span>

<span data-ttu-id="4d7e5-375">В созданном PerfInsights файле **CollectedData\_ГГГГ-ММ-ДД\_ЧЧ\_ММ\_ss.zip** находится отчет в формате HTML с подробными сведениями о результате проверки PerfInsights.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-375">Within the **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip file,** that is generated by PerfInsights, you can find an HTML report that details the findings of PerfInsights.</span></span> <span data-ttu-id="4d7e5-376">Чтобы просмотреть отчет, разверните файл **CollectedData\_ГГГГ-ММ-ДД\_ЧЧ\_ММ\_ss.zip**, а затем откройте файл **PerfInsights Report.html**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-376">To review the report, expand the **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip** file, and then open the **PerfInsights Report.html** file.</span></span>

<span data-ttu-id="4d7e5-377">Выберите вкладку **Результаты**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-377">Select the **Findings** tab.</span></span>

![вкладка "Результаты"](media/how-to-use-perfInsights/findingtab.png)

<span data-ttu-id="4d7e5-379">**Примечания**</span><span class="sxs-lookup"><span data-stu-id="4d7e5-379">**Notes**</span></span>

-   <span data-ttu-id="4d7e5-380">Сообщения, выделенные красным, представляют известные проблемы конфигурации, которые могут вызвать снижение производительности.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-380">Messages in red are known configuration issues that may cause performance issues.</span></span>

-   <span data-ttu-id="4d7e5-381">Сообщения, выделенные желтым цветом, обозначают предупреждения о том, что конфигурации не являются оптимальными, но необязательно вызывают проблемы с производительностью.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-381">Messages in yellow are warnings that represent non-optimal configurations that do not necessarily cause performance issues.</span></span>

-   <span data-ttu-id="4d7e5-382">Сообщения, выделенные синим цветом, — это просто информативные инструкции.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-382">Messages in blue are informative statements only.</span></span>

<span data-ttu-id="4d7e5-383">Перейдите по HTTP-ссылкам всех сообщений об ошибках, выделенных красным цветом, чтобы получить более подробные сведения о найденных проблемах и их влиянии на производительность или рекомендации по оптимизации конфигурации для лучшей производительности.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-383">Review the HTTP links for all error messages in red to get more detailed information about the findings and how they can affect the performance or best practices for performance-optimized configurations.</span></span>

### <a name="disk-configuration-tab"></a><span data-ttu-id="4d7e5-384">Вкладка конфигурации дисков</span><span class="sxs-lookup"><span data-stu-id="4d7e5-384">Disk Configuration Tab</span></span>

<span data-ttu-id="4d7e5-385">В разделе **Обзор** отображаются различные представления конфигурации хранилища, включая сведения о служебной программе Diskpart и дисковых пространствах.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-385">The **Overview** section displays different views of the storage configuration, including information from Diskpart and Storage Spaces</span></span>

<span data-ttu-id="4d7e5-386">В разделах **DiskMap** и **VolumeMap** описаны два варианта связи между логическими томами и физическими дисками.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-386">The **DiskMap** and **VolumeMap** sections describe on a dual perspective how logical volumes and physical disks are related to each other.</span></span>

<span data-ttu-id="4d7e5-387">В перспективе физического диска (DiskMap) в таблице показаны все логические тома, которые размещены на диске.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-387">In the PhysicalDisk perspective (DiskMap), the table shows all logical volumes that are running on the disk.</span></span> <span data-ttu-id="4d7e5-388">В следующем примере на PhysicalDrive2 размещены 2 логических тома, созданные на нескольких разделах (J и H):</span><span class="sxs-lookup"><span data-stu-id="4d7e5-388">In the following example, PhysicalDrive2 runs 2 Logical Volumes created on multiple partitions (J and H):</span></span>

![вкладка с данными](media/how-to-use-perfInsights/disktab.png)

<span data-ttu-id="4d7e5-390">В перспективе тома (*VolumeMap*) в таблицах показаны все физические диски в каждом логическом томе.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-390">In the Volume perspective (*VolumeMap*), the tables show all the physical disks under each logical volume.</span></span> <span data-ttu-id="4d7e5-391">Обратите внимание, что для RAID-массивов и динамических дисков можно разместить логический том на нескольких физических дисках.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-391">Notice that for RAID/Dynamic disks, you might run a logical volume upon multiple physical disks.</span></span> <span data-ttu-id="4d7e5-392">В следующем примере *C:\\mount* является точкой подключения, которая настроена в качестве *SpannedDisk* на физических дисках \#2 и \#3.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-392">In the following sample *C:\\mount* is a mountpoint configured as *SpannedDisk* on PhysicalDisks \#2 and \#3:</span></span>

![вкладка томов](media/how-to-use-perfInsights/volumetab.png)

### <a name="sql-server-tab"></a><span data-ttu-id="4d7e5-394">вкладка SQL Server</span><span class="sxs-lookup"><span data-stu-id="4d7e5-394">SQL Server tab</span></span>

<span data-ttu-id="4d7e5-395">Если на целевой виртуальной машине размещаются экземпляры SQL Server, в отчете будет дополнительная вкладка, которая называется **SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-395">If the target VM hosts any SQL Server instances, you will see an additional tab in the report that is named **SQL Server**:</span></span>

![вкладка SQL](media/how-to-use-perfInsights/sqltab.png)

<span data-ttu-id="4d7e5-397">Этот раздел содержит вкладку "Обзор" и дополнительные вкладки для каждого экземпляра SQL Server, размещенного на виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-397">This section contains an "Overview" and additional sub tabs for each of the SQL Server instances hosted on the VM.</span></span>

<span data-ttu-id="4d7e5-398">В разделе "Обзор" содержится полезная таблица, представляющая все работающие физические диски (системные и диски данных), которые содержат сочетание файлов данных и файлов журнала транзакций.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-398">The "Overview" section contains a helpful table that summarizes all the physical disks (system and data disks) that are running and that contain a mixture of data files and transaction log files.</span></span>

<span data-ttu-id="4d7e5-399">В следующем примере отображается *PhysicalDrive0* (на диске C), так как файлы *modeldev* и *modellog* находятся на диске C и относятся к различным типам (файл данных и журнал транзакций, соответственно).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-399">In the following example, *PhysicalDrive0* (running the C drive) is displayed because both the *modeldev* and *modellog* files are located on the C drive, and they are of different types (such as Data File and Transaction Log, respectively):</span></span>

![сведения журнала](media/how-to-use-perfInsights/loginfo.png)

<span data-ttu-id="4d7e5-401">На вкладках каждого экземпляра SQL Server содержится общий раздел, в котором отображаются основные сведения о выбранном экземпляре и разделы с дополнительными сведениями, включая параметры, конфигурации и параметры пользователя.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-401">The SQL Server instance-specific tabs contain a general section that displays basic information about the selected instance and additional sections for advanced information, including Settings, Configurations, and User Options.</span></span>

## <a name="references-to-the-external-tools-used"></a><span data-ttu-id="4d7e5-402">Ссылки на внешние используемые средства</span><span class="sxs-lookup"><span data-stu-id="4d7e5-402">References to the external tools used</span></span>

### <a name="diskspd"></a><span data-ttu-id="4d7e5-403">Diskspd</span><span class="sxs-lookup"><span data-stu-id="4d7e5-403">Diskspd</span></span>

<span data-ttu-id="4d7e5-404">DISKSPD — это генератор нагрузки хранилища и средство для проверки производительности групп разработки Windows, Windows Server и инфраструктуры облачного сервера.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-404">DISKSPD is a storage load generator and performance test tool from the Windows and Windows Server and Cloud Server Infrastructure engineering teams.</span></span> <span data-ttu-id="4d7e5-405">Дополнительные сведения можно найти по [этой ссылке](https://github.com/Microsoft/diskspd).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-405">For more information, see [Diskspd](https://github.com/Microsoft/diskspd).</span></span>

### <a name="xperf"></a><span data-ttu-id="4d7e5-406">XPerf</span><span class="sxs-lookup"><span data-stu-id="4d7e5-406">XPerf</span></span>

<span data-ttu-id="4d7e5-407">XPerf является средством командной строки для записи сведений трассировок из набора средств оценки производительности Windows.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-407">Xperf is a command-line tool to capture traces from the Windows Performance Tools Kit.</span></span>

<span data-ttu-id="4d7e5-408">Дополнительные сведения см. в записи блога [Windows Performance Toolkit - Xperf](https://blogs.msdn.microsoft.com/ntdebugging/2008/04/03/windows-performance-toolkit-xperf/) (Набор средств оценки производительности Windows — XPerf).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-408">For more information, see [Windows Performance Toolkit – Xperf](https://blogs.msdn.microsoft.com/ntdebugging/2008/04/03/windows-performance-toolkit-xperf/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="4d7e5-409">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="4d7e5-409">Next Steps</span></span>

### <a name="upload-diagnostics-logs-and-reports-to-microsoft-support-for-further-review"></a><span data-ttu-id="4d7e5-410">Отправка журналов диагностики и отчетов в службу поддержки Майкрософт для дальнейшего анализа</span><span class="sxs-lookup"><span data-stu-id="4d7e5-410">Upload diagnostics logs and reports to Microsoft Support for further review</span></span>

<span data-ttu-id="4d7e5-411">При работе со службой поддержки Майкрософт может потребоваться передать выходные данные, созданные PerfInsights, чтобы упростить процесс устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-411">When you work with the Microsoft Support staff, you may be requested to transmit the output that is generated by PerfInsights to assist the troubleshooting process.</span></span>

<span data-ttu-id="4d7e5-412">Представитель службы поддержки создаст рабочую область DTM и вы получите сообщение электронной почты со ссылкой на портал DTM (https://filetransfer.support.microsoft.com/EFTClient/Account/Login.htm), а также идентификатор пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-412">The Support agent will create a DTM workspace for you, and you will receive an email message that includes a link to the [DTM portal (https://filetransfer.support.microsoft.com/EFTClient/Account/Login.htm) and a unique user ID and password.</span></span>

<span data-ttu-id="4d7e5-413">Это сообщение будет отправлено **службой автоматической диагностики CTS** (ctsadiag@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="4d7e5-413">This message will be sent from **CTS Automated Diagnostics Services** (ctsadiag@microsoft.com).</span></span>

![Пример сообщения](media/how-to-use-perfInsights/supportemail.png)

<span data-ttu-id="4d7e5-415">Для обеспечения дополнительной безопасности необходимо изменить пароль при первом использовании.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-415">For additional security, you will be required to change your password on first use.</span></span>

<span data-ttu-id="4d7e5-416">После входа в DTM появится диалоговое окно для отправки файла **CollectedData\_ГГГГ-ММ-ДД\_ЧЧ\_ММ\_ss.zip**, собранного PerfInsights.</span><span class="sxs-lookup"><span data-stu-id="4d7e5-416">After you log in to DTM, you will find a dialog box to upload the **CollectedData\_yyyy-MM-dd\_hh\_mm\_ss.zip** file that was collected by PerfInsights.</span></span>
