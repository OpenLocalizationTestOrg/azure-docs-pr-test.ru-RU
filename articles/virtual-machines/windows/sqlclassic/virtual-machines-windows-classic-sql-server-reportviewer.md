---
title: "Использование ReportViewer для веб-сайта | Документация Майкрософт"
description: "В этом разделе описано, как создать веб-сайт Microsoft Azure с элементом управления ReportViewer Visual Studio, который отображает отчет, хранящийся на виртуальной машине Microsoft Azure."
services: virtual-machines-windows
documentationcenter: na
author: guyinacube
manager: erikre
editor: monicar
tags: azure-service-management
ms.assetid: 78b76318-d9bf-48ef-9d9e-d1b7d8cf3042
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 01/11/2017
ms.author: asaxton
ms.openlocfilehash: e54c3bc484b0b3b81cc495e54c17e8ef448abe91
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="use-reportviewer-in-a-web-site-hosted-in-azure"></a><span data-ttu-id="ead16-103">Использование ReportViewer для веб-сайта, размещенного в Azure</span><span class="sxs-lookup"><span data-stu-id="ead16-103">Use ReportViewer in a Web Site Hosted in Azure</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="ead16-104">В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель диспетчера ресурсов и классическая модель](../../../azure-resource-manager/resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="ead16-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="ead16-105">В этой статье рассматривается использование классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="ead16-105">This article covers using the Classic deployment model.</span></span> <span data-ttu-id="ead16-106">Для большинства новых развертываний Майкрософт рекомендует использовать модель диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ead16-106">Microsoft recommends that most new deployments use the Resource Manager model.</span></span>

<span data-ttu-id="ead16-107">Вы можете создать веб-сайт Microsoft Azure с элементом управления ReportViewer Visual Studio, который отображает отчет, хранящийся на виртуальной машине Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="ead16-107">You can build a Microsoft Azure Web site with the Visual Studio ReportViewer control that displays a report stored on an Microsoft Azure Virtual Machine.</span></span> <span data-ttu-id="ead16-108">Элемент управления ReportViewer представляет собой веб-приложение, создаваемое с помощью шаблона веб-приложения ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="ead16-108">The ReportViewer control is in a Web application that you build using the ASP.NET Web application template.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ead16-109">Шаблоны веб-приложений MVC ASP.NET не поддерживают элемент управления ReportViewer.</span><span class="sxs-lookup"><span data-stu-id="ead16-109">The ASP.NET MVC Web Application templates do not support the ReportViewer control.</span></span>

<span data-ttu-id="ead16-110">Чтобы включить элемент управления ReportViewer в свой веб-сайт Microsoft Azure, необходимо выполнить следующие задачи.</span><span class="sxs-lookup"><span data-stu-id="ead16-110">To incorporate ReportViewer into your Microsoft Azure Web site, you need to complete the following tasks.</span></span>

* <span data-ttu-id="ead16-111">**Добавить** сборки в пакет развертывания</span><span class="sxs-lookup"><span data-stu-id="ead16-111">**Add** Assemblies to the Deployment Package</span></span>
* <span data-ttu-id="ead16-112">**Настроить** проверку подлинности и авторизацию</span><span class="sxs-lookup"><span data-stu-id="ead16-112">**Configure** Authentication and Authorization</span></span>
* <span data-ttu-id="ead16-113">**Опубликовать** веб-приложение ASP.NET в Azure</span><span class="sxs-lookup"><span data-stu-id="ead16-113">**Publish** the ASP.NET Web application to Azure</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ead16-114">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="ead16-114">Prerequisites</span></span>
<span data-ttu-id="ead16-115">Просмотрите раздел "Общие советы и рекомендации" статьи [Бизнес-аналитика SQL Server на виртуальных машинах Azure](../classic/ps-sql-bi.md).</span><span class="sxs-lookup"><span data-stu-id="ead16-115">Review the “General recommendation and best practices” section in [SQL Server Business Intelligence in Azure Virtual Machines](../classic/ps-sql-bi.md).</span></span>

> [!NOTE]
> <span data-ttu-id="ead16-116">Элементы управления ReportViewer входят в состав Visual Studio Standard Edition или выше.</span><span class="sxs-lookup"><span data-stu-id="ead16-116">ReportViewer controls are shipped with Visual Studio, Standard Edition or above.</span></span> <span data-ttu-id="ead16-117">Если используется Web Developer Express Edition, необходимо установить [MICROSOFT REPORT VIEWER 2012 RUNTIME](https://www.microsoft.com/download/details.aspx?id=35747) , чтобы воспользоваться функциями среды выполнения ReportViewer.</span><span class="sxs-lookup"><span data-stu-id="ead16-117">If you are using the Web Developer Express Edition, you must install the [MICROSOFT REPORT VIEWER 2012 RUNTIME](https://www.microsoft.com/download/details.aspx?id=35747) to use the ReportViewer runtime features.</span></span>
> 
> <span data-ttu-id="ead16-118">ReportViewer в режиме локальной обработки не поддерживается в Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="ead16-118">ReportViewer configured in local processing mode is not supported in Microsoft Azure.</span></span>

## <a name="adding-assemblies-to-the-deployment-package"></a><span data-ttu-id="ead16-119">Добавление сборок в пакет развертывания</span><span class="sxs-lookup"><span data-stu-id="ead16-119">Adding Assemblies to the Deployment Package</span></span>
<span data-ttu-id="ead16-120">Когда приложение ASP.NET размещено локально, сборки ReportViewer обычно устанавливаются непосредственно в глобальный кэш сборок (GAC) сервера IIS во время установки Visual Studio и приложение может обращаться к этим сборкам напрямую.</span><span class="sxs-lookup"><span data-stu-id="ead16-120">When you host your ASP.NET application on-premises, the ReportViewer assemblies are usually installed directly in the global assembly cache (GAC) of the IIS server during Visual Studio installation, and can be accessed directly by the application.</span></span> <span data-ttu-id="ead16-121">Однако при размещении приложения ASP.NET в облаке Microsoft Azure не позволяет устанавливать что-либо в глобальный кэш сборок, поэтому необходимо убедиться в том, что сборки ReportViewer доступны для приложения локально.</span><span class="sxs-lookup"><span data-stu-id="ead16-121">However, when you host your ASP.NET application in the cloud, Microsoft Azure does not allow anything to be installed into the GAC, so you must make sure the ReportViewer assemblies are available locally for your application.</span></span> <span data-ttu-id="ead16-122">Для этого можно добавить ссылки на них в свой проект и настроить их для копирования локально.</span><span class="sxs-lookup"><span data-stu-id="ead16-122">You can do this by adding references to them in your project and configure them to be copied locally.</span></span>

<span data-ttu-id="ead16-123">В режиме удаленной обработки элемент управления ReportViewer использует следующие сборки.</span><span class="sxs-lookup"><span data-stu-id="ead16-123">In remote processing mode, the ReportViewer control uses the following assemblies:</span></span>

* <span data-ttu-id="ead16-124">**Microsoft.ReportViewer.WebForms.dll**: содержит код ReportViewer, который необходим для использования ReportViewer на вашей странице.</span><span class="sxs-lookup"><span data-stu-id="ead16-124">**Microsoft.ReportViewer.WebForms.dll**: Contains the ReportViewer code, which you need to use ReportViewer in your page.</span></span> <span data-ttu-id="ead16-125">Ссылка на эту сборку добавляется в проект, когда вы помещаете элемент управления ReportViewer на страницу ASP.NET проекта.</span><span class="sxs-lookup"><span data-stu-id="ead16-125">A reference for this assembly is added to your project when you drop a ReportViewer control onto an ASP.NET page in your project.</span></span>
* <span data-ttu-id="ead16-126">**Microsoft.ReportViewer.Common.dll**: содержит классы, используемые элементом управления ReportViewer во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="ead16-126">**Microsoft.ReportViewer.Common.dll**: Contains classes used by the ReportViewer control at run time.</span></span> <span data-ttu-id="ead16-127">Она не добавляется в проект автоматически.</span><span class="sxs-lookup"><span data-stu-id="ead16-127">It is not automatically added to your project.</span></span>

### <a name="to-add-a-reference-to-microsoftreportviewercommon"></a><span data-ttu-id="ead16-128">Добавление ссылки на сборку Microsoft.ReportViewer.Common</span><span class="sxs-lookup"><span data-stu-id="ead16-128">To add a reference to Microsoft.ReportViewer.Common</span></span>
* <span data-ttu-id="ead16-129">Щелкните узел **Ссылки** вашего проекта правой кнопкой мыши, выберите **Добавить ссылку**, выберите сборку на вкладке .NET и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="ead16-129">Right-click your project’s **References** node and select **Add Reference**, select the assembly in the .NET tab, and click **OK**.</span></span>

### <a name="to-make-the-assemblies-locally-accessible-by-your-aspnet-application"></a><span data-ttu-id="ead16-130">Включение локальной доступности сборок для приложения ASP.NET</span><span class="sxs-lookup"><span data-stu-id="ead16-130">To make the assemblies locally accessible by your ASP.NET application</span></span>
1. <span data-ttu-id="ead16-131">В папке **Ссылки** выберите сборку Microsoft.ReportViewer.Common, чтобы ее свойства появились на панели "Свойства".</span><span class="sxs-lookup"><span data-stu-id="ead16-131">In the **References** folder, click the Microsoft.ReportViewer.Common assembly so that its properties appear in the Properties pane.</span></span>
2. <span data-ttu-id="ead16-132">На панели "Свойства" задайте для свойства **Копировать локально** значение True.</span><span class="sxs-lookup"><span data-stu-id="ead16-132">In the Properties pane, set **Copy Local** to True.</span></span>
3. <span data-ttu-id="ead16-133">Повторите шаги 1 и 2 для сборки Microsoft.ReportViewer.WebForms.</span><span class="sxs-lookup"><span data-stu-id="ead16-133">Repeat steps 1 and 2 for Microsoft.ReportViewer.WebForms.</span></span>

### <a name="to-get-reportviewer-language-pack"></a><span data-ttu-id="ead16-134">Получение языкового пакета ReportViewer</span><span class="sxs-lookup"><span data-stu-id="ead16-134">To get ReportViewer Language Pack</span></span>
1. <span data-ttu-id="ead16-135">Установите соответствующий распространяемый пакет Microsoft Report Viewer 2012 Runtime из [Центра загрузки Майкрософт](http://go.microsoft.com/fwlink/?LinkId=317386).</span><span class="sxs-lookup"><span data-stu-id="ead16-135">Install the appropriate Microsoft Report Viewer 2012 Runtime redistributable package from [Microsoft Download Center](http://go.microsoft.com/fwlink/?LinkId=317386).</span></span>
2. <span data-ttu-id="ead16-136">Выберите язык из раскрывающегося списка. После этого произойдет переход на соответствующую страницу центра загрузки.</span><span class="sxs-lookup"><span data-stu-id="ead16-136">Select the language from the dropdown list and the page gets redirected to the corresponding download center page.</span></span>
3. <span data-ttu-id="ead16-137">Нажмите **Скачать** , чтобы начать загрузку файла ReportViewerLP.exe.</span><span class="sxs-lookup"><span data-stu-id="ead16-137">Click **Download** to start the download of ReportViewerLP.exe.</span></span>
4. <span data-ttu-id="ead16-138">После загрузки файла ReportViewerLP.exe нажмите кнопку **Запустить**, чтобы немедленно установить пакет, или кнопку **Сохранить**, чтобы сохранить его на компьютере.</span><span class="sxs-lookup"><span data-stu-id="ead16-138">After you download ReportViewerLP.exe, click **Run** to install immediately, or click **Save** to save it to your computer.</span></span> <span data-ttu-id="ead16-139">При выборе кнопки **Сохранить**запомните название каталога, в который сохраняете файл.</span><span class="sxs-lookup"><span data-stu-id="ead16-139">If you click **Save**, remember the name of the folder where you save the file.</span></span>
5. <span data-ttu-id="ead16-140">Перейдите в каталог, в котором был сохранен файл.</span><span class="sxs-lookup"><span data-stu-id="ead16-140">Locate the folder where you saved the file.</span></span> <span data-ttu-id="ead16-141">Щелкните файл ReportViewerLP.exe правой кнопкой мыши, выберите **Запуск от имени администратора**, а затем нажмите кнопку **Да**.</span><span class="sxs-lookup"><span data-stu-id="ead16-141">Right-click ReportViewerLP.exe, click **Run as administrator**, and then click **Yes**.</span></span>
6. <span data-ttu-id="ead16-142">После запуска ReportViewerLP.exe вы увидите, что в папке c:\windows\assembly появились файлы ресурсов **Microsoft.ReportViewer.Webforms.Resources** и **Microsoft.ReportViewer.Common.Resources**.</span><span class="sxs-lookup"><span data-stu-id="ead16-142">After running ReportViewerLP.exe, you will see the c:\windows\assembly has the resource files **Microsoft.ReportViewer.Webforms.Resources** and **Microsoft.ReportViewer.Common.Resources**.</span></span>

### <a name="to-configure-for-localized-reportviewer-control"></a><span data-ttu-id="ead16-143">Настройка локализованного элемента управления ReportViewer</span><span class="sxs-lookup"><span data-stu-id="ead16-143">To configure for localized ReportViewer control</span></span>
1. <span data-ttu-id="ead16-144">Загрузите и установите распространяемый пакет Microsoft Report Viewer 2012 Runtime, следуя приведенным выше инструкциям.</span><span class="sxs-lookup"><span data-stu-id="ead16-144">Download and install the Microsoft Report Viewer 2012 Runtime redistributable package by following the above specified instructions.</span></span>
2. <span data-ttu-id="ead16-145">Создайте каталог <language> в проекте и скопируйте в него файлы сборок соответствующих ресурсов.</span><span class="sxs-lookup"><span data-stu-id="ead16-145">Create <language> folder in the project and copy the associated resource assembly files there.</span></span> <span data-ttu-id="ead16-146">Необходимо скопировать следующие файлы сборок ресурсов: **Microsoft.ReportViewer.Webforms.Resources.dll** и **Microsoft.ReportViewer.Common.Resources.dll**. Выберите файлы сборок ресурсов и в области "Свойства" задайте для параметра **Копировать в выходной каталог** значение **Всегда копировать**.</span><span class="sxs-lookup"><span data-stu-id="ead16-146">The resource assembly files to be copied are: **Microsoft.ReportViewer.Webforms.Resources.dll** and **Microsoft.ReportViewer.Common.Resources.dll**.Select the resource assembly files, and in the Properties pane, set **Copy to Output Directory** to “**Copy always**”.</span></span>
3. <span data-ttu-id="ead16-147">Настройте Culture и UI Culture для веб-проекта.</span><span class="sxs-lookup"><span data-stu-id="ead16-147">Set the Culture & UICulture for the web project.</span></span> <span data-ttu-id="ead16-148">Дополнительные сведения о настройке Culture и UI Culture для веб-страницы ASP.NET см. в статье [Практическое руководство. Установка значений Culture и UICulture для глобализации веб-страниц ASP.NET](http://go.microsoft.com/fwlink/?LinkId=237461).</span><span class="sxs-lookup"><span data-stu-id="ead16-148">For more information about how to set the Culture and UI Culture for an ASP.NET Web page, see [How to: Set the Culture and UI Culture for ASP.NET Web Page Globalization](http://go.microsoft.com/fwlink/?LinkId=237461).</span></span>

## <a name="configuring-authentication-and-authorization"></a><span data-ttu-id="ead16-149">Настройка проверки подлинности и авторизации</span><span class="sxs-lookup"><span data-stu-id="ead16-149">Configuring Authentication and Authorization</span></span>
<span data-ttu-id="ead16-150">В ReportViewer должны использоваться правильные учетные данные для проверки подлинности на сервере отчетов. Для доступа к желаемым отчетам учетные данные должны быть авторизованы сервером отчетов.</span><span class="sxs-lookup"><span data-stu-id="ead16-150">The ReportViewer needs to use proper credentials to authenticate with the report server, and the credentials must be authorized by the report server to access the reports you want.</span></span> <span data-ttu-id="ead16-151">Сведения о проверке подлинности приведены в техническом документе [Элемент управления средства просмотра отчетов Reporting Services и серверы отчетов на основе виртуальной машины Microsoft Azure](https://msdn.microsoft.com/library/azure/dn753698.aspx).</span><span class="sxs-lookup"><span data-stu-id="ead16-151">For information on authentication, see the white paper [Reporting Services report viewer control and Microsoft Azure virtual machine based report servers](https://msdn.microsoft.com/library/azure/dn753698.aspx).</span></span>

## <a name="publish-the-aspnet-web-application-to-azure"></a><span data-ttu-id="ead16-152">Публикация веб-приложения ASP.NET в Azure</span><span class="sxs-lookup"><span data-stu-id="ead16-152">Publish the ASP.NET Web application to Azure</span></span>
<span data-ttu-id="ead16-153">Инструкции по публикации веб-приложения ASP.NET в Azure см. в статьях [Инструкции. Миграция и публикация веб-приложения в облачную службу Azure из среды Visual Studio](../../../vs-azure-tools-migrate-publish-web-app-to-cloud-service.md) и [Начало работы с веб-приложениями и ASP.NET](../../../app-service-web/app-service-web-get-started-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="ead16-153">For instructions on publishing an ASP.NET Web application to Azure, see [How to: Migrate and Publish a Web Application to Azure from Visual Studio](../../../vs-azure-tools-migrate-publish-web-app-to-cloud-service.md) and [Get started with Web Apps and ASP.NET](../../../app-service-web/app-service-web-get-started-dotnet.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ead16-154">Если в контекстном меню в обозревателе решений не появилась команда "Добавить проект развертывания Azure" или "Добавить проект облачной службы Azure", может потребоваться изменить целевую платформу для проекта на .NET Framework 4.</span><span class="sxs-lookup"><span data-stu-id="ead16-154">If the Add Azure Deployment Project or Add Azure Cloud Service Project command does not appear in the shortcut menu in Solution Explorer, you may need to change the Target framework for the project to .NET Framework 4.</span></span>
> 
> <span data-ttu-id="ead16-155">Эти две команды по сути выполняют одну и ту же функцию.</span><span class="sxs-lookup"><span data-stu-id="ead16-155">The two commands provide essentially the same functionality.</span></span> <span data-ttu-id="ead16-156">В контекстном меню появится одна или другая команда в зависимости от того, какая версия Microsoft Azure SDK установлена.</span><span class="sxs-lookup"><span data-stu-id="ead16-156">One or the other command will appear in the shortcut menu depending on which version of the Microsoft Azure SDK you have installed.</span></span>
> 
> 

## <a name="resources"></a><span data-ttu-id="ead16-157">Ресурсы</span><span class="sxs-lookup"><span data-stu-id="ead16-157">Resources</span></span>
[<span data-ttu-id="ead16-158">Отчеты Майкрософт</span><span class="sxs-lookup"><span data-stu-id="ead16-158">Microsoft Reports</span></span>](http://go.microsoft.com/fwlink/?LinkId=205399)

[<span data-ttu-id="ead16-159">SQL Server Business Intelligence на виртуальных машинах Azure</span><span class="sxs-lookup"><span data-stu-id="ead16-159">SQL Server Business Intelligence in Azure Virtual Machines</span></span>](../classic/ps-sql-bi.md)

[<span data-ttu-id="ead16-160">Использование PowerShell для создания виртуальной машины Azure с помощью сервера отчетов, работающего в собственном режиме</span><span class="sxs-lookup"><span data-stu-id="ead16-160">Use PowerShell to Create an Azure VM With a Native Mode Report Server</span></span>](../classic/ps-sql-report.md)

