---
title: "aaaCreate головной узел пакета HPC на виртуальной Машине Azure | Документы Microsoft"
description: "Узнайте, как toouse hello Azure развертывания диспетчера ресурсов портала и hello модели toocreate Microsoft HPC Pack 2012 R2 головного узла на Виртуальной машине Azure."
services: virtual-machines-windows
documentationcenter: 
author: dlepow
manager: timlt
editor: 
tags: azure-resource-manager,hpc-pack
ms.assetid: e6a13eaf-9124-47b4-8d75-2bc4672b8f21
ms.service: virtual-machines-windows
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 12/29/2016
ms.author: danlep
ms.openlocfilehash: 3ddefb74b053a48a15f1ba1ca8edbc0192da51a8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-hello-head-node-of-an-hpc-pack-cluster-in-an-azure-vm-with-a-marketplace-image"></a><span data-ttu-id="bacf8-103">Создание hello головного узла кластера HPC Pack на ВМ Azure с помощью образа Marketplace</span><span class="sxs-lookup"><span data-stu-id="bacf8-103">Create hello head node of an HPC Pack cluster in an Azure VM with a Marketplace image</span></span>
<span data-ttu-id="bacf8-104">Используйте [образ виртуальной машины Microsoft HPC Pack 2012 R2](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/) из hello Azure Marketplace и hello Azure портала toocreate hello головного узла кластера HPC.</span><span class="sxs-lookup"><span data-stu-id="bacf8-104">Use a [Microsoft HPC Pack 2012 R2 virtual machine image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/) from hello Azure Marketplace and hello Azure portal toocreate hello head node of an HPC cluster.</span></span> <span data-ttu-id="bacf8-105">Этот образ виртуальной машины пакета HPC основан на ОС Windows Server 2012 R2 Datacenter с предустановленным пакетом HPC 2012 R2 с обновлением 3.</span><span class="sxs-lookup"><span data-stu-id="bacf8-105">This HPC Pack VM image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 pre-installed.</span></span> <span data-ttu-id="bacf8-106">Используйте этот головной узел для экспериментального развертывания пакета HPC в Azure.</span><span class="sxs-lookup"><span data-stu-id="bacf8-106">Use this head node for a proof of concept deployment of HPC Pack in Azure.</span></span> <span data-ttu-id="bacf8-107">Затем можно добавить вычислительных узлов toohello кластера toorun HPC рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="bacf8-107">You can then add compute nodes toohello cluster toorun HPC workloads.</span></span>

> [!TIP]
> <span data-ttu-id="bacf8-108">toodeploy завершения кластера HPC Pack 2012 R2 в Azure, которая включает в себя hello головного узла и вычислительных узлов, рекомендуется использовать автоматизированную процедуру.</span><span class="sxs-lookup"><span data-stu-id="bacf8-108">toodeploy a complete HPC Pack 2012 R2 cluster in Azure that includes hello head node and compute nodes, we recommend that you use an automated method.</span></span> <span data-ttu-id="bacf8-109">Параметры включают в себя hello [скрипт развертывания IaaS пакета HPC](classic/hpcpack-cluster-powershell-script.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json) и шаблоны диспетчера ресурсов, таких как hello [кластера HPC Pack для рабочих нагрузок Windows](https://azure.microsoft.com/marketplace/partners/microsofthpc/newclusterwindowscn/).</span><span class="sxs-lookup"><span data-stu-id="bacf8-109">Options include hello [HPC Pack IaaS deployment script](classic/hpcpack-cluster-powershell-script.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json) and Resource Manager templates such as hello [HPC Pack cluster for Windows workloads](https://azure.microsoft.com/marketplace/partners/microsofthpc/newclusterwindowscn/).</span></span> <span data-ttu-id="bacf8-110">Шаблоны Resource Manager также доступны для [кластеров пакета Microsoft HPC 2016](https://github.com/MsHpcPack/HPCPack2016/tree/master/newcluster-templates).</span><span class="sxs-lookup"><span data-stu-id="bacf8-110">Resource Manager templates are also available for [Microsoft HPC Pack 2016 clusters](https://github.com/MsHpcPack/HPCPack2016/tree/master/newcluster-templates).</span></span> 
> 
> 

## <a name="planning-considerations"></a><span data-ttu-id="bacf8-111">Рекомендации относительно планирования</span><span class="sxs-lookup"><span data-stu-id="bacf8-111">Planning considerations</span></span>
<span data-ttu-id="bacf8-112">Как показано в следующий рисунок hello развертывании головного узла HPC Pack hello в домене Active Directory в виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="bacf8-112">As shown in hello following figure, you deploy hello HPC Pack head node in an Active Directory domain in an Azure virtual network.</span></span>

![Головной узел пакета HPC][headnode]

* <span data-ttu-id="bacf8-114">**Домен Active Directory**: hello HPC Pack 2012 R2 головной узел должен быть присоединен tooan домена Active Directory в Azure перед запуском служб HPC hello на hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="bacf8-114">**Active Directory domain**: hello HPC Pack 2012 R2 head node must be joined tooan Active Directory domain in Azure before you start hello HPC services on hello VM.</span></span> <span data-ttu-id="bacf8-115">Как показано в этой статье для экспериментального развертывания, вы можете повысить уровень hello виртуальной Машине, созданной для головного узла hello как контроллер домена перед запуском служб HPC hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-115">As shown in this article, for a proof of concept deployment, you can promote hello VM you create for hello head node as a domain controller before starting hello HPC services.</span></span> <span data-ttu-id="bacf8-116">Другой вариант — toodeploy контроллера домена в отдельном и леса в Azure toowhich объединении hello ВМ головного узла.</span><span class="sxs-lookup"><span data-stu-id="bacf8-116">Another option is toodeploy a separate domain controller and forest in Azure toowhich you join hello head node VM.</span></span>

* <span data-ttu-id="bacf8-117">**Модель развертывания**: в большинстве случаев новый, корпорация Майкрософт рекомендует использовать модель развертывания диспетчера ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-117">**Deployment model**: For most new deployments, Microsoft recommends that you use hello Resource Manager deployment model.</span></span> <span data-ttu-id="bacf8-118">В этой статье предполагается, что вы используете эту модель развертывания.</span><span class="sxs-lookup"><span data-stu-id="bacf8-118">This article assumes that you use this deployment model.</span></span>

* <span data-ttu-id="bacf8-119">**Виртуальная сеть Azure**: при использовании hello диспетчера ресурсов развертывания модели toodeploy hello головного узла, укажите, или создайте виртуальную сеть Azure.</span><span class="sxs-lookup"><span data-stu-id="bacf8-119">**Azure virtual network**: When you use hello Resource Manager deployment model toodeploy hello head node, you specify or create an Azure virtual network.</span></span> <span data-ttu-id="bacf8-120">При необходимости toojoin hello головного узла tooan существующему домену Active Directory использовать hello виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="bacf8-120">You use hello virtual network if you need toojoin hello head node tooan existing Active Directory domain.</span></span> <span data-ttu-id="bacf8-121">Необходимо также его более поздней версии tooadd вычислительных узлов кластера toohello виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="bacf8-121">You also need it later tooadd compute node VMs toohello cluster.</span></span>

## <a name="steps-toocreate-hello-head-node"></a><span data-ttu-id="bacf8-122">Действия toocreate hello головного узла</span><span class="sxs-lookup"><span data-stu-id="bacf8-122">Steps toocreate hello head node</span></span>
<span data-ttu-id="bacf8-123">Ниже перечислены высокоуровневые действия toouse hello Azure портала toocreate ВМ для головного узла HPC Pack hello Azure с помощью модели развертывания диспетчера ресурсов hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-123">Following are high-level steps toouse hello Azure portal toocreate an Azure VM for hello HPC Pack head node by using hello Resource Manager deployment model.</span></span> 

1. <span data-ttu-id="bacf8-124">Если вы хотите toocreate нового леса Active Directory в Azure с контроллером домена отдельных виртуальных машин, один из вариантов — toouse [шаблона диспетчера ресурсов](https://github.com/Azure/azure-quickstart-templates/tree/master/active-directory-new-domain-ha-2-dc).</span><span class="sxs-lookup"><span data-stu-id="bacf8-124">If you want toocreate a new Active Directory forest in Azure with separate domain controller VMs, one option is toouse a [Resource Manager template](https://github.com/Azure/azure-quickstart-templates/tree/master/active-directory-new-domain-ha-2-dc).</span></span> <span data-ttu-id="bacf8-125">Для простого экспериментального развертывания он имеет точный tooomit этот шаг и настройка головного узла hello самой ВМ как контроллер домена.</span><span class="sxs-lookup"><span data-stu-id="bacf8-125">For a simple proof of concept deployment, it's fine tooomit this step and configure hello head node VM itself as a domain controller.</span></span> <span data-ttu-id="bacf8-126">Этот вариант описан далее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="bacf8-126">This option is described later in this article.</span></span>
2. <span data-ttu-id="bacf8-127">На hello [HPC Pack 2012 R2 на Windows Server 2012 R2 странице](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/) hello Azure Marketplace, щелкните **создания виртуальной машины**.</span><span class="sxs-lookup"><span data-stu-id="bacf8-127">On hello [HPC Pack 2012 R2 on Windows Server 2012 R2 page](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/) in hello Azure Marketplace, click **Create Virtual Machine**.</span></span> 
3. <span data-ttu-id="bacf8-128">На hello hello портала **HPC Pack 2012 R2 на Windows Server 2012 R2** страницу, выберите hello **диспетчера ресурсов** модель развертывания, а затем нажмите кнопку **создать**.</span><span class="sxs-lookup"><span data-stu-id="bacf8-128">In hello portal, on hello **HPC Pack 2012 R2 on Windows Server 2012 R2** page, select hello **Resource Manager** deployment model and then click **Create**.</span></span>
   
    ![Образ пакета HPC][marketplace]
4. <span data-ttu-id="bacf8-130">Используйте параметры hello портала tooconfigure hello и создайте hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="bacf8-130">Use hello portal tooconfigure hello settings and create hello VM.</span></span> <span data-ttu-id="bacf8-131">Если вы tooAzure новый, выполните действия из учебника hello [Создание виртуальной машины Windows в hello портал Azure](../virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="bacf8-131">If you're new tooAzure, follow hello tutorial [Create a Windows virtual machine in hello Azure portal](../virtual-machines-windows-hero-tutorial.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json).</span></span> <span data-ttu-id="bacf8-132">Для экспериментального развертывания можно обычно примите значение по умолчанию hello или рекомендуемые параметры.</span><span class="sxs-lookup"><span data-stu-id="bacf8-132">For a proof of concept deployment, you can usually accept hello default or recommended settings.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="bacf8-133">Если вы хотите toojoin hello головного узла tooan существующего домена Active Directory в Azure, убедитесь, что при создании виртуальной Машины hello указывается hello виртуальной сети для этого домена.</span><span class="sxs-lookup"><span data-stu-id="bacf8-133">If you want toojoin hello head node tooan existing Active Directory domain in Azure, make sure you specify hello virtual network for that domain when creating hello VM.</span></span>
   > 
   > 
5. <span data-ttu-id="bacf8-134">После создания виртуальной Машины hello и hello Виртуальная машина запущена, [подключения toohello ВМ](connect-logon.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) с удаленного рабочего стола.</span><span class="sxs-lookup"><span data-stu-id="bacf8-134">After you create hello VM and hello VM is running, [connect toohello VM](connect-logon.md?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) by Remote Desktop.</span></span> 
6. <span data-ttu-id="bacf8-135">Присоединение леса домена Active Directory tooan ВМ hello, выбрав один из следующих вариантов hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-135">Join hello VM tooan Active Directory domain forest by choosing one of hello following options:</span></span>
   
   * <span data-ttu-id="bacf8-136">Если вы создали hello виртуальной Машины в виртуальной сети Azure с существующим лесом домена, присоедините леса toohello hello виртуальной Машины, используя стандартные средства диспетчера серверов или Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="bacf8-136">If you created hello VM in an Azure virtual network with an existing domain forest, join hello VM toohello forest by using standard Server Manager or Windows PowerShell tools.</span></span> <span data-ttu-id="bacf8-137">Выполните перезапуск.</span><span class="sxs-lookup"><span data-stu-id="bacf8-137">Then restart.</span></span>
   * <span data-ttu-id="bacf8-138">Если вы создали hello виртуальной Машины в новой виртуальной сети (без леса домена), затем преобразовывается hello виртуальной Машины контроллера домена.</span><span class="sxs-lookup"><span data-stu-id="bacf8-138">If you created hello VM in a new virtual network (without an existing domain forest), then promote hello VM as a domain controller.</span></span> <span data-ttu-id="bacf8-139">Используйте стандартные действия tooinstall и Настройка роли доменных служб Active Directory hello на головном узле hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-139">Use standard steps tooinstall and configure hello Active Directory Domain Services role on hello head node.</span></span> <span data-ttu-id="bacf8-140">Подробные инструкции см. в разделе [Установка нового леса Active Directory в Windows Server 2012](https://technet.microsoft.com/library/jj574166.aspx).</span><span class="sxs-lookup"><span data-stu-id="bacf8-140">For detailed steps, see [Install a New Windows Server 2012 Active Directory Forest](https://technet.microsoft.com/library/jj574166.aspx).</span></span>
7. <span data-ttu-id="bacf8-141">После hello виртуальная машина запускается и не присоединены к домену tooan леса Active Directory запустите службы HPC Pack hello следующим образом:</span><span class="sxs-lookup"><span data-stu-id="bacf8-141">After hello VM is running and is joined tooan Active Directory forest, start hello HPC Pack services as follows:</span></span>
   
    <span data-ttu-id="bacf8-142">а.</span><span class="sxs-lookup"><span data-stu-id="bacf8-142">a.</span></span> <span data-ttu-id="bacf8-143">Подключение toohello головного узла виртуальной Машины, используя учетную запись домена, которая является членом локальной группы администраторов hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-143">Connect toohello head node VM using a domain account that is a member of hello local Administrators group.</span></span> <span data-ttu-id="bacf8-144">Например используйте учетную запись администратора hello, настроенной при создании ВМ головного узла hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-144">For example, use hello administrator account you set up when you created hello head node VM.</span></span>
   
    <span data-ttu-id="bacf8-145">b.</span><span class="sxs-lookup"><span data-stu-id="bacf8-145">b.</span></span> <span data-ttu-id="bacf8-146">Для настройки головного узла по умолчанию запустите Windows PowerShell с правами администратора и введите hello ниже:</span><span class="sxs-lookup"><span data-stu-id="bacf8-146">For a default head node configuration, start Windows PowerShell as an administrator and type hello following:</span></span>
   
    ```PowerShell
    & $env:CCP_HOME\bin\HPCHNPrepare.ps1 –DBServerInstance ".\ComputeCluster"
    ```
   
    <span data-ttu-id="bacf8-147">Он может занять несколько минут для toostart служб HPC Pack hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-147">It can take several minutes for hello HPC Pack services toostart.</span></span>
   
    <span data-ttu-id="bacf8-148">Для вывода сведений о дополнительных параметрах конфигурации головного узла введите `get-help HPCHNPrepare.ps1`.</span><span class="sxs-lookup"><span data-stu-id="bacf8-148">For additional head node configuration options, type `get-help HPCHNPrepare.ps1`.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bacf8-149">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="bacf8-149">Next steps</span></span>
* <span data-ttu-id="bacf8-150">Теперь можно работать с головным узлом кластера HPC Pack hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-150">You can now work with hello head node of your HPC Pack cluster.</span></span> <span data-ttu-id="bacf8-151">Например, запустите диспетчер кластеров HPC, а полный hello [списку задач развертывания](https://technet.microsoft.com/library/jj884141.aspx).</span><span class="sxs-lookup"><span data-stu-id="bacf8-151">For example, start HPC Cluster Manager, and complete hello [Deployment To-do List](https://technet.microsoft.com/library/jj884141.aspx).</span></span>
* <span data-ttu-id="bacf8-152">Tooincrease hello кластера вычислений емкости по требованию, добавить [узлы повышения Azure](classic/hpcpack-cluster-node-burst.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json) в облачной службе.</span><span class="sxs-lookup"><span data-stu-id="bacf8-152">If you want tooincrease hello cluster compute capacity on-demand, add [Azure burst nodes](classic/hpcpack-cluster-node-burst.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json) in a cloud service.</span></span> 
* <span data-ttu-id="bacf8-153">Запустите тестовую рабочую нагрузку на кластере hello.</span><span class="sxs-lookup"><span data-stu-id="bacf8-153">Try running a test workload on hello cluster.</span></span> <span data-ttu-id="bacf8-154">Пример см. в разделе hello HPC Pack [руководство по началу работы](https://technet.microsoft.com/library/jj884144).</span><span class="sxs-lookup"><span data-stu-id="bacf8-154">For an example, see hello HPC Pack [getting started guide](https://technet.microsoft.com/library/jj884144).</span></span>

<!--Image references-->
[headnode]: ./media/hpcpack-cluster-headnode/headnode.png
[marketplace]: ./media/hpcpack-cluster-headnode/marketplace.png
