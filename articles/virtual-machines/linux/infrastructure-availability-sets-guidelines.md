---
title: "Группы доступности для виртуальных машин Linux в Azure | Документация Майкрософт"
description: "Изучите основные рекомендации по проектированию и реализации, касающиеся развертывания групп доступности в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 24f1d91c-8cc0-4251-bb67-ac4c4c37e8cd
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: c5fad478a8fbbdeef2fe72f0b8f2ebe32852bbc5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="azure-availability-sets-guidelines-for-linux-vms"></a>Рекомендации по группам доступности Azure для виртуальных машин Linux

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

Эта статья посвящена необходимым действиям по планированию группы доступности, позволяющим обеспечить доступность вашего приложения во время плановых или внеплановых событий.

## <a name="implementation-guidelines-for-availability-sets"></a>Рекомендации по реализации групп доступности
Решения

* Сколько нужно групп доступности для различных ролей и уровней в инфраструктуре приложений?

Задачи

* Определите необходимое число виртуальных машин на каждом уровне приложения.
* Определите, нужно ли скорректировать число доменов сбоя или доменов обновления для приложения.
* Определите требуемые группы доступности, учитывая соглашение об именовании и размещаемые в них виртуальные машины. Виртуальная машина может находиться только в одной группе доступности. 

## <a name="availability-sets"></a>Группы доступности
В Azure виртуальные машины могут быть помещены в логическую группу, называемую группой доступности. При создании виртуальных машин в группе доступности платформа Azure распределяет их размещение по базовой инфраструктуре. Использование группы доступности гарантирует, что в случае планового обслуживания платформы Azure либо сбоя базового оборудования или инфраструктуры по крайней мере одна виртуальная машина продолжит работать.

Не рекомендуется размещать приложения на одной виртуальной машине. Группа доступности, которая содержит одну виртуальную машину, не обеспечивает защиту от плановых или внеплановых событий платформы Azure. [Соглашение об уровне обслуживания Azure](https://azure.microsoft.com/support/legal/sla/virtual-machines) предписывает использовать от двух виртуальных машин в группе доступности, чтобы обеспечить распределение виртуальных машин по базовой инфраструктуре. Если вы используете [службу хранилища Azure уровня "Премиум"](../../storage/storage-premium-storage.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), то соглашение об уровне обслуживания Azure распространяется на одну виртуальную машину.

Базовая инфраструктура в Azure делится на несколько аппаратных кластеров. Каждый аппаратный кластер может поддерживать определенный диапазон размеров виртуальных машин. В любой момент времени группа доступности может размещаться только в одном аппаратном кластере. Следовательно, диапазон размеров виртуальных машин, которые могут существовать в отдельной группе доступности, ограничен диапазоном размеров виртуальных машин, поддерживаемых аппаратным кластером. Аппаратный кластер для группы доступности выбирается при развертывании первой виртуальной машины в группе доступности или при запуске первой виртуальной машины в группе доступности, в которой все виртуальные машины в настоящее время остановлены и освобождены. Чтобы определить диапазон размеров виртуальных машин, которые можно применять для группы доступности, можно использовать следующую команду интерфейса командной строки: az vm list-sizes --location \<строка\>.

Каждый аппаратный кластер делится на несколько доменов обновления и доменов сбоя. Эти домены определяются узлами с общим циклом обновления или с общей физической инфраструктурой, например источником питания и сетью. Azure автоматически распределяет виртуальные машины в группе доступности между доменами, чтобы обеспечивать доступность и отказоустойчивость. В зависимости от размера приложения и числа виртуальных машин в группе доступности можно соответственно изменить количество доменов, которые требуется использовать. Вы можете больше узнать об [управлении доступностью и использовании доменов обновления и доменов сбоя](manage-availability.md).

При проектировании инфраструктуры приложений необходимо составить план уровней приложения, которые будут использоваться. Объедините в группы доступности виртуальные машины, которые выполняют одну функцию, например интерфейсные виртуальные машины nginx или Apache. Создайте отдельную группу доступности для интерфейсных виртуальных машин MongoDB или MySQL. Цель этого — обеспечить защиту каждого компонента приложения посредством группы доступности и гарантировать, что как минимум один экземпляр приложения всегда будет работать.

Над каждым уровнем приложения можно использовать балансировщики нагрузки, которые будут функционировать вместе с группой доступности и обеспечивать перенаправление трафика в работающий экземпляр. Без подсистемы балансировки нагрузки виртуальные машины могут продолжать работать на протяжении всех плановых и внеплановых событий обслуживания, но пользователи могут не иметь возможности обращаться к ним, если недоступна основная виртуальная машина.

Обеспечение высокого уровня доступности приложения следует проектировать на уровне хранилища. Рекомендуется [использовать Управляемые диски для виртуальных машин в группе доступности](manage-availability.md#use-managed-disks-for-vms-in-an-availability-set). Если сейчас вы используете неуправляемые диски, мы настоятельно рекомендуем [преобразовать виртуальные машины в группе доступности для использования Управляемых дисков](convert-unmanaged-to-managed-disks.md#convert-vms-in-an-availability-set).

## <a name="next-steps"></a>Дальнейшие действия
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

