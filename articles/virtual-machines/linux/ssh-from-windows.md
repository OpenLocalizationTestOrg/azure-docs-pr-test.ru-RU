---
title: "ключи aaaUse SSH с Windows для виртуальных машин Linux | Документы Microsoft"
description: "Узнайте, как ключи toogenerate и использование SSH на компьютере tooconnect tooa Linux виртуальной машине в Azure."
services: virtual-machines-linux
documentationcenter: 
author: dlepow
manager: timlt
editor: 
tags: azure-service-management,azure-resource-manager
ms.assetid: 2cacda3b-7949-4036-bd5d-837e8b09a9c8
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 03/08/2017
ms.author: danlep
ms.openlocfilehash: 6c44217332538857cc2ca2e85de4b476aa71251c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-toouse-ssh-keys-with-windows-on-azure"></a><span data-ttu-id="3d6c4-103">Как tooUse SSH ключей с Windows в Azure</span><span class="sxs-lookup"><span data-stu-id="3d6c4-103">How tooUse SSH keys with Windows on Azure</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="3d6c4-104">Windows</span><span class="sxs-lookup"><span data-stu-id="3d6c4-104">Windows</span></span>](ssh-from-windows.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
> * [<span data-ttu-id="3d6c4-105">Linux или Mac</span><span class="sxs-lookup"><span data-stu-id="3d6c4-105">Linux/Mac</span></span>](mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
>
>

<span data-ttu-id="3d6c4-106">При подключении tooLinux виртуальных машин (ВМ) в Azure, следует использовать [шифровании с открытым ключом](https://wikipedia.org/wiki/Public-key_cryptography) tooprovide более безопасный способ toolog в tooyour виртуальной Машины с Linux.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-106">When you connect tooLinux virtual machines (VMs) in Azure, you should use [public-key cryptography](https://wikipedia.org/wiki/Public-key_cryptography) tooprovide a more secure way toolog in tooyour Linux VM.</span></span> <span data-ttu-id="3d6c4-107">Этот процесс включает открытые и закрытые обмен ключами с помощью команды tooauthenticate hello безопасного shell (SSH) самостоятельно вместо имени пользователя и пароля.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-107">This process involves a public and private key exchange using hello secure shell (SSH) command tooauthenticate yourself rather than a username and password.</span></span> <span data-ttu-id="3d6c4-108">Пароли являются уязвимыми toobrute атаки, особенно на виртуальных машинах с выходом в Интернет, например веб-серверов.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-108">Passwords are vulnerable toobrute-force attacks, especially on Internet-facing VMs such as web servers.</span></span> <span data-ttu-id="3d6c4-109">В этой статье общие ключи SSH, и как toogenerate hello соответствующих ключей на компьютере Windows.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-109">This article provides an overview of SSH keys and how toogenerate hello appropriate keys on a Windows computer.</span></span>

## <a name="overview-of-ssh-and-keys"></a><span data-ttu-id="3d6c4-110">Общие сведения о SSH и ключах</span><span class="sxs-lookup"><span data-stu-id="3d6c4-110">Overview of SSH and keys</span></span>
<span data-ttu-id="3d6c4-111">Вы можете безопасно войти tooyour виртуальных Машин Linux с помощью открытого и закрытого ключей:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-111">You can securely log in tooyour Linux VM by using public and private keys:</span></span>

* <span data-ttu-id="3d6c4-112">Hello **открытый ключ** помещается на ВМ Linux или любой другой службы, что вы хотите toouse с открытым ключом.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-112">hello **public key** is placed on your Linux VM, or any other service that you wish toouse with public-key cryptography.</span></span>
* <span data-ttu-id="3d6c4-113">Hello **закрытый ключ** — теми, которые присутствуют tooyour виртуальной Машины Linux при входе в tooverify вашу личность.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-113">hello **private key** is what you present tooyour Linux VM when you log in, tooverify your identity.</span></span> <span data-ttu-id="3d6c4-114">Его нужно защищать</span><span class="sxs-lookup"><span data-stu-id="3d6c4-114">Protect this private key.</span></span> <span data-ttu-id="3d6c4-115">и нельзя никому предоставлять.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-115">Do not share it.</span></span>

<span data-ttu-id="3d6c4-116">Открытые и закрытые ключи можно использовать на нескольких виртуальных машинах или в нескольких службах.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-116">These public and private keys can be used on multiple VMs and services.</span></span> <span data-ttu-id="3d6c4-117">Пары ключей для каждой виртуальной Машины или службы, которые вы хотите tooaccess необязательно.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-117">You do not need a pair of keys for each VM or service you wish tooaccess.</span></span> <span data-ttu-id="3d6c4-118">Дополнительные сведения о шифровании с открытым ключом см. [здесь](https://wikipedia.org/wiki/Public-key_cryptography).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-118">For a more detailed overview, see [public-key cryptography](https://wikipedia.org/wiki/Public-key_cryptography).</span></span>

<span data-ttu-id="3d6c4-119">SSH — это протокол зашифрованного подключения, позволяющий безопасно входить в систему через незащищенные соединения.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-119">SSH is an encrypted connection protocol that allows secure logins over unsecured connections.</span></span> <span data-ttu-id="3d6c4-120">Это hello протокола связи по умолчанию для виртуальных машин Linux, размещенные в Azure.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-120">It is hello default connection protocol for Linux VMs hosted in Azure.</span></span> <span data-ttu-id="3d6c4-121">Несмотря на то, что сам SSH обеспечивает зашифрованное соединение, с помощью паролей с соединений по протоколу SSH по-прежнему оставляет hello ВМ уязвимым toobrute атаки или взлома паролей.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-121">Although SSH itself provides an encrypted connection, using passwords with SSH connections still leaves hello VM vulnerable toobrute-force attacks or guessing of passwords.</span></span> <span data-ttu-id="3d6c4-122">Повышение безопасности и предпочтительный метод подключения tooa виртуальную Машину с помощью SSH — с помощью этих открытых и закрытых ключей, также известные как ключи SSH.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-122">A more secure and preferred method of connecting tooa VM using SSH is by using these public and private keys, also known as SSH keys.</span></span>

<span data-ttu-id="3d6c4-123">Если вы не toouse ключи SSH, вы можете по-прежнему войти tooyour виртуальных машин Linux с помощью пароля.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-123">If you do not wish toouse SSH keys, you can still log in tooyour Linux VMs using a password.</span></span> <span data-ttu-id="3d6c4-124">Если ВМ не предоставляется toohello Интернета, использование паролей может быть достаточно.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-124">If your VM is not exposed toohello Internet, using passwords may be sufficient.</span></span> <span data-ttu-id="3d6c4-125">Тем не менее вы по-прежнему требуется toomanage пароли для каждой виртуальной Машины Linux и обслуживания политики работоспособности паролей и рекомендации, такие как минимальная длина пароля и регулярно выполняется их обновление.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-125">However, you still need toomanage your passwords for each Linux VM and maintain healthy password policies and practices, such as minimum password length and regularly updating them.</span></span> <span data-ttu-id="3d6c4-126">Hello использование ключей SSH снижает сложность hello управление отдельными учетными данными между несколькими виртуальными машинами.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-126">hello use of SSH keys reduces hello complexity of managing individual credentials across multiple VMs.</span></span>

## <a name="windows-packages-and-ssh-clients"></a><span data-ttu-id="3d6c4-127">Пакеты Windows и SSH-клиенты</span><span class="sxs-lookup"><span data-stu-id="3d6c4-127">Windows packages and SSH clients</span></span>
<span data-ttu-id="3d6c4-128">Подключение tooand управление виртуальными машинами Linux в Azure с помощью **клиент SSH**.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-128">You connect tooand manage Linux VMs in Azure using an **SSH client**.</span></span> <span data-ttu-id="3d6c4-129">Но на компьютерах Windows, как правило, SSH-клиент не установлен.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-129">Windows computers do not typically have an SSH client installed.</span></span> <span data-ttu-id="3d6c4-130">Hello Юбилейного обновления Windows 10 добавлен Bash для Windows, и hello последнее обновление создатели 10 Windows предоставляет дополнительные обновления.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-130">hello Windows 10 Anniversary Update added Bash for Windows, and hello latest Windows 10 Creators Update provides additional updates.</span></span> <span data-ttu-id="3d6c4-131">Этой подсистемы Windows для Linux можно toorun и доступ таких служебных программ, клиент SSH в собственном коде в командной оболочке Bash.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-131">This Windows Subsystem for Linux allows you toorun and access utilities such as an SSH client natively within a Bash shell.</span></span> <span data-ttu-id="3d6c4-132">После этого можно отследить все документы Linux hello, таких как [созданием пар toogenerate SSH-ключ для Linux](mac-create-ssh-keys.md).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-132">You can then follow any of hello Linux docs, such as [How toogenerate SSH key pairs for Linux](mac-create-ssh-keys.md).</span></span> <span data-ttu-id="3d6c4-133">Bash для Windows находится на стадии разработки, и сейчас доступен бета-выпуск.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-133">Bash for Windows is still under development, and is considered a beta release.</span></span> <span data-ttu-id="3d6c4-134">Дополнительные сведения о Bash для Windows см. в записи блога [Bash on Ubuntu on Windows](https://msdn.microsoft.com/commandline/wsl/about) (Bash для Ubuntu в Windows).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-134">For more information about Bash for Windows, see [Bash on Ubuntu on Windows](https://msdn.microsoft.com/commandline/wsl/about).</span></span>

<span data-ttu-id="3d6c4-135">При желании toouse что-то отличное от Bash Windows общих Windows SSH клиентов, которое можно установить, включаются в hello следующие пакеты:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-135">If you wish toouse something other than Bash for Windows, common Windows SSH clients you can install are included in hello following packages:</span></span>

* <span data-ttu-id="3d6c4-136">[Git для Windows](https://git-for-windows.github.io/);</span><span class="sxs-lookup"><span data-stu-id="3d6c4-136">[Git For Windows](https://git-for-windows.github.io/)</span></span>
* <span data-ttu-id="3d6c4-137">[PuTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/);</span><span class="sxs-lookup"><span data-stu-id="3d6c4-137">[puTTY](http://www.chiark.greenend.org.uk/~sgtatham/putty/)</span></span>
* [<span data-ttu-id="3d6c4-138">MobaXterm</span><span class="sxs-lookup"><span data-stu-id="3d6c4-138">MobaXterm</span></span>](http://mobaxterm.mobatek.net/)
* [<span data-ttu-id="3d6c4-139">Cygwin</span><span class="sxs-lookup"><span data-stu-id="3d6c4-139">Cygwin</span></span>](https://cygwin.com/)


## <a name="which-key-files-do-you-need-toocreate"></a><span data-ttu-id="3d6c4-140">Который ключевых файлов необходимо toocreate?</span><span class="sxs-lookup"><span data-stu-id="3d6c4-140">Which key files do you need toocreate?</span></span>
<span data-ttu-id="3d6c4-141">В Azure необходимо использовать по крайней 2048-разрядные открытые и закрытые ключи в формате **ssh-rsa**.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-141">Azure requires at least 2048-bit, **ssh-rsa** formatted public and private keys.</span></span> <span data-ttu-id="3d6c4-142">Если вы управляете ресурсы Azure с помощью hello классической модели развертывания, необходимо также toogenerate PEM (`.pem` файла).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-142">If you are managing Azure resources using hello Classic deployment model, you also need toogenerate a PEM (`.pem` file).</span></span>

<span data-ttu-id="3d6c4-143">Ниже приведены сценарии развертывания hello и типы файлов, используемых в каждом hello.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-143">Here are hello deployment scenarios, and hello types of files you use in each:</span></span>

1. <span data-ttu-id="3d6c4-144">**SSH-rsa** требуются ключи для любого развертывания с помощью hello [портал Azure](https://portal.azure.com)и развертывания диспетчера ресурсов, с помощью hello [Azure CLI](../../cli-install-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-144">**ssh-rsa** keys are required for any deployment using hello [Azure portal](https://portal.azure.com), and Resource Manager deployments using hello [Azure CLI](../../cli-install-nodejs.md).</span></span>
   * <span data-ttu-id="3d6c4-145">Обычно эти ключи нужны большинству пользователей.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-145">These keys are usually all most people need.</span></span>
2. <span data-ttu-id="3d6c4-146">Объект `.pem` файл является toocreate необходимые виртуальные машины, использующие hello классического развертывания.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-146">A `.pem` file is required toocreate VMs using hello Classic deployment.</span></span> <span data-ttu-id="3d6c4-147">Эти ключи поддерживаются в классическом развертывании при использовании hello [портал Azure](https://portal.azure.com) или [Azure CLI](../../cli-install-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-147">These keys are supported in Classic deployments when using hello [Azure portal](https://portal.azure.com) or [Azure CLI](../../cli-install-nodejs.md).</span></span>
   * <span data-ttu-id="3d6c4-148">Требуется только toocreate эти дополнительные ключи и сертификаты при управлении ресурсы, созданные с помощью hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-148">You only need toocreate these additional keys and certificates if you are managing resources created using hello Classic deployment model.</span></span>

## <a name="install-git-for-windows"></a><span data-ttu-id="3d6c4-149">Установка Git для Windows</span><span class="sxs-lookup"><span data-stu-id="3d6c4-149">Install Git for Windows</span></span>
<span data-ttu-id="3d6c4-150">Hello предыдущего раздела в списке несколько пакетов, которые включают hello `openssl` средство для Windows.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-150">hello preceding section listed several packages that include hello `openssl` tool for Windows.</span></span> <span data-ttu-id="3d6c4-151">Это средство можно необходимые toocreate открытый и закрытый ключи.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-151">This tool is needed toocreate public and private keys.</span></span> <span data-ttu-id="3d6c4-152">Здравствуйте, следующие примеры сведений, как tooinstall и использовать **Git для Windows**, хотя можно выбрать любой пакет, который вы предпочитаете.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-152">hello following examples detail how tooinstall and use **Git for Windows**, though you can choose whichever package you prefer.</span></span> <span data-ttu-id="3d6c4-153">**Git для Windows** предоставляет вам доступ toosome дополнительное программное обеспечение с открытым исходным кодом ([OSS](https://en.wikipedia.org/wiki/Open-source_software)) средств и служебных программ, которые могут быть полезны при работе с виртуальными машинами Linux.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-153">**Git for Windows** gives you access toosome additional open-source software ([OSS](https://en.wikipedia.org/wiki/Open-source_software)) tools and utilities that may be useful as you work with Linux VMs.</span></span>

1. <span data-ttu-id="3d6c4-154">Загрузите и установите **Git для Windows** из hello следующие расположения: [https://git-for-windows.github.io/](https://git-for-windows.github.io/).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-154">Download and install **Git for Windows** from hello following location: [https://git-for-windows.github.io/](https://git-for-windows.github.io/).</span></span>
2. <span data-ttu-id="3d6c4-155">Примите параметры по умолчанию hello во время hello процесс установки, если вам не нужна toochange их.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-155">Accept hello default options during hello install process unless you specifically need toochange them.</span></span>
3. <span data-ttu-id="3d6c4-156">Запустите **Git Bash** из hello **меню "Пуск"** > **Git** > **Git Bash**.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-156">Run **Git Bash** from hello **Start Menu** > **Git** > **Git Bash**.</span></span> <span data-ttu-id="3d6c4-157">консоль Hello выглядит примерно toohello в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-157">hello console looks similar toohello following example:</span></span>

    ![Оболочка Bash Git для Windows](./media/ssh-from-windows/git-bash-window.png)

## <a name="create-a-private-key"></a><span data-ttu-id="3d6c4-159">Создание закрытого ключа</span><span class="sxs-lookup"><span data-stu-id="3d6c4-159">Create a private key</span></span>
1. <span data-ttu-id="3d6c4-160">В вашей **Git Bash** окна, используйте `openssl.exe` toocreate закрытый ключ.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-160">In your **Git Bash** window, use `openssl.exe` toocreate a private key.</span></span> <span data-ttu-id="3d6c4-161">Hello следующий пример создает раздел с именем `myPrivateKey` и сертификат с именем `myCert.pem`:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-161">hello following example creates a key named `myPrivateKey` and certificate named `myCert.pem`:</span></span>

    ```bash
    openssl.exe req -x509 -nodes -days 365 -newkey rsa:2048 \
        -keyout myPrivateKey.key -out myCert.pem
    ```

    <span data-ttu-id="3d6c4-162">Hello выходные данные выглядят аналогично toohello в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-162">hello output looks similar toohello following example:</span></span>

    ```bash
    Generating a 2048 bit RSA private key
    .......................................+++
    .......................+++
    writing new private key too'myPrivateKey.key'
    -----
    You are about toobe asked tooenter information that will be incorporated
    into your certificate request.
    What you are about tooenter is what is called a Distinguished Name or a DN.
    There are quite a few fields but you can leave some blank
    For some fields there will be a default value,
    If you enter '.', hello field will be left blank.
    -----
    Country Name (2 letter code) [AU]:
    ```

   <span data-ttu-id="3d6c4-163">Если bash сообщает об ошибке, попробуйте открыть новое окно **Git Bash** с повышенными привилегиями.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-163">If bash reports an error, try opening a new **Git Bash** window with elevated privileges.</span></span> <span data-ttu-id="3d6c4-164">Перезапустите hello `openssl` команды.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-164">Then, rerun hello `openssl` command.</span></span>

2. <span data-ttu-id="3d6c4-165">Hello ответов запрашивает название страны, расположение, название организации, и т. д.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-165">Answer hello prompts for country name, location, organization name, etc.</span></span>
3. <span data-ttu-id="3d6c4-166">Новый закрытый ключ и сертификат будут созданы в текущей рабочей папке.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-166">Your new private key and certificate are created in your current working directory.</span></span> <span data-ttu-id="3d6c4-167">Из соображений безопасности необходимо задать разрешения hello на ваш закрытый ключ, чтобы только вы имели доступ:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-167">As a security measure, you should set hello permissions on your private key so that only you can access it:</span></span>

    ```bash
    chmod 0600 myPrivateKey.key
    ```

4. <span data-ttu-id="3d6c4-168">Hello [разделу](#create-a-private-key-for-putty) сведения с помощью PuTTYgen tooboth просмотреть и использовать открытый ключ hello и создавать специальные PuTTY tooSSH tooLinux виртуальных машин с помощью закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-168">hello [next section](#create-a-private-key-for-putty) details using PuTTYgen tooboth view and use hello public key, and create a private key specific for using PuTTY tooSSH tooLinux VMs.</span></span> <span data-ttu-id="3d6c4-169">Hello следующая команда создает файл открытого ключа с именем `myPublicKey.key` , который можно использовать сразу:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-169">hello following command generates a public key file named `myPublicKey.key` that you can use right away:</span></span>

    ```bash
    openssl.exe rsa -pubout -in myPrivateKey.key -out myPublicKey.key
    ```

5. <span data-ttu-id="3d6c4-170">Если необходимо также toomanage классический ресурсы преобразовать hello `myCert.pem` слишком`myCert.cer` (в кодировке DER X509 сертификата).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-170">If you also need toomanage Classic resources, convert hello `myCert.pem` too`myCert.cer` (DER encoded X509 certificate).</span></span> <span data-ttu-id="3d6c4-171">Это действие необязательно только в том случае, если вам требуется toospecifically управления ресурсами старые классическом.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-171">Perform this optional step only if you need toospecifically manage older Classic resources.</span></span>

    <span data-ttu-id="3d6c4-172">Преобразуйте hello сертификат, с помощью hello следующую команду:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-172">Convert hello certificate using hello following command:</span></span>

    ```bash
    openssl.exe  x509 -outform der -in myCert.pem -out myCert.cer
    ```

## <a name="create-a-private-key-for-putty"></a><span data-ttu-id="3d6c4-173">Создание закрытого ключа для PuTTY</span><span class="sxs-lookup"><span data-stu-id="3d6c4-173">Create a private key for PuTTY</span></span>
<span data-ttu-id="3d6c4-174">PuTTY — это общераспространенный SSH-клиент для Windows.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-174">PuTTY is a common SSH client for Windows.</span></span> <span data-ttu-id="3d6c4-175">Вы являются свободного toouse любой клиент SSH, по которой необходима.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-175">You are free toouse any SSH client that you wish.</span></span> <span data-ttu-id="3d6c4-176">toouse PuTTY необходимо toocreate еще один тип ключа - PuTTY закрытый ключ (PPK).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-176">toouse PuTTY, you need toocreate an additional type of key - a PuTTY Private Key (PPK).</span></span> <span data-ttu-id="3d6c4-177">Если вы не готовы toouse PuTTY, пропустите этот раздел.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-177">If you do not wish toouse PuTTY, skip this section.</span></span>

<span data-ttu-id="3d6c4-178">Hello примере ниже создается специально для PuTTY toouse дополнительных закрытый ключ.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-178">hello following example creates this additional private key specifically for PuTTY toouse:</span></span>

1. <span data-ttu-id="3d6c4-179">Используйте **Git Bash** tooconvert ваш закрытый ключ закрытый ключ RSA понятно, что PuTTYgen.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-179">Use **Git Bash** tooconvert your private key into an RSA private key that PuTTYgen can understand.</span></span> <span data-ttu-id="3d6c4-180">Hello следующий пример создает раздел с именем `myPrivateKey_rsa` из hello существующий ключ с именем `myPrivateKey`:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-180">hello following example creates a key named `myPrivateKey_rsa` from hello existing key named `myPrivateKey`:</span></span>

    ```bash
    openssl rsa -in ./myPrivateKey.key -out myPrivateKey_rsa
    ```

    <span data-ttu-id="3d6c4-181">Из соображений безопасности необходимо задать разрешения hello на ваш закрытый ключ, чтобы только вы имели доступ:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-181">As a security measure, you should set hello permissions on your private key so that only you can access it:</span></span>

    ```bash
    chmod 0600 myPrivateKey_rsa
    ```
2. <span data-ttu-id="3d6c4-182">Загрузите и запустите PuTTYgen из hello следующие расположения: [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)</span><span class="sxs-lookup"><span data-stu-id="3d6c4-182">Download and run PuTTYgen from hello following location: [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)</span></span>
3. <span data-ttu-id="3d6c4-183">Щелкните меню hello: **файл** > **загрузки закрытого ключа**</span><span class="sxs-lookup"><span data-stu-id="3d6c4-183">Click hello menu: **File** > **Load Private Key**</span></span>
4. <span data-ttu-id="3d6c4-184">Найдите закрытый ключ (`myPrivateKey_rsa` в предыдущем примере hello).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-184">Locate your private key (`myPrivateKey_rsa` in hello previous example).</span></span> <span data-ttu-id="3d6c4-185">каталог по умолчанию Hello при запуске **Git Bash** — `C:\Users\%username%`.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-185">hello default directory when you start **Git Bash** is `C:\Users\%username%`.</span></span> <span data-ttu-id="3d6c4-186">Изменить фильтр tooshow hello файл **все файлы (\*.\*)** :</span><span class="sxs-lookup"><span data-stu-id="3d6c4-186">Change hello file filter tooshow **All Files (\*.\*)**:</span></span>

    ![Загрузка PuTTYgen hello существующий закрытый ключ](./media/ssh-from-windows/load-private-key.png)
5. <span data-ttu-id="3d6c4-188">Щелкните **Открыть**.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-188">Click **Open**.</span></span> <span data-ttu-id="3d6c4-189">Запрос указывает, что разделу hello успешно импортировано:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-189">A prompt indicates that hello key has been successfully imported:</span></span>

    ![Успешно импортировано tooPuTTYgen ключа](./media/ssh-from-windows/successfully-imported-key.png)
6. <span data-ttu-id="3d6c4-191">Нажмите кнопку **ОК** tooclose hello строки.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-191">Click **OK** tooclose hello prompt.</span></span>
7. <span data-ttu-id="3d6c4-192">открытый ключ Hello отображается вверху hello hello **PuTTYgen** окна.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-192">hello public key is displayed at hello top of hello **PuTTYgen** window.</span></span> <span data-ttu-id="3d6c4-193">Скопируйте и вставьте этот открытый ключ в hello портал Azure или шаблона диспетчера ресурсов Azure, при создании виртуальной Машины Linux.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-193">You copy and paste this public key into hello Azure portal or Azure Resource Manager template when you create a Linux VM.</span></span> <span data-ttu-id="3d6c4-194">Можно также щелкнуть **сохранить открытый ключ** toosave компьютер tooyour копирования:</span><span class="sxs-lookup"><span data-stu-id="3d6c4-194">You can also click **Save public key** toosave a copy tooyour computer:</span></span>

    ![Сохранение файла PuTTY с открытым ключом](./media/ssh-from-windows/save-public-key.png)

    <span data-ttu-id="3d6c4-196">Hello следующем примере показано, как бы скопировать и вставить этот открытый ключ в hello портал Azure, при создании виртуальной Машины Linux.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-196">hello following example shows how you would copy and paste this public key into hello Azure portal when you create a Linux VM.</span></span> <span data-ttu-id="3d6c4-197">открытый ключ Hello обычно сохраняется в `~/.ssh/authorized_keys` на новой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-197">hello public key is typically then stored in `~/.ssh/authorized_keys` on your new VM.</span></span>

    ![Использовать открытый ключ при создании виртуальной Машины в hello портал Azure](./media/ssh-from-windows/use-public-key-azure-portal.png)
8. <span data-ttu-id="3d6c4-199">Вернитесь к **PuTTYgen** и нажмите кнопку **Save private Key** (Сохранить закрытый ключ):</span><span class="sxs-lookup"><span data-stu-id="3d6c4-199">Back in **PuTTYgen**, Click **Save private Key**:</span></span>

    ![Сохранение файла PuTTY с закрытым ключом](./media/ssh-from-windows/save-ppk-file.png)

   > [!WARNING]
   > <span data-ttu-id="3d6c4-201">Появится запрос, если вы хотите toocontinue без ввода парольную фразу для ключа.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-201">A prompt asks if you wish toocontinue without entering a passphrase for your key.</span></span> <span data-ttu-id="3d6c4-202">Парольная фраза аналогично вложенного tooyour пароль закрытого ключа.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-202">A passphrase is like a password attached tooyour private key.</span></span> <span data-ttu-id="3d6c4-203">Даже если кто-то было tooobtain ваш закрытый ключ, они по-прежнему не будет возможности tooauthenticate, используя только ключ hello.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-203">Even if someone were tooobtain your private key, they still would not be able tooauthenticate using just hello key.</span></span> <span data-ttu-id="3d6c4-204">Они также требуется парольная фраза hello.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-204">They would also need hello passphrase.</span></span> <span data-ttu-id="3d6c4-205">Без парольную фразу Если кто-то получает свой закрытый ключ, они войдите в tooany виртуальной Машины или службы, использующий этот ключ.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-205">Without a passphrase, if someone obtains your private key, they can log in tooany VM or service that uses that key.</span></span> <span data-ttu-id="3d6c4-206">Мы рекомендуем создать ее.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-206">We recommend you create a passphrase.</span></span> <span data-ttu-id="3d6c4-207">Однако если вы забудете парольную фразу hello, нет не toorecover способом его.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-207">However, if you forget hello passphrase, there is no way toorecover it.</span></span>
   >
   >

    <span data-ttu-id="3d6c4-208">Tooenter парольную фразу, нажмите кнопку **нет**, введите парольную фразу в главном окне PuTTYgen hello и нажмите кнопку **Сохранить закрытый ключ** еще раз.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-208">If you wish tooenter a passphrase, click **No**, enter a passphrase in hello main PuTTYgen window, and then click **Save private key** again.</span></span> <span data-ttu-id="3d6c4-209">В противном случае нажмите кнопку **Да** toocontinue без предоставления необязательно hello парольную фразу.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-209">Otherwise, click **Yes** toocontinue without providing hello optional passphrase.</span></span>
9. <span data-ttu-id="3d6c4-210">Введите имя и расположение toosave PPK файл.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-210">Enter a name and location toosave your PPK file.</span></span>

## <a name="use-putty-toossh-tooa-linux-machine"></a><span data-ttu-id="3d6c4-211">Использовать Putty tooSSH tooa компьютер Linux</span><span class="sxs-lookup"><span data-stu-id="3d6c4-211">Use Putty tooSSH tooa Linux Machine</span></span>
<span data-ttu-id="3d6c4-212">Отметим еще раз, PuTTY — это общераспространенный SSH-клиент для Windows.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-212">Again, PuTTY is a common SSH client for Windows.</span></span> <span data-ttu-id="3d6c4-213">Вы являются свободного toouse любой клиент SSH, по которой необходима.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-213">You are free toouse any SSH client that you wish.</span></span> <span data-ttu-id="3d6c4-214">Здравствуйте, как следующие шаги подробно toouse вашего закрытого ключа tooauthenticate с ВМ Azure с помощью SSH.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-214">hello following steps detail how toouse your private key tooauthenticate with your Azure VM using SSH.</span></span> <span data-ttu-id="3d6c4-215">Hello шаги похожи на другие ключа SSH-клиенты с точки зрения необходимости tooload вашей hello tooauthenticate закрытого ключа SSH-подключения.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-215">hello steps are similar in other SSH key clients in terms of needing tooload your private key tooauthenticate hello SSH connection.</span></span>

1. <span data-ttu-id="3d6c4-216">Здравствуйте, загрузки и выполнения putty из следующие расположения: [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)</span><span class="sxs-lookup"><span data-stu-id="3d6c4-216">Download and run putty from hello following location: [http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html](http://www.chiark.greenend.org.uk/~sgtatham/putty/download.html)</span></span>
2. <span data-ttu-id="3d6c4-217">Заполните hello имя узла или IP-адрес виртуальной Машины из портала Azure hello.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-217">Fill in hello host name or IP address of your VM from hello Azure portal:</span></span>

    ![Открытие нового подключения PuTTY](./media/ssh-from-windows/putty-new-connection.png)
3. <span data-ttu-id="3d6c4-219">Прежде чем нажать **Open** (Открыть) щелкните узел **Connection** (Подключение)  > **SSH** > вкладка **Auth** (Проверка подлинности). Обзор tooand выберите ваш закрытый ключ.</span><span class="sxs-lookup"><span data-stu-id="3d6c4-219">Before selecting **Open**, click **Connection** > **SSH** > **Auth** tab. Browse tooand select your private key:</span></span>

    ![Выбор закрытого ключа PuTTY для проверки подлинности](./media/ssh-from-windows/putty-auth-dialog.png)
4. <span data-ttu-id="3d6c4-221">Нажмите кнопку **откройте** tooconnect tooyour виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="3d6c4-221">Click **Open** tooconnect tooyour virtual machine</span></span>

## <a name="next-steps"></a><span data-ttu-id="3d6c4-222">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="3d6c4-222">Next steps</span></span>
<span data-ttu-id="3d6c4-223">Также можно создать открытый и закрытый ключи hello [с помощью OS X и Linux](mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-223">You can also generate hello public and private keys [using OS X and Linux](mac-create-ssh-keys.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

<span data-ttu-id="3d6c4-224">Дополнительные сведения о Bash для Windows и hello преимущества готовые средства операционные системы на компьютере Windows см. в разделе [Bash на Ubuntu на Windows](https://msdn.microsoft.com/commandline/wsl/about).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-224">For more information about Bash for Windows and hello benefits of having OSS tools readily available on your Windows computer, see [Bash on Ubuntu on Windows](https://msdn.microsoft.com/commandline/wsl/about).</span></span>

<span data-ttu-id="3d6c4-225">Если возникли проблемы с помощью SSH tooconnect tooyour виртуальных машин Linux, см. раздел [Устранение SSH подключений tooan виртуальной Машине Linux Azure](troubleshoot-ssh-connection.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="3d6c4-225">If you have trouble using SSH tooconnect tooyour Linux VMs, see [Troubleshoot SSH connections tooan Azure Linux VM](troubleshoot-ssh-connection.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>
