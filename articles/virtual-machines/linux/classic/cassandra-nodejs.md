---
title: "aaaRun Cassandra с Linux в Azure | Документы Microsoft"
description: "Как toorun Cassandra кластеров Linux на виртуальных машинах Azure из приложения Node.js"
services: virtual-machines-linux
documentationcenter: nodejs
author: tomarcher
manager: routlaw
editor: 
tags: azure-service-management
ms.assetid: 30de1f29-e97d-492f-ae34-41ec83488de0
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: 381ca301bbe88d3740cf182f9c44fada5b9ba7cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="running-cassandra-with-linux-on-azure-and-accessing-it-from-nodejs"></a><span data-ttu-id="8d063-103">Запуск Cassandra под управлением Linux в Azure и доступ к нему из Node.js</span><span class="sxs-lookup"><span data-stu-id="8d063-103">Running Cassandra with Linux on Azure and Accessing it from Node.js</span></span>
> [!IMPORTANT] 
> <span data-ttu-id="8d063-104">В Azure предлагаются две модели развертывания для создания ресурсов и работы с ними: [модель диспетчера ресурсов и классическая модель](../../../resource-manager-deployment-model.md).</span><span class="sxs-lookup"><span data-stu-id="8d063-104">Azure has two different deployment models for creating and working with resources: [Resource Manager and Classic](../../../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="8d063-105">В этой статье описан с помощью hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="8d063-105">This article covers using hello Classic deployment model.</span></span> <span data-ttu-id="8d063-106">Корпорация Майкрософт рекомендует наиболее новые развертывания модели hello диспетчера ресурсов.</span><span class="sxs-lookup"><span data-stu-id="8d063-106">Microsoft recommends that most new deployments use hello Resource Manager model.</span></span> <span data-ttu-id="8d063-107">Ознакомьтесь с шаблонами Resource Manager для [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) и [кластера Spark и Cassandra с дистрибутивом CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span><span class="sxs-lookup"><span data-stu-id="8d063-107">See Resource Manager templates for [Datastax Enterprise](https://azure.microsoft.com/documentation/templates/datastax) and [Spark cluster and Cassandra on CentOS](https://azure.microsoft.com/documentation/templates/spark-and-cassandra-on-centos/).</span></span>

## <a name="overview"></a><span data-ttu-id="8d063-108">Обзор</span><span class="sxs-lookup"><span data-stu-id="8d063-108">Overview</span></span>
<span data-ttu-id="8d063-109">Microsoft Azure — это открытая облачная платформа, на которой выполняются как программное обеспечение корпорации Майкрософт, так и сторонние программы, к которым относятся операционные системы, серверы приложений, ПО промежуточного слоя для обмена сообщениями, а также базы данных SQL и NoSQL из коммерческих моделей и моделей с открытым исходным кодом.</span><span class="sxs-lookup"><span data-stu-id="8d063-109">Microsoft Azure is an open cloud platform that runs both Microsoft as well as non-Microsoft software which  includes operating systems, application servers, messaging middleware as well as SQL and NoSQL databases from both commercial and open source models.</span></span> <span data-ttu-id="8d063-110">При создании гибких служб в общедоступных облаках (в том числе Azure) требуется тщательное планирование и разработка архитектуры обоих серверов приложений, а также уровней хранилищ.</span><span class="sxs-lookup"><span data-stu-id="8d063-110">Building resilient services on public clouds including Azure requires careful planning and deliberate architecture for both applications servers as well storage layers.</span></span> <span data-ttu-id="8d063-111">Архитектура распределенного хранилища Cassandra помогает создать системы высокой доступности, которые отказоустойчивы к сбоям кластеров.</span><span class="sxs-lookup"><span data-stu-id="8d063-111">Cassandra’s distributed storage architecture naturally helps in building highly available systems that are fault tolerant for cluster failures.</span></span> <span data-ttu-id="8d063-112">Cassandra — это облачная база данных NoSQL, поддерживаемая организацией Apache Software Foundation на сайте cassandra.apache.org; решение Cassandra написано на языке Java и поэтому выполняется на платформах Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="8d063-112">Cassandra is a cloud scale NoSQL database maintained by Apache Software Foundation at cassandra.apache.org; Cassandra is written in Java and hence runs on both on Windows as well as Linux platforms.</span></span>

<span data-ttu-id="8d063-113">Hello посвящена эта статья является развертывание Cassandra tooshow на Ubuntu как кластер одного и нескольких центрах данных, используя виртуальные машины Microsoft Azure и виртуальные сети.</span><span class="sxs-lookup"><span data-stu-id="8d063-113">hello focus of this article is tooshow Cassandra deployment on Ubuntu as a single and multi-data center cluster leveraging Microsoft Azure Virtual Machines and Virtual Networks.</span></span> <span data-ttu-id="8d063-114">Hello развертывания кластера для оптимизации рабочих нагрузок выходит за рамки этой статьи для его выполнения требуется настройка нескольких диск узла, соответствующие кольцо топологии проектирования и моделирования toosupport hello данных требуется репликации, согласованность данных, пропускная способность и требования высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="8d063-114">hello cluster deployment for production optimized workloads is out of scope of this article as it requires multi-disk node configuration, appropriate ring topology design and data modeling toosupport hello needed replication, data consistency, throughput and high availability requirements.</span></span>

<span data-ttu-id="8d063-115">Этот подход tooshow, порядок построения hello кластера Cassandra сравнение Docker, Chef или Puppet, что может hello много упрощает развертывание инфраструктуры принимает статьи.</span><span class="sxs-lookup"><span data-stu-id="8d063-115">This article takes a fundamental approach tooshow what is involved in building hello Cassandra cluster compared Docker, Chef or Puppet which can make hello infrastructure deployment a lot easier.</span></span>  

## <a name="hello-deployment-models"></a><span data-ttu-id="8d063-116">Hello модели развертывания</span><span class="sxs-lookup"><span data-stu-id="8d063-116">hello Deployment Models</span></span>
<span data-ttu-id="8d063-117">Сеть Microsoft Azure предоставляет hello развертывания изолированной частной кластеров, hello доступ из которых может быть ограниченным tooattain нормально настроенную сетевой безопасности.</span><span class="sxs-lookup"><span data-stu-id="8d063-117">Microsoft Azure networking allows hello deployment of isolated private clusters, hello access of which can be restricted tooattain fine grained network security.</span></span>  <span data-ttu-id="8d063-118">Поскольку в этой статье об отображении hello Cassandra развертывания на базовом уровне, не рассматривается на уровень согласованности hello и проектирования hello оптимальной хранилища для пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="8d063-118">Since this article is about showing hello Cassandra deployment at a fundamental level, we will not focus on hello consistency level and hello optimal storage design for throughput.</span></span> <span data-ttu-id="8d063-119">Ниже приведен список hello сетевые требования для наших гипотетической кластера:</span><span class="sxs-lookup"><span data-stu-id="8d063-119">Here is hello list of networking requirements for our hypothetical cluster:</span></span>

* <span data-ttu-id="8d063-120">Внешние системы не могут получить доступ к базе данных Cassandra из службы Azure или за пределами.</span><span class="sxs-lookup"><span data-stu-id="8d063-120">External systems can’t access Cassandra database from within or outside Azure</span></span>
* <span data-ttu-id="8d063-121">Кластер Cassandra имеет toobe за подсистемой балансировки нагрузки для трафика thrift</span><span class="sxs-lookup"><span data-stu-id="8d063-121">Cassandra cluster has toobe behind a load balancer for thrift traffic</span></span>
* <span data-ttu-id="8d063-122">Узлы Cassandra должны развертываться в двух группах в каждом центре обработки данных для улучшенной доступности кластера.</span><span class="sxs-lookup"><span data-stu-id="8d063-122">Deploy Cassandra nodes in two groups in each data center for an enhanced cluster availability</span></span>
* <span data-ttu-id="8d063-123">Заблокировать hello кластера таким образом, только для фермы серверов приложений имеет доступ к базе данных toohello напрямую</span><span class="sxs-lookup"><span data-stu-id="8d063-123">Lock down hello cluster so that only application server farm has access toohello database directly</span></span>
* <span data-ttu-id="8d063-124">Не допускаются открытые сетевые конечные точки, отличные от SSH.</span><span class="sxs-lookup"><span data-stu-id="8d063-124">No public networking endpoints other than SSH</span></span>
* <span data-ttu-id="8d063-125">Каждый узел Cassandra должен иметь фиксированный внутренний IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="8d063-125">Each Cassandra node needs a fixed internal IP address</span></span>

<span data-ttu-id="8d063-126">Cassandra может быть один регион Azure развернутой tooa или регионы toomultiple по hello распределенных характер hello нагрузки.</span><span class="sxs-lookup"><span data-stu-id="8d063-126">Cassandra can be deployed tooa single Azure region or toomultiple regions based on hello distributed nature of hello workload.</span></span> <span data-ttu-id="8d063-127">Развертывание в нескольких регионах модель можно использовать tooserve конечным пользователям ближе tooa определенного geography через hello Cassandra в одной инфраструктуре.</span><span class="sxs-lookup"><span data-stu-id="8d063-127">Multi-region deployment model can be leveraged tooserve end users closer tooa particular geography through hello same Cassandra infrastructure.</span></span> <span data-ttu-id="8d063-128">В Cassandra встроенного узла репликации позаботится о hello синхронизации базы данных master несколькими записывает, рассчитанные на основе нескольких центрах обработки данных и представляет согласованное представление данных tooapplications hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-128">Cassandra’s built-in node replication takes care of hello synchronization of multi-master writes originating from multiple data centers and presents a consistent view of hello data tooapplications.</span></span> <span data-ttu-id="8d063-129">Развертывание в нескольких регионах также для устранения риска hello hello широкой простоев службы Azure.</span><span class="sxs-lookup"><span data-stu-id="8d063-129">Multi-region deployment can also help with hello risk mitigation of hello broader Azure service outages.</span></span> <span data-ttu-id="8d063-130">Настраиваемая топология согласованности и репликации Cassandra обеспечит выполнение различных требований приложений к RPO.</span><span class="sxs-lookup"><span data-stu-id="8d063-130">Cassandra’s tunable consistency and replication topology will help in meeting diverse RPO needs of applications.</span></span>

### <a name="single-region-deployment"></a><span data-ttu-id="8d063-131">Развертывание в одной области</span><span class="sxs-lookup"><span data-stu-id="8d063-131">Single Region Deployment</span></span>
<span data-ttu-id="8d063-132">Начнем с развертывание в одном регионе и уязвимость hello выводов, сделанных при создании модели регионов.</span><span class="sxs-lookup"><span data-stu-id="8d063-132">We will start with a single region deployment and harvest hello learnings in creating a multi-region model.</span></span> <span data-ttu-id="8d063-133">Виртуальные сети Azure будет использовать toocreate изолированных подсетей, требования безопасности сети hello, упомянутых выше могут быть выполнены.</span><span class="sxs-lookup"><span data-stu-id="8d063-133">Azure virtual networking will be used toocreate isolated subnets so that hello network security requirements mentioned above can be met.</span></span>  <span data-ttu-id="8d063-134">Hello процесс, описанный в создании развертывание в одном регионе hello использует Ubuntu 14.04 LTS и Cassandra 2.08; Тем не менее, процесс hello легко может быть принятый toohello другие варианты Linux.</span><span class="sxs-lookup"><span data-stu-id="8d063-134">hello process described in creating hello single region deployment uses Ubuntu 14.04 LTS and Cassandra 2.08; however, hello process can easily be adopted toohello other Linux variants.</span></span> <span data-ttu-id="8d063-135">Hello ниже приведены некоторые из hello нефункциональных характеристик hello развертывание в одном регионе.</span><span class="sxs-lookup"><span data-stu-id="8d063-135">hello following are some of hello systemic characteristics of hello single region deployment.</span></span>  

<span data-ttu-id="8d063-136">**Высокая доступность:** hello Cassandra узлы из hello, развернутых на рис. 1 доступности tootwo устанавливается таким образом, чтобы узлы hello распределены между несколькими доменами сбоя для обеспечения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="8d063-136">**High Availability:** hello Cassandra nodes shown in hello Figure 1 are deployed tootwo availability sets so that hello nodes are spread between multiple fault domains for high availability.</span></span> <span data-ttu-id="8d063-137">Виртуальные машины с заметками с каждой группой доступности — too2 сопоставленных доменах сбоя.</span><span class="sxs-lookup"><span data-stu-id="8d063-137">VMs annotated with each availability set is mapped too2 fault domains.</span></span>  <span data-ttu-id="8d063-138">Microsoft Azure использует концепцию hello toomanage домена сбоя незапланированных простоев (например сбоев оборудования или программного обеспечения) при hello понятие обновление домена (например, узла или гостевой ОС установка исправлений и обновлений, обновлений приложений) используется для управления запланированных простоев.</span><span class="sxs-lookup"><span data-stu-id="8d063-138">Microsoft Azure uses hello concept of fault domain toomanage unplanned down time (e.g. hardware or software failures) while hello concept of upgrade domain (e.g. host or guest OS patching/upgrades, application upgrades) is used for managing scheduled down time.</span></span> <span data-ttu-id="8d063-139">См. в разделе [аварийное восстановление и высокий уровень доступности для приложений Azure](http://msdn.microsoft.com/library/dn251004.aspx) для роли hello доменов сбоя и обновления в достижение высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="8d063-139">Please see [Disaster Recovery and High Availability for Azure Applications](http://msdn.microsoft.com/library/dn251004.aspx) for hello role of fault and upgrade domains in attaining high availability.</span></span>

![Развертывание в одной области](./media/cassandra-nodejs/cassandra-linux1.png)

<span data-ttu-id="8d063-141">Рисунок 1. Развертывание в одном регионе</span><span class="sxs-lookup"><span data-stu-id="8d063-141">Figure 1: Single region deployment</span></span>

<span data-ttu-id="8d063-142">Обратите внимание на момент написания этой статьи hello, Azure не разрешает явное сопоставление hello группы виртуальных машин tooa определенную ошибку домена; Таким образом даже в модели развертывания hello показано на рисунке 1, это статистически вероятно, что все виртуальные машины hello может быть tootwo сопоставленных доменов сбоя вместо четырех.</span><span class="sxs-lookup"><span data-stu-id="8d063-142">Note that at hello time of this writing, Azure doesn’t allow hello explicit mapping of a group of VMs tooa specific fault domain; consequently, even with hello deployment model shown in Figure 1, it is statistically probable that all hello virtual machines may be mapped tootwo fault domains instead of four.</span></span>

<span data-ttu-id="8d063-143">**Трафик Thrift балансировки нагрузки:** Thrift клиентских библиотек внутри hello веб-сервера кластера toohello подключаться через внутренний балансировщик нагрузки.</span><span class="sxs-lookup"><span data-stu-id="8d063-143">**Load Balancing Thrift Traffic:** Thrift client libraries inside hello web server connect toohello cluster through an internal load balancer.</span></span> <span data-ttu-id="8d063-144">Для этого необходимо hello процесс добавления подсети toohello балансировщик внутренней нагрузки hello «данные» (см. рис. 1) в контексте hello hello облачной службы, в которой размещен кластер Cassandra hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-144">This requires hello process of adding hello internal load balancer toohello “data” subnet (refer Figure 1) in hello context of hello cloud service hosting hello Cassandra cluster.</span></span> <span data-ttu-id="8d063-145">После определения hello внутренней подсистемы балансировки нагрузки, каждый узел требуется toobe конечной точки с балансировкой нагрузки hello добавлен с заметками hello набора балансировки нагрузки с ранее имя подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="8d063-145">Once hello internal load balancer is defined, each node requires hello load balanced endpoint toobe added with hello annotations of a load balanced set with previously defined load balancer name.</span></span> <span data-ttu-id="8d063-146">Дополнительные сведения см. в статье [Обзор внутренней подсистемы балансировки нагрузки](../../../load-balancer/load-balancer-internal-overview.md).</span><span class="sxs-lookup"><span data-stu-id="8d063-146">See [Azure Internal Load Balancing ](../../../load-balancer/load-balancer-internal-overview.md)for more details.</span></span>

<span data-ttu-id="8d063-147">**Начальные значения кластера:** важно tooselect hello большинства узлов высокой доступности для начальные значения, как новые узлы hello будут взаимодействовать с топологией hello toodiscover начальное число узлов кластера hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-147">**Cluster Seeds:** It is important tooselect hello most highly available nodes for seeds as hello new nodes will communicate with seed nodes toodiscover hello topology of hello cluster.</span></span> <span data-ttu-id="8d063-148">Один узел из каждого набора доступности обозначается как начальное значение узлов tooavoid единственной точки отказа.</span><span class="sxs-lookup"><span data-stu-id="8d063-148">One node from each availability set is designated as seed nodes tooavoid single point of failure.</span></span>

<span data-ttu-id="8d063-149">**Коэффициент репликации и уровень согласованности:** Cassandra элемента сборки в высокой доступности и устойчивостью данных характеризуется hello коэффициентом репликации (RF - количество копий каждой строки, сохраненной в кластере hello) и уровень согласованности (количество реплики toobe прочитать или записать перед возвратом вызывающего объекта toohello результат hello).</span><span class="sxs-lookup"><span data-stu-id="8d063-149">**Replication Factor and Consistency Level:** Cassandra’s build-in high-availability and data durability is characterized by hello Replication Factor (RF - number of copies of each row stored on hello cluster) and Consistency Level (number of replicas toobe read/written before returning hello result toohello caller).</span></span> <span data-ttu-id="8d063-150">Коэффициент репликации указывается во время hello создания пространство КЛЮЧЕЙ (аналогично tooa реляционной базы данных), тогда как при выдаче запроса CRUD hello задан уровень согласованности hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-150">Replication factor is specified during hello KEYSPACE (similar tooa relational database) creation whereas hello consistency level is specified while issuing hello CRUD query.</span></span> <span data-ttu-id="8d063-151">Обратитесь к документации Cassandra на [настройки для обеспечения согласованности](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) сведения о согласованности и hello формула для вычисления кворума.</span><span class="sxs-lookup"><span data-stu-id="8d063-151">See Cassandra documentation at [Configuring for Consistency](http://www.datastax.com/documentation/cassandra/2.0/cassandra/dml/dml_config_consistency_c.html) for consistency details and hello formula for quorum computation.</span></span>

<span data-ttu-id="8d063-152">Cassandra поддерживает два типа моделей целостности данных — и согласованности окончательной; Hello коэффициентом репликации и уровень согласованности вместе определяют при hello данных будет соответствовать сразу после завершения операции записи, или он будет согласованным.</span><span class="sxs-lookup"><span data-stu-id="8d063-152">Cassandra supports two types of data integrity models – Consistency and Eventual Consistency; hello Replication Factor and Consistency Level will together determine if hello data will be consistent as soon as a write operation is complete or it will be eventually consistent.</span></span> <span data-ttu-id="8d063-153">Например указание КВОРУМА как hello уровня согласованности будет всегда гарантирует данных согласованности при любом уровне согласованности, меньше числа hello записан как необходимые tooattain toobe реплик КВОРУМА (например, один) приводит данных согласованным.</span><span class="sxs-lookup"><span data-stu-id="8d063-153">For example, specifying QUORUM as hello Consistency Level will always ensures data Consistency while any consistency level, below hello number of replicas toobe written as needed tooattain QUORUM (e.g. ONE) results in data being eventually consistent.</span></span>

<span data-ttu-id="8d063-154">Hello 8 узлов кластера, показанном выше, с коэффициентом репликации 3 и КВОРУМА (2 узла считываются или записываются на согласованность) уровень согласованности чтения и записи, сохраняется в случае hello теоретической потери в группы большинство 1 узла репликации перед запуском приложения hello hello отметить hello сбоя.</span><span class="sxs-lookup"><span data-stu-id="8d063-154">hello 8-node cluster shown above, with a replication factor of 3 and QUORUM (2 nodes are read or written for consistency) read/write consistency level, can survive hello theoretical loss of at hello most 1 node per replication group before hello application start noticing hello failure.</span></span> <span data-ttu-id="8d063-155">Это предполагает, что все пробелы ключа hello также балансировкой запросов на чтение и запись.</span><span class="sxs-lookup"><span data-stu-id="8d063-155">This assumes that all hello key spaces have well balanced read/write requests.</span></span>  <span data-ttu-id="8d063-156">Здесь представлены Hello hello параметры, которые будут использоваться для развертывания hello кластера:</span><span class="sxs-lookup"><span data-stu-id="8d063-156">hello following are hello parameters we will use for hello deployed cluster:</span></span>

<span data-ttu-id="8d063-157">Конфигурация кластера Cassandra, развернутого в одном регионе</span><span class="sxs-lookup"><span data-stu-id="8d063-157">Single region Cassandra cluster configuration:</span></span>

| <span data-ttu-id="8d063-158">Параметр кластера</span><span class="sxs-lookup"><span data-stu-id="8d063-158">Cluster Parameter</span></span> | <span data-ttu-id="8d063-159">Значение</span><span class="sxs-lookup"><span data-stu-id="8d063-159">Value</span></span> | <span data-ttu-id="8d063-160">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-160">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8d063-161">Число узлов (N)</span><span class="sxs-lookup"><span data-stu-id="8d063-161">Number of Nodes (N)</span></span> |<span data-ttu-id="8d063-162">8</span><span class="sxs-lookup"><span data-stu-id="8d063-162">8</span></span> |<span data-ttu-id="8d063-163">Общее число узлов в кластере hello</span><span class="sxs-lookup"><span data-stu-id="8d063-163">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="8d063-164">Коэффициент репликации (RF)</span><span class="sxs-lookup"><span data-stu-id="8d063-164">Replication Factor (RF)</span></span> |<span data-ttu-id="8d063-165">3</span><span class="sxs-lookup"><span data-stu-id="8d063-165">3</span></span> |<span data-ttu-id="8d063-166">Число реплик данной строки</span><span class="sxs-lookup"><span data-stu-id="8d063-166">Number of replicas of a given row</span></span> |
| <span data-ttu-id="8d063-167">Уровень согласованности (запись)</span><span class="sxs-lookup"><span data-stu-id="8d063-167">Consistency Level (Write)</span></span> |<span data-ttu-id="8d063-168">QUORUM[(RF/2) +1) = 2] hello результат из hello формула округляется вниз</span><span class="sxs-lookup"><span data-stu-id="8d063-168">QUORUM[(RF/2) +1) = 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="8d063-169">Записывает за hello большинство 2 реплики перед отправкой ответа hello toohello вызывающий объект; 3-й реплики записывается согласованным образом.</span><span class="sxs-lookup"><span data-stu-id="8d063-169">Writes at hello most 2 replicas before hello response is sent toohello caller; 3rd replica is written in an eventually consistent manner.</span></span> |
| <span data-ttu-id="8d063-170">Уровень согласованности (чтение)</span><span class="sxs-lookup"><span data-stu-id="8d063-170">Consistency Level (Read)</span></span> |<span data-ttu-id="8d063-171">КВОРУМ [(RF/2) + 1 = 2] hello результат формулы hello округляется вниз</span><span class="sxs-lookup"><span data-stu-id="8d063-171">QUORUM [(RF/2) +1= 2] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="8d063-172">Считывает 2 реплики перед отправкой ответа toohello вызывающего.</span><span class="sxs-lookup"><span data-stu-id="8d063-172">Reads 2 replicas before sending response toohello caller.</span></span> |
| <span data-ttu-id="8d063-173">Стратегия репликации</span><span class="sxs-lookup"><span data-stu-id="8d063-173">Replication Strategy</span></span> |<span data-ttu-id="8d063-174">Дополнительную информацию о NetworkTopologyStrategy см. в разделе [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) (Репликация данных) в документации по Cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-174">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="8d063-175">Понимает топологии развертывания hello и помещает реплик на узлах, таким образом, чтобы все реплики hello не попадут в hello одинаково для монтажа в стойку</span><span class="sxs-lookup"><span data-stu-id="8d063-175">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="8d063-176">Информатор</span><span class="sxs-lookup"><span data-stu-id="8d063-176">Snitch</span></span> |<span data-ttu-id="8d063-177">Дополнительную информацию о GossipingPropertyFileSnitch см. в разделе [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) (Информаторы) в документации по Cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-177">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="8d063-178">NetworkTopologyStrategy использует концепцию snitch toounderstand hello топологии.</span><span class="sxs-lookup"><span data-stu-id="8d063-178">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="8d063-179">GossipingPropertyFileSnitch обеспечивает улучшенное управление в сопоставлении каждого центра toodata узла и для установки в стойку.</span><span class="sxs-lookup"><span data-stu-id="8d063-179">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="8d063-180">Эти сведения toopropagate сплетни затем использует Hello кластера.</span><span class="sxs-lookup"><span data-stu-id="8d063-180">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="8d063-181">Это гораздо проще относительный tooPropertyFileSnitch параметр динамического IP</span><span class="sxs-lookup"><span data-stu-id="8d063-181">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

<span data-ttu-id="8d063-182">**Рекомендации по Azure для кластера Cassandra.** Виртуальные машины Microsoft Azure способны использовать хранилище BLOB-объектов Azure для сохранения данных на диске. В службе хранилища Azure сохраняется три реплики каждого диска для обеспечения высокой надежности.</span><span class="sxs-lookup"><span data-stu-id="8d063-182">**Azure Considerations for Cassandra Cluster:** Microsoft Azure Virtual Machines capability uses Azure Blob storage for disk persistence; Azure Storage saves 3 replicas of each disk for high durability.</span></span> <span data-ttu-id="8d063-183">Это означает, что каждая строка данных, вставляемых в таблицу Cassandra уже хранится в трех реплик и поэтому согласованность данных уже работают даже если hello коэффициент репликации (RF)-1.</span><span class="sxs-lookup"><span data-stu-id="8d063-183">That means each row of data inserted into a Cassandra table is already stored in 3 replicas and hence data consistency is already taken care of even if hello Replication Factor (RF) is 1.</span></span> <span data-ttu-id="8d063-184">Основная проблема Hello с коэффициентом репликации, 1 — что приложения hello, будут простаивать даже в случае сбоя одного узла Cassandra.</span><span class="sxs-lookup"><span data-stu-id="8d063-184">hello main problem with Replication Factor being 1 is that hello application will experience downtime even if a single Cassandra node fails.</span></span> <span data-ttu-id="8d063-185">Тем не менее, если узел не работает для проблем hello (например, оборудования, программного обеспечения сбои системы) распознаются Azure Fabric Controller, он предоставит новый узел в своем месте с помощью hello же хранения на жестких дисках.</span><span class="sxs-lookup"><span data-stu-id="8d063-185">However, if a node is down for hello problems (e.g. hardware, system software failures) recognized by Azure Fabric Controller, it will provision a new node in its place using hello same storage drives.</span></span> <span data-ttu-id="8d063-186">Подготовка нового узла tooreplace hello старого один может занять несколько минут.</span><span class="sxs-lookup"><span data-stu-id="8d063-186">Provisioning a new node tooreplace hello old one may take a few minutes.</span></span>  <span data-ttu-id="8d063-187">Аналогичным образом для планового обслуживания действий, подобных изменений гостевой ОС, обновляет Cassandra и изменения приложения Azure Fabric Controller выполняет последовательные обновления hello узлов в кластере hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-187">Similarly for planned maintenance activities like guest OS changes, Cassandra upgrades and application changes Azure Fabric Controller performs rolling upgrades of hello nodes in hello cluster.</span></span>  <span data-ttu-id="8d063-188">Последовательные обновления также может остановить работу на нескольких узлах одновременно и поэтому hello кластера могут возникать небольшой простой для нескольких секций.</span><span class="sxs-lookup"><span data-stu-id="8d063-188">Rolling upgrades also may take down a few nodes at a time and hence hello cluster may experience brief downtime for a few partitions.</span></span> <span data-ttu-id="8d063-189">Однако hello данных, не будут потеряны из-за toohello Встроенная избыточность хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="8d063-189">However, hello data will not be lost due toohello built-in Azure Storage redundancy.</span></span>  

<span data-ttu-id="8d063-190">Для развертывания систем tooAzure, которой не требуется высокий уровень доступности (например около 99,9 эквивалентные too8.76 часов/год; см. [высокий уровень доступности](http://en.wikipedia.org/wiki/High_availability) подробности) может быть может toorun с RF = 1 и уровень согласованности = один.</span><span class="sxs-lookup"><span data-stu-id="8d063-190">For systems deployed tooAzure that doesn’t require high availability (e.g. around 99.9 which is equivalent too8.76 hrs/year; see [High Availability](http://en.wikipedia.org/wiki/High_availability) for details) you may be able toorun with RF=1 and Consistency Level=ONE.</span></span>  <span data-ttu-id="8d063-191">Для приложений с требованиями высокой доступности, RF = 3 и уровень согласованности = ждать hello простою одного из узлов hello одна из реплик hello КВОРУМА.</span><span class="sxs-lookup"><span data-stu-id="8d063-191">For applications with high availability requirements, RF=3 and Consistency Level=QUORUM will tolerate hello down time of one of hello nodes one of hello replicas.</span></span> <span data-ttu-id="8d063-192">RF = 1 в традиционной развертываниях (например локальной) не может использоваться из-за toohello возможные потери данных из подобных сбоев диска.</span><span class="sxs-lookup"><span data-stu-id="8d063-192">RF=1 in traditional deployments (e.g. on-premises) can’t be used due toohello possible data loss resulting from problems like disk failures.</span></span>   

## <a name="multi-region-deployment"></a><span data-ttu-id="8d063-193">Развертывание в нескольких регионах</span><span class="sxs-lookup"><span data-stu-id="8d063-193">Multi-region Deployment</span></span>
<span data-ttu-id="8d063-194">Данные center поддерживающей репликации и модель согласованности, описанных выше способствует развертывание в нескольких регионах hello стандартной hello без hello Cassandra элемента должны для любого внешнего средства.</span><span class="sxs-lookup"><span data-stu-id="8d063-194">Cassandra’s data-center-aware replication and consistency model described above helps with hello multi-region deployment out of hello box without hello need for any external tooling.</span></span> <span data-ttu-id="8d063-195">Это отличается от традиционных реляционных баз данных hello где hello настройки зеркального отображения базы данных для операций с несколькими хозяевами записи может быть весьма сложным.</span><span class="sxs-lookup"><span data-stu-id="8d063-195">This is quite different from hello traditional relational databases where hello setup for database mirroring for multi-master writes can be quite complex.</span></span> <span data-ttu-id="8d063-196">Сценарии использования hello, включая следующие hello Cassandra в нескольких регионах, настройка позволяет:</span><span class="sxs-lookup"><span data-stu-id="8d063-196">Cassandra in a multi-region set up can help with hello usage scenarios including hello following:</span></span>

<span data-ttu-id="8d063-197">**Развертывание на основе выражения с учетом:** приложения с несколькими клиентами, с помощью Очистить сопоставления пользователей клиента-в-области, можно улучшенных с низкой задержки hello регионов кластера.</span><span class="sxs-lookup"><span data-stu-id="8d063-197">**Proximity based deployment:** Multi-tenant applications, with clear mapping of tenant users -to-region, can be benefited by hello multi-region cluster’s low latencies.</span></span> <span data-ttu-id="8d063-198">Пример управления обучения системы для образовательных учреждений кластер, можно развернуть распределенного в Восток США и Запад США областей tooserve hello соответствующих необязательно для транзакций, а также аналитики.</span><span class="sxs-lookup"><span data-stu-id="8d063-198">For example a learning management systems for educational institutions can deploy a distributed cluster in East US and West US regions tooserve hello respective campuses for transactional as well as analytics.</span></span> <span data-ttu-id="8d063-199">Hello данные можно локально согласованное hello время чтения и записи и может быть согласованным в обоих регионах hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-199">hello data can be locally consistent at hello time reads and writes and can be eventually consistent across both hello regions.</span></span> <span data-ttu-id="8d063-200">Имеются другие примеры, такие как распределение носителей и электронная торговля. Так, любые сферы, пользовательская база в которых сосредоточена в одном регионе, — хороший пример использования данной модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="8d063-200">There are other examples like media distribution, e-commerce and anything and everything that serves geo concentrated user base is a good use case for this deployment model.</span></span>

<span data-ttu-id="8d063-201">**Высокая доступность.** Избыточность — ключевой фактор обеспечения высокой доступности программного и аппаратного обеспечения. Дополнительные сведения см. в статье Building Reliable Cloud Systems on Microsoft Azure (Создание надежных облачных систем в Microsoft Azure).</span><span class="sxs-lookup"><span data-stu-id="8d063-201">**High Availability:** Redundancy is a key factor in attaining high availability of software and hardware; see Building Reliable Cloud Systems on Microsoft Azure for details.</span></span> <span data-ttu-id="8d063-202">На базе Microsoft Azure hello единственный надежный способ достижения true избыточности — развертывание кластера регионов.</span><span class="sxs-lookup"><span data-stu-id="8d063-202">On Microsoft Azure, hello only reliable way of achieving true redundancy is by deploying a multi-region cluster.</span></span> <span data-ttu-id="8d063-203">Приложения могут развертываться в активный / активный "или" активный / пассивный режим и если один из регионов hello не работает, диспетчер трафика Azure может перенаправить трафик toohello активной области.</span><span class="sxs-lookup"><span data-stu-id="8d063-203">Applications can be deployed in an active-active or active-passive mode and if one of hello regions is down, Azure Traffic Manager can redirect traffic toohello active region.</span></span>  <span data-ttu-id="8d063-204">С развертывание в одном регионе hello 99,9, в случае доступности hello развертывания двух области можно достичь доступности 99,9999 вычисляется по формуле hello: (1-(1-0.999) * (1-0,999)) * 100); в разделе hello выше бумаги подробные сведения.</span><span class="sxs-lookup"><span data-stu-id="8d063-204">With hello single region deployment, if hello availability is 99.9, a two-region deployment can attain an availability of 99.9999 computed by hello formula: (1-(1-0.999) * (1-0.999))*100); see hello above paper for details.</span></span>

<span data-ttu-id="8d063-205">**Аварийное восстановление.** Если кластер Cassandra, развернутый в нескольких регионах, разработан должным образом, он может выдерживать катастрофические сбои центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="8d063-205">**Disaster Recovery:** Multi-region Cassandra cluster, if properly designed, can withstand catastrophic data center outages.</span></span> <span data-ttu-id="8d063-206">Если один регион не работает, регионы tooother развернутое приложение hello можно запустить обслуживающий hello конечных пользователей.</span><span class="sxs-lookup"><span data-stu-id="8d063-206">If one region is down, hello application deployed tooother regions can start serving hello end users.</span></span> <span data-ttu-id="8d063-207">Как и любой business continuity реализациями приложения hello имеет toobe нечувствительного к ошибкам для потеря некоторых данных, возникающие в результате данные hello в асинхронный конвейер hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-207">Like any other business continuity implementations, hello application has toobe tolerant for some data loss resulting from hello data in hello asynchronous pipeline.</span></span> <span data-ttu-id="8d063-208">Однако Cassandra делает восстановления hello намного swifter, чем время hello процессами восстановления традиционных баз данных.</span><span class="sxs-lookup"><span data-stu-id="8d063-208">However, Cassandra makes hello recovery much swifter than hello time taken by traditional database recovery processes.</span></span> <span data-ttu-id="8d063-209">На рисунке 2 показана модель обычно развертывание в нескольких регионах hello с 8 узлов в каждом регионе.</span><span class="sxs-lookup"><span data-stu-id="8d063-209">Figure 2 shows hello typical multi-region deployment model with eight nodes in each region.</span></span> <span data-ttu-id="8d063-210">Обе области являются зеркальным отображением друг от друга для hello же из симметрии; схемы в реальном мире зависят от hello тип рабочей нагрузки (например транзакций или аналитическая), RPO, RTO, согласованность данных и требования к доступности.</span><span class="sxs-lookup"><span data-stu-id="8d063-210">Both regions are mirror images of each other for hello same of symmetry; real world designs depend on hello workload type (e.g. transactional or analytical), RPO, RTO, data consistency and availability requirements.</span></span>

![Развертывание в нескольких регионах](./media/cassandra-nodejs/cassandra-linux2.png)

<span data-ttu-id="8d063-212">Рисунок 2. Развертывание Cassandra в нескольких регионах</span><span class="sxs-lookup"><span data-stu-id="8d063-212">Figure 2: Multi-region Cassandra deployment</span></span>

### <a name="network-integration"></a><span data-ttu-id="8d063-213">Сетевая интеграция</span><span class="sxs-lookup"><span data-stu-id="8d063-213">Network Integration</span></span>
<span data-ttu-id="8d063-214">Наборы виртуальных машин, развернутых tooprivate сетей, расположенных на две области обменивается данными друг с другом с помощью VPN-туннель.</span><span class="sxs-lookup"><span data-stu-id="8d063-214">Sets of virtual machines deployed tooprivate networks located on two regions communicates with each other using a VPN tunnel.</span></span> <span data-ttu-id="8d063-215">VPN-туннель Hello подключается двумя шлюзами программного обеспечения, настраивается во время процесса развертывания сети hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-215">hello VPN tunnel connects two software gateways provisioned during hello network deployment process.</span></span> <span data-ttu-id="8d063-216">Обе области имеют схожую архитектуру сети с точки зрения «web» и «данные» подсети; Сети Azure позволяет создавать столько подсети hello и применяет списки управления доступом, при необходимости по сетевой безопасности.</span><span class="sxs-lookup"><span data-stu-id="8d063-216">Both regions have similar network architecture in terms of “web” and “data” subnets; Azure networking allows hello creation of as many subnets as needed and apply ACLs as needed by network security.</span></span> <span data-ttu-id="8d063-217">При проектировании топологии кластера hello межсайтовую данных center связи задержки и hello экономический эффект считается необходимость toobe hello сетевого трафика.</span><span class="sxs-lookup"><span data-stu-id="8d063-217">While designing hello cluster topology inter data center communication latency and hello economic impact of hello network traffic need toobe considered.</span></span>

### <a name="data-consistency-for-multi-data-center-deployment"></a><span data-ttu-id="8d063-218">Согласованность данных при развертывании в нескольких центрах обработки данных</span><span class="sxs-lookup"><span data-stu-id="8d063-218">Data Consistency for Multi-Data Center Deployment</span></span>
<span data-ttu-id="8d063-219">Распределенные развертываний необходимость toobe учитывать hello кластера топологии влияние на производительность и высокий уровень доступности.</span><span class="sxs-lookup"><span data-stu-id="8d063-219">Distributed deployments need toobe aware of hello cluster topology impact on throughput and high availability.</span></span> <span data-ttu-id="8d063-220">Hello RF и уровень согласованности toobe необходимость выбран таким образом hello кворума не зависит от доступности всех центрах обработки данных hello hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-220">hello RF and Consistency Level need toobe selected in such way that hello quorum doesn’t depend on hello availability of all hello data centers.</span></span>
<span data-ttu-id="8d063-221">Для системы, который требуется высокий уровень согласованности, LOCAL_QUORUM уровень согласованности (для операций чтения и записи) будет убедитесь, что hello локального считывает и записывает удовлетворяются из локального hello узлов, если данные реплицируются асинхронно toohello удаленных центров данных.</span><span class="sxs-lookup"><span data-stu-id="8d063-221">For a system that needs high consistency, a LOCAL_QUORUM for consistency level (for reads and writes) will make sure that hello local reads and writes are satisfied from hello local nodes while data is replicated asynchronously toohello remote data centers.</span></span>  <span data-ttu-id="8d063-222">В таблице 2 приводятся подробные сведения для кластера hello несколькими регионами, описанные далее в hello записи копии конфигурации hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-222">Table 2 summarizes hello configuration details for hello multi-region cluster outlined later in hello write up.</span></span>

<span data-ttu-id="8d063-223">**Конфигурация кластера Cassandra, развернутого в двух регионах**</span><span class="sxs-lookup"><span data-stu-id="8d063-223">**Two-region Cassandra cluster configuration**</span></span>

| <span data-ttu-id="8d063-224">Параметр кластера</span><span class="sxs-lookup"><span data-stu-id="8d063-224">Cluster Parameter</span></span> | <span data-ttu-id="8d063-225">Значение</span><span class="sxs-lookup"><span data-stu-id="8d063-225">Value</span></span> | <span data-ttu-id="8d063-226">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-226">Remarks</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8d063-227">Число узлов (N)</span><span class="sxs-lookup"><span data-stu-id="8d063-227">Number of Nodes (N)</span></span> |<span data-ttu-id="8d063-228">8 + 8</span><span class="sxs-lookup"><span data-stu-id="8d063-228">8 + 8</span></span> |<span data-ttu-id="8d063-229">Общее число узлов в кластере hello</span><span class="sxs-lookup"><span data-stu-id="8d063-229">Total number of nodes in hello cluster</span></span> |
| <span data-ttu-id="8d063-230">Коэффициент репликации (RF)</span><span class="sxs-lookup"><span data-stu-id="8d063-230">Replication Factor (RF)</span></span> |<span data-ttu-id="8d063-231">3</span><span class="sxs-lookup"><span data-stu-id="8d063-231">3</span></span> |<span data-ttu-id="8d063-232">Число реплик данной строки</span><span class="sxs-lookup"><span data-stu-id="8d063-232">Number of replicas of a given row</span></span> |
| <span data-ttu-id="8d063-233">Уровень согласованности (запись)</span><span class="sxs-lookup"><span data-stu-id="8d063-233">Consistency Level (Write)</span></span> |<span data-ttu-id="8d063-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello результат формулы hello округляется вниз</span><span class="sxs-lookup"><span data-stu-id="8d063-234">LOCAL_QUORUM [(sum(RF)/2) +1) = 4] hello result of hello formula is rounded down</span></span> |<span data-ttu-id="8d063-235">2 узлов будут записаны toohello первого центра данных синхронно. Hello дополнительных 2 узлов для кворума будут записаны асинхронно toohello второй центр обработки данных.</span><span class="sxs-lookup"><span data-stu-id="8d063-235">2 nodes will be written toohello first data center synchronously; hello additional 2 nodes needed for quorum will be written asynchronously toohello 2nd data center.</span></span> |
| <span data-ttu-id="8d063-236">Уровень согласованности (чтение)</span><span class="sxs-lookup"><span data-stu-id="8d063-236">Consistency Level (Read)</span></span> |<span data-ttu-id="8d063-237">LOCAL_QUORUM ((RF/2) + 1) = 2 hello результат формулы hello округляется вниз</span><span class="sxs-lookup"><span data-stu-id="8d063-237">LOCAL_QUORUM ((RF/2) +1) = 2 hello result of hello formula is rounded down</span></span> |<span data-ttu-id="8d063-238">Запросов на чтение удовлетворяются из только одну область; 2 узлов доступны для чтения перед отправкой ответа hello задней toohello клиента.</span><span class="sxs-lookup"><span data-stu-id="8d063-238">Read requests are satisfied from only one region; 2 nodes are read before hello response is sent back toohello client.</span></span> |
| <span data-ttu-id="8d063-239">Стратегия репликации</span><span class="sxs-lookup"><span data-stu-id="8d063-239">Replication Strategy</span></span> |<span data-ttu-id="8d063-240">Дополнительную информацию о NetworkTopologyStrategy см. в разделе [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) (Репликация данных) в документации по Cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-240">NetworkTopologyStrategy see [Data Replication](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureDataDistributeReplication_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="8d063-241">Понимает топологии развертывания hello и помещает реплик на узлах, таким образом, чтобы все реплики hello не попадут в hello одинаково для монтажа в стойку</span><span class="sxs-lookup"><span data-stu-id="8d063-241">Understands hello deployment topology and places replicas on nodes so that all hello replicas don’t end up on hello same rack</span></span> |
| <span data-ttu-id="8d063-242">Информатор</span><span class="sxs-lookup"><span data-stu-id="8d063-242">Snitch</span></span> |<span data-ttu-id="8d063-243">Дополнительную информацию о GossipingPropertyFileSnitch см. в разделе [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) (Информаторы) в документации по Cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-243">GossipingPropertyFileSnitch see [Snitches](http://www.datastax.com/documentation/cassandra/2.0/cassandra/architecture/architectureSnitchesAbout_c.html) in Cassandra documentation for more information</span></span> |<span data-ttu-id="8d063-244">NetworkTopologyStrategy использует концепцию snitch toounderstand hello топологии.</span><span class="sxs-lookup"><span data-stu-id="8d063-244">NetworkTopologyStrategy uses a concept of snitch toounderstand hello topology.</span></span> <span data-ttu-id="8d063-245">GossipingPropertyFileSnitch обеспечивает улучшенное управление в сопоставлении каждого центра toodata узла и для установки в стойку.</span><span class="sxs-lookup"><span data-stu-id="8d063-245">GossipingPropertyFileSnitch gives better control in mapping each node toodata center and rack.</span></span> <span data-ttu-id="8d063-246">Эти сведения toopropagate сплетни затем использует Hello кластера.</span><span class="sxs-lookup"><span data-stu-id="8d063-246">hello cluster then uses gossip toopropagate this information.</span></span> <span data-ttu-id="8d063-247">Это гораздо проще относительный tooPropertyFileSnitch параметр динамического IP</span><span class="sxs-lookup"><span data-stu-id="8d063-247">This is much simpler in dynamic IP setting relative tooPropertyFileSnitch</span></span> |

## <a name="hello-software-configuration"></a><span data-ttu-id="8d063-248">Hello конфигурации программного обеспечения</span><span class="sxs-lookup"><span data-stu-id="8d063-248">hello SOFTWARE CONFIGURATION</span></span>
<span data-ttu-id="8d063-249">Hello следующих версий программного обеспечения используются во время развертывания hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-249">hello following software versions are used during hello deployment:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-250">Программное обеспечение</span><span class="sxs-lookup"><span data-stu-id="8d063-250">Software</span></span></th><th><span data-ttu-id="8d063-251">Источник</span><span class="sxs-lookup"><span data-stu-id="8d063-251">Source</span></span></th><th><span data-ttu-id="8d063-252">Version (версия)</span><span class="sxs-lookup"><span data-stu-id="8d063-252">Version</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-253">JRE</span><span class="sxs-lookup"><span data-stu-id="8d063-253">JRE</span></span>    </td><td><span data-ttu-id="8d063-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span><span class="sxs-lookup"><span data-stu-id="8d063-254">[JRE 8](http://www.oracle.com/technetwork/java/javase/downloads/server-jre8-downloads-2133154.html) </span></span></td><td><span data-ttu-id="8d063-255">8U5</span><span class="sxs-lookup"><span data-stu-id="8d063-255">8U5</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-256">JNA</span><span class="sxs-lookup"><span data-stu-id="8d063-256">JNA</span></span>    </td><td><span data-ttu-id="8d063-257">[JNA](https://github.com/twall/jna) </span><span class="sxs-lookup"><span data-stu-id="8d063-257">[JNA](https://github.com/twall/jna) </span></span></td><td> <span data-ttu-id="8d063-258">3.2.7</span><span class="sxs-lookup"><span data-stu-id="8d063-258">3.2.7</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-259">Cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-259">Cassandra</span></span></td><td>[<span data-ttu-id="8d063-260">Apache Cassandra 2.0.8</span><span class="sxs-lookup"><span data-stu-id="8d063-260">Apache Cassandra 2.0.8</span></span>](http://www.apache.org/dist/cassandra/2.0.8/apache-cassandra-2.0.8-bin.tar.gz)</td><td> <span data-ttu-id="8d063-261">2.0.8</span><span class="sxs-lookup"><span data-stu-id="8d063-261">2.0.8</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-262">Ubuntu</span><span class="sxs-lookup"><span data-stu-id="8d063-262">Ubuntu</span></span>    </td><td><span data-ttu-id="8d063-263">[Microsoft Azure](https://azure.microsoft.com/) </span><span class="sxs-lookup"><span data-stu-id="8d063-263">[Microsoft Azure](https://azure.microsoft.com/) </span></span></td><td><span data-ttu-id="8d063-264">14.04 LTS</span><span class="sxs-lookup"><span data-stu-id="8d063-264">14.04 LTS</span></span></td></tr>
</table>

<span data-ttu-id="8d063-265">Поскольку для загрузки среды выполнения Java требуется вручную принятие условий лицензии Oracle, toosimplify hello развертывания, загрузки всех hello позже загрузку на образ шаблона Ubuntu hello, который мы создадим как кластер toohello перед обменом рабочего стола toohello необходимое программное обеспечение развертывание.</span><span class="sxs-lookup"><span data-stu-id="8d063-265">Since downloading of JRE requires manual acceptance of Oracle license, toosimplify hello deployment, download all hello required software toohello desktop for later uploading into hello Ubuntu template image we will be creating as a precursor toohello cluster deployment.</span></span>

<span data-ttu-id="8d063-266">Загрузите hello выше программное обеспечение в каталог хорошо известных загрузки (например, %TEMP%/downloads в Windows или ~/Downloads на большинстве ОС Linux или Mac) на локальном компьютере hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-266">Download hello above software into a well-known download directory (e.g. %TEMP%/downloads on Windows or ~/Downloads on most Linux distributions or Mac) on hello local computer.</span></span>

### <a name="create-ubuntu-vm"></a><span data-ttu-id="8d063-267">СОЗДАНИЕ ВИРТУАЛЬНОЙ МАШИНЫ UBUNTU</span><span class="sxs-lookup"><span data-stu-id="8d063-267">CREATE UBUNTU VM</span></span>
<span data-ttu-id="8d063-268">В этом шаге процесса hello мы создадим Ubuntu изображения с hello необходимое программное обеспечение, чтобы hello изображение может быть повторно использован для инициализации несколько узлов Cassandra.</span><span class="sxs-lookup"><span data-stu-id="8d063-268">In this step of hello process we will create Ubuntu image with hello pre-requisite software so that hello image can be reused for provisioning several Cassandra nodes.</span></span>  

#### <a name="step-1-generate-ssh-key-pair"></a><span data-ttu-id="8d063-269">Шаг 1. Создание пары ключей SSH</span><span class="sxs-lookup"><span data-stu-id="8d063-269">STEP 1: Generate SSH key pair</span></span>
<span data-ttu-id="8d063-270">Службе Azure требуется X509 открытый ключ PEM или DER кодировке во время подготовки hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-270">Azure needs an X509 public key that is either PEM or DER encoded at hello provisioning time.</span></span> <span data-ttu-id="8d063-271">Создать пару открытого и закрытого ключей, с помощью инструкций hello, расположенный в том, как tooUse SSH с Linux в Azure.</span><span class="sxs-lookup"><span data-stu-id="8d063-271">Generate a public/private key pair using hello instructions located at How tooUse SSH with Linux on Azure.</span></span> <span data-ttu-id="8d063-272">Если планируется toouse putty.exe как клиент SSH на Windows или Linux у вас есть tooconvert hello PEM кодировке RSA tooPPK закрытого ключа с помощью puttygen.exe; Hello инструкции можно найти в hello выше веб-странице.</span><span class="sxs-lookup"><span data-stu-id="8d063-272">If you plan toouse putty.exe as an SSH client either on Windows or Linux, you have tooconvert hello PEM encoded RSA private key tooPPK format using puttygen.exe; hello instructions for this can be found in hello above web page.</span></span>

#### <a name="step-2-create-ubuntu-template-vm"></a><span data-ttu-id="8d063-273">Шаг 2. Создание виртуальной машины шаблонов Ubuntu</span><span class="sxs-lookup"><span data-stu-id="8d063-273">STEP 2: Create Ubuntu template VM</span></span>
<span data-ttu-id="8d063-274">toocreate hello шаблона виртуальной Машины, войдите на hello Azure классического портала и использовать hello, следующая последовательность: нажмите кнопку Создать, ВЫЧИСЛЕНИЙ, ВИРТУАЛЬНОЙ МАШИНЫ, из КОЛЛЕКЦИИ, UBUNTU, Ubuntu Server 14.04 LTS и нажмите кнопку со стрелкой вправо hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-274">toocreate hello template VM, log into hello Azure classic portal and use hello following sequence: Click NEW, COMPUTE, VIRTUAL MACHINE, FROM GALLERY, UBUNTU, Ubuntu Server 14.04 LTS, and then click hello right arrow.</span></span> <span data-ttu-id="8d063-275">Учебник, описывающий, как toocreate ВМ Linux, см. статью создания виртуальной машины с Linux.</span><span class="sxs-lookup"><span data-stu-id="8d063-275">For a tutorial that describes how toocreate a Linux VM, see Create a Virtual Machine Running Linux.</span></span>

<span data-ttu-id="8d063-276">Введите следующую информацию на экране приветствия «конфигурация виртуальной машины» #1 hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-276">Enter hello following information on hello “Virtual machine configuration” screen #1:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-277">ИМЯ ПОЛЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-277">FIELD NAME</span></span>              </td><td>       <span data-ttu-id="8d063-278">ЗНАЧЕНИЕ ПОЛЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-278">FIELD VALUE</span></span>               </td><td>         <span data-ttu-id="8d063-279">ПРИМЕЧАНИЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-279">REMARKS</span></span>                </td><tr>
<tr><td><span data-ttu-id="8d063-280">ДАТА ВЫПУСКА ВЕРСИИ</span><span class="sxs-lookup"><span data-stu-id="8d063-280">VERSION RELEASE DATE</span></span>    </td><td> <span data-ttu-id="8d063-281">Выберите дату из раскрывающегося hello</span><span class="sxs-lookup"><span data-stu-id="8d063-281">Select a date from hello drop down</span></span></td><td></td><tr>
<tr><td><span data-ttu-id="8d063-282">ИМЯ ВИРТУАЛЬНОЙ МАШИНЫ</span><span class="sxs-lookup"><span data-stu-id="8d063-282">VIRTUAL MACHINE NAME</span></span>    </td><td> <span data-ttu-id="8d063-283">cass-template</span><span class="sxs-lookup"><span data-stu-id="8d063-283">cass-template</span></span>                   </td><td> <span data-ttu-id="8d063-284">Это имя узла hello hello виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="8d063-284">This is hello hostname of hello VM</span></span> </td><tr>
<tr><td><span data-ttu-id="8d063-285">УРОВЕНЬ</span><span class="sxs-lookup"><span data-stu-id="8d063-285">TIER</span></span>                     </td><td> <span data-ttu-id="8d063-286">STANDARD</span><span class="sxs-lookup"><span data-stu-id="8d063-286">STANDARD</span></span>                           </td><td> <span data-ttu-id="8d063-287">Оставьте по умолчанию hello</span><span class="sxs-lookup"><span data-stu-id="8d063-287">Leave hello default</span></span>              </td><tr>
<tr><td><span data-ttu-id="8d063-288">РАЗМЕР</span><span class="sxs-lookup"><span data-stu-id="8d063-288">SIZE</span></span>                     </td><td> <span data-ttu-id="8d063-289">A1</span><span class="sxs-lookup"><span data-stu-id="8d063-289">A1</span></span>                              </td><td><span data-ttu-id="8d063-290">Необходимые для выбора hello виртуальных Машин на основании hello операции ввода-ВЫВОДА. для этого оставьте значение по умолчанию hello</span><span class="sxs-lookup"><span data-stu-id="8d063-290">Select hello VM based on hello IO needs; for this purpose leave hello default</span></span> </td><tr>
<tr><td> <span data-ttu-id="8d063-291">НОВОЕ ИМЯ ПОЛЬЗОВАТЕЛЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-291">NEW USER NAME</span></span>             </td><td> <span data-ttu-id="8d063-292">localadmin</span><span class="sxs-lookup"><span data-stu-id="8d063-292">localadmin</span></span>                       </td><td> <span data-ttu-id="8d063-293">"admin" — это зарезервированное имя пользователя в Ubuntu 12.xx и более поздних версий.</span><span class="sxs-lookup"><span data-stu-id="8d063-293">"admin" is a reserved user name in Ubuntu 12.xx and after</span></span></td><tr>
<tr><td> <span data-ttu-id="8d063-294">ПРОВЕРКА ПОДЛИННОСТИ</span><span class="sxs-lookup"><span data-stu-id="8d063-294">AUTHENTICATION</span></span>         </td><td> <span data-ttu-id="8d063-295">Щелкните флажок</span><span class="sxs-lookup"><span data-stu-id="8d063-295">Click check box</span></span>                 </td><td><span data-ttu-id="8d063-296">Установите этот флажок, если toosecure с использованием ключа SSH</span><span class="sxs-lookup"><span data-stu-id="8d063-296">Check if you want toosecure with an SSH key</span></span> </td><tr>
<tr><td> <span data-ttu-id="8d063-297">СЕРТИФИКАТ</span><span class="sxs-lookup"><span data-stu-id="8d063-297">CERTIFICATE</span></span>             </td><td> <span data-ttu-id="8d063-298">Имя файла сертификата открытого ключа hello</span><span class="sxs-lookup"><span data-stu-id="8d063-298">file name of hello public key certificate</span></span> </td><td> <span data-ttu-id="8d063-299">Используйте hello открытого ключа, созданного ранее</span><span class="sxs-lookup"><span data-stu-id="8d063-299">Use hello public key generated previously</span></span></td><tr>
<tr><td> <span data-ttu-id="8d063-300">Новый пароль</span><span class="sxs-lookup"><span data-stu-id="8d063-300">New Password</span></span>    </td><td> <span data-ttu-id="8d063-301">надежный пароль</span><span class="sxs-lookup"><span data-stu-id="8d063-301">strong password</span></span> </td><td> </td><tr>
<tr><td> <span data-ttu-id="8d063-302">Подтверждение пароля</span><span class="sxs-lookup"><span data-stu-id="8d063-302">Confirm Password</span></span>    </td><td> <span data-ttu-id="8d063-303">надежный пароль</span><span class="sxs-lookup"><span data-stu-id="8d063-303">strong password</span></span> </td><td></td><tr>
</table>

<span data-ttu-id="8d063-304">Введите следующую информацию на экране приветствия «конфигурация виртуальной машины» #2 hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-304">Enter hello following information on hello “Virtual machine configuration” screen #2:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-305">ИМЯ ПОЛЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-305">FIELD NAME</span></span>             </th><th> <span data-ttu-id="8d063-306">ЗНАЧЕНИЕ ПОЛЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-306">FIELD VALUE</span></span>                       </th><th> <span data-ttu-id="8d063-307">ПРИМЕЧАНИЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-307">REMARKS</span></span>                                 </th></tr>
<tr><td> <span data-ttu-id="8d063-308">ОБЛАЧНАЯ СЛУЖБА</span><span class="sxs-lookup"><span data-stu-id="8d063-308">CLOUD SERVICE</span></span>    </td><td> <span data-ttu-id="8d063-309">Создать новую облачную службу.</span><span class="sxs-lookup"><span data-stu-id="8d063-309">Create a new cloud service</span></span>    </td><td><span data-ttu-id="8d063-310">Облачная служба — это контейнер вычислительных ресурсов, таки как виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="8d063-310">Cloud service is a container compute resources like virtual machines</span></span></td></tr>
<tr><td> <span data-ttu-id="8d063-311">DNS-ИМЯ ОБЛАЧНОЙ СЛУЖБЫ</span><span class="sxs-lookup"><span data-stu-id="8d063-311">CLOUD SERVICE DNS NAME</span></span>    </td><td><span data-ttu-id="8d063-312">ubuntu-template.cloudapp.net</span><span class="sxs-lookup"><span data-stu-id="8d063-312">ubuntu-template.cloudapp.net</span></span>    </td><td><span data-ttu-id="8d063-313">Назначьте имя независимой подсистеме балансировки нагрузки</span><span class="sxs-lookup"><span data-stu-id="8d063-313">Give a machine agnostic load balancer name</span></span></td></tr>
<tr><td> <span data-ttu-id="8d063-314">РЕГИОН/ТЕРРИТОРИАЛЬНАЯ ГРУППА/ВИРТУАЛЬНАЯ СЕТЬ</span><span class="sxs-lookup"><span data-stu-id="8d063-314">REGION/AFFINITY GROUP/VIRTUAL NETWORK</span></span> </td><td>    <span data-ttu-id="8d063-315">Запад США</span><span class="sxs-lookup"><span data-stu-id="8d063-315">West US</span></span>    </td><td> <span data-ttu-id="8d063-316">Выберите регион, из которого веб-приложений, доступ к кластеру Cassandra hello</span><span class="sxs-lookup"><span data-stu-id="8d063-316">Select a region from which your web applications access hello Cassandra cluster</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-317">УЧЕТНАЯ ЗАПИСЬ ХРАНЕНИЯ</span><span class="sxs-lookup"><span data-stu-id="8d063-317">STORAGE ACCOUNT</span></span> </td><td>    <span data-ttu-id="8d063-318">Используйте значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8d063-318">Use default</span></span>    </td><td><span data-ttu-id="8d063-319">Использовать учетную запись хранения по умолчанию hello или предварительно созданная учетная запись хранения в определенном регионе</span><span class="sxs-lookup"><span data-stu-id="8d063-319">Use hello default storage account  or a pre-created storage account in a particular region</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-320">группа доступности;</span><span class="sxs-lookup"><span data-stu-id="8d063-320">AVAILABILITY SET</span></span> </td><td>    <span data-ttu-id="8d063-321">None</span><span class="sxs-lookup"><span data-stu-id="8d063-321">None</span></span> </td><td>    <span data-ttu-id="8d063-322">Оставьте пустым.</span><span class="sxs-lookup"><span data-stu-id="8d063-322">Leave it blank</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-323">КОНЕЧНЫЕ ТОЧКИ</span><span class="sxs-lookup"><span data-stu-id="8d063-323">ENDPOINTS</span></span>    </td><td><span data-ttu-id="8d063-324">Используйте значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="8d063-324">Use default</span></span> </td><td>    <span data-ttu-id="8d063-325">Использовать конфигурацию SSH по умолчанию hello</span><span class="sxs-lookup"><span data-stu-id="8d063-325">Use hello default SSH configuration</span></span> </td></tr>
</table>

<span data-ttu-id="8d063-326">Нажмите кнопку со стрелкой вправо, оставьте значения по умолчанию hello на экране приветствия #3 и щелкните hello «проверка» кнопки toocomplete hello ВМ процесса подготовки.</span><span class="sxs-lookup"><span data-stu-id="8d063-326">Click right arrow, leave hello defaults on hello screen #3 and click hello “check” button toocomplete hello VM provisioning process.</span></span> <span data-ttu-id="8d063-327">Через несколько минут hello виртуальной Машины с hello имя «ubuntu шаблона» должно быть в состоянии «выполнение».</span><span class="sxs-lookup"><span data-stu-id="8d063-327">After a few minutes, hello VM with hello name “ubuntu-template” should be in a “running” status.</span></span>

### <a name="install-hello-necessary-software"></a><span data-ttu-id="8d063-328">УСТАНОВИТЕ НЕОБХОДИМОЕ программное обеспечение hello</span><span class="sxs-lookup"><span data-stu-id="8d063-328">INSTALL hello NECESSARY SOFTWARE</span></span>
#### <a name="step-1-upload-tarballs"></a><span data-ttu-id="8d063-329">Шаг 1. Передача архивов в формате TAR</span><span class="sxs-lookup"><span data-stu-id="8d063-329">STEP 1: Upload tarballs</span></span>
<span data-ttu-id="8d063-330">С помощью scp или pscp, hello копирования ранее загруженные программного обеспечения слишком ~ / directory загрузки с помощью hello следующий формат команды:</span><span class="sxs-lookup"><span data-stu-id="8d063-330">Using scp or pscp, copy hello previously downloaded software too~/downloads directory using hello following command format:</span></span>

##### <a name="pscp-server-jre-8u5-linux-x64targz-localadminhk-cas-templatecloudappnethomelocaladmindownloadsserver-jre-8u5-linux-x64targz"></a><span data-ttu-id="8d063-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span><span class="sxs-lookup"><span data-stu-id="8d063-331">pscp server-jre-8u5-linux-x64.tar.gz localadmin@hk-cas-template.cloudapp.net:/home/localadmin/downloads/server-jre-8u5-linux-x64.tar.gz</span></span>
<span data-ttu-id="8d063-332">Повторите hello выше команду для JRE также и для hello Cassandra bits.</span><span class="sxs-lookup"><span data-stu-id="8d063-332">Repeat hello above command for JRE as well as for hello Cassandra bits.</span></span>

#### <a name="step-2-prepare-hello-directory-structure-and-extract-hello-archives"></a><span data-ttu-id="8d063-333">Шаг 2: Подготовка hello структуру каталогов и извлекать архивы hello</span><span class="sxs-lookup"><span data-stu-id="8d063-333">STEP 2: Prepare hello directory structure and extract hello archives</span></span>
<span data-ttu-id="8d063-334">Вход в hello виртуальных Машин и создать структуру каталогов для hello и извлечь программного обеспечения как суперпользователя, с помощью скрипта bash hello ниже:</span><span class="sxs-lookup"><span data-stu-id="8d063-334">Log into hello VM and create hello directory structure and extract software as a super user using hello bash script below:</span></span>

    #!/bin/bash
    CASS_INSTALL_DIR="/opt/cassandra"
    JRE_INSTALL_DIR="/opt/java"
    CASS_DATA_DIR="/var/lib/cassandra"
    CASS_LOG_DIR="/var/log/cassandra"
    DOWNLOADS_DIR="~/downloads"
    JRE_TARBALL="server-jre-8u5-linux-x64.tar.gz"
    CASS_TARBALL="apache-cassandra-2.0.8-bin.tar.gz"
    SVC_USER="localadmin"

    RESET_ERROR=1
    MKDIR_ERROR=2

    reset_installation ()
    {
       rm -rf $CASS_INSTALL_DIR 2> /dev/null
       rm -rf $JRE_INSTALL_DIR 2> /dev/null
       rm -rf $CASS_DATA_DIR 2> /dev/null
       rm -rf $CASS_LOG_DIR 2> /dev/null
    }
    make_dir ()
    {
       if [ -z "$1" ]
       then
          echo "make_dir: invalid directory name"
          exit $MKDIR_ERROR
       fi

       if [ -d "$1" ]
       then
          echo "make_dir: directory already exists"
          exit $MKDIR_ERROR
       fi

       mkdir $1 2>/dev/null
       if [ $? != 0 ]
       then
          echo "directory creation failed"
          exit $MKDIR_ERROR
       fi
    }

    unzip()
    {
       if [ $# == 2 ]
       then
          tar xzf $1 -C $2
       else
          echo "archive error"
       fi

    }

    if [ -n "$1" ]
    then
       SVC_USER=$1
    fi

    reset_installation
    make_dir $CASS_INSTALL_DIR
    make_dir $JRE_INSTALL_DIR
    make_dir $CASS_DATA_DIR
    make_dir $CASS_LOG_DIR

    #unzip JRE and Cassandra
    unzip $HOME/downloads/$JRE_TARBALL $JRE_INSTALL_DIR
    unzip $HOME/downloads/$CASS_TARBALL $CASS_INSTALL_DIR

    #Change hello ownership toohello service credentials

    chown -R $SVC_USER:$GROUP $CASS_DATA_DIR
    chown -R $SVC_USER:$GROUP $CASS_LOG_DIR
    echo "edit /etc/profile tooadd JRE toohello PATH"
    echo "installation is complete"


<span data-ttu-id="8d063-335">При вставке этот скрипт в окно vim убедитесь, что tooremove hello каретки возвращаемого ("\r») с помощью hello следующую команду:</span><span class="sxs-lookup"><span data-stu-id="8d063-335">If you paste this script into vim window, make sure tooremove hello carriage return (‘\r”) using hello following command:</span></span>

    tr -d '\r' <infile.sh >outfile.sh

#### <a name="step-3-edit-etcprofile"></a><span data-ttu-id="8d063-336">Шаг 3. Изменение etc/profile</span><span class="sxs-lookup"><span data-stu-id="8d063-336">Step 3: Edit etc/profile</span></span>
<span data-ttu-id="8d063-337">Добавьте следующие hello в конце hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-337">Append hello following at hello end:</span></span>

    JAVA_HOME=/opt/java/jdk1.8.0_05
    CASS_HOME= /opt/cassandra/apache-cassandra-2.0.8
    PATH=$PATH:$HOME/bin:$JAVA_HOME/bin:$CASS_HOME/bin
    export JAVA_HOME
    export CASS_HOME
    export PATH

#### <a name="step-4-install-jna-for-production-systems"></a><span data-ttu-id="8d063-338">Шаг 4. Установка JNA для производственных систем</span><span class="sxs-lookup"><span data-stu-id="8d063-338">Step 4: Install JNA for production systems</span></span>
<span data-ttu-id="8d063-339">Используйте hello следующая команда последовательности: следующая hello команда установки jna-3.2.7.jar и too/usr/share.java jna платформы 3.2.7.jar каталог sudo apt-get установит libjna java</span><span class="sxs-lookup"><span data-stu-id="8d063-339">Use hello following command sequence: hello following command will install jna-3.2.7.jar and jna-platform-3.2.7.jar too/usr/share.java directory sudo apt-get install libjna-java</span></span>

<span data-ttu-id="8d063-340">Создайте символические ссылки в каталоге $CASS_HOME/lib, чтобы сценарий запуска Cassandra смог найти эти JAR-файлы.</span><span class="sxs-lookup"><span data-stu-id="8d063-340">Create symbolic links in $CASS_HOME/lib directory so that Cassandra startup script can find these jars:</span></span>

    ln -s /usr/share/java/jna-3.2.7.jar $CASS_HOME/lib/jna.jar

    ln -s /usr/share/java/jna-platform-3.2.7.jar $CASS_HOME/lib/jna-platform.jar

#### <a name="step-5-configure-cassandrayaml"></a><span data-ttu-id="8d063-341">Шаг 5. Настройка cassandra.yaml</span><span class="sxs-lookup"><span data-stu-id="8d063-341">Step 5: Configure cassandra.yaml</span></span>
<span data-ttu-id="8d063-342">Измените cassandra.yaml на каждой виртуальной Машины tooreflect настройки всеми виртуальными машинами hello [мы будет настраивать это во время реальное время подготовки hello]:</span><span class="sxs-lookup"><span data-stu-id="8d063-342">Edit cassandra.yaml on each VM tooreflect configuration needed by all hello virtual machines [we will tweak this during hello actual provisioning]:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-343">Имя поля</span><span class="sxs-lookup"><span data-stu-id="8d063-343">Field Name</span></span>   </th><th> <span data-ttu-id="8d063-344">Значение</span><span class="sxs-lookup"><span data-stu-id="8d063-344">Value</span></span>  </th><th>    <span data-ttu-id="8d063-345">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-345">Remarks</span></span> </th></tr>
<tr><td><span data-ttu-id="8d063-346">cluster_name</span><span class="sxs-lookup"><span data-stu-id="8d063-346">cluster_name</span></span> </td><td>    <span data-ttu-id="8d063-347">"CustomerService"</span><span class="sxs-lookup"><span data-stu-id="8d063-347">“CustomerService”</span></span>    </td><td> <span data-ttu-id="8d063-348">Используйте имя hello, которое отражает развертывания</span><span class="sxs-lookup"><span data-stu-id="8d063-348">Use hello name that reflects your deployment</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-349">listen_address</span><span class="sxs-lookup"><span data-stu-id="8d063-349">listen_address</span></span>    </td><td><span data-ttu-id="8d063-350">[Оставьте пустым.]</span><span class="sxs-lookup"><span data-stu-id="8d063-350">[leave it blank]</span></span>    </td><td> <span data-ttu-id="8d063-351">Удалите "localhost".</span><span class="sxs-lookup"><span data-stu-id="8d063-351">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="8d063-352">rpc_addres</span><span class="sxs-lookup"><span data-stu-id="8d063-352">rpc_addres</span></span>   </td><td><span data-ttu-id="8d063-353">[Оставьте пустым.]</span><span class="sxs-lookup"><span data-stu-id="8d063-353">[leave it blank]</span></span>    </td><td> <span data-ttu-id="8d063-354">Удалите "localhost".</span><span class="sxs-lookup"><span data-stu-id="8d063-354">Delete “localhost”</span></span> </td></tr>
<tr><td><span data-ttu-id="8d063-355">начальные значения</span><span class="sxs-lookup"><span data-stu-id="8d063-355">seeds</span></span>    </td><td><span data-ttu-id="8d063-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span><span class="sxs-lookup"><span data-stu-id="8d063-356">"10.1.2.4, 10.1.2.6, 10.1.2.8"</span></span>    </td><td><span data-ttu-id="8d063-357">Список всех hello IP-адресов, которые обозначены как начальные значения.</span><span class="sxs-lookup"><span data-stu-id="8d063-357">List of  all hello IP addresses which are designated as seeds.</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-358">endpoint_snitch</span><span class="sxs-lookup"><span data-stu-id="8d063-358">endpoint_snitch</span></span> </td><td> <span data-ttu-id="8d063-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span><span class="sxs-lookup"><span data-stu-id="8d063-359">org.apache.cassandra.locator.GossipingPropertyFileSnitch</span></span> </td><td> <span data-ttu-id="8d063-360">Hello NetworkTopologyStrateg используется для выведения центра обработки данных hello и hello стойки hello виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="8d063-360">This is used by hello NetworkTopologyStrateg for inferring hello data center and hello rack of hello VM</span></span></td></tr>
</table>

#### <a name="step-6-capture-hello-vm-image"></a><span data-ttu-id="8d063-361">Шаг 6: Захват образа виртуальной Машины hello</span><span class="sxs-lookup"><span data-stu-id="8d063-361">Step 6: Capture hello VM image</span></span>
<span data-ttu-id="8d063-362">Войдите на виртуальную машину hello, с помощью имени узла hello (template.cloudapp.net hk ЦС) и hello SSH закрытый ключ, созданный ранее.</span><span class="sxs-lookup"><span data-stu-id="8d063-362">Log into hello virtual machine using hello hostname (hk-cas-template.cloudapp.net) and hello SSH private key previously created.</span></span> <span data-ttu-id="8d063-363">В разделе о том, как tooUse SSH с Linux в Azure для получения подробной информации по как toolog с помощью hello команды ssh или putty.exe.</span><span class="sxs-lookup"><span data-stu-id="8d063-363">See How tooUse SSH with Linux on Azure for details on how toolog in using hello command ssh or putty.exe.</span></span>

<span data-ttu-id="8d063-364">Выполните hello следующая последовательность действий toocapture hello образа:</span><span class="sxs-lookup"><span data-stu-id="8d063-364">Execute hello following sequence of actions toocapture hello image:</span></span>

##### <a name="1-deprovision"></a><span data-ttu-id="8d063-365">1. Отзыв</span><span class="sxs-lookup"><span data-stu-id="8d063-365">1. Deprovision</span></span>
<span data-ttu-id="8d063-366">Команда hello «sudo waagent — отзыва + пользователь «tooremove определенные сведения об экземпляре виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="8d063-366">Use hello command “sudo waagent –deprovision+user” tooremove Virtual Machine instance specific information.</span></span> <span data-ttu-id="8d063-367">В разделе для [как tooCapture виртуальной машины Linux](capture-image.md) tooUse как шаблон более подробные сведения на запись образа hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-367">See for [How tooCapture a Linux Virtual Machine](capture-image.md) tooUse as a Template more details on hello image capture process.</span></span>

##### <a name="2-shutdown-hello-vm"></a><span data-ttu-id="8d063-368">2: hello завершение работы виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="8d063-368">2: Shutdown hello VM</span></span>
<span data-ttu-id="8d063-369">Убедитесь, что выделен этой виртуальной машине hello и щелкните ссылку SHUTDOWN hello из hello нижней панели команд.</span><span class="sxs-lookup"><span data-stu-id="8d063-369">Make sure that hello virtual machine is highlighted and click hello SHUTDOWN link from hello bottom command bar.</span></span>

##### <a name="3-capture-hello-image"></a><span data-ttu-id="8d063-370">3: hello записи (рисунок)</span><span class="sxs-lookup"><span data-stu-id="8d063-370">3: Capture hello image</span></span>
<span data-ttu-id="8d063-371">Убедитесь, что выделен этой виртуальной машине hello и щелкните ссылку ОТСЛЕЖИВАНИЯ hello из hello нижней панели команд.</span><span class="sxs-lookup"><span data-stu-id="8d063-371">Make sure that hello virtual machine is highlighted and click hello CAPTURE link from hello bottom command bar.</span></span> <span data-ttu-id="8d063-372">В следующий экран приветствия присвойте имя ОБРАЗА (например hk-cas-2-08-ub-14-04-2014071), соответствующие описание ИЗОБРАЖЕНИЯ и щелкните процесс ОТСЛЕЖИВАНИЯ hello toofinish пометить hello «проверка».</span><span class="sxs-lookup"><span data-stu-id="8d063-372">In hello next screen, give an IMAGE NAME (e.g. hk-cas-2-08-ub-14-04-2014071), appropriate IMAGE DESCRIPTION, and click hello “check” mark toofinish hello CAPTURE process.</span></span>

<span data-ttu-id="8d063-373">Это займет несколько секунд и hello изображения должен быть доступен в разделе Мои ОБРАЗЫ из коллекции образов hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-373">This will take a few seconds and hello image should be available in MY IMAGES section of hello image gallery.</span></span> <span data-ttu-id="8d063-374">Hello исходной виртуальной Машины будут автоматически удалены после hello успешно образа.</span><span class="sxs-lookup"><span data-stu-id="8d063-374">hello source VM will be automatically deleted after hello image is successfully captured.</span></span> 

## <a name="single-region-deployment-process"></a><span data-ttu-id="8d063-375">Процесс развертывания в одном регионе</span><span class="sxs-lookup"><span data-stu-id="8d063-375">Single Region Deployment Process</span></span>
<span data-ttu-id="8d063-376">**Шаг 1: Создание виртуальной сети hello** войти hello портал Azure и создание виртуальной сети (классической) с атрибутами hello показано в следующей таблице hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-376">**Step 1: Create hello Virtual Network** Log into hello Azure portal and create a virtual network (classic) with hello attributes shown in hello following table.</span></span> <span data-ttu-id="8d063-377">В разделе [Создание виртуальной сети (классические) с помощью портала Azure hello](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) более подробное пошаговое описание процесса hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-377">See [Create a virtual network (classic) using hello Azure portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="8d063-378">Имя атрибута виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="8d063-378">VM Attribute Name</span></span></th><th><span data-ttu-id="8d063-379">Значение</span><span class="sxs-lookup"><span data-stu-id="8d063-379">Value</span></span></th><th><span data-ttu-id="8d063-380">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-380">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-381">Имя</span><span class="sxs-lookup"><span data-stu-id="8d063-381">Name</span></span></td><td><span data-ttu-id="8d063-382">vnet-cass-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-382">vnet-cass-west-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="8d063-383">Регион</span><span class="sxs-lookup"><span data-stu-id="8d063-383">Region</span></span></td><td><span data-ttu-id="8d063-384">Запад США</span><span class="sxs-lookup"><span data-stu-id="8d063-384">West US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="8d063-385">DNS-серверы</span><span class="sxs-lookup"><span data-stu-id="8d063-385">DNS Servers</span></span></td><td><span data-ttu-id="8d063-386">None</span><span class="sxs-lookup"><span data-stu-id="8d063-386">None</span></span></td><td><span data-ttu-id="8d063-387">Пропустите этот атрибут, поскольку мы не используем DNS-сервер</span><span class="sxs-lookup"><span data-stu-id="8d063-387">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-388">Пространство адресов</span><span class="sxs-lookup"><span data-stu-id="8d063-388">Address Space</span></span></td><td><span data-ttu-id="8d063-389">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="8d063-389">10.1.0.0/16</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="8d063-390">Начальный IP-адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-390">Starting IP</span></span></td><td><span data-ttu-id="8d063-391">10.1.0.0</span><span class="sxs-lookup"><span data-stu-id="8d063-391">10.1.0.0</span></span></td><td></td></tr>    
<tr><td><span data-ttu-id="8d063-392">CIDR</span><span class="sxs-lookup"><span data-stu-id="8d063-392">CIDR</span></span> </td><td><span data-ttu-id="8d063-393">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="8d063-393">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="8d063-394">Добавьте следующие подсетей hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-394">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-395">Имя</span><span class="sxs-lookup"><span data-stu-id="8d063-395">Name</span></span></th><th><span data-ttu-id="8d063-396">Начальный IP-адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-396">Starting IP</span></span></th><th><span data-ttu-id="8d063-397">CIDR</span><span class="sxs-lookup"><span data-stu-id="8d063-397">CIDR</span></span></th><th><span data-ttu-id="8d063-398">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-398">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-399">web</span><span class="sxs-lookup"><span data-stu-id="8d063-399">web</span></span></td><td><span data-ttu-id="8d063-400">10.1.1.0</span><span class="sxs-lookup"><span data-stu-id="8d063-400">10.1.1.0</span></span></td><td><span data-ttu-id="8d063-401">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="8d063-401">/24 (251)</span></span></td><td><span data-ttu-id="8d063-402">Подсеть для hello веб-фермы</span><span class="sxs-lookup"><span data-stu-id="8d063-402">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-403">data</span><span class="sxs-lookup"><span data-stu-id="8d063-403">data</span></span></td><td><span data-ttu-id="8d063-404">10.1.2.0</span><span class="sxs-lookup"><span data-stu-id="8d063-404">10.1.2.0</span></span></td><td><span data-ttu-id="8d063-405">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="8d063-405">/24 (251)</span></span></td><td><span data-ttu-id="8d063-406">Подсети для узлов hello базы данных</span><span class="sxs-lookup"><span data-stu-id="8d063-406">Subnet for hello database nodes</span></span></td></tr>
</table>

<span data-ttu-id="8d063-407">Данные и Web подсети могут быть защищены через сетевые группы безопасности покрытия hello, из которых выходит за рамки данной статьи.</span><span class="sxs-lookup"><span data-stu-id="8d063-407">Data and Web subnets can be protected through network security groups hello coverage of which is out of scope for this article.</span></span>  

<span data-ttu-id="8d063-408">**Шаг 2: Подготовка виртуальных машин** с помощью hello образ, созданный ранее, она будет создана hello следующих виртуальных машин в облаке hello server» hk-c-svc запад» и привязать toohello подсетей, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="8d063-408">**Step 2: Provision Virtual Machines** Using hello image created previously, we will create hello following virtual machines in hello cloud server “hk-c-svc-west” and bind them toohello respective subnets as shown below:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-409">Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="8d063-409">Machine Name</span></span>    </th><th><span data-ttu-id="8d063-410">Подсеть</span><span class="sxs-lookup"><span data-stu-id="8d063-410">Subnet</span></span>    </th><th><span data-ttu-id="8d063-411">IP-адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-411">IP Address</span></span>    </th><th><span data-ttu-id="8d063-412">группа доступности;</span><span class="sxs-lookup"><span data-stu-id="8d063-412">Availability set</span></span></th><th><span data-ttu-id="8d063-413">Контроллер домена/стойка</span><span class="sxs-lookup"><span data-stu-id="8d063-413">DC/Rack</span></span></th><th><span data-ttu-id="8d063-414">Начальное значение?</span><span class="sxs-lookup"><span data-stu-id="8d063-414">Seed?</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-415">hk-c1-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-415">hk-c1-west-us</span></span>    </td><td><span data-ttu-id="8d063-416">data</span><span class="sxs-lookup"><span data-stu-id="8d063-416">data</span></span>    </td><td><span data-ttu-id="8d063-417">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="8d063-417">10.1.2.4</span></span>    </td><td><span data-ttu-id="8d063-418">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-418">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="8d063-419">dc =WESTUS rack =rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-419">dc =WESTUS rack =rack1</span></span> </td><td><span data-ttu-id="8d063-420">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-420">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-421">hk-c2-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-421">hk-c2-west-us</span></span>    </td><td><span data-ttu-id="8d063-422">data</span><span class="sxs-lookup"><span data-stu-id="8d063-422">data</span></span>    </td><td><span data-ttu-id="8d063-423">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="8d063-423">10.1.2.5</span></span>    </td><td><span data-ttu-id="8d063-424">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-424">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="8d063-425">dc =WESTUS rack =rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-425">dc =WESTUS rack =rack1</span></span>    </td><td><span data-ttu-id="8d063-426">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-426">No</span></span> </td></tr>
<tr><td><span data-ttu-id="8d063-427">hk-c3-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-427">hk-c3-west-us</span></span>    </td><td><span data-ttu-id="8d063-428">data</span><span class="sxs-lookup"><span data-stu-id="8d063-428">data</span></span>    </td><td><span data-ttu-id="8d063-429">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="8d063-429">10.1.2.6</span></span>    </td><td><span data-ttu-id="8d063-430">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-430">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="8d063-431">dc =WESTUS rack =rack2</span><span class="sxs-lookup"><span data-stu-id="8d063-431">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="8d063-432">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-432">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-433">hk-c4-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-433">hk-c4-west-us</span></span>    </td><td><span data-ttu-id="8d063-434">data</span><span class="sxs-lookup"><span data-stu-id="8d063-434">data</span></span>    </td><td><span data-ttu-id="8d063-435">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="8d063-435">10.1.2.7</span></span>    </td><td><span data-ttu-id="8d063-436">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-436">hk-c-aset-1</span></span>    </td><td><span data-ttu-id="8d063-437">dc =WESTUS rack =rack2</span><span class="sxs-lookup"><span data-stu-id="8d063-437">dc =WESTUS rack =rack2</span></span>    </td><td><span data-ttu-id="8d063-438">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-438">No</span></span> </td></tr>
<tr><td><span data-ttu-id="8d063-439">hk-c5-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-439">hk-c5-west-us</span></span>    </td><td><span data-ttu-id="8d063-440">data</span><span class="sxs-lookup"><span data-stu-id="8d063-440">data</span></span>    </td><td><span data-ttu-id="8d063-441">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="8d063-441">10.1.2.8</span></span>    </td><td><span data-ttu-id="8d063-442">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-442">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="8d063-443">dc =WESTUS rack =rack3</span><span class="sxs-lookup"><span data-stu-id="8d063-443">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="8d063-444">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-444">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-445">hk-c6-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-445">hk-c6-west-us</span></span>    </td><td><span data-ttu-id="8d063-446">data</span><span class="sxs-lookup"><span data-stu-id="8d063-446">data</span></span>    </td><td><span data-ttu-id="8d063-447">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="8d063-447">10.1.2.9</span></span>    </td><td><span data-ttu-id="8d063-448">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-448">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="8d063-449">dc =WESTUS rack =rack3</span><span class="sxs-lookup"><span data-stu-id="8d063-449">dc =WESTUS rack =rack3</span></span>    </td><td><span data-ttu-id="8d063-450">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-450">No</span></span> </td></tr>
<tr><td><span data-ttu-id="8d063-451">hk-c7-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-451">hk-c7-west-us</span></span>    </td><td><span data-ttu-id="8d063-452">data</span><span class="sxs-lookup"><span data-stu-id="8d063-452">data</span></span>    </td><td><span data-ttu-id="8d063-453">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="8d063-453">10.1.2.10</span></span>    </td><td><span data-ttu-id="8d063-454">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-454">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="8d063-455">dc =WESTUS rack =rack4</span><span class="sxs-lookup"><span data-stu-id="8d063-455">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="8d063-456">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-456">Yes</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-457">hk-c8-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-457">hk-c8-west-us</span></span>    </td><td><span data-ttu-id="8d063-458">data</span><span class="sxs-lookup"><span data-stu-id="8d063-458">data</span></span>    </td><td><span data-ttu-id="8d063-459">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="8d063-459">10.1.2.11</span></span>    </td><td><span data-ttu-id="8d063-460">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-460">hk-c-aset-2</span></span>    </td><td><span data-ttu-id="8d063-461">dc =WESTUS rack =rack4</span><span class="sxs-lookup"><span data-stu-id="8d063-461">dc =WESTUS rack =rack4</span></span>    </td><td><span data-ttu-id="8d063-462">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-462">No</span></span> </td></tr>
<tr><td><span data-ttu-id="8d063-463">hk-w1-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-463">hk-w1-west-us</span></span>    </td><td><span data-ttu-id="8d063-464">web</span><span class="sxs-lookup"><span data-stu-id="8d063-464">web</span></span>    </td><td><span data-ttu-id="8d063-465">10.1.1.4</span><span class="sxs-lookup"><span data-stu-id="8d063-465">10.1.1.4</span></span>    </td><td><span data-ttu-id="8d063-466">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-466">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="8d063-467">Недоступно</span><span class="sxs-lookup"><span data-stu-id="8d063-467">N/A</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-468">hk-w2-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-468">hk-w2-west-us</span></span>    </td><td><span data-ttu-id="8d063-469">web</span><span class="sxs-lookup"><span data-stu-id="8d063-469">web</span></span>    </td><td><span data-ttu-id="8d063-470">10.1.1.5</span><span class="sxs-lookup"><span data-stu-id="8d063-470">10.1.1.5</span></span>    </td><td><span data-ttu-id="8d063-471">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-471">hk-w-aset-1</span></span>    </td><td>                       </td><td><span data-ttu-id="8d063-472">Недоступно</span><span class="sxs-lookup"><span data-stu-id="8d063-472">N/A</span></span></td></tr>
</table>

<span data-ttu-id="8d063-473">Создание hello выше список виртуальных машин требуются hello, следуйте процедуре:</span><span class="sxs-lookup"><span data-stu-id="8d063-473">Creation of hello above list of VMs requires hello following process:</span></span>

1. <span data-ttu-id="8d063-474">Создайте пустую облачную службу в определенном регионе.</span><span class="sxs-lookup"><span data-stu-id="8d063-474">Create an empty cloud service in a particular region</span></span>
2. <span data-ttu-id="8d063-475">Создайте виртуальную Машину из ранее записанного образа hello и присоединить ее toohello виртуальной сети, созданные ранее; Повторите это действие для всех виртуальных машин hello</span><span class="sxs-lookup"><span data-stu-id="8d063-475">Create a VM from hello previously captured image and attach it toohello virtual network created previously; repeat this for all hello VMs</span></span>
3. <span data-ttu-id="8d063-476">Добавьте облачную службу toohello балансировщик внутренней нагрузки и присоединить ее подсети toohello «данные»</span><span class="sxs-lookup"><span data-stu-id="8d063-476">Add an internal load balancer toohello cloud service and attach it toohello “data” subnet</span></span>
4. <span data-ttu-id="8d063-477">Для каждой виртуальной Машины, созданной ранее добавьте конечную точку балансировки нагрузки для трафика thrift через балансировки нагрузки подключен набор toohello ранее созданные внутренняя Подсистема балансировки нагрузки</span><span class="sxs-lookup"><span data-stu-id="8d063-477">For each VM created previously, add a load balanced endpoint for thrift traffic through a load balanced set connected toohello previously created internal load balancer</span></span>

<span data-ttu-id="8d063-478">Hello выше процесса могут быть выполнены с помощью классического портала Azure; использовать компьютер Windows (используйте ВМ в Azure, если у вас нет доступа tooa Windows машины), автоматически использовать все виртуальные машины 8 hello, следуя tooprovision сценария PowerShell.</span><span class="sxs-lookup"><span data-stu-id="8d063-478">hello above process can be executed using Azure classic portal; use a Windows machine (use a VM on Azure if you don't have access tooa Windows machine), use hello following PowerShell script tooprovision all 8 VMs automatically.</span></span>

<span data-ttu-id="8d063-479">**Список 1. Сценарий PowerShell для подготовки виртуальных машин**</span><span class="sxs-lookup"><span data-stu-id="8d063-479">**List 1: PowerShell script for provisioning virtual machines**</span></span>

        #Tested with Azure Powershell - November 2014
        #This powershell script deployes a number of VMs from an existing image inside an Azure region
        #Import your Azure subscription into hello current Powershell session before proceeding
        #hello process: 1. create Azure Storage account, 2. create virtual network, 3.create hello VM template, 2. crate a list of VMs from hello template

        #fundamental variables - change these tooreflect your subscription
        $country="us"; $region="west"; $vnetName = "your_vnet_name";$storageAccount="your_storage_account"
        $numVMs=8;$prefix = "hk-cass";$ilbIP="your_ilb_ip"
        $subscriptionName = "Azure_subscription_name";
        $vmSize="ExtraSmall"; $imageName="your_linux_image_name"
        $ilbName="ThriftInternalLB"; $thriftEndPoint="ThriftEndPoint"

        #generated variables
        $serviceName = "$prefix-svc-$region-$country"; $azureRegion = "$region $country"

        $vmNames = @()
        for ($i=0; $i -lt $numVMs; $i++)
        {
           $vmNames+=("$prefix-vm"+($i+1) + "-$region-$country" );
        }

        #select an Azure subscription already imported into Powershell session
        Select-AzureSubscription -SubscriptionName $subscriptionName -Current
        Set-AzureSubscription -SubscriptionName $subscriptionName -CurrentStorageAccountName $storageAccount

        #create an empty cloud service
        New-AzureService -ServiceName $serviceName -Label "hkcass$region" -Location $azureRegion
        Write-Host "Created $serviceName"

        $VMList= @()   # stores hello list of azure vm configuration objects
        #create hello list of VMs
        foreach($vmName in $vmNames)
        {
           $VMList += New-AzureVMConfig -Name $vmName -InstanceSize ExtraSmall -ImageName $imageName |
           Add-AzureProvisioningConfig -Linux -LinuxUser "localadmin" -Password "Local123" |
           Set-AzureSubnet "data"
        }

        New-AzureVM -ServiceName $serviceName -VNetName $vnetName -VMs $VMList

        #Create internal load balancer
        Add-AzureInternalLoadBalancer -ServiceName $serviceName -InternalLoadBalancerName $ilbName -SubnetName "data" -StaticVNetIPAddress "$ilbIP"
        Write-Host "Created $ilbName"
        #Add add hello thrift endpoint toohello internal load balancer for all hello VMs
        foreach($vmName in $vmNames)
        {
            Get-AzureVM -ServiceName $serviceName -Name $vmName |
                Add-AzureEndpoint -Name $thriftEndPoint -LBSetName "ThriftLBSet" -Protocol tcp -LocalPort 9160 -PublicPort 9160 -ProbePort 9160 -ProbeProtocol tcp -ProbeIntervalInSeconds 10 -InternalLoadBalancerName $ilbName |
                Update-AzureVM

            Write-Host "created $vmName"     
        }

<span data-ttu-id="8d063-480">**Шаг 3. Настройка Cassandra на каждой виртуальной машине**</span><span class="sxs-lookup"><span data-stu-id="8d063-480">**Step 3: Configure Cassandra on each VM**</span></span>

<span data-ttu-id="8d063-481">Вход в hello виртуальной Машины и выполнить hello следующие:</span><span class="sxs-lookup"><span data-stu-id="8d063-481">Log into hello VM and perform hello following:</span></span>

* <span data-ttu-id="8d063-482">Изменение $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello центра и стойку свойств данных:</span><span class="sxs-lookup"><span data-stu-id="8d063-482">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties:</span></span>
  
       dc =EASTUS, rack =rack1
* <span data-ttu-id="8d063-483">Изменение узлов cassandra.yaml tooconfigure начальное значение, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="8d063-483">Edit cassandra.yaml tooconfigure seed nodes as below:</span></span>
  
       Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10"

<span data-ttu-id="8d063-484">**Шаг 4: Запуск виртуальных машин hello и проверки кластера hello**</span><span class="sxs-lookup"><span data-stu-id="8d063-484">**Step 4: Start hello VMs and test hello cluster**</span></span>

<span data-ttu-id="8d063-485">Войти в одном из узлов hello (например hk-c1-Запад США) и выполнения hello следующая команда toosee hello состояние hello кластера:</span><span class="sxs-lookup"><span data-stu-id="8d063-485">Log into one of hello nodes (e.g. hk-c1-west-us) and run hello following command toosee hello status of hello cluster:</span></span>

       nodetool –h 10.1.2.4 –p 7199 status

<span data-ttu-id="8d063-486">Вы должны увидеть hello отображения аналогичные toohello один ниже 8 узлов кластера.</span><span class="sxs-lookup"><span data-stu-id="8d063-486">You should see hello display similar toohello one below for an 8-node cluster:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-487">Состояние</span><span class="sxs-lookup"><span data-stu-id="8d063-487">Status</span></span></th><th><span data-ttu-id="8d063-488">Адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-488">Address</span></span>    </th><th><span data-ttu-id="8d063-489">загрузить</span><span class="sxs-lookup"><span data-stu-id="8d063-489">Load</span></span>    </th><th><span data-ttu-id="8d063-490">Маркеры</span><span class="sxs-lookup"><span data-stu-id="8d063-490">Tokens</span></span>    </th><th><span data-ttu-id="8d063-491">Владение</span><span class="sxs-lookup"><span data-stu-id="8d063-491">Owns</span></span> </th><th><span data-ttu-id="8d063-492">Идентификатор узла</span><span class="sxs-lookup"><span data-stu-id="8d063-492">Host ID</span></span>    </th><th><span data-ttu-id="8d063-493">Стойка</span><span class="sxs-lookup"><span data-stu-id="8d063-493">Rack</span></span></th></tr>
<tr><th><span data-ttu-id="8d063-494">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-494">UN</span></span>    </td><td><span data-ttu-id="8d063-495">10.1.2.4</span><span class="sxs-lookup"><span data-stu-id="8d063-495">10.1.2.4</span></span>     </td><td><span data-ttu-id="8d063-496">87,81 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-496">87.81 KB</span></span>    </td><td><span data-ttu-id="8d063-497">256</span><span class="sxs-lookup"><span data-stu-id="8d063-497">256</span></span>    </td><td><span data-ttu-id="8d063-498">38,0 %</span><span class="sxs-lookup"><span data-stu-id="8d063-498">38.0%</span></span>    </td><td><span data-ttu-id="8d063-499">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-499">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-500">rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-500">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-501">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-501">UN</span></span>    </td><td><span data-ttu-id="8d063-502">10.1.2.5</span><span class="sxs-lookup"><span data-stu-id="8d063-502">10.1.2.5</span></span>     </td><td><span data-ttu-id="8d063-503">41,08 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-503">41.08 KB</span></span>    </td><td><span data-ttu-id="8d063-504">256</span><span class="sxs-lookup"><span data-stu-id="8d063-504">256</span></span>    </td><td><span data-ttu-id="8d063-505">68,9 %</span><span class="sxs-lookup"><span data-stu-id="8d063-505">68.9%</span></span>    </td><td><span data-ttu-id="8d063-506">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-506">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-507">rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-507">rack1</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-508">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-508">UN</span></span>    </td><td><span data-ttu-id="8d063-509">10.1.2.6</span><span class="sxs-lookup"><span data-stu-id="8d063-509">10.1.2.6</span></span>     </td><td><span data-ttu-id="8d063-510">55,29 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-510">55.29 KB</span></span>    </td><td><span data-ttu-id="8d063-511">256</span><span class="sxs-lookup"><span data-stu-id="8d063-511">256</span></span>    </td><td><span data-ttu-id="8d063-512">68,8 %</span><span class="sxs-lookup"><span data-stu-id="8d063-512">68.8%</span></span>    </td><td><span data-ttu-id="8d063-513">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-513">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-514">rack2</span><span class="sxs-lookup"><span data-stu-id="8d063-514">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-515">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-515">UN</span></span>    </td><td><span data-ttu-id="8d063-516">10.1.2.7</span><span class="sxs-lookup"><span data-stu-id="8d063-516">10.1.2.7</span></span>     </td><td><span data-ttu-id="8d063-517">55,29 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-517">55.29 KB</span></span>    </td><td><span data-ttu-id="8d063-518">256</span><span class="sxs-lookup"><span data-stu-id="8d063-518">256</span></span>    </td><td><span data-ttu-id="8d063-519">68,8 %</span><span class="sxs-lookup"><span data-stu-id="8d063-519">68.8%</span></span>    </td><td><span data-ttu-id="8d063-520">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-520">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-521">rack2</span><span class="sxs-lookup"><span data-stu-id="8d063-521">rack2</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-522">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-522">UN</span></span>    </td><td><span data-ttu-id="8d063-523">10.1.2.8</span><span class="sxs-lookup"><span data-stu-id="8d063-523">10.1.2.8</span></span>     </td><td><span data-ttu-id="8d063-524">55,29 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-524">55.29 KB</span></span>    </td><td><span data-ttu-id="8d063-525">256</span><span class="sxs-lookup"><span data-stu-id="8d063-525">256</span></span>    </td><td><span data-ttu-id="8d063-526">68,8 %</span><span class="sxs-lookup"><span data-stu-id="8d063-526">68.8%</span></span>    </td><td><span data-ttu-id="8d063-527">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-527">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-528">rack3</span><span class="sxs-lookup"><span data-stu-id="8d063-528">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-529">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-529">UN</span></span>    </td><td><span data-ttu-id="8d063-530">10.1.2.9</span><span class="sxs-lookup"><span data-stu-id="8d063-530">10.1.2.9</span></span>     </td><td><span data-ttu-id="8d063-531">55,29 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-531">55.29 KB</span></span>    </td><td><span data-ttu-id="8d063-532">256</span><span class="sxs-lookup"><span data-stu-id="8d063-532">256</span></span>    </td><td><span data-ttu-id="8d063-533">68,8 %</span><span class="sxs-lookup"><span data-stu-id="8d063-533">68.8%</span></span>    </td><td><span data-ttu-id="8d063-534">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-534">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-535">rack3</span><span class="sxs-lookup"><span data-stu-id="8d063-535">rack3</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-536">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-536">UN</span></span>    </td><td><span data-ttu-id="8d063-537">10.1.2.10</span><span class="sxs-lookup"><span data-stu-id="8d063-537">10.1.2.10</span></span>     </td><td><span data-ttu-id="8d063-538">55,29 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-538">55.29 KB</span></span>    </td><td><span data-ttu-id="8d063-539">256</span><span class="sxs-lookup"><span data-stu-id="8d063-539">256</span></span>    </td><td><span data-ttu-id="8d063-540">68,8 %</span><span class="sxs-lookup"><span data-stu-id="8d063-540">68.8%</span></span>    </td><td><span data-ttu-id="8d063-541">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-541">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-542">rack4</span><span class="sxs-lookup"><span data-stu-id="8d063-542">rack4</span></span></td></tr>
<tr><th><span data-ttu-id="8d063-543">UN</span><span class="sxs-lookup"><span data-stu-id="8d063-543">UN</span></span>    </td><td><span data-ttu-id="8d063-544">10.1.2.11</span><span class="sxs-lookup"><span data-stu-id="8d063-544">10.1.2.11</span></span>     </td><td><span data-ttu-id="8d063-545">55,29 КБ</span><span class="sxs-lookup"><span data-stu-id="8d063-545">55.29 KB</span></span>    </td><td><span data-ttu-id="8d063-546">256</span><span class="sxs-lookup"><span data-stu-id="8d063-546">256</span></span>    </td><td><span data-ttu-id="8d063-547">68,8 %</span><span class="sxs-lookup"><span data-stu-id="8d063-547">68.8%</span></span>    </td><td><span data-ttu-id="8d063-548">GUID (удален)</span><span class="sxs-lookup"><span data-stu-id="8d063-548">Guid (removed)</span></span></td><td><span data-ttu-id="8d063-549">rack4</span><span class="sxs-lookup"><span data-stu-id="8d063-549">rack4</span></span></td></tr>
</table>

## <a name="test-hello-single-region-cluster"></a><span data-ttu-id="8d063-550">Тест hello одного региона кластера</span><span class="sxs-lookup"><span data-stu-id="8d063-550">Test hello Single Region Cluster</span></span>
<span data-ttu-id="8d063-551">Используйте следующие шаги tootest hello кластера hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-551">Use hello following steps tootest hello cluster:</span></span>

1. <span data-ttu-id="8d063-552">С помощью командлета Get-AzureInternalLoadbalancer команды Powershell hello, получите IP-адрес hello hello внутренней подсистемы балансировки нагрузки (например)  10.1.2.101).</span><span class="sxs-lookup"><span data-stu-id="8d063-552">Using hello Powershell command Get-AzureInternalLoadbalancer commandlet, obtain hello IP address of hello internal load balancer (e.g.  10.1.2.101).</span></span> <span data-ttu-id="8d063-553">Ниже приведен синтаксис Hello команды hello: Get-AzureLoadbalancer – ServiceName «hk-c-svc-west-us» [отображаются hello hello внутренней подсистемы балансировки нагрузки вместе с его IP-адрес]</span><span class="sxs-lookup"><span data-stu-id="8d063-553">hello syntax of hello command is shown below: Get-AzureLoadbalancer –ServiceName "hk-c-svc-west-us” [displays hello details of hello internal load balancer along with its IP address]</span></span>
2. <span data-ttu-id="8d063-554">Войти в веб-ферме hello виртуальной Машины (например hk-w1-Запад США) с помощью Putty или ssh</span><span class="sxs-lookup"><span data-stu-id="8d063-554">Log into hello web farm VM (e.g. hk-w1-west-us) using Putty or ssh</span></span>
3. <span data-ttu-id="8d063-555">Выполните команду $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="8d063-555">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
4. <span data-ttu-id="8d063-556">Используйте следующие команды tooverify CQL работе кластера hello hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-556">Use hello following CQL commands tooverify if hello cluster is working:</span></span>
   
     <span data-ttu-id="8d063-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span><span class="sxs-lookup"><span data-stu-id="8d063-557">CREATE KEYSPACE customers_ks WITH REPLICATION = { 'class' : 'SimpleStrategy', 'replication_factor' : 3 };   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');</span></span>
   
     <span data-ttu-id="8d063-558">SELECT * FROM Customers;</span><span class="sxs-lookup"><span data-stu-id="8d063-558">SELECT * FROM Customers;</span></span>

<span data-ttu-id="8d063-559">Вы увидите отображения как hello один ниже:</span><span class="sxs-lookup"><span data-stu-id="8d063-559">You should see a display like hello one below:</span></span>

<table>
  <tr><th> <span data-ttu-id="8d063-560">customer_id</span><span class="sxs-lookup"><span data-stu-id="8d063-560">customer_id</span></span> </th><th> <span data-ttu-id="8d063-561">firstname</span><span class="sxs-lookup"><span data-stu-id="8d063-561">firstname</span></span> </th><th> <span data-ttu-id="8d063-562">Lastname</span><span class="sxs-lookup"><span data-stu-id="8d063-562">lastname</span></span> </th></tr>
  <tr><td> <span data-ttu-id="8d063-563">1</span><span class="sxs-lookup"><span data-stu-id="8d063-563">1</span></span> </td><td> <span data-ttu-id="8d063-564">Артем</span><span class="sxs-lookup"><span data-stu-id="8d063-564">John</span></span> </td><td> <span data-ttu-id="8d063-565">Кузнецов</span><span class="sxs-lookup"><span data-stu-id="8d063-565">Doe</span></span> </td></tr>
  <tr><td> <span data-ttu-id="8d063-566">2</span><span class="sxs-lookup"><span data-stu-id="8d063-566">2</span></span> </td><td> <span data-ttu-id="8d063-567">Ольга</span><span class="sxs-lookup"><span data-stu-id="8d063-567">Jane</span></span> </td><td> <span data-ttu-id="8d063-568">Кузнецов</span><span class="sxs-lookup"><span data-stu-id="8d063-568">Doe</span></span> </td></tr>
</table>

<span data-ttu-id="8d063-569">Учтите, что пространство, hello ключей, созданного на шаге 4 используется SimpleStrategy с replication_factor 3.</span><span class="sxs-lookup"><span data-stu-id="8d063-569">Please note that hello keyspace created in step 4 uses SimpleStrategy with a  replication_factor of 3.</span></span> <span data-ttu-id="8d063-570">SimpleStrategy рекомендуется для развертываний с одним центром обработки данных, а NetworkTopologyStrategy — для развертываний с несколькими центрами.</span><span class="sxs-lookup"><span data-stu-id="8d063-570">SimpleStrategy is recommended for single data center deployments whereas NetworkTopologyStrategy for multi-data center deployments.</span></span> <span data-ttu-id="8d063-571">Значение параметра replication_factor, равное 3, обеспечивает отказоустойчивость узлов.</span><span class="sxs-lookup"><span data-stu-id="8d063-571">A replication_factor of 3 will give tolerance for node failures.</span></span>

## <span data-ttu-id="8d063-572"><a id="tworegion"> </a>Процесс развертывания в нескольких регионах</span><span class="sxs-lookup"><span data-stu-id="8d063-572"><a id="tworegion"> </a>Multi-Region Deployment Process</span></span>
<span data-ttu-id="8d063-573">Будет использовать развертывание в одном регионе hello завершения и повторите hello же процесс для установки второй области hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-573">Will leverage hello single region deployment completed and repeat hello same process for installing hello second region.</span></span> <span data-ttu-id="8d063-574">Hello ключевое различие между hello одной и нескольких области развертывания является hello установки туннеля VPN для обмена данными между области; Мы начинается с установки сети hello, подготовить виртуальные машины hello и настроить Cassandra.</span><span class="sxs-lookup"><span data-stu-id="8d063-574">hello key difference between hello single and multiple region deployment is hello VPN tunnel setup for inter-region communication; we will start with hello network installation, provision hello VMs and configure Cassandra.</span></span>

### <a name="step-1-create-hello-virtual-network-at-hello-2nd-region"></a><span data-ttu-id="8d063-575">Шаг 1: Создание hello виртуальной сети в hello второй области</span><span class="sxs-lookup"><span data-stu-id="8d063-575">Step 1: Create hello Virtual Network at hello 2nd Region</span></span>
<span data-ttu-id="8d063-576">Войдите на классический портал Azure hello и создайте виртуальную сеть с hello Показать атрибуты в таблице hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-576">Log into hello Azure classic portal and create a Virtual Network with hello attributes show in hello table.</span></span> <span data-ttu-id="8d063-577">В разделе [настройки виртуальной сети только в классический портал Azure hello](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) более подробное пошаговое описание процесса hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-577">See [Configure a Cloud-Only Virtual Network in hello Azure classic portal](../../../virtual-network/virtual-networks-create-vnet-classic-pportal.md) for detailed steps of hello process.</span></span>      

<table>
<tr><th><span data-ttu-id="8d063-578">Имя атрибута</span><span class="sxs-lookup"><span data-stu-id="8d063-578">Attribute Name</span></span>    </th><th><span data-ttu-id="8d063-579">Значение</span><span class="sxs-lookup"><span data-stu-id="8d063-579">Value</span></span>    </th><th><span data-ttu-id="8d063-580">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-580">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-581">Name (Имя)</span><span class="sxs-lookup"><span data-stu-id="8d063-581">Name</span></span>    </td><td><span data-ttu-id="8d063-582">vnet-cass-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-582">vnet-cass-east-us</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="8d063-583">Регион</span><span class="sxs-lookup"><span data-stu-id="8d063-583">Region</span></span>    </td><td><span data-ttu-id="8d063-584">Восток США</span><span class="sxs-lookup"><span data-stu-id="8d063-584">East US</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="8d063-585">DNS-серверы</span><span class="sxs-lookup"><span data-stu-id="8d063-585">DNS Servers</span></span>        </td><td></td><td><span data-ttu-id="8d063-586">Пропустите этот атрибут, поскольку мы не используем DNS-сервер</span><span class="sxs-lookup"><span data-stu-id="8d063-586">Ignore this as we are not using a DNS Server</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-587">Настройка VPN-подключения типа "точка-сеть"</span><span class="sxs-lookup"><span data-stu-id="8d063-587">Configure a point-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="8d063-588">Пропустите этот атрибут</span><span class="sxs-lookup"><span data-stu-id="8d063-588">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-589">"Настроить VPN типа "сеть-сеть"</span><span class="sxs-lookup"><span data-stu-id="8d063-589">Configure a site-to-site VPN</span></span></td><td></td><td>        <span data-ttu-id="8d063-590">Пропустите этот атрибут</span><span class="sxs-lookup"><span data-stu-id="8d063-590">Ignore this</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-591">Пространство адресов</span><span class="sxs-lookup"><span data-stu-id="8d063-591">Address Space</span></span>    </td><td><span data-ttu-id="8d063-592">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="8d063-592">10.2.0.0/16</span></span></td><td></td></tr>
<tr><td><span data-ttu-id="8d063-593">Начальный IP-адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-593">Starting IP</span></span>    </td><td><span data-ttu-id="8d063-594">10.2.0.0</span><span class="sxs-lookup"><span data-stu-id="8d063-594">10.2.0.0</span></span>    </td><td></td></tr>
<tr><td><span data-ttu-id="8d063-595">CIDR</span><span class="sxs-lookup"><span data-stu-id="8d063-595">CIDR</span></span>    </td><td><span data-ttu-id="8d063-596">/16 (65531)</span><span class="sxs-lookup"><span data-stu-id="8d063-596">/16 (65531)</span></span></td><td></td></tr>
</table>

<span data-ttu-id="8d063-597">Добавьте следующие подсетей hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-597">Add hello following subnets:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-598">Имя</span><span class="sxs-lookup"><span data-stu-id="8d063-598">Name</span></span>    </th><th><span data-ttu-id="8d063-599">Начальный IP-адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-599">Starting IP</span></span>    </th><th><span data-ttu-id="8d063-600">CIDR</span><span class="sxs-lookup"><span data-stu-id="8d063-600">CIDR</span></span>    </th><th><span data-ttu-id="8d063-601">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-601">Remarks</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-602">web</span><span class="sxs-lookup"><span data-stu-id="8d063-602">web</span></span>    </td><td><span data-ttu-id="8d063-603">10.2.1.0</span><span class="sxs-lookup"><span data-stu-id="8d063-603">10.2.1.0</span></span>    </td><td><span data-ttu-id="8d063-604">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="8d063-604">/24 (251)</span></span>    </td><td><span data-ttu-id="8d063-605">Подсеть для hello веб-фермы</span><span class="sxs-lookup"><span data-stu-id="8d063-605">Subnet for hello web farm</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-606">data</span><span class="sxs-lookup"><span data-stu-id="8d063-606">data</span></span>    </td><td><span data-ttu-id="8d063-607">10.2.2.0</span><span class="sxs-lookup"><span data-stu-id="8d063-607">10.2.2.0</span></span>    </td><td><span data-ttu-id="8d063-608">/24 (251)</span><span class="sxs-lookup"><span data-stu-id="8d063-608">/24 (251)</span></span>    </td><td><span data-ttu-id="8d063-609">Подсети для узлов hello базы данных</span><span class="sxs-lookup"><span data-stu-id="8d063-609">Subnet for hello database nodes</span></span></td></tr>
</table>


### <a name="step-2-create-local-networks"></a><span data-ttu-id="8d063-610">Шаг 2. Создание локальных сетей</span><span class="sxs-lookup"><span data-stu-id="8d063-610">Step 2: Create Local Networks</span></span>
<span data-ttu-id="8d063-611">В локальной сети в Azure виртуальные сети является адресное пространство прокси-сервера, которое сопоставляет tooa удаленного сайта, включая частное облако или другом регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="8d063-611">A Local Network in Azure virtual networking is a proxy address space that maps tooa remote site including a private cloud or another Azure region.</span></span> <span data-ttu-id="8d063-612">Это адресное пространство прокси-сервера — привязанного tooa удаленного шлюз для маршрутизации toohello сети прямо к сети назначения.</span><span class="sxs-lookup"><span data-stu-id="8d063-612">This proxy address space is bound tooa remote gateway for routing network toohello right networking destinations.</span></span> <span data-ttu-id="8d063-613">В разделе [настройки виртуальной сети tooVNet подключения](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) hello инструкции на установление подключения VNET-VNET.</span><span class="sxs-lookup"><span data-stu-id="8d063-613">See [Configure a VNet tooVNet Connection](../../../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) for hello instructions on establishing VNET-to-VNET connection.</span></span>

<span data-ttu-id="8d063-614">Создайте две локальные сети в hello, приведенные ниже сведения:</span><span class="sxs-lookup"><span data-stu-id="8d063-614">Create two local networks per hello following details:</span></span>

| <span data-ttu-id="8d063-615">Имя сети</span><span class="sxs-lookup"><span data-stu-id="8d063-615">Network Name</span></span> | <span data-ttu-id="8d063-616">Адрес VPN-шлюза</span><span class="sxs-lookup"><span data-stu-id="8d063-616">VPN Gateway Address</span></span> | <span data-ttu-id="8d063-617">Пространство адресов</span><span class="sxs-lookup"><span data-stu-id="8d063-617">Address Space</span></span> | <span data-ttu-id="8d063-618">Примечания</span><span class="sxs-lookup"><span data-stu-id="8d063-618">Remarks</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8d063-619">hk-lnet-map-to-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-619">hk-lnet-map-to-east-us</span></span> |<span data-ttu-id="8d063-620">23.1.1.1</span><span class="sxs-lookup"><span data-stu-id="8d063-620">23.1.1.1</span></span> |<span data-ttu-id="8d063-621">10.2.0.0/16</span><span class="sxs-lookup"><span data-stu-id="8d063-621">10.2.0.0/16</span></span> |<span data-ttu-id="8d063-622">При создании hello локальной сети предоставьте заполнитель адрес шлюза.</span><span class="sxs-lookup"><span data-stu-id="8d063-622">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="8d063-623">адрес шлюза реальные Hello заполняется в том случае, после создания шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-623">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="8d063-624">Убедитесь, что адресное пространство hello совпадает Здравствуйте соответствующей удаленной виртуальной сети; в этом случае hello виртуальная сеть создана в hello регионе Восток США.</span><span class="sxs-lookup"><span data-stu-id="8d063-624">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello East US region.</span></span> |
| <span data-ttu-id="8d063-625">hk-lnet-map-to-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-625">hk-lnet-map-to-west-us</span></span> |<span data-ttu-id="8d063-626">23.2.2.2</span><span class="sxs-lookup"><span data-stu-id="8d063-626">23.2.2.2</span></span> |<span data-ttu-id="8d063-627">10.1.0.0/16</span><span class="sxs-lookup"><span data-stu-id="8d063-627">10.1.0.0/16</span></span> |<span data-ttu-id="8d063-628">При создании hello локальной сети предоставьте заполнитель адрес шлюза.</span><span class="sxs-lookup"><span data-stu-id="8d063-628">While creating hello Local Network give a placeholder gateway address.</span></span> <span data-ttu-id="8d063-629">адрес шлюза реальные Hello заполняется в том случае, после создания шлюза hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-629">hello real gateway address is filled once hello gateway is created.</span></span> <span data-ttu-id="8d063-630">Убедитесь, что адресное пространство hello совпадает Здравствуйте соответствующей удаленной виртуальной сети; в этом случае hello виртуальная сеть создана в hello Запад США.</span><span class="sxs-lookup"><span data-stu-id="8d063-630">Make sure hello address space exactly matches hello respective remote VNET; in this case hello VNET created in hello West US region.</span></span> |

### <a name="step-3-map-local-network-toohello-respective-vnets"></a><span data-ttu-id="8d063-631">Шаг 3: Сопоставление «Local» сети toohello соответствующих виртуальных сетей</span><span class="sxs-lookup"><span data-stu-id="8d063-631">Step 3: Map “Local” network toohello respective VNETs</span></span>
<span data-ttu-id="8d063-632">Из hello классический портал Azure выберите каждой виртуальной сети, щелкните «Настроить», проверьте «Connect toohello локальной сети», а затем выберите hello локальных сетей на hello, приведенные ниже сведения:</span><span class="sxs-lookup"><span data-stu-id="8d063-632">From hello Azure classic portal, select each vnet, click “Configure”, check “Connect toohello local network”, and select hello Local Networks per hello following details:</span></span>

| <span data-ttu-id="8d063-633">Виртуальная сеть</span><span class="sxs-lookup"><span data-stu-id="8d063-633">Virtual Network</span></span> | <span data-ttu-id="8d063-634">Локальная сеть</span><span class="sxs-lookup"><span data-stu-id="8d063-634">Local Network</span></span> |
| --- | --- |
| <span data-ttu-id="8d063-635">hk-vnet-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-635">hk-vnet-west-us</span></span> |<span data-ttu-id="8d063-636">hk-lnet-map-to-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-636">hk-lnet-map-to-east-us</span></span> |
| <span data-ttu-id="8d063-637">hk-vnet-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-637">hk-vnet-east-us</span></span> |<span data-ttu-id="8d063-638">hk-lnet-map-to-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-638">hk-lnet-map-to-west-us</span></span> |

### <a name="step-4-create-gateways-on-vnet1-and-vnet2"></a><span data-ttu-id="8d063-639">Шаг 4. Создание шлюзов для сетей VNET1 и VNET2</span><span class="sxs-lookup"><span data-stu-id="8d063-639">Step 4: Create Gateways on VNET1 and VNET2</span></span>
<span data-ttu-id="8d063-640">С панели мониторинга hello обоих hello виртуальных сетей нажмите кнопку Создать ШЛЮЗ, который запустит процесс подготовки шлюза VPN hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-640">From hello dashboard of both hello virtual networks, click CREATE GATEWAY which will trigger hello VPN gateway provisioning process.</span></span> <span data-ttu-id="8d063-641">После нескольких минут hello мониторинга всех виртуальных сетей должны отображаться адрес hello фактическое шлюза.</span><span class="sxs-lookup"><span data-stu-id="8d063-641">After a few minutes hello dashboard of each virtual network should display hello actual gateway address.</span></span>

### <a name="step-5-update-local-networks-with-hello-respective-gateway-addresses"></a><span data-ttu-id="8d063-642">Шаг 5: Обновление «Local» сети с адресами соответствующих «шлюз» hello</span><span class="sxs-lookup"><span data-stu-id="8d063-642">Step 5: Update “Local” networks with hello respective “Gateway” addresses</span></span>
<span data-ttu-id="8d063-643">Изменение обоих hello локальных сетей tooreplace hello заполнитель шлюза IP-адрес с hello истинные IP-адреса hello просто подготовить шлюзы.</span><span class="sxs-lookup"><span data-stu-id="8d063-643">Edit both hello local networks tooreplace hello placeholder gateway IP address with hello real IP address of hello just provisioned gateways.</span></span> <span data-ttu-id="8d063-644">Используйте hello следующие сопоставления:</span><span class="sxs-lookup"><span data-stu-id="8d063-644">Use hello following mapping:</span></span>

<table>
<tr><th><span data-ttu-id="8d063-645">Локальная сеть</span><span class="sxs-lookup"><span data-stu-id="8d063-645">Local Network</span></span>    </th><th><span data-ttu-id="8d063-646">Шлюз виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="8d063-646">Virtual Network Gateway</span></span></th></tr>
<tr><td><span data-ttu-id="8d063-647">hk-lnet-map-to-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-647">hk-lnet-map-to-east-us</span></span> </td><td><span data-ttu-id="8d063-648">Шлюз сети hk-vnet-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-648">Gateway of hk-vnet-west-us</span></span></td></tr>
<tr><td><span data-ttu-id="8d063-649">hk-lnet-map-to-west-us</span><span class="sxs-lookup"><span data-stu-id="8d063-649">hk-lnet-map-to-west-us</span></span> </td><td><span data-ttu-id="8d063-650">Шлюз сети hk-vnet-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-650">Gateway of hk-vnet-east-us</span></span></td></tr>
</table>

### <a name="step-6-update-hello-shared-key"></a><span data-ttu-id="8d063-651">Шаг 6: Обновление общего ключа hello</span><span class="sxs-lookup"><span data-stu-id="8d063-651">Step 6: Update hello shared key</span></span>
<span data-ttu-id="8d063-652">Используйте hello следующий ключ IPSec hello tooupdate сценария Powershell каждого шлюза VPN [реализую hello использования ключа для обоих шлюзов hello]: Set-AzureVNetGatewayKey - VNetName hk-vnet-east-us - LocalNetworkSiteName hk-lnet-map-to-west-us - SharedKey D9E76BKK Набор AzureVNetGatewayKey - VNetName hk-vnet-west-us - LocalNetworkSiteName hk-lnet-map-to-east-us - SharedKey D9E76BKK</span><span class="sxs-lookup"><span data-stu-id="8d063-652">Use hello following Powershell script tooupdate hello IPSec key of each VPN gateway [use hello sake key for both hello gateways]: Set-AzureVNetGatewayKey -VNetName hk-vnet-east-us -LocalNetworkSiteName hk-lnet-map-to-west-us -SharedKey D9E76BKK Set-AzureVNetGatewayKey -VNetName hk-vnet-west-us -LocalNetworkSiteName hk-lnet-map-to-east-us -SharedKey D9E76BKK</span></span>

### <a name="step-7-establish-hello-vnet-to-vnet-connection"></a><span data-ttu-id="8d063-653">Шаг 7: Установите подключение hello виртуальной сети для виртуальной сети</span><span class="sxs-lookup"><span data-stu-id="8d063-653">Step 7: Establish hello VNET-to-VNET connection</span></span>
<span data-ttu-id="8d063-654">Hello классический портал Azure используя меню «Панель МОНИТОРИНГА» hello оба подключения шлюза к шлюзу hello tooestablish виртуальных сетей.</span><span class="sxs-lookup"><span data-stu-id="8d063-654">From hello Azure classic portal, use hello “DASHBOARD” menu of both hello virtual networks tooestablish gateway-to-gateway connection.</span></span> <span data-ttu-id="8d063-655">Используйте элементы меню «ПОДКЛЮЧИТЬСЯ» hello в hello нижней панели инструментов.</span><span class="sxs-lookup"><span data-stu-id="8d063-655">Use hello “CONNECT” menu items in hello bottom toolbar.</span></span> <span data-ttu-id="8d063-656">Через несколько минут мониторинга hello графически отображать сведения о подключении hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-656">After a few minutes hello dashboard should display hello connection details graphically.</span></span>

### <a name="step-8-create-hello-virtual-machines-in-region-2"></a><span data-ttu-id="8d063-657">Шаг 8: Создание виртуальных машин hello в регионе #2</span><span class="sxs-lookup"><span data-stu-id="8d063-657">Step 8: Create hello virtual machines in region #2</span></span>
<span data-ttu-id="8d063-658">Создайте образ Ubuntu hello, описанный в регионе #1 развертывания следующие hello же шагов или скопируйте hello образа виртуального жесткого диска файл toohello учетной записи хранилища Azure в регионе #2 и hello изображения.</span><span class="sxs-lookup"><span data-stu-id="8d063-658">Create hello Ubuntu image as described in region #1 deployment by following hello same steps or copy hello image VHD file toohello Azure storage account located in region #2 and create hello image.</span></span> <span data-ttu-id="8d063-659">Использовать это изображение и создать hello после списка виртуальных машин в новой облачной службы hk-c-svc-east-us:</span><span class="sxs-lookup"><span data-stu-id="8d063-659">Use this image and create hello following list of virtual machines into a new cloud service hk-c-svc-east-us:</span></span>

| <span data-ttu-id="8d063-660">Имя компьютера</span><span class="sxs-lookup"><span data-stu-id="8d063-660">Machine Name</span></span> | <span data-ttu-id="8d063-661">Подсеть</span><span class="sxs-lookup"><span data-stu-id="8d063-661">Subnet</span></span> | <span data-ttu-id="8d063-662">IP-адрес</span><span class="sxs-lookup"><span data-stu-id="8d063-662">IP Address</span></span> | <span data-ttu-id="8d063-663">группа доступности;</span><span class="sxs-lookup"><span data-stu-id="8d063-663">Availability set</span></span> | <span data-ttu-id="8d063-664">Контроллер домена/стойка</span><span class="sxs-lookup"><span data-stu-id="8d063-664">DC/Rack</span></span> | <span data-ttu-id="8d063-665">Начальное значение?</span><span class="sxs-lookup"><span data-stu-id="8d063-665">Seed?</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="8d063-666">hk-c1-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-666">hk-c1-east-us</span></span> |<span data-ttu-id="8d063-667">data</span><span class="sxs-lookup"><span data-stu-id="8d063-667">data</span></span> |<span data-ttu-id="8d063-668">10.2.2.4</span><span class="sxs-lookup"><span data-stu-id="8d063-668">10.2.2.4</span></span> |<span data-ttu-id="8d063-669">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-669">hk-c-aset-1</span></span> |<span data-ttu-id="8d063-670">dc =EASTUS rack =rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-670">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="8d063-671">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-671">Yes</span></span> |
| <span data-ttu-id="8d063-672">hk-c2-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-672">hk-c2-east-us</span></span> |<span data-ttu-id="8d063-673">data</span><span class="sxs-lookup"><span data-stu-id="8d063-673">data</span></span> |<span data-ttu-id="8d063-674">10.2.2.5</span><span class="sxs-lookup"><span data-stu-id="8d063-674">10.2.2.5</span></span> |<span data-ttu-id="8d063-675">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-675">hk-c-aset-1</span></span> |<span data-ttu-id="8d063-676">dc =EASTUS rack =rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-676">dc =EASTUS rack =rack1</span></span> |<span data-ttu-id="8d063-677">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-677">No</span></span> |
| <span data-ttu-id="8d063-678">hk-c3-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-678">hk-c3-east-us</span></span> |<span data-ttu-id="8d063-679">data</span><span class="sxs-lookup"><span data-stu-id="8d063-679">data</span></span> |<span data-ttu-id="8d063-680">10.2.2.6</span><span class="sxs-lookup"><span data-stu-id="8d063-680">10.2.2.6</span></span> |<span data-ttu-id="8d063-681">hk-c-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-681">hk-c-aset-1</span></span> |<span data-ttu-id="8d063-682">dc =EASTUS rack =rack2</span><span class="sxs-lookup"><span data-stu-id="8d063-682">dc =EASTUS rack =rack2</span></span> |<span data-ttu-id="8d063-683">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-683">Yes</span></span> |
| <span data-ttu-id="8d063-684">hk-c5-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-684">hk-c5-east-us</span></span> |<span data-ttu-id="8d063-685">data</span><span class="sxs-lookup"><span data-stu-id="8d063-685">data</span></span> |<span data-ttu-id="8d063-686">10.2.2.8</span><span class="sxs-lookup"><span data-stu-id="8d063-686">10.2.2.8</span></span> |<span data-ttu-id="8d063-687">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-687">hk-c-aset-2</span></span> |<span data-ttu-id="8d063-688">dc =EASTUS rack =rack3</span><span class="sxs-lookup"><span data-stu-id="8d063-688">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="8d063-689">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-689">Yes</span></span> |
| <span data-ttu-id="8d063-690">hk-c6-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-690">hk-c6-east-us</span></span> |<span data-ttu-id="8d063-691">data</span><span class="sxs-lookup"><span data-stu-id="8d063-691">data</span></span> |<span data-ttu-id="8d063-692">10.2.2.9</span><span class="sxs-lookup"><span data-stu-id="8d063-692">10.2.2.9</span></span> |<span data-ttu-id="8d063-693">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-693">hk-c-aset-2</span></span> |<span data-ttu-id="8d063-694">dc =EASTUS rack =rack3</span><span class="sxs-lookup"><span data-stu-id="8d063-694">dc =EASTUS rack =rack3</span></span> |<span data-ttu-id="8d063-695">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-695">No</span></span> |
| <span data-ttu-id="8d063-696">hk-c7-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-696">hk-c7-east-us</span></span> |<span data-ttu-id="8d063-697">data</span><span class="sxs-lookup"><span data-stu-id="8d063-697">data</span></span> |<span data-ttu-id="8d063-698">10.2.2.10</span><span class="sxs-lookup"><span data-stu-id="8d063-698">10.2.2.10</span></span> |<span data-ttu-id="8d063-699">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-699">hk-c-aset-2</span></span> |<span data-ttu-id="8d063-700">dc =EASTUS rack =rack4</span><span class="sxs-lookup"><span data-stu-id="8d063-700">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="8d063-701">Да</span><span class="sxs-lookup"><span data-stu-id="8d063-701">Yes</span></span> |
| <span data-ttu-id="8d063-702">hk-c8-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-702">hk-c8-east-us</span></span> |<span data-ttu-id="8d063-703">data</span><span class="sxs-lookup"><span data-stu-id="8d063-703">data</span></span> |<span data-ttu-id="8d063-704">10.2.2.11</span><span class="sxs-lookup"><span data-stu-id="8d063-704">10.2.2.11</span></span> |<span data-ttu-id="8d063-705">hk-c-aset-2</span><span class="sxs-lookup"><span data-stu-id="8d063-705">hk-c-aset-2</span></span> |<span data-ttu-id="8d063-706">dc =EASTUS rack =rack4</span><span class="sxs-lookup"><span data-stu-id="8d063-706">dc =EASTUS rack =rack4</span></span> |<span data-ttu-id="8d063-707">Нет</span><span class="sxs-lookup"><span data-stu-id="8d063-707">No</span></span> |
| <span data-ttu-id="8d063-708">hk-w1-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-708">hk-w1-east-us</span></span> |<span data-ttu-id="8d063-709">web</span><span class="sxs-lookup"><span data-stu-id="8d063-709">web</span></span> |<span data-ttu-id="8d063-710">10.2.1.4</span><span class="sxs-lookup"><span data-stu-id="8d063-710">10.2.1.4</span></span> |<span data-ttu-id="8d063-711">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-711">hk-w-aset-1</span></span> |<span data-ttu-id="8d063-712">Недоступно</span><span class="sxs-lookup"><span data-stu-id="8d063-712">N/A</span></span> |<span data-ttu-id="8d063-713">Недоступно</span><span class="sxs-lookup"><span data-stu-id="8d063-713">N/A</span></span> |
| <span data-ttu-id="8d063-714">hk-w2-east-us</span><span class="sxs-lookup"><span data-stu-id="8d063-714">hk-w2-east-us</span></span> |<span data-ttu-id="8d063-715">web</span><span class="sxs-lookup"><span data-stu-id="8d063-715">web</span></span> |<span data-ttu-id="8d063-716">10.2.1.5</span><span class="sxs-lookup"><span data-stu-id="8d063-716">10.2.1.5</span></span> |<span data-ttu-id="8d063-717">hk-w-aset-1</span><span class="sxs-lookup"><span data-stu-id="8d063-717">hk-w-aset-1</span></span> |<span data-ttu-id="8d063-718">Недоступно</span><span class="sxs-lookup"><span data-stu-id="8d063-718">N/A</span></span> |<span data-ttu-id="8d063-719">Недоступно</span><span class="sxs-lookup"><span data-stu-id="8d063-719">N/A</span></span> |

<span data-ttu-id="8d063-720">Таким же Здравствуйте, выполните инструкции в виде области #1, но использовать 10.2.xxx.xxx адресное пространство.</span><span class="sxs-lookup"><span data-stu-id="8d063-720">Follow hello same instructions as region #1 but use 10.2.xxx.xxx address space.</span></span>

### <a name="step-9-configure-cassandra-on-each-vm"></a><span data-ttu-id="8d063-721">Шаг 9. Настройка Cassandra на каждой виртуальной машине</span><span class="sxs-lookup"><span data-stu-id="8d063-721">Step 9: Configure Cassandra on each VM</span></span>
<span data-ttu-id="8d063-722">Вход в hello виртуальной Машины и выполнить hello следующие:</span><span class="sxs-lookup"><span data-stu-id="8d063-722">Log into hello VM and perform hello following:</span></span>

1. <span data-ttu-id="8d063-723">Изменение $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello центра и стойку свойств данных в формате hello: dc = стойка EASTUS = rack1</span><span class="sxs-lookup"><span data-stu-id="8d063-723">Edit $CASS_HOME/conf/cassandra-rackdc.properties toospecify hello data center and rack properties in hello format:  dc =EASTUS  rack =rack1</span></span>
2. <span data-ttu-id="8d063-724">Изменение узлов начальное значение tooconfigure cassandra.yaml: начальные значения: «10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10»</span><span class="sxs-lookup"><span data-stu-id="8d063-724">Edit cassandra.yaml tooconfigure seed nodes:  Seeds: "10.1.2.4,10.1.2.6,10.1.2.8,10.1.2.10,10.2.2.4,10.2.2.6,10.2.2.8,10.2.2.10"</span></span>

### <a name="step-10-start-cassandra"></a><span data-ttu-id="8d063-725">Шаг 10. Запуск Cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-725">Step 10: Start Cassandra</span></span>
<span data-ttu-id="8d063-726">Войдите на каждой виртуальной Машине и запустите Cassandra в фоновом режиме hello, выполнив следующую команду hello: $CASS_HOME/bin/cassandra</span><span class="sxs-lookup"><span data-stu-id="8d063-726">Log into each VM and start Cassandra in hello background by running hello following command: $CASS_HOME/bin/cassandra</span></span>

## <a name="test-hello-multi-region-cluster"></a><span data-ttu-id="8d063-727">Тест hello кластера в нескольких регионах</span><span class="sxs-lookup"><span data-stu-id="8d063-727">Test hello Multi-Region Cluster</span></span>
<span data-ttu-id="8d063-728">К этому моменту Cassandra был too16 развернутые узлы с 8 узлов в каждом регионе Azure.</span><span class="sxs-lookup"><span data-stu-id="8d063-728">By now Cassandra has been deployed too16 nodes with 8 nodes in each Azure region.</span></span> <span data-ttu-id="8d063-729">Эти узлы находятся в hello же кластера силу hello общее имя кластера и настройка узла hello начальное значение.</span><span class="sxs-lookup"><span data-stu-id="8d063-729">These nodes are in hello same cluster by virtue of hello common cluster name and hello seed node configuration.</span></span> <span data-ttu-id="8d063-730">Используйте следующий процесс tootest hello кластера hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-730">Use hello following process tootest hello cluster:</span></span>

### <a name="step-1-get-hello-internal-load-balancer-ip-for-both-hello-regions-using-powershell"></a><span data-ttu-id="8d063-731">Шаг 1: Получение IP-адреса подсистемы балансировки нагрузки внутренней hello для обоих регионах hello, с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="8d063-731">Step 1: Get hello internal load balancer IP for both hello regions using PowerShell</span></span>
* <span data-ttu-id="8d063-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span><span class="sxs-lookup"><span data-stu-id="8d063-732">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-west-us"</span></span>
* <span data-ttu-id="8d063-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span><span class="sxs-lookup"><span data-stu-id="8d063-733">Get-AzureInternalLoadbalancer -ServiceName "hk-c-svc-east-us"</span></span>  
  
    <span data-ttu-id="8d063-734">Обратите внимание, hello IP-адреса (например - 10.1.2.101, восток - Запад 10.2.2.101) отображается.</span><span class="sxs-lookup"><span data-stu-id="8d063-734">Note hello IP addresses (e.g. west - 10.1.2.101, east - 10.2.2.101) displayed.</span></span>

### <a name="step-2-execute-hello-following-in-hello-west-region-after-logging-into-hk-w1-west-us"></a><span data-ttu-id="8d063-735">Шаг 2: Выполните ниже hello в hello Запад после выполнения входа в hk-w1-Запад us</span><span class="sxs-lookup"><span data-stu-id="8d063-735">Step 2: Execute hello following in hello west region after logging into hk-w1-west-us</span></span>
1. <span data-ttu-id="8d063-736">Выполните команду $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span><span class="sxs-lookup"><span data-stu-id="8d063-736">Execute $CASS_HOME/bin/cqlsh 10.1.2.101 9160</span></span>
2. <span data-ttu-id="8d063-737">Выполните следующие команды CQL hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-737">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="8d063-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span><span class="sxs-lookup"><span data-stu-id="8d063-738">CREATE KEYSPACE customers_ks   WITH REPLICATION = { 'class' : 'NetworkToplogyStrategy', 'WESTUS' : 3, 'EASTUS' : 3};   USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="8d063-739">Вы увидите отображения как hello один ниже:</span><span class="sxs-lookup"><span data-stu-id="8d063-739">You should see a display like hello one below:</span></span>

| <span data-ttu-id="8d063-740">customer_id</span><span class="sxs-lookup"><span data-stu-id="8d063-740">customer_id</span></span> | <span data-ttu-id="8d063-741">firstname</span><span class="sxs-lookup"><span data-stu-id="8d063-741">firstname</span></span> | <span data-ttu-id="8d063-742">Lastname</span><span class="sxs-lookup"><span data-stu-id="8d063-742">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8d063-743">1</span><span class="sxs-lookup"><span data-stu-id="8d063-743">1</span></span> |<span data-ttu-id="8d063-744">Артем</span><span class="sxs-lookup"><span data-stu-id="8d063-744">John</span></span> |<span data-ttu-id="8d063-745">Кузнецов</span><span class="sxs-lookup"><span data-stu-id="8d063-745">Doe</span></span> |
| <span data-ttu-id="8d063-746">2</span><span class="sxs-lookup"><span data-stu-id="8d063-746">2</span></span> |<span data-ttu-id="8d063-747">Ольга</span><span class="sxs-lookup"><span data-stu-id="8d063-747">Jane</span></span> |<span data-ttu-id="8d063-748">Кузнецов</span><span class="sxs-lookup"><span data-stu-id="8d063-748">Doe</span></span> |

### <a name="step-3-execute-hello-following-in-hello-east-region-after-logging-into-hk-w1-east-us"></a><span data-ttu-id="8d063-749">Шаг 3: Выполните следующие hello в восточном регионе hello после выполнения входа в hk-w1-east-us:</span><span class="sxs-lookup"><span data-stu-id="8d063-749">Step 3: Execute hello following in hello east region after logging into hk-w1-east-us:</span></span>
1. <span data-ttu-id="8d063-750">Выполните команду $CASS_HOME/bin/cqlsh 10.2.2.101 9160.</span><span class="sxs-lookup"><span data-stu-id="8d063-750">Execute $CASS_HOME/bin/cqlsh 10.2.2.101 9160</span></span>
2. <span data-ttu-id="8d063-751">Выполните следующие команды CQL hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-751">Execute hello following CQL commands:</span></span>
   
     <span data-ttu-id="8d063-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span><span class="sxs-lookup"><span data-stu-id="8d063-752">USE customers_ks;   CREATE TABLE Customers(customer_id int PRIMARY KEY, firstname text, lastname text);   INSERT INTO Customers(customer_id, firstname, lastname) VALUES(1, 'John', 'Doe');   INSERT INTO Customers(customer_id, firstname, lastname) VALUES (2, 'Jane', 'Doe');   SELECT * FROM Customers;</span></span>

<span data-ttu-id="8d063-753">Вы должны увидеть hello же отображения, что для западного региона hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-753">You should see hello same display as seen for hello West region:</span></span>

| <span data-ttu-id="8d063-754">customer_id</span><span class="sxs-lookup"><span data-stu-id="8d063-754">customer_id</span></span> | <span data-ttu-id="8d063-755">firstname</span><span class="sxs-lookup"><span data-stu-id="8d063-755">firstname</span></span> | <span data-ttu-id="8d063-756">Lastname</span><span class="sxs-lookup"><span data-stu-id="8d063-756">Lastname</span></span> |
| --- | --- | --- |
| <span data-ttu-id="8d063-757">1</span><span class="sxs-lookup"><span data-stu-id="8d063-757">1</span></span> |<span data-ttu-id="8d063-758">Артем</span><span class="sxs-lookup"><span data-stu-id="8d063-758">John</span></span> |<span data-ttu-id="8d063-759">Кузнецов</span><span class="sxs-lookup"><span data-stu-id="8d063-759">Doe</span></span> |
| <span data-ttu-id="8d063-760">2</span><span class="sxs-lookup"><span data-stu-id="8d063-760">2</span></span> |<span data-ttu-id="8d063-761">Ольга</span><span class="sxs-lookup"><span data-stu-id="8d063-761">Jane</span></span> |<span data-ttu-id="8d063-762">Кузнецов</span><span class="sxs-lookup"><span data-stu-id="8d063-762">Doe</span></span> |

<span data-ttu-id="8d063-763">Выполнить несколько дополнительных вставок и просмотреть их получение реплицированных toowest-нам частью кластера hello.</span><span class="sxs-lookup"><span data-stu-id="8d063-763">Execute a few more inserts and see that those get replicated toowest-us part of hello cluster.</span></span>

## <a name="test-cassandra-cluster-from-nodejs"></a><span data-ttu-id="8d063-764">Тестирование кластера Cassandra из файла Node.js</span><span class="sxs-lookup"><span data-stu-id="8d063-764">Test Cassandra Cluster from Node.js</span></span>
<span data-ttu-id="8d063-765">С помощью одного из виртуальных машин Linux hello создан на уровне «web» hello ранее, мы будет выполнять простые hello вставленные ранее объекта данных tooread Node.js сценария</span><span class="sxs-lookup"><span data-stu-id="8d063-765">Using one of hello Linux VMs crated in hello "web" tier previously, we will execute a simple Node.js script tooread hello previously inserted data</span></span>

<span data-ttu-id="8d063-766">**Шаг 1. Установка Node.js и клиента Cassandra**</span><span class="sxs-lookup"><span data-stu-id="8d063-766">**Step 1: Install Node.js and Cassandra Client**</span></span>

1. <span data-ttu-id="8d063-767">Установка Node.js и NPM</span><span class="sxs-lookup"><span data-stu-id="8d063-767">Install Node.js and npm</span></span>
2. <span data-ttu-id="8d063-768">Установите пакет узлов "cassandra-client" с помощью NPM</span><span class="sxs-lookup"><span data-stu-id="8d063-768">Install node package "cassandra-client" using npm</span></span>
3. <span data-ttu-id="8d063-769">Выполните следующий скрипт командной оболочки hello, отображающий строки json hello hello извлечения данных hello:</span><span class="sxs-lookup"><span data-stu-id="8d063-769">Execute hello following script at hello shell prompt which displays hello json string of hello retrieved data:</span></span>
   
        var pooledCon = require('cassandra-client').PooledConnection;
        var ksName = "custsupport_ks";
        var cfName = "customers_cf";
        var hostList = ['internal_loadbalancer_ip:9160'];
        var ksConOptions = { hosts: hostList,
                             keyspace: ksName, use_bigints: false };
   
        function createKeyspace(callback){
           var cql = 'CREATE KEYSPACE ' + ksName + ' WITH strategy_class=SimpleStrategy AND strategy_options:replication_factor=1';
           var sysConOptions = { hosts: hostList,  
                                 keyspace: 'system', use_bigints: false };
           var con = new pooledCon(sysConOptions);
           con.execute(cql,[],function(err) {
           if (err) {
             console.log("Failed toocreate Keyspace: " + ksName);
             console.log(err);
           }
           else {
             console.log("Created Keyspace: " + ksName);
             callback(ksConOptions, populateCustomerData);
           }
           });
           con.shutdown();
        }
   
        function createColumnFamily(ksConOptions, callback){
          var params = ['customers_cf','custid','varint','custname',
                        'text','custaddress','text'];
          var cql = 'CREATE COLUMNFAMILY ? (? ? PRIMARY KEY,? ?, ? ?)';
        var con =  new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) {
                 console.log("Failed toocreate column family: " + params[0]);
                 console.log(err);
              }
              else {
                 console.log("Created column family: " + params[0]);
                 callback();
              }
          });
          con.shutdown();
        }
   
        //populate Data
        function populateCustomerData() {
           var params = ['John','Infinity Dr, TX', 1];
           updateCustomer(ksConOptions,params);
   
           params = ['Tom','Fermat Ln, WA', 2];
           updateCustomer(ksConOptions,params);
        }
   
        //update will also insert hello record if none exists
        function updateCustomer(ksConOptions,params)
        {
          var cql = 'UPDATE customers_cf SET custname=?,custaddress=? where custid=?';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,params,function(err) {
              if (err) console.log(err);
              else console.log("Inserted customer : " + params[0]);
          });
          con.shutdown();
        }
   
        //read hello two rows inserted above
        function readCustomer(ksConOptions)
        {
          var cql = 'SELECT * FROM customers_cf WHERE custid IN (1,2)';
          var con = new pooledCon(ksConOptions);
          con.execute(cql,[],function(err,rows) {
              if (err)
                 console.log(err);
              else
                 for (var i=0; i<rows.length; i++)
                    console.log(JSON.stringify(rows[i]));
            });
           con.shutdown();
        }
   
        //exectue hello code
        createKeyspace(createColumnFamily);
        readCustomer(ksConOptions)

## <a name="conclusion"></a><span data-ttu-id="8d063-770">Заключение</span><span class="sxs-lookup"><span data-stu-id="8d063-770">Conclusion</span></span>
<span data-ttu-id="8d063-771">Microsoft Azure — это гибкая платформа, которая разрешает запуск hello Microsoft как, так и программное обеспечение с открытым исходным кодом, как показано в этом упражнении.</span><span class="sxs-lookup"><span data-stu-id="8d063-771">Microsoft Azure is a flexible platform that allows hello running of both Microsoft as well as open source software as demonstrated by this exercise.</span></span> <span data-ttu-id="8d063-772">Высокой доступности кластеров Cassandra могут развертываться в одном центре обработки данных через hello распространение hello узлов кластера в нескольких доменах сбоя.</span><span class="sxs-lookup"><span data-stu-id="8d063-772">Highly available Cassandra clusters can be deployed on a single data center through hello spreading of hello cluster nodes across multiple fault domains.</span></span> <span data-ttu-id="8d063-773">Кластеры Cassandra также можно развертывать в нескольких географически разделенных регионах Azure для отказоустойчивых систем.</span><span class="sxs-lookup"><span data-stu-id="8d063-773">Cassandra clusters can also be deployed across multiple geographically distant Azure regions for disaster proof systems.</span></span> <span data-ttu-id="8d063-774">Azure и позволяет совместно Cassandra hello построения высокомасштабируемых, высокой доступности и с современного Интернета аварийного восстановимых облачные службы требуется масштабирование служб.</span><span class="sxs-lookup"><span data-stu-id="8d063-774">Azure and Cassandra together enables hello construction of highly scalable, highly available and disaster recoverable cloud services needed by today's internet scale services.</span></span>  

## <a name="references"></a><span data-ttu-id="8d063-775">Ссылки</span><span class="sxs-lookup"><span data-stu-id="8d063-775">References</span></span>
* [<span data-ttu-id="8d063-776">http://cassandra.apache.org</span><span class="sxs-lookup"><span data-stu-id="8d063-776">http://cassandra.apache.org</span></span>](http://cassandra.apache.org)
* [<span data-ttu-id="8d063-777">http://www.datastax.com</span><span class="sxs-lookup"><span data-stu-id="8d063-777">http://www.datastax.com</span></span>](http://www.datastax.com)
* [<span data-ttu-id="8d063-778">http://www.nodejs.org</span><span class="sxs-lookup"><span data-stu-id="8d063-778">http://www.nodejs.org</span></span>](http://www.nodejs.org)

