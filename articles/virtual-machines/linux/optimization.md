---
title: "aaaOptimize ВМ Linux в Azure | Документы Microsoft"
description: "Узнать некоторые toomake советы по оптимизации, убедиться, что вы настроили ВМ Linux для обеспечения оптимальной производительности в Azure"
keywords: "виртуальная машина linux,linux виртуальная машина,виртуальная машина ubuntu"
services: virtual-machines-linux
documentationcenter: 
author: rickstercdn
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: 8baa30c8-d40e-41ac-93d0-74e96fe18d4c
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 09/06/2016
ms.author: rclaus
ms.openlocfilehash: 89a9ac022928a2801a9a15e1c172340352745354
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="optimize-your-linux-vm-on-azure"></a><span data-ttu-id="ec588-104">Оптимизация виртуальной машины Linux в Azure</span><span class="sxs-lookup"><span data-stu-id="ec588-104">Optimize your Linux VM on Azure</span></span>
<span data-ttu-id="ec588-105">Создание виртуальной машины (VM) Linux — легко toodo с hello командной строки или из портала hello.</span><span class="sxs-lookup"><span data-stu-id="ec588-105">Creating a Linux virtual machine (VM) is easy toodo from hello command line or from hello portal.</span></span> <span data-ttu-id="ec588-106">Этот учебник показывает, как tooensure настройки он toooptimize его производительность на платформе Microsoft Azure hello.</span><span class="sxs-lookup"><span data-stu-id="ec588-106">This tutorial shows you how tooensure you have set it up toooptimize its performance on hello Microsoft Azure platform.</span></span> <span data-ttu-id="ec588-107">В этой статье описывается виртуальная машина Ubuntu Server, но вы можете также создавать виртуальные машины Linux, используя [собственные образы в качестве шаблонов](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ec588-107">This topic uses an Ubuntu Server VM, but you can also create Linux virtual machine using [your own images as templates](create-upload-generic.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="ec588-108">Предварительные требования</span><span class="sxs-lookup"><span data-stu-id="ec588-108">Prerequisites</span></span>
<span data-ttu-id="ec588-109">В этой статье предполагается, что у вас уже есть действующая подписка Azure ([бесплатная пробная подписка](https://azure.microsoft.com/pricing/free-trial/)), в которой подготовлена виртуальная машина.</span><span class="sxs-lookup"><span data-stu-id="ec588-109">This topic assumes you already have a working Azure subscription ([free trial signup](https://azure.microsoft.com/pricing/free-trial/)) and have already provisioned a VM into your Azure subscription.</span></span> <span data-ttu-id="ec588-110">Убедитесь, что hello последней [Azure CLI 2.0](/cli/azure/install-az-cli2) установлен и вход tooyour подписки Azure с [входа az](/cli/azure/#login) перед [создания виртуальной Машины](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="ec588-110">Make sure that you have hello latest [Azure CLI 2.0](/cli/azure/install-az-cli2) installed and logged in tooyour Azure subscription with [az login](/cli/azure/#login) before you [create a VM](quick-create-cli.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

## <a name="azure-os-disk"></a><span data-ttu-id="ec588-111">Диск ОС в Azure</span><span class="sxs-lookup"><span data-stu-id="ec588-111">Azure OS Disk</span></span>
<span data-ttu-id="ec588-112">У созданной в Azure виртуальной машины Linux будет два диска:</span><span class="sxs-lookup"><span data-stu-id="ec588-112">Once you create a Linux VM in Azure, it has two disks associated with it.</span></span> <span data-ttu-id="ec588-113">**/dev/sda** (диск операционной системы) и **/dev/sdb** (временный диск).</span><span class="sxs-lookup"><span data-stu-id="ec588-113">**/dev/sda** is your OS disk, **/dev/sdb** is your temporary disk.</span></span>  <span data-ttu-id="ec588-114">Не используйте основной диск ОС hello (**/dev/sda**) для любого элемента, за исключением hello операционной системы, как она оптимизирована для быстрое время запуска виртуальной Машины и не предоставляет высокую производительность для рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="ec588-114">Do not use hello main OS disk (**/dev/sda**) for anything except hello operating system as it is optimized for fast VM boot time and does not provide good performance for your workloads.</span></span> <span data-ttu-id="ec588-115">Нужно tooattach один или несколько дисков tooyour ВМ tooget постоянный и оптимизированного хранилища данных.</span><span class="sxs-lookup"><span data-stu-id="ec588-115">You want tooattach one or more disks tooyour VM tooget persistent and optimized storage for your data.</span></span> 

## <a name="adding-disks-for-size-and-performance-targets"></a><span data-ttu-id="ec588-116">Добавление дисков для увеличения размера и производительности</span><span class="sxs-lookup"><span data-stu-id="ec588-116">Adding Disks for Size and Performance targets</span></span>
<span data-ttu-id="ec588-117">На основании hello размер виртуальной Машины, можно присоединить дополнительные диски too16 на серии A, 32 дисков на серии D и 64 дисков на компьютере серии G - каждой копии too1 ТБ.</span><span class="sxs-lookup"><span data-stu-id="ec588-117">Based on hello VM size, you can attach up too16 additional disks on an A-Series, 32 disks on a D-Series and 64 disks on a G-Series machine - each up too1 TB in size.</span></span> <span data-ttu-id="ec588-118">Дополнительные диски добавляются по мере необходимости в зависимости от требований к пространству и количеству операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="ec588-118">You add extra disks as needed per your space and IOps requirements.</span></span> <span data-ttu-id="ec588-119">Каждый диск имеет целевой показатель производительности 500 операций ввода-вывода для стандартного хранилища или более поздней too5000 IOP для дисков для хранения Premium.</span><span class="sxs-lookup"><span data-stu-id="ec588-119">Each disk has a performance target of 500 IOps for Standard Storage and up too5000 IOps per disk for Premium Storage.</span></span>  <span data-ttu-id="ec588-120">Дополнительные сведения о дисках хранилища класса Premium см. в статье [Высокопроизводительное хранилище класса Premium, а также неуправляемые и управляемые диски виртуальной машины Azure](../../storage/common/storage-premium-storage.md).</span><span class="sxs-lookup"><span data-stu-id="ec588-120">For more information about Premium Storage disks, see [Premium Storage: High-Performance Storage for Azure VMs](../../storage/common/storage-premium-storage.md)</span></span>

<span data-ttu-id="ec588-121">tooachieve hello наибольший операций ввода-вывода на дисках хранилища Premium, где их кэша параметры были заданы tooeither **ReadOnly** или **нет**, необходимо отключить **барьеры** во время подключение hello файловой системы в Linux.</span><span class="sxs-lookup"><span data-stu-id="ec588-121">tooachieve hello highest IOps on Premium Storage disks where their cache settings have been set tooeither **ReadOnly** or **None**, you must disable **barriers** while mounting hello file system in Linux.</span></span> <span data-ttu-id="ec588-122">Барьеры не обязательно, поскольку hello записывает tooPremium хранилища резервных дисков являются устойчивыми для этих параметров кэша.</span><span class="sxs-lookup"><span data-stu-id="ec588-122">You do not need barriers because hello writes tooPremium Storage backed disks are durable for these cache settings.</span></span>

* <span data-ttu-id="ec588-123">Если вы используете **reiserFS**, с помощью параметра подключения hello барьеры disable `barrier=none` (для включения защиты, используйте `barrier=flush`)</span><span class="sxs-lookup"><span data-stu-id="ec588-123">If you use **reiserFS**, disable barriers using hello mount option `barrier=none` (For enabling barriers, use `barrier=flush`)</span></span>
* <span data-ttu-id="ec588-124">Если вы используете **ext3/ext4**, с помощью параметра подключения hello барьеры disable `barrier=0` (для включения защиты, используйте `barrier=1`)</span><span class="sxs-lookup"><span data-stu-id="ec588-124">If you use **ext3/ext4**, disable barriers using hello mount option `barrier=0` (For enabling barriers, use `barrier=1`)</span></span>
* <span data-ttu-id="ec588-125">Если вы используете **XFS**, с помощью параметра подключения hello барьеры disable `nobarrier` (для включения защиты, используйте параметр hello `barrier`)</span><span class="sxs-lookup"><span data-stu-id="ec588-125">If you use **XFS**, disable barriers using hello mount option `nobarrier` (For enabling barriers, use hello option `barrier`)</span></span>

## <a name="unmanaged-storage-account-considerations"></a><span data-ttu-id="ec588-126">Рекомендации по неуправляемой учетной записи хранения</span><span class="sxs-lookup"><span data-stu-id="ec588-126">Unmanaged storage account considerations</span></span>
<span data-ttu-id="ec588-127">Действие по умолчанию Hello при создании виртуальной Машины с hello Azure CLI 2.0 — дисков управляемых toouse Azure.</span><span class="sxs-lookup"><span data-stu-id="ec588-127">hello default action when you create a VM with hello Azure CLI 2.0 is toouse Azure Managed Disks.</span></span>  <span data-ttu-id="ec588-128">Эти диски обрабатываются hello платформы Azure и не требуют toostore любые предварительные и место их.</span><span class="sxs-lookup"><span data-stu-id="ec588-128">These disks are handled by hello Azure platform and do not require any preparation or location toostore them.</span></span>  <span data-ttu-id="ec588-129">Для неуправляемых дисков, требующих учетную запись хранения, имеются некоторые дополнительные рекомендации по производительности.</span><span class="sxs-lookup"><span data-stu-id="ec588-129">Unmanaged disks require a storage account and have some additional performance considerations.</span></span>  <span data-ttu-id="ec588-130">Дополнительные сведения об управляемых дисках Azure см. в [этой статье](../windows/managed-disks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="ec588-130">For more information about managed disks, see [Azure Managed Disks overview](../windows/managed-disks-overview.md).</span></span>  <span data-ttu-id="ec588-131">Hello следующем разделе описывается вопросы производительности только при использовании неуправляемого дисков.</span><span class="sxs-lookup"><span data-stu-id="ec588-131">hello following section outlines performance considerations only when you use unmanaged disks.</span></span>  <span data-ttu-id="ec588-132">Здравствуйте, еще раз, по умолчанию и рекомендуемый хранилища решение toouse управляемых дисков.</span><span class="sxs-lookup"><span data-stu-id="ec588-132">Again, hello default and recommended storage solution is toouse managed disks.</span></span>

<span data-ttu-id="ec588-133">При создании виртуальной Машины с неуправляемой дисков убедитесь, что присоединение дисков из учетных записей хранения, находящиеся в hello же регионе, что вашей виртуальной Машины tooensure близко и минимальная задержка в сети.</span><span class="sxs-lookup"><span data-stu-id="ec588-133">If you create a VM with unmanaged disks, make sure that you attach disks from storage accounts residing in hello same region as your VM tooensure close proximity and minimize network latency.</span></span>  <span data-ttu-id="ec588-134">Для каждой учетной записи хранилища класса "Стандартный" предусмотрено максимум 20 тысяч операций ввода-вывода и размер до 500 ТБ.</span><span class="sxs-lookup"><span data-stu-id="ec588-134">Each Standard storage account has a maximum of 20k IOps and a 500 TB size capacity.</span></span>  <span data-ttu-id="ec588-135">Это ограничение происходит tooapproximately 40 интенсивно используется дисками, включая диск hello ОС и диски с данными, которые вы создаете.</span><span class="sxs-lookup"><span data-stu-id="ec588-135">This  limit works out tooapproximately 40 heavily used disks including both hello OS disk and any data disks you create.</span></span> <span data-ttu-id="ec588-136">Для учетных записей хранилища класса Premium нет ограничения на количество операций ввода-вывода, но существует ограничение на размер — 32 ТБ.</span><span class="sxs-lookup"><span data-stu-id="ec588-136">For Premium Storage accounts, there is no Maximum IOps limit but there is a 32 TB size limit.</span></span> 

<span data-ttu-id="ec588-137">При работе с высокой рабочей нагрузки операций ввода-вывода и выбрали стандартное хранилище для дисков, через несколько toomake учетных записей хранилища, убедиться, что вы не ограничены hello ограничить 20 000 операций ввода-вывода для учетных записей стандартного хранилища может потребоваться toosplit hello дисков.</span><span class="sxs-lookup"><span data-stu-id="ec588-137">When dealing with high IOps workloads and you have chosen Standard Storage for your disks, you might need toosplit hello disks across multiple storage accounts toomake sure you have not hit hello 20,000 IOps limit for Standard Storage accounts.</span></span> <span data-ttu-id="ec588-138">ВМ может содержать сочетание дисков из разных учетных записей хранения и tooachieve типы учетной записи хранилища оптимальной конфигурации.</span><span class="sxs-lookup"><span data-stu-id="ec588-138">Your VM can contain a mix of disks from across different storage accounts and storage account types tooachieve your optimal configuration.</span></span>
 

## <a name="your-vm-temporary-drive"></a><span data-ttu-id="ec588-139">Временный диск на виртуальной машине</span><span class="sxs-lookup"><span data-stu-id="ec588-139">Your VM Temporary drive</span></span>
<span data-ttu-id="ec588-140">По умолчанию при создании виртуальной машины в Azure предоставляется диск операционной системы (**/dev/sda**) и временный диск (**/dev/sdb**).</span><span class="sxs-lookup"><span data-stu-id="ec588-140">By default when you create a VM, Azure provides you with an OS disk (**/dev/sda**) and a temporary disk (**/dev/sdb**).</span></span>  <span data-ttu-id="ec588-141">При добавлении дополнительных дисков они отображаются как **/dev/sdc**, **/dev/sdd**, **/dev/sde** и т. д.</span><span class="sxs-lookup"><span data-stu-id="ec588-141">All additional disks you add show up as **/dev/sdc**, **/dev/sdd**, **/dev/sde** and so on.</span></span> <span data-ttu-id="ec588-142">Все данные на временном диске (**/dev/sdb**) недолговечны и могут быть утеряны, если виртуальная машина будет перезапущена из-за определенных событий, таких как изменение размера, повторное развертывание или обслуживание виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="ec588-142">All data on your temporary disk (**/dev/sdb**) is not durable, and can be lost if specific events like VM Resizing, redeployment, or maintenance forces a restart of your VM.</span></span>  <span data-ttu-id="ec588-143">Hello размер и тип временного диска — связанные toohello размер виртуальной Машины, выбранный во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="ec588-143">hello size and type of your temporary disk is related toohello VM size you chose at deployment time.</span></span> <span data-ttu-id="ec588-144">Все hello premium размер виртуальных машин (серии DS, G и DS_V2) hello временного диска, поддерживаемых локальный SSD для дополнительной работы вверх too48k операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="ec588-144">All of hello premium size VMs (DS, G, and DS_V2 series) hello temporary drive are backed by a local SSD for additional performance of up too48k IOps.</span></span> 

## <a name="linux-swap-file"></a><span data-ttu-id="ec588-145">Файл подкачки Linux</span><span class="sxs-lookup"><span data-stu-id="ec588-145">Linux Swap File</span></span>
<span data-ttu-id="ec588-146">Если из Ubuntu или CoreOS образа ВМ Azure, можно использовать toosend CustomData облачной конфигурации toocloud-init.</span><span class="sxs-lookup"><span data-stu-id="ec588-146">If your Azure VM is from an Ubuntu or CoreOS image, then you can use CustomData toosend a cloud-config toocloud-init.</span></span> <span data-ttu-id="ec588-147">Если вы [передали пользовательский образ Linux](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), использующий cloud-init, разделы подкачки также нужно настраивать с помощью cloud-init.</span><span class="sxs-lookup"><span data-stu-id="ec588-147">If you [uploaded a custom Linux image](upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that uses cloud-init, you also configure swap partitions using cloud-init.</span></span>

<span data-ttu-id="ec588-148">На изображениях Ubuntu облака необходимо использовать init облака tooconfigure hello переключения секций.</span><span class="sxs-lookup"><span data-stu-id="ec588-148">On Ubuntu Cloud Images, you must use cloud-init tooconfigure hello swap partition.</span></span> <span data-ttu-id="ec588-149">Дополнительные сведения см. в статье [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span><span class="sxs-lookup"><span data-stu-id="ec588-149">For more information, see [AzureSwapPartitions](https://wiki.ubuntu.com/AzureSwapPartitions).</span></span>

<span data-ttu-id="ec588-150">Для образов без поддержки облачных init образов виртуальных Машин, развернутых из hello Azure Marketplace иметь интегрирован с hello ОС Linux агента виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="ec588-150">For images without cloud-init support, VM images deployed from hello Azure Marketplace have a VM Linux Agent integrated with hello OS.</span></span> <span data-ttu-id="ec588-151">Этот агент позволяет toointeract hello виртуальной Машины с различными службами Azure.</span><span class="sxs-lookup"><span data-stu-id="ec588-151">This agent allows hello VM toointeract with various Azure services.</span></span> <span data-ttu-id="ec588-152">При условии, что вы развернули стандартный образ из hello Azure Marketplace, потребуется toodo hello toocorrectly после настройки параметров файла подкачки Linux:</span><span class="sxs-lookup"><span data-stu-id="ec588-152">Assuming you have deployed a standard image from hello Azure Marketplace, you would need toodo hello following toocorrectly configure your Linux swap file settings:</span></span>

<span data-ttu-id="ec588-153">Найти и изменить две записи в hello **/etc/waagent.conf** файла.</span><span class="sxs-lookup"><span data-stu-id="ec588-153">Locate and modify two entries in hello **/etc/waagent.conf** file.</span></span> <span data-ttu-id="ec588-154">Они управляют hello существования файл выделенной виртуальной памяти и размер файла подкачки hello.</span><span class="sxs-lookup"><span data-stu-id="ec588-154">They control hello existence of a dedicated swap file and size of hello swap file.</span></span> <span data-ttu-id="ec588-155">Параметры Hello нужного toomodify `ResourceDisk.EnableSwap=N` и`ResourceDisk.SwapSizeMB=0`</span><span class="sxs-lookup"><span data-stu-id="ec588-155">hello parameters you are looking toomodify are `ResourceDisk.EnableSwap=N` and `ResourceDisk.SwapSizeMB=0`</span></span> 

<span data-ttu-id="ec588-156">Изменить параметры toohello hello, следующие параметры:</span><span class="sxs-lookup"><span data-stu-id="ec588-156">Change hello parameters toohello following settings:</span></span>

* <span data-ttu-id="ec588-157">ResourceDisk.EnableSwap=Y</span><span class="sxs-lookup"><span data-stu-id="ec588-157">ResourceDisk.EnableSwap=Y</span></span>
* <span data-ttu-id="ec588-158">ResourceDisk.SwapSizeMB={size в toomeet МБ потребностями}</span><span class="sxs-lookup"><span data-stu-id="ec588-158">ResourceDisk.SwapSizeMB={size in MB toomeet your needs}</span></span> 

<span data-ttu-id="ec588-159">После внесения изменения hello необходима toorestart hello waagent или перезапустите вашей виртуальной Машине Linux tooreflect эти изменения.</span><span class="sxs-lookup"><span data-stu-id="ec588-159">Once you have made hello change, you need toorestart hello waagent or restart your Linux VM tooreflect those changes.</span></span>  <span data-ttu-id="ec588-160">Вы знаете реализованы hello изменения и создания файла подкачки при использовании hello `free` команды tooview свободного места.</span><span class="sxs-lookup"><span data-stu-id="ec588-160">You know hello changes have been implemented and a swap file has been created when you use hello `free` command tooview free space.</span></span> <span data-ttu-id="ec588-161">Hello следующий пример содержит файл подкачки 512 МБ, созданных в результате изменения hello **waagent.conf** файла:</span><span class="sxs-lookup"><span data-stu-id="ec588-161">hello following example has a 512MB swap file created as a result of modifying hello **waagent.conf** file:</span></span>

```bash
azuseruser@myVM:~$ free
            total       used       free     shared    buffers     cached
Mem:       3525156     804168    2720988        408       8428     633192
-/+ buffers/cache:     162548    3362608
Swap:       524284          0     524284
```

## <a name="io-scheduling-algorithm-for-premium-storage"></a><span data-ttu-id="ec588-162">Алгоритм планирования операций ввода-вывода для хранилища класса Premium</span><span class="sxs-lookup"><span data-stu-id="ec588-162">I/O scheduling algorithm for Premium Storage</span></span>
<span data-ttu-id="ec588-163">С hello 2.6.18 ядра Linux Алгоритм планирования операций ввода-вывода по умолчанию hello был изменен с tooCFQ крайнего срока (полностью удовлетворительные алгоритм очередей).</span><span class="sxs-lookup"><span data-stu-id="ec588-163">With hello 2.6.18 Linux kernel, hello default I/O scheduling algorithm was changed from Deadline tooCFQ (Completely fair queuing algorithm).</span></span> <span data-ttu-id="ec588-164">Если речь идет о моделях операций ввода-вывода с произвольным доступом, между алгоритмами CFQ и Deadline существуют минимальные различия в производительности.</span><span class="sxs-lookup"><span data-stu-id="ec588-164">For random access I/O patterns, there is negligible difference in performance differences between CFQ and Deadline.</span></span>  <span data-ttu-id="ec588-165">Для дисков на основе SSD, где преимущественно hello дискового ввода-вывода шаблон последовательного переключение обратно toohello NOOP или крайний срок алгоритм можно добиться повышения производительности операций ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="ec588-165">For SSD-based disks where hello disk I/O pattern is predominantly sequential, switching back toohello NOOP or Deadline algorithm can achieve better I/O performance.</span></span>

### <a name="view-hello-current-io-scheduler"></a><span data-ttu-id="ec588-166">Представление hello текущего планировщика ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="ec588-166">View hello current I/O scheduler</span></span>
<span data-ttu-id="ec588-167">Hello используйте следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ec588-167">Use hello following command:</span></span>  

```bash
cat /sys/block/sda/queue/scheduler
```

<span data-ttu-id="ec588-168">Вы увидите следующие выходных данных, который указывает hello текущего планировщика.</span><span class="sxs-lookup"><span data-stu-id="ec588-168">You see following output, which indicates hello current scheduler.</span></span>  

```bash
noop [deadline] cfq
```

### <a name="change-hello-current-device-devsda-of-io-scheduling-algorithm"></a><span data-ttu-id="ec588-169">Изменение текущего устройства hello (/ dev/sda) Алгоритм планирования операций ввода-вывода</span><span class="sxs-lookup"><span data-stu-id="ec588-169">Change hello current device (/dev/sda) of I/O scheduling algorithm</span></span>
<span data-ttu-id="ec588-170">Используйте hello, следующие команды:</span><span class="sxs-lookup"><span data-stu-id="ec588-170">Use hello following commands:</span></span>  

```bash
azureuser@myVM:~$ sudo su -
root@myVM:~# echo "noop" >/sys/block/sda/queue/scheduler
root@myVM:~# sed -i 's/GRUB_CMDLINE_LINUX=""/GRUB_CMDLINE_LINUX_DEFAULT="quiet splash elevator=noop"/g' /etc/default/grub
root@myVM:~# update-grub
```

> [!NOTE]
> <span data-ttu-id="ec588-171">Применять алгоритм только для устройства **/dev/sda** бесполезно.</span><span class="sxs-lookup"><span data-stu-id="ec588-171">Applying this setting for **/dev/sda** alone is not useful.</span></span> <span data-ttu-id="ec588-172">Установить на все диски с данными, где последовательных операций ввода-вывода превосходит hello шаблон ввода-вывода.</span><span class="sxs-lookup"><span data-stu-id="ec588-172">Set on all data disks where sequential I/O dominates hello I/O pattern.</span></span>  

<span data-ttu-id="ec588-173">Вы увидите hello следующие выходные данные, означает, что **grub.cfg** успешно перестроен и этот планировщик по умолчанию hello был обновленные tooNOOP.</span><span class="sxs-lookup"><span data-stu-id="ec588-173">You should see hello following output, indicating that **grub.cfg** has been rebuilt successfully and that hello default scheduler has been updated tooNOOP.</span></span>  

```bash
Generating grub configuration file ...
Found linux image: /boot/vmlinuz-3.13.0-34-generic
Found initrd image: /boot/initrd.img-3.13.0-34-generic
Found linux image: /boot/vmlinuz-3.13.0-32-generic
Found initrd image: /boot/initrd.img-3.13.0-32-generic
Found memtest86+ image: /memtest86+.elf
Found memtest86+ image: /memtest86+.bin
done
```

<span data-ttu-id="ec588-174">Для hello семейства Redhat распространения требуется только hello следующую команду:</span><span class="sxs-lookup"><span data-stu-id="ec588-174">For hello Redhat distribution family, you only need hello following command:</span></span>   

```bash
echo 'echo noop >/sys/block/sda/queue/scheduler' >> /etc/rc.local
```

## <a name="using-software-raid-tooachieve-higher-iops"></a><span data-ttu-id="ec588-175">С помощью программного обеспечения RAID tooachieve выше я / Ops</span><span class="sxs-lookup"><span data-stu-id="ec588-175">Using Software RAID tooachieve higher I/Ops</span></span>
<span data-ttu-id="ec588-176">Если рабочих нагрузок требуются дополнительные операции ввода-вывода, чем может предоставить один диск, сначала необходимо toouse конфигурации программного обеспечения RAID несколько дисков.</span><span class="sxs-lookup"><span data-stu-id="ec588-176">If your workloads require more IOps than a single disk can provide, you need toouse a software RAID configuration of multiple disks.</span></span> <span data-ttu-id="ec588-177">Так как Azure уже выполняет диска устойчивости на уровне структуры локального hello, вы достичь hello высокий уровень производительности из конфигурации чередование RAID-0.</span><span class="sxs-lookup"><span data-stu-id="ec588-177">Because Azure already performs disk resiliency at hello local fabric layer, you achieve hello highest level of performance from a RAID-0 striping configuration.</span></span>  <span data-ttu-id="ec588-178">Подготовить создавать диски в среде Azure hello и присоединение tooyour виртуальных Машин Linux, перед секционирование, форматирование и затем подключить hello дисков.</span><span class="sxs-lookup"><span data-stu-id="ec588-178">Provision and create disks in hello Azure environment and attach them tooyour Linux VM before partitioning, formatting and mounting hello drives.</span></span>  <span data-ttu-id="ec588-179">Дополнительные сведения о настройке Настройка программного RAID на ВМ Linux в azure можно найти в hello  **[Настройка программного RAID на платформе Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**  документа.</span><span class="sxs-lookup"><span data-stu-id="ec588-179">More details on configuring a software RAID setup on your Linux VM in azure can be found in hello **[Configuring Software RAID on Linux](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)** document.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ec588-180">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="ec588-180">Next Steps</span></span>
<span data-ttu-id="ec588-181">Помните, что все обсуждения оптимизации необходимо tooperform тесты до и после каждого изменения toomeasure hello влияние hello изменение содержит.</span><span class="sxs-lookup"><span data-stu-id="ec588-181">Remember, as with all optimization discussions, you need tooperform tests before and after each change toomeasure hello impact hello change has.</span></span>  <span data-ttu-id="ec588-182">Оптимизация — это пошаговый процесс, и результаты его будут разными на различных компьютерах в одной и той же среде.</span><span class="sxs-lookup"><span data-stu-id="ec588-182">Optimization is a step by step process that has different results across different machines in your environment.</span></span>  <span data-ttu-id="ec588-183">То, что эффективно для одной конфигурации, может не работать в другой.</span><span class="sxs-lookup"><span data-stu-id="ec588-183">What works for one configuration may not work for others.</span></span>

<span data-ttu-id="ec588-184">Некоторые полезные ссылки tooadditional ресурсы:</span><span class="sxs-lookup"><span data-stu-id="ec588-184">Some useful links tooadditional resources:</span></span> 

* [<span data-ttu-id="ec588-185">Хранилище Premium: высокопроизводительное хранилище для рабочих нагрузок виртуальной машины Azure</span><span class="sxs-lookup"><span data-stu-id="ec588-185">Premium Storage: High-Performance Storage for Azure Virtual Machine Workloads</span></span>](../../storage/common/storage-premium-storage.md)
* [<span data-ttu-id="ec588-186">Руководство пользователя агента Linux для Azure</span><span class="sxs-lookup"><span data-stu-id="ec588-186">Azure Linux Agent User Guide</span></span>](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="ec588-187">Оптимизация производительности MySQL в виртуальных машинах Azure Linux</span><span class="sxs-lookup"><span data-stu-id="ec588-187">Optimizing MySQL Performance on Azure Linux VMs</span></span>](classic/optimize-mysql.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json)
* [<span data-ttu-id="ec588-188">Настройка программного RAID-массива в Linux</span><span class="sxs-lookup"><span data-stu-id="ec588-188">Configure Software RAID on Linux</span></span>](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)

