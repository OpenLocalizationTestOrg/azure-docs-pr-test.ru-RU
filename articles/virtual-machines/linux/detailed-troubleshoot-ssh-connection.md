---
title: "aaaDetailed SSH для устранения неполадок в Виртуальной машине Azure | Документы Microsoft"
description: "Более подробные SSH устранения неполадок для проблемы с подключением tooan виртуальной машины Azure"
keywords: "в SSH-подключении отказано, ошибка SSH, Azure SSH, ошибка SSH-подключения"
services: virtual-machines-linux
documentationcenter: 
author: iainfoulds
manager: timlt
editor: 
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: b8e8be5f-e8a6-489d-9922-9df8de32e839
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: support-article
ms.date: 07/06/2017
ms.author: iainfou
ms.openlocfilehash: 3f711e53a8251f8c06dbb589a258222566a4ae1e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="detailed-ssh-troubleshooting-steps-for-issues-connecting-tooa-linux-vm-in-azure"></a><span data-ttu-id="f11ca-104">Подробные SSH устранения неполадок для проблемы с подключением tooa виртуальных Машин Linux в Azure</span><span class="sxs-lookup"><span data-stu-id="f11ca-104">Detailed SSH troubleshooting steps for issues connecting tooa Linux VM in Azure</span></span>
<span data-ttu-id="f11ca-105">Существует множество возможных причин этого клиента SSH hello может быть служба SSH может tooreach hello hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f11ca-105">There are many possible reasons that hello SSH client might not be able tooreach hello SSH service on hello VM.</span></span> <span data-ttu-id="f11ca-106">Если вы следовали через hello более [общие SSH, действия по устранению неполадок](troubleshoot-ssh-connection.md), требуется toofurther устранить проблему подключения hello.</span><span class="sxs-lookup"><span data-stu-id="f11ca-106">If you have followed through hello more [general SSH troubleshooting steps](troubleshoot-ssh-connection.md), you need toofurther troubleshoot hello connection issue.</span></span> <span data-ttu-id="f11ca-107">В этой статье поможет подробные toodetermine действия для устранения неполадок там, где произошел сбой hello SSH-подключения и как tooresolve его.</span><span class="sxs-lookup"><span data-stu-id="f11ca-107">This article guides you through detailed troubleshooting steps toodetermine where hello SSH connection is failing and how tooresolve it.</span></span>

## <a name="take-preliminary-steps"></a><span data-ttu-id="f11ca-108">Выполнение предварительных действий</span><span class="sxs-lookup"><span data-stu-id="f11ca-108">Take preliminary steps</span></span>
<span data-ttu-id="f11ca-109">Hello следующей диаграмме показаны компоненты hello, задействованные.</span><span class="sxs-lookup"><span data-stu-id="f11ca-109">hello following diagram shows hello components that are involved.</span></span>

![Схема компонентов службы SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot1.png)

<span data-ttu-id="f11ca-111">Hello следующие действия помогут выявить источник hello сбоя hello и выясните, способы их устранения.</span><span class="sxs-lookup"><span data-stu-id="f11ca-111">hello following steps help you isolate hello source of hello failure and figure out solutions or workarounds.</span></span>

1. <span data-ttu-id="f11ca-112">Проверьте состояние hello hello ВМ на портале hello.</span><span class="sxs-lookup"><span data-stu-id="f11ca-112">Check hello status of hello VM in hello portal.</span></span>
   <span data-ttu-id="f11ca-113">В hello [портал Azure](https://portal.azure.com)выберите **виртуальные машины** > *имя виртуальной Машины*.</span><span class="sxs-lookup"><span data-stu-id="f11ca-113">In hello [Azure portal](https://portal.azure.com), select **Virtual machines** > *VM name*.</span></span>

   <span data-ttu-id="f11ca-114">Hello hello виртуальной Машины в области состояние должно отображаться **под управлением**.</span><span class="sxs-lookup"><span data-stu-id="f11ca-114">hello status pane for hello VM should show **Running**.</span></span> <span data-ttu-id="f11ca-115">Прокрутите вниз tooshow Недавние действия для вычислений, хранения и сетевых ресурсов.</span><span class="sxs-lookup"><span data-stu-id="f11ca-115">Scroll down tooshow recent activity for compute, storage, and network resources.</span></span>

2. <span data-ttu-id="f11ca-116">Выберите **параметры** tooexamine конечных точек, IP адреса, сетевые группы безопасности и другие параметры.</span><span class="sxs-lookup"><span data-stu-id="f11ca-116">Select **Settings** tooexamine endpoints, IP addresses, network security groups, and other settings.</span></span>

   <span data-ttu-id="f11ca-117">Hello виртуальной Машины должен иметь конечную точку, определенную для SSH-трафика, который можно просмотреть в **конечные точки** или  **[сетевой группы безопасности](../../virtual-network/virtual-networks-nsg.md)**.</span><span class="sxs-lookup"><span data-stu-id="f11ca-117">hello VM should have an endpoint defined for SSH traffic that you can view in **Endpoints** or **[Network security group](../../virtual-network/virtual-networks-nsg.md)**.</span></span> <span data-ttu-id="f11ca-118">Конечные точки в виртуальных машинах, созданных с помощью Resource Manager, сохраняются в группе безопасности сети.</span><span class="sxs-lookup"><span data-stu-id="f11ca-118">Endpoints in VMs that were created by using Resource Manager are stored in a network security group.</span></span> <span data-ttu-id="f11ca-119">Кроме того убедитесь, что правила hello был применен toohello сетевой группы безопасности и что все ссылки на них в подсети hello.</span><span class="sxs-lookup"><span data-stu-id="f11ca-119">Also, verify that hello rules have been applied toohello network security group and that they're referenced in hello subnet.</span></span>

<span data-ttu-id="f11ca-120">tooverify сетевое подключение, проверьте hello настроить конечные точки и разделе, если можно получить доступ к hello виртуальной Машины через другой протокол, например HTTP или другой службы.</span><span class="sxs-lookup"><span data-stu-id="f11ca-120">tooverify network connectivity, check hello configured endpoints and see if you can reach hello VM through another protocol, such as HTTP or another service.</span></span>

<span data-ttu-id="f11ca-121">После выполнения этих шагов повторите попытку подключения SSH hello.</span><span class="sxs-lookup"><span data-stu-id="f11ca-121">After these steps, try hello SSH connection again.</span></span>

## <a name="find-hello-source-of-hello-issue"></a><span data-ttu-id="f11ca-122">Найти источник проблемы hello hello</span><span class="sxs-lookup"><span data-stu-id="f11ca-122">Find hello source of hello issue</span></span>
<span data-ttu-id="f11ca-123">Hello клиент SSH на компьютере может завершиться неудачно служба SSH hello tooreach hello виртуальной Машины Azure из-за tooissues или неверные настройки hello в следующих областях:</span><span class="sxs-lookup"><span data-stu-id="f11ca-123">hello SSH client on your computer might fail tooreach hello SSH service on hello Azure VM due tooissues or misconfigurations in hello following areas:</span></span>

* [<span data-ttu-id="f11ca-124">Клиентский компьютер SSH.</span><span class="sxs-lookup"><span data-stu-id="f11ca-124">SSH client computer</span></span>](#source-1-ssh-client-computer)
* [<span data-ttu-id="f11ca-125">Пограничное устройство организации.</span><span class="sxs-lookup"><span data-stu-id="f11ca-125">Organization edge device</span></span>](#source-2-organization-edge-device)
* [<span data-ttu-id="f11ca-126">Конечная точка облачной службы и список управления доступом (ACL)</span><span class="sxs-lookup"><span data-stu-id="f11ca-126">Cloud service endpoint and access control list (ACL)</span></span>](#source-3-cloud-service-endpoint-and-acl)
* [<span data-ttu-id="f11ca-127">Группы безопасности сети</span><span class="sxs-lookup"><span data-stu-id="f11ca-127">Network security groups</span></span>](#source-4-network-security-groups)
* [<span data-ttu-id="f11ca-128">Виртуальная машина Azure под управлением Linux</span><span class="sxs-lookup"><span data-stu-id="f11ca-128">Linux-based Azure VM</span></span>](#source-5-linux-based-azure-virtual-machine)

## <a name="source-1-ssh-client-computer"></a><span data-ttu-id="f11ca-129">Источник 1: клиентский компьютер SSH</span><span class="sxs-lookup"><span data-stu-id="f11ca-129">Source 1: SSH client computer</span></span>
<span data-ttu-id="f11ca-130">tooeliminate компьютер в качестве источника hello hello сбоя, убедитесь, что его можно приготовить SSH подключений tooanother локально, компьютер под управлением Linux.</span><span class="sxs-lookup"><span data-stu-id="f11ca-130">tooeliminate your computer as hello source of hello failure, verify that it can make SSH connections tooanother on-premises, Linux-based computer.</span></span>

![Схема, на которой выделены компоненты клиентского компьютера SSH](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot2.png)

<span data-ttu-id="f11ca-132">Если hello подключения возвращает ошибку, проверьте hello следующих ситуаций на вашем компьютере:</span><span class="sxs-lookup"><span data-stu-id="f11ca-132">If hello connection fails, check for hello following issues on your computer:</span></span>

* <span data-ttu-id="f11ca-133">настройки локального брандмауэра, блокирующей входящий и исходящий SSH-трафик (TCP 22);</span><span class="sxs-lookup"><span data-stu-id="f11ca-133">A local firewall setting that is blocking inbound or outbound SSH traffic (TCP 22)</span></span>
* <span data-ttu-id="f11ca-134">локального программного обеспечения с функциями прокси клиента, которое не позволяет установить SSH-подключение;</span><span class="sxs-lookup"><span data-stu-id="f11ca-134">Locally installed client proxy software that is preventing SSH connections</span></span>
* <span data-ttu-id="f11ca-135">локального программного обеспечения для мониторинга сети, которое не позволяет установить SSH-подключение;</span><span class="sxs-lookup"><span data-stu-id="f11ca-135">Locally installed network monitoring software that is preventing SSH connections</span></span>
* <span data-ttu-id="f11ca-136">других программ для обеспечения безопасности, которые ведут мониторинг трафика либо разрешают и запрещают трафик определенных типов.</span><span class="sxs-lookup"><span data-stu-id="f11ca-136">Other types of security software that either monitor traffic or allow/disallow specific types of traffic</span></span>

<span data-ttu-id="f11ca-137">При одном из этих условий, временно отключите hello программного обеспечения и повторите toofind SSH подключения tooan локального компьютера out hello причина, по которой hello подключение блокируется на вашем компьютере.</span><span class="sxs-lookup"><span data-stu-id="f11ca-137">If one of these conditions apply, temporarily disable hello software and try an SSH connection tooan on-premises computer toofind out hello reason hello connection is being blocked on your computer.</span></span> <span data-ttu-id="f11ca-138">Работайте с вашей сетевой администратор toocorrect hello программного обеспечения параметры tooallow соединений по протоколу SSH.</span><span class="sxs-lookup"><span data-stu-id="f11ca-138">Then work with your network administrator toocorrect hello software settings tooallow SSH connections.</span></span>

<span data-ttu-id="f11ca-139">Если вы используете проверку подлинности сертификата, проверьте наличие папки .ssh toohello эти разрешения в домашнем каталоге:</span><span class="sxs-lookup"><span data-stu-id="f11ca-139">If you are using certificate authentication, verify that you have these permissions toohello .ssh folder in your home directory:</span></span>

* <span data-ttu-id="f11ca-140">Chmod 700 ~/.ssh;</span><span class="sxs-lookup"><span data-stu-id="f11ca-140">Chmod 700 ~/.ssh</span></span>
* <span data-ttu-id="f11ca-141">Chmod 644 ~/.ssh/\*.pub</span><span class="sxs-lookup"><span data-stu-id="f11ca-141">Chmod 644 ~/.ssh/\*.pub</span></span>
* <span data-ttu-id="f11ca-142">Chmod 600 ~/.ssh/id_rsa (или другие файлы, в которых хранятся ваши закрытые ключи);</span><span class="sxs-lookup"><span data-stu-id="f11ca-142">Chmod 600 ~/.ssh/id_rsa (or any other files that have your private keys stored in them)</span></span>
* <span data-ttu-id="f11ca-143">Chmod 644 ~/.ssh/known_hosts (содержит узлы, что вы подключились toovia SSH)</span><span class="sxs-lookup"><span data-stu-id="f11ca-143">Chmod 644 ~/.ssh/known_hosts (contains hosts that you’ve connected toovia SSH)</span></span>

## <a name="source-2-organization-edge-device"></a><span data-ttu-id="f11ca-144">Источник 2: пограничное устройство организации</span><span class="sxs-lookup"><span data-stu-id="f11ca-144">Source 2: Organization edge device</span></span>
<span data-ttu-id="f11ca-145">tooeliminate устройства edge организации, как источник hello сбоя hello, убедитесь, что компьютер, напрямую подключенный toohello Интернета можно приготовить tooyour SSH подключения к виртуальной Машине Azure.</span><span class="sxs-lookup"><span data-stu-id="f11ca-145">tooeliminate your organization edge device as hello source of hello failure, verify that a computer that's directly connected toohello Internet can make SSH connections tooyour Azure VM.</span></span> <span data-ttu-id="f11ca-146">Если вы обращаетесь hello виртуальной Машины через сеть сеть VPN-Подключение или подключение Azure ExpressRoute, пропустите слишком[источника 4: сетевых групп безопасности](#nsg).</span><span class="sxs-lookup"><span data-stu-id="f11ca-146">If you are accessing hello VM over a site-to-site VPN or an Azure ExpressRoute connection, skip too[Source 4: Network security groups](#nsg).</span></span>

![Схема, на которой выделено пограничное устройство организации](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot3.png)

<span data-ttu-id="f11ca-148">Если у вас нет компьютера, находящегося непосредственно подключенных toohello Интернета, создание новой виртуальной Машины Azure в свой собственный ресурс группы или облачной службы и использовать его.</span><span class="sxs-lookup"><span data-stu-id="f11ca-148">If you don't have a computer that is directly connected toohello Internet, create a new Azure VM in its own resource group or cloud service and use it.</span></span> <span data-ttu-id="f11ca-149">Дополнительные сведения см. в статье [Создание виртуальной машины Linux с помощью интерфейса командной строки Azure 2.0](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="f11ca-149">For more information, see [Create a virtual machine running Linux in Azure](quick-create-cli.md).</span></span> <span data-ttu-id="f11ca-150">Удалите hello ресурсов группы или виртуальной Машины и облачные службы после завершения тестирования.</span><span class="sxs-lookup"><span data-stu-id="f11ca-150">Delete hello resource group or VM and cloud service when you're done with your testing.</span></span>

<span data-ttu-id="f11ca-151">При создании SSH-подключения с компьютером, который подключен напрямую toohello Интернет Проверьте устройство пограничного организации для:</span><span class="sxs-lookup"><span data-stu-id="f11ca-151">If you can create an SSH connection with a computer that's directly connected toohello Internet, check your organization edge device for:</span></span>

* <span data-ttu-id="f11ca-152">Внутренним брандмауэром, который блокирует трафик SSH с hello Интернет</span><span class="sxs-lookup"><span data-stu-id="f11ca-152">An internal firewall that's blocking SSH traffic with hello Internet</span></span>
* <span data-ttu-id="f11ca-153">прокси-сервер, который не позволяет устанавливать SSH-подключения;</span><span class="sxs-lookup"><span data-stu-id="f11ca-153">A proxy server that's preventing SSH connections</span></span>
* <span data-ttu-id="f11ca-154">программное обеспечение для обнаружения атак и мониторинга сети, которое работает на устройствах в вашей сети периметра и блокирует SSH-подключения.</span><span class="sxs-lookup"><span data-stu-id="f11ca-154">Intrusion detection or network monitoring software running on devices in your edge network that's preventing SSH connections</span></span>

<span data-ttu-id="f11ca-155">Работать с параметры сети toocorrect администратора hello трафика организации пограничного устройства tooallow SSH с hello Интернета.</span><span class="sxs-lookup"><span data-stu-id="f11ca-155">Work with your network administrator toocorrect hello settings of your organization edge devices tooallow SSH traffic with hello Internet.</span></span>

## <a name="source-3-cloud-service-endpoint-and-acl"></a><span data-ttu-id="f11ca-156">Источник 3: конечная точка облачной службы и список управления доступом (ACL)</span><span class="sxs-lookup"><span data-stu-id="f11ca-156">Source 3: Cloud service endpoint and ACL</span></span>
> [!NOTE]
> <span data-ttu-id="f11ca-157">Этот источник применяется только tooVMs, созданные с помощью hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="f11ca-157">This source applies only tooVMs that were created by using hello classic deployment model.</span></span> <span data-ttu-id="f11ca-158">Для виртуальных машин, которые были созданы с помощью диспетчера ресурсов, пропустить слишком[источника 4: сетевых групп безопасности](#nsg).</span><span class="sxs-lookup"><span data-stu-id="f11ca-158">For VMs that were created by using Resource Manager, skip too[source 4: Network security groups](#nsg).</span></span>

<span data-ttu-id="f11ca-159">tooeliminate hello конечная точка облачной службы и ACL как источник hello сбоя hello, проверьте, что другой виртуальной Машины Azure в hello таким же виртуальной сети можно сделать tooyour подключений SSH виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f11ca-159">tooeliminate hello cloud service endpoint and ACL as hello source of hello failure, verify that another Azure VM in hello same virtual network can make SSH connections tooyour VM.</span></span>

![Диаграмма, на которой выделены конечная точка облачной службы и ACL](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot4.png)

<span data-ttu-id="f11ca-161">Если у вас нет другой виртуальной Машиной в hello одной виртуальной сети, ее можно легко создать.</span><span class="sxs-lookup"><span data-stu-id="f11ca-161">If you don't have another VM in hello same virtual network, you can easily create one.</span></span> <span data-ttu-id="f11ca-162">Дополнительные сведения см. в разделе [Создание виртуальной Машины Linux в Azure, с помощью hello CLI](quick-create-cli.md).</span><span class="sxs-lookup"><span data-stu-id="f11ca-162">For more information, see [Create a Linux VM on Azure using hello CLI](quick-create-cli.md).</span></span> <span data-ttu-id="f11ca-163">Удалить hello очень ВМ после завершения тестирования.</span><span class="sxs-lookup"><span data-stu-id="f11ca-163">Delete hello extra VM when you are done with your testing.</span></span>

<span data-ttu-id="f11ca-164">При создании виртуальной машины в SSH-подключения hello же виртуальной сети, проверьте hello в следующих областях:</span><span class="sxs-lookup"><span data-stu-id="f11ca-164">If you can create an SSH connection with a VM in hello same virtual network, check hello following areas:</span></span>

* <span data-ttu-id="f11ca-165">**Конфигурация конечной точки Hello трафик SSH на целевой hello виртуальной Машины.**</span><span class="sxs-lookup"><span data-stu-id="f11ca-165">**hello endpoint configuration for SSH traffic on hello target VM.**</span></span> <span data-ttu-id="f11ca-166">частный порт TCP Hello hello конечной точки должно совпадать какие hello SSH службы на ВМ hello прослушивает порт TCP hello.</span><span class="sxs-lookup"><span data-stu-id="f11ca-166">hello private TCP port of hello endpoint should match hello TCP port on which hello SSH service on hello VM is listening.</span></span> <span data-ttu-id="f11ca-167">(порт по умолчанию hello — 22).</span><span class="sxs-lookup"><span data-stu-id="f11ca-167">(hello default port is 22).</span></span> <span data-ttu-id="f11ca-168">Проверьте номер порта SSH TCP hello в hello портал Azure, выбрав **виртуальные машины** > *имя виртуальной Машины* > **параметры**  >  **Конечные точки**.</span><span class="sxs-lookup"><span data-stu-id="f11ca-168">Verify hello SSH TCP port number in hello Azure portal by selecting **Virtual machines** > *VM name* > **Settings** > **Endpoints**.</span></span>
* <span data-ttu-id="f11ca-169">**Hello ACL для конечной точки трафика SSH hello hello целевой виртуальной машине.**</span><span class="sxs-lookup"><span data-stu-id="f11ca-169">**hello ACL for hello SSH traffic endpoint on hello target virtual machine.**</span></span> <span data-ttu-id="f11ca-170">Список ACL позволяет toospecify разрешает или запрещает входящий трафик из hello Интернета, на основе исходного IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="f11ca-170">An ACL enables you toospecify allowed or denied incoming traffic from hello Internet, based on its source IP address.</span></span> <span data-ttu-id="f11ca-171">Неправильно настроенные ACL может помешать конечной toohello трафик входящих SSH.</span><span class="sxs-lookup"><span data-stu-id="f11ca-171">Misconfigured ACLs can prevent incoming SSH traffic toohello endpoint.</span></span> <span data-ttu-id="f11ca-172">Проверьте вашей tooensure списки управления доступом разрешен входящий трафик от hello открытый IP-адреса прокси-сервера или других пограничный сервер.</span><span class="sxs-lookup"><span data-stu-id="f11ca-172">Check your ACLs tooensure that incoming traffic from hello public IP addresses of your proxy or other edge server is allowed.</span></span> <span data-ttu-id="f11ca-173">Дополнительные сведения см. в статье [Список управления доступом (ACL) конечной точки](../../virtual-network/virtual-networks-acl.md).</span><span class="sxs-lookup"><span data-stu-id="f11ca-173">For more information, see [About network access control lists (ACLs)](../../virtual-network/virtual-networks-acl.md).</span></span>

<span data-ttu-id="f11ca-174">Конечная точка hello tooeliminate как источник проблемы hello, удалите hello текущей конечной точки, создать другой конечной точкой и укажите имя SSH hello (TCP-порт 22 для номера портов, открытых и закрытых hello).</span><span class="sxs-lookup"><span data-stu-id="f11ca-174">tooeliminate hello endpoint as a source of hello problem, remove hello current endpoint, create another endpoint, and specify hello SSH name (TCP port 22 for hello public and private port number).</span></span> <span data-ttu-id="f11ca-175">Дополнительные сведения см. в статье [Настройка конечных точек в классической виртуальной машине Windows в Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f11ca-175">For more information, see [Set up endpoints on a virtual machine in Azure](../windows/classic/setup-endpoints.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).</span></span>

<a id="nsg"></a>

## <a name="source-4-network-security-groups"></a><span data-ttu-id="f11ca-176">Источник 4: группы безопасности сети</span><span class="sxs-lookup"><span data-stu-id="f11ca-176">Source 4: Network security groups</span></span>
<span data-ttu-id="f11ca-177">Сетевые группы безопасности позволяют toohave более детальный контроль над разрешенного входящего и исходящего трафика.</span><span class="sxs-lookup"><span data-stu-id="f11ca-177">Network security groups enable you toohave more granular control of allowed inbound and outbound traffic.</span></span> <span data-ttu-id="f11ca-178">Можно создавать правила, которые распространяются на подсети и облачные службы в виртуальной сети Azure.</span><span class="sxs-lookup"><span data-stu-id="f11ca-178">You can create rules that span subnets and cloud services in an Azure virtual network.</span></span> <span data-ttu-id="f11ca-179">Проверьте вашей tooensure правил сетевой группы безопасности, tooand трафик SSH из hello, разрешенное в Интернете.</span><span class="sxs-lookup"><span data-stu-id="f11ca-179">Check your network security group rules tooensure that SSH traffic tooand from hello Internet is allowed.</span></span>
<span data-ttu-id="f11ca-180">Дополнительные сведения см. в статье [Группа безопасности сети](../../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="f11ca-180">For more information, see [About network security groups](../../virtual-network/virtual-networks-nsg.md).</span></span>

<span data-ttu-id="f11ca-181">Также можно проверить IP конфигурации NSG toovalidate hello.</span><span class="sxs-lookup"><span data-stu-id="f11ca-181">You can also use IP Verify toovalidate hello NSG configuration.</span></span> <span data-ttu-id="f11ca-182">Дополнительные сведения см. в статье [Обзор мониторинга сети Azure](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span><span class="sxs-lookup"><span data-stu-id="f11ca-182">For more information, see [Azure network monitoring overview](https://docs.microsoft.com/en-us/azure/network-watcher/network-watcher-monitoring-overview).</span></span> 

## <a name="source-5-linux-based-azure-virtual-machine"></a><span data-ttu-id="f11ca-183">Источник 5: виртуальная машина Azure в службе Azure</span><span class="sxs-lookup"><span data-stu-id="f11ca-183">Source 5: Linux-based Azure virtual machine</span></span>
<span data-ttu-id="f11ca-184">Источник последнего Hello возможные проблемы — hello Azure самой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="f11ca-184">hello last source of possible problems is hello Azure virtual machine itself.</span></span>

![Диаграмма, на которой выделена виртуальная машина Azure под управлением Linux](./media/detailed-troubleshoot-ssh-connection/ssh-tshoot5.png)

<span data-ttu-id="f11ca-186">Если вы еще не сделали этого, выполните инструкции hello [tooreset пароль или SSH для виртуальных машин под управлением Linux](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span><span class="sxs-lookup"><span data-stu-id="f11ca-186">If you haven't done so already, follow hello instructions [tooreset a password or SSH for Linux-based virtual machines](classic/reset-access.md?toc=%2fazure%2fvirtual-machines%2flinux%2fclassic%2ftoc.json).</span></span>

<span data-ttu-id="f11ca-187">Попытайтесь снова установить подключение со своего компьютера.</span><span class="sxs-lookup"><span data-stu-id="f11ca-187">Try connecting from your computer again.</span></span> <span data-ttu-id="f11ca-188">Если проблема не исчезла, hello ниже приведены некоторые возможные причины неполадок hello:</span><span class="sxs-lookup"><span data-stu-id="f11ca-188">If it still fails, hello following are some of hello possible issues:</span></span>

* <span data-ttu-id="f11ca-189">Hello SSH-служба не запущена на hello целевой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="f11ca-189">hello SSH service is not running on hello target virtual machine.</span></span>
* <span data-ttu-id="f11ca-190">Hello SSH-служба не прослушивает TCP-порт 22.</span><span class="sxs-lookup"><span data-stu-id="f11ca-190">hello SSH service is not listening on TCP port 22.</span></span> <span data-ttu-id="f11ca-191">tootest, установите клиент telnet на локальном компьютере и запустите «telnet *cloudServiceName*. cloudapp.net 22».</span><span class="sxs-lookup"><span data-stu-id="f11ca-191">tootest, install a telnet client on your local computer and run "telnet *cloudServiceName*.cloudapp.net 22".</span></span> <span data-ttu-id="f11ca-192">Этот шаг определяет, если hello виртуальной машины позволяет входящий и исходящий toohello SSH для взаимодействия.</span><span class="sxs-lookup"><span data-stu-id="f11ca-192">This step determines if hello virtual machine allows inbound and outbound communication toohello SSH endpoint.</span></span>
* <span data-ttu-id="f11ca-193">Hello локальном брандмауэре hello целевой виртуальной машине имеет правила, которые препятствуют входящего и исходящего трафика SSH.</span><span class="sxs-lookup"><span data-stu-id="f11ca-193">hello local firewall on hello target virtual machine has rules that are preventing inbound or outbound SSH traffic.</span></span>
* <span data-ttu-id="f11ca-194">Обнаружение вторжений или сетевого мониторинга программного обеспечения, запущенного на виртуальной машине Azure hello препятствует соединений по протоколу SSH.</span><span class="sxs-lookup"><span data-stu-id="f11ca-194">Intrusion detection or network monitoring software that's running on hello Azure virtual machine is preventing SSH connections.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="f11ca-195">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="f11ca-195">Additional resources</span></span>
<span data-ttu-id="f11ca-196">Дополнительные сведения об устранении неполадок доступа к приложениям см. в разделе [устранить неполадки доступа tooan приложение, работающее на виртуальной машине Azure](troubleshoot-app-connection.md)</span><span class="sxs-lookup"><span data-stu-id="f11ca-196">For more information about troubleshooting application access, see [Troubleshoot access tooan application running on an Azure virtual machine](troubleshoot-app-connection.md)</span></span>
