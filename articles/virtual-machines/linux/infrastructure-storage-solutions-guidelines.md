---
title: "Решения для хранения данных виртуальных машин Linux в Azure | Документация Майкрософт"
description: "Изучите основные рекомендации по проектированию и реализации, касающиеся развертывания решений для хранения данных в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 7c5089b9db945b0e0f4523e53bb44c178ffd0781
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-linux-vms"></a>Рекомендации по службе хранилища Azure для виртуальных машин Linux

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

Эта статья посвящена требованиям к хранилищу и вопросам проектирования, связанным с обеспечением оптимальной производительности виртуальных машин.

## <a name="implementation-guidelines-for-storage"></a>Рекомендации по реализации хранилища
Решения

* Что вы собираетесь использовать: Управляемые диски Azure или неуправляемые диски?
* Для рабочей нагрузки необходимо использовать хранилище уровня "Стандартный" или "Премиум"?
* Требуется ли чередование для создания дисков размером более 4 ТБ?
* Требуется ли чередование дисков, чтобы обеспечить оптимальную производительность ввода-вывода для рабочей нагрузки?
* Какие учетные записи хранения необходимы для размещения рабочей нагрузки в ИТ-среде или ИТ-инфраструктуры?

Задачи

* Просмотрите требования к вводу-выводу разворачиваемых приложений и спланируйте нужное количество и тип учетных записей хранения.
* Создать набор учетных записей хранения с использованием соглашения об именовании. Можно использовать интерфейс командной строки Azure (Azure CLI) или портал.

## <a name="storage"></a>Хранилище
Служба хранилища Azure — ключевая составляющая в развертывании виртуальных машин и приложений и управлении ими. Служба хранилища Azure предоставляет службы для хранения файловых данных, неструктурированных данных и сообщений, а также является частью инфраструктуры, обслуживающей виртуальные машины.

[Управляемые диски Azure](../../storage/storage-managed-disks-overview.md) обслуживают хранилище в фоновом режиме. При использовании неуправляемых дисков, чтобы хранить диски (VHD-файлы) для виртуальных машин Azure, нужно создавать учетные записи хранения. При увеличении масштаба требуется создавать дополнительные учетные записи хранения, чтобы не превысить предел операций ввода-вывода в секунду для дисков в хранилище. При использовании хранилища, которое управляется с помощью управляемых дисков, ограничения для учетной записи хранения (например, 20 000 операций ввода-вывода в секунду на учетную запись) отсутствуют. Больше не требуется копировать пользовательские образы (VHD-файлы) в несколько учетных записей хранения. Вы можете управлять ими в одной учетной записи хранения на каждый регион Azure и использовать их для создания сотен виртуальных машин в одной подписке. Мы рекомендуем использовать Управляемые диски для новых развертываний.

Для обслуживания виртуальных машин доступны учетные записи хранения двух типов.

* Учетная запись хранения уровня "Стандартный" предоставляет доступ к хранилищу BLOB-объектов (которое используется для хранения дисков виртуальных машин Azure), хранилищу таблиц, хранилищу очередей и хранилищу файлов.
* [хранения уровня "Премиум"](../../storage/storage-premium-storage.md) обеспечивают высокопроизводительные диски с малой задержкой для рабочих нагрузок с интенсивным вводом-выводом, например для рабочих нагрузок в сегментированных кластерах MongoDB. В настоящее время хранилище уровня "Премиум" поддерживает только диски виртуальных машин Azure.

Azure создает виртуальные машины с диском операционной системы, временным диском и любым количеством дополнительных дисков данных (которые могут и отсутствовать). Диск операционной системы и диски данных — страничные BLOB-объекты Azure, тогда как временный диск хранится на локальном узле, на котором запущена виртуальная машина. Будьте внимательны при проектировании приложений, использующих только этот временный диск для временных данных, так как во время события обслуживания виртуальная машина может быть перенесена между узлами. При этом все данные, хранящиеся на временном диске, будут потеряны.

Базовая среда службы хранилища Azure обеспечивает устойчивость и высокий уровень доступности. Это гарантирует защиту данных от внепланового обслуживания или сбоев оборудования. При разработке среды службы хранилища Azure можно выбрать способ репликации хранилища виртуальной машины:

* локально в пределах заданного центра обработки данных Azure;
* между центрами обработки данных Azure в пределах заданного региона;
* между центрами обработки данных Azure из разных регионов.

Вы можете больше узнать о [возможностях репликации для обеспечения высокого уровня доступности](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).

Максимальный размер дисков операционной системы и дисков данных составляет 4 ГБ. Чтобы преодолеть это ограничение, можно использовать диспетчер логических томов (LVM), чтобы сформировать пулы дисков данных, представляющие логические тома более 1023 ГБ для виртуальной машины.

Существуют некоторые ограничения масштабируемости, накладываемые при проектировании развертываний службы хранилища Azure. Дополнительные сведения об этом см. в статье [Подписка Azure, границы, квоты и ограничения службы](../../azure-subscription-service-limits.md#storage-limits). Ознакомьтесь также со статьей [Целевые показатели масштабируемости и производительности хранилища Azure](../../storage/storage-scalability-targets.md).

Что касается хранилища приложений, можно хранить неструктурированные данные объектов, таких как документы, изображения, резервные копии, данные конфигурации, журналы и т. д., используя хранилище BLOB-объектов. Вместо того, чтобы записывать данные на виртуальный диск, подключенный к виртуальной машине, приложение может записывать их непосредственно в хранилище BLOB-объектов Azure. Хранилище BLOB-объектов также предоставляет функцию ["горячего" и "холодного" уровней хранилища](../../storage/storage-blob-storage-tiers.md) , которую можно использовать в зависимости от требований к доступности и ограничений затрат.

## <a name="striped-disks"></a>Диски с чередованием
Использование чередования для дисков данных, помимо возможности создавать диски размером более 1023 ГБ, во многих случаях увеличивает производительность благодаря тому, что для единого тома хранилища используются несколько больших двоичных объектов. При чередовании дисков операции ввода-вывода для одного логического диска могут выполняться параллельно.

Azure накладывает ограничения на количество дисков данных и пропускную способность в зависимости от размера виртуальной машины. Дополнительные сведения см. в статье [Размеры виртуальных машин](sizes.md).

При использовании чередования дисков данных Azure придерживайтесь следующих рекомендаций:

* Подключайте столько дисков данных, сколько позволяет размер виртуальной машины.
* Используйте LVM.
* Избегайте использовать параметры кэширования дисков данных Azure (для политики кэширования нужно выбрать параметр "Нет").

Дополнительные сведения см. в статье [Настройка диспетчера логических томов на виртуальной машине Linux в Azure](configure-lvm.md).

## <a name="multiple-storage-accounts"></a>Несколько учетных записей хранения
Этот раздел не относится к [Управляемым дискам Azure](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), так как вы не создаете отдельные учетные записи хранения. 

При проектировании среды службы хранилища Azure для неуправляемых дисков вы можете использовать несколько учетных записей хранения, так как количество развертываемых виртуальных машин может увеличиться. Такой подход помогает распределить операции ввода-вывода по базовой инфраструктуре службы хранилища Azure, чтобы обеспечить оптимальную производительность виртуальных машин и приложений. При проектировании развертываемых приложений учтите требования к вводу-выводу каждой виртуальной машины и равномерно распределите их между учетными записями хранения Azure. Старайтесь избегать группирования всех виртуальных машин с высокой интенсивностью ввода-вывода всего лишь в одной или двух учетных записях хранения.

Дополнительную информацию о возможностях ввода-вывода различных вариантов службы хранилища Azure и некоторые рекомендуемые максимальные значения можно найти в статье [Целевые показатели масштабируемости и производительности службы хранилища Azure](../../storage/storage-scalability-targets.md).

## <a name="next-steps"></a>Дальнейшие действия
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

