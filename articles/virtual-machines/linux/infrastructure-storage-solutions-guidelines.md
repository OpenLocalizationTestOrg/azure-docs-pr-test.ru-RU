---
title: "aaaStorage решений для виртуальных машин Linux в Azure | Документы Microsoft"
description: "Дополнительные сведения о hello ключевые проектирования и реализации рекомендации по развертыванию решений для хранения данных в службах инфраструктуры Azure."
documentationcenter: 
services: virtual-machines-linux
author: iainfoulds
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 3c368f07-189b-4520-bbe2-f4080253bbf2
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/26/2017
ms.author: iainfou
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: d270c4786d7b55b18b011aa345063b6816a80876
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-storage-infrastructure-guidelines-for-linux-vms"></a><span data-ttu-id="f8e73-103">Рекомендации по службе хранилища Azure для виртуальных машин Linux</span><span class="sxs-lookup"><span data-stu-id="f8e73-103">Azure storage infrastructure guidelines for Linux VMs</span></span>

[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-intro](../../../includes/virtual-machines-linux-infrastructure-guidelines-intro.md)]

<span data-ttu-id="f8e73-104">Эта статья посвящена требованиям к хранилищу и вопросам проектирования, связанным с обеспечением оптимальной производительности виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="f8e73-104">This article focuses on understanding storage needs and design considerations for achieving optimum virtual machine (VM) performance.</span></span>

## <a name="implementation-guidelines-for-storage"></a><span data-ttu-id="f8e73-105">Рекомендации по реализации хранилища</span><span class="sxs-lookup"><span data-stu-id="f8e73-105">Implementation guidelines for storage</span></span>
<span data-ttu-id="f8e73-106">Решения</span><span class="sxs-lookup"><span data-stu-id="f8e73-106">Decisions:</span></span>

* <span data-ttu-id="f8e73-107">Будут ли toouse Azure диски управляемого или неуправляемого дисков?</span><span class="sxs-lookup"><span data-stu-id="f8e73-107">Are you going toouse Azure Managed Disks or unmanaged disks?</span></span>
* <span data-ttu-id="f8e73-108">Требуется хранилище toouse Standard или Premium для рабочей нагрузки?</span><span class="sxs-lookup"><span data-stu-id="f8e73-108">Do you need toouse Standard or Premium storage for your workload?</span></span>
* <span data-ttu-id="f8e73-109">Требуется дисков toocreate чередование дисков размером более 4 ТБ?</span><span class="sxs-lookup"><span data-stu-id="f8e73-109">Do you need disk striping toocreate disks larger than 4TB?</span></span>
* <span data-ttu-id="f8e73-110">Требуется оптимальной производительности операций ввода-вывода диска чередование tooachieve для рабочей нагрузки?</span><span class="sxs-lookup"><span data-stu-id="f8e73-110">Do you need disk striping tooachieve optimal I/O performance for your workload?</span></span>
* <span data-ttu-id="f8e73-111">Какой набор учетных записей хранения нужна toohost рабочей нагрузки ИТ или инфраструктуры?</span><span class="sxs-lookup"><span data-stu-id="f8e73-111">What set of storage accounts do you need toohost your IT workload or infrastructure?</span></span>

<span data-ttu-id="f8e73-112">Задачи</span><span class="sxs-lookup"><span data-stu-id="f8e73-112">Tasks:</span></span>

* <span data-ttu-id="f8e73-113">Просмотрите требования ввода-вывода приложений hello, развертывании и планирование hello нужное число и тип учетных записей хранения.</span><span class="sxs-lookup"><span data-stu-id="f8e73-113">Review I/O demands of hello applications you are deploying and plan hello appropriate number and type of storage accounts.</span></span>
* <span data-ttu-id="f8e73-114">Создайте набор hello с помощью имен учетных записей хранения.</span><span class="sxs-lookup"><span data-stu-id="f8e73-114">Create hello set of storage accounts using your naming convention.</span></span> <span data-ttu-id="f8e73-115">Можно использовать портал Azure CLI или hello hello.</span><span class="sxs-lookup"><span data-stu-id="f8e73-115">You can use hello Azure CLI or hello portal.</span></span>

## <a name="storage"></a><span data-ttu-id="f8e73-116">Хранилище</span><span class="sxs-lookup"><span data-stu-id="f8e73-116">Storage</span></span>
<span data-ttu-id="f8e73-117">Служба хранилища Azure — ключевая составляющая в развертывании виртуальных машин и приложений и управлении ими.</span><span class="sxs-lookup"><span data-stu-id="f8e73-117">Azure Storage is a key part of deploying and managing virtual machines (VMs) and applications.</span></span> <span data-ttu-id="f8e73-118">Хранилища Azure предоставляет службы для хранения файлов данных, неструктурированные данные и сообщения, и он также является частью инфраструктуры hello, поддержка виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="f8e73-118">Azure Storage provides services for storing file data, unstructured data, and messages, and it is also part of hello infrastructure supporting VMs.</span></span>

<span data-ttu-id="f8e73-119">[Диски Azure управляемых](../../storage/storage-managed-disks-overview.md) обрабатывает хранилища для вас фоновом hello.</span><span class="sxs-lookup"><span data-stu-id="f8e73-119">[Azure Managed Disks](../../storage/storage-managed-disks-overview.md) handles storage for you behind hello scenes.</span></span> <span data-ttu-id="f8e73-120">В неуправляемой дисков создать учетные записи хранения toohold hello дисков (VHD-файлы) для виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="f8e73-120">With unmanaged disks, you create storage accounts toohold hello disks (VHD files) for your Azure VMs.</span></span> <span data-ttu-id="f8e73-121">При масштабировании должен убедитесь, что вы создали дополнительные учетные записи хранения, не превышает ограничение hello операций ввода-ВЫВОДА хранилища с любым диски.</span><span class="sxs-lookup"><span data-stu-id="f8e73-121">When scaling up, you must make sure you created additional storage accounts so you don’t exceed hello IOPS limit for storage with any of your disks.</span></span> <span data-ttu-id="f8e73-122">С дисками, управляемых обработки хранилища, вы больше не ограничены hello ограничения учетной записи хранения (например, 20 000 операций ввода-ВЫВОДА / учетной записи).</span><span class="sxs-lookup"><span data-stu-id="f8e73-122">With Managed Disks handling storage, you are no longer limited by hello storage account limits (such as 20,000 IOPS / account).</span></span> <span data-ttu-id="f8e73-123">Вы больше не имеют toocopy учетные записи хранения toomultiple пользовательских образов (VHD-файлы).</span><span class="sxs-lookup"><span data-stu-id="f8e73-123">You also no longer have toocopy your custom images (VHD files) toomultiple storage accounts.</span></span> <span data-ttu-id="f8e73-124">Можно управлять ими в одном месте — одну учетную запись хранения в одном регионе Azure и использовать их toocreate сотен ВМ в подписке.</span><span class="sxs-lookup"><span data-stu-id="f8e73-124">You can manage them in a central location – one storage account per Azure region – and use them toocreate hundreds of VMs in a subscription.</span></span> <span data-ttu-id="f8e73-125">Мы рекомендуем использовать Управляемые диски для новых развертываний.</span><span class="sxs-lookup"><span data-stu-id="f8e73-125">We recommend you use Managed Disks for new deployments.</span></span>

<span data-ttu-id="f8e73-126">Для обслуживания виртуальных машин доступны учетные записи хранения двух типов.</span><span class="sxs-lookup"><span data-stu-id="f8e73-126">There are two types of storage accounts available for supporting VMs:</span></span>

* <span data-ttu-id="f8e73-127">Стандартное хранилище учетные записи предоставляют доступ tooblob хранилища (используется для хранения дисков виртуальной Машины Azure), хранилище, хранилище очередей, таблиц и хранилище файлов.</span><span class="sxs-lookup"><span data-stu-id="f8e73-127">Standard storage accounts give you access tooblob storage (used for storing Azure VM disks), table storage, queue storage, and file storage.</span></span>
* <span data-ttu-id="f8e73-128">[хранения уровня "Премиум"](../../storage/storage-premium-storage.md) обеспечивают высокопроизводительные диски с малой задержкой для рабочих нагрузок с интенсивным вводом-выводом, например для рабочих нагрузок в сегментированных кластерах MongoDB.</span><span class="sxs-lookup"><span data-stu-id="f8e73-128">[Premium storage](../../storage/storage-premium-storage.md) accounts deliver high-performance, low-latency disk support for I/O intensive workloads, such as MongoDB Sharded cluster.</span></span> <span data-ttu-id="f8e73-129">В настоящее время хранилище уровня "Премиум" поддерживает только диски виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="f8e73-129">Premium storage currently supports Azure VM disks only.</span></span>

<span data-ttu-id="f8e73-130">Azure создает виртуальные машины с диском операционной системы, временным диском и любым количеством дополнительных дисков данных (которые могут и отсутствовать).</span><span class="sxs-lookup"><span data-stu-id="f8e73-130">Azure creates VMs with an operating system disk, a temporary disk, and zero or more optional data disks.</span></span> <span data-ttu-id="f8e73-131">Hello диск операционной системы и дисков данных — Azure страничных BLOB-объектов, а временный диск hello хранится локально на узле hello, где находятся машины hello.</span><span class="sxs-lookup"><span data-stu-id="f8e73-131">hello operating system disk and data disks are Azure page blobs, whereas hello temporary disk is stored locally on hello node where hello machine lives.</span></span> <span data-ttu-id="f8e73-132">Будьте внимательны при разработке приложений, tooonly служит этом временном диске для временных данных hello между узлами во время события обслуживания может выполнить миграцию виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f8e73-132">Take care when designing applications tooonly use this temporary disk for non-persistent data as hello VM may be migrated between hosts during a maintenance event.</span></span> <span data-ttu-id="f8e73-133">Данные, хранящиеся на временном диске hello, будут потеряны.</span><span class="sxs-lookup"><span data-stu-id="f8e73-133">Any data stored on hello temporary disk would be lost.</span></span>

<span data-ttu-id="f8e73-134">Устойчивость и высокий уровень доступности обеспечивается hello базового хранилища Azure среды tooensure сохранение данные защищены от незапланированных сбоев оборудования или обслуживания.</span><span class="sxs-lookup"><span data-stu-id="f8e73-134">Durability and high availability is provided by hello underlying Azure Storage environment tooensure that your data remains protected against unplanned maintenance or hardware failures.</span></span> <span data-ttu-id="f8e73-135">При разработке среды хранилища Azure, вы можете tooreplicate хранилище виртуальных Машин:</span><span class="sxs-lookup"><span data-stu-id="f8e73-135">As you design your Azure Storage environment, you can choose tooreplicate VM storage:</span></span>

* <span data-ttu-id="f8e73-136">локально в пределах заданного центра обработки данных Azure;</span><span class="sxs-lookup"><span data-stu-id="f8e73-136">locally within a given Azure datacenter</span></span>
* <span data-ttu-id="f8e73-137">между центрами обработки данных Azure в пределах заданного региона;</span><span class="sxs-lookup"><span data-stu-id="f8e73-137">across Azure datacenters within a given region</span></span>
* <span data-ttu-id="f8e73-138">между центрами обработки данных Azure из разных регионов.</span><span class="sxs-lookup"><span data-stu-id="f8e73-138">across Azure datacenters across different regions.</span></span>

<span data-ttu-id="f8e73-139">Можно прочитать [Дополнительные сведения о параметрах репликации hello для обеспечения высокой доступности](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span><span class="sxs-lookup"><span data-stu-id="f8e73-139">You can read [more about hello replication options for high availability](../../storage/storage-introduction.md#replication-for-durability-and-high-availability).</span></span>

<span data-ttu-id="f8e73-140">Максимальный размер дисков операционной системы и дисков данных составляет 4 ГБ.</span><span class="sxs-lookup"><span data-stu-id="f8e73-140">Operating system disks and data disks have a maximum size of 4TB.</span></span> <span data-ttu-id="f8e73-141">Это ограничение toosurpass диспетчер логических томов (LVM) можно использовать совместно объединение данных дисков toopresent логического тома размером более 1023 ГБ tooyour виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f8e73-141">You can use Logical Volume Manager (LVM) toosurpass this limit by pooling together data disks toopresent logical volumes larger than 1023GB tooyour VM.</span></span>

<span data-ttu-id="f8e73-142">Существуют некоторые ограничения масштабируемости, накладываемые при проектировании развертываний службы хранилища Azure. Дополнительные сведения об этом см. в статье [Подписка Azure, границы, квоты и ограничения службы](../../azure-subscription-service-limits.md#storage-limits).</span><span class="sxs-lookup"><span data-stu-id="f8e73-142">There are some scalability limits when designing your Azure Storage deployments - for more information, see [Microsoft Azure subscription and service limits, quotas, and constraints](../../azure-subscription-service-limits.md#storage-limits).</span></span> <span data-ttu-id="f8e73-143">Ознакомьтесь также со статьей [Целевые показатели масштабируемости и производительности хранилища Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="f8e73-143">Also see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

<span data-ttu-id="f8e73-144">Что касается хранилища приложений, можно хранить неструктурированные данные объектов, таких как документы, изображения, резервные копии, данные конфигурации, журналы и т.</span><span class="sxs-lookup"><span data-stu-id="f8e73-144">For application storage, you can store unstructured object data such as documents, images, backups, configuration data, logs, etc.</span></span> <span data-ttu-id="f8e73-145">д., используя хранилище BLOB-объектов.</span><span class="sxs-lookup"><span data-stu-id="f8e73-145">using blob storage.</span></span> <span data-ttu-id="f8e73-146">Вместо того чтобы приложения записи toohello tooa виртуальный диск виртуальной Машины приложение hello сможет выполнять непосредственную запись tooAzure хранилища больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="f8e73-146">Rather than your application writing tooa virtual disk attached toohello VM, hello application can write directly tooAzure blob storage.</span></span> <span data-ttu-id="f8e73-147">Хранилище больших двоичных объектов также предоставляет возможность hello [горячей и охлаждение уровни хранилища](../../storage/storage-blob-storage-tiers.md) в зависимости от того, требованиями и ограничениями расходов на доступность.</span><span class="sxs-lookup"><span data-stu-id="f8e73-147">Blob storage also provides hello option of [hot and cool storage tiers](../../storage/storage-blob-storage-tiers.md) depending on your availability needs and cost constraints.</span></span>

## <a name="striped-disks"></a><span data-ttu-id="f8e73-148">Диски с чередованием</span><span class="sxs-lookup"><span data-stu-id="f8e73-148">Striped disks</span></span>
<span data-ttu-id="f8e73-149">Помимо возможности toocreate дисков больше 1023 ГБ во многих случаях, с помощью чередование дисков данных повышает производительность, позволяя несколько больших двоичных объектов хранилища hello tooback для одного тома.</span><span class="sxs-lookup"><span data-stu-id="f8e73-149">Besides allowing you toocreate disks larger than 1023 GB, in many instances, using striping for data disks enhances performance by allowing multiple blobs tooback hello storage for a single volume.</span></span> <span data-ttu-id="f8e73-150">Используя чередование, toowrite необходимые hello ввода-вывода и чтения данных из одного логического диска выполняется параллельно.</span><span class="sxs-lookup"><span data-stu-id="f8e73-150">With striping, hello I/O required toowrite and read data from a single logical disk proceeds in parallel.</span></span>

<span data-ttu-id="f8e73-151">Azure налагает ограничения на hello количество дисков данных и объем пропускной способности, в зависимости от размера виртуальной Машины hello.</span><span class="sxs-lookup"><span data-stu-id="f8e73-151">Azure imposes limits on hello number of data disks and amount of bandwidth available, depending on hello VM size.</span></span> <span data-ttu-id="f8e73-152">Дополнительные сведения см. в статье [Размеры виртуальных машин](sizes.md).</span><span class="sxs-lookup"><span data-stu-id="f8e73-152">For details, see [Sizes for virtual machines](sizes.md)</span></span>

<span data-ttu-id="f8e73-153">При использовании чередования дисков для дисков данных Azure рекомендуется следовать рекомендациям hello:</span><span class="sxs-lookup"><span data-stu-id="f8e73-153">If you are using disk striping for Azure data disks, consider hello following guidelines:</span></span>

* <span data-ttu-id="f8e73-154">Присоединение дисков hello максимальный объем данных, допустимых для hello размер виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="f8e73-154">Attach hello maximum data disks allowed for hello VM size.</span></span>
* <span data-ttu-id="f8e73-155">Используйте LVM.</span><span class="sxs-lookup"><span data-stu-id="f8e73-155">Use LVM.</span></span>
* <span data-ttu-id="f8e73-156">Избегайте использовать параметры кэширования дисков данных Azure (для политики кэширования нужно выбрать параметр "Нет").</span><span class="sxs-lookup"><span data-stu-id="f8e73-156">Avoid using Azure data disk caching options (caching policy = None).</span></span>

<span data-ttu-id="f8e73-157">Дополнительные сведения см. в статье [Настройка диспетчера логических томов на виртуальной машине Linux в Azure](configure-lvm.md).</span><span class="sxs-lookup"><span data-stu-id="f8e73-157">For more information, see [Configuring LVM on a Linux VM](configure-lvm.md).</span></span>

## <a name="multiple-storage-accounts"></a><span data-ttu-id="f8e73-158">Несколько учетных записей хранения</span><span class="sxs-lookup"><span data-stu-id="f8e73-158">Multiple storage accounts</span></span>
<span data-ttu-id="f8e73-159">В этом разделе не применяется слишком[управляемых дисков Azure](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), как не следует создавать отдельные учетные записи хранения.</span><span class="sxs-lookup"><span data-stu-id="f8e73-159">This section does not apply too[Azure Managed Disks](../../storage/storage-managed-disks-overview.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json), as you do not create separate storage accounts.</span></span> 

<span data-ttu-id="f8e73-160">При проектировании среды хранилища Azure для неуправляемых диски, можно использовать несколько учетных записей хранения согласно hello число виртуальных машин, развертываемых увеличивается.</span><span class="sxs-lookup"><span data-stu-id="f8e73-160">When designing your Azure Storage environment for unmanaged disks, you can use multiple storage accounts as hello number of VMs you deploy increases.</span></span> <span data-ttu-id="f8e73-161">Такой подход помогает распределять out hello ввода-вывода между hello базового хранилища Azure инфраструктуры toomaintain оптимальной производительности для виртуальных машин и приложений.</span><span class="sxs-lookup"><span data-stu-id="f8e73-161">This approach helps distribute out hello I/O across hello underlying Azure Storage infrastructure toomaintain optimum performance for your VMs and applications.</span></span> <span data-ttu-id="f8e73-162">При разработке приложения hello, развертывании, учитывайте требования ввода-вывода hello, у каждой виртуальной Машины и баланс out этих виртуальных машин в учетных записях хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="f8e73-162">As you design hello applications that you are deploying, consider hello I/O requirements each VM has and balance out those VMs across Azure Storage accounts.</span></span> <span data-ttu-id="f8e73-163">Попробуйте tooavoid Группирование всех hello высокой ввода-вывода ресурсоемких виртуальных машин в учетных записях хранения toojust одной или двумя.</span><span class="sxs-lookup"><span data-stu-id="f8e73-163">Try tooavoid grouping all hello high I/O demanding VMs in toojust one or two storage accounts.</span></span>

<span data-ttu-id="f8e73-164">Дополнительные сведения о возможностях hello ввода-вывода hello различных вариантов хранилища Azure, а также некоторые рекомендации максимальные ограничения, см. в разделе [целей производительности и масштабируемости хранилища Azure](../../storage/storage-scalability-targets.md).</span><span class="sxs-lookup"><span data-stu-id="f8e73-164">For more information about hello I/O capabilities of hello different Azure Storage options and some recommend maximums, see [Azure storage scalability and performance targets](../../storage/storage-scalability-targets.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="f8e73-165">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="f8e73-165">Next steps</span></span>
[!INCLUDE [virtual-machines-linux-infrastructure-guidelines-next-steps](../../../includes/virtual-machines-linux-infrastructure-guidelines-next-steps.md)]

