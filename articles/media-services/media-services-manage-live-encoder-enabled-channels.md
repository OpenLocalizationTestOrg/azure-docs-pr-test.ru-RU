---
title: "Потоковая трансляция с использованием служб мультимедиа Azure для создания потоков с разными скоростями | Документация Майкрософт"
description: "В этой статье описывается, как настроить канал, принимающий односкоростной динамический поток от локального кодировщика и кодирующий его в реальном времени в поток с адаптивной скоростью с помощью служб мультимедиа. Далее этот поток можно доставлять в клиентские приложения для воспроизведения через одну или несколько конечных точек потоковой передачи по одному из следующих протоколов потоковой передачи с переменной скоростью: HLS, Smooth Stream или MPEG-DASH."
services: media-services
documentationcenter: 
author: anilmur
manager: cfowler
editor: 
ms.assetid: 30ce6556-b0ff-46d8-a15d-5f10e4c360e2
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/09/2017
ms.author: juliako;anilmur
ms.openlocfilehash: d5f76d532b236e67a4e69eb820e2cfc3033a80c6
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="live-streaming-using-azure-media-services-to-create-multi-bitrate-streams"></a><span data-ttu-id="adc50-104">Потоковая трансляция с использованием служб мультимедиа Azure для создания потоков с разными скоростями</span><span class="sxs-lookup"><span data-stu-id="adc50-104">Live streaming using Azure Media Services to create multi-bitrate streams</span></span>
## <a name="overview"></a><span data-ttu-id="adc50-105">Обзор</span><span class="sxs-lookup"><span data-stu-id="adc50-105">Overview</span></span>
<span data-ttu-id="adc50-106">В службах мультимедиа Azure (AMS) **канал** представляет конвейер для обработки динамического потокового контента.</span><span class="sxs-lookup"><span data-stu-id="adc50-106">In Azure Media Services (AMS), a **Channel** represents a pipeline for processing live streaming content.</span></span> <span data-ttu-id="adc50-107">**Канал** получает входные потоки одним из двух способов.</span><span class="sxs-lookup"><span data-stu-id="adc50-107">A **Channel** receives live input streams in one of two ways:</span></span>

* <span data-ttu-id="adc50-108">Локальный динамический кодировщик передает односкоростной поток в канал, который может осуществлять кодирование в реальном времени с помощью служб мультимедиа, в одном из следующих форматов: RTP (MPEG-TS), RTMP или Smooth Streaming (Fragmented MP4) .</span><span class="sxs-lookup"><span data-stu-id="adc50-108">An on-premises live encoder sends a single-bitrate stream to the Channel that is enabled to perform live encoding with Media Services in one of the following formats: RTP (MPEG-TS), RTMP, or Smooth Streaming (Fragmented MP4).</span></span> <span data-ttu-id="adc50-109">Затем канал кодирует входящий односкоростной поток в реальном времени в многоскоростной (адаптивный) видеопоток.</span><span class="sxs-lookup"><span data-stu-id="adc50-109">The Channel then performs live encoding of the incoming single bitrate stream to a multi-bitrate (adaptive) video stream.</span></span> <span data-ttu-id="adc50-110">При получении запроса службы мультимедиа предоставляют потоки клиентам.</span><span class="sxs-lookup"><span data-stu-id="adc50-110">When requested, Media Services delivers the stream to customers.</span></span>
* <span data-ttu-id="adc50-111">Локальный динамический кодировщик передает содержимое в формате **RTMP** или **Smooth Streaming** (фрагментированный MP4) с несколькими скоростями в канал, для которого не включена поддержка кодирования в реальном времени с помощью AMS.</span><span class="sxs-lookup"><span data-stu-id="adc50-111">An on-premises live encoder sends a multi-bitrate **RTMP** or **Smooth Streaming** (Fragmented MP4) to the Channel that is not enabled to perform live encoding with AMS.</span></span> <span data-ttu-id="adc50-112">Полученные потоки передаются через **каналы**без дальнейшей обработки.</span><span class="sxs-lookup"><span data-stu-id="adc50-112">The ingested streams pass through **Channel**s without any further processing.</span></span> <span data-ttu-id="adc50-113">Этот способ называется **сквозной передачей**.</span><span class="sxs-lookup"><span data-stu-id="adc50-113">This method is called **pass-through**.</span></span> <span data-ttu-id="adc50-114">Вы можете использовать следующие динамические кодировщики, выдающие содержимое в формате потоковой передачи Smooth Streaming с несколькими скоростями: MediaExcel, Ateme, Imagine Communications, Envivio, Cisco и Elemental.</span><span class="sxs-lookup"><span data-stu-id="adc50-114">You can use the following live encoders that output multi-bitrate Smooth Streaming: MediaExcel, Ateme, Imagine Communications, Envivio, Cisco and Elemental.</span></span> <span data-ttu-id="adc50-115">Следующие динамические кодировщики выдают содержимое в формате RTMP: Adobe Flash Media Live Encoder (FMLE), Telestream Wirecast, Haivision, Teradek и Tricaster.</span><span class="sxs-lookup"><span data-stu-id="adc50-115">The following live encoders output RTMP: Adobe Flash Media Live Encoder (FMLE), Telestream Wirecast, Haivision, Teradek and Tricaster encoders.</span></span>  <span data-ttu-id="adc50-116">Динамический кодировщик может также передавать односкоростной поток в канал, для которого не включено динамическое кодирование, но это не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="adc50-116">A live encoder can also send a single bitrate stream to a channel that is not enabled for live encoding, but that is not recommended.</span></span> <span data-ttu-id="adc50-117">При получении запроса службы мультимедиа предоставляют потоки клиентам.</span><span class="sxs-lookup"><span data-stu-id="adc50-117">When requested, Media Services delivers the stream to customers.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="adc50-118">Использование сквозной передачи является наиболее экономичным способом потоковой передачи в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="adc50-118">Using a pass-through method is the most economical way to do live streaming.</span></span>
  > 
  > 

<span data-ttu-id="adc50-119">Начиная с выпуска 2.10 служб мультимедиа, при создании канала можно указать, как он должен принимать входной поток и должен ли он выполнять его кодирование в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="adc50-119">Starting with the Media Services 2.10 release, when you create a Channel, you can specify in which way you want for your channel to receive the input stream and whether or not you want for the channel to perform live encoding of your stream.</span></span> <span data-ttu-id="adc50-120">Существует два варианта.</span><span class="sxs-lookup"><span data-stu-id="adc50-120">You have two options:</span></span>

* <span data-ttu-id="adc50-121">**Нет** — задайте это значение, если вы собираетесь использовать локальный динамический кодировщик, который будет выдавать многоскоростной (сквозной) поток.</span><span class="sxs-lookup"><span data-stu-id="adc50-121">**None** – Specify this value, if you plan to use an on-premises live encoder which will output multi-bitrate stream (a pass-through stream).</span></span> <span data-ttu-id="adc50-122">В этом случае входящий поток передается на выход без кодирования.</span><span class="sxs-lookup"><span data-stu-id="adc50-122">In this case, the incoming stream passed through to the output without any encoding.</span></span> <span data-ttu-id="adc50-123">Таким образом каналы работали до выпуска 2.10.</span><span class="sxs-lookup"><span data-stu-id="adc50-123">This is the behavior of a Channel prior to 2.10 release.</span></span>  <span data-ttu-id="adc50-124">Более подробную информацию о работе с каналами такого типа см. в статье [Потоковая трансляция с помощью локальных кодировщиков, создающих потоки с разными скоростями](media-services-live-streaming-with-onprem-encoders.md).</span><span class="sxs-lookup"><span data-stu-id="adc50-124">For more detailed information about working with channels of this type, see [Live streaming with on-premises encoders that create multi-bitrate streams](media-services-live-streaming-with-onprem-encoders.md).</span></span>
* <span data-ttu-id="adc50-125">**Стандартный** — выберите это значение, если собираетесь использовать службы мультимедиа для кодирования односкоростного потока во многоскоростной.</span><span class="sxs-lookup"><span data-stu-id="adc50-125">**Standard** – Choose this value, if you plan to use Media Services to encode your single bitrate live stream to multi-bitrate stream.</span></span> <span data-ttu-id="adc50-126">Помните о том, что за кодирование в реальном времени взимается плата, поэтому, если вы оставите канал кодирования в реальном времени в состоянии "Работает", вам будут выставлены соответствующие счета.</span><span class="sxs-lookup"><span data-stu-id="adc50-126">Be aware that there is a billing impact for live encoding and you should remember that leaving a live encoding channel in the "Running" state will incur billing charges.</span></span>  <span data-ttu-id="adc50-127">Рекомендуется сразу же прекращать работу канала после завершения потоковой передачи в реальном времени во избежание оплаты дополнительных часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-127">It is recommended that you immediately stop your running channels after your live streaming event is complete to avoid extra hourly charges.</span></span>

> [!NOTE]
> <span data-ttu-id="adc50-128">В этом разделе рассматриваются атрибуты канала, с помощью которых обеспечивается кодирование в реальном времени (тип кодирования **Стандартный**).</span><span class="sxs-lookup"><span data-stu-id="adc50-128">This topic discusses attributes of channels that are enabled to perform live encoding (**Standard** encoding type).</span></span> <span data-ttu-id="adc50-129">Информацию о работе с каналами, которые не выполняют кодирование в реальном времени, см. в статье [Потоковая трансляция с помощью локальных кодировщиков, создающих потоки с разными скоростями](media-services-live-streaming-with-onprem-encoders.md).</span><span class="sxs-lookup"><span data-stu-id="adc50-129">For information about working with channels that are not enabled to perform live encoding, see [Live streaming with on-premises encoders that create multi-bitrate streams](media-services-live-streaming-with-onprem-encoders.md).</span></span>
> 
> <span data-ttu-id="adc50-130">Обязательно изучите раздел [Рекомендации](media-services-manage-live-encoder-enabled-channels.md#Considerations) .</span><span class="sxs-lookup"><span data-stu-id="adc50-130">Make sure to review the [Considerations](media-services-manage-live-encoder-enabled-channels.md#Considerations) section.</span></span>
> 
> 

## <a name="billing-implications"></a><span data-ttu-id="adc50-131">Процесс выставления счетов</span><span class="sxs-lookup"><span data-stu-id="adc50-131">Billing Implications</span></span>
<span data-ttu-id="adc50-132">Начисление платы за канал кодирования в реальном времени начинается, как только он переходит в состояние "Работает" с помощью API-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="adc50-132">A live encoding channel begins billing as soon as it's state transitions to "Running" via the API.</span></span>   <span data-ttu-id="adc50-133">Вы также можете просмотреть это состояние на портале Azure или в обозревателе служб мультимедиа Azure (http://aka.ms/amse).</span><span class="sxs-lookup"><span data-stu-id="adc50-133">You can also view the state in the Azure portal, or in the Azure Media Services Explorer tool (http://aka.ms/amse).</span></span>

<span data-ttu-id="adc50-134">В следующей таблице показано, как состояния канала соотносятся с состояниями выставления счетов в API и на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="adc50-134">The following table shows how Channel states map to billing states in the API and Azure portal.</span></span> <span data-ttu-id="adc50-135">Обратите внимание, что состояния для API и портала немного отличаются.</span><span class="sxs-lookup"><span data-stu-id="adc50-135">Note that the states are slightly different between the API and Portal UX.</span></span> <span data-ttu-id="adc50-136">Как только канал переходит в состояние "Работает" с помощью API либо в состояние "Готово" или "Потоковая передача" на портале Azure, начинается начисление оплаты.</span><span class="sxs-lookup"><span data-stu-id="adc50-136">As soon as a channel is in the "Running" state via the API, or in the "Ready" or "Streaming" state in the Azure portal, billing will be active.</span></span>
<span data-ttu-id="adc50-137">Чтобы прекратить начисление оплаты за канал, необходимо остановить канал через API или на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="adc50-137">To stop the Channel from billing you further, you have to Stop the Channel via the API or in the Azure portal.</span></span>
<span data-ttu-id="adc50-138">Именно вы несете ответственность за остановку каналов после завершения кодирования в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="adc50-138">You are responsible for stopping your channels when you are done with the live encoding channel.</span></span>  <span data-ttu-id="adc50-139">Если вы не остановите работу канала, начисление оплаты будет продолжено.</span><span class="sxs-lookup"><span data-stu-id="adc50-139">Failure to stop an encoding channel will result in continued billing.</span></span>

### <span data-ttu-id="adc50-140"><a id="states"></a>Состояния канала и их сопоставление с режимом выставления счетов</span><span class="sxs-lookup"><span data-stu-id="adc50-140"><a id="states"></a>Channel states and how they map to the billing mode</span></span>
<span data-ttu-id="adc50-141">Текущее состояние канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-141">The current state of a Channel.</span></span> <span data-ttu-id="adc50-142">Ниже перечислены возможные значения.</span><span class="sxs-lookup"><span data-stu-id="adc50-142">Possible values include:</span></span>

* <span data-ttu-id="adc50-143">**Остановлен**.</span><span class="sxs-lookup"><span data-stu-id="adc50-143">**Stopped**.</span></span> <span data-ttu-id="adc50-144">Это начальное состояние канала после его создания (если только на портале не был выбран автозапуск). В этом состоянии начисление оплаты не происходит.</span><span class="sxs-lookup"><span data-stu-id="adc50-144">This is the initial state of the Channel after its creation (unless autostart was selected in the portal.) No billing occurs in this state.</span></span> <span data-ttu-id="adc50-145">В этом состоянии можно изменять свойства канала, но потоковая передача запрещена.</span><span class="sxs-lookup"><span data-stu-id="adc50-145">In this state, the Channel properties can be updated but streaming is not allowed.</span></span>
* <span data-ttu-id="adc50-146">**Запуск**.</span><span class="sxs-lookup"><span data-stu-id="adc50-146">**Starting**.</span></span> <span data-ttu-id="adc50-147">Канал запускается.</span><span class="sxs-lookup"><span data-stu-id="adc50-147">The Channel is being started.</span></span> <span data-ttu-id="adc50-148">В этом состоянии начисление оплаты не происходит.</span><span class="sxs-lookup"><span data-stu-id="adc50-148">No billing occurs in this state.</span></span> <span data-ttu-id="adc50-149">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="adc50-149">No updates or streaming is allowed during this state.</span></span> <span data-ttu-id="adc50-150">Если возникает ошибка, канал возвращается в состояние "Остановлен".</span><span class="sxs-lookup"><span data-stu-id="adc50-150">If an error occurs, the Channel returns to the Stopped state.</span></span>
* <span data-ttu-id="adc50-151">**Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="adc50-151">**Running**.</span></span> <span data-ttu-id="adc50-152">Канал может обрабатывать динамические потоки.</span><span class="sxs-lookup"><span data-stu-id="adc50-152">The Channel is capable of processing live streams.</span></span> <span data-ttu-id="adc50-153">Теперь оплата начисляется.</span><span class="sxs-lookup"><span data-stu-id="adc50-153">It is now billing usage.</span></span> <span data-ttu-id="adc50-154">Необходимо остановить работу канала, чтобы избежать дальнейшего начисления оплаты.</span><span class="sxs-lookup"><span data-stu-id="adc50-154">You must stop the channel to prevent further billing.</span></span> 
* <span data-ttu-id="adc50-155">**Остановка**.</span><span class="sxs-lookup"><span data-stu-id="adc50-155">**Stopping**.</span></span> <span data-ttu-id="adc50-156">Канал останавливается.</span><span class="sxs-lookup"><span data-stu-id="adc50-156">The Channel is being stopped.</span></span> <span data-ttu-id="adc50-157">В этом переходном состоянии оплата не начисляется.</span><span class="sxs-lookup"><span data-stu-id="adc50-157">No billing occurs in this transient state.</span></span> <span data-ttu-id="adc50-158">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="adc50-158">No updates or streaming is allowed during this state.</span></span>
* <span data-ttu-id="adc50-159">**Удаление**.</span><span class="sxs-lookup"><span data-stu-id="adc50-159">**Deleting**.</span></span> <span data-ttu-id="adc50-160">Канал удаляется.</span><span class="sxs-lookup"><span data-stu-id="adc50-160">The Channel is being deleted.</span></span> <span data-ttu-id="adc50-161">В этом переходном состоянии оплата не начисляется.</span><span class="sxs-lookup"><span data-stu-id="adc50-161">No billing occurs in this transient state.</span></span> <span data-ttu-id="adc50-162">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="adc50-162">No updates or streaming is allowed during this state.</span></span>

<span data-ttu-id="adc50-163">В таблице ниже показано, как состояния канала соотносятся с режимом выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="adc50-163">The following table shows how Channel states map to the billing mode.</span></span> 

| <span data-ttu-id="adc50-164">Состояние канала</span><span class="sxs-lookup"><span data-stu-id="adc50-164">Channel state</span></span> | <span data-ttu-id="adc50-165">Индикаторы в пользовательском интерфейсе портала</span><span class="sxs-lookup"><span data-stu-id="adc50-165">Portal UI Indicators</span></span> | <span data-ttu-id="adc50-166">Это начисление оплаты?</span><span class="sxs-lookup"><span data-stu-id="adc50-166">Is it Billing?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="adc50-167">Запуск</span><span class="sxs-lookup"><span data-stu-id="adc50-167">Starting</span></span> |<span data-ttu-id="adc50-168">Запуск</span><span class="sxs-lookup"><span data-stu-id="adc50-168">Starting</span></span> |<span data-ttu-id="adc50-169">Нет (переходное состояние)</span><span class="sxs-lookup"><span data-stu-id="adc50-169">No (transient state)</span></span> |
| <span data-ttu-id="adc50-170">Выполняется</span><span class="sxs-lookup"><span data-stu-id="adc50-170">Running</span></span> |<span data-ttu-id="adc50-171">Готово (нет запущенных программ)</span><span class="sxs-lookup"><span data-stu-id="adc50-171">Ready (no running programs)</span></span><br/><span data-ttu-id="adc50-172">или</span><span class="sxs-lookup"><span data-stu-id="adc50-172">or</span></span><br/><span data-ttu-id="adc50-173">Потоковая передача (запущена по крайней мере одна программа)</span><span class="sxs-lookup"><span data-stu-id="adc50-173">Streaming (at least one running program)</span></span> |<span data-ttu-id="adc50-174">ДА</span><span class="sxs-lookup"><span data-stu-id="adc50-174">YES</span></span> |
| <span data-ttu-id="adc50-175">Остановка</span><span class="sxs-lookup"><span data-stu-id="adc50-175">Stopping</span></span> |<span data-ttu-id="adc50-176">Остановка</span><span class="sxs-lookup"><span data-stu-id="adc50-176">Stopping</span></span> |<span data-ttu-id="adc50-177">Нет (переходное состояние)</span><span class="sxs-lookup"><span data-stu-id="adc50-177">No (transient state)</span></span> |
| <span data-ttu-id="adc50-178">Остановлен</span><span class="sxs-lookup"><span data-stu-id="adc50-178">Stopped</span></span> |<span data-ttu-id="adc50-179">Остановлен</span><span class="sxs-lookup"><span data-stu-id="adc50-179">Stopped</span></span> |<span data-ttu-id="adc50-180">Нет</span><span class="sxs-lookup"><span data-stu-id="adc50-180">No</span></span> |

### <a name="automatic-shut-off-for-unused-channels"></a><span data-ttu-id="adc50-181">Автоматическое отключение неиспользуемых каналов</span><span class="sxs-lookup"><span data-stu-id="adc50-181">Automatic shut-off for unused Channels</span></span>
<span data-ttu-id="adc50-182">Начиная с 25 января 2016 г. службы мультимедиа развертывают обновление, которое автоматически останавливает канал (с включенным кодированием в режиме реального времени), не используемый в течение длительного периода.</span><span class="sxs-lookup"><span data-stu-id="adc50-182">Starting with January 25, 2016, Media Services rolled out an update that automatically stops a Channel (with live encoding enabled) after it has been running in an unused state for a long period.</span></span> <span data-ttu-id="adc50-183">Это относится к каналам, в которых не выполняются никакие программы и которые не получают входящих данных в течение долгого времени.</span><span class="sxs-lookup"><span data-stu-id="adc50-183">This applies to Channels that have no active Programs, and which have not received an input contribution feed for an extended period of time.</span></span>

<span data-ttu-id="adc50-184">Номинальная пороговая длительность периода простоя составляет 12 часов, но это значение может меняться.</span><span class="sxs-lookup"><span data-stu-id="adc50-184">The threshold for an unused period is nominally 12 hours, but is subject to change.</span></span>

## <a name="live-encoding-workflow"></a><span data-ttu-id="adc50-185">Процесс кодирования в реальном времени</span><span class="sxs-lookup"><span data-stu-id="adc50-185">Live Encoding Workflow</span></span>
<span data-ttu-id="adc50-186">На схеме ниже представлен процесс потоковой передачи в реальном времени, при котором канал принимает односкоростной поток по протоколу RTMP, Smooth Streaming или RTP (MPEG-TS), а затем кодирует его в многоскоростной поток.</span><span class="sxs-lookup"><span data-stu-id="adc50-186">The following diagram represents a live streaming workflow where a channel receives a single bitrate stream in one of the following protocols: RTMP, Smooth Streaming, or RTP (MPEG-TS); it then encodes the stream to a multi-bitrate stream.</span></span> 

![Динамический рабочий процесс][live-overview]

## <span data-ttu-id="adc50-188"><a id="scenario"></a>Стандартный сценарий потоковой передачи в реальном времени</span><span class="sxs-lookup"><span data-stu-id="adc50-188"><a id="scenario"></a>Common Live Streaming Scenario</span></span>
<span data-ttu-id="adc50-189">Ниже описываются основные этапы создания стандартных приложений, предназначенных для потоковой передачи в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="adc50-189">The following are general steps involved in creating common live streaming applications.</span></span>

> [!NOTE]
> <span data-ttu-id="adc50-190">Сейчас максимальная рекомендуемая продолжительность интерактивного события составляет 8 часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-190">Currently, the max recommended duration of a live event is 8 hours.</span></span> <span data-ttu-id="adc50-191">Если необходимо запустить канал на более продолжительные отрезки времени, обратитесь в amslived на веб-сайте Microsoft.com. Помните о том, что за кодирование в реальном времени взимается плата, поэтому если вы оставите канал кодирования в реальном времени в состоянии "Работает", то вам будут выставлены соответствующие почасовые счета.</span><span class="sxs-lookup"><span data-stu-id="adc50-191">Please contact  amslived at Microsoft.com if you need to run a Channel for longer periods of time.Be aware that there is a billing impact for live encoding and you should remember that leaving a live encoding channel in the "Running" state will incur hourly billing charges.</span></span>  <span data-ttu-id="adc50-192">Рекомендуется сразу же прекращать работу канала после завершения потоковой передачи в реальном времени во избежание оплаты дополнительных часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-192">It is recommended that you immediately stop your running channels after your live streaming event is complete to avoid extra hourly charges.</span></span> 
> 
> 

1. <span data-ttu-id="adc50-193">Подключите видеокамеру к компьютеру.</span><span class="sxs-lookup"><span data-stu-id="adc50-193">Connect a video camera to a computer.</span></span> <span data-ttu-id="adc50-194">Запустите и настройте локальный динамический кодировщик, который может выдавать **односкоростной** поток по одному из следующих протоколов: RTMP, Smooth Streaming или RTP (MPEG-TS).</span><span class="sxs-lookup"><span data-stu-id="adc50-194">Launch and configure an on-premises live encoder that can output a **single** bitrate stream in one of the following protocols: RTMP, Smooth Streaming, or RTP (MPEG-TS).</span></span> 
   
    <span data-ttu-id="adc50-195">Это действие также можно выполнить после создания канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-195">This step could also be performed after you create your Channel.</span></span>
2. <span data-ttu-id="adc50-196">Создайте и запустите канал.</span><span class="sxs-lookup"><span data-stu-id="adc50-196">Create and start a Channel.</span></span> 
3. <span data-ttu-id="adc50-197">Получите URL-адрес приема канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-197">Retrieve the Channel ingest URL.</span></span> 
   
    <span data-ttu-id="adc50-198">URL-адрес приема используется динамическим кодировщиком для отправки потока в канал.</span><span class="sxs-lookup"><span data-stu-id="adc50-198">The ingest URL is used by the live encoder to send the stream to the Channel.</span></span>
4. <span data-ttu-id="adc50-199">Получите URL-адрес предварительного просмотра канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-199">Retrieve the Channel preview URL.</span></span> 
   
    <span data-ttu-id="adc50-200">С его помощью можно убедиться в том, что канал надлежащим образом получает поток.</span><span class="sxs-lookup"><span data-stu-id="adc50-200">Use this URL to verify that your channel is properly receiving the live stream.</span></span>
5. <span data-ttu-id="adc50-201">Создайте программу.</span><span class="sxs-lookup"><span data-stu-id="adc50-201">Create a program.</span></span> 
   
    <span data-ttu-id="adc50-202">Если вы используете портал Azure, то при создании программы также создается ресурс-контейнер.</span><span class="sxs-lookup"><span data-stu-id="adc50-202">When using the Azure portal, creating a program also creates an asset.</span></span> 
   
    <span data-ttu-id="adc50-203">Если вы используете пакет .NET SDK или REST, необходимо создать ресурс и указать его при создании программы.</span><span class="sxs-lookup"><span data-stu-id="adc50-203">When using .NET SDK or REST you need to create an asset and specify to use this asset when creating a Program.</span></span> 
6. <span data-ttu-id="adc50-204">Опубликуйте ресурс, связанный с программой.</span><span class="sxs-lookup"><span data-stu-id="adc50-204">Publish the asset associated with the program.</span></span>   
   
    >[!NOTE]
    ><span data-ttu-id="adc50-205">При создании учетной записи AMS в нее добавляется конечная точка потоковой передачи **по умолчанию** в состоянии **Остановлена**.</span><span class="sxs-lookup"><span data-stu-id="adc50-205">When your AMS account is created a **default** streaming endpoint is added to your account in the **Stopped** state.</span></span> <span data-ttu-id="adc50-206">Конечная точка потоковой передачи, из которой нужно передавать содержимое потоком, должна находиться в состоянии **Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="adc50-206">The streaming endpoint from which you want to stream content has to be in the **Running** state.</span></span> 
    
7. <span data-ttu-id="adc50-207">Когда вы будете готовы начать потоковую передачу и архивацию, запустите программу.</span><span class="sxs-lookup"><span data-stu-id="adc50-207">Start the program when you are ready to start streaming and archiving.</span></span>
8. <span data-ttu-id="adc50-208">При необходимости динамическому кодировщику можно дать сигнал начать показ рекламы.</span><span class="sxs-lookup"><span data-stu-id="adc50-208">Optionally, the live encoder can be signaled to start an advertisement.</span></span> <span data-ttu-id="adc50-209">Реклама вставляется в выходной поток.</span><span class="sxs-lookup"><span data-stu-id="adc50-209">The advertisement is inserted in the output stream.</span></span>
9. <span data-ttu-id="adc50-210">Чтобы остановить потоковую передачу и архивацию содержимого мероприятия, завершите работу программы.</span><span class="sxs-lookup"><span data-stu-id="adc50-210">Stop the program whenever you want to stop streaming and archiving the event.</span></span>
10. <span data-ttu-id="adc50-211">Удалите программу (и при необходимости ресурс).</span><span class="sxs-lookup"><span data-stu-id="adc50-211">Delete the Program (and optionally delete the asset).</span></span>   

> [!NOTE]
> <span data-ttu-id="adc50-212">Крайне важно не забывать останавливать канал кодирования в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="adc50-212">It is very important not to forget to Stop a Live Encoding Channel.</span></span> <span data-ttu-id="adc50-213">Помните о том, что за кодирование в реальном времени взимается почасовая плата, поэтому, если вы оставите канал кодирования в реальном времени в состоянии "Работает", вам будут выставлены соответствующие счета.</span><span class="sxs-lookup"><span data-stu-id="adc50-213">Be aware that there is an hourly billing impact for live encoding and you should remember that leaving a live encoding channel in the "Running" state will incur billing charges.</span></span>  <span data-ttu-id="adc50-214">Рекомендуется сразу же прекращать работу канала после завершения потоковой передачи в реальном времени во избежание оплаты дополнительных часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-214">It is recommended that you immediately stop your running channels after your live streaming event is complete to avoid extra hourly charges.</span></span> 
> 
> 

## <span data-ttu-id="adc50-215"><a id="channel"></a>Конфигурации приема канала</span><span class="sxs-lookup"><span data-stu-id="adc50-215"><a id="channel"></a>Channel's input (ingest) configurations</span></span>
### <span data-ttu-id="adc50-216"><a id="Ingest_Protocols"></a>Протокол входного потока</span><span class="sxs-lookup"><span data-stu-id="adc50-216"><a id="Ingest_Protocols"></a>Ingest streaming protocol</span></span>
<span data-ttu-id="adc50-217">Если в качестве **типа кодировщика** выбрано значение **Стандартный**, возможны следующие варианты:</span><span class="sxs-lookup"><span data-stu-id="adc50-217">If the **Encoder Type** is set to **Standard**, valid options are:</span></span>

* <span data-ttu-id="adc50-218">**RTP** (MPEG-TS): MPEG-2 TS по RTP</span><span class="sxs-lookup"><span data-stu-id="adc50-218">**RTP** (MPEG-TS): MPEG-2 Transport Stream over RTP.</span></span>  
* <span data-ttu-id="adc50-219">Односкоростной **RTMP**</span><span class="sxs-lookup"><span data-stu-id="adc50-219">Single bitrate **RTMP**</span></span>
* <span data-ttu-id="adc50-220">Односкоростной **фрагментированный MP4** (Smooth Streaming)</span><span class="sxs-lookup"><span data-stu-id="adc50-220">Single bitrate **Fragmented MP4** (Smooth Streaming)</span></span>

#### <a name="rtp-mpeg-ts---mpeg-2-transport-stream-over-rtp"></a><span data-ttu-id="adc50-221">RTP (MPEG-TS) — MPEG-2 TS по RTP</span><span class="sxs-lookup"><span data-stu-id="adc50-221">RTP (MPEG-TS) - MPEG-2 Transport Stream over RTP.</span></span>
<span data-ttu-id="adc50-222">Типичный случай использования:</span><span class="sxs-lookup"><span data-stu-id="adc50-222">Typical use case:</span></span> 

<span data-ttu-id="adc50-223">Для передачи потоков профессиональные вещатели обычно используют высококлассные локальные динамические кодировщики от таких производителей, как Elemental Technologies, Ericsson, Ateme, Imagine и Envivio.</span><span class="sxs-lookup"><span data-stu-id="adc50-223">Professional broadcasters typically work with high-end on-premises live encoders from vendors like Elemental Technologies, Ericsson, Ateme, Imagine or Envivio to send a stream.</span></span> <span data-ttu-id="adc50-224">При этом они часто сотрудничают с ИТ-отделами и применяют частные сети.</span><span class="sxs-lookup"><span data-stu-id="adc50-224">Often used in conjunction with  an IT department and private networks.</span></span>

<span data-ttu-id="adc50-225">Рекомендации:</span><span class="sxs-lookup"><span data-stu-id="adc50-225">Considerations:</span></span>

* <span data-ttu-id="adc50-226">Настоятельно рекомендуется использовать на входе однопрограммный транспортный поток (SPTS).</span><span class="sxs-lookup"><span data-stu-id="adc50-226">The use of a single program transport stream (SPTS) input is strongly recommended.</span></span> 
* <span data-ttu-id="adc50-227">Можно ввести до 8 аудиопотоков с помощью MPEG-2 TS по RTP.</span><span class="sxs-lookup"><span data-stu-id="adc50-227">You can input up to 8 audio streams using MPEG-2 TS over RTP.</span></span> 
* <span data-ttu-id="adc50-228">Средняя скорость видеопотока должна быть не более 15 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-228">The video stream should have an average bitrate below 15 Mbps</span></span>
* <span data-ttu-id="adc50-229">Средняя совокупная скорость аудиопотоков должна быть не более 1 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-229">The aggregate average bitrate of the audio streams should be below 1 Mbps</span></span>
* <span data-ttu-id="adc50-230">Поддерживаются следующие кодеки:</span><span class="sxs-lookup"><span data-stu-id="adc50-230">Following are the supported codecs:</span></span>
  
  * <span data-ttu-id="adc50-231">видеокодек MPEG-2 / H.262;</span><span class="sxs-lookup"><span data-stu-id="adc50-231">MPEG-2 / H.262 Video</span></span> 
    
    * <span data-ttu-id="adc50-232">основной профиль (4:2:0);</span><span class="sxs-lookup"><span data-stu-id="adc50-232">Main Profile (4:2:0)</span></span>
    * <span data-ttu-id="adc50-233">высокий профиль (4:2:0, 4:2:2);</span><span class="sxs-lookup"><span data-stu-id="adc50-233">High Profile (4:2:0, 4:2:2)</span></span>
    * <span data-ttu-id="adc50-234">профиль 422 (4:2:0, 4:2:2);</span><span class="sxs-lookup"><span data-stu-id="adc50-234">422 Profile (4:2:0, 4:2:2)</span></span>
  * <span data-ttu-id="adc50-235">видеокодек MPEG-4 AVC/H.264;</span><span class="sxs-lookup"><span data-stu-id="adc50-235">MPEG-4 AVC / H.264 Video</span></span>  
    
    * <span data-ttu-id="adc50-236">базовый, основной, высокий профиль (8-битный 4:2:0);</span><span class="sxs-lookup"><span data-stu-id="adc50-236">Baseline, Main, High Profile (8-bit 4:2:0)</span></span>
    * <span data-ttu-id="adc50-237">высокий профиль 10 (10-битный 4:2:0);</span><span class="sxs-lookup"><span data-stu-id="adc50-237">High 10 Profile (10-bit 4:2:0)</span></span>
    * <span data-ttu-id="adc50-238">высокий профиль 422 (10-битный 4:2:2);</span><span class="sxs-lookup"><span data-stu-id="adc50-238">High 422 Profile (10-bit 4:2:2)</span></span>
  * <span data-ttu-id="adc50-239">аудиокодек MPEG-2 AAC-LC;</span><span class="sxs-lookup"><span data-stu-id="adc50-239">MPEG-2 AAC-LC Audio</span></span> 
    
    * <span data-ttu-id="adc50-240">моно, стерео, окружающий звук (5.1, 7.1);</span><span class="sxs-lookup"><span data-stu-id="adc50-240">Mono, Stereo, Surround (5.1, 7.1)</span></span>
    * <span data-ttu-id="adc50-241">упаковка ADTS в стиле MPEG-2;</span><span class="sxs-lookup"><span data-stu-id="adc50-241">MPEG-2 style ADTS packaging</span></span>
  * <span data-ttu-id="adc50-242">аудиокодек Dolby Digital (AC-3);</span><span class="sxs-lookup"><span data-stu-id="adc50-242">Dolby Digital (AC-3) Audio</span></span> 
    
    * <span data-ttu-id="adc50-243">моно, стерео, окружающий звук (5.1, 7.1);</span><span class="sxs-lookup"><span data-stu-id="adc50-243">Mono, Stereo, Surround (5.1, 7.1)</span></span>
  * <span data-ttu-id="adc50-244">MPEG-аудио (слой II и III);</span><span class="sxs-lookup"><span data-stu-id="adc50-244">MPEG Audio (Layer II and III)</span></span> 
    
    * <span data-ttu-id="adc50-245">моно, стерео.</span><span class="sxs-lookup"><span data-stu-id="adc50-245">Mono, Stereo</span></span>
* <span data-ttu-id="adc50-246">Рекомендуемые вещательные кодировщики:</span><span class="sxs-lookup"><span data-stu-id="adc50-246">Recommended broadcast encoders include:</span></span>
  
  * <span data-ttu-id="adc50-247">Imagine Communications Selenio ENC 1</span><span class="sxs-lookup"><span data-stu-id="adc50-247">Imagine Communications Selenio ENC 1</span></span>
  * <span data-ttu-id="adc50-248">Imagine Communications Selenio ENC 2</span><span class="sxs-lookup"><span data-stu-id="adc50-248">Imagine Communications Selenio ENC 2</span></span>
  * <span data-ttu-id="adc50-249">Elemental Live</span><span class="sxs-lookup"><span data-stu-id="adc50-249">Elemental Live</span></span>

#### <span data-ttu-id="adc50-250"><a id="single_bitrate_RTMP"></a>Односкоростной RTMP</span><span class="sxs-lookup"><span data-stu-id="adc50-250"><a id="single_bitrate_RTMP"></a>Single bitrate RTMP</span></span>
<span data-ttu-id="adc50-251">Рекомендации:</span><span class="sxs-lookup"><span data-stu-id="adc50-251">Considerations:</span></span>

* <span data-ttu-id="adc50-252">Входящий поток не может содержать многоскоростное видео.</span><span class="sxs-lookup"><span data-stu-id="adc50-252">The incoming stream cannot contain multi-bitrate video</span></span>
* <span data-ttu-id="adc50-253">Средняя скорость видеопотока должна быть не более 15 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-253">The video stream should have an average bitrate below 15 Mbps</span></span>
* <span data-ttu-id="adc50-254">Средняя скорость аудиопотока должна быть не более 1 Мбит/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-254">The audio stream should have an average bitrate below 1 Mbps</span></span>
* <span data-ttu-id="adc50-255">Поддерживаются следующие кодеки:</span><span class="sxs-lookup"><span data-stu-id="adc50-255">Following are the supported codecs:</span></span>
* <span data-ttu-id="adc50-256">видеокодек MPEG-4 AVC/H.264;</span><span class="sxs-lookup"><span data-stu-id="adc50-256">MPEG-4 AVC / H.264 Video</span></span>
* <span data-ttu-id="adc50-257">базовый, основной, высокий профиль (8-битный 4:2:0);</span><span class="sxs-lookup"><span data-stu-id="adc50-257">Baseline, Main, High Profile (8-bit 4:2:0)</span></span>
* <span data-ttu-id="adc50-258">высокий профиль 10 (10-битный 4:2:0);</span><span class="sxs-lookup"><span data-stu-id="adc50-258">High 10 Profile (10-bit 4:2:0)</span></span>
* <span data-ttu-id="adc50-259">высокий профиль 422 (10-битный 4:2:2);</span><span class="sxs-lookup"><span data-stu-id="adc50-259">High 422 Profile (10-bit 4:2:2)</span></span>
* <span data-ttu-id="adc50-260">аудиокодек MPEG-2 AAC-LC;</span><span class="sxs-lookup"><span data-stu-id="adc50-260">MPEG-2 AAC-LC Audio</span></span>
* <span data-ttu-id="adc50-261">моно, стерео, окружающий звук (5.1, 7.1);</span><span class="sxs-lookup"><span data-stu-id="adc50-261">Mono, Stereo, Surround (5.1, 7.1)</span></span>
* <span data-ttu-id="adc50-262">Частота дискретизации 44,1 кГц</span><span class="sxs-lookup"><span data-stu-id="adc50-262">44.1 kHz sampling rate</span></span>
* <span data-ttu-id="adc50-263">упаковка ADTS в стиле MPEG-2.</span><span class="sxs-lookup"><span data-stu-id="adc50-263">MPEG-2 style ADTS packaging</span></span>
* <span data-ttu-id="adc50-264">Рекомендуемые кодировщики:</span><span class="sxs-lookup"><span data-stu-id="adc50-264">Recommended encoders include:</span></span>
* <span data-ttu-id="adc50-265">Telestream Wirecast</span><span class="sxs-lookup"><span data-stu-id="adc50-265">Telestream Wirecast</span></span>
* <span data-ttu-id="adc50-266">Flash Media Live Encoder</span><span class="sxs-lookup"><span data-stu-id="adc50-266">Flash Media Live Encoder</span></span>

#### <a name="single-bitrate-fragmented-mp4-smooth-streaming"></a><span data-ttu-id="adc50-267">Односкоростной фрагментированный MP4 (Smooth Streaming)</span><span class="sxs-lookup"><span data-stu-id="adc50-267">Single bitrate Fragmented MP4 (Smooth Streaming)</span></span>
<span data-ttu-id="adc50-268">Типичный случай использования:</span><span class="sxs-lookup"><span data-stu-id="adc50-268">Typical use case:</span></span>

<span data-ttu-id="adc50-269">Отправка входного потока через Интернет в ближайший центр обработки данных Azure с помощью локальных динамических кодировщиков от таких производителей, как Elemental Technologies, Ericsson, Ateme и Envivio.</span><span class="sxs-lookup"><span data-stu-id="adc50-269">Use on-premises live encoders from vendors like Elemental Technologies, Ericsson, Ateme, Envivio to send the input stream over the open internet to a nearby Azure data center.</span></span>

<span data-ttu-id="adc50-270">Рекомендации:</span><span class="sxs-lookup"><span data-stu-id="adc50-270">Considerations:</span></span>

<span data-ttu-id="adc50-271">Аналогичны рекомендациям для [односкоростного протокола RTMP](media-services-manage-live-encoder-enabled-channels.md#single_bitrate_RTMP).</span><span class="sxs-lookup"><span data-stu-id="adc50-271">Same as for [single bitrate RTMP](media-services-manage-live-encoder-enabled-channels.md#single_bitrate_RTMP).</span></span>

#### <a name="other-considerations"></a><span data-ttu-id="adc50-272">Дополнительные рекомендации</span><span class="sxs-lookup"><span data-stu-id="adc50-272">Other considerations</span></span>
* <span data-ttu-id="adc50-273">Во время работы канала или связанных с ним программ входной протокол изменить нельзя.</span><span class="sxs-lookup"><span data-stu-id="adc50-273">You cannot change the input protocol while the Channel or its associated programs are running.</span></span> <span data-ttu-id="adc50-274">Если вам нужны другие протоколы, создайте отдельный канал для каждого из них.</span><span class="sxs-lookup"><span data-stu-id="adc50-274">If you require different protocols, you should create separate channels for each input protocol.</span></span>
* <span data-ttu-id="adc50-275">Максимальное разрешение входящего видеопотока — 1920x1080; максимальное временное разрешение — 60 полей в секунду при использовании чередования строк или 30 кадров в секунду при использовании прогрессивной развертки.</span><span class="sxs-lookup"><span data-stu-id="adc50-275">Maximum resolution for the incoming video stream is 1920x1080, and at most 60 fields/second if interlaced, or 30 frames/second if progressive.</span></span>

### <a name="ingest-urls-endpoints"></a><span data-ttu-id="adc50-276">URL-адреса (конечные точки) приема</span><span class="sxs-lookup"><span data-stu-id="adc50-276">Ingest URLs (endpoints)</span></span>
<span data-ttu-id="adc50-277">Канал предоставляет входную конечную точку (URL-адрес приема), которая указывается в динамическом кодировщике, чтобы он мог передавать потоки в канал.</span><span class="sxs-lookup"><span data-stu-id="adc50-277">A Channel provides an input endpoint (ingest URL) that you specify in the live encoder, so the encoder can push streams to your Channels.</span></span>

<span data-ttu-id="adc50-278">Получить URL-адреса приема можно сразу после создания канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-278">You can get the ingest URLs once you create a Channel.</span></span> <span data-ttu-id="adc50-279">Для этого каналу не обязательно находиться в состоянии **Выполняется** .</span><span class="sxs-lookup"><span data-stu-id="adc50-279">To get these URLs, the Channel does not have to be in the **Running** state.</span></span> <span data-ttu-id="adc50-280">Чтобы начать передавать данные в канал, его нужно перевести в состояние **Выполняется** .</span><span class="sxs-lookup"><span data-stu-id="adc50-280">When you are ready to start pushing data into the Channel, it must be in the **Running** state.</span></span> <span data-ttu-id="adc50-281">Когда канал начнет принимать данные, вы можете просмотреть поток с помощью URL-адреса предварительного просмотра.</span><span class="sxs-lookup"><span data-stu-id="adc50-281">Once the Channel starts ingesting data, you can preview your stream through the preview URL.</span></span>

<span data-ttu-id="adc50-282">У вас есть возможность приема потока в реальном времени в формате фрагментированного MP4 (Smooth Streaming) через SSL-подключение.</span><span class="sxs-lookup"><span data-stu-id="adc50-282">You have an option of ingesting Fragmented MP4 (Smooth Streaming) live stream over an SSL connection.</span></span> <span data-ttu-id="adc50-283">Для приема по протоколу SSL измените URL-адрес приема на HTTPS.</span><span class="sxs-lookup"><span data-stu-id="adc50-283">To ingest over SSL, make sure to update the ingest URL to HTTPS.</span></span> <span data-ttu-id="adc50-284">Обратите внимание, что в настоящее время AMS не поддерживает SSL для личных доменов.</span><span class="sxs-lookup"><span data-stu-id="adc50-284">Note that, currently, AMS doesn’t support SSL with custom domains.</span></span>  

### <a name="allowed-ip-addresses"></a><span data-ttu-id="adc50-285">Разрешенные IP-адреса</span><span class="sxs-lookup"><span data-stu-id="adc50-285">Allowed IP addresses</span></span>
<span data-ttu-id="adc50-286">Вы можете определить IP-адреса, с которых разрешено публиковать видео в этом канале.</span><span class="sxs-lookup"><span data-stu-id="adc50-286">You can define the IP addresses that are allowed to publish video to this channel.</span></span> <span data-ttu-id="adc50-287">Разрешенные IP-адреса можно указать в виде одного IP-адреса (например, 10.0.0.1), диапазона IP-адресов, заданного с помощью IP-адреса и маски подсети CIDR (например, 10.0.0.1/22), или диапазона IP-адресов, заданного с помощью IP-адреса и маски подсети в десятичной записи (например, 10.0.0.1(255.255.252.0)).</span><span class="sxs-lookup"><span data-stu-id="adc50-287">Allowed IP addresses can be specified as either a single IP address (e.g. '10.0.0.1'), an IP range using an IP address and a CIDR subnet mask (e.g. ‘10.0.0.1/22’), or an IP range using an IP address and a dotted decimal subnet mask (e.g. '10.0.0.1(255.255.252.0)').</span></span>

<span data-ttu-id="adc50-288">Если не указаны IP-адреса и не определено правило, разрешенных IP-адресов нет.</span><span class="sxs-lookup"><span data-stu-id="adc50-288">If no IP addresses are specified and there is no rule definition then no IP address will be allowed.</span></span> <span data-ttu-id="adc50-289">Чтобы разрешить все IP-адреса, создайте правило и задайте адрес 0.0.0.0/0.</span><span class="sxs-lookup"><span data-stu-id="adc50-289">To allow any IP address, create a rule and set 0.0.0.0/0.</span></span>

## <a name="channel-preview"></a><span data-ttu-id="adc50-290">Предварительный просмотр канала</span><span class="sxs-lookup"><span data-stu-id="adc50-290">Channel preview</span></span>
### <a name="preview-urls"></a><span data-ttu-id="adc50-291">URL-адреса предварительного просмотра</span><span class="sxs-lookup"><span data-stu-id="adc50-291">Preview URLs</span></span>
<span data-ttu-id="adc50-292">Канал предоставляет конечную точку (URL-адрес) предварительного просмотра, с помощью которой можно проверить поток перед дальнейшей обработкой и доставкой.</span><span class="sxs-lookup"><span data-stu-id="adc50-292">Channels provide a preview endpoint (preview URL) that you use to preview and validate your stream before further processing and delivery.</span></span>

<span data-ttu-id="adc50-293">Получить URL-адрес предварительного просмотра можно при создании канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-293">You can get the preview URL when you create the channel.</span></span> <span data-ttu-id="adc50-294">Для этого каналу не обязательно находиться в состоянии **Выполняется** .</span><span class="sxs-lookup"><span data-stu-id="adc50-294">To get the URL, the channel does not have to be in the **Running** state.</span></span>

<span data-ttu-id="adc50-295">После запуска канала можно выполнить предварительный просмотр потока.</span><span class="sxs-lookup"><span data-stu-id="adc50-295">Once the Channel starts ingesting data, you can preview your stream.</span></span>

> [!NOTE]
> <span data-ttu-id="adc50-296">В настоящее время поток предварительного просмотра может доставляться только в формате фрагментированного MP4 (Smooth Streaming) вне зависимости от указанного входного типа.</span><span class="sxs-lookup"><span data-stu-id="adc50-296">Currently the preview stream can only be delivered in Fragmented MP4 (Smooth Streaming) format regardless of the specified input type.</span></span> <span data-ttu-id="adc50-297">Для проверки потока Smooth Streaming можно использовать проигрыватель [http://smf.cloudapp.net/healthmonitor](http://smf.cloudapp.net/healthmonitor) .</span><span class="sxs-lookup"><span data-stu-id="adc50-297">You can use the [http://smf.cloudapp.net/healthmonitor](http://smf.cloudapp.net/healthmonitor) player to test the Smooth Stream.</span></span> <span data-ttu-id="adc50-298">Также для просмотра потока можно воспользоваться проигрывателем, размещенным на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="adc50-298">You can also use a player hosted in the Azure portal to view your stream.</span></span>
> 
> 

### <a name="allowed-ip-addresses"></a><span data-ttu-id="adc50-299">Разрешенные IP-адреса</span><span class="sxs-lookup"><span data-stu-id="adc50-299">Allowed IP Addresses</span></span>
<span data-ttu-id="adc50-300">Вы можете определить IP-адреса, которым разрешено подключаться к конечной точке предварительного просмотра.</span><span class="sxs-lookup"><span data-stu-id="adc50-300">You can define the IP addresses that are allowed to connect to the preview endpoint.</span></span> <span data-ttu-id="adc50-301">Если этого не сделать, будут разрешены все IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="adc50-301">If no IP addresses are specified any IP address will be allowed.</span></span> <span data-ttu-id="adc50-302">Разрешенные IP-адреса можно указать в виде одного IP-адреса (например, 10.0.0.1), диапазона IP-адресов, заданного с помощью IP-адреса и маски подсети CIDR (например, 10.0.0.1/22), или диапазона IP-адресов, заданного с помощью IP-адреса и маски подсети в десятичной записи (например, 10.0.0.1(255.255.252.0)).</span><span class="sxs-lookup"><span data-stu-id="adc50-302">Allowed IP addresses can be specified as either a single IP address (e.g. ‘10.0.0.1’), an IP range using an IP address and a CIDR subnet mask (e.g. ‘10.0.0.1/22’), or an IP range using an IP address and a dotted decimal subnet mask (e.g. ‘10.0.0.1(255.255.252.0)’).</span></span>

## <a name="live-encoding-settings"></a><span data-ttu-id="adc50-303">Параметры кодирования в реальном времени</span><span class="sxs-lookup"><span data-stu-id="adc50-303">Live encoding settings</span></span>
<span data-ttu-id="adc50-304">В этом разделе описывается настройка параметров динамического кодировщика канала в случае, если параметр **Тип кодирования** канала имеет значение **Стандартный**.</span><span class="sxs-lookup"><span data-stu-id="adc50-304">This section describes how the settings for the live encoder within the Channel can be adjusted, when the **Encoding Type** of a Channel is set to **Standard**.</span></span>

> [!NOTE]
> <span data-ttu-id="adc50-305">При вводе нескольких языковых дорожек и выполнении кодирования в реальном времени с помощью Azure для ввода нескольких языков поддерживается только RTP.</span><span class="sxs-lookup"><span data-stu-id="adc50-305">When inputting multiple language tracks and doing live encoding with Azure, only RTP is supported for multi-language input.</span></span> <span data-ttu-id="adc50-306">Можно определить до 8 аудиопотоков с помощью MPEG-2 TS по RTP.</span><span class="sxs-lookup"><span data-stu-id="adc50-306">You can define up to 8 audio streams using MPEG-2 TS over RTP.</span></span> <span data-ttu-id="adc50-307">Прием нескольких звуковых дорожек RTMP или Smooth Streaming в настоящее время не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="adc50-307">Ingesting multiple audio tracks with RTMP or Smooth streaming is currently not supported.</span></span> <span data-ttu-id="adc50-308">При выполнении кодирования в реальном времени с помощью [локальных динамических кодировщиков](media-services-live-streaming-with-onprem-encoders.md)это ограничение не действует, так как любые данные, передаваемые в AMS, проходят через канал без дальнейшей обработки.</span><span class="sxs-lookup"><span data-stu-id="adc50-308">When doing live encoding with [on-premises live encodes](media-services-live-streaming-with-onprem-encoders.md), there is no such limitation because whatever is sent to AMS passes through a channel without any further processing.</span></span>
> 
> 

### <a name="ad-marker-source"></a><span data-ttu-id="adc50-309">Источник маркера рекламы</span><span class="sxs-lookup"><span data-stu-id="adc50-309">Ad marker source</span></span>
<span data-ttu-id="adc50-310">Вы можете указать источник для сигналов маркера рекламы.</span><span class="sxs-lookup"><span data-stu-id="adc50-310">You can specify the source for ad markers signals.</span></span> <span data-ttu-id="adc50-311">Значение по умолчанию — **Api**. Оно означает, что динамический кодировщик канала должен ожидать передачи данных от асинхронного интерфейса **API маркеров рекламы**.</span><span class="sxs-lookup"><span data-stu-id="adc50-311">Default value is **Api**, which indicates that the live encoder within the Channel should listen to an asynchronous **Ad Marker API**.</span></span>

<span data-ttu-id="adc50-312">Другое допустимое значение — **Scte35** (разрешено, только если протоколом входного потока является RTP (MPEG-TS)).</span><span class="sxs-lookup"><span data-stu-id="adc50-312">The other valid option is **Scte35** (allowed only if the ingest streaming protocol is set to RTP (MPEG-TS).</span></span> <span data-ttu-id="adc50-313">Если задано значение Scte35, динамический кодировщик будет анализировать сигналы SCTE-35 во входящем потоке RTP (MPEG-TS).</span><span class="sxs-lookup"><span data-stu-id="adc50-313">When Scte35 is specified, the live encoder will parse SCTE-35 signals from the input RTP (MPEG-TS) stream.</span></span>

### <a name="cea-708-closed-captions"></a><span data-ttu-id="adc50-314">Субтитры стандарта CEA-708</span><span class="sxs-lookup"><span data-stu-id="adc50-314">CEA 708 Closed Captions</span></span>
<span data-ttu-id="adc50-315">Необязательный флаг, который указывает динамическому кодировщику игнорировать данные подписей CEA-708, внедренные во входящее видео.</span><span class="sxs-lookup"><span data-stu-id="adc50-315">An optional flag which tells the live encoder to ignore any CEA 708 captions data embedded in the incoming video.</span></span> <span data-ttu-id="adc50-316">Если этот флаг имеет значение false (по умолчанию), кодировщик обнаруживает данные CEA-708 и вставляет их в выходные видеопотоки.</span><span class="sxs-lookup"><span data-stu-id="adc50-316">When the flag is set to false (default), the encoder will detect and re-insert CEA 708 data into the output video streams.</span></span>

### <a name="video-stream"></a><span data-ttu-id="adc50-317">Видеопоток</span><span class="sxs-lookup"><span data-stu-id="adc50-317">Video Stream</span></span>
<span data-ttu-id="adc50-318">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="adc50-318">Optional.</span></span> <span data-ttu-id="adc50-319">Описывает входной видеопоток.</span><span class="sxs-lookup"><span data-stu-id="adc50-319">Describes the input video stream.</span></span> <span data-ttu-id="adc50-320">Если это поле не задано, используется значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="adc50-320">If this field is not specified, the default value is used.</span></span> <span data-ttu-id="adc50-321">Этот параметр допустим, только если протоколом входного потока является RTP (MPEG-TS).</span><span class="sxs-lookup"><span data-stu-id="adc50-321">This setting is allowed only if the input streaming protocol is set to RTP (MPEG-TS).</span></span>

#### <a name="index"></a><span data-ttu-id="adc50-322">Индекс</span><span class="sxs-lookup"><span data-stu-id="adc50-322">Index</span></span>
<span data-ttu-id="adc50-323">Отсчитываемый от нуля индекс, указывающий входной видеопоток, который должен обрабатываться динамическим кодировщиком в канале.</span><span class="sxs-lookup"><span data-stu-id="adc50-323">A zero-based index that specifies which input video stream should be processed by the live encoder within the Channel.</span></span> <span data-ttu-id="adc50-324">Этот параметр применяется, только если протоколом входного потока является RTP (MPEG-TS).</span><span class="sxs-lookup"><span data-stu-id="adc50-324">This setting applies only if ingest streaming protocol is RTP (MPEG-TS).</span></span>

<span data-ttu-id="adc50-325">Значение по умолчанию — нуль.</span><span class="sxs-lookup"><span data-stu-id="adc50-325">Default value is zero.</span></span> <span data-ttu-id="adc50-326">Рекомендуется отправлять на вход однопрограммный транспортный поток (SPTS).</span><span class="sxs-lookup"><span data-stu-id="adc50-326">It is recommended to send in a single program transport stream (SPTS).</span></span> <span data-ttu-id="adc50-327">Если входной поток содержит несколько программ, динамический кодировщик анализирует таблицу структуры программ (PMT), выявляет входные данные с именем типа потока "MPEG-2 Video" или "H.264" и располагает их в порядке, указанном в таблице PMT.</span><span class="sxs-lookup"><span data-stu-id="adc50-327">If the input stream contains multiple programs, the live encoder parses the Program Map Table (PMT) in the input, identifies the inputs that have a stream type name of MPEG-2 Video or H.264, and arranges them in the order specified in the PMT.</span></span> <span data-ttu-id="adc50-328">Затем с помощью отсчитываемого от нуля индекса выбирается n-ный элемент в этой последовательности.</span><span class="sxs-lookup"><span data-stu-id="adc50-328">The zero-based index is then used to pick up the n-th entry in that arrangement.</span></span>

### <a name="audio-stream"></a><span data-ttu-id="adc50-329">Аудиопоток</span><span class="sxs-lookup"><span data-stu-id="adc50-329">Audio Stream</span></span>
<span data-ttu-id="adc50-330">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="adc50-330">Optional.</span></span> <span data-ttu-id="adc50-331">Описывает входной аудиопоток.</span><span class="sxs-lookup"><span data-stu-id="adc50-331">Describes the input audio streams.</span></span> <span data-ttu-id="adc50-332">Если это поле не задано, используются значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="adc50-332">If this field is not specified, the default values specified apply.</span></span> <span data-ttu-id="adc50-333">Этот параметр допустим, только если протоколом входного потока является RTP (MPEG-TS).</span><span class="sxs-lookup"><span data-stu-id="adc50-333">This setting is allowed only if the input streaming protocol is set to RTP (MPEG-TS).</span></span>

#### <a name="index"></a><span data-ttu-id="adc50-334">Индекс</span><span class="sxs-lookup"><span data-stu-id="adc50-334">Index</span></span>
<span data-ttu-id="adc50-335">Рекомендуется отправлять на вход однопрограммный транспортный поток (SPTS).</span><span class="sxs-lookup"><span data-stu-id="adc50-335">It is recommended to send in a single program transport stream (SPTS).</span></span> <span data-ttu-id="adc50-336">Если входной поток содержит несколько программ, динамический кодировщик анализирует таблицу структуры программ (PMT), выявляет входные данные с именем типа потока "MPEG-2 AAC ADTS", "AC-3 System-A", "AC-3 System-B", "MPEG-2 Private PES", "MPEG-1 Audio" или "MPEG-2 Audio" и располагает их в порядке, указанном в таблице PMT.</span><span class="sxs-lookup"><span data-stu-id="adc50-336">If the input stream contains multiple programs, the live encoder within the Channel parses the Program Map Table (PMT) in the input, identifies the inputs that have a stream type name of MPEG-2 AAC ADTS or AC-3 System-A or AC-3 System-B or MPEG-2 Private PES or MPEG-1 Audio or MPEG-2 Audio, and arranges them in the order specified in the PMT.</span></span> <span data-ttu-id="adc50-337">Затем с помощью отсчитываемого от нуля индекса выбирается n-ный элемент в этой последовательности.</span><span class="sxs-lookup"><span data-stu-id="adc50-337">The zero-based index is then used to pick up the n-th entry in that arrangement.</span></span>

#### <a name="language"></a><span data-ttu-id="adc50-338">Язык</span><span class="sxs-lookup"><span data-stu-id="adc50-338">Language</span></span>
<span data-ttu-id="adc50-339">Идентификатор языка аудиопотока согласно стандарту ISO 639-2, например ENG.</span><span class="sxs-lookup"><span data-stu-id="adc50-339">The language identifier of the audio stream, conforming to ISO 639-2, such as ENG.</span></span> <span data-ttu-id="adc50-340">Если не указан, используется значение по умолчанию — UND (не определено).</span><span class="sxs-lookup"><span data-stu-id="adc50-340">If not present, the default is UND (undefined).</span></span>

<span data-ttu-id="adc50-341">Если входной контент канала имеет формат MPEG-2 TS по RTP, может быть указано до 8 наборов аудиопотоков.</span><span class="sxs-lookup"><span data-stu-id="adc50-341">There can be up to 8 audio stream sets specified if the input to the Channel is MPEG-2 TS over RTP.</span></span> <span data-ttu-id="adc50-342">Однако две записи с одинаковым значением индекса недопустимы.</span><span class="sxs-lookup"><span data-stu-id="adc50-342">However, there can be no two entries with the same value of Index.</span></span>

### <span data-ttu-id="adc50-343"><a id="preset"></a>Системная предустановка</span><span class="sxs-lookup"><span data-stu-id="adc50-343"><a id="preset"></a>System Preset</span></span>
<span data-ttu-id="adc50-344">Задает предустановку, которая должна использоваться динамическим кодировщиком в этом канале.</span><span class="sxs-lookup"><span data-stu-id="adc50-344">Specifies the preset to be used by the live encoder within this Channel.</span></span> <span data-ttu-id="adc50-345">В настоящее время единственное допустимое значение — **Default720p** (значение по умолчанию).</span><span class="sxs-lookup"><span data-stu-id="adc50-345">Currently, the only allowed value is **Default720p** (default).</span></span>

<span data-ttu-id="adc50-346">Обратите внимание: если требуются пользовательские предустановки, следует обратиться к amslived на сайте Microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="adc50-346">Note that if you need custom presets, you should contact  amslived at Microsoft.com.</span></span>

<span data-ttu-id="adc50-347">**Default720p** указывает, что видео кодируется в семь слоев, перечисленных ниже.</span><span class="sxs-lookup"><span data-stu-id="adc50-347">**Default720p** will encode the video into the following 7 layers.</span></span>

#### <a name="output-video-stream"></a><span data-ttu-id="adc50-348">Выходной видеопоток</span><span class="sxs-lookup"><span data-stu-id="adc50-348">Output Video Stream</span></span>
| <span data-ttu-id="adc50-349">Скорость</span><span class="sxs-lookup"><span data-stu-id="adc50-349">BitRate</span></span> | <span data-ttu-id="adc50-350">Ширина</span><span class="sxs-lookup"><span data-stu-id="adc50-350">Width</span></span> | <span data-ttu-id="adc50-351">Высота:</span><span class="sxs-lookup"><span data-stu-id="adc50-351">Height</span></span> | <span data-ttu-id="adc50-352">Макс. кадров/с</span><span class="sxs-lookup"><span data-stu-id="adc50-352">MaxFPS</span></span> | <span data-ttu-id="adc50-353">Профиль</span><span class="sxs-lookup"><span data-stu-id="adc50-353">Profile</span></span> | <span data-ttu-id="adc50-354">Имя выходного потока</span><span class="sxs-lookup"><span data-stu-id="adc50-354">Output Stream Name</span></span> |
| --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="adc50-355">3500</span><span class="sxs-lookup"><span data-stu-id="adc50-355">3500</span></span> |<span data-ttu-id="adc50-356">1280</span><span class="sxs-lookup"><span data-stu-id="adc50-356">1280</span></span> |<span data-ttu-id="adc50-357">720</span><span class="sxs-lookup"><span data-stu-id="adc50-357">720</span></span> |<span data-ttu-id="adc50-358">30</span><span class="sxs-lookup"><span data-stu-id="adc50-358">30</span></span> |<span data-ttu-id="adc50-359">Высокий</span><span class="sxs-lookup"><span data-stu-id="adc50-359">High</span></span> |<span data-ttu-id="adc50-360">Video_1280x720_3500kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-360">Video_1280x720_3500kbps</span></span> |
| <span data-ttu-id="adc50-361">2200</span><span class="sxs-lookup"><span data-stu-id="adc50-361">2200</span></span> |<span data-ttu-id="adc50-362">960</span><span class="sxs-lookup"><span data-stu-id="adc50-362">960</span></span> |<span data-ttu-id="adc50-363">540</span><span class="sxs-lookup"><span data-stu-id="adc50-363">540</span></span> |<span data-ttu-id="adc50-364">30</span><span class="sxs-lookup"><span data-stu-id="adc50-364">30</span></span> |<span data-ttu-id="adc50-365">Главная</span><span class="sxs-lookup"><span data-stu-id="adc50-365">Main</span></span> |<span data-ttu-id="adc50-366">Video_960x540_2200kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-366">Video_960x540_2200kbps</span></span> |
| <span data-ttu-id="adc50-367">1350</span><span class="sxs-lookup"><span data-stu-id="adc50-367">1350</span></span> |<span data-ttu-id="adc50-368">704</span><span class="sxs-lookup"><span data-stu-id="adc50-368">704</span></span> |<span data-ttu-id="adc50-369">396</span><span class="sxs-lookup"><span data-stu-id="adc50-369">396</span></span> |<span data-ttu-id="adc50-370">30</span><span class="sxs-lookup"><span data-stu-id="adc50-370">30</span></span> |<span data-ttu-id="adc50-371">Главная</span><span class="sxs-lookup"><span data-stu-id="adc50-371">Main</span></span> |<span data-ttu-id="adc50-372">Video_704x396_1350kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-372">Video_704x396_1350kbps</span></span> |
| <span data-ttu-id="adc50-373">850</span><span class="sxs-lookup"><span data-stu-id="adc50-373">850</span></span> |<span data-ttu-id="adc50-374">512</span><span class="sxs-lookup"><span data-stu-id="adc50-374">512</span></span> |<span data-ttu-id="adc50-375">288</span><span class="sxs-lookup"><span data-stu-id="adc50-375">288</span></span> |<span data-ttu-id="adc50-376">30</span><span class="sxs-lookup"><span data-stu-id="adc50-376">30</span></span> |<span data-ttu-id="adc50-377">Главная</span><span class="sxs-lookup"><span data-stu-id="adc50-377">Main</span></span> |<span data-ttu-id="adc50-378">Video_512x288_850kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-378">Video_512x288_850kbps</span></span> |
| <span data-ttu-id="adc50-379">550</span><span class="sxs-lookup"><span data-stu-id="adc50-379">550</span></span> |<span data-ttu-id="adc50-380">384</span><span class="sxs-lookup"><span data-stu-id="adc50-380">384</span></span> |<span data-ttu-id="adc50-381">216</span><span class="sxs-lookup"><span data-stu-id="adc50-381">216</span></span> |<span data-ttu-id="adc50-382">30</span><span class="sxs-lookup"><span data-stu-id="adc50-382">30</span></span> |<span data-ttu-id="adc50-383">Главная</span><span class="sxs-lookup"><span data-stu-id="adc50-383">Main</span></span> |<span data-ttu-id="adc50-384">Video_384x216_550kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-384">Video_384x216_550kbps</span></span> |
| <span data-ttu-id="adc50-385">350</span><span class="sxs-lookup"><span data-stu-id="adc50-385">350</span></span> |<span data-ttu-id="adc50-386">340</span><span class="sxs-lookup"><span data-stu-id="adc50-386">340</span></span> |<span data-ttu-id="adc50-387">192</span><span class="sxs-lookup"><span data-stu-id="adc50-387">192</span></span> |<span data-ttu-id="adc50-388">30</span><span class="sxs-lookup"><span data-stu-id="adc50-388">30</span></span> |<span data-ttu-id="adc50-389">Базовый</span><span class="sxs-lookup"><span data-stu-id="adc50-389">Baseline</span></span> |<span data-ttu-id="adc50-390">Video_340x192_350kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-390">Video_340x192_350kbps</span></span> |
| <span data-ttu-id="adc50-391">200</span><span class="sxs-lookup"><span data-stu-id="adc50-391">200</span></span> |<span data-ttu-id="adc50-392">340</span><span class="sxs-lookup"><span data-stu-id="adc50-392">340</span></span> |<span data-ttu-id="adc50-393">192</span><span class="sxs-lookup"><span data-stu-id="adc50-393">192</span></span> |<span data-ttu-id="adc50-394">30</span><span class="sxs-lookup"><span data-stu-id="adc50-394">30</span></span> |<span data-ttu-id="adc50-395">Базовый</span><span class="sxs-lookup"><span data-stu-id="adc50-395">Baseline</span></span> |<span data-ttu-id="adc50-396">Video_340x192_200kbps</span><span class="sxs-lookup"><span data-stu-id="adc50-396">Video_340x192_200kbps</span></span> |

#### <a name="output-audio-stream"></a><span data-ttu-id="adc50-397">Выходной аудиопоток</span><span class="sxs-lookup"><span data-stu-id="adc50-397">Output Audio Stream</span></span>
<span data-ttu-id="adc50-398">Звук кодируется в стереоформате AAC-LC со скоростью 64 Кбит/с и частотой выборки 44,1 кГц.</span><span class="sxs-lookup"><span data-stu-id="adc50-398">Audio is encoded to stereo AAC-LC at 64 kbps, sampling rate of 44.1 kHz.</span></span>

## <a name="signaling-advertisements"></a><span data-ttu-id="adc50-399">Сигнализация о рекламе</span><span class="sxs-lookup"><span data-stu-id="adc50-399">Signaling Advertisements</span></span>
<span data-ttu-id="adc50-400">Если для канала включено кодирование в реальном времени, в конвейере появляется компонент, который обрабатывает видео и может управлять им.</span><span class="sxs-lookup"><span data-stu-id="adc50-400">When your Channel has Live Encoding enabled, you have a component in your pipeline that is processing video, and can manipulate it.</span></span> <span data-ttu-id="adc50-401">Вы можете давать каналу сигналы о том, что в исходящий поток с адаптивной скоростью нужно вставить листы или рекламу.</span><span class="sxs-lookup"><span data-stu-id="adc50-401">You can signal for the Channel to insert slates and/or advertisements into the outgoing adaptive bitrate stream.</span></span> <span data-ttu-id="adc50-402">Листы — это неподвижные изображения, которые закрывают входной поток в определенных случаях (например, во время рекламной паузы).</span><span class="sxs-lookup"><span data-stu-id="adc50-402">Slates are still images that you can use to cover up the input live feed in certain cases (for example during a commercial break).</span></span> <span data-ttu-id="adc50-403">Рекламные сигналы — это синхронизированные во времени сигналы, которые добавляются в исходящий поток и сообщают видеопроигрывателю о том, что нужно выполнить специальные действия, например переключиться на рекламу в определенный момент.</span><span class="sxs-lookup"><span data-stu-id="adc50-403">Advertising signals, are time-synchronized signals you embed into the outgoing stream to tell the video player to take special action – such as to switch to an advertisement at the appropriate time.</span></span> <span data-ttu-id="adc50-404">Общие сведения о механизме сигнализации SCTE-35, используемом в этих целях, см. в этой [записи блога](https://codesequoia.wordpress.com/2014/02/24/understanding-scte-35/).</span><span class="sxs-lookup"><span data-stu-id="adc50-404">See this [blog](https://codesequoia.wordpress.com/2014/02/24/understanding-scte-35/) for an overview of the SCTE-35 signaling mechanism used for this purpose.</span></span> <span data-ttu-id="adc50-405">Ниже описан типичный сценарий, который можно реализовать в рамках трансляции.</span><span class="sxs-lookup"><span data-stu-id="adc50-405">Below is a typical scenario you could implement in your live event.</span></span>

1. <span data-ttu-id="adc50-406">Перед началом мероприятия зрители видят вступительное изображение.</span><span class="sxs-lookup"><span data-stu-id="adc50-406">Have your viewers get a PRE-EVENT image before the event starts.</span></span>
2. <span data-ttu-id="adc50-407">По завершении мероприятия зрители видят заключительное изображение.</span><span class="sxs-lookup"><span data-stu-id="adc50-407">Have your viewers get a POST-EVENT image after the event ends.</span></span>
3. <span data-ttu-id="adc50-408">Если во время мероприятия возникла проблема (например, на стадионе пропал свет), зрители видят изображение с сообщением о неполадке.</span><span class="sxs-lookup"><span data-stu-id="adc50-408">Have your viewers get an ERROR-EVENT image if there is a problem during the event (for example, power failure in the stadium).</span></span>
4. <span data-ttu-id="adc50-409">Чтобы скрыть видеопоток трансляции во время рекламной паузы, выведите соответствующее изображение.</span><span class="sxs-lookup"><span data-stu-id="adc50-409">Send an AD-BREAK image to hide the live event feed during a commercial break.</span></span>

<span data-ttu-id="adc50-410">Ниже описываются свойства, которые можно задать при сигнализации о рекламе.</span><span class="sxs-lookup"><span data-stu-id="adc50-410">The following are the properties you can set when signaling advertisements.</span></span> 

### <a name="duration"></a><span data-ttu-id="adc50-411">Длительность</span><span class="sxs-lookup"><span data-stu-id="adc50-411">Duration</span></span>
<span data-ttu-id="adc50-412">Длительность рекламной паузы в секундах.</span><span class="sxs-lookup"><span data-stu-id="adc50-412">The duration, in seconds, of the commercial break.</span></span> <span data-ttu-id="adc50-413">Чтобы рекламная пауза могла начаться, это должно быть положительное значение, отличное от нуля.</span><span class="sxs-lookup"><span data-stu-id="adc50-413">This has to be a non-zero positive value in order to start the commercial break.</span></span> <span data-ttu-id="adc50-414">Если установить длительность рекламной паузы, идущей в данным момент, равной нулю, эта пауза будет отменена.</span><span class="sxs-lookup"><span data-stu-id="adc50-414">When a commercial break is in progress, and the duration is set to zero with the CueId matching the on-going commercial break, then that break is canceled.</span></span>

### <a name="cueid"></a><span data-ttu-id="adc50-415">CueId</span><span class="sxs-lookup"><span data-stu-id="adc50-415">CueId</span></span>
<span data-ttu-id="adc50-416">Уникальный идентификатор рекламной паузы, используемый подчиненным приложением для выполнения соответствующих действий.</span><span class="sxs-lookup"><span data-stu-id="adc50-416">A Unique ID for the commercial break, to be used by downstream application to take appropriate action(s).</span></span> <span data-ttu-id="adc50-417">Должен быть положительным целым числом.</span><span class="sxs-lookup"><span data-stu-id="adc50-417">Needs to be a positive integer.</span></span> <span data-ttu-id="adc50-418">Вы можете присвоить этому свойству любое положительное целое число или использовать вышестоящую систему для отслеживания идентификаторов.</span><span class="sxs-lookup"><span data-stu-id="adc50-418">You can set this value to any random positive integer or use an upstream system to track the Cue Ids.</span></span> <span data-ttu-id="adc50-419">Перед передачей идентификаторов через интерфейс API обязательно приводите их к положительным целочисленным значениям.</span><span class="sxs-lookup"><span data-stu-id="adc50-419">Make certain to normalize any ids to positive integers before submitting through the API.</span></span>

### <a name="show-slate"></a><span data-ttu-id="adc50-420">Показать лист</span><span class="sxs-lookup"><span data-stu-id="adc50-420">Show slate</span></span>
<span data-ttu-id="adc50-421">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="adc50-421">Optional.</span></span> <span data-ttu-id="adc50-422">Дает динамическому кодировщику сигнал переключиться во время рекламной паузы на изображение [баннера по умолчанию](media-services-manage-live-encoder-enabled-channels.md#default_slate) , чтобы скрыть входящий видеопоток.</span><span class="sxs-lookup"><span data-stu-id="adc50-422">Signals the live encoder to switch to the [default slate](media-services-manage-live-encoder-enabled-channels.md#default_slate) image during a commercial break and hide the incoming video feed.</span></span> <span data-ttu-id="adc50-423">Звук на это время также выключается.</span><span class="sxs-lookup"><span data-stu-id="adc50-423">Audio is also muted during slate.</span></span> <span data-ttu-id="adc50-424">Значение по умолчанию — **false**.</span><span class="sxs-lookup"><span data-stu-id="adc50-424">Default is **false**.</span></span> 

<span data-ttu-id="adc50-425">Используемое изображение определяется с помощью свойства идентификатора ресурса листа по умолчанию во время создания канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-425">The image used will be the one specified via the default slate asset Id property at the time of the channel creation.</span></span> <span data-ttu-id="adc50-426">Лист растягивается по размеру экрана.</span><span class="sxs-lookup"><span data-stu-id="adc50-426">The slate will be stretched to fit the display image size.</span></span> 

## <a name="insert-slate--images"></a><span data-ttu-id="adc50-427">Вставка изображений баннеров</span><span class="sxs-lookup"><span data-stu-id="adc50-427">Insert Slate  images</span></span>
<span data-ttu-id="adc50-428">Динамическому кодировщику канала можно дать сигнал переключиться на изображение листа.</span><span class="sxs-lookup"><span data-stu-id="adc50-428">The live encoder within the Channel can be signaled to switch to a slate image.</span></span> <span data-ttu-id="adc50-429">Ему также можно дать сигнал завершить показ этого изображения.</span><span class="sxs-lookup"><span data-stu-id="adc50-429">It can also be signaled to end an on-going slate.</span></span> 

<span data-ttu-id="adc50-430">Динамический кодировщик можно настроить на переключение на изображение листа и скрытие входящего видеосигнала в определенных ситуациях, например во время рекламной паузы.</span><span class="sxs-lookup"><span data-stu-id="adc50-430">The live encoder can be configured to switch to a slate image and hide the incoming video signal in certain situations – for example, during an ad break.</span></span> <span data-ttu-id="adc50-431">Если лист не настроен, видео во время рекламной паузы не скрывается.</span><span class="sxs-lookup"><span data-stu-id="adc50-431">If such a slate is not configured, input video is not masked during that ad break.</span></span>

### <a name="duration"></a><span data-ttu-id="adc50-432">Длительность</span><span class="sxs-lookup"><span data-stu-id="adc50-432">Duration</span></span>
<span data-ttu-id="adc50-433">Длительность показа листа в секундах.</span><span class="sxs-lookup"><span data-stu-id="adc50-433">The duration of the slate in seconds.</span></span> <span data-ttu-id="adc50-434">Чтобы показ листа мог начаться, это должно быть положительное значение, отличное от нуля.</span><span class="sxs-lookup"><span data-stu-id="adc50-434">This has to be a non-zero positive value in order to start the slate.</span></span> <span data-ttu-id="adc50-435">Если задать длительность равной нулю во время показа листа, его показ будет завершен.</span><span class="sxs-lookup"><span data-stu-id="adc50-435">If there is an on-going slate, and a duration of zero is specified, then that on-going slate will be terminated.</span></span>

### <a name="insert-slate-on-ad-marker"></a><span data-ttu-id="adc50-436">Вставить лист при получении маркера рекламы</span><span class="sxs-lookup"><span data-stu-id="adc50-436">Insert slate on ad marker</span></span>
<span data-ttu-id="adc50-437">Если задано значение true, динамический кодировщик вставляет изображение листа во время рекламной паузы.</span><span class="sxs-lookup"><span data-stu-id="adc50-437">When set to true, this setting configures the live encoder to insert a slate image during an ad break.</span></span> <span data-ttu-id="adc50-438">По умолчанию используется значение true.</span><span class="sxs-lookup"><span data-stu-id="adc50-438">The default value is true.</span></span> 

### <span data-ttu-id="adc50-439"><a id="default_slate"></a>Идентификатор ресурс-контейнера баннера по умолчанию</span><span class="sxs-lookup"><span data-stu-id="adc50-439"><a id="default_slate"></a>Default slate Asset Id</span></span>

<span data-ttu-id="adc50-440">необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="adc50-440">Optional.</span></span> <span data-ttu-id="adc50-441">Задает идентификатор ресурса служб мультимедиа, который содержит изображение листа.</span><span class="sxs-lookup"><span data-stu-id="adc50-441">Specifies the Asset Id of the Media Services Asset which contains the slate image.</span></span> <span data-ttu-id="adc50-442">Значение по умолчанию — null.</span><span class="sxs-lookup"><span data-stu-id="adc50-442">Default is null.</span></span> 


>[!NOTE] 
><span data-ttu-id="adc50-443">Перед созданием канала необходимо отправить изображение баннера с учетом следующих ограничений в качестве выделенного ресурса-контейнера (в этом ресурсе-контейнере не должно быть никаких других файлов).</span><span class="sxs-lookup"><span data-stu-id="adc50-443">Before creating the Channel, the slate image with the following constraints should be uploaded as a dedicated asset (no other files should be in this asset).</span></span> <span data-ttu-id="adc50-444">Это изображение используется только в том случае, когда динамический кодировщик вставляет баннер ввиду рекламной паузы или после явно заданного сигнала вставить баннер.</span><span class="sxs-lookup"><span data-stu-id="adc50-444">This image is used only when the live encoder is inserting a slate due to an ad break, or has been explicitly signaled to insert a slate.</span></span> <span data-ttu-id="adc50-445">Динамический кодировщик может также перейти в режим баннера при возникновении определенных ошибок: например, при потере входного сигнала.</span><span class="sxs-lookup"><span data-stu-id="adc50-445">The live encoder can also go into a slate mode during certain error conditions – for example if the input signal is lost.</span></span> <span data-ttu-id="adc50-446">В настоящее время нет возможности использовать настраиваемое изображение, когда кодировщик переходит в такое состояние.</span><span class="sxs-lookup"><span data-stu-id="adc50-446">There is currently no option to use a custom image when the live encoder enters such an 'input signal lost' state.</span></span> <span data-ttu-id="adc50-447">Вы можете проголосовать за данную функцию [здесь](https://feedback.azure.com/forums/169396-azure-media-services/suggestions/10190457-define-custom-slate-image-on-a-live-encoder-channel).</span><span class="sxs-lookup"><span data-stu-id="adc50-447">You can vote for this feature [here](https://feedback.azure.com/forums/169396-azure-media-services/suggestions/10190457-define-custom-slate-image-on-a-live-encoder-channel).</span></span>


* <span data-ttu-id="adc50-448">Максимальное разрешение 1920 x 1080.</span><span class="sxs-lookup"><span data-stu-id="adc50-448">At most 1920x1080 in resolution.</span></span>
* <span data-ttu-id="adc50-449">Максимальный размер 3 МБ.</span><span class="sxs-lookup"><span data-stu-id="adc50-449">At most 3 Mbytes in size.</span></span>
* <span data-ttu-id="adc50-450">Имя файла должно иметь расширение *.jpg.</span><span class="sxs-lookup"><span data-stu-id="adc50-450">The file name must have a *.jpg extension.</span></span>
* <span data-ttu-id="adc50-451">Изображение должно быть загружено в актив (Asset) в качестве единственного содержащегося в этом активе файла (AssetFile), и этот AssetFile должен быть помечен как основной файл.</span><span class="sxs-lookup"><span data-stu-id="adc50-451">The image must be uploaded into an Asset as the only AssetFile in that Asset and this AssetFile should be marked as the primary file.</span></span> <span data-ttu-id="adc50-452">Актив должен храниться в незашифрованном виде.</span><span class="sxs-lookup"><span data-stu-id="adc50-452">The Asset cannot be storage encrypted.</span></span>

<span data-ttu-id="adc50-453">Если **идентификатор файла баннера по умолчанию** не указан, а свойство **Вставлять баннер по маркеру рекламы** имеет значение **true**, то для скрытия входного видеопотока будет использоваться изображение служб мультимедиа Azure по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="adc50-453">If the **default slate Asset Id** is not specified, and **insert slate on ad marker** is set to **true**, a default Azure Media Services image will be used to hide the input video stream.</span></span> <span data-ttu-id="adc50-454">Звук на это время также выключается.</span><span class="sxs-lookup"><span data-stu-id="adc50-454">Audio is also muted during slate.</span></span> 

## <a name="channels-programs"></a><span data-ttu-id="adc50-455">Программы канала</span><span class="sxs-lookup"><span data-stu-id="adc50-455">Channel's programs</span></span>
<span data-ttu-id="adc50-456">Канал связан с программами, с помощью которых вы можете управлять публикацией и хранением сегментов динамического потока.</span><span class="sxs-lookup"><span data-stu-id="adc50-456">A channel is associated with programs that enable you to control the publishing and storage of segments in a live stream.</span></span> <span data-ttu-id="adc50-457">Каналы управляют программами.</span><span class="sxs-lookup"><span data-stu-id="adc50-457">Channels manage Programs.</span></span> <span data-ttu-id="adc50-458">Связь между каналом и программой очень похожа на аналогичную взаимосвязь в традиционной мультимедийной отрасли, где по определенному каналу транслируется постоянный поток информации, а программа связана с определенным временным промежутком — мероприятием на этом канале.</span><span class="sxs-lookup"><span data-stu-id="adc50-458">The Channel and Program relationship is very similar to traditional media where a Channel has a constant stream of content and a program is scoped to some timed event on that Channel.</span></span>

<span data-ttu-id="adc50-459">Задать количество часов, в течение которых следует хранить записанное содержимое программы, можно с помощью параметра длины **окна архивирования** .</span><span class="sxs-lookup"><span data-stu-id="adc50-459">You can specify the number of hours you want to retain the recorded content for the program by setting the **Archive Window** length.</span></span> <span data-ttu-id="adc50-460">Для него можно задать значение от 5 минут до 25 часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-460">This value can be set from a minimum of 5 minutes to a maximum of 25 hours.</span></span> <span data-ttu-id="adc50-461">Длина окна архивирования также определяет максимальный период, в пределах которого клиенты могут перемещаться назад во времени относительно текущей позиции в передаваемом потоке данных.</span><span class="sxs-lookup"><span data-stu-id="adc50-461">Archive window length also dictates the maximum amount of time clients can seek back in time from the current live position.</span></span> <span data-ttu-id="adc50-462">Программы могут длиться в течение определенного времени, однако содержимое, выходящее за пределы окна указанной длины, теряется.</span><span class="sxs-lookup"><span data-stu-id="adc50-462">Programs can run over the specified amount of time, but content that falls behind the window length is continuously discarded.</span></span> <span data-ttu-id="adc50-463">Значение этого свойства также определяет максимальный размер манифестов клиентов.</span><span class="sxs-lookup"><span data-stu-id="adc50-463">This value of this property also determines how long the client manifests can grow.</span></span>

<span data-ttu-id="adc50-464">Каждая программа связана с ресурсом, в котором хранится передаваемый в потоковом режиме контент.</span><span class="sxs-lookup"><span data-stu-id="adc50-464">Each program is associated with an Asset which stores the streamed content.</span></span> <span data-ttu-id="adc50-465">Ресурс сопоставляется с контейнером блочных BLOB-объектов в учетной записи хранения Azure. Файлы ресурса хранятся в этом контейнере как большие двоичные объекты.</span><span class="sxs-lookup"><span data-stu-id="adc50-465">An asset is mapped to a block blob container in the Azure Storage account and the files in the asset are stored as blobs in that container.</span></span> <span data-ttu-id="adc50-466">Чтобы опубликовать программу для просмотра потока клиентами, необходимо создать указатель OnDemand для соответствующего ресурса.</span><span class="sxs-lookup"><span data-stu-id="adc50-466">To publish the program so your customers can view the stream you must create an OnDemand locator for the associated asset.</span></span> <span data-ttu-id="adc50-467">С помощью этого указателя можно сформировать URL-адрес потоковой передачи данных, который предоставляется клиентам.</span><span class="sxs-lookup"><span data-stu-id="adc50-467">Having this locator will enable you to build a streaming URL that you can provide to your clients.</span></span>

<span data-ttu-id="adc50-468">Канал поддерживает одновременную потоковую трансляцию до трех программ, поэтому можно создавать по несколько архивов одного и того же входящего потока.</span><span class="sxs-lookup"><span data-stu-id="adc50-468">A Channel supports up to three concurrently running programs so you can create multiple archives of the same incoming stream.</span></span> <span data-ttu-id="adc50-469">Благодаря этому можно публиковать и архивировать разные части транслируемого мероприятия.</span><span class="sxs-lookup"><span data-stu-id="adc50-469">This allows you to publish and archive different parts of an event as needed.</span></span> <span data-ttu-id="adc50-470">Например ваш бизнес-требование — архивировать 6 часов программы, но для передачи только оставить последние 10 минут.</span><span class="sxs-lookup"><span data-stu-id="adc50-470">For example, your business requirement is to archive 6 hours of a program, but to broadcast only last 10 minutes.</span></span> <span data-ttu-id="adc50-471">Для этого необходимо создать две одновременно работающие программы.</span><span class="sxs-lookup"><span data-stu-id="adc50-471">To accomplish this, you need to create two concurrently running programs.</span></span> <span data-ttu-id="adc50-472">Для одной из них настроено архивирование 6 часов транслируемого мероприятия, но без публикации.</span><span class="sxs-lookup"><span data-stu-id="adc50-472">One program is set to archive 6 hours of the event but the program is not published.</span></span> <span data-ttu-id="adc50-473">Для второй программы настроено архивирование 10 минут с публикацией.</span><span class="sxs-lookup"><span data-stu-id="adc50-473">The other program is set to archive for 10 minutes and this program is published.</span></span>

<span data-ttu-id="adc50-474">Не используйте существующие программы повторно для новых мероприятий.</span><span class="sxs-lookup"><span data-stu-id="adc50-474">You should not reuse existing programs for new events.</span></span> <span data-ttu-id="adc50-475">Вместо этого создавайте и запускайте новую программу для каждого мероприятия, как описано в разделе "Программирование приложений потоковой трансляции".</span><span class="sxs-lookup"><span data-stu-id="adc50-475">Instead, create and start a new program for each event as described in the Programming Live Streaming Applications section.</span></span>

<span data-ttu-id="adc50-476">Когда вы будете готовы начать потоковую передачу и архивацию, запустите программу.</span><span class="sxs-lookup"><span data-stu-id="adc50-476">Start the program when you are ready to start streaming and archiving.</span></span> <span data-ttu-id="adc50-477">Чтобы остановить потоковую передачу и архивацию содержимого мероприятия, завершите работу программы.</span><span class="sxs-lookup"><span data-stu-id="adc50-477">Stop the program whenever you want to stop streaming and archiving the event.</span></span> 

<span data-ttu-id="adc50-478">Чтобы удалить архивированное содержимое, остановите и удалите программу, а затем удалите связанный с ней ресурс.</span><span class="sxs-lookup"><span data-stu-id="adc50-478">To delete archived content, stop and delete the program and then delete the associated asset.</span></span> <span data-ttu-id="adc50-479">Ресурс невозможно удалить, пока он используется какой-либо программой: сначала нужно удалить ее.</span><span class="sxs-lookup"><span data-stu-id="adc50-479">An asset cannot be deleted if it is used by a program; the program must be deleted first.</span></span> 

<span data-ttu-id="adc50-480">Даже после остановки и удаления программы пользователи смогут запрашивать потоковую передачу архивированного видеосодержимого, пока не удален соответствующий ресурс.</span><span class="sxs-lookup"><span data-stu-id="adc50-480">Even after you stop and delete the program, the users would be able to stream your archived content as a video on demand, for as long as you do not delete the asset.</span></span>

<span data-ttu-id="adc50-481">Если вы хотите сохранить заархивированное содержимое, но при этом заблокировать возможность его потоковой передачи, удалите указатель.</span><span class="sxs-lookup"><span data-stu-id="adc50-481">If you do want to retain the archived content, but not have it available for streaming, delete the streaming locator.</span></span>

## <a name="getting-a-thumbnail-preview-of-a-live-feed"></a><span data-ttu-id="adc50-482">Получение эскиза динамического канала</span><span class="sxs-lookup"><span data-stu-id="adc50-482">Getting a thumbnail preview of a live feed</span></span>
<span data-ttu-id="adc50-483">При включении кодирования в реальном времени вы можете предварительно просматривать входной поток канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-483">When Live Encoding is enabled, you can now get a preview of the live feed as it reaches the Channel.</span></span> <span data-ttu-id="adc50-484">Это полезная функция, так как с ее помощью можно узнать, действительно ли поток поступает в канал.</span><span class="sxs-lookup"><span data-stu-id="adc50-484">This can be a valuable tool to check whether your live feed is actually reaching the Channel.</span></span> 

## <span data-ttu-id="adc50-485"><a id="states"></a>Состояния канала и их сопоставление с режимом выставления счетов</span><span class="sxs-lookup"><span data-stu-id="adc50-485"><a id="states"></a>Channel states and how states map to the billing mode</span></span>
<span data-ttu-id="adc50-486">Текущее состояние канала.</span><span class="sxs-lookup"><span data-stu-id="adc50-486">The current state of a Channel.</span></span> <span data-ttu-id="adc50-487">Ниже перечислены возможные значения.</span><span class="sxs-lookup"><span data-stu-id="adc50-487">Possible values include:</span></span>

* <span data-ttu-id="adc50-488">**Остановлен**.</span><span class="sxs-lookup"><span data-stu-id="adc50-488">**Stopped**.</span></span> <span data-ttu-id="adc50-489">Это начальное состояние канала после его создания.</span><span class="sxs-lookup"><span data-stu-id="adc50-489">This is the initial state of the Channel after its creation.</span></span> <span data-ttu-id="adc50-490">В этом состоянии можно изменять свойства канала, но потоковая передача запрещена.</span><span class="sxs-lookup"><span data-stu-id="adc50-490">In this state, the Channel properties can be updated but streaming is not allowed.</span></span>
* <span data-ttu-id="adc50-491">**Запуск**.</span><span class="sxs-lookup"><span data-stu-id="adc50-491">**Starting**.</span></span> <span data-ttu-id="adc50-492">Канал запускается.</span><span class="sxs-lookup"><span data-stu-id="adc50-492">The Channel is being started.</span></span> <span data-ttu-id="adc50-493">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="adc50-493">No updates or streaming is allowed during this state.</span></span> <span data-ttu-id="adc50-494">Если возникает ошибка, канал возвращается в состояние "Остановлен".</span><span class="sxs-lookup"><span data-stu-id="adc50-494">If an error occurs, the Channel returns to the Stopped state.</span></span>
* <span data-ttu-id="adc50-495">**Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="adc50-495">**Running**.</span></span> <span data-ttu-id="adc50-496">Канал может обрабатывать динамические потоки.</span><span class="sxs-lookup"><span data-stu-id="adc50-496">The Channel is capable of processing live streams.</span></span>
* <span data-ttu-id="adc50-497">**Остановка**.</span><span class="sxs-lookup"><span data-stu-id="adc50-497">**Stopping**.</span></span> <span data-ttu-id="adc50-498">Канал останавливается.</span><span class="sxs-lookup"><span data-stu-id="adc50-498">The Channel is being stopped.</span></span> <span data-ttu-id="adc50-499">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="adc50-499">No updates or streaming is allowed during this state.</span></span>
* <span data-ttu-id="adc50-500">**Удаление**.</span><span class="sxs-lookup"><span data-stu-id="adc50-500">**Deleting**.</span></span> <span data-ttu-id="adc50-501">Канал удаляется.</span><span class="sxs-lookup"><span data-stu-id="adc50-501">The Channel is being deleted.</span></span> <span data-ttu-id="adc50-502">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="adc50-502">No updates or streaming is allowed during this state.</span></span>

<span data-ttu-id="adc50-503">В таблице ниже показано, как состояния канала соотносятся с режимом выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="adc50-503">The following table shows how Channel states map to the billing mode.</span></span> 

| <span data-ttu-id="adc50-504">Состояние канала</span><span class="sxs-lookup"><span data-stu-id="adc50-504">Channel state</span></span> | <span data-ttu-id="adc50-505">Индикаторы в пользовательском интерфейсе портала</span><span class="sxs-lookup"><span data-stu-id="adc50-505">Portal UI Indicators</span></span> | <span data-ttu-id="adc50-506">Выставление счетов</span><span class="sxs-lookup"><span data-stu-id="adc50-506">Billed?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="adc50-507">Запуск</span><span class="sxs-lookup"><span data-stu-id="adc50-507">Starting</span></span> |<span data-ttu-id="adc50-508">Запуск</span><span class="sxs-lookup"><span data-stu-id="adc50-508">Starting</span></span> |<span data-ttu-id="adc50-509">Нет (переходное состояние)</span><span class="sxs-lookup"><span data-stu-id="adc50-509">No (transient state)</span></span> |
| <span data-ttu-id="adc50-510">Выполняется</span><span class="sxs-lookup"><span data-stu-id="adc50-510">Running</span></span> |<span data-ttu-id="adc50-511">Готово (нет запущенных программ)</span><span class="sxs-lookup"><span data-stu-id="adc50-511">Ready (no running programs)</span></span><br/><span data-ttu-id="adc50-512">или</span><span class="sxs-lookup"><span data-stu-id="adc50-512">or</span></span><br/><span data-ttu-id="adc50-513">Потоковая передача (запущена по крайней мере одна программа)</span><span class="sxs-lookup"><span data-stu-id="adc50-513">Streaming (at least one running program)</span></span> |<span data-ttu-id="adc50-514">ДА</span><span class="sxs-lookup"><span data-stu-id="adc50-514">Yes</span></span> |
| <span data-ttu-id="adc50-515">Остановка</span><span class="sxs-lookup"><span data-stu-id="adc50-515">Stopping</span></span> |<span data-ttu-id="adc50-516">Остановка</span><span class="sxs-lookup"><span data-stu-id="adc50-516">Stopping</span></span> |<span data-ttu-id="adc50-517">Нет (переходное состояние)</span><span class="sxs-lookup"><span data-stu-id="adc50-517">No (transient state)</span></span> |
| <span data-ttu-id="adc50-518">Остановлен</span><span class="sxs-lookup"><span data-stu-id="adc50-518">Stopped</span></span> |<span data-ttu-id="adc50-519">Остановлен</span><span class="sxs-lookup"><span data-stu-id="adc50-519">Stopped</span></span> |<span data-ttu-id="adc50-520">Нет</span><span class="sxs-lookup"><span data-stu-id="adc50-520">No</span></span> |

> [!NOTE]
> <span data-ttu-id="adc50-521">Сейчас среднее время запуска канала составляет примерно 2 минуты, но в отдельных случаях оно может составлять до 20 минут и более.</span><span class="sxs-lookup"><span data-stu-id="adc50-521">Currently, the Channel start average is about 2 minutes, but at times could take up to 20+ minutes.</span></span> <span data-ttu-id="adc50-522">Сброс канала может занимать до 5 минут.</span><span class="sxs-lookup"><span data-stu-id="adc50-522">Channel resets can take up to 5 minutes.</span></span>
> 
> 

## <span data-ttu-id="adc50-523"><a id="Considerations"></a>Рекомендации</span><span class="sxs-lookup"><span data-stu-id="adc50-523"><a id="Considerations"></a>Considerations</span></span>
* <span data-ttu-id="adc50-524">Если в канале со **стандартным** типом кодировки теряется веб-канал входного источника или участника, он заменяет источник видео или аудио баннером ошибки и тишиной.</span><span class="sxs-lookup"><span data-stu-id="adc50-524">When a Channel of **Standard** encoding type experiences a loss of input source/contribution feed, it compensates for it by replacing the source video/audio with an error slate and silence.</span></span> <span data-ttu-id="adc50-525">Канал продолжит передавать баннер, пока канал входного источника или участника не будет восстановлен.</span><span class="sxs-lookup"><span data-stu-id="adc50-525">The Channel will continue to emit a slate until the input/contribution feed resumes.</span></span> <span data-ttu-id="adc50-526">Мы не рекомендуем оставлять динамический канал в таком состоянии больше двух часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-526">We recommend that a live channel not be left in such a state for longer than 2 hours.</span></span> <span data-ttu-id="adc50-527">После этого поведение канала при повторном подключении не гарантируется, как и его поведение в ответ на команду Reset.</span><span class="sxs-lookup"><span data-stu-id="adc50-527">Beyond that point, the behavior of the Channel on input reconnection is not guaranteed, neither is its behavior in response to a Reset command.</span></span> <span data-ttu-id="adc50-528">Необходимо остановить канал, удалить его и создать новый.</span><span class="sxs-lookup"><span data-stu-id="adc50-528">You will have to stop the Channel, delete it and create a new one.</span></span>
* <span data-ttu-id="adc50-529">Во время работы канала или связанных с ним программ входной протокол изменить нельзя.</span><span class="sxs-lookup"><span data-stu-id="adc50-529">You cannot change the input protocol while the Channel or its associated programs are running.</span></span> <span data-ttu-id="adc50-530">Если вам нужны другие протоколы, создайте отдельный канал для каждого из них.</span><span class="sxs-lookup"><span data-stu-id="adc50-530">If you require different protocols, you should create separate channels for each input protocol.</span></span>
* <span data-ttu-id="adc50-531">Каждый раз при повторной настройке динамического кодировщика вызывайте для канала метод **Reset** .</span><span class="sxs-lookup"><span data-stu-id="adc50-531">Every time you reconfigure the live encoder, call the **Reset** method on the channel.</span></span> <span data-ttu-id="adc50-532">Перед сбросом канала нужно остановить программу.</span><span class="sxs-lookup"><span data-stu-id="adc50-532">Before you reset the channel, you have to stop the program.</span></span> <span data-ttu-id="adc50-533">После сброса канала перезапустите программу.</span><span class="sxs-lookup"><span data-stu-id="adc50-533">After you reset the channel, restart the program.</span></span>
* <span data-ttu-id="adc50-534">Канал можно остановить, только если он находится в состоянии "Выполняется" и все передаваемые по нему программы остановлены.</span><span class="sxs-lookup"><span data-stu-id="adc50-534">A channel can be stopped only when it is in the Running state, and all programs on the channel have been stopped.</span></span>
* <span data-ttu-id="adc50-535">По умолчанию в учетную запись служб мультимедиа можно добавить не более 5 каналов.</span><span class="sxs-lookup"><span data-stu-id="adc50-535">By default you can only add 5 channels to your Media Services account.</span></span> <span data-ttu-id="adc50-536">Это мягкая квота для всех новых учетных записей.</span><span class="sxs-lookup"><span data-stu-id="adc50-536">This is a soft quota on all new accounts.</span></span> <span data-ttu-id="adc50-537">Дополнительные сведения см. в разделе [Квоты и ограничения](media-services-quotas-and-limitations.md).</span><span class="sxs-lookup"><span data-stu-id="adc50-537">For more information, see [Quotas and Limitations](media-services-quotas-and-limitations.md).</span></span>
* <span data-ttu-id="adc50-538">Во время работы канала или связанных с ним программ входной протокол изменить нельзя.</span><span class="sxs-lookup"><span data-stu-id="adc50-538">You cannot change the input protocol while the Channel or its associated programs are running.</span></span> <span data-ttu-id="adc50-539">Если вам нужны другие протоколы, создайте отдельный канал для каждого из них.</span><span class="sxs-lookup"><span data-stu-id="adc50-539">If you require different protocols, you should create separate channels for each input protocol.</span></span>
* <span data-ttu-id="adc50-540">Счета выставляются, только когда канал находится в состоянии **Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="adc50-540">You are only billed when your Channel is in the **Running** state.</span></span> <span data-ttu-id="adc50-541">Дополнительные сведения см. в [этом разделе](media-services-manage-live-encoder-enabled-channels.md#states).</span><span class="sxs-lookup"><span data-stu-id="adc50-541">For more information, refer to [this](media-services-manage-live-encoder-enabled-channels.md#states) section.</span></span>
* <span data-ttu-id="adc50-542">Сейчас максимальная рекомендуемая продолжительность интерактивного события составляет 8 часов.</span><span class="sxs-lookup"><span data-stu-id="adc50-542">Currently, the max recommended duration of a live event is 8 hours.</span></span> <span data-ttu-id="adc50-543">Если необходимо запустить канал на более длительное время, обратитесь в amslived на веб-сайте Microsoft.com.</span><span class="sxs-lookup"><span data-stu-id="adc50-543">Please contact  amslived at Microsoft.com if you need to run a Channel for longer periods of time.</span></span>
* <span data-ttu-id="adc50-544">Убедитесь, что конечная точка потоковой передачи, из которой нужно транслировать содержимое, находится в состоянии **Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="adc50-544">Make sure to have the streaming endpoint from which you want to stream content in the **Running** state.</span></span>
* <span data-ttu-id="adc50-545">При вводе нескольких языковых дорожек и выполнении кодирования в реальном времени с помощью Azure для ввода нескольких языков поддерживается только RTP.</span><span class="sxs-lookup"><span data-stu-id="adc50-545">When inputting multiple language tracks and doing live encoding with Azure, only RTP is supported for multi-language input.</span></span> <span data-ttu-id="adc50-546">Можно определить до 8 аудиопотоков с помощью MPEG-2 TS по RTP.</span><span class="sxs-lookup"><span data-stu-id="adc50-546">You can define up to 8 audio streams using MPEG-2 TS over RTP.</span></span> <span data-ttu-id="adc50-547">Прием нескольких звуковых дорожек RTMP или Smooth Streaming в настоящее время не поддерживается.</span><span class="sxs-lookup"><span data-stu-id="adc50-547">Ingesting multiple audio tracks with RTMP or Smooth streaming is currently not supported.</span></span> <span data-ttu-id="adc50-548">При выполнении кодирования в реальном времени с помощью [локальных динамических кодировщиков](media-services-live-streaming-with-onprem-encoders.md)это ограничение не действует, так как любые данные, передаваемые в AMS, проходят через канал без дальнейшей обработки.</span><span class="sxs-lookup"><span data-stu-id="adc50-548">When doing live encoding with [on-premises live encodes](media-services-live-streaming-with-onprem-encoders.md), there is no such limitation because whatever is sent to AMS passes through a channel without any further processing.</span></span>
* <span data-ttu-id="adc50-549">Предустановка кодирования считает "максимальной частотой кадров" 30 кадров в секунду.</span><span class="sxs-lookup"><span data-stu-id="adc50-549">The encoding preset uses the notion of "max frame rate" of 30 fps.</span></span> <span data-ttu-id="adc50-550">Поэтому, если входные данные — 60 кадров/с/59,97i, входные кадры удаляются или расперемежевываются на кадры с частотой 30/29,97 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-550">So if the input is 60fps/59.97i, the input frames are dropped/de-interlaced to 30/29.97 fps.</span></span> <span data-ttu-id="adc50-551">Если входные данные — 50 кадров/с/50i, входные кадры удаляются или расперемежевываются на кадры с частотой 25 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-551">If the input is 50fps/50i, the input frames are dropped/de-interlaced to 25 fps.</span></span> <span data-ttu-id="adc50-552">Если входные данные — 25 кадров/с, выходные данные остаются на частоте 25 кадров/с.</span><span class="sxs-lookup"><span data-stu-id="adc50-552">If the input is 25 fps, output remains at 25 fps.</span></span>
* <span data-ttu-id="adc50-553">Не забудьте ОСТАНОВИТЬ ВАШ КАНАЛ после завершения работы.</span><span class="sxs-lookup"><span data-stu-id="adc50-553">Don't forget to STOP YOUR CHANNELS when done.</span></span> <span data-ttu-id="adc50-554">Если этого не сделать, плата продолжит начисляться.</span><span class="sxs-lookup"><span data-stu-id="adc50-554">If you don't, billing will continue.</span></span>

## <a name="known-issues"></a><span data-ttu-id="adc50-555">Известные проблемы</span><span class="sxs-lookup"><span data-stu-id="adc50-555">Known Issues</span></span>
* <span data-ttu-id="adc50-556">Время запуска канала было сокращено примерно до 2 минут, однако в отдельных случаях оно может составлять до 20 минут и более.</span><span class="sxs-lookup"><span data-stu-id="adc50-556">Channel start up time has been improved to an average of 2 minutes, but at times of increased demand could still take up to 20+ minutes.</span></span>
* <span data-ttu-id="adc50-557">Поддержка RTP адаптируется к профессиональным вещателям.</span><span class="sxs-lookup"><span data-stu-id="adc50-557">RTP support is catered towards professional broadcasters.</span></span> <span data-ttu-id="adc50-558">Просмотрите заметки об RTP в [этом](https://azure.microsoft.com/blog/2015/04/13/an-introduction-to-live-encoding-with-azure-media-services/) блоге.</span><span class="sxs-lookup"><span data-stu-id="adc50-558">Please review the notes on RTP in [this](https://azure.microsoft.com/blog/2015/04/13/an-introduction-to-live-encoding-with-azure-media-services/) blog.</span></span>
* <span data-ttu-id="adc50-559">Изображения баннера должны соответствовать ограничениям, описанным [здесь](media-services-manage-live-encoder-enabled-channels.md#default_slate).</span><span class="sxs-lookup"><span data-stu-id="adc50-559">Slate images should conform to restrictions described [here](media-services-manage-live-encoder-enabled-channels.md#default_slate).</span></span> <span data-ttu-id="adc50-560">При попытке создать канал с листом по умолчанию, разрешение которого больше 1920 x 1080, запрос в конечном итоге завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="adc50-560">If you attempt create a Channel with a default slate that is larger than 1920x1080, the request will eventually error out.</span></span>
* <span data-ttu-id="adc50-561">И еще раз, не забудьте ОСТАНОВИТЬ ВАШ КАНАЛ после завершения потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="adc50-561">Once again....don't forget to STOP YOUR CHANNELS when you are done streaming.</span></span> <span data-ttu-id="adc50-562">Если этого не сделать, плата продолжит начисляться.</span><span class="sxs-lookup"><span data-stu-id="adc50-562">If you don't, billing will continue.</span></span>

## <a name="next-step"></a><span data-ttu-id="adc50-563">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="adc50-563">Next step</span></span>
<span data-ttu-id="adc50-564">Просмотрите схемы обучения работе со службами мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="adc50-564">Review Media Services learning paths.</span></span>

[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="adc50-565">Отзывы</span><span class="sxs-lookup"><span data-stu-id="adc50-565">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="related-topics"></a><span data-ttu-id="adc50-566">Связанные разделы</span><span class="sxs-lookup"><span data-stu-id="adc50-566">Related topics</span></span>
[<span data-ttu-id="adc50-567">Трансляция мероприятий путем динамической потоковой передачи с помощью служб мультимедиа Azure</span><span class="sxs-lookup"><span data-stu-id="adc50-567">Delivering Live Streaming Events with Azure Media Services</span></span>](media-services-overview.md)

[<span data-ttu-id="adc50-568">Потоковая трансляция с использованием служб мультимедиа Azure для создания потоков с несколькими скоростями на портале Azure</span><span class="sxs-lookup"><span data-stu-id="adc50-568">Create channels that perform live encoding from a singe bitrate to adaptive bitrate stream with Portal</span></span>](media-services-portal-creating-live-encoder-enabled-channel.md)

[<span data-ttu-id="adc50-569">Потоковая трансляция с использованием служб мультимедиа Azure для создания потоков с разными скоростями с помощью .NET</span><span class="sxs-lookup"><span data-stu-id="adc50-569">Create channels that perform live encoding from a singe bitrate to adaptive bitrate stream with .NET SDK</span></span>](media-services-dotnet-creating-live-encoder-enabled-channel.md)

[<span data-ttu-id="adc50-570">Channel</span><span class="sxs-lookup"><span data-stu-id="adc50-570">Manage channels with REST API</span></span>](https://docs.microsoft.com/rest/api/media/operations/channel)
 
[<span data-ttu-id="adc50-571">Основные понятия служб мультимедиа</span><span class="sxs-lookup"><span data-stu-id="adc50-571">Media Services Concepts</span></span>](media-services-concepts.md)

[<span data-ttu-id="adc50-572">Спецификация приема фрагментированного MP4 в реальном времени в службах мультимедиа Azure</span><span class="sxs-lookup"><span data-stu-id="adc50-572">Azure Media Services Fragmented MP4 Live Ingest Specification</span></span>](media-services-fmp4-live-ingest-overview.md)

[live-overview]: ./media/media-services-manage-live-encoder-enabled-channels/media-services-live-streaming-new.png

