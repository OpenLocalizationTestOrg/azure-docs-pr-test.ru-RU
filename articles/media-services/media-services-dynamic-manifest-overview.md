---
title: "aaaFilters и динамические манифесты | Документы Microsoft"
description: "Описывается, как фильтры toocreate, поэтому клиент может их использовать toostream определенных разделов потока. Службы мультимедиа создает динамические манифесты tooarchive Выборочный streaming."
services: media-services
documentationcenter: 
author: cenkdin
manager: cfowler
editor: 
ms.assetid: ff102765-8cee-4c08-a6da-b603db9e2054
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 06/29/2017
ms.author: cenkd;juliako
ms.openlocfilehash: 9527a011438c11da07a363d701ea736414412ecf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="filters-and-dynamic-manifests"></a><span data-ttu-id="86d68-104">Фильтры и динамические манифесты</span><span class="sxs-lookup"><span data-stu-id="86d68-104">Filters and dynamic manifests</span></span>
<span data-ttu-id="86d68-105">Начиная с выпуска 2.11, службы мультимедиа позволяют фильтры toodefine средств.</span><span class="sxs-lookup"><span data-stu-id="86d68-105">Starting with 2.11 release, Media Services enables you toodefine filters for your assets.</span></span> <span data-ttu-id="86d68-106">Эти фильтры являются правила стороне сервера, позволяющие клиентам toochoose toodo таких вещей, как: воспроизведения только части видео (вместо воспроизведение hello всего видео), или укажите только набор представлений аудио и видео обработки (устройства клиента вместо всех hello представлений, которые связаны с активом hello).</span><span class="sxs-lookup"><span data-stu-id="86d68-106">These filters are server side rules that will allow your customers toochoose toodo things like: playback only a section of a video (instead of playing hello whole video), or specify only a subset of audio and video renditions that your customer's device can handle (instead of all hello renditions that are associated with hello asset).</span></span> <span data-ttu-id="86d68-107">Такая фильтрация средств архивируется через **динамического манифеста**, созданных после toostream запрос клиента видео на основе указанного фильтров.</span><span class="sxs-lookup"><span data-stu-id="86d68-107">This filtering of your assets is archived through **Dynamic Manifest**s that are created upon your customer's request toostream a video based on specified filter(s).</span></span>

<span data-ttu-id="86d68-108">Приведенные здесь статьи рассматриваются распространенные сценарии, в котором с помощью фильтров будет очень полезными tooyour клиентов и ссылки tootopics, показывающими, как программным образом фильтрует toocreate (в настоящее время можно создать фильтры с API REST только).</span><span class="sxs-lookup"><span data-stu-id="86d68-108">This topics discusses common scenarios in which using filters would be very beneficial tooyour customers and links tootopics that demonstrate how toocreate filters programmatically (currently, you can create filters with REST APIs only).</span></span>

## <a name="overview"></a><span data-ttu-id="86d68-109">Обзор</span><span class="sxs-lookup"><span data-stu-id="86d68-109">Overview</span></span>
<span data-ttu-id="86d68-110">При доставке поставленной вашего содержимого toocustomers (потоковой передачи событий в реальном времени или видео по запросу) является toodeliver к устройствам высокое качество видео toovarious условиях другую сеть.</span><span class="sxs-lookup"><span data-stu-id="86d68-110">When delivering your content toocustomers (streaming live events or video-on-demand) your goal is toodeliver a high quality video toovarious devices under different network conditions.</span></span> <span data-ttu-id="86d68-111">Эта цель hello следующие tooachieve:</span><span class="sxs-lookup"><span data-stu-id="86d68-111">tooachieve this goal do hello following:</span></span>

* <span data-ttu-id="86d68-112">поток toomulti-bitrate кодирования ([с адаптивной скоростью](http://en.wikipedia.org/wiki/Adaptive_bitrate_streaming)) видеопоток (это берет на себя условия качества и сети) и</span><span class="sxs-lookup"><span data-stu-id="86d68-112">encode your stream toomulti-bitrate ([adaptive bitrate](http://en.wikipedia.org/wiki/Adaptive_bitrate_streaming)) video stream (this will take care of quality and network conditions) and</span></span> 
* <span data-ttu-id="86d68-113">Использование служб мультимедиа [динамической упаковки](media-services-dynamic-packaging-overview.md) toodynamically повторно упаковать потока в различных протоколов (это берет на себя потоковой передачи на разных устройствах).</span><span class="sxs-lookup"><span data-stu-id="86d68-113">use Media Services [Dynamic Packaging](media-services-dynamic-packaging-overview.md) toodynamically re-package your stream into different protocols (this will take care of streaming on different devices).</span></span> <span data-ttu-id="86d68-114">Службы мультимедиа поддерживают доставку hello следующие технологии потоковой передачи с адаптивной скоростью: HTTP Live Streaming (HLS), Smooth Streaming и MPEG DASH.</span><span class="sxs-lookup"><span data-stu-id="86d68-114">Media Services supports delivery of hello following adaptive bitrate streaming technologies: HTTP Live Streaming (HLS), Smooth Streaming, and MPEG DASH.</span></span> 

### <a name="manifest-files"></a><span data-ttu-id="86d68-115">Файлы манифестов</span><span class="sxs-lookup"><span data-stu-id="86d68-115">Manifest files</span></span>
<span data-ttu-id="86d68-116">При кодировании актива для потоковой передачи с адаптивной скоростью **манифеста** (воспроизведения) создается (файл hello текста или XML).</span><span class="sxs-lookup"><span data-stu-id="86d68-116">When you encode an asset for adaptive bitrate streaming, a **manifest** (playlist) file is created (hello file is text-based or XML-based).</span></span> <span data-ttu-id="86d68-117">Hello **манифеста** файл, содержащий, например потоковой передачи метаданных: отслеживайте тип (аудио, видео или текст), отслеживать имя, время начала и окончания, скоростью (качества), отслеживания языков, окно презентации (скользящее окно фиксированной длительности), видео кодек (FourCC).</span><span class="sxs-lookup"><span data-stu-id="86d68-117">hello **manifest** file includes streaming metadata such as: track type (audio, video, or text), track name, start and end time, bitrate (qualities), track languages, presentation window (sliding window of fixed duration), video codec (FourCC).</span></span> <span data-ttu-id="86d68-118">Оно также указывает следующий фрагмент tooretrieve проигрывателя hello hello, предоставляя информацию о hello Далее пригодный для воспроизведения видео фрагменты доступны и их расположение.</span><span class="sxs-lookup"><span data-stu-id="86d68-118">It also instructs hello player tooretrieve hello next fragment by providing information about hello next playable video fragments available and their location.</span></span> <span data-ttu-id="86d68-119">Фрагментов (или сегменты) представляют собой hello фактическое «хранилища» видео-контента.</span><span class="sxs-lookup"><span data-stu-id="86d68-119">Fragments (or segments) are hello actual “chunks” of a video content.</span></span>

<span data-ttu-id="86d68-120">Ниже приведен пример файла манифеста:</span><span class="sxs-lookup"><span data-stu-id="86d68-120">Here is an example of a manifest file:</span></span> 

    <?xml version="1.0" encoding="UTF-8"?>    
    <SmoothStreamingMedia MajorVersion="2" MinorVersion="0" Duration="330187755" TimeScale="10000000">

    <StreamIndex Chunks="17" Type="video" Url="QualityLevels({bitrate})/Fragments(video={start time})" QualityLevels="8">
    <QualityLevel Index="0" Bitrate="5860941" FourCC="H264" MaxWidth="1920" MaxHeight="1080" CodecPrivateData="0000000167640028AC2CA501E0089F97015202020280000003008000001931300016E360000E4E1FF8C7076850A4580000000168E9093525" />
    <QualityLevel Index="1" Bitrate="4602724" FourCC="H264" MaxWidth="1920" MaxHeight="1080" CodecPrivateData="0000000167640028AC2CA501E0089F97015202020280000003008000001931100011EDC00002CD29FF8C7076850A45800000000168E9093525" />
    <QualityLevel Index="2" Bitrate="3319311" FourCC="H264" MaxWidth="1280" MaxHeight="720" CodecPrivateData="000000016764001FAC2CA5014016EC054808080A00000300020000030064C0800067C28000103667F8C7076850A4580000000168E9093525" />
    <QualityLevel Index="3" Bitrate="2195119" FourCC="H264" MaxWidth="960" MaxHeight="540" CodecPrivateData="000000016764001FAC2CA503C045FBC054808080A000000300200000064C1000044AA0000ABA9FE31C1DA14291600000000168E9093525" />
    <QualityLevel Index="4" Bitrate="1469881" FourCC="H264" MaxWidth="960" MaxHeight="540" CodecPrivateData="000000016764001FAC2CA503C045FBC054808080A000000300200000064C04000B71A0000E4E1FF8C7076850A4580000000168E9093525" />
    <QualityLevel Index="5" Bitrate="978815" FourCC="H264" MaxWidth="640" MaxHeight="360" CodecPrivateData="000000016764001EAC2CA50280BFE5C0548303032000000300200000064C08001E8480004C4B7F8C7076850A45800000000168E9093525" />
    <QualityLevel Index="6" Bitrate="638374" FourCC="H264" MaxWidth="640" MaxHeight="360" CodecPrivateData="000000016764001EAC2CA50280BFE5C0548303032000000300200000064C080013D60000C65DFE31C1DA1429160000000168E9093525" />
    <QualityLevel Index="7" Bitrate="388851" FourCC="H264" MaxWidth="320" MaxHeight="180" CodecPrivateData="000000016764000DAC2CA505067E7C054830303200000300020000030064C040030D40003D093F8C7076850A45800000000168E9093525" />

    <c t="0" d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="20000000" /><c d="9600000"/>
    </StreamIndex>


    <StreamIndex Chunks="17" Type="audio" Url="QualityLevels({bitrate})/Fragments(AAC_und_ch2_128kbps={start time})" QualityLevels="1" Name="AAC_und_ch2_128kbps">
    <QualityLevel AudioTag="255" Index="0" BitsPerSample="16" Bitrate="125658" FourCC="AACL" CodecPrivateData="1210" Channels="2" PacketSize="4" SamplingRate="44100" />

    <c t="0" d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="6965987" /></StreamIndex>


    <StreamIndex Chunks="17" Type="audio" Url="QualityLevels({bitrate})/Fragments(AAC_und_ch2_56kbps={start time})" QualityLevels="1" Name="AAC_und_ch2_56kbps">
    <QualityLevel AudioTag="255" Index="0" BitsPerSample="16" Bitrate="53655" FourCC="AACL" CodecPrivateData="1210" Channels="2" PacketSize="4" SamplingRate="44100" />

    <c t="0" d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201361" /><c d="20201360" /><c d="20201361" /><c d="20201360" /><c d="6965987" /></StreamIndex>

    </SmoothStreamingMedia>

### <a name="dynamic-manifests"></a><span data-ttu-id="86d68-121">Динамические манифесты</span><span class="sxs-lookup"><span data-stu-id="86d68-121">Dynamic manifests</span></span>
<span data-ttu-id="86d68-122">Существуют [сценариев](media-services-dynamic-manifest-overview.md#scenarios) клиентом, когда потребуется большую гибкость, чем описанных в файле манифеста ресурса по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-122">There are [scenarios](media-services-dynamic-manifest-overview.md#scenarios) when your client needs more flexibility than what's described in hello default asset's manifest file.</span></span> <span data-ttu-id="86d68-123">Например:</span><span class="sxs-lookup"><span data-stu-id="86d68-123">For example:</span></span>

* <span data-ttu-id="86d68-124">Устройства определенного: доставки hello указано представлений и (или) указан только отслеживает языков, поддерживаемых hello устройства, используемые tooplayback hello фильтрацию («представления»).</span><span class="sxs-lookup"><span data-stu-id="86d68-124">Device specific: deliver only hello specified renditions and\or specified language tracks that are supported by hello device that is used tooplayback hello content ("rendition filtering").</span></span> 
* <span data-ttu-id="86d68-125">Уменьшите hello манифеста tooshow суб-клип динамической события («суб-клип фильтрация»).</span><span class="sxs-lookup"><span data-stu-id="86d68-125">Reduce hello manifest tooshow a sub-clip of a live event ("sub-clip filtering").</span></span>
* <span data-ttu-id="86d68-126">Начало Trim hello видео («обрезки видео»).</span><span class="sxs-lookup"><span data-stu-id="86d68-126">Trim hello start of a video ("trimming a video").</span></span>
* <span data-ttu-id="86d68-127">Настройка окна представления (DVR) в порядке tooprovide ограниченной длины окна DVR hello в проигрывателе hello («Настройка презентации окно»).</span><span class="sxs-lookup"><span data-stu-id="86d68-127">Adjust Presentation Window (DVR) in order tooprovide a limited length of hello DVR window in hello player ("adjusting presentation window") .</span></span>

<span data-ttu-id="86d68-128">tooachieve этот гибкость, Media Services имеют **динамического манифесты** зависимости на предварительно определенные [фильтры](media-services-dynamic-manifest-overview.md#filters).</span><span class="sxs-lookup"><span data-stu-id="86d68-128">tooachieve this flexibility, Media Services offers **Dynamic Manifests** based on pre-defined [filters](media-services-dynamic-manifest-overview.md#filters).</span></span>  <span data-ttu-id="86d68-129">После определения фильтров hello клиентам использовать их toostream другое представление или суб-клипы видео.</span><span class="sxs-lookup"><span data-stu-id="86d68-129">Once you define hello filters, your clients could use them toostream a specific rendition or sub-clips of your video.</span></span> <span data-ttu-id="86d68-130">Их следует указать фильтры в URL-адрес потоковой передачи hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-130">They would specify filter(s) in hello streaming URL.</span></span> <span data-ttu-id="86d68-131">Фильтры могут быть потоковой передачи протоколы, поддерживаемые скоростью примененных tooadaptive [динамической упаковки](media-services-dynamic-packaging-overview.md): HLS, MPEG-DASH и Smooth Streaming.</span><span class="sxs-lookup"><span data-stu-id="86d68-131">Filters could be applied tooadaptive bitrate streaming protocols supported by [Dynamic Packaging](media-services-dynamic-packaging-overview.md): HLS, MPEG-DASH, and Smooth Streaming.</span></span> <span data-ttu-id="86d68-132">Например:</span><span class="sxs-lookup"><span data-stu-id="86d68-132">For example:</span></span>

<span data-ttu-id="86d68-133">URL-адрес MPEG DASH с фильтром</span><span class="sxs-lookup"><span data-stu-id="86d68-133">MPEG DASH URL with filter</span></span>

    http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(format=mpd-time-csf,filter=MyLocalFilter)

<span data-ttu-id="86d68-134">URL-адрес Smooth Streaming с фильтром</span><span class="sxs-lookup"><span data-stu-id="86d68-134">Smooth Streaming URL with filter</span></span>

    http://testendpoint-testaccount.streaming.mediaservices.windows.net/fecebb23-46f6-490d-8b70-203e86b0df58/BigBuckBunny.ism/Manifest(filter=MyLocalFilter)


<span data-ttu-id="86d68-135">Дополнительные сведения о том, как toodeliver содержимого и построения потоковой передачи в URL-адреса, в разделе [доставки содержимого Обзор](media-services-deliver-content-overview.md).</span><span class="sxs-lookup"><span data-stu-id="86d68-135">For more information about how toodeliver your content and build streaming URLs, see [Delivering content overview](media-services-deliver-content-overview.md).</span></span>

> [!NOTE]
> <span data-ttu-id="86d68-136">Обратите внимание, что динамические манифесты не изменяйте активов hello и hello манифест по умолчанию для этого ресурса.</span><span class="sxs-lookup"><span data-stu-id="86d68-136">Note that Dynamic Manifests do not change hello asset and hello default manifest for that asset.</span></span> <span data-ttu-id="86d68-137">Ваш клиент можно выбрать toorequest потока с или без них.</span><span class="sxs-lookup"><span data-stu-id="86d68-137">Your client can choose toorequest a stream with or without filters.</span></span> 
> 
> 

### <span data-ttu-id="86d68-138"><a id="filters"></a>Фильтры</span><span class="sxs-lookup"><span data-stu-id="86d68-138"><a id="filters"></a>Filters</span></span>
<span data-ttu-id="86d68-139">Существуют два типа фильтров активов.</span><span class="sxs-lookup"><span data-stu-id="86d68-139">There are two types of asset filters:</span></span> 

* <span data-ttu-id="86d68-140">Глобальные фильтры (можно быть применен tooany средства в hello учетная запись служб мультимедиа Azure, время существования hello учетной записи) и</span><span class="sxs-lookup"><span data-stu-id="86d68-140">Global filters (can be applied tooany asset in hello Azure Media Services account, have a lifetime of hello account) and</span></span> 
* <span data-ttu-id="86d68-141">Локальных фильтров (можно только примененные tooan активов, с какой hello фильтра была связана после их создания, время существования средства hello).</span><span class="sxs-lookup"><span data-stu-id="86d68-141">Local filters (can only be applied tooan asset with which hello filter was associated upon creation, have a lifetime of hello asset).</span></span> 

<span data-ttu-id="86d68-142">Типы фильтров глобальная и локальная, гарантия в точности hello и те же свойства.</span><span class="sxs-lookup"><span data-stu-id="86d68-142">Global and local filter types have exactly hello same properties.</span></span> <span data-ttu-id="86d68-143">Hello основное различие между двумя hello является для сценариев, какой тип фильтр более подходящим.</span><span class="sxs-lookup"><span data-stu-id="86d68-143">hello main difference between hello two is for which scenarios what type of a filer is more suitable.</span></span> <span data-ttu-id="86d68-144">Глобальные фильтры обычно подходят для профилей устройств (Фильтрация представления) где локальных фильтров может быть используется tootrim определенного актива.</span><span class="sxs-lookup"><span data-stu-id="86d68-144">Global filters are generally suitable for device profiles (rendition filtering) where local filters could be used tootrim a specific asset.</span></span>

## <span data-ttu-id="86d68-145"><a id="scenarios"></a>Распространенные сценарии</span><span class="sxs-lookup"><span data-stu-id="86d68-145"><a id="scenarios"></a>Common scenarios</span></span>
<span data-ttu-id="86d68-146">Как упоминалось ранее, при доставки вашего содержимого toocustomers (потоковой передачи событий в реальном времени или видео по запросу) ваша цель — toodeliver высокое качество видео toovarious устройства в другой сети условия.</span><span class="sxs-lookup"><span data-stu-id="86d68-146">As was mentioned before, when delivering your content toocustomers (streaming live events or video-on-demand) your goal is toodeliver a high quality video toovarious devices under different network conditions.</span></span> <span data-ttu-id="86d68-147">Кроме этого, возможны и другие требования, задействующие фильтрацию активов и использование **динамических манифестов**.</span><span class="sxs-lookup"><span data-stu-id="86d68-147">In addition, your might have other requirements that involve filtering your assets and using of **Dynamic Manifest**s.</span></span> <span data-ttu-id="86d68-148">Привет, в следующих разделах дать краткий обзор различных сценариев фильтрации.</span><span class="sxs-lookup"><span data-stu-id="86d68-148">hello following sections give a short overview of different filtering scenarios.</span></span>

* <span data-ttu-id="86d68-149">Укажите только набор представлений аудио и видео, которые может обрабатывать определенные устройства (а не всех hello представлений, связанные с активом hello).</span><span class="sxs-lookup"><span data-stu-id="86d68-149">Specify only a subset of audio and video renditions that certain devices can handle (instead of all hello renditions that are associated with hello asset).</span></span> 
* <span data-ttu-id="86d68-150">Воспроизведение только часть видео (а не выполняет hello всего видео).</span><span class="sxs-lookup"><span data-stu-id="86d68-150">Playing back only a section of a video (instead of playing hello whole video).</span></span>
* <span data-ttu-id="86d68-151">Настройка окна представления DVR.</span><span class="sxs-lookup"><span data-stu-id="86d68-151">Adjust DVR presentation window.</span></span>

## <a name="rendition-filtering"></a><span data-ttu-id="86d68-152">Фильтрация представлений</span><span class="sxs-lookup"><span data-stu-id="86d68-152">Rendition filtering</span></span>
<span data-ttu-id="86d68-153">Вы можете tooencode активов toomultiple кодирования профили (H.264 базовый, высокий уровень H.264, AACL, AACH, Dolby Digital Plus) и несколько битрейтов качества.</span><span class="sxs-lookup"><span data-stu-id="86d68-153">You may choose tooencode your asset toomultiple encoding profiles (H.264 Baseline, H.264 High, AACL, AACH, Dolby Digital Plus) and multiple quality bitrates.</span></span> <span data-ttu-id="86d68-154">Однако не все клиентские устройства будут поддерживать все профили и скорости потока вашего актива.</span><span class="sxs-lookup"><span data-stu-id="86d68-154">However, not all client devices will support all your asset's profiles and bitrates.</span></span> <span data-ttu-id="86d68-155">Например, старые устройства Android поддерживают только H.264 Baseline+AACL.</span><span class="sxs-lookup"><span data-stu-id="86d68-155">For example, older Android devices only supports H.264 Baseline+AACL.</span></span> <span data-ttu-id="86d68-156">Отправка выше устройство tooa битрейтов, который не удается получить преимущества hello, много вычисления пропускной способности и устройства.</span><span class="sxs-lookup"><span data-stu-id="86d68-156">Sending higher bitrates tooa device which cannot get hello benefits, wastes bandwidth and device computation.</span></span> <span data-ttu-id="86d68-157">Такие устройства необходимо расшифровать все Здравствуйте, учитывая сведения только tooscale его вниз для отображения.</span><span class="sxs-lookup"><span data-stu-id="86d68-157">Such device must decode all hello given information, only tooscale it down for display.</span></span>

<span data-ttu-id="86d68-158">С динамической манифеста можно создать профили устройств мобильных устройств, например, консоли, HD/SD, т. д. и включать отслеживает hello и качеств, которые следует включить toobe часть каждого профиля.</span><span class="sxs-lookup"><span data-stu-id="86d68-158">With Dynamic Manifest, you can create device profiles such as mobile, console, HD/SD, etc. and include hello tracks and qualities which you want toobe a part of each profile.</span></span>

![Пример фильтрации представлений][renditions2]

<span data-ttu-id="86d68-160">В следующем примере hello кодировщик был tooencode используется для расширения средства в семь представлений видео MP4-файлов ISO (от too1080p 180p).</span><span class="sxs-lookup"><span data-stu-id="86d68-160">In hello following example, an encoder was used tooencode a mezzanine asset into seven ISO MP4s video renditions (from 180p too1080p).</span></span> <span data-ttu-id="86d68-161">Hello кодированный актив могут быть динамически упакованы в любой из hello следующие протоколы потоковых: HLS, Smooth и MPEG DASH.</span><span class="sxs-lookup"><span data-stu-id="86d68-161">hello encoded asset can be dynamically packaged into any of hello following streaming protocols: HLS, Smooth, and MPEG DASH.</span></span>  <span data-ttu-id="86d68-162">Вверху hello hello диаграммы отображается hello HLS манифеста для ресурса hello без фильтров (содержит все семь представлений).</span><span class="sxs-lookup"><span data-stu-id="86d68-162">At hello top of hello diagram, hello HLS manifest for hello asset with no filters is shown (it contains all seven renditions).</span></span>  <span data-ttu-id="86d68-163">В нижнем левом углу hello hello HLS манифеста toowhich, который был применен фильтр с именем «ott» отображается.</span><span class="sxs-lookup"><span data-stu-id="86d68-163">In hello bottom left, hello HLS manifest toowhich a filter named "ott" was applied is shown.</span></span> <span data-ttu-id="86d68-164">Фильтр «ott» Hello указывает tooremove все битрейтах ниже 1 Мбит/с, что привело к hello нижней два уровня качества отброшены в ответ hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-164">hello "ott" filter specifies tooremove all bitrates below 1Mbps, which resulted in hello bottom two quality levels being stripped off in hello response.</span></span>  <span data-ttu-id="86d68-165">Hello нижнем правом углу, hello HLS показан toowhich манифеста, который был применен фильтр с именем «мобильных устройств».</span><span class="sxs-lookup"><span data-stu-id="86d68-165">In hello bottom right,   hello HLS manifest toowhich a filter named "mobile" was applied is shown.</span></span> <span data-ttu-id="86d68-166">Фильтр «мобильных устройств» Hello указывает tooremove представлений, где hello разрешение больше, чем 720p, что привело к hello отброшены два представления 1080p.</span><span class="sxs-lookup"><span data-stu-id="86d68-166">hello "mobile" filter specifies tooremove renditions where hello resolution is larger than 720p, which resulted in hello two 1080p renditions being stripped off.</span></span>

![Фильтрация представлений][renditions1]

## <a name="removing-language-tracks"></a><span data-ttu-id="86d68-168">Удаление языковых дорожек</span><span class="sxs-lookup"><span data-stu-id="86d68-168">Removing language tracks</span></span>
<span data-ttu-id="86d68-169">Активы могут содержать аудиодорожки на нескольких языках, например английском, испанском, французском и т. д. Обычно диспетчеры hello этого ПАКЕТА по умолчанию выбор звуковой дорожки и отслеживает доступные звука на выбор пользователя.</span><span class="sxs-lookup"><span data-stu-id="86d68-169">Your assets might include multiple audio languages such as English, Spanish, French, etc. Usually, hello Player SDK managers default audio track selection and available audio tracks per user selection.</span></span> <span data-ttu-id="86d68-170">Он является довольно сложной toodevelop такие пакеты SDK проигрывателя, необходимо различных реализаций через платформы проигрывателя конкретного устройства.</span><span class="sxs-lookup"><span data-stu-id="86d68-170">It is challenging toodevelop such Player SDKs, it requires different implementations across device-specific player-frameworks.</span></span> <span data-ttu-id="86d68-171">Кроме того на некоторых платформах API проигрывателя ограничены и не включают функции аудио выбора, где пользователи не могут выбрать или изменить звуковой дорожки по умолчанию hello. С помощью фильтров активов можно управлять поведением hello с помощью фильтров, включать только нужные языки аудио.</span><span class="sxs-lookup"><span data-stu-id="86d68-171">Also, on some platforms, Player APIs are limited and do not include audio selection feature where users cannot select or change hello default audio track. With asset filters, you can control hello behavior by creating filters that only include desired audio languages.</span></span>

![Фильтрация языковых дорожек][language_filter]

## <a name="trimming-start-of-an-asset"></a><span data-ttu-id="86d68-173">Обрезка начала актива</span><span class="sxs-lookup"><span data-stu-id="86d68-173">Trimming start of an asset</span></span>
<span data-ttu-id="86d68-174">В большинстве динамической потоковой передачи событий операторы выполнять некоторые тесты до фактического события hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-174">In most live streaming events, operators run some tests before hello actual event.</span></span> <span data-ttu-id="86d68-175">Например, они могут включать Сланец следующим образом, перед запуском hello hello события: «Программа начнет свою работу незамедлительно».</span><span class="sxs-lookup"><span data-stu-id="86d68-175">For example, they might include a slate like this before hello start of hello event: "Program will begin momentarily".</span></span> <span data-ttu-id="86d68-176">Если программа hello архивирования, hello тестирования и содержания данных также архивируются и будут включены в презентации hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-176">If hello program is archiving, hello test and slate data are also archived and will be included in hello presentation.</span></span> <span data-ttu-id="86d68-177">Тем не менее эти сведения не должен отображаться toohello клиентов.</span><span class="sxs-lookup"><span data-stu-id="86d68-177">However, this information should not be shown toohello clients.</span></span> <span data-ttu-id="86d68-178">С помощью динамического манифеста можно создать фильтр времени начала и удалить hello нежелательных данных из манифеста hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-178">With Dynamic Manifest, you can create a start time filter and remove hello unwanted data from hello manifest.</span></span>

![Начало обрезки][trim_filter]

## <a name="creating-sub-clips-views-from-a-live-archive"></a><span data-ttu-id="86d68-180">Создание субклипов (представлений) из текущего архива</span><span class="sxs-lookup"><span data-stu-id="86d68-180">Creating sub-clips (views) from a live archive</span></span>
<span data-ttu-id="86d68-181">Многие текущие события являются длительными, и их текущий архив может включать в себя несколько событий.</span><span class="sxs-lookup"><span data-stu-id="86d68-181">Many live events are long running and live archive might include multiple events.</span></span> <span data-ttu-id="86d68-182">После hello интерактивного события окончания источников может потребоваться toobreak копирование hello live архива в логической программы для запуска и остановки последовательности.</span><span class="sxs-lookup"><span data-stu-id="86d68-182">After hello live event ends broadcasters may want toobreak up hello live archive into logical program start and stop sequences.</span></span> <span data-ttu-id="86d68-183">Затем опубликуйте эти виртуальные программы отдельно без post обработки динамического архива hello и не создавая отдельные активы (которые не будут пользоваться преимуществами существующих кэшированные фрагменты hello в hello CDN).</span><span class="sxs-lookup"><span data-stu-id="86d68-183">Then, publish these virtual programs separately without post processing hello live archive and not creating separate assets (which will not get benefit of hello existing cached fragments in hello CDNs).</span></span> <span data-ttu-id="86d68-184">Примерами таких виртуальных программ (суб-клипы): hello кварталы футбольной или Баскетбольная игры, иннингов hello в бейсбольные или отдельные события f # программы Олимпийские игры.</span><span class="sxs-lookup"><span data-stu-id="86d68-184">Examples of such virtual programs (sub-clips) are hello quarters of a football or basketball game, hello innings in baseball, or individual events of an afternoon of Olympics program.</span></span>

<span data-ttu-id="86d68-185">С помощью динамического манифеста можно создавать фильтры, с помощью времени начала и окончания и создавать виртуального представления поверх hello динамического архива.</span><span class="sxs-lookup"><span data-stu-id="86d68-185">With Dynamic Manifest, you can create filters using start/end times and create virtual views over hello top of your live archive.</span></span> 

![Фильтр субклипа][subclip_filter]

<span data-ttu-id="86d68-187">Фильтрованный архив:</span><span class="sxs-lookup"><span data-stu-id="86d68-187">Filtered Asset:</span></span>

![Лыжный спорт][skiing]

## <a name="adjusting-presentation-window-dvr"></a><span data-ttu-id="86d68-189">Настройка окна презентации (DVR)</span><span class="sxs-lookup"><span data-stu-id="86d68-189">Adjusting Presentation Window (DVR)</span></span>
<span data-ttu-id="86d68-190">В настоящее время службы мультимедиа Azure предлагает циклические архива, где можно настроить длительность hello от 5 минут — 25 часов.</span><span class="sxs-lookup"><span data-stu-id="86d68-190">Currently, Azure Media Services offers circular archive where hello duration can be configured between 5 minutes - 25 hours.</span></span> <span data-ttu-id="86d68-191">Манифеста можно использовать фильтрацию используется toocreate скользящего окна DVR поверх hello архива hello, не удаляя носителя.</span><span class="sxs-lookup"><span data-stu-id="86d68-191">Manifest filtering can be used toocreate a rolling DVR window over hello top of hello archive, without deleting media.</span></span> <span data-ttu-id="86d68-192">Существует множество сценариев, где источников добавить tooprovide ограниченный окна DVR, который перемещается вместе с hello live границы и на hello то же время сохранить увеличить архивирования окно.</span><span class="sxs-lookup"><span data-stu-id="86d68-192">There are many scenarios where broadcasters want tooprovide a limited DVR window which moves with hello live edge and at hello same time keep a bigger archiving window.</span></span> <span data-ttu-id="86d68-193">Вещателем может потребоваться данных toouse hello, выходящее за пределы окна toohighlight hello DVR клипы или he\she может потребоваться tooprovide различные окна DVR для различных устройств.</span><span class="sxs-lookup"><span data-stu-id="86d68-193">A broadcaster may want toouse hello data that is out of hello DVR window toohighlight clips, or he\she may want tooprovide different DVR windows for different devices.</span></span> <span data-ttu-id="86d68-194">Например большинство hello мобильных устройств не обрабатывают большие windows DVR (для настольных клиентов могут иметь окна DVR 2 минуты для мобильных устройств и 1 час).</span><span class="sxs-lookup"><span data-stu-id="86d68-194">For example, most of hello mobile devices don’t handle big DVR windows (you can have a 2 minute DVR window for mobile devices and 1 hour for desktop clients).</span></span>

![Окно DVR][dvr_filter]

## <a name="adjusting-livebackoff-live-position"></a><span data-ttu-id="86d68-196">Настройка LiveBackoff (динамической позиции)</span><span class="sxs-lookup"><span data-stu-id="86d68-196">Adjusting LiveBackoff (live position)</span></span>
<span data-ttu-id="86d68-197">Манифеста можно использовать фильтрацию tooremove используется несколько секунд от края динамической hello динамической программы.</span><span class="sxs-lookup"><span data-stu-id="86d68-197">Manifest filtering can be used tooremove several seconds from hello live edge of a live program.</span></span> <span data-ttu-id="86d68-198">Это позволяет источников toowatch hello презентации на предварительный просмотр публикации hello точки и создать объявление точки вставки, прежде чем средств просмотра hello получить поток hello (обычно резервные выключение до 30 секунд).</span><span class="sxs-lookup"><span data-stu-id="86d68-198">This allows broadcasters toowatch hello presentation on hello preview publication point and create advertisement insertion points before hello viewers receive hello stream (usually backed-off by 30 seconds).</span></span> <span data-ttu-id="86d68-199">Источников можно передать эти объявления tootheir клиентских платформ времени для них сведения hello tooreceived и процесс перед возможности объявления hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-199">Broadcasters can then push these advertisements tootheir client frameworks in time for them tooreceived and process hello information before hello advertisement opportunity.</span></span>

<span data-ttu-id="86d68-200">Кроме поддержки toohello объявления, LiveBackoff можно использовать для корректировки положение динамической загрузки клиента так, чтобы когда клиенты смещения и попадания динамической edge hello они могут по-прежнему получить фрагментов сервера, а не происходят ошибки HTTP 404 или 412.</span><span class="sxs-lookup"><span data-stu-id="86d68-200">In addition toohello advertisement support, LiveBackoff can be used for adjusting client live download position so that when clients drift and hit hello live edge they can still get fragments from server instead of getting 404 or 412 HTTP errors.</span></span>

![livebackoff_filter][livebackoff_filter]

## <a name="combining-multiple-rules-in-a-single-filter"></a><span data-ttu-id="86d68-202">Объединение нескольких правил в одном фильтре</span><span class="sxs-lookup"><span data-stu-id="86d68-202">Combining multiple rules in a single filter</span></span>
<span data-ttu-id="86d68-203">В одном фильтре можно объединить несколько правил фильтрации.</span><span class="sxs-lookup"><span data-stu-id="86d68-203">You can combine multiple filtering rules in a single filter.</span></span> <span data-ttu-id="86d68-204">В качестве примера можно определить правило для диапазона tooremove материала из динамического архива и фильтровать доступные битрейтов.</span><span class="sxs-lookup"><span data-stu-id="86d68-204">As an example you can define a range rule tooremove slate from a live archive and also filter available bitrates.</span></span> <span data-ttu-id="86d68-205">Для нескольких фильтрации end hello правила результат — hello комбинацию (пересечение) из этих правил.</span><span class="sxs-lookup"><span data-stu-id="86d68-205">For multiple filtering rules hello end result is hello composition (intersection only) of these rules.</span></span>

![multiple-rules][multiple-rules]

## <a name="create-filters-programmatically"></a><span data-ttu-id="86d68-207">Программное создание фильтров</span><span class="sxs-lookup"><span data-stu-id="86d68-207">Create filters programmatically</span></span>
<span data-ttu-id="86d68-208">Hello разделе обсуждаются сущностей служб мультимедиа, которые являются связанные toofilters.</span><span class="sxs-lookup"><span data-stu-id="86d68-208">hello following topic discusses Media Services entities that are related toofilters.</span></span> <span data-ttu-id="86d68-209">Hello разделе также показано, как tooprogrammatically создать фильтры.</span><span class="sxs-lookup"><span data-stu-id="86d68-209">hello topic also shows how tooprogrammatically create filters.</span></span>  

<span data-ttu-id="86d68-210">[Создание фильтров с помощью интерфейсов REST API](media-services-rest-dynamic-manifest.md).</span><span class="sxs-lookup"><span data-stu-id="86d68-210">[Create filters with REST APIs](media-services-rest-dynamic-manifest.md).</span></span>

## <a name="combining-multiple-filters-filter-composition"></a><span data-ttu-id="86d68-211">Объединение нескольких фильтров (сложение фильтров)</span><span class="sxs-lookup"><span data-stu-id="86d68-211">Combining multiple filters (filter composition)</span></span>
<span data-ttu-id="86d68-212">Кроме того, вы можете объединять несколько фильтров в одном URL-адресе.</span><span class="sxs-lookup"><span data-stu-id="86d68-212">You can also combine multiple filters in a single URL.</span></span> 

<span data-ttu-id="86d68-213">Hello следующем сценарии демонстрируется, которым toocombine фильтры:</span><span class="sxs-lookup"><span data-stu-id="86d68-213">hello following scenario demonstrates why you might want toocombine filters:</span></span>

1. <span data-ttu-id="86d68-214">Требуется toofilter вашей качества видео для мобильных устройств, например Android или iPAD (в качества видео toolimit порядке).</span><span class="sxs-lookup"><span data-stu-id="86d68-214">You need toofilter your video qualities for mobile devices such as Android or iPAD (in order toolimit video qualities).</span></span> <span data-ttu-id="86d68-215">tooremove Здравствуйте нежелательных качеств, необходимо создать как глобальный фильтр, который подходит для профилей устройств.</span><span class="sxs-lookup"><span data-stu-id="86d68-215">tooremove hello unwanted qualities, you would create a global filter which is suitable for device profiles.</span></span> <span data-ttu-id="86d68-216">Как упоминалось выше, глобальные фильтры можно использовать для всех ресурсов в группе hello и те же носители учетная запись службы не все дополнительные связи.</span><span class="sxs-lookup"><span data-stu-id="86d68-216">As mentioned above, global filters can be used for all your assets under hello same media services account without any further association.</span></span> 
2. <span data-ttu-id="86d68-217">Также требуется tootrim hello начала и время актива окончания.</span><span class="sxs-lookup"><span data-stu-id="86d68-217">You also want tootrim hello start and end time of an asset.</span></span> <span data-ttu-id="86d68-218">tooachieve это, вам потребуется создать локальный фильтр и задать начальное и конечное время hello.</span><span class="sxs-lookup"><span data-stu-id="86d68-218">tooachieve this, you would create a local filter and set hello start/end time.</span></span> 
3. <span data-ttu-id="86d68-219">Вы хотите toocombine оба эти фильтры (без сочетания потребовалось бы tooadd качества фильтрации toohello усечения фильтр, который будет трудно использование фильтра).</span><span class="sxs-lookup"><span data-stu-id="86d68-219">You want toocombine both of these filters (without combination you would need tooadd quality filtering toohello trimming filter which will make filter usage difficult).</span></span>

<span data-ttu-id="86d68-220">фильтры toocombine необходимо tooset hello фильтр имен toohello манифеста или список воспроизведения URL-адрес с запятой.</span><span class="sxs-lookup"><span data-stu-id="86d68-220">toocombine filters, you need tooset hello filter names toohello manifest/playlist URL with semicolon delimited.</span></span> <span data-ttu-id="86d68-221">Предположим, что у вас есть фильтр под названием *MyMobileDevice* , фильтрует качества и у вас есть другое свойство с именем *MyStartTime* tooset конкретного времени начала.</span><span class="sxs-lookup"><span data-stu-id="86d68-221">Let’s assume you have a filter named *MyMobileDevice* that filters qualities and you have another named *MyStartTime* tooset a specific start time.</span></span> <span data-ttu-id="86d68-222">Их можно объединить следующим образом:</span><span class="sxs-lookup"><span data-stu-id="86d68-222">You can combine them like this:</span></span>

    http://teststreaming.streaming.mediaservices.windows.net/3d56a4d-b71d-489b-854f-1d67c0596966/64ff1f89-b430-43f8-87dd-56c87b7bd9e2.ism/Manifest(filter=MyMobileDevice;MyStartTime)

<span data-ttu-id="86d68-223">Можно объединять too3 фильтров.</span><span class="sxs-lookup"><span data-stu-id="86d68-223">You can combine up too3 filters.</span></span> 

<span data-ttu-id="86d68-224">Дополнительную информацию см. в [этом](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) блоге.</span><span class="sxs-lookup"><span data-stu-id="86d68-224">For more information see [this](https://azure.microsoft.com/blog/azure-media-services-release-dynamic-manifest-composition-remove-hls-audio-only-track-and-hls-i-frame-track-support/) blog.</span></span>

## <a name="know-issues-and-limitations"></a><span data-ttu-id="86d68-225">Известные проблемы и ограничения</span><span class="sxs-lookup"><span data-stu-id="86d68-225">Know issues and limitations</span></span>
* <span data-ttu-id="86d68-226">Динамический манифест работает в пределах GOP (по ключевым кадрам), поэтому обрезка производится с точностью GOP.</span><span class="sxs-lookup"><span data-stu-id="86d68-226">Dynamic manifest operates in GOP boundaries (Key Frames) hence trimming has GOP accuracy.</span></span> 
* <span data-ttu-id="86d68-227">Одно и то же имя фильтра можно использовать для локальных и глобальных фильтров.</span><span class="sxs-lookup"><span data-stu-id="86d68-227">You can use same filter name for local and global filters.</span></span> <span data-ttu-id="86d68-228">Обратите внимание, что локальный фильтр имеет более высокий приоритет и переопределяет глобальные фильтры.</span><span class="sxs-lookup"><span data-stu-id="86d68-228">Note that local filter have higher precedence and will override global filters.</span></span>
* <span data-ttu-id="86d68-229">При обновлении фильтра может занять too2 минут для потоковой передачи конечной точки toorefresh hello правила.</span><span class="sxs-lookup"><span data-stu-id="86d68-229">If you update a filter, it can take up too2 minutes for streaming endpoint toorefresh hello rules.</span></span> <span data-ttu-id="86d68-230">Если содержимое hello был обработан с помощью некоторых фильтров (и кэширования в прокси-серверы и CDN кэши), обновление этих фильтров можно привести к сбою проигрывателя.</span><span class="sxs-lookup"><span data-stu-id="86d68-230">If hello content was served using some filters (and cached in proxies and CDN caches), updating these filters can result in player failures.</span></span> <span data-ttu-id="86d68-231">Рекомендуется tooclear hello кэша после обновления hello фильтра.</span><span class="sxs-lookup"><span data-stu-id="86d68-231">It is recommend tooclear hello cache after updating hello filter.</span></span> <span data-ttu-id="86d68-232">Если такой вариант невозможен, рассмотрите возможность использования другого фильтра.</span><span class="sxs-lookup"><span data-stu-id="86d68-232">If this option is not possible, consider using a different filter.</span></span>

## <a name="media-services-learning-paths"></a><span data-ttu-id="86d68-233">Схемы обучения работе со службами мультимедиа</span><span class="sxs-lookup"><span data-stu-id="86d68-233">Media Services learning paths</span></span>
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="86d68-234">Отзывы</span><span class="sxs-lookup"><span data-stu-id="86d68-234">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="see-also"></a><span data-ttu-id="86d68-235">См. также</span><span class="sxs-lookup"><span data-stu-id="86d68-235">See Also</span></span>
[<span data-ttu-id="86d68-236">Доставка содержимого tooCustomers Обзор</span><span class="sxs-lookup"><span data-stu-id="86d68-236">Delivering Content tooCustomers Overview</span></span>](media-services-deliver-content-overview.md)

[renditions1]: ./media/media-services-dynamic-manifest-overview/media-services-rendition-filter.png
[renditions2]: ./media/media-services-dynamic-manifest-overview/media-services-rendition-filter2.png

[rendered_subclip]: ./media/media-services-dynamic-manifests/media-services-rendered-subclip.png
[timeline_trim_event]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-event.png
[timeline_trim_subclip]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-subclip.png

[multiple-rules]:./media/media-services-dynamic-manifest-overview/media-services-multiple-rules-filters.png

[subclip_filter]: ./media/media-services-dynamic-manifest-overview/media-services-subclips-filter.png
[trim_event]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-event.png
[trim_subclip]: ./media/media-services-dynamic-manifests/media-services-timeline-trim-subclip.png
[trim_filter]: ./media/media-services-dynamic-manifest-overview/media-services-trim-filter.png
[redered_subclip]: ./media/media-services-dynamic-manifests/media-services-rendered-subclip.png
[livebackoff_filter]: ./media/media-services-dynamic-manifest-overview/media-services-livebackoff-filter.png
[language_filter]: ./media/media-services-dynamic-manifest-overview/media-services-language-filter.png
[dvr_filter]: ./media/media-services-dynamic-manifest-overview/media-services-dvr-filter.png
[skiing]: ./media/media-services-dynamic-manifest-overview/media-services-skiing.png
