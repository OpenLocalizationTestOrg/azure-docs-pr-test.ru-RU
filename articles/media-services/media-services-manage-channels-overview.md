---
title: "Общие сведения о потоковой трансляции с использованием служб мультимедиа Azure | Документация Майкрософт"
description: "В этой статье приводятся общие сведения о потоковой трансляции с использованием служб мультимедиа Azure."
services: media-services
documentationcenter: 
author: Juliako
manager: cfowler
editor: 
ms.assetid: fb63502e-914d-4c1f-853c-4a7831bb08e8
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: ne
ms.topic: article
ms.date: 06/29/2017
ms.author: juliako
ms.openlocfilehash: 6f500f25129470a679c75cae6cd1abc9d71b72a7
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="overview-of-live-streaming-using-azure-media-services"></a><span data-ttu-id="745aa-103">Общие сведения о потоковой трансляции с использованием служб мультимедиа Azure</span><span class="sxs-lookup"><span data-stu-id="745aa-103">Overview of Live Streaming using Azure Media Services</span></span>
## <a name="overview"></a><span data-ttu-id="745aa-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="745aa-104">Overview</span></span>
<span data-ttu-id="745aa-105">При трансляции мероприятий путем динамической потоковой передачи с помощью служб мультимедиа Azure обычно используется следующее:</span><span class="sxs-lookup"><span data-stu-id="745aa-105">When delivering live streaming events with Azure Media Services the following components are commonly involved:</span></span>

* <span data-ttu-id="745aa-106">Камера, которая используется для трансляции события.</span><span class="sxs-lookup"><span data-stu-id="745aa-106">A camera that is used to broadcast an event.</span></span>
* <span data-ttu-id="745aa-107">Динамический видеокодировщик, который преобразует сигналы от камеры в потоки, отправляемые службе динамической потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="745aa-107">A live video encoder that converts signals from the camera to streams that are sent to a live streaming service.</span></span>

    <span data-ttu-id="745aa-108">Несколько синхронизированных кодировщиков прямой передачи (по желанию).</span><span class="sxs-lookup"><span data-stu-id="745aa-108">Optionally, multiple live time synchronized encoders.</span></span> <span data-ttu-id="745aa-109">Для некоторых критически важных транслируемых событий, для которых требуется очень высокая степень доступности и качество передачи, рекомендуется задействовать активно-активные избыточные кодировщики с синхронизацией по времени для достижения беспроблемной отработки отказа без потери данных.</span><span class="sxs-lookup"><span data-stu-id="745aa-109">For certain critical live events that demand very high availability and quality of experience, it is recommended to employ active-active redundant encoders with time synchronization to achieve seamless failover with no data loss.</span></span>
* <span data-ttu-id="745aa-110">Служба динамической потоковой передачи, которая позволяет делать следующее:</span><span class="sxs-lookup"><span data-stu-id="745aa-110">A live streaming service that enables you to do the following:</span></span>

  * <span data-ttu-id="745aa-111">прием содержимого в реальном времени с использованием различных протоколов динамической потоковой передачи (например, RTMP или Smooth Streaming);</span><span class="sxs-lookup"><span data-stu-id="745aa-111">ingest live content using various live streaming protocols (for example RTMP or Smooth Streaming),</span></span>
  * <span data-ttu-id="745aa-112">кодирование вашего потока в поток с адаптивной скоростью (по желанию);</span><span class="sxs-lookup"><span data-stu-id="745aa-112">(optionally) encode your stream into adaptive bitrate stream</span></span>
  * <span data-ttu-id="745aa-113">предварительный просмотр динамического потока;</span><span class="sxs-lookup"><span data-stu-id="745aa-113">preview your live stream,</span></span>
  * <span data-ttu-id="745aa-114">запись и хранение принятого содержимого для потоковой передачи в дальнейшем (видео по запросу);</span><span class="sxs-lookup"><span data-stu-id="745aa-114">record and store the ingested content in order to be streamed later (Video-on-Demand)</span></span>
  * <span data-ttu-id="745aa-115">доставка содержимого посредством общих потоковых протоколов (например, MPEG DASH, Smooth, HLS) непосредственно клиентам или в сеть доставки содержимого (CDN) для дальнейшего распространения.</span><span class="sxs-lookup"><span data-stu-id="745aa-115">deliver the content through common streaming protocols (for example, MPEG DASH, Smooth, HLS) directly to your customers, or to a Content Delivery Network (CDN) for further distribution.</span></span>

<span data-ttu-id="745aa-116">**Службы мультимедиа Microsoft Azure** (AMS) предоставляют возможность приема, кодирования, предварительного просмотра, хранения и доставки содержимого динамической потоковой передачи.</span><span class="sxs-lookup"><span data-stu-id="745aa-116">**Microsoft Azure Media Services** (AMS) provides the ability to ingest,  encode, preview, store, and deliver your live streaming content.</span></span>

<span data-ttu-id="745aa-117">При доставке содержимого клиентам ваша задача — доставлять видео высокого качества для различных устройств в разных сетевых условиях.</span><span class="sxs-lookup"><span data-stu-id="745aa-117">When delivering your content to customers your goal is to deliver a high quality video to various devices under different network conditions.</span></span> <span data-ttu-id="745aa-118">Для этого используйте динамические кодировщики, кодирующие поток в видеопоток с разными скоростями (с адаптивной скоростью).</span><span class="sxs-lookup"><span data-stu-id="745aa-118">To achieve this, use live encoders to encode your stream to a multi-bitrate (adaptive bitrate) video stream.</span></span>  <span data-ttu-id="745aa-119">Для обеспечения потоковой передачи на различных устройствах используйте [динамическое упаковывание](media-services-dynamic-packaging-overview.md) служб мультимедиа, чтобы выполнить повторное динамическое упаковывание потока в разные протоколы.</span><span class="sxs-lookup"><span data-stu-id="745aa-119">To take care of streaming on different devices, use Media Services [dynamic packaging](media-services-dynamic-packaging-overview.md) to dynamically re-package your stream to different protocols.</span></span> <span data-ttu-id="745aa-120">Службы мультимедиа поддерживают доставку следующих технологий потоковой передачи с переменной скоростью: HTTP Live Streaming (HLS), Smooth Streaming и MPEG-DASH.</span><span class="sxs-lookup"><span data-stu-id="745aa-120">Media Services supports delivery of the following adaptive bitrate streaming technologies: HTTP Live Streaming (HLS), Smooth Streaming, MPEG DASH.</span></span>

<span data-ttu-id="745aa-121">**Каналы**, **программы** и **конечные точки потоковой передачи** в службах мультимедиа Azure обрабатывают все связанные с потоковым вещанием функции, включая прием, форматирование, DVR, безопасность, масштабируемость и избыточность.</span><span class="sxs-lookup"><span data-stu-id="745aa-121">In Azure Media Services, **Channels**, **Programs**, and **StreamingEndpoints** handle all the live streaming functionalities including ingest, formatting, DVR, security, scalability and redundancy.</span></span>

<span data-ttu-id="745aa-122">**Канал** представляет собой конвейер для обработки содержимого, передаваемого динамически в потоковом режиме.</span><span class="sxs-lookup"><span data-stu-id="745aa-122">A **Channel** represents a pipeline for processing live streaming content.</span></span> <span data-ttu-id="745aa-123">Канал может получать динамические входные потоки следующим способом.</span><span class="sxs-lookup"><span data-stu-id="745aa-123">A Channel can receive a live input streams in the following ways:</span></span>

* <span data-ttu-id="745aa-124">Локальный динамический кодировщик передает контент в многоскоростном формате **RTMP** или **Smooth Streaming** (фрагментированный формат MP4) в канал, настроенный для **сквозной** доставки.</span><span class="sxs-lookup"><span data-stu-id="745aa-124">An on-premises live encoder sends multi-bitrate **RTMP** or **Smooth Streaming** (fragmented MP4) to the Channel that is configured for **pass-through** delivery.</span></span> <span data-ttu-id="745aa-125">**Сквозная** доставка осуществляется, когда переданные потоки проходят через **каналы** без дополнительной обработки.</span><span class="sxs-lookup"><span data-stu-id="745aa-125">The **pass-through** delivery is when the ingested streams pass through **Channel**s without any further processing.</span></span> <span data-ttu-id="745aa-126">Вы можете использовать следующие динамические кодировщики, выдающие содержимое в формате потоковой передачи Smooth Streaming с несколькими скоростями: MediaExcel, Ateme, Imagine Communications, Envivio, Cisco и Elemental.</span><span class="sxs-lookup"><span data-stu-id="745aa-126">You can use the following live encoders that output multi-bitrate Smooth Streaming: MediaExcel, Ateme, Imagine Communications, Envivio, Cisco and Elemental.</span></span> <span data-ttu-id="745aa-127">Следующие динамические кодировщики выдают содержимое в формате RTMP: Adobe Flash Media Live Encoder (FMLE), Telestream Wirecast, Haivision, Teradek и транскодеры Tricaster.</span><span class="sxs-lookup"><span data-stu-id="745aa-127">The following live encoders output RTMP: Adobe Flash Media Live Encoder (FMLE), Telestream Wirecast, Haivision, Teradek and Tricaster transcoders.</span></span>  <span data-ttu-id="745aa-128">Динамический кодировщик может также передавать односкоростной поток в канал, для которого не включено динамическое кодирование, но это не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="745aa-128">A live encoder can also send a single bitrate stream to a channel that is not enabled for live encoding, but that is not recommended.</span></span> <span data-ttu-id="745aa-129">При получении запроса службы мультимедиа предоставляют потоки клиентам.</span><span class="sxs-lookup"><span data-stu-id="745aa-129">When requested, Media Services delivers the stream to customers.</span></span>

  > [!NOTE]
  > <span data-ttu-id="745aa-130">Метод сквозной доставки — наиболее экономичный способ осуществления потоковой передачи в режиме реального времени, если передается ряд событий за длительный период времени и у вас уже есть локальные кодировщики.</span><span class="sxs-lookup"><span data-stu-id="745aa-130">Using a pass-through method is the most economical way to do live streaming when you are doing multiple events over a long period of time, and you have already invested in on-premises encoders.</span></span> <span data-ttu-id="745aa-131">См. сведения о [ценах](https://azure.microsoft.com/pricing/details/media-services/).</span><span class="sxs-lookup"><span data-stu-id="745aa-131">See [pricing](https://azure.microsoft.com/pricing/details/media-services/) details.</span></span>
  > 
  > 
* <span data-ttu-id="745aa-132">Локальный динамический кодировщик передает односкоростной поток в канал, который может осуществлять кодирование в реальном времени с помощью служб мультимедиа, в одном из следующих форматов: RTMP или Smooth Streaming (Fragmented MP4) .</span><span class="sxs-lookup"><span data-stu-id="745aa-132">An on-premises live encoder sends a single-bitrate stream to the Channel that is enabled to perform live encoding with Media Services in one of the following formats: RTMP or Smooth Streaming (fragmented MP4).</span></span> <span data-ttu-id="745aa-133">Также поддерживается формат RTP (MPEG-TS), если есть выделенное подключение к центру обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="745aa-133">RTP (MPEG-TS) is also supported, provided you have a dedicated connection to the Azure data center.</span></span> <span data-ttu-id="745aa-134">С каналами этого типа работают следующие динамические кодировщики с выходными данным в формате RTMP: Telestream Wirecast, FMLE.</span><span class="sxs-lookup"><span data-stu-id="745aa-134">The following live encoders with RTMP output are known to work with channels of this type: Telestream Wirecast, FMLE.</span></span> <span data-ttu-id="745aa-135">Затем канал кодирует входящий односкоростной поток в реальном времени в многоскоростной (адаптивный) видеопоток.</span><span class="sxs-lookup"><span data-stu-id="745aa-135">The Channel then performs live encoding of the incoming single bitrate stream to a multi-bitrate (adaptive) video stream.</span></span> <span data-ttu-id="745aa-136">При получении запроса службы мультимедиа предоставляют потоки клиентам.</span><span class="sxs-lookup"><span data-stu-id="745aa-136">When requested, Media Services delivers the stream to customers.</span></span>

<span data-ttu-id="745aa-137">Начиная с выпуска 2.10 служб мультимедиа, при создании канала можно указать, как он должен принимать входной поток и должен ли он выполнять его кодирование в реальном времени.</span><span class="sxs-lookup"><span data-stu-id="745aa-137">Starting with the Media Services 2.10 release, when you create a Channel, you can specify in which way you want for your channel to receive the input stream and whether or not you want for the channel to perform live encoding of your stream.</span></span> <span data-ttu-id="745aa-138">Существует два варианта.</span><span class="sxs-lookup"><span data-stu-id="745aa-138">You have two options:</span></span>

* <span data-ttu-id="745aa-139">**Нет** (сквозная передача) — задайте это значение, если вы собираетесь использовать локальный динамический кодировщик, который будет выдавать многоскоростной (сквозной) поток.</span><span class="sxs-lookup"><span data-stu-id="745aa-139">**None** (pass-through) – Specify this value, if you plan to use an on-premises live encoder which will output multi-bitrate stream (a pass-through stream).</span></span> <span data-ttu-id="745aa-140">В этом случае входящий поток передается на выход без кодирования.</span><span class="sxs-lookup"><span data-stu-id="745aa-140">In this case, the incoming stream passed through to the output without any encoding.</span></span> <span data-ttu-id="745aa-141">Таким образом каналы работали до выпуска 2.10.</span><span class="sxs-lookup"><span data-stu-id="745aa-141">This is the behavior of a Channel prior to 2.10 release.</span></span>  
* <span data-ttu-id="745aa-142">**Стандартный** — выберите это значение, если собираетесь использовать службы мультимедиа для кодирования односкоростного потока во многоскоростной.</span><span class="sxs-lookup"><span data-stu-id="745aa-142">**Standard** – Choose this value, if you plan to use Media Services to encode your single bitrate live stream to multi-bitrate stream.</span></span> <span data-ttu-id="745aa-143">Этот метод служит наиболее экономичным решением для быстрого масштабирования редких событий.</span><span class="sxs-lookup"><span data-stu-id="745aa-143">This method is more economical for scaling up quickly for infrequent events.</span></span> <span data-ttu-id="745aa-144">Помните о том, что за кодирование в реальном времени взимается плата, поэтому, если вы оставите канал кодирования в реальном времени в состоянии "Работает", вам будут выставлены соответствующие счета.</span><span class="sxs-lookup"><span data-stu-id="745aa-144">Be aware that there is a billing impact for live encoding and you should remember that leaving a live encoding channel in the "Running" state will incur billing charges.</span></span>  <span data-ttu-id="745aa-145">Рекомендуется сразу же прекращать работу канала после завершения потоковой передачи в реальном времени во избежание оплаты дополнительных часов.</span><span class="sxs-lookup"><span data-stu-id="745aa-145">It is recommended that you immediately stop your running channels after your live streaming event is complete to avoid extra hourly charges.</span></span>

## <a name="comparison-of-channel-types"></a><span data-ttu-id="745aa-146">Сравнение типов каналов</span><span class="sxs-lookup"><span data-stu-id="745aa-146">Comparison of Channel Types</span></span>
<span data-ttu-id="745aa-147">В представленной ниже таблице сравниваются два типа каналов, поддерживаемых службами мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="745aa-147">Following table provides a guide to comparing the two Channel types supported in Media Services</span></span>

| <span data-ttu-id="745aa-148">Функция</span><span class="sxs-lookup"><span data-stu-id="745aa-148">Feature</span></span> | <span data-ttu-id="745aa-149">Сквозной канал</span><span class="sxs-lookup"><span data-stu-id="745aa-149">Pass-through Channel</span></span> | <span data-ttu-id="745aa-150">Стандартный канал</span><span class="sxs-lookup"><span data-stu-id="745aa-150">Standard Channel</span></span> |
| --- | --- | --- |
| <span data-ttu-id="745aa-151">Кодировка односкоростного источника данных в несколько потоков с различными скоростями передачи в облаке</span><span class="sxs-lookup"><span data-stu-id="745aa-151">Single bitrate input is encoded into multiple bitrates in the cloud</span></span> |<span data-ttu-id="745aa-152">Нет</span><span class="sxs-lookup"><span data-stu-id="745aa-152">No</span></span> |<span data-ttu-id="745aa-153">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-153">Yes</span></span> |
| <span data-ttu-id="745aa-154">Максимальное разрешение, количество слоев</span><span class="sxs-lookup"><span data-stu-id="745aa-154">Maximum resolution, number of layers</span></span> |<span data-ttu-id="745aa-155">1080p, 8 слоев, 60 и более кадров в секунду</span><span class="sxs-lookup"><span data-stu-id="745aa-155">1080p, 8 layers, 60+fps</span></span> |<span data-ttu-id="745aa-156">720p, 6 слоев, 30 и более кадров в секунду</span><span class="sxs-lookup"><span data-stu-id="745aa-156">720p, 6 layers, 30 fps</span></span> |
| <span data-ttu-id="745aa-157">Протоколы входных данных</span><span class="sxs-lookup"><span data-stu-id="745aa-157">Input protocols</span></span> |<span data-ttu-id="745aa-158">RTMP, Smooth Streaming</span><span class="sxs-lookup"><span data-stu-id="745aa-158">RTMP, Smooth Streaming</span></span> |<span data-ttu-id="745aa-159">RTMP, Smooth Streaming и RTP</span><span class="sxs-lookup"><span data-stu-id="745aa-159">RTMP, Smooth Streaming, and RTP</span></span> |
| <span data-ttu-id="745aa-160">Цена</span><span class="sxs-lookup"><span data-stu-id="745aa-160">Price</span></span> |<span data-ttu-id="745aa-161">Откройте [страницу цен](https://azure.microsoft.com/pricing/details/media-services/) и выберите вкладку Live Video</span><span class="sxs-lookup"><span data-stu-id="745aa-161">See the [pricing page](https://azure.microsoft.com/pricing/details/media-services/) and click on "Live Video" tab</span></span> |<span data-ttu-id="745aa-162">Откройте [страницу цен](https://azure.microsoft.com/pricing/details/media-services/)</span><span class="sxs-lookup"><span data-stu-id="745aa-162">See the [pricing page](https://azure.microsoft.com/pricing/details/media-services/)</span></span> |
| <span data-ttu-id="745aa-163">Максимальное время выполнения</span><span class="sxs-lookup"><span data-stu-id="745aa-163">Maximum run time</span></span> |<span data-ttu-id="745aa-164">24x7</span><span class="sxs-lookup"><span data-stu-id="745aa-164">24x7</span></span> |<span data-ttu-id="745aa-165">8 ч</span><span class="sxs-lookup"><span data-stu-id="745aa-165">8 hours</span></span> |
| <span data-ttu-id="745aa-166">Поддержка вставки баннеров</span><span class="sxs-lookup"><span data-stu-id="745aa-166">Support for inserting slates</span></span> |<span data-ttu-id="745aa-167">Нет</span><span class="sxs-lookup"><span data-stu-id="745aa-167">No</span></span> |<span data-ttu-id="745aa-168">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-168">Yes</span></span> |
| <span data-ttu-id="745aa-169">Поддержка сигнализации о рекламе</span><span class="sxs-lookup"><span data-stu-id="745aa-169">Support for ad signaling</span></span> |<span data-ttu-id="745aa-170">Нет</span><span class="sxs-lookup"><span data-stu-id="745aa-170">No</span></span> |<span data-ttu-id="745aa-171">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-171">Yes</span></span> |
| <span data-ttu-id="745aa-172">Сквозная передача субтитров стандарта CEA 608/708</span><span class="sxs-lookup"><span data-stu-id="745aa-172">Pass-through CEA 608/708 captions</span></span> |<span data-ttu-id="745aa-173">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-173">Yes</span></span> |<span data-ttu-id="745aa-174">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-174">Yes</span></span> |
| <span data-ttu-id="745aa-175">Возможность восстановления после кратких остановок в канале входного потока данных</span><span class="sxs-lookup"><span data-stu-id="745aa-175">Ability to recover from brief stalls in contribution feed</span></span> |<span data-ttu-id="745aa-176">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-176">Yes</span></span> |<span data-ttu-id="745aa-177">Нет (канал начнет вставку через 6 или более секунд без входных данных)</span><span class="sxs-lookup"><span data-stu-id="745aa-177">No (Channel will begin slating after 6+ seconds w/o input data)</span></span> |
| <span data-ttu-id="745aa-178">Поддержка неоднородных GPO</span><span class="sxs-lookup"><span data-stu-id="745aa-178">Support for non-uniform input GOPs</span></span> |<span data-ttu-id="745aa-179">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-179">Yes</span></span> |<span data-ttu-id="745aa-180">Нет — входные данные должны представлять собой двухсекундные GOP с фиксированной скоростью передачи</span><span class="sxs-lookup"><span data-stu-id="745aa-180">No – input must be fixed 2sec GOPs</span></span> |
| <span data-ttu-id="745aa-181">Поддержка входных данных с переменной частотой кадров</span><span class="sxs-lookup"><span data-stu-id="745aa-181">Support for variable frame rate input</span></span> |<span data-ttu-id="745aa-182">Да</span><span class="sxs-lookup"><span data-stu-id="745aa-182">Yes</span></span> |<span data-ttu-id="745aa-183">Нет — входные данные должны иметь фиксированную частоту кадров.</span><span class="sxs-lookup"><span data-stu-id="745aa-183">No – input must be fixed frame rate.</span></span><br/><span data-ttu-id="745aa-184">Небольшие колебания допустимы, например, в сценах с высокой скоростью движения.</span><span class="sxs-lookup"><span data-stu-id="745aa-184">Minor variations are tolerated, for example, during high motion scenes.</span></span> <span data-ttu-id="745aa-185">При этом кодировщик не поддерживает сжатие до 10 кадров в секунду.</span><span class="sxs-lookup"><span data-stu-id="745aa-185">But encoder cannot drop to 10 frames/sec.</span></span> |
| <span data-ttu-id="745aa-186">Автоотключение каналов при потере входного потока данных</span><span class="sxs-lookup"><span data-stu-id="745aa-186">Auto-shutoff of Channels when input feed is lost</span></span> |<span data-ttu-id="745aa-187">Нет</span><span class="sxs-lookup"><span data-stu-id="745aa-187">No</span></span> |<span data-ttu-id="745aa-188">Через 12 часов, если не будет запущена ни одна программа</span><span class="sxs-lookup"><span data-stu-id="745aa-188">After 12 hours, if there is no Program running</span></span> |

## <a name="working-with-channels-that-receive-multi-bitrate-live-stream-from-on-premises-encoders-pass-through"></a><span data-ttu-id="745aa-189">Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков (сквозная передача)</span><span class="sxs-lookup"><span data-stu-id="745aa-189">Working with Channels that receive multi-bitrate live stream from on-premises encoders (pass-through)</span></span>
<span data-ttu-id="745aa-190">На следующей схеме показаны основные части платформы AMS, участвующие в рабочем процессе **сквозной передачи** .</span><span class="sxs-lookup"><span data-stu-id="745aa-190">The following diagram shows the major parts of the AMS platform that are involved in the **pass-through** workflow.</span></span>

![Динамический рабочий процесс](./media/media-services-live-streaming-workflow/media-services-live-streaming-current.png)

<span data-ttu-id="745aa-192">Дополнительные сведения см. в разделе [Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков (сквозная передача)](media-services-live-streaming-with-onprem-encoders.md).</span><span class="sxs-lookup"><span data-stu-id="745aa-192">For more information, see [Working with Channels that Receive Multi-bitrate Live Stream from On-premises Encoders](media-services-live-streaming-with-onprem-encoders.md).</span></span>

## <a name="working-with-channels-that-are-enabled-to-perform-live-encoding-with-azure-media-services"></a><span data-ttu-id="745aa-193">Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure</span><span class="sxs-lookup"><span data-stu-id="745aa-193">Working with Channels that are enabled to perform live encoding with Azure Media Services</span></span>
<span data-ttu-id="745aa-194">На следующей схеме показаны основные части платформы AMS, участвующие в процессе динамическое потоковой передачи, где для кодировщика включено динамическое кодирование с помощью служб мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="745aa-194">The following diagram shows the major parts of the AMS platform that are involved in Live Streaming workflow where a Channel is enabled to perform live encoding with Media Services.</span></span>

![Динамический рабочий процесс](./media/media-services-live-streaming-workflow/media-services-live-streaming-new.png)

<span data-ttu-id="745aa-196">Дополнительные сведения можно найти в разделе [Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure](media-services-manage-live-encoder-enabled-channels.md).</span><span class="sxs-lookup"><span data-stu-id="745aa-196">For more information, see [Working with Channels that are Enabled to Perform Live Encoding with Azure Media Services](media-services-manage-live-encoder-enabled-channels.md).</span></span>

## <a name="description-of-a-channel-and-its-related-components"></a><span data-ttu-id="745aa-197">Описание канала и связанных с ним компонентов</span><span class="sxs-lookup"><span data-stu-id="745aa-197">Description of a Channel and its related components</span></span>
### <a name="channel"></a><span data-ttu-id="745aa-198">Канал</span><span class="sxs-lookup"><span data-stu-id="745aa-198">Channel</span></span>
<span data-ttu-id="745aa-199">В службах мультимедиа [каналы](https://docs.microsoft.com/rest/api/media/operations/channel)отвечают за обработку обновляющегося содержимого потоковой трансляции.</span><span class="sxs-lookup"><span data-stu-id="745aa-199">In Media Services, [Channel](https://docs.microsoft.com/rest/api/media/operations/channel)s are responsible for processing live streaming content.</span></span> <span data-ttu-id="745aa-200">Канал предоставляет входную конечную точку, которая затем передается динамическому кодировщику.</span><span class="sxs-lookup"><span data-stu-id="745aa-200">A Channel provides an input endpoint (ingest URL) that you then provide to a live transcoder.</span></span> <span data-ttu-id="745aa-201">Канал получает входные потоковые трансляции от кодировщика и предоставляет их для потоковой передачи по одной или нескольким StreamingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="745aa-201">The channel receives live input streams from the live transcoder and makes it available for streaming through one or more StreamingEndpoints.</span></span> <span data-ttu-id="745aa-202">Каналы также предоставляют конечную точку предварительного просмотра (URL-адрес предварительного просмотра), используемого для предварительного просмотра и проверки вашего потока перед дальнейшей обработкой и доставкой.</span><span class="sxs-lookup"><span data-stu-id="745aa-202">Channels also provide a preview endpoint (preview URL) that you use to preview and validate your stream before further processing and delivery.</span></span>

<span data-ttu-id="745aa-203">URL-адрес приема и URL-адрес предварительного просмотра можно получить при создании канала.</span><span class="sxs-lookup"><span data-stu-id="745aa-203">You can get the ingest URL and the preview URL when you create the channel.</span></span> <span data-ttu-id="745aa-204">Получить эти URL-адреса можно только тогда, когда канал не запущен.</span><span class="sxs-lookup"><span data-stu-id="745aa-204">To get these URLs, the channel does not have to be in the started state.</span></span> <span data-ttu-id="745aa-205">Когда все готово для начала передачи данных из динамического транскодера в канал, канал должен быть запущен.</span><span class="sxs-lookup"><span data-stu-id="745aa-205">When you are ready to start pushing data from a live transcoder into the channel, the channel must be started.</span></span> <span data-ttu-id="745aa-206">После запуска приема данных динамического транскодера можно выполнить предварительный просмотр потока.</span><span class="sxs-lookup"><span data-stu-id="745aa-206">Once the live transcoder starts ingesting data, you can preview your stream.</span></span>

<span data-ttu-id="745aa-207">Каждая учетная запись служб мультимедиа может содержать множество каналов, программ и конечных служб StreamingEndpoint.</span><span class="sxs-lookup"><span data-stu-id="745aa-207">Each Media Services account can contain multiple Channels, multiple Programs, and multiple StreamingEndpoints.</span></span> <span data-ttu-id="745aa-208">В зависимости от пропускной способности и потребностей безопасности службы StreamingEndpoint могут быть выделены одному или нескольким каналам.</span><span class="sxs-lookup"><span data-stu-id="745aa-208">Depending on the bandwidth and security needs, StreamingEndpoint services can be dedicated to one or more channels.</span></span> <span data-ttu-id="745aa-209">Любая служба StreamingEndpoint может извлекать данные из любого канала.</span><span class="sxs-lookup"><span data-stu-id="745aa-209">Any StreamingEndpoint can pull from any Channel.</span></span>

### <a name="program"></a><span data-ttu-id="745aa-210">Программа</span><span class="sxs-lookup"><span data-stu-id="745aa-210">Program</span></span>
<span data-ttu-id="745aa-211">[Программа](https://docs.microsoft.com/rest/api/media/operations/program) позволяет управлять публикацией и хранением сегментов в динамическом потоке.</span><span class="sxs-lookup"><span data-stu-id="745aa-211">A [Program](https://docs.microsoft.com/rest/api/media/operations/program) enables you to control the publishing and storage of segments in a live stream.</span></span> <span data-ttu-id="745aa-212">Каналы управляют программами.</span><span class="sxs-lookup"><span data-stu-id="745aa-212">Channels manage Programs.</span></span> <span data-ttu-id="745aa-213">Отношение между каналом и программой очень похоже на традиционные мультимедиа, где канал передает постоянный поток контента, а программа ограничена временным событием на этом канале.</span><span class="sxs-lookup"><span data-stu-id="745aa-213">The Channel and Program relationship is very similar to traditional media where a channel has a constant stream of content and a program is scoped to some timed event on that channel.</span></span>
<span data-ttu-id="745aa-214">Можно указать количество часов, в течение которого записанный содержимого должен сохраняться для программы, установив свойство **ArchiveWindowLength** .</span><span class="sxs-lookup"><span data-stu-id="745aa-214">You can specify the number of hours you want to retain the recorded content for the program by setting the **ArchiveWindowLength** property.</span></span> <span data-ttu-id="745aa-215">Это значение может быть задано в диапазоне от 5 минут до 25 часов.</span><span class="sxs-lookup"><span data-stu-id="745aa-215">This value can be set from a minimum of 5 minutes to a maximum of 25 hours.</span></span>

<span data-ttu-id="745aa-216">Оно также указывает максимальное время, на которое клиенты могут вернуться назад от текущей позиции.</span><span class="sxs-lookup"><span data-stu-id="745aa-216">ArchiveWindowLength also dictates the maximum amount of time clients can seek back in time from the current live position.</span></span> <span data-ttu-id="745aa-217">Программы могут выходить за указанный промежуток времени, но содержимое за пределами этого промежутка постоянно удаляется.</span><span class="sxs-lookup"><span data-stu-id="745aa-217">Programs can run over the specified amount of time, but content that falls behind the window length is continuously discarded.</span></span> <span data-ttu-id="745aa-218">Значение этого свойства также определяет максимальный размер манифестов клиентов.</span><span class="sxs-lookup"><span data-stu-id="745aa-218">This value of this property also determines how long the client manifests can grow.</span></span>

<span data-ttu-id="745aa-219">Каждая программа связана с ресурсом.</span><span class="sxs-lookup"><span data-stu-id="745aa-219">Each program is associated with an Asset.</span></span> <span data-ttu-id="745aa-220">Чтобы опубликовать программу, необходимо создать указатель для связанного ресурса.</span><span class="sxs-lookup"><span data-stu-id="745aa-220">To publish the program you must create a locator for the associated asset.</span></span> <span data-ttu-id="745aa-221">С помощью этого указателя можно сформировать URL-адрес потоковой передачи данных, который предоставляется клиентам.</span><span class="sxs-lookup"><span data-stu-id="745aa-221">Having this locator will enable you to build a streaming URL that you can provide to your clients.</span></span>

<span data-ttu-id="745aa-222">Канал поддерживает одновременную потоковую трансляцию до трех программ, поэтому можно создавать по несколько архивов одного и того же входящего потока.</span><span class="sxs-lookup"><span data-stu-id="745aa-222">A channel supports up to three concurrently running programs so you can create multiple archives of the same incoming stream.</span></span> <span data-ttu-id="745aa-223">Благодаря этому можно публиковать и архивировать разные части транслируемого мероприятия.</span><span class="sxs-lookup"><span data-stu-id="745aa-223">This allows you to publish and archive different parts of an event as needed.</span></span> <span data-ttu-id="745aa-224">Например ваш бизнес-требование — архивировать 6 часов программы, но для передачи только оставить последние 10 минут.</span><span class="sxs-lookup"><span data-stu-id="745aa-224">For example, your business requirement is to archive 6 hours of a program, but to broadcast only last 10 minutes.</span></span> <span data-ttu-id="745aa-225">Для этого необходимо создать две одновременно работающие программы.</span><span class="sxs-lookup"><span data-stu-id="745aa-225">To accomplish this, you need to create two concurrently running programs.</span></span> <span data-ttu-id="745aa-226">Для одной из них настроено архивирование 6 часов транслируемого мероприятия, но без публикации.</span><span class="sxs-lookup"><span data-stu-id="745aa-226">One program is set to archive 6 hours of the event but the program is not published.</span></span> <span data-ttu-id="745aa-227">Для второй программы настроено архивирование 10 минут с публикацией.</span><span class="sxs-lookup"><span data-stu-id="745aa-227">The other program is set to archive for 10 minutes and this program is published.</span></span>

## <a name="billing-implications"></a><span data-ttu-id="745aa-228">Процесс выставления счетов</span><span class="sxs-lookup"><span data-stu-id="745aa-228">Billing Implications</span></span>
<span data-ttu-id="745aa-229">Начисление платы за канал кодирования начинается, как только он переходит в состояние "Запущено" с помощью API-интерфейса.</span><span class="sxs-lookup"><span data-stu-id="745aa-229">A channel begins billing as soon as it's state transitions to "Running" via the API.</span></span>  

<span data-ttu-id="745aa-230">В следующей таблице показано, как состояния канала соотносятся с состояниями выставления счетов в API и на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="745aa-230">The following table shows how Channel states map to billing states in the API and Azure portal.</span></span> <span data-ttu-id="745aa-231">Обратите внимание, что состояния для API и портала немного отличаются.</span><span class="sxs-lookup"><span data-stu-id="745aa-231">Note that the states are slightly different between the API and Portal UX.</span></span> <span data-ttu-id="745aa-232">Как только канал переходит в состояние "Работает" с помощью API либо в состояние "Готово" или "Потоковая передача" на портале Azure, начинается начисление оплаты.</span><span class="sxs-lookup"><span data-stu-id="745aa-232">As soon as a channel is in the "Running" state via the API, or in the "Ready" or "Streaming" state in the Azure portal, billing will be active.</span></span>

<span data-ttu-id="745aa-233">Чтобы прекратить начисление оплаты за канал, необходимо остановить канал через API или на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="745aa-233">To stop the Channel from billing you further, you have to Stop the Channel via the API or in the Azure portal.</span></span>
<span data-ttu-id="745aa-234">Только вы отвечаете за остановку каналов после завершения кодирования.</span><span class="sxs-lookup"><span data-stu-id="745aa-234">You are responsible for stopping your channels when you are done with the channel.</span></span> <span data-ttu-id="745aa-235">Если вы не остановите работу канала, начисление оплаты будет продолжено.</span><span class="sxs-lookup"><span data-stu-id="745aa-235">Failure to stop the channel will result in continued billing.</span></span>

> [!NOTE]
> <span data-ttu-id="745aa-236">При работе с каналами ценовой категории "Стандартный", AMS автоматически отключает любой канал, находящийся в состоянии "Запущено" в течение 12 часов после потери входного потока данных, если нет работающих программ.</span><span class="sxs-lookup"><span data-stu-id="745aa-236">When working with Standard channels, AMS will auto shutoff any Channel that is still in “Running” state 12 hours after the input feed is lost, and there are no Programs running.</span></span> <span data-ttu-id="745aa-237">Оплата при этом будет начисляться за все время, пока канал находится в состоянии "Запущено".</span><span class="sxs-lookup"><span data-stu-id="745aa-237">However, you will still be billed for the time the Channel was in “Running” state.</span></span>
>
>

### <span data-ttu-id="745aa-238"><a id="states"></a>Состояния канала и их сопоставление с режимом выставления счетов</span><span class="sxs-lookup"><span data-stu-id="745aa-238"><a id="states"></a>Channel states and how they map to the billing mode</span></span>
<span data-ttu-id="745aa-239">Текущее состояние канала.</span><span class="sxs-lookup"><span data-stu-id="745aa-239">The current state of a Channel.</span></span> <span data-ttu-id="745aa-240">Ниже перечислены возможные значения.</span><span class="sxs-lookup"><span data-stu-id="745aa-240">Possible values include:</span></span>

* <span data-ttu-id="745aa-241">**Остановлен**.</span><span class="sxs-lookup"><span data-stu-id="745aa-241">**Stopped**.</span></span> <span data-ttu-id="745aa-242">Это начальное состояние канала после его создания (если только на портале не был выбран автозапуск). В этом состоянии начисление оплаты не происходит.</span><span class="sxs-lookup"><span data-stu-id="745aa-242">This is the initial state of the Channel after its creation (unless autostart was selected in the portal.) No billing occurs in this state.</span></span> <span data-ttu-id="745aa-243">В этом состоянии можно изменять свойства канала, но потоковая передача запрещена.</span><span class="sxs-lookup"><span data-stu-id="745aa-243">In this state, the Channel properties can be updated but streaming is not allowed.</span></span>
* <span data-ttu-id="745aa-244">**Запуск**.</span><span class="sxs-lookup"><span data-stu-id="745aa-244">**Starting**.</span></span> <span data-ttu-id="745aa-245">Канал запускается.</span><span class="sxs-lookup"><span data-stu-id="745aa-245">The Channel is being started.</span></span> <span data-ttu-id="745aa-246">В этом состоянии начисление оплаты не происходит.</span><span class="sxs-lookup"><span data-stu-id="745aa-246">No billing occurs in this state.</span></span> <span data-ttu-id="745aa-247">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="745aa-247">No updates or streaming is allowed during this state.</span></span> <span data-ttu-id="745aa-248">Если возникает ошибка, канал возвращается в состояние "Остановлен".</span><span class="sxs-lookup"><span data-stu-id="745aa-248">If an error occurs, the Channel returns to the Stopped state.</span></span>
* <span data-ttu-id="745aa-249">**Выполняется**.</span><span class="sxs-lookup"><span data-stu-id="745aa-249">**Running**.</span></span> <span data-ttu-id="745aa-250">Канал может обрабатывать динамические потоки.</span><span class="sxs-lookup"><span data-stu-id="745aa-250">The Channel is capable of processing live streams.</span></span> <span data-ttu-id="745aa-251">Теперь оплата начисляется.</span><span class="sxs-lookup"><span data-stu-id="745aa-251">It is now billing usage.</span></span> <span data-ttu-id="745aa-252">Необходимо остановить работу канала, чтобы избежать дальнейшего начисления оплаты.</span><span class="sxs-lookup"><span data-stu-id="745aa-252">You must stop the channel to prevent further billing.</span></span>
* <span data-ttu-id="745aa-253">**Остановка**.</span><span class="sxs-lookup"><span data-stu-id="745aa-253">**Stopping**.</span></span> <span data-ttu-id="745aa-254">Канал останавливается.</span><span class="sxs-lookup"><span data-stu-id="745aa-254">The Channel is being stopped.</span></span> <span data-ttu-id="745aa-255">В этом переходном состоянии оплата не начисляется.</span><span class="sxs-lookup"><span data-stu-id="745aa-255">No billing occurs in this transient state.</span></span> <span data-ttu-id="745aa-256">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="745aa-256">No updates or streaming is allowed during this state.</span></span>
* <span data-ttu-id="745aa-257">**Удаление**.</span><span class="sxs-lookup"><span data-stu-id="745aa-257">**Deleting**.</span></span> <span data-ttu-id="745aa-258">Канал удаляется.</span><span class="sxs-lookup"><span data-stu-id="745aa-258">The Channel is being deleted.</span></span> <span data-ttu-id="745aa-259">В этом переходном состоянии оплата не начисляется.</span><span class="sxs-lookup"><span data-stu-id="745aa-259">No billing occurs in this transient state.</span></span> <span data-ttu-id="745aa-260">В этом состоянии обновление и потоковая передача запрещены.</span><span class="sxs-lookup"><span data-stu-id="745aa-260">No updates or streaming is allowed during this state.</span></span>

<span data-ttu-id="745aa-261">В таблице ниже показано, как состояния канала соотносятся с режимом выставления счетов.</span><span class="sxs-lookup"><span data-stu-id="745aa-261">The following table shows how Channel states map to the billing mode.</span></span>

| <span data-ttu-id="745aa-262">Состояние канала</span><span class="sxs-lookup"><span data-stu-id="745aa-262">Channel state</span></span> | <span data-ttu-id="745aa-263">Индикаторы в пользовательском интерфейсе портала</span><span class="sxs-lookup"><span data-stu-id="745aa-263">Portal UI Indicators</span></span> | <span data-ttu-id="745aa-264">Это начисление оплаты?</span><span class="sxs-lookup"><span data-stu-id="745aa-264">Is it Billing?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="745aa-265">Запуск</span><span class="sxs-lookup"><span data-stu-id="745aa-265">Starting</span></span> |<span data-ttu-id="745aa-266">Запуск</span><span class="sxs-lookup"><span data-stu-id="745aa-266">Starting</span></span> |<span data-ttu-id="745aa-267">Нет (переходное состояние)</span><span class="sxs-lookup"><span data-stu-id="745aa-267">No (transient state)</span></span> |
| <span data-ttu-id="745aa-268">Выполняется</span><span class="sxs-lookup"><span data-stu-id="745aa-268">Running</span></span> |<span data-ttu-id="745aa-269">Готово (нет запущенных программ)</span><span class="sxs-lookup"><span data-stu-id="745aa-269">Ready (no running programs)</span></span><br/><span data-ttu-id="745aa-270">или</span><span class="sxs-lookup"><span data-stu-id="745aa-270">or</span></span><br/><span data-ttu-id="745aa-271">Потоковая передача (запущена по крайней мере одна программа)</span><span class="sxs-lookup"><span data-stu-id="745aa-271">Streaming (at least one running program)</span></span> |<span data-ttu-id="745aa-272">ДА</span><span class="sxs-lookup"><span data-stu-id="745aa-272">YES</span></span> |
| <span data-ttu-id="745aa-273">Остановка</span><span class="sxs-lookup"><span data-stu-id="745aa-273">Stopping</span></span> |<span data-ttu-id="745aa-274">Остановка</span><span class="sxs-lookup"><span data-stu-id="745aa-274">Stopping</span></span> |<span data-ttu-id="745aa-275">Нет (переходное состояние)</span><span class="sxs-lookup"><span data-stu-id="745aa-275">No (transient state)</span></span> |
| <span data-ttu-id="745aa-276">Остановлен</span><span class="sxs-lookup"><span data-stu-id="745aa-276">Stopped</span></span> |<span data-ttu-id="745aa-277">Остановлен</span><span class="sxs-lookup"><span data-stu-id="745aa-277">Stopped</span></span> |<span data-ttu-id="745aa-278">Нет</span><span class="sxs-lookup"><span data-stu-id="745aa-278">No</span></span> |

## <a name="media-services-learning-paths"></a><span data-ttu-id="745aa-279">Схемы обучения работе со службами мультимедиа</span><span class="sxs-lookup"><span data-stu-id="745aa-279">Media Services learning paths</span></span>
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a><span data-ttu-id="745aa-280">Отзывы</span><span class="sxs-lookup"><span data-stu-id="745aa-280">Provide feedback</span></span>
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

## <a name="related-topics"></a><span data-ttu-id="745aa-281">Связанные разделы</span><span class="sxs-lookup"><span data-stu-id="745aa-281">Related topics</span></span>
[<span data-ttu-id="745aa-282">Спецификация приема фрагментированного потока MP4 в режиме реального времени в службах мультимедиа Azure</span><span class="sxs-lookup"><span data-stu-id="745aa-282">Azure Media Services Fragmented MP4 Live Ingest Specification</span></span>](media-services-fmp4-live-ingest-overview.md)

[<span data-ttu-id="745aa-283">Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure</span><span class="sxs-lookup"><span data-stu-id="745aa-283">Working with Channels that are Enabled to Perform Live Encoding with Azure Media Services</span></span>](media-services-manage-live-encoder-enabled-channels.md)

[<span data-ttu-id="745aa-284">Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков</span><span class="sxs-lookup"><span data-stu-id="745aa-284">Working with Channels that Receive Multi-bitrate Live Stream from On-premises Encoders</span></span>](media-services-live-streaming-with-onprem-encoders.md)

<span data-ttu-id="745aa-285">[Квоты и ограничения](media-services-quotas-and-limitations.md)</span><span class="sxs-lookup"><span data-stu-id="745aa-285">[Quotas and limitations](media-services-quotas-and-limitations.md).</span></span>  

[<span data-ttu-id="745aa-286">Основные понятия служб мультимедиа</span><span class="sxs-lookup"><span data-stu-id="745aa-286">Media Services Concepts</span></span>](media-services-concepts.md)
