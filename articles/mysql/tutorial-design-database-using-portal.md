---
title: "Проектирование первой базы данных Azure для MySQL с помощью портала Azure | Документация Майкрософт"
description: "Это руководство содержит сведения о создании базы данных и сервера базы данных Azure для MySQL и управлении ими с помощью портала Azure."
services: mysql
author: v-chenyh
ms.author: v-chenyh
manager: jhubbard
editor: jasonwhowell
ms.service: mysql
ms.topic: tutorial
ms.date: 06/06/2017
ms.custom: mvc
ms.openlocfilehash: 92ae809646cb956b0b7cb71cf2a21610bb2d610f
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="design-your-first-azure-database-for-mysql-database"></a>Проектирование первой базы данных Azure для MySQL
База данных Azure для MySQL — это управляемая служба, которая позволяет вам запускать, администрировать и масштабировать высокодоступные базы данных MySQL в облаке. С помощью портала Azure можно легко управлять сервером и проектировать базы данных.

Из этого руководства вы узнаете, как с помощью портала Azure выполнять следующие операции:

> [!div class="checklist"]
> * создание базы данных Azure для MySQL;
> * настройка брандмауэра сервера;
> * использование программы командной строки MySQL для создания базы данных;
> * Загрузка примера данных
> * Запрос данных
> * Обновление данных
> * восстановление данных.

## <a name="sign-in-to-the-azure-portal"></a>Выполните вход на портал Azure.
Откройте предпочитаемый веб-браузер и перейдите на [портал Microsoft Azure](https://portal.azure.com/). Введите свои учетные данные для входа на портал. Панель мониторинга службы является представлением по умолчанию.

## <a name="create-an-azure-database-for-mysql-server"></a>Создание сервера базы данных Azure для MySQL
Сервер базы данных Azure для MySQL создается с определенным набором [вычислительных ресурсов и ресурсов хранения](./concepts-compute-unit-and-storage.md). Он создается в [группе ресурсов Azure](https://docs.microsoft.com/en-us/azure/azure-resource-manager/resource-group-overview).

1. Выберите **Базы данных** > **База данных Azure для MySQL**. Если сервер MySQL не отображается в категории **Базы данных**, щелкните **Показать все**, чтобы просмотреть все доступные службы баз данных. Для быстрого поиска службы вы можете также ввести в поле поиска **База данных Azure для MySQL**.
![2.1. Переход к службе MySQL](./media/tutorial-design-database-using-portal/2_1-Navigate-to-MySQL.png)

2. Щелкните элемент **База данных Azure для MySQL**, а затем нажмите кнопку **Создать**.

В нашем примере мы заполним форму базы данных Azure для MySQL, указав следующую информацию:

| **Параметр** | **Рекомендуемое значение** | **Описание поля** |
|---|---|---|
| *Server name* (Имя сервера) | myserver4demo  | Имя сервера должно быть глобально уникальным. |
| *Подписка* | mysubscription | Выберите подписку в раскрывающемся списке. |
| *Группа ресурсов* | myresourcegroup | Создайте новую группу ресурсов или выберите существующую. |
| *Имя для входа администратора сервера* | myadmin | Укажите имя учетной записи администратора. |
| *Пароль* |  | Укажите надежный пароль для учетной записи администратора. |
| *Подтверждение пароля.* |  | Подтвердите пароль учетной записи администратора. |
| *Расположение* |  | Выберите доступный регион. |
| *Версия* | 5.7 | Выберите последнюю версию. |
| *Настройка производительности* | "Базовый", 50 единиц вычислений, 50 ГБ  | Укажите значения для параметров **Ценовая категория**, **Единицы вычислений**, **Хранилище (ГБ)** и нажмите кнопку **ОК**. |
| *Закрепить на панели мониторинга* | Проверка | Рекомендуем установить этот флажок, чтобы ускорить поиск сервера позже |
Затем щелкните **Создать**. Через несколько минут в облаке будет создан сервер базы данных Azure для MySQL. На панели инструментов выберите **Уведомления**, чтобы отслеживать процесс развертывания.

## <a name="configure-firewall"></a>Настройка брандмауэра
Базы данных Azure для MySQL защищены брандмауэром. По умолчанию все подключения к серверу и базам данных на сервере отклоняются. Перед первым подключением к базе данных Azure для MySQL настройте брандмауэр, чтобы добавить IP-адрес общедоступной сети клиентского компьютера (или диапазон IP-адресов).

1. Щелкните созданный сервер и выберите **Безопасность подключения**.
   ![3.1. Безопасность подключения](./media/tutorial-design-database-using-portal/3_1-Connection-security.png)
2. Здесь вы можете **добавить свой IP-адрес** или настроить правила брандмауэра. Не забудьте щелкнуть **Сохранить** после создания правил.
Теперь вы можете подключиться к серверу с помощью программы командной строки MySQL или с помощью инструмента с графическим пользовательским интерфейсом MySQL Workbench.

> [!TIP]
> Сервер базы данных Azure для MySQL обменивается данными через порт 3306. Если вы пытаетесь подключиться из корпоративной сети, исходящий трафик через порт 3306 может быть запрещен сетевым брандмауэром. В таком случае вы не сможете подключиться к серверу MySQL Azure, пока ваш отдел ИТ не откроет порт 3306.

## <a name="get-connection-information"></a>Получение сведений о подключении
Полное **имя сервера** и **имя для входа администратора сервера** для базы данных Azure для сервера MySQL можно получить на портале Azure. Полное имя сервера используется для подключения к серверу с помощью программы командной строки MySQL. 

1. На [портале Azure](https://portal.azure.com/) в меню слева щелкните **Все ресурсы**, введите имя и найдите свой сервер базы данных Azure для MySQL. Выберите имя сервера, чтобы просмотреть сведения о нем.

2. В разделе "Параметры" щелкните **Свойства**. Запишите значения параметров **Имя сервера** и **Имя для входа администратора сервера**. Вы можете нажать кнопку "Копировать" рядом с каждым полем, чтобы скопировать его значение в буфер обмена.
   ![4.2. Свойства сервера](./media/tutorial-design-database-using-portal/4_2-server-properties.png)

В этом примере серверу присвоено имя *myserver4demo.mysql.database.azure.com*, а имя для входа администратора сервера имеет значение *myadmin@myserver4demo*.

## <a name="connect-to-the-server-using-mysql"></a>Подключение к серверу с помощью MySQL
Используйте [программу командной строки MySQL](https://dev.mysql.com/doc/refman/5.7/en/mysql.html), чтобы подключиться к серверу базы данных Azure для MySQL. Можно запустить программу командной строки MySQL из Azure Cloud Shell в браузере или на собственном компьютере, используя локальные инструменты MySQL. Для запуска Azure Cloud Shell нажмите кнопку `Try It` в блоке кода в этой статье или перейдите на портал Azure и щелкните значок `>_` на панели инструментов справа вверху. 

Введите команду для подключения:
```azurecli-interactive
mysql -h myserver4demo.mysql.database.azure.com -u myadmin@myserver4demo -p
```

## <a name="create-a-blank-database"></a>Создание пустой базы данных
Подключившись к серверу, создайте пустую базу данных для работы.
```sql
CREATE DATABASE mysampledb;
```

Выполните следующую команду в командной строке, чтобы подключиться к созданной базе данных:
```sql
USE mysampledb;
```

## <a name="create-tables-in-the-database"></a>Создание таблиц в базе данных
Теперь, когда вы знаете, как подключиться к базе данных Azure для MySQL, рассмотрим, как выполнить некоторые основные задачи.

Сначала можно создать таблицу и заполнить ее некоторыми данными. Давайте создадим таблицу, в которой хранятся данные инвентаризации.
```sql
CREATE TABLE inventory (
    id serial PRIMARY KEY, 
    name VARCHAR(50), 
    quantity INTEGER
);
```

## <a name="load-data-into-the-tables"></a>Загрузка данных в таблицу
Теперь, когда таблица создана, мы можем вставить в нее данные. Чтобы вставить некоторые строки данных, в открытом окне командной строки выполните следующий запрос:
```sql
INSERT INTO inventory (id, name, quantity) VALUES (1, 'banana', 150); 
INSERT INTO inventory (id, name, quantity) VALUES (2, 'orange', 154);
```

Итак, в созданной ранее таблице содержится две строки данных.

## <a name="query-and-update-the-data-in-the-tables"></a>Запрос и обновление данных в таблицах
Чтобы извлечь сведения из таблицы базы данных, выполните приведенный ниже запрос.
```sql
SELECT * FROM inventory;
```

Вы можете также обновить данные в таблицах, выполнив следующую команду:
```sql
UPDATE inventory SET quantity = 200 WHERE name = 'banana';
```

При извлечении данных строка будет обновляться соответствующим образом.
```sql
SELECT * FROM inventory;
```

## <a name="restore-a-database-to-a-previous-point-in-time"></a>Восстановление базы данных до предыдущей точки во времени
Предположим, вы случайно удалили важную таблицу из базы данных и вам не удается легко восстановить данные. База данных Azure для MySQL позволяет восстановить сервер до точки во времени, создав копии баз данных на новом сервере. Вы можете восстановить удаленные данные с помощью нового сервера. Указанные ниже шаги позволяют восстановить сервер до точки во времени, когда была создана таблица.

1. На портале Azure найдите базу данных Azure для MySQL. На странице **Обзор** на панели инструментов щелкните **Восстановить**. Откроется страница "Восстановление".

   ![10.1. Восстановление базы данных](./media/tutorial-design-database-using-portal/10_1-restore-a-db.png)

2. Заполните форму **Восстановление**, указав следующие сведения.
   
   ![10.2. Форма восстановления](./media/tutorial-design-database-using-portal/10_2-restore-form.png)
   
   - **Точка восстановления**. Выберите точку во времени, до которой требуется восстановить данные, в пределах указанного периода времени. Обязательно преобразуйте свое местное время в формат UTC.
   - **Восстановить на новом сервере**. Укажите имя нового сервера, на который нужно восстановить данные.
   - **Расположение**. Регион совпадает с исходным сервером и не может быть изменен.
   - **Ценовая категория**. Ценовая категория совпадает с исходным сервером и не может быть изменена.
   
3. Чтобы [восстановить сервер до точки во времени](./howto-restore-server-portal.md) перед удалением таблицы, нажмите кнопку **OК**. Восстановление сервера приведет к созданию новой копии сервера на заданный момент времени. 

## <a name="next-steps"></a>Дальнейшие действия
Из этого руководства вы узнали, как с помощью портала Azure выполнять следующие операции:

> [!div class="checklist"]
> * создание базы данных Azure для MySQL;
> * настройка брандмауэра сервера;
> * использование программы командной строки MySQL для создания базы данных;
> * Загрузка примера данных
> * Запрос данных
> * Обновление данных
> * восстановление данных.

> [!div class="nextstepaction"]
> [Как подключить приложения к базе данных Azure для MySQL](./howto-connection-string.md)
