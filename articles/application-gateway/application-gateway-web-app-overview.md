---
title: "Обзор поддержки мультитенантных серверных частей в шлюзе приложений Azure | Документация Майкрософт"
description: "На этой странице предоставлен обзор поддержки мультитенантных серверных частей в шлюзе приложений."
documentationcenter: na
services: application-gateway
author: davidmu1
manager: timlt
editor: 
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/26/2017
ms.author: davidmu
ms.openlocfilehash: c29ff60a50e68c75b4e8f62713d6d1fffd2123d6
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="application-gateway-support-for-multi-tenant-back-ends"></a>Поддерживает ли шлюз приложений мультитенантные серверные части

Шлюз приложений Azure поддерживает масштабируемые наборы виртуальных машин, сетевые интерфейсы, частные и общедоступные IP-адреса или полные доменные имена в качестве пулов серверной части. По умолчанию шлюз приложений не изменяет заголовок узла входящих данных HTTP от клиента и без изменений отправляет его на серверную часть. Имеется много служб, таких как [веб-приложения Azure](../app-service/app-service-web-overview.md) и [управление API](../api-management/api-management-key-concepts.md), которые мультитенантны по своей природе и зависят от конкретного заголовка узла или расширения SNI при разрешении в правильную конечную точку. Шлюз приложений теперь позволяет пользователям переопределять заголовок узла входящих данных HTTP на основе параметров серверной части HTTP. Эта возможность включает поддержку веб-приложений Azure и службы управления API с мультитенантными серверными частями. Эта возможность доступна для SKU "Стандартный" и SKU для WAF. Поддержка мультитенантных серверных частей также работает с завершением запросов SSL и сквозным шифрованием SSL.

![сценарий веб-приложения](./media/application-gateway-web-app-overview/scenario.png)

Возможность указывать переопределение узла определяется в параметрах HTTP и может применяться к любому пулу серверной части при создании правила. Мультитенантные серверные части поддерживают два способа переопределения заголовка узла и расширения SNI.

1. Возможность задавать имя узла в качестве фиксированного значения в параметрах HTTP. Эта возможность гарантирует, что заголовок узла переопределяется этим значением для всего трафика в пул серверной части, где применяются параметры HTTP. При использовании сквозного шифрования SSL переопределенное имя узла используется в расширении SNI. Эта возможность позволяет использовать сценарии, где ферма пула серверной части ожидает заголовок узла, который отличается от входящих заголовков узла клиента.

2. Возможность получать имя узла из IP-адреса или полного доменного имени участников пула серверной части. Параметры HTTP также обеспечивают возможность получить имя узла из полного доменного имени участника пула серверной части, если настроена такая возможность. При использовании сквозного шифрования SSL имя узла извлекается из полного доменного имени и используется в расширении SNI. Эта возможность позволяет использовать сценарии с пулами серверной части, которые имеют две или несколько мультитенатных служб PaaS, таких как веб-приложения Azure, и запрашивать заголовок узла для каждого участника, который содержит имя узла, извлеченное из полного доменного имени.

> [!NOTE]
> В обоих случаях выше параметры влияют только на поведение текущего трафика, а не на поведение проверки работоспособности. Пользовательские пробы уже поддерживают возможность указать заголовок узла в конфигурации пробы. Пользовательские пробы теперь также поддерживают возможность извлекать поведение заголовка узла из настроенных в настоящее время параметров HTTP. Эту конфигурацию можно указать с помощью параметра `PickHostNameFromback endAddress` в конфигурации пробы. Для комплексной работы функции и пробы, и параметры HTTP необходимо изменить в соответствии с правильной конфигурацией.

Благодаря этой возможности клиенты настраивают параметры HTTP и пользовательские пробы для соответствующей конфигурации. Этот параметр затем привязывается к прослушивателю и пулу серверной части с помощью правила.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы узнать, как настраивать шлюз приложений с веб-приложением в качестве участника пула серверной части, ознакомьтесь со статьей [Настройка веб-приложений службы приложений с помощью шлюза приложений](application-gateway-web-app-powershell.md).
