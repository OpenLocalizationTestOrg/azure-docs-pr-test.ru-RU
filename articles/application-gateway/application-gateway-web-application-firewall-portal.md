---
title: "Создание или обновление шлюза приложений Azure с добавлением брандмауэра веб-приложения | Документация Майкрософт"
description: "Узнайте, как создать шлюз приложений с брандмауэром веб-приложения с помощью портала."
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: tysonn
tags: azure-resource-manager
ms.assetid: b561a210-ed99-4ab4-be06-b49215e3255a
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: gwallace
ms.openlocfilehash: 650f26d19615d27a94f3947aad7b7904b6c1fabc
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="create-an-application-gateway-with-web-application-firewall-by-using-the-portal"></a><span data-ttu-id="62e3a-103">Создание шлюза приложений с брандмауэром веб-приложения с помощью портала</span><span class="sxs-lookup"><span data-stu-id="62e3a-103">Create an application gateway with web application firewall by using the portal</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="62e3a-104">Портал Azure</span><span class="sxs-lookup"><span data-stu-id="62e3a-104">Azure portal</span></span>](application-gateway-web-application-firewall-portal.md)
> * [<span data-ttu-id="62e3a-105">PowerShell</span><span class="sxs-lookup"><span data-stu-id="62e3a-105">PowerShell</span></span>](application-gateway-web-application-firewall-powershell.md)
> * [<span data-ttu-id="62e3a-106">Интерфейс командной строки Azure</span><span class="sxs-lookup"><span data-stu-id="62e3a-106">Azure CLI</span></span>](application-gateway-web-application-firewall-cli.md)

<span data-ttu-id="62e3a-107">Узнайте, как создать шлюз приложений с брандмауэром веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="62e3a-107">Learn how to create a web application firewall enabled application gateway.</span></span>

<span data-ttu-id="62e3a-108">Брандмауэр веб-приложения (WAF) в шлюзе приложений Azure защищает веб-приложения от таких распространенных сетевых атак, как атаки путем внедрения кода SQL, атаки межсайтовых сценариев и захваты сеанса.</span><span class="sxs-lookup"><span data-stu-id="62e3a-108">The web application firewall (WAF) in Azure Application Gateway protects web applications from common web-based attacks like SQL injection, cross-site scripting attacks, and session hijacks.</span></span> <span data-ttu-id="62e3a-109">Веб-приложение обеспечивает защиту от многих распространенных сетевых уязвимостей в рамках проекта OWASP.</span><span class="sxs-lookup"><span data-stu-id="62e3a-109">Web application protects against many of the OWASP top 10 common web vulnerabilities.</span></span>

## <a name="scenarios"></a><span data-ttu-id="62e3a-110">Сценарии</span><span class="sxs-lookup"><span data-stu-id="62e3a-110">Scenarios</span></span>

<span data-ttu-id="62e3a-111">В этой статье представлено два сценария.</span><span class="sxs-lookup"><span data-stu-id="62e3a-111">In this article there are two scenarios:</span></span>

<span data-ttu-id="62e3a-112">Во первом сценарии рассматривается [создание шлюза приложений с брандмауэром веб-приложения](#create-an-application-gateway-with-web-application-firewall).</span><span class="sxs-lookup"><span data-stu-id="62e3a-112">In the first scenario, you learn to [create an application gateway with web application firewall](#create-an-application-gateway-with-web-application-firewall)</span></span>

<span data-ttu-id="62e3a-113">Во втором сценарии рассматривается [добавление брандмауэра веб-приложения в существующий шлюз приложений](#add-web-application-firewall-to-an-existing-application-gateway).</span><span class="sxs-lookup"><span data-stu-id="62e3a-113">In the second scenario, you learn to [add web application firewall to an existing application gateway](#add-web-application-firewall-to-an-existing-application-gateway).</span></span>

![Пример сценария][scenario]

> [!NOTE]
> <span data-ttu-id="62e3a-115">Дополнительная настройка шлюза приложений, включая пользовательские пробы работоспособности, серверный пул адресов и дополнительные правила, осуществляется после настройки шлюза приложений, а не во время первоначального развертывания.</span><span class="sxs-lookup"><span data-stu-id="62e3a-115">Additional configuration of the application gateway, including custom health probes, backend pool addresses, and additional rules are configured after the application gateway is configured and not during initial deployment.</span></span>

## <a name="before-you-begin"></a><span data-ttu-id="62e3a-116">Перед началом работы</span><span class="sxs-lookup"><span data-stu-id="62e3a-116">Before you begin</span></span>

<span data-ttu-id="62e3a-117">Шлюзу приложений Azure требуется собственная подсеть.</span><span class="sxs-lookup"><span data-stu-id="62e3a-117">Azure Application Gateway requires its own subnet.</span></span> <span data-ttu-id="62e3a-118">При создании виртуальной сети обязательно оставьте достаточно адресного пространства для нескольких подсетей.</span><span class="sxs-lookup"><span data-stu-id="62e3a-118">When creating a virtual network, ensure that you leave enough address space to have multiple subnets.</span></span> <span data-ttu-id="62e3a-119">После развертывания шлюза приложений в подсети в нее можно добавлять только дополнительные шлюзы приложений.</span><span class="sxs-lookup"><span data-stu-id="62e3a-119">Once you deploy an application gateway to a subnet, only additional application gateways are able to be added to the subnet.</span></span>

##<span data-ttu-id="62e3a-120"><a name="add-web-application-firewall-to-an-existing-application-gateway"></a>Добавление брандмауэра веб-приложения в существующий шлюз приложений</span><span class="sxs-lookup"><span data-stu-id="62e3a-120"><a name="add-web-application-firewall-to-an-existing-application-gateway"></a> Add web application firewall to an existing application gateway</span></span>

<span data-ttu-id="62e3a-121">В этом примере существующий шлюз приложений обновляется для поддержки брандмауэра веб-приложения, работающего в режиме предотвращения.</span><span class="sxs-lookup"><span data-stu-id="62e3a-121">This example updates an existing application gateway to support web application firewall in prevention mode.</span></span>

1. <span data-ttu-id="62e3a-122">На портале Azure в области **Избранное** щелкните **Все ресурсы**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-122">In the Azure portal **Favorites** pane, click **All resources**.</span></span> <span data-ttu-id="62e3a-123">Выберите существующий шлюз приложений в колонке **Все ресурсы**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-123">Click the existing Application Gateway in the **All resources** blade.</span></span> <span data-ttu-id="62e3a-124">Если выбранная подписка имеет несколько ресурсов, в поле **Фильтровать по имени...** введите имя,</span><span class="sxs-lookup"><span data-stu-id="62e3a-124">If the subscription you selected already has several resources in it, you can enter the name in the **Filter by name…**</span></span> <span data-ttu-id="62e3a-125">чтобы быстро получить доступ к необходимой зоне DNS.</span><span class="sxs-lookup"><span data-stu-id="62e3a-125">box to easily access the DNS zone.</span></span>

   ![Создание шлюза приложений][1]

1. <span data-ttu-id="62e3a-127">Щелкните **Брандмауэр веб-приложения** и обновите параметры шлюза приложений.</span><span class="sxs-lookup"><span data-stu-id="62e3a-127">Click **Web application firewall** and update the application gateway settings.</span></span> <span data-ttu-id="62e3a-128">По завершении нажмите кнопку **Сохранить**</span><span class="sxs-lookup"><span data-stu-id="62e3a-128">When complete click **Save**</span></span>

    <span data-ttu-id="62e3a-129">Ниже перечислены параметры, позволяющие обновить шлюз приложений для поддержки брандмауэра веб-приложения.</span><span class="sxs-lookup"><span data-stu-id="62e3a-129">The settings to update an existing application gateway to support web application firewall are:</span></span>

   | <span data-ttu-id="62e3a-130">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="62e3a-130">**Setting**</span></span> | <span data-ttu-id="62e3a-131">**Значение**</span><span class="sxs-lookup"><span data-stu-id="62e3a-131">**Value**</span></span> | <span data-ttu-id="62e3a-132">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="62e3a-132">**Details**</span></span>
   |---|---|---|
   |<span data-ttu-id="62e3a-133">**Обновление до уровня WAF**</span><span class="sxs-lookup"><span data-stu-id="62e3a-133">**Upgrade to WAF Tier**</span></span>| <span data-ttu-id="62e3a-134">Флажок установлен</span><span class="sxs-lookup"><span data-stu-id="62e3a-134">Checked</span></span> | <span data-ttu-id="62e3a-135">Этот параметр задает для шлюза приложений уровень WAF.</span><span class="sxs-lookup"><span data-stu-id="62e3a-135">This sets the tier of the application gateway to the WAF tier.</span></span>|
   |<span data-ttu-id="62e3a-136">**Состояние брандмауэра**</span><span class="sxs-lookup"><span data-stu-id="62e3a-136">**Firewall status**</span></span>| <span data-ttu-id="62e3a-137">Включено</span><span class="sxs-lookup"><span data-stu-id="62e3a-137">Enabled</span></span> | <span data-ttu-id="62e3a-138">Этот параметр включает для брандмауэра уровень WAF.</span><span class="sxs-lookup"><span data-stu-id="62e3a-138">This setting enables the firewall on the WAF.</span></span>|
   |<span data-ttu-id="62e3a-139">**Режим брандмауэра**</span><span class="sxs-lookup"><span data-stu-id="62e3a-139">**Firewall mode**</span></span> | <span data-ttu-id="62e3a-140">Предотвращение</span><span class="sxs-lookup"><span data-stu-id="62e3a-140">Prevention</span></span> | <span data-ttu-id="62e3a-141">Этот параметр определяет, как брандмауэр веб-приложения поступает с вредоносным трафиком.</span><span class="sxs-lookup"><span data-stu-id="62e3a-141">This setting is how web application firewall deals with malicious traffic.</span></span> <span data-ttu-id="62e3a-142">В режиме **Обнаружение** события только регистрируются в журнале, тогда как в режиме **Предотвращение** события регистрируются в журнале и останавливается вредоносный трафик.</span><span class="sxs-lookup"><span data-stu-id="62e3a-142">**Detection** mode only logs the events, where **Prevention** mode logs the events and stops the malicious traffic.</span></span>|
   |<span data-ttu-id="62e3a-143">**Набор правил**</span><span class="sxs-lookup"><span data-stu-id="62e3a-143">**Rule set**</span></span>|<span data-ttu-id="62e3a-144">3.0</span><span class="sxs-lookup"><span data-stu-id="62e3a-144">3.0</span></span>|<span data-ttu-id="62e3a-145">Этот параметр определяет [основной набор правил](application-gateway-web-application-firewall-overview.md#core-rule-sets), используемый для защиты элементов внутреннего пула.</span><span class="sxs-lookup"><span data-stu-id="62e3a-145">This setting determines the [core rule set](application-gateway-web-application-firewall-overview.md#core-rule-sets) that is used to protect the backend pool members.</span></span>|
   |<span data-ttu-id="62e3a-146">**Настройка отключенных правил**</span><span class="sxs-lookup"><span data-stu-id="62e3a-146">**Configure disabled rules**</span></span>|<span data-ttu-id="62e3a-147">различные</span><span class="sxs-lookup"><span data-stu-id="62e3a-147">varies</span></span>|<span data-ttu-id="62e3a-148">Чтобы предотвратить возможные ложные срабатывания, этот параметр позволяет отключить определенные [правила и группы правил](application-gateway-crs-rulegroups-rules.md).</span><span class="sxs-lookup"><span data-stu-id="62e3a-148">To prevent possible false positives, this setting allows you to disable certain [rules and rule groups](application-gateway-crs-rulegroups-rules.md).</span></span>|

    >[!NOTE]
    > <span data-ttu-id="62e3a-149">При обновлении существующего шлюза приложений до номера SKU WAF размер SKU изменяется на **Средний**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-149">When upgrading an existing application gateway to the WAF SKU, the SKU size changes to **medium**.</span></span> <span data-ttu-id="62e3a-150">Это можно изменить после завершения настройки.</span><span class="sxs-lookup"><span data-stu-id="62e3a-150">This can be reconfigured after configuration is complete.</span></span>

    ![Колонка основных параметров][2-1]

    > [!NOTE]
    > <span data-ttu-id="62e3a-152">Чтобы иметь возможность просматривать журналы брандмауэра веб-приложения, необходимо включить систему диагностики и выбрать параметр ApplicationGatewayFirewallLog.</span><span class="sxs-lookup"><span data-stu-id="62e3a-152">To view web application firewall logs, diagnostics must be enabled and ApplicationGatewayFirewallLog selected.</span></span> <span data-ttu-id="62e3a-153">Для тестирования можно выбрать число экземпляров, равное 1.</span><span class="sxs-lookup"><span data-stu-id="62e3a-153">An instance count of 1 can be chosen for testing purposes.</span></span> <span data-ttu-id="62e3a-154">Важно знать, что если указать число экземпляров менее двух, то развертывание не попадает под действие соглашения об уровне обслуживания, и поэтому это не рекомендуется.</span><span class="sxs-lookup"><span data-stu-id="62e3a-154">It is important to know that any instance count under two instances is not covered by the SLA and are therefore not recommended.</span></span> <span data-ttu-id="62e3a-155">При использовании брандмауэра веб-приложения шлюзы уровня "Мелкий" недоступны.</span><span class="sxs-lookup"><span data-stu-id="62e3a-155">Small gateways are not available when using web application firewall.</span></span>

## <a name="create-an-application-gateway-with-web-application-firewall"></a><span data-ttu-id="62e3a-156">создание шлюза приложений с брандмауэром веб-приложения</span><span class="sxs-lookup"><span data-stu-id="62e3a-156">Create an application gateway with web application firewall</span></span>

<span data-ttu-id="62e3a-157">Вы узнаете:</span><span class="sxs-lookup"><span data-stu-id="62e3a-157">This scenario will:</span></span>

* <span data-ttu-id="62e3a-158">как создать средний шлюз приложений с брандмауэром веб-приложения и двумя экземплярами;</span><span class="sxs-lookup"><span data-stu-id="62e3a-158">Create a medium web application firewall application gateway with two instances.</span></span>
* <span data-ttu-id="62e3a-159">как создать виртуальную сеть AdatumAppGatewayVNET с зарезервированным блоком CIDR (10.0.0.0/16);</span><span class="sxs-lookup"><span data-stu-id="62e3a-159">Create a virtual network named AdatumAppGatewayVNET with a reserved CIDR block of 10.0.0.0/16.</span></span>
* <span data-ttu-id="62e3a-160">как создать подсеть с именем Appgatewaysubnet и блоком CIDR (10.0.0.0/28);</span><span class="sxs-lookup"><span data-stu-id="62e3a-160">Create a subnet called Appgatewaysubnet that uses 10.0.0.0/28 as its CIDR block.</span></span>
* <span data-ttu-id="62e3a-161">как настроить сертификат для разгрузки SSL.</span><span class="sxs-lookup"><span data-stu-id="62e3a-161">Configure a certificate for SSL offload.</span></span>

1. <span data-ttu-id="62e3a-162">Войдите на [портал Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="62e3a-162">Log in to the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="62e3a-163">Если у вас нет учетной записи, вы можете зарегистрироваться для получения [бесплатной пробной версии на один месяц](https://azure.microsoft.com/free).</span><span class="sxs-lookup"><span data-stu-id="62e3a-163">If you don't already have an account, you can sign up for a [free one-month trial](https://azure.microsoft.com/free)</span></span>
1. <span data-ttu-id="62e3a-164">В области "Избранное" портала нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-164">In the Favorites pane of the portal, click **New**</span></span>
1. <span data-ttu-id="62e3a-165">В колонке **Создать** щелкните **Сети**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-165">In the **New** blade, click **Networking**.</span></span> <span data-ttu-id="62e3a-166">В колонке **Сети** щелкните **Шлюз приложений**, как показано на следующем изображении.</span><span class="sxs-lookup"><span data-stu-id="62e3a-166">In the **Networking** blade, click **Application Gateway**, as shown in the following image:</span></span>
1. <span data-ttu-id="62e3a-167">Перейдите на портал Azure и выберите **Создать** > **Сети** > **Шлюз приложений**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-167">Navigate to the Azure portal, click **New** > **Networking** > **Application Gateway**</span></span>

    ![Создание шлюза приложений][1]

1. <span data-ttu-id="62e3a-169">В открывшейся колонке **Основное** введите приведенные ниже значения и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-169">In the **Basics** blade that appears, enter the following values, then click **OK**:</span></span>

   | <span data-ttu-id="62e3a-170">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="62e3a-170">**Setting**</span></span> | <span data-ttu-id="62e3a-171">**Значение**</span><span class="sxs-lookup"><span data-stu-id="62e3a-171">**Value**</span></span> | <span data-ttu-id="62e3a-172">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="62e3a-172">**Details**</span></span>
   |---|---|---|
   |<span data-ttu-id="62e3a-173">**Имя**</span><span class="sxs-lookup"><span data-stu-id="62e3a-173">**Name**</span></span>|<span data-ttu-id="62e3a-174">AdatumAppGateway</span><span class="sxs-lookup"><span data-stu-id="62e3a-174">AdatumAppGateway</span></span>|<span data-ttu-id="62e3a-175">Имя шлюза приложений.</span><span class="sxs-lookup"><span data-stu-id="62e3a-175">The name of the application gateway</span></span>|
   |<span data-ttu-id="62e3a-176">**Уровень**</span><span class="sxs-lookup"><span data-stu-id="62e3a-176">**Tier**</span></span>|<span data-ttu-id="62e3a-177">WAF</span><span class="sxs-lookup"><span data-stu-id="62e3a-177">WAF</span></span>|<span data-ttu-id="62e3a-178">Доступные значения: "Стандартный" или "WAF".</span><span class="sxs-lookup"><span data-stu-id="62e3a-178">Available values are Standard and WAF.</span></span> <span data-ttu-id="62e3a-179">Ознакомьтесь с [брандмауэром веб-приложения](application-gateway-web-application-firewall-overview.md), чтобы узнать больше о WAF.</span><span class="sxs-lookup"><span data-stu-id="62e3a-179">Visit [web application firewall](application-gateway-web-application-firewall-overview.md) to learn more about WAF.</span></span>|
   |<span data-ttu-id="62e3a-180">**Размер номера SKU**</span><span class="sxs-lookup"><span data-stu-id="62e3a-180">**SKU Size**</span></span>|<span data-ttu-id="62e3a-181">Средний</span><span class="sxs-lookup"><span data-stu-id="62e3a-181">Medium</span></span>|<span data-ttu-id="62e3a-182">При выборе уровня "Стандартный" доступны мелкий, средний и большой размеры.</span><span class="sxs-lookup"><span data-stu-id="62e3a-182">Choices when choosing Standard tier are Small, Medium, and Large.</span></span> <span data-ttu-id="62e3a-183">При выборе уровня "WAF" можно выбрать только средний или большой размер.</span><span class="sxs-lookup"><span data-stu-id="62e3a-183">When choosing WAF tier, options are Medium and Large only.</span></span>|
   |<span data-ttu-id="62e3a-184">**Число экземпляров**</span><span class="sxs-lookup"><span data-stu-id="62e3a-184">**Instance count**</span></span>|<span data-ttu-id="62e3a-185">2</span><span class="sxs-lookup"><span data-stu-id="62e3a-185">2</span></span>|<span data-ttu-id="62e3a-186">Число экземпляров шлюза приложений для обеспечения высокого уровня доступности.</span><span class="sxs-lookup"><span data-stu-id="62e3a-186">Number of instances of the application gateway for high availability.</span></span> <span data-ttu-id="62e3a-187">Количество экземпляров, равное 1, следует использовать только для тестирования.</span><span class="sxs-lookup"><span data-stu-id="62e3a-187">Instance counts of 1 should only be used for testing purposes.</span></span>|
   |<span data-ttu-id="62e3a-188">**Подписка**</span><span class="sxs-lookup"><span data-stu-id="62e3a-188">**Subscription**</span></span>|<span data-ttu-id="62e3a-189">[Ваша подписка]</span><span class="sxs-lookup"><span data-stu-id="62e3a-189">[Your subscription]</span></span>|<span data-ttu-id="62e3a-190">Выберите подписку для создания шлюза приложений.</span><span class="sxs-lookup"><span data-stu-id="62e3a-190">Select a subscription to create the application gateway in.</span></span>|
   |<span data-ttu-id="62e3a-191">**Группа ресурсов**</span><span class="sxs-lookup"><span data-stu-id="62e3a-191">**Resource group**</span></span>|<span data-ttu-id="62e3a-192">**Создать:** AdatumAppGatewayRG</span><span class="sxs-lookup"><span data-stu-id="62e3a-192">**Create new:** AdatumAppGatewayRG</span></span>|<span data-ttu-id="62e3a-193">Создайте группу ресурсов.</span><span class="sxs-lookup"><span data-stu-id="62e3a-193">Create a resource group.</span></span> <span data-ttu-id="62e3a-194">Имя группы ресурсов должно быть уникальным в пределах выбранной подписки.</span><span class="sxs-lookup"><span data-stu-id="62e3a-194">The resource group name must be unique within the subscription you selected.</span></span> <span data-ttu-id="62e3a-195">Дополнительные сведения о группах ресурсов см. в разделе [Группы ресурсов](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fapplication-gateway%2ftoc.json#resource-groups) статьи "Общие сведения об Azure Resource Manager".</span><span class="sxs-lookup"><span data-stu-id="62e3a-195">To learn more about resource groups, read the [Resource Manager](../azure-resource-manager/resource-group-overview.md?toc=%2fazure%2fapplication-gateway%2ftoc.json#resource-groups) overview article.</span></span>|
   |<span data-ttu-id="62e3a-196">**Расположение**</span><span class="sxs-lookup"><span data-stu-id="62e3a-196">**Location**</span></span>|<span data-ttu-id="62e3a-197">Запад США</span><span class="sxs-lookup"><span data-stu-id="62e3a-197">West US</span></span>||

   ![Колонка основных параметров][2-2]

1. <span data-ttu-id="62e3a-199">В колонке **Параметры**, которая отображается под областью **Виртуальная сеть**, щелкните **Выберите виртуальную сеть**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-199">In the **Settings** blade that appears under **Virtual network**, click **Choose a virtual network**.</span></span> <span data-ttu-id="62e3a-200">Откроется колонка **Выбрать виртуальную сеть**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-200">This step opens enter the **Choose virtual network** blade.</span></span>  <span data-ttu-id="62e3a-201">Щелкните **Создать**, чтобы открыть колонку **Создание виртуальной сети**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-201">Click **Create new** to open the **Create virtual network** blade.</span></span>

   ![Выбор виртуальной сети][2]

1. <span data-ttu-id="62e3a-203">В колонке **Создание виртуальной сети** введите приведенные ниже значения и нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-203">On the **Create virtual network blade** enter the following values, then click **OK**.</span></span> <span data-ttu-id="62e3a-204">Колонки **Создать виртуальную сеть** и **Выбрать виртуальную сеть** закроются.</span><span class="sxs-lookup"><span data-stu-id="62e3a-204">This step closes the **Create virtual network** and **Choose virtual network** blades.</span></span> <span data-ttu-id="62e3a-205">В поле **Подсеть** в колонке **Параметры** будет указана выбранная подсеть.</span><span class="sxs-lookup"><span data-stu-id="62e3a-205">This populates the **Subnet** field on the **Settings** blade with the subnet chosen.</span></span>

   |<span data-ttu-id="62e3a-206">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="62e3a-206">**Setting**</span></span> | <span data-ttu-id="62e3a-207">**Значение**</span><span class="sxs-lookup"><span data-stu-id="62e3a-207">**Value**</span></span> | <span data-ttu-id="62e3a-208">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="62e3a-208">**Details**</span></span> |
   |---|---|---|
   |<span data-ttu-id="62e3a-209">**Имя**</span><span class="sxs-lookup"><span data-stu-id="62e3a-209">**Name**</span></span>|<span data-ttu-id="62e3a-210">AdatumAppGatewayVNET</span><span class="sxs-lookup"><span data-stu-id="62e3a-210">AdatumAppGatewayVNET</span></span>|<span data-ttu-id="62e3a-211">Имя шлюза приложений.</span><span class="sxs-lookup"><span data-stu-id="62e3a-211">Name of the application gateway</span></span>|
   |<span data-ttu-id="62e3a-212">**Адресное пространство**</span><span class="sxs-lookup"><span data-stu-id="62e3a-212">**Address Space**</span></span>|<span data-ttu-id="62e3a-213">10.0.0.0/16</span><span class="sxs-lookup"><span data-stu-id="62e3a-213">10.0.0.0/16</span></span>| <span data-ttu-id="62e3a-214">Это адресное пространство виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="62e3a-214">This value is the address space for the virtual network</span></span>|
   |<span data-ttu-id="62e3a-215">**Имя подсети**</span><span class="sxs-lookup"><span data-stu-id="62e3a-215">**Subnet name**</span></span>|<span data-ttu-id="62e3a-216">AppGatewaySubnet</span><span class="sxs-lookup"><span data-stu-id="62e3a-216">AppGatewaySubnet</span></span>|<span data-ttu-id="62e3a-217">Имя подсети для шлюза приложений.</span><span class="sxs-lookup"><span data-stu-id="62e3a-217">Name of the subnet for the application gateway</span></span>|
   |<span data-ttu-id="62e3a-218">**Диапазон адресов подсети**</span><span class="sxs-lookup"><span data-stu-id="62e3a-218">**Subnet address range**</span></span>|<span data-ttu-id="62e3a-219">10.0.0.0/28</span><span class="sxs-lookup"><span data-stu-id="62e3a-219">10.0.0.0/28</span></span> | <span data-ttu-id="62e3a-220">Эта подсеть позволяет создать дополнительные подсети в виртуальной сети для членов внутреннего пула.</span><span class="sxs-lookup"><span data-stu-id="62e3a-220">This subnet allows more additional subnets in the virtual network for backend pool members</span></span>|

1. <span data-ttu-id="62e3a-221">В колонке **Параметры** в разделе **Интерфейсная IP-конфигурация** выберите для параметра **Тип IP-адреса** значение **Общедоступный**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-221">On the **Settings** blade under **Frontend IP configuration**, choose **Public** as the **IP address type**</span></span>

1. <span data-ttu-id="62e3a-222">В колонке **Параметры** в разделе **Общедоступный IP-адрес** щелкните **Choose a public IP address** (Выбрать общедоступный IP-адрес). Откроется колонка **Choose a public IP address** (Выбрать общедоступный IP-адрес). Щелкните **Создать**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-222">On the **Settings** blade under **Public IP address**, click **Choose a public IP address**, this step opens the **Choose public IP address** blade, click **Create new**.</span></span>

   ![Выбор общедоступного IP-адреса][3]

1. <span data-ttu-id="62e3a-224">В колонке **Создать общедоступный IP-адрес** примите значение по умолчанию и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-224">On the **Create public IP address** blade, accept the default value, and click **OK**.</span></span> <span data-ttu-id="62e3a-225">Колонки **Choose public IP address** (Выбрать общедоступный IP-адрес) и **Создать общедоступный IP-адрес** закроются, а в поле **Общедоступный IP-адрес** будет указан выбранный общедоступный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="62e3a-225">This step closes the **Choose public IP address** blade, the **Create public IP address** blade, and populate **Public IP address** with the public IP address chosen.</span></span>

1. <span data-ttu-id="62e3a-226">В колонке **Параметры** в разделе **Конфигурация прослушивателя** для параметра **Протокол** щелкните **HTTPS**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-226">On the **Settings** blade under **Listener configuration**, click **HTTP** under **Protocol**.</span></span> <span data-ttu-id="62e3a-227">Например, для использования **HTTPS**требуется сертификат.</span><span class="sxs-lookup"><span data-stu-id="62e3a-227">To use **https**, a certificate is required.</span></span> <span data-ttu-id="62e3a-228">Нужен закрытый ключ сертификата, поэтому необходимо предоставить экспортированный PFX-файл сертификата и пароль для него.</span><span class="sxs-lookup"><span data-stu-id="62e3a-228">The private key of the certificate is needed so a .pfx export of the certificate needs to be provided and the password for the file.</span></span>

1. <span data-ttu-id="62e3a-229">Настройте определенные параметры **WAF** .</span><span class="sxs-lookup"><span data-stu-id="62e3a-229">Configure the **WAF** specific settings.</span></span>

   |<span data-ttu-id="62e3a-230">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="62e3a-230">**Setting**</span></span> | <span data-ttu-id="62e3a-231">**Значение**</span><span class="sxs-lookup"><span data-stu-id="62e3a-231">**Value**</span></span> | <span data-ttu-id="62e3a-232">**Дополнительные сведения**</span><span class="sxs-lookup"><span data-stu-id="62e3a-232">**Details**</span></span> |
   |---|---|---|
   |<span data-ttu-id="62e3a-233">**Состояние брандмауэра**</span><span class="sxs-lookup"><span data-stu-id="62e3a-233">**Firewall status**</span></span>| <span data-ttu-id="62e3a-234">Включено</span><span class="sxs-lookup"><span data-stu-id="62e3a-234">Enabled</span></span>| <span data-ttu-id="62e3a-235">Этот параметр позволяет включить или отключить WAF.</span><span class="sxs-lookup"><span data-stu-id="62e3a-235">This setting turns WAF on or off.</span></span>|
   |<span data-ttu-id="62e3a-236">**Режим брандмауэра**</span><span class="sxs-lookup"><span data-stu-id="62e3a-236">**Firewall mode**</span></span> | <span data-ttu-id="62e3a-237">Предотвращение</span><span class="sxs-lookup"><span data-stu-id="62e3a-237">Prevention</span></span>| <span data-ttu-id="62e3a-238">Этот параметр определяет действия, предпринимаемые WAF в отношении вредоносного трафика.</span><span class="sxs-lookup"><span data-stu-id="62e3a-238">This setting determines the actions WAF takes on malicious traffic.</span></span> <span data-ttu-id="62e3a-239">Если выбран режим **Обнаружение**, то трафик только регистрируются в журнале.</span><span class="sxs-lookup"><span data-stu-id="62e3a-239">If **Detection** is chosen, traffic is only logged.</span></span>  <span data-ttu-id="62e3a-240">Если выбран режим **Предотвращение**, то трафик регистрируется в журнале и останавливается с выводом ответа "403 — не авторизовано".</span><span class="sxs-lookup"><span data-stu-id="62e3a-240">If **Prevention** is chosen, traffic is logged and stopped with a 403 Unauthorized response.</span></span>|


1. <span data-ttu-id="62e3a-241">Просмотрите страницу сводки и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="62e3a-241">Review the Summary page and click **OK**.</span></span>  <span data-ttu-id="62e3a-242">Теперь шлюз приложений поставлен в очередь и создан.</span><span class="sxs-lookup"><span data-stu-id="62e3a-242">Now the application gateway is queued up and created.</span></span>

1. <span data-ttu-id="62e3a-243">После создания шлюза приложений перейдите к нему на портале, чтобы продолжить настройку шлюза параметров.</span><span class="sxs-lookup"><span data-stu-id="62e3a-243">Once the application gateway has been created, navigate to it in the portal to continue configuration of the application gateway.</span></span>

    ![Представление ресурса шлюза приложений][10]

<span data-ttu-id="62e3a-245">В результате выполнения этих действий создается базовый шлюз приложений с параметрами по умолчанию для прослушивателя, серверного пула, протокола HTTP серверной части и правил.</span><span class="sxs-lookup"><span data-stu-id="62e3a-245">These steps create a basic application gateway with default settings for the listener, backend pool, backend http settings, and rules.</span></span> <span data-ttu-id="62e3a-246">Вы сможете изменить эти параметры в соответствии с развертыванием после успешного завершения подготовки.</span><span class="sxs-lookup"><span data-stu-id="62e3a-246">You can modify these settings to suit your deployment once the provisioning is successful</span></span>

> [!NOTE]
> <span data-ttu-id="62e3a-247">Для защиты шлюзов приложений, созданных с помощью базовой конфигурации брандмауэра веб-приложения, настраивается CRS 3.0.</span><span class="sxs-lookup"><span data-stu-id="62e3a-247">Application gateways created with the basic web application firewall configuration are configured with CRS 3.0 for protections.</span></span>

## <a name="next-steps"></a><span data-ttu-id="62e3a-248">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="62e3a-248">Next steps</span></span>

<span data-ttu-id="62e3a-249">Далее вы можете узнать, как настроить псевдоним личного домена для [общедоступного IP-адреса](../dns/dns-custom-domain.md#public-ip-address) с помощью Azure DNS или другого поставщика DNS.</span><span class="sxs-lookup"><span data-stu-id="62e3a-249">Next, you can learn how to configure a custom domain alias for the [public IP address](../dns/dns-custom-domain.md#public-ip-address) using Azure DNS or another DNS provider.</span></span>

<span data-ttu-id="62e3a-250">Узнайте, как настроить ведение журнала диагностики и как регистрировать в журнале события, которые обнаружил или предотвратил брандмауэр веб-приложения, посетив страницу [Мониторинг работоспособности серверной части, ведение журнала диагностики и метрики для шлюза приложений](application-gateway-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="62e3a-250">Learn how to configure diagnostic logging, to log the events that are detected or prevented with web application firewall by visiting [Application Gateway Diagnostics](application-gateway-diagnostics.md)</span></span>

<span data-ttu-id="62e3a-251">Узнайте, как создавать пользовательские пробы работоспособности, посетив страницу [Create a custom probe for Application Gateway by using the portal](application-gateway-create-probe-portal.md)</span><span class="sxs-lookup"><span data-stu-id="62e3a-251">Learn how to create custom health probes by visiting [Create a custom health probe](application-gateway-create-probe-portal.md)</span></span>

<span data-ttu-id="62e3a-252">Узнайте, как настроить разгрузку SSL и убрать дорогостоящее шифрование SSL с веб-серверов, посетив страницу [Настройка шлюза приложений для разгрузки SSL с помощью диспетчера ресурсов Azure](application-gateway-ssl-portal.md)</span><span class="sxs-lookup"><span data-stu-id="62e3a-252">Learn how to configure SSL Offloading and take the costly SSL decryption off your web servers by visiting [Configure SSL Offload](application-gateway-ssl-portal.md)</span></span>

<!--Image references-->
[1]: ./media/application-gateway-web-application-firewall-portal/figure1.png
[2]: ./media/application-gateway-web-application-firewall-portal/figure2.png
[2-1]: ./media/application-gateway-web-application-firewall-portal/figure2-1.png
[2-2]: ./media/application-gateway-web-application-firewall-portal/figure2-2.png
[3]: ./media/application-gateway-web-application-firewall-portal/figure3.png
[10]: ./media/application-gateway-web-application-firewall-portal/figure10.png
[scenario]: ./media/application-gateway-web-application-firewall-portal/scenario.png
