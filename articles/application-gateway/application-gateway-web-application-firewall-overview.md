---
title: "брандмауэр приложения tooweb aaaIntroduction (WAF) для шлюза приложения Azure | Документы Microsoft"
description: "На этой странице представлен обзор брандмауэра веб-приложения на шлюзе приложений."
documentationcenter: na
services: application-gateway
author: amsriva
manager: rossort
editor: amsriva
ms.assetid: 04b362bc-6653-4765-86f6-55ee8ec2a0ff
ms.service: application-gateway
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 05/03/2017
ms.author: amsriva
ms.openlocfilehash: 5a42ce0fb2bd12a391844099e2de8fa2571195e6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="web-application-firewall-waf"></a><span data-ttu-id="cbba5-103">Брандмауэр веб-приложения (WAF)</span><span class="sxs-lookup"><span data-stu-id="cbba5-103">Web application firewall (WAF)</span></span>

<span data-ttu-id="cbba5-104">Брандмауэр веб-приложения (WAF) — это компонент шлюза приложений, обеспечивающий централизованную защиту веб-приложений от распространенных эксплойтов и уязвимостей.</span><span class="sxs-lookup"><span data-stu-id="cbba5-104">Web application firewall (WAF) is a feature of Application Gateway that provides centralized protection of your web applications from common exploits and vulnerabilities.</span></span> 

<span data-ttu-id="cbba5-105">Брандмауэр веб-приложения основан на правилах из hello [наборов правил core OWASP](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 2.2.9 или 3.0.</span><span class="sxs-lookup"><span data-stu-id="cbba5-105">Web application firewall is based on rules from hello [OWASP core rule sets](https://www.owasp.org/index.php/Category:OWASP_ModSecurity_Core_Rule_Set_Project) 3.0 or 2.2.9.</span></span> <span data-ttu-id="cbba5-106">Веб-приложения все чаще подвергаются вредоносным атакам, использующим общеизвестные уязвимости.</span><span class="sxs-lookup"><span data-stu-id="cbba5-106">Web applications are increasingly targets of malicious attacks that exploit common known vulnerabilities.</span></span> <span data-ttu-id="cbba5-107">Совместно эти эксплойтов атак путем внедрения кода SQL, межузловых сценариев атак tooname несколько.</span><span class="sxs-lookup"><span data-stu-id="cbba5-107">Common among these exploits are SQL injection attacks, cross site scripting attacks tooname a few.</span></span> <span data-ttu-id="cbba5-108">Таких атак в код приложения может быть сложной и может потребоваться жесткое обслуживания, исправления и мониторинг на нескольких уровнях Топология приложения hello.</span><span class="sxs-lookup"><span data-stu-id="cbba5-108">Preventing such attacks in application code can be challenging and may require rigorous maintenance, patching and monitoring at multiple layers of hello application topology.</span></span> <span data-ttu-id="cbba5-109">Брандмауэр централизованного веб-приложения помогает упростить управление безопасностью и Администраторы повышения надежности tooapplication от угроз или вторжения.</span><span class="sxs-lookup"><span data-stu-id="cbba5-109">A centralized web application firewall helps make security management much simpler and gives better assurance tooapplication administrators against threats or intrusions.</span></span> <span data-ttu-id="cbba5-110">Решение WAF также реагировать угрозу безопасности tooa быстрее путем применения исправлений известные уязвимости в центральном расположении и обеспечения безопасности каждого отдельного веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="cbba5-110">A WAF solution can also react tooa security threat faster by patching a known vulnerability at a central location versus securing each of individual web applications.</span></span> <span data-ttu-id="cbba5-111">Существующие шлюзы приложений может быть легко преобразованный tooa веб-приложение включен брандмауэр приложения шлюза.</span><span class="sxs-lookup"><span data-stu-id="cbba5-111">Existing application gateways can be converted tooa web application firewall enabled application gateway easily.</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/WAF1.png)

<span data-ttu-id="cbba5-113">Шлюз приложений работает в качестве приложения доставки контроллера и предложения завершение запросов SSL сходство сеансов на основе файлов cookie, распределения нагрузки с циклическим перебором, маршрутизация на основе содержимого, toohost возможность многочисленные улучшения, связанные веб-сайтов и безопасности.</span><span class="sxs-lookup"><span data-stu-id="cbba5-113">Application Gateway operates as an application delivery controller and offers SSL termination, cookie-based session affinity, round-robin load distribution, content-based routing, ability toohost multiple websites and security enhancements.</span></span> <span data-ttu-id="cbba5-114">Усовершенствования системы безопасности, предоставляемые шлюза приложения включают управление политиками SSL, tooend окончания поддержки SSL.</span><span class="sxs-lookup"><span data-stu-id="cbba5-114">Security enhancements offered by Application Gateway include SSL policy management, end tooend SSL support.</span></span> <span data-ttu-id="cbba5-115">Безопасность приложений теперь усиленное WAF (брандмауэр веб-приложения) непосредственно интегрируется в предложение hello Соединитель Active Directory.</span><span class="sxs-lookup"><span data-stu-id="cbba5-115">Application security is now strengthened by WAF (web application firewall) being directly integrated into hello ADC offering.</span></span> <span data-ttu-id="cbba5-116">Это обеспечивает центральное расположение легко tooconfigure toomanage и защитить веб-приложений от общих веб-уязвимостей.</span><span class="sxs-lookup"><span data-stu-id="cbba5-116">This provides an easy tooconfigure central location toomanage and protect your web applications against common web vulnerabilities.</span></span>

## <a name="benefits"></a><span data-ttu-id="cbba5-117">Преимущества</span><span class="sxs-lookup"><span data-stu-id="cbba5-117">Benefits</span></span>

<span data-ttu-id="cbba5-118">Здесь представлены Hello hello основных преимуществ, которые предоставляют брандмауэр шлюз приложений и веб-приложения:</span><span class="sxs-lookup"><span data-stu-id="cbba5-118">hello following are hello core benefits that Application Gateway and web application firewall provide:</span></span>

### <a name="protection"></a><span data-ttu-id="cbba5-119">Защита</span><span class="sxs-lookup"><span data-stu-id="cbba5-119">Protection</span></span>

* <span data-ttu-id="cbba5-120">Веб-приложения защиты от атак без изменения кода toobackend и веб-уязвимостей.</span><span class="sxs-lookup"><span data-stu-id="cbba5-120">Protect your web application from web vulnerabilities and attacks without modification toobackend code.</span></span>

* <span data-ttu-id="cbba5-121">Защита нескольких web приложений на hello одновременную за шлюз приложений.</span><span class="sxs-lookup"><span data-stu-id="cbba5-121">Protect multiple web applications at hello same time behind an application gateway.</span></span> <span data-ttu-id="cbba5-122">Шлюз приложений поддерживает размещение вверх too20 веб-сайтов за все могут быть защищены от атак с WAF что один шлюз.</span><span class="sxs-lookup"><span data-stu-id="cbba5-122">Application gateway supports hosting up too20 websites behind a single gateway that could all be protected against web attacks with WAF.</span></span>

### <a name="monitoring"></a><span data-ttu-id="cbba5-123">Мониторинг</span><span class="sxs-lookup"><span data-stu-id="cbba5-123">Monitoring</span></span>

* <span data-ttu-id="cbba5-124">Выполняйте мониторинг веб-приложения для защиты от атак, используя журнал WAF в режиме реального времени.</span><span class="sxs-lookup"><span data-stu-id="cbba5-124">Monitor your web application against attacks using a real-time WAF log.</span></span> <span data-ttu-id="cbba5-125">Этот журнал интегрирован с [монитора Azure](../monitoring-and-diagnostics/monitoring-overview.md) tootrack WAF оповещения и журналы и легко отслеживать тенденции.</span><span class="sxs-lookup"><span data-stu-id="cbba5-125">This log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md) tootrack WAF alerts and logs and easily monitor trends.</span></span>

* <span data-ttu-id="cbba5-126">Скоро WAF будет интегрирован с центром безопасности Azure.</span><span class="sxs-lookup"><span data-stu-id="cbba5-126">WAF will be integrated with Azure Security Center soon.</span></span> <span data-ttu-id="cbba5-127">Центр безопасности Azure позволяет операциям hello состояние безопасности всех ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="cbba5-127">Azure Security Center allows for a central view of hello security state of all your Azure resources.</span></span>

### <a name="customization"></a><span data-ttu-id="cbba5-128">Настройка</span><span class="sxs-lookup"><span data-stu-id="cbba5-128">Customization</span></span>

* <span data-ttu-id="cbba5-129">Hello возможности toocustomize WAF правил и правила группы toosuit требований приложения и избежать ложных положительных результатов.</span><span class="sxs-lookup"><span data-stu-id="cbba5-129">hello ability toocustomize WAF rules and rule groups toosuit your application requirements and eliminate false positives.</span></span>

## <a name="features"></a><span data-ttu-id="cbba5-130">Функции</span><span class="sxs-lookup"><span data-stu-id="cbba5-130">Features</span></span>

<span data-ttu-id="cbba5-131">Брандмауэр веб-приложения поставляется с предварительно настроенным CRS 3.0 по умолчанию или можно выбрать toouse 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="cbba5-131">Web application firewall comes preconfigured with CRS 3.0 by default or you can choose toouse 2.2.9.</span></span> <span data-ttu-id="cbba5-132">В предложениях CR 3.0 сократилось число ложноположительных результатов по сравнению с CR 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="cbba5-132">CRS 3.0 offers reduced false positives over 2.2.9.</span></span> <span data-ttu-id="cbba5-133">Здравствуйте возможность слишком[настроить правила toosuit потребностями](application-gateway-customize-waf-rules-portal.md) предоставляется.</span><span class="sxs-lookup"><span data-stu-id="cbba5-133">hello ability too[customize rules toosuit your needs](application-gateway-customize-waf-rules-portal.md) is provided.</span></span> <span data-ttu-id="cbba5-134">Некоторые из распространенных web уязвимостей hello какие брандмауэр веб-приложения обеспечивает защиту от включает в себя:</span><span class="sxs-lookup"><span data-stu-id="cbba5-134">Some of hello common web vulnerabilities which web application firewall protects against includes:</span></span>

* <span data-ttu-id="cbba5-135">Защита от внедрения кода SQL.</span><span class="sxs-lookup"><span data-stu-id="cbba5-135">SQL injection protection</span></span>
* <span data-ttu-id="cbba5-136">Защита от межсайтовых сценариев.</span><span class="sxs-lookup"><span data-stu-id="cbba5-136">Cross site scripting protection</span></span>
* <span data-ttu-id="cbba5-137">Защита от распространенных сетевых атак, в том числе от внедрения команд, несанкционированных HTTP-запросов, разделения HTTP-запросов и атак с включением удаленного файла.</span><span class="sxs-lookup"><span data-stu-id="cbba5-137">Common Web Attacks Protection such as command injection, HTTP request smuggling, HTTP response splitting, and remote file inclusion attack</span></span>
* <span data-ttu-id="cbba5-138">Защита от нарушений протокола HTTP.</span><span class="sxs-lookup"><span data-stu-id="cbba5-138">Protection against HTTP protocol violations</span></span>
* <span data-ttu-id="cbba5-139">Защита от аномалий протокола HTTP, например отсутствия агента пользователя узла и заголовков accept.</span><span class="sxs-lookup"><span data-stu-id="cbba5-139">Protection against HTTP protocol anomalies such as missing host user-agent and accept headers</span></span>
* <span data-ttu-id="cbba5-140">Защита от программ-роботов, программ-обходчиков и сканеров.</span><span class="sxs-lookup"><span data-stu-id="cbba5-140">Prevention against bots, crawlers, and scanners</span></span>
* <span data-ttu-id="cbba5-141">Обнаружение распространенных неправильных конфигураций приложений (Apache, IIS и т. д.).</span><span class="sxs-lookup"><span data-stu-id="cbba5-141">Detection of common application misconfigurations (i.e. Apache, IIS, etc.)</span></span>

<span data-ttu-id="cbba5-142">Более подробный список правил и их защиты см. ниже hello [основные наборы правил](#core-rule-sets).</span><span class="sxs-lookup"><span data-stu-id="cbba5-142">For a more detailed list of rules and their protections see hello following [Core rule sets](#core-rule-sets).</span></span>

### <a name="core-rule-sets"></a><span data-ttu-id="cbba5-143">Основные наборы правил</span><span class="sxs-lookup"><span data-stu-id="cbba5-143">Core rule sets</span></span>

<span data-ttu-id="cbba5-144">Шлюз приложений поддерживает два набора правил: CRS 3.0 и CRS 2.2.9.</span><span class="sxs-lookup"><span data-stu-id="cbba5-144">Application Gateway supports two rule sets, CRS 3.0, and CRS 2.2.9.</span></span> <span data-ttu-id="cbba5-145">Это основные наборы правил, защищающие веб-приложения от вредоносных действий.</span><span class="sxs-lookup"><span data-stu-id="cbba5-145">These core rules sets are collections of rules that protect your web applications for malicious activity.</span></span>

#### <a name="owasp30"></a><span data-ttu-id="cbba5-146">OWASP_3.0</span><span class="sxs-lookup"><span data-stu-id="cbba5-146">OWASP_3.0</span></span>

<span data-ttu-id="cbba5-147">в предоставленном наборе правил core Hello 3.0 имеет 13 группы правил, как показано в следующей таблице hello.</span><span class="sxs-lookup"><span data-stu-id="cbba5-147">hello 3.0 core rule set provided has 13 rule groups as shown in hello following table.</span></span> <span data-ttu-id="cbba5-148">Каждая из этих групп правил содержит несколько правил, которые могут быть отключены.</span><span class="sxs-lookup"><span data-stu-id="cbba5-148">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="cbba5-149">Группа правил</span><span class="sxs-lookup"><span data-stu-id="cbba5-149">RuleGroup</span></span>|<span data-ttu-id="cbba5-150">Описание</span><span class="sxs-lookup"><span data-stu-id="cbba5-150">Description</span></span>|
|---|---|
|<span data-ttu-id="cbba5-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-151">**[REQUEST-910-IP-REPUTATION](application-gateway-crs-rulegroups-rules.md#crs910)**</span></span>|<span data-ttu-id="cbba5-152">Содержит правила tooprotect от известных нежелательных сообщений или вредоносных действий.</span><span class="sxs-lookup"><span data-stu-id="cbba5-152">Contains rules tooprotect against known spammers or malicious activity.</span></span>|
|<span data-ttu-id="cbba5-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-153">**[REQUEST-911-METHOD-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs911)**</span></span>|<span data-ttu-id="cbba5-154">Содержит правила toolock списка методов (PUT, PATCH <..)</span><span class="sxs-lookup"><span data-stu-id="cbba5-154">Contains rules toolock down methods (PUT, PATCH< ..)</span></span>|
|<span data-ttu-id="cbba5-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-155">**[REQUEST-912-DOS-PROTECTION](application-gateway-crs-rulegroups-rules.md#crs912)**</span></span>| <span data-ttu-id="cbba5-156">Содержит правила tooprotect от атак отказа в обслуживании (DoS).</span><span class="sxs-lookup"><span data-stu-id="cbba5-156">Contains rules tooprotect against Denial of Service (DoS) attacks.</span></span>|
|<span data-ttu-id="cbba5-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-157">**[REQUEST-913-SCANNER-DETECTION](application-gateway-crs-rulegroups-rules.md#crs913)**</span></span>| <span data-ttu-id="cbba5-158">Содержит правила tooprotect от сканеры порт и среды.</span><span class="sxs-lookup"><span data-stu-id="cbba5-158">Contains rules tooprotect against port and environment scanners.</span></span>|
|<span data-ttu-id="cbba5-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-159">**[REQUEST-920-PROTOCOL-ENFORCEMENT](application-gateway-crs-rulegroups-rules.md#crs920)**</span></span>|<span data-ttu-id="cbba5-160">Содержит правила tooprotect от протокола и кодирование проблемы.</span><span class="sxs-lookup"><span data-stu-id="cbba5-160">Contains rules tooprotect against protocol and encoding issues.</span></span>|
|<span data-ttu-id="cbba5-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-161">**[REQUEST-921-PROTOCOL-ATTACK](application-gateway-crs-rulegroups-rules.md#crs921)**</span></span>|<span data-ttu-id="cbba5-162">Содержит правила tooprotect от внедрения заголовка, несанкционированном запроса и с разделением ответа</span><span class="sxs-lookup"><span data-stu-id="cbba5-162">Contains rules tooprotect against header injection, request smuggling, and response splitting</span></span>|
|<span data-ttu-id="cbba5-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-163">**[REQUEST-930-APPLICATION-ATTACK-LFI](application-gateway-crs-rulegroups-rules.md#crs930)**</span></span>|<span data-ttu-id="cbba5-164">Содержит правила tooprotect против атак, путь и имя файла.</span><span class="sxs-lookup"><span data-stu-id="cbba5-164">Contains rules tooprotect against file and path attacks.</span></span>|
|<span data-ttu-id="cbba5-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-165">**[REQUEST-931-APPLICATION-ATTACK-RFI](application-gateway-crs-rulegroups-rules.md#crs931)**</span></span>|<span data-ttu-id="cbba5-166">Содержит правила tooprotect от удаленного включения файлов (RFI)</span><span class="sxs-lookup"><span data-stu-id="cbba5-166">Contains rules tooprotect against Remote File Inclusion (RFI)</span></span>|
|<span data-ttu-id="cbba5-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-167">**[REQUEST-932-APPLICATION-ATTACK-RCE](application-gateway-crs-rulegroups-rules.md#crs932)**</span></span>|<span data-ttu-id="cbba5-168">Содержит правила tooprotect снова удаленное выполнение кода.</span><span class="sxs-lookup"><span data-stu-id="cbba5-168">Contains rules tooprotect again Remote Code Execution.</span></span>|
|<span data-ttu-id="cbba5-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-169">**[REQUEST-933-APPLICATION-ATTACK-PHP](application-gateway-crs-rulegroups-rules.md#crs933)**</span></span>|<span data-ttu-id="cbba5-170">Содержит правила tooprotect от атак путем внедрения кода PHP.</span><span class="sxs-lookup"><span data-stu-id="cbba5-170">Contains rules tooprotect against PHP injection attacks.</span></span>|
|<span data-ttu-id="cbba5-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-171">**[REQUEST-941-APPLICATION-ATTACK-XSS](application-gateway-crs-rulegroups-rules.md#crs941)**</span></span>|<span data-ttu-id="cbba5-172">Содержит правила, обеспечивающие защиту от выполнения межсайтовых сценариев.</span><span class="sxs-lookup"><span data-stu-id="cbba5-172">Contains rules for protecting against cross site scripting.</span></span>|
|<span data-ttu-id="cbba5-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-173">**[REQUEST-942-APPLICATION-ATTACK-SQLI](application-gateway-crs-rulegroups-rules.md#crs942)**</span></span>|<span data-ttu-id="cbba5-174">Содержит правила, обеспечивающие защиту от атак путем внедрения кода SQL.</span><span class="sxs-lookup"><span data-stu-id="cbba5-174">Contains rules for protecting against SQL injection attacks.</span></span>|
|<span data-ttu-id="cbba5-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-175">**[REQUEST-943-APPLICATION-ATTACK-SESSION-FIXATION](application-gateway-crs-rulegroups-rules.md#crs943)**</span></span>|<span data-ttu-id="cbba5-176">Содержит правила tooprotect от атак Fixation сеанса.</span><span class="sxs-lookup"><span data-stu-id="cbba5-176">Contains rules tooprotect against Session Fixation Attacks.</span></span>|

#### <a name="owasp229"></a><span data-ttu-id="cbba5-177">OWASP_2.2.9</span><span class="sxs-lookup"><span data-stu-id="cbba5-177">OWASP_2.2.9</span></span>

<span data-ttu-id="cbba5-178">в предоставленном наборе правил core Hello 2.2.9 имеет 10 групп правил, как показано в следующей таблице hello.</span><span class="sxs-lookup"><span data-stu-id="cbba5-178">hello 2.2.9 core rule set provided has 10 rule groups as shown in hello following table.</span></span> <span data-ttu-id="cbba5-179">Каждая из этих групп правил содержит несколько правил, которые могут быть отключены.</span><span class="sxs-lookup"><span data-stu-id="cbba5-179">Each of these rule groups contains multiple rules, which can be disabled.</span></span>

|<span data-ttu-id="cbba5-180">Группа правил</span><span class="sxs-lookup"><span data-stu-id="cbba5-180">RuleGroup</span></span>|<span data-ttu-id="cbba5-181">Описание</span><span class="sxs-lookup"><span data-stu-id="cbba5-181">Description</span></span>|
|---|---|
|<span data-ttu-id="cbba5-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-182">**[crs_20_protocol_violations](application-gateway-crs-rulegroups-rules.md#crs20)**</span></span>|<span data-ttu-id="cbba5-183">Содержит правила tooprotect от нарушения протокола (недопустимые знаки, GET текст запроса, и т. д.)</span><span class="sxs-lookup"><span data-stu-id="cbba5-183">Contains rules tooprotect against protocol violations (invalid characters, GET with a request body, etc.)</span></span>|
|<span data-ttu-id="cbba5-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-184">**[crs_21_protocol_anomalies](application-gateway-crs-rulegroups-rules.md#crs21)**</span></span>|<span data-ttu-id="cbba5-185">Содержит правила tooprotect со сведениями неправильный заголовок.</span><span class="sxs-lookup"><span data-stu-id="cbba5-185">Contains rules tooprotect against incorrect header information.</span></span>|
|<span data-ttu-id="cbba5-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-186">**[crs_23_request_limits](application-gateway-crs-rulegroups-rules.md#crs23)**</span></span>|<span data-ttu-id="cbba5-187">Содержит правила tooprotect от аргументов или файлы, которые превышают ограничения.</span><span class="sxs-lookup"><span data-stu-id="cbba5-187">Contains rules tooprotect against arguments or files that exceed limitations.</span></span>|
|<span data-ttu-id="cbba5-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-188">**[crs_30_http_policy](application-gateway-crs-rulegroups-rules.md#crs30)**</span></span>|<span data-ttu-id="cbba5-189">Содержит правила tooprotect от запрещенных методов, заголовки и типы файлов.</span><span class="sxs-lookup"><span data-stu-id="cbba5-189">Contains rules tooprotect against restricted methods, headers, and file types.</span></span> |
|<span data-ttu-id="cbba5-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-190">**[crs_35_bad_robots](application-gateway-crs-rulegroups-rules.md#crs35)**</span></span>|<span data-ttu-id="cbba5-191">Содержит правила tooprotect от программ-обходчиков и сканеры.</span><span class="sxs-lookup"><span data-stu-id="cbba5-191">Contains rules tooprotect against web crawlers and scanners.</span></span>|
|<span data-ttu-id="cbba5-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-192">**[crs_40_generic_attacks](application-gateway-crs-rulegroups-rules.md#crs40)**</span></span>|<span data-ttu-id="cbba5-193">Содержит правила tooprotect универсального атак (fixation сеанса, включение удаленных файлов, внедрение PHP, и т. д.)</span><span class="sxs-lookup"><span data-stu-id="cbba5-193">Contains rules tooprotect against generic attacks (session fixation, remote file inclusion, PHP injection, etc.)</span></span>|
|<span data-ttu-id="cbba5-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-194">**[crs_41_sql_injection_attacks](application-gateway-crs-rulegroups-rules.md#crs41sql)**</span></span>|<span data-ttu-id="cbba5-195">Содержит правила tooprotect от атак путем внедрения кода SQL</span><span class="sxs-lookup"><span data-stu-id="cbba5-195">Contains rules tooprotect against SQL injection attacks</span></span>|
|<span data-ttu-id="cbba5-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-196">**[crs_41_xss_attacks](application-gateway-crs-rulegroups-rules.md#crs41xss)**</span></span>|<span data-ttu-id="cbba5-197">Содержит правила tooprotect от межсайтовых сценариев.</span><span class="sxs-lookup"><span data-stu-id="cbba5-197">Contains rules tooprotect against cross site scripting.</span></span>|
|<span data-ttu-id="cbba5-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-198">**[crs_42_tight_security](application-gateway-crs-rulegroups-rules.md#crs42)**</span></span>|<span data-ttu-id="cbba5-199">Содержит правила tooprotect от атак путем обхода</span><span class="sxs-lookup"><span data-stu-id="cbba5-199">Contains a rule tooprotect against path traversal attacks</span></span>|
|<span data-ttu-id="cbba5-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span><span class="sxs-lookup"><span data-stu-id="cbba5-200">**[crs_45_trojans](application-gateway-crs-rulegroups-rules.md#crs45)**</span></span>|<span data-ttu-id="cbba5-201">Содержит правила tooprotect от программы-трояны.</span><span class="sxs-lookup"><span data-stu-id="cbba5-201">Contains rules tooprotect against backdoor Trojans.</span></span>|

### <a name="waf-modes"></a><span data-ttu-id="cbba5-202">Режимы WAF</span><span class="sxs-lookup"><span data-stu-id="cbba5-202">WAF Modes</span></span>

<span data-ttu-id="cbba5-203">WAF шлюза приложения может быть настроенный toorun в hello, следующие два режима:</span><span class="sxs-lookup"><span data-stu-id="cbba5-203">Application Gateway WAF can be configured toorun in hello following two modes:</span></span>

* <span data-ttu-id="cbba5-204">**Режим обнаружения** — когда toorun, настроенного в режиме обнаружения, WAF шлюза приложения отслеживает и регистрирует все оповещения в файле журнала tooa.</span><span class="sxs-lookup"><span data-stu-id="cbba5-204">**Detection mode** – When configured toorun in detection mode, Application Gateway WAF monitors and logs all threat alerts in tooa log file.</span></span> <span data-ttu-id="cbba5-205">Ведение журнала диагностики для шлюза приложения должна быть включена с помощью hello **диагностики** раздела.</span><span class="sxs-lookup"><span data-stu-id="cbba5-205">Logging diagnostics for Application Gateway should be turned on using hello **Diagnostics** section.</span></span> <span data-ttu-id="cbba5-206">Необходимо также tooensure, hello WAF журнала выбран и включен.</span><span class="sxs-lookup"><span data-stu-id="cbba5-206">You also need tooensure that hello WAF log is selected and turned on.</span></span> <span data-ttu-id="cbba5-207">В режиме обнаружения брандмауэр веб-приложения не блокирует входящие запросы.</span><span class="sxs-lookup"><span data-stu-id="cbba5-207">When running in detection mode web application firewall does not block incoming requests.</span></span>
* <span data-ttu-id="cbba5-208">**Режим предотвращения** — блокировании toorun, настроенного в режиме защиты от шлюза приложений активно несанкционированного проникновения и атак на его правила.</span><span class="sxs-lookup"><span data-stu-id="cbba5-208">**Prevention mode** – When configured toorun in prevention mode, Application Gateway actively blocks intrusions and attacks detected by its rules.</span></span> <span data-ttu-id="cbba5-209">Hello злоумышленник получает 403 об исключении несанкционированного доступа и hello соединение будет разорвано.</span><span class="sxs-lookup"><span data-stu-id="cbba5-209">hello attacker receives a 403 unauthorized access exception and hello connection is terminated.</span></span> <span data-ttu-id="cbba5-210">Режим предотвращения продолжается в журналах hello WAF toolog подобных атак.</span><span class="sxs-lookup"><span data-stu-id="cbba5-210">Prevention mode continues toolog such attacks in hello WAF logs.</span></span>

### <span data-ttu-id="cbba5-211"><a name="application-gateway-waf-reports"></a>Мониторинг WAF</span><span class="sxs-lookup"><span data-stu-id="cbba5-211"><a name="application-gateway-waf-reports"></a>WAF Monitoring</span></span>

<span data-ttu-id="cbba5-212">Очень важно следить за hello работоспособности шлюза приложения.</span><span class="sxs-lookup"><span data-stu-id="cbba5-212">Monitoring hello health of your application gateway is important.</span></span> <span data-ttu-id="cbba5-213">Наблюдение за работоспособностью hello веб-приложение брандмауэра и hello приложений, которые он защищает обеспечивается ведение журнала и интеграцию с монитора Azure, Центр безопасности Azure (ожидается в ближайшее время) и служба аналитики журналов.</span><span class="sxs-lookup"><span data-stu-id="cbba5-213">Monitoring hello health of your web application firewall and hello applications that it protects are provided through logging and integration with Azure Monitor, Azure Security Center (coming soon), and Log Analytics.</span></span>

![диагностика](./media/application-gateway-web-application-firewall-overview/diagnostics.png)

#### <a name="azure-monitor"></a><span data-ttu-id="cbba5-215">Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="cbba5-215">Azure Monitor</span></span>

<span data-ttu-id="cbba5-216">Каждый журнал шлюза приложений интегрирован с [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cbba5-216">Each application gateway log is integrated with [Azure Monitor](../monitoring-and-diagnostics/monitoring-overview.md).</span></span>  <span data-ttu-id="cbba5-217">Это позволяет tootrack диагностические сведения, включая журналы и оповещения WAF.</span><span class="sxs-lookup"><span data-stu-id="cbba5-217">This allows you tootrack diagnostic information including WAF alerts and logs.</span></span>  <span data-ttu-id="cbba5-218">Эта возможность предоставляется в рамках hello ресурсов шлюза приложения hello портале в разделе hello **диагностики** вкладке или непосредственно через hello Azure монитор службы.</span><span class="sxs-lookup"><span data-stu-id="cbba5-218">This capability is provided within hello Application Gateway resource in hello portal under hello **Diagnostics** tab or through hello Azure Monitor service directly.</span></span> <span data-ttu-id="cbba5-219">Дополнительные сведения о включении журналов диагностики для шлюза приложения посетите toolearn [диагностику шлюза приложения](application-gateway-diagnostics.md)</span><span class="sxs-lookup"><span data-stu-id="cbba5-219">toolearn more about enabling diagnostic logs for application gateway visit [Application Gateway diagnostics](application-gateway-diagnostics.md)</span></span>

#### <a name="azure-security-center"></a><span data-ttu-id="cbba5-220">Центр безопасности Azure</span><span class="sxs-lookup"><span data-stu-id="cbba5-220">Azure Security Center</span></span>

<span data-ttu-id="cbba5-221">[Центр безопасности Azure](../security-center/security-center-intro.md) помогает предотвратить, обнаружить и вернуть toothreats Повышенная видимость и контроль над hello безопасность ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="cbba5-221">[Azure Security Center](../security-center/security-center-intro.md) helps you prevent, detect, and respond toothreats with increased visibility into and control over hello security of your Azure resources.</span></span> <span data-ttu-id="cbba5-222">Шлюз приложений теперь [интегрируется в центр безопасности Azure](application-gateway-integration-security-center.md).</span><span class="sxs-lookup"><span data-stu-id="cbba5-222">Application gateway now [integrates into Azure Security Center](application-gateway-integration-security-center.md).</span></span> <span data-ttu-id="cbba5-223">Azure центр обеспечения безопасности проверяет среды toodetect защиту веб-приложений.</span><span class="sxs-lookup"><span data-stu-id="cbba5-223">Azure Security Center scans your environment toodetect unprotected web applications.</span></span> <span data-ttu-id="cbba5-224">Теперь он, tooprotect WAF шлюза приложения может рекомендовать эти ресурсы уязвимым.</span><span class="sxs-lookup"><span data-stu-id="cbba5-224">It can now recommend application gateway WAF tooprotect these vulnerable resources.</span></span> <span data-ttu-id="cbba5-225">WAF шлюза приложения можно создавать напрямую из центра безопасности Azure hello.</span><span class="sxs-lookup"><span data-stu-id="cbba5-225">You can directly create application gateway WAF from hello Azure Security Center.</span></span>  <span data-ttu-id="cbba5-226">Эти экземпляры WAF интегрированы с центром обеспечения безопасности Azure и будет отправлять оповещения и сведения о работоспособности обратно tooAzure центра обеспечения безопасности для отчетов.</span><span class="sxs-lookup"><span data-stu-id="cbba5-226">These WAF instances are integrated with Azure Security Center and will send alerts and health information back tooAzure Security Center for reporting.</span></span>

![Рисунок 1](./media/application-gateway-web-application-firewall-overview/figure1.png)

#### <a name="logging"></a><span data-ttu-id="cbba5-228">Ведение журналов</span><span class="sxs-lookup"><span data-stu-id="cbba5-228">Logging</span></span>

<span data-ttu-id="cbba5-229">WAF шлюза приложений предоставляет подробные отчеты о каждой из обнаруженных угроз.</span><span class="sxs-lookup"><span data-stu-id="cbba5-229">Application Gateway WAF provides detailed reporting on each threat it detects.</span></span> <span data-ttu-id="cbba5-230">Функция ведения журналов интегрирована с журналами системы диагностики Azure, и оповещения записываются в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="cbba5-230">Logging is integrated with Azure Diagnostics logs and alerts are recorded in a json format.</span></span> <span data-ttu-id="cbba5-231">Эти журналы можно интегрировать с [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="cbba5-231">These logs can be integrated with [Log Analytics](../log-analytics/log-analytics-azure-networking-analytics.md).</span></span>

![imageURLroute](./media/application-gateway-web-application-firewall-overview/waf2.png)

```json
{
  "resourceId": "/SUBSCRIPTIONS/{subscriptionId}/RESOURCEGROUPS/{resourceGroupId}/PROVIDERS/MICROSOFT.NETWORK/APPLICATIONGATEWAYS/{appGatewayName}",
  "operationName": "ApplicationGatewayFirewall",
  "time": "2017-03-20T15:52:09.1494499Z",
  "category": "ApplicationGatewayFirewallLog",
  "properties": {
    "instanceId": "ApplicationGatewayRole_IN_0",
    "clientIp": "104.210.252.3",
    "clientPort": "4835",
    "requestUri": "/?a=%3Cscript%3Ealert(%22Hello%22);%3C/script%3E",
    "ruleSetType": "OWASP",
    "ruleSetVersion": "3.0",
    "ruleId": "941320",
    "message": "Possible XSS Attack Detected - HTML Tag Handler",
    "action": "Blocked",
    "site": "Global",
    "details": {
      "message": "Warning. Pattern match \"<(a|abbr|acronym|address|applet|area|audioscope|b|base|basefront|bdo|bgsound|big|blackface|blink|blockquote|body|bq|br|button|caption|center|cite|code|col|colgroup|comment|dd|del|dfn|dir|div|dl|dt|em|embed|fieldset|fn|font|form|frame|frameset|h1|head|h ...\" at ARGS:a.",
      "data": "Matched Data: <script> found within ARGS:a: <script>alert(\\x22hello\\x22);</script>",
      "file": "rules/REQUEST-941-APPLICATION-ATTACK-XSS.conf",
      "line": "865"
    }
  }
} 

```

## <a name="application-gateway-waf-sku-pricing"></a><span data-ttu-id="cbba5-233">Цена на SKU для WAF шлюза приложений</span><span class="sxs-lookup"><span data-stu-id="cbba5-233">Application Gateway WAF SKU pricing</span></span>

<span data-ttu-id="cbba5-234">Брандмауэр веб-приложения предоставляется в новом номере SKU WAF.</span><span class="sxs-lookup"><span data-stu-id="cbba5-234">Web application firewall is available under a new a WAF SKU.</span></span> <span data-ttu-id="cbba5-235">Этот номер SKU доступен только в модели инициализации диспетчера ресурсов Azure, а не в разделе hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="cbba5-235">This SKU is available only in Azure Resource Manager provisioning model and not under hello classic deployment model.</span></span> <span data-ttu-id="cbba5-236">Кроме того, в пределах номера SKU WAF поставляются только экземпляры шлюза приложений среднего и крупного размера.</span><span class="sxs-lookup"><span data-stu-id="cbba5-236">Additionally WAF SKU comes only in medium and large application gateway instance sizes.</span></span> <span data-ttu-id="cbba5-237">Все ограничения hello для шлюза приложения также применяются toohello WAF SKU.</span><span class="sxs-lookup"><span data-stu-id="cbba5-237">All hello limits for application gateway also apply toohello WAF SKU.</span></span> <span data-ttu-id="cbba5-238">Цена зависит от почасовой стоимости использования экземпляра шлюза и стоимости обработки данных.</span><span class="sxs-lookup"><span data-stu-id="cbba5-238">Pricing is based on per hour gateway instance charge and data processing charge.</span></span> <span data-ttu-id="cbba5-239">Почасовая стоимость использования номера SKU WAF и стандартного номера SKU отличается. Дополнительные сведения см. на [странице цен на шлюз приложений](https://azure.microsoft.com/pricing/details/application-gateway/).</span><span class="sxs-lookup"><span data-stu-id="cbba5-239">Per hour gateway pricing for WAF SKU is different from Standard SKU charges and can be found at [Application Gateway pricing details](https://azure.microsoft.com/pricing/details/application-gateway/).</span></span> <span data-ttu-id="cbba5-240">При обработке данных остаются расходов hello таким же.</span><span class="sxs-lookup"><span data-stu-id="cbba5-240">Data processing charges remain hello same.</span></span> <span data-ttu-id="cbba5-241">Плата за правило или группу правил отсутствует.</span><span class="sxs-lookup"><span data-stu-id="cbba5-241">There is no per rule or rule group charges.</span></span> <span data-ttu-id="cbba5-242">Чтобы защитить несколько веб-приложений за hello же веб-приложение брандмауэра и отсутствуют дополнительные накладные расходы для поддержки нескольких приложений.</span><span class="sxs-lookup"><span data-stu-id="cbba5-242">You can protect multiple web applications behind hello same web application firewall and there are no additional charges for supporting multiple applications.</span></span> 

<span data-ttu-id="cbba5-243">Выставление счетов для WAF эффективно начинается 5/5/2017 г., пока затем hello шлюзы WAF SKU продолжает взиматься стандартные тарифы toobe.</span><span class="sxs-lookup"><span data-stu-id="cbba5-243">Billing for WAF starts effectively 5/5/2017, until then hello WAF SKU gateways continues toobe charged at standard rates.</span></span>

## <a name="next-steps"></a><span data-ttu-id="cbba5-244">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="cbba5-244">Next steps</span></span>

<span data-ttu-id="cbba5-245">После изучения возможностей hello WAF, посетите [как tooconfigure веб-приложение брандмауэра на использование шлюза приложений](application-gateway-web-application-firewall-portal.md).</span><span class="sxs-lookup"><span data-stu-id="cbba5-245">After learning more about hello capabilities of WAF, visit [How tooconfigure web application firewall on Application Gateway](application-gateway-web-application-firewall-portal.md).</span></span>

