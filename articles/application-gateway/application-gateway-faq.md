---
title: "вопросы и ответы для шлюза приложения Azure aaaFrequently | Документы Microsoft"
description: "Эта страница содержит ответы toofrequently вопросы и ответы о шлюзе приложения Azure"
documentationcenter: na
services: application-gateway
author: georgewallace
manager: timlt
editor: tysonn
ms.assetid: d54ee7ec-4d6b-4db7-8a17-6513fda7e392
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/19/2017
ms.author: gwallace
ms.openlocfilehash: b2df3a82a71a3264d3d34d317d08e4b4f72c6e3e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="frequently-asked-questions-for-application-gateway"></a>Часто задаваемые вопросы о шлюзе приложений

## <a name="general"></a>Общие сведения

**В. Что такое шлюз приложений?**

Шлюз приложений Azure является контроллером доставки приложений (ADC) как услуг, предлагающих для приложений разные функции балансировки нагрузки уровня 7. Это высокодоступная и масштабируемая служба, которая полностью управляется Azure.

**В. Какие функции поддерживает шлюз приложений?**

Шлюз приложений поддерживает SSL разгрузки и окончания tooend SSL, брандмауэр веб-приложения, сходство сеансов на основе файлов cookie, URL-адрес основанную на пути маршрутизации, размещение нескольких сайта и другим пользователям. Полный список поддерживаемых функций см. на сайте [tooApplication введение шлюза](application-gateway-introduction.md)

**В. Что такое hello различие между шлюзом приложения и подсистемы балансировки нагрузки Azure?**

Шлюз приложений — балансировщик нагрузки уровня 7. Это означает, что он работает только с веб-трафиком (HTTP, HTTPS и WebSocket). Он поддерживает такие функции, как завершение SSL-подключений, сопоставление сеансов на основе файлов cookie и циклический перебор для распределения нагрузки трафика. С балансировщиком нагрузки доступна балансировка трафика уровня 4 (протоколы TCP и UDP).

**В. Какие протоколы поддерживает шлюз приложений?**

Шлюз приложений поддерживает протоколы HTTP, HTTPS и WebSocket.

**В. Какие ресурсы в настоящее время поддерживаются как часть серверного пула?**

Внутренние пулы могут состоять из сетевых адаптеров, масштабируемых наборов виртуальных машин, общедоступных IP-адресов, внутренних IP-адресов, полных доменных имен и таких мультитенантых серверных частей, как веб-приложения Azure. Приложения шлюзов, которые члены серверной пул не привязан tooan группы доступности. Они могут располагаться в кластерах, центрах обработки данных или за пределами портала Azure, пока у них есть возможность подключения по IP.

**В. Какие регионы доступна служба hello в?**

Шлюз приложений доступен во всех регионах глобальной платформы Azure. Он также доступен в [Azure для Китая](https://www.azure.cn/) и [Azure для государственных организаций](https://azure.microsoft.com/en-us/overview/clouds/government/).

**В. Это специальное развертывание для подписки или общее для всех клиентов?**

Шлюз приложений — это специальное развертывание в вашей виртуальной сети.

**В. Поддерживается ли перенаправление протоколов HTTP -> HTTPS?**

Перенаправление поддерживается. Посетите [Обзор перенаправления шлюза приложения](application-gateway-redirect-overview.md) toolearn дополнительные.

**В. В каком порядке обрабатываются прослушиватели?**

Прослушиватели, обрабатываются в порядке hello, в котором они отображаются. Поэтому если основной прослушиватель соответствует поступившему запросу, он обработает этот запрос первым.  Прослушиватели нескольких сайтов должны быть настроены перед трафика tooensure основные прослушивателя — перенаправленное toohello правильный серверной части.

**В. Где найти IP-адрес и DNS-имя шлюза приложений?**

При использовании общедоступный IP-адрес в качестве конечной точки, эти сведения можно найти на hello открытого ресурса IP-адреса или на страницу обзора hello для hello шлюза приложения hello портала. Для внутренних IP-адресов это можно найти на странице Обзор hello.

**В. Hello IP-адрес или DNS изменяется за время жизни hello hello шлюз приложений?**

Hello виртуальных IP-адресов можно изменить при остановке и запуске клиентом hello hello шлюза. над жизненным циклом hello шлюза hello Hello DNS, связанной со шлюзом приложений не изменяется. По этой причине рекомендуется toouse псевдоним CNAME и укажите в нем toohello DNS-адрес шлюза приложения hello.

**В. Поддерживает ли шлюз приложений статические IP-адреса?**

Нет, шлюз приложений не поддерживает статические общедоступные IP-адреса, но поддерживает статические внутренние.

**В. Шлюз приложений поддерживает несколько общих IP-адресов для hello шлюза?**

Шлюз приложений поддерживает только один общедоступный IP-адрес.

**В. Поддерживает ли шлюз приложений заголовки X-Forwarded-For?**

Да, шлюз приложений вставляет x перенаправленных-, пересылаемые proto x, и пересылаются порт x заголовков в запросе hello пересылаются toohello серверной части. Hello формат для заголовка x перенаправленных для — список разделенных запятой IP: Port. Hello допустимые значения для пересылки proto x: http или https. Пересылаемые порт X указывает порт hello по запросу какие hello, достигнут на hello шлюз приложений.

**В. Как долго требуется toodeploy шлюза приложения? Работает ли шлюз приложений во время обновления?**

Новые развертывания шлюза приложения может занять tooprovision too20 минут. Изменения tooinstance размера или числа объектов не нарушают работу и шлюза hello остается активным в течение этого времени.

## <a name="configuration"></a>Конфигурация

**В. Всегда ли шлюз приложений развертывается в виртуальной сети?**

Да, шлюз приложений всегда развертывается в подсети виртуальной сети. Эта подсеть может содержать только шлюзы приложений.

**В. Можно шлюз приложений обращение tooinstances за пределами его виртуальной сети?**

Шлюз приложения могут взаимодействовать tooinstances за пределами hello виртуальной сети, которая находится в, при условии, что имеется IP-подключения. Если планируется toouse внутренних IP-адресов как члены серверной части пула, то оно требует [виртуальную сеть Пиринга](../virtual-network/virtual-network-peering-overview.md) или [VPN-шлюз](../vpn-gateway/vpn-gateway-about-vpngateways.md).

**В. Можно ли развертывать все остальное в подсеть шлюза приложения hello**

Нет, но вы можете развернуть другие шлюзы приложений в подсети hello.

**В. Группы безопасности сети поддерживает подсеть шлюза приложения hello?**

Поддерживает сетевые группы безопасности в подсети шлюза приложения hello hello следующие ограничения.

* Исключения могут быть помещены для входящего трафика на порты 65503 65534 для серверной работоспособности toowork правильно.

* Исходящее подключение к Интернету не может быть заблокировано.

* Необходимо разрешить трафик от hello AzureLoadBalancer тег.

**В. Что такое hello ограничения на использование шлюза приложений Можно ли увеличить эти ограничения?**

Посетите [ограничения шлюза приложения](../azure-subscription-service-limits.md#application-gateway-limits) tooview hello ограничения.

**В. Можно ли использовать шлюз приложений одновременно для внешнего и внутреннего трафика?**

Да, каждый шлюз приложений может иметь один внутренний IP-адрес и один внешний.

**В. Поддерживается ли пиринговая связь между виртуальными сетями?**

Да, поддерживается, что положительно сказывается на балансировке трафика в других виртуальных сетях.

**В. Давайте обсудим tooon локальные серверы при подключении по ExpressRoute или VPN-туннели?**

Да, при условии, что разрешен трафик.

**В. Может ли один серверный пул обслуживать несколько приложений, используя разные порты?**

Поддерживается архитектура микрослужб. Потребуется несколько tooprobe http параметры, настроенные на разные порты.

**В. Поддерживают ли пользовательские пробы подстановочные знаки или регулярные выражения в данных ответа?**

Нет, не поддерживают. 

**В. Как обрабатываются правила?**

Правила обрабатываются в порядке hello, в котором они настроены. Рекомендуется, правила нескольких сайтов настроены перед основные правила tooreduce hello вероятность, что трафик будет направляться неуместные серверной toohello как hello базовое правило будет соответствовать трафик на основании правила для нескольких сайтов предыдущих toohello порта при вычислении.

**В. Как обрабатываются правила?**

Правила обрабатываются в порядке hello, в котором они были созданы. Рекомендуется настроить правила для нескольких сайтов прежде, чем базовые правила. Сначала настроить прослушиватели несколькими сайтами, это снижает вероятность hello, трафик является перенаправленное toohello неуместные серверной части. Эта проблема маршрутизации может происходить при hello базовое правило будет соответствовать трафик на основании правила для нескольких сайтов предыдущих toohello порта при вычислении.

**В. Что означают поля hello узла для пользовательских проб?**

Поле узла указывает hello имя toosend hello модуль проверки для. Применяется только в случае, когда в шлюзе приложений настроено многосайтовое подключение. В противном случае используется значение 127.0.0.1. Это значение отличается от имени узла виртуальной машины и имеет следующий формат: \<протокол\>://\<узел\>:\<порт\>\<путь\>.

**В. Можно ли tooa доступа шлюз приложений белого списка лишь немногие исходного IP-адресов?**

Это можно сделать с помощью групп безопасности сети в подсети шлюза приложений. Hello следующие ограничения должны быть помещены в подсети hello в порядке приоритета hello в списке:

* Разрешить входящий трафик из исходного IP-адреса или диапазона IP-адресов.

* Разрешить входящие запросы от всех источников tooports 65503 65534 для [взаимодействие работоспособности внутренних](application-gateway-diagnostics.md).

* Разрешить входящие зондов подсистемы балансировки нагрузки Azure (тег "AzureLoadBalancer") и входящий трафик виртуального (тег "VirtualNetwork") на hello [NSG](../virtual-network/virtual-networks-nsg.md).

* Запретить весь другой входящий трафик с помощью правила, запрещающего любой трафик.

* Разрешить исходящий трафик toohello Интернет для всех мест назначения.

## <a name="performance"></a>Производительность

**В. Каким образом шлюз приложений поддерживает высокий уровень доступности и масштабируемость?**

Если развернуто два или больше экземпляров, шлюз приложений поддерживает сценарии обеспечения высокой доступности. Azure распределяет эти экземпляры tooensure домены обновления и отказоустойчивости, все экземпляры не приводит к ошибке в hello то же время. Шлюз приложений поддерживает масштабируемости, добавив несколько экземпляров hello одинаковой нагрузки hello tooshare шлюза.

**В. Как добиться сценария аварийного восстановления в центрах обработки данных с помощью шлюза приложений?**

Клиенты могут использовать диспетчер трафика toodistribute трафик через несколько шлюзов приложения в разных центрах обработки данных.

**В. Поддерживается ли автоматическое масштабирование?**

Нет, показатель пропускную способность, можно использовать tooalert, но шлюз приложений при достижении порога. Вручную добавив экземпляры или изменение размера не перезапустить шлюз hello и не влияет на существующие трафика.

**В. Вызывает ли увеличение или уменьшение масштабирования, выполненное вручную, простой?**

Нет, не вызывает. Экземпляры распределяются по доменам сбоя и обновления.

**В. Можно изменить размер экземпляра из среднего toolarge без перебоев в работе?**

Да, Azure распределяет экземпляры по tooensure домены обновления и отказоустойчивости, все экземпляры не приводит к ошибке в hello то же время. Приложение поддерживает шлюза, масштабирование, добавив несколько экземпляров hello одинаковой нагрузки hello tooshare шлюза.

## <a name="ssl-configuration"></a>Настройка SSL

**В. Какие сертификаты поддерживает шлюз приложений?**

Поддерживаются самозаверяющие сертификаты, сертификаты ЦС и групповые. Сертификаты высокой надежности не поддерживаются.

**В. Что такое hello текущего шифров шлюза приложений**

Здесь представлены Hello hello текущего шифров шлюз приложений. Посетите: [Настройка SSL версии политики и комплектов шифров в шлюзе приложения](application-gateway-configure-ssl-policy-powershell.md) toolearn как toocustomize параметры SSL.

- TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384
- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
- TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA
- TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA
- TLS_DHE_RSA_WITH_AES_256_GCM_SHA384
- TLS_DHE_RSA_WITH_AES_128_GCM_SHA256
- TLS_DHE_RSA_WITH_AES_256_CBC_SHA
- TLS_DHE_RSA_WITH_AES_128_CBC_SHA
- TLS_RSA_WITH_AES_256_GCM_SHA384
- TLS_RSA_WITH_AES_128_GCM_SHA256
- TLS_RSA_WITH_AES_256_CBC_SHA256
- TLS_RSA_WITH_AES_128_CBC_SHA256
- TLS_RSA_WITH_AES_256_CBC_SHA
- TLS_RSA_WITH_AES_128_CBC_SHA
- TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384
- TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256
- TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384
- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256
- TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA
- TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA
- TLS_DHE_DSS_WITH_AES_256_CBC_SHA256
- TLS_DHE_DSS_WITH_AES_128_CBC_SHA256
- TLS_DHE_DSS_WITH_AES_256_CBC_SHA
- TLS_DHE_DSS_WITH_AES_128_CBC_SHA
- TLS_RSA_WITH_3DES_EDE_CBC_SHA
- TLS_DHE_DSS_WITH_3DES_EDE_CBC_SHA

**В. Шлюз приложений также поддерживает повторное шифрование трафика toohello серверной?**

Да, разгрузки SSL поддерживает использование шлюза приложений и end tooend SSL, повторно шифрует серверной toohello трафика hello.

**В. Можно настроить версии протокола SSL toocontrol политики SSL?**

Да, можно настроить шлюз приложений toodeny TLS1.0, TLS1.1 и TLS1.2. Протоколы SSL версий 2.0 и 3.0 уже отключены по умолчанию, и их настройки нельзя изменить.

**В. Можно ли настроить комплекты шифров и порядок политик?**

Да, имеется возможность [настроить комплекты шифров](application-gateway-ssl-policy-overview.md). При определении пользовательской политики, необходимо включить хотя бы один из следующих комплектов шифров hello. Шлюз приложений использует управление серверной toofor SHA256.

* TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256 
* TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256
* TLS_DHE_RSA_WITH_AES_128_GCM_SHA256
* TLS_RSA_WITH_AES_128_GCM_SHA256
* TLS_RSA_WITH_AES_256_CBC_SHA256
* TLS_RSA_WITH_AES_128_CBC_SHA256

**В. Какое количество SSL-сертификатов поддерживается?**

Копирование too20 SSL сертификаты поддерживаются.

**В. Сколько сертификатов проверки подлинности поддерживается для повторного шифрования внутренней службы?**

Копирование too10 сертификаты проверки подлинности поддерживаются по умолчанию 5.

**В. Интегрируется ли шлюз приложений с Azure Key Vault изначально?**

Нет, он не интегрируется с этим хранилищем.

## <a name="web-application-firewall-waf-configuration"></a>Настройка брандмауэра веб-приложения (WAF)

**В. Hello WAF SKU предоставляют все функции hello с hello стандартном номере SKU?**

Да, WAF поддерживает все функции hello в стандартном номере SKU hello.

**В. Что такое hello CRS версию, которую поддерживает использование шлюза приложений**

Шлюз приложений поддерживает [2.2.9](application-gateway-crs-rulegroups-rules.md#owasp229) и CRS [3.0](application-gateway-crs-rulegroups-rules.md#owasp30).

**В. Как отслеживать WAF?**

WAF отслеживается с помощью журнала ведения диагностики. Дополнительные сведения см. в статье [Мониторинг работоспособности серверной части, ведение журнала диагностики и метрики для шлюза приложений](application-gateway-diagnostics.md).

**В. Блокирует ли трафик режим обнаружения?**

Нет, режим обнаружения только регистрирует трафик, активирующий правило WAF.

**В. Как настроить правила WAF?**

Да, WAF правила являются настраиваемыми, Дополнительные сведения о том, как toocustomize их посетите [WAF настроить группы правил и правила](application-gateway-customize-waf-rules-portal.md)

**В. Какие правила на сегодняшний день доступны?**

WAF в настоящее время поддерживает CRS [2.2.9](application-gateway-crs-rulegroups-rules.md#owasp229) и [3.0](application-gateway-crs-rulegroups-rules.md#owasp30), предоставляющие базового плана безопасности по отношению к большинство hello первые 10 уязвимостей Привет открыть Web приложения безопасности проекта (OWASP) по следующему адресу [OWASP top 10 уязвимостей](https://www.owasp.org/index.php/Top10#OWASP_Top_10_for_2013)

* Защита от внедрения кода SQL.

* Защита от межсайтовых сценариев.

* Защита от распространенных сетевых атак, в том числе от внедрения команд, несанкционированных HTTP-запросов, разделения HTTP-запросов и атак с включением удаленного файла.

* Защита от нарушений протокола HTTP.

* Защита от аномалий протокола HTTP, например отсутствия агента пользователя узла и заголовков accept.

* Защита от программ-роботов, программ-обходчиков и сканеров.

* Обнаружение распространенных неправильных конфигураций приложений (Apache, IIS и т. д.).

**В. Поддерживает ли WAF также защиту от атак DDoS?**

Нет, не поддерживает.

## <a name="diagnostics-and-logging"></a>Диагностика и ведение журнала

**В. Какие типы журналов доступны для шлюза приложений?**

Для шлюза приложений доступны три журнала. Дополнительные сведения о журналах и других диагностических возможностях см. в статье [Мониторинг работоспособности серверной части, ведение журнала диагностики и метрики для шлюза приложений](application-gateway-diagnostics.md).

- **ApplicationGatewayAccessLog** -журнал доступа hello содержит каждый запрос, переданный переднего плана toohello шлюз приложений. Hello данные включают hello вызывающего IP-адрес, URL-адрес запроса задержки ответа, возвращаемый код байт и выхода из системы. Данные для журнала доступа собираются каждые 300 секунд. Этот журнал содержит одну запись для каждого экземпляра шлюза приложений.
- **ApplicationGatewayPerformanceLog** -журнал производительности hello записывает сведения о производительности для каждого экземпляра всего запроса обслуживания, включая пропускную способность в байтах, обслуживаемых общее количество запросов, количество неудачных запросов, рабочих и нерабочих количество экземпляров серверной части.
- **ApplicationGatewayFirewallLog** -журнала брандмауэра hello содержит запросы, которые регистрируются через режим обнаружения или Предотвращение шлюза приложения, настроенного с брандмауэр веб-приложения.

**В. Как узнать, работоспособны ли участники серверного пула?**

Можно использовать командлет PowerShell hello `Get-AzureRmApplicationGatewayBackendHealth` или проверить работоспособность через портал hello, посетив [диагностики шлюза приложений](application-gateway-diagnostics.md)

**В. Что такое hello политики хранения журналов диагностики hello**

Журналы диагностики учетной записи хранения потока toohello клиентов и клиентов можно задать политику хранения hello, на основе их установки. Также можно отправить журналы диагностики tooan концентратора событий или анализа журналов. Дополнительные сведения см. в статье [Мониторинг работоспособности серверной части, ведение журнала диагностики и метрики для шлюза приложений](application-gateway-diagnostics.md).

**В. Как получить журналы аудита для шлюза приложений?**

Для шлюза приложений доступны журналы аудита. На портале hello щелкните **журнал действий** в колонке hello меню журнала аудита hello tooaccess шлюз приложений. 

**В. Можно ли настроить оповещения с помощью шлюза приложений?**

Да, шлюз приложений поддерживает оповещения, которые настраиваются на основе метрик.  Шлюз приложений в настоящее время имеет показатель «пропускной способности», которая может быть настроенный tooalert. Посетите toolearn более о предупреждениях, [получать уведомления об оповещениях](../monitoring-and-diagnostics/insights-receive-alert-notifications.md).

**В. Запрос работоспособности серверной части возвращает неизвестное состояние. Чем это может быть вызвано?**

Hello наиболее распространенной причиной является серверной toohello доступ заблокирован NSG или пользовательского DNS. Посетите [серверной работоспособности, ведение журнала диагностики и метрики для шлюза приложения](application-gateway-diagnostics.md) toolearn дополнительные.

## <a name="next-steps"></a>Дальнейшие действия

toolearn больше о шлюзе приложения посетите [tooApplication введение шлюза](application-gateway-introduction.md).
