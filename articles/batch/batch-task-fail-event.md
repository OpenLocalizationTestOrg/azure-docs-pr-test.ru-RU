---
title: "Событие сбоя выполнения задачи пакетной службы Azure | Документы Майкрософт"
description: "Справочник по событию сбоя выполнения задачи пакетной службы."
services: batch
author: tamram
manager: timlt
ms.assetid: 
ms.service: batch
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 04/20/2017
ms.author: tamram
ms.openlocfilehash: 08feb4ec34bb1635f8ea744b54a10b677b94ab3e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="task-fail-event"></a><span data-ttu-id="6f10f-103">Событие сбоя выполнения задачи</span><span class="sxs-lookup"><span data-stu-id="6f10f-103">Task fail event</span></span>

 <span data-ttu-id="6f10f-104">Это событие создается, когда задача завершается с ошибкой.</span><span class="sxs-lookup"><span data-stu-id="6f10f-104">This event is emitted when a task completes with a failure.</span></span> <span data-ttu-id="6f10f-105">Сейчас все ненулевые коды выхода считаются ошибками.</span><span class="sxs-lookup"><span data-stu-id="6f10f-105">Currently all nonzero exit codes are considered failures.</span></span> <span data-ttu-id="6f10f-106">Это событие создается *в дополнение к* событию завершения выполнения задачи и может использоваться для определения времени, когда произошел сбой задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-106">This event will be emitted *in addition to* a task complete event and can be used to detect when a task has failed.</span></span>


 <span data-ttu-id="6f10f-107">Ниже приведен пример текста для события сбоя выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-107">The following example shows the body of a task fail event.</span></span>

```
{
    "jobId": "job-0000000001",
    "id": "task-5",
    "taskType": "User",
    "systemTaskVersion": 0,
    "nodeInfo": {
        "poolId": "pool-001",
        "nodeId": "tvm-257509324_1-20160908t162728z"
    },
    "multiInstanceSettings": {
        "numberOfInstances": 1
    },
    "constraints": {
        "maxTaskRetryCount": 2
    },
    "executionInfo": {
        "startTime": "2016-09-08T16:32:23.799Z",
        "endTime": "2016-09-08T16:34:00.666Z",
        "exitCode": 1,
        "retryCount": 2,
        "requeueCount": 0
    }
}
```

|<span data-ttu-id="6f10f-108">Имя элемента</span><span class="sxs-lookup"><span data-stu-id="6f10f-108">Element name</span></span>|<span data-ttu-id="6f10f-109">Тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-109">Type</span></span>|<span data-ttu-id="6f10f-110">Примечания</span><span class="sxs-lookup"><span data-stu-id="6f10f-110">Notes</span></span>|
|------------------|----------|-----------|
|<span data-ttu-id="6f10f-111">jobId</span><span class="sxs-lookup"><span data-stu-id="6f10f-111">jobId</span></span>|<span data-ttu-id="6f10f-112">Строка</span><span class="sxs-lookup"><span data-stu-id="6f10f-112">String</span></span>|<span data-ttu-id="6f10f-113">Идентификатор задания, содержащего задачу.</span><span class="sxs-lookup"><span data-stu-id="6f10f-113">The id of the job containing the task.</span></span>|
|<span data-ttu-id="6f10f-114">id</span><span class="sxs-lookup"><span data-stu-id="6f10f-114">id</span></span>|<span data-ttu-id="6f10f-115">string</span><span class="sxs-lookup"><span data-stu-id="6f10f-115">String</span></span>|<span data-ttu-id="6f10f-116">Идентификатор задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-116">The id of the task.</span></span>|
|<span data-ttu-id="6f10f-117">taskType</span><span class="sxs-lookup"><span data-stu-id="6f10f-117">taskType</span></span>|<span data-ttu-id="6f10f-118">Строка</span><span class="sxs-lookup"><span data-stu-id="6f10f-118">String</span></span>|<span data-ttu-id="6f10f-119">Тип задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-119">The type of the task.</span></span> <span data-ttu-id="6f10f-120">Может быть установлено значение "JobManager", указывающее, что это задача диспетчера заданий, или значение "User", указывающее, что задача не относится к диспетчеру заданий.</span><span class="sxs-lookup"><span data-stu-id="6f10f-120">This can either be 'JobManager' indicating it is a job manager task or 'User' indicating it is not a job manager task.</span></span> <span data-ttu-id="6f10f-121">Это событие не создается для задач подготовки задания, задачи выпуска задания или задач запуска.</span><span class="sxs-lookup"><span data-stu-id="6f10f-121">This event is not emitted for job preparation tasks, job release tasks or start tasks.</span></span>|
|<span data-ttu-id="6f10f-122">systemTaskVersion</span><span class="sxs-lookup"><span data-stu-id="6f10f-122">systemTaskVersion</span></span>|<span data-ttu-id="6f10f-123">Int32</span><span class="sxs-lookup"><span data-stu-id="6f10f-123">Int32</span></span>|<span data-ttu-id="6f10f-124">Это внутренний счетчик повторных попыток для задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-124">This is the internal retry counter on a task.</span></span> <span data-ttu-id="6f10f-125">Пакетная служба может повторить попытку выполнения задачи для преодоления временных неполадок.</span><span class="sxs-lookup"><span data-stu-id="6f10f-125">Internally the Batch service can retry a task to account for transient issues.</span></span> <span data-ttu-id="6f10f-126">В таким неполадкам относятся внутренние ошибки планирования и попытки восстановления из вычислительных узлов в неисправном состоянии.</span><span class="sxs-lookup"><span data-stu-id="6f10f-126">These issues can include internal scheduling errors or attempts to recover from compute nodes in a bad state.</span></span>|
|[<span data-ttu-id="6f10f-127">nodeInfo</span><span class="sxs-lookup"><span data-stu-id="6f10f-127">nodeInfo</span></span>](#nodeInfo)|<span data-ttu-id="6f10f-128">Сложный тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-128">Complex Type</span></span>|<span data-ttu-id="6f10f-129">Содержит сведения о вычислительном узле, где выполнялась задача.</span><span class="sxs-lookup"><span data-stu-id="6f10f-129">Contains information about the compute node on which the task ran.</span></span>|
|[<span data-ttu-id="6f10f-130">multiInstanceSettings</span><span class="sxs-lookup"><span data-stu-id="6f10f-130">multiInstanceSettings</span></span>](#multiInstanceSettings)|<span data-ttu-id="6f10f-131">Сложный тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-131">Complex Type</span></span>|<span data-ttu-id="6f10f-132">Указывает, что задача включает в себя несколько экземпляров и требует несколько вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="6f10f-132">Specifies that the task is a Multi-Instance Task requiring multiple compute nodes.</span></span>  <span data-ttu-id="6f10f-133">Дополнительные сведения см. в статье [multiInstanceSettings](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task).</span><span class="sxs-lookup"><span data-stu-id="6f10f-133">See [multiInstanceSettings](https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task) for details.</span></span>|
|[<span data-ttu-id="6f10f-134">constraints</span><span class="sxs-lookup"><span data-stu-id="6f10f-134">constraints</span></span>](#constraints)|<span data-ttu-id="6f10f-135">Сложный тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-135">Complex Type</span></span>|<span data-ttu-id="6f10f-136">Ограничения выполнения, применяемые к этой задаче.</span><span class="sxs-lookup"><span data-stu-id="6f10f-136">The execution constraints that apply to this task.</span></span>|
|[<span data-ttu-id="6f10f-137">executionInfo</span><span class="sxs-lookup"><span data-stu-id="6f10f-137">executionInfo</span></span>](#executionInfo)|<span data-ttu-id="6f10f-138">Сложный тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-138">Complex Type</span></span>|<span data-ttu-id="6f10f-139">Содержит сведения о выполнении задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-139">Contains information about the execution of the task.</span></span>|

###  <span data-ttu-id="6f10f-140"><a name="nodeInfo"></a> nodeInfo</span><span class="sxs-lookup"><span data-stu-id="6f10f-140"><a name="nodeInfo"></a> nodeInfo</span></span>

|<span data-ttu-id="6f10f-141">Имя элемента</span><span class="sxs-lookup"><span data-stu-id="6f10f-141">Element name</span></span>|<span data-ttu-id="6f10f-142">Тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-142">Type</span></span>|<span data-ttu-id="6f10f-143">Примечания</span><span class="sxs-lookup"><span data-stu-id="6f10f-143">Notes</span></span>|
|------------------|----------|-----------|
|<span data-ttu-id="6f10f-144">poolId</span><span class="sxs-lookup"><span data-stu-id="6f10f-144">poolId</span></span>|<span data-ttu-id="6f10f-145">Строка</span><span class="sxs-lookup"><span data-stu-id="6f10f-145">String</span></span>|<span data-ttu-id="6f10f-146">Идентификатор пула, где выполнялась задача.</span><span class="sxs-lookup"><span data-stu-id="6f10f-146">The id of the pool on which the task ran.</span></span>|
|<span data-ttu-id="6f10f-147">nodeId</span><span class="sxs-lookup"><span data-stu-id="6f10f-147">nodeId</span></span>|<span data-ttu-id="6f10f-148">Строка</span><span class="sxs-lookup"><span data-stu-id="6f10f-148">String</span></span>|<span data-ttu-id="6f10f-149">Идентификатор узла, где выполнялась задача.</span><span class="sxs-lookup"><span data-stu-id="6f10f-149">The id of the node on which the task ran.</span></span>|

###  <span data-ttu-id="6f10f-150"><a name="multiInstanceSettings"></a> multiInstanceSettings</span><span class="sxs-lookup"><span data-stu-id="6f10f-150"><a name="multiInstanceSettings"></a> multiInstanceSettings</span></span>

|<span data-ttu-id="6f10f-151">Имя элемента</span><span class="sxs-lookup"><span data-stu-id="6f10f-151">Element name</span></span>|<span data-ttu-id="6f10f-152">Тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-152">Type</span></span>|<span data-ttu-id="6f10f-153">Примечания</span><span class="sxs-lookup"><span data-stu-id="6f10f-153">Notes</span></span>|
|------------------|----------|-----------|
|<span data-ttu-id="6f10f-154">numberOfInstances</span><span class="sxs-lookup"><span data-stu-id="6f10f-154">numberOfInstances</span></span>|<span data-ttu-id="6f10f-155">Int32</span><span class="sxs-lookup"><span data-stu-id="6f10f-155">Int32</span></span>|<span data-ttu-id="6f10f-156">Число вычислительных узлов, необходимых задаче.</span><span class="sxs-lookup"><span data-stu-id="6f10f-156">The number of compute nodes required by the task.</span></span>|

###  <span data-ttu-id="6f10f-157"><a name="constraints"></a> constraints</span><span class="sxs-lookup"><span data-stu-id="6f10f-157"><a name="constraints"></a> constraints</span></span>

|<span data-ttu-id="6f10f-158">Имя элемента</span><span class="sxs-lookup"><span data-stu-id="6f10f-158">Element name</span></span>|<span data-ttu-id="6f10f-159">Тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-159">Type</span></span>|<span data-ttu-id="6f10f-160">Примечания</span><span class="sxs-lookup"><span data-stu-id="6f10f-160">Notes</span></span>|
|------------------|----------|-----------|
|<span data-ttu-id="6f10f-161">maxTaskRetryCount</span><span class="sxs-lookup"><span data-stu-id="6f10f-161">maxTaskRetryCount</span></span>|<span data-ttu-id="6f10f-162">Int32</span><span class="sxs-lookup"><span data-stu-id="6f10f-162">Int32</span></span>|<span data-ttu-id="6f10f-163">Максимальное количество повторных попыток для задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-163">The maximum number of times the task may be retried.</span></span> <span data-ttu-id="6f10f-164">Пакетная служба пытается выполнить задачу повторно, если ее код выхода имеет ненулевое значение.</span><span class="sxs-lookup"><span data-stu-id="6f10f-164">The Batch service retries a task if its exit code is nonzero.</span></span><br /><br /> <span data-ttu-id="6f10f-165">Обратите внимание, что это значение определяет количество повторных попыток.</span><span class="sxs-lookup"><span data-stu-id="6f10f-165">Note that this value specifically controls the number of retries.</span></span> <span data-ttu-id="6f10f-166">Пакетная служба попытается выполнить задачу один раз, а затем будет предпринимать повторные попытки вплоть до этого предела.</span><span class="sxs-lookup"><span data-stu-id="6f10f-166">The Batch service will try the task once, and may then retry up to this limit.</span></span> <span data-ttu-id="6f10f-167">Например, если максимальное число повторных попыток равно 3, пакетная служба пытается выполнить задачу до 4 раз (одна начальная попытка и 3 повторных).</span><span class="sxs-lookup"><span data-stu-id="6f10f-167">For example, if the maximum retry count is 3, Batch tries a task up to 4 times (one initial try and 3 retries).</span></span><br /><br /> <span data-ttu-id="6f10f-168">Если максимальное число повторных попыток равно 0, пакетная служба не пытается выполнить задачи повторно.</span><span class="sxs-lookup"><span data-stu-id="6f10f-168">If the maximum retry count is 0, the Batch service does not retry tasks.</span></span><br /><br /> <span data-ttu-id="6f10f-169">Если максимальное число повторных попыток равно –1, пакетная служба может повторять попытки сколько угодно.</span><span class="sxs-lookup"><span data-stu-id="6f10f-169">If the maximum retry count is -1, the Batch service retries tasks without limit.</span></span><br /><br /> <span data-ttu-id="6f10f-170">Значение по умолчанию — 0 (без повторных попыток).</span><span class="sxs-lookup"><span data-stu-id="6f10f-170">The default value is 0 (no retries).</span></span>|


###  <span data-ttu-id="6f10f-171"><a name="executionInfo"></a> executionInfo</span><span class="sxs-lookup"><span data-stu-id="6f10f-171"><a name="executionInfo"></a> executionInfo</span></span>

|<span data-ttu-id="6f10f-172">Имя элемента</span><span class="sxs-lookup"><span data-stu-id="6f10f-172">Element name</span></span>|<span data-ttu-id="6f10f-173">Тип</span><span class="sxs-lookup"><span data-stu-id="6f10f-173">Type</span></span>|<span data-ttu-id="6f10f-174">Примечания</span><span class="sxs-lookup"><span data-stu-id="6f10f-174">Notes</span></span>|
|------------------|----------|-----------|
|<span data-ttu-id="6f10f-175">startTime</span><span class="sxs-lookup"><span data-stu-id="6f10f-175">startTime</span></span>|<span data-ttu-id="6f10f-176">DateTime</span><span class="sxs-lookup"><span data-stu-id="6f10f-176">DateTime</span></span>|<span data-ttu-id="6f10f-177">Время, когда началось выполнение задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-177">The time at which the task started running.</span></span> <span data-ttu-id="6f10f-178">"Выполнение" соответствует состоянию **выполняется**. Поэтому если задача указывает файлы ресурсов или пакеты приложений, данное значение обозначает время, когда задача начала скачивать или развертывать их.</span><span class="sxs-lookup"><span data-stu-id="6f10f-178">'Running' corresponds to the **running** state, so if the task specifies resource files or application packages, then the start time reflects the time at which the task started downloading or deploying these.</span></span>  <span data-ttu-id="6f10f-179">Если задача перезапускалась или предпринимались повторные попытки, это самое позднее время, когда задача запускалась.</span><span class="sxs-lookup"><span data-stu-id="6f10f-179">If the task has been restarted or retried, this is the most recent time at which the task started running.</span></span>|
|<span data-ttu-id="6f10f-180">endTime</span><span class="sxs-lookup"><span data-stu-id="6f10f-180">endTime</span></span>|<span data-ttu-id="6f10f-181">DateTime</span><span class="sxs-lookup"><span data-stu-id="6f10f-181">DateTime</span></span>|<span data-ttu-id="6f10f-182">Время, когда задача была выполнена.</span><span class="sxs-lookup"><span data-stu-id="6f10f-182">The time at which the task completed.</span></span>|
|<span data-ttu-id="6f10f-183">exitCode</span><span class="sxs-lookup"><span data-stu-id="6f10f-183">exitCode</span></span>|<span data-ttu-id="6f10f-184">Int32</span><span class="sxs-lookup"><span data-stu-id="6f10f-184">Int32</span></span>|<span data-ttu-id="6f10f-185">Код выхода задачи.</span><span class="sxs-lookup"><span data-stu-id="6f10f-185">The exit code of the task.</span></span>|
|<span data-ttu-id="6f10f-186">retryCount</span><span class="sxs-lookup"><span data-stu-id="6f10f-186">retryCount</span></span>|<span data-ttu-id="6f10f-187">Int32</span><span class="sxs-lookup"><span data-stu-id="6f10f-187">Int32</span></span>|<span data-ttu-id="6f10f-188">Число повторных попыток выполнения задачи пакетной службой.</span><span class="sxs-lookup"><span data-stu-id="6f10f-188">The number of times the task has been retried by the Batch service.</span></span> <span data-ttu-id="6f10f-189">Повторная попытка выполнения задачи предпринимается в случае ненулевого кода выхода, вплоть до указанного предела MaxTaskRetryCount.</span><span class="sxs-lookup"><span data-stu-id="6f10f-189">The task is retried if it exits with a nonzero exit code, up to the specified MaxTaskRetryCount.</span></span>|
|<span data-ttu-id="6f10f-190">requeueCount</span><span class="sxs-lookup"><span data-stu-id="6f10f-190">requeueCount</span></span>|<span data-ttu-id="6f10f-191">Int32</span><span class="sxs-lookup"><span data-stu-id="6f10f-191">Int32</span></span>|<span data-ttu-id="6f10f-192">Число повторных постановок задачи в очередь пакетной службой в результате запроса пользователя.</span><span class="sxs-lookup"><span data-stu-id="6f10f-192">The number of times the task has been requeued by the Batch service as the result of a user request.</span></span><br /><br /> <span data-ttu-id="6f10f-193">Когда пользователь удаляет узлы из пула (путем его сжатия или изменения размера) или отключается задание, пользователь может указать, что запущенные на узлах задачи нужно повторно поставить в очередь для выполнения.</span><span class="sxs-lookup"><span data-stu-id="6f10f-193">When the user removes nodes from a pool (by resizing or shrinking the pool) or when the job is being disabled, the user can specify that running tasks on the nodes be requeued for execution.</span></span> <span data-ttu-id="6f10f-194">Этот счетчик отслеживает, сколько раз задача была повторно поставлена в очередь в описанной ситуации.</span><span class="sxs-lookup"><span data-stu-id="6f10f-194">This count tracks how many times the task has been requeued for these reasons.</span></span>|
