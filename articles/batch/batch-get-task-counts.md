---
title: "Ход выполнения задания путем подсчета задачи по состоянию - пакетной службы Azure aaaMonitor | Документы Microsoft"
description: "Отслеживать ход выполнения задания hello путем вызова операции получить количество задач hello toocount задачи для задания. Вы можете подсчитать число активных, выполняющихся, завершенных, успешно и неудачно выполненных задач."
services: batch
author: tamram
manager: timlt
ms.service: batch
ms.topic: article
ms.date: 08/02/2017
ms.author: tamram
ms.openlocfilehash: 03957d8a3d678bf44587f3bc7f988a76885c2af0
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="count-tasks-by-state-toomonitor-a-jobs-progress-preview"></a>Число задач, toomonitor состояние хода выполнения задания (Предварительная версия)

Пакет Azure предоставляет эффективный способ toomonitor hello ход выполнения задания во время их выполнения своих задач. Вы можете вызвать hello [получить количество задач] [ rest_get_task_counts] toofind операции ожидания количество задач находятся в состоянии active, выполняющегося или завершенного, и сколько — успешно или неудачно. Считая hello число задач в каждом из состояний, можно более просто пользователя tooa ход выполнения задания hello отобразить или обнаружить непредвиденные задержки или ошибки, которые могут повлиять на задания hello.

> [!IMPORTANT]
> Здравствуйте операции получить количество задач в настоящее время находится в предварительной версии и еще не доступен в Azure для государственных, Китай Azure и Azure Германии. 
>
>

## <a name="how-tasks-are-counted"></a>Подсчет задач

Получить количество задач операции Hello подсчитывает задачи по состоянию, следующим образом:

- Задача считается **active** при это toorun ведения очередей и возможности, но в настоящее время не назначен tooa вычислительных узлов. Задача также считается **активной**, если она зависит от родительской задачи, которая еще не завершена. Дополнительные сведения о зависимости задач см. в разделе [создавать зависимости toorun задачи, которые зависят от других задач](batch-task-dependencies.md). 
- Задача считается **под управлением** при он назначен tooa вычислительных узлов, но еще не завершено. Задача считается **под управлением** когда он находится в состоянии либо `preparing` или `running`, как указано в hello [получить сведения о задаче] [ rest_get_task] операции.
- Задача считается **завершения** когда он больше не toorun право. **Завершенные** задачи обычно завершились успешно или неудачно и исчерпали предел повторных попыток. 

Hello получить количество задач операции также сообщает, сколько задач успешно или неудачно. Определяет пакет задача успешно ли выполнено, проверив hello **результат** свойство hello [executionInfo] [https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task#executionInfo] свойство:

    - Задача считается **успешно** Если hello результат выполнения задачи `success`.
    - Задача считается **сбой** Если hello результат выполнения задачи `failure`.

Дополнительные сведения о состояниях задачи см. в статье [Get information about a task][rest_get_task] (Получение сведений о задаче).

Hello следующий образец кода .NET показано, как количество задач tooretrieve по состояния: 

```csharp
var taskCounts = await batchClient.JobOperations.GetTaskCountsAsync("job-1");

Console.WriteLine("Task count in active state: {0}", taskCounts.Active);
Console.WriteLine("Task count in preparing or running state: {0}", taskCounts.Running);
Console.WriteLine("Task count in completed state: {0}", taskCounts.Completed);
Console.WriteLine("Succeeded task count: {0}", taskCounts.Succeeded);
Console.WriteLine("Failed task count: {0}", taskCounts.Failed);
Console.WriteLine("ValidationStatus: {0}", taskCounts.ValidationStatus);
```

> [!NOTE]
> Можно использовать аналогичный шаблон для REST и других поддерживаемых языков засчитывается tooget задачи для задания. 
> 
> 

## <a name="consistency-checking-for-task-counts"></a>Проверка согласованности количества задач

Hello пакетная служба собирает счетчики задач путем сбора данных из нескольких частей асинхронной распределенной системе. tooensure задачей счетчиков, правильно ли указаны пакета обеспечивает дополнительную проверку количество состояний, выполняя проверки согласованности для нескольких компонентов системы hello. Пакет выполняет эти проверки согласованности, при условии, что существует не более 200 000 задач в задании hello. В hello маловероятном случае, проверки согласованности hello находит ошибки пакет исправляет hello результат операции получить количество задач hello, основанных на результатах hello hello проверки согласованности. Hello проверка согласованности является tooensure дополнительные меры, клиенты, получающие hello получить количество задач операции получения hello правильную информацию, необходимую для их решения.

Hello **validationStatus** ответа hello указывает ли пакетов производит проверку согласованности hello. Если пакет не был может toocheck состояние вычитается hello фактического состояния, которые содержатся в системе hello, затем hello **validationStatus** задано слишком`unvalidated`. Для повышения производительности, пакет не выполнит проверку согласованности hello, если задание hello включает больше, чем 200 000 задачи, поэтому hello **validationStatus** свойство может быть задано слишком`unvalidated` в этом случае. Однако hello задач неверное количество не обязательно таким образом, как даже в случае потери ограничены данные крайне маловероятно. 

При изменении состояния задачи hello статистической обработки конвейера обрабатывает hello изменений в течение нескольких секунд. Получить количество задач операции Hello отражает hello обновлены счетчики задач в течение указанного периода. Однако если hello статистической обработки конвейера промахов изменения состояния задачи, затем изменение не будет зарегистрировать до следующей проверки проверки hello. В течение этого времени количество задач может быть немного неточно, из-за пропущенных событий toohello, но они будут исправлены на следующий этап проверки hello.

## <a name="best-practices-for-counting-a-jobs-tasks"></a>Рекомендации по подсчету задач задания

Вызов операции получить количество задач hello — hello наиболее эффективный способ tooreturn basic количество рабочих заданий по состоянию. При использовании версии пакета обновления 2017 г-06-01.5.1 рекомендуется записью или обновлением toouse ваш код, получить количество задач.

Hello получить количество задач операция недоступна в версии пакета обновления более ранней, чем 2017 г-06-01.5.1. Если вы используете старую версию службы hello, затем используйте задачи toocount список запросов в задании. Дополнительные сведения см. в разделе [эффективно создавать запросы ресурсы пакета toolist](batch-efficient-list-queries.md).

## <a name="next-steps"></a>Дальнейшие действия

* В разделе hello [Обзор возможностей пакетной](batch-api-basics.md) toolearn Дополнительные сведения о пакете основные понятия службы и компоненты. Hello статье обсуждаются hello основными ресурсами пакета пулов, вычислительные узлы, заданий и задач и общие сведения о функции hello службы.
* Основы hello разработки приложений с поддержкой пакета, используя hello [клиентская библиотека .NET пакета](batch-dotnet-get-started.md) или [Python](batch-python-tutorial.md). Эти статьи вводные инструкциям рабочее приложение, которое использует службы tooexecute hello пакета рабочей нагрузки на нескольких вычислительных узлах.


[rest_get_task_counts]: https://docs.microsoft.com/rest/api/batchservice/get-the-task-counts-for-a-job
[rest_get_task]: https://docs.microsoft.com/rest/api/batchservice/get-information-about-a-task
[rest_list_tasks]: https://docs.microsoft.com/rest/api/batchservice/list-the-tasks-associated-with-a-job
