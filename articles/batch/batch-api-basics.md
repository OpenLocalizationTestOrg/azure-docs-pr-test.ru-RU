---
title: "aaaOverview пакета Azure для разработчиков | Документы Microsoft"
description: "Дополнительные функции hello hello пакетной службы и его API-интерфейсы, с точки зрения разработки."
services: batch
documentationcenter: .net
author: tamram
manager: timlt
editor: 
ms.assetid: 416b95f8-2d7b-4111-8012-679b0f60d204
ms.service: batch
ms.devlang: multiple
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-compute
ms.date: 06/28/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3da9d82572b28d05d1923166bd08c26725ca3316
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="develop-large-scale-parallel-compute-solutions-with-batch"></a><span data-ttu-id="83177-103">Разработка решений для крупномасштабных параллельных вычислений с использованием пакетной службы</span><span class="sxs-lookup"><span data-stu-id="83177-103">Develop large-scale parallel compute solutions with Batch</span></span>

<span data-ttu-id="83177-104">В этом обзоре hello основные компоненты hello пакетной службы Azure мы обсудим функции hello основной службы и ресурсы, что пакет разработчики могут использовать toobuild крупномасштабных параллельных вычислений решения.</span><span class="sxs-lookup"><span data-stu-id="83177-104">In this overview of hello core components of hello Azure Batch service, we discuss hello primary service features and resources that Batch developers can use toobuild large-scale parallel compute solutions.</span></span>

<span data-ttu-id="83177-105">Вы разрабатываете распределенные вычислительные приложения или службы, выдает прямой [API-интерфейса REST] [ batch_rest_api] вызовы или вы используете один из hello [пакета SDK](batch-apis-tools.md#azure-accounts-for-batch-development), будет использоваться Многие hello ресурсов и возможности, рассматриваемые в данной статье.</span><span class="sxs-lookup"><span data-stu-id="83177-105">Whether you're developing a distributed computational application or service that issues direct [REST API][batch_rest_api] calls or you're using one of hello [Batch SDKs](batch-apis-tools.md#azure-accounts-for-batch-development), you'll use many of hello resources and features discussed in this article.</span></span>

> [!TIP]
> <span data-ttu-id="83177-106">Более высокого уровня toohello введение пакетной службы в разделе [основы пакета Azure](batch-technical-overview.md).</span><span class="sxs-lookup"><span data-stu-id="83177-106">For a higher-level introduction toohello Batch service, see [Basics of Azure Batch](batch-technical-overview.md).</span></span>
>
>

## <a name="batch-service-workflow"></a><span data-ttu-id="83177-107">Рабочий процесс пакетной службы</span><span class="sxs-lookup"><span data-stu-id="83177-107">Batch service workflow</span></span>
<span data-ttu-id="83177-108">Hello следующий общий рабочий процесс является типичным практически для всех приложений и служб, использующих hello пакетная служба для обработки параллельных рабочих нагрузок:</span><span class="sxs-lookup"><span data-stu-id="83177-108">hello following high-level workflow is typical of nearly all applications and services that use hello Batch service for processing parallel workloads:</span></span>

1. <span data-ttu-id="83177-109">Отправка hello **файлы данных** , которые должны tooprocess tooan [хранилища Azure] [ azure_storage] учетной записи.</span><span class="sxs-lookup"><span data-stu-id="83177-109">Upload hello **data files** that you want tooprocess tooan [Azure Storage][azure_storage] account.</span></span> <span data-ttu-id="83177-110">Пакет включает встроенную поддержку доступа к хранилищу больших двоичных объектов Azure и задачи можно загрузить эти файлы слишком[вычислительных узлов](#compute-node) при выполнении задачи hello.</span><span class="sxs-lookup"><span data-stu-id="83177-110">Batch includes built-in support for accessing Azure Blob storage, and your tasks can download these files too[compute nodes](#compute-node) when hello tasks are run.</span></span>
2. <span data-ttu-id="83177-111">Отправка hello **файлы приложения** выполнения задач.</span><span class="sxs-lookup"><span data-stu-id="83177-111">Upload hello **application files** that your tasks will run.</span></span> <span data-ttu-id="83177-112">Эти файлы могут быть двоичные файлы или сценарии и их зависимости и выполняемых задач hello в заданиях.</span><span class="sxs-lookup"><span data-stu-id="83177-112">These files can be binaries or scripts and their dependencies, and are executed by hello tasks in your jobs.</span></span> <span data-ttu-id="83177-113">Задачи можно загрузить эти файлы из вашей учетной записи хранилища, или можно использовать hello [пакетов приложений](#application-packages) компонентов пакета для развертывания и управления приложениями.</span><span class="sxs-lookup"><span data-stu-id="83177-113">Your tasks can download these files from your Storage account, or you can use hello [application packages](#application-packages) feature of Batch for application management and deployment.</span></span>
3. <span data-ttu-id="83177-114">Создайте [пул](#pool) вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-114">Create a [pool](#pool) of compute nodes.</span></span> <span data-ttu-id="83177-115">При создании пула указываются hello количество вычислительных узлов для hello пула, размер и hello операционной системы.</span><span class="sxs-lookup"><span data-stu-id="83177-115">When you create a pool, you specify hello number of compute nodes for hello pool, their size, and hello operating system.</span></span> <span data-ttu-id="83177-116">Назначается при запуске каждой задачи в своей работе tooexecute на одном из узлов hello в пуле.</span><span class="sxs-lookup"><span data-stu-id="83177-116">When each task in your job runs, it's assigned tooexecute on one of hello nodes in your pool.</span></span>
4. <span data-ttu-id="83177-117">Создайте [задание](#job).</span><span class="sxs-lookup"><span data-stu-id="83177-117">Create a [job](#job).</span></span> <span data-ttu-id="83177-118">Задание — это набор задач.</span><span class="sxs-lookup"><span data-stu-id="83177-118">A job manages a collection of tasks.</span></span> <span data-ttu-id="83177-119">Нужно связать каждого задания tooa конкретного пула которых будут выполняться задачи этого задания.</span><span class="sxs-lookup"><span data-stu-id="83177-119">You associate each job tooa specific pool where that job's tasks will run.</span></span>
5. <span data-ttu-id="83177-120">Добавить [задачи](#task) toohello задания.</span><span class="sxs-lookup"><span data-stu-id="83177-120">Add [tasks](#task) toohello job.</span></span> <span data-ttu-id="83177-121">Каждая задача запускает приложение hello или скрипт, который вы отправили tooprocess hello данных загружаемых файлов из вашей учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="83177-121">Each task runs hello application or script that you uploaded tooprocess hello data files it downloads from your Storage account.</span></span> <span data-ttu-id="83177-122">Как завершения каждой задачи, ее можно передать его выходные данные tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="83177-122">As each task completes, it can upload its output tooAzure Storage.</span></span>
6. <span data-ttu-id="83177-123">Отслеживание хода выполнения заданий и получить выходные данные задачи hello из хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-123">Monitor job progress and retrieve hello task output from Azure Storage.</span></span>

<span data-ttu-id="83177-124">Hello следующих разделах рассматриваются эти и hello другие ресурсы пакета, позволяющие сценарию распределенных вычислений.</span><span class="sxs-lookup"><span data-stu-id="83177-124">hello following sections discuss these and hello other resources of Batch that enable your distributed computational scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="83177-125">Требуется [учетная запись пакетной службы](#account) toouse hello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-125">You need a [Batch account](#account) toouse hello Batch service.</span></span> <span data-ttu-id="83177-126">Кроме того, большинство решений пакетной службы предполагают наличие [учетной записи хранения Azure][azure_storage] для хранения и извлечения файлов.</span><span class="sxs-lookup"><span data-stu-id="83177-126">Most Batch solutions also use an [Azure Storage][azure_storage] account for file storage and retrieval.</span></span> <span data-ttu-id="83177-127">Пакет в настоящее время поддерживает только hello **общего назначения** тип учетной записи хранения, как описано в шаге 5 [создать учетную запись хранилища](../storage/common/storage-create-storage-account.md#create-a-storage-account) в [учетных записей хранилища Azure о](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="83177-127">Batch currently supports only hello **general-purpose** storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span>
>
>

## <a name="batch-service-resources"></a><span data-ttu-id="83177-128">Ресурсы пакетной службы</span><span class="sxs-lookup"><span data-stu-id="83177-128">Batch service resources</span></span>
<span data-ttu-id="83177-129">Некоторые hello следующих ресурсов — учетные записи, вычислительные узлы, пулы, заданий и задач: требуются все решения, использующие hello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-129">Some of hello following resources--accounts, compute nodes, pools, jobs, and tasks--are required by all solutions that use hello Batch service.</span></span> <span data-ttu-id="83177-130">Другие ресурсы, например расписания заданий и пакеты приложений, являются полезными дополнительными функциями.</span><span class="sxs-lookup"><span data-stu-id="83177-130">Others, like job schedules and application packages, are helpful, but optional, features.</span></span>

* [<span data-ttu-id="83177-131">Учетная запись.</span><span class="sxs-lookup"><span data-stu-id="83177-131">Account</span></span>](#account)
* [<span data-ttu-id="83177-132">Вычислительный узел.</span><span class="sxs-lookup"><span data-stu-id="83177-132">Compute node</span></span>](#compute-node)
* [<span data-ttu-id="83177-133">Пул.</span><span class="sxs-lookup"><span data-stu-id="83177-133">Pool</span></span>](#pool)
* [<span data-ttu-id="83177-134">Задание.</span><span class="sxs-lookup"><span data-stu-id="83177-134">Job</span></span>](#job)

  * [<span data-ttu-id="83177-135">Расписания заданий</span><span class="sxs-lookup"><span data-stu-id="83177-135">Job schedules</span></span>](#scheduled-jobs)
* [<span data-ttu-id="83177-136">Задача.</span><span class="sxs-lookup"><span data-stu-id="83177-136">Task</span></span>](#task)

  * [<span data-ttu-id="83177-137">Задача запуска</span><span class="sxs-lookup"><span data-stu-id="83177-137">Start task</span></span>](#start-task)
  * [<span data-ttu-id="83177-138">Задача диспетчера заданий</span><span class="sxs-lookup"><span data-stu-id="83177-138">Job manager task</span></span>](#job-manager-task)
  * [<span data-ttu-id="83177-139">Задачи подготовки и завершения заданий.</span><span class="sxs-lookup"><span data-stu-id="83177-139">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
  * [<span data-ttu-id="83177-140">Задачи с несколькими экземплярами</span><span class="sxs-lookup"><span data-stu-id="83177-140">Multi-instance task (MPI)</span></span>](#multi-instance-tasks)
  * [<span data-ttu-id="83177-141">Зависимости задачи</span><span class="sxs-lookup"><span data-stu-id="83177-141">Task dependencies</span></span>](#task-dependencies)
* [<span data-ttu-id="83177-142">Пакеты приложений</span><span class="sxs-lookup"><span data-stu-id="83177-142">Application packages</span></span>](#application-packages)

## <a name="account"></a><span data-ttu-id="83177-143">Учетная запись.</span><span class="sxs-lookup"><span data-stu-id="83177-143">Account</span></span>
<span data-ttu-id="83177-144">Учетная запись службы Batch является уникально идентифицируемая сущность в hello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-144">A Batch account is a uniquely identified entity within hello Batch service.</span></span> <span data-ttu-id="83177-145">Вся обработка данных привязана к учетной записи пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-145">All processing is associated with a Batch account.</span></span>

<span data-ttu-id="83177-146">Можно создать учетную запись пакетной службы Azure с помощью hello [портал Azure](batch-account-create-portal.md) или программными средствами, например с hello [библиотека пакета управления .NET](batch-management-dotnet.md).</span><span class="sxs-lookup"><span data-stu-id="83177-146">You can create an Azure Batch account using hello [Azure portal](batch-account-create-portal.md) or programmatically, such as with hello [Batch Management .NET library](batch-management-dotnet.md).</span></span> <span data-ttu-id="83177-147">При создании учетной записи hello, можно связать учетную запись хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-147">When creating hello account, you can associate an Azure storage account.</span></span>

### <a name="pool-allocation-mode"></a><span data-ttu-id="83177-148">Режим распределения пула</span><span class="sxs-lookup"><span data-stu-id="83177-148">Pool allocation mode</span></span>

<span data-ttu-id="83177-149">При создании учетной записи пакетной службы можно указать способ распределения [пулов](#pool) вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-149">When you create a Batch account, you can specify how [pools](#pool) of compute nodes are allocated.</span></span> <span data-ttu-id="83177-150">Пулы tooallocate вычислительные узлы можно выбрать в подписке, управляется пакетной службы Azure, или они могут быть добавлены в подписке.</span><span class="sxs-lookup"><span data-stu-id="83177-150">You can choose tooallocate pools of compute nodes in a subscription managed by Azure Batch, or you can allocate them in your own subscription.</span></span> <span data-ttu-id="83177-151">Hello *режим распределения пула* определяет свойства для учетной записи hello которого выделена память для пулов.</span><span class="sxs-lookup"><span data-stu-id="83177-151">hello *pool allocation mode* property for hello account determines where pools are allocated.</span></span> 

<span data-ttu-id="83177-152">toodecide, что пул toouse режим выделения, рассмотрим, который оптимально подходит для вашего сценария.</span><span class="sxs-lookup"><span data-stu-id="83177-152">toodecide which pool allocation mode toouse, consider which best fits your scenario:</span></span>

* <span data-ttu-id="83177-153">**Пакетная служба**: пакетная служба — hello режим по умолчанию пула распределения, выделенных пулов фоновом hello в подписках Azure под управлением.</span><span class="sxs-lookup"><span data-stu-id="83177-153">**Batch Service**: Batch Service is hello default pool allocation mode, in which pools are allocated behind hello scenes in Azure-managed subscriptions.</span></span> <span data-ttu-id="83177-154">Необходимо учитывать следующие факты о режиме выделения пула hello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-154">Keep in mind these key points about hello Batch Service pool allocation mode:</span></span>

    - <span data-ttu-id="83177-155">режим распределения пула Hello пакетная служба поддерживает пулы облачной службы и виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="83177-155">hello Batch Service pool allocation mode supports both Cloud Service and Virtual Machine pools.</span></span>
    - <span data-ttu-id="83177-156">Hello режим распределения пула пакетная служба поддерживает оба ключа проверки подлинности с общим или [проверки подлинности Azure Active Directory](batch-aad-auth.md) (Azure AD).</span><span class="sxs-lookup"><span data-stu-id="83177-156">hello Batch Service pool allocation mode supports both shared key authentication or [Azure Active Directory authentication](batch-aad-auth.md) (Azure AD).</span></span> 
    - <span data-ttu-id="83177-157">Можно использовать либо выделенный или низким приоритетом вычислительных узлов в пулах, выделенных с помощью режима выделения пула пакетная служба hello.</span><span class="sxs-lookup"><span data-stu-id="83177-157">You can use either dedicated or low-priority compute nodes in pools allocated with hello Batch Service pool allocation mode.</span></span>
    - <span data-ttu-id="83177-158">Не используйте режим распределения пула пакетная служба hello при планировании toocreate пулов виртуальных машин Azure из пользовательских образов виртуальной Машины или если планируется toouse виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="83177-158">Do not use hello Batch Service pool allocation mode if you plan toocreate Azure virtual machine pools from custom VM images, or if you plan toouse a virtual network.</span></span> <span data-ttu-id="83177-159">Создание учетной записи с режимом выделения пула подписки пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="83177-159">Create your account with hello User Subscription pool allocation mode instead.</span></span>
    - <span data-ttu-id="83177-160">Подготовки в создании учетной записи с режимом выделения пула пакетная служба hello пулов виртуальных машин, которые должны быть созданы из [виртуальных машин Azure Marketplace] [ vm_marketplace] изображения.</span><span class="sxs-lookup"><span data-stu-id="83177-160">Virtual Machine pools provisioned in an account created with hello Batch Service pool allocation mode must be created from [Azure Virtual Machines Marketplace][vm_marketplace] images.</span></span>

* <span data-ttu-id="83177-161">**Подписки пользователя**: режим выделения пула подписки пользователя hello пулы пакета выделяются в hello подписки Azure, где создается учетная запись hello.</span><span class="sxs-lookup"><span data-stu-id="83177-161">**User subscription**: With hello User Subscription pool allocation mode, Batch pools are allocated in hello Azure subscription where hello account is created.</span></span> <span data-ttu-id="83177-162">Необходимо учитывать следующие факты о режиме выделения пула hello подписки пользователя.</span><span class="sxs-lookup"><span data-stu-id="83177-162">Keep in mind these key points about hello User Subscription pool allocation mode:</span></span>
     
    - <span data-ttu-id="83177-163">режим распределения пула подписки пользователя Hello поддерживает только пулы виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="83177-163">hello User Subscription pool allocation mode supports only Virtual Machine pools.</span></span> <span data-ttu-id="83177-164">Она не поддерживает пулы облачных служб.</span><span class="sxs-lookup"><span data-stu-id="83177-164">It does not support Cloud Services pools.</span></span>
    - <span data-ttu-id="83177-165">toocreate виртуальной машины пулов из пользовательских образов виртуальных Машин или toouse виртуальной сети с пулами виртуальной машины, необходимо использовать режим распределения пула hello подписки пользователя.</span><span class="sxs-lookup"><span data-stu-id="83177-165">toocreate Virtual Machine pools from custom VM images or toouse a virtual network with Virtual Machine pools, you must use hello User Subscription pool allocation mode.</span></span>  
    - <span data-ttu-id="83177-166">Необходимо использовать [проверки подлинности Azure Active Directory](batch-aad-auth.md) с пулами, выделенных в подписки пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="83177-166">You must use [Azure Active Directory authentication](batch-aad-auth.md) with pools that are allocated in hello user subscription.</span></span> 
    - <span data-ttu-id="83177-167">Если режим выделения пула hello tooUser подписки необходимо настроить хранилище ключей Azure для вашей учетной записи пакетной.</span><span class="sxs-lookup"><span data-stu-id="83177-167">You must set up an Azure key vault for your Batch account if hello pool allocation mode is set tooUser Subscription.</span></span> 
    - <span data-ttu-id="83177-168">Можно использовать только выделенные вычислительные узлы в пулов в учетной записи, созданных с помощью режима выделения пула подписки пользователя hello.</span><span class="sxs-lookup"><span data-stu-id="83177-168">You can use only dedicated compute nodes in pools in an account created with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="83177-169">Низкоприоритетные узлы не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="83177-169">Low-priority nodes are not supported.</span></span>
    - <span data-ttu-id="83177-170">Можно создать виртуальную машину пулов, подготовленный в учетную запись, обладающую режим распределения пула hello подписки пользователя, либо из [виртуальных машин Azure Marketplace] [ vm_marketplace] изображения или из пользовательских образов, которые Предоставьте.</span><span class="sxs-lookup"><span data-stu-id="83177-170">Virtual Machine pools provisioned in an account with hello User Subscription pool allocation mode can be created either from [Azure Virtual Machines Marketplace][vm_marketplace] images, or from custom images that you provide.</span></span>

<span data-ttu-id="83177-171">Hello в следующей таблице сравниваются hello пакетной службы подписки пользователя пула выделения режимы и.</span><span class="sxs-lookup"><span data-stu-id="83177-171">hello following table compares hello Batch Service and User Subscription pool allocation modes.</span></span>

| <span data-ttu-id="83177-172">**Режим распределения пула**</span><span class="sxs-lookup"><span data-stu-id="83177-172">**Pool allocation mode**</span></span>                 | <span data-ttu-id="83177-173">**Пакетная служба**</span><span class="sxs-lookup"><span data-stu-id="83177-173">**Batch Service**</span></span>                                                                                       | <span data-ttu-id="83177-174">**Пользовательская подписка**</span><span class="sxs-lookup"><span data-stu-id="83177-174">**User Subscription**</span></span>                                                              |
|-------------------------------------------|---------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------|
| <span data-ttu-id="83177-175">**Место распределения пула**</span><span class="sxs-lookup"><span data-stu-id="83177-175">**Pools are allocated in**</span></span>               | <span data-ttu-id="83177-176">Подписка, управляемая Azure</span><span class="sxs-lookup"><span data-stu-id="83177-176">An Azure-managed subscription</span></span>                                                                           | <span data-ttu-id="83177-177">в какой hello пакетного создания учетной записи подписки пользователя Hello</span><span class="sxs-lookup"><span data-stu-id="83177-177">hello user subscription in which hello Batch account is created</span></span>                        |
| <span data-ttu-id="83177-178">**Поддерживаемые конфигурации**</span><span class="sxs-lookup"><span data-stu-id="83177-178">**Supported configurations**</span></span>             | <ul><li><span data-ttu-id="83177-179">Конфигурация облачной службы</span><span class="sxs-lookup"><span data-stu-id="83177-179">Cloud Service Configuration</span></span></li><li><span data-ttu-id="83177-180">Конфигурация виртуальной машины (Linux и Windows)</span><span class="sxs-lookup"><span data-stu-id="83177-180">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul> | <ul><li><span data-ttu-id="83177-181">Конфигурация виртуальной машины (Linux и Windows)</span><span class="sxs-lookup"><span data-stu-id="83177-181">Virtual Machine Configuration (Linux and Windows)</span></span></li></ul>                |
| <span data-ttu-id="83177-182">**Поддерживаемые образы виртуальных машин**</span><span class="sxs-lookup"><span data-stu-id="83177-182">**Supported VM images**</span></span>                  | <ul><li><span data-ttu-id="83177-183">Образы из Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="83177-183">Azure Marketplace images</span></span></li></ul>                                                              | <ul><li><span data-ttu-id="83177-184">Образы из Azure Marketplace</span><span class="sxs-lookup"><span data-stu-id="83177-184">Azure Marketplace images</span></span></li><li><span data-ttu-id="83177-185">Пользовательские образы</span><span class="sxs-lookup"><span data-stu-id="83177-185">Custom images</span></span></li></ul>                   |
| <span data-ttu-id="83177-186">**Поддерживаемые типы вычислительных узлов**</span><span class="sxs-lookup"><span data-stu-id="83177-186">**Supported compute node types**</span></span>         | <ul><li><span data-ttu-id="83177-187">Специальные узлы</span><span class="sxs-lookup"><span data-stu-id="83177-187">Dedicated nodes</span></span></li><li><span data-ttu-id="83177-188">Низкоприоритетные узлы</span><span class="sxs-lookup"><span data-stu-id="83177-188">Low-priority nodes</span></span></li></ul>                                            | <ul><li><span data-ttu-id="83177-189">Специальные узлы</span><span class="sxs-lookup"><span data-stu-id="83177-189">Dedicated nodes</span></span></li></ul>                                                  |
| <span data-ttu-id="83177-190">**Поддерживаемый тип проверки подлинности**</span><span class="sxs-lookup"><span data-stu-id="83177-190">**Supported authentication**</span></span>             | <ul><li><span data-ttu-id="83177-191">Общий ключ</span><span class="sxs-lookup"><span data-stu-id="83177-191">Shared Key</span></span></li><li><span data-ttu-id="83177-192">Azure AD</span><span class="sxs-lookup"><span data-stu-id="83177-192">Azure AD</span></span></li></ul>                                                           | <ul><li><span data-ttu-id="83177-193">Azure AD</span><span class="sxs-lookup"><span data-stu-id="83177-193">Azure AD</span></span></li></ul>                                                         |
| <span data-ttu-id="83177-194">**Требуется ли хранилище Azure Key Vault**</span><span class="sxs-lookup"><span data-stu-id="83177-194">**Azure Key Vault required**</span></span>             | <span data-ttu-id="83177-195">Нет</span><span class="sxs-lookup"><span data-stu-id="83177-195">No</span></span>                                                                                                      | <span data-ttu-id="83177-196">Да</span><span class="sxs-lookup"><span data-stu-id="83177-196">Yes</span></span>                                                                                |
| <span data-ttu-id="83177-197">**Квота на ядра**</span><span class="sxs-lookup"><span data-stu-id="83177-197">**Core quota**</span></span>                           | <span data-ttu-id="83177-198">Определяется по квоте на ядра для пакетной службы</span><span class="sxs-lookup"><span data-stu-id="83177-198">Determined by Batch core quota</span></span>                                                                          | <span data-ttu-id="83177-199">Определяется по квоте на ядра для подписки</span><span class="sxs-lookup"><span data-stu-id="83177-199">Determined by subscription core quota</span></span>                                              |
| <span data-ttu-id="83177-200">**Поддержка виртуальной сети Azure**</span><span class="sxs-lookup"><span data-stu-id="83177-200">**Azure Virtual Network (Vnet) support**</span></span> | <span data-ttu-id="83177-201">Пулы, созданных с помощью hello конфигурацию облачной службы</span><span class="sxs-lookup"><span data-stu-id="83177-201">Pools created with hello Cloud Service Configuration</span></span>                                                      | <span data-ttu-id="83177-202">Пулы, созданных с помощью hello конфигурации виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="83177-202">Pools created with hello Virtual Machine Configuration</span></span>                               |
| <span data-ttu-id="83177-203">**Поддерживаемая модель развертывания виртуальной сети**</span><span class="sxs-lookup"><span data-stu-id="83177-203">**Vnet deployment model supported**</span></span>      | <span data-ttu-id="83177-204">Виртуальные сети, созданные по классической модели развертывания</span><span class="sxs-lookup"><span data-stu-id="83177-204">Vnets created with classic deployment model</span></span>                                                             | <span data-ttu-id="83177-205">Виртуальных сетей, созданных с помощью hello классической модели развертывания или диспетчера ресурсов Azure</span><span class="sxs-lookup"><span data-stu-id="83177-205">Vnets created with either hello classic deployment model or Azure   Resource Manager</span></span> |

## <a name="azure-storage-account"></a><span data-ttu-id="83177-206">Учетная запись хранения Azure</span><span class="sxs-lookup"><span data-stu-id="83177-206">Azure Storage account</span></span>

<span data-ttu-id="83177-207">В большинстве решений пакетной службы для хранения файлов ресурсов и выходных файлов используется служба хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-207">Most Batch solutions use Azure Storage for storing resource files and output files.</span></span>  

<span data-ttu-id="83177-208">Пакет в настоящее время поддерживает только тип учетной записи хранилища общего назначения hello, как описано в шаге 5 [создать учетную запись хранилища](../storage/common/storage-create-storage-account.md#create-a-storage-account) в [учетных записей хранилища Azure о](../storage/common/storage-create-storage-account.md).</span><span class="sxs-lookup"><span data-stu-id="83177-208">Batch currently supports only hello general-purpose storage account type, as described in step 5 of [Create a storage account](../storage/common/storage-create-storage-account.md#create-a-storage-account) in [About Azure storage accounts](../storage/common/storage-create-storage-account.md).</span></span> <span data-ttu-id="83177-209">В задачах пакетной службы (включая стандартные задачи, задачи запуска, задачи подготовки и прекращения заданий) необходимо указывать файлы ресурсов, которые находятся в учетных записях хранения общего назначения.</span><span class="sxs-lookup"><span data-stu-id="83177-209">Your Batch tasks (including standard tasks, start tasks, job preparation tasks, and job release tasks) must specify resource files that reside in general-purpose storage accounts.</span></span>


## <a name="compute-node"></a><span data-ttu-id="83177-210">Вычислительный узел.</span><span class="sxs-lookup"><span data-stu-id="83177-210">Compute node</span></span>
<span data-ttu-id="83177-211">Вычислительный узел — виртуальной машины (VM) Azure или облачная служба виртуальных Машин, выделенных tooprocessing часть рабочей нагрузки приложений.</span><span class="sxs-lookup"><span data-stu-id="83177-211">A compute node is an Azure virtual machine (VM) or cloud service VM that is dedicated tooprocessing a portion of your application's workload.</span></span> <span data-ttu-id="83177-212">размер Hello узла определяет число ядер ЦП, объем памяти и размер локальной файловой системы, выделенный узел toohello hello.</span><span class="sxs-lookup"><span data-stu-id="83177-212">hello size of a node determines hello number of CPU cores, memory capacity, and local file system size that is allocated toohello node.</span></span> <span data-ttu-id="83177-213">Можно создать пулы узлов Windows или Linux с помощью облачных служб Azure, образы из hello [виртуальных машин Azure Marketplace][vm_marketplace], или пользовательские образы, которые вы осуществляете подготовку.</span><span class="sxs-lookup"><span data-stu-id="83177-213">You can create pools of Windows or Linux nodes by using Azure Cloud Services, images from hello [Azure Virtual Machines Marketplace][vm_marketplace], or custom images that you prepare.</span></span> <span data-ttu-id="83177-214">В разделе ниже hello [пула](#pool) Дополнительные сведения об этих параметрах.</span><span class="sxs-lookup"><span data-stu-id="83177-214">See hello following [Pool](#pool) section for more information on these options.</span></span>

<span data-ttu-id="83177-215">Узлы можно запустить любой исполняемый файл или сценарий, который поддерживается средой hello операционной системы узла hello.</span><span class="sxs-lookup"><span data-stu-id="83177-215">Nodes can run any executable or script that is supported by hello operating system environment of hello node.</span></span> <span data-ttu-id="83177-216">скрипты \*EXE, \*CMD, \*BAT и PowerShell для Windows и двоичные файлы, скрипты оболочки и Python для Linux.</span><span class="sxs-lookup"><span data-stu-id="83177-216">This includes \*.exe, \*.cmd, \*.bat and PowerShell scripts for Windows--and binaries, shell, and Python scripts for Linux.</span></span>

<span data-ttu-id="83177-217">Для всех вычислительных узлов в пакетной службе характерно следующее:</span><span class="sxs-lookup"><span data-stu-id="83177-217">All compute nodes in Batch also include:</span></span>

* <span data-ttu-id="83177-218">Стандартная [структура папок](#files-and-directories) и связанные [переменные среды](#environment-settings-for-tasks), на которые могут ссылаться задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-218">A standard [folder structure](#files-and-directories) and associated [environment variables](#environment-settings-for-tasks) that are available for reference by tasks.</span></span>
* <span data-ttu-id="83177-219">**Брандмауэр** параметры, которые настроены toocontrol доступа.</span><span class="sxs-lookup"><span data-stu-id="83177-219">**Firewall** settings that are configured toocontrol access.</span></span>
* <span data-ttu-id="83177-220">[Удаленный доступ](#connecting-to-compute-nodes) tooboth Windows (удаленного рабочего стола (RDP)) и узлы Linux (Secure Shell (SSH)).</span><span class="sxs-lookup"><span data-stu-id="83177-220">[Remote access](#connecting-to-compute-nodes) tooboth Windows (Remote Desktop Protocol (RDP)) and Linux (Secure Shell (SSH)) nodes.</span></span>

## <a name="pool"></a><span data-ttu-id="83177-221">пул</span><span class="sxs-lookup"><span data-stu-id="83177-221">Pool</span></span>
<span data-ttu-id="83177-222">Пул — это коллекция узлов, на которых выполняется приложение.</span><span class="sxs-lookup"><span data-stu-id="83177-222">A pool is a collection of nodes that your application runs on.</span></span> <span data-ttu-id="83177-223">пул Hello могут создаваться вручную пользователем, или автоматически hello пакетная служба при указании сделать toobe рабочих hello.</span><span class="sxs-lookup"><span data-stu-id="83177-223">hello pool can be created manually by you, or automatically by hello Batch service when you specify hello work toobe done.</span></span> <span data-ttu-id="83177-224">Можно создавать и управлять пула, который соответствует требованиям hello ресурсов приложения.</span><span class="sxs-lookup"><span data-stu-id="83177-224">You can create and manage a pool that meets hello resource requirements of your application.</span></span> <span data-ttu-id="83177-225">Пул можно использовать только с учетной записи пакетной hello, в котором он был создан.</span><span class="sxs-lookup"><span data-stu-id="83177-225">A pool can be used only by hello Batch account in which it was created.</span></span> <span data-ttu-id="83177-226">Учетная запись Пакетной службы может содержать более одного пула.</span><span class="sxs-lookup"><span data-stu-id="83177-226">A Batch account can have more than one pool.</span></span>

<span data-ttu-id="83177-227">Azure пулы пакета основаны на hello базовой платформы вычислений Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-227">Azure Batch pools build on top of hello core Azure compute platform.</span></span> <span data-ttu-id="83177-228">Они предоставляют крупномасштабных распределения, установка приложений, распределение данных, наблюдение за работоспособностью и гибкой настройки hello количество вычислительных узлов в пуле ([масштабирование](#scaling-compute-resources)).</span><span class="sxs-lookup"><span data-stu-id="83177-228">They provide large-scale allocation, application installation, data distribution, health monitoring, and flexible adjustment of hello number of compute nodes within a pool ([scaling](#scaling-compute-resources)).</span></span>

<span data-ttu-id="83177-229">Каждый узел, который будет добавлен пул tooa назначается уникальное имя и IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="83177-229">Every node that is added tooa pool is assigned a unique name and IP address.</span></span> <span data-ttu-id="83177-230">Если узел удаляется из пула, будут потеряны все изменения, внесенные toohello операционной системы или файлы, и его имя и IP-адрес освобождаются для использования в будущем.</span><span class="sxs-lookup"><span data-stu-id="83177-230">When a node is removed from a pool, any changes that are made toohello operating system or files are lost, and its name and IP address are released for future use.</span></span> <span data-ttu-id="83177-231">Когда узел покидает пул, он перестает существовать.</span><span class="sxs-lookup"><span data-stu-id="83177-231">When a node leaves a pool, its lifetime is over.</span></span>

<span data-ttu-id="83177-232">При создании пула можно указать следующие атрибуты hello.</span><span class="sxs-lookup"><span data-stu-id="83177-232">When you create a pool, you can specify hello following attributes.</span></span> <span data-ttu-id="83177-233">Некоторые параметры различаются в зависимости от режима выделения пула hello hello пакета [учетной записи](#account):</span><span class="sxs-lookup"><span data-stu-id="83177-233">Some settings differ, depending on hello pool allocation mode of hello Batch [account](#account):</span></span>

- <span data-ttu-id="83177-234">Операционная система и версия вычислительного узла</span><span class="sxs-lookup"><span data-stu-id="83177-234">Compute node operating system and version</span></span>
- <span data-ttu-id="83177-235">Тип вычислительного узла и целевое количество узлов</span><span class="sxs-lookup"><span data-stu-id="83177-235">Compute node type and target number of nodes</span></span>
- <span data-ttu-id="83177-236">Размер hello вычислительных узлов</span><span class="sxs-lookup"><span data-stu-id="83177-236">Size of hello compute nodes</span></span>
- <span data-ttu-id="83177-237">Политика масштабирования</span><span class="sxs-lookup"><span data-stu-id="83177-237">Scaling policy</span></span>
- <span data-ttu-id="83177-238">политика планирования задач;</span><span class="sxs-lookup"><span data-stu-id="83177-238">Task scheduling policy</span></span>
- <span data-ttu-id="83177-239">состояние взаимодействия между вычислительными узлами;</span><span class="sxs-lookup"><span data-stu-id="83177-239">Communication status for compute nodes</span></span>
- <span data-ttu-id="83177-240">задачи запуска для вычислительных узлов;</span><span class="sxs-lookup"><span data-stu-id="83177-240">Start tasks for compute nodes</span></span>
- <span data-ttu-id="83177-241">Пакеты приложений</span><span class="sxs-lookup"><span data-stu-id="83177-241">Application packages</span></span>
- <span data-ttu-id="83177-242">Конфигурация сети</span><span class="sxs-lookup"><span data-stu-id="83177-242">Network configuration</span></span>

<span data-ttu-id="83177-243">Каждый из этих параметров описан более подробно в следующих разделах hello.</span><span class="sxs-lookup"><span data-stu-id="83177-243">Each of these settings is described in more detail in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83177-244">Учетные записи пакетного режимом выделения пула пакетная служба hello имеют Квота по умолчанию, который ограничивает hello количество ядер в учетной записи пакетной.</span><span class="sxs-lookup"><span data-stu-id="83177-244">Batch accounts created with hello Batch Service pool allocation mode have a default quota that limits hello number of cores in a Batch account.</span></span> <span data-ttu-id="83177-245">число ядер в Hello соответствует toohello количество вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-245">hello number of cores corresponds toohello number of compute nodes.</span></span> <span data-ttu-id="83177-246">Можно найти квот по умолчанию hello и инструкции о том, как слишком[увеличить квоту](batch-quota-limit.md#increase-a-quota) в [квоты и лимиты для пакетной службы Azure hello](batch-quota-limit.md).</span><span class="sxs-lookup"><span data-stu-id="83177-246">You can find hello default quotas and instructions on how too[increase a quota](batch-quota-limit.md#increase-a-quota) in [Quotas and limits for hello Azure Batch service](batch-quota-limit.md).</span></span> <span data-ttu-id="83177-247">Если пул не является достижение его целевое количество узлов, квоты ядер hello возможно причина hello.</span><span class="sxs-lookup"><span data-stu-id="83177-247">If your pool is not achieving its target number of nodes, hello core quota might be hello reason.</span></span>
>
><span data-ttu-id="83177-248">Учетные записи пакетного режимом выделения пула подписки пользователя hello не предусмотрен квоты службы hello пакета.</span><span class="sxs-lookup"><span data-stu-id="83177-248">Batch accounts created with hello User Subscription pool allocation mode do not observe hello Batch service quotas.</span></span> <span data-ttu-id="83177-249">Вместо этого они совместно используют в hello основная квота для hello указан подписки.</span><span class="sxs-lookup"><span data-stu-id="83177-249">Instead, they share in hello core quota for hello specified subscription.</span></span> <span data-ttu-id="83177-250">Дополнительные сведения см. в разделе [Ограничения виртуальных машин](../azure-subscription-service-limits.md#virtual-machines-limits) в статье [Подписка Azure, границы, квоты и ограничения службы](../azure-subscription-service-limits.md).</span><span class="sxs-lookup"><span data-stu-id="83177-250">For more information, see [Virtual Machines limits](../azure-subscription-service-limits.md#virtual-machines-limits) in [Azure subscription and service limits, quotas, and constraints](../azure-subscription-service-limits.md).</span></span>
>
>

### <a name="compute-node-operating-system-and-version"></a><span data-ttu-id="83177-251">Операционная система и версия вычислительного узла</span><span class="sxs-lookup"><span data-stu-id="83177-251">Compute node operating system and version</span></span>

<span data-ttu-id="83177-252">При создании пула пакета можно указать hello Azure конфигурации виртуальной машины и операционной системы требуется toorun на каждом вычислительном узле в пуле hello типа hello.</span><span class="sxs-lookup"><span data-stu-id="83177-252">When you create a Batch pool, you can specify hello Azure virtual machine configuration and hello type of operating system you want toorun on each compute node in hello pool.</span></span> <span data-ttu-id="83177-253">Существует два типа Hello конфигураций, доступные в пакете::</span><span class="sxs-lookup"><span data-stu-id="83177-253">hello two types of configurations available in Batch are:</span></span>

- <span data-ttu-id="83177-254">Hello **конфигурации виртуальной машины**, который указывает этот пул hello состоит из виртуальных машин Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-254">hello **Virtual Machine Configuration**, which specifies that hello pool is comprised of Azure virtual machines.</span></span> <span data-ttu-id="83177-255">Эти виртуальные машины могут быть созданы из образов Windows или Linux.</span><span class="sxs-lookup"><span data-stu-id="83177-255">These VMs may be created from either Linux or Windows images.</span></span> 

    <span data-ttu-id="83177-256">При создании пула на основании hello конфигурации виртуальной машины, вы должны указать не только hello размер узлов hello и hello источник изображения, используемые toocreate hello их, но также hello **ссылка на изображение виртуальной машины** и hello Пакет **агента узла SKU** toobe на узлах, hello.</span><span class="sxs-lookup"><span data-stu-id="83177-256">When you create a pool based on hello Virtual Machine Configuration, you must specify not only hello size of hello nodes and hello source of hello images used toocreate them, but also hello **virtual machine image reference** and hello Batch **node agent SKU** toobe installed on hello nodes.</span></span> <span data-ttu-id="83177-257">Дополнительные сведения об указании этих свойств пула см. в статье [Подготовка вычислительных узлов Linux в пулах пакетной службы Azure](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="83177-257">For more information about specifying these pool properties, see [Provision Linux compute nodes in Azure Batch pools](batch-linux-nodes.md).</span></span>

- <span data-ttu-id="83177-258">Hello **конфигурация облачных служб**, который указывает этот пул hello состоит из узлов облачных служб Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-258">hello **Cloud Services Configuration**, which specifies that hello pool is comprised of Azure Cloud Services nodes.</span></span> <span data-ttu-id="83177-259">Облачные службы предоставляют *только* вычислительные узлы Windows.</span><span class="sxs-lookup"><span data-stu-id="83177-259">Cloud Services provide Windows compute nodes *only*.</span></span>

    <span data-ttu-id="83177-260">Доступных операционных системах для облачной службы конфигурации пулов, перечислены в hello [выпуски гостевой ОС Azure и Матрица совместимости пакетов SDK](../cloud-services/cloud-services-guestos-update-matrix.md).</span><span class="sxs-lookup"><span data-stu-id="83177-260">Available operating systems for Cloud Services Configuration pools are listed in hello [Azure Guest OS releases and SDK compatibility matrix](../cloud-services/cloud-services-guestos-update-matrix.md).</span></span> <span data-ttu-id="83177-261">При создании пула, который содержит узлы облачные службы, необходимо, чтобы размер узла toospecify hello и его *семейства ОС*.</span><span class="sxs-lookup"><span data-stu-id="83177-261">When you create a pool that contains Cloud Services nodes, you need toospecify hello node size and its *OS Family*.</span></span> <span data-ttu-id="83177-262">Облачные службы являются развернутой tooAzure быстрее, чем виртуальные машины под управлением Windows.</span><span class="sxs-lookup"><span data-stu-id="83177-262">Cloud Services are deployed tooAzure more quickly than virtual machines running Windows.</span></span> <span data-ttu-id="83177-263">Если вам нужны пулы вычислительных узлов Windows, вы можете обнаружить, что облачные службы предоставляют преимущества производительности с точки зрения времени развертывания.</span><span class="sxs-lookup"><span data-stu-id="83177-263">If you want pools of Windows compute nodes, you may find that Cloud Services provide a performance benefit in terms of deployment time.</span></span>

    * <span data-ttu-id="83177-264">Hello *семейства ОС* также определяет, какие версии .NET устанавливаются с hello ОС.</span><span class="sxs-lookup"><span data-stu-id="83177-264">hello *OS Family* also determines which versions of .NET are installed with hello OS.</span></span>
    * <span data-ttu-id="83177-265">Как и рабочих ролей в облачных служб, можно задавать *версия ОС* (Дополнительные сведения о рабочих ролей см. в разделе hello [узнать подробнее об облачных службах](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) раздела hello [облачные службы Общие сведения о](../cloud-services/cloud-services-choose-me.md)).</span><span class="sxs-lookup"><span data-stu-id="83177-265">As with worker roles within Cloud Services, you can specify an *OS Version* (for more information on worker roles, see hello [Tell me about cloud services](../cloud-services/cloud-services-choose-me.md#tell-me-about-cloud-services) section in hello [Cloud Services overview](../cloud-services/cloud-services-choose-me.md)).</span></span>
    * <span data-ttu-id="83177-266">Как с помощью рабочих ролей, рекомендуется указывать `*` для hello *версия ОС* , чтобы узлы hello, автоматически обновляются, и нет toonewly выпущены версии не toocater работ.</span><span class="sxs-lookup"><span data-stu-id="83177-266">As with worker roles, we recommend that you specify `*` for hello *OS Version* so that hello nodes are automatically upgraded, and there is no work required toocater toonewly released versions.</span></span> <span data-ttu-id="83177-267">Hello основном для выбора конкретной версии ОС используются совместимость приложений tooensure, позволяющий тестирования toobe выполняется перед предоставлением toobe версии hello обновлены обратной совместимости.</span><span class="sxs-lookup"><span data-stu-id="83177-267">hello primary use case for selecting a specific OS version is tooensure application compatibility, which allows backward compatibility testing toobe performed before allowing hello version toobe updated.</span></span> <span data-ttu-id="83177-268">После проверки hello *версия ОС* прерывания и повторно поставлен в очередь для пула hello может обновляться и могут быть установлены hello нового образа ОС — все выполняемые задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-268">After validation, hello *OS Version* for hello pool can be updated and hello new OS image can be installed--any running tasks are interrupted and requeued.</span></span>

<span data-ttu-id="83177-269">При создании пула необходимо tooselect hello соответствующие **nodeAgentSkuId**, в зависимости от hello ОС hello базового образа из вашего виртуального жесткого диска.</span><span class="sxs-lookup"><span data-stu-id="83177-269">When you create a pool, you need tooselect hello appropriate **nodeAgentSkuId**, depending on hello OS of hello base image of your VHD.</span></span> <span data-ttu-id="83177-270">Сопоставление идентификаторов SKU tootheir доступный узел агента можно получить ссылки на образ операционной системы, вызывающему Привет [SKU агента узла поддерживается список](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) операции.</span><span class="sxs-lookup"><span data-stu-id="83177-270">You can get a mapping of available node agent SKU ID's tootheir OS Image references by calling hello [List Supported Node Agent SKUs](https://docs.microsoft.com/rest/api/batchservice/list-supported-node-agent-skus) operation.</span></span>

<span data-ttu-id="83177-271">В разделе hello [учетной записи](#account) сведения о задании режима выделения пула hello при создании учетной записи пакетной.</span><span class="sxs-lookup"><span data-stu-id="83177-271">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

#### <a name="custom-images-for-virtual-machine-pools"></a><span data-ttu-id="83177-272">Пользовательские образы для пулов виртуальных машин</span><span class="sxs-lookup"><span data-stu-id="83177-272">Custom images for Virtual Machine pools</span></span>

<span data-ttu-id="83177-273">toouse пулы виртуальной машины tooprovision пользовательского образа, создайте учетная запись пакетной режим распределения пула hello подписки пользователя.</span><span class="sxs-lookup"><span data-stu-id="83177-273">toouse a custom image tooprovision Virtual Machine pools, create your Batch account with hello User Subscription pool allocation mode.</span></span> <span data-ttu-id="83177-274">В этом режиме пакет пулы выделяются в подписку hello, где находится учетная запись hello.</span><span class="sxs-lookup"><span data-stu-id="83177-274">With this mode, Batch pools are allocated into hello subscription where hello account resides.</span></span> <span data-ttu-id="83177-275">В разделе hello [учетной записи](#account) сведения о задании режима выделения пула hello при создании учетной записи пакетной.</span><span class="sxs-lookup"><span data-stu-id="83177-275">See hello [Account](#account) section for information on setting hello pool allocation mode when you create a Batch account.</span></span>

<span data-ttu-id="83177-276">toouse настраиваемого образа необходимо tooprepare hello образа путем обобщения.</span><span class="sxs-lookup"><span data-stu-id="83177-276">toouse a custom image, you'll need tooprepare hello image by generalizing it.</span></span> <span data-ttu-id="83177-277">Сведения о подготовке пользовательских образов Linux из виртуальных машин Azure см. в разделе [захвата toouse виртуальной Машине Linux Azure как шаблон](../virtual-machines/linux/capture-image-nodejs.md).</span><span class="sxs-lookup"><span data-stu-id="83177-277">For information about preparing custom Linux images from Azure VMs, see [Capture an Azure Linux VM toouse as a template](../virtual-machines/linux/capture-image-nodejs.md).</span></span> <span data-ttu-id="83177-278">Сведения о подготовке пользовательских образов под управлением Windows на основе виртуальных машин Azure см. в статье [Создание пользовательского образа виртуальной машины Azure с помощью PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span><span class="sxs-lookup"><span data-stu-id="83177-278">For information about preparing custom Windows images from Azure VMs, see [Create custom VM images with Azure PowerShell](../virtual-machines/windows/tutorial-custom-images.md).</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="83177-279">При подготовке настраиваемого образа, имейте в виду следующие hello.</span><span class="sxs-lookup"><span data-stu-id="83177-279">When preparing your custom image, keep in mind hello following:</span></span>
> - <span data-ttu-id="83177-280">Убедитесь, что hello базовый образ ОС используется tooprovision пулов пакета не имеют предварительно установленные расширения, Azure, такие как расширение пользовательского скрипта hello.</span><span class="sxs-lookup"><span data-stu-id="83177-280">Ensure that hello base OS image you use tooprovision your Batch pools does not have any pre-installed Azure extensions, such as hello Custom Script extension.</span></span> <span data-ttu-id="83177-281">Если образ hello содержит предварительно установленные расширения, Azure могут возникнуть проблемы, развертывание hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="83177-281">If hello image contains a pre-installed extension, Azure may encounter problems deploying hello VM.</span></span>
> - <span data-ttu-id="83177-282">Убедитесь, что hello базовый образ ОС указываемые использует hello временный диск по умолчанию, как hello агента узла пакетной в данный момент ожидает временного диска по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="83177-282">Ensure that hello base OS image you provide uses hello default temp drive, as hello Batch node agent currently expects hello default temp drive.</span></span>
>
>

<span data-ttu-id="83177-283">toocreate пула конфигурации виртуальной машины, используя пользовательский образ, потребуется один или несколько стандартных Azure учетных записей хранения toostore пользовательских образов виртуальных жестких ДИСКОВ.</span><span class="sxs-lookup"><span data-stu-id="83177-283">toocreate a Virtual Machine Configuration pool using a custom image, you'll need one or more standard Azure Storage accounts toostore your custom VHD images.</span></span> <span data-ttu-id="83177-284">Пользовательские образы хранятся в виде больших двоичных объектов.</span><span class="sxs-lookup"><span data-stu-id="83177-284">Custom images are stored as blobs.</span></span> <span data-ttu-id="83177-285">tooreference пользовательских образов при создании пула, укажите идентификаторы URI hello пользовательского образа VHD BLOB-объектов для hello hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) свойство hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) свойство.</span><span class="sxs-lookup"><span data-stu-id="83177-285">tooreference your custom images when you create a pool, specify hello URIs of hello custom image VHD blobs for hello [osDisk](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_osdisk) property of hello [virtualMachineConfiguration](https://docs.microsoft.com/rest/api/batchservice/add-a-pool-to-an-account#bk_vmconf) property.</span></span>

<span data-ttu-id="83177-286">Убедиться, что учетные записи хранения отвечают hello следующие критерии:</span><span class="sxs-lookup"><span data-stu-id="83177-286">Make sure that your storage accounts meet hello following criteria:</span></span>   

- <span data-ttu-id="83177-287">Hello учетных записей хранилища больших двоичных объектов VHD пользовательского образа содержащего hello должны toobe в hello той же подписке, как hello пакетной учетной записи (hello подписки пользователя).</span><span class="sxs-lookup"><span data-stu-id="83177-287">hello storage accounts containing hello custom image VHD blobs need toobe in hello same subscription as hello Batch account (hello user subscription).</span></span>
- <span data-ttu-id="83177-288">Hello указан учетные записи хранения должны toobe в hello же регионе, что hello пакетной учетной записи.</span><span class="sxs-lookup"><span data-stu-id="83177-288">hello specified storage accounts need toobe in hello same region as hello Batch account.</span></span>
- <span data-ttu-id="83177-289">Сейчас поддерживаются только стандартные учетные записи хранения общего назначения.</span><span class="sxs-lookup"><span data-stu-id="83177-289">Only standard general-purpose storage accounts are currently supported.</span></span> <span data-ttu-id="83177-290">Хранилище Azure Premium будет поддерживаться в будущих hello.</span><span class="sxs-lookup"><span data-stu-id="83177-290">Azure Premium storage will be supported in hello future.</span></span>
- <span data-ttu-id="83177-291">Вы можете указать одну учетную запись хранения с несколькими большими двоичными объектами пользовательских VHD-файлов или несколькими учетными записями хранения, каждая из которых имеет один большой двоичный объект.</span><span class="sxs-lookup"><span data-stu-id="83177-291">You can specify one storage account with multiple custom VHD blobs or multiple storage accounts each having a single blob.</span></span> <span data-ttu-id="83177-292">Мы рекомендуем toouse несколько учетных записей хранения tooget более высокую производительность.</span><span class="sxs-lookup"><span data-stu-id="83177-292">We recommend you toouse multiple storage accounts tooget a better performance.</span></span>
- <span data-ttu-id="83177-293">Один BLOB-объект уникальный пользовательского образа виртуального жесткого диска может поддерживать too40, экземпляры виртуальной Машины с Linux или 20 экземпляров виртуальной Машины Windows.</span><span class="sxs-lookup"><span data-stu-id="83177-293">One unique custom image VHD blob can support up too40 Linux VM instances or 20 Windows VM instances.</span></span> <span data-ttu-id="83177-294">Вам потребуется toocreate копии пулов toocreate hello VHD BLOB-объектов с больше виртуальных машин.</span><span class="sxs-lookup"><span data-stu-id="83177-294">You will need toocreate copies of hello VHD blob toocreate pools with more VMs.</span></span> <span data-ttu-id="83177-295">Например, пул с 200 виртуальных машин Windows должна 10 уникальный больших двоичных объектов VHD для hello **osDisk** свойство.</span><span class="sxs-lookup"><span data-stu-id="83177-295">For example, a pool with 200 Windows VMs needs 10 unique VHD blobs specified for hello **osDisk** property.</span></span>

<span data-ttu-id="83177-296">toocreate пул из образа с помощью портала Azure hello:</span><span class="sxs-lookup"><span data-stu-id="83177-296">toocreate a pool from a custom image using hello Azure portal:</span></span>

1. <span data-ttu-id="83177-297">Перейдите tooyour пакетной учетной записи в hello портал Azure.</span><span class="sxs-lookup"><span data-stu-id="83177-297">Navigate tooyour Batch account in hello Azure portal.</span></span>
2. <span data-ttu-id="83177-298">На hello **параметры** колонки, выберите hello **пулы** элемента меню.</span><span class="sxs-lookup"><span data-stu-id="83177-298">On hello **Settings** blade, select hello **Pools** menu item.</span></span>
3. <span data-ttu-id="83177-299">На hello **пулы** колонки, выберите hello **добавить** команду; hello **Добавление пула** отображается колонку.</span><span class="sxs-lookup"><span data-stu-id="83177-299">On hello **Pools** blade, select hello **Add** command; hello **Add pool** blade will be displayed.</span></span>
4. <span data-ttu-id="83177-300">Выберите **настраиваемое изображение (ОС Linux или Windows)** из hello **тип изображения** раскрывающегося списка.</span><span class="sxs-lookup"><span data-stu-id="83177-300">Select **Custom Image (Linux/Windows)** from hello **Image Type** dropdown.</span></span> <span data-ttu-id="83177-301">портал Hello отображает hello **настраиваемое изображение** выбора.</span><span class="sxs-lookup"><span data-stu-id="83177-301">hello portal displays hello **Custom Image** picker.</span></span> <span data-ttu-id="83177-302">Выберите один или несколько виртуальных жестких дисков из hello же hello контейнера и нажмите кнопку **выберите** кнопки.</span><span class="sxs-lookup"><span data-stu-id="83177-302">Choose one or more VHDs from hello same container and click hello **Select** button.</span></span> 
    <span data-ttu-id="83177-303">Поддержка нескольких виртуальных жестких дисков из разных учетных записей хранения и другие контейнеры будет добавлена в будущем hello.</span><span class="sxs-lookup"><span data-stu-id="83177-303">Support for multiple VHDs from different storage accounts and different containers will be added in hello future.</span></span>
5. <span data-ttu-id="83177-304">Правильный выбор hello **издателя, предложения и Sku** для пользовательских виртуальных жестких дисков выберите требуемого hello **кэширование** режиме, а затем заполните все hello других параметров для пула hello.</span><span class="sxs-lookup"><span data-stu-id="83177-304">Select hello correct **Publisher/Offer/Sku** for your custom VHDs, select hello desired **Caching** mode, then fill in all hello other parameters for hello pool.</span></span>
6. <span data-ttu-id="83177-305">toocheck Если кластер основан на настраиваемый образ, см. раздел hello **операционной системы** свойства раздела hello ресурсов сводки hello **пула** колонку.</span><span class="sxs-lookup"><span data-stu-id="83177-305">toocheck if a pool is based on a custom image, see hello **Operating System** property in hello resource summary section of hello **Pool** blade.</span></span> <span data-ttu-id="83177-306">Hello значение этого свойства должно быть **настраиваемый образ операционной системы**.</span><span class="sxs-lookup"><span data-stu-id="83177-306">hello value of this property should be **Custom VM image**.</span></span>
7. <span data-ttu-id="83177-307">Все пользовательские виртуальные жесткие диски, связанные с пулом, отображаются на hello пула **свойства** колонку.</span><span class="sxs-lookup"><span data-stu-id="83177-307">All custom VHDs associated with a pool are displayed on hello pool's **Properties** blade.</span></span>

### <a name="compute-node-type-and-target-number-of-nodes"></a><span data-ttu-id="83177-308">Тип вычислительного узла и целевое количество узлов</span><span class="sxs-lookup"><span data-stu-id="83177-308">Compute node type and target number of nodes</span></span>

<span data-ttu-id="83177-309">При создании пула можно указать, какие типы вычислительных узлов нужно и hello номер целевой для каждого.</span><span class="sxs-lookup"><span data-stu-id="83177-309">When you create a pool, you can specify which types of compute nodes you want and hello target number for each.</span></span> <span data-ttu-id="83177-310">Ниже приведены типы Hello двух вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-310">hello two types of compute nodes are:</span></span>

- <span data-ttu-id="83177-311">**Выделенные вычислительные узлы.**</span><span class="sxs-lookup"><span data-stu-id="83177-311">**Dedicated compute nodes.**</span></span> <span data-ttu-id="83177-312">Выделенные вычислительные узлы зарезервированы для рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="83177-312">Dedicated compute nodes are reserved for your workloads.</span></span> <span data-ttu-id="83177-313">Они дороже, чем узлы с низким приоритетом, но они гарантировано toonever возможность прерывания.</span><span class="sxs-lookup"><span data-stu-id="83177-313">They are more expensive than low-priority nodes, but they are guaranteed toonever be preempted.</span></span>

- <span data-ttu-id="83177-314">**Низкоприоритетные вычислительные узлы.**</span><span class="sxs-lookup"><span data-stu-id="83177-314">**Low-priority compute nodes.**</span></span> <span data-ttu-id="83177-315">Узлы с низким приоритетом воспользоваться излишком в Azure toorun рабочих нагрузок пакета.</span><span class="sxs-lookup"><span data-stu-id="83177-315">Low-priority nodes take advantage of surplus capacity in Azure toorun your Batch workloads.</span></span> <span data-ttu-id="83177-316">Они экономичнее (дешевле в час) по сравнению с выделенными узлами и выполняют рабочие нагрузки, требующие большого объема вычислительной мощности.</span><span class="sxs-lookup"><span data-stu-id="83177-316">Low-priority nodes are less expensive per hour than dedicated nodes, and enable workloads requiring a lot of compute power.</span></span> <span data-ttu-id="83177-317">Дополнительные сведения см. в статье [Использование низкоприоритетных виртуальных машин в пакетной службе (предварительная версия)](batch-low-pri-vms.md).</span><span class="sxs-lookup"><span data-stu-id="83177-317">For more information, see [Use low-priority VMs with Batch](batch-low-pri-vms.md).</span></span>

    <span data-ttu-id="83177-318">При недостаточном количестве избыточных ресурсов в Azure низкоприоритетные вычислительные узлы замещаются.</span><span class="sxs-lookup"><span data-stu-id="83177-318">Low-priority compute nodes may be preempted when Azure has insufficient surplus capacity.</span></span> <span data-ttu-id="83177-319">Если узел прерывается при выполнении задачи, задачи hello повторно поставлен в очередь и снова запустите после вычислительный узел снова станет доступным.</span><span class="sxs-lookup"><span data-stu-id="83177-319">If a node is preempted while running tasks, hello tasks are requeued and run again once a compute node becomes available again.</span></span> <span data-ttu-id="83177-320">Низкий приоритет узлы — это хороший вариант для рабочих нагрузок, где время выполнения задания hello гибок и hello работа распределяется между множество узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-320">Low-priority nodes are a good option for workloads where hello job completion time is flexible and hello work is distributed across many nodes.</span></span> <span data-ttu-id="83177-321">Прежде чем выбрать узлы toouse низкого приоритета для вашего сценария, убедитесь, что какой-либо работы потеряны из-за toopreemption будут минимальными и легко toorecreate.</span><span class="sxs-lookup"><span data-stu-id="83177-321">Before you decide toouse low-priority nodes for your scenario, make sure that any work lost due toopreemption will be minimal and easy toorecreate.</span></span>

    <span data-ttu-id="83177-322">Низкоприоритетные вычислительных узлов, доступны только для пакета учетные записи, созданные с hello пула выделения режимом слишком**пакетная служба**.</span><span class="sxs-lookup"><span data-stu-id="83177-322">Low-priority compute nodes are available only for Batch accounts created with hello pool allocation mode set too**Batch Service**.</span></span>

<span data-ttu-id="83177-323">Может включать оба низким приоритетом и выделенных вычислительных узлов в hello одного пула.</span><span class="sxs-lookup"><span data-stu-id="83177-323">You can have both low-priority and dedicated compute nodes in hello same pool.</span></span> <span data-ttu-id="83177-324">Каждый тип узла &mdash; выделенные и низкого приоритета &mdash; имеет свой собственный постановка задачи, для которого можно указать hello требуемого числа узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-324">Each type of node &mdash; low-priority and dedicated &mdash; has its own target setting, for which you can specify hello desired number of nodes.</span></span> 
    
<span data-ttu-id="83177-325">Hello количество вычислительных узлов — ссылка tooas *целевой* потому, что в некоторых ситуациях пуле могут не достичь hello требуемого числа узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-325">hello number of compute nodes is referred tooas a *target* because, in some situations, your pool might not reach hello desired number of nodes.</span></span> <span data-ttu-id="83177-326">Например, пул не может достичь hello целевой при достижении hello [квоты ядер](batch-quota-limit.md) для вашего пакета учетной записи сначала.</span><span class="sxs-lookup"><span data-stu-id="83177-326">For example, a pool might not achieve hello target if it reaches hello [core quota](batch-quota-limit.md) for your Batch account first.</span></span> <span data-ttu-id="83177-327">Или hello пула не может обеспечить целевой hello, если применено автоматическое масштабирование формулы toohello пул, который ограничивает максимальное количество узлов hello.</span><span class="sxs-lookup"><span data-stu-id="83177-327">Or, hello pool might not achieve hello target if you have applied an auto-scaling formula toohello pool that limits hello maximum number of nodes.</span></span>

<span data-ttu-id="83177-328">Дополнительные сведения о ценах на низкоприоритетные и выделенные вычислительные узлы см. на странице [цен на пакетную службу](https://azure.microsoft.com/pricing/details/batch/).</span><span class="sxs-lookup"><span data-stu-id="83177-328">For pricing information for both low-priority and dedicated compute nodes, see [Batch Pricing](https://azure.microsoft.com/pricing/details/batch/).</span></span>

### <a name="size-of-hello-compute-nodes"></a><span data-ttu-id="83177-329">Размер hello вычислительных узлов</span><span class="sxs-lookup"><span data-stu-id="83177-329">Size of hello compute nodes</span></span>

<span data-ttu-id="83177-330">**конфигурация облачных служб**, приведены в статье [Размеры для облачных служб](../cloud-services/cloud-services-sizes-specs.md).</span><span class="sxs-lookup"><span data-stu-id="83177-330">**Cloud Services Configuration** compute node sizes are listed in [Sizes for Cloud Services](../cloud-services/cloud-services-sizes-specs.md).</span></span> <span data-ttu-id="83177-331">Пакетная служба поддерживает все размеры облачных служб, кроме `ExtraSmall`, `STANDARD_A1_V2` и `STANDARD_A2_V2`.</span><span class="sxs-lookup"><span data-stu-id="83177-331">Batch supports all Cloud Services sizes except `ExtraSmall`, `STANDARD_A1_V2`, and `STANDARD_A2_V2`.</span></span>

<span data-ttu-id="83177-332">Размеры вычислительных узлов, доступные в **конфигурации виртуальной машины**, перечислены в статьях [Размеры виртуальных машин в Azure](../virtual-machines/linux/sizes.md) для Linux и [Размеры виртуальных машин в Azure](../virtual-machines/windows/sizes.md) для Windows.</span><span class="sxs-lookup"><span data-stu-id="83177-332">**Virtual Machine Configuration** compute node sizes are listed in [Sizes for virtual machines in Azure](../virtual-machines/linux/sizes.md) (Linux) and [Sizes for virtual machines in Azure](../virtual-machines/windows/sizes.md) (Windows).</span></span> <span data-ttu-id="83177-333">Пакетная служба поддерживает все размеры виртуальных машин Azure, кроме `STANDARD_A0`. Для хранилища класса Premium также не поддерживаются размеры таких серий: `STANDARD_GS`, `STANDARD_DS` и `STANDARD_DSV2`.</span><span class="sxs-lookup"><span data-stu-id="83177-333">Batch supports all Azure VM sizes except `STANDARD_A0` and those with premium storage (`STANDARD_GS`, `STANDARD_DS`, and `STANDARD_DSV2` series).</span></span>

<span data-ttu-id="83177-334">При выборе узла размер вычислений, рассмотрите возможность характеристики hello и требования hello приложений, которые вы будете запускать приложение на узлах hello.</span><span class="sxs-lookup"><span data-stu-id="83177-334">When selecting a compute node size, consider hello characteristics and requirements of hello applications you'll run on hello nodes.</span></span> <span data-ttu-id="83177-335">Аспекты, как ли многопоточного приложения hello и объем памяти, он использует может помочь определить размер узла наиболее подходящий и экономически эффективный hello.</span><span class="sxs-lookup"><span data-stu-id="83177-335">Aspects like whether hello application is multithreaded and how much memory it consumes can help determine hello most suitable and cost-effective node size.</span></span> <span data-ttu-id="83177-336">Это типичный tooselect размер узла, при условии, что одна задача будет выполняться на узле одновременно.</span><span class="sxs-lookup"><span data-stu-id="83177-336">It's typical tooselect a node size assuming one task will run on a node at a time.</span></span> <span data-ttu-id="83177-337">Однако это возможно toohave несколько задач (и поэтому нескольких экземпляров приложения) [параллельного выполнения](batch-parallel-node-tasks.md) на вычислительных узлах при выполнении задания.</span><span class="sxs-lookup"><span data-stu-id="83177-337">However, it is possible toohave multiple tasks (and therefore multiple application instances) [run in parallel](batch-parallel-node-tasks.md) on compute nodes during job execution.</span></span> <span data-ttu-id="83177-338">В этом случае это общие toochoose большего узла размер tooaccommodate hello увеличить требование выполнения параллельных задач.</span><span class="sxs-lookup"><span data-stu-id="83177-338">In this case, it is common toochoose a larger node size tooaccommodate hello increased demand of parallel task execution.</span></span> <span data-ttu-id="83177-339">Дополнительные сведения см. в описании атрибута [Политика планирования задач](#task-scheduling-policy).</span><span class="sxs-lookup"><span data-stu-id="83177-339">See [Task scheduling policy](#task-scheduling-policy) for more information.</span></span>

<span data-ttu-id="83177-340">Все узлы hello в пуле, hello же размера.</span><span class="sxs-lookup"><span data-stu-id="83177-340">All of hello nodes in a pool are hello same size.</span></span> <span data-ttu-id="83177-341">Если предполагалось toorun приложений с различными требованиями системы или загрузить уровней, рекомендуется использовать отдельные пулы.</span><span class="sxs-lookup"><span data-stu-id="83177-341">If you intend toorun applications with differing system requirements and/or load levels, we recommend that you use separate pools.</span></span>

### <a name="scaling-policy"></a><span data-ttu-id="83177-342">Политика масштабирования</span><span class="sxs-lookup"><span data-stu-id="83177-342">Scaling policy</span></span>

<span data-ttu-id="83177-343">Для динамических рабочих нагрузок, можно написать и применить [формула автоматического масштабирования](#scaling-compute-resources) tooa пула.</span><span class="sxs-lookup"><span data-stu-id="83177-343">For dynamic workloads, you can write and apply an [auto-scaling formula](#scaling-compute-resources) tooa pool.</span></span> <span data-ttu-id="83177-344">Hello пакетная служба периодически оценивает формулу и корректирует hello количество узлов в рамках hello пула на основе различных пула, задания и параметры задачи, которые можно задать.</span><span class="sxs-lookup"><span data-stu-id="83177-344">hello Batch service periodically evaluates your formula and adjusts hello number of nodes within hello pool based on various pool, job, and task parameters that you can specify.</span></span>

### <a name="task-scheduling-policy"></a><span data-ttu-id="83177-345">Политика планирования задач</span><span class="sxs-lookup"><span data-stu-id="83177-345">Task scheduling policy</span></span>

<span data-ttu-id="83177-346">Hello [Макс. заданий на узел](batch-parallel-node-tasks.md) конфигурации параметр определяет максимальное число задач, которые могут выполняться параллельно на каждом вычислительном узле в пуле hello hello.</span><span class="sxs-lookup"><span data-stu-id="83177-346">hello [max tasks per node](batch-parallel-node-tasks.md) configuration option determines hello maximum number of tasks that can be run in parallel on each compute node within hello pool.</span></span>

<span data-ttu-id="83177-347">Конфигурация по умолчанию Hello указывает, что одна задача одновременно работает на узле, но существуют сценарии, где полезным toohave двух или более задач одновременно выполнять на узле.</span><span class="sxs-lookup"><span data-stu-id="83177-347">hello default configuration specifies that one task at a time runs on a node, but there are scenarios where it is beneficial toohave two or more tasks executed on a node simultaneously.</span></span> <span data-ttu-id="83177-348">В разделе hello [пример сценария](batch-parallel-node-tasks.md#example-scenario) в hello [узел параллельных задач](batch-parallel-node-tasks.md) toosee статьи, как можно использовать несколько задач на каждом узле.</span><span class="sxs-lookup"><span data-stu-id="83177-348">See hello [example scenario](batch-parallel-node-tasks.md#example-scenario) in hello [concurrent node tasks](batch-parallel-node-tasks.md) article toosee how you can benefit from multiple tasks per node.</span></span>

<span data-ttu-id="83177-349">Можно также указать *тип заливки* определяющий равномерно распределяет hello задачи для всех узлов в пуле пакет или пакеты каждый узел с hello максимальное число задач перед назначением узел tooanother задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-349">You can also specify a *fill type* which determines whether Batch spreads hello tasks evenly across all nodes in a pool, or packs each node with hello maximum number of tasks before assigning tasks tooanother node.</span></span>

### <a name="communication-status-for-compute-nodes"></a><span data-ttu-id="83177-350">Состояние взаимодействия между вычислительными узлами</span><span class="sxs-lookup"><span data-stu-id="83177-350">Communication status for compute nodes</span></span>

<span data-ttu-id="83177-351">В большинстве случаев задачи друг от друга и не обязательно toocommunicate друг с другом.</span><span class="sxs-lookup"><span data-stu-id="83177-351">In most scenarios, tasks operate independently and do not need toocommunicate with one another.</span></span> <span data-ttu-id="83177-352">Но в некоторых приложениях задачи должны взаимодействовать (например, при использовании [задач с несколькими экземплярами](batch-mpi.md)).</span><span class="sxs-lookup"><span data-stu-id="83177-352">However, there are some applications in which tasks must communicate, like [MPI scenarios](batch-mpi.md).</span></span>

<span data-ttu-id="83177-353">Можно настроить tooallow пула **связи между узлами**, после чего узлов в пуле могут обмениваться данными во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="83177-353">You can configure a pool tooallow **internode communication**, so that nodes within a pool can communicate at runtime.</span></span> <span data-ttu-id="83177-354">При включении обмена данными между узлами узлы в пулах с конфигурацией облачных служб могут взаимодействовать друг с другом через порты с номерами выше 1100. При этом пулы с конфигурацией виртуальной машины не ограничивают трафик через какой-либо порт.</span><span class="sxs-lookup"><span data-stu-id="83177-354">When internode communication is enabled, nodes in Cloud Services Configuration pools can communicate with each other on ports greater than 1100, and Virtual Machine Configuration pools do not restrict traffic on any port.</span></span>

<span data-ttu-id="83177-355">Обратите внимание, что включение связи между узлами также влияет на расположение hello hello узлов в кластерах может ограничить максимальное количество узлов в пуле для hello из-за ограничений развертывания.</span><span class="sxs-lookup"><span data-stu-id="83177-355">Note that enabling internode communication also impacts hello placement of hello nodes within clusters and might limit hello maximum number of nodes in a pool because of deployment restrictions.</span></span> <span data-ttu-id="83177-356">Если приложение не требует связи между узлами, hello пакетной службы можно выделить большим числом узлов toohello пул из многих различных кластеров и центров обработки данных tooenable увеличить power параллельной обработки.</span><span class="sxs-lookup"><span data-stu-id="83177-356">If your application does not require communication between nodes, hello Batch service can allocate a potentially large number of nodes toohello pool from many different clusters and datacenters tooenable increased parallel processing power.</span></span>

### <a name="start-tasks-for-compute-nodes"></a><span data-ttu-id="83177-357">Задачи запуска для вычислительных узлов</span><span class="sxs-lookup"><span data-stu-id="83177-357">Start tasks for compute nodes</span></span>

<span data-ttu-id="83177-358">Необязательный Hello *запустить задачу* выполняет на каждом узле, как этот узел присоединение hello пулу, и каждый раз, когда узел перезапуска или повторного создания образа.</span><span class="sxs-lookup"><span data-stu-id="83177-358">hello optional *start task* executes on each node as that node joins hello pool, and each time a node is restarted or reimaged.</span></span> <span data-ttu-id="83177-359">Задача запуска Hello особенно полезна для подготовки вычислительных узлов для выполнения задач, таких как установка приложений hello выполняемых задач в вычислительных узлах hello hello.</span><span class="sxs-lookup"><span data-stu-id="83177-359">hello start task is especially useful for preparing compute nodes for hello execution of tasks, like installing hello applications that your tasks run on hello compute nodes.</span></span>

### <a name="application-packages"></a><span data-ttu-id="83177-360">Пакеты приложений</span><span class="sxs-lookup"><span data-stu-id="83177-360">Application packages</span></span>

<span data-ttu-id="83177-361">Можно указать [пакетов приложений](#application-packages) toodeploy toohello вычислительных узлов в пуле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-361">You can specify [application packages](#application-packages) toodeploy toohello compute nodes in hello pool.</span></span> <span data-ttu-id="83177-362">Пакеты приложений предоставляют упрощенное развертывание и управление версиями приложения hello, которые выполняются задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-362">Application packages provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="83177-363">Пакеты приложений, которые указываются для пула, устанавливаются на каждый вычислительный узел, который присоединяется к пулу, а также каждый раз, когда узел перезагружается или для него пересоздается образ.</span><span class="sxs-lookup"><span data-stu-id="83177-363">Application packages that you specify for a pool are installed on every node that joins that pool, and every time a node is rebooted or reimaged.</span></span>

> [!NOTE]
> <span data-ttu-id="83177-364">Пакеты приложений поддерживаются во всех пулах пакетной службы, созданных после 5 июля 2017 г.</span><span class="sxs-lookup"><span data-stu-id="83177-364">Application packages are supported on all Batch pools created after 5 July 2017.</span></span> <span data-ttu-id="83177-365">Они поддерживаются в пулах пакета, созданные между 10 марта 2016 г. и 5 июля 2017 г., только в том случае, если пул hello был создан с помощью конфигурации облачной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-365">They are supported on Batch pools created between 10 March 2016 and 5 July 2017 only if hello pool was created using a Cloud Service configuration.</span></span> <span data-ttu-id="83177-366">Пакеты приложений не поддерживают пулы пакета, созданные предыдущей too10 марта 2016 г.</span><span class="sxs-lookup"><span data-stu-id="83177-366">Batch pools created prior too10 March 2016 do not support application packages.</span></span> <span data-ttu-id="83177-367">Дополнительные сведения об использовании приложения пакетах toodeploy узлы tooyour пакета приложений, в разделе [развертывания приложений toocompute узлов с пакетами приложения пакета](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="83177-367">For more information about using application packages toodeploy your applications tooyour Batch nodes, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
>
>

### <a name="network-configuration"></a><span data-ttu-id="83177-368">Конфигурация сети</span><span class="sxs-lookup"><span data-stu-id="83177-368">Network configuration</span></span>

<span data-ttu-id="83177-369">Можно указать подсети hello Azure [виртуальной сети (VNet)](../virtual-network/virtual-networks-overview.md) в какой hello пул вычислительных узлов должны создаваться.</span><span class="sxs-lookup"><span data-stu-id="83177-369">You can specify hello subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md) in which hello pool's compute nodes should be created.</span></span> <span data-ttu-id="83177-370">В разделе hello [сетевой конфигурации пула](#pool-network-configuration) Дополнительные сведения.</span><span class="sxs-lookup"><span data-stu-id="83177-370">See hello [Pool network configuration](#pool-network-configuration) section for more information.</span></span>


## <a name="job"></a><span data-ttu-id="83177-371">Задание</span><span class="sxs-lookup"><span data-stu-id="83177-371">Job</span></span>
<span data-ttu-id="83177-372">Задание представляет собой набор задач.</span><span class="sxs-lookup"><span data-stu-id="83177-372">A job is a collection of tasks.</span></span> <span data-ttu-id="83177-373">Он управляет, как выполняется вычисление задачами на вычислительных узлах hello в пуле.</span><span class="sxs-lookup"><span data-stu-id="83177-373">It manages how computation is performed by its tasks on hello compute nodes in a pool.</span></span>

* <span data-ttu-id="83177-374">Задание Hello указывает hello **пула** в какой hello работа будет toobe запуска.</span><span class="sxs-lookup"><span data-stu-id="83177-374">hello job specifies hello **pool** in which hello work is toobe run.</span></span> <span data-ttu-id="83177-375">Вы можете создавать отдельный пул для каждого задания или использовать один пул для множества заданий.</span><span class="sxs-lookup"><span data-stu-id="83177-375">You can create a new pool for each job, or use one pool for many jobs.</span></span> <span data-ttu-id="83177-376">Кроме того, вы можете создавать пул для каждого задания, включенного в расписание, или единый пул для всех заданий в одном расписании.</span><span class="sxs-lookup"><span data-stu-id="83177-376">You can create a pool for each job that is associated with a job schedule, or for all jobs that are associated with a job schedule.</span></span>
* <span data-ttu-id="83177-377">Вы можете указать **приоритет задания**, но это необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="83177-377">You can specify an optional **job priority**.</span></span> <span data-ttu-id="83177-378">При отправке задания с более высоким приоритетом, чем задания, выполняемые задачи hello hello более высокий приоритет задания добавляются в очередь hello раньше задачи для задания hello более низким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="83177-378">When a job is submitted with a higher priority than jobs that are currently in progress, hello tasks for hello higher-priority job are inserted into hello queue ahead of tasks for hello lower-priority jobs.</span></span> <span data-ttu-id="83177-379">Задачи с более низким приоритетом, которые уже выполняются, прерываться не будут.</span><span class="sxs-lookup"><span data-stu-id="83177-379">Tasks in lower-priority jobs that are already running are not preempted.</span></span>
* <span data-ttu-id="83177-380">Можно использовать задание **ограничения** toospecify некоторые ограничения для заданий:</span><span class="sxs-lookup"><span data-stu-id="83177-380">You can use job **constraints** toospecify certain limits for your jobs:</span></span>

    <span data-ttu-id="83177-381">Можно задать **wallclock максимальное время**таким образом, если задание выполняется дольше заданного максимального wallclock времени hello, завершаются задания hello и всех его задач.</span><span class="sxs-lookup"><span data-stu-id="83177-381">You can set a **maximum wallclock time**, so that if a job runs for longer than hello maximum wallclock time that is specified, hello job and all of its tasks are terminated.</span></span>

    <span data-ttu-id="83177-382">Пакетная служба может обнаруживать и повторно выполнять незавершенные задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-382">Batch can detect and then retry failed tasks.</span></span> <span data-ttu-id="83177-383">Можно указать hello **максимальное количество повторов задачи** как ограничение, является ли задача *всегда* или *никогда не* повторено.</span><span class="sxs-lookup"><span data-stu-id="83177-383">You can specify hello **maximum number of task retries** as a constraint, including whether a task is *always* or *never* retried.</span></span> <span data-ttu-id="83177-384">Повторение задачи означает, что эта задача hello будет toobe повторно поставлен в очередь, снова запустите.</span><span class="sxs-lookup"><span data-stu-id="83177-384">Retrying a task means that hello task is requeued toobe run again.</span></span>
* <span data-ttu-id="83177-385">Клиентское приложение может добавить задание tooa задач или указать [задачи диспетчера заданий](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="83177-385">Your client application can add tasks tooa job, or you can specify a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="83177-386">Задачи диспетчера заданий содержит hello сведения, необходимые toocreate hello необходимые задачи для задания, с помощью задачи диспетчера заданий hello, выполняются на одном из hello вычислительных узлов в пуле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-386">A job manager task contains hello information that is necessary toocreate hello required tasks for a job, with hello job manager task being run on one of hello compute nodes in hello pool.</span></span> <span data-ttu-id="83177-387">Hello задачи диспетчера заданий обработки специально с пакетной--он помещается в очередь как можно скорее hello задание создается и перезапускается, если происходит сбой.</span><span class="sxs-lookup"><span data-stu-id="83177-387">hello job manager task is handled specifically by Batch--it is queued as soon as hello job is created, and is restarted if it fails.</span></span> <span data-ttu-id="83177-388">Задачи диспетчера заданий — *необходимые* для заданий, созданных [расписания задания](#scheduled-jobs) так как это hello единственным способом toodefine hello задачи перед созданием задания hello.</span><span class="sxs-lookup"><span data-stu-id="83177-388">A job manager task is *required* for jobs that are created by a [job schedule](#scheduled-jobs) because it is hello only way toodefine hello tasks before hello job is instantiated.</span></span>
* <span data-ttu-id="83177-389">По умолчанию задания остаются в активном состоянии hello после выполнения всех задач в задании hello.</span><span class="sxs-lookup"><span data-stu-id="83177-389">By default, jobs remain in hello active state when all tasks within hello job are complete.</span></span> <span data-ttu-id="83177-390">Это поведение можно изменить, чтобы hello задания автоматически прекращается после завершения всех задач в задании hello.</span><span class="sxs-lookup"><span data-stu-id="83177-390">You can change this behavior so that hello job is automatically terminated when all tasks in hello job are complete.</span></span> <span data-ttu-id="83177-391">Задание набора hello **onAllTasksComplete** свойство ([OnAllTasksComplete] [ net_onalltaskscomplete] в пакете .NET) слишком*terminatejob* tooautomatically завершить задание hello, если все задачи находятся в состоянии завершения hello.</span><span class="sxs-lookup"><span data-stu-id="83177-391">Set hello job's **onAllTasksComplete** property ([OnAllTasksComplete][net_onalltaskscomplete] in Batch .NET) too*terminatejob* tooautomatically terminate hello job when all of its tasks are in hello completed state.</span></span>

    <span data-ttu-id="83177-392">Обратите внимание, что служба Batch hello считает, что задание с *не* toohave задачи завершены все его задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-392">Note that hello Batch service considers a job with *no* tasks toohave all of its tasks completed.</span></span> <span data-ttu-id="83177-393">Поэтому этот параметр чаще всего используется с [задачами диспетчера заданий](#job-manager-task).</span><span class="sxs-lookup"><span data-stu-id="83177-393">Therefore, this option is most commonly used with a [job manager task](#job-manager-task).</span></span> <span data-ttu-id="83177-394">Если вы хотите toouse завершения автоматического задания без диспетчера заданий, изначально необходимо задать новое задание **onAllTasksComplete** свойство слишком*noaction*, установите для него слишком*terminatejob* только после завершения задания toohello задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-394">If you want toouse automatic job termination without a job manager, you should initially set a new job's **onAllTasksComplete** property too*noaction*, then set it too*terminatejob* only after you've finished adding tasks toohello job.</span></span>

### <a name="job-priority"></a><span data-ttu-id="83177-395">приоритет задания</span><span class="sxs-lookup"><span data-stu-id="83177-395">Job priority</span></span>
<span data-ttu-id="83177-396">Можно назначить toojobs приоритет, созданного в пакете.</span><span class="sxs-lookup"><span data-stu-id="83177-396">You can assign a priority toojobs that you create in Batch.</span></span> <span data-ttu-id="83177-397">Hello пакетная служба использует значение приоритета hello hello задания toodetermine hello порядок планирования заданий в учетной записи (не путать с toobe [запланированное задание](#scheduled-jobs)).</span><span class="sxs-lookup"><span data-stu-id="83177-397">hello Batch service uses hello priority value of hello job toodetermine hello order of job scheduling within an account (this is not toobe confused with a [scheduled job](#scheduled-jobs)).</span></span> <span data-ttu-id="83177-398">значения приоритета Hello в диапазоне от -1000 too1000, с -1000 является низким приоритетом hello и 1000, hello высокий.</span><span class="sxs-lookup"><span data-stu-id="83177-398">hello priority values range from -1000 too1000, with -1000 being hello lowest priority and 1000 being hello highest.</span></span> <span data-ttu-id="83177-399">tooupdate hello приоритет задания, вызов hello [обновление свойств hello задания] [ rest_update_job] операции (пакета REST), или изменить hello [CloudJob.Priority] [ net_cloudjob_priority] свойство (пакета .NET).</span><span class="sxs-lookup"><span data-stu-id="83177-399">tooupdate hello priority of a job, call hello [Update hello properties of a job][rest_update_job] operation (Batch REST), or modify hello [CloudJob.Priority][net_cloudjob_priority] property (Batch .NET).</span></span>

<span data-ttu-id="83177-400">В рамках hello учетную запись, более высокий приоритет задания имеют расписание приоритет над задания с более низким приоритетом.</span><span class="sxs-lookup"><span data-stu-id="83177-400">Within hello same account, higher-priority jobs have scheduling precedence over lower-priority jobs.</span></span> <span data-ttu-id="83177-401">Задания с более высоким приоритетом, относящиеся к одной учетной записи, не имеют преимущества при планировании относительно других заданий с более низким приоритетом, относящихся к другой учетной записи.</span><span class="sxs-lookup"><span data-stu-id="83177-401">A job with a higher-priority value in one account does not have scheduling precedence over another job with a lower-priority value in a different account.</span></span>

<span data-ttu-id="83177-402">Задания распределяются по пулам независимо друг от друга.</span><span class="sxs-lookup"><span data-stu-id="83177-402">Job scheduling across pools is independent.</span></span> <span data-ttu-id="83177-403">Если используется несколько пулов, задание с более высоким приоритетом не обязательно будет выполняться первым. Задание задерживается, если в связанном с ним пуле недостаточно свободных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-403">Between different pools, it is not guaranteed that a higher-priority job is scheduled first if its associated pool is short of idle nodes.</span></span> <span data-ttu-id="83177-404">В hello же пуле заданий с hello таким же уровнем приоритета имеют одинаковую вероятность расписанию.</span><span class="sxs-lookup"><span data-stu-id="83177-404">In hello same pool, jobs with hello same priority level have an equal chance of being scheduled.</span></span>

### <a name="scheduled-jobs"></a><span data-ttu-id="83177-405">Запланированные задания</span><span class="sxs-lookup"><span data-stu-id="83177-405">Scheduled jobs</span></span>
<span data-ttu-id="83177-406">[Задание расписания] [ rest_job_schedules] позволяют toocreate повторяющихся заданий в hello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-406">[Job schedules][rest_job_schedules] enable you toocreate recurring jobs within hello Batch service.</span></span> <span data-ttu-id="83177-407">Расписание задания указывает, когда toorun заданий и включает в себя спецификации hello для запуска toobe заданий hello.</span><span class="sxs-lookup"><span data-stu-id="83177-407">A job schedule specifies when toorun jobs and includes hello specifications for hello jobs toobe run.</span></span> <span data-ttu-id="83177-408">Можно указать длительность hello hello расписания — время и при hello расписание действует--и как часто задания создаются во время hello запланированного периода.</span><span class="sxs-lookup"><span data-stu-id="83177-408">You can specify hello duration of hello schedule--how long and when hello schedule is in effect--and how frequently jobs are created during hello scheduled period.</span></span>

## <a name="task"></a><span data-ttu-id="83177-409">Задача</span><span class="sxs-lookup"><span data-stu-id="83177-409">Task</span></span>
<span data-ttu-id="83177-410">Задача представляет собой единицу вычисления, которая связана с заданием</span><span class="sxs-lookup"><span data-stu-id="83177-410">A task is a unit of computation that is associated with a job.</span></span> <span data-ttu-id="83177-411">и выполняется на узле.</span><span class="sxs-lookup"><span data-stu-id="83177-411">It runs on a node.</span></span> <span data-ttu-id="83177-412">Задачи назначаются tooa узел для выполнения или помещаются в очередь, пока не освободится узла.</span><span class="sxs-lookup"><span data-stu-id="83177-412">Tasks are assigned tooa node for execution, or are queued until a node becomes free.</span></span> <span data-ttu-id="83177-413">Проще говоря, задача выполняет один или несколько программ или сценариев в вычислительный узел tooperform hello стоящих перед вами сделать.</span><span class="sxs-lookup"><span data-stu-id="83177-413">Put simply, a task runs one or more programs or scripts on a compute node tooperform hello work you need done.</span></span>

<span data-ttu-id="83177-414">При создании задачи можно указать следующее:</span><span class="sxs-lookup"><span data-stu-id="83177-414">When you create a task, you can specify:</span></span>

* <span data-ttu-id="83177-415">Hello **командной строки** для задачи «hello».</span><span class="sxs-lookup"><span data-stu-id="83177-415">hello **command line** for hello task.</span></span> <span data-ttu-id="83177-416">Это hello командную строку, которая запускает приложения или сценария на вычислительном узле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-416">This is hello command line that runs your application or script on hello compute node.</span></span>

    <span data-ttu-id="83177-417">Очень важно, что toonote, hello командной строки не фактически выполняется в оболочке.</span><span class="sxs-lookup"><span data-stu-id="83177-417">It is important toonote that hello command line does not actually run under a shell.</span></span> <span data-ttu-id="83177-418">Таким образом, он не может принимать изначально преимуществами функции оболочки, например [переменной среды](#environment-settings-for-tasks) расширения (сюда входят hello `PATH`).</span><span class="sxs-lookup"><span data-stu-id="83177-418">Therefore, it cannot natively take advantage of shell features like [environment variable](#environment-settings-for-tasks) expansion (this includes hello `PATH`).</span></span> <span data-ttu-id="83177-419">tootake преимущества таких функций необходимо вызвать оболочки hello в командной строке hello — например, путем запуска `cmd.exe` на узлах Windows или `/bin/sh` в Linux:</span><span class="sxs-lookup"><span data-stu-id="83177-419">tootake advantage of such features, you must invoke hello shell in hello command line--for example, by launching `cmd.exe` on Windows nodes or `/bin/sh` on Linux:</span></span>

    `cmd /c MyTaskApplication.exe %MY_ENV_VAR%`

    `/bin/sh -c MyTaskApplication $MY_ENV_VAR`

    <span data-ttu-id="83177-420">Если задачи должны toorun приложению или сценарию, который не находится в hello узла `PATH` или ссылок на переменные среды, вызов оболочки hello явно в hello задачи командной строки.</span><span class="sxs-lookup"><span data-stu-id="83177-420">If your tasks need toorun an application or script that is not in hello node's `PATH` or reference environment variables, invoke hello shell explicitly in hello task command line.</span></span>
* <span data-ttu-id="83177-421">**Файлы ресурсов** , содержащие toobe данных hello обработки.</span><span class="sxs-lookup"><span data-stu-id="83177-421">**Resource files** that contain hello data toobe processed.</span></span> <span data-ttu-id="83177-422">Эти файлы являются узел toohello автоматически копируются из хранилища больших двоичных объектов в учетной записи хранилища Azure общего назначения, перед выполнением задачи hello командной строки.</span><span class="sxs-lookup"><span data-stu-id="83177-422">These files are automatically copied toohello node from Blob storage in a general-purpose Azure Storage account before hello task's command line is executed.</span></span> <span data-ttu-id="83177-423">Дополнительные сведения см. в разделе разделы hello [задачи запуска](#start-task) и [файлов и каталогов](#files-and-directories).</span><span class="sxs-lookup"><span data-stu-id="83177-423">For more information, see hello sections [Start task](#start-task) and [Files and directories](#files-and-directories).</span></span>
* <span data-ttu-id="83177-424">Hello **переменных среды** , требуемые для приложения.</span><span class="sxs-lookup"><span data-stu-id="83177-424">hello **environment variables** that are required by your application.</span></span> <span data-ttu-id="83177-425">Дополнительные сведения см. в разделе hello [параметры среды для задачи](#environment-settings-for-tasks) раздела.</span><span class="sxs-lookup"><span data-stu-id="83177-425">For more information, see hello [Environment settings for tasks](#environment-settings-for-tasks) section.</span></span>
* <span data-ttu-id="83177-426">Hello **ограничения** под какие hello должна выполняться задача.</span><span class="sxs-lookup"><span data-stu-id="83177-426">hello **constraints** under which hello task should execute.</span></span> <span data-ttu-id="83177-427">К примеру, следующие ограничения максимального времени hello задачи hello допускается toorun hello максимальное количество раз, следует повторить задачи, завершившейся сбоем, а hello максимальное время сохраняются файлы в рабочий каталог hello задач.</span><span class="sxs-lookup"><span data-stu-id="83177-427">For example, constraints include hello maximum time that hello task is allowed toorun, hello maximum number of times a failed task should be retried, and hello maximum time that files in hello task's working directory are retained.</span></span>
* <span data-ttu-id="83177-428">**Пакеты приложений** toodeploy toohello вычислительного узла, на какие hello задача — запланированных toorun.</span><span class="sxs-lookup"><span data-stu-id="83177-428">**Application packages** toodeploy toohello compute node on which hello task is scheduled toorun.</span></span> <span data-ttu-id="83177-429">[Пакеты приложений](#application-packages) предоставляют упрощенное развертывание и управление версиями приложения hello, которые выполняются задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-429">[Application packages](#application-packages) provide simplified deployment and versioning of hello applications that your tasks run.</span></span> <span data-ttu-id="83177-430">Пакеты приложений уровня задач особенно полезны в общий пул средах, где различные задания выполняются на один пул и пул hello не удаляется при завершении задания.</span><span class="sxs-lookup"><span data-stu-id="83177-430">Task-level application packages are especially useful in shared-pool environments, where different jobs are run on one pool, and hello pool is not deleted when a job is completed.</span></span> <span data-ttu-id="83177-431">Если в задании содержится меньшее количество задач, чем узлы в пуле hello, пакеты приложения задач можно свести к минимуму передачи данных так, как приложение будет развернутой toohello только узлы, выполнять задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-431">If your job has fewer tasks than nodes in hello pool, task application packages can minimize data transfer since your application is deployed only toohello nodes that run tasks.</span></span>

<span data-ttu-id="83177-432">В дополнение к этому tootasks, определять вычисления tooperform на узле, hello следующие специальные действия также обеспечивается hello пакетной службы:</span><span class="sxs-lookup"><span data-stu-id="83177-432">In addition tootasks you define tooperform computation on a node, hello following special tasks are also provided by hello Batch service:</span></span>

* [<span data-ttu-id="83177-433">Задача запуска</span><span class="sxs-lookup"><span data-stu-id="83177-433">Start task</span></span>](#start-task)
* [<span data-ttu-id="83177-434">Задача диспетчера заданий</span><span class="sxs-lookup"><span data-stu-id="83177-434">Job manager task</span></span>](#job-manager-task)
* [<span data-ttu-id="83177-435">Задачи подготовки и завершения заданий.</span><span class="sxs-lookup"><span data-stu-id="83177-435">Job preparation and release tasks</span></span>](#job-preparation-and-release-tasks)
* [<span data-ttu-id="83177-436">Задачи с несколькими экземплярами</span><span class="sxs-lookup"><span data-stu-id="83177-436">Multi-instance tasks (MPI)</span></span>](#multi-instance-tasks)
* [<span data-ttu-id="83177-437">Зависимости задачи</span><span class="sxs-lookup"><span data-stu-id="83177-437">Task dependencies</span></span>](#task-dependencies)

### <a name="start-task"></a><span data-ttu-id="83177-438">Задача запуска</span><span class="sxs-lookup"><span data-stu-id="83177-438">Start task</span></span>
<span data-ttu-id="83177-439">Связав **запустить задачу** с пулом, можно подготовить hello операционной среде из его узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-439">By associating a **start task** with a pool, you can prepare hello operating environment of its nodes.</span></span> <span data-ttu-id="83177-440">Например можно выполнять действия, как установка приложения hello, выполняемых задач или запуск фоновых процессов.</span><span class="sxs-lookup"><span data-stu-id="83177-440">For example, you can perform actions like installing hello applications that your tasks run or starting background processes.</span></span> <span data-ttu-id="83177-441">Задача запуска Hello выполняется каждый раз при загрузке узла, при условии, что он остается в пуле hello — в том числе hello узел сначала добавлена toohello пул и при его перезапуска или повторного создания образа.</span><span class="sxs-lookup"><span data-stu-id="83177-441">hello start task runs every time a node starts, for as long as it remains in hello pool--including when hello node is first added toohello pool and when it is restarted or reimaged.</span></span>

<span data-ttu-id="83177-442">Основным преимуществом hello задачи запуска — что он может содержать все hello сведения, необходимые tooconfigure вычислительных узлов и устанавливать приложения hello, необходимые для выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-442">A primary benefit of hello start task is that it can contain all of hello information that is necessary tooconfigure a compute node and install hello applications that are required for task execution.</span></span> <span data-ttu-id="83177-443">Таким образом увеличение числа hello узлов в пуле похож на определение hello. количество новых целевой узел.</span><span class="sxs-lookup"><span data-stu-id="83177-443">Therefore, increasing hello number of nodes in a pool is as simple as specifying hello new target node count.</span></span> <span data-ttu-id="83177-444">Задача запуска Hello сведения hello пакетной службы hello, необходимые tooconfigure hello новых узлов и подготовить их для принятия задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-444">hello start task provides hello Batch service hello information that is needed tooconfigure hello new nodes and get them ready for accepting tasks.</span></span>

<span data-ttu-id="83177-445">Как и в любой задаче пакетной службы Azure, можно указать список **файлы ресурсов** в [хранилища Azure][azure_storage], кроме tooa **командной строки** toobe выполнена.</span><span class="sxs-lookup"><span data-stu-id="83177-445">As with any Azure Batch task, you can specify a list of **resource files** in [Azure Storage][azure_storage], in addition tooa **command line** toobe executed.</span></span> <span data-ttu-id="83177-446">Пакетная служба Hello сначала копирует узел toohello hello ресурсов файлы из хранилища Azure, а затем запускается hello командной строки.</span><span class="sxs-lookup"><span data-stu-id="83177-446">hello Batch service first copies hello resource files toohello node from Azure Storage, and then runs hello command line.</span></span> <span data-ttu-id="83177-447">Для задачи запуска пула список файлов hello обычно содержит приложение hello задач и его зависимости.</span><span class="sxs-lookup"><span data-stu-id="83177-447">For a pool start task, hello file list typically contains hello task application and its dependencies.</span></span>

<span data-ttu-id="83177-448">Тем не менее задача запуска hello также может включать ссылку toobe данные, используемые всех задач, выполняющихся на вычислительном узле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-448">However, hello start task could also include reference data toobe used by all tasks that are running on hello compute node.</span></span> <span data-ttu-id="83177-449">Например, может выполнять задачи запуска командной строки `robocopy` операции toocopy файлы приложения (которые были заданы как файлы ресурсов и загружен узел toohello) из hello запуск задачи [рабочий каталог](#files-and-directories) toohello [общую папку](#files-and-directories), а затем запустите MSI-ФАЙЛ или `setup.exe`.</span><span class="sxs-lookup"><span data-stu-id="83177-449">For example, a start task's command line could perform a `robocopy` operation toocopy application files (which were specified as resource files and downloaded toohello node) from hello start task's [working directory](#files-and-directories) toohello [shared folder](#files-and-directories), and then run an MSI or `setup.exe`.</span></span>

<span data-ttu-id="83177-450">Желательно, обычно для hello пакетной службы toowait для hello начала задачи toocomplete прежде чем hello узел готов toobe назначенных задач, но это можно настроить.</span><span class="sxs-lookup"><span data-stu-id="83177-450">It is typically desirable for hello Batch service toowait for hello start task toocomplete before considering hello node ready toobe assigned tasks, but you can configure this.</span></span>

<span data-ttu-id="83177-451">При сбое запуска задачи на вычислительном узле, затем hello hello узел находится в состоянии сбоя обновленные tooreflect hello и все задачи, не назначен узел hello.</span><span class="sxs-lookup"><span data-stu-id="83177-451">If a start task fails on a compute node, then hello state of hello node is updated tooreflect hello failure, and hello node is not assigned any tasks.</span></span> <span data-ttu-id="83177-452">Задача запуска может завершиться ошибкой, если имеется проблема копирования ее файлов ресурсов из хранилища, или выполняется с помощью его командной строки процесс hello возвращает ненулевой код выхода.</span><span class="sxs-lookup"><span data-stu-id="83177-452">A start task can fail if there is an issue copying its resource files from storage, or if hello process executed by its command line returns a nonzero exit code.</span></span>

<span data-ttu-id="83177-453">При добавлении или обновлении hello задачи запуска для существующего пула, необходимо перезагрузить его вычислительные узлы для hello начальных задач toobe применения toohello узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-453">If you add or update hello start task for an existing pool, you must reboot its compute nodes for hello start task toobe applied toohello nodes.</span></span>

>[!NOTE]
> <span data-ttu-id="83177-454">Hello общий размер задачи запуска должен быть меньше или равно too32768 символов, включая файлы ресурсов и переменные среды.</span><span class="sxs-lookup"><span data-stu-id="83177-454">hello total size of a start task must be less than or equal too32768 characters, including resource files and environment variables.</span></span> <span data-ttu-id="83177-455">tooensure, ваша задача запуска соответствует этим требованиям, можно использовать один из двух методов:</span><span class="sxs-lookup"><span data-stu-id="83177-455">tooensure that your start task meets this requirement, you can use one of two approaches:</span></span>
>
> 1. <span data-ttu-id="83177-456">Можно использовать toodistribute пакетов приложений приложения или данные на каждый узел в пуле пакета.</span><span class="sxs-lookup"><span data-stu-id="83177-456">You can use application packages toodistribute applications or data across each node in your Batch pool.</span></span> <span data-ttu-id="83177-457">Дополнительные сведения о пакетах приложений см. в разделе [развертывания приложений toocompute узлов с пакетами приложения пакета](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="83177-457">For more information about application packages, see [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>
> 2. <span data-ttu-id="83177-458">Можно вручную создать ZIP-архив с файлами приложения.</span><span class="sxs-lookup"><span data-stu-id="83177-458">You can manually create a zipped archive containing your applications files.</span></span> <span data-ttu-id="83177-459">Отправьте ваш ZIP-архив tooAzure хранилища как большой двоичный объект.</span><span class="sxs-lookup"><span data-stu-id="83177-459">Upload your zipped archive tooAzure Storage as a blob.</span></span> <span data-ttu-id="83177-460">Укажите hello ZIP-архив, как файл ресурсов для запуска задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-460">Specify hello zipped archive as a resource file for your start task.</span></span> <span data-ttu-id="83177-461">Перед запуском hello командной строки для запуска задачи, распакуйте архив hello из командной строки hello.</span><span class="sxs-lookup"><span data-stu-id="83177-461">Before you run hello command line for your start task, unzip hello archive from hello command line.</span></span> 
>
>    <span data-ttu-id="83177-462">toounzip hello архива, можно использовать средство по вашему выбору архивации hello.</span><span class="sxs-lookup"><span data-stu-id="83177-462">toounzip hello archive, you can use hello archiving tool of your choice.</span></span> <span data-ttu-id="83177-463">Вам потребуется использовать toounzip hello архив, как файл ресурсов для задачи запуска hello средство hello tooinclude.</span><span class="sxs-lookup"><span data-stu-id="83177-463">You will need tooinclude hello tool that you use toounzip hello archive as a resource file for hello start task.</span></span>
>
>

### <a name="job-manager-task"></a><span data-ttu-id="83177-464">Задача диспетчера заданий</span><span class="sxs-lookup"><span data-stu-id="83177-464">Job manager task</span></span>
<span data-ttu-id="83177-465">Как правило, используется **задачи диспетчера заданий** toocontrol и/или монитор задания выполнения — например, toocreate и отправить hello задачи для задания, определить дополнительные задачи toorun и определить, когда работа будет завершена.</span><span class="sxs-lookup"><span data-stu-id="83177-465">You typically use a **job manager task** toocontrol and/or monitor job execution--for example, toocreate and submit hello tasks for a job, determine additional tasks toorun, and determine when work is complete.</span></span> <span data-ttu-id="83177-466">Однако задача диспетчера заданий не ограниченных toothese действий.</span><span class="sxs-lookup"><span data-stu-id="83177-466">However, a job manager task is not restricted toothese activities.</span></span> <span data-ttu-id="83177-467">Это полностью полноценным календарным задачу, которая может выполнять любые действия, необходимые для задания hello.</span><span class="sxs-lookup"><span data-stu-id="83177-467">It is a fully fledged task that can perform any actions that are required for hello job.</span></span> <span data-ttu-id="83177-468">Например задача диспетчера заданий может загрузить файл, который указан в качестве параметра, анализ hello содержимое этого файла и отправить дополнительные задачи, в зависимости от их содержимого.</span><span class="sxs-lookup"><span data-stu-id="83177-468">For example, a job manager task might download a file that is specified as a parameter, analyze hello contents of that file, and submit additional tasks based on those contents.</span></span>

<span data-ttu-id="83177-469">Задача диспетчера заданий запускается перед выполнением всех других задач.</span><span class="sxs-lookup"><span data-stu-id="83177-469">A job manager task is started before all other tasks.</span></span> <span data-ttu-id="83177-470">Он предоставляет hello следующие атрибуты:</span><span class="sxs-lookup"><span data-stu-id="83177-470">It provides hello following features:</span></span>

* <span data-ttu-id="83177-471">Он автоматически передается как задача по hello пакетная служба при создании задания hello.</span><span class="sxs-lookup"><span data-stu-id="83177-471">It is automatically submitted as a task by hello Batch service when hello job is created.</span></span>
* <span data-ttu-id="83177-472">Он является запланированных tooexecute перед hello других задач в задании.</span><span class="sxs-lookup"><span data-stu-id="83177-472">It is scheduled tooexecute before hello other tasks in a job.</span></span>
* <span data-ttu-id="83177-473">Его связанный узел является последней toobe hello удаления из пула при идет downsized hello пула.</span><span class="sxs-lookup"><span data-stu-id="83177-473">Its associated node is hello last toobe removed from a pool when hello pool is being downsized.</span></span>
* <span data-ttu-id="83177-474">Его завершения может быть равноценных toohello завершения всех задач в задании hello.</span><span class="sxs-lookup"><span data-stu-id="83177-474">Its termination can be tied toohello termination of all tasks in hello job.</span></span>
* <span data-ttu-id="83177-475">Задачи диспетчера заданий имеет наивысший приоритет hello необходимости перезапуска toobe.</span><span class="sxs-lookup"><span data-stu-id="83177-475">A job manager task is given hello highest priority when it needs toobe restarted.</span></span> <span data-ttu-id="83177-476">Если узел простоя недоступен, hello пакетная служба может завершить одну из hello других запущенных задач в комнате toomake hello пула для toorun задачи диспетчера заданий hello.</span><span class="sxs-lookup"><span data-stu-id="83177-476">If an idle node is not available, hello Batch service might terminate one of hello other running tasks in hello pool toomake room for hello job manager task toorun.</span></span>
* <span data-ttu-id="83177-477">Задачи диспетчера заданий в одно задание не имеют приоритет над задачи hello других заданий.</span><span class="sxs-lookup"><span data-stu-id="83177-477">A job manager task in one job does not have priority over hello tasks of other jobs.</span></span> <span data-ttu-id="83177-478">Приоритеты между заданиями определяются только на уровне заданий.</span><span class="sxs-lookup"><span data-stu-id="83177-478">Across jobs, only job-level priorities are observed.</span></span>

### <a name="job-preparation-and-release-tasks"></a><span data-ttu-id="83177-479">Задачи подготовки и завершения заданий.</span><span class="sxs-lookup"><span data-stu-id="83177-479">Job preparation and release tasks</span></span>
<span data-ttu-id="83177-480">Для настройки среды выполнения задания в пакетной службе предусмотрена задача подготовки задания,</span><span class="sxs-lookup"><span data-stu-id="83177-480">Batch provides job preparation tasks for pre-job execution setup.</span></span> <span data-ttu-id="83177-481">а для очистки или обслуживания по окончании задания — задача завершения задания.</span><span class="sxs-lookup"><span data-stu-id="83177-481">Job release tasks are for post-job maintenance or cleanup.</span></span>

* <span data-ttu-id="83177-482">**Задача подготовки задания**: запускает задачу подготовки задания на всех узлах вычисления, которые являются задачами запланированных toorun, перед любым hello выполняются другие задания задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-482">**Job preparation task**: A job preparation task runs on all compute nodes that are scheduled toorun tasks, before any of hello other job tasks are executed.</span></span> <span data-ttu-id="83177-483">Можно использовать данные toocopy задания подготовки задач является общим для всех задач, но является уникальным toohello задания, например.</span><span class="sxs-lookup"><span data-stu-id="83177-483">You can use a job preparation task toocopy data that is shared by all tasks, but is unique toohello job, for example.</span></span>
* <span data-ttu-id="83177-484">**Задачи прекращения задания**: после завершения задания выпуска рабочее задание выполняется на каждом узле в пуле hello, выполняется хотя бы одна задача.</span><span class="sxs-lookup"><span data-stu-id="83177-484">**Job release task**: When a job has completed, a job release task runs on each node in hello pool that executed at least one task.</span></span> <span data-ttu-id="83177-485">Можно использовать toodelete данных задания выпуска задачи, который копируется в задачу подготовки задания hello или toocompress и передачи диагностических данных журнала, например.</span><span class="sxs-lookup"><span data-stu-id="83177-485">You can use a job release task toodelete data that is copied by hello job preparation task, or toocompress and upload diagnostic log data, for example.</span></span>

<span data-ttu-id="83177-486">Оба задания подготовки и выпуска задачи позволяют toospecify toorun командной строки при вызове задачи hello.</span><span class="sxs-lookup"><span data-stu-id="83177-486">Both job preparation and release tasks allow you toospecify a command line toorun when hello task is invoked.</span></span> <span data-ttu-id="83177-487">Они предоставляют такие возможности, как загрузка файлов, выполнение с повышенными правами, пользовательские переменные среды, максимальная продолжительность выполнения, число повторных попыток и время хранения файла.</span><span class="sxs-lookup"><span data-stu-id="83177-487">They offer features like file download, elevated execution, custom environment variables, maximum execution duration, retry count, and file retention time.</span></span>

<span data-ttu-id="83177-488">Дополнительные сведения о задачах подготовки и завершения заданий см. в статье [Выполнение задач подготовки и завершения заданий на вычислительных узлах пакетной службы Azure](batch-job-prep-release.md).</span><span class="sxs-lookup"><span data-stu-id="83177-488">For more information on job preparation and release tasks, see [Run job preparation and completion tasks on Azure Batch compute nodes](batch-job-prep-release.md).</span></span>

### <a name="multi-instance-task"></a><span data-ttu-id="83177-489">Задачи с несколькими экземплярами</span><span class="sxs-lookup"><span data-stu-id="83177-489">Multi-instance task</span></span>
<span data-ttu-id="83177-490">Объект [многоэкземплярные задача](batch-mpi.md) — задача, которая одновременно является настроенным toorun на нескольких вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-490">A [multi-instance task](batch-mpi.md) is a task that is configured toorun on more than one compute node simultaneously.</span></span> <span data-ttu-id="83177-491">С несколькими экземплярами задачами, можно включить высокопроизводительных вычислительных сценариев, требующих группу вычислительных узлов, распределенные совместно tooprocess одной рабочей нагрузки (такие как интерфейса передачи сообщений (MPI)).</span><span class="sxs-lookup"><span data-stu-id="83177-491">With multi-instance tasks, you can enable high-performance computing scenarios that require a group of compute nodes that are allocated together tooprocess a single workload (like Message Passing Interface (MPI)).</span></span>

<span data-ttu-id="83177-492">Подробное описание выполнения заданий MPI в пакете с помощью библиотеки .NET пакета hello извлечь [несколькими экземплярами использования задачи toorun приложений интерфейса передачи сообщений (MPI) в пакете Azure](batch-mpi.md).</span><span class="sxs-lookup"><span data-stu-id="83177-492">For a detailed discussion on running MPI jobs in Batch by using hello Batch .NET library, check out [Use multi-instance tasks toorun Message Passing Interface (MPI) applications in Azure Batch](batch-mpi.md).</span></span>

### <a name="task-dependencies"></a><span data-ttu-id="83177-493">Зависимости задачи</span><span class="sxs-lookup"><span data-stu-id="83177-493">Task dependencies</span></span>
<span data-ttu-id="83177-494">[Зависимости задач](batch-task-dependencies.md), как hello названия, позволяющих toospecify, задача зависит от выполнения других задач, перед его выполнением hello.</span><span class="sxs-lookup"><span data-stu-id="83177-494">[Task dependencies](batch-task-dependencies.md), as hello name implies, allow you toospecify that a task depends on hello completion of other tasks before its execution.</span></span> <span data-ttu-id="83177-495">Эта возможность обеспечивает поддержку для ситуаций, в которых задачу «подчиненный» использует выход hello задачу «вышестоящего»--или когда вышестоящего задача выполняет некоторые инициализации, которые требуются для подчиненных задач.</span><span class="sxs-lookup"><span data-stu-id="83177-495">This feature provides support for situations in which a "downstream" task consumes hello output of an "upstream" task--or when an upstream task performs some initialization that is required by a downstream task.</span></span> <span data-ttu-id="83177-496">toouse эту функцию необходимо зависимостей задач первого включения на данного пакетного задания.</span><span class="sxs-lookup"><span data-stu-id="83177-496">toouse this feature, you must first enable task dependencies on your Batch job.</span></span> <span data-ttu-id="83177-497">Затем для каждой задачи, зависит от другого (или многие другие), можно указать задачи hello которых зависит от задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-497">Then, for each task that depends on another (or many others), you specify hello tasks which that task depends on.</span></span>

<span data-ttu-id="83177-498">С зависимостями задач можно настроить сценарии hello следующим образом:</span><span class="sxs-lookup"><span data-stu-id="83177-498">With task dependencies, you can configure scenarios like hello following:</span></span>

* <span data-ttu-id="83177-499">Задача *taskB* зависит от задачи *taskA* (выполнение задачи *taskB* не начнется, пока не завершится выполнение задачи *taskA*).</span><span class="sxs-lookup"><span data-stu-id="83177-499">*taskB* depends on *taskA* (*taskB* will not begin execution until *taskA* has completed).</span></span>
* <span data-ttu-id="83177-500">Задача *taskC* зависит от задач *taskA* и *taskB*.</span><span class="sxs-lookup"><span data-stu-id="83177-500">*taskC* depends on both *taskA* and *taskB*.</span></span>
* <span data-ttu-id="83177-501">Задача *taskD* зависит от ряда задач — от задачи *1* до задачи *10*.</span><span class="sxs-lookup"><span data-stu-id="83177-501">*taskD* depends on a range of tasks, such as tasks *1* through *10*, before it executes.</span></span>

<span data-ttu-id="83177-502">Извлечение [зависимости в пакете Azure задач](batch-task-dependencies.md) и hello [TaskDependencies] [ github_sample_taskdeps] образец кода в hello [образцы azure пакета] [ github_samples] Репозиторий GitHub для подробных сведений об этой функции.</span><span class="sxs-lookup"><span data-stu-id="83177-502">Check out [Task dependencies in Azure Batch](batch-task-dependencies.md) and hello [TaskDependencies][github_sample_taskdeps] code sample in hello [azure-batch-samples][github_samples] GitHub repository for more in-depth details on this feature.</span></span>

## <a name="environment-settings-for-tasks"></a><span data-ttu-id="83177-503">Параметры среды для задач</span><span class="sxs-lookup"><span data-stu-id="83177-503">Environment settings for tasks</span></span>
<span data-ttu-id="83177-504">Каждая задача, выполняемая hello пакетная служба имеет доступ tooenvironment переменные, которые он устанавливает для вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-504">Each task executed by hello Batch service has access tooenvironment variables that it sets on compute nodes.</span></span> <span data-ttu-id="83177-505">Это включает в себя переменные среды, определяемый hello пакетная служба ([определенные службы][msdn_env_vars]) и пользовательские переменные, которые можно определить для ваших задач.</span><span class="sxs-lookup"><span data-stu-id="83177-505">This includes environment variables defined by hello Batch service ([service-defined][msdn_env_vars]) and custom environment variables that you can define for your tasks.</span></span> <span data-ttu-id="83177-506">приложения Hello и сценарии, которые выполнение задач имеют доступ к переменным среды toothese во время выполнения.</span><span class="sxs-lookup"><span data-stu-id="83177-506">hello applications and scripts your tasks execute have access toothese environment variables during execution.</span></span>

<span data-ttu-id="83177-507">Пользовательские переменные можно задать на уровне задачи или задания hello, заполняя hello *параметры среды* свойства для этих сущностей.</span><span class="sxs-lookup"><span data-stu-id="83177-507">You can set custom environment variables at hello task or job level by populating hello *environment settings* property for these entities.</span></span> <span data-ttu-id="83177-508">Например, в разделе hello [добавить задание tooa задачи] [ rest_add_task] операции (API REST пакетной) или hello [CloudTask.EnvironmentSettings] [ net_cloudtask_env] и [ CloudJob.CommonEnvironmentSettings] [ net_job_env] свойств в пакете .NET.</span><span class="sxs-lookup"><span data-stu-id="83177-508">For example, see hello [Add a task tooa job][rest_add_task] operation (Batch REST API), or hello [CloudTask.EnvironmentSettings][net_cloudtask_env] and [CloudJob.CommonEnvironmentSettings][net_job_env] properties in Batch .NET.</span></span>

<span data-ttu-id="83177-509">Клиентское приложение или служба можно получить переменные среды задач, как служба определена и настраиваемые, с помощью hello [получить сведения о задаче] [ rest_get_task_info] операции (пакета REST) или путем доступа к Hello [CloudTask.EnvironmentSettings] [ net_cloudtask_env] свойство (пакета .NET).</span><span class="sxs-lookup"><span data-stu-id="83177-509">Your client application or service can obtain a task's environment variables, both service-defined and custom, by using hello [Get information about a task][rest_get_task_info] operation (Batch REST) or by accessing hello [CloudTask.EnvironmentSettings][net_cloudtask_env] property (Batch .NET).</span></span> <span data-ttu-id="83177-510">Процессы, выполняемые на вычислительном узле можно получить к ним доступ и других переменных среды на узле hello, например, с помощью hello знакомый `%VARIABLE_NAME%` (Windows) или `$VARIABLE_NAME` синтаксис (Linux).</span><span class="sxs-lookup"><span data-stu-id="83177-510">Processes executing on a compute node can access these and other environment variables on hello node, for example, by using hello familiar `%VARIABLE_NAME%` (Windows) or `$VARIABLE_NAME` (Linux) syntax.</span></span>

<span data-ttu-id="83177-511">Полный список всех служебных переменных среды см. в статье [Azure Batch compute node environment variables][msdn_env_vars] (Переменные среды вычислительного узла пакетной службы Azure).</span><span class="sxs-lookup"><span data-stu-id="83177-511">You can find a full list of all service-defined environment variables in [Compute node environment variables][msdn_env_vars].</span></span>

## <a name="files-and-directories"></a><span data-ttu-id="83177-512">Файлы и каталоги</span><span class="sxs-lookup"><span data-stu-id="83177-512">Files and directories</span></span>
<span data-ttu-id="83177-513">У каждой задачи есть *рабочий каталог*, в котором она может создавать дополнительные файлы и каталоги.</span><span class="sxs-lookup"><span data-stu-id="83177-513">Each task has a *working directory* under which it creates zero or more files and directories.</span></span> <span data-ttu-id="83177-514">Эта рабочая папка может использоваться для хранения программы hello, выполняемой задачей «hello», hello обрабатываемых данных, и hello выходных hello обработки, выполняемые ею.</span><span class="sxs-lookup"><span data-stu-id="83177-514">This working directory can be used for storing hello program that is run by hello task, hello data that it processes, and hello output of hello processing it performs.</span></span> <span data-ttu-id="83177-515">Все файлы и каталоги, задачи, принадлежащие hello задачу пользователя.</span><span class="sxs-lookup"><span data-stu-id="83177-515">All files and directories of a task are owned by hello task user.</span></span>

<span data-ttu-id="83177-516">Hello пакетная служба предоставляет часть hello файловой системы на узле, что hello *корневой каталог*.</span><span class="sxs-lookup"><span data-stu-id="83177-516">hello Batch service exposes a portion of hello file system on a node as hello *root directory*.</span></span> <span data-ttu-id="83177-517">Задачи могли обращаться к корневому каталогу hello, ссылаясь на hello `AZ_BATCH_NODE_ROOT_DIR` переменной среды.</span><span class="sxs-lookup"><span data-stu-id="83177-517">Tasks can access hello root directory by referencing hello `AZ_BATCH_NODE_ROOT_DIR` environment variable.</span></span> <span data-ttu-id="83177-518">Дополнительные сведения об использовании переменных среды см. в разделе [Параметры среды для задач](#environment-settings-for-tasks).</span><span class="sxs-lookup"><span data-stu-id="83177-518">For more information about using environment variables, see [Environment settings for tasks](#environment-settings-for-tasks).</span></span>

<span data-ttu-id="83177-519">Hello корневой каталог содержит hello следующая структура каталогов:</span><span class="sxs-lookup"><span data-stu-id="83177-519">hello root directory contains hello following directory structure:</span></span>

![Структура каталогов вычислительного узла][1]

* <span data-ttu-id="83177-521">**общий**: этот каталог предоставляет доступ на чтение и запись слишком*все* задачи, выполняемые на узле.</span><span class="sxs-lookup"><span data-stu-id="83177-521">**shared**: This directory provides read/write access too*all* tasks that run on a node.</span></span> <span data-ttu-id="83177-522">Любая задача, которая работает на узле hello можно создать, чтение, обновление и удаление файлов в этом каталоге.</span><span class="sxs-lookup"><span data-stu-id="83177-522">Any task that runs on hello node can create, read, update, and delete files in this directory.</span></span> <span data-ttu-id="83177-523">Задачи могли обращаться к этой папке, ссылаясь на hello `AZ_BATCH_NODE_SHARED_DIR` переменной среды.</span><span class="sxs-lookup"><span data-stu-id="83177-523">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_SHARED_DIR` environment variable.</span></span>
* <span data-ttu-id="83177-524">**startup**— этот каталог используется задачей запуска в качестве рабочего каталога.</span><span class="sxs-lookup"><span data-stu-id="83177-524">**startup**: This directory is used by a start task as its working directory.</span></span> <span data-ttu-id="83177-525">Здесь хранятся все файлы hello, загруженный toohello узел hello запуска задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-525">All of hello files that are downloaded toohello node by hello start task are stored here.</span></span> <span data-ttu-id="83177-526">Задача запуска Hello можно создать, чтение, обновление и удаление файлов в этот каталог.</span><span class="sxs-lookup"><span data-stu-id="83177-526">hello start task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="83177-527">Задачи могли обращаться к этой папке, ссылаясь на hello `AZ_BATCH_NODE_STARTUP_DIR` переменной среды.</span><span class="sxs-lookup"><span data-stu-id="83177-527">Tasks can access this directory by referencing hello `AZ_BATCH_NODE_STARTUP_DIR` environment variable.</span></span>
* <span data-ttu-id="83177-528">**Задачи**: каталог создается для каждой задачи, которая работает на узле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-528">**Tasks**: A directory is created for each task that runs on hello node.</span></span> <span data-ttu-id="83177-529">При доступе с помощью ссылки на hello `AZ_BATCH_TASK_DIR` переменной среды.</span><span class="sxs-lookup"><span data-stu-id="83177-529">It is accessed by referencing hello `AZ_BATCH_TASK_DIR` environment variable.</span></span>

    <span data-ttu-id="83177-530">В каждый каталог задач hello пакетная служба создает рабочий каталог (`wd`), уникальный путь которого задается hello `AZ_BATCH_TASK_WORKING_DIR` переменной среды.</span><span class="sxs-lookup"><span data-stu-id="83177-530">Within each task directory, hello Batch service creates a working directory (`wd`) whose unique path is specified by hello `AZ_BATCH_TASK_WORKING_DIR` environment variable.</span></span> <span data-ttu-id="83177-531">Этот каталог предоставляет задаче toohello доступа на чтение и запись.</span><span class="sxs-lookup"><span data-stu-id="83177-531">This directory provides read/write access toohello task.</span></span> <span data-ttu-id="83177-532">задачу Hello можно создать, чтение, обновление и удаление файлов из этого каталога.</span><span class="sxs-lookup"><span data-stu-id="83177-532">hello task can create, read, update, and delete files under this directory.</span></span> <span data-ttu-id="83177-533">Этот каталог хранится на основании hello *RetentionTime* ограничение, которое указано для задачи «hello».</span><span class="sxs-lookup"><span data-stu-id="83177-533">This directory is retained based on hello *RetentionTime* constraint that is specified for hello task.</span></span>

    <span data-ttu-id="83177-534">`stdout.txt`и `stderr.txt`: эти файлы записываются toohello задач папки во время выполнения hello задачи «hello».</span><span class="sxs-lookup"><span data-stu-id="83177-534">`stdout.txt` and `stderr.txt`: These files are written toohello task folder during hello execution of hello task.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83177-535">После удаления узла из пула hello *все* из hello удаляются файлы, хранящиеся на узле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-535">When a node is removed from hello pool, *all* of hello files that are stored on hello node are removed.</span></span>
>
>

## <a name="application-packages"></a><span data-ttu-id="83177-536">Пакеты приложений</span><span class="sxs-lookup"><span data-stu-id="83177-536">Application packages</span></span>
<span data-ttu-id="83177-537">Hello [пакетов приложений](batch-application-packages.md) предоставляет удобные возможности для управления и развертывания приложений toohello вычислительных узлов в пулов.</span><span class="sxs-lookup"><span data-stu-id="83177-537">hello [application packages](batch-application-packages.md) feature provides easy management and deployment of applications toohello compute nodes in your pools.</span></span> <span data-ttu-id="83177-538">Можно загрузить и управления версиями приветствия приложения выполнять несколько задач, включая их двоичные файлы и файлы поддержки.</span><span class="sxs-lookup"><span data-stu-id="83177-538">You can upload and manage multiple versions of hello applications run by your tasks, including their binaries and support files.</span></span> <span data-ttu-id="83177-539">Затем можно автоматически развертывать один или несколько из этих приложений toohello вычислительных узлов в пуле.</span><span class="sxs-lookup"><span data-stu-id="83177-539">Then you can automatically deploy one or more of these applications toohello compute nodes in your pool.</span></span>

<span data-ttu-id="83177-540">Можно указать пакетов приложений на уровне пула и задача hello.</span><span class="sxs-lookup"><span data-stu-id="83177-540">You can specify application packages at hello pool and task level.</span></span> <span data-ttu-id="83177-541">При указании пакетов пула приложений приложения hello — развернутой tooevery узел в пул hello.</span><span class="sxs-lookup"><span data-stu-id="83177-541">When you specify pool application packages, hello application is deployed tooevery node in hello pool.</span></span> <span data-ttu-id="83177-542">При указании задачи пакетов приложений, приложение hello развернутой только toonodes, запланированных toorun по крайней мере одно задание hello задач, непосредственно перед hello задачи Командная строка должна выполняться.</span><span class="sxs-lookup"><span data-stu-id="83177-542">When you specify task application packages, hello application is deployed only toonodes that are scheduled toorun at least one of hello job's tasks, just before hello task's command line is run.</span></span>

<span data-ttu-id="83177-543">Обрабатывает пакет hello информацию о работе с toostore хранилища Azure пакеты приложения и развертывать узлы toocompute, благодаря которым издержки управления и кода можно упростить.</span><span class="sxs-lookup"><span data-stu-id="83177-543">Batch handles hello details of working with Azure Storage toostore your application packages and deploy them toocompute nodes, so both your code and management overhead can be simplified.</span></span>

<span data-ttu-id="83177-544">toofind подробные сведения о функции пакета приложение hello, извлечь [развертывания приложений toocompute узлов с пакетами приложения пакета](batch-application-packages.md).</span><span class="sxs-lookup"><span data-stu-id="83177-544">toofind out more about hello application package feature, check out [Deploy applications toocompute nodes with Batch application packages](batch-application-packages.md).</span></span>

> [!NOTE]
> <span data-ttu-id="83177-545">При добавлении пула приложений пакеты tooan *существующие* пула, необходимо перезагрузить его вычислительных узлов для узлов toohello toobe развернуть пакеты приложения hello.</span><span class="sxs-lookup"><span data-stu-id="83177-545">If you add pool application packages tooan *existing* pool, you must reboot its compute nodes for hello application packages toobe deployed toohello nodes.</span></span>
>
>

## <a name="pool-and-compute-node-lifetime"></a><span data-ttu-id="83177-546">Время существования пула и вычислительного узла</span><span class="sxs-lookup"><span data-stu-id="83177-546">Pool and compute node lifetime</span></span>
<span data-ttu-id="83177-547">При разработке решения пакетной службы Azure, у вас toomake решение о том, как и при создании пулов и как долго вычислительные узлы в пределах этих пулов остаются доступными.</span><span class="sxs-lookup"><span data-stu-id="83177-547">When you design your Azure Batch solution, you have toomake a design decision about how and when pools are created, and how long compute nodes within those pools are kept available.</span></span>

<span data-ttu-id="83177-548">На одном конце спектра hello можно создать пул для каждого задания, которые можно отправить и удалить пул hello сразу после завершения выполнения ее задач.</span><span class="sxs-lookup"><span data-stu-id="83177-548">On one end of hello spectrum, you can create a pool for each job that you submit, and delete hello pool as soon as its tasks finish execution.</span></span> <span data-ttu-id="83177-549">Это повышает использования, так как узлы hello выделяются только при необходимости и завершена, как только они становятся простоя.</span><span class="sxs-lookup"><span data-stu-id="83177-549">This maximizes utilization because hello nodes are only allocated when needed, and shut down as soon as they're idle.</span></span> <span data-ttu-id="83177-550">Это означает, что задания hello необходимо дождаться выделенной toobe узлы hello, является важным toonote, задачи, планируются на выполнение, как только узлы доступны по отдельности, выделен и hello задача запуска завершена.</span><span class="sxs-lookup"><span data-stu-id="83177-550">While this means that hello job must wait for hello nodes toobe allocated, it's important toonote that tasks are scheduled for execution as soon as nodes are individually available, allocated, and hello start task has completed.</span></span> <span data-ttu-id="83177-551">Пакет *не* подождать, пока доступны все узлы в пуле перед назначением задачи toohello узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-551">Batch does *not* wait until all nodes within a pool are available before assigning tasks toohello nodes.</span></span> <span data-ttu-id="83177-552">Это позволяет обеспечить максимально эффективное использование ресурсов.</span><span class="sxs-lookup"><span data-stu-id="83177-552">This ensures maximum utilization of all available nodes.</span></span>

<span data-ttu-id="83177-553">В hello другом конце спектра hello, если наличие немедленного запуска задания является наивысшим приоритетом hello, можно создать пул заранее и освободить его узлов перед отправкой задания.</span><span class="sxs-lookup"><span data-stu-id="83177-553">At hello other end of hello spectrum, if having jobs start immediately is hello highest priority, you can create a pool ahead of time and make its nodes available before jobs are submitted.</span></span> <span data-ttu-id="83177-554">В этом сценарии задачи можно запустить немедленно, но узлы могут простаивают в ожидании их toobe назначен.</span><span class="sxs-lookup"><span data-stu-id="83177-554">In this scenario, tasks can start immediately, but nodes might sit idle while waiting for them toobe assigned.</span></span>

<span data-ttu-id="83177-555">Смешанный подход обычно используется для обработки постоянной нагрузки, интенсивность которой изменяется.</span><span class="sxs-lookup"><span data-stu-id="83177-555">A combined approach is typically used for handling a variable, but ongoing, load.</span></span> <span data-ttu-id="83177-556">Имеется пул несколько заданий будут отправлены, что можно масштабировать hello количество узлов вверх или вниз toohello загрузку задания в соответствии с (в разделе [масштабирование вычислительных ресурсов](#scaling-compute-resources) в следующем разделе hello).</span><span class="sxs-lookup"><span data-stu-id="83177-556">You can have a pool that multiple jobs are submitted to, but can scale hello number of nodes up or down according toohello job load (see [Scaling compute resources](#scaling-compute-resources) in hello following section).</span></span> <span data-ttu-id="83177-557">Масштабирование можно выполнять по мере изменения интенсивности нагрузки или с упреждением, если нагрузка является прогнозируемой.</span><span class="sxs-lookup"><span data-stu-id="83177-557">You can do this reactively, based on current load, or proactively, if load can be predicted.</span></span>

## <a name="virtual-network-vnet-and-firewall-configuration"></a><span data-ttu-id="83177-558">Конфигурация виртуальной сети и брандмауэра</span><span class="sxs-lookup"><span data-stu-id="83177-558">Virtual network (VNet) and firewall configuration</span></span> 

<span data-ttu-id="83177-559">При подготовке пул вычислительных узлов в пакете Azure можно связать с подсетью Azure hello пула [виртуальной сети (VNet)](../virtual-network/virtual-networks-overview.md).</span><span class="sxs-lookup"><span data-stu-id="83177-559">When you provision a pool of compute nodes in Azure Batch, you can associate hello pool with a subnet of an Azure [virtual network (VNet)](../virtual-network/virtual-networks-overview.md).</span></span> <span data-ttu-id="83177-560">в разделе toolearn Дополнительные сведения о создании виртуальной сети с подсетями, [создать виртуальную сеть Azure с подсетями](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="83177-560">toolearn more about creating a VNet with subnets, see [Create an Azure virtual network with subnets](../virtual-network/virtual-networks-create-vnet-arm-pportal.md).</span></span> 

 * <span data-ttu-id="83177-561">Hello виртуальной сети, связанных с пулом должен быть:</span><span class="sxs-lookup"><span data-stu-id="83177-561">hello VNet associated with a pool must be:</span></span>

   * <span data-ttu-id="83177-562">В hello же Azure **область** как hello учетной записи пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-562">In hello same Azure **region** as hello Azure Batch account.</span></span>
   * <span data-ttu-id="83177-563">В hello же **подписки** как hello учетной записи пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-563">In hello same **subscription** as hello Azure Batch account.</span></span>

* <span data-ttu-id="83177-564">Hello тип виртуальной сети поддерживается зависит от того, как пулы выделяемых для hello пакетной учетной записи:</span><span class="sxs-lookup"><span data-stu-id="83177-564">hello type of VNet supported depends on how pools are being allocated for hello Batch account:</span></span>

    - <span data-ttu-id="83177-565">Если режим распределения пула hello для вашей учетной записи пакетной задано tooBatch службы, то можно назначить только toopools виртуальной сети, созданных с помощью hello **конфигурация облачных служб**.</span><span class="sxs-lookup"><span data-stu-id="83177-565">If hello pool allocation mode for your Batch account is set tooBatch Service, then you can assign a VNet only toopools created with hello **Cloud Services Configuration**.</span></span> <span data-ttu-id="83177-566">Кроме того hello указанный виртуальной сети должен быть создан с hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="83177-566">Additionally, hello specified VNet must be created with hello classic deployment model.</span></span> <span data-ttu-id="83177-567">Виртуальных сетей, созданных с помощью модели развертывания диспетчера ресурсов Azure hello не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="83177-567">VNets created with hello Azure Resource Manager deployment model are not supported.</span></span>
 
    - <span data-ttu-id="83177-568">Если режим распределения пула hello для вашей учетной записи пакетной задано tooUser подписки, то можно назначить только toopools виртуальной сети, созданных с помощью hello **конфигурации виртуальной машины**.</span><span class="sxs-lookup"><span data-stu-id="83177-568">If hello pool allocation mode for your Batch account is set tooUser Subscription, then you can assign a VNet only toopools created with hello **Virtual Machine Configuration**.</span></span> <span data-ttu-id="83177-569">Пулы, созданных с помощью hello **конфигурацию облачной службы** не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="83177-569">Pools created with hello **Cloud Service Configuration** are not supported.</span></span> <span data-ttu-id="83177-570">Здравствуйте, связанной виртуальной сети может быть создан с помощью модели развертывания диспетчера ресурсов Azure hello или hello классической модели развертывания.</span><span class="sxs-lookup"><span data-stu-id="83177-570">hello associated VNet may be created with either hello Azure Resource Manager deployment model or hello classic deployment model.</span></span>

    <span data-ttu-id="83177-571">Таблица, содержащая поддержки виртуальной сети toopool режим выделения, в соответствии с разделе hello [режим распределения пула](#pool-allocation-mode) раздела.</span><span class="sxs-lookup"><span data-stu-id="83177-571">For a table summarizing VNet support according toopool allocation mode, see hello [Pool allocation mode](#pool-allocation-mode) section.</span></span>

* <span data-ttu-id="83177-572">Если hello режим распределения пула для вашей учетной записи пакетной службы tooBatch, то необходимо указать, что разрешения для hello tooaccess основного пакета службы hello виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="83177-572">If hello pool allocation mode for your Batch account is set tooBatch Service, then you must provide permissions for hello Batch service principal tooaccess hello VNet.</span></span> <span data-ttu-id="83177-573">Hello виртуальной сети необходимо назначить hello [Classic Virtual Machine Contributor Role-Based управления доступом (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) участника роли toohello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-573">hello VNet must assign hello [Classic Virtual Machine Contributor Role-Based Access Control (RBAC)](https://azure.microsoft.com/documentation/articles/role-based-access-built-in-roles/#classic-virtual-machine-contributor) role toohello Batch service principal.</span></span> <span data-ttu-id="83177-574">Если указан hello RBAC роли не указано, hello пакетная служба возвращает 400 (неправильный запрос).</span><span class="sxs-lookup"><span data-stu-id="83177-574">If hello specified RBAC role is not provided, hello Batch service returns 400 (Bad Request).</span></span> <span data-ttu-id="83177-575">роль tooadd hello в hello портала Azure:</span><span class="sxs-lookup"><span data-stu-id="83177-575">tooadd hello role in hello Azure portal:</span></span>

    1. <span data-ttu-id="83177-576">Выберите hello **виртуальной сети**, затем **(IAM) управления доступом к** > **ролей** > **участника виртуальной машины**  >  **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="83177-576">Select hello **VNet**, then **Access control (IAM)** > **Roles** > **Virtual Machine Contributor** > **Add**.</span></span>
    2. <span data-ttu-id="83177-577">На hello **добавить разрешения** колонки, выберите hello **участника виртуальной машины** роли.</span><span class="sxs-lookup"><span data-stu-id="83177-577">On hello **Add permissions** blade, select hello **Virtual Machine Contributor** role.</span></span>
    3. <span data-ttu-id="83177-578">На hello **добавить разрешения** колонки, поиск hello API пакета.</span><span class="sxs-lookup"><span data-stu-id="83177-578">On hello **Add permissions** blade, search for hello Batch API.</span></span> <span data-ttu-id="83177-579">Поиск каждая из этих строк в свою очередь пока не найдете hello API:</span><span class="sxs-lookup"><span data-stu-id="83177-579">Search for each of these strings in turn until you find hello API:</span></span>
        1. <span data-ttu-id="83177-580">**MicrosoftAzureBatch**;</span><span class="sxs-lookup"><span data-stu-id="83177-580">**MicrosoftAzureBatch**.</span></span>
        2. <span data-ttu-id="83177-581">**Microsoft Azure Batch**.</span><span class="sxs-lookup"><span data-stu-id="83177-581">**Microsoft Azure Batch**.</span></span> <span data-ttu-id="83177-582">Более новые клиенты Azure AD могут использовать это имя.</span><span class="sxs-lookup"><span data-stu-id="83177-582">Newer Azure AD tenants may use this name.</span></span>
        3. <span data-ttu-id="83177-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** идентификатор hello hello API пакета.</span><span class="sxs-lookup"><span data-stu-id="83177-583">**ddbf3205-c6bd-46ae-8127-60eb93363864** is hello ID for hello Batch API.</span></span> 
    3. <span data-ttu-id="83177-584">Выберите hello субъект-служба API пакета.</span><span class="sxs-lookup"><span data-stu-id="83177-584">Select hello Batch API service principal.</span></span> 
    4. <span data-ttu-id="83177-585">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="83177-585">Click **Save**.</span></span>

        ![Назначить участника-службы tooBatch роль участника виртуальной Машины](./media/batch-api-basics/iam-add-role.png)


* <span data-ttu-id="83177-587">Hello указан подсети должен быть достаточно свободного **IP-адреса** tooaccommodate hello общее количество целевых узлов; то есть hello сумма hello `targetDedicatedNodes` и `targetLowPriorityNodes` свойства пула hello.</span><span class="sxs-lookup"><span data-stu-id="83177-587">hello specified subnet should have enough free **IP addresses** tooaccommodate hello total number of target nodes; that is, hello sum of hello `targetDedicatedNodes` and `targetLowPriorityNodes` properties of hello pool.</span></span> <span data-ttu-id="83177-588">Если подсеть hello не имеет достаточно свободного IP-адресов, hello пакетная служба частично выделяет hello вычислительных узлов в пуле hello и возвращает ошибку изменения размера.</span><span class="sxs-lookup"><span data-stu-id="83177-588">If hello subnet doesn't have enough free IP addresses, hello Batch service partially allocates hello compute nodes in hello pool and returns a resize error.</span></span>

* <span data-ttu-id="83177-589">Hello указанный подсети должны разрешать подключения от службы toobe hello пакета может tooschedule задачи на вычислительных узлах hello.</span><span class="sxs-lookup"><span data-stu-id="83177-589">hello specified subnet must allow communication from hello Batch service toobe able tooschedule tasks on hello compute nodes.</span></span> <span data-ttu-id="83177-590">Отклонен если toohello связи вычислительных узлов **группы безопасности сети (NSG)** связанные с hello виртуальной сети, то hello пакетная служба устанавливает состояние hello hello вычислительные узлы слишком**непригодным для использования**.</span><span class="sxs-lookup"><span data-stu-id="83177-590">If communication toohello compute nodes is denied by a **Network Security Group (NSG)** associated with hello VNet, then hello Batch service sets hello state of hello compute nodes too**unusable**.</span></span>

* <span data-ttu-id="83177-591">Если указан hello связанной виртуальной сети **группы безопасности сети (Nsg)** и/или **брандмауэра**, то необходимо включить несколько зарезервированным системным порты для входящих сообщений:</span><span class="sxs-lookup"><span data-stu-id="83177-591">If hello specified VNet has associated **Network Security Groups (NSGs)** and/or a **firewall**, then a few reserved system ports must be enabled for inbound communication:</span></span>

- <span data-ttu-id="83177-592">Для пулов, созданных с помощью конфигурации виртуальной машины, включите порты 29876 и 29877, а также порт 22 для Linux и порт 3389 для Windows.</span><span class="sxs-lookup"><span data-stu-id="83177-592">For pools created with a virtual machine configuration, enable ports 29876 and 29877, as well as port 22 for Linux and port 3389 for Windows.</span></span> 
- <span data-ttu-id="83177-593">Для пулов, созданных с помощью конфигурации облачной службы, включите порты 10100, 20100 и 30100.</span><span class="sxs-lookup"><span data-stu-id="83177-593">For pools created with a cloud service configuration, enable ports 10100, 20100, and 30100.</span></span> 
- <span data-ttu-id="83177-594">Разрешить исходящие подключения tooAzure хранилища через порт 443.</span><span class="sxs-lookup"><span data-stu-id="83177-594">Enable outbound connections tooAzure Storage on port 443.</span></span> <span data-ttu-id="83177-595">Также убедитесь, что конечная точка службы хранилища Azure может разрешаться на всех пользовательских DNS-серверах, используемых в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="83177-595">Also, ensure that your Azure Storage endpoint can be resolved by any custom DNS servers that serve your VNET.</span></span> <span data-ttu-id="83177-596">В частности, URL-адреса формы hello `<account>.table.core.windows.net` должен быть разрешаемым.</span><span class="sxs-lookup"><span data-stu-id="83177-596">Specifically, a URL of hello form `<account>.table.core.windows.net` should be resolvable.</span></span>

    <span data-ttu-id="83177-597">Hello следующей таблице описаны hello входящие порты, необходимые для пулов, созданные с помощью конфигурации виртуальной машины hello tooenable:</span><span class="sxs-lookup"><span data-stu-id="83177-597">hello following table describes hello inbound ports that you need tooenable for pools that you created with hello virtual machine configuration:</span></span>

    |    <span data-ttu-id="83177-598">Конечные порты</span><span class="sxs-lookup"><span data-stu-id="83177-598">Destination Port(s)</span></span>    |    <span data-ttu-id="83177-599">Исходный IP-адрес</span><span class="sxs-lookup"><span data-stu-id="83177-599">Source IP address</span></span>      |    <span data-ttu-id="83177-600">Добавляет ли пакетная служба группы NSG?</span><span class="sxs-lookup"><span data-stu-id="83177-600">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="83177-601">Требуется для виртуальной Машины toobe можно использовать?</span><span class="sxs-lookup"><span data-stu-id="83177-601">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="83177-602">Действие пользователя</span><span class="sxs-lookup"><span data-stu-id="83177-602">Action from user</span></span>   |
    |---------------------------|---------------------------|----------------------------|-------------------------------------|-----------------------|
    |    <ul><li><span data-ttu-id="83177-603">Для пулов, созданных с помощью конфигурации виртуальной машины hello: 29876, 29877</span><span class="sxs-lookup"><span data-stu-id="83177-603">For pools created with hello virtual machine configuration: 29876, 29877</span></span></li><li><span data-ttu-id="83177-604">Для пулов, созданных с помощью hello конфигурацию облачной службы: 10100, 20100, 30100</span><span class="sxs-lookup"><span data-stu-id="83177-604">For pools created with hello cloud service configuration: 10100, 20100, 30100</span></span></li></ul>         |    <span data-ttu-id="83177-605">Только IP-адреса для ролей пакетной службы</span><span class="sxs-lookup"><span data-stu-id="83177-605">Only Batch service role IP addresses</span></span> |    <span data-ttu-id="83177-606">Да.</span><span class="sxs-lookup"><span data-stu-id="83177-606">Yes.</span></span> <span data-ttu-id="83177-607">Пакет добавляет Nsg на уровне hello tooVMs интерфейсов (NIC), подключенных по сети.</span><span class="sxs-lookup"><span data-stu-id="83177-607">Batch adds NSGs at hello level of network interfaces (NIC) attached tooVMs.</span></span> <span data-ttu-id="83177-608">Группы NSG пропускают трафик только с IP-адресов для ролей пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-608">These NSGs allow traffic only from Batch service role IP addresses.</span></span> <span data-ttu-id="83177-609">Даже если открыть эти порты для всего веб-hello, трафик hello происходит блокировка на hello сетевого адаптера.</span><span class="sxs-lookup"><span data-stu-id="83177-609">Even if you open these ports for hello  entire web, hello traffic will get blocked at hello NIC.</span></span> |    <span data-ttu-id="83177-610">Да</span><span class="sxs-lookup"><span data-stu-id="83177-610">Yes</span></span>  |  <span data-ttu-id="83177-611">Необязательно toospecify NSG, так как пакет допускает только пакета IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="83177-611">You do not need toospecify an NSG, because Batch allows only Batch IP addresses.</span></span> <br /><br /> <span data-ttu-id="83177-612">Если вы все же укажете NSG, убедитесь, что эти порты открыты для входящего трафика.</span><span class="sxs-lookup"><span data-stu-id="83177-612">However, if you do specify an NSG, please ensure that these ports are open for inbound traffic.</span></span> <br /><br /> <span data-ttu-id="83177-613">При указании * hello исходный IP-адрес в вашей NSG, пакет по-прежнему добавляет Nsg на уровне сетевого Адаптера, подключенного tooVMs hello.</span><span class="sxs-lookup"><span data-stu-id="83177-613">If you specify * as hello source IP in your NSG, Batch still adds NSGs at hello level of NIC attached tooVMs.</span></span> |
    |    <span data-ttu-id="83177-614">3389, 22</span><span class="sxs-lookup"><span data-stu-id="83177-614">3389, 22</span></span>               |    <span data-ttu-id="83177-615">Машины пользователя используются для отладки, так что можно получить доступ к hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="83177-615">User machines, used for debugging purposes, so that you can remotely access hello VM.</span></span>    |    <span data-ttu-id="83177-616">Нет</span><span class="sxs-lookup"><span data-stu-id="83177-616">No</span></span>                                    |    <span data-ttu-id="83177-617">Нет</span><span class="sxs-lookup"><span data-stu-id="83177-617">No</span></span>                     |    <span data-ttu-id="83177-618">Если toohello toopermit удаленного доступа (RDP/SSH) виртуальной Машины, добавьте Nsg.</span><span class="sxs-lookup"><span data-stu-id="83177-618">Add NSGs if you want toopermit remote access (RDP/SSH) toohello VM.</span></span>   |                 

    <span data-ttu-id="83177-619">Hello в следующей таблице описываются исходящий порт hello необходимые tooenable toopermit доступа tooAzure хранилища.</span><span class="sxs-lookup"><span data-stu-id="83177-619">hello following table describes hello outbound port that you need tooenable toopermit access tooAzure Storage:</span></span>

    |    <span data-ttu-id="83177-620">Исходящие порты</span><span class="sxs-lookup"><span data-stu-id="83177-620">Outbound Port(s)</span></span>    |    <span data-ttu-id="83177-621">Место назначения</span><span class="sxs-lookup"><span data-stu-id="83177-621">Destination</span></span>    |    <span data-ttu-id="83177-622">Добавляет ли пакетная служба группы NSG?</span><span class="sxs-lookup"><span data-stu-id="83177-622">Does Batch add NSGs?</span></span>    |    <span data-ttu-id="83177-623">Требуется для виртуальной Машины toobe можно использовать?</span><span class="sxs-lookup"><span data-stu-id="83177-623">Required for VM toobe usable?</span></span>    |    <span data-ttu-id="83177-624">Действие пользователя</span><span class="sxs-lookup"><span data-stu-id="83177-624">Action from user</span></span>    |
    |------------------------|-------------------|----------------------------|-------------------------------------|------------------------|
    |    <span data-ttu-id="83177-625">443</span><span class="sxs-lookup"><span data-stu-id="83177-625">443</span></span>    |    <span data-ttu-id="83177-626">Хранилище Azure</span><span class="sxs-lookup"><span data-stu-id="83177-626">Azure Storage</span></span>    |    <span data-ttu-id="83177-627">Нет</span><span class="sxs-lookup"><span data-stu-id="83177-627">No</span></span>    |    <span data-ttu-id="83177-628">Да</span><span class="sxs-lookup"><span data-stu-id="83177-628">Yes</span></span>    |    <span data-ttu-id="83177-629">Если добавить любые Nsg, а затем убедитесь, что этот порт — это открыть toooutbound трафик.</span><span class="sxs-lookup"><span data-stu-id="83177-629">If you add any NSGs, then ensure that this port is open toooutbound   traffic.</span></span>    |


## <a name="scaling-compute-resources"></a><span data-ttu-id="83177-630">Масштабирование вычислительных ресурсов</span><span class="sxs-lookup"><span data-stu-id="83177-630">Scaling compute resources</span></span>
<span data-ttu-id="83177-631">С [автоматическое масштабирование](batch-automatic-scaling.md), может иметь hello пакетная служба динамически настраивать hello количество вычислительных узлов в пул в соответствии с toohello текущей рабочей нагрузки и использование ресурсов сценария вычислений.</span><span class="sxs-lookup"><span data-stu-id="83177-631">With [automatic scaling](batch-automatic-scaling.md), you can have hello Batch service dynamically adjust hello number of compute nodes in a pool according toohello current workload and resource usage of your compute scenario.</span></span> <span data-ttu-id="83177-632">Это позволяет toolower hello общей стоимости эксплуатации приложения с помощью только ресурсы hello необходима, и их освобождения не требуется.</span><span class="sxs-lookup"><span data-stu-id="83177-632">This allows you toolower hello overall cost of running your application by using only hello resources you need, and releasing those you don't need.</span></span>

<span data-ttu-id="83177-633">Чтобы включить автоматическое масштабирование, необходимо написать [соответствующую формулу](batch-automatic-scaling.md#automatic-scaling-formulas) и связать ее с пулом.</span><span class="sxs-lookup"><span data-stu-id="83177-633">You enable automatic scaling by writing an [automatic scaling formula](batch-automatic-scaling.md#automatic-scaling-formulas) and associating that formula with a pool.</span></span> <span data-ttu-id="83177-634">Hello пакетная служба использует hello формулы toodetermine hello целевое количество узлов в пуле hello для масштабирования следующего интервала hello (интервал, можно настроить).</span><span class="sxs-lookup"><span data-stu-id="83177-634">hello Batch service uses hello formula toodetermine hello target number of nodes in hello pool for hello next scaling interval (an interval that you can configure).</span></span> <span data-ttu-id="83177-635">Hello параметры автоматического масштабирования для пула можно указать при ее создании или включить позже масштабирование в пуле.</span><span class="sxs-lookup"><span data-stu-id="83177-635">You can specify hello automatic scaling settings for a pool when you create it, or enable scaling on a pool later.</span></span> <span data-ttu-id="83177-636">Можно также обновить hello масштабирование параметры в пуле с поддержкой масштабирования.</span><span class="sxs-lookup"><span data-stu-id="83177-636">You can also update hello scaling settings on a scaling-enabled pool.</span></span>

<span data-ttu-id="83177-637">Например возможно заданиям необходимы, отправки очень большое количество toobe задачи выполнены.</span><span class="sxs-lookup"><span data-stu-id="83177-637">As an example, perhaps a job requires that you submit a very large number of tasks toobe executed.</span></span> <span data-ttu-id="83177-638">Можно назначить пулу формулы toohello масштабирования соотнесения hello количество узлов в hello пула на основании hello текущее количество задач в очереди и частота завершения hello hello задач в задании hello.</span><span class="sxs-lookup"><span data-stu-id="83177-638">You can assign a scaling formula toohello pool that adjusts hello number of nodes in hello pool based on hello current number of queued tasks and hello completion rate of hello tasks in hello job.</span></span> <span data-ttu-id="83177-639">Hello пакетная служба периодически оценивает формула hello и изменяет размер пула hello, на основе рабочей нагрузки и других параметров формулы.</span><span class="sxs-lookup"><span data-stu-id="83177-639">hello Batch service periodically evaluates hello formula and resizes hello pool, based on workload and your other formula settings.</span></span> <span data-ttu-id="83177-640">Служба Hello добавляет узлы при необходимости, при наличии большого числа в очереди задач и удаляет узлы, если нет задач в очереди или не запущены.</span><span class="sxs-lookup"><span data-stu-id="83177-640">hello service adds nodes as needed when there are a large number of queued tasks, and removes nodes when there are no queued or running tasks.</span></span>

<span data-ttu-id="83177-641">Формулы масштабирования могут быть основаны на hello следующие метрики:</span><span class="sxs-lookup"><span data-stu-id="83177-641">A scaling formula can be based on hello following metrics:</span></span>

* <span data-ttu-id="83177-642">**Метрик времени** на основе статистических данных собираются каждые пять минут в hello указанное количество часов.</span><span class="sxs-lookup"><span data-stu-id="83177-642">**Time metrics** are based on statistics collected every five minutes in hello specified number of hours.</span></span>
* <span data-ttu-id="83177-643">**Метрики ресурсов** — зависят от показателей загрузки ЦП, использования пропускной способности и памяти, а также количества узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-643">**Resource metrics** are based on CPU usage, bandwidth usage, memory usage, and number of nodes.</span></span>
* <span data-ttu-id="83177-644">**Метрики задач** зависят от состояния задачи: *Активная* (в очереди), *Выполняется* или *Завершена*.</span><span class="sxs-lookup"><span data-stu-id="83177-644">**Task metrics** are based on task state, such as *Active* (queued), *Running*, or *Completed*.</span></span>

<span data-ttu-id="83177-645">После автоматического масштабирования уменьшения hello количество вычислительных узлов в кластер, необходимо учитывать, как toohandle задачи, которые выполнялись во время hello hello уменьшить операции.</span><span class="sxs-lookup"><span data-stu-id="83177-645">When automatic scaling decreases hello number of compute nodes in a pool, you must consider how toohandle tasks that are running at hello time of hello decrease operation.</span></span> <span data-ttu-id="83177-646">tooaccommodate, пакет предоставляет *параметр освобождения узла* , можно включить в формулах.</span><span class="sxs-lookup"><span data-stu-id="83177-646">tooaccommodate this, Batch provides a *node deallocation option* that you can include in your formulas.</span></span> <span data-ttu-id="83177-647">Например можно указать, что выполнение задач немедленно остановлена, немедленно остановлена и затем повторно поставлен в очередь для выполнения на другом узле или только при разрешенных toofinish hello узел удаляется из пула hello.</span><span class="sxs-lookup"><span data-stu-id="83177-647">For example, you can specify that running tasks are stopped immediately, stopped immediately and then requeued for execution on another node, or allowed toofinish before hello node is removed from hello pool.</span></span>

<span data-ttu-id="83177-648">Подробные сведения об автоматическом масштабировании приложения см. в статье [Автоматическое масштабирование вычислительных узлов в пуле пакетной службы Azure](batch-automatic-scaling.md).</span><span class="sxs-lookup"><span data-stu-id="83177-648">For more information about automatically scaling an application, see [Automatically scale compute nodes in an Azure Batch pool](batch-automatic-scaling.md).</span></span>

> [!TIP]
> <span data-ttu-id="83177-649">toomaximize вычислений использования ресурсов, hello окончании задания укажите hello целевое количество узлов toozero, но разрешить toofinish выполнение задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-649">toomaximize compute resource utilization, set hello target number of nodes toozero at hello end of a job, but allow running tasks toofinish.</span></span>
>
>

## <a name="security-with-certificates"></a><span data-ttu-id="83177-650">Безопасность с использованием сертификатов</span><span class="sxs-lookup"><span data-stu-id="83177-650">Security with certificates</span></span>
<span data-ttu-id="83177-651">Обычно нужно toouse сертификаты при зашифровать или расшифровать конфиденциальные сведения для задач, таких как ключ hello для [учетной записи хранилища Azure][azure_storage].</span><span class="sxs-lookup"><span data-stu-id="83177-651">You typically need toouse certificates when you encrypt or decrypt sensitive information for tasks, like hello key for an [Azure Storage account][azure_storage].</span></span> <span data-ttu-id="83177-652">toosupport это, можно установить сертификаты на узлах.</span><span class="sxs-lookup"><span data-stu-id="83177-652">toosupport this, you can install certificates on nodes.</span></span> <span data-ttu-id="83177-653">Зашифрованные секретные данные передавались tootasks через параметры командной строки или в один из ресурсов задач hello и hello установлены сертификаты можно использовать toodecrypt их.</span><span class="sxs-lookup"><span data-stu-id="83177-653">Encrypted secrets are passed tootasks via command-line parameters or embedded in one of hello task resources, and hello installed certificates can be used toodecrypt them.</span></span>

<span data-ttu-id="83177-654">Использовать hello [добавить сертификат] [ rest_add_cert] операции (пакета REST) или [CertificateOperations.CreateCertificate] [ net_create_cert] метода (пакета .NET) tooadd tooa сертификат учетной записи пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-654">You use hello [Add certificate][rest_add_cert] operation (Batch REST) or [CertificateOperations.CreateCertificate][net_create_cert] method (Batch .NET) tooadd a certificate tooa Batch account.</span></span> <span data-ttu-id="83177-655">Затем можно связать hello сертификат с помощью нового или существующего пула.</span><span class="sxs-lookup"><span data-stu-id="83177-655">You can then associate hello certificate with a new or existing pool.</span></span> <span data-ttu-id="83177-656">Если сертификат связан с пулом, hello пакетная служба устанавливает сертификат hello на каждом узле в пуле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-656">When a certificate is associated with a pool, hello Batch service installs hello certificate on each node in hello pool.</span></span> <span data-ttu-id="83177-657">Hello пакетная служба устанавливает соответствующие сертификаты hello при загрузке узла hello, перед запуском любых задач (включая задачи запуска hello и задачи диспетчера заданий).</span><span class="sxs-lookup"><span data-stu-id="83177-657">hello Batch service installs hello appropriate certificates when hello node starts up, before launching any tasks (including hello start task and job manager task).</span></span>

<span data-ttu-id="83177-658">При добавлении сертификатов tooan *существующие* пула, необходимо перезагрузить его вычислительные узлы hello-узлы toohello toobe применения сертификатов.</span><span class="sxs-lookup"><span data-stu-id="83177-658">If you add certificates tooan *existing* pool, you must reboot its compute nodes for hello certificates toobe applied toohello nodes.</span></span>

## <a name="error-handling"></a><span data-ttu-id="83177-659">Обработка ошибок</span><span class="sxs-lookup"><span data-stu-id="83177-659">Error handling</span></span>
<span data-ttu-id="83177-660">Может оказаться toohandle необходимые задачи и приложения сбоев в пределах пакета решения.</span><span class="sxs-lookup"><span data-stu-id="83177-660">You might find it necessary toohandle both task and application failures within your Batch solution.</span></span>

### <a name="task-failure-handling"></a><span data-ttu-id="83177-661">Обработка сбоев задач</span><span class="sxs-lookup"><span data-stu-id="83177-661">Task failure handling</span></span>
<span data-ttu-id="83177-662">Сбои задач делятся на следующие категории.</span><span class="sxs-lookup"><span data-stu-id="83177-662">Task failures fall into these categories:</span></span>

* <span data-ttu-id="83177-663">**Ошибки предварительной обработки**</span><span class="sxs-lookup"><span data-stu-id="83177-663">**Pre-processing failures**</span></span>

    <span data-ttu-id="83177-664">В случае сбоя задачи toostart предварительной обработки ошибки задается для задачи «hello».</span><span class="sxs-lookup"><span data-stu-id="83177-664">If a task fails toostart, a pre-processing error is set for hello task.</span></span>  

    <span data-ttu-id="83177-665">Предварительная обработка ошибок может возникать, если задачу hello файлы ресурсов были перемещены, hello учетной записи хранилища больше недоступен или другая проблема была обнаружена, предотвращено hello успешно скопировать файлы toohello узла.</span><span class="sxs-lookup"><span data-stu-id="83177-665">Pre-processing errors can occur if hello task's resource files have moved, hello Storage account is no longer available, or another issue was encountered that prevented hello successful copying of files toohello node.</span></span>

* <span data-ttu-id="83177-666">**Ошибки передачи файлов**</span><span class="sxs-lookup"><span data-stu-id="83177-666">**File upload failures**</span></span>

    <span data-ttu-id="83177-667">Если происходит сбой передачи файлов, указанных для задачи по любой причине, ошибка передачи файла устанавливается для задачи «hello».</span><span class="sxs-lookup"><span data-stu-id="83177-667">If uploading files that are specified for a task fails for any reason, a file upload error is set for hello task.</span></span>

    <span data-ttu-id="83177-668">Отправка ошибки могут возникать, если hello SAS, предоставленный доступ к хранилищу Azure является недопустимым или не предоставляет разрешения на запись, в случае учетной записи хранилища hello, или если другая проблема была обнаружена, препятствующая hello успешно копирование файлов из файла узел Hello.</span><span class="sxs-lookup"><span data-stu-id="83177-668">File upload errors can occur if hello SAS supplied for accessing Azure Storage is invalid or does not provide write permissions, if hello storage account is no longer available, or if another issue was encountered that prevented hello successful copying of files from hello node.</span></span>    

* <span data-ttu-id="83177-669">**Ошибки приложений**</span><span class="sxs-lookup"><span data-stu-id="83177-669">**Application failures**</span></span>

    <span data-ttu-id="83177-670">также может произойти сбой процесса Hello, который указан с помощью командной строки задачу hello.</span><span class="sxs-lookup"><span data-stu-id="83177-670">hello process that is specified by hello task's command line can also fail.</span></span> <span data-ttu-id="83177-671">Hello процесс считается toohave сбой при возврате ненулевой код выхода процесса hello, выполняемый задачей «hello» (в разделе *кодов выхода задачи* в следующем разделе hello).</span><span class="sxs-lookup"><span data-stu-id="83177-671">hello process is deemed toohave failed when a nonzero exit code is returned by hello process that is executed by hello task (see *Task exit codes* in hello next section).</span></span>

    <span data-ttu-id="83177-672">Об ошибках в приложении, можно настроить пакет задачу hello повтора tooautomatically tooa заданное число раз.</span><span class="sxs-lookup"><span data-stu-id="83177-672">For application failures, you can configure Batch tooautomatically retry hello task up tooa specified number of times.</span></span>

* <span data-ttu-id="83177-673">**Ошибки ограничения**</span><span class="sxs-lookup"><span data-stu-id="83177-673">**Constraint failures**</span></span>

    <span data-ttu-id="83177-674">Можно задать ограничение, которое задает длительность hello максимальное выполнения задания или задачи, hello *maxWallClockTime*.</span><span class="sxs-lookup"><span data-stu-id="83177-674">You can set a constraint that specifies hello maximum execution duration for a job or task, hello *maxWallClockTime*.</span></span> <span data-ttu-id="83177-675">Это может быть полезно для завершения задачи, которые не прошли tooprogress.</span><span class="sxs-lookup"><span data-stu-id="83177-675">This can be useful for terminating tasks that fail tooprogress.</span></span>

    <span data-ttu-id="83177-676">При превышении hello максимальное время hello задача помечается как *завершения*, а код выхода hello установлено слишком`0xC000013A` и hello *schedulingError* поле помечено как `{ category:"ServerError", code="TaskEnded"}`.</span><span class="sxs-lookup"><span data-stu-id="83177-676">When hello maximum amount of time has been exceeded, hello task is marked as *completed*, but hello exit code is set too`0xC000013A` and hello *schedulingError* field is marked as `{ category:"ServerError", code="TaskEnded"}`.</span></span>

### <a name="debugging-application-failures"></a><span data-ttu-id="83177-677">Отладка ошибок приложений</span><span class="sxs-lookup"><span data-stu-id="83177-677">Debugging application failures</span></span>
* <span data-ttu-id="83177-678">`stderr` и `stdout`</span><span class="sxs-lookup"><span data-stu-id="83177-678">`stderr` and `stdout`</span></span>

    <span data-ttu-id="83177-679">Во время выполнения приложения может привести к выходных данных диагностики, которые можно использовать tootroubleshoot проблемы.</span><span class="sxs-lookup"><span data-stu-id="83177-679">During execution, an application might produce diagnostic output that you can use tootroubleshoot issues.</span></span> <span data-ttu-id="83177-680">Как упоминалось в hello в разделе [файлов и каталогов](#files-and-directories), hello пакетная служба записывает стандартный выход и Стандартная ошибка вывода слишком`stdout.txt` и `stderr.txt` файлы из каталога задача hello hello вычислительного узла.</span><span class="sxs-lookup"><span data-stu-id="83177-680">As mentioned in hello earlier section [Files and directories](#files-and-directories), hello Batch service writes standard output and standard error output too`stdout.txt` and `stderr.txt` files in hello task directory on hello compute node.</span></span> <span data-ttu-id="83177-681">Эти файлы можно использовать hello портал Azure или один из пакета SDK toodownload hello.</span><span class="sxs-lookup"><span data-stu-id="83177-681">You can use hello Azure portal or one of hello Batch SDKs toodownload these files.</span></span> <span data-ttu-id="83177-682">Например, можно получить этих и других файлов, для устранения неполадок с помощью [ComputeNode.GetNodeFile] [ net_getfile_node] и [CloudTask.GetNodeFile] [ net_getfile_task] в библиотеке .NET пакета hello.</span><span class="sxs-lookup"><span data-stu-id="83177-682">For example, you can retrieve these and other files for troubleshooting purposes by using [ComputeNode.GetNodeFile][net_getfile_node] and [CloudTask.GetNodeFile][net_getfile_task] in hello Batch .NET library.</span></span>

* <span data-ttu-id="83177-683">**Код завершения задач**</span><span class="sxs-lookup"><span data-stu-id="83177-683">**Task exit codes**</span></span>

    <span data-ttu-id="83177-684">Как упоминалось ранее, задача отмеченного как пакетной службой hello hello процесс, выполняемый задачей «hello» возвращает ненулевой код выхода.</span><span class="sxs-lookup"><span data-stu-id="83177-684">As mentioned earlier, a task is marked as failed by hello Batch service if hello process that is executed by hello task returns a nonzero exit code.</span></span> <span data-ttu-id="83177-685">Когда задача выполняет процесс, пакет заполняет свойство код выхода задачу hello с hello *возвращают код процесса hello*.</span><span class="sxs-lookup"><span data-stu-id="83177-685">When a task executes a process, Batch populates hello task's exit code property with hello *return code of hello process*.</span></span> <span data-ttu-id="83177-686">Это важные toonote, код завершения задачи **не** определяется hello пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-686">It is important toonote that a task's exit code is **not** determined by hello Batch service.</span></span> <span data-ttu-id="83177-687">Код завершения задачи определяется сам процесс hello или hello операционной системы, на который выполняется процесс hello.</span><span class="sxs-lookup"><span data-stu-id="83177-687">A task's exit code is determined by hello process itself or hello operating system on which hello process executed.</span></span>

### <a name="accounting-for-task-failures-or-interruptions"></a><span data-ttu-id="83177-688">Работа со сбоями и прерываниями задач</span><span class="sxs-lookup"><span data-stu-id="83177-688">Accounting for task failures or interruptions</span></span>
<span data-ttu-id="83177-689">Задачи могут иногда завершаться ошибками или прерываться.</span><span class="sxs-lookup"><span data-stu-id="83177-689">Tasks might occasionally fail or be interrupted.</span></span> <span data-ttu-id="83177-690">Hello самим приложением задач может завершиться ошибкой, hello узла, в которой hello запущена задача может быть перезагружены или hello узла может быть удалена из пула hello во время операции изменения размера Если hello политика изъятия пула является набор узлов tooremove немедленно без ожидания toofinish задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-690">hello task application itself might fail, hello node on which hello task is running might be rebooted, or hello node might be removed from hello pool during a resize operation if hello pool's deallocation policy is set tooremove nodes immediately without waiting for tasks toofinish.</span></span> <span data-ttu-id="83177-691">Во всех случаях задачу hello можно автоматически постановки в очередь пакетом для выполнения на другом узле.</span><span class="sxs-lookup"><span data-stu-id="83177-691">In all cases, hello task can be automatically requeued by Batch for execution on another node.</span></span>

<span data-ttu-id="83177-692">Он может также временная проблема toocause toohang задач или принимать tooexecute слишком длинное.</span><span class="sxs-lookup"><span data-stu-id="83177-692">It is also possible for an intermittent issue toocause a task toohang or take too long tooexecute.</span></span> <span data-ttu-id="83177-693">Можно задать интервал приветствия максимальное выполнения задачи.</span><span class="sxs-lookup"><span data-stu-id="83177-693">You can set hello maximum execution interval for a task.</span></span> <span data-ttu-id="83177-694">В случае превышения выполнения максимальный интервал приветствия hello пакетная служба прерывает приложение hello задач.</span><span class="sxs-lookup"><span data-stu-id="83177-694">If hello maximum execution interval is exceeded, hello Batch service interrupts hello task application.</span></span>

### <a name="connecting-toocompute-nodes"></a><span data-ttu-id="83177-695">Соединяющие узлы toocompute</span><span class="sxs-lookup"><span data-stu-id="83177-695">Connecting toocompute nodes</span></span>
<span data-ttu-id="83177-696">Можно выполнять дополнительные отладка и устранение неполадок при входе в вычислительном узле tooa удаленно.</span><span class="sxs-lookup"><span data-stu-id="83177-696">You can perform additional debugging and troubleshooting by signing in tooa compute node remotely.</span></span> <span data-ttu-id="83177-697">Можно использовать для узлов Windows hello Azure портала toodownload файл протокола удаленного рабочего стола (RDP) и получить сведения о соединении Secure Shell (SSH) для Linux узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-697">You can use hello Azure portal toodownload a Remote Desktop Protocol (RDP) file for Windows nodes and obtain Secure Shell (SSH) connection information for Linux nodes.</span></span> <span data-ttu-id="83177-698">Также это можно сделать с помощью hello API-интерфейсы пакета — например, с [пакета .NET] [ net_rdpfile] или [пакета Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span><span class="sxs-lookup"><span data-stu-id="83177-698">You can also do this by using hello Batch APIs--for example, with [Batch .NET][net_rdpfile] or [Batch Python](batch-linux-nodes.md#connect-to-linux-nodes-using-ssh).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83177-699">tooconnect tooa узлу с помощью протокола удаленного рабочего СТОЛА или SSH, необходимо сначала создать пользователя на узле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-699">tooconnect tooa node via RDP or SSH, you must first create a user on hello node.</span></span> <span data-ttu-id="83177-700">toodo это, можно использовать портал Azure hello [добавить узел tooa учетной записи пользователя] [ rest_create_user] с помощью API REST пакета hello, вызовите hello [ComputeNode.CreateComputeNodeUser] [ net_create_user] метода в пакете .NET или вызов hello [add_user] [ py_add_user] метод в модуле hello пакета Python.</span><span class="sxs-lookup"><span data-stu-id="83177-700">toodo this, you can use hello Azure portal, [add a user account tooa node][rest_create_user] by using hello Batch REST API, call hello [ComputeNode.CreateComputeNodeUser][net_create_user] method in Batch .NET, or call hello [add_user][py_add_user] method in hello Batch Python module.</span></span>
>
>

### <a name="troubleshooting-problematic-compute-nodes"></a><span data-ttu-id="83177-701">Устранение неполадок проблемных вычислительных узлов</span><span class="sxs-lookup"><span data-stu-id="83177-701">Troubleshooting problematic compute nodes</span></span>
<span data-ttu-id="83177-702">В ситуациях, где некоторые из ваших задач завершается ошибкой пакета клиентского приложения или службы можно просматривать метаданные hello hello сбой задачи tooidentify некорректно работающие узла.</span><span class="sxs-lookup"><span data-stu-id="83177-702">In situations where some of your tasks are failing, your Batch client application or service can examine hello metadata of hello failed tasks tooidentify a misbehaving node.</span></span> <span data-ttu-id="83177-703">Получает уникальный идентификатор каждого узла в кластер, и включается в метаданные задачи hello hello узел, на котором выполняется задача.</span><span class="sxs-lookup"><span data-stu-id="83177-703">Each node in a pool is given a unique ID, and hello node on which a task runs is included in hello task metadata.</span></span> <span data-ttu-id="83177-704">Определив проблемный узел, вы можете предпринять некоторые действия:</span><span class="sxs-lookup"><span data-stu-id="83177-704">After you've identified a problem node, you can take several actions with it:</span></span>

* <span data-ttu-id="83177-705">**Перезагрузить узел hello** ([REST][rest_reboot] | [.NET][net_reboot])</span><span class="sxs-lookup"><span data-stu-id="83177-705">**Reboot hello node** ([REST][rest_reboot] | [.NET][net_reboot])</span></span>

    <span data-ttu-id="83177-706">Перезапустить узел hello иногда можно очистить скрытых проблем, например постоянный или зависших процессов.</span><span class="sxs-lookup"><span data-stu-id="83177-706">Restarting hello node can sometimes clear up latent issues like stuck or crashed processes.</span></span> <span data-ttu-id="83177-707">Обратите внимание, что если пул, использует задачу запуска или задания, использует задачу подготовки задания, они выполняются при перезапуске узла hello.</span><span class="sxs-lookup"><span data-stu-id="83177-707">Note that if your pool uses a start task or your job uses a job preparation task, they are executed when hello node restarts.</span></span>
* <span data-ttu-id="83177-708">**Пересоздать hello узел** ([REST][rest_reimage] | [.NET][net_reimage])</span><span class="sxs-lookup"><span data-stu-id="83177-708">**Reimage hello node** ([REST][rest_reimage] | [.NET][net_reimage])</span></span>

    <span data-ttu-id="83177-709">Это позволит переустановить hello операционной системы на узле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-709">This reinstalls hello operating system on hello node.</span></span> <span data-ttu-id="83177-710">Как и в случае перезагрузки узла, запуска задач и задачи подготовки задания повторно после hello узел был повторного создания образа.</span><span class="sxs-lookup"><span data-stu-id="83177-710">As with rebooting a node, start tasks and job preparation tasks are rerun after hello node has been reimaged.</span></span>
* <span data-ttu-id="83177-711">**Удалить узел hello из пула hello** ([REST][rest_remove] | [.NET][net_remove])</span><span class="sxs-lookup"><span data-stu-id="83177-711">**Remove hello node from hello pool** ([REST][rest_remove] | [.NET][net_remove])</span></span>

    <span data-ttu-id="83177-712">Иногда бывает необходимо toocompletely удалить узел hello из пула hello.</span><span class="sxs-lookup"><span data-stu-id="83177-712">Sometimes it is necessary toocompletely remove hello node from hello pool.</span></span>
* <span data-ttu-id="83177-713">**Отключение планирования задач на узле hello** ([REST][rest_offline] | [.NET][net_offline])</span><span class="sxs-lookup"><span data-stu-id="83177-713">**Disable task scheduling on hello node** ([REST][rest_offline] | [.NET][net_offline])</span></span>

    <span data-ttu-id="83177-714">Это фактически переводит узел hello автономный режим, чтобы последующие задачи не назначаются tooit, но разрешает запуск tooremain узел hello и в пуле hello.</span><span class="sxs-lookup"><span data-stu-id="83177-714">This effectively takes hello node offline so that no further tasks are assigned tooit, but allows hello node tooremain running and in hello pool.</span></span> <span data-ttu-id="83177-715">Это позволит вам tooperform дополнительное исследование в hello причина сбоев hello без потери данных hello вызвавшие сбой задача и без узла hello сбоям дополнительную задачу.</span><span class="sxs-lookup"><span data-stu-id="83177-715">This enables you tooperform further investigation into hello cause of hello failures without losing hello failed task's data, and without hello node causing additional task failures.</span></span> <span data-ttu-id="83177-716">Например, можно отключить, планированием задач на узле hello, затем [вход в удаленном режиме](#connecting-to-compute-nodes) tooexamine hello журналы событий узла или других для устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="83177-716">For example, you can disable task scheduling on hello node, then [sign in remotely](#connecting-to-compute-nodes) tooexamine hello node's event logs or perform other troubleshooting.</span></span> <span data-ttu-id="83177-717">После завершения анализа, можно затем вывести hello узла обратно в оперативный режим, включение планирования задач ([REST][rest_online] | [.NET] [ net_online]), или один из hello другие действия уже было сказано ранее.</span><span class="sxs-lookup"><span data-stu-id="83177-717">After you've finished your investigation, you can then bring hello node back online by enabling task scheduling ([REST][rest_online] | [.NET][net_online]), or perform one of hello other actions discussed earlier.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="83177-718">С каждого действия, описанные в этом разделе--перезагрузки, повторное создание образа, удаление и отключение планирования задач — вы могли toospecify обработки задач, выполняющихся в данный момент на узле hello при выполнении действия hello.</span><span class="sxs-lookup"><span data-stu-id="83177-718">With each action that is described in this section--reboot, reimage, remove, and disable task scheduling--you are able toospecify how tasks currently running on hello node are handled when you perform hello action.</span></span> <span data-ttu-id="83177-719">Например, при отключении планированием задач на узле с помощью клиентской библиотеки .NET пакета hello, можно указать [DisableComputeNodeSchedulingOption] [ net_offline_option] перечисления значение toospecify ли слишком**Terminate** выполнение задач, **Requeue** их на другие узлы, чтобы запланировать или разрешить toocomplete выполнение задачи до выполнения действия hello (**TaskCompletion**).</span><span class="sxs-lookup"><span data-stu-id="83177-719">For example, when you disable task scheduling on a node by using hello Batch .NET client library, you can specify a [DisableComputeNodeSchedulingOption][net_offline_option] enum value toospecify whether too**Terminate** running tasks, **Requeue** them for scheduling on other nodes, or allow running tasks toocomplete before performing hello action (**TaskCompletion**).</span></span>
>
>

## <a name="next-steps"></a><span data-ttu-id="83177-720">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="83177-720">Next steps</span></span>
* <span data-ttu-id="83177-721">Дополнительные сведения о hello [API-интерфейсы пакета и средства](batch-apis-tools.md) для сборки пакета решения.</span><span class="sxs-lookup"><span data-stu-id="83177-721">Learn about hello [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="83177-722">Показывает, как образец пакета приложения, пошаговые инструкции по [начало работы с библиотекой пакетной службы Azure hello для .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="83177-722">Walk through a sample Batch application step-by-step in [Get started with hello Azure Batch Library for .NET](batch-dotnet-get-started.md).</span></span> <span data-ttu-id="83177-723">Имеется также [версию Python](batch-python-tutorial.md) учебника hello, работающей на платформе Linux рабочей нагрузки вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="83177-723">There is also a [Python version](batch-python-tutorial.md) of hello tutorial that runs a workload on Linux compute nodes.</span></span>
* <span data-ttu-id="83177-724">Загрузить и построить hello [обозреватель пакета] [ github_batchexplorer] образец проекта для использования во время разработки пакета решения.</span><span class="sxs-lookup"><span data-stu-id="83177-724">Download and build hello [Batch Explorer][github_batchexplorer] sample project for use while you develop your Batch solutions.</span></span> <span data-ttu-id="83177-725">Используя обозреватель пакета hello, можно выполнить следующие hello и многое другое.</span><span class="sxs-lookup"><span data-stu-id="83177-725">Using hello Batch Explorer, you can perform hello following and more:</span></span>

  * <span data-ttu-id="83177-726">отслеживать и изменять работу пулов, заданий и задач в своей учетной записи пакетной службы;</span><span class="sxs-lookup"><span data-stu-id="83177-726">Monitor and manipulate pools, jobs, and tasks within your Batch account</span></span>
  * <span data-ttu-id="83177-727">загружать с узлов файлы `stdout.txt`, `stderr.txt` или любые другие;</span><span class="sxs-lookup"><span data-stu-id="83177-727">Download `stdout.txt`, `stderr.txt`, and other files from nodes</span></span>
  * <span data-ttu-id="83177-728">создавать на узлах пользователей и загружать RDP-файлы для удаленного входа.</span><span class="sxs-lookup"><span data-stu-id="83177-728">Create users on nodes and download RDP files for remote login</span></span>
* <span data-ttu-id="83177-729">Узнайте, каким образом слишком[создание кластеров Linux вычислительные узлы](batch-linux-nodes.md).</span><span class="sxs-lookup"><span data-stu-id="83177-729">Learn how too[create pools of Linux compute nodes](batch-linux-nodes.md).</span></span>
* <span data-ttu-id="83177-730">Посетите hello [форум по пакетной службы Azure] [ batch_forum] в библиотеке MSDN.</span><span class="sxs-lookup"><span data-stu-id="83177-730">Visit hello [Azure Batch forum][batch_forum] on MSDN.</span></span> <span data-ttu-id="83177-731">Форум Hello —, лучше всего поместить вопросы tooask являются только собираю или экспертом по с помощью пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="83177-731">hello forum is a good place tooask questions, whether you are just learning or are an expert in using Batch.</span></span>

[1]: ./media/batch-api-basics/node-folder-structure.png

[azure_storage]: https://azure.microsoft.com/services/storage/
[batch_forum]: https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurebatch
[cloud_service_sizes]: ../cloud-services/cloud-services-sizes-specs.md
[msmpi]: https://msdn.microsoft.com/library/bb524831.aspx
[github_samples]: https://github.com/Azure/azure-batch-samples
[github_sample_taskdeps]:  https://github.com/Azure/azure-batch-samples/tree/master/CSharp/ArticleProjects/TaskDependencies
[github_batchexplorer]: https://github.com/Azure/azure-batch-samples/tree/master/CSharp/BatchExplorer
[batch_net_api]: https://msdn.microsoft.com/library/azure/mt348682.aspx
[msdn_env_vars]: https://msdn.microsoft.com/library/azure/mt743623.aspx
[net_cloudjob_jobmanagertask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.jobmanagertask.aspx
[net_cloudjob_priority]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.priority.aspx
[net_cloudpool_starttask]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudpool.starttask.aspx
[net_cloudtask_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.environmentsettings.aspx
[net_create_cert]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.certificateoperations.createcertificate.aspx
[net_create_user]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.createcomputenodeuser.aspx
[net_getfile_node]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getnodefile.aspx
[net_getfile_task]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudtask.getnodefile.aspx
[net_job_env]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.commonenvironmentsettings.aspx
[net_multiinstancesettings]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.multiinstancesettings.aspx
[net_onalltaskscomplete]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.cloudjob.onalltaskscomplete.aspx
[net_rdp]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.getrdpfile.aspx
[net_reboot]: https://msdn.microsoft.com/library/azure/mt631495.aspx
[net_reimage]: https://msdn.microsoft.com/library/azure/mt631496.aspx
[net_remove]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.pooloperations.removefrompoolasync.aspx
[net_offline]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.disableschedulingasync.aspx
[net_online]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.computenode.enableschedulingasync.aspx
[net_offline_option]: https://msdn.microsoft.com/library/azure/microsoft.azure.batch.common.disablecomputenodeschedulingoption.aspx
[net_rdpfile]: https://msdn.microsoft.com/library/azure/Mt272127.aspx
[vnet]: https://msdn.microsoft.com/library/azure/dn820174.aspx#bk_netconf

[py_add_user]: http://azure-sdk-for-python.readthedocs.io/en/latest/ref/azure.batch.operations.html#azure.batch.operations.ComputeNodeOperations.add_user

[batch_rest_api]: https://msdn.microsoft.com/library/azure/Dn820158.aspx
[rest_add_job]: https://msdn.microsoft.com/library/azure/mt282178.aspx
[rest_add_pool]: https://msdn.microsoft.com/library/azure/dn820174.aspx
[rest_add_cert]: https://msdn.microsoft.com/library/azure/dn820169.aspx
[rest_add_task]: https://msdn.microsoft.com/library/azure/dn820105.aspx
[rest_create_user]: https://msdn.microsoft.com/library/azure/dn820137.aspx
[rest_get_task_info]: https://msdn.microsoft.com/library/azure/dn820133.aspx
[rest_job_schedules]: https://msdn.microsoft.com/library/azure/mt282179.aspx
[rest_multiinstance]: https://msdn.microsoft.com/library/azure/mt637905.aspx
[rest_multiinstancesettings]: https://msdn.microsoft.com/library/azure/dn820105.aspx#multiInstanceSettings
[rest_update_job]: https://msdn.microsoft.com/library/azure/dn820162.aspx
[rest_rdp]: https://msdn.microsoft.com/library/azure/dn820120.aspx
[rest_reboot]: https://msdn.microsoft.com/library/azure/dn820171.aspx
[rest_reimage]: https://msdn.microsoft.com/library/azure/dn820157.aspx
[rest_remove]: https://msdn.microsoft.com/library/azure/dn820194.aspx
[rest_offline]: https://msdn.microsoft.com/library/azure/mt637904.aspx
[rest_online]: https://msdn.microsoft.com/library/azure/mt637907.aspx

[vm_marketplace]: https://azure.microsoft.com/marketplace/virtual-machines/
