---
title: "результаты aaaPersist или журналы из завершения заданий и задач tooa данных store - пакетной службы Azure | Документы Microsoft"
description: "Дополнительные сведения о различных параметрах для сохранения выходных данных из пакетных задач и заданий. Можно сохранить данные tooAzure хранилища или tooanother данных хранения."
services: batch
author: tamram
manager: timlt
editor: 
ms.assetid: 16e12d0e-958c-46c2-a6b8-7843835d830e
ms.service: batch
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: vm-windows
ms.workload: big-compute
ms.date: 06/16/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: f0b11e387f1694e1ce3e9573db7f6013f0154cad
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="persist-job-and-task-output"></a>Сохранение пакетных заданий и выходных данных задач

[!INCLUDE [batch-task-output-include](../../includes/batch-task-output-include.md)]

К типичным примерам выходных данных задачи относятся:

- Файлы, созданные при hello задача обрабатывает входящие данные.
- файлы журналов, сопоставленные с выполнением задачи. 

В этой статье описываются различные параметры для сохранения сценарии выходные данные и hello задач, для которых лучше всего подходит каждый параметр.   

## <a name="about-hello-batch-file-conventions-standard"></a>О стандартных пакетных файлов, принятых hello

Пакет определяет дополнительный набор соглашений для именования выходных файлов задач в службе хранилища Azure. Hello [пакетных файлов, принятых standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) описаны эти соглашения. стандартный файл соглашения Hello определяет имена hello hello целевой контейнер и BLOB-путь в хранилище Azure для данной выходной файл, на основе имен hello hello заданий и задач.

Он работает tooyou ли вы решите hello toouse файлов, принятых стандарт именования выходные файлы данных. Можно также имя hello конечного контейнера и больших двоичных объектов, однако нужно. Если вы используете hello стандартные соглашения файлов для именования выходных файлов, то выходные файлы были доступны для просмотра в hello [портал Azure][portal].

Существует несколько способов, которые можно использовать стандартный файл соглашения hello:

- При использовании hello пакетной службы API toopersist выходные файлы, вы можете tooname назначения контейнеры и большие двоичные объекты в соответствии с toohello стандартные соглашения файлов. Hello API пакетной службы позволяет toopersist выходных файлов из клиентского кода без изменения приложения и задачи.
- При разработке в .NET Framework можно использовать hello [Azure пакетных файлов, принятых библиотека для .NET][nuget_package]. Преимущество использования Эта библиотека является поддержка запросов выходные файлы в соответствии с Идентификатором tootheir или назначение. встроенные функции запросов Hello позволяет легко tooaccess выходных файлов из клиентского приложения или от других задач. Тем не менее приложения задач должна быть библиотека измененный toocall соглашения файлов. Дополнительные сведения см. в разделе hello справочник для hello [соглашения файлов библиотеки для .NET](https://msdn.microsoft.com/library/microsoft.azure.batch.conventions.files.aspx).
- При разработке на языке, отличном от .NET, вы можете реализовать hello в приложении стандартные соглашения файлов.

## <a name="design-considerations-for-persisting-output"></a>Рекомендации по проектированию сохраняемых выходных данных 

При разработке пакета решения следует учитывайте следующие hello факторы, связанные toojob и выходные данные задач.

* **Время существования вычислительного узла.** Нередко вычислительные узлы являются временными, особенно в пулах с поддержкой автомасштабирования. Выходные данные задачу, которая работает на узле доступен только в том случае, когда узел hello существует, и только в пределах срока хранения hello файл установки для задачи «hello». Если задача создает выходные данные, которые могут потребоваться после завершения задачи hello, задачу hello необходимо передать его выходные данные файлы tooa постоянное хранилище таких как хранилище Azure.

* **Хранилище выходных данных**. В качестве хранилища выходных данных задачи рекомендуется использовать службу хранилища Azure, но подойдет и любое долговременное хранилище. Написание tooAzure выходные данные задачи хранилища интегрирована в hello API пакетной службы. Если используется другая форма долговременное хранилище, вам потребуется выходные данные задачи toopersist логику в приложение hello toowrite самостоятельно.   

* **Получение выходных данных**: можно получить выходные данные задачи непосредственно из hello вычислительных узлов в пул или из хранилища Azure или другом хранилище данных Если сохраняется в выходных данных задачи. tooretrieve задачи выходных данных непосредственно из вычислительных узлов, понадобится hello имя файла и его расположение вывода на узле hello. Если сохранить выходные данные задачи tooAzure хранилища требуется файл toohello hello полный путь в хранилище Azure toodownload hello выходные файлы с hello пакет SDK хранилища Azure.

* **Просмотр выходных данных**: при переходе tooa пакетной задаче hello Azure портала и выберите **файлов на узле**, решаемой все файлы, связанные с задачей «hello», не только hello выходные файлы, которые вас интересуют. Опять же файлы на вычислительных узлах доступны только во время, hello узел существует, и только в течение времени хранения файлов hello был установлен для задачи «hello». результат выполнения задачи tooview, что сохранения tooAzure хранилища, можно использовать портал Azure hello или клиентского приложения хранилища Azure, такие как hello [обозреватель хранилищ Azure][storage_explorer]. tooview выходные данные в хранилище Azure с портала hello или другого средства, необходимо знать расположение файла hello и напрямую перейти tooit.

## <a name="options-for-persisting-output"></a>Способы сохранения выходных данных

В зависимости от вашего сценария существует несколько разных подходов, которые вы могли toopersist выходные данные задачи:

- Используйте API-Интерфейс службы пакета hello.  
- Используйте hello пакетных файлов, принятых библиотеку для .NET.  
- Реализуйте hello в приложении стандартные соглашения файлов пакета.
- Реализация пользовательского решения для перемещения файлов.

Hello в следующих разделах описывается каждый подход более подробно.

### <a name="use-hello-batch-service-api"></a>Используйте API-Интерфейс службы пакета hello

С версией 2017 г-05-01 hello пакетная служба добавляет поддержку для указания выходных файлов в хранилище Azure для данных задачи при вы [добавить задание tooa задачи](https://docs.microsoft.com/rest/api/batchservice/add-a-task-to-a-job) или [добавить коллекцию задач tooa задания](https://docs.microsoft.com/rest/api/batchservice/add-a-collection-of-tasks-to-a-job).

Hello API пакетной службы поддерживает сохранение tooan данных задачи учетной записи хранилища Azure из пулов, созданных с помощью hello конфигурации виртуальной машины. С hello API пакета службы можно сохранить данные задачи без изменения приложения hello, которое выполняет свою задачу. При необходимости можно следовать toohello [пакетных файлов, принятых standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) именования файлов hello, сохранить tooAzure хранилища. 

Используйте выходные данные при задачу toopersist hello пакета API службы:

- Вы хотите toopersist данные из пакетные задачи и задачи диспетчера заданий в пулах, созданных с помощью hello конфигурации виртуальной машины.
- Требуется контейнер хранилища Azure tooan toopersist данных с произвольное имя.
- Вы хотите toopersist данных tooan хранилища Azure контейнер с именем, соответствующим toohello [пакетных файлов, принятых standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions). 

> [!NOTE]
> Hello API пакетной службы не поддерживает сохранение данных из задачи, выполняемые в пулы, созданных с помощью hello конфигурацию облачной службы. Сведения о сохранения задачи вывода пулы работающие hello конфигурация облачных служб см. в разделе [сохранения заданий и задач tooAzure данные хранилища с библиотекой hello пакетных файлов, принятых для .NET toopersist](batch-task-output-file-conventions.md)
> 
> 

Дополнительные сведения о сохранения выходных данных задачи с hello API пакетной службы в разделе [сохранения данных задач tooAzure хранилища с hello API пакетной службы](batch-task-output-files.md). См. также hello [PersistOutputs] [github_persistoutputs] Пример проекта на GitHub, где показано, как toouse hello пакета клиентская библиотека .NET toopersist задачи вывода toodurable хранилища.

### <a name="use-hello-batch-file-conventions-library-for-net"></a>Использование библиотеки hello пакетных файлов, принятых для .NET

Разработчиков, создающих решения пакета с помощью C# и .NET можно использовать hello [соглашения файлов библиотеки для .NET] [ nuget_package] tooan данных задач toopersist учетную запись хранилища Azure, в соответствии с toohello [пакетного файла Стандартные соглашения](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions). Библиотека файлов, принятых Hello обрабатывает файлы tooAzure скользящего выходные данные хранилища, именования назначения контейнеры и большие двоичные объекты хорошо известных.

Библиотека файлов, принятых Hello поддерживает запросы выходные файлы по Идентификатору или цели, сделав его легко toolocate их без необходимости hello завершения файла идентификаторы URI. 

Использование библиотеки hello пакетных файлов, принятых для задач toopersist .NET, когда выходные данные:

- Во время выполнения hello задачи по-прежнему требуется tooAzure toostream данных хранилища.
- Вы хотите toopersist данные из пулов, созданных с помощью hello конфигурацию облачной службы или конфигурации виртуальной машины hello.
- Клиентское приложение или другие задачи в hello заданий toolocate потребностей и загрузки выходных файлов задач по Идентификатору или по назначению. 
- Вы хотите tooperform контрольных точек или раннее передачи начальных результатах.
- Вы хотите tooview выходные данные задачи в hello портал Azure.

Дополнительные сведения о сохранения выходных данных задачи с библиотекой hello файлов, принятых для .NET. в разделе [сохранения заданий и задач tooAzure данные хранилища с библиотекой hello пакетных файлов, принятых для .NET toopersist ](batch-task-output-file-conventions.md). См. также hello [PersistOutputs] [github_persistoutputs] Пример проекта на GitHub, где показано, как toouse hello соглашения файлов библиотеки для .NET toopersist задачи вывода toodurable хранилища.

Hello [PersistOutputs] [github_persistoutputs] примера проекта на GitHub показано, как toouse hello пакета клиентская библиотека .NET toopersist задачи вывода toodurable хранилища.

### <a name="implement-hello-batch-file-conventions-standard"></a>Hello пакетных файлов, принятых стандартные реализации

Если вы используете язык, отличный от .NET, можно реализовать hello [пакетных файлов, принятых standard](https://github.com/Azure/azure-sdk-for-net/tree/vs17Dev/src/SDKs/Batch/Support/FileConventions#conventions) в приложении. 

Вы можете tooimplement hello стандарт именования файлов, принятых самостоятельно при необходимости проверенные схему именования, или при необходимости tooview выходные данные задачи в hello портал Azure.

### <a name="implement-a-custom-file-movement-solution"></a>Реализация пользовательского решения для перемещения файлов

Вы также можете реализовать собственное полноценное решение для перемещения файлов. Такой подход применим в следующих случаях:

- Вы хотите хранилища toopersist задач данных tooa данных, отличного от хранилища Azure. tooupload файлы tooa хранилище данных Azure SQL или Azure DataLake, можно создать настраиваемый сценарий или исполняемый файл tooupload toothat расположение. Затем можно вызвать его в командной строке hello после выполнения основной исполняемый файл. Например, на узле Windows можно вызывать две следующие команды:`doMyWork.exe && uploadMyFilesToSql.exe`
- Вы хотите tooperform контрольных точек или раннее передачи начальных результатах.
- Вы хотите toomaintain четко контролировать обработку ошибок. Например может потребоваться tooimplement собственное решение, если требуется tootake действия зависимостей задач toouse определенных отправить действия в зависимости от конкретных задач кодов выхода. Дополнительные сведения о действиях зависимостей задач см. в разделе [создавать зависимости toorun задачи, которые зависят от других задач](batch-task-dependencies.md). 

## <a name="next-steps"></a>Дальнейшие действия

- Просматривать с помощью новых функций hello в данных задач toopersist hello API пакетной службы в [сохранения данных задач tooAzure хранилища с hello API пакетной службы](batch-task-output-files.md).
- Сведения об использовании hello пакетных файлов, принятых библиотеки для .NET в [сохранения заданий и задач tooAzure данные хранилища с библиотекой hello пакетных файлов, принятых для .NET toopersist ](batch-task-output-file-conventions.md).
- В разделе [PersistOutputs] [github_persistoutputs] hello примера проекта на GitHub, где показано, как toouse оба hello пакета клиентская библиотека для .NET и hello соглашения файлов библиотеки для .NET toopersist задачи вывода toodurable хранилища.

[nuget_package]: https://www.nuget.org/packages/Microsoft.Azure.Batch.Conventions.Files
[portal]: https://portal.azure.com
[storage_explorer]: http://storageexplorer.com/
