---
title: "Выполнение пакетной службой Azure крупномасштабных решений для параллельных вычислений в облаке | Документация Майкрософт"
description: "Узнайте об использовании пакетной службы Azure для крупномасштабных параллельных рабочих нагрузок и рабочих нагрузок HPC."
services: batch
documentationcenter: 
author: tamram
manager: timlt
editor: 
ms.assetid: 93e37d44-7585-495e-8491-312ed584ab79
ms.service: batch
ms.workload: big-compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 05/05/2017
ms.author: tamram
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 3bda4859e7ce45f5f7b8df6167e6e9d2cedd5c62
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="run-intrinsically-parallel-workloads-with-batch"></a><span data-ttu-id="bc58e-103">Выполнение реальных параллельных рабочих нагрузок с использованием пакетной службы</span><span class="sxs-lookup"><span data-stu-id="bc58e-103">Run intrinsically parallel workloads with Batch</span></span>

<span data-ttu-id="bc58e-104">Пакетная служба Azure — это служба платформы, которая позволяет эффективно работать с приложениями для крупномасштабных параллельных и высокопроизводительных вычислений (HPC) в облаке.</span><span class="sxs-lookup"><span data-stu-id="bc58e-104">Azure Batch is a platform service for running large-scale parallel and high-performance computing (HPC) applications efficiently in the cloud.</span></span> <span data-ttu-id="bc58e-105">Пакетная служба Azure планирует запуск ресурсоемких вычислительных задач в управляемой коллекции виртуальных машин и автоматически масштабирует вычислительные ресурсы, учитывая требования заданий.</span><span class="sxs-lookup"><span data-stu-id="bc58e-105">Azure Batch schedules compute-intensive work to run on a managed collection of virtual machines, and can automatically scale compute resources to meet the needs of your jobs.</span></span>

<span data-ttu-id="bc58e-106">С помощью пакетной службы Azure вы можете легко определять вычислительные ресурсы Azure, необходимые для параллельного выполнения приложений в нужном масштабе.</span><span class="sxs-lookup"><span data-stu-id="bc58e-106">With Azure Batch, you can easily define Azure compute resources to execute your applications in parallel, and at scale.</span></span> <span data-ttu-id="bc58e-107">Вам не нужно вручную создавать и настраивать кластер высокопроизводительных вычислений (HPC), отдельные виртуальные машины, виртуальные сети или сложную инфраструктуру планировщика задач и заданий, а также управлять всеми этими ресурсами.</span><span class="sxs-lookup"><span data-stu-id="bc58e-107">There's no need to manually create, configure, and manage an HPC cluster, individual virtual machines, virtual networks, or a complex job and task scheduling infrastructure.</span></span> <span data-ttu-id="bc58e-108">Пакетная служба Azure автоматизирует или упрощает выполнение этих задач.</span><span class="sxs-lookup"><span data-stu-id="bc58e-108">Azure Batch automates or simplifies these tasks for you.</span></span>

## <a name="use-cases-for-batch"></a><span data-ttu-id="bc58e-109">Варианты использования пакетной службы</span><span class="sxs-lookup"><span data-stu-id="bc58e-109">Use cases for Batch</span></span>
<span data-ttu-id="bc58e-110">Пакетная служба — это управляемая служба Azure, которая используется для *пакетной обработки данных* и *пакетных вычислений*. Она выполняет множество схожих задач, чтобы получить нужный результат.</span><span class="sxs-lookup"><span data-stu-id="bc58e-110">Batch is a managed Azure service that is used for *batch processing* or *batch computing*--running a large volume of similar tasks for a desired result.</span></span> <span data-ttu-id="bc58e-111">Пакетная обработка данных чаще всего используется в организациях для обработки, преобразования и анализа больших объемов данных.</span><span class="sxs-lookup"><span data-stu-id="bc58e-111">Batch computing is most commonly used by organizations that regularly process, transform, and analyze large volumes of data.</span></span>

<span data-ttu-id="bc58e-112">Пакетная служба хорошо работает с параллельными приложениями и рабочими нагрузками, которые</span><span class="sxs-lookup"><span data-stu-id="bc58e-112">Batch works well with intrinsically parallel (also known as "embarrassingly parallel") applications and workloads.</span></span> <span data-ttu-id="bc58e-113">Параллельные рабочие нагрузки — это нагрузки, которые можно легко разбить на несколько задач, выполняемых одновременно на нескольких компьютерах.</span><span class="sxs-lookup"><span data-stu-id="bc58e-113">Intrinsically parallel workloads are those that are easily split into multiple tasks that perform work simultaneously on many computers.</span></span>

![Параллельные задачи][1]<br/>

<span data-ttu-id="bc58e-115">Примеры рабочих нагрузок, которые обрабатываются по этому методу:</span><span class="sxs-lookup"><span data-stu-id="bc58e-115">Some examples of workloads that are commonly processed using this technique are:</span></span>

* <span data-ttu-id="bc58e-116">Моделирование финансовых рисков.</span><span class="sxs-lookup"><span data-stu-id="bc58e-116">Financial risk modeling</span></span>
* <span data-ttu-id="bc58e-117">анализ климатических и гидрологических данных;</span><span class="sxs-lookup"><span data-stu-id="bc58e-117">Climate and hydrology data analysis</span></span>
* <span data-ttu-id="bc58e-118">отрисовка, обработка и анализ изображений;</span><span class="sxs-lookup"><span data-stu-id="bc58e-118">Image rendering, analysis, and processing</span></span>
* <span data-ttu-id="bc58e-119">Кодирование и перекодировка мультимедиа.</span><span class="sxs-lookup"><span data-stu-id="bc58e-119">Media encoding and transcoding</span></span>
* <span data-ttu-id="bc58e-120">Анализ генетических последовательностей.</span><span class="sxs-lookup"><span data-stu-id="bc58e-120">Genetic sequence analysis</span></span>
* <span data-ttu-id="bc58e-121">анализ расчетного напряжения;</span><span class="sxs-lookup"><span data-stu-id="bc58e-121">Engineering stress analysis</span></span>
* <span data-ttu-id="bc58e-122">Тестирование программного обеспечения.</span><span class="sxs-lookup"><span data-stu-id="bc58e-122">Software testing</span></span>

<span data-ttu-id="bc58e-123">Пакетная служба также может выполнять параллельные вычисления с уменьшением шага в конце и более сложные рабочие нагрузки HPC, такие как приложения, использующие [интерфейс передачи сообщений](batch-mpi.md) .</span><span class="sxs-lookup"><span data-stu-id="bc58e-123">Batch can also perform parallel calculations with a reduce step at the end, and execute more complex HPC workloads such as [Message Passing Interface (MPI)](batch-mpi.md) applications.</span></span>

<span data-ttu-id="bc58e-124">Сравнение пакетной службы с другими решениями HPC в Azure см. в статье [Пакетные решения и решения HPC в облаке Azure](batch-hpc-solutions.md).</span><span class="sxs-lookup"><span data-stu-id="bc58e-124">For a comparison between Batch and other HPC solution options in Azure, see [Batch and HPC solutions](batch-hpc-solutions.md).</span></span>

[!INCLUDE [batch-pricing-include](../../includes/batch-pricing-include.md)]

## <a name="scenario-scale-out-a-parallel-workload"></a><span data-ttu-id="bc58e-125">Сценарий: развертывание параллельной рабочей нагрузки</span><span class="sxs-lookup"><span data-stu-id="bc58e-125">Scenario: Scale out a parallel workload</span></span>
<span data-ttu-id="bc58e-126">Распространенное решение с использованием API пакетной службы для взаимодействия с пакетной службой включает в себя масштабирование принципиально параллельных рабочих нагрузок, таких как отрисовка изображений для 3D-формата, в пуле вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="bc58e-126">A common solution that uses the Batch APIs to interact with the Batch service involves scaling out intrinsically parallel work--such as the rendering of images for 3D scenes--on a pool of compute nodes.</span></span> <span data-ttu-id="bc58e-127">Этот пул вычислительных узлов может быть своего рода фермой отрисовки, которая предоставляет десятки, сотни или даже тысячи ядер для заданий отрисовки.</span><span class="sxs-lookup"><span data-stu-id="bc58e-127">This pool of compute nodes can be your "render farm" that provides tens, hundreds, or even thousands of cores to your rendering job, for example.</span></span>

<span data-ttu-id="bc58e-128">На следующей схеме показан общий рабочий процесс, в котором используется клиентское приложение или размещенная служба для запуска параллельной рабочей нагрузки с помощью пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="bc58e-128">The following diagram shows a common Batch workflow, with a client application or hosted service using Batch to run a parallel workload.</span></span>

![Рабочий процесс решения с использованием пакетной службы][2]

<span data-ttu-id="bc58e-130">В этом распространенном сценарии для обработки вычислительной рабочей нагрузки приложением или службой в пакетной службе Azure необходимо выполнить следующие действия:</span><span class="sxs-lookup"><span data-stu-id="bc58e-130">In this common scenario, your application or service processes a computational workload in Azure Batch by performing the following steps:</span></span>

1. <span data-ttu-id="bc58e-131">Передайте **входные файлы** и **приложение**, которое будет обрабатывать эти файлы, в учетную запись службы хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="bc58e-131">Upload the **input files** and the **application** that will process those files to your Azure Storage account.</span></span> <span data-ttu-id="bc58e-132">Входными файлами могут быть любые данные, которые будет обрабатывать приложение, например данные финансового моделирования или видеофайлы, которые необходимо перекодировать.</span><span class="sxs-lookup"><span data-stu-id="bc58e-132">The input files can be any data that your application will process, such as financial modeling data, or video files to be transcoded.</span></span> <span data-ttu-id="bc58e-133">В качестве приложения можно использовать любое приложение для обработки данных, например приложение отрисовки 3D-данных или медиатранскодер.</span><span class="sxs-lookup"><span data-stu-id="bc58e-133">The application files can be any application that is used for processing the data, such as a 3D rendering application or media transcoder.</span></span>
2. <span data-ttu-id="bc58e-134">Создайте в учетной записи пакетной службы **пул** пакетной службы, состоящий из вычислительных узлов, т. е. виртуальных машин, которые будут выполнять задачи.</span><span class="sxs-lookup"><span data-stu-id="bc58e-134">Create a Batch **pool** of compute nodes in your Batch account--these nodes are the virtual machines that will execute your tasks.</span></span> <span data-ttu-id="bc58e-135">Чтобы установить приложение (отправленное на шаге 1) при присоединении узлов к пулу, укажите такие свойства, как [размер узла](../cloud-services/cloud-services-sizes-specs.md), используемая операционная система и расположение в службе хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="bc58e-135">You specify properties such as the [node size](../cloud-services/cloud-services-sizes-specs.md), their operating system, and the location in Azure Storage of the application to install when the nodes join the pool (the application that you uploaded in step #1).</span></span> <span data-ttu-id="bc58e-136">Кроме того, вы можете настроить [автоматическое масштабирование](batch-automatic-scaling.md) пула в соответствии с рабочей нагрузкой, создаваемой вашими задачами.</span><span class="sxs-lookup"><span data-stu-id="bc58e-136">You can also configure the pool to [automatically scale](batch-automatic-scaling.md) in response to the workload that your tasks generate.</span></span> <span data-ttu-id="bc58e-137">Автоматическое масштабирование динамически регулирует число вычислительных узлов в пуле.</span><span class="sxs-lookup"><span data-stu-id="bc58e-137">Auto-scaling dynamically adjusts the number of compute nodes in the pool.</span></span>
3. <span data-ttu-id="bc58e-138">Создайте **задание** пакетной службы для выполнения рабочей нагрузки в пуле вычислительных узлов.</span><span class="sxs-lookup"><span data-stu-id="bc58e-138">Create a Batch **job** to run the workload on the pool of compute nodes.</span></span> <span data-ttu-id="bc58e-139">При создании задание связывается с пулом пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="bc58e-139">When you create a job, you associate it with a Batch pool.</span></span>
4. <span data-ttu-id="bc58e-140">Добавьте **задачи** в задание.</span><span class="sxs-lookup"><span data-stu-id="bc58e-140">Add **tasks** to the job.</span></span> <span data-ttu-id="bc58e-141">При добавлении задач в задание пакетная служба автоматически планирует их выполнение в вычислительных узлах пула.</span><span class="sxs-lookup"><span data-stu-id="bc58e-141">When you add tasks to a job, the Batch service automatically schedules the tasks for execution on the compute nodes in the pool.</span></span> <span data-ttu-id="bc58e-142">Каждая задача использует приложение, переданное для обработки входных файлов.</span><span class="sxs-lookup"><span data-stu-id="bc58e-142">Each task uses the application that you uploaded to process the input files.</span></span>
   
   * <span data-ttu-id="bc58e-143">4а.</span><span class="sxs-lookup"><span data-stu-id="bc58e-143">4a.</span></span> <span data-ttu-id="bc58e-144">Перед выполнением задачи данные (входные файлы), которые нужно обработать, могут быть скачаны в назначенный задаче вычислительный узел.</span><span class="sxs-lookup"><span data-stu-id="bc58e-144">Before a task executes, it can download the data (the input files) that it is to process to the compute node it is assigned to.</span></span> <span data-ttu-id="bc58e-145">Если приложение еще не установлено на узле (см. шаг 2), оно будет скачано на данном этапе.</span><span class="sxs-lookup"><span data-stu-id="bc58e-145">If the application has not already been installed on the node (see step #2), it can be downloaded here instead.</span></span> <span data-ttu-id="bc58e-146">По завершении скачивания задачи будут выполняться в соответствующих назначенных узлах.</span><span class="sxs-lookup"><span data-stu-id="bc58e-146">When the downloads are complete, the tasks execute on their assigned nodes.</span></span>
5. <span data-ttu-id="bc58e-147">При выполнении задач можно отправить запрос к пакетной службе, чтобы отслеживать ход выполнения задания и задач.</span><span class="sxs-lookup"><span data-stu-id="bc58e-147">As the tasks run, you can query Batch to monitor the progress of the job and its tasks.</span></span> <span data-ttu-id="bc58e-148">Ваше клиентское приложение или служба взаимодействует с пакетной службой через протокол HTTPS.</span><span class="sxs-lookup"><span data-stu-id="bc58e-148">Your client application or service communicates with the Batch service over HTTPS.</span></span> <span data-ttu-id="bc58e-149">Если вам нужно отслеживать тысячи задач, которые выполняются на тысячах вычислительных узлов, целесообразно [отправлять в пакетную службу эффективные запросы](batch-efficient-list-queries.md).</span><span class="sxs-lookup"><span data-stu-id="bc58e-149">Because you may be monitoring thousands of tasks running on thousands of compute nodes, be sure to [query the Batch service efficiently](batch-efficient-list-queries.md).</span></span>
6. <span data-ttu-id="bc58e-150">Выполненные задачи отправляют выходные данные в службу хранилища Azure.</span><span class="sxs-lookup"><span data-stu-id="bc58e-150">As the tasks complete, they can upload their result data to Azure Storage.</span></span> <span data-ttu-id="bc58e-151">Вы также можете извлечь файлы непосредственно из файловой системы в вычислительном узле.</span><span class="sxs-lookup"><span data-stu-id="bc58e-151">You can also retrieve files directly from the file system on a compute node.</span></span>
7. <span data-ttu-id="bc58e-152">Если при мониторинге обнаруживается, что задачи в задании выполнены, выходные данные могут быть скачаны для дальнейшей обработки или оценки через клиентское приложение или службу.</span><span class="sxs-lookup"><span data-stu-id="bc58e-152">When your monitoring detects that the tasks in your job have completed, your client application or service can download the output data for further processing or evaluation.</span></span>

<span data-ttu-id="bc58e-153">Это всего лишь один из способов использования пакетной службы, и в этом сценарии описывается только небольшая часть доступных функций.</span><span class="sxs-lookup"><span data-stu-id="bc58e-153">Keep in mind this is just one way to use Batch, and this scenario describes only a few of its available features.</span></span> <span data-ttu-id="bc58e-154">Например, можно выполнять [несколько задач параллельно](batch-parallel-node-tasks.md) на каждом вычислительном узле. Кроме того, можно использовать [задачи подготовки и завершения задания](batch-job-prep-release.md), чтобы подготовить узлы к запуску заданий, а затем выполнить очистку.</span><span class="sxs-lookup"><span data-stu-id="bc58e-154">For example, you can execute [multiple tasks in parallel](batch-parallel-node-tasks.md) on each compute node, and you can use [job preparation and completion tasks](batch-job-prep-release.md) to prepare the nodes for your jobs, then clean up afterward.</span></span>

## <a name="next-steps"></a><span data-ttu-id="bc58e-155">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="bc58e-155">Next steps</span></span>
<span data-ttu-id="bc58e-156">Теперь, когда вы ознакомились с пакетной службой, пора узнать, как ее можно использовать для обработки параллельных рабочих нагрузок с ресурсоемкими вычислениями.</span><span class="sxs-lookup"><span data-stu-id="bc58e-156">Now that you have a high-level overview of the Batch service, it's time to dig deeper to learn how you can use it to process your compute-intensive parallel workloads.</span></span>

* <span data-ttu-id="bc58e-157">Информация, необходимая для тех, кто готовится использовать пакетную службу, доступна в статье [Обзор функций пакетной службы для разработчиков](batch-api-basics.md).</span><span class="sxs-lookup"><span data-stu-id="bc58e-157">Read the [Batch feature overview for developers](batch-api-basics.md), essential information for anyone preparing to use Batch.</span></span> <span data-ttu-id="bc58e-158">Эта статья содержит дополнительные подробные сведения о таких ресурсах пакетной службы, как пулы, узлы, задания, задачи и многие функции API, которые можно использовать при создании приложения пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="bc58e-158">The article contains more detailed information about Batch service resources like pools, nodes, jobs, and tasks, and the many API features that you can use while building your Batch application.</span></span>
* <span data-ttu-id="bc58e-159">См. дополнительные сведения об [API-интерфейсах и средствах пакетной службы](batch-apis-tools.md) для сборки решений пакетной службы.</span><span class="sxs-lookup"><span data-stu-id="bc58e-159">Learn about the [Batch APIs and tools](batch-apis-tools.md) available for building Batch solutions.</span></span>
* <span data-ttu-id="bc58e-160">Сведения об использовании C# и библиотеки .NET для пакетной службы при обработке простой рабочей нагрузки с помощью стандартного рабочего процесса пакетной службы см. в статье [Начало работы с библиотекой пакетной службы Azure для .NET](batch-dotnet-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="bc58e-160">[Get started with the Azure Batch library for .NET](batch-dotnet-get-started.md) to learn how to use C# and the Batch .NET library to execute a simple workload using a common Batch workflow.</span></span> <span data-ttu-id="bc58e-161">Это один из основных ресурсов, с которым нужно ознакомиться, приступая к работе с пакетной службой.</span><span class="sxs-lookup"><span data-stu-id="bc58e-161">This article should be one of your first stops while learning how to use the Batch service.</span></span> <span data-ttu-id="bc58e-162">Есть также версия руководства для [Python](batch-python-tutorial.md).</span><span class="sxs-lookup"><span data-stu-id="bc58e-162">There is also a [Python version](batch-python-tutorial.md) of the tutorial.</span></span>
* <span data-ttu-id="bc58e-163">Скачайте [примеры кода с GitHub][github_samples], чтобы увидеть, как C# и Python взаимодействуют с пакетной службой для планирования и обработки примеров рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="bc58e-163">Download the [code samples on GitHub][github_samples] to see how both C# and Python can interface with Batch to schedule and process sample workloads.</span></span>
* <span data-ttu-id="bc58e-164">Список ресурсов для работы с пакетной службой см. на схеме обучения [Пакетная служба][learning_path].</span><span class="sxs-lookup"><span data-stu-id="bc58e-164">Check out the [Batch Learning Path][learning_path] to get an idea of the resources available to you as you learn to work with Batch.</span></span>


[github_samples]: https://github.com/Azure/azure-batch-samples
[learning_path]: https://azure.microsoft.com/documentation/learning-paths/batch/

[1]: ./media/batch-technical-overview/tech_overview_01.png
[2]: ./media/batch-technical-overview/tech_overview_02.png
