---
title: "aaaAzure распространенных метрик мониторинга автомасштабирования | Документы Microsoft"
description: "Узнайте, какие метрики обычно используются для автоматического масштабирования облачных служб, виртуальных машин и веб-приложений."
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 189b2a13-01c8-4aca-afd5-90711903ca59
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/6/2016
ms.author: ancav
ms.openlocfilehash: 372a40d72d7a6c22c5ff854b1460ec8a3b7ed1d1
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-monitor-autoscaling-common-metrics"></a>Общие метрики автомасштабирования Azure Monitor
Автоматическое масштабирование Azure монитора можно tooscale hello количество запущенных экземпляров вверх или вниз, на основе данных телеметрии (показатели). В этом документе описывается общих метрик, вам может быть toouse. Hello портала Azure для облачных служб и для ферм серверов вы можете hello метрика hello tooscale ресурсов по. Тем не менее можно также выбрать метрик из tooscale различных ресурсов по.

Azure автомасштабирования монитор также применяется только[наборы масштабирования виртуальных машин](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [облачные службы](https://azure.microsoft.com/services/cloud-services/), и [службы приложений — веб-приложений](https://azure.microsoft.com/services/app-service/web/). Прочие службы Azure используют другие методы масштабирования.

## <a name="compute-metrics-for-resource-manager-based-vms"></a>Расчет метрик для виртуальных машин, развернутых с помощью Resource Manager
По умолчанию виртуальные машины и масштабируемые наборы виртуальных машин, развернутые с помощью Resource Manager, генерируют базовые метрики (уровня узла). Кроме того при настройке сбора данных диагностики для виртуальной Машины Azure и VMSS hello Azure диагностического расширения также выдает счетчики производительности гостевой ОС (обычно называется «Метрики гостевой ОС»).  Используйте все эти метрики в правилах автомасштабирования.

Можно использовать hello `Get MetricDefinitions` PoSH/API/CLI tooview hello метрики недоступны для ресурса VMSS.

Если вы используете наборы масштабирования виртуальных машин и не находите определенной метрики в списке, скорее всего, она *отключена* в расширении системы диагностики.

Если определенным показателям частоты выборки или переносятся в hello нужные не выполняется, можно обновить конфигурацию диагностики hello.

Либо в предыдущем случае, если истинно, просмотрите [tooenable с помощью PowerShell диагностики Azure в виртуальной машине под управлением Windows](../virtual-machines/windows/ps-extensions-diagnostics.md) о PowerShell tooconfigure и обновление вашей tooenable расширения системы диагностики Azure VM hello метрику. В этой статье также содержится пример файла конфигурации системы диагностики.

### <a name="host-metrics-for-resource-manager-based-windows-and-linux-vms"></a>Метрики уровня узла для виртуальных машин под управлением Windows и Linux, развернутых с помощью Resource Manager
Привет, следуя метрик уровня узла создаются по умолчанию для виртуальной Машины Azure и VMSS в экземпляры Windows и Linux. Эти показатели описывают ВМ Azure, но собираются из узла виртуальной Машины Azure hello, а не через агент, установленный на гостевой Виртуальной машине hello. Эти метрики можно использовать в правилах автомасштабирования.

- [Метрики уровня узла для виртуальных машин под управлением Windows и Linux, развернутых с помощью Resource Manager](monitoring-supported-metrics.md#microsoftcomputevirtualmachines)
- [Метрики уровня узла для масштабируемых наборов виртуальных машин под управлением Windows и Linux, развернутых с помощью Resource Manager](monitoring-supported-metrics.md#microsoftcomputevirtualmachinescalesets)

### <a name="guest-os-metrics-resource-manager-based-windows-vms"></a>Метрики гостевой ОС для виртуальных машин под управлением Windows, развернутых с помощью Resource Manager
При создании виртуальной Машины в Azure, диагностика включается с помощью расширения диагностики hello. расширение системы диагностики Hello выдает набор показателей, взяты из внутри hello виртуальной Машины. Это означает, что вы можете отключить автомасштабирование метрик, которые не генерируются по умолчанию.

Можно создать список метрик hello, используя следующую команду в PowerShell hello.

```
Get-AzureRmMetricDefinition -ResourceId <resource_id> | Format-Table -Property Name,Unit
```

Можно создать предупреждение для hello следующие метрики:

| Имя метрики | Единица измерения |
| --- | --- |
| \Процессор (_общий объем ресурсов)\% загруженности процессора |Процент |
| \Процессор(_общий объем ресурсов)\% времени в привилегированном режиме |Процент |
| \Процессор(_общий объем ресурсов)\% времени в пользовательском режиме |Процент |
| \Процессор(_общий объем ресурсов)\частота процессора |Count |
| \Система\процессы |Count |
| \Процессор (_общий объем ресурсов)\число потоков |Count |
| \Процессор (_общий объем ресурсов)\число обработанных элементов |Count |
| \Память\% использования выделенной памяти (в байтах) |Процент |
| \Память\доступные байты |Байты |
| \Память\выделенная память (в байтах) |Байты |
| \Память\предел выделенной памяти |Байты |
| \Память\выгружаемый пул (в байтах) |Байты |
| \Память\невыгружаемый пул (в байтах) |Байты |
| \Физический диск(_общий объем ресурсов)\% времени работы диска |Процент |
| \Физический диск(_общий объем ресурсов)\% времени чтения с диска |Процент |
| \Физический диск(_общий объем ресурсов)\% времени записи на диск |Процент |
| \Диск\Физический диск(_общий объем ресурсов) в секунду |Число/с |
| \Физический диск(_общий объем ресурсов)\скорость чтения с диска/с |Число/с |
| \Физический диск(_общий объем ресурсов)\скорость записи на диск/с |Число/с |
| \Физический диск(_общий объем ресурсов)\скорость передачи данных (в байтах)/с |Байт/с |
| \Физический диск(_общий объем ресурсов)\скорость чтения с диска (в байтах)/с |Байт/с |
| \Физический диск(_общий объем ресурсов)\скорость записи на диск (в байтах)/с |Байт/с |
| \Физический диск(_общий объем ресурсов)\среднее значение Длина дисковой очереди |Count |
| \Физический диск(_общий объем ресурсов)\среднее значение Длина очереди чтения с диска |Count |
| \Физический диск(_общий объем ресурсов)\среднее значение Длина очереди записи на диск |Count |
| \Физический диск(_общий объем ресурсов)\% свободного места |Процент |
| \Логический диск(_общий объем ресурсов)\свободная память (в мегабайтах) |Count |

### <a name="guest-os-metrics-linux-vms"></a>Метрики гостевой ОС для виртуальных машин под управлением Linux
При создании виртуальной машины в Azure система диагностики включается по умолчанию с помощью расширения диагностики.

Можно создать список метрик hello, используя следующую команду в PowerShell hello.

```
Get-AzureRmMetricDefinition -ResourceId <resource_id> | Format-Table -Property Name,Unit
```

 Можно создать предупреждение для hello следующие метрики:

| Имя метрики | Единица измерения |
| --- | --- |
| \Память\Доступная память |Байты |
| \Память\Процент доступной памяти |Процент |
| \Память\Используемая память |Байты |
| \Память\Процент используемой памяти |Процент |
| \Память\Процент памяти, используемой кэшем |Процент |
| \Память\Страниц в с |Число/с |
| \Память\Прочитано страниц в с |Число/с |
| \Память\Записано страниц в с |Число/с |
| \Память\Доступное пространство файла подкачки |Байты |
| \Память\Процент доступного пространства файла подкачки |Процент |
| \Память\Используемое пространство файла подкачки |Байты |
| \Память\Процент использованного пространства файла подкачки |Процент |
| \Процессор\Процент времени простоя |Процент |
| \Процессор\Процент работы в пользовательском режиме |Процент |
| \Процессор\Процент времени оптимальной работы |Процент |
| \Процессор\Процент работы в привилегированном режиме |Процент |
| \Процессор\Процент времени прерываний |Процент |
| \Процессор\Процент времени DPC |Процент |
| \Процессор\Процент загруженности процессора |Процент |
| \Процессор\Процент времени ожидания ввода/вывода |Процент |
| \Физический диск\Байт/с |Байт/с |
| \Физический диск\Прочитано байт/с |Байт/с |
| \Физический диск\Записано байт/с |Байт/с |
| \Физический диск\Передач/с |Число/с |
| \Физический диск\Операций чтения/с |Число/с |
| \Физический диск\Операций записи/с |Число/с |
| \Физический диск\Среднее время чтения |Секунды |
| \Физический диск\Среднее время записи |Секунды |
| \Физический диск\Среднее время передачи |Секунды |
| \Физический диск\Средняя длина очереди диска |Count |
| \Сетевой интерфейс\Передано байт |Байты |
| \Сетевой интерфейс\Получено байт |Байты |
| \Сетевой интерфейс\Передано пакетов |Count |
| \Сетевой интерфейс\ Получено пакетов |Count |
| \Сетевой интерфейс\Всего байт |Байты |
| \Сетевой интерфейс\Всего ошибок RX |Count |
| \Сетевой интерфейс\Всего ошибок TX |Count |
| \Сетевой интерфейс\Всего конфликтов |Count |

## <a name="commonly-used-web-server-farm-metrics"></a>Часто используемые метрики веб-приложений (фермы серверов)
Можно также выполнить Автомасштабирование на основе общих web server например hello длины очереди Http. Имя метрики — **HttpQueueLength**.  Следующий раздел списки доступных фермы (веб-приложений) метрики сервера Hello.

### <a name="web-apps-metrics"></a>Метрики веб-приложений
Список метрик hello веб-приложений можно создавать с помощью hello следующую команду в PowerShell.

```
Get-AzureRmMetricDefinition -ResourceId <resource_id> | Format-Table -Property Name,Unit
```

Можно создавать оповещения и выполнять масштабирование на основе метрик в таблице ниже.

| Имя метрики | Единица измерения |
| --- | --- |
| Процент загруженности ЦП |Процент |
| Процент использования памяти |Процент |
| Длина очереди диска |Count |
| Длина очереди HTTP |Count |
| Получено байт |Байты |
| Передано байт |Байты |

## <a name="commonly-used-storage-metrics"></a>Часто используемые метрики хранилища
Можно масштабировать по длине очереди хранилища, это число сообщений в очереди хранилища hello в hello. Длина очереди хранилища представляет собой специальный показатель и hello пороговое значение — hello количества сообщений на экземпляр. Например если два экземпляра и порог hello установлен too100, масштабирование происходит, когда hello общее число сообщений в очереди hello — 200. Который может быть 100 сообщений на экземпляр, 120 и 80 или любые другие комбинации, которые суммирует too200 или более.

Настройте этот параметр в hello портал Azure в hello **параметры** колонку. Для набора масштабирования виртуальных Машин, можно обновить параметр автомасштабирования hello в toouse шаблона диспетчера ресурсов hello *metricName* как *ApproximateMessageCount* и передать идентификатор hello hello хранилища очереди в качестве  *metricResourceUri*.

Например с hello классический учетной записи хранилища metricTrigger параметр автомасштабирования включают следующее.

```
"metricName": "ApproximateMessageCount",
 "metricNamespace": "",
 "metricResourceUri": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RES_GROUP_NAME/providers/Microsoft.ClassicStorage/storageAccounts/STORAGE_ACCOUNT_NAME/services/queue/queues/QUEUE_NAME"
 ```

Для учетной записи хранения (не классические) hello metricTrigger включают следующее.

```
"metricName": "ApproximateMessageCount",
"metricNamespace": "",
"metricResourceUri": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RES_GROUP_NAME/providers/Microsoft.Storage/storageAccounts/STORAGE_ACCOUNT_NAME/services/queue/queues/QUEUE_NAME"
```

## <a name="commonly-used-service-bus-metrics"></a>Часто используемые метрики служебной шины
Можно масштабировать по длине очереди Service Bus, это число сообщений в очереди Service Bus hello в hello. Длина очереди Service Bus представляет собой специальный показатель и hello пороговое значение — hello количества сообщений на экземпляр. Например если два экземпляра и порог hello установлен too100, масштабирование происходит, когда hello общее число сообщений в очереди hello — 200. Который может быть 100 сообщений на экземпляр, 120 и 80 или любые другие комбинации, которые суммирует too200 или более.

Для набора масштабирования виртуальных Машин, можно обновить параметр автомасштабирования hello в toouse шаблона диспетчера ресурсов hello *metricName* как *ApproximateMessageCount* и передать идентификатор hello hello хранилища очереди в качестве  *metricResourceUri*.

```
"metricName": "MessageCount",
 "metricNamespace": "",
"metricResourceUri": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RES_GROUP_NAME/providers/Microsoft.ServiceBus/namespaces/SB_NAMESPACE/queues/QUEUE_NAME"
```

> [!NOTE]
> Для Service Bus понятие группы ресурсов hello не существует, но диспетчера ресурсов Azure создает ресурсную группу по умолчанию в одном регионе. Группа ресурсов Hello, обычно имеет формат «По умолчанию - ServiceBus-[region]» hello. Например, Default-ServiceBus-EastUS, Default-ServiceBus-WestUS, Default-ServiceBus-AustraliaEast и т. д.
>
>
