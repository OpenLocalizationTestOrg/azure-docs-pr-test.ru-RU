---
title: "Общие метрики автомасштабирования Azure Monitor | Документация Майкрософт"
description: "Узнайте, какие метрики обычно используются для автоматического масштабирования облачных служб, виртуальных машин и веб-приложений."
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 189b2a13-01c8-4aca-afd5-90711903ca59
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/6/2016
ms.author: ancav
ms.openlocfilehash: 240a230d09680672ccd5316470a87d047fab9fd1
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-monitor-autoscaling-common-metrics"></a><span data-ttu-id="59661-103">Общие метрики автомасштабирования Azure Monitor</span><span class="sxs-lookup"><span data-stu-id="59661-103">Azure Monitor autoscaling common metrics</span></span>
<span data-ttu-id="59661-104">Автомасштабирование Azure Monitor позволяет увеличивать или уменьшать количество запущенных экземпляров на основе данных телеметрии (метрик).</span><span class="sxs-lookup"><span data-stu-id="59661-104">Azure Monitor autoscaling allows you to scale the number of running instances up or down, based on telemetry data (metrics).</span></span> <span data-ttu-id="59661-105">В этой статье рассматриваются общие метрики, которые вы можете использовать.</span><span class="sxs-lookup"><span data-stu-id="59661-105">This document describes common metrics that you might want to use.</span></span> <span data-ttu-id="59661-106">На портале Azure для облачных служб и ферм серверов можно выбрать метрики ресурсов, по которым будет выполняться масштабирование.</span><span class="sxs-lookup"><span data-stu-id="59661-106">In the Azure portal  for Cloud Services and Server Farms, you can choose the metric of the resource to scale by.</span></span> <span data-ttu-id="59661-107">Однако вы также можете выбрать любую метрику из другого ресурса.</span><span class="sxs-lookup"><span data-stu-id="59661-107">However, you can also choose any metric from a different resource to scale by.</span></span>

<span data-ttu-id="59661-108">Автомасштабирование Azure Monitor используется только с [масштабируемыми наборами виртуальных машин](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [облачными службами](https://azure.microsoft.com/services/cloud-services/) и [веб-приложениями службы приложений](https://azure.microsoft.com/services/app-service/web/).</span><span class="sxs-lookup"><span data-stu-id="59661-108">Azure Monitor autoscale applies only to [Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="59661-109">Прочие службы Azure используют другие методы масштабирования.</span><span class="sxs-lookup"><span data-stu-id="59661-109">Other Azure services use different scaling methods.</span></span>

## <a name="compute-metrics-for-resource-manager-based-vms"></a><span data-ttu-id="59661-110">Расчет метрик для виртуальных машин, развернутых с помощью Resource Manager</span><span class="sxs-lookup"><span data-stu-id="59661-110">Compute metrics for Resource Manager-based VMs</span></span>
<span data-ttu-id="59661-111">По умолчанию виртуальные машины и масштабируемые наборы виртуальных машин, развернутые с помощью Resource Manager, генерируют базовые метрики (уровня узла).</span><span class="sxs-lookup"><span data-stu-id="59661-111">By default, Resource Manager-based Virtual Machines and Virtual Machine Scale Sets emit basic (host-level) metrics.</span></span> <span data-ttu-id="59661-112">Кроме того, при настройке сбора данных диагностики для виртуальной машины и масштабируемого набора виртуальных машин Azure расширение диагностики Azure также генерирует счетчики производительности гостевой ОС (известные как "метрики гостевой ОС").</span><span class="sxs-lookup"><span data-stu-id="59661-112">In addition, when you configure diagnostics data collection for an Azure VM and VMSS,  the Azure diagnostic extension also emits guest-OS performance counters (commonly known as "guest-OS metrics").</span></span>  <span data-ttu-id="59661-113">Используйте все эти метрики в правилах автомасштабирования.</span><span class="sxs-lookup"><span data-stu-id="59661-113">You use all these metrics in autoscale rules.</span></span>

<span data-ttu-id="59661-114">Чтобы просмотреть метрики, доступные для ресурса VMSS, в API, PoSH и интерфейсе командной строки можно выполнить команду `Get MetricDefinitions`.</span><span class="sxs-lookup"><span data-stu-id="59661-114">You can use the `Get MetricDefinitions` API/PoSH/CLI to view the metrics available for your VMSS resource.</span></span>

<span data-ttu-id="59661-115">Если вы используете наборы масштабирования виртуальных машин и не находите определенной метрики в списке, скорее всего, она *отключена* в расширении системы диагностики.</span><span class="sxs-lookup"><span data-stu-id="59661-115">If you're using VM scale sets and you don't see a particular metric listed, then it is likely *disabled* in your diagnostics extension.</span></span>

<span data-ttu-id="59661-116">Если выборка или передача определенной метрики осуществляется с частотой, которая не соответствует вашим требованиям, можно обновить конфигурацию системы диагностики.</span><span class="sxs-lookup"><span data-stu-id="59661-116">If a particular metric is not being sampled or transferred at the frequency you want, you can update the diagnostics configuration.</span></span>

<span data-ttu-id="59661-117">Если это так, то см. сведения о настройке и обновлении расширения системы диагностики виртуальной машины Azure для включения метрики с использованием PowerShell в статье [Включение системы диагностики Azure на виртуальной машине под управлением Windows с помощью PowerShell](../virtual-machines/windows/ps-extensions-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="59661-117">If either preceding case is true, then review [Use PowerShell to enable Azure Diagnostics in a virtual machine running Windows](../virtual-machines/windows/ps-extensions-diagnostics.md) about PowerShell to configure and update your Azure VM Diagnostics extension to enable the metric.</span></span> <span data-ttu-id="59661-118">В этой статье также содержится пример файла конфигурации системы диагностики.</span><span class="sxs-lookup"><span data-stu-id="59661-118">That article also includes a sample diagnostics configuration file.</span></span>

### <a name="host-metrics-for-resource-manager-based-windows-and-linux-vms"></a><span data-ttu-id="59661-119">Метрики уровня узла для виртуальных машин под управлением Windows и Linux, развернутых с помощью Resource Manager</span><span class="sxs-lookup"><span data-stu-id="59661-119">Host metrics for Resource Manager-based Windows and Linux VMs</span></span>
<span data-ttu-id="59661-120">Следующие метрики уровня узла генерируются по умолчанию для виртуальной машины и масштабируемого набора виртуальных машин Azure в экземплярах Windows и Linux.</span><span class="sxs-lookup"><span data-stu-id="59661-120">The following host-level metrics are emitted by default for Azure VM and VMSS in both Windows and Linux instances.</span></span> <span data-ttu-id="59661-121">Эти метрики описывают виртуальную машину Azure, но собираются из узла виртуальной машины Azure, а не через агент, установленный на гостевой виртуальной машине.</span><span class="sxs-lookup"><span data-stu-id="59661-121">These metrics describe your Azure VM, but are collected from the Azure VM host rather than via agent installed on the guest VM.</span></span> <span data-ttu-id="59661-122">Эти метрики можно использовать в правилах автомасштабирования.</span><span class="sxs-lookup"><span data-stu-id="59661-122">You may use these metrics in autoscaling rules.</span></span>

- [<span data-ttu-id="59661-123">Метрики уровня узла для виртуальных машин под управлением Windows и Linux, развернутых с помощью Resource Manager</span><span class="sxs-lookup"><span data-stu-id="59661-123">Host metrics for Resource Manager-based Windows and Linux VMs</span></span>](monitoring-supported-metrics.md#microsoftcomputevirtualmachines)
- [<span data-ttu-id="59661-124">Метрики уровня узла для масштабируемых наборов виртуальных машин под управлением Windows и Linux, развернутых с помощью Resource Manager</span><span class="sxs-lookup"><span data-stu-id="59661-124">Host metrics for Resource Manager-based Windows and Linux VM Scale Sets</span></span>](monitoring-supported-metrics.md#microsoftcomputevirtualmachinescalesets)

### <a name="guest-os-metrics-resource-manager-based-windows-vms"></a><span data-ttu-id="59661-125">Метрики гостевой ОС для виртуальных машин под управлением Windows, развернутых с помощью Resource Manager</span><span class="sxs-lookup"><span data-stu-id="59661-125">Guest OS metrics Resource Manager-based Windows VMs</span></span>
<span data-ttu-id="59661-126">При создании виртуальной машины в Azure система диагностики включается с помощью расширения диагностики.</span><span class="sxs-lookup"><span data-stu-id="59661-126">When you create a VM in Azure, diagnostics is enabled by using the Diagnostics extension.</span></span> <span data-ttu-id="59661-127">Расширение диагностики генерирует набор метрик, полученных из виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="59661-127">The diagnostics extension emits a set of metrics taken from inside of the VM.</span></span> <span data-ttu-id="59661-128">Это означает, что вы можете отключить автомасштабирование метрик, которые не генерируются по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="59661-128">This means you can autoscale off of metrics that are not emitted by default.</span></span>

<span data-ttu-id="59661-129">Вы можете создать список метрик с помощью следующей команды PowerShell:</span><span class="sxs-lookup"><span data-stu-id="59661-129">You can generate a list of the metrics by using the following command in PowerShell.</span></span>

```
Get-AzureRmMetricDefinition -ResourceId <resource_id> | Format-Table -Property Name,Unit
```

<span data-ttu-id="59661-130">Вы можете создать оповещение для метрик, приведенных в следующей таблице:</span><span class="sxs-lookup"><span data-stu-id="59661-130">You can create an alert for the following metrics:</span></span>

| <span data-ttu-id="59661-131">Имя метрики</span><span class="sxs-lookup"><span data-stu-id="59661-131">Metric Name</span></span> | <span data-ttu-id="59661-132">Единица измерения</span><span class="sxs-lookup"><span data-stu-id="59661-132">Unit</span></span> |
| --- | --- |
| <span data-ttu-id="59661-133">\Процессор (_общий объем ресурсов)\% загруженности процессора</span><span class="sxs-lookup"><span data-stu-id="59661-133">\Processor(_Total)\% Processor Time</span></span> |<span data-ttu-id="59661-134">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-134">Percent</span></span> |
| <span data-ttu-id="59661-135">\Процессор(_общий объем ресурсов)\% времени в привилегированном режиме</span><span class="sxs-lookup"><span data-stu-id="59661-135">\Processor(_Total)\% Privileged Time</span></span> |<span data-ttu-id="59661-136">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-136">Percent</span></span> |
| <span data-ttu-id="59661-137">\Процессор(_общий объем ресурсов)\% времени в пользовательском режиме</span><span class="sxs-lookup"><span data-stu-id="59661-137">\Processor(_Total)\% User Time</span></span> |<span data-ttu-id="59661-138">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-138">Percent</span></span> |
| <span data-ttu-id="59661-139">\Процессор(_общий объем ресурсов)\частота процессора</span><span class="sxs-lookup"><span data-stu-id="59661-139">\Processor Information(_Total)\Processor Frequency</span></span> |<span data-ttu-id="59661-140">Count</span><span class="sxs-lookup"><span data-stu-id="59661-140">Count</span></span> |
| <span data-ttu-id="59661-141">\Система\процессы</span><span class="sxs-lookup"><span data-stu-id="59661-141">\System\Processes</span></span> |<span data-ttu-id="59661-142">Count</span><span class="sxs-lookup"><span data-stu-id="59661-142">Count</span></span> |
| <span data-ttu-id="59661-143">\Процессор (_общий объем ресурсов)\число потоков</span><span class="sxs-lookup"><span data-stu-id="59661-143">\Process(_Total)\Thread Count</span></span> |<span data-ttu-id="59661-144">Count</span><span class="sxs-lookup"><span data-stu-id="59661-144">Count</span></span> |
| <span data-ttu-id="59661-145">\Процессор (_общий объем ресурсов)\число обработанных элементов</span><span class="sxs-lookup"><span data-stu-id="59661-145">\Process(_Total)\Handle Count</span></span> |<span data-ttu-id="59661-146">Count</span><span class="sxs-lookup"><span data-stu-id="59661-146">Count</span></span> |
| <span data-ttu-id="59661-147">\Память\% использования выделенной памяти (в байтах)</span><span class="sxs-lookup"><span data-stu-id="59661-147">\Memory\% Committed Bytes In Use</span></span> |<span data-ttu-id="59661-148">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-148">Percent</span></span> |
| <span data-ttu-id="59661-149">\Память\доступные байты</span><span class="sxs-lookup"><span data-stu-id="59661-149">\Memory\Available Bytes</span></span> |<span data-ttu-id="59661-150">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-150">Bytes</span></span> |
| <span data-ttu-id="59661-151">\Память\выделенная память (в байтах)</span><span class="sxs-lookup"><span data-stu-id="59661-151">\Memory\Committed Bytes</span></span> |<span data-ttu-id="59661-152">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-152">Bytes</span></span> |
| <span data-ttu-id="59661-153">\Память\предел выделенной памяти</span><span class="sxs-lookup"><span data-stu-id="59661-153">\Memory\Commit Limit</span></span> |<span data-ttu-id="59661-154">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-154">Bytes</span></span> |
| <span data-ttu-id="59661-155">\Память\выгружаемый пул (в байтах)</span><span class="sxs-lookup"><span data-stu-id="59661-155">\Memory\Pool Paged Bytes</span></span> |<span data-ttu-id="59661-156">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-156">Bytes</span></span> |
| <span data-ttu-id="59661-157">\Память\невыгружаемый пул (в байтах)</span><span class="sxs-lookup"><span data-stu-id="59661-157">\Memory\Pool Nonpaged Bytes</span></span> |<span data-ttu-id="59661-158">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-158">Bytes</span></span> |
| <span data-ttu-id="59661-159">\Физический диск(_общий объем ресурсов)\% времени работы диска</span><span class="sxs-lookup"><span data-stu-id="59661-159">\PhysicalDisk(_Total)\% Disk Time</span></span> |<span data-ttu-id="59661-160">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-160">Percent</span></span> |
| <span data-ttu-id="59661-161">\Физический диск(_общий объем ресурсов)\% времени чтения с диска</span><span class="sxs-lookup"><span data-stu-id="59661-161">\PhysicalDisk(_Total)\% Disk Read Time</span></span> |<span data-ttu-id="59661-162">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-162">Percent</span></span> |
| <span data-ttu-id="59661-163">\Физический диск(_общий объем ресурсов)\% времени записи на диск</span><span class="sxs-lookup"><span data-stu-id="59661-163">\PhysicalDisk(_Total)\% Disk Write Time</span></span> |<span data-ttu-id="59661-164">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-164">Percent</span></span> |
| <span data-ttu-id="59661-165">\Диск\Физический диск(_общий объем ресурсов) в секунду</span><span class="sxs-lookup"><span data-stu-id="59661-165">\PhysicalDisk(_Total)\Disk Transfers/sec</span></span> |<span data-ttu-id="59661-166">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-166">CountPerSecond</span></span> |
| <span data-ttu-id="59661-167">\Физический диск(_общий объем ресурсов)\скорость чтения с диска/с</span><span class="sxs-lookup"><span data-stu-id="59661-167">\PhysicalDisk(_Total)\Disk Reads/sec</span></span> |<span data-ttu-id="59661-168">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-168">CountPerSecond</span></span> |
| <span data-ttu-id="59661-169">\Физический диск(_общий объем ресурсов)\скорость записи на диск/с</span><span class="sxs-lookup"><span data-stu-id="59661-169">\PhysicalDisk(_Total)\Disk Writes/sec</span></span> |<span data-ttu-id="59661-170">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-170">CountPerSecond</span></span> |
| <span data-ttu-id="59661-171">\Физический диск(_общий объем ресурсов)\скорость передачи данных (в байтах)/с</span><span class="sxs-lookup"><span data-stu-id="59661-171">\PhysicalDisk(_Total)\Disk Bytes/sec</span></span> |<span data-ttu-id="59661-172">Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-172">BytesPerSecond</span></span> |
| <span data-ttu-id="59661-173">\Физический диск(_общий объем ресурсов)\скорость чтения с диска (в байтах)/с</span><span class="sxs-lookup"><span data-stu-id="59661-173">\PhysicalDisk(_Total)\Disk Read Bytes/sec</span></span> |<span data-ttu-id="59661-174">Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-174">BytesPerSecond</span></span> |
| <span data-ttu-id="59661-175">\Физический диск(_общий объем ресурсов)\скорость записи на диск (в байтах)/с</span><span class="sxs-lookup"><span data-stu-id="59661-175">\PhysicalDisk(_Total)\Disk Write Bytes/sec</span></span> |<span data-ttu-id="59661-176">Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-176">BytesPerSecond</span></span> |
| <span data-ttu-id="59661-177">\Физический диск(_общий объем ресурсов)\среднее значение</span><span class="sxs-lookup"><span data-stu-id="59661-177">\PhysicalDisk(_Total)\Avg.</span></span> <span data-ttu-id="59661-178">Длина дисковой очереди</span><span class="sxs-lookup"><span data-stu-id="59661-178">Disk Queue Length</span></span> |<span data-ttu-id="59661-179">Count</span><span class="sxs-lookup"><span data-stu-id="59661-179">Count</span></span> |
| <span data-ttu-id="59661-180">\Физический диск(_общий объем ресурсов)\среднее значение</span><span class="sxs-lookup"><span data-stu-id="59661-180">\PhysicalDisk(_Total)\Avg.</span></span> <span data-ttu-id="59661-181">Длина очереди чтения с диска</span><span class="sxs-lookup"><span data-stu-id="59661-181">Disk Read Queue Length</span></span> |<span data-ttu-id="59661-182">Count</span><span class="sxs-lookup"><span data-stu-id="59661-182">Count</span></span> |
| <span data-ttu-id="59661-183">\Физический диск(_общий объем ресурсов)\среднее значение</span><span class="sxs-lookup"><span data-stu-id="59661-183">\PhysicalDisk(_Total)\Avg.</span></span> <span data-ttu-id="59661-184">Длина очереди записи на диск</span><span class="sxs-lookup"><span data-stu-id="59661-184">Disk Write Queue Length</span></span> |<span data-ttu-id="59661-185">Count</span><span class="sxs-lookup"><span data-stu-id="59661-185">Count</span></span> |
| <span data-ttu-id="59661-186">\Физический диск(_общий объем ресурсов)\% свободного места</span><span class="sxs-lookup"><span data-stu-id="59661-186">\LogicalDisk(_Total)\% Free Space</span></span> |<span data-ttu-id="59661-187">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-187">Percent</span></span> |
| <span data-ttu-id="59661-188">\Логический диск(_общий объем ресурсов)\свободная память (в мегабайтах)</span><span class="sxs-lookup"><span data-stu-id="59661-188">\LogicalDisk(_Total)\Free Megabytes</span></span> |<span data-ttu-id="59661-189">Count</span><span class="sxs-lookup"><span data-stu-id="59661-189">Count</span></span> |

### <a name="guest-os-metrics-linux-vms"></a><span data-ttu-id="59661-190">Метрики гостевой ОС для виртуальных машин под управлением Linux</span><span class="sxs-lookup"><span data-stu-id="59661-190">Guest OS metrics Linux VMs</span></span>
<span data-ttu-id="59661-191">При создании виртуальной машины в Azure система диагностики включается по умолчанию с помощью расширения диагностики.</span><span class="sxs-lookup"><span data-stu-id="59661-191">When you create a VM in Azure, diagnostics is enabled by default by using Diagnostics extension.</span></span>

<span data-ttu-id="59661-192">Вы можете создать список метрик с помощью следующей команды PowerShell:</span><span class="sxs-lookup"><span data-stu-id="59661-192">You can generate a list of the metrics by using the following command in PowerShell.</span></span>

```
Get-AzureRmMetricDefinition -ResourceId <resource_id> | Format-Table -Property Name,Unit
```

 <span data-ttu-id="59661-193">Вы можете создать оповещение для метрик, приведенных в следующей таблице:</span><span class="sxs-lookup"><span data-stu-id="59661-193">You can create an alert for the following metrics:</span></span>

| <span data-ttu-id="59661-194">Имя метрики</span><span class="sxs-lookup"><span data-stu-id="59661-194">Metric Name</span></span> | <span data-ttu-id="59661-195">Единица измерения</span><span class="sxs-lookup"><span data-stu-id="59661-195">Unit</span></span> |
| --- | --- |
| <span data-ttu-id="59661-196">\Память\Доступная память</span><span class="sxs-lookup"><span data-stu-id="59661-196">\Memory\AvailableMemory</span></span> |<span data-ttu-id="59661-197">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-197">Bytes</span></span> |
| <span data-ttu-id="59661-198">\Память\Процент доступной памяти</span><span class="sxs-lookup"><span data-stu-id="59661-198">\Memory\PercentAvailableMemory</span></span> |<span data-ttu-id="59661-199">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-199">Percent</span></span> |
| <span data-ttu-id="59661-200">\Память\Используемая память</span><span class="sxs-lookup"><span data-stu-id="59661-200">\Memory\UsedMemory</span></span> |<span data-ttu-id="59661-201">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-201">Bytes</span></span> |
| <span data-ttu-id="59661-202">\Память\Процент используемой памяти</span><span class="sxs-lookup"><span data-stu-id="59661-202">\Memory\PercentUsedMemory</span></span> |<span data-ttu-id="59661-203">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-203">Percent</span></span> |
| <span data-ttu-id="59661-204">\Память\Процент памяти, используемой кэшем</span><span class="sxs-lookup"><span data-stu-id="59661-204">\Memory\PercentUsedByCache</span></span> |<span data-ttu-id="59661-205">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-205">Percent</span></span> |
| <span data-ttu-id="59661-206">\Память\Страниц в с</span><span class="sxs-lookup"><span data-stu-id="59661-206">\Memory\PagesPerSec</span></span> |<span data-ttu-id="59661-207">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-207">CountPerSecond</span></span> |
| <span data-ttu-id="59661-208">\Память\Прочитано страниц в с</span><span class="sxs-lookup"><span data-stu-id="59661-208">\Memory\PagesReadPerSec</span></span> |<span data-ttu-id="59661-209">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-209">CountPerSecond</span></span> |
| <span data-ttu-id="59661-210">\Память\Записано страниц в с</span><span class="sxs-lookup"><span data-stu-id="59661-210">\Memory\PagesWrittenPerSec</span></span> |<span data-ttu-id="59661-211">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-211">CountPerSecond</span></span> |
| <span data-ttu-id="59661-212">\Память\Доступное пространство файла подкачки</span><span class="sxs-lookup"><span data-stu-id="59661-212">\Memory\AvailableSwap</span></span> |<span data-ttu-id="59661-213">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-213">Bytes</span></span> |
| <span data-ttu-id="59661-214">\Память\Процент доступного пространства файла подкачки</span><span class="sxs-lookup"><span data-stu-id="59661-214">\Memory\PercentAvailableSwap</span></span> |<span data-ttu-id="59661-215">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-215">Percent</span></span> |
| <span data-ttu-id="59661-216">\Память\Используемое пространство файла подкачки</span><span class="sxs-lookup"><span data-stu-id="59661-216">\Memory\UsedSwap</span></span> |<span data-ttu-id="59661-217">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-217">Bytes</span></span> |
| <span data-ttu-id="59661-218">\Память\Процент использованного пространства файла подкачки</span><span class="sxs-lookup"><span data-stu-id="59661-218">\Memory\PercentUsedSwap</span></span> |<span data-ttu-id="59661-219">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-219">Percent</span></span> |
| <span data-ttu-id="59661-220">\Процессор\Процент времени простоя</span><span class="sxs-lookup"><span data-stu-id="59661-220">\Processor\PercentIdleTime</span></span> |<span data-ttu-id="59661-221">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-221">Percent</span></span> |
| <span data-ttu-id="59661-222">\Процессор\Процент работы в пользовательском режиме</span><span class="sxs-lookup"><span data-stu-id="59661-222">\Processor\PercentUserTime</span></span> |<span data-ttu-id="59661-223">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-223">Percent</span></span> |
| <span data-ttu-id="59661-224">\Процессор\Процент времени оптимальной работы</span><span class="sxs-lookup"><span data-stu-id="59661-224">\Processor\PercentNiceTime</span></span> |<span data-ttu-id="59661-225">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-225">Percent</span></span> |
| <span data-ttu-id="59661-226">\Процессор\Процент работы в привилегированном режиме</span><span class="sxs-lookup"><span data-stu-id="59661-226">\Processor\PercentPrivilegedTime</span></span> |<span data-ttu-id="59661-227">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-227">Percent</span></span> |
| <span data-ttu-id="59661-228">\Процессор\Процент времени прерываний</span><span class="sxs-lookup"><span data-stu-id="59661-228">\Processor\PercentInterruptTime</span></span> |<span data-ttu-id="59661-229">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-229">Percent</span></span> |
| <span data-ttu-id="59661-230">\Процессор\Процент времени DPC</span><span class="sxs-lookup"><span data-stu-id="59661-230">\Processor\PercentDPCTime</span></span> |<span data-ttu-id="59661-231">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-231">Percent</span></span> |
| <span data-ttu-id="59661-232">\Процессор\Процент загруженности процессора</span><span class="sxs-lookup"><span data-stu-id="59661-232">\Processor\PercentProcessorTime</span></span> |<span data-ttu-id="59661-233">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-233">Percent</span></span> |
| <span data-ttu-id="59661-234">\Процессор\Процент времени ожидания ввода/вывода</span><span class="sxs-lookup"><span data-stu-id="59661-234">\Processor\PercentIOWaitTime</span></span> |<span data-ttu-id="59661-235">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-235">Percent</span></span> |
| <span data-ttu-id="59661-236">\Физический диск\Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-236">\PhysicalDisk\BytesPerSecond</span></span> |<span data-ttu-id="59661-237">Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-237">BytesPerSecond</span></span> |
| <span data-ttu-id="59661-238">\Физический диск\Прочитано байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-238">\PhysicalDisk\ReadBytesPerSecond</span></span> |<span data-ttu-id="59661-239">Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-239">BytesPerSecond</span></span> |
| <span data-ttu-id="59661-240">\Физический диск\Записано байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-240">\PhysicalDisk\WriteBytesPerSecond</span></span> |<span data-ttu-id="59661-241">Байт/с</span><span class="sxs-lookup"><span data-stu-id="59661-241">BytesPerSecond</span></span> |
| <span data-ttu-id="59661-242">\Физический диск\Передач/с</span><span class="sxs-lookup"><span data-stu-id="59661-242">\PhysicalDisk\TransfersPerSecond</span></span> |<span data-ttu-id="59661-243">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-243">CountPerSecond</span></span> |
| <span data-ttu-id="59661-244">\Физический диск\Операций чтения/с</span><span class="sxs-lookup"><span data-stu-id="59661-244">\PhysicalDisk\ReadsPerSecond</span></span> |<span data-ttu-id="59661-245">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-245">CountPerSecond</span></span> |
| <span data-ttu-id="59661-246">\Физический диск\Операций записи/с</span><span class="sxs-lookup"><span data-stu-id="59661-246">\PhysicalDisk\WritesPerSecond</span></span> |<span data-ttu-id="59661-247">Число/с</span><span class="sxs-lookup"><span data-stu-id="59661-247">CountPerSecond</span></span> |
| <span data-ttu-id="59661-248">\Физический диск\Среднее время чтения</span><span class="sxs-lookup"><span data-stu-id="59661-248">\PhysicalDisk\AverageReadTime</span></span> |<span data-ttu-id="59661-249">Секунды</span><span class="sxs-lookup"><span data-stu-id="59661-249">Seconds</span></span> |
| <span data-ttu-id="59661-250">\Физический диск\Среднее время записи</span><span class="sxs-lookup"><span data-stu-id="59661-250">\PhysicalDisk\AverageWriteTime</span></span> |<span data-ttu-id="59661-251">Секунды</span><span class="sxs-lookup"><span data-stu-id="59661-251">Seconds</span></span> |
| <span data-ttu-id="59661-252">\Физический диск\Среднее время передачи</span><span class="sxs-lookup"><span data-stu-id="59661-252">\PhysicalDisk\AverageTransferTime</span></span> |<span data-ttu-id="59661-253">Секунды</span><span class="sxs-lookup"><span data-stu-id="59661-253">Seconds</span></span> |
| <span data-ttu-id="59661-254">\Физический диск\Средняя длина очереди диска</span><span class="sxs-lookup"><span data-stu-id="59661-254">\PhysicalDisk\AverageDiskQueueLength</span></span> |<span data-ttu-id="59661-255">Count</span><span class="sxs-lookup"><span data-stu-id="59661-255">Count</span></span> |
| <span data-ttu-id="59661-256">\Сетевой интерфейс\Передано байт</span><span class="sxs-lookup"><span data-stu-id="59661-256">\NetworkInterface\BytesTransmitted</span></span> |<span data-ttu-id="59661-257">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-257">Bytes</span></span> |
| <span data-ttu-id="59661-258">\Сетевой интерфейс\Получено байт</span><span class="sxs-lookup"><span data-stu-id="59661-258">\NetworkInterface\BytesReceived</span></span> |<span data-ttu-id="59661-259">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-259">Bytes</span></span> |
| <span data-ttu-id="59661-260">\Сетевой интерфейс\Передано пакетов</span><span class="sxs-lookup"><span data-stu-id="59661-260">\NetworkInterface\PacketsTransmitted</span></span> |<span data-ttu-id="59661-261">Count</span><span class="sxs-lookup"><span data-stu-id="59661-261">Count</span></span> |
| <span data-ttu-id="59661-262">\Сетевой интерфейс\ Получено пакетов</span><span class="sxs-lookup"><span data-stu-id="59661-262">\NetworkInterface\PacketsReceived</span></span> |<span data-ttu-id="59661-263">Count</span><span class="sxs-lookup"><span data-stu-id="59661-263">Count</span></span> |
| <span data-ttu-id="59661-264">\Сетевой интерфейс\Всего байт</span><span class="sxs-lookup"><span data-stu-id="59661-264">\NetworkInterface\BytesTotal</span></span> |<span data-ttu-id="59661-265">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-265">Bytes</span></span> |
| <span data-ttu-id="59661-266">\Сетевой интерфейс\Всего ошибок RX</span><span class="sxs-lookup"><span data-stu-id="59661-266">\NetworkInterface\TotalRxErrors</span></span> |<span data-ttu-id="59661-267">Count</span><span class="sxs-lookup"><span data-stu-id="59661-267">Count</span></span> |
| <span data-ttu-id="59661-268">\Сетевой интерфейс\Всего ошибок TX</span><span class="sxs-lookup"><span data-stu-id="59661-268">\NetworkInterface\TotalTxErrors</span></span> |<span data-ttu-id="59661-269">Count</span><span class="sxs-lookup"><span data-stu-id="59661-269">Count</span></span> |
| <span data-ttu-id="59661-270">\Сетевой интерфейс\Всего конфликтов</span><span class="sxs-lookup"><span data-stu-id="59661-270">\NetworkInterface\TotalCollisions</span></span> |<span data-ttu-id="59661-271">Count</span><span class="sxs-lookup"><span data-stu-id="59661-271">Count</span></span> |

## <a name="commonly-used-web-server-farm-metrics"></a><span data-ttu-id="59661-272">Часто используемые метрики веб-приложений (фермы серверов)</span><span class="sxs-lookup"><span data-stu-id="59661-272">Commonly used Web (Server Farm) metrics</span></span>
<span data-ttu-id="59661-273">Можно также выполнить автомасштабирование на основе общих метрик веб-сервера, таких как длина очереди HTTP.</span><span class="sxs-lookup"><span data-stu-id="59661-273">You can also perform autoscale based on common web server metrics such as the Http queue length.</span></span> <span data-ttu-id="59661-274">Имя метрики — **HttpQueueLength**.</span><span class="sxs-lookup"><span data-stu-id="59661-274">It's metric name is **HttpQueueLength**.</span></span>  <span data-ttu-id="59661-275">В следующем разделе перечислены доступные метрики фермы серверов (веб-приложений).</span><span class="sxs-lookup"><span data-stu-id="59661-275">The following section lists available server farm (Web Apps) metrics.</span></span>

### <a name="web-apps-metrics"></a><span data-ttu-id="59661-276">Метрики веб-приложений</span><span class="sxs-lookup"><span data-stu-id="59661-276">Web Apps metrics</span></span>
<span data-ttu-id="59661-277">Список метрик веб-приложений можно создать с помощью следующей команды PowerShell:</span><span class="sxs-lookup"><span data-stu-id="59661-277">You can generate a list of the Web Apps metrics by using the following command in PowerShell.</span></span>

```
Get-AzureRmMetricDefinition -ResourceId <resource_id> | Format-Table -Property Name,Unit
```

<span data-ttu-id="59661-278">Можно создавать оповещения и выполнять масштабирование на основе метрик в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="59661-278">You can alert on or scale by these metrics.</span></span>

| <span data-ttu-id="59661-279">Имя метрики</span><span class="sxs-lookup"><span data-stu-id="59661-279">Metric Name</span></span> | <span data-ttu-id="59661-280">Единица измерения</span><span class="sxs-lookup"><span data-stu-id="59661-280">Unit</span></span> |
| --- | --- |
| <span data-ttu-id="59661-281">Процент загруженности ЦП</span><span class="sxs-lookup"><span data-stu-id="59661-281">CpuPercentage</span></span> |<span data-ttu-id="59661-282">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-282">Percent</span></span> |
| <span data-ttu-id="59661-283">Процент использования памяти</span><span class="sxs-lookup"><span data-stu-id="59661-283">MemoryPercentage</span></span> |<span data-ttu-id="59661-284">Процент</span><span class="sxs-lookup"><span data-stu-id="59661-284">Percent</span></span> |
| <span data-ttu-id="59661-285">Длина очереди диска</span><span class="sxs-lookup"><span data-stu-id="59661-285">DiskQueueLength</span></span> |<span data-ttu-id="59661-286">Count</span><span class="sxs-lookup"><span data-stu-id="59661-286">Count</span></span> |
| <span data-ttu-id="59661-287">Длина очереди HTTP</span><span class="sxs-lookup"><span data-stu-id="59661-287">HttpQueueLength</span></span> |<span data-ttu-id="59661-288">Count</span><span class="sxs-lookup"><span data-stu-id="59661-288">Count</span></span> |
| <span data-ttu-id="59661-289">Получено байт</span><span class="sxs-lookup"><span data-stu-id="59661-289">BytesReceived</span></span> |<span data-ttu-id="59661-290">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-290">Bytes</span></span> |
| <span data-ttu-id="59661-291">Передано байт</span><span class="sxs-lookup"><span data-stu-id="59661-291">BytesSent</span></span> |<span data-ttu-id="59661-292">Байты</span><span class="sxs-lookup"><span data-stu-id="59661-292">Bytes</span></span> |

## <a name="commonly-used-storage-metrics"></a><span data-ttu-id="59661-293">Часто используемые метрики хранилища</span><span class="sxs-lookup"><span data-stu-id="59661-293">Commonly used Storage metrics</span></span>
<span data-ttu-id="59661-294">Можно масштабировать по длине очереди хранилища, которая представляет собой количество сообщений в очереди хранилища.</span><span class="sxs-lookup"><span data-stu-id="59661-294">You can scale by Storage queue length, which is the number of messages in the storage queue.</span></span> <span data-ttu-id="59661-295">Пороговым значением для этой специальной метрики является число сообщений на один экземпляр.</span><span class="sxs-lookup"><span data-stu-id="59661-295">Storage queue length is a special metric and the threshold is the number of messages per instance.</span></span> <span data-ttu-id="59661-296">Например, если есть два экземпляра и если пороговое значение — 100, то масштабирование выполняется, когда общее число сообщений в очереди достигнет 200.</span><span class="sxs-lookup"><span data-stu-id="59661-296">For example, if there are two instances and if the threshold is set to 100, scaling occurs when the total number of messages in the queue is 200.</span></span> <span data-ttu-id="59661-297">Число сообщений на экземпляр может быть 100, или 120 и 80, или любое другое сочетание, которое в сумме дает 200 или более.</span><span class="sxs-lookup"><span data-stu-id="59661-297">That can be 100 messages per instance, 120 and 80, or any other combination that adds up to 200 or more.</span></span>

<span data-ttu-id="59661-298">Настройте эти значения на портале Azure в колонке **Параметры**.</span><span class="sxs-lookup"><span data-stu-id="59661-298">Configure this setting in the Azure portal in the **Settings** blade.</span></span> <span data-ttu-id="59661-299">Для масштабируемых наборов виртуальных машин можно настроить параметр автомасштабирования в шаблоне Resource Manager так, чтобы для параметра *metricName* использовалось значение *ApproximateMessageCount*, а идентификатор очереди хранилища передавался в параметре *metricResourceUri*.</span><span class="sxs-lookup"><span data-stu-id="59661-299">For VM scale sets, you can update the Autoscale setting in the Resource Manager template to use *metricName* as *ApproximateMessageCount* and pass the ID of the storage queue as *metricResourceUri*.</span></span>

<span data-ttu-id="59661-300">Например, в классической учетной записи хранения metricTrigger параметра автомасштабирования включает следующие данные:</span><span class="sxs-lookup"><span data-stu-id="59661-300">For example, with a Classic Storage Account the autoscale setting metricTrigger would include:</span></span>

```
"metricName": "ApproximateMessageCount",
 "metricNamespace": "",
 "metricResourceUri": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RES_GROUP_NAME/providers/Microsoft.ClassicStorage/storageAccounts/STORAGE_ACCOUNT_NAME/services/queue/queues/QUEUE_NAME"
 ```

<span data-ttu-id="59661-301">В обычной учетной записи хранения (неклассической) metricTrigger включает следующие данные:</span><span class="sxs-lookup"><span data-stu-id="59661-301">For a (non-classic) storage account, the metricTrigger would include:</span></span>

```
"metricName": "ApproximateMessageCount",
"metricNamespace": "",
"metricResourceUri": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RES_GROUP_NAME/providers/Microsoft.Storage/storageAccounts/STORAGE_ACCOUNT_NAME/services/queue/queues/QUEUE_NAME"
```

## <a name="commonly-used-service-bus-metrics"></a><span data-ttu-id="59661-302">Часто используемые метрики служебной шины</span><span class="sxs-lookup"><span data-stu-id="59661-302">Commonly used Service Bus metrics</span></span>
<span data-ttu-id="59661-303">Масштабирование возможно по длине очереди служебной шины. Длина очереди представляет собой количество сообщений в очереди.</span><span class="sxs-lookup"><span data-stu-id="59661-303">You can scale by Service Bus queue length, which is the number of messages in the Service Bus queue.</span></span> <span data-ttu-id="59661-304">Пороговым значением для этой специальной метрики является число сообщений на один экземпляр.</span><span class="sxs-lookup"><span data-stu-id="59661-304">Service Bus queue length is a special metric and the threshold is the number of messages per instance.</span></span> <span data-ttu-id="59661-305">Например, если есть два экземпляра и если пороговое значение — 100, то масштабирование выполняется, когда общее число сообщений в очереди достигнет 200.</span><span class="sxs-lookup"><span data-stu-id="59661-305">For example, if there are two instances and if the threshold is set to 100, scaling occurs when the total number of messages in the queue is 200.</span></span> <span data-ttu-id="59661-306">Число сообщений на экземпляр может быть 100, или 120 и 80, или любое другое сочетание, которое в сумме дает 200 или более.</span><span class="sxs-lookup"><span data-stu-id="59661-306">That can be 100 messages per instance, 120 and 80, or any other combination that adds up to 200 or more.</span></span>

<span data-ttu-id="59661-307">Для масштабируемых наборов виртуальных машин можно настроить параметр автомасштабирования в шаблоне Resource Manager так, чтобы для параметра *metricName* использовалось значение *ApproximateMessageCount*, а идентификатор очереди хранилища передавался в параметре *metricResourceUri*.</span><span class="sxs-lookup"><span data-stu-id="59661-307">For VM scale sets, you can update the Autoscale setting in the Resource Manager template to use *metricName* as *ApproximateMessageCount* and pass the ID of the storage queue as *metricResourceUri*.</span></span>

```
"metricName": "MessageCount",
 "metricNamespace": "",
"metricResourceUri": "/subscriptions/SUBSCRIPTION_ID/resourceGroups/RES_GROUP_NAME/providers/Microsoft.ServiceBus/namespaces/SB_NAMESPACE/queues/QUEUE_NAME"
```

> [!NOTE]
> <span data-ttu-id="59661-308">Для служебной шины концепции группы ресурсов не существует, но Azure Resource Manager создает группу ресурсов по умолчанию на регион.</span><span class="sxs-lookup"><span data-stu-id="59661-308">For Service Bus, the resource group concept does not exist but Azure Resource Manager creates a default resource group per region.</span></span> <span data-ttu-id="59661-309">Группа ресурсов обычно имеет формат Default-ServiceBus-[region].</span><span class="sxs-lookup"><span data-stu-id="59661-309">The resource group is usually in the 'Default-ServiceBus-[region]' format.</span></span> <span data-ttu-id="59661-310">Например, Default-ServiceBus-EastUS, Default-ServiceBus-WestUS, Default-ServiceBus-AustraliaEast и т. д.</span><span class="sxs-lookup"><span data-stu-id="59661-310">For example, 'Default-ServiceBus-EastUS', 'Default-ServiceBus-WestUS', 'Default-ServiceBus-AustraliaEast' etc.</span></span>
>
>
