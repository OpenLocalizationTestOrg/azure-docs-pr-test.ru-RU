---
title: "aaaTroubleshooting диагностики Azure | Документы Microsoft"
description: "Устранение неполадок при использовании системы диагностики Azure на виртуальных машинах, в Service Fabric или в облачных службах."
services: monitoring-and-diagnostics
documentationcenter: .net
author: rboucher
manager: carmonm
editor: 
ms.assetid: 66469bce-d457-4d1e-b550-a08d2be4d28c
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 07/12/2017
ms.author: robb
ms.openlocfilehash: daaf9fa4c40982eb9ba04030d7e8ea1ad9fe085b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="azure-diagnostics-troubleshooting"></a><span data-ttu-id="77cd2-103">Устранение неполадок с помощью системы диагностики Azure</span><span class="sxs-lookup"><span data-stu-id="77cd2-103">Azure Diagnostics Troubleshooting</span></span>
<span data-ttu-id="77cd2-104">Устранение неполадок toousing соответствующие сведения диагностики Azure.</span><span class="sxs-lookup"><span data-stu-id="77cd2-104">Troubleshooting information relevant toousing Azure Diagnostics.</span></span> <span data-ttu-id="77cd2-105">Дополнительные сведения о системе диагностики Azure см. в [обзоре системы диагностики Azure](azure-diagnostics.md).</span><span class="sxs-lookup"><span data-stu-id="77cd2-105">For more information on Azure diagnostics, see [Azure Diagnostics Overview](azure-diagnostics.md).</span></span>

## <a name="logical-components"></a><span data-ttu-id="77cd2-106">Логические компоненты</span><span class="sxs-lookup"><span data-stu-id="77cd2-106">Logical Components</span></span>
<span data-ttu-id="77cd2-107">**Запуск диагностики подключаемого модуля (DiagnosticsPluginLauncher.exe)**: запускает hello расширения диагностики Azure.</span><span class="sxs-lookup"><span data-stu-id="77cd2-107">**Diagnostics Plugin Launcher (DiagnosticsPluginLauncher.exe)**: Launches hello Azure Diagnostics extension.</span></span> <span data-ttu-id="77cd2-108">Служит в качестве входа hello точки процесса.</span><span class="sxs-lookup"><span data-stu-id="77cd2-108">Serves as hello entry point process.</span></span>

<span data-ttu-id="77cd2-109">**Подключаемый модуль диагностики (DiagnosticsPlugin.exe)**: основной процесс, который запускается путем запуска hello выше и настраивает hello Monitoring Agent, запустившая его управляет времени его существования.</span><span class="sxs-lookup"><span data-stu-id="77cd2-109">**Diagnostics Plugin (DiagnosticsPlugin.exe)**: Main process that is launched by hello launcher above and configures hello Monitoring Agent, launches it and manages its lifetime.</span></span> 

<span data-ttu-id="77cd2-110">**Агент наблюдения (агента наблюдения\*процессы .exe)**: эти процессы hello большая часть работы hello; т. е. мониторинг, сбора и передачи hello диагностические данные.</span><span class="sxs-lookup"><span data-stu-id="77cd2-110">**Monitoring Agent (MonAgent\*.exe processes)**: These processes do hello bulk of hello work; i.e., monitoring, collection and transfer of hello diagnostics data.</span></span>  

## <a name="logartifact-paths"></a><span data-ttu-id="77cd2-111">Пути к журналам и артефактам</span><span class="sxs-lookup"><span data-stu-id="77cd2-111">Log/Artifact Paths</span></span>
<span data-ttu-id="77cd2-112">Ниже приведены важные журналы hello пути toosome и артефакты.</span><span class="sxs-lookup"><span data-stu-id="77cd2-112">Here are hello paths toosome important logs and artifacts.</span></span> <span data-ttu-id="77cd2-113">Мы хранить ссылки toothese во всей остальной hello hello документа:</span><span class="sxs-lookup"><span data-stu-id="77cd2-113">We keep referring toothese throughout hello rest of hello document:</span></span>
### <a name="cloud-services"></a><span data-ttu-id="77cd2-114">Облачные службы</span><span class="sxs-lookup"><span data-stu-id="77cd2-114">Cloud Services</span></span>
| <span data-ttu-id="77cd2-115">Артефакт</span><span class="sxs-lookup"><span data-stu-id="77cd2-115">Artifact</span></span> | <span data-ttu-id="77cd2-116">Путь</span><span class="sxs-lookup"><span data-stu-id="77cd2-116">Path</span></span> |
| --- | --- |
| <span data-ttu-id="77cd2-117">**Файл конфигурации системы диагностики Azure**</span><span class="sxs-lookup"><span data-stu-id="77cd2-117">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="77cd2-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<версия>\Config.txt</span><span class="sxs-lookup"><span data-stu-id="77cd2-118">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\Config.txt</span></span> |
| <span data-ttu-id="77cd2-119">**Файлы журналов**</span><span class="sxs-lookup"><span data-stu-id="77cd2-119">**Log files**</span></span> | <span data-ttu-id="77cd2-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<версия>\\</span><span class="sxs-lookup"><span data-stu-id="77cd2-120">C:\Logs\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version>\\</span></span> |
| <span data-ttu-id="77cd2-121">**Локальное хранилище данных диагностики**</span><span class="sxs-lookup"><span data-stu-id="77cd2-121">**Local store for diagnostics data**</span></span> | <span data-ttu-id="77cd2-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="77cd2-122">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Tables</span></span> |
| <span data-ttu-id="77cd2-123">**Файл конфигурации агента мониторинга**</span><span class="sxs-lookup"><span data-stu-id="77cd2-123">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="77cd2-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="77cd2-124">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="77cd2-125">**Пакет расширений системы диагностики Azure**</span><span class="sxs-lookup"><span data-stu-id="77cd2-125">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="77cd2-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<версия></span><span class="sxs-lookup"><span data-stu-id="77cd2-126">%SystemDrive%\Packages\Plugins\Microsoft.Azure.Diagnostics.PaaSDiagnostics\<version></span></span> |
| <span data-ttu-id="77cd2-127">**Путь к служебной программе сбора журналов**</span><span class="sxs-lookup"><span data-stu-id="77cd2-127">**Log collection utility path**</span></span> | <span data-ttu-id="77cd2-128">%SystemDrive%\Packages\GuestAgent\\</span><span class="sxs-lookup"><span data-stu-id="77cd2-128">%SystemDrive%\Packages\GuestAgent\\</span></span> |
| <span data-ttu-id="77cd2-129">**Файл журнала MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="77cd2-129">**MonAgentHost log file**</span></span> | <span data-ttu-id="77cd2-130">C:\Resources\Directory\<ИД_разверт._облачн._службы>.\<имя_роли>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<текущ._номер>.log</span><span class="sxs-lookup"><span data-stu-id="77cd2-130">C:\Resources\Directory\<CloudServiceDeploymentID>.\<RoleName>.DiagnosticStore\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

### <a name="virtual-machines"></a><span data-ttu-id="77cd2-131">Виртуальные машины</span><span class="sxs-lookup"><span data-stu-id="77cd2-131">Virtual Machines</span></span>
| <span data-ttu-id="77cd2-132">Артефакт</span><span class="sxs-lookup"><span data-stu-id="77cd2-132">Artifact</span></span> | <span data-ttu-id="77cd2-133">Путь</span><span class="sxs-lookup"><span data-stu-id="77cd2-133">Path</span></span> |
| --- | --- |
| <span data-ttu-id="77cd2-134">**Файл конфигурации системы диагностики Azure**</span><span class="sxs-lookup"><span data-stu-id="77cd2-134">**Azure Diagnostics configuration file**</span></span> | <span data-ttu-id="77cd2-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия>\RuntimeSettings</span><span class="sxs-lookup"><span data-stu-id="77cd2-135">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\RuntimeSettings</span></span> |
| <span data-ttu-id="77cd2-136">**Файлы журналов**</span><span class="sxs-lookup"><span data-stu-id="77cd2-136">**Log files**</span></span> | <span data-ttu-id="77cd2-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия>\Logs\\</span><span class="sxs-lookup"><span data-stu-id="77cd2-137">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Logs\\</span></span> |
| <span data-ttu-id="77cd2-138">**Локальное хранилище данных диагностики**</span><span class="sxs-lookup"><span data-stu-id="77cd2-138">**Local store for diagnostics data**</span></span> | <span data-ttu-id="77cd2-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия_системы_диагностики>\WAD0107\Tables</span><span class="sxs-lookup"><span data-stu-id="77cd2-139">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Tables</span></span> |
| <span data-ttu-id="77cd2-140">**Файл конфигурации агента мониторинга**</span><span class="sxs-lookup"><span data-stu-id="77cd2-140">**Monitoring Agent configuration file**</span></span> | <span data-ttu-id="77cd2-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия_системы_диагностики>\WAD0107\Configuration\MaConfig.xml</span><span class="sxs-lookup"><span data-stu-id="77cd2-141">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MaConfig.xml</span></span> |
| <span data-ttu-id="77cd2-142">**Состояние файла**</span><span class="sxs-lookup"><span data-stu-id="77cd2-142">**Status file**</span></span> | <span data-ttu-id="77cd2-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия>\Status</span><span class="sxs-lookup"><span data-stu-id="77cd2-143">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<version>\Status</span></span> |
| <span data-ttu-id="77cd2-144">**Пакет расширений системы диагностики Azure**</span><span class="sxs-lookup"><span data-stu-id="77cd2-144">**Azure diagnostics extension package**</span></span> | <span data-ttu-id="77cd2-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия_системы_диагностики></span><span class="sxs-lookup"><span data-stu-id="77cd2-145">C:\Packages\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion></span></span>|
| <span data-ttu-id="77cd2-146">**Путь к служебной программе сбора журналов**</span><span class="sxs-lookup"><span data-stu-id="77cd2-146">**Log collection utility path**</span></span> | <span data-ttu-id="77cd2-147">C:\WindowsAzure\Packages</span><span class="sxs-lookup"><span data-stu-id="77cd2-147">C:\WindowsAzure\Packages</span></span> |
| <span data-ttu-id="77cd2-148">**Файл журнала MonAgentHost**</span><span class="sxs-lookup"><span data-stu-id="77cd2-148">**MonAgentHost log file**</span></span> | <span data-ttu-id="77cd2-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<версия_системы_диагностики>\WAD0107\Configuration\MonAgentHost.<текущ._номер>.log</span><span class="sxs-lookup"><span data-stu-id="77cd2-149">C:\WindowsAzure\Logs\Plugins\Microsoft.Azure.Diagnostics.IaaSDiagnostics\<DiagnosticsVersion>\WAD0107\Configuration\MonAgentHost.<seq_num>.log</span></span> |

## <a name="metric-data-doesnt-show-in-azure-portal"></a><span data-ttu-id="77cd2-150">Данные метрики не отображаются на портале Azure</span><span class="sxs-lookup"><span data-stu-id="77cd2-150">Metric data doesn't show in Azure portal</span></span>
<span data-ttu-id="77cd2-151">Система диагностики Azure предоставляет ряд данных метрики, которые можно отобразить на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="77cd2-151">Azure Diagnostics provides a bunch of metric data, which can be displayed in Azure portal.</span></span> <span data-ttu-id="77cd2-152">При наличии проблем с просмотра этих данных в портале учетной записи хранения диагностики hello check -> WADMetrics\* таблица toosee, если существуют соответствующие записи метрики hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-152">If you have problems with seeing these data in portal, check hello diagnostics storage account -> WADMetrics\* table toosee if hello corresponding metric records are there.</span></span> <span data-ttu-id="77cd2-153">Здесь hello PartitionKey таблицы hello hello идентификатор ресурса виртуальной машины или набора масштабирования виртуальных машин, который hello RowKey имя метрики hello т. е. имя счетчика производительности.</span><span class="sxs-lookup"><span data-stu-id="77cd2-153">Here, hello PartitionKey of hello table is hello resource ID of virtual machine or virtual machine scale set, and hello RowKey is hello metric name i.e. performance counter name.</span></span>

<span data-ttu-id="77cd2-154">Если неверный идентификатор ресурса hello, проверьте конфигурацию диагностики -> метрики -> ResourceId toosee, если идентификатор ресурса hello задано правильно.</span><span class="sxs-lookup"><span data-stu-id="77cd2-154">If hello resource ID is incorrect, check Diagnostics Configuration -> Metrics -> ResourceId toosee if hello resource ID is set correctly.</span></span>

<span data-ttu-id="77cd2-155">Если нет данных для конкретного показателя hello, проверьте конфигурацию диагностики -> PerformanceCounter toosee, если метрика hello (счетчик производительности) включен.</span><span class="sxs-lookup"><span data-stu-id="77cd2-155">If there's no data for hello specific metric, check Diagnostics Configuration -> PerformanceCounter toosee if hello metric(performance counter) is included.</span></span> <span data-ttu-id="77cd2-156">Мы можем добавить следующие счетчики по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-156">We enable hello following counters by default.</span></span>
- <span data-ttu-id="77cd2-157">\Processor(_Total)\% Загруженность процессора</span><span class="sxs-lookup"><span data-stu-id="77cd2-157">\Processor(_Total)\% Processor Time</span></span>
- <span data-ttu-id="77cd2-158">\Память\доступные байты</span><span class="sxs-lookup"><span data-stu-id="77cd2-158">\Memory\Available Bytes</span></span>
- <span data-ttu-id="77cd2-159">\ASP.NET Applications(__Total__)\Requests/Sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-159">\ASP.NET Applications(__Total__)\Requests/Sec</span></span>
- <span data-ttu-id="77cd2-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-160">\ASP.NET Applications(__Total__)\Errors Total/Sec</span></span>
- <span data-ttu-id="77cd2-161">\ASP.NET\Requests Queued</span><span class="sxs-lookup"><span data-stu-id="77cd2-161">\ASP.NET\Requests Queued</span></span>
- <span data-ttu-id="77cd2-162">\ASP.NET\Requests Rejected</span><span class="sxs-lookup"><span data-stu-id="77cd2-162">\ASP.NET\Requests Rejected</span></span>
- <span data-ttu-id="77cd2-163">\Processor(w3wp)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77cd2-163">\Processor(w3wp)\% Processor Time</span></span>
- <span data-ttu-id="77cd2-164">\Process(w3wp)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="77cd2-164">\Process(w3wp)\Private Bytes</span></span>
- <span data-ttu-id="77cd2-165">\Process(WaIISHost)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77cd2-165">\Process(WaIISHost)\% Processor Time</span></span>
- <span data-ttu-id="77cd2-166">\Process(WaIISHost)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="77cd2-166">\Process(WaIISHost)\Private Bytes</span></span>
- <span data-ttu-id="77cd2-167">\Process(WaWorkerHost)\% Processor Time</span><span class="sxs-lookup"><span data-stu-id="77cd2-167">\Process(WaWorkerHost)\% Processor Time</span></span>
- <span data-ttu-id="77cd2-168">\Process(WaWorkerHost)\Private Bytes</span><span class="sxs-lookup"><span data-stu-id="77cd2-168">\Process(WaWorkerHost)\Private Bytes</span></span>
- <span data-ttu-id="77cd2-169">\Memory\Page Faults/sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-169">\Memory\Page Faults/sec</span></span>
- <span data-ttu-id="77cd2-170">\.NET CLR Memory(_Global_)\% Time in GC</span><span class="sxs-lookup"><span data-stu-id="77cd2-170">\.NET CLR Memory(_Global_)\% Time in GC</span></span>
- <span data-ttu-id="77cd2-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-171">\LogicalDisk(C:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="77cd2-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-172">\LogicalDisk(C:)\Disk Read Bytes/sec</span></span>
- <span data-ttu-id="77cd2-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-173">\LogicalDisk(D:)\Disk Write Bytes/sec</span></span>
- <span data-ttu-id="77cd2-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span><span class="sxs-lookup"><span data-stu-id="77cd2-174">\LogicalDisk(D:)\Disk Read Bytes/sec</span></span>

<span data-ttu-id="77cd2-175">Если hello конфигурации задано правильно, но все равно не отображаются данные метрик hello, следуйте правилам hello ниже hello дальнейшего исследования.</span><span class="sxs-lookup"><span data-stu-id="77cd2-175">If hello configuration is set correctly but you still cannot see hello metric data, follow hello guidelines below for hello further investigation.</span></span>


## <a name="azure-diagnostics-is-not-starting"></a><span data-ttu-id="77cd2-176">Система диагностики Azure не запускается</span><span class="sxs-lookup"><span data-stu-id="77cd2-176">Azure Diagnostics is not Starting</span></span>
<span data-ttu-id="77cd2-177">Посмотрите на **DiagnosticsPluginLauncher.log** и **DiagnosticsPlugin.log** файлы из места hello hello файлы журналов, предоставляемых выше сведения о том, почему диагностики сбой toostart.</span><span class="sxs-lookup"><span data-stu-id="77cd2-177">Look at **DiagnosticsPluginLauncher.log** and **DiagnosticsPlugin.log** files from hello location of hello log files provided above for information on why diagnostics failed toostart.</span></span> 

<span data-ttu-id="77cd2-178">Если эти журналы указывают `Monitoring Agent not reporting success after launch`, это означает, что произошел сбой запуска MonAgentHost.exe.</span><span class="sxs-lookup"><span data-stu-id="77cd2-178">If these logs indicate `Monitoring Agent not reporting success after launch`, it means there was a failure launching MonAgentHost.exe.</span></span> <span data-ttu-id="77cd2-179">Найдите в журналах hello, в hello местоположение, указанное для `MonAgentHost log file` hello выше в разделе.</span><span class="sxs-lookup"><span data-stu-id="77cd2-179">Look at hello logs for that in hello location indicated for `MonAgentHost log file` in hello section above.</span></span>

<span data-ttu-id="77cd2-180">Последняя строка Hello hello файлов журнала содержит код выхода hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-180">hello last line of hello log files contains hello exit code.</span></span>  

```
DiagnosticsPluginLauncher.exe Information: 0 : [4/16/2016 6:24:15 AM] DiagnosticPlugin exited with code 0
```
<span data-ttu-id="77cd2-181">Если найти **отрицательное** код выхода, см. в toohello [выхода кодовой таблицы](#azure-diagnostics-plugin-exit-codes) в hello [ссылки](#references).</span><span class="sxs-lookup"><span data-stu-id="77cd2-181">If you find a **negative** exit code, refer toohello [exit code table](#azure-diagnostics-plugin-exit-codes) in hello [References](#references).</span></span>

## <a name="diagnostics-data-is-not-logged-tooazure-storage"></a><span data-ttu-id="77cd2-182">Диагностические данные — не регистрируются tooAzure хранилища</span><span class="sxs-lookup"><span data-stu-id="77cd2-182">Diagnostics Data is Not Logged tooAzure Storage</span></span>
<span data-ttu-id="77cd2-183">Определите данные не отображаются или только некоторые из данных hello не отображаются.</span><span class="sxs-lookup"><span data-stu-id="77cd2-183">Determine if no data is showing up or only some of hello data is not showing up.</span></span>

### <a name="diagnostics-infrastructure-logs"></a><span data-ttu-id="77cd2-184">Журналы инфраструктуры диагностики</span><span class="sxs-lookup"><span data-stu-id="77cd2-184">Diagnostics Infrastructure Logs</span></span>
<span data-ttu-id="77cd2-185">В журналах инфраструктуры диагностики записываются все ошибки системы диагностики Azure.</span><span class="sxs-lookup"><span data-stu-id="77cd2-185">Diagnostics Infrastructure Logs is where azure diagnostics logs any errors that it runs into.</span></span> <span data-ttu-id="77cd2-186">Убедитесь, что вы включили ([как?](#how-to-check-diagnostics-extension-configuration)) записи журналов диагностики инфраструктуры в конфигурации и быстро найти соответствующие ошибки, которые отображаются в hello `DiagnosticInfrastructureLogsTable` таблицу в учетной записи хранения настроенных.</span><span class="sxs-lookup"><span data-stu-id="77cd2-186">Make sure you have enabled ([how to?](#how-to-check-diagnostics-extension-configuration)) capturing of Diagnostics Infrastructure logs in your configuration and quickly look for any relevant errors that show up in hello `DiagnosticInfrastructureLogsTable` table in your configured storage account.</span></span>

### <a name="no-data-is-showing-up"></a><span data-ttu-id="77cd2-187">Данные не отображаются</span><span class="sxs-lookup"><span data-stu-id="77cd2-187">No data is showing up</span></span>
<span data-ttu-id="77cd2-188">Наиболее распространенной причиной Hello полностью отсутствует данных события является хранилища неправильно определенные сведения об учетной записи.</span><span class="sxs-lookup"><span data-stu-id="77cd2-188">hello most common cause of event data entirely missing is incorrectly defined storage account information.</span></span>

<span data-ttu-id="77cd2-189">Решение. Исправьте файл конфигурации системы диагностики и переустановите систему диагностики.</span><span class="sxs-lookup"><span data-stu-id="77cd2-189">Solution: Correct your Diagnostics configuration and reinstall Diagnostics.</span></span>

<span data-ttu-id="77cd2-190">Учетная запись хранения hello правильно настроен, удаленного рабочего стола на компьютере hello и убедитесь, что DiagnosticsPlugin.exe MonAgentCore.exe, работают ли и.</span><span class="sxs-lookup"><span data-stu-id="77cd2-190">If hello storage account is configured correctly, remote desktop into hello machine and make sure DiagnosticsPlugin.exe and MonAgentCore.exe are running.</span></span> <span data-ttu-id="77cd2-191">Если они не выполняются, следуйте сведениям в разделе [Система диагностики Azure не запускается](#azure-diagnostics-is-not-starting).</span><span class="sxs-lookup"><span data-stu-id="77cd2-191">If they are not running, follow [Azure Diagnostics is not Starting](#azure-diagnostics-is-not-starting).</span></span> <span data-ttu-id="77cd2-192">При выполнении процессов hello перехода слишком[является получение локально собранные данные](#is-data-getting-captured-locally) и следуйте инструкциям в этом руководстве оттуда.</span><span class="sxs-lookup"><span data-stu-id="77cd2-192">If hello processes are running, jump too[Is data getting captured locally](#is-data-getting-captured-locally) and follow this guide from there on.</span></span>

### <a name="part-of-hello-data-is-missing"></a><span data-ttu-id="77cd2-193">Отсутствует часть данных hello</span><span class="sxs-lookup"><span data-stu-id="77cd2-193">Part of hello data is missing</span></span>
<span data-ttu-id="77cd2-194">В некоторых случаях вы можете получать не все данные.</span><span class="sxs-lookup"><span data-stu-id="77cd2-194">If you are getting some data but not other.</span></span> <span data-ttu-id="77cd2-195">Это означает сбор данных hello / передача конвейера задано правильно.</span><span class="sxs-lookup"><span data-stu-id="77cd2-195">This means hello data collection / transfer pipeline is set correctly.</span></span> <span data-ttu-id="77cd2-196">Выполните подразделах hello Вот toonarrow работу с какой проблемой hello:</span><span class="sxs-lookup"><span data-stu-id="77cd2-196">Follow hello subsections here toonarrow down what hello issue is:</span></span>
#### <a name="is-collection-configured"></a><span data-ttu-id="77cd2-197">Проверка параметров сбора</span><span class="sxs-lookup"><span data-stu-id="77cd2-197">Is Collection Configured:</span></span> 
<span data-ttu-id="77cd2-198">Конфигурация диагностики содержит hello часть, которая указывает, что для определенного типа данных toobe собраны.</span><span class="sxs-lookup"><span data-stu-id="77cd2-198">Diagnostics Configuration contains hello part that instructs for a particular type of data toobe collected.</span></span> <span data-ttu-id="77cd2-199">[Проверьте конфигурацию](#how-to-check-diagnostics-extension-configuration) toomake убедиться, что вам не нужны для данных вы не настроены для коллекции.</span><span class="sxs-lookup"><span data-stu-id="77cd2-199">[Review your configuration](#how-to-check-diagnostics-extension-configuration) toomake sure you are not looking for data you have not configured for collection.</span></span>
#### <a name="is-hello-host-generating-data"></a><span data-ttu-id="77cd2-200">Узел hello формирование данных:</span><span class="sxs-lookup"><span data-stu-id="77cd2-200">Is hello host generating data:</span></span>
- <span data-ttu-id="77cd2-201">**Счетчики производительности**: откройте системный монитор и проверьте счетчик hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-201">**Performance Counters**: open perfmon and check hello counter.</span></span>
- <span data-ttu-id="77cd2-202">**Журналы трассировки**: удаленного рабочего стола к hello ВМ и добавление файла конфигурации приложения toohello TextWriterTraceListener.</span><span class="sxs-lookup"><span data-stu-id="77cd2-202">**Trace Logs**:  Remote desktop into hello VM and add a TextWriterTraceListener toohello app’s config file.</span></span>  <span data-ttu-id="77cd2-203">В разделе tooset http://msdn.microsoft.com/library/sk36c28t.aspx слушателя текст hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-203">See http://msdn.microsoft.com/library/sk36c28t.aspx tooset up hello text listener.</span></span>  <span data-ttu-id="77cd2-204">Убедитесь, что hello `<trace>` элемент имеет `<trace autoflush="true">`.</span><span class="sxs-lookup"><span data-stu-id="77cd2-204">Make sure hello `<trace>` element has `<trace autoflush="true">`.</span></span><br />
<span data-ttu-id="77cd2-205">Если журналы трассировки не создаются, см. сведения в разделе [Подробные сведения об отсутствии журналов трассировки](#more-about-trace-logs-missing).</span><span class="sxs-lookup"><span data-stu-id="77cd2-205">If you don't see trace logs getting generated, follow [More About Trace Logs Missing](#more-about-trace-logs-missing).</span></span>
- <span data-ttu-id="77cd2-206">**Трассировки событий Windows**: удаленного рабочего стола в hello виртуальной Машины и установки PerfView.</span><span class="sxs-lookup"><span data-stu-id="77cd2-206">**ETW traces**: Remote desktop into hello VM and install PerfView.</span></span>  <span data-ttu-id="77cd2-207">Откройте средство PerfView и выберите "File (Файл) > User Command (Пользовательская команда) > Ожидать передачи данных", указав при этом необходимых поставщиков ETW (etwprovder1, etwprovider2 и т. д.).  Обратите внимание, что команды прослушивания hello учитывается регистр, не должно быть пробелов между hello запятыми список поставщиков трассировки событий Windows.</span><span class="sxs-lookup"><span data-stu-id="77cd2-207">In PerfView run File -> User Command -> Listen etwprovder1, etwprovider2, etc.  Note that hello Listen command is case-sensitive and there cannot be spaces between hello comma-separated list of ETW providers.</span></span>  <span data-ttu-id="77cd2-208">При сбое команды hello toorun, можно щелкнуть кнопку «Вход» hello в hello правой нижней части toosee инструмент Perfview hello, была попытка toorun и какие hello результат был.</span><span class="sxs-lookup"><span data-stu-id="77cd2-208">If hello command fails toorun, you can click hello 'Log' button in hello bottom-right of hello Perfview tool toosee what was attempted toorun and what hello result was.</span></span>  <span data-ttu-id="77cd2-209">При условии, что входные данные hello указано правильно, затем откроется новое окно вверх и через несколько секунд сначала просмотра трассировки событий Windows.</span><span class="sxs-lookup"><span data-stu-id="77cd2-209">Assuming hello input is correct then a new window will pop up and in a few seconds you will begin seeing ETW traces.</span></span>
- <span data-ttu-id="77cd2-210">**Журналы событий**: удаленного рабочего стола к hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-210">**Event Logs**: Remote desktop into hello VM.</span></span> <span data-ttu-id="77cd2-211">Откройте `Event Viewer` и обеспечить hello события отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="77cd2-211">Open `Event Viewer` and ensure hello events exist.</span></span>
#### <a name="is-data-getting-captured-locally"></a><span data-ttu-id="77cd2-212">Проверка локального сохранения данных</span><span class="sxs-lookup"><span data-stu-id="77cd2-212">Is data getting captured locally:</span></span>
<span data-ttu-id="77cd2-213">Затем убедитесь, что данные hello начало регистрируются локально.</span><span class="sxs-lookup"><span data-stu-id="77cd2-213">Next make sure hello data is getting captured locally.</span></span>
<span data-ttu-id="77cd2-214">Hello данные хранятся локально в `*.tsf` файлы в [hello локального хранилища для данных диагностики](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="77cd2-214">hello data is locally stored in `*.tsf` files in [hello local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="77cd2-215">Каждый тип журнала записывается в разные файлы `.tsf`.</span><span class="sxs-lookup"><span data-stu-id="77cd2-215">Different kinds of logs get collected in different `.tsf` files.</span></span> <span data-ttu-id="77cd2-216">Hello называются имена аналогичные toohello таблица в хранилище azure.</span><span class="sxs-lookup"><span data-stu-id="77cd2-216">hello names are similar toohello table names in azure storage.</span></span> <span data-ttu-id="77cd2-217">Например, показатели счетчиков `Performance Counters` производительности записываются в файл `PerformanceCountersTable.tsf`, а данные журналов событий — в файл `WindowsEventLogsTable.tsf`.</span><span class="sxs-lookup"><span data-stu-id="77cd2-217">For example `Performance Counters` get collected in `PerformanceCountersTable.tsf`, Event Logs get collected in `WindowsEventLogsTable.tsf`.</span></span> <span data-ttu-id="77cd2-218">Используйте инструкции hello в [извлечения локального журнала](#local-log-extraction) статьи tooopen hello локальный сбор файлов и убедитесь, что вы видите их получение, собранные на диске.</span><span class="sxs-lookup"><span data-stu-id="77cd2-218">Use hello instructions in [Local Log Extraction](#local-log-extraction) section tooopen hello local collection files and make sure you see them getting collected on disk.</span></span>

<span data-ttu-id="77cd2-219">Если у вас см. в журналах начало собираются локально и уже проверена hello узла создание данных, скорее всего имеется ошибка конфигурации.</span><span class="sxs-lookup"><span data-stu-id="77cd2-219">If you don't see logs getting collected locally and have already verified that hello host is generating data, you likely have a configuration issue.</span></span> <span data-ttu-id="77cd2-220">Проверьте конфигурацию тщательно для hello соответствующий раздел.</span><span class="sxs-lookup"><span data-stu-id="77cd2-220">Review your configuration carefully for hello appropriate section.</span></span> <span data-ttu-id="77cd2-221">Также проверьте конфигурацию hello, созданный для MonitoringAgent [MaConfig.xml](#log-artifacts-path) и убедитесь, что некоторые разделе с описанием источника соответствующих hello и не теряются при переводе между конфигурации службы диагностики azure и конфигурация агента мониторинга.</span><span class="sxs-lookup"><span data-stu-id="77cd2-221">Also review hello configuration generated for MonitoringAgent [MaConfig.xml](#log-artifacts-path) and make sure there is some section describing hello relevant log source and that it is not lost in translation between azure diagnostics configuration and monitoring agent configuration.</span></span>
#### <a name="is-data-getting-transferred"></a><span data-ttu-id="77cd2-222">Проверка передачи данных</span><span class="sxs-lookup"><span data-stu-id="77cd2-222">Is data getting transferred:</span></span>
<span data-ttu-id="77cd2-223">Если вы проверили hello начало фиксируются локально, но вы по-прежнему не отображается в вашей учетной записи хранения:</span><span class="sxs-lookup"><span data-stu-id="77cd2-223">If you have verified hello data is getting captured locally but you still don't see it in your storage account:</span></span> 
- <span data-ttu-id="77cd2-224">Первое и самое главное убедитесь, что учетной записи хранения правильно указано, и что вы не изменили hello etc.for ключей заданного учетной записи хранилища.</span><span class="sxs-lookup"><span data-stu-id="77cd2-224">First and foremost, make sure that you have provided a correct storage account and that you have not rolled over keys etc.for hello given storage account.</span></span> <span data-ttu-id="77cd2-225">Иногда пользователи облачных служб не обновляют раздел `useDevelopmentStorage=true`.</span><span class="sxs-lookup"><span data-stu-id="77cd2-225">For cloud services, sometimes we see that people don't update their `useDevelopmentStorage=true`.</span></span>
- <span data-ttu-id="77cd2-226">Если учетная запись хранения указана правильно,</span><span class="sxs-lookup"><span data-stu-id="77cd2-226">If provided storage account is correct.</span></span> <span data-ttu-id="77cd2-227">Убедитесь, что у вас некоторые ограничения сети, которые не допускают компоненты hello конечные точки tooreach открытом хранилище.</span><span class="sxs-lookup"><span data-stu-id="77cd2-227">Make sure you do not have some network restrictions that do not allow hello components tooreach public storage endpoints.</span></span> <span data-ttu-id="77cd2-228">Одним из способов toodo, tooremote рабочего стола к hello компьютера и повторите toowrite что-нибудь toohello учетной записи хранения самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="77cd2-228">One way toodo that is tooremote desktop into hello machine and try toowrite something toohello same storage account yourself.</span></span>
- <span data-ttu-id="77cd2-229">Наконец, вы можете просмотреть ошибки агента наблюдения.</span><span class="sxs-lookup"><span data-stu-id="77cd2-229">Finally, you can try and see what failure are being reported by Monitoring Agent.</span></span> <span data-ttu-id="77cd2-230">Агент мониторинга записывает его журналы в `maeventtable.tsf` в [hello локального хранилища для данных диагностики](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="77cd2-230">Monitoring agent writes its logs in `maeventtable.tsf` located in [hello local store for diagnostics data](#log-artifacts-path).</span></span> <span data-ttu-id="77cd2-231">Следуйте инструкциям в разделе [извлечения локального журнала](#local-log-extraction) статьи tooopen этот файл и повторите выяснить наличие `errors` , указывающее, сбои tooread локальные файлы или записи toostorage.</span><span class="sxs-lookup"><span data-stu-id="77cd2-231">Follow instructions in [Local Log Extraction](#local-log-extraction) section tooopen this file and try and figure out if there are `errors` indicating failures tooread local files or write toostorage.</span></span>

### <a name="capturing--archiving-logs"></a><span data-ttu-id="77cd2-232">Архивация и запись журналов</span><span class="sxs-lookup"><span data-stu-id="77cd2-232">Capturing / Archiving logs</span></span>
<span data-ttu-id="77cd2-233">Пройдено hello выше действия, но не удалось определить необходимые неправильное и думать о обращения в службу поддержки.</span><span class="sxs-lookup"><span data-stu-id="77cd2-233">You went through hello above steps but could not figure out what was wrong and are thinking about contacting support.</span></span> <span data-ttu-id="77cd2-234">Hello первое, что вас могут попросить — toocollect журналы с компьютера.</span><span class="sxs-lookup"><span data-stu-id="77cd2-234">hello first thing they might ask you is toocollect logs from your machine.</span></span> <span data-ttu-id="77cd2-235">Вы можете сэкономить время, сделав это самостоятельно.</span><span class="sxs-lookup"><span data-stu-id="77cd2-235">You can save time by doing that yourself.</span></span> <span data-ttu-id="77cd2-236">Запустите hello `CollectGuestLogs.exe` программы [путь программа для сбора журналов](#log-artifacts-path) и создает ZIP-файл с все журналы azure в hello одной папке.</span><span class="sxs-lookup"><span data-stu-id="77cd2-236">Run hello `CollectGuestLogs.exe` utility at  [Log Collection Utility path](#log-artifacts-path) and it generates a zip file with all relevant azure logs in hello same folder.</span></span>

## <a name="diagnostics-data-tables-not-found"></a><span data-ttu-id="77cd2-237">Таблицы данных диагностики не найдены</span><span class="sxs-lookup"><span data-stu-id="77cd2-237">Diagnostics data Tables not found</span></span>
<span data-ttu-id="77cd2-238">Hello таблиц в хранилище Azure, содержащий события трассировки событий Windows именуются hello, следующий код:</span><span class="sxs-lookup"><span data-stu-id="77cd2-238">hello tables in Azure storage holding ETW events are named using hello following code:</span></span>

```C#
        if (String.IsNullOrEmpty(eventDestination)) {
            if (e == "DefaultEvents")
                tableName = "WADDefault" + MD5(provider);
            else
                tableName = "WADEvent" + MD5(provider) + eventId;
        }
        else
            tableName = "WAD" + eventDestination;
```

<span data-ttu-id="77cd2-239">Пример:</span><span class="sxs-lookup"><span data-stu-id="77cd2-239">Here is an example:</span></span>

```XML
        <EtwEventSourceProviderConfiguration provider="prov1">
          <Event id="1" />
          <Event id="2" eventDestination="dest1" />
          <DefaultEvents />
        </EtwEventSourceProviderConfiguration>
        <EtwEventSourceProviderConfiguration provider="prov2">
          <DefaultEvents eventDestination="dest2" />
        </EtwEventSourceProviderConfiguration>
```
```JSON
"EtwEventSourceProviderConfiguration": [
    {
        "provider": "prov1",
        "Event": [
            {
                "id": 1
            },
            {
                "id": 2,
                "eventDestination": "dest1"
            }
        ],
        "DefaultEvents": {
            "eventDestination": "DefaultEventDestination",
            "sinks": ""
        }
    },
    {
        "provider": "prov2",
        "DefaultEvents": {
            "eventDestination": "dest2"
        }
    }
]
```
<span data-ttu-id="77cd2-240">Создается 4 таблицы:</span><span class="sxs-lookup"><span data-stu-id="77cd2-240">That generates 4 tables:</span></span>

| <span data-ttu-id="77cd2-241">Событие</span><span class="sxs-lookup"><span data-stu-id="77cd2-241">Event</span></span> | <span data-ttu-id="77cd2-242">Имя таблицы</span><span class="sxs-lookup"><span data-stu-id="77cd2-242">Table Name</span></span> |
| --- | --- |
| <span data-ttu-id="77cd2-243">provider=”prov1” &lt;Event id=”1” /&gt;</span><span class="sxs-lookup"><span data-stu-id="77cd2-243">provider=”prov1” &lt;Event id=”1” /&gt;</span></span> |<span data-ttu-id="77cd2-244">WADEvent+MD5(“prov1”)+”1”</span><span class="sxs-lookup"><span data-stu-id="77cd2-244">WADEvent+MD5(“prov1”)+”1”</span></span> |
| <span data-ttu-id="77cd2-245">provider=”prov1” &lt;Event id=”2” eventDestination=”dest1” /&gt;</span><span class="sxs-lookup"><span data-stu-id="77cd2-245">provider=”prov1” &lt;Event id=”2” eventDestination=”dest1” /&gt;</span></span> |<span data-ttu-id="77cd2-246">WADdest1</span><span class="sxs-lookup"><span data-stu-id="77cd2-246">WADdest1</span></span> |
| <span data-ttu-id="77cd2-247">provider=”prov1” &lt;DefaultEvents /&gt;</span><span class="sxs-lookup"><span data-stu-id="77cd2-247">provider=”prov1” &lt;DefaultEvents /&gt;</span></span> |<span data-ttu-id="77cd2-248">WADDefault+MD5(“prov1”)</span><span class="sxs-lookup"><span data-stu-id="77cd2-248">WADDefault+MD5(“prov1”)</span></span> |
| <span data-ttu-id="77cd2-249">provider=”prov2” &lt;DefaultEvents eventDestination=”dest2” /&gt;</span><span class="sxs-lookup"><span data-stu-id="77cd2-249">provider=”prov2” &lt;DefaultEvents eventDestination=”dest2” /&gt;</span></span> |<span data-ttu-id="77cd2-250">WADdest2</span><span class="sxs-lookup"><span data-stu-id="77cd2-250">WADdest2</span></span> |

## <a name="references"></a><span data-ttu-id="77cd2-251">Ссылки</span><span class="sxs-lookup"><span data-stu-id="77cd2-251">References</span></span>

### <a name="how-toocheck-diagnostics-extension-configuration"></a><span data-ttu-id="77cd2-252">Как toocheck конфигурацию расширения диагностики</span><span class="sxs-lookup"><span data-stu-id="77cd2-252">How toocheck Diagnostics Extension Configuration</span></span>
<span data-ttu-id="77cd2-253">Здравствуйте, наиболее простым способом toocheck конфигурацию расширения toonavigate toohttp://resources.azure.com, перейти toohello виртуальной машины или облачные службы на какие hello расширения системы диагностики Azure (IaaSDiagnostics / PaaDiagnostics) не гарантируется.</span><span class="sxs-lookup"><span data-stu-id="77cd2-253">hello easiest way toocheck your extension configuration is toonavigate toohttp://resources.azure.com, navigate toohello virtual machine or cloud service on which hello Azure Diagnostics extension (IaaSDiagnostics / PaaDiagnostics) is in question.</span></span>

<span data-ttu-id="77cd2-254">Кроме того, удаленного рабочего стола к машине hello и просмотрите файл конфигурации службы диагностики Azure hello, описанной в соответствующем разделе hello [здесь](#log-artifacts-path).</span><span class="sxs-lookup"><span data-stu-id="77cd2-254">Alternatively, remote desktop into hello machine and look at hello Azure Diagnostics Configuration file described in hello appropriate section [here](#log-artifacts-path).</span></span>

<span data-ttu-id="77cd2-255">В обоих вариантов поиска **Microsoft.Azure.Diagnostics** затем для hello **xmlCfg** или **WadCfg** поля.</span><span class="sxs-lookup"><span data-stu-id="77cd2-255">In either case search for **Microsoft.Azure.Diagnostics** then for hello **xmlCfg** or **WadCfg** field.</span></span> 

<span data-ttu-id="77cd2-256">В случае виртуальных машин Если присутствует поле WadCfg hello, это означает, что файл конфигурации hello, — в формате JSON.</span><span class="sxs-lookup"><span data-stu-id="77cd2-256">In case of virtual machines, if hello WadCfg field is present, it means hello config is in JSON.</span></span> <span data-ttu-id="77cd2-257">Если присутствует поле xmlCfg hello, значит hello конфигурации в формате XML и в кодировке base64.</span><span class="sxs-lookup"><span data-stu-id="77cd2-257">If hello xmlCfg field is present, it means hello config is in XML and is base64 encoded.</span></span> <span data-ttu-id="77cd2-258">Требуется слишком[декодирования](http://www.bing.com/search?q=base64+decoder) toosee hello XML, который был загружен с помощью системы диагностики.</span><span class="sxs-lookup"><span data-stu-id="77cd2-258">You need too[decode it](http://www.bing.com/search?q=base64+decoder) toosee hello XML that was loaded by Diagnostics.</span></span>

<span data-ttu-id="77cd2-259">Для роли облачной службы, если вы выберете hello конфигурации с диска, hello данных имеет кодировку base64, вам потребуется слишком[декодирования](http://www.bing.com/search?q=base64+decoder) toosee hello XML, который был загружен с помощью системы диагностики.</span><span class="sxs-lookup"><span data-stu-id="77cd2-259">For Cloud Service role, if you pick hello configuration from disk, hello data is base64 encoded so you’ll need too[decode it](http://www.bing.com/search?q=base64+decoder) toosee hello XML that was loaded by Diagnostics.</span></span>

### <a name="azure-diagnostics-plugin-exit-codes"></a><span data-ttu-id="77cd2-260">Коды выхода подключаемого модуля системы диагностики Azure</span><span class="sxs-lookup"><span data-stu-id="77cd2-260">Azure Diagnostics Plugin Exit Codes</span></span>
<span data-ttu-id="77cd2-261">Подключаемый модуль Hello возвращает следующие коды выхода hello:</span><span class="sxs-lookup"><span data-stu-id="77cd2-261">hello plugin returns hello following exit codes:</span></span>

| <span data-ttu-id="77cd2-262">Код выхода</span><span class="sxs-lookup"><span data-stu-id="77cd2-262">Exit Code</span></span> | <span data-ttu-id="77cd2-263">Описание</span><span class="sxs-lookup"><span data-stu-id="77cd2-263">Description</span></span> |
| --- | --- |
| <span data-ttu-id="77cd2-264">0</span><span class="sxs-lookup"><span data-stu-id="77cd2-264">0</span></span> |<span data-ttu-id="77cd2-265">Успешно.</span><span class="sxs-lookup"><span data-stu-id="77cd2-265">Success.</span></span> |
| <span data-ttu-id="77cd2-266">-1</span><span class="sxs-lookup"><span data-stu-id="77cd2-266">-1</span></span> |<span data-ttu-id="77cd2-267">Общая ошибка.</span><span class="sxs-lookup"><span data-stu-id="77cd2-267">Generic Error.</span></span> |
| <span data-ttu-id="77cd2-268">-2</span><span class="sxs-lookup"><span data-stu-id="77cd2-268">-2</span></span> |<span data-ttu-id="77cd2-269">Не удается tooload hello rcf файл.</span><span class="sxs-lookup"><span data-stu-id="77cd2-269">Unable tooload hello rcf file.</span></span><p><span data-ttu-id="77cd2-270">Это внутренняя ошибка должен произойти, только если hello гостевой агент подключаемый модуль запуска вручную вызове, неправильно, hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-270">This internal error should only happen if hello guest agent plugin launcher is manually invoked, incorrectly, on hello VM.</span></span> |
| <span data-ttu-id="77cd2-271">-3</span><span class="sxs-lookup"><span data-stu-id="77cd2-271">-3</span></span> |<span data-ttu-id="77cd2-272">Не удалось загрузить файл конфигурации диагностики hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-272">Cannot load hello Diagnostics configuration file.</span></span><p><p><span data-ttu-id="77cd2-273">Решение. Это вызвано тем, что файл конфигурации не прошел проверку схемы.</span><span class="sxs-lookup"><span data-stu-id="77cd2-273">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="77cd2-274">Hello решением является tooprovide файл конфигурации, который соответствует схеме hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-274">hello solution is tooprovide a configuration file that complies with hello schema.</span></span> |
| <span data-ttu-id="77cd2-275">-4</span><span class="sxs-lookup"><span data-stu-id="77cd2-275">-4</span></span> |<span data-ttu-id="77cd2-276">Другой экземпляр hello мониторинг агента диагностики уже использует каталог локального ресурса hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-276">Another instance of hello monitoring agent Diagnostics is already using hello local resource directory.</span></span><p><p><span data-ttu-id="77cd2-277">Решение. Укажите другое значение для **LocalResourceDirectory**.</span><span class="sxs-lookup"><span data-stu-id="77cd2-277">Solution: Specify a different value for **LocalResourceDirectory**.</span></span> |
| <span data-ttu-id="77cd2-278">-6</span><span class="sxs-lookup"><span data-stu-id="77cd2-278">-6</span></span> |<span data-ttu-id="77cd2-279">Hello гостевой агент подключаемый модуль запуска попытка toolaunch диагностики с недопустимой записью командной строки.</span><span class="sxs-lookup"><span data-stu-id="77cd2-279">hello guest agent plugin launcher attempted toolaunch Diagnostics with an invalid command line.</span></span><p><p><span data-ttu-id="77cd2-280">Это внутренняя ошибка должен произойти, только если hello гостевой агент подключаемый модуль запуска вручную вызове, неправильно, hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-280">This internal error should only happen if hello guest agent plugin launcher is manually invoked, incorrectly, on hello VM.</span></span> |
| <span data-ttu-id="77cd2-281">-10</span><span class="sxs-lookup"><span data-stu-id="77cd2-281">-10</span></span> |<span data-ttu-id="77cd2-282">Подключаемый модуль диагностики Hello завершил работу с необработанным исключением.</span><span class="sxs-lookup"><span data-stu-id="77cd2-282">hello Diagnostics plugin exited with an unhandled exception.</span></span> |
| <span data-ttu-id="77cd2-283">-11</span><span class="sxs-lookup"><span data-stu-id="77cd2-283">-11</span></span> |<span data-ttu-id="77cd2-284">Hello гостевого агента был процесса hello не удается toocreate отвечает за запуск и мониторинг hello, агент мониторинга.</span><span class="sxs-lookup"><span data-stu-id="77cd2-284">hello guest agent was unable toocreate hello process responsible for launching and monitoring hello monitoring agent.</span></span><p><p><span data-ttu-id="77cd2-285">Решение: Убедитесь, что достаточно ресурсов toolaunch доступны новые процессы.</span><span class="sxs-lookup"><span data-stu-id="77cd2-285">Solution: Verify that sufficient system resources are available toolaunch new processes.</span></span><p> |
| <span data-ttu-id="77cd2-286">-101</span><span class="sxs-lookup"><span data-stu-id="77cd2-286">-101</span></span> |<span data-ttu-id="77cd2-287">Недопустимые аргументы при вызове подключаемый модуль диагностики hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-287">Invalid arguments when calling hello Diagnostics plugin.</span></span><p><p><span data-ttu-id="77cd2-288">Это внутренняя ошибка должен произойти, только если hello гостевой агент подключаемый модуль запуска вручную вызове, неправильно, hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-288">This internal error should only happen if hello guest agent plugin launcher is manually invoked, incorrectly, on hello VM.</span></span> |
| <span data-ttu-id="77cd2-289">-102</span><span class="sxs-lookup"><span data-stu-id="77cd2-289">-102</span></span> |<span data-ttu-id="77cd2-290">процесс Hello подключаемый модуль — не удается tooinitialize сам.</span><span class="sxs-lookup"><span data-stu-id="77cd2-290">hello plugin process is unable tooinitialize itself.</span></span><p><p><span data-ttu-id="77cd2-291">Решение: Убедитесь, что достаточно ресурсов toolaunch доступны новые процессы.</span><span class="sxs-lookup"><span data-stu-id="77cd2-291">Solution: Verify that sufficient system resources are available toolaunch new processes.</span></span> |
| <span data-ttu-id="77cd2-292">-103</span><span class="sxs-lookup"><span data-stu-id="77cd2-292">-103</span></span> |<span data-ttu-id="77cd2-293">процесс Hello подключаемый модуль — не удается tooinitialize сам.</span><span class="sxs-lookup"><span data-stu-id="77cd2-293">hello plugin process is unable tooinitialize itself.</span></span> <span data-ttu-id="77cd2-294">Точнее, это объект средства ведения журнала не удается toocreate hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-294">Specifically it is unable toocreate hello logger object.</span></span><p><p><span data-ttu-id="77cd2-295">Решение: Убедитесь, что достаточно ресурсов toolaunch доступны новые процессы.</span><span class="sxs-lookup"><span data-stu-id="77cd2-295">Solution: Verify that sufficient system resources are available toolaunch new processes.</span></span> |
| <span data-ttu-id="77cd2-296">-104</span><span class="sxs-lookup"><span data-stu-id="77cd2-296">-104</span></span> |<span data-ttu-id="77cd2-297">Не удается tooload hello rcf файл hello гостевого агента.</span><span class="sxs-lookup"><span data-stu-id="77cd2-297">Unable tooload hello rcf file provided by hello guest agent.</span></span><p><p><span data-ttu-id="77cd2-298">Это внутренняя ошибка должен произойти, только если hello гостевой агент подключаемый модуль запуска вручную вызове, неправильно, hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-298">This internal error should only happen if hello guest agent plugin launcher is manually invoked, incorrectly, on hello VM.</span></span> |
| <span data-ttu-id="77cd2-299">-105</span><span class="sxs-lookup"><span data-stu-id="77cd2-299">-105</span></span> |<span data-ttu-id="77cd2-300">Подключаемый модуль диагностики Hello не удается открыть файл конфигурации диагностики hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-300">hello Diagnostics plugin cannot open hello Diagnostics configuration file.</span></span><p><p><span data-ttu-id="77cd2-301">Это внутренняя ошибка должен произойти, только если подключаемый модуль диагностики hello вручную вызове, неправильно, hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-301">This internal error should only happen if hello Diagnostics plugin is manually invoked, incorrectly, on hello VM.</span></span> |
| <span data-ttu-id="77cd2-302">-106</span><span class="sxs-lookup"><span data-stu-id="77cd2-302">-106</span></span> |<span data-ttu-id="77cd2-303">Не удалось прочитать файл конфигурации диагностики hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-303">Cannot read hello Diagnostics configuration file.</span></span><p><p><span data-ttu-id="77cd2-304">Решение. Это вызвано тем, что файл конфигурации не прошел проверку схемы.</span><span class="sxs-lookup"><span data-stu-id="77cd2-304">Solution: Caused by a configuration file not passing schema validation.</span></span> <span data-ttu-id="77cd2-305">Поэтому hello решением является tooprovide файл конфигурации, который соответствует схеме hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-305">So hello solution is tooprovide a configuration file that complies with hello schema.</span></span> <span data-ttu-id="77cd2-306">В разделе [как toocheck конфигурацию расширения диагностики](#how-to-check-diagnostics-extension-configuration).</span><span class="sxs-lookup"><span data-stu-id="77cd2-306">See [How toocheck Diagnostics Extension Configuration](#how-to-check-diagnostics-extension-configuration).</span></span> |
| <span data-ttu-id="77cd2-307">-107</span><span class="sxs-lookup"><span data-stu-id="77cd2-307">-107</span></span> |<span data-ttu-id="77cd2-308">Агент мониторинга проход toohello Hello ресурса каталога недопустим.</span><span class="sxs-lookup"><span data-stu-id="77cd2-308">hello resource directory pass toohello monitoring agent is invalid.</span></span><p><p><span data-ttu-id="77cd2-309">Это внутренняя ошибка должен произойти, только если агент наблюдения hello вручную вызове, неправильно, hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="77cd2-309">This internal error should only happen if hello monitoring agent is manually invoked, incorrectly, on hello VM.</span></span></p> |
| <span data-ttu-id="77cd2-310">-108</span><span class="sxs-lookup"><span data-stu-id="77cd2-310">-108</span></span> |<span data-ttu-id="77cd2-311">Не удается tooconvert hello файла конфигурации диагностики в агент файлом конфигурации наблюдения за hello.</span><span class="sxs-lookup"><span data-stu-id="77cd2-311">Unable tooconvert hello Diagnostics configuration file into hello monitoring agent configuration file.</span></span><p><p><span data-ttu-id="77cd2-312">Это внутренняя ошибка должен произойти, только если подключаемый модуль диагностики hello вручную вызова используется недопустимый файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="77cd2-312">This internal error should only happen if hello Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="77cd2-313">-110</span><span class="sxs-lookup"><span data-stu-id="77cd2-313">-110</span></span> |<span data-ttu-id="77cd2-314">Общая ошибка конфигурации системы диагностики.</span><span class="sxs-lookup"><span data-stu-id="77cd2-314">General Diagnostics configuration error.</span></span><p><p><span data-ttu-id="77cd2-315">Это внутренняя ошибка должен произойти, только если подключаемый модуль диагностики hello вручную вызова используется недопустимый файл конфигурации.</span><span class="sxs-lookup"><span data-stu-id="77cd2-315">This internal error should only happen if hello Diagnostics plugin is manually invoked with an invalid configuration file.</span></span> |
| <span data-ttu-id="77cd2-316">-111</span><span class="sxs-lookup"><span data-stu-id="77cd2-316">-111</span></span> |<span data-ttu-id="77cd2-317">Не удается toostart hello агент мониторинга.</span><span class="sxs-lookup"><span data-stu-id="77cd2-317">Unable toostart hello monitoring agent.</span></span><p><p><span data-ttu-id="77cd2-318">Решение. Убедитесь, что доступен достаточный объем системных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="77cd2-318">Solution: Verify that sufficient system resources are available.</span></span> |
| <span data-ttu-id="77cd2-319">-112</span><span class="sxs-lookup"><span data-stu-id="77cd2-319">-112</span></span> |<span data-ttu-id="77cd2-320">Общая ошибка</span><span class="sxs-lookup"><span data-stu-id="77cd2-320">General error</span></span> |

### <a name="local-log-extraction"></a><span data-ttu-id="77cd2-321">Извлечение локального журнала</span><span class="sxs-lookup"><span data-stu-id="77cd2-321">Local Log Extraction</span></span>
<span data-ttu-id="77cd2-322">Привет, агент мониторинга собирает журналы и артефактам, как `.tsf` файлы.</span><span class="sxs-lookup"><span data-stu-id="77cd2-322">hello monitoring agent collects logs and artifacts as `.tsf` files.</span></span> <span data-ttu-id="77cd2-323">`.tsf` Файл TSF недоступен для чтения, но его можно преобразовать в формат CSV с помощью `.csv` следующей служебной программы:</span><span class="sxs-lookup"><span data-stu-id="77cd2-323">`.tsf` file is not readable but you can convert it into a `.csv` as follows:</span></span> 

```
<Azure diagnostics extension package>\Monitor\x64\table2csv.exe <relevantLogFile>.tsf
```
<span data-ttu-id="77cd2-324">Новый файл с именем `<relevantLogFile>.csv` будет создан в hello же пути, что и соответствующий hello `.tsf` файла.</span><span class="sxs-lookup"><span data-stu-id="77cd2-324">A new file called `<relevantLogFile>.csv` will be created in hello same path as hello corresponding `.tsf` file.</span></span>

<span data-ttu-id="77cd2-325">**Примечание**: достаточно toorun этой программы с файлом основного tsf hello (например, PerformanceCountersTable.tsf).</span><span class="sxs-lookup"><span data-stu-id="77cd2-325">**NOTE**: You only need toorun this utility against hello main tsf file (e.g., PerformanceCountersTable.tsf).</span></span> <span data-ttu-id="77cd2-326">Hello, сопровождающие файлов (например, PerformanceCountersTables_\*\*001.tsf PerformanceCountersTables_\*\*002. tsf и т.д.) автоматически будут обрабатываться.</span><span class="sxs-lookup"><span data-stu-id="77cd2-326">hello accompanying files (e.g., PerformanceCountersTables_\*\*001.tsf, PerformanceCountersTables_\*\*002.tsf etc.) will automatically be processed.</span></span>

### <a name="more-about-trace-logs-missing"></a><span data-ttu-id="77cd2-327">Подробные сведения об отсутствии журналов трассировки</span><span class="sxs-lookup"><span data-stu-id="77cd2-327">More About Trace Logs Missing</span></span>

<span data-ttu-id="77cd2-328">**Примечание:** это главным образом относится toocloud службы только в том случае, если вы настроили hello DiagnosticsMonitorTraceListener приложения, запущенного на ВМ IaaS.</span><span class="sxs-lookup"><span data-stu-id="77cd2-328">**Note:** This mostly applies toocloud services only unless you have configured hello DiagnosticsMonitorTraceListener on an application running on your IaaS VM.</span></span> 

- <span data-ttu-id="77cd2-329">Убедитесь, что в hello web.config или app.config настроен DiagnosticMonitorTraceListener приветствия.  Эта конфигурация используется по умолчанию в проектах облачных служб, но некоторые клиенты закомментируйте его out, что вызовет toonot операторы трассировки hello будут собираться средствами диагностики.</span><span class="sxs-lookup"><span data-stu-id="77cd2-329">Make sure hello DiagnosticMonitorTraceListener is configured in hello web.config or app.config.  This is configured by default in cloud service projects, but some customers comment it out which will cause hello trace statements toonot be collected by diagnostics.</span></span> 
- <span data-ttu-id="77cd2-330">Если журналы не начало записываются из метода OnStart или выполнения hello убедитесь, что hello DiagnosticMonitorTraceListener находится в файле app.config hello.  По умолчанию он находится в файле web.config hello, но, применяется только toocode, запущенного в рамках w3wp.exe; Поэтому необходимо в трассировках toocapture app.config, запущенных в WaIISHost.exe.</span><span class="sxs-lookup"><span data-stu-id="77cd2-330">If logs are not getting written from hello OnStart or Run method make sure hello DiagnosticMonitorTraceListener is in hello app.config.  By default it is in hello web.config, but that only applies toocode running within w3wp.exe; so you need it in app.config toocapture traces running in WaIISHost.exe.</span></span>
- <span data-ttu-id="77cd2-331">Убедитесь, что вы используете Diagnostics.Trace.TraceXXX, а не Diagnostics.Debug.WriteXXX.</span><span class="sxs-lookup"><span data-stu-id="77cd2-331">Make sure you are using Diagnostics.Trace.TraceXXX instead of Diagnostics.Debug.WriteXXX.</span></span>  <span data-ttu-id="77cd2-332">Hello отладочные операторы будут удалены из выпуска.</span><span class="sxs-lookup"><span data-stu-id="77cd2-332">hello Debug statements will be removed from a Release build.</span></span>
- <span data-ttu-id="77cd2-333">Убедитесь, что код компилируется hello фактически имеет hello Diagnostics.Trace строки (используйте Reflector, ildasm или ILSpy tooverify).</span><span class="sxs-lookup"><span data-stu-id="77cd2-333">Make sure hello compiled code actually has hello Diagnostics.Trace lines (use Reflector, ildasm or ILSpy tooverify).</span></span>  <span data-ttu-id="77cd2-334">Diagnostics.Trace команды удаляются из hello скомпилированные двоичные, если не используется символ условной компиляции hello ТРАССИРОВКИ.</span><span class="sxs-lookup"><span data-stu-id="77cd2-334">Diagnostics.Trace commands are removed from hello compiled binary unless you use hello TRACE conditional compilation symbol.</span></span>  <span data-ttu-id="77cd2-335">Если с помощью msbuild toobuild hello проекта это можно сделать общие проблемы toorun в.</span><span class="sxs-lookup"><span data-stu-id="77cd2-335">If using msbuild toobuild hello project then this is a common problem toorun into.</span></span>

## <a name="known-issues-and-mitigations"></a><span data-ttu-id="77cd2-336">Известные проблемы и устранения рисков</span><span class="sxs-lookup"><span data-stu-id="77cd2-336">Known Issues and Mitigations</span></span>
<span data-ttu-id="77cd2-337">Ниже приведен список известных проблем и способы их устранения.</span><span class="sxs-lookup"><span data-stu-id="77cd2-337">Here is a list of known issues with known mitigations:</span></span>

<span data-ttu-id="77cd2-338">**1. Зависимость от .NET 4.5.**</span><span class="sxs-lookup"><span data-stu-id="77cd2-338">**1. .NET 4.5 dependency:**</span></span>

<span data-ttu-id="77cd2-339">Система диагностики Azure имеет зависимость среды выполнения на платформе .NET 4.5 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="77cd2-339">WAD has a runtime dependency on .NET 4.5 framework or above.</span></span> <span data-ttu-id="77cd2-340">Во время написания это hello всех машин, подготовленных для облачных служб, а также все официальный azure образы виртуальных машин базового .NET 4.5 или выше установлена.</span><span class="sxs-lookup"><span data-stu-id="77cd2-340">At hello time of writing this, all machines provisioned for cloud services as well as all official azure Virtual Machine base images have .NET 4.5 or above installed.</span></span> <span data-ttu-id="77cd2-341">Это, однако по-прежнему возможно tooland в ситуации, где повторите toorun WAD на компьютере, где нет .NET 4.5 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="77cd2-341">It is still however possible tooland in a situation where you try toorun WAD on a machine which does not have .NET 4.5 or above.</span></span> <span data-ttu-id="77cd2-342">Например, если создаете виртуальную машину на основе старого образа (моментального снимка) или с помощью собственного диска.</span><span class="sxs-lookup"><span data-stu-id="77cd2-342">This happens when you create your machine off of an old image or snapshot; or bring your own custom disk.</span></span>

<span data-ttu-id="77cd2-343">В этом случае при запуске DiagnosticsPluginLauncher.exe возвращается код выхода **255**.</span><span class="sxs-lookup"><span data-stu-id="77cd2-343">This generally manifests as an exit code **255** when running DiagnosticsPluginLauncher.exe.</span></span> <span data-ttu-id="77cd2-344">Происходит сбой из-за toohello необработанное исключение:</span><span class="sxs-lookup"><span data-stu-id="77cd2-344">Failure happens due toohello unhandled exception:</span></span> 
```
System.IO.FileLoadException: Could not load file or assembly 'System.Threading.Tasks, Version=1.5.11.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' or one of its dependencies
```

<span data-ttu-id="77cd2-345">**Устранение.** Установите на виртуальной машине платформу .NET 4.5 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="77cd2-345">**Mitigation:** Install .NET 4.5 or higher on your machine.</span></span>

<span data-ttu-id="77cd2-346">**2. Данные счетчиков производительности доступные в хранилище, но не отображаются на портале.**</span><span class="sxs-lookup"><span data-stu-id="77cd2-346">**2. Performance Counters data available in storage but not showing in portal**</span></span>

<span data-ttu-id="77cd2-347">На портале виртуальных машин данные определенных счетчиков производительности отображаются по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="77cd2-347">Virtual machines portal experience shows certain performance counters by default.</span></span> <span data-ttu-id="77cd2-348">Если вы не видите их и известно, что данные hello начало формируются, так как он доступен в хранилище.</span><span class="sxs-lookup"><span data-stu-id="77cd2-348">If you don't see them and you know hello data is getting generated because it is available in storage.</span></span> <span data-ttu-id="77cd2-349">Убедитесь, что:</span><span class="sxs-lookup"><span data-stu-id="77cd2-349">Check:</span></span>
- <span data-ttu-id="77cd2-350">Если имена счетчиков hello данных в хранилище на английском языке.</span><span class="sxs-lookup"><span data-stu-id="77cd2-350">If hello data in storage has counter names in English.</span></span> <span data-ttu-id="77cd2-351">Если имена счетчиков hello не на английском языке, портала метрики диаграммы не будет возможности toorecognize его.</span><span class="sxs-lookup"><span data-stu-id="77cd2-351">If hello counter names are not in English, portal metric chart will not be able toorecognize it.</span></span>
- <span data-ttu-id="77cd2-352">Если вы используете подстановочные знаки (\*) в именах счетчик производительности, hello портал не будет hello может toocorrelate настроен и собранных счетчиков.</span><span class="sxs-lookup"><span data-stu-id="77cd2-352">If you are using wild cards (\*) in your performance counter names, hello portal will not be able toocorrelate hello configured and collected counter.</span></span>

<span data-ttu-id="77cd2-353">**Устранение рисков**: изменение hello машины tooEnglish язык для системных учетных записей.</span><span class="sxs-lookup"><span data-stu-id="77cd2-353">**Mitigation**: Change hello machine's language tooEnglish for system accounts.</span></span> <span data-ttu-id="77cd2-354">Панель управления -> области Администрирование -> Копировать параметры -> снимите флажок «Приветствие экрана и системных учетных записей», чтобы пользовательский язык hello не применены toosystem учетной записи.</span><span class="sxs-lookup"><span data-stu-id="77cd2-354">Control Panel -> Region -> Administrative -> Copy Settings -> uncheck "Welcome screen and system accounts" so that hello custom language is not applied toosystem account.</span></span> <span data-ttu-id="77cd2-355">Также убедитесь, что если требуется портала toobe работы основной потребления подстановочные знаки не используется.</span><span class="sxs-lookup"><span data-stu-id="77cd2-355">Also make sure you do not use wild cards if you want portal toobe your primary consumption experience.</span></span>
