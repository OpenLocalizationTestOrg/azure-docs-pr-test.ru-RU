---
title: "Обозреватель метрик Azure Monitor | Документация Майкрософт"
description: "Узнайте о новых возможностях обозревателя метрик Azure Monitor"
author: vgorbenko
manager: Victor.Mushkatin
editor: mrbullwinkle
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 2397596a-071f-4d49-8893-bec5f735bd7b
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/17/2017
ms.author: vitaly.gorbenko
ms.openlocfilehash: 537dd6d64fe49093dd73d8040cde5a9153a7bd5c
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-monitor-metrics-explorer"></a>Обозреватель метрик Azure Monitor

В этом руководстве описывается работа с диаграммами метрик Azure Monitor следующего поколения, которые сейчас находятся в предварительной версии. Новый интерфейс поддерживает преобразование для просмотра диаграмм многомерных метрик и основных метрик без измерений. Вы можете графически показать диаграммы, в которых накладываются метрики разных типов ресурсов, нескольких групп ресурсов и подписок. Диаграммы многомерных метрик можно настроить путем применения фильтров измерения, а также группирования. Все диаграммы, включая настраиваемые, можно закрепить на панели мониторинга.

Дополнительные сведения о старом интерфейсе, который поддерживает только базовые метрики без измерений, см. в разделе "Доступ к метрикам через портал" в руководстве [Обзор метрик в Microsoft Azure](https://docs.microsoft.com/azure/monitoring-and-diagnostics/monitoring-overview-metrics).

## <a name="what-is-azure-monitor-metrics-explorer"></a>Что такое обозреватель метрик Azure Monitor?

Обозреватель метрик Azure Monitor является компонентом портала Microsoft Azure, который позволяет создавать диаграммы, визуально коррелируемые тренды и изучать пики и спады в значениях метрик. Обозреватель метрик является важной отправной точкой при изучении различных проблем производительности и доступности приложений и инфраструктуры, размещенных в Azure или отслеживаемых службами Azure Monitor. 

## <a name="what-are-metrics-in-azure"></a>Что такое метрики в Azure?

Метрики в Microsoft Azure — это ряд измеренных значений и счетчиков, которые собираются и сохраняются в течение определенного времени. Существуют стандартные метрики (или "метрики платформы") и настраиваемые метрики. Стандартные метрики предоставляет платформа Azure. Стандартные метрики показывают работоспособность и статистику потребления ресурсов Azure. При отправке настраиваемой метрики в Azure приложения используют [API Application Insights для пользовательских событий](https://docs.microsoft.com/azure/application-insights/app-insights-api-custom-events-metrics). Настраиваемые метрики хранятся в ресурсах Application Insights вместе с другими метриками для конкретного приложения.

## <a name="what-are-multi-dimensional-metrics"></a>Что такое многомерные метрики?

Сейчас множество ресурсов Azure предоставляют многомерные метрики. Эти метрики отслеживают несколько рядов значений для одного или нескольких именованных измерений. Например, метрика "Доступно места на диске" может иметь измерение с названием "Диск" со значениями "C:", "D:". Такая метрика позволяет просматривать доступное место на всех дисках или на каждом отдельном диске. 

В приведенном ниже примере показано два набора данных для гипотетической метрики под названием "Пропускная способность сети". В первом наборе данных нет измерений. Во втором наборе данных показаны значения с двумя измерениями, "IP-адрес" и "Направление":

### <a name="network-throughput"></a>Пропускная способность сети
(В этой метрике нет измерений)

 |Timestamp        | Значение метрики | 
   | ------------- |:-------------| 
   | 8/9/2017 8:14 | 1331,8 Кбит/с | 
   | 8/9/2017 8:15 | 1141,4 Кбит/с |
   | 8/9/2017 8:16 | 1110,2 Кбит/с |

Такая метрика без измерений поможет найти ответ только на простые вопросы, например о том, какой была пропускная способность в определенный момент времени.

### <a name="network-throughput--two-dimensions-ip-and-direction"></a>Пропускная способность сети и два измерения ("IP-адрес" и "Направление")

| Timestamp          | Измерение "IP-адрес" | Измерение "Направление" | Значение метрики| 
   | ------------- |:-----------------|:------------------- |:-----------|  
   | 8/9/2017 8:14 | IP-адрес — 192.168.5.2 | Направление — отправка    | 646,5 Кбит/с |
   | 8/9/2017 8:14 | IP-адрес — 192.168.5.2 | Направление — получение | 420,1 Кбит/с |
   | 8/9/2017 8:14 | IP-адрес — 10.24.2.15  | Направление — отправка    | 150,0 Кбит/с | 
   | 8/9/2017 8:14 | IP-адрес — 10.24.2.15  | Направление — получение | 115,2 Кбит/с |
   | 8/9/2017 8:15 | IP-адрес — 192.168.5.2 | Направление — отправка    | 515,2 Кбит/с |
   | 8/9/2017 8:15 | IP-адрес — 192.168.5.2 | Направление — получение | 371,1 Кбит/с |
   | 8/9/2017 8:15 | IP-адрес — 10.24.2.15  | Направление — отправка    | 155,0 Кбит/с |
   | 8/9/2017 8:15 | IP-адрес — 10.24.2.15  | Направление — получение | 100,1 Кбит/с |

Эта метрика поможет найти ответ на вопросы о том, какая пропускная способность для каждого IP-адреса и сколько данных было отправлено и получено. Многомерные метрики имеют дополнительные значения аналитики и диагностики в отличие от метрик без измерений. 

## <a name="how-do-i-create-a-new-chart"></a>Как создать диаграмму?

   > [!NOTE]
   > Некоторые функции старых метрик еще недоступны в новом обозревателе метрик. Пока новые возможности находятся в предварительной версии, можно продолжать использовать старые представления метрик (без измерений) в Azure Monitor. 

1. Откройте портал Azure.
2. Перейдите к новой вкладке **Монитор** и выберите **Metrics (preview)** (Метрики (предварительная версия)).

   ![Изображение предварительной версии метрик](./media/monitoring-metric-charts/001.png)

3. Автоматически откроется **селектор метрик**. Выберите ресурс из списка, чтобы просмотреть связанные с ним метрики. В списке будут показаны только ресурсы с метриками.

   ![Изображение предварительной версии метрик](./media/monitoring-metric-charts/002.png)

   > [!NOTE]
   >При наличии нескольких подписок Azure обозреватель метрик извлекает ресурсы из всех подписок, заданных в разделе "Параметры портала -> Filter by subscriptions list" (Фильтровать по списку подписок). Чтобы изменить это, щелкните значок шестеренки параметров портала в верхней части экрана и выберите подписку, которую необходимо использовать.

4. Для некоторых типов ресурсов (например, учетные записи хранения и виртуальные машины) перед выбором метрики нужно выбрать **Sub Service** (Подслужба). Каждая подслужба имеет собственный набор метрик, имеющих отношение только к данной подслужбе, а не к другим подслужбам.

   Например, каждая служба хранилища Azure имеет метрики для подслужб "Большие двоичные объекты", "Файлы", "Очереди" и "Таблицы", которые являются частями учетной записи хранения. Однако метрика "Число сообщений в очереди" применяется исключительно к подслужбе "Очередь", а не к любым другим подслужбам ученой записи хранения.

   ![Изображение предварительной версии метрик](./media/monitoring-metric-charts/003.png)

5. Выберите метрику из списка. Если вы знаете часть имени требуемой метрики, можно начать вводить ее, чтобы просмотреть отфильтрованный список доступных метрик:

   ![Изображение предварительной версии метрик](./media/monitoring-metric-charts/004.png)

6. После выбора метрики диаграмма будет преобразована для просмотра агрегирования по умолчанию. На этом этапе можно щелкнуть за пределами **селектора метрик**, чтобы закрыть его. Диаграммы также при необходимости можно переключить на другое агрегирование. Для некоторых метрик при переключении агрегирования можно выбрать значение, которое нужно показать на диаграмме. Например, можно переключаться между средними, минимальными и максимальными значениями. 

7. При нажатии значка "Добавить метрику" ![значок метрики](./media/monitoring-metric-charts/icon001.png) и повторении действий 3–6 можно добавить дополнительные метрики на одну диаграмму.

   > [!NOTE]
   > Как правило, метрики с различными единицами измерения (например, миллисекундами и килобайтами) или значительно отличающимися масштабами на одной диаграмме не требуются. Вместо этого следует использовать несколько диаграмм. Нажмите кнопку Add Chart (Добавить диаграмму), чтобы создать несколько диаграмм в обозревателе метрик.

## <a name="how-do-i-apply-filters-to-the-charts"></a>Применение фильтров к диаграммам

К диаграммам, на которых показаны метрики с измерениями, можно применить фильтры. Например, если метрика "Счетчик транзакций" имеет измерение "Тип ответа", которое указывает, успешен ли ответ от транзакции, тогда при фильтрации по этому измерению будет создана диаграмма только для успешных (или только неудачных) транзакций. 

### <a name="to-add-a-filter"></a>Добавление фильтра

1. Щелкните значок "Добавить фильтр" ![значок фильтра](./media/monitoring-metric-charts/icon002.png) над диаграммой.

2. Выберите измерение (свойство), которое необходимо отфильтровать.

   ![изображение метрики](./media/monitoring-metric-charts/006.png)

3. Выберите значения измерения, которые нужно включить при создании диаграммы (в этом примере показаны отфильтрованные успешные транзакции с хранилищем):

   ![изображение метрики](./media/monitoring-metric-charts/007.png)

4. Выбрав значения фильтра, щелкните за пределами средства выбора фильтра, чтобы закрыть его. Теперь на диаграмме показано, сколько транзакций с хранилищем не удалось выполнить:

   ![изображение метрики](./media/monitoring-metric-charts/008.png)

5. Шаги 1–4 можно повторить, чтобы применить несколько фильтров к одной диаграмме.

## <a name="how-do-i-segment-a-chart"></a>Сегментирование диаграммы

Метрики можно разделить по измерениям, чтобы визуализировать сравнения между различными сегментами метрики и идентифицировать внешние сегменты измерения. 

### <a name="to-segment-a-chart"></a>Сегментирование диаграммы

1. Щелкните значок "Добавление группирования"  ![изображение метрики](./media/monitoring-metric-charts/icon003.png) над диаграммой.
 
   > [!NOTE]
   > На одной диаграмме может использоваться несколько фильтров, но только одно группирование.

2. Выберите измерения, по которому необходимо сегментировать диаграммы: 

   ![изображение метрики](./media/monitoring-metric-charts/010.png)

   Теперь на диаграмме отображаются несколько строк, по одной для каждого сегмента измерения:

   ![изображение метрики](./media/monitoring-metric-charts/012.png)

3. Щелкните за пределами **селектора группирования**, чтобы закрыть его.

   > [!NOTE]
   > С помощью фильтрации и группировки одного измерения можно скрыть сегменты, которые не имеют значения для сценария, и облегчить анализ диаграмм.

## <a name="how-do-i-pin-charts-to-dashboards"></a>Закрепление диаграмм на панели мониторинга

После настройки диаграмм их можно добавить на панели мониторинга, чтобы их можно было просмотреть повторно, возможно, в контексте другой телеметрии мониторинга или совместно с другими участниками команды. 

Чтобы закрепить настроенную диаграмму на панели мониторинга, сделайте следующее:

После настройки диаграммы щелкните меню **Chart Actions** (Действия на диаграмме) в правом верхнем углу диаграммы и выберите **Закрепить на панели мониторинга**.

   ![изображение метрики](./media/monitoring-metric-charts/013.png)

## <a name="next-steps"></a>Дальнейшие действия

  Дополнительные сведения о рекомендациях по созданию готовых к работе панелей мониторинга с метриками см. в статье [Create custom KPI dashboards using Azure Application Insights](https://docs.microsoft.com/azure/application-insights/app-insights-tutorial-dashboards) (Создание пользовательских панелей мониторинга KPI с помощью Azure Application Insights).