---
title: "Мониторинг в Microsoft Azure | Документация Майкрософт"
description: "Варианты мониторинга в Microsoft Azure. Azure Monitor, Application Insights, Log Analytics"
author: rboucher
manager: carmonm
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 1b962c74-8d36-4778-b816-a893f738f92d
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/12/2017
ms.author: robb
ms.openlocfilehash: d4a94a92585420cf92018084437422fd0c66fa2d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="overview-of-monitoring-in-microsoft-azure"></a>Обзор мониторинга в Microsoft Azure
В этой статье представлены общие сведения о средствах мониторинга в Microsoft Azure. Их можно применить для: 
- отслеживания приложений, выполняющихся в Microsoft Azure; 
- средств и служб, работающих вне среды Azure, которые могут отслеживать объекты в Azure. 

Здесь описываются доступные продукты и службы, а также их совместное использование. Эта статья поможет определить наиболее подходящие средства для тех или иных сценариев использования.  

## <a name="why-use-monitoring-and-diagnostics"></a>Преимущества мониторинга и диагностики

Проблемы с производительностью в облачном приложении могут повлиять на работу вашей компании. Несколько взаимосвязанных компонентов и частые выпуски могут в любое время привести к снижению производительности. В разработанном приложении пользователи, как правило, находят проблемы, которые не были обнаружены во время тестирования. Вы должны немедленно получать о них сведения и применять средства для их диагностики и устранения. Microsoft Azure имеет широкий спектр средств для обнаружения проблем.

## <a name="how-do-i-monitor-my-azure-cloud-apps"></a>Как отслеживать облачные приложения Azure?

Существует широкий спектр средств для мониторинга приложений и служб Azure. Некоторые их функции перекрываются. Это в определенной степени обусловлено причинами исторического характера и частично проблемами расхождения в выполнении приложения на стадии разработки и во время эксплуатации. 

Ниже приведены основные средства.

-   **Azure Monitor** — это основное средство для отслеживания служб, выполняемых в Azure. Оно предоставляет данные уровня инфраструктуры о пропускной способности службы и окружающей среды. Если вы управляете всеми приложениями в Azure, увеличьте или уменьшите масштаб ресурсов, после чего Azure Monitor предоставит необходимые средства для начала работы.

-   **Application Insights** можно использовать для разработки и в качестве решения для мониторинга рабочей среды. Установите пакет в приложение, чтобы запустить это средство и получить внутренне представление о его работе. Это средство формирует такие данные, как время отклика зависимостей, трассировки исключений, моментальные снимки отладки и профили выполнения. Оно предоставляет эффективные интеллектуальные средства для анализа всех данных телеметрии, чтобы помочь в отладке приложения и обеспечить видимость его использования пользователями. Вы можете определить, вызвано ли увеличение времени отклика проблемой с приложением или проблемой с внешними ресурсами. Если используется Visual Studio и приложение находится в неисправном состоянии, вы можете перейти непосредственно к неисправной строке кода, чтобы устранить проблему.  

-   **Служба Log Analytics** предназначена для пользователей, которым необходимо настроить производительность и запланировать обслуживание приложений, выполняющихся в рабочей среде. Она работает на базе Azure. Эта служба собирает данные из множества источников и выполняет их статическое вычисление (с задержкой 10–15 минут). Она предоставляет целостное решение для управления ИТ-средой в Azure, а также в локальной среде и сторонней облачной инфраструктуре (например, Amazon Web Services). Эта служба предоставляет расширенные средства для анализа данных в нескольких источниках, позволяет использовать сложные запросы во всех журналах и может отправлять упреждающие оповещения при выполнении указанных условий.  Вы даже можете собирать пользовательские данные в центральном репозитории, чтобы иметь возможность запрашивать их и выполнять визуализацию. 

-   **System Center Operations Manager (SCOM)** предназначен для отслеживания крупных облачных установок и управления ими. Возможно, вы уже использовали эту службу в качестве средства управления для локальных облаков на базе Windows Sever и Hyper-V, однако с ее помощью также можно выполнить интеграцию и администрирование приложений Azure. Помимо прочего, она позволяет установить Application Insights в имеющихся интерактивных приложениях.  Если приложение выйдет из строя, вы сразу же об этом узнаете. Обратите внимание, что Log Analytics не заменяет SCOM. Эти службы можно использовать совместно.  


## <a name="accessing-monitoring-in-the-azure-portal"></a>Получение доступа к мониторингу на портале Azure
Все службы мониторинга Azure теперь доступны на одной панели пользовательского интерфейса. Дополнительные сведения о доступе к этой области см. в статье [Приступая к работе с Azure Monitor](monitoring-get-started.md). 

Кроме того, вы также можете получить доступ к функциям мониторинга для определенных ресурсов. Для этого нужно выделить эти ресурсы и перейти к доступным параметрам мониторинга. 

## <a name="examples-of-when-to-use-which-tool"></a>Примеры использования средств 

Здесь описаны некоторые основные сценарии и приведены сведения о средствах, которые можно использовать совместно. 

### <a name="scenario-1--fix-errors-in-an-azure-application-under-development"></a>Сценарий 1. Исправление ошибок в приложениях Azure, которые находятся на стадии разработки   

**Application Insights, Azure Monitor и Visual Studio лучше всего использовать совместно.**

Теперь Azure предоставляет полный спектр возможностей отладчика Visual Studio в облаке. Настройте Azure Monitor, чтобы отправлять данные телеметрии в Application Insights. С помощью Visual Studio можно включить пакет SDK для Application Insights в ваше приложение. В Application Insights можно использовать схему сопоставления приложений, чтобы визуально обнаружить, какие части работающего приложения неработоспособны. Вы можете исследовать ошибки и исключения неработоспособных частей приложения. С помощью различных аналитик в Application Insights можно получить более подробную информацию. Если вы не владеете сведениями об ошибке, используйте отладчик Visual Studio, чтобы выполнить трассировку кода и вычислить источник проблемы. 

Дополнительные сведения см. в статье [Мониторинг производительности веб-приложения Azure](../application-insights/app-insights-azure-web-apps.md). Ознакомьтесь также с инструкциями для различных типов приложений и языков, для чего воспользуйтесь оглавлением слева.  

### <a name="scenario-2--debug-an-azure-net-web-application-for-errors-that-only-show-in-production"></a>Сценарий 2. Отладка веб-приложения Azure .NET на наличие ошибок, которые отображаются только в рабочей среде 

> [!NOTE]
> Эти функции работают в режиме предварительной версии. 

**Лучше всего использовать Application Insights и, если возможно, Visual Studio. Так вы сможете воспользоваться всеми возможностями отладки.**

Используйте отладчик моментальных снимков Application Insights для отладки приложения. При достижении определенного порогового значения ошибки, связанной с компонентами рабочей среды, система автоматически фиксирует данные телеметрии (создает моментальный снимок) в этот промежуток времени. Зафиксированный объем данных безопасный для рабочего облака, так как он мал для того, чтобы повлиять на производительность. Однако этих данных достаточно, чтобы выполнить трассировку.  Система может зафиксировать несколько моментальных снимков. Вы можете просмотреть моментальные снимки за определенный момент времени на портале Azure или использовать Visual Studio, чтобы воспользоваться всеми возможностями отладки. С помощью Visual Studio разработчики могут рассмотреть моментальный снимок так, как если бы отладка выполнялась в реальном времени. При этом доступны локальные переменные, параметры, память и фреймы. Разработчикам можно предоставить доступ к данным в рабочей среде через роль RBAC.  

Дополнительные сведения см. в статье [Debug Snapshots on Exceptions in .NET Apps](../application-insights/app-insights-snapshot-debugger.md) (Отладка моментальных снимков исключений в приложениях .NET). 

### <a name="scenario-3--debug-an-azure-application-that-uses-containers-or-microservices"></a>Сценарий 3. Отладка приложения Azure, использующего контейнеры или микрослужбы 

**Этот сценарий аналогичен сценарию 1. Application Insights, Azure Monitor и Visual Studio лучше всего использовать совместно.** Application Insights также поддерживает сбор данных телеметрии из процессов, выполняющихся в контейнерах и микрослужбах (Kubernetes, Docker, Azure Service Fabric). Дополнительные сведения см. в статье [Debug Snapshots on Exceptions in .NET Apps](https://go.microsoft.com/fwlink/?linkid=848184) (Отладка моментальных снимков исключений в приложениях .NET). 


### <a name="scenario-4--fix-performance-issues-in-your-azure-application"></a>Сценарий 4. Устранение проблем производительности в приложении Azure

[Профилировщик Application Insights](../application-insights/app-insights-profiler.md) помогает устранить эти типы проблем. Вы можете определить и устранить проблемы с производительностью в приложениях, работающих в службах приложений (веб-приложения, Logic Apps, мобильные приложения, приложения API) и в других вычислительных ресурсах (например, виртуальные машины, масштабируемые наборы виртуальных машин, облачные службы и Service Fabric). 

> [!NOTE]
> Возможность профилирования виртуальных машин, масштабируемых наборов виртуальных машин, облачных служб и Service Fabric предоставляется в предварительной версии.   

Кроме того, вы будете заранее получать уведомления по электронной почте об определенных типах ошибок, например о длительном времени загрузки страниц, с помощью средства интеллектуального обнаружения.  Это средство не нуждается в настройке. Дополнительные сведения см. в статье [Интеллектуальное обнаружение. Аномалии производительности](../application-insights/app-insights-proactive-performance-diagnostics.md) и в [этой записи блога](https://azure.microsoft.com/blog/Enhancments-ApplicationInsights-SmartDetection/preview).



## <a name="next-steps"></a>Дальнейшие действия
Кроме того, вы можете узнать больше о:

* [Azure Monitor на видео с конференции Ignite 2016](https://myignite.microsoft.com/videos/4977)
* [Приступая к работе с Azure Monitor](monitoring-get-started.md)
* [Системе диагностики Azure](../azure-diagnostics.md), если вы пытаетесь диагностировать проблемы в работе облачной службы, виртуальной машины, масштабируемого набора виртуальных машин или приложения Service Fabric.
* [Application Insights](https://azure.microsoft.com/documentation/services/application-insights/) , если вы пытаетесь диагностировать проблемы в работе веб-приложения службы приложений.
* [Log Analytics](https://azure.microsoft.com/documentation/services/log-analytics/) и решение для мониторинга рабочей среды [Operations Management Suite](https://www.microsoft.com/oms/).