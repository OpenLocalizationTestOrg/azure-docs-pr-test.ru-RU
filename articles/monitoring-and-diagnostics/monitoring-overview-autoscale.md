---
title: "aaaOverview для автоматического масштабирования в виртуальных машинах Microsoft Azure, облачных служб и веб-приложений | Документы Microsoft"
description: "Обзор автомасштабирования в Microsoft Azure. Применяет tooVirtual машины, облачных служб и веб-приложений."
author: rboucher
manager: carmonm
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 74bf03be-e658-4239-a214-c12424b53e4c
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/02/2016
ms.author: robb
ms.openlocfilehash: ef68b722ea22c4149a7d7a89c5855ba761db9247
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="overview-of-autoscale-in-microsoft-azure-virtual-machines-cloud-services-and-web-apps"></a>Обзор автомасштабирования в виртуальных машинах, облачных службах и веб-приложениях Microsoft Azure
Эта статья описывает, какие автомасштабирования Microsoft Azure имеет свои преимущества и как tooget запущена с его помощью.  

Azure автомасштабирования монитор также применяется только[наборы масштабирования виртуальных машин](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [облачные службы](https://azure.microsoft.com/services/cloud-services/), и [службы приложений — веб-приложений](https://azure.microsoft.com/services/app-service/web/).

> [!NOTE]
> В Azure доступно два способа автомасштабирования. Старая версия автомасштабирования применяется машины tooVirtual (группы доступности). Эта функция имеет ограниченную поддержку, и мы рекомендуем перенос масштабирования машины toovirtual задает для поддержки более быстрый и надежный автомасштабирования. Ссылка на как toouse hello старая технология входит в этой статье.  
>
>

## <a name="what-is-autoscale"></a>Основные сведения об автомасштабировании
Автомасштабирование можно toohave hello нужных объемов ресурсов выполнения toohandle hello нагрузки приложения. Она позволяет tooadd ресурсов toohandle увеличению загрузки и также сократить затраты путем удаления ресурсов, которые режиме ожидания. Укажите минимальное и максимальное число экземпляров toorun и добавлении или удалении виртуальных машин, автоматически на основе набора правил. Если указано минимальное количество, приложение работает всегда, даже при отсутствии нагрузки. Максимальное количество, в свою очередь, ограничивает общую возможную почасовую стоимость. Используя созданные вами правила, система автоматически масштабирует ресурсы в диапазоне двух предельных значений.

 ![Объяснение автомасштабирования. Добавление и удаление виртуальных машин](./media/monitoring-overview-autoscale/AutoscaleConcept.png)

Когда условия правил выполняются, активируется одно или несколько действий автомасштабирования. К ним относятся добавление и удаление виртуальных машин, а также другие настраиваемые действия. Hello следующей концептуальной схеме показан этот процесс.  

 ![Схема потока автомасштабирования](./media/monitoring-overview-autoscale/Autoscale_Overview_v4.png)

Hello описание далее применяется toohello части hello предыдущей диаграмме.   

## <a name="resource-metrics"></a>Метрики ресурсов
Ресурсы выдают метрики, которые позже обрабатываются с помощью правил. Метрики можно получить различными способами.
Наборы масштабирования виртуальных машин используйте данные телеметрии от агентов диагностики Azure, в то время как поступающие данные телеметрии для облачных служб и веб-приложений непосредственно из hello инфраструктуры Azure. К некоторым часто используемым статистическим сведениям относятся загрузка ЦП, использование памяти, число потоков, длина очереди и использование диска. Список данных телеметрии, которые можно использовать, см. в статье об [общих метриках автомасштабирования в Azure Monitor](insights-autoscale-common-metrics.md).

## <a name="custom-metrics"></a>Пользовательские метрики
Вы также можете использовать собственные пользовательские метрики, выдаваемые приложениями. Если вы настроили toosend tooApplication метрики аналитики могут использовать эти решения toomake метрик, следует ли вашего приложения tooscale или нет. 

## <a name="time"></a>Время
В правилах на основе расписания используется формат UTC. При настройке правил необходимо правильно задать свой часовой пояс.  

## <a name="rules"></a>Правила
Hello показан только одно правило автоматического масштабирования, но может иметь большое их количество. При необходимости для конкретной ситуации можно создать сложные перекрывающиеся правила.  Правила бывают следующих типов:  

* **на основе метрики** , например выполнение определенного действия при загрузке ЦП более чем на 50 %;
* **на основе времени** , например активация webhook каждую субботу в 8:00 в заданном часовом поясе.

Правила на основе метрик измеряют нагрузку приложений и в зависимости от нагрузки добавляют или удаляют виртуальные машины. Правила на основе расписания позволяют tooscale при времени закономерностей в нагрузочных и хотите tooscale перед увеличение возможную нагрузку, или происходит.  

## <a name="actions-and-automation"></a>Действия и автоматизация
Правила могут вызвать одно или несколько типов действий:

* **Масштабирование** — свертывание или развертывание виртуальных машин.
* **По электронной почте** -отправки электронной почты администраторов toosubscription, соадминистраторы и/или дополнительный адрес электронной почты можно указать
* **Автоматизация с помощью объектов webhook** — вызов объектов webhook, с помощью которых можно активировать несколько сложных действий в среде Azure и за ее пределами. В Azure можно запустить Runbook службы автоматизации Azure, функции Azure или приложения Azure Logic. К примерам сторонних служб можно отнести Slack и Twilio.

## <a name="autoscale-settings"></a>Параметры автомасштабирования
Автомасштабирование используйте hello ниже терминология и структуры.

- **Параметров автоматического масштабирования** считывается ли hello автомасштабирования ядра toodetermine tooscale вверх или вниз. Он содержит один или несколько профилей, сведения о целевой ресурс hello и параметров уведомлений.

    - **Профиль автомасштабирования** — это комбинация следующих компонентов:

        - **параметр объема**, указывающая минимальные, максимальные hello и значения по умолчанию для количества экземпляров.
        - **набор правил,**, каждый из которых включает триггер (время или метрика) и действие масштабирования (увеличение или уменьшение);
        - сведения о **повторении**, которые определяют, когда именно функция автомасштабирования должна активировать тот или иной профиль.

        Может иметь несколько профилей, позволяющих tootake заботиться о различные перекрывающиеся требования. Может иметь автомасштабирования различные профили для разное время, день или дни недели hello, например.

    - Объект **Настройка уведомлений о** определяет, какие уведомления должно выполняться при возникновении события автомасштабирования основании удовлетворяющие критериям hello один из профилей параметр автомасштабирования hello. Автомасштабирование можно уведомить один или несколько адресов электронной почты или tooone вызовы или дополнительные веб-привязок.


![Структура правил, профилей и параметров автомасштабирования Azure](./media/monitoring-overview-autoscale/AzureResourceManagerRuleStructure3.png)

Hello полный список настраиваемых полей и описания доступен в hello [API-интерфейса REST автомасштабирования](https://msdn.microsoft.com/library/dn931928.aspx).

Примеры кода см. в следующих статьях:

* [Расширенная настройка автомасштабирования с помощью шаблонов Resource Manager для набора масштабирования виртуальных машин](insights-advanced-autoscale-virtual-machine-scale-sets.md)  
* [Create or update an autoscale setting in Azure Insights REST API (Создание и изменение параметров автомасштабирования в REST API Azure Insights)](https://msdn.microsoft.com/library/dn931953.aspx)

## <a name="horizontal-vs-vertical-scaling"></a>Горизонтальное и вертикальное масштабирование
Автомасштабирование только масштабирует по горизонтали, которое увеличивается («out»), или уменьшить («in») в hello количество экземпляров виртуальных Машин.  Горизонтальный более эффективно — в облаке ситуации позволяет toorun тысяч toohandle нагрузки виртуальных машин.

С вертикальным масштабированием дело обстоит иначе. Он сохраняет hello одинаковое число виртуальных машин, но делает hello виртуальные машины более («вверх») или менее («вниз») мощный. Мощность измеряется по объему памяти, скорости ЦП, дисковому пространству и т. д.  Вертикальное масштабирование связано с дополнительными ограничениями. Это зависит от доступности hello больше оборудования, который быстро достигает верхнего предела и меняется в зависимости от региона. Также обычно масштабирование по вертикали требует toostop ВМ и перезапустите.

Дополнительные сведения см. в статье [Вертикальное масштабирование виртуальной машины Azure c помощью службы автоматизации Azure](../virtual-machines/linux/vertical-scaling-automation.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).

## <a name="methods-of-access"></a>Варианты доступа
Автомасштабирование можно настроить с помощью следующих инструментов:

* [Портал Azure](insights-how-to-scale.md)
* [PowerShell](insights-powershell-samples.md#create-and-manage-autoscale-settings)
* [Кроссплатформенный интерфейс командной строки](insights-cli-samples.md#autoscale)
* [Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931953.aspx)

## <a name="supported-services-for-autoscale"></a>Службы, поддерживающие автомасштабирование
| служба | Схемы и документы |
| --- | --- |
| Веб-приложения |[Scaling Web Apps (Масштабирование веб-приложения)](insights-how-to-scale.md) |
| Облачные службы |[Автомасштабирование облачной службы](../cloud-services/cloud-services-how-to-scale.md) |
| Виртуальные машины: классические |[Scaling Classic Virtual Machine Availability Sets (Масштабирование групп доступности классических виртуальных машин)](https://blogs.msdn.microsoft.com/kaevans/2015/02/20/autoscaling-azurevirtual-machines/) |
| Виртуальные машины: масштабируемые наборы Windows |[Масштабирование и масштабируемые наборы виртуальных машин в Windows](../virtual-machine-scale-sets/virtual-machine-scale-sets-windows-autoscale.md) |
| Виртуальные машины: масштабируемые наборы Linux |[Масштабирование и масштабируемые наборы виртуальных машин в Linux](../virtual-machine-scale-sets/virtual-machine-scale-sets-linux-autoscale.md) |
| Виртуальные машины: пример с Windows |[Расширенная настройка автомасштабирования с помощью шаблонов Resource Manager для набора масштабирования виртуальных машин](insights-advanced-autoscale-virtual-machine-scale-sets.md) |

## <a name="next-steps"></a>Дальнейшие действия
toolearn Дополнительные сведения о автоматического масштабирования, используйте hello автомасштабирования пошаговых руководств, перечисленных ранее или ссылаться toohello следующие ресурсы:

* [Общие метрики автомасштабирования Azure Monitor](insights-autoscale-common-metrics.md)
* [Рекомендации по автомасштабированию в Azure Monitor](insights-autoscale-best-practices.md)
* [Использование автоматического масштабирования действия toosend электронной почты и веб-перехватчика уведомлений о предупреждениях](insights-autoscale-to-webhook-email.md)
* [Create or update an autoscale setting in Azure Insights REST API (Создание и изменение параметров автомасштабирования в REST API Azure Insights)](https://msdn.microsoft.com/library/dn931953.aspx)
* [Устранение неполадок при автомасштабировании масштабируемых наборов виртуальных машин](../virtual-machine-scale-sets/virtual-machine-scale-sets-troubleshoot.md)
