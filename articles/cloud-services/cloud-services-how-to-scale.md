---
title: "Автомасштабирование облачной службы на классическом портале | Документация Майкрософт"
description: "(классический) Узнайте, как с помощью классического портала настроить правила автомасштабирования для веб-роли или рабочей роли облачной службы в Azure."
services: cloud-services
documentationcenter: 
author: Thraka
manager: timlt
editor: 
ms.assetid: eb167d70-4eba-42a4-b157-d8d0688abf4b
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/18/2017
ms.author: adegeo
ms.openlocfilehash: 90d55bbac6e113d6add848ace67cf0749e26342b
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="how-to-configure-auto-scaling-for-a-cloud-service-in-the-classic-portal"></a>Как настроить автомасштабирование для облачной службы на классическом портале
> [!div class="op_single_selector"]
> * [Портал Azure](cloud-services-how-to-scale-portal.md)
> * [классическом портале Azure](cloud-services-how-to-scale.md)

На странице "Масштаб" классического портала Azure можно настроить параметры автомасштабирования для веб-роли или рабочей роли. Кроме того, можно настроить ручное масштабирование, а не автомасштабирование на основе правил.

> [!NOTE]
> Эта статья посвящена веб-ролям и рабочим ролям облачной службы. Виртуальные машины (классические), создаваемые напрямую, размещаются в облачной службе. Некоторые из представленных здесь сведений относятся к таким типам виртуальных машин. Масштабирование группы доступности виртуальных машин представляет собой включение и отключение этих машин в соответствии с заданными правилами масштабирования. Дополнительные сведения о виртуальных машинах и группах доступности см. в статье [Как настроить группу доступности для виртуальных машин Windows в классической модели развертывания](../virtual-machines/windows/classic/configure-availability.md?toc=%2fazure%2fvirtual-machines%2fwindows%2fclassic%2ftoc.json).

При настройке масштабирования приложения следует учитывать следующие сведения.

* Масштабирование зависит от использования ядер.

    Более крупные экземпляры ролей задействуют больше ядер. Масштабировать приложение можно только в пределах количества ядер для используемой подписки. Предположим, что ваша подписка имеет ограничение в 20 ядер. Если выполняется приложение с двумя средними по размерам облачными службами (всего четыре ядра), то можно увеличить масштаб других развернутых в подписке облачных служб, охватив оставшиеся 16 ядер. Дополнительные сведения о размерах см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).

* Прежде чем приступить к масштабированию приложения на основе порогового значения сообщений, необходимо создать очередь и связать ее с ролью. Дополнительные сведения см. в статье [Приступая к работе с хранилищем очередей Azure с помощью .NET](../storage/queues/storage-dotnet-how-to-use-queues.md).

* Можно масштабировать ресурсы, привязанные к используемой облачной службе. Дополнительные сведения о связанных ресурсах см. в разделе [Практическое руководство. Привязка ресурсов к облачной службе](cloud-services-how-to-manage.md#how-to-link-a-resource-to-a-cloud-service).

* В целях обеспечения высокой доступности приложения необходимо убедиться, что приложение развернуто с двумя и более экземплярами ролей. Дополнительные сведения см. в разделе [Соглашения об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/).

## <a name="schedule-scaling"></a>Планирование масштабирования
По умолчанию все роли следуют установленному расписанию. Это значит, что изменения в параметрах действуют все время в течение года. При желании вы можете настроить ручное или автоматическое масштабирование для одного из следующих режимов:

* дни недели;
* выходные дни;
* ночное время будних дней;
* утреннее время будних дней;
* определенные даты;
* определенные диапазоны дат.

Параметр расписания настраивается на [классическом портале Azure](https://manage.windowsazure.com/), на странице  
**Облачные службы** > **\[Ваша облачная служба\]** > **Масштабирование** > **\[Рабочая или промежуточная среда\]**.

Нажмите кнопку **Настройка параметров расписания** для каждой роли, которую необходимо изменить.

![Автомасштабирование облачной службы по расписанию][scale_schedules]

## <a name="manual-scale"></a>Ручное масштабирование
На странице **Масштабирование** можно вручную увеличить или уменьшить количество работающих в облачной службе экземпляров. Этот параметр настраивается для каждого создаваемого расписания, а если расписания нет, то он действует постоянно.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.

2. Щелкните пункт **Масштаб**.
3. Выберите расписание, для которого нужно изменить параметры масштабирования. Если расписание не определено, используется значение по умолчанию — *Не настроено*.
4. Найдите раздел **Масштабирование по метрике** и выберите параметр **Нет**. Это параметр по умолчанию для всех ролей.
5. Каждая роль в облачной службе имеет ползунок для изменения количества используемых экземпляров.
   
    ![Ручное масштабирование роли облачной службы][manual_scale]
   
    Если вам нужно несколько экземпляров, измените [размер виртуальной машины облачной службы](cloud-services-sizes-specs.md).
6. Щелкните **Сохранить**.  
   Экземпляры роли добавляются и удаляются в зависимости от вашего выбора.

> [!TIP]
> Увидев значок ![][tip_icon], наведите на него указатель мыши, и вы получите справку о том, что именно делает соответствующий параметр.

## <a name="automatic-scale---cpu"></a>Автоматическое масштабирование: ЦП
Масштаб в этом режиме изменяется, если средний процент использования ЦП выходит за пределы определенных пороговых значений. Когда это происходит, создаются или удаляются экземпляры роли.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.

2. Щелкните пункт **Масштаб**.
3. Выберите расписание, для которого нужно изменить параметры масштабирования. Если расписание не определено, используется значение по умолчанию — *Не настроено*.
4. Найдите раздел **Масштабирование по метрике** и выберите параметр **ЦП**.
5. Теперь можно настраивать минимальный и максимальный диапазон экземпляров ролей, целевой процент использования ЦП (для увеличения масштаба в случае необходимости) и число экземпляров, на которое следует увеличивать или уменьшать масштаб.

![Масштабирование роли облачной службы в зависимости от нагрузки на ЦП][cpu_scale]

> [!TIP]
> Увидев значок ![][tip_icon], наведите на него указатель мыши, и вы получите справку о том, что именно делает соответствующий параметр.

## <a name="automatic-scale---queue"></a>Автоматическое масштабирование: очередь
В этом режиме автомасштабирование выполняется, если число сообщений в очереди поднимается выше или опускается ниже указанного порогового значения. Когда это происходит, создаются или удаляются экземпляры роли.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.

2. Щелкните пункт **Масштаб**.
3. Найдите раздел **Масштабирование по метрике** и выберите параметр **Очередь**.
4. Теперь можно настроить минимальный и максимальный диапазоны экземпляров ролей, очередь и число сообщений в очереди на обработку для каждого экземпляра, а также число экземпляров, на которое следует увеличивать или уменьшать масштаб.

![Масштабирование роли облачной службы в зависимости от очереди сообщений][queue_scale]

> [!TIP]
> Увидев значок ![][tip_icon], наведите на него указатель мыши, и вы получите справку о том, что именно делает соответствующий параметр.

## <a name="scale-linked-resources"></a>Масштабирование связанных ресурсов
Часто при масштабировании роли выгодно масштабировать также и базу данных, используемую приложением. Связав базу данных с облачной службой, вы сможете получить доступ к параметрам масштабирования для соответствующего ресурса, щелкнув соответствующую ссылку.

1. На [классическом портале Azure](https://manage.windowsazure.com/)щелкните **Облачные службы**, затем щелкните имя облачной службы, чтобы открыть панель мониторинга.
   
   > [!TIP]
   > Если вы не видите облачную службу, измените **рабочую среду** на **промежуточную** или наоборот.

2. Щелкните пункт **Масштаб**.
3. Найдите раздел **Связанные ресурсы** и щелкните **Управление масштабированием для этой базы данных**.
   
   > [!NOTE]
   > Если вы не видите раздел **Связанные ресурсы** , возможно, что таких ресурсов у вас нет.

![][linked_resource]

[manual_scale]: ./media/cloud-services-how-to-scale/manual-scale.png
[queue_scale]: ./media/cloud-services-how-to-scale/queue-scale.png
[cpu_scale]: ./media/cloud-services-how-to-scale/cpu-scale.png
[tip_icon]: ./media/cloud-services-how-to-scale/tip.png
[scale_schedules]: ./media/cloud-services-how-to-scale/schedules.png
[scale_popup]: ./media/cloud-services-how-to-scale/schedules-dialog.png
[linked_resource]: ./media/cloud-services-how-to-scale/linked-resources.png
