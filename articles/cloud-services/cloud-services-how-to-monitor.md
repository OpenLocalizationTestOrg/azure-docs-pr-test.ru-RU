---
title: "aaaHow toomonitor облачной службы | Документы Microsoft"
description: "Дополнительные сведения об toomonitor облачных служб с помощью hello классический портал Azure."
services: cloud-services
documentationcenter: 
author: thraka
manager: timlt
editor: 
ms.assetid: 5c48d2fb-b8ea-420f-80df-7aebe2b66b1b
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 12/07/2015
ms.author: adegeo
ms.openlocfilehash: ee98c56e0b98b85d75a5c1d796800069c4f06d20
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-toomonitor-cloud-services"></a>Как tooMonitor облачных служб
[!INCLUDE [disclaimer](../../includes/disclaimer.md)]

Вы можете отслеживать `key` показатели производительности для облачных служб в hello классический портал Azure. Можно задать hello уровень мониторинга toominimal и подробных сведений для каждой службы роли и можно настроить мониторинг отображает hello. Подробные данные мониторинга хранятся в учетной записи хранилища, к которому можно получить за пределами портала hello. 

Мониторинга представлены в hello классический портал Azure, можно настроить. Можно выбрать метрики hello требуется toomonitor в списке метрик hello на hello **монитор** страницы и выберите какой tooplot метрики в диаграммы метрик на hello **монитор** страницы и hello панели мониторинга. 

## <a name="concepts"></a>Основные понятия
По умолчанию для новой облачной службы с помощью счетчиков производительности собираются из операционной системы сервера hello для экземпляров ролей hello (виртуальных машин) обеспечивается минимальный мониторинг. минимальные показатели Hello, ограниченный tooCPU процент данных, вывод данных, пропускную способность чтения диска, а также пропускную способность записи на диск. Настроив подробный мониторинг, вы можете получать дополнительные метрики на основе данных производительности в виртуальных машинах hello (экземпляры роли). Hello подробные метрики позволяют более тщательного анализа проблем, возникающих во время работы приложений.

По умолчанию данные счетчиков производительности из экземпляров роли выборки и передаются из экземпляра роли hello каждые 3 минут. При включении подробного мониторинга данных счетчиков производительности неформатированной hello агрегируются для каждого экземпляра роли и для экземпляров роли для каждой роли с интервалом в 5 минут, 1 час и 12 часов. Hello статистические данные удаляются после 10 дней.

После включения подробного мониторинга, hello статистическая обработка данных мониторинга хранятся в таблицах в вашей учетной записи хранилища. tooenable подробного мониторинга для роли, необходимо настроить строка подключения диагностики, который связывает учетную запись хранения toohello. Для каждой роли можно использовать собственную учетную запись хранения.

Включение подробного мониторинга увеличивается хранилища затраты, связанные с toodata хранилища, передачи данных транзакции с хранилищем. При минимальном уровне мониторинга учетная запись хранения не требуется. Hello данных для метрик hello, представленные на минимальный уровень мониторинга hello не хранятся в учетной записи хранения, даже если вы настроите мониторинг уровня tooverbose hello.

## <a name="how-to-configure-monitoring-for-cloud-services"></a>Практическое руководство. Настройка мониторинга для облачных служб
Используйте следующие процедуры tooconfigure того, какой наблюдения за hello классический портал Azure hello. 

### <a name="before-you-begin"></a>Перед началом работы
* Создание *классический* hello toostore учетной записи хранилища, наблюдение за данными. Для каждой роли можно использовать собственную учетную запись хранения. Дополнительные сведения см. в разделе [как учетную запись хранения toocreate](../storage/common/storage-create-storage-account.md#create-a-storage-account).
* Включите систему диагностики Azure для ролей облачной службы. См. в разделе [Настройки диагностики для облачных служб](cloud-services-dotnet-diagnostics.md).

Убедитесь, что строка подключения диагностики hello присутствует в конфигурации роли hello. Не удалось включить подробный мониторинг до включения диагностики Azure и включить строка подключения диагностики в конфигурации роли hello.   

> [!NOTE]
> Проектах, предназначенных для Azure SDK 2.5 не включать автоматически строка подключения диагностики hello в шаблон проекта hello. Для этих проектов потребуется toomanually добавить конфигурацию роли toohello строка подключения hello диагностики.
> 
> 

**toomanually добавить конфигурацию tooRole строка подключения диагностики**

1. Привет открыть проект облачной службы в Visual Studio
2. Дважды щелкните hello **роли** tooopen hello конструктора ролей и выберите hello **параметры** вкладка
3. Найдите параметр с именем **Microsoft.WindowsAzure.Plugins.Diagnostics.ConnectionString**. 
4. Если этот параметр не указан, выберите команду hello **добавить параметр** tooadd кнопку его изменение и настройка toohello hello тип для hello новое значение слишком**ConnectionString**
5. Задайте значение hello hello строку подключения, щелкнув hello **...**  кнопки. Откроется диалоговое окно, позволяющее tooselect учетной записи хранилища.
   
    ![Настройки Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioDiagnosticsConnectionString.png)

### <a name="toochange-hello-monitoring-level-tooverbose-or-minimal"></a>мониторинг уровня tooverbose hello toochange или минимальным
1. В hello [классический портал Azure](https://manage.windowsazure.com/)откройте hello **Настройка** страницы для развертывания облачной службы hello.
2. В поле **Уровень** выберите **Подробно** или **Минимальный**. 
3. Щелкните **Сохранить**.

После включения подробного мониторинга, необходимо начать просмотр данных мониторинга на hello классический портал Azure в течение часа hello hello.

данные счетчиков производительности неформатированной Hello и статистические данные наблюдения хранятся в учетной записи хранения hello в таблицах, дополненное hello идентификатор развертывания для ролей hello. 

## <a name="how-to-receive-alerts-for-cloud-service-metrics"></a>Практическое руководство. Получение оповещений для метрик облачных служб
Вы можете настроить получение оповещений на основе метрик мониторинга облачной службы. На hello **служб управления** страница hello классический портал Azure, можно создать tootrigger правила оповещения, когда hello метрика достигает значения, указываемого. Можно также выбрать toohave сообщений электронной почты, отправляемых при hello оповещения. Дополнительные сведения см. в статье [Создание оповещений для служб Azure с помощью портала Azure](http://go.microsoft.com/fwlink/?LinkId=309356).

## <a name="how-to-add-metrics-toohello-metrics-table"></a>Способ: добавить таблицу метрики toohello метрики
1. В hello [классический портал Azure](http://manage.windowsazure.com/)откройте hello **монитор** страницы для hello облачной службы.
   
    По умолчанию hello таблице показателей отображается подмножество доступных метрик hello. Hello рисунке показано по умолчанию hello подробные метрики для облачной службы, используемом ограниченные toohello счетчика производительности "память\доступно МБ", а данные, собранные на уровне роли hello. Используйте **добавить метрики** tooselect дополнительных статистическое выражение и toomonitor метрик уровня роли в hello классический портал Azure.
   
    ![Подробные данные мониторинга](./media/cloud-services-how-to-monitor/CloudServices_DefaultVerboseDisplay.png)
2. Таблица показателей toohello tooadd метрики:
   
   1. Нажмите кнопку **добавить метрики** tooopen **Выбор метрики**описанных ниже.
      
       Hello первой доступной метрика tooshow расширенные параметры, доступные. Для каждой метрики параметр top hello отображает статистические данные наблюдения для всех ролей. Кроме того вы можете отдельных ролей toodisplay данные.
      
       ![Добавить метрики](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics.png)
   2. toodisplay tooselect метрики
      
      * Щелкните hello стрелка вниз по возможности мониторинга hello метрики tooexpand hello.
      * Hello, установите флажок для каждого наблюдения за интересующий вас toodisplay.
        
        Можно выбрать метрики too50 в таблице показателей hello.
        
        > [!TIP]
        > Подробным мониторингом hello метрики в списке может содержать десятки метрики. toodisplay полосы прокрутки, наведите указатель на правой стороне hello диалоговое окно «hello». Список toofilter hello, щелкните значок поиска hello и введите текст в поле поиска hello, как показано ниже.
        > 
        > 
        
        ![Настройка поиска по метрикам](./media/cloud-services-how-to-monitor/CloudServices_AddMetrics_Search.png)
3. Выбрав все нужные метрики, нажмите кнопку «ОК» (флажок).
   
    Hello выбранные показатели добавляются toohello таблице показателей, как показано ниже.
   
    ![Метрики мониторинга](./media/cloud-services-how-to-monitor/CloudServices_Monitor_UpdatedMetrics.png)
4. toodelete метрику из таблицы метрик hello, нажмите кнопку tooselect метрики hello, а затем щелкните **удалить метрику**. (Команда **Удалить метрики** доступна только в том случае, если выбрана хотя бы одна метрика.)

### <a name="tooadd-custom-metrics-toohello-metrics-table"></a>Таблица показателей toohello tooadd настраиваемых метрик
Hello **Verbose** уровень мониторинга предоставляет список показателей по умолчанию, можно отслеживать на портале hello. В дополнение к этому toothese можно отслеживать любые настраиваемые метрики или счетчики производительности, определяемый приложением через портал hello.

Hello следующие шаги предполагают, что включено **Verbose** уровень мониторинга и настройки вашего приложения toocollect и передачи пользовательских счетчиков производительности. 

toodisplay hello пользовательских счетчиков производительности в hello необходимые конфигурации hello tooupdate в wad-control-container портала:

1. Откройте BLOB-объект wad-control-container hello в вашей учетной записи хранения диагностики. Можно использовать Visual Studio или других toodo обозреватель хранилища это.
   
    ![Обозреватель серверов в Visual Studio.](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioBlobExplorer.png)
2. Перейдите hello пути больших двоичных объектов, используя шаблон hello **DeploymentId, RoleName/RoleInstance** toofind hello конфигурации для экземпляра роли. 
   
    ![Обозреватель хранилищ Visual Studio](./media/cloud-services-how-to-monitor/CloudServices_Monitor_VisualStudioStorage.png)
3. Загрузить файл конфигурации hello для экземпляра роли и обновить его tooinclude любые пользовательские счетчики производительности. Например toomonitor *записи на диск/сек* для hello *диска C* добавьте следующий код под hello **PerformanceCounters\Subscriptions** узла
   
    ```xml
    <PerformanceCounterConfiguration>
    <CounterSpecifier>\LogicalDisk(C:)\Disk Write Bytes/sec</CounterSpecifier>
    <SampleRateInSeconds>180</SampleRateInSeconds>
    </PerformanceCounterConfiguration>
    ```
4. Сохраните изменения hello и задней toohello файла конфигурации передачи hello же перезапись расположение hello существующий файл в большом двоичном объекте hello.
5. Переключение режима tooVerbose в hello конфигурации классического портала Azure. Если вы уже есть в подробном режиме будет иметь tootoggle tooverbose toominimal и обратно.
6. Hello пользовательский счетчик производительности будет доступна в hello **добавить метрики** диалоговое окно. 

## <a name="how-to-customize-hello-metrics-chart"></a>Как: настроить диаграммы метрик hello
1. В таблице показателей hello выберите копирование too6 tooplot метрик на диаграмме метрик hello. tooselect показатель, щелкните hello флажок слева от него. tooremove метрику из диаграммы метрик hello, снимите его флажок в таблице показателей hello.
   
    При выборе метрики в таблице показателей hello диаграммы метрик toohello добавляются метрики hello. На экране узкий **n дополнительные** раскрывающегося списка содержит заголовки метрики, не помещающийся отображения приветствия.
2. tooswitch между отображением относительные значения (окончательное значение только для каждой метрики) и абсолютных значений (ось Y отображается), выбрать относительный или абсолютный hello верхней части диаграммы hello.
   
    ![Относительные или абсолютные](./media/cloud-services-how-to-monitor/CloudServices_Monitor_RelativeAbsolute.png)
3. Отображает hello toochange hello временной диапазон диаграммы метрик, выберите 1 час, 24 часа или 7 дней hello верхней части диаграммы hello.
   
    ![Период отображения данных мониторинга](./media/cloud-services-how-to-monitor/CloudServices_Monitor_DisplayPeriod.png)
   
    На диаграмме метрик мониторинга hello метод hello для построения метрик отличается. Доступен стандартный набор метрик и метрик добавляются или удаляются, выбрав заголовок метрики hello.

### <a name="toocustomize-hello-metrics-chart-on-hello-dashboard"></a>Диаграмма показателей hello toocustomize на панели мониторинга hello
1. Откройте панель мониторинга hello для hello облачной службы.
2. Добавить или удалить метрики из hello диаграммы:
   
   * tooplot создается новый hello метрики, установите флажок для показателя hello в заголовках диаграммы hello. На экране узкий, щелкните hello вниз по  ***n* ?? метрики** tooplot не удается отобразить в области заголовка диаграммы метрик hello.
   * toodelete показатель, отображения диаграмме hello, hello, снимите флажок рядом с его заголовок.
   
3. Выберите режим отображения значений: **Относительные** или **Абсолютные**.
4. Выберите 1 час, 24 часа или 7 дней toodisplay данных.

## <a name="how-to-access-verbose-monitoring-data-outside-hello-azure-classic-portal"></a>Как: доступ к данным подробного мониторинга за пределами hello классический портал Azure
Подробные данные мониторинга, хранятся в таблицах в учетных записях хранения hello, указываемые для каждой роли. Для каждого развертывания облачной службы для роли hello создаются шесть таблиц. по две для каждого интервала (5 минут, 1 час и 12 часов). Одной из этих таблиц хранят агрегаты на уровне роли; Здравствуйте, агрегаты таблицы хранилища для экземпляров ролей. 

имена таблиц Hello имеют hello следующий формат:

```
WAD*deploymentID*PT*aggregation_interval*[R|RI]Table
```

Описание:

* *deploymentID* — hello GUID, назначенный toohello развертывания облачной службы
* *aggregation_interval* = 5M (5 мин), 1H (1 ч) или 12H (12 ч);
* сводные данные на уровне роли = R;
* сводные данные для экземпляров роли = RI.

Например hello следующие таблицы должно хранить подробные данные мониторинга, статистически обрабатываются через каждые 1 час:

```
WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRTable (hourly aggregations for hello role)

WAD8b7c4233802442b494d0cc9eb9d8dd9fPT1HRITable (hourly aggregations for role instances)
```
