---
title: "Этап развертывания облачной службы (Node.js) | Документы Майкрософт"
description: "Узнайте, как можно сначала выполнить развертывание приложения Azure в промежуточной среде, а затем в рабочей среде с помощью переключения виртуальных IP-адресов (VIP)."
services: cloud-services
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: d65d26a6-b424-49cd-a88c-7ef46bb112a8
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: b3000ed769e8c60eccb21e26f53ce7ccb7e68d7f
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="staging-an-application-in-azure"></a><span data-ttu-id="7e754-103">Развертывание приложения в промежуточной среде Azure</span><span class="sxs-lookup"><span data-stu-id="7e754-103">Staging an Application in Azure</span></span>
<span data-ttu-id="7e754-104">Упакованное приложение можно развернуть в промежуточной среде в Azure и протестировать его перед развертыванием в рабочей среде, где оно будет доступно пользователям через Интернет.</span><span class="sxs-lookup"><span data-stu-id="7e754-104">A packaged application can be deployed to the staging environment in Azure to be tested before you move it to the production environment in which the application is accessible on the Internet.</span></span> <span data-ttu-id="7e754-105">Промежуточная среда в точности схожа с рабочей средой за исключением того, что доступ к приложению в промежуточной среде возможен только с использованием допустимого URL-адреса, который создается Azure.</span><span class="sxs-lookup"><span data-stu-id="7e754-105">The staging environment is exactly like the production environment, except that you can only access the staged application with an obfuscated URL that is generated by Azure.</span></span> <span data-ttu-id="7e754-106">Убедившись, что приложение работает правильно, вы можете развернуть его в рабочей среде, выполнив переключение виртуальных IP-адресов (VIP).</span><span class="sxs-lookup"><span data-stu-id="7e754-106">After you have verified that your application is working correctly, it can be deployed to the production environment by performing a Virtual IP (VIP) swap.</span></span>

> [!NOTE]
> <span data-ttu-id="7e754-107">Действия, приведенные в этой статье, применяются только к приложениям узла, размещенным в качестве облачной службы Azure.</span><span class="sxs-lookup"><span data-stu-id="7e754-107">The steps in this article only apply to node applications hosted as an Azure Cloud Service.</span></span>
> 
> 

## <a name="step-1-stage-an-application"></a><span data-ttu-id="7e754-108">Шаг 1. Развертывание приложения в промежуточной среде.</span><span class="sxs-lookup"><span data-stu-id="7e754-108">Step 1: Stage an Application</span></span>
<span data-ttu-id="7e754-109">В этой задаче демонстрируется развертывание приложения в промежуточной среде с помощью **Microsoft Azure PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="7e754-109">This task covers how to stage an application by using the **Microsoft Azure PowerShell**.</span></span>

1. <span data-ttu-id="7e754-110">При публикации службы необходимо просто передать параметр **-Slot** в командлет **Publish-AzureServiceProject**.</span><span class="sxs-lookup"><span data-stu-id="7e754-110">When publishing a service, simply pass the **-Slot** parameter to the **Publish-AzureServiceProject** cmdlet.</span></span>
   
   ```powershell
   Publish-AzureServiceProject -Slot staging
   ```
2. <span data-ttu-id="7e754-111">Выполните вход на [классический портал Azure] и выберите **Облачные службы**.</span><span class="sxs-lookup"><span data-stu-id="7e754-111">Log on to the [Azure classic portal] and select **Cloud Services**.</span></span> <span data-ttu-id="7e754-112">После того, как создана облачная служба и в столбце состояния **Промежуточная среда** установлено значение **Выполняется**, щелкните имя службы.</span><span class="sxs-lookup"><span data-stu-id="7e754-112">After the cloud service is created and the **Staging** column status has been updated to **Running**, click on the service name.</span></span>
   
   ![портал, на котором отображается выполняющаяся служба][cloud-service]
3. <span data-ttu-id="7e754-114">Выберите **Панель мониторинга** и щелкните **Промежуточная среда**.</span><span class="sxs-lookup"><span data-stu-id="7e754-114">Select the **Dashboard**, and then select **Staging**.</span></span>
   
   ![панель мониторинга облачной службы][cloud-service-dashboard]
4. <span data-ttu-id="7e754-116">Обратите внимание на значение в поле **URL-адрес сайта** справа.</span><span class="sxs-lookup"><span data-stu-id="7e754-116">Note the value in the **Site URL** entry to the right.</span></span> <span data-ttu-id="7e754-117">DNS-имя представляет собой образец внутреннего идентификатора, созданного Azure.</span><span class="sxs-lookup"><span data-stu-id="7e754-117">The DNS name is an obfuscated internal ID that Azure generated.</span></span>
   
    ![URL-адрес сайта][cloud-service-staging-url]

<span data-ttu-id="7e754-119">Далее необходимо проверить работоспособность приложения с помощью URL-адреса сайта в промежуточной среде.</span><span class="sxs-lookup"><span data-stu-id="7e754-119">Now you can verify that the application is working correctly in the staging environment by using the staging site URL.</span></span>

## <a name="step-2-upgrade-an-application-in-production-by-swapping-vips"></a><span data-ttu-id="7e754-120">Шаг 2. Обновление приложения в рабочей среде путем переключения виртуальных IP-адресов</span><span class="sxs-lookup"><span data-stu-id="7e754-120">Step 2: Upgrade an Application in Production by Swapping VIPs</span></span>
<span data-ttu-id="7e754-121">После проверки обновленной версии приложения в промежуточной среде вы можете быстро опубликовать его в рабочей, выполнив переключение виртуальных IP-адресов между этими двумя средами.</span><span class="sxs-lookup"><span data-stu-id="7e754-121">After you have verified the upgraded version of an application in the staging environment, you can quickly make it available in production by swapping the virtual IPs (VIPs) of the staging and production environments.</span></span>

> [!NOTE]
> <span data-ttu-id="7e754-122">В этом шаге предполагается, что вы уже развернули приложение в рабочей среде и развернули его обновленную версию в промежуточной среде.</span><span class="sxs-lookup"><span data-stu-id="7e754-122">This step assumes that you have already deployed an application to production and staged the upgraded version of the application.</span></span>
> 
> 

1. <span data-ttu-id="7e754-123">Перейдите на [классический портал Azure], щелкните элемент **Облачные службы** и выберите имя службы.</span><span class="sxs-lookup"><span data-stu-id="7e754-123">Log into the [Azure classic portal], click **Cloud Services** and then select the service name.</span></span>
2. <span data-ttu-id="7e754-124">В разделе **Панель мониторинга** выберите **Промежуточная среда** и нажмите кнопку **Переключить** внизу страницы.</span><span class="sxs-lookup"><span data-stu-id="7e754-124">From the **Dashboard**, select **Staging**, and then click **Swap** at the bottom of the page.</span></span> <span data-ttu-id="7e754-125">Откроется диалоговое окно "Переключение виртуального IP-адреса".</span><span class="sxs-lookup"><span data-stu-id="7e754-125">This opens the VIP Swap dialog.</span></span>
   
   ![диалоговое окно переключения виртуального IP-адреса][vip-swap-dialog]
3. <span data-ttu-id="7e754-127">Проверьте данные и нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="7e754-127">Review the information, and then click **OK**.</span></span> <span data-ttu-id="7e754-128">Обновление обоих развертываний начинается в момент переключения промежуточной и рабочей сред.</span><span class="sxs-lookup"><span data-stu-id="7e754-128">The two deployments begin updating as the staging deployment switches to production and the production deployment switches to staging.</span></span>

<span data-ttu-id="7e754-129">Вы успешно выполнили развертывание в промежуточной среде и обновили развертывание в рабочей среде, выполнив переключение виртуальных IP-адресов в развертывании в промежуточной среде.</span><span class="sxs-lookup"><span data-stu-id="7e754-129">You have successfully staged a deployment and upgraded a production deployment by swapping VIPs with the deployment in staging.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7e754-130">дополнительные ресурсы.</span><span class="sxs-lookup"><span data-stu-id="7e754-130">Additional Resources</span></span>
* <span data-ttu-id="7e754-131">[Развертывание обновления службы в рабочей среде путем переключения виртуальных IP-адресов в Azure]</span><span class="sxs-lookup"><span data-stu-id="7e754-131">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]</span></span>

<span data-ttu-id="7e754-132">[классический портал Azure]: http://manage.windowsazure.com</span><span class="sxs-lookup"><span data-stu-id="7e754-132">[Azure classic portal]: http://manage.windowsazure.com</span></span>
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
[cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
[vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
<span data-ttu-id="7e754-133">[Развертывание обновления службы в рабочей среде путем переключения виртуальных IP-адресов в Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production</span><span class="sxs-lookup"><span data-stu-id="7e754-133">[How to Deploy a Service Upgrade to Production by Swapping VIPs in Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production</span></span>
