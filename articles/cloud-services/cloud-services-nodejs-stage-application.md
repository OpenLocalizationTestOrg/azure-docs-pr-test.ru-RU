---
title: "Этап развертывания облачной службы (Node.js) | Документы Майкрософт"
description: "Узнайте, как можно сначала выполнить развертывание приложения Azure в промежуточной среде, а затем в рабочей среде с помощью переключения виртуальных IP-адресов (VIP)."
services: cloud-services
documentationcenter: nodejs
author: TomArcher
manager: routlaw
editor: 
ms.assetid: d65d26a6-b424-49cd-a88c-7ef46bb112a8
ms.service: cloud-services
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 08/17/2017
ms.author: tarcher
ms.openlocfilehash: b3000ed769e8c60eccb21e26f53ce7ccb7e68d7f
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="staging-an-application-in-azure"></a>Развертывание приложения в промежуточной среде Azure
Упакованное приложение можно развернуть в промежуточной среде в Azure и протестировать его перед развертыванием в рабочей среде, где оно будет доступно пользователям через Интернет. Промежуточная среда в точности схожа с рабочей средой за исключением того, что доступ к приложению в промежуточной среде возможен только с использованием допустимого URL-адреса, который создается Azure. Убедившись, что приложение работает правильно, вы можете развернуть его в рабочей среде, выполнив переключение виртуальных IP-адресов (VIP).

> [!NOTE]
> Действия, приведенные в этой статье, применяются только к приложениям узла, размещенным в качестве облачной службы Azure.
> 
> 

## <a name="step-1-stage-an-application"></a>Шаг 1. Развертывание приложения в промежуточной среде.
В этой задаче демонстрируется развертывание приложения в промежуточной среде с помощью **Microsoft Azure PowerShell**.

1. При публикации службы необходимо просто передать параметр **-Slot** в командлет **Publish-AzureServiceProject**.
   
   ```powershell
   Publish-AzureServiceProject -Slot staging
   ```
2. Выполните вход на [классический портал Azure] и выберите **Облачные службы**. После того, как создана облачная служба и в столбце состояния **Промежуточная среда** установлено значение **Выполняется**, щелкните имя службы.
   
   ![портал, на котором отображается выполняющаяся служба][cloud-service]
3. Выберите **Панель мониторинга** и щелкните **Промежуточная среда**.
   
   ![панель мониторинга облачной службы][cloud-service-dashboard]
4. Обратите внимание на значение в поле **URL-адрес сайта** справа. DNS-имя представляет собой образец внутреннего идентификатора, созданного Azure.
   
    ![URL-адрес сайта][cloud-service-staging-url]

Далее необходимо проверить работоспособность приложения с помощью URL-адреса сайта в промежуточной среде.

## <a name="step-2-upgrade-an-application-in-production-by-swapping-vips"></a>Шаг 2. Обновление приложения в рабочей среде путем переключения виртуальных IP-адресов
После проверки обновленной версии приложения в промежуточной среде вы можете быстро опубликовать его в рабочей, выполнив переключение виртуальных IP-адресов между этими двумя средами.

> [!NOTE]
> В этом шаге предполагается, что вы уже развернули приложение в рабочей среде и развернули его обновленную версию в промежуточной среде.
> 
> 

1. Перейдите на [классический портал Azure], щелкните элемент **Облачные службы** и выберите имя службы.
2. В разделе **Панель мониторинга** выберите **Промежуточная среда** и нажмите кнопку **Переключить** внизу страницы. Откроется диалоговое окно "Переключение виртуального IP-адреса".
   
   ![диалоговое окно переключения виртуального IP-адреса][vip-swap-dialog]
3. Проверьте данные и нажмите кнопку **ОК**. Обновление обоих развертываний начинается в момент переключения промежуточной и рабочей сред.

Вы успешно выполнили развертывание в промежуточной среде и обновили развертывание в рабочей среде, выполнив переключение виртуальных IP-адресов в развертывании в промежуточной среде.

## <a name="additional-resources"></a>дополнительные ресурсы.
* [Развертывание обновления службы в рабочей среде путем переключения виртуальных IP-адресов в Azure]

[классический портал Azure]: http://manage.windowsazure.com
[cloud-service]: ./media/cloud-services-nodejs-stage-application/staging-cloud-service-running.png
[cloud-service-dashboard]: ./media/cloud-services-nodejs-stage-application/cloud-service-dashboard-staging.png
[cloud-service-staging-url]: ./media/cloud-services-nodejs-stage-application/cloud-service-staging-url.png
[vip-swap-dialog]: ./media/cloud-services-nodejs-stage-application/vip-swap-dialog.png
[Развертывание обновления службы в рабочей среде путем переключения виртуальных IP-адресов в Azure]: cloud-services-how-to-manage.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production
