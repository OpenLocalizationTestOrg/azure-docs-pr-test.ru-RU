---
title: "Определение облачных служб Azure. Схема WorkerRole | Документация Майкрософт"
ms.custom: 
ms.date: 04/14/2015
ms.prod: azure
ms.reviewer: 
ms.service: cloud-services
ms.suite: 
ms.tgt_pltfrm: 
ms.topic: reference
ms.assetid: 41cd46bc-c479-43fa-96e5-d6c83e4e6d89
caps.latest.revision: "55"
author: thraka
ms.author: adegeo
manager: timlt
ms.openlocfilehash: 0171c7254db5855f0eccd19ae9938249d8966edd
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="azure-cloud-services-definition-workerrole-schema"></a>Схема WorkerRole для определения облачных служб Azure
Рабочая роль Azure используется для обобщенной разработки. Она может выполнять фоновую обработку для веб-роли.

По умолчанию определения службы хранятся в файле с расширением .csdef.

## <a name="basic-service-definition-schema-for-a-worker-role"></a>Базовая схема определения службы для рабочей роли
Ниже приведен базовый формат файла с определением службы для рабочей роли.

```xml
<ServiceDefinition …>
  <WorkerRole name="<worker-role-name>" vmsize="<worker-role-size>" enableNativeCodeExecution="[true|false]">
    <Certificates>
      <Certificate name="<certificate-name>" storeLocation="[CurrentUser|LocalMachine]" storeName="[My|Root|CA|Trust|Disallow|TrustedPeople|TrustedPublisher|AuthRoot|AddressBook|<custom-store>" />
    </Certificates>
    <ConfigurationSettings>
      <Setting name="<setting-name>" />
    </ConfigurationSettings>
    <Endpoints>
      <InputEndpoint name="<input-endpoint-name>" protocol="[http|https|tcp|udp]" localPort="<local-port-number>" port="<port-number>" certificate="<certificate-name>" loadBalancerProbe="<load-balancer-probe-name>" />
      <InternalEndpoint name="<internal-endpoint-name" protocol="[http|tcp|udp|any]" port="<port-number>">
         <FixedPort port="<port-number>"/>
         <FixedPortRange min="<minium-port-number>" max="<maximum-port-number>"/>
      </InternalEndpoint>
     <InstanceInputEndpoint name="<instance-input-endpoint-name>" localPort="<port-number>" protocol="[udp|tcp]">
         <AllocatePublicPortFrom>
            <FixedPortRange min="<minium-port-number>" max="<maximum-port-number>"/>
         </AllocatePublicPortFrom>
      </InstanceInputEndpoint>
    </Endpoints>
    <Imports>
      <Import moduleName="[RemoteAccess|RemoteForwarder|Diagnostics]"/>
    </Imports>
    <LocalResources>
      <LocalStorage name="<local-store-name>" cleanOnRoleRecycle="[true|false]" sizeInMB="<size-in-megabytes>" />
    </LocalResources>
    <LocalStorage name="<local-store-name>" cleanOnRoleRecycle="[true|false]" sizeInMB="<size-in-megabytes>" />
    <Runtime executionContext="[limited|elevated]">
      <Environment>
         <Variable name="<variable-name>" value="<variable-value>">
            <RoleInstanceValue xpath="<xpath-to-role-environment-settings>"/>
          </Variable>
      </Environment>
      <EntryPoint>
         <NetFxEntryPoint assemblyName="<name-of-assembly-containing-entrypoint>" targetFrameworkVersion="<.net-framework-version>"/>
         <ProgramEntryPoint commandLine="<application>" setReadyOnProcessStart="[true|false]" "/>
      </EntryPoint>
    </Runtime>
    <Startup priority="<for-internal-use-only>”>
      <Task commandLine="" executionContext="[limited|elevated]" taskType="[simple|foreground|background]">
        <Environment>
         <Variable name="<variable-name>" value="<variable-value>">
            <RoleInstanceValue xpath="<xpath-to-role-environment-settings>"/>
          </Variable>
        </Environment>
      </Task>
    </Startup>
    <Contents>
      <Content destination="<destination-folder-name>" >
        <SourceDirectory path="<local-source-directory>" />
      </Content>
    </Contents>
  </WorkerRole>
</ServiceDefinition>
```

## <a name="schema-elements"></a>Элементы схемы
Файл определения службы содержит следующие элементы (подробно описаны ниже):

[WorkerRole](#WorkerRole)

[ConfigurationSettings](#ConfigurationSettings)

[Параметр](#Setting)

[LocalResources](#LocalResources)

[LocalStorage](#LocalStorage)

[Конечные точки](#Endpoints)

[InputEndpoint](#InputEndpoint)

[InternalEndpoint](#InternalEndpoint)

[InstanceInputEndpoint](#InstanceInputEndpoint)

[AllocatePublicPortFrom](#AllocatePublicPortFrom)

[FixedPort](#FixedPort)

[FixedPortRange](#FixedPortRange)

[Сертификаты](#Certificates)

[Certificate](#Certificate)

[Imports](#Imports)

[Импорт](#Import)

[Среда выполнения](#Runtime)

[Среда](#Environment)

[EntryPoint](#EntryPoint)

[NetFxEntryPoint](#NetFxEntryPoint)

[ProgramEntryPoint](#ProgramEntryPoint)

[Variable](#Variable)

[RoleInstanceValue](#RoleInstanceValue)

[Startup](#Startup)

[Задача.](#Task)

[Contents](#Contents)

[Содержимое](#Content)

[SourceDirectory](#SourceDirectory)

##  <a name="WorkerRole"></a> WorkerRole
Элемент `WorkerRole` описывает роль для обобщенной разработки, которая может выполнять фоновую обработку для веб-роли. Служба может содержать любое число рабочих ролей либо не содержать ни одной.

В таблице ниже описаны атрибуты элемента `WorkerRole`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Имя рабочей роли. Это имя должно быть уникальным.|
|enableNativeCodeExecution|Логическое|необязательный параметр. Значение по умолчанию — `true`. Выполнение машинного кода и полный уровень доверия включены по умолчанию. Установите для этого атрибута значение `false`, чтобы отключить для рабочей роли выполнение машинного кода и использовать частичное доверие Azure.|
|vmsize|string|необязательный параметр. Это значение используется для изменения размера виртуальной машины, выделяемой для роли. По умолчанию используется значение `Small`. Список возможных размеров виртуальной машины и их атрибутов см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).|

##  <a name="ConfigurationSettings"></a> ConfigurationSettings
Элемент `ConfigurationSettings` описывает коллекцию параметров конфигурации для рабочей роли. Этот элемент является родительским для элемента `Setting`.

##  <a name="Setting"></a> Setting
Элемент `Setting` описывает пару "имя — значение", которая определяет параметр конфигурации для экземпляра роли.

В таблице ниже описаны атрибуты элемента `Setting`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Уникальное имя параметра конфигурации.|

Параметры конфигурации для роли в формате пар "имя — значение", которые объявляются в файле определения службы и настраиваются в файле конфигурации службы.

##  <a name="LocalResources"></a> LocalResources
Элемент `LocalResources` описывает коллекцию локальных ресурсов хранилища для рабочей роли. Этот элемент является родительским для элемента `LocalStorage`.

##  <a name="LocalStorage"></a> LocalStorage
Элемент `LocalStorage` определяет локальный ресурс хранилища, который предоставляет для место в файловой системе в среде выполнения. Для роли можно не определить ни одного или определить несколько локальных ресурсов хранилища.

> [!NOTE]
>  Элемент `LocalStorage` может отображаться как дочерний для элемента `WorkerRole`. Это нужно для обеспечения совместимости с предыдущими версиями пакета Azure SDK.

В таблице ниже описаны атрибуты элемента `LocalStorage`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Уникальное имя локального хранилища.|
|cleanOnRoleRecycle|Логическое|необязательный параметр. Указывает, должно ли очищаться локальное хранилище при перезапуске роли. По умолчанию имеет значение `true`.|
|sizeInMb|int|необязательный параметр. Требуемый объем дискового пространства, выделяемого для локального хранилища (МБ). Если значение не указано, по умолчанию выделяется 100 МБ. Минимальный объем выделяемого дискового пространства составляет 1 МБ.<br /><br /> Максимальный размер локальных ресурсов зависит от размера виртуальной машины. Дополнительные сведения см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).|

Имя каталога, выделенного для локального ресурса хранилища, соответствует значению, указанному в атрибуте имени.

##  <a name="Endpoints"></a> Endpoints
Элемент `Endpoints` описывает для роли коллекцию, состоящую из входных (внешних) и внутренних конечных точек, а также входных конечных точек экземпляров. Этот элемент является родительским для элементов `InputEndpoint`, `InternalEndpoint` и `InstanceInputEndpoint`.

Входные и внутренние конечные точки выделяются раздельно. Служба может иметь в общей сложности 25 входных и внутренних конечных точек, а также входных конечных точек экземпляров. Их можно распределить между 25 ролями, доступными для службы. Например, вы можете выделить по пять входных конечных точек каждой из пяти ролей службы или по одной входной конечной точке каждой из 25 ролей.

> [!NOTE]
>  Для каждой развернутой роли требуется один экземпляр. Подготовка по умолчанию для подписки ограничена 20 ядрами, и, соответственно, 20 экземплярами роли. Если приложению требуется больше экземпляров, чем обеспечивается подготовкой по умолчанию, вы можете повысить это ограничение. Подробнее см. сведения на [странице службы поддержки](https://azure.microsoft.com/support/options/).

##  <a name="InputEndpoint"></a> InputEndpoint
Элемент `InputEndpoint` описывает внешнюю конечную точку рабочей роли.

Вы можете определить несколько конечных точек в любой комбинации из следующего набора: HTTP, HTTPS, UDP и TCP. Для входной конечной точки можно задать любой номер порта на ваш выбор, но номера портов, указанные для каждой роли в службе, должны быть уникальными. Например, если вы укажете, что веб-роль использует порт 80 для HTTP и порт 443 для HTTPS, вы можете назначить для второй веб-роли порт 8080 для HTTP и порт 8043 для HTTPS.

В таблице ниже описаны атрибуты элемента `InputEndpoint`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Уникальное имя внешней конечной точки.|
|protocol|string|Обязательный элемент. Транспортный протокол для внешней конечной точки. Для рабочей роли возможными значениями могут быть `HTTP`, `HTTPS`, `UDP` или `TCP`.|
|порт|int|Обязательный элемент. Порт для внешней конечной точки. Можно задать любой номер порта на ваш выбор, но номера портов, указанные для каждой роли в службе, должны быть уникальными.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|
|на основе сертификата.|string|Обязательный для конечной точки HTTPS. Имя сертификата, определенное элементом `Certificate`.|
|localPort|int|необязательный параметр. Указывает порт, используемый для внутренних подключений к конечной точке. Атрибут `localPort` сопоставляет внешний порт конечной точки с внутренним портом в роли. Это полезно в сценариях, где роль должна обмениваться данными с внутренним компонентом через порт, который отличается от того, который предоставляется наружу.<br /><br /> Если значение `localPort` не указано, оно совпадает со значением атрибута `port`. Установите для параметра `localPort` значение *, чтобы автоматически назначить любой свободный порт. Номер этого порта можно узнать через API среды выполнения.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).<br /><br /> Атрибут `localPort` доступен только при использовании пакета Azure SDK версии 1.3 или выше.|
|ignoreRoleInstanceStatus|Логическое|необязательный параметр. Если этому атрибуту присвоено значение `true`, состояние службы не учитывается и конечная точка не удаляется подсистемой балансировки нагрузки. Присвоение этому параметру значения `true` будет полезно для отладки занятых экземпляров службы. По умолчанию используется значение `false`. **Примечание**. Конечная точка по-прежнему может получать трафик, если роль не находится в состоянии готовности.|
|loadBalancerProbe|string|необязательный параметр. Имя подсистемы балансировки нагрузки, связанной со входной конечной точкой. Дополнительные сведения см. в статье [Azure Cloud Services Definition LoadBalancerProbe Schema](schema-csdef-loadbalancerprobe.md) (Определение облачных служб Azure. Схема LoadBalancerProbe).|

##  <a name="InternalEndpoint"></a> InternalEndpoint
Элемент `InternalEndpoint` описывает внутреннюю конечную точку рабочей роли. Внутренняя конечная точка доступна только для других экземпляров ролей в той же службе. Она недоступна для клиентов за пределами службы. Рабочая роль может иметь до пяти внутренних конечных точек HTTP, UDP или TCP.

В таблице ниже описаны атрибуты элемента `InternalEndpoint`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Уникальное имя внутренней конечной точки.|
|protocol|string|Обязательный элемент. Транспортный протокол для внутренней конечной точки. Возможные значения: `HTTP`, `TCP`, `UDP` или `ANY`.<br /><br /> Значение `ANY` указывает, что допустим любой протокол и любой порт.|
|порт|int|необязательный параметр. Порт, используемый для внутренних подключений системы балансировки нагрузки к конечной точке. Конечная точка с балансировкой нагрузки использует два порта: Один из них используется для общедоступного IP-адреса, а другой — для частного IP-адреса. Обычно это один порт, но вы можете использовать разные порты.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).<br /><br /> Атрибут `Port` доступен только при использовании пакета Azure SDK версии 1.3 или выше.|

##  <a name="InstanceInputEndpoint"></a> InstanceInputEndpoint
Элемент `InstanceInputEndpoint` описывает входную конечную точку экземпляра для рабочей роли. Входная конечная точка экземпляра связана с конкретным экземпляром роли с помощью переадресации портов в подсистеме балансировки нагрузки. Каждая входная конечная точка экземпляра сопоставляется с конкретным портом из диапазона возможных портов. Этот элемент является родительским для элемента `AllocatePublicPortFrom`.

Элемент `InstanceInputEndpoint` доступен только при использовании пакета Azure SDK версии 1.7 или выше.

В таблице ниже описаны атрибуты элемента `InstanceInputEndpoint`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Уникальное имя конечной точки.|
|localPort|int|Обязательный элемент. Указывает внутренний порт, который будут прослушивать все экземпляры ролей, чтобы получать входящий трафик, отправляемый из подсистемы балансировки нагрузки. Возможный диапазон значений — от 1 до 65 535 включительно.|
|protocol|string|Обязательный элемент. Транспортный протокол для внутренней конечной точки. Возможные значения: `udp` или `tcp`. Используйте `tcp` для трафика на основе HTTP и HTTPS.|

##  <a name="AllocatePublicPortFrom"></a> AllocatePublicPortFrom
Элемент `AllocatePublicPortFrom` описывает диапазон открытых портов, которые могут использовать внешние клиенты для доступа к входной конечной точке экземпляра. Из этого диапазона выделяется номер общедоступного порта (на виртуальном IP-адресе), который назначается каждой конечной точке экземпляра роли во время развертывания и обновления клиента. Этот элемент является родительским для элемента `FixedPortRange`.

Элемент `AllocatePublicPortFrom` доступен только при использовании пакета Azure SDK версии 1.7 или выше.

##  <a name="FixedPort"></a> FixedPort
Элемент `FixedPort` указывает порт для внутренней конечной точки, который обеспечивает подключения к конечной точке с балансировкой нагрузки.

Элемент `FixedPort` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `FixedPort`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|порт|int|Обязательный элемент. Порт для внутренней конечной точки. Применение этого атрибута имеет такой же эффект, как и настройка одинаковых значений для верхней и нижней границ диапазона портов `FixedPortRange`.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|

##  <a name="FixedPortRange"></a> FixedPortRange
Элемент `FixedPortRange` указывает диапазон портов, назначаемых внутренней конечной точке или входной конечной точке экземпляра. Он также устанавливает порт, используемый для подключений к конечной точке с балансировкой нагрузки.

> [!NOTE]
>  Элемент `FixedPortRange` работает по-разному в зависимости от того, в каком элементе он находится. Если элемент `FixedPortRange` находится в элементе `InternalEndpoint`, он открывает все порты подсистемы балансировки нагрузки в диапазоне от верхнего до нижнего значения соответствующих атрибутов для всех виртуальных машин, на которых выполняется эта роль. Если элемент `FixedPortRange` находится в элементе `InstanceInputEndpoint`, он открывает только один порт в диапазоне от верхнего до нижнего значения соответствующих атрибутов на каждой виртуальной машине, выполняющей эту роль.

Элемент `FixedPortRange` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `FixedPortRange`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|Min|int|Обязательный элемент. Минимальный номер порта в диапазоне. Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|
|max|string|Обязательный элемент. Максимальный номер порта в диапазоне. Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|

##  <a name="Certificates"></a> Сертификаты
Элемент `Certificates` описывает коллекцию сертификатов для рабочей роли. Этот элемент является родительским для элемента `Certificate`. Роль может иметь любое число связанных сертификатов. Дополнительные сведения об использовании элементов certificate см. в разделе [Шаг 2. Изменение файлов определения службы и конфигурации](cloud-services-configure-ssl-certificate-portal.md#step-2-modify-the-service-definition-and-configuration-files).

##  <a name="Certificate"></a> Certificate
Элемент `Certificate` описывает сертификат, связанный с рабочей ролью.

В таблице ниже описаны атрибуты элемента `Certificate`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Имя этого сертификата, которое используется для ссылки на него, когда оно связано с элементом HTTPS `InputEndpoint`.|
|storeLocation|string|Обязательный элемент. Расположение хранилища сертификатов, в котором размещается этот сертификат на локальном компьютере. Возможные значения: `CurrentUser` и `LocalMachine`.|
|storeName|string|Обязательный элемент. Имя хранилища сертификатов, в котором размещается этот сертификат на локальном компьютере. Возможные значения включают стандартные имена хранилищ `My`, `Root`, `CA`, `Trust`, `Disallowed`, `TrustedPeople`, `TrustedPublisher`, `AuthRoot`, `AddressBook` или любое пользовательское имя хранилища. Если указано пользовательское имя хранилища, хранилище создается автоматически.|
|permissionLevel|string|необязательный параметр. Указывает права доступа, предоставленные процессам роли. Если вы хотите, чтобы только процессы с повышенными привилегиями имели доступ к закрытому ключу, укажите разрешение `elevated`. Разрешение `limitedOrElevated` позволяет всем процессам роли получать доступ к закрытому ключу. Возможные значения: `limitedOrElevated` или `elevated`. По умолчанию используется значение `limitedOrElevated`.|

##  <a name="Imports"></a> Imports
Элемент `Imports` описывает коллекцию модулей импорта для рабочей роли, которые добавляют компоненты в гостевую ОС. Этот элемент является родительским для элемента `Import`. Он является необязательным, и в роли может быть только один блок среды выполнения.

Элемент `Imports` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

##  <a name="Import"></a> Import
Элемент `Import` указывает модуль для добавления в гостевую ОС.

Элемент `Import` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Import`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|moduleName|string|Обязательный элемент. Имя модуля, который нужно импортировать. Допустимыми модулями являются:<br /><br /> — RemoteAccess;<br />— RemoteForwarder;<br />— Diagnostics.<br /><br /> Модули RemoteAccess и RemoteForwarder позволяют настроить экземпляр роли для подключения удаленного рабочего стола. Дополнительные сведения см. в статье [Включение подключения к удаленному рабочему столу для роли в облачных службах Azure](cloud-services-role-enable-remote-desktop-new-portal.md).<br /><br /> Модуль Diagnostics позволяет собирать диагностические данные экземпляра роли.|

##  <a name="Runtime"></a> Runtime
Элемент `Runtime` описывает коллекцию параметров переменных среды для рабочей роли, которые управляют средой выполнения хост-процесса Azure. Этот элемент является родительским для элемента `Environment`. Он является необязательным, и в роли может быть только один блок среды выполнения.

Элемент `Runtime` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Runtime`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|executionContext|string|необязательный параметр. Указывает контекст, в котором запускается процесс роли. Контекст по умолчанию — `limited`.<br /><br /> -   `limited` — процесс запускается без прав администратора.<br />-   `elevated` — процесс запускается с правами администратора.|

##  <a name="Environment"></a> Environment
Элемент `Environment` описывает коллекцию параметров переменных среды для рабочей роли. Этот элемент является родительским для элемента `Variable`. Роль может иметь любое число заданных переменных среды.

##  <a name="Variable"></a> Variable
Элемент `Variable` указывает переменную среды, которая будет установлена ​​в гостевой ОС.

Элемент `Variable` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Variable`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|name|string|Обязательный элемент. Имя переменной среды для установки.|
|value|string|необязательный параметр. Задаваемое значение для переменной среды. Необходимо включить либо атрибут значения, либо элемент `RoleInstanceValue`.|

##  <a name="RoleInstanceValue"></a> RoleInstanceValue
Элемент `RoleInstanceValue` указывает путь xPath, из которого извлекается значение переменной.

В таблице ниже описаны атрибуты элемента `RoleInstanceValue`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|xpath|string|необязательный параметр. Путь расположения параметров развертывания для экземпляра. Дополнительные сведения см. в статье [Предоставление параметров конфигурации ролей как переменной среды с помощью XPath](cloud-services-role-config-xpath.md).<br /><br /> Необходимо включить либо атрибут значения, либо элемент `RoleInstanceValue`.|

##  <a name="EntryPoint"></a> EntryPoint
Элемент `EntryPoint` указывает точку входа для роли. Этот элемент является родительским для элементов `NetFxEntryPoint`. Эти элементы позволяют указать в качестве точки входа роли приложение, отличное от стандартного WaWorkerHost.exe.

Элемент `EntryPoint` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

##  <a name="NetFxEntryPoint"></a> NetFxEntryPoint
Элемент `NetFxEntryPoint` указывает программу, которую следует запустить для роли.

> [!NOTE]
>  Элемент `NetFxEntryPoint` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `NetFxEntryPoint`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|аssemblyName|string|Обязательный элемент. Путь и имя файла сборки, содержащей точку входа. Путь указывается относительно папки **\\%ROLEROOT%\Approot**. (Не включайте **\\%ROLEROOT%\Approot** в `commandLine`. Этот путь предполагается по умолчанию.) **%ROLEROOT%** — это переменная среды, поддерживаемая Azure и представляющая расположение корневой папки для роли. Папка **\\%ROLEROOT%\Approot** представляет папку приложения для вашей роли.|
|targetFrameworkVersion|string|Обязательный элемент. Версия .NET Framework, в которой создана сборка. Например, `targetFrameworkVersion="v4.0"`.|

##  <a name="ProgramEntryPoint"></a> ProgramEntryPoint
Элемент `ProgramEntryPoint` указывает программу, которую следует запустить для роли. Элемент `ProgramEntryPoint` указывает точку входа программы, которая не зависит от сборки .NET.

> [!NOTE]
>  Элемент `ProgramEntryPoint` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `ProgramEntryPoint`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|commandLine|string|Обязательный элемент. Путь, имя файла и все аргументы командной строки для выполнения программы. Путь указывается относительно папки **%ROLEROOT%\Approot**. (Не включайте **%ROLEROOT%\Approot** в commandLine. Этот путь предполагается по умолчанию.) **%ROLEROOT%** — это переменная среды, поддерживаемая Azure и представляющая расположение корневой папки для роли. Папка **%ROLEROOT%\Approot** представляет папку приложения для вашей роли.<br /><br /> Роль очищается, когда завершается программа, поэтому программу следует создавать для продолжительной работы, а не просто для выполнения ограниченной по времени задачи.|
|setReadyOnProcessStart|Логическое|Обязательный элемент. Указывает, должен ли экземпляр роли ожидать от программы командной строки сигнал о начале работы. Сейчас этот аргумент должен иметь значение `true`. Возможность установить значение `false` зарезервирована для будущего использования.|

##  <a name="Startup"></a> Startup
Элемент `Startup` описывает коллекцию задач, выполняемых при запуске роли. Этот элемент может являться родительским для элемента `Variable`. Дополнительные сведения об использовании задач запуска роли см. в статье [Как настроить и выполнить задачи запуска для облачной службы](cloud-services-startup-tasks.md). Этот элемент является необязательным, и в роли может быть только один блок запуска.

В таблице ниже описаны атрибуты элемента `Startup`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|priority|int|Только для внутреннего использования.|

##  <a name="Task"></a> Task
Элемент `Task` указывает задачу запуска, которая выполняется при запуске роли. Задачи запуска могут использоваться для выполнения задач, которые подготавливают роль для запуска, таких как установка программных компонентов или запуск других приложений. Задачи выполняются в порядке их размещения в блоке элементов `Startup`.

Элемент `Task` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Task`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|commandLine|string|Обязательный элемент. Скрипт, например CMD-файл, содержащий команды для выполнения. Команда запуска и пакетные файлы должны быть сохранены в формате ANSI. Форматы файлов, которые размещают маркер порядка байтов в начале файла, не будут обрабатываться должным образом.|
|executionContext|string|Задает контекст, в котором будет выполняться скрипт.<br /><br /> -   `limited` (по умолчанию) — выполняется с теми же привилегиями, что и роль, в которой размещается процесс.<br />-   `elevated` — запуск с правами администратора.|
|taskType|string|Задает поведение выполнения команды.<br /><br /> -   `simple` (по умолчанию) — система ждет завершения задачи перед запуском других задач.<br />-   `background` — система не ждет завершения задачи.<br />-   `foreground` — аналогично фоновому режиму, за исключением того, что роль не перезапускается, пока все задачи переднего плана не будут завершены.|

##  <a name="Contents"></a> Contents
Элемент `Contents` описывает коллекцию содержимого для рабочей роли. Этот элемент является родительским для элемента `Content`.

Элемент `Contents` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

##  <a name="Content"></a> Content
Элемент `Content` определяет исходное расположение содержимого для копирования на виртуальную машину Azure и путь назначения, куда копируется содержимое.

Элемент `Content` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `Content`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|ресурс destination|string|Обязательный элемент. Расположение на виртуальной машине Azure, куда помещается содержимое. Это расположение указывается относительно папки **%ROLEROOT%\Approot**.|

Этот элемент является родительским для элемента `SourceDirectory`.

##  <a name="SourceDirectory"></a> SourceDirectory
Элемент `SourceDirectory` определяет локальный каталог, из которого копируется содержимое. Он используется для определения локального содержимого, которое копируется на виртуальную машину Azure.

Элемент `SourceDirectory` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `SourceDirectory`.

| Атрибут | Тип | Описание |
| --------- | ---- | ----------- |
|path|string|Обязательный элемент. Относительный или абсолютный путь к локальному каталогу, содержимое которого копируется на виртуальную машину Azure. В пути к каталогу поддерживается использование переменных среды.|

## <a name="see-also"></a>См. также
[Схема определения облачных служб Azure (CSFEF-файл)](schema-csdef-file.md)