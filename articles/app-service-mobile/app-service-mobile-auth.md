---
title: "Проверка подлинности и авторизация в мобильных приложениях Azure | Документация Майкрософт"
description: "Справочник принципов и общие сведения о функции проверки подлинности и авторизации для мобильных приложений Azure."
services: app-service\mobile
documentationcenter: 
author: mattchenderson
manager: syntaxc4
editor: 
ms.assetid: a46dbf70-867d-48f6-8885-7f5207ad102e
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 10/01/2016
ms.author: mahender
ms.openlocfilehash: 92c9f91807a6b5d4fea6b504256508f805627a16
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="authentication-and-authorization-in-azure-mobile-apps"></a><span data-ttu-id="386a0-103">Проверка подлинности и авторизация в мобильных приложениях Azure</span><span class="sxs-lookup"><span data-stu-id="386a0-103">Authentication and Authorization in Azure Mobile Apps</span></span>
## <a name="what-is-app-service-authentication--authorization"></a><span data-ttu-id="386a0-104">Что такое проверка подлинности и авторизация службы приложений?</span><span class="sxs-lookup"><span data-stu-id="386a0-104">What is App Service Authentication / Authorization?</span></span>
> [!NOTE]
> <span data-ttu-id="386a0-105">Эта статья будет перенесена в сводную статью [Проверка подлинности и авторизация в службе приложений Azure](../app-service/app-service-authentication-overview.md) , которая содержит информацию о веб-приложениях, мобильных приложениях и приложениях API.</span><span class="sxs-lookup"><span data-stu-id="386a0-105">This topic will be migrated to a consolidated [App Service Authentication / Authorization](../app-service/app-service-authentication-overview.md) topic, which covers Web, Mobile, and API Apps.</span></span>
> 
> 

<span data-ttu-id="386a0-106">Проверка подлинности и авторизация службы приложений — это функция, которая позволяет пользователям приложения выполнять вход без изменений кода, необходимых в серверной части приложения.</span><span class="sxs-lookup"><span data-stu-id="386a0-106">App Service Authentication / Authorization is a feature which allows your application to log in users with no code changes required on the app backend.</span></span> <span data-ttu-id="386a0-107">Она является простым способом обеспечения защиты приложения и работы с данными пользователей.</span><span class="sxs-lookup"><span data-stu-id="386a0-107">It provides an easy way to protect your application and work with per-user data.</span></span>

<span data-ttu-id="386a0-108">Служба приложений использует федеративное удостоверение, когда сторонний **поставщик удостоверений** сохраняет учетные записи и проверяет подлинность пользователей, а приложение использует это удостоверение вместо своего.</span><span class="sxs-lookup"><span data-stu-id="386a0-108">App Service uses federated identity, in which a 3rd-party **identity provider** ("IDP") stores accounts and authenticates users, and the application uses this identity instead of its own.</span></span> <span data-ttu-id="386a0-109">По умолчанию служба приложений поддерживает пять поставщиков удостоверений: *Azure Active Directory*, *Facebook*, *Google*, *учетная запись Майкрософт* и *Twitter*.</span><span class="sxs-lookup"><span data-stu-id="386a0-109">App Service supports five identity providers out of the box: *Azure Active Directory*, *Facebook*, *Google*, *Microsoft Account*, and *Twitter*.</span></span> <span data-ttu-id="386a0-110">Вы можете расширить этот список для своих приложений, интегрировав другого поставщика удостоверений или собственное настраиваемое решение идентификации.</span><span class="sxs-lookup"><span data-stu-id="386a0-110">You can also expand this support for your apps by integrating another identity provider or your own custom identity solution.</span></span>

<span data-ttu-id="386a0-111">Ваше приложение может поддерживать любое количество поставщиков удостоверений, предоставляя конечным пользователям возможность выбора способа входа.</span><span class="sxs-lookup"><span data-stu-id="386a0-111">Your app can leverage any number of these identity providers, so you can provide your end users with options for how they login.</span></span>

<span data-ttu-id="386a0-112">Чтобы немедленно приступить к работе, ознакомьтесь с одним из следующих учебников.</span><span class="sxs-lookup"><span data-stu-id="386a0-112">If you wish to get started right away, please see one of the following tutorials:</span></span>

* <span data-ttu-id="386a0-113">[Добавление проверки подлинности в приложение iOS]</span><span class="sxs-lookup"><span data-stu-id="386a0-113">[Add authentication to your iOS app]</span></span>
* <span data-ttu-id="386a0-114">[Добавление проверки подлинности в приложение Xamarin.iOS]</span><span class="sxs-lookup"><span data-stu-id="386a0-114">[Add authentication to your Xamarin.iOS app]</span></span>
* <span data-ttu-id="386a0-115">[Добавление проверки подлинности в приложение Xamarin.Android]</span><span class="sxs-lookup"><span data-stu-id="386a0-115">[Add authentication to your Xamarin.Android app]</span></span>
* <span data-ttu-id="386a0-116">[Добавление проверки подлинности в приложение Windows]</span><span class="sxs-lookup"><span data-stu-id="386a0-116">[Add Authentication to your Windows app]</span></span>

## <a name="how-authentication-works"></a><span data-ttu-id="386a0-117">Принцип действия проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="386a0-117">How authentication works</span></span>
<span data-ttu-id="386a0-118">Чтобы проверять подлинность с помощью одного из поставщиков удостоверений, сначала необходимо настроить поставщик удостоверений так, чтобы ему было известно о вашем приложении.</span><span class="sxs-lookup"><span data-stu-id="386a0-118">In order to authenticate using one of the identity providers, you first need to configure the identity provider to know about your application.</span></span> <span data-ttu-id="386a0-119">Затем поставщик удостоверений предоставит вам коды и секреты, которые будут указаны в приложении.</span><span class="sxs-lookup"><span data-stu-id="386a0-119">The identity provider will then provide you with IDs and secrets that you provide back to the application.</span></span> <span data-ttu-id="386a0-120">Это позволяет сформировать отношение доверия и дает службе приложений возможность проверять удостоверения.</span><span class="sxs-lookup"><span data-stu-id="386a0-120">This completes the trust relationship and allows App Service to validate identities provided to it.</span></span>

<span data-ttu-id="386a0-121">Эти действия описаны в следующих статьях.</span><span class="sxs-lookup"><span data-stu-id="386a0-121">These steps are detailed in the following topics:</span></span>

* <span data-ttu-id="386a0-122">[Настройка приложения для использования имени входа Azure Active Directory]</span><span class="sxs-lookup"><span data-stu-id="386a0-122">[How to configure your app to use Azure Active Directory login]</span></span>
* <span data-ttu-id="386a0-123">[Настройка приложения для использования имени входа Facebook]</span><span class="sxs-lookup"><span data-stu-id="386a0-123">[How to configure your app to use Facebook login]</span></span>
* <span data-ttu-id="386a0-124">[Настройка приложения для использования имени входа Google]</span><span class="sxs-lookup"><span data-stu-id="386a0-124">[How to configure your app to use Google login]</span></span>
* <span data-ttu-id="386a0-125">[Настройка приложения для использования входа по учетной записи Майкрософт]</span><span class="sxs-lookup"><span data-stu-id="386a0-125">[How to configure your app to use Microsoft Account login]</span></span>
* <span data-ttu-id="386a0-126">[Настройка приложения для использования имени входа Twitter]</span><span class="sxs-lookup"><span data-stu-id="386a0-126">[How to configure your app to use Twitter login]</span></span>

<span data-ttu-id="386a0-127">Выполнив все настройки на серверной стороне, можно изменить клиент для входа.</span><span class="sxs-lookup"><span data-stu-id="386a0-127">Once everything is configured on the backend, you can modify your client to log in.</span></span> <span data-ttu-id="386a0-128">Существует два подхода:</span><span class="sxs-lookup"><span data-stu-id="386a0-128">There are two approaches here:</span></span>

* <span data-ttu-id="386a0-129">использование одной строки кода для входа пользователей с помощью пакета SDK клиента для мобильных приложений;</span><span class="sxs-lookup"><span data-stu-id="386a0-129">Using a single line of code, let the Mobile Apps client SDK sign in users.</span></span>
* <span data-ttu-id="386a0-130">использование пакета SDK, опубликованного указанным поставщиком удостоверений, для определения удостоверения и последующего получения доступа к службе приложений.</span><span class="sxs-lookup"><span data-stu-id="386a0-130">Leverage an SDK published by a given identity provider to establish identity and then gain access to App Service.</span></span>

> [!TIP]
> <span data-ttu-id="386a0-131">Многие приложения должны использовать пакет SDK поставщика для поддержки более естественной процедуры входа и использования возможности обновления и других преимуществ, предлагаемых конкретным поставщиком.</span><span class="sxs-lookup"><span data-stu-id="386a0-131">Most applications should use a provider SDK to get a more native-feeling login experience and to leverage refresh support and other provider-specific benefits.</span></span>
> 
> 

### <a name="how-authentication-without-a-provider-sdk-works"></a><span data-ttu-id="386a0-132">Принцип действия проверки подлинности без пакета SDK поставщика</span><span class="sxs-lookup"><span data-stu-id="386a0-132">How authentication without a provider SDK works</span></span>
<span data-ttu-id="386a0-133">Если вы не хотите настраивать пакет SDK поставщика, можно разрешить мобильным приложениям выполнять за вас вход.</span><span class="sxs-lookup"><span data-stu-id="386a0-133">If you do not wish to set up a provider SDK, you can allow Mobile Apps to perform the login for you.</span></span> <span data-ttu-id="386a0-134">Клиентский пакет SDK мобильных приложений будет открывать веб-представление для выбранного вам поставщика и выполнять процедуру входа.</span><span class="sxs-lookup"><span data-stu-id="386a0-134">The Mobile Apps client SDK will open a web view to the provider of your choosing and complete the sign in.</span></span> <span data-ttu-id="386a0-135">Иногда в блогах и на форумах это называется "серверным потоком" или "управляемым сервером потоком", так как входом управляет сервер, и пакет SDK клиента никогда не получает маркер поставщика.</span><span class="sxs-lookup"><span data-stu-id="386a0-135">Occasionally on blogs and forums you will see this referred to as the "server flow" or "server-directed flow" since the server is managing the login, and the client SDK never receives the provider token.</span></span>

<span data-ttu-id="386a0-136">Код, необходимый для запуска этого потока, рассматривается в учебнике по проверке подлинности для каждой платформы.</span><span class="sxs-lookup"><span data-stu-id="386a0-136">The code needed to start this flow is covered in the authentication tutorial for each platform.</span></span> <span data-ttu-id="386a0-137">В конце потока у клиентского пакета SDK есть маркер службы приложений, и маркер автоматически присоединяется ко всем запросам к серверной части.</span><span class="sxs-lookup"><span data-stu-id="386a0-137">At the end of the flow, the client SDK has an App Service token, and the token is automatically attached to all requests to the backend.</span></span>

### <a name="how-authentication-with-a-provider-sdk-works"></a><span data-ttu-id="386a0-138">Принцип действия проверки подлинности с пакетом SDK поставщика</span><span class="sxs-lookup"><span data-stu-id="386a0-138">How authentication with a provider SDK works</span></span>
<span data-ttu-id="386a0-139">Используя пакет SDK поставщика, вы можете связать процедуру входа с ОС платформы, на которой работает приложение.</span><span class="sxs-lookup"><span data-stu-id="386a0-139">Working with a provider SDK allows the log-in experience to interact more tightly with the platform OS the app is running on.</span></span> <span data-ttu-id="386a0-140">При этом вы также получаете маркер поставщика и некоторые сведения о пользователях на стороне клиента, что упрощает использование Graph API и настройку пользовательского интерфейса.</span><span class="sxs-lookup"><span data-stu-id="386a0-140">This also gives you a provider token and some user information on the client, which makes it much easier to consume graph APIs and customize the user experience.</span></span> <span data-ttu-id="386a0-141">Иногда в блогах и на форумах это может называться "клиентским потоком" или "управляемым клиентом потоком", так как управление входом на клиенте выполняет код, и код клиента имеет доступ к маркеру поставщика.</span><span class="sxs-lookup"><span data-stu-id="386a0-141">Occasionally on blogs and forums you will see this referred to as the "client flow" or "client-directed flow" since code on the client is handling the login, and the client code has access to a provider token.</span></span>

<span data-ttu-id="386a0-142">Полученный маркер поставщика необходимо отправить в службу приложений для проверки.</span><span class="sxs-lookup"><span data-stu-id="386a0-142">Once a provider token is obtained, it needs to be sent to App Service for validation.</span></span> <span data-ttu-id="386a0-143">В конце потока у клиентского пакета SDK есть маркер службы приложений, и маркер автоматически присоединяется ко всем запросам к серверной части.</span><span class="sxs-lookup"><span data-stu-id="386a0-143">At the end of the flow, the client SDK has an App Service token, and the token is automatically attached to all requests to the backend.</span></span> <span data-ttu-id="386a0-144">Если необходимо, разработчик также может сохранить ссылку на маркер поставщика.</span><span class="sxs-lookup"><span data-stu-id="386a0-144">The developer can also keep a reference to the provider token if they so choose.</span></span>

## <a name="how-authorization-works"></a><span data-ttu-id="386a0-145">Принцип действия авторизации</span><span class="sxs-lookup"><span data-stu-id="386a0-145">How authorization works</span></span>
<span data-ttu-id="386a0-146">Для параметра **Предпринимаемое действие, если проверка подлинности для запроса не выполнена**, используемого для проверки подлинности и авторизации службы приложений, доступно несколько значений.</span><span class="sxs-lookup"><span data-stu-id="386a0-146">App Service Authentication / Authorization exposes several choices for **Action to take when request is not authenticated**.</span></span> <span data-ttu-id="386a0-147">Прежде чем код получит конкретный запрос, служба приложений может проверить, прошел ли запрос проверку подлинности. Если проверка подлинности не пройдена, запрос отклоняется, и перед повторением действия предпринимается попытка входа пользователя.</span><span class="sxs-lookup"><span data-stu-id="386a0-147">Before your code receives a given request, you can have App Service check to see if the request is authenticated and if not, reject it and attempt to have the user log in before trying again.</span></span>

<span data-ttu-id="386a0-148">Один из вариантов — перенаправление запросов без проверки подлинности к одному из поставщиков удостоверений.</span><span class="sxs-lookup"><span data-stu-id="386a0-148">One option is to have unauthenticated requests redirect to one of the identity providers.</span></span> <span data-ttu-id="386a0-149">В этом случае в веб-браузере пользователь будет перенаправлен на новую страницу.</span><span class="sxs-lookup"><span data-stu-id="386a0-149">In a web browser, this would actually take the user to a new page.</span></span> <span data-ttu-id="386a0-150">Однако мобильный клиент нельзя перенаправить таким образом, и ответы без проверки подлинности будут получать код состояния HTTP *401 — Не санкционировано*.</span><span class="sxs-lookup"><span data-stu-id="386a0-150">However, your mobile client cannot be redirected in this way, and unauthenticated responses will receive an HTTP *401 Unauthorized* response.</span></span> <span data-ttu-id="386a0-151">С учетом этого первый запрос, который делает ваш клиент, всегда должен быть направлен в конечную точку входа. После этого можно выполнять вызовы других API.</span><span class="sxs-lookup"><span data-stu-id="386a0-151">Given this, the first request your client makes should always be to the login endpoint, and then you can make calls to any other APIs.</span></span> <span data-ttu-id="386a0-152">Если вы пытаетесь вызвать другой API перед входом, ваш клиент получит ошибку.</span><span class="sxs-lookup"><span data-stu-id="386a0-152">If you attempt to call another API before logging in, your client will receive an error.</span></span>

<span data-ttu-id="386a0-153">Чтобы получить более строгий контроль над тем, какие конечные точки требуют проверку подлинности, можно выбрать параметр "Никаких действий (разрешить выполнение запроса)" для запросов без проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="386a0-153">If you wish to have more granular control over which endpoints require authentication, you can also pick "No action (allow request)" for unauthenticated requests.</span></span> <span data-ttu-id="386a0-154">В этом случае все решения относительно проверки переносятся в код приложения.</span><span class="sxs-lookup"><span data-stu-id="386a0-154">In this case, all authentication decisions are deferred to your application code.</span></span> <span data-ttu-id="386a0-155">Это также позволяет разрешить доступ конкретным пользователям на основе правил настраиваемой авторизации.</span><span class="sxs-lookup"><span data-stu-id="386a0-155">This also allows you to allow access to specific users based on custom authorization rules.</span></span>

## <a name="documentation"></a><span data-ttu-id="386a0-156">Документация</span><span class="sxs-lookup"><span data-stu-id="386a0-156">Documentation</span></span>
<span data-ttu-id="386a0-157">В следующих учебниках показано, как добавить проверку подлинности в мобильные клиенты с помощью службы приложений.</span><span class="sxs-lookup"><span data-stu-id="386a0-157">The following tutorials show how to add authentication to your mobile clients using App Service:</span></span>

* <span data-ttu-id="386a0-158">[Добавление проверки подлинности в приложение iOS]</span><span class="sxs-lookup"><span data-stu-id="386a0-158">[Add authentication to your iOS app]</span></span>
* <span data-ttu-id="386a0-159">[Добавление проверки подлинности в приложение Xamarin.iOS]</span><span class="sxs-lookup"><span data-stu-id="386a0-159">[Add authentication to your Xamarin.iOS app]</span></span>
* <span data-ttu-id="386a0-160">[Добавление проверки подлинности в приложение Xamarin.Android]</span><span class="sxs-lookup"><span data-stu-id="386a0-160">[Add authentication to your Xamarin.Android app]</span></span>
* <span data-ttu-id="386a0-161">[Добавление проверки подлинности в приложение Windows]</span><span class="sxs-lookup"><span data-stu-id="386a0-161">[Add Authentication to your Windows app]</span></span>

<span data-ttu-id="386a0-162">В следующих учебниках содержатся сведения о настройке службы приложений для использования разных поставщиков проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="386a0-162">The following tutorials show how to configure App Service to leverage different authentication providers:</span></span>

* <span data-ttu-id="386a0-163">[Настройка приложения для использования имени входа Azure Active Directory]</span><span class="sxs-lookup"><span data-stu-id="386a0-163">[How to configure your app to use Azure Active Directory login]</span></span>
* <span data-ttu-id="386a0-164">[Настройка приложения для использования имени входа Facebook]</span><span class="sxs-lookup"><span data-stu-id="386a0-164">[How to configure your app to use Facebook login]</span></span>
* <span data-ttu-id="386a0-165">[Настройка приложения для использования имени входа Google]</span><span class="sxs-lookup"><span data-stu-id="386a0-165">[How to configure your app to use Google login]</span></span>
* <span data-ttu-id="386a0-166">[Настройка приложения для использования входа по учетной записи Майкрософт]</span><span class="sxs-lookup"><span data-stu-id="386a0-166">[How to configure your app to use Microsoft Account login]</span></span>
* <span data-ttu-id="386a0-167">[Настройка приложения для использования имени входа Twitter]</span><span class="sxs-lookup"><span data-stu-id="386a0-167">[How to configure your app to use Twitter login]</span></span>

<span data-ttu-id="386a0-168">Если вы хотите использовать систему удостоверений, отличную от указанных здесь, можно также использовать [предварительную версию поддержки настраиваемой проверки подлинности в серверном пакете SDK .NET](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#custom-auth).</span><span class="sxs-lookup"><span data-stu-id="386a0-168">If you wish to use an identity system other than the ones provided here, you can also leverage the [preview custom authentication support in the .NET server SDK](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md#custom-auth).</span></span>

<span data-ttu-id="386a0-169">[Добавление проверки подлинности в приложение iOS]: app-service-mobile-ios-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="386a0-169">[Add authentication to your iOS app]: app-service-mobile-ios-get-started-users.md</span></span>
<span data-ttu-id="386a0-170">[Добавление проверки подлинности в приложение Xamarin.iOS]: app-service-mobile-xamarin-ios-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="386a0-170">[Add authentication to your Xamarin.iOS app]: app-service-mobile-xamarin-ios-get-started-users.md</span></span>
<span data-ttu-id="386a0-171">[Добавление проверки подлинности в приложение Xamarin.Android]: app-service-mobile-xamarin-android-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="386a0-171">[Add authentication to your Xamarin.Android app]: app-service-mobile-xamarin-android-get-started-users.md</span></span>
<span data-ttu-id="386a0-172">[Добавление проверки подлинности в приложение Windows]: app-service-mobile-windows-store-dotnet-get-started-users.md</span><span class="sxs-lookup"><span data-stu-id="386a0-172">[Add Authentication to your Windows app]: app-service-mobile-windows-store-dotnet-get-started-users.md</span></span>

<span data-ttu-id="386a0-173">[Настройка приложения для использования имени входа Azure Active Directory]: app-service-mobile-how-to-configure-active-directory-authentication.md</span><span class="sxs-lookup"><span data-stu-id="386a0-173">[How to configure your app to use Azure Active Directory login]: app-service-mobile-how-to-configure-active-directory-authentication.md</span></span>
<span data-ttu-id="386a0-174">[Настройка приложения для использования имени входа Facebook]: app-service-mobile-how-to-configure-facebook-authentication.md</span><span class="sxs-lookup"><span data-stu-id="386a0-174">[How to configure your app to use Facebook login]: app-service-mobile-how-to-configure-facebook-authentication.md</span></span>
<span data-ttu-id="386a0-175">[Настройка приложения для использования имени входа Google]: app-service-mobile-how-to-configure-google-authentication.md</span><span class="sxs-lookup"><span data-stu-id="386a0-175">[How to configure your app to use Google login]: app-service-mobile-how-to-configure-google-authentication.md</span></span>
<span data-ttu-id="386a0-176">[Настройка приложения для использования входа по учетной записи Майкрософт]: app-service-mobile-how-to-configure-microsoft-authentication.md</span><span class="sxs-lookup"><span data-stu-id="386a0-176">[How to configure your app to use Microsoft Account login]: app-service-mobile-how-to-configure-microsoft-authentication.md</span></span>
<span data-ttu-id="386a0-177">[Настройка приложения для использования имени входа Twitter]: app-service-mobile-how-to-configure-twitter-authentication.md</span><span class="sxs-lookup"><span data-stu-id="386a0-177">[How to configure your app to use Twitter login]: app-service-mobile-how-to-configure-twitter-authentication.md</span></span>
