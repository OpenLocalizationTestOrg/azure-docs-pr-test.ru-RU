---
title: "Обновление приложения мобильных служб до службы приложений Azure — Node.js"
description: "Узнайте, как без труда обновить приложение мобильных служб до мобильного приложения службы приложений."
services: app-service\mobile
documentationcenter: 
author: ggailey777
manager: yochayk
editor: 
ms.assetid: c58f6df0-5aad-40a3-bddc-319c378218e3
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile
ms.devlang: node
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: ce0572e85c258aa377c3eea7923d43a30c935bb2
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="upgrade-your-existing-nodejs-azure-mobile-service-to-app-service"></a><span data-ttu-id="fe057-103">Обновление существующего приложения мобильной службы Azure Node.js до службы приложений</span><span class="sxs-lookup"><span data-stu-id="fe057-103">Upgrade your existing Node.js Azure Mobile Service to App Service</span></span>
<span data-ttu-id="fe057-104">Мобильное приложение службы приложений — это новый способ сборки мобильных приложений с помощью Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="fe057-104">App Service Mobile is a new way to build mobile applications using Microsoft Azure.</span></span> <span data-ttu-id="fe057-105">Дополнительные сведения см. в статье [Общие сведения о мобильных приложениях].</span><span class="sxs-lookup"><span data-stu-id="fe057-105">To learn more, see [What are Mobile Apps?].</span></span>

<span data-ttu-id="fe057-106">В этой статье описывается процесс обновления существующего серверного приложения Node.js мобильных служб Azure до нового мобильного приложения службы приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-106">This topic describes how to upgrade an existing Node.js backend application from Azure Mobile Services to a new App Service Mobile Apps.</span></span> <span data-ttu-id="fe057-107">Во время обновления существующее приложение мобильных служб может продолжать работать.</span><span class="sxs-lookup"><span data-stu-id="fe057-107">While you perform this upgrade, your existing Mobile Services application can continue to operate.</span></span>  <span data-ttu-id="fe057-108">Если необходимо обновить приложение с серверной частью Node.js, см. статью [Обновление существующего приложения мобильной службы Azure .NET до службы приложений](app-service-mobile-net-upgrading-from-mobile-services.md).</span><span class="sxs-lookup"><span data-stu-id="fe057-108">If you need to upgrade a Node.js backend application, refer to [Upgrading your .NET Mobile Services](app-service-mobile-net-upgrading-from-mobile-services.md).</span></span>

<span data-ttu-id="fe057-109">Когда мобильное серверное приложение обновляется до службы приложений Azure, оно получает доступ ко всем возможностям службы приложений. Тарификация при этом будет осуществляться в соответствии с [ценами службы приложений], а не мобильных служб.</span><span class="sxs-lookup"><span data-stu-id="fe057-109">When a mobile backend is upgraded to Azure App Service, it has access to all App Service features and are billed according to [App Service pricing], not Mobile Services pricing.</span></span>

## <a name="migrate-vs-upgrade"></a><span data-ttu-id="fe057-110">Миграция или обновление</span><span class="sxs-lookup"><span data-stu-id="fe057-110">Migrate vs. upgrade</span></span>
[!INCLUDE [app-service-mobile-migrate-vs-upgrade](../../includes/app-service-mobile-migrate-vs-upgrade.md)]

> [!TIP]
> <span data-ttu-id="fe057-111">Перед обновлением рекомендуется [выполнить миграцию](app-service-mobile-migrating-from-mobile-services.md) .</span><span class="sxs-lookup"><span data-stu-id="fe057-111">It is recommended that you [perform a migration](app-service-mobile-migrating-from-mobile-services.md) before going through an upgrade.</span></span> <span data-ttu-id="fe057-112">Таким образом, к обеим версиям приложения будет применен один тарифный план службы, а дополнительные затраты будут исключены.</span><span class="sxs-lookup"><span data-stu-id="fe057-112">This way, you can put both versions of your application on the same App Service Plan and incur no additional cost.</span></span>
>
>

### <a name="improvements-in-mobile-apps-nodejs-server-sdk"></a><span data-ttu-id="fe057-113">Улучшения в пакете SDK сервера Node.js мобильных приложений</span><span class="sxs-lookup"><span data-stu-id="fe057-113">Improvements in Mobile Apps Node.js server SDK</span></span>
<span data-ttu-id="fe057-114">Обновление до нового [пакета SDK для мобильных приложений](https://www.npmjs.com/package/azure-mobile-apps) содержит множество улучшений, в частности:</span><span class="sxs-lookup"><span data-stu-id="fe057-114">Upgrading to the new [Mobile Apps SDK](https://www.npmjs.com/package/azure-mobile-apps) provides a lot of improvements, including:</span></span>

* <span data-ttu-id="fe057-115">Новый упрощенный пакет SDK для Node, созданный на [платформе Express](http://expressjs.com/en/index.html), разработан специально для новых версий Node, которые будут выпускаться.</span><span class="sxs-lookup"><span data-stu-id="fe057-115">Based on the [Express framework](http://expressjs.com/en/index.html), the new Node SDK is light-weight and designed to keep up with new Node versions as they come out.</span></span> <span data-ttu-id="fe057-116">Поведение приложения можно настроить с помощью ПО промежуточного слоя Express.</span><span class="sxs-lookup"><span data-stu-id="fe057-116">You can customize the application behavior with Express middleware.</span></span>
* <span data-ttu-id="fe057-117">Значительное повышение производительности по сравнению с пакетом SDK для мобильных служб.</span><span class="sxs-lookup"><span data-stu-id="fe057-117">Significant performance improvements compared to the Mobile Services SDK.</span></span>
* <span data-ttu-id="fe057-118">Веб-сайт можно разместить вместе с мобильным сервером. Аналогичным образом можно легко добавить пакет SDK для мобильных приложений Azure в любое существующее приложение express.v4.</span><span class="sxs-lookup"><span data-stu-id="fe057-118">You can now host a website together with your mobile backend; similarly, it's easy to add the Azure Mobile SDK to any existing express.v4 application.</span></span>
* <span data-ttu-id="fe057-119">Пакет SDK для мобильных приложений предназначен для кроссплатформенной и локальной разработки. Поэтому приложения с его использованием можно разрабатывать и запускать локально на платформах Windows, Linux и OSX.</span><span class="sxs-lookup"><span data-stu-id="fe057-119">Built for cross-platform and local development, the Mobile Apps SDK can be developed and run locally on Windows, Linux, and OSX platforms.</span></span> <span data-ttu-id="fe057-120">Теперь стало удобнее использовать распространенные методы разработки Node (например, выполнение тестов [Mocha](https://mochajs.org/) перед развертыванием).</span><span class="sxs-lookup"><span data-stu-id="fe057-120">It's now easy to use common Node development techniques like running [Mocha](https://mochajs.org/) tests prior to deployment.</span></span>

## <span data-ttu-id="fe057-121"><a name="overview"></a>Общие сведения об обновлении</span><span class="sxs-lookup"><span data-stu-id="fe057-121"><a name="overview"></a>Basic upgrade overview</span></span>
<span data-ttu-id="fe057-122">Чтобы упростить обновление серверной части Node.js, служба приложений Azure предоставила пакет обеспечения совместимости.</span><span class="sxs-lookup"><span data-stu-id="fe057-122">To aid in upgrading a Node.js backend, Azure App Service has provided a compatibility package.</span></span>  <span data-ttu-id="fe057-123">После обновления вы получите новый сайт, который можно развернуть в службе приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-123">After upgrade, you will have a niew site that can be deployed to a new App Service site.</span></span>

<span data-ttu-id="fe057-124">Пакеты SDK для клиента мобильных служб **несовместимы** с новым пакетом SDK для сервера мобильных приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-124">The Mobile Services client SDKs are **not** compatible with the new Mobile Apps server SDK.</span></span> <span data-ttu-id="fe057-125">Чтобы обеспечить непрерывность обслуживания приложения, не следует публиковать изменения на сайте, который в настоящее время обслуживает опубликованные клиенты.</span><span class="sxs-lookup"><span data-stu-id="fe057-125">In order to provide continuity of service for your app, you should not publish changes to a site currently serving published clients.</span></span> <span data-ttu-id="fe057-126">Вместо этого нужно создать новое мобильное приложение, которое является дубликатом.</span><span class="sxs-lookup"><span data-stu-id="fe057-126">Instead, you should create a new mobile app that serves as a duplicate.</span></span> <span data-ttu-id="fe057-127">Это приложение можно включить в тот же план службы приложений, чтобы избежать дополнительных финансовых затрат.</span><span class="sxs-lookup"><span data-stu-id="fe057-127">You can put this application on the same App Service plan to avoid incurring additional financial cost.</span></span>

<span data-ttu-id="fe057-128">После этого у вас будет две версии приложения: одна, которая остается без изменений и обслуживает опубликованные приложения на практике, и другая, которую можно обновить и ориентировать на новый выпуск клиента.</span><span class="sxs-lookup"><span data-stu-id="fe057-128">You will then have two versions of the application: one that stays the same and serves published apps in the wild, and the other which you can then upgrade and target with a new client release.</span></span> <span data-ttu-id="fe057-129">Переносить и тестировать код можно в любое удобное для вас время. Однако перед этим необходимо убедиться, что внесенные исправления применены к обеим версиям.</span><span class="sxs-lookup"><span data-stu-id="fe057-129">You can move and test your code at your pace, but you should make sure that any bug fixes you make get applied to both.</span></span> <span data-ttu-id="fe057-130">Если вы считаете, что до последней версии уже обновлено требуемое количество клиентских приложений, при желании можно удалить исходное перенесенное приложение.</span><span class="sxs-lookup"><span data-stu-id="fe057-130">Once you feel that a desired number of client apps in the wild have updated to the latest version, you can delete the original migrated app if you desire.</span></span> <span data-ttu-id="fe057-131">При размещении в одном плане службы приложений с мобильным приложением дополнительная плата не взимается.</span><span class="sxs-lookup"><span data-stu-id="fe057-131">It doesn't incur any additional monetary costs, if hosted in the same App Service plan as your Mobile App.</span></span>

<span data-ttu-id="fe057-132">Полная схема процесса обновления выглядит следующим образом.</span><span class="sxs-lookup"><span data-stu-id="fe057-132">The full outline for the upgrade process is as follows:</span></span>

1. <span data-ttu-id="fe057-133">Скачайте имеющуюся (перенесенную) мобильную службу Azure.</span><span class="sxs-lookup"><span data-stu-id="fe057-133">Download your existing (migrated) Azure Mobile Service.</span></span>
2. <span data-ttu-id="fe057-134">Преобразуйте проект в мобильное приложение Azure с помощью пакета обеспечения совместимости.</span><span class="sxs-lookup"><span data-stu-id="fe057-134">Convert the project to an Azure Mobile App using the compatibility package.</span></span>
3. <span data-ttu-id="fe057-135">Устраните все различия (например, параметры проверки подлинности).</span><span class="sxs-lookup"><span data-stu-id="fe057-135">Correct any differences (such as authentication settings).</span></span>
4. <span data-ttu-id="fe057-136">Разверните преобразованный проект мобильного приложения Azure в новую службу приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-136">Deploy your converted Azure Mobile App project to a new App Service.</span></span>
5. <span data-ttu-id="fe057-137">Выпустите новую версию клиентского приложения, которая использует новое мобильное приложение.</span><span class="sxs-lookup"><span data-stu-id="fe057-137">Release a new version of your client application that use the new Mobile App.</span></span>
6. <span data-ttu-id="fe057-138">(Необязательно.) Удалите исходное перенесенное приложение мобильной службы.</span><span class="sxs-lookup"><span data-stu-id="fe057-138">(Optional) Delete your original migrated mobile service app.</span></span>

<span data-ttu-id="fe057-139">Удаление может произойти при отсутствии трафика к исходному перенесенному приложению мобильной службы.</span><span class="sxs-lookup"><span data-stu-id="fe057-139">Deletion can occur when you don't see any traffic on your original migrated mobile service.</span></span>

## <span data-ttu-id="fe057-140"><a name="install-npm-package"></a> Установка необходимых компонентов</span><span class="sxs-lookup"><span data-stu-id="fe057-140"><a name="install-npm-package"></a> Install the Pre-requisites</span></span>
<span data-ttu-id="fe057-141">На локальном компьютере необходимо установить [Node].</span><span class="sxs-lookup"><span data-stu-id="fe057-141">You should install [Node] on your local machine.</span></span>  <span data-ttu-id="fe057-142">Кроме того, требуется установить пакет обеспечения совместимости.</span><span class="sxs-lookup"><span data-stu-id="fe057-142">You should also install the compatibility package.</span></span>  <span data-ttu-id="fe057-143">После установки Node можно выполнить следующую команду в новой командной строке или строке PowerShell:</span><span class="sxs-lookup"><span data-stu-id="fe057-143">After Node is installed, you can run the following command from a new cmd or PowerShell prompt:</span></span>

```npm i -g azure-mobile-apps-compatibility```

## <span data-ttu-id="fe057-144"><a name="obtain-ams-scripts"></a> Получение скриптов мобильных служб Azure</span><span class="sxs-lookup"><span data-stu-id="fe057-144"><a name="obtain-ams-scripts"></a> Obtain your Azure Mobile Services Scripts</span></span>
* <span data-ttu-id="fe057-145">Войдите на [портал Azure].</span><span class="sxs-lookup"><span data-stu-id="fe057-145">Log in to the [Azure Portal].</span></span>
* <span data-ttu-id="fe057-146">Чтобы найти сайт мобильных служб, щелкните **Все ресурсы** или **Службы приложений**.</span><span class="sxs-lookup"><span data-stu-id="fe057-146">Using **All Resources** or **App Services**, find your Mobile Services site.</span></span>
* <span data-ttu-id="fe057-147">Чтобы перейти на сайт Kudu, на сайте щелкните **Средства** -> **Kudu** -> **Перейти**.</span><span class="sxs-lookup"><span data-stu-id="fe057-147">Within the site, click on **Tools** -> **Kudu** -> **Go** to open the Kudu site.</span></span>
* <span data-ttu-id="fe057-148">Чтобы открыть консоль отладки, щелкните **Консоль отладки** -> **PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="fe057-148">Click on **Debug Console** -> **PowerShell** to open the Debug console.</span></span>
* <span data-ttu-id="fe057-149">Перейдите в папку `site/wwwroot/App_Data/config` , щелкнув каждый каталог по очереди.</span><span class="sxs-lookup"><span data-stu-id="fe057-149">Navigate to `site/wwwroot/App_Data/config` by clicking on each directory in turn</span></span>
* <span data-ttu-id="fe057-150">Щелкните значок скачивания рядом с каталогом `scripts` .</span><span class="sxs-lookup"><span data-stu-id="fe057-150">Click on the download icon next to the `scripts` directory.</span></span>

<span data-ttu-id="fe057-151">После этого будут скачаны скрипты в формате ZIP.</span><span class="sxs-lookup"><span data-stu-id="fe057-151">This will download the scripts in ZIP format.</span></span>  <span data-ttu-id="fe057-152">Создайте каталог на локальном компьютере и распакуйте в нем файл `scripts.ZIP` .</span><span class="sxs-lookup"><span data-stu-id="fe057-152">Create a new directory on your local machine and unpack the `scripts.ZIP` file within the directory.</span></span>  <span data-ttu-id="fe057-153">В результате будет создан каталог `scripts` .</span><span class="sxs-lookup"><span data-stu-id="fe057-153">This will create a `scripts` directory.</span></span>

## <span data-ttu-id="fe057-154"><a name="scaffold-app"></a> Формирование шаблонов серверной части новых мобильных приложений Azure</span><span class="sxs-lookup"><span data-stu-id="fe057-154"><a name="scaffold-app"></a> Scaffold the new Azure Mobile Apps backend</span></span>
<span data-ttu-id="fe057-155">Выполните следующую команду в каталоге, содержащем скрипты:</span><span class="sxs-lookup"><span data-stu-id="fe057-155">Run the following command from the directory containing the scripts directory:</span></span>

```scaffold-mobile-app scripts out```

<span data-ttu-id="fe057-156">Будут созданы сформированные шаблоны серверной части мобильных приложений Azure в каталоге `out`.</span><span class="sxs-lookup"><span data-stu-id="fe057-156">This will create a scaffolded Azure Mobile Apps backend in the `out` directory.</span></span>  <span data-ttu-id="fe057-157">Рекомендуется зарегистрировать каталог `out` в желаемом репозитории исходного кода. Хотя это и не обязательно.</span><span class="sxs-lookup"><span data-stu-id="fe057-157">Although not required, it's a good idea to check the `out` directory into a source code repository of your choice.</span></span>

## <span data-ttu-id="fe057-158"><a name="deploy-ama-app"></a> Развертывание серверной части мобильных приложений Azure</span><span class="sxs-lookup"><span data-stu-id="fe057-158"><a name="deploy-ama-app"></a> Deploy your Azure Mobile Apps backend</span></span>
<span data-ttu-id="fe057-159">Во время развертывания необходимо сделать следующее:</span><span class="sxs-lookup"><span data-stu-id="fe057-159">During deployment, you will need to do the following:</span></span>

1. <span data-ttu-id="fe057-160">Создайте мобильное приложение на [портал Azure].</span><span class="sxs-lookup"><span data-stu-id="fe057-160">Create a new Mobile App in the [Azure Portal].</span></span>
2. <span data-ttu-id="fe057-161">Выполните скрипт `createViews.sql` в подключенной базе данных.</span><span class="sxs-lookup"><span data-stu-id="fe057-161">Run the `createViews.sql` script on your connected database.</span></span>
3. <span data-ttu-id="fe057-162">Свяжите базу данных, привязанную к вашей мобильной службе, с новой службой приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-162">Link the database that is linked to your Mobile Service to your new App Service.</span></span>
4. <span data-ttu-id="fe057-163">Свяжите все ресурсы (например, Центры уведомлений) с новой службой приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-163">Link any other resources (such as Notification Hubs) to the new App Service.</span></span>
5. <span data-ttu-id="fe057-164">Разверните созданный код на новом сайте.</span><span class="sxs-lookup"><span data-stu-id="fe057-164">Deploy the generated code to your new site.</span></span>

### <a name="create-a-new-mobile-app"></a><span data-ttu-id="fe057-165">Создание нового мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="fe057-165">Create a new Mobile App</span></span>
1. <span data-ttu-id="fe057-166">Войдите на [портал Azure].</span><span class="sxs-lookup"><span data-stu-id="fe057-166">Log in at the [Azure Portal].</span></span>
2. <span data-ttu-id="fe057-167">Щелкните **+Создать** > **Интернет+мобильные устройства** > **Мобильное приложение**, а затем введите имя серверной части мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="fe057-167">Click **+NEW** > **Web + Mobile** > **Mobile App**, then provide a name for your Mobile App backend.</span></span>
3. <span data-ttu-id="fe057-168">В поле **Группа ресурсов**выберите существующую группу ресурсов или создайте новую (с тем же именем, что и у приложения).</span><span class="sxs-lookup"><span data-stu-id="fe057-168">For the **Resource Group**, select an existing resource group, or create a new one (using the same name as your app.)</span></span>

    <span data-ttu-id="fe057-169">Выберите другой план службы приложений или создайте новый.</span><span class="sxs-lookup"><span data-stu-id="fe057-169">You can either select another App Service plan or create a new one.</span></span> <span data-ttu-id="fe057-170">Дополнительные сведения о планах службы приложений, а также о создании плана другой ценовой категории и в другом расположении см. в статье [Подробный обзор планов службы приложений Azure](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span><span class="sxs-lookup"><span data-stu-id="fe057-170">For more about App Services plans and how to create a new plan in a different pricing tier and in your desired location, see [Azure App Service plans in-depth overview](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md).</span></span>
4. <span data-ttu-id="fe057-171">В качестве **плана службы приложений**используется план по умолчанию (для [уровня "Стандартный"](https://azure.microsoft.com/pricing/details/app-service/)).</span><span class="sxs-lookup"><span data-stu-id="fe057-171">For the **App Service plan**, the default plan (in the [Standard tier](https://azure.microsoft.com/pricing/details/app-service/)) is selected.</span></span> <span data-ttu-id="fe057-172">Вы также можете [создать план](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md#create-an-app-service-plan) или выбрать другой.</span><span class="sxs-lookup"><span data-stu-id="fe057-172">You can also  select a different plan, or [create a new one](../app-service/azure-web-sites-web-hosting-plans-in-depth-overview.md#create-an-app-service-plan).</span></span> <span data-ttu-id="fe057-173">Параметры плана службы приложений определяют [расположение, функции, стоимость и вычислительные ресурсы](https://azure.microsoft.com/pricing/details/app-service/) , связанные с вашим приложением.</span><span class="sxs-lookup"><span data-stu-id="fe057-173">The App Service plan's settings determine the [location, features, cost and compute resources](https://azure.microsoft.com/pricing/details/app-service/) associated with your app.</span></span>

    <span data-ttu-id="fe057-174">Выбрав план, нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="fe057-174">After you decide on the plan, click **Create**.</span></span> <span data-ttu-id="fe057-175">Будет создана серверная часть мобильного приложения,</span><span class="sxs-lookup"><span data-stu-id="fe057-175">This creates the Mobile App backend.</span></span>

### <a name="run-createviewssql"></a><span data-ttu-id="fe057-176">Выполнение CreateViews.SQL</span><span class="sxs-lookup"><span data-stu-id="fe057-176">Run CreateViews.SQL</span></span>
<span data-ttu-id="fe057-177">Сформированный шаблон приложения содержит файл с именем `createViews.sql`.</span><span class="sxs-lookup"><span data-stu-id="fe057-177">The scaffolded app contains a file called `createViews.sql`.</span></span>  <span data-ttu-id="fe057-178">Этот скрипт должен выполняться в целевой базе данных.</span><span class="sxs-lookup"><span data-stu-id="fe057-178">This script must be executed against the target database.</span></span>  <span data-ttu-id="fe057-179">Строку подключения целевой базы данных можно получить из перенесенной мобильной службы в разделе **Строки подключения** в колонке **Параметры**.</span><span class="sxs-lookup"><span data-stu-id="fe057-179">The connection string for the target database can be obtained from your migrated mobile service from the **Settings** blade under **Connection Strings**.</span></span>  <span data-ttu-id="fe057-180">Ее название — `MS_TableConnectionString`.</span><span class="sxs-lookup"><span data-stu-id="fe057-180">It is named `MS_TableConnectionString`.</span></span>

<span data-ttu-id="fe057-181">Этот скрипт можно выполнить в среде SQL Server Management Studio или Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="fe057-181">You can run this script from within SQL Server Management Studio or Visual Studio.</span></span>

### <a name="link-the-database-to-your-app-service"></a><span data-ttu-id="fe057-182">Связывание базы данных со службой приложений</span><span class="sxs-lookup"><span data-stu-id="fe057-182">Link the Database to your App Service</span></span>
<span data-ttu-id="fe057-183">Чтобы связать имеющуюся базу данных со службой приложений, сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="fe057-183">Link the existing database to your App Service:</span></span>

* <span data-ttu-id="fe057-184">Откройте службу приложений на [портал Azure].</span><span class="sxs-lookup"><span data-stu-id="fe057-184">In the [Azure Portal], open your App Service.</span></span>
* <span data-ttu-id="fe057-185">Выберите **Все параметры** -> **Подключения к данным**.</span><span class="sxs-lookup"><span data-stu-id="fe057-185">Select **All Settings** -> **Data Connections**.</span></span>
* <span data-ttu-id="fe057-186">Щелкните **+ Add**(+ Добавить).</span><span class="sxs-lookup"><span data-stu-id="fe057-186">Click on **+ Add**.</span></span>
* <span data-ttu-id="fe057-187">В раскрывающемся списке выберите **База данных SQL**</span><span class="sxs-lookup"><span data-stu-id="fe057-187">In the drop-down, select **SQL Database**</span></span>
* <span data-ttu-id="fe057-188">В разделе **База данных SQL** выберите имеющуюся базу данных, а затем щелкните **Выбрать**.</span><span class="sxs-lookup"><span data-stu-id="fe057-188">Under **SQL Database**, select your existing database, then click on **Select**.</span></span>
* <span data-ttu-id="fe057-189">В разделе **Строка подключения** введите имя пользователя и пароль для базы данных, а затем нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="fe057-189">Under **Connection string**, enter the username and password for the database, then click on **OK**.</span></span>
* <span data-ttu-id="fe057-190">В колонке **Add data connections** (Добавление подключений к данным) нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="fe057-190">In the **Add data connections** blade, click on **OK**.</span></span>

<span data-ttu-id="fe057-191">Имя пользователя и пароль можно найти, просмотрев строку подключения целевой базы данных в перенесенной мобильной службе.</span><span class="sxs-lookup"><span data-stu-id="fe057-191">The username and password can be found by viewing the Connection String for the target database in your migrated Mobile Service.</span></span>

### <a name="set-up-authentication"></a><span data-ttu-id="fe057-192">Настройка проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="fe057-192">Set up authentication</span></span>
<span data-ttu-id="fe057-193">Мобильные приложения Azure позволяют настроить проверку подлинности в Azure Active Directory, Facebook, Google, Microsoft и Twitter прямо в службе.</span><span class="sxs-lookup"><span data-stu-id="fe057-193">Azure Mobile Apps allows you to configure Azure Active Directory, Facebook, Google, Microsoft and Twitter authentication within the service.</span></span>  <span data-ttu-id="fe057-194">Пользовательскую проверку подлинности необходимо настроить отдельно.</span><span class="sxs-lookup"><span data-stu-id="fe057-194">Custom authentication will need to be developed separately.</span></span>  <span data-ttu-id="fe057-195">Дополнительные сведения см. в документации, посвященной [методам] и [быстрому запуску проверки подлинности].</span><span class="sxs-lookup"><span data-stu-id="fe057-195">Refer to the [Authentication Concepts] documentation and [Authentication Quickstart] documentation for more information.</span></span>  

## <span data-ttu-id="fe057-196"><a name="updating-clients"></a>Обновление мобильных клиентов</span><span class="sxs-lookup"><span data-stu-id="fe057-196"><a name="updating-clients"></a>Update Mobile clients</span></span>
<span data-ttu-id="fe057-197">После получения рабочей серверной части мобильных приложений вы можете работать с новой версией клиентского приложения, которое использует эту серверную часть.</span><span class="sxs-lookup"><span data-stu-id="fe057-197">Once you have an operational Mobile App backend, you can work on a new version of your client application which consumes it.</span></span> <span data-ttu-id="fe057-198">Мобильные приложения также содержат новую версию клиентских пакетов SDK. Поэтому, как и при обновлении сервера, перед установкой версий мобильных приложений потребуется удалить все ссылки на пакеты SDK для мобильных служб.</span><span class="sxs-lookup"><span data-stu-id="fe057-198">Mobile Apps also includes a new version of the client SDKs, and similar to the server upgrade above, you will need to remove all references to the Mobile Services SDKs before installing the Mobile Apps versions.</span></span>

<span data-ttu-id="fe057-199">Одно из основных различий между версиями заключается в том, что конструкторам больше не требуется ключ приложения.</span><span class="sxs-lookup"><span data-stu-id="fe057-199">One of the main changes between the versions is that the constructors no longer require an application key.</span></span>
<span data-ttu-id="fe057-200">Просто передайте URL-адрес мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="fe057-200">You now simply pass in the URL of your Mobile App.</span></span> <span data-ttu-id="fe057-201">Например, в клиентах .NET конструктор `MobileServiceClient` теперь выглядит так:</span><span class="sxs-lookup"><span data-stu-id="fe057-201">For example, on the .NET clients, the `MobileServiceClient` constructor is now:</span></span>

        public static MobileServiceClient MobileService = new MobileServiceClient(
            "https://contoso.azurewebsites.net" // URL of the Mobile App
        );

<span data-ttu-id="fe057-202">Сведения об установке новых пакетов SDK и использовании новой структуры см. по ссылкам ниже:</span><span class="sxs-lookup"><span data-stu-id="fe057-202">You can read about installing the new SDKs and using the new structure via the links below:</span></span>

* [<span data-ttu-id="fe057-203">Android 2.2 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="fe057-203">Android version 2.2 or later</span></span>](app-service-mobile-android-how-to-use-client-library.md)
* [<span data-ttu-id="fe057-204">iOS 3.0.0 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="fe057-204">iOS version 3.0.0 or later</span></span>](app-service-mobile-ios-how-to-use-client-library.md)
* [<span data-ttu-id="fe057-205">.NET (Windows/Xamarin) 2.0.0 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="fe057-205">.NET (Windows/Xamarin) version 2.0.0 or later</span></span>](app-service-mobile-dotnet-how-to-use-client-library.md)
* [<span data-ttu-id="fe057-206">Apache Cordova 2.0 или более поздней версии</span><span class="sxs-lookup"><span data-stu-id="fe057-206">Apache Cordova version 2.0 or later</span></span>](app-service-mobile-cordova-how-to-use-client-library.md)

<span data-ttu-id="fe057-207">Если приложение использует push-уведомления, обратите внимание на особые инструкции по регистрации для каждой платформы, так как они немного изменились.</span><span class="sxs-lookup"><span data-stu-id="fe057-207">If your application makes use of push notifications, make note of the specific registration instructions for each platform, as there have been some changes there as well.</span></span>

<span data-ttu-id="fe057-208">Когда новая версия клиента будет готова, испробуйте ее в новом обновленном серверном проекте.</span><span class="sxs-lookup"><span data-stu-id="fe057-208">When you have the new client version ready, try it out against your upgraded server project.</span></span> <span data-ttu-id="fe057-209">После проверки ее работы вы можете предоставить новую версию приложения клиентам.</span><span class="sxs-lookup"><span data-stu-id="fe057-209">After validating that it works, you can release a new version of your application to customers.</span></span> <span data-ttu-id="fe057-210">Когда как клиенты смогут получить эти обновления, версию мобильных служб приложения можно удалить.</span><span class="sxs-lookup"><span data-stu-id="fe057-210">Eventually, once your customers have had a chance to receive these updates, you can delete the Mobile Services version of your app.</span></span> <span data-ttu-id="fe057-211">Этот шаг завершает обновление до мобильного приложения службы приложений с помощью последнего пакета SDK сервера мобильных приложений.</span><span class="sxs-lookup"><span data-stu-id="fe057-211">At this point, you have completely upgraded to an App Service Mobile App using the latest Mobile Apps server SDK.</span></span>

<!-- URLs. -->

<span data-ttu-id="fe057-212">[Портал Azure]: https://portal.azure.com/</span><span class="sxs-lookup"><span data-stu-id="fe057-212">[Azure portal]: https://portal.azure.com/</span></span>
[Azure classic portal]: https://manage.windowsazure.com/
<span data-ttu-id="fe057-213">[Общие сведения о мобильных приложениях]: app-service-mobile-value-prop.md</span><span class="sxs-lookup"><span data-stu-id="fe057-213">[What are Mobile Apps?]: app-service-mobile-value-prop.md</span></span>
[I already use web sites and mobile services – how does App Service help me?]: /en-us/documentation/articles/app-service-mobile-value-prop-migration-from-mobile-services
[Mobile App Server SDK]: https://www.npmjs.com/package/azure-mobile-apps
[Create a Mobile App]: app-service-mobile-xamarin-ios-get-started.md
[Add push notifications to your mobile app]: app-service-mobile-xamarin-ios-get-started-push.md
[Add authentication to your mobile app]: app-service-mobile-xamarin-ios-get-started-users.md
[Azure Scheduler]: /en-us/documentation/services/scheduler/
[Web Job]: ../app-service-web/websites-webjobs-resources.md
[How to use the .NET server SDK]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
[Migrate from Mobile Services to an App Service Mobile App]: app-service-mobile-migrating-from-mobile-services.md
[Migrate your existing Mobile Service to App Service]: app-service-mobile-migrating-from-mobile-services.md
<span data-ttu-id="fe057-214">[ценами службы приложений]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span><span class="sxs-lookup"><span data-stu-id="fe057-214">[App Service pricing]: https://azure.microsoft.com/en-us/pricing/details/app-service/</span></span>
[.NET server SDK overview]: app-service-mobile-dotnet-backend-how-to-use-server-sdk.md
<span data-ttu-id="fe057-215">[методам]: ../app-service/app-service-authentication-overview.md</span><span class="sxs-lookup"><span data-stu-id="fe057-215">[Authentication Concepts]: ../app-service/app-service-authentication-overview.md</span></span>
<span data-ttu-id="fe057-216">[быстрому запуску проверки подлинности]: app-service-mobile-auth.md</span><span class="sxs-lookup"><span data-stu-id="fe057-216">[Authentication Quickstart]: app-service-mobile-auth.md</span></span>

<span data-ttu-id="fe057-217">[портал Azure]: https://portal.azure.com/</span><span class="sxs-lookup"><span data-stu-id="fe057-217">[Azure Portal]: https://portal.azure.com/</span></span>
[OData]: http://www.odata.org
[Promise]: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise
[basicapp sample on GitHub]: https://github.com/azure/azure-mobile-apps-node/tree/master/samples/basic-app
[todo sample on GitHub]: https://github.com/azure/azure-mobile-apps-node/tree/master/samples/todo
[samples directory on GitHub]: https://github.com/azure/azure-mobile-apps-node/tree/master/samples
[static-schema sample on GitHub]: https://github.com/azure/azure-mobile-apps-node/tree/master/samples/static-schema
[QueryJS]: https://github.com/Azure/queryjs
[Node.js Tools 1.1 for Visual Studio]: https://github.com/Microsoft/nodejstools/releases/tag/v1.1-RC.2.1
[mssql Node.js package]: https://www.npmjs.com/package/mssql
[Microsoft SQL Server 2014 Express]: http://www.microsoft.com/en-us/server-cloud/Products/sql-server-editions/sql-server-express.aspx
[ExpressJS Middleware]: http://expressjs.com/guide/using-middleware.html
[Winston]: https://github.com/winstonjs/winston
