---
title: "Проверка подлинности Azure Active Directory tooconfigure aaaHow для приложения службы приложений"
description: "Узнайте, как проверка подлинности Azure Active Directory tooconfigure для приложения службы приложений."
author: mattchenderson
services: app-service
documentationcenter: 
manager: syntaxc4
editor: 
ms.assetid: 6ec6a46c-bce4-47aa-b8a3-e133baef22eb
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 10/01/2016
ms.author: mahender
ms.openlocfilehash: 5b1d73f8fdf5831a266d900cd07f4e3b0917a7f7
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-your-app-service-application-toouse-azure-active-directory-login"></a><span data-ttu-id="6fb31-103">Как tooconfigure вход Azure Active Directory toouse приложения служб приложений</span><span class="sxs-lookup"><span data-stu-id="6fb31-103">How tooconfigure your App Service application toouse Azure Active Directory login</span></span>
[!INCLUDE [app-service-mobile-selector-authentication](../../includes/app-service-mobile-selector-authentication.md)]

<span data-ttu-id="6fb31-104">В этом разделе показано, как toouse tooconfigure службы приложений Azure Active Directory Azure, как поставщик проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="6fb31-104">This topic shows you how tooconfigure Azure App Services toouse Azure Active Directory as an authentication provider.</span></span>

## <span data-ttu-id="6fb31-105"><a name="express"> </a>Настройка Azure Active Directory с помощью стандартных параметров</span><span class="sxs-lookup"><span data-stu-id="6fb31-105"><a name="express"> </a>Configure Azure Active Directory using express settings</span></span>
1. <span data-ttu-id="6fb31-106">В hello [портал Azure], перейдите tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-106">In hello [Azure portal], navigate tooyour application.</span></span> <span data-ttu-id="6fb31-107">Щелкните **Параметры**, а затем — **Аутентификация или авторизация**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-107">Click **Settings**, and then **Authentication/Authorization**.</span></span>
2. <span data-ttu-id="6fb31-108">Если hello проверки подлинности и авторизации не включена, включать hello слишком**на**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-108">If hello Authentication / Authorization feature is not enabled, turn hello switch too**On**.</span></span>
3. <span data-ttu-id="6fb31-109">Щелкните **Azure Active Directory**, а затем в разделе **Режим управления** выберите **Экспресс**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-109">Click **Azure Active Directory**, and then click **Express** under **Management Mode**.</span></span>
4. <span data-ttu-id="6fb31-110">Нажмите кнопку **ОК** tooregister приложения hello в Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6fb31-110">Click **OK** tooregister hello application in Azure Active Directory.</span></span> <span data-ttu-id="6fb31-111">При этом будет создана новая регистрация.</span><span class="sxs-lookup"><span data-stu-id="6fb31-111">This will create a new registration.</span></span> <span data-ttu-id="6fb31-112">Если вместо этого требуется toochoose существующую регистрацию, нажмите кнопку **выбрать существующее приложение** и выполните поиск hello имя ранее созданной регистрации в клиенте.</span><span class="sxs-lookup"><span data-stu-id="6fb31-112">If you want toochoose an existing registration instead, click **Select an existing app** and then search for hello name of a previously created registration within your tenant.</span></span>
   <span data-ttu-id="6fb31-113">Щелкните tooselect регистрации hello ее и команду **ОК**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-113">Click hello registration tooselect it and click **OK**.</span></span> <span data-ttu-id="6fb31-114">Нажмите кнопку **ОК** в колонке параметров hello Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6fb31-114">Then click **OK** on hello Azure Active Directory settings blade.</span></span>
   
   ![][0]
   
   <span data-ttu-id="6fb31-115">По умолчанию приложение службы обеспечивает проверку подлинности, но не ограничивает содержимого узла tooyour авторизованный доступ и API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="6fb31-115">By default, App Service provides authentication but does not restrict authorized access tooyour site content and APIs.</span></span> <span data-ttu-id="6fb31-116">Авторизация пользователей должна быть включена в код приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-116">You must authorize users in your app code.</span></span>
5. <span data-ttu-id="6fb31-117">(Необязательно) toorestrict доступа tooyour сайта tooonly пользователь аутентификацию в Azure Active Directory, установить **tootake действия, если запрос не прошел проверку подлинности** слишком**войти с использованием Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-117">(Optional) toorestrict access tooyour site tooonly users authenticated by Azure Active Directory, set **Action tootake when request is not authenticated** too**Log in with Azure Active Directory**.</span></span> <span data-ttu-id="6fb31-118">Это требует проверку подлинности всех запросов, и все запросы без проверки подлинности, перенаправленный tooAzure Active Directory для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="6fb31-118">This requires that all requests be authenticated, and all unauthenticated requests are redirected tooAzure Active Directory for authentication.</span></span>
6. <span data-ttu-id="6fb31-119">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-119">Click **Save**.</span></span>

<span data-ttu-id="6fb31-120">Теперь вы находитесь готов toouse Azure Active Directory для проверки подлинности в приложении.</span><span class="sxs-lookup"><span data-stu-id="6fb31-120">You are now ready toouse Azure Active Directory for authentication in your app.</span></span>

## <span data-ttu-id="6fb31-121"><a name="advanced"> </a>(Альтернативный способ) Ручная настройка расширенных параметров Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="6fb31-121"><a name="advanced"> </a>(Alternative method) Manually configure Azure Active Directory with advanced settings</span></span>
<span data-ttu-id="6fb31-122">Вы также можете tooprovide параметры конфигурации вручную.</span><span class="sxs-lookup"><span data-stu-id="6fb31-122">You can also choose tooprovide configuration settings manually.</span></span> <span data-ttu-id="6fb31-123">Это решение hello предпочтительно, если вы хотите toouse клиента AAD hello отличается от клиента hello, с которым вы входите в Azure.</span><span class="sxs-lookup"><span data-stu-id="6fb31-123">This is hello preferred solution if hello AAD tenant you wish toouse is different from hello tenant with which you sign into Azure.</span></span> <span data-ttu-id="6fb31-124">Конфигурация toocomplete hello, необходимо сначала создать регистрацию в Azure Active Directory и затем необходимо предоставить некоторые tooApp сведения hello регистрации службы.</span><span class="sxs-lookup"><span data-stu-id="6fb31-124">toocomplete hello configuration, you must first create a registration in Azure Active Directory, and then you must provide some of hello registration details tooApp Service.</span></span>

### <span data-ttu-id="6fb31-125"><a name="register"> </a>Регистрация приложения в Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="6fb31-125"><a name="register"> </a>Register your application with Azure Active Directory</span></span>
1. <span data-ttu-id="6fb31-126">Войдите на toohello [портал Azure]и перейдите tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-126">Log on toohello [Azure portal], and navigate tooyour application.</span></span> <span data-ttu-id="6fb31-127">Скопируйте свой **URL-адрес**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-127">Copy your **URL**.</span></span> <span data-ttu-id="6fb31-128">Вы воспользуетесь этой tooconfigure приложения Azure Active Directory.</span><span class="sxs-lookup"><span data-stu-id="6fb31-128">You will use this tooconfigure your Azure Active Directory app.</span></span>
2. <span data-ttu-id="6fb31-129">Войдите в toohello [классический портал Azure] и перейдите в слишком**Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-129">Sign in toohello [Azure classic portal] and navigate too**Active Directory**.</span></span>
   
    ![][2]
3. <span data-ttu-id="6fb31-130">Выберите свой каталог, а затем выберите hello **приложений** вкладку вверху hello.</span><span class="sxs-lookup"><span data-stu-id="6fb31-130">Select your directory, and then select hello **Applications** tab at hello top.</span></span> <span data-ttu-id="6fb31-131">Нажмите кнопку **добавить** в нижней hello toocreate Регистрация нового приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-131">Click **ADD** at hello bottom toocreate a new app registration.</span></span>
4. <span data-ttu-id="6fb31-132">Выберите команду **Добавить приложение, разрабатываемое моей организацией**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-132">Click **Add an application my organization is developing**.</span></span>
5. <span data-ttu-id="6fb31-133">В мастер приложения hello, введите **имя** для вашего приложения и нажмите кнопку hello **веб-приложение и/или Web API** типа.</span><span class="sxs-lookup"><span data-stu-id="6fb31-133">In hello Add Application Wizard, enter a **Name** for your application and click hello  **Web Application And/Or Web API** type.</span></span> <span data-ttu-id="6fb31-134">Нажмите кнопку toocontinue.</span><span class="sxs-lookup"><span data-stu-id="6fb31-134">Then click toocontinue.</span></span>
6. <span data-ttu-id="6fb31-135">В hello **URL-адрес входа** вставьте скопированный ранее URL-адрес приложения hello.</span><span class="sxs-lookup"><span data-stu-id="6fb31-135">In hello **SIGN-ON URL** box, paste hello application URL you copied earlier.</span></span> <span data-ttu-id="6fb31-136">Введите этот же URL-адрес в hello **URI идентификатора приложения** поле.</span><span class="sxs-lookup"><span data-stu-id="6fb31-136">Enter that same URL in hello **App ID URI** box.</span></span> <span data-ttu-id="6fb31-137">Нажмите кнопку toocontinue.</span><span class="sxs-lookup"><span data-stu-id="6fb31-137">Then click toocontinue.</span></span>
7. <span data-ttu-id="6fb31-138">После добавления приложения hello щелкните hello **Настройка** вкладки. Изменить hello **URL-адрес ответа** под **единого входа** URL-адрес приложения дополненная путь hello для hello toobe */.auth/login/aad/callback*.</span><span class="sxs-lookup"><span data-stu-id="6fb31-138">Once hello application has been added, click hello **Configure** tab. Edit hello **Reply URL** under **Single Sign-on** toobe hello URL of your application appended with hello path, */.auth/login/aad/callback*.</span></span> <span data-ttu-id="6fb31-139">Например, `https://contoso.azurewebsites.net/.auth/login/aad/callback`.</span><span class="sxs-lookup"><span data-stu-id="6fb31-139">For example, `https://contoso.azurewebsites.net/.auth/login/aad/callback`.</span></span> <span data-ttu-id="6fb31-140">Убедитесь, что вы используете hello схему HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6fb31-140">Make sure that you are using hello HTTPS scheme.</span></span>
   
    ![][3]
8. <span data-ttu-id="6fb31-141">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-141">Click **Save**.</span></span> <span data-ttu-id="6fb31-142">А затем копировать hello **идентификатор клиента** для приложения hello.</span><span class="sxs-lookup"><span data-stu-id="6fb31-142">Then copy hello **Client ID** for hello app.</span></span> <span data-ttu-id="6fb31-143">Вы настроите вашего приложения toouse это позже.</span><span class="sxs-lookup"><span data-stu-id="6fb31-143">You will configure your application toouse this later.</span></span>
9. <span data-ttu-id="6fb31-144">В нижней панели команд hello, нажмите кнопку **Просмотр конечных точек**и затем копировать hello **документа метаданных федерации** URL-адрес и загрузки, документ или перейдите tooit в браузере.</span><span class="sxs-lookup"><span data-stu-id="6fb31-144">In hello bottom command bar, click **View Endpoints**, and then copy hello **Federation Metadata Document** URL and download that document or navigate tooit in a browser.</span></span>
10. <span data-ttu-id="6fb31-145">В корневой hello **EntityDescriptor** элемент, должно быть **entityID** виде hello `https://sts.windows.net/` следуют клиента определенной tooyour GUID (называемые «идентификатор клиента»).</span><span class="sxs-lookup"><span data-stu-id="6fb31-145">Within hello root **EntityDescriptor** element, there should be an **entityID** attribute of hello form `https://sts.windows.net/` followed by a GUID specific tooyour tenant (called a "tenant ID").</span></span> <span data-ttu-id="6fb31-146">Скопируйте это значение — оно будет использоваться в качестве вашего **URL-адреса издателя**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-146">Copy this value - it will serve as your **Issuer URL**.</span></span> <span data-ttu-id="6fb31-147">Вы настроите вашего приложения toouse это позже.</span><span class="sxs-lookup"><span data-stu-id="6fb31-147">You will configure your application toouse this later.</span></span>

### <span data-ttu-id="6fb31-148"><a name="secrets"></a>Tooyour приложения добавьте Azure Active Directory сведения</span><span class="sxs-lookup"><span data-stu-id="6fb31-148"><a name="secrets"> </a>Add Azure Active Directory information tooyour application</span></span>
1. <span data-ttu-id="6fb31-149">Вернитесь в hello [портал Azure], перейдите tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-149">Back in hello [Azure portal], navigate tooyour application.</span></span> <span data-ttu-id="6fb31-150">Щелкните **Параметры**, а затем — **Аутентификация или авторизация**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-150">Click **Settings**, and then **Authentication/Authorization**.</span></span>
2. <span data-ttu-id="6fb31-151">Если не включена функция проверки подлинности и авторизации hello, включите параметр hello слишком**на**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-151">If hello Authentication/Authorization feature is not enabled, turn hello switch too**On**.</span></span>
3. <span data-ttu-id="6fb31-152">Щелкните **Azure Active Directory**, а затем в разделе **Режим управления** выберите **Дополнительно**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-152">Click **Azure Active Directory**, and then click **Advanced** under **Management Mode**.</span></span> <span data-ttu-id="6fb31-153">Вставить в hello идентификатор клиента и URL-адрес издателя значение которого был получен.</span><span class="sxs-lookup"><span data-stu-id="6fb31-153">Paste in hello Client ID and Issuer URL value which you obtained previously.</span></span> <span data-ttu-id="6fb31-154">Нажмите кнопку **ОК**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-154">Then click **OK**.</span></span>
   
   ![][1]
   
   <span data-ttu-id="6fb31-155">По умолчанию приложение службы обеспечивает проверку подлинности, но не ограничивает содержимого узла tooyour авторизованный доступ и API-интерфейсы.</span><span class="sxs-lookup"><span data-stu-id="6fb31-155">By default, App Service provides authentication but does not restrict authorized access tooyour site content and APIs.</span></span> <span data-ttu-id="6fb31-156">Авторизация пользователей должна быть включена в код приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-156">You must authorize users in your app code.</span></span>
4. <span data-ttu-id="6fb31-157">(Необязательно) toorestrict доступа tooyour сайта tooonly пользователь аутентификацию в Azure Active Directory, установить **tootake действия, если запрос не прошел проверку подлинности** слишком**войти с использованием Azure Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-157">(Optional) toorestrict access tooyour site tooonly users authenticated by Azure Active Directory, set **Action tootake when request is not authenticated** too**Log in with Azure Active Directory**.</span></span> <span data-ttu-id="6fb31-158">Это требует проверку подлинности всех запросов, и все запросы без проверки подлинности, перенаправленный tooAzure Active Directory для проверки подлинности.</span><span class="sxs-lookup"><span data-stu-id="6fb31-158">This requires that all requests be authenticated, and all unauthenticated requests are redirected tooAzure Active Directory for authentication.</span></span>
5. <span data-ttu-id="6fb31-159">Щелкните **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-159">Click **Save**.</span></span>

<span data-ttu-id="6fb31-160">Теперь вы находитесь готов toouse Azure Active Directory для проверки подлинности в приложении.</span><span class="sxs-lookup"><span data-stu-id="6fb31-160">You are now ready toouse Azure Active Directory for authentication in your app.</span></span>

## <a name="optional-configure-a-native-client-application"></a><span data-ttu-id="6fb31-161">(Необязательно.) Настройка собственного клиентского приложения</span><span class="sxs-lookup"><span data-stu-id="6fb31-161">(Optional) Configure a native client application</span></span>
<span data-ttu-id="6fb31-162">Azure Active Directory можно также tooregister собственных клиентов, который предоставляет больший контроль над разрешениями для сопоставления.</span><span class="sxs-lookup"><span data-stu-id="6fb31-162">Azure Active Directory also allows you tooregister native clients, which provides greater control over permissions mapping.</span></span> <span data-ttu-id="6fb31-163">Это необходимо при желании tooperform входа, с использованием библиотеки, например hello **библиотеку аутентификации Active Directory**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-163">You need this if you wish tooperform logins using a library such as hello **Active Directory Authentication Library**.</span></span>

1. <span data-ttu-id="6fb31-164">Перейдите в слишком**Active Directory** в hello [классический портал Azure].</span><span class="sxs-lookup"><span data-stu-id="6fb31-164">Navigate too**Active Directory** in hello [Azure classic portal].</span></span>
2. <span data-ttu-id="6fb31-165">Выберите свой каталог, а затем выберите hello **приложений** вкладку вверху hello.</span><span class="sxs-lookup"><span data-stu-id="6fb31-165">Select your directory, and then select hello **Applications** tab at hello top.</span></span> <span data-ttu-id="6fb31-166">Нажмите кнопку **добавить** в нижней hello toocreate Регистрация нового приложения.</span><span class="sxs-lookup"><span data-stu-id="6fb31-166">Click **ADD** at hello bottom toocreate a new app registration.</span></span>
3. <span data-ttu-id="6fb31-167">Выберите команду **Добавить приложение, разрабатываемое моей организацией**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-167">Click **Add an application my organization is developing**.</span></span>
4. <span data-ttu-id="6fb31-168">В мастер приложения hello, введите **имя** для вашего приложения и нажмите кнопку hello **собственное клиентское приложение** типа.</span><span class="sxs-lookup"><span data-stu-id="6fb31-168">In hello Add Application Wizard, enter a **Name** for your application and click hello  **Native Client Application** type.</span></span> <span data-ttu-id="6fb31-169">Нажмите кнопку toocontinue.</span><span class="sxs-lookup"><span data-stu-id="6fb31-169">Then click toocontinue.</span></span>
5. <span data-ttu-id="6fb31-170">В hello **URI перенаправления** введите свой сайт */.auth/login/done* конечную точку, используя hello схему HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6fb31-170">In hello **Redirect URI** box, enter your site's */.auth/login/done* endpoint, using hello HTTPS scheme.</span></span> <span data-ttu-id="6fb31-171">Это значение должно быть примерно слишком*https://contoso.azurewebsites.net/.auth/login/done*.</span><span class="sxs-lookup"><span data-stu-id="6fb31-171">This value should be similar too*https://contoso.azurewebsites.net/.auth/login/done*.</span></span> <span data-ttu-id="6fb31-172">Создание приложения Windows, вместо этого использовать hello [пакета SID](app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) как hello URI.</span><span class="sxs-lookup"><span data-stu-id="6fb31-172">If creating a Windows application, instead use hello [package SID](app-service-mobile-dotnet-how-to-use-client-library.md#package-sid) as hello URI.</span></span>
6. <span data-ttu-id="6fb31-173">После добавления собственное приложение hello щелкните hello **Настройка** вкладки. Найти hello **идентификатор клиента** и запомните или запишите это значение.</span><span class="sxs-lookup"><span data-stu-id="6fb31-173">Once hello native application has been added, click hello **Configure** tab. Find hello **Client ID** and make a note of this value.</span></span>
7. <span data-ttu-id="6fb31-174">Страница приветствия прокрутки вниз toohello **разрешения приложений tooother** и нажмите кнопку **добавить приложение**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-174">Scroll hello page down toohello **Permissions tooother applications** section and click **Add application**.</span></span>
8. <span data-ttu-id="6fb31-175">Поиск веб-приложения hello, ранее зарегистрированы и щелкните значок "плюс" hello.</span><span class="sxs-lookup"><span data-stu-id="6fb31-175">Search for hello web application that you registered earlier and click hello plus icon.</span></span> <span data-ttu-id="6fb31-176">Щелкните флажок tooclose hello hello-диалоговое окно.</span><span class="sxs-lookup"><span data-stu-id="6fb31-176">Then click hello check tooclose hello dialog.</span></span> <span data-ttu-id="6fb31-177">Если веб-приложение hello не удается найти перейдите tooits регистрации и добавить новый URL-адрес ответа (например, hello HTTP версия текущего URL-адреса), нажмите кнопку Сохранить, а затем повторите эти шаги - приложения hello должно отображаться в списке hello.</span><span class="sxs-lookup"><span data-stu-id="6fb31-177">If hello web application cannot be found, navigate tooits registration and add a new reply URL (e.g., hello HTTP version of your current URL), click save, and then repeat these steps - hello application should show up in hello list.</span></span>
9. <span data-ttu-id="6fb31-178">На только что добавили новую запись hello, откройте hello **делегированные разрешения** раскрывающийся список и выберите **доступа (appName)**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-178">On hello new entry you just added, open hello **Delegated Permissions** dropdown and select **Access (appName)**.</span></span> <span data-ttu-id="6fb31-179">Нажмите кнопку **Сохранить**.</span><span class="sxs-lookup"><span data-stu-id="6fb31-179">Then click **Save**.</span></span>

<span data-ttu-id="6fb31-180">Теперь вы настроили собственное клиентское приложение, у которого есть доступ к вашему приложению службы приложений.</span><span class="sxs-lookup"><span data-stu-id="6fb31-180">You have now configured a native client application which can access your App Service application.</span></span>

## <span data-ttu-id="6fb31-181"><a name="related-content"> </a>Связанная информация</span><span class="sxs-lookup"><span data-stu-id="6fb31-181"><a name="related-content"> </a>Related Content</span></span>
[!INCLUDE [app-service-mobile-related-content-get-started-users](../../includes/app-service-mobile-related-content-get-started-users.md)]

<!-- Images. -->

[0]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/mobile-app-aad-express-settings.png
[1]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/mobile-app-aad-advanced-settings.png
[2]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-navigate-aad.png
[3]: ./media/app-service-mobile-how-to-configure-active-directory-authentication/app-service-aad-app-configure.png

<!-- URLs. -->

[портал Azure]: https://portal.azure.com/
[классический портал Azure]: https://manage.windowsazure.com/
[alternative method]:#advanced
