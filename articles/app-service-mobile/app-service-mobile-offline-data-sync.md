---
title: "Синхронизация данных в мобильных приложениях Azure aaaOffline | Документы Microsoft"
description: "Ссылки на концептуальные и общие сведения о функции синхронизации hello автономные данные для мобильных приложений Azure"
documentationcenter: windows
author: ggailey777
manager: syntaxc4
editor: 
services: app-service\mobile
ms.assetid: 982fb683-8884-40da-96e6-77eeca2500e3
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 10/30/2016
ms.author: glenga
ms.openlocfilehash: 58673240ba433651faf1f619ca5da33dd6459d2b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="offline-data-sync-in-azure-mobile-apps"></a>Автономная синхронизация данных в мобильных приложениях Azure
## <a name="what-is-offline-data-sync"></a>Что такое автономная синхронизация данных?
Синхронизация данных в автономном режиме — клиентом и сервером функции пакета SDK для мобильных приложений Azure, которое упрощает разработчикам toocreate приложения, предназначенные для работы без сетевого подключения.

Когда приложение находится в автономном режиме, по-прежнему можно создавать и изменять данные, которые сохраняются tooa локального хранилища. Если приложение hello вернется в оперативный режим, локальные изменения могли синхронизироваться с серверной части мобильного приложения Azure. функция Hello также поддерживает обнаружение конфликтов при изменении одной записи на обоих приветствия hello клиента и hello серверной части. Конфликты могут быть обработаны, затем на приветствия сервера или клиента hello.

Автономная синхронизация имеет несколько преимуществ.

* Повысить скорость реагирования приложения путем кэширования данных server локально на устройстве hello
* Создание надежных приложений, которые остаются полезными при проблемах с сетью.
* Разрешить конечным пользователям toocreate и изменения данных, даже в том случае, если нет доступа к сети, для поддержки сценариев с минимумом или совсем без подключения
* Синхронизация данных на нескольких устройствах и обнаружения конфликтов hello же запись изменяется два устройства
* Ограничение использования сетей с высокой задержкой или лимитным тарифным планом.

следующие учебники Hello показывают, как tooadd в автономный режим синхронизации tooyour мобильных клиентов с помощью мобильных приложений Azure:

* [Android: включение автономной синхронизации]
* [Apache Cordova: включение автономной синхронизации](app-service-mobile-cordova-get-started-offline-data.md)
* [iOS: включение автономной синхронизации]
* [Xamarin iOS: включение автономной синхронизации]
* [Xamarin Android: включение автономной синхронизации]
* [Xamarin.Forms: включение автономной синхронизации](app-service-mobile-xamarin-forms-get-started-offline-data.md)
* [Включение автономной синхронизации для приложения для Windows]

## <a name="what-is-a-sync-table"></a>Что такое таблица синхронизации?
tooaccess hello «/ таблиц» конечной точки клиента мобильных служб Azure hello SDK предоставляют интерфейсы, такие как `IMobileServiceTable` (пакет SDK для клиента .NET) или `MSTable` (клиент iOS). Эти API внутреннего сервера приложения Azure Mobile toohello подключаться напрямую и ошибкой, если hello клиентское устройство не имеет сетевого подключения.

использовать toosupport приложения следует использовать hello *синхронизации таблицы* API-интерфейсы, такие как `IMobileServiceSyncTable` (пакет SDK для клиента .NET) или `MSSyncTable` (клиент iOS). Все hello и те же операции CRUD (Создание, чтение, обновление, удаление) работают с синхронизации таблицы API-интерфейсы, только теперь чтение или запись tooa *локального хранилища*. Перед выполнением любых операций синхронизации таблицы hello локального хранилища должен быть инициализирован.

## <a name="what-is-a-local-store"></a>Что такое локальное хранилище?
Локальное хранилище — уровень сохраняемости данных hello hello клиентскому устройству. пакеты SDK предоставляют по умолчанию локального клиента мобильных приложений Azure Hello реализацией хранилища. В Windows, Xamarin и Android она основана на SQLite. В IOS реализация основана на Core Data.

toouse hello SQLite реализации на основе на Windows Phone или магазина Windows 8.1, необходимо tooinstall расширение SQLite. Дополнительные сведения см. в статье [Включение автономной синхронизации для приложения для Windows]. Android и iOS поставляются с версией ОС, поэтому нет необходимости tooreference собственную версию SQLite устройства hello SQLite.

Разработчики также могут реализовать собственное локальное хранилище. Для экземпляра при необходимости toostore данных в зашифрованном виде на hello мобильного клиента, можно определить локального хранилища, который использует SQLCipher для шифрования.

## <a name="what-is-a-sync-context"></a>Что такое контекст синхронизации?
*Контекст синхронизации* связан с объектом мобильного клиента (таким как `IMobileServiceClient` или `MSClient`) и отслеживает изменения, внесенные с помощью таблиц синхронизации. контекст синхронизации Hello поддерживает *очередь операций*, содержащий упорядоченный список операций СОЗДАНИЯ (Create, Update, Delete), более позднюю отправляться toohello сервера.

Локальное хранилище связан с контекстом hello синхронизации, такие как с помощью метода initialize `IMobileServicesSyncContext.InitializeAsync(localstore)` в hello [клиент .NET SDK].

## <a name="how-sync-works"></a>Как работает автономная синхронизация
При использовании таблиц синхронизации код клиента определяет, когда локальные изменения будут синхронизированы с серверной частью мобильного приложения Azure. Ничего не отправляет toohello серверной части, пока выполняется вызов слишком*принудительной* локальные изменения. Аналогично, локальное хранилище hello заполняется новые данные только в том случае, если имеется вызов слишком*запросу* данных.

* **Принудительная**: принудительной отправки, операция в контексте синхронизации hello и передает все CUD изменения с момента последнего принудительной hello. Обратите внимание, что он является только изменения отдельной таблицы toosend невозможно, так как в противном случае операции могут быть отправлены по порядку. Принудительная выполняет ряд REST вызовы tooyour мобильного приложения Azure серверной части, который в свою очередь изменяет базу данных сервера.
* **По запросу**: по запросу выполняется отдельно для каждой таблицы и может быть настроен с tooretrieve запроса только подмножество данных сервера hello. Здравствуйте, клиентских мобильных служб Azure SDK, а затем вставьте hello результирующие данные в локальное хранилище hello.
* **Неявные отправлений**: Если запросу выполняется к таблице с ожидающими локального обновления, сначала выполняется запросу hello `push()` hello контекста синхронизации. Это Принудительная помогает свести к минимуму конфликты между изменениями, которые уже поставлены в очередь и новые данные с сервера hello.
* **Добавочной синхронизации**: hello первого параметра операции запроса для toohello *имя запроса* , используется только на приветствия клиента. Если используется имя запроса от null, пакет SDK Azure Mobile hello выполняет *добавочной синхронизации*. Каждый раз, операции запроса возвращает набор результатов, последняя версия hello `updatedAt` отметки времени из этого результирующего набора, хранятся в таблицах локальной системы SDK hello. Последующие операции извлечения будут получать только записи после этой метки времени.

  toouse добавочной синхронизации, сервер должен возвращать значение `updatedAt` значений и должен также поддерживать сортировку по этому полю. Однако поскольку hello SDK добавляет свой собственный сортировки по полю updatedAt hello, нельзя использовать опрашивающий запрос, который имеет свой собственный `orderBy` предложения.

  Имя запроса Hello может быть любая строка, которая выбирается, но он должен быть уникальным для каждого логического запроса в приложении.
  В противном случае — операции извлечения, другой может перезаписать hello одинаковой меткой времени добавочной синхронизации и запросы могут возвращать неправильные результаты.

  Если hello запрос имеет параметр, одним из способов toocreate имя уникальным запроса является значение параметра tooincorporate hello.
  Например, при фильтрации по userid имя запроса может быть следующим (в C#):

        await todoTable.PullAsync("todoItems" + userid,
            syncTable.Where(u => u.UserId == userid));

  Если tooopt за пределы добавочной синхронизации, передавайте `null` как hello ИД запроса. В этом случае загружаются все записи при каждом вызове слишком`PullAsync`, который потенциально неэффективно.
* **Очистка**: можно очистить содержимое hello hello локального хранилища с помощью `IMobileServiceSyncTable.PurgeAsync`.
  Очистка может потребоваться при наличии устаревших данных в базе данных клиента hello или если вы хотите toodiscard все ожидающие изменения.

  Очистка удаляет таблицу из локального хранилища hello. При наличии действия, ожидающие синхронизации с базой данных сервера hello, hello очистки создает исключение, если hello *принудительно очистки* параметр имеет значение.

  В качестве примера устаревшие данные на клиенте hello Предположим, что в примере «todo list» hello, устройстве Device1 извлекает только элементы, которые не завершены. Todoitem «Купить Молоко» помечен выполнено на сервере hello другим устройством. Однако устройстве Device1 по-прежнему имеет hello, «Купить Молоко» todoitem в локальном хранилище, так как он запрашивает только элементы, которые не помечен как завершенный. Очистка позволяет удалить этот устаревший элемент.

## <a name="next-steps"></a>Дальнейшие действия
* [iOS: включение автономной синхронизации]
* [Xamarin iOS: включение автономной синхронизации]
* [Xamarin Android: включение автономной синхронизации]
* [Включение автономной синхронизации для приложения для Windows]

<!-- Links -->
[клиент .NET SDK]: app-service-mobile-dotnet-how-to-use-client-library.md
[Android: включение автономной синхронизации]: app-service-mobile-android-get-started-offline-data.md
[iOS: включение автономной синхронизации]: app-service-mobile-ios-get-started-offline-data.md
[Xamarin iOS: включение автономной синхронизации]: app-service-mobile-xamarin-ios-get-started-offline-data.md
[Xamarin Android: включение автономной синхронизации]: app-service-mobile-xamarin-android-get-started-offline-data.md
[Включение автономной синхронизации для приложения для Windows]: app-service-mobile-windows-store-dotnet-get-started-offline-data.md
