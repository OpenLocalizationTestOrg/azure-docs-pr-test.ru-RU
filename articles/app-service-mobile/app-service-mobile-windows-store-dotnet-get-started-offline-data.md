---
title: "Включение автономной синхронизации для приложения универсальной платформы Windows (UWP) с помощью мобильных приложений | Документация Майкрософт"
description: "Узнайте, как использовать мобильное приложение Azure для кэширования и синхронизации автономных данных в приложении универсальной платформы Windows (UWP)."
documentationcenter: windows
author: ggailey777
manager: syntaxc4
editor: 
services: app-service\mobile
ms.assetid: 8fe51773-90de-4014-8a38-41544446d9b5
ms.service: app-service-mobile
ms.workload: mobile
ms.tgt_pltfrm: mobile-windows
ms.devlang: dotnet
ms.topic: article
ms.date: 10/01/2016
ms.author: glenga
ms.openlocfilehash: 4b0a57c3bab688487eb9a50461b406e1a6e477c6
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="enable-offline-sync-for-your-windows-app"></a><span data-ttu-id="ed0b1-103">Включение автономной синхронизации для приложения для Windows</span><span class="sxs-lookup"><span data-stu-id="ed0b1-103">Enable offline sync for your Windows app</span></span>
[!INCLUDE [app-service-mobile-selector-offline](../../includes/app-service-mobile-selector-offline.md)]

## <a name="overview"></a><span data-ttu-id="ed0b1-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="ed0b1-104">Overview</span></span>
<span data-ttu-id="ed0b1-105">В этом учебнике показано, как добавить поддержку автономных функций в приложение универсальной платформы Windows (UWP) с помощью серверной части мобильного приложения Azure.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-105">This tutorial shows you how to add offline support to a Universal Windows Platform (UWP) app using an Azure Mobile App backend.</span></span> <span data-ttu-id="ed0b1-106">Автономная синхронизация позволяет конечным пользователям взаимодействовать с мобильным приложением — просматривать, добавлять или изменять данные — даже при отсутствии подключения к сети.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-106">Offline sync allows end users to interact with a mobile app--viewing, adding, or modifying data - even when there is no network connection.</span></span> <span data-ttu-id="ed0b1-107">Изменения сохраняются в локальной базе данных.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-107">Changes are stored in a local database.</span></span> <span data-ttu-id="ed0b1-108">Как только устройство возвращается в режим подключения к сети, эти изменения синхронизируются с удаленной внутренним сервером.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-108">Once the device is back online, these changes are synced with the remote backend.</span></span>

<span data-ttu-id="ed0b1-109">Из этого руководства вы узнаете, как обновить проект приложения UWP, описанного в руководстве [Создание приложения Windows], чтобы обеспечить поддержку автономных функций мобильных приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-109">In this tutorial, you update the UWP app project from the tutorial [Create a Windows app] to support the offline features of Azure Mobile Apps.</span></span> <span data-ttu-id="ed0b1-110">Если вы не используете скачанный проект быстрого запуска сервера, в проект необходимо добавить пакет расширений доступа к данным.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-110">If you do not use the downloaded quick start server project, you must add the data access extension packages to your project.</span></span> <span data-ttu-id="ed0b1-111">в статье [Работа с пакетом SDK для внутреннего сервера .NET для мобильных приложений Azure](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span><span class="sxs-lookup"><span data-stu-id="ed0b1-111">For more information about server extension packages, see [Work with the .NET backend server SDK for Azure Mobile Apps](app-service-mobile-dotnet-backend-how-to-use-server-sdk.md).</span></span>

<span data-ttu-id="ed0b1-112">Дополнительные сведения о функции автономной синхронизации см. в статье [Автономная синхронизация данных в мобильных приложениях Azure].</span><span class="sxs-lookup"><span data-stu-id="ed0b1-112">To learn more about the offline sync feature, see the topic [Offline Data Sync in Azure Mobile Apps].</span></span>

## <a name="requirements"></a><span data-ttu-id="ed0b1-113">Требования</span><span class="sxs-lookup"><span data-stu-id="ed0b1-113">Requirements</span></span>
<span data-ttu-id="ed0b1-114">Для работы с этим руководством требуется следующее:</span><span class="sxs-lookup"><span data-stu-id="ed0b1-114">This tutorial requires the following pre-requisites:</span></span>

* <span data-ttu-id="ed0b1-115">Visual Studio 2013 в Windows 8.1 или более поздней версии;</span><span class="sxs-lookup"><span data-stu-id="ed0b1-115">Visual Studio 2013 running on Windows 8.1 or later.</span></span>
* <span data-ttu-id="ed0b1-116">Выполнение заданий на странице [Создание приложения Windows][Создание приложения Windows].</span><span class="sxs-lookup"><span data-stu-id="ed0b1-116">Completion of [Create a Windows app][create a windows app].</span></span>
* <span data-ttu-id="ed0b1-117">[Хранилище SQLite для мобильных служб Azure][sqlite store nuget]</span><span class="sxs-lookup"><span data-stu-id="ed0b1-117">[Azure Mobile Services SQLite Store][sqlite store nuget]</span></span>
* [<span data-ttu-id="ed0b1-118">SQLite для разработки универсальной платформы Windows</span><span class="sxs-lookup"><span data-stu-id="ed0b1-118">SQLite for Universal Windows Platform development</span></span>](http://www.sqlite.org/downloads)

## <a name="update-the-client-app-to-support-offline-features"></a><span data-ttu-id="ed0b1-119">Обновление клиентского приложения для поддержки автономных функций</span><span class="sxs-lookup"><span data-stu-id="ed0b1-119">Update the client app to support offline features</span></span>
<span data-ttu-id="ed0b1-120">Автономные функции мобильных приложений Azure позволяют взаимодействовать с локальной базой данных в случае автономной работы.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-120">Azure Mobile App offline features allow you to interact with a local database when you are in an offline scenario.</span></span> <span data-ttu-id="ed0b1-121">Чтобы использовать эти функции в приложении, необходимо инициализировать [SyncContext][synccontext] в локальном хранилище.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-121">To use these features in your app, you initialize a [SyncContext][synccontext] to a local store.</span></span> <span data-ttu-id="ed0b1-122">Затем необходимо сослаться на таблицу с помощью интерфейса [IMobileServiceSyncTable][IMobileServiceSyncTable] .</span><span class="sxs-lookup"><span data-stu-id="ed0b1-122">Then reference your table through the [IMobileServiceSyncTable][IMobileServiceSyncTable] interface.</span></span> <span data-ttu-id="ed0b1-123">SQLite используется как локальное хранилище на устройстве.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-123">SQLite is used as the local store on the device.</span></span>

1. <span data-ttu-id="ed0b1-124">Установите [среду выполнения SQLite для универсальной платформы Windows](http://sqlite.org/2016/sqlite-uwp-3120200.vsix).</span><span class="sxs-lookup"><span data-stu-id="ed0b1-124">Install the [SQLite runtime for the Universal Windows Platform](http://sqlite.org/2016/sqlite-uwp-3120200.vsix).</span></span>
2. <span data-ttu-id="ed0b1-125">В Visual Studio откройте диспетчер пакетов NuGet для проекта приложения UWP, созданного в руководстве [Создание приложения Windows].</span><span class="sxs-lookup"><span data-stu-id="ed0b1-125">In Visual Studio, open the NuGet package manager for the UWP app project that you completed in the [Create a Windows app] tutorial.</span></span>
    <span data-ttu-id="ed0b1-126">Найдите и установите пакет NuGet **Microsoft.Azure.Mobile.Client.SQLiteStore**.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-126">Search for and install the **Microsoft.Azure.Mobile.Client.SQLiteStore** NuGet package.</span></span>
3. <span data-ttu-id="ed0b1-127">В обозревателе решений щелкните правой кнопкой мыши **Ссылки** > **Добавить ссылку...** > **Универсальная платформа Windows** > **Расширения**, а затем включите **SQLite для универсальной платформы Windows** и **среду выполнения Visual C++ 2015 для приложений универсальной платформы Windows**.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-127">In Solution Explorer, right-click **References** > **Add Reference...** > **Universal Windows** > **Extensions**, then enable  both **SQLite for Universal Windows Platform** and **Visual C++ 2015 Runtime for Universal Windows Platform apps**.</span></span>

    ![Добавить ссылку на SQLite UWP][1]
4. <span data-ttu-id="ed0b1-129">Откройте файл MainPage.xaml.cs и раскомментируйте определение `#define OFFLINE_SYNC_ENABLED`.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-129">Open the MainPage.xaml.cs file and uncomment the `#define OFFLINE_SYNC_ENABLED` definition.</span></span>
5. <span data-ttu-id="ed0b1-130">В Visual Studio нажмите клавишу **F5** , чтобы выполнить сборку и запустить клиентское приложение.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-130">In Visual Studio, press the **F5** key to rebuild and run the client app.</span></span> <span data-ttu-id="ed0b1-131">Приложение работает так же, как и до включения автономной синхронизации.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-131">The app works the same as it did before you enabled offline sync.</span></span> <span data-ttu-id="ed0b1-132">Тем не менее, локальная база данных теперь заполняется данными, которые можно использовать в автономном сценарии.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-132">However, the local database is now populated with data that can be used in an offline scenario.</span></span>

## <span data-ttu-id="ed0b1-133"><a name="update-sync"></a>Обновление приложения для отключения от серверной части</span><span class="sxs-lookup"><span data-stu-id="ed0b1-133"><a name="update-sync"></a>Update the app to disconnect from the backend</span></span>
<span data-ttu-id="ed0b1-134">В этом разделе вы разорвете связь с серверной частью мобильного приложения для имитации автономного режима.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-134">In this section, you break the connection to your Mobile App backend to simulate an offline situation.</span></span> <span data-ttu-id="ed0b1-135">При добавлении элементов данных обработчик исключений сообщает, что приложение работает в автономном режиме.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-135">When you add data items, your exception handler tells you that the app is in offline mode.</span></span> <span data-ttu-id="ed0b1-136">В этом состоянии новые элементы добавляются в локальное хранилище и будут синхронизированы с серверной частью мобильного приложения при следующей отправке данных в подключенном состоянии.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-136">In this state, new items added in the local store and will be synced to the mobile app backend when push is next run in a connected state.</span></span>

1. <span data-ttu-id="ed0b1-137">Измените файл App.xaml.cs в общем проекте.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-137">Edit App.xaml.cs in the shared project.</span></span> <span data-ttu-id="ed0b1-138">Закомментируйте инициализацию **MobileServiceClient** и добавьте следующую строку, использующую недопустимый URL-адрес мобильного приложения:</span><span class="sxs-lookup"><span data-stu-id="ed0b1-138">Comment out the initialization of the **MobileServiceClient** and add the following line, which uses an invalid mobile app URL:</span></span>

         public static MobileServiceClient MobileService = new MobileServiceClient("https://your-service.azurewebsites.fail");

    <span data-ttu-id="ed0b1-139">Чтобы продемонстрировать поведение в автономном режиме, отключите на устройстве Wi-Fi и мобильную связь и включите режим "в самолете".</span><span class="sxs-lookup"><span data-stu-id="ed0b1-139">You can also demonstrate offline behavior by disabling wifi and cellular networks on the device or use airplane mode.</span></span>
2. <span data-ttu-id="ed0b1-140">Нажмите клавишу **F5** , чтобы выполнить сборку и запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-140">Press **F5** to build and run the app.</span></span> <span data-ttu-id="ed0b1-141">Обратите внимание, синхронизацию не удалось выполнить при обновлении во время запуска приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-141">Notice your sync failed on refresh when the app launched.</span></span>
3. <span data-ttu-id="ed0b1-142">Введите новые элементы. Учтите, что при каждом нажатии кнопки **Сохранить** отправка завершается сбоем с состоянием [CancelledByNetworkError].</span><span class="sxs-lookup"><span data-stu-id="ed0b1-142">Enter new items and notice that push fails with a [CancelledByNetworkError] status each time you click **Save**.</span></span> <span data-ttu-id="ed0b1-143">Однако новые элементы списка существуют в локальном хранилище, пока они не будут перемещены в серверную часть мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-143">However, the new todo items exist in the local store until they can be pushed to the mobile app backend.</span></span>  <span data-ttu-id="ed0b1-144">В рабочем приложении при подавлении этих исключений клиентское приложение ведет себя так, как если бы оно по-прежнему было подключено к серверной части мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-144">In a production app, if you suppress these exceptions the client app behaves as if it's still connected to the mobile app backend.</span></span>
4. <span data-ttu-id="ed0b1-145">Закройте приложение и перезапустите его, чтобы убедиться, что новые элементы сохранены в локальном хранилище.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-145">Close the app and restart it to verify that the new items you created are persisted to the local store.</span></span>
5. <span data-ttu-id="ed0b1-146">В Visual Studio в откройте **обозреватель сервера**.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-146">(Optional) In Visual Studio, open **Server Explorer**.</span></span> <span data-ttu-id="ed0b1-147">Перейдите к своей базе данных в **Azure**->**Базы данных SQL**.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-147">Navigate to your database in **Azure**->**SQL Databases**.</span></span> <span data-ttu-id="ed0b1-148">Щелкните правой кнопкой мыши базу данных и выберите пункт **Открыть в обозревателе объектов SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-148">Right-click your database and select **Open in SQL Server Object Explorer**.</span></span> <span data-ttu-id="ed0b1-149">Теперь можно перейти к таблице базы данных SQL и ее содержимому.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-149">Now you can browse to your SQL database table and its contents.</span></span> <span data-ttu-id="ed0b1-150">Убедитесь, что данные в серверной базе данных не изменились.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-150">Verify that the data in the backend database has not changed.</span></span>
6. <span data-ttu-id="ed0b1-151">(Необязательно.) Воспользуйтесь инструментом REST, например Fiddler или Postman, чтобы выполнить запрос к мобильной серверной части с помощью запроса GET вида `https://<your-mobile-app-backend-name>.azurewebsites.net/tables/TodoItem`.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-151">(Optional) Use a REST tool such as Fiddler or Postman to query your mobile backend, using a GET query in the form `https://<your-mobile-app-backend-name>.azurewebsites.net/tables/TodoItem`.</span></span>

## <span data-ttu-id="ed0b1-152"><a name="update-online-app"></a>Обновление приложения для повторного подключения к серверной части мобильного приложения</span><span class="sxs-lookup"><span data-stu-id="ed0b1-152"><a name="update-online-app"></a>Update the app to reconnect your Mobile App backend</span></span>
<span data-ttu-id="ed0b1-153">В этом разделе вы повторно подключите приложение к серверной части мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-153">In this section, you reconnect the app to the mobile app backend.</span></span> <span data-ttu-id="ed0b1-154">Эти изменения моделируют повторное подключение сети в приложении.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-154">These changes simulate a network reconnection on the app.</span></span>

<span data-ttu-id="ed0b1-155">При первом запуске приложения обработчик событий `OnNavigatedTo` вызывает `InitLocalStoreAsync`.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-155">When you first run the application, the `OnNavigatedTo` event handler calls `InitLocalStoreAsync`.</span></span> <span data-ttu-id="ed0b1-156">Этот метод, в свою очередь, вызывает `SyncAsync` для синхронизации локального хранилища с серверной базой данных.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-156">This method in turn calls `SyncAsync` to sync your local store with the backend database.</span></span> <span data-ttu-id="ed0b1-157">Приложение пытается выполнить синхронизацию при запуске.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-157">The app attempts to sync on startup.</span></span>

1. <span data-ttu-id="ed0b1-158">Откройте файл App.xaml.cs в общем проекте и раскомментируйте предыдущую инициализацию `MobileServiceClient` , чтобы использовать правильный URL-адрес мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-158">Open App.xaml.cs in the shared project, and uncomment your previous initialization of `MobileServiceClient` to use the correct the mobile app URL.</span></span>
2. <span data-ttu-id="ed0b1-159">Нажмите клавишу **F5** , чтобы перестроить и запустить приложение.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-159">Press the **F5** key to rebuild and run the app.</span></span> <span data-ttu-id="ed0b1-160">Приложение синхронизирует локальные изменения с серверной частью мобильного приложения Azure, применяя операции отправки и извлечения после выполнения обработчика событий `OnNavigatedTo`.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-160">The app syncs your local changes with the Azure Mobile App backend using push and pull operations when the `OnNavigatedTo` event handler executes.</span></span>
3. <span data-ttu-id="ed0b1-161">(Необязательно.) Просмотрите обновленные данные, используя обозреватель объектов SQL Server или инструмент REST, например Fiddler.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-161">(Optional) View the updated data using either SQL Server Object Explorer or a REST tool like Fiddler.</span></span> <span data-ttu-id="ed0b1-162">Обратите внимание, что данные синхронизированы между базой данных серверной части мобильного приложения Azure и локальным хранилищем.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-162">Notice the data has been synchronized between the Azure Mobile App backend database and the local store.</span></span>
4. <span data-ttu-id="ed0b1-163">В приложении установите флажки рядом с некоторыми элементами, отметив их в локальном хранилище как выполненные.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-163">In the app, click the check box beside a few items to complete them in the local store.</span></span>

   <span data-ttu-id="ed0b1-164">`UpdateCheckedTodoItem` вызывает `SyncAsync` для синхронизации каждого выполненного элемента с серверной частью мобильного приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-164">`UpdateCheckedTodoItem` calls `SyncAsync` to sync each completed item with the Mobile App backend.</span></span> <span data-ttu-id="ed0b1-165">`SyncAsync` вызывает операцию отправки и извлечения данных.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-165">`SyncAsync` calls both push and pull.</span></span> <span data-ttu-id="ed0b1-166">Тем не менее **при каждом выполнении операции извлечения данных в отношении таблицы, в которую клиент внес изменения, операция отправки данных всегда выполняется автоматически**.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-166">However, **whenever you execute a pull against a table that the client has made changes to, a push is always executed automatically**.</span></span> <span data-ttu-id="ed0b1-167">Эта особенность позволяет обеспечить согласованность всех таблиц в локальном хранилище, а также связей между ними.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-167">This behavior ensures all tables in the local store along with relationships remain consistent.</span></span> <span data-ttu-id="ed0b1-168">Такое поведение может привести к непредвиденной отправке данных.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-168">This behavior may result in an unexpected push.</span></span>  <span data-ttu-id="ed0b1-169">Дополнительные сведения об этом поведении см. в статье [Автономная синхронизация данных в мобильных приложениях Azure].</span><span class="sxs-lookup"><span data-stu-id="ed0b1-169">For more information on this behavior, see [Offline Data Sync in Azure Mobile Apps].</span></span>

## <a name="api-summary"></a><span data-ttu-id="ed0b1-170">Сводные данные API</span><span class="sxs-lookup"><span data-stu-id="ed0b1-170">API Summary</span></span>
<span data-ttu-id="ed0b1-171">Для поддержки автономных функций мобильных служб мы использовали интерфейс [IMobileServiceSyncTable] и инициализировали [MobileServiceClient.SyncContext][synccontext] с использованием локальной базы данных SQLite.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-171">To support the offline features of mobile services, we used the [IMobileServiceSyncTable] interface and initialized [MobileServiceClient.SyncContext][synccontext] with a local SQLite database.</span></span> <span data-ttu-id="ed0b1-172">В автономном режиме обычные операции CRUD для мобильных приложений работают так, как если бы приложение по-прежнему было подключено, но операции выполнялись в локальном хранилище.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-172">When offline, the normal CRUD operations for Mobile Apps work as if the app is still connected while the operations occur against the local store.</span></span> <span data-ttu-id="ed0b1-173">Для синхронизации локального хранилища с сервером используются следующие методы.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-173">The following methods are used to synchronize the local store with the server:</span></span>

* <span data-ttu-id="ed0b1-174">**[PushAsync.]** Так как этот метод является элементом объекта [IMobileServicesSyncContext], изменения во всех таблицах будут отправляться в серверную часть приложения.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-174">**[PushAsync]** Because this method is a member of [IMobileServicesSyncContext], changes across all tables are pushed to the backend.</span></span> <span data-ttu-id="ed0b1-175">Только записи с локальными изменениями будут отправляться на сервер.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-175">Only records with local changes are sent to the server.</span></span>
* <span data-ttu-id="ed0b1-176">**[PullAsync]**. Извлечение запускается из объекта [IMobileServiceSyncTable].</span><span class="sxs-lookup"><span data-stu-id="ed0b1-176">**[PullAsync]** A pull is started from a [IMobileServiceSyncTable].</span></span> <span data-ttu-id="ed0b1-177">При наличии отслеживаемых изменений в таблице выполняется неявная отправка, чтобы убедиться в том, что все таблицы в локальном хранилище и их взаимосвязи остаются согласованными.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-177">When there are tracked changes in the table, an implicit push is run to make sure that all tables in the local store along with relationships remain consistent.</span></span> <span data-ttu-id="ed0b1-178">Параметр *pushOtherTables* определяет, будет ли выполнена для других таблиц в контексте неявная отправка.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-178">The *pushOtherTables* parameter controls whether other tables in the context are pushed in an implicit push.</span></span> <span data-ttu-id="ed0b1-179">Параметр *query* использует [IMobileServiceTableQuery<T>][IMobileServiceTableQuery] или строку запроса OData для фильтрации возвращаемых данных.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-179">The *query* parameter takes an [IMobileServiceTableQuery<T>][IMobileServiceTableQuery] or OData query string to filter the returned data.</span></span> <span data-ttu-id="ed0b1-180">Параметр *queryId* используется для определения добавочной синхронизации.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-180">The *queryId* parameter is used to define incremental sync.</span></span> <span data-ttu-id="ed0b1-181">Дополнительные сведения см. в разделе [Как работает автономная синхронизация](app-service-mobile-offline-data-sync.md#how-sync-works).</span><span class="sxs-lookup"><span data-stu-id="ed0b1-181">For more information, see [Offline Data Sync in Azure Mobile Apps](app-service-mobile-offline-data-sync.md#how-sync-works).</span></span>
* <span data-ttu-id="ed0b1-182">**[PurgeAsync.]** Приложение должно периодически вызывать этот метод, чтобы удалить устаревшие данные из локального хранилища.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-182">**[PurgeAsync]** Your app should periodically call this method to purge stale data from the local store.</span></span> <span data-ttu-id="ed0b1-183">Используйте параметр *force* , чтобы удалить все изменения, которые не были синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-183">Use the *force* parameter when you need to purge any changes that have not yet been synced.</span></span>

<span data-ttu-id="ed0b1-184">Дополнительные сведения об этих понятиях см. в разделе [Как работает автономная синхронизация](app-service-mobile-offline-data-sync.md#how-sync-works).</span><span class="sxs-lookup"><span data-stu-id="ed0b1-184">For more information about these concepts, see [Offline Data Sync in Azure Mobile Apps](app-service-mobile-offline-data-sync.md#how-sync-works).</span></span>

## <a name="more-info"></a><span data-ttu-id="ed0b1-185">Подробнее</span><span class="sxs-lookup"><span data-stu-id="ed0b1-185">More info</span></span>
<span data-ttu-id="ed0b1-186">В следующих статьях приводятся дополнительные сведения о функции автономной синхронизации мобильных приложений.</span><span class="sxs-lookup"><span data-stu-id="ed0b1-186">The following topics provide additional background information on the offline sync feature of Mobile Apps:</span></span>

* <span data-ttu-id="ed0b1-187">[Автономная синхронизация данных в мобильных приложениях Azure]</span><span class="sxs-lookup"><span data-stu-id="ed0b1-187">[Offline Data Sync in Azure Mobile Apps]</span></span>
* <span data-ttu-id="ed0b1-188">[Использование пакета SDK .NET для мобильных приложений Azure][8]</span><span class="sxs-lookup"><span data-stu-id="ed0b1-188">[Azure Mobile Apps .NET SDK HOWTO][8]</span></span>

<!-- Anchors. -->
[Update the app to support offline features]: #enable-offline-app
[Update the sync behavior of the app]: #update-sync
[Update the app to reconnect your Mobile Apps backend]: #update-online-app
[Next Steps]:#next-steps

<!-- Images -->
[1]: ./media/app-service-mobile-windows-store-dotnet-get-started-offline-data/app-service-mobile-add-reference-sqlite-dialog.png
[11]: ./media/app-service-mobile-windows-store-dotnet-get-started-offline-data/app-service-mobile-add-wp81-reference-sqlite-dialog.png
[13]: ./media/app-service-mobile-windows-store-dotnet-get-started-offline-data/cpu-architecture.png


<!-- URLs. -->
<span data-ttu-id="ed0b1-189">[Автономная синхронизация данных в мобильных приложениях Azure]: app-service-mobile-offline-data-sync.md</span><span class="sxs-lookup"><span data-stu-id="ed0b1-189">[Offline Data Sync in Azure Mobile Apps]: app-service-mobile-offline-data-sync.md</span></span>
<span data-ttu-id="ed0b1-190">[Создание приложения Windows]: app-service-mobile-windows-store-dotnet-get-started.md</span><span class="sxs-lookup"><span data-stu-id="ed0b1-190">[create a windows app]: app-service-mobile-windows-store-dotnet-get-started.md</span></span>
[SQLite for Windows 8.1]: http://go.microsoft.com/fwlink/?LinkID=716919
[SQLite for Windows Phone 8.1]: http://go.microsoft.com/fwlink/?LinkID=716920
[SQLite for Windows 10]: http://go.microsoft.com/fwlink/?LinkID=716921
[synccontext]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.mobileserviceclient.synccontext(v=azure.10).aspx
[sqlite store nuget]: https://www.nuget.org/packages/Microsoft.Azure.Mobile.Client.SQLiteStore/
<span data-ttu-id="ed0b1-191">[IMobileServiceSyncTable]: https://msdn.microsoft.com/library/azure/mt691742(v=azure.10).aspx</span><span class="sxs-lookup"><span data-stu-id="ed0b1-191">[IMobileServiceSyncTable]: https://msdn.microsoft.com/library/azure/mt691742(v=azure.10).aspx</span></span>
[IMobileServiceTableQuery]: https://msdn.microsoft.com/library/azure/dn250631(v=azure.10).aspx
<span data-ttu-id="ed0b1-192">[IMobileServicesSyncContext]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.imobileservicesynccontext(v=azure.10).aspx</span><span class="sxs-lookup"><span data-stu-id="ed0b1-192">[IMobileServicesSyncContext]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.imobileservicesynccontext(v=azure.10).aspx</span></span>
[MobileServicePushFailedException]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.mobileservicepushfailedexception(v=azure.10).aspx
[Status]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.mobileservicepushcompletionresult.status(v=azure.10).aspx
<span data-ttu-id="ed0b1-193">[CancelledByNetworkError]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.mobileservicepushstatus(v=azure.10).aspx</span><span class="sxs-lookup"><span data-stu-id="ed0b1-193">[CancelledByNetworkError]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.mobileservicepushstatus(v=azure.10).aspx</span></span>
<span data-ttu-id="ed0b1-194">[PullAsync]: https://msdn.microsoft.com/library/azure/mt667558(v=azure.10).aspx</span><span class="sxs-lookup"><span data-stu-id="ed0b1-194">[PullAsync]: https://msdn.microsoft.com/library/azure/mt667558(v=azure.10).aspx</span></span>
<span data-ttu-id="ed0b1-195">[PushAsync.]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.mobileservicesynccontextextensions.pushasync(v=azure.10).aspx</span><span class="sxs-lookup"><span data-stu-id="ed0b1-195">[PushAsync]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.mobileservicesynccontextextensions.pushasync(v=azure.10).aspx</span></span>
<span data-ttu-id="ed0b1-196">[PurgeAsync.]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.imobileservicesynctable.purgeasync(v=azure.10).aspx</span><span class="sxs-lookup"><span data-stu-id="ed0b1-196">[PurgeAsync]: https://msdn.microsoft.com/library/azure/microsoft.windowsazure.mobileservices.sync.imobileservicesynctable.purgeasync(v=azure.10).aspx</span></span>
[8]: app-service-mobile-dotnet-how-to-use-client-library.md
