---
title: "Защита доступа к Azure RemoteApp и дополнительные возможности | Документация Майкрософт"
description: "Узнайте, как безопасно осуществлять доступ к Azure RemoteApp с помощью условного доступа в Azure Active Directory"
services: remoteapp
documentationcenter: 
author: piotrci
manager: mbaldwin
ms.assetid: a19b0b09-ab26-4beb-80bb-33a46da39887
ms.service: remoteapp
ms.workload: compute
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/26/2017
ms.author: mbaldwin
ms.openlocfilehash: 28ee4698515d11964e5371628d21dbc00687c861
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="securing-access-to-azure-remoteapp-and-beyond"></a><span data-ttu-id="8035d-103">Защита доступа к Azure RemoteApp и дополнительные возможности</span><span class="sxs-lookup"><span data-stu-id="8035d-103">Securing access to Azure RemoteApp, and beyond</span></span>
> [!IMPORTANT]
> <span data-ttu-id="8035d-104">Мы выводим службу Azure RemoteApp из эксплуатации 31 августа 2017 года.</span><span class="sxs-lookup"><span data-stu-id="8035d-104">Azure RemoteApp is being discontinued on August 31, 2017.</span></span> <span data-ttu-id="8035d-105">Дополнительные сведения см. в [объявлении](https://go.microsoft.com/fwlink/?linkid=821148).</span><span class="sxs-lookup"><span data-stu-id="8035d-105">Read the [announcement](https://go.microsoft.com/fwlink/?linkid=821148) for details.</span></span>
> 
> 

<span data-ttu-id="8035d-106">В этой статье объясняется, как администратор может настроить канал безопасного доступа. Этот канал начинается с пользователя, идет через Azure RemoteApp и заканчивается на защищенном ресурсе, например в базе данных SQL или на другом внутреннем ресурсе приложения.</span><span class="sxs-lookup"><span data-stu-id="8035d-106">In this article we will give an overview of how an administrator can set up a secure access channel starting from the end user, through Azure RemoteApp and ending with a secure resource such as a SQL database or another application back-end.</span></span> <span data-ttu-id="8035d-107">Этот канал создается, чтобы к удаленным приложениям получали доступ только авторизованные пользователи, которые отвечают всем необходимым условиям, и чтобы к защищенному внутреннему ресурсу был возможен доступ только из управляемой среды Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-107">The goal is to make sure that only authorized users meeting the desired conditions can access remote applications, and that the secure back-end can only be accessed from the controlled Azure RemoteApp environment and not from other locations.</span></span>

<span data-ttu-id="8035d-108">Администратор должен задать себе три вопроса:</span><span class="sxs-lookup"><span data-stu-id="8035d-108">There are 3 major areas the admin needs to look at:</span></span>

![Рекомендации по условному доступу Azure RemoteApp](./media/remoteapp-secureaccess/ra-conditionalenvironment.png)

<span data-ttu-id="8035d-110">Далее приводятся ответы на эти вопросы.</span><span class="sxs-lookup"><span data-stu-id="8035d-110">Read on for information and answers to these questions.</span></span>

## <a name="who-can-access-the-collection"></a><span data-ttu-id="8035d-111">Кто может получить доступ к коллекции?</span><span class="sxs-lookup"><span data-stu-id="8035d-111">Who can access the collection?</span></span>
<span data-ttu-id="8035d-112">Администратор выбирает пользователей, которые имеют доступ к удаленным приложениям в коллекции.</span><span class="sxs-lookup"><span data-stu-id="8035d-112">The administrator chooses the users that can access remote applications in the collection.</span></span> <span data-ttu-id="8035d-113">Можно использовать рабочие или учебные учетные записи Azure Active Directory (Azure AD) (раньше они назывались учетными записями в организации) или учетные записи Майкрософт (например, @outlook.com).</span><span class="sxs-lookup"><span data-stu-id="8035d-113">You can use Azure Active Directory (Azure AD) work or school accounts (previously called, "organizational accounts") or Microsoft accounts (e.g. @outlook.com).</span></span> <span data-ttu-id="8035d-114">В большинстве сценариев для предприятий используются учетные записи Azure AD. Такие записи позволяют использовать функции условного доступа, описанные далее, а также являются единственным вариантом для коллекций, присоединенных к домену.</span><span class="sxs-lookup"><span data-stu-id="8035d-114">Most enterprise scenarios use Azure AD accounts; they let you use conditional access features discussed later and are also the only choice for domain-joined collections.</span></span> <span data-ttu-id="8035d-115">Далее в статье предполагается, что вы используете учетные записи Azure AD с Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-115">The rest of the article assumes you are using Azure AD accounts with Azure RemoteApp.</span></span>

<span data-ttu-id="8035d-116">**Чего мы добились**</span><span class="sxs-lookup"><span data-stu-id="8035d-116">**What we have accomplished:**</span></span>

<span data-ttu-id="8035d-117">Использование учетных записей Azure AD для управления доступом к Azure RemoteApp дает нам два преимущества.</span><span class="sxs-lookup"><span data-stu-id="8035d-117">Using Azure AD accounts to control access to Azure RemoteApp gives us two things:</span></span>

1. <span data-ttu-id="8035d-118">Мы всегда знаем, кто имеет доступ к приложениям, которые мы публикуем, и кто имеет доступ к внутренним ресурсам, к которым подключаются эти приложения.</span><span class="sxs-lookup"><span data-stu-id="8035d-118">We always know who can access the applications we have published and access any back-ends those applications connect to.</span></span>
2. <span data-ttu-id="8035d-119">Мы управляем основными сведениями Azure AD, т. е. мы можем создавать и удалять учетные записи пользователей, устанавливать политики паролей, использовать многофакторную проверку подлинности и т. д.</span><span class="sxs-lookup"><span data-stu-id="8035d-119">We control the underlying Azure AD so we can create and delete user accounts, set password policies, use multi-factor authentication, etc.</span></span> 

## <a name="how-is-the-collection-accessed-from-where"></a><span data-ttu-id="8035d-120">Как осуществляется доступ к коллекции?</span><span class="sxs-lookup"><span data-stu-id="8035d-120">How is the collection accessed?</span></span> <span data-ttu-id="8035d-121">Откуда?</span><span class="sxs-lookup"><span data-stu-id="8035d-121">From where?</span></span>
<span data-ttu-id="8035d-122">Обычно администраторам нужно определять политики для доступа к общедоступной среде (с выходом в Интернет), например Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-122">Commonly administrators want to define policies for accessing a public Internet-facing environment, such as Azure RemoteApp.</span></span> <span data-ttu-id="8035d-123">Например, они настраивают систему так, чтобы пользователи, обращающиеся к среде не из корпоративной сети, должны использовать многофакторную проверку подлинности (MFA) для получения доступа. Иногда такие пользователи полностью блокируются.</span><span class="sxs-lookup"><span data-stu-id="8035d-123">For example, they want to ensure that users accessing the environment from outside of the corporate network have to use multi-factor authentication (MFA) to gain access; or perhaps they should be blocked altogether.</span></span>

<span data-ttu-id="8035d-124">Администраторы Azure RemoteApp могут использовать функциональные возможности, доступные в Azure AD Premium, чтобы настраивать политики условного доступа для своей среды Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-124">Azure RemoteApp administrators can use the functionality available through Azure AD Premium to set conditional access policies for their Azure RemoteApp environment.</span></span> <span data-ttu-id="8035d-125">Они также могут пользоваться функциями создания отчетов и оповещений для мониторинга среды, к которой осуществляется доступ.</span><span class="sxs-lookup"><span data-stu-id="8035d-125">They can also use rich reporting and alerting features to monitor how the environment is being accessed.</span></span>

### <a name="how-to-set-up-conditional-access-for-azure-remoteapp"></a><span data-ttu-id="8035d-126">Как настроить условный доступ для Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="8035d-126">How to set up conditional access for Azure RemoteApp</span></span>
<span data-ttu-id="8035d-127">Разберем пример сценария: администратору Azure RemoteApp необходимо заблокировать доступ к среде для пользователей, которые находятся за пределами корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-127">We are going to walk through an example scenario – the Azure RemoteApp administrator wants to block access to the environment when users are outside of the corporate network.</span></span>

> [!NOTE]
> <span data-ttu-id="8035d-128">Предполагается, что вы используете Azure AD Premium и создали хотя бы одну коллекцию Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-128">We assume you have upgraded Azure AD to the Premium tier and that you have created at least one Azure RemoteApp collection.</span></span>
> 
> 

1. <span data-ttu-id="8035d-129">На портале Azure откройте вкладку **Active Directory** .</span><span class="sxs-lookup"><span data-stu-id="8035d-129">In Azure portal click the **Active Directory** tab.</span></span> <span data-ttu-id="8035d-130">Выберите каталог, который требуется настроить.</span><span class="sxs-lookup"><span data-stu-id="8035d-130">Then click the directory you want to configure.</span></span>
   
   <span data-ttu-id="8035d-131">Помните, что условный доступ является свойством каталога, а не Azure RemoteApp, поэтому все настройки выполняются на уровне каталога.</span><span class="sxs-lookup"><span data-stu-id="8035d-131">Remember: Conditional access is a property of your directory and not of Azure RemoteApp, so all configuration is done at the directory level.</span></span> <span data-ttu-id="8035d-132">Это также означает, что вносить такие изменения может только администратор каталога.</span><span class="sxs-lookup"><span data-stu-id="8035d-132">This also means you need to be the directory administrator to make these changes.</span></span>
2. <span data-ttu-id="8035d-133">Щелкните **Приложения** > **Microsoft Azure RemoteApp**, чтобы настроить условный доступ.</span><span class="sxs-lookup"><span data-stu-id="8035d-133">Click **Applications**, and then click **Microsoft Azure RemoteApp** to set up conditional access.</span></span> <span data-ttu-id="8035d-134">Обратите внимание, что условный доступ можно настроить отдельно для каждого приложения SaaS (программное обеспечение как услуга) в каталоге.</span><span class="sxs-lookup"><span data-stu-id="8035d-134">Note that you can set up conditional access for each "software as a service" application in your directory separately.</span></span>
   <span data-ttu-id="8035d-135">![Настройка условного доступа для Azure RemoteApp](./media/remoteapp-secureaccess/ra-conditionalaccessscreen.png)</span><span class="sxs-lookup"><span data-stu-id="8035d-135">![Setting up conditional access for Azure RemoteApp](./media/remoteapp-secureaccess/ra-conditionalaccessscreen.png)</span></span>
3. <span data-ttu-id="8035d-136">На вкладке **Настройка** установите для параметра **Включение правил доступа** значение "ВКЛ".</span><span class="sxs-lookup"><span data-stu-id="8035d-136">On the **Configure** tab, set **Enable Access Rules** to ON.</span></span>
   <span data-ttu-id="8035d-137">![Включение правил доступа для Azure RemoteApp](./media/remoteapp-secureaccess/ra-enableaccessrules.png)</span><span class="sxs-lookup"><span data-stu-id="8035d-137">![Enable access rules for Azure RemoteApp](./media/remoteapp-secureaccess/ra-enableaccessrules.png)</span></span>
4. <span data-ttu-id="8035d-138">Теперь вы можете настроить разные правила и выбрать, к кому их применить.</span><span class="sxs-lookup"><span data-stu-id="8035d-138">You can now configure various rules and choose who to apply them to:</span></span>
   
   1. <span data-ttu-id="8035d-139">Выберите параметр **Блокировать доступ, если не на работе** , чтобы полностью запретить доступ к Azure RemoteApp пользователям, которые находятся за пределами указанной вам сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-139">Choose **Block access when not at work** to completely prevent users from accessing Azure RemoteApp outside of the network environment you specify.</span></span>
   2. <span data-ttu-id="8035d-140">Выберите параметр ниже, чтобы определить диапазоны IP-адресов, составляющих "доверенную сеть".</span><span class="sxs-lookup"><span data-stu-id="8035d-140">Click the option below to define the IP address ranges that constitute your "trusted network."</span></span> <span data-ttu-id="8035d-141">Все IP-адреса за пределами этого диапазона будут отклонены.</span><span class="sxs-lookup"><span data-stu-id="8035d-141">Everything outside of those will be rejected.</span></span>
5. <span data-ttu-id="8035d-142">Проверьте конфигурацию, запустив клиент Azure RemoteApp с IP-адреса, который находится за пределами указанного диапазона.</span><span class="sxs-lookup"><span data-stu-id="8035d-142">Test your configuration by launching the Azure RemoteApp client from an IP address outside of the range you specified.</span></span> <span data-ttu-id="8035d-143">После входа в систему с помощью своих учетных данных Azure AD вы увидите примерно следующее сообщение:</span><span class="sxs-lookup"><span data-stu-id="8035d-143">After you sign in with your Azure AD credentials you should see a message like this:</span></span>

![Отказ в доступе к Azure RemoteApp](./media/remoteapp-secureaccess/ra-accessdenied.png)

### <a name="future-conditional-access-features"></a><span data-ttu-id="8035d-145">Разрабатываемые функции условного доступа</span><span class="sxs-lookup"><span data-stu-id="8035d-145">Future conditional access features</span></span>
<span data-ttu-id="8035d-146">Команда Azure Active Directory работает над новыми возможностями условного доступа.</span><span class="sxs-lookup"><span data-stu-id="8035d-146">The Azure Active Directory team is working on new capabilities in Conditional Access.</span></span> <span data-ttu-id="8035d-147">Администраторы смогут создавать новые типы правил, помимо правил на основе расположения сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-147">Administrators will be able to create new types of rules beyond network location based rules.</span></span> <span data-ttu-id="8035d-148">Скоро появится общедоступная предварительная версия новых функциональных возможностей.</span><span class="sxs-lookup"><span data-stu-id="8035d-148">A public preview of the new functionality should be available soon.</span></span>

### <a name="how-to-monitor-access-to-azure-remoteapp"></a><span data-ttu-id="8035d-149">Отслеживание доступа к Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="8035d-149">How to monitor access to Azure RemoteApp</span></span>
<span data-ttu-id="8035d-150">Вместе с условным доступом хорошо использовать функцию создания отчетов Azure Active Directory Premium.</span><span class="sxs-lookup"><span data-stu-id="8035d-150">A great feature to use alongside conditional access is the Azure Active Directory Premium reporting functionality.</span></span> <span data-ttu-id="8035d-151">Вы можете использовать отчеты, чтобы отслеживать доступ к своей среде и обнаруживать подозрительные действия.</span><span class="sxs-lookup"><span data-stu-id="8035d-151">You can use reports to monitor who is accessing your environment and detect any suspicious activity.</span></span>

<span data-ttu-id="8035d-152">Например, вы можете видеть имена пользователей, обращающихся к Azure RemoteApp, а также количество и время обращений.</span><span class="sxs-lookup"><span data-stu-id="8035d-152">For example, you can see the names of the users who accessed Azure RemoteApp, how many times they did it and when.</span></span>

1. <span data-ttu-id="8035d-153">На портале Azure щелкните **Active Directory**, а затем выберите свой каталог.</span><span class="sxs-lookup"><span data-stu-id="8035d-153">In Azure portal, click **Active Directory**, and then click your directory.</span></span>
2. <span data-ttu-id="8035d-154">Откройте вкладку **Отчеты** .</span><span class="sxs-lookup"><span data-stu-id="8035d-154">Go to the **Reports** tab.</span></span>
3. <span data-ttu-id="8035d-155">В списке отчетов в разделе **Интегрированные приложения** выберите **Использование приложения**.</span><span class="sxs-lookup"><span data-stu-id="8035d-155">From the list of reports, select **Application usage** under **Integrated applications**.</span></span>
   
   <span data-ttu-id="8035d-156">Вы увидите сводные статистические данные для удаленного приложения Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-156">You'll see some aggregated statistics for Azure RemoteApp.</span></span> 
   <span data-ttu-id="8035d-157">![Объединенная статистика доступа Azure RemoteApp](./media/remoteapp-secureaccess/ra-accessstats.png)</span><span class="sxs-lookup"><span data-stu-id="8035d-157">![Aggregated Azure RemoteApp access stats](./media/remoteapp-secureaccess/ra-accessstats.png)</span></span>
4. <span data-ttu-id="8035d-158">Щелкните приложение, чтобы отобразить сведения о пользователях, которые обращались к удаленному приложению Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-158">Click the application to reveal information about users accessing Azure RemoteApp.</span></span>
   <span data-ttu-id="8035d-159">![Статистика доступа пользователей к Azure RemoteApp](./media/remoteapp-secureaccess/ra-userstats.png)</span><span class="sxs-lookup"><span data-stu-id="8035d-159">![User access stats for Azure RemoteApp](./media/remoteapp-secureaccess/ra-userstats.png)</span></span>

### <a name="summary"></a><span data-ttu-id="8035d-160">Сводка</span><span class="sxs-lookup"><span data-stu-id="8035d-160">Summary</span></span>
<span data-ttu-id="8035d-161">С помощью Azure Active Directory Premium можно настроить правила доступа к Azure RemoteApp (и другим программам, так как приложения-службы доступны через Azure AD).</span><span class="sxs-lookup"><span data-stu-id="8035d-161">With Azure Active Directory Premium you can set up access rules to Azure RemoteApp (and other software as a service applications available through Azure AD).</span></span> <span data-ttu-id="8035d-162">Правила в настоящее время ограничены политиками на основе расположения сети, но в будущем они будут дополнены другими возможностями управления предприятием.</span><span class="sxs-lookup"><span data-stu-id="8035d-162">Rules are currently limited to network location based policies but will in the future be extended to other aspects of enterprise management.</span></span>

<span data-ttu-id="8035d-163">Azure AD Premium также предлагает функции создания отчетов и мониторинга, которые расширяют возможности управления средой Azure RemoteApp, доступные администратору.</span><span class="sxs-lookup"><span data-stu-id="8035d-163">Azure AD Premium also offers reporting and monitoring capabilities that further extend the control the admin has over their Azure RemoteApp environment.</span></span>

## <a name="how-do-i-make-sure-my-secure-resource-is-accessible-only-from-my-azure-remoteapp-environment"></a><span data-ttu-id="8035d-164">Что нужно сделать, чтобы доступ к моему защищенному ресурсу был возможен только из моей среды Azure RemoteApp?</span><span class="sxs-lookup"><span data-stu-id="8035d-164">How do I make sure my secure resource is accessible only from my Azure RemoteApp environment?</span></span>
<span data-ttu-id="8035d-165">В предыдущих разделах этой статьи мы рассмотрели возможности безопасного доступа к среде Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-165">In previous sections of this article we focused on securing access to the Azure RemoteApp environment.</span></span> <span data-ttu-id="8035d-166">Эти возможности реализуются путем выбора пользователей, которым разрешен доступ, и настройки правил доступа, которые определяют то, как будет использоваться служба.</span><span class="sxs-lookup"><span data-stu-id="8035d-166">We have accomplished that by choosing the users who are allowed access and setting up access rules to further control how they can use the service.</span></span>

<span data-ttu-id="8035d-167">Удаленным приложениям необходимо взаимодействовать с внутренним ресурсом, например базой данных SQL. Это распространенный сценарий для развертываний Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="8035d-167">A common scenario for Azure RemoteApp deployments is that the remote applications need to communicate with a back-end resource, for example a SQL database.</span></span> <span data-ttu-id="8035d-168">Этот ресурс расположен локально (например, в корпоративной сети) или в облаке (например, в Azure IaaS).</span><span class="sxs-lookup"><span data-stu-id="8035d-168">This resource is hosted either on-premises (e.g. in a corporate network) or in the cloud (e.g. in Azure IaaS).</span></span> <span data-ttu-id="8035d-169">Администраторам часто нужно, чтобы доступ к внутреннему ресурсу осуществлялся только из приложения, развернутого с помощью Azure RemoteApp, а не из приложения, которое работает непосредственно на компьютере пользователя и доступ к которому осуществляется через Интернет.</span><span class="sxs-lookup"><span data-stu-id="8035d-169">Administrators often want to make sure that the back-end resource can only be accessed by applications deployed via Azure RemoteApp and not for example by an application running directly on a user’s PC and accessing over public Internet.</span></span> <span data-ttu-id="8035d-170">Azure RemoteApp часто рассматривается как защищенная среда с централизованным управлением и единственный канал, через который пользователи должны взаимодействовать с внутренним ресурсом.</span><span class="sxs-lookup"><span data-stu-id="8035d-170">Azure RemoteApp is often seen as the centrally-managed and secured environment and thus the only path through which users should interact with the back-end resource.</span></span>

<span data-ttu-id="8035d-171">Рекомендуется размещать среду Azure RemoteApp и защищенный ресурс в одной виртуальной сети Azure (VNET).</span><span class="sxs-lookup"><span data-stu-id="8035d-171">The solution is to place both the Azure RemoteApp environment and the secure resource in the same Azure Virtual Network (VNET).</span></span> <span data-ttu-id="8035d-172">Если ресурс находится в другом месте, нужно установить VPN-подключение "сеть–сеть", чтобы создать виртуальную сеть, которая будет объединять центр обработки данных Azure и локальную среду клиента.</span><span class="sxs-lookup"><span data-stu-id="8035d-172">If the resource is in a different site, you can establish a site-to-site VPN connection, for example to create a VNet spanning the Azure data center and the customer on-premises environment.</span></span>

<span data-ttu-id="8035d-173">Azure RemoteApp поддерживает два типа развертываний коллекции, в которых вы можете создать собственную виртуальную сеть.</span><span class="sxs-lookup"><span data-stu-id="8035d-173">Azure RemoteApp supports two types of collection deployments where you can provide your own VNET:</span></span>

* <span data-ttu-id="8035d-174">Без присоединения к домену — приложения будут в пределах "прямой видимости" для других ресурсов в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-174">Non-domain-joined: the applications will have "line of sight" of the other resources in the VNET.</span></span> <span data-ttu-id="8035d-175">Например, это можно использовать для подключения приложения к базе данных SQL, которая использует проверку подлинности SQL (приложения проверяют подлинность пользователя непосредственно в базе данных)</span><span class="sxs-lookup"><span data-stu-id="8035d-175">For example, this can be used to connect applications to a SQL database that uses SQL authentication (applications authenticate the user directly against the database)</span></span>
* <span data-ttu-id="8035d-176">С присоединением к домену — виртуальные машины, используемые Azure RemoteApp, присоединяются к контроллеру домена в виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-176">Domain-joined: the virtual machines used by Azure RemoteApp are joined to a domain controller in the VNET.</span></span> <span data-ttu-id="8035d-177">Это полезно, если приложения должны проходить аутентификацию в контроллере домена Windows для получения доступа к внутреннему ресурсу.</span><span class="sxs-lookup"><span data-stu-id="8035d-177">This is useful when the applications need to authenticate against a Windows Domain Controller in order to get access to a back-end resource.</span></span>
  <span data-ttu-id="8035d-178">![Присоединенная к домену коллекция в Azure RemoteApp](./media/remoteapp-secureaccess/ra-domainjoined.png)</span><span class="sxs-lookup"><span data-stu-id="8035d-178">![A domain-joined collection in Azure RemoteApp](./media/remoteapp-secureaccess/ra-domainjoined.png)</span></span>

### <a name="how-to-create-a-secure-connection-between-azure-and-my-on-premises-environment"></a><span data-ttu-id="8035d-179">Создание безопасного подключения между Azure и локальной средой</span><span class="sxs-lookup"><span data-stu-id="8035d-179">How to create a secure connection between Azure and my on-premises environment</span></span>
<span data-ttu-id="8035d-180">Существует несколько вариантов настройки подключения между Azure и локальной средой.</span><span class="sxs-lookup"><span data-stu-id="8035d-180">There are several configuration options for connecting your Azure and on-premises environments.</span></span> <span data-ttu-id="8035d-181">Мы приводим их подробный обзор.</span><span class="sxs-lookup"><span data-stu-id="8035d-181">A good overview of the options is available here.</span></span>

<span data-ttu-id="8035d-182">Сначала вам нужно настроить виртуальную сеть с помощью Azure RemoteApp, а затем использовать эту сеть во время создания коллекции.</span><span class="sxs-lookup"><span data-stu-id="8035d-182">With Azure RemoteApp you need to configure your VNet first, and then use it during the creation process of your collection.</span></span> 

## <a name="the-complete-solution"></a><span data-ttu-id="8035d-183">Полное решение</span><span class="sxs-lookup"><span data-stu-id="8035d-183">The complete solution</span></span>
<span data-ttu-id="8035d-184">На следующей схеме показано полное решение, в котором мы создали канал безопасного доступа, связывающий пользователя через Azure RemoteApp (ARA) с внутренним ресурсом.</span><span class="sxs-lookup"><span data-stu-id="8035d-184">The diagram below shows the complete solution where we have built a secure access channel from the end user, through Azure RemoteApp (ARA), into the backend resource.</span></span>
<span data-ttu-id="8035d-185">![Защищенная среда Azure RemoteApp](./media/remoteapp-secureaccess/ra-secureoverview.png) На этапе 1 мы выбрали пользователей и создали правила доступа, определяющие способ обращения к ARA.</span><span class="sxs-lookup"><span data-stu-id="8035d-185">![Secure Azure RemoteApp](./media/remoteapp-secureaccess/ra-secureoverview.png) In Stage 1 we selected the users and created access rules that govern how ARA can be accessed.</span></span> <span data-ttu-id="8035d-186">В этом примере мы разрешили доступ только пользователям, работающим в корпоративной сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-186">In the example below we only allow access for users working from the corporate network.</span></span> <span data-ttu-id="8035d-187">Пользователи, которые не отвечают этому условию, не смогут получить доступ к среде ARA.</span><span class="sxs-lookup"><span data-stu-id="8035d-187">Non-compliant users will not be able to access the ARA environment at all.</span></span>
<span data-ttu-id="8035d-188">На этапе 2 мы предоставили доступ к внутреннему ресурсу только через конфигурацию виртуальной сети и VPN, которой мы управляем.</span><span class="sxs-lookup"><span data-stu-id="8035d-188">In Stage 2 we have exposed the backend resource only through the VNet/VPN configuration which we control.</span></span> <span data-ttu-id="8035d-189">Azure RemoteApp находится в той же виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="8035d-189">Azure RemoteApp has been placed in the same VNet.</span></span> <span data-ttu-id="8035d-190">В результате ресурс доступен только через среду ARA.</span><span class="sxs-lookup"><span data-stu-id="8035d-190">The end result is that the resource can only be accessed through the ARA environment.</span></span>

