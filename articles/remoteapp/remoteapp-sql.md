---
title: "Использование SQL Azure с Azure RemoteApp | Документация Майкрософт"
description: "Узнайте, как использовать SQL Azure с Azure RemoteApp"
services: remoteapp
documentationcenter: 
author: ericorman
manager: mbaldwin
editor: 
ms.assetid: 35f81d75-bfd7-4980-807e-00339f2cb2a4
ms.service: remoteapp
ms.devlang: na
ms.topic: hero-article
ms.tgt_pltfrm: na
ms.workload: compute
ms.date: 04/26/2017
ms.author: mbaldwin
ms.openlocfilehash: e3148a66ea65e78d47bd6c69742e288fa1afe12f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="sql-azure-with-azure-remoteapp"></a><span data-ttu-id="fba48-103">Использование SQL Azure с Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="fba48-103">SQL Azure with Azure RemoteApp</span></span>
> [!IMPORTANT]
> <span data-ttu-id="fba48-104">Мы выводим службу Azure RemoteApp из эксплуатации 31 августа 2017 года.</span><span class="sxs-lookup"><span data-stu-id="fba48-104">Azure RemoteApp is being discontinued on August 31, 2017.</span></span> <span data-ttu-id="fba48-105">Дополнительные сведения см. в [объявлении](https://go.microsoft.com/fwlink/?linkid=821148).</span><span class="sxs-lookup"><span data-stu-id="fba48-105">Read the [announcement](https://go.microsoft.com/fwlink/?linkid=821148) for details.</span></span>
> 
> 

<span data-ttu-id="fba48-106">Часто, когда клиенты решают размещать свои приложения Windows в облаке с помощью Azure RemoteApp, они также хотят перенести свои данные, например серверы SQL Server, в облако для развертывания всего облака.</span><span class="sxs-lookup"><span data-stu-id="fba48-106">Often when customers choose to host their Windows applications in the cloud with Azure RemoteApp they also want to migrate their data such as SQL servers into the cloud for an entire cloud deployment.</span></span> <span data-ttu-id="fba48-107">Это позволяет создать полностью облачное решение, доступ к которому можно получить в любое время с любого устройства и из любого места с помощью Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="fba48-107">This allows for entire cloud hosted solution that can be accessed anytime by any device anywhere using Azure RemoteApp.</span></span> <span data-ttu-id="fba48-108">Ниже приведены ссылки и инструкции, которые помогут вам выполнить этот процесс.</span><span class="sxs-lookup"><span data-stu-id="fba48-108">Below are links and references along with guidance to help you with this process.</span></span>  

## <a name="migrate-your-sql-data"></a><span data-ttu-id="fba48-109">Перенос данных SQL</span><span class="sxs-lookup"><span data-stu-id="fba48-109">Migrate your SQL data</span></span>
<span data-ttu-id="fba48-110">Начните с [переноса базы данных SQL Server в базу данных SQL Azure](../sql-database/sql-database-cloud-migrate.md).</span><span class="sxs-lookup"><span data-stu-id="fba48-110">Start with [Migrating a SQL Server database to Azure SQL Database](../sql-database/sql-database-cloud-migrate.md).</span></span> 

## <a name="configure-azure-remoteapp"></a><span data-ttu-id="fba48-111">Настройка Azure RemoteApp</span><span class="sxs-lookup"><span data-stu-id="fba48-111">Configure Azure RemoteApp</span></span>
<span data-ttu-id="fba48-112">Разместите приложение Windows в Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="fba48-112">Host your Windows application in Azure RemoteApp.</span></span> <span data-ttu-id="fba48-113">Ниже приведено обобщенное пошаговое руководство.</span><span class="sxs-lookup"><span data-stu-id="fba48-113">Below is a very high level step-by-step:</span></span>

1. <span data-ttu-id="fba48-114">Создайте [виртуальную машину (VM) с помощью шаблона Azure RemoteApp](remoteapp-imageoptions.md).</span><span class="sxs-lookup"><span data-stu-id="fba48-114">Create the [Azure RemoteApp template VM](remoteapp-imageoptions.md).</span></span> 
2. <span data-ttu-id="fba48-115">Установите нужное приложение на VM.</span><span class="sxs-lookup"><span data-stu-id="fba48-115">Install the required application on the VM.</span></span>
3. <span data-ttu-id="fba48-116">Настройте приложение, чтобы оно подключалось к базе данных SQL, и убедитесь, что оно работает.</span><span class="sxs-lookup"><span data-stu-id="fba48-116">Configure the application so it connects to the SQL DB and confirm that it works.</span></span>
4. <span data-ttu-id="fba48-117">Запустите команду Sysprep и завершите работу виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="fba48-117">Sysprep and shutdown the VM.</span></span> <span data-ttu-id="fba48-118">Запишите образ этой виртуальной машины для использования с Azure.</span><span class="sxs-lookup"><span data-stu-id="fba48-118">Capture this as an image for use with Azure.</span></span> <span data-ttu-id="fba48-119">**Примечание.** Убедитесь, что приложение может сохранять сведения о подключении к базе данных во время выполнения процесса sysprep.</span><span class="sxs-lookup"><span data-stu-id="fba48-119">**Note:** You will need to ensure that the application is able to retain the DB connectivity information through the sysprep process.</span></span> <span data-ttu-id="fba48-120">Если приложение не может сохранять сведения о подключении к базе данных, возможно, потребуется использовать поставщик приложения, чтобы проверить, как можно указать строку подключения.</span><span class="sxs-lookup"><span data-stu-id="fba48-120">If the application is unable to retain the DB connection information, you might want to engage the vendor of the application to check how we can specify the connection string.</span></span>
5. <span data-ttu-id="fba48-121">Импортируйте настраиваемый образ в библиотеку Azure RemoteApp, выбрав соответствующие географическое расположение, в котором находится развертывание SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="fba48-121">Import the custom image into your Azure RemoteApp library selecting the proper geographical location that your SQL Azure deployment resides.</span></span> 
6. <span data-ttu-id="fba48-122">Разверните коллекцию RemoteApp в том же центре обработки данных, в котором находится развертывание SQL Azure, используя указанный выше шаблон, и опубликуйте приложение.</span><span class="sxs-lookup"><span data-stu-id="fba48-122">Deploy a RemoteApp collection in the same data center as your SQL Azure deployment using the above template and publish the application.</span></span> <span data-ttu-id="fba48-123">Развертывание Azure RemoteApp в центре обработки данных, в котором находится развертывание SQL Azure, помогает обеспечить максимальную скорость подключения и уменьшить задержку.</span><span class="sxs-lookup"><span data-stu-id="fba48-123">Deploying Azure RemoteApp in the same data center as your SQL Azure deployment helps ensure the fastest connection speeds and reduce latency.</span></span> 

## <a name="app-and-sql-configuration-considerations"></a><span data-ttu-id="fba48-124">Рекомендации по конфигурации SQL и приложения</span><span class="sxs-lookup"><span data-stu-id="fba48-124">App and SQL configuration considerations:</span></span>
<span data-ttu-id="fba48-125">Во время использования Azure SQL с RemoteApp нужно учитывать несколько моментов.</span><span class="sxs-lookup"><span data-stu-id="fba48-125">There are a few points to consider when using Azure SQL with RemoteApp:</span></span>

<span data-ttu-id="fba48-126">Узнайте, [как настроить брандмауэр базы данных SQL Azure](../sql-database/sql-database-firewall-configure.md).</span><span class="sxs-lookup"><span data-stu-id="fba48-126">Learn [how to configure an Azure SQL database firewall](../sql-database/sql-database-firewall-configure.md).</span></span> <span data-ttu-id="fba48-127">В статье сказано: "Первоначально весь доступ к серверу базы данных SQL Azure блокируется брандмауэром.</span><span class="sxs-lookup"><span data-stu-id="fba48-127">An excerpt from the article states, "Initially, all access to your Azure SQL Database server is blocked by the firewall.</span></span> <span data-ttu-id="fba48-128">Чтобы начать использование сервера базы данных SQL Azure, необходимо перейти на классический портал и указать одно или несколько правил брандмауэра уровня сервера, которые обеспечивают доступ к серверу базы данных SQL Azure.</span><span class="sxs-lookup"><span data-stu-id="fba48-128">In order to begin using your Azure SQL Database server, you must go to the Classic Portal and specify one or more server-level firewall rules that enable access to your Azure SQL Database server.</span></span> <span data-ttu-id="fba48-129">Используйте правила брандмауэра, чтобы указать, какие диапазоны IP-адресов из Интернета разрешены, а также могут ли приложения Azure делать попытки подключения к серверу базы данных SQL Azure".</span><span class="sxs-lookup"><span data-stu-id="fba48-129">Use the firewall rules to specify which IP address ranges from the Internet are allowed, and whether or not Azure applications can attempt to connect to your Azure SQL Database server."</span></span>

<span data-ttu-id="fba48-130">Когда компьютер пытается подключиться к серверу базы данных из Интернета, брандмауэр проверяет исходный IP-адрес запроса относительно полного набора правил брандмауэра уровня сервера и (при необходимости) уровня базы данных.</span><span class="sxs-lookup"><span data-stu-id="fba48-130">Also, when a computer attempts to connect to your database server from the Internet, the firewall checks the originating IP address of the request against the full set of server-level and (if required) database-level firewall rules.</span></span> <span data-ttu-id="fba48-131">"Если IP-адрес запроса находится в одном из диапазонов, указанных в правилах брандмауэра уровня сервера, подключение предоставляется к серверу базы данных SQL Azure".</span><span class="sxs-lookup"><span data-stu-id="fba48-131">"If the IP address of the request is within one of the ranges specified in the server-level firewall rules, the connection is granted to your Azure SQL Database server."</span></span> <span data-ttu-id="fba48-132">Следовательно, мы можем использовать диапазоны IP-адресов, а не только отдельные исходные IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="fba48-132">Hence, we can make use of IP Ranges and not just individual source IP addresses.</span></span>

<span data-ttu-id="fba48-133">Выполните пошаговые инструкции из руководства [Настройка правила брандмауэра уровня сервера базы данных SQL Azure с помощью портала Azure](../sql-database/sql-database-configure-firewall-settings.md) , чтобы указать диапазон IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="fba48-133">Follow the step by step instructions in [How to: Configure firewall settings on SQL Database using the Azure Portal](../sql-database/sql-database-configure-firewall-settings.md) to specify the IP range.</span></span> <span data-ttu-id="fba48-134">Во время настройки правил брандмауэра SQL укажите диапазон IP-адресов подсети, которая указана для коллекции Azure RemoteApp.</span><span class="sxs-lookup"><span data-stu-id="fba48-134">When you are configuring the SQL Firewall rules, please provide the IP range of the subnet that is specified for the Azure RemoteApp collection.</span></span> <span data-ttu-id="fba48-135">Это позволит серверам ARA подключаться к базе данных SQL, даже если у них будут динамически назначаемые IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="fba48-135">This should allow the ARA servers to connect to the SQL DB even though they will have dynamically-assigned IP Addresses.</span></span>

## <a name="troubleshooting"></a><span data-ttu-id="fba48-136">Устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="fba48-136">Troubleshooting</span></span>
<span data-ttu-id="fba48-137">Если клиентское приложение, размещенное в Azure RemoteApp, подключенное к базе данных SQL, размещенной в Azure или локально, работает медленно, причин может быть несколько.</span><span class="sxs-lookup"><span data-stu-id="fba48-137">If the experience of using a client application hosted in Azure RemoteApp that connects to a SQL database where hosted on Azure or on-premises is slow there could be a few reasons why.</span></span>  

* <span data-ttu-id="fba48-138">Большая задержка в сети при передаче данных с устройства в Azure.</span><span class="sxs-lookup"><span data-stu-id="fba48-138">Network latency from your device to Azure is high.</span></span> <span data-ttu-id="fba48-139">Для повышения производительности перейдите на наилучшее и самое быстрое сетевое подключение, которое возможно.</span><span class="sxs-lookup"><span data-stu-id="fba48-139">Move to the best and fastest network connection you can for best performance.</span></span> <span data-ttu-id="fba48-140">Используйте [azurespeed.com](http://azurespeed.com/) как общее средство для проверки задержки передачи данных с вашего устройства в центр обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="fba48-140">Use [azurespeed.com](http://azurespeed.com/) as a general tool to test your devices latency to Azure data center.</span></span>  
* <span data-ttu-id="fba48-141">Клиентское приложение, размещенное в Azure RemoteApp, перегружено.</span><span class="sxs-lookup"><span data-stu-id="fba48-141">Client app hosted in Azure RemoteApp is under stress.</span></span> <span data-ttu-id="fba48-142">Выберите другой тарифный план, например «Премиум». Это повысит производительность.</span><span class="sxs-lookup"><span data-stu-id="fba48-142">Selecting a different billing plan such as Premium billing will improve performance.</span></span> <span data-ttu-id="fba48-143">Или понаблюдайте за ресурсами, которые использует ваше приложение: во время активного сеанса нажмите одновременно клавиши CTRL+ALT+END. Откроется экран SAS. Выберите диспетчер задач и наблюдайте за использованием ресурсов для приложения.</span><span class="sxs-lookup"><span data-stu-id="fba48-143">Another trick is to monitor the resources your application is consuming: during an active session perform a ctrl-alt-end key sequence which will launch the SAS screen, select Task Manager and observe resource utilization for your app.</span></span>
* <span data-ttu-id="fba48-144">SQL Server сильно загружен или не оптимизирован.</span><span class="sxs-lookup"><span data-stu-id="fba48-144">SQL server is under stress or not optimized.</span></span> <span data-ttu-id="fba48-145">Следуйте рекомендациям SQL для устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="fba48-145">Follow SQL guidance for troubleshooting.</span></span> 

