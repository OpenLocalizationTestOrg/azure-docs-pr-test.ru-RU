---
title: "Интеграция системы управления версиями в службе автоматизации Azure | Документация Майкрософт"
description: "В этой статье описывается интеграция системы управления версиями с GitHub в службе автоматизации Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 224d7375-9887-44dd-b137-06ffe396a4b4
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/21/2016
ms.author: magoedte;sngun
ms.openlocfilehash: 763bf5805e3a3cb95ad63c7a354dd3d4cd531b2b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="source-control-integration-in-azure-automation"></a><span data-ttu-id="f998e-103">Интеграция системы управления версиями в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="f998e-103">Source control integration in Azure Automation</span></span>
<span data-ttu-id="f998e-104">Интеграция системы управления версиями позволяет связать модули Runbook из вашей учетной записи службы автоматизации с репозиторием системы управления версиями GitHub.</span><span class="sxs-lookup"><span data-stu-id="f998e-104">Source control integration allows you to associate runbooks in your Automation account to a GitHub source control repository.</span></span> <span data-ttu-id="f998e-105">Система управления версиями позволяет работать вместе с коллегами, отслеживать изменения и выполнять откат к более ранним версиям модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="f998e-105">Source control allows you to easily collaborate with your team, track changes, and roll back to earlier versions of your runbooks.</span></span> <span data-ttu-id="f998e-106">Например, система управления версиями позволяет синхронизировать различные ветви этой системы с учетными записями службы автоматизации, предназначенными для разработки, тестирования и работы готового продукта. Таким образом, вы сможете легко разместить в рабочей учетной записи службы автоматизации тот код, который был протестирован в среде разработки.</span><span class="sxs-lookup"><span data-stu-id="f998e-106">For example, source control allows you to sync different branches in source control to your development, test or production Automation accounts, making it easy to promote code that has been tested in your development environment to your production Automation account.</span></span>

<span data-ttu-id="f998e-107">Система управления версиями позволяет отправлять код из службы автоматизации Azure в систему управления версиями или извлекать модули Runbook из системы управления версиями в службу автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="f998e-107">Source control allows you to push code from Azure Automation to source control or pull your runbooks from source control to Azure Automation.</span></span> <span data-ttu-id="f998e-108">В этой статье рассказывается, как настроить систему управления версиями в среде службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="f998e-108">This article describes how to set up source control in your Azure Automation environment.</span></span> <span data-ttu-id="f998e-109">Для начала настроим службу автоматизации Azure на доступ к репозиторию GitHub и рассмотрим различные операции, которые можно выполнить с помощью интеграции системы управления версиями.</span><span class="sxs-lookup"><span data-stu-id="f998e-109">We will start by configuring Azure Automation to access your GitHub repository and walk through different operations that can be done using source control integration.</span></span> 

> [!NOTE]
> <span data-ttu-id="f998e-110">Система управления версиями поддерживает извлечение и отправку [модулей Runbook рабочих процессов PowerShell](automation-runbook-types.md#powershell-workflow-runbooks), а также [модулей Runbook PowerShell](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="f998e-110">Source control supports pulling and pushing [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks) as well as [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span> <span data-ttu-id="f998e-111">[Графические модули Runbook](automation-runbook-types.md#graphical-runbooks) пока не поддерживаются.</span><span class="sxs-lookup"><span data-stu-id="f998e-111">[Graphical runbooks](automation-runbook-types.md#graphical-runbooks) are not yet supported.</span></span><br><br>
> 
> 

<span data-ttu-id="f998e-112">Настроить систему управления версиями в учетной записи службы автоматизации можно за два простых шага. Если у вас уже есть учетная запись GitHub, все делается за один шаг.</span><span class="sxs-lookup"><span data-stu-id="f998e-112">There are two simple steps required to configure source control for your Automation account, and only one if you already have a GitHub account.</span></span> <span data-ttu-id="f998e-113">К ним относятся:</span><span class="sxs-lookup"><span data-stu-id="f998e-113">They are:</span></span>

## <a name="step-1--create-a-github-repository"></a><span data-ttu-id="f998e-114">Шаг 1. Создание репозитория GitHub</span><span class="sxs-lookup"><span data-stu-id="f998e-114">Step 1 – Create a GitHub repository</span></span>
<span data-ttu-id="f998e-115">Если у вас уже имеется учетная запись GitHub и репозиторий, который вы хотите связать со службой автоматизации Azure, выполните вход в имеющуюся учетную запись и переходите к шагу 2.</span><span class="sxs-lookup"><span data-stu-id="f998e-115">If you already have a GitHub account and a repository that you want to link to Azure Automation, then login to your existing account and start from step 2 below.</span></span> <span data-ttu-id="f998e-116">В противном случае перейдите на сайт [GitHub](https://github.com/), зарегистрируйтесь и [создайте репозиторий](https://help.github.com/articles/create-a-repo/).</span><span class="sxs-lookup"><span data-stu-id="f998e-116">Otherwise, navigate to [GitHub](https://github.com/), sign up for a new account and [create a new repository](https://help.github.com/articles/create-a-repo/).</span></span>

## <a name="step-2--set-up-source-control-in-azure-automation"></a><span data-ttu-id="f998e-117">Шаг 2. Настройка системы управления версиями в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="f998e-117">Step 2 – Set up source control in Azure Automation</span></span>
1. <span data-ttu-id="f998e-118">В колонке "Учетная запись автоматизации" на портале Azure щелкните **Настроить систему управления версиями**</span><span class="sxs-lookup"><span data-stu-id="f998e-118">From the Automation Account blade in the Azure portal, click **Set Up Source Control.**</span></span> 
   
    ![Настройка системы управления версиями](media/automation-source-control-integration/automation_01_SetUpSourceControl.png)
2. <span data-ttu-id="f998e-120">Откроется колонка **Система управления версиями** , в которой можно указать данные учетной записи GitHub.</span><span class="sxs-lookup"><span data-stu-id="f998e-120">The **Source Control** blade opens, where you can configure your GitHub account details.</span></span> <span data-ttu-id="f998e-121">Далее приведен список настраиваемых параметров.</span><span class="sxs-lookup"><span data-stu-id="f998e-121">Below is the list of parameters to configure:</span></span>  
   
   | <span data-ttu-id="f998e-122">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="f998e-122">**Parameter**</span></span> | <span data-ttu-id="f998e-123">**Описание**</span><span class="sxs-lookup"><span data-stu-id="f998e-123">**Description**</span></span> |
   |:--- |:--- |
   | <span data-ttu-id="f998e-124">Выбор источника</span><span class="sxs-lookup"><span data-stu-id="f998e-124">Choose Source</span></span> |<span data-ttu-id="f998e-125">Укажите источник.</span><span class="sxs-lookup"><span data-stu-id="f998e-125">Select the source.</span></span> <span data-ttu-id="f998e-126">В настоящее время поддерживается только **GitHub** .</span><span class="sxs-lookup"><span data-stu-id="f998e-126">Currently, only **GitHub** is supported.</span></span> |
   | <span data-ttu-id="f998e-127">Авторизация</span><span class="sxs-lookup"><span data-stu-id="f998e-127">Authorization</span></span> |<span data-ttu-id="f998e-128">Щелкните кнопку **Авторизовать** , чтобы предоставить службе автоматизации Azure доступ к репозиторию GitHub.</span><span class="sxs-lookup"><span data-stu-id="f998e-128">Click the **Authorize** button to grant Azure Automation access to your GitHub repository.</span></span> <span data-ttu-id="f998e-129">Если вы уже выполнили вход в учетную запись GitHub в другом окне, то будут использованы учетные данные этой учетной записи.</span><span class="sxs-lookup"><span data-stu-id="f998e-129">If you are already logged in to your GitHub account in a different window, then the credentials of that account are used.</span></span> <span data-ttu-id="f998e-130">После успешной авторизации в колонке под свойством **Авторизация**отобразится ваше имя пользователя в GitHub.</span><span class="sxs-lookup"><span data-stu-id="f998e-130">Once authorization is successful, the blade will show your GitHub username under **Authorization Property**.</span></span> |
   | <span data-ttu-id="f998e-131">Выберите репозиторий</span><span class="sxs-lookup"><span data-stu-id="f998e-131">Choose repository</span></span> |<span data-ttu-id="f998e-132">Выберите репозиторий GitHub из списка доступных репозиториев.</span><span class="sxs-lookup"><span data-stu-id="f998e-132">Select a GitHub repository from the list of available repositories.</span></span> |
   | <span data-ttu-id="f998e-133">Выберите ветвь</span><span class="sxs-lookup"><span data-stu-id="f998e-133">Choose branch</span></span> |<span data-ttu-id="f998e-134">Выберите ветвь из списка доступных.</span><span class="sxs-lookup"><span data-stu-id="f998e-134">Select a branch from the list of available branches.</span></span> <span data-ttu-id="f998e-135">Если вы не создавали ветвей, будет показана только ветвь **master** .</span><span class="sxs-lookup"><span data-stu-id="f998e-135">Only the **master** branch is shown if you haven’t created any branches.</span></span> |
   | <span data-ttu-id="f998e-136">Путь к папке Runbook</span><span class="sxs-lookup"><span data-stu-id="f998e-136">Runbook folder path</span></span> |<span data-ttu-id="f998e-137">Путь к папке с модулями Runbook в репозитории GitHub, из которого требуется загружать или в который требуется отправлять код.</span><span class="sxs-lookup"><span data-stu-id="f998e-137">The runbook folder path specifies the path in the GitHub repository from which you want to push or pull your code.</span></span> <span data-ttu-id="f998e-138">Путь указывается в формате **/имя_папки/имя_вложенной_папки**.</span><span class="sxs-lookup"><span data-stu-id="f998e-138">It must be entered in the format **/foldername/subfoldername**.</span></span> <span data-ttu-id="f998e-139">С вашей учетной записью службы автоматизации будут синхронизированы только модули из папки Runbook.</span><span class="sxs-lookup"><span data-stu-id="f998e-139">Only runbooks in the runbook folder path will be synced to your Automation account.</span></span> <span data-ttu-id="f998e-140">Модули Runbook во вложенных подпапках папки с модулями Runbook **НЕ** будут синхронизированы.</span><span class="sxs-lookup"><span data-stu-id="f998e-140">Runbooks in the subfolders of the runbook folder path will **NOT** be synced.</span></span> <span data-ttu-id="f998e-141">Чтобы синхронизировать все модули Runbook в репозитории, используйте символ **/** .</span><span class="sxs-lookup"><span data-stu-id="f998e-141">Use **/** to sync all the runbooks under the repository.</span></span> |
3. <span data-ttu-id="f998e-142">Например, ваш репозиторий называется **PowerShellScripts**, и он содержит папку **RootFolder** с вложенной папкой **SubFolder**.</span><span class="sxs-lookup"><span data-stu-id="f998e-142">For example, if you have a repository named **PowerShellScripts** that contains a folder named **RootFolder**, which contains a folder named **SubFolder**.</span></span> <span data-ttu-id="f998e-143">Для выполнения синхронизации на уровне каждой папки можно использовать следующие строки:</span><span class="sxs-lookup"><span data-stu-id="f998e-143">You can use the following strings to sync each folder level:</span></span>
   
   1. <span data-ttu-id="f998e-144">Чтобы синхронизировать модули Runbook из **репозитория**, укажите следующий путь к папке с модулями Runbook: */*</span><span class="sxs-lookup"><span data-stu-id="f998e-144">To sync runbooks from **repository**, runbook folder path is */*</span></span>
   2. <span data-ttu-id="f998e-145">Чтобы синхронизировать модули Runbook из **RootFolder**, укажите следующий путь к папке с модулями Runbook: */корневая_папка*</span><span class="sxs-lookup"><span data-stu-id="f998e-145">To sync runbooks from **RootFolder**, runbook folder path is */RootFolder*</span></span>
   3. <span data-ttu-id="f998e-146">Чтобы синхронизировать модули Runbook из папки **SubFolder**, укажите следующий путь к папке с модулями Runbook: */корневая_папка/вложенная_папка*.</span><span class="sxs-lookup"><span data-stu-id="f998e-146">To sync runbooks from **SubFolder**, runbook folder path is */RootFolder/SubFolder*.</span></span>
4. <span data-ttu-id="f998e-147">После настройки параметры отобразятся в колонке **Настройка системы управления версиями**</span><span class="sxs-lookup"><span data-stu-id="f998e-147">After you configure the parameters, they are displayed on the **Set Up Source Control blade.**</span></span>  
   
    ![Колонка "Настройка"](media/automation-source-control-integration/automation_02_SourceControlConfigure.png)
5. <span data-ttu-id="f998e-149">После того как вы нажмете кнопку "ОК", интеграция системы управления версиями будет настроена для вашей учетной записи службы автоматизации. Теперь нужно добавить в нее сведения из учетной записи GitHub.</span><span class="sxs-lookup"><span data-stu-id="f998e-149">Once you click OK, source control integration is now configured for your Automation account and should be updated with your GitHub information.</span></span> <span data-ttu-id="f998e-150">Щелкните эту область, чтобы просмотреть весь журнал заданий синхронизации системы управления версиями.</span><span class="sxs-lookup"><span data-stu-id="f998e-150">You can now click on this part to view all of your source control sync job history.</span></span>  
   
    ![Значения репозитория](media/automation-source-control-integration/automation_03_RepoValues.png)
6. <span data-ttu-id="f998e-152">После настройки системы управления версиями в вашей учетной записи службы автоматизации будут созданы следующие ресурсы службы автоматизации:</span><span class="sxs-lookup"><span data-stu-id="f998e-152">After you set up source control, the following Automation resources will be created in your Automation account:</span></span>  
   <span data-ttu-id="f998e-153">Два [ресурса переменных](automation-variables.md).</span><span class="sxs-lookup"><span data-stu-id="f998e-153">Two [variable assets](automation-variables.md) are created.</span></span>  
   
   * <span data-ttu-id="f998e-154">Переменная **Microsoft.Azure.Automation.SourceControl.Connection** содержит значения строки подключения, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="f998e-154">The variable **Microsoft.Azure.Automation.SourceControl.Connection** contains the values of the connection string, as shown below.</span></span>  
     
     | <span data-ttu-id="f998e-155">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="f998e-155">**Parameter**</span></span> | <span data-ttu-id="f998e-156">**Значение**</span><span class="sxs-lookup"><span data-stu-id="f998e-156">**Value**</span></span> |
     |:--- |:--- |
     | <span data-ttu-id="f998e-157">Имя</span><span class="sxs-lookup"><span data-stu-id="f998e-157">Name</span></span> |<span data-ttu-id="f998e-158">Microsoft.Azure.Automation.SourceControl.Connection</span><span class="sxs-lookup"><span data-stu-id="f998e-158">Microsoft.Azure.Automation.SourceControl.Connection</span></span> |
     | <span data-ttu-id="f998e-159">Тип</span><span class="sxs-lookup"><span data-stu-id="f998e-159">Type</span></span> |<span data-ttu-id="f998e-160">Строка</span><span class="sxs-lookup"><span data-stu-id="f998e-160">String</span></span> |
     | <span data-ttu-id="f998e-161">Значение</span><span class="sxs-lookup"><span data-stu-id="f998e-161">Value</span></span> |<span data-ttu-id="f998e-162">{"Branch":\<*имя ветви*>,"RunbookFolderPath":\<*путь к папке с модулями Runbook*>,"ProviderType":\<*для GitHub значение равно 1*>,"Repository":\<*имя репозитория*>,"Username":\<*имя пользователя GitHub*>}</span><span class="sxs-lookup"><span data-stu-id="f998e-162">{"Branch":\<*Your branch name*>,"RunbookFolderPath":\<*Runbook folder path*>,"ProviderType":\<*has a value 1 for GitHub*>,"Repository":\<*Name of your repository*>,"Username":\<*Your GitHub user name*>}</span></span> |

    * <span data-ttu-id="f998e-163">Переменная **Microsoft.Azure.Automation.SourceControl.OAuthToken**содержит надежно зашифрованное значение OAuthToken.</span><span class="sxs-lookup"><span data-stu-id="f998e-163">The variable **Microsoft.Azure.Automation.SourceControl.OAuthToken**, contains the secure encrypted value of your OAuthToken.</span></span>  

    |<span data-ttu-id="f998e-164">**Параметр**</span><span class="sxs-lookup"><span data-stu-id="f998e-164">**Parameter**</span></span>            |<span data-ttu-id="f998e-165">**Значение**</span><span class="sxs-lookup"><span data-stu-id="f998e-165">**Value**</span></span> |
    |:---|:---|
    | <span data-ttu-id="f998e-166">Имя</span><span class="sxs-lookup"><span data-stu-id="f998e-166">Name</span></span>  | <span data-ttu-id="f998e-167">Microsoft.Azure.Automation.SourceControl.OAuthToken</span><span class="sxs-lookup"><span data-stu-id="f998e-167">Microsoft.Azure.Automation.SourceControl.OAuthToken</span></span> |
    | <span data-ttu-id="f998e-168">Тип</span><span class="sxs-lookup"><span data-stu-id="f998e-168">Type</span></span> | <span data-ttu-id="f998e-169">Unknown(Encrypted)</span><span class="sxs-lookup"><span data-stu-id="f998e-169">Unknown(Encrypted)</span></span> |
    | <span data-ttu-id="f998e-170">Значение</span><span class="sxs-lookup"><span data-stu-id="f998e-170">Value</span></span> | <span data-ttu-id="f998e-171"><*Зашифрованное значение OAuthToken*></span><span class="sxs-lookup"><span data-stu-id="f998e-171"><*Encrypted OAuthToken*></span></span> |  

    ![Переменные](media/automation-source-control-integration/automation_04_Variables.png)  

    * <span data-ttu-id="f998e-173">**Система управления версиями службы автоматизации** будет добавлена в вашу учетную запись GitHub в виде авторизованного приложения.</span><span class="sxs-lookup"><span data-stu-id="f998e-173">**Automation Source Control** is added as an authorized application to your GitHub account.</span></span> <span data-ttu-id="f998e-174">Чтобы просмотреть приложение, на домашней странице GitHub последовательно выберите **profile** (Профиль)  > **Settings** (Параметры)  > **Applications** (Приложения).</span><span class="sxs-lookup"><span data-stu-id="f998e-174">To view the application: From your GitHub home page, navigate to your **profile** > **Settings** > **Applications**.</span></span> <span data-ttu-id="f998e-175">Это приложение позволяет службе автоматизации Azure синхронизировать репозиторий GitHub с учетной записью службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="f998e-175">This application allows Azure Automation to sync your GitHub repository to an Automation account.</span></span>  

    ![Приложение Git](media/automation-source-control-integration/automation_05_GitApplication.png)


## <a name="using-source-control-in-automation"></a><span data-ttu-id="f998e-177">Использование системы управления версиями в службе автоматизации</span><span class="sxs-lookup"><span data-stu-id="f998e-177">Using Source Control in Automation</span></span>
### <a name="check-in-a-runbook-from-azure-automation-to-source-control"></a><span data-ttu-id="f998e-178">Возврат модуля Runbook из службы автоматизации Azure в систему управления версиями</span><span class="sxs-lookup"><span data-stu-id="f998e-178">Check-in a runbook from Azure Automation to source control</span></span>
<span data-ttu-id="f998e-179">Возврат модуля Runbook позволяет перенести изменения, внесенные в модуль Runbook в службе автоматизации Azure, в репозиторий системы управления версиями.</span><span class="sxs-lookup"><span data-stu-id="f998e-179">Runbook check-in allows you to push the changes you have made to a runbook in Azure Automation into your source control repository.</span></span> <span data-ttu-id="f998e-180">Для возврата модуля Runbook сделайте следующее:</span><span class="sxs-lookup"><span data-stu-id="f998e-180">Below are the steps to check-in a runbook:</span></span>

1. <span data-ttu-id="f998e-181">Находясь в своей учетной записи службы автоматизации, [создайте текстовый модуль Runbook](automation-first-runbook-textual.md) или [измените существующий](automation-edit-textual-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="f998e-181">From your Automation Account, [create a new textual runbook](automation-first-runbook-textual.md), or [edit an existing, textual runbook](automation-edit-textual-runbook.md).</span></span> <span data-ttu-id="f998e-182">Этот модуль может быть модулем Runbook рабочего процесса PowerShell или сценария PowerShell.</span><span class="sxs-lookup"><span data-stu-id="f998e-182">This runbook can be either a PowerShell Workflow or a PowerShell script runbook.</span></span>  
2. <span data-ttu-id="f998e-183">Завершив изменение модуля Runbook, сохраните его и щелкните **Возврат** в колонке **Правка**.</span><span class="sxs-lookup"><span data-stu-id="f998e-183">After you edit your runbook, save it and click **check-in** from the **Edit** blade.</span></span>  
   
    ![Кнопка "Возврат"](media/automation-source-control-integration/automation_06_CheckinButton.png)

     > [!NOTE] 
     > <span data-ttu-id="f998e-185">При возврате модуля из службы автоматизации Azure код, имеющийся в системе управления версиями, будет перезаписан.</span><span class="sxs-lookup"><span data-stu-id="f998e-185">Check-in from Azure Automation will overwrite the code that currently exists in your source control.</span></span> <span data-ttu-id="f998e-186">Инструкция командной строки для возврата, эквивалентная команде Git, выглядит следующим образом: **git add + git commit + git push**</span><span class="sxs-lookup"><span data-stu-id="f998e-186">The Git equivalent command line instruction to check-in is **git add + git commit + git push**</span></span>  

1. <span data-ttu-id="f998e-187">После нажатия кнопки **Возврат** появится запрос подтверждения. Щелкните "Да", чтобы продолжить.</span><span class="sxs-lookup"><span data-stu-id="f998e-187">When you click **check-in**, you will be prompted with a confirmation message, click yes to continue.</span></span>  
   
    ![Сообщение возврата](media/automation-source-control-integration/automation_07_CheckinMessage.png)
2. <span data-ttu-id="f998e-189">Процедура возврата запустит модуль Runbook для управления источниками **Sync-MicrosoftAzureAutomationAccountToGitHubV1**.</span><span class="sxs-lookup"><span data-stu-id="f998e-189">Check-in starts the source control runbook: **Sync-MicrosoftAzureAutomationAccountToGitHubV1**.</span></span> <span data-ttu-id="f998e-190">Этот модуль Runbook подключается к GitHub и передает изменения из службы автоматизации Azure в ваш репозиторий.</span><span class="sxs-lookup"><span data-stu-id="f998e-190">This runbook connects to GitHub and pushes changes from Azure Automation to your repository.</span></span> <span data-ttu-id="f998e-191">Чтобы просмотреть журнал заданий возврата, вернитесь на вкладку **Интеграция системы управления версиями** и откройте колонку "Синхронизация репозитория".</span><span class="sxs-lookup"><span data-stu-id="f998e-191">To view the check-in job history, go back to the **Source Control Integration** tab and click to open the Repository Synchronization blade.</span></span> <span data-ttu-id="f998e-192">В этой колонке будут показаны все задания из системы управления версиями.</span><span class="sxs-lookup"><span data-stu-id="f998e-192">This blade shows all of your source control jobs.</span></span>  <span data-ttu-id="f998e-193">Выберите задание, которое хотите просмотреть, и щелкните его.</span><span class="sxs-lookup"><span data-stu-id="f998e-193">Select the job you want to view and click to view the details.</span></span>  
   
    ![Модуль Runbook для возврата](media/automation-source-control-integration/automation_08_CheckinRunbook.png)
   
   > [!NOTE]
   > <span data-ttu-id="f998e-195">Модули Runbook системы управления версиями — это особые модули Runbook службы автоматизации, недоступные для просмотра и изменения.</span><span class="sxs-lookup"><span data-stu-id="f998e-195">Source control runbooks are special Automation runbooks that you cannot view or edit.</span></span> <span data-ttu-id="f998e-196">Они не включаются в список модулей Runbook, однако в списке заданий отображаются задачи синхронизации.</span><span class="sxs-lookup"><span data-stu-id="f998e-196">While they will not show up on your runbook list, you will see sync jobs showing up on your jobs list.</span></span>
   > 
   > 
3. <span data-ttu-id="f998e-197">Имя измененного модуля Runbook передается в модуль Runbook задания возврата в виде входного параметра.</span><span class="sxs-lookup"><span data-stu-id="f998e-197">The name of the modified runbook is sent as an input parameter to the check-in runbook.</span></span> <span data-ttu-id="f998e-198">Вы можете [просмотреть сведения о задании](automation-runbook-execution.md#viewing-job-status-from-the-azure-portal), развернув модуль Runbook в колонке **Синхронизация репозитория**.</span><span class="sxs-lookup"><span data-stu-id="f998e-198">You can [view the job details](automation-runbook-execution.md#viewing-job-status-from-the-azure-portal) by expanding runbook in **Repository Synchronization** blade.</span></span>  
   
    ![Входные данные для возврата](media/automation-source-control-integration/automation_09_CheckinInput.png)
4. <span data-ttu-id="f998e-200">Когда задание будет завершено, обновите репозиторий GitHub, чтобы увидеть изменения.</span><span class="sxs-lookup"><span data-stu-id="f998e-200">Refresh your GitHub repository once the job completes to view the changes.</span></span>  <span data-ttu-id="f998e-201">Должна существовать фиксации в репозиторий с сообщение фиксации: **Updated *имя Runbook* в службе автоматизации Azure.**</span><span class="sxs-lookup"><span data-stu-id="f998e-201">There should be a commit in your repository with a commit message: **Updated *Runbook Name* in Azure Automation.**</span></span>  

### <a name="sync-runbooks-from-source-control-to-azure-automation"></a><span data-ttu-id="f998e-202">Синхронизация модулей Runbook из системы управления версиями в службу автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="f998e-202">Sync runbooks from source control to Azure Automation</span></span>
<span data-ttu-id="f998e-203">Кнопка синхронизации в колонке "Синхронизация репозитория" позволяет извлечь все модули Runbook из папки с модулями в вашем репозитории в учетную запись службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="f998e-203">The sync button on the Repository Synchronization blade allows you to pull all the runbooks in the runbook folder path of your repository to your Automation account.</span></span> <span data-ttu-id="f998e-204">Один репозиторий можно синхронизировать с несколькими учетными записями службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="f998e-204">The same repository can be synced to more than one Automation account.</span></span> <span data-ttu-id="f998e-205">Для синхронизации модуля Runbook сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="f998e-205">Below are the steps to sync a runbook:</span></span>

1. <span data-ttu-id="f998e-206">В учетной записи службы автоматизации, где настроена система управления версиями, откройте колонку **Интеграция системы управления версиями/Синхронизация репозитория** и нажмите кнопку **Синхронизация**. Когда появится запрос на подтверждение, щелкните **Да**.</span><span class="sxs-lookup"><span data-stu-id="f998e-206">From the Automation account where you set up source control, open the **Source Control Integration/Repository Synchronization blade** and click **Sync** then you will be prompted with a confirmation message, click **Yes** to continue.</span></span>  
   
    ![Кнопка "Синхронизация"](media/automation-source-control-integration/automation_10_SyncButtonwithMessage.png)
2. <span data-ttu-id="f998e-208">Процедура синхронизации запустит модуль Runbook **Sync-MicrosoftAzureAutomationAccountFromGitHubV1**.</span><span class="sxs-lookup"><span data-stu-id="f998e-208">Sync starts the runbook: **Sync-MicrosoftAzureAutomationAccountFromGitHubV1**.</span></span> <span data-ttu-id="f998e-209">Этот модуль подключается к GitHub и передает изменения из вашего репозитория в службу автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="f998e-209">This runbook connects to GitHub and pulls the changes from your repository to Azure Automation.</span></span> <span data-ttu-id="f998e-210">Новое задание появится в колонке **Синхронизация репозитория** , соответствующей данному действию.</span><span class="sxs-lookup"><span data-stu-id="f998e-210">You should see a new job on the **Repository Synchronization** blade for this action.</span></span> <span data-ttu-id="f998e-211">Для просмотра сведений о задании синхронизации щелкните соответствующее задание.</span><span class="sxs-lookup"><span data-stu-id="f998e-211">To view details about the sync job, click to open the job details blade.</span></span>  
   
    ![Модуль Runbook для синхронизации](media/automation-source-control-integration/automation_11_SyncRunbook.png)

    > [!NOTE] 
    > <span data-ttu-id="f998e-213">При синхронизации из системы управления версиями черновики модулей Runbook в учетной записи службы автоматизации будут заменены **ВСЕМИ** модулями Runbook из системы управления версиями.</span><span class="sxs-lookup"><span data-stu-id="f998e-213">A sync from source control overwrites the draft version of the runbooks that currently exist in your Automation account for **ALL** runbooks that are currently in source control.</span></span> <span data-ttu-id="f998e-214">Инструкция командной строки для синхронизации, эквивалентная команде Git, выглядит следующим образом: **git pull**</span><span class="sxs-lookup"><span data-stu-id="f998e-214">The Git equivalent command line instruction to sync is **git pull**</span></span>


## <a name="troubleshooting-source-control-problems"></a><span data-ttu-id="f998e-215">Устранение неполадок с системой управления версиями</span><span class="sxs-lookup"><span data-stu-id="f998e-215">Troubleshooting source control problems</span></span>
<span data-ttu-id="f998e-216">Для заданий возврата или синхронизации с ошибками будет отображаться состояние "Приостановлено". Дополнительные сведения об ошибке можно просмотреть в колонке задания.</span><span class="sxs-lookup"><span data-stu-id="f998e-216">If there are any errors with a check-in or sync job, the job status should be suspended and you can view more details about the error in the job blade.</span></span>  <span data-ttu-id="f998e-217">В области **Все журналы** можно просмотреть все потоки PowerShell, связанные с этим заданием.</span><span class="sxs-lookup"><span data-stu-id="f998e-217">The **All Logs** part will show you all the PowerShell streams associated with that job.</span></span> <span data-ttu-id="f998e-218">Это позволит вам получить данные, необходимые для устранения проблем, связанных с возвратом или синхронизацией.</span><span class="sxs-lookup"><span data-stu-id="f998e-218">This will provide you with the details needed to help you fix any problems with your check-in or sync.</span></span> <span data-ttu-id="f998e-219">Кроме того, здесь отображается последовательность действий, выполняемых при синхронизации или возврате модуля Runbook.</span><span class="sxs-lookup"><span data-stu-id="f998e-219">It will also show you the sequence of actions that occurred while syncing or checking-in a runbook.</span></span>  

![Образ AllLogs](media/automation-source-control-integration/automation_13_AllLogs.png)

## <a name="disconnecting-source-control"></a><span data-ttu-id="f998e-221">Отключение системы управления версиями</span><span class="sxs-lookup"><span data-stu-id="f998e-221">Disconnecting source control</span></span>
<span data-ttu-id="f998e-222">Чтобы отключиться от учетной записи GitHub, откройте колонку "Синхронизация репозитория" и нажмите кнопку **Отключить**.</span><span class="sxs-lookup"><span data-stu-id="f998e-222">To disconnect from your GitHub account, open the Repository Synchronization blade and click **Disconnect**.</span></span> <span data-ttu-id="f998e-223">После отключения системы управления версиями все ранее синхронизированные модули Runbook останутся в вашей учетной записи службы автоматизации. При этом колонка "Синхронизация репозитория" станет неактивной.</span><span class="sxs-lookup"><span data-stu-id="f998e-223">Once you disconnect source control, runbooks that were synced earlier will still remain in your Automation account but the Repository Synchronization blade will not be enabled.</span></span>  

  ![Кнопка "Отключить"](media/automation-source-control-integration/automation_12_Disconnect.png)

## <a name="next-steps"></a><span data-ttu-id="f998e-225">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="f998e-225">Next steps</span></span>
<span data-ttu-id="f998e-226">Дополнительные сведения об интеграции системы управления версиями см. в следующих ресурсах:</span><span class="sxs-lookup"><span data-stu-id="f998e-226">For more information about source control integration, see the following resources:</span></span>  

* [<span data-ttu-id="f998e-227">Azure Automation: Source Control Integration in Azure Automation</span><span class="sxs-lookup"><span data-stu-id="f998e-227">Azure Automation: Source Control Integration in Azure Automation</span></span>](https://azure.microsoft.com/blog/azure-automation-source-control-13/)  
* [<span data-ttu-id="f998e-228">Vote for your favorite source control system</span><span class="sxs-lookup"><span data-stu-id="f998e-228">Vote for your favorite source control system</span></span>](https://www.surveymonkey.com/r/?sm=2dVjdcrCPFdT0dFFI8nUdQ%3d%3d)  
* [<span data-ttu-id="f998e-229">Azure Automation: Integrating Runbook Source Control using Visual Studio Team Services</span><span class="sxs-lookup"><span data-stu-id="f998e-229">Azure Automation: Integrating Runbook Source Control using Visual Studio Team Services</span></span>](https://azure.microsoft.com/blog/azure-automation-integrating-runbook-source-control-using-visual-studio-online/)  

