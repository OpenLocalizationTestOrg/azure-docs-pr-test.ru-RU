---
title: "Выходные данные и сообщения Runbook в службе автоматизации Azure | Документация Майкрософт"
description: "Описывает способы создания и извлечения выходных данных и сообщений об ошибках из модулей Runbook в службе автоматизации Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 13a414f5-0e2c-4be2-9558-a3e3ec84b6b2
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 11/11/2016
ms.author: magoedte;bwren
ms.openlocfilehash: 6f01f97e38aa271034741c8a5e2f8057ab61fcd7
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="runbook-output-and-messages-in-azure-automation"></a><span data-ttu-id="15228-103">Выходные данные и сообщения Runbook в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="15228-103">Runbook output and messages in Azure Automation</span></span>
<span data-ttu-id="15228-104">У большинства Runbook службы автоматизации Azure будут выходные данные какого-либо вида, например сообщение об ошибке для пользователя или сложный объект, предназначенный для использования другим рабочим процессом.</span><span class="sxs-lookup"><span data-stu-id="15228-104">Most Azure Automation runbooks will have some form of output such as an error message to the user or a complex object intended to be consumed by another workflow.</span></span> <span data-ttu-id="15228-105">Windows PowerShell предоставляет [несколько потоков](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) для отправки выходных данных из сценария или рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="15228-105">Windows PowerShell provides [multiple streams](http://blogs.technet.com/heyscriptingguy/archive/2014/03/30/understanding-streams-redirection-and-write-host-in-powershell.aspx) to send output from a script or workflow.</span></span> <span data-ttu-id="15228-106">Служба автоматизации Azure по-разному работает с каждым из этих потоков, и необходимо следовать рекомендациям по их использованию при создании Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-106">Azure Automation works with each of these streams differently, and you should follow best practices for how to use each when you are creating a runbook.</span></span>

<span data-ttu-id="15228-107">Следующая таблица содержит краткое описание каждого из потоков и их поведение на портале управления Azure при выполнении опубликованного Runbook и при [тестировании Runbook](automation-testing-runbook.md).</span><span class="sxs-lookup"><span data-stu-id="15228-107">The following table provides a brief description of each of the streams and their behavior in the Azure Management Portal both when running a published runbook and when [testing a runbook](automation-testing-runbook.md).</span></span> <span data-ttu-id="15228-108">В последующих разделах приведены дополнительные сведения о каждом потоке.</span><span class="sxs-lookup"><span data-stu-id="15228-108">Further details on each stream are provided in subsequent sections.</span></span>

| <span data-ttu-id="15228-109">Поток</span><span class="sxs-lookup"><span data-stu-id="15228-109">Stream</span></span> | <span data-ttu-id="15228-110">Описание</span><span class="sxs-lookup"><span data-stu-id="15228-110">Description</span></span> | <span data-ttu-id="15228-111">Опубликовано</span><span class="sxs-lookup"><span data-stu-id="15228-111">Published</span></span> | <span data-ttu-id="15228-112">Тест</span><span class="sxs-lookup"><span data-stu-id="15228-112">Test</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="15228-113">Выходные данные</span><span class="sxs-lookup"><span data-stu-id="15228-113">Output</span></span> |<span data-ttu-id="15228-114">Объекты, предназначенные для использования другими Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-114">Objects intended to be consumed by other runbooks.</span></span> |<span data-ttu-id="15228-115">Записывается в журнал заданий.</span><span class="sxs-lookup"><span data-stu-id="15228-115">Written to the job history.</span></span> |<span data-ttu-id="15228-116">Отображается в области вывода теста.</span><span class="sxs-lookup"><span data-stu-id="15228-116">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="15228-117">Предупреждение</span><span class="sxs-lookup"><span data-stu-id="15228-117">Warning</span></span> |<span data-ttu-id="15228-118">Предупреждающее сообщение, предназначенное для пользователя.</span><span class="sxs-lookup"><span data-stu-id="15228-118">Warning message intended for the user.</span></span> |<span data-ttu-id="15228-119">Записывается в журнал заданий.</span><span class="sxs-lookup"><span data-stu-id="15228-119">Written to the job history.</span></span> |<span data-ttu-id="15228-120">Отображается в области вывода теста.</span><span class="sxs-lookup"><span data-stu-id="15228-120">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="15228-121">Ошибка</span><span class="sxs-lookup"><span data-stu-id="15228-121">Error</span></span> |<span data-ttu-id="15228-122">Сообщение об ошибке, предназначенное для пользователя.</span><span class="sxs-lookup"><span data-stu-id="15228-122">Error message intended for the user.</span></span> <span data-ttu-id="15228-123">В отличие от исключения, по умолчанию Runbook продолжит работу после сообщения об ошибке.</span><span class="sxs-lookup"><span data-stu-id="15228-123">Unlike an exception, the runbook continues after an error message by default.</span></span> |<span data-ttu-id="15228-124">Записывается в журнал заданий.</span><span class="sxs-lookup"><span data-stu-id="15228-124">Written to the job history.</span></span> |<span data-ttu-id="15228-125">Отображается в области вывода теста.</span><span class="sxs-lookup"><span data-stu-id="15228-125">Displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="15228-126">Подробная информация</span><span class="sxs-lookup"><span data-stu-id="15228-126">Verbose</span></span> |<span data-ttu-id="15228-127">Сообщения, содержащие общую или отладочную информацию.</span><span class="sxs-lookup"><span data-stu-id="15228-127">Messages providing general or debugging information.</span></span> |<span data-ttu-id="15228-128">Записывается в журнал заданий только в том случае, если для Runbook включено подробное ведение журнала.</span><span class="sxs-lookup"><span data-stu-id="15228-128">Written to job history only if verbose logging is turned on for the runbook.</span></span> |<span data-ttu-id="15228-129">Отображается в области вывода теста только в том случае, если в Runbook для $VerbosePreference задано значение Continue.</span><span class="sxs-lookup"><span data-stu-id="15228-129">Displayed in the Test Output pane only if $VerbosePreference is set to Continue in the runbook.</span></span> |
| <span data-ttu-id="15228-130">Ход выполнения</span><span class="sxs-lookup"><span data-stu-id="15228-130">Progress</span></span> |<span data-ttu-id="15228-131">До и после каждого действия в Runbook автоматически создаются записи.</span><span class="sxs-lookup"><span data-stu-id="15228-131">Records automatically generated before and after each activity in the runbook.</span></span> <span data-ttu-id="15228-132">Модулю Runbook не следует пытаться создать свои собственные записи хода выполнения, так как они предназначены для интерактивного пользователя.</span><span class="sxs-lookup"><span data-stu-id="15228-132">The runbook should not attempt to create its own progress records since they are intended for an interactive user.</span></span> |<span data-ttu-id="15228-133">Записывается в журнал заданий только в том случае, если для Runbook включено ведение журнала хода выполнения.</span><span class="sxs-lookup"><span data-stu-id="15228-133">Written to job history only if progress logging is turned on for the runbook.</span></span> |<span data-ttu-id="15228-134">Не отображается в области вывода теста.</span><span class="sxs-lookup"><span data-stu-id="15228-134">Not displayed in the Test Output Pane.</span></span> |
| <span data-ttu-id="15228-135">Отладка</span><span class="sxs-lookup"><span data-stu-id="15228-135">Debug</span></span> |<span data-ttu-id="15228-136">Сообщения, предназначенные для интерактивного пользователя.</span><span class="sxs-lookup"><span data-stu-id="15228-136">Messages intended for an interactive user.</span></span> <span data-ttu-id="15228-137">Не следует использовать в Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-137">Should not be used in runbooks.</span></span> |<span data-ttu-id="15228-138">Не записывается в журнал заданий.</span><span class="sxs-lookup"><span data-stu-id="15228-138">Not written to job history.</span></span> |<span data-ttu-id="15228-139">Не записывается в область вывода теста.</span><span class="sxs-lookup"><span data-stu-id="15228-139">Not written to Test Output Pane.</span></span> |

## <a name="output-stream"></a><span data-ttu-id="15228-140">Поток вывода</span><span class="sxs-lookup"><span data-stu-id="15228-140">Output stream</span></span>
<span data-ttu-id="15228-141">Поток вывода предназначен для вывода объектов, созданных сценарием или рабочим процессом, когда он работает правильно.</span><span class="sxs-lookup"><span data-stu-id="15228-141">The Output stream is intended for output of objects created by a script or workflow when it runs correctly.</span></span> <span data-ttu-id="15228-142">В службе автоматизации Azure этот поток в основном используется для объектов, которые предназначены для использования [родительским Runbook, вызывающим текущий Runbook](automation-child-runbooks.md).</span><span class="sxs-lookup"><span data-stu-id="15228-142">In Azure Automation, this stream is primarily used for objects intended to be consumed by [parent runbooks that call the current runbook](automation-child-runbooks.md).</span></span> <span data-ttu-id="15228-143">Если вы [используете встроенный вызов Runbook](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) из родительского Runbook, он возвращает данные из потока вывода в родительский Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-143">When you [call a runbook inline](automation-child-runbooks.md#invoking-a-child-runbook-using-inline-execution) from a parent runbook, it returns data from the output stream to the parent.</span></span> <span data-ttu-id="15228-144">Для передачи информации пользователю следует использовать только поток вывода, если известно, что Runbook никогда не будет вызван другим Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-144">You should only use the output stream to communicate general information back to the user if you know the runbook will never be called by another runbook.</span></span> <span data-ttu-id="15228-145">Однако в обычном случае для передачи информации пользователю рекомендуется использовать [подробный поток](#Verbose) .</span><span class="sxs-lookup"><span data-stu-id="15228-145">As a best practice, however, you should typically use the [Verbose Stream](#Verbose) to communicate general information to the user.</span></span>

<span data-ttu-id="15228-146">Можно записать данные в поток вывода с помощью [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) или поместив объект в отдельную строку в Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-146">You can write data to the output stream using [Write-Output](http://technet.microsoft.com/library/hh849921.aspx) or by putting the object on its own line in the runbook.</span></span>

    #The following lines both write an object to the output stream.
    Write-Output –InputObject $object
    $object

### <a name="output-from-a-function"></a><span data-ttu-id="15228-147">Выходные данные функции</span><span class="sxs-lookup"><span data-stu-id="15228-147">Output from a function</span></span>
<span data-ttu-id="15228-148">При записи в поток вывода в функции, которая находится в Runbook, выходные данные передаются обратно в Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-148">When you write to the output stream in a function that is included in your runbook, the output is passed back to the runbook.</span></span> <span data-ttu-id="15228-149">Если Runbook присваивает эти выходные данные переменной, то они не записываются в поток вывода.</span><span class="sxs-lookup"><span data-stu-id="15228-149">If the runbook assigns that output to a variable, then it is not written to the output stream.</span></span> <span data-ttu-id="15228-150">Запись в любые другие потоки из функции приведет к записи в соответствующий поток для Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-150">Writing to any other streams from within the function will write to the corresponding stream for the runbook.</span></span>

<span data-ttu-id="15228-151">Рассмотрим следующий пример Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-151">Consider the following sample runbook.</span></span>

    Workflow Test-Runbook
    {
        Write-Verbose "Verbose outside of function" -Verbose
        Write-Output "Output outside of function"
        $functionOutput = Test-Function
        $functionOutput

    Function Test-Function
     {
        Write-Verbose "Verbose inside of function" -Verbose
        Write-Output "Output inside of function"
      }
    }


<span data-ttu-id="15228-152">Поток вывода для задания Runbook будет следующим:</span><span class="sxs-lookup"><span data-stu-id="15228-152">The output stream for the runbook job would be:</span></span>

    Output inside of function
    Output outside of function

<span data-ttu-id="15228-153">Подробный поток для задания Runbook будет следующим:</span><span class="sxs-lookup"><span data-stu-id="15228-153">The verbose stream for the runbook job would be:</span></span>

    Verbose outside of function
    Verbose inside of function

<span data-ttu-id="15228-154">После публикации модуля Runbook и перед его запуском вам нужно включить подробное ведение журнала в параметрах модуля, чтобы получить выходной поток подробных сведений.</span><span class="sxs-lookup"><span data-stu-id="15228-154">Once you have published the runbook and before you start it, you must also turn on Verbose logging in the runbook settings in order to get the Verbose stream output.</span></span>

### <a name="declaring-output-data-type"></a><span data-ttu-id="15228-155">Объявление типа выходных данных</span><span class="sxs-lookup"><span data-stu-id="15228-155">Declaring output data type</span></span>
<span data-ttu-id="15228-156">Рабочий процесс может указать тип выходных данных с помощью [атрибута OutputType](http://technet.microsoft.com/library/hh847785.aspx).</span><span class="sxs-lookup"><span data-stu-id="15228-156">A workflow can specify the data type of its output using the [OutputType attribute](http://technet.microsoft.com/library/hh847785.aspx).</span></span> <span data-ttu-id="15228-157">Этот атрибут не оказывает влияния во время выполнения, но содержит указание об ожидаемых выходных данных Runbook для автора Runbook во время разработки.</span><span class="sxs-lookup"><span data-stu-id="15228-157">This attribute has no effect during runtime, but it provides an indication to the runbook author at design time of the expected output of the runbook.</span></span> <span data-ttu-id="15228-158">Так как набор инструментов для Runbook продолжает увеличиваться, растет и важность объявления типов выходных данных во время разработки.</span><span class="sxs-lookup"><span data-stu-id="15228-158">As the toolset for runbooks continues to evolve, the importance of declaring output data types at design time will increase in importance.</span></span> <span data-ttu-id="15228-159">Поэтому рекомендуется включать это объявление во все создаваемые вами Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-159">As a result, it is a best practice to include this declaration in any runbooks that you create.</span></span>

<span data-ttu-id="15228-160">Вот список с примерами типов выходных данных:</span><span class="sxs-lookup"><span data-stu-id="15228-160">Here is a list of example output types:</span></span>

* <span data-ttu-id="15228-161">System.String</span><span class="sxs-lookup"><span data-stu-id="15228-161">System.String</span></span>
* <span data-ttu-id="15228-162">System.Int32</span><span class="sxs-lookup"><span data-stu-id="15228-162">System.Int32</span></span>
* <span data-ttu-id="15228-163">System.Collections.Hashtable</span><span class="sxs-lookup"><span data-stu-id="15228-163">System.Collections.Hashtable</span></span>
* <span data-ttu-id="15228-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span><span class="sxs-lookup"><span data-stu-id="15228-164">Microsoft.Azure.Commands.Compute.Models.PSVirtualMachine</span></span>

<span data-ttu-id="15228-165">Следующий пример Runbook выводит строковый объект и включает в себя объявление типа выходных данных.</span><span class="sxs-lookup"><span data-stu-id="15228-165">The following sample runbook outputs a string object and includes a declaration of its output type.</span></span> <span data-ttu-id="15228-166">Если Runbook выводит массив определенного типа, все равно следует указать его тип, а не массив типа.</span><span class="sxs-lookup"><span data-stu-id="15228-166">If your runbook outputs an array of a certain type, then you should still specify the type as opposed to an array of the type.</span></span>

    Workflow Test-Runbook
    {
       [OutputType([string])]

       $output = "This is some string output."
       Write-Output $output
    }

<span data-ttu-id="15228-167">Чтобы объявить тип выходных данных в графических модулях Runbook или графических модулях Runbook рабочего процесса PowerShell, в разделе **Входные и выходные данные** можно указать имя типа выходных данных.</span><span class="sxs-lookup"><span data-stu-id="15228-167">To declare an output type in Grapical or Graphical PowerShell Workflow runbooks, you can select the **Input and Output** menu option and type in the name of the output type.</span></span>  <span data-ttu-id="15228-168">Мы рекомендуем использовать полное имя класса .NET, чтобы упростить идентификацию при использовании ссылок из родительского модуля.</span><span class="sxs-lookup"><span data-stu-id="15228-168">We recommend you use the full .NET class name to make it easily identifiable when referencing it from a parent runbook.</span></span>  <span data-ttu-id="15228-169">Таким образом все свойства этого класса предоставляются шине данных в модуле Runbook, обеспечивая более гибкие возможности их использования в рамках условной логики, ведения журнала, а также создания ссылок со значениями для других действий в модуле Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-169">This exposes all the properties of that class to the data bus in the runbook and provides a lot of flexibility when using them for conditional logic, logging, and referencing as values for other activities in the runbook.</span></span><br> <span data-ttu-id="15228-170">![Runbook: раздел "Входные и выходные данные"](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span><span class="sxs-lookup"><span data-stu-id="15228-170">![Runbook Input and Output option](media/automation-runbook-output-and-messages/runbook-menu-input-and-output-option.png)</span></span>

<span data-ttu-id="15228-171">В следующем примере с использованием двух графических модулей Runbook мы покажем, как это работает.</span><span class="sxs-lookup"><span data-stu-id="15228-171">In the following example, we have two graphical runbooks to demonstrate this feature.</span></span>  <span data-ttu-id="15228-172">При применении модульной схемы проектирования модулей Runbook один модуль используется в качестве *шаблона аутентификации Runbook* для управления аутентификацией в Azure с помощью учетной записи запуска от имени.</span><span class="sxs-lookup"><span data-stu-id="15228-172">If we apply the modular runbook design model, we have one runbook which serves as the *Authentication Runbook template* managing authentication with Azure using the Run As account.</span></span>  <span data-ttu-id="15228-173">Второй модуль Runbook (обычно он реализует основную логику для автоматизации сценария) выполняет *шаблон аутентификации Runbook* , а затем выводит результаты в **тестовую** область выходных данных.</span><span class="sxs-lookup"><span data-stu-id="15228-173">Our second runbook, which would normally perform the core logic to automate a given scenario, in this case is going to execute the *Authentication Runbook template* and display the results to your **Test** output pane.</span></span>  <span data-ttu-id="15228-174">В обычных условиях этот модуль Runbook выполнял бы какие-то действия в отношении ресурса, используя выходные данные дочернего модуля Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-174">Under normal circumstances, we would have this runbook do something against a resource leveraging the output from the child runbook.</span></span>    

<span data-ttu-id="15228-175">Ниже представлена основная логика модуля Runbook **AuthenticateTo-Azure**.</span><span class="sxs-lookup"><span data-stu-id="15228-175">Here is the basic logic of the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="15228-176">![Runbook: пример шаблона аутентификации](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span><span class="sxs-lookup"><span data-stu-id="15228-176">![Authenticate Runbook Template Example](media/automation-runbook-output-and-messages/runbook-authentication-template.png).</span></span>  

<span data-ttu-id="15228-177">Она включает тип выходных данных *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, который возвращает свойства профиля аутентификации.</span><span class="sxs-lookup"><span data-stu-id="15228-177">It includes the output type *Microsoft.Azure.Commands.Profile.Models.PSAzureContext*, which will return the authentication profile properties.</span></span><br> <span data-ttu-id="15228-178">![Runbook: пример типа выходных данных](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span><span class="sxs-lookup"><span data-stu-id="15228-178">![Runbook Output Type Example](media/automation-runbook-output-and-messages/runbook-input-and-output-add-blade.png)</span></span> 

<span data-ttu-id="15228-179">Хотя этот модуль Runbook очень прост, в нем есть элемент конфигурации, о котором стоит здесь упомянуть.</span><span class="sxs-lookup"><span data-stu-id="15228-179">While this runbook is very straight forward, there is one configuration item to call out here.</span></span>  <span data-ttu-id="15228-180">Последнее действие — выполнение командлета **Write-Output** и запись данных профиля в переменную $_ с помощью выражения PowerShell для параметра **Inputobject**, который необходим для этого командлета.</span><span class="sxs-lookup"><span data-stu-id="15228-180">The last activity is executing the **Write-Output** cmdlet and writes the profile data to a $_ variable using a PowerShell expression for the **Inputobject** parameter, which is required for that cmdlet.</span></span>  

<span data-ttu-id="15228-181">Для второго модуля Runbook (с именем *Test-ChildOutputType*) в нашем примере предусмотрены два действия.</span><span class="sxs-lookup"><span data-stu-id="15228-181">For the second runbook in this example, named *Test-ChildOutputType*, we simply have two activities.</span></span><br> <span data-ttu-id="15228-182">![Runbook: пример типа выходных данных дочернего модуля](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span><span class="sxs-lookup"><span data-stu-id="15228-182">![Example Child Output Type Runbook](media/automation-runbook-output-and-messages/runbook-display-authentication-results-example.png)</span></span> 

<span data-ttu-id="15228-183">Первое действие вызывает модуль Runbook **AuthenticateTo-Azure**, а второе — выполняет командлет **Write-Verbose** с использованием **источника данных** для **выходных данных действия** и значения **Context.Subscription.SubscriptionName** для **пути к полю** (определяет выходные данные контекста из модуля **AuthenticateTo-Azure**).</span><span class="sxs-lookup"><span data-stu-id="15228-183">The first activity calls the **AuthenticateTo-Azure** runbook and the second activity is running the **Write-Verbose** cmdlet with the **Data source** of **Activity output** and the value for **Field path** is **Context.Subscription.SubscriptionName**, which is specifying the context output from the **AuthenticateTo-Azure** runbook.</span></span><br> <span data-ttu-id="15228-184">![Командлет Write-Verbose: источник данных параметров](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span><span class="sxs-lookup"><span data-stu-id="15228-184">![Write-Verbose cmdlet Parameter Data Source](media/automation-runbook-output-and-messages/runbook-write-verbose-parameters-config.png)</span></span>    

<span data-ttu-id="15228-185">Результат — имя подписки.</span><span class="sxs-lookup"><span data-stu-id="15228-185">The resulting output is the name of the subscription.</span></span><br> ![Runbook: результаты командлета Test-ChildOutputType](media/automation-runbook-output-and-messages/runbook-test-childoutputtype-results.png)

<span data-ttu-id="15228-187">Замечание о поведении элемента управления "Тип выходных данных".</span><span class="sxs-lookup"><span data-stu-id="15228-187">One note about the behavior of the Output Type control.</span></span>  <span data-ttu-id="15228-188">Когда вы вводите значение в поле "Тип выходных данных" в колонке свойств входных и выходных данных, щелкните рядом с элементом управления, чтобы он распознал эту запись.</span><span class="sxs-lookup"><span data-stu-id="15228-188">When you type a value in the Output Type field on the Input and Output properties blade, you have to click outside of the control  after you type it, in order for your entry to be recognized by the control.</span></span>  

## <a name="message-streams"></a><span data-ttu-id="15228-189">Потоки сообщений</span><span class="sxs-lookup"><span data-stu-id="15228-189">Message streams</span></span>
<span data-ttu-id="15228-190">В отличие от потока вывода потоки сообщений предназначены для передачи информации пользователю.</span><span class="sxs-lookup"><span data-stu-id="15228-190">Unlike the output stream, message streams are intended to communicate information to the user.</span></span> <span data-ttu-id="15228-191">Существует несколько потоков сообщений для различных типов информации, и каждый по-разному обрабатываются службой автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="15228-191">There are multiple message streams for different kinds of information, and each is handled differently by Azure Automation.</span></span>

### <a name="warning-and-error-streams"></a><span data-ttu-id="15228-192">Потоки предупреждений и ошибок</span><span class="sxs-lookup"><span data-stu-id="15228-192">Warning and error streams</span></span>
<span data-ttu-id="15228-193">Потоки предупреждений и ошибок предназначены для ведения журнала проблем, возникающих в Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-193">The Warning and Error streams are intended to log problems that occur in a runbook.</span></span> <span data-ttu-id="15228-194">Они записываются в журнал заданий при выполнении Runbook и добавляются в область вывода теста на портале управления Azure при тестировании Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-194">They are written to the job history when a runbook is executed, and are included in the Test Output Pane in the Azure Management Portal when a runbook is tested.</span></span> <span data-ttu-id="15228-195">По умолчанию Runbook продолжит выполнение после предупреждения или ошибки.</span><span class="sxs-lookup"><span data-stu-id="15228-195">By default, the runbook will continue executing after a warning or error.</span></span> <span data-ttu-id="15228-196">Можно указать, что Runbook должен быть приостановлен при предупреждении или ошибке, задав [привилегированную переменную](#PreferenceVariables) в Runbook перед созданием сообщения.</span><span class="sxs-lookup"><span data-stu-id="15228-196">You can specify that the runbook should be suspended on a warning or error by setting a [preference variable](#PreferenceVariables) in the runbook before creating the message.</span></span> <span data-ttu-id="15228-197">Например, чтобы приостановить Runbook при ошибке, как при исключении, присвойте **$ErrorActionPreference** значение Stop.</span><span class="sxs-lookup"><span data-stu-id="15228-197">For example, to cause a runbook to suspend on an error as it would an exception, set **$ErrorActionPreference** to Stop.</span></span>

<span data-ttu-id="15228-198">Создайте предупреждение или сообщение об ошибке с помощью командлета [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) или [Write-Error](http://technet.microsoft.com/library/hh849962.aspx).</span><span class="sxs-lookup"><span data-stu-id="15228-198">Create a warning or error message using the [Write-Warning](https://technet.microsoft.com/library/hh849931.aspx) or [Write-Error](http://technet.microsoft.com/library/hh849962.aspx) cmdlet.</span></span> <span data-ttu-id="15228-199">Действия также могут записывать данные в эти потоки.</span><span class="sxs-lookup"><span data-stu-id="15228-199">Activities may also write to these streams.</span></span>

    #The following lines create a warning message and then an error message that will suspend the runbook.

    $ErrorActionPreference = "Stop"
    Write-Warning –Message "This is a warning message."
    Write-Error –Message "This is an error message that will stop the runbook because of the preference variable."

### <a name="verbose-stream"></a><span data-ttu-id="15228-200">Подробный поток</span><span class="sxs-lookup"><span data-stu-id="15228-200">Verbose stream</span></span>
<span data-ttu-id="15228-201">Поток подробных сообщений предназначен для общей информации о работе Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-201">The Verbose message stream is for general information about the runbook operation.</span></span> <span data-ttu-id="15228-202">Так как в Runbook недоступен [поток отладки](#Debug), подробные сообщения следует использовать для отладки.</span><span class="sxs-lookup"><span data-stu-id="15228-202">Since the [Debug Stream](#Debug) is not available in a runbook, verbose messages should be used for debug information.</span></span> <span data-ttu-id="15228-203">По умолчанию подробные сообщения из опубликованных Runbook не будут сохраняться в журнале заданий.</span><span class="sxs-lookup"><span data-stu-id="15228-203">By default, verbose messages from published runbooks will not be stored in the job history.</span></span> <span data-ttu-id="15228-204">Чтобы сохранять подробные сообщения, настройте для опубликованных Runbook добавление подробных записей в журнал на вкладке «Настройка» Runbook на портале управления Azure.</span><span class="sxs-lookup"><span data-stu-id="15228-204">To store verbose messages, configure published runbooks to Log Verbose Records on the Configure tab of the runbook in the Azure Management Portal.</span></span> <span data-ttu-id="15228-205">В большинстве случаев для Runbook следует оставить значение по умолчанию, при котором подробные записи не добавляются в журнал. Это обусловлено вопросами производительности.</span><span class="sxs-lookup"><span data-stu-id="15228-205">In most cases, you should keep the default setting of not logging verbose records for a runbook for performance reasons.</span></span> <span data-ttu-id="15228-206">Включайте этот параметр только для устранения неполадок и отладки Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-206">Turn on this option only to troubleshoot or debug a runbook.</span></span>

<span data-ttu-id="15228-207">При [тестировании Runbook](automation-testing-runbook.md)подробные сообщения не отображаются, даже если для Runbook настроено добавление подробных записей в журнал.</span><span class="sxs-lookup"><span data-stu-id="15228-207">When [testing a runbook](automation-testing-runbook.md), verbose messages are not displayed even if the runbook is configured to log verbose records.</span></span> <span data-ttu-id="15228-208">Для отображения подробных сообщений при [тестировании Runbook](automation-testing-runbook.md)необходимо переменной $VerbosePreference присвоить значение Continue.</span><span class="sxs-lookup"><span data-stu-id="15228-208">To display verbose messages while [testing a runbook](automation-testing-runbook.md), you must set the $VerbosePreference variable to Continue.</span></span> <span data-ttu-id="15228-209">После этого подробные сообщения будут показаны в области вывода теста на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="15228-209">With that variable set, verbose messages will be displayed in the Test Output Pane of the Azure portal.</span></span>

<span data-ttu-id="15228-210">Для создания подробного сообщения используется командлет [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) .</span><span class="sxs-lookup"><span data-stu-id="15228-210">Create a verbose message using the [Write-Verbose](http://technet.microsoft.com/library/hh849951.aspx) cmdlet.</span></span>

    #The following line creates a verbose message.

    Write-Verbose –Message "This is a verbose message."

### <a name="debug-stream"></a><span data-ttu-id="15228-211">Поток отладки</span><span class="sxs-lookup"><span data-stu-id="15228-211">Debug stream</span></span>
<span data-ttu-id="15228-212">Поток отладки предназначен для использования интерактивным пользователем и не должен использоваться в модулях Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-212">The Debug stream is intended for use with an interactive user and should not be used in runbooks.</span></span>

## <a name="progress-records"></a><span data-ttu-id="15228-213">Записи о ходе выполнения</span><span class="sxs-lookup"><span data-stu-id="15228-213">Progress records</span></span>
<span data-ttu-id="15228-214">Если настроить Runbook для ведения журнала хода выполнения (на вкладке "Настройка" Runbook на портале Azure), то до и после выполнения каждого действия в журнал заданий будет добавляться соответствующая запись.</span><span class="sxs-lookup"><span data-stu-id="15228-214">If you configure a runbook to log progress records (on the Configure tab of the runbook in the Azure portal), then a record will be written to the job history before and after each activity is run.</span></span> <span data-ttu-id="15228-215">В большинстве случаев для Runbook следует оставить значение по умолчанию, при котором записи о ходе выполнения не добавляются в журнал. Это позволит получить максимальную производительность.</span><span class="sxs-lookup"><span data-stu-id="15228-215">In most cases, you should keep the default setting of not logging progress records for a runbook in order to maximize performance.</span></span> <span data-ttu-id="15228-216">Включайте этот параметр только для устранения неполадок и отладки Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-216">Turn on this option only to troubleshoot or debug a runbook.</span></span> <span data-ttu-id="15228-217">При тестировании Runbook сообщения о ходе выполнения не отображаются, даже если для него настроено добавление записей о ходе выполнения в журнал.</span><span class="sxs-lookup"><span data-stu-id="15228-217">When testing a runbook, progress messages are not displayed even if the runbook is configured to log progress records.</span></span>

<span data-ttu-id="15228-218">Командлет [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) недействителен в Runbook, так как предназначен для использования интерактивным пользователем.</span><span class="sxs-lookup"><span data-stu-id="15228-218">The [Write-Progress](http://technet.microsoft.com/library/hh849902.aspx) cmdlet is not valid in a runbook, since this is intended for use with an interactive user.</span></span>

## <a name="preference-variables"></a><span data-ttu-id="15228-219">Привилегированные переменные</span><span class="sxs-lookup"><span data-stu-id="15228-219">Preference variables</span></span>
<span data-ttu-id="15228-220">Windows PowerShell использует [привилегированные переменные](http://technet.microsoft.com/library/hh847796.aspx) , чтобы определить, как реагировать на данные, отправляемые в различные потоки вывода.</span><span class="sxs-lookup"><span data-stu-id="15228-220">Windows PowerShell uses [preference variables](http://technet.microsoft.com/library/hh847796.aspx) to determine how to respond to data sent to different output streams.</span></span> <span data-ttu-id="15228-221">Вы можете задать эти переменные в Runbook, чтобы управлять его реакцией на данные, отправляемые в разные потоки.</span><span class="sxs-lookup"><span data-stu-id="15228-221">You can set these variables in a runbook to control how it will respond to data sent into different streams.</span></span>

<span data-ttu-id="15228-222">В следующей таблице перечислены привилегированные переменные, которые могут использоваться в модулях Runbook, а также их допустимые значения и значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="15228-222">The following table lists the preference variables that can be used in runbooks with their valid and default values.</span></span> <span data-ttu-id="15228-223">Обратите внимание, что эта таблица содержит только значения, которые являются допустимыми в Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-223">Note that this table only includes the values that are valid in a runbook.</span></span> <span data-ttu-id="15228-224">Дополнительные значения привилегированных переменных допускаются при использовании в Windows PowerShell за пределами службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="15228-224">Additional values are valid for the preference variables when used in Windows PowerShell outside of Azure Automation.</span></span>

| <span data-ttu-id="15228-225">Переменная</span><span class="sxs-lookup"><span data-stu-id="15228-225">Variable</span></span> | <span data-ttu-id="15228-226">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="15228-226">Default Value</span></span> | <span data-ttu-id="15228-227">Допустимые значения</span><span class="sxs-lookup"><span data-stu-id="15228-227">Valid Values</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="15228-228">WarningPreference</span><span class="sxs-lookup"><span data-stu-id="15228-228">WarningPreference</span></span> |<span data-ttu-id="15228-229">Continue</span><span class="sxs-lookup"><span data-stu-id="15228-229">Continue</span></span> |<span data-ttu-id="15228-230">Stop</span><span class="sxs-lookup"><span data-stu-id="15228-230">Stop</span></span><br><span data-ttu-id="15228-231">Continue</span><span class="sxs-lookup"><span data-stu-id="15228-231">Continue</span></span><br><span data-ttu-id="15228-232">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="15228-232">SilentlyContinue</span></span> |
| <span data-ttu-id="15228-233">ErrorActionPreference</span><span class="sxs-lookup"><span data-stu-id="15228-233">ErrorActionPreference</span></span> |<span data-ttu-id="15228-234">Continue</span><span class="sxs-lookup"><span data-stu-id="15228-234">Continue</span></span> |<span data-ttu-id="15228-235">Stop</span><span class="sxs-lookup"><span data-stu-id="15228-235">Stop</span></span><br><span data-ttu-id="15228-236">Continue</span><span class="sxs-lookup"><span data-stu-id="15228-236">Continue</span></span><br><span data-ttu-id="15228-237">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="15228-237">SilentlyContinue</span></span> |
| <span data-ttu-id="15228-238">VerbosePreference</span><span class="sxs-lookup"><span data-stu-id="15228-238">VerbosePreference</span></span> |<span data-ttu-id="15228-239">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="15228-239">SilentlyContinue</span></span> |<span data-ttu-id="15228-240">Stop</span><span class="sxs-lookup"><span data-stu-id="15228-240">Stop</span></span><br><span data-ttu-id="15228-241">Continue</span><span class="sxs-lookup"><span data-stu-id="15228-241">Continue</span></span><br><span data-ttu-id="15228-242">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="15228-242">SilentlyContinue</span></span> |

<span data-ttu-id="15228-243">В следующей таблице представлено поведение для соответствующих значений привилегированных переменных, допустимых в Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-243">The following table lists the behavior for the preference variable values that are valid in runbooks.</span></span>

| <span data-ttu-id="15228-244">Значение</span><span class="sxs-lookup"><span data-stu-id="15228-244">Value</span></span> | <span data-ttu-id="15228-245">Поведение</span><span class="sxs-lookup"><span data-stu-id="15228-245">Behavior</span></span> |
|:--- |:--- |
| <span data-ttu-id="15228-246">Continue</span><span class="sxs-lookup"><span data-stu-id="15228-246">Continue</span></span> |<span data-ttu-id="15228-247">Записывает сообщение в журнал и продолжает выполнение Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-247">Logs the message and continues executing the runbook.</span></span> |
| <span data-ttu-id="15228-248">SilentlyContinue</span><span class="sxs-lookup"><span data-stu-id="15228-248">SilentlyContinue</span></span> |<span data-ttu-id="15228-249">Продолжает выполнение Runbook без добавления сообщения в журнал.</span><span class="sxs-lookup"><span data-stu-id="15228-249">Continues executing the runbook without logging the message.</span></span> <span data-ttu-id="15228-250">То есть сообщение игнорируется.</span><span class="sxs-lookup"><span data-stu-id="15228-250">This has the effect of ignoring the message.</span></span> |
| <span data-ttu-id="15228-251">Stop</span><span class="sxs-lookup"><span data-stu-id="15228-251">Stop</span></span> |<span data-ttu-id="15228-252">Записывает сообщение в журнал и приостанавливает выполнение Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-252">Logs the message and suspends the runbook.</span></span> |

## <a name="retrieving-runbook-output-and-messages"></a><span data-ttu-id="15228-253">Извлечение выходных данных и сообщений Runbook</span><span class="sxs-lookup"><span data-stu-id="15228-253">Retrieving runbook output and messages</span></span>
### <a name="azure-portal"></a><span data-ttu-id="15228-254">Портал Azure</span><span class="sxs-lookup"><span data-stu-id="15228-254">Azure portal</span></span>
<span data-ttu-id="15228-255">На портале Azure на вкладке "Задания" Runbook можно просмотреть подробную информацию о задании Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-255">You can view the details of a runbook job in the Azure portal from the Jobs tab of a runbook.</span></span> <span data-ttu-id="15228-256">Помимо общей информации о задании, сводка задания будет содержать входные параметры и [поток вывода](#Output) , а также все возникшие исключения.</span><span class="sxs-lookup"><span data-stu-id="15228-256">The Summary of the job will display the input parameters and the [Output Stream](#Output) in addition to general information about the job and any exceptions if they occurred.</span></span> <span data-ttu-id="15228-257">Кроме [подробного потока](#Verbose) и [записей о ходе выполнения](#Progress) журнал будет содержать сообщения из [потока вывода](#Output) и [потоков предупреждений и ошибок](#WarningError), если для Runbook настроено добавление в журнал подробных сообщений и записей о ходе выполнения.</span><span class="sxs-lookup"><span data-stu-id="15228-257">The History will include messages from the [Output Stream](#Output) and [Warning and Error Streams](#WarningError) in addition to the [Verbose Stream](#Verbose) and [Progress Records](#Progress) if the runbook is configured to log verbose and progress records.</span></span>

### <a name="windows-powershell"></a><span data-ttu-id="15228-258">Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="15228-258">Windows PowerShell</span></span>
<span data-ttu-id="15228-259">В Windows PowerShell выходные данные и сообщения из Runbook можно извлечь с помощью командлета [Get AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) .</span><span class="sxs-lookup"><span data-stu-id="15228-259">In Windows PowerShell, you can retrieve output and messages from a runbook using the [Get-AzureAutomationJobOutput](https://msdn.microsoft.com/library/mt603476.aspx) cmdlet.</span></span> <span data-ttu-id="15228-260">Для этого командлета требуется идентификатор задания, также у него есть параметр Stream, в котором указывается возвращаемый поток.</span><span class="sxs-lookup"><span data-stu-id="15228-260">This cmdlet requires the ID of the job and has a parameter called Stream where you specify which stream to return.</span></span> <span data-ttu-id="15228-261">Можно указать значение Any для возврата всех потоков для задания.</span><span class="sxs-lookup"><span data-stu-id="15228-261">You can specify Any to return all streams for the job.</span></span>

<span data-ttu-id="15228-262">В следующем примере запускается пример Runbook и ожидается его завершение.</span><span class="sxs-lookup"><span data-stu-id="15228-262">The following example starts a sample runbook and then waits for it to complete.</span></span> <span data-ttu-id="15228-263">После завершения его поток вывода собирается из задания.</span><span class="sxs-lookup"><span data-stu-id="15228-263">Once completed, its output stream is collected from the job.</span></span>

    $job = Start-AzureRmAutomationRunbook -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" –Name "Test-Runbook"

    $doLoop = $true
    While ($doLoop) {
       $job = Get-AzureRmAutomationJob -ResourceGroupName "ResourceGroup01" `
       –AutomationAccountName "MyAutomationAccount" -Id $job.JobId
       $status = $job.Status
       $doLoop = (($status -ne "Completed") -and ($status -ne "Failed") -and ($status -ne "Suspended") -and ($status -ne "Stopped")
    }

    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAccount" -Id $job.JobId –Stream Output

### <a name="graphical-authoring"></a><span data-ttu-id="15228-264">Графическая разработка</span><span class="sxs-lookup"><span data-stu-id="15228-264">Graphical Authoring</span></span>
<span data-ttu-id="15228-265">Для графических модулей Runbook дополнительное ведение журнала доступно в виде трассировки на уровне действий.</span><span class="sxs-lookup"><span data-stu-id="15228-265">For graphical runbooks, extra logging is available in the form of activity-level tracing.</span></span>  <span data-ttu-id="15228-266">Существует два уровня трассировки: базовая и подробная.</span><span class="sxs-lookup"><span data-stu-id="15228-266">There are two levels of tracing: Basic and Detailed.</span></span>  <span data-ttu-id="15228-267">Базовая трассировка включает время начала и окончания каждого действия в модуле Runbook, а также сведения обо всех повторных действиях, включая число попыток и время начала.</span><span class="sxs-lookup"><span data-stu-id="15228-267">In Basic tracing, you can see the start and end time of each activity in the runbook plus information related to any activity retries, such as number of attempts and start time of the activity.</span></span>  <span data-ttu-id="15228-268">Подробная трассировка включает те же данные, что и базовая, плюс входные и выходные данные каждого действия.</span><span class="sxs-lookup"><span data-stu-id="15228-268">In Detailed tracing, you get Basic tracing plus input and output data for each activity.</span></span>  <span data-ttu-id="15228-269">В настоящее время записи трассировки ведутся с использованием подробного потока, поэтому при включении трассировки необходимо также включать подробное ведение журнала.</span><span class="sxs-lookup"><span data-stu-id="15228-269">Note that currently the trace records are written using the verbose stream, so you must enable Verbose logging when you enable tracing.</span></span>  <span data-ttu-id="15228-270">Для графических модулей Runbook с включенной трассировкой ведение записей о ходе выполнения не требуется, поскольку базовая трассировка не только решает эту задачу, но и является более информативной.</span><span class="sxs-lookup"><span data-stu-id="15228-270">For graphical runbooks with tracing enabled there is no need to log progress records, because the Basic tracing serves the same purpose and is more informative.</span></span>

![Представление потоков заданий графической разработки](media/automation-runbook-output-and-messages/job-streams-view-blade.png)

<span data-ttu-id="15228-272">На приведенном выше снимке экрана видно, что при включении подробного журнала и трассировки для графических модулей Runbook представление потоков заданий в рабочей среде содержит гораздо больше данных.</span><span class="sxs-lookup"><span data-stu-id="15228-272">You can see from the above screenshot that when you enable Verbose logging and tracing for Graphical runbooks, much more information is available in the production Job Streams view.</span></span>  <span data-ttu-id="15228-273">Эти дополнительные сведения могут пригодиться во время поиска и устранения неисправностей, связанных с модулем Runbook. Включайте их только для этой цели, в обычном режиме подобная детализация не требуется.</span><span class="sxs-lookup"><span data-stu-id="15228-273">This extra information can be essential for troubleshooting production problems with a runbook, and therefore you should only enable it for that purpose and not as a general practice.</span></span>    
<span data-ttu-id="15228-274">Записи трассировки могут быть очень многочисленными.</span><span class="sxs-lookup"><span data-stu-id="15228-274">The Trace records can be especially numerous.</span></span>  <span data-ttu-id="15228-275">При трассировке графических модулей Runbook создается от двух до четырех записей на каждое действие в зависимости от того, какая выбрана трассировка — базовая или подробная.</span><span class="sxs-lookup"><span data-stu-id="15228-275">With Graphical runbook tracing you can get two to four records per activity depending on whether you have configured Basic or Detailed tracing.</span></span>  <span data-ttu-id="15228-276">Если эти данные не требуются для контроля за выполнением модуля Runbook в целях устранения неисправностей, трассировку можно отключить.</span><span class="sxs-lookup"><span data-stu-id="15228-276">Unless you need this information to track the progress of a runbook for troubleshooting, you might want to keep Tracing turned off.</span></span>

<span data-ttu-id="15228-277">**Чтобы включить трассировку на уровне действий, выполните указанные ниже действия.**</span><span class="sxs-lookup"><span data-stu-id="15228-277">**To enable activity-level tracing, perform the following steps.**</span></span>

1. <span data-ttu-id="15228-278">На портале Azure выберите свою учетную запись в службе автоматизации.</span><span class="sxs-lookup"><span data-stu-id="15228-278">In the Azure Portal, open your Automation account.</span></span>
2. <span data-ttu-id="15228-279">Щелкните плитку **Модули Runbook** , чтобы открыть список модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-279">Click on the **Runbooks** tile to open the list of runbooks.</span></span>
3. <span data-ttu-id="15228-280">В колонке "Модули Runbook" выберите графический модуль Runbook.</span><span class="sxs-lookup"><span data-stu-id="15228-280">On the Runbooks blade, click to select a graphical runbook from your list of runbooks.</span></span>
4. <span data-ttu-id="15228-281">В колонке "Параметры" для выбранного модуля Runbook щелкните **Ведение журнала и трассировка**.</span><span class="sxs-lookup"><span data-stu-id="15228-281">On the Settings blade for the selected runbook, click **Logging and Tracing**.</span></span>
5. <span data-ttu-id="15228-282">В разделе "Подробные записи в журнале" колонки "Ведение журналов и трассировка" щелкните **Включить**, чтобы включить подробное ведение журналов. Затем в колонке "Трассировка уровня действия" измените уровень трассировки с **базовой** на **подробную**, так как вам требуется именно такая трассировка.</span><span class="sxs-lookup"><span data-stu-id="15228-282">On the Logging and Tracing blade, under Log verbose records, click **On** to enable verbose logging and udner Activity-level tracing, change the trace level to **Basic** or **Detailed** based on the level of tracing you require.</span></span><br>
   
   ![Колонка ведения журналов и трассировки графической разработки](media/automation-runbook-output-and-messages/logging-and-tracing-settings-blade.png)

### <a name="microsoft-operations-management-suite-oms-log-analytics"></a><span data-ttu-id="15228-284">Log Analytics в Microsoft Operations Management Suite (OMS)</span><span class="sxs-lookup"><span data-stu-id="15228-284">Microsoft Operations Management Suite (OMS) Log Analytics</span></span>
<span data-ttu-id="15228-285">Служба автоматизации может отправлять состояние задания Runbook и потоки заданий в рабочую область Log Analytics в Microsoft Operations Management Suite (OMS).</span><span class="sxs-lookup"><span data-stu-id="15228-285">Automation can send runbook job status and job streams to your Microsoft Operations Management Suite (OMS) Log Analytics workspace.</span></span>  <span data-ttu-id="15228-286">С помощью Log Analytics можно:</span><span class="sxs-lookup"><span data-stu-id="15228-286">With Log Analytics you can,</span></span>

* <span data-ttu-id="15228-287">получить информацию о заданиях службы автоматизации;</span><span class="sxs-lookup"><span data-stu-id="15228-287">Get insight on your Automation jobs</span></span> 
* <span data-ttu-id="15228-288">активировать отправку электронного сообщения или оповещения в соответствии с состоянием задания Runbook (например, сбой или приостановка);</span><span class="sxs-lookup"><span data-stu-id="15228-288">Trigger an email or alert based on your runbook job status (e.g. failed or suspended)</span></span> 
* <span data-ttu-id="15228-289">создавать сложные запросы для потоков заданий;</span><span class="sxs-lookup"><span data-stu-id="15228-289">Write advanced queries across your job streams</span></span> 
* <span data-ttu-id="15228-290">коррелировать задания и учетные записи службы автоматизации;</span><span class="sxs-lookup"><span data-stu-id="15228-290">Correlate jobs across Automation accounts</span></span> 
* <span data-ttu-id="15228-291">визуализировать журнал задания по прошествии времени.</span><span class="sxs-lookup"><span data-stu-id="15228-291">Visualize your job history over time</span></span>    

<span data-ttu-id="15228-292">Дополнительные сведения о настройке интеграции с Log Analytics для сбора, сопоставления и действия по данным заданий см. в статье [Пересылка состояния задания и потоков заданий из службы автоматизации в Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="15228-292">For more information on how to configure integration with Log Analytics to collect, correlate and act on job data, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="15228-293">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="15228-293">Next steps</span></span>
* <span data-ttu-id="15228-294">Чтобы узнать больше о выполнении модулей Runbook, отслеживании заданий Runbook и других технических деталях, ознакомьтесь с [отслеживанием задания Runbook](automation-runbook-execution.md)</span><span class="sxs-lookup"><span data-stu-id="15228-294">To learn more about runbook execution, how to monitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md)</span></span>
* <span data-ttu-id="15228-295">Дополнительные сведения о создании и использовании дочерних модулей Runbook см. в статье [Дочерние модули Runbook в службе автоматизации Azure](automation-child-runbooks.md).</span><span class="sxs-lookup"><span data-stu-id="15228-295">To understand how to design and use child runbooks, see [Child runbooks in Azure Automation](automation-child-runbooks.md)</span></span>

