---
title: "Управление данными службы автоматизации Azure | Документация Майкрософт"
description: "Эта статья содержит несколько разделов об управлении средой службы автоматизации Azure.  Сейчас включает в себя хранение данных и резервное копирование для аварийного восстановления службы автоматизации Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: stevenka
editor: tysonn
ms.assetid: 2896f129-82e3-43ce-b9ee-a3860be0423a
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/02/201
ms.author: magoedte;bwren;sngun
ms.openlocfilehash: 92893edc4e02de148f6585e83c6861fd751401bb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="managing-azure-automation-data"></a><span data-ttu-id="6dc5d-104">Управление данными службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="6dc5d-104">Managing Azure Automation data</span></span>
<span data-ttu-id="6dc5d-105">Эта статья содержит несколько разделов об управлении средой службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-105">This article contains multiple topics for managing an Azure Automation environment.</span></span>

## <a name="data-retention"></a><span data-ttu-id="6dc5d-106">Хранение данных</span><span class="sxs-lookup"><span data-stu-id="6dc5d-106">Data retention</span></span>
<span data-ttu-id="6dc5d-107">При удалении ресурса в службе автоматизации Azure он сохраняется еще 90 дней в целях аудита, прежде чем будет окончательно удален.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-107">When you delete a resource in Azure Automation, it is retained for 90 days for auditing purposes before being removed permanently.</span></span>  <span data-ttu-id="6dc5d-108">В течение этого времени его нельзя увидеть или использовать.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-108">You can’t see or use the resource during this time.</span></span>  <span data-ttu-id="6dc5d-109">Эта политика применяется также к ресурсам, принадлежащим удаляемой учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-109">This policy also applies to resources that belong to an automation account that is deleted.</span></span>

<span data-ttu-id="6dc5d-110">Служба автоматизации Azure автоматически и окончательно удаляет задания старше 90 дней.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-110">Azure Automation automatically deletes and permanently removes jobs older than 90 days.</span></span>

<span data-ttu-id="6dc5d-111">В следующей таблице кратко описана политика хранения для различных ресурсов.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-111">The following table summarizes the retention policy for different resources.</span></span>

| <span data-ttu-id="6dc5d-112">Данные</span><span class="sxs-lookup"><span data-stu-id="6dc5d-112">Data</span></span> | <span data-ttu-id="6dc5d-113">Политика</span><span class="sxs-lookup"><span data-stu-id="6dc5d-113">Policy</span></span> |
|:--- |:--- |
| <span data-ttu-id="6dc5d-114">учетные записи;</span><span class="sxs-lookup"><span data-stu-id="6dc5d-114">Accounts</span></span> |<span data-ttu-id="6dc5d-115">Окончательно удаляются через 90 дней после удаления учетной записи пользователем.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-115">Permanently removed 90 days after the account is deleted by a user.</span></span> |
| <span data-ttu-id="6dc5d-116">Активы</span><span class="sxs-lookup"><span data-stu-id="6dc5d-116">Assets</span></span> |<span data-ttu-id="6dc5d-117">Окончательно удаляются через 90 дней после удаления актива пользователем или через 90 дней после удаления пользователем учетной записи, содержащей актив.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-117">Permanently removed 90 days after the asset is deleted by a user, or 90 days after the account that holds the asset is deleted by a user.</span></span> |
| <span data-ttu-id="6dc5d-118">модули</span><span class="sxs-lookup"><span data-stu-id="6dc5d-118">Modules</span></span> |<span data-ttu-id="6dc5d-119">Окончательно удаляются через 90 дней после удаления модуля пользователем или через 90 дней после удаления пользователем учетной записи, содержащей модуль.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-119">Permanently removed 90 days after the module is deleted by a user, or 90 days after the account that holds the module is deleted by a user.</span></span> |
| <span data-ttu-id="6dc5d-120">Модули Runbook</span><span class="sxs-lookup"><span data-stu-id="6dc5d-120">Runbooks</span></span> |<span data-ttu-id="6dc5d-121">Окончательно удаляются через 90 дней после удаления ресурса пользователем или через 90 дней после удаления пользователем учетной записи, содержащей ресурс.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-121">Permanently removed 90 days after the resource is deleted by a user, or 90 days after the account that holds the resource is deleted by a user.</span></span> |
| <span data-ttu-id="6dc5d-122">Задания</span><span class="sxs-lookup"><span data-stu-id="6dc5d-122">Jobs</span></span> |<span data-ttu-id="6dc5d-123">Окончательно удаляются через 90 дней после последнего изменения.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-123">Deleted and permanently removed 90 days after last being modified.</span></span> <span data-ttu-id="6dc5d-124">Это может быть после завершения, остановки или приостановки задания.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-124">This could be after the job completes, is stopped, or is suspended.</span></span> |
| <span data-ttu-id="6dc5d-125">Конфигурации узлов и MOF-файлы</span><span class="sxs-lookup"><span data-stu-id="6dc5d-125">Node Configurations/MOF Files</span></span> |<span data-ttu-id="6dc5d-126">Старая конфигурация узла окончательно удаляется через 90 дней после создания новой конфигурации узла.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-126">Old node configuration is permanently removed 90 days after a new node configuration is generated.</span></span> |
| <span data-ttu-id="6dc5d-127">Узлы DSC</span><span class="sxs-lookup"><span data-stu-id="6dc5d-127">DSC Nodes</span></span> |<span data-ttu-id="6dc5d-128">Окончательно удаляются через 90 дней после отмены регистрации узла в учетной записи автоматизации с помощью портала Azure или командлета [Unregister-AzureRMAutomationDscNode](https://msdn.microsoft.com/library/mt603500.aspx) в Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-128">Permanently removed 90 days after the node is unregistered from Automation Account using Azure portal or the [Unregister-AzureRMAutomationDscNode](https://msdn.microsoft.com/library/mt603500.aspx) cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="6dc5d-129">Узлы также окончательно удаляются через 90 дней после удаления содержащей узел учетной записи.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-129">Nodes are also permanently removed 90 days after the account that holds the node is deleted by a user.</span></span> |
| <span data-ttu-id="6dc5d-130">Отчеты узла</span><span class="sxs-lookup"><span data-stu-id="6dc5d-130">Node Reports</span></span> |<span data-ttu-id="6dc5d-131">Окончательно удаляются через 90 дней после создания нового отчета для этого узла.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-131">Permanently removed 90 days after a new report is generated for that node</span></span> |

<span data-ttu-id="6dc5d-132">Политика хранения применяется ко всем пользователям и в настоящее время не может быть изменена.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-132">The retention policy applies to all users and currently cannot be customized.</span></span>

<span data-ttu-id="6dc5d-133">Однако, если вам необходимо хранить данные в течение более длительного периода времени, вы можете перенаправить журналы заданий Runbook в Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-133">However, if you need to retain data for a longer period of time, you can forward runbook job logs to Log Analytics.</span></span>  <span data-ttu-id="6dc5d-134">Дополнительные сведения см. в статье [Пересылка данных задания службы автоматизации Azure в OMS Log Analytics](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="6dc5d-134">For further information, review [forward Azure Automation job data to OMS Log Analytics](automation-manage-send-joblogs-log-analytics.md).</span></span>   

## <a name="backing-up-azure-automation"></a><span data-ttu-id="6dc5d-135">Резервное копирование службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="6dc5d-135">Backing up Azure Automation</span></span>
<span data-ttu-id="6dc5d-136">При удалении учетной записи службы автоматизации в Microsoft Azure все объекты в ней удаляются, включая модули Runbook, модули, параметры, конфигурации, задания и ресурсы.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-136">When you delete an automation account in Microsoft Azure, all objects in the account are deleted including runbooks, modules, configurations, settings, jobs, and assets.</span></span> <span data-ttu-id="6dc5d-137">Объекты нельзя восстановить после удаления учетной записи.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-137">The objects cannot be recovered after the account is deleted.</span></span>  <span data-ttu-id="6dc5d-138">Можно использовать следующую информацию, чтобы создать резервную копию содержимого учетной записи службы автоматизации перед его удалением.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-138">You can use the following information to backup the contents of your automation account before deleting it.</span></span> 

### <a name="runbooks"></a><span data-ttu-id="6dc5d-139">Модули Runbook</span><span class="sxs-lookup"><span data-stu-id="6dc5d-139">Runbooks</span></span>
<span data-ttu-id="6dc5d-140">Модули Runbook можно экспортировать в файлы сценариев с помощью портала управления Azure или командлета [Get-AzureAutomationRunbookDefinition](https://msdn.microsoft.com/library/dn690269.aspx) в Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-140">You can export your runbooks to script files using either the Azure Management Portal or the [Get-AzureAutomationRunbookDefinition](https://msdn.microsoft.com/library/dn690269.aspx) cmdlet in Windows PowerShell.</span></span>  <span data-ttu-id="6dc5d-141">Эти файлы сценариев можно импортировать в другую учетную запись службы автоматизации, как описано в разделе [Создание или импорт модуля Runbook](https://msdn.microsoft.com/library/dn643637.aspx).</span><span class="sxs-lookup"><span data-stu-id="6dc5d-141">These script files can be imported into another automation account as discussed in [Creating or Importing a Runbook](https://msdn.microsoft.com/library/dn643637.aspx).</span></span>

### <a name="integration-modules"></a><span data-ttu-id="6dc5d-142">Модули интеграции</span><span class="sxs-lookup"><span data-stu-id="6dc5d-142">Integration modules</span></span>
<span data-ttu-id="6dc5d-143">Модули интеграции нельзя экспортировать из службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-143">You cannot export integration modules from Azure Automation.</span></span>  <span data-ttu-id="6dc5d-144">Необходимо обеспечить, чтобы они были доступны за пределами учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-144">You must ensure that they are available outside of the automation account.</span></span>

### <a name="assets"></a><span data-ttu-id="6dc5d-145">Активы</span><span class="sxs-lookup"><span data-stu-id="6dc5d-145">Assets</span></span>
<span data-ttu-id="6dc5d-146">Нельзя экспортировать [ресурсы](https://msdn.microsoft.com/library/dn939988.aspx) из службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-146">You cannot export [assets](https://msdn.microsoft.com/library/dn939988.aspx) from Azure Automation.</span></span>  <span data-ttu-id="6dc5d-147">Используя портал управления Azure, вам необходимо записать информацию о переменных, учетных данных, сертификатах, подключениях и расписаниях.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-147">Using the Azure Management Portal, you must note the details of variables, credentials, certificates, connections, and schedules.</span></span>  <span data-ttu-id="6dc5d-148">Затем необходимо вручную создать все ресурсы, используемые модулями Runbook, которые импортируются в другую службу автоматизации.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-148">You must then manually create any assets that are used by runbooks that you import into another automation.</span></span>

<span data-ttu-id="6dc5d-149">Вы можете использовать [командлеты Azure](https://msdn.microsoft.com/library/dn690262.aspx) , чтобы получить информацию о незашифрованных ресурсах и либо сохранить ее для дальнейшего использования, либо создать эквивалентные ресурсы в другой учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-149">You can use [Azure cmdlets](https://msdn.microsoft.com/library/dn690262.aspx) to retrieve details of unencrypted assets and either save them for future reference or create equivalent assets in another automation account.</span></span>

<span data-ttu-id="6dc5d-150">С помощью командлетов нельзя получить значение зашифрованных переменных или поле пароля учетных данных.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-150">You cannot retrieve the value for encrypted variables or the password field of credentials using cmdlets.</span></span>  <span data-ttu-id="6dc5d-151">Если вы не знаете этих значений, то их можно получить из модуля Runbook с помощью действий [Get-AutomationVariable](https://msdn.microsoft.com/library/dn940012.aspx) и [Get-AutomationPSCredential](https://msdn.microsoft.com/library/dn940015.aspx).</span><span class="sxs-lookup"><span data-stu-id="6dc5d-151">If you don't know these values, then you can retrieve them from a runbook using the [Get-AutomationVariable](https://msdn.microsoft.com/library/dn940012.aspx) and [Get-AutomationPSCredential](https://msdn.microsoft.com/library/dn940015.aspx) activities.</span></span>

<span data-ttu-id="6dc5d-152">Нельзя экспортировать сертификаты из службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-152">You cannot export certificates from Azure Automation.</span></span>  <span data-ttu-id="6dc5d-153">Необходимо обеспечить, чтобы все сертификаты были доступны за пределами Azure.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-153">You must ensure that any certificates are available outside of Azure.</span></span>

### <a name="dsc-configurations"></a><span data-ttu-id="6dc5d-154">Конфигурации DSC</span><span class="sxs-lookup"><span data-stu-id="6dc5d-154">DSC configurations</span></span>
<span data-ttu-id="6dc5d-155">Конфигурации можно экспортировать в файлы сценариев с помощью портала управления Azure или командлета [Export-AzureRmAutomationDscConfiguration](https://msdn.microsoft.com/library/mt603485.aspx) в Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-155">You can export your configurations to script files using either the Azure Management Portal or the [Export-AzureRmAutomationDscConfiguration](https://msdn.microsoft.com/library/mt603485.aspx) cmdlet in Windows PowerShell.</span></span> <span data-ttu-id="6dc5d-156">Эти конфигурации можно импортировать и использовать в другой учетной записи автоматизации.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-156">These configurations can be imported and used in another automation account.</span></span>

## <a name="geo-replication-in-azure-automation"></a><span data-ttu-id="6dc5d-157">Георепликация в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="6dc5d-157">Geo-replication in Azure Automation</span></span>
<span data-ttu-id="6dc5d-158">Георепликация, которая обычно применяется в учетных записях службы автоматизации Azure, осуществляет резервное копирование данных учетной записи в другой географический регион для обеспечения избыточности.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-158">Geo-replication, standard in Azure Automation accounts, backs up account data to a different geographical region for redundancy.</span></span> <span data-ttu-id="6dc5d-159">При настройке учетной записи можно выбрать основной регион, после чего дополнительный регион назначается автоматически.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-159">You can choose a primary region when setting up your account, and then a secondary region is assigned to it automatically.</span></span> <span data-ttu-id="6dc5d-160">Дополнительные данные, скопированные из основного региона, постоянно обновляются на случай потери данных.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-160">The secondary data, copied from the primary region, is continuously updated in case of data loss.</span></span>  

<span data-ttu-id="6dc5d-161">В таблице ниже показаны доступные пары основных и дополнительных регионов.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-161">The following table shows the available primary and secondary region pairings.</span></span>

| <span data-ttu-id="6dc5d-162">Главный</span><span class="sxs-lookup"><span data-stu-id="6dc5d-162">Primary</span></span> | <span data-ttu-id="6dc5d-163">Второстепенный</span><span class="sxs-lookup"><span data-stu-id="6dc5d-163">Secondary</span></span> |
| --- | --- |
| <span data-ttu-id="6dc5d-164">Южно-центральный регион США</span><span class="sxs-lookup"><span data-stu-id="6dc5d-164">South Central US</span></span> |<span data-ttu-id="6dc5d-165">Северо-центральный регион США</span><span class="sxs-lookup"><span data-stu-id="6dc5d-165">North Central US</span></span> |
| <span data-ttu-id="6dc5d-166">Восточная часть США 2</span><span class="sxs-lookup"><span data-stu-id="6dc5d-166">US East 2</span></span> |<span data-ttu-id="6dc5d-167">Центральный регион США</span><span class="sxs-lookup"><span data-stu-id="6dc5d-167">Central US</span></span> |
| <span data-ttu-id="6dc5d-168">Западная Европа</span><span class="sxs-lookup"><span data-stu-id="6dc5d-168">West Europe</span></span> |<span data-ttu-id="6dc5d-169">Северная Европа</span><span class="sxs-lookup"><span data-stu-id="6dc5d-169">North Europe</span></span> |
| <span data-ttu-id="6dc5d-170">Юго-Восточная Азия</span><span class="sxs-lookup"><span data-stu-id="6dc5d-170">South East Asia</span></span> |<span data-ttu-id="6dc5d-171">Восточная Азия</span><span class="sxs-lookup"><span data-stu-id="6dc5d-171">East Asia</span></span> |
| <span data-ttu-id="6dc5d-172">Восточная часть Японии</span><span class="sxs-lookup"><span data-stu-id="6dc5d-172">Japan East</span></span> |<span data-ttu-id="6dc5d-173">Западная часть Японии</span><span class="sxs-lookup"><span data-stu-id="6dc5d-173">Japan West</span></span> |

<span data-ttu-id="6dc5d-174">В маловероятном случае потери данных основного региона корпорация Майкрософт попытается восстановить их.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-174">In the unlikely event that a primary region data is lost, Microsoft attempts to recover it.</span></span> <span data-ttu-id="6dc5d-175">Если восстановить основные данные невозможно, выполняется географическая отработка отказа и затронутые клиенты получают уведомления об этом через свои подписки.</span><span class="sxs-lookup"><span data-stu-id="6dc5d-175">If the primary data cannot be recovered, then geo-failover is performed and the affected customers will be notified about this through their subscription.</span></span>

