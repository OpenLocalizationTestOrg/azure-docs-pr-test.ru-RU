---
title: "Графическая разработка в службе автоматизации Azure | Документация Майкрософт"
description: "Графическая разработка позволяет создавать модули Runbook для службы автоматизации Azure без работы с кодом. Эта статья содержит вводные сведения о графическом создании и всю информацию, необходимую, чтобы приступить к созданию графического Runbook."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 4b6f840c-e941-4293-a728-b33407317943
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 417fceb0961165d96ece000f95c8a3f973f4f75b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="graphical-authoring-in-azure-automation"></a><span data-ttu-id="ddd36-104">Графическая разработка в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="ddd36-104">Graphical authoring in Azure Automation</span></span>
## <a name="introduction"></a><span data-ttu-id="ddd36-105">Введение</span><span class="sxs-lookup"><span data-stu-id="ddd36-105">Introduction</span></span>
<span data-ttu-id="ddd36-106">Графическая разработка позволяет создавать модули Runbook для службы автоматизации Azure без необходимости написания кода в рамках рабочего процесса PowerShell или использования Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddd36-106">Graphical Authoring allows you to create runbooks for Azure Automation without the complexities of the underlying Windows PowerShell or PowerShell Workflow code.</span></span> <span data-ttu-id="ddd36-107">Вы просто добавляете на холст действия из библиотеки командлетов и других действий, а затем связываете и настраиваете их, создавая рабочий процесс.</span><span class="sxs-lookup"><span data-stu-id="ddd36-107">You add activities to the canvas from a library of cmdlets and runbooks, link them together and configure to form a workflow.</span></span>  <span data-ttu-id="ddd36-108">Если вам приходилось работать с System Center Orchestrator или Service Management Automation (SMA), эти действия будут для вас знакомыми.</span><span class="sxs-lookup"><span data-stu-id="ddd36-108">If you have ever worked with System Center Orchestrator or Service Management Automation (SMA), then this should look familiar to you.</span></span>   

<span data-ttu-id="ddd36-109">Эта статья содержит вводные сведения о графическом создании и основные понятия, необходимые, чтобы приступить к созданию графического Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-109">This article provides an introduction to graphical authoring and the concepts you need to get started in creating a graphical runbook.</span></span>

## <a name="graphical-runbooks"></a><span data-ttu-id="ddd36-110">Графические модули Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-110">Graphical runbooks</span></span>
<span data-ttu-id="ddd36-111">Все модули Runbook в службе автоматизации Azure представляют собой рабочие процессы Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddd36-111">All runbooks in Azure Automation are Windows PowerShell Workflows.</span></span>  <span data-ttu-id="ddd36-112">Графические модули Runbook и модули Runbook графического рабочего процесса PowerShell создают код PowerShell, который запускается рабочими ролями службы автоматизации. Вы не можете непосредственно просмотреть или изменить этот код.</span><span class="sxs-lookup"><span data-stu-id="ddd36-112">Graphical and Graphical PowerShell Workflow runbooks generate PowerShell code that is run by the Automation workers, but you are not able to view it or directly modify it.</span></span>  <span data-ttu-id="ddd36-113">Графический модуль Runbook можно преобразовать в графический модуль Runbook рабочего процесса PowerShell и наоборот. Эти компоненты нельзя преобразовать в текстовый модуль Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-113">A Graphical runbook can be converted to a Graphical PowerShell Workflow runbook and vice-versa, but they cannot be converted to a textual runbook.</span></span> <span data-ttu-id="ddd36-114">Существующий текстовый модуль Runbook нельзя импортировать в графический редактор.</span><span class="sxs-lookup"><span data-stu-id="ddd36-114">An existing textual runbook cannot be imported into the graphical editor.</span></span>  

## <a name="overview-of-graphical-editor"></a><span data-ttu-id="ddd36-115">Обзор графического редактора</span><span class="sxs-lookup"><span data-stu-id="ddd36-115">Overview of graphical editor</span></span>
<span data-ttu-id="ddd36-116">Графический редактор можно открыть на портале Azure, создав или открыв для редактирования графический Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-116">You can open the graphical editor in the Azure portal by creating or editing a graphical runbook.</span></span>

![Графическая рабочая область](media/automation-graphical-authoring-intro/runbook-graphical-editor.png)

<span data-ttu-id="ddd36-118">В следующих разделах описываются элементы управления в графическом редакторе.</span><span class="sxs-lookup"><span data-stu-id="ddd36-118">The following sections describe the controls in the graphical editor.</span></span>

### <a name="canvas"></a><span data-ttu-id="ddd36-119">Холст</span><span class="sxs-lookup"><span data-stu-id="ddd36-119">Canvas</span></span>
<span data-ttu-id="ddd36-120">Холст — это место, где формируется Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-120">The Canvas is where you design your runbook.</span></span>  <span data-ttu-id="ddd36-121">Вы добавляете в Runbook действия из узлов в элементе управления "Библиотека" и соединяете их с помощью связей, чтобы определить логику Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-121">You add activities from the nodes in the Library control to the runbook and connect them with links to define the logic of the runbook.</span></span>

<span data-ttu-id="ddd36-122">Для увеличения и уменьшения масштаба можно использовать элементы управления в нижней части холста.</span><span class="sxs-lookup"><span data-stu-id="ddd36-122">You can use the controls at the bottom of the canvas to zoom in and out.</span></span>

![Графическая рабочая область](media/automation-graphical-authoring-intro/runbook-canvas-controls.png)

### <a name="library-control"></a><span data-ttu-id="ddd36-124">Элемент управления "Библиотека"</span><span class="sxs-lookup"><span data-stu-id="ddd36-124">Library control</span></span>
<span data-ttu-id="ddd36-125">В элементе управления "Библиотека" можно выбрать [действия](#activities) для добавления в Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-125">The Library control is where you select [activities](#activities) to add to your runbook.</span></span>  <span data-ttu-id="ddd36-126">Вы добавляете их на холст, где соединяете с другими действиями.</span><span class="sxs-lookup"><span data-stu-id="ddd36-126">You add them to the canvas where you connect them to other activities.</span></span>  <span data-ttu-id="ddd36-127">Он содержит четыре раздела, описанные в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="ddd36-127">It includes four sections described in the following table.</span></span>

| <span data-ttu-id="ddd36-128">Раздел</span><span class="sxs-lookup"><span data-stu-id="ddd36-128">Section</span></span> | <span data-ttu-id="ddd36-129">Описание</span><span class="sxs-lookup"><span data-stu-id="ddd36-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ddd36-130">Командлеты</span><span class="sxs-lookup"><span data-stu-id="ddd36-130">Cmdlets</span></span> |<span data-ttu-id="ddd36-131">Включает в себя все командлеты, которые могут использоваться в модуле Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-131">Includes all the cmdlets that can be used in your runbook.</span></span>  <span data-ttu-id="ddd36-132">Командлеты группируются по модулям.</span><span class="sxs-lookup"><span data-stu-id="ddd36-132">Cmdlets are organized by module.</span></span>  <span data-ttu-id="ddd36-133">Будут доступны все модули, которые установлены в вашей учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="ddd36-133">All of the modules that you have installed in your automation account will be available.</span></span> |
| <span data-ttu-id="ddd36-134">Модули Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-134">Runbooks</span></span> |<span data-ttu-id="ddd36-135">Содержит модули Runbook в учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="ddd36-135">Includes the runbooks in your automation account.</span></span> <span data-ttu-id="ddd36-136">Эти модули Runbook можно добавлять на холст, чтобы использовать их как дочерние модули.</span><span class="sxs-lookup"><span data-stu-id="ddd36-136">These runbooks can be added to the canvas to be used as child runbooks.</span></span> <span data-ttu-id="ddd36-137">Отображаются только однотипные изменяемые модули Runbook: только модули Runbook на основе PowerShell для графических модулей и только модули Runbook на основе рабочего процесса PowerShell для графических модулей рабочего процесса PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddd36-137">Only runbooks of the same core type as the runbook being edited are shown; for Graphical runbooks only PowerShell-based runbooks are shown, while for Graphical PowerShell Workflow runbooks only PowerShell-Workflow-based runbooks are shown.</span></span> |
| <span data-ttu-id="ddd36-138">Активы</span><span class="sxs-lookup"><span data-stu-id="ddd36-138">Assets</span></span> |<span data-ttu-id="ddd36-139">Содержит [ресурсы службы автоматизации](http://msdn.microsoft.com/library/dn939988.aspx) в вашей учетной записи службы автоматизации, которые можно использовать в модуле Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-139">Includes the [automation assets](http://msdn.microsoft.com/library/dn939988.aspx) in your automation account that can be used in your runbook.</span></span>  <span data-ttu-id="ddd36-140">При добавлении ресурса в Runbook добавляется действие рабочего процесса, которое получает выбранный ресурс.</span><span class="sxs-lookup"><span data-stu-id="ddd36-140">When you add an asset to a runbook, it will add a workflow activity that gets the selected asset.</span></span>  <span data-ttu-id="ddd36-141">В случае ресурсов переменных можно либо добавить действие для получения переменной, либо задать переменную.</span><span class="sxs-lookup"><span data-stu-id="ddd36-141">In the case of variable assets, you can select whether to add an activity to get the variable or set the variable.</span></span> |
| <span data-ttu-id="ddd36-142">Элемент управления "Runbook"</span><span class="sxs-lookup"><span data-stu-id="ddd36-142">Runbook Control</span></span> |<span data-ttu-id="ddd36-143">Содержит действия элемента управления "Runbook", которые могут использоваться в текущем модуле Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-143">Includes runbook control activities that can be used in your current runbook.</span></span> <span data-ttu-id="ddd36-144">*Соединение* принимает несколько наборов входных данных и ожидает завершения их обработки, прежде чем продолжать рабочий процесс.</span><span class="sxs-lookup"><span data-stu-id="ddd36-144">A *Junction* takes multiple inputs and waits until all have completed before continuing the workflow.</span></span> <span data-ttu-id="ddd36-145">Действие *Код* выполняет одну или несколько строк кода PowerShell или рабочего процесса PowerShell в зависимости от типа графического модуля Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-145">A *Code* activity runs one or more lines of PowerShell or PowerShell Workflow code depending on the graphical runbook type.</span></span>  <span data-ttu-id="ddd36-146">Это действие можно использовать в пользовательском коде или функции, которую не удается реализовать иными способами.</span><span class="sxs-lookup"><span data-stu-id="ddd36-146">You can use this activity for custom code or for functionality that is difficult to achieve with other activities.</span></span> |

### <a name="configuration-control"></a><span data-ttu-id="ddd36-147">Элемент управления "Конфигурация"</span><span class="sxs-lookup"><span data-stu-id="ddd36-147">Configuration control</span></span>
<span data-ttu-id="ddd36-148">Элемент управления "Конфигурация" позволяет указывать сведения для объекта, выбранного на холсте.</span><span class="sxs-lookup"><span data-stu-id="ddd36-148">The Configuration control is where you provide details for an object selected on the canvas.</span></span> <span data-ttu-id="ddd36-149">Доступные в этом элементе управления свойства зависят от типа выбранного объекта.</span><span class="sxs-lookup"><span data-stu-id="ddd36-149">The properties available in this control will depend on the type of object selected.</span></span>  <span data-ttu-id="ddd36-150">При выборе параметра в элементе управления "Конфигурация" открываются дополнительные колонки с дополнительной информацией.</span><span class="sxs-lookup"><span data-stu-id="ddd36-150">When you select an option in the Configuration control, it will open additional blades in order to provide additional information.</span></span>

### <a name="test-control"></a><span data-ttu-id="ddd36-151">Элемент управления "Тест"</span><span class="sxs-lookup"><span data-stu-id="ddd36-151">Test control</span></span>
<span data-ttu-id="ddd36-152">Элемент управления "Тест" не отображается при первом запуске графического редактора.</span><span class="sxs-lookup"><span data-stu-id="ddd36-152">The Test control is not displayed when the graphical editor is first started.</span></span> <span data-ttu-id="ddd36-153">Он открывается, когда вы интерактивно [тестируете графический Runbook](#graphical-runbook-procedures).</span><span class="sxs-lookup"><span data-stu-id="ddd36-153">It is opened when you interactively [test a graphical runbook](#graphical-runbook-procedures).</span></span>  

## <a name="graphical-runbook-procedures"></a><span data-ttu-id="ddd36-154">Процедуры графического Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-154">Graphical runbook procedures</span></span>
### <a name="exporting-and-importing-a-graphical-runbook"></a><span data-ttu-id="ddd36-155">Экспорт и импорт графического модуля Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-155">Exporting and importing a graphical runbook</span></span>
<span data-ttu-id="ddd36-156">Можно экспортировать только опубликованную версию графического модуля Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-156">You can only export the published version of a graphical runbook.</span></span>  <span data-ttu-id="ddd36-157">Если Runbook еще не был опубликован, то кнопка **Экспортировать опубликованное** будет неактивна.</span><span class="sxs-lookup"><span data-stu-id="ddd36-157">If the runbook has not yet been published, then the **Export published** button will be disabled.</span></span>  <span data-ttu-id="ddd36-158">При нажатии кнопки **Экспортировать опубликованное** модуль Runbook скачивается на локальный компьютер.</span><span class="sxs-lookup"><span data-stu-id="ddd36-158">When you click the **Export published** button, the runbook is downloaded to your local computer.</span></span>  <span data-ttu-id="ddd36-159">Имя файла соответствует имени модуля Runbook. Расширение файла — *GRAPHRUNBOOK*.</span><span class="sxs-lookup"><span data-stu-id="ddd36-159">The name of the file matches the name of the runbook with a *graphrunbook* extension.</span></span>

![Экспортировать опубликованный](media/automation-graphical-authoring-intro/runbook-export.png)

<span data-ttu-id="ddd36-161">Файл графического модуля Runbook или графического модуля Runbook рабочего процесса PowerShell можно импортировать, выбрав параметр **Импорт** при добавлении модуля.</span><span class="sxs-lookup"><span data-stu-id="ddd36-161">You can import a Graphical or Graphical PowerShell Workflow runbook file by selecting the **Import** option when adding a runbook.</span></span>   <span data-ttu-id="ddd36-162">При выборе файла для импорта можно сохранить то же **имя** или ввести новое.</span><span class="sxs-lookup"><span data-stu-id="ddd36-162">When you select the file to import, you can keep the same **Name** or provide a new one.</span></span>  <span data-ttu-id="ddd36-163">После анализа выбранного файла в поле "Тип Runbook" отобразится тип модуля Runbook. При попытке выбрать недопустимый тип отобразится сообщение, извещающее о возможных конфликтах, а само преобразование может сопровождаться синтаксическими ошибками.</span><span class="sxs-lookup"><span data-stu-id="ddd36-163">The Runbook Type field will display the type of runbook after it assesses the file selected and if you attempt to select a different type that is not correct, a message will be presented noting there are potential conflicts and during conversion, there could be syntax errors.</span></span>  

![Импортировать Runbook](media/automation-graphical-authoring-intro/runbook-import-revised20165.png)

### <a name="testing-a-graphical-runbook"></a><span data-ttu-id="ddd36-165">Тестирование графического Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-165">Testing a graphical runbook</span></span>
<span data-ttu-id="ddd36-166">Вы можете протестировать черновую версию Runbook на портале Azure, оставив при этом опубликованную версию Runbook без изменений, или протестировать новую версию до ее публикации.</span><span class="sxs-lookup"><span data-stu-id="ddd36-166">You can test the Draft version of a runbook in the Azure portal while leaving the published version of the runbook unchanged, or you can test a new runbook before it has been published.</span></span> <span data-ttu-id="ddd36-167">Это позволяет проверить правильность работы Runbook перед заменой опубликованной версии.</span><span class="sxs-lookup"><span data-stu-id="ddd36-167">This allows you to verify that the runbook is working correctly before replacing the published version.</span></span> <span data-ttu-id="ddd36-168">При тестировании Runbook исполняется черновой Runbook и выполняются все его действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-168">When you test a runbook, the Draft runbook is executed and any actions that it performs are completed.</span></span> <span data-ttu-id="ddd36-169">Журнал заданий не создается, но выходные данные отображаются в области вывода теста.</span><span class="sxs-lookup"><span data-stu-id="ddd36-169">No job history is created, but output is displayed in the Test Output Pane.</span></span> 

<span data-ttu-id="ddd36-170">Откройте элемента управления "Тест" для Runbook, открыв Runbook для редактирования и нажав кнопку **области тестирования** .</span><span class="sxs-lookup"><span data-stu-id="ddd36-170">Open the Test control for a runbook by opening the runbook for edit and then click on the **Test pane** button.</span></span>

![Кнопка панели "Тест"](media/automation-graphical-authoring-intro/runbook-edit-test-pane.png)

<span data-ttu-id="ddd36-172">Будет предложено ввести входные параметры, после чего вы сможете запустить Runbook, нажав кнопку **Запуск** .</span><span class="sxs-lookup"><span data-stu-id="ddd36-172">The Test control will prompt for any input parameters, and you can start the runbook by clicking on the **Start** button.</span></span>

![Кнопки элемента управления "Тест"](media/automation-graphical-authoring-intro/runbook-test-start.png)

### <a name="publishing-a-graphical-runbook"></a><span data-ttu-id="ddd36-174">Публикация графического Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-174">Publishing a graphical runbook</span></span>
<span data-ttu-id="ddd36-175">У каждого Runbook в службе автоматизации Azure есть черновая и опубликованная версия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-175">Each runbook in Azure Automation has a Draft and a Published version.</span></span> <span data-ttu-id="ddd36-176">Запустить можно только опубликованную версию, а изменить — только черновую.</span><span class="sxs-lookup"><span data-stu-id="ddd36-176">Only the Published version is available to be run, and only the Draft version can be edited.</span></span> <span data-ttu-id="ddd36-177">Изменения, внесенные в черновик, не влияют на опубликованную версию.</span><span class="sxs-lookup"><span data-stu-id="ddd36-177">The Published version is unaffected by any changes to the Draft version.</span></span> <span data-ttu-id="ddd36-178">Когда черновая версия готова, ее можно опубликовать, заменив опубликованную версию содержимым черновой.</span><span class="sxs-lookup"><span data-stu-id="ddd36-178">When the Draft version is ready to be available, then you publish it which overwrites the Published version with the Draft version.</span></span>

<span data-ttu-id="ddd36-179">Графический Runbook можно опубликовать, открыв его для редактирования и нажав кнопку **Опубликовать** .</span><span class="sxs-lookup"><span data-stu-id="ddd36-179">You can publish a graphical runbook by opening the runbook for editing and then clicking on the **Publish** button.</span></span>

![Кнопка "Опубликовать"](media/automation-graphical-authoring-intro/runbook-edit-publish.png)

<span data-ttu-id="ddd36-181">Если Runbook еще не опубликован, он находится в состоянии **Новый**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-181">When a runbook has not yet been published, it has a status of **New**.</span></span>  <span data-ttu-id="ddd36-182">После публикации он находится в состоянии **Опубликован**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-182">When it is published, it has a status of **Published**.</span></span>  <span data-ttu-id="ddd36-183">Если изменить Runbook после публикации, и черновая и опубликованная версии отличаются, Runbook находится в состоянии **Редактирование**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-183">If you edit the runbook after it has been published, and the Draft and Published versions are different, the runbook has a status of **In edit**.</span></span>

![Состояния Runbook](media/automation-graphical-authoring-intro/runbook-statuses-revised20165.png) 

<span data-ttu-id="ddd36-185">Также имеется возможность восстановить опубликованную версию Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-185">You also have the option to revert to the Published version of a runbook.</span></span>  <span data-ttu-id="ddd36-186">При этом будут отброшены все изменения, внесенные с момента последней публикации Runbook, и черновая версия Runbook будет заменена опубликованной версией.</span><span class="sxs-lookup"><span data-stu-id="ddd36-186">This throws away any changes made since the runbook was last published and replaces the Draft version of the runbook with the Published version.</span></span>

![Кнопка "Вернуть опубликованную"](media/automation-graphical-authoring-intro/runbook-edit-revert-published.png)

## <a name="activities"></a><span data-ttu-id="ddd36-188">действия</span><span class="sxs-lookup"><span data-stu-id="ddd36-188">Activities</span></span>
<span data-ttu-id="ddd36-189">Действия являются стандартными блоками модуля Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-189">Activities are the building blocks of a runbook.</span></span>  <span data-ttu-id="ddd36-190">Действием может быть командлет PowerShell, дочерний Runbook или действие рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="ddd36-190">An activity can be a PowerShell cmdlet, a child runbook, or a workflow activity.</span></span>  <span data-ttu-id="ddd36-191">Вы можете добавить действия в Runbook, щелкнув его правой кнопкой мыши в элементе управления "Библиотека" и выбрав пункт **Добавить на холст**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-191">You add an activity to the runbook by right clicking it in the Library control and selecting **Add to canvas**.</span></span>  <span data-ttu-id="ddd36-192">Затем можно щелкнуть и перетащить действие, чтобы поместить его на холсте туда, куда необходимо.</span><span class="sxs-lookup"><span data-stu-id="ddd36-192">You can then click and drag the activity to place it anywhere on the canvas that you like.</span></span>  <span data-ttu-id="ddd36-193">Расположение действия на холсте никак не влияет на работу Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-193">The location of the of the activity on the canvas does not effect the operation of the runbook in any way.</span></span>  <span data-ttu-id="ddd36-194">Можно по-разному компоновать Runbook, однако вы поймете, что удобнее всего наглядно представить его работу.</span><span class="sxs-lookup"><span data-stu-id="ddd36-194">You can layout your runbook however you find it most suitable to visualize its operation.</span></span> 

![Добавить на холст](media/automation-graphical-authoring-intro/add-to-canvas-revised20165.png)

<span data-ttu-id="ddd36-196">Выберите действие на холсте, чтобы настроить его свойства и параметры в колонке "Конфигурация".</span><span class="sxs-lookup"><span data-stu-id="ddd36-196">Select the activity on the canvas to configure its properties and parameters in the Configuration blade.</span></span>  <span data-ttu-id="ddd36-197">Вы можете заменить **метку** действия чем-нибудь, что будет описывать его.</span><span class="sxs-lookup"><span data-stu-id="ddd36-197">You can change the **Label** of the activity to something that is descriptive to you.</span></span>  <span data-ttu-id="ddd36-198">Исходный командлет будет выполняться без изменений, вы просто меняете его отображаемое имя, которое будет использоваться в графическом редакторе.</span><span class="sxs-lookup"><span data-stu-id="ddd36-198">The original cmdlet is still being run, you are simply changing its display name that will be used in the graphical editor.</span></span>  <span data-ttu-id="ddd36-199">Метки должны быть уникальными в пределах Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-199">The label must be unique within the runbook.</span></span> 

### <a name="parameter-sets"></a><span data-ttu-id="ddd36-200">Наборы параметров</span><span class="sxs-lookup"><span data-stu-id="ddd36-200">Parameter sets</span></span>
<span data-ttu-id="ddd36-201">Набор параметров определяет обязательные и необязательные параметры, которые будет принимать значения для определенного командлета.</span><span class="sxs-lookup"><span data-stu-id="ddd36-201">A parameter set defines the mandatory and optional parameters that will accept values for a particular cmdlet.</span></span>  <span data-ttu-id="ddd36-202">У каждого командлета имеется по крайней мере один набор параметров, а у некоторых их несколько.</span><span class="sxs-lookup"><span data-stu-id="ddd36-202">All cmdlets have at least one parameter set, and some have multiple.</span></span>  <span data-ttu-id="ddd36-203">Если у командлета несколько наборов параметров, перед настройкой параметров необходимо выбрать, какой из них будет использоваться.</span><span class="sxs-lookup"><span data-stu-id="ddd36-203">If a cmdlet has multiple parameter sets, then you must select which one you will use before you can configure parameters.</span></span>  <span data-ttu-id="ddd36-204">Параметры, которые можно настроить, будут зависеть от выбранного набора параметров.</span><span class="sxs-lookup"><span data-stu-id="ddd36-204">The parameters that you can configure will depend on the parameter set that you choose.</span></span>  <span data-ttu-id="ddd36-205">Можно изменить набор параметров, используемый действием, щелкнув **Набор параметров** и выбрав другой набор.</span><span class="sxs-lookup"><span data-stu-id="ddd36-205">You can change the parameter set used by an activity by selecting **Parameter Set** and selecting another set.</span></span>  <span data-ttu-id="ddd36-206">В этом случае все настроенные значения параметров будут потеряны.</span><span class="sxs-lookup"><span data-stu-id="ddd36-206">In this case, any parameter values that you configured are lost.</span></span>

<span data-ttu-id="ddd36-207">В следующем примере у командлета Get-AzureRmVM три набора параметров.</span><span class="sxs-lookup"><span data-stu-id="ddd36-207">In the following example, the Get-AzureRmVM cmdlet has three parameter sets.</span></span>  <span data-ttu-id="ddd36-208">Нельзя настроить значения параметров, пока не выбран один из наборов параметров.</span><span class="sxs-lookup"><span data-stu-id="ddd36-208">You cannot configure parameter values until you select one of the parameter sets.</span></span>  <span data-ttu-id="ddd36-209">Набор параметров ListVirtualMachineInResourceGroupParamSet предназначен для возврата всех виртуальных машин в группе ресурсов. Он включает один необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="ddd36-209">The ListVirtualMachineInResourceGroupParamSet parameter set is for returning all virtual machines in a resource group and has a single optional parameter.</span></span>  <span data-ttu-id="ddd36-210">Набор параметров GetVirtualMachineInResourceGroupParamSet используется для выбора виртуальной машины, которую следует вернуть. Он включает два обязательных и один необязательный параметр.</span><span class="sxs-lookup"><span data-stu-id="ddd36-210">The GetVirtualMachineInResourceGroupParamSet is for specifying the virtual machine you want to return and has two mandatory and one optional parameter.</span></span>

![Набор параметров](media/automation-graphical-authoring-intro/get-azurermvm-parameter-sets.png)

#### <a name="parameter-values"></a><span data-ttu-id="ddd36-212">Значения параметров</span><span class="sxs-lookup"><span data-stu-id="ddd36-212">Parameter values</span></span>
<span data-ttu-id="ddd36-213">При указании значения для параметра вы выбираете источник данных, чтобы определить, как будет указано значение.</span><span class="sxs-lookup"><span data-stu-id="ddd36-213">When you specify a value for a parameter, you select a data source to determine how the value will be specified.</span></span>  <span data-ttu-id="ddd36-214">Источники данных, доступные для определенного параметра, будут зависеть от допустимых значений для этого параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-214">The data sources that are available for a particular parameter will depend on the valid values for that parameter.</span></span>  <span data-ttu-id="ddd36-215">Например, значение NULL будет недоступно для параметра, который не допускает значений NULL.</span><span class="sxs-lookup"><span data-stu-id="ddd36-215">For example, Null will not be an available option for a parameter that does not allow null values.</span></span>

| <span data-ttu-id="ddd36-216">Источник данных</span><span class="sxs-lookup"><span data-stu-id="ddd36-216">Data Source</span></span> | <span data-ttu-id="ddd36-217">Описание</span><span class="sxs-lookup"><span data-stu-id="ddd36-217">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ddd36-218">Постоянное значение</span><span class="sxs-lookup"><span data-stu-id="ddd36-218">Constant Value</span></span> |<span data-ttu-id="ddd36-219">Введите значение для параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-219">Type in a value for the parameter.</span></span>  <span data-ttu-id="ddd36-220">Доступно только для следующих типов данных: Int32, Int64, String, Boolean, DateTime, Switch.</span><span class="sxs-lookup"><span data-stu-id="ddd36-220">This is only available for the following data types: Int32,Int64,String,Boolean,DateTime,Switch.</span></span> |
| <span data-ttu-id="ddd36-221">Выходные данные действия</span><span class="sxs-lookup"><span data-stu-id="ddd36-221">Activity Output</span></span> |<span data-ttu-id="ddd36-222">Выходные данные действия, предшествующего текущему действию в рабочем процессе.</span><span class="sxs-lookup"><span data-stu-id="ddd36-222">Output from an activity that precedes the current activity in the workflow.</span></span>  <span data-ttu-id="ddd36-223">Будут перечислены все допустимые действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-223">All valid activities will be listed.</span></span>  <span data-ttu-id="ddd36-224">Выберите действие, чтобы использовать его выходные данные для значения параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-224">Select just the activity to use its output for the parameter value.</span></span>  <span data-ttu-id="ddd36-225">Если действие выводит объект с несколькими свойствами, то можно ввести имя свойства после выбора действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-225">If the activity outputs an object with multiple properties, then you can type in the name of the property after selecting the activity.</span></span> |
| <span data-ttu-id="ddd36-226">Входные данные Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-226">Runbook Input</span></span> |<span data-ttu-id="ddd36-227">Выберите входной параметр Runbook в качестве входных данных для параметра действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-227">Select a runbook input parameter as input to the activity parameter.</span></span> |
| <span data-ttu-id="ddd36-228">Ресурс переменной</span><span class="sxs-lookup"><span data-stu-id="ddd36-228">Variable Asset</span></span> |<span data-ttu-id="ddd36-229">Выберите переменную службы автоматизации в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="ddd36-229">Select an Automation Variable as input.</span></span> |
| <span data-ttu-id="ddd36-230">Ресурс учетных данных</span><span class="sxs-lookup"><span data-stu-id="ddd36-230">Credential Asset</span></span> |<span data-ttu-id="ddd36-231">Выберите учетные данные службы автоматизации в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="ddd36-231">Select an Automation Credential as input.</span></span> |
| <span data-ttu-id="ddd36-232">Ресурс сертификата</span><span class="sxs-lookup"><span data-stu-id="ddd36-232">Certificate Asset</span></span> |<span data-ttu-id="ddd36-233">Выберите сертификат службы автоматизации в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="ddd36-233">Select an Automation Certificate as input.</span></span> |
| <span data-ttu-id="ddd36-234">Ресурс подключения</span><span class="sxs-lookup"><span data-stu-id="ddd36-234">Connection Asset</span></span> |<span data-ttu-id="ddd36-235">Выберите подключение службы автоматизации в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="ddd36-235">Select an Automation Connection as input.</span></span> |
| <span data-ttu-id="ddd36-236">Выражение PowerShell</span><span class="sxs-lookup"><span data-stu-id="ddd36-236">PowerShell Expression</span></span> |<span data-ttu-id="ddd36-237">Укажите простое [выражение PowerShell](#powershell-expressions).</span><span class="sxs-lookup"><span data-stu-id="ddd36-237">Specify simple [PowerShell expression](#powershell-expressions).</span></span>  <span data-ttu-id="ddd36-238">Выражение оценивается перед выполнением действия, и его результат используется в качестве значения параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-238">The expression will be evaluated before the activity and the result used for the parameter value.</span></span>  <span data-ttu-id="ddd36-239">Вы можете использовать переменные, чтобы ссылаться на выходные данные действия или входной параметр Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-239">You can use variables to refer to the output of an activity or a runbook input parameter.</span></span> |
| <span data-ttu-id="ddd36-240">Не настроено</span><span class="sxs-lookup"><span data-stu-id="ddd36-240">Not configured</span></span> |<span data-ttu-id="ddd36-241">Очищает все значения, которые были настроены ранее.</span><span class="sxs-lookup"><span data-stu-id="ddd36-241">Clears any value that was previously configured.</span></span> |

#### <a name="optional-additional-parameters"></a><span data-ttu-id="ddd36-242">Необязательные дополнительные параметры</span><span class="sxs-lookup"><span data-stu-id="ddd36-242">Optional additional parameters</span></span>
<span data-ttu-id="ddd36-243">У всех командлетов будет возможность предоставить дополнительные параметры.</span><span class="sxs-lookup"><span data-stu-id="ddd36-243">All cmdlets will have the option to provide additional parameters.</span></span>  <span data-ttu-id="ddd36-244">Это могут быть общие параметры PowerShell или другие пользовательские параметры.</span><span class="sxs-lookup"><span data-stu-id="ddd36-244">These are PowerShell common parameters or other custom parameters.</span></span>  <span data-ttu-id="ddd36-245">Появится текстовое поле, где можно будет указать параметры с помощью синтаксиса PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddd36-245">You are presented with a text box where you can provide parameters using PowerShell syntax.</span></span>  <span data-ttu-id="ddd36-246">Например, чтобы использовать общий параметр **Verbose**, необходимо указать **"-Verbose:$True"**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-246">For example, to use the **Verbose** common parameter, you would specify **"-Verbose:$True"**.</span></span>

### <a name="retry-activity"></a><span data-ttu-id="ddd36-247">Повтор действий</span><span class="sxs-lookup"><span data-stu-id="ddd36-247">Retry activity</span></span>
<span data-ttu-id="ddd36-248">**Режим повтора** обеспечивает многократное выполнение действий — пока не будет выполнено определенное условие, как в цикле.</span><span class="sxs-lookup"><span data-stu-id="ddd36-248">**Retry Behavior** allows an activity to be run multiple times until a particular condition is met, much like a loop.</span></span>  <span data-ttu-id="ddd36-249">Эта функция используется для действий, которые необходимо выполнить несколько раз (включая те, которые могут выполняться с ошибками), а также для проверки допустимости выходных данных действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-249">You can use this feature for activities that should run multiple times, are error prone and may need more than one attempt for success, or test the output information of the activity for valid data.</span></span>    

<span data-ttu-id="ddd36-250">Включая для действия режим повтора, можно задать условие и значение задержки.</span><span class="sxs-lookup"><span data-stu-id="ddd36-250">When you enable retry for an activity, you can set a delay and a condition.</span></span>  <span data-ttu-id="ddd36-251">Задержка — это время (в секундах или минутах) ожидания модуля Runbook перед повторным выполнением действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-251">The delay is the time (measured in seconds or minutes) that the runbook will wait before it runs the activity again.</span></span>  <span data-ttu-id="ddd36-252">Если задержка не указана, действие будет повторно выполнено сразу же после завершения.</span><span class="sxs-lookup"><span data-stu-id="ddd36-252">If no delay is specified, then the activity will run again immediately after it completes.</span></span> 

![Задержка повтора действия](media/automation-graphical-authoring-intro/retry-delay.png)

<span data-ttu-id="ddd36-254">Условие повтора — это выражение PowerShell, которое вычисляется после каждого выполнения действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-254">The retry condition is a PowerShell expression that is evaluated after each time the activity runs.</span></span>  <span data-ttu-id="ddd36-255">Если выражение возвращает значение True, действие выполняется повторно.</span><span class="sxs-lookup"><span data-stu-id="ddd36-255">If the expression resolves to True, then the activity runs again.</span></span>  <span data-ttu-id="ddd36-256">Если выражение возвращает значение False, действие не выполняется повторно, а модуль Runbook переходит к следующему действию.</span><span class="sxs-lookup"><span data-stu-id="ddd36-256">If the expression resolves to False then the activity does not run again, and the runbook moves on to the next activity.</span></span> 

![Задержка повтора действия](media/automation-graphical-authoring-intro/retry-condition.png)

<span data-ttu-id="ddd36-258">В качестве условия повтора может использоваться переменная с именем $RetryData, которая предоставляет доступ к сведениям о попытках выполнить действие.</span><span class="sxs-lookup"><span data-stu-id="ddd36-258">The retry condition can use a variable called $RetryData that provides access to information about the activity retries.</span></span>  <span data-ttu-id="ddd36-259">У этой переменной есть свойства, приведенные в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="ddd36-259">This variable has the properties in the following table.</span></span>

| <span data-ttu-id="ddd36-260">Свойство</span><span class="sxs-lookup"><span data-stu-id="ddd36-260">Property</span></span> | <span data-ttu-id="ddd36-261">Описание</span><span class="sxs-lookup"><span data-stu-id="ddd36-261">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ddd36-262">NumberOfAttempts</span><span class="sxs-lookup"><span data-stu-id="ddd36-262">NumberOfAttempts</span></span> |<span data-ttu-id="ddd36-263">Количество запусков действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-263">Number of times that the activity has been run.</span></span> |
| <span data-ttu-id="ddd36-264">Выходные данные</span><span class="sxs-lookup"><span data-stu-id="ddd36-264">Output</span></span> |<span data-ttu-id="ddd36-265">Результат последнего выполнения действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-265">Output from the last run of the activity.</span></span> |
| <span data-ttu-id="ddd36-266">TotalDuration</span><span class="sxs-lookup"><span data-stu-id="ddd36-266">TotalDuration</span></span> |<span data-ttu-id="ddd36-267">Время с момента первого запуска действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-267">Timed elapsed since the activity was started the first time.</span></span> |
| <span data-ttu-id="ddd36-268">StartedAt</span><span class="sxs-lookup"><span data-stu-id="ddd36-268">StartedAt</span></span> |<span data-ttu-id="ddd36-269">Время первого запуска действия в формате UTC.</span><span class="sxs-lookup"><span data-stu-id="ddd36-269">Time in UTC format the activity was first started.</span></span> |

<span data-ttu-id="ddd36-270">Ниже приведены примеры условий, при которых действие выполняется повторно.</span><span class="sxs-lookup"><span data-stu-id="ddd36-270">Following are examples of activity retry conditions.</span></span>

    # Run the activity exactly 10 times.
    $RetryData.NumberOfAttempts -ge 10 

    # Run the activity repeatedly until it produces any output.
    $RetryData.Output.Count -ge 1 

    # Run the activity repeatedly until 2 minutes has elapsed. 
    $RetryData.TotalDuration.TotalMinutes -ge 2

<span data-ttu-id="ddd36-271">Когда вы настроите для действия условия запуска повторных попыток, действие будет отображать два напоминания.</span><span class="sxs-lookup"><span data-stu-id="ddd36-271">After you configure a retry condition for an activity, the activity includes two visual cues to remind you.</span></span>  <span data-ttu-id="ddd36-272">Одно включено в само действие, а второе отображается при проверке конфигурации действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-272">One is presented in the activity and the other is when you review the configuration of the activity.</span></span>

![Визуальные индикаторы повторения действия](media/automation-graphical-authoring-intro/runbook-activity-retry-visual-cue.png)

### <a name="workflow-script-control"></a><span data-ttu-id="ddd36-274">Элемент управления сценария рабочего процесса</span><span class="sxs-lookup"><span data-stu-id="ddd36-274">Workflow Script control</span></span>
<span data-ttu-id="ddd36-275">Элемент управления "Код" — это специальное действие, которое принимает скрипт PowerShell или рабочего процесса PowerShell (в зависимости от типа создаваемого графического модуля Runbook), обеспечивая возможности, которые иначе могут быть недоступными.</span><span class="sxs-lookup"><span data-stu-id="ddd36-275">A Code control is a special activity that accepts PowerShell or PowerShell Workflow script depending on the type of graphical runbook being authored in order to provide functionality that may otherwise not be available.</span></span>  <span data-ttu-id="ddd36-276">Он не может принимать параметры, но может использовать переменные для выходных данных действия и входных параметров Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-276">It cannot accept parameters, but it can use variables for activity output and runbook input parameters.</span></span>  <span data-ttu-id="ddd36-277">Любые выходные данные действия добавляются в шину данных, если нет исходящей связи. Если она есть, они добавляется в выходные данные Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-277">Any output of the activity is added to the databus unless it has no outgoing link in which case it is added to the output of the runbook.</span></span>

<span data-ttu-id="ddd36-278">Например, следующий код выполняет вычисление дат с помощью входной переменной Runbook — $NumberOfDays.</span><span class="sxs-lookup"><span data-stu-id="ddd36-278">For example the following code performs date calculations using a runbook input variable called $NumberOfDays.</span></span>  <span data-ttu-id="ddd36-279">Затем он отправляет вычисленную дату и время как выходные данные для использования последующими действиями в Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-279">It then sends a calculated date time as output to be used by subsequent activities in the runbook.</span></span>

    $DateTimeNow = (Get-Date).ToUniversalTime()
    $DateTimeStart = ($DateTimeNow).AddDays(-$NumberOfDays)}
    $DateTimeStart


## <a name="links-and-workflow"></a><span data-ttu-id="ddd36-280">Связи и рабочий процесс</span><span class="sxs-lookup"><span data-stu-id="ddd36-280">Links and workflow</span></span>
<span data-ttu-id="ddd36-281">**Связь** в графическом Runbook соединяет два действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-281">A **link** in a graphical runbook connects two activities.</span></span>  <span data-ttu-id="ddd36-282">Она отображается на холсте как стрелка от исходного действия к действию назначения.</span><span class="sxs-lookup"><span data-stu-id="ddd36-282">It is displayed on the canvas as an arrow pointing from the source activity to the destination activity.</span></span>  <span data-ttu-id="ddd36-283">Действия выполняются в направлении стрелки: действие назначения запускается после завершения исходного действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-283">The activities run in the direction of the arrow with the destination activity starting after the source activity completes.</span></span>  

### <a name="create-a-link"></a><span data-ttu-id="ddd36-284">Создание связи</span><span class="sxs-lookup"><span data-stu-id="ddd36-284">Create a link</span></span>
<span data-ttu-id="ddd36-285">Создайте связь между двумя действиями, выбрав исходное действие и щелкнув круг в нижней части фигуры.</span><span class="sxs-lookup"><span data-stu-id="ddd36-285">Create a link between two activities by selecting the source activity and clicking the circle at the bottom of the shape.</span></span>  <span data-ttu-id="ddd36-286">Перетащите стрелку к действию назначения и отпустите ее.</span><span class="sxs-lookup"><span data-stu-id="ddd36-286">Drag the arrow to the destination activity and release.</span></span>

![Создание связи](media/automation-graphical-authoring-intro/create-link-revised20165.png)

<span data-ttu-id="ddd36-288">Выберите связь, чтобы настроить ее свойства в колонке "Конфигурация".</span><span class="sxs-lookup"><span data-stu-id="ddd36-288">Select the link to configure its properties in the Configuration blade.</span></span>  <span data-ttu-id="ddd36-289">К ним также относится тип связи, который описан в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="ddd36-289">This will include the link type which is described in the following table.</span></span>

| <span data-ttu-id="ddd36-290">Тип связи</span><span class="sxs-lookup"><span data-stu-id="ddd36-290">Link Type</span></span> | <span data-ttu-id="ddd36-291">Описание</span><span class="sxs-lookup"><span data-stu-id="ddd36-291">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ddd36-292">Конвейер</span><span class="sxs-lookup"><span data-stu-id="ddd36-292">Pipeline</span></span> |<span data-ttu-id="ddd36-293">Действие назначения выполняется один раз для каждого вывода объекта из исходного действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-293">The destination activity is run once for each object output from the source activity.</span></span>  <span data-ttu-id="ddd36-294">Действие назначения не выполняется, если исходное действие не создает выходные данные.</span><span class="sxs-lookup"><span data-stu-id="ddd36-294">The destination activity does not run if the source activity results in no output.</span></span>  <span data-ttu-id="ddd36-295">Выходные данные из исходного действия доступны в виде объекта.</span><span class="sxs-lookup"><span data-stu-id="ddd36-295">Output from the source activity is available as an object.</span></span> |
| <span data-ttu-id="ddd36-296">Последовательность</span><span class="sxs-lookup"><span data-stu-id="ddd36-296">Sequence</span></span> |<span data-ttu-id="ddd36-297">Действие назначения выполняется только один раз.</span><span class="sxs-lookup"><span data-stu-id="ddd36-297">The destination activity runs only once.</span></span>  <span data-ttu-id="ddd36-298">Оно получает массив объектов из исходного действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-298">It receives an array of objects from the source activity.</span></span>  <span data-ttu-id="ddd36-299">Выходные данные из исходного действия доступны в виде массива объектов.</span><span class="sxs-lookup"><span data-stu-id="ddd36-299">Output from the source activity is available as an array of objects.</span></span> |

### <a name="starting-activity"></a><span data-ttu-id="ddd36-300">Запуск действия</span><span class="sxs-lookup"><span data-stu-id="ddd36-300">Starting activity</span></span>
<span data-ttu-id="ddd36-301">Графический Runbook начнется с любых действий, у которых нет входящей связи.</span><span class="sxs-lookup"><span data-stu-id="ddd36-301">A graphical runbook will start with any activities that do not have an incoming link.</span></span>  <span data-ttu-id="ddd36-302">Часто это будет только одно действие, которое будет выступать в качестве начального действия Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-302">This will often be only one activity which would act as the starting activity for the runbook.</span></span>  <span data-ttu-id="ddd36-303">Если у нескольких действий нет входящих связей, Runbook будет запущен при их одновременном выполнении.</span><span class="sxs-lookup"><span data-stu-id="ddd36-303">If multiple activities do not have an incoming link, then the runbook will start by running them in parallel.</span></span>  <span data-ttu-id="ddd36-304">Затем, по завершении каждого из них, он будет переходить по связям, выполняя другие действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-304">It will then follow the links to run other activities as each completes.</span></span>

### <a name="conditions"></a><span data-ttu-id="ddd36-305">Условия</span><span class="sxs-lookup"><span data-stu-id="ddd36-305">Conditions</span></span>
<span data-ttu-id="ddd36-306">Если для связи указано условие, действие назначения выполняется, только если условие возвращает true.</span><span class="sxs-lookup"><span data-stu-id="ddd36-306">When you specify a condition on a link, the destination activity is only run if the condition resolves to true.</span></span>  <span data-ttu-id="ddd36-307">В условии обычно используется переменная $ActivityOutput для получения выходных данных исходного действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-307">You will typically use an $ActivityOutput variable in a condition to retrieve the output from the source activity.</span></span>  

<span data-ttu-id="ddd36-308">В конвейерной связи указывается условие для одного объекта, и оно вычисляется для каждого вывода объекта исходным действием.</span><span class="sxs-lookup"><span data-stu-id="ddd36-308">For a pipeline link, you specify a condition for a single object, and the condition is evaluated for each object output by the source activity.</span></span>  <span data-ttu-id="ddd36-309">Затем действие назначения выполняется с каждым объектом, который удовлетворяет условию.</span><span class="sxs-lookup"><span data-stu-id="ddd36-309">The destination activity is then run for each object that satisfies the condition.</span></span>  <span data-ttu-id="ddd36-310">Например, если исходное действие — Get-AzureRmVm, следующий синтаксис может использоваться в условной последовательной связи для получения только виртуальных машин, входящих в группу ресурсов *Group1*.</span><span class="sxs-lookup"><span data-stu-id="ddd36-310">For example, with a source activity of Get-AzureRmVm, the following syntax could be used for a conditional pipeline link to retrieve only virtual machines in the resource group named *Group1*.</span></span>  

    $ActivityOutput['Get Azure VMs'].Name -match "Group1"

<span data-ttu-id="ddd36-311">Для последовательной связи условие вычисляется только один раз, так как возвращается один массив, содержащий все объекты, выведенные исходным действием.</span><span class="sxs-lookup"><span data-stu-id="ddd36-311">For a sequence link, the condition is only evaluated once since a single array is returned containing all objects output from the source activity.</span></span>  <span data-ttu-id="ddd36-312">По этой причине последовательную связь нельзя использовать для фильтрации, как конвейерную связь, так как она будет просто определять, выполняется ли следующее действие.</span><span class="sxs-lookup"><span data-stu-id="ddd36-312">Because of this, a sequence link cannot be used for filtering like a pipeline link but will simply determine whether or not the next activity is run.</span></span> <span data-ttu-id="ddd36-313">Рассмотрим в качестве примера следующий набор действий в модуле Runbook для запуска виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="ddd36-313">Take for example the following set of activities in our Start VM runbook.</span></span><br> <span data-ttu-id="ddd36-314">![Условная связь с последовательностями](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span><span class="sxs-lookup"><span data-stu-id="ddd36-314">![Conditional Link with Sequences](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)</span></span><br>
<span data-ttu-id="ddd36-315">Существуют три различные последовательные связи, которые проверяют, чтобы были предоставлены значения для двух входных параметров Runbook, представляющих имя виртуальной машины и имя группы ресурсов. Это необходимо для определения действия, которое будет выполнено: запуск одной виртуальной машины, запуск всех виртуальных машин в группе ресурсов или всех виртуальных машин в подписке.</span><span class="sxs-lookup"><span data-stu-id="ddd36-315">There are three different sequence links that are verifying values were provided to two runbook input parameters representing VM name and Resource Group name in order to determine which is the appropriate action to take - start a single VM, start all VMs in the resouce group, or all VMs in a subscription.</span></span>  <span data-ttu-id="ddd36-316">Для установления последовательной связи между действиями подключения к Azure и получением одной виртуальной машины используется условная логика:</span><span class="sxs-lookup"><span data-stu-id="ddd36-316">For the sequence link between Connect to Azure and Get single VM, here is the condition logic:</span></span>

    <# 
    Both VMName and ResourceGroupName runbook input parameters have values 
    #>
    (
    (($VMName -ne $null) -and ($VMName.Length -gt 0))
    ) -and (
    (($ResourceGroupName -ne $null) -and ($ResourceGroupName.Length -gt 0))
    )

<span data-ttu-id="ddd36-317">При использовании условной связи данные из исходного действия, доступные для других действий в этой ветви, будут фильтроваться по условию.</span><span class="sxs-lookup"><span data-stu-id="ddd36-317">When you use a conditional link, the data available from the source activity to other activities in that branch will be filtered by the condition.</span></span>  <span data-ttu-id="ddd36-318">Если действие является источником нескольких связей, данные, доступные для действий в каждой ветви, будут зависеть от условия в связи, присоединенной к этой ветви.</span><span class="sxs-lookup"><span data-stu-id="ddd36-318">If an activity is the source to multiple links, then the data available to activities in each branch will depend on the condition in the link connecting to that branch.</span></span>

<span data-ttu-id="ddd36-319">Например, действие **Start-AzureRmVm** в модуле Runbook ниже запускает все виртуальные машины.</span><span class="sxs-lookup"><span data-stu-id="ddd36-319">For example, the **Start-AzureRmVm** activity in the runbook below starts all virtual machines.</span></span>  <span data-ttu-id="ddd36-320">Действие включает две условные связи.</span><span class="sxs-lookup"><span data-stu-id="ddd36-320">It has two conditional links.</span></span>  <span data-ttu-id="ddd36-321">В первой условной связи используется выражение *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* для фильтрации, если действие Start-AzureRmVm выполнено.</span><span class="sxs-lookup"><span data-stu-id="ddd36-321">The first conditional link uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -eq $true* to filter if the Start-AzureRmVm activity completed successfully.</span></span>  <span data-ttu-id="ddd36-322">А во второй — выражение *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* для фильтрации, если действию Start-AzureRmVm не удалось запустить виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="ddd36-322">The second uses the expression *$ActivityOutput['Start-AzureRmVM'].IsSuccessStatusCode -ne $true* to filter if the Start-AzureRmVm activity failed to start the virtual machine.</span></span>  

![Пример условной связи](media/automation-graphical-authoring-intro/runbook-conditional-links.png)

<span data-ttu-id="ddd36-324">Любое действие, следующее по первой связи и использующее выходные данные действия Get-AzureVM, получит только виртуальные машины, которые были запущены на момент выполнения Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="ddd36-324">Any activity that follows the first link and uses the activity output from Get-AzureVM will only get the virtual machines that were started at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="ddd36-325">Любое действие, которое следует по второй связи, получит только виртуальные машины, которые были остановлены на момент выполнения Get-AzureVM.</span><span class="sxs-lookup"><span data-stu-id="ddd36-325">Any activity that follows the second link will only get the the virtual machines that were stopped at the time that Get-AzureVM was run.</span></span>  <span data-ttu-id="ddd36-326">Действие, следующее по третьей связи, получит все виртуальные машины вне зависимости от того, запущены они или нет.</span><span class="sxs-lookup"><span data-stu-id="ddd36-326">Any activity following the third link will get all virtual machines regardless of their running state.</span></span>

### <a name="junctions"></a><span data-ttu-id="ddd36-327">Соединения</span><span class="sxs-lookup"><span data-stu-id="ddd36-327">Junctions</span></span>
<span data-ttu-id="ddd36-328">Соединение — это специальное действие, которое будет ожидать завершения всех входящих ветвей.</span><span class="sxs-lookup"><span data-stu-id="ddd36-328">A junction is a special activity that will wait until all incoming branches have completed.</span></span>  <span data-ttu-id="ddd36-329">Это дает возможность параллельно выполнять несколько действий и гарантировать, что все они будут завершены перед выполнением следующего шага.</span><span class="sxs-lookup"><span data-stu-id="ddd36-329">This allows you to run multiple activities in parallel and ensure that all have completed before moving on.</span></span>

<span data-ttu-id="ddd36-330">Хотя у соединения может быть неограниченное число входящих связей, конвейерной может быть только одна из них.</span><span class="sxs-lookup"><span data-stu-id="ddd36-330">While a junction can have an unlimited number of incoming links, not more than one of those links can be a pipeline.</span></span>  <span data-ttu-id="ddd36-331">Число входящих последовательных связей не ограничено.</span><span class="sxs-lookup"><span data-stu-id="ddd36-331">The number of incoming sequence links is not constrained.</span></span>  <span data-ttu-id="ddd36-332">Вы сможете создать соединение с несколькими входящими конвейерными связями и сохранить Runbook, но его запуск завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="ddd36-332">You will be allowed to create the junction with multiple incoming pipeline links and save the runbook, but it will fail when it is run.</span></span>

<span data-ttu-id="ddd36-333">В приведенном ниже примере показана часть Runbook, которая запускает набор виртуальных машин, одновременно скачивая исправления для них.</span><span class="sxs-lookup"><span data-stu-id="ddd36-333">The example below is part of a runbook that starts a set of virtual machines while simultaneously downloading patches to be applied to those machines.</span></span>  <span data-ttu-id="ddd36-334">Соединение используется, чтобы гарантировать, что оба процесса будут выполнены, прежде чем выполнение Runbook будет продолжено.</span><span class="sxs-lookup"><span data-stu-id="ddd36-334">A junction is used to ensure that both processes are completed before the runbook continues.</span></span>

![Соединение](media/automation-graphical-authoring-intro/runbook-junction.png)

### <a name="cycles"></a><span data-ttu-id="ddd36-336">Циклические процессы</span><span class="sxs-lookup"><span data-stu-id="ddd36-336">Cycles</span></span>
<span data-ttu-id="ddd36-337">Циклический процесс происходит, когда действие назначения обратно связано с исходным действием или другим действием, которое в конечном итоге обратно связано с его исходным действием.</span><span class="sxs-lookup"><span data-stu-id="ddd36-337">A cycle is when a destination activity links back to its source activity or to another activity that eventually links back to its source.</span></span>  <span data-ttu-id="ddd36-338">В настоящее время использование циклических процессов в графической разработке запрещено.</span><span class="sxs-lookup"><span data-stu-id="ddd36-338">Cycles are currently not allowed in graphical authoring.</span></span>  <span data-ttu-id="ddd36-339">Если Runbook содержит циклический процесс, он будет сохранен правильно, но при его выполнении произойдет ошибка.</span><span class="sxs-lookup"><span data-stu-id="ddd36-339">If your runbook has a cycle, it will save properly but will receive an error when it runs.</span></span>

![Циклический процесс](media/automation-graphical-authoring-intro/runbook-cycle.png)

### <a name="sharing-data-between-activities"></a><span data-ttu-id="ddd36-341">Обмен данными между действиями</span><span class="sxs-lookup"><span data-stu-id="ddd36-341">Sharing data between activities</span></span>
<span data-ttu-id="ddd36-342">Любые данные, которые выводятся действием с исходящей связью, записываются в *шину данных* для Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-342">Any data that is output by an activity with an outgoing link is written to the *databus* for the runbook.</span></span>  <span data-ttu-id="ddd36-343">Любое действие в Runbook может использовать данные в шине данных, чтобы заполнить значения параметров или добавить эти данные в код сценария.</span><span class="sxs-lookup"><span data-stu-id="ddd36-343">Any activity in the runbook can use data on the databus to populate parameter values or include in script code.</span></span>  <span data-ttu-id="ddd36-344">Действие может обращаться к выходным данным любого предыдущего действия в рабочем процессе.</span><span class="sxs-lookup"><span data-stu-id="ddd36-344">An activity can access the output of any previous activity in the workflow.</span></span>     

<span data-ttu-id="ddd36-345">То, как данные записываются в шину данных, зависит от типа связи действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-345">How the data is written to the databus depends on the type of link on the activity.</span></span>  <span data-ttu-id="ddd36-346">Для **конвейерной**связи данные выводятся в виде нескольких объектов.</span><span class="sxs-lookup"><span data-stu-id="ddd36-346">For a **pipeline**, the data is output as multiples objects.</span></span>  <span data-ttu-id="ddd36-347">Для **последовательной** связи данные выводятся в виде массива.</span><span class="sxs-lookup"><span data-stu-id="ddd36-347">For a **sequence** link, the data is output as an array.</span></span>  <span data-ttu-id="ddd36-348">Если имеется только одно значение, оно будет выведено в виде одноэлементного массива.</span><span class="sxs-lookup"><span data-stu-id="ddd36-348">If there is only one value, it will be output as a single element array.</span></span>

<span data-ttu-id="ddd36-349">Получить доступ к данным в шине данных можно одним из двух методов.</span><span class="sxs-lookup"><span data-stu-id="ddd36-349">You can access data on the databus using one of two methods.</span></span>  <span data-ttu-id="ddd36-350">Первый — использовать источник данных **Выходные данные действия** для заполнения параметра другого действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-350">First is using an **Activity Output** data source to populate a parameter of another activity.</span></span>  <span data-ttu-id="ddd36-351">Если выходными данными является объект, можно указать одно свойство.</span><span class="sxs-lookup"><span data-stu-id="ddd36-351">If the output is an object, you can specify a single property.</span></span>

![Выходные данные действия](media/automation-graphical-authoring-intro/activity-output-datasource-revised20165.png)

<span data-ttu-id="ddd36-353">Также можно получить выходные данные действия из источника данных **Выражение PowerShell** или действия **Скрипт рабочего процесса** с использованием переменной ActivityOutput.</span><span class="sxs-lookup"><span data-stu-id="ddd36-353">You can also retrieve the output of an activity in a **PowerShell Expression** data source or from a **Workflow Script** activity with an ActivityOutput variable.</span></span>  <span data-ttu-id="ddd36-354">Если выходными данными является объект, можно указать одно свойство.</span><span class="sxs-lookup"><span data-stu-id="ddd36-354">If the output is an object, you can specify a single property.</span></span>  <span data-ttu-id="ddd36-355">Для переменных ActivityOutput используется следующий синтаксис.</span><span class="sxs-lookup"><span data-stu-id="ddd36-355">ActivityOutput variables use the following syntax.</span></span>

    $ActivityOutput['Activity Label']
    $ActivityOutput['Activity Label'].PropertyName 

### <a name="checkpoints"></a><span data-ttu-id="ddd36-356">Контрольные точки</span><span class="sxs-lookup"><span data-stu-id="ddd36-356">Checkpoints</span></span>
<span data-ttu-id="ddd36-357">В графическом модуле Runbook рабочего процесса PowerShell можно указать [контрольные точки](automation-powershell-workflow.md#checkpoints) , выбрав параметр *Создать контрольную точку модуля Runbook* для любого действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-357">You can set [checkpoints](automation-powershell-workflow.md#checkpoints) in a Graphical PowerShell Workflow runbook by selecting *Checkpoint runbook* on any activity.</span></span>  <span data-ttu-id="ddd36-358">Это настраивает создание контрольной точки после выполнения действия.</span><span class="sxs-lookup"><span data-stu-id="ddd36-358">This causes a checkpoint to be set after the activity runs.</span></span>

![Контрольная точка](media/automation-graphical-authoring-intro/set-checkpoint.png)

<span data-ttu-id="ddd36-360">Контрольные точки доступны только в графических модулях Runbook рабочего процесса PowerShell (соответственно, в графических модулях Runbook они недоступны).</span><span class="sxs-lookup"><span data-stu-id="ddd36-360">Checkpoints are only enabled in Graphical PowerShell Workflow runbooks, it is not available in Graphical runbooks.</span></span>  <span data-ttu-id="ddd36-361">При приостановке и перезапуске модуля Runbook из контрольной точки в другой рабочей роли все действия с контрольными точками должны наследоваться. Если такой модуль использует командлеты Azure, это можно сделать с помощью командлета Add-AzureRMAccount.</span><span class="sxs-lookup"><span data-stu-id="ddd36-361">If the runbook uses Azure cmdlets, you should follow any checkpointed activity with an Add-AzureRMAccount in case the runbook is suspended and restarts from this checkpoint on a different worker.</span></span> 

## <a name="authenticating-to-azure-resources"></a><span data-ttu-id="ddd36-362">Аутентификация для доступа к ресурсам Azure</span><span class="sxs-lookup"><span data-stu-id="ddd36-362">Authenticating to Azure resources</span></span>
<span data-ttu-id="ddd36-363">В службе автоматизации Azure для модулей Runbook, которые управляют ресурсами Azure, требуется проверка подлинности.</span><span class="sxs-lookup"><span data-stu-id="ddd36-363">Runbooks in Azure Automation that manage Azure resources will require authentication to Azure.</span></span>  <span data-ttu-id="ddd36-364">Для доступа к ресурсам Azure Resource Manager в подписке с помощью модулей Runbook службы автоматизации по умолчанию используется [учетная запись запуска от имени](automation-offering-get-started.md#creating-an-automation-account) (также называемая субъектом-службой).</span><span class="sxs-lookup"><span data-stu-id="ddd36-364">The [Run As account](automation-offering-get-started.md#creating-an-automation-account) (also referred to as a service principal) is the default method to access Azure Resource Manager resources in your subscription with Automation runbooks.</span></span>  <span data-ttu-id="ddd36-365">Эту функцию можно включить в графический модуль Runbook, добавив ресурс-контейнер подключения **AzureRunAsConnection**, который использует для работы с холстом командлеты PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) и [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx).</span><span class="sxs-lookup"><span data-stu-id="ddd36-365">You can add this functionality to a graphical runbook by adding the **AzureRunAsConnection** Connection asset, which is using the PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) cmdlet, and [Add-AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) cmdlet to the canvas.</span></span> <span data-ttu-id="ddd36-366">Это продемонстрировано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="ddd36-366">This is illustrated in the following example.</span></span><br><span data-ttu-id="ddd36-367">![Действия проверки подлинности запуска от имени](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span><span class="sxs-lookup"><span data-stu-id="ddd36-367">![Run As Authentication Activities](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)</span></span><br>
<span data-ttu-id="ddd36-368">Для действия получения подключения запуска от имени (т. е. Get-AutomationConnection) настроено постоянное значение источника данных с именем AzureRunAsConnection.</span><span class="sxs-lookup"><span data-stu-id="ddd36-368">The Get Run As Connection activity (i.e. Get-AutomationConnection), is configured with a constant value data source named AzureRunAsConnection.</span></span><br><span data-ttu-id="ddd36-369">![Конфигурация подключения запуска от имени](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span><span class="sxs-lookup"><span data-stu-id="ddd36-369">![Run As Connection Configuration](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)</span></span><br>
<span data-ttu-id="ddd36-370">Следующее действие (Add-AzureRmAccount) добавляет учетную запись запуска от имени с выполненной аутентификацией для использования в модуле Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-370">The next activity, Add-AzureRmAccount, adds the authenticated Run As account for use in the runbook.</span></span><br><span data-ttu-id="ddd36-371">
![Набор параметров Add-AzureRmAccount](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span><span class="sxs-lookup"><span data-stu-id="ddd36-371">
![Add-AzureRmAccount Parameter Set](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)</span></span><br>
<span data-ttu-id="ddd36-372">Для параметров **APPLICATIONID**, **CERTIFICATETHUMBPRINT** и **TENANTID** необходимо указать имя свойства для пути к полю, так как действие выводит объект с несколькими свойствами.</span><span class="sxs-lookup"><span data-stu-id="ddd36-372">For the parameters **APPLICATIONID**, **CERTIFICATETHUMBPRINT**, and **TENANTID** you will need to specify the name of the property for the Field path because the activity outputs an object with multiple properties.</span></span>  <span data-ttu-id="ddd36-373">Иначе при выполнении модуля Runbook попытка выполнения проверки подлинности завершится ошибкой.</span><span class="sxs-lookup"><span data-stu-id="ddd36-373">Otherwise when you execute the runbook, it will fail attempting to authenticate.</span></span>  <span data-ttu-id="ddd36-374">Это минимальные требования для проверки подлинности модуля Runbook с использованием учетной записи запуска от имени.</span><span class="sxs-lookup"><span data-stu-id="ddd36-374">This is what you need at a minimum to authenticate your runbook with the Run As account.</span></span>

<span data-ttu-id="ddd36-375">Вы можете обеспечить обратную совместимость для подписчиков, которые создали учетную запись службы автоматизации с помощью [учетной записи пользователя Azure AD](automation-create-aduser-account.md) для управления классическим развертыванием Azure или для ресурсов Azure Resource Manager. В таком случае проверку подлинности следует выполнять с помощью командлета Add-AzureAccount с использованием [ресурса учетных данных](automation-credentials.md), который представляет пользователя Active Directory с доступом к учетной записи Azure.</span><span class="sxs-lookup"><span data-stu-id="ddd36-375">To maintain backwards compatibility for subscribers who have created an Automation account using an [Azure AD User account](automation-create-aduser-account.md) to manage Azure classic deployment or for Azure Resource Manager resources, the method to authenticate is the Add-AzureAccount cmdlet with a [credential asset](automation-credentials.md) that represents an Active Directory user with access to the Azure account.</span></span>

<span data-ttu-id="ddd36-376">Вы можете добавить эту функциональную возможность в графический Runbook, сначала добавив на холст ресурс учетных данных, а затем — действие Add-AzureAccount.</span><span class="sxs-lookup"><span data-stu-id="ddd36-376">You can add this functionality to a graphical runbook by adding a credential asset to the canvas followed by an Add-AzureAccount activity.</span></span>  <span data-ttu-id="ddd36-377">Add-AzureAccount использует действие учетных данных в качестве входных данных.</span><span class="sxs-lookup"><span data-stu-id="ddd36-377">Add-AzureAccount uses the credential activity for its input.</span></span>  <span data-ttu-id="ddd36-378">Это продемонстрировано в следующем примере.</span><span class="sxs-lookup"><span data-stu-id="ddd36-378">This is illustrated in the following example.</span></span>

![Действия аутентификации](media/automation-graphical-authoring-intro/authentication-activities.png)

<span data-ttu-id="ddd36-380">Проходить аутентификацию необходимо при запуске Runbook и после каждой контрольной точки.</span><span class="sxs-lookup"><span data-stu-id="ddd36-380">You have to authenticate at the start of the runbook and after each checkpoint.</span></span>  <span data-ttu-id="ddd36-381">Это означает добавление действия Add-AzureAccount после любого действия Checkpoint-Workflow.</span><span class="sxs-lookup"><span data-stu-id="ddd36-381">This means adding an addition Add-AzureAccount activity after any Checkpoint-Workflow activity.</span></span> <span data-ttu-id="ddd36-382">Так как можно использовать одно действие учетных данных, другие добавлять не требуется.</span><span class="sxs-lookup"><span data-stu-id="ddd36-382">You do not need an addition credential activity since you can use the same</span></span> 

![Выходные данные действия](media/automation-graphical-authoring-intro/authentication-activity-output.png)

## <a name="runbook-input-and-output"></a><span data-ttu-id="ddd36-384">Входные и выходные данные Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-384">Runbook input and output</span></span>
### <a name="runbook-input"></a><span data-ttu-id="ddd36-385">Входные данные Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-385">Runbook input</span></span>
<span data-ttu-id="ddd36-386">Может потребоваться ввод от пользователя при запуске Runbook на портале Azure или из другого Runbook, если текущий используется в качестве дочернего.</span><span class="sxs-lookup"><span data-stu-id="ddd36-386">A runbook may require input either from a user when they start the runbook through the Azure portal or from another runbook if the current one is used as a child.</span></span>
<span data-ttu-id="ddd36-387">Например, если имеется Runbook, который создает виртуальную машину, при каждом запуске Runbook вам может потребоваться предоставлять такие данные, как имя виртуальной машины и другие свойства.</span><span class="sxs-lookup"><span data-stu-id="ddd36-387">For example, if you have a runbook that creates a virtual machine, you may need to provide information such as the name of the virtual machine and other properties each time you start the runbook.</span></span>  

<span data-ttu-id="ddd36-388">Для приема входных данных Runbook можно определить один или несколько входных параметров.</span><span class="sxs-lookup"><span data-stu-id="ddd36-388">You accept input for a runbook by defining one or more input parameters.</span></span>  <span data-ttu-id="ddd36-389">Значения для этих параметров вводятся при каждом запуске Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-389">You provide values for these parameters each time the runbook is started.</span></span>  <span data-ttu-id="ddd36-390">При запуске Runbook с помощью портала Azure вам будет предложено ввести значения для всех входных параметров Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-390">When you start a runbook with the Azure portal, it will prompt you to provide values for the each of the runbook's input parameters.</span></span>

<span data-ttu-id="ddd36-391">Входные параметры для модуля можно открыть, нажав кнопку **Вход и выход** на панели инструментов Runbook.</span><span class="sxs-lookup"><span data-stu-id="ddd36-391">You can access input parameters for a runbook by clicking the **Input and output** button on the runbook toolbar.</span></span>  

![Входные и выходные данные Runbook](media/automation-graphical-authoring-intro/runbook-edit-input-output.png) 

<span data-ttu-id="ddd36-393">Откроется элемент управления **Вход и выход**, в котором можно изменить существующий входной параметр или создать новый, нажав кнопку **Добавить входные данные**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-393">This opens the **Input and Output** control where you can edit an existing input parameter or create a new one by clicking **Add input**.</span></span> 

![Добавить входные данные](media/automation-graphical-authoring-intro/runbook-edit-add-input.png)

<span data-ttu-id="ddd36-395">Каждый входной параметр определяется с помощью свойств, указанных в следующей таблице.</span><span class="sxs-lookup"><span data-stu-id="ddd36-395">Each input parameter is defined by the properties in the following table.</span></span>

| <span data-ttu-id="ddd36-396">Свойство</span><span class="sxs-lookup"><span data-stu-id="ddd36-396">Property</span></span> | <span data-ttu-id="ddd36-397">Описание</span><span class="sxs-lookup"><span data-stu-id="ddd36-397">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="ddd36-398">Имя</span><span class="sxs-lookup"><span data-stu-id="ddd36-398">Name</span></span> |<span data-ttu-id="ddd36-399">Уникальное имя параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-399">The unique name of the parameter.</span></span>  <span data-ttu-id="ddd36-400">Оно может содержать только буквы или цифры и не может содержать пробел.</span><span class="sxs-lookup"><span data-stu-id="ddd36-400">This can only contain alpha numeric characters and cannot contain a space.</span></span> |
| <span data-ttu-id="ddd36-401">Описание</span><span class="sxs-lookup"><span data-stu-id="ddd36-401">Description</span></span> |<span data-ttu-id="ddd36-402">Необязательное описание входного параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-402">An optional description for the input parameter.</span></span> |
| <span data-ttu-id="ddd36-403">Тип</span><span class="sxs-lookup"><span data-stu-id="ddd36-403">Type</span></span> |<span data-ttu-id="ddd36-404">Предполагаемый тип данных значения параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-404">Data type expected for the parameter value.</span></span>  <span data-ttu-id="ddd36-405">Портал Azure предоставит соответствующий элемент управления для типа данных каждого параметра при запросе ввода его значения.</span><span class="sxs-lookup"><span data-stu-id="ddd36-405">The Azure portal will provide an appropriate control for the data type for each parameter when prompting for input.</span></span> |
| <span data-ttu-id="ddd36-406">Обязательно</span><span class="sxs-lookup"><span data-stu-id="ddd36-406">Mandatory</span></span> |<span data-ttu-id="ddd36-407">Указывает, должно ли быть указано значение для параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-407">Specifies whether a value must be provided for the parameter.</span></span>  <span data-ttu-id="ddd36-408">Запустить Runbook не удастся, если не указать значение для каждого обязательного параметра, у которого нет определенного значения по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="ddd36-408">The runbook cannot be started if you do not provide a value for each mandatory parameter that does not have a default value defined.</span></span> |
| <span data-ttu-id="ddd36-409">Значение по умолчанию</span><span class="sxs-lookup"><span data-stu-id="ddd36-409">Default Value</span></span> |<span data-ttu-id="ddd36-410">Указывает, какое значение используется для параметра, если оно не указано.</span><span class="sxs-lookup"><span data-stu-id="ddd36-410">Specifies what value is used for the parameter if one is not provided.</span></span>  <span data-ttu-id="ddd36-411">Это может быть NULL или какое-нибудь определенное значение.</span><span class="sxs-lookup"><span data-stu-id="ddd36-411">This can either be Null or a specific value.</span></span> |

### <a name="runbook-output"></a><span data-ttu-id="ddd36-412">Выходные данные Runbook</span><span class="sxs-lookup"><span data-stu-id="ddd36-412">Runbook output</span></span>
<span data-ttu-id="ddd36-413">Данные, созданные каким-либо действием, у которого нет исходящей связи, будут добавлены в [выходные данные Runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span><span class="sxs-lookup"><span data-stu-id="ddd36-413">Data created by any activity that does not have an outgoing link will be added to the [output of the runbook](http://msdn.microsoft.com/library/azure/dn879148.aspx).</span></span>  <span data-ttu-id="ddd36-414">Выходные данные сохраняются заданием Runbook и доступны родительскому модулю Runbook, если Runbook используется как дочерний.</span><span class="sxs-lookup"><span data-stu-id="ddd36-414">The output is saved with the runbook job and is available to a parent runbook when the runbook is used as a child.</span></span>  

## <a name="powershell-expressions"></a><span data-ttu-id="ddd36-415">Выражения PowerShell</span><span class="sxs-lookup"><span data-stu-id="ddd36-415">PowerShell expressions</span></span>
<span data-ttu-id="ddd36-416">Одним из преимуществ графической разработки является возможность создавать модули Runbook, располагая минимальными знаниями о PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddd36-416">One of the advantages of graphical authoring is providing you with the ability to build a runbook with minimal knowledge of PowerShell.</span></span>  <span data-ttu-id="ddd36-417">В настоящее время необходимо знать лишь некоторые общие принципы работы с PowerShell для заполнения определенных [значений параметров](#activities) и настройки [условий связи](#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="ddd36-417">Currently, you do need to know a bit of PowerShell though for populating certain [parameter values](#activities) and for setting [link conditions](#links-and-workflow).</span></span>  <span data-ttu-id="ddd36-418">Данный раздел содержит краткое введение в выражения PowerShell для тех пользователей, которые с ними не знакомы.</span><span class="sxs-lookup"><span data-stu-id="ddd36-418">This section provides a quick introduction to PowerShell expressions for those users who may not be familiar with it.</span></span>  <span data-ttu-id="ddd36-419">Полные сведения о PowerShell можно найти в статье [Создание сценариев с помощью Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span><span class="sxs-lookup"><span data-stu-id="ddd36-419">Full details of PowerShell are available at [Scripting with Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx).</span></span> 

### <a name="powershell-expression-data-source"></a><span data-ttu-id="ddd36-420">Выражение PowerShell как источник данных </span><span class="sxs-lookup"><span data-stu-id="ddd36-420">PowerShell expression data source</span></span>
<span data-ttu-id="ddd36-421">Выражение PowerShell можно использовать в качестве источника данных для заполнения значения [параметра действия](#activities) результатами некоторого кода PowerShell.</span><span class="sxs-lookup"><span data-stu-id="ddd36-421">You can use a PowerShell expression as a data source to populate the value of an [activity parameter](#activities) with the results of some PowerShell code.</span></span>  <span data-ttu-id="ddd36-422">Это может быть одна строка кода, которая выполняет некоторые простые функции, или несколько строк, выполняющие определенную сложную логику.</span><span class="sxs-lookup"><span data-stu-id="ddd36-422">This could be a single line of code that performs some simple function or multiple lines that perform some complex logic.</span></span>  <span data-ttu-id="ddd36-423">Любые выходные данные команды, не присвоенные переменной, выводятся в значении параметра.</span><span class="sxs-lookup"><span data-stu-id="ddd36-423">Any output from a command that is not assigned to a variable is output to the parameter value.</span></span> 

<span data-ttu-id="ddd36-424">Например, следующая команда будет выводить текущую дату.</span><span class="sxs-lookup"><span data-stu-id="ddd36-424">For example, the following command would output the current date.</span></span> 

    Get-Date

<span data-ttu-id="ddd36-425">Следующие команды создают строку из текущей даты и присваивают ее переменной.</span><span class="sxs-lookup"><span data-stu-id="ddd36-425">The following commands build a string from the current date and assign it to a variable.</span></span>  <span data-ttu-id="ddd36-426">Затем содержимое переменной передается в выходные данные.</span><span class="sxs-lookup"><span data-stu-id="ddd36-426">The contents of the variable are then sent to the output</span></span> 

    $string = "The current date is " + (Get-Date)
    $string

<span data-ttu-id="ddd36-427">Следующие команды вычисляют текущую дату и возвращают строку, указывающую, является ли текущий день выходным или рабочим.</span><span class="sxs-lookup"><span data-stu-id="ddd36-427">The following commands evaluate the current date and return a string indicating whether the current day is a weekend or weekday.</span></span> 

    $date = Get-Date
    if (($date.DayOfWeek = "Saturday") -or ($date.DayOfWeek = "Sunday")) { "Weekend" }
    else { "Weekday" }


### <a name="activity-output"></a><span data-ttu-id="ddd36-428">Выходные данные действия</span><span class="sxs-lookup"><span data-stu-id="ddd36-428">Activity output</span></span>
<span data-ttu-id="ddd36-429">Чтобы использовать выходные данные предыдущего действия в модуле Runbook, используйте переменную $ActivityOutput со следующим синтаксисом.</span><span class="sxs-lookup"><span data-stu-id="ddd36-429">To use the output from a previous activity in the runbook, use the $ActivityOutput variable with the following syntax.</span></span>

    $ActivityOutput['Activity Label'].PropertyName

<span data-ttu-id="ddd36-430">Например, при наличии действия со свойством, которое требует имя виртуальной машины, можно использовать следующее выражение.</span><span class="sxs-lookup"><span data-stu-id="ddd36-430">For example, you may have an activity with a property that requires the name of a virtual machine in which case you could use the following expression.</span></span>

    $ActivityOutput['Get-AzureVm'].Name

<span data-ttu-id="ddd36-431">При наличии свойства, требующего объект виртуальной машины вместо одного только свойства, можно вернуть весь объект, используя следующий синтаксис.</span><span class="sxs-lookup"><span data-stu-id="ddd36-431">If the property that required the virtual machine object instead of just a property, then you would return the entire object using the following syntax.</span></span>

    $ActivityOutput['Get-AzureVm']

<span data-ttu-id="ddd36-432">Выходные данные действия также можно использовать в более сложном выражении следующего вида, добавляющем текст к имени виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="ddd36-432">You can also use the output of an activity in a more complex expression such as the following that concatenates text to the virtual machine name.</span></span>

    "The computer name is " + $ActivityOutput['Get-AzureVm'].Name


### <a name="conditions"></a><span data-ttu-id="ddd36-433">Условия</span><span class="sxs-lookup"><span data-stu-id="ddd36-433">Conditions</span></span>
<span data-ttu-id="ddd36-434">Используйте [операторы сравнения](https://technet.microsoft.com/library/hh847759.aspx) для сравнения значений или определения того, соответствует ли значение указанному шаблону.</span><span class="sxs-lookup"><span data-stu-id="ddd36-434">Use [comparison operators](https://technet.microsoft.com/library/hh847759.aspx) to compare values or determine if a value matches a specified pattern.</span></span>  <span data-ttu-id="ddd36-435">Оператор сравнения возвращает значение $true или $false.</span><span class="sxs-lookup"><span data-stu-id="ddd36-435">A comparison returns a value of either $true or $false.</span></span>

<span data-ttu-id="ddd36-436">Например, следующее условие определяет, *остановлена* ли виртуальная машина из действия *Get-AzureVM* в данный момент.</span><span class="sxs-lookup"><span data-stu-id="ddd36-436">For example, the following condition determines whether the virtual machine from an activity named *Get-AzureVM* is currently *stopped*.</span></span> 

    $ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped"

<span data-ttu-id="ddd36-437">Следующее условие проверяет, находится ли та же виртуальная машина в любом состоянии, кроме *остановлено*.</span><span class="sxs-lookup"><span data-stu-id="ddd36-437">The following condition checks whether the same virtual machine is in any state other than *stopped*.</span></span>

    $ActivityOutput["Get-AzureVM"].PowerState –ne "Stopped"

<span data-ttu-id="ddd36-438">Можно объединить несколько условий с помощью [логического оператора](https://technet.microsoft.com/library/hh847789.aspx), например **И** или **ИЛИ**.</span><span class="sxs-lookup"><span data-stu-id="ddd36-438">You can join multiple conditions using a [logical operator](https://technet.microsoft.com/library/hh847789.aspx) such as **-and** or **-or**.</span></span>  <span data-ttu-id="ddd36-439">Например, следующее условие проверяет, находится ли виртуальная машина из предыдущего примера в состоянии *остановлена* или *идет остановка*.</span><span class="sxs-lookup"><span data-stu-id="ddd36-439">For example, the following condition checks whether the same virtual machine in the previous example is in a state of *stopped* or *stopping*.</span></span>

    ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped") -or ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopping") 


### <a name="hashtables"></a><span data-ttu-id="ddd36-440">Хэш-таблицы</span><span class="sxs-lookup"><span data-stu-id="ddd36-440">Hashtables</span></span>
<span data-ttu-id="ddd36-441">[Хэш-таблицы](http://technet.microsoft.com/library/hh847780.aspx) представляют собой пары "имя-значение", которые удобны для получения набора значений.</span><span class="sxs-lookup"><span data-stu-id="ddd36-441">[Hashtables](http://technet.microsoft.com/library/hh847780.aspx) are name/value pairs that are useful for returning a set of values.</span></span>  <span data-ttu-id="ddd36-442">Свойства для определенных действий могут ожидать хэш-таблицу вместо простого значения.</span><span class="sxs-lookup"><span data-stu-id="ddd36-442">Properties for certain activities may expect a hashtable instead of a simple value.</span></span>  <span data-ttu-id="ddd36-443">Иногда хэш-таблицу называют словарем.</span><span class="sxs-lookup"><span data-stu-id="ddd36-443">You may also see as hashtable referred to as a dictionary.</span></span> 

<span data-ttu-id="ddd36-444">Хэш-таблицу можно создать, используя следующий синтаксис.</span><span class="sxs-lookup"><span data-stu-id="ddd36-444">You create a hashtable with the following syntax.</span></span>  <span data-ttu-id="ddd36-445">Хэш-таблица может содержать любое количество записей, каждая из которых определяется именем и значением.</span><span class="sxs-lookup"><span data-stu-id="ddd36-445">A hashtable can contain any number of entries but each is defined by a name and value.</span></span>

    @{ <name> = <value>; [<name> = <value> ] ...}

<span data-ttu-id="ddd36-446">Например, следующее выражение создает хэш-таблицу для использования в источнике данных для параметра действия, который ожидает хэш-таблицу со значениями для поиска в Интернете.</span><span class="sxs-lookup"><span data-stu-id="ddd36-446">For example, the following expression creates a hashtable to be used in the data source for an activity parameter that expected a hashtable with values for an internet search.</span></span>

    $query = "Azure Automation"
    $count = 10
    $h = @{'q'=$query; 'lr'='lang_ja';  'count'=$Count}
    $h

<span data-ttu-id="ddd36-447">В следующем примере выходные данные действия *Get Twitter Connection* используются для заполнения хэш-таблицы.</span><span class="sxs-lookup"><span data-stu-id="ddd36-447">The following example uses output from an activity called *Get Twitter Connection* to populate a hashtable.</span></span>

    @{'ApiKey'=$ActivityOutput['Get Twitter Connection'].ConsumerAPIKey;
      'ApiSecret'=$ActivityOutput['Get Twitter Connection'].ConsumerAPISecret;
      'AccessToken'=$ActivityOutput['Get Twitter Connection'].AccessToken;
      'AccessTokenSecret'=$ActivityOutput['Get Twitter Connection'].AccessTokenSecret}



## <a name="next-steps"></a><span data-ttu-id="ddd36-448">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="ddd36-448">Next Steps</span></span>
* <span data-ttu-id="ddd36-449">Чтобы приступить к работе с модулями Runbook рабочих процессов PowerShell, обратитесь к статье [Мой первый модуль Runbook рабочего процесса PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="ddd36-449">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 
* <span data-ttu-id="ddd36-450">Чтобы начать работу с графическими модулями Runbook, см. инструкции в статье [Первый графический Runbook](automation-first-runbook-graphical.md).</span><span class="sxs-lookup"><span data-stu-id="ddd36-450">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="ddd36-451">Чтобы получить дополнительные сведения о типах модулей Runbook, их преимуществах и ограничениях, обратитесь к статье [Типы модулей Runbook в службе автоматизации Azure](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="ddd36-451">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="ddd36-452">Сведения о том, как выполнять аутентификацию с помощью учетной записи запуска от имени службы автоматизации см. в статье [Проверка подлинности модулей Runbook в Azure с помощью учетной записи запуска от имени](automation-sec-configure-azure-runas-account.md).</span><span class="sxs-lookup"><span data-stu-id="ddd36-452">To understand how to authenticate using the Automation Run As account, see [Configure Azure Run As Account](automation-sec-configure-azure-runas-account.md)</span></span>

