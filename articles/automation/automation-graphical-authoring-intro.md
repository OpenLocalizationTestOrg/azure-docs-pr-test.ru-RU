---
title: "aaaGraphical разработки автоматизации Azure | Документы Microsoft"
description: "Графический разработки позволяет toocreate модулей Runbook для автоматизации Azure без работы с кодом. Эта статья содержит введение toographical разработки и все сведения hello требуется toostart создание графического модуля runbook."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 4b6f840c-e941-4293-a728-b33407317943
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: magoedte;bwren
ms.openlocfilehash: 6ddf18b992d5e5f7f4af95f344007a63ac498549
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="graphical-authoring-in-azure-automation"></a>Графическая разработка в службе автоматизации Azure
## <a name="introduction"></a>Введение
Графическое Создание и настройка позволяет toocreate модулей Runbook для автоматизации Azure без сложностей hello код Windows PowerShell или рабочий процесс PowerShell базового hello. Добавление действия toohello холст из библиотеки командлетов и модулей Runbook, связать их вместе и настройка tooform рабочего процесса.  Если вам приходилось работать с System Center Orchestrator или автоматизации управления службами (SMA), это должен выглядеть tooyou знакомы.   

Эта статья содержит введение toographical разработки и hello понятия, необходимые tooget начать создание графического модуля runbook.

## <a name="graphical-runbooks"></a>Графические модули Runbook
Все модули Runbook в службе автоматизации Azure представляют собой рабочие процессы Windows PowerShell.  Модули Runbook Graphical и графического рабочего процесса PowerShell создают PowerShell код, выполняемый работниками автоматизации hello, однако вы не можете tooview его или непосредственно изменить его.  Графический runbook может быть runbook графического рабочего процесса PowerShell преобразованный tooa и наоборот, но они не могут быть tooa преобразованные текстовые runbook. Текстовое существующего модуля runbook нельзя импортировать в hello графического редактора.  

## <a name="overview-of-graphical-editor"></a>Обзор графического редактора
Hello графический редактор можно открыть в hello портал Azure, создав или изменив графический runbook.

![Графическая рабочая область](media/automation-graphical-authoring-intro/runbook-graphical-editor.png)

Hello следующих разделах описаны элементы управления hello в графическом редакторе hello.

### <a name="canvas"></a>Холст
Hello холст является где проектируются в runbook.  Добавление действий из узлов hello hello библиотеки управления toohello runbook и их связь с ссылки toodefine hello логики hello runbook.

Можно использовать элементы управления hello hello нижней части холста toozoom hello и выхода из системы.

![Графическая рабочая область](media/automation-graphical-authoring-intro/runbook-canvas-controls.png)

### <a name="library-control"></a>Элемент управления "Библиотека"
Библиотека управления Hello указывается [действия](#activities) tooadd tooyour runbook.  Их следует добавить toohello холст, где можно соединить их tooother действия.  Он включает четыре раздела, описанные в следующей таблице hello.

| Раздел | Описание |
|:--- |:--- |
| Командлеты |Включает все командлеты hello, которые могут использоваться в модуле runbook.  Командлеты группируются по модулям.  Все модули hello, установленных в вашей учетной записи автоматизации будут доступны. |
| Модули Runbook |Включает hello модулей Runbook в учетной записи автоматизации. Они могут быть добавлены toobe toohello холст, используется в качестве дочерних модулей Runbook. Отображаются только runbooks hello же основной тип как hello редактируемого runbook; для Graphical runbooks только на основе PowerShell модули Runbook отображаются, хотя для графического рабочего процесса PowerShell модули Runbook отображаются только PowerShell основанных на рабочих процессах модулей Runbook. |
| Активы |Включает в себя hello [ресурсы автоматизации](http://msdn.microsoft.com/library/dn939988.aspx) в вашей учетной записи автоматизации, который может использоваться в модуле runbook.  При добавлении средств tooa runbook, он добавляет действия рабочего процесса, которое возвращает hello выбранного ресурса.  В случае hello ресурсы переменных, можно выбрать ли tooadd tooget действие hello переменной или заданы hello переменной. |
| Элемент управления "Runbook" |Содержит действия элемента управления "Runbook", которые могут использоваться в текущем модуле Runbook. Объект *связующей* принимает несколько входов и ожидает завершения всех перед продолжение hello рабочего процесса. Объект *кода* действие выполняется один или несколько строк кода PowerShell или рабочий процесс PowerShell, в зависимости от типа hello графический runbook.  Это действие можно использовать для пользовательского кода или функциональные возможности, которые трудно tooachieve с другими действиями. |

### <a name="configuration-control"></a>Элемент управления "Конфигурация"
Hello управления конфигурацией —, которое необходимо ввести сведения для объекта, выбранного на холсте hello. Hello свойств, доступных в этом элементе управления будет зависеть от типа выделенного объекта hello.  При выборе параметра в hello управления конфигурацией откроется дополнительных колонок в порядке tooprovide Дополнительные сведения.

### <a name="test-control"></a>Элемент управления "Тест"
При первом запуске графического редактора hello Hello управления теста не отображается. Он открывается, когда вы интерактивно [тестируете графический Runbook](#graphical-runbook-procedures).  

## <a name="graphical-runbook-procedures"></a>Процедуры графического Runbook
### <a name="exporting-and-importing-a-graphical-runbook"></a>Экспорт и импорт графического модуля Runbook
Можно экспортировать только опубликованная версия hello графический runbook.  Если hello runbook еще не опубликован, затем hello **экспорта опубликованных** кнопка будет неактивной.  При нажатии кнопки hello **экспорта опубликованных** кнопку, hello runbook — загруженный tooyour локального компьютера.  Имя Hello hello файла совпадает с именем hello hello модуля Runbook с *graphrunbook* расширения.

![Экспортировать опубликованный](media/automation-graphical-authoring-intro/runbook-export.png)

Можно импортировать файл модуля runbook графический или графического рабочего процесса PowerShell, выбрав hello **импорта** параметр при добавлении модуля runbook.   При выборе tooimport hello файл можно сохранить hello же **имя** или укажите новое.  Hello поле типа Runbook будет отображаться hello тип runbook после его оценивает файл hello и при попытке tooselect другого типа, не является правильным, сообщение появится отметить потенциальных конфликтов и во время преобразования, возможно, существуют синтаксические ошибки.  

![Импортировать Runbook](media/automation-graphical-authoring-intro/runbook-import-revised20165.png)

### <a name="testing-a-graphical-runbook"></a>Тестирование графического Runbook
Hello черновик runbook можно протестировать в hello портал Azure, оставив hello опубликованной версии модуля runbook hello без изменений, или перед ее публикации модуля runbook можно протестировать. Это позволяет перед заменой опубликованной версии hello вы tooverify, Здравствуйте, runbook работает правильно. При тестировании модуля hello runbook выполняется черновик и все действия, которые он выполняет. Журнал заданий не создается, но выходные данные отображаются в области вывода теста hello. 

Откройте Управление проверкой hello для модуля runbook, открыв hello runbook для редактирования и выберите команду hello **области тестов** кнопки.

![Кнопка панели "Тест"](media/automation-graphical-authoring-intro/runbook-edit-test-pane.png)

Управление проверкой Hello предложит все входные параметры и hello runbook можно запустить, щелкнув hello **запустить** кнопки.

![Кнопки элемента управления "Тест"](media/automation-graphical-authoring-intro/runbook-test-start.png)

### <a name="publishing-a-graphical-runbook"></a>Публикация графического Runbook
У каждого Runbook в службе автоматизации Azure есть черновая и опубликованная версия. Hello только опубликованная версия является доступной toobe запуска, и можно изменить только hello черновую версию. не влияет на все изменения toohello черновую версию Hello опубликованную версию. При готовности toobe доступных hello черновую версию публикации hello черновик заменяет опубликованную версию hello.

Графический runbook можно опубликовать, открыв hello runbook для редактирования, а затем щелкнув hello **публикации** кнопки.

![Кнопка "Опубликовать"](media/automation-graphical-authoring-intro/runbook-edit-publish.png)

Если Runbook еще не опубликован, он находится в состоянии **Новый**.  После публикации он находится в состоянии **Опубликован**.  При редактировании hello runbook после ее публикации и имеют разные hello черновик и опубликованную версии hello runbook находится в состоянии **в режиме изменения**.

![Состояния Runbook](media/automation-graphical-authoring-intro/runbook-statuses-revised20165.png) 

Также имеется hello параметр toorevert toohello опубликованную версию модуля Runbook.  Отбрасывает все изменения, внесенные с момента последней публикации hello runbook и заменяет hello черновик hello runbook hello опубликованную версию.

![Восстановить toopublished кнопки](media/automation-graphical-authoring-intro/runbook-edit-revert-published.png)

## <a name="activities"></a>Действия
Действия являются стандартными блоками hello runbook.  Действием может быть командлет PowerShell, дочерний Runbook или действие рабочего процесса.  Добавьте runbook toohello активности, щелкнув правой кнопкой мыши его в hello библиотеки управления и выбрав **добавить toocanvas**.  Затем, можно щелкнуть и перетащить его в любом месте hello холсте, который как tooplace действие hello.  Hello расположение hello hello действия на холсте hello не влияет на работу hello runbook hello каким-либо образом.  Вы можете макета модуль runbook, однако его найти наиболее подходящий toovisualize своей работы. 

![Добавить toocanvas](media/automation-graphical-authoring-intro/add-to-canvas-revised20165.png)

Выберите действие hello на холсте tooconfigure hello его свойства и параметры, в колонке конфигурации hello.  Вы можете изменить hello **метка** из toosomething hello действия, описательное tooyou.  исходным командлетом Hello по-прежнему выполняется, его отображаемое имя, которое будет использоваться в графическом редакторе hello простое изменение.  Hello метки должны быть уникальными в пределах hello runbook. 

### <a name="parameter-sets"></a>Наборы параметров
Набор параметров определяет hello обязательные и необязательные параметры принимают значения для определенного командлета.  У каждого командлета имеется по крайней мере один набор параметров, а у некоторых их несколько.  Если у командлета несколько наборов параметров, перед настройкой параметров необходимо выбрать, какой из них будет использоваться.  Hello параметры, которые можно настроить будет зависеть от выбрать набор параметров hello.  Можно изменить набор параметров hello, используемые действия, выбрав **параметру** и выбрав другой набор.  В этом случае все настроенные значения параметров будут потеряны.

В следующем примере hello командлет Get-AzureRmVM hello имеет три наборов параметров.  Не удается настроить значения параметров только после выбора одного из наборов параметров hello.  Hello ListVirtualMachineInResourceGroupParamSet набор параметров для возврата всех виртуальных машин в группе ресурсов и имеет один необязательный параметр.  Hello GetVirtualMachineInResourceGroupParamSet предназначен для указания hello виртуальной машины требуется tooreturn и имеет два обязателен и один необязательный параметр.

![Набор параметров](media/automation-graphical-authoring-intro/get-azurermvm-parameter-sets.png)

#### <a name="parameter-values"></a>Значения параметров
При указании значения для параметра выбирается toodetermine источника данных, как будет указано значение hello.  Hello источники данных, доступные для определенного параметра будет зависеть от hello допустимые значения для этого параметра.  Например, значение NULL будет недоступно для параметра, который не допускает значений NULL.

| Источник данных | Описание |
|:--- |:--- |
| Постоянное значение |Введите значение для параметра hello.  Доступно только для hello следующие типы данных: Int32, Int64, String, Boolean, DateTime, коммутатор. |
| Выходные данные действия |Выходные данные из действия, который предшествует hello текущего действия в рабочем процессе hello.  Будут перечислены все допустимые действия.  Выберите только что toouse действие hello выходные данные для значения параметра hello.  Если действие hello выводит объект с несколькими свойствами, затем можно ввести в поле имя hello hello свойства после выбора действия hello. |
| Входные данные Runbook |Выберите входной параметр модуля runbook в качестве входного toohello параметр действия. |
| Ресурс переменной |Выберите переменную службы автоматизации в качестве входных данных. |
| Ресурс учетных данных |Выберите учетные данные службы автоматизации в качестве входных данных. |
| Ресурс сертификата |Выберите сертификат службы автоматизации в качестве входных данных. |
| Ресурс подключения |Выберите подключение службы автоматизации в качестве входных данных. |
| Выражение PowerShell |Укажите простое [выражение PowerShell](#powershell-expressions).  Hello выражение оценивается перед hello действия и hello результат, используется в качестве значения параметра hello.  Можно использовать переменные toorefer toohello выходных данных действия или входной параметр модуля runbook. |
| Не настроено |Очищает все значения, которые были настроены ранее. |

#### <a name="optional-additional-parameters"></a>Необязательные дополнительные параметры
Все командлеты будет hello tooprovide Дополнительные параметры.  Это могут быть общие параметры PowerShell или другие пользовательские параметры.  Появится текстовое поле, где можно будет указать параметры с помощью синтаксиса PowerShell.  Например, hello toouse **Verbose** общий параметр, необходимо указать **«-Verbose: $True»**.

### <a name="retry-activity"></a>Повтор действий
**Режим повтора** позволяет toobe действия запускать несколько раз, пока не будет выполнено определенное условие, как цикл.  Эту функцию можно использовать для действий, которые должны выполняться неоднократно, являются подвержен ошибкам и может требуется несколько попыток для успешного выполнения или тестирования hello выходные данные действия hello для допустимых данных.    

Включая для действия режим повтора, можно задать условие и значение задержки.  Задержка Hello — hello время (в секунд или минут), hello runbook будет ожидать перед его выполнением действия hello.  Если указано без задержки, действие hello запускается снова сразу после его завершения. 

![Задержка повтора действия](media/automation-graphical-authoring-intro/retry-delay.png)

Условие повтора Hello — PowerShell выражение, которое оценивается после каждого действия hello времени выполнения.  Если выражение hello разрешается tooTrue, затем действие hello запускается снова.  Если выражение hello разрешается tooFalse hello действия не запустите еще раз и hello runbook перемещается на следующее действие toohello. 

![Задержка повтора действия](media/automation-graphical-authoring-intro/retry-condition.png)

Hello повторить условие можно использовать переменную с именем $RetryData, предоставляющий доступ tooinformation о повторных отправках действие hello.  Эта переменная имеет свойства hello в hello в следующей таблице.

| Свойство | Описание |
|:--- |:--- |
| NumberOfAttempts |Число запусков действие hello. |
| Выходные данные |Выходные данные hello последнего запуска действия hello. |
| TotalDuration |Истекло время, истекшее с момента запуска действия hello hello первый раз. |
| StartedAt |Время в действии hello в формате UTC в момент первого запуска. |

Ниже приведены примеры условий, при которых действие выполняется повторно.

    # Run hello activity exactly 10 times.
    $RetryData.NumberOfAttempts -ge 10 

    # Run hello activity repeatedly until it produces any output.
    $RetryData.Output.Count -ge 1 

    # Run hello activity repeatedly until 2 minutes has elapsed. 
    $RetryData.TotalDuration.TotalMinutes -ge 2

После настройки Условие повтора для действия, действие hello включает два визуальные подсказки tooremind вы.  Один представлены в действии hello и hello других — при проверке конфигурации hello hello действия.

![Визуальные индикаторы повторения действия](media/automation-graphical-authoring-intro/runbook-activity-retry-visual-cue.png)

### <a name="workflow-script-control"></a>Элемент управления сценария рабочего процесса
Элемент управления код — это специальное действие, которое принимает сценария PowerShell или рабочий процесс PowerShell, в зависимости от типа hello графический runbook, создаваемую в функциональность tooprovide порядка, в противном случае недоступен.  Он не может принимать параметры, но может использовать переменные для выходных данных действия и входных параметров Runbook.  Все выходные данные действия hello добавляется toohello databus без не исходящего канала, в котором оно добавляется toohello выходные данные модуля runbook hello.

Например hello следующий код выполняет с помощью runbook входной переменной с именем $NumberOfDays вычисления дат.  Затем отправляет рассчитанные Дата и время в виде toobe выходные данные, использовать для последующих действий в hello runbook.

    $DateTimeNow = (Get-Date).ToUniversalTime()
    $DateTimeStart = ($DateTimeNow).AddDays(-$NumberOfDays)}
    $DateTimeStart


## <a name="links-and-workflow"></a>Связи и рабочий процесс
**Связь** в графическом Runbook соединяет два действия.  Он отображается на полотне hello как стрелка с hello источника действия toohello конечное действие.  действия Hello работают в направлении hello hello стрелки с целевое действие hello запуск после завершения исходного действия hello.  

### <a name="create-a-link"></a>Создание связи
Создаете связь между двумя действиями, выбрав hello исходное действие и выберите круг hello внизу hello hello фигуры.  Перетащите hello стрелка toohello целевое действие и выпуска.

![Создание связи](media/automation-graphical-authoring-intro/create-link-revised20165.png)

Выберите ссылку tooconfigure hello его свойства в колонке конфигурации hello.  Сюда входят hello тип связи, который описан в следующей таблице hello.

| Тип связи | Описание |
|:--- |:--- |
| Конвейер |Hello целевое действие выполняется один раз для каждого выхода объекта из исходного действия hello.  Конечное действие Hello не выполняется, если исходное действие hello результатов в выходные данные.  Выходные данные действия источника hello доступен в виде объекта. |
| Последовательность |Hello конечное действие запускается только один раз.  Он получает массив объектов от исходного действия hello.  Выходные данные действия источника hello доступен в виде массива объектов. |

### <a name="starting-activity"></a>Запуск действия
Графический Runbook начнется с любых действий, у которых нет входящей связи.  Часто это будут только одно действие, который будет действовать как hello начала действия для модуля runbook hello.  Если Входящие ссылки не имеют несколько действий, hello runbook запустится, запустив их в параллельном режиме.  Она будет следовать toorun ссылки hello другие действия при завершении каждой.

### <a name="conditions"></a>Условия
При указании условия связи hello конечное действие запускается только если условие hello разрешается tootrue.  Переменная $ActivityOutput обычно используется в выходных данных hello условие tooretrieve из hello исходного действия.  

Для конвейера ссылки задать условие для одного объекта и hello условие вычисляется для каждого выхода объекта действием источника hello.  Конечное действие Hello затем выполняется для каждого объекта, который удовлетворяет условию hello.  Например, с исходное действие Get-AzureRmVm hello, используя синтаксис может использоваться для условного конвейера ссылку tooretrieve только для виртуальных машин в группу ресурсов с именем Здравствуйте, *Group1*.  

    $ActivityOutput['Get Azure VMs'].Name -match "Group1"

Для ссылки последовательности hello условие вычисляется только один раз с момента возвращается один массив, содержащий все объекты выходные данные действия источника hello.  По этой причине ссылку последовательности не может использоваться для фильтрации как ссылка конвейера, но просто определит ли выполняется следующее действие hello. Возьмем для примера следующий набор действий в нашем runbook запустить ВМ hello.<br> ![Условная связь с последовательностями](media/automation-graphical-authoring-intro/runbook-conditional-links-sequence.png)<br>
Существуют три ссылки другую последовательность, проверке значений предоставлено tootwo runbook входных параметров, представляющих имя виртуальной Машины и имя группы ресурсов в порядке toodetermine, являющийся tootake соответствующее действие hello — запуск одной виртуальной Машины, запуск всех виртуальных машин в hello Группа ресурсов, или все виртуальные машины в подписке.  Для hello последовательности взаимосвязь Connect tooAzure и Get одной виртуальной Машины Вот логике условие hello.

    <# 
    Both VMName and ResourceGroupName runbook input parameters have values 
    #>
    (
    (($VMName -ne $null) -and ($VMName.Length -gt 0))
    ) -and (
    (($ResourceGroupName -ne $null) -and ($ResourceGroupName.Length -gt 0))
    )

При использовании условных связей при условии hello будут фильтроваться hello данные, доступные из hello источника действие tooother действия в этой ветви.  Если действие hello источника toomultiple ссылки, затем hello данных tooactivities, доступные в каждой ветви будет зависеть от условия hello в ссылке hello, подключающейся toothat ветви.

Здравствуйте, например, **AzureRmVm начала** действие в runbook hello ниже запускаются все виртуальные машины.  Действие включает две условные связи.  Первый условных связей Hello используется выражение hello *$ActivityOutput [«Start-AzureRmVM»]. IsSuccessStatusCode - eq $true* toofilter Если hello начала AzureRmVm действие завершено успешно.  Во-вторых, Hello использует выражение hello *$ActivityOutput [«Start-AzureRmVM»]. IsSuccessStatusCode - ne $true* toofilter, если сбой hello AzureRmVm начала действия toostart hello виртуальной машины.  

![Пример условной связи](media/automation-graphical-authoring-intro/runbook-conditional-links.png)

Любое действие, которое следует первую ссылку hello и использует действие hello выходных данных Get-AzureVM будет получена только hello виртуальных машин, которые были запущены в момент hello выполнения Get-AzureVM.  Все действия, следующего hello Вторая ссылка будет получена только hello hello виртуальных машин, которые были остановлены во время hello выполнения Get-AzureVM.  Любое действие, по ссылке hello третий получит все виртуальные машины, независимо от их состояние выполнения.

### <a name="junctions"></a>Соединения
Соединение — это специальное действие, которое будет ожидать завершения всех входящих ветвей.  Это позволяет toorun несколько действий в параллельном режиме и убедитесь, что все завершены перед переходом.

Хотя у соединения может быть неограниченное число входящих связей, конвейерной может быть только одна из них.  Hello число входящих ссылок последовательности не ограничено.  Будет разрешен toocreate hello соединения с несколькими Входящие ссылки конвейера и сохранить hello runbook, но он завершится ошибкой при запуске.

Hello пример является частью модуля runbook, который запускает набор виртуальных машин, хотя загрузка исправления toobe одновременно применять toothose машины.  Точку соединения является используется tooensure, оба процесса выполняются перед продолжением hello runbook.

![Соединение](media/automation-graphical-authoring-intro/runbook-junction.png)

### <a name="cycles"></a>Циклические процессы
Цикл — Если целевое действие связывается обратно tooits источника действия или tooanother действия, что в конечном итоге ссылающемся tooits источника.  В настоящее время использование циклических процессов в графической разработке запрещено.  Если Runbook содержит циклический процесс, он будет сохранен правильно, но при его выполнении произойдет ошибка.

![Циклический процесс](media/automation-graphical-authoring-intro/runbook-cycle.png)

### <a name="sharing-data-between-activities"></a>Обмен данными между действиями
Любые данные, которые выводятся из действия с исходящей ссылки записывается toohello *databus* для hello runbook.  Любое действие в hello runbook можно использовать данные на значения параметров toopopulate databus hello или включить в коде скрипта.  Действия могут обращаться к hello выходных данных любого предыдущего действия в рабочем процессе hello.     

Способ записи toohello databus hello данных зависит от типа hello ссылку на действие hello.  Для **конвейера**, hello данных выводится как кратные объекты.  Для **последовательности** связывания, hello данных выводится в виде массива.  Если имеется только одно значение, оно будет выведено в виде одноэлементного массива.

Получить доступ к данным на шине данных hello одним из двух способов.  Сначала использует **выходные данные действия** источника данных toopopulate параметр другого действия.  Если вывод hello объекта, можно указать одно свойство.

![Выходные данные действия](media/automation-graphical-authoring-intro/activity-output-datasource-revised20165.png)

Вы также можете получить hello выходных данных действия в **PowerShell выражение** источника данных или из **скрипта рабочего процесса** действия с переменной ActivityOutput.  Если вывод hello объекта, можно указать одно свойство.  Переменные ActivityOutput используют синтаксис hello.

    $ActivityOutput['Activity Label']
    $ActivityOutput['Activity Label'].PropertyName 

### <a name="checkpoints"></a>Контрольные точки
В графическом модуле Runbook рабочего процесса PowerShell можно указать [контрольные точки](automation-powershell-workflow.md#checkpoints) , выбрав параметр *Создать контрольную точку модуля Runbook* для любого действия.  В этом случае toobe контрольной точки, после выполняется действие hello.

![Контрольная точка](media/automation-graphical-authoring-intro/set-checkpoint.png)

Контрольные точки доступны только в графических модулях Runbook рабочего процесса PowerShell (соответственно, в графических модулях Runbook они недоступны).  Если hello runbook использует командлеты Azure, необходимо выполнить любое действие контрольными точками с Add-AzureRMAccount на случай hello runbook приостанавливается и перезапускает с этой контрольной точки на другому рабочему процессу. 

## <a name="authenticating-tooazure-resources"></a>Проверка подлинности tooAzure ресурсы
Модули Runbook в автоматизации Azure, управления ресурсами Azure потребуется tooAzure проверки подлинности.  Hello [учетная запись запуска от имени](automation-offering-get-started.md#creating-an-automation-account) tooaccess метод по умолчанию hello ресурсам диспетчера ресурсов Azure в подписке с Runbook автоматизации — (также назывались tooas субъекта-службы).  Можно добавить этот графический runbook tooa функциональные возможности, добавив hello **AzureRunAsConnection** средства подключения, которая использует hello PowerShell [Get-AutomationConnection](https://technet.microsoft.com/library/dn919922%28v=sc.16%29.aspx) командлет и [Добавить AzureRmAccount](https://msdn.microsoft.com/library/mt619267.aspx) холст toohello командлета. Это продемонстрировано в следующий пример hello.<br>![Действия проверки подлинности запуска от имени](media/automation-graphical-authoring-intro/authenticate-run-as-account.png)<br>
постоянное значение источника данных с именем AzureRunAsConnection настраивается Hello действия получения запуска как соединение (т. е. Get-AutomationConnection).<br>![Конфигурация подключения запуска от имени](media/automation-graphical-authoring-intro/authenticate-runas-parameterset.png)<br>
следующее действие Hello, Add-AzureRmAccount добавляет проверку подлинности hello запуска от имени учетной записи для использования в hello runbook.<br>
![Набор параметров Add-AzureRmAccount](media/automation-graphical-authoring-intro/authenticate-conn-to-azure-parameter-set.png)<br>
Для параметров hello **APPLICATIONID**, **CERTIFICATETHUMBPRINT**, и **TENANTID** требуется toospecify hello имя свойства hello в путь к полю hello поскольку Действие Hello выводит объект с несколькими свойствами.  В противном случае при выполнении hello runbook завершится ошибкой при tooauthenticate.  Это необходимых минимальное tooauthenticate runbook с hello Запуск от имени учетной записи.

toomaintain обратной совместимости для подписчиков, создавшим автоматизации учетной записи с помощью [учетная запись пользователя Azure AD](automation-create-aduser-account.md) toomanage классического развертывания Azure или для ресурсов Azure Resource Manager hello tooauthenticate метод командлет Add-AzureAccount hello с [актива учетных данных](automation-credentials.md) , представляющий пользователя с toohello доступа учетной записи Azure Active Directory.

Графический runbook tooa этой функции можно добавить путем добавления холст toohello актива учетных данных, с последующим действием Add-AzureAccount.  -AzureAccount используется действие hello учетных данных для входных данных.  Это продемонстрировано в следующий пример hello.

![Действия аутентификации](media/automation-graphical-authoring-intro/authentication-activities.png)

У вас есть tooauthenticate в начале hello hello runbook и после каждой контрольной точки.  Это означает добавление действия Add-AzureAccount после любого действия Checkpoint-Workflow. Добавление учетных данных не обязательно действия может использовать hello же 

![Выходные данные действия](media/automation-graphical-authoring-intro/authentication-activity-output.png)

## <a name="runbook-input-and-output"></a>Входные и выходные данные Runbook
### <a name="runbook-input"></a>Входные данные Runbook
Runbook может потребовать ввода, либо у пользователя при запуске runbook hello через портал Azure hello или из другого модуля runbook, если hello текущей реализации используется в качестве дочернего.
Например если у вас есть runbook, который создает виртуальную машину, может потребоваться tooprovide сведения, такие как имя hello hello виртуальной машины и другие свойства каждый раз при запуске hello runbook.  

Для приема входных данных Runbook можно определить один или несколько входных параметров.  Укажите значения для этих параметров запуска runbook hello каждый раз.  При запуске модуля runbook с hello Azure portal предложит вам tooprovide значения для hello каждого hello runbook входных параметров.

Входные параметры для модуля runbook можно открыть, щелкнув hello **ввод и вывод** кнопку на панели инструментов runbook hello.  

![Входные и выходные данные Runbook](media/automation-graphical-authoring-intro/runbook-edit-input-output.png) 

При этом откроется hello **входной и выходной** элемента управления, в котором можно изменить существующий входной параметр или создайте новую, нажав кнопку **добавить входные данные**. 

![Добавить входные данные](media/automation-graphical-authoring-intro/runbook-edit-add-input.png)

Каждый входной параметр определяется свойствами hello в hello в следующей таблице.

| Свойство | Описание |
|:--- |:--- |
| Имя |Hello уникальное имя параметра hello.  Оно может содержать только буквы или цифры и не может содержать пробел. |
| Описание |Необязательное описание для входного параметра hello. |
| Тип |Тип данных для значения параметра hello ожидалось.  Hello портал Azure выведет соответствующий элемент управления для типа данных hello для каждого параметра при выполнении запроса на ввод. |
| Обязательно |Указывает, должно быть указано значение для параметра hello.  не удается запустить Hello runbook, если не указано значение для каждого обязательный параметр, который не имеет определенное значение по умолчанию. |
| По умолчанию |Указывает, какое значение используется для параметра hello, если значение не указано.  Это может быть NULL или какое-нибудь определенное значение. |

### <a name="runbook-output"></a>Выходные данные Runbook
Данные, созданные действием, у которого нет исходящей ссылки будут добавлены toohello [выходные данные модуля runbook hello](http://msdn.microsoft.com/library/azure/dn879148.aspx).  выходные данные Hello сохраняется вместе с hello задание runbook и при доступных tooa родительского модуля hello runbook используется в качестве дочернего.  

## <a name="powershell-expressions"></a>Выражения PowerShell
Одно из преимуществ hello графический разработки предоставляет возможность hello toobuild runbook с минимальными знаниями PowerShell.  В настоящее время, следует соблюдать tooknow немного PowerShell на то, что и для заполнения определенных [значения параметров](#activities) и для параметра [условий связываются](#links-and-workflow).  Этот раздел содержит краткое введение tooPowerShell выражения для тех пользователей, которые не знакомы с ним.  Полные сведения о PowerShell можно найти в статье [Создание сценариев с помощью Windows PowerShell](http://technet.microsoft.com/library/bb978526.aspx). 

### <a name="powershell-expression-data-source"></a>Выражение PowerShell как источник данных 
Можно использовать выражение PowerShell в качестве источника toopopulate hello значением [параметр действия](#activities) с результатами hello кода PowerShell.  Это может быть одна строка кода, которая выполняет некоторые простые функции, или несколько строк, выполняющие определенную сложную логику.  Любые выходные данные команды, не назначенный tooa переменная является значение параметра toohello выходных данных. 

Например следующую команду hello отобразятся hello текущую дату. 

    Get-Date

Hello следующие команды построения строки из hello текущую дату и присвоить его переменной tooa.  Hello содержимое переменной hello отправляются toohello выходных данных 

    $string = "hello current date is " + (Get-Date)
    $string

Hello следующие команды оценки hello текущую дату и возвращающие строку, указывающее, доступен ли hello текущий день выходным или день недели. 

    $date = Get-Date
    if (($date.DayOfWeek = "Saturday") -or ($date.DayOfWeek = "Sunday")) { "Weekend" }
    else { "Weekday" }


### <a name="activity-output"></a>Выходные данные действия
toouse hello выходных данных из предыдущего действия в runbook hello, использовать переменную hello $ActivityOutput с hello, используя синтаксис.

    $ActivityOutput['Activity Label'].PropertyName

Например, имеется действие, свойства, которое требует hello имя виртуальной машины в этом случае можно использовать следующее выражение hello.

    $ActivityOutput['Get-AzureVm'].Name

Если вернет hello свойство, которое требуется hello объект виртуальной машины, а не только свойства, то можно с помощью весь объект hello hello синтаксис.

    $ActivityOutput['Get-AzureVm']

Можно также использовать результаты hello действия в более сложных выражений, например следующие hello, объединяющем имя виртуальной машины toohello текста.

    "hello computer name is " + $ActivityOutput['Get-AzureVm'].Name


### <a name="conditions"></a>Условия
Используйте [операторы сравнения](https://technet.microsoft.com/library/hh847759.aspx) toocompare значения или определения, если значение совпадает с заданным шаблоном.  Оператор сравнения возвращает значение $true или $false.

Например, следующие условия hello определяет ли hello виртуальной машины из действия с именем *Get-AzureVM* в настоящее время *остановлена*. 

    $ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped"

Hello следующие условия проверки ли hello же виртуальная машина находится в любое состояние, отличное от *остановлена*.

    $ActivityOutput["Get-AzureVM"].PowerState –ne "Stopped"

Можно объединить несколько условий с помощью [логического оператора](https://technet.microsoft.com/library/hh847789.aspx), например **И** или **ИЛИ**.  Например, следующие hello условия проверки ли hello одной виртуальной машине в предыдущем примере hello находится в состоянии *остановлена* или *остановка*.

    ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopped") -or ($ActivityOutput["Get-AzureVM"].PowerState –eq "Stopping") 


### <a name="hashtables"></a>Хэш-таблицы
[Хэш-таблицы](http://technet.microsoft.com/library/hh847780.aspx) представляют собой пары "имя-значение", которые удобны для получения набора значений.  Свойства для определенных действий могут ожидать хэш-таблицу вместо простого значения.  Можно также отобразить, хэш-таблица называется tooas словарь. 

Привет, используя синтаксис для создания хэш-таблицы.  Хэш-таблица может содержать любое количество записей, каждая из которых определяется именем и значением.

    @{ <name> = <value>; [<name> = <value> ] ...}

Например hello следующее выражение создает toobe хэш-таблицы, используемое в источнике данных hello параметра действия, которое требуется хэш-таблицу со значениями для поиска в Интернете.

    $query = "Azure Automation"
    $count = 10
    $h = @{'q'=$query; 'lr'='lang_ja';  'count'=$Count}
    $h

Hello следующий пример использует выходные данные действие с именем *получить Twitter подключения* toopopulate хэш-таблицы.

    @{'ApiKey'=$ActivityOutput['Get Twitter Connection'].ConsumerAPIKey;
      'ApiSecret'=$ActivityOutput['Get Twitter Connection'].ConsumerAPISecret;
      'AccessToken'=$ActivityOutput['Get Twitter Connection'].AccessToken;
      'AccessTokenSecret'=$ActivityOutput['Get Twitter Connection'].AccessTokenSecret}



## <a name="next-steps"></a>Дальнейшие действия
* tooget к работе с PowerShell модули Runbook рабочего процесса, в разделе [Мой первый runbook рабочего процесса PowerShell](automation-first-runbook-textual.md) 
* tooget к работе с графический Runbook в разделе [Мой первый графический runbook](automation-first-runbook-graphical.md)
* в разделе tooknow Дополнительные сведения о типах runbook, их преимущества и ограничения, [типов runbook службы автоматизации Azure](automation-runbook-types.md)
* toounderstand tooauthenticate с помощью автоматизации Запуск от имени учетной записи, "hello" в статье [Настройка Azure учетная запись запуска от имени](automation-sec-configure-azure-runas-account.md)

