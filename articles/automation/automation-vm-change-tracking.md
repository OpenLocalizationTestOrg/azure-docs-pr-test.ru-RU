---
title: "Отслеживание изменений в виртуальных машинах Azure | Документация Майкрософт"
description: "Используйте функцию отслеживания изменений, чтобы отслеживать изменения в файлах и реестрах на виртуальных машинах."
services: automation
documentationcenter: automation
author: georgewallace
manager: carmonm
editor: tysonn
tags: azure-service-management
ms.assetid: 
ms.service: automation
ms.devlang: 
ms.topic: article
ms.tgt_pltfrm: 
ms.workload: infrastructure
ms.date: 09/25/2017
ms.author: gwallace
ms.custom: 
ms.openlocfilehash: 3a661fada2e768c2206183c125593d019b557c1d
ms.sourcegitcommit: 0e4491b7fdd9ca4408d5f2d41be42a09164db775
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/14/2017
---
# <a name="track-changes-in-your-azure-virtual-machines"></a>Отслеживание изменений в виртуальных машинах Azure

Включив функцию отслеживания изменений, вы можете отслеживать изменения в файлах и разделах реестра Windows на виртуальных машинах. что, в свою очередь, позволяет точно определять проблемы с работоспособностью.

Включить функцию отслеживания изменений можно непосредственно на виртуальной машине Azure.

Если у вас нет виртуальной машины Azure, создайте ее, следуя инструкциям в статье о [быстром запуске в Windows](../virtual-machines/windows/quick-create-portal.md) или [быстром запуске в Linux](../virtual-machines/linux/quick-create-portal.md).

## <a name="sign-in-to-the-azure-portal"></a>Выполните вход на портал Azure.
Войдите на [портале Azure](https://portal.azure.com/).

## <a name="enable-change-tracking-for-an-azure-virtual-machine"></a>Включение функции отслеживания изменений виртуальной машины Azure

1. В левой области на портале Azure выберите **Виртуальные машины**.
2. Затем выберите виртуальную машину в списке.
3. В окне виртуальной машины в разделе **Операции** выберите **Отслеживание изменений**. 

   ![Отслеживание изменений подключенной виртуальной машины](./media/automation-vm-change-tracking/change-onboard-vm-blade.png)  
    Откроется окно **Включение управления обновлениями**.

    Будет выполнена проверка, определяющая, включено ли отслеживание изменений для этой виртуальной машины. Если отслеживание изменений не включено, появится баннер, с помощью которого можно включить решение.

   ![Баннер конфигурации развертывания функции отслеживания изменений](./media/automation-vm-change-tracking/change-onboard-banner.png)

4. Выберите баннер, чтобы включить решение. Если у вас нет следующих элементов, они будут добавлены автоматически:

   * [Рабочая область Log Analytics](../log-analytics/log-analytics-overview.md).
   * [Учетная запись службы автоматизации](../automation/automation-offering-get-started.md).

5. Выберите рабочую область Log Analytics для хранения журналов данных из отслеживания изменений и учетную запись службы автоматизации для отслеживания изменений, а затем выберите **Включить**.  
    Строка состояния уведомляет о включении решения. Этот процесс может занять до 15 минут.

## <a name="configure-change-tracking"></a>Настройка функции отслеживания изменений

Когда функция отслеживания изменений будет включена, отобразится окно **Отслеживание изменений**. 

Выберите **Изменить параметры**, чтобы выбрать файлы и разделы реестра, изменения которых необходимо отследить.

   ![Изменения параметров функции отслеживания изменений](./media/automation-vm-change-tracking/change-edit-settings.png)

   Откроется окно **Конфигурация рабочей области**. 

В окне **Конфигурация рабочей области** добавьте разделы реестра Windows, файлы Windows или файлы Linux, которые нужно отслеживать, как описано в следующих трех разделах.

### <a name="add-a-windows-registry-key"></a>Добавление раздела реестра Windows

1. На вкладке **Реестр Windows** выберите **Добавить**.  
    Откроется окно **Добавление реестра Windows для отслеживания изменений**.

   ![Добавление реестра для отслеживания изменений](./media/automation-vm-change-tracking/change-add-registry.png)

2. Для параметра **Включено** установите значение **True**.
3. В поле **Имя элемента** введите понятное имя.
4. (Необязательно.) В поле **Группа** введите имя группы.
5. В поле **Раздел реестра Windows** добавьте имя раздела реестра для отслеживания.
6. Щелкните **Сохранить**.

### <a name="add-a-windows-file"></a>Добавление файлов Windows

1. На вкладке **Файлы Windows** выберите **Добавить**.  
    Откроется окно **Добавление файла Windows для отслеживания изменений**.

   ![Добавление файла Windows для отслеживания изменений](./media/automation-vm-change-tracking/change-add-win-file.png)

2. Для параметра **Включено** установите значение **True**.
3. В поле **Имя элемента** введите понятное имя.
4. (Необязательно.) В поле **Группа** введите имя группы.
5. В поле **Укажите путь** введите полный путь и имя файла для отслеживания.
6. Щелкните **Сохранить**.

### <a name="add-a-linux-file"></a>Добавление файла Linux

1. На вкладке **Файлы Linux** выберите **Добавить**.  
    Откроется окно **Добавление файла Linux для отслеживания изменений**.

   ![Добавление файла Linux для отслеживания изменений](./media/automation-vm-change-tracking/change-add-linux-file.png)

2. Для параметра **Включено** установите значение **True**.
3. В поле **Имя элемента** введите понятное имя.
4. (Необязательно.) В поле **Группа** введите имя группы.
5. В поле **Укажите путь** введите полный путь и имя файла для отслеживания.
6. В поле **Тип пути** выберите **Файл** или **Каталог**.
7. В разделе **Рекурсия** выберите **Вкл.** для отслеживания изменений указанного пути и всех файлов и путей в нем. Чтобы отслеживать только выбранный файл или путь, выберите **Выкл**.
8. В разделе **Использовать sudo** выберите **Вкл.**, чтобы отслеживать файлы, для доступа к которым необходимо выполнить команду `sudo`. В противном случае выберите **Выкл.**
9. Щелкните **Сохранить**.

## <a name="view-changes"></a>Просмотр изменений

В окне **Отслеживание изменений** можно просматривать изменения в каждой из различных категорий виртуальных машин со временем.

   ![Добавление просмотра изменений для отслеживания изменений](./media/automation-vm-change-tracking/change-view-changes.png)

Можно выбрать для просмотра категории и диапазон времени изменений. В верхней части окна можно просмотреть графическое представление изменений со временем. В нижней части окна отображается список последних изменений.

## <a name="view-change-tracking-log-data"></a>Просмотр данных журнала отслеживания изменений

Функция отслеживания изменений создает данные журнала, отправляемые в Log Analytics. Чтобы найти журналы с помощью запросов, выберите **Log Analytics** в верхней части окна **Отслеживание изменений**.

   ![Отслеживание изменений в Log Analytics](./media/automation-vm-change-tracking/change-log-analytics.png)

Дополнительные сведения о выполнении и поиске файлов журнала в Log Analytics см. в статье [Что такое Log Analytics?](../log-analytics/log-analytics-overview.md)

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения об отслеживании изменений см. в статье [Отслеживание изменений программного обеспечения в среде с помощью решения для отслеживания изменений](../log-analytics/log-analytics-change-tracking.md).
* Дополнительные сведения об управлении обновлениями виртуальных машин см. в статье [Решение для управления обновлениями в OMS](../operations-management-suite/oms-solution-update-management.md).
