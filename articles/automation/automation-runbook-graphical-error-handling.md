---
title: "Обработка в графический Runbook автоматизации Azure aaaError | Документы Microsoft"
description: "В этой статье описывается способ обработки логики в графический Runbook автоматизации Azure tooimplement ошибок."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: b9ff01361d2ebd9c0174b074a7a290b1cc2fd1c8
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a>Обработка ошибок в графических модулях Runbook в службе автоматизации Azure

Tooconsider основного ключа runbook разработки является определение различные проблемы, которые могут возникнуть runbook. например состояние успеха, состояния ожидаемых ошибок и условия непредвиденных ошибок.

Модули Runbook должны включать обработку ошибок. toovalidate hello выходных данных действия или обработки ошибки с графический Runbook, может использовать в действии кода Windows PowerShell, задать условную логику на hello выходную ссылку действия hello или применить другой метод.          

Часто Если устранимую ошибку, которая происходит при использовании действия runbook, все действия, следующего обрабатывается независимо от того, ошибка hello. Hello ошибка: вероятно, toogenerate исключение, но по-прежнему может быть следующее действие hello toorun. Этот способ hello, PowerShell является спроектированный toohandle ошибок.    

Завершение или устранимую Hello типов ошибок PowerShell, которые могут возникнуть во время выполнения. Существуют следующие различия Hello завершающий и устранимые ошибки.

* **Прерывающая ошибка**: серьезная ошибка во время выполнения, который полностью останавливает выполнение команды hello (или выполнение сценария). К примерам можно отнести несуществующие командлеты, синтаксические ошибки, предотвращающие выполнение командлета, или другие неустранимые ошибки.

* **Устранимые ошибки**: не серьезная ошибка, позволяющий toocontinue выполнения, несмотря на сбой hello. Примеры включают ошибки из-за отсутствия файла и проблемы с разрешениями.

Графические модули Runbook Azure Automation улучшены с обработкой ошибок tooinclude возможность hello. Теперь можно преобразовывать исключения в устранимые ошибки и создавать ссылки ошибок между действиями. Этот процесс позволяет автору runbook toocatch ошибки и управление условиями, реализованных или неожиданно.  

## <a name="when-toouse-error-handling"></a>При обработке ошибок toouse

При каждом запуске важные действия, которое вызывает произошла ошибка или исключение, это важные tooprevent hello следующее действие в модуле runbook после обработки и toohandle hello ошибки соответствующим образом. Это особенно важно, если модули Runbook поддерживают бизнес-процессы или операции, связанные со службами.

Для каждого действия, которое может вызвать ошибку автор runbook hello можно добавить ошибки ссылку tooany других действий.  Hello целевое действие может быть любого типа, включая действия кода вызова командлета, вызов другого модуля runbook и так далее.

Кроме того hello целевое действие также может иметь исходящие связи. Это могут быть обычные ссылки или ссылки ошибок. Это означает, что автор runbook hello можно реализовать сложную логику обработки ошибок без обращения tooa код действия. Рекомендуется toocreate выделенный runbook обработки ошибок с общими функциональными возможностями, но это не обязательно, рекомендуется Hello. Логика обработки ошибок в действии кода PowerShell, которые не hello только параметр.  

Например рассмотрим книгу выполнения, пытается toostart виртуальную Машину и установите приложения на него. Если hello виртуальная машина не запускается правильно, он выполняет два действия:

1. Отправляет уведомление об этой проблеме.
2. Запускает другой модуль Runbook, который автоматически подготавливает новую виртуальную машину.

Одним из решений является toohave ошибка ссылку действия tooan, что дескрипторы шаг 1. Например, можно установить соединение hello **Write-Warning** действия tooan командлет на шаге 2, например hello **AzureRmAutomationRunbook начала** командлета.

Может также generalize это поведение для использования в много модулей Runbook, преобразуя эти два действия в runbook обработка отдельных ошибок и приводимых hello предложил ранее. Перед вызовом этого модуля runbook обработки ошибок, можно создать пользовательское сообщение hello данные в исходное runbook hello и передайте его в качестве модуля параметр toohello обработки ошибок.

## <a name="how-toouse-error-handling"></a>Способ обработки ошибок toouse

Каждое действие настроено для преобразования исключений в устранимые ошибки. Эта функция отключена по умолчанию. Рекомендуется включить этот параметр на любое действие, когда необходимо toohandle ошибки.  

Включив эту конфигурацию, гарантируя завершающий и устранимые ошибки в действии hello обрабатываются как устранимые ошибки что можно обрабатывать с помощью ссылки на ошибки.  

После настройки этого параметра необходимо создать действие, которое обрабатывает ошибку hello. Если действие создает ошибки, затем hello исходящих ошибки, которые выполняются ссылки и обычные ссылки hello не, даже если стандартный выход также формирует действие hello.<br><br> ![Пример ссылки ошибки в модуле Runbook службы автоматизации](media/automation-runbook-graphical-error-handling/error-link-example.png)

В следующем примере hello runbook извлекает переменную, содержащую hello имя компьютера виртуальной машины. Он предпринимает toostart hello виртуальной машины с hello следующее действие.<br><br> ![Пример обработки ошибок в модуле Runbook службы автоматизации](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

Hello **Get-AutomationVariable** действия и **AzureRmVm начала** , настроенных tooconvert tooerrors исключения.  При наличии проблем с запуском hello, переменной или начальный hello виртуальной Машины, то возникают ошибки.<br><br> ![Параметры действия обработки ошибок в модуле Runbook службы автоматизации](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)

Ошибка ссылки потока из этих действий tooa один **управление обработкой ошибок** действия (действие кода). Это действие настроено простое выражение PowerShell, который использует hello *Throw* toostop ключевое слово обработки вместе с *$Error.Exception.Message* tooget приветственное сообщение, описывающее hello текущее исключение.<br><br> ![Пример кода для обработки ошибок в модуле Runbook службы автоматизации](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)


## <a name="next-steps"></a>Дальнейшие действия

* toolearn Дополнительные сведения о связи и типы связей в графические модули Runbook в разделе [графический разработки в Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).

* Дополнительные сведения о выполнение модуля runbook, как toomonitor заданиях и другие технические сведения см. в разделе toolearn [отследить задание runbook](automation-runbook-execution.md).
