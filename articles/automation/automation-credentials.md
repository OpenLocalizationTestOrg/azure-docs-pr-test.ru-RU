---
title: "Ресурсы-контейнеры учетных данных в службе автоматизации Azure | Документация Майкрософт"
description: "Ресурсы-контейнеры учетных данных службы автоматизации Azure содержат учетные данные безопасности, которые могут использоваться для проверки подлинности при доступе к ресурсам с помощью модуля Runbook или конфигурации DSC. В этой статье описывается, как создать ресурсы-контейнеры учетных данных и использовать их в модуле Runbook или конфигурации DSC."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: tysonn
ms.assetid: 3209bf73-c208-425e-82b6-df49860546dd
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/14/2017
ms.author: bwren
ms.openlocfilehash: e2857515f3842a875ef7b5a9327392818931168f
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="credential-assets-in-azure-automation"></a><span data-ttu-id="d214a-104">Ресурсы учетных данных в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="d214a-104">Credential assets in Azure Automation</span></span>
<span data-ttu-id="d214a-105">В ресурсе-контейнере учетных данных службы автоматизации хранится объект [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential), содержащий учетные данные безопасности, например имя пользователя и пароль.</span><span class="sxs-lookup"><span data-stu-id="d214a-105">An Automation credential asset holds a [PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential)  object which contains security credentials such as a username and password.</span></span> <span data-ttu-id="d214a-106">Модули Runbook и конфигурации DSC могут использовать командлеты, которые принимают объект PSCredential для проверки подлинности или извлекать имя пользователя и пароль объекта PSCredential, чтобы предоставить их каким-либо приложениям или службам, требующим проверку подлинности.</span><span class="sxs-lookup"><span data-stu-id="d214a-106">Runbooks and DSC configurations may use cmdlets that accept a PSCredential object for authentication, or they may extract the username and password of the PSCredential object to provide to some application or service requiring authentication.</span></span> <span data-ttu-id="d214a-107">Свойства для учетных данных безопасно хранятся в службе автоматизации Azure. К ним можно получить доступ в модуле Runbook или конфигурации DSC с помощью действия [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx).</span><span class="sxs-lookup"><span data-stu-id="d214a-107">The properties for a credential are stored securely in Azure Automation and can be accessed in the runbook or DSC configuration with the [Get-AutomationPSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) activity.</span></span>

> [!NOTE]
> <span data-ttu-id="d214a-108">Безопасные средства в службе автоматизации Azure включают учетные данные, сертификаты, подключения и зашифрованные переменные.</span><span class="sxs-lookup"><span data-stu-id="d214a-108">Secure assets in Azure Automation include credentials, certificates, connections, and encrypted variables.</span></span> <span data-ttu-id="d214a-109">Эти ресурсы шифруются и хранятся в службе автоматизации Azure с помощью уникального ключа, который создается для каждой учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="d214a-109">These assets are encrypted and stored in the Azure Automation using a unique key that is generated for each automation account.</span></span> <span data-ttu-id="d214a-110">Ключ шифруется главным сертификатом и хранится в службе автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="d214a-110">This key is encrypted by a master certificate and stored in Azure Automation.</span></span> <span data-ttu-id="d214a-111">Перед сохранением защищенного ресурса ключ учетной записи службы автоматизации дешифруется с помощью главного сертификата и используется для шифрования ресурса.</span><span class="sxs-lookup"><span data-stu-id="d214a-111">Before storing a secure asset, the key for the automation account is decrypted using the master certificate and then used to encrypt the asset.</span></span>  

## <a name="windows-powershell-cmdlets"></a><span data-ttu-id="d214a-112">Командлеты Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="d214a-112">Windows PowerShell cmdlets</span></span>
<span data-ttu-id="d214a-113">Командлеты, представленные в следующей таблице, используются для создания ресурсов учетных данных службы автоматизации и управления ими с помощью Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="d214a-113">The cmdlets in the following table are used to create and manage automation credential assets with Windows PowerShell.</span></span>  <span data-ttu-id="d214a-114">Они входят в состав [модуля Azure PowerShell](/powershell/azure/overview) , доступного в модулях Runbook и конфигурациях DSC службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="d214a-114">They ship as part of the [Azure PowerShell module](/powershell/azure/overview) which is available for use in Automation runbooks and DSC configurations.</span></span>

| <span data-ttu-id="d214a-115">Командлеты</span><span class="sxs-lookup"><span data-stu-id="d214a-115">Cmdlets</span></span> | <span data-ttu-id="d214a-116">Описание</span><span class="sxs-lookup"><span data-stu-id="d214a-116">Description</span></span> |
|:--- |:--- |
| [<span data-ttu-id="d214a-117">Get-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d214a-117">Get-AzureAutomationCredential</span></span>](/powershell/module/azure/get-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d214a-118">Извлекает сведения о ресурсе учетных данных.</span><span class="sxs-lookup"><span data-stu-id="d214a-118">Retrieves information about a credential asset.</span></span> <span data-ttu-id="d214a-119">Сами учетные данные можно извлечь только с помощью действия **Get-AutomationPSCredential** .</span><span class="sxs-lookup"><span data-stu-id="d214a-119">You can only retrieve the credential itself from **Get-AutomationPSCredential** activity.</span></span> |
| [<span data-ttu-id="d214a-120">New-AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d214a-120">New-AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d214a-121">Создает новые учетные данные службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="d214a-121">Creates a new Automation credential.</span></span> |
| [<span data-ttu-id="d214a-122">Remove- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d214a-122">Remove- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d214a-123">Удаляет учетные данные службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="d214a-123">Removes an Automation credential.</span></span> |
| [<span data-ttu-id="d214a-124">Set- AzureAutomationCredential</span><span class="sxs-lookup"><span data-stu-id="d214a-124">Set- AzureAutomationCredential</span></span>](/powershell/module/azure/new-azureautomationcredential?view=azuresmps-3.7.0) |<span data-ttu-id="d214a-125">Задает свойства для существующих учетных данных службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="d214a-125">Sets the properties for an existing Automation credential.</span></span> |

## <a name="runbook-activities"></a><span data-ttu-id="d214a-126">Действия Runbook</span><span class="sxs-lookup"><span data-stu-id="d214a-126">Runbook activities</span></span>
<span data-ttu-id="d214a-127">Действия в следующей таблице используются для доступа к учетным данным в модуле Runbook и конфигурациях DSC.</span><span class="sxs-lookup"><span data-stu-id="d214a-127">The activities in the following table are used to access credentials in a runbook and DSC configurations.</span></span>

| <span data-ttu-id="d214a-128">Действия</span><span class="sxs-lookup"><span data-stu-id="d214a-128">Activities</span></span> | <span data-ttu-id="d214a-129">Описание</span><span class="sxs-lookup"><span data-stu-id="d214a-129">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="d214a-130">Get-AutomationPSCredential</span><span class="sxs-lookup"><span data-stu-id="d214a-130">Get-AutomationPSCredential</span></span> |<span data-ttu-id="d214a-131">Получает учетные данные для использования в модуле Runbook или в конфигурации DSC.</span><span class="sxs-lookup"><span data-stu-id="d214a-131">Gets a credential to use in a runbook or DSC configuration.</span></span> <span data-ttu-id="d214a-132">Возвращает объект [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) .</span><span class="sxs-lookup"><span data-stu-id="d214a-132">Returns a [System.Management.Automation.PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential) object.</span></span> |

> [!NOTE]
> <span data-ttu-id="d214a-133">Не следует использовать переменные в параметре –Name действия Get-AutomationPSCredential, так как это может усложнить обнаружение зависимостей между модулями Runbook или конфигурациями DSC и ресурсами-контейнерами учетных данных во время разработки.</span><span class="sxs-lookup"><span data-stu-id="d214a-133">You should avoid using variables in the –Name parameter of Get-AutomationPSCredential since this can complicate discovering dependencies between runbooks or DSC configurations, and credential assets at design time.</span></span>
> 
> 

## <a name="creating-a-new-credential-asset"></a><span data-ttu-id="d214a-134">Создание нового ресурса учетных данных</span><span class="sxs-lookup"><span data-stu-id="d214a-134">Creating a new credential asset</span></span>

### <a name="to-create-a-new-credential-asset-with-the-azure-portal"></a><span data-ttu-id="d214a-135">Создание нового ресурса учетных данных на портале Azure</span><span class="sxs-lookup"><span data-stu-id="d214a-135">To create a new credential asset with the Azure portal</span></span>
1. <span data-ttu-id="d214a-136">Из учетной записи службы автоматизации щелкните **Ресурсы**, чтобы открыть колонку **Ресурсы**.</span><span class="sxs-lookup"><span data-stu-id="d214a-136">From your automation account, click the **Assets** part to open the **Assets** blade.</span></span>
2. <span data-ttu-id="d214a-137">Щелкните элемент **Учетные данные**, чтобы открыть колонку **Учетные данные**.</span><span class="sxs-lookup"><span data-stu-id="d214a-137">Click the **Credentials** part to open the **Credentials** blade.</span></span>
3. <span data-ttu-id="d214a-138">Щелкните **Добавить учетные данные** в верхней части колонки.</span><span class="sxs-lookup"><span data-stu-id="d214a-138">Click **Add a credential** at the top of the blade.</span></span>
4. <span data-ttu-id="d214a-139">Заполните форму и нажмите кнопку **Создать** для сохранения новых учетных данных.</span><span class="sxs-lookup"><span data-stu-id="d214a-139">Complete the form and click **Create** to save the new credential.</span></span>

### <a name="to-create-a-new-credential-asset-with-windows-powershell"></a><span data-ttu-id="d214a-140">Создание нового ресурса учетных данных с помощью Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="d214a-140">To create a new credential asset with Windows PowerShell</span></span>
<span data-ttu-id="d214a-141">Команды, приведенные ниже в примере, демонстрируют создание новых учетных данных службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="d214a-141">The following sample commands show how to create a new automation credential.</span></span> <span data-ttu-id="d214a-142">Сначала создается объект PSCredential с именем и паролем, а затем он используется для создания ресурса учетных данных.</span><span class="sxs-lookup"><span data-stu-id="d214a-142">A PSCredential object is first created with the name and password and then used to create the credential asset.</span></span> <span data-ttu-id="d214a-143">Кроме того, можно использовать командлет **Get-Credential** , чтобы отобразить запрос имени и пароля.</span><span class="sxs-lookup"><span data-stu-id="d214a-143">Alternatively, you could use the **Get-Credential** cmdlet to be prompted to type in a name and password.</span></span>

    $user = "MyDomain\MyUser"
    $pw = ConvertTo-SecureString "PassWord!" -AsPlainText -Force
    $cred = New-Object –TypeName System.Management.Automation.PSCredential –ArgumentList $user, $pw
    New-AzureAutomationCredential -AutomationAccountName "MyAutomationAccount" -Name "MyCredential" -Value $cred

### <a name="to-create-a-new-credential-asset-with-the-azure-classic-portal"></a><span data-ttu-id="d214a-144">Создание нового ресурса учетных данных на классическом портале Azure</span><span class="sxs-lookup"><span data-stu-id="d214a-144">To create a new credential asset with the Azure classic portal</span></span>
1. <span data-ttu-id="d214a-145">Из учетной записи службы автоматизации щелкните **Активы** в верхней части окна.</span><span class="sxs-lookup"><span data-stu-id="d214a-145">From your automation account, click **Assets** at the top of the window.</span></span>
2. <span data-ttu-id="d214a-146">Нажмите кнопку **Добавить параметр**в нижней части окна.</span><span class="sxs-lookup"><span data-stu-id="d214a-146">At the bottom of the window, click **Add Setting**.</span></span>
3. <span data-ttu-id="d214a-147">Щелкните **Добавить учетные данные**.</span><span class="sxs-lookup"><span data-stu-id="d214a-147">Click **Add Credential**.</span></span>
4. <span data-ttu-id="d214a-148">В раскрывающемся списке **Тип учетных данных** выберите **Учетные данные PowerShell**.</span><span class="sxs-lookup"><span data-stu-id="d214a-148">In the **Credential Type** dropdown, select **PowerShell Credential**.</span></span>
5. <span data-ttu-id="d214a-149">Завершите работу мастера и установите флажок, чтобы сохранить новые учетные данные.</span><span class="sxs-lookup"><span data-stu-id="d214a-149">Complete the wizard and click the checkbox to save the new credential.</span></span>

## <a name="using-a-powershell-credential"></a><span data-ttu-id="d214a-150">Использование учетных данных PowerShell</span><span class="sxs-lookup"><span data-stu-id="d214a-150">Using a PowerShell credential</span></span>
<span data-ttu-id="d214a-151">Для получения ресурса-контейнера учетных данных из модуля Runbook или конфигурации DSC используется действие **Get-AutomationPSCredential**.</span><span class="sxs-lookup"><span data-stu-id="d214a-151">You retrieve a credential asset in a runbook or DSC configuration with the **Get-AutomationPSCredential** activity.</span></span> <span data-ttu-id="d214a-152">Оно возвращает [объект PSCredential](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx), который можно использовать в действии или командлете, требующем параметр PSCredential.</span><span class="sxs-lookup"><span data-stu-id="d214a-152">This returns a [PSCredential object](http://msdn.microsoft.com/library/system.management.automation.pscredential.aspx) that you can use with an activity or cmdlet that requires a PSCredential parameter.</span></span> <span data-ttu-id="d214a-153">Можно также получить свойства объекта учетных данных, чтобы использовать их по отдельности.</span><span class="sxs-lookup"><span data-stu-id="d214a-153">You can also retrieve the properties of the credential object to use individually.</span></span> <span data-ttu-id="d214a-154">Объект имеет свойства для имени пользователя и надежного пароля. Также можно использовать метод **GetNetworkCredential** для возврата объекта [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx), предоставляющего небезопасную версию пароля.</span><span class="sxs-lookup"><span data-stu-id="d214a-154">The object has a property for the username and the secure password, or you can use the **GetNetworkCredential** method to return a [NetworkCredential](http://msdn.microsoft.com/library/system.net.networkcredential.aspx) object that will provide an unsecured version of the password.</span></span>

### <a name="textual-runbook-sample"></a><span data-ttu-id="d214a-155">Пример текстового Runbook</span><span class="sxs-lookup"><span data-stu-id="d214a-155">Textual runbook sample</span></span>
<span data-ttu-id="d214a-156">Команды в приведенном ниже примере демонстрируют использование учетных данных PowerShell в Runbook.</span><span class="sxs-lookup"><span data-stu-id="d214a-156">The following sample commands show how to use a PowerShell credential in a runbook.</span></span> <span data-ttu-id="d214a-157">В этом примере извлекаются учетные данные, и имя пользователя и пароль из них присваиваются переменным.</span><span class="sxs-lookup"><span data-stu-id="d214a-157">In this example, the credential is retrieved and its username and password assigned to variables.</span></span>

    $myCredential = Get-AutomationPSCredential -Name 'MyCredential'
    $userName = $myCredential.UserName
    $securePassword = $myCredential.Password
    $password = $myCredential.GetNetworkCredential().Password


### <a name="graphical-runbook-sample"></a><span data-ttu-id="d214a-158">Пример графического Runbook</span><span class="sxs-lookup"><span data-stu-id="d214a-158">Graphical runbook sample</span></span>
<span data-ttu-id="d214a-159">Можно добавить действие **Get-AutomationPSCredential** в графический Runbook, щелкнув правой кнопкой мыши учетные данные в области "Библиотека" графического редактора и выбрав пункт **Добавить на холст**.</span><span class="sxs-lookup"><span data-stu-id="d214a-159">You add a **Get-AutomationPSCredential** activity to a graphical runbook by right-clicking on the credential in the Library pane of the graphical editor and selecting **Add to canvas**.</span></span>

![Добавление учетных данных на холст](media/automation-credentials/credential-add-canvas.png)

<span data-ttu-id="d214a-161">На следующем рисунке показан пример использования учетных данных в графическом Runbook.</span><span class="sxs-lookup"><span data-stu-id="d214a-161">The following image shows an example of using a credential in a graphical runbook.</span></span>  <span data-ttu-id="d214a-162">В этом случае они используются для аутентификации Runbook для доступа к ресурсам Azure, как описано в разделе [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md)(Проверка подлинности модулей Runbook с помощью учетной записи пользователя Azure AD).</span><span class="sxs-lookup"><span data-stu-id="d214a-162">In this case, it is being used to provide authentication for a runbook to Azure resources as described in [Authenticate Runbooks with Azure AD User account](automation-create-aduser-account.md).</span></span>  <span data-ttu-id="d214a-163">Первое действие получает учетные данные с доступом к подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="d214a-163">The first activity retrieves the credential that has access to the Azure subscription.</span></span>  <span data-ttu-id="d214a-164">Затем действие **Add-AzureAccount** использует эти учетные данные для аутентификации любых последующих действий.</span><span class="sxs-lookup"><span data-stu-id="d214a-164">The **Add-AzureAccount** activity then uses this credential to provide authentication for any activities that come after it.</span></span>  <span data-ttu-id="d214a-165">Здесь используется [конвейерная связь](automation-graphical-authoring-intro.md#links-and-workflow) , так как **Get-AutomationPSCredential** ожидает один объект.</span><span class="sxs-lookup"><span data-stu-id="d214a-165">A [pipeline link](automation-graphical-authoring-intro.md#links-and-workflow) is here since **Get-AutomationPSCredential** is expecting a single object.</span></span>  

![Добавление учетных данных на холст](media/automation-credentials/get-credential.png)

## <a name="using-a-powershell-credential-in-dsc"></a><span data-ttu-id="d214a-167">Использование учетных данных PowerShell в DSC</span><span class="sxs-lookup"><span data-stu-id="d214a-167">Using a PowerShell credential in DSC</span></span>
<span data-ttu-id="d214a-168">Хотя конфигурации DSC в службе автоматизации Azure могут ссылаться на ресурсы-контейнеры учетных данных с помощью командлета **Get-AutomationPSCredential**, при необходимости эти ресурсы-контейнеры можно передавать и в качестве параметров.</span><span class="sxs-lookup"><span data-stu-id="d214a-168">While DSC configurations in Azure Automation can reference credential assets using **Get-AutomationPSCredential**, credential assets can also be passed in via parameters, if desired.</span></span> <span data-ttu-id="d214a-169">Дополнительные сведения см. в статье [Компилирование конфигураций в Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span><span class="sxs-lookup"><span data-stu-id="d214a-169">For more information, see [Compiling configurations in Azure Automation DSC](automation-dsc-compile.md#credential-assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="d214a-170">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="d214a-170">Next Steps</span></span>
* <span data-ttu-id="d214a-171">Дополнительные сведения о графической разработке см. в разделе [Связи и рабочий процесс](automation-graphical-authoring-intro.md#links-and-workflow).</span><span class="sxs-lookup"><span data-stu-id="d214a-171">To learn more about links in graphical authoring, see [Links in graphical authoring](automation-graphical-authoring-intro.md#links-and-workflow)</span></span>
* <span data-ttu-id="d214a-172">Сведения о различных методах аутентификации в службе автоматизации см. в статье [Обеспечение безопасности в службе автоматизации Azure](automation-security-overview.md).</span><span class="sxs-lookup"><span data-stu-id="d214a-172">To understand the different authentication methods with Automation, see [Azure Automation Security](automation-security-overview.md)</span></span>
* <span data-ttu-id="d214a-173">Чтобы начать работу с графическими модулями Runbook, см. инструкции в статье [Первый графический Runbook](automation-first-runbook-graphical.md).</span><span class="sxs-lookup"><span data-stu-id="d214a-173">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="d214a-174">Чтобы приступить к работе с модулями Runbook рабочих процессов PowerShell, обратитесь к статье [Мой первый модуль Runbook рабочего процесса PowerShell](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="d214a-174">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span> 

