---
title: "Создание автономной учетной записи службы автоматизации Azure | Документация Майкрософт"
description: "В этом руководстве приводятся пошаговые инструкции по созданию и тестированию, а также пример проверки подлинности с помощью субъекта безопасности в службе автоматизации Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: 
ms.assetid: 2f783441-15c7-4ea0-ba27-d7daa39b1dd3
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 08/18/2017
ms.author: magoedte
ms.openlocfilehash: 6eadfb0c3f91c1f2c7783d70604b45d5dc9912a3
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/18/2017
---
# <a name="create-a-standalone-azure-automation-account"></a><span data-ttu-id="12b0f-103">Создание автономной учетной записи службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="12b0f-103">Create a standalone Azure Automation account</span></span>
<span data-ttu-id="12b0f-104">В этой статье вы узнаете, как создать учетную запись службы автоматизации на портале Azure, если для обеспечения расширенного мониторинга заданий Runbook требуется оценить и изучить службу автоматизации Azure, не включая дополнительные решения по управлению или интеграцию с OMS Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="12b0f-104">This topic shows you how to create an Automation account from the Azure portal if you want to evaluate and learn Azure Automation without including the additional management solutions or integration with OMS Log Analytics to provide advanced monitoring of runbook jobs.</span></span>  <span data-ttu-id="12b0f-105">В дальнейшем эти решения по управлению можно добавить или интегрировать с Log Analytics.</span><span class="sxs-lookup"><span data-stu-id="12b0f-105">You can add those management solutions or integrate with Log Analytics at any point in the future.</span></span>  <span data-ttu-id="12b0f-106">С использованием учетной записи службы автоматизации можно проверять подлинность ресурсов управления модулями Runbook в Azure Resource Manager или в классическом развертывании Azure.</span><span class="sxs-lookup"><span data-stu-id="12b0f-106">With the Automation account, you are able to authenticate runbooks managing resources in either Azure Resource Manager or Azure classic deployment.</span></span>

<span data-ttu-id="12b0f-107">При создании учетной записи службы автоматизации на портале Azure автоматически создаются следующие ресурсы.</span><span class="sxs-lookup"><span data-stu-id="12b0f-107">When you create an Automation account in the Azure portal, it automatically creates:</span></span>

* <span data-ttu-id="12b0f-108">Учетная запись запуска от имени, которая создает субъект-службу в Azure Active Directory и сертификат, а также назначает контроль доступа на основе роли участника. Используется для управления ресурсами Resource Manager с помощью модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="12b0f-108">Run As account, which creates a new service principal in Azure Active Directory, a certificate, and assigns the Contributor role-based access control (RBAC), which is used to manage Resource Manager resources using runbooks.</span></span>   
* <span data-ttu-id="12b0f-109">Классическая учетная запись запуска от имени. Создается путем отправки сертификата управления. Используется для управления классическими ресурсами с помощью модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="12b0f-109">Classic Run As account by uploading a management certificate, which is used to manage  classic resources using runbooks.</span></span>  

<span data-ttu-id="12b0f-110">Это упрощает процесс и помогает быстро начать построение и развертывание модулей Runbook для решения конкретных задач автоматизации.</span><span class="sxs-lookup"><span data-stu-id="12b0f-110">This simplifies the process for you and helps you quickly start building and deploying runbooks to support your automation needs.</span></span>  

## <a name="permissions-required-to-create-automation-account"></a><span data-ttu-id="12b0f-111">Разрешения, необходимые для создания учетной записи службы автоматизации</span><span class="sxs-lookup"><span data-stu-id="12b0f-111">Permissions required to create Automation account</span></span>
<span data-ttu-id="12b0f-112">Чтобы создать или обновить учетную запись службы автоматизации, вам потребуются указанные ниже определенные привилегии и разрешения, необходимые для изучения этого раздела.</span><span class="sxs-lookup"><span data-stu-id="12b0f-112">To create or update an Automation account, you must have the following specific privileges and permissions required to complete this topic.</span></span>   
 
* <span data-ttu-id="12b0f-113">Для создания учетной записи службы автоматизации необходимо добавить учетную запись пользователя AD к роли с разрешениями, аналогичными разрешениям для роли владельца ресурсов службы автоматизации Майкрософт, как описано в статье [Управление доступом на основе ролей в службе автоматизации Azure](automation-role-based-access-control.md).</span><span class="sxs-lookup"><span data-stu-id="12b0f-113">In order to create an Automation account, your AD user account needs to be added to a role with permissions equivalent to the Owner role for Microsoft.Automation resources as outlined in article [Role-based access control in Azure Automation](automation-role-based-access-control.md).</span></span>  
* <span data-ttu-id="12b0f-114">Пользователи без прав администратора в клиенте Azure AD могут [регистрировать приложения AD](../azure-resource-manager/resource-group-create-service-principal-portal.md#check-azure-subscription-permissions), если для параметра регистрации установлено значение **Да**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-114">If the App registrations setting is set to **Yes**, non-admin users in your Azure AD tenant can [register AD applications](../azure-resource-manager/resource-group-create-service-principal-portal.md#check-azure-subscription-permissions).</span></span>  <span data-ttu-id="12b0f-115">Если для этого параметра задано значение **Нет**, пользователю потребуются права глобального администратора в Azure AD, чтобы выполнить это действие.</span><span class="sxs-lookup"><span data-stu-id="12b0f-115">If the app registrations setting is set to **No**, the user performing this action must be a global administrator in Azure AD.</span></span> 

<span data-ttu-id="12b0f-116">Если пользователь, которому назначают роль глобального администратора или соадминистратора подписки, не является участником экземпляра подписки Active Directory, он будет добавлен в Active Directory в качестве гостя.</span><span class="sxs-lookup"><span data-stu-id="12b0f-116">If you are not a member of the subscription’s Active Directory instance before you are added to the global administrator/co-administrator role of the subscription, you are added to Active Directory as a guest.</span></span> <span data-ttu-id="12b0f-117">В этом случае отобразится соответствующее предупреждение "У вас нет разрешений на создание…"</span><span class="sxs-lookup"><span data-stu-id="12b0f-117">In this situation, you receive a “You do not have permissions to create…”</span></span> <span data-ttu-id="12b0f-118">в колонке **Добавление учетной записи службы автоматизации**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-118">warning on the **Add Automation Account** blade.</span></span> <span data-ttu-id="12b0f-119">Пользователей, которым назначена роль соадминистратора или глобального администратора, можно удалить из экземпляра подписки Active Directory, а затем повторно добавить, чтобы предоставить им права полного доступа к Active Directory.</span><span class="sxs-lookup"><span data-stu-id="12b0f-119">Users who were added to the global administrator/co-administrator role first can be removed from the subscription's Active Directory instance and readded to make them a full User in Active Directory.</span></span> <span data-ttu-id="12b0f-120">Чтобы проверить это, на портале Azure в области **Azure Active Directory** выберите **Пользователи и группы** и **Все пользователи**. Выбрав нужного пользователя, щелкните **Профиль**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-120">To verify this situation, from the **Azure Active Directory** pane in the Azure portal, select **Users and groups**, select **All users** and, after you select the specific user, select **Profile**.</span></span> <span data-ttu-id="12b0f-121">Значение атрибута **Тип пользователя** в профиле пользователя не должно соответствовать значению **Гость**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-121">The value of the **User type** attribute under the users profile should not equal **Guest**.</span></span>

## <a name="create-a-new-automation-account-from-the-azure-portal"></a><span data-ttu-id="12b0f-122">Создание учетной записи службы автоматизации на портале Azure</span><span class="sxs-lookup"><span data-stu-id="12b0f-122">Create a new Automation Account from the Azure portal</span></span>
<span data-ttu-id="12b0f-123">В этом разделе указаны действия, с помощью которых на портале Azure можно создать учетную запись службы автоматизации Azure.</span><span class="sxs-lookup"><span data-stu-id="12b0f-123">In this section, perform the following steps to create an Azure Automation account in the Azure portal.</span></span>    

1. <span data-ttu-id="12b0f-124">Войдите на портал Azure с помощью учетной записи, которая является участником роли "Администраторы подписки" и соадминистратором подписки.</span><span class="sxs-lookup"><span data-stu-id="12b0f-124">Sign in to the Azure portal with an account that is a member of the Subscription Admins role and co-administrator of the subscription.</span></span>
2. <span data-ttu-id="12b0f-125">Нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-125">Click **New**.</span></span><br><br> <span data-ttu-id="12b0f-126">![Выбор пункта "Создать" на портале Azure](media/automation-offering-get-started/automation-portal-martketplacestart.png)</span><span class="sxs-lookup"><span data-stu-id="12b0f-126">![Select New option in Azure portal](media/automation-offering-get-started/automation-portal-martketplacestart.png)</span></span><br>  
3. <span data-ttu-id="12b0f-127">Выполните поиск по запросу **Автоматизация** и в поле результатов поиска выберите **Автоматизация и управление***.</span><span class="sxs-lookup"><span data-stu-id="12b0f-127">Search for **Automation** and then in the search results select **Automation & Control***.</span></span><br><br> <span data-ttu-id="12b0f-128">![Поиск и выбор элемента "Служба автоматизации" в Marketplace](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)</span><span class="sxs-lookup"><span data-stu-id="12b0f-128">![Search and select Automation from Marketplace](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)</span></span><br> 
3. <span data-ttu-id="12b0f-129">В колонке "Учетные записи службы автоматизации" щелкните **Добавить**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-129">In the Automation Accounts blade, click **Add**.</span></span><br><br><span data-ttu-id="12b0f-130">![Добавление учетной записи службы автоматизации](media/automation-create-standalone-account/automation-create-automationacct-properties.png)</span><span class="sxs-lookup"><span data-stu-id="12b0f-130">![Add Automation Account](media/automation-create-standalone-account/automation-create-automationacct-properties.png)</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="12b0f-131">Если вы видите в колонке **Добавление учетной записи службы автоматизации** следующее предупреждение, это означает, что ваша учетная запись не является участником роли администраторов подписки и не предоставляет прав соадминистратора подписки.</span><span class="sxs-lookup"><span data-stu-id="12b0f-131">If you see the following warning in the **Add Automation Account** blade, it is because your account is not a member of the Subscription Admins role and co-admin of the subscription.</span></span><br><br><span data-ttu-id="12b0f-132">![Предупреждение в колонке "Добавление учетной записи службы автоматизации"](media/automation-create-standalone-account/create-account-without-perms.png)</span><span class="sxs-lookup"><span data-stu-id="12b0f-132">![Add Automation Account Warning](media/automation-create-standalone-account/create-account-without-perms.png)</span></span>
   > 
   > 
4. <span data-ttu-id="12b0f-133">В колонке **Добавление учетной записи службы автоматизации** в поле **Имя** введите имя новой учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="12b0f-133">In the **Add Automation Account** blade, in the **Name** box type in a name for your new Automation account.</span></span>
5. <span data-ttu-id="12b0f-134">Если у вас несколько подписок, укажите одну из них для новой учетной записи, а также новую или имеющуюся **группу ресурсов** и **расположение** центра обработки данных Azure.</span><span class="sxs-lookup"><span data-stu-id="12b0f-134">If you have more than one subscription, specify one for the new account, a new or existing **Resource group** and an Azure datacenter **Location**.</span></span>
6. <span data-ttu-id="12b0f-135">Убедитесь, что для параметра **Создать учетную запись запуска от имени Azure** выбрано значение **Да**, и нажмите кнопку **Создать**.</span><span class="sxs-lookup"><span data-stu-id="12b0f-135">Verify the value **Yes** is selected for the **Create Azure Run As account** option, and click the **Create** button.</span></span>  
   
   > [!NOTE]
   > <span data-ttu-id="12b0f-136">Если вы решили не создавать учетную запись запуска от имени, выбрав значение **Нет**, в колонке **Добавление учетной записи службы автоматизации** появится предупреждение.</span><span class="sxs-lookup"><span data-stu-id="12b0f-136">If you choose to not create the Run As account by selecting the option **No**, you are  presented with a warning message in the **Add Automation Account** blade.</span></span>  <span data-ttu-id="12b0f-137">Хотя учетная запись и создается на портале Azure, она не содержит соответствующее удостоверение проверки подлинности в службе каталогов классической подписки или подписки Resource Manager, поэтому у этой учетной записи не будет доступа к ресурсам в вашей подписке.</span><span class="sxs-lookup"><span data-stu-id="12b0f-137">While the account is created in the Azure portal, it doesn't have a corresponding authentication identity within your classic or Resource Manager subscription directory service and therefore, no access to resources in your subscription.</span></span>  <span data-ttu-id="12b0f-138">Из-за этого модули Runbook, ссылающиеся на эту учетную запись, не смогут проходить проверку подлинности и выполнять задачи, используя ресурсы в соответствующих моделях развертывания.</span><span class="sxs-lookup"><span data-stu-id="12b0f-138">This prevents any runbooks referencing this account from being able to authenticate and perform tasks against resources in those deployment models.</span></span>
   > 
   > <span data-ttu-id="12b0f-139">![Предупреждение в колонке "Добавление учетной записи службы автоматизации"](media/automation-create-standalone-account/create-account-decline-create-runas-msg.png)</span><span class="sxs-lookup"><span data-stu-id="12b0f-139">![Add Automation Account Warning](media/automation-create-standalone-account/create-account-decline-create-runas-msg.png)</span></span><br>
   > <span data-ttu-id="12b0f-140">Если субъект-служба не создан, роль участника не назначается.</span><span class="sxs-lookup"><span data-stu-id="12b0f-140">When the service principal is not created the Contributor role is not assigned.</span></span>
   > 

7. <span data-ttu-id="12b0f-141">Ход создания учетной записи службы автоматизации в Azure можно отслеживать в разделе **Уведомления** в меню.</span><span class="sxs-lookup"><span data-stu-id="12b0f-141">While Azure creates the Automation account, you can track the progress under **Notifications** from the menu.</span></span>

### <a name="resources-included"></a><span data-ttu-id="12b0f-142">Создаваемые ресурсы</span><span class="sxs-lookup"><span data-stu-id="12b0f-142">Resources included</span></span>
<span data-ttu-id="12b0f-143">После создания учетной записи службы автоматизации автоматически создаются несколько ресурсов.</span><span class="sxs-lookup"><span data-stu-id="12b0f-143">When the Automation account is successfully created, several resources are automatically created for you.</span></span>  <span data-ttu-id="12b0f-144">В следующей таблице перечислены ресурсы для учетной записи запуска от имени.</span><span class="sxs-lookup"><span data-stu-id="12b0f-144">The following table summarizes resources for the Run As account.</span></span><br>

| <span data-ttu-id="12b0f-145">Ресурс</span><span class="sxs-lookup"><span data-stu-id="12b0f-145">Resource</span></span> | <span data-ttu-id="12b0f-146">Описание</span><span class="sxs-lookup"><span data-stu-id="12b0f-146">Description</span></span> |
| --- | --- |
| <span data-ttu-id="12b0f-147">Модуль Runbook AzureAutomationTutorial</span><span class="sxs-lookup"><span data-stu-id="12b0f-147">AzureAutomationTutorial Runbook</span></span> |<span data-ttu-id="12b0f-148">Пример графического модуля Runbook, который демонстрирует, как выполнить аутентификацию с помощью учетной записи запуска от имени, и получает доступ ко всем ресурсам Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="12b0f-148">An example Graphical runbook that demonstrates how to authenticate using the Run As account and gets all the Resource Manager resources.</span></span> |
| <span data-ttu-id="12b0f-149">Модуль Runbook AzureAutomationTutorialScript</span><span class="sxs-lookup"><span data-stu-id="12b0f-149">AzureAutomationTutorialScript Runbook</span></span> |<span data-ttu-id="12b0f-150">Пример модуля Runbook PowerShell, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени, и получает доступ ко всем ресурсам Resource Manager.</span><span class="sxs-lookup"><span data-stu-id="12b0f-150">An example PowerShell runbook that demonstrates how to authenticate using the Run As account and gets all the Resource Manager resources.</span></span> |
| <span data-ttu-id="12b0f-151">AzureRunAsCertificate</span><span class="sxs-lookup"><span data-stu-id="12b0f-151">AzureRunAsCertificate</span></span> |<span data-ttu-id="12b0f-152">Ресурс-контейнер сертификатов, который автоматически создается во время создания учетной записи службы автоматизации или с помощью приведенного ниже сценария PowerShell для существующей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="12b0f-152">Certificate asset automatically created during Automation account creation or using the PowerShell script below for an existing account.</span></span>  <span data-ttu-id="12b0f-153">Он позволяет пройти проверку подлинности в Azure, что дает возможность управлять ресурсами Azure Resource Manager с помощью модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="12b0f-153">It allows you to authenticate with Azure so that you can manage Azure Resource Manager resources from runbooks.</span></span>  <span data-ttu-id="12b0f-154">Срок действия этого сертификата — один год.</span><span class="sxs-lookup"><span data-stu-id="12b0f-154">This certificate has a one-year lifespan.</span></span> |
| <span data-ttu-id="12b0f-155">AzureRunAsConnection</span><span class="sxs-lookup"><span data-stu-id="12b0f-155">AzureRunAsConnection</span></span> |<span data-ttu-id="12b0f-156">Ресурс-контейнер подключений, который автоматически создается во время создания учетной записи службы автоматизации или с помощью приведенного ниже сценария PowerShell для существующей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="12b0f-156">Connection asset automatically created during Automation account creation or using the PowerShell script below for an existing account.</span></span> |

<span data-ttu-id="12b0f-157">В следующей таблице перечислены ресурсы для классической учетной записи запуска от имени.</span><span class="sxs-lookup"><span data-stu-id="12b0f-157">The following table summarizes resources for the Classic Run As account.</span></span><br>

| <span data-ttu-id="12b0f-158">Ресурс</span><span class="sxs-lookup"><span data-stu-id="12b0f-158">Resource</span></span> | <span data-ttu-id="12b0f-159">Описание</span><span class="sxs-lookup"><span data-stu-id="12b0f-159">Description</span></span> |
| --- | --- |
| <span data-ttu-id="12b0f-160">Модуль Runbook AzureClassicAutomationTutorial</span><span class="sxs-lookup"><span data-stu-id="12b0f-160">AzureClassicAutomationTutorial Runbook</span></span> |<span data-ttu-id="12b0f-161">Пример графического модуля Runbook, получающего доступ ко всем классическим виртуальным машинам в подписке с помощью классической учетной записи запуска от имени (сертификат), а затем выводит имя и состояние виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="12b0f-161">An example Graphical runbook, which gets all the Classic VMs in a subscription using the Classic Run As Account (certificate) and then outputs the VM name and status.</span></span> |
| <span data-ttu-id="12b0f-162">Модуль Runbook AzureClassicAutomationTutorialScript</span><span class="sxs-lookup"><span data-stu-id="12b0f-162">AzureClassicAutomationTutorial Script Runbook</span></span> |<span data-ttu-id="12b0f-163">Пример модуля Runbook PowerShell, получающего доступ ко всем классическим виртуальным машинам в подписке с помощью классической учетной записи запуска от имени (сертификат), а затем выводит имя и состояние виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="12b0f-163">An example PowerShell runbook, which gets all the Classic VMs in a subscription using the Classic Run As Account (certificate) and then outputs the VM name and status.</span></span> |
| <span data-ttu-id="12b0f-164">AzureClassicRunAsCertificate</span><span class="sxs-lookup"><span data-stu-id="12b0f-164">AzureClassicRunAsCertificate</span></span> |<span data-ttu-id="12b0f-165">Автоматически созданный ресурс-контейнер сертификатов, который используется для проверки подлинности в Azure, что позволяет управлять классическими ресурсами Azure с помощью модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="12b0f-165">Certificate asset automatically created that is used to authenticate with Azure so that you can manage Azure classic resources from runbooks.</span></span>  <span data-ttu-id="12b0f-166">Срок действия этого сертификата — один год.</span><span class="sxs-lookup"><span data-stu-id="12b0f-166">This certificate has a one-year lifespan.</span></span> |
| <span data-ttu-id="12b0f-167">AzureClassicRunAsConnection</span><span class="sxs-lookup"><span data-stu-id="12b0f-167">AzureClassicRunAsConnection</span></span> |<span data-ttu-id="12b0f-168">Автоматически созданный ресурс-контейнер подключений, который используется для проверки подлинности в Azure, что позволяет управлять классическими ресурсами Azure с помощью модулей Runbook.</span><span class="sxs-lookup"><span data-stu-id="12b0f-168">Connection asset automatically created that is used to authenticate with Azure so that you can manage Azure classic resources from runbooks.</span></span> |


## <a name="next-steps"></a><span data-ttu-id="12b0f-169">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="12b0f-169">Next steps</span></span>
* <span data-ttu-id="12b0f-170">Дополнительные сведения о графической разработке в службе автоматизации Azure см. в [этой статье](automation-graphical-authoring-intro.md).</span><span class="sxs-lookup"><span data-stu-id="12b0f-170">To learn more about Graphical Authoring, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md).</span></span>
* <span data-ttu-id="12b0f-171">Сведения о том, как начать работу с модулями Runbook, см. в статье [Мой первый модуль Runbook PowerShell](automation-first-runbook-textual-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="12b0f-171">To get started with PowerShell runbooks, see [My first PowerShell runbook](automation-first-runbook-textual-powershell.md).</span></span>
* <span data-ttu-id="12b0f-172">Чтобы приступить к работе с модулями Runbook рабочих процессов PowerShell, обратитесь к статье [Первый Runbook рабочего процесса PowerShell](automation-first-runbook-textual.md).</span><span class="sxs-lookup"><span data-stu-id="12b0f-172">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md).</span></span>