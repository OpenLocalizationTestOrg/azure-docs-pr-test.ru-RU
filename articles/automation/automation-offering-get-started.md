---
title: "AAA приступить к работе со службой автоматизации Azure | Документы Microsoft"
description: "Также приводятся общие сведения о службе автоматизации Azure, просмотрев сведения о проектирования и реализации hello в hello tooonboard подготовки предложения из Azure Marketplace."
services: automation
documentationcenter: 
author: mgoedtel
manager: carmonm
editor: 
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 08/18/2017
ms.author: magoedte
ms.openlocfilehash: 434e8ea28c55ff9bda1d2e46a7a6b8378a3baa0a
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="getting-started-with-azure-automation"></a>Приступая к работе со службой автоматизации Azure

Это руководство для начинающих получении представлены основные понятия связанные toohello развертывания автоматизации Azure. При новой tooAutomation в Azure или есть опыт работы с по автоматизации рабочего процесса, например System Center Orchestrator, это руководство поможет вам понять, как tooprepare и встроенного автоматизации.  После этого можно будет подготавливаться toobegin разработка модулей Runbook для поддержки потребностей автоматизации процесса. 


## <a name="automation-architecture-overview"></a>Общие сведения об архитектуре автоматизации

![Обзор службы автоматизации Azure](media/automation-offering-get-started/automation-infradiagram-networkcomms.png)

Служба автоматизации Azure — это программное обеспечение как услуга (SaaS) приложение, предоставляющий масштабируемые и надежные, многопользовательское среды tooautomate обрабатывает с модулями Runbook и управления tooWindows изменения конфигурации и систем Linux, с помощью настройки требуемого состояния (DSC) в Azure, а другие облачные службы или локальной. Сущности внутри вашей учетной записи службы автоматизации, например модули Runbook, ресурсы, учетные записи запуска от имени, изолированы от других учетных записей службы автоматизации в вашей и других подписках.  

Модули Runbook, запускаемые в Azure, выполняются в "песочницах" службы автоматизации, размещенных на виртуальных машинах PaaS Azure.  "Песочница" службы автоматизации обеспечивает изоляцию клиентов во всех аспектах выполнения модулей Runbook (модули, хранилище, память, сетевое взаимодействие, потоки заданий и т. д.). Эта роль управляется службой hello и не доступен из вашей учетной записи Azure или Azure Automation для вас toocontrol.         

tooautomate hello развертывание и управление ресурсами в локальном центре обработки данных или других облачных служб, после создания учетной записи автоматизации, можно назначить один или несколько hello машины toorun [гибридных Runbook Worker (HRW)](automation-hybrid-runbook-worker.md) роли.  Каждый HRW требует hello Microsoft Management Agent с рабочей области аналитики журналов tooa соединения и учетной записи автоматизации.  Аналитика журналов является установка используется toobootstrap hello, обслуживания hello агента управления Майкрософт и наблюдения за функции hello hello HRW.  Передача Hello Runbook и hello toorun инструкция их выполняются службой автоматизации Azure.

Можно развернуть несколько HRW tooprovide высокий уровень доступности для Runbook, заданиях балансировки нагрузки и в некоторых случаях выделите их для конкретной рабочей нагрузки или при определенных условиях.  Hello Microsoft Monitoring Agent на hello HRW инициирует взаимодействие с hello служба автоматизации через TCP-порт 443 и брандмауэра для входящих подключений требования отсутствуют.  После у вас есть runbook, работающих на HRW в среде hello и задачи управления tooperform hello runbook с других компьютеров или служб в этой среде, возможно быть другие порты, которые hello runbook требуется доступ к.  Если ИТ политики безопасности не допускают компьютеров на toohello tooconnect вашей сети Интернет, см. статью hello [OMS шлюза](../log-analytics/log-analytics-oms-gateway.md), который действует как прокси для hello HRW toocollect состояние задания и получения сведений о конфигурации из Ваша учетная запись автоматизации.

Модулей Runbook, запущенных на HRW, выполняются в контексте hello hello локальная системная учетная запись компьютера hello, который hello рекомендуется использовать контекст безопасности при выполнении административных задач на локальном компьютере Windows hello. Если вы хотите hello runbook toorun задачи к ресурсам за пределами локального компьютера hello, может потребоваться toodefine средств безопасные учетные данные в учетной записи автоматизации, можно открыть из модуля runbook hello и использовать tooauthenticate с внешнего ресурса hello hello. Можно использовать [учетные данные](automation-credentials.md), [сертификат](automation-certificates.md), и [подключения](automation-connections.md) активы в модуле runbook с помощью командлетов, позволяющих toospecify учетные данные, можно выполнить проверку подлинности.

Конфигурации DSC, хранящиеся в службе автоматизации Azure можно непосредственно примененных tooAzure виртуальных машин. Другие физические и виртуальные машины могут запрашивать конфигурации с опрашивающего сервера DSC службы автоматизации Azure hello.  Для управления конфигурациями локальных физических или виртуальных Windows и Linux систем, не требуется toodeploy любой инфраструктуры toosupport hello автоматизации опрашивающего сервера DSC, только исходящие подключения к Интернету из каждой toobe системы под управлением DSC службы автоматизации , обмен данными по службой OMS toohello TCP порт 443.   

## <a name="prerequisites"></a>Предварительные требования

### <a name="automation-dsc"></a>Automation DSC
Azure Automation DSC можно использовать toomanage различных компьютеров:

* Виртуальные машины Azure (классические) под управлением Windows или Linux.
* Виртуальные машины Azure под управлением Windows или Linux.
* Виртуальные машины Amazon Web Services (AWS) под управлением Windows или Linux.
* Физические или виртуальные машины под управлением Windows, расположенные локально или в облачной службе, отличной от Azure или AWS.
* Физические или виртуальные машины под управлением Linux, расположенные локально или в облачной службе, отличной от Azure или AWS.

последнюю версию WMF 5 Hello должны устанавливаться hello агента PowerShell DSC для Windows toobe может toocommunicate в службе автоматизации Azure. последнюю версию Hello hello [агента PowerShell DSC для Linux](https://www.microsoft.com/en-us/download/details.aspx?id=49150) должны быть установлены для Linux toobe может toocommunicate в службе автоматизации Azure.

### <a name="hybrid-runbook-worker"></a>гибридный компонент Runbook Worker  
Когда назначение заданий runbook гибридных toorun компьютера, этот компьютер должен иметь hello следующее:

* Windows Server 2012 или более поздней версии;
* Windows PowerShell, начиная с версии 4.0.  Мы рекомендуем установить на компьютере hello для обеспечения повышенной надежности Windows PowerShell 5.0. Hello новую версию можно загрузить из hello [центра загрузки Майкрософт](https://www.microsoft.com/download/details.aspx?id=50395)
* Как минимум два ядра.
* Не менее 4 ГБ ОЗУ.

### <a name="permissions-required-toocreate-automation-account"></a>Разрешения, необходимые учетной записи автоматизации toocreate
toocreate или обновление учетной записи автоматизации, необходимо иметь hello следующие специальные права и разрешения, необходимые toocomplete в этом разделе.   
 
* Порядок toocreate учетной записи автоматизации, учетная запись пользователя AD должен toobe добавлены tooa роль с роль владельца toohello эквивалентные разрешения для ресурсов Microsoft.Automation как описано в статье [управление доступом на основе ролей в службе автоматизации Azure ](automation-role-based-access-control.md).  
* Если параметр регистрации приложения hello задано слишком**Да**, пользователи без прав администратора в клиенте Azure AD могут [регистрировать приложения AD](../azure-resource-manager/resource-group-create-service-principal-portal.md#check-azure-subscription-permissions).  Если параметр регистрации приложения hello задано слишком**нет**, hello пользователь, выполняющий это действие должно быть глобальным администратором в Azure AD. 

Если вы не является членом экземпляра Active Directory hello подписки до добавления toohello глобальный администратор или соадминистратор роли hello подписки, tooActive Directory добавляются как Гость. В этом случае вы получите «у вас разрешения toocreate...» Предупреждение, hello **Добавление учетной записи автоматизации** колонку. Пользователи, добавленные toohello глобальный администратор или соадминистратор роль сначала можно удалить из экземпляра Active Directory hello подписки и повторно добавлен toomake их полный пользователя в Active Directory. tooverify этой ситуации из hello **Azure Active Directory** панели hello Azure portal, **пользователей и групп**выберите **всех пользователей** и после выбора hello конкретного пользователя, **профиль**. Здравствуйте, значение hello **тип пользователя** атрибут профиля hello пользователи не должны быть равны **гостевой**.

## <a name="authentication-planning"></a>Планирование проверки подлинности
Служба автоматизации Azure позволяет tooautomate задач от ресурсов в Azure, в локальной среде, а также с другими поставщиками облака.  Чтобы runbook tooperform необходимые действия, он должен иметь hello доступ к ресурсам для разрешения toosecurely hello минимальные права, необходимые в рамках подписки hello.  

### <a name="what-is-an-automation-account"></a>Что такое учетная запись службы автоматизации 
Все задачи автоматизации hello, выполняемых к ресурсам с помощью командлетов Azure hello в службе автоматизации Azure пройти проверку подлинности с помощью проверки подлинности на основе учетных данных удостоверения организации Azure Active Directory tooAzure.  Учетная запись автоматизации отличается от учетной записи hello в портала tooconfigure toohello используется toosign и использовать ресурсы Azure.  Ресурсы автоматизации, включенные с помощью учетной записи, hello следующее:

* **Сертификаты** — содержит сертификат для проверки подлинности из модуля Runbook или конфигурации DSC. Сертификаты можно добавлять.
* **Подключения** -содержит проверку подлинности и конфигурации сведения, необходимые tooconnect tooan внешней службе или приложению из модуля runbook или конфигурации DSC.
* **Учетные данные** -является объект PSCredential, который содержит учетные данные безопасности, такие как имя пользователя и пароль, необходимый tooauthenticate из runbook или конфигурации DSC.
* **Модули интеграции** -являются модули PowerShell включены toomake использования учетной записи службы автоматизации Azure командлетов в Runbook и конфигураций DSC.
* **Расписания** — содержит расписания, при помощи которых модуль Runbook запускается или прекращает работу в указанное время, в том числе частоту повторения этих операций.
* **Переменные** — содержит значения, доступные из модуля Runbook или конфигурации DSC.
* **Конфигурации DSC** -скрипты PowerShell, которые описываются как tooconfigure это функция операционной системы или параметрах, и установка приложения на компьютере Windows или Linux.  
* **Модули runbook** — это набор задач, которые выполняют какой-либо автоматизированный процесс в службе автоматизации Azure на основе Windows PowerShell.    

ресурсы автоматизации Hello для каждой учетной записи автоматизации связаны с одной областью Azure, но учетные записи автоматизации можно управлять ресурсами hello в вашей подписке. Создание учетных записей автоматизации в разных регионах, при наличии политики, требующие данные и ресурсы toobe изолированной tooa определенного региона.

> [!NOTE]
> Учетные записи автоматизации и ресурсы hello, они содержат, создаются в hello портал Azure, не удалось получить из hello классический портал Azure. Если требуется toomanage этих учетных записей или их ресурсам с помощью Windows PowerShell, необходимо использовать модули диспетчера ресурсов Azure hello.
> 

При создании учетной записи автоматизации в hello портал Azure можно автоматически создавать две сущности проверки подлинности:

* Учетная запись запуска от имени. Эта учетная запись создает субъект-службу в Azure Active Directory (Azure AD) и сертификат, Присваивает hello участника доступом на основе ролей (RBAC), управляющему ресурсы диспетчера ресурсов с помощью Runbook.
* Классическая учетная запись запуска от имени. Эта учетная запись отправляет сертификат управления, которая представляет используемые toomanage классические ресурсы с помощью модулей Runbook.

Управление доступом на основе ролей доступен с помощью диспетчера ресурсов Azure toogrant допускается учетная запись пользователя Azure AD tooan действия и учетная запись запуска от имени и проверки подлинности этого участника службы.  Чтение [управления доступом на основе ролей в Azure Automation статье](automation-role-based-access-control.md) для получения дополнительных сведений toohelp разрабатывать модель для управления разрешениями автоматизации.  

#### <a name="authentication-methods"></a>Методы проверки подлинности
Hello Следующая таблица обобщает hello разными методами проверки подлинности для каждой среды, поддерживается службой автоматизации Azure.

| Метод | Среда 
| --- | --- | 
| Учетная запись запуска от имени Azure или классическая учетная запись запуска от имени |Azure Resource Manager и классическое развертывание Azure |  
| Учетная запись пользователя Azure AD |Azure Resource Manager и классическое развертывание Azure |  
| Проверка подлинности Windows |Локальном центре обработки данных или другой поставщик облака, с помощью hello гибридной рабочей роли Runbook |  
| Учетные данные AWS |Amazon Web Services |  

В разделе hello **как to\Authentication и безопасность** статьи, поддерживаете статей, предоставляя Обзор и реализации tooconfigure проверки подлинности для этих сред с существующим или создать учетную запись Выделите для этой среды.  Hello запуска от имени Azure и классический запись запуска от имени, hello разделе [обновление автоматизации запуска от имени учетной записи](automation-create-runas-account.md) описывает, как tooupdate существующую учетную запись автоматизации с hello запуска от имени учетных записей из портала hello или с помощью PowerShell, если она не была изначально настроена с помощью учетной записи запуска от имени или классический Запуск от имени. Если требуется toocreate запуска от имени и классический учетной записи запуска с сертификатом, выданным вашего центра сертификации предприятия (ЦС), просмотрите этот toolearn статье как toocreate hello учетных записей с помощью этой конфигурации.     
 
## <a name="network-planning"></a>Планирование сети
Для hello гибридной рабочей ролью Runbook tooconnect tooand регистрации с Microsoft Operations Management Suite (OMS) он должен иметь номер порта toohello доступа и URL-адреса hello описано ниже.  Кроме того, это является toohello [портов и URL-адреса, необходимые для hello Microsoft Monitoring Agent](../log-analytics/log-analytics-windows-agents.md#network) tooconnect tooOMS. При использовании прокси-сервера для обмена данными между агентом hello и службой OMS hello необходимо tooensure, hello соответствующие ресурсы доступны. Если вы используете toohello доступа toorestrict брандмауэра Интернета, tooconfigure необходим доступ toopermit вашего брандмауэра.

сведения о Hello ниже списке hello порт и URL-адреса, которые требуются для hello toocommunicate гибридной рабочей роли Runbook с помощью автоматизации.

* Порт: только исходящий трафик Интернета через TCP-порт 443.
* Глобальный URL-адрес: *.azure-automation.net.

Если у вас есть учетная запись автоматизации, определенных для определенного региона и требуется toorestrict связи с этом центре обработки данных, hello Следующая таблица содержит hello DNS-запись для каждого региона.

| **Регион** | **Запись DNS** |
| --- | --- |
| Южно-центральный регион США |scus-jobruntimedata-prod-su1.azure-automation.net |
| Восток США 2 |eus2-jobruntimedata-prod-su1.azure-automation.net |
| Западно-центральная часть США | wcus-jobruntimedata-prod-su1.azure-automation.net |
| Западная Европа |we-jobruntimedata-prod-su1.azure-automation.net |
| Северная Европа |ne-jobruntimedata-prod-su1.azure-automation.net |
| Центральная Канада |cc-jobruntimedata-prod-su1.azure-automation.net |
| Юго-Восточная Азия |sea-jobruntimedata-prod-su1.azure-automation.net |
| Центральная Индия |cid-jobruntimedata-prod-su1.azure-automation.net |
| Восточная часть Японии |jpe-jobruntimedata-prod-su1.azure-automation.net |
| Юго-Восточная Австралия |ase-jobruntimedata-prod-su1.azure-automation.net |
| Южная часть Великобритании | uks-jobruntimedata-prod-su1.azure-automation.net |
| Правительство штата Вирджиния | usge-jobruntimedata-prod-su1.azure-automation.us |

Список IP-адресов, а не имена, загрузить и просмотреть hello [адрес центра обработки данных Azure](https://www.microsoft.com/download/details.aspx?id=41653) XML-файл из центра загрузки Майкрософт hello. 

> [!NOTE]
> Этот файл содержит hello диапазоны IP-адресов (включая диапазоны вычисления, SQL и хранилища) используется в hello центры обработки данных Microsoft Azure. Обновленный файл отправляется еженедельно, отражающее диапазоны развернутые hello и все диапазоны IP-toohello предстоящих изменениях. Новые диапазоны, появляющихся в файле hello не используется в центрах обработки данных hello хотя бы одну неделю. Проверьте загрузки hello нового xml файл каждую неделю и выполните необходимые изменения hello на сайте toocorrectly идентификации службы, работающие в Azure. Express маршрутизации пользователей можете отметить, что этот файл используется tooupdate hello объявления BGP Azure пространства в hello первой недели каждого месяца. 
> 

## <a name="creating-an-automation-account"></a>Создание учетной записи службы автоматизации

Можно различными способами, можно создать учетную запись автоматизации в hello портал Azure.  Hello в следующей таблице представлены каждый тип развертывания качества и различия между ними.  

|Метод | Описание |
|-------|-------------|
| Выбор элемента управления и автоматизации из hello Marketplace | Предложения, которое создает рабочую область OMS и учетную запись автоматизации связаны tooone Здравствуйте, другой в ту же группу ресурсов и регион.  Интеграция с OMS также включает hello преимущество использования toomonitor анализа журналов и анализа потоков состояния и задание задания runbook со временем и использовать расширенные функции tooescalate или проанализировать проблемы. Hello предложения также развертывает решения hello отслеживания изменений и управления обновлениями, которые включены по умолчанию. |
| Выберите автоматизации hello Marketplace | Создает учетную запись службы автоматизации в группе новый или существующий ресурс, не связанный tooan рабочей области OMS, а не включает все доступные решения из элемента управления и автоматизации предложения hello. Это является базовой конфигурации, которая познакомит tooAutomation и позволяют узнать, как модули Runbook toowrite конфигураций DSC и используйте hello возможности службы hello. |
| Выбор решений для управления | Если выбрано решение —  **[управления обновлениями](../operations-management-suite/oms-solution-update-management.md)**,  **[запуск и остановка виртуальных машин во время нерабочие часы](automation-solution-vm-management.md)**, или  **[ Отслеживание изменений](../log-analytics/log-analytics-change-tracking.md)**  они приглашение tooselect существующую среду автоматизации и рабочая область OMS или предлагать hello toocreate параметр, и как необходимые для решения toobe hello, развернутых в вашей подписке. |

В этом разделе описывается создание учетной записи автоматизации и рабочей областью OMS по адаптации hello элемента управления и автоматизации предложения.  toocreate автономного учетной записи автоматизации для тестирования или toopreview hello службы проверки hello следующей статьей [создать учетную запись автоматизации автономный](automation-create-standalone-account.md).  

### <a name="create-automation-account-integrated-with-oms"></a>Создание учетной записи службы автоматизации, интегрированной с OMS
Hello рекомендуется использовать метод tooonboard автоматизации — путем выбора элемента управления и автоматизации предложения hello из hello Marketplace.  Это создает как учетная запись службы автоматизации и устанавливает hello интеграция с рабочей области OMS, включая hello параметр tooinstall hello решения для управления, доступных в рамках предложения hello.  

1. Войдите в систему toohello портал Azure с учетную запись, которая является членом роли администраторов подписки hello и соадминистратором подписки hello.

2. Нажмите кнопку **Создать**.<br><br> ![Выбор пункта "Создать" на портале Azure](media/automation-offering-get-started/automation-portal-martketplacestart.png)<br>  

3. Поиск **автоматизации** и затем в hello результатов выберите **элемента управления и автоматизации***.<br><br> ![Поиск и выбор элемента "Автоматизация и управление" в Marketplace](media/automation-offering-get-started/automation-portal-martketplace-select-automationandcontrol.png).<br>   

4. После прочтения hello описание предложения hello, нажмите кнопку **создать**.  

5. На hello **элемента управления и автоматизации** колонку параметров, выберите **рабочей области OMS**.  На hello **рабочих областей OMS** колонке выберите toohello связанной рабочей области OMS, возможности одной подписке, hello учетной записи автоматизации или создайте рабочую область OMS.  Если у вас рабочей области OMS, выберите **создать новую рабочую область** и на hello **рабочей области OMS** колонке выполните следующие hello: 
   - Укажите имя для нового hello **рабочей области OMS**.
   - Выберите **подписки** toolink tooby выбора из раскрывающегося списка hello Если выбрано значение по умолчанию hello не подходит.
   - В качестве **группы ресурсов** можно использовать имеющуюся группу или создать новую.  
   - Выберите **расположение**.  В настоящее время являются hello только местоположений, доступных **Юго-Восточная Австралия**, **Восток США**, **Юго-Восточная Азия**, **Западная центральной части США**и  **Западная Европа**.
   - Выберите **ценовую категорию**.  предлагаемое решение Hello в двух уровнях: уровне каждого узла (OMS) и бесплатный.  Hello уровень free имеет ограничение на объем hello данные, собранные дням, срок хранения и минут времени выполнения задания runbook.  Hello уровне каждого узла (OMS) не имеет ограничения по объему ежедневно собираемых данных hello.  
   - Выберите **Учетная запись службы автоматизации**.  Если вы создаете новую рабочую область OMS, вы должны tooalso создания учетной записи автоматизации, связанный с hello новой рабочей области OMS указанный ранее, включая подписки Azure, группа ресурсов и регион.  Можно выбрать **создать учетную запись автоматизации** и на hello **учетной записи автоматизации** колонке предоставляют следующие hello: 
  - В hello **имя** введите имя учетной записи автоматизации hello hello.

    Все остальные параметры заполняются автоматически в зависимости от выбранной рабочей области OMS hello и не удается изменить эти параметры.  Учетная запись запуска от имени Azure — метод проверки подлинности по умолчанию hello hello предложения.  После нажатия кнопки **ОК**, параметры конфигурации hello проверяются и создается hello учетной записи автоматизации.  Вы можете отслеживать ход его выполнения в группе **уведомления** меню "hello". 

    В противном случае можно выбрать имеющуюся учетную запись запуска от имени службы автоматизации.  Hello учетной записи, при выборе не может быть уже связанного tooanother рабочей области OMS, в противном случае выводится сообщение уведомления в колонке hello.  Если он уже связан, необходима tooselect другую учетную запись автоматизации Запуск от имени или создать его.

    Завершив hello сведения, необходимые, щелкните **создать**.  осуществляется Hello и hello учетную запись автоматизации "и" Запуск от имени учетных записей.  Возвращаются toohello **рабочей области OMS** колонке автоматически.  

6. После предоставления необходимых hello сведений на hello **рабочей области OMS** колонка, щелкните **создать**.  Хотя осуществляется hello и создания рабочей области hello, вы можете отслеживать ход его выполнения в группе **уведомления** меню "hello".  Возвращаются toohello **добавить решение** колонку.  

7. На hello **элемента управления и автоматизации** колонку параметров подтверждения tooinstall hello рекомендуемые решения, выбранного ранее. Если вы отмените выбор какого-либо решения, позже их можно будет установить по отдельности.  

8. Нажмите кнопку **создать** tooproceed с переносом автоматизации и рабочей области OMS. Проверяются все параметры, а затем он пытается hello toodeploy предложения в вашей подписке.  Этот процесс может занять несколько секунд toocomplete и можно отслеживать ход его выполнения в группе **уведомления** меню "hello". 

После предложения hello встроен, можно приступить к созданию модулей Runbook, работа с hello вы включили решения для управления, развертывания [гибридной рабочей роли Runbook](automation-hybrid-runbook-worker.md) роли или начало работы с [анализа журналов](https://docs.microsoft.com/azure/log-analytics) toocollect данные, созданные ресурсов в облаке или в локальной среде.   

## <a name="next-steps"></a>Дальнейшие действия
* Чтобы убедиться, что учетная запись службы автоматизации может выполнять проверку подлинности ресурсов Azure, ознакомьтесь со статьей [Тестирование проверки подлинности учетной записи запуска от имени службы автоматизации Azure](automation-verify-runas-authentication.md).
* tooget работу с создания модулей Runbook, сначала проверьте hello [типы runbook автоматизации](automation-runbook-types.md) поддерживается и связанные рекомендации перед началом разработки.


