---
title: "Устранение распространенных проблем службы автоматизации Azure | Документация Майкрософт"
description: "В этой статье приведены сведения, которые позволят диагностировать и устранять распространенные ошибки службы автоматизации Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: stevenka
editor: tysonn
tags: top-support-issue
keywords: "ошибка службы автоматизации, устранение неполадок, проблема"
ms.assetid: 5f3cfe61-70b0-4e9c-b892-d02daaeee07d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/26/2017
ms.author: sngun; v-reagie
ms.openlocfilehash: 64548d91e98754210cc5185d9d759141cc0621d3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="troubleshooting-common-issues-in-azure-automation"></a><span data-ttu-id="030e2-104">Устранение распространенных проблем службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="030e2-104">Troubleshooting common issues in Azure Automation</span></span> 
<span data-ttu-id="030e2-105">Эта статья содержит сведения о распространенных ошибках, которые могут возникнуть в службе автоматизации Azure, и возможных решениях по их устранению.</span><span class="sxs-lookup"><span data-stu-id="030e2-105">This article provides help troubleshooting common errors you might experience in Azure Automation and suggests possible solutions to resolve them.</span></span>

## <a name="authentication-errors-when-working-with-azure-automation-runbooks"></a><span data-ttu-id="030e2-106">Ошибки, связанные с аутентификацией, при работе с модулями Runbook службы автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="030e2-106">Authentication errors when working with Azure Automation runbooks</span></span>
### <a name="scenario-sign-in-to-azure-account-failed"></a><span data-ttu-id="030e2-107">Сценарий: не удается войти в учетную запись Azure</span><span class="sxs-lookup"><span data-stu-id="030e2-107">Scenario: Sign in to Azure Account failed</span></span>
<span data-ttu-id="030e2-108">**Ошибка:** при работе с командлетами Add-AzureAccount или Login-AzureRmAccount возникает ошибка "Unknown_user_type: неизвестный тип пользователя".</span><span class="sxs-lookup"><span data-stu-id="030e2-108">**Error:** You receive the error "Unknown_user_type: Unknown User Type" when working with the Add-AzureAccount or Login-AzureRmAccount cmdlets.</span></span>

<span data-ttu-id="030e2-109">**Причина ошибки** : она возникает, если недействительно имя ресурса-контейнера учетных данных, а также имя пользователя и пароль, которые использовались при настройке ресурса-контейнера учетных данных службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="030e2-109">**Reason for the error:** This error occurs if the credential asset name is not valid or if the username and password that you used to setup the Automation credential asset are not valid.</span></span>

<span data-ttu-id="030e2-110">**Советы по устранению неполадки** : чтобы определить причину ошибки, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="030e2-110">**Troubleshooting tips:** In order to determine what's wrong, take the following steps:</span></span>  

1. <span data-ttu-id="030e2-111">Убедитесь, что в имени ресурса-контейнера учетных данных службы автоматизации, используемом для подключения к Azure, отсутствуют специальные знаки, включая **@** .</span><span class="sxs-lookup"><span data-stu-id="030e2-111">Make sure that you don’t have any special characters, including the **@** character in the Automation credential asset name that you are using to connect to Azure.</span></span>  
2. <span data-ttu-id="030e2-112">Убедитесь, что вы можете использовать имя пользователя и пароль, которые хранятся в учетных данных службы автоматизации Azure в редакторе локальной интегрированной среды сценариев PowerShell.</span><span class="sxs-lookup"><span data-stu-id="030e2-112">Check that you can use the username and password that are stored in the Azure Automation credential in your local PowerShell ISE editor.</span></span> <span data-ttu-id="030e2-113">Для этого в интегрированной среде сценариев PowerShell выполните следующие командлеты:</span><span class="sxs-lookup"><span data-stu-id="030e2-113">You can do this by running the following cmdlets in the PowerShell ISE:</span></span>  

        $Cred = Get-Credential  
        #Using Azure Service Management   
        Add-AzureAccount –Credential $Cred  
        #Using Azure Resource Manager  
        Login-AzureRmAccount –Credential $Cred
3. <span data-ttu-id="030e2-114">Локальный сбой проверки подлинности означает, что учетные данные Azure Active Directory были указаны неправильно.</span><span class="sxs-lookup"><span data-stu-id="030e2-114">If your authentication fails locally, this means that you haven’t set up your Azure Active Directory credentials properly.</span></span> <span data-ttu-id="030e2-115">Сведения о том, как правильно настроить учетную запись Azure Active Directory, см. в записи блога об [аутентификации в Azure с помощью Azure Active Directory](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/).</span><span class="sxs-lookup"><span data-stu-id="030e2-115">Refer to [Authenticating to Azure using Azure Active Directory](https://azure.microsoft.com/blog/azure-automation-authenticating-to-azure-using-azure-active-directory/) blog post to get the Azure Active Directory account set up correctly.</span></span>  

### <a name="scenario-unable-to-find-the-azure-subscription"></a><span data-ttu-id="030e2-116">Сценарий: не удается найти подписку Azure</span><span class="sxs-lookup"><span data-stu-id="030e2-116">Scenario: Unable to find the Azure subscription</span></span>
<span data-ttu-id="030e2-117">**Ошибка:** при работе с командлетами Select-AzureSubscription или Select-AzureSubscription возникает ошибка "Подписка с именем ``<subscription name>`` не найдена".</span><span class="sxs-lookup"><span data-stu-id="030e2-117">**Error:** You receive the error "The subscription named ``<subscription name>`` cannot be found" when working with the Select-AzureSubscription or Select-AzureRmSubscription cmdlets.</span></span>

<span data-ttu-id="030e2-118">**Причина ошибки** : эта ошибка возникает, если недействительно имя подписки, а также если пользователь Azure Active Directory, который пытается получить сведения о подписке, не является ее администратором.</span><span class="sxs-lookup"><span data-stu-id="030e2-118">**Reason for the error:** This error occurs if the subscription name is not valid or if the Azure Active Directory user who is trying to get the subscription details is not configured as an admin of the subscription.</span></span>

<span data-ttu-id="030e2-119">**Советы по устранению неполадки** : чтобы убедиться, что вы прошли аутентификацию в Azure и получили доступ к требуемой подписке, сделайте следующее.</span><span class="sxs-lookup"><span data-stu-id="030e2-119">**Troubleshooting tips:** In order to determine if you have properly authenticated to Azure and have access to the subscription you are trying to select, take the following steps:</span></span>  

1. <span data-ttu-id="030e2-120">Убедитесь, что вы выполняете командлет **Add-AzureAccount** перед командлетом **Select-AzureSubscription**.</span><span class="sxs-lookup"><span data-stu-id="030e2-120">Make sure that you run the **Add-AzureAccount** before running the **Select-AzureSubscription** cmdlet.</span></span>  
2. <span data-ttu-id="030e2-121">Если это сообщение об ошибке не исчезло, измените код, добавив командлет **Get-AzureSubscription** после командлета **Add-AzureAccount**, а затем выполните код.</span><span class="sxs-lookup"><span data-stu-id="030e2-121">If you still see this error message, modify your code by adding the **Get-AzureSubscription** cmdlet following the **Add-AzureAccount** cmdlet and then execute the code.</span></span>  <span data-ttu-id="030e2-122">Теперь проверьте, содержат ли выходные данные командлета Get-AzureSubscription сведения о подписке.</span><span class="sxs-lookup"><span data-stu-id="030e2-122">Now verify if the output of Get-AzureSubscription contains your subscription details.</span></span>  

   * <span data-ttu-id="030e2-123">Если вы не видите сведения о подписке в выходных данных, это означает, что подписка еще не инициализирована.</span><span class="sxs-lookup"><span data-stu-id="030e2-123">If you don't see any subscription details in the output, this means that the subscription isn’t initialized yet.</span></span>  
   * <span data-ttu-id="030e2-124">Если сведения о подписке отображаются в выходных данных, убедитесь, что с командлетом **Select-AzureSubscription** используется правильное имя или идентификатор подписки.</span><span class="sxs-lookup"><span data-stu-id="030e2-124">If you do see the subscription details in the output, confirm that you are using the correct subscription name or ID with the **Select-AzureSubscription** cmdlet.</span></span>   

### <a name="scenario-authentication-to-azure-failed-because-multi-factor-authentication-is-enabled"></a><span data-ttu-id="030e2-125">Сценарий: не удается выполнить проверку подлинности в Azure из-за включенной многофакторной проверки подлинности</span><span class="sxs-lookup"><span data-stu-id="030e2-125">Scenario: Authentication to Azure failed because multi-factor authentication is enabled</span></span>
<span data-ttu-id="030e2-126">**Ошибка** : во время аутентификации в Azure с использованием имени пользователя и пароля Azure отображается сообщение об ошибке "Add-AzureAccount: AADSTS50079: Strong authentication enrollment (proof-up) is required" (Add-AzureAccount: AADSTS50079: требуется регистрация со строгой аутентификацией (с подтверждением)).</span><span class="sxs-lookup"><span data-stu-id="030e2-126">**Error:** You receive the error “Add-AzureAccount: AADSTS50079: Strong authentication enrollment (proof-up) is required” when authenticating to Azure with your Azure username and password.</span></span>

<span data-ttu-id="030e2-127">**Причина ошибки** : если в учетной записи Azure активирована многофакторная проверка подлинности, применять пользователя Azure Active Directory для аутентификации в Azure нельзя.</span><span class="sxs-lookup"><span data-stu-id="030e2-127">**Reason for the error:** If you have multi-factor authentication on your Azure account, you can't use an Azure Active Directory user to authenticate to Azure.</span></span>  <span data-ttu-id="030e2-128">Вместо этого при проверке подлинности в Azure используйте сертификат или субъект-службу.</span><span class="sxs-lookup"><span data-stu-id="030e2-128">Instead, you need to use a certificate or a service principal to authenticate to Azure.</span></span>

<span data-ttu-id="030e2-129">**Советы по устранению неполадки.** Сведения об использовании сертификата с командлетами управления службами Azure см. в руководстве по [созданию и добавлению сертификатов для управления службами Azure](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx).</span><span class="sxs-lookup"><span data-stu-id="030e2-129">**Troubleshooting tips:** To use a certificate with the Azure Service Management cmdlets, refer to [creating and adding a certificate to manage Azure services.](http://blogs.technet.com/b/orchestrator/archive/2014/04/11/managing-azure-services-with-the-microsoft-azure-automation-preview-service.aspx)</span></span> <span data-ttu-id="030e2-130">Сведения об использовании субъекта-службы с командлетами диспетчера ресурсов Azure см. в статьях о [создании субъекта-службы с помощью портала Azure](../azure-resource-manager/resource-group-create-service-principal-portal.md) и [аутентификации субъекта-службы в диспетчере ресурсов Azure](../azure-resource-manager/resource-group-authenticate-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="030e2-130">To use a service principal with Azure Resource Manager cmdlets, refer to [creating service principal using Azure portal](../azure-resource-manager/resource-group-create-service-principal-portal.md) and [authenticating a service principal with Azure Resource Manager.](../azure-resource-manager/resource-group-authenticate-service-principal.md)</span></span>

## <a name="common-errors-when-working-with-runbooks"></a><span data-ttu-id="030e2-131">Распространенные ошибки при работе с модулями Runbook</span><span class="sxs-lookup"><span data-stu-id="030e2-131">Common errors when working with runbooks</span></span>
### <a name="scenario-the-runbook-job-start-was-attempted-three-times-but-it-failed-to-start-each-time"></a><span data-ttu-id="030e2-132">Сценарий: было предпринято три попытки запуска задания Runbook, но все они были неудачными</span><span class="sxs-lookup"><span data-stu-id="030e2-132">Scenario: The runbook job start was attempted three times, but it failed to start each time</span></span>
<span data-ttu-id="030e2-133">**Ошибка:** запуск задания Runbook завершается ошибкой "The job was tried three times but it failed" (Было предпринято три попытки запуска задания, но все они были неудачными).</span><span class="sxs-lookup"><span data-stu-id="030e2-133">**Error:** Your runbook fails with the error "“The job was tried three times but it failed."</span></span>

<span data-ttu-id="030e2-134">**Причина ошибки:** эта ошибка может вызываться описанными ниже причинами.</span><span class="sxs-lookup"><span data-stu-id="030e2-134">**Reason for the error:** This error can be caused by the following reasons:</span></span>  

1. <span data-ttu-id="030e2-135">Предельный объем памяти.</span><span class="sxs-lookup"><span data-stu-id="030e2-135">Memory Limit.</span></span>  <span data-ttu-id="030e2-136">Объемы памяти, выделяемые для песочницы службы автоматизации, ограничены и приводятся в [этом разделе](../azure-subscription-service-limits.md#automation-limits), поэтому задание может завершиться ошибкой, если оно используют более 400 МБ памяти.</span><span class="sxs-lookup"><span data-stu-id="030e2-136">We have documented limits on how much memory allocated to a Sandbox  [Automation service limits](../azure-subscription-service-limits.md#automation-limits) so a job may fail it if is using more than 400 MB of memory.</span></span> 

2. <span data-ttu-id="030e2-137">Модуль несовместим.</span><span class="sxs-lookup"><span data-stu-id="030e2-137">Module Incompatible.</span></span>  <span data-ttu-id="030e2-138">Данная ситуация может возникать, если зависимости модуля заданы неправильно, в результате чего модуль Runbook, как правило, возвращает сообщение об ошибке "Команда не найдена" или "Не удается привязать параметр".</span><span class="sxs-lookup"><span data-stu-id="030e2-138">This can occur if module dependencies are not correct and if they are not, your runbook will typically return a “Command not found” or "Cannot bind parameter" message.</span></span> 

<span data-ttu-id="030e2-139">**Советы по устранению неполадки** : эту проблему можно устранить одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="030e2-139">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="030e2-140">Чтобы работа выполнялась в заданных пределах объема памяти, рекомендуется разделить рабочую нагрузку между несколькими модулями Runbook, не обрабатывать слишком большой объем данных в памяти, не записывать ненужные выходные данные из модулей Runbook или учитывать, сколько контрольных точек записывается в модули Runbook рабочих процессов PowerShell.</span><span class="sxs-lookup"><span data-stu-id="030e2-140">Suggested methods to work within the memory limit are to split the workload between multiple runbooks, not process as much data in memory, not to write unnecessary output from your runbooks, or consider how many checkpoints you write into your PowerShell workflow runbooks.</span></span>  

* <span data-ttu-id="030e2-141">Необходимо обновить модули Azure, выполнив действия, описанные в статье [Как обновить модули Azure PowerShell в службе автоматизации Azure](automation-update-azure-modules.md).</span><span class="sxs-lookup"><span data-stu-id="030e2-141">You need to update your Azure modules by following the steps [How to update Azure PowerShell modules in Azure Automation](automation-update-azure-modules.md).</span></span>  


### <a name="scenario-runbook-fails-because-of-deserialized-object"></a><span data-ttu-id="030e2-142">Сценарий: сбой модуля Runbook из-за десериализованного объекта</span><span class="sxs-lookup"><span data-stu-id="030e2-142">Scenario: Runbook fails because of deserialized object</span></span>
<span data-ttu-id="030e2-143">**Ошибка:** выполнение модуля Runbook завершается ошибкой "Не удается привязать параметр ``<ParameterName>``.</span><span class="sxs-lookup"><span data-stu-id="030e2-143">**Error:** Your runbook fails with the error "Cannot bind parameter ``<ParameterName>``.</span></span> <span data-ttu-id="030e2-144">Не удается преобразовать значение ``<ParameterType>`` десериализированного типа ``<ParameterType>`` в тип ``<ParameterType>``".</span><span class="sxs-lookup"><span data-stu-id="030e2-144">Cannot convert the ``<ParameterType>`` value of type Deserialized ``<ParameterType>`` to type ``<ParameterType>``".</span></span>

<span data-ttu-id="030e2-145">**Причина ошибки:** когда модуль Runbook является рабочим процессом PowerShell, он хранит сложные объекты в десериализированном формате. Это позволяет сохранить состояние модуля при приостановке рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="030e2-145">**Reason for the error:** If your runbook is a PowerShell Workflow, it stores complex objects in a deserialized format in order to persist your runbook state if the workflow is suspended.</span></span>  

<span data-ttu-id="030e2-146">**Советы по устранению неполадок:**</span><span class="sxs-lookup"><span data-stu-id="030e2-146">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="030e2-147">: эту проблему можно устранить одним из следующих трех способов.</span><span class="sxs-lookup"><span data-stu-id="030e2-147">Any of the following three solutions will fix this problem:</span></span>

1. <span data-ttu-id="030e2-148">Если сложные объекты передаются от одного командлета к другому через конвейер, включите эти командлеты в InlineScript.</span><span class="sxs-lookup"><span data-stu-id="030e2-148">If you are piping complex objects from one cmdlet to another, wrap these cmdlets in an InlineScript.</span></span>  
2. <span data-ttu-id="030e2-149">Передайте только требуемое имя или значение сложного объекта, а не весь объект.</span><span class="sxs-lookup"><span data-stu-id="030e2-149">Pass the name or value that you need from the complex object instead of passing the entire object.</span></span>  
3. <span data-ttu-id="030e2-150">Используйте модуль Runbook PowerShell, а не модуль Runbook рабочего процесса PowerShell.</span><span class="sxs-lookup"><span data-stu-id="030e2-150">Use a PowerShell runbook instead of a PowerShell Workflow runbook.</span></span>  

### <a name="scenario-runbook-job-failed-because-the-allocated-quota-exceeded"></a><span data-ttu-id="030e2-151">Сценарий: не удается выполнить задание модуля Runbook из-за превышения выделенной квоты</span><span class="sxs-lookup"><span data-stu-id="030e2-151">Scenario: Runbook job failed because the allocated quota exceeded</span></span>
<span data-ttu-id="030e2-152">**Ошибка:** задание модуля Runbook завершается ошибкой "Квота ежемесячного общего времени выполнения заданий для этой подписки исчерпана".</span><span class="sxs-lookup"><span data-stu-id="030e2-152">**Error:** Your runbook job fails with the error "The quota for the monthly total job run time has been reached for this subscription".</span></span>

<span data-ttu-id="030e2-153">**Причина ошибки:** эта ошибка возникает, когда время выполнения задания превышает квоту в 500 бесплатных минут для вашей учетной записи.</span><span class="sxs-lookup"><span data-stu-id="030e2-153">**Reason for the error:** This error occurs when the job execution exceeds the 500-minute free quota for your account.</span></span> <span data-ttu-id="030e2-154">Эта квота применяется ко всем типам задач при выполнении задания, включая тестирование задания, запуск задания на портале, выполнение задания с помощью веб-перехватчиков, а также планирование задания с помощью портала Azure или центра обработки данных.</span><span class="sxs-lookup"><span data-stu-id="030e2-154">This quota applies to all types of job execution tasks such as testing a job, starting a job from the portal, executing a job by using webhooks and scheduling a job to execute by using either the Azure portal or in your datacenter.</span></span> <span data-ttu-id="030e2-155">Дополнительные сведения см. на странице [цен на службу автоматизации](https://azure.microsoft.com/pricing/details/automation/).</span><span class="sxs-lookup"><span data-stu-id="030e2-155">To learn more about pricing for Automation see [Automation pricing](https://azure.microsoft.com/pricing/details/automation/).</span></span>

<span data-ttu-id="030e2-156">**Советы по устранению неполадки:** если на обработку задач вам требуется более 500 минут в месяц, выберите для подписки уровень "Базовый" вместо уровня "Бесплатный".</span><span class="sxs-lookup"><span data-stu-id="030e2-156">**Troubleshooting tips:** If you want to use more than 500 minutes of processing per month you will need to change your subscription from the Free tier to the Basic tier.</span></span> <span data-ttu-id="030e2-157">Это можно сделать так.</span><span class="sxs-lookup"><span data-stu-id="030e2-157">You can upgrade to the Basic tier by taking the following steps:</span></span>  

1. <span data-ttu-id="030e2-158">Войдите в свою подписку Azure.</span><span class="sxs-lookup"><span data-stu-id="030e2-158">Sign in to your Azure subscription</span></span>  
2. <span data-ttu-id="030e2-159">Выберите учетную запись службы автоматизации, которую вы хотите обновить.</span><span class="sxs-lookup"><span data-stu-id="030e2-159">Select the Automation account you wish to upgrade</span></span>  
3. <span data-ttu-id="030e2-160">Щелкните **Параметры** > **Ценовая категория и использование** > **Ценовая категория**.</span><span class="sxs-lookup"><span data-stu-id="030e2-160">Click on **Settings** > **Pricing tier and Usage** > **Pricing tier**</span></span>  
4. <span data-ttu-id="030e2-161">В колонке **Выбор ценовой категории** выберите **Базовый**.</span><span class="sxs-lookup"><span data-stu-id="030e2-161">On the **Choose your pricing tier** blade, select **Basic**</span></span>    

### <a name="scenario-cmdlet-not-recognized-when-executing-a-runbook"></a><span data-ttu-id="030e2-162">Сценарий: не удается распознать командлет при выполнении модуля Runbook</span><span class="sxs-lookup"><span data-stu-id="030e2-162">Scenario: Cmdlet not recognized when executing a runbook</span></span>
<span data-ttu-id="030e2-163">**Ошибка:** задание модуля Runbook завершается ошибкой "``<cmdlet name>``: выражение ``<cmdlet name>`` не распознано как имя командлета, функции, файла сценария или исполняемой программы".</span><span class="sxs-lookup"><span data-stu-id="030e2-163">**Error:** Your runbook job fails with the error "``<cmdlet name>``: The term ``<cmdlet name>`` is not recognized as the name of a cmdlet, function, script file, or operable program."</span></span>

<span data-ttu-id="030e2-164">**Причина ошибки** : эта ошибка возникает, когда модулю PowerShell не удается найти командлет, который используется в модуле Runbook.</span><span class="sxs-lookup"><span data-stu-id="030e2-164">**Reason for the error:** This error is caused when the PowerShell engine cannot find the cmdlet you are using in your runbook.</span></span>  <span data-ttu-id="030e2-165">Такое случается, когда в учетной записи отсутствует модуль, содержащий командлет, когда возникает конфликт имен с именем модуля Runbook, а также когда командлет существует и в другом модуле, а службе автоматизации не удается разрешить имя.</span><span class="sxs-lookup"><span data-stu-id="030e2-165">This could be because the module containing the cmdlet is missing from the account, there is a name conflict with a runbook name, or the cmdlet also exists in another module and Automation cannot resolve the name.</span></span>

<span data-ttu-id="030e2-166">**Советы по устранению неполадки** : эту проблему можно устранить одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="030e2-166">**Troubleshooting tips:** Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="030e2-167">Проверьте правильность ввода имени командлета.</span><span class="sxs-lookup"><span data-stu-id="030e2-167">Check that you have entered the cmdlet name correctly.</span></span>  
* <span data-ttu-id="030e2-168">Убедитесь, что командлет существует в учетной записи службы автоматизации, а конфликты отсутствуют.</span><span class="sxs-lookup"><span data-stu-id="030e2-168">Make sure the cmdlet exists in your Automation account and that there are no conflicts.</span></span> <span data-ttu-id="030e2-169">Чтобы проверить наличие командлета, откройте модуль Runbook в режиме редактирования и найдите требуемый командлет в библиотеке или выполните **Get-Command ``<CommandName>``**.</span><span class="sxs-lookup"><span data-stu-id="030e2-169">To verify if the cmdlet is present, open a runbook in edit mode and search for the cmdlet you want to find in the library or run **Get-Command ``<CommandName>``**.</span></span>  <span data-ttu-id="030e2-170">Убедившись в наличии командлета в учетной записи и отсутствии конфликта имен с другими командлетами или модулями Runbook, добавьте его на холст. При этом в модуле Runbook должен использоваться допустимый набор параметров.</span><span class="sxs-lookup"><span data-stu-id="030e2-170">Once you have validated that the cmdlet is available to the account, and that there are no name conflicts with other cmdlets or runbooks, add it to the canvas and ensure that you are using a valid parameter set in your runbook.</span></span>  
* <span data-ttu-id="030e2-171">Если обнаружен конфликт имен, а сам командлет доступен в двух разных модулях, проблему можно решить использованием полного имени командлета.</span><span class="sxs-lookup"><span data-stu-id="030e2-171">If you do have a name conflict and the cmdlet is available in two different modules, you can resolve this by using the fully qualified name for the cmdlet.</span></span> <span data-ttu-id="030e2-172">Например, можно использовать следующий формат: **имя_модуля\имя_командлета**.</span><span class="sxs-lookup"><span data-stu-id="030e2-172">For example, you can use **ModuleName\CmdletName**.</span></span>  
* <span data-ttu-id="030e2-173">Если модуль Runbook выполняется на локальном компьютере в гибридном компоненте Worker, на компьютере с гибридным компонентом Worker должен быть установлен соответствующий модуль или командлет.</span><span class="sxs-lookup"><span data-stu-id="030e2-173">If you are executing the runbook on-premises in a hybrid worker group, then make sure that the module/cmdlet is installed on the machine that hosts the hybrid worker.</span></span>

### <a name="scenario-a-long-running-runbook-consistently-fails-with-the-exception-the-job-cannot-continue-running-because-it-was-repeatedly-evicted-from-the-same-checkpoint"></a><span data-ttu-id="030e2-174">Сценарий: долго работающий модуль Runbook постоянно выдает исключение "Невозможно продолжить выполнение задания, поскольку оно было несколько раз прекращено до достижения контрольной точки".</span><span class="sxs-lookup"><span data-stu-id="030e2-174">Scenario: A long running runbook consistently fails with the exception: "The job cannot continue running because it was repeatedly evicted from the same checkpoint".</span></span>
<span data-ttu-id="030e2-175">**Причина ошибки** : это поведение связано с мониторингом справедливого распределения процессов в службе автоматизации Azure, которая автоматически приостанавливает любой модуль Runbook, выполняемый дольше 3 часов.</span><span class="sxs-lookup"><span data-stu-id="030e2-175">**Reason for the error:** This is by design behavior due to the "Fair Share" monitoring of processes within Azure Automation, which automatically suspends a runbook if it executes longer than 3 hours.</span></span> <span data-ttu-id="030e2-176">В то же время сообщение об ошибке не дает пользователю варианты дальнейших действий.</span><span class="sxs-lookup"><span data-stu-id="030e2-176">However, the error message returned does not provide "what next" options.</span></span> <span data-ttu-id="030e2-177">Модуль Runbook может быть приостановлен по целому ряду причин.</span><span class="sxs-lookup"><span data-stu-id="030e2-177">A runbook can be suspended for a number of reasons.</span></span> <span data-ttu-id="030e2-178">Чаще всего приостановка связана с какой-либо ошибкой.</span><span class="sxs-lookup"><span data-stu-id="030e2-178">Suspends happen mostly due to errors.</span></span> <span data-ttu-id="030e2-179">Например, неперехваченное исключение в модуле Runbook, сетевая ошибка или сбой компонента Runbook Worker в модуле Runbook приводят к тому, что он приостанавливается, а при возобновлении запускается с последней контрольной точки.</span><span class="sxs-lookup"><span data-stu-id="030e2-179">For example, an uncaught exception in a runbook, a network failure, or a crash on the Runbook Worker running the runbook, will all cause the runbook to be suspended and start from its last checkpoint when resumed.</span></span>

<span data-ttu-id="030e2-180">**Советы по устранению неполадок.** Задокументированный способ предотвращения этой проблемы — использовать в рабочем процессе контрольные точки.</span><span class="sxs-lookup"><span data-stu-id="030e2-180">**Troubleshooting tips:** The documented solution to avoid this issue is to use Checkpoints in a workflow.</span></span>  <span data-ttu-id="030e2-181">Дополнительные сведения см. в статье [Изучение рабочего процесса Windows PowerShell](automation-powershell-workflow.md#checkpoints).</span><span class="sxs-lookup"><span data-stu-id="030e2-181">To learn more refer to [Learning PowerShell Workflows](automation-powershell-workflow.md#checkpoints).</span></span>  <span data-ttu-id="030e2-182">Более подробно справедливое распределение процессов и контрольные точки описываются в записи блога [Azure Automation: Reliable, Fault-Tolerant Runbook Execution Using Checkpoints](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/) (Служба автоматизации Azure: надежное и отказоустойчивое выполнение модулей Runbook с помощью контрольных точек).</span><span class="sxs-lookup"><span data-stu-id="030e2-182">A more thorough explanation of "Fair Share" and Checkpoint can be found in this blog article [Using Checkpoints in Runbooks](https://azure.microsoft.com/en-us/blog/azure-automation-reliable-fault-tolerant-runbook-execution-using-checkpoints/).</span></span>

## <a name="common-errors-when-importing-modules"></a><span data-ttu-id="030e2-183">Распространенные ошибки при импорте модулей</span><span class="sxs-lookup"><span data-stu-id="030e2-183">Common errors when importing modules</span></span>
### <a name="scenario-module-fails-to-import-or-cmdlets-cant-be-executed-after-importing"></a><span data-ttu-id="030e2-184">Сценарий: не удается импортировать модуль или командлеты не выполняются после импорта</span><span class="sxs-lookup"><span data-stu-id="030e2-184">Scenario: Module fails to import or cmdlets can't be executed after importing</span></span>
<span data-ttu-id="030e2-185">**Ошибка** : не модулю удается осуществить импорт, либо импорт выполнен успешно, но командлеты не извлекаются.</span><span class="sxs-lookup"><span data-stu-id="030e2-185">**Error:** A module fails to import or imports successfully, but no cmdlets are extracted.</span></span>

<span data-ttu-id="030e2-186">**Причина ошибки** : наиболее распространенные причины, из-за которых модуль не может успешно завершить импорт в службу автоматизации Azure, следующие.</span><span class="sxs-lookup"><span data-stu-id="030e2-186">**Reason for the error:** Some common reasons that a module might not successfully import to Azure Automation are:</span></span>  

* <span data-ttu-id="030e2-187">Структура не соответствует той, которая требуется для службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="030e2-187">The structure does not match the structure that Automation needs it to be in.</span></span>  
* <span data-ttu-id="030e2-188">Модуль зависит от другого модуля, который не был развернут для учетной записи службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="030e2-188">The module is dependent on another module that has not been deployed to your Automation account.</span></span>  
* <span data-ttu-id="030e2-189">В папке отсутствуют зависимости модуля.</span><span class="sxs-lookup"><span data-stu-id="030e2-189">The module is missing its dependencies in the folder.</span></span>  
* <span data-ttu-id="030e2-190">Командлет **New-AzureRmAutomationModule** используется для передачи модуля, при этом полный путь для хранения не указан или модуль не загружен с помощью общедоступного URL-адреса.</span><span class="sxs-lookup"><span data-stu-id="030e2-190">The **New-AzureRmAutomationModule** cmdlet is being used to upload the module, and you have not given the full storage path or have not loaded the module by using a publicly accessible URL.</span></span>  

<span data-ttu-id="030e2-191">**Советы по устранению неполадок:**</span><span class="sxs-lookup"><span data-stu-id="030e2-191">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="030e2-192">: эту проблему можно устранить одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="030e2-192">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="030e2-193">Убедитесь, что модуль имеет следующий формат:</span><span class="sxs-lookup"><span data-stu-id="030e2-193">Make sure that the module follows the following format:</span></span>  
  <span data-ttu-id="030e2-194">ModuleName.Zip **->** имя_модуля или номер версии **->** (имя_модуля.psm1, имя_модуля.psd1).</span><span class="sxs-lookup"><span data-stu-id="030e2-194">ModuleName.Zip **->** ModuleName or Version Number **->** (ModuleName.psm1, ModuleName.psd1)</span></span>
* <span data-ttu-id="030e2-195">Откройте файл PSD1 и проверьте, есть ли у модуля зависимости.</span><span class="sxs-lookup"><span data-stu-id="030e2-195">Open the .psd1 file and see if the module has any dependencies.</span></span>  <span data-ttu-id="030e2-196">Если зависимости есть, отправьте эти модули в учетную запись службы автоматизации.</span><span class="sxs-lookup"><span data-stu-id="030e2-196">If it does, upload these modules to the Automation account.</span></span>  
* <span data-ttu-id="030e2-197">Убедитесь, что все указанные библиотеки DLL находятся в папке модуля.</span><span class="sxs-lookup"><span data-stu-id="030e2-197">Make sure that any referenced .dlls are present in the module folder.</span></span>  

## <a name="common-errors-when-working-with-desired-state-configuration-dsc"></a><span data-ttu-id="030e2-198">Распространенные ошибки при настройке требуемого состояния (DSC)</span><span class="sxs-lookup"><span data-stu-id="030e2-198">Common errors when working with Desired State Configuration (DSC)</span></span>
### <a name="scenario-node-is-in-failed-status-with-a-not-found-error"></a><span data-ttu-id="030e2-199">Сценарий: узел находится в состоянии сбоя с ошибкой "Не найден"</span><span class="sxs-lookup"><span data-stu-id="030e2-199">Scenario: Node is in failed status with a “Not found” error</span></span>
<span data-ttu-id="030e2-200">**Ошибка:** узел находится в состоянии **Сбой** с ошибкой "Попытка получить данные от сервера https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction завершилась неудачно из-за того, что невозможно найти действительную конфигурацию ``<guid>``".</span><span class="sxs-lookup"><span data-stu-id="030e2-200">**Error:** The node has a report with **Failed** status and containing the error "The attempt to get the action from server https://``<url>``//accounts/``<account-id>``/Nodes(AgentId=``<agent-id>``)/GetDscAction failed because a valid configuration ``<guid>`` cannot be found.”</span></span>

<span data-ttu-id="030e2-201">**Причина ошибки** : эта ошибка обычно возникает из-за того, что узлу назначается имя конфигурации (например, "ABC") вместо имени конфигурации узла (например, "ABC.WebServer").</span><span class="sxs-lookup"><span data-stu-id="030e2-201">**Reason for the error:** This error typically occurs when the node is assigned to a configuration name (e.g. ABC) instead of a node configuration name (e.g. ABC.WebServer).</span></span>  

<span data-ttu-id="030e2-202">**Советы по устранению неполадок:**</span><span class="sxs-lookup"><span data-stu-id="030e2-202">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="030e2-203">Убедитесь, что вы назначаете узлу "имя конфигурации узла", а не "имя конфигурации".</span><span class="sxs-lookup"><span data-stu-id="030e2-203">Make sure that you are assigning the node with "node configuration name" and not the "configuration name".</span></span>  
* <span data-ttu-id="030e2-204">Конфигурацию узла можно назначить узлу с помощью портала Azure или с помощью командлета PowerShell.</span><span class="sxs-lookup"><span data-stu-id="030e2-204">You can assign a node configuration to a node using Azure portal or with a PowerShell cmdlet.</span></span>

  * <span data-ttu-id="030e2-205">Чтобы назначить узлу конфигурацию узла с помощью портала Azure, откройте колонку **Узлы DSC**, затем выберите узел и нажмите кнопку **Назначить конфигурацию узла**.</span><span class="sxs-lookup"><span data-stu-id="030e2-205">In order to assign a node configuration to a node using Azure portal, open the **DSC Nodes** blade, then select a node and click on **Assign node configuration** button.</span></span>  
  * <span data-ttu-id="030e2-206">Чтобы назначить узлу конфигурацию узла с помощью PowerShell, используйте командлет **Set-AzureRmAutomationDscNode** .</span><span class="sxs-lookup"><span data-stu-id="030e2-206">In order to assign a node configuration to a node using PowerShell cmdlet, use **Set-AzureRmAutomationDscNode** cmdlet</span></span>

### <a name="scenario--no-node-configurations-mof-files-were-produced-when-a-configuration-is-compiled"></a><span data-ttu-id="030e2-207">Сценарий: при компиляции конфигурации не были созданы файлы конфигурации узла (MOF-файлы).</span><span class="sxs-lookup"><span data-stu-id="030e2-207">Scenario:  No node configurations (MOF files) were produced when a configuration is compiled</span></span>
<span data-ttu-id="030e2-208">**Ошибка** : ваше задание компиляции DSC было приостановлено из-за ошибки "Compilation completed successfully, but no node configuration .mofs were generated" (Компиляция успешно завершена, но не было создано ни одного MOF-файла конфигурации).</span><span class="sxs-lookup"><span data-stu-id="030e2-208">**Error:** Your DSC compilation job suspends with the error: “Compilation completed successfully, but no node configuration .mofs were generated”.</span></span>

<span data-ttu-id="030e2-209">**Причина ошибки:** если в результате выражения, указанного рядом с **Node** в конфигурации DSC, получается $null, то ни одного файла конфигурации узла создано не будет.</span><span class="sxs-lookup"><span data-stu-id="030e2-209">**Reason for the error:** When the expression following the **Node** keyword in the DSC configuration evaluates to $null then no node configurations will be produced.</span></span>    

<span data-ttu-id="030e2-210">**Советы по устранению неполадок:**</span><span class="sxs-lookup"><span data-stu-id="030e2-210">**Troubleshooting tips:**</span></span>  
<span data-ttu-id="030e2-211">: эту проблему можно устранить одним из следующих способов.</span><span class="sxs-lookup"><span data-stu-id="030e2-211">Any of the following solutions will fix the problem:</span></span>  

* <span data-ttu-id="030e2-212">Убедитесь, что выражение рядом с ключевым словом **Node** в определении конфигурации не равно $null.</span><span class="sxs-lookup"><span data-stu-id="030e2-212">Make sure that the expression next to the **Node** keyword in the configuration definition is not evaluating to $null.</span></span>  
* <span data-ttu-id="030e2-213">Если при компиляции конфигурации вы передаете ConfigurationData, то убедитесь, что передаются ожидаемые значения из [ConfigurationData](automation-dsc-compile.md#configurationdata), которые необходимы конфигурации.</span><span class="sxs-lookup"><span data-stu-id="030e2-213">If you are passing ConfigurationData when compiling the configuration, make sure that you are passing the expected values that the configuration requires from [ConfigurationData](automation-dsc-compile.md#configurationdata).</span></span>

### <a name="scenario--the-dsc-node-report-becomes-stuck-in-progress-state"></a><span data-ttu-id="030e2-214">Сценарий: отчет узла DSC зависает в состоянии "Выполняется".</span><span class="sxs-lookup"><span data-stu-id="030e2-214">Scenario:  The DSC node report becomes stuck “in progress” state</span></span>
<span data-ttu-id="030e2-215">**Ошибка** : агент DSC выводит сообщение "Экземпляр с заданными значениями свойств не найден".</span><span class="sxs-lookup"><span data-stu-id="030e2-215">**Error:** DSC Agent outputs “No instance found with given property values.”</span></span>

<span data-ttu-id="030e2-216">**Причина ошибки** : вы обновили свою версию WMF, что привело к повреждению WMI.</span><span class="sxs-lookup"><span data-stu-id="030e2-216">**Reason for the error:** You have upgraded your WMF version and have corrupted WMI.</span></span>  

<span data-ttu-id="030e2-217">**Советы по устранению неполадок.** Следуйте инструкциям в статье [Известные проблемы и ограничения настройки требуемого состояния (DSC)](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc).</span><span class="sxs-lookup"><span data-stu-id="030e2-217">**Troubleshooting tips:** Follow the instructions in the [DSC known issues and limitations](https://msdn.microsoft.com/powershell/wmf/5.0/limitation_dsc) to fix the issue.</span></span>

### <a name="scenario--unable-to-use-a-credential-in-a-dsc-configuration"></a><span data-ttu-id="030e2-218">Сценарий: не удается использовать учетные данные в конфигурации DSC</span><span class="sxs-lookup"><span data-stu-id="030e2-218">Scenario:  Unable to use a credential in a DSC configuration</span></span>
<span data-ttu-id="030e2-219">**Ошибка:** ваше задание компиляции DSC было приостановлено из-за следующей ошибки: "Ошибка System.InvalidOperationException при обработке свойства Credential типа ``<some resource name>``: зашифрованный пароль можно преобразовать в обычный текст и хранить его в этом формате только в том случае, если PSDscAllowPlainTextPassword имеет значение True".</span><span class="sxs-lookup"><span data-stu-id="030e2-219">**Error:** Your DSC compilation job was suspended with the error: “System.InvalidOperationException error processing property 'Credential' of type ``<some resource name>``: Converting and storing an encrypted password as plaintext is allowed only if PSDscAllowPlainTextPassword is set to true”.</span></span>

<span data-ttu-id="030e2-220">**Причина ошибки:** вы использовали учетные данные в конфигурации, но не передали соответствующие данные **ConfigurationData**, чтобы присвоить **PSDscAllowPlainTextPassword** значение true для конфигурации каждого узла.</span><span class="sxs-lookup"><span data-stu-id="030e2-220">**Reason for the error:** You have used a credential in a configuration but didn’t provide proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration.</span></span>  

<span data-ttu-id="030e2-221">**Советы по устранению неполадок:**</span><span class="sxs-lookup"><span data-stu-id="030e2-221">**Troubleshooting tips:**</span></span>  

* <span data-ttu-id="030e2-222">Передайте правильные данные **ConfigurationData**, чтобы присвоить **PSDscAllowPlainTextPassword** значение true для конфигурации каждого узла.</span><span class="sxs-lookup"><span data-stu-id="030e2-222">Make sure to pass in the proper **ConfigurationData** to set **PSDscAllowPlainTextPassword** to true for each node configuration mentioned in the configuration.</span></span> <span data-ttu-id="030e2-223">Чтобы узнать больше, ознакомьтесь с [ресурсами-контейнерами в Azure Automation DSC](automation-dsc-compile.md#assets).</span><span class="sxs-lookup"><span data-stu-id="030e2-223">For more information, refer to [assets in Azure Automation DSC](automation-dsc-compile.md#assets).</span></span>

## <a name="next-steps"></a><span data-ttu-id="030e2-224">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="030e2-224">Next steps</span></span>
<span data-ttu-id="030e2-225">Если вы выполнили действия, описанные выше, и вам не удалось найти ответ, можно просмотреть дополнительные варианты поддержки ниже.</span><span class="sxs-lookup"><span data-stu-id="030e2-225">If you have followed the troubleshooting steps above and can't find the answer, you can review the additional support options below.</span></span>

* <span data-ttu-id="030e2-226">Обратитесь за помощью к экспертам Azure.</span><span class="sxs-lookup"><span data-stu-id="030e2-226">Get help from Azure experts.</span></span> <span data-ttu-id="030e2-227">Опубликуйте свой вопрос на [форумах MSDN Azure или Stack Overflow](https://azure.microsoft.com/support/forums/).</span><span class="sxs-lookup"><span data-stu-id="030e2-227">Submit your issue to the [MSDN Azure or Stack Overflow forums.](https://azure.microsoft.com/support/forums/).</span></span>
* <span data-ttu-id="030e2-228">Отправьте запрос в службу поддержки Azure</span><span class="sxs-lookup"><span data-stu-id="030e2-228">File an Azure support incident.</span></span> <span data-ttu-id="030e2-229">Перейдите на [сайт службы поддержки Azure](https://azure.microsoft.com/support/options/) и в разделе **Technical and billing support** (Поддержка по выставлению счетов и техническая поддержка) щелкните **Получить поддержку**.</span><span class="sxs-lookup"><span data-stu-id="030e2-229">Go to the [Azure Support site](https://azure.microsoft.com/support/options/) and click **Get support** under **Technical and billing support**.</span></span>
* <span data-ttu-id="030e2-230">Опубликуйте запрос на сценарий на странице [Центр скриптов](https://azure.microsoft.com/documentation/scripts/) , если вы ищете модуль интеграции или определенное решение для службы автоматизации Azure, в котором используются модули Runbook.</span><span class="sxs-lookup"><span data-stu-id="030e2-230">Post a Script Request on [Script Center](https://azure.microsoft.com/documentation/scripts/) if you are looking for an Azure Automation runbook solution or an integration module.</span></span>
* <span data-ttu-id="030e2-231">Оставьте свой отзыв или запрос на ту или иную функцию для службы автоматизации Azure на [странице отзывов](https://feedback.azure.com/forums/34192--general-feedback).</span><span class="sxs-lookup"><span data-stu-id="030e2-231">Post feedback or feature requests for Azure Automation on [User Voice](https://feedback.azure.com/forums/34192--general-feedback).</span></span>
