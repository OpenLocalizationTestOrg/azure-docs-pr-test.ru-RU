---
title: "выполнение aaaRunbook в службе автоматизации Azure | Документы Microsoft"
description: "Описывает hello сведения об обработке runbook в автоматизации Azure."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: bdb535675443353d44640bc7773de3f9dac5e42c
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="903f1-103">Выполнение модуля Runbook в службе автоматизации Azure</span><span class="sxs-lookup"><span data-stu-id="903f1-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="903f1-104">При запуске модуля Runbook в службе автоматизации Azure создается задание.</span><span class="sxs-lookup"><span data-stu-id="903f1-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="903f1-105">Задание — это одиночный выполняемый экземпляр модуля Runbook.</span><span class="sxs-lookup"><span data-stu-id="903f1-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="903f1-106">Рабочая роль Azure автоматизации назначенный toorun каждого задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-106">An Azure Automation worker is assigned toorun each job.</span></span> <span data-ttu-id="903f1-107">Пока рабочие процессы используются несколькими учетными записями Azure, задания от различных учетных записей службы автоматизации изолируются друг от друга.</span><span class="sxs-lookup"><span data-stu-id="903f1-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="903f1-108">У вас контроль над какой рабочий служб hello запрос для задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-108">You do not have control over which worker services hello request for your job.</span></span>  <span data-ttu-id="903f1-109">В одном модуле Runbook могут иметься несколько запущенных заданий одновременно.</span><span class="sxs-lookup"><span data-stu-id="903f1-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="903f1-110">При просмотре списка hello модулей Runbook в hello портал Azure, в нем перечислены hello состояния всех заданий, которые были запущены для каждого модуля runbook.</span><span class="sxs-lookup"><span data-stu-id="903f1-110">When you view hello list of runbooks in hello Azure portal, it lists hello status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="903f1-111">Можно просмотреть список hello задания для каждого модуля в порядке tootrack hello состояние каждого.</span><span class="sxs-lookup"><span data-stu-id="903f1-111">You can view hello list of jobs for each runbook in order tootrack hello status of each.</span></span> <span data-ttu-id="903f1-112">Описание hello различных состояний задания см. в разделе [состояний задания](#job-statuses).</span><span class="sxs-lookup"><span data-stu-id="903f1-112">For a description of hello different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="903f1-113">Hello следующей диаграмме показан жизненный цикл hello задания для runbook [графические модули Runbook](automation-runbook-types.md#graphical-runbooks) и [модулях Runbook рабочего процесса PowerShell](automation-runbook-types.md#powershell-workflow-runbooks).</span><span class="sxs-lookup"><span data-stu-id="903f1-113">hello following diagram shows hello lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![Состояния задания — рабочий процесс PowerShell](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="903f1-115">Hello следующей диаграмме показан жизненный цикл hello задания для runbook [PowerShell модули Runbook](automation-runbook-types.md#powershell-runbooks).</span><span class="sxs-lookup"><span data-stu-id="903f1-115">hello following diagram shows hello lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![Состояния задания — сценарий PowerShell](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="903f1-117">Ваш задания имеют доступ tooyour Azure ресурсы, делая соединения tooyour подписки Azure.</span><span class="sxs-lookup"><span data-stu-id="903f1-117">Your jobs have access tooyour Azure resources by making a connection tooyour Azure subscription.</span></span> <span data-ttu-id="903f1-118">Они достаточно tooresources доступа в центре обработки данных, если эти ресурсы были доступны из общедоступного облака hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-118">They only have access tooresources in your data center if those resources are accessible from hello public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="903f1-119">Состояния заданий</span><span class="sxs-lookup"><span data-stu-id="903f1-119">Job statuses</span></span>
<span data-ttu-id="903f1-120">Hello следующей таблице описаны hello различные возможные состояния для задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-120">hello following table describes hello different statuses that are possible for a job.</span></span>

| <span data-ttu-id="903f1-121">Состояние</span><span class="sxs-lookup"><span data-stu-id="903f1-121">Status</span></span> | <span data-ttu-id="903f1-122">Описание</span><span class="sxs-lookup"><span data-stu-id="903f1-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="903f1-123">Завершено</span><span class="sxs-lookup"><span data-stu-id="903f1-123">Completed</span></span> |<span data-ttu-id="903f1-124">Hello задание успешно завершено.</span><span class="sxs-lookup"><span data-stu-id="903f1-124">hello job completed successfully.</span></span> |
| <span data-ttu-id="903f1-125">Сбой</span><span class="sxs-lookup"><span data-stu-id="903f1-125">Failed</span></span> |<span data-ttu-id="903f1-126">Для [Graphical и рабочий процесс PowerShell модули Runbook](automation-runbook-types.md), toocompile сбой hello runbook.</span><span class="sxs-lookup"><span data-stu-id="903f1-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), hello runbook failed toocompile.</span></span>  <span data-ttu-id="903f1-127">Для [сценарий PowerShell модули Runbook](automation-runbook-types.md), hello runbook сбой toostart или hello задания возникло исключение.</span><span class="sxs-lookup"><span data-stu-id="903f1-127">For [PowerShell Script runbooks](automation-runbook-types.md), hello runbook failed toostart or hello job encountered an exception.</span></span> |
| <span data-ttu-id="903f1-128">Задание не выполнено. Ожидание ресурсов.</span><span class="sxs-lookup"><span data-stu-id="903f1-128">Failed, waiting for resources</span></span> |<span data-ttu-id="903f1-129">Сбой задания Hello, так как он достиг hello [справедливое](#fairshare) ограничить три раза и запускать из hello же контрольной точки или из hello hello модуля Runbook каждый раз запускать.</span><span class="sxs-lookup"><span data-stu-id="903f1-129">hello job failed because it reached hello [fair share](#fairshare) limit three times and started from hello same checkpoint or from hello start of hello runbook each time.</span></span> |
| <span data-ttu-id="903f1-130">Поставлено в очередь</span><span class="sxs-lookup"><span data-stu-id="903f1-130">Queued</span></span> |<span data-ttu-id="903f1-131">Hello задание ожидает ресурсов на доступные toocome работника автоматизации, чтобы оно смогло запуститься.</span><span class="sxs-lookup"><span data-stu-id="903f1-131">hello job is waiting for resources on an Automation worker toocome available so that it can be started.</span></span> |
| <span data-ttu-id="903f1-132">Starting</span><span class="sxs-lookup"><span data-stu-id="903f1-132">Starting</span></span> |<span data-ttu-id="903f1-133">Hello задание было назначено tooa работника и hello система находится в процессе его запуска hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-133">hello job has been assigned tooa worker, and hello system is in hello process of starting it.</span></span> |
| <span data-ttu-id="903f1-134">Возобновление</span><span class="sxs-lookup"><span data-stu-id="903f1-134">Resuming</span></span> |<span data-ttu-id="903f1-135">Hello система находится в hello процесс возобновления hello задания после его приостановки.</span><span class="sxs-lookup"><span data-stu-id="903f1-135">hello system is in hello process of resuming hello job after it was suspended.</span></span> |
| <span data-ttu-id="903f1-136">Выполнение</span><span class="sxs-lookup"><span data-stu-id="903f1-136">Running</span></span> |<span data-ttu-id="903f1-137">Hello задание выполняется.</span><span class="sxs-lookup"><span data-stu-id="903f1-137">hello job is running.</span></span> |
| <span data-ttu-id="903f1-138">Задание выполняется. Ожидание ресурсов.</span><span class="sxs-lookup"><span data-stu-id="903f1-138">Running, waiting for resources</span></span> |<span data-ttu-id="903f1-139">Hello задание был выгружено, так как он достиг hello [справедливое](#fairshare) ограничение.</span><span class="sxs-lookup"><span data-stu-id="903f1-139">hello job has been unloaded because it reached hello [fair share](#fairshare) limit.</span></span> <span data-ttu-id="903f1-140">Задание будет возобновлено позже с его последней контрольной точки.</span><span class="sxs-lookup"><span data-stu-id="903f1-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="903f1-141">Остановлено</span><span class="sxs-lookup"><span data-stu-id="903f1-141">Stopped</span></span> |<span data-ttu-id="903f1-142">Hello задание остановлено пользователем hello, до его завершения.</span><span class="sxs-lookup"><span data-stu-id="903f1-142">hello job was stopped by hello user before it was completed.</span></span> |
| <span data-ttu-id="903f1-143">Остановка</span><span class="sxs-lookup"><span data-stu-id="903f1-143">Stopping</span></span> |<span data-ttu-id="903f1-144">Hello система находится в hello процесс остановки задания hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-144">hello system is in hello process of stopping hello job.</span></span> |
| <span data-ttu-id="903f1-145">Приостановлено</span><span class="sxs-lookup"><span data-stu-id="903f1-145">Suspended</span></span> |<span data-ttu-id="903f1-146">Hello задание было приостановлено пользователем hello, hello системой или с помощью команды в hello runbook.</span><span class="sxs-lookup"><span data-stu-id="903f1-146">hello job was suspended by hello user, by hello system, or by a command in hello runbook.</span></span> <span data-ttu-id="903f1-147">Приостановленное задание можно запустить снова и возобновить с последней контрольной точки или hello начало hello runbook при отсутствии контрольных точек.</span><span class="sxs-lookup"><span data-stu-id="903f1-147">A job that is suspended can be started again and resume from its last checkpoint or from hello beginning of hello runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="903f1-148">Hello runbook будет приостановлен только системой hello при возникновении исключения.</span><span class="sxs-lookup"><span data-stu-id="903f1-148">hello runbook will only be suspended by hello system when an exception occurs.</span></span> <span data-ttu-id="903f1-149">По умолчанию, ErrorActionPreference задано слишком**Продолжить**, то есть задания hello продолжит выполнение при возникновении ошибки.</span><span class="sxs-lookup"><span data-stu-id="903f1-149">By default, ErrorActionPreference is set too**Continue**, meaning that hello job keeps running on an error.</span></span> <span data-ttu-id="903f1-150">Если эта Привилегированная переменная имеет значение слишком**остановить**, а затем приостанавливает задание hello в случае ошибки.</span><span class="sxs-lookup"><span data-stu-id="903f1-150">If this preference variable is set too**Stop**, then hello job suspends on an error.</span></span>  <span data-ttu-id="903f1-151">Также применяется[Graphical и рабочий процесс PowerShell модули Runbook](automation-runbook-types.md) только.</span><span class="sxs-lookup"><span data-stu-id="903f1-151">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="903f1-152">Приостановка</span><span class="sxs-lookup"><span data-stu-id="903f1-152">Suspending</span></span> |<span data-ttu-id="903f1-153">Hello система пытается toosuspend hello задания по запросу hello hello пользователя.</span><span class="sxs-lookup"><span data-stu-id="903f1-153">hello system is attempting toosuspend hello job at hello request of hello user.</span></span> <span data-ttu-id="903f1-154">Прежде чем можно будет приостановить, Hello runbook должен достичь своей следующей контрольной точки.</span><span class="sxs-lookup"><span data-stu-id="903f1-154">hello runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="903f1-155">Если последняя контрольная точка уже пройдена, задание будет завершено, прежде чем оно будет приостановлено.</span><span class="sxs-lookup"><span data-stu-id="903f1-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="903f1-156">Также применяется[Graphical и рабочий процесс PowerShell модули Runbook](automation-runbook-types.md) только.</span><span class="sxs-lookup"><span data-stu-id="903f1-156">Applies too[Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-hello-azure-portal"></a><span data-ttu-id="903f1-157">Просмотр состояния задания из hello портал Azure</span><span class="sxs-lookup"><span data-stu-id="903f1-157">Viewing job status from hello Azure portal</span></span>
<span data-ttu-id="903f1-158">Можно просмотреть сводные данные состояния всех заданий runbook или детализировать сведения об указанном задании runbook в hello портал Azure или с настройкой интеграции с состояние задания runbook tooforward рабочей области аналитики журналов Microsoft Operations Management Suite (OMS) и потоки задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in hello Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace tooforward runbook job status and job streams.</span></span>  <span data-ttu-id="903f1-159">Дополнительные сведения об интеграции с помощью аналитики журналов OMS см. в разделе [вперед от tooLog автоматизации Analytics (OMS) состояние задания и задания потоки](automation-manage-send-joblogs-log-analytics.md).</span><span class="sxs-lookup"><span data-stu-id="903f1-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation tooLog Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="903f1-160">Сводные данные заданий Runbook службы автоматизации</span><span class="sxs-lookup"><span data-stu-id="903f1-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="903f1-161">На hello справа от выбранной учетной записи автоматизации, можно просмотреть сводку по всем hello заданиях для выбранной учетной записи автоматизации в **статистике** плитки.</span><span class="sxs-lookup"><span data-stu-id="903f1-161">On hello right of your selected Automation account, you can see a summary of all of hello runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="903f1-162">![Элемент "Статистика по заданиям"](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="903f1-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="903f1-163">Эта Плитка отображается число и графическое представление о состоянии задания hello для всех выполненных заданий.</span><span class="sxs-lookup"><span data-stu-id="903f1-163">This tile displays a count and graphical representation of hello job status for all jobs executed.</span></span>  

<span data-ttu-id="903f1-164">При щелчке плитки приветствия представляется hello **заданий** колонки, включая сводные список всех выполненных заданий, с состояние выполнения задания и время начала и завершения.</span><span class="sxs-lookup"><span data-stu-id="903f1-164">Clicking on hello tile presents hello **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="903f1-165">![Колонка "Задания" учетной записи службы автоматизации](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="903f1-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="903f1-166">Можно фильтровать список заданий hello, выбрав **Фильтрация заданий** и фильтрации определенного модуля runbook, состояние задания, или из раскрывающегося списка hello, hello toosearch диапазон даты и времени в пределах.</span><span class="sxs-lookup"><span data-stu-id="903f1-166">You can filter hello list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from hello drop-down list, hello date/time range toosearch within.</span></span><br><br> <span data-ttu-id="903f1-167">![Фильтрация по состоянию задания](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="903f1-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="903f1-168">Кроме того, можно просмотреть сводные данные задания для определенного модуля runbook, выбрав этого модуля из hello **Runbooks** колонки в вашей учетной записи автоматизации и выберите hello **заданий** плитку.</span><span class="sxs-lookup"><span data-stu-id="903f1-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from hello **Runbooks** blade in your Automation account, and then select hello **Jobs** tile.</span></span>  <span data-ttu-id="903f1-169">Это представляет hello **заданий** колонке и из него можно щелкнуть hello задания записи tooview сведения о нем и выходных данных.</span><span class="sxs-lookup"><span data-stu-id="903f1-169">This presents hello **Jobs** blade, and from there you can click on hello job record tooview its detail and output.</span></span><br><br> <span data-ttu-id="903f1-170">![Колонка "Задания" учетной записи службы автоматизации](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="903f1-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="903f1-171">Сводные данные задания</span><span class="sxs-lookup"><span data-stu-id="903f1-171">Job Summary</span></span>
<span data-ttu-id="903f1-172">Можно просмотреть список всех заданий hello, которые были созданы для конкретного модуля runbook и их самое последнее состояние.</span><span class="sxs-lookup"><span data-stu-id="903f1-172">You can view a list of all of hello jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="903f1-173">Этот список можно фильтровать по состоянию заданий и hello диапазон дат для hello последнее изменение toohello задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-173">You can filter this list by job status and hello range of dates for hello last change toohello job.</span></span> <span data-ttu-id="903f1-174">tooview его подробные сведения и выходных данных, щелкните имя hello задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-174">tooview its detailed information and output, click on hello name of a job.</span></span> <span data-ttu-id="903f1-175">Hello подробном представлении задания hello указаны hello значения для параметров runbook hello, которые были указаны toothat задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-175">hello detailed view of hello job includes hello values for hello runbook parameters that were provided toothat job.</span></span>

<span data-ttu-id="903f1-176">Можно использовать следующие шаги tooview hello задания для модуля runbook hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-176">You can use hello following steps tooview hello jobs for a runbook.</span></span>

1. <span data-ttu-id="903f1-177">В hello портал Azure, выберите **автоматизации** и выберите имя учетной записи автоматизации hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-177">In hello Azure portal, select **Automation** and then select hello name of an Automation account.</span></span>
2. <span data-ttu-id="903f1-178">Концентратор приветствия выберите **Runbooks** и затем на hello **модулей Runbook** колонке выберите книгу из списка hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-178">From hello hub, select **Runbooks** and then on hello **Runbooks** blade select a runbook from hello list.</span></span>
3. <span data-ttu-id="903f1-179">В колонке hello для hello выбранного модуля runbook, щелкните hello **заданий** плитки.</span><span class="sxs-lookup"><span data-stu-id="903f1-179">On hello blade for hello selected runbook, click hello **Jobs** tile.</span></span>
4. <span data-ttu-id="903f1-180">Выберите одну из заданий hello в списке hello и колонки сведений задания hello runbook можно просмотреть сведения о нем и выходных данных.</span><span class="sxs-lookup"><span data-stu-id="903f1-180">Click on one of hello jobs in hello list and on hello runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="903f1-181">Получение состояния задания с помощью Windows PowerShell</span><span class="sxs-lookup"><span data-stu-id="903f1-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="903f1-182">Можно использовать hello [Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello заданий, созданных runbook и hello сведений о конкретном задании.</span><span class="sxs-lookup"><span data-stu-id="903f1-182">You can use hello [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) tooretrieve hello jobs created for a runbook and hello details of a particular job.</span></span> <span data-ttu-id="903f1-183">При запуске модуля runbook с помощью Windows PowerShell [AzureRmAutomationRunbook начала](https://msdn.microsoft.com/library/mt603661.aspx), то возвращается hello результирующее задание.</span><span class="sxs-lookup"><span data-stu-id="903f1-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns hello resulting job.</span></span> <span data-ttu-id="903f1-184">Используйте [Get AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)tooget вывода выходных данных задания.</span><span class="sxs-lookup"><span data-stu-id="903f1-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output tooget a job’s output.</span></span>

<span data-ttu-id="903f1-185">Hello ниже примеры команд извлечения hello последнего задания для runbook и отображает его состояние, значения hello, предоставленный для параметров runbook hello и выходные данные задания hello hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-185">hello following sample commands retrieve hello last job for a sample runbook and displays its status, hello values provided for hello runbook parameters, and hello output from hello job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="903f1-186">доли</span><span class="sxs-lookup"><span data-stu-id="903f1-186">Fair share</span></span>
<span data-ttu-id="903f1-187">В порядке tooshare ресурсов среди всех модулей Runbook в облаке hello службы автоматизации Azure будет временно выгружать любое задание после его выполнения в течение трех часов.</span><span class="sxs-lookup"><span data-stu-id="903f1-187">In order tooshare resources among all runbooks in hello cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="903f1-188">В течение этого времени задания для [модулей Runbook на основе PowerShell](automation-runbook-types.md#powershell-runbooks) останавливаются и не будут перезапускаться.</span><span class="sxs-lookup"><span data-stu-id="903f1-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="903f1-189">Показывает состояние задания Hello **остановлена**.</span><span class="sxs-lookup"><span data-stu-id="903f1-189">hello job status shows **Stopped**.</span></span>  <span data-ttu-id="903f1-190">Этот тип runbook всегда перезапускается с начала hello, так как они не поддерживают контрольные точки.</span><span class="sxs-lookup"><span data-stu-id="903f1-190">This type of runbook is always restarted from hello beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="903f1-191">[Модули Runbook на основе рабочего процесса PowerShell](automation-runbook-types.md#powershell-workflow-runbooks) будут возобновлены из последней [контрольной точки](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span><span class="sxs-lookup"><span data-stu-id="903f1-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="903f1-192">После выполнения три часа, будет приостановить задание runbook hello службой и его состояние hello показывает **выполняется; ожидание ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="903f1-192">After running three hours, hello runbook job will be suspended by hello service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="903f1-193">Если "песочницу" станет доступной, hello runbook будет перезапущена автоматически службой автоматизации hello и выхода из последней контрольной точки hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-193">When a sandbox becomes available, hello runbook will be automatically restarted by hello Automation service and resumes from hello last checkpoint.</span></span>  <span data-ttu-id="903f1-194">Это нормальное поведение рабочего процесса PowerShell для приостановки или перезапуска.</span><span class="sxs-lookup"><span data-stu-id="903f1-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="903f1-195">Если hello runbook еще раз превышает три часа среды выполнения, hello процесс повторяется, toothree времени.</span><span class="sxs-lookup"><span data-stu-id="903f1-195">If hello runbook again exceeds three hours of runtime, hello process repeats, up toothree times.</span></span>  <span data-ttu-id="903f1-196">После третьего перезапуска hello, если по-прежнему hello runbook не завершена в течение трех часов, то не удалось выполнить задание runbook hello и показывает состояние задания hello **завершилось сбоем; Ожидание ресурсов**.</span><span class="sxs-lookup"><span data-stu-id="903f1-196">After hello third restart, if hello runbook still has not completed in three hours, then hello runbook job is failed, and hello job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="903f1-197">В этом случае появляется после исключения с ошибкой hello hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-197">In this case, you receive hello following exception with hello failure.</span></span>

<span data-ttu-id="903f1-198">*Задание Hello не может продолжать выполнение, так как оно постоянно исключалось с hello же контрольной точки. Убедитесь, что модуль Runbook не выполняет продолжительные операции без сохранения состояния.*</span><span class="sxs-lookup"><span data-stu-id="903f1-198">*hello job cannot continue running because it was repeatedly evicted from hello same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="903f1-199">Это служба hello tooprotect запуск модулей Runbook бесконечно без завершения, как они не могут toomake его toohello следующей контрольной точки без повторной выгрузки.</span><span class="sxs-lookup"><span data-stu-id="903f1-199">This is tooprotect hello service from runbooks running indefinitely without completing, as they are not able toomake it toohello next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="903f1-200">Если hello runbook имеет нет контрольных точек или задание hello не достигло первой контрольной точки hello до выгрузки, он перезапустит с начала hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-200">If hello runbook has no checkpoints or hello job had not reached hello first checkpoint before being unloaded, then it restarts from hello beginning.</span></span>  

<span data-ttu-id="903f1-201">При создании модуля runbook следует убедиться, toorun время hello, любые действия между двумя контрольными точками не превышает 3 часа.</span><span class="sxs-lookup"><span data-stu-id="903f1-201">When you create a runbook, you should ensure that hello time toorun any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="903f1-202">Может потребоваться tooyour runbook контрольные точки tooadd tooensure, что она не достигнут этот предел три часа или разбить долго выполняющиеся операции.</span><span class="sxs-lookup"><span data-stu-id="903f1-202">You may need tooadd checkpoints tooyour runbook tooensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="903f1-203">Например, модуль Runbook может выполнять повторную индексацию в крупной базе данных SQL.</span><span class="sxs-lookup"><span data-stu-id="903f1-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="903f1-204">Если эта операция не завершается в течение hello удовлетворительные предел общего ресурса, а затем задание hello выгружен и перезапущен с начала hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-204">If this single operation does not complete within hello fair share limit, then hello job are unloaded and restarted from hello beginning.</span></span> <span data-ttu-id="903f1-205">В этом случае необходимо разбить hello операцию на несколько этапов, например, повторное индексирование одной таблицы одновременно и затем вставить контрольную точку после каждой операции для hello задание возобновления после последней операции toocomplete hello.</span><span class="sxs-lookup"><span data-stu-id="903f1-205">In this case, you should break up hello reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that hello job could resume after hello last operation toocomplete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="903f1-206">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="903f1-206">Next steps</span></span>
* <span data-ttu-id="903f1-207">toolearn Дополнительные сведения о hello различные методы, которые можно использовать toostart runbook в автоматизации Azure в разделе [запуск runbook в автоматизации Azure](automation-starting-a-runbook.md)</span><span class="sxs-lookup"><span data-stu-id="903f1-207">toolearn more about hello different methods that can be used toostart a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

