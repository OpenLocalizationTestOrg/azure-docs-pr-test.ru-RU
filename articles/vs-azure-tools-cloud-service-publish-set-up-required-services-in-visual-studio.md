---
title: "aaaPrepare toopublish или развертывании приложения Azure из Visual Studio | Документы Microsoft"
description: "Узнайте tooset процедуры hello копирование облачной службы и учетной записи службы хранилища и настройка приложения Azure."
services: visual-studio-online
documentationcenter: na
author: kraigb
manager: ghogen
editor: 
ms.assetid: 92ee2f9e-ec49-4c7a-900d-620abe5e9d8a
ms.service: multiple
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: multiple
ms.date: 11/11/2016
ms.author: kraigb
ms.openlocfilehash: b5231d400e2ad9e20c3f21bad48a77c328b1f7a4
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="prepare-toopublish-or-deploy-an-azure-application-from-visual-studio"></a>Подготовьте tooPublish или развертывание приложения Azure из Visual Studio
## <a name="overview"></a>Обзор
Перед публикацией проекта облачной службы, необходимо настроить hello следующие службы:

* Объект **облачная служба** toorun ваши роли в среде Azure hello
* Объект **учетной записи хранилища** , обеспечивающий доступ toohello служб больших двоичных объектов, очередей и таблиц.

Использовать следующие процедуры tooset эти службы hello и настройки приложения

## <a name="create-a-cloud-service"></a>Создание облачной службы
toopublish tooAzure облачной службы, необходимо сначала создать облачную службу, которая выполняет роли в среде Azure hello. Можно создать облачную службу в hello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkID=213885), как описано в разделе "hello" **toocreate облачной службы с помощью hello классический портал Azure**далее в этом разделе. Можно также создать облачную службу в Visual Studio с помощью мастера публикации hello.

### <a name="toocreate-a-cloud-service-by-using-visual-studio"></a>toocreate облачной службы с помощью Visual Studio
1. Откройте контекстное меню проекта Azure hello hello и выберите **публикации**.

    ![VST_PublishMenu](./media/vs-azure-tools-cloud-service-publish-set-up-required-services-in-visual-studio/vst-publish-menu.png)
2. Если вы еще не выполнили вход, вход имя пользователя и пароль для hello учетную запись Майкрософт или организации, связанной с подпиской Azure.
3. Выберите hello **Далее** toohello tooadvance кнопку **параметры** страницы.

    ![Общие параметры в мастере публикации](./media/vs-azure-tools-cloud-service-publish-set-up-required-services-in-visual-studio/publish-settings-page.png)
4. В hello **облачные службы** выберите **создать новый**. Hello **Создание службы Azure** откроется диалоговое окно.
5. Введите имя hello облачной службы. Имя Hello входит в состав hello URL-адрес для службы и поэтому должно быть глобально уникальным. Имя Hello не учитывает регистр.

### <a name="toocreate-a-cloud-service-by-using-hello-azure-classic-portal"></a>toocreate облачной службы с помощью hello классический портал Azure
1. Войдите в toohello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkId=253103) на веб-сайте Microsoft hello.
2. (необязательно) toodisplay список облачных служб, которые уже созданы, выберите ссылку облачные службы hello hello левой части страницы приветствия.
3. Выберите hello  **+**  значок в hello в левом нижнем углу, а затем выберите **облачной службы** hello меню. Откроется новое окно с двумя вариантами: **Быстрое создание** и **Настраиваемое создание**. При выборе **быстрое создание**, просто, указав его URL-адрес и hello регион, где он будет физически размещаться можно создать облачную службу. Если выбрать **Настраиваемое создание**, вы сможете сразу опубликовать облачную службу, указав пакет (CSPKG-файл), файл конфигурации (.cscfg) и сертификат. Настраиваемое создание не требуется, если предполагается toopublish облачной службы с помощью hello **публикации** в проекте Azure. Hello **публикации** команда доступна на hello контекстное меню для проекта Azure.
4. Выберите **быстрое создание** toolater публикации облачной службы с помощью Visual Studio.
5. Укажите имя для облачной службы. Hello полный URL-адрес отображается имя следующего toohello.
6. В списке hello выберите hello регион, где расположено большинство пользователей.
7. Hello нижней части окна hello, выберите hello **создать облачную службу** ссылку.

## <a name="create-a-storage-account"></a>Создайте учетную запись хранения.
Учетная запись хранилища предоставляет доступ toohello служб больших двоичных объектов, очередей и таблиц. Можно создать учетную запись хранилища с помощью Visual Studio или hello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkId=253103).

### <a name="toocreate-a-storage-account-by-using-visual-studio"></a>toocreate учетной записи хранилища с помощью Visual Studio
1. В **обозреватель решений**откройте контекстное меню hello hello **хранилища** узла и нажмите кнопку **создать учетную запись хранилища**.

    ![Создание новой учетной записи хранения Azure](./media/vs-azure-tools-cloud-service-publish-set-up-required-services-in-visual-studio/IC744166.png)
2. Выберите или введите следующую информацию для hello новую учетную запись хранилища в hello hello **создать учетную запись хранилища** диалоговое окно.

   * Здравствуйте, требуется учетная запись хранения hello tooadd toowhich подписки Azure.
   * Hello имя toouse для hello новой учетной записи хранения.
   * Hello регион или территориальная группа (например, Запад США или Восточная Азия).
   * Здравствуйте, тип репликации для учетной записи хранилища hello, такие как географически избыточная требуется toouse.
3. После завершения, выберите **создать**.hello новой учетной записи хранения отображается в hello **хранения** списка в **обозревателя серверов**.

### <a name="toocreate-a-storage-account-by-using-hello-azure-classic-portal"></a>toocreate учетной записи хранилища с помощью hello классический портал Azure
1. Войдите в toohello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkId=253103) на веб-сайте Microsoft hello.
2. (Необязательно) tooview учетных записей хранилища выберите hello **хранения** ссылку на панели hello на hello левая сторона страницы приветствия.
3. В hello левого нижнего угла страницы приветствия, выберите hello  **+**  значок.
4. В появившемся меню hello выберите **хранилища**, а затем выберите **быстрое создание**.
5. Имя учетной записи хранилища hello, приведет к уникальный URL-адрес.
6. Введите имя для облачной службы. Hello полный URL-адрес отображается имя следующего toohello.
7. В списке hello регионов выберите регион, где расположено большинство пользователей.
8. Укажите, следует ли tooenable георепликации. Если географическая репликация включена, данные будут сохранены в нескольких местах tooreduce hello вероятность потери. Эта функция делает хранение более дорогим, но может снизить стоимость hello, включения географического расположения при создании учетной записи хранилища hello вместо добавления функции hello позже. Дополнительные сведения см. в статье [Георепликация](http://go.microsoft.com/fwlink/?LinkId=253108).
9. Hello нижней части окна hello, выберите hello **создать учетную запись хранилища** ссылку.

После создания учетной записи хранилища, вы увидите hello URL-адреса, что можно использовать tooaccess ресурсы в каждой из служб хранилища Azure hello и также hello первичный и вторичный ключи доступа для учетной записи. Можно использовать эти ключи tooauthenticate запросы к службам хранилища hello.

> [!NOTE]
> Hello вторичный ключ доступа предоставляет hello же доступ к учетной записи хранилища tooyour hello первичный ключ доступа и формируется в виде резервной копии должны быть скомпрометированы первичный ключ доступа. Мы рекомендуем регулярно создавать новые ключи доступа. Строка параметра toouse hello вторичного ключа подключения можно изменить при повторном создании первичного ключа hello, то ее можно изменить первичный ключ toouse hello создается повторно при повторном создании hello вторичный ключ.
>
>

## <a name="configure-your-app-toouse-services-provided-by-hello-storage-account"></a>Настройка службы toouse вашего приложения, предоставляемые hello учетной записи хранилища
Необходимо настроить любую роль, которая обращается к хранилища toouse hello хранилища Azure для служб, созданных. toodo это, можно использовать несколько конфигураций службы для проекта Azure. По умолчанию две конфигурации создаются в вашем проекте Azure. С помощью нескольких конфигураций службы, можно использовать hello одного соединения строки в коде, но имеет другое значение для строки подключения в каждой конфигурации службы. Например можно использовать один toorun конфигурации службы и отлаживать приложение локально с помощью эмулятора хранилища Azure hello и toopublish конфигурации другую службу tooAzure вашего приложения. Дополнительные сведения о конфигурациях служб см. в разделе [Настройка проекта Azure с помощью нескольких конфигураций службы](vs-azure-tools-multiple-services-project-configurations.md).

### <a name="tooconfigure-your-application-toouse-services-that-hello-storage-account-provides"></a>предоставляет tooconfigure toouse служб приложения, hello учетной записи хранилища
1. Откройте в Visual Studio свое решение Azure. В обозревателе решений откройте контекстное меню hello для каждой роли в проекте Azure, которая обращается к службам хранилища hello и выберите **свойства**. В редакторе Visual Studio hello отображается страница с именем hello hello роли. Страница приветствия отображает hello поля для hello **конфигурации** вкладки.
2. На страницах свойств hello для hello роли выберите **параметры**.
3. В hello **конфигурации службы** выберите имя конфигурации службы hello hello, которые должны tooedit. Если вы хотите tooall изменения toomake hello конфигураций службы для этой роли, вы можете **все конфигурации**.  Дополнительные сведения о том, как tooupdate службы конфигурации в разделе hello **управление строки подключения для учетных записей хранения** раздела hello [Настройка hello ролей для облачной службы Azure с помощью Visual Studio ](vs-azure-tools-configure-roles-for-cloud-service.md).
4. toomodify параметры строки подключения, выберите hello **...** Кнопка toohello. следующий параметр. Hello **Создание строки подключения хранилища** откроется диалоговое окно.
5. В разделе **подключение с использованием**, выберите hello **подписки** параметр.
6. В hello **подписки** выберите подписку. Если hello список подписок не включает hello выполняется, выберите hello **загрузить параметры публикации** ссылку.
7. В hello **имя учетной записи** выберите имя учетной записи хранилища. Инструменты Azure получают учетные данные хранилища автоматически с помощью файла PUBLISHSETTINGS hello. toospecify вашей учетной записи хранилища учетных данных вручную, выберите hello **ручной ввод учетных данных** параметр, а затем продолжить процедуру. Имя учетной записи хранилища и первичный ключ можно получить из hello [классический портал Azure](http://go.microsoft.com/fwlink/p/?LinkID=213885). Если вы не хотите toospecify параметры учетной записи хранилища вручную, выберите hello **ОК** диалоговое окно приветствия tooclose кнопка.
8. Выберите hello **укажите учетную запись хранения** ссылку учетные данные.
9. В hello **имя учетной записи** введите hello имя вашей учетной записи хранилища.

   > [!NOTE]
   > Войдите hello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkID=213885), а затем выберите hello **хранилища** кнопки. Hello портале будет показан список учетных записей хранения. Выбрав учетную запись, вы попадете на ее страницу, На этой странице можно скопировать hello имя учетной записи хранения hello. При использовании предыдущей версии классический портал hello hello имя вашей учетной записи хранения отображается в hello **учетные записи хранения** представления. toocopy это имя, выделите его в hello **свойства** это окно просмотра и нажмите сочетание клавиш Ctrl-C hello. Имя hello toopaste в Visual Studio выберите hello **имя учетной записи** текстовое поле и нажмите сочетание клавиш Ctrl + V hello.
   >
   >
10. В hello **ключ учетной записи** введите ваш первичный ключ или скопируйте и вставьте его из hello [классический портал Azure](http://go.microsoft.com/fwlink/?LinkID=213885).
     Этот ключ toocopy:

    1. Hello нижней части страницы приветствия для hello соответствующей учетной записи хранилища, выберите hello **управление ключами** кнопки.
    2. На hello **управление ключами доступа** выберите текст hello hello первичный ключ доступа и нажмите сочетание клавиш Ctrl + C hello.
    3. В инструментах Azure вставьте ключ hello в hello **ключ учетной записи** поле.
    4. Необходимо выбрать один из следующих параметров toodetermine hello как hello службы получают доступ к учетной записи хранилища hello:

       * **Использовать HTTP**. Это стандартный вариант hello. Например, `http://<account name>.blob.core.windows.net`.
       * **Использовать HTTPS**. Вариант для безопасного подключения. Например, `https://<accountname>.blob.core.windows.net`.
       * **Укажите настраиваемые конечные точки** для каждой из трех hello служб. Затем можно ввести эти конечные точки в поле hello для конкретной службы hello.

         > [!NOTE]
         > Пользовательские конечные точки позволяют создать более сложную строку подключения. Если вы используете этот формат строки, можно указать конечные точки службы хранения, которые включают пользовательское доменное имя, которое вы зарегистрировали для вашей учетной записи с hello службы BLOB-объектов. Также можно предоставить доступ только tooblob ресурсы в одном контейнере с использованием подписанного URL-адреса. Дополнительные сведения о том, как toocreate пользовательские конечные точки, в разделе [Настройка строки подключения хранилища Azure](storage/common/storage-configure-connection-string.md).
         >
         >
11. toosave эти изменения строки подключения, выберите hello **ОК** кнопку и выберите hello **Сохранить** на инструментов «hello». После сохранения этих изменений, можно получить значение hello этой строки подключения в коде с помощью [GetConfigurationSettingValue](https://msdn.microsoft.com/library/azure/microsoft.windowsazure.serviceruntime.roleenvironment.getconfigurationsettingvalue.aspx). При публикации tooAzure вашего приложения, выберите конфигурацию службы hello, содержащий учетную запись хранилища Azure hello для строки подключения hello. После публикации приложения убедитесь, что приложения hello нормально взаимодействует со службами хранилища Azure hello

## <a name="next-steps"></a>Дальнейшие действия
toolearn Дополнительные сведения о публикации tooAzure приложения из Visual Studio, в разделе [публикация облачной службы с помощью средства Azure hello](vs-azure-tools-publishing-a-cloud-service.md).
