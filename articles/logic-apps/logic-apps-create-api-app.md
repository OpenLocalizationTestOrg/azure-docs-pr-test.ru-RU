---
title: "Создание веб-интерфейсов API и интерфейсов REST API в качестве соединителей — Azure Logic Apps | Документация Майкрософт"
description: "Создание веб-интерфейсов API и интерфейсов REST API для вызова API, служб или систем в рабочих процессах интеграции систем с помощью Azure Logic Apps"
keywords: "веб-интерфейсы API, интерфейсы REST API, соединители, рабочие процессы, интеграция систем"
services: logic-apps
author: jeffhollan
manager: anneta
editor: 
documentationcenter: 
ms.assetid: bd229179-7199-4aab-bae0-1baf072c7659
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 5/26/2017
ms.author: LADocs; jehollan
ms.openlocfilehash: 4ae98804aced23c0261c1d58721cb18d8152c6f1
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="create-custom-apis-as-connectors-for-logic-apps"></a><span data-ttu-id="c870d-104">Создание пользовательских API в качестве соединителей для приложений логики</span><span class="sxs-lookup"><span data-stu-id="c870d-104">Create custom APIs as connectors for logic apps</span></span>

<span data-ttu-id="c870d-105">Azure Logic Apps предоставляет [более 100 встроенных соединителей](../connectors/apis-list.md) для рабочих процессов приложений логики. Но вам может потребоваться вызвать интерфейсы API, системы и службы, недоступные в качестве соединителей.</span><span class="sxs-lookup"><span data-stu-id="c870d-105">Although Azure Logic Apps offers [100+ built-in connectors](../connectors/apis-list.md) that you can use in logic app workflows, you might want to call APIs, systems, and services that aren't available as connectors.</span></span> <span data-ttu-id="c870d-106">Можно создать собственные пользовательские API с действиями и триггерами для использования в приложениях логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-106">You can create your own custom APIs that provide actions and triggers to use in logic apps.</span></span> <span data-ttu-id="c870d-107">Ниже приведены другие причины создания собственных интерфейсов API для использования в качестве соединителей в приложениях логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-107">Here are other reasons why you might want to create your own APIs to use as connectors in logic apps:</span></span>

* <span data-ttu-id="c870d-108">Расширение текущих рабочих процессов интеграции систем и данных.</span><span class="sxs-lookup"><span data-stu-id="c870d-108">Extend your current system integration and data integration workflows.</span></span>
* <span data-ttu-id="c870d-109">Помощь клиентам в использовании службы для управления профессиональными или личными задачами.</span><span class="sxs-lookup"><span data-stu-id="c870d-109">Help customers use your service to manage professional or personal tasks.</span></span>
* <span data-ttu-id="c870d-110">Увеличение охвата, возможности обнаружения и уровня использования вашей службы.</span><span class="sxs-lookup"><span data-stu-id="c870d-110">Expand the reach, discoverability, and use for your service.</span></span>

<span data-ttu-id="c870d-111">По сути, соединители — это веб-интерфейсы API, использующие REST для модульных интерфейсов, [формат метаданных Swagger](http://swagger.io/specification/) для документации и формат JSON для обмена данными.</span><span class="sxs-lookup"><span data-stu-id="c870d-111">Basically, connectors are web APIs that use REST for pluggable interfaces, [Swagger metadata format](http://swagger.io/specification/) for documentation, and JSON as their data exchange format.</span></span> <span data-ttu-id="c870d-112">Соединители являются интерфейсами REST API, которые обмениваются данными через конечные точки HTTP, и для их создания можно использовать любой язык, например .NET, Java или Node.js.</span><span class="sxs-lookup"><span data-stu-id="c870d-112">Because connectors are REST APIs that communicate through HTTP endpoints, you can use any language, like .NET, Java, or Node.js, for building connectors.</span></span> <span data-ttu-id="c870d-113">Интерфейсы API также можно разместить в [службе приложений Azure](../app-service/app-service-value-prop-what-is.md). Это платформа как услуга (PaaS), предоставляющая один из лучших, самых простых и масштабируемых способов размещения API.</span><span class="sxs-lookup"><span data-stu-id="c870d-113">You can also host your APIs on [Azure App Service](../app-service/app-service-value-prop-what-is.md), a platform-as-a-service (PaaS) offering that provides one of the best, easiest, and most scalable ways for API hosting.</span></span> 

<span data-ttu-id="c870d-114">Пользовательские API для работы с приложениями логики предоставляют [*действия*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) для выполнения определенных задач в рабочих процессах приложений логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-114">For custom APIs to work with logic apps, your API can provide [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that perform specific tasks in logic app workflows.</span></span> <span data-ttu-id="c870d-115">Кроме того, API может действовать как [*триггер*](./logic-apps-what-are-logic-apps.md#logic-app-concepts), запускающий рабочий процесс приложения логики, если новые данные или событие соответствует заданному условию.</span><span class="sxs-lookup"><span data-stu-id="c870d-115">Your API can also act as a [*trigger*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that starts a logic app workflow when new data or an event meets a specified condition.</span></span> <span data-ttu-id="c870d-116">В этом разделе описаны общие модели для создания действий и триггеров в API в зависимости от ожидаемого поведения интерфейса.</span><span class="sxs-lookup"><span data-stu-id="c870d-116">This topic describes common patterns that you can follow for building actions and triggers in your API, based on the behavior that you want your API to provide.</span></span>

> [!TIP] 
> <span data-ttu-id="c870d-117">Интерфейсы API можно развернуть в качестве [веб-приложений](../app-service-web/app-service-web-overview.md), но лучше развернуть их в качестве [приложений API](../app-service-api/app-service-api-apps-why-best-platform.md), что облегчит создание, размещение и использование интерфейсов API, как в облаке так и локально.</span><span class="sxs-lookup"><span data-stu-id="c870d-117">Although you can deploy your APIs as [web apps](../app-service-web/app-service-web-overview.md), consider deploying your APIs as [API apps](../app-service-api/app-service-api-apps-why-best-platform.md), which can make your job easier when you build, host, and consume APIs in the cloud and on premises.</span></span> <span data-ttu-id="c870d-118">Не нужно изменять код в API-интерфейсах, просто разверните свой код в приложении API.</span><span class="sxs-lookup"><span data-stu-id="c870d-118">You don't have to change any code in your APIs -- just deploy your code to an API app.</span></span> <span data-ttu-id="c870d-119">Узнайте, как [создавать приложения API с помощью ASP.NET](../app-service-api/app-service-api-dotnet-get-started.md), [Java](../app-service-api/app-service-api-java-api-app.md) или [Node.js](../app-service-api/app-service-api-nodejs-api-app.md).</span><span class="sxs-lookup"><span data-stu-id="c870d-119">Learn how to [build API apps created with ASP.NET](../app-service-api/app-service-api-dotnet-get-started.md), [Java](../app-service-api/app-service-api-java-api-app.md), or [Node.js](../app-service-api/app-service-api-nodejs-api-app.md).</span></span> 
>
> <span data-ttu-id="c870d-120">Примеры приложений API для приложений логики см. в [репозитории GitHub для Azure Logic Apps](http://github.com/logicappsio) или [блоге](http://aka.ms/logicappsblog).</span><span class="sxs-lookup"><span data-stu-id="c870d-120">For API App samples built for logic apps, visit the [Azure Logic Apps GitHub repository](http://github.com/logicappsio) or [blog](http://aka.ms/logicappsblog).</span></span>

## <a name="helpful-tools"></a><span data-ttu-id="c870d-121">Полезные инструменты</span><span class="sxs-lookup"><span data-stu-id="c870d-121">Helpful tools</span></span>

<span data-ttu-id="c870d-122">Пользовательский API наиболее оптимально работает с приложениями логики, если он содержит [документ Swagger](http://swagger.io/specification/) с описанием операций и параметров API.</span><span class="sxs-lookup"><span data-stu-id="c870d-122">A custom API works best with logic apps when the API also has a [Swagger document](http://swagger.io/specification/) that describes the API's operations and parameters.</span></span>
<span data-ttu-id="c870d-123">Есть много библиотек, например [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle), которые могут автоматически создавать файл Swagger.</span><span class="sxs-lookup"><span data-stu-id="c870d-123">Many libraries, like [Swashbuckle](https://github.com/domaindrivendev/Swashbuckle), can automatically generate the Swagger file for you.</span></span> <span data-ttu-id="c870d-124">Чтобы обеспечить оптимальную работу Swagger с приложением логики, можно добавить к нему заметку для отображаемых имен, типов свойств и т. д. при помощи [TRex](https://github.com/nihaue/TRex).</span><span class="sxs-lookup"><span data-stu-id="c870d-124">To annotate the Swagger file for display names, property types, and so on, you can also use [TRex](https://github.com/nihaue/TRex) so that your Swagger file works well with logic apps.</span></span>

<a name="actions"></a>

## <a name="action-patterns"></a><span data-ttu-id="c870d-125">Модели действий</span><span class="sxs-lookup"><span data-stu-id="c870d-125">Action patterns</span></span>

<span data-ttu-id="c870d-126">Для выполнения задач приложениями логики пользовательский API должен предоставлять определенные [*действия*](./logic-apps-what-are-logic-apps.md#logic-app-concepts).</span><span class="sxs-lookup"><span data-stu-id="c870d-126">For logic apps to perform tasks, your custom API should provide [*actions*](./logic-apps-what-are-logic-apps.md#logic-app-concepts).</span></span> <span data-ttu-id="c870d-127">Каждая операция в API сопоставляется с действием.</span><span class="sxs-lookup"><span data-stu-id="c870d-127">Each operation in your API maps to an action.</span></span> <span data-ttu-id="c870d-128">Базовое действие — это контроллер, который принимает запросы HTTP и возвращает ответы HTTP.</span><span class="sxs-lookup"><span data-stu-id="c870d-128">A basic action is a controller that accepts HTTP requests and returns HTTP responses.</span></span> <span data-ttu-id="c870d-129">Например, приложение логики отправляет запрос HTTP в веб- или API-приложение.</span><span class="sxs-lookup"><span data-stu-id="c870d-129">So for example, a logic app sends an HTTP request to your web app or API app.</span></span> <span data-ttu-id="c870d-130">Приложение возвращает ответ HTTP с содержимым для обработки приложением логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-130">Your app then returns an HTTP response, along with content that the logic app can process.</span></span>

<span data-ttu-id="c870d-131">Для стандартных действий можно написать метод HTTP-запроса в API и описать этот метод в файле Swagger.</span><span class="sxs-lookup"><span data-stu-id="c870d-131">For a standard action, you can write an HTTP request method in your API and describe that method in a Swagger file.</span></span> <span data-ttu-id="c870d-132">Затем можно напрямую вызвать API при помощи [действия HTTP](../connectors/connectors-native-http.md) или [HTTP + Swagger](../connectors/connectors-native-http-swagger.md).</span><span class="sxs-lookup"><span data-stu-id="c870d-132">You can then call your API directly with an [HTTP action](../connectors/connectors-native-http.md) or an [HTTP + Swagger](../connectors/connectors-native-http-swagger.md) action.</span></span> <span data-ttu-id="c870d-133">По умолчанию ответы должны возвращаться в [пределах времени ожидания запроса](./logic-apps-limits-and-config.md).</span><span class="sxs-lookup"><span data-stu-id="c870d-133">By default, responses must be returned within the [request timeout limit](./logic-apps-limits-and-config.md).</span></span> 

![Модель стандартного действия](./media/logic-apps-create-api-app/standard-action.png)

<span data-ttu-id="c870d-135"><a name="pattern-overview"></a>Чтобы приложение логики находилось в ожидании, пока в API обрабатываются длительно выполняемые задачи, в API можно использовать [асинхронную модель опроса](#async-pattern) или [асинхронную модель веб-перехватчика](#webhook-actions), описанные в этом разделе.</span><span class="sxs-lookup"><span data-stu-id="c870d-135"><a name="pattern-overview"></a> To make a logic app wait while your API finishes longer-running tasks, your API can follow the [asynchronous polling pattern](#async-pattern) or the [asynchronous webhook pattern](#webhook-actions) described in this topic.</span></span> <span data-ttu-id="c870d-136">Чтобы продемонстрировать различия этих моделей, используем аналогию. Представьте себе, что вы обращаетесь в кондитерскую, чтобы вам приготовили торт на заказ.</span><span class="sxs-lookup"><span data-stu-id="c870d-136">For an analogy that helps you visualize these patterns' different behaviors, imagine the process for ordering a custom cake from a bakery.</span></span> <span data-ttu-id="c870d-137">Модель опроса — это если вы каждые 20 минут звоните в кондитерскую, чтобы проверить, готов ли торт.</span><span class="sxs-lookup"><span data-stu-id="c870d-137">The polling pattern mirrors the behavior where you call the bakery every 20 minutes to check whether the cake is ready.</span></span> <span data-ttu-id="c870d-138">Модель веб-перехватчика — это если в кондитерской у вас взяли номер телефона, чтобы позвонить, когда торт будет готов.</span><span class="sxs-lookup"><span data-stu-id="c870d-138">The webhook pattern mirrors the behavior where the bakery asks you for your phone number so they can call you when the cake is ready.</span></span>

<span data-ttu-id="c870d-139">См. с примеры в [репозитории GitHub для Logic Apps](https://github.com/logicappsio).</span><span class="sxs-lookup"><span data-stu-id="c870d-139">For samples, visit the [Logic Apps GitHub repository](https://github.com/logicappsio).</span></span> <span data-ttu-id="c870d-140">А также узнайте больше о [метриках использования для действий](logic-apps-pricing.md).</span><span class="sxs-lookup"><span data-stu-id="c870d-140">Also, learn more about [usage metering for actions](logic-apps-pricing.md).</span></span>

<a name="async-pattern"></a>

### <a name="perform-long-running-tasks-with-the-polling-action-pattern"></a><span data-ttu-id="c870d-141">Обработка длительно выполняемых задач с помощью модели действия опроса</span><span class="sxs-lookup"><span data-stu-id="c870d-141">Perform long-running tasks with the polling action pattern</span></span>

<span data-ttu-id="c870d-142">Чтобы в API выполнялись задачи, длительность обработки которых превышает [предельное время ожидания запроса](./logic-apps-limits-and-config.md), можно использовать асинхронную модель опроса.</span><span class="sxs-lookup"><span data-stu-id="c870d-142">To have your API perform tasks that could run longer than the [request timeout limit](./logic-apps-limits-and-config.md), you can use the asynchronous polling pattern.</span></span> <span data-ttu-id="c870d-143">Эта модель обеспечивает работу API в отдельном потоке, сохраняя активное подключение к обработчику Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="c870d-143">This pattern has your API do work in a separate thread, but keep an active connection to the Logic Apps engine.</span></span> <span data-ttu-id="c870d-144">Таким образом, приложение логики не отключится по истечении времени ожидания и не перейдет к следующему действию в рабочем процессе, пока API не завершит работу.</span><span class="sxs-lookup"><span data-stu-id="c870d-144">That way, the logic app does not time out or continue with the next step in the workflow before your API finishes working.</span></span>

<span data-ttu-id="c870d-145">Общая схема работы</span><span class="sxs-lookup"><span data-stu-id="c870d-145">Here's the general pattern:</span></span>

1. <span data-ttu-id="c870d-146">Убедитесь, что обработчик получил данные о том, что API принял запрос и начал его выполнение.</span><span class="sxs-lookup"><span data-stu-id="c870d-146">Make sure that the engine knows that your API accepted the request and started working.</span></span>
2. <span data-ttu-id="c870d-147">При последующих запросах состояния задания от обработчика он должен получить данные о завершении задачи API.</span><span class="sxs-lookup"><span data-stu-id="c870d-147">When the engine makes subsequent requests for job status, let the engine know when your API finishes the task.</span></span>
3. <span data-ttu-id="c870d-148">Обработчик должен получать актуальные данные для продолжения рабочего процесса приложения логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-148">Return relevant data to the engine so that the logic app workflow can continue.</span></span>

<span data-ttu-id="c870d-149"><a name="bakery-polling-action"></a> Теперь вернемся к аналогии кондитерской и применим ее к модели опроса. Представьте что вы звоните в кондитерскую, чтобы вам доставили торт на заказ.</span><span class="sxs-lookup"><span data-stu-id="c870d-149"><a name="bakery-polling-action"></a> Now apply the previous bakery analogy to the polling pattern, and imagine that you call a bakery and order a custom cake for delivery.</span></span> <span data-ttu-id="c870d-150">Приготовление торта займет определенное время, а вы не собираетесь ждать звонка, пока в кондитерской работают над заказом.</span><span class="sxs-lookup"><span data-stu-id="c870d-150">The process for making the cake takes time, and you don't want to wait on the phone while the bakery works on the cake.</span></span> <span data-ttu-id="c870d-151">В кондитерской подтверждают заказ и просят вас звонить каждые 20 минут для проверки его состояния.</span><span class="sxs-lookup"><span data-stu-id="c870d-151">The bakery confirms your order and has you call every 20 minutes for the cake's status.</span></span> <span data-ttu-id="c870d-152">Вы звоните через 20 минут, но в кондитерской говорят, что торт не готов и вам нужно перезвонить еще через 20 минут.</span><span class="sxs-lookup"><span data-stu-id="c870d-152">After 20 minutes pass, you call the bakery, but they tell you that your cake isn't done and that you should call in another 20 minutes.</span></span> <span data-ttu-id="c870d-153">Этот процесс повторяется, пока вы не позвоните и вам не скажут, что заказ готов, и не доставят ваш торт.</span><span class="sxs-lookup"><span data-stu-id="c870d-153">This back-and-forth process continues until you call, and the bakery tells you that your order is ready and delivers your cake.</span></span> 

<span data-ttu-id="c870d-154">А теперь рассмотрим модель опроса.</span><span class="sxs-lookup"><span data-stu-id="c870d-154">So let's map this polling pattern back.</span></span> <span data-ttu-id="c870d-155">Кондитерская представляет собой пользовательский API, а вы, заказчик торта, представляете собой обработчик Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="c870d-155">The bakery represents your custom API, while you, the cake customer, represent the Logic Apps engine.</span></span> <span data-ttu-id="c870d-156">При запросе обработчика API подтверждает запрос и отвечает через определенный интервал времени, снабжая обработчик данными о состоянии задания.</span><span class="sxs-lookup"><span data-stu-id="c870d-156">When the engine calls your API with a request, your API confirms the request and responds with the time interval when the engine can check job status.</span></span> <span data-ttu-id="c870d-157">Обработчик продолжает проверять состояние задания, пока API не ответит, что оно выполнено. Затем данные возвращаются в приложение логики и рабочий процесс возобновляется.</span><span class="sxs-lookup"><span data-stu-id="c870d-157">The engine continues checking job status until your API responds that the job is done and returns data to your logic app, which then continues workflow.</span></span> 

![Модель действия опроса](./media/logic-apps-create-api-app/custom-api-async-action-pattern.png)

<span data-ttu-id="c870d-159">Ниже описаны конкретные действия API.</span><span class="sxs-lookup"><span data-stu-id="c870d-159">Here are the specific steps for your API to follow, described from the API's perspective:</span></span>

1. <span data-ttu-id="c870d-160">При получении API HTTP-запроса на начало работы немедленно должен возвращаться ответ HTTP `202 ACCEPTED` с заголовком `location`, описанным далее в этом шаге.</span><span class="sxs-lookup"><span data-stu-id="c870d-160">When your API gets an HTTP request to start work, immediately return an HTTP `202 ACCEPTED` response with the `location` header described later in this step.</span></span> <span data-ttu-id="c870d-161">Этот ответ информирует обработчик Logic Apps о том, что в API поступил запрос, приняты полезные данные запроса (входные данные) и выполняется обработка.</span><span class="sxs-lookup"><span data-stu-id="c870d-161">This response lets the Logic Apps engine know that your API got the request, accepted the request payload (data input), and is now processing.</span></span> 
   
   <span data-ttu-id="c870d-162">Ответ `202 ACCEPTED` должен содержать описанные ниже заголовки.</span><span class="sxs-lookup"><span data-stu-id="c870d-162">The `202 ACCEPTED` response should include these headers:</span></span>
   
   * <span data-ttu-id="c870d-163">*Обязательный*: заголовок `location`, который указывает абсолютный путь к URL-адресу, по которому обработчик Logic Apps сможет проверить состояние задания API.</span><span class="sxs-lookup"><span data-stu-id="c870d-163">*Required*: A `location` header that specifies the absolute path to a URL where the Logic Apps engine can check your API's job status</span></span>

   * <span data-ttu-id="c870d-164">*Необязательный*: заголовок `retry-after`, который указывает для обработчика количество секунд ожидания перед проверкой состояния задания по URL-адресу `location`.</span><span class="sxs-lookup"><span data-stu-id="c870d-164">*Optional*: A `retry-after` header that specifies the number of seconds that the engine should wait before checking the `location` URL for job status.</span></span> 

     <span data-ttu-id="c870d-165">По умолчанию обработчик выполняет проверку каждые 20 секунд.</span><span class="sxs-lookup"><span data-stu-id="c870d-165">By default, the engine checks every 20 seconds.</span></span> <span data-ttu-id="c870d-166">Чтобы задать другой интервал, включите в ответ заголовок `retry-after` и количество секунд до следующей операции опроса.</span><span class="sxs-lookup"><span data-stu-id="c870d-166">To specify a different interval, include the `retry-after` header and the number of seconds until the next poll.</span></span>

2. <span data-ttu-id="c870d-167">По истечении указанного времени обработчик Logic Apps выполняет опрос по URL-адресу `location`, чтобы проверить состояние задания.</span><span class="sxs-lookup"><span data-stu-id="c870d-167">After the specified time passes, the Logic Apps engine polls the `location` URL to check job status.</span></span> <span data-ttu-id="c870d-168">После этих проверок из API должны поступать следующие ответы:</span><span class="sxs-lookup"><span data-stu-id="c870d-168">Your API should perform these checks and return these responses:</span></span>
   
   * <span data-ttu-id="c870d-169">если задание выполнено, поступает ответ HTTP `200 OK` и полезные данные ответа (входные данные для следующего шага);</span><span class="sxs-lookup"><span data-stu-id="c870d-169">If the job is done, return an HTTP `200 OK` response, along with the response payload (input for the next step).</span></span>

   * <span data-ttu-id="c870d-170">если задание еще обрабатывается, должен поступить еще один ответ HTTP `202 ACCEPTED` с такими же заголовками, как и в первоначальном ответе.</span><span class="sxs-lookup"><span data-stu-id="c870d-170">If the job is still processing, return another HTTP `202 ACCEPTED` response, but with the same headers as the original response.</span></span>

<span data-ttu-id="c870d-171">Если в API применена эта модель, в определении рабочего процесса приложения логики не нужно выполнять никаких действий, чтобы продолжать проверку состояния задания.</span><span class="sxs-lookup"><span data-stu-id="c870d-171">When your API follows this pattern, you don't have to do anything in the logic app workflow definition to continue checking job status.</span></span> <span data-ttu-id="c870d-172">Когда обработчик получает ответ HTTP `202 ACCEPTED` с допустимым заголовком `location`, он действует в соответствии с асинхронной моделью и проверяет заголовок `location`, пока из API не поступит ответ, отличный от 202.</span><span class="sxs-lookup"><span data-stu-id="c870d-172">When the engine gets an HTTP `202 ACCEPTED` response and a valid `location` header, the engine respects the asynchronous pattern and checks the `location` header until your API returns a non-202 response.</span></span>

> [!TIP]
> <span data-ttu-id="c870d-173">Ознакомьтесь с примером асинхронной модели в этом [образце ответа асинхронного контроллера в GitHub](https://github.com/logicappsio/LogicAppsAsyncResponseSample).</span><span class="sxs-lookup"><span data-stu-id="c870d-173">For an example asynchronous pattern, review this [asynchronous controller response sample in GitHub](https://github.com/logicappsio/LogicAppsAsyncResponseSample).</span></span>

<a name="webhook-actions"></a>

### <a name="perform-long-running-tasks-with-the-webhook-action-pattern"></a><span data-ttu-id="c870d-174">Обработка длительно выполняемых задач с помощью модели действия веб-перехватчика</span><span class="sxs-lookup"><span data-stu-id="c870d-174">Perform long-running tasks with the webhook action pattern</span></span>

<span data-ttu-id="c870d-175">В качестве альтернативы можно использовать модель веб-перехватчика для длительно выполняемых задач и асинхронной обработки.</span><span class="sxs-lookup"><span data-stu-id="c870d-175">As an alternative, you can use the webhook pattern for long-running tasks and asynchronous processing.</span></span> <span data-ttu-id="c870d-176">Эта модель приостанавливает приложение логики и переводит его в режим ожидания "обратного вызова" из API, чтобы завершить обработку перед продолжением рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="c870d-176">This pattern has the logic app pause and wait for a "callback" from your API to finish processing before continuing workflow.</span></span> <span data-ttu-id="c870d-177">Этот обратный вызов является запросом HTTP POST. Когда происходит событие, он отправляет сообщение по URL-адресу.</span><span class="sxs-lookup"><span data-stu-id="c870d-177">This callback is an HTTP POST that sends a message to a URL when an event happens.</span></span> 

<span data-ttu-id="c870d-178"><a name="bakery-webhook-action"></a> Теперь применим аналогию кондитерской к модели веб-перехватчика. Итак, вы звоните в кондитерскую, чтобы вам доставили торт на заказ.</span><span class="sxs-lookup"><span data-stu-id="c870d-178"><a name="bakery-webhook-action"></a> Now apply the previous bakery analogy to the webhook pattern, and imagine that you call a bakery and order a custom cake for delivery.</span></span> <span data-ttu-id="c870d-179">Приготовление торта займет определенное время, а вы не собираетесь ждать звонка, пока в кондитерской работают над заказом.</span><span class="sxs-lookup"><span data-stu-id="c870d-179">The process for making the cake takes time, and you don't want to wait on the phone while the bakery works on the cake.</span></span> <span data-ttu-id="c870d-180">В кондитерской подтверждают заказ, но на этот раз вы оставляете свой номер телефона, чтобы вам позвонили, когда торт будет готов.</span><span class="sxs-lookup"><span data-stu-id="c870d-180">The bakery confirms your order, but this time, you give them your phone number so they can call you when the cake is done.</span></span> <span data-ttu-id="c870d-181">Затем вам сообщают, что заказ готов, и доставляют торт.</span><span class="sxs-lookup"><span data-stu-id="c870d-181">This time, the bakery tells you when your order is ready and delivers your cake.</span></span>

<span data-ttu-id="c870d-182">Рассмотрим модель веб-перехватчика. Кондитерская представляет собой пользовательский интерфейс API, а вы, заказчик торта, представляете собой обработчик Logic Apps.</span><span class="sxs-lookup"><span data-stu-id="c870d-182">When we map this webhook pattern back, the bakery represents your custom API, while you, the cake customer, represent the Logic Apps engine.</span></span> <span data-ttu-id="c870d-183">Обработчик вызывает API при помощи запроса с URL-адресом для "обратного вызова".</span><span class="sxs-lookup"><span data-stu-id="c870d-183">The engine calls your API with a request and includes a "callback" URL.</span></span>
<span data-ttu-id="c870d-184">Выполнив задание, API использует URL-адрес для оповещения обработчика и возврата данных в приложение логики, которое возобновляет рабочий процесс.</span><span class="sxs-lookup"><span data-stu-id="c870d-184">When the job is done, your API uses the URL to notify the engine and return data to your logic app, which then continues workflow.</span></span> 

<span data-ttu-id="c870d-185">Для этой модели настройте на контроллере две конечные точки: `subscribe` и`unsubscribe`</span><span class="sxs-lookup"><span data-stu-id="c870d-185">For this pattern, set up two endpoints on your controller: `subscribe` and `unsubscribe`</span></span>

*  <span data-ttu-id="c870d-186">Конечная точка `subscribe`: когда в рабочем процессе приходит очередь действия API, обработчик Logic Apps вызывает конечную точку `subscribe`.</span><span class="sxs-lookup"><span data-stu-id="c870d-186">`subscribe` endpoint: When execution reaches your API's action in the workflow, the Logic Apps engine calls the `subscribe` endpoint.</span></span> <span data-ttu-id="c870d-187">После этого приложение логики создает URL-адрес обратного вызова, который сохраняется в API, и ожидает от API обратного вызова по завершении работы.</span><span class="sxs-lookup"><span data-stu-id="c870d-187">This step causes the logic app to create a callback URL that your API stores and then wait for the callback from your API when work is complete.</span></span> <span data-ttu-id="c870d-188">Затем API выполняет обратный вызов с запросом HTTP POST по URL-адресу и передает любое полученное содержимое и заголовки в качестве входных данных для приложения логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-188">Your API then calls back with an HTTP POST to the URL and passes any returned content and headers as input to the logic app.</span></span>

* <span data-ttu-id="c870d-189">Конечная точка `unsubscribe`: при отмене выполнения приложения логики обработчик Logic Apps вызывает конечную точку `unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="c870d-189">`unsubscribe` endpoint: If the logic app run is canceled, the Logic Apps engine calls the `unsubscribe` endpoint.</span></span> <span data-ttu-id="c870d-190">В таком случае API может отменить регистрацию URL-адреса обратного вызова и при необходимости остановить любые процессы.</span><span class="sxs-lookup"><span data-stu-id="c870d-190">Your API can then unregister the callback URL and stop any processes as necessary.</span></span>

![Модель действия веб-перехватчика](./media/logic-apps-create-api-app/custom-api-webhook-action-pattern.png)

> [!NOTE]
> <span data-ttu-id="c870d-192">В настоящее время конструктор приложений логики не поддерживает обнаружение конечных точек веб-перехватчика с помощью Swagger.</span><span class="sxs-lookup"><span data-stu-id="c870d-192">Currently, the Logic App Designer doesn't support discovering webhook endpoints through Swagger.</span></span> <span data-ttu-id="c870d-193">Поэтому для модели необходимо добавить [действие **веб-перехватчика**](../connectors/connectors-native-webhook.md) и указать URL-адрес, заголовки и текст запроса.</span><span class="sxs-lookup"><span data-stu-id="c870d-193">So for this pattern, you have to add a [**Webhook** action](../connectors/connectors-native-webhook.md) and specify the URL, headers, and body for your request.</span></span> <span data-ttu-id="c870d-194">Также см. раздел [Действия и триггеры рабочего процесса](logic-apps-workflow-actions-triggers.md#api-connection-webhook-action).</span><span class="sxs-lookup"><span data-stu-id="c870d-194">See also [Workflow actions and triggers](logic-apps-workflow-actions-triggers.md#api-connection-webhook-action).</span></span> <span data-ttu-id="c870d-195">Чтобы передать URL-адрес обратного вызова, можно при необходимости использовать функцию рабочего процесса `@listCallbackUrl()` в любом предыдущем поле.</span><span class="sxs-lookup"><span data-stu-id="c870d-195">To pass in the callback URL, you can use the `@listCallbackUrl()` workflow function in any of the previous fields as necessary.</span></span>

> [!TIP]
> <span data-ttu-id="c870d-196">Пример модели веб-перехватчика см. в [образце триггера веб-перехватчика в GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span><span class="sxs-lookup"><span data-stu-id="c870d-196">For an example webhook pattern, review this [webhook trigger sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span></span>

<a name="triggers"></a>

## <a name="trigger-patterns"></a><span data-ttu-id="c870d-197">Модели триггеров</span><span class="sxs-lookup"><span data-stu-id="c870d-197">Trigger patterns</span></span>

<span data-ttu-id="c870d-198">Пользовательский API может действовать как [*триггер*](./logic-apps-what-are-logic-apps.md#logic-app-concepts), запускающий приложение логики, если новые данные или событие соответствует заданному условию.</span><span class="sxs-lookup"><span data-stu-id="c870d-198">Your custom API can act as a [*trigger*](./logic-apps-what-are-logic-apps.md#logic-app-concepts) that starts a logic app when new data or an event meets a specified condition.</span></span> <span data-ttu-id="c870d-199">Этот триггер может как выполнять регулярную проверку, так и ожидать передачи новых данных или информации о событиях в конечной точке службы.</span><span class="sxs-lookup"><span data-stu-id="c870d-199">This trigger can either check regularly, or wait and listen, for new data or events at your service endpoint.</span></span> <span data-ttu-id="c870d-200">Если новые данные или событие соответствуют заданному условию, триггер срабатывает и запускает приложение логики, которое ожидает передачи данных от этого триггера.</span><span class="sxs-lookup"><span data-stu-id="c870d-200">If new data or an event meets the specified condition, the trigger fires and starts the logic app, which is listening to that trigger.</span></span> <span data-ttu-id="c870d-201">Для такого запуска приложения логики в API можно применить модель [*опрашивающего триггера*](#polling-triggers) или [*триггера веб-перехватчика*](#webhook-triggers).</span><span class="sxs-lookup"><span data-stu-id="c870d-201">To start logic apps this way, your API can follow the [*polling trigger*](#polling-triggers) or the [*webhook trigger*](#webhook-triggers) pattern.</span></span> <span data-ttu-id="c870d-202">Эти модели похожи на аналогичные решения для [действий опроса](#async-pattern) и [действий веб-перехватчика](#webhook-actions).</span><span class="sxs-lookup"><span data-stu-id="c870d-202">These patterns are similar to their counterparts for [polling actions](#async-pattern) and [webhook actions](#webhook-actions).</span></span> <span data-ttu-id="c870d-203">См. дополнительные сведения о [метриках использования для триггеров](logic-apps-pricing.md).</span><span class="sxs-lookup"><span data-stu-id="c870d-203">Also, learn more about [usage metering for triggers](logic-apps-pricing.md).</span></span>

<a name="polling-triggers"></a>

### <a name="check-for-new-data-or-events-regularly-with-the-polling-trigger-pattern"></a><span data-ttu-id="c870d-204">Регулярная проверка наличия новых данных или событий при помощи модели опрашивающего триггера</span><span class="sxs-lookup"><span data-stu-id="c870d-204">Check for new data or events regularly with the polling trigger pattern</span></span>

<span data-ttu-id="c870d-205">*Опрашивающий триггер* работает так же, как и [действие опроса](#async-pattern), описанное ранее в этой статье.</span><span class="sxs-lookup"><span data-stu-id="c870d-205">A *polling trigger* acts much like the [polling action](#async-pattern) previously described in this topic.</span></span> <span data-ttu-id="c870d-206">Обработчик Logic Apps периодически вызывает и проверяет конечную точку триггера на наличие новых данных или событий.</span><span class="sxs-lookup"><span data-stu-id="c870d-206">The Logic Apps engine periodically calls and checks the trigger endpoint for new data or events.</span></span> <span data-ttu-id="c870d-207">Если обработчик обнаруживает новые данные или событие, соответствующие указанным условиям, триггер срабатывает.</span><span class="sxs-lookup"><span data-stu-id="c870d-207">If the engine finds new data or an event that meets your specified condition, the trigger fires.</span></span> <span data-ttu-id="c870d-208">Затем обработчик создает экземпляр приложения логики, который обрабатывает данные в качестве входных.</span><span class="sxs-lookup"><span data-stu-id="c870d-208">Then, the engine creates a logic app instance that processes the data as input.</span></span> 

![Модель опрашивающего триггера](./media/logic-apps-create-api-app/custom-api-polling-trigger-pattern.png)

> [!NOTE]
> <span data-ttu-id="c870d-210">Каждый опрашивающий запрос считается выполнением действия, даже если экземпляр логики приложения не создается.</span><span class="sxs-lookup"><span data-stu-id="c870d-210">Each polling request counts as an action execution, even when no logic app instance is created.</span></span> <span data-ttu-id="c870d-211">Чтобы предотвратить повторную обработку данных, триггер должен удалять данные, которые уже считаны и переданы в приложение логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-211">To prevent processing the same data multiple times, your trigger should clean up data that was already read and passed to the logic app.</span></span>

<span data-ttu-id="c870d-212">Ниже описаны конкретные действия опрашивающего триггера с точки зрения API.</span><span class="sxs-lookup"><span data-stu-id="c870d-212">Here are specific steps for a polling trigger, described from the API's perspective:</span></span>

| <span data-ttu-id="c870d-213">Найдены ли новые данные или событие?</span><span class="sxs-lookup"><span data-stu-id="c870d-213">Found new data or event?</span></span>  | <span data-ttu-id="c870d-214">Ответ API</span><span class="sxs-lookup"><span data-stu-id="c870d-214">API response</span></span> | 
| ------------------------- | ------------ |
| <span data-ttu-id="c870d-215">Найдено</span><span class="sxs-lookup"><span data-stu-id="c870d-215">Found</span></span> | <span data-ttu-id="c870d-216">Возврат данных состояния HTTP `200 OK` с полезными данными ответа (входные данные для следующего шага).</span><span class="sxs-lookup"><span data-stu-id="c870d-216">Return an HTTP `200 OK` status with the response payload (input for next step).</span></span> <br/><span data-ttu-id="c870d-217">При поступлении такого ответа создается экземпляр приложения логики и запускается рабочий процесс.</span><span class="sxs-lookup"><span data-stu-id="c870d-217">This response creates a logic app instance and starts the workflow.</span></span> |
| <span data-ttu-id="c870d-218">Не найдено</span><span class="sxs-lookup"><span data-stu-id="c870d-218">Not found</span></span> | <span data-ttu-id="c870d-219">Возврат данных состояние HTTP `202 ACCEPTED` с заголовками `location` и `retry-after`.</span><span class="sxs-lookup"><span data-stu-id="c870d-219">Return an HTTP `202 ACCEPTED` status with a `location` header and a `retry-after` header.</span></span> <br/><span data-ttu-id="c870d-220">Для триггеров заголовок `location` также должен содержать параметр запроса `triggerState`, который обычно является меткой времени.</span><span class="sxs-lookup"><span data-stu-id="c870d-220">For triggers, the `location` header should also contain a `triggerState` query parameter, which is usually a "timestamp."</span></span> <span data-ttu-id="c870d-221">API может использовать этот идентификатор для отслеживания времени последнего запуска приложения логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-221">Your API can use this identifier to track the last time that the logic app was triggered.</span></span> |

<span data-ttu-id="c870d-222">Например, для регулярной проверки службы на предмет новых файлов можно создать опрашивающий триггер со следующим поведением:</span><span class="sxs-lookup"><span data-stu-id="c870d-222">For example, to periodically check your service for new files, you might build a polling trigger that has these behaviors:</span></span>

| <span data-ttu-id="c870d-223">Включает ли запрос `triggerState`?</span><span class="sxs-lookup"><span data-stu-id="c870d-223">Request includes `triggerState`?</span></span> | <span data-ttu-id="c870d-224">Ответ API</span><span class="sxs-lookup"><span data-stu-id="c870d-224">API response</span></span> |
| -------------------------------- | -------------|
| <span data-ttu-id="c870d-225">Нет</span><span class="sxs-lookup"><span data-stu-id="c870d-225">No</span></span> | <span data-ttu-id="c870d-226">Возврат данных состояния HTTP `202 ACCEPTED` и заголовка `location` (для `triggerState` установлено текущее время, а для `retry-after` — интервал в 15 секунд).</span><span class="sxs-lookup"><span data-stu-id="c870d-226">Return an HTTP `202 ACCEPTED` status plus a `location` header with `triggerState` set to the current time and the `retry-after` interval to 15 seconds.</span></span> |
| <span data-ttu-id="c870d-227">Да</span><span class="sxs-lookup"><span data-stu-id="c870d-227">Yes</span></span> | <span data-ttu-id="c870d-228">Проверка службы на наличие файлов, добавленных после `DateTime` для `triggerState`.</span><span class="sxs-lookup"><span data-stu-id="c870d-228">Check your service for files added after the `DateTime` for `triggerState`.</span></span> |

| <span data-ttu-id="c870d-229">Количество найденных файлов</span><span class="sxs-lookup"><span data-stu-id="c870d-229">Number of files found</span></span> | <span data-ttu-id="c870d-230">Ответ API</span><span class="sxs-lookup"><span data-stu-id="c870d-230">API response</span></span> |
| --------------------- | -------------|
| <span data-ttu-id="c870d-231">Один файл</span><span class="sxs-lookup"><span data-stu-id="c870d-231">Single file</span></span> | <span data-ttu-id="c870d-232">Возврат информации о состоянии HTTP `200 OK` и содержимого с полезными данными, обновление `triggerState` до `DateTime` для возвращенного файла и установка для `retry-after` интервала в 15 секунд.</span><span class="sxs-lookup"><span data-stu-id="c870d-232">Return an HTTP `200 OK` status and the content payload, update `triggerState` to the `DateTime` for the returned file, and set `retry-after` interval to 15 seconds.</span></span> |
| <span data-ttu-id="c870d-233">Разделение на несколько файлов</span><span class="sxs-lookup"><span data-stu-id="c870d-233">Multiple files</span></span> | <span data-ttu-id="c870d-234">Поочередный возврат файлов и данных состояния HTTP `200 OK`, обновление `triggerState` и установка для `retry-after` интервала в 0 секунд.</span><span class="sxs-lookup"><span data-stu-id="c870d-234">Return one file at a time and an HTTP `200 OK` status, update `triggerState`, and set the `retry-after` interval to 0 seconds.</span></span> </br><span data-ttu-id="c870d-235">Эти действия информируют обработчик о том, что доступны дополнительные данные и требуется немедленный запрос данных по URL-адресу в заголовке `location`.</span><span class="sxs-lookup"><span data-stu-id="c870d-235">These steps let the engine know that more data is available, and that the engine should immediately request the data from the URL in the `location` header.</span></span> |
| <span data-ttu-id="c870d-236">Нет файлов</span><span class="sxs-lookup"><span data-stu-id="c870d-236">No files</span></span> | <span data-ttu-id="c870d-237">Возврат данных состояния HTTP `202 ACCEPTED`, `triggerState` без изменений и установка для `retry-after` интервала в 15 секунд.</span><span class="sxs-lookup"><span data-stu-id="c870d-237">Return an HTTP `202 ACCEPTED` status, don't change `triggerState`, and set the `retry-after` interval to 15 seconds.</span></span> |

> [!TIP]
> <span data-ttu-id="c870d-238">Пример модели опрашивающего триггера см. в [образце контроллера опрашивающего триггера в GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/PollTriggerController.cs).</span><span class="sxs-lookup"><span data-stu-id="c870d-238">For an example polling trigger pattern, review this [poll trigger controller sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/PollTriggerController.cs).</span></span>

<a name="webhook-triggers"></a>

### <a name="wait-and-listen-for-new-data-or-events-with-the-webhook-trigger-pattern"></a><span data-ttu-id="c870d-239">Ожидание передачи новых данных или информации о событиях с помощью модели триггера веб-перехватчика</span><span class="sxs-lookup"><span data-stu-id="c870d-239">Wait and listen for new data or events with the webhook trigger pattern</span></span>

<span data-ttu-id="c870d-240">Триггер веб-перехватчика — *извещающий триггер*, который ожидает передачи новых данных или информации о событиях в конечной точке службы.</span><span class="sxs-lookup"><span data-stu-id="c870d-240">A webhook trigger is a *push trigger* that waits and listens for new data or events at your service endpoint.</span></span> <span data-ttu-id="c870d-241">Если новые данные или событие соответствуют заданному условию, триггер срабатывает и создается экземпляр приложения логики, который обрабатывает данные как входные.</span><span class="sxs-lookup"><span data-stu-id="c870d-241">If new data or an event meets the specified condition, the trigger fires and creates a logic app instance, which then processes the data as input.</span></span>
<span data-ttu-id="c870d-242">Триггеры веб-перехватчика работают аналогично [действиям веб-перехватчика](#webhook-actions), описанным в этой статье ранее и настраиваются при помощи конечных точек `subscribe` и `unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="c870d-242">Webhook triggers act much like the [webhook actions](#webhook-actions) previously described in this topic, and are set up with `subscribe` and `unsubscribe` endpoints.</span></span> 

* <span data-ttu-id="c870d-243">Конечная точка `subscribe`: при добавлении и сохранении триггера веб-перехватчика в приложении логики обработчик Logic Apps вызывает конечную точку `subscribe`.</span><span class="sxs-lookup"><span data-stu-id="c870d-243">`subscribe` endpoint: When you add and save a webhook trigger in your logic app, the Logic Apps engine calls the `subscribe` endpoint.</span></span> <span data-ttu-id="c870d-244">После этого приложение логики создает URL-адрес обратного вызова, который сохраняется в API.</span><span class="sxs-lookup"><span data-stu-id="c870d-244">This step causes the logic app to create a callback URL that your API stores.</span></span> <span data-ttu-id="c870d-245">Если есть новые данные или событие, которое соответствуют заданному условию, API выполняет обратный вызов по URL-адресу при помощи HTTP POST.</span><span class="sxs-lookup"><span data-stu-id="c870d-245">When there's new data or an event that meets the specified condition, your API calls back with an HTTP POST to the URL.</span></span> <span data-ttu-id="c870d-246">Полезные данные содержимого и заголовки передаются в приложение логики как входные данные.</span><span class="sxs-lookup"><span data-stu-id="c870d-246">The content payload and headers pass as input to the logic app.</span></span>

* <span data-ttu-id="c870d-247">Конечная точка `unsubscribe`: при удалении триггера веб-перехватчика или всего приложения логики обработчик Logic Apps вызывает конечную точку `unsubscribe`.</span><span class="sxs-lookup"><span data-stu-id="c870d-247">`unsubscribe` endpoint: If the webhook trigger or entire logic app is deleted, the Logic Apps engine calls the `unsubscribe` endpoint.</span></span> <span data-ttu-id="c870d-248">В таком случае API может отменить регистрацию URL-адреса обратного вызова и при необходимости остановить любые процессы.</span><span class="sxs-lookup"><span data-stu-id="c870d-248">Your API can then unregister the callback URL and stop any processes as necessary.</span></span>

![Модель триггера веб-перехватчика](./media/logic-apps-create-api-app/custom-api-webhook-trigger-pattern.png)

> [!NOTE]
> <span data-ttu-id="c870d-250">В настоящее время конструктор приложений логики не поддерживает обнаружение конечных точек веб-перехватчика с помощью Swagger.</span><span class="sxs-lookup"><span data-stu-id="c870d-250">Currently, the Logic App Designer doesn't support discovering webhook endpoints through Swagger.</span></span> <span data-ttu-id="c870d-251">Поэтому для модели необходимо добавить [**триггер** веб-перехватчика](../connectors/connectors-native-webhook.md) и указать URL-адрес, заголовки и текст для запроса.</span><span class="sxs-lookup"><span data-stu-id="c870d-251">So for this pattern, you have to add a [**Webhook** trigger](../connectors/connectors-native-webhook.md) and specify the URL, headers, and body for your request.</span></span> <span data-ttu-id="c870d-252">См. раздел [Триггер httpWebhook](logic-apps-workflow-actions-triggers.md#httpwebhook-trigger).</span><span class="sxs-lookup"><span data-stu-id="c870d-252">See also [HTTPWebhook trigger](logic-apps-workflow-actions-triggers.md#httpwebhook-trigger).</span></span> <span data-ttu-id="c870d-253">Чтобы передать URL-адрес обратного вызова, можно при необходимости использовать функцию рабочего процесса `@listCallbackUrl()` в любом предыдущем поле.</span><span class="sxs-lookup"><span data-stu-id="c870d-253">To pass in the callback URL, you can use the `@listCallbackUrl()` workflow function in any of the previous fields as necessary.</span></span>
>
> <span data-ttu-id="c870d-254">Чтобы предотвратить повторную обработку данных, триггер должен удалять данные, которые уже считаны и переданы в приложение логики.</span><span class="sxs-lookup"><span data-stu-id="c870d-254">To prevent processing the same data multiple times, your trigger should clean up data that was already read and passed to the logic app.</span></span>

> [!TIP]
> <span data-ttu-id="c870d-255">Пример модели веб-перехватчика см. в [образце контроллера триггера веб-перехватчика в GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span><span class="sxs-lookup"><span data-stu-id="c870d-255">For an example webhook pattern, review this [webhook trigger controller sample in GitHub](https://github.com/logicappsio/LogicAppTriggersExample/blob/master/LogicAppTriggers/Controllers/WebhookTriggerController.cs).</span></span>

## <a name="deploy-call-and-secure-custom-apis"></a><span data-ttu-id="c870d-256">Развертывание, вызов и защита пользовательских API</span><span class="sxs-lookup"><span data-stu-id="c870d-256">Deploy, call, and secure custom APIs</span></span>

<span data-ttu-id="c870d-257">После создания пользовательских API настройте их для развертывания, чтобы обеспечить безопасность при вызове интерфейсов.</span><span class="sxs-lookup"><span data-stu-id="c870d-257">After creating your custom APIs, set up your APIs for deployment so you can call them securely.</span></span> <span data-ttu-id="c870d-258">Узнайте, как [развертывать, вызывать и защищать пользовательские API для приложений логики](./logic-apps-custom-hosted-api.md).</span><span class="sxs-lookup"><span data-stu-id="c870d-258">Learn how to [deploy, call, and secure custom APIs for logic apps](./logic-apps-custom-hosted-api.md).</span></span>

## <a name="publish-custom-apis-to-azure"></a><span data-ttu-id="c870d-259">Публикация пользовательских API в Azure</span><span class="sxs-lookup"><span data-stu-id="c870d-259">Publish custom APIs to Azure</span></span>

<span data-ttu-id="c870d-260">Если вы хотите сделать пользовательские API доступными для использования в Azure, отправьте заявку на участие в [программе Microsoft Azure Certified](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span><span class="sxs-lookup"><span data-stu-id="c870d-260">To make your custom APIs available for public use in Azure, submit your nominations to the [Microsoft Azure Certified program](https://azure.microsoft.com/marketplace/programs/certified/logic-apps/).</span></span>

## <a name="get-help"></a><span data-ttu-id="c870d-261">Получение справки</span><span class="sxs-lookup"><span data-stu-id="c870d-261">Get help</span></span>

<span data-ttu-id="c870d-262">За специализированной помощью по пользовательским API обращайтесь по адресу [customapishelp@microsoft.com](mailto:customapishelp@microsoft.com).</span><span class="sxs-lookup"><span data-stu-id="c870d-262">For specific help with custom APIs, contact [customapishelp@microsoft.com](mailto:customapishelp@microsoft.com).</span></span>

<span data-ttu-id="c870d-263">Чтобы задать вопросы, помочь другим пользователям и узнать, что делают другие пользователи, посетите [форум по Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).</span><span class="sxs-lookup"><span data-stu-id="c870d-263">To ask questions, answer questions, and see what other Azure Logic Apps users are doing, visit the [Azure Logic Apps forum](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).</span></span>

<span data-ttu-id="c870d-264">Чтобы улучшить Logic Apps и соединители, голосуйте за идеи или предлагайте собственные на [сайте обратной связи Logic Apps](http://aka.ms/logicapps-wish).</span><span class="sxs-lookup"><span data-stu-id="c870d-264">To help improve Logic Apps and connectors, vote on or submit ideas at the [Logic Apps user feedback site](http://aka.ms/logicapps-wish).</span></span> 

## <a name="next-steps"></a><span data-ttu-id="c870d-265">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="c870d-265">Next steps</span></span>

* [<span data-ttu-id="c870d-266">Метрики использования для действий и триггеров</span><span class="sxs-lookup"><span data-stu-id="c870d-266">Usage metering for actions and triggers</span></span>](logic-apps-pricing.md)
* [<span data-ttu-id="c870d-267">Обработка типов содержимого</span><span class="sxs-lookup"><span data-stu-id="c870d-267">Handle content types</span></span>](./logic-apps-content-type.md)
* [<span data-ttu-id="c870d-268">Обработка ошибок и исключений</span><span class="sxs-lookup"><span data-stu-id="c870d-268">Handle errors and exceptions</span></span>](./logic-apps-exception-handling.md)
* [<span data-ttu-id="c870d-269">Безопасный доступ к приложениям логики</span><span class="sxs-lookup"><span data-stu-id="c870d-269">Secure access to your logic apps</span></span>](./logic-apps-securing-a-logic-app.md)
* [<span data-ttu-id="c870d-270">Вызовы, срабатывания триггеров и создание вложенных приложений логики с конечными точками HTTP</span><span class="sxs-lookup"><span data-stu-id="c870d-270">Call, trigger, or nest logic apps with HTTP endpoints</span></span>](./logic-apps-http-endpoint.md)