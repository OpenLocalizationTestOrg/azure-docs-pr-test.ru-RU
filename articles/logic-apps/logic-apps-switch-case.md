---
title: "Оператор switch для разных действий в Azure Logic Apps | Документация Майкрософт"
description: "Выбор различных действий, выполняемых в приложениях логики с помощью оператора switch на основе значений выражений"
services: logic-apps
keywords: "оператор switch"
author: derek1ee
manager: anneta
editor: 
documentationcenter: 
ms.assetid: 
ms.service: logic-apps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/18/2016
ms.author: LADocs; deli
ms.openlocfilehash: 338b6a5b549d7bf81186550295608438ac4aee32
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="perform-different-actions-in-logic-apps-with-a-switch-statement"></a>Выполнение различных действий в приложениях логики с помощью оператора switch

При создании рабочего процесса часто требуется выполнять разные действия в зависимости от значения объекта или выражения. Например, поведение приложения логики может быть разным при разных кодах состояния HTTP-запроса или выборе разных параметров в сообщении электронной почты.

Для реализации этих сценариев можно использовать оператор switch. Приложение логики может оценить маркер или выражение и выбрать вариант с тем же значением для выполнения указанного действия. Проверяемое выражение должно совпадать только с одним вариантом.

> [!TIP]
> Как и в других языках программирования, операторы switch поддерживают только операторы равенства. Если вам нужны другие операторы сравнения (к примеру, оператор greater than), используйте выражение условия.
> Чтобы выполнение было детерминированным, варианты должны содержать уникальные статические значения, а не динамические маркеры или выражения.

## <a name="prerequisites"></a>Предварительные требования

- Активная подписка Azure. Если у вас еще нет активной подписки Azure, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/) или [попробуйте бесплатную версию Logic Apps](https://tryappservice.azure.com/).
- [Базовые сведения о приложениях логики](logic-apps-what-are-logic-apps.md)

## <a name="add-a-switch-statement-to-your-workflow"></a>Добавление оператора switch для рабочего процесса

Чтобы показать, как работает оператор switch, в этом примере создается приложение логики, которое отслеживает файлы, переданные в Dropbox. При передаче новых файлов приложение логики отправляет сообщение электронной почты подтверждающему лицу, которое выбирает, нужно ли переносить эти файлы в SharePoint. Приложение использует оператор switch, который выполняет различные действия на основе значения, выбранного подтверждающим лицом.

1. Создайте приложение логики и выберите триггер **Dropbox – When a file is created** (Dropbox — при создании файла).

   ![Использование триггера Dropbox — When a file is created (Dropbox — при создании файла)](./media/logic-apps-switch-case/dropbox-trigger.jpg)

2. Для этого триггера создайте действие **Outlook.com – Send approval email** (Outlook — отправка сообщения электронной почты для утверждения).

   > [!TIP]
   > Приложения логики поддерживают также утверждение по электронной почте из учетной записи Outlook в Office 365.

   - Если вы не установили подключение, вам будет предложено создать его.
   - Заполните обязательные поля. Например, в поле **Кому** укажите адрес электронной почты для отправки сообщения электронной почты подтверждающему лицу.
   - В разделе **User Options** (Параметры пользователя) введите `Approve, Reject`.

   ![Настройка подключения](./media/logic-apps-switch-case/send-approval-email-action.jpg)

3. Добавьте оператор switch.

   - Выберите **+ New step** (+Новый шаг) > **... Дополнительно** > **Add a switch case** (Добавить вариант для оператора switch). 
   - Теперь нужно выбрать действие, выполняемое на основе выходных данных `SelectedOptions` из действия *Send approval email* (Отправка сообщения электронной почты для утверждения). 
   Это поле можно найти в селекторе **Добавить динамическое содержимое**.
   - Используйте *Вариант 1* для обработки, когда подтверждающее лицо выбирает `Approve`.
     - Если поступит утверждение, исходный файл копируется в SharePoint Online с помощью действия [**SharePoint Online – Create file**](../connectors/connectors-create-api-sharepointonline.md) (SharePoint Online — создать файл).
     - Добавьте в этот вариант еще одно действие, которое уведомит пользователей о наличии нового файла на сайте SharePoint.
   - Добавьте другой вариант на случай, если пользователь выберет `Reject`.
     - Если поступит отклонение, другим утверждающим отправляется уведомление по электронной почте о том, что файл отклоняется и никаких дальнейших действий не требуется.
   - `SelectedOptions` предоставляет только два варианта, поэтому вариант **По умолчанию** можно оставить пустым.

   ![Оператор switch](./media/logic-apps-switch-case/switch.jpg)

   > [!NOTE]
   > В операторе switch должен быть создан по меньшей мере один вариант (Case), помимо варианта по умолчанию.

4. После выполнения оператора switch следует удалить исходный файл, загруженный в Dropbox, с помощью действия **Dropbox – Delete file** (Dropbox — удалить файл).

5. Сохраните приложение логики. Тестирование приложения путем загрузки файла в Dropbox. Вскоре должно прийти сообщение электронной почты утверждения. Выберите параметр и понаблюдайте за поведением.

   > [!TIP]
   > Узнайте о возможностях [мониторинга приложений логики](logic-apps-monitor-your-logic-apps.md).

## <a name="understand-the-code-behind-switch-statements"></a>Смысл программного кода оператора switch

Теперь, когда приложение логики создано с помощью оператора switch, можно рассмотреть определение программного кода оператора switch.

```json
"Switch": {
    "type": "Switch",
    "expression": "@body('Send_approval_email')?['SelectedOption']",
    "cases": {
        "Case 1" : {
            "case" : "Approved",
            "actions" : {}
        },
        "Case 2" : {
            "case" : "Rejected",
            "actions" : {}
        }
    },
    "default": {
        "actions": {}
    },
    "runAfter": {
        "Send_approval_email": [
            "Succeeded"
        ]
    }
}
```

* `"Switch"` — это имя оператора switch, которое можно изменить для большей удобочитаемости. 
* `"type": "Switch"` обозначает, что конструкция является оператором switch. 
* `"expression"` указывает на вариант, выбранный подтверждающим лицом, который здесь сравнивается с указанными далее в определении вариантами значений. 
* `"cases"` может содержать любое число вариантов. Для каждого варианта `"Case *"` является именем по умолчанию, которое можно изменить для большей удобочитаемости. 
`"case"` является меткой значения case, которое выражение switch использует для сравнения. Это значение должно быть постоянным и уникальным. Если ни один из вариантов не соответствует оператору switch, действия в `"default"` выполняются.

## <a name="get-help"></a>Получение справки

Чтобы задать вопросы, помочь другим пользователям и узнать, что делают другие пользователи, посетите [форум по Azure Logic Apps](https://social.msdn.microsoft.com/Forums/en-US/home?forum=azurelogicapps).

Чтобы улучшить Azure Logic Apps и соединители, голосуйте за идеи или предлагайте собственные на [сайте обратной связи Azure Logic Apps](http://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дальнейшие действия

- Инструкции по [добавлению условий](logic-apps-use-logic-app-features.md)
- Узнайте, как [обрабатываются ошибки и исключения в Logic Apps](logic-apps-exception-handling.md).
- Ознакомьтесь с [возможностями языка для описания рабочих процессов](logic-apps-author-definitions.md).