---
title: "шлюз данных в локальной aaaInstall - приложения логики Azure | Документы Microsoft"
description: "Получить доступ к источникам данных на локальном компьютере, установка hello локального шлюза данных для передачи данных для быстрого и шифрования между источниками данных на локальном компьютере и логика приложения"
keywords: "доступ к данным, локальный, передача данных, шифрование, источники данных"
services: logic-apps
documentationcenter: 
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 47e3024e-88a0-4017-8484-8f392faec89d
ms.service: logic-apps
ms.devlang: 
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.date: 07/13/2017
ms.author: LADocs; dimazaid; estfan
ms.openlocfilehash: 01386a904d856ff545f2eca8eb1b008dcdc08574
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="install-hello-on-premises-data-gateway-for-azure-logic-apps"></a>Установить шлюз данных hello локальными для приложения логики Azure

Свои приложения логики можно получить доступ к источникам данных на локальном компьютере, необходимо установить и настроить hello локальный шлюз данных. Hello шлюза действует как мост, который обеспечивает передачу данных быстрого и шифрование между локальными системами и логику приложения. шлюз Hello передает данные из локальных источников шифрованные каналы через hello Azure Service Bus. Весь трафик поступает как безопасный исходящий трафик от агента hello шлюза. Дополнительные сведения о [как работает шлюз данных hello](#gateway-cloud-service).

Hello шлюз поддерживает источники данных toothese подключений на локальном компьютере:

*   BizTalk Server 2016
*   DB2  
*   Файловая система
*   Informix
*   Магический квадрант
*   MySQL
*   База данных Oracle
*   PostgreSQL
*   сервер приложений SAP; 
*   сервер сообщений SAP;
*   SharePoint
*   SQL Server
*   Teradata

Следующие шаги показывают, как hello toofirst установки локального шлюза данных, прежде чем [настроить подключение между шлюзом hello и приложениях для логики](./logic-apps-gateway-connection.md). Дополнительные сведения о поддерживаемых соединителях см. статье [Список соединителей](https://docs.microsoft.com/azure/connectors/apis-list). 

Сведения о том, как toouse hello шлюза с другими службами см. в следующих статьях:

*   [Локальный шлюз данных](https://powerbi.microsoft.com/documentation/powerbi-gateway-onprem/)
*   [Локальный шлюз данных](../analysis-services/analysis-services-gateway.md)
*   [Управление локальным шлюзом данных в Microsoft Flow](https://flow.microsoft.com/documentation/gateway-manage/)
*   [Управление локальным шлюзом данных в PowerApps](https://powerapps.microsoft.com/tutorials/gateway-management/)

<a name="requirements"></a>
## <a name="requirements"></a>Требования

**Минимальные**:

* .NET Framework 4.5;
* 64-разрядная версия Windows 7 или Windows Server 2008 R2 (или более поздняя версия).

**Рекомендуемые**:

* 8-ядерный ЦП;
* 8 ГБ ОЗУ;
* 64-разрядная версия Windows 2012 R2 (или более поздняя версия).

**Важные сведения**:

* Установите hello локального шлюза данных только на локальном компьютере.
Hello шлюза нельзя установить на контроллере домена.

   > [!TIP]
   > Нет шлюза hello tooinstall на hello же компьютере, что источник данных. Задержка toominimize шлюз можно установить hello закрытия от возможных tooyour источника данных или hello же компьютере, при условии, что имеются разрешения.

* Не устанавливайте hello шлюза на компьютере, который отключает, становится toosleep или не подключиться toohello Интернета, так как шлюз hello не может работать в этих условиях. Кроме того, может наблюдаться снижение производительности шлюза при использовании беспроводной сети.

* Во время установки необходимо войти с помощью [рабочей или учебной учетной записи](https://docs.microsoft.com/azure/active-directory/sign-up-organization), управляемой Azure Active Directory, а не учетной записи Майкрософт. 

  У вас есть toouse hello та же самая или учебы позже в hello Azure учетная запись портала при создании и связать ресурс шлюза в установку шлюза. Затем выберите этот ресурс шлюза, при создании подключения hello между логику приложения и hello локального источника данных. [Почему необходимо использовать рабочую или учебную учетную запись Azure AD?](#why-azure-work-school-account)

  > [!TIP]
  > Если вы зарегистрировались для использования предложения Office 365 и не предоставили действительный рабочий электронный адрес, то ваш адрес входа может выглядеть так: jeff@contoso.onmicrosoft.com. 

* При наличии существующего шлюза, который настраивается с установщиком, более ранняя, чем версия 14.16.6317.4 Невозможно изменить расположение шлюза установщиком выполняющегося hello последней. Тем не менее можно использовать tooset последнюю установщика hello копирование новый шлюз с расположением hello, необходимо вместо этого.
  
  Если установщик шлюза, более ранняя, чем версия 14.16.6317.4, но еще не установили шлюз еще, можно загрузить и использовать последние установщика hello.

<a name="install-gateway"></a>

## <a name="install-hello-data-gateway"></a>Установить шлюз данных hello

1.  [Загрузите и запустите установщик шлюза hello на локальном компьютере](http://go.microsoft.com/fwlink/?LinkID=820931&clcid=0x409).

2. Просмотрите и примите условия использования и заявление о конфиденциальности hello.

3. Укажите путь к hello на локальном компьютере место tooinstall hello шлюза.

4. При появлении запроса войдите в Azure с рабочей или учебной учетной записью (но не с учетной записью Майкрософт).

   ![Войдите с помощью рабочей или учебной учетной записи Azure и](./media/logic-apps-gateway-install/sign-in-gateway-install.png)

5. Зарегистрировать установленный шлюз с hello [облачной службе шлюза](#gateway-cloud-service). Выберите **Регистрация нового шлюза на этом компьютере**.

   облачной службе шлюза Hello шифрует и сохраняет учетные данные источника данных и сведения о шлюзе. 
   Служба Hello также выполняет запросы и их результаты между логику приложения hello локального шлюза данных и источника данных на локальном компьютере.

6. Укажите имя установленного шлюза. Создайте ключ восстановления, а затем подтвердите его. 

   > [!IMPORTANT] 
   > Ключ восстановления должен содержать по крайней мере 8 знаков. Убедитесь в том, сохранить и hello ключ должен оставаться в надежном месте. Также этот ключ требуется при необходимости toomigrate, восстановление или перенос существующего шлюза.

   1. Выберите регион по умолчанию hello toochange для облачной службы шлюза hello и используемые установку шлюза Azure Service Bus **Смена региона**.

      ![Изменение региона](./media/logic-apps-gateway-install/change-region-gateway-install.png)

      область по умолчанию Hello — hello регион, связанный с клиентом Azure AD.

   2. На следующей панели hello, откройте hello **Выбор региона** слишком выбрать другой регион.

      ![Выберите другой регион](./media/logic-apps-gateway-install/select-region-gateway-install.png)

      Например, вы может выбрать hello же регионе, что логика приложения или выберите hello области ближайший tooyour локальных данных источника, можно снизить задержку. Ресурс шлюза и приложение логики могут размещаться в разных расположениях.

      > [!IMPORTANT]
      > После установки изменить выбранный регион будет невозможно. Эта область также определяет и ограничивает hello расположение, где можно создать hello ресурсов Azure для шлюза. Поэтому при создании ресурса шлюза в Azure убедитесь, расположение ресурса hello соответствует hello регион, выбранный во время установки шлюза.
      > 
      > Если требуется toouse другой регион для шлюза позже, необходимо настроить новый шлюз.

   3. Когда вы будете готовы, нажмите кнопку **Готово**.

7. Теперь выполните следующие действия в hello портал Azure, вы можете [создать ресурс Azure для шлюза](../logic-apps/logic-apps-gateway-connection.md). 

Дополнительные сведения о [как работает шлюз данных hello](#gateway-cloud-service).

## <a name="migrate-restore-or-take-over-an-existing-gateway"></a>Перенос, восстановление или перехват существующего шлюза

tooperform этих задач, необходимо иметь hello ключ восстановления, который был указан при установке шлюза hello.

1. В меню "Пуск" компьютера выберите **Локальный шлюз данных**.

2. После hello Откроется установщик вход с помощью hello же Azure работать или рабочую учетную запись, которая была ранее используется tooinstall hello шлюза.

3. Выберите **Migrate, restore, or take over an existing gateway** (Перенос, восстановление или перехват имеющегося шлюза).

4. Укажите hello имя и ключ восстановления для hello шлюза, который требуется к toomigrate, восстановление или получение.

<a name="restart-gateway"></a>
## <a name="restart-hello-gateway"></a>Перезапустите шлюз hello

Hello шлюз работает как служба Windows. Как любую другую службу Windows можно запустить и остановить службу hello, различными способами. Например можно откройте командную строку с повышенными разрешениями на компьютере hello, где запущен шлюз hello и выполнения любой из этих команд:

* toostop служба hello, выполните следующую команду:
  
    `net stop PBIEgwService`

* toostart служба hello, выполните следующую команду:
  
    `net start PBIEgwService`

### <a name="windows-service-account"></a>Учетная запись службы Windows

Hello локальный шлюз данных настроен toouse `NT SERVICE\PBIEgwService` учетные данные для входа службы hello Windows. По умолчанию hello шлюза имеет права «Вход в качестве службы» hello машины hello где установить шлюз hello.

> [!NOTE]
> Учетная запись службы Windows Hello отличается от hello учетная запись, используемая для подключения tooon локальные источники данных и от hello Azure на работе или рабочую учетную запись использовать toosign в toocloud служб.

## <a name="configure-a-firewall-or-proxy"></a>Настройка брандмауэра или прокси-сервера

Hello шлюз создает исходящее подключение слишком [Azure Service Bus](https://azure.microsoft.com/services/service-bus/). см. сведения о прокси tooprovide для шлюза, [настроить параметры прокси-сервера](https://powerbi.microsoft.com/documentation/powerbi-gateway-proxy/).

toocheck ли брандмауэр или прокси-сервера, могут блокировать подключения, подтвердить фактически подключения компьютера toohello Интернет» и «hello [Azure Service Bus](https://azure.microsoft.com/services/service-bus/). В командной строке PowerShell выполните следующую команду.

`Test-NetConnection -ComputerName watchdog.servicebus.windows.net -Port 9350`

> [!NOTE]
> Эта команда проверяет только подключения к сети и подключения к toohello Azure Service Bus. Поэтому команда hello не имеет ничего общего toodo со шлюзом hello или облачной службе hello шлюза, который шифрует и сохраняет учетные данные и сведения о шлюзе. 
>
> Кроме того, эта команда используется только в Windows Server 2012 R2 или более поздней версии и Windows 8.1 или более поздней версии. В более ранних версиях операционной системы, можно использовать Telnet слишком Проверка подключения. Узнайте больше о [служебной шине Azure и гибридных решениях](../service-bus-messaging/service-bus-fundamentals-hybrid-solutions.md).

Результаты должен выглядеть примерно toothis пример:

```text
ComputerName           : watchdog.servicebus.windows.net
RemoteAddress          : 70.37.104.240
RemotePort             : 5672
InterfaceAlias         : vEthernet (Broadcom NetXtreme Gigabit Ethernet - Virtual Switch)
SourceAddress          : 10.120.60.105
PingSucceeded          : False
PingReplyDetails (RTT) : 0 ms
TcpTestSucceeded       : True
```

Если **TcpTestSucceeded** не задано слишком**True**, вам может быть заблокирован брандмауэром. Toobe комплексный, замените hello **ComputerName** и **порт** значения со значениями hello в списке [настроить порты](#configure-ports) в этом разделе.

брандмауэр Hello также блокируют подключения, hello Azure Service Bus не делает toohello центрами обработки данных Azure. Если это происходит, утверждение (разблокировать) все hello IP-адресов для этих центрах обработки данных в вашем регионе. Для этих IP-адресов [get hello Azure список IP-адресов здесь](https://www.microsoft.com/download/details.aspx?id=41653).

## <a name="configure-ports"></a>Настройка портов

Hello шлюз создает исходящее подключение слишком[Azure Service Bus](https://azure.microsoft.com/services/service-bus/) и осуществляет связь через исходящие порты: TCP-порт 443 (по умолчанию), 5671, 5672, 9350 до 9354. шлюз Hello не требуются входящие порты. Узнайте больше о [служебной шине Azure и гибридных решениях](../service-bus-messaging/service-bus-fundamentals-hybrid-solutions.md).

| ДОМЕННЫЕ ИМЕНА | ИСХОДЯЩИЕ ПОРТЫ | ОПИСАНИЕ |
| --- | --- | --- |
| *.analysis.windows.net | 443 | HTTPS | 
| *.login.windows.net | 443 | HTTPS | 
| *.servicebus.windows.net | 5671–5672 | Протокол AMQP | 
| *.servicebus.windows.net | 443, 9350–9354 | Прослушиватели ретрансляции служебной шины по протоколу TCP (порт 443 требуется для получения маркера контроля доступа). | 
| *.frontend.clouddatahub.net | 443 | HTTPS | 
| *.core.windows.net | 443 | HTTPS | 
| login.microsoftonline.com | 443 | HTTPS | 
| *.msftncsi.com | 443 | Подключение к Интернету tootest используется в том случае, когда hello шлюз недоступен для hello службы Power BI. | 

Если вместо hello tooapprove IP-адресов, можно загрузить и использовать hello [Microsoft Azure Datacenter диапазоны IP-список](https://www.microsoft.com/download/details.aspx?id=41653). В некоторых случаях hello Azure Service Bus подключения с IP-адреса вместо полных доменных имен.

<a name="gateway-cloud-service"></a>
## <a name="how-does-hello-data-gateway-work"></a>Как работает hello шлюз данных?

шлюз данных Hello упрощающую быстрый и безопасный обмен данными между логики приложения, облачной службе шлюза hello и источника данных в локальной среде. 

![diagram-for-on-premises-data-gateway-flow](./media/logic-apps-gateway-install/how-on-premises-data-gateway-works-flow-diagram.png)

Поэтому при hello пользователя в облаке hello взаимодействует с элементом, подключенный tooyour локального источника данных:

1. облачной службе шлюза Hello создает запрос, а также hello зашифрованные учетные данные для источника данных hello и отправляет очереди toohello hello запросов для шлюза tooprocess hello.

2. облачной службе шлюза Hello анализирует запрос hello и помещает toohello запрос hello Azure Service Bus.

3. Hello локальный шлюз данных опрашивает hello Azure Service Bus для ожидающих запросов.

4. Hello шлюз получает запрос hello, расшифровывает учетные данные hello и подключается toohello источника данных с этими учетными данными.

5. шлюз Hello отправляет источник данных toohello hello запросов для выполнения.

6. Hello результаты отправляются из источника данных hello, задней toohello шлюза и облачной службе шлюза toohello. Hello облачной службе шлюза затем использует результаты hello.

<a name="faq"></a>
## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

### <a name="general"></a>Общие сведения

**Q**: требуется использовать шлюз для источников данных в облаке hello, такие как SQL Azure? <br/>
**Ответ**. Нет. Шлюз соединяет локальные tooon только источники данных.

**Q**: hello шлюза имеет toobe установлен на компьютер же, как источник данных hello hello? <br/>
**Ответ**. Нет. toohello источника данных, используя сведения о соединении hello, предоставленный подключение шлюза Hello. Рассмотрим hello шлюза как клиентское приложение в этом смысле. шлюз Hello достаточно hello возможность tooconnect toohello имя сервера, предоставленный.

<a name="why-azure-work-school-account"></a>

**Q**: Почему необходимо ли использовать Azure рабочие или школьные toosign учетной записи в? <br/>
**Объект**: только можно использовать Azure на работе или рабочую учетную запись при установке hello локальный шлюз данных. Учетная запись для входа хранится в клиенте, которым управляет Azure Active Directory (Azure AD). Как правило учетной записи Azure AD имя участника-пользователя (UPN) соответствует адресу электронной почты hello.

**Вопрос**. Где хранятся мои учетные данные? <br/>
**Объект**: зашифрованы и хранятся в облачной службе шлюза hello hello учетные данные, введенные для источника данных. Hello они расшифровываются hello локальный шлюз данных.

**Вопрос**. Есть ли какие-либо требования к пропускной способности сети? <br/>
**Ответ**. Пропускная способность сети должна быть высокой. Каждая среда имеет свои и hello объем отправляемых данных влияет на результаты hello. С помощью ExpressRoute может помочь tooguarantee определенную пропускную способность между локальной и hello центрами обработки данных Azure.
Можно использовать пропускную способность hello стороннего средства Azure скорость тестирования приложения toohelp датчика.

**Q**: что такое hello задержку для выполнения запросов источника данных tooa из шлюза hello? Что такое hello оптимальная архитектура? <br/>
**Объект**: tooreduce задержку в сети и установить шлюз hello закрыть toohello источник данных как можно. При установке шлюза hello hello фактические данные источника этого выражения с учетом сводит к минимуму задержки hello, введенной. Рассмотрим слишком hello центрах обработки данных. Например если служба использует hello Запад США центра обработки данных и сервер SQL Server, размещенных на виртуальной Машине Azure, ВМ Azure должны находиться в hello Запад США слишком. Это выражение с учетом сводит к минимуму задержки и позволяет избежать расходов на исходящие данные на виртуальной Машине Azure hello.

**Q**: как являются облачной серверной toohello набор результатов? <br/>
**Объект**: результаты отправляются через hello Azure Service Bus.

**Q**: существуют шлюза toohello все входящие подключения из облака hello? <br/>
**Ответ**. Нет. шлюз Hello использует tooAzure исходящие подключения Service Bus.

**Вопрос**. Что делать, если мной заблокированы исходящие подключения? Что делать мне tooopen? <br/>
**Объект**: hello порты и узлы, которые использует шлюз hello. в разделе.

**Q**: как называется соответствующая служба Windows hello?<br/>
**Объект**: В службах, hello шлюз указан под именем Power BI Enterprise Gateway Service.

**Q**: можно запускать с учетной записью Azure Active Directory служба Windows шлюза "hello"? <br/>
**Ответ**. Нет. Служба Windows Hello должен иметь допустимую учетную запись Windows. По умолчанию hello служба запускается с hello SID службы NT SERVICE\PBIEgwService.

### <a name="high-availability-and-disaster-recovery"></a>Высокий уровень доступности и аварийное восстановление

**Вопрос**. Какие варианты доступны для аварийного восстановления? <br/>
**Объект**: можно использовать toorestore ключа восстановления hello или переноса шлюза. При установке шлюза hello, укажите ключ восстановления hello.

**Q**: что такое преимущество hello hello ключ восстановления? <br/>
**Объект**: hello ключ восстановления предоставляет toomigrate способом или восстановить параметры шлюза после сбоя.

**Q**: планируется ли для включения сценарии высокой доступности с hello шлюза? <br/>
**Объект**: эти сценарии расположены на стратегия hello, но мы временная шкала еще нет.

## <a name="troubleshooting"></a>Устранение неполадок

[!INCLUDE [existing-gateway-location-changed](../../includes/logic-apps-existing-gateway-location-changed.md)]

**Q**: как я могу узнать, какие запросы отправляются toohello к локальному источнику данных? <br/>
**Объект**: можно включить трассировку запроса, включая hello запросы, отправленные. Не забывайте toochange запроса отслеживания в обратном toohello исходное значение после завершения устранения неполадок. При включенной трассировке запросов создаются журналы большего размера.

Кроме того, можно рассмотреть инструменты трассировки запросов, доступные для вашего источника данных. Например, можно использовать расширенные события или SQL Profiler для SQL Server и служб Analysis Services.

**Q**: где находятся журналы шлюза hello? <br/>
**Ответ**. См. раздел "Средства" далее в этой статье.

### <a name="update-toohello-latest-version"></a>Последнюю версию обновления toohello

Многие проблемы могут возникать при устаревшей версии шлюза hello. В качестве общих рекомендаций убедитесь, что используется последняя версия hello. Hello шлюз не обновлялся в течение месяца или более, может рекомендуется установить последнюю версию шлюза hello hello и разделе, если можно воспроизвести проблему hello.

### <a name="error-failed-tooadd-user-toogroup--2147463168-pbiegwservice-performance-log-users"></a>: Ошибка toogroup tooadd пользователя. (-2147463168 PBIEgwService Performance Log Users ) (-2147463168 пользователей журналов производительности PBIEgwService)

Эту ошибку можно получить, если при попытке tooinstall hello шлюз на контроллере домена, который не поддерживается. Убедитесь, что развертывании hello шлюза на компьютере, который не контроллер домена.

## <a name="tools"></a>Средства

### <a name="collect-logs-from-hello-gateway-configurer"></a>Собирать журналы из шлюза configurer hello

Вы можете собрать несколько журналов для шлюза hello. Всегда начинайте с журналами hello.

#### <a name="installer-logs"></a>Журналы установщика

`%localappdata%\Temp\Power_BI_Gateway_–Enterprise.log`

#### <a name="configuration-logs"></a>Журналы конфигурации

`%localappdata%\Microsoft\Power BI Enterprise Gateway\GatewayConfigurator.log`

#### <a name="enterprise-gateway-service-logs"></a>Журналы службы корпоративного шлюза

`C:\Users\PBIEgwService\AppData\Local\Microsoft\Power BI Enterprise Gateway\EnterpriseGateway.log`

#### <a name="event-logs"></a>Журналы событий

Найти hello журналы шлюза управления данными и PowerBIGateway **журналы приложений и служб**.

### <a name="fiddler-trace"></a>Трассировки Fiddler

[Fiddler](http://www.telerik.com/fiddler) — это бесплатный инструмент от компании Telerik, который отслеживает трафик HTTP. Вы увидите этот трафик с hello службы Power BI из hello клиентского компьютера. Эта служба позволит выявить ошибки и другие сопутствующие сведения.

## <a name="next-steps"></a>Дальнейшие действия
    
* [Подключение tooon локальные данные из приложения логики](../logic-apps/logic-apps-gateway-connection.md)
* [Возможности интеграции Enterprise](../logic-apps/logic-apps-enterprise-integration-overview.md)
* [Список соединителей](../connectors/apis-list.md)
