---
title: "aaaCreate шаблоны развертывания для приложения логики Azure | Документы Microsoft"
description: "Узнайте, как создавать шаблоны Azure Resource Manager для развертывания приложений логики и управлять выпусками."
services: logic-apps
documentationcenter: .net,nodejs,java
author: jeffhollan
manager: anneta
editor: 
ms.assetid: 85928ec6-d7cb-488e-926e-2e5db89508ee
ms.service: logic-apps
ms.devlang: multiple
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: integration
ms.custom: H1Hack27Feb2017
ms.date: 10/18/2016
ms.author: LADocs; jehollan
ms.openlocfilehash: 2f09445f10a376a745d6acbba94ca29d5f79fc09
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="create-templates-for-logic-apps-deployment-and-release-management"></a><span data-ttu-id="28557-103">Создание шаблонов для развертывания приложений логики и управления выпусками</span><span class="sxs-lookup"><span data-stu-id="28557-103">Create templates for logic apps deployment and release management</span></span>

<span data-ttu-id="28557-104">После создания приложения логики, может потребоваться toocreate ее в качестве шаблона диспетчера ресурсов Azure.</span><span class="sxs-lookup"><span data-stu-id="28557-104">After a logic app has been created, you might want toocreate it as an Azure Resource Manager template.</span></span>
<span data-ttu-id="28557-105">Таким образом, можно легко развернуть среды tooany hello логику приложения или группы ресурсов, где он может понадобиться.</span><span class="sxs-lookup"><span data-stu-id="28557-105">This way, you can easily deploy hello logic app tooany environment or resource group where you might need it.</span></span>
<span data-ttu-id="28557-106">Дополнительные сведения о шаблонах Resource Manager см. в статьях [Создание шаблонов диспетчера ресурсов Azure](../azure-resource-manager/resource-group-authoring-templates.md) и [Развертывание ресурсов с использованием шаблонов Resource Manager и Azure PowerShell](../azure-resource-manager/resource-group-template-deploy.md).</span><span class="sxs-lookup"><span data-stu-id="28557-106">For more about Resource Manager templates, see [authoring Azure Resource Manager templates](../azure-resource-manager/resource-group-authoring-templates.md) and [deploying resources by using Azure Resource Manager templates](../azure-resource-manager/resource-group-template-deploy.md).</span></span>

## <a name="logic-app-deployment-template"></a><span data-ttu-id="28557-107">Шаблон развертывания приложения логики</span><span class="sxs-lookup"><span data-stu-id="28557-107">Logic app deployment template</span></span>

<span data-ttu-id="28557-108">Приложение логики состоит из трех основных компонентов:</span><span class="sxs-lookup"><span data-stu-id="28557-108">A logic app has three basic components:</span></span>

* <span data-ttu-id="28557-109">**Ресурсов приложения логики**: содержит сведения о таких вещей, как ценовой план, расположение и hello определения рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="28557-109">**Logic app resource**: Contains information about things like pricing plan, location, and hello workflow definition.</span></span>
* <span data-ttu-id="28557-110">**Определение рабочего процесса**: описание действия рабочего процесса приложения логики и как механизм логики приложения hello должна выполняться hello рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="28557-110">**Workflow definition**: Describes your logic app's workflow steps and how hello Logic Apps engine should execute hello workflow.</span></span>
<span data-ttu-id="28557-111">Это определение можно просмотреть в окне **Представление кода** приложения логики.</span><span class="sxs-lookup"><span data-stu-id="28557-111">You can view this definition in your logic app's **Code View** window.</span></span>
<span data-ttu-id="28557-112">В ресурсе приложения hello логики, можно найти это определение в hello `definition` свойство.</span><span class="sxs-lookup"><span data-stu-id="28557-112">In hello logic app resource, you can find this definition in hello `definition` property.</span></span>
* <span data-ttu-id="28557-113">**Подключения**: ссылается tooseparate ресурсы, которые безопасно хранить метаданные любого подключения соединитель, такие как строка подключения и маркер доступа.</span><span class="sxs-lookup"><span data-stu-id="28557-113">**Connections**: Refers tooseparate resources that securely store metadata about any connector connections, such as a connection string and an access token.</span></span>
<span data-ttu-id="28557-114">В ресурсе приложения hello логику, логику приложения ссылается на эти ресурсы в hello `parameters` раздела.</span><span class="sxs-lookup"><span data-stu-id="28557-114">In hello logic app resource, your logic app references these resources in hello `parameters` section.</span></span>

<span data-ttu-id="28557-115">Вы можете просмотреть все эти компоненты имеющихся приложений логики с помощью таких инструментов, как [обозреватель ресурсов Azure](http://resources.azure.com).</span><span class="sxs-lookup"><span data-stu-id="28557-115">You can view all these pieces of existing logic apps by using a tool like [Azure Resource Explorer](http://resources.azure.com).</span></span>

<span data-ttu-id="28557-116">toomake шаблон для логики приложения toouse с развертывания группы ресурсов, необходимо определить ресурсы hello и параметризовать при необходимости.</span><span class="sxs-lookup"><span data-stu-id="28557-116">toomake a template for a logic app toouse with resource group deployments, you must define hello resources and parameterize as needed.</span></span>
<span data-ttu-id="28557-117">Например при развертывании tooa разработку, тестирование и рабочей среде, скорее всего нужно toouse строки другое подключение tooa базы данных SQL в каждой среде.</span><span class="sxs-lookup"><span data-stu-id="28557-117">For example, if you're deploying tooa development, test, and production environment, you likely want toouse different connection strings tooa SQL database in each environment.</span></span>
<span data-ttu-id="28557-118">Или можно разместить toodeploy в разных подписок или групп ресурсов.</span><span class="sxs-lookup"><span data-stu-id="28557-118">Or, you might want toodeploy within different subscriptions or resource groups.</span></span>  

## <a name="create-a-logic-app-deployment-template"></a><span data-ttu-id="28557-119">Создание шаблона развертывания приложения логики</span><span class="sxs-lookup"><span data-stu-id="28557-119">Create a logic app deployment template</span></span>

<span data-ttu-id="28557-120">toohave простым способом Hello шаблон развертывания допустимым логику приложения является toouse [средств Visual Studio для приложения логики](logic-apps-deploy-from-vs.md).</span><span class="sxs-lookup"><span data-stu-id="28557-120">hello easiest way toohave a valid logic app deployment template is toouse the [Visual Studio Tools for Logic Apps](logic-apps-deploy-from-vs.md).</span></span>
<span data-ttu-id="28557-121">средства Visual Studio Hello создавать шаблон допустимым развертывания, который может использоваться в любой подписки или расположение.</span><span class="sxs-lookup"><span data-stu-id="28557-121">hello Visual Studio tools generate a valid deployment template that can be used across any subscription or location.</span></span>

<span data-ttu-id="28557-122">При создании шаблона для развертывания приложения логики могут быть полезными и некоторые другие инструменты.</span><span class="sxs-lookup"><span data-stu-id="28557-122">A few other tools can assist you as you create a logic app deployment template.</span></span>
<span data-ttu-id="28557-123">Можно создавать вручную, то есть с помощью hello ресурсы уже описанные здесь параметры toocreate при необходимости.</span><span class="sxs-lookup"><span data-stu-id="28557-123">You can author by hand, that is, by using hello resources already discussed here toocreate parameters as needed.</span></span>
<span data-ttu-id="28557-124">Другой вариант — toouse [создатель шаблон приложения логики](https://github.com/jeffhollan/LogicAppTemplateCreator) модуля PowerShell.</span><span class="sxs-lookup"><span data-stu-id="28557-124">Another option is toouse a [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator) PowerShell module.</span></span> <span data-ttu-id="28557-125">Этот модуль с открытым исходным кодом сначала вычисляет hello логики приложения, а также любые соединения, он использует и создает ресурсов шаблона с hello необходимые параметры для развертывания.</span><span class="sxs-lookup"><span data-stu-id="28557-125">This open-source module first evaluates hello logic app and any connections that it is using, and then generates template resources with hello necessary parameters for deployment.</span></span>
<span data-ttu-id="28557-126">Например если у вас есть приложение логики, которая получает сообщение из очереди Azure Service Bus и добавляет базы данных Azure SQL tooan данных, средство hello сохраняет всю логику orchestration hello и параметризует hello SQL и строки подключения служебной шины, чтобы их можно задать во время развертывания.</span><span class="sxs-lookup"><span data-stu-id="28557-126">For example, if you have a logic app that receives a message from an Azure Service Bus queue and adds data tooan Azure SQL database, hello tool preserves all hello orchestration logic and parameterizes hello SQL and Service Bus connection strings so that they can be set at deployment.</span></span>

> [!NOTE]
> <span data-ttu-id="28557-127">Подключения должны быть в пределах hello же группе ресурсов приложения логики hello.</span><span class="sxs-lookup"><span data-stu-id="28557-127">Connections must be within hello same resource group as hello logic app.</span></span>
>
>

### <a name="install-hello-logic-app-template-powershell-module"></a><span data-ttu-id="28557-128">Установка модуля PowerShell шаблон приложения логики hello</span><span class="sxs-lookup"><span data-stu-id="28557-128">Install hello logic app template PowerShell module</span></span>
<span data-ttu-id="28557-129">Hello простым способом tooinstall hello модуль — это via hello [коллекции PowerShell](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), с помощью команды hello `Install-Module -Name LogicAppTemplate`.</span><span class="sxs-lookup"><span data-stu-id="28557-129">hello easiest way tooinstall hello module is via hello [PowerShell Gallery](https://www.powershellgallery.com/packages/LogicAppTemplate/0.1), by using hello command `Install-Module -Name LogicAppTemplate`.</span></span>  

<span data-ttu-id="28557-130">Также можно установить модуль PowerShell hello вручную:</span><span class="sxs-lookup"><span data-stu-id="28557-130">You also can install hello PowerShell module manually:</span></span>

1. <span data-ttu-id="28557-131">Загрузить последний выпуск hello hello [создатель шаблон приложения логики](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span><span class="sxs-lookup"><span data-stu-id="28557-131">Download hello latest release of hello [logic app template creator](https://github.com/jeffhollan/LogicAppTemplateCreator/releases).</span></span>  
2. <span data-ttu-id="28557-132">Извлеките hello папки в папку модуля PowerShell (обычно `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span><span class="sxs-lookup"><span data-stu-id="28557-132">Extract hello folder in your PowerShell module folder (usually `%UserProfile%\Documents\WindowsPowerShell\Modules`).</span></span>

<span data-ttu-id="28557-133">Для toowork модуля hello любого клиента и подписки доступ токена, мы рекомендуем использовать с hello [ARMClient](https://github.com/projectkudu/ARMClient) средство командной строки.</span><span class="sxs-lookup"><span data-stu-id="28557-133">For hello module toowork with any tenant and subscription access token, we recommend that you use it with hello [ARMClient](https://github.com/projectkudu/ARMClient) command-line tool.</span></span>  <span data-ttu-id="28557-134">В этой [записи блога](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) программа ARMClient рассматривается подробней.</span><span class="sxs-lookup"><span data-stu-id="28557-134">This [blog post](http://blog.davidebbo.com/2015/01/azure-resource-manager-client.html) discusses ARMClient in more detail.</span></span>

### <a name="generate-a-logic-app-template-by-using-powershell"></a><span data-ttu-id="28557-135">Создание шаблона приложения логики с помощью PowerShell</span><span class="sxs-lookup"><span data-stu-id="28557-135">Generate a logic app template by using PowerShell</span></span>
<span data-ttu-id="28557-136">После установки PowerShell, можно создать шаблон с помощью hello следующую команду:</span><span class="sxs-lookup"><span data-stu-id="28557-136">After PowerShell is installed, you can generate a template by using hello following command:</span></span>

`armclient token $SubscriptionId | Get-LogicAppTemplate -LogicApp MyApp -ResourceGroup MyRG -SubscriptionId $SubscriptionId -Verbose | Out-File C:\template.json`

<span data-ttu-id="28557-137">`$SubscriptionId`— идентификатор подписки Azure hello.</span><span class="sxs-lookup"><span data-stu-id="28557-137">`$SubscriptionId` is hello Azure subscription ID.</span></span> <span data-ttu-id="28557-138">Эту строку сначала получает доступ маркера через ARMClient, а затем передает его через toohello сценарий PowerShell и создает hello шаблона в JSON-файла.</span><span class="sxs-lookup"><span data-stu-id="28557-138">This line first gets an access token via ARMClient, then pipes it through toohello PowerShell script, and then creates hello template in a JSON file.</span></span>

## <a name="add-parameters-tooa-logic-app-template"></a><span data-ttu-id="28557-139">Добавить шаблон приложения логики tooa параметров</span><span class="sxs-lookup"><span data-stu-id="28557-139">Add parameters tooa logic app template</span></span>
<span data-ttu-id="28557-140">После создания шаблона логики приложения, можно продолжить tooadd или изменить параметры, которые могут потребоваться.</span><span class="sxs-lookup"><span data-stu-id="28557-140">After you create your logic app template, you can continue tooadd or modify parameters that you might need.</span></span> <span data-ttu-id="28557-141">Например если определение включает tooan идентификатор ресурса Azure функцию или вложенный рабочий процесс планирования toodeploy в одно развертывание, можно добавить дополнительные ресурсы tooyour шаблон и параметризовать идентификаторов, при необходимости.</span><span class="sxs-lookup"><span data-stu-id="28557-141">For example, if your definition includes a resource ID tooan Azure function or nested workflow that you plan toodeploy in a single deployment, you can add more resources tooyour template and parameterize IDs as needed.</span></span> <span data-ttu-id="28557-142">Hello применимо и к tooany ссылки toocustom API-интерфейсы Swagger конечных точек или предполагается, что toodeploy с каждой группой ресурсов.</span><span class="sxs-lookup"><span data-stu-id="28557-142">hello same applies tooany references toocustom APIs or Swagger endpoints you expect toodeploy with each resource group.</span></span>

## <a name="deploy-a-logic-app-template"></a><span data-ttu-id="28557-143">Развертывание шаблона приложения логики</span><span class="sxs-lookup"><span data-stu-id="28557-143">Deploy a logic app template</span></span>

<span data-ttu-id="28557-144">С помощью любого средства, как PowerShell, API-Интерфейс REST, можно развернуть шаблон [Visual Studio Team Services Release Management](#team-services)и шаблона-развертывания через портал Azure hello.</span><span class="sxs-lookup"><span data-stu-id="28557-144">You can deploy your template by using any tools like PowerShell, REST API, [Visual Studio Team Services Release Management](#team-services), and template deployment through hello Azure portal.</span></span>
<span data-ttu-id="28557-145">Кроме того, toostore hello значения для параметров, рекомендуется создать [файл параметров](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span><span class="sxs-lookup"><span data-stu-id="28557-145">Also, toostore hello values for parameters, we recommend that you create a [parameter file](../azure-resource-manager/resource-group-template-deploy.md#parameter-files).</span></span>
<span data-ttu-id="28557-146">Узнайте, каким образом слишком[развертывания ресурсов с помощью PowerShell и шаблоны Azure Resource Manager](../azure-resource-manager/resource-group-template-deploy.md) или [развертывания ресурсов с помощью шаблонов диспетчера ресурсов Azure и hello портал Azure](../azure-resource-manager/resource-group-template-deploy-portal.md).</span><span class="sxs-lookup"><span data-stu-id="28557-146">Learn how too[deploy resources with Azure Resource Manager templates and PowerShell](../azure-resource-manager/resource-group-template-deploy.md) or [deploy resources with Azure Resource Manager templates and hello Azure portal](../azure-resource-manager/resource-group-template-deploy-portal.md).</span></span>

### <a name="authorize-oauth-connections"></a><span data-ttu-id="28557-147">Авторизация подключений OAuth</span><span class="sxs-lookup"><span data-stu-id="28557-147">Authorize OAuth connections</span></span>

<span data-ttu-id="28557-148">После развертывания приложения hello логики работает конца в конец с допустимыми параметрами.</span><span class="sxs-lookup"><span data-stu-id="28557-148">After deployment, hello logic app works end-to-end with valid parameters.</span></span>
<span data-ttu-id="28557-149">Вы по-прежнему необходимо разрешить toogenerate подключений OAuth действительный маркер доступа.</span><span class="sxs-lookup"><span data-stu-id="28557-149">However, you must still authorize OAuth connections toogenerate a valid access token.</span></span>
<span data-ttu-id="28557-150">tooauthorize OAuth подключения, откройте приложение hello логику в конструкторе логики приложения hello и разрешить эти подключения.</span><span class="sxs-lookup"><span data-stu-id="28557-150">tooauthorize OAuth connections, open hello logic app in hello Logic Apps Designer, and authorize these connections.</span></span> <span data-ttu-id="28557-151">Или для автоматического развертывания можно использовать сценарий tooconsent tooeach OAuth подключения.</span><span class="sxs-lookup"><span data-stu-id="28557-151">Or for automated deployment, you can use a script tooconsent tooeach OAuth connection.</span></span>
<span data-ttu-id="28557-152">На GitHub есть пример сценария в проекте [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) .</span><span class="sxs-lookup"><span data-stu-id="28557-152">There's an example script on GitHub under the [LogicAppConnectionAuth](https://github.com/logicappsio/LogicAppConnectionAuth) project.</span></span>

<a name="team-services"></a>
## <a name="visual-studio-team-services-release-management"></a><span data-ttu-id="28557-153">Visual Studio Team Services Release Management</span><span class="sxs-lookup"><span data-stu-id="28557-153">Visual Studio Team Services Release Management</span></span>

<span data-ttu-id="28557-154">Общие сценарии развертывания и управления ими среды — toouse средства, подобного управления выпусками в Visual Studio Team Services с помощью шаблона развертывания логику приложения.</span><span class="sxs-lookup"><span data-stu-id="28557-154">A common scenario for deploying and managing an environment is toouse a tool like Release Management in Visual Studio Team Services, with a logic app deployment template.</span></span> <span data-ttu-id="28557-155">Visual Studio Team Services включает в себя [развертывания группы ресурсов Azure](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) задач можно добавить tooany сборки или выпуска конвейера.</span><span class="sxs-lookup"><span data-stu-id="28557-155">Visual Studio Team Services includes a [Deploy Azure Resource Group](https://github.com/Microsoft/vsts-tasks/tree/master/Tasks/DeployAzureResourceGroup) task that you can add tooany build or release pipeline.</span></span> <span data-ttu-id="28557-156">Требуется toohave [участника-службы](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) для авторизации toodeploy, а затем можно создать определение выпуска hello.</span><span class="sxs-lookup"><span data-stu-id="28557-156">You need toohave a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/) for authorization toodeploy, and then you can generate hello release definition.</span></span>

1. <span data-ttu-id="28557-157">Для создания пустого определения в Release Management выберите пункт **Пусто**.</span><span class="sxs-lookup"><span data-stu-id="28557-157">In Release Management, select **Empty** so that you create an empty definition.</span></span>

    ![Создание пустого определения][1]

2. <span data-ttu-id="28557-159">Выберите все ресурсы, необходимые для этого, скорее всего, включая hello логику приложения шаблона, созданного вручную или как часть hello процесса построения.</span><span class="sxs-lookup"><span data-stu-id="28557-159">Choose any resources you need for this, most likely including hello logic app template that is generated manually or as part of hello build process.</span></span>
3. <span data-ttu-id="28557-160">Добавьте задачу **развертывания группы ресурсов Azure** .</span><span class="sxs-lookup"><span data-stu-id="28557-160">Add an **Azure Resource Group Deployment** task.</span></span>
4. <span data-ttu-id="28557-161">Настройка с помощью [участника-службы](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/)и ссылаться на файлы шаблонов и параметров шаблона hello.</span><span class="sxs-lookup"><span data-stu-id="28557-161">Configure with a [service principal](https://blogs.msdn.microsoft.com/visualstudioalm/2015/10/04/automating-azure-resource-group-deployment-using-a-service-principal-in-visual-studio-online-buildrelease-management/), and reference hello Template and Template Parameters files.</span></span>
5. <span data-ttu-id="28557-162">По-прежнему toobuild действия в процессе выпуска hello для среды, автоматических тестов или утверждающих при необходимости.</span><span class="sxs-lookup"><span data-stu-id="28557-162">Continue toobuild out steps in hello release process for any other environment, automated test, or approvers as needed.</span></span>

<!-- Image References -->
[1]: ./media/logic-apps-create-deploy-template/emptyreleasedefinition.png
