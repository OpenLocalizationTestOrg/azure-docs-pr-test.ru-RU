---
title: "Восстановление aaaDisaster для учетной записи интеграции B2B - приложения логики Azure | Документы Microsoft"
description: "Аварийное восстановление B2B в Logic Apps"
services: logic-apps
documentationcenter: .net,nodejs,java
author: padmavc
manager: anneta
editor: 
ms.assetid: cf44af18-1fe5-41d5-9e06-cc57a968207c
ms.service: logic-apps
ms.workload: integration
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/10/2017
ms.author: LADocs; padmavc
ms.openlocfilehash: e86564a3c5a2607d22514936c606e2843cba0416
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="logic-apps-b2b-cross-region-disaster-recovery"></a>Межрегиональное аварийное восстановление Logic Apps B2B

Рабочие нагрузки B2B включают денежные транзакции, например заказы и счета. Во время аварии крайне важно для hello toomeet business tooquickly восстановления, согласованные бизнес уровня соглашений об уровне обслуживания с партнерами. В этой статье показано, как toobuild непрерывности бизнеса плане для рабочих нагрузок B2B. 

* Готовность к аварийному восстановлению 
* При аварии переход toosecondary области 
* Откат tooprimary области после аварии

## <a name="disaster-recovery-readiness"></a>Готовность к аварийному восстановлению  

1. Определите дополнительный регион и создайте [учетной записи интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md) в дополнительный регион hello.

2. Добавьте партнеров, схемы и соглашения для потоков сообщений hello необходимые целей учетной записи интеграции toobe репликации toosecondary области hello состояние выполнения.

   > [!TIP]
   > Убедитесь, что имеется согласованности в соглашение об именовании артефакта для hello интеграции учетной записи по регионам. 

3. hello toopull состояние выполнения из основного региона hello, создайте приложение логики в дополнительный регион hello. 

   Приложение логики должно включать *триггер* и *действие*. 
   Hello триггер должен подключаться учетной записи интеграции tooprimary области, и действие hello должны подключаться к учетной записи интеграции toosecondary области. 
   На основании hello интервал времени, триггер hello опрашивает таблицу состояния выполнения основной регион hello и извлекает hello новых записей, если таковые имеются. Действие Hello обновляет их учетной записи интеграции toosecondary области. 
   Это помогает tooget добавочного состояния из основного региона toosecondary области.

4. Непрерывность бизнес-процессов в приложениях для логики интеграции учетная запись является разработана на основе протоколов для B2B - X12, AS2 и EDIFACT toosupport. toofind подробные инструкции, выберите hello соответствующие ссылки.

5. Здравствуйте, рекомендация тоже toodeploy все ресурсы основной регион в дополнительном регионе. 

   Основной регион ресурсы включают базы данных SQL Azure или Azure Cosmos DB, Azure Service Bus и концентраторы событий Azure, используемый для обмена сообщениями, API управления Azure и компонент приложения логики Azure hello в службе приложений Azure.   

6. Установите соединение в основном регионе tooa дополнительный регион. hello toopull состояние выполнения из основного региона, создайте приложение логики в дополнительном регионе. 

   приложения логики Hello должна иметь триггер и действие. 
   триггер Hello следует подключить к учетной записи интеграции tooa первичного региона. 
   Действие Hello следует подключить к учетной записи интеграции tooa дополнительный регион. 
   На основании hello интервал времени, триггер hello опрашивает таблицу состояния выполнения основной регион hello и извлекает hello новых записей, если таковые имеются. 
   Действие Hello обновляет их учетной записи интеграции tooa дополнительный регион. 
   Это позволяет состояние среды выполнения добавочного tooget из hello основной регион toohello дополнительный регион.

Непрерывность бизнеса в учетной записи приложения логики интеграции обеспечивает поддержку, на основе протоколов B2B hello X12, AS2 и EDIFACT. Подробные инструкции по использованию протоколов X12 и AS2 см. в [этом](../logic-apps/logic-apps-enterprise-integration-b2b-business-continuity.md#x12) и в [этом](../logic-apps/logic-apps-enterprise-integration-b2b-business-continuity.md#as2) разделе данной статьи.

## <a name="fail-over-tooa-secondary-region-during-a-disaster-event"></a>При аварии переход tooa дополнительный регион

Во время аварии, когда hello основной регион недоступен для обеспечения непрерывности бизнеса, прямой трафик toohello дополнительный регион. Дополнительный регион помогают toorecover бизнеса быстро функции toomeet приветствия согласованных RPO/RTO партнерами. Он также сводит к минимуму усилия toofail через из одного региона tooanother области. 

Нет ожидаемую задержку при копировании контрольных чисел из во вторичный регион tooa первичного региона. tooavoid Отправка повторяющиеся созданный элемент управления цифры toopartners во время аварии, hello рекомендуется tooincrement hello контрольных чисел в соглашениях hello дополнительный регион с помощью [командлеты PowerShell](https://blogs.msdn.microsoft.com/david_burgs_blog/2017/03/09/fresh-of-the-press-new-azure-powershell-cmdlets-for-upcoming-x12-connector-disaster-recovery).

## <a name="fall-back-tooa-primary-region-post-disaster-event"></a>Откат после аварии событие tooa основной регион

toofall задней tooa основной регион когда она станет доступна, выполните следующие действия.

1. Остановите прием сообщений от партнеров в дополнительный регион hello.  

2. Обновлять номера управления hello создается для всех соглашений hello первичного региона с помощью [командлеты PowerShell](https://blogs.msdn.microsoft.com/david_burgs_blog/2017/03/09/fresh-of-the-press-new-azure-powershell-cmdlets-for-upcoming-x12-connector-disaster-recovery).  

3. Прямой трафик из hello дополнительный регион toohello первичного региона.

4. Убедитесь, что включен, приложение логики hello, созданные в дополнительный регион hello по запросу, состояние выполнения из основного региона hello.

## <a name="x12"></a>X12 

Для непрерывности бизнес-процессов для документов EDI X12 используются контрольные номера:

> [!TIP]
> Можно также использовать hello [X12 быстрого запуска шаблона](https://azure.microsoft.com/documentation/templates/201-logic-app-x12-disaster-recovery-replication/) toocreate логику приложения. Создание первичных и вторичных интеграции учетные записи являются шаблона hello toouse необходимые компоненты. Hello шаблон помогает toocreate два логику приложения — один для полученных контрольных чисел и другой для номера созданный элемент управления. В логику приложения hello, подключение hello триггер toohello первичного интеграции hello действие toohello получателей интеграции записи и создаются соответствующих триггеров и действий.

**Предварительные требования**

tooenable аварийного восстановления для входящих сообщений, выберите параметры проверки дублирования hello в параметры получения hello X12 соглашения.

![Выбор параметров проверки дублирования](./media/logic-apps-enterprise-integration-b2b-business-continuity/dupcheck.png)  

1. Создайте [приложение логики](../logic-apps/logic-apps-create-a-logic-app.md) в дополнительном регионе.    

2. Выполните поиск **X12** и выберите **X12 — при изменении контрольного номера**.   

   ![Поиск по запросу "X12"](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn1.png)

   триггер Hello предлагает tooestablish tooan интеграции учетную запись подключения к. 
   Hello триггер должен быть подключен tooa учетной записи интеграции первичного региона.

3. Введите имя подключения, выберите ваш *основной регион учетной записи интеграции* из hello, а затем выберите **создать**.   

   ![Имя учетной записи интеграции для основного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn2.png)

4. Hello **синхронизации номеров управления toostart DateTime** параметр является необязательным. Hello **частоты** можно задать слишком**день**, **час**, **минуту**, или **второй** с интервалом.   

   ![Дата, время и частота](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn3.png)

5. Выберите **New step** (Новый шаг) > **Добавить действие**.

   ![Выбор действий "Новый шаг" и "Добавить действие"](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn4.png)

6. Выполните поиск **X12** и выберите **X12 — добавление или изменение контрольных номеров**.   

   ![Добавление или обновление контрольных номеров](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn5.png)

7. Выберите tooconnect tooa дополнительный регион интеграции учетную запись действия, **изменить подключение** > **добавить новое подключение** список учетных записей доступны интеграции hello. Введите имя подключения, выберите ваш *дополнительный регион учетной записи интеграции* из hello, а затем выберите **создать**. 

   ![Имя учетной записи интеграции для дополнительного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn6.png)

8. Переключение tooraw входных данных, щелкнув значок "hello" в правом верхнем углу.

   ![Входные данные tooraw коммутатора](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12rawinputs.png)

9. Выберите текст из динамического содержимого палитры hello и сохранения hello логику приложения.

   ![Поля динамического содержимого](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn7.png)

   На основании hello интервал времени, триггер hello опрашивает hello основной регион полученных управления таблица и извлекает hello новых записей. 
   Действие Hello обновляет записи hello в учетной записи интеграции hello дополнительный регион. 
   Если нет обновлений, как отображается состояние триггера hello **пропускаются**.   

   ![Таблица контрольных номеров](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12recevicedcn8.png)

На основании hello интервал времени, состояние среды выполнения добавочного hello реплицирует во вторичный регион tooa первичного региона. Во время аварии, когда основной регион hello не является доступным, прямого трафика toohello дополнительный регион для обеспечения непрерывности бизнеса. 

## <a name="edifact"></a>EDIFACT 

Чтобы обеспечить непрерывность бизнес-процессов для документов EDIFACT EDI, используются контрольные номера.

**Предварительные требования**

tooenable аварийного восстановления для входящих сообщений, выберите параметры проверки дублирования hello в параметров получения соглашения EDIFACT.

![Выбор параметров проверки дублирования](./media/logic-apps-enterprise-integration-b2b-business-continuity/edifactdupcheck.png)  

1. Создайте [приложение логики](../logic-apps/logic-apps-create-a-logic-app.md) в дополнительном регионе.    

2. Выполните поиск **EDIFACT** и выберите **EDIFACT — при изменении контрольного номера**.

   ![Поиск по запросу "EDIFACT"](./media/logic-apps-enterprise-integration-b2b-business-continuity/edifactcn1.png)

   триггер Hello предлагает tooestablish tooan интеграции учетную запись подключения к. 
   Hello триггер должен быть подключен tooa учетной записи интеграции первичного региона. 

3. Введите имя подключения, выберите ваш *основной регион учетной записи интеграции* из hello, а затем выберите **создать**.    

   ![Имя учетной записи интеграции для основного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/X12CN2.png)

4. Hello **синхронизации номеров управления toostart DateTime** параметр является необязательным. Hello **частоты** можно задать слишком**день**, **час**, **минуту**, или **второй** с интервалом.    

   ![Дата, время и частота](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn3.png)

6. Выберите **New step** (Новый шаг) > **Добавить действие**.    

   ![Выбор действий "Новый шаг" и "Добавить действие"](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn4.png)

7. Выполните поиск **EDIFACT** и выберите **EDIFACT — добавление и изменение контрольных номеров**.   

   ![Добавление или обновление контрольных номеров](./media/logic-apps-enterprise-integration-b2b-business-continuity/EdifactChooseAction.png)

8. Выберите tooconnect tooa дополнительный регион интеграции учетную запись действия, **изменить подключение** > **добавить новое подключение** список учетных записей доступны интеграции hello. Введите имя подключения, выберите ваш *дополнительный регион учетной записи интеграции* из hello, а затем выберите **создать**.

   ![Имя учетной записи интеграции для дополнительного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12cn6.png)

9. Переключение tooraw входных данных, щелкнув значок "hello" в правом верхнем углу.

   ![Входные данные tooraw коммутатора](./media/logic-apps-enterprise-integration-b2b-business-continuity/Edifactrawinputs.png)

10. Выберите текст из динамического содержимого палитры hello и сохранения hello логику приложения.   

   ![Поля динамического содержимого](./media/logic-apps-enterprise-integration-b2b-business-continuity/X12CN7.png)

   На основании hello интервал времени, триггер hello опрашивает hello основной регион полученных управления таблица и извлекает hello новых записей.
   Действие Hello обновляет учетной записи интеграции hello записей toohello дополнительный регион. 
   Если нет обновлений, как отображается состояние триггера hello **пропускаются**.

   ![Таблица контрольных номеров](./media/logic-apps-enterprise-integration-b2b-business-continuity/x12recevicedcn8.png)

На основании hello интервал времени, состояние среды выполнения добавочного hello реплицирует во вторичный регион tooa первичного региона. Во время аварии, когда основной регион hello не является доступным, прямого трафика toohello дополнительный регион для обеспечения непрерывности бизнеса. 

## <a name="as2"></a>AS2 

Непрерывность бизнес-процессов для документов с помощью протокола AS2 hello основана на идентификатор сообщения hello и значение MIC hello.

> [!TIP]
> Можно также использовать hello [шаблоном краткого AS2](https://github.com/Azure/azure-quickstart-templates/pull/3302) toocreate логику приложения. Создание первичных и вторичных интеграции учетные записи являются шаблона hello toouse необходимые компоненты. Hello шаблон позволяет создать приложение логики, имеющий триггера и действия. приложения логики Hello создает подключение из учетной записи основного интеграции tooa триггера и учетной записи действия tooa получателей интеграции.

1. Создание [приложения логики](../logic-apps/logic-apps-create-a-logic-app.md) в дополнительный регион hello.  

2. Выполните поиск **AS2** и выберите **AS2 — When a MIC value is created** (AS2 — При создании значения MIC).   

   ![Поиск по запросу "AS2"](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid1.png)

   Триггер предлагает tooestablish tooan интеграции учетную запись подключения к. 
   Hello триггер должен быть подключен tooa учетной записи интеграции первичного региона. 
   
3. Введите имя подключения, выберите ваш *основной регион учетной записи интеграции* из hello, а затем выберите **создать**.

   ![Имя учетной записи интеграции для основного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid2.png)

4. Hello **синхронизации значение DateTime toostart MIC** параметр является необязательным. Hello **частоты** можно задать слишком**день**, **час**, **минуту**, или **второй** с интервалом.   

   ![Дата, время и частота](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid3.png)

5. Выберите **New step** (Новый шаг) > **Добавить действие**.  

   ![Выбор действий "Новый шаг" и "Добавить действие"](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid4.png)

6. Выполните поиск **AS2** и выберите **AS2 - Add or update MIC contents** (AS2 — Добавление или обновление содержимого MIC).  

   ![Добавление или обновление MIC](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid5.png)

7. Выберите tooconnect tooa получателей интеграции учетную запись действия, **изменить подключение** > **добавить новое подключение** список учетных записей доступны интеграции hello. Введите имя подключения, выберите ваш *дополнительный регион учетной записи интеграции* из hello, а затем выберите **создать**.

   ![Имя учетной записи интеграции для дополнительного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid6.png)

8. Переключение tooraw входных данных, щелкнув значок "hello" в правом верхнем углу.

   ![Входные данные tooraw коммутатора](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2rawinputs.png)

9. Выберите текст из динамического содержимого палитры hello и сохранения hello логику приложения.   

   ![Динамическое содержимое](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid7.png)

   На основании hello интервал времени, триггер hello опрашивает hello основной регион таблицы и извлекает hello новых записей. Действие Hello обновляет их учетной записи интеграции toohello дополнительный регион. 
   Если нет обновлений, как отображается состояние триггера hello **пропускаются**.  

   ![Таблица для основного региона](./media/logic-apps-enterprise-integration-b2b-business-continuity/as2messageid8.png)

На основании hello интервал времени, состояние среды выполнения добавочного hello реплицирует hello основной регион toohello дополнительный регион. Во время аварии, когда основной регион hello не является доступным, прямого трафика toohello дополнительный регион для обеспечения непрерывности бизнеса. 

## <a name="next-steps"></a>Дальнейшие действия

[Мониторинг сообщений B2B](logic-apps-monitor-b2b-message.md)

