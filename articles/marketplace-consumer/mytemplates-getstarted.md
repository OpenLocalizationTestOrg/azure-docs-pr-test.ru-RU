---
title: "Начало работы с частными шаблонами | Документация Майкрософт"
description: "Добавление и совместное использование частных шаблонов, а также управление ими с помощью портала Azure, интерфейса командной строки Azure или PowerShell."
services: marketplace-customer
documentationcenter: 
author: VybavaRamadoss
manager: asimm
editor: 
tags: marketplace, azure-resource-manager
keywords: 
ms.assetid: 6ec20778-b578-4885-acb5-104b0e51ea1a
ms.service: marketplace
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 05/18/2016
ms.author: vybavar
ms.openlocfilehash: 01657619cbe579c6818a790cc3ab95a33936a565
ms.sourcegitcommit: 6699c77dcbd5f8a1a2f21fba3d0a0005ac9ed6b7
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/11/2017
---
# <a name="get-started-with-private-templates-on-the-azure-portal"></a>Начало работы с частными шаблонами на портале Azure
Шаблон [Azure Resource Manager](../azure-resource-manager/resource-group-authoring-templates.md) — это декларативный шаблон, который используется для определения развертывания. С его помощью можно определить ресурсы для развертывания решения и указать параметры и переменные, позволяющие вводить значения для различных сред. Шаблон состоит из JSON и выражений, на основе которых можно создавать значения для развертывания.

Новую функцию **Шаблоны** на [портале Azure](https://portal.azure.com) можно использовать вместе с поставщиком ресурсов **Microsoft.Gallery** в дополнение к [Azure Marketplace](https://azure.microsoft.com/marketplace/), давая пользователям возможность создавать и развертывать частные шаблоны, а также управлять ими из личной библиотеки.

В этом документе рассматривается добавление и совместное использование частного **шаблона** , а также управление им с помощью портала Azure.

## <a name="guidance"></a>Руководство
Следующие рекомендации помогут вам использовать все преимущества **шаблонов** при работе с вашими решениями.

* **Шаблон** представляет собой инкапсулирующий ресурс, который содержит шаблон Resource Manager и дополнительные метаданные. По своему поведению он аналогичен элементам в Marketplace. Основное отличие заключается в том, что это закрытый элемент, тогда как элементы Marketplace являются общедоступными.
* Библиотека **Шаблоны** подходит пользователям, которым требуется настроить свои развертывания.
* **Шаблоны** хорошо подходят пользователям, которым необходим простой репозиторий в Azure.
* Начните работу с существующего шаблона Resource Manager. Шаблоны можно найти на портале [GitHub](https://github.com/Azure/azure-quickstart-templates) или [экспортировать шаблон](../azure-resource-manager/resource-manager-export-template.md) из имеющейся группы ресурсов.
* **Шаблоны** связаны с пользователем, который публикует их. Имя издателя отображается для всех, у кого есть доступ на чтение к шаблону.
* **Шаблоны** — это ресурсы Resource Manager. Их нельзя переименовать после публикации.

## <a name="add-a-template-resource"></a>Добавление ресурса шаблона
Ресурс **шаблона** на портале Azure можно создать двумя способами.

### <a name="method-1--create-a-new-template-resource-from-a-running-resource-group"></a>Способ 1. Создание нового ресурса шаблона из работающей группы ресурсов
1. Перейдите в существующую группу ресурсов на портале Azure. В разделе **Параметры** выберите **Export template** (Экспорт шаблона).
2. После экспорта шаблона Resource Manager нажмите кнопку **Save Template** (Сохранить шаблон), чтобы сохранить его в репозитории **Шаблоны**. Дополнительные сведения об экспорте шаблона см. [здесь](../azure-resource-manager/resource-manager-export-template.md).
   <br /><br />
   ![Resource group export](media/rg-export-portal1.PNG)  <br />
3. Нажмите кнопку **Сохранить шаблон** .
   <br /><br />
4. Введите следующие сведения:
   
   * Имя — имя объекта шаблона. (Примечание. Это имя на основе Azure Resource Manager. К нему применяются все ограничения именования, и его нельзя изменить после создания).
   * Описание — краткая сводка сведений о шаблоне.
     
     ![Сохранение шаблона](media/save-template-portal1.PNG)  <br />
5. Щелкните **Сохранить**.
   
   > [!NOTE]
   > Если экспортированный шаблон Resource Manager содержит ошибки, в колонке "Экспорт шаблона" отображаются соответствующие уведомления, но этот шаблон Resource Manager все равно можно сохранить в репозитории "Шаблоны". Обязательно проверьте и устраните все ошибки в шаблоне Resource Manager, прежде чем повторно развертывать его после экспорта.
   > 
   > 

### <a name="method-2--add-a-new-template-resource-from-browse"></a>Способ 2. Добавление нового ресурса шаблона с помощью команды "Обзор"
Новый **шаблон** также можно добавить с нуля, щелкнув **Обзор > Шаблоны > +Add** (+Добавить). Вам потребуется указать имя, описание и JSON-файл шаблона Resource Manager.

![Добавление шаблона](media/add-template-portal1.PNG)  <br />

> [!NOTE]
> Microsoft.Gallery — это поставщик ресурсов Azure на основе клиента. Ресурс шаблона связан с пользователем, создавшим его. Он не привязывается к конкретной подписке. Подписку необходимо выбрать только при развертывании шаблона.
> 
> 

## <a name="view-template-resources"></a>Просмотр ресурсов шаблонов
Все доступные **шаблоны** можно просмотреть в разделе **Обзор > Шаблоны**. Сюда входят созданные вами **шаблоны**, а также шаблоны, к которым вам предоставлен общий доступ с различными уровнями разрешений. Дополнительные сведения см. в разделе о [контроле доступа](#access-control-for-a-tenant-resource-provider) ниже.

![Просмотр шаблона](media/view-template-portal1.PNG)  <br />

Чтобы просмотреть подробные сведения о **шаблоне** , щелкните элемент в списке.

![Просмотр шаблона](media/view-template-portal2c.png)  <br />

## <a name="edit-a-template-resource"></a>Изменение ресурса шаблона
Чтобы инициировать поток редактирования для **шаблона** , щелкните правой кнопкой мыши элемент в списке "Обзор" или нажмите кнопку "Изменить".

![Изменение шаблона](media/edit-template-portal1a.PNG)  <br />

Вы можете изменить описание или текст шаблона Resource Manager. Имя изменить нельзя, так как это имя ресурса Resource Manager. При редактировании JSON шаблона Resource Manager проверяется допустимость данных JSON. Щелкните **ОК**, а затем — **Сохранить**, чтобы сохранить обновленный шаблон.

![Изменение шаблона](media/edit-template-portal2a.PNG)  <br />

После сохранения **шаблона** появится уведомление с подтверждением.

![Изменение шаблона](media/edit-template-portal3b.png)  <br />

## <a name="deploy-a-template-resource"></a>Развертывание ресурса шаблона
Вы можете развернуть любой **шаблон**, для которого у вас есть разрешения на **чтение**. Поток развертывания открывает стандартную колонку развертывания шаблона Azure. Чтобы приступить к развертыванию, введите значения для параметров шаблона Resource Manager.

![Развертывание шаблона](media/deploy-template-portal1b.png)  <br />

## <a name="share-a-template-resource"></a>Совместное использование ресурса шаблона
Ресурс **шаблона** можно использовать совместно с коллегами. Совместное использование очень похоже на [назначение ролей для любого ресурса в Azure](../active-directory/role-based-access-control-configure.md). Владелец **шаблона** предоставляет разрешения другим пользователям, которые могут взаимодействовать с ресурсом шаблона. Пользователь или группа пользователей, которым предоставляется общий доступ к **шаблону** , смогут просматривать шаблон Resource Manager и его свойства коллекции.

### <a name="access-control-for-the-microsoftgallery-resources"></a>Контроль доступа к ресурсам Microsoft.Gallery
| Роль | Разрешения |
| --- | --- |
| Владелец |Разрешение на полный доступ к ресурсу шаблона, включая предоставление общего доступа. |
| читатель. |Разрешение на чтение и выполнение (развертывание) ресурса шаблона. |
| Участник |Разрешение на изменение и удаление ресурса шаблона. Пользователь не может использовать шаблон совместно с другими пользователями. |

Выберите команду **Поделиться** в контекстном меню элемента, которое можно открыть правой кнопкой мыши, или в колонке "Просмотр" этого элемента. Так вы сможете предоставить общий доступ к ресурсу другим пользователям.

![Совместное использование шаблона](media/share-template-portal1a.png)  <br />

 Теперь можно выбрать роль и пользователя или группу для предоставления доступа к конкретному **шаблону**. Доступные роли: "Владелец", "Читатель" и "Участник". Дополнительные сведения см. в разделе о [контроле доступа](#access-control-for-a-tenant-resource-provider) ниже.

![Совместное использование шаблона](media/share-template-portal2b.png)  <br />

![Совместное использование шаблона](media/share-template-portal3b.png)  <br />

Щелкните **Выбрать** и **ОК**. Теперь вы можете видеть, какие пользователи и группы добавлены к ресурсу.

![Совместное использование шаблона](media/share-template-portal4b.png)  <br />

> [!NOTE]
> Шаблон можно совместно использовать только с пользователями и группами в том же клиенте Azure Active Directory. Если вы хотите предоставить общий доступ к шаблону по адресу электронной почты, который не относится к вашему клиенту, пользователю будет отправлено приглашение с запросом на присоединение к клиенту в качестве гостя.
> 
> 

## <a name="next-steps"></a>Дальнейшие действия
* Сведения о создании шаблонов Resource Manager см. в [этой статье](../azure-resource-manager/resource-group-authoring-templates.md).
* Функции, которые можно использовать в шаблоне Resource Manager, описаны в статье [Функции шаблонов Azure Resource Manager](../azure-resource-manager/resource-group-template-functions.md)
* Рекомендации по разработке шаблонов Azure Resource Manager см. в [этой статье](../azure-resource-manager/best-practices-resource-manager-design-templates.md).

