---
title: "Наблюдатель за сетями Azure: общие сведения о проверке подключения | Документация Майкрософт"
description: "Эта страница содержит общие сведения о возможности проверки подключения в Наблюдателе за сетями."
services: network-watcher
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
ms.service: network-watcher
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/11/2017
ms.author: gwallace
ms.openlocfilehash: c29f5afe59f57112fe1f115df6bc53645f3c0d34
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/29/2017
---
# <a name="introduction-to-connectivity-check-in-azure-network-watcher"></a><span data-ttu-id="3f8db-103">Наблюдатель за сетями Azure: общие сведения о проверке подключения</span><span class="sxs-lookup"><span data-stu-id="3f8db-103">Introduction to connectivity check in Azure Network Watcher</span></span>

<span data-ttu-id="3f8db-104">Функция подключения к сети Наблюдателя за сетями предоставляет возможность проверять прямое подключение TCP от виртуальной машины к виртуальной машине, полное доменное имя, универсальный код ресурса (URI) или адрес IPv4.</span><span class="sxs-lookup"><span data-stu-id="3f8db-104">The connectivity feature of Network Watcher provides the capability to check a direct TCP connection from a virtual machine to a virtual machine (VM), fully qualified domain name (FQDN), URI, or IPv4 address.</span></span> <span data-ttu-id="3f8db-105">Сетевые сценарии сложные. Они реализуются с помощью групп безопасности сети, брандмауэров, определяемых пользователем маршрутов и ресурсов, предоставляемых Azure.</span><span class="sxs-lookup"><span data-stu-id="3f8db-105">Network scenarios are complex, they are implemented using Network Security Groups, firewalls, User-defined routes, and resources provided by Azure.</span></span> <span data-ttu-id="3f8db-106">Сложные конфигурации делают устранение неполадок, связанных с подключением, непростой задачей.</span><span class="sxs-lookup"><span data-stu-id="3f8db-106">Complex configurations make troubleshooting connectivity issues challenging.</span></span> <span data-ttu-id="3f8db-107">Наблюдатель за сетями помогает сократить время поиска и обнаружения проблем с подключением.</span><span class="sxs-lookup"><span data-stu-id="3f8db-107">Network Watcher helps reduce the amount of time to find and detect connectivity issues.</span></span> <span data-ttu-id="3f8db-108">Полученные результаты могут дать представление о том, с чем связана проблема подключения: с платформой или конфигурацией пользователя.</span><span class="sxs-lookup"><span data-stu-id="3f8db-108">The results returned can provide insights into whether a connectivity issue is due to a platform or a user configuration issue.</span></span> <span data-ttu-id="3f8db-109">Подключение можно проверить с помощью [PowerShell](network-watcher-connectivity-powershell.md), [Azure CLI](network-watcher-connectivity-cli.md) и [REST API](network-watcher-connectivity-rest.md).</span><span class="sxs-lookup"><span data-stu-id="3f8db-109">Connectivity can be checked with [PowerShell](network-watcher-connectivity-powershell.md), [Azure CLI](network-watcher-connectivity-cli.md), and [REST API](network-watcher-connectivity-rest.md).</span></span>

> [!IMPORTANT]
> <span data-ttu-id="3f8db-110">Для проверки возможности подключения требуется расширение виртуальной машины `AzureNetworkWatcherExtension`.</span><span class="sxs-lookup"><span data-stu-id="3f8db-110">Connectivity check requires a virtual machine extension `AzureNetworkWatcherExtension`.</span></span> <span data-ttu-id="3f8db-111">Информацию об установке расширения для виртуальной машины Windows см. в статье [Расширение виртуальной машины агента Наблюдателя за сетями для Windows](../virtual-machines/windows/extensions-nwa.md), а для виртуальной машины Linux — в статье [Расширение виртуальной машины агента Наблюдателя за сетями для Linux](../virtual-machines/linux/extensions-nwa.md).</span><span class="sxs-lookup"><span data-stu-id="3f8db-111">For installing the extension on a Windows VM visit [Azure Network Watcher Agent virtual machine extension for Windows](../virtual-machines/windows/extensions-nwa.md) and for Linux VM visit [Azure Network Watcher Agent virtual machine extension for Linux](../virtual-machines/linux/extensions-nwa.md).</span></span>

## <a name="response"></a><span data-ttu-id="3f8db-112">Ответ</span><span class="sxs-lookup"><span data-stu-id="3f8db-112">Response</span></span>

<span data-ttu-id="3f8db-113">В таблице ниже приведены свойства, возвращаемые после завершения проверки подключения.</span><span class="sxs-lookup"><span data-stu-id="3f8db-113">The following table shows the properties returned when a connectivity check has finished running.</span></span>

|<span data-ttu-id="3f8db-114">Свойство</span><span class="sxs-lookup"><span data-stu-id="3f8db-114">Property</span></span>  |<span data-ttu-id="3f8db-115">Описание</span><span class="sxs-lookup"><span data-stu-id="3f8db-115">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="3f8db-116">ConnectionStatus</span><span class="sxs-lookup"><span data-stu-id="3f8db-116">ConnectionStatus</span></span>     | <span data-ttu-id="3f8db-117">Состояние проверки подключения.</span><span class="sxs-lookup"><span data-stu-id="3f8db-117">The status of the connectivity check.</span></span> <span data-ttu-id="3f8db-118">Возможные результаты: **Reachable** и **Unreachable**.</span><span class="sxs-lookup"><span data-stu-id="3f8db-118">Possible results are **Reachable** and **Unreachable**.</span></span>        |
|<span data-ttu-id="3f8db-119">AvgLatencyInMs</span><span class="sxs-lookup"><span data-stu-id="3f8db-119">AvgLatencyInMs</span></span>     | <span data-ttu-id="3f8db-120">Среднее время задержки при проверке подключения в миллисекундах.</span><span class="sxs-lookup"><span data-stu-id="3f8db-120">Average latency during the connectivity check in milliseconds.</span></span> <span data-ttu-id="3f8db-121">(Возвращается, только если подключение доступно.)</span><span class="sxs-lookup"><span data-stu-id="3f8db-121">(Only shown if check status is reachable)</span></span>        |
|<span data-ttu-id="3f8db-122">MinLatencyInMs</span><span class="sxs-lookup"><span data-stu-id="3f8db-122">MinLatencyInMs</span></span>     | <span data-ttu-id="3f8db-123">Минимальное время задержки при проверке подключения в миллисекундах.</span><span class="sxs-lookup"><span data-stu-id="3f8db-123">Minimum latency during the connectivity check in milliseconds.</span></span> <span data-ttu-id="3f8db-124">(Возвращается, только если подключение доступно.)</span><span class="sxs-lookup"><span data-stu-id="3f8db-124">(Only shown if check status is reachable)</span></span>        |
|<span data-ttu-id="3f8db-125">MaxLatencyInMs</span><span class="sxs-lookup"><span data-stu-id="3f8db-125">MaxLatencyInMs</span></span>     | <span data-ttu-id="3f8db-126">Максимальное время задержки при проверке подключения в миллисекундах.</span><span class="sxs-lookup"><span data-stu-id="3f8db-126">Maximum latency during the connectivity check in milliseconds.</span></span> <span data-ttu-id="3f8db-127">(Возвращается, только если подключение доступно.)</span><span class="sxs-lookup"><span data-stu-id="3f8db-127">(Only shown if check status is reachable)</span></span>        |
|<span data-ttu-id="3f8db-128">ProbesSent</span><span class="sxs-lookup"><span data-stu-id="3f8db-128">ProbesSent</span></span>     | <span data-ttu-id="3f8db-129">Число проб, отправленных во время проверки.</span><span class="sxs-lookup"><span data-stu-id="3f8db-129">Number of probes sent during the check.</span></span> <span data-ttu-id="3f8db-130">Максимальное значение — 100.</span><span class="sxs-lookup"><span data-stu-id="3f8db-130">Max value is 100.</span></span>        |
|<span data-ttu-id="3f8db-131">ProbesFailed</span><span class="sxs-lookup"><span data-stu-id="3f8db-131">ProbesFailed</span></span>     | <span data-ttu-id="3f8db-132">Число проб, которые завершились сбоем во время проверки.</span><span class="sxs-lookup"><span data-stu-id="3f8db-132">Number of probes that failed during the check.</span></span> <span data-ttu-id="3f8db-133">Максимальное значение — 100.</span><span class="sxs-lookup"><span data-stu-id="3f8db-133">Max value is 100.</span></span>        |
|<span data-ttu-id="3f8db-134">Hops</span><span class="sxs-lookup"><span data-stu-id="3f8db-134">Hops</span></span>     | <span data-ttu-id="3f8db-135">Путь по прыжкам от источника к назначению.</span><span class="sxs-lookup"><span data-stu-id="3f8db-135">Hop by hop path from source to destination.</span></span>        |
|<span data-ttu-id="3f8db-136">Hops[].Type</span><span class="sxs-lookup"><span data-stu-id="3f8db-136">Hops[].Type</span></span>     | <span data-ttu-id="3f8db-137">Тип ресурса.</span><span class="sxs-lookup"><span data-stu-id="3f8db-137">Type of resource.</span></span> <span data-ttu-id="3f8db-138">Возможные значения: **Source**, **VirtualAppliance**, **VnetLocal** и **Internet**.</span><span class="sxs-lookup"><span data-stu-id="3f8db-138">Possible values are **Source**, **VirtualAppliance**, **VnetLocal**, and **Internet**.</span></span>        |
|<span data-ttu-id="3f8db-139">Hops[].Id</span><span class="sxs-lookup"><span data-stu-id="3f8db-139">Hops[].Id</span></span> | <span data-ttu-id="3f8db-140">Уникальный идентификатор прыжка.</span><span class="sxs-lookup"><span data-stu-id="3f8db-140">Unique identifier of the hop.</span></span>|
|<span data-ttu-id="3f8db-141">Hops[].Address</span><span class="sxs-lookup"><span data-stu-id="3f8db-141">Hops[].Address</span></span> | <span data-ttu-id="3f8db-142">IP-адрес прыжка.</span><span class="sxs-lookup"><span data-stu-id="3f8db-142">IP address of the hop.</span></span>|
|<span data-ttu-id="3f8db-143">Hops[].ResourceId</span><span class="sxs-lookup"><span data-stu-id="3f8db-143">Hops[].ResourceId</span></span> | <span data-ttu-id="3f8db-144">ResourceID прыжка, если прыжок — это ресурс Azure.</span><span class="sxs-lookup"><span data-stu-id="3f8db-144">ResourceID of the hop if the hop is an Azure resource.</span></span> <span data-ttu-id="3f8db-145">Если это ресурс интернета, ResourceID — это **Интернет**.</span><span class="sxs-lookup"><span data-stu-id="3f8db-145">If it is an internet resource, ResourceID is **Internet**.</span></span> |
|<span data-ttu-id="3f8db-146">Hops[].NextHopIds</span><span class="sxs-lookup"><span data-stu-id="3f8db-146">Hops[].NextHopIds</span></span> | <span data-ttu-id="3f8db-147">Уникальный идентификатор следующего выполненного прыжка.</span><span class="sxs-lookup"><span data-stu-id="3f8db-147">The unique identifier of the next hop taken.</span></span>|
|<span data-ttu-id="3f8db-148">Hops[].Issues</span><span class="sxs-lookup"><span data-stu-id="3f8db-148">Hops[].Issues</span></span> | <span data-ttu-id="3f8db-149">Набор проблем, возникших во время проверки этого прыжка.</span><span class="sxs-lookup"><span data-stu-id="3f8db-149">A collection of issues that were encountered during the check at that hop.</span></span> <span data-ttu-id="3f8db-150">Если проблем не обнаружено, значение будет пустым.</span><span class="sxs-lookup"><span data-stu-id="3f8db-150">If there were no issues, the value is blank.</span></span>|
|<span data-ttu-id="3f8db-151">Hops[].Issues[].Origin</span><span class="sxs-lookup"><span data-stu-id="3f8db-151">Hops[].Issues[].Origin</span></span> | <span data-ttu-id="3f8db-152">Текущий прыжок, где возникла проблем.</span><span class="sxs-lookup"><span data-stu-id="3f8db-152">At the current hop, where issue occurred.</span></span> <span data-ttu-id="3f8db-153">Возможные значения:</span><span class="sxs-lookup"><span data-stu-id="3f8db-153">Possible values are:</span></span><br/> <span data-ttu-id="3f8db-154">**Inbound**. Проблема обнаружена в пути от предыдущего прыжка к текущему.</span><span class="sxs-lookup"><span data-stu-id="3f8db-154">**Inbound** - Issue is on the link from the previous hop to the current hop</span></span><br/><span data-ttu-id="3f8db-155">**Outbound**. Проблема обнаружена в пути от текущего прыжка к следующему.</span><span class="sxs-lookup"><span data-stu-id="3f8db-155">**Outbound** - Issue is on the link from the current hop to the next hop</span></span><br/><span data-ttu-id="3f8db-156">**Local**. Проблема возникла на текущем прыжке.</span><span class="sxs-lookup"><span data-stu-id="3f8db-156">**Local** - Issue is on the current hop.</span></span>|
|<span data-ttu-id="3f8db-157">Hops[].Issues[].Severity</span><span class="sxs-lookup"><span data-stu-id="3f8db-157">Hops[].Issues[].Severity</span></span> | <span data-ttu-id="3f8db-158">Степень серьезности обнаруженной проблемы.</span><span class="sxs-lookup"><span data-stu-id="3f8db-158">The severity of the issue detected.</span></span> <span data-ttu-id="3f8db-159">Возможные значения: **Error** и **Warning**.</span><span class="sxs-lookup"><span data-stu-id="3f8db-159">Possible values are **Error** and **Warning**.</span></span> |
|<span data-ttu-id="3f8db-160">Hops[].Issues[].Type</span><span class="sxs-lookup"><span data-stu-id="3f8db-160">Hops[].Issues[].Type</span></span> |<span data-ttu-id="3f8db-161">Тип обнаруженной проблемы.</span><span class="sxs-lookup"><span data-stu-id="3f8db-161">The type of issue found.</span></span> <span data-ttu-id="3f8db-162">Возможные значения:</span><span class="sxs-lookup"><span data-stu-id="3f8db-162">Possible values are:</span></span> <br/><span data-ttu-id="3f8db-163">**ЦП**</span><span class="sxs-lookup"><span data-stu-id="3f8db-163">**CPU**</span></span><br/><span data-ttu-id="3f8db-164">**Память**</span><span class="sxs-lookup"><span data-stu-id="3f8db-164">**Memory**</span></span><br/><span data-ttu-id="3f8db-165">**GuestFirewall**</span><span class="sxs-lookup"><span data-stu-id="3f8db-165">**GuestFirewall**</span></span><br/><span data-ttu-id="3f8db-166">**DnsResolution**</span><span class="sxs-lookup"><span data-stu-id="3f8db-166">**DnsResolution**</span></span><br/><span data-ttu-id="3f8db-167">**NetworkSecurityRule**</span><span class="sxs-lookup"><span data-stu-id="3f8db-167">**NetworkSecurityRule**</span></span><br/><span data-ttu-id="3f8db-168">**UserDefinedRoute**</span><span class="sxs-lookup"><span data-stu-id="3f8db-168">**UserDefinedRoute**</span></span> |
|<span data-ttu-id="3f8db-169">Hops[].Issues[].Context</span><span class="sxs-lookup"><span data-stu-id="3f8db-169">Hops[].Issues[].Context</span></span> |<span data-ttu-id="3f8db-170">Сведения об обнаруженной проблеме.</span><span class="sxs-lookup"><span data-stu-id="3f8db-170">Details regarding the issue found.</span></span>|
|<span data-ttu-id="3f8db-171">Hops[].Issues[].Context[].key</span><span class="sxs-lookup"><span data-stu-id="3f8db-171">Hops[].Issues[].Context[].key</span></span> |<span data-ttu-id="3f8db-172">Возвращенный ключ из пары "ключ — значение".</span><span class="sxs-lookup"><span data-stu-id="3f8db-172">Key of the key value pair returned.</span></span>|
|<span data-ttu-id="3f8db-173">Hops[].Issues[].Context[].value</span><span class="sxs-lookup"><span data-stu-id="3f8db-173">Hops[].Issues[].Context[].value</span></span> |<span data-ttu-id="3f8db-174">Возвращенное значение из пары "ключ — значение".</span><span class="sxs-lookup"><span data-stu-id="3f8db-174">Value of the key value pair returned.</span></span>|

<span data-ttu-id="3f8db-175">Ниже приведен пример проблемы, обнаруженной при прыжке.</span><span class="sxs-lookup"><span data-stu-id="3f8db-175">The following is an example of an issue found on a hop.</span></span>

```json
"Issues": [
    {
        "Origin": "Outbound",
        "Severity": "Error",
        "Type": "NetworkSecurityRule",
        "Context": [
            {
                "key": "RuleName",
                "value": "UserRule_Port80"
            }
        ]
    }
]
```
## <a name="fault-types"></a><span data-ttu-id="3f8db-176">Типы ошибок</span><span class="sxs-lookup"><span data-stu-id="3f8db-176">Fault types</span></span>

<span data-ttu-id="3f8db-177">Проверка возможности подключения возвращает типы ошибок подключения.</span><span class="sxs-lookup"><span data-stu-id="3f8db-177">The connectivity check returns fault types about the connection.</span></span> <span data-ttu-id="3f8db-178">Следующая таблица предоставляет список возвращаемых типов текущих ошибок.</span><span class="sxs-lookup"><span data-stu-id="3f8db-178">The following table provides a list of the current fault types returned.</span></span>

|<span data-ttu-id="3f8db-179">Тип</span><span class="sxs-lookup"><span data-stu-id="3f8db-179">Type</span></span>  |<span data-ttu-id="3f8db-180">Описание</span><span class="sxs-lookup"><span data-stu-id="3f8db-180">Description</span></span>  |
|---------|---------|
|<span data-ttu-id="3f8db-181">ЦП</span><span class="sxs-lookup"><span data-stu-id="3f8db-181">CPU</span></span>     | <span data-ttu-id="3f8db-182">Высокая загрузка ЦП.</span><span class="sxs-lookup"><span data-stu-id="3f8db-182">High CPU utilization.</span></span>       |
|<span data-ttu-id="3f8db-183">Память</span><span class="sxs-lookup"><span data-stu-id="3f8db-183">Memory</span></span>     | <span data-ttu-id="3f8db-184">Высокий уровень использования памяти.</span><span class="sxs-lookup"><span data-stu-id="3f8db-184">High Memory utilization.</span></span>       |
|<span data-ttu-id="3f8db-185">GuestFirewall</span><span class="sxs-lookup"><span data-stu-id="3f8db-185">GuestFirewall</span></span>     | <span data-ttu-id="3f8db-186">Трафик блокируется из-за конфигурации брандмауэра виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="3f8db-186">Traffic is blocked due to a virtual machine firewall configuration.</span></span>        |
|<span data-ttu-id="3f8db-187">DnsResolution</span><span class="sxs-lookup"><span data-stu-id="3f8db-187">DNSResolution</span></span>     | <span data-ttu-id="3f8db-188">Сбой разрешения DNS для адреса назначения.</span><span class="sxs-lookup"><span data-stu-id="3f8db-188">DNS resolution failed for the destination address.</span></span>        |
|<span data-ttu-id="3f8db-189">NetworkSecurityRule</span><span class="sxs-lookup"><span data-stu-id="3f8db-189">NetworkSecurityRule</span></span>    | <span data-ttu-id="3f8db-190">Трафик блокируется правилом группы безопасности сети (возвращается правило).</span><span class="sxs-lookup"><span data-stu-id="3f8db-190">Traffic is blocked by an NSG Rule (Rule is returned)</span></span>        |
|<span data-ttu-id="3f8db-191">UserDefinedRoute</span><span class="sxs-lookup"><span data-stu-id="3f8db-191">UserDefinedRoute</span></span>|<span data-ttu-id="3f8db-192">Трафик сбрасывается из-за определенного пользователем или системой маршрута.</span><span class="sxs-lookup"><span data-stu-id="3f8db-192">Traffic is dropped due to a user defined or system route.</span></span> |

### <a name="next-steps"></a><span data-ttu-id="3f8db-193">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="3f8db-193">Next steps</span></span>

<span data-ttu-id="3f8db-194">Дополнительные сведения о подключении к ресурсу см. в статье [Проверка возможности подключения с помощью Наблюдателя за сетями Azure (PowerShell)](network-watcher-connectivity-powershell.md).</span><span class="sxs-lookup"><span data-stu-id="3f8db-194">Learn how to verify connectivity to a resource by visiting: [Check connectivity with Azure Network Watcher](network-watcher-connectivity-powershell.md).</span></span>

<!--Image references-->
[1]: ./media/network-watcher-next-hop-overview/figure1.png

