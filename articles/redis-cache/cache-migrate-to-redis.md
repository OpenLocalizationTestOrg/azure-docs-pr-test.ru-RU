---
title: "aaaMigrate tooRedis управляемой службы кэша приложений - Azure | Документы Microsoft"
description: "Узнайте, как toomigrate управляемой службы кэша и кэша в роли приложения tooAzure кэша Redis"
services: redis-cache
documentationcenter: na
author: steved0x
manager: douge
editor: tysonn
ms.assetid: 041f077b-8c8e-4d7c-a3fc-89d334ed70d6
ms.service: cache
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: cache-redis
ms.workload: tbd
ms.date: 05/30/2017
ms.author: sdanie
ms.openlocfilehash: bd81722820acf0d2637828fbb6100c723aafeba5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="migrate-from-managed-cache-service-tooazure-redis-cache"></a><span data-ttu-id="237e2-103">Миграция из управляемой службы кэша tooAzure кэша Redis</span><span class="sxs-lookup"><span data-stu-id="237e2-103">Migrate from Managed Cache Service tooAzure Redis Cache</span></span>
<span data-ttu-id="237e2-104">Миграция приложений, использующих tooAzure управляемой службы кэша Azure Redis кэша может быть выполнено с минимальными изменениями tooyour приложения, в зависимости от используемых в приложении кэширования функций hello управляемой службы кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-104">Migrating your applications that use Azure Managed Cache Service tooAzure Redis Cache can be accomplished with minimal changes tooyour application, depending on hello Managed Cache Service features used by your caching application.</span></span> <span data-ttu-id="237e2-105">Hello API-интерфейсы, немного hello же они похожи и большая часть существующего кода, использующего управляемой службы кэша tooaccess кэша может быть использован с минимальными изменениями.</span><span class="sxs-lookup"><span data-stu-id="237e2-105">While hello APIs are not exactly hello same they are similar, and much of your existing code that uses Managed Cache Service tooaccess a cache can be reused with minimal changes.</span></span> <span data-ttu-id="237e2-106">В этом разделе показано, как toomake hello необходимой конфигурации и приложения изменяется toomigrate toouse приложений к управляемой службы кэша Azure Redis Cache и показано, как некоторые из функций hello кэша Redis для Azure можно используется tooimplement функции hello кэша управляемой службы кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-106">This topic shows how toomake hello necessary configuration and application changes toomigrate your Managed Cache Service applications toouse Azure Redis Cache, and shows how some of hello features of Azure Redis Cache can be used tooimplement hello functionality of a Managed Cache Service cache.</span></span>

>[!NOTE]
><span data-ttu-id="237e2-107">Использование управляемой службы кэша и кэша роли [прекращено](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) 30 ноября 2016 г.</span><span class="sxs-lookup"><span data-stu-id="237e2-107">Managed Cache Service and In-Role Cache were [retired](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/) November 30, 2016.</span></span> <span data-ttu-id="237e2-108">При наличии нужных toomigrate tooAzure кэша Redis развертывания кэша в роли, можно выполнить действия hello в этой статье.</span><span class="sxs-lookup"><span data-stu-id="237e2-108">If you have any In-Role Cache deployments that you want toomigrate tooAzure Redis Cache, you can follow hello steps in this article.</span></span>

## <a name="migration-steps"></a><span data-ttu-id="237e2-109">Этапы миграции</span><span class="sxs-lookup"><span data-stu-id="237e2-109">Migration Steps</span></span>
<span data-ttu-id="237e2-110">Привет, выполнив действия, необходимые toomigrate toouse приложения управляемой службы кэша Azure Redis Cache.</span><span class="sxs-lookup"><span data-stu-id="237e2-110">hello following steps are required toomigrate a Managed Cache Service application toouse Azure Redis Cache.</span></span>

* <span data-ttu-id="237e2-111">Сопоставление функции управляемой службы кэша tooAzure кэша Redis</span><span class="sxs-lookup"><span data-stu-id="237e2-111">Map Managed Cache Service features tooAzure Redis Cache</span></span>
* <span data-ttu-id="237e2-112">Выбор уровня кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-112">Choose a Cache Offering</span></span>
* <span data-ttu-id="237e2-113">Создание кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-113">Create a Cache</span></span>
* <span data-ttu-id="237e2-114">Настройка клиентов кэша hello</span><span class="sxs-lookup"><span data-stu-id="237e2-114">Configure hello Cache Clients</span></span>
  * <span data-ttu-id="237e2-115">Удаление конфигурации службы управляемого кэша hello</span><span class="sxs-lookup"><span data-stu-id="237e2-115">Remove hello Managed Cache Service Configuration</span></span>
  * <span data-ttu-id="237e2-116">Настройка клиента кэша с помощью пакета NuGet StackExchange.Redis hello</span><span class="sxs-lookup"><span data-stu-id="237e2-116">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
* <span data-ttu-id="237e2-117">Перенос кода управляемой службы кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-117">Migrate Managed Cache Service code</span></span>
  * <span data-ttu-id="237e2-118">Подключение с использованием класса ConnectionMultiplexer hello кэша toohello</span><span class="sxs-lookup"><span data-stu-id="237e2-118">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
  * <span data-ttu-id="237e2-119">Доступ примитивных типов данных в кэше hello</span><span class="sxs-lookup"><span data-stu-id="237e2-119">Access primitive data types in hello cache</span></span>
  * <span data-ttu-id="237e2-120">Работа с объектами .NET в кэше hello</span><span class="sxs-lookup"><span data-stu-id="237e2-120">Work with .NET objects in hello cache</span></span>
* <span data-ttu-id="237e2-121">Перенос состояний сеансов ASP.NET и выводом tooAzure кэша Redis</span><span class="sxs-lookup"><span data-stu-id="237e2-121">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span> 

## <a name="map-managed-cache-service-features-tooazure-redis-cache"></a><span data-ttu-id="237e2-122">Сопоставление функции управляемой службы кэша tooAzure кэша Redis</span><span class="sxs-lookup"><span data-stu-id="237e2-122">Map Managed Cache Service features tooAzure Redis Cache</span></span>
<span data-ttu-id="237e2-123">Управляемая служба кэша Azure и кэш Redis для Azure похожи, но некоторые их функции реализуются по-разному.</span><span class="sxs-lookup"><span data-stu-id="237e2-123">Azure Managed Cache Service and Azure Redis Cache are similar but implement some of their features in different ways.</span></span> <span data-ttu-id="237e2-124">В этом разделе описаны некоторые различия hello и приводятся рекомендации по реализации функции hello управляемой службы кэша в кэше Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="237e2-124">This section describes some of hello differences and provides guidance on implementing hello features of Managed Cache Service in Azure Redis Cache.</span></span>

| <span data-ttu-id="237e2-125">Функция управляемой службы кэша</span><span class="sxs-lookup"><span data-stu-id="237e2-125">Managed Cache Service feature</span></span> | <span data-ttu-id="237e2-126">Поддержка управляемой службы кэша</span><span class="sxs-lookup"><span data-stu-id="237e2-126">Managed Cache Service support</span></span> | <span data-ttu-id="237e2-127">Поддержка кэша Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="237e2-127">Azure Redis Cache support</span></span> |
| --- | --- | --- |
| <span data-ttu-id="237e2-128">Именованные кэши</span><span class="sxs-lookup"><span data-stu-id="237e2-128">Named caches</span></span> |<span data-ttu-id="237e2-129">Настроить кэш по умолчанию, а в hello Standard и Premium предложения кэша, копирование toonine дополнительные именованные кэши могут быть настроены при желании.</span><span class="sxs-lookup"><span data-stu-id="237e2-129">A default cache is configured, and in hello Standard and Premium cache offerings, up toonine additional named caches can be configured if desired.</span></span> |<span data-ttu-id="237e2-130">Кэшах Azure Redis имеется определенное количество баз данных (по умолчанию 16), которые можно использовать tooimplement, который кэширует аналогичные toonamed функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="237e2-130">Azure Redis caches have a configurable number of databases (default of 16) that can be used tooimplement a similar functionality toonamed caches.</span></span> <span data-ttu-id="237e2-131">Дополнительные сведения см. в разделах [What are Redis databases?](cache-configure.md#default-redis-server-configuration) (Что такое базы данных Redis) и [Конфигурация сервера Redis по умолчанию](cache-faq.md#what-are-redis-databases).</span><span class="sxs-lookup"><span data-stu-id="237e2-131">For more information, see [What are Redis databases?](cache-faq.md#what-are-redis-databases) and [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="237e2-132">Высокая доступность</span><span class="sxs-lookup"><span data-stu-id="237e2-132">High Availability</span></span> |<span data-ttu-id="237e2-133">Обеспечивает высокую доступность для элементов в кэше hello в предложениях кэша Standard и Premium hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-133">Provides high availability for items in hello cache in hello Standard and Premium cache offerings.</span></span> <span data-ttu-id="237e2-134">Если элементы утрачиваются из-за сбоя tooa, резервные копии элементов hello в кэше hello по-прежнему доступны.</span><span class="sxs-lookup"><span data-stu-id="237e2-134">If items are lost due tooa failure, backup copies of hello items in hello cache are still available.</span></span> <span data-ttu-id="237e2-135">Записывает toohello вторичный кэш выполняется синхронно.</span><span class="sxs-lookup"><span data-stu-id="237e2-135">Writes toohello secondary cache are made synchronously.</span></span> |<span data-ttu-id="237e2-136">Высокий уровень доступности предусмотрен в hello Standard и Premium предложения кэша, имеющих первичный/реплика конфигурации из двух узлов (каждый сегмент в кэше Premium имеет пару первичный и реплика).</span><span class="sxs-lookup"><span data-stu-id="237e2-136">High availability is available in hello Standard and Premium cache offerings, which have a two node Primary/Replica configuration (each shard in a Premium cache has a primary/replica pair).</span></span> <span data-ttu-id="237e2-137">Реплика toohello операции записи выполняются асинхронно.</span><span class="sxs-lookup"><span data-stu-id="237e2-137">Writes toohello replica are made asynchronously.</span></span> <span data-ttu-id="237e2-138">Дополнительные сведения см. на странице [цены на кэш Redis для Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="237e2-138">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> |
| <span data-ttu-id="237e2-139">Уведомления</span><span class="sxs-lookup"><span data-stu-id="237e2-139">Notifications</span></span> |<span data-ttu-id="237e2-140">Позволяет произойти клиентов tooreceive асинхронные уведомления при выполнении различных операций кэша в именованном кэше.</span><span class="sxs-lookup"><span data-stu-id="237e2-140">Allows clients tooreceive asynchronous notifications when a variety of cache operations occur on a named cache.</span></span> |<span data-ttu-id="237e2-141">Клиентские приложения могут использовать Redis pub/sub или [уведомления Keyspace](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve toonotifications аналогичные функциональные возможности.</span><span class="sxs-lookup"><span data-stu-id="237e2-141">Client applications can use Redis pub/sub or [Keyspace notifications](cache-configure.md#keyspace-notifications-advanced-settings) tooachieve a similar functionality toonotifications.</span></span> |
| <span data-ttu-id="237e2-142">Локальный кэш</span><span class="sxs-lookup"><span data-stu-id="237e2-142">Local cache</span></span> |<span data-ttu-id="237e2-143">Сохраняет копии кэшированных объектов локально на клиенте hello очень быстрый доступ.</span><span class="sxs-lookup"><span data-stu-id="237e2-143">Stores a copy of cached objects locally on hello client for extra-fast access.</span></span> |<span data-ttu-id="237e2-144">Клиентские приложения, должны tooimplement этой функции с помощью словаря или аналогичной структуры данных.</span><span class="sxs-lookup"><span data-stu-id="237e2-144">Client applications would need tooimplement this functionality using a dictionary or similar data structure.</span></span> |
| <span data-ttu-id="237e2-145">Политика вытеснения</span><span class="sxs-lookup"><span data-stu-id="237e2-145">Eviction Policy</span></span> |<span data-ttu-id="237e2-146">Нет или наиболее давно использовавшаяся.</span><span class="sxs-lookup"><span data-stu-id="237e2-146">None or LRU.</span></span> <span data-ttu-id="237e2-147">Политика по умолчанию Hello является LRU.</span><span class="sxs-lookup"><span data-stu-id="237e2-147">hello default policy is LRU.</span></span> |<span data-ttu-id="237e2-148">Кэш Azure Redis поддерживает следующие политики вытеснения hello: volatile-lru, allkeys-lru, срок жизни volatile случайных volatile, allkeys случайным образом, noeviction.</span><span class="sxs-lookup"><span data-stu-id="237e2-148">Azure Redis Cache supports hello following eviction policies: volatile-lru, allkeys-lru, volatile-random, allkeys-random, volatile-ttl, noeviction.</span></span> <span data-ttu-id="237e2-149">Политика по умолчанию Hello является volatile-lru.</span><span class="sxs-lookup"><span data-stu-id="237e2-149">hello default policy is volatile-lru.</span></span> <span data-ttu-id="237e2-150">Дополнительные сведения см. в разделе [Конфигурация сервера Redis по умолчанию](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="237e2-150">For more information, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span> |
| <span data-ttu-id="237e2-151">Политика срока действия</span><span class="sxs-lookup"><span data-stu-id="237e2-151">Expiration Policy</span></span> |<span data-ttu-id="237e2-152">Политика срока по умолчанию Hello является абсолютным и срок действия по умолчанию hello составляет десять минут.</span><span class="sxs-lookup"><span data-stu-id="237e2-152">hello default expiration policy is Absolute and hello default expiration interval is ten minutes.</span></span> <span data-ttu-id="237e2-153">Доступны также политики Sliding и Never.</span><span class="sxs-lookup"><span data-stu-id="237e2-153">Sliding and Never policies are also available.</span></span> |<span data-ttu-id="237e2-154">По умолчанию элементы в кэше hello не истекает, но может быть настроен отдельно для каждой записи с помощью перегрузки набора кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-154">By default items in hello cache do not expire, but an expiration can be configured on a per write basis using cache set overloads.</span></span> <span data-ttu-id="237e2-155">Дополнительные сведения см. в разделе [Установка и получение объектов из кэша hello](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span><span class="sxs-lookup"><span data-stu-id="237e2-155">For more information, see [Add and retrieve objects from hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#add-and-retrieve-objects-from-the-cache).</span></span> |
| <span data-ttu-id="237e2-156">Регионы и добавление тегов</span><span class="sxs-lookup"><span data-stu-id="237e2-156">Regions and Tagging</span></span> |<span data-ttu-id="237e2-157">Регионы являются подгруппами для кэшированных элементов.</span><span class="sxs-lookup"><span data-stu-id="237e2-157">Regions are subgroups for cached items.</span></span> <span data-ttu-id="237e2-158">Области также дополнительно поддерживают пометку hello кэшированных элементов описательными строками — тегами.</span><span class="sxs-lookup"><span data-stu-id="237e2-158">Regions also support hello annotation of cached items with additional descriptive strings called tags.</span></span> <span data-ttu-id="237e2-159">Области поддерживают операции поиска tooperform hello возможности по элементам, помеченным тегами в этом регионе.</span><span class="sxs-lookup"><span data-stu-id="237e2-159">Regions support hello ability tooperform search operations on any tagged items in that region.</span></span> <span data-ttu-id="237e2-160">Все элементы области находятся в одном узле кластера кэша hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-160">All items within a region are located within a single node of hello cache cluster.</span></span> |<span data-ttu-id="237e2-161">Кэш Redis состоит из одного узла (если включена Redis кластера), hello понятие областей управляемой службы кэша не применяется.</span><span class="sxs-lookup"><span data-stu-id="237e2-161">A Redis cache consists of a single node (unless Redis cluster is enabled) so hello concept of Managed Cache Service regions does not apply.</span></span> <span data-ttu-id="237e2-162">Redis поддерживает поиск и операции с маской при получении ключей, поэтому описательные теги может быть внедрен в имена ключей hello и используемые элементы hello tooretrieve позже.</span><span class="sxs-lookup"><span data-stu-id="237e2-162">Redis supports searching and wildcard operations when retrieving keys so descriptive tags can be embedded within hello key names and used tooretrieve hello items later.</span></span> <span data-ttu-id="237e2-163">Пример добавления тегов с помощью Redis см. в статье [Добавление тегов с помощью Redis](http://stackify.com/implementing-cache-tagging-redis/).</span><span class="sxs-lookup"><span data-stu-id="237e2-163">For an example of implementing a tagging solution using Redis, see [Implementing cache tagging with Redis](http://stackify.com/implementing-cache-tagging-redis/).</span></span> |
| <span data-ttu-id="237e2-164">Сериализация</span><span class="sxs-lookup"><span data-stu-id="237e2-164">Serialization</span></span> |<span data-ttu-id="237e2-165">Управляемый кэш поддерживает NetDataContractSerializer, BinaryFormatter и использование пользовательских сериализаторов hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-165">Managed Cache supports NetDataContractSerializer, BinaryFormatter, and hello use of custom serializers.</span></span> <span data-ttu-id="237e2-166">по умолчанию Hello используется NetDataContractSerializer.</span><span class="sxs-lookup"><span data-stu-id="237e2-166">hello default is NetDataContractSerializer.</span></span> |<span data-ttu-id="237e2-167">Возлагается hello hello клиентских приложений tooserialize .NET объектов перед их размещением в кэш hello с выбором hello сериализатора hello вверх toohello разработчиком клиентского приложения.</span><span class="sxs-lookup"><span data-stu-id="237e2-167">It is hello responsibility of hello client application tooserialize .NET objects before placing them into hello cache, with hello choice of hello serializer up toohello client application developer.</span></span> <span data-ttu-id="237e2-168">Дополнительные сведения и пример кода см. в разделе [работа с объектами .NET в кэше hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="237e2-168">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span> |
| <span data-ttu-id="237e2-169">Эмулятор кэша</span><span class="sxs-lookup"><span data-stu-id="237e2-169">Cache emulator</span></span> |<span data-ttu-id="237e2-170">Управляемый кэш предоставляет локальный эмулятор кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-170">Managed Cache provides a local cache emulator.</span></span> |<span data-ttu-id="237e2-171">Кэш Azure Redis имеет эмулятор, но вы можете [локально запуск сборки MSOpenTech hello redis server.exe](cache-faq.md#cache-emulator) tooprovide интерфейс эмулятора.</span><span class="sxs-lookup"><span data-stu-id="237e2-171">Azure Redis Cache does not have an emulator, but you can [run hello MSOpenTech build of redis-server.exe locally](cache-faq.md#cache-emulator) tooprovide an emulator experience.</span></span> |

## <a name="choose-a-cache-offering"></a><span data-ttu-id="237e2-172">Выбор уровня кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-172">Choose a Cache Offering</span></span>
<span data-ttu-id="237e2-173">Кэш Microsoft Azure Redis доступна hello следующие уровни:</span><span class="sxs-lookup"><span data-stu-id="237e2-173">Microsoft Azure Redis Cache is available in hello following tiers:</span></span>

* <span data-ttu-id="237e2-174">**Basic** — один узел.</span><span class="sxs-lookup"><span data-stu-id="237e2-174">**Basic** – Single node.</span></span> <span data-ttu-id="237e2-175">Несколько размеров too53 Гбайт.</span><span class="sxs-lookup"><span data-stu-id="237e2-175">Multiple sizes up too53 GB.</span></span>
* <span data-ttu-id="237e2-176">**Стандартный** — два узла: основной и реплика.</span><span class="sxs-lookup"><span data-stu-id="237e2-176">**Standard** – Two-node Primary/Replica.</span></span> <span data-ttu-id="237e2-177">Несколько размеров too53 Гбайт.</span><span class="sxs-lookup"><span data-stu-id="237e2-177">Multiple sizes up too53 GB.</span></span> <span data-ttu-id="237e2-178">СОГЛАШЕНИЕ ОБ УРОВНЕ ОБСЛУЖИВАНИЯ 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="237e2-178">99.9% SLA.</span></span>
* <span data-ttu-id="237e2-179">**Premium** — двумя узлами первичный/реплика с вверх too10 сегментов.</span><span class="sxs-lookup"><span data-stu-id="237e2-179">**Premium** – Two-node Primary/Replica with up too10 shards.</span></span> <span data-ttu-id="237e2-180">Несколько размеров от 6 ГБ too530 ГБ.</span><span class="sxs-lookup"><span data-stu-id="237e2-180">Multiple sizes from 6 GB too530 GB.</span></span> <span data-ttu-id="237e2-181">Все функции уровня "Стандартный", а также дополнительные функции, включая поддержку [кластера Redis](cache-how-to-premium-clustering.md), [сохраняемости Redis](cache-how-to-premium-persistence.md) и [виртуальной сети Azure](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="237e2-181">All Standard tier features and more including support for [Redis cluster](cache-how-to-premium-clustering.md), [Redis persistence](cache-how-to-premium-persistence.md), and [Azure Virtual Network](cache-how-to-premium-vnet.md).</span></span> <span data-ttu-id="237e2-182">СОГЛАШЕНИЕ ОБ УРОВНЕ ОБСЛУЖИВАНИЯ 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="237e2-182">99.9% SLA.</span></span>

<span data-ttu-id="237e2-183">Каждый уровень отличается доступными возможностями и ценой.</span><span class="sxs-lookup"><span data-stu-id="237e2-183">Each tier differs in terms of features and pricing.</span></span> <span data-ttu-id="237e2-184">Hello функций рассматриваются далее в этом руководстве, а также дополнительные сведения о ценах см. в разделе [сведения о ценах — кэш](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="237e2-184">hello features are covered later in this guide, and for more information on pricing, see [Cache Pricing Details](https://azure.microsoft.com/pricing/details/cache/).</span></span>

<span data-ttu-id="237e2-185">Отправная точка при миграции — размер toopick hello, соответствующей hello размеру предыдущего кэша управляемой службы кэша, а затем масштабирование вверх или вниз в зависимости от требований приложения hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-185">A starting point for migration is toopick hello size that matches hello size of your previous Managed Cache Service cache, and then scale up or down depending on hello requirements of your application.</span></span> <span data-ttu-id="237e2-186">Дополнительные рекомендации по выбору hello подходящего предложения кэша Redis Azure см. в разделе [какие Redis размер кэша и использовать?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span><span class="sxs-lookup"><span data-stu-id="237e2-186">For more guidance on choosing hello right Azure Redis Cache offering, see [What Redis Cache offering and size should I use?](cache-faq.md#what-redis-cache-offering-and-size-should-i-use).</span></span>

## <a name="create-a-cache"></a><span data-ttu-id="237e2-187">Создание кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-187">Create a Cache</span></span>
[!INCLUDE [redis-cache-create](../../includes/redis-cache-create.md)]

## <a name="configure-hello-cache-clients"></a><span data-ttu-id="237e2-188">Настройка клиентов кэша hello</span><span class="sxs-lookup"><span data-stu-id="237e2-188">Configure hello Cache Clients</span></span>
<span data-ttu-id="237e2-189">После создания и настройки кэша hello hello следующим шагом является управляемой службы кэша конфигурации tooremove hello и добавьте hello Добавление конфигурации кэша Redis для Azure hello и ссылки, чтобы клиенты кэша можно получить доступ к кэшу hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-189">Once hello cache is created and configured, hello next step is tooremove hello Managed Cache Service configuration, and add hello add hello Azure Redis Cache configuration and references so that cache clients can access hello cache.</span></span>

* <span data-ttu-id="237e2-190">Удаление конфигурации службы управляемого кэша hello</span><span class="sxs-lookup"><span data-stu-id="237e2-190">Remove hello Managed Cache Service Configuration</span></span>
* <span data-ttu-id="237e2-191">Настройка клиента кэша с помощью пакета NuGet StackExchange.Redis hello</span><span class="sxs-lookup"><span data-stu-id="237e2-191">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>

### <a name="remove-hello-managed-cache-service-configuration"></a><span data-ttu-id="237e2-192">Удаление конфигурации службы управляемого кэша hello</span><span class="sxs-lookup"><span data-stu-id="237e2-192">Remove hello Managed Cache Service Configuration</span></span>
<span data-ttu-id="237e2-193">Прежде чем hello клиентских приложений можно настроить для кэша Azure Redis, существующая конфигурация службы кэша hello и ссылки на сборку необходимо удалить, удалив hello управляемые службы пакета NuGet кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-193">Before hello client applications can be configured for Azure Redis Cache, hello existing Managed Cache Service configuration and assembly references must be removed by uninstalling hello Managed Cache Service NuGet package.</span></span>

<span data-ttu-id="237e2-194">hello toouninstall пакета управляемого кэша NuGet службы щелкните правой кнопкой мыши проект клиента hello в **обозревателе решений** и выберите **управление пакетами NuGet**.</span><span class="sxs-lookup"><span data-stu-id="237e2-194">toouninstall hello Managed Cache Service NuGet package, right-click hello client project in **Solution Explorer** and choose **Manage NuGet Packages**.</span></span> <span data-ttu-id="237e2-195">Выберите hello **установленных пакетов** узла и тип W**indowsAzure.Caching** в hello поиск установленных пакетов поле.</span><span class="sxs-lookup"><span data-stu-id="237e2-195">Select hello **Installed packages** node, and type W**indowsAzure.Caching** into hello Search installed packages box.</span></span> <span data-ttu-id="237e2-196">Выберите **Windows** **кэш Azure** (или **Windows** **Azure Caching** в зависимости от версии пакета NuGet hello hello), нажмите кнопку  **Удалить**, а затем нажмите кнопку **закрыть**.</span><span class="sxs-lookup"><span data-stu-id="237e2-196">Select **Windows** **Azure Cache** (or **Windows** **Azure Caching** depending on hello version of hello NuGet package), click **Uninstall**, and then click **Close**.</span></span>

![Удаление пакета NuGet управляемой службы кэша Azure](./media/cache-migrate-to-redis/IC757666.jpg)

<span data-ttu-id="237e2-198">Удаление hello управляемые службы пакета NuGet кэша удаляет hello управляемой службы кэша сборки и записи управляемой службы кэша hello hello app.config или web.config клиентского приложения hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-198">Uninstalling hello Managed Cache Service NuGet package removes hello Managed Cache Service assemblies and hello Managed Cache Service entries in hello app.config or web.config of hello client application.</span></span> <span data-ttu-id="237e2-199">Так как некоторые настраиваемые параметры не могут быть удалены при удалении пакета NuGet hello, откройте файл web.config или app.config и убедитесь, что hello, следующие элементы не будут окончательно удалены.</span><span class="sxs-lookup"><span data-stu-id="237e2-199">Because some customized settings may not be removed when uninstalling hello NuGet package, open web.config or app.config and ensure that hello following elements are completely removed.</span></span>

<span data-ttu-id="237e2-200">Убедитесь, что hello `dataCacheClients` запись удаляется из hello `configSections` элемента.</span><span class="sxs-lookup"><span data-stu-id="237e2-200">Ensure that hello `dataCacheClients` entry is removed from hello `configSections` element.</span></span> <span data-ttu-id="237e2-201">Не удаляйте hello всего `configSections` элемент, просто удалите hello `dataCacheClients` записи, если он имеется.</span><span class="sxs-lookup"><span data-stu-id="237e2-201">Do not remove hello entire `configSections` element; just remove hello `dataCacheClients` entry, if it is present.</span></span>

```xml
<configSections>
  <!-- Existing sections omitted for clarity. -->
  <section name="dataCacheClients"type="Microsoft.ApplicationServer.Caching.DataCacheClientsSection, Microsoft.ApplicationServer.Caching.Core" allowLocation="true" allowDefinition="Everywhere"/>
</configSections>
```

<span data-ttu-id="237e2-202">Убедитесь, что hello `dataCacheClients` раздел удален.</span><span class="sxs-lookup"><span data-stu-id="237e2-202">Ensure that hello `dataCacheClients` section is removed.</span></span> <span data-ttu-id="237e2-203">Hello `dataCacheClients` раздел будет примерно toohello следующий пример.</span><span class="sxs-lookup"><span data-stu-id="237e2-203">hello `dataCacheClients` section will be similar toohello following example.</span></span>

```xml
<dataCacheClients>
  <dataCacheClientname="default">
    <!--toouse hello in-role flavor of Azure Cache, set identifier toobe hello cache cluster role name -->
    <!--toouse hello Azure Managed Cache Service, set identifier toobe hello endpoint of hello cache cluster -->
    <autoDiscoverisEnabled="true"identifier="[Cache role name or Service Endpoint]"/>

    <!--<localCache isEnabled="true" sync="TimeoutBased" objectCount="100000" ttlValue="300" />-->
    <!--Use this section toospecify security settings for connecting tooyour cache. This section is not required if your cache is hosted on a role that is a part of your cloud service. -->
    <!--<securityProperties mode="Message" sslEnabled="true">
      <messageSecurity authorizationInfo="[Authentication Key]" />
    </securityProperties>-->
  </dataCacheClient>
</dataCacheClients>
```

<span data-ttu-id="237e2-204">После удаления конфигурации hello управляемой службы кэша можно настроить клиент кэша hello, как описано в следующем разделе hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-204">Once hello Managed Cache Service configuration is removed, you can configure hello cache client as described in hello following section.</span></span>

### <a name="configure-a-cache-client-using-hello-stackexchangeredis-nuget-package"></a><span data-ttu-id="237e2-205">Настройка клиента кэша с помощью пакета NuGet StackExchange.Redis hello</span><span class="sxs-lookup"><span data-stu-id="237e2-205">Configure a cache client using hello StackExchange.Redis NuGet Package</span></span>
[!INCLUDE [redis-cache-configure](../../includes/redis-cache-configure-stackexchange-redis-nuget.md)]

## <a name="migrate-managed-cache-service-code"></a><span data-ttu-id="237e2-206">Перенос кода управляемой службы кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-206">Migrate Managed Cache Service code</span></span>
<span data-ttu-id="237e2-207">Hello API для клиента кэша StackExchange.Redis hello — примерно toohello службы управляемого кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-207">hello API for hello StackExchange.Redis cache client is similar toohello Managed Cache Service.</span></span> <span data-ttu-id="237e2-208">Этот раздел предоставляет обзор отличий hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-208">This section provides an overview of hello differences.</span></span>

### <a name="connect-toohello-cache-using-hello-connectionmultiplexer-class"></a><span data-ttu-id="237e2-209">Подключение с использованием класса ConnectionMultiplexer hello кэша toohello</span><span class="sxs-lookup"><span data-stu-id="237e2-209">Connect toohello cache using hello ConnectionMultiplexer class</span></span>
<span data-ttu-id="237e2-210">В управляемой службы кэша кэш подключений toohello обрабатывались hello `DataCacheFactory` и `DataCache` классы.</span><span class="sxs-lookup"><span data-stu-id="237e2-210">In Managed Cache Service, connections toohello cache were handled by hello `DataCacheFactory` and `DataCache` classes.</span></span> <span data-ttu-id="237e2-211">Кэш Azure Redis, эти подключения управляются hello `ConnectionMultiplexer` класса.</span><span class="sxs-lookup"><span data-stu-id="237e2-211">In Azure Redis Cache, these connections are managed by hello `ConnectionMultiplexer` class.</span></span>

<span data-ttu-id="237e2-212">Добавьте следующее hello с помощью инструкции toohello начало любого файла, из которого нужно tooaccess hello кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-212">Add hello following using statement toohello top of any file from which you want tooaccess hello cache.</span></span>

```c#
using StackExchange.Redis
```

<span data-ttu-id="237e2-213">Если это пространство имен не разрешается, убедитесь, что добавили hello пакета StackExchange.Redis NuGet, как описано в [Настройка клиентов кэша hello](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span><span class="sxs-lookup"><span data-stu-id="237e2-213">If this namespace doesn’t resolve, be sure that you have added hello StackExchange.Redis NuGet package as described in [Configure hello cache clients](cache-dotnet-how-to-use-azure-redis-cache.md#configure-the-cache-clients).</span></span>

> [!NOTE]
> <span data-ttu-id="237e2-214">Обратите внимание, что этот клиент StackExchange.Redis hello требуется платформа .NET Framework 4 или более поздней версии.</span><span class="sxs-lookup"><span data-stu-id="237e2-214">Note that hello StackExchange.Redis client requires .NET Framework 4 or higher.</span></span>
> 
> 

<span data-ttu-id="237e2-215">экземпляр кэша Redis для Azure tooan tooconnect, статический hello вызовов `ConnectionMultiplexer.Connect` метод и передайте его в конечную точку hello и ключ.</span><span class="sxs-lookup"><span data-stu-id="237e2-215">tooconnect tooan Azure Redis Cache instance, call hello static `ConnectionMultiplexer.Connect` method and pass in hello endpoint and key.</span></span> <span data-ttu-id="237e2-216">Один из подходов toosharing `ConnectionMultiplexer` toohave статическое свойство, которое возвращает подключенный экземпляр, аналогичные toohello следующий пример является экземпляр приложения.</span><span class="sxs-lookup"><span data-stu-id="237e2-216">One approach toosharing a `ConnectionMultiplexer` instance in your application is toohave a static property that returns a connected instance, similar toohello following example.</span></span> <span data-ttu-id="237e2-217">Это обеспечивает tooinitialize потокобезопасным способом только одного подключенного `ConnectionMultiplexer` экземпляра.</span><span class="sxs-lookup"><span data-stu-id="237e2-217">This provides a thread-safe way tooinitialize only a single connected `ConnectionMultiplexer` instance.</span></span> <span data-ttu-id="237e2-218">В этом примере `abortConnect` является набор toofalse, это означает, что hello вызов будет успешным, даже если кэш toohello подключение не установлено.</span><span class="sxs-lookup"><span data-stu-id="237e2-218">In this example `abortConnect` is set toofalse, which means that hello call will succeed even if a connection toohello cache is not established.</span></span> <span data-ttu-id="237e2-219">Одна важная особенность `ConnectionMultiplexer` — что он будет автоматически восстанавливать подключение toohello кэша после hello проблемы в сети или по другим причинам не будут разрешены.</span><span class="sxs-lookup"><span data-stu-id="237e2-219">One key feature of `ConnectionMultiplexer` is that it will automatically restore connectivity toohello cache once hello network issue or other causes are resolved.</span></span>

```c#
private static Lazy<ConnectionMultiplexer> lazyConnection = new Lazy<ConnectionMultiplexer>(() =>
{
    return ConnectionMultiplexer.Connect("contoso5.redis.cache.windows.net,abortConnect=false,ssl=true,password=...");
});

public static ConnectionMultiplexer Connection
{
    get
    {
        return lazyConnection.Value;
    }
}
```

<span data-ttu-id="237e2-220">Hello конечную точку кэша, ключи и порты можно получить из hello **кэша Redis** колонку для экземпляра кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-220">hello cache endpoint, keys, and ports can be obtained from hello **Redis Cache** blade for your cache instance.</span></span> <span data-ttu-id="237e2-221">Дополнительные сведения см. в разделе [Свойства кэша Redis](cache-configure.md#properties).</span><span class="sxs-lookup"><span data-stu-id="237e2-221">For more information, see [Redis Cache properties](cache-configure.md#properties).</span></span>

<span data-ttu-id="237e2-222">После установления соединения hello вернуть базу данных кэша Redis ссылки toohello, вызывающему Привет `ConnectionMultiplexer.GetDatabase` метод.</span><span class="sxs-lookup"><span data-stu-id="237e2-222">Once hello connection is established, return a reference toohello Redis cache database by calling hello `ConnectionMultiplexer.GetDatabase` method.</span></span> <span data-ttu-id="237e2-223">Hello объект, возвращенный hello `GetDatabase` метод является облегченным сквозным объектом и не обязательно toobe хранятся.</span><span class="sxs-lookup"><span data-stu-id="237e2-223">hello object returned from hello `GetDatabase` method is a lightweight pass-through object and does not need toobe stored.</span></span>

```c#
IDatabase cache = Connection.GetDatabase();

// Perform cache operations using hello cache object...
// Simple put of integral data types into hello cache
cache.StringSet("key1", "value");
cache.StringSet("key2", 25);

// Simple get of data types from hello cache
string key1 = cache.StringGet("key1");
int key2 = (int)cache.StringGet("key2");
```

<span data-ttu-id="237e2-224">Клиент StackExchange.Redis Hello использует hello `RedisKey` и `RedisValue` типов для доступа к элементам и сохранения в кэше hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-224">hello StackExchange.Redis client uses hello `RedisKey` and `RedisValue` types for accessing and storing items in hello cache.</span></span> <span data-ttu-id="237e2-225">Эти типы сопоставляются с большинством несложных типов языков, например со строками, и часто не используются напрямую.</span><span class="sxs-lookup"><span data-stu-id="237e2-225">These types map onto most primitive language types, including string, and often are not used directly.</span></span> <span data-ttu-id="237e2-226">Redis hello базовая разновидность значений Redis и строки может содержать несколько типов данных, включая сериализованные двоичные потоки, и пока не может непосредственно использовать тип hello, будет использовать методы, содержащие `String` в имени hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-226">Redis Strings are hello most basic kind of Redis value, and can contain many types of data, including serialized binary streams, and while you may not use hello type directly, you will use methods that contain `String` in hello name.</span></span> <span data-ttu-id="237e2-227">Большинство примитивных типов данных хранения и получения элементов из кэша hello, с использованием hello `StringSet` и `StringGet` методов, если в кэше hello хранятся коллекции или другие типы данных Redis.</span><span class="sxs-lookup"><span data-stu-id="237e2-227">For most primitive data types you store and retrieve items from hello cache using hello `StringSet` and `StringGet` methods, unless you are storing collections or other Redis data types in hello cache.</span></span> 

<span data-ttu-id="237e2-228">`StringSet`и `StringGet` являются очень похожа toohello службы управляемого кэша `Put` и `Get` методов с одним важным отличием: перед установкой и получением объекта .NET в кэш hello вы сначала сериализовать его.</span><span class="sxs-lookup"><span data-stu-id="237e2-228">`StringSet` and `StringGet` are very similar toohello Managed Cache Service `Put` and `Get` methods, with one major difference being that before you set and get a .NET object into hello cache you must serialize it first.</span></span> 

<span data-ttu-id="237e2-229">При вызове `StringGet`, возвращается, если hello объект существует, и если нет, возвращается значение null.</span><span class="sxs-lookup"><span data-stu-id="237e2-229">When calling `StringGet`, if hello object exists, it is returned, and if it does not, null is returned.</span></span> <span data-ttu-id="237e2-230">В этом случае можно получить значение hello из hello необходимый источник данных и сохранить его в кэше hello для последующего использования.</span><span class="sxs-lookup"><span data-stu-id="237e2-230">In this case you can retrieve hello value from hello desired data source and store it in hello cache for subsequent use.</span></span> <span data-ttu-id="237e2-231">Это известно как шаблон hello отдельно от кэша.</span><span class="sxs-lookup"><span data-stu-id="237e2-231">This is known as hello cache-aside pattern.</span></span>

<span data-ttu-id="237e2-232">срок годности hello toospecify элемента в кэше hello, используйте hello `TimeSpan` параметр `StringSet`.</span><span class="sxs-lookup"><span data-stu-id="237e2-232">toospecify hello expiration of an item in hello cache, use hello `TimeSpan` parameter of `StringSet`.</span></span>

```c#
cache.StringSet("key1", "value1", TimeSpan.FromMinutes(90));
```

<span data-ttu-id="237e2-233">Кэш Redis для Azure может работать с объектами .NET, а также несложными типами данных, но прежде чем объект .NET можно будет кэшировать, он должен быть сериализован.</span><span class="sxs-lookup"><span data-stu-id="237e2-233">Azure Redis Cache can work with .NET objects as well as primitive data types, but before a .NET object can be cached it must be serialized.</span></span> <span data-ttu-id="237e2-234">Это hello отвечает разработчик приложения hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-234">This is hello responsibility of hello application developer.</span></span> <span data-ttu-id="237e2-235">Это обеспечивает гибкость hello разработчика по выбору hello hello сериализатор.</span><span class="sxs-lookup"><span data-stu-id="237e2-235">This gives hello developer flexibility in hello choice of hello serializer.</span></span> <span data-ttu-id="237e2-236">Дополнительные сведения и пример кода см. в разделе [работа с объектами .NET в кэше hello](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span><span class="sxs-lookup"><span data-stu-id="237e2-236">For more information and sample code, see [Work with .NET objects in hello cache](cache-dotnet-how-to-use-azure-redis-cache.md#work-with-net-objects-in-the-cache).</span></span>

## <a name="migrate-aspnet-session-state-and-output-caching-tooazure-redis-cache"></a><span data-ttu-id="237e2-237">Перенос состояний сеансов ASP.NET и выводом tooAzure кэша Redis</span><span class="sxs-lookup"><span data-stu-id="237e2-237">Migrate ASP.NET Session State and Output caching tooAzure Redis Cache</span></span>
<span data-ttu-id="237e2-238">В кэше Redis для Azure есть поставщики состояния сеанса ASP.NET и кэширования вывода страниц.</span><span class="sxs-lookup"><span data-stu-id="237e2-238">Azure Redis Cache has providers for both ASP.NET Session State and Page Output caching.</span></span> <span data-ttu-id="237e2-239">Удалите приложение, использующее версии управляемой службы кэша hello эти поставщики toomigrate hello существующие разделы из файла web.config, а затем настройте hello кэша Redis для Azure версии поставщиков hello.</span><span class="sxs-lookup"><span data-stu-id="237e2-239">toomigrate your application that uses hello Managed Cache Service versions of these providers, first remove hello existing sections from your web.config, and then configure hello Azure Redis Cache versions of hello providers.</span></span> <span data-ttu-id="237e2-240">Инструкции по использованию hello поставщики ASP.NET кэша Redis Azure, см. в разделе [поставщика состояний сеансов ASP.NET для кэша Azure Redis](cache-aspnet-session-state-provider.md) и [поставщика кэша вывода ASP.NET для кэша Azure Redis](cache-aspnet-output-cache-provider.md).</span><span class="sxs-lookup"><span data-stu-id="237e2-240">For instructions on using hello Azure Redis Cache ASP.NET providers, see [ASP.NET Session State Provider for Azure Redis Cache](cache-aspnet-session-state-provider.md) and [ASP.NET Output Cache Provider for Azure Redis Cache](cache-aspnet-output-cache-provider.md).</span></span>

## <a name="next-steps"></a><span data-ttu-id="237e2-241">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="237e2-241">Next steps</span></span>
<span data-ttu-id="237e2-242">Просмотр hello [документации кэш Azure Redis](https://azure.microsoft.com/documentation/services/cache/) учебники, примеры, видео и других.</span><span class="sxs-lookup"><span data-stu-id="237e2-242">Explore hello [Azure Redis Cache documentation](https://azure.microsoft.com/documentation/services/cache/) for tutorials, samples, videos, and more.</span></span>

