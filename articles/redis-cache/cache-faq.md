---
title: "Кэш Redis для Azure. Вопросы и ответы | Документация Майкрософт"
description: "Ответы на часто задаваемые вопросы, шаблоны и рекомендации для кэша Redis для Azure."
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: c2c52b7d-b2d1-433a-b635-c20180e5cab2
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/27/2017
ms.author: sdanie
ms.openlocfilehash: dcabdb789489af1996276d8838afde410473738d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="azure-redis-cache-faq"></a><span data-ttu-id="abf58-103">Кэш Redis для Azure. Вопросы и ответы</span><span class="sxs-lookup"><span data-stu-id="abf58-103">Azure Redis Cache FAQ</span></span>
<span data-ttu-id="abf58-104">Ответы на часто задаваемые вопросы, шаблоны и рекомендации для кэша Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-104">Learn the answers to common questions, patterns, and best practices for Azure Redis Cache.</span></span>

## <a name="what-if-my-question-isnt-answered-here"></a><span data-ttu-id="abf58-105">Мне не удалось найти ответ на свой вопрос. Что делать?</span><span class="sxs-lookup"><span data-stu-id="abf58-105">What if my question isn't answered here?</span></span>
<span data-ttu-id="abf58-106">Если вашего вопроса нет в списке, сообщите нам об этом, и мы поможем найти ответ.</span><span class="sxs-lookup"><span data-stu-id="abf58-106">If your question isn't listed here, let us know and we'll help you find an answer.</span></span>

* <span data-ttu-id="abf58-107">Можно опубликовать вопрос в комментариях в конце раздела часто задаваемых вопросов и обсудить данную статью с командой разработчиков кэша Azure и другими участниками сообщества.</span><span class="sxs-lookup"><span data-stu-id="abf58-107">You can post a question in the comments at the end of this FAQ and engage with the Azure Cache team and other community members about this article.</span></span>
* <span data-ttu-id="abf58-108">Чтобы охватить большую аудиторию, можно опубликовать вопрос на [форуме MSDN по кэшу Azure](https://social.msdn.microsoft.com/forums/azure/home?forum=azurecache) и обсудить его с командой разработчиков кэша Azure и другими участниками сообщества.</span><span class="sxs-lookup"><span data-stu-id="abf58-108">To reach a wider audience, you can post a question on the [Azure Cache MSDN Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=azurecache) and engage with the Azure Cache team and other members of the community.</span></span>
* <span data-ttu-id="abf58-109">Если вы хотите сделать запрос на функцию, то можете отправить свои запросы и предложения на [форуме пользователей кэша Redis для Azure](https://feedback.azure.com/forums/169382-cache).</span><span class="sxs-lookup"><span data-stu-id="abf58-109">If you want to make a feature request, you can submit your requests and ideas to [Azure Redis Cache User Voice](https://feedback.azure.com/forums/169382-cache).</span></span>
* <span data-ttu-id="abf58-110">Можно также [отправить нам внешний отзыв о кэше Azure](mailto:azurecache@microsoft.com)по электронной почте.</span><span class="sxs-lookup"><span data-stu-id="abf58-110">You can also send an email to us at [Azure Cache External Feedback](mailto:azurecache@microsoft.com).</span></span>

## <a name="azure-redis-cache-basics"></a><span data-ttu-id="abf58-111">Основные сведения о кэше Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="abf58-111">Azure Redis Cache basics</span></span>
<span data-ttu-id="abf58-112">Часто задаваемые вопросы в этом разделе охватывают некоторые основные сведения о кэше Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-112">The FAQs in this section cover some of the basics of Azure Redis Cache.</span></span>

* [<span data-ttu-id="abf58-113">Описание кэша Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="abf58-113">What is Azure Redis Cache?</span></span>](#what-is-azure-redis-cache)
* [<span data-ttu-id="abf58-114">Как приступить к работе с кэшем Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-114">How can I get started with Azure Redis Cache?</span></span>](#how-can-i-get-started-with-azure-redis-cache)

<span data-ttu-id="abf58-115">Ниже приведены часто задаваемые вопросы об основных понятиях и использовании кэша Redis для Azure, ответы на которые даны в других разделах часто задаваемых вопросов.</span><span class="sxs-lookup"><span data-stu-id="abf58-115">The following FAQs cover basic concepts and questions about Azure Redis Cache and are answered in one of the other FAQ sections.</span></span>

* [<span data-ttu-id="abf58-116">Какое предложение и размер кэша Redis мне следует использовать?</span><span class="sxs-lookup"><span data-stu-id="abf58-116">What Redis Cache offering and size should I use?</span></span>](#what-redis-cache-offering-and-size-should-i-use)
* [<span data-ttu-id="abf58-117">Какие клиенты кэша Redis можно использовать?</span><span class="sxs-lookup"><span data-stu-id="abf58-117">What Redis cache clients can I use?</span></span>](#what-redis-cache-clients-can-i-use)
* [<span data-ttu-id="abf58-118">Существует локальный эмулятор кэша Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-118">Is there a local emulator for Azure Redis Cache?</span></span>](#is-there-a-local-emulator-for-azure-redis-cache)
* [<span data-ttu-id="abf58-119">Как отслеживать работоспособность и производительность моего кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-119">How do I monitor the health and performance of my cache?</span></span>](#how-do-i-monitor-the-health-and-performance-of-my-cache)

## <a name="planning-faqs"></a><span data-ttu-id="abf58-120">Часто задаваемые вопросы о планировании</span><span class="sxs-lookup"><span data-stu-id="abf58-120">Planning FAQs</span></span>
* [<span data-ttu-id="abf58-121">Какое предложение и размер кэша Redis мне следует использовать?</span><span class="sxs-lookup"><span data-stu-id="abf58-121">What Redis Cache offering and size should I use?</span></span>](#what-redis-cache-offering-and-size-should-i-use)
* [<span data-ttu-id="abf58-122">Производительность кэша Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="abf58-122">Azure Redis Cache performance</span></span>](#azure-redis-cache-performance)
* [<span data-ttu-id="abf58-123">В каком регионе следует размещать мой кэш?</span><span class="sxs-lookup"><span data-stu-id="abf58-123">In what region should I locate my cache?</span></span>](#in-what-region-should-i-locate-my-cache)
* [<span data-ttu-id="abf58-124">Как выставляются счета за использование кэша Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-124">How am I billed for Azure Redis Cache?</span></span>](#how-am-i-billed-for-azure-redis-cache)
* [<span data-ttu-id="abf58-125">Могу ли я использовать кэш Redis для Azure с облаком Azure для государственных организаций, Azure China или Microsoft Azure для Германии?</span><span class="sxs-lookup"><span data-stu-id="abf58-125">Can I use Azure Redis Cache with Azure Government Cloud, Azure China Cloud, or Microsoft Azure Germany?</span></span>](#can-i-use-azure-redis-cache-with-azure-government-cloud-azure-china-cloud-or-microsoft-azure-germany)

## <a name="development-faqs"></a><span data-ttu-id="abf58-126">Часто задаваемые вопросы о разработке</span><span class="sxs-lookup"><span data-stu-id="abf58-126">Development FAQs</span></span>
* [<span data-ttu-id="abf58-127">Что делают параметры конфигурации StackExchange.Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-127">What do the StackExchange.Redis configuration options do?</span></span>](#what-do-the-stackexchangeredis-configuration-options-do)
* [<span data-ttu-id="abf58-128">Какие клиенты кэша Redis можно использовать?</span><span class="sxs-lookup"><span data-stu-id="abf58-128">What Redis cache clients can I use?</span></span>](#what-redis-cache-clients-can-i-use)
* [<span data-ttu-id="abf58-129">Существует локальный эмулятор кэша Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-129">Is there a local emulator for Azure Redis Cache?</span></span>](#is-there-a-local-emulator-for-azure-redis-cache)
* [<span data-ttu-id="abf58-130">Как выполнять команды Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-130">How can I run Redis commands?</span></span>](#how-can-i-run-redis-commands)
* [<span data-ttu-id="abf58-131">Почему в кэше Redis для Azure отсутствует ссылка на библиотеку классов MSDN, как в некоторых других службах Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-131">Why doesn't Azure Redis Cache have an MSDN class library reference like some of the other Azure services?</span></span>](#why-doesnt-azure-redis-cache-have-an-msdn-class-library-reference-like-some-of-the-other-azure-services)
* [<span data-ttu-id="abf58-132">Можно ли использовать кэш Redis для Azure как кэш сеанса PHP?</span><span class="sxs-lookup"><span data-stu-id="abf58-132">Can I use Azure Redis Cache as a PHP session cache?</span></span>](#can-i-use-azure-redis-cache-as-a-php-session-cache)
* [<span data-ttu-id="abf58-133">Что такое базы данных Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-133">What are Redis databases?</span></span>](#what-are-redis-databases)

## <a name="security-faqs"></a><span data-ttu-id="abf58-134">Часто задаваемые вопросы о безопасности</span><span class="sxs-lookup"><span data-stu-id="abf58-134">Security FAQs</span></span>
* [<span data-ttu-id="abf58-135">Когда следует включать порт, не являющийся портом SSL, для подключения к Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-135">When should I enable the non-SSL port for connecting to Redis?</span></span>](#when-should-i-enable-the-non-ssl-port-for-connecting-to-redis)

## <a name="production-faqs"></a><span data-ttu-id="abf58-136">Часто задаваемые вопросы о рабочей среде</span><span class="sxs-lookup"><span data-stu-id="abf58-136">Production FAQs</span></span>
* [<span data-ttu-id="abf58-137">Какие рекомендации следует учитывать для рабочей среды?</span><span class="sxs-lookup"><span data-stu-id="abf58-137">What are some production best practices?</span></span>](#what-are-some-production-best-practices)
* [<span data-ttu-id="abf58-138">Какие факторы следует учитывать при использовании общих команд Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-138">What are some of the considerations when using common Redis commands?</span></span>](#what-are-some-of-the-considerations-when-using-common-redis-commands)
* [<span data-ttu-id="abf58-139">Как измерить и протестировать производительность моего кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-139">How can I benchmark and test the performance of my cache?</span></span>](#how-can-i-benchmark-and-test-the-performance-of-my-cache)
* [<span data-ttu-id="abf58-140">Важные сведения о росте пула потоков ThreadPool</span><span class="sxs-lookup"><span data-stu-id="abf58-140">Important details about ThreadPool growth</span></span>](#important-details-about-threadpool-growth)
* [<span data-ttu-id="abf58-141">Включение сборки мусора сервера для увеличения пропускной способности на стороне клиента при использовании StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="abf58-141">Enable server GC to get more throughput on the client when using StackExchange.Redis</span></span>](#enable-server-gc-to-get-more-throughput-on-the-client-when-using-stackexchangeredis)
* [<span data-ttu-id="abf58-142">Рекомендации по производительности для подключений</span><span class="sxs-lookup"><span data-stu-id="abf58-142">Performance considerations around connections</span></span>](#performance-considerations-around-connections)

## <a name="monitoring-and-troubleshooting-faqs"></a><span data-ttu-id="abf58-143">Часто задаваемые вопросы о мониторинге и устранении неполадок</span><span class="sxs-lookup"><span data-stu-id="abf58-143">Monitoring and troubleshooting FAQs</span></span>
<span data-ttu-id="abf58-144">Вопросы, обсуждаемые в этом разделе, посвящены общим проблемам мониторинга и устранения неполадок.</span><span class="sxs-lookup"><span data-stu-id="abf58-144">The FAQs in this section cover common monitoring and troubleshooting questions.</span></span> <span data-ttu-id="abf58-145">Дополнительные сведения о мониторинге и устранении неполадок, связанных с экземплярами кэша Redis для Azure, см. в статьях [Как отслеживать кэш Redis для Azure](cache-how-to-monitor.md) и [Способы устранения проблем с кэшем Redis для Azure](cache-how-to-troubleshoot.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-145">For more information about monitoring and troubleshooting your Azure Redis Cache instances, see [How to monitor Azure Redis Cache](cache-how-to-monitor.md) and [How to troubleshoot Azure Redis Cache](cache-how-to-troubleshoot.md).</span></span>

* [<span data-ttu-id="abf58-146">Как отслеживать работоспособность и производительность моего кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-146">How do I monitor the health and performance of my cache?</span></span>](#how-do-i-monitor-the-health-and-performance-of-my-cache)
* [<span data-ttu-id="abf58-147">Почему я наблюдаю простои?</span><span class="sxs-lookup"><span data-stu-id="abf58-147">Why am I seeing timeouts?</span></span>](#why-am-i-seeing-timeouts)
* [<span data-ttu-id="abf58-148">Почему мой клиент был отключен от кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-148">Why was my client disconnected from the cache?</span></span>](#why-was-my-client-disconnected-from-the-cache)

## <a name="prior-cache-offering-faqs"></a><span data-ttu-id="abf58-149">Часто задаваемые вопросы о предыдущих предложениях кэша</span><span class="sxs-lookup"><span data-stu-id="abf58-149">Prior Cache offering FAQs</span></span>
* [<span data-ttu-id="abf58-150">Какой кэш Azure подходит мне?</span><span class="sxs-lookup"><span data-stu-id="abf58-150">Which Azure Cache offering is right for me?</span></span>](#which-azure-cache-offering-is-right-for-me)

### <a name="what-is-azure-redis-cache"></a><span data-ttu-id="abf58-151">Описание кэша Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="abf58-151">What is Azure Redis Cache?</span></span>
<span data-ttu-id="abf58-152">Кэш Redis для Azure основан на популярном [кэше с открытым кодом Redis](http://redis.io).</span><span class="sxs-lookup"><span data-stu-id="abf58-152">Azure Redis Cache is based on the popular open-source [Redis cache](http://redis.io).</span></span> <span data-ttu-id="abf58-153">Он предоставляет вам доступ к безопасному выделенному кэшу Redis, управляемому корпорацией Майкрософт и доступному из любых приложений в Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-153">It gives you access to a secure, dedicated Redis cache, managed by Microsoft, and accessible from any application within Azure.</span></span> <span data-ttu-id="abf58-154">Более подробный обзор представлен на странице [кэша Redis для Azure](https://azure.microsoft.com/services/cache/) на сайте Azure.com.</span><span class="sxs-lookup"><span data-stu-id="abf58-154">For a more detailed overview, see the [Azure Redis Cache](https://azure.microsoft.com/services/cache/) product page on Azure.com.</span></span>

### <a name="how-can-i-get-started-with-azure-redis-cache"></a><span data-ttu-id="abf58-155">Как приступить к работе с кэшем Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-155">How can I get started with Azure Redis Cache?</span></span>
<span data-ttu-id="abf58-156">Существует несколько способов приступить к работе с кэшем Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-156">There are several ways you can get started with Azure Redis Cache.</span></span>

* <span data-ttu-id="abf58-157">Вы можете ознакомиться с одним из наших руководств, доступных для [.NET](cache-dotnet-how-to-use-azure-redis-cache.md), [ASP.NET](cache-web-app-howto.md), [Java](cache-java-get-started.md), [Node.js](cache-nodejs-get-started.md) и [Python](cache-python-get-started.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-157">You can check out one of our tutorials available for [.NET](cache-dotnet-how-to-use-azure-redis-cache.md), [ASP.NET](cache-web-app-howto.md), [Java](cache-java-get-started.md), [Node.js](cache-nodejs-get-started.md), and [Python](cache-python-get-started.md).</span></span>
* <span data-ttu-id="abf58-158">Вы можете посмотреть, [как создавать высокопроизводительные приложения с помощью кэша Redis для Microsoft Azure](https://azure.microsoft.com/documentation/videos/how-to-build-high-performance-apps-using-microsoft-azure-cache/).</span><span class="sxs-lookup"><span data-stu-id="abf58-158">You can watch [How to Build High-Performance Apps Using Microsoft Azure Redis Cache](https://azure.microsoft.com/documentation/videos/how-to-build-high-performance-apps-using-microsoft-azure-cache/).</span></span>
* <span data-ttu-id="abf58-159">Можно ознакомиться с документацией по клиентам, которые поддерживают язык, используемый при разработке проекта, чтобы узнать, как использовать Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-159">You can check out the client documentation for the clients that match the development language of your project to see how to use Redis.</span></span> <span data-ttu-id="abf58-160">Существует множество клиентов Redis, которые можно использовать с кэшем Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-160">There are many Redis clients that can be used with Azure Redis Cache.</span></span> <span data-ttu-id="abf58-161">Список клиентов Redis доступен на странице [http://redis.io/clients](http://redis.io/clients).</span><span class="sxs-lookup"><span data-stu-id="abf58-161">For a list of Redis clients, see [http://redis.io/clients](http://redis.io/clients).</span></span>

<span data-ttu-id="abf58-162">Если у вас нет учетной записи Azure, то вы можете сделать следующее.</span><span class="sxs-lookup"><span data-stu-id="abf58-162">If you don't already have an Azure account, you can:</span></span>

* <span data-ttu-id="abf58-163">[Открыть бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=redis_cache_hero).</span><span class="sxs-lookup"><span data-stu-id="abf58-163">[Open an Azure account for free](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=redis_cache_hero).</span></span> <span data-ttu-id="abf58-164">Вы получаете кредиты, которые можно использовать, чтобы попробовать платные службы Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-164">You get credits that can be used to try out paid Azure services.</span></span> <span data-ttu-id="abf58-165">После израсходования кредитов ваша учетная запись не исчезнет. Вы сможете использовать ее для работы с бесплатными службами и функциями Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-165">Even after the credits are used up, you can keep the account and use free Azure services and features.</span></span>
* <span data-ttu-id="abf58-166">[Активировать преимущества подписчика Visual Studio](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/?WT.mc_id=redis_cache_hero).</span><span class="sxs-lookup"><span data-stu-id="abf58-166">[Activate Visual Studio subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/?WT.mc_id=redis_cache_hero).</span></span> <span data-ttu-id="abf58-167">Ваша подписка MSDN каждый месяц приносит вам кредиты, которые можно использовать для оплаты использования служб Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-167">Your MSDN subscription gives you credits every month that you can use for paid Azure services.</span></span>

<a name="cache-size"></a>

### <a name="what-redis-cache-offering-and-size-should-i-use"></a><span data-ttu-id="abf58-168">Какое предложение и размер кэша Redis мне следует использовать?</span><span class="sxs-lookup"><span data-stu-id="abf58-168">What Redis Cache offering and size should I use?</span></span>
<span data-ttu-id="abf58-169">Все предложения кэша Redis для Azure обеспечивают разные уровни параметров **размера**, **пропускной способности**, **высокой доступности** и **соглашения об уровне обслуживания**.</span><span class="sxs-lookup"><span data-stu-id="abf58-169">Each Azure Redis Cache offering provides different levels of **size**, **bandwidth**, **high availability**, and **SLA** options.</span></span>

<span data-ttu-id="abf58-170">Ниже приведены рекомендации по выбору предложения кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-170">The following are considerations for choosing a Cache offering.</span></span>

* <span data-ttu-id="abf58-171">**Память.** Уровни Базовый и Стандартный предлагают от 250 МБ до 53 ГБ.</span><span class="sxs-lookup"><span data-stu-id="abf58-171">**Memory**: The Basic and Standard tiers offer 250 MB – 53 GB.</span></span> <span data-ttu-id="abf58-172">В категории "Премиум" предлагается до 530 ГБ.</span><span class="sxs-lookup"><span data-stu-id="abf58-172">The Premium tier offers up to 530 GB.</span></span> <span data-ttu-id="abf58-173">Подробные сведения см. на странице [Цены на кэш Redis для Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="abf58-173">For more information, see [Azure Redis Cache Pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>
* <span data-ttu-id="abf58-174">**Производительность сети**: если у вас есть рабочая нагрузка, которая требует высокой пропускной способности, то уровень "Премиум" предоставит большую пропускную способность по сравнению с уровнями "Стандартный" или "Базовый".</span><span class="sxs-lookup"><span data-stu-id="abf58-174">**Network Performance**: If you have a workload that requires high throughput, the Premium tier offers more bandwidth compared to Standard or Basic.</span></span> <span data-ttu-id="abf58-175">Также в рамках каждого уровня пропускная способность для кэшей большего размера выше из-за виртуальной машины, на которой размещен кэш.</span><span class="sxs-lookup"><span data-stu-id="abf58-175">Also within each tier, larger size caches have more bandwidth because of the underlying VM that hosts the cache.</span></span> <span data-ttu-id="abf58-176">Дополнительные сведения приведены в [таблице ниже](#cache-performance).</span><span class="sxs-lookup"><span data-stu-id="abf58-176">See the [following table](#cache-performance) for more information.</span></span>
* <span data-ttu-id="abf58-177">**Пропускная способность**: уровень Премиум предлагает максимальную доступную пропускную способность.</span><span class="sxs-lookup"><span data-stu-id="abf58-177">**Throughput**: The Premium tier offers the maximum available throughput.</span></span> <span data-ttu-id="abf58-178">При достижении сервером кэширования или клиентом пределов пропускной способности на стороне клиента могут возникнуть простои.</span><span class="sxs-lookup"><span data-stu-id="abf58-178">If the cache server or client reaches the bandwidth limits, you may receive timeouts on the client side.</span></span> <span data-ttu-id="abf58-179">Дополнительные сведения приведены в таблице ниже.</span><span class="sxs-lookup"><span data-stu-id="abf58-179">For more information, see the following table.</span></span>
* <span data-ttu-id="abf58-180">**Высокая доступность и SLA**: кэш Redis для Azure гарантирует, что кэш уровня "Стандартный" или "Премиум" будет доступен не менее 99,9 % времени.</span><span class="sxs-lookup"><span data-stu-id="abf58-180">**High Availability/SLA**: Azure Redis Cache guarantees that a Standard/Premium cache is available at least 99.9% of the time.</span></span> <span data-ttu-id="abf58-181">Дополнительные сведения о соглашении об уровне обслуживания см. на странице [Цены на кэш Redis для Azure](https://azure.microsoft.com/support/legal/sla/cache/v1_0/).</span><span class="sxs-lookup"><span data-stu-id="abf58-181">To learn more about our SLA, see [Azure Redis Cache Pricing](https://azure.microsoft.com/support/legal/sla/cache/v1_0/).</span></span> <span data-ttu-id="abf58-182">Соглашение об уровне обслуживания распространяется только на подключения к конечным точкам кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-182">The SLA only covers connectivity to the Cache endpoints.</span></span> <span data-ttu-id="abf58-183">Соглашение об уровне обслуживания не включает защиту от потери данных.</span><span class="sxs-lookup"><span data-stu-id="abf58-183">The SLA does not cover protection from data loss.</span></span> <span data-ttu-id="abf58-184">Для повышения устойчивости к потере данных рекомендуется использовать функцию постоянного хранения данных Redis уровня Премиум.</span><span class="sxs-lookup"><span data-stu-id="abf58-184">We recommend using the Redis data persistence feature in the Premium tier to increase resiliency against data loss.</span></span>
* <span data-ttu-id="abf58-185">**Постоянное хранение данных Redis.** Уровень Премиум позволяет постоянно хранить данные кэша в учетной записи хранения Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-185">**Redis Data Persistence**: The Premium tier allows you to persist the cache data in an Azure Storage account.</span></span> <span data-ttu-id="abf58-186">В кэше уровня "Базовый" или "Стандартный" все данные хранятся только в памяти.</span><span class="sxs-lookup"><span data-stu-id="abf58-186">In a Basic/Standard cache, all the data is stored only in memory.</span></span> <span data-ttu-id="abf58-187">При возникновении проблем с базовой инфраструктурой это может привести к потере данных.</span><span class="sxs-lookup"><span data-stu-id="abf58-187">If there are underlying infrastructure issues there can be potential data loss.</span></span> <span data-ttu-id="abf58-188">Для повышения устойчивости к потере данных рекомендуется использовать функцию постоянного хранения данных Redis уровня Премиум.</span><span class="sxs-lookup"><span data-stu-id="abf58-188">We recommend using the Redis data persistence feature in the Premium tier to increase resiliency against data loss.</span></span> <span data-ttu-id="abf58-189">Кэш Redis для Azure предлагает варианты постоянного хранения данных RDB и AOF (ожидается в ближайшее время).</span><span class="sxs-lookup"><span data-stu-id="abf58-189">Azure Redis Cache offers RDB and AOF (coming soon) options in Redis persistence.</span></span> <span data-ttu-id="abf58-190">Дополнительные сведения см. в статье [Настройка постоянного хранения для кэша Redis для Azure уровня Премиум](cache-how-to-premium-persistence.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-190">For more information, see [How to configure persistence for a Premium Azure Redis Cache](cache-how-to-premium-persistence.md).</span></span>
* <span data-ttu-id="abf58-191">**Кластер Redis** используется для создания кэша размером более 53 ГБ или сегментации данных по нескольким узлам Redis. Более того, можно воспользоваться кластеризацией Redis, которая доступна на уровне Премиум.</span><span class="sxs-lookup"><span data-stu-id="abf58-191">**Redis Cluster**: To create caches larger than 53 GB, or to shard data across multiple Redis nodes, you can use Redis clustering, which is available in the Premium tier.</span></span> <span data-ttu-id="abf58-192">Каждый узел состоит из пары кэшей (основной кэш и реплика) для обеспечения высокой доступности.</span><span class="sxs-lookup"><span data-stu-id="abf58-192">Each node consists of a primary/replica cache pair for high availability.</span></span> <span data-ttu-id="abf58-193">Дополнительные сведения см. в статье [Настройка кластеризации для кэша Redis для Azure уровня Премиум](cache-how-to-premium-clustering.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-193">For more information, see [How to configure clustering for a Premium Azure Redis Cache](cache-how-to-premium-clustering.md).</span></span>
* <span data-ttu-id="abf58-194">**Улучшенная безопасность и сетевая изоляция.** Развертывание виртуальной сети Azure обеспечивает улучшенную безопасность и изоляцию для кэша Redis для Azure, а также подсети, политики контроля доступа и другие функции для дальнейшего ограничения доступа.</span><span class="sxs-lookup"><span data-stu-id="abf58-194">**Enhanced security and network isolation**: Azure Virtual Network (VNET) deployment provides enhanced security and isolation for your Azure Redis Cache, as well as subnets, access control policies, and other features to further restrict access.</span></span> <span data-ttu-id="abf58-195">Дополнительные сведения см. в статье [Настройка поддержки виртуальной сети для кэша Redis для Azure уровня Премиум](cache-how-to-premium-vnet.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-195">For more information, see [How to configure Virtual Network support for a Premium Azure Redis Cache](cache-how-to-premium-vnet.md).</span></span>
* <span data-ttu-id="abf58-196">**Настройка Redis**: на уровнях "Стандартный" и "Премиум" вы можете настроить уведомления пространства ключей в Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-196">**Configure Redis**: In both the Standard and Premium tiers, you can configure Redis for Keyspace notifications.</span></span>
* <span data-ttu-id="abf58-197">**Максимальное число подключений клиентов**: уровень Премиум обеспечивает максимальное число клиентов, которые могут подключаться к Redis, причем чем больше размер кэша, тем больше число подключений.</span><span class="sxs-lookup"><span data-stu-id="abf58-197">**Maximum number of client connections**: The Premium tier offers the maximum number of clients that can connect to Redis, with a higher number of connections for larger sized caches.</span></span> <span data-ttu-id="abf58-198">Дополнительные сведения см. на странице [цены на кэш Redis для Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="abf58-198">For more information, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span>
* <span data-ttu-id="abf58-199">**Выделенное ядро для сервера Redis**: на уровне "Премиум" для всех размеров кэша для Redis выделяется отдельное ядро.</span><span class="sxs-lookup"><span data-stu-id="abf58-199">**Dedicated Core for Redis Server**: In the Premium tier, all cache sizes have a dedicated core for Redis.</span></span> <span data-ttu-id="abf58-200">На уровнях "Базовый" и "Стандартный" отдельное ядро выделяется для размера C1 и выше.</span><span class="sxs-lookup"><span data-stu-id="abf58-200">In the Basic/Standard tiers, the C1 size and above have a dedicated core for Redis server.</span></span>
* <span data-ttu-id="abf58-201">**Redis является однопоточным** , поэтому наличие более двух ядер не предоставляет дополнительных преимуществ по сравнению с двумя ядрами, но виртуальные машины большего размера обычно имеют большую пропускную способность, чем виртуальные машины меньшего размера.</span><span class="sxs-lookup"><span data-stu-id="abf58-201">**Redis is single-threaded** so having more than two cores does not provide additional benefit over having just two cores, but larger VM sizes typically have more bandwidth than smaller sizes.</span></span> <span data-ttu-id="abf58-202">При достижении сервером кэширования или клиентом пределов пропускной способности на стороне клиента возникают простои.</span><span class="sxs-lookup"><span data-stu-id="abf58-202">If the cache server or client reaches the bandwidth limits, then you receive timeouts on the client side.</span></span>
* <span data-ttu-id="abf58-203">**Повышение производительности**: кэши на уровне "Премиум" разворачиваются на оборудовании с более быстрыми процессорами и обеспечивают повышенную производительность по сравнению с уровнями "Базовый" и "Стандартный".</span><span class="sxs-lookup"><span data-stu-id="abf58-203">**Performance improvements**: Caches in the Premium tier are deployed on hardware that has faster processors, giving better performance compared to the Basic or Standard tier.</span></span> <span data-ttu-id="abf58-204">Кэши уровня Премиум обладают более высокой пропускной способностью и меньшей задержкой.</span><span class="sxs-lookup"><span data-stu-id="abf58-204">Premium tier Caches have higher throughput and lower latencies.</span></span>

<a name="cache-performance"></a>

### <a name="azure-redis-cache-performance"></a><span data-ttu-id="abf58-205">Производительность кэша Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="abf58-205">Azure Redis Cache performance</span></span>
<span data-ttu-id="abf58-206">В следующей таблице показаны максимальные значения пропускной способности, наблюдаемые при тестировании разных размеров кэша уровней Стандартный или Премиум с помощью `redis-benchmark.exe` из виртуальной машины Iaas для конечной точки кэша Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-206">The following table shows the maximum bandwidth values observed while testing various sizes of Standard and Premium caches using `redis-benchmark.exe` from an Iaas VM against the Azure Redis Cache endpoint.</span></span> 

>[!NOTE] 
><span data-ttu-id="abf58-207">Эти значения не гарантируются и для них не предусмотрено соглашение об уровне обслуживания, однако они должны быть типичными.</span><span class="sxs-lookup"><span data-stu-id="abf58-207">These values are not guaranteed and there is no SLA for these numbers, but should be typical.</span></span> <span data-ttu-id="abf58-208">Чтобы определить подходящий объем кэша для вашего приложения, вам следует загрузить его тестирование.</span><span class="sxs-lookup"><span data-stu-id="abf58-208">You should load test your own application to determine the right cache size for your application.</span></span>
>
>

<span data-ttu-id="abf58-209">Из этой таблицы можно сделать следующие выводы:</span><span class="sxs-lookup"><span data-stu-id="abf58-209">From this table, we can draw the following conclusions:</span></span>

* <span data-ttu-id="abf58-210">Пропускная способность кэшей равного размера для уровня "Премиум" выше, чем для уровня "Стандартный".</span><span class="sxs-lookup"><span data-stu-id="abf58-210">Throughput for the caches that are the same size is higher in the Premium tier as compared to the Standard tier.</span></span> <span data-ttu-id="abf58-211">Например, для кэша размером в 6 ГБ пропускная способность P1 составляет 180 тыс. запросов в секунду. А пропускная способность C3 — 49 тыс. запросов в секунду.</span><span class="sxs-lookup"><span data-stu-id="abf58-211">For example, with a 6 GB Cache, throughput of P1 is 180,000 RPS as compared to 49,000 for C3.</span></span>
* <span data-ttu-id="abf58-212">С кластеризацией Redis пропускная способность линейно увеличивается по мере увеличения числа сегментов (узлов) в кластере.</span><span class="sxs-lookup"><span data-stu-id="abf58-212">With Redis clustering, throughput increases linearly as you increase the number of shards (nodes) in the cluster.</span></span> <span data-ttu-id="abf58-213">Например, если создать кластер P4 из 10 сегментов, доступная пропускная способность будет составлять 400 тыс. * 10 тыс. = 4 млн запросов в секунду.</span><span class="sxs-lookup"><span data-stu-id="abf58-213">For example, if you create a P4 cluster of 10 shards, then the available throughput is 400,000 *10 = 4 Million RPS.</span></span>
* <span data-ttu-id="abf58-214">Пропускная способность для ключей большего размера для уровня "Премиум" выше, чем для уровня "Стандартный".</span><span class="sxs-lookup"><span data-stu-id="abf58-214">Throughput for bigger key sizes is higher in the Premium tier as compared to the Standard Tier.</span></span>

| <span data-ttu-id="abf58-215">Ценовой уровень</span><span class="sxs-lookup"><span data-stu-id="abf58-215">Pricing tier</span></span> | <span data-ttu-id="abf58-216">Размер</span><span class="sxs-lookup"><span data-stu-id="abf58-216">Size</span></span> | <span data-ttu-id="abf58-217">Ядра ЦП</span><span class="sxs-lookup"><span data-stu-id="abf58-217">CPU cores</span></span> | <span data-ttu-id="abf58-218">Доступная пропускная способность</span><span class="sxs-lookup"><span data-stu-id="abf58-218">Available bandwidth</span></span> | <span data-ttu-id="abf58-219">Единица измерения — 1 КБ</span><span class="sxs-lookup"><span data-stu-id="abf58-219">1 KB value size</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="abf58-220">**Размеры кэша уровня Стандартный**</span><span class="sxs-lookup"><span data-stu-id="abf58-220">**Standard cache sizes**</span></span> | | |<span data-ttu-id="abf58-221">**Мегабит в секунду (Мбит/с) или Мегабайт в секунду (МБ/с)**</span><span class="sxs-lookup"><span data-stu-id="abf58-221">**Megabits per sec (Mb/s) / Megabytes per sec (MB/s)**</span></span> |<span data-ttu-id="abf58-222">**Запросов в секунду**</span><span class="sxs-lookup"><span data-stu-id="abf58-222">**Requests per second (RPS)**</span></span> |
| <span data-ttu-id="abf58-223">C0</span><span class="sxs-lookup"><span data-stu-id="abf58-223">C0</span></span> |<span data-ttu-id="abf58-224">250 МБ</span><span class="sxs-lookup"><span data-stu-id="abf58-224">250 MB</span></span> |<span data-ttu-id="abf58-225">Совмещаемая блокировка</span><span class="sxs-lookup"><span data-stu-id="abf58-225">Shared</span></span> |<span data-ttu-id="abf58-226">5 / 0,625</span><span class="sxs-lookup"><span data-stu-id="abf58-226">5 / 0.625</span></span> |<span data-ttu-id="abf58-227">600</span><span class="sxs-lookup"><span data-stu-id="abf58-227">600</span></span> |
| <span data-ttu-id="abf58-228">C1</span><span class="sxs-lookup"><span data-stu-id="abf58-228">C1</span></span> |<span data-ttu-id="abf58-229">1 GB</span><span class="sxs-lookup"><span data-stu-id="abf58-229">1 GB</span></span> |<span data-ttu-id="abf58-230">1</span><span class="sxs-lookup"><span data-stu-id="abf58-230">1</span></span> |<span data-ttu-id="abf58-231">100 / 12,5</span><span class="sxs-lookup"><span data-stu-id="abf58-231">100 / 12.5</span></span> |<span data-ttu-id="abf58-232">12,200</span><span class="sxs-lookup"><span data-stu-id="abf58-232">12,200</span></span> |
| <span data-ttu-id="abf58-233">C2</span><span class="sxs-lookup"><span data-stu-id="abf58-233">C2</span></span> |<span data-ttu-id="abf58-234">2,5 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-234">2.5 GB</span></span> |<span data-ttu-id="abf58-235">2</span><span class="sxs-lookup"><span data-stu-id="abf58-235">2</span></span> |<span data-ttu-id="abf58-236">200 / 25</span><span class="sxs-lookup"><span data-stu-id="abf58-236">200 / 25</span></span> |<span data-ttu-id="abf58-237">24,000</span><span class="sxs-lookup"><span data-stu-id="abf58-237">24,000</span></span> |
| <span data-ttu-id="abf58-238">C3</span><span class="sxs-lookup"><span data-stu-id="abf58-238">C3</span></span> |<span data-ttu-id="abf58-239">6 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-239">6 GB</span></span> |<span data-ttu-id="abf58-240">4.</span><span class="sxs-lookup"><span data-stu-id="abf58-240">4</span></span> |<span data-ttu-id="abf58-241">400 / 50</span><span class="sxs-lookup"><span data-stu-id="abf58-241">400 / 50</span></span> |<span data-ttu-id="abf58-242">49,000</span><span class="sxs-lookup"><span data-stu-id="abf58-242">49,000</span></span> |
| <span data-ttu-id="abf58-243">C4</span><span class="sxs-lookup"><span data-stu-id="abf58-243">C4</span></span> |<span data-ttu-id="abf58-244">13 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-244">13 GB</span></span> |<span data-ttu-id="abf58-245">2</span><span class="sxs-lookup"><span data-stu-id="abf58-245">2</span></span> |<span data-ttu-id="abf58-246">500 / 62,5</span><span class="sxs-lookup"><span data-stu-id="abf58-246">500 / 62.5</span></span> |<span data-ttu-id="abf58-247">61,000</span><span class="sxs-lookup"><span data-stu-id="abf58-247">61,000</span></span> |
| <span data-ttu-id="abf58-248">C5</span><span class="sxs-lookup"><span data-stu-id="abf58-248">C5</span></span> |<span data-ttu-id="abf58-249">26 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-249">26 GB</span></span> |<span data-ttu-id="abf58-250">4</span><span class="sxs-lookup"><span data-stu-id="abf58-250">4</span></span> |<span data-ttu-id="abf58-251">1,000 / 125</span><span class="sxs-lookup"><span data-stu-id="abf58-251">1,000 / 125</span></span> |<span data-ttu-id="abf58-252">115,000</span><span class="sxs-lookup"><span data-stu-id="abf58-252">115,000</span></span> |
| <span data-ttu-id="abf58-253">C6</span><span class="sxs-lookup"><span data-stu-id="abf58-253">C6</span></span> |<span data-ttu-id="abf58-254">53 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-254">53 GB</span></span> |<span data-ttu-id="abf58-255">8</span><span class="sxs-lookup"><span data-stu-id="abf58-255">8</span></span> |<span data-ttu-id="abf58-256">2,000 / 250</span><span class="sxs-lookup"><span data-stu-id="abf58-256">2,000 / 250</span></span> |<span data-ttu-id="abf58-257">150 000</span><span class="sxs-lookup"><span data-stu-id="abf58-257">150,000</span></span> |
| <span data-ttu-id="abf58-258">**Размеры кэша уровня Премиум**</span><span class="sxs-lookup"><span data-stu-id="abf58-258">**Premium cache sizes**</span></span> | |<span data-ttu-id="abf58-259">**Число ядер ЦП на сегмент**</span><span class="sxs-lookup"><span data-stu-id="abf58-259">**CPU cores per shard**</span></span> | <span data-ttu-id="abf58-260">**Мегабит в секунду (Мбит/с) или Мегабайт в секунду (МБ/с)**</span><span class="sxs-lookup"><span data-stu-id="abf58-260">**Megabits per sec (Mb/s) / Megabytes per sec (MB/s)**</span></span> |<span data-ttu-id="abf58-261">**Запросов в секунду для каждого сегмента**</span><span class="sxs-lookup"><span data-stu-id="abf58-261">**Requests per second (RPS), per shard**</span></span> |
| <span data-ttu-id="abf58-262">P1</span><span class="sxs-lookup"><span data-stu-id="abf58-262">P1</span></span> |<span data-ttu-id="abf58-263">6 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-263">6 GB</span></span> |<span data-ttu-id="abf58-264">2</span><span class="sxs-lookup"><span data-stu-id="abf58-264">2</span></span> |<span data-ttu-id="abf58-265">1,500 / 187.5</span><span class="sxs-lookup"><span data-stu-id="abf58-265">1,500 / 187.5</span></span> |<span data-ttu-id="abf58-266">180,000</span><span class="sxs-lookup"><span data-stu-id="abf58-266">180,000</span></span> |
| <span data-ttu-id="abf58-267">P2</span><span class="sxs-lookup"><span data-stu-id="abf58-267">P2</span></span> |<span data-ttu-id="abf58-268">13 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-268">13 GB</span></span> |<span data-ttu-id="abf58-269">4</span><span class="sxs-lookup"><span data-stu-id="abf58-269">4</span></span> |<span data-ttu-id="abf58-270">3,000 / 375</span><span class="sxs-lookup"><span data-stu-id="abf58-270">3,000 / 375</span></span> |<span data-ttu-id="abf58-271">360,000</span><span class="sxs-lookup"><span data-stu-id="abf58-271">360,000</span></span> |
| <span data-ttu-id="abf58-272">P3</span><span class="sxs-lookup"><span data-stu-id="abf58-272">P3</span></span> |<span data-ttu-id="abf58-273">26 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-273">26 GB</span></span> |<span data-ttu-id="abf58-274">4.</span><span class="sxs-lookup"><span data-stu-id="abf58-274">4</span></span> |<span data-ttu-id="abf58-275">3,000 / 375</span><span class="sxs-lookup"><span data-stu-id="abf58-275">3,000 / 375</span></span> |<span data-ttu-id="abf58-276">360,000</span><span class="sxs-lookup"><span data-stu-id="abf58-276">360,000</span></span> |
| <span data-ttu-id="abf58-277">P4</span><span class="sxs-lookup"><span data-stu-id="abf58-277">P4</span></span> |<span data-ttu-id="abf58-278">53 ГБ</span><span class="sxs-lookup"><span data-stu-id="abf58-278">53 GB</span></span> |<span data-ttu-id="abf58-279">8</span><span class="sxs-lookup"><span data-stu-id="abf58-279">8</span></span> |<span data-ttu-id="abf58-280">6,000 / 750</span><span class="sxs-lookup"><span data-stu-id="abf58-280">6,000 / 750</span></span> |<span data-ttu-id="abf58-281">400 000</span><span class="sxs-lookup"><span data-stu-id="abf58-281">400,000</span></span> |

<span data-ttu-id="abf58-282">Инструкции по скачиванию инструментов Redis, таких как `redis-benchmark.exe`, см. в разделе [Как выполнять команды Redis?](#cache-commands).</span><span class="sxs-lookup"><span data-stu-id="abf58-282">For instructions on downloading the Redis tools such as `redis-benchmark.exe`, see the [How can I run Redis commands?](#cache-commands) section.</span></span>

<a name="cache-region"></a>

### <a name="in-what-region-should-i-locate-my-cache"></a><span data-ttu-id="abf58-283">В каком регионе следует размещать мой кэш?</span><span class="sxs-lookup"><span data-stu-id="abf58-283">In what region should I locate my cache?</span></span>
<span data-ttu-id="abf58-284">Для лучшей производительности и минимальной задержки размещайте свой кэш Redis для Azure в одном регионе с вашим кэшируемым клиентским приложением.</span><span class="sxs-lookup"><span data-stu-id="abf58-284">For best performance and lowest latency, locate your Azure Redis Cache in the same region as your cache client application.</span></span>

<a name="cache-billing"></a>

### <a name="how-am-i-billed-for-azure-redis-cache"></a><span data-ttu-id="abf58-285">Как выставляются счета за использование кэша Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-285">How am I billed for Azure Redis Cache?</span></span>
<span data-ttu-id="abf58-286">Цены на кэш Redis для Azure можно просмотреть [здесь](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="abf58-286">Azure Redis Cache pricing is [here](https://azure.microsoft.com/pricing/details/cache/).</span></span> <span data-ttu-id="abf58-287">На странице указаны расценки в виде почасового тарифа.</span><span class="sxs-lookup"><span data-stu-id="abf58-287">The pricing page lists pricing as an hourly rate.</span></span> <span data-ttu-id="abf58-288">Выставляемые счета за использование кэшей рассчитываются на поминутной основе. Они охватывают интервал времени между созданием кэшей и их удалением.</span><span class="sxs-lookup"><span data-stu-id="abf58-288">Caches are billed on a per-minute basis from the time that the cache is created until the time that a cache is deleted.</span></span> <span data-ttu-id="abf58-289">Остановить или приостановить выставление счета за использование кэша нельзя.</span><span class="sxs-lookup"><span data-stu-id="abf58-289">There is no option for stopping or pausing the billing of a cache.</span></span>

### <a name="can-i-use-azure-redis-cache-with-azure-government-cloud-azure-china-cloud-or-microsoft-azure-germany"></a><span data-ttu-id="abf58-290">Могу ли я использовать кэш Redis для Azure с облаком Azure для государственных организаций, Azure China или Microsoft Azure для Германии?</span><span class="sxs-lookup"><span data-stu-id="abf58-290">Can I use Azure Redis Cache with Azure Government Cloud, Azure China Cloud, or Microsoft Azure Germany?</span></span>
<span data-ttu-id="abf58-291">Да, кэш Redis для Azure доступен в облаках Azure для государственных организаций, Azure China и Microsoft Azure для Германии.</span><span class="sxs-lookup"><span data-stu-id="abf58-291">Yes, Azure Redis Cache is available in Azure Government Cloud, Azure China Cloud, and Microsoft Azure Germany.</span></span> <span data-ttu-id="abf58-292">URL-адреса для доступа к кэшу Redis для Azure и для управления им в этих облаках различны в отличие от общедоступного облака Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-292">The URLs for accessing and managing Azure Redis Cache are different in these clouds compared with Azure Public Cloud.</span></span> 

| <span data-ttu-id="abf58-293">Облако</span><span class="sxs-lookup"><span data-stu-id="abf58-293">Cloud</span></span>   | <span data-ttu-id="abf58-294">DNS-суффикс для кэша Redis</span><span class="sxs-lookup"><span data-stu-id="abf58-294">Dns Suffix for Redis</span></span>            |
|---------|---------------------------------|
| <span data-ttu-id="abf58-295">Общедоступные</span><span class="sxs-lookup"><span data-stu-id="abf58-295">Public</span></span>  | <span data-ttu-id="abf58-296">*.redis.cache.windows.net</span><span class="sxs-lookup"><span data-stu-id="abf58-296">*.redis.cache.windows.net</span></span>       |
| <span data-ttu-id="abf58-297">Штат в США (для обслуживания государственных организаций США)</span><span class="sxs-lookup"><span data-stu-id="abf58-297">US Gov</span></span>  | <span data-ttu-id="abf58-298">*.redis.cache.usgovcloudapi.net</span><span class="sxs-lookup"><span data-stu-id="abf58-298">*.redis.cache.usgovcloudapi.net</span></span> |
| <span data-ttu-id="abf58-299">Германия</span><span class="sxs-lookup"><span data-stu-id="abf58-299">Germany</span></span> | <span data-ttu-id="abf58-300">*.redis.cache.cloudapi.de</span><span class="sxs-lookup"><span data-stu-id="abf58-300">*.redis.cache.cloudapi.de</span></span>       |
| <span data-ttu-id="abf58-301">Китай</span><span class="sxs-lookup"><span data-stu-id="abf58-301">China</span></span>   | <span data-ttu-id="abf58-302">*.redis.cache.chinacloudapi.cn</span><span class="sxs-lookup"><span data-stu-id="abf58-302">*.redis.cache.chinacloudapi.cn</span></span>  |

<span data-ttu-id="abf58-303">Дополнительные сведения о рекомендациях по использованию кэша Redis для Azure с другими облаками см. по следующим ссылкам.</span><span class="sxs-lookup"><span data-stu-id="abf58-303">For more information on considerations when using Azure Redis Cache with other clouds, see the following links.</span></span>

- <span data-ttu-id="abf58-304">[Azure Government Databases — Azure Redis Cache](../azure-government/documentation-government-services-database.md#azure-redis-cache) (Базы данных Azure для государственных организаций — кэш Redis для Azure)</span><span class="sxs-lookup"><span data-stu-id="abf58-304">[Azure Government Databases - Azure Redis Cache](../azure-government/documentation-government-services-database.md#azure-redis-cache)</span></span>
- <span data-ttu-id="abf58-305">[Azure China Cloud — Azure Redis Cache](https://www.azure.cn/documentation/services/redis-cache/) (Облако Azure China — кэш Redis для Azure)</span><span class="sxs-lookup"><span data-stu-id="abf58-305">[Azure China Cloud - Azure Redis Cache](https://www.azure.cn/documentation/services/redis-cache/)</span></span>
- [<span data-ttu-id="abf58-306">Microsoft Azure для Германии</span><span class="sxs-lookup"><span data-stu-id="abf58-306">Microsoft Azure Germany</span></span>](https://azure.microsoft.com/overview/clouds/germany/)

<span data-ttu-id="abf58-307">Сведения об использовании кэша Redis для Azure с помощью PowerShell в облаке Azure для государственных организаций, Azure China или Microsoft Azure для Германии см. в статье [Управление кэшем Redis для Azure с использованием Azure PowerShell (разделы о подключении к разным облакам)](cache-howto-manage-redis-cache-powershell.md#how-to-connect-to-other-clouds).</span><span class="sxs-lookup"><span data-stu-id="abf58-307">For information on using Azure Redis Cache with PowerShell in Azure Government Cloud, Azure China Cloud, and Microsoft Azure Germany, see [How to connect to other clouds - Azure Redis Cache PowerShell](cache-howto-manage-redis-cache-powershell.md#how-to-connect-to-other-clouds).</span></span>

<a name="cache-configuration"></a>

### <a name="what-do-the-stackexchangeredis-configuration-options-do"></a><span data-ttu-id="abf58-308">Что делают параметры конфигурации StackExchange.Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-308">What do the StackExchange.Redis configuration options do?</span></span>
<span data-ttu-id="abf58-309">StackExchange.Redis имеет много параметров.</span><span class="sxs-lookup"><span data-stu-id="abf58-309">StackExchange.Redis has many options.</span></span> <span data-ttu-id="abf58-310">В этом разделе рассказывается о некоторых распространенных параметрах.</span><span class="sxs-lookup"><span data-stu-id="abf58-310">This section talks about some of the common settings.</span></span> <span data-ttu-id="abf58-311">Более подробные сведения о параметрах StackExchange.Redis см. в статье [StackExchange.Redis configuration](https://stackexchange.github.io/StackExchange.Redis/Configuration) (Конфигурация StackExchange.Redis).</span><span class="sxs-lookup"><span data-stu-id="abf58-311">For more detailed information about StackExchange.Redis options, see [StackExchange.Redis configuration](https://stackexchange.github.io/StackExchange.Redis/Configuration).</span></span>

| <span data-ttu-id="abf58-312">Параметры конфигурации</span><span class="sxs-lookup"><span data-stu-id="abf58-312">ConfigurationOptions</span></span> | <span data-ttu-id="abf58-313">Описание</span><span class="sxs-lookup"><span data-stu-id="abf58-313">Description</span></span> | <span data-ttu-id="abf58-314">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="abf58-314">Recommendation</span></span> |
| --- | --- | --- |
| <span data-ttu-id="abf58-315">AbortOnConnectFail</span><span class="sxs-lookup"><span data-stu-id="abf58-315">AbortOnConnectFail</span></span> |<span data-ttu-id="abf58-316">Если задано значение true, соединение не будет восстанавливаться после сбоя сети.</span><span class="sxs-lookup"><span data-stu-id="abf58-316">When set to true, the connection will not reconnect after a network failure.</span></span> |<span data-ttu-id="abf58-317">Установите значение false и позвольте StackExchange.Redis автоматически восстанавливать соединение.</span><span class="sxs-lookup"><span data-stu-id="abf58-317">Set to false and let StackExchange.Redis reconnect automatically.</span></span> |
| <span data-ttu-id="abf58-318">ConnectRetry</span><span class="sxs-lookup"><span data-stu-id="abf58-318">ConnectRetry</span></span> |<span data-ttu-id="abf58-319">Количество повторных попыток подключения во время первоначального подключения.</span><span class="sxs-lookup"><span data-stu-id="abf58-319">The number of times to repeat connection attempts during initial connect.</span></span> |<span data-ttu-id="abf58-320">Руководствуйтесь следующими примечаниями.</span><span class="sxs-lookup"><span data-stu-id="abf58-320">See the following notes for guidance.</span></span> |
| <span data-ttu-id="abf58-321">ConnectTimeout</span><span class="sxs-lookup"><span data-stu-id="abf58-321">ConnectTimeout</span></span> |<span data-ttu-id="abf58-322">Время ожидания в миллисекундах для операций подключения.</span><span class="sxs-lookup"><span data-stu-id="abf58-322">Timeout in ms for connect operations.</span></span> |<span data-ttu-id="abf58-323">Руководствуйтесь следующими примечаниями.</span><span class="sxs-lookup"><span data-stu-id="abf58-323">See the following notes for guidance.</span></span> |

<span data-ttu-id="abf58-324">Обычно подходят значения по умолчанию для клиента.</span><span class="sxs-lookup"><span data-stu-id="abf58-324">Usually the default values of the client are sufficient.</span></span> <span data-ttu-id="abf58-325">Вы можете точнее настроить параметры в зависимости от своей рабочей нагрузки.</span><span class="sxs-lookup"><span data-stu-id="abf58-325">You can fine-tune the options based on your workload.</span></span>

* <span data-ttu-id="abf58-326">**Повторы**</span><span class="sxs-lookup"><span data-stu-id="abf58-326">**Retries**</span></span>
  * <span data-ttu-id="abf58-327">Общая рекомендация для ConnectRetry и ConnectTimeout — быстрое прекращение и повторение попытки.</span><span class="sxs-lookup"><span data-stu-id="abf58-327">For ConnectRetry and ConnectTimeout, the general guidance is to fail fast and retry again.</span></span> <span data-ttu-id="abf58-328">Эта рекомендация основана на вашей рабочей нагрузке и на том, сколько времени в среднем занимает в вашем клиенте выдача команды Redis и получение ответа.</span><span class="sxs-lookup"><span data-stu-id="abf58-328">This guidance is based on your workload and how much time on average it takes for your client to issue a Redis command and receive a response.</span></span>
  * <span data-ttu-id="abf58-329">Вам не нужно проверять состояние и подключаться самостоятельно — StackExchange.Redis переподключается автоматически.</span><span class="sxs-lookup"><span data-stu-id="abf58-329">Let StackExchange.Redis automatically reconnect instead of checking connection status and reconnecting yourself.</span></span> <span data-ttu-id="abf58-330">**Избегайте использования свойства ConnectionMultiplexer.IsConnected**.</span><span class="sxs-lookup"><span data-stu-id="abf58-330">**Avoid using the ConnectionMultiplexer.IsConnected property**.</span></span>
  * <span data-ttu-id="abf58-331">Снежный ком — иногда возникает проблема, когда вы повторяете снова и снова, это нарастает и никогда не исправляется.</span><span class="sxs-lookup"><span data-stu-id="abf58-331">Snowballing - sometimes you may run into an issue where you are retrying and the retries snowball and never recovers.</span></span> <span data-ttu-id="abf58-332">При возникновении снежного кома следует использовать алгоритм экспоненциальной отсрочки повтора, как описано в [общих рекомендациях по повторным попыткам](../best-practices-retry-general.md), опубликованных группой Microsoft Patterns & Practices.</span><span class="sxs-lookup"><span data-stu-id="abf58-332">If snowballing occurs, you should consider using an exponential backoff retry algorithm as described in [Retry general guidance](../best-practices-retry-general.md) published by the Microsoft Patterns & Practices group.</span></span>
* <span data-ttu-id="abf58-333">**Значения времени ожидания**</span><span class="sxs-lookup"><span data-stu-id="abf58-333">**Timeout values**</span></span>
  * <span data-ttu-id="abf58-334">Исследуйте вашу рабочую нагрузку и установите соответствующие значения.</span><span class="sxs-lookup"><span data-stu-id="abf58-334">Consider your workload and set the values accordingly.</span></span> <span data-ttu-id="abf58-335">Если вы храните большие значения, установите более высокое значение времени ожидания.</span><span class="sxs-lookup"><span data-stu-id="abf58-335">If you are storing large values, set the timeout to a higher value.</span></span>
  * <span data-ttu-id="abf58-336">Установите для `AbortOnConnectFail` значение false и позвольте StackExchange.Redis восстанавливать подключение.</span><span class="sxs-lookup"><span data-stu-id="abf58-336">Set `AbortOnConnectFail` to false and let StackExchange.Redis reconnect for you.</span></span>
  * <span data-ttu-id="abf58-337">Используйте один экземпляр ConnectionMultiplexer для приложения.</span><span class="sxs-lookup"><span data-stu-id="abf58-337">Use a single ConnectionMultiplexer instance for the application.</span></span> <span data-ttu-id="abf58-338">Вы можете применять LazyConnection, чтобы создать один экземпляр, который возвращается свойством Connection, как показано в разделе [Подключение к кэшу с использованием класса ConnectionMultiplexer](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).</span><span class="sxs-lookup"><span data-stu-id="abf58-338">You can use a LazyConnection to create a single instance that is returned by a Connection property, as shown in [Connect to the cache using the ConnectionMultiplexer class](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).</span></span>
  * <span data-ttu-id="abf58-339">Задайте в свойстве `ConnectionMultiplexer.ClientName` уникальное имя экземпляра приложения в целях диагностики.</span><span class="sxs-lookup"><span data-stu-id="abf58-339">Set the `ConnectionMultiplexer.ClientName` property to an app instance unique name for diagnostic purposes.</span></span>
  * <span data-ttu-id="abf58-340">Используйте несколько экземпляров `ConnectionMultiplexer` для пользовательских рабочих нагрузок.</span><span class="sxs-lookup"><span data-stu-id="abf58-340">Use multiple `ConnectionMultiplexer` instances for custom workloads.</span></span>
      * <span data-ttu-id="abf58-341">Вы можете следовать этой модели, если в приложении имеется меняющаяся нагрузка.</span><span class="sxs-lookup"><span data-stu-id="abf58-341">You can follow this model if you have varying load in your application.</span></span> <span data-ttu-id="abf58-342">Например:</span><span class="sxs-lookup"><span data-stu-id="abf58-342">For example:</span></span>
      * <span data-ttu-id="abf58-343">можно иметь один мультиплексор для работы с большими ключами;</span><span class="sxs-lookup"><span data-stu-id="abf58-343">You can have one multiplexer for dealing with large keys.</span></span>
      * <span data-ttu-id="abf58-344">можно иметь один мультиплексор для работы с небольшими ключами;</span><span class="sxs-lookup"><span data-stu-id="abf58-344">You can have one multiplexer for dealing with small keys.</span></span>
      * <span data-ttu-id="abf58-345">можно задать разные значения времени ожидания подключения и логики повторов для каждого используемого ConnectionMultiplexer.</span><span class="sxs-lookup"><span data-stu-id="abf58-345">You can set different values for connection timeouts and retry logic for each ConnectionMultiplexer that you use.</span></span>
      * <span data-ttu-id="abf58-346">Установите свойство `ClientName` в каждом мультиплексоре для облегчения диагностики.</span><span class="sxs-lookup"><span data-stu-id="abf58-346">Set the `ClientName` property on each multiplexer to help with diagnostics.</span></span>
      * <span data-ttu-id="abf58-347">Эта рекомендация может обеспечить более оптимизированную задержку на каждый класс `ConnectionMultiplexer`.</span><span class="sxs-lookup"><span data-stu-id="abf58-347">This guidance may lead to more streamlined latency per `ConnectionMultiplexer`.</span></span>

### <a name="what-redis-cache-clients-can-i-use"></a><span data-ttu-id="abf58-348">Какие клиенты кэша Redis можно использовать?</span><span class="sxs-lookup"><span data-stu-id="abf58-348">What Redis cache clients can I use?</span></span>
<span data-ttu-id="abf58-349">Одним из основных преимуществ Redis является то, что существует множество клиентов, поддерживающих множество языков разработки.</span><span class="sxs-lookup"><span data-stu-id="abf58-349">One of the great things about Redis is that there are many clients supporting many different development languages.</span></span> <span data-ttu-id="abf58-350">Текущий список клиентов Redis см. [здесь](http://redis.io/clients).</span><span class="sxs-lookup"><span data-stu-id="abf58-350">For a current list of clients, see [Redis clients](http://redis.io/clients).</span></span> <span data-ttu-id="abf58-351">Руководство для нескольких различных языков и клиентов см. в статье [Как использовать кэш Redis для Azure](cache-dotnet-how-to-use-azure-redis-cache.md). Выберите нужный язык, используя переключатель языков в верхней части статьи.</span><span class="sxs-lookup"><span data-stu-id="abf58-351">For tutorials that cover several different languages and clients, see [How to use Azure Redis Cache](cache-dotnet-how-to-use-azure-redis-cache.md) and click the desired language from the language switcher at the top of the article.</span></span>

[!INCLUDE [redis-cache-create](../../includes/redis-cache-access-keys.md)]

<a name="cache-emulator"></a>

### <a name="is-there-a-local-emulator-for-azure-redis-cache"></a><span data-ttu-id="abf58-352">Существует локальный эмулятор кэша Redis для Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-352">Is there a local emulator for Azure Redis Cache?</span></span>
<span data-ttu-id="abf58-353">Локального эмулятора кэша Redis для Azure нет, но можно запустить версию MSOpenTech redis-server.exe из [программ командной строки Redis](https://github.com/MSOpenTech/redis/releases/) на локальном компьютере и подключиться к нему, чтобы получить возможности, аналогичные локальному эмулятору кэша, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="abf58-353">There is no local emulator for Azure Redis Cache, but you can run the MSOpenTech version of redis-server.exe from the [Redis command-line tools](https://github.com/MSOpenTech/redis/releases/) on your local machine and connect to it to get a similar experience to a local cache emulator, as shown in the following example:</span></span>

    private static Lazy<ConnectionMultiplexer>
          lazyConnection = new Lazy<ConnectionMultiplexer>
        (() =>
        {
            // Connect to a locally running instance of Redis to simulate a local cache emulator experience.
            return ConnectionMultiplexer.Connect("127.0.0.1:6379");
        });

        public static ConnectionMultiplexer Connection
        {
            get
            {
                return lazyConnection.Value;
            }
        }


<span data-ttu-id="abf58-354">При необходимости можно настроить файл [redis.conf](http://redis.io/topics/config) для более точного соответствия [параметрам кэша по умолчанию](cache-configure.md#default-redis-server-configuration) для подключенного к сети кэша Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-354">You can optionally configure a [redis.conf](http://redis.io/topics/config) file to more closely match the [default cache settings](cache-configure.md#default-redis-server-configuration) for your online Azure Redis Cache if desired.</span></span>

<a name="cache-commands"></a>

### <a name="how-can-i-run-redis-commands"></a><span data-ttu-id="abf58-355">Как выполнять команды Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-355">How can I run Redis commands?</span></span>
<span data-ttu-id="abf58-356">Вы можете использовать любую из команд, перечисленных в [командах Redis](http://redis.io/commands#), за исключением команд, указанных в перечне [команд, не поддерживаемых в кэше Redis для Azure](cache-configure.md#redis-commands-not-supported-in-azure-redis-cache).</span><span class="sxs-lookup"><span data-stu-id="abf58-356">You can use any of the commands listed at [Redis commands](http://redis.io/commands#) except for the commands listed at [Redis commands not supported in Azure Redis Cache](cache-configure.md#redis-commands-not-supported-in-azure-redis-cache).</span></span> <span data-ttu-id="abf58-357">Выполнять команды Redis можно несколькими способами.</span><span class="sxs-lookup"><span data-stu-id="abf58-357">You have several options to run Redis commands.</span></span>

* <span data-ttu-id="abf58-358">При наличии кэша уровня "Стандартный" или "Премиум" вы можете запускать команды Redis с помощью [консоли Redis](cache-configure.md#redis-console).</span><span class="sxs-lookup"><span data-stu-id="abf58-358">If you have a Standard or Premium cache, you can run Redis commands using the [Redis Console](cache-configure.md#redis-console).</span></span> <span data-ttu-id="abf58-359">Консоль Redis — это защищенный способ выполнения команд Redis на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-359">The Redis console provides a secure way to run Redis commands in the Azure portal.</span></span>
* <span data-ttu-id="abf58-360">Также можно использовать программы командной строки Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-360">You can also use the Redis command-line tools.</span></span> <span data-ttu-id="abf58-361">Чтобы воспользоваться ими, выполните следующие действия:</span><span class="sxs-lookup"><span data-stu-id="abf58-361">To use them, perform the following steps:</span></span>
* <span data-ttu-id="abf58-362">Скачайте [программы командной строки Redis](https://github.com/MSOpenTech/redis/releases/).</span><span class="sxs-lookup"><span data-stu-id="abf58-362">Download the [Redis command-line tools](https://github.com/MSOpenTech/redis/releases/).</span></span>
* <span data-ttu-id="abf58-363">Подключитесь к кэшу с помощью `redis-cli.exe`.</span><span class="sxs-lookup"><span data-stu-id="abf58-363">Connect to the cache using `redis-cli.exe`.</span></span> <span data-ttu-id="abf58-364">Передайте конечную точку кэша, используя параметр -h и ключ с параметром -a, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="abf58-364">Pass in the cache endpoint using the -h switch and the key using -a as shown in the following example:</span></span>
* `redis-cli -h <your cache="" name="">
  .redis.cache.windows.net -a <key>
  `

> [!NOTE]
> <span data-ttu-id="abf58-365">Программы командной строки Redis не работают с портом SSL, но можно использовать служебную программу, такую как `stunnel`, для безопасного подключения этих программ к порту SSL в соответствии с указаниями в записи блога [Announcing ASP.NET Session State Provider for Redis Preview Release](http://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx) (Объявление о поставщике состояний сеансов ASP.NET для предварительной версии Redis).</span><span class="sxs-lookup"><span data-stu-id="abf58-365">The Redis command-line tools do not work with the SSL port, but you can use a utility such as `stunnel` to securely connect the tools to the SSL port by following the directions in the [Announcing ASP.NET Session State Provider for Redis Preview Release](http://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx) blog post.</span></span>
>
>

<a name="cache-reference"></a>

### <a name="why-doesnt-azure-redis-cache-have-an-msdn-class-library-reference-like-some-of-the-other-azure-services"></a><span data-ttu-id="abf58-366">Почему в кэше Redis для Azure отсутствует ссылка на библиотеку классов MSDN, как в некоторых других службах Azure?</span><span class="sxs-lookup"><span data-stu-id="abf58-366">Why doesn't Azure Redis Cache have an MSDN class library reference like some of the other Azure services?</span></span>
<span data-ttu-id="abf58-367">Кэш Redis для Microsoft Azure основывается на популярном продукте с открытым кодом — кэше Redis. Воспользоваться им можно из самых разнообразных [клиентов Redis](http://redis.io/clients), доступных для многих языков программирования.</span><span class="sxs-lookup"><span data-stu-id="abf58-367">Microsoft Azure Redis Cache is based on the popular open source Redis Cache and can be accessed by a wide variety of [Redis clients](http://redis.io/clients) for many programming languages.</span></span> <span data-ttu-id="abf58-368">Каждый клиент имеет собственный API, который вызывает экземпляр кэша Redis с помощью [команд Redis](http://redis.io/commands).</span><span class="sxs-lookup"><span data-stu-id="abf58-368">Each client has its own API that makes calls to the Redis cache instance using [Redis commands](http://redis.io/commands).</span></span>

<span data-ttu-id="abf58-369">Поскольку все клиенты разные, отсутствует одна централизованная ссылка на классы в MSDN, а каждый клиент поддерживает свою собственную справочную документацию.</span><span class="sxs-lookup"><span data-stu-id="abf58-369">Because each client is different, there is not one centralized class reference on MSDN, and each client maintains its own reference documentation.</span></span> <span data-ttu-id="abf58-370">Помимо справочной документации имеется несколько учебников, показывающих, как приступить к работе с кэшем Redis для Azure, используя разные языки и клиенты кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-370">In addition to the reference documentation, there are several tutorials showing how to get started with Azure Redis Cache using different languages and cache clients.</span></span> <span data-ttu-id="abf58-371">Для доступа к этим учебникам перейдите к статье [Как использовать кэш Redis для Azure](cache-dotnet-how-to-use-azure-redis-cache.md) и выберите нужный язык, используя переключатель языков в верхней части статьи.</span><span class="sxs-lookup"><span data-stu-id="abf58-371">To access these tutorials, see [How to use Azure Redis Cache](cache-dotnet-how-to-use-azure-redis-cache.md) and click the desired language from the language switcher at the top of the article.</span></span>

### <a name="can-i-use-azure-redis-cache-as-a-php-session-cache"></a><span data-ttu-id="abf58-372">Можно ли использовать кэш Redis для Azure как кэш сеанса PHP?</span><span class="sxs-lookup"><span data-stu-id="abf58-372">Can I use Azure Redis Cache as a PHP session cache?</span></span>
<span data-ttu-id="abf58-373">Да. Для использования кэша Redis для Azure в качестве кэша сеанса PHP укажите строку подключения к экземпляру кэша Redis для Azure в пути `session.save_path`.</span><span class="sxs-lookup"><span data-stu-id="abf58-373">Yes, to use Azure Redis Cache as a PHP session cache, specify the connection string to your Azure Redis Cache instance in `session.save_path`.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="abf58-374">При использовании кэша Redis для Azure в качестве кэша сеанса PHP необходимо кодировать в URL-адресе ключ безопасности, используемый для подключения к кэшу, как показано в следующем примере:</span><span class="sxs-lookup"><span data-stu-id="abf58-374">When using Azure Redis Cache as a PHP session cache, you must URL encode the security key used to connect to the cache, as shown in the following example:</span></span>
>
> `session.save_path = "tcp://mycache.redis.cache.windows.net:6379?auth=<url encoded primary or secondary key here>";`
>
> <span data-ttu-id="abf58-375">Если ключ не кодирован в URL-адресе, то может отобразиться сообщение об исключении, подобное этому: `Failed to parse session.save_path`</span><span class="sxs-lookup"><span data-stu-id="abf58-375">If the key is not URL encoded, you may receive an exception with a message like: `Failed to parse session.save_path`</span></span>
>
>

<span data-ttu-id="abf58-376">Дополнительные сведения об использовании кэша Redis в качестве кэша сеанса PHP с клиентом PhpRedis см. в разделе [Обработчик сеанса PHP](https://github.com/phpredis/phpredis#php-session-handler).</span><span class="sxs-lookup"><span data-stu-id="abf58-376">For more information about using Redis Cache as a PHP session cache with the PhpRedis client, see [PHP Session handler](https://github.com/phpredis/phpredis#php-session-handler).</span></span>

### <a name="what-are-redis-databases"></a><span data-ttu-id="abf58-377">Что такое базы данных Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-377">What are Redis databases?</span></span>

<span data-ttu-id="abf58-378">Базы данных Redis — это просто логическое разделение данных внутри одного экземпляра Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-378">Redis Databases are just a logical separation of data within the same Redis instance.</span></span> <span data-ttu-id="abf58-379">Кэш-память совместно используется всеми базами данных, и фактический объем памяти, используемый определенной базой данных, зависит от пар "ключ-значение", хранящихся в ней.</span><span class="sxs-lookup"><span data-stu-id="abf58-379">The cache memory is shared between all the databases and actual memory consumption of a given database depends on the keys/values stored in that database.</span></span> <span data-ttu-id="abf58-380">Например, объем кэша C6 составляет 53 ГБ.</span><span class="sxs-lookup"><span data-stu-id="abf58-380">For example a C6 cache has 53 GB of memory.</span></span> <span data-ttu-id="abf58-381">Вы можете предоставить все 53 ГБ одной базе данных или разделить их между несколькими базами данных.</span><span class="sxs-lookup"><span data-stu-id="abf58-381">You can choose to put all 53 GB into one database or you can split it up between multiple databases.</span></span> 

> [!NOTE]
> <span data-ttu-id="abf58-382">При использовании кэша Redis для Azure уровня "Премиум" с включенной кластеризацией доступна только база данных 0.</span><span class="sxs-lookup"><span data-stu-id="abf58-382">When using a Premium Azure Redis Cache with clustering enabled, only database 0 is available.</span></span> <span data-ttu-id="abf58-383">Это внутреннее ограничение Redis, и оно не относится к кэшу Redis для Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-383">This limitation is an intrinsic Redis limitation and is not specific to Azure Redis Cache.</span></span> <span data-ttu-id="abf58-384">Дополнительные сведения см. в разделе [Нужно ли вносить изменения в клиентское приложение, чтобы использовать кластеризацию?](cache-how-to-premium-clustering.md#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering).</span><span class="sxs-lookup"><span data-stu-id="abf58-384">For more information, see [Do I need to make any changes to my client application to use clustering?](cache-how-to-premium-clustering.md#do-i-need-to-make-any-changes-to-my-client-application-to-use-clustering)</span></span>
> 
> 


<a name="cache-ssl"></a>

### <a name="when-should-i-enable-the-non-ssl-port-for-connecting-to-redis"></a><span data-ttu-id="abf58-385">Когда следует включать порт, не являющийся портом SSL, для подключения к Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-385">When should I enable the non-SSL port for connecting to Redis?</span></span>
<span data-ttu-id="abf58-386">Сервер Redis не имеет встроенной поддержки SSL, но кэш Redis для Azure имеет.</span><span class="sxs-lookup"><span data-stu-id="abf58-386">Redis server does not natively support SSL, but Azure Redis Cache does.</span></span> <span data-ttu-id="abf58-387">Если вы подключаетесь к кэшу Redis для Azure и ваш клиент поддерживает протокол SSL, например StackExchange.Redis, то следует использовать SSL.</span><span class="sxs-lookup"><span data-stu-id="abf58-387">If you are connecting to Azure Redis Cache and your client supports SSL, like StackExchange.Redis, then you should use SSL.</span></span>

>[!NOTE]
><span data-ttu-id="abf58-388">Для новых экземпляров кэша Redis для Azure все порты, кроме SSL, отключены по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="abf58-388">The non-SSL port is disabled by default for new Azure Redis Cache instances.</span></span> <span data-ttu-id="abf58-389">Если ваш клиент не поддерживает SSL, необходимо включить порт, не являющийся портом SSL, следуя указаниям, приведенным в разделе [Порты доступа](cache-configure.md#access-ports) статьи [Настройка кэша в кэше Redis для Azure](cache-configure.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-389">If your client does not support SSL, then you must enable the non-SSL port by following the directions in the [Access ports](cache-configure.md#access-ports) section of the [Configure a cache in Azure Redis Cache](cache-configure.md) article.</span></span>
>
>

<span data-ttu-id="abf58-390">Инструменты Redis, такие как `redis-cli`, не работают с портом SSL, но вы можете использовать служебную программу, например `stunnel`, для безопасного подключения инструментов к порту SSL в соответствии с указаниями в записи блога [Анонс поставщика состояний сеансов ASP.NET для предварительной версии Redis](http://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx).</span><span class="sxs-lookup"><span data-stu-id="abf58-390">Redis tools such as `redis-cli` do not work with the SSL port, but you can use a utility such as `stunnel` to securely connect the tools to the SSL port by following the directions in the [Announcing ASP.NET Session State Provider for Redis Preview Release](http://blogs.msdn.com/b/webdev/archive/2014/05/12/announcing-asp-net-session-state-provider-for-redis-preview-release.aspx) blog post.</span></span>

<span data-ttu-id="abf58-391">Инструкции по скачиванию инструментов Redis см. в разделе [Как выполнять команды Redis?](#cache-commands).</span><span class="sxs-lookup"><span data-stu-id="abf58-391">For instructions on downloading the Redis tools, see the [How can I run Redis commands?](#cache-commands) section.</span></span>

### <a name="what-are-some-production-best-practices"></a><span data-ttu-id="abf58-392">Какие рекомендации следует учитывать для рабочей среды?</span><span class="sxs-lookup"><span data-stu-id="abf58-392">What are some production best practices?</span></span>
* [<span data-ttu-id="abf58-393">Рекомендации для StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="abf58-393">StackExchange.Redis best practices</span></span>](#stackexchangeredis-best-practices)
* [<span data-ttu-id="abf58-394">Конфигурация и основные понятия</span><span class="sxs-lookup"><span data-stu-id="abf58-394">Configuration and concepts</span></span>](#configuration-and-concepts)
* [<span data-ttu-id="abf58-395">Тестирование производительности</span><span class="sxs-lookup"><span data-stu-id="abf58-395">Performance testing</span></span>](#performance-testing)

#### <a name="stackexchangeredis-best-practices"></a><span data-ttu-id="abf58-396">Рекомендации для StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="abf58-396">StackExchange.Redis best practices</span></span>
* <span data-ttu-id="abf58-397">Задайте для `AbortConnect` значение false, подождите, пока ConnectionMultiplexer автоматически восстановит подключение.</span><span class="sxs-lookup"><span data-stu-id="abf58-397">Set `AbortConnect` to false, then let the ConnectionMultiplexer reconnect automatically.</span></span> <span data-ttu-id="abf58-398">[Щелкните здесь, чтобы узнать больше](https://gist.github.com/JonCole/36ba6f60c274e89014dd#file-se-redis-setabortconnecttofalse-md).</span><span class="sxs-lookup"><span data-stu-id="abf58-398">[See here for details](https://gist.github.com/JonCole/36ba6f60c274e89014dd#file-se-redis-setabortconnecttofalse-md).</span></span>
* <span data-ttu-id="abf58-399">Повторно используйте ConnectionMultiplexer — не создавайте новый экземпляр для каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="abf58-399">Reuse the ConnectionMultiplexer - do not create a new one for each request.</span></span> <span data-ttu-id="abf58-400">Рекомендуется использовать шаблон `Lazy<ConnectionMultiplexer>`, [показанный здесь](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache).</span><span class="sxs-lookup"><span data-stu-id="abf58-400">The `Lazy<ConnectionMultiplexer>` pattern [shown here](cache-dotnet-how-to-use-azure-redis-cache.md#connect-to-the-cache) is recommended.</span></span>
* <span data-ttu-id="abf58-401">Лучше всего Redis работает с меньшими значениями, поэтому рассмотрите возможность разделения больших данных на несколько ключей.</span><span class="sxs-lookup"><span data-stu-id="abf58-401">Redis works best with smaller values, so consider chopping up bigger data into multiple keys.</span></span> <span data-ttu-id="abf58-402">В [этом обсуждении Redis](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ) размер в 100 КБ признан "большим".</span><span class="sxs-lookup"><span data-stu-id="abf58-402">In [this Redis discussion](https://groups.google.com/forum/#!searchin/redis-db/size/redis-db/n7aa2A4DZDs/3OeEPHSQBAAJ), 100kb is considered large.</span></span> <span data-ttu-id="abf58-403">Прочитайте [эту статью](https://gist.github.com/JonCole/db0e90bedeb3fc4823c2#large-requestresponse-size) , чтобы ознакомиться с примером проблемы, вызванной большими значениями.</span><span class="sxs-lookup"><span data-stu-id="abf58-403">Read [this article](https://gist.github.com/JonCole/db0e90bedeb3fc4823c2#large-requestresponse-size) for an example problem that can be caused by large values.</span></span>
* <span data-ttu-id="abf58-404">Настройте [параметры ThreadPool](#important-details-about-threadpool-growth) , чтобы избежать тайм-аутов.</span><span class="sxs-lookup"><span data-stu-id="abf58-404">Configure your [ThreadPool settings](#important-details-about-threadpool-growth) to avoid timeouts.</span></span>
* <span data-ttu-id="abf58-405">Используйте по крайней мере значение connectTimeout по умолчанию, равное 5 секундам.</span><span class="sxs-lookup"><span data-stu-id="abf58-405">Use at least the default connectTimeout of 5 seconds.</span></span> <span data-ttu-id="abf58-406">Этот интервал даст StackExchange.Redis достаточно времени, чтобы повторно установить подключение в случае кратковременного сбоя сети.</span><span class="sxs-lookup"><span data-stu-id="abf58-406">This interval would give StackExchange.Redis sufficient time to re-establish the connection, in case of a network blip.</span></span>
* <span data-ttu-id="abf58-407">Учтите расходы на производительность, связанные с другими операциями, которые вы выполняете.</span><span class="sxs-lookup"><span data-stu-id="abf58-407">Be aware of the performance costs associated with different operations you are running.</span></span> <span data-ttu-id="abf58-408">Например, команда `KEYS` является операцией O(n), т. е. операцией, длительность которой линейно зависит от размера входных данных. Таких операций следует избегать.</span><span class="sxs-lookup"><span data-stu-id="abf58-408">For instance, the `KEYS` command is an O(n) operation and should be avoided.</span></span> <span data-ttu-id="abf58-409">[Сайт redis.io](http://redis.io/commands/) содержит сведения о временной сложности каждой поддерживаемой операции.</span><span class="sxs-lookup"><span data-stu-id="abf58-409">The [redis.io site](http://redis.io/commands/) has details around the time complexity for each operation that it supports.</span></span> <span data-ttu-id="abf58-410">Щелкните каждую команду, чтобы просмотреть сведения о сложности операции.</span><span class="sxs-lookup"><span data-stu-id="abf58-410">Click each command to see the complexity for each operation.</span></span>

#### <a name="configuration-and-concepts"></a><span data-ttu-id="abf58-411">Конфигурация и основные понятия</span><span class="sxs-lookup"><span data-stu-id="abf58-411">Configuration and concepts</span></span>
* <span data-ttu-id="abf58-412">Для систем в рабочей среде используйте уровень "Стандартный" или "Премиум".</span><span class="sxs-lookup"><span data-stu-id="abf58-412">Use Standard or Premium Tier for Production systems.</span></span> <span data-ttu-id="abf58-413">Уровень "Базовый" — это система с одним узлом без репликации данных, которая не регулируется соглашением об уровне обслуживания.</span><span class="sxs-lookup"><span data-stu-id="abf58-413">The Basic Tier is a single node system with no data replication and no SLA.</span></span> <span data-ttu-id="abf58-414">Кроме того, используйте по крайней мере кэш C1.</span><span class="sxs-lookup"><span data-stu-id="abf58-414">Also, use at least a C1 cache.</span></span> <span data-ttu-id="abf58-415">Как правило, кэши C0 используются в простых сценариях разработки и тестирования.</span><span class="sxs-lookup"><span data-stu-id="abf58-415">C0 caches are typically used for simple dev/test scenarios.</span></span>
* <span data-ttu-id="abf58-416">Помните, что Redis — это хранилище данных **в памяти** .</span><span class="sxs-lookup"><span data-stu-id="abf58-416">Remember that Redis is an **In-Memory** data store.</span></span> <span data-ttu-id="abf58-417">Прочитайте [эту статью](https://gist.github.com/JonCole/b6354d92a2d51c141490f10142884ea4#file-whathappenedtomydatainredis-md) , чтобы ознакомиться со случаями, в которых может произойти потеря данных.</span><span class="sxs-lookup"><span data-stu-id="abf58-417">Read [this article](https://gist.github.com/JonCole/b6354d92a2d51c141490f10142884ea4#file-whathappenedtomydatainredis-md) so that you are aware of scenarios where data loss can occur.</span></span>
* <span data-ttu-id="abf58-418">Создайте свою систему таким образом, чтобы она могла справляться с кратковременными сбоями подключения, [связанными с установкой исправлений и отработкой отказа](https://gist.github.com/JonCole/317fe03805d5802e31cfa37e646e419d#file-azureredis-patchingexplained-md).</span><span class="sxs-lookup"><span data-stu-id="abf58-418">Develop your system such that it can handle connection blips [due to patching and failover](https://gist.github.com/JonCole/317fe03805d5802e31cfa37e646e419d#file-azureredis-patchingexplained-md).</span></span>

#### <a name="performance-testing"></a><span data-ttu-id="abf58-419">Тестирование производительности</span><span class="sxs-lookup"><span data-stu-id="abf58-419">Performance testing</span></span>
* <span data-ttu-id="abf58-420">Начните с запуска `redis-benchmark.exe` , чтобы определить возможную пропускную способность перед созданием собственных тестов производительности.</span><span class="sxs-lookup"><span data-stu-id="abf58-420">Start by using `redis-benchmark.exe` to get a feel for possible throughput before writing your own perf tests.</span></span> <span data-ttu-id="abf58-421">Так как `redis-benchmark` не поддерживает протокол SSL, то перед запуском теста необходимо [включить порт без SSL посредством портала Azure](cache-configure.md#access-ports).</span><span class="sxs-lookup"><span data-stu-id="abf58-421">Because `redis-benchmark` does not support SSL, you must [enable the Non-SSL port through the Azure portal](cache-configure.md#access-ports) before you run the test.</span></span> <span data-ttu-id="abf58-422">Примеры приведены в разделе [Как измерить и протестировать производительность моего кэша?](#how-can-i-benchmark-and-test-the-performance-of-my-cache)</span><span class="sxs-lookup"><span data-stu-id="abf58-422">For examples, see [How can I benchmark and test the performance of my cache?](#how-can-i-benchmark-and-test-the-performance-of-my-cache)</span></span>
* <span data-ttu-id="abf58-423">Клиентская виртуальная машина, используемая для тестирования, должна находиться в том же регионе, что и экземпляр кэша Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-423">The client VM used for testing should be in the same region as your Redis cache instance.</span></span>
* <span data-ttu-id="abf58-424">В качестве клиента рекомендуется использовать виртуальные машины серии Dv2, так как в них используется более производительное оборудование и они выдают лучшие результаты.</span><span class="sxs-lookup"><span data-stu-id="abf58-424">We recommend using Dv2 VM Series for your client as they have better hardware and should give the best results.</span></span>
* <span data-ttu-id="abf58-425">Убедитесь, что у выбранной клиентской виртуальной машины как минимум такая же емкость вычислительных ресурсов и пропускной способности, что и у тестируемого кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-425">Make sure your client VM you choose has at least as much computing and bandwidth capability as the cache you are testing.</span></span>
* <span data-ttu-id="abf58-426">Включите VRSS на клиентском компьютере, если используется среда Windows.</span><span class="sxs-lookup"><span data-stu-id="abf58-426">Enable VRSS on the client machine if you are on Windows.</span></span> <span data-ttu-id="abf58-427">[Щелкните здесь, чтобы узнать больше](https://technet.microsoft.com/library/dn383582.aspx).</span><span class="sxs-lookup"><span data-stu-id="abf58-427">[See here for details](https://technet.microsoft.com/library/dn383582.aspx).</span></span>
* <span data-ttu-id="abf58-428">Экземпляры Redis уровня "Премиум" обеспечивают меньшие сетевые задержки и большую пропускную способность, так как используют более производительные ЦП и сетевое оборудование.</span><span class="sxs-lookup"><span data-stu-id="abf58-428">Premium tier Redis instances have better network latency and throughput because they are running on better hardware for both CPU and Network.</span></span>

<a name="cache-redis-commands"></a>

### <a name="what-are-some-of-the-considerations-when-using-common-redis-commands"></a><span data-ttu-id="abf58-429">Какие факторы следует учитывать при использовании общих команд Redis?</span><span class="sxs-lookup"><span data-stu-id="abf58-429">What are some of the considerations when using common Redis commands?</span></span>
* <span data-ttu-id="abf58-430">Прежде чем запускать определенные команды Redis, которые выполняются слишком долго, необходимо понять влияние этих команд.</span><span class="sxs-lookup"><span data-stu-id="abf58-430">You should not run certain Redis commands which take a long time to complete, without understanding the impact of these commands.</span></span>
  * <span data-ttu-id="abf58-431">Например, не выполняйте команду [KEYS](http://redis.io/commands/keys) в рабочей среде, поскольку ее выполнение может занять очень много времени, в зависимости от количества ключей.</span><span class="sxs-lookup"><span data-stu-id="abf58-431">For example, do not run the [KEYS](http://redis.io/commands/keys) command in production as it could take a long time to return depending on the number of keys.</span></span> <span data-ttu-id="abf58-432">Redis является однопотоковым сервером и обрабатывает команды по одной.</span><span class="sxs-lookup"><span data-stu-id="abf58-432">Redis is a single-threaded server and it processes commands one at a time.</span></span> <span data-ttu-id="abf58-433">Если вы выдадите после KEYS другие команды, они не будут обрабатываться, пока Redis обрабатывает команду KEYS.</span><span class="sxs-lookup"><span data-stu-id="abf58-433">If you have other commands issued after KEYS, they will not be processed until Redis processes the KEYS command.</span></span> <span data-ttu-id="abf58-434">[Сайт redis.io](http://redis.io/commands/) содержит сведения о временной сложности каждой поддерживаемой операции.</span><span class="sxs-lookup"><span data-stu-id="abf58-434">The [redis.io site](http://redis.io/commands/) has details around the time complexity for each operation that it supports.</span></span> <span data-ttu-id="abf58-435">Щелкните каждую команду, чтобы просмотреть сведения о сложности операции.</span><span class="sxs-lookup"><span data-stu-id="abf58-435">Click each command to see the complexity for each operation.</span></span>
* <span data-ttu-id="abf58-436">Размеры ключей — следует использовать пары "ключ-значение" небольшого или большого размера?</span><span class="sxs-lookup"><span data-stu-id="abf58-436">Key sizes - should I use small key/values or large key/values?</span></span> <span data-ttu-id="abf58-437">В целом это зависит от сценария.</span><span class="sxs-lookup"><span data-stu-id="abf58-437">In general, it depends on the scenario.</span></span> <span data-ttu-id="abf58-438">Если в сценарии требуются большие ключи, то можно настроить значения повторов и ConnectionTimeout, а также настроить логику повторов.</span><span class="sxs-lookup"><span data-stu-id="abf58-438">If your scenario requires larger keys, you can adjust the ConnectionTimeout and retry values and adjust your retry logic.</span></span> <span data-ttu-id="abf58-439">С точки зрения сервера Redis чем меньше значения, тем лучше производительность.</span><span class="sxs-lookup"><span data-stu-id="abf58-439">From a Redis server perspective, smaller values are observed to have better performance.</span></span>
* <span data-ttu-id="abf58-440">Это не означает, что в Redis нельзя хранить большие значения; вы должны учитывать описанные ниже факторы.</span><span class="sxs-lookup"><span data-stu-id="abf58-440">These considerations don't mean that you can't store larger values in Redis; you must be aware of the following considerations.</span></span> <span data-ttu-id="abf58-441">Задержки будут выше.</span><span class="sxs-lookup"><span data-stu-id="abf58-441">Latencies will be higher.</span></span> <span data-ttu-id="abf58-442">Если имеется один большой и один небольшой набор данных, можно использовать несколько экземпляров ConnectionMultiplexer, настроенных с разным набором значений времени ожидания и повторов, как описано в предыдущем разделе [Что делают параметры конфигурации StackExchange.Redis](#cache-configuration) .</span><span class="sxs-lookup"><span data-stu-id="abf58-442">If you have one set of data that is larger and one that is smaller, you can use multiple ConnectionMultiplexer instances, each configured with a different set of timeout and retry values, as described in the previous [What do the StackExchange.Redis configuration options do](#cache-configuration) section.</span></span>

<a name="cache-benchmarking"></a>

### <a name="how-can-i-benchmark-and-test-the-performance-of-my-cache"></a><span data-ttu-id="abf58-443">Как измерить и протестировать производительность моего кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-443">How can I benchmark and test the performance of my cache?</span></span>
* <span data-ttu-id="abf58-444">[Включите диагностику кэша](cache-how-to-monitor.md#enable-cache-diagnostics), чтобы можно было [наблюдать](cache-how-to-monitor.md) за работоспособностью кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-444">[Enable cache diagnostics](cache-how-to-monitor.md#enable-cache-diagnostics) so you can [monitor](cache-how-to-monitor.md) the health of your cache.</span></span> <span data-ttu-id="abf58-445">Вы можете просмотреть метрики на портале Azure. Кроме того, их можно [скачать и просмотреть](https://github.com/rustd/RedisSamples/tree/master/CustomMonitoring) с помощью привычных вам инструментов.</span><span class="sxs-lookup"><span data-stu-id="abf58-445">You can view the metrics in the Azure portal and you can also [download and review](https://github.com/rustd/RedisSamples/tree/master/CustomMonitoring) them using the tools of your choice.</span></span>
* <span data-ttu-id="abf58-446">Для нагрузочного теста сервера Redis можно использовать benchmark.exe.</span><span class="sxs-lookup"><span data-stu-id="abf58-446">You can use redis-benchmark.exe to load test your Redis server.</span></span>
* <span data-ttu-id="abf58-447">Убедитесь, что клиент нагрузочного тестирования и кэш Redis находятся в одном регионе.</span><span class="sxs-lookup"><span data-stu-id="abf58-447">Ensure that the load testing client and the Redis cache are in the same region.</span></span>
* <span data-ttu-id="abf58-448">Используйте redis-cli.exe и наблюдайте за кэшем с помощью команды INFO.</span><span class="sxs-lookup"><span data-stu-id="abf58-448">Use redis-cli.exe and monitor the cache using the INFO command.</span></span>
* <span data-ttu-id="abf58-449">Если ваша нагрузка приводит к высокой степени фрагментации памяти, то необходимо масштабирование до большего размера кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-449">If your load is causing high memory fragmentation, you should scale up to a larger cache size.</span></span>
* <span data-ttu-id="abf58-450">Инструкции по скачиванию инструментов Redis см. в разделе [Как выполнять команды Redis?](#cache-commands).</span><span class="sxs-lookup"><span data-stu-id="abf58-450">For instructions on downloading the Redis tools, see the [How can I run Redis commands?](#cache-commands) section.</span></span>

<span data-ttu-id="abf58-451">Следующие команды приводят пример использования redis-benchmark.exe.</span><span class="sxs-lookup"><span data-stu-id="abf58-451">The following commands provide an example of using redis-benchmark.exe.</span></span> <span data-ttu-id="abf58-452">Чтобы получить точные результаты, выполните эти команды на виртуальной машине, размещенной в том же регионе, что и кэш.</span><span class="sxs-lookup"><span data-stu-id="abf58-452">For accurate results, run these commands from a VM in the same region as your cache.</span></span>

* <span data-ttu-id="abf58-453">Тестирование конвейерных запросов SET с полезными данными размером в 1 КБ.</span><span class="sxs-lookup"><span data-stu-id="abf58-453">Test Pipelined SET requests using a 1k payload</span></span>

  `redis-benchmark.exe -h **yourcache**.redis.cache.windows.net -a **yourAccesskey** -t SET -n 1000000 -d 1024 -P 50`
* <span data-ttu-id="abf58-454">Тестирование конвейерных запросов GET с полезными данными размером в 1 КБ.</span><span class="sxs-lookup"><span data-stu-id="abf58-454">Test Pipelined GET requests using a 1k payload.</span></span>
  <span data-ttu-id="abf58-455">Примечание. Сначала выполните приведенный выше тест SET, чтобы заполнить кэш.</span><span class="sxs-lookup"><span data-stu-id="abf58-455">NOTE: Run the SET test shown above first to populate cache</span></span>

  `redis-benchmark.exe -h **yourcache**.redis.cache.windows.net -a **yourAccesskey** -t GET -n 1000000 -d 1024 -P 50`

<a name="threadpool"></a>

### <a name="important-details-about-threadpool-growth"></a><span data-ttu-id="abf58-456">Важные сведения о росте пула потоков ThreadPool</span><span class="sxs-lookup"><span data-stu-id="abf58-456">Important details about ThreadPool growth</span></span>
<span data-ttu-id="abf58-457">В CLR ThreadPool существует два типа потоков — "Рабочий поток" и "Порт завершения ввода-вывода" (также называемый IOCP).</span><span class="sxs-lookup"><span data-stu-id="abf58-457">The CLR ThreadPool has two types of threads - "Worker" and "I/O Completion Port" (aka IOCP) threads.</span></span>

* <span data-ttu-id="abf58-458">Рабочие потоки используются, например, для обработки методов `Task.Run(…)` или `ThreadPool.QueueUserWorkItem(…)`.</span><span class="sxs-lookup"><span data-stu-id="abf58-458">Worker threads are used when for things like processing `Task.Run(…)` or `ThreadPool.QueueUserWorkItem(…)` methods.</span></span> <span data-ttu-id="abf58-459">Эти потоки также используются различными компонентами в среде CLR, когда работа должна быть выполнена в фоновом потоке.</span><span class="sxs-lookup"><span data-stu-id="abf58-459">These threads are also used by various components in the CLR when work needs to happen on a background thread.</span></span>
* <span data-ttu-id="abf58-460">Потоки IOCP используются в случае асинхронного ввода-вывода (например чтение из сети).</span><span class="sxs-lookup"><span data-stu-id="abf58-460">IOCP threads are used when asynchronous IO happens (e.g. reading from the network).</span></span>

<span data-ttu-id="abf58-461">Пул потоков предоставляет новые рабочие потоки или потоки завершения ввода-вывода по запросу (без регулирования), пока не будет достигнут параметр "Минимум" для каждого типа потока.</span><span class="sxs-lookup"><span data-stu-id="abf58-461">The thread pool provides new worker threads or I/O completion threads on demand (without any throttling) until it reaches the "Minimum" setting for each type of thread.</span></span> <span data-ttu-id="abf58-462">По умолчанию минимальное количество потоков равно количеству процессоров в системе.</span><span class="sxs-lookup"><span data-stu-id="abf58-462">By default, the minimum number of threads is set to the number of processors on a system.</span></span>

<span data-ttu-id="abf58-463">Когда количество существующих (занятых) потоков достигает "минимального" количества потоков, ThreadPool изменяет частоту внедрения новых потоков до величины в один поток за 500 миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="abf58-463">Once the number of existing (busy) threads hits the "minimum" number of threads, the ThreadPool will throttle the rate at which it injects new threads to one thread per 500 milliseconds.</span></span> <span data-ttu-id="abf58-464">Как правило, если нагрузка системы достигает величины, для которой необходим поток IOCP, то эта работа будет сделана очень быстро.</span><span class="sxs-lookup"><span data-stu-id="abf58-464">Typically, if your system gets a burst of work needing an IOCP thread, it will process that work very quickly.</span></span> <span data-ttu-id="abf58-465">Однако если величина нагрузки больше настроенного параметра "Минимум", при обработке некоторых операций возникнет некоторая задержка, так как ThreadPool будет ожидать возникновения одного из двух событий.</span><span class="sxs-lookup"><span data-stu-id="abf58-465">However, if the burst of work is more than the configured "Minimum" setting, there will be some delay in processing some of the work as the ThreadPool waits for one of two things to happen.</span></span>

1. <span data-ttu-id="abf58-466">Освобождение существующего потока для выполнения работы.</span><span class="sxs-lookup"><span data-stu-id="abf58-466">An existing thread becomes free to process the work.</span></span>
2. <span data-ttu-id="abf58-467">Создание нового потока из-за того, что ни один из существующих потоков не стал доступным в течение 500 мс.</span><span class="sxs-lookup"><span data-stu-id="abf58-467">No existing thread becomes free for 500ms, so a new thread is created.</span></span>

<span data-ttu-id="abf58-468">По сути, это означает, что если количество занятых потоков превышает минимальное количество потоков, вы скорее всего столкнетесь с задержкой в 500 мс перед обработкой сетевого трафика приложением.</span><span class="sxs-lookup"><span data-stu-id="abf58-468">Basically, it means that when the number of Busy threads is greater than Min threads, you are likely paying a 500ms delay before network traffic is processed by the application.</span></span> <span data-ttu-id="abf58-469">Кроме того, важно обратить внимание, что если существующий поток простаивает более 15 секунд (на основе моих наблюдений), он будет удален, и этот цикл наращивания и уменьшения количества потоков может повториться.</span><span class="sxs-lookup"><span data-stu-id="abf58-469">Also, it is important to note that when an existing thread stays idle for longer than 15 seconds (based on what I remember), it will be cleaned up and this cycle of growth and shrinkage can repeat.</span></span>

<span data-ttu-id="abf58-470">Если взглянуть на пример сообщения об ошибке от StackExchange.Redis (сборка 1.0.450 или более поздней версии), вы увидите, что теперь оно содержит статистику ThreadPool (подробности о рабочих потоках и потоках IOCP см. ниже).</span><span class="sxs-lookup"><span data-stu-id="abf58-470">If we look at an example error message from StackExchange.Redis (build 1.0.450 or later), you will see that it now prints ThreadPool statistics (see IOCP and WORKER details below).</span></span>

    System.TimeoutException: Timeout performing GET MyKey, inst: 2, mgr: Inactive,
    queue: 6, qu: 0, qs: 6, qc: 0, wr: 0, wq: 0, in: 0, ar: 0,
    IOCP: (Busy=6,Free=994,Min=4,Max=1000),
    WORKER: (Busy=3,Free=997,Min=4,Max=1000)

<span data-ttu-id="abf58-471">В предыдущем примере можно увидеть, что для потока IOCP существует 6 занятых потоков, а минимальное количество потоков — 4.</span><span class="sxs-lookup"><span data-stu-id="abf58-471">In the previous example, you can see that for IOCP thread there are 6 busy threads and the system is configured to allow 4 minimum threads.</span></span> <span data-ttu-id="abf58-472">В этом случае клиент скорее всего столкнется с двумя задержками по 500 мс, так как 6 больше 4.</span><span class="sxs-lookup"><span data-stu-id="abf58-472">In this case, the client would have likely seen two 500 ms delays because 6 > 4.</span></span>

<span data-ttu-id="abf58-473">Обратите внимание, что StackExchange.Redis может достигнуть времени ожидания, если происходит регулирование количества рабочих потоков или потоков IOCP.</span><span class="sxs-lookup"><span data-stu-id="abf58-473">Note that StackExchange.Redis can hit timeouts if growth of either IOCP or WORKER threads gets throttled.</span></span>

### <a name="recommendation"></a><span data-ttu-id="abf58-474">Рекомендации</span><span class="sxs-lookup"><span data-stu-id="abf58-474">Recommendation</span></span>
<span data-ttu-id="abf58-475">С учетом этой информации мы настоятельно рекомендуем клиентам устанавливать значение параметра "Минимум" для рабочих потоков и потоков IOCP так, чтобы оно превышало значение по умолчанию.</span><span class="sxs-lookup"><span data-stu-id="abf58-475">Given this information, we strongly recommend that customers set the minimum configuration value for IOCP and WORKER threads to something larger than the default value.</span></span> <span data-ttu-id="abf58-476">Мы не можем дать универсальных рекомендаций для этого значения, так как подходящее значение для одного приложения будет слишком высоким или низким для другого приложения.</span><span class="sxs-lookup"><span data-stu-id="abf58-476">We can't give one-size-fits-all guidance on what this value should be because the right value for one application will be too high/low for another application.</span></span> <span data-ttu-id="abf58-477">Этот параметр также может повлиять на производительность других компонентов сложных приложений, поэтому каждый клиент должен точно настроить этот параметр в соответствии со своими потребностями.</span><span class="sxs-lookup"><span data-stu-id="abf58-477">This setting can also impact the performance of other parts of complicated applications, so each customer needs to fine-tune this setting to their specific needs.</span></span> <span data-ttu-id="abf58-478">Хорошей отправной точкой является 200 или 300, после чего нужно проверить и изменить этот параметр в соответствии с результатом.</span><span class="sxs-lookup"><span data-stu-id="abf58-478">A good starting place is 200 or 300, then test and tweak as needed.</span></span>

<span data-ttu-id="abf58-479">Как настроить этот параметр:</span><span class="sxs-lookup"><span data-stu-id="abf58-479">How to configure this setting:</span></span>

* <span data-ttu-id="abf58-480">В ASP.NET используйте [параметр конфигурации minIoThreads]["minIoThreads" configuration setting] в разделе элемента конфигурации `<processModel>` в файле web.config.</span><span class="sxs-lookup"><span data-stu-id="abf58-480">In ASP.NET, use the ["minIoThreads" configuration setting]["minIoThreads" configuration setting] under the `<processModel>` configuration element in web.config.</span></span> <span data-ttu-id="abf58-481">Внутри веб-сайтов Azure этот параметр недоступен для настройки.</span><span class="sxs-lookup"><span data-stu-id="abf58-481">If you are running inside of Azure WebSites, this setting is not exposed through the configuration options.</span></span> <span data-ttu-id="abf58-482">Тем не менее, его можно настроить программно (см. ниже) из метода Application_Start в файле global.asax.cs.</span><span class="sxs-lookup"><span data-stu-id="abf58-482">However, you should still be able to configure this setting programmatically (see below) from your Application_Start method in global.asax.cs.</span></span>

  > [!NOTE] 
  > <span data-ttu-id="abf58-483">В этом элементе конфигурации задается параметр *per-core*.</span><span class="sxs-lookup"><span data-stu-id="abf58-483">The value specified in this configuration element is a *per-core* setting.</span></span> <span data-ttu-id="abf58-484">Например, если у вас 4-ядерный компьютер и вы хотите установить для параметра minIOThreads значение 200 во время выполнения, то можно использовать `<processModel minIoThreads="50"/>`.</span><span class="sxs-lookup"><span data-stu-id="abf58-484">For example, if you have a 4 core machine and want your minIOThreads setting to be 200 at runtime, you would use `<processModel minIoThreads="50"/>`.</span></span>
  >

* <span data-ttu-id="abf58-485">За пределами ASP.NET используйте API [ThreadPool.SetMinThreads(…)](https://msdn.microsoft.com/library/system.threading.threadpool.setminthreads.aspx) .</span><span class="sxs-lookup"><span data-stu-id="abf58-485">Outside of ASP.NET, use the [ThreadPool.SetMinThreads(…)](https://msdn.microsoft.com/library/system.threading.threadpool.setminthreads.aspx) API.</span></span>

<a name="server-gc"></a>

### <a name="enable-server-gc-to-get-more-throughput-on-the-client-when-using-stackexchangeredis"></a><span data-ttu-id="abf58-486">Включение сборки мусора сервера для получения более высокой пропускной способности на стороне клиента при использовании StackExchange.Redis</span><span class="sxs-lookup"><span data-stu-id="abf58-486">Enable server GC to get more throughput on the client when using StackExchange.Redis</span></span>
<span data-ttu-id="abf58-487">Включение сборки мусора сервера может оптимизировать работу клиента и улучшить производительность и пропускную способность при использовании StackExchange.Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-487">Enabling server GC can optimize the client and provide better performance and throughput when using StackExchange.Redis.</span></span> <span data-ttu-id="abf58-488">Дополнительные сведения о сборке мусора сервера и о том, как ее включить, можно найти в следующих статьях:</span><span class="sxs-lookup"><span data-stu-id="abf58-488">For more information on server GC and how to enable it, see the following articles:</span></span>

* [<span data-ttu-id="abf58-489">Включение сборки мусора сервера</span><span class="sxs-lookup"><span data-stu-id="abf58-489">To enable server GC</span></span>](https://msdn.microsoft.com/library/ms229357.aspx)
* [<span data-ttu-id="abf58-490">Основные сведения о сборке мусора</span><span class="sxs-lookup"><span data-stu-id="abf58-490">Fundamentals of Garbage Collection</span></span>](https://msdn.microsoft.com/library/ee787088.aspx)
* [<span data-ttu-id="abf58-491">Сборка мусора и производительность</span><span class="sxs-lookup"><span data-stu-id="abf58-491">Garbage Collection and Performance</span></span>](https://msdn.microsoft.com/library/ee851764.aspx)


### <a name="performance-considerations-around-connections"></a><span data-ttu-id="abf58-492">Рекомендации по производительности для подключений</span><span class="sxs-lookup"><span data-stu-id="abf58-492">Performance considerations around connections</span></span>

<span data-ttu-id="abf58-493">Каждая ценовая категория имеет различные ограничения для количества клиентских подключений, памяти и пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="abf58-493">Each pricing tier has different limits for client connections, memory, and bandwidth.</span></span> <span data-ttu-id="abf58-494">Хотя каждый размер кэша *допускает* определенное число подключений, с каждым подключением к Redis связаны накладные расходы.</span><span class="sxs-lookup"><span data-stu-id="abf58-494">While each size of cache allows *up to* a certain number of connections, each connection to Redis has overhead associated with it.</span></span> <span data-ttu-id="abf58-495">Примером таких накладных расходов могут служить загрузка ЦП и использование памяти в результате шифрования TLS/SSL.</span><span class="sxs-lookup"><span data-stu-id="abf58-495">An example of such overhead would be CPU and memory usage as a result of TLS/SSL encryption.</span></span> <span data-ttu-id="abf58-496">Максимальное число подключений для данного размера кэша предполагает низкую загрузку кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-496">The maximum connection limit for a given cache size assumes a lightly loaded cache.</span></span> <span data-ttu-id="abf58-497">Если *суммарная* нагрузка, связанная с подключениями и клиентскими операциями, превышает емкость системы, могут возникнуть проблемы с работой кэша, даже если максимальное число подключений для его текущего размера не превышено.</span><span class="sxs-lookup"><span data-stu-id="abf58-497">If load from connection overhead *plus* load from client operations exceeds capacity for the system, the cache can experience capacity issues even if you have not exceeded the connection limit for the current cache size.</span></span>

<span data-ttu-id="abf58-498">Дополнительные сведения о разных пределах подключений для каждого уровня см. в статье [Цены на кэш Redis для Azure](https://azure.microsoft.com/pricing/details/cache/).</span><span class="sxs-lookup"><span data-stu-id="abf58-498">For more information about the different connections limits for each tier, see [Azure Redis Cache pricing](https://azure.microsoft.com/pricing/details/cache/).</span></span> <span data-ttu-id="abf58-499">Дополнительные сведения о подключениях и других конфигурациях по умолчанию см. в статье [Конфигурация сервера Redis по умолчанию](cache-configure.md#default-redis-server-configuration).</span><span class="sxs-lookup"><span data-stu-id="abf58-499">For more information about connections and other default configurations, see [Default Redis server configuration](cache-configure.md#default-redis-server-configuration).</span></span>

<a name="cache-monitor"></a>

### <a name="how-do-i-monitor-the-health-and-performance-of-my-cache"></a><span data-ttu-id="abf58-500">Как отслеживать работоспособность и производительность моего кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-500">How do I monitor the health and performance of my cache?</span></span>
<span data-ttu-id="abf58-501">За экземплярами кэша Redis для Microsoft Azure можно наблюдать на [портале Azure](https://portal.azure.com).</span><span class="sxs-lookup"><span data-stu-id="abf58-501">Microsoft Azure Redis Cache instances can be monitored in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="abf58-502">Вы можете просматривать метрики, закреплять диаграммы метрик на начальной панели, настраивать диапазоны дат и времени для диаграмм мониторинга, добавлять и удалять метрики в диаграммах, а также настраивать отправку оповещений при выполнении определенных условий.</span><span class="sxs-lookup"><span data-stu-id="abf58-502">You can view metrics, pin metrics charts to the Startboard, customize the date and time range of monitoring charts, add and remove metrics from the charts, and set alerts when certain conditions are met.</span></span> <span data-ttu-id="abf58-503">Дополнительные сведения см. в статье [Как отслеживать кэш Redis для Azure](cache-how-to-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-503">For more information, see [Monitor Azure Redis Cache](cache-how-to-monitor.md).</span></span>

<span data-ttu-id="abf58-504">В **меню ресурсов** кэша Redis также содержится несколько инструментов для мониторинга и устранения неполадок кэшей.</span><span class="sxs-lookup"><span data-stu-id="abf58-504">The Redis Cache **Resource menu** also contains several tools for monitoring and troubleshooting your caches.</span></span>

* <span data-ttu-id="abf58-505">**Диагностика и решение проблем** предоставляет сведения об основных проблемах и способах их устранения.</span><span class="sxs-lookup"><span data-stu-id="abf58-505">**Diagnose and solve problems** provides information about common issues and strategies for resolving them.</span></span>
* <span data-ttu-id="abf58-506">Служба **работоспособности ресурсов** отслеживает ресурс и сообщает, работает ли он как ожидалось.</span><span class="sxs-lookup"><span data-stu-id="abf58-506">**Resource health** watches your resource and tells you if it's running as expected.</span></span> <span data-ttu-id="abf58-507">Дополнительные сведения о службе работоспособности ресурсов Azure см. [здесь](../resource-health/resource-health-overview.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-507">For more information about the Azure Resource health service, see [Azure Resource health overview](../resource-health/resource-health-overview.md).</span></span>
* <span data-ttu-id="abf58-508">**Новый запрос на поддержку** , можно создать запрос по своему кэшу.</span><span class="sxs-lookup"><span data-stu-id="abf58-508">**New support request** provides options to open a support request for your cache.</span></span>

<span data-ttu-id="abf58-509">Эти инструменты позволяют наблюдать за работоспособностью экземпляров кэша Redis для Azure и помогают управлять кэшируемыми приложениями.</span><span class="sxs-lookup"><span data-stu-id="abf58-509">These tools enable you to monitor the health of your Azure Redis Cache instances and help you manage your caching applications.</span></span> <span data-ttu-id="abf58-510">Для получения дополнительной информации ознакомьтесь с разделом "Настройки поддержки и устранения неполадок" статьи [Настройка кэша Azure Redis](cache-configure.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-510">For more information, see the "Support & troubleshooting settings" section of [How to configure Azure Redis Cache](cache-configure.md).</span></span>

<a name="cache-timeouts"></a>

### <a name="why-am-i-seeing-timeouts"></a><span data-ttu-id="abf58-511">Почему я наблюдаю простои?</span><span class="sxs-lookup"><span data-stu-id="abf58-511">Why am I seeing timeouts?</span></span>
<span data-ttu-id="abf58-512">Простои происходят на клиенте, который вы используете для обращения к Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-512">Timeouts happen in the client that you use to talk to Redis.</span></span> <span data-ttu-id="abf58-513">Когда команда отправляется на сервер Redis, она помещается в очередь, и со временем сервер Redis выбирает команду и выполняет его.</span><span class="sxs-lookup"><span data-stu-id="abf58-513">When a command is sent to the Redis server, the command is queued up and Redis server eventually picks up the command and executes it.</span></span> <span data-ttu-id="abf58-514">Однако во время этого процесса клиент может простаивать, и в этом случае на вызывающей стороне возникает исключение.</span><span class="sxs-lookup"><span data-stu-id="abf58-514">However the client can time out during this process and if it does an exception is raised on the calling side.</span></span> <span data-ttu-id="abf58-515">Дополнительные сведения об устранении проблем со временем ожидания см. в разделах [Устранение проблем на стороне клиента](cache-how-to-troubleshoot.md#client-side-troubleshooting) и [Исключения времени ожидания StackExchange.Redis](cache-how-to-troubleshoot.md#stackexchangeredis-timeout-exceptions).</span><span class="sxs-lookup"><span data-stu-id="abf58-515">For more information on troubleshooting timeout issues, see [Client-side troubleshooting](cache-how-to-troubleshoot.md#client-side-troubleshooting) and [StackExchange.Redis timeout exceptions](cache-how-to-troubleshoot.md#stackexchangeredis-timeout-exceptions).</span></span>

<a name="cache-disconnect"></a>

### <a name="why-was-my-client-disconnected-from-the-cache"></a><span data-ttu-id="abf58-516">Почему мой клиент был отключен от кэша?</span><span class="sxs-lookup"><span data-stu-id="abf58-516">Why was my client disconnected from the cache?</span></span>
<span data-ttu-id="abf58-517">Ниже приведены некоторые распространенные причины отключения кэша.</span><span class="sxs-lookup"><span data-stu-id="abf58-517">The following are some common reason for a cache disconnect.</span></span>

* <span data-ttu-id="abf58-518">Причины на стороне клиента</span><span class="sxs-lookup"><span data-stu-id="abf58-518">Client-side causes</span></span>
  * <span data-ttu-id="abf58-519">Клиентское приложение было развернуто повторно.</span><span class="sxs-lookup"><span data-stu-id="abf58-519">The client application was redeployed.</span></span>
  * <span data-ttu-id="abf58-520">Клиентское приложение выполняло операцию масштабирования.</span><span class="sxs-lookup"><span data-stu-id="abf58-520">The client application performed a scaling operation.</span></span>
    * <span data-ttu-id="abf58-521">В случае облачных служб или веб-приложений это может быть следствием автоматического масштабирования.</span><span class="sxs-lookup"><span data-stu-id="abf58-521">In the case of Cloud Services or Web Apps, this may be due to auto-scaling.</span></span>
  * <span data-ttu-id="abf58-522">Изменен сетевой уровень на стороне клиента.</span><span class="sxs-lookup"><span data-stu-id="abf58-522">The networking layer on the client side changed.</span></span>
  * <span data-ttu-id="abf58-523">Возникла временная ошибка на клиенте или в узлах сети между клиентом и сервером.</span><span class="sxs-lookup"><span data-stu-id="abf58-523">Transient errors occurred in the client or in the network nodes between the client and the server.</span></span>
  * <span data-ttu-id="abf58-524">Было достигнуто предельное пороговое значение пропускной способности.</span><span class="sxs-lookup"><span data-stu-id="abf58-524">The bandwidth threshold limits were reached.</span></span>
  * <span data-ttu-id="abf58-525">Выполнение операций, связанных с ЦП, заняло слишком много времени.</span><span class="sxs-lookup"><span data-stu-id="abf58-525">CPU bound operations took too long to complete.</span></span>
* <span data-ttu-id="abf58-526">Причины на стороне сервера</span><span class="sxs-lookup"><span data-stu-id="abf58-526">Server-side causes</span></span>
  * <span data-ttu-id="abf58-527">В предложении кэша Standard служба кэша Redis для Azure инициировала отработку отказа с переходом с основного узла на вторичный узел.</span><span class="sxs-lookup"><span data-stu-id="abf58-527">On the standard cache offering, the Azure Redis Cache service initiated a fail-over from the primary node to the secondary node.</span></span>
  * <span data-ttu-id="abf58-528">В Azure было выполнено исправление экземпляра, в котором был развернут кэш.</span><span class="sxs-lookup"><span data-stu-id="abf58-528">Azure was patching the instance where the cache was deployed</span></span>
    * <span data-ttu-id="abf58-529">Это могли быть обновления сервера Redis или обычное обслуживание ВМ.</span><span class="sxs-lookup"><span data-stu-id="abf58-529">This can be for Redis server updates or general VM maintenance.</span></span>

### <a name="which-azure-cache-offering-is-right-for-me"></a><span data-ttu-id="abf58-530">Какой кэш Azure подходит мне?</span><span class="sxs-lookup"><span data-stu-id="abf58-530">Which Azure Cache offering is right for me?</span></span>
> [!IMPORTANT]
> <span data-ttu-id="abf58-531">Согласно прошлогоднему [объявлению](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/), использование управляемой службы кэша Azure и службы кэша роли Azure **было прекращено** 30 ноября 2016 г.</span><span class="sxs-lookup"><span data-stu-id="abf58-531">As per last year's [announcement](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/), Azure Managed Cache Service and Azure In-Role Cache service **have been retired** on November 30, 2016.</span></span> <span data-ttu-id="abf58-532">Мы рекомендуем использовать [кэш Redis для Azure](https://azure.microsoft.com/services/cache/).</span><span class="sxs-lookup"><span data-stu-id="abf58-532">Our recommendation is to use [Azure Redis Cache](https://azure.microsoft.com/services/cache/).</span></span> <span data-ttu-id="abf58-533">Дополнительные сведения о переходе на новую службу см. в статье [Перенос из управляемой службы кэша в кэш Redis для Azure](cache-migrate-to-redis.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-533">For information on migrating, see [Migrate from Managed Cache Service to Azure Redis Cache](cache-migrate-to-redis.md).</span></span>
>
>

### <a name="azure-redis-cache"></a><span data-ttu-id="abf58-534">кэш Azure Redis</span><span class="sxs-lookup"><span data-stu-id="abf58-534">Azure Redis Cache</span></span>
<span data-ttu-id="abf58-535">Кэш Redis для Azure, как правило, доступен в размере до 53 ГБ, а доступность по соглашению об уровне обслуживания составляет 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="abf58-535">Azure Redis Cache is Generally Available in sizes up to 53 GB and has an availability SLA of 99.9%.</span></span> <span data-ttu-id="abf58-536">Новый [уровень "Премиум"](cache-premium-tier-intro.md) доступен в предварительной версии: предлагается до 530 ГБ и поддержка кластеризации, виртуальной сети и сохраняемости в соответствии с соглашением об уровне обслуживания 99,9 %.</span><span class="sxs-lookup"><span data-stu-id="abf58-536">The new [premium tier](cache-premium-tier-intro.md) offers sizes up to 530 GB and support for clustering, VNET, and persistence, with a 99.9% SLA.</span></span>

<span data-ttu-id="abf58-537">Кэш Redis для Azure позволяет клиентам использовать безопасный выделенный кэш Redis, управляемый Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="abf58-537">Azure Redis Cache gives customers the ability to use a secure, dedicated Redis cache, managed by Microsoft.</span></span> <span data-ttu-id="abf58-538">В рамках этого предложения вам доступны широкий набор функций и экосистема от Redis, а также надежное размещение и мониторинг от Майкрософт.</span><span class="sxs-lookup"><span data-stu-id="abf58-538">With this offer, you get to leverage the rich feature set and ecosystem provided by Redis, and reliable hosting and monitoring from Microsoft.</span></span>

<span data-ttu-id="abf58-539">В отличие от обычных кэшей, работающих только с парами «ключ — значение», Redis популярен благодаря его высокоэффективным типам данных.</span><span class="sxs-lookup"><span data-stu-id="abf58-539">Unlike traditional caches which deal only with key-value pairs, Redis is popular for its highly performant data types.</span></span> <span data-ttu-id="abf58-540">Redis также поддерживает выполнение атомарных операций с этими типами, включая добавление в строку, инкрементное увеличение значения в хэше, публикация в список, вычисление пересечения, объединения и разницы в наборе; получение элемента с наивысшим рейтингом в сохраненном наборе.</span><span class="sxs-lookup"><span data-stu-id="abf58-540">Redis also supports running atomic operations on these types, like appending to a string; incrementing the value in a hash; pushing to a list; computing set intersection, union and difference; or getting the member with highest ranking in a sorted set.</span></span> <span data-ttu-id="abf58-541">К другим функциям относится поддержка транзакций, публикации и подписок, скрипты Lua, ключи с ограниченным сроком жизни и параметры конфигурации, настройка которых обеспечивает схожее с традиционным кэшем поведение Redis.</span><span class="sxs-lookup"><span data-stu-id="abf58-541">Other features include support for transactions, pub/sub, Lua scripting, keys with a limited time-to-live, and configuration settings to make Redis behave more like a traditional cache.</span></span>

<span data-ttu-id="abf58-542">Другой важный фактор успеха Redis — это жизнеспособная, активно развивающаяся экосистема с открытым исходным кодом, построенная вокруг него.</span><span class="sxs-lookup"><span data-stu-id="abf58-542">Another key aspect to Redis success is the healthy, vibrant open source ecosystem built around it.</span></span> <span data-ttu-id="abf58-543">Это отражено в различных наборах клиентов Redis, доступных на разных языках.</span><span class="sxs-lookup"><span data-stu-id="abf58-543">This is reflected in the diverse set of Redis clients available across multiple languages.</span></span> <span data-ttu-id="abf58-544">Данная экосистема и широкий диапазон клиентов позволяют использовать кэш Redis для Azure практически для любой рабочей нагрузки, создаваемой в Azure.</span><span class="sxs-lookup"><span data-stu-id="abf58-544">This ecosystem and wide range of clients allow Azure Redis Cache to be used by nearly any workload you would build inside of Azure.</span></span>

<span data-ttu-id="abf58-545">Дополнительные сведения о начале работы с кэшем Redis для Azure см. в статье [Как использовать кэш Redis для Azure](cache-dotnet-how-to-use-azure-redis-cache.md) и на странице с [документацией по кэшу Redis для Azure](index.md).</span><span class="sxs-lookup"><span data-stu-id="abf58-545">For more information about getting started with Azure Redis Cache, see [How to Use Azure Redis Cache](cache-dotnet-how-to-use-azure-redis-cache.md) and [Azure Redis Cache documentation](index.md).</span></span>

### <a name="managed-cache-service"></a><span data-ttu-id="abf58-546">Управляемая служба кэша</span><span class="sxs-lookup"><span data-stu-id="abf58-546">Managed Cache service</span></span>
[<span data-ttu-id="abf58-547">Использование управляемой службы кэша было прекращено 30 ноября 2016 г.</span><span class="sxs-lookup"><span data-stu-id="abf58-547">Managed Cache service was retired November 30, 2016.</span></span>](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/)

<span data-ttu-id="abf58-548">Архив документации можно найти на [этой странице](https://msdn.microsoft.com/library/azure/dn386094.aspx).</span><span class="sxs-lookup"><span data-stu-id="abf58-548">To view archived documentation, see [Archived Managed Cache Service Documentation](https://msdn.microsoft.com/library/azure/dn386094.aspx).</span></span>

### <a name="in-role-cache"></a><span data-ttu-id="abf58-549">Кэш в роли</span><span class="sxs-lookup"><span data-stu-id="abf58-549">In-Role Cache</span></span>
[<span data-ttu-id="abf58-550">Использование службы кэша роли было прекращено 30 ноября 2016 г.</span><span class="sxs-lookup"><span data-stu-id="abf58-550">In-Role Cache was retired November 30, 2016.</span></span>](https://azure.microsoft.com/blog/azure-managed-cache-and-in-role-cache-services-to-be-retired-on-11-30-2016/)

<span data-ttu-id="abf58-551">Архив документации можно найти на [этой странице](https://msdn.microsoft.com/library/azure/dn386103.aspx).</span><span class="sxs-lookup"><span data-stu-id="abf58-551">To view archived documentation, see [Archived In-Role Cache Documentation](https://msdn.microsoft.com/library/azure/dn386103.aspx).</span></span>

["minIoThreads" configuration setting]: https://msdn.microsoft.com/library/vstudio/7w2sway1(v=vs.100).aspx
