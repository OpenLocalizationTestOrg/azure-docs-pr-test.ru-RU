---
title: "aaaHow toomonitor кэша Redis для Azure | Документы Microsoft"
description: "Узнайте, как toomonitor hello работоспособности и производительности своих экземпляров кэша Redis для Azure"
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 7e70b153-9c87-4290-85af-2228f31df118
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: sdanie
ms.openlocfilehash: c474d485dfcbb109d5bb634a980f6db080598e13
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-toomonitor-azure-redis-cache"></a>Как toomonitor Redis для Azure кэша
Использует кэш Azure Redis [монитора Azure](https://docs.microsoft.com/azure/monitoring-and-diagnostics/) tooprovide несколько возможностей отслеживания экземпляров кэша. Можно просмотреть метрики, закрепить диаграммы метрик toohello начальной панели, настроить hello диапазон дат и времени диаграмм мониторинга, добавить и удалить метрики из диаграмм hello и настроить оповещения при выполнении определенных условий. Эти средства включите вы toomonitor hello работоспособности экземпляров кэша Redis для Azure и сведения об управлении приложениями кэширования.

Метрики для кэша Redis для Azure экземпляров собранных с помощью hello Redis [сведения](http://redis.io/commands/info) примерно вдвое команды за минуты и автоматически сохраняются в течение 30 дней (см. [Экспорт метрик кэша](#export-cache-metrics) tooconfigure Политика хранения разных), отображаемых в диаграммах метрик hello и оценки правилами оповещений. Дополнительные сведения о hello различные сведения значения для каждой метрики кэша см. в разделе [доступные метрики и интервалы отчетности](#available-metrics-and-reporting-intervals).

<a name="view-cache-metrics"></a>

метрики кэша tooview, [Обзор](cache-configure.md#configure-redis-cache-settings) tooyour экземпляра кэша в hello [портал Azure](https://portal.azure.com).  Кэш Azure Redis предоставляет некоторые встроенные диаграммы на hello **Обзор** колонки и hello **Redis метрики** колонку. Каждая диаграмма может настраиваться путем добавления или удаления метрик и изменения отчетного интервала hello.

![Метрики Redis](./media/cache-how-to-monitor/redis-cache-redis-metrics-blade.png)

## <a name="view-pre-configured-metrics-charts"></a>Просмотр предварительно настроенных диаграмм метрик

Hello **Обзор** колонке имеет следующие предварительно настроенные диаграммы мониторинга hello.

* [Диаграммы мониторинга](#monitoring-charts)
* [Диаграммы использования](#usage-charts)

### <a name="monitoring-charts"></a>Диаграммы мониторинга
Hello **мониторинг** раздела hello **Обзор** колонке **попаданий и промахов**, **возвращает и задает**, **подключений**, и **всего команд** диаграммы.

![Диаграммы мониторинга](./media/cache-how-to-monitor/redis-cache-monitoring-part.png)

### <a name="usage-charts"></a>Диаграммы использования
Hello **использование** раздела hello **Обзор** колонке **нагрузки на сервер Redis**, **использование памяти**, **пропускная способность сети** , и **ЦП** диаграммы, а также отображает hello **Ценовая категория** для экземпляра кэша hello.

![Диаграммы использования](./media/cache-how-to-monitor/redis-cache-usage-part.png)

Hello **Ценовая категория** стоимость кэша отображает hello уровня и может использоваться слишком[шкалы](cache-how-to-scale.md) hello кэша tooa различных ценовой категории.

## <a name="view-metrics-with-azure-monitor"></a>Просмотр метрик с помощью Azure Monitor
tooview Redis показатели и создание пользовательских диаграмм с помощью монитора Azure щелкните **метрики** из hello **ресурсов меню**и настраивать диаграммы с использованием требуемого hello метрик, отчетного интервала тип диаграммы и Дополнительные.

![Метрики Redis](./media/cache-how-to-monitor/redis-cache-monitor.png)

Дополнительные сведения о работе с метриками в Azure Monitor см. в статье [Обзор метрик в Microsoft Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md).

<a name="how-to-view-metrics-and-customize-chart"></a>
<a name="enable-cache-diagnostics"></a>
## <a name="export-cache-metrics"></a>Экспорт метрик кэша
По умолчанию в Azure Monitor метрики кэша [хранятся в течение 30 дней](../monitoring-and-diagnostics/monitoring-overview-azure-monitor.md#store-and-archive), а затем удаляются. toopersist показатели кэша более 30 дней, вы можете [назначить учетную запись хранения](../monitoring-and-diagnostics/monitoring-archive-diagnostic-logs.md) и укажите **хранения (в днях)** политику для метрик вашего кэша. 

tooconfigure учетную запись хранения для вашей метрик кэша:

1. Нажмите кнопку **диагностики** из hello **ресурсов меню** в hello **кэша Redis** колонку.
2. Щелкните **Вкл.**
3. Проверьте **архивировать учетной записи хранилища tooa**.
4. Выберите учетную запись хранения hello в какие метрики кэша toostore hello.
5. Проверьте hello **1 минута** флажок и укажите **хранения (в днях)** политики. Если не хотите tooapply любую политику хранения и сохранения данных, установите **хранения (в днях)** слишком**0**.
6. Щелкните **Сохранить**.

![Диагностика Redis](./media/cache-how-to-monitor/redis-cache-diagnostics.png)

>[!NOTE]
>В дополнение tooarchiving toostorage метрик вашего кэша, вы также можете [поток их tooan концентратора событий или отправлять их tooLog Analytics](../monitoring-and-diagnostics/monitoring-overview-metrics.md#export-metrics).
>
>

tooaccess показатели, их можно просмотреть в hello портал Azure, как описано выше в этой статье, и их также можно использовать с помощью hello [API REST метрик монитор Azure](../monitoring-and-diagnostics/monitoring-overview-metrics.md#access-metrics-via-the-rest-api).

> [!NOTE]
> При изменении учетных записей хранилища данных hello в учетной записи хранения hello ранее настроенные остается доступной для загрузки, но не отображается в hello портал Azure.  
> 
> 

## <a name="available-metrics-and-reporting-intervals"></a>Доступные метрики и интервалы отчетности
Показатели кэша регистрируются с определенной периодичностью: **за последний час**, **за сегодня**, **за последнюю неделю** и с **настраиваемым** интервалом. Hello **метрика** колонку для каждой диаграммы метрик отображает hello среднее, минимальное и максимальное значения для каждой метрики в диаграмме hello и некоторых метриках отображается общее для отчетного интервала hello. 

Каждый показатель имеет две версии. Одна метрика измеряет производительность для hello весь кэш, а также для кэшей, использующих [кластеризации](cache-how-to-premium-clustering.md), вторая версия hello метрики, включающий `(Shard 0-9)` hello имя меры производительности одного сегмента в кэше. Например если кэша имеет 4 сегмента `Cache Hits` — общее количество попаданий в кэш целиком hello, hello и `Cache Hits (Shard 3)` является просто hello попаданий для своего сегмента hello кэша.

> [!NOTE]
> Даже если hello кэш не используется без подключенных активных клиентских приложений, вы можете увидеть некоторые действия с кэшем, например подключенных клиентов, использование памяти и операция не выполняется. Это действие является нормальным во время операции hello экземпляра кэша Redis для Azure.
> 
> 

| Метрика | Описание |
| --- | --- |
| Попаданий в кэш |Количество успешных просмотров ключа указанного интервала отчетности hello Hello. Это соответствует слишком`keyspace_hits` из hello Redis [сведения](http://redis.io/commands/info) команды. |
| Промахов в кэше |Количество неудачных просмотров ключа указанного интервала отчетности hello Hello. Это соответствует слишком`keyspace_misses` из hello команду Redis INFO. Промахи в кэше не обязательно означает, что имеется проблема с кэшем hello. Например при использовании модель программирования отдельно от кэша hello, приложение сначала ищет элемент в кеше hello. Если hello элемент отсутствует (Промах кэша), hello элемента извлекается из базы данных hello и добавляется toohello кэша для следующего входа. Промахи в кэше — это нормальное поведение для hello модель программирования отдельно от кэша. Если hello число промахов кэша выше, чем ожидалось, проанализируйте логику приложения hello, который заполняет и операций чтения из кэша hello. Если элементы удаляются из кэша hello из-за нехватки toomemory затем может быть несколько промахов в кэше, но лучше метрики toomonitor на нехватку памяти будет `Used Memory` или `Evicted Keys`. |
| Подключенные клиенты |Hello число клиентских подключений toohello кэша hello указанный период отчетности. Это соответствует слишком`connected_clients` из hello команду Redis INFO. Здравствуйте, один раз [предел для числа подключений](cache-configure.md#default-redis-server-configuration) достигается последующие попытки подключения toohello кэша завершится ошибкой. Обратите внимание, что даже если есть нет активных клиентских приложений, может быть несколько экземпляров подключенных клиентов из-за toointernal процессов и подключений. |
| Исключенные ключи |Hello число элементов, удаленных из кэша hello во время hello указанного интервала отчетности из-за toohello `maxmemory` ограничение. Это соответствует слишком`evicted_keys` из hello команду Redis INFO. |
| Ключи с истекшим сроком действия |количество элементов в Hello истек срок действия из кэша hello hello указанный период отчетности. Это значение соответствует слишком`expired_keys` из hello команду Redis INFO. |
| Всего ключей  | Hello максимальное число ключей hello в кэше в течение hello за отчетный период времени. Это соответствует слишком`keyspace` из hello команду Redis INFO. Из-за ограничения tooa hello базовой системы показателей, для кэшей с включенной кластеризацией всего ключей возвращает максимальное число ключей hello сегментов, который имел hello максимальное число ключей hello отчетного интервала для hello.  |
| Операций считывания |Количество операций извлечения из кэша hello указанный период отчетности hello Hello. Это значение является сумма hello hello следующие значения из hello Redis INFO все команды: `cmdstat_get`, `cmdstat_hget`, `cmdstat_hgetall`, `cmdstat_hmget`, `cmdstat_mget`, `cmdstat_getbit`, и `cmdstat_getrange`, и является суммой эквивалентные toohello попаданий в кэш и Промахов в течение отчетного интервала hello. |
| Загрузка сервера Redis |Процент циклов, в какие hello сервер Redis — выполняет обработку, а не в состоянии простоя для сообщений Hello. Если этот счетчик достигает 100, это значит, сервер Redis hello достиг ceiling производительности и не может обработать hello ЦП работе любой быстрее. Если вы видите высокой нагрузки на сервер Redis вы увидите исключений таймаута в клиенте hello. В этом случае имеет смысл увеличить масштаб или сегментировать данные на несколько экземпляров кэша. |
| Операций записи |Номер Hello кэша toohello набор операций во время hello указан интервал отчетности. Это значение является сумма hello hello следующие значения из hello Redis INFO все команды: `cmdstat_set`, `cmdstat_hset`, `cmdstat_hmset`, `cmdstat_hsetnx`, `cmdstat_lset`, `cmdstat_mset`, `cmdstat_msetnx`, `cmdstat_setbit`, `cmdstat_setex`, `cmdstat_setrange` , и `cmdstat_setnx`. |
| Всего операций |Hello общее число команд, обработанных сервером кэша hello hello указанного интервала отчетности. Это значение соответствует слишком`total_commands_processed` из hello команду Redis INFO. Обратите внимание, что при использовании исключительно для публикации и подписке кэша Redis для Azure будет метрики для `Cache Hits`, `Cache Misses`, `Gets`, или `Sets`, но будет `Total Operations` метрики, которые отражают использование кэша hello для операций публикации или подписки. |
| Используемая память |Hello объем кэш-памяти во время hello используется для пар ключ/значение в кэше hello в МБ указанного интервала отчетности. Это значение соответствует слишком`used_memory` из hello команду Redis INFO. Не содержит метаданных или фрагментации. |
| RSS используемой памяти |Hello объем кэш-памяти, используемый hello указанный период отчетности, включая фрагментации и метаданных. Это значение соответствует слишком`used_memory_rss` из hello команду Redis INFO. |
| ЦП |Hello ЦП сервера кэша Redis для Azure hello в процентах во время hello указанного интервала отчетности. Это значение соответствует операционной системе toohello `\Processor(_Total)\% Processor Time` счетчика производительности. |
| Чтение из кэша |Hello объем данных, считанных из кэша hello в мегабайтах в секунду (МБИТ/с) во время hello указанного интервала отчетности. Это значение является производным от hello сетевые адаптеры, поддерживающие hello виртуальной машины, где размещена кэша hello и является не Redis определенных. **Это значение соответствует toohello использование пропускной способности сети этот кэш. Если требуется tooset предупреждений для ограничения пропускной способности сети стороны сервера, создайте его с помощью этого `Cache Read` счетчика. В разделе [в этой таблице](cache-faq.md#cache-performance) для hello наблюдается ограничения пропускной способности для различных кэша цены уровни и размеры.** |
| Запись в кэш |Здравствуйте, объем данных, записанных toohello кэша в мегабайтах в секунду (МБИТ/с) во время указанного интервала отчетности hello. Это значение является производным от hello сетевые адаптеры, поддерживающие hello виртуальной машины, где размещена кэша hello и является не Redis определенных. Это значение соответствует toohello пропускной способности сети данных, передаваемых от клиента hello toohello кэша. |

<a name="operations-and-alerts"></a>
## <a name="alerts"></a>Оповещения
Можно настроить предупреждения tooreceive, основанные на журналах метрик и действия. Монитор Azure позволяет tooconfigure предупреждения toodo hello следующие при инициировании:

* Отправка уведомления по электронной почте.
* Вызов webhook.
* Вызов приложения логики Azure.

правила оповещения tooconfigure для кэша, нажмите кнопку **предупреждения правила** из hello **ресурсов меню**.

![Мониторинг](./media/cache-how-to-monitor/redis-cache-monitoring.png)

Дополнительные сведения о настройке и использовании оповещений см. в статье [Создание оповещений метрик в Azure Monitor для служб Azure с помощью портала Azure](../monitoring-and-diagnostics/insights-alerts-portal.md).

## <a name="activity-logs"></a>Журналы действий
Журналы действий глубже понять hello операций, которые были выполнены на своих экземпляров кэша Redis для Azure. Ранее они назывались журналами аудита или журналами операций. Используя журналы действий, можно определить hello», кто и когда» для любой записи операций (PUT, POST, DELETE), затраченное на своих экземпляров кэша Redis для Azure. 

> [!NOTE]
> Журнал действий не содержит сведений об операциях чтения (GET).
>
>

журналы действий tooview своего кэша щелкните **журналы действий** из hello **ресурсов меню**.

Дополнительные сведения о журналах действий см. в разделе [Обзор hello журнал действий Azure](../monitoring-and-diagnostics/monitoring-overview-activity-logs.md).











