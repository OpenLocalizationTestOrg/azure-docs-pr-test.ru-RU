---
title: "tooconfigure aaaHow георепликации для кэша Azure Redis | Документы Microsoft"
description: "Узнайте, как tooreplicate кэша Azure Redis Cache экземпляров разных географических регионах."
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 375643dc-dbac-4bab-8004-d9ae9570440d
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/06/2017
ms.author: sdanie
ms.openlocfilehash: edcd6f202b51055d1a4e47ecaf11f9977d50aa81
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="how-tooconfigure-geo-replication-for-azure-redis-cache"></a>Как tooconfigure географической репликации для кэша Redis для Azure

Георепликация предоставляет механизм связывания двух экземпляров кэша Redis для Azure уровня "Премиум". Один кэш используется в качестве основных связанный кэш hello и hello других получателей связанного кэширования hello. Hello дополнительных связанных кэш становится доступным только для чтения и репликации данных, является запись toohello основных кэш toohello дополнительных связанный кэш. Эта возможность может быть используется tooreplicate кэша в разных регионах Azure. Эта статья содержит руководство по tooconfiguring георепликации для своих экземпляров кэша Redis для Azure уровня Premium.

## <a name="geo-replication-prerequisites"></a>Предварительные требования георепликации

tooconfigure географическую репликацию данных между двумя кэшами, hello следующие предварительные условия должны быть выполнены.

- Оба кэша должны относиться к [уровню "Премиум"](cache-premium-tier-intro.md).
- Оба кэши должны находиться в hello одной подписке.
- Hello дополнительных связанных кэш должен быть либо hello же ценовой уровень или большего размера цен, чем hello основных связанный кэш.
- Если hello основных связанный кэш включенной кластеризацией, hello дополнительных связанных кэш должен быть кластеризации включено с hello одинаковое количество сегментов в качестве первичного связанного кэша hello.
- Оба кэша должны быть созданы и находиться в состоянии выполнения.
- Сохраняемость не должна быть включена ни на одном из кэшей.
- Географическую репликацию данных между кэшами в hello поддерживается одной виртуальной сети. Географическая репликация между кэшами в разных виртуальных сетей также поддерживается, при условии, что hello двух виртуальных сетей настроены таким образом, ресурсы в виртуальных сетях hello может tooreach друг с другом через TCP-подключений.

После настройки георепликации hello применяются следующие ограничения tooyour пару связанных кэша.

- Hello дополнительных связанных кэш только для чтения. можно читать из него, но не удается записать все tooit данных. 
- Удаляются все данные в дополнительных связанных кэш hello до добавления ссылки hello. Если hello георепликации впоследствии удаляется тем не менее, hello реплицируются данные останутся в дополнительных связанных кэш hello.
- Не удалось инициировать [операция масштабирования](cache-how-to-scale.md) на любом кэша или [изменить hello количество сегментов](cache-how-to-premium-clustering.md) Если кэш hello включенной кластеризацией.
- Ни на одном из кэше не удастся включить сохраняемость.
- Можно использовать [Экспорт](cache-how-to-import-export-data.md#export) с либо кэш, но вы можете только [импорта](cache-how-to-import-export-data.md#import) в основной hello связаны кэша.
- Невозможно удалить связанный кэш или hello группы ресурсов, содержащий их, пока вы не удалите hello связи георепликации. Дополнительные сведения см. в разделе [причины hello неудачи операции удается toodelete Мой связанного кэша?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)
- Если два кэша hello находятся в разных регионах, расходы на исходящие данные сети будут применяться toohello данные реплицируются во всех регионах toohello дополнительных связанный кэш. Дополнительные сведения см. в разделе [выполняет сколько стоит tooreplicate данных разных регионах Azure?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)
- Отсутствует автоматический переход на другой toohello получателей связанный кэш-память если отключается основных кэш hello (и его репликой). В клиентских приложениях toofailover заказа потребовалось бы hello георепликации toomanually удалить связь и точки toohello приложения hello клиента кэша, ранее был hello дополнительных связанный кэш. Дополнительные сведения см. в разделе [как работает автоматическое переключение toohello дополнительных связанных кэш?](#how-does-failing-over-to-the-secondary-linked-cache-work)

## <a name="add-a-geo-replication-link"></a>Добавление связи георепликации

1. toolink два premium кэширует вместе для георепликации, нажмите кнопку **георепликации** меню ресурса hello кэша hello предназначен как основной hello связаны кэша и нажмите кнопку **связь репликации кэша добавить**из hello **георепликации** колонку.

    ![Добавление связи](./media/cache-how-to-geo-replication/cache-geo-location-menu.png)

2. Щелкните имя требуемого hello кэш второго уровня hello hello **совместимый кэши** списка. Если нужного кэша не отображается в списке hello, убедитесь, что hello [георепликации необходимые компоненты](#geo-replication-prerequisites) для hello требуемого соблюдены кэша получателей. кэши toofilter hello по регионам, щелкните нужный регион hello в toodisplay карты hello только те кэши в hello **совместимый кэши** списка.

    ![Кэши, совместимые с георепликацией](./media/cache-how-to-geo-replication/cache-geo-location-select-link.png)
    
    Можно также запустить hello, связывание с помощью контекстного меню hello процесса или представления сведения о дополнительных кэш hello.

    ![Контекстное меню георепликации](./media/cache-how-to-geo-replication/cache-geo-location-select-link-context-menu.png)

3. Нажмите кнопку **ссылку** toolink hello друг с другом два кэша и начать процесс репликации hello.

    ![Связывание кэшей](./media/cache-how-to-geo-replication/cache-geo-location-confirm-link.png)

4. Вы можете просмотреть ход выполнения процесса репликации hello hello на hello **георепликации** колонку.

    ![Состояние связывания](./media/cache-how-to-geo-replication/cache-geo-location-linking.png)

    Вы также можете просмотреть hello связывания состояние hello **Обзор** колонку для обоих первичных и вторичных кэшей hello.

    ![Состояние кэша](./media/cache-how-to-geo-replication/cache-geo-location-link-status.png)

    После завершения процесса репликации hello hello **связать статус** изменяет слишком**успешно**.

    ![Состояние кэша](./media/cache-how-to-geo-replication/cache-geo-location-link-successful.png)

    Во время процесса связывания hello hello основных связанный кэш остается доступным для использования, но hello дополнительных связанных кэш недоступен, пока не завершится процесс связывания hello.

## <a name="remove-a-geo-replication-link"></a>Удаление связи георепликации

1. tooremove hello взаимосвязь два кэша и остановка георепликации, выберите **разорвать связь кэши** из hello **георепликации** колонку.
    
    ![Удаление связи кэшей](./media/cache-how-to-geo-replication/cache-geo-location-unlink.png)

    После завершения процесса отсоединение hello hello дополнительных кэш доступен для чтения и записывает.

>[!NOTE]
>При удалении связи hello географической репликации hello реплицированные данные hello основных связанный кэш остается в кэше получателей hello.
>
>

## <a name="geo-replication-faq"></a>Часто задаваемые вопросы по георепликации

- [Можно ли использовать георепликацию с кэшем уровня "Стандартный" или "Базовый"?](#can-i-use-geo-replication-with-a-standard-or-basic-tier-cache)
- [Мои кэш доступен для использования во время связывания hello или отсоединение процесса?](#is-my-cache-available-for-use-during-the-linking-or-unlinking-process)
- [Можно ли связать больше двух кэшей?](#can-i-link-more-than-two-caches-together)
- [Можно ли связать два кэша из разных подписок Azure?](#can-i-link-two-caches-from-different-azure-subscriptions)
- [Можно ли связать два кэша с разными размерами?](#can-i-link-two-caches-with-different-sizes)
- [Можно ли использовать георепликацию при включенной кластеризации?](#can-i-use-geo-replication-with-clustering-enabled)
- [Можно ли использовать георепликацию, если кэши находятся в виртуальной сети?](#can-i-use-geo-replication-with-my-caches-in-a-vnet)
- [Можно использовать PowerShell или Azure CLI toomanage георепликации](#can-i-use-powershell-or-azure-cli-to-manage-geo-replication)
- [Сколько стоит tooreplicate данных разных регионах Azure?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)
- [Почему hello операции не удается toodelete Мой связанного кэша?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)
- [Какой регион лучше использовать для дополнительного связанного кэша?](#what-region-should-i-use-for-my-secondary-linked-cache)
- [Как работает автоматическое переключение toohello дополнительных связанных кэш?](#how-does-failing-over-to-the-secondary-linked-cache-work)

### <a name="can-i-use-geo-replication-with-a-standard-or-basic-tier-cache"></a>Можно ли использовать георепликацию с кэшем уровня "Стандартный" или "Базовый"?

Нет. Георепликация доступна только для кэшей категории "Премиум".

### <a name="is-my-cache-available-for-use-during-hello-linking-or-unlinking-process"></a>Мои кэш доступен для использования во время связывания hello или отсоединение процесса?

- При связывании двух кэшей вместе для географической репликации, hello основных связанный кэш остается доступным для использования, но hello дополнительных связанных кэш недоступен, пока не завершится процесс связывания hello.
- При удалении hello георепликации связь между двумя кэши, остаются доступными для использования обоих кэшей.

### <a name="can-i-link-more-than-two-caches-together"></a>Можно ли связать больше двух кэшей?

Нет. При использовании георепликации можно связать друг с другом только два кэша.

### <a name="can-i-link-two-caches-from-different-azure-subscriptions"></a>Можно ли связать два кэша из разных подписок Azure?

Нет, обе кэши должны находиться в hello одной подписке.

### <a name="can-i-link-two-caches-with-different-sizes"></a>Можно ли связать два кэша с разными размерами?

Да, при условии, что hello дополнительных связанных кэш больше, чем hello основных связанный кэш.

### <a name="can-i-use-geo-replication-with-clustering-enabled"></a>Можно ли использовать георепликацию при включенной кластеризации?

Да, при условии, что оба кэши имеют hello одинаковое число сегментов.

### <a name="can-i-use-geo-replication-with-my-caches-in-a-vnet"></a>Можно ли использовать георепликацию, если кэши находятся в виртуальной сети?

Да. Георепликация кэшей в виртуальных сетях поддерживается. 

- Географическую репликацию данных между кэшами в hello поддерживается одной виртуальной сети.
- Географическая репликация между кэшами в разных виртуальных сетей также поддерживается, при условии, что hello двух виртуальных сетей настроены таким образом, ресурсы в виртуальных сетях hello может tooreach друг с другом через TCP-подключений.

### <a name="can-i-use-powershell-or-azure-cli-toomanage-geo-replication"></a>Можно использовать PowerShell или Azure CLI toomanage георепликации

В настоящее время можно управлять только с помощью георепликации hello портал Azure.

### <a name="how-much-does-it-cost-tooreplicate-my-data-across-azure-regions"></a>Сколько стоит tooreplicate данных разных регионах Azure?

При использовании георепликации, данные из основных связанный кэш hello — вторичная связанных реплицированных toohello кэша. Если связанный hello двух кэшей будут находиться в hello же регионе Azure является бесплатной для передачи данных hello. Если hello двух связанных кэшей будут находиться в разных регионах Azure, hello географическую репликацию данных и плата за передачу hello стоимость пропускной способности репликации, toohello данных других регион Azure. Дополнительные сведения см. на странице [Сведения о стоимости пропускной способности](https://azure.microsoft.com/pricing/details/bandwidth/).

### <a name="why-did-hello-operation-fail-when-i-tried-toodelete-my-linked-cache"></a>Почему hello операции не удается toodelete Мой связанного кэша?

Когда два кэша связаны друг с другом, нельзя удалить кэш или hello группы ресурсов, содержащий их, пока вы не удалите hello связи георепликации. При попытке группу ресурсов hello toodelete, содержит одну или обе hello связаны кэши, hello другие ресурсы в группе ресурсов hello удаляются, но группа ресурсов hello остается в hello `deleting` состояние и все связанные кэши в группе ресурсов hello оставаться в hello `running` состояния. toocomplete hello удаления группы ресурсов hello и hello связанных кэши в рамках его разрыв связи hello географической репликации, как описано в [к удалению связи георепликации](#remove-a-geo-replication-link).

### <a name="what-region-should-i-use-for-my-secondary-linked-cache"></a>Какой регион лучше использовать для дополнительного связанного кэша?

В общем случае рекомендуется для вашего кэша tooexist в hello же регионе Azure, что приложения hello, который обращается к ней. Если у приложения есть основной и резервный регионы, то основной и дополнительный кэши следует размещать в тех же регионах. Дополнительные сведения о парах регионов см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](../best-practices-availability-paired-regions.md).

### <a name="how-does-failing-over-toohello-secondary-linked-cache-work"></a>Как работает автоматическое переключение toohello дополнительных связанных кэш?

В hello первоначальный выпуск технологии географической репликации кэш Redis для Azure не поддерживает автоматический переход на другой разных регионах Azure. Георепликация используется, главным образом, в сценариях аварийного восстановления. В сценарии восстановления distater клиенты должны быть стеку всего приложения hello в регионе, резервного копирования скоординированного способом, а не отдельных компонентов приложения по максимуму резервные копии tootheir tooswitch сами по себе. Это особенно актуально tooRedis. Одним из ключевых преимуществ hello Redis является хранилищем очень малой задержкой. Если используется Redis приложения при сбое tooa другом регионе Azure, но не поддерживает уровень вычислений hello, hello добавлены round время срабатывания окажет значительное влияние на производительности. По этой причине мы хотели бы сбой tooavoid Redis по автоматически из-за проблемы доступности tootransient.

В настоящее время tooinitiate hello перехода на другой ресурс требуется hello tooremove георепликации ссылку в hello портал Azure и измените конечную точку соединения hello в клиент Redis hello от сервера-получателя (прежнее название — связанные) toohello hello основных связанный кэш кэша. Когда приветствия два кэша отменить связь, hello реплика становится обычной попытку чтения и записи кэша и принимает запросы непосредственно из клиентов Redis.


## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о hello [уровня Premium кэша Redis Azure](cache-premium-tier-intro.md).

