---
title: "Как настроить георепликацию для кэша Redis для Azure | Документация Майкрософт"
description: "Узнайте, как реплицировать экземпляры кэша Redis для Azure между географическими регионами."
services: redis-cache
documentationcenter: 
author: steved0x
manager: douge
editor: 
ms.assetid: 375643dc-dbac-4bab-8004-d9ae9570440d
ms.service: cache
ms.workload: tbd
ms.tgt_pltfrm: cache-redis
ms.devlang: na
ms.topic: article
ms.date: 07/06/2017
ms.author: sdanie
ms.openlocfilehash: 71b0d4add7e642487f6d67cda692c500ee78b0e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/11/2017
---
# <a name="how-to-configure-geo-replication-for-azure-redis-cache"></a><span data-ttu-id="edbdb-103">Как настроить георепликацию для кэша Redis для Azure</span><span class="sxs-lookup"><span data-stu-id="edbdb-103">How to configure Geo-replication for Azure Redis Cache</span></span>

<span data-ttu-id="edbdb-104">Георепликация предоставляет механизм связывания двух экземпляров кэша Redis для Azure уровня "Премиум".</span><span class="sxs-lookup"><span data-stu-id="edbdb-104">Geo-replication provides a mechanism for linking two Premium tier Azure Redis Cache instances.</span></span> <span data-ttu-id="edbdb-105">Один кэш используется в качестве основного связанного кэша, а другой — как дополнительный связанный кэш.</span><span class="sxs-lookup"><span data-stu-id="edbdb-105">One cache is designated as the primary linked cache, and the other as the secondary linked cache.</span></span> <span data-ttu-id="edbdb-106">Дополнительный связанный кэш становится доступным только для чтения, и в него реплицируются данные, записанные в основной кэш.</span><span class="sxs-lookup"><span data-stu-id="edbdb-106">The secondary linked cache becomes read-only, and data written to the primary cache is replicated to the secondary linked cache.</span></span> <span data-ttu-id="edbdb-107">Эту функцию можно использовать для репликации кэша в разные регионы Azure.</span><span class="sxs-lookup"><span data-stu-id="edbdb-107">This functionality can be used to replicate a cache across Azure regions.</span></span> <span data-ttu-id="edbdb-108">Эта статья содержит руководство по настройке георепликации для экземпляров кэша Redis для Azure уровня "Премиум".</span><span class="sxs-lookup"><span data-stu-id="edbdb-108">This article provides a guide to configuring Geo-replication for your Premium tier Azure Redis Cache instances.</span></span>

## <a name="geo-replication-prerequisites"></a><span data-ttu-id="edbdb-109">Предварительные требования георепликации</span><span class="sxs-lookup"><span data-stu-id="edbdb-109">Geo-replication prerequisites</span></span>

<span data-ttu-id="edbdb-110">Чтобы настроить георепликацию между двумя кэшами, должны выполняться следующие предварительные требования:</span><span class="sxs-lookup"><span data-stu-id="edbdb-110">To configure Geo-replication between two caches, the following prerequisites must be met:</span></span>

- <span data-ttu-id="edbdb-111">Оба кэша должны относиться к [уровню "Премиум"](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="edbdb-111">Both caches must be [Premium tier](cache-premium-tier-intro.md) caches.</span></span>
- <span data-ttu-id="edbdb-112">Оба кэша должны относиться к одной подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="edbdb-112">Both caches must be in the same Azure subscription.</span></span>
- <span data-ttu-id="edbdb-113">Дополнительный связанный кэш должен относиться к той же ценовой категорий, что и основной связанный кэш, или к более высокой категории.</span><span class="sxs-lookup"><span data-stu-id="edbdb-113">The secondary linked cache must be either the same pricing tier or a larger pricing tier than the primary linked cache.</span></span>
- <span data-ttu-id="edbdb-114">Если для основного связанного кэша включена кластеризация, то и на дополнительном связанном кэше должна быть включена кластеризация с тем же количеством сегментов, что и на основном.</span><span class="sxs-lookup"><span data-stu-id="edbdb-114">If the primary linked cache has clustering enabled, the secondary linked cache must have clustering enabled with the same number of shards as the primary linked cache.</span></span>
- <span data-ttu-id="edbdb-115">Оба кэша должны быть созданы и находиться в состоянии выполнения.</span><span class="sxs-lookup"><span data-stu-id="edbdb-115">Both caches must be created and in a running state.</span></span>
- <span data-ttu-id="edbdb-116">Сохраняемость не должна быть включена ни на одном из кэшей.</span><span class="sxs-lookup"><span data-stu-id="edbdb-116">Persistence must not be enabled on either cache.</span></span>
- <span data-ttu-id="edbdb-117">Георепликация между кэшами в одной виртуальной сети поддерживается.</span><span class="sxs-lookup"><span data-stu-id="edbdb-117">Geo-replication between caches in the same VNET is supported.</span></span> <span data-ttu-id="edbdb-118">Георепликация между кэшами в разных виртуальных сетях также поддерживается, при условии, что две виртуальные сети настроены таким образом, что ресурсы в этих сетях будут доступны друг другу через TCP-подключения.</span><span class="sxs-lookup"><span data-stu-id="edbdb-118">Geo-replication between caches in different VNETs is also supported, as long as the two VNETs are configured in such a way that resources in the VNETs are able to reach each other via TCP connections.</span></span>

<span data-ttu-id="edbdb-119">После настройки георепликации в отношении вашей пары связанных кэшей применяются следующие ограничения:</span><span class="sxs-lookup"><span data-stu-id="edbdb-119">After Geo-replication is configured, the following restrictions apply to your linked cache pair:</span></span>

- <span data-ttu-id="edbdb-120">Дополнительный связанный кэш доступен только для чтения, то есть из него можно считывать данные, но нельзя записать данные в него.</span><span class="sxs-lookup"><span data-stu-id="edbdb-120">The secondary linked cache is read-only; you can read from it, but you can't write any data to it.</span></span> 
- <span data-ttu-id="edbdb-121">Любые данные, которые были в дополнительном связанном кэше до добавления связи, удаляются.</span><span class="sxs-lookup"><span data-stu-id="edbdb-121">Any data that was in the secondary linked cache before the link was added is removed.</span></span> <span data-ttu-id="edbdb-122">Однако, если георепликация впоследствии удаляется, то реплицированные данные остаются в дополнительном связанном кэше.</span><span class="sxs-lookup"><span data-stu-id="edbdb-122">If the Geo-replication is subsequently removed however, the replicated data remains in the secondary linked cache.</span></span>
- <span data-ttu-id="edbdb-123">Если в кэше включена кластеризация, то ни на одном из кэшей вы не сможете инициировать [операцию масштабирования](cache-how-to-scale.md) или [изменить количество сегментов](cache-how-to-premium-clustering.md).</span><span class="sxs-lookup"><span data-stu-id="edbdb-123">You can't initiate a [scaling operation](cache-how-to-scale.md) on either cache or [change the number of shards](cache-how-to-premium-clustering.md) if the cache has clustering enabled.</span></span>
- <span data-ttu-id="edbdb-124">Ни на одном из кэше не удастся включить сохраняемость.</span><span class="sxs-lookup"><span data-stu-id="edbdb-124">You can't enable persistence on either cache.</span></span>
- <span data-ttu-id="edbdb-125">С любым из кэшей можно использовать функцию [экспорта](cache-how-to-import-export-data.md#export), но [импорт](cache-how-to-import-export-data.md#import) возможен только в основной связанный кэш.</span><span class="sxs-lookup"><span data-stu-id="edbdb-125">You can use [Export](cache-how-to-import-export-data.md#export) with either cache, but you can only [Import](cache-how-to-import-export-data.md#import) into the primary linked cache.</span></span>
- <span data-ttu-id="edbdb-126">Невозможно удалить ни один из связанных кэшей или группу ресурсов, в которую они входят, пока не удалена связь георепликации.</span><span class="sxs-lookup"><span data-stu-id="edbdb-126">You can't delete either linked cache, or the resource group that contains them, until you remove the Geo-replication link.</span></span> <span data-ttu-id="edbdb-127">Дополнительные сведения см. в разделе [Почему произошел сбой операции, когда я попытался удалить связанный кэш?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)</span><span class="sxs-lookup"><span data-stu-id="edbdb-127">For more information, see [Why did the operation fail when I tried to delete my linked cache?](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)</span></span>
- <span data-ttu-id="edbdb-128">Если два кэша находятся в разных регионах, то расходы на исходящие данные сети будет применяться к данным, реплицируемым между регионами в дополнительный связанный кэш.</span><span class="sxs-lookup"><span data-stu-id="edbdb-128">If the two caches are in different regions, network egress costs will apply to the data replicated across regions to the secondary linked cache.</span></span> <span data-ttu-id="edbdb-129">Дополнительные сведения см. в разделе [Сколько стоит реплицировать мои данные между регионами Azure?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)</span><span class="sxs-lookup"><span data-stu-id="edbdb-129">For more information, see [How much does it cost to replicate my data across Azure regions?](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)</span></span>
- <span data-ttu-id="edbdb-130">В случае сбоя основного кэша (и его реплики) автоматический переход на дополнительный связанный кэш не выполняется.</span><span class="sxs-lookup"><span data-stu-id="edbdb-130">There is no automatic failover to the secondary linked cache if the primary cache (and its replica) go down.</span></span> <span data-ttu-id="edbdb-131">Чтобы выполнить отработку отказа клиентских приложений потребуется вручную удалить связь георепликации и направить клиентские приложения на кэш, который ранее был дополнительным связанным кэшем.</span><span class="sxs-lookup"><span data-stu-id="edbdb-131">In order to failover client applications, you would need to manually remove the Geo-replication link and point the client applications to the cache that was formerly the secondary linked cache.</span></span> <span data-ttu-id="edbdb-132">Дополнительные сведения см. в разделе [Как выполнить отработку отказа в дополнительный связанный кэш?](#how-does-failing-over-to-the-secondary-linked-cache-work)</span><span class="sxs-lookup"><span data-stu-id="edbdb-132">For more information, see [How does failing over to the secondary linked cache work?](#how-does-failing-over-to-the-secondary-linked-cache-work)</span></span>

## <a name="add-a-geo-replication-link"></a><span data-ttu-id="edbdb-133">Добавление связи георепликации</span><span class="sxs-lookup"><span data-stu-id="edbdb-133">Add a Geo-replication link</span></span>

1. <span data-ttu-id="edbdb-134">Чтобы связать для георепликации два кэша уровня "Премиум", в меню ресурсов кэша, предназначенного для использования в качестве основного связанного кэша, щелкните **Георепликация**, а затем в колонке **Георепликация** щелкните **Add cache replication link** (Добавить связь репликации кэша).</span><span class="sxs-lookup"><span data-stu-id="edbdb-134">To link two premium caches together for geo-replication, click **Geo-replication** from the Resource menu of the cache intended as the primary linked cache, and then click **Add cache replication link** from the **Geo-replication** blade.</span></span>

    ![Добавление связи](./media/cache-how-to-geo-replication/cache-geo-location-menu.png)

2. <span data-ttu-id="edbdb-136">В списке **Compatible caches** (Совместимые кэши) щелкните имя кэша, который необходимо использовать в качестве дополнительного кэша.</span><span class="sxs-lookup"><span data-stu-id="edbdb-136">Click the name of the desired secondary cache from the **Compatible caches** list.</span></span> <span data-ttu-id="edbdb-137">Если необходимый вам кэш не отображается в списке, то проверьте, выполняются ли для этого дополнительного кэша [предварительные требования георепликации](#geo-replication-prerequisites).</span><span class="sxs-lookup"><span data-stu-id="edbdb-137">If your desired cache isn't displayed in the list, verify that the [Geo-replication prerequisites](#geo-replication-prerequisites) for the desired secondary cache are met.</span></span> <span data-ttu-id="edbdb-138">Чтобы отфильтровать кэши по региону, щелкните нужный регион на карте. В результате в списке **Compatible caches** (Совместимые кэши) отобразятся только кэши выбранного региона.</span><span class="sxs-lookup"><span data-stu-id="edbdb-138">To filter the caches by region, click the desired region in the map to display only those caches in the **Compatible caches** list.</span></span>

    ![Кэши, совместимые с георепликацией](./media/cache-how-to-geo-replication/cache-geo-location-select-link.png)
    
    <span data-ttu-id="edbdb-140">Для инициирования процесса связывания или просмотра сведений о дополнительном кэше можно также использовать контекстное меню.</span><span class="sxs-lookup"><span data-stu-id="edbdb-140">You can also initiate the linking process or view details about the secondary cache by using the context menu.</span></span>

    ![Контекстное меню георепликации](./media/cache-how-to-geo-replication/cache-geo-location-select-link-context-menu.png)

3. <span data-ttu-id="edbdb-142">Чтобы связывать два кэша друг с другом и начать процесс репликации, нажмите кнопку **Связь**.</span><span class="sxs-lookup"><span data-stu-id="edbdb-142">Click **Link** to link the two caches together and begin the replication process.</span></span>

    ![Связывание кэшей](./media/cache-how-to-geo-replication/cache-geo-location-confirm-link.png)

4. <span data-ttu-id="edbdb-144">Ход выполнения процесса репликации можно просмотреть в колонке **Георепликация**.</span><span class="sxs-lookup"><span data-stu-id="edbdb-144">You can view the progress of the replication process on the **Geo-replication** blade.</span></span>

    ![Состояние связывания](./media/cache-how-to-geo-replication/cache-geo-location-linking.png)

    <span data-ttu-id="edbdb-146">Состояние связывания также можно просмотреть в колонке **Обзор** как для основного кэша, так и для дополнительного.</span><span class="sxs-lookup"><span data-stu-id="edbdb-146">You can also view the linking status on the **Overview** blade for both the primary and secondary caches.</span></span>

    ![Состояние кэша](./media/cache-how-to-geo-replication/cache-geo-location-link-status.png)

    <span data-ttu-id="edbdb-148">По завершении процесса репликации **Состояние связи** изменится на **Успешно**.</span><span class="sxs-lookup"><span data-stu-id="edbdb-148">Once the replication process is complete, the **Link status** changes to **Succeeded**.</span></span>

    ![Состояние кэша](./media/cache-how-to-geo-replication/cache-geo-location-link-successful.png)

    <span data-ttu-id="edbdb-150">В процессе связывания основной связанный кэш остается доступным для использования, а дополнительный связанный кэш недоступен, пока не завершится процесс связывания.</span><span class="sxs-lookup"><span data-stu-id="edbdb-150">During the linking process, the primary linked cache remains available for use but the secondary linked cache is not available until the linking process completes.</span></span>

## <a name="remove-a-geo-replication-link"></a><span data-ttu-id="edbdb-151">Удаление связи георепликации</span><span class="sxs-lookup"><span data-stu-id="edbdb-151">Remove a Geo-replication link</span></span>

1. <span data-ttu-id="edbdb-152">Чтобы удалить связь между двумя кэшами и приостановить георепликацию, щелкните **Unlink caches** (Удалить связь кэшей) в колонке **Георепликация**.</span><span class="sxs-lookup"><span data-stu-id="edbdb-152">To remove the link between two caches and stop Geo-replication, click **Unlink caches** from the **Geo-replication** blade.</span></span>
    
    ![Удаление связи кэшей](./media/cache-how-to-geo-replication/cache-geo-location-unlink.png)

    <span data-ttu-id="edbdb-154">По завершения процесса удаления связи дополнительный кэш станет доступным как для чтения, так и для записи.</span><span class="sxs-lookup"><span data-stu-id="edbdb-154">When the unlinking process completes, the secondary cache is available for both reads and writes.</span></span>

>[!NOTE]
><span data-ttu-id="edbdb-155">Когда удаляется связь георепликации, реплицированные данные из основного связанного кэша остаются в дополнительном кэше.</span><span class="sxs-lookup"><span data-stu-id="edbdb-155">When the Geo-replication link is removed, the replicated data from the primary linked cache remains in the secondary cache.</span></span>
>
>

## <a name="geo-replication-faq"></a><span data-ttu-id="edbdb-156">Часто задаваемые вопросы по георепликации</span><span class="sxs-lookup"><span data-stu-id="edbdb-156">Geo-replication FAQ</span></span>

- [<span data-ttu-id="edbdb-157">Можно ли использовать георепликацию с кэшем уровня "Стандартный" или "Базовый"?</span><span class="sxs-lookup"><span data-stu-id="edbdb-157">Can I use Geo-replication with a Standard or Basic tier cache?</span></span>](#can-i-use-geo-replication-with-a-standard-or-basic-tier-cache)
- [<span data-ttu-id="edbdb-158">Можно ли использовать кэш во время связывания или удаления связи?</span><span class="sxs-lookup"><span data-stu-id="edbdb-158">Is my cache available for use during the linking or unlinking process?</span></span>](#is-my-cache-available-for-use-during-the-linking-or-unlinking-process)
- [<span data-ttu-id="edbdb-159">Можно ли связать больше двух кэшей?</span><span class="sxs-lookup"><span data-stu-id="edbdb-159">Can I link more than two caches together?</span></span>](#can-i-link-more-than-two-caches-together)
- [<span data-ttu-id="edbdb-160">Можно ли связать два кэша из разных подписок Azure?</span><span class="sxs-lookup"><span data-stu-id="edbdb-160">Can I link two caches from different Azure subscriptions?</span></span>](#can-i-link-two-caches-from-different-azure-subscriptions)
- [<span data-ttu-id="edbdb-161">Можно ли связать два кэша с разными размерами?</span><span class="sxs-lookup"><span data-stu-id="edbdb-161">Can I link two caches with different sizes?</span></span>](#can-i-link-two-caches-with-different-sizes)
- [<span data-ttu-id="edbdb-162">Можно ли использовать георепликацию при включенной кластеризации?</span><span class="sxs-lookup"><span data-stu-id="edbdb-162">Can I use Geo-replication with clustering enabled?</span></span>](#can-i-use-geo-replication-with-clustering-enabled)
- [<span data-ttu-id="edbdb-163">Можно ли использовать георепликацию, если кэши находятся в виртуальной сети?</span><span class="sxs-lookup"><span data-stu-id="edbdb-163">Can I use Geo-replication with my caches in a VNET?</span></span>](#can-i-use-geo-replication-with-my-caches-in-a-vnet)
- [<span data-ttu-id="edbdb-164">Можно ли использовать PowerShell или Azure CLI для управления георепликацией?</span><span class="sxs-lookup"><span data-stu-id="edbdb-164">Can I use PowerShell or Azure CLI to manage Geo-replication?</span></span>](#can-i-use-powershell-or-azure-cli-to-manage-geo-replication)
- [<span data-ttu-id="edbdb-165">Сколько стоит реплицировать мои данные между регионами Azure?</span><span class="sxs-lookup"><span data-stu-id="edbdb-165">How much does it cost to replicate my data across Azure regions?</span></span>](#how-much-does-it-cost-to-replicate-my-data-across-azure-regions)
- [<span data-ttu-id="edbdb-166">Почему произошел сбой операции, когда я попытался удалить связанный кэш?</span><span class="sxs-lookup"><span data-stu-id="edbdb-166">Why did the operation fail when I tried to delete my linked cache?</span></span>](#why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache)
- [<span data-ttu-id="edbdb-167">Какой регион лучше использовать для дополнительного связанного кэша?</span><span class="sxs-lookup"><span data-stu-id="edbdb-167">What region should I use for my secondary linked cache?</span></span>](#what-region-should-i-use-for-my-secondary-linked-cache)
- [<span data-ttu-id="edbdb-168">Как выполнить отработку отказа в дополнительный связанный кэш?</span><span class="sxs-lookup"><span data-stu-id="edbdb-168">How does failing over to the secondary linked cache work?</span></span>](#how-does-failing-over-to-the-secondary-linked-cache-work)

### <a name="can-i-use-geo-replication-with-a-standard-or-basic-tier-cache"></a><span data-ttu-id="edbdb-169">Можно ли использовать георепликацию с кэшем уровня "Стандартный" или "Базовый"?</span><span class="sxs-lookup"><span data-stu-id="edbdb-169">Can I use Geo-replication with a Standard or Basic tier cache?</span></span>

<span data-ttu-id="edbdb-170">Нет. Георепликация доступна только для кэшей категории "Премиум".</span><span class="sxs-lookup"><span data-stu-id="edbdb-170">No, Geo-replication is only available for Premium tier caches.</span></span>

### <a name="is-my-cache-available-for-use-during-the-linking-or-unlinking-process"></a><span data-ttu-id="edbdb-171">Можно ли использовать кэш во время связывания или удаления связи?</span><span class="sxs-lookup"><span data-stu-id="edbdb-171">Is my cache available for use during the linking or unlinking process?</span></span>

- <span data-ttu-id="edbdb-172">Во время связывания двух кэшей для георепликации основной связанный кэш остается доступным для использования, а дополнительный связанный кэш недоступен, пока не завершится процесс связывания.</span><span class="sxs-lookup"><span data-stu-id="edbdb-172">When linking two caches together for Geo-replication, the primary linked cache remains available for use but the secondary linked cache is not available until the linking process completes.</span></span>
- <span data-ttu-id="edbdb-173">При удалении связи георепликации между двумя кэшами оба кэша остаются доступными для использования.</span><span class="sxs-lookup"><span data-stu-id="edbdb-173">When removing the Geo-replication link between two caches, both caches remain available for use.</span></span>

### <a name="can-i-link-more-than-two-caches-together"></a><span data-ttu-id="edbdb-174">Можно ли связать больше двух кэшей?</span><span class="sxs-lookup"><span data-stu-id="edbdb-174">Can I link more than two caches together?</span></span>

<span data-ttu-id="edbdb-175">Нет. При использовании георепликации можно связать друг с другом только два кэша.</span><span class="sxs-lookup"><span data-stu-id="edbdb-175">No, when using Geo-replication you can only link two caches together.</span></span>

### <a name="can-i-link-two-caches-from-different-azure-subscriptions"></a><span data-ttu-id="edbdb-176">Можно ли связать два кэша из разных подписок Azure?</span><span class="sxs-lookup"><span data-stu-id="edbdb-176">Can I link two caches from different Azure subscriptions?</span></span>

<span data-ttu-id="edbdb-177">Нет. Оба кэша должны относиться к одной подписке Azure.</span><span class="sxs-lookup"><span data-stu-id="edbdb-177">No, both caches must be in the same Azure subscription.</span></span>

### <a name="can-i-link-two-caches-with-different-sizes"></a><span data-ttu-id="edbdb-178">Можно ли связать два кэша с разными размерами?</span><span class="sxs-lookup"><span data-stu-id="edbdb-178">Can I link two caches with different sizes?</span></span>

<span data-ttu-id="edbdb-179">Да, если размер дополнительного связанного кэша больше размера основного связанного кэша.</span><span class="sxs-lookup"><span data-stu-id="edbdb-179">Yes, as long as the secondary linked cache is larger than the primary linked cache.</span></span>

### <a name="can-i-use-geo-replication-with-clustering-enabled"></a><span data-ttu-id="edbdb-180">Можно ли использовать георепликацию при включенной кластеризации?</span><span class="sxs-lookup"><span data-stu-id="edbdb-180">Can I use Geo-replication with clustering enabled?</span></span>

<span data-ttu-id="edbdb-181">Да, если оба кэша имеют одинаковое число сегментов.</span><span class="sxs-lookup"><span data-stu-id="edbdb-181">Yes, as long as both caches have the same number of shards.</span></span>

### <a name="can-i-use-geo-replication-with-my-caches-in-a-vnet"></a><span data-ttu-id="edbdb-182">Можно ли использовать георепликацию, если кэши находятся в виртуальной сети?</span><span class="sxs-lookup"><span data-stu-id="edbdb-182">Can I use Geo-replication with my caches in a VNET?</span></span>

<span data-ttu-id="edbdb-183">Да. Георепликация кэшей в виртуальных сетях поддерживается.</span><span class="sxs-lookup"><span data-stu-id="edbdb-183">Yes, Geo-replication of caches in VNETs are supported.</span></span> 

- <span data-ttu-id="edbdb-184">Георепликация между кэшами в одной виртуальной сети поддерживается.</span><span class="sxs-lookup"><span data-stu-id="edbdb-184">Geo-replication between caches in the same VNET is supported.</span></span>
- <span data-ttu-id="edbdb-185">Георепликация между кэшами в разных виртуальных сетях также поддерживается, при условии, что две виртуальные сети настроены таким образом, что ресурсы в этих сетях будут доступны друг другу через TCP-подключения.</span><span class="sxs-lookup"><span data-stu-id="edbdb-185">Geo-replication between caches in different VNETs is also supported, as long as the two VNETs are configured in such a way that resources in the VNETs are able to reach each other via TCP connections.</span></span>

### <a name="can-i-use-powershell-or-azure-cli-to-manage-geo-replication"></a><span data-ttu-id="edbdb-186">Можно ли использовать PowerShell или Azure CLI для управления георепликацией?</span><span class="sxs-lookup"><span data-stu-id="edbdb-186">Can I use PowerShell or Azure CLI to manage Geo-replication?</span></span>

<span data-ttu-id="edbdb-187">В настоящее время управление георепликацией доступно только на портале Azure.</span><span class="sxs-lookup"><span data-stu-id="edbdb-187">At this time you can only manage Geo-replication using the Azure portal.</span></span>

### <a name="how-much-does-it-cost-to-replicate-my-data-across-azure-regions"></a><span data-ttu-id="edbdb-188">Сколько стоит реплицировать мои данные между регионами Azure?</span><span class="sxs-lookup"><span data-stu-id="edbdb-188">How much does it cost to replicate my data across Azure regions?</span></span>

<span data-ttu-id="edbdb-189">При использовании георепликации данные из основного связанного кэша реплицируются в дополнительный связанный кэш.</span><span class="sxs-lookup"><span data-stu-id="edbdb-189">When using Geo-replication, data from the primary linked cache is replicated to the secondary linked cache.</span></span> <span data-ttu-id="edbdb-190">Если два связанных кэша находятся в одном регионе Azure, то за передачу данных плата не взимается.</span><span class="sxs-lookup"><span data-stu-id="edbdb-190">If the two linked caches are in the same Azure region, there is no charge for the data transfer.</span></span> <span data-ttu-id="edbdb-191">Если два связанных кэша находятся в разных регионах Azure, то передача данных при георепликации оплачивается по пропускной способности, которая используется для репликации данных в другой регион Azure.</span><span class="sxs-lookup"><span data-stu-id="edbdb-191">If the two linked caches are in different Azure regions, the Geo-Replication data transfer charge is the bandwidth cost of replicating that data to the other Azure region.</span></span> <span data-ttu-id="edbdb-192">Дополнительные сведения см. на странице [Сведения о стоимости пропускной способности](https://azure.microsoft.com/pricing/details/bandwidth/).</span><span class="sxs-lookup"><span data-stu-id="edbdb-192">For more information, see [Bandwidth Pricing Details](https://azure.microsoft.com/pricing/details/bandwidth/).</span></span>

### <a name="why-did-the-operation-fail-when-i-tried-to-delete-my-linked-cache"></a><span data-ttu-id="edbdb-193">Почему произошел сбой операции, когда я попытался удалить связанный кэш?</span><span class="sxs-lookup"><span data-stu-id="edbdb-193">Why did the operation fail when I tried to delete my linked cache?</span></span>

<span data-ttu-id="edbdb-194">Когда два кэша связаны между собой, невозможно удалить ни один из них или группу ресурсов, в которую они входят, пока не удалена связь георепликации.</span><span class="sxs-lookup"><span data-stu-id="edbdb-194">When two caches are linked together, you can't delete either cache or the resource group that contains them until you remove the Geo-replication link.</span></span> <span data-ttu-id="edbdb-195">При попытке удалить группу ресурсов, в которую входит один из них или оба связанных кэша, остальные ресурсы в группе ресурсов удаляются, но группа ресурсов остается в состоянии `deleting`, а все связанные кэши в группе ресурсов остаются в состоянии `running`.</span><span class="sxs-lookup"><span data-stu-id="edbdb-195">If you attempt to delete the resource group that contains one or both of the linked caches, the other resources in the resource group are deleted, but the resource group stays in the `deleting` state and any linked caches in the resource group remain in the `running` state.</span></span> <span data-ttu-id="edbdb-196">Чтобы завершить удаление группы ресурсов и связанных кэшей, которые в нее входят, прервите связь георепликации, как описано в разделе [Удаление связи георепликации](#remove-a-geo-replication-link).</span><span class="sxs-lookup"><span data-stu-id="edbdb-196">To complete the deletion of the resource group and the linked caches within it, break the Geo-replication link as described in [Remove a Geo-replication link](#remove-a-geo-replication-link).</span></span>

### <a name="what-region-should-i-use-for-my-secondary-linked-cache"></a><span data-ttu-id="edbdb-197">Какой регион лучше использовать для дополнительного связанного кэша?</span><span class="sxs-lookup"><span data-stu-id="edbdb-197">What region should I use for my secondary linked cache?</span></span>

<span data-ttu-id="edbdb-198">Как правило, в качестве региона Azure для размещения кэша рекомендуется использовать тот же регион, в котором размещается приложение, обращающееся к нему.</span><span class="sxs-lookup"><span data-stu-id="edbdb-198">In general, it is recommended for your cache to exist in the same Azure region as the application that accesses it.</span></span> <span data-ttu-id="edbdb-199">Если у приложения есть основной и резервный регионы, то основной и дополнительный кэши следует размещать в тех же регионах.</span><span class="sxs-lookup"><span data-stu-id="edbdb-199">If your application has a primary and fallback region, then your primary and secondary caches should exist in those same regions.</span></span> <span data-ttu-id="edbdb-200">Дополнительные сведения о парах регионов см. в статье [Непрерывность бизнес-процессов и аварийное восстановление в службах BizTalk: пары регионов Azure](../best-practices-availability-paired-regions.md).</span><span class="sxs-lookup"><span data-stu-id="edbdb-200">For more information about paired regions, see [Best Practices – Azure Paired regions](../best-practices-availability-paired-regions.md).</span></span>

### <a name="how-does-failing-over-to-the-secondary-linked-cache-work"></a><span data-ttu-id="edbdb-201">Как выполнить отработку отказа в дополнительный связанный кэш?</span><span class="sxs-lookup"><span data-stu-id="edbdb-201">How does failing over to the secondary linked cache work?</span></span>

<span data-ttu-id="edbdb-202">В первоначальном выпуске георепликации кэш Redis для Azure не поддерживает автоматический переход на другой ресурс между регионами Azure.</span><span class="sxs-lookup"><span data-stu-id="edbdb-202">In the initial release of Geo-replication, Azure Redis Cache does not support automatic failover across Azure regions.</span></span> <span data-ttu-id="edbdb-203">Георепликация используется, главным образом, в сценариях аварийного восстановления.</span><span class="sxs-lookup"><span data-stu-id="edbdb-203">Geo-replication is used primarily in a disaster recovery scenario.</span></span> <span data-ttu-id="edbdb-204">В сценарии аварийного восстановления клиентам необходимо скоординировано перенести весь стек приложений в резервный регион, а не позволять отдельным компонентам приложений самостоятельно решать, когда переключаться на резервный ресурс.</span><span class="sxs-lookup"><span data-stu-id="edbdb-204">In a distater recovery scenario, customers should bring up the entire application stack in a backup region in a coordinated manner rather than letting individual application components decide when to switch to their backups on their own.</span></span> <span data-ttu-id="edbdb-205">Это особенно актуально для кэша Redis.</span><span class="sxs-lookup"><span data-stu-id="edbdb-205">This is especially relevant to Redis.</span></span> <span data-ttu-id="edbdb-206">Одно из ключевых преимуществ кэша Redis — это то, что он является хранилищем с очень низкой задержкой.</span><span class="sxs-lookup"><span data-stu-id="edbdb-206">One of the key benefits of Redis is that it is a very low-latency store.</span></span> <span data-ttu-id="edbdb-207">Если кэш Redis, используемый приложением, переходит при сбое в другой регион Azure, а уровень среды выполнения приложений не переходит, то добавленное время кругового пути заметно влияет на производительность.</span><span class="sxs-lookup"><span data-stu-id="edbdb-207">If Redis used by an application fails over to a different Azure region but the compute tier does not, the added round trip time would have a noticeable impact on performance.</span></span> <span data-ttu-id="edbdb-208">По этой причине мы бы хотели избежать автоматического перехода кэша Redis на другой ресурс из-за временных проблем с доступностью.</span><span class="sxs-lookup"><span data-stu-id="edbdb-208">For this reason, we would like to avoid Redis failing over automatically due to transient availability issues.</span></span>

<span data-ttu-id="edbdb-209">В настоящее время для инициирования отработки отказа необходимо удалить связь георепликации на портале Azure, а затем изменить конечную точку подключения в клиенте Redis с основного связанного кэша на (ранее связанный) дополнительный кэш.</span><span class="sxs-lookup"><span data-stu-id="edbdb-209">Currently, to initiate the failover, you need to remove the Geo-replication link in the Azure portal, and then change the connection end-point in the Redis client from the primary linked cache to the (formerly linked) secondary cache.</span></span> <span data-ttu-id="edbdb-210">Когда связь между двумя кэшами будет разорвана, реплика снова станет обычным кэшем с функциями чтения и записи и будет принимать запросы от клиентов Redis напрямую.</span><span class="sxs-lookup"><span data-stu-id="edbdb-210">When the two caches are disassociated, the replica becomes a regular read-write cache again and accepts requests directly from Redis clients.</span></span>


## <a name="next-steps"></a><span data-ttu-id="edbdb-211">Дальнейшие действия</span><span class="sxs-lookup"><span data-stu-id="edbdb-211">Next steps</span></span>

<span data-ttu-id="edbdb-212">Ознакомьтесь с дополнительными сведениями о [кэше Redis для Azure уровня "Премиум"](cache-premium-tier-intro.md).</span><span class="sxs-lookup"><span data-stu-id="edbdb-212">Learn more about the [Azure Redis Cache Premium tier](cache-premium-tier-intro.md).</span></span>

