---
title: "aaaUnderstanding исходящих подключений в Azure | Документы Microsoft"
description: "В этой статье объясняется, как Azure позволяет toocommunicate виртуальных машин с общедоступным службам Интернета."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 5f666f2a-3a63-405a-abcd-b2e34d40e001
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 5/31/2017
ms.author: kumud
ms.openlocfilehash: ffe59971b934a16c9f6f78e3b15869a0072320d5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="understanding-outbound-connections-in-azure"></a><span data-ttu-id="a6f8d-103">Общие сведения об исходящих подключениях в Azure</span><span class="sxs-lookup"><span data-stu-id="a6f8d-103">Understanding outbound connections in Azure</span></span>

<span data-ttu-id="a6f8d-104">Виртуальные машины в Azure могут взаимодействовать с конечными точками за пределами Azure в пространстве общедоступных IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-104">A Virtual Machine (VM) in Azure can communicate with endpoints outside of Azure in public IP address space.</span></span> <span data-ttu-id="a6f8d-105">Когда виртуальная машина начнет назначение tooa исходящего потока в общедоступных IP-адресов, Azure сопоставляет hello ВМ закрытый tooa открытый IP-адрес и позволяет hello tooreach возвращаемый трафик виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-105">When a VM initiates an outbound flow tooa destination in public IP address space, Azure maps hello VM's private IP address tooa public IP address and allows return traffic tooreach hello VM.</span></span>

<span data-ttu-id="a6f8d-106">Azure предоставляет три различных метода tooachieve исходящие подключения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-106">Azure provides three different methods tooachieve outbound connectivity.</span></span> <span data-ttu-id="a6f8d-107">Каждый из них имеет свои возможности и ограничения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-107">Each method has its own capabilities and constraints.</span></span> <span data-ttu-id="a6f8d-108">Внимательно просмотрите каждый метод toochoose, какой из них вашим потребностям.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-108">Review each method carefully toochoose which one meets your needs.</span></span>

| <span data-ttu-id="a6f8d-109">Сценарий</span><span class="sxs-lookup"><span data-stu-id="a6f8d-109">Scenario</span></span> | <span data-ttu-id="a6f8d-110">Метод</span><span class="sxs-lookup"><span data-stu-id="a6f8d-110">Method</span></span> | <span data-ttu-id="a6f8d-111">Примечание.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-111">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="a6f8d-112">Автономная виртуальная машина (без подсистемы балансировки нагрузки, без общедоступного IP-адреса уровня экземпляра)</span><span class="sxs-lookup"><span data-stu-id="a6f8d-112">Standalone VM (no load balancer, no Instance Level Public IP address)</span></span> |<span data-ttu-id="a6f8d-113">SNAT по умолчанию</span><span class="sxs-lookup"><span data-stu-id="a6f8d-113">Default SNAT</span></span> |<span data-ttu-id="a6f8d-114">Azure сопоставляет общедоступный IP-адрес для SNAT</span><span class="sxs-lookup"><span data-stu-id="a6f8d-114">Azure associates a public IP address for SNAT</span></span> |
| <span data-ttu-id="a6f8d-115">Виртуальная машина с балансировкой нагрузки (без общедоступного IP-адреса уровня экземпляра)</span><span class="sxs-lookup"><span data-stu-id="a6f8d-115">Load-balanced VM (no Instance Level Public IP address on VM)</span></span> |<span data-ttu-id="a6f8d-116">С помощью подсистемы балансировки нагрузки hello SNAT</span><span class="sxs-lookup"><span data-stu-id="a6f8d-116">SNAT using hello load balancer</span></span> |<span data-ttu-id="a6f8d-117">Azure использует общедоступный IP-адрес hello балансировки нагрузки для SNAT</span><span class="sxs-lookup"><span data-stu-id="a6f8d-117">Azure uses a public IP address of hello Load Balancer for SNAT</span></span> |
| <span data-ttu-id="a6f8d-118">Виртуальная машина с общедоступным IP-адресом уровня экземпляра (с подсистемой балансировки нагрузки или без нее)</span><span class="sxs-lookup"><span data-stu-id="a6f8d-118">VM with Instance Level Public IP address (with or without load balancer)</span></span> |<span data-ttu-id="a6f8d-119">SNAT не используется</span><span class="sxs-lookup"><span data-stu-id="a6f8d-119">SNAT is not used</span></span> |<span data-ttu-id="a6f8d-120">Azure использует hello общедоступный IP-адрес назначен toohello виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="a6f8d-120">Azure uses hello public IP assigned toohello VM</span></span> |

<span data-ttu-id="a6f8d-121">Если ВМ toocommunicate с конечными точками за пределами Azure в общедоступных IP-адресов не требуется, можно использовать группы безопасности сети (NSG) tooblock доступ.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-121">If you do not want a VM toocommunicate with endpoints outside of Azure in public IP address space, you can use Network Security Groups (NSG) tooblock access.</span></span> <span data-ttu-id="a6f8d-122">Использование групп безопасности сети подробно рассматривается в разделе [Запрет подключения к общедоступным сетям](#preventing-public-connectivity).</span><span class="sxs-lookup"><span data-stu-id="a6f8d-122">Using NSGs is discussed in more detail in [Preventing Public Connectivity](#preventing-public-connectivity).</span></span>

## <a name="standalone-vm-with-no-instance-level-public-ip-address"></a><span data-ttu-id="a6f8d-123">Автономная виртуальная машина без общедоступного IP-адреса уровня экземпляра</span><span class="sxs-lookup"><span data-stu-id="a6f8d-123">Standalone VM with no Instance Level Public IP address</span></span>

<span data-ttu-id="a6f8d-124">В этом сценарии hello виртуальной Машины не является частью пула подсистемы балансировки нагрузки Azure и не имеет открытый IP экземпляр уровень (ILPIP), адрес tooit.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-124">In this scenario, hello VM is not part of an Azure Load Balancer pool and does not have an Instance Level Public IP (ILPIP) address assigned tooit.</span></span> <span data-ttu-id="a6f8d-125">Создавая исходящего потока, hello виртуальной Машины Azure преобразует hello закрытый исходный IP-адрес hello исходящего потока tooa открытый IP-адрес источника.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-125">When hello VM creates an outbound flow, Azure translates hello private source IP address of hello outbound flow tooa public source IP address.</span></span> <span data-ttu-id="a6f8d-126">Hello общедоступный IP-адрес для этого исходящего потока не является настраиваемым и ограничение не подпадают hello подписки открытый IP ресурсов.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-126">hello public IP address used for this outbound flow is not configurable and does not count against hello subscription's public IP resource limit.</span></span> <span data-ttu-id="a6f8d-127">Azure использует преобразование адресов сети источника (SNAT) tooperform эту функцию.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-127">Azure uses Source Network Address Translation (SNAT) tooperform this function.</span></span> <span data-ttu-id="a6f8d-128">Временные порты hello общедоступный IP-адрес, используется toodistinguish отдельные потоки с hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-128">Ephemeral ports of hello public IP address are used toodistinguish individual flows originated by hello VM.</span></span> <span data-ttu-id="a6f8d-129">При создании потоков SNAT динамически выделяет временные порты.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-129">SNAT dynamically allocates ephemeral ports when flows are created.</span></span> <span data-ttu-id="a6f8d-130">В этом контексте hello временных портов, используемых для SNAT используются порты SNAT tooas ссылка.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-130">In this context, hello ephemeral ports used for SNAT are referred tooas SNAT ports.</span></span>

<span data-ttu-id="a6f8d-131">Порты SNAT представляют собой ограниченный ресурс, который может быть исчерпан.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-131">SNAT ports are a finite resource that can be exhausted.</span></span> <span data-ttu-id="a6f8d-132">Это важные toounderstand, как они используются.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-132">It is important toounderstand how they are consumed.</span></span> <span data-ttu-id="a6f8d-133">Один порт SNAT потребляется отдельного потока tooa единственный конечный IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-133">One SNAT port is consumed per flow tooa single destination IP address.</span></span> <span data-ttu-id="a6f8d-134">Для нескольких потоков toohello же IP-адрес назначения, каждый поток принимает один порт SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-134">For multiple flows toohello same destination IP address, each flow consumes a single SNAT port.</span></span> <span data-ttu-id="a6f8d-135">Это гарантирует выполнение потоков hello уникальный Если исходит от hello же открытый IP адрес toohello же IP-адрес назначения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-135">This ensures that hello flows are unique when originated from hello same public IP address toohello same destination IP address.</span></span> <span data-ttu-id="a6f8d-136">Несколько потоков, каждый tooa другой конечный IP-адрес использовать один порт SNAT каждого назначения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-136">Multiple flows, each tooa different destination IP address consume a single SNAT port per destination.</span></span> <span data-ttu-id="a6f8d-137">Hello конечный IP-адрес, чтобы сделать потоки hello уникальным.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-137">hello destination IP address makes hello flows unique.</span></span>

<span data-ttu-id="a6f8d-138">Можно использовать [аналитики журналов для подсистемы балансировки нагрузки](load-balancer-monitor-log.md) и [toomonitor предупреждения журналы событий для SNAT порт нехватки системных сообщений](load-balancer-monitor-log.md#alert-event-log).</span><span class="sxs-lookup"><span data-stu-id="a6f8d-138">You can use [Log Analytics for Load Balancer](load-balancer-monitor-log.md) and [Alert event logs toomonitor for SNAT port exhaustion messages](load-balancer-monitor-log.md#alert-event-log).</span></span> <span data-ttu-id="a6f8d-139">Если ресурс портов SNAT исчерпан, исходящие потоки прекращаются, пока существующие потоки не освободят порты SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-139">When SNAT port resources are exhausted, outbound flows fail until SNAT ports are released by existing flows.</span></span> <span data-ttu-id="a6f8d-140">В подсистеме балансировки нагрузки используется время ожидания в режиме простоя длительностью 4 минуты для освобождения портов SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-140">Load Balancer uses a 4-minute idle timeout for reclaiming SNAT ports.</span></span>

## <a name="load-balanced-vm-with-no-instance-level-public-ip-address"></a><span data-ttu-id="a6f8d-141">Виртуальная машина с балансировкой нагрузки без общедоступного IP-адреса уровня экземпляра</span><span class="sxs-lookup"><span data-stu-id="a6f8d-141">Load-balanced VM with no Instance Level Public IP address</span></span>

<span data-ttu-id="a6f8d-142">В этом сценарии hello виртуальная машина является частью пула подсистемы балансировки нагрузки Azure.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-142">In this scenario, hello VM is part of an Azure Load Balancer pool.</span></span>  <span data-ttu-id="a6f8d-143">Hello виртуальная машина не имеет общий IP-адрес, назначенный tooit.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-143">hello VM does not have a public IP address assigned tooit.</span></span> <span data-ttu-id="a6f8d-144">Hello балансировки нагрузки ресурсов должны быть настроены правила toolink hello открытый IP клиентский с hello внутренний пул.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-144">hello Load Balancer resource must be configured with a rule toolink hello public IP frontend with hello backend pool.</span></span>  <span data-ttu-id="a6f8d-145">Если не выполнить эту настройку, поведение hello не как описано в разделе hello выше для [автономная виртуальная машина с не экземпляр уровень общедоступный IP-адрес](load-balancer-outbound-connections.md#standalone-vm-with-no-instance-level-public-ip-address).</span><span class="sxs-lookup"><span data-stu-id="a6f8d-145">If you do not complete this configuration, hello behavior is as described in hello section above for [Standalone VM with no Instance Level Public IP](load-balancer-outbound-connections.md#standalone-vm-with-no-instance-level-public-ip-address).</span></span>

<span data-ttu-id="a6f8d-146">Когда hello ВМ с балансировкой нагрузки создает исходящего потока, Azure преобразует hello закрытый исходный IP-адрес hello исходящего потока toohello общедоступный IP-адрес hello общедоступный интерфейсный подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-146">When hello load-balanced VM creates an outbound flow, Azure translates hello private source IP address of hello outbound flow toohello public IP address of hello public Load Balancer frontend.</span></span> <span data-ttu-id="a6f8d-147">Azure использует преобразование адресов сети источника (SNAT) tooperform эту функцию.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-147">Azure uses Source Network Address Translation (SNAT) tooperform this function.</span></span> <span data-ttu-id="a6f8d-148">Временные порты общедоступный IP-адрес подсистемы балансировки нагрузки hello, используется toodistinguish отдельные потоки с hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-148">Ephemeral ports of hello Load Balancer's public IP address are used toodistinguish individual flows originated by hello VM.</span></span> <span data-ttu-id="a6f8d-149">При создании исходящих потоков SNAT динамически выделяет временные порты.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-149">SNAT dynamically allocates ephemeral ports when outbound flows are created.</span></span> <span data-ttu-id="a6f8d-150">В этом контексте hello временных портов, используемых для SNAT используются порты SNAT tooas ссылка.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-150">In this context, hello ephemeral ports used for SNAT are referred tooas SNAT ports.</span></span>

<span data-ttu-id="a6f8d-151">Порты SNAT представляют собой ограниченный ресурс, который может быть исчерпан.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-151">SNAT ports are a finite resource that can be exhausted.</span></span> <span data-ttu-id="a6f8d-152">Это важные toounderstand, как они используются.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-152">It is important toounderstand how they are consumed.</span></span> <span data-ttu-id="a6f8d-153">Один порт SNAT потребляется отдельного потока tooa единственный конечный IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-153">One SNAT port is consumed per flow tooa single destination IP address.</span></span> <span data-ttu-id="a6f8d-154">Для нескольких потоков toohello же IP-адрес назначения, каждый поток принимает один порт SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-154">For multiple flows toohello same destination IP address, each flow consumes a single SNAT port.</span></span> <span data-ttu-id="a6f8d-155">Это гарантирует выполнение потоков hello уникальный Если исходит от hello же открытый IP адрес toohello же IP-адрес назначения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-155">This ensures that hello flows are unique when originated from hello same public IP address toohello same destination IP address.</span></span> <span data-ttu-id="a6f8d-156">Несколько потоков, каждый tooa другой конечный IP-адрес использовать один порт SNAT каждого назначения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-156">Multiple flows, each tooa different destination IP address consume a single SNAT port per destination.</span></span> <span data-ttu-id="a6f8d-157">Hello конечный IP-адрес, чтобы сделать потоки hello уникальным.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-157">hello destination IP address makes hello flows unique.</span></span>

<span data-ttu-id="a6f8d-158">Можно использовать [аналитики журналов для подсистемы балансировки нагрузки](load-balancer-monitor-log.md) и [toomonitor предупреждения журналы событий для SNAT порт нехватки системных сообщений](load-balancer-monitor-log.md#alert-event-log).</span><span class="sxs-lookup"><span data-stu-id="a6f8d-158">You can use [Log Analytics for Load Balancer](load-balancer-monitor-log.md) and [Alert event logs toomonitor for SNAT port exhaustion messages](load-balancer-monitor-log.md#alert-event-log).</span></span> <span data-ttu-id="a6f8d-159">Если ресурс портов SNAT исчерпан, исходящие потоки прекращаются, пока существующие потоки не освободят порты SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-159">When SNAT port resources are exhausted, outbound flows fail until SNAT ports are released by existing flows.</span></span> <span data-ttu-id="a6f8d-160">В подсистеме балансировки нагрузки используется время ожидания в режиме простоя длительностью 4 минуты для освобождения портов SNAT.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-160">Load Balancer uses a 4-minute idle timeout for reclaiming SNAT ports.</span></span>

## <a name="vm-with-an-instance-level-public-ip-address-with-or-without-load-balancer"></a><span data-ttu-id="a6f8d-161">Виртуальная машина с общедоступным IP-адресом уровня экземпляра (с подсистемой балансировки нагрузки или без нее)</span><span class="sxs-lookup"><span data-stu-id="a6f8d-161">VM with an Instance Level Public IP address (with or without Load Balancer)</span></span>

<span data-ttu-id="a6f8d-162">В этом сценарии hello ВМ есть экземпляр уровень открытый IP (ILPIP) назначенный tooit.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-162">In this scenario, hello VM has an Instance Level Public IP (ILPIP) assigned tooit.</span></span> <span data-ttu-id="a6f8d-163">Является ли виртуальная машина hello балансировкой нагрузки или не не проверяются.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-163">It does not matter whether hello VM is load balanced or not.</span></span> <span data-ttu-id="a6f8d-164">При использовании адреса ILPIP преобразование SNAT не используется.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-164">When an ILPIP is used, Source Network Address Translation (SNAT) is not used.</span></span> <span data-ttu-id="a6f8d-165">Hello виртуальная машина использует hello ILPIP для всех исходящих потоков.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-165">hello VM uses hello ILPIP for all outbound flows.</span></span> <span data-ttu-id="a6f8d-166">Если приложение инициирует несколько исходящих потоков и возникновении нехватки SNAT, следует рассмотреть, назначение tooavoid ILPIP SNAT ограничения.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-166">If your application initiates many outbound flows and you experience SNAT exhaustion, you should consider assigning an ILPIP tooavoid SNAT constraints.</span></span>

## <a name="discovering-hello-public-ip-used-by-a-given-vm"></a><span data-ttu-id="a6f8d-167">Обнаружение hello открытый IP-адрес используется для данной виртуальной Машины</span><span class="sxs-lookup"><span data-stu-id="a6f8d-167">Discovering hello public IP used by a given VM</span></span>

<span data-ttu-id="a6f8d-168">Существует множество способов toodetermine hello открытый IP-адрес источника исходящее подключение.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-168">There are many ways toodetermine hello public source IP address of an outbound connection.</span></span> <span data-ttu-id="a6f8d-169">OpenDNS предоставляет службу, которая может отображать hello общедоступный IP-адрес виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-169">OpenDNS provides a service that can show you hello public IP address of your VM.</span></span> <span data-ttu-id="a6f8d-170">Использование команды nslookup hello, можно отправить запрос DNS для hello имя myip.opendns.com toohello OpenDNS распознавателя.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-170">Using hello nslookup command, you can send a DNS query for hello name myip.opendns.com toohello OpenDNS resolver.</span></span> <span data-ttu-id="a6f8d-171">Служба Hello возвращает hello исходный IP-адрес, используемые toosend hello запроса.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-171">hello service returns hello source IP address that was used toosend hello query.</span></span> <span data-ttu-id="a6f8d-172">При выполнении hello в следующем запросе из ВМ hello ответ — hello общедоступный IP-адрес используется для этой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-172">When you execute hello following query from your VM, hello response is hello public IP used for that VM.</span></span>

    nslookup myip.opendns.com resolver1.opendns.com

## <a name="preventing-public-connectivity"></a><span data-ttu-id="a6f8d-173">Запрет подключения к общедоступным сетям</span><span class="sxs-lookup"><span data-stu-id="a6f8d-173">Preventing Public Connectivity</span></span>

<span data-ttu-id="a6f8d-174">Иногда бывает нежелательно toobe виртуальных Машин допускается toocreate исходящего потока или может быть toomanage требование, какие назначения можно получить с помощью исходящих потоков.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-174">Sometimes it is undesirable for a VM toobe allowed toocreate an outbound flow or there may be a requirement toomanage which destinations can be reached with outbound flows.</span></span> <span data-ttu-id="a6f8d-175">В этом случае используется [группы безопасности сети (NSG)](../virtual-network/virtual-networks-nsg.md) toomanage hello назначения, hello может достигать виртуальных Машин.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-175">In this case, you use [Network Security Groups (NSG)](../virtual-network/virtual-networks-nsg.md) toomanage hello destinations that hello VM can reach.</span></span> <span data-ttu-id="a6f8d-176">При применении NSG tooa балансировки нагрузки виртуальной Машины, вы должны toohello внимания toopay [по умолчанию теги](../virtual-network/virtual-networks-nsg.md#default-tags) и [по умолчанию правила](../virtual-network/virtual-networks-nsg.md#default-rules).</span><span class="sxs-lookup"><span data-stu-id="a6f8d-176">When you apply an NSG tooa load-balanced VM, you need toopay attention toohello [default tags](../virtual-network/virtual-networks-nsg.md#default-tags) and [default rules](../virtual-network/virtual-networks-nsg.md#default-rules).</span></span>

<span data-ttu-id="a6f8d-177">Убедитесь, что hello виртуальной Машины можно получать запросы проверки работоспособности подсистемы балансировки нагрузки Azure.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-177">You must ensure that hello VM can receive health probe requests from Azure Load Balancer.</span></span> <span data-ttu-id="a6f8d-178">Если NSG блоки запросы состояния работоспособности выборки из hello AZURE_LOADBALANCER тег по умолчанию, происходит сбой проверки работоспособности вашей виртуальной Машины и снижении hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-178">If an NSG blocks health probe requests from hello AZURE_LOADBALANCER default tag, your VM health probe fails and hello VM is marked down.</span></span> <span data-ttu-id="a6f8d-179">Подсистема балансировки нагрузки перестает отправлять новые toothat потоков виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-179">Load Balancer stops sending new flows toothat VM.</span></span>

## <a name="limitations"></a><span data-ttu-id="a6f8d-180">Ограничения</span><span class="sxs-lookup"><span data-stu-id="a6f8d-180">Limitations</span></span>

<span data-ttu-id="a6f8d-181">Если [несколько (общедоступных) IP-адресов связано с подсистемой балансировки нагрузки](load-balancer-multivip-overview.md), то любой из этих общедоступных IP-адресов может использоваться для исходящих потоков.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-181">If [multiple (public) IP addresses are associated with a load balancer](load-balancer-multivip-overview.md), any of these public IP addresses are a candidate for outbound flows.</span></span>

<span data-ttu-id="a6f8d-182">Azure использует алгоритм toodetermine hello количество доступных портов SNAT зависимости от размера пула hello hello.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-182">Azure uses an algorithm toodetermine hello number of SNAT ports available based on hello size of hello pool.</span></span>  <span data-ttu-id="a6f8d-183">Этот алгоритм на данный момент нельзя настраивать.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-183">This is not configurable at this time.</span></span>

<span data-ttu-id="a6f8d-184">Очень важно, что toorememember, количество доступных портов SNAT hello не преобразует toonumber соединений непосредственно.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-184">It is important toorememember that hello number of SNAT ports available does not translate directly toonumber of connections.</span></span> <span data-ttu-id="a6f8d-185">См. в разделе выше особенности на когда и как SNAT порты назначаются и как toomanage exhaustible ресурс.</span><span class="sxs-lookup"><span data-stu-id="a6f8d-185">Please see above for specifics on when and how SNAT ports are allocated and how toomanage this exhaustible resource.</span></span>
