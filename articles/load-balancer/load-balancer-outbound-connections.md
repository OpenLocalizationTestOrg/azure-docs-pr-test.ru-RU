---
title: "Общие сведения об исходящих подключениях в Azure | Документация Майкрософт"
description: "В этой статье рассказывается о том, как Azure обеспечивает взаимодействие виртуальных машин с общедоступными службами Интернета."
services: load-balancer
documentationcenter: na
author: kumudd
manager: timlt
editor: 
ms.assetid: 5f666f2a-3a63-405a-abcd-b2e34d40e001
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 5/31/2017
ms.author: kumud
ms.openlocfilehash: 03cb14b5710b6dd17599a3c4eab21380c76c2b40
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/03/2017
---
# <a name="understanding-outbound-connections-in-azure"></a><span data-ttu-id="b2194-103">Общие сведения об исходящих подключениях в Azure</span><span class="sxs-lookup"><span data-stu-id="b2194-103">Understanding outbound connections in Azure</span></span>

<span data-ttu-id="b2194-104">Виртуальные машины в Azure могут взаимодействовать с конечными точками за пределами Azure в пространстве общедоступных IP-адресов.</span><span class="sxs-lookup"><span data-stu-id="b2194-104">A Virtual Machine (VM) in Azure can communicate with endpoints outside of Azure in public IP address space.</span></span> <span data-ttu-id="b2194-105">Когда виртуальная машина инициирует исходящий поток к месту назначения в пространстве общедоступных IP-адресов, Azure сопоставляет частный IP-адрес виртуальной машины с общедоступным IP-адресом и разрешает обратный трафик на виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="b2194-105">When a VM initiates an outbound flow to a destination in public IP address space, Azure maps the VM's private IP address to a public IP address and allows return traffic to reach the VM.</span></span>

<span data-ttu-id="b2194-106">Azure предоставляет три различных способа установления исходящего подключения.</span><span class="sxs-lookup"><span data-stu-id="b2194-106">Azure provides three different methods to achieve outbound connectivity.</span></span> <span data-ttu-id="b2194-107">Каждый из них имеет свои возможности и ограничения.</span><span class="sxs-lookup"><span data-stu-id="b2194-107">Each method has its own capabilities and constraints.</span></span> <span data-ttu-id="b2194-108">Ознакомьтесь со всеми методами, чтобы выбрать из них тот, который соответствует вашим потребностям.</span><span class="sxs-lookup"><span data-stu-id="b2194-108">Review each method carefully to choose which one meets your needs.</span></span>

| <span data-ttu-id="b2194-109">Сценарий</span><span class="sxs-lookup"><span data-stu-id="b2194-109">Scenario</span></span> | <span data-ttu-id="b2194-110">Метод</span><span class="sxs-lookup"><span data-stu-id="b2194-110">Method</span></span> | <span data-ttu-id="b2194-111">Примечание.</span><span class="sxs-lookup"><span data-stu-id="b2194-111">Note</span></span> |
| --- | --- | --- |
| <span data-ttu-id="b2194-112">Автономная виртуальная машина (без подсистемы балансировки нагрузки, без общедоступного IP-адреса уровня экземпляра)</span><span class="sxs-lookup"><span data-stu-id="b2194-112">Standalone VM (no load balancer, no Instance Level Public IP address)</span></span> |<span data-ttu-id="b2194-113">SNAT по умолчанию</span><span class="sxs-lookup"><span data-stu-id="b2194-113">Default SNAT</span></span> |<span data-ttu-id="b2194-114">Azure сопоставляет общедоступный IP-адрес для SNAT</span><span class="sxs-lookup"><span data-stu-id="b2194-114">Azure associates a public IP address for SNAT</span></span> |
| <span data-ttu-id="b2194-115">Виртуальная машина с балансировкой нагрузки (без общедоступного IP-адреса уровня экземпляра)</span><span class="sxs-lookup"><span data-stu-id="b2194-115">Load-balanced VM (no Instance Level Public IP address on VM)</span></span> |<span data-ttu-id="b2194-116">SNAT с использованием подсистемы балансировки нагрузки</span><span class="sxs-lookup"><span data-stu-id="b2194-116">SNAT using the load balancer</span></span> |<span data-ttu-id="b2194-117">Azure использует общедоступный IP-адрес подсистемы балансировки нагрузки для SNAT</span><span class="sxs-lookup"><span data-stu-id="b2194-117">Azure uses a public IP address of the Load Balancer for SNAT</span></span> |
| <span data-ttu-id="b2194-118">Виртуальная машина с общедоступным IP-адресом уровня экземпляра (с подсистемой балансировки нагрузки или без нее)</span><span class="sxs-lookup"><span data-stu-id="b2194-118">VM with Instance Level Public IP address (with or without load balancer)</span></span> |<span data-ttu-id="b2194-119">SNAT не используется</span><span class="sxs-lookup"><span data-stu-id="b2194-119">SNAT is not used</span></span> |<span data-ttu-id="b2194-120">Azure использует общедоступный IP-адрес, назначенный для виртуальной машины</span><span class="sxs-lookup"><span data-stu-id="b2194-120">Azure uses the public IP assigned to the VM</span></span> |

<span data-ttu-id="b2194-121">Если виртуальная машина не должна взаимодействовать с конечными точками за пределами Azure в пространстве общедоступных IP-адресов, можно использовать группы безопасности сети (NSG) для блокирования доступа.</span><span class="sxs-lookup"><span data-stu-id="b2194-121">If you do not want a VM to communicate with endpoints outside of Azure in public IP address space, you can use Network Security Groups (NSG) to block access.</span></span> <span data-ttu-id="b2194-122">Использование групп безопасности сети подробно рассматривается в разделе [Запрет подключения к общедоступным сетям](#preventing-public-connectivity).</span><span class="sxs-lookup"><span data-stu-id="b2194-122">Using NSGs is discussed in more detail in [Preventing Public Connectivity](#preventing-public-connectivity).</span></span>

## <a name="standalone-vm-with-no-instance-level-public-ip-address"></a><span data-ttu-id="b2194-123">Автономная виртуальная машина без общедоступного IP-адреса уровня экземпляра</span><span class="sxs-lookup"><span data-stu-id="b2194-123">Standalone VM with no Instance Level Public IP address</span></span>

<span data-ttu-id="b2194-124">В этом сценарии виртуальная машина не является частью пула Azure Load Balancer, и ей не назначен общедоступный IP-адрес уровня экземпляра (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="b2194-124">In this scenario, the VM is not part of an Azure Load Balancer pool and does not have an Instance Level Public IP (ILPIP) address assigned to it.</span></span> <span data-ttu-id="b2194-125">Когда виртуальная машина создает исходящий поток, Azure преобразует частный исходный IP-адрес исходящего потока в общедоступный исходный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="b2194-125">When the VM creates an outbound flow, Azure translates the private source IP address of the outbound flow to a public source IP address.</span></span> <span data-ttu-id="b2194-126">Общедоступный IP-адрес, используемый для этого исходящего потока, настроить нельзя, и он не учитывается в ограничениях подписки на ресурсы общедоступного IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="b2194-126">The public IP address used for this outbound flow is not configurable and does not count against the subscription's public IP resource limit.</span></span> <span data-ttu-id="b2194-127">Для выполнения этой функции Azure использует преобразование адресов исходной сети (SNAT).</span><span class="sxs-lookup"><span data-stu-id="b2194-127">Azure uses Source Network Address Translation (SNAT) to perform this function.</span></span> <span data-ttu-id="b2194-128">Для определения отдельных потоков, исходящих от виртуальной машины, используются временные порты общедоступного IP-адреса.</span><span class="sxs-lookup"><span data-stu-id="b2194-128">Ephemeral ports of the public IP address are used to distinguish individual flows originated by the VM.</span></span> <span data-ttu-id="b2194-129">При создании потоков SNAT динамически выделяет временные порты.</span><span class="sxs-lookup"><span data-stu-id="b2194-129">SNAT dynamically allocates ephemeral ports when flows are created.</span></span> <span data-ttu-id="b2194-130">В этом контексте временные порты, используемые для SNAT, называются портами SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-130">In this context, the ephemeral ports used for SNAT are referred to as SNAT ports.</span></span>

<span data-ttu-id="b2194-131">Порты SNAT представляют собой ограниченный ресурс, который может быть исчерпан.</span><span class="sxs-lookup"><span data-stu-id="b2194-131">SNAT ports are a finite resource that can be exhausted.</span></span> <span data-ttu-id="b2194-132">Важно понимать, как они используются.</span><span class="sxs-lookup"><span data-stu-id="b2194-132">It is important to understand how they are consumed.</span></span> <span data-ttu-id="b2194-133">Для одного потока к конечному IP-адресу используется один порт SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-133">One SNAT port is consumed per flow to a single destination IP address.</span></span> <span data-ttu-id="b2194-134">При наличии нескольких потоков к одному и тому же конечному IP-адресу каждый поток использует один порт SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-134">For multiple flows to the same destination IP address, each flow consumes a single SNAT port.</span></span> <span data-ttu-id="b2194-135">Это гарантирует уникальность потоков от одного и того же общедоступного IP-адреса к одному и тому же конечному IP-адресу.</span><span class="sxs-lookup"><span data-stu-id="b2194-135">This ensures that the flows are unique when originated from the same public IP address to the same destination IP address.</span></span> <span data-ttu-id="b2194-136">Несколько потоков, каждый из которых направляется на разные конечные IP-адреса, используют один порт SNAT для одного назначения.</span><span class="sxs-lookup"><span data-stu-id="b2194-136">Multiple flows, each to a different destination IP address consume a single SNAT port per destination.</span></span> <span data-ttu-id="b2194-137">Конечный IP-адрес делает эти потоки уникальными.</span><span class="sxs-lookup"><span data-stu-id="b2194-137">The destination IP address makes the flows unique.</span></span>

<span data-ttu-id="b2194-138">Можно использовать [службу Log Analytics для подсистемы балансировки нагрузки](load-balancer-monitor-log.md) и [журналы оповещений о событиях для отслеживания сообщений о нехватке портов SNAT](load-balancer-monitor-log.md#alert-event-log).</span><span class="sxs-lookup"><span data-stu-id="b2194-138">You can use [Log Analytics for Load Balancer](load-balancer-monitor-log.md) and [Alert event logs to monitor for SNAT port exhaustion messages](load-balancer-monitor-log.md#alert-event-log).</span></span> <span data-ttu-id="b2194-139">Если ресурс портов SNAT исчерпан, исходящие потоки прекращаются, пока существующие потоки не освободят порты SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-139">When SNAT port resources are exhausted, outbound flows fail until SNAT ports are released by existing flows.</span></span> <span data-ttu-id="b2194-140">В подсистеме балансировки нагрузки используется время ожидания в режиме простоя длительностью 4 минуты для освобождения портов SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-140">Load Balancer uses a 4-minute idle timeout for reclaiming SNAT ports.</span></span>

## <a name="load-balanced-vm-with-no-instance-level-public-ip-address"></a><span data-ttu-id="b2194-141">Виртуальная машина с балансировкой нагрузки без общедоступного IP-адреса уровня экземпляра</span><span class="sxs-lookup"><span data-stu-id="b2194-141">Load-balanced VM with no Instance Level Public IP address</span></span>

<span data-ttu-id="b2194-142">В этом сценарии виртуальная машина является частью пула Azure Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="b2194-142">In this scenario, the VM is part of an Azure Load Balancer pool.</span></span>  <span data-ttu-id="b2194-143">Виртуальной машине не назначен общедоступный IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="b2194-143">The VM does not have a public IP address assigned to it.</span></span> <span data-ttu-id="b2194-144">Для ресурса балансировщика нагрузки необходимо настроить правило для связывания общедоступного IP-адреса внешнего интерфейса с внутренним пулом.</span><span class="sxs-lookup"><span data-stu-id="b2194-144">The Load Balancer resource must be configured with a rule to link the public IP frontend with the backend pool.</span></span>  <span data-ttu-id="b2194-145">Если не выполнить эту настройку, поведение будет таким, каким оно описано в разделе выше для [автономной виртуальной машины без общедоступного IP-адреса уровня экземпляра](load-balancer-outbound-connections.md#standalone-vm-with-no-instance-level-public-ip-address).</span><span class="sxs-lookup"><span data-stu-id="b2194-145">If you do not complete this configuration, the behavior is as described in the section above for [Standalone VM with no Instance Level Public IP](load-balancer-outbound-connections.md#standalone-vm-with-no-instance-level-public-ip-address).</span></span>

<span data-ttu-id="b2194-146">Когда виртуальная машина с балансировкой нагрузки создает исходящий поток, Azure преобразует частный исходный IP-адрес исходящего потока в общедоступный IP-адрес интерфейса общедоступной подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="b2194-146">When the load-balanced VM creates an outbound flow, Azure translates the private source IP address of the outbound flow to the public IP address of the public Load Balancer frontend.</span></span> <span data-ttu-id="b2194-147">Для выполнения этой функции Azure использует преобразование адресов исходной сети (SNAT).</span><span class="sxs-lookup"><span data-stu-id="b2194-147">Azure uses Source Network Address Translation (SNAT) to perform this function.</span></span> <span data-ttu-id="b2194-148">Для определения отдельных потоков, исходящих от виртуальной машины, используются временные порты общедоступного IP-адреса подсистемы балансировки нагрузки.</span><span class="sxs-lookup"><span data-stu-id="b2194-148">Ephemeral ports of the Load Balancer's public IP address are used to distinguish individual flows originated by the VM.</span></span> <span data-ttu-id="b2194-149">При создании исходящих потоков SNAT динамически выделяет временные порты.</span><span class="sxs-lookup"><span data-stu-id="b2194-149">SNAT dynamically allocates ephemeral ports when outbound flows are created.</span></span> <span data-ttu-id="b2194-150">В этом контексте временные порты, используемые для SNAT, называются портами SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-150">In this context, the ephemeral ports used for SNAT are referred to as SNAT ports.</span></span>

<span data-ttu-id="b2194-151">Порты SNAT представляют собой ограниченный ресурс, который может быть исчерпан.</span><span class="sxs-lookup"><span data-stu-id="b2194-151">SNAT ports are a finite resource that can be exhausted.</span></span> <span data-ttu-id="b2194-152">Важно понимать, как они используются.</span><span class="sxs-lookup"><span data-stu-id="b2194-152">It is important to understand how they are consumed.</span></span> <span data-ttu-id="b2194-153">Для одного потока к конечному IP-адресу используется один порт SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-153">One SNAT port is consumed per flow to a single destination IP address.</span></span> <span data-ttu-id="b2194-154">При наличии нескольких потоков к одному и тому же конечному IP-адресу каждый поток использует один порт SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-154">For multiple flows to the same destination IP address, each flow consumes a single SNAT port.</span></span> <span data-ttu-id="b2194-155">Это гарантирует уникальность потоков от одного и того же общедоступного IP-адреса к одному и тому же конечному IP-адресу.</span><span class="sxs-lookup"><span data-stu-id="b2194-155">This ensures that the flows are unique when originated from the same public IP address to the same destination IP address.</span></span> <span data-ttu-id="b2194-156">Несколько потоков, каждый из которых направляется на разные конечные IP-адреса, используют один порт SNAT для одного назначения.</span><span class="sxs-lookup"><span data-stu-id="b2194-156">Multiple flows, each to a different destination IP address consume a single SNAT port per destination.</span></span> <span data-ttu-id="b2194-157">Конечный IP-адрес делает эти потоки уникальными.</span><span class="sxs-lookup"><span data-stu-id="b2194-157">The destination IP address makes the flows unique.</span></span>

<span data-ttu-id="b2194-158">Можно использовать [службу Log Analytics для подсистемы балансировки нагрузки](load-balancer-monitor-log.md) и [журналы оповещений о событиях для отслеживания сообщений о нехватке портов SNAT](load-balancer-monitor-log.md#alert-event-log).</span><span class="sxs-lookup"><span data-stu-id="b2194-158">You can use [Log Analytics for Load Balancer](load-balancer-monitor-log.md) and [Alert event logs to monitor for SNAT port exhaustion messages](load-balancer-monitor-log.md#alert-event-log).</span></span> <span data-ttu-id="b2194-159">Если ресурс портов SNAT исчерпан, исходящие потоки прекращаются, пока существующие потоки не освободят порты SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-159">When SNAT port resources are exhausted, outbound flows fail until SNAT ports are released by existing flows.</span></span> <span data-ttu-id="b2194-160">В подсистеме балансировки нагрузки используется время ожидания в режиме простоя длительностью 4 минуты для освобождения портов SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-160">Load Balancer uses a 4-minute idle timeout for reclaiming SNAT ports.</span></span>

## <a name="vm-with-an-instance-level-public-ip-address-with-or-without-load-balancer"></a><span data-ttu-id="b2194-161">Виртуальная машина с общедоступным IP-адресом уровня экземпляра (с подсистемой балансировки нагрузки или без нее)</span><span class="sxs-lookup"><span data-stu-id="b2194-161">VM with an Instance Level Public IP address (with or without Load Balancer)</span></span>

<span data-ttu-id="b2194-162">В этом случае виртуальной машине назначен общедоступный IP-адрес уровня экземпляра (ILPIP).</span><span class="sxs-lookup"><span data-stu-id="b2194-162">In this scenario, the VM has an Instance Level Public IP (ILPIP) assigned to it.</span></span> <span data-ttu-id="b2194-163">Не имеет значения, используется ли на виртуальной машины балансировка нагрузки или нет.</span><span class="sxs-lookup"><span data-stu-id="b2194-163">It does not matter whether the VM is load balanced or not.</span></span> <span data-ttu-id="b2194-164">При использовании адреса ILPIP преобразование SNAT не используется.</span><span class="sxs-lookup"><span data-stu-id="b2194-164">When an ILPIP is used, Source Network Address Translation (SNAT) is not used.</span></span> <span data-ttu-id="b2194-165">Виртуальная машина использует ILPIP для всех исходящих потоков.</span><span class="sxs-lookup"><span data-stu-id="b2194-165">The VM uses the ILPIP for all outbound flows.</span></span> <span data-ttu-id="b2194-166">Если приложение инициирует большое количество исходящих потоков и возникает нехватка SNAT, рекомендуется назначить ILPIP, чтобы избежать ограничений SNAT.</span><span class="sxs-lookup"><span data-stu-id="b2194-166">If your application initiates many outbound flows and you experience SNAT exhaustion, you should consider assigning an ILPIP to avoid SNAT constraints.</span></span>

## <a name="discovering-the-public-ip-used-by-a-given-vm"></a><span data-ttu-id="b2194-167">Обнаружение общедоступного IP-адреса, используемого виртуальной машиной</span><span class="sxs-lookup"><span data-stu-id="b2194-167">Discovering the public IP used by a given VM</span></span>

<span data-ttu-id="b2194-168">Существует много способов определить общедоступный исходный IP-адрес исходящего подключения.</span><span class="sxs-lookup"><span data-stu-id="b2194-168">There are many ways to determine the public source IP address of an outbound connection.</span></span> <span data-ttu-id="b2194-169">OpenDNS — это служба, которая может показать общедоступный IP-адрес виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="b2194-169">OpenDNS provides a service that can show you the public IP address of your VM.</span></span> <span data-ttu-id="b2194-170">С помощью команды nslookup можно отправить к сопоставителю OpenDNS запрос DNS для имени myip.opendns.com.</span><span class="sxs-lookup"><span data-stu-id="b2194-170">Using the nslookup command, you can send a DNS query for the name myip.opendns.com to the OpenDNS resolver.</span></span> <span data-ttu-id="b2194-171">Служба возвращает исходный IP-адрес, который был использован для отправки запроса.</span><span class="sxs-lookup"><span data-stu-id="b2194-171">The service returns the source IP address that was used to send the query.</span></span> <span data-ttu-id="b2194-172">При выполнении следующего запроса, поступившего с виртуальной машины, ответ будет содержать общедоступный IP-адрес, используемый для этой виртуальной машины.</span><span class="sxs-lookup"><span data-stu-id="b2194-172">When you execute the following query from your VM, the response is the public IP used for that VM.</span></span>

    nslookup myip.opendns.com resolver1.opendns.com

## <a name="preventing-public-connectivity"></a><span data-ttu-id="b2194-173">Запрет подключения к общедоступным сетям</span><span class="sxs-lookup"><span data-stu-id="b2194-173">Preventing Public Connectivity</span></span>

<span data-ttu-id="b2194-174">Иногда создание виртуальной машиной исходящих потоков может быть нежелательным. Кроме того, вам может понадобиться ограничить пункты назначения, доступные для исходящих потоков.</span><span class="sxs-lookup"><span data-stu-id="b2194-174">Sometimes it is undesirable for a VM to be allowed to create an outbound flow or there may be a requirement to manage which destinations can be reached with outbound flows.</span></span> <span data-ttu-id="b2194-175">В таком случае можно использовать [группы безопасности сети (NSG)](../virtual-network/virtual-networks-nsg.md).</span><span class="sxs-lookup"><span data-stu-id="b2194-175">In this case, you use [Network Security Groups (NSG)](../virtual-network/virtual-networks-nsg.md) to manage the destinations that the VM can reach.</span></span> <span data-ttu-id="b2194-176">При использовании NSG для виртуальной машины с балансировкой нагрузки необходимо обратить внимание на [теги по умолчанию](../virtual-network/virtual-networks-nsg.md#default-tags) и [правила по умолчанию](../virtual-network/virtual-networks-nsg.md#default-rules).</span><span class="sxs-lookup"><span data-stu-id="b2194-176">When you apply an NSG to a load-balanced VM, you need to pay attention to the [default tags](../virtual-network/virtual-networks-nsg.md#default-tags) and [default rules](../virtual-network/virtual-networks-nsg.md#default-rules).</span></span>

<span data-ttu-id="b2194-177">Следует убедиться, что виртуальная машина может получать запросы проверки состояния работоспособности из Azure Load Balancer.</span><span class="sxs-lookup"><span data-stu-id="b2194-177">You must ensure that the VM can receive health probe requests from Azure Load Balancer.</span></span> <span data-ttu-id="b2194-178">Если NSG блокирует такие запросы от тега по умолчанию AZURE_LOADBALANCER, запрос завершается сбоем, а виртуальная машина помечается как отключенная.</span><span class="sxs-lookup"><span data-stu-id="b2194-178">If an NSG blocks health probe requests from the AZURE_LOADBALANCER default tag, your VM health probe fails and the VM is marked down.</span></span> <span data-ttu-id="b2194-179">Подсистема балансировки нагрузки прекращает отправку новых потоков на эту виртуальную машину.</span><span class="sxs-lookup"><span data-stu-id="b2194-179">Load Balancer stops sending new flows to that VM.</span></span>

## <a name="limitations"></a><span data-ttu-id="b2194-180">Ограничения</span><span class="sxs-lookup"><span data-stu-id="b2194-180">Limitations</span></span>

<span data-ttu-id="b2194-181">Если [несколько (общедоступных) IP-адресов связано с подсистемой балансировки нагрузки](load-balancer-multivip-overview.md), то любой из этих общедоступных IP-адресов может использоваться для исходящих потоков.</span><span class="sxs-lookup"><span data-stu-id="b2194-181">If [multiple (public) IP addresses are associated with a load balancer](load-balancer-multivip-overview.md), any of these public IP addresses are a candidate for outbound flows.</span></span>

<span data-ttu-id="b2194-182">Azure использует алгоритм для определения количества доступных портов SNAT с учетом размера пула.</span><span class="sxs-lookup"><span data-stu-id="b2194-182">Azure uses an algorithm to determine the number of SNAT ports available based on the size of the pool.</span></span>  <span data-ttu-id="b2194-183">Этот алгоритм на данный момент нельзя настраивать.</span><span class="sxs-lookup"><span data-stu-id="b2194-183">This is not configurable at this time.</span></span>

<span data-ttu-id="b2194-184">Очень важно помнить, что количество доступных портов SNAT не преобразуется автоматически в количество подключений.</span><span class="sxs-lookup"><span data-stu-id="b2194-184">It is important to rememember that the number of SNAT ports available does not translate directly to number of connections.</span></span> <span data-ttu-id="b2194-185">Выше описаны особенности распределения SNAT-портов и управления этим ограниченным ресурсом.</span><span class="sxs-lookup"><span data-stu-id="b2194-185">Please see above for specifics on when and how SNAT ports are allocated and how to manage this exhaustible resource.</span></span>
