---
title: "aaaBest и рекомендации по службе приложений Azure"
description: "Ознакомьтесь с рекомендациями и методами устранения неполадок для службы приложений Azure."
services: app-service
documentationcenter: 
author: dariagrigoriu
manager: erikre
editor: mollybos
ms.assetid: f3359464-fa44-4f4a-9ea6-7821060e8d0d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/30/2016
ms.author: dariagrigoriu
ms.openlocfilehash: a1d3127f5a746aa43f7b56b45f17c45df9087bee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-azure-app-service"></a><span data-ttu-id="008cc-103">Рекомендации по использованию службы приложений Azure</span><span class="sxs-lookup"><span data-stu-id="008cc-103">Best Practices for Azure App Service</span></span>
<span data-ttu-id="008cc-104">В этой статье собраны рекомендации по использованию [службы приложений Azure](http://go.microsoft.com/fwlink/?LinkId=529714).</span><span class="sxs-lookup"><span data-stu-id="008cc-104">This article summarizes best practices for using [Azure App Service](http://go.microsoft.com/fwlink/?LinkId=529714).</span></span> 

## <span data-ttu-id="008cc-105"><a name="colocation"></a>Совместное размещение</span><span class="sxs-lookup"><span data-stu-id="008cc-105"><a name="colocation"></a>Colocation</span></span>
<span data-ttu-id="008cc-106">При ресурсы Azure, составляющих решение, например веб-приложения и базы данных находятся в разных регионах hello эффекты можно включить следующие hello:</span><span class="sxs-lookup"><span data-stu-id="008cc-106">When Azure resources composing a solution such as a web app and a database are located in different regions hello effects can include hello following:</span></span>

* <span data-ttu-id="008cc-107">увеличение задержки при взаимодействии между ресурсами,</span><span class="sxs-lookup"><span data-stu-id="008cc-107">Increased latency in communication between resources</span></span>
* <span data-ttu-id="008cc-108">Денежные плата за исходящие данные передачи различных регионах иное hello [Azure странице цен](https://azure.microsoft.com/pricing/details/data-transfers).</span><span class="sxs-lookup"><span data-stu-id="008cc-108">Monetary charges for outbound data transfer cross-region as noted on hello [Azure pricing page](https://azure.microsoft.com/pricing/details/data-transfers).</span></span>

<span data-ttu-id="008cc-109">Совместное размещение в hello одного региона лучше всего подходит для ресурсов Azure, составляющих решение, например веб-приложения и использовать учетную запись базы данных или хранилища данных и toohold содержимого.</span><span class="sxs-lookup"><span data-stu-id="008cc-109">Colocation in hello same region is best for Azure resources composing a solution such as a web app and a database or storage account used toohold content or data.</span></span> <span data-ttu-id="008cc-110">Если создание ресурсов, следует убедиться в том, что они находятся в hello же регионе Azure, если не имеют конкретных деловых или разработать причина для них не toobe.</span><span class="sxs-lookup"><span data-stu-id="008cc-110">When creating resources you should make sure they are in hello same Azure region unless you have specific business or design reason for them not toobe.</span></span> <span data-ttu-id="008cc-111">Можно переместить приложение службы приложений toohello же регионе, что базы данных за счет использования hello [клонирования службы приложений](app-service-web-app-cloning-portal.md) в настоящее время доступны для приложений, план служб приложений Premium.</span><span class="sxs-lookup"><span data-stu-id="008cc-111">You can move an App Service app toohello same region as your database by leveraging hello [App Service cloning feature](app-service-web-app-cloning-portal.md) currently available for Premium App Service Plan apps.</span></span>   

## <span data-ttu-id="008cc-112"><a name="memoryresources"></a>Если приложения используют больше памяти, чем ожидалось</span><span class="sxs-lookup"><span data-stu-id="008cc-112"><a name="memoryresources"></a>When apps consume more memory than expected</span></span>
<span data-ttu-id="008cc-113">Когда можно заметить, приложение использует больше памяти, чем ожидается, так как указанный посредством мониторинга или служебные рекомендации, рассмотрите возможность hello [компонент приложения службы Автоматическое восстановление](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span><span class="sxs-lookup"><span data-stu-id="008cc-113">When you notice an app consumes more memory than expected as indicated via monitoring or service recommendations consider hello [App Service Auto-Healing feature](https://azure.microsoft.com/blog/auto-healing-windows-azure-web-sites).</span></span> <span data-ttu-id="008cc-114">Один из параметров hello автоматическое восстановление функции hello занимает пользовательские действия в зависимости от пороговое значение памяти.</span><span class="sxs-lookup"><span data-stu-id="008cc-114">One of hello options for hello Auto-Healing feature is taking custom actions based on a memory threshold.</span></span> <span data-ttu-id="008cc-115">Действия охватывают спектра hello из tooinvestigation уведомления по электронной почте через уменьшение tooon позицию дампа памяти путем перезапуска hello рабочего процесса.</span><span class="sxs-lookup"><span data-stu-id="008cc-115">Actions span hello spectrum from email notifications tooinvestigation via memory dump tooon-the-spot mitigation by recycling hello worker process.</span></span> <span data-ttu-id="008cc-116">Автоматическое восстановление можно настроить через web.config и через удобный пользовательский интерфейс в этой записи блога для hello, описанную в [расширение сайта приложения службы поддержки](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span><span class="sxs-lookup"><span data-stu-id="008cc-116">Auto-healing can be configured via web.config and via a friendly user interface as described at in this blog post for hello [App Service Support Site Extension](https://azure.microsoft.com/blog/additional-updates-to-support-site-extension-for-azure-app-service-web-apps).</span></span>   

## <span data-ttu-id="008cc-117"><a name="CPUresources"></a>Если приложения используют больше ресурсов ЦП, чем ожидалось</span><span class="sxs-lookup"><span data-stu-id="008cc-117"><a name="CPUresources"></a>When apps consume more CPU than expected</span></span>
<span data-ttu-id="008cc-118">Если вы заметили, что приложение потребляет больше ресурсов ЦП, чем ожидалось, или возникает повторяется пиков использования ЦП, как указано посредством мониторинга или служебные рекомендации Рассмотрите увеличение аппаратных ресурсов или горизонтальное масштабирование hello план служб приложений.</span><span class="sxs-lookup"><span data-stu-id="008cc-118">When you notice an app consumes more CPU than expected or experiences repeated CPU spikes as indicated via monitoring or service recommendations consider scaling up or scaling out hello App Service plan.</span></span> <span data-ttu-id="008cc-119">Если приложение является statefull, вертикальное масштабирование — единственный параметр hello, а если ваше приложение без сохранения состояния, масштабирования ожидания даст большую гибкость и большие возможности масштабирования.</span><span class="sxs-lookup"><span data-stu-id="008cc-119">If your application is statefull, scaling up is hello only option, while if your application is stateless, scaling out will give you more flexibility and higher scale potential.</span></span> 

<span data-ttu-id="008cc-120">Дополнительные сведения об отслеживании состояния в приложении можно получить в видеопрезентации [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid) (Проектирование масштабируемого полнофункционального многоуровневого приложения в службе приложений Microsoft Azure).</span><span class="sxs-lookup"><span data-stu-id="008cc-120">For more information about “statefull” vs “stateless” applications you can watch this video: [Planning a Scalable End-to-End Multi-Tier Application on Microsoft Azure Web App](https://channel9.msdn.com/Events/TechEd/NorthAmerica/2014/DEV-B414#fbid=?hashlink=fbid).</span></span> <span data-ttu-id="008cc-121">Дополнительные сведения о масштабировании службы приложений и возможностях автоматического масштабирования см. в статье [Увеличение масштаба приложения в Azure](web-sites-scale.md).</span><span class="sxs-lookup"><span data-stu-id="008cc-121">For more information about App Service scaling and autoscaling options read: [Scale a Web App in Azure App Service](web-sites-scale.md).</span></span>  

## <span data-ttu-id="008cc-122"><a name="socketresources"></a>Если исчерпаны ресурсы сокетов</span><span class="sxs-lookup"><span data-stu-id="008cc-122"><a name="socketresources"></a>When socket resources are exhausted</span></span>
<span data-ttu-id="008cc-123">Обычно причиной истощения исходящие соединения TCP используется hello клиентских библиотек, которые не реализовано tooreuse TCP-соединения или в случае hello выше уровня протокола, например HTTP - Keep-Alive не используется.</span><span class="sxs-lookup"><span data-stu-id="008cc-123">A common reason for exhausting outbound TCP connections is hello use of client libraries which are not implemented tooreuse TCP connections, or in hello case of a higher level protocol such as HTTP - Keep-Alive not being leveraged.</span></span> <span data-ttu-id="008cc-124">Просмотрите hello документации для каждой библиотеки hello ссылается hello приложений в вашей tooensure план службы приложений, настроенные или в коде для эффективного многократного исходящих подключений.</span><span class="sxs-lookup"><span data-stu-id="008cc-124">Please review hello documentation for each of hello libraries referenced by hello apps in your App Service Plan tooensure they are configured or accessed in your code for efficient reuse of outbound connections.</span></span> <span data-ttu-id="008cc-125">Также следуйте инструкциям документации hello библиотеки для создания и выпуска или очистки tooavoid утечка подключений.</span><span class="sxs-lookup"><span data-stu-id="008cc-125">Also follow hello library documentation guidance for proper creation and release or cleanup tooavoid leaking connections.</span></span> <span data-ttu-id="008cc-126">Во время исследования библиотек такого клиента влияние ход выполнения может снизить, горизонтальное масштабирование экземпляров toomultiple.</span><span class="sxs-lookup"><span data-stu-id="008cc-126">While such client libraries investigations are in progress impact may be mitigated by scaling out toomultiple instances.</span></span>  

## <span data-ttu-id="008cc-127"><a name="appbackup"></a>Когда начинаются сбои архивации приложения</span><span class="sxs-lookup"><span data-stu-id="008cc-127"><a name="appbackup"></a>When your app backup starts failing</span></span>
<span data-ttu-id="008cc-128">Здравствуйте две основных причины, почему такие сбоя процесса резервного копирования приложение: недопустимый хранения параметров и Недопустимая конфигурация базы данных.</span><span class="sxs-lookup"><span data-stu-id="008cc-128">hello two most common reasons why app backup fails are: invalid storage settings and invalid database configuration.</span></span> <span data-ttu-id="008cc-129">Эти ошибки обычно происходит при отсутствии изменений toostorage или ресурсы базы данных или изменения инструкции по tooaccess эти ресурсы (например учетные данные обновлены для выбранной в hello параметры резервного копирования базы данных hello).</span><span class="sxs-lookup"><span data-stu-id="008cc-129">These failures typically happen when there are changes toostorage or database resources, or changes for how tooaccess these resources (e.g. credentials updated for hello database selected in hello backup settings).</span></span> <span data-ttu-id="008cc-130">Обычно резервные копии по расписанию и требуют доступа toostorage (для вывода hello, резервное копирование файлов) и базы данных (для копирования и чтения включаются в резервную копию hello toobe содержимое).</span><span class="sxs-lookup"><span data-stu-id="008cc-130">Backups typically run on a schedule and require access toostorage (for outputting hello backed up files) and databases (for copying and reading contents toobe included in hello backup).</span></span> <span data-ttu-id="008cc-131">Здравствуйте, результатом отсутствия tooaccess любой из этих ресурсов будет постоянные сбои резервного копирования.</span><span class="sxs-lookup"><span data-stu-id="008cc-131">hello result of failing tooaccess either of these resources would be consistent backup failure.</span></span> 

<span data-ttu-id="008cc-132">При возникновении ошибок резервного копирования, просмотрите последние результаты toounderstand, происходит сбой какой тип.</span><span class="sxs-lookup"><span data-stu-id="008cc-132">When backup failures happen, please review most recent results toounderstand which type of failure is happening.</span></span> <span data-ttu-id="008cc-133">В случае сбоев хранилища доступа hello просмотрите и обновить параметры хранилища hello, используемых в конфигурации резервного копирования hello.</span><span class="sxs-lookup"><span data-stu-id="008cc-133">In hello case of storage access failures, please review and update hello storage settings used in hello backup configuration.</span></span> <span data-ttu-id="008cc-134">В случае hello отказы при доступе к базе данных просмотреть и обновить строки подключения в параметрах приложения; для продолжения tooupdate tooproperly вашей конфигурации резервного копирования включают hello необходимые базы данных.</span><span class="sxs-lookup"><span data-stu-id="008cc-134">In hello case of database access failures, please review and update your connections strings as part of app settings; then proceed tooupdate your backup configuration tooproperly include hello required databases.</span></span> <span data-ttu-id="008cc-135">Дополнительные сведения о резервном копировании приложения см. в разделе hello [резервное копирование веб-приложения в службе приложений Azure](web-sites-backup.md) документации.</span><span class="sxs-lookup"><span data-stu-id="008cc-135">For more information on app backup please see hello [Back up a web app in Azure App Service](web-sites-backup.md) documentation.</span></span>

## <span data-ttu-id="008cc-136"><a name="nodejs"></a>Если новых приложений Node.js являются tooAzure развернутой службы приложений</span><span class="sxs-lookup"><span data-stu-id="008cc-136"><a name="nodejs"></a>When new Node.js apps are deployed tooAzure App Service</span></span>
<span data-ttu-id="008cc-137">Конфигурации по умолчанию службы приложений Azure для Node.js приложений является предполагаемым toobest масть hello требованиям наиболее распространенных приложений.</span><span class="sxs-lookup"><span data-stu-id="008cc-137">Azure App Service default configuration for Node.js apps is intended toobest suit hello needs of most common apps.</span></span> <span data-ttu-id="008cc-138">Если конфигурация для приложения Node.js бы выиграть от личные настройки производительности tooimprove или оптимизировать использование ресурсов ЦП, памяти и сетевых ресурсов, может просмотреть наши рекомендации и действия по устранению неполадок.</span><span class="sxs-lookup"><span data-stu-id="008cc-138">If configuration for your Node.js app would benefit from personalized tuning tooimprove performance or optimize resource usage for CPU/memory/network resources, you could review our best practices and troubleshooting steps.</span></span> <span data-ttu-id="008cc-139">В этой статье документации описываются параметры iisnode hello, может потребоваться tooconfigure для вашего приложения Node.js описывает hello различные сценарии или проблемы, которые приложение может столкнуться и показано, как tooaddress эти проблемы: [рекомендации и руководстве по устранению неполадок для узла приложения в службе приложений Azure](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span><span class="sxs-lookup"><span data-stu-id="008cc-139">This documentation article describes hello iisnode settings you may need tooconfigure for your Node.js app, describes hello various scenarios or issues that your app may be facing, and shows how tooaddress these issues: [Best practices and troubleshooting guide for Node applications on Azure App Service](app-service-web-nodejs-best-practices-and-troubleshoot-guide.md).</span></span>   

