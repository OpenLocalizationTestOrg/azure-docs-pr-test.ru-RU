---
title: "рекомендации aaaBest и руководстве по устранению неполадок для узла приложений на веб-приложениях Azure"
description: "Сведения, рекомендации по обеспечению hello и действия по устранению неполадок для узла приложений на веб-приложения Azure."
services: app-service\web
documentationcenter: nodejs
author: ranjithr
manager: wadeh
editor: 
ms.assetid: 387ea217-7910-4468-8987-9a1022a99bef
ms.service: app-service-web
ms.workload: web
ms.tgt_pltfrm: na
ms.devlang: nodejs
ms.topic: article
ms.date: 06/06/2016
ms.author: ranjithr
ms.openlocfilehash: 975898142a224f14df1091a46d16e9074d9e2831
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-and-troubleshooting-guide-for-node-applications-on-azure-web-apps"></a><span data-ttu-id="37df4-103">Рекомендации и руководство по устранению неполадок приложений Node в веб-приложениях Azure</span><span class="sxs-lookup"><span data-stu-id="37df4-103">Best practices and troubleshooting guide for node applications on Azure Web Apps</span></span>
[!INCLUDE [tabs](../../includes/app-service-web-get-started-nav-tabs.md)]

<span data-ttu-id="37df4-104">В этой статье вы узнаете hello рекомендации и действия по устранению неполадок [узла приложения](app-service-web-get-started-nodejs.md) на веб-приложений Azure (с [iisnode](https://github.com/azure/iisnode)).</span><span class="sxs-lookup"><span data-stu-id="37df4-104">In this article, you will learn hello best practices and troubleshooting steps for [node applications](app-service-web-get-started-nodejs.md) running on Azure Webapps (with [iisnode](https://github.com/azure/iisnode)).</span></span>

> [!WARNING]
> <span data-ttu-id="37df4-105">Будьте осторожны при выполнении действий по устранению неполадок на рабочем сайте.</span><span class="sxs-lookup"><span data-stu-id="37df4-105">Use caution when using troubleshooting steps on your production site.</span></span> <span data-ttu-id="37df4-106">Рекомендуется tootroubleshoot приложения в рабочей установки, например вашей промежуточный слот и после устранения проблемы hello буферов в промежуточный слот на производственный слот.</span><span class="sxs-lookup"><span data-stu-id="37df4-106">Recommendation is tootroubleshoot your app on a non-production setup for example your staging slot and when hello issue is fixed, swap your staging slot with your production slot.</span></span>
> 
> 

## <a name="iisnode-configuration"></a><span data-ttu-id="37df4-107">Конфигурация IISNODE</span><span class="sxs-lookup"><span data-stu-id="37df4-107">IISNODE configuration</span></span>
<span data-ttu-id="37df4-108">Это [файл схемы](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) показывает все параметры hello, которые могут быть настроены для iisnode.</span><span class="sxs-lookup"><span data-stu-id="37df4-108">This [schema file](https://github.com/Azure/iisnode/blob/master/src/config/iisnode_schema_x64.xml) shows all hello settings that can be configured for iisnode.</span></span> <span data-ttu-id="37df4-109">Ниже приведены некоторые параметры hello, которые будут использоваться для приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-109">Some of hello settings that will be useful for your application are:</span></span>

* <span data-ttu-id="37df4-110">nodeProcessCountPerApplication</span><span class="sxs-lookup"><span data-stu-id="37df4-110">nodeProcessCountPerApplication</span></span>
  
    <span data-ttu-id="37df4-111">Этот параметр управляет числом hello узел процессов, запускаемых на каждое приложение IIS.</span><span class="sxs-lookup"><span data-stu-id="37df4-111">This setting controls hello number of node processes that are launched per IIS application.</span></span> <span data-ttu-id="37df4-112">Значение по умолчанию — 1.</span><span class="sxs-lookup"><span data-stu-id="37df4-112">Default value is 1.</span></span> <span data-ttu-id="37df4-113">Установив этот too0 можно запустить столько node.exe как число ядер вашей виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="37df4-113">You can launch as many node.exe’s as your VM core count by setting this too0.</span></span> <span data-ttu-id="37df4-114">Рекомендуемое значение — 0 для большинства приложений, поэтому можно использовать все hello ядер на компьютере.</span><span class="sxs-lookup"><span data-stu-id="37df4-114">Recommended value is 0 for most application so you can utilize all of hello cores on your machine.</span></span> <span data-ttu-id="37df4-115">Node.exe выполняется в одном потоке, поэтому один node.exe будет занимать более 1 ядра и tooget максимальной производительности узла приложения, необходимо tooutilize все ядра.</span><span class="sxs-lookup"><span data-stu-id="37df4-115">Node.exe is single threaded so one node.exe will consume a maximum of 1 core and tooget maximum performance out of your node application you would want tooutilize all cores.</span></span>
* <span data-ttu-id="37df4-116">nodeProcessCommandLine</span><span class="sxs-lookup"><span data-stu-id="37df4-116">nodeProcessCommandLine</span></span>
  
    <span data-ttu-id="37df4-117">Этот параметр управляет node.exe toohello путь hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-117">This setting controls hello path toohello node.exe.</span></span> <span data-ttu-id="37df4-118">Можно задать это значение toopoint tooyour node.exe версии.</span><span class="sxs-lookup"><span data-stu-id="37df4-118">You can set this value toopoint tooyour node.exe version.</span></span>
* <span data-ttu-id="37df4-119">maxConcurrentRequestsPerProcess</span><span class="sxs-lookup"><span data-stu-id="37df4-119">maxConcurrentRequestsPerProcess</span></span>
  
    <span data-ttu-id="37df4-120">Этот параметр определяет максимальное количество одновременных запросов, отправленных iisnode tooeach node.exe hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-120">This setting controls hello maximum number of concurrent requests sent by iisnode tooeach node.exe.</span></span> <span data-ttu-id="37df4-121">На веб-приложения azure значение по умолчанию hello равно Infinite.</span><span class="sxs-lookup"><span data-stu-id="37df4-121">On azure webapps, hello default value for this is Infinite.</span></span> <span data-ttu-id="37df4-122">Tooworry об этом параметре не будет.</span><span class="sxs-lookup"><span data-stu-id="37df4-122">You will not have tooworry about this setting.</span></span> <span data-ttu-id="37df4-123">За пределами azure веб-приложений hello значение по умолчанию — 1024.</span><span class="sxs-lookup"><span data-stu-id="37df4-123">Outside azure webapps, hello default value is 1024.</span></span> <span data-ttu-id="37df4-124">Вы можете tooconfigure, получает это в зависимости от того, сколько запросов приложения и как быстро приложение обрабатывает каждый запрос.</span><span class="sxs-lookup"><span data-stu-id="37df4-124">You might want tooconfigure this depending on how many requests your application gets and how fast your application processes each request.</span></span>
* <span data-ttu-id="37df4-125">maxNamedPipeConnectionRetry</span><span class="sxs-lookup"><span data-stu-id="37df4-125">maxNamedPipeConnectionRetry</span></span>
  
    <span data-ttu-id="37df4-126">Этот параметр управляет hello максимальное число iisnode повторит попытку внесения подключение с именем канала toosend hello запрос через toonode.exe hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-126">This setting controls hello maximum number of times iisnode will retry making connection on hello named pipe toosend hello request over toonode.exe.</span></span> <span data-ttu-id="37df4-127">Этот параметр в сочетании с namedPipeConnectionRetryDelay определяет hello общее время ожидания в пределах iisnode каждого запроса.</span><span class="sxs-lookup"><span data-stu-id="37df4-127">This setting in combination with namedPipeConnectionRetryDelay determines hello total timeout of each request within iisnode.</span></span> <span data-ttu-id="37df4-128">В веб-приложениях Azure для этого параметра по умолчанию задано значение 200.</span><span class="sxs-lookup"><span data-stu-id="37df4-128">Default value is 200 on Azure Webapps.</span></span> <span data-ttu-id="37df4-129">Общее время ожидания в секундах равно произведению maxNamedPipeConnectionRetry \*на namedPipeConnectionRetryDelay, разделенному на 1000.</span><span class="sxs-lookup"><span data-stu-id="37df4-129">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
* <span data-ttu-id="37df4-130">namedPipeConnectionRetryDelay</span><span class="sxs-lookup"><span data-stu-id="37df4-130">namedPipeConnectionRetryDelay</span></span>
  
    <span data-ttu-id="37df4-131">Этот параметр элементы управления hello объем iisnode время (в мс) будет ожидать между каждой toosend для повтора запроса toonode.exe через именованный канал hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-131">This setting controls hello amount of time (in ms) iisnode will wait for between each retry toosend request toonode.exe over hello named pipe.</span></span> <span data-ttu-id="37df4-132">Значение по умолчанию — 250 мс.</span><span class="sxs-lookup"><span data-stu-id="37df4-132">Default value is 250ms.</span></span>
    <span data-ttu-id="37df4-133">Общее время ожидания в секундах равно произведению maxNamedPipeConnectionRetry \*на namedPipeConnectionRetryDelay, разделенному на 1000.</span><span class="sxs-lookup"><span data-stu-id="37df4-133">Total Timeout in seconds = (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000</span></span>
  
    <span data-ttu-id="37df4-134">По умолчанию hello общее время ожидания в iisnode на веб-приложений azure — 200 \* 250 секунд = 50 секунд.</span><span class="sxs-lookup"><span data-stu-id="37df4-134">By default hello total timeout in iisnode on azure webapps is 200 \* 250ms = 50 seconds.</span></span>
* <span data-ttu-id="37df4-135">logDirectory</span><span class="sxs-lookup"><span data-stu-id="37df4-135">logDirectory</span></span>
  
    <span data-ttu-id="37df4-136">Этот параметр управляет hello каталог, где iisnode регистрируют stdout и stderr.</span><span class="sxs-lookup"><span data-stu-id="37df4-136">This setting controls hello directory where iisnode will log stdout/stderr.</span></span> <span data-ttu-id="37df4-137">Значение по умолчанию — iisnode, который является относительным toohello основной скрипт directory (каталог, где присутствует основной server.js)</span><span class="sxs-lookup"><span data-stu-id="37df4-137">Default value is iisnode which is relative toohello main script directory (directory where main server.js is present)</span></span>
* <span data-ttu-id="37df4-138">debuggerExtensionDll</span><span class="sxs-lookup"><span data-stu-id="37df4-138">debuggerExtensionDll</span></span>
  
    <span data-ttu-id="37df4-139">Этот параметр определяет версию средства node-inspector, которую iisnode будет использовать при выполнении отладки приложения Node.</span><span class="sxs-lookup"><span data-stu-id="37df4-139">This setting controls what version of node-inspector iisnode will use when debugging your node application.</span></span> <span data-ttu-id="37df4-140">В настоящее время iisnode инспектора 0.7.3.dll и iisnode inspector.dll являются допустимыми значениями этого параметра hello только 2.</span><span class="sxs-lookup"><span data-stu-id="37df4-140">Currently iisnode-inspector-0.7.3.dll and iisnode-inspector.dll are hello only 2 valid values for this setting.</span></span> <span data-ttu-id="37df4-141">По умолчанию для этого параметра задано значение iisnode-inspector-0.7.3.dll.</span><span class="sxs-lookup"><span data-stu-id="37df4-141">Default value is iisnode-inspector-0.7.3.dll.</span></span> <span data-ttu-id="37df4-142">версия iisnode инспектора 0.7.3.dll использует узел инспектора 0.7.3 и использует websockets, поэтому вам необходимо будет tooenable websockets на ваш toouse azure веб-приложение этой версии.</span><span class="sxs-lookup"><span data-stu-id="37df4-142">iisnode-inspector-0.7.3.dll version uses node-inspector-0.7.3 and uses websockets, so you will need tooenable websockets on your azure webapp toouse this version.</span></span> <span data-ttu-id="37df4-143">В разделе <http://www.ranjithr.com/?p=98> Дополнительные сведения о как tooconfigure iisnode toouse hello новый узел Инспектор.</span><span class="sxs-lookup"><span data-stu-id="37df4-143">See <http://www.ranjithr.com/?p=98> for more details on how tooconfigure iisnode toouse hello new node-inspector.</span></span>
* <span data-ttu-id="37df4-144">flushResponse</span><span class="sxs-lookup"><span data-stu-id="37df4-144">flushResponse</span></span>
  
    <span data-ttu-id="37df4-145">поведение по умолчанию Hello служб IIS, что он помещает в буфер данные ответа вверх too4MB перед сбросом, или до конца hello hello ответа, что наступит раньше.</span><span class="sxs-lookup"><span data-stu-id="37df4-145">hello default behavior of IIS is that it buffers response data up too4MB before flushing, or until hello end of hello response, whichever comes first.</span></span> <span data-ttu-id="37df4-146">iisnode предлагает параметр toooverride такое поведение конфигурации: tooflush фрагмент текст сущности ответа hello как можно скорее iisnode получит его из node.exe, вы должны tooset hello iisnode/@flushResponse атрибута в web.config too'true ":</span><span class="sxs-lookup"><span data-stu-id="37df4-146">iisnode offers a configuration setting toooverride this behavior: tooflush a fragment of hello response entity body as soon as iisnode receives it from node.exe, you need tooset hello iisnode/@flushResponse attribute in web.config too'true':</span></span>
  
    ```
    <configuration>    
        <system.webServer>    
            <!-- ... -->    
            <iisnode flushResponse="true" />    
        </system.webServer>    
    </configuration>
    ```
  
    <span data-ttu-id="37df4-147">Очистка каждого фрагмента текст сущности ответа hello задействуется снижение производительности, снижает пропускную способность hello hello системы на ~ 5% (по состоянию на v0.1.13), поэтому этот параметр только tooendpoints, требующие ответа потоковой передачи (например, при использовании hello наилучшим образом tooscope <location> элемента в файле web.config hello)</span><span class="sxs-lookup"><span data-stu-id="37df4-147">Enabling flushing of every fragment of hello response entity body adds performance overhead that reduces hello throughput of hello system by ~5% (as of v0.1.13), so it is best tooscope this setting only tooendpoints that require response streaming (e.g. using hello <location> element in hello web.config)</span></span>
  
    <span data-ttu-id="37df4-148">В toothis сложения для потоковой передачи приложений, необходимо будет tooalso responseBufferLimit набор из вашего too0 iisnode обработчика.</span><span class="sxs-lookup"><span data-stu-id="37df4-148">In addition toothis, for streaming applications, you will need tooalso set responseBufferLimit of your iisnode handler too0.</span></span>
  
    ```
    <handlers>    
        <add name="iisnode" path="app.js" verb="\*" modules="iisnode" responseBufferLimit="0"/>    
    </handlers>
    ```
* <span data-ttu-id="37df4-149">watchedFiles</span><span class="sxs-lookup"><span data-stu-id="37df4-149">watchedFiles</span></span>
  
    <span data-ttu-id="37df4-150">Это список разделенных точкой с запятой файлов, в которых будут отслеживаться изменения.</span><span class="sxs-lookup"><span data-stu-id="37df4-150">This is a semi-colon separated list of files that will be watched for changes.</span></span> <span data-ttu-id="37df4-151">Изменение файла tooa вызывает toorecycle приложения hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-151">A change tooa file causes hello application toorecycle.</span></span> <span data-ttu-id="37df4-152">Каждая запись состоит из имени необязательно каталога, а также имя требуемого файла, которое toohello относительный каталог, где находится точка входа для основного приложения hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-152">Each entry consists of an optional directory name plus required file name which are relative toohello directory where hello main application entry point is located.</span></span> <span data-ttu-id="37df4-153">В части имени файла hello только допускаются подстановочные знаки.</span><span class="sxs-lookup"><span data-stu-id="37df4-153">Wild cards are allowed in hello file name portion only.</span></span> <span data-ttu-id="37df4-154">Значение по умолчанию — \*.js;web.config.</span><span class="sxs-lookup"><span data-stu-id="37df4-154">Default value is “\*.js;web.config”</span></span>
* <span data-ttu-id="37df4-155">recycleSignalEnabled</span><span class="sxs-lookup"><span data-stu-id="37df4-155">recycleSignalEnabled</span></span>
  
    <span data-ttu-id="37df4-156">Значение по умолчанию — false.</span><span class="sxs-lookup"><span data-stu-id="37df4-156">Default value is false.</span></span> <span data-ttu-id="37df4-157">Если параметр включен, приложение узел сможет подключиться tooa именованного канала (переменная среды IISNODE\_УПРАВЛЕНИЯ\_КАНАЛА) и отправить сообщение «Корзина».</span><span class="sxs-lookup"><span data-stu-id="37df4-157">If enabled, your node application can connect tooa named pipe (environment variable IISNODE\_CONTROL\_PIPE) and send a “recycle” message.</span></span> <span data-ttu-id="37df4-158">Это приведет к hello w3wp toorecycle надлежащим образом.</span><span class="sxs-lookup"><span data-stu-id="37df4-158">This will cause hello w3wp toorecycle gracefully.</span></span>
* <span data-ttu-id="37df4-159">idlePageOutTimePeriod</span><span class="sxs-lookup"><span data-stu-id="37df4-159">idlePageOutTimePeriod</span></span>
  
    <span data-ttu-id="37df4-160">По умолчанию для этого параметра используется значение 0, а это значит, что он отключен.</span><span class="sxs-lookup"><span data-stu-id="37df4-160">Default value is 0 which means this feature is disabled.</span></span> <span data-ttu-id="37df4-161">При toosome установите значение больше 0, iisnode будет откачивать страницы из его дочерних процессов каждые «idlePageOutTimePeriod» миллисекунд.</span><span class="sxs-lookup"><span data-stu-id="37df4-161">When set toosome value greater than 0, iisnode will page out all its child processes every ‘idlePageOutTimePeriod’ milliseconds.</span></span> <span data-ttu-id="37df4-162">toounderstand откачивать означает, что страницы можно найти toothis [документации](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span><span class="sxs-lookup"><span data-stu-id="37df4-162">toounderstand what page out means, please refer toothis [documentation](https://msdn.microsoft.com/library/windows/desktop/ms682606.aspx).</span></span> <span data-ttu-id="37df4-163">Этот параметр будет использоваться для приложений, потребляющих большой объем памяти и хотите toodisk памяти toopageout иногда toofree некоторые оперативной памяти.</span><span class="sxs-lookup"><span data-stu-id="37df4-163">This setting will be useful for applications that consume a lot of memory and want toopageout memory toodisk occasionally toofree up some RAM.</span></span>

> [!WARNING]
> <span data-ttu-id="37df4-164">Соблюдайте осторожность при включении hello Далее параметры конфигурации приложений в производственной среде.</span><span class="sxs-lookup"><span data-stu-id="37df4-164">Use caution when enabling hello following configuration settings on production applications.</span></span> <span data-ttu-id="37df4-165">Рекомендуется toonot Включение динамической производственных приложений.</span><span class="sxs-lookup"><span data-stu-id="37df4-165">Recommendation is toonot enable them on live production applications.</span></span>
> 
> 

* <span data-ttu-id="37df4-166">debugHeaderEnabled</span><span class="sxs-lookup"><span data-stu-id="37df4-166">debugHeaderEnabled</span></span>
  
    <span data-ttu-id="37df4-167">значение по умолчанию Hello имеет значение false.</span><span class="sxs-lookup"><span data-stu-id="37df4-167">hello default value is false.</span></span> <span data-ttu-id="37df4-168">Если задать tootrue, iisnode добавит ответ заголовок отладки iisnode tooevery HTTP ответа HTTP отправляет значение заголовка hello iisnode отладки является URL-адрес.</span><span class="sxs-lookup"><span data-stu-id="37df4-168">If set tootrue, iisnode will add an HTTP response header iisnode-debug tooevery HTTP response it sends hello iisnode-debug header value is a URL.</span></span> <span data-ttu-id="37df4-169">Отдельные части диагностических сведений можно достигнутой, просмотрев hello фрагмент URL-адреса, но гораздо Улучшенная визуализация достигается открытием hello URL-адрес в браузере hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-169">Individual pieces of diagnostic information can be gleaned by looking at hello URL fragment, but a much better visualization is achieved by opening hello URL in hello browser.</span></span>
* <span data-ttu-id="37df4-170">loggingEnabled</span><span class="sxs-lookup"><span data-stu-id="37df4-170">loggingEnabled</span></span>
  
    <span data-ttu-id="37df4-171">Этот параметр управляет ведения журнала hello stdout и stderr, iisnode.</span><span class="sxs-lookup"><span data-stu-id="37df4-171">This setting controls hello logging of stdout and stderr by iisnode.</span></span> <span data-ttu-id="37df4-172">Iisnode будет stdout и stderr из узла процессов, которые он запускает захвата и записи toohello каталог, указанный в параметре «logDirectory» hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-172">Iisnode will capture stdout/stderr from node processes it launches and write toohello directory specified in hello ‘logDirectory’ setting.</span></span> <span data-ttu-id="37df4-173">После включения приложения будет записывать журналы toohello файловой системы, в зависимости от объема hello ведения журнала, выполненную приложения hello, возможно влияние на производительность.</span><span class="sxs-lookup"><span data-stu-id="37df4-173">Once this is enable, your application will be writing logs toohello file system and depending on hello amount of logging done by hello application, there could be performance implications.</span></span>
* <span data-ttu-id="37df4-174">devErrorsEnabled</span><span class="sxs-lookup"><span data-stu-id="37df4-174">devErrorsEnabled</span></span>
  
    <span data-ttu-id="37df4-175">Значение по умолчанию — false.</span><span class="sxs-lookup"><span data-stu-id="37df4-175">Default value is false.</span></span> <span data-ttu-id="37df4-176">Если значение tootrue, iisnode отображает код состояния hello HTTP и код ошибки Win32 в браузере.</span><span class="sxs-lookup"><span data-stu-id="37df4-176">When set tootrue, iisnode will display hello HTTP status code and Win32 error code on your browser.</span></span> <span data-ttu-id="37df4-177">Код win32 Hello будут полезными при отладке определенных типов проблем.</span><span class="sxs-lookup"><span data-stu-id="37df4-177">hello win32 code will be helpful in debugging certain types of issues.</span></span>
* <span data-ttu-id="37df4-178">debuggingEnabled (не включайте этот параметр на активном рабочем сайте)</span><span class="sxs-lookup"><span data-stu-id="37df4-178">debuggingEnabled (do not enable on live production site)</span></span>
  
    <span data-ttu-id="37df4-179">Этот параметр определяет функцию отладки.</span><span class="sxs-lookup"><span data-stu-id="37df4-179">This setting controls debugging feature.</span></span> <span data-ttu-id="37df4-180">В iisnode интегрировано средство node-inspector.</span><span class="sxs-lookup"><span data-stu-id="37df4-180">Iisnode is integrated with node-inspector.</span></span> <span data-ttu-id="37df4-181">Включение этого параметра активирует отладку приложения Node.</span><span class="sxs-lookup"><span data-stu-id="37df4-181">By enabling this setting, you enable debugging of your node application.</span></span> <span data-ttu-id="37df4-182">После включения этого параметра iisnode будет файлы необходимости узел инспектора hello макета в каталоге «debuggerVirtualDir» на hello первого отладки запроса tooyour узла приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-182">Once this setting is enabled, iisnode will layout hello necessary node-inspector files in ‘debuggerVirtualDir’ directory on hello first debug request tooyour node application.</span></span> <span data-ttu-id="37df4-183">Можно загрузить hello узел инспектора, отправляя toohttp://yoursite/server.js/debug запроса.</span><span class="sxs-lookup"><span data-stu-id="37df4-183">You can load hello node-inspector by sending a request toohttp://yoursite/server.js/debug.</span></span> <span data-ttu-id="37df4-184">Сегмент URL-адреса hello отладки можно управлять с параметром «debuggerPathSegment».</span><span class="sxs-lookup"><span data-stu-id="37df4-184">You can control hello debug URL segment with ‘debuggerPathSegment’ setting.</span></span> <span data-ttu-id="37df4-185">По умолчанию для этого параметра используется значение debug.</span><span class="sxs-lookup"><span data-stu-id="37df4-185">By default debuggerPathSegment=’debug’.</span></span> <span data-ttu-id="37df4-186">Можно задать этот tooa GUID, например, чтобы оно было труднее toobe обнаруженные другими пользователями.</span><span class="sxs-lookup"><span data-stu-id="37df4-186">You can set this tooa GUID for example so that it is more difficult toobe discovered by others.</span></span>
  
    <span data-ttu-id="37df4-187">Дополнительные сведения об отладке см. [здесь](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html).</span><span class="sxs-lookup"><span data-stu-id="37df4-187">Check this [link](https://tomasz.janczuk.org/2011/11/debug-nodejs-applications-on-windows.html) for more details on debugging.</span></span>

## <a name="scenarios-and-recommendationstroubleshooting"></a><span data-ttu-id="37df4-188">Сценарии, рекомендации и устранение неполадок</span><span class="sxs-lookup"><span data-stu-id="37df4-188">Scenarios and recommendations/troubleshooting</span></span>
### <a name="my-node-application-is-making-too-many-outbound-calls"></a><span data-ttu-id="37df4-189">В этом сценарии приложение Node отравляет слишком много вызовов.</span><span class="sxs-lookup"><span data-stu-id="37df4-189">My node application is making too many outbound calls.</span></span>
<span data-ttu-id="37df4-190">Во многих приложениях необходимо toomake исходящие подключения как часть их нормальной работе.</span><span class="sxs-lookup"><span data-stu-id="37df4-190">Many applications would want toomake outbound connections as part of their regular operation.</span></span> <span data-ttu-id="37df4-191">Например при поступлении запроса приложения узла будет требуется toocontact REST API в другом месте-запрос hello tooprocess некоторые сведения.</span><span class="sxs-lookup"><span data-stu-id="37df4-191">For example, when a request comes in, your node app would want toocontact a REST API elsewhere and get some information tooprocess hello request.</span></span> <span data-ttu-id="37df4-192">При выполнении вызовов http или https, необходимо toouse keep alive агента.</span><span class="sxs-lookup"><span data-stu-id="37df4-192">You would want toouse a keep alive agent when making http or https calls.</span></span> <span data-ttu-id="37df4-193">Например можно использовать модуль agentkeepalive hello агентом keep alive при выполнении этих исходящих вызовов.</span><span class="sxs-lookup"><span data-stu-id="37df4-193">For example, you could use hello agentkeepalive module as your keep alive agent when making these outbound calls.</span></span> <span data-ttu-id="37df4-194">Это гарантирует повторного hello сокетов на вашей виртуальной Машины azure веб-приложения и уменьшая hello сократить затраты на создание новых сокетов для каждого исходящего запроса.</span><span class="sxs-lookup"><span data-stu-id="37df4-194">This makes sure that hello sockets are reused on your azure webapp VM and reducing hello overhead of creating new sockets for every outbound request.</span></span> <span data-ttu-id="37df4-195">Кроме того это гарантирует, что вы используете число меньше toomake сокеты много исходящих запросов и поэтому не должно превышать значение параметра maxSockets hello, который выделяется на виртуальную Машину.</span><span class="sxs-lookup"><span data-stu-id="37df4-195">Also, this makes sure that you are using less number of sockets toomake many outbound requests and therefore you don’t exceed hello maxSockets that are allocated per VM.</span></span> <span data-ttu-id="37df4-196">Рекомендации по веб-приложения Azure была бы значение параметра maxSockets agentKeepAlive hello tooset значение tooa всего 160 сокетов каждой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="37df4-196">Recommendation on Azure Webapps would be tooset hello agentKeepAlive maxSockets value tooa total of 160 sockets per VM.</span></span> <span data-ttu-id="37df4-197">Это означает, что при наличии 4 node.exe на hello виртуальной Машины нужно tooset hello agentKeepAlive значение параметра maxSockets too40 за node.exe которой равно 160 общее каждой виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="37df4-197">This means that if you have 4 node.exe running on hello VM, you would want tooset hello agentKeepAlive maxSockets too40 per node.exe which is 160 total per VM.</span></span>

<span data-ttu-id="37df4-198">Пример конфигурации модуля [agentKeepALive](https://www.npmjs.com/package/agentkeepalive):</span><span class="sxs-lookup"><span data-stu-id="37df4-198">Example [agentKeepALive](https://www.npmjs.com/package/agentkeepalive) configuration:</span></span>

```
var keepaliveAgent = new Agent({    
    maxSockets: 40,    
    maxFreeSockets: 10,    
    timeout: 60000,    
    keepAliveTimeout: 300000    
});
```

<span data-ttu-id="37df4-199">В этом примере предполагается, что на виртуальной машине запущено 4 файла node.exe.</span><span class="sxs-lookup"><span data-stu-id="37df4-199">This example assumes you have 4 node.exe running on your VM.</span></span> <span data-ttu-id="37df4-200">При наличии Разное количество node.exe на hello ВМ будет иметь параметр соответственно значение параметра maxSockets hello toomodify.</span><span class="sxs-lookup"><span data-stu-id="37df4-200">If you have a different number of node.exe running on hello VM, you will have toomodify hello maxSockets setting accordingly.</span></span>

### <a name="my-node-application-is-consuming-too-much-cpu"></a><span data-ttu-id="37df4-201">Чрезмерное потребление ресурсов ЦП приложением Node</span><span class="sxs-lookup"><span data-stu-id="37df4-201">My node application is consuming too much CPU.</span></span>
<span data-ttu-id="37df4-202">На вашем портале может отобразиться оповещение от веб-приложений Azure о высоком потреблении ресурсов ЦП.</span><span class="sxs-lookup"><span data-stu-id="37df4-202">You will probably get a recommendation from Azure Webapps on your portal about high cpu consumption.</span></span> <span data-ttu-id="37df4-203">Вы также можете toowatch мониторов настройки для определенных [метрики](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="37df4-203">You can also setup monitors toowatch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="37df4-204">При проверке использование hello ЦП на hello [панели мониторинга портала Azure](../application-insights/app-insights-web-monitor-performance.md), проверьте hello МАКСИМАЛЬНЫЕ значения для ЦП, не пропустите Здравствуй пиковыми значениями.</span><span class="sxs-lookup"><span data-stu-id="37df4-204">When checking hello CPU usage on hello [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check hello MAX values for CPU so you don’t miss out hello peak values.</span></span>
<span data-ttu-id="37df4-205">В случаях, когда вы считаете приложение потребляет слишком много ЦП, и вы не можете объяснить, почему это происходит необходимо будет tooprofile узла приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-205">In cases where you think your application is consuming too much CPU and you cannot explain why, you will need tooprofile your node application.</span></span>

### 
#### <a name="profiling-your-node-application-on-azure-webapps-with-v8-profiler"></a><span data-ttu-id="37df4-206">Профилирование приложения Node в веб-приложениях Azure с помощью средства V8-Profiler</span><span class="sxs-lookup"><span data-stu-id="37df4-206">Profiling your node application on azure webapps with V8-Profiler</span></span>
<span data-ttu-id="37df4-207">Позволяет, например, предположим, что приложение hello world, что требуется tooprofile, как показано ниже:</span><span class="sxs-lookup"><span data-stu-id="37df4-207">For example, lets say you have a hello world app that you want tooprofile as shown below:</span></span>

```
var http = require('http');    
function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    WriteConsoleLog();    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="37df4-208">Перейдите на сайт https://yoursite.scm.azurewebsites.net/DebugConsole tooyour scm</span><span class="sxs-lookup"><span data-stu-id="37df4-208">Go tooyour scm site https://yoursite.scm.azurewebsites.net/DebugConsole</span></span>

<span data-ttu-id="37df4-209">Откроется следующая командная строка.</span><span class="sxs-lookup"><span data-stu-id="37df4-209">You will see a command prompt as shown below.</span></span> <span data-ttu-id="37df4-210">Перейдите в каталог site/wwwroot.</span><span class="sxs-lookup"><span data-stu-id="37df4-210">Go into your site/wwwroot directory</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_install_v8.png)

<span data-ttu-id="37df4-211">Выполните команду hello, «npm install v8 профилировщик»</span><span class="sxs-lookup"><span data-stu-id="37df4-211">Run hello command “npm install v8-profiler”</span></span>

<span data-ttu-id="37df4-212">В каталоге node\_modules установится средство v8-profiler и все его зависимости.</span><span class="sxs-lookup"><span data-stu-id="37df4-212">This should install v8-profiler under node\_modules directory and all of its dependencies.</span></span>
<span data-ttu-id="37df4-213">Теперь измените вашей tooprofile server.js приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-213">Now, edit your server.js tooprofile your application.</span></span>

```
var http = require('http');    
var profiler = require('v8-profiler');    
var fs = require('fs');

function WriteConsoleLog() {    
    for(var i=0;i<99999;++i) {    
        console.log('hello world');    
    }    
}

function HandleRequest() {    
    profiler.startProfiling('HandleRequest');    
    WriteConsoleLog();    
    fs.writeFileSync('profile.cpuprofile', JSON.stringify(profiler.stopProfiling('HandleRequest')));    
}

http.createServer(function (req, res) {    
    res.writeHead(200, {'Content-Type': 'text/html'});    
    HandleRequest();    
    res.end('Hello world!');    
}).listen(process.env.PORT);
```

<span data-ttu-id="37df4-214">Hello выше изменения будет профилировать WriteConsoleLog функции hello, а затем написать too'profile.cpuprofile выходные данные профиля hello "файл в папке wwwroot вашего сайта.</span><span class="sxs-lookup"><span data-stu-id="37df4-214">hello above changes will profile hello WriteConsoleLog function and then write hello profile output too‘profile.cpuprofile’ file under your site wwwroot.</span></span> <span data-ttu-id="37df4-215">Отправьте запрос tooyour приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-215">Send a request tooyour application.</span></span> <span data-ttu-id="37df4-216">В каталоге site wwwroot будет создан файл profile.cpuprofile.</span><span class="sxs-lookup"><span data-stu-id="37df4-216">You will see a ‘profile.cpuprofile’ file created under your site wwwroot.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/scm_profile.cpuprofile.png)

<span data-ttu-id="37df4-217">Загрузить этот файл и необходимо будет tooopen этого файла в хром кнопкой F12.</span><span class="sxs-lookup"><span data-stu-id="37df4-217">Download this file and you will need tooopen this file with Chrome F12 Tools.</span></span> <span data-ttu-id="37df4-218">Нажмите клавишу F12 в chrome, затем нажмите «Вкладка «Профили»» hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-218">Hit F12 on chrome, then click on hello “Profiles Tab”.</span></span> <span data-ttu-id="37df4-219">Нажмите кнопку "Загрузить".</span><span class="sxs-lookup"><span data-stu-id="37df4-219">Click on “Load” Button.</span></span> <span data-ttu-id="37df4-220">Выберите только что загруженный файл profile.cpuprofile.</span><span class="sxs-lookup"><span data-stu-id="37df4-220">Select your profile.cpuprofile file that you just downloaded.</span></span> <span data-ttu-id="37df4-221">Щелкните только что загружен профиль hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-221">Click on hello profile you just loaded.</span></span>

![](./media/app-service-web-nodejs-best-practices-and-troubleshoot-guide/chrome_tools_view.png)

<span data-ttu-id="37df4-222">Вы увидите, что 95% времени hello затраченного на WriteConsoleLog функции, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="37df4-222">You will see that 95% of hello time was consumed by WriteConsoleLog function as shown below.</span></span> <span data-ttu-id="37df4-223">Это также показывает номера hello точных строк и исходных файлов, вызывающие проблемы hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-223">This also shows you hello exact line numbers and source files that cause hello issue.</span></span>

### <a name="my-node-application-is-consuming-too-much-memory"></a><span data-ttu-id="37df4-224">Чрезмерное потребление памяти приложением Node</span><span class="sxs-lookup"><span data-stu-id="37df4-224">My node application is consuming too much memory.</span></span>
<span data-ttu-id="37df4-225">На вашем портале может отобразиться оповещение от веб-приложений Azure о высоком потреблении памяти.</span><span class="sxs-lookup"><span data-stu-id="37df4-225">You will probably get a recommendation from Azure Webapps on your portal about high memory consumption.</span></span> <span data-ttu-id="37df4-226">Вы также можете toowatch мониторов настройки для определенных [метрики](web-sites-monitor.md).</span><span class="sxs-lookup"><span data-stu-id="37df4-226">You can also setup monitors toowatch for certain [metrics](web-sites-monitor.md).</span></span> <span data-ttu-id="37df4-227">При проверке hello использование памяти на hello [панели мониторинга портала Azure](../application-insights/app-insights-web-monitor-performance.md), проверьте hello МАКСИМАЛЬНОЕ значения для памяти, не пропустите Здравствуй пиковыми значениями.</span><span class="sxs-lookup"><span data-stu-id="37df4-227">When checking hello memory usage on hello [Azure Portal Dashboard](../application-insights/app-insights-web-monitor-performance.md), please check hello MAX values for memory so you don’t miss out hello peak values.</span></span>

#### <a name="leak-detection-and-heap-diffing-for-nodejs"></a><span data-ttu-id="37df4-228">Обнаружение утечки и определение различий кучи для node.js</span><span class="sxs-lookup"><span data-stu-id="37df4-228">Leak detection and Heap Diffing for node.js</span></span>
<span data-ttu-id="37df4-229">Можно использовать [memwatch узел](https://github.com/lloyd/node-memwatch) утечек toohelp идентификации памяти.</span><span class="sxs-lookup"><span data-stu-id="37df4-229">You could use [node-memwatch](https://github.com/lloyd/node-memwatch) toohelp you identify memory leaks.</span></span>
<span data-ttu-id="37df4-230">Можно установить memwatch так же, как профилировщик v8 и редактирования, которую ваш код diff и toocapture куч tooidentify hello утечки памяти в приложении.</span><span class="sxs-lookup"><span data-stu-id="37df4-230">You can install memwatch just like v8-profiler and edit your code toocapture and diff heaps tooidentify hello memory leaks in your application.</span></span>

### <a name="my-nodeexes-are-getting-killed-randomly"></a><span data-ttu-id="37df4-231">Случайное завершение работы файла node.exe</span><span class="sxs-lookup"><span data-stu-id="37df4-231">My node.exe’s are getting killed randomly</span></span>
<span data-ttu-id="37df4-232">Это может произойти по нескольким причинам.</span><span class="sxs-lookup"><span data-stu-id="37df4-232">There are a few reasons why this could be happening:</span></span>

1. <span data-ttu-id="37df4-233">Приложение создает неперехваченных исключений — d: выполните проверку\\домашней\\LogFiles\\приложения\\errors.txt ведения журнала сведения в файле hello на hello возникло исключение.</span><span class="sxs-lookup"><span data-stu-id="37df4-233">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for hello details on hello exception thrown.</span></span> <span data-ttu-id="37df4-234">Этот файл имеет hello трассировки стека, поэтому вы можете исправить исходя из этого приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-234">This file has hello stack trace so you can fix your application based on this.</span></span>
2. <span data-ttu-id="37df4-235">Приложение потребляет слишком много памяти, что изначально влияет на другие процессы.</span><span class="sxs-lookup"><span data-stu-id="37df4-235">Your application is consuming too much memory which is affecting other processes from getting started.</span></span> <span data-ttu-id="37df4-236">Если закрыть too100% hello общий объем памяти виртуальной Машины, ваш node.exe удалось завершен по toolet manager hello процесс другие процессы получить toodo вероятность некоторую работу.</span><span class="sxs-lookup"><span data-stu-id="37df4-236">If hello total VM memory is close too100%, your node.exe’s could be killed by hello process manager toolet other processes get a chance toodo some work.</span></span> <span data-ttu-id="37df4-237">toofix это, убедитесь, что приложение не может вызывать утечку памяти или если после этого приложение действительно должен toouse большой объем памяти, можно масштабировать tooa большего размера виртуальной Машины с гораздо больше оперативной памяти.</span><span class="sxs-lookup"><span data-stu-id="37df4-237">toofix this, either make sure your application is not leaking memory OR if you application really needs toouse a lot of memory, please scale up tooa larger VM with a lot more RAM.</span></span>

### <a name="my-node-application-does-not-start"></a><span data-ttu-id="37df4-238">Ошибка запуска приложения Node</span><span class="sxs-lookup"><span data-stu-id="37df4-238">My node application does not start</span></span>
<span data-ttu-id="37df4-239">Если при запуске приложения возвращаются ошибки с кодом 500, причин может быть несколько.</span><span class="sxs-lookup"><span data-stu-id="37df4-239">If your application is returning 500 Errors at startup, there could be a few reasons:</span></span>

1. <span data-ttu-id="37df4-240">Node.exe отсутствует правильное расположение hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-240">Node.exe is not present at hello correct location.</span></span> <span data-ttu-id="37df4-241">Проверьте параметр nodeProcessCommandLine.</span><span class="sxs-lookup"><span data-stu-id="37df4-241">Check nodeProcessCommandLine setting.</span></span>
2. <span data-ttu-id="37df4-242">Основной скрипт файл отсутствует правильное расположение hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-242">Main script file is not present at hello correct location.</span></span> <span data-ttu-id="37df4-243">Web.config и убедитесь, что имя hello hello основной скрипт файла в основной скрипт hello обработчики раздела соответствует hello файл.</span><span class="sxs-lookup"><span data-stu-id="37df4-243">Check web.config and make sure hello name of hello main script file in hello handlers section matches hello main script file.</span></span>
3. <span data-ttu-id="37df4-244">Используется неправильная конфигурация Web.config: Проверьте имена и значения параметров hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-244">Web.config configuration is not correct – check hello settings names/values.</span></span>
4. <span data-ttu-id="37df4-245">Холодный запуск – приложения занимает слишком много времени toostartup.</span><span class="sxs-lookup"><span data-stu-id="37df4-245">Cold Start – Your application is taking too long toostartup.</span></span> <span data-ttu-id="37df4-246">Если для запуска приложения требуется больше времени, чем задано для общего времени ожидания в секундах ((maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay), разделенное на 1000), iisnode вернет ошибку с кодом 500.</span><span class="sxs-lookup"><span data-stu-id="37df4-246">If your application takes longer than (maxNamedPipeConnectionRetry \* namedPipeConnectionRetryDelay) / 1000 seconds, iisnode will return 500 error.</span></span> <span data-ttu-id="37df4-247">Увеличьте значения этих toomatch параметры приложения запустите iisnode tooprevent время из превышения времени ожидания и возвращая ошибку hello 500 hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-247">Increase hello values of these settings toomatch your application start time tooprevent iisnode from timing out and returning hello 500 error.</span></span>

### <a name="my-node-application-crashed"></a><span data-ttu-id="37df4-248">Сбой приложения Node</span><span class="sxs-lookup"><span data-stu-id="37df4-248">My node application crashed</span></span>
<span data-ttu-id="37df4-249">Приложение создает неперехваченных исключений — d: выполните проверку\\домашней\\LogFiles\\приложения\\errors.txt ведения журнала сведения в файле hello на hello возникло исключение.</span><span class="sxs-lookup"><span data-stu-id="37df4-249">Your application is throwing uncaught exceptions – Please check d:\\home\\LogFiles\\Application\\logging-errors.txt file for hello details on hello exception thrown.</span></span> <span data-ttu-id="37df4-250">Этот файл имеет hello трассировки стека, поэтому вы можете исправить исходя из этого приложения.</span><span class="sxs-lookup"><span data-stu-id="37df4-250">This file has hello stack trace so you can fix your application based on this.</span></span>

### <a name="my-node-application-takes-too-much-time-toostartup-cold-start"></a><span data-ttu-id="37df4-251">Узел приложения занимает слишком много времени, toostartup (холодный запуск)</span><span class="sxs-lookup"><span data-stu-id="37df4-251">My node application takes too much time toostartup (Cold Start)</span></span>
<span data-ttu-id="37df4-252">Наиболее распространенной причиной этого является, приложение hello имеет большое количество файлов в узле hello\_модули и tooload попытками приложения hello большинство этих файлов во время запуска.</span><span class="sxs-lookup"><span data-stu-id="37df4-252">Most common reason for this is that hello application has a lot of files in hello node\_modules and hello application tries tooload most of these files during startup.</span></span> <span data-ttu-id="37df4-253">По умолчанию так как файлы расположены в сетевой папке hello на веб-приложения Azure, загрузка такого большого количества файлов может занять некоторое время.</span><span class="sxs-lookup"><span data-stu-id="37df4-253">By default, since your files reside on hello network share on Azure Webapps, loading so many files can take some time.</span></span>
<span data-ttu-id="37df4-254">Некоторые решения toomake это быстрее являются:</span><span class="sxs-lookup"><span data-stu-id="37df4-254">Some solutions toomake this faster are:</span></span>

1. <span data-ttu-id="37df4-255">Убедитесь, что у вас есть структура плоский зависимостей и зависимости, не повторяющиеся с помощью npm3 tooinstall модулей.</span><span class="sxs-lookup"><span data-stu-id="37df4-255">Make sure you have a flat dependency structure and no duplicate dependencies by using npm3 tooinstall your modules.</span></span>
2. <span data-ttu-id="37df4-256">Повторите toolazy нагрузки на узле\_модулей и не загружать все модули hello во время запуска.</span><span class="sxs-lookup"><span data-stu-id="37df4-256">Try toolazy load your node\_modules and not load all of hello modules at startup.</span></span> <span data-ttu-id="37df4-257">Это означает, что вызов этого hello toorequire('module') должно осуществляться при действительно нужны внутри функции hello повторите toouse hello модуля.</span><span class="sxs-lookup"><span data-stu-id="37df4-257">This means that hello call toorequire(‘module’) should be done when you actually need it within hello function you try toouse hello module.</span></span>
3. <span data-ttu-id="37df4-258">В веб-приложениях Azure используется функция, которая называется "локальный кэш".</span><span class="sxs-lookup"><span data-stu-id="37df4-258">Azure Webapps offers a feature called local cache.</span></span> <span data-ttu-id="37df4-259">Эта функция копирует содержимое из hello сетевой общей папки toohello локальный диск на hello виртуальной Машины.</span><span class="sxs-lookup"><span data-stu-id="37df4-259">This feature copies your content from hello network share toohello local disk on hello VM.</span></span> <span data-ttu-id="37df4-260">Здравствуйте, так как файлы hello являются локальными, время узла загрузки\_модулей выполняется гораздо быстрее.</span><span class="sxs-lookup"><span data-stu-id="37df4-260">Since hello files are local, hello load time of node\_modules is much faster.</span></span> <span data-ttu-id="37df4-261">-Этот [документации](../app-service/app-service-local-cache.md) объясняет, как toouse локальный кэш в более подробно.</span><span class="sxs-lookup"><span data-stu-id="37df4-261">- This [documentation](../app-service/app-service-local-cache.md) explains how toouse Local Cache in more detail.</span></span>

## <a name="iisnode-http-status-and-substatus"></a><span data-ttu-id="37df4-262">Состояние и подсостояние HTTP обработчика iisnode</span><span class="sxs-lookup"><span data-stu-id="37df4-262">IISNODE http status and substatus</span></span>
<span data-ttu-id="37df4-263">Это [исходный файл](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) списки, могут возвращать все iisnode комбинации возможные состояния/подсостояния hello в случае ошибки.</span><span class="sxs-lookup"><span data-stu-id="37df4-263">This [source file](https://github.com/Azure/iisnode/blob/master/src/iisnode/cnodeconstants.h) lists all hello possible status/substatus combination iisnode can return in case of error.</span></span>

<span data-ttu-id="37df4-264">Включить FREB для кода ошибки win32 приложения toosee hello (Убедитесь, что включен FREB только на узлах нерабочей по соображениям производительности).</span><span class="sxs-lookup"><span data-stu-id="37df4-264">Enable FREB for your application toosee hello win32 error code (please make sure you enable FREB only on non-production sites for performance reasons).</span></span>

| <span data-ttu-id="37df4-265">Состояние HTTP</span><span class="sxs-lookup"><span data-stu-id="37df4-265">Http Status</span></span> | <span data-ttu-id="37df4-266">Подсостояние HTTP</span><span class="sxs-lookup"><span data-stu-id="37df4-266">Http SubStatus</span></span> | <span data-ttu-id="37df4-267">Возможная причина</span><span class="sxs-lookup"><span data-stu-id="37df4-267">Possible Reason?</span></span> |
| --- | --- | --- |
| <span data-ttu-id="37df4-268">500</span><span class="sxs-lookup"><span data-stu-id="37df4-268">500</span></span> |<span data-ttu-id="37df4-269">1000</span><span class="sxs-lookup"><span data-stu-id="37df4-269">1000</span></span> |<span data-ttu-id="37df4-270">Некоторые проблемы, диспетчеризации tooIISNODE hello запрос — проверьте, если node.exe была запущена.</span><span class="sxs-lookup"><span data-stu-id="37df4-270">There was some issue dispatching hello request tooIISNODE – check if node.exe was started up.</span></span> <span data-ttu-id="37df4-271">Возможно, при запуске этого файла произошел сбой.</span><span class="sxs-lookup"><span data-stu-id="37df4-271">Node.exe could have crashed on startup.</span></span> <span data-ttu-id="37df4-272">Проверьте конфигурацию web.config на наличие ошибок.</span><span class="sxs-lookup"><span data-stu-id="37df4-272">Check your web.config configuration for errors.</span></span> |
| <span data-ttu-id="37df4-273">500</span><span class="sxs-lookup"><span data-stu-id="37df4-273">500</span></span> |<span data-ttu-id="37df4-274">1001</span><span class="sxs-lookup"><span data-stu-id="37df4-274">1001</span></span> |<span data-ttu-id="37df4-275">-URL-адрес toohello Win32Error 0x2 — приложение не отвечает.</span><span class="sxs-lookup"><span data-stu-id="37df4-275">- Win32Error 0x2 - App is not responding toohello URL.</span></span> <span data-ttu-id="37df4-276">URL-адрес проверки перепишите правила или если приложение express имеет hello правильный маршрутов, указанных.</span><span class="sxs-lookup"><span data-stu-id="37df4-276">Check URL rewrite rules or if your express app has hello correct routes defined.</span></span> <span data-ttu-id="37df4-277">-Win32Error 0x6d — именованный канал занят: Node.exe не принимает запросы из-за занятости hello канала.</span><span class="sxs-lookup"><span data-stu-id="37df4-277">- Win32Error 0x6d – named pipe is busy – Node.exe is not accepting requests because hello pipe is busy.</span></span> <span data-ttu-id="37df4-278">Проверьте потребление ресурсов ЦП.</span><span class="sxs-lookup"><span data-stu-id="37df4-278">Check high cpu usage.</span></span> <span data-ttu-id="37df4-279">Другие ошибки. Проверьте файл node.exe на наличие повреждений.</span><span class="sxs-lookup"><span data-stu-id="37df4-279">- Other errors – check if node.exe crashed.</span></span> |
| <span data-ttu-id="37df4-280">500</span><span class="sxs-lookup"><span data-stu-id="37df4-280">500</span></span> |<span data-ttu-id="37df4-281">1002</span><span class="sxs-lookup"><span data-stu-id="37df4-281">1002</span></span> |<span data-ttu-id="37df4-282">Файл node.exe поврежден. Для трассировки стека проверьте файл d:\\home\\LogFiles\\logging-errors.txt.</span><span class="sxs-lookup"><span data-stu-id="37df4-282">Node.exe crashed – check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="37df4-283">500</span><span class="sxs-lookup"><span data-stu-id="37df4-283">500</span></span> |<span data-ttu-id="37df4-284">1003</span><span class="sxs-lookup"><span data-stu-id="37df4-284">1003</span></span> |<span data-ttu-id="37df4-285">Конфигурации канала проблема — вы никогда не увидите это, но неверное случае hello с именем конфигурации канала.</span><span class="sxs-lookup"><span data-stu-id="37df4-285">Pipe configuration Issue – You should never see this but if you do, hello named pipe configuration is incorrect.</span></span> |
| <span data-ttu-id="37df4-286">500</span><span class="sxs-lookup"><span data-stu-id="37df4-286">500</span></span> |<span data-ttu-id="37df4-287">1004–1018</span><span class="sxs-lookup"><span data-stu-id="37df4-287">1004-1018</span></span> |<span data-ttu-id="37df4-288">Возникла какая-либо ошибка при отправке hello запроса или обработки ответа hello из node.exe.</span><span class="sxs-lookup"><span data-stu-id="37df4-288">There was some error while sending hello request or processing hello response to/from node.exe.</span></span> <span data-ttu-id="37df4-289">Проверьте файл node.exe на наличие повреждений.</span><span class="sxs-lookup"><span data-stu-id="37df4-289">Check if node.exe crashed.</span></span> <span data-ttu-id="37df4-290">Для трассировки стека проверьте файл d:\\home\\LogFiles\\logging-errors.txt.</span><span class="sxs-lookup"><span data-stu-id="37df4-290">check d:\\home\\LogFiles\\logging-errors.txt for stack trace.</span></span> |
| <span data-ttu-id="37df4-291">503</span><span class="sxs-lookup"><span data-stu-id="37df4-291">503</span></span> |<span data-ttu-id="37df4-292">1000</span><span class="sxs-lookup"><span data-stu-id="37df4-292">1000</span></span> |<span data-ttu-id="37df4-293">Не хватает памяти tooallocate более именованных каналов.</span><span class="sxs-lookup"><span data-stu-id="37df4-293">Not enough memory tooallocate more named pipe connections.</span></span> <span data-ttu-id="37df4-294">Проверьте, почему приложение потребляет такое большое количество памяти.</span><span class="sxs-lookup"><span data-stu-id="37df4-294">Check why your app is consuming so much memory.</span></span> <span data-ttu-id="37df4-295">Проверьте значение параметра maxConcurrentRequestsPerProcess.</span><span class="sxs-lookup"><span data-stu-id="37df4-295">Check maxConcurrentRequestsPerProcess setting value.</span></span> <span data-ttu-id="37df4-296">Если он не бесконечно и вы с большим числом запросов, увеличить это значение tooprevent ошибки.</span><span class="sxs-lookup"><span data-stu-id="37df4-296">If its not infinite and you have a lot of requests, increase this value tooprevent this error.</span></span> |
| <span data-ttu-id="37df4-297">503</span><span class="sxs-lookup"><span data-stu-id="37df4-297">503</span></span> |<span data-ttu-id="37df4-298">1001</span><span class="sxs-lookup"><span data-stu-id="37df4-298">1001</span></span> |<span data-ttu-id="37df4-299">Запрос не может быть отправлено toonode.exe из-за перезапуска приложения hello.</span><span class="sxs-lookup"><span data-stu-id="37df4-299">Request could not be dispatched toonode.exe because hello application is recycling.</span></span> <span data-ttu-id="37df4-300">После после перезапуска приложения hello, запросы должны обслуживаться обычным образом.</span><span class="sxs-lookup"><span data-stu-id="37df4-300">After hello application has recycled, requests should be served normally.</span></span> |
| <span data-ttu-id="37df4-301">503</span><span class="sxs-lookup"><span data-stu-id="37df4-301">503</span></span> |<span data-ttu-id="37df4-302">1002</span><span class="sxs-lookup"><span data-stu-id="37df4-302">1002</span></span> |<span data-ttu-id="37df4-303">Проверьте код ошибки win32 для фактическая причина — запрос не может быть отправлено tooa node.exe.</span><span class="sxs-lookup"><span data-stu-id="37df4-303">Check win32 error code for actual reason – Request could not be dispatched tooa node.exe.</span></span> |
| <span data-ttu-id="37df4-304">503</span><span class="sxs-lookup"><span data-stu-id="37df4-304">503</span></span> |<span data-ttu-id="37df4-305">1003</span><span class="sxs-lookup"><span data-stu-id="37df4-305">1003</span></span> |<span data-ttu-id="37df4-306">Именованный канал слишком занят. Проверьте, не потребляет ли узел слишком много ресурсов ЦП.</span><span class="sxs-lookup"><span data-stu-id="37df4-306">Named pipe is too Busy – Check if node is consuming a lot of CPU</span></span> |

<span data-ttu-id="37df4-307">В файле node.exe содержится параметр, который называется NODE\_PENDING\_PIPE\_INSTANCES.</span><span class="sxs-lookup"><span data-stu-id="37df4-307">There is a setting within NODE.exe called NODE\_PENDING\_PIPE\_INSTANCES.</span></span> <span data-ttu-id="37df4-308">По умолчанию за пределами веб-приложения Azure для этого параметра задано значение 4.</span><span class="sxs-lookup"><span data-stu-id="37df4-308">By default outside of azure webapps this value is 4.</span></span> <span data-ttu-id="37df4-309">Это означает, что во время на hello именованного канала, node.exe может принимать только 4 запроса.</span><span class="sxs-lookup"><span data-stu-id="37df4-309">This means that node.exe can only accept 4 requests at a time on hello named pipe.</span></span> <span data-ttu-id="37df4-310">На веб-приложения Azure это значение too5000, и это значение должно быть достаточно для большинства приложений узла на веб-приложения azure.</span><span class="sxs-lookup"><span data-stu-id="37df4-310">On Azure Webapps, this value is set too5000 and this value should be good enough for most node applications running on azure webapps.</span></span> <span data-ttu-id="37df4-311">Не должны видеть 503.1003 на веб-приложения azure, так как у нее высокое значение hello узел\_Ожидание\_КАНАЛА\_ЭКЗЕМПЛЯРОВ.</span><span class="sxs-lookup"><span data-stu-id="37df4-311">You should not see 503.1003 on azure webapps because we have a high value for hello NODE\_PENDING\_PIPE\_INSTANCES.</span></span>  |

## <a name="more-resources"></a><span data-ttu-id="37df4-312">Дополнительные ресурсы</span><span class="sxs-lookup"><span data-stu-id="37df4-312">More resources</span></span>
<span data-ttu-id="37df4-313">Выполните эти дополнительные сведения о приложениях node.js toolearn ссылки на службу приложений Azure.</span><span class="sxs-lookup"><span data-stu-id="37df4-313">Follow these links toolearn more about node.js applications on Azure App Service.</span></span>

* [<span data-ttu-id="37df4-314">Приступая к работе с веб-приложениями Node.js в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="37df4-314">Get started with Node.js web apps in Azure App Service</span></span>](app-service-web-get-started-nodejs.md)
* [<span data-ttu-id="37df4-315">Как toodebug Node.js веб-приложения в службе приложений Azure</span><span class="sxs-lookup"><span data-stu-id="37df4-315">How toodebug a Node.js web app in Azure App Service</span></span>](web-sites-nodejs-debug.md)
* [<span data-ttu-id="37df4-316">Использование модулей Node.js с приложениями Azure</span><span class="sxs-lookup"><span data-stu-id="37df4-316">Using Node.js Modules with Azure applications</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="37df4-317">Azure App Service Web Apps: Node.js (Веб-приложения службы приложений Azure: Node.js)</span><span class="sxs-lookup"><span data-stu-id="37df4-317">Azure App Service Web Apps: Node.js</span></span>](https://blogs.msdn.microsoft.com/silverlining/2012/06/14/windows-azure-websites-node-js/)
* [<span data-ttu-id="37df4-318">Центр разработчиков Node.js.</span><span class="sxs-lookup"><span data-stu-id="37df4-318">Node.js Developer Center</span></span>](../nodejs-use-node-modules-azure-apps.md)
* [<span data-ttu-id="37df4-319">Изучение hello консоли отладки Kudu Super секрет</span><span class="sxs-lookup"><span data-stu-id="37df4-319">Exploring hello Super Secret Kudu Debug Console</span></span>](https://azure.microsoft.com/documentation/videos/super-secret-kudu-debug-console-for-azure-web-sites/)

