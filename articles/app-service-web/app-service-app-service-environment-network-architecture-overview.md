---
title: "aaaNetwork архитектура-Обзор из среды службы приложений"
description: "Общие сведения об архитектуре топологии сети сред службы приложений."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: 3cbc86883f5687a9ada35a3ab2f577a450a3fa0b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a><span data-ttu-id="7a770-103">Общие сведения об архитектуре сетевых сред службы приложений</span><span class="sxs-lookup"><span data-stu-id="7a770-103">Network Architecture Overview of App Service Environments</span></span>
## <a name="introduction"></a><span data-ttu-id="7a770-104">Введение</span><span class="sxs-lookup"><span data-stu-id="7a770-104">Introduction</span></span>
<span data-ttu-id="7a770-105">Среды службы приложения всегда создаются в подсети [виртуальной сети] [ virtualnetwork] -приложения, выполняющиеся в среде службы приложений могут взаимодействовать с закрытого конечных точек, расположенного внутри приветствия же виртуальный Топология сети.</span><span class="sxs-lookup"><span data-stu-id="7a770-105">App Service Environments are always created within a subnet of a [virtual network][virtualnetwork] - apps running in an App Service Environment can communicate with private endpoints located within hello same virtual network topology.</span></span>  <span data-ttu-id="7a770-106">Поскольку клиенты могут заблокировать части инфраструктуры своей виртуальной сети, будет toounderstand важные типы hello сетевыми потоками обмена данными, относящиеся к среде службы приложений.</span><span class="sxs-lookup"><span data-stu-id="7a770-106">Since customers may lock down parts of their virtual network infrastructure, it is important toounderstand hello types of network communication flows that occur with an App Service Environment.</span></span>

## <a name="general-network-flow"></a><span data-ttu-id="7a770-107">Общий поток сетевого трафика</span><span class="sxs-lookup"><span data-stu-id="7a770-107">General Network Flow</span></span>
<span data-ttu-id="7a770-108">Когда среда службы приложений (ASE) использует общедоступный виртуальный IP-адрес для приложений, на него поступает весь входящий трафик.</span><span class="sxs-lookup"><span data-stu-id="7a770-108">When an App Service Environment (ASE) uses a public virtual IP address (VIP) for apps, all inbound traffic arrives on that public VIP.</span></span>  <span data-ttu-id="7a770-109">Он включает в себя трафик HTTP и HTTPS приложений, а также прочий трафик FTP, удаленной отладки и операций управления Azure.</span><span class="sxs-lookup"><span data-stu-id="7a770-109">This includes HTTP and HTTPS traffic for apps, as well as other traffic for FTP, remote debugging functionality, and Azure management operations.</span></span>  <span data-ttu-id="7a770-110">Полный список hello определенные порты (обязательные и необязательные), доступные на общедоступный VIP hello статье hello на [управление входящий трафик] [ controllinginboundtraffic] tooan среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="7a770-110">For a full list of hello specific ports (both required and optional) that are available on hello public VIP see hello article on [controlling inbound traffic][controllinginboundtraffic] tooan App Service Environment.</span></span> 

<span data-ttu-id="7a770-111">Среды службы приложения также поддерживает выполнение приложений, которые связаны только tooa виртуальной сети внутренний адрес также называется tooas адрес ILB (Внутренняя Подсистема балансировки нагрузки).</span><span class="sxs-lookup"><span data-stu-id="7a770-111">App Service Environments also support running apps that are bound only tooa virtual network internal address, also referred tooas an ILB (internal load balancer) address.</span></span>  <span data-ttu-id="7a770-112">На ILB трафика включен ASE, HTTP и HTTPS для приложений, а также для удаленной отладки вызовов прибыть hello адрес ILB.</span><span class="sxs-lookup"><span data-stu-id="7a770-112">On an ILB enabled ASE, HTTP and HTTPS traffic for apps as well as remote debugging calls, arrive on hello ILB address.</span></span>  <span data-ttu-id="7a770-113">Для наиболее распространенных конфигураций ILB ASE трафик FTP и FTPS также будут поступать hello адрес ILB.</span><span class="sxs-lookup"><span data-stu-id="7a770-113">For most common ILB-ASE configurations, FTP/FTPS traffic will also arrive on hello ILB address.</span></span>  <span data-ttu-id="7a770-114">Однако операции управления Azure по-прежнему будет передаваться tooports 454 и 455 на hello открытый виртуальный IP-адрес ILB включена ASE.</span><span class="sxs-lookup"><span data-stu-id="7a770-114">However Azure management operations will still flow tooports 454/455 on hello public VIP of an ILB enabled ASE.</span></span>

<span data-ttu-id="7a770-115">Hello схеме ниже показан обзор hello различные входящие и исходящие сетевые потоки для среды службы приложений, в которых связанный tooa открытый виртуальный IP-адрес приложения hello.</span><span class="sxs-lookup"><span data-stu-id="7a770-115">hello diagram below shows an overview of hello various inbound and outbound network flows for an App Service Environment where hello apps are bound tooa public virtual IP address:</span></span>

![Общие потоки сетевого трафика][GeneralNetworkFlows]

<span data-ttu-id="7a770-117">Среда службы приложений может взаимодействовать с разными конечными точками частных клиентов.</span><span class="sxs-lookup"><span data-stu-id="7a770-117">An App Service Environment can communicate with a variety of private customer endpoints.</span></span>  <span data-ttu-id="7a770-118">Например приложения, выполняющиеся в среде службы приложений могут подключаться toodatabase серверах, работающих на виртуальных машинах IaaS в hello hello же топологии виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="7a770-118">For example, apps running in hello App Service Environment can connect toodatabase server(s) running on IaaS virtual machines in hello same virtual network topology.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="7a770-119">Взглянув на сетевом графике hello, hello «другие вычислительные ресурсы» развертываются в другой подсети, hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="7a770-119">Looking at hello network diagram, hello "Other Compute Resources" are deployed in a different Subnet from hello App Service Environment.</span></span> <span data-ttu-id="7a770-120">Развертывание ресурсов в hello одной подсети с hello ASE блокирует подключения из ASE toothose ресурсов (за исключением определенных внутри ASE маршрутизация).</span><span class="sxs-lookup"><span data-stu-id="7a770-120">Deploying resources in hello same Subnet with hello ASE will block connectivity from ASE toothose resources (except for specific intra-ASE routing).</span></span> <span data-ttu-id="7a770-121">Развертывание tooa другой подсети вместо (в hello одной виртуальной сети).</span><span class="sxs-lookup"><span data-stu-id="7a770-121">Deploy tooa different Subnet instead (in hello same VNET).</span></span> <span data-ttu-id="7a770-122">Hello среды службы приложений будет может tooconnect.</span><span class="sxs-lookup"><span data-stu-id="7a770-122">hello App Service Environment will then be able tooconnect.</span></span> <span data-ttu-id="7a770-123">Никаких дополнительных настроек не требуется.</span><span class="sxs-lookup"><span data-stu-id="7a770-123">No additional configuration is necessary.</span></span>
> 
> 

<span data-ttu-id="7a770-124">Среды служб приложений также взаимодействуют с базами данных SQL и ресурсами хранилищ Azure, необходимыми для работы сред и управления ими.</span><span class="sxs-lookup"><span data-stu-id="7a770-124">App Service Environments also communicate with Sql DB and Azure Storage resources necessary for managing and operating an App Service Environment.</span></span>  <span data-ttu-id="7a770-125">Некоторые hello Sql и ресурсы хранения, среды службы приложений взаимодействует с расположены в hello же регионе, что hello среды службы приложений, а другие находятся в удаленных регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="7a770-125">Some of hello Sql and Storage resources that an App Service Environment communicates with are located in hello same region as hello App Service Environment, while others are located in remote Azure regions.</span></span>  <span data-ttu-id="7a770-126">В результате toohello исходящие подключения к Интернету всегда является обязательным для toofunction среды службы приложений должным образом.</span><span class="sxs-lookup"><span data-stu-id="7a770-126">As a result, outbound connectivity toohello Internet is always required for an App Service Environment toofunction properly.</span></span> 

<span data-ttu-id="7a770-127">Поскольку среды службы приложений развернута в подсети, сетевые группы безопасности могут использоваться используется toocontrol подсети toohello входящего трафика.</span><span class="sxs-lookup"><span data-stu-id="7a770-127">Since an App Service Environment is deployed in a subnet, network security groups can be used toocontrol inbound traffic toohello subnet.</span></span>  <span data-ttu-id="7a770-128">Подробнее о как toocontrol входящего трафика tooan среды службы приложений, см. ниже hello [статьи][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="7a770-128">For details on how toocontrol inbound traffic tooan App Service Environment, see hello following [article][controllinginboundtraffic].</span></span>

<span data-ttu-id="7a770-129">Дополнительные сведения о том, как tooallow исходящие подключения к Интернету из среды службы приложений. в разделе hello следующей статьей, о работе с [Express Route][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="7a770-129">For details on how tooallow outbound Internet connectivity from an App Service Environment, see hello following article about working with [Express Route][ExpressRoute].</span></span>  <span data-ttu-id="7a770-130">Hello же подход, описанный в статье hello применяется при работе с подключением сайт-сайт и с помощью принудительного туннелирования.</span><span class="sxs-lookup"><span data-stu-id="7a770-130">hello same approach described in hello article applies when working with Site-to-Site connectivity and using forced tunneling.</span></span>

## <a name="outbound-network-addresses"></a><span data-ttu-id="7a770-131">Исходящие сетевые адреса</span><span class="sxs-lookup"><span data-stu-id="7a770-131">Outbound Network Addresses</span></span>
<span data-ttu-id="7a770-132">Когда среды службы приложений делает исходящих вызовов, IP-адреса всегда связан с hello исходящих вызовов.</span><span class="sxs-lookup"><span data-stu-id="7a770-132">When an App Service Environment makes outbound calls, an IP Address is always associated with hello outbound calls.</span></span>  <span data-ttu-id="7a770-133">Hello определенный IP-адрес, используемый зависит от конечной точки hello вызываемой расположены в топологии hello виртуальной сети или вне hello топологии виртуальной сети.</span><span class="sxs-lookup"><span data-stu-id="7a770-133">hello specific IP address that is used depends on whether hello endpoint being called is located within hello virtual network topology, or outside of hello virtual network topology.</span></span>

<span data-ttu-id="7a770-134">Если конечная точка hello вызываемой **за пределами** hello топологии виртуальной сети, а затем hello исходящий адрес (также называемого hello исходящих NAT), используемый — hello открытый виртуальный IP-адрес hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="7a770-134">If hello endpoint being called is **outside** of hello virtual network topology, then hello outbound address (aka hello outbound NAT address) that is used is hello public VIP of hello App Service Environment.</span></span>  <span data-ttu-id="7a770-135">Этот адрес можно найти в интерфейсе пользователя портала hello hello среды службы приложений в колонке свойства.</span><span class="sxs-lookup"><span data-stu-id="7a770-135">This address can be found in hello portal user interface for hello App Service Environment in Properties blade.</span></span>

![Исходящий IP-адрес][OutboundIPAddress]

<span data-ttu-id="7a770-137">Этот адрес также может быть установлено для ASEs, имеющие только открытых виртуальных IP-адресов, создание приложения в hello среды службы приложений и выполнив *nslookup* по адресу приложение hello.</span><span class="sxs-lookup"><span data-stu-id="7a770-137">This address can also be determined for ASEs that only have a public VIP by creating an app in hello App Service Environment, and then performing an *nslookup* on hello app's address.</span></span> <span data-ttu-id="7a770-138">Hello итоговые IP-адрес — как hello общедоступный VIP, так и исходящий адрес NAT среды для hello приложения службы.</span><span class="sxs-lookup"><span data-stu-id="7a770-138">hello resultant IP address is both hello public VIP, as well as hello App Service Environment's outbound NAT address.</span></span>

<span data-ttu-id="7a770-139">Если конечная точка hello вызываемой **внутри** hello топологии виртуальной сети, hello исходящих адресов вызывающего приложения hello будет hello внутренний IP-адрес hello отдельных вычислительных ресурсов выполнение приложения hello.</span><span class="sxs-lookup"><span data-stu-id="7a770-139">If hello endpoint being called is **inside** of hello virtual network topology, hello outbound address of hello calling app will be hello internal IP address of hello individual compute resource running hello app.</span></span>  <span data-ttu-id="7a770-140">Однако не сопоставляет виртуальной сети внутренний IP адресов tooapps.</span><span class="sxs-lookup"><span data-stu-id="7a770-140">However there is not a persistent mapping of virtual network internal IP addresses tooapps.</span></span>  <span data-ttu-id="7a770-141">Приложения можно перемещать между различных вычислительных ресурсов и пул hello доступных вычислительных ресурсов в среде службы приложений можно изменить из-за операций tooscaling.</span><span class="sxs-lookup"><span data-stu-id="7a770-141">Apps can move around across different compute resources, and hello pool of available compute resources in an App Service Environment can change due tooscaling operations.</span></span>

<span data-ttu-id="7a770-142">Тем не менее поскольку среды службы приложений всегда находится в одной подсети, можно гарантировать, что hello внутренний IP-адрес вычислительных ресурсов, запуск приложения будет всегда лежит в пределах CIDR hello hello подсети.</span><span class="sxs-lookup"><span data-stu-id="7a770-142">However, since an App Service Environment is always located within a subnet, you are guaranteed that hello internal IP address of a compute resource running an app will always lie within hello CIDR range of hello subnet.</span></span>  <span data-ttu-id="7a770-143">В результате при использовании детально настроенные списки управления доступом или группы безопасности сети toosecure доступа к конечным точкам tooother в виртуальной сети hello, hello диапазоне подсети, содержащий toobe потребностей hello среды службы приложений, предоставляется доступ.</span><span class="sxs-lookup"><span data-stu-id="7a770-143">As a result, when fine-grained ACLs or network security groups are used toosecure access tooother endpoints within hello virtual network, hello subnet range containing hello App Service Environment needs toobe granted access.</span></span>

<span data-ttu-id="7a770-144">Hello следующей диаграмме показаны эти понятия более подробно.</span><span class="sxs-lookup"><span data-stu-id="7a770-144">hello following diagram shows these concepts in more detail:</span></span>

![Исходящие сетевые адреса][OutboundNetworkAddresses]

<span data-ttu-id="7a770-146">В hello выше схемы:</span><span class="sxs-lookup"><span data-stu-id="7a770-146">In hello above diagram:</span></span>

* <span data-ttu-id="7a770-147">Поскольку 192.23.1.2 hello открытый виртуальный IP-адрес hello среды службы приложений, это hello исходящий IP-адрес используется при выполнении вызовов слишком конечные точки «Internet».</span><span class="sxs-lookup"><span data-stu-id="7a770-147">Since hello public VIP of hello App Service Environment is 192.23.1.2, that is hello outbound IP address used when making calls too"Internet" endpoints.</span></span>
* <span data-ttu-id="7a770-148">Hello диапазон CIDR hello, содержащего подсеть для hello среды службы приложений — 10.0.1.0/26.</span><span class="sxs-lookup"><span data-stu-id="7a770-148">hello CIDR range of hello containing subnet for hello App Service Environment is 10.0.1.0/26.</span></span>  <span data-ttu-id="7a770-149">Другим конечным точкам в hello одной инфраструктуре виртуальной сети будут видеть вызовы из приложений как исходящий от где-нибудь в этом диапазоне.</span><span class="sxs-lookup"><span data-stu-id="7a770-149">Other endpoints within hello same virtual network infrastructure will see calls from apps as originating from somewhere within this address range.</span></span>

## <a name="calls-between-app-service-environments"></a><span data-ttu-id="7a770-150">Вызовы между средами службы приложений</span><span class="sxs-lookup"><span data-stu-id="7a770-150">Calls Between App Service Environments</span></span>
<span data-ttu-id="7a770-151">Более сложных сценариях может возникнуть, если развертывание нескольких средах службы приложений в одной виртуальной сети hello и исходящего вызова из одной среды службы приложений tooanother среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="7a770-151">A more complex scenario can occur if you deploy multiple App Service Environments in hello same virtual network, and make outbound calls from one App Service Environment tooanother App Service Environment.</span></span>  <span data-ttu-id="7a770-152">Такие типы вызовов между разными средами службы приложений также рассматриваются как «интернет-вызовы».</span><span class="sxs-lookup"><span data-stu-id="7a770-152">These types of cross App Service Environment calls will also be treated as "Internet" calls.</span></span>

<span data-ttu-id="7a770-153">Привет, следующая схема иллюстрирует многоуровневой архитектуры с приложениями по одной среды службы приложений (например) «Дверью» веб-приложений) вызова приложений на второй среды службы приложений (например внутренние приложения API серверной части не предполагается toobe доступен из Интернета hello).</span><span class="sxs-lookup"><span data-stu-id="7a770-153">hello following diagram shows an example of a layered architecture with apps on one App Service Environment (e.g. "Front door" web apps) calling apps on a second App Service Environment (e.g. internal back-end API apps not intended toobe accessible from hello Internet).</span></span> 

![Вызовы между средами службы приложений][CallsBetweenAppServiceEnvironments] 

<span data-ttu-id="7a770-155">В hello примере выше hello среды службы приложений «ASE один» имеет 192.23.1.2 исходящий IP-адрес.</span><span class="sxs-lookup"><span data-stu-id="7a770-155">In hello example above hello App Service Environment "ASE One" has an outbound IP address of 192.23.1.2.</span></span>  <span data-ttu-id="7a770-156">Если приложение, запущенное на эта среда службы приложений делает приложение tooan исходящего вызова, запущенное на второй среды службы приложений («ASE два») в виртуальных сетевых, hello hello исходящий вызов будет рассматриваться как вызов «Интернет».</span><span class="sxs-lookup"><span data-stu-id="7a770-156">If an app running on this App Service Environment makes an outbound call tooan app running on a second App Service Environment ("ASE Two") located in hello same virtual network, hello outbound call will be treated as an "Internet" call.</span></span>  <span data-ttu-id="7a770-157">В результате hello сетевой трафик, поступающий на hello второй среды службы приложений будут показаны как исходящий от 192.23.1.2 (т. е. не hello диапазон адресов подсети из hello первый среды службы приложений).</span><span class="sxs-lookup"><span data-stu-id="7a770-157">As a result hello network traffic arriving on hello second App Service Environment will show as originating from 192.23.1.2 (i.e. not hello subnet address range of hello first App Service Environment).</span></span>

<span data-ttu-id="7a770-158">Несмотря на то, что различных средах службы приложения обрабатываются как вызовы «Internet», если обе эти среды службы приложения размещены в hello же регионе Azure hello сетевой трафик будет оставаться на hello региональной сети Azure и не будут физически потока через общедоступный Интернет hello.</span><span class="sxs-lookup"><span data-stu-id="7a770-158">Even though calls between different App Service Environments are treated as "Internet" calls, when both App Service Environments are located in hello same Azure region hello network traffic will remain on hello regional Azure network and will not physically flow over hello public Internet.</span></span>  <span data-ttu-id="7a770-159">В результате можно использовать группу безопасности сети в подсети hello hello tooonly Разрешить входящие вызовы из второй среды службы приложений hello первый среды службы приложений (которого исходящий IP-адрес — 192.23.1.2), обеспечивая безопасность связи между hello Среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="7a770-159">As a result you can use a network security group on hello subnet of hello second App Service Environment tooonly allow inbound calls from hello first App Service Environment (whose outbound IP address is 192.23.1.2), thus ensuring secure communication between hello App Service Environments.</span></span>

## <a name="additional-links-and-information"></a><span data-ttu-id="7a770-160">Дополнительные ссылки и сведения</span><span class="sxs-lookup"><span data-stu-id="7a770-160">Additional Links and Information</span></span>
<span data-ttu-id="7a770-161">Все статьи и как-для пользователя для среды службы приложений теперь доступны в hello [файл README для среды службы приложения](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="7a770-161">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="7a770-162">Сведения о входящих портов, используемых среды службы приложения и с помощью toocontrol группы безопасности сети, входящий трафик доступен [здесь][controllinginboundtraffic].</span><span class="sxs-lookup"><span data-stu-id="7a770-162">Details on inbound ports used by App Service Environments and using network security groups toocontrol inbound traffic is available [here][controllinginboundtraffic].</span></span>

<span data-ttu-id="7a770-163">Подробные сведения о работе определяемых пользователем маршрутов toogrant исходящих Internet access tooApp среды службы доступен в этом [статьи][ExpressRoute].</span><span class="sxs-lookup"><span data-stu-id="7a770-163">Details on using user defined routes toogrant outbound Internet access tooApp Service Environments is available in this [article][ExpressRoute].</span></span> 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png

