---
title: "aaaNetwork архитектура-Обзор из среды службы приложений"
description: "Общие сведения об архитектуре топологии сети сред службы приложений."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: 13d03a37-1fe2-4e3e-9d57-46dfb330ba52
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/04/2016
ms.author: stefsch
ms.openlocfilehash: 3cbc86883f5687a9ada35a3ab2f577a450a3fa0b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="network-architecture-overview-of-app-service-environments"></a>Общие сведения об архитектуре сетевых сред службы приложений
## <a name="introduction"></a>Введение
Среды службы приложения всегда создаются в подсети [виртуальной сети] [ virtualnetwork] -приложения, выполняющиеся в среде службы приложений могут взаимодействовать с закрытого конечных точек, расположенного внутри приветствия же виртуальный Топология сети.  Поскольку клиенты могут заблокировать части инфраструктуры своей виртуальной сети, будет toounderstand важные типы hello сетевыми потоками обмена данными, относящиеся к среде службы приложений.

## <a name="general-network-flow"></a>Общий поток сетевого трафика
Когда среда службы приложений (ASE) использует общедоступный виртуальный IP-адрес для приложений, на него поступает весь входящий трафик.  Он включает в себя трафик HTTP и HTTPS приложений, а также прочий трафик FTP, удаленной отладки и операций управления Azure.  Полный список hello определенные порты (обязательные и необязательные), доступные на общедоступный VIP hello статье hello на [управление входящий трафик] [ controllinginboundtraffic] tooan среды службы приложений. 

Среды службы приложения также поддерживает выполнение приложений, которые связаны только tooa виртуальной сети внутренний адрес также называется tooas адрес ILB (Внутренняя Подсистема балансировки нагрузки).  На ILB трафика включен ASE, HTTP и HTTPS для приложений, а также для удаленной отладки вызовов прибыть hello адрес ILB.  Для наиболее распространенных конфигураций ILB ASE трафик FTP и FTPS также будут поступать hello адрес ILB.  Однако операции управления Azure по-прежнему будет передаваться tooports 454 и 455 на hello открытый виртуальный IP-адрес ILB включена ASE.

Hello схеме ниже показан обзор hello различные входящие и исходящие сетевые потоки для среды службы приложений, в которых связанный tooa открытый виртуальный IP-адрес приложения hello.

![Общие потоки сетевого трафика][GeneralNetworkFlows]

Среда службы приложений может взаимодействовать с разными конечными точками частных клиентов.  Например приложения, выполняющиеся в среде службы приложений могут подключаться toodatabase серверах, работающих на виртуальных машинах IaaS в hello hello же топологии виртуальной сети.

> [!IMPORTANT]
> Взглянув на сетевом графике hello, hello «другие вычислительные ресурсы» развертываются в другой подсети, hello среды службы приложений. Развертывание ресурсов в hello одной подсети с hello ASE блокирует подключения из ASE toothose ресурсов (за исключением определенных внутри ASE маршрутизация). Развертывание tooa другой подсети вместо (в hello одной виртуальной сети). Hello среды службы приложений будет может tooconnect. Никаких дополнительных настроек не требуется.
> 
> 

Среды служб приложений также взаимодействуют с базами данных SQL и ресурсами хранилищ Azure, необходимыми для работы сред и управления ими.  Некоторые hello Sql и ресурсы хранения, среды службы приложений взаимодействует с расположены в hello же регионе, что hello среды службы приложений, а другие находятся в удаленных регионах Azure.  В результате toohello исходящие подключения к Интернету всегда является обязательным для toofunction среды службы приложений должным образом. 

Поскольку среды службы приложений развернута в подсети, сетевые группы безопасности могут использоваться используется toocontrol подсети toohello входящего трафика.  Подробнее о как toocontrol входящего трафика tooan среды службы приложений, см. ниже hello [статьи][controllinginboundtraffic].

Дополнительные сведения о том, как tooallow исходящие подключения к Интернету из среды службы приложений. в разделе hello следующей статьей, о работе с [Express Route][ExpressRoute].  Hello же подход, описанный в статье hello применяется при работе с подключением сайт-сайт и с помощью принудительного туннелирования.

## <a name="outbound-network-addresses"></a>Исходящие сетевые адреса
Когда среды службы приложений делает исходящих вызовов, IP-адреса всегда связан с hello исходящих вызовов.  Hello определенный IP-адрес, используемый зависит от конечной точки hello вызываемой расположены в топологии hello виртуальной сети или вне hello топологии виртуальной сети.

Если конечная точка hello вызываемой **за пределами** hello топологии виртуальной сети, а затем hello исходящий адрес (также называемого hello исходящих NAT), используемый — hello открытый виртуальный IP-адрес hello среды службы приложений.  Этот адрес можно найти в интерфейсе пользователя портала hello hello среды службы приложений в колонке свойства.

![Исходящий IP-адрес][OutboundIPAddress]

Этот адрес также может быть установлено для ASEs, имеющие только открытых виртуальных IP-адресов, создание приложения в hello среды службы приложений и выполнив *nslookup* по адресу приложение hello. Hello итоговые IP-адрес — как hello общедоступный VIP, так и исходящий адрес NAT среды для hello приложения службы.

Если конечная точка hello вызываемой **внутри** hello топологии виртуальной сети, hello исходящих адресов вызывающего приложения hello будет hello внутренний IP-адрес hello отдельных вычислительных ресурсов выполнение приложения hello.  Однако не сопоставляет виртуальной сети внутренний IP адресов tooapps.  Приложения можно перемещать между различных вычислительных ресурсов и пул hello доступных вычислительных ресурсов в среде службы приложений можно изменить из-за операций tooscaling.

Тем не менее поскольку среды службы приложений всегда находится в одной подсети, можно гарантировать, что hello внутренний IP-адрес вычислительных ресурсов, запуск приложения будет всегда лежит в пределах CIDR hello hello подсети.  В результате при использовании детально настроенные списки управления доступом или группы безопасности сети toosecure доступа к конечным точкам tooother в виртуальной сети hello, hello диапазоне подсети, содержащий toobe потребностей hello среды службы приложений, предоставляется доступ.

Hello следующей диаграмме показаны эти понятия более подробно.

![Исходящие сетевые адреса][OutboundNetworkAddresses]

В hello выше схемы:

* Поскольку 192.23.1.2 hello открытый виртуальный IP-адрес hello среды службы приложений, это hello исходящий IP-адрес используется при выполнении вызовов слишком конечные точки «Internet».
* Hello диапазон CIDR hello, содержащего подсеть для hello среды службы приложений — 10.0.1.0/26.  Другим конечным точкам в hello одной инфраструктуре виртуальной сети будут видеть вызовы из приложений как исходящий от где-нибудь в этом диапазоне.

## <a name="calls-between-app-service-environments"></a>Вызовы между средами службы приложений
Более сложных сценариях может возникнуть, если развертывание нескольких средах службы приложений в одной виртуальной сети hello и исходящего вызова из одной среды службы приложений tooanother среды службы приложений.  Такие типы вызовов между разными средами службы приложений также рассматриваются как «интернет-вызовы».

Привет, следующая схема иллюстрирует многоуровневой архитектуры с приложениями по одной среды службы приложений (например) «Дверью» веб-приложений) вызова приложений на второй среды службы приложений (например внутренние приложения API серверной части не предполагается toobe доступен из Интернета hello). 

![Вызовы между средами службы приложений][CallsBetweenAppServiceEnvironments] 

В hello примере выше hello среды службы приложений «ASE один» имеет 192.23.1.2 исходящий IP-адрес.  Если приложение, запущенное на эта среда службы приложений делает приложение tooan исходящего вызова, запущенное на второй среды службы приложений («ASE два») в виртуальных сетевых, hello hello исходящий вызов будет рассматриваться как вызов «Интернет».  В результате hello сетевой трафик, поступающий на hello второй среды службы приложений будут показаны как исходящий от 192.23.1.2 (т. е. не hello диапазон адресов подсети из hello первый среды службы приложений).

Несмотря на то, что различных средах службы приложения обрабатываются как вызовы «Internet», если обе эти среды службы приложения размещены в hello же регионе Azure hello сетевой трафик будет оставаться на hello региональной сети Azure и не будут физически потока через общедоступный Интернет hello.  В результате можно использовать группу безопасности сети в подсети hello hello tooonly Разрешить входящие вызовы из второй среды службы приложений hello первый среды службы приложений (которого исходящий IP-адрес — 192.23.1.2), обеспечивая безопасность связи между hello Среды службы приложений.

## <a name="additional-links-and-information"></a>Дополнительные ссылки и сведения
Все статьи и как-для пользователя для среды службы приложений теперь доступны в hello [файл README для среды службы приложения](../app-service/app-service-app-service-environments-readme.md).

Сведения о входящих портов, используемых среды службы приложения и с помощью toocontrol группы безопасности сети, входящий трафик доступен [здесь][controllinginboundtraffic].

Подробные сведения о работе определяемых пользователем маршрутов toogrant исходящих Internet access tooApp среды службы доступен в этом [статьи][ExpressRoute]. 

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[controllinginboundtraffic]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[ExpressRoute]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-network-configuration-expressroute/

<!-- IMAGES -->
[GeneralNetworkFlows]: ./media/app-service-app-service-environment-network-architecture-overview/NetworkOverview-1.png
[OutboundIPAddress]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundIPAddress-1.png
[OutboundNetworkAddresses]: ./media/app-service-app-service-environment-network-architecture-overview/OutboundNetworkAddresses-1.png
[CallsBetweenAppServiceEnvironments]: ./media/app-service-app-service-environment-network-architecture-overview/CallsBetweenEnvironments-1.png

