---
title: "aaaNetwork сведения о конфигурации для работы с маршрутом, экспресс-выпуск"
description: "Сведения о конфигурации сети для запуска среды службы приложения в виртуальные сети подключены tooan канал ExpressRoute."
services: app-service
documentationcenter: 
author: stefsch
manager: nirma
editor: 
ms.assetid: 34b49178-2595-4d32-9b41-110c96dde6bf
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 10/14/2016
ms.author: stefsch
ms.openlocfilehash: 85bbc45cfed619485957ee2a898aa0a7604173cb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/06/2017
---
# <a name="network-configuration-details-for-app-service-environments-with-expressroute"></a><span data-ttu-id="0d377-103">Сведения о конфигурации сети для сред службы приложений с ExpressRoute</span><span class="sxs-lookup"><span data-stu-id="0d377-103">Network Configuration Details for App Service Environments with ExpressRoute</span></span>
## <a name="overview"></a><span data-ttu-id="0d377-104">Обзор</span><span class="sxs-lookup"><span data-stu-id="0d377-104">Overview</span></span>
<span data-ttu-id="0d377-105">Клиенты могут подключаться [Azure ExpressRoute] [ ExpressRoute] цепь tootheir виртуальная сетевая инфраструктура, расширяя их tooAzure в локальной сети.</span><span class="sxs-lookup"><span data-stu-id="0d377-105">Customers can connect an [Azure ExpressRoute][ExpressRoute] circuit tootheir virtual network infrastructure, thus extending their on-premises network tooAzure.</span></span>  <span data-ttu-id="0d377-106">Среду службы приложений можно создать в подсети этой инфраструктуры [виртуальной сети][virtualnetwork].</span><span class="sxs-lookup"><span data-stu-id="0d377-106">An App Service Environment can  be created in a subnet of this [virtual network][virtualnetwork] infrastructure.</span></span>  <span data-ttu-id="0d377-107">Приложения, работающие на hello среды службы приложений после этого можно установить доступные ресурсы tooback окончания безопасных соединений только через подключение ExpressRoute hello.</span><span class="sxs-lookup"><span data-stu-id="0d377-107">Apps running on hello App Service Environment can then establish secure connections tooback-end resources accessible only over hello ExpressRoute connection.</span></span>  

<span data-ttu-id="0d377-108">Среду службы приложений можно создать **либо** в виртуальной сети Azure Resource Manager, **либо** в виртуальной сети, использующей классическую модель развертывания.</span><span class="sxs-lookup"><span data-stu-id="0d377-108">An App Service Environment can be created in **either** an Azure Resource Manager virtual network, **or** a classic deployment model virtual network.</span></span>  <span data-ttu-id="0d377-109">В связи с последним изменением от июня 2016 г. среды ASE теперь можно также развертывать в виртуальных сетях, использующих либо диапазоны общедоступных адресов, либо адресные пространства RFC1918 (т. е. частные адреса).</span><span class="sxs-lookup"><span data-stu-id="0d377-109">With a recent change made in June 2016, ASEs can also now be deployed into virtual networks that use either public address ranges, or RFC1918 address spaces (i.e. private addresses).</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="required-network-connectivity"></a><span data-ttu-id="0d377-110">Необходимое сетевое подключение</span><span class="sxs-lookup"><span data-stu-id="0d377-110">Required Network Connectivity</span></span>
<span data-ttu-id="0d377-111">Существуют требования сетевого подключения для среды службы приложения, может не соответствовать изначально в виртуальную сеть, подключенную tooan ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="0d377-111">There are network connectivity requirements for App Service Environments that may not be initially met in a virtual network connected tooan ExpressRoute.</span></span>  <span data-ttu-id="0d377-112">Среды службы приложений требуются все следующие hello в порядке toofunction должным образом:</span><span class="sxs-lookup"><span data-stu-id="0d377-112">App Service Environments require all of hello following in order toofunction properly:</span></span>

* <span data-ttu-id="0d377-113">Исходящее сетевое подключение tooAzure конечные точки хранилища по всему миру на оба порта 80 и 443.</span><span class="sxs-lookup"><span data-stu-id="0d377-113">Outbound network connectivity tooAzure Storage endpoints worldwide on both ports 80 and 443.</span></span>  <span data-ttu-id="0d377-114">Сюда входят конечных точках, найденных в hello же регионе, что hello среды службы приложений, а также конечные точки хранилища, расположенный в **других** регионах Azure.</span><span class="sxs-lookup"><span data-stu-id="0d377-114">This includes endpoints located in hello same region as hello App Service Environment, as well as storage endpoints located in **other** Azure regions.</span></span>  <span data-ttu-id="0d377-115">Разрешить конечные точки хранилища Azure в следующих доменов DNS hello: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* и *file.core.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="0d377-115">Azure Storage endpoints resolve under hello following DNS domains: *table.core.windows.net*, *blob.core.windows.net*, *queue.core.windows.net* and *file.core.windows.net*.</span></span>  
* <span data-ttu-id="0d377-116">Исходящее сетевое подключение toohello службы файлов Azure через порт 445.</span><span class="sxs-lookup"><span data-stu-id="0d377-116">Outbound network connectivity toohello Azure Files service on port 445.</span></span>
* <span data-ttu-id="0d377-117">Исходящих сетевых конечных точек tooSql DB подключения находятся в hello же региона, как hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-117">Outbound network connectivity tooSql DB endpoints located in hello same region as hello App Service Environment.</span></span>  <span data-ttu-id="0d377-118">Разрешить конечные точки баз данных SQL Server в следующий домен hello: *database.windows.net*.</span><span class="sxs-lookup"><span data-stu-id="0d377-118">Sql DB endpoints resolve under hello following domain:  *database.windows.net*.</span></span>  <span data-ttu-id="0d377-119">Для этого необходимо открыть доступ tooports 1433 11000 11999 и 14000 14999.</span><span class="sxs-lookup"><span data-stu-id="0d377-119">This requires opening access tooports 1433, 11000-11999 and 14000-14999.</span></span>  <span data-ttu-id="0d377-120">Дополнительные сведения см. в статье, посвященной [использованию порта базы данных SQL версии 12](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span><span class="sxs-lookup"><span data-stu-id="0d377-120">For more details see [this article on Sql Database V12 port usage](../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="0d377-121">Исходящее сетевое подключение toohello плоскость конечные точки управления Azure (конечные точки ассемблерного кода и ARM).</span><span class="sxs-lookup"><span data-stu-id="0d377-121">Outbound network connectivity toohello Azure management plane endpoints (both ASM and ARM endpoints).</span></span>  <span data-ttu-id="0d377-122">Это включает исходящие подключения tooboth *management.core.windows.net* и *management.azure.com*.</span><span class="sxs-lookup"><span data-stu-id="0d377-122">This includes outbound connectivity tooboth *management.core.windows.net* and *management.azure.com*.</span></span> 
* <span data-ttu-id="0d377-123">Исходящие сетевое подключение слишком*ocsp.msocsp.com*, *mscrl.microsoft.com* и *crl.microsoft.com*.  Это необходимые toosupport функциональность SSL.</span><span class="sxs-lookup"><span data-stu-id="0d377-123">Outbound network connectivity too*ocsp.msocsp.com*, *mscrl.microsoft.com* and *crl.microsoft.com*.  This is needed toosupport SSL functionality.</span></span>
* <span data-ttu-id="0d377-124">Hello конфигурацию DNS для виртуальной сети hello должны быть способны все конечные точки hello и домены упомянутые в более ранних точек hello.</span><span class="sxs-lookup"><span data-stu-id="0d377-124">hello DNS configuration for hello virtual network must be capable of resolving all of hello endpoints and domains mentioned in hello earlier points.</span></span>  <span data-ttu-id="0d377-125">Если эти конечные точки разрешить нельзя, попытка создания среды службы приложений завершится ошибкой, а существующие среды службы приложений будут помечены как неработоспособные.</span><span class="sxs-lookup"><span data-stu-id="0d377-125">If these endpoints cannot be resolved, App Service Environment creation attempts will fail, and existing App Service Environments will be marked as unhealthy.</span></span>
* <span data-ttu-id="0d377-126">Исходящий доступ через порт 53 необходим для обмена данными с DNS-серверами.</span><span class="sxs-lookup"><span data-stu-id="0d377-126">Outbound access on port 53 is required for communication with DNS servers.</span></span>
* <span data-ttu-id="0d377-127">Если существует пользовательского DNS-сервера на Здравствуйте другом конце VPN-шлюза, hello DNS-сервер должен быть доступен из подсети hello, содержащий hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-127">If a custom DNS server exists on hello other end of a VPN gateway, hello DNS server must be reachable from hello subnet containing hello App Service Environment.</span></span> 
* <span data-ttu-id="0d377-128">Hello исходящий сетевой путь не может перемещаться по внутренних корпоративных прокси-серверов, а также может быть принудительного туннелирования tooon организациями.</span><span class="sxs-lookup"><span data-stu-id="0d377-128">hello outbound network path cannot travel through internal corporate proxies, nor can it be force tunneled tooon-premises.</span></span>  <span data-ttu-id="0d377-129">Таким образом, изменения hello эффективный адрес NAT для исходящего сетевого трафика из hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-129">Doing so changes hello effective NAT address of outbound network traffic from hello App Service Environment.</span></span>  <span data-ttu-id="0d377-130">Изменение hello адрес NAT для исходящего сетевого трафика среды службы приложений приведет к потере подключения к toomany сбоев hello конечных точек, перечисленные выше.</span><span class="sxs-lookup"><span data-stu-id="0d377-130">Changing hello NAT address of an App Service Environment's outbound network traffic will cause connectivity failures toomany of hello endpoints listed above.</span></span>  <span data-ttu-id="0d377-131">Это приведет к неудачным попыткам создания среды службы приложений, а также присвоению ранее работоспособной среде службы приложений статуса неработоспособной.</span><span class="sxs-lookup"><span data-stu-id="0d377-131">This results in failed App Service Environment creation attempts, as well as previously healthy App Service Environments being marked as unhealthy.</span></span>  
* <span data-ttu-id="0d377-132">Входящие порты toorequired сетевого доступа для среды службы приложений должны быть разрешены, как описано в этом [статьи][requiredports].</span><span class="sxs-lookup"><span data-stu-id="0d377-132">Inbound network access toorequired ports for App Service Environments must be allowed as described in this [article][requiredports].</span></span>

<span data-ttu-id="0d377-133">за счет того, настроен и поддерживается для виртуальной сети hello допустимым инфраструктуры DNS может удовлетворить требованиям DNS Hello.</span><span class="sxs-lookup"><span data-stu-id="0d377-133">hello DNS requirements can be met by ensuring a valid DNS infrastructure is configured and maintained for hello virtual network.</span></span>  <span data-ttu-id="0d377-134">Если для любого hello причина будет изменена конфигурация DNS после создания среды службы приложений, разработчики можно принудительно toopick среды службы приложения hello новой конфигурации DNS.</span><span class="sxs-lookup"><span data-stu-id="0d377-134">If for any reason hello DNS configuration is changed after an App Service Environment has been created, developers can force an App Service Environment toopick up hello new DNS configuration.</span></span>  <span data-ttu-id="0d377-135">Последовательное среды перезагрузку, используя значок «Перезапуск» hello hello верхней части колонки управления hello среды службы приложений в hello [портал Azure] [ NewPortal] вызовет toopick среды hello копирование hello новую конфигурацию DNS.</span><span class="sxs-lookup"><span data-stu-id="0d377-135">Triggering a rolling environment reboot using hello "Restart" icon located at hello top of hello App Service Environment management blade in hello [Azure portal][NewPortal] will cause hello environment toopick up hello new DNS configuration.</span></span>

<span data-ttu-id="0d377-136">Hello входящего сетевого доступа требования могут быть выполнены путем настройки [сетевой группы безопасности] [ NetworkSecurityGroups] tooallow hello необходимые подсети hello среды службы приложений доступ, как описано в этом [статье][requiredports].</span><span class="sxs-lookup"><span data-stu-id="0d377-136">hello inbound network access requirements can be met by configuring a [network security group][NetworkSecurityGroups] on hello App Service Environment's subnet tooallow hello required access as described in this [article][requiredports].</span></span>

## <a name="enabling-outbound-network-connectivity-for-an-app-service-environment"></a><span data-ttu-id="0d377-137">Активация исходящего сетевого подключения для среды службы приложений</span><span class="sxs-lookup"><span data-stu-id="0d377-137">Enabling Outbound Network Connectivity for an App Service Environment</span></span>
<span data-ttu-id="0d377-138">По умолчанию только что созданный канал ExpressRoute объявляет основной маршрут, который позволяет создавать исходящее подключение к Интернету.</span><span class="sxs-lookup"><span data-stu-id="0d377-138">By default, a newly created ExpressRoute circuit advertises a default route that allows outbound Internet connectivity.</span></span>  <span data-ttu-id="0d377-139">В этой конфигурации в среде службы приложений будет tooother может tooconnect конечные точки Azure.</span><span class="sxs-lookup"><span data-stu-id="0d377-139">With this configuration an App Service Environment will be able tooconnect tooother Azure endpoints.</span></span>

<span data-ttu-id="0d377-140">Однако общая конфигурация клиента является toodefine собственные маршрут по умолчанию (0.0.0.0/0), благодаря чему исходящего потока tooinstead трафик Интернета локальной.</span><span class="sxs-lookup"><span data-stu-id="0d377-140">However a common customer configuration is toodefine their own default route (0.0.0.0/0) which forces outbound Internet traffic tooinstead flow on-premises.</span></span>  <span data-ttu-id="0d377-141">Этот поток трафика неизменно прерывается среды службы приложения из-за исходящий трафик hello заблокированных локально, или NAT, где tooan неопознанное набор адресов, которые больше не работают с различные конечные точки Azure.</span><span class="sxs-lookup"><span data-stu-id="0d377-141">This traffic flow invariably breaks App Service Environments because hello outbound traffic is either blocked on-premises, or NAT'd tooan unrecognizable set of addresses that no longer work with various Azure endpoints.</span></span>

<span data-ttu-id="0d377-142">Hello решением является toodefine один (или более) определяемых пользователем маршрутов (UDRs) на hello подсети, содержащей hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-142">hello solution is toodefine one (or more) user defined routes (UDRs) on hello subnet that contains hello App Service Environment.</span></span>  <span data-ttu-id="0d377-143">UDR определяет маршруты конкретной подсети, которые будут соблюдаться вместо маршрут по умолчанию hello.</span><span class="sxs-lookup"><span data-stu-id="0d377-143">A UDR defines subnet-specific routes that will be honored instead of hello default route.</span></span>

<span data-ttu-id="0d377-144">Если это возможно рекомендуется следующая конфигурация hello toouse:</span><span class="sxs-lookup"><span data-stu-id="0d377-144">If possible, it is recommended toouse hello following configuration:</span></span>

* <span data-ttu-id="0d377-145">Конфигурация ExpressRoute Hello объявляет 0.0.0.0/0 и по умолчанию force туннелей всех исходящего трафика в локальной.</span><span class="sxs-lookup"><span data-stu-id="0d377-145">hello ExpressRoute configuration advertises 0.0.0.0/0 and by default force tunnels all outbound traffic on-premises.</span></span>
* <span data-ttu-id="0d377-146">Hello UDR применения toohello подсеть, содержащая hello среды службы приложений определяет 0.0.0.0/0 с тип следующего прыжка (примером этого является дальше вниз в этой статье) через Интернет.</span><span class="sxs-lookup"><span data-stu-id="0d377-146">hello UDR applied toohello subnet containing hello App Service Environment defines 0.0.0.0/0 with a next hop type of Internet (an example of this is farther down in this article).</span></span>

<span data-ttu-id="0d377-147">Hello воздействии этих шагов — что уровне подсети hello UDR будет иметь приоритет над hello ExpressRoute принудительного туннелирования, обеспечивая исходящие подключения к Интернету из hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-147">hello combined effect of these steps is that hello subnet level UDR will take precedence over hello ExpressRoute forced tunneling, thus ensuring outbound Internet access from hello App Service Environment.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="0d377-148">Здравствуйте маршрутов, указанных в UDR **должен** быть достаточно точным, слишком имеют приоритет над любой маршруты объявляет hello конфигурации ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="0d377-148">hello routes defined in a UDR **must** be specific enough too take precedence over any routes advertised by hello ExpressRoute configuration.</span></span>  <span data-ttu-id="0d377-149">пример Hello использует диапазон адресов широкий 0.0.0.0/0 hello и таким образом могут быть случайно переписаны объявлений маршрутов с помощью более конкретных диапазонов адресов.</span><span class="sxs-lookup"><span data-stu-id="0d377-149">hello example below uses hello broad 0.0.0.0/0 address range, and as such can potentially be accidentally overridden by route advertisements using more specific address ranges.</span></span>
> 
> <span data-ttu-id="0d377-150">Среды службы приложения не поддерживаются с конфигурациями ExpressRoute, **кросс объявлять маршруты из hello открытого пиринга путь toohello частным путем пиринга**.</span><span class="sxs-lookup"><span data-stu-id="0d377-150">App Service Environments are not supported with ExpressRoute configurations that **cross-advertise routes from hello public peering path toohello private peering path**.</span></span>  <span data-ttu-id="0d377-151">Конфигурации ExpressRoute, для которых настроен общедоступный пиринг, будут получать объявления маршрутов от корпорации Майкрософт для большого набора диапазонов IP-адресов Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="0d377-151">ExpressRoute configurations that have public peering configured, will receive route advertisements from Microsoft for a large set of Microsoft Azure IP address ranges.</span></span>  <span data-ttu-id="0d377-152">Если эти диапазоны адресов между объявленных частным путем пиринга hello, hello конечным результатом является, всех исходящих сетевых пакетов из подсети среды для hello приложения службы будет принудительного туннелирования tooa клиента в локальной сетевой инфраструктуры.</span><span class="sxs-lookup"><span data-stu-id="0d377-152">If these address ranges are cross-advertised on hello private peering path, hello end result is that all outbound network packets from hello App Service Environment's subnet will be force-tunneled tooa customer's on-premises network infrastructure.</span></span>  <span data-ttu-id="0d377-153">В настоящее время этот сетевой поток не поддерживается в среде службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-153">This network flow is currently not supported with App Service Environments.</span></span>  <span data-ttu-id="0d377-154">Одна проблема toothis решение — toostop маршруты между рекламу от hello открытого пиринга путь toohello частным путем пиринга.</span><span class="sxs-lookup"><span data-stu-id="0d377-154">One solution toothis problem is toostop cross-advertising routes from hello public peering path toohello private peering path.</span></span>
> 
> 

<span data-ttu-id="0d377-155">Справочные сведения об определяемых пользователем маршрутах см. в этом [обзоре][UDROverview].</span><span class="sxs-lookup"><span data-stu-id="0d377-155">Background information on user defined routes is available in this [overview][UDROverview].</span></span>  

<span data-ttu-id="0d377-156">Сведения о создании и настройке определяемых пользователем маршрутов доступна в этом [как tooGuide][UDRHowTo].</span><span class="sxs-lookup"><span data-stu-id="0d377-156">Details on creating and configuring user defined routes is available in this [How tooGuide][UDRHowTo].</span></span>

## <a name="example-udr-configuration-for-an-app-service-environment"></a><span data-ttu-id="0d377-157">Пример настройки UDR для среды службы приложений</span><span class="sxs-lookup"><span data-stu-id="0d377-157">Example UDR Configuration for an App Service Environment</span></span>
<span data-ttu-id="0d377-158">**Предварительные требования**</span><span class="sxs-lookup"><span data-stu-id="0d377-158">**Pre-requisites**</span></span>

1. <span data-ttu-id="0d377-159">Установите Azure Powershell из hello [страницу загрузок Azure] [ AzureDownloads] (от июня 2015 или более поздней версии).</span><span class="sxs-lookup"><span data-stu-id="0d377-159">Install Azure Powershell from hello [Azure Downloads page][AzureDownloads] (dated June 2015 or later).</span></span>  <span data-ttu-id="0d377-160">В разделе «Средства командной строки» есть ссылка «Установить» в разделе «Windows Powershell», будут установлены новые командлеты Powershell hello.</span><span class="sxs-lookup"><span data-stu-id="0d377-160">Under "Command-line tools" there is an "Install" link under "Windows Powershell" that will install hello latest Powershell cmdlets.</span></span>
2. <span data-ttu-id="0d377-161">Мы рекомендуем создать уникальную подсеть для монопольного использования средой службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-161">It is recommended that a unique subnet is created for exclusive use by an App Service Environment.</span></span>  <span data-ttu-id="0d377-162">Благодаря этой подсети toohello UDRs применения hello открываются только исходящий трафик для hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-162">This ensures that hello UDRs applied toohello subnet will only open outbound traffic for hello App Service Environment.</span></span>
3. <span data-ttu-id="0d377-163">**Важные**: не развертывайте hello среды службы приложений до **после** выполняются следующие действия по настройке hello.</span><span class="sxs-lookup"><span data-stu-id="0d377-163">**Important**:  do not deploy hello App Service Environment until **after** hello following configuration steps are followed.</span></span>  <span data-ttu-id="0d377-164">Это гарантирует, что доступен исходящего сетевого подключения перед выполнением toodeploy среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-164">This ensures that outbound network connectivity is available before attempting toodeploy an App Service Environment.</span></span>

<span data-ttu-id="0d377-165">**Шаг 1. Создание именованной таблицы маршрутов**</span><span class="sxs-lookup"><span data-stu-id="0d377-165">**Step 1:  Create a named route table**</span></span>

<span data-ttu-id="0d377-166">Hello следующий фрагмент кода создает таблицу маршрут с именем «DirectInternetRouteTable» в регионе hello Azure Западная часть США:</span><span class="sxs-lookup"><span data-stu-id="0d377-166">hello following snippet creates a route table called "DirectInternetRouteTable" in hello West US Azure region:</span></span>

    New-AzureRouteTable -Name 'DirectInternetRouteTable' -Location uswest

<span data-ttu-id="0d377-167">**Шаг 2: Создайте один или несколько маршрутов в таблице маршрутов hello**</span><span class="sxs-lookup"><span data-stu-id="0d377-167">**Step 2:  Create one or more routes in hello route table**</span></span>

<span data-ttu-id="0d377-168">Вам потребуется tooadd один или несколько маршрутов таблицы маршрутов toohello в порядке tooenable исходящие подключения к Интернету.</span><span class="sxs-lookup"><span data-stu-id="0d377-168">You will need tooadd one or more routes toohello route table in order tooenable outbound Internet access.</span></span>  

<span data-ttu-id="0d377-169">Привет, рекомендуется использовать подход для настройки toohello исходящий доступ к Интернету является toodefine маршрут для 0.0.0.0/0, как показано ниже.</span><span class="sxs-lookup"><span data-stu-id="0d377-169">hello recommended approach for configuring outbound access toohello Internet is toodefine a route for 0.0.0.0/0 as shown below.</span></span>

    Get-AzureRouteTable -Name 'DirectInternetRouteTable' | Set-AzureRoute -RouteName 'Direct Internet Range 0' -AddressPrefix 0.0.0.0/0 -NextHopType Internet

<span data-ttu-id="0d377-170">Следует помните, что 0.0.0.0/0 — это адрес широкий диапазон таким образом, будут переопределяться более конкретные диапазоны адресов, объявленных с hello ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="0d377-170">Remember that 0.0.0.0/0 is a broad address range, and as such will be overridden by more specific address ranges advertised by hello ExpressRoute.</span></span>  <span data-ttu-id="0d377-171">toore-прохода hello предыдущих рекомендаций, UDR 0.0.0.0/0 маршрут должен использоваться вместе с конфигурацией, объявляет лишь также 0.0.0.0/0 ExressRoute.</span><span class="sxs-lookup"><span data-stu-id="0d377-171">toore-iterate hello earlier recommendation, a UDR with a 0.0.0.0/0 route should be used in conjunction with an ExressRoute configuration that only advertises 0.0.0.0/0 as well.</span></span> 

<span data-ttu-id="0d377-172">В качестве альтернативы можно загрузить полный и обновленный список диапазонов CIDR, используемый Azure.</span><span class="sxs-lookup"><span data-stu-id="0d377-172">As an alternative, you can download a comprehensive and updated list of CIDR ranges in use by Azure.</span></span>  <span data-ttu-id="0d377-173">Hello XML-файл, содержащий все hello Azure диапазонов адресов доступен из hello [центра загрузки Майкрософт][DownloadCenterAddressRanges].</span><span class="sxs-lookup"><span data-stu-id="0d377-173">hello Xml file containing all of hello Azure IP address ranges is available from hello [Microsoft Download Center][DownloadCenterAddressRanges].</span></span>  

<span data-ttu-id="0d377-174">Хотя Обратите внимание, что эти диапазоны изменяться со временем, таким образом создавая необходимость toohello периодических обновлений вручную пользователем маршруты tookeep синхронизацию.  Кроме того, так как значение по умолчанию верхний предел в 100 маршрутов в одном UDR будут требуется слишком» использованы Помесячные» hello Azure IP-адрес в диапазоне toofit выходит за пределы hello 100 маршрута, учитывая, что UDR определенных маршрутов должны toobe более точным определением, чем hello маршруты, объявленные с вашей ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="0d377-174">Note though that these ranges change over time, thus necessitating periodic manual updates toohello user defined routes tookeep in sync.  Also, since there is a default upper limit of 100 routes in a single UDR, you will need too"summarize" hello Azure IP address ranges toofit within hello 100 route limit, keeping in mind that UDR defined routes need toobe more specific than hello routes advertised by your ExpressRoute.</span></span>  

<span data-ttu-id="0d377-175">**Шаг 3: Свяжите hello маршрута таблицы toohello подсети содержащего hello среды службы приложений**</span><span class="sxs-lookup"><span data-stu-id="0d377-175">**Step 3:  Associate hello route table toohello subnet containing hello App Service Environment**</span></span>

<span data-ttu-id="0d377-176">Последний шаг настройки Hello — tooassociate hello маршрута таблицы toohello подсети развертывания hello среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-176">hello last  configuration step is tooassociate hello route table toohello subnet where hello App Service Environment will be deployed.</span></span>  <span data-ttu-id="0d377-177">Hello следующая команда связывает toohello «DirectInternetRouteTable» hello «ASESubnet», который в конечном итоге будет содержать среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-177">hello following command associates hello "DirectInternetRouteTable" toohello "ASESubnet" that will eventually contain an App Service Environment.</span></span>

    Set-AzureSubnetRouteTable -VirtualNetworkName 'YourVirtualNetworkNameHere' -SubnetName 'ASESubnet' -RouteTableName 'DirectInternetRouteTable'


<span data-ttu-id="0d377-178">**Шаг 4. Заключительные действия**</span><span class="sxs-lookup"><span data-stu-id="0d377-178">**Step 4:  Final Steps**</span></span>

<span data-ttu-id="0d377-179">После таблицы маршрутов hello привязанного toohello подсети, он рекомендуется toofirst теста и убедитесь, что hello предназначен эффект.</span><span class="sxs-lookup"><span data-stu-id="0d377-179">Once hello route table is bound toohello subnet, it is recommended toofirst test and confirm hello intended effect.</span></span>  <span data-ttu-id="0d377-180">Например развертывание виртуальной машины в подсети hello и убедитесь, что:</span><span class="sxs-lookup"><span data-stu-id="0d377-180">For example, deploy a virtual machine into hello subnet and confirm that:</span></span>

* <span data-ttu-id="0d377-181">Исходящий трафик tooboth Azure и конечные точки не Azure упомянутых ранее в Эта статья является **не** передаче вниз hello канал ExpressRoute.</span><span class="sxs-lookup"><span data-stu-id="0d377-181">Outbound traffic tooboth Azure and non-Azure endpoints mentioned earlier in this article is **not** flowing down hello ExpressRoute circuit.</span></span>  <span data-ttu-id="0d377-182">Очень важно tooverify такое поведение, так как в случае исходящего трафика из подсети hello по-прежнему принудительного туннелирования локально, создание среды службы приложений всегда будет ошибкой.</span><span class="sxs-lookup"><span data-stu-id="0d377-182">It is very important tooverify this behavior, since if outbound traffic from hello subnet is still being forced tunneled on-premises, App Service Environment creation will always fail.</span></span> 
* <span data-ttu-id="0d377-183">Уточняющие запросы DNS для конечных точек hello упоминалось ранее, все разрешают должным образом.</span><span class="sxs-lookup"><span data-stu-id="0d377-183">DNS lookups for hello endpoints mentioned earlier are all resolving properly.</span></span> 

<span data-ttu-id="0d377-184">После подтверждения hello выше шаги потребуется toodelete hello виртуальной машины, поскольку hello подсеть должна toobe «empty» во время hello hello, при создании среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-184">Once hello above steps are confirmed, you will need toodelete hello virtual machine because hello subnet needs toobe "empty" at hello time hello App Service Environment is created.</span></span>

<span data-ttu-id="0d377-185">После этого продолжите создание среды службы приложений.</span><span class="sxs-lookup"><span data-stu-id="0d377-185">Then proceed with creating an App Service Environment!</span></span>

## <a name="getting-started"></a><span data-ttu-id="0d377-186">Приступая к работе</span><span class="sxs-lookup"><span data-stu-id="0d377-186">Getting started</span></span>
<span data-ttu-id="0d377-187">Все статьи и как-для пользователя для среды службы приложений теперь доступны в hello [файл README для среды службы приложения](../app-service/app-service-app-service-environments-readme.md).</span><span class="sxs-lookup"><span data-stu-id="0d377-187">All articles and How-To's for App Service Environments are available in hello [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="0d377-188">tooget к работе с среды службы приложения, в разделе [tooApp введение среды службы][IntroToAppServiceEnvironment]</span><span class="sxs-lookup"><span data-stu-id="0d377-188">tooget started with App Service Environments, see [Introduction tooApp Service Environment][IntroToAppServiceEnvironment]</span></span>

<span data-ttu-id="0d377-189">Дополнительные сведения о платформе hello службе приложений Azure см. в разделе [службе приложений Azure][AzureAppService].</span><span class="sxs-lookup"><span data-stu-id="0d377-189">For more information about hello Azure App Service platform, see [Azure App Service][AzureAppService].</span></span>

<!-- LINKS -->
[virtualnetwork]: http://azure.microsoft.com/services/virtual-network/
[ExpressRoute]: http://azure.microsoft.com/services/expressroute/
[requiredports]: http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-control-inbound-traffic/
[NetworkSecurityGroups]: http://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[UDROverview]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-overview/
[UDRHowTo]: http://azure.microsoft.com/documentation/articles/virtual-networks-udr-how-to/
[HowToCreateAnAppServiceEnvironment]: http://azure.microsoft.com/documentation/articles/app-service-web-how-to-create-an-app-service-environment/
[AzureDownloads]: http://azure.microsoft.com/en-us/downloads/ 
[DownloadCenterAddressRanges]: http://www.microsoft.com/download/details.aspx?id=41653  
[NetworkSecurityGroups]: https://azure.microsoft.com/documentation/articles/virtual-networks-nsg/
[AzureAppService]: http://azure.microsoft.com/documentation/articles/app-service-value-prop-what-is/
[IntroToAppServiceEnvironment]:  http://azure.microsoft.com/documentation/articles/app-service-app-service-environment-intro/
[NewPortal]:  https://portal.azure.com


<!-- IMAGES -->
